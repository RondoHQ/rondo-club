var SD=t=>{throw TypeError(t)};var Pb=(t,e,r)=>e.has(t)||SD("Cannot "+r);var R=(t,e,r)=>(Pb(t,e,"read from private field"),r?r.call(t):e.get(t)),be=(t,e,r)=>e.has(t)?SD("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),se=(t,e,r,n)=>(Pb(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),De=(t,e,r)=>(Pb(t,e,"access private method"),r);var Gm=(t,e,r,n)=>({set _(i){se(t,e,i,r)},get _(){return R(t,e,n)}});function Fae(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}function ZX(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var eJ={exports:{}},Jv={},tJ={exports:{}},et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vp=Symbol.for("react.element"),qae=Symbol.for("react.portal"),Lae=Symbol.for("react.fragment"),Bae=Symbol.for("react.strict_mode"),zae=Symbol.for("react.profiler"),Vae=Symbol.for("react.provider"),Uae=Symbol.for("react.context"),Hae=Symbol.for("react.forward_ref"),Wae=Symbol.for("react.suspense"),Kae=Symbol.for("react.memo"),Gae=Symbol.for("react.lazy"),_D=Symbol.iterator;function Yae(t){return t===null||typeof t!="object"?null:(t=_D&&t[_D]||t["@@iterator"],typeof t=="function"?t:null)}var rJ={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nJ=Object.assign,iJ={};function Yd(t,e,r){this.props=t,this.context=e,this.refs=iJ,this.updater=r||rJ}Yd.prototype.isReactComponent={};Yd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Yd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sJ(){}sJ.prototype=Yd.prototype;function zI(t,e,r){this.props=t,this.context=e,this.refs=iJ,this.updater=r||rJ}var VI=zI.prototype=new sJ;VI.constructor=zI;nJ(VI,Yd.prototype);VI.isPureReactComponent=!0;var ED=Array.isArray,oJ=Object.prototype.hasOwnProperty,UI={current:null},aJ={key:!0,ref:!0,__self:!0,__source:!0};function lJ(t,e,r){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)oJ.call(e,n)&&!aJ.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:Vp,type:t,key:s,ref:o,props:i,_owner:UI.current}}function Qae(t,e){return{$$typeof:Vp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function HI(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vp}function Xae(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var ND=/\/+/g;function Ib(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Xae(""+t.key):e.toString(36)}function Fg(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Vp:case qae:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+Ib(o,0):n,ED(i)?(r="",t!=null&&(r=t.replace(ND,"$&/")+"/"),Fg(i,e,r,"",function(c){return c})):i!=null&&(HI(i)&&(i=Qae(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(ND,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",ED(t))for(var a=0;a<t.length;a++){s=t[a];var l=n+Ib(s,a);o+=Fg(s,e,r,l,i)}else if(l=Yae(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=n+Ib(s,a++),o+=Fg(s,e,r,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ym(t,e,r){if(t==null)return t;var n=[],i=0;return Fg(t,n,"","",function(s){return e.call(r,s,i++)}),n}function Jae(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Mn={current:null},qg={transition:null},Zae={ReactCurrentDispatcher:Mn,ReactCurrentBatchConfig:qg,ReactCurrentOwner:UI};function cJ(){throw Error("act(...) is not supported in production builds of React.")}et.Children={map:Ym,forEach:function(t,e,r){Ym(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Ym(t,function(){e++}),e},toArray:function(t){return Ym(t,function(e){return e})||[]},only:function(t){if(!HI(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};et.Component=Yd;et.Fragment=Lae;et.Profiler=zae;et.PureComponent=zI;et.StrictMode=Bae;et.Suspense=Wae;et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zae;et.act=cJ;et.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=nJ({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=UI.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)oJ.call(e,l)&&!aJ.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:Vp,type:t.type,key:i,ref:s,props:n,_owner:o}};et.createContext=function(t){return t={$$typeof:Uae,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Vae,_context:t},t.Consumer=t};et.createElement=lJ;et.createFactory=function(t){var e=lJ.bind(null,t);return e.type=t,e};et.createRef=function(){return{current:null}};et.forwardRef=function(t){return{$$typeof:Hae,render:t}};et.isValidElement=HI;et.lazy=function(t){return{$$typeof:Gae,_payload:{_status:-1,_result:t},_init:Jae}};et.memo=function(t,e){return{$$typeof:Kae,type:t,compare:e===void 0?null:e}};et.startTransition=function(t){var e=qg.transition;qg.transition={};try{t()}finally{qg.transition=e}};et.unstable_act=cJ;et.useCallback=function(t,e){return Mn.current.useCallback(t,e)};et.useContext=function(t){return Mn.current.useContext(t)};et.useDebugValue=function(){};et.useDeferredValue=function(t){return Mn.current.useDeferredValue(t)};et.useEffect=function(t,e){return Mn.current.useEffect(t,e)};et.useId=function(){return Mn.current.useId()};et.useImperativeHandle=function(t,e,r){return Mn.current.useImperativeHandle(t,e,r)};et.useInsertionEffect=function(t,e){return Mn.current.useInsertionEffect(t,e)};et.useLayoutEffect=function(t,e){return Mn.current.useLayoutEffect(t,e)};et.useMemo=function(t,e){return Mn.current.useMemo(t,e)};et.useReducer=function(t,e,r){return Mn.current.useReducer(t,e,r)};et.useRef=function(t){return Mn.current.useRef(t)};et.useState=function(t){return Mn.current.useState(t)};et.useSyncExternalStore=function(t,e,r){return Mn.current.useSyncExternalStore(t,e,r)};et.useTransition=function(){return Mn.current.useTransition()};et.version="18.3.1";tJ.exports=et;var T=tJ.exports;const Ae=ZX(T),ele=Fae({__proto__:null,default:Ae},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tle=T,rle=Symbol.for("react.element"),nle=Symbol.for("react.fragment"),ile=Object.prototype.hasOwnProperty,sle=tle.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ole={key:!0,ref:!0,__self:!0,__source:!0};function uJ(t,e,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)ile.call(e,n)&&!ole.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:rle,type:t,key:s,ref:o,props:i,_owner:sle.current}}Jv.Fragment=nle;Jv.jsx=uJ;Jv.jsxs=uJ;eJ.exports=Jv;var u=eJ.exports,gj={},dJ={exports:{}},mi={},hJ={exports:{}},fJ={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,W){var B=F.length;F.push(W);e:for(;0<B;){var U=B-1>>>1,K=F[U];if(0<i(K,W))F[U]=W,F[B]=K,B=U;else break e}}function r(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var W=F[0],B=F.pop();if(B!==W){F[0]=B;e:for(var U=0,K=F.length,fe=K>>>1;U<fe;){var we=2*(U+1)-1,Fe=F[we],Se=we+1,Oe=F[Se];if(0>i(Fe,B))Se<K&&0>i(Oe,Fe)?(F[U]=Oe,F[Se]=B,U=Se):(F[U]=Fe,F[we]=B,U=we);else if(Se<K&&0>i(Oe,B))F[U]=Oe,F[Se]=B,U=Se;else break e}}return W}function i(F,W){var B=F.sortIndex-W.sortIndex;return B!==0?B:F.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(F){for(var W=r(c);W!==null;){if(W.callback===null)n(c);else if(W.startTime<=F)n(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=r(c)}}function x(F){if(g=!1,w(F),!m)if(r(l)!==null)m=!0,I(S);else{var W=r(c);W!==null&&L(x,W.startTime-F)}}function S(F,W){m=!1,g&&(g=!1,y(E),E=-1),p=!0;var B=f;try{for(w(W),h=r(l);h!==null&&(!(h.expirationTime>W)||F&&!O());){var U=h.callback;if(typeof U=="function"){h.callback=null,f=h.priorityLevel;var K=U(h.expirationTime<=W);W=t.unstable_now(),typeof K=="function"?h.callback=K:h===r(l)&&n(l),w(W)}else n(l);h=r(l)}if(h!==null)var fe=!0;else{var we=r(c);we!==null&&L(x,we.startTime-W),fe=!1}return fe}finally{h=null,f=B,p=!1}}var _=!1,N=null,E=-1,k=5,C=-1;function O(){return!(t.unstable_now()-C<k)}function P(){if(N!==null){var F=t.unstable_now();C=F;var W=!0;try{W=N(!0,F)}finally{W?j():(_=!1,N=null)}}else _=!1}var j;if(typeof v=="function")j=function(){v(P)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,A=M.port2;M.port1.onmessage=P,j=function(){A.postMessage(null)}}else j=function(){b(P,0)};function I(F){N=F,_||(_=!0,j())}function L(F,W){E=b(function(){F(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,I(S))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(F){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var B=f;f=W;try{return F()}finally{f=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,W){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var B=f;f=F;try{return W()}finally{f=B}},t.unstable_scheduleCallback=function(F,W,B){var U=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?U+B:U):B=U,F){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=B+K,F={id:d++,callback:W,priorityLevel:F,startTime:B,expirationTime:K,sortIndex:-1},B>U?(F.sortIndex=B,e(c,F),r(l)===null&&F===r(c)&&(g?(y(E),E=-1):g=!0,L(x,B-U))):(F.sortIndex=K,e(l,F),m||p||(m=!0,I(S))),F},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(F){var W=f;return function(){var B=f;f=W;try{return F.apply(this,arguments)}finally{f=B}}}})(fJ);hJ.exports=fJ;var ale=hJ.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lle=T,pi=ale;function te(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pJ=new Set,Uf={};function Fc(t,e){xd(t,e),xd(t+"Capture",e)}function xd(t,e){for(Uf[t]=e,t=0;t<e.length;t++)pJ.add(e[t])}var Oo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yj=Object.prototype.hasOwnProperty,cle=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,CD={},kD={};function ule(t){return yj.call(kD,t)?!0:yj.call(CD,t)?!1:cle.test(t)?kD[t]=!0:(CD[t]=!0,!1)}function dle(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function hle(t,e,r,n){if(e===null||typeof e>"u"||dle(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $n(t,e,r,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var sn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){sn[t]=new $n(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];sn[e]=new $n(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){sn[t]=new $n(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){sn[t]=new $n(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){sn[t]=new $n(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){sn[t]=new $n(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){sn[t]=new $n(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){sn[t]=new $n(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){sn[t]=new $n(t,5,!1,t.toLowerCase(),null,!1,!1)});var WI=/[\-:]([a-z])/g;function KI(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(WI,KI);sn[e]=new $n(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(WI,KI);sn[e]=new $n(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(WI,KI);sn[e]=new $n(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){sn[t]=new $n(t,1,!1,t.toLowerCase(),null,!1,!1)});sn.xlinkHref=new $n("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){sn[t]=new $n(t,1,!1,t.toLowerCase(),null,!0,!0)});function GI(t,e,r,n){var i=sn.hasOwnProperty(e)?sn[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(hle(e,r,i,n)&&(r=null),n||i===null?ule(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Do=lle.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qm=Symbol.for("react.element"),ku=Symbol.for("react.portal"),Tu=Symbol.for("react.fragment"),YI=Symbol.for("react.strict_mode"),vj=Symbol.for("react.profiler"),mJ=Symbol.for("react.provider"),gJ=Symbol.for("react.context"),QI=Symbol.for("react.forward_ref"),bj=Symbol.for("react.suspense"),xj=Symbol.for("react.suspense_list"),XI=Symbol.for("react.memo"),ta=Symbol.for("react.lazy"),yJ=Symbol.for("react.offscreen"),TD=Symbol.iterator;function Ah(t){return t===null||typeof t!="object"?null:(t=TD&&t[TD]||t["@@iterator"],typeof t=="function"?t:null)}var Qt=Object.assign,Rb;function nf(t){if(Rb===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Rb=e&&e[1]||""}return`
`+Rb+t}var Mb=!1;function $b(t,e){if(!t||Mb)return"";Mb=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Mb=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?nf(t):""}function fle(t){switch(t.tag){case 5:return nf(t.type);case 16:return nf("Lazy");case 13:return nf("Suspense");case 19:return nf("SuspenseList");case 0:case 2:case 15:return t=$b(t.type,!1),t;case 11:return t=$b(t.type.render,!1),t;case 1:return t=$b(t.type,!0),t;default:return""}}function wj(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Tu:return"Fragment";case ku:return"Portal";case vj:return"Profiler";case YI:return"StrictMode";case bj:return"Suspense";case xj:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gJ:return(t.displayName||"Context")+".Consumer";case mJ:return(t._context.displayName||"Context")+".Provider";case QI:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case XI:return e=t.displayName||null,e!==null?e:wj(t.type)||"Memo";case ta:e=t._payload,t=t._init;try{return wj(t(e))}catch{}}return null}function ple(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wj(e);case 8:return e===YI?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ja(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vJ(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function mle(t){var e=vJ(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Xm(t){t._valueTracker||(t._valueTracker=mle(t))}function bJ(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=vJ(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function uy(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sj(t,e){var r=e.checked;return Qt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function OD(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Ja(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function xJ(t,e){e=e.checked,e!=null&&GI(t,"checked",e,!1)}function _j(t,e){xJ(t,e);var r=Ja(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ej(t,e.type,r):e.hasOwnProperty("defaultValue")&&Ej(t,e.type,Ja(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function jD(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Ej(t,e,r){(e!=="number"||uy(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var sf=Array.isArray;function Wu(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Ja(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Nj(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(te(91));return Qt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function PD(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(te(92));if(sf(r)){if(1<r.length)throw Error(te(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Ja(r)}}function wJ(t,e){var r=Ja(e.value),n=Ja(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function ID(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function SJ(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cj(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?SJ(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Jm,_J=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Jm=Jm||document.createElement("div"),Jm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Jm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Hf(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var mf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gle=["Webkit","ms","Moz","O"];Object.keys(mf).forEach(function(t){gle.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),mf[e]=mf[t]})});function EJ(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||mf.hasOwnProperty(t)&&mf[t]?(""+e).trim():e+"px"}function NJ(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=EJ(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var yle=Qt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kj(t,e){if(e){if(yle[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(te(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(te(62))}}function Tj(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oj=null;function JI(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jj=null,Ku=null,Gu=null;function RD(t){if(t=Wp(t)){if(typeof jj!="function")throw Error(te(280));var e=t.stateNode;e&&(e=n0(e),jj(t.stateNode,t.type,e))}}function CJ(t){Ku?Gu?Gu.push(t):Gu=[t]:Ku=t}function kJ(){if(Ku){var t=Ku,e=Gu;if(Gu=Ku=null,RD(t),e)for(t=0;t<e.length;t++)RD(e[t])}}function TJ(t,e){return t(e)}function OJ(){}var Db=!1;function jJ(t,e,r){if(Db)return t(e,r);Db=!0;try{return TJ(t,e,r)}finally{Db=!1,(Ku!==null||Gu!==null)&&(OJ(),kJ())}}function Wf(t,e){var r=t.stateNode;if(r===null)return null;var n=n0(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(te(231,e,typeof r));return r}var Pj=!1;if(Oo)try{var Fh={};Object.defineProperty(Fh,"passive",{get:function(){Pj=!0}}),window.addEventListener("test",Fh,Fh),window.removeEventListener("test",Fh,Fh)}catch{Pj=!1}function vle(t,e,r,n,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var gf=!1,dy=null,hy=!1,Ij=null,ble={onError:function(t){gf=!0,dy=t}};function xle(t,e,r,n,i,s,o,a,l){gf=!1,dy=null,vle.apply(ble,arguments)}function wle(t,e,r,n,i,s,o,a,l){if(xle.apply(this,arguments),gf){if(gf){var c=dy;gf=!1,dy=null}else throw Error(te(198));hy||(hy=!0,Ij=c)}}function qc(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function PJ(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function MD(t){if(qc(t)!==t)throw Error(te(188))}function Sle(t){var e=t.alternate;if(!e){if(e=qc(t),e===null)throw Error(te(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return MD(i),t;if(s===n)return MD(i),e;s=s.sibling}throw Error(te(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(te(189))}}if(r.alternate!==n)throw Error(te(190))}if(r.tag!==3)throw Error(te(188));return r.stateNode.current===r?t:e}function IJ(t){return t=Sle(t),t!==null?RJ(t):null}function RJ(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=RJ(t);if(e!==null)return e;t=t.sibling}return null}var MJ=pi.unstable_scheduleCallback,$D=pi.unstable_cancelCallback,_le=pi.unstable_shouldYield,Ele=pi.unstable_requestPaint,hr=pi.unstable_now,Nle=pi.unstable_getCurrentPriorityLevel,ZI=pi.unstable_ImmediatePriority,$J=pi.unstable_UserBlockingPriority,fy=pi.unstable_NormalPriority,Cle=pi.unstable_LowPriority,DJ=pi.unstable_IdlePriority,Zv=null,Ms=null;function kle(t){if(Ms&&typeof Ms.onCommitFiberRoot=="function")try{Ms.onCommitFiberRoot(Zv,t,void 0,(t.current.flags&128)===128)}catch{}}var us=Math.clz32?Math.clz32:jle,Tle=Math.log,Ole=Math.LN2;function jle(t){return t>>>=0,t===0?32:31-(Tle(t)/Ole|0)|0}var Zm=64,eg=4194304;function of(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function py(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=of(a):(s&=o,s!==0&&(n=of(s)))}else o=r&~i,o!==0?n=of(o):s!==0&&(n=of(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-us(e),i=1<<r,n|=t[r],e&=~i;return n}function Ple(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ile(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-us(s),a=1<<o,l=i[o];l===-1?(!(a&r)||a&n)&&(i[o]=Ple(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Rj(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function AJ(){var t=Zm;return Zm<<=1,!(Zm&4194240)&&(Zm=64),t}function Ab(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Up(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-us(e),t[e]=r}function Rle(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-us(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function eR(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-us(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var Ct=0;function FJ(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var qJ,tR,LJ,BJ,zJ,Mj=!1,tg=[],Pa=null,Ia=null,Ra=null,Kf=new Map,Gf=new Map,ca=[],Mle="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function DD(t,e){switch(t){case"focusin":case"focusout":Pa=null;break;case"dragenter":case"dragleave":Ia=null;break;case"mouseover":case"mouseout":Ra=null;break;case"pointerover":case"pointerout":Kf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gf.delete(e.pointerId)}}function qh(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Wp(e),e!==null&&tR(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function $le(t,e,r,n,i){switch(e){case"focusin":return Pa=qh(Pa,t,e,r,n,i),!0;case"dragenter":return Ia=qh(Ia,t,e,r,n,i),!0;case"mouseover":return Ra=qh(Ra,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Kf.set(s,qh(Kf.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Gf.set(s,qh(Gf.get(s)||null,t,e,r,n,i)),!0}return!1}function VJ(t){var e=Tl(t.target);if(e!==null){var r=qc(e);if(r!==null){if(e=r.tag,e===13){if(e=PJ(r),e!==null){t.blockedOn=e,zJ(t.priority,function(){LJ(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=$j(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Oj=n,r.target.dispatchEvent(n),Oj=null}else return e=Wp(r),e!==null&&tR(e),t.blockedOn=r,!1;e.shift()}return!0}function AD(t,e,r){Lg(t)&&r.delete(e)}function Dle(){Mj=!1,Pa!==null&&Lg(Pa)&&(Pa=null),Ia!==null&&Lg(Ia)&&(Ia=null),Ra!==null&&Lg(Ra)&&(Ra=null),Kf.forEach(AD),Gf.forEach(AD)}function Lh(t,e){t.blockedOn===e&&(t.blockedOn=null,Mj||(Mj=!0,pi.unstable_scheduleCallback(pi.unstable_NormalPriority,Dle)))}function Yf(t){function e(i){return Lh(i,t)}if(0<tg.length){Lh(tg[0],t);for(var r=1;r<tg.length;r++){var n=tg[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Pa!==null&&Lh(Pa,t),Ia!==null&&Lh(Ia,t),Ra!==null&&Lh(Ra,t),Kf.forEach(e),Gf.forEach(e),r=0;r<ca.length;r++)n=ca[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<ca.length&&(r=ca[0],r.blockedOn===null);)VJ(r),r.blockedOn===null&&ca.shift()}var Yu=Do.ReactCurrentBatchConfig,my=!0;function Ale(t,e,r,n){var i=Ct,s=Yu.transition;Yu.transition=null;try{Ct=1,rR(t,e,r,n)}finally{Ct=i,Yu.transition=s}}function Fle(t,e,r,n){var i=Ct,s=Yu.transition;Yu.transition=null;try{Ct=4,rR(t,e,r,n)}finally{Ct=i,Yu.transition=s}}function rR(t,e,r,n){if(my){var i=$j(t,e,r,n);if(i===null)Kb(t,e,n,gy,r),DD(t,n);else if($le(i,t,e,r,n))n.stopPropagation();else if(DD(t,n),e&4&&-1<Mle.indexOf(t)){for(;i!==null;){var s=Wp(i);if(s!==null&&qJ(s),s=$j(t,e,r,n),s===null&&Kb(t,e,n,gy,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else Kb(t,e,n,null,r)}}var gy=null;function $j(t,e,r,n){if(gy=null,t=JI(n),t=Tl(t),t!==null)if(e=qc(t),e===null)t=null;else if(r=e.tag,r===13){if(t=PJ(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return gy=t,null}function UJ(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Nle()){case ZI:return 1;case $J:return 4;case fy:case Cle:return 16;case DJ:return 536870912;default:return 16}default:return 16}}var Ea=null,nR=null,Bg=null;function HJ(){if(Bg)return Bg;var t,e=nR,r=e.length,n,i="value"in Ea?Ea.value:Ea.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[s-n];n++);return Bg=i.slice(t,1<n?1-n:void 0)}function zg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function rg(){return!0}function FD(){return!1}function gi(t){function e(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?rg:FD,this.isPropagationStopped=FD,this}return Qt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=rg)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=rg)},persist:function(){},isPersistent:rg}),e}var Qd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},iR=gi(Qd),Hp=Qt({},Qd,{view:0,detail:0}),qle=gi(Hp),Fb,qb,Bh,e0=Qt({},Hp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sR,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bh&&(Bh&&t.type==="mousemove"?(Fb=t.screenX-Bh.screenX,qb=t.screenY-Bh.screenY):qb=Fb=0,Bh=t),Fb)},movementY:function(t){return"movementY"in t?t.movementY:qb}}),qD=gi(e0),Lle=Qt({},e0,{dataTransfer:0}),Ble=gi(Lle),zle=Qt({},Hp,{relatedTarget:0}),Lb=gi(zle),Vle=Qt({},Qd,{animationName:0,elapsedTime:0,pseudoElement:0}),Ule=gi(Vle),Hle=Qt({},Qd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Wle=gi(Hle),Kle=Qt({},Qd,{data:0}),LD=gi(Kle),Gle={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yle={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qle={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xle(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Qle[t])?!!e[t]:!1}function sR(){return Xle}var Jle=Qt({},Hp,{key:function(t){if(t.key){var e=Gle[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=zg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Yle[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sR,charCode:function(t){return t.type==="keypress"?zg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Zle=gi(Jle),ece=Qt({},e0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),BD=gi(ece),tce=Qt({},Hp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sR}),rce=gi(tce),nce=Qt({},Qd,{propertyName:0,elapsedTime:0,pseudoElement:0}),ice=gi(nce),sce=Qt({},e0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),oce=gi(sce),ace=[9,13,27,32],oR=Oo&&"CompositionEvent"in window,yf=null;Oo&&"documentMode"in document&&(yf=document.documentMode);var lce=Oo&&"TextEvent"in window&&!yf,WJ=Oo&&(!oR||yf&&8<yf&&11>=yf),zD=" ",VD=!1;function KJ(t,e){switch(t){case"keyup":return ace.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function GJ(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ou=!1;function cce(t,e){switch(t){case"compositionend":return GJ(e);case"keypress":return e.which!==32?null:(VD=!0,zD);case"textInput":return t=e.data,t===zD&&VD?null:t;default:return null}}function uce(t,e){if(Ou)return t==="compositionend"||!oR&&KJ(t,e)?(t=HJ(),Bg=nR=Ea=null,Ou=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return WJ&&e.locale!=="ko"?null:e.data;default:return null}}var dce={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function UD(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!dce[t.type]:e==="textarea"}function YJ(t,e,r,n){CJ(n),e=yy(e,"onChange"),0<e.length&&(r=new iR("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var vf=null,Qf=null;function hce(t){oZ(t,0)}function t0(t){var e=Iu(t);if(bJ(e))return t}function fce(t,e){if(t==="change")return e}var QJ=!1;if(Oo){var Bb;if(Oo){var zb="oninput"in document;if(!zb){var HD=document.createElement("div");HD.setAttribute("oninput","return;"),zb=typeof HD.oninput=="function"}Bb=zb}else Bb=!1;QJ=Bb&&(!document.documentMode||9<document.documentMode)}function WD(){vf&&(vf.detachEvent("onpropertychange",XJ),Qf=vf=null)}function XJ(t){if(t.propertyName==="value"&&t0(Qf)){var e=[];YJ(e,Qf,t,JI(t)),jJ(hce,e)}}function pce(t,e,r){t==="focusin"?(WD(),vf=e,Qf=r,vf.attachEvent("onpropertychange",XJ)):t==="focusout"&&WD()}function mce(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return t0(Qf)}function gce(t,e){if(t==="click")return t0(e)}function yce(t,e){if(t==="input"||t==="change")return t0(e)}function vce(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hs=typeof Object.is=="function"?Object.is:vce;function Xf(t,e){if(hs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!yj.call(e,i)||!hs(t[i],e[i]))return!1}return!0}function KD(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function GD(t,e){var r=KD(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=KD(r)}}function JJ(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?JJ(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ZJ(){for(var t=window,e=uy();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=uy(t.document)}return e}function aR(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function bce(t){var e=ZJ(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&JJ(r.ownerDocument.documentElement,r)){if(n!==null&&aR(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=GD(r,s);var o=GD(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var xce=Oo&&"documentMode"in document&&11>=document.documentMode,ju=null,Dj=null,bf=null,Aj=!1;function YD(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Aj||ju==null||ju!==uy(n)||(n=ju,"selectionStart"in n&&aR(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),bf&&Xf(bf,n)||(bf=n,n=yy(Dj,"onSelect"),0<n.length&&(e=new iR("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=ju)))}function ng(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Pu={animationend:ng("Animation","AnimationEnd"),animationiteration:ng("Animation","AnimationIteration"),animationstart:ng("Animation","AnimationStart"),transitionend:ng("Transition","TransitionEnd")},Vb={},eZ={};Oo&&(eZ=document.createElement("div").style,"AnimationEvent"in window||(delete Pu.animationend.animation,delete Pu.animationiteration.animation,delete Pu.animationstart.animation),"TransitionEvent"in window||delete Pu.transitionend.transition);function r0(t){if(Vb[t])return Vb[t];if(!Pu[t])return t;var e=Pu[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in eZ)return Vb[t]=e[r];return t}var tZ=r0("animationend"),rZ=r0("animationiteration"),nZ=r0("animationstart"),iZ=r0("transitionend"),sZ=new Map,QD="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ol(t,e){sZ.set(t,e),Fc(e,[t])}for(var Ub=0;Ub<QD.length;Ub++){var Hb=QD[Ub],wce=Hb.toLowerCase(),Sce=Hb[0].toUpperCase()+Hb.slice(1);ol(wce,"on"+Sce)}ol(tZ,"onAnimationEnd");ol(rZ,"onAnimationIteration");ol(nZ,"onAnimationStart");ol("dblclick","onDoubleClick");ol("focusin","onFocus");ol("focusout","onBlur");ol(iZ,"onTransitionEnd");xd("onMouseEnter",["mouseout","mouseover"]);xd("onMouseLeave",["mouseout","mouseover"]);xd("onPointerEnter",["pointerout","pointerover"]);xd("onPointerLeave",["pointerout","pointerover"]);Fc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var af="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_ce=new Set("cancel close invalid load scroll toggle".split(" ").concat(af));function XD(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,wle(n,e,void 0,t),t.currentTarget=null}function oZ(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;XD(i,a,c),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;XD(i,a,c),s=l}}}if(hy)throw t=Ij,hy=!1,Ij=null,t}function qt(t,e){var r=e[zj];r===void 0&&(r=e[zj]=new Set);var n=t+"__bubble";r.has(n)||(aZ(e,t,2,!1),r.add(n))}function Wb(t,e,r){var n=0;e&&(n|=4),aZ(r,t,n,e)}var ig="_reactListening"+Math.random().toString(36).slice(2);function Jf(t){if(!t[ig]){t[ig]=!0,pJ.forEach(function(r){r!=="selectionchange"&&(_ce.has(r)||Wb(r,!1,t),Wb(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ig]||(e[ig]=!0,Wb("selectionchange",!1,e))}}function aZ(t,e,r,n){switch(UJ(e)){case 1:var i=Ale;break;case 4:i=Fle;break;default:i=rR}r=i.bind(null,e,r,t),i=void 0,!Pj||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Kb(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Tl(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue e}a=a.parentNode}}n=n.return}jJ(function(){var c=s,d=JI(r),h=[];e:{var f=sZ.get(t);if(f!==void 0){var p=iR,m=t;switch(t){case"keypress":if(zg(r)===0)break e;case"keydown":case"keyup":p=Zle;break;case"focusin":m="focus",p=Lb;break;case"focusout":m="blur",p=Lb;break;case"beforeblur":case"afterblur":p=Lb;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=qD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Ble;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=rce;break;case tZ:case rZ:case nZ:p=Ule;break;case iZ:p=ice;break;case"scroll":p=qle;break;case"wheel":p=oce;break;case"copy":case"cut":case"paste":p=Wle;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=BD}var g=(e&4)!==0,b=!g&&t==="scroll",y=g?f!==null?f+"Capture":null:f;g=[];for(var v=c,w;v!==null;){w=v;var x=w.stateNode;if(w.tag===5&&x!==null&&(w=x,y!==null&&(x=Wf(v,y),x!=null&&g.push(Zf(v,x,w)))),b)break;v=v.return}0<g.length&&(f=new p(f,m,null,r,d),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&r!==Oj&&(m=r.relatedTarget||r.fromElement)&&(Tl(m)||m[jo]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=c,m=m?Tl(m):null,m!==null&&(b=qc(m),m!==b||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(g=qD,x="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=BD,x="onPointerLeave",y="onPointerEnter",v="pointer"),b=p==null?f:Iu(p),w=m==null?f:Iu(m),f=new g(x,v+"leave",p,r,d),f.target=b,f.relatedTarget=w,x=null,Tl(d)===c&&(g=new g(y,v+"enter",m,r,d),g.target=w,g.relatedTarget=b,x=g),b=x,p&&m)t:{for(g=p,y=m,v=0,w=g;w;w=pu(w))v++;for(w=0,x=y;x;x=pu(x))w++;for(;0<v-w;)g=pu(g),v--;for(;0<w-v;)y=pu(y),w--;for(;v--;){if(g===y||y!==null&&g===y.alternate)break t;g=pu(g),y=pu(y)}g=null}else g=null;p!==null&&JD(h,f,p,g,!1),m!==null&&b!==null&&JD(h,b,m,g,!0)}}e:{if(f=c?Iu(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var S=fce;else if(UD(f))if(QJ)S=yce;else{S=mce;var _=pce}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=gce);if(S&&(S=S(t,c))){YJ(h,S,r,d);break e}_&&_(t,f,c),t==="focusout"&&(_=f._wrapperState)&&_.controlled&&f.type==="number"&&Ej(f,"number",f.value)}switch(_=c?Iu(c):window,t){case"focusin":(UD(_)||_.contentEditable==="true")&&(ju=_,Dj=c,bf=null);break;case"focusout":bf=Dj=ju=null;break;case"mousedown":Aj=!0;break;case"contextmenu":case"mouseup":case"dragend":Aj=!1,YD(h,r,d);break;case"selectionchange":if(xce)break;case"keydown":case"keyup":YD(h,r,d)}var N;if(oR)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Ou?KJ(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(WJ&&r.locale!=="ko"&&(Ou||E!=="onCompositionStart"?E==="onCompositionEnd"&&Ou&&(N=HJ()):(Ea=d,nR="value"in Ea?Ea.value:Ea.textContent,Ou=!0)),_=yy(c,E),0<_.length&&(E=new LD(E,t,null,r,d),h.push({event:E,listeners:_}),N?E.data=N:(N=GJ(r),N!==null&&(E.data=N)))),(N=lce?cce(t,r):uce(t,r))&&(c=yy(c,"onBeforeInput"),0<c.length&&(d=new LD("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:c}),d.data=N))}oZ(h,e)})}function Zf(t,e,r){return{instance:t,listener:e,currentTarget:r}}function yy(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Wf(t,r),s!=null&&n.unshift(Zf(t,s,i)),s=Wf(t,e),s!=null&&n.push(Zf(t,s,i))),t=t.return}return n}function pu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function JD(t,e,r,n,i){for(var s=e._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,i?(l=Wf(r,s),l!=null&&o.unshift(Zf(r,l,a))):i||(l=Wf(r,s),l!=null&&o.push(Zf(r,l,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var Ece=/\r\n?/g,Nce=/\u0000|\uFFFD/g;function ZD(t){return(typeof t=="string"?t:""+t).replace(Ece,`
`).replace(Nce,"")}function sg(t,e,r){if(e=ZD(e),ZD(t)!==e&&r)throw Error(te(425))}function vy(){}var Fj=null,qj=null;function Lj(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bj=typeof setTimeout=="function"?setTimeout:void 0,Cce=typeof clearTimeout=="function"?clearTimeout:void 0,eA=typeof Promise=="function"?Promise:void 0,kce=typeof queueMicrotask=="function"?queueMicrotask:typeof eA<"u"?function(t){return eA.resolve(null).then(t).catch(Tce)}:Bj;function Tce(t){setTimeout(function(){throw t})}function Gb(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Yf(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Yf(e)}function Ma(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function tA(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Xd=Math.random().toString(36).slice(2),Os="__reactFiber$"+Xd,ep="__reactProps$"+Xd,jo="__reactContainer$"+Xd,zj="__reactEvents$"+Xd,Oce="__reactListeners$"+Xd,jce="__reactHandles$"+Xd;function Tl(t){var e=t[Os];if(e)return e;for(var r=t.parentNode;r;){if(e=r[jo]||r[Os]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=tA(t);t!==null;){if(r=t[Os])return r;t=tA(t)}return e}t=r,r=t.parentNode}return null}function Wp(t){return t=t[Os]||t[jo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Iu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(te(33))}function n0(t){return t[ep]||null}var Vj=[],Ru=-1;function al(t){return{current:t}}function Bt(t){0>Ru||(t.current=Vj[Ru],Vj[Ru]=null,Ru--)}function Ft(t,e){Ru++,Vj[Ru]=t.current,t.current=e}var Za={},mn=al(Za),Kn=al(!1),hc=Za;function wd(t,e){var r=t.type.contextTypes;if(!r)return Za;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Gn(t){return t=t.childContextTypes,t!=null}function by(){Bt(Kn),Bt(mn)}function rA(t,e,r){if(mn.current!==Za)throw Error(te(168));Ft(mn,e),Ft(Kn,r)}function lZ(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(te(108,ple(t)||"Unknown",i));return Qt({},r,n)}function xy(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Za,hc=mn.current,Ft(mn,t),Ft(Kn,Kn.current),!0}function nA(t,e,r){var n=t.stateNode;if(!n)throw Error(te(169));r?(t=lZ(t,e,hc),n.__reactInternalMemoizedMergedChildContext=t,Bt(Kn),Bt(mn),Ft(mn,t)):Bt(Kn),Ft(Kn,r)}var io=null,i0=!1,Yb=!1;function cZ(t){io===null?io=[t]:io.push(t)}function Pce(t){i0=!0,cZ(t)}function ll(){if(!Yb&&io!==null){Yb=!0;var t=0,e=Ct;try{var r=io;for(Ct=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}io=null,i0=!1}catch(i){throw io!==null&&(io=io.slice(t+1)),MJ(ZI,ll),i}finally{Ct=e,Yb=!1}}return null}var Mu=[],$u=0,wy=null,Sy=0,ji=[],Pi=0,fc=null,uo=1,ho="";function El(t,e){Mu[$u++]=Sy,Mu[$u++]=wy,wy=t,Sy=e}function uZ(t,e,r){ji[Pi++]=uo,ji[Pi++]=ho,ji[Pi++]=fc,fc=t;var n=uo;t=ho;var i=32-us(n)-1;n&=~(1<<i),r+=1;var s=32-us(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,uo=1<<32-us(e)+i|r<<i|n,ho=s+t}else uo=1<<s|r<<i|n,ho=t}function lR(t){t.return!==null&&(El(t,1),uZ(t,1,0))}function cR(t){for(;t===wy;)wy=Mu[--$u],Mu[$u]=null,Sy=Mu[--$u],Mu[$u]=null;for(;t===fc;)fc=ji[--Pi],ji[Pi]=null,ho=ji[--Pi],ji[Pi]=null,uo=ji[--Pi],ji[Pi]=null}var hi=null,di=null,Ut=!1,rs=null;function dZ(t,e){var r=Mi(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function iA(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hi=t,di=Ma(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hi=t,di=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=fc!==null?{id:uo,overflow:ho}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Mi(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,hi=t,di=null,!0):!1;default:return!1}}function Uj(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hj(t){if(Ut){var e=di;if(e){var r=e;if(!iA(t,e)){if(Uj(t))throw Error(te(418));e=Ma(r.nextSibling);var n=hi;e&&iA(t,e)?dZ(n,r):(t.flags=t.flags&-4097|2,Ut=!1,hi=t)}}else{if(Uj(t))throw Error(te(418));t.flags=t.flags&-4097|2,Ut=!1,hi=t}}}function sA(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hi=t}function og(t){if(t!==hi)return!1;if(!Ut)return sA(t),Ut=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Lj(t.type,t.memoizedProps)),e&&(e=di)){if(Uj(t))throw hZ(),Error(te(418));for(;e;)dZ(t,e),e=Ma(e.nextSibling)}if(sA(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(te(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){di=Ma(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}di=null}}else di=hi?Ma(t.stateNode.nextSibling):null;return!0}function hZ(){for(var t=di;t;)t=Ma(t.nextSibling)}function Sd(){di=hi=null,Ut=!1}function uR(t){rs===null?rs=[t]:rs.push(t)}var Ice=Do.ReactCurrentBatchConfig;function zh(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(te(309));var n=r.stateNode}if(!n)throw Error(te(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(te(284));if(!r._owner)throw Error(te(290,t))}return t}function ag(t,e){throw t=Object.prototype.toString.call(e),Error(te(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function oA(t){var e=t._init;return e(t._payload)}function fZ(t){function e(y,v){if(t){var w=y.deletions;w===null?(y.deletions=[v],y.flags|=16):w.push(v)}}function r(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function n(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=Fa(y,v),y.index=0,y.sibling=null,y}function s(y,v,w){return y.index=w,t?(w=y.alternate,w!==null?(w=w.index,w<v?(y.flags|=2,v):w):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,v,w,x){return v===null||v.tag!==6?(v=r1(w,y.mode,x),v.return=y,v):(v=i(v,w),v.return=y,v)}function l(y,v,w,x){var S=w.type;return S===Tu?d(y,v,w.props.children,x,w.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ta&&oA(S)===v.type)?(x=i(v,w.props),x.ref=zh(y,v,w),x.return=y,x):(x=Yg(w.type,w.key,w.props,null,y.mode,x),x.ref=zh(y,v,w),x.return=y,x)}function c(y,v,w,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=n1(w,y.mode,x),v.return=y,v):(v=i(v,w.children||[]),v.return=y,v)}function d(y,v,w,x,S){return v===null||v.tag!==7?(v=Jl(w,y.mode,x,S),v.return=y,v):(v=i(v,w),v.return=y,v)}function h(y,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=r1(""+v,y.mode,w),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Qm:return w=Yg(v.type,v.key,v.props,null,y.mode,w),w.ref=zh(y,null,v),w.return=y,w;case ku:return v=n1(v,y.mode,w),v.return=y,v;case ta:var x=v._init;return h(y,x(v._payload),w)}if(sf(v)||Ah(v))return v=Jl(v,y.mode,w,null),v.return=y,v;ag(y,v)}return null}function f(y,v,w,x){var S=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(y,v,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Qm:return w.key===S?l(y,v,w,x):null;case ku:return w.key===S?c(y,v,w,x):null;case ta:return S=w._init,f(y,v,S(w._payload),x)}if(sf(w)||Ah(w))return S!==null?null:d(y,v,w,x,null);ag(y,w)}return null}function p(y,v,w,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(w)||null,a(v,y,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Qm:return y=y.get(x.key===null?w:x.key)||null,l(v,y,x,S);case ku:return y=y.get(x.key===null?w:x.key)||null,c(v,y,x,S);case ta:var _=x._init;return p(y,v,w,_(x._payload),S)}if(sf(x)||Ah(x))return y=y.get(w)||null,d(v,y,x,S,null);ag(v,x)}return null}function m(y,v,w,x){for(var S=null,_=null,N=v,E=v=0,k=null;N!==null&&E<w.length;E++){N.index>E?(k=N,N=null):k=N.sibling;var C=f(y,N,w[E],x);if(C===null){N===null&&(N=k);break}t&&N&&C.alternate===null&&e(y,N),v=s(C,v,E),_===null?S=C:_.sibling=C,_=C,N=k}if(E===w.length)return r(y,N),Ut&&El(y,E),S;if(N===null){for(;E<w.length;E++)N=h(y,w[E],x),N!==null&&(v=s(N,v,E),_===null?S=N:_.sibling=N,_=N);return Ut&&El(y,E),S}for(N=n(y,N);E<w.length;E++)k=p(N,y,E,w[E],x),k!==null&&(t&&k.alternate!==null&&N.delete(k.key===null?E:k.key),v=s(k,v,E),_===null?S=k:_.sibling=k,_=k);return t&&N.forEach(function(O){return e(y,O)}),Ut&&El(y,E),S}function g(y,v,w,x){var S=Ah(w);if(typeof S!="function")throw Error(te(150));if(w=S.call(w),w==null)throw Error(te(151));for(var _=S=null,N=v,E=v=0,k=null,C=w.next();N!==null&&!C.done;E++,C=w.next()){N.index>E?(k=N,N=null):k=N.sibling;var O=f(y,N,C.value,x);if(O===null){N===null&&(N=k);break}t&&N&&O.alternate===null&&e(y,N),v=s(O,v,E),_===null?S=O:_.sibling=O,_=O,N=k}if(C.done)return r(y,N),Ut&&El(y,E),S;if(N===null){for(;!C.done;E++,C=w.next())C=h(y,C.value,x),C!==null&&(v=s(C,v,E),_===null?S=C:_.sibling=C,_=C);return Ut&&El(y,E),S}for(N=n(y,N);!C.done;E++,C=w.next())C=p(N,y,E,C.value,x),C!==null&&(t&&C.alternate!==null&&N.delete(C.key===null?E:C.key),v=s(C,v,E),_===null?S=C:_.sibling=C,_=C);return t&&N.forEach(function(P){return e(y,P)}),Ut&&El(y,E),S}function b(y,v,w,x){if(typeof w=="object"&&w!==null&&w.type===Tu&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Qm:e:{for(var S=w.key,_=v;_!==null;){if(_.key===S){if(S=w.type,S===Tu){if(_.tag===7){r(y,_.sibling),v=i(_,w.props.children),v.return=y,y=v;break e}}else if(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ta&&oA(S)===_.type){r(y,_.sibling),v=i(_,w.props),v.ref=zh(y,_,w),v.return=y,y=v;break e}r(y,_);break}else e(y,_);_=_.sibling}w.type===Tu?(v=Jl(w.props.children,y.mode,x,w.key),v.return=y,y=v):(x=Yg(w.type,w.key,w.props,null,y.mode,x),x.ref=zh(y,v,w),x.return=y,y=x)}return o(y);case ku:e:{for(_=w.key;v!==null;){if(v.key===_)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){r(y,v.sibling),v=i(v,w.children||[]),v.return=y,y=v;break e}else{r(y,v);break}else e(y,v);v=v.sibling}v=n1(w,y.mode,x),v.return=y,y=v}return o(y);case ta:return _=w._init,b(y,v,_(w._payload),x)}if(sf(w))return m(y,v,w,x);if(Ah(w))return g(y,v,w,x);ag(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(r(y,v.sibling),v=i(v,w),v.return=y,y=v):(r(y,v),v=r1(w,y.mode,x),v.return=y,y=v),o(y)):r(y,v)}return b}var _d=fZ(!0),pZ=fZ(!1),_y=al(null),Ey=null,Du=null,dR=null;function hR(){dR=Du=Ey=null}function fR(t){var e=_y.current;Bt(_y),t._currentValue=e}function Wj(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Qu(t,e){Ey=t,dR=Du=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Hn=!0),t.firstContext=null)}function Li(t){var e=t._currentValue;if(dR!==t)if(t={context:t,memoizedValue:e,next:null},Du===null){if(Ey===null)throw Error(te(308));Du=t,Ey.dependencies={lanes:0,firstContext:t}}else Du=Du.next=t;return e}var Ol=null;function pR(t){Ol===null?Ol=[t]:Ol.push(t)}function mZ(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,pR(e)):(r.next=i.next,i.next=r),e.interleaved=r,Po(t,n)}function Po(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ra=!1;function mR(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gZ(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function go(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function $a(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,ht&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Po(t,r)}return i=n.interleaved,i===null?(e.next=e,pR(n)):(e.next=i.next,i.next=e),n.interleaved=e,Po(t,r)}function Vg(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,eR(t,r)}}function aA(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Ny(t,e,r,n){var i=t.updateQueue;ra=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=c=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,g=a;switch(f=e,p=r,g.tag){case 1:if(m=g.payload,typeof m=="function"){h=m.call(p,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(p,h,f):m,f==null)break e;h=Qt({},h,f);break e;case 2:ra=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,l=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);mc|=o,t.lanes=o,t.memoizedState=h}}function lA(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(te(191,i));i.call(n)}}}var Kp={},$s=al(Kp),tp=al(Kp),rp=al(Kp);function jl(t){if(t===Kp)throw Error(te(174));return t}function gR(t,e){switch(Ft(rp,e),Ft(tp,t),Ft($s,Kp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Cj(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Cj(e,t)}Bt($s),Ft($s,e)}function Ed(){Bt($s),Bt(tp),Bt(rp)}function yZ(t){jl(rp.current);var e=jl($s.current),r=Cj(e,t.type);e!==r&&(Ft(tp,t),Ft($s,r))}function yR(t){tp.current===t&&(Bt($s),Bt(tp))}var Wt=al(0);function Cy(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qb=[];function vR(){for(var t=0;t<Qb.length;t++)Qb[t]._workInProgressVersionPrimary=null;Qb.length=0}var Ug=Do.ReactCurrentDispatcher,Xb=Do.ReactCurrentBatchConfig,pc=0,Gt=null,Pr=null,Fr=null,ky=!1,xf=!1,np=0,Rce=0;function cn(){throw Error(te(321))}function bR(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!hs(t[r],e[r]))return!1;return!0}function xR(t,e,r,n,i,s){if(pc=s,Gt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ug.current=t===null||t.memoizedState===null?Ace:Fce,t=r(n,i),xf){s=0;do{if(xf=!1,np=0,25<=s)throw Error(te(301));s+=1,Fr=Pr=null,e.updateQueue=null,Ug.current=qce,t=r(n,i)}while(xf)}if(Ug.current=Ty,e=Pr!==null&&Pr.next!==null,pc=0,Fr=Pr=Gt=null,ky=!1,e)throw Error(te(300));return t}function wR(){var t=np!==0;return np=0,t}function ws(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fr===null?Gt.memoizedState=Fr=t:Fr=Fr.next=t,Fr}function Bi(){if(Pr===null){var t=Gt.alternate;t=t!==null?t.memoizedState:null}else t=Pr.next;var e=Fr===null?Gt.memoizedState:Fr.next;if(e!==null)Fr=e,Pr=t;else{if(t===null)throw Error(te(310));Pr=t,t={memoizedState:Pr.memoizedState,baseState:Pr.baseState,baseQueue:Pr.baseQueue,queue:Pr.queue,next:null},Fr===null?Gt.memoizedState=Fr=t:Fr=Fr.next=t}return Fr}function ip(t,e){return typeof e=="function"?e(t):e}function Jb(t){var e=Bi(),r=e.queue;if(r===null)throw Error(te(311));r.lastRenderedReducer=t;var n=Pr,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((pc&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=n):l=l.next=h,Gt.lanes|=d,mc|=d}c=c.next}while(c!==null&&c!==s);l===null?o=n:l.next=a,hs(n,e.memoizedState)||(Hn=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,Gt.lanes|=s,mc|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Zb(t){var e=Bi(),r=e.queue;if(r===null)throw Error(te(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);hs(s,e.memoizedState)||(Hn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function vZ(){}function bZ(t,e){var r=Gt,n=Bi(),i=e(),s=!hs(n.memoizedState,i);if(s&&(n.memoizedState=i,Hn=!0),n=n.queue,SR(SZ.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Fr!==null&&Fr.memoizedState.tag&1){if(r.flags|=2048,sp(9,wZ.bind(null,r,n,i,e),void 0,null),zr===null)throw Error(te(349));pc&30||xZ(r,e,i)}return i}function xZ(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Gt.updateQueue,e===null?(e={lastEffect:null,stores:null},Gt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function wZ(t,e,r,n){e.value=r,e.getSnapshot=n,_Z(e)&&EZ(t)}function SZ(t,e,r){return r(function(){_Z(e)&&EZ(t)})}function _Z(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!hs(t,r)}catch{return!0}}function EZ(t){var e=Po(t,1);e!==null&&ds(e,t,1,-1)}function cA(t){var e=ws();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ip,lastRenderedState:t},e.queue=t,t=t.dispatch=Dce.bind(null,Gt,t),[e.memoizedState,t]}function sp(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Gt.updateQueue,e===null?(e={lastEffect:null,stores:null},Gt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function NZ(){return Bi().memoizedState}function Hg(t,e,r,n){var i=ws();Gt.flags|=t,i.memoizedState=sp(1|e,r,void 0,n===void 0?null:n)}function s0(t,e,r,n){var i=Bi();n=n===void 0?null:n;var s=void 0;if(Pr!==null){var o=Pr.memoizedState;if(s=o.destroy,n!==null&&bR(n,o.deps)){i.memoizedState=sp(e,r,s,n);return}}Gt.flags|=t,i.memoizedState=sp(1|e,r,s,n)}function uA(t,e){return Hg(8390656,8,t,e)}function SR(t,e){return s0(2048,8,t,e)}function CZ(t,e){return s0(4,2,t,e)}function kZ(t,e){return s0(4,4,t,e)}function TZ(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function OZ(t,e,r){return r=r!=null?r.concat([t]):null,s0(4,4,TZ.bind(null,e,t),r)}function _R(){}function jZ(t,e){var r=Bi();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&bR(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function PZ(t,e){var r=Bi();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&bR(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function IZ(t,e,r){return pc&21?(hs(r,e)||(r=AJ(),Gt.lanes|=r,mc|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Hn=!0),t.memoizedState=r)}function Mce(t,e){var r=Ct;Ct=r!==0&&4>r?r:4,t(!0);var n=Xb.transition;Xb.transition={};try{t(!1),e()}finally{Ct=r,Xb.transition=n}}function RZ(){return Bi().memoizedState}function $ce(t,e,r){var n=Aa(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},MZ(t))$Z(e,r);else if(r=mZ(t,e,r,n),r!==null){var i=On();ds(r,t,n,i),DZ(r,e,n)}}function Dce(t,e,r){var n=Aa(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(MZ(t))$Z(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,hs(a,o)){var l=e.interleaved;l===null?(i.next=i,pR(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=mZ(t,e,i,n),r!==null&&(i=On(),ds(r,t,n,i),DZ(r,e,n))}}function MZ(t){var e=t.alternate;return t===Gt||e!==null&&e===Gt}function $Z(t,e){xf=ky=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function DZ(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,eR(t,r)}}var Ty={readContext:Li,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useInsertionEffect:cn,useLayoutEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useMutableSource:cn,useSyncExternalStore:cn,useId:cn,unstable_isNewReconciler:!1},Ace={readContext:Li,useCallback:function(t,e){return ws().memoizedState=[t,e===void 0?null:e],t},useContext:Li,useEffect:uA,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Hg(4194308,4,TZ.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Hg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Hg(4,2,t,e)},useMemo:function(t,e){var r=ws();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=ws();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=$ce.bind(null,Gt,t),[n.memoizedState,t]},useRef:function(t){var e=ws();return t={current:t},e.memoizedState=t},useState:cA,useDebugValue:_R,useDeferredValue:function(t){return ws().memoizedState=t},useTransition:function(){var t=cA(!1),e=t[0];return t=Mce.bind(null,t[1]),ws().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Gt,i=ws();if(Ut){if(r===void 0)throw Error(te(407));r=r()}else{if(r=e(),zr===null)throw Error(te(349));pc&30||xZ(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,uA(SZ.bind(null,n,s,t),[t]),n.flags|=2048,sp(9,wZ.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=ws(),e=zr.identifierPrefix;if(Ut){var r=ho,n=uo;r=(n&~(1<<32-us(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=np++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Rce++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Fce={readContext:Li,useCallback:jZ,useContext:Li,useEffect:SR,useImperativeHandle:OZ,useInsertionEffect:CZ,useLayoutEffect:kZ,useMemo:PZ,useReducer:Jb,useRef:NZ,useState:function(){return Jb(ip)},useDebugValue:_R,useDeferredValue:function(t){var e=Bi();return IZ(e,Pr.memoizedState,t)},useTransition:function(){var t=Jb(ip)[0],e=Bi().memoizedState;return[t,e]},useMutableSource:vZ,useSyncExternalStore:bZ,useId:RZ,unstable_isNewReconciler:!1},qce={readContext:Li,useCallback:jZ,useContext:Li,useEffect:SR,useImperativeHandle:OZ,useInsertionEffect:CZ,useLayoutEffect:kZ,useMemo:PZ,useReducer:Zb,useRef:NZ,useState:function(){return Zb(ip)},useDebugValue:_R,useDeferredValue:function(t){var e=Bi();return Pr===null?e.memoizedState=t:IZ(e,Pr.memoizedState,t)},useTransition:function(){var t=Zb(ip)[0],e=Bi().memoizedState;return[t,e]},useMutableSource:vZ,useSyncExternalStore:bZ,useId:RZ,unstable_isNewReconciler:!1};function Ji(t,e){if(t&&t.defaultProps){e=Qt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Kj(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Qt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var o0={isMounted:function(t){return(t=t._reactInternals)?qc(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=On(),i=Aa(t),s=go(n,i);s.payload=e,r!=null&&(s.callback=r),e=$a(t,s,i),e!==null&&(ds(e,t,i,n),Vg(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=On(),i=Aa(t),s=go(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=$a(t,s,i),e!==null&&(ds(e,t,i,n),Vg(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=On(),n=Aa(t),i=go(r,n);i.tag=2,e!=null&&(i.callback=e),e=$a(t,i,n),e!==null&&(ds(e,t,n,r),Vg(e,t,n))}};function dA(t,e,r,n,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!Xf(r,n)||!Xf(i,s):!0}function AZ(t,e,r){var n=!1,i=Za,s=e.contextType;return typeof s=="object"&&s!==null?s=Li(s):(i=Gn(e)?hc:mn.current,n=e.contextTypes,s=(n=n!=null)?wd(t,i):Za),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=o0,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function hA(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&o0.enqueueReplaceState(e,e.state,null)}function Gj(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},mR(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Li(s):(s=Gn(e)?hc:mn.current,i.context=wd(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Kj(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&o0.enqueueReplaceState(i,i.state,null),Ny(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Nd(t,e){try{var r="",n=e;do r+=fle(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function e1(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Yj(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Lce=typeof WeakMap=="function"?WeakMap:Map;function FZ(t,e,r){r=go(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){jy||(jy=!0,sP=n),Yj(t,e)},r}function qZ(t,e,r){r=go(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){Yj(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){Yj(t,e),typeof n!="function"&&(Da===null?Da=new Set([this]):Da.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function fA(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Lce;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=eue.bind(null,t,e,r),e.then(t,t))}function pA(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function mA(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=go(-1,1),e.tag=2,$a(r,e,1))),r.lanes|=1),t)}var Bce=Do.ReactCurrentOwner,Hn=!1;function Sn(t,e,r,n){e.child=t===null?pZ(e,null,r,n):_d(e,t.child,r,n)}function gA(t,e,r,n,i){r=r.render;var s=e.ref;return Qu(e,i),n=xR(t,e,r,n,s,i),r=wR(),t!==null&&!Hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Io(t,e,i)):(Ut&&r&&lR(e),e.flags|=1,Sn(t,e,n,i),e.child)}function yA(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!PR(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,LZ(t,e,s,n,i)):(t=Yg(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Xf,r(o,n)&&t.ref===e.ref)return Io(t,e,i)}return e.flags|=1,t=Fa(s,n),t.ref=e.ref,t.return=e,e.child=t}function LZ(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(Xf(s,n)&&t.ref===e.ref)if(Hn=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(Hn=!0);else return e.lanes=t.lanes,Io(t,e,i)}return Qj(t,e,r,n,i)}function BZ(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ft(Fu,oi),oi|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ft(Fu,oi),oi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Ft(Fu,oi),oi|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Ft(Fu,oi),oi|=n;return Sn(t,e,i,r),e.child}function zZ(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Qj(t,e,r,n,i){var s=Gn(r)?hc:mn.current;return s=wd(e,s),Qu(e,i),r=xR(t,e,r,n,s,i),n=wR(),t!==null&&!Hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Io(t,e,i)):(Ut&&n&&lR(e),e.flags|=1,Sn(t,e,r,i),e.child)}function vA(t,e,r,n,i){if(Gn(r)){var s=!0;xy(e)}else s=!1;if(Qu(e,i),e.stateNode===null)Wg(t,e),AZ(e,r,n),Gj(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=Li(c):(c=Gn(r)?hc:mn.current,c=wd(e,c));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==c)&&hA(e,o,n,c),ra=!1;var f=e.memoizedState;o.state=f,Ny(e,n,o,i),l=e.memoizedState,a!==n||f!==l||Kn.current||ra?(typeof d=="function"&&(Kj(e,r,d,n),l=e.memoizedState),(a=ra||dA(e,r,a,n,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=c,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,gZ(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ji(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Li(l):(l=Gn(r)?hc:mn.current,l=wd(e,l));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&hA(e,o,n,l),ra=!1,f=e.memoizedState,o.state=f,Ny(e,n,o,i);var m=e.memoizedState;a!==h||f!==m||Kn.current||ra?(typeof p=="function"&&(Kj(e,r,p,n),m=e.memoizedState),(c=ra||dA(e,r,c,n,f,m,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return Xj(t,e,r,n,s,i)}function Xj(t,e,r,n,i,s){zZ(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&nA(e,r,!1),Io(t,e,s);n=e.stateNode,Bce.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=_d(e,t.child,null,s),e.child=_d(e,null,a,s)):Sn(t,e,a,s),e.memoizedState=n.state,i&&nA(e,r,!0),e.child}function VZ(t){var e=t.stateNode;e.pendingContext?rA(t,e.pendingContext,e.pendingContext!==e.context):e.context&&rA(t,e.context,!1),gR(t,e.containerInfo)}function bA(t,e,r,n,i){return Sd(),uR(i),e.flags|=256,Sn(t,e,r,n),e.child}var Jj={dehydrated:null,treeContext:null,retryLane:0};function Zj(t){return{baseLanes:t,cachePool:null,transitions:null}}function UZ(t,e,r){var n=e.pendingProps,i=Wt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ft(Wt,i&1),t===null)return Hj(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=c0(o,n,0,null),t=Jl(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Zj(r),e.memoizedState=Jj,t):ER(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return zce(t,e,o,n,a,i,r);if(s){s=n.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Fa(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Fa(a,s):(s=Jl(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?Zj(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=Jj,n}return s=t.child,t=s.sibling,n=Fa(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function ER(t,e){return e=c0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function lg(t,e,r,n){return n!==null&&uR(n),_d(e,t.child,null,r),t=ER(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function zce(t,e,r,n,i,s,o){if(r)return e.flags&256?(e.flags&=-257,n=e1(Error(te(422))),lg(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=c0({mode:"visible",children:n.children},i,0,null),s=Jl(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&_d(e,t.child,null,o),e.child.memoizedState=Zj(o),e.memoizedState=Jj,s);if(!(e.mode&1))return lg(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(te(419)),n=e1(s,n,void 0),lg(t,e,o,n)}if(a=(o&t.childLanes)!==0,Hn||a){if(n=zr,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Po(t,i),ds(n,t,i,-1))}return jR(),n=e1(Error(te(421))),lg(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=tue.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,di=Ma(i.nextSibling),hi=e,Ut=!0,rs=null,t!==null&&(ji[Pi++]=uo,ji[Pi++]=ho,ji[Pi++]=fc,uo=t.id,ho=t.overflow,fc=e),e=ER(e,n.children),e.flags|=4096,e)}function xA(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Wj(t.return,e,r)}function t1(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function HZ(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Sn(t,e,n.children,r),n=Wt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&xA(t,r,e);else if(t.tag===19)xA(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ft(Wt,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Cy(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),t1(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Cy(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}t1(e,!0,r,null,s);break;case"together":t1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Io(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),mc|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(te(153));if(e.child!==null){for(t=e.child,r=Fa(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Fa(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Vce(t,e,r){switch(e.tag){case 3:VZ(e),Sd();break;case 5:yZ(e);break;case 1:Gn(e.type)&&xy(e);break;case 4:gR(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Ft(_y,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ft(Wt,Wt.current&1),e.flags|=128,null):r&e.child.childLanes?UZ(t,e,r):(Ft(Wt,Wt.current&1),t=Io(t,e,r),t!==null?t.sibling:null);Ft(Wt,Wt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return HZ(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ft(Wt,Wt.current),n)break;return null;case 22:case 23:return e.lanes=0,BZ(t,e,r)}return Io(t,e,r)}var WZ,eP,KZ,GZ;WZ=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};eP=function(){};KZ=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,jl($s.current);var s=null;switch(r){case"input":i=Sj(t,i),n=Sj(t,n),s=[];break;case"select":i=Qt({},i,{value:void 0}),n=Qt({},n,{value:void 0}),s=[];break;case"textarea":i=Nj(t,i),n=Nj(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=vy)}kj(r,n);var o;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Uf.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in n){var l=n[c];if(a=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Uf.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&qt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}r&&(s=s||[]).push("style",r);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};GZ=function(t,e,r,n){r!==n&&(e.flags|=4)};function Vh(t,e){if(!Ut)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function un(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Uce(t,e,r){var n=e.pendingProps;switch(cR(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(e),null;case 1:return Gn(e.type)&&by(),un(e),null;case 3:return n=e.stateNode,Ed(),Bt(Kn),Bt(mn),vR(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(og(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,rs!==null&&(lP(rs),rs=null))),eP(t,e),un(e),null;case 5:yR(e);var i=jl(rp.current);if(r=e.type,t!==null&&e.stateNode!=null)KZ(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(te(166));return un(e),null}if(t=jl($s.current),og(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Os]=e,n[ep]=s,t=(e.mode&1)!==0,r){case"dialog":qt("cancel",n),qt("close",n);break;case"iframe":case"object":case"embed":qt("load",n);break;case"video":case"audio":for(i=0;i<af.length;i++)qt(af[i],n);break;case"source":qt("error",n);break;case"img":case"image":case"link":qt("error",n),qt("load",n);break;case"details":qt("toggle",n);break;case"input":OD(n,s),qt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},qt("invalid",n);break;case"textarea":PD(n,s),qt("invalid",n)}kj(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&sg(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&sg(n.textContent,a,t),i=["children",""+a]):Uf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&qt("scroll",n)}switch(r){case"input":Xm(n),jD(n,s,!0);break;case"textarea":Xm(n),ID(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=vy)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=SJ(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Os]=e,t[ep]=n,WZ(t,e,!1,!1),e.stateNode=t;e:{switch(o=Tj(r,n),r){case"dialog":qt("cancel",t),qt("close",t),i=n;break;case"iframe":case"object":case"embed":qt("load",t),i=n;break;case"video":case"audio":for(i=0;i<af.length;i++)qt(af[i],t);i=n;break;case"source":qt("error",t),i=n;break;case"img":case"image":case"link":qt("error",t),qt("load",t),i=n;break;case"details":qt("toggle",t),i=n;break;case"input":OD(t,n),i=Sj(t,n),qt("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Qt({},n,{value:void 0}),qt("invalid",t);break;case"textarea":PD(t,n),i=Nj(t,n),qt("invalid",t);break;default:i=n}kj(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?NJ(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&_J(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Hf(t,l):typeof l=="number"&&Hf(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Uf.hasOwnProperty(s)?l!=null&&s==="onScroll"&&qt("scroll",t):l!=null&&GI(t,s,l,o))}switch(r){case"input":Xm(t),jD(t,n,!1);break;case"textarea":Xm(t),ID(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Ja(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Wu(t,!!n.multiple,s,!1):n.defaultValue!=null&&Wu(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=vy)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return un(e),null;case 6:if(t&&e.stateNode!=null)GZ(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(te(166));if(r=jl(rp.current),jl($s.current),og(e)){if(n=e.stateNode,r=e.memoizedProps,n[Os]=e,(s=n.nodeValue!==r)&&(t=hi,t!==null))switch(t.tag){case 3:sg(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&sg(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Os]=e,e.stateNode=n}return un(e),null;case 13:if(Bt(Wt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ut&&di!==null&&e.mode&1&&!(e.flags&128))hZ(),Sd(),e.flags|=98560,s=!1;else if(s=og(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(te(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(te(317));s[Os]=e}else Sd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;un(e),s=!1}else rs!==null&&(lP(rs),rs=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Wt.current&1?Ir===0&&(Ir=3):jR())),e.updateQueue!==null&&(e.flags|=4),un(e),null);case 4:return Ed(),eP(t,e),t===null&&Jf(e.stateNode.containerInfo),un(e),null;case 10:return fR(e.type._context),un(e),null;case 17:return Gn(e.type)&&by(),un(e),null;case 19:if(Bt(Wt),s=e.memoizedState,s===null)return un(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)Vh(s,!1);else{if(Ir!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Cy(t),o!==null){for(e.flags|=128,Vh(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ft(Wt,Wt.current&1|2),e.child}t=t.sibling}s.tail!==null&&hr()>Cd&&(e.flags|=128,n=!0,Vh(s,!1),e.lanes=4194304)}else{if(!n)if(t=Cy(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Vh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ut)return un(e),null}else 2*hr()-s.renderingStartTime>Cd&&r!==1073741824&&(e.flags|=128,n=!0,Vh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=hr(),e.sibling=null,r=Wt.current,Ft(Wt,n?r&1|2:r&1),e):(un(e),null);case 22:case 23:return OR(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?oi&1073741824&&(un(e),e.subtreeFlags&6&&(e.flags|=8192)):un(e),null;case 24:return null;case 25:return null}throw Error(te(156,e.tag))}function Hce(t,e){switch(cR(e),e.tag){case 1:return Gn(e.type)&&by(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ed(),Bt(Kn),Bt(mn),vR(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return yR(e),null;case 13:if(Bt(Wt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(te(340));Sd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Bt(Wt),null;case 4:return Ed(),null;case 10:return fR(e.type._context),null;case 22:case 23:return OR(),null;case 24:return null;default:return null}}var cg=!1,fn=!1,Wce=typeof WeakSet=="function"?WeakSet:Set,xe=null;function Au(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){sr(t,e,n)}else r.current=null}function tP(t,e,r){try{r()}catch(n){sr(t,e,n)}}var wA=!1;function Kce(t,e){if(Fj=my,t=ZJ(),aR(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==r||i!==0&&h.nodeType!==3||(a=o+i),h!==s||n!==0&&h.nodeType!==3||(l=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===r&&++c===i&&(a=o),f===s&&++d===n&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(qj={focusedElem:t,selectionRange:r},my=!1,xe=e;xe!==null;)if(e=xe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,xe=t;else for(;xe!==null;){e=xe;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,b=m.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:Ji(e.type,g),b);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(x){sr(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,xe=t;break}xe=e.return}return m=wA,wA=!1,m}function wf(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&tP(e,r,s)}i=i.next}while(i!==n)}}function a0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function rP(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function YZ(t){var e=t.alternate;e!==null&&(t.alternate=null,YZ(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Os],delete e[ep],delete e[zj],delete e[Oce],delete e[jce])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function QZ(t){return t.tag===5||t.tag===3||t.tag===4}function SA(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||QZ(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function nP(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=vy));else if(n!==4&&(t=t.child,t!==null))for(nP(t,e,r),t=t.sibling;t!==null;)nP(t,e,r),t=t.sibling}function iP(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(iP(t,e,r),t=t.sibling;t!==null;)iP(t,e,r),t=t.sibling}var Zr=null,ts=!1;function Go(t,e,r){for(r=r.child;r!==null;)XZ(t,e,r),r=r.sibling}function XZ(t,e,r){if(Ms&&typeof Ms.onCommitFiberUnmount=="function")try{Ms.onCommitFiberUnmount(Zv,r)}catch{}switch(r.tag){case 5:fn||Au(r,e);case 6:var n=Zr,i=ts;Zr=null,Go(t,e,r),Zr=n,ts=i,Zr!==null&&(ts?(t=Zr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Zr.removeChild(r.stateNode));break;case 18:Zr!==null&&(ts?(t=Zr,r=r.stateNode,t.nodeType===8?Gb(t.parentNode,r):t.nodeType===1&&Gb(t,r),Yf(t)):Gb(Zr,r.stateNode));break;case 4:n=Zr,i=ts,Zr=r.stateNode.containerInfo,ts=!0,Go(t,e,r),Zr=n,ts=i;break;case 0:case 11:case 14:case 15:if(!fn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&tP(r,e,o),i=i.next}while(i!==n)}Go(t,e,r);break;case 1:if(!fn&&(Au(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){sr(r,e,a)}Go(t,e,r);break;case 21:Go(t,e,r);break;case 22:r.mode&1?(fn=(n=fn)||r.memoizedState!==null,Go(t,e,r),fn=n):Go(t,e,r);break;default:Go(t,e,r)}}function _A(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Wce),e.forEach(function(n){var i=rue.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Qi(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Zr=a.stateNode,ts=!1;break e;case 3:Zr=a.stateNode.containerInfo,ts=!0;break e;case 4:Zr=a.stateNode.containerInfo,ts=!0;break e}a=a.return}if(Zr===null)throw Error(te(160));XZ(s,o,i),Zr=null,ts=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){sr(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)JZ(e,t),e=e.sibling}function JZ(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qi(e,t),bs(t),n&4){try{wf(3,t,t.return),a0(3,t)}catch(g){sr(t,t.return,g)}try{wf(5,t,t.return)}catch(g){sr(t,t.return,g)}}break;case 1:Qi(e,t),bs(t),n&512&&r!==null&&Au(r,r.return);break;case 5:if(Qi(e,t),bs(t),n&512&&r!==null&&Au(r,r.return),t.flags&32){var i=t.stateNode;try{Hf(i,"")}catch(g){sr(t,t.return,g)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&xJ(i,s),Tj(a,o);var c=Tj(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?NJ(i,h):d==="dangerouslySetInnerHTML"?_J(i,h):d==="children"?Hf(i,h):GI(i,d,h,c)}switch(a){case"input":_j(i,s);break;case"textarea":wJ(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Wu(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Wu(i,!!s.multiple,s.defaultValue,!0):Wu(i,!!s.multiple,s.multiple?[]:"",!1))}i[ep]=s}catch(g){sr(t,t.return,g)}}break;case 6:if(Qi(e,t),bs(t),n&4){if(t.stateNode===null)throw Error(te(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){sr(t,t.return,g)}}break;case 3:if(Qi(e,t),bs(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Yf(e.containerInfo)}catch(g){sr(t,t.return,g)}break;case 4:Qi(e,t),bs(t);break;case 13:Qi(e,t),bs(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(kR=hr())),n&4&&_A(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(fn=(c=fn)||d,Qi(e,t),fn=c):Qi(e,t),bs(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(xe=t,d=t.child;d!==null;){for(h=xe=d;xe!==null;){switch(f=xe,p=f.child,f.tag){case 0:case 11:case 14:case 15:wf(4,f,f.return);break;case 1:Au(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){sr(n,r,g)}}break;case 5:Au(f,f.return);break;case 22:if(f.memoizedState!==null){NA(h);continue}}p!==null?(p.return=f,xe=p):NA(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=EJ("display",o))}catch(g){sr(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){sr(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Qi(e,t),bs(t),n&4&&_A(t);break;case 21:break;default:Qi(e,t),bs(t)}}function bs(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(QZ(r)){var n=r;break e}r=r.return}throw Error(te(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Hf(i,""),n.flags&=-33);var s=SA(t);iP(t,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=SA(t);nP(t,a,o);break;default:throw Error(te(161))}}catch(l){sr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Gce(t,e,r){xe=t,ZZ(t)}function ZZ(t,e,r){for(var n=(t.mode&1)!==0;xe!==null;){var i=xe,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||cg;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||fn;a=cg;var c=fn;if(cg=o,(fn=l)&&!c)for(xe=i;xe!==null;)o=xe,l=o.child,o.tag===22&&o.memoizedState!==null?CA(i):l!==null?(l.return=o,xe=l):CA(i);for(;s!==null;)xe=s,ZZ(s),s=s.sibling;xe=i,cg=a,fn=c}EA(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,xe=s):EA(t)}}function EA(t){for(;xe!==null;){var e=xe;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:fn||a0(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!fn)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Ji(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&lA(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}lA(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Yf(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}fn||e.flags&512&&rP(e)}catch(f){sr(e,e.return,f)}}if(e===t){xe=null;break}if(r=e.sibling,r!==null){r.return=e.return,xe=r;break}xe=e.return}}function NA(t){for(;xe!==null;){var e=xe;if(e===t){xe=null;break}var r=e.sibling;if(r!==null){r.return=e.return,xe=r;break}xe=e.return}}function CA(t){for(;xe!==null;){var e=xe;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{a0(4,e)}catch(l){sr(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){sr(e,i,l)}}var s=e.return;try{rP(e)}catch(l){sr(e,s,l)}break;case 5:var o=e.return;try{rP(e)}catch(l){sr(e,o,l)}}}catch(l){sr(e,e.return,l)}if(e===t){xe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,xe=a;break}xe=e.return}}var Yce=Math.ceil,Oy=Do.ReactCurrentDispatcher,NR=Do.ReactCurrentOwner,$i=Do.ReactCurrentBatchConfig,ht=0,zr=null,vr=null,nn=0,oi=0,Fu=al(0),Ir=0,op=null,mc=0,l0=0,CR=0,Sf=null,zn=null,kR=0,Cd=1/0,ro=null,jy=!1,sP=null,Da=null,ug=!1,Na=null,Py=0,_f=0,oP=null,Kg=-1,Gg=0;function On(){return ht&6?hr():Kg!==-1?Kg:Kg=hr()}function Aa(t){return t.mode&1?ht&2&&nn!==0?nn&-nn:Ice.transition!==null?(Gg===0&&(Gg=AJ()),Gg):(t=Ct,t!==0||(t=window.event,t=t===void 0?16:UJ(t.type)),t):1}function ds(t,e,r,n){if(50<_f)throw _f=0,oP=null,Error(te(185));Up(t,r,n),(!(ht&2)||t!==zr)&&(t===zr&&(!(ht&2)&&(l0|=r),Ir===4&&ua(t,nn)),Yn(t,n),r===1&&ht===0&&!(e.mode&1)&&(Cd=hr()+500,i0&&ll()))}function Yn(t,e){var r=t.callbackNode;Ile(t,e);var n=py(t,t===zr?nn:0);if(n===0)r!==null&&$D(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&$D(r),e===1)t.tag===0?Pce(kA.bind(null,t)):cZ(kA.bind(null,t)),kce(function(){!(ht&6)&&ll()}),r=null;else{switch(FJ(n)){case 1:r=ZI;break;case 4:r=$J;break;case 16:r=fy;break;case 536870912:r=DJ;break;default:r=fy}r=aee(r,eee.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function eee(t,e){if(Kg=-1,Gg=0,ht&6)throw Error(te(327));var r=t.callbackNode;if(Xu()&&t.callbackNode!==r)return null;var n=py(t,t===zr?nn:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Iy(t,n);else{e=n;var i=ht;ht|=2;var s=ree();(zr!==t||nn!==e)&&(ro=null,Cd=hr()+500,Xl(t,e));do try{Jce();break}catch(a){tee(t,a)}while(!0);hR(),Oy.current=s,ht=i,vr!==null?e=0:(zr=null,nn=0,e=Ir)}if(e!==0){if(e===2&&(i=Rj(t),i!==0&&(n=i,e=aP(t,i))),e===1)throw r=op,Xl(t,0),ua(t,n),Yn(t,hr()),r;if(e===6)ua(t,n);else{if(i=t.current.alternate,!(n&30)&&!Qce(i)&&(e=Iy(t,n),e===2&&(s=Rj(t),s!==0&&(n=s,e=aP(t,s))),e===1))throw r=op,Xl(t,0),ua(t,n),Yn(t,hr()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(te(345));case 2:Nl(t,zn,ro);break;case 3:if(ua(t,n),(n&130023424)===n&&(e=kR+500-hr(),10<e)){if(py(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){On(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Bj(Nl.bind(null,t,zn,ro),e);break}Nl(t,zn,ro);break;case 4:if(ua(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-us(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=hr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Yce(n/1960))-n,10<n){t.timeoutHandle=Bj(Nl.bind(null,t,zn,ro),n);break}Nl(t,zn,ro);break;case 5:Nl(t,zn,ro);break;default:throw Error(te(329))}}}return Yn(t,hr()),t.callbackNode===r?eee.bind(null,t):null}function aP(t,e){var r=Sf;return t.current.memoizedState.isDehydrated&&(Xl(t,e).flags|=256),t=Iy(t,e),t!==2&&(e=zn,zn=r,e!==null&&lP(e)),t}function lP(t){zn===null?zn=t:zn.push.apply(zn,t)}function Qce(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!hs(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ua(t,e){for(e&=~CR,e&=~l0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-us(e),n=1<<r;t[r]=-1,e&=~n}}function kA(t){if(ht&6)throw Error(te(327));Xu();var e=py(t,0);if(!(e&1))return Yn(t,hr()),null;var r=Iy(t,e);if(t.tag!==0&&r===2){var n=Rj(t);n!==0&&(e=n,r=aP(t,n))}if(r===1)throw r=op,Xl(t,0),ua(t,e),Yn(t,hr()),r;if(r===6)throw Error(te(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Nl(t,zn,ro),Yn(t,hr()),null}function TR(t,e){var r=ht;ht|=1;try{return t(e)}finally{ht=r,ht===0&&(Cd=hr()+500,i0&&ll())}}function gc(t){Na!==null&&Na.tag===0&&!(ht&6)&&Xu();var e=ht;ht|=1;var r=$i.transition,n=Ct;try{if($i.transition=null,Ct=1,t)return t()}finally{Ct=n,$i.transition=r,ht=e,!(ht&6)&&ll()}}function OR(){oi=Fu.current,Bt(Fu)}function Xl(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Cce(r)),vr!==null)for(r=vr.return;r!==null;){var n=r;switch(cR(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&by();break;case 3:Ed(),Bt(Kn),Bt(mn),vR();break;case 5:yR(n);break;case 4:Ed();break;case 13:Bt(Wt);break;case 19:Bt(Wt);break;case 10:fR(n.type._context);break;case 22:case 23:OR()}r=r.return}if(zr=t,vr=t=Fa(t.current,null),nn=oi=e,Ir=0,op=null,CR=l0=mc=0,zn=Sf=null,Ol!==null){for(e=0;e<Ol.length;e++)if(r=Ol[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}Ol=null}return t}function tee(t,e){do{var r=vr;try{if(hR(),Ug.current=Ty,ky){for(var n=Gt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ky=!1}if(pc=0,Fr=Pr=Gt=null,xf=!1,np=0,NR.current=null,r===null||r.return===null){Ir=1,op=e,vr=null;break}e:{var s=t,o=r.return,a=r,l=e;if(e=nn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=pA(o);if(p!==null){p.flags&=-257,mA(p,o,a,s,e),p.mode&1&&fA(s,c,e),e=p,l=c;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){fA(s,c,e),jR();break e}l=Error(te(426))}}else if(Ut&&a.mode&1){var b=pA(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),mA(b,o,a,s,e),uR(Nd(l,a));break e}}s=l=Nd(l,a),Ir!==4&&(Ir=2),Sf===null?Sf=[s]:Sf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=FZ(s,l,e);aA(s,y);break e;case 1:a=l;var v=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Da===null||!Da.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=qZ(s,a,e);aA(s,x);break e}}s=s.return}while(s!==null)}iee(r)}catch(S){e=S,vr===r&&r!==null&&(vr=r=r.return);continue}break}while(!0)}function ree(){var t=Oy.current;return Oy.current=Ty,t===null?Ty:t}function jR(){(Ir===0||Ir===3||Ir===2)&&(Ir=4),zr===null||!(mc&268435455)&&!(l0&268435455)||ua(zr,nn)}function Iy(t,e){var r=ht;ht|=2;var n=ree();(zr!==t||nn!==e)&&(ro=null,Xl(t,e));do try{Xce();break}catch(i){tee(t,i)}while(!0);if(hR(),ht=r,Oy.current=n,vr!==null)throw Error(te(261));return zr=null,nn=0,Ir}function Xce(){for(;vr!==null;)nee(vr)}function Jce(){for(;vr!==null&&!_le();)nee(vr)}function nee(t){var e=oee(t.alternate,t,oi);t.memoizedProps=t.pendingProps,e===null?iee(t):vr=e,NR.current=null}function iee(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Hce(r,e),r!==null){r.flags&=32767,vr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ir=6,vr=null;return}}else if(r=Uce(r,e,oi),r!==null){vr=r;return}if(e=e.sibling,e!==null){vr=e;return}vr=e=t}while(e!==null);Ir===0&&(Ir=5)}function Nl(t,e,r){var n=Ct,i=$i.transition;try{$i.transition=null,Ct=1,Zce(t,e,r,n)}finally{$i.transition=i,Ct=n}return null}function Zce(t,e,r,n){do Xu();while(Na!==null);if(ht&6)throw Error(te(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(te(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(Rle(t,s),t===zr&&(vr=zr=null,nn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ug||(ug=!0,aee(fy,function(){return Xu(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=$i.transition,$i.transition=null;var o=Ct;Ct=1;var a=ht;ht|=4,NR.current=null,Kce(t,r),JZ(r,t),bce(qj),my=!!Fj,qj=Fj=null,t.current=r,Gce(r),Ele(),ht=a,Ct=o,$i.transition=s}else t.current=r;if(ug&&(ug=!1,Na=t,Py=i),s=t.pendingLanes,s===0&&(Da=null),kle(r.stateNode),Yn(t,hr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(jy)throw jy=!1,t=sP,sP=null,t;return Py&1&&t.tag!==0&&Xu(),s=t.pendingLanes,s&1?t===oP?_f++:(_f=0,oP=t):_f=0,ll(),null}function Xu(){if(Na!==null){var t=FJ(Py),e=$i.transition,r=Ct;try{if($i.transition=null,Ct=16>t?16:t,Na===null)var n=!1;else{if(t=Na,Na=null,Py=0,ht&6)throw Error(te(331));var i=ht;for(ht|=4,xe=t.current;xe!==null;){var s=xe,o=s.child;if(xe.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(xe=c;xe!==null;){var d=xe;switch(d.tag){case 0:case 11:case 15:wf(8,d,s)}var h=d.child;if(h!==null)h.return=d,xe=h;else for(;xe!==null;){d=xe;var f=d.sibling,p=d.return;if(YZ(d),d===c){xe=null;break}if(f!==null){f.return=p,xe=f;break}xe=p}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}xe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,xe=o;else e:for(;xe!==null;){if(s=xe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:wf(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,xe=y;break e}xe=s.return}}var v=t.current;for(xe=v;xe!==null;){o=xe;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,xe=w;else e:for(o=v;xe!==null;){if(a=xe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:a0(9,a)}}catch(S){sr(a,a.return,S)}if(a===o){xe=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,xe=x;break e}xe=a.return}}if(ht=i,ll(),Ms&&typeof Ms.onPostCommitFiberRoot=="function")try{Ms.onPostCommitFiberRoot(Zv,t)}catch{}n=!0}return n}finally{Ct=r,$i.transition=e}}return!1}function TA(t,e,r){e=Nd(r,e),e=FZ(t,e,1),t=$a(t,e,1),e=On(),t!==null&&(Up(t,1,e),Yn(t,e))}function sr(t,e,r){if(t.tag===3)TA(t,t,r);else for(;e!==null;){if(e.tag===3){TA(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Da===null||!Da.has(n))){t=Nd(r,t),t=qZ(e,t,1),e=$a(e,t,1),t=On(),e!==null&&(Up(e,1,t),Yn(e,t));break}}e=e.return}}function eue(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=On(),t.pingedLanes|=t.suspendedLanes&r,zr===t&&(nn&r)===r&&(Ir===4||Ir===3&&(nn&130023424)===nn&&500>hr()-kR?Xl(t,0):CR|=r),Yn(t,e)}function see(t,e){e===0&&(t.mode&1?(e=eg,eg<<=1,!(eg&130023424)&&(eg=4194304)):e=1);var r=On();t=Po(t,e),t!==null&&(Up(t,e,r),Yn(t,r))}function tue(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),see(t,r)}function rue(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(te(314))}n!==null&&n.delete(e),see(t,r)}var oee;oee=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Kn.current)Hn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Hn=!1,Vce(t,e,r);Hn=!!(t.flags&131072)}else Hn=!1,Ut&&e.flags&1048576&&uZ(e,Sy,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Wg(t,e),t=e.pendingProps;var i=wd(e,mn.current);Qu(e,r),i=xR(null,e,n,t,i,r);var s=wR();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Gn(n)?(s=!0,xy(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,mR(e),i.updater=o0,e.stateNode=i,i._reactInternals=e,Gj(e,n,t,r),e=Xj(null,e,n,!0,s,r)):(e.tag=0,Ut&&s&&lR(e),Sn(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Wg(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=iue(n),t=Ji(n,t),i){case 0:e=Qj(null,e,n,t,r);break e;case 1:e=vA(null,e,n,t,r);break e;case 11:e=gA(null,e,n,t,r);break e;case 14:e=yA(null,e,n,Ji(n.type,t),r);break e}throw Error(te(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ji(n,i),Qj(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ji(n,i),vA(t,e,n,i,r);case 3:e:{if(VZ(e),t===null)throw Error(te(387));n=e.pendingProps,s=e.memoizedState,i=s.element,gZ(t,e),Ny(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Nd(Error(te(423)),e),e=bA(t,e,n,r,i);break e}else if(n!==i){i=Nd(Error(te(424)),e),e=bA(t,e,n,r,i);break e}else for(di=Ma(e.stateNode.containerInfo.firstChild),hi=e,Ut=!0,rs=null,r=pZ(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Sd(),n===i){e=Io(t,e,r);break e}Sn(t,e,n,r)}e=e.child}return e;case 5:return yZ(e),t===null&&Hj(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Lj(n,i)?o=null:s!==null&&Lj(n,s)&&(e.flags|=32),zZ(t,e),Sn(t,e,o,r),e.child;case 6:return t===null&&Hj(e),null;case 13:return UZ(t,e,r);case 4:return gR(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=_d(e,null,n,r):Sn(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ji(n,i),gA(t,e,n,i,r);case 7:return Sn(t,e,e.pendingProps,r),e.child;case 8:return Sn(t,e,e.pendingProps.children,r),e.child;case 12:return Sn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ft(_y,n._currentValue),n._currentValue=o,s!==null)if(hs(s.value,o)){if(s.children===i.children&&!Kn.current){e=Io(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=go(-1,r&-r),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),Wj(s.return,r,e),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(te(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),Wj(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Sn(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Qu(e,r),i=Li(i),n=n(i),e.flags|=1,Sn(t,e,n,r),e.child;case 14:return n=e.type,i=Ji(n,e.pendingProps),i=Ji(n.type,i),yA(t,e,n,i,r);case 15:return LZ(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ji(n,i),Wg(t,e),e.tag=1,Gn(n)?(t=!0,xy(e)):t=!1,Qu(e,r),AZ(e,n,i),Gj(e,n,i,r),Xj(null,e,n,!0,t,r);case 19:return HZ(t,e,r);case 22:return BZ(t,e,r)}throw Error(te(156,e.tag))};function aee(t,e){return MJ(t,e)}function nue(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mi(t,e,r,n){return new nue(t,e,r,n)}function PR(t){return t=t.prototype,!(!t||!t.isReactComponent)}function iue(t){if(typeof t=="function")return PR(t)?1:0;if(t!=null){if(t=t.$$typeof,t===QI)return 11;if(t===XI)return 14}return 2}function Fa(t,e){var r=t.alternate;return r===null?(r=Mi(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Yg(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")PR(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Tu:return Jl(r.children,i,s,e);case YI:o=8,i|=8;break;case vj:return t=Mi(12,r,e,i|2),t.elementType=vj,t.lanes=s,t;case bj:return t=Mi(13,r,e,i),t.elementType=bj,t.lanes=s,t;case xj:return t=Mi(19,r,e,i),t.elementType=xj,t.lanes=s,t;case yJ:return c0(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case mJ:o=10;break e;case gJ:o=9;break e;case QI:o=11;break e;case XI:o=14;break e;case ta:o=16,n=null;break e}throw Error(te(130,t==null?t:typeof t,""))}return e=Mi(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function Jl(t,e,r,n){return t=Mi(7,t,n,e),t.lanes=r,t}function c0(t,e,r,n){return t=Mi(22,t,n,e),t.elementType=yJ,t.lanes=r,t.stateNode={isHidden:!1},t}function r1(t,e,r){return t=Mi(6,t,null,e),t.lanes=r,t}function n1(t,e,r){return e=Mi(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sue(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ab(0),this.expirationTimes=Ab(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ab(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function IR(t,e,r,n,i,s,o,a,l){return t=new sue(t,e,r,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Mi(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},mR(s),t}function oue(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ku,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function lee(t){if(!t)return Za;t=t._reactInternals;e:{if(qc(t)!==t||t.tag!==1)throw Error(te(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Gn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(te(171))}if(t.tag===1){var r=t.type;if(Gn(r))return lZ(t,r,e)}return e}function cee(t,e,r,n,i,s,o,a,l){return t=IR(r,n,!0,t,i,s,o,a,l),t.context=lee(null),r=t.current,n=On(),i=Aa(r),s=go(n,i),s.callback=e??null,$a(r,s,i),t.current.lanes=i,Up(t,i,n),Yn(t,n),t}function u0(t,e,r,n){var i=e.current,s=On(),o=Aa(i);return r=lee(r),e.context===null?e.context=r:e.pendingContext=r,e=go(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=$a(i,e,o),t!==null&&(ds(t,i,o,s),Vg(t,i,o)),o}function Ry(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function OA(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function RR(t,e){OA(t,e),(t=t.alternate)&&OA(t,e)}function aue(){return null}var uee=typeof reportError=="function"?reportError:function(t){console.error(t)};function MR(t){this._internalRoot=t}d0.prototype.render=MR.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(te(409));u0(t,e,null,null)};d0.prototype.unmount=MR.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;gc(function(){u0(null,t,null,null)}),e[jo]=null}};function d0(t){this._internalRoot=t}d0.prototype.unstable_scheduleHydration=function(t){if(t){var e=BJ();t={blockedOn:null,target:t,priority:e};for(var r=0;r<ca.length&&e!==0&&e<ca[r].priority;r++);ca.splice(r,0,t),r===0&&VJ(t)}};function $R(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function h0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function jA(){}function lue(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var c=Ry(o);s.call(c)}}var o=cee(e,n,t,0,null,!1,!1,"",jA);return t._reactRootContainer=o,t[jo]=o.current,Jf(t.nodeType===8?t.parentNode:t),gc(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var c=Ry(l);a.call(c)}}var l=IR(t,0,!1,null,null,!1,!1,"",jA);return t._reactRootContainer=l,t[jo]=l.current,Jf(t.nodeType===8?t.parentNode:t),gc(function(){u0(e,l,r,n)}),l}function f0(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Ry(o);a.call(l)}}u0(e,o,t,i)}else o=lue(r,e,t,i,n);return Ry(o)}qJ=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=of(e.pendingLanes);r!==0&&(eR(e,r|1),Yn(e,hr()),!(ht&6)&&(Cd=hr()+500,ll()))}break;case 13:gc(function(){var n=Po(t,1);if(n!==null){var i=On();ds(n,t,1,i)}}),RR(t,1)}};tR=function(t){if(t.tag===13){var e=Po(t,134217728);if(e!==null){var r=On();ds(e,t,134217728,r)}RR(t,134217728)}};LJ=function(t){if(t.tag===13){var e=Aa(t),r=Po(t,e);if(r!==null){var n=On();ds(r,t,e,n)}RR(t,e)}};BJ=function(){return Ct};zJ=function(t,e){var r=Ct;try{return Ct=t,e()}finally{Ct=r}};jj=function(t,e,r){switch(e){case"input":if(_j(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=n0(n);if(!i)throw Error(te(90));bJ(n),_j(n,i)}}}break;case"textarea":wJ(t,r);break;case"select":e=r.value,e!=null&&Wu(t,!!r.multiple,e,!1)}};TJ=TR;OJ=gc;var cue={usingClientEntryPoint:!1,Events:[Wp,Iu,n0,CJ,kJ,TR]},Uh={findFiberByHostInstance:Tl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uue={bundleType:Uh.bundleType,version:Uh.version,rendererPackageName:Uh.rendererPackageName,rendererConfig:Uh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Do.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=IJ(t),t===null?null:t.stateNode},findFiberByHostInstance:Uh.findFiberByHostInstance||aue,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dg.isDisabled&&dg.supportsFiber)try{Zv=dg.inject(uue),Ms=dg}catch{}}mi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cue;mi.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$R(e))throw Error(te(200));return oue(t,e,null,r)};mi.createRoot=function(t,e){if(!$R(t))throw Error(te(299));var r=!1,n="",i=uee;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=IR(t,1,!1,null,null,r,!1,n,i),t[jo]=e.current,Jf(t.nodeType===8?t.parentNode:t),new MR(e)};mi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(te(188)):(t=Object.keys(t).join(","),Error(te(268,t)));return t=IJ(e),t=t===null?null:t.stateNode,t};mi.flushSync=function(t){return gc(t)};mi.hydrate=function(t,e,r){if(!h0(e))throw Error(te(200));return f0(null,t,e,!0,r)};mi.hydrateRoot=function(t,e,r){if(!$R(t))throw Error(te(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=uee;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=cee(e,null,t,1,r??null,i,!1,s,o),t[jo]=e.current,Jf(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new d0(e)};mi.render=function(t,e,r){if(!h0(e))throw Error(te(200));return f0(null,t,e,!1,r)};mi.unmountComponentAtNode=function(t){if(!h0(t))throw Error(te(40));return t._reactRootContainer?(gc(function(){f0(null,null,t,!1,function(){t._reactRootContainer=null,t[jo]=null})}),!0):!1};mi.unstable_batchedUpdates=TR;mi.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!h0(r))throw Error(te(200));if(t==null||t._reactInternals===void 0)throw Error(te(38));return f0(t,e,r,!1,n)};mi.version="18.3.1-next-f1338f8080-20240426";function dee(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dee)}catch(t){console.error(t)}}dee(),dJ.exports=mi;var hee=dJ.exports;const due=ZX(hee);var PA=hee;gj.createRoot=PA.createRoot,gj.hydrateRoot=PA.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ap(){return ap=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ap.apply(this,arguments)}var Ca;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ca||(Ca={}));const IA="popstate";function hue(t){t===void 0&&(t={});function e(n,i){let{pathname:s,search:o,hash:a}=n.location;return cP("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:My(i)}return pue(e,r,null,t)}function Yt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function DR(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fue(){return Math.random().toString(36).substr(2,8)}function RA(t,e){return{usr:t.state,key:t.key,idx:e}}function cP(t,e,r,n){return r===void 0&&(r=null),ap({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Jd(e):e,{state:r,key:e&&e.key||n||fue()})}function My(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Jd(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function pue(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,a=Ca.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(ap({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Ca.Pop;let b=d(),y=b==null?null:b-c;c=b,l&&l({action:a,location:g.location,delta:y})}function f(b,y){a=Ca.Push;let v=cP(g.location,b,y);c=d()+1;let w=RA(v,c),x=g.createHref(v);try{o.pushState(w,"",x)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(x)}s&&l&&l({action:a,location:g.location,delta:1})}function p(b,y){a=Ca.Replace;let v=cP(g.location,b,y);c=d();let w=RA(v,c),x=g.createHref(v);o.replaceState(w,"",x),s&&l&&l({action:a,location:g.location,delta:0})}function m(b){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof b=="string"?b:My(b);return v=v.replace(/ $/,"%20"),Yt(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let g={get action(){return a},get location(){return t(i,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(IA,h),l=b,()=>{i.removeEventListener(IA,h),l=null}},createHref(b){return e(i,b)},createURL:m,encodeLocation(b){let y=m(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:p,go(b){return o.go(b)}};return g}var MA;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(MA||(MA={}));function mue(t,e,r){return r===void 0&&(r="/"),gue(t,e,r)}function gue(t,e,r,n){let i=typeof e=="string"?Jd(e):e,s=kd(i.pathname||"/",r);if(s==null)return null;let o=fee(t);yue(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=Tue(s);a=Cue(o[l],c)}return a}function fee(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Yt(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=qa([n,l.relativePath]),d=r.concat(l);s.children&&s.children.length>0&&(Yt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),fee(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:Eue(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of pee(s.path))i(s,o,l)}),e}function pee(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let o=pee(n.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function yue(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:Nue(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const vue=/^:[\w-]+$/,bue=3,xue=2,wue=1,Sue=10,_ue=-2,$A=t=>t==="*";function Eue(t,e){let r=t.split("/"),n=r.length;return r.some($A)&&(n+=_ue),e&&(n+=xue),r.filter(i=>!$A(i)).reduce((i,s)=>i+(vue.test(s)?bue:s===""?wue:Sue),n)}function Nue(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function Cue(t,e,r){let{routesMeta:n}=t,i={},s="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],c=a===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=uP({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:qa([s,h.pathname]),pathnameBase:Rue(qa([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=qa([s,h.pathnameBase]))}return o}function uP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=kue(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((c,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let g=a[h]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const m=a[h];return p&&!m?c[f]=void 0:c[f]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function kue(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),DR(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function Tue(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return DR(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function kd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const Oue=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jue=t=>Oue.test(t);function Pue(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?Jd(t):t,s;if(r)if(jue(r))s=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),DR(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?s=DA(r.substring(1),"/"):s=DA(r,e)}else s=e;return{pathname:s,search:Mue(n),hash:$ue(i)}}function DA(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function i1(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Iue(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function AR(t,e){let r=Iue(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function FR(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=Jd(t):(i=ap({},t),Yt(!i.pathname||!i.pathname.includes("?"),i1("?","pathname","search",i)),Yt(!i.pathname||!i.pathname.includes("#"),i1("#","pathname","hash",i)),Yt(!i.search||!i.search.includes("#"),i1("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=r;else{let h=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=Pue(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const qa=t=>t.join("/").replace(/\/\/+/g,"/"),Rue=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Mue=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,$ue=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Due(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const mee=["post","put","patch","delete"];new Set(mee);const Aue=["get",...mee];new Set(Aue);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lp(){return lp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lp.apply(this,arguments)}const p0=T.createContext(null),gee=T.createContext(null),Ao=T.createContext(null),m0=T.createContext(null),Fo=T.createContext({outlet:null,matches:[],isDataRoute:!1}),yee=T.createContext(null);function Fue(t,e){let{relative:r}=e===void 0?{}:e;Zd()||Yt(!1);let{basename:n,navigator:i}=T.useContext(Ao),{hash:s,pathname:o,search:a}=g0(t,{relative:r}),l=o;return n!=="/"&&(l=o==="/"?n:qa([n,o])),i.createHref({pathname:l,search:a,hash:s})}function Zd(){return T.useContext(m0)!=null}function qo(){return Zd()||Yt(!1),T.useContext(m0).location}function vee(t){T.useContext(Ao).static||T.useLayoutEffect(t)}function yn(){let{isDataRoute:t}=T.useContext(Fo);return t?Xue():que()}function que(){Zd()||Yt(!1);let t=T.useContext(p0),{basename:e,future:r,navigator:n}=T.useContext(Ao),{matches:i}=T.useContext(Fo),{pathname:s}=qo(),o=JSON.stringify(AR(i,r.v7_relativeSplatPath)),a=T.useRef(!1);return vee(()=>{a.current=!0}),T.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){n.go(c);return}let h=FR(c,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:qa([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,o,s,t])}function zs(){let{matches:t}=T.useContext(Fo),e=t[t.length-1];return e?e.params:{}}function g0(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=T.useContext(Ao),{matches:i}=T.useContext(Fo),{pathname:s}=qo(),o=JSON.stringify(AR(i,n.v7_relativeSplatPath));return T.useMemo(()=>FR(t,JSON.parse(o),s,r==="path"),[t,o,s,r])}function Lue(t,e){return Bue(t,e)}function Bue(t,e,r,n){Zd()||Yt(!1);let{navigator:i}=T.useContext(Ao),{matches:s}=T.useContext(Fo),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=qo(),d;if(e){var h;let b=typeof e=="string"?Jd(e):e;l==="/"||(h=b.pathname)!=null&&h.startsWith(l)||Yt(!1),d=b}else d=c;let f=d.pathname||"/",p=f;if(l!=="/"){let b=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let m=mue(t,{pathname:p}),g=Wue(m&&m.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:qa([l,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:qa([l,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),s,r,n);return e&&g?T.createElement(m0.Provider,{value:{location:lp({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ca.Pop}},g):g}function zue(){let t=Que(),e=Due(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),r?T.createElement("pre",{style:i},r):null,null)}const Vue=T.createElement(zue,null);class Uue extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?T.createElement(Fo.Provider,{value:this.props.routeContext},T.createElement(yee.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Hue(t){let{routeContext:e,match:r,children:n}=t,i=T.useContext(p0);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),T.createElement(Fo.Provider,{value:e},n)}function Wue(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if(!r)return null;if(r.errors)t=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,a=(i=r)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Yt(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:p}=r,m=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||m){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,m=!1,g=null,b=null;r&&(p=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||Vue,l&&(c<0&&f===0?(Jue("route-fallback"),m=!0,b=null):c===f&&(m=!0,b=h.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,f+1)),v=()=>{let w;return p?w=g:m?w=b:h.route.Component?w=T.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,T.createElement(Hue,{match:h,routeContext:{outlet:d,matches:y,isDataRoute:r!=null},children:w})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?T.createElement(Uue,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var bee=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(bee||{}),xee=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(xee||{});function Kue(t){let e=T.useContext(p0);return e||Yt(!1),e}function Gue(t){let e=T.useContext(gee);return e||Yt(!1),e}function Yue(t){let e=T.useContext(Fo);return e||Yt(!1),e}function wee(t){let e=Yue(),r=e.matches[e.matches.length-1];return r.route.id||Yt(!1),r.route.id}function Que(){var t;let e=T.useContext(yee),r=Gue(),n=wee();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function Xue(){let{router:t}=Kue(bee.UseNavigateStable),e=wee(xee.UseNavigateStable),r=T.useRef(!1);return vee(()=>{r.current=!0}),T.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,lp({fromRouteId:e},s)))},[t,e])}const AA={};function Jue(t,e,r){AA[t]||(AA[t]=!0)}function Zue(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function See(t){let{to:e,replace:r,state:n,relative:i}=t;Zd()||Yt(!1);let{future:s,static:o}=T.useContext(Ao),{matches:a}=T.useContext(Fo),{pathname:l}=qo(),c=yn(),d=FR(e,AR(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(d);return T.useEffect(()=>c(JSON.parse(h),{replace:r,state:n,relative:i}),[c,h,i,r,n]),null}function St(t){Yt(!1)}function ede(t){let{basename:e="/",children:r=null,location:n,navigationType:i=Ca.Pop,navigator:s,static:o=!1,future:a}=t;Zd()&&Yt(!1);let l=e.replace(/^\/*/,"/"),c=T.useMemo(()=>({basename:l,navigator:s,static:o,future:lp({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof n=="string"&&(n=Jd(n));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:m="default"}=n,g=T.useMemo(()=>{let b=kd(d,l);return b==null?null:{location:{pathname:b,search:h,hash:f,state:p,key:m},navigationType:i}},[l,d,h,f,p,m,i]);return g==null?null:T.createElement(Ao.Provider,{value:c},T.createElement(m0.Provider,{children:r,value:g}))}function FA(t){let{children:e,location:r}=t;return Lue(dP(e),r)}new Promise(()=>{});function dP(t,e){e===void 0&&(e=[]);let r=[];return T.Children.forEach(t,(n,i)=>{if(!T.isValidElement(n))return;let s=[...e,i];if(n.type===T.Fragment){r.push.apply(r,dP(n.props.children,s));return}n.type!==St&&Yt(!1),!n.props.index||!n.props.children||Yt(!1);let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=dP(n.props.children,s)),r.push(o)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $y(){return $y=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$y.apply(this,arguments)}function _ee(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function tde(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function rde(t,e){return t.button===0&&(!e||e==="_self")&&!tde(t)}function hP(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function nde(t,e){let r=hP(t);return e&&e.forEach((n,i)=>{r.has(i)||e.getAll(i).forEach(s=>{r.append(i,s)})}),r}const ide=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],sde=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],ode="6";try{window.__reactRouterVersion=ode}catch{}const ade=T.createContext({isTransitioning:!1}),lde="startTransition",qA=ele[lde];function cde(t){let{basename:e,children:r,future:n,window:i}=t,s=T.useRef();s.current==null&&(s.current=hue({window:i,v5Compat:!0}));let o=s.current,[a,l]=T.useState({action:o.action,location:o.location}),{v7_startTransition:c}=n||{},d=T.useCallback(h=>{c&&qA?qA(()=>l(h)):l(h)},[l,c]);return T.useLayoutEffect(()=>o.listen(d),[o,d]),T.useEffect(()=>Zue(n),[n]),T.createElement(ede,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:o,future:n})}const ude=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",dde=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ce=T.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,f=_ee(e,ide),{basename:p}=T.useContext(Ao),m,g=!1;if(typeof c=="string"&&dde.test(c)&&(m=c,ude))try{let w=new URL(window.location.href),x=c.startsWith("//")?new URL(w.protocol+c):new URL(c),S=kd(x.pathname,p);x.origin===w.origin&&S!=null?c=S+x.search+x.hash:g=!0}catch{}let b=Fue(c,{relative:i}),y=pde(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:h});function v(w){n&&n(w),w.defaultPrevented||y(w)}return T.createElement("a",$y({},f,{href:m||b,onClick:g||s?n:v,ref:r,target:l}))}),hde=T.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:d}=e,h=_ee(e,sde),f=g0(l,{relative:h.relative}),p=qo(),m=T.useContext(gee),{navigator:g,basename:b}=T.useContext(Ao),y=m!=null&&mde(f)&&c===!0,v=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,w=p.pathname,x=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;i||(w=w.toLowerCase(),x=x?x.toLowerCase():null,v=v.toLowerCase()),x&&b&&(x=kd(x,b)||x);const S=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let _=w===v||!o&&w.startsWith(v)&&w.charAt(S)==="/",N=x!=null&&(x===v||!o&&x.startsWith(v)&&x.charAt(v.length)==="/"),E={isActive:_,isPending:N,isTransitioning:y},k=_?n:void 0,C;typeof s=="function"?C=s(E):C=[s,_?"active":null,N?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let O=typeof a=="function"?a(E):a;return T.createElement(ce,$y({},h,{"aria-current":k,className:C,ref:r,style:O,to:l,viewTransition:c}),typeof d=="function"?d(E):d)});var fP;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(fP||(fP={}));var LA;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(LA||(LA={}));function fde(t){let e=T.useContext(p0);return e||Yt(!1),e}function pde(t,e){let{target:r,replace:n,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=yn(),c=qo(),d=g0(t,{relative:o});return T.useCallback(h=>{if(rde(h,r)){h.preventDefault();let f=n!==void 0?n:My(c)===My(d);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,d,n,i,r,t,s,o,a])}function y0(t){let e=T.useRef(hP(t)),r=T.useRef(!1),n=qo(),i=T.useMemo(()=>nde(n.search,r.current?null:e.current),[n.search]),s=yn(),o=T.useCallback((a,l)=>{const c=hP(typeof a=="function"?a(i):a);r.current=!0,s("?"+c,l)},[s,i]);return[i,o]}function mde(t,e){e===void 0&&(e={});let r=T.useContext(ade);r==null&&Yt(!1);let{basename:n}=fde(fP.useViewTransitionState),i=g0(t,{relative:e.relative});if(!r.isTransitioning)return!1;let s=kd(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=kd(r.nextLocation.pathname,n)||r.nextLocation.pathname;return uP(i.pathname,o)!=null||uP(i.pathname,s)!=null}var Lc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},gde={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},pa,BI,BX,yde=(BX=class{constructor(){be(this,pa,gde);be(this,BI,!1)}setTimeoutProvider(t){se(this,pa,t)}setTimeout(t,e){return R(this,pa).setTimeout(t,e)}clearTimeout(t){R(this,pa).clearTimeout(t)}setInterval(t,e){return R(this,pa).setInterval(t,e)}clearInterval(t){R(this,pa).clearInterval(t)}},pa=new WeakMap,BI=new WeakMap,BX),Pl=new yde;function vde(t){setTimeout(t,0)}var yc=typeof window>"u"||"Deno"in globalThis;function hn(){}function bde(t,e){return typeof t=="function"?t(e):t}function pP(t){return typeof t=="number"&&t>=0&&t!==1/0}function Eee(t,e){return Math.max(t+(e||0)-Date.now(),0)}function La(t,e){return typeof t=="function"?t(e):t}function ki(t,e){return typeof t=="function"?t(e):t}function BA(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(n){if(e.queryHash!==qR(o,e.options))return!1}else if(!cp(e.queryKey,o))return!1}if(r!=="all"){const l=e.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function zA(t,e){const{exact:r,status:n,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(r){if(vc(e.options.mutationKey)!==vc(s))return!1}else if(!cp(e.options.mutationKey,s))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function qR(t,e){return((e==null?void 0:e.queryKeyHashFn)||vc)(t)}function vc(t){return JSON.stringify(t,(e,r)=>mP(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function cp(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>cp(t[r],e[r])):!1}var xde=Object.prototype.hasOwnProperty;function LR(t,e){if(t===e)return t;const r=VA(t)&&VA(e);if(!r&&!(mP(t)&&mP(e)))return e;const i=(r?t:Object.keys(t)).length,s=r?e:Object.keys(e),o=s.length,a=r?new Array(o):{};let l=0;for(let c=0;c<o;c++){const d=r?c:s[c],h=t[d],f=e[d];if(h===f){a[d]=h,(r?c<i:xde.call(t,d))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[d]=f;continue}const p=LR(h,f);a[d]=p,p===h&&l++}return i===o&&l===i?t:a}function up(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function VA(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function mP(t){if(!UA(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!UA(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function UA(t){return Object.prototype.toString.call(t)==="[object Object]"}function wde(t){return new Promise(e=>{Pl.setTimeout(e,t)})}function gP(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?LR(t,e):e}function Sde(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function _de(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var BR=Symbol();function Nee(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===BR?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function zR(t,e){return typeof t=="function"?t(...e):!!t}function Ede(t,e,r){let n=!1,i;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(i??(i=e()),n||(n=!0,i.aborted?r():i.addEventListener("abort",r,{once:!0})),i)}),t}var zl,ma,sd,zX,Nde=(zX=class extends Lc{constructor(){super();be(this,zl);be(this,ma);be(this,sd);se(this,sd,e=>{if(!yc&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){R(this,ma)||this.setEventListener(R(this,sd))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,ma))==null||e.call(this),se(this,ma,void 0))}setEventListener(e){var r;se(this,sd,e),(r=R(this,ma))==null||r.call(this),se(this,ma,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){R(this,zl)!==e&&(se(this,zl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof R(this,zl)=="boolean"?R(this,zl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},zl=new WeakMap,ma=new WeakMap,sd=new WeakMap,zX),VR=new Nde;function yP(){let t,e;const r=new Promise((i,s)=>{t=i,e=s});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),t(i)},r.reject=i=>{n({status:"rejected",reason:i}),e(i)},r}var Cde=vde;function kde(){let t=[],e=0,r=a=>{a()},n=a=>{a()},i=Cde;const s=a=>{e?t.push(a):i(()=>{r(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{n(()=>{a.forEach(l=>{r(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{r=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{i=a}}}var ur=kde(),od,ga,ad,VX,Tde=(VX=class extends Lc{constructor(){super();be(this,od,!0);be(this,ga);be(this,ad);se(this,ad,e=>{if(!yc&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){R(this,ga)||this.setEventListener(R(this,ad))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,ga))==null||e.call(this),se(this,ga,void 0))}setEventListener(e){var r;se(this,ad,e),(r=R(this,ga))==null||r.call(this),se(this,ga,e(this.setOnline.bind(this)))}setOnline(e){R(this,od)!==e&&(se(this,od,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return R(this,od)}},od=new WeakMap,ga=new WeakMap,ad=new WeakMap,VX),Dy=new Tde;function Ode(t){return Math.min(1e3*2**t,3e4)}function Cee(t){return(t??"online")==="online"?Dy.isOnline():!0}var vP=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function kee(t){let e=!1,r=0,n;const i=yP(),s=()=>i.status!=="pending",o=g=>{var b;if(!s()){const y=new vP(g);f(y),(b=t.onCancel)==null||b.call(t,y)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>VR.isFocused()&&(t.networkMode==="always"||Dy.isOnline())&&t.canRun(),d=()=>Cee(t.networkMode)&&t.canRun(),h=g=>{s()||(n==null||n(),i.resolve(g))},f=g=>{s()||(n==null||n(),i.reject(g))},p=()=>new Promise(g=>{var b;n=y=>{(s()||c())&&g(y)},(b=t.onPause)==null||b.call(t)}).then(()=>{var g;n=void 0,s()||(g=t.onContinue)==null||g.call(t)}),m=()=>{if(s())return;let g;const b=r===0?t.initialPromise:void 0;try{g=b??t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(h).catch(y=>{var _;if(s())return;const v=t.retry??(yc?0:3),w=t.retryDelay??Ode,x=typeof w=="function"?w(r,y):w,S=v===!0||typeof v=="number"&&r<v||typeof v=="function"&&v(r,y);if(e||!S){f(y);return}r++,(_=t.onFail)==null||_.call(t,r,y),wde(x).then(()=>c()?void 0:p()).then(()=>{e?f(y):m()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(n==null||n(),i),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?m():p().then(m),i)}}var Vl,UX,Tee=(UX=class{constructor(){be(this,Vl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),pP(this.gcTime)&&se(this,Vl,Pl.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(yc?1/0:5*60*1e3))}clearGcTimeout(){R(this,Vl)&&(Pl.clearTimeout(R(this,Vl)),se(this,Vl,void 0))}},Vl=new WeakMap,UX),Ul,ld,Ni,Hl,Ar,$p,Wl,Zi,eo,HX,jde=(HX=class extends Tee{constructor(e){super();be(this,Zi);be(this,Ul);be(this,ld);be(this,Ni);be(this,Hl);be(this,Ar);be(this,$p);be(this,Wl);se(this,Wl,!1),se(this,$p,e.defaultOptions),this.setOptions(e.options),this.observers=[],se(this,Hl,e.client),se(this,Ni,R(this,Hl).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,se(this,Ul,WA(this.options)),this.state=e.state??R(this,Ul),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=R(this,Ar))==null?void 0:e.promise}setOptions(e){if(this.options={...R(this,$p),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=WA(this.options);r.data!==void 0&&(this.setState(HA(r.data,r.dataUpdatedAt)),se(this,Ul,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&R(this,Ni).remove(this)}setData(e,r){const n=gP(this.state.data,e,this.options);return De(this,Zi,eo).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){De(this,Zi,eo).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,i;const r=(n=R(this,Ar))==null?void 0:n.promise;return(i=R(this,Ar))==null||i.cancel(e),r?r.then(hn).catch(hn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(R(this,Ul))}isActive(){return this.observers.some(e=>ki(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===BR||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>La(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Eee(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=R(this,Ar))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=R(this,Ar))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),R(this,Ni).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(R(this,Ar)&&(R(this,Wl)?R(this,Ar).cancel({revert:!0}):R(this,Ar).cancelRetry()),this.scheduleGc()),R(this,Ni).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||De(this,Zi,eo).call(this,{type:"invalidate"})}async fetch(e,r){var l,c,d,h,f,p,m,g,b,y,v,w;if(this.state.fetchStatus!=="idle"&&((l=R(this,Ar))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(R(this,Ar))return R(this,Ar).continueRetry(),R(this,Ar).promise}if(e&&this.setOptions(e),!this.options.queryFn){const x=this.observers.find(S=>S.options.queryFn);x&&this.setOptions(x.options)}const n=new AbortController,i=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(se(this,Wl,!0),n.signal)})},s=()=>{const x=Nee(this.options,r),_=(()=>{const N={client:R(this,Hl),queryKey:this.queryKey,meta:this.meta};return i(N),N})();return se(this,Wl,!1),this.options.persister?this.options.persister(x,_,this):x(_)},a=(()=>{const x={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:R(this,Hl),state:this.state,fetchFn:s};return i(x),x})();(c=this.options.behavior)==null||c.onFetch(a,this),se(this,ld,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&De(this,Zi,eo).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta}),se(this,Ar,kee({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,onCancel:x=>{x instanceof vP&&x.revert&&this.setState({...R(this,ld),fetchStatus:"idle"}),n.abort()},onFail:(x,S)=>{De(this,Zi,eo).call(this,{type:"failed",failureCount:x,error:S})},onPause:()=>{De(this,Zi,eo).call(this,{type:"pause"})},onContinue:()=>{De(this,Zi,eo).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const x=await R(this,Ar).start();if(x===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(x),(p=(f=R(this,Ni).config).onSuccess)==null||p.call(f,x,this),(g=(m=R(this,Ni).config).onSettled)==null||g.call(m,x,this.state.error,this),x}catch(x){if(x instanceof vP){if(x.silent)return R(this,Ar).promise;if(x.revert){if(this.state.data===void 0)throw x;return this.state.data}}throw De(this,Zi,eo).call(this,{type:"error",error:x}),(y=(b=R(this,Ni).config).onError)==null||y.call(b,x,this),(w=(v=R(this,Ni).config).onSettled)==null||w.call(v,this.state.data,x,this),x}finally{this.scheduleGc()}}},Ul=new WeakMap,ld=new WeakMap,Ni=new WeakMap,Hl=new WeakMap,Ar=new WeakMap,$p=new WeakMap,Wl=new WeakMap,Zi=new WeakSet,eo=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Oee(n.data,this.options),fetchMeta:e.meta??null};case"success":const i={...n,...HA(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return se(this,ld,e.manual?i:void 0),i;case"error":const s=e.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),ur.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),R(this,Ni).notify({query:this,type:"updated",action:e})})},HX);function Oee(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Cee(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function HA(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function WA(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Fn,ot,Dp,bn,Kl,cd,so,ya,Ap,ud,dd,Gl,Yl,va,hd,vt,lf,bP,xP,wP,SP,_P,EP,NP,jee,WX,UR=(WX=class extends Lc{constructor(e,r){super();be(this,vt);be(this,Fn);be(this,ot);be(this,Dp);be(this,bn);be(this,Kl);be(this,cd);be(this,so);be(this,ya);be(this,Ap);be(this,ud);be(this,dd);be(this,Gl);be(this,Yl);be(this,va);be(this,hd,new Set);this.options=r,se(this,Fn,e),se(this,ya,null),se(this,so,yP()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(R(this,ot).addObserver(this),KA(R(this,ot),this.options)?De(this,vt,lf).call(this):this.updateResult(),De(this,vt,SP).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return CP(R(this,ot),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return CP(R(this,ot),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,De(this,vt,_P).call(this),De(this,vt,EP).call(this),R(this,ot).removeObserver(this)}setOptions(e){const r=this.options,n=R(this,ot);if(this.options=R(this,Fn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ki(this.options.enabled,R(this,ot))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");De(this,vt,NP).call(this),R(this,ot).setOptions(this.options),r._defaulted&&!up(this.options,r)&&R(this,Fn).getQueryCache().notify({type:"observerOptionsUpdated",query:R(this,ot),observer:this});const i=this.hasListeners();i&&GA(R(this,ot),n,this.options,r)&&De(this,vt,lf).call(this),this.updateResult(),i&&(R(this,ot)!==n||ki(this.options.enabled,R(this,ot))!==ki(r.enabled,R(this,ot))||La(this.options.staleTime,R(this,ot))!==La(r.staleTime,R(this,ot)))&&De(this,vt,bP).call(this);const s=De(this,vt,xP).call(this);i&&(R(this,ot)!==n||ki(this.options.enabled,R(this,ot))!==ki(r.enabled,R(this,ot))||s!==R(this,va))&&De(this,vt,wP).call(this,s)}getOptimisticResult(e){const r=R(this,Fn).getQueryCache().build(R(this,Fn),e),n=this.createResult(r,e);return Ide(this,n)&&(se(this,bn,n),se(this,cd,this.options),se(this,Kl,R(this,ot).state)),n}getCurrentResult(){return R(this,bn)}trackResult(e,r){return new Proxy(e,{get:(n,i)=>(this.trackProp(i),r==null||r(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&R(this,so).status==="pending"&&R(this,so).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,i))})}trackProp(e){R(this,hd).add(e)}getCurrentQuery(){return R(this,ot)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=R(this,Fn).defaultQueryOptions(e),n=R(this,Fn).getQueryCache().build(R(this,Fn),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(e){return De(this,vt,lf).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),R(this,bn)))}createResult(e,r){var k;const n=R(this,ot),i=this.options,s=R(this,bn),o=R(this,Kl),a=R(this,cd),c=e!==n?e.state:R(this,Dp),{state:d}=e;let h={...d},f=!1,p;if(r._optimisticResults){const C=this.hasListeners(),O=!C&&KA(e,r),P=C&&GA(e,n,r,i);(O||P)&&(h={...h,...Oee(d.data,e.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:m,errorUpdatedAt:g,status:b}=h;p=h.data;let y=!1;if(r.placeholderData!==void 0&&p===void 0&&b==="pending"){let C;s!=null&&s.isPlaceholderData&&r.placeholderData===(a==null?void 0:a.placeholderData)?(C=s.data,y=!0):C=typeof r.placeholderData=="function"?r.placeholderData((k=R(this,dd))==null?void 0:k.state.data,R(this,dd)):r.placeholderData,C!==void 0&&(b="success",p=gP(s==null?void 0:s.data,C,r),f=!0)}if(r.select&&p!==void 0&&!y)if(s&&p===(o==null?void 0:o.data)&&r.select===R(this,Ap))p=R(this,ud);else try{se(this,Ap,r.select),p=r.select(p),p=gP(s==null?void 0:s.data,p,r),se(this,ud,p),se(this,ya,null)}catch(C){se(this,ya,C)}R(this,ya)&&(m=R(this,ya),p=R(this,ud),g=Date.now(),b="error");const v=h.fetchStatus==="fetching",w=b==="pending",x=b==="error",S=w&&v,_=p!==void 0,E={status:b,fetchStatus:h.fetchStatus,isPending:w,isSuccess:b==="success",isError:x,isInitialLoading:S,isLoading:S,data:p,dataUpdatedAt:h.dataUpdatedAt,error:m,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:v,isRefetching:v&&!w,isLoadingError:x&&!_,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:x&&_,isStale:HR(e,r),refetch:this.refetch,promise:R(this,so),isEnabled:ki(r.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const C=j=>{E.status==="error"?j.reject(E.error):E.data!==void 0&&j.resolve(E.data)},O=()=>{const j=se(this,so,E.promise=yP());C(j)},P=R(this,so);switch(P.status){case"pending":e.queryHash===n.queryHash&&C(P);break;case"fulfilled":(E.status==="error"||E.data!==P.value)&&O();break;case"rejected":(E.status!=="error"||E.error!==P.reason)&&O();break}}return E}updateResult(){const e=R(this,bn),r=this.createResult(R(this,ot),this.options);if(se(this,Kl,R(this,ot).state),se(this,cd,this.options),R(this,Kl).data!==void 0&&se(this,dd,R(this,ot)),up(r,e))return;se(this,bn,r);const n=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!R(this,hd).size)return!0;const o=new Set(s??R(this,hd));return this.options.throwOnError&&o.add("error"),Object.keys(R(this,bn)).some(a=>{const l=a;return R(this,bn)[l]!==e[l]&&o.has(l)})};De(this,vt,jee).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&De(this,vt,SP).call(this)}},Fn=new WeakMap,ot=new WeakMap,Dp=new WeakMap,bn=new WeakMap,Kl=new WeakMap,cd=new WeakMap,so=new WeakMap,ya=new WeakMap,Ap=new WeakMap,ud=new WeakMap,dd=new WeakMap,Gl=new WeakMap,Yl=new WeakMap,va=new WeakMap,hd=new WeakMap,vt=new WeakSet,lf=function(e){De(this,vt,NP).call(this);let r=R(this,ot).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(hn)),r},bP=function(){De(this,vt,_P).call(this);const e=La(this.options.staleTime,R(this,ot));if(yc||R(this,bn).isStale||!pP(e))return;const n=Eee(R(this,bn).dataUpdatedAt,e)+1;se(this,Gl,Pl.setTimeout(()=>{R(this,bn).isStale||this.updateResult()},n))},xP=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(R(this,ot)):this.options.refetchInterval)??!1},wP=function(e){De(this,vt,EP).call(this),se(this,va,e),!(yc||ki(this.options.enabled,R(this,ot))===!1||!pP(R(this,va))||R(this,va)===0)&&se(this,Yl,Pl.setInterval(()=>{(this.options.refetchIntervalInBackground||VR.isFocused())&&De(this,vt,lf).call(this)},R(this,va)))},SP=function(){De(this,vt,bP).call(this),De(this,vt,wP).call(this,De(this,vt,xP).call(this))},_P=function(){R(this,Gl)&&(Pl.clearTimeout(R(this,Gl)),se(this,Gl,void 0))},EP=function(){R(this,Yl)&&(Pl.clearInterval(R(this,Yl)),se(this,Yl,void 0))},NP=function(){const e=R(this,Fn).getQueryCache().build(R(this,Fn),this.options);if(e===R(this,ot))return;const r=R(this,ot);se(this,ot,e),se(this,Dp,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},jee=function(e){ur.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(R(this,bn))}),R(this,Fn).getQueryCache().notify({query:R(this,ot),type:"observerResultsUpdated"})})},WX);function Pde(t,e){return ki(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function KA(t,e){return Pde(t,e)||t.state.data!==void 0&&CP(t,e,e.refetchOnMount)}function CP(t,e,r){if(ki(e.enabled,t)!==!1&&La(e.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&HR(t,e)}return!1}function GA(t,e,r,n){return(t!==e||ki(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&HR(t,r)}function HR(t,e){return ki(e.enabled,t)!==!1&&t.isStaleByTime(La(e.staleTime,t))}function Ide(t,e){return!up(t.getCurrentResult(),e)}function YA(t){return{onFetch:(e,r)=>{var d,h,f,p,m;const n=e.options,i=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,s=((p=e.state.data)==null?void 0:p.pages)||[],o=((m=e.state.data)==null?void 0:m.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let g=!1;const b=w=>{Ede(w,()=>e.signal,()=>g=!0)},y=Nee(e.options,e.fetchOptions),v=async(w,x,S)=>{if(g)return Promise.reject();if(x==null&&w.pages.length)return Promise.resolve(w);const N=(()=>{const O={client:e.client,queryKey:e.queryKey,pageParam:x,direction:S?"backward":"forward",meta:e.options.meta};return b(O),O})(),E=await y(N),{maxPages:k}=e.options,C=S?_de:Sde;return{pages:C(w.pages,E,k),pageParams:C(w.pageParams,x,k)}};if(i&&s.length){const w=i==="backward",x=w?Rde:QA,S={pages:s,pageParams:o},_=x(n,S);a=await v(S,_,w)}else{const w=t??s.length;do{const x=l===0?o[0]??n.initialPageParam:QA(n,a);if(l>0&&x==null)break;a=await v(a,x),l++}while(l<w)}return a};e.options.persister?e.fetchFn=()=>{var g,b;return(b=(g=e.options).persister)==null?void 0:b.call(g,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=c}}}function QA(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function Rde(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var Fp,Cs,xn,Ql,ks,Zo,KX,Mde=(KX=class extends Tee{constructor(e){super();be(this,ks);be(this,Fp);be(this,Cs);be(this,xn);be(this,Ql);se(this,Fp,e.client),this.mutationId=e.mutationId,se(this,xn,e.mutationCache),se(this,Cs,[]),this.state=e.state||Pee(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){R(this,Cs).includes(e)||(R(this,Cs).push(e),this.clearGcTimeout(),R(this,xn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){se(this,Cs,R(this,Cs).filter(r=>r!==e)),this.scheduleGc(),R(this,xn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){R(this,Cs).length||(this.state.status==="pending"?this.scheduleGc():R(this,xn).remove(this))}continue(){var e;return((e=R(this,Ql))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,l,c,d,h,f,p,m,g,b,y,v,w,x,S,_,N,E,k;const r=()=>{De(this,ks,Zo).call(this,{type:"continue"})},n={client:R(this,Fp),meta:this.options.meta,mutationKey:this.options.mutationKey};se(this,Ql,kee({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(C,O)=>{De(this,ks,Zo).call(this,{type:"failed",failureCount:C,error:O})},onPause:()=>{De(this,ks,Zo).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>R(this,xn).canRun(this)}));const i=this.state.status==="pending",s=!R(this,Ql).canStart();try{if(i)r();else{De(this,ks,Zo).call(this,{type:"pending",variables:e,isPaused:s}),await((a=(o=R(this,xn).config).onMutate)==null?void 0:a.call(o,e,this,n));const O=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e,n));O!==this.state.context&&De(this,ks,Zo).call(this,{type:"pending",context:O,variables:e,isPaused:s})}const C=await R(this,Ql).start();return await((h=(d=R(this,xn).config).onSuccess)==null?void 0:h.call(d,C,e,this.state.context,this,n)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,C,e,this.state.context,n)),await((g=(m=R(this,xn).config).onSettled)==null?void 0:g.call(m,C,null,this.state.variables,this.state.context,this,n)),await((y=(b=this.options).onSettled)==null?void 0:y.call(b,C,null,e,this.state.context,n)),De(this,ks,Zo).call(this,{type:"success",data:C}),C}catch(C){try{await((w=(v=R(this,xn).config).onError)==null?void 0:w.call(v,C,e,this.state.context,this,n))}catch(O){Promise.reject(O)}try{await((S=(x=this.options).onError)==null?void 0:S.call(x,C,e,this.state.context,n))}catch(O){Promise.reject(O)}try{await((N=(_=R(this,xn).config).onSettled)==null?void 0:N.call(_,void 0,C,this.state.variables,this.state.context,this,n))}catch(O){Promise.reject(O)}try{await((k=(E=this.options).onSettled)==null?void 0:k.call(E,void 0,C,e,this.state.context,n))}catch(O){Promise.reject(O)}throw De(this,ks,Zo).call(this,{type:"error",error:C}),C}finally{R(this,xn).runNext(this)}}},Fp=new WeakMap,Cs=new WeakMap,xn=new WeakMap,Ql=new WeakMap,ks=new WeakSet,Zo=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),ur.batch(()=>{R(this,Cs).forEach(n=>{n.onMutationUpdate(e)}),R(this,xn).notify({mutation:this,type:"updated",action:e})})},KX);function Pee(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var oo,es,qp,GX,$de=(GX=class extends Lc{constructor(e={}){super();be(this,oo);be(this,es);be(this,qp);this.config=e,se(this,oo,new Set),se(this,es,new Map),se(this,qp,0)}build(e,r,n){const i=new Mde({client:e,mutationCache:this,mutationId:++Gm(this,qp)._,options:e.defaultMutationOptions(r),state:n});return this.add(i),i}add(e){R(this,oo).add(e);const r=hg(e);if(typeof r=="string"){const n=R(this,es).get(r);n?n.push(e):R(this,es).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(R(this,oo).delete(e)){const r=hg(e);if(typeof r=="string"){const n=R(this,es).get(r);if(n)if(n.length>1){const i=n.indexOf(e);i!==-1&&n.splice(i,1)}else n[0]===e&&R(this,es).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=hg(e);if(typeof r=="string"){const n=R(this,es).get(r),i=n==null?void 0:n.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var n;const r=hg(e);if(typeof r=="string"){const i=(n=R(this,es).get(r))==null?void 0:n.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ur.batch(()=>{R(this,oo).forEach(e=>{this.notify({type:"removed",mutation:e})}),R(this,oo).clear(),R(this,es).clear()})}getAll(){return Array.from(R(this,oo))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>zA(r,n))}findAll(e={}){return this.getAll().filter(r=>zA(e,r))}notify(e){ur.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return ur.batch(()=>Promise.all(e.map(r=>r.continue().catch(hn))))}},oo=new WeakMap,es=new WeakMap,qp=new WeakMap,GX);function hg(t){var e;return(e=t.options.scope)==null?void 0:e.id}var ao,ba,qn,lo,To,Qg,kP,YX,Dde=(YX=class extends Lc{constructor(e,r){super();be(this,To);be(this,ao);be(this,ba);be(this,qn);be(this,lo);se(this,ao,e),this.setOptions(r),this.bindMethods(),De(this,To,Qg).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var n;const r=this.options;this.options=R(this,ao).defaultMutationOptions(e),up(this.options,r)||R(this,ao).getMutationCache().notify({type:"observerOptionsUpdated",mutation:R(this,qn),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&vc(r.mutationKey)!==vc(this.options.mutationKey)?this.reset():((n=R(this,qn))==null?void 0:n.state.status)==="pending"&&R(this,qn).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=R(this,qn))==null||e.removeObserver(this)}onMutationUpdate(e){De(this,To,Qg).call(this),De(this,To,kP).call(this,e)}getCurrentResult(){return R(this,ba)}reset(){var e;(e=R(this,qn))==null||e.removeObserver(this),se(this,qn,void 0),De(this,To,Qg).call(this),De(this,To,kP).call(this)}mutate(e,r){var n;return se(this,lo,r),(n=R(this,qn))==null||n.removeObserver(this),se(this,qn,R(this,ao).getMutationCache().build(R(this,ao),this.options)),R(this,qn).addObserver(this),R(this,qn).execute(e)}},ao=new WeakMap,ba=new WeakMap,qn=new WeakMap,lo=new WeakMap,To=new WeakSet,Qg=function(){var r;const e=((r=R(this,qn))==null?void 0:r.state)??Pee();se(this,ba,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},kP=function(e){ur.batch(()=>{var r,n,i,s,o,a,l,c;if(R(this,lo)&&this.hasListeners()){const d=R(this,ba).variables,h=R(this,ba).context,f={client:R(this,ao),meta:this.options.meta,mutationKey:this.options.mutationKey};if((e==null?void 0:e.type)==="success"){try{(n=(r=R(this,lo)).onSuccess)==null||n.call(r,e.data,d,h,f)}catch(p){Promise.reject(p)}try{(s=(i=R(this,lo)).onSettled)==null||s.call(i,e.data,null,d,h,f)}catch(p){Promise.reject(p)}}else if((e==null?void 0:e.type)==="error"){try{(a=(o=R(this,lo)).onError)==null||a.call(o,e.error,d,h,f)}catch(p){Promise.reject(p)}try{(c=(l=R(this,lo)).onSettled)==null||c.call(l,void 0,e.error,d,h,f)}catch(p){Promise.reject(p)}}}this.listeners.forEach(d=>{d(R(this,ba))})})},YX);function XA(t,e){const r=new Set(e);return t.filter(n=>!r.has(n))}function Ade(t,e,r){const n=t.slice(0);return n[e]=r,n}var fd,si,pd,md,Ci,xa,Lp,Bp,zp,on,TP,OP,jP,PP,IP,QX,Fde=(QX=class extends Lc{constructor(e,r,n){super();be(this,on);be(this,fd);be(this,si);be(this,pd);be(this,md);be(this,Ci);be(this,xa);be(this,Lp);be(this,Bp);be(this,zp,[]);se(this,fd,e),se(this,md,n),se(this,pd,[]),se(this,Ci,[]),se(this,si,[]),this.setQueries(r)}onSubscribe(){this.listeners.size===1&&R(this,Ci).forEach(e=>{e.subscribe(r=>{De(this,on,PP).call(this,e,r)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,R(this,Ci).forEach(e=>{e.destroy()})}setQueries(e,r){se(this,pd,e),se(this,md,r),ur.batch(()=>{const n=R(this,Ci),i=De(this,on,jP).call(this,R(this,pd));i.forEach(h=>h.observer.setOptions(h.defaultedQueryOptions));const s=i.map(h=>h.observer),o=s.map(h=>h.getCurrentResult()),a=n.length!==s.length,l=s.some((h,f)=>h!==n[f]),c=a||l,d=c?!0:o.some((h,f)=>{const p=R(this,si)[f];return!p||!up(h,p)});!c&&!d||(c&&(se(this,zp,i),se(this,Ci,s)),se(this,si,o),this.hasListeners()&&(c&&(XA(n,s).forEach(h=>{h.destroy()}),XA(s,n).forEach(h=>{h.subscribe(f=>{De(this,on,PP).call(this,h,f)})})),De(this,on,IP).call(this)))})}getCurrentResult(){return R(this,si)}getQueries(){return R(this,Ci).map(e=>e.getCurrentQuery())}getObservers(){return R(this,Ci)}getOptimisticResult(e,r){const n=De(this,on,jP).call(this,e),i=n.map(s=>s.observer.getOptimisticResult(s.defaultedQueryOptions));return[i,s=>De(this,on,OP).call(this,s??i,r),()=>De(this,on,TP).call(this,i,n)]}},fd=new WeakMap,si=new WeakMap,pd=new WeakMap,md=new WeakMap,Ci=new WeakMap,xa=new WeakMap,Lp=new WeakMap,Bp=new WeakMap,zp=new WeakMap,on=new WeakSet,TP=function(e,r){return r.map((n,i)=>{const s=e[i];return n.defaultedQueryOptions.notifyOnChangeProps?s:n.observer.trackResult(s,o=>{r.forEach(a=>{a.observer.trackProp(o)})})})},OP=function(e,r){return r?((!R(this,xa)||R(this,si)!==R(this,Bp)||r!==R(this,Lp))&&(se(this,Lp,r),se(this,Bp,R(this,si)),se(this,xa,LR(R(this,xa),r(e)))),R(this,xa)):e},jP=function(e){const r=new Map;R(this,Ci).forEach(i=>{const s=i.options.queryHash;if(!s)return;const o=r.get(s);o?o.push(i):r.set(s,[i])});const n=[];return e.forEach(i=>{var l;const s=R(this,fd).defaultQueryOptions(i),a=((l=r.get(s.queryHash))==null?void 0:l.shift())??new UR(R(this,fd),s);n.push({defaultedQueryOptions:s,observer:a})}),n},PP=function(e,r){const n=R(this,Ci).indexOf(e);n!==-1&&(se(this,si,Ade(R(this,si),n,r)),De(this,on,IP).call(this))},IP=function(){var e;if(this.hasListeners()){const r=R(this,xa),n=De(this,on,TP).call(this,R(this,si),R(this,zp)),i=De(this,on,OP).call(this,n,(e=R(this,md))==null?void 0:e.combine);r!==i&&ur.batch(()=>{this.listeners.forEach(s=>{s(R(this,si))})})}},QX),Ts,XX,qde=(XX=class extends Lc{constructor(e={}){super();be(this,Ts);this.config=e,se(this,Ts,new Map)}build(e,r,n){const i=r.queryKey,s=r.queryHash??qR(i,r);let o=this.get(s);return o||(o=new jde({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){R(this,Ts).has(e.queryHash)||(R(this,Ts).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=R(this,Ts).get(e.queryHash);r&&(e.destroy(),r===e&&R(this,Ts).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ur.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return R(this,Ts).get(e)}getAll(){return[...R(this,Ts).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>BA(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>BA(e,n)):r}notify(e){ur.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){ur.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ur.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ts=new WeakMap,XX),nr,wa,Sa,gd,yd,_a,vd,bd,JX,Lde=(JX=class{constructor(t={}){be(this,nr);be(this,wa);be(this,Sa);be(this,gd);be(this,yd);be(this,_a);be(this,vd);be(this,bd);se(this,nr,t.queryCache||new qde),se(this,wa,t.mutationCache||new $de),se(this,Sa,t.defaultOptions||{}),se(this,gd,new Map),se(this,yd,new Map),se(this,_a,0)}mount(){Gm(this,_a)._++,R(this,_a)===1&&(se(this,vd,VR.subscribe(async t=>{t&&(await this.resumePausedMutations(),R(this,nr).onFocus())})),se(this,bd,Dy.subscribe(async t=>{t&&(await this.resumePausedMutations(),R(this,nr).onOnline())})))}unmount(){var t,e;Gm(this,_a)._--,R(this,_a)===0&&((t=R(this,vd))==null||t.call(this),se(this,vd,void 0),(e=R(this,bd))==null||e.call(this),se(this,bd,void 0))}isFetching(t){return R(this,nr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return R(this,wa).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=R(this,nr).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=R(this,nr).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(La(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return R(this,nr).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),i=R(this,nr).get(n.queryHash),s=i==null?void 0:i.state.data,o=bde(e,s);if(o!==void 0)return R(this,nr).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(t,e,r){return ur.batch(()=>R(this,nr).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=R(this,nr).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=R(this,nr);ur.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=R(this,nr);return ur.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=ur.batch(()=>R(this,nr).findAll(t).map(i=>i.cancel(r)));return Promise.all(n).then(hn).catch(hn)}invalidateQueries(t,e={}){return ur.batch(()=>(R(this,nr).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=ur.batch(()=>R(this,nr).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,r);return r.throwOnError||(s=s.catch(hn)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(hn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=R(this,nr).build(this,e);return r.isStaleByTime(La(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(hn).catch(hn)}fetchInfiniteQuery(t){return t.behavior=YA(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(hn).catch(hn)}ensureInfiniteQueryData(t){return t.behavior=YA(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Dy.isOnline()?R(this,wa).resumePausedMutations():Promise.resolve()}getQueryCache(){return R(this,nr)}getMutationCache(){return R(this,wa)}getDefaultOptions(){return R(this,Sa)}setDefaultOptions(t){se(this,Sa,t)}setQueryDefaults(t,e){R(this,gd).set(vc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...R(this,gd).values()],r={};return e.forEach(n=>{cp(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){R(this,yd).set(vc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...R(this,yd).values()],r={};return e.forEach(n=>{cp(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...R(this,Sa).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=qR(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===BR&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...R(this,Sa).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){R(this,nr).clear(),R(this,wa).clear()}},nr=new WeakMap,wa=new WeakMap,Sa=new WeakMap,gd=new WeakMap,yd=new WeakMap,_a=new WeakMap,vd=new WeakMap,bd=new WeakMap,JX),Iee=T.createContext(void 0),bt=t=>{const e=T.useContext(Iee);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Bde=({client:t,children:e})=>(T.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),u.jsx(Iee.Provider,{value:t,children:e})),Ree=T.createContext(!1),Mee=()=>T.useContext(Ree);Ree.Provider;function zde(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Vde=T.createContext(zde()),$ee=()=>T.useContext(Vde),Dee=(t,e,r)=>{const n=r!=null&&r.state.error&&typeof t.throwOnError=="function"?zR(t.throwOnError,[r.state.error,r]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||n)&&(e.isReset()||(t.retryOnMount=!1))},Aee=t=>{T.useEffect(()=>{t.clearReset()},[t])},Fee=({result:t,errorResetBoundary:e,throwOnError:r,query:n,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&(i&&t.data===void 0||zR(r,[t.error,n])),qee=t=>{if(t.suspense){const r=i=>i==="static"?i:Math.max(i??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...i)=>r(n(...i)):r(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Lee=(t,e)=>t.isLoading&&t.isFetching&&!e,RP=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Ay=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function MP({queries:t,...e},r){const n=bt(),i=Mee(),s=$ee(),o=T.useMemo(()=>t.map(g=>{const b=n.defaultQueryOptions(g);return b._optimisticResults=i?"isRestoring":"optimistic",b}),[t,n,i]);o.forEach(g=>{qee(g);const b=n.getQueryCache().get(g.queryHash);Dee(g,s,b)}),Aee(s);const[a]=T.useState(()=>new Fde(n,o,e)),[l,c,d]=a.getOptimisticResult(o,e.combine),h=!i&&e.subscribed!==!1;T.useSyncExternalStore(T.useCallback(g=>h?a.subscribe(ur.batchCalls(g)):hn,[a,h]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),T.useEffect(()=>{a.setQueries(o,e)},[o,e,a]);const p=l.some((g,b)=>RP(o[b],g))?l.flatMap((g,b)=>{const y=o[b];if(y){const v=new UR(n,y);if(RP(y,g))return Ay(y,v,s);Lee(g,i)&&Ay(y,v,s)}return[]}):[];if(p.length>0)throw Promise.all(p);const m=l.find((g,b)=>{const y=o[b];return y&&Fee({result:g,errorResetBoundary:s,throwOnError:y.throwOnError,query:n.getQueryCache().get(y.queryHash),suspense:y.suspense})});if(m!=null&&m.error)throw m.error;return c(d())}function Ude(t,e,r){var f,p,m,g;const n=Mee(),i=$ee(),s=bt(),o=s.defaultQueryOptions(t);(p=(f=s.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||p.call(f,o);const a=s.getQueryCache().get(o.queryHash);o._optimisticResults=n?"isRestoring":"optimistic",qee(o),Dee(o,i,a),Aee(i);const l=!s.getQueryCache().get(o.queryHash),[c]=T.useState(()=>new e(s,o)),d=c.getOptimisticResult(o),h=!n&&t.subscribed!==!1;if(T.useSyncExternalStore(T.useCallback(b=>{const y=h?c.subscribe(ur.batchCalls(b)):hn;return c.updateResult(),y},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),T.useEffect(()=>{c.setOptions(o)},[o,c]),RP(o,d))throw Ay(o,c,i);if(Fee({result:d,errorResetBoundary:i,throwOnError:o.throwOnError,query:a,suspense:o.suspense}))throw d.error;if((g=(m=s.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||g.call(m,o,d),o.experimental_prefetchInRender&&!yc&&Lee(d,n)){const b=l?Ay(o,c,i):a==null?void 0:a.promise;b==null||b.catch(hn).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function dt(t,e){return Ude(t,UR)}function ft(t,e){const r=bt(),[n]=T.useState(()=>new Dde(r,t));T.useEffect(()=>{n.setOptions(t)},[n,t]);const i=T.useSyncExternalStore(T.useCallback(o=>n.subscribe(ur.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),s=T.useCallback((o,a)=>{n.mutate(o,a).catch(hn)},[n]);if(i.error&&zR(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}function WR(){const t=window.prmConfig||{};return T.useMemo(()=>({isLoggedIn:t.isLoggedIn||!1,userId:t.userId||null,loginUrl:t.loginUrl||"/wp-login.php",logoutUrl:t.logoutUrl||"/wp-login.php?action=logout",isLoading:!1}),[t.isLoggedIn,t.userId,t.loginUrl,t.logoutUrl])}function Bee(t,e){return function(){return t.apply(e,arguments)}}const{toString:Hde}=Object.prototype,{getPrototypeOf:KR}=Object,{iterator:v0,toStringTag:zee}=Symbol,b0=(t=>e=>{const r=Hde.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ms=t=>(t=t.toLowerCase(),e=>b0(e)===t),x0=t=>e=>typeof e===t,{isArray:eh}=Array,Td=x0("undefined");function Gp(t){return t!==null&&!Td(t)&&t.constructor!==null&&!Td(t.constructor)&&Qn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Vee=ms("ArrayBuffer");function Wde(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Vee(t.buffer),e}const Kde=x0("string"),Qn=x0("function"),Uee=x0("number"),Yp=t=>t!==null&&typeof t=="object",Gde=t=>t===!0||t===!1,Xg=t=>{if(b0(t)!=="object")return!1;const e=KR(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(zee in t)&&!(v0 in t)},Yde=t=>{if(!Yp(t)||Gp(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Qde=ms("Date"),Xde=ms("File"),Jde=ms("Blob"),Zde=ms("FileList"),ehe=t=>Yp(t)&&Qn(t.pipe),the=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Qn(t.append)&&((e=b0(t))==="formdata"||e==="object"&&Qn(t.toString)&&t.toString()==="[object FormData]"))},rhe=ms("URLSearchParams"),[nhe,ihe,she,ohe]=["ReadableStream","Request","Response","Headers"].map(ms),ahe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Qp(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),eh(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{if(Gp(t))return;const s=r?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(n=0;n<o;n++)a=s[n],e.call(null,t[a],a,t)}}function Hee(t,e){if(Gp(t))return null;e=e.toLowerCase();const r=Object.keys(t);let n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}const Il=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Wee=t=>!Td(t)&&t!==Il;function $P(){const{caseless:t,skipUndefined:e}=Wee(this)&&this||{},r={},n=(i,s)=>{const o=t&&Hee(r,s)||s;Xg(r[o])&&Xg(i)?r[o]=$P(r[o],i):Xg(i)?r[o]=$P({},i):eh(i)?r[o]=i.slice():(!e||!Td(i))&&(r[o]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Qp(arguments[i],n);return r}const lhe=(t,e,r,{allOwnKeys:n}={})=>(Qp(e,(i,s)=>{r&&Qn(i)?t[s]=Bee(i,r):t[s]=i},{allOwnKeys:n}),t),che=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),uhe=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},dhe=(t,e,r,n)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!n||n(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=r!==!1&&KR(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},hhe=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},fhe=t=>{if(!t)return null;if(eh(t))return t;let e=t.length;if(!Uee(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},phe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&KR(Uint8Array)),mhe=(t,e)=>{const n=(t&&t[v0]).call(t);let i;for(;(i=n.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},ghe=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},yhe=ms("HTMLFormElement"),vhe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),JA=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),bhe=ms("RegExp"),Kee=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};Qp(r,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(n[s]=o||i)}),Object.defineProperties(t,n)},xhe=t=>{Kee(t,(e,r)=>{if(Qn(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(Qn(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},whe=(t,e)=>{const r={},n=i=>{i.forEach(s=>{r[s]=!0})};return eh(t)?n(t):n(String(t).split(e)),r},She=()=>{},_he=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Ehe(t){return!!(t&&Qn(t.append)&&t[zee]==="FormData"&&t[v0])}const Nhe=t=>{const e=new Array(10),r=(n,i)=>{if(Yp(n)){if(e.indexOf(n)>=0)return;if(Gp(n))return n;if(!("toJSON"in n)){e[i]=n;const s=eh(n)?[]:{};return Qp(n,(o,a)=>{const l=r(o,i+1);!Td(l)&&(s[a]=l)}),e[i]=void 0,s}}return n};return r(t,0)},Che=ms("AsyncFunction"),khe=t=>t&&(Yp(t)||Qn(t))&&Qn(t.then)&&Qn(t.catch),Gee=((t,e)=>t?setImmediate:e?((r,n)=>(Il.addEventListener("message",({source:i,data:s})=>{i===Il&&s===r&&n.length&&n.shift()()},!1),i=>{n.push(i),Il.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Qn(Il.postMessage)),The=typeof queueMicrotask<"u"?queueMicrotask.bind(Il):typeof process<"u"&&process.nextTick||Gee,Ohe=t=>t!=null&&Qn(t[v0]),z={isArray:eh,isArrayBuffer:Vee,isBuffer:Gp,isFormData:the,isArrayBufferView:Wde,isString:Kde,isNumber:Uee,isBoolean:Gde,isObject:Yp,isPlainObject:Xg,isEmptyObject:Yde,isReadableStream:nhe,isRequest:ihe,isResponse:she,isHeaders:ohe,isUndefined:Td,isDate:Qde,isFile:Xde,isBlob:Jde,isRegExp:bhe,isFunction:Qn,isStream:ehe,isURLSearchParams:rhe,isTypedArray:phe,isFileList:Zde,forEach:Qp,merge:$P,extend:lhe,trim:ahe,stripBOM:che,inherits:uhe,toFlatObject:dhe,kindOf:b0,kindOfTest:ms,endsWith:hhe,toArray:fhe,forEachEntry:mhe,matchAll:ghe,isHTMLForm:yhe,hasOwnProperty:JA,hasOwnProp:JA,reduceDescriptors:Kee,freezeMethods:xhe,toObjectSet:whe,toCamelCase:vhe,noop:She,toFiniteNumber:_he,findKey:Hee,global:Il,isContextDefined:Wee,isSpecCompliantForm:Ehe,toJSONObject:Nhe,isAsyncFn:Che,isThenable:khe,setImmediate:Gee,asap:The,isIterable:Ohe};function Ue(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}z.inherits(Ue,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:z.toJSONObject(this.config),code:this.code,status:this.status}}});const Yee=Ue.prototype,Qee={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Qee[t]={value:t}});Object.defineProperties(Ue,Qee);Object.defineProperty(Yee,"isAxiosError",{value:!0});Ue.from=(t,e,r,n,i,s)=>{const o=Object.create(Yee);z.toFlatObject(t,o,function(d){return d!==Error.prototype},c=>c!=="isAxiosError");const a=t&&t.message?t.message:"Error",l=e==null&&t?t.code:e;return Ue.call(o,a,l,r,n,i),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",s&&Object.assign(o,s),o};const jhe=null;function DP(t){return z.isPlainObject(t)||z.isArray(t)}function Xee(t){return z.endsWith(t,"[]")?t.slice(0,-2):t}function ZA(t,e,r){return t?t.concat(e).map(function(i,s){return i=Xee(i),!r&&s?"["+i+"]":i}).join(r?".":""):e}function Phe(t){return z.isArray(t)&&!t.some(DP)}const Ihe=z.toFlatObject(z,{},null,function(e){return/^is[A-Z]/.test(e)});function w0(t,e,r){if(!z.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=z.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,b){return!z.isUndefined(b[g])});const n=r.metaTokens,i=r.visitor||d,s=r.dots,o=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&z.isSpecCompliantForm(e);if(!z.isFunction(i))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(z.isDate(m))return m.toISOString();if(z.isBoolean(m))return m.toString();if(!l&&z.isBlob(m))throw new Ue("Blob is not supported. Use a Buffer instead.");return z.isArrayBuffer(m)||z.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,g,b){let y=m;if(m&&!b&&typeof m=="object"){if(z.endsWith(g,"{}"))g=n?g:g.slice(0,-2),m=JSON.stringify(m);else if(z.isArray(m)&&Phe(m)||(z.isFileList(m)||z.endsWith(g,"[]"))&&(y=z.toArray(m)))return g=Xee(g),y.forEach(function(w,x){!(z.isUndefined(w)||w===null)&&e.append(o===!0?ZA([g],x,s):o===null?g:g+"[]",c(w))}),!1}return DP(m)?!0:(e.append(ZA(b,g,s),c(m)),!1)}const h=[],f=Object.assign(Ihe,{defaultVisitor:d,convertValue:c,isVisitable:DP});function p(m,g){if(!z.isUndefined(m)){if(h.indexOf(m)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(m),z.forEach(m,function(y,v){(!(z.isUndefined(y)||y===null)&&i.call(e,y,z.isString(v)?v.trim():v,g,f))===!0&&p(y,g?g.concat(v):[v])}),h.pop()}}if(!z.isObject(t))throw new TypeError("data must be an object");return p(t),e}function eF(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function GR(t,e){this._pairs=[],t&&w0(t,this,e)}const Jee=GR.prototype;Jee.append=function(e,r){this._pairs.push([e,r])};Jee.toString=function(e){const r=e?function(n){return e.call(this,n,eF)}:eF;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function Rhe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Zee(t,e,r){if(!e)return t;const n=r&&r.encode||Rhe;z.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let s;if(i?s=i(e,r):s=z.isURLSearchParams(e)?e.toString():new GR(e,r).toString(n),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class tF{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){z.forEach(this.handlers,function(n){n!==null&&e(n)})}}const ete={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Mhe=typeof URLSearchParams<"u"?URLSearchParams:GR,$he=typeof FormData<"u"?FormData:null,Dhe=typeof Blob<"u"?Blob:null,Ahe={isBrowser:!0,classes:{URLSearchParams:Mhe,FormData:$he,Blob:Dhe},protocols:["http","https","file","blob","url","data"]},YR=typeof window<"u"&&typeof document<"u",AP=typeof navigator=="object"&&navigator||void 0,Fhe=YR&&(!AP||["ReactNative","NativeScript","NS"].indexOf(AP.product)<0),qhe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Lhe=YR&&window.location.href||"http://localhost",Bhe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:YR,hasStandardBrowserEnv:Fhe,hasStandardBrowserWebWorkerEnv:qhe,navigator:AP,origin:Lhe},Symbol.toStringTag,{value:"Module"})),pn={...Bhe,...Ahe};function zhe(t,e){return w0(t,new pn.classes.URLSearchParams,{visitor:function(r,n,i,s){return pn.isNode&&z.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function Vhe(t){return z.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Uhe(t){const e={},r=Object.keys(t);let n;const i=r.length;let s;for(n=0;n<i;n++)s=r[n],e[s]=t[s];return e}function tte(t){function e(r,n,i,s){let o=r[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=r.length;return o=!o&&z.isArray(i)?i.length:o,l?(z.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!a):((!i[o]||!z.isObject(i[o]))&&(i[o]=[]),e(r,n,i[o],s)&&z.isArray(i[o])&&(i[o]=Uhe(i[o])),!a)}if(z.isFormData(t)&&z.isFunction(t.entries)){const r={};return z.forEachEntry(t,(n,i)=>{e(Vhe(n),i,r,0)}),r}return null}function Hhe(t,e,r){if(z.isString(t))try{return(e||JSON.parse)(t),z.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const Xp={transitional:ete,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,s=z.isObject(e);if(s&&z.isHTMLForm(e)&&(e=new FormData(e)),z.isFormData(e))return i?JSON.stringify(tte(e)):e;if(z.isArrayBuffer(e)||z.isBuffer(e)||z.isStream(e)||z.isFile(e)||z.isBlob(e)||z.isReadableStream(e))return e;if(z.isArrayBufferView(e))return e.buffer;if(z.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return zhe(e,this.formSerializer).toString();if((a=z.isFileList(e))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return w0(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(r.setContentType("application/json",!1),Hhe(e)):e}],transformResponse:[function(e){const r=this.transitional||Xp.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(z.isResponse(e)||z.isReadableStream(e))return e;if(e&&z.isString(e)&&(n&&!this.responseType||i)){const o=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?Ue.from(a,Ue.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pn.classes.FormData,Blob:pn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};z.forEach(["delete","get","head","post","put","patch"],t=>{Xp.headers[t]={}});const Whe=z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Khe=t=>{const e={};let r,n,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),r=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!r||e[r]&&Whe[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},rF=Symbol("internals");function Hh(t){return t&&String(t).trim().toLowerCase()}function Jg(t){return t===!1||t==null?t:z.isArray(t)?t.map(Jg):String(t)}function Ghe(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const Yhe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function s1(t,e,r,n,i){if(z.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!z.isString(e)){if(z.isString(n))return e.indexOf(n)!==-1;if(z.isRegExp(n))return n.test(e)}}function Qhe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function Xhe(t,e){const r=z.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,s,o){return this[n].call(this,e,i,s,o)},configurable:!0})})}let Xn=class{constructor(e){e&&this.set(e)}set(e,r,n){const i=this;function s(a,l,c){const d=Hh(l);if(!d)throw new Error("header name must be a non-empty string");const h=z.findKey(i,d);(!h||i[h]===void 0||c===!0||c===void 0&&i[h]!==!1)&&(i[h||l]=Jg(a))}const o=(a,l)=>z.forEach(a,(c,d)=>s(c,d,l));if(z.isPlainObject(e)||e instanceof this.constructor)o(e,r);else if(z.isString(e)&&(e=e.trim())&&!Yhe(e))o(Khe(e),r);else if(z.isObject(e)&&z.isIterable(e)){let a={},l,c;for(const d of e){if(!z.isArray(d))throw TypeError("Object iterator must return a key-value pair");a[c=d[0]]=(l=a[c])?z.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}o(a,r)}else e!=null&&s(r,e,n);return this}get(e,r){if(e=Hh(e),e){const n=z.findKey(this,e);if(n){const i=this[n];if(!r)return i;if(r===!0)return Ghe(i);if(z.isFunction(r))return r.call(this,i,n);if(z.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=Hh(e),e){const n=z.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||s1(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let i=!1;function s(o){if(o=Hh(o),o){const a=z.findKey(n,o);a&&(!r||s1(n,n[a],a,r))&&(delete n[a],i=!0)}}return z.isArray(e)?e.forEach(s):s(e),i}clear(e){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const s=r[n];(!e||s1(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const r=this,n={};return z.forEach(this,(i,s)=>{const o=z.findKey(n,s);if(o){r[o]=Jg(i),delete r[s];return}const a=e?Qhe(s):String(s).trim();a!==s&&delete r[s],r[a]=Jg(i),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return z.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&z.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[rF]=this[rF]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Hh(o);n[a]||(Xhe(i,o),n[a]=!0)}return z.isArray(e)?e.forEach(s):s(e),this}};Xn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);z.reduceDescriptors(Xn.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});z.freezeMethods(Xn);function o1(t,e){const r=this||Xp,n=e||r,i=Xn.from(n.headers);let s=n.data;return z.forEach(t,function(a){s=a.call(r,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function rte(t){return!!(t&&t.__CANCEL__)}function th(t,e,r){Ue.call(this,t??"canceled",Ue.ERR_CANCELED,e,r),this.name="CanceledError"}z.inherits(th,Ue,{__CANCEL__:!0});function nte(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new Ue("Request failed with status code "+r.status,[Ue.ERR_BAD_REQUEST,Ue.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Jhe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Zhe(t,e){t=t||10;const r=new Array(t),n=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=n[s];o||(o=c),r[i]=l,n[i]=c;let h=s,f=0;for(;h!==i;)f+=r[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const p=d&&c-d;return p?Math.round(f*1e3/p):void 0}}function efe(t,e){let r=0,n=1e3/e,i,s;const o=(c,d=Date.now())=>{r=d,i=null,s&&(clearTimeout(s),s=null),t(...c)};return[(...c)=>{const d=Date.now(),h=d-r;h>=n?o(c,d):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},n-h)))},()=>i&&o(i)]}const Fy=(t,e,r=3)=>{let n=0;const i=Zhe(50,250);return efe(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-n,c=i(l),d=o<=a;n=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&d?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},r)},nF=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},iF=t=>(...e)=>z.asap(()=>t(...e)),tfe=pn.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,pn.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(pn.origin),pn.navigator&&/(msie|trident)/i.test(pn.navigator.userAgent)):()=>!0,rfe=pn.hasStandardBrowserEnv?{write(t,e,r,n,i,s,o){if(typeof document>"u")return;const a=[`${t}=${encodeURIComponent(e)}`];z.isNumber(r)&&a.push(`expires=${new Date(r).toUTCString()}`),z.isString(n)&&a.push(`path=${n}`),z.isString(i)&&a.push(`domain=${i}`),s===!0&&a.push("secure"),z.isString(o)&&a.push(`SameSite=${o}`),document.cookie=a.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function nfe(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function ife(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function ite(t,e,r){let n=!nfe(e);return t&&(n||r==!1)?ife(t,e):e}const sF=t=>t instanceof Xn?{...t}:t;function bc(t,e){e=e||{};const r={};function n(c,d,h,f){return z.isPlainObject(c)&&z.isPlainObject(d)?z.merge.call({caseless:f},c,d):z.isPlainObject(d)?z.merge({},d):z.isArray(d)?d.slice():d}function i(c,d,h,f){if(z.isUndefined(d)){if(!z.isUndefined(c))return n(void 0,c,h,f)}else return n(c,d,h,f)}function s(c,d){if(!z.isUndefined(d))return n(void 0,d)}function o(c,d){if(z.isUndefined(d)){if(!z.isUndefined(c))return n(void 0,c)}else return n(void 0,d)}function a(c,d,h){if(h in e)return n(c,d);if(h in t)return n(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d,h)=>i(sF(c),sF(d),h,!0)};return z.forEach(Object.keys({...t,...e}),function(d){const h=l[d]||i,f=h(t[d],e[d],d);z.isUndefined(f)&&h!==a||(r[d]=f)}),r}const ste=t=>{const e=bc({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;if(e.headers=o=Xn.from(o),e.url=Zee(ite(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),z.isFormData(r)){if(pn.hasStandardBrowserEnv||pn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(z.isFunction(r.getHeaders)){const l=r.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([d,h])=>{c.includes(d.toLowerCase())&&o.set(d,h)})}}if(pn.hasStandardBrowserEnv&&(n&&z.isFunction(n)&&(n=n(e)),n||n!==!1&&tfe(e.url))){const l=i&&s&&rfe.read(s);l&&o.set(i,l)}return e},sfe=typeof XMLHttpRequest<"u",ofe=sfe&&function(t){return new Promise(function(r,n){const i=ste(t);let s=i.data;const o=Xn.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,d,h,f,p,m;function g(){p&&p(),m&&m(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let b=new XMLHttpRequest;b.open(i.method.toUpperCase(),i.url,!0),b.timeout=i.timeout;function y(){if(!b)return;const w=Xn.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),S={data:!a||a==="text"||a==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:w,config:t,request:b};nte(function(N){r(N),g()},function(N){n(N),g()},S),b=null}"onloadend"in b?b.onloadend=y:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(y)},b.onabort=function(){b&&(n(new Ue("Request aborted",Ue.ECONNABORTED,t,b)),b=null)},b.onerror=function(x){const S=x&&x.message?x.message:"Network Error",_=new Ue(S,Ue.ERR_NETWORK,t,b);_.event=x||null,n(_),b=null},b.ontimeout=function(){let x=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const S=i.transitional||ete;i.timeoutErrorMessage&&(x=i.timeoutErrorMessage),n(new Ue(x,S.clarifyTimeoutError?Ue.ETIMEDOUT:Ue.ECONNABORTED,t,b)),b=null},s===void 0&&o.setContentType(null),"setRequestHeader"in b&&z.forEach(o.toJSON(),function(x,S){b.setRequestHeader(S,x)}),z.isUndefined(i.withCredentials)||(b.withCredentials=!!i.withCredentials),a&&a!=="json"&&(b.responseType=i.responseType),c&&([f,m]=Fy(c,!0),b.addEventListener("progress",f)),l&&b.upload&&([h,p]=Fy(l),b.upload.addEventListener("progress",h),b.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(d=w=>{b&&(n(!w||w.type?new th(null,t,b):w),b.abort(),b=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const v=Jhe(i.url);if(v&&pn.protocols.indexOf(v)===-1){n(new Ue("Unsupported protocol "+v+":",Ue.ERR_BAD_REQUEST,t));return}b.send(s||null)})},afe=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,i;const s=function(c){if(!i){i=!0,a();const d=c instanceof Error?c:this.reason;n.abort(d instanceof Ue?d:new th(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,s(new Ue(`timeout ${e} of ms exceeded`,Ue.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:l}=n;return l.unsubscribe=()=>z.asap(a),l}},lfe=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,i;for(;n<r;)i=n+e,yield t.slice(n,i),n=i},cfe=async function*(t,e){for await(const r of ufe(t))yield*lfe(r,e)},ufe=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},oF=(t,e,r,n)=>{const i=cfe(t,e);let s=0,o,a=l=>{o||(o=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:d}=await i.next();if(c){a(),l.close();return}let h=d.byteLength;if(r){let f=s+=h;r(f)}l.enqueue(new Uint8Array(d))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},aF=64*1024,{isFunction:fg}=z,dfe=(({Request:t,Response:e})=>({Request:t,Response:e}))(z.global),{ReadableStream:lF,TextEncoder:cF}=z.global,uF=(t,...e)=>{try{return!!t(...e)}catch{return!1}},hfe=t=>{t=z.merge.call({skipUndefined:!0},dfe,t);const{fetch:e,Request:r,Response:n}=t,i=e?fg(e):typeof fetch=="function",s=fg(r),o=fg(n);if(!i)return!1;const a=i&&fg(lF),l=i&&(typeof cF=="function"?(m=>g=>m.encode(g))(new cF):async m=>new Uint8Array(await new r(m).arrayBuffer())),c=s&&a&&uF(()=>{let m=!1;const g=new r(pn.origin,{body:new lF,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!g}),d=o&&a&&uF(()=>z.isReadableStream(new n("").body)),h={stream:d&&(m=>m.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!h[m]&&(h[m]=(g,b)=>{let y=g&&g[m];if(y)return y.call(g);throw new Ue(`Response type '${m}' is not supported`,Ue.ERR_NOT_SUPPORT,b)})});const f=async m=>{if(m==null)return 0;if(z.isBlob(m))return m.size;if(z.isSpecCompliantForm(m))return(await new r(pn.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(z.isArrayBufferView(m)||z.isArrayBuffer(m))return m.byteLength;if(z.isURLSearchParams(m)&&(m=m+""),z.isString(m))return(await l(m)).byteLength},p=async(m,g)=>{const b=z.toFiniteNumber(m.getContentLength());return b??f(g)};return async m=>{let{url:g,method:b,data:y,signal:v,cancelToken:w,timeout:x,onDownloadProgress:S,onUploadProgress:_,responseType:N,headers:E,withCredentials:k="same-origin",fetchOptions:C}=ste(m),O=e||fetch;N=N?(N+"").toLowerCase():"text";let P=afe([v,w&&w.toAbortSignal()],x),j=null;const M=P&&P.unsubscribe&&(()=>{P.unsubscribe()});let A;try{if(_&&c&&b!=="get"&&b!=="head"&&(A=await p(E,y))!==0){let U=new r(g,{method:"POST",body:y,duplex:"half"}),K;if(z.isFormData(y)&&(K=U.headers.get("content-type"))&&E.setContentType(K),U.body){const[fe,we]=nF(A,Fy(iF(_)));y=oF(U.body,aF,fe,we)}}z.isString(k)||(k=k?"include":"omit");const I=s&&"credentials"in r.prototype,L={...C,signal:P,method:b.toUpperCase(),headers:E.normalize().toJSON(),body:y,duplex:"half",credentials:I?k:void 0};j=s&&new r(g,L);let F=await(s?O(j,C):O(g,L));const W=d&&(N==="stream"||N==="response");if(d&&(S||W&&M)){const U={};["status","statusText","headers"].forEach(Fe=>{U[Fe]=F[Fe]});const K=z.toFiniteNumber(F.headers.get("content-length")),[fe,we]=S&&nF(K,Fy(iF(S),!0))||[];F=new n(oF(F.body,aF,fe,()=>{we&&we(),M&&M()}),U)}N=N||"text";let B=await h[z.findKey(h,N)||"text"](F,m);return!W&&M&&M(),await new Promise((U,K)=>{nte(U,K,{data:B,headers:Xn.from(F.headers),status:F.status,statusText:F.statusText,config:m,request:j})})}catch(I){throw M&&M(),I&&I.name==="TypeError"&&/Load failed|fetch/i.test(I.message)?Object.assign(new Ue("Network Error",Ue.ERR_NETWORK,m,j),{cause:I.cause||I}):Ue.from(I,I&&I.code,m,j)}}},ffe=new Map,ote=t=>{let e=t&&t.env||{};const{fetch:r,Request:n,Response:i}=e,s=[n,i,r];let o=s.length,a=o,l,c,d=ffe;for(;a--;)l=s[a],c=d.get(l),c===void 0&&d.set(l,c=a?new Map:hfe(e)),d=c;return c};ote();const QR={http:jhe,xhr:ofe,fetch:{get:ote}};z.forEach(QR,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const dF=t=>`- ${t}`,pfe=t=>z.isFunction(t)||t===null||t===!1;function mfe(t,e){t=z.isArray(t)?t:[t];const{length:r}=t;let n,i;const s={};for(let o=0;o<r;o++){n=t[o];let a;if(i=n,!pfe(n)&&(i=QR[(a=String(n)).toLowerCase()],i===void 0))throw new Ue(`Unknown adapter '${a}'`);if(i&&(z.isFunction(i)||(i=i.get(e))))break;s[a||"#"+o]=i}if(!i){const o=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=r?o.length>1?`since :
`+o.map(dF).join(`
`):" "+dF(o[0]):"as no adapter specified";throw new Ue("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i}const ate={getAdapter:mfe,adapters:QR};function a1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new th(null,t)}function hF(t){return a1(t),t.headers=Xn.from(t.headers),t.data=o1.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),ate.getAdapter(t.adapter||Xp.adapter,t)(t).then(function(n){return a1(t),n.data=o1.call(t,t.transformResponse,n),n.headers=Xn.from(n.headers),n},function(n){return rte(n)||(a1(t),n&&n.response&&(n.response.data=o1.call(t,t.transformResponse,n.response),n.response.headers=Xn.from(n.response.headers))),Promise.reject(n)})}const lte="1.13.2",S0={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{S0[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const fF={};S0.transitional=function(e,r,n){function i(s,o){return"[Axios v"+lte+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return(s,o,a)=>{if(e===!1)throw new Ue(i(o," has been removed"+(r?" in "+r:"")),Ue.ERR_DEPRECATED);return r&&!fF[o]&&(fF[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};S0.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function gfe(t,e,r){if(typeof t!="object")throw new Ue("options must be an object",Ue.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const s=n[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new Ue("option "+s+" must be "+l,Ue.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ue("Unknown option "+s,Ue.ERR_BAD_OPTION)}}const Zg={assertOptions:gfe,validators:S0},xs=Zg.validators;let Zl=class{constructor(e){this.defaults=e||{},this.interceptors={request:new tF,response:new tF}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=bc(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:s}=r;n!==void 0&&Zg.assertOptions(n,{silentJSONParsing:xs.transitional(xs.boolean),forcedJSONParsing:xs.transitional(xs.boolean),clarifyTimeoutError:xs.transitional(xs.boolean)},!1),i!=null&&(z.isFunction(i)?r.paramsSerializer={serialize:i}:Zg.assertOptions(i,{encode:xs.function,serialize:xs.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Zg.assertOptions(r,{baseUrl:xs.spelling("baseURL"),withXsrfToken:xs.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=s&&z.merge(s.common,s[r.method]);s&&z.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),r.headers=Xn.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let d,h=0,f;if(!l){const m=[hF.bind(this),void 0];for(m.unshift(...a),m.push(...c),f=m.length,d=Promise.resolve(r);h<f;)d=d.then(m[h++],m[h++]);return d}f=a.length;let p=r;for(;h<f;){const m=a[h++],g=a[h++];try{p=m(p)}catch(b){g.call(this,b);break}}try{d=hF.call(this,p)}catch(m){return Promise.reject(m)}for(h=0,f=c.length;h<f;)d=d.then(c[h++],c[h++]);return d}getUri(e){e=bc(this.defaults,e);const r=ite(e.baseURL,e.url,e.allowAbsoluteUrls);return Zee(r,e.params,e.paramsSerializer)}};z.forEach(["delete","get","head","options"],function(e){Zl.prototype[e]=function(r,n){return this.request(bc(n||{},{method:e,url:r,data:(n||{}).data}))}});z.forEach(["post","put","patch"],function(e){function r(n){return function(s,o,a){return this.request(bc(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Zl.prototype[e]=r(),Zl.prototype[e+"Form"]=r(!0)});let yfe=class cte{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{n.subscribe(a),s=a}).then(i);return o.cancel=function(){n.unsubscribe(s)},o},e(function(s,o,a){n.reason||(n.reason=new th(s,o,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new cte(function(i){e=i}),cancel:e}}};function vfe(t){return function(r){return t.apply(null,r)}}function bfe(t){return z.isObject(t)&&t.isAxiosError===!0}const FP={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(FP).forEach(([t,e])=>{FP[e]=t});function ute(t){const e=new Zl(t),r=Bee(Zl.prototype.request,e);return z.extend(r,Zl.prototype,e,{allOwnKeys:!0}),z.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return ute(bc(t,i))},r}const pr=ute(Xp);pr.Axios=Zl;pr.CanceledError=th;pr.CancelToken=yfe;pr.isCancel=rte;pr.VERSION=lte;pr.toFormData=w0;pr.AxiosError=Ue;pr.Cancel=pr.CanceledError;pr.all=function(e){return Promise.all(e)};pr.spread=vfe;pr.isAxiosError=bfe;pr.mergeConfig=bc;pr.AxiosHeaders=Xn;pr.formToJSON=t=>tte(z.isHTMLForm(t)?new FormData(t):t);pr.getAdapter=ate.getAdapter;pr.HttpStatusCode=FP;pr.default=pr;const{Axios:$Fe,AxiosError:DFe,CanceledError:AFe,isCancel:FFe,CancelToken:qFe,VERSION:LFe,all:BFe,Cancel:zFe,isAxiosError:VFe,spread:UFe,toFormData:HFe,AxiosHeaders:WFe,HttpStatusCode:KFe,formToJSON:GFe,getAdapter:YFe,mergeConfig:QFe}=pr,qP=window.prmConfig||{},le=pr.create({baseURL:qP.apiUrl||"/wp-json",headers:{"Content-Type":"application/json","X-WP-Nonce":qP.nonce||""}});le.interceptors.request.use(t=>{var e;return(e=window.prmConfig)!=null&&e.nonce&&(t.headers["X-WP-Nonce"]=window.prmConfig.nonce),t});le.interceptors.response.use(t=>t,t=>{var e,r;return((e=t.response)==null?void 0:e.status)===401&&(window.location.href=qP.loginUrl||"/wp-login.php"),((r=t.response)==null?void 0:r.status)===403&&console.error("Access denied:",t.response.data),Promise.reject(t)});const We={getPeople:t=>le.get("/wp/v2/people",{params:t}),getPerson:(t,e={})=>le.get(`/wp/v2/people/${t}`,{params:e}),createPerson:t=>le.post("/wp/v2/people",t),updatePerson:(t,e)=>le.put(`/wp/v2/people/${t}`,e),deletePerson:(t,e={})=>le.delete(`/wp/v2/people/${t}`,{params:e}),getCompanies:t=>le.get("/wp/v2/companies",{params:t}),getCompany:(t,e={})=>le.get(`/wp/v2/companies/${t}`,{params:e}),createCompany:t=>le.post("/wp/v2/companies",t),updateCompany:(t,e)=>le.put(`/wp/v2/companies/${t}`,e),deleteCompany:(t,e={})=>le.delete(`/wp/v2/companies/${t}`,{params:e}),getDates:t=>le.get("/wp/v2/important-dates",{params:t}),getDate:t=>le.get(`/wp/v2/important-dates/${t}`),createDate:t=>le.post("/wp/v2/important-dates",t),updateDate:(t,e)=>le.put(`/wp/v2/important-dates/${t}`,e),deleteDate:t=>le.delete(`/wp/v2/important-dates/${t}`),getPersonLabels:()=>le.get("/wp/v2/person_label"),getCompanyLabels:()=>le.get("/wp/v2/company_label"),getRelationshipTypes:()=>le.get("/wp/v2/relationship_type",{params:{per_page:100,_fields:"id,name,slug,acf"}}),createRelationshipType:t=>le.post("/wp/v2/relationship_type",t),updateRelationshipType:(t,e)=>le.post(`/wp/v2/relationship_type/${t}`,e),deleteRelationshipType:t=>le.delete(`/wp/v2/relationship_type/${t}?force=true`),restoreRelationshipTypeDefaults:()=>le.post("/prm/v1/relationship-types/restore-defaults"),getDateTypes:()=>le.get("/wp/v2/date_type",{params:{per_page:100}}),uploadMedia:t=>{const e=new FormData;return e.append("file",t),le.post("/wp/v2/media",e,{headers:{"Content-Type":"multipart/form-data"}})}},Le={getDashboard:()=>le.get("/prm/v1/dashboard"),sideloadGravatar:(t,e)=>le.post(`/prm/v1/people/${t}/gravatar`,{email:e}),getCurrentUser:()=>le.get("/prm/v1/user/me"),getUsers:()=>le.get("/prm/v1/users"),approveUser:t=>le.post(`/prm/v1/users/${t}/approve`),denyUser:t=>le.post(`/prm/v1/users/${t}/deny`),deleteUser:t=>le.delete(`/prm/v1/users/${t}`),search:t=>le.get("/prm/v1/search",{params:{q:t}}),getReminders:(t=30)=>le.get("/prm/v1/reminders",{params:{days_ahead:t}}),triggerReminders:()=>le.post("/prm/v1/reminders/trigger"),rescheduleCronJobs:()=>le.post("/prm/v1/reminders/reschedule-cron"),getNotificationChannels:()=>le.get("/prm/v1/user/notification-channels"),updateNotificationChannels:t=>le.post("/prm/v1/user/notification-channels",{channels:t}),updateSlackWebhook:t=>le.post("/prm/v1/user/slack-webhook",{webhook:t}),updateNotificationTime:t=>le.post("/prm/v1/user/notification-time",{time:t}),getSlackStatus:()=>le.get("/prm/v1/user/slack-status"),disconnectSlack:()=>le.post("/prm/v1/slack/disconnect"),getSlackChannels:()=>le.get("/prm/v1/slack/channels"),getSlackTargets:()=>le.get("/prm/v1/slack/targets"),updateSlackTargets:t=>le.post("/prm/v1/slack/targets",{targets:t}),getPersonDates:t=>le.get(`/prm/v1/people/${t}/dates`),getPersonTimeline:t=>le.get(`/prm/v1/people/${t}/timeline`),getPersonNotes:t=>le.get(`/prm/v1/people/${t}/notes`),createNote:(t,e)=>le.post(`/prm/v1/people/${t}/notes`,{content:e}),updateNote:(t,e)=>le.put(`/prm/v1/notes/${t}`,{content:e}),deleteNote:t=>le.delete(`/prm/v1/notes/${t}`),getPersonActivities:t=>le.get(`/prm/v1/people/${t}/activities`),createActivity:(t,e)=>le.post(`/prm/v1/people/${t}/activities`,e),updateActivity:(t,e)=>le.put(`/prm/v1/activities/${t}`,e),deleteActivity:t=>le.delete(`/prm/v1/activities/${t}`),getAllTodos:(t=!1)=>le.get("/prm/v1/todos",{params:{completed:t}}),getInvestments:t=>le.get(`/prm/v1/investments/${t}`),getPersonTodos:t=>le.get(`/prm/v1/people/${t}/todos`),createTodo:(t,e)=>le.post(`/prm/v1/people/${t}/todos`,e),updateTodo:(t,e)=>le.put(`/prm/v1/todos/${t}`,e),deleteTodo:t=>le.delete(`/prm/v1/todos/${t}`),getCompanyPeople:t=>le.get(`/prm/v1/companies/${t}/people`),setCompanyLogo:(t,e)=>le.post(`/prm/v1/companies/${t}/logo`,{media_id:e}),uploadPersonPhoto:(t,e)=>{const r=new FormData;return r.append("file",e),le.post(`/prm/v1/people/${t}/photo`,r,{headers:{"Content-Type":"multipart/form-data"}})},uploadCompanyLogo:(t,e)=>{const r=new FormData;return r.append("file",e),le.post(`/prm/v1/companies/${t}/logo/upload`,r,{headers:{"Content-Type":"multipart/form-data"}})},getCardDAVUrls:()=>le.get("/prm/v1/carddav/urls"),getAppPasswords:t=>le.get(`/wp/v2/users/${t}/application-passwords`),createAppPassword:(t,e)=>le.post(`/wp/v2/users/${t}/application-passwords`,{name:e}),deleteAppPassword:(t,e)=>le.delete(`/wp/v2/users/${t}/application-passwords/${e}`)};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xfe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wfe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ue=(t,e)=>{const r=T.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...c},d)=>T.createElement("svg",{ref:d,...xfe,width:i,height:i,stroke:n,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${wfe(t)}`,a].join(" "),...c},[...e.map(([h,f])=>T.createElement(h,f)),...Array.isArray(l)?l:[l]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=ue("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sfe=ue("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _fe=ue("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=ue("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=ue("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Efe=ue("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nfe=ue("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cfe=ue("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=ue("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dte=ue("Cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h0.01",key:"hsw7lv"}],["path",{d:"M12 4h0.01",key:"1e3d8f"}],["path",{d:"M17 4h0.01",key:"p7cxgy"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=ue("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ef=ue("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=ue("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=ue("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=ue("CheckSquare2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=ue("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=ue("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BP=ue("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kfe=ue("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hte=ue("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tfe=ue("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fte=ue("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=ue("FileCode",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m10 13-2 2 2 2",key:"17smn8"}],["path",{d:"m14 17 2-2-2-2",key:"14mezr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XR=ue("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=ue("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VP=ue("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ofe=ue("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=ue("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=ue("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jfe=ue("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pfe=ue("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pte=ue("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ife=ue("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rfe=ue("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=ue("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mfe=ue("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $fe=ue("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=ue("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dfe=ue("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZR=ue("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Afe=ue("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ffe=ue("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mte=ue("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qfe=ue("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=ue("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eM=ue("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lfe=ue("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bfe=ue("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gte=ue("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=ue("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yte=ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zfe=ue("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vte=ue("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vfe=ue("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ufe=ue("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bte=ue("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xte=ue("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=ue("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=ue("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wte=ue("StickyNote",[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M15 3v6h6",key:"edgan2"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=ue("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hfe=ue("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wfe=ue("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=ue("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kfe=ue("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=ue("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=ue("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ste=ue("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=ue("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gfe=ue("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yfe=ue("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),_c="Caelis";function yi(t){T.useEffect(()=>{var e;if(t){const r=((e=window.prmConfig)==null?void 0:e.siteName)||_c;document.title=`${t} - ${r}`}},[t])}function Qfe(t){const e=t.match(/\/(?:people|companies|dates)\/(\d+)/);return e?e[1]:null}function _te(t=null){const e=qo();T.useEffect(()=>{var i;let r=t;if(!r){const s=e.pathname,o=Qfe(s);s==="/"?r="Dashboard":s==="/login"?r="Login":s.startsWith("/people")?s==="/people"||s==="/people/"?r="People":s==="/people/new"?r="New person":s.endsWith("/edit")?r="Edit person":o?r="Person":r="People":s.startsWith("/companies")?s==="/companies"||s==="/companies/"?r="Organizations":s==="/companies/new"?r="New organization":s.endsWith("/edit")?r="Edit organization":o?r="Organization":r="Organizations":s.startsWith("/dates")?s==="/dates"||s==="/dates/"?r="Events":s==="/dates/new"?r="New date":s.endsWith("/edit")?r="Edit date":r="Events":s.startsWith("/settings")?r="Settings":r=_c}const n=((i=window.prmConfig)==null?void 0:i.siteName)||_c;document.title=`${r} - ${n}`},[e.pathname,t])}function Xfe(){return dt({queryKey:["dashboard"],queryFn:async()=>(await Le.getDashboard()).data})}function Jfe(t=30){return dt({queryKey:["reminders",t],queryFn:async()=>(await Le.getReminders(t)).data})}function Ete(t=!1){return dt({queryKey:["todos",t],queryFn:async()=>(await Le.getAllTodos(t)).data})}function Nte(){const t=bt();return ft({mutationFn:({todoId:e,data:r})=>Le.updateTodo(e,r),onSuccess:()=>{t.invalidateQueries({queryKey:["todos"]}),t.invalidateQueries({queryKey:["dashboard"]})}})}function Zfe(){const t=bt();return ft({mutationFn:e=>Le.deleteTodo(e),onSuccess:()=>{t.invalidateQueries({queryKey:["todos"]}),t.invalidateQueries({queryKey:["dashboard"]})}})}function epe(t){const e=typeof t=="string"?t:"",r=e.length>=2;return dt({queryKey:["search",e],queryFn:async()=>r?(await Le.search(e)).data:{people:[],companies:[]},enabled:r})}function Wn(t){if(!t)return"";const e=document.createElement("textarea");return e.innerHTML=t,e.value}function ir(t){var r;if(!t)return"";const e=((r=t.title)==null?void 0:r.rendered)||t.title||t.name||"";return Wn(e)}function ec(t){var r,n;if(!t)return"";if(t.name&&typeof t.name=="string"&&!((r=t.title)!=null&&r.rendered))return Wn(t.name);const e=((n=t.title)==null?void 0:n.rendered)||t.title||t.name||"";return Wn(e)}function co(t,e={}){const r=["gender"],n=["contact_info","addresses","work_history","relationships","photo_gallery"],i={...t};return r.forEach(s=>{i[s]===""&&(i[s]=null)}),n.forEach(s=>{Array.isArray(i[s])||(i[s]=[])}),Object.assign(i,e),i}const At={all:["people"],lists:()=>[...At.all,"list"],list:t=>[...At.lists(),t],details:()=>[...At.all,"detail"],detail:t=>[...At.details(),t],timeline:t=>[...At.detail(t),"timeline"],dates:t=>[...At.detail(t),"dates"]};function Cte(t){var i,s,o,a,l,c,d,h,f,p,m,g,b,y,v,w,x;const e=((o=(s=(i=t._embedded)==null?void 0:i["wp:featuredmedia"])==null?void 0:s[0])==null?void 0:o.source_url)||((f=(h=(d=(c=(l=(a=t._embedded)==null?void 0:a["wp:featuredmedia"])==null?void 0:l[0])==null?void 0:c.media_details)==null?void 0:d.sizes)==null?void 0:h.thumbnail)==null?void 0:f.source_url)||null,r=((b=(g=(m=(p=t._embedded)==null?void 0:p["wp:term"])==null?void 0:m.flat())==null?void 0:g.filter(S=>(S==null?void 0:S.taxonomy)==="person_label"))==null?void 0:b.map(S=>S.name))||[],n=Wn(((y=t.title)==null?void 0:y.rendered)||"");return{...t,id:t.id,name:n,first_name:((v=t.acf)==null?void 0:v.first_name)||"",last_name:((w=t.acf)==null?void 0:w.last_name)||"",is_favorite:((x=t.acf)==null?void 0:x.is_favorite)||!1,is_deceased:t.is_deceased||!1,birth_year:t.birth_year||null,modified:t.modified||null,thumbnail:e,labels:r}}function Bc(t={}){return dt({queryKey:At.list(t),queryFn:async()=>{const e=[];let r=1;const n=100;for(;;){const i=await We.getPeople({per_page:n,page:r,_embed:!0,...t}),s=i.data.map(Cte);if(e.push(...s),s.length<n)break;const o=parseInt(i.headers["x-wp-totalpages"]||i.headers["X-WP-TotalPages"]||"0",10);if(o>0&&r>=o)break;r++}return e}})}function zc(t){return dt({queryKey:At.detail(t),queryFn:async()=>{const e=await We.getPerson(t,{_embed:!0});return Cte(e.data)},enabled:!!t})}function tpe(t){return dt({queryKey:At.timeline(t),queryFn:async()=>(await Le.getPersonTimeline(t)).data,enabled:!!t})}function rpe(t){return dt({queryKey:At.dates(t),queryFn:async()=>(await Le.getPersonDates(t)).data,enabled:!!t})}function npe(){const t=bt();return ft({mutationFn:e=>We.createPerson(e),onSuccess:()=>{t.invalidateQueries({queryKey:At.lists()}),t.invalidateQueries({queryKey:["dashboard"]})}})}function rh(){const t=bt();return ft({mutationFn:({id:e,data:r})=>We.updatePerson(e,r),onSuccess:(e,{id:r,data:n})=>{var i;t.invalidateQueries({queryKey:At.detail(r)}),t.invalidateQueries({queryKey:At.lists()}),t.invalidateQueries({queryKey:["dashboard"]}),(i=n==null?void 0:n.acf)!=null&&i.relationships&&(Array.isArray(n.acf.relationships)?n.acf.relationships:[]).forEach(o=>{const a=o.related_person;a&&t.invalidateQueries({queryKey:At.detail(a)})})}})}function ipe(){const t=bt();return ft({mutationFn:e=>We.deletePerson(e,{force:!0}),onSuccess:()=>{t.invalidateQueries({queryKey:At.lists()}),t.invalidateQueries({queryKey:At.details()}),t.invalidateQueries({queryKey:["dashboard"]})}})}function spe(){const t=bt();return ft({mutationFn:({personId:e,content:r})=>Le.createNote(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:At.timeline(r)})}})}function ope(){const t=bt();return ft({mutationFn:({noteId:e,personId:r})=>Le.deleteNote(e),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:At.timeline(r)})}})}function tM(){const t=bt();return ft({mutationFn:({personId:e,data:r})=>Le.createActivity(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:At.timeline(r)})}})}function ape(){const t=bt();return ft({mutationFn:({activityId:e,data:r,personId:n})=>Le.updateActivity(e,r),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:At.timeline(r)})}})}function lpe(){const t=bt();return ft({mutationFn:({activityId:e,personId:r})=>Le.deleteActivity(e),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:At.timeline(r)})}})}function kte(){const t=bt();return ft({mutationFn:({personId:e,data:r})=>Le.createTodo(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:At.timeline(r)})}})}function cpe(){const t=bt();return ft({mutationFn:({todoId:e,data:r,personId:n})=>Le.updateTodo(e,r),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:At.timeline(r)})}})}function upe(){const t=bt();return ft({mutationFn:({todoId:e,personId:r})=>Le.deleteTodo(e),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:At.timeline(r)})}})}function dpe(){const t=bt();return ft({mutationFn:({dateId:e,personId:r})=>We.deleteDate(e),onSuccess:(e,{personId:r})=>{r&&(t.invalidateQueries({queryKey:At.dates(r)}),t.invalidateQueries({queryKey:At.detail(r)})),t.invalidateQueries({queryKey:["reminders"]})}})}function Tte({isOpen:t,onClose:e}){const[r,n]=T.useState(""),[i,s]=T.useState(""),[o,a]=T.useState(""),[l,c]=T.useState(!1),[d,h]=T.useState(""),{data:f=[],isLoading:p}=Bc(),m=kte(),g=bt(),b=T.useMemo(()=>{const _=d.toLowerCase().trim();let N=f;return _&&(N=f.filter(E=>{var k,C,O;return((k=E.name)==null?void 0:k.toLowerCase().includes(_))||((C=E.first_name)==null?void 0:C.toLowerCase().includes(_))||((O=E.last_name)==null?void 0:O.toLowerCase().includes(_))})),[...N].sort((E,k)=>(E.name||"").localeCompare(k.name||""))},[f,d]),y=T.useMemo(()=>f.find(_=>_.id===parseInt(o)),[f,o]),v=()=>new Date().toISOString().split("T")[0];if(T.useEffect(()=>{t&&(n(""),s(v()),a(""),h(""),c(!1))},[t]),!t)return null;const w=async _=>{if(_.preventDefault(),!(!r.trim()||!o))try{await m.mutateAsync({personId:parseInt(o),data:{content:r.trim(),due_date:i||null,is_completed:!1}}),g.invalidateQueries({queryKey:["todos"]}),e()}catch(N){console.error("Failed to create todo:",N)}},x=()=>{e()},S=_=>{if(!_)return"";try{return new Date(_).toISOString().split("T")[0]}catch{return""}};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Add todo"}),u.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600",disabled:m.isPending,children:u.jsx(Lr,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:w,className:"p-4",children:[u.jsxs("div",{className:"mb-4",children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Person ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("div",{className:"relative",children:[u.jsxs("button",{type:"button",onClick:()=>c(!l),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:m.isPending,children:[y?u.jsxs("div",{className:"flex items-center gap-2",children:[y.thumbnail?u.jsx("img",{src:y.thumbnail,alt:y.name,className:"w-6 h-6 rounded-full object-cover"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx(el,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-gray-900",children:y.name})]}):u.jsx("span",{className:"text-gray-400",children:"Select a person..."}),u.jsx(qy,{className:`w-4 h-4 text-gray-400 transition-transform ${l?"rotate-180":""}`})]}),l&&u.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[u.jsx("div",{className:"p-2 border-b border-gray-100",children:u.jsxs("div",{className:"relative",children:[u.jsx(wc,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{type:"text",value:d,onChange:_=>h(_.target.value),placeholder:"Search people...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),u.jsx("div",{className:"overflow-y-auto max-h-48",children:p?u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):b.length>0?b.map(_=>u.jsxs("button",{type:"button",onClick:()=>{a(String(_.id)),c(!1),h("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${o===String(_.id)?"bg-primary-50":""}`,children:[_.thumbnail?u.jsx("img",{src:_.thumbnail,alt:_.name,className:"w-6 h-6 rounded-full object-cover"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx(el,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-sm text-gray-900 truncate",children:_.name})]},_.id)):u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"No people found"})})]})]})]}),u.jsxs("div",{className:"mb-4",children:[u.jsxs("label",{htmlFor:"todo-content",className:"block text-sm font-medium text-gray-700 mb-2",children:["Description ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("textarea",{id:"todo-content",value:r,onChange:_=>n(_.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"What needs to be done?",disabled:m.isPending})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"todo-due-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Due date (optional)"}),u.jsx("input",{id:"todo-due-date",type:"date",value:S(i),onChange:_=>s(_.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:m.isPending})]}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:x,className:"btn-secondary",disabled:m.isPending,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:m.isPending||!r.trim()||!o,children:m.isPending?"Adding...":"Add todo"})]})]})]})})}const hpe=[{name:"Dashboard",href:"/",icon:Pfe},{name:"People",href:"/people",icon:As},{name:"Organizations",href:"/companies",icon:Rr},{name:"Dates",href:"/dates",icon:yo},{name:"Todos",href:"/todos",icon:Ds},{name:"Settings",href:"/settings",icon:yte}];function vF({mobile:t=!1,onClose:e}){const{logoutUrl:r}=WR();return u.jsxs("div",{className:"flex flex-col h-full bg-white border-r border-gray-200",children:[u.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[u.jsxs(ce,{to:"/",className:"flex items-center gap-2 text-xl font-bold text-primary-600",children:[u.jsx(bte,{className:"w-5 h-5"}),_c]}),t&&u.jsx("button",{onClick:e,className:"p-2 -mr-2",children:u.jsx(Lr,{className:"w-5 h-5"})})]}),u.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1 overflow-y-auto",children:hpe.map(n=>u.jsxs(hde,{to:n.href,onClick:t?e:void 0,className:({isActive:i})=>`flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${i?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-50"}`,children:[u.jsx(n.icon,{className:"w-5 h-5 mr-3"}),n.name]},n.name))}),u.jsx("div",{className:"p-4 border-t border-gray-200",children:u.jsxs("a",{href:r,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[u.jsx(Dfe,{className:"w-5 h-5 mr-3"}),"Log Out"]})})]})}function fpe(){var o;const[t,e]=T.useState(!1),r=T.useRef(null),{data:n,isLoading:i}=dt({queryKey:["current-user"],queryFn:async()=>(await Le.getCurrentUser()).data});if(T.useEffect(()=>{const a=l=>{r.current&&!r.current.contains(l.target)&&e(!1)};if(t)return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[t]),i||!n)return u.jsx("div",{className:"flex items-center ml-auto",children:u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full animate-pulse"})});const s=((o=n.name)==null?void 0:o.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2))||"?";return u.jsxs("div",{className:"relative ml-auto",ref:r,children:[u.jsxs("button",{onClick:()=>e(!t),className:"flex items-center gap-2 p-1 rounded-full hover:bg-gray-100 transition-colors","aria-label":"User menu",children:[n.avatar_url?u.jsx("img",{src:n.avatar_url,alt:n.name,className:"w-8 h-8 rounded-full object-cover"}):u.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-sm font-medium text-primary-700",children:s})}),u.jsx(qy,{className:`w-4 h-4 text-gray-500 transition-transform ${t?"rotate-180":""}`})]}),t&&u.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:u.jsxs("div",{className:"py-1",children:[u.jsxs("a",{href:n.profile_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>e(!1),children:[u.jsx(el,{className:"w-4 h-4 mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Edit profile"})]}),n.is_admin&&u.jsxs("a",{href:n.admin_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>e(!1),children:[u.jsx(yte,{className:"w-4 h-4 mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"WordPress admin"})]})]})})]})}function ppe({isOpen:t,onClose:e}){const[r,n]=T.useState(""),[i,s]=T.useState(0),o=yn(),a=T.useRef(null),l=r.trim(),{data:c,isLoading:d}=epe(l),h=c||{people:[],companies:[]},f=[...(h.people||[]).map(y=>({...y,type:"person"})),...(h.companies||[]).map(y=>({...y,type:"company"}))],p=f.length>0,m=r.trim().length>=2;T.useEffect(()=>{t&&(n(""),s(0),setTimeout(()=>{var y;return(y=a.current)==null?void 0:y.focus()},50))},[t]),T.useEffect(()=>{s(0)},[c]);const g=y=>{if(y.key==="Escape"){e();return}if(!(!m||!p)){if(y.key==="ArrowDown")y.preventDefault(),s(v=>Math.min(v+1,f.length-1));else if(y.key==="ArrowUp")y.preventDefault(),s(v=>Math.max(v-1,0));else if(y.key==="Enter"){y.preventDefault();const v=f[i];v&&b(v.type,v.id)}}},b=(y,v)=>{e(),y==="person"?o(`/people/${v}`):y==="company"&&o(`/companies/${v}`)};return t?u.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:e}),u.jsx("div",{className:"relative min-h-screen flex items-start justify-center pt-[15vh] px-4",children:u.jsxs("div",{className:"relative w-full max-w-xl bg-white rounded-xl shadow-2xl overflow-hidden",children:[u.jsxs("div",{className:"flex items-center px-4 border-b border-gray-200",children:[u.jsx(wc,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),u.jsx("input",{ref:a,type:"text",value:r,onChange:y=>n(y.target.value),onKeyDown:g,placeholder:"Search people & organizations...",className:"flex-1 px-4 py-4 text-lg outline-none placeholder:text-gray-400",autoComplete:"off"}),u.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[u.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-gray-500 font-mono",children:"esc"}),u.jsx("span",{children:"to close"})]})]}),u.jsx("div",{className:"max-h-96 overflow-y-auto",children:m?d?u.jsxs("div",{className:"px-4 py-8 text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),u.jsx("p",{className:"mt-3 text-sm text-gray-500",children:"Searching..."})]}):p?u.jsxs("div",{className:"py-2",children:[h.people&&h.people.length>0&&u.jsxs("div",{className:"px-2",children:[u.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"People"}),h.people.map((y,v)=>{const x=i===v;return u.jsxs("button",{onClick:()=>b("person",y.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors text-left ${x?"bg-primary-50 text-primary-900":"hover:bg-gray-50"}`,children:[y.thumbnail?u.jsx("img",{src:y.thumbnail,alt:y.name,className:"w-8 h-8 rounded-full object-cover"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx(el,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-sm font-medium flex-1 truncate",children:y.name}),x&&u.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:""})]},y.id)})]}),h.companies&&h.companies.length>0&&u.jsxs("div",{className:"px-2 mt-2",children:[u.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Organizations"}),h.companies.map((y,v)=>{var S;const w=(((S=h.people)==null?void 0:S.length)||0)+v,x=i===w;return u.jsxs("button",{onClick:()=>b("company",y.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors text-left ${x?"bg-primary-50 text-primary-900":"hover:bg-gray-50"}`,children:[y.thumbnail?u.jsx("img",{src:y.thumbnail,alt:y.name,className:"w-8 h-8 rounded object-contain bg-white"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded flex items-center justify-center",children:u.jsx(Rr,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-sm font-medium flex-1 truncate",children:y.name}),x&&u.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:""})]},y.id)})]})]}):u.jsx("div",{className:"px-4 py-8 text-center text-gray-500",children:u.jsxs("p",{className:"text-sm",children:['No results found for "',r,'"']})}):u.jsxs("div",{className:"px-4 py-8 text-center text-gray-500",children:[u.jsx(wc,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),u.jsx("p",{className:"text-sm",children:"Type at least 2 characters to search"})]})}),u.jsx("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-xs text-gray-500",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),u.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),u.jsx("span",{children:"to navigate"})]}),u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),u.jsx("span",{children:"to select"})]})]})})]})})]}):null}function mpe({onAddTodo:t}){const[e,r]=T.useState(!1),n=T.useRef(null),i=yn();T.useEffect(()=>{const a=l=>{n.current&&!n.current.contains(l.target)&&r(!1)};if(e)return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[e]);const s=a=>{r(!1),i(a)},o=()=>{r(!1),t()};return u.jsxs("div",{className:"relative",ref:n,children:[u.jsx("button",{onClick:()=>r(!e),className:"flex items-center justify-center w-9 h-9 rounded-lg bg-primary-600 hover:bg-primary-700 text-white transition-colors","aria-label":"Quick add",title:"Quick add",children:u.jsx(or,{className:"w-5 h-5"})}),e&&u.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:u.jsxs("div",{className:"py-1",children:[u.jsxs("button",{onClick:()=>s("/people/new"),className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[u.jsx(el,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Person"]}),u.jsxs("button",{onClick:()=>s("/companies/new"),className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[u.jsx(Rr,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Organization"]}),u.jsxs("button",{onClick:o,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[u.jsx(Ds,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Todo"]}),u.jsxs("button",{onClick:()=>s("/dates/new"),className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[u.jsx(yo,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Date"]})]})})]})}function gpe({onMenuClick:t,onAddTodo:e,onOpenSearch:r}){const n=qo(),i=()=>{const s=n.pathname;return s==="/"?"Dashboard":s.startsWith("/people")?"People":s.startsWith("/companies")?"Organizations":s.startsWith("/dates")?"Important Dates":s.startsWith("/todos")?"Todos":s.startsWith("/settings")?"Settings":""};return u.jsxs("header",{className:"sticky top-0 z-10 flex items-center h-16 px-4 bg-white border-b border-gray-200 lg:px-6",children:[u.jsx("button",{onClick:t,className:"p-2 -ml-2 lg:hidden",children:u.jsx(Ffe,{className:"w-5 h-5"})}),u.jsx("h1",{className:"ml-2 text-lg font-semibold lg:ml-0",children:i()}),u.jsx("div",{className:"flex-1"}),u.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg border border-gray-200 hover:bg-gray-50 text-gray-500 transition-colors","aria-label":"Search",title:"Search (K)",children:[u.jsx(wc,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden sm:inline text-sm",children:"Search..."}),u.jsxs("kbd",{className:"hidden sm:flex items-center gap-0.5 px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:[u.jsx(Tfe,{className:"w-3 h-3"}),"K"]})]}),u.jsx("div",{className:"ml-2",children:u.jsx(mpe,{onAddTodo:e})}),u.jsx("div",{className:"ml-2",children:u.jsx(fpe,{})})]})}function ype({children:t}){const[e,r]=T.useState(!1),[n,i]=T.useState(!1),[s,o]=T.useState(!1);return _te(),T.useEffect(()=>{const a=l=>{(l.metaKey||l.ctrlKey)&&l.key==="k"&&(l.preventDefault(),o(!0))};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[]),u.jsxs("div",{className:"flex h-screen bg-gray-50",children:[u.jsx("div",{className:"hidden lg:flex lg:w-64 lg:flex-col",children:u.jsx(vF,{})}),e&&u.jsxs("div",{className:"fixed inset-0 z-40 lg:hidden",children:[u.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>r(!1)}),u.jsx("div",{className:"fixed inset-y-0 left-0 flex flex-col w-64 bg-white",children:u.jsx(vF,{mobile:!0,onClose:()=>r(!1)})})]}),u.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[u.jsx(gpe,{onMenuClick:()=>r(!0),onAddTodo:()=>i(!0),onOpenSearch:()=>o(!0)}),u.jsx("main",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:t})]}),u.jsx(ppe,{isOpen:s,onClose:()=>o(!1)}),u.jsx(Tte,{isOpen:n,onClose:()=>i(!1)})]})}function ct(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function $o(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function vpe(t,e){const r=ct(t);return isNaN(e)?$o(t,NaN):(e&&r.setDate(r.getDate()+e),r)}const Ote=6048e5,bpe=864e5,jte=6e4,Pte=36e5,pg=43200,bF=1440;let xpe={};function Zp(){return xpe}function Ec(t,e){var a,l,c,d;const r=Zp(),n=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((d=(c=r.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,i=ct(t),s=i.getDay(),o=(s<n?7:0)+s-n;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function By(t){return Ec(t,{weekStartsOn:1})}function Ite(t){const e=ct(t),r=e.getFullYear(),n=$o(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=By(n),s=$o(t,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=By(s);return e.getTime()>=i.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function zy(t){const e=ct(t);return e.setHours(0,0,0,0),e}function Vy(t){const e=ct(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function wpe(t,e){const r=zy(t),n=zy(e),i=+r-Vy(r),s=+n-Vy(n);return Math.round((i-s)/bpe)}function Spe(t){const e=Ite(t),r=$o(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),By(r)}function Ju(t,e){const r=ct(t),n=ct(e),i=r.getTime()-n.getTime();return i<0?-1:i>0?1:i}function E0(t){return $o(t,Date.now())}function Rte(t,e){const r=zy(t),n=zy(e);return+r==+n}function _pe(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Epe(t){if(!_pe(t)&&typeof t!="number")return!1;const e=ct(t);return!isNaN(Number(e))}function Npe(t,e){const r=ct(t),n=ct(e),i=r.getFullYear()-n.getFullYear(),s=r.getMonth()-n.getMonth();return i*12+s}function Cpe(t,e){const r=ct(t),n=ct(e);return r.getFullYear()-n.getFullYear()}function kpe(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function Tpe(t,e){return+ct(t)-+ct(e)}function Ope(t){const e=ct(t);return e.setHours(23,59,59,999),e}function jpe(t){const e=ct(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function Ppe(t){const e=ct(t);return+Ope(e)==+jpe(e)}function Ipe(t,e){const r=ct(t),n=ct(e),i=Ju(r,n),s=Math.abs(Npe(r,n));let o;if(s<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*s);let a=Ju(r,n)===-i;Ppe(ct(t))&&s===1&&Ju(t,n)===1&&(a=!1),o=i*(s-Number(a))}return o===0?0:o}function Rpe(t,e,r){const n=Tpe(t,e)/1e3;return kpe(r==null?void 0:r.roundingMethod)(n)}function c1(t,e){const r=ct(t),n=ct(e),i=Ju(r,n),s=Math.abs(Cpe(r,n));r.setFullYear(1584),n.setFullYear(1584);const o=Ju(r,n)===-i,a=i*(s-+o);return a===0?0:a}function Mpe(t){const e=ct(t),r=$o(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}const $pe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Dpe=(t,e,r)=>{let n;const i=$pe[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function u1(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const Ape={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Fpe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},qpe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Lpe={date:u1({formats:Ape,defaultWidth:"full"}),time:u1({formats:Fpe,defaultWidth:"full"}),dateTime:u1({formats:qpe,defaultWidth:"full"})},Bpe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},zpe=(t,e,r,n)=>Bpe[t];function Wh(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let i;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=r!=null&&r.width?String(r.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=r!=null&&r.width?String(r.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const Vpe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Upe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Hpe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Wpe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Kpe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Gpe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ype=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Qpe={ordinalNumber:Ype,era:Wh({values:Vpe,defaultWidth:"wide"}),quarter:Wh({values:Upe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Wh({values:Hpe,defaultWidth:"wide"}),day:Wh({values:Wpe,defaultWidth:"wide"}),dayPeriod:Wh({values:Kpe,defaultWidth:"wide",formattingValues:Gpe,defaultFormattingWidth:"wide"})};function Kh(t){return(e,r={})=>{const n=r.width,i=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?Jpe(a,h=>h.test(o)):Xpe(a,h=>h.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c;const d=e.slice(o.length);return{value:c,rest:d}}}function Xpe(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function Jpe(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function Zpe(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const i=n[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const eme=/^(\d+)(th|st|nd|rd)?/i,tme=/\d+/i,rme={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},nme={any:[/^b/i,/^(a|c)/i]},ime={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},sme={any:[/1/i,/2/i,/3/i,/4/i]},ome={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ame={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},lme={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},cme={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ume={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},dme={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},hme={ordinalNumber:Zpe({matchPattern:eme,parsePattern:tme,valueCallback:t=>parseInt(t,10)}),era:Kh({matchPatterns:rme,defaultMatchWidth:"wide",parsePatterns:nme,defaultParseWidth:"any"}),quarter:Kh({matchPatterns:ime,defaultMatchWidth:"wide",parsePatterns:sme,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Kh({matchPatterns:ome,defaultMatchWidth:"wide",parsePatterns:ame,defaultParseWidth:"any"}),day:Kh({matchPatterns:lme,defaultMatchWidth:"wide",parsePatterns:cme,defaultParseWidth:"any"}),dayPeriod:Kh({matchPatterns:ume,defaultMatchWidth:"any",parsePatterns:dme,defaultParseWidth:"any"})},Mte={code:"en-US",formatDistance:Dpe,formatLong:Lpe,formatRelative:zpe,localize:Qpe,match:hme,options:{weekStartsOn:0,firstWeekContainsDate:1}};function fme(t){const e=ct(t);return wpe(e,Mpe(e))+1}function pme(t){const e=ct(t),r=+By(e)-+Spe(e);return Math.round(r/Ote)+1}function $te(t,e){var d,h,f,p;const r=ct(t),n=r.getFullYear(),i=Zp(),s=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(f=i.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=$o(t,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const a=Ec(o,e),l=$o(t,0);l.setFullYear(n,0,s),l.setHours(0,0,0,0);const c=Ec(l,e);return r.getTime()>=a.getTime()?n+1:r.getTime()>=c.getTime()?n:n-1}function mme(t,e){var a,l,c,d;const r=Zp(),n=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(c=r.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,i=$te(t,e),s=$o(t,0);return s.setFullYear(i,0,n),s.setHours(0,0,0,0),Ec(s,e)}function gme(t,e){const r=ct(t),n=+Ec(r,e)-+mme(r,e);return Math.round(n/Ote)+1}function Et(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const Yo={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Et(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Et(r+1,2)},d(t,e){return Et(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Et(t.getHours()%12||12,e.length)},H(t,e){return Et(t.getHours(),e.length)},m(t,e){return Et(t.getMinutes(),e.length)},s(t,e){return Et(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return Et(i,e.length)}},mu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},xF={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return Yo.y(t,e)},Y:function(t,e,r,n){const i=$te(t,n),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return Et(o,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):Et(s,e.length)},R:function(t,e){const r=Ite(t);return Et(r,e.length)},u:function(t,e){const r=t.getFullYear();return Et(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Et(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Et(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return Yo.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Et(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const i=gme(t,n);return e==="wo"?r.ordinalNumber(i,{unit:"week"}):Et(i,e.length)},I:function(t,e,r){const n=pme(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Et(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):Yo.d(t,e)},D:function(t,e,r){const n=fme(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Et(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Et(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Et(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return Et(i,e.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let i;switch(n===12?i=mu.noon:n===0?i=mu.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let i;switch(n>=17?i=mu.evening:n>=12?i=mu.afternoon:n>=4?i=mu.morning:i=mu.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Yo.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):Yo.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Et(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Et(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):Yo.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):Yo.s(t,e)},S:function(t,e){return Yo.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return SF(n);case"XXXX":case"XX":return Cl(n);case"XXXXX":case"XXX":default:return Cl(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return SF(n);case"xxxx":case"xx":return Cl(n);case"xxxxx":case"xxx":default:return Cl(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+wF(n,":");case"OOOO":default:return"GMT"+Cl(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+wF(n,":");case"zzzz":default:return"GMT"+Cl(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return Et(n,e.length)},T:function(t,e,r){const n=t.getTime();return Et(n,e.length)}};function wF(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Math.trunc(n/60),s=n%60;return s===0?r+String(i):r+String(i)+e+Et(s,2)}function SF(t,e){return t%60===0?(t>0?"-":"+")+Et(Math.abs(t)/60,2):Cl(t,e)}function Cl(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Et(Math.trunc(n/60),2),s=Et(n%60,2);return r+i+e+s}const _F=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Dte=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},yme=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return _F(t,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",_F(n,e)).replace("{{time}}",Dte(i,e))},vme={p:Dte,P:yme},bme=/^D+$/,xme=/^Y+$/,wme=["D","DD","YY","YYYY"];function Sme(t){return bme.test(t)}function _me(t){return xme.test(t)}function Eme(t,e,r){const n=Nme(t,e,r);if(console.warn(n),wme.includes(t))throw new RangeError(n)}function Nme(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Cme=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,kme=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Tme=/^'([^]*?)'?$/,Ome=/''/g,jme=/[a-zA-Z]/;function Nn(t,e,r){var d,h,f,p;const n=Zp(),i=n.locale??Mte,s=n.firstWeekContainsDate??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,o=n.weekStartsOn??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,a=ct(t);if(!Epe(a))throw new RangeError("Invalid time value");let l=e.match(kme).map(m=>{const g=m[0];if(g==="p"||g==="P"){const b=vme[g];return b(m,i.formatLong)}return m}).join("").match(Cme).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const g=m[0];if(g==="'")return{isToken:!1,value:Pme(m)};if(xF[g])return{isToken:!0,value:m};if(g.match(jme))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:m}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(m=>{if(!m.isToken)return m.value;const g=m.value;(_me(g)||Sme(g))&&Eme(g,e,String(t));const b=xF[g[0]];return b(a,g,i.localize,c)}).join("")}function Pme(t){const e=t.match(Tme);return e?e[1].replace(Ome,"'"):t}function Ime(t,e,r){const n=Zp(),i=(r==null?void 0:r.locale)??n.locale??Mte,s=2520,o=Ju(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const a=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let l,c;o>0?(l=ct(e),c=ct(t)):(l=ct(t),c=ct(e));const d=Rpe(c,l),h=(Vy(c)-Vy(l))/1e3,f=Math.round((d-h)/60);let p;if(f<2)return r!=null&&r.includeSeconds?d<5?i.formatDistance("lessThanXSeconds",5,a):d<10?i.formatDistance("lessThanXSeconds",10,a):d<20?i.formatDistance("lessThanXSeconds",20,a):d<40?i.formatDistance("halfAMinute",0,a):d<60?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",1,a):f===0?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",f,a);if(f<45)return i.formatDistance("xMinutes",f,a);if(f<90)return i.formatDistance("aboutXHours",1,a);if(f<bF){const m=Math.round(f/60);return i.formatDistance("aboutXHours",m,a)}else{if(f<s)return i.formatDistance("xDays",1,a);if(f<pg){const m=Math.round(f/bF);return i.formatDistance("xDays",m,a)}else if(f<pg*2)return p=Math.round(f/pg),i.formatDistance("aboutXMonths",p,a)}if(p=Ipe(c,l),p<12){const m=Math.round(f/pg);return i.formatDistance("xMonths",m,a)}else{const m=p%12,g=Math.trunc(p/12);return m<3?i.formatDistance("aboutXYears",g,a):m<9?i.formatDistance("overXYears",g,a):i.formatDistance("almostXYears",g+1,a)}}function Rme(t,e){return Ime(t,E0(t),e)}function Mme(t,e){const r=ct(t),n=ct(e);return r.getTime()>n.getTime()}function $me(t,e,r){const n=Ec(t,r),i=Ec(e,r);return+n==+i}function Dme(t,e){return $me(t,E0(t),e)}function Ate(t){return Rte(t,E0(t))}function Fte(t,e){return vpe(t,-e)}function qte(t){return Rte(t,Fte(E0(t),1))}function dp(t,e){const n=Lme(t);let i;if(n.date){const l=Bme(n.date,2);i=zme(l.restDateString,l.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const s=i.getTime();let o=0,a;if(n.time&&(o=Vme(n.time),isNaN(o)))return new Date(NaN);if(n.timezone){if(a=Ume(n.timezone),isNaN(a))return new Date(NaN)}else{const l=new Date(s+o),c=new Date(0);return c.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),c.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),c}return new Date(s+o+a)}const mg={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Ame=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Fme=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,qme=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Lme(t){const e={},r=t.split(mg.dateTimeDelimiter);let n;if(r.length>2)return e;if(/:/.test(r[0])?n=r[0]:(e.date=r[0],n=r[1],mg.timeZoneDelimiter.test(e.date)&&(e.date=t.split(mg.timeZoneDelimiter)[0],n=t.substr(e.date.length,t.length))),n){const i=mg.timezone.exec(n);i?(e.time=n.replace(i[1],""),e.timezone=i[1]):e.time=n}return e}function Bme(t,e){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=t.match(r);if(!n)return{year:NaN,restDateString:""};const i=n[1]?parseInt(n[1]):null,s=n[2]?parseInt(n[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((n[1]||n[2]).length)}}function zme(t,e){if(e===null)return new Date(NaN);const r=t.match(Ame);if(!r)return new Date(NaN);const n=!!r[4],i=Gh(r[1]),s=Gh(r[2])-1,o=Gh(r[3]),a=Gh(r[4]),l=Gh(r[5])-1;if(n)return Yme(e,a,l)?Hme(e,a,l):new Date(NaN);{const c=new Date(0);return!Kme(e,s,o)||!Gme(e,i)?new Date(NaN):(c.setUTCFullYear(e,s,Math.max(i,o)),c)}}function Gh(t){return t?parseInt(t):1}function Vme(t){const e=t.match(Fme);if(!e)return NaN;const r=d1(e[1]),n=d1(e[2]),i=d1(e[3]);return Qme(r,n,i)?r*Pte+n*jte+i*1e3:NaN}function d1(t){return t&&parseFloat(t.replace(",","."))||0}function Ume(t){if(t==="Z")return 0;const e=t.match(qme);if(!e)return 0;const r=e[1]==="+"?-1:1,n=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return Xme(n,i)?r*(n*Pte+i*jte):NaN}function Hme(t,e,r){const n=new Date(0);n.setUTCFullYear(t,0,4);const i=n.getUTCDay()||7,s=(e-1)*7+r+1-i;return n.setUTCDate(n.getUTCDate()+s),n}const Wme=[31,null,31,30,31,30,31,31,30,31,30,31];function Lte(t){return t%400===0||t%4===0&&t%100!==0}function Kme(t,e,r){return e>=0&&e<=11&&r>=1&&r<=(Wme[e]||(Lte(t)?29:28))}function Gme(t,e){return e>=1&&e<=(Lte(t)?366:365)}function Yme(t,e,r){return e>=1&&e<=53&&r>=0&&r<=6}function Qme(t,e,r){return t===24?e===0&&r===0:r>=0&&r<60&&e>=0&&e<60&&t>=0&&t<25}function Xme(t,e){return e>=0&&e<=59}function Jme(t){if(!t||t.length===0)return{todos:[],today:[],yesterday:[],thisWeek:[],older:[]};const e={todos:[],today:[],yesterday:[],thisWeek:[],older:[]};return t.forEach(r=>{if(r.type==="todo"){e.todos.push(r);return}dp(r.created);let n=r.activity_date||r.created;r.activity_date&&r.activity_time&&(n=`${r.activity_date}T${r.activity_time}`);const i=dp(n);Ate(i)?e.today.push(r):qte(i)?e.yesterday.push(r):Dme(i)?e.thisWeek.push(r):e.older.push(r)}),e.todos.sort((r,n)=>{if(r.is_completed&&!n.is_completed)return 1;if(!r.is_completed&&n.is_completed)return-1;if(!r.is_completed&&!n.is_completed){if(r.due_date&&n.due_date)return new Date(r.due_date)-new Date(n.due_date);if(r.due_date&&!n.due_date)return-1;if(!r.due_date&&n.due_date)return 1}return new Date(n.created)-new Date(r.created)}),e}function Zme(t){if(!t)return"";try{const e=dp(t),r=t.includes("T")&&t.length>10,n=r?" at HH:mm":"";return Ate(e)?Rme(e,{addSuffix:!0}):qte(e)?r?Nn(e,"'Yesterday' 'at' HH:mm"):"Yesterday":Nn(e,r?"MMM d, yyyy 'at' HH:mm":"MMM d, yyyy")}catch{return t}}function ege(t){return{call:"Phone",email:"Mail",chat:"MessageCircle",meeting:"Users",coffee:"Coffee",lunch:"Utensils",note:"FileText"}[t]||"Circle"}function tge(t){return{call:"Phone call",email:"Email",chat:"Chat",meeting:"Meeting",coffee:"Coffee",lunch:"Lunch",note:"Note"}[t]||t||"Activity"}function em(t){if(!t.due_date||t.is_completed)return!1;try{const e=dp(t.due_date),r=new Date;return r.setHours(0,0,0,0),e.setHours(0,0,0,0),e<r}catch{return!1}}function rge(t){const e=[];return t.is_completed?e.push("opacity-60","line-through"):em(t)&&e.push("text-red-600","font-medium"),e.join(" ")}function rM({isOpen:t,onClose:e,todo:r,onComplete:n,onCompleteAsActivity:i}){return!t||!r?null:u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Complete todo"}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:u.jsx(Lr,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"p-4",children:[u.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:['"',r.content,'"']}),u.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"How would you like to complete this todo?"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("button",{onClick:n,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-colors text-left",children:[u.jsx(Ds,{className:"w-5 h-5 text-primary-600 flex-shrink-0"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium text-gray-900",children:"Just complete"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Mark the todo as done"})]})]}),u.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors text-left",children:[u.jsx(_0,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium text-gray-900",children:"Complete & log activity"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Record this as an activity on the timeline"})]})]})]})]}),u.jsx("div",{className:"flex justify-end p-4 border-t bg-gray-50 rounded-b-lg",children:u.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancel"})})]})})}var Bte={exports:{}},zte={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Id=T;function nge(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ige=typeof Object.is=="function"?Object.is:nge,sge=Id.useState,oge=Id.useEffect,age=Id.useLayoutEffect,lge=Id.useDebugValue;function cge(t,e){var r=e(),n=sge({inst:{value:r,getSnapshot:e}}),i=n[0].inst,s=n[1];return age(function(){i.value=r,i.getSnapshot=e,h1(i)&&s({inst:i})},[t,r,e]),oge(function(){return h1(i)&&s({inst:i}),t(function(){h1(i)&&s({inst:i})})},[t]),lge(r),r}function h1(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!ige(t,r)}catch{return!0}}function uge(t,e){return e()}var dge=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?uge:cge;zte.useSyncExternalStore=Id.useSyncExternalStore!==void 0?Id.useSyncExternalStore:dge;Bte.exports=zte;var nM=Bte.exports;function en(t){this.content=t}en.prototype={constructor:en,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,r){var n=r&&r!=t?this.remove(r):this,i=n.find(t),s=n.content.slice();return i==-1?s.push(r||t,e):(s[i+1]=e,r&&(s[i]=r)),new en(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var r=this.content.slice();return r.splice(e,2),new en(r)},addToStart:function(t,e){return new en([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var r=this.remove(t).content.slice();return r.push(t,e),new en(r)},addBefore:function(t,e,r){var n=this.remove(e),i=n.content.slice(),s=n.find(t);return i.splice(s==-1?i.length:s,0,e,r),new en(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=en.from(t),t.size?new en(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=en.from(t),t.size?new en(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=en.from(t);for(var r=0;r<t.content.length;r+=2)e=e.remove(t.content[r]);return e},toObject:function(){var t={};return this.forEach(function(e,r){t[e]=r}),t},get size(){return this.content.length>>1}};en.from=function(t){if(t instanceof en)return t;var e=[];if(t)for(var r in t)e.push(r,t[r]);return new en(e)};function Vte(t,e,r){for(let n=0;;n++){if(n==t.childCount||n==e.childCount)return t.childCount==e.childCount?null:r;let i=t.child(n),s=e.child(n);if(i==s){r+=i.nodeSize;continue}if(!i.sameMarkup(s))return r;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)r++;return r}if(i.content.size||s.content.size){let o=Vte(i.content,s.content,r+1);if(o!=null)return o}r+=i.nodeSize}}function Ute(t,e,r,n){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:r,b:n};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){r-=l,n-=l;continue}if(!o.sameMarkup(a))return{a:r,b:n};if(o.isText&&o.text!=a.text){let c=0,d=Math.min(o.text.length,a.text.length);for(;c<d&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,r--,n--;return{a:r,b:n}}if(o.content.size||a.content.size){let c=Ute(o.content,a.content,r-1,n-1);if(c)return c}r-=l,n-=l}}class Q{constructor(e,r){if(this.content=e,this.size=r||0,r==null)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,r,n,i=0,s){for(let o=0,a=0;a<r;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&n(l,i+a,s||null,o)!==!1&&l.content.size){let d=a+1;l.nodesBetween(Math.max(0,e-d),Math.min(l.content.size,r-d),n,i+d)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,r,n,i){let s="",o=!0;return this.nodesBetween(e,r,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,r-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&n&&(o?o=!1:s+=n),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let r=this.lastChild,n=e.firstChild,i=this.content.slice(),s=0;for(r.isText&&r.sameMarkup(n)&&(i[i.length-1]=r.withText(r.text+n.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new Q(i,this.size+e.size)}cut(e,r=this.size){if(e==0&&r==this.size)return this;let n=[],i=0;if(r>e)for(let s=0,o=0;o<r;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>r)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,r-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,r-o-1))),n.push(a),i+=a.nodeSize),o=l}return new Q(n,i)}cutByIndex(e,r){return e==r?Q.empty:e==0&&r==this.content.length?this:new Q(this.content.slice(e,r))}replaceChild(e,r){let n=this.content[e];if(n==r)return this;let i=this.content.slice(),s=this.size+r.nodeSize-n.nodeSize;return i[e]=r,new Q(i,s)}addToStart(e){return new Q([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Q(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let r=0;r<this.content.length;r++)if(!this.content[r].eq(e.content[r]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let r=this.content[e];if(!r)throw new RangeError("Index "+e+" out of range for "+this);return r}maybeChild(e){return this.content[e]||null}forEach(e){for(let r=0,n=0;r<this.content.length;r++){let i=this.content[r];e(i,n,r),n+=i.nodeSize}}findDiffStart(e,r=0){return Vte(this,e,r)}findDiffEnd(e,r=this.size,n=e.size){return Ute(this,e,r,n)}findIndex(e){if(e==0)return gg(0,e);if(e==this.size)return gg(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,n=0;;r++){let i=this.child(r),s=n+i.nodeSize;if(s>=e)return s==e?gg(r+1,s):gg(r,n);n=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,r){if(!r)return Q.empty;if(!Array.isArray(r))throw new RangeError("Invalid input for Fragment.fromJSON");return new Q(r.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Q.empty;let r,n=0;for(let i=0;i<e.length;i++){let s=e[i];n+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(r||(r=e.slice(0,i)),r[r.length-1]=s.withText(r[r.length-1].text+s.text)):r&&r.push(s)}return new Q(r||e,n)}static from(e){if(!e)return Q.empty;if(e instanceof Q)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Q([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Q.empty=new Q([],0);const f1={index:0,offset:0};function gg(t,e){return f1.index=t,f1.offset=e,f1}function Uy(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let r=Array.isArray(t);if(Array.isArray(e)!=r)return!1;if(r){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!Uy(t[n],e[n]))return!1}else{for(let n in t)if(!(n in e)||!Uy(t[n],e[n]))return!1;for(let n in e)if(!(n in t))return!1}return!0}let Ot=class UP{constructor(e,r){this.type=e,this.attrs=r}addToSet(e){let r,n=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))r||(r=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!n&&s.type.rank>this.type.rank&&(r||(r=e.slice(0,i)),r.push(this),n=!0),r&&r.push(s)}}return r||(r=e.slice()),n||r.push(this),r}removeFromSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return e.slice(0,r).concat(e.slice(r+1));return e}isInSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Uy(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[r.type];if(!n)throw new RangeError(`There is no mark type ${r.type} in this schema`);let i=n.create(r.attrs);return n.checkAttrs(i.attrs),i}static sameSet(e,r){if(e==r)return!0;if(e.length!=r.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(r[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return UP.none;if(e instanceof UP)return[e];let r=e.slice();return r.sort((n,i)=>n.type.rank-i.type.rank),r}};Ot.none=[];class Hy extends Error{}class me{constructor(e,r,n){this.content=e,this.openStart=r,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,r){let n=Wte(this.content,e+this.openStart,r);return n&&new me(n,this.openStart,this.openEnd)}removeBetween(e,r){return new me(Hte(this.content,e+this.openStart,r+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,r){if(!r)return me.empty;let n=r.openStart||0,i=r.openEnd||0;if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new me(Q.fromJSON(e,r.content),n,i)}static maxOpen(e,r=!0){let n=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(r||!s.type.spec.isolating);s=s.firstChild)n++;for(let s=e.lastChild;s&&!s.isLeaf&&(r||!s.type.spec.isolating);s=s.lastChild)i++;return new me(e,n,i)}}me.empty=new me(Q.empty,0,0);function Hte(t,e,r){let{index:n,offset:i}=t.findIndex(e),s=t.maybeChild(n),{index:o,offset:a}=t.findIndex(r);if(i==e||s.isText){if(a!=r&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(r))}if(n!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(n,s.copy(Hte(s.content,e-i-1,r-i-1)))}function Wte(t,e,r,n){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return n&&!n.canReplace(i,i,r)?null:t.cut(0,e).append(r).append(t.cut(e));let a=Wte(o.content,e-s-1,r,o);return a&&t.replaceChild(i,o.copy(a))}function hge(t,e,r){if(r.openStart>t.depth)throw new Hy("Inserted content deeper than insertion position");if(t.depth-r.openStart!=e.depth-r.openEnd)throw new Hy("Inconsistent open depths");return Kte(t,e,r,0)}function Kte(t,e,r,n){let i=t.index(n),s=t.node(n);if(i==e.index(n)&&n<t.depth-r.openStart){let o=Kte(t,e,r,n+1);return s.copy(s.content.replaceChild(i,o))}else if(r.content.size)if(!r.openStart&&!r.openEnd&&t.depth==n&&e.depth==n){let o=t.parent,a=o.content;return rc(o,a.cut(0,t.parentOffset).append(r.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=fge(r,t);return rc(s,Yte(t,o,a,e,n))}else return rc(s,Wy(t,e,n))}function Gte(t,e){if(!e.type.compatibleContent(t.type))throw new Hy("Cannot join "+e.type.name+" onto "+t.type.name)}function HP(t,e,r){let n=t.node(r);return Gte(n,e.node(r)),n}function tc(t,e){let r=e.length-1;r>=0&&t.isText&&t.sameMarkup(e[r])?e[r]=t.withText(e[r].text+t.text):e.push(t)}function Nf(t,e,r,n){let i=(e||t).node(r),s=0,o=e?e.index(r):i.childCount;t&&(s=t.index(r),t.depth>r?s++:t.textOffset&&(tc(t.nodeAfter,n),s++));for(let a=s;a<o;a++)tc(i.child(a),n);e&&e.depth==r&&e.textOffset&&tc(e.nodeBefore,n)}function rc(t,e){return t.type.checkContent(e),t.copy(e)}function Yte(t,e,r,n,i){let s=t.depth>i&&HP(t,e,i+1),o=n.depth>i&&HP(r,n,i+1),a=[];return Nf(null,t,i,a),s&&o&&e.index(i)==r.index(i)?(Gte(s,o),tc(rc(s,Yte(t,e,r,n,i+1)),a)):(s&&tc(rc(s,Wy(t,e,i+1)),a),Nf(e,r,i,a),o&&tc(rc(o,Wy(r,n,i+1)),a)),Nf(n,null,i,a),new Q(a)}function Wy(t,e,r){let n=[];if(Nf(null,t,r,n),t.depth>r){let i=HP(t,e,r+1);tc(rc(i,Wy(t,e,r+1)),n)}return Nf(e,null,r,n),new Q(n)}function fge(t,e){let r=e.depth-t.openStart,i=e.node(r).copy(t.content);for(let s=r-1;s>=0;s--)i=e.node(s).copy(Q.from(i));return{start:i.resolveNoCache(t.openStart+r),end:i.resolveNoCache(i.content.size-t.openEnd-r)}}class hp{constructor(e,r,n){this.pos=e,this.path=r,this.parentOffset=n,this.depth=r.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,r=this.index(this.depth);if(r==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],i=e.child(r);return n?e.child(r).cut(n):i}get nodeBefore(){let e=this.index(this.depth),r=this.pos-this.path[this.path.length-1];return r?this.parent.child(e).cut(0,r):e==0?null:this.parent.child(e-1)}posAtIndex(e,r){r=this.resolveDepth(r);let n=this.path[r*3],i=r==0?0:this.path[r*3-1]+1;for(let s=0;s<e;s++)i+=n.child(s).nodeSize;return i}marks(){let e=this.parent,r=this.index();if(e.content.size==0)return Ot.none;if(this.textOffset)return e.child(r).marks;let n=e.maybeChild(r-1),i=e.maybeChild(r);if(!n){let a=n;n=i,i=a}let s=n.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let r=this.parent.maybeChild(this.index());if(!r||!r.isInline)return null;let n=r.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<n.length;s++)n[s].type.spec.inclusive===!1&&(!i||!n[s].isInSet(i.marks))&&(n=n[s--].removeFromSet(n));return n}sharedDepth(e){for(let r=this.depth;r>0;r--)if(this.start(r)<=e&&this.end(r)>=e)return r;return 0}blockRange(e=this,r){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!r||r(this.node(n))))return new Ky(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let r=1;r<=this.depth;r++)e+=(e?"/":"")+this.node(r).type.name+"_"+this.index(r-1);return e+":"+this.parentOffset}static resolve(e,r){if(!(r>=0&&r<=e.content.size))throw new RangeError("Position "+r+" out of range");let n=[],i=0,s=r;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(n.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new hp(r,n,s)}static resolveCached(e,r){let n=EF.get(e);if(n)for(let s=0;s<n.elts.length;s++){let o=n.elts[s];if(o.pos==r)return o}else EF.set(e,n=new pge);let i=n.elts[n.i]=hp.resolve(e,r);return n.i=(n.i+1)%mge,i}}class pge{constructor(){this.elts=[],this.i=0}}const mge=12,EF=new WeakMap;class Ky{constructor(e,r,n){this.$from=e,this.$to=r,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const gge=Object.create(null);let Ba=class WP{constructor(e,r,n,i=Ot.none){this.type=e,this.attrs=r,this.marks=i,this.content=n||Q.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,r,n,i=0){this.content.nodesBetween(e,r,n,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,r,n,i){return this.content.textBetween(e,r,n,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,r,n){return this.type==e&&Uy(this.attrs,r||e.defaultAttrs||gge)&&Ot.sameSet(this.marks,n||Ot.none)}copy(e=null){return e==this.content?this:new WP(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new WP(this.type,this.attrs,this.content,e)}cut(e,r=this.content.size){return e==0&&r==this.content.size?this:this.copy(this.content.cut(e,r))}slice(e,r=this.content.size,n=!1){if(e==r)return me.empty;let i=this.resolve(e),s=this.resolve(r),o=n?0:i.sharedDepth(r),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new me(c,i.depth-o,s.depth-o)}replace(e,r,n){return hge(this.resolve(e),this.resolve(r),n)}nodeAt(e){for(let r=this;;){let{index:n,offset:i}=r.content.findIndex(e);if(r=r.maybeChild(n),!r)return null;if(i==e||r.isText)return r;e-=i+1}}childAfter(e){let{index:r,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(r),index:r,offset:n}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:r,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(r),index:r,offset:n};let i=this.content.child(r-1);return{node:i,index:r-1,offset:n-i.nodeSize}}resolve(e){return hp.resolveCached(this,e)}resolveNoCache(e){return hp.resolve(this,e)}rangeHasMark(e,r,n){let i=!1;return r>e&&this.nodesBetween(e,r,s=>(n.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Qte(this.marks,e)}contentMatchAt(e){let r=this.type.contentMatch.matchFragment(this.content,0,e);if(!r)throw new Error("Called contentMatchAt on a node with invalid content");return r}canReplace(e,r,n=Q.empty,i=0,s=n.childCount){let o=this.contentMatchAt(e).matchFragment(n,i,s),a=o&&o.matchFragment(this.content,r);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(n.child(l).marks))return!1;return!0}canReplaceWith(e,r,n,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(n),o=s&&s.matchFragment(this.content,r);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Ot.none;for(let r=0;r<this.marks.length;r++){let n=this.marks[r];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!Ot.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(r=>r.type.name)}`);this.content.forEach(r=>r.check())}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(r=>r.toJSON())),e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Node.fromJSON");let n;if(r.marks){if(!Array.isArray(r.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=r.marks.map(e.markFromJSON)}if(r.type=="text"){if(typeof r.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(r.text,n)}let i=Q.fromJSON(e,r.content),s=e.nodeType(r.type).create(r.attrs,i,n);return s.type.checkAttrs(s.attrs),s}};Ba.prototype.text=void 0;class Gy extends Ba{constructor(e,r,n,i){if(super(e,r,null,i),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Qte(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,r){return this.text.slice(e,r)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Gy(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Gy(this.type,this.attrs,e,this.marks)}cut(e=0,r=this.text.length){return e==0&&r==this.text.length?this:this.withText(this.text.slice(e,r))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Qte(t,e){for(let r=t.length-1;r>=0;r--)e=t[r].type.name+"("+e+")";return e}class Nc{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,r){let n=new yge(e,r);if(n.next==null)return Nc.empty;let i=Xte(n);n.next&&n.err("Unexpected trailing text");let s=Ege(_ge(i));return Nge(s,n),s}matchType(e){for(let r=0;r<this.next.length;r++)if(this.next[r].type==e)return this.next[r].next;return null}matchFragment(e,r=0,n=e.childCount){let i=this;for(let s=r;i&&s<n;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:r}=this.next[e];if(!(r.isText||r.hasRequiredAttrs()))return r}return null}compatible(e){for(let r=0;r<this.next.length;r++)for(let n=0;n<e.next.length;n++)if(this.next[r].type==e.next[n].type)return!0;return!1}fillBefore(e,r=!1,n=0){let i=[this];function s(o,a){let l=o.matchFragment(e,n);if(l&&(!r||l.validEnd))return Q.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:d,next:h}=o.next[c];if(!(d.isText||d.hasRequiredAttrs())&&i.indexOf(h)==-1){i.push(h);let f=s(h,a.concat(d));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let r=this.computeWrapping(e);return this.wrapCache.push(e,r),r}computeWrapping(e){let r=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let i=n.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in r)&&(!i.type||l.validEnd)&&(n.push({match:a.contentMatch,type:a,via:i}),r[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function r(n){e.push(n);for(let i=0;i<n.next.length;i++)e.indexOf(n.next[i].next)==-1&&r(n.next[i].next)}return r(this),e.map((n,i)=>{let s=i+(n.validEnd?"*":" ")+" ";for(let o=0;o<n.next.length;o++)s+=(o?", ":"")+n.next[o].type.name+"->"+e.indexOf(n.next[o].next);return s}).join(`
`)}}Nc.empty=new Nc(!0);class yge{constructor(e,r){this.string=e,this.nodeTypes=r,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Xte(t){let e=[];do e.push(vge(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function vge(t){let e=[];do e.push(bge(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function bge(t){let e=Sge(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=xge(t,e);else break;return e}function NF(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function xge(t,e){let r=NF(t),n=r;return t.eat(",")&&(t.next!="}"?n=NF(t):n=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:r,max:n,expr:e}}function wge(t,e){let r=t.nodeTypes,n=r[e];if(n)return[n];let i=[];for(let s in r){let o=r[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function Sge(t){if(t.eat("(")){let e=Xte(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=wge(t,t.next).map(r=>(t.inline==null?t.inline=r.isInline:t.inline!=r.isInline&&t.err("Mixing inline and block content"),{type:"name",value:r}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function _ge(t){let e=[[]];return i(s(t,0),r()),e;function r(){return e.push([])-1}function n(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=r())}else if(o.type=="star"){let l=r();return n(a,l),i(s(o.expr,l),l),[n(l)]}else if(o.type=="plus"){let l=r();return i(s(o.expr,a),l),i(s(o.expr,l),l),[n(l)]}else{if(o.type=="opt")return[n(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let d=r();i(s(o.expr,l),d),l=d}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let d=r();n(l,d),i(s(o.expr,l),d),l=d}return[n(l)]}else{if(o.type=="name")return[n(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function Jte(t,e){return e-t}function CF(t,e){let r=[];return n(e),r.sort(Jte);function n(i){let s=t[i];if(s.length==1&&!s[0].term)return n(s[0].to);r.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&r.indexOf(l)==-1&&n(l)}}}function Ege(t){let e=Object.create(null);return r(CF(t,0));function r(n){let i=[];n.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let d=0;d<i.length;d++)i[d][0]==a&&(c=i[d][1]);CF(t,l).forEach(d=>{c||i.push([a,c=[]]),c.indexOf(d)==-1&&c.push(d)})})});let s=e[n.join(",")]=new Nc(n.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(Jte);s.next.push({type:i[o][0],next:e[a.join(",")]||r(a)})}return s}}function Nge(t,e){for(let r=0,n=[t];r<n.length;r++){let i=n[r],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),n.indexOf(c)==-1&&n.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Zte(t){let e=Object.create(null);for(let r in t){let n=t[r];if(!n.hasDefault)return null;e[r]=n.default}return e}function ere(t,e){let r=Object.create(null);for(let n in t){let i=e&&e[n];if(i===void 0){let s=t[n];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+n)}r[n]=i}return r}function tre(t,e,r,n){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${r} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function rre(t,e){let r=Object.create(null);if(e)for(let n in e)r[n]=new kge(t,n,e[n]);return r}let kF=class nre{constructor(e,r,n){this.name=e,this.schema=r,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=rre(e,n.attrs),this.defaultAttrs=Zte(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Nc.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:ere(this.attrs,e)}create(e=null,r,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ba(this,this.computeAttrs(e),Q.from(r),Ot.setFrom(n))}createChecked(e=null,r,n){return r=Q.from(r),this.checkContent(r),new Ba(this,this.computeAttrs(e),r,Ot.setFrom(n))}createAndFill(e=null,r,n){if(e=this.computeAttrs(e),r=Q.from(r),r.size){let o=this.contentMatch.fillBefore(r);if(!o)return null;r=o.append(r)}let i=this.contentMatch.matchFragment(r),s=i&&i.fillBefore(Q.empty,!0);return s?new Ba(this,e,r.append(s),Ot.setFrom(n)):null}validContent(e){let r=this.contentMatch.matchFragment(e);if(!r||!r.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){tre(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let r=0;r<e.length;r++)if(!this.allowsMarkType(e[r].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let r;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?r&&r.push(e[n]):r||(r=e.slice(0,n));return r?r.length?r:Ot.none:e}static compile(e,r){let n=Object.create(null);e.forEach((s,o)=>n[s]=new nre(s,r,o));let i=r.spec.topNode||"doc";if(!n[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let s in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function Cge(t,e,r){let n=r.split("|");return i=>{let s=i===null?"null":typeof i;if(n.indexOf(s)<0)throw new RangeError(`Expected value of type ${n} for attribute ${e} on type ${t}, got ${s}`)}}class kge{constructor(e,r,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?Cge(e,r,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class N0{constructor(e,r,n,i){this.name=e,this.rank=r,this.schema=n,this.spec=i,this.attrs=rre(e,i.attrs),this.excluded=null;let s=Zte(this.attrs);this.instance=s?new Ot(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Ot(this,ere(this.attrs,e))}static compile(e,r){let n=Object.create(null),i=0;return e.forEach((s,o)=>n[s]=new N0(s,i++,r,o)),n}removeFromSet(e){for(var r=0;r<e.length;r++)e[r].type==this&&(e=e.slice(0,r).concat(e.slice(r+1)),r--);return e}isInSet(e){for(let r=0;r<e.length;r++)if(e[r].type==this)return e[r]}checkAttrs(e){tre(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class ire{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let r=this.spec={};for(let i in e)r[i]=e[i];r.nodes=en.from(e.nodes),r.marks=en.from(e.marks||{}),this.nodes=kF.compile(this.spec.nodes,this),this.marks=N0.compile(this.spec.marks,this);let n=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=n[o]||(n[o]=Nc.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?TF(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:TF(this,o.split(" "))}this.nodeFromJSON=i=>Ba.fromJSON(this,i),this.markFromJSON=i=>Ot.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,r=null,n,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof kF){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(r,n,i)}text(e,r){let n=this.nodes.text;return new Gy(n,n.defaultAttrs,e,Ot.setFrom(r))}mark(e,r){return typeof e=="string"&&(e=this.marks[e]),e.create(r)}nodeType(e){let r=this.nodes[e];if(!r)throw new RangeError("Unknown node type: "+e);return r}}function TF(t,e){let r=[];for(let n=0;n<e.length;n++){let i=e[n],s=t.marks[i],o=s;if(s)r.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&r.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return r}function Tge(t){return t.tag!=null}function Oge(t){return t.style!=null}class za{constructor(e,r){this.schema=e,this.rules=r,this.tags=[],this.styles=[];let n=this.matchedStyles=[];r.forEach(i=>{if(Tge(i))this.tags.push(i);else if(Oge(i)){let s=/[^=]*/.exec(i.style)[0];n.indexOf(s)<0&&n.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,r={}){let n=new jF(this,r,!1);return n.addAll(e,Ot.none,r.from,r.to),n.finish()}parseSlice(e,r={}){let n=new jF(this,r,!0);return n.addAll(e,Ot.none,r.from,r.to),me.maxOpen(n.finish())}matchTag(e,r,n){for(let i=n?this.tags.indexOf(n)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(Ige(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||r.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,r,n,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!n.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=r))){if(o.getAttrs){let l=o.getAttrs(r);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let r=[];function n(i){let s=i.priority==null?50:i.priority,o=0;for(;o<r.length;o++){let a=r[o];if((a.priority==null?50:a.priority)<s)break}r.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{n(o=PF(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{n(o=PF(o)),o.node||o.ignore||o.mark||(o.node=i)})}return r}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new za(e,za.schemaRules(e)))}}const sre={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},jge={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ore={ol:!0,ul:!0},fp=1,KP=2,Cf=4;function OF(t,e,r){return e!=null?(e?fp:0)|(e==="full"?KP:0):t&&t.whitespace=="pre"?fp|KP:r&~Cf}class yg{constructor(e,r,n,i,s,o){this.type=e,this.attrs=r,this.marks=n,this.solid=i,this.options=o,this.content=[],this.activeMarks=Ot.none,this.match=s||(o&Cf?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let r=this.type.contentMatch.fillBefore(Q.from(e));if(r)this.match=this.type.contentMatch.matchFragment(r);else{let n=this.type.contentMatch,i;return(i=n.findWrapping(e.type))?(this.match=n,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&fp)){let n=this.content[this.content.length-1],i;if(n&&n.isText&&(i=/[ \t\r\n\u000c]+$/.exec(n.text))){let s=n;n.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let r=Q.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(Q.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!sre.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class jF{constructor(e,r,n){this.parser=e,this.options=r,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let i=r.topNode,s,o=OF(null,r.preserveWhitespace,0)|(n?Cf:0);i?s=new yg(i.type,i.attrs,Ot.none,!0,r.topMatch||i.type.contentMatch,o):n?s=new yg(null,null,Ot.none,!0,null,o):s=new yg(e.schema.topNodeType,null,Ot.none,!0,null,o),this.nodes=[s],this.find=r.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,r){e.nodeType==3?this.addTextNode(e,r):e.nodeType==1&&this.addElement(e,r)}addTextNode(e,r){let n=e.nodeValue,i=this.top,s=i.options&KP?"full":this.localPreserveWS||(i.options&fp)>0,{schema:o}=this.parser;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(s)if(s==="full")n=n.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(n)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=n.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),r,!0),a[l]&&this.insertNode(o.text(a[l]),r,!/\S/.test(a[l]));n=""}else n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],l=e.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(n=n.slice(1))}n&&this.insertNode(o.text(n),r,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,r,n){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;ore.hasOwnProperty(o)&&this.parser.normalizeLists&&Pge(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,n));e:if(l?l.ignore:jge.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,r);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,d=this.needsBlock;if(sre.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,r);break e}let h=l&&l.skip?r:this.readStyles(e,r);h&&this.addAll(e,h),c&&this.sync(s),this.needsBlock=d}else{let c=this.readStyles(e,r);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,r){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),r)}ignoreFallback(e,r){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),r,!0)}readStyles(e,r){let n=e.style;if(n&&n.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=n.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?r=r.filter(c=>!l.clearMark(c)):r=r.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return r}addElementByRule(e,r,n,i){let s,o;if(r.node)if(o=this.parser.schema.nodes[r.node],o.isLeaf)this.insertNode(o.create(r.attrs),n,e.nodeName=="BR")||this.leafFallback(e,n);else{let l=this.enter(o,r.attrs||null,n,r.preserveWhitespace);l&&(s=!0,n=l)}else{let l=this.parser.schema.marks[r.mark];n=n.concat(l.create(r.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,n,i);else if(r.getContent)this.findInside(e),r.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,n,!1));else{let l=e;typeof r.contentElement=="string"?l=e.querySelector(r.contentElement):typeof r.contentElement=="function"?l=r.contentElement(e):r.contentElement&&(l=r.contentElement),this.findAround(e,l,!0),this.addAll(l,n),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,r,n,i){let s=n||0;for(let o=n?e.childNodes[n]:e.firstChild,a=i==null?null:e.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,r);this.findAtPoint(e,s)}findPlace(e,r,n){let i,s;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],c=l.findWrapping(e);if(c&&(!i||i.length>c.length+a)&&(i=c,s=l,!c.length))break;if(l.solid){if(n)break;a+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)r=this.enterInner(i[o],null,r,!1);return r}insertNode(e,r,n){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(r=this.enterInner(s,null,r))}let i=this.findPlace(e,r,n);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=Ot.none;for(let a of i.concat(e.marks))(s.type?s.type.allowsMarkType(a.type):IF(a.type,e.type))&&(o=a.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,r,n,i){let s=this.findPlace(e.create(r),n,!1);return s&&(s=this.enterInner(e,r,n,!0,i)),s}enterInner(e,r,n,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=OF(e,s,o.options);o.options&Cf&&o.content.length==0&&(a|=Cf);let l=Ot.none;return n=n.filter(c=>(o.type?o.type.allowsMarkType(c.type):IF(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new yg(e,r,l,i,null,a)),this.open++,n}closeExtra(e=!1){let r=this.nodes.length-1;if(r>this.open){for(;r>this.open;r--)this.nodes[r-1].content.push(this.nodes[r].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let r=this.open;r>=0;r--){if(this.nodes[r]==e)return this.open=r,!0;this.localPreserveWS&&(this.nodes[r].options|=fp)}return!1}get currentPos(){this.closeExtra();let e=0;for(let r=this.open;r>=0;r--){let n=this.nodes[r].content;for(let i=n.length-1;i>=0;i--)e+=n[i].nodeSize;r&&e++}return e}findAtPoint(e,r){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==r&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)&&(this.find[r].pos=this.currentPos)}findAround(e,r,n){if(e!=r&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&r.compareDocumentPosition(this.find[i].node)&(n?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&(this.find[r].pos=this.currentPos-(e.nodeValue.length-this.find[r].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let r=e.split("/"),n=this.options.context,i=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),s=-(n?n.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=r[a];if(c==""){if(a==r.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let d=l>0||l==0&&i?this.nodes[l].type:n&&l>=s?n.node(l-s).type:null;if(!d||d.name!=c&&!d.isInGroup(c))return!1;l--}}return!0};return o(r.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let r=e.depth;r>=0;r--){let n=e.node(r).contentMatchAt(e.indexAfter(r)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let r in this.parser.schema.nodes){let n=this.parser.schema.nodes[r];if(n.isTextblock&&n.defaultAttrs)return n}}}function Pge(t){for(let e=t.firstChild,r=null;e;e=e.nextSibling){let n=e.nodeType==1?e.nodeName.toLowerCase():null;n&&ore.hasOwnProperty(n)&&r?(r.appendChild(e),e=r):n=="li"?r=e:n&&(r=null)}}function Ige(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function PF(t){let e={};for(let r in t)e[r]=t[r];return e}function IF(t,e){let r=e.schema.nodes;for(let n in r){let i=r[n];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:d}=a.edge(l);if(c==e||s.indexOf(d)<0&&o(d))return!0}};if(o(i.contentMatch))return!0}}class Vc{constructor(e,r){this.nodes=e,this.marks=r}serializeFragment(e,r={},n){n||(n=p1(r).createDocumentFragment());let i=n,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],d=this.serializeMark(c,o.isInline,r);d&&(s.push([c,i]),i.appendChild(d.dom),i=d.contentDOM||d.dom)}}i.appendChild(this.serializeNodeInner(o,r))}),n}serializeNodeInner(e,r){let{dom:n,contentDOM:i}=ty(p1(r),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,r,i)}return n}serializeNode(e,r={}){let n=this.serializeNodeInner(e,r);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,r);s&&((s.contentDOM||s.dom).appendChild(n),n=s.dom)}return n}serializeMark(e,r,n={}){let i=this.marks[e.type.name];return i&&ty(p1(n),i(e,r),null,e.attrs)}static renderSpec(e,r,n=null,i){return ty(e,r,n,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Vc(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let r=RF(e.nodes);return r.text||(r.text=n=>n.text),r}static marksFromSchema(e){return RF(e.marks)}}function RF(t){let e={};for(let r in t){let n=t[r].spec.toDOM;n&&(e[r]=n)}return e}function p1(t){return t.document||window.document}const MF=new WeakMap;function Rge(t){let e=MF.get(t);return e===void 0&&MF.set(t,e=Mge(t)),e}function Mge(t){let e=null;function r(n){if(n&&typeof n=="object")if(Array.isArray(n))if(typeof n[0]=="string")e||(e=[]),e.push(n);else for(let i=0;i<n.length;i++)r(n[i]);else for(let i in n)r(n[i])}return r(t),e}function ty(t,e,r,n){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(n&&(s=Rge(n))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(r=i.slice(0,o),i=i.slice(o+1));let a,l=r?t.createElementNS(r,i):t.createElement(i),c=e[1],d=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){d=2;for(let h in c)if(c[h]!=null){let f=h.indexOf(" ");f>0?l.setAttributeNS(h.slice(0,f),h.slice(f+1),c[h]):h=="style"&&l.style?l.style.cssText=c[h]:l.setAttribute(h,c[h])}}for(let h=d;h<e.length;h++){let f=e[h];if(f===0){if(h<e.length-1||h>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:p,contentDOM:m}=ty(t,f,r,n);if(l.appendChild(p),m){if(a)throw new RangeError("Multiple content holes");a=m}}}return{dom:l,contentDOM:a}}const are=65535,lre=Math.pow(2,16);function $ge(t,e){return t+e*lre}function $F(t){return t&are}function Dge(t){return(t-(t&are))/lre}const cre=1,ure=2,ry=4,dre=8;class GP{constructor(e,r,n){this.pos=e,this.delInfo=r,this.recover=n}get deleted(){return(this.delInfo&dre)>0}get deletedBefore(){return(this.delInfo&(cre|ry))>0}get deletedAfter(){return(this.delInfo&(ure|ry))>0}get deletedAcross(){return(this.delInfo&ry)>0}}class ci{constructor(e,r=!1){if(this.ranges=e,this.inverted=r,!e.length&&ci.empty)return ci.empty}recover(e){let r=0,n=$F(e);if(!this.inverted)for(let i=0;i<n;i++)r+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[n*3]+r+Dge(e)}mapResult(e,r=1){return this._map(e,r,!1)}map(e,r=1){return this._map(e,r,!0)}_map(e,r,n){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],d=this.ranges[a+o],h=l+c;if(e<=h){let f=c?e==l?-1:e==h?1:r:r,p=l+i+(f<0?0:d);if(n)return p;let m=e==(r<0?l:h)?null:$ge(a/3,e-l),g=e==l?ure:e==h?cre:ry;return(r<0?e!=l:e!=h)&&(g|=dre),new GP(p,g,m)}i+=d-c}return n?e+i:new GP(e+i,0,null)}touches(e,r){let n=0,i=$F(r),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?n:0);if(l>e)break;let c=this.ranges[a+s],d=l+c;if(e<=d&&a==i*3)return!0;n+=this.ranges[a+o]-c}return!1}forEach(e){let r=this.inverted?2:1,n=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+r],d=this.ranges[i+n];e(a,a+c,l,l+d),s+=d-c}}invert(){return new ci(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?ci.empty:new ci(e<0?[0,-e,0]:[0,0,e])}}ci.empty=new ci([]);class pp{constructor(e,r,n=0,i=e?e.length:0){this.mirror=r,this.from=n,this.to=i,this._maps=e||[],this.ownData=!(e||r)}get maps(){return this._maps}slice(e=0,r=this.maps.length){return new pp(this._maps,this.mirror,e,r)}appendMap(e,r){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),r!=null&&this.setMirror(this._maps.length-1,r)}appendMapping(e){for(let r=0,n=this._maps.length;r<e._maps.length;r++){let i=e.getMirror(r);this.appendMap(e._maps[r],i!=null&&i<r?n+i:void 0)}}getMirror(e){if(this.mirror){for(let r=0;r<this.mirror.length;r++)if(this.mirror[r]==e)return this.mirror[r+(r%2?-1:1)]}}setMirror(e,r){this.mirror||(this.mirror=[]),this.mirror.push(e,r)}appendMappingInverted(e){for(let r=e.maps.length-1,n=this._maps.length+e._maps.length;r>=0;r--){let i=e.getMirror(r);this.appendMap(e._maps[r].invert(),i!=null&&i>r?n-i-1:void 0)}}invert(){let e=new pp;return e.appendMappingInverted(this),e}map(e,r=1){if(this.mirror)return this._map(e,r,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,r);return e}mapResult(e,r=1){return this._map(e,r,!1)}_map(e,r,n){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(e,r);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return n?e:new GP(e,i,null)}}const m1=Object.create(null);class vn{getMap(){return ci.empty}merge(e){return null}static fromJSON(e,r){if(!r||!r.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=m1[r.stepType];if(!n)throw new RangeError(`No step type ${r.stepType} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in m1)throw new RangeError("Duplicate use of step JSON ID "+e);return m1[e]=r,r.prototype.jsonID=e,r}}class br{constructor(e,r){this.doc=e,this.failed=r}static ok(e){return new br(e,null)}static fail(e){return new br(null,e)}static fromReplace(e,r,n,i){try{return br.ok(e.replace(r,n,i))}catch(s){if(s instanceof Hy)return br.fail(s.message);throw s}}}function iM(t,e,r){let n=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(iM(s.content,e,s))),s.isInline&&(s=e(s,r,i)),n.push(s)}return Q.fromArray(n)}class ka extends vn{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=e.resolve(this.from),i=n.node(n.sharedDepth(this.to)),s=new me(iM(r.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),r.openStart,r.openEnd);return br.fromReplace(e,this.from,this.to,s)}invert(){return new cs(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new ka(r.pos,n.pos,this.mark)}merge(e){return e instanceof ka&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ka(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new ka(r.from,r.to,e.markFromJSON(r.mark))}}vn.jsonID("addMark",ka);class cs extends vn{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=new me(iM(r.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),r.openStart,r.openEnd);return br.fromReplace(e,this.from,this.to,n)}invert(){return new ka(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new cs(r.pos,n.pos,this.mark)}merge(e){return e instanceof cs&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new cs(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new cs(r.from,r.to,e.markFromJSON(r.mark))}}vn.jsonID("removeMark",cs);class Ta extends vn{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return br.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.addToSet(r.marks));return br.fromReplace(e,this.pos,this.pos+1,new me(Q.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);if(r){let n=this.mark.addToSet(r.marks);if(n.length==r.marks.length){for(let i=0;i<r.marks.length;i++)if(!r.marks[i].isInSet(n))return new Ta(this.pos,r.marks[i]);return new Ta(this.pos,this.mark)}}return new Cc(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Ta(r.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ta(r.pos,e.markFromJSON(r.mark))}}vn.jsonID("addNodeMark",Ta);class Cc extends vn{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return br.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.removeFromSet(r.marks));return br.fromReplace(e,this.pos,this.pos+1,new me(Q.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);return!r||!this.mark.isInSet(r.marks)?this:new Ta(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Cc(r.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Cc(r.pos,e.markFromJSON(r.mark))}}vn.jsonID("removeNodeMark",Cc);class qr extends vn{constructor(e,r,n,i=!1){super(),this.from=e,this.to=r,this.slice=n,this.structure=i}apply(e){return this.structure&&YP(e,this.from,this.to)?br.fail("Structure replace would overwrite content"):br.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new ci([this.from,this.to-this.from,this.slice.size])}invert(e){return new qr(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deletedAcross&&n.deletedAcross?null:new qr(r.pos,Math.max(r.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof qr)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let r=this.slice.size+e.slice.size==0?me.empty:new me(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new qr(this.from,this.to+(e.to-e.from),r,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let r=this.slice.size+e.slice.size==0?me.empty:new me(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new qr(e.from,this.to,r,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new qr(r.from,r.to,me.fromJSON(e,r.slice),!!r.structure)}}vn.jsonID("replace",qr);class Vr extends vn{constructor(e,r,n,i,s,o,a=!1){super(),this.from=e,this.to=r,this.gapFrom=n,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(YP(e,this.from,this.gapFrom)||YP(e,this.gapTo,this.to)))return br.fail("Structure gap-replace would overwrite content");let r=e.slice(this.gapFrom,this.gapTo);if(r.openStart||r.openEnd)return br.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,r.content);return n?br.fromReplace(e,this.from,this.to,n):br.fail("Content does not fit in gap")}getMap(){return new ci([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let r=this.gapTo-this.gapFrom;return new Vr(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),i=this.from==this.gapFrom?r.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return r.deletedAcross&&n.deletedAcross||i<r.pos||s>n.pos?null:new Vr(r.pos,n.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number"||typeof r.gapFrom!="number"||typeof r.gapTo!="number"||typeof r.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Vr(r.from,r.to,r.gapFrom,r.gapTo,me.fromJSON(e,r.slice),r.insert,!!r.structure)}}vn.jsonID("replaceAround",Vr);function YP(t,e,r){let n=t.resolve(e),i=r-e,s=n.depth;for(;i>0&&s>0&&n.indexAfter(s)==n.node(s).childCount;)s--,i--;if(i>0){let o=n.node(s).maybeChild(n.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function Age(t,e,r,n){let i=[],s=[],o,a;t.doc.nodesBetween(e,r,(l,c,d)=>{if(!l.isInline)return;let h=l.marks;if(!n.isInSet(h)&&d.type.allowsMarkType(n.type)){let f=Math.max(c,e),p=Math.min(c+l.nodeSize,r),m=n.addToSet(h);for(let g=0;g<h.length;g++)h[g].isInSet(m)||(o&&o.to==f&&o.mark.eq(h[g])?o.to=p:i.push(o=new cs(f,p,h[g])));a&&a.to==f?a.to=p:s.push(a=new ka(f,p,n))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function Fge(t,e,r,n){let i=[],s=0;t.doc.nodesBetween(e,r,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(n instanceof N0){let c=o.marks,d;for(;d=n.isInSet(c);)(l||(l=[])).push(d),c=d.removeFromSet(c)}else n?n.isInSet(o.marks)&&(l=[n]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,r);for(let d=0;d<l.length;d++){let h=l[d],f;for(let p=0;p<i.length;p++){let m=i[p];m.step==s-1&&h.eq(i[p].style)&&(f=m)}f?(f.to=c,f.step=s):i.push({style:h,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>t.step(new cs(o.from,o.to,o.style)))}function sM(t,e,r,n=r.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),d=a+c.nodeSize,h=n.matchType(c.type);if(!h)o.push(new qr(a,d,me.empty));else{n=h;for(let f=0;f<c.marks.length;f++)r.allowsMarkType(c.marks[f].type)||t.step(new cs(a,d,c.marks[f]));if(i&&c.isText&&r.whitespace!="pre"){let f,p=/\r?\n|\r/g,m;for(;f=p.exec(c.text);)m||(m=new me(Q.from(r.schema.text(" ",r.allowedMarks(c.marks))),0,0)),o.push(new qr(a+f.index,a+f.index+f[0].length,m))}}a=d}if(!n.validEnd){let l=n.fillBefore(Q.empty,!0);t.replace(a,a,new me(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function qge(t,e,r){return(e==0||t.canReplace(e,t.childCount))&&(r==t.childCount||t.canReplace(0,r))}function nh(t){let r=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let n=t.depth,i=0,s=0;;--n){let o=t.$from.node(n),a=t.$from.index(n)+i,l=t.$to.indexAfter(n)-s;if(n<t.depth&&o.canReplace(a,l,r))return n;if(n==0||o.type.spec.isolating||!qge(o,a,l))break;a&&(i=1),l<o.childCount&&(s=1)}return null}function Lge(t,e,r){let{$from:n,$to:i,depth:s}=e,o=n.before(s+1),a=i.after(s+1),l=o,c=a,d=Q.empty,h=0;for(let m=s,g=!1;m>r;m--)g||n.index(m)>0?(g=!0,d=Q.from(n.node(m).copy(d)),h++):l--;let f=Q.empty,p=0;for(let m=s,g=!1;m>r;m--)g||i.after(m+1)<i.end(m)?(g=!0,f=Q.from(i.node(m).copy(f)),p++):c++;t.step(new Vr(l,c,o,a,new me(d.append(f),h,p),d.size-h,!0))}function oM(t,e,r=null,n=t){let i=Bge(t,e),s=i&&zge(n,e);return s?i.map(DF).concat({type:e,attrs:r}).concat(s.map(DF)):null}function DF(t){return{type:t,attrs:null}}function Bge(t,e){let{parent:r,startIndex:n,endIndex:i}=t,s=r.contentMatchAt(n).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return r.canReplaceWith(n,i,o)?s:null}function zge(t,e){let{parent:r,startIndex:n,endIndex:i}=t,s=r.child(n),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=n;l&&c<i;c++)l=l.matchType(r.child(c).type);return!l||!l.validEnd?null:o}function Vge(t,e,r){let n=Q.empty;for(let o=r.length-1;o>=0;o--){if(n.size){let a=r[o].type.contentMatch.matchFragment(n);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=Q.from(r[o].type.create(r[o].attrs,n))}let i=e.start,s=e.end;t.step(new Vr(i,s,i,s,new me(n,0,0),r.length,!0))}function Uge(t,e,r,n,i){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,r,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(n,l)&&Hge(t.doc,t.mapping.slice(s).map(a),n)){let c=null;if(n.schema.linebreakReplacement){let p=n.whitespace=="pre",m=!!n.contentMatch.matchType(n.schema.linebreakReplacement);p&&!m?c=!1:!p&&m&&(c=!0)}c===!1&&fre(t,o,a,s),sM(t,t.mapping.slice(s).map(a,1),n,void 0,c===null);let d=t.mapping.slice(s),h=d.map(a,1),f=d.map(a+o.nodeSize,1);return t.step(new Vr(h,f,h+1,f-1,new me(Q.from(n.create(l,null,o.marks)),0,0),1,!0)),c===!0&&hre(t,o,a,s),!1}})}function hre(t,e,r,n){e.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=t.mapping.slice(n).map(r+1+s+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function fre(t,e,r,n){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(n).map(r+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function Hge(t,e,r){let n=t.resolve(e),i=n.index();return n.parent.canReplaceWith(i,i+1,r)}function Wge(t,e,r,n,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");r||(r=s.type);let o=r.create(n,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!r.validContent(s.content))throw new RangeError("Invalid content for node type "+r.name);t.step(new Vr(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new me(Q.from(o),0,0),1,!0))}function vo(t,e,r=1,n){let i=t.resolve(e),s=i.depth-r,o=n&&n[n.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,d=r-2;c>s;c--,d--){let h=i.node(c),f=i.index(c);if(h.type.spec.isolating)return!1;let p=h.content.cutByIndex(f,h.childCount),m=n&&n[d+1];m&&(p=p.replaceChild(0,m.type.create(m.attrs)));let g=n&&n[d]||h;if(!h.canReplace(f+1,h.childCount)||!g.type.validContent(p))return!1}let a=i.indexAfter(s),l=n&&n[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function Kge(t,e,r=1,n){let i=t.doc.resolve(e),s=Q.empty,o=Q.empty;for(let a=i.depth,l=i.depth-r,c=r-1;a>l;a--,c--){s=Q.from(i.node(a).copy(s));let d=n&&n[c];o=Q.from(d?d.type.create(d.attrs,o):i.node(a).copy(o))}t.step(new qr(e,e,new me(s.append(o),r,r),!0))}function cl(t,e){let r=t.resolve(e),n=r.index();return pre(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function Gge(t,e){e.content.size||t.type.compatibleContent(e.type);let r=t.contentMatchAt(t.childCount),{linebreakReplacement:n}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==n?t.type.schema.nodes.text:s.type;if(r=r.matchType(o),!r||!t.type.allowsMarks(s.marks))return!1}return r.validEnd}function pre(t,e){return!!(t&&e&&!t.isLeaf&&Gge(t,e))}function C0(t,e,r=-1){let n=t.resolve(e);for(let i=n.depth;;i--){let s,o,a=n.index(i);if(i==n.depth?(s=n.nodeBefore,o=n.nodeAfter):r>0?(s=n.node(i+1),a++,o=n.node(i).maybeChild(a)):(s=n.node(i).maybeChild(a-1),o=n.node(i+1)),s&&!s.isTextblock&&pre(s,o)&&n.node(i).canReplace(a,a+1))return e;if(i==0)break;e=r<0?n.before(i):n.after(i)}}function Yge(t,e,r){let n=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-r),o=s.node().type;if(i&&o.inlineContent){let d=o.whitespace=="pre",h=!!o.contentMatch.matchType(i);d&&!h?n=!1:!d&&h&&(n=!0)}let a=t.steps.length;if(n===!1){let d=t.doc.resolve(e+r);fre(t,d.node(),d.before(),a)}o.inlineContent&&sM(t,e+r-1,o,s.node().contentMatchAt(s.index()),n==null);let l=t.mapping.slice(a),c=l.map(e-r);if(t.step(new qr(c,l.map(e+r,-1),me.empty,!0)),n===!0){let d=t.doc.resolve(c);hre(t,d.node(),d.before(),t.steps.length)}return t}function Qge(t,e,r){let n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),r))return e;if(n.parentOffset==0)for(let i=n.depth-1;i>=0;i--){let s=n.index(i);if(n.node(i).canReplaceWith(s,s,r))return n.before(i+1);if(s>0)return null}if(n.parentOffset==n.parent.content.size)for(let i=n.depth-1;i>=0;i--){let s=n.indexAfter(i);if(n.node(i).canReplaceWith(s,s,r))return n.after(i+1);if(s<n.node(i).childCount)return null}return null}function mre(t,e,r){let n=t.resolve(e);if(!r.content.size)return e;let i=r.content;for(let s=0;s<r.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(r.openStart==0&&r.size?2:1);s++)for(let o=n.depth;o>=0;o--){let a=o==n.depth?0:n.pos<=(n.start(o+1)+n.end(o+1))/2?-1:1,l=n.index(o)+(a>0?1:0),c=n.node(o),d=!1;if(s==1)d=c.canReplace(l,l,i);else{let h=c.contentMatchAt(l).findWrapping(i.firstChild.type);d=h&&c.canReplaceWith(l,l,h[0])}if(d)return a==0?n.pos:a<0?n.before(o+1):n.after(o+1)}return null}function k0(t,e,r=e,n=me.empty){if(e==r&&!n.size)return null;let i=t.resolve(e),s=t.resolve(r);return gre(i,s,n)?new qr(e,r,n):new Xge(i,s,n).fit()}function gre(t,e,r){return!r.openStart&&!r.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),r.content)}class Xge{constructor(e,r,n){this.$from=e,this.$to=r,this.unplaced=n,this.frontier=[],this.placed=Q.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=Q.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(e<0?this.$to:n.doc.resolve(e));if(!i)return null;let s=this.placed,o=n.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new me(s,o,a);return e>-1?new Vr(n.pos,e,this.$to.pos,this.$to.end(),l,r):l.size||n.pos!=this.$to.pos?new qr(n.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let r=this.unplaced.content,n=0,i=this.unplaced.openEnd;n<e;n++){let s=r.firstChild;if(r.childCount>1&&(i=0),s.type.spec.isolating&&i<=n){e=n;break}r=s.content}for(let r=1;r<=2;r++)for(let n=r==1?e:this.unplaced.openStart;n>=0;n--){let i,s=null;n?(s=g1(this.unplaced.content,n-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],d,h=null;if(r==1&&(o?c.matchType(o.type)||(h=c.fillBefore(Q.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:n,frontierDepth:a,parent:s,inject:h};if(r==2&&o&&(d=c.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:a,parent:s,wrap:d};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:r,openEnd:n}=this.unplaced,i=g1(e,r);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new me(e,r+1,Math.max(n,i.size+r>=e.size-n?r+1:0)),!0)}dropNode(){let{content:e,openStart:r,openEnd:n}=this.unplaced,i=g1(e,r);if(i.childCount<=1&&r>0){let s=e.size-r<=r+i.size;this.unplaced=new me(cf(e,r-1,1),r-1,s?r-1:n)}else this.unplaced=new me(cf(e,r,1),r,n)}placeNodes({sliceDepth:e,frontierDepth:r,parent:n,inject:i,wrap:s}){for(;this.depth>r;)this.closeFrontierNode();if(s)for(let g=0;g<s.length;g++)this.openFrontierNode(s[g]);let o=this.unplaced,a=n?n.content:o.content,l=o.openStart-e,c=0,d=[],{match:h,type:f}=this.frontier[r];if(i){for(let g=0;g<i.childCount;g++)d.push(i.child(g));h=h.matchFragment(i)}let p=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let g=a.child(c),b=h.matchType(g.type);if(!b)break;c++,(c>1||l==0||g.content.size)&&(h=b,d.push(yre(g.mark(f.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?p:-1)))}let m=c==a.childCount;m||(p=-1),this.placed=uf(this.placed,r,Q.from(d)),this.frontier[r].match=h,m&&p<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,b=a;g<p;g++){let y=b.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),b=y.content}this.unplaced=m?e==0?me.empty:new me(cf(o.content,e-1,1),e-1,p<0?o.openEnd:e-1):new me(cf(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],r;if(!e.type.isTextblock||!y1(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(r=this.findCloseLevel(this.$to))&&r.depth==this.depth)return-1;let{depth:n}=this.$to,i=this.$to.after(n);for(;n>1&&i==this.$to.end(--n);)++i;return i}findCloseLevel(e){e:for(let r=Math.min(this.depth,e.depth);r>=0;r--){let{match:n,type:i}=this.frontier[r],s=r<e.depth&&e.end(r+1)==e.pos+(e.depth-(r+1)),o=y1(e,r,i,n,s);if(o){for(let a=r-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],d=y1(e,a,c,l,!0);if(!d||d.childCount)continue e}return{depth:r,fit:o,move:s?e.doc.resolve(e.after(r+1)):e}}}}close(e){let r=this.findCloseLevel(e);if(!r)return null;for(;this.depth>r.depth;)this.closeFrontierNode();r.fit.childCount&&(this.placed=uf(this.placed,r.depth,r.fit)),e=r.move;for(let n=r.depth+1;n<=e.depth;n++){let i=e.node(n),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(n));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,r=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=uf(this.placed,this.depth,Q.from(e.create(r,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let r=this.frontier.pop().match.fillBefore(Q.empty,!0);r.childCount&&(this.placed=uf(this.placed,this.frontier.length,r))}}function cf(t,e,r){return e==0?t.cutByIndex(r,t.childCount):t.replaceChild(0,t.firstChild.copy(cf(t.firstChild.content,e-1,r)))}function uf(t,e,r){return e==0?t.append(r):t.replaceChild(t.childCount-1,t.lastChild.copy(uf(t.lastChild.content,e-1,r)))}function g1(t,e){for(let r=0;r<e;r++)t=t.firstChild.content;return t}function yre(t,e,r){if(e<=0)return t;let n=t.content;return e>1&&(n=n.replaceChild(0,yre(n.firstChild,e-1,n.childCount==1?r-1:0))),e>0&&(n=t.type.contentMatch.fillBefore(n).append(n),r<=0&&(n=n.append(t.type.contentMatch.matchFragment(n).fillBefore(Q.empty,!0)))),t.copy(n)}function y1(t,e,r,n,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!r.compatibleContent(s.type))return null;let a=n.fillBefore(s.content,!0,o);return a&&!Jge(r,s.content,o)?a:null}function Jge(t,e,r){for(let n=r;n<e.childCount;n++)if(!t.allowsMarks(e.child(n).marks))return!0;return!1}function Zge(t){return t.spec.defining||t.spec.definingForContent}function eye(t,e,r,n){if(!n.size)return t.deleteRange(e,r);let i=t.doc.resolve(e),s=t.doc.resolve(r);if(gre(i,s,n))return t.step(new qr(e,r,n));let o=bre(i,s);o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let f=i.depth,p=i.pos-1;f>0;f--,p--){let m=i.node(f).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;o.indexOf(f)>-1?a=f:i.before(f)==p&&o.splice(1,0,-f)}let l=o.indexOf(a),c=[],d=n.openStart;for(let f=n.content,p=0;;p++){let m=f.firstChild;if(c.push(m),p==n.openStart)break;f=m.content}for(let f=d-1;f>=0;f--){let p=c[f],m=Zge(p.type);if(m&&!p.sameMarkup(i.node(Math.abs(a)-1)))d=f;else if(m||!p.type.isTextblock)break}for(let f=n.openStart;f>=0;f--){let p=(f+d+1)%(n.openStart+1),m=c[p];if(m)for(let g=0;g<o.length;g++){let b=o[(g+l)%o.length],y=!0;b<0&&(y=!1,b=-b);let v=i.node(b-1),w=i.index(b-1);if(v.canReplaceWith(w,w,m.type,m.marks))return t.replace(i.before(b),y?s.after(b):r,new me(vre(n.content,0,n.openStart,p),p,n.openEnd))}}let h=t.steps.length;for(let f=o.length-1;f>=0&&(t.replace(e,r,n),!(t.steps.length>h));f--){let p=o[f];p<0||(e=i.before(p),r=s.after(p))}}function vre(t,e,r,n,i){if(e<r){let s=t.firstChild;t=t.replaceChild(0,s.copy(vre(s.content,e+1,r,n,s)))}if(e>n){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(Q.empty,!0))}return t}function tye(t,e,r,n){if(!n.isInline&&e==r&&t.doc.resolve(e).parent.content.size){let i=Qge(t.doc,e,n.type);i!=null&&(e=r=i)}t.replaceRange(e,r,new me(Q.from(n),0,0))}function rye(t,e,r){let n=t.doc.resolve(e),i=t.doc.resolve(r),s=bre(n,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||n.node(a).type.contentMatch.validEnd)return t.delete(n.start(a),i.end(a));if(a>0&&(l||n.node(a-1).canReplace(n.index(a-1),i.indexAfter(a-1))))return t.delete(n.before(a),i.after(a))}for(let o=1;o<=n.depth&&o<=i.depth;o++)if(e-n.start(o)==n.depth-o&&r>n.end(o)&&i.end(o)-r!=i.depth-o&&n.start(o-1)==i.start(o-1)&&n.node(o-1).canReplace(n.index(o-1),i.index(o-1)))return t.delete(n.before(o),r);t.delete(e,r)}function bre(t,e){let r=[],n=Math.min(t.depth,e.depth);for(let i=n;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&r.push(i)}return r}class Zu extends vn{constructor(e,r,n){super(),this.pos=e,this.attr=r,this.value=n}apply(e){let r=e.nodeAt(this.pos);if(!r)return br.fail("No node at attribute step's position");let n=Object.create(null);for(let s in r.attrs)n[s]=r.attrs[s];n[this.attr]=this.value;let i=r.type.create(n,null,r.marks);return br.fromReplace(e,this.pos,this.pos+1,new me(Q.from(i),0,r.isLeaf?0:1))}getMap(){return ci.empty}invert(e){return new Zu(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Zu(r.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.pos!="number"||typeof r.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Zu(r.pos,r.attr,r.value)}}vn.jsonID("attr",Zu);class mp extends vn{constructor(e,r){super(),this.attr=e,this.value=r}apply(e){let r=Object.create(null);for(let i in e.attrs)r[i]=e.attrs[i];r[this.attr]=this.value;let n=e.type.create(r,e.content,e.marks);return br.ok(n)}getMap(){return ci.empty}invert(e){return new mp(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new mp(r.attr,r.value)}}vn.jsonID("docAttr",mp);let Rd=class extends Error{};Rd=function t(e){let r=Error.call(this,e);return r.__proto__=t.prototype,r};Rd.prototype=Object.create(Error.prototype);Rd.prototype.constructor=Rd;Rd.prototype.name="TransformError";class xre{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new pp}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let r=this.maybeStep(e);if(r.failed)throw new Rd(r.failed);return this}maybeStep(e){let r=e.apply(this.doc);return r.failed||this.addStep(e,r.doc),r}get docChanged(){return this.steps.length>0}addStep(e,r){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=r}replace(e,r=e,n=me.empty){let i=k0(this.doc,e,r,n);return i&&this.step(i),this}replaceWith(e,r,n){return this.replace(e,r,new me(Q.from(n),0,0))}delete(e,r){return this.replace(e,r,me.empty)}insert(e,r){return this.replaceWith(e,e,r)}replaceRange(e,r,n){return eye(this,e,r,n),this}replaceRangeWith(e,r,n){return tye(this,e,r,n),this}deleteRange(e,r){return rye(this,e,r),this}lift(e,r){return Lge(this,e,r),this}join(e,r=1){return Yge(this,e,r),this}wrap(e,r){return Vge(this,e,r),this}setBlockType(e,r=e,n,i=null){return Uge(this,e,r,n,i),this}setNodeMarkup(e,r,n=null,i){return Wge(this,e,r,n,i),this}setNodeAttribute(e,r,n){return this.step(new Zu(e,r,n)),this}setDocAttribute(e,r){return this.step(new mp(e,r)),this}addNodeMark(e,r){return this.step(new Ta(e,r)),this}removeNodeMark(e,r){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(r instanceof Ot)r.isInSet(n.marks)&&this.step(new Cc(e,r));else{let i=n.marks,s,o=[];for(;s=r.isInSet(i);)o.push(new Cc(e,s)),i=s.removeFromSet(i);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,r=1,n){return Kge(this,e,r,n),this}addMark(e,r,n){return Age(this,e,r,n),this}removeMark(e,r,n){return Fge(this,e,r,n),this}clearIncompatible(e,r,n){return sM(this,e,r,n),this}}const v1=Object.create(null);class Ge{constructor(e,r,n){this.$anchor=e,this.$head=r,this.ranges=n||[new nye(e.min(r),e.max(r))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let r=0;r<e.length;r++)if(e[r].$from.pos!=e[r].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,r=me.empty){let n=r.content.lastChild,i=null;for(let a=0;a<r.openEnd;a++)i=n,n=n.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],d=e.mapping.slice(s);e.replaceRange(d.map(l.pos),d.map(c.pos),a?me.empty:r),a==0&&qF(e,s,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,r){let n=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(n),c=l.map(o.pos),d=l.map(a.pos);s?e.deleteRange(c,d):(e.replaceRangeWith(c,d,r),qF(e,n,r.isInline?-1:1))}}static findFrom(e,r,n=!1){let i=e.parent.inlineContent?new Be(e):Su(e.node(0),e.parent,e.pos,e.index(),r,n);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=r<0?Su(e.node(0),e.node(s),e.before(s+1),e.index(s),r,n):Su(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,r,n);if(o)return o}return null}static near(e,r=1){return this.findFrom(e,r)||this.findFrom(e,-r)||new fi(e.node(0))}static atStart(e){return Su(e,e,0,0,1)||new fi(e)}static atEnd(e){return Su(e,e,e.content.size,e.childCount,-1)||new fi(e)}static fromJSON(e,r){if(!r||!r.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=v1[r.type];if(!n)throw new RangeError(`No selection type ${r.type} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in v1)throw new RangeError("Duplicate use of selection JSON ID "+e);return v1[e]=r,r.prototype.jsonID=e,r}getBookmark(){return Be.between(this.$anchor,this.$head).getBookmark()}}Ge.prototype.visible=!0;class nye{constructor(e,r){this.$from=e,this.$to=r}}let AF=!1;function FF(t){!AF&&!t.parent.inlineContent&&(AF=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Be extends Ge{constructor(e,r=e){FF(e),FF(r),super(e,r)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,r){let n=e.resolve(r.map(this.head));if(!n.parent.inlineContent)return Ge.near(n);let i=e.resolve(r.map(this.anchor));return new Be(i.parent.inlineContent?i:n,n)}replace(e,r=me.empty){if(super.replace(e,r),r==me.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof Be&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new T0(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,r){if(typeof r.anchor!="number"||typeof r.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Be(e.resolve(r.anchor),e.resolve(r.head))}static create(e,r,n=r){let i=e.resolve(r);return new this(i,n==r?i:e.resolve(n))}static between(e,r,n){let i=e.pos-r.pos;if((!n||i)&&(n=i>=0?1:-1),!r.parent.inlineContent){let s=Ge.findFrom(r,n,!0)||Ge.findFrom(r,-n,!0);if(s)r=s.$head;else return Ge.near(r,n)}return e.parent.inlineContent||(i==0?e=r:(e=(Ge.findFrom(e,-n,!0)||Ge.findFrom(e,n,!0)).$anchor,e.pos<r.pos!=i<0&&(e=r))),new Be(e,r)}}Ge.jsonID("text",Be);class T0{constructor(e,r){this.anchor=e,this.head=r}map(e){return new T0(e.map(this.anchor),e.map(this.head))}resolve(e){return Be.between(e.resolve(this.anchor),e.resolve(this.head))}}class Re extends Ge{constructor(e){let r=e.nodeAfter,n=e.node(0).resolve(e.pos+r.nodeSize);super(e,n),this.node=r}map(e,r){let{deleted:n,pos:i}=r.mapResult(this.anchor),s=e.resolve(i);return n?Ge.near(s):new Re(s)}content(){return new me(Q.from(this.node),0,0)}eq(e){return e instanceof Re&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new aM(this.anchor)}static fromJSON(e,r){if(typeof r.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Re(e.resolve(r.anchor))}static create(e,r){return new Re(e.resolve(r))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Re.prototype.visible=!1;Ge.jsonID("node",Re);class aM{constructor(e){this.anchor=e}map(e){let{deleted:r,pos:n}=e.mapResult(this.anchor);return r?new T0(n,n):new aM(n)}resolve(e){let r=e.resolve(this.anchor),n=r.nodeAfter;return n&&Re.isSelectable(n)?new Re(r):Ge.near(r)}}class fi extends Ge{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,r=me.empty){if(r==me.empty){e.delete(0,e.doc.content.size);let n=Ge.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,r)}toJSON(){return{type:"all"}}static fromJSON(e){return new fi(e)}map(e){return new fi(e)}eq(e){return e instanceof fi}getBookmark(){return iye}}Ge.jsonID("all",fi);const iye={map(){return this},resolve(t){return new fi(t)}};function Su(t,e,r,n,i,s=!1){if(e.inlineContent)return Be.create(t,r);for(let o=n-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&Re.isSelectable(a))return Re.create(t,r-(i<0?a.nodeSize:0))}else{let l=Su(t,a,r+i,i<0?a.childCount:0,i,s);if(l)return l}r+=a.nodeSize*i}return null}function qF(t,e,r){let n=t.steps.length-1;if(n<e)return;let i=t.steps[n];if(!(i instanceof qr||i instanceof Vr))return;let s=t.mapping.maps[n],o;s.forEach((a,l,c,d)=>{o==null&&(o=d)}),t.setSelection(Ge.near(t.doc.resolve(o),r))}const LF=1,vg=2,BF=4;class sye extends xre{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|LF)&~vg,this.storedMarks=null,this}get selectionSet(){return(this.updated&LF)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=vg,this}ensureMarks(e){return Ot.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&vg)>0}addStep(e,r){super.addStep(e,r),this.updated=this.updated&~vg,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,r=!0){let n=this.selection;return r&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||Ot.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,r,n){let i=this.doc.type.schema;if(r==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(n==null&&(n=r),!e)return this.deleteRange(r,n);let s=this.storedMarks;if(!s){let o=this.doc.resolve(r);s=n==r?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(r,n,i.text(e,s)),!this.selection.empty&&this.selection.to==r+e.length&&this.setSelection(Ge.near(this.selection.$to)),this}}setMeta(e,r){return this.meta[typeof e=="string"?e:e.key]=r,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=BF,this}get scrolledIntoView(){return(this.updated&BF)>0}}function zF(t,e){return!e||!t?t:t.bind(e)}class df{constructor(e,r,n){this.name=e,this.init=zF(r.init,n),this.apply=zF(r.apply,n)}}const oye=[new df("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new df("selection",{init(t,e){return t.selection||Ge.atStart(e.doc)},apply(t){return t.selection}}),new df("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,r,n){return n.selection.$cursor?t.storedMarks:null}}),new df("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class b1{constructor(e,r){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=oye.slice(),r&&r.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new df(n.key,n.spec.state,n))})}}class qu{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,r=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=r){let i=this.config.plugins[n];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let r=[e],n=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,d=l<r.length&&a.spec.appendTransaction.call(a,l?r.slice(l):r,c,n);if(d&&n.filterTransaction(d,o)){if(d.setMeta("appendedTransaction",e),!i){i=[];for(let h=0;h<this.config.plugins.length;h++)i.push(h<o?{state:n,n:r.length}:{state:this,n:0})}r.push(d),n=n.applyInner(d),s=!0}i&&(i[o]={state:n,n:r.length})}}if(!s)return{state:n,transactions:r}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let r=new qu(this.config),n=this.config.fields;for(let i=0;i<n.length;i++){let s=n[i];r[s.name]=s.apply(e,this[s.name],this,r)}return r}get tr(){return new sye(this)}static create(e){let r=new b1(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new qu(r);for(let i=0;i<r.fields.length;i++)n[r.fields[i].name]=r.fields[i].init(e,n);return n}reconfigure(e){let r=new b1(this.schema,e.plugins),n=r.fields,i=new qu(r);for(let s=0;s<n.length;s++){let o=n[s].name;i[o]=this.hasOwnProperty(o)?this[o]:n[s].init(e,i)}return i}toJSON(e){let r={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(r.storedMarks=this.storedMarks.map(n=>n.toJSON())),e&&typeof e=="object")for(let n in e){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[n],s=i.spec.state;s&&s.toJSON&&(r[n]=s.toJSON.call(i,this[i.key]))}return r}static fromJSON(e,r,n){if(!r)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new b1(e.schema,e.plugins),s=new qu(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Ba.fromJSON(e.schema,r.doc);else if(o.name=="selection")s.selection=Ge.fromJSON(s.doc,r.selection);else if(o.name=="storedMarks")r.storedMarks&&(s.storedMarks=r.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let a in n){let l=n[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(r,a)){s[o.name]=c.fromJSON.call(l,e,r[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function wre(t,e,r){for(let n in t){let i=t[n];i instanceof Function?i=i.bind(e):n=="handleDOMEvents"&&(i=wre(i,e,{})),r[n]=i}return r}class Xt{constructor(e){this.spec=e,this.props={},e.props&&wre(e.props,this,this.props),this.key=e.key?e.key.key:Sre("plugin")}getState(e){return e[this.key]}}const x1=Object.create(null);function Sre(t){return t in x1?t+"$"+ ++x1[t]:(x1[t]=0,t+"$")}class Mr{constructor(e="key"){this.key=Sre(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const lM=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function _re(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("backward",t):r.parentOffset>0)?null:r}const Ere=(t,e,r)=>{let n=_re(t,r);if(!n)return!1;let i=cM(n);if(!i){let o=n.blockRange(),a=o&&nh(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(Rre(t,i,e,-1))return!0;if(n.parent.content.size==0&&(Md(s,"end")||Re.isSelectable(s)))for(let o=n.depth;;o--){let a=k0(t.doc,n.before(o),n.after(o),me.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(Md(s,"end")?Ge.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):Re.create(l.doc,i.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||n.node(o-1).childCount>1)break}return s.isAtom&&i.depth==n.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},aye=(t,e,r)=>{let n=_re(t,r);if(!n)return!1;let i=cM(n);return i?Nre(t,i,e):!1},lye=(t,e,r)=>{let n=kre(t,r);if(!n)return!1;let i=uM(n);return i?Nre(t,i,e):!1};function Nre(t,e,r){let n=e.nodeBefore,i=n,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let d=i.lastChild;if(!d)return!1;i=d}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let d=a.firstChild;if(!d)return!1;a=d}let c=k0(t.doc,s,l,me.empty);if(!c||c.from!=s||c instanceof qr&&c.slice.size>=l-s)return!1;if(r){let d=t.tr.step(c);d.setSelection(Be.create(d.doc,s)),r(d.scrollIntoView())}return!0}function Md(t,e,r=!1){for(let n=t;n;n=e=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(r&&n.childCount!=1)return!1}return!1}const Cre=(t,e,r)=>{let{$head:n,empty:i}=t.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("backward",t):n.parentOffset>0)return!1;s=cM(n)}let o=s&&s.nodeBefore;return!o||!Re.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Re.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function cM(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function kre(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)?null:r}const Tre=(t,e,r)=>{let n=kre(t,r);if(!n)return!1;let i=uM(n);if(!i)return!1;let s=i.nodeAfter;if(Rre(t,i,e,1))return!0;if(n.parent.content.size==0&&(Md(s,"start")||Re.isSelectable(s))){let o=k0(t.doc,n.before(),n.after(),me.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Md(s,"start")?Ge.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):Re.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==n.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},Ore=(t,e,r)=>{let{$head:n,empty:i}=t.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)return!1;s=uM(n)}let o=s&&s.nodeAfter;return!o||!Re.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Re.create(t.doc,s.pos)).scrollIntoView()),!0)};function uM(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let r=t.node(e);if(t.index(e)+1<r.childCount)return t.doc.resolve(t.after(e+1));if(r.type.spec.isolating)break}return null}const cye=(t,e)=>{let r=t.selection,n=r instanceof Re,i;if(n){if(r.node.isTextblock||!cl(t.doc,r.from))return!1;i=r.from}else if(i=C0(t.doc,r.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);n&&s.setSelection(Re.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},uye=(t,e)=>{let r=t.selection,n;if(r instanceof Re){if(r.node.isTextblock||!cl(t.doc,r.to))return!1;n=r.to}else if(n=C0(t.doc,r.to,1),n==null)return!1;return e&&e(t.tr.join(n).scrollIntoView()),!0},dye=(t,e)=>{let{$from:r,$to:n}=t.selection,i=r.blockRange(n),s=i&&nh(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},jre=(t,e)=>{let{$head:r,$anchor:n}=t.selection;return!r.parent.type.spec.code||!r.sameParent(n)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function dM(t){for(let e=0;e<t.edgeCount;e++){let{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}const hye=(t,e)=>{let{$head:r,$anchor:n}=t.selection;if(!r.parent.type.spec.code||!r.sameParent(n))return!1;let i=r.node(-1),s=r.indexAfter(-1),o=dM(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=r.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(Ge.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},Pre=(t,e)=>{let r=t.selection,{$from:n,$to:i}=r;if(r instanceof fi||n.parent.inlineContent||i.parent.inlineContent)return!1;let s=dM(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!n.parentOffset&&i.index()<i.parent.childCount?n:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(Be.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},Ire=(t,e)=>{let{$cursor:r}=t.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let s=r.before();if(vo(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let n=r.blockRange(),i=n&&nh(n);return i==null?!1:(e&&e(t.tr.lift(n,i).scrollIntoView()),!0)};function fye(t){return(e,r)=>{let{$from:n,$to:i}=e.selection;if(e.selection instanceof Re&&e.selection.node.isBlock)return!n.parentOffset||!vo(e.doc,n.pos)?!1:(r&&r(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let s=[],o,a,l=!1,c=!1;for(let p=n.depth;;p--)if(n.node(p).isBlock){l=n.end(p)==n.pos+(n.depth-p),c=n.start(p)==n.pos-(n.depth-p),a=dM(n.node(p-1).contentMatchAt(n.indexAfter(p-1))),s.unshift(l&&a?{type:a}:null),o=p;break}else{if(p==1)return!1;s.unshift(null)}let d=e.tr;(e.selection instanceof Be||e.selection instanceof fi)&&d.deleteSelection();let h=d.mapping.map(n.pos),f=vo(d.doc,h,s.length,s);if(f||(s[0]=a?{type:a}:null,f=vo(d.doc,h,s.length,s)),!f)return!1;if(d.split(h,s.length,s),!l&&c&&n.node(o).type!=a){let p=d.mapping.map(n.before(o)),m=d.doc.resolve(p);a&&n.node(o-1).canReplaceWith(m.index(),m.index()+1,a)&&d.setNodeMarkup(d.mapping.map(n.before(o)),a)}return r&&r(d.scrollIntoView()),!0}}const pye=fye(),mye=(t,e)=>{let{$from:r,to:n}=t.selection,i,s=r.sharedDepth(n);return s==0?!1:(i=r.before(s),e&&e(t.tr.setSelection(Re.create(t.doc,i))),!0)};function gye(t,e,r){let n=e.nodeBefore,i=e.nodeAfter,s=e.index();return!n||!i||!n.type.compatibleContent(i.type)?!1:!n.content.size&&e.parent.canReplace(s-1,s)?(r&&r(t.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||cl(t.doc,e.pos))?!1:(r&&r(t.tr.join(e.pos).scrollIntoView()),!0)}function Rre(t,e,r,n){let i=e.nodeBefore,s=e.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&gye(t,e,r))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(r){let p=e.pos+s.nodeSize,m=Q.empty;for(let y=o.length-1;y>=0;y--)m=Q.from(o[y].create(null,m));m=Q.from(i.copy(m));let g=t.tr.step(new Vr(e.pos-1,p,e.pos,p,new me(m,1,0),o.length,!0)),b=g.doc.resolve(p+2*o.length);b.nodeAfter&&b.nodeAfter.type==i.type&&cl(g.doc,b.pos)&&g.join(b.pos),r(g.scrollIntoView())}return!0}let d=s.type.spec.isolating||n>0&&l?null:Ge.findFrom(e,1),h=d&&d.$from.blockRange(d.$to),f=h&&nh(h);if(f!=null&&f>=e.depth)return r&&r(t.tr.lift(h,f).scrollIntoView()),!0;if(c&&Md(s,"start",!0)&&Md(i,"end")){let p=i,m=[];for(;m.push(p),!p.isTextblock;)p=p.lastChild;let g=s,b=1;for(;!g.isTextblock;g=g.firstChild)b++;if(p.canReplace(p.childCount,p.childCount,g.content)){if(r){let y=Q.empty;for(let w=m.length-1;w>=0;w--)y=Q.from(m[w].copy(y));let v=t.tr.step(new Vr(e.pos-m.length,e.pos+s.nodeSize,e.pos+b,e.pos+s.nodeSize-b,new me(y,m.length,0),0,!0));r(v.scrollIntoView())}return!0}}return!1}function Mre(t){return function(e,r){let n=e.selection,i=t<0?n.$from:n.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(r&&r(e.tr.setSelection(Be.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const yye=Mre(-1),vye=Mre(1);function bye(t,e=null){return function(r,n){let{$from:i,$to:s}=r.selection,o=i.blockRange(s),a=o&&oM(o,t,e);return a?(n&&n(r.tr.wrap(o,a).scrollIntoView()),!0):!1}}function VF(t,e=null){return function(r,n){let i=!1;for(let s=0;s<r.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=r.selection.ranges[s];r.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let d=r.doc.resolve(c),h=d.index();i=d.parent.canReplaceWith(h,h+1,t)}})}if(!i)return!1;if(n){let s=r.tr;for(let o=0;o<r.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=r.selection.ranges[o];s.setBlockType(a,l,t,e)}n(s.scrollIntoView())}return!0}}function hM(...t){return function(e,r,n){for(let i=0;i<t.length;i++)if(t[i](e,r,n))return!0;return!1}}hM(lM,Ere,Cre);hM(lM,Tre,Ore);hM(jre,Pre,Ire,pye);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function xye(t,e=null){return function(r,n){let{$from:i,$to:s}=r.selection,o=i.blockRange(s);if(!o)return!1;let a=n?r.tr:null;return wye(a,o,t,e)?(n&&n(a.scrollIntoView()),!0):!1}}function wye(t,e,r,n=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(r)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);s=new Ky(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new Ky(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=oM(s,r,n,e);return a?(t&&Sye(t,e,a,i,r),!0):!1}function Sye(t,e,r,n,i){let s=Q.empty;for(let d=r.length-1;d>=0;d--)s=Q.from(r[d].type.create(r[d].attrs,s));t.step(new Vr(e.start-(n?2:0),e.end,e.start,e.end,new me(s,0,0),r.length,!0));let o=0;for(let d=0;d<r.length;d++)r[d].type==i&&(o=d+1);let a=r.length-o,l=e.start+r.length-(n?2:0),c=e.parent;for(let d=e.startIndex,h=e.endIndex,f=!0;d<h;d++,f=!1)!f&&vo(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(d).nodeSize;return t}function _ye(t){return function(e,r){let{$from:n,$to:i}=e.selection,s=n.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?r?n.node(s.depth-1).type==t?Eye(e,r,t,s):Nye(e,r,s):!0:!1}}function Eye(t,e,r,n){let i=t.tr,s=n.end,o=n.$to.end(n.depth);s<o&&(i.step(new Vr(s-1,o,s,o,new me(Q.from(r.create(null,n.parent.copy())),1,0),1,!0)),n=new Ky(i.doc.resolve(n.$from.pos),i.doc.resolve(o),n.depth));const a=nh(n);if(a==null)return!1;i.lift(n,a);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return cl(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function Nye(t,e,r){let n=t.tr,i=r.parent;for(let p=r.end,m=r.endIndex-1,g=r.startIndex;m>g;m--)p-=i.child(m).nodeSize,n.delete(p-1,p+1);let s=n.doc.resolve(r.start),o=s.nodeAfter;if(n.mapping.map(r.end)!=r.start+s.nodeAfter.nodeSize)return!1;let a=r.startIndex==0,l=r.endIndex==i.childCount,c=s.node(-1),d=s.index(-1);if(!c.canReplace(d+(a?0:1),d+1,o.content.append(l?Q.empty:Q.from(i))))return!1;let h=s.pos,f=h+o.nodeSize;return n.step(new Vr(h-(a?1:0),f+(l?1:0),h+1,f-1,new me((a?Q.empty:Q.from(i.copy(Q.empty))).append(l?Q.empty:Q.from(i.copy(Q.empty))),a?0:1,l?0:1),a?0:1)),e(n.scrollIntoView()),!0}function Cye(t){return function(e,r){let{$from:n,$to:i}=e.selection,s=n.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(r){let c=l.lastChild&&l.lastChild.type==a.type,d=Q.from(c?t.create():null),h=new me(Q.from(t.create(null,Q.from(a.type.create(null,d)))),c?3:1,0),f=s.start,p=s.end;r(e.tr.step(new Vr(f-(c?3:1),p,f,p,h,1,!0)).scrollIntoView())}return!0}}const tn=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},$d=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let QP=null;const no=function(t,e,r){let n=QP||(QP=document.createRange());return n.setEnd(t,r??t.nodeValue.length),n.setStart(t,e||0),n},kye=function(){QP=null},kc=function(t,e,r,n){return r&&(UF(t,e,r,n,-1)||UF(t,e,r,n,1))},Tye=/^(img|br|input|textarea|hr)$/i;function UF(t,e,r,n,i){for(var s;;){if(t==r&&e==n)return!0;if(e==(i<0?0:Ii(t))){let o=t.parentNode;if(!o||o.nodeType!=1||tm(t)||Tye.test(t.nodeName)||t.contentEditable=="false")return!1;e=tn(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?Ii(t):0}else return!1}}function Ii(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Oye(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Ii(t)}else if(t.parentNode&&!tm(t))e=tn(t),t=t.parentNode;else return null}}function jye(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!tm(t))e=tn(t)+1,t=t.parentNode;else return null}}function Pye(t,e,r){for(let n=e==0,i=e==Ii(t);n||i;){if(t==r)return!0;let s=tn(t);if(t=t.parentNode,!t)return!1;n=n&&s==0,i=i&&s==Ii(t)}}function tm(t){let e;for(let r=t;r&&!(e=r.pmViewDesc);r=r.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const O0=function(t){return t.focusNode&&kc(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function kl(t,e){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=t,r.key=r.code=e,r}function Iye(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Rye(t,e,r){if(t.caretPositionFromPoint)try{let n=t.caretPositionFromPoint(e,r);if(n)return{node:n.offsetNode,offset:Math.min(Ii(n.offsetNode),n.offset)}}catch{}if(t.caretRangeFromPoint){let n=t.caretRangeFromPoint(e,r);if(n)return{node:n.startContainer,offset:Math.min(Ii(n.startContainer),n.startOffset)}}}const Ls=typeof navigator<"u"?navigator:null,HF=typeof document<"u"?document:null,ul=Ls&&Ls.userAgent||"",XP=/Edge\/(\d+)/.exec(ul),$re=/MSIE \d/.exec(ul),JP=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ul),Jn=!!($re||JP||XP),Va=$re?document.documentMode:JP?+JP[1]:XP?+XP[1]:0,Di=!Jn&&/gecko\/(\d+)/i.test(ul);Di&&+(/Firefox\/(\d+)/.exec(ul)||[0,0])[1];const ZP=!Jn&&/Chrome\/(\d+)/.exec(ul),Br=!!ZP,Dre=ZP?+ZP[1]:0,gn=!Jn&&!!Ls&&/Apple Computer/.test(Ls.vendor),Dd=gn&&(/Mobile\/\w+/.test(ul)||!!Ls&&Ls.maxTouchPoints>2),Ti=Dd||(Ls?/Mac/.test(Ls.platform):!1),Are=Ls?/Win/.test(Ls.platform):!1,fo=/Android \d/.test(ul),rm=!!HF&&"webkitFontSmoothing"in HF.documentElement.style,Mye=rm?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function $ye(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Qs(t,e){return typeof t=="number"?t:t[e]}function Dye(t){let e=t.getBoundingClientRect(),r=e.width/t.offsetWidth||1,n=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*r,top:e.top,bottom:e.top+t.clientHeight*n}}function WF(t,e,r){let n=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=r||t.dom;o;){if(o.nodeType!=1){o=$d(o);continue}let a=o,l=a==s.body,c=l?$ye(s):Dye(a),d=0,h=0;if(e.top<c.top+Qs(n,"top")?h=-(c.top-e.top+Qs(i,"top")):e.bottom>c.bottom-Qs(n,"bottom")&&(h=e.bottom-e.top>c.bottom-c.top?e.top+Qs(i,"top")-c.top:e.bottom-c.bottom+Qs(i,"bottom")),e.left<c.left+Qs(n,"left")?d=-(c.left-e.left+Qs(i,"left")):e.right>c.right-Qs(n,"right")&&(d=e.right-c.right+Qs(i,"right")),d||h)if(l)s.defaultView.scrollBy(d,h);else{let p=a.scrollLeft,m=a.scrollTop;h&&(a.scrollTop+=h),d&&(a.scrollLeft+=d);let g=a.scrollLeft-p,b=a.scrollTop-m;e={left:e.left-g,top:e.top-b,right:e.right-g,bottom:e.bottom-b}}let f=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(f))break;o=f=="absolute"?o.offsetParent:$d(o)}}function Aye(t){let e=t.dom.getBoundingClientRect(),r=Math.max(0,e.top),n,i;for(let s=(e.left+e.right)/2,o=r+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=r-20){n=a,i=l.top;break}}return{refDOM:n,refTop:i,stack:Fre(t.dom)}}function Fre(t){let e=[],r=t.ownerDocument;for(let n=t;n&&(e.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),t!=r);n=$d(n));return e}function Fye({refDOM:t,refTop:e,stack:r}){let n=t?t.getBoundingClientRect().top:0;qre(r,n==0?0:n-e)}function qre(t,e){for(let r=0;r<t.length;r++){let{dom:n,top:i,left:s}=t[r];n.scrollTop!=i+e&&(n.scrollTop=i+e),n.scrollLeft!=s&&(n.scrollLeft=s)}}let gu=null;function qye(t){if(t.setActive)return t.setActive();if(gu)return t.focus(gu);let e=Fre(t);t.focus(gu==null?{get preventScroll(){return gu={preventScroll:!0},!0}}:void 0),gu||(gu=!1,qre(e,0))}function Lre(t,e){let r,n=2e8,i,s=0,o=e.top,a=e.top,l,c;for(let d=t.firstChild,h=0;d;d=d.nextSibling,h++){let f;if(d.nodeType==1)f=d.getClientRects();else if(d.nodeType==3)f=no(d).getClientRects();else continue;for(let p=0;p<f.length;p++){let m=f[p];if(m.top<=o&&m.bottom>=a){o=Math.max(m.bottom,o),a=Math.min(m.top,a);let g=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(g<n){r=d,n=g,i=g&&r.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,d.nodeType==1&&g&&(s=h+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!l&&m.left<=e.left&&m.right>=e.left&&(l=d,c={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!r&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(s=h+1)}}return!r&&l&&(r=l,i=c,n=0),r&&r.nodeType==3?Lye(r,i):!r||n&&r.nodeType==1?{node:t,offset:s}:Lre(r,i)}function Lye(t,e){let r=t.nodeValue.length,n=document.createRange(),i;for(let s=0;s<r;s++){n.setEnd(t,s+1),n.setStart(t,s);let o=ea(n,1);if(o.top!=o.bottom&&fM(e,o)){i={node:t,offset:s+(e.left>=(o.left+o.right)/2?1:0)};break}}return n.detach(),i||{node:t,offset:0}}function fM(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function Bye(t,e){let r=t.parentNode;return r&&/^li$/i.test(r.nodeName)&&e.left<t.getBoundingClientRect().left?r:t}function zye(t,e,r){let{node:n,offset:i}=Lre(e,r),s=-1;if(n.nodeType==1&&!n.firstChild){let o=n.getBoundingClientRect();s=o.left!=o.right&&r.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(n,i,s)}function Vye(t,e,r,n){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>n.left||l.top>n.top?i=a.posBefore:(!o&&l.right<n.left||l.bottom<n.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?n.top<(l.top+l.bottom)/2:n.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,r,-1)}function Bre(t,e,r){let n=t.childNodes.length;if(n&&r.top<r.bottom)for(let i=Math.max(0,Math.min(n-1,Math.floor(n*(e.top-r.top)/(r.bottom-r.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(fM(e,c))return Bre(o,e,c)}}if((s=(s+1)%n)==i)break}return t}function Uye(t,e){let r=t.dom.ownerDocument,n,i=0,s=Rye(r,e.left,e.top);s&&({node:n,offset:i}=s);let o=(t.root.elementFromPoint?t.root:r).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!fM(e,c)||(o=Bre(t.dom,e,c),!o))return null}if(gn)for(let c=o;n&&c;c=$d(c))c.draggable&&(n=void 0);if(o=Bye(o,e),n){if(Di&&n.nodeType==1&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){let d=n.childNodes[i],h;d.nodeName=="IMG"&&(h=d.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&i++}let c;rm&&i&&n.nodeType==1&&(c=n.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,n==t.dom&&i==n.childNodes.length-1&&n.lastChild.nodeType==1&&e.top>n.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||n.nodeType!=1||n.childNodes[i-1].nodeName!="BR")&&(a=Vye(t,n,i,e))}a==null&&(a=zye(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function KF(t){return t.top<t.bottom||t.left<t.right}function ea(t,e){let r=t.getClientRects();if(r.length){let n=r[e<0?0:r.length-1];if(KF(n))return n}return Array.prototype.find.call(r,KF)||t.getBoundingClientRect()}const Hye=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function zre(t,e,r){let{node:n,offset:i,atom:s}=t.docView.domFromPos(e,r<0?-1:1),o=rm||Di;if(n.nodeType==3)if(o&&(Hye.test(n.nodeValue)||(r<0?!i:i==n.nodeValue.length))){let l=ea(no(n,i,i),r);if(Di&&i&&/\s/.test(n.nodeValue[i-1])&&i<n.nodeValue.length){let c=ea(no(n,i-1,i-1),-1);if(c.top==l.top){let d=ea(no(n,i,i+1),-1);if(d.top!=l.top)return Yh(d,d.left<c.left)}}return l}else{let l=i,c=i,d=r<0?1:-1;return r<0&&!i?(c++,d=-1):r>=0&&i==n.nodeValue.length?(l--,d=1):r<0?l--:c++,Yh(ea(no(n,l,c),d),d<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(r<0||i==Ii(n))){let l=n.childNodes[i-1];if(l.nodeType==1)return w1(l.getBoundingClientRect(),!1)}if(s==null&&i<Ii(n)){let l=n.childNodes[i];if(l.nodeType==1)return w1(l.getBoundingClientRect(),!0)}return w1(n.getBoundingClientRect(),r>=0)}if(s==null&&i&&(r<0||i==Ii(n))){let l=n.childNodes[i-1],c=l.nodeType==3?no(l,Ii(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Yh(ea(c,1),!1)}if(s==null&&i<Ii(n)){let l=n.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?no(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return Yh(ea(c,-1),!0)}return Yh(ea(n.nodeType==3?no(n):n,-r),r>=0)}function Yh(t,e){if(t.width==0)return t;let r=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:r,right:r}}function w1(t,e){if(t.height==0)return t;let r=e?t.top:t.bottom;return{top:r,bottom:r,left:t.left,right:t.right}}function Vre(t,e,r){let n=t.state,i=t.root.activeElement;n!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return r()}finally{n!=e&&t.updateState(n),i!=t.dom&&i&&i.focus()}}function Wye(t,e,r){let n=e.selection,i=r=="up"?n.$from:n.$to;return Vre(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,r=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=zre(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=no(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let d=l[c];if(d.bottom>d.top+1&&(r=="up"?o.top-d.top>(d.bottom-o.top)*2:d.bottom-o.bottom>(o.bottom-d.top)*2))return!1}}return!0})}const Kye=/[\u0590-\u08ac]/;function Gye(t,e,r){let{$head:n}=e.selection;if(!n.parent.isTextblock)return!1;let i=n.parentOffset,s=!i,o=i==n.parent.content.size,a=t.domSelection();return a?!Kye.test(n.parent.textContent)||!a.modify?r=="left"||r=="backward"?s:o:Vre(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:d,anchorOffset:h}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",r,"character");let p=n.depth?t.docView.domAfterPos(n.before()):t.dom,{focusNode:m,focusOffset:g}=t.domSelectionRange(),b=m&&!p.contains(m.nodeType==1?m:m.parentNode)||l==m&&c==g;try{a.collapse(d,h),l&&(l!=d||c!=h)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),b}):n.pos==n.start()||n.pos==n.end()}let GF=null,YF=null,QF=!1;function Yye(t,e,r){return GF==e&&YF==r?QF:(GF=e,YF=r,QF=r=="up"||r=="down"?Wye(t,e,r):Gye(t,e,r))}const Ai=0,XF=1,Rl=2,Bs=3;class nm{constructor(e,r,n,i){this.parent=e,this.children=r,this.dom=n,this.contentDOM=i,this.dirty=Ai,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,r,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let r=0;r<this.children.length;r++)e+=this.children[r].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let r=0,n=this.posAtStart;;r++){let i=this.children[r];if(i==e)return n;n+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,r,n){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(n<0){let s,o;if(e==this.contentDOM)s=e.childNodes[r-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[r];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=r>tn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(r==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&r==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??n>0?this.posAtEnd:this.posAtStart}nearestDesc(e,r=!1){for(let n=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!r||s.node))if(n&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))n=!1;else return s}}getDesc(e){let r=e.pmViewDesc;for(let n=r;n;n=n.parent)if(n==this)return r}posFromDOM(e,r,n){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,r,n)}return-1}descAt(e){for(let r=0,n=0;r<this.children.length;r++){let i=this.children[r],s=n+i.size;if(n==e&&s!=n){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(e<s)return i.descAt(e-n-i.border);n=s}}domFromPos(e,r){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,i=0;for(let s=0;n<this.children.length;n++){let o=this.children[n],a=s+o.size;if(a>e||o instanceof Hre){i=e-s;break}s=a}if(i)return this.children[n].domFromPos(i-this.children[n].border,r);for(let s;n&&!(s=this.children[n-1]).size&&s instanceof Ure&&s.side>=0;n--);if(r<=0){let s,o=!0;for(;s=n?this.children[n-1]:null,!(!s||s.dom.parentNode==this.contentDOM);n--,o=!1);return s&&r&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,r):{node:this.contentDOM,offset:s?tn(s.dom)+1:0}}else{let s,o=!0;for(;s=n<this.children.length?this.children[n]:null,!(!s||s.dom.parentNode==this.contentDOM);n++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,r):{node:this.contentDOM,offset:s?tn(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,r,n=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:r,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=n,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let d=o+l.border;if(e>=d&&r<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,r,d);e=o;for(let h=a;h>0;h--){let f=this.children[h-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=tn(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(c>r||a==this.children.length-1)){r=c;for(let d=a+1;d<this.children.length;d++){let h=this.children[d];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){s=tn(h.dom);break}r+=h.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:r,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let r=this.children[e<0?0:this.children.length-1];return r.size==0||r.emptyChildAt(e)}domAfterPos(e){let{node:r,offset:n}=this.domFromPos(e,0);if(r.nodeType!=1||n==r.childNodes.length)throw new RangeError("No node after pos "+e);return r.childNodes[n]}setSelection(e,r,n,i=!1){let s=Math.min(e,r),o=Math.max(e,r);for(let p=0,m=0;p<this.children.length;p++){let g=this.children[p],b=m+g.size;if(s>m&&o<b)return g.setSelection(e-m-g.border,r-m-g.border,n,i);m=b}let a=this.domFromPos(e,e?-1:1),l=r==e?a:this.domFromPos(r,r?-1:1),c=n.root.getSelection(),d=n.domSelectionRange(),h=!1;if((Di||gn)&&e==r){let{node:p,offset:m}=a;if(p.nodeType==3){if(h=!!(m&&p.nodeValue[m-1]==`
`),h&&m==p.nodeValue.length)for(let g=p,b;g;g=g.parentNode){if(b=g.nextSibling){b.nodeName=="BR"&&(a=l={node:b.parentNode,offset:tn(b)+1});break}let y=g.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let g=p.childNodes[m-1];h=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(Di&&d.focusNode&&d.focusNode!=l.node&&d.focusNode.nodeType==1){let p=d.focusNode.childNodes[d.focusOffset];p&&p.contentEditable=="false"&&(i=!0)}if(!(i||h&&gn)&&kc(a.node,a.offset,d.anchorNode,d.anchorOffset)&&kc(l.node,l.offset,d.focusNode,d.focusOffset))return;let f=!1;if((c.extend||e==r)&&!(h&&Di)){c.collapse(a.node,a.offset);try{e!=r&&c.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>r){let m=a;a=l,l=m}let p=document.createRange();p.setEnd(l.node,l.offset),p.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,r){for(let n=0,i=0;i<this.children.length;i++){let s=this.children[i],o=n+s.size;if(n==o?e<=o&&r>=n:e<o&&r>n){let a=n+s.border,l=o-s.border;if(e>=a&&r<=l){this.dirty=e==n||r==o?Rl:XF,e==a&&r==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Bs:s.markDirty(e-a,r-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Rl:Bs}n=o}this.dirty=Rl}markParentsDirty(){let e=1;for(let r=this.parent;r;r=r.parent,e++){let n=e==1?Rl:XF;r.dirty<n&&(r.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class Ure extends nm{constructor(e,r,n,i){let s,o=r.type.toDOM;if(typeof o=="function"&&(o=o(n,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!r.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=r,this.widget=r,s=this}matchesWidget(e){return this.dirty==Ai&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let r=this.widget.spec.stopEvent;return r?r(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class Qye extends nm{constructor(e,r,n,i){super(e,[],r,null),this.textDOM=n,this.text=i}get size(){return this.text.length}localPosFromDOM(e,r){return e!=this.textDOM?this.posAtStart+(r?this.size:0):this.posAtStart+r}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Tc extends nm{constructor(e,r,n,i,s){super(e,[],n,i),this.mark=r,this.spec=s}static create(e,r,n,i){let s=i.nodeViews[r.type.name],o=s&&s(r,i,n);return(!o||!o.dom)&&(o=Vc.renderSpec(document,r.type.spec.toDOM(r,n),null,r.attrs)),new Tc(e,r,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Bs||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Bs&&this.mark.eq(e)}markDirty(e,r){if(super.markDirty(e,r),this.dirty!=Ai){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=Ai}}slice(e,r,n){let i=Tc.create(this.parent,this.mark,!0,n),s=this.children,o=this.size;r<o&&(s=tI(s,r,o,n)),e>0&&(s=tI(s,0,e,n));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Ua extends nm{constructor(e,r,n,i,s,o,a,l,c){super(e,[],s,o),this.node=r,this.outerDeco=n,this.innerDeco=i,this.nodeDOM=a}static create(e,r,n,i,s,o){let a=s.nodeViews[r.type.name],l,c=a&&a(r,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},n,i),d=c&&c.dom,h=c&&c.contentDOM;if(r.isText){if(!d)d=document.createTextNode(r.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:h}=Vc.renderSpec(document,r.type.spec.toDOM(r),null,r.attrs));!h&&!r.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),r.type.spec.draggable&&(d.draggable=!0));let f=d;return d=Gre(d,n,r),c?l=new Xye(e,r,n,i,d,h||null,f,c,s,o+1):r.isText?new j0(e,r,n,i,d,f,s):new Ua(e,r,n,i,d,h||null,f,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let r=this.children.length-1;r>=0;r--){let n=this.children[r];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Q.empty)}return e}matchesNode(e,r,n){return this.dirty==Ai&&e.eq(this.node)&&Yy(r,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,r){let n=this.node.inlineContent,i=r,s=e.composing?this.localCompositionInfo(e,r):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new Zye(this,o&&o.node,e);rve(this.node,this.innerDeco,(c,d,h)=>{c.spec.marks?l.syncToMarks(c.spec.marks,n,e):c.type.side>=0&&!h&&l.syncToMarks(d==this.node.childCount?Ot.none:this.node.child(d).marks,n,e),l.placeWidget(c,e,i)},(c,d,h,f)=>{l.syncToMarks(c.marks,n,e);let p;l.findNodeMatch(c,d,h,f)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(p=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,d,h,p,e)||l.updateNextNode(c,d,h,e,f,i)||l.addNode(c,d,h,e,i),i+=c.nodeSize}),l.syncToMarks([],n,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Rl)&&(o&&this.protectLocalComposition(e,o),Wre(this.contentDOM,this.children,e),Dd&&nve(this.dom))}localCompositionInfo(e,r){let{from:n,to:i}=e.state.selection;if(!(e.state.selection instanceof Be)||n<r||i>r+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=ive(this.node.content,o,n-r,i-r);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:r,pos:n,text:i}){if(this.getDesc(r))return;let s=r;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new Qye(this,s,r,i);e.input.compositionNodes.push(o),this.children=tI(this.children,n,n+i.length,e,o)}update(e,r,n,i){return this.dirty==Bs||!e.sameMarkup(this.node)?!1:(this.updateInner(e,r,n,i),!0)}updateInner(e,r,n,i){this.updateOuterDeco(r),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Ai}updateOuterDeco(e){if(Yy(e,this.outerDeco))return;let r=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=Kre(this.dom,this.nodeDOM,eI(this.outerDeco,this.node,r),eI(e,this.node,r)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function JF(t,e,r,n,i){Gre(n,e,t);let s=new Ua(void 0,t,e,r,n,n,n,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class j0 extends Ua{constructor(e,r,n,i,s,o,a){super(e,r,n,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,r,n,i){return this.dirty==Bs||this.dirty!=Ai&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(r),(this.dirty!=Ai||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Ai,!0)}inParent(){let e=this.parent.contentDOM;for(let r=this.nodeDOM;r;r=r.parentNode)if(r==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,r,n){return e==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):super.localPosFromDOM(e,r,n)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,r,n){let i=this.node.cut(e,r),s=document.createTextNode(i.text);return new j0(this.parent,i,this.outerDeco,this.innerDeco,s,s,n)}markDirty(e,r){super.markDirty(e,r),this.dom!=this.nodeDOM&&(e==0||r==this.nodeDOM.nodeValue.length)&&(this.dirty=Bs)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Hre extends nm{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Ai&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class Xye extends Ua{constructor(e,r,n,i,s,o,a,l,c,d){super(e,r,n,i,s,o,a,c,d),this.spec=l}update(e,r,n,i){if(this.dirty==Bs)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,r,n);return s&&this.updateInner(e,r,n,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,r,n,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,r,n,i){this.spec.setSelection?this.spec.setSelection(e,r,n.root):super.setSelection(e,r,n,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Wre(t,e,r){let n=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=n;)n=ZF(n),i=!0;n=n.nextSibling}else i=!0,t.insertBefore(a,n);if(o instanceof Tc){let l=n?n.previousSibling:t.lastChild;Wre(o.contentDOM,o.children,r),n=l?l.nextSibling:t.firstChild}}for(;n;)n=ZF(n),i=!0;i&&r.trackWrites==t&&(r.trackWrites=null)}const kf=function(t){t&&(this.nodeName=t)};kf.prototype=Object.create(null);const Ml=[new kf];function eI(t,e,r){if(t.length==0)return Ml;let n=r?Ml[0]:new kf,i=[n];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(n=new kf(o.nodeName));for(let a in o){let l=o[a];l!=null&&(r&&i.length==1&&i.push(n=new kf(e.isInline?"span":"div")),a=="class"?n.class=(n.class?n.class+" ":"")+l:a=="style"?n.style=(n.style?n.style+";":"")+l:a!="nodeName"&&(n[a]=l))}}}return i}function Kre(t,e,r,n){if(r==Ml&&n==Ml)return e;let i=e;for(let s=0;s<n.length;s++){let o=n[s],a=r[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=Ml[0]),i=l}Jye(i,a||Ml[0],o)}return i}function Jye(t,e,r){for(let n in e)n!="class"&&n!="style"&&n!="nodeName"&&!(n in r)&&t.removeAttribute(n);for(let n in r)n!="class"&&n!="style"&&n!="nodeName"&&r[n]!=e[n]&&t.setAttribute(n,r[n]);if(e.class!=r.class){let n=e.class?e.class.split(" ").filter(Boolean):[],i=r.class?r.class.split(" ").filter(Boolean):[];for(let s=0;s<n.length;s++)i.indexOf(n[s])==-1&&t.classList.remove(n[s]);for(let s=0;s<i.length;s++)n.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=r.style){if(e.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=n.exec(e.style);)t.style.removeProperty(i[1])}r.style&&(t.style.cssText+=r.style)}}function Gre(t,e,r){return Kre(t,t,Ml,eI(e,r,t.nodeType!=1))}function Yy(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].type.eq(e[r].type))return!1;return!0}function ZF(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Zye{constructor(e,r,n){this.lock=r,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=eve(e.node.content,e)}destroyBetween(e,r){if(e!=r){for(let n=e;n<r;n++)this.top.children[n].destroy();this.top.children.splice(e,r-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,r,n){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Ai,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Tc.create(this.top,e[s],r,n);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,r,n,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,r,n))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,r,n)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,r,n,i,s){let o=this.top.children[i];return o.dirty==Bs&&o.dom==o.contentDOM&&(o.dirty=Rl),o.update(e,r,n,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let r=e.parentNode;if(!r)return-1;if(r==this.top.contentDOM){let n=e.pmViewDesc;if(n){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==n)return i}return-1}e=r}}updateNextNode(e,r,n,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Ua){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let d=l.dom,h,f=this.isLocked(d)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Bs&&Yy(r,l.outerDeco));if(!f&&l.update(e,r,n,i))return this.destroyBetween(this.index,a),l.dom!=d&&(this.changed=!0),this.index++,!0;if(!f&&(h=this.recreateWrapper(l,e,r,n,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=h,h.contentDOM&&(h.dirty=Rl,h.updateChildren(i,o+1),h.dirty=Ai),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,r,n,i,s,o){if(e.dirty||r.isAtom||!e.children.length||!e.node.content.eq(r.content)||!Yy(n,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=Ua.create(this.top,r,n,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,r,n,i,s){let o=Ua.create(this.top,e,r,n,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,r,n){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new Ure(this.top,e,r,n);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],r=this.top;for(;e instanceof Tc;)r=e,e=r.children[r.children.length-1];(!e||!(e instanceof j0)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((gn||Br)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",r),this.addHackNode("BR",this.top))}addHackNode(e,r){if(r==this.top&&this.index<r.children.length&&r.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);e=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),e=="BR"&&(n.className="ProseMirror-trailingBreak");let i=new Hre(this.top,[],n,null);r!=this.top?r.children.push(i):r.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function eve(t,e){let r=e,n=r.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(n){let c=r.children[n-1];if(c instanceof Tc)r=c,n=c.children.length;else{a=c,n--;break}}else{if(r==e)break e;n=r.parent.children.indexOf(r),r=r.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function tve(t,e){return t.type.side-e.type.side}function rve(t,e,r,n){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let d=t.child(c);n(d,i,e.forChild(s,d),c),s+=d.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let d,h;for(;o<i.length&&i[o].to==s;){let b=i[o++];b.widget&&(d?(h||(h=[d])).push(b):d=b)}if(d)if(h){h.sort(tve);for(let b=0;b<h.length;b++)r(h[b],c,!!l)}else r(d,c,!!l);let f,p;if(l)p=-1,f=l,l=null;else if(c<t.childCount)p=c,f=t.child(c++);else break;for(let b=0;b<a.length;b++)a[b].to<=s&&a.splice(b--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let m=s+f.nodeSize;if(f.isText){let b=m;o<i.length&&i[o].from<b&&(b=i[o].from);for(let y=0;y<a.length;y++)a[y].to<b&&(b=a[y].to);b<m&&(l=f.cut(b-s),f=f.cut(0,b-s),m=b,p=-1)}else for(;o<i.length&&i[o].to<m;)o++;let g=f.isInline&&!f.isLeaf?a.filter(b=>!b.inline):a.slice();n(f,g,e.forChild(s,f),p),s=m}}function nve(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function ive(t,e,r,n){for(let i=0,s=0;i<t.childCount&&s<=n;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=r){if(s>=n&&l.slice(n-e.length-a,n-a)==e)return n-e.length;let c=a<n?l.lastIndexOf(e,n-a-1):-1;if(c>=0&&c+e.length+a>=r)return a+c;if(r==n&&l.length>=n+e.length-a&&l.slice(n-a,n-a+e.length)==e)return n}}return-1}function tI(t,e,r,n,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,d=a+=l.size;c>=r||d<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,n)),i&&(s.push(i),i=void 0),d>r&&s.push(l.slice(r-c,l.size,n)))}return s}function pM(t,e=null){let r=t.domSelectionRange(),n=t.state.doc;if(!r.focusNode)return null;let i=t.docView.nearestDesc(r.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(o<0)return null;let a=n.resolve(o),l,c;if(O0(r)){for(l=o;i&&!i.node;)i=i.parent;let h=i.node;if(i&&h.isAtom&&Re.isSelectable(h)&&i.parent&&!(h.isInline&&Pye(r.focusNode,r.focusOffset,i.dom))){let f=i.posBefore;c=new Re(o==f?a:n.resolve(f))}}else{if(r instanceof t.dom.ownerDocument.defaultView.Selection&&r.rangeCount>1){let h=o,f=o;for(let p=0;p<r.rangeCount;p++){let m=r.getRangeAt(p);h=Math.min(h,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(h<0)return null;[l,o]=f==t.state.selection.anchor?[f,h]:[h,f],a=n.resolve(o)}else l=t.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(l<0)return null}let d=n.resolve(l);if(!c){let h=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=mM(t,d,a,h)}return c}function Yre(t){return t.editable?t.hasFocus():Xre(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function bo(t,e=!1){let r=t.state.selection;if(Qre(t,r),!!Yre(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Br){let n=t.domSelectionRange(),i=t.domObserver.currentSelection;if(n.anchorNode&&i.anchorNode&&kc(n.anchorNode,n.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)ove(t);else{let{anchor:n,head:i}=r,s,o;e4&&!(r instanceof Be)&&(r.$from.parent.inlineContent||(s=t4(t,r.from)),!r.empty&&!r.$from.parent.inlineContent&&(o=t4(t,r.to))),t.docView.setSelection(n,i,t,e),e4&&(s&&r4(s),o&&r4(o)),r.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&sve(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const e4=gn||Br&&Dre<63;function t4(t,e){let{node:r,offset:n}=t.docView.domFromPos(e,0),i=n<r.childNodes.length?r.childNodes[n]:null,s=n?r.childNodes[n-1]:null;if(gn&&i&&i.contentEditable=="false")return S1(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return S1(i);if(s)return S1(s)}}function S1(t){return t.contentEditable="true",gn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function r4(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function sve(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let r=t.domSelectionRange(),n=r.anchorNode,i=r.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(r.anchorNode!=n||r.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!Yre(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function ove(t){let e=t.domSelection();if(!e)return;let r=t.cursorWrapper.dom,n=r.nodeName=="IMG";n?e.collapse(r.parentNode,tn(r)+1):e.collapse(r,0),!n&&!t.state.selection.visible&&Jn&&Va<=11&&(r.disabled=!0,r.disabled=!1)}function Qre(t,e){if(e instanceof Re){let r=t.docView.descAt(e.from);r!=t.lastSelectedViewDesc&&(n4(t),r&&r.selectNode(),t.lastSelectedViewDesc=r)}else n4(t)}function n4(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function mM(t,e,r,n){return t.someProp("createSelectionBetween",i=>i(t,e,r))||Be.between(e,r,n)}function i4(t){return t.editable&&!t.hasFocus()?!1:Xre(t)}function Xre(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function ave(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),r=t.domSelectionRange();return kc(e.node,e.offset,r.anchorNode,r.anchorOffset)}function rI(t,e){let{$anchor:r,$head:n}=t.selection,i=e>0?r.max(n):r.min(n),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&Ge.findFrom(s,e)}function ia(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function s4(t,e,r){let n=t.state.selection;if(n instanceof Be)if(r.indexOf("s")>-1){let{$head:i}=n,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return ia(t,new Be(n.$anchor,o))}else if(n.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=rI(t.state,e);return i&&i instanceof Re?ia(t,i):!1}else if(!(Ti&&r.indexOf("m")>-1)){let i=n.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?Re.isSelectable(s)?ia(t,new Re(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):rm?ia(t,new Be(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(n instanceof Re&&n.node.isInline)return ia(t,new Be(e>0?n.$to:n.$from));{let i=rI(t.state,e);return i?ia(t,i):!1}}}function Qy(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Tf(t,e){let r=t.pmViewDesc;return r&&r.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function yu(t,e){return e<0?lve(t):cve(t)}function lve(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let i,s,o=!1;for(Di&&r.nodeType==1&&n<Qy(r)&&Tf(r.childNodes[n],-1)&&(o=!0);;)if(n>0){if(r.nodeType!=1)break;{let a=r.childNodes[n-1];if(Tf(a,-1))i=r,s=--n;else if(a.nodeType==3)r=a,n=r.nodeValue.length;else break}}else{if(Jre(r))break;{let a=r.previousSibling;for(;a&&Tf(a,-1);)i=r.parentNode,s=tn(a),a=a.previousSibling;if(a)r=a,n=Qy(r);else{if(r=r.parentNode,r==t.dom)break;n=0}}}o?nI(t,r,n):i&&nI(t,i,s)}function cve(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let i=Qy(r),s,o;for(;;)if(n<i){if(r.nodeType!=1)break;let a=r.childNodes[n];if(Tf(a,1))s=r,o=++n;else break}else{if(Jre(r))break;{let a=r.nextSibling;for(;a&&Tf(a,1);)s=a.parentNode,o=tn(a)+1,a=a.nextSibling;if(a)r=a,n=0,i=Qy(r);else{if(r=r.parentNode,r==t.dom)break;n=i=0}}}s&&nI(t,s,o)}function Jre(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function uve(t,e){for(;t&&e==t.childNodes.length&&!tm(t);)e=tn(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let r=t.childNodes[e];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=0}}function dve(t,e){for(;t&&!e&&!tm(t);)e=tn(t),t=t.parentNode;for(;t&&e;){let r=t.childNodes[e-1];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=t.childNodes.length}}function nI(t,e,r){if(e.nodeType!=3){let s,o;(o=uve(e,r))?(e=o,r=0):(s=dve(e,r))&&(e=s,r=s.nodeValue.length)}let n=t.domSelection();if(!n)return;if(O0(n)){let s=document.createRange();s.setEnd(e,r),s.setStart(e,r),n.removeAllRanges(),n.addRange(s)}else n.extend&&n.extend(e,r);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&bo(t)},50)}function o4(t,e){let r=t.state.doc.resolve(e);if(!(Br||Are)&&r.parent.inlineContent){let i=t.coordsAtPos(e);if(e>r.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<r.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function a4(t,e,r){let n=t.state.selection;if(n instanceof Be&&!n.empty||r.indexOf("s")>-1||Ti&&r.indexOf("m")>-1)return!1;let{$from:i,$to:s}=n;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=rI(t.state,e);if(o&&o instanceof Re)return ia(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=n instanceof fi?Ge.near(o,e):Ge.findFrom(o,e);return a?ia(t,a):!1}return!1}function l4(t,e){if(!(t.state.selection instanceof Be))return!0;let{$head:r,$anchor:n,empty:i}=t.state.selection;if(!r.sameParent(n))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!r.textOffset&&(e<0?r.nodeBefore:r.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(r.pos-s.nodeSize,r.pos):o.delete(r.pos,r.pos+s.nodeSize),t.dispatch(o),!0}return!1}function c4(t,e,r){t.domObserver.stop(),e.contentEditable=r,t.domObserver.start()}function hve(t){if(!gn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(e&&e.nodeType==1&&r==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let n=e.firstChild;c4(t,n,"true"),setTimeout(()=>c4(t,n,"false"),20)}return!1}function fve(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function pve(t,e){let r=e.keyCode,n=fve(e);if(r==8||Ti&&r==72&&n=="c")return l4(t,-1)||yu(t,-1);if(r==46&&!e.shiftKey||Ti&&r==68&&n=="c")return l4(t,1)||yu(t,1);if(r==13||r==27)return!0;if(r==37||Ti&&r==66&&n=="c"){let i=r==37?o4(t,t.state.selection.from)=="ltr"?-1:1:-1;return s4(t,i,n)||yu(t,i)}else if(r==39||Ti&&r==70&&n=="c"){let i=r==39?o4(t,t.state.selection.from)=="ltr"?1:-1:1;return s4(t,i,n)||yu(t,i)}else{if(r==38||Ti&&r==80&&n=="c")return a4(t,-1,n)||yu(t,-1);if(r==40||Ti&&r==78&&n=="c")return hve(t)||a4(t,1,n)||yu(t,1);if(n==(Ti?"m":"c")&&(r==66||r==73||r==89||r==90))return!0}return!1}function gM(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let r=[],{content:n,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&n.childCount==1&&n.firstChild.childCount==1;){i--,s--;let p=n.firstChild;r.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),n=p.content}let o=t.someProp("clipboardSerializer")||Vc.fromSchema(t.state.schema),a=ine(),l=a.createElement("div");l.appendChild(o.serializeFragment(n,{document:a}));let c=l.firstChild,d,h=0;for(;c&&c.nodeType==1&&(d=nne[c.nodeName.toLowerCase()]);){for(let p=d.length-1;p>=0;p--){let m=a.createElement(d[p]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),h++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${h?` -${h}`:""} ${JSON.stringify(r)}`);let f=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f,slice:e}}function Zre(t,e,r,n,i){let s=i.parent.type.spec.code,o,a;if(!r&&!e)return null;let l=!!e&&(n||s||!r);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,s||n,t)}),s)return a=new me(Q.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",f=>{a=f(a,t,!0)}),a;let h=t.someProp("clipboardTextParser",f=>f(e,i,n,t));if(h)a=h;else{let f=i.marks(),{schema:p}=t.state,m=Vc.fromSchema(p);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let b=o.appendChild(document.createElement("p"));g&&b.appendChild(m.serializeNode(p.text(g,f)))})}}else t.someProp("transformPastedHTML",h=>{r=h(r,t)}),o=vve(r),rm&&bve(o);let c=o&&o.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let h=+d[3];h>0;h--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||za.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||d),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!mve.test(f.parentNode.nodeName)?{ignore:!0}:null}})),d)a=xve(u4(a,+d[1],+d[2]),d[4]);else if(a=me.maxOpen(gve(a.content,i),!0),a.openStart||a.openEnd){let h=0,f=0;for(let p=a.content.firstChild;h<a.openStart&&!p.type.spec.isolating;h++,p=p.firstChild);for(let p=a.content.lastChild;f<a.openEnd&&!p.type.spec.isolating;f++,p=p.lastChild);a=u4(a,h,f)}return t.someProp("transformPasted",h=>{a=h(a,t,l)}),a}const mve=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function gve(t,e){if(t.childCount<2)return t;for(let r=e.depth;r>=0;r--){let i=e.node(r).contentMatchAt(e.index(r)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&tne(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=rne(o[o.length-1],s.length));let d=ene(a,l);o.push(d),i=i.matchType(d.type),s=l}}),o)return Q.from(o)}return t}function ene(t,e,r=0){for(let n=e.length-1;n>=r;n--)t=e[n].create(null,Q.from(t));return t}function tne(t,e,r,n,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=tne(t,e,r,n.lastChild,i+1);if(s)return n.copy(n.content.replaceChild(n.childCount-1,s));if(n.contentMatchAt(n.childCount).matchType(i==t.length-1?r.type:t[i+1]))return n.copy(n.content.append(Q.from(ene(r,t,i+1))))}}function rne(t,e){if(e==0)return t;let r=t.content.replaceChild(t.childCount-1,rne(t.lastChild,e-1)),n=t.contentMatchAt(t.childCount).fillBefore(Q.empty,!0);return t.copy(r.append(n))}function iI(t,e,r,n,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<n-1&&(a=iI(a,e,r,n,i+1,s)),i>=r&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(Q.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function u4(t,e,r){return e<t.openStart&&(t=new me(iI(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),r<t.openEnd&&(t=new me(iI(t.content,1,r,t.openEnd,0,0),t.openStart,r)),t}const nne={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let d4=null;function ine(){return d4||(d4=document.implementation.createHTMLDocument("title"))}let _1=null;function yve(t){let e=window.trustedTypes;return e?(_1||(_1=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:r=>r})),_1.createHTML(t)):t}function vve(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let r=ine().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(t),i;if((i=n&&nne[n[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),r.innerHTML=yve(t),i)for(let s=0;s<i.length;s++)r=r.querySelector(i[s])||r;return r}function bve(t){let e=t.querySelectorAll(Br?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<e.length;r++){let n=e[r];n.childNodes.length==1&&n.textContent==""&&n.parentNode&&n.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),n)}}function xve(t,e){if(!t.size)return t;let r=t.content.firstChild.type.schema,n;try{n=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=n.length-2;a>=0;a-=2){let l=r.nodes[n[a]];if(!l||l.hasRequiredAttrs())break;i=Q.from(l.create(n[a+1],i)),s++,o++}return new me(i,s,o)}const jn={},Pn={},wve={touchstart:!0,touchmove:!0};class Sve{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function _ve(t){for(let e in jn){let r=jn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=n=>{Nve(t,n)&&!yM(t,n)&&(t.editable||!(n.type in Pn))&&r(t,n)},wve[e]?{passive:!0}:void 0)}gn&&t.dom.addEventListener("input",()=>null),sI(t)}function Oa(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Eve(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function sI(t){t.someProp("handleDOMEvents",e=>{for(let r in e)t.input.eventHandlers[r]||t.dom.addEventListener(r,t.input.eventHandlers[r]=n=>yM(t,n))})}function yM(t,e){return t.someProp("handleDOMEvents",r=>{let n=r[e.type];return n?n(t,e)||e.defaultPrevented:!1})}function Nve(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r=e.target;r!=t.dom;r=r.parentNode)if(!r||r.nodeType==11||r.pmViewDesc&&r.pmViewDesc.stopEvent(e))return!1;return!0}function Cve(t,e){!yM(t,e)&&jn[e.type]&&(t.editable||!(e.type in Pn))&&jn[e.type](t,e)}Pn.keydown=(t,e)=>{let r=e;if(t.input.shiftKey=r.keyCode==16||r.shiftKey,!one(t,r)&&(t.input.lastKeyCode=r.keyCode,t.input.lastKeyCodeTime=Date.now(),!(fo&&Br&&r.keyCode==13)))if(r.keyCode!=229&&t.domObserver.forceFlush(),Dd&&r.keyCode==13&&!r.ctrlKey&&!r.altKey&&!r.metaKey){let n=Date.now();t.input.lastIOSEnter=n,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==n&&(t.someProp("handleKeyDown",i=>i(t,kl(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",n=>n(t,r))||pve(t,r)?r.preventDefault():Oa(t,"key")};Pn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Pn.keypress=(t,e)=>{let r=e;if(one(t,r)||!r.charCode||r.ctrlKey&&!r.altKey||Ti&&r.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,r))){r.preventDefault();return}let n=t.state.selection;if(!(n instanceof Be)||!n.$from.sameParent(n.$to)){let i=String.fromCharCode(r.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,n.$from.pos,n.$to.pos,i,s))&&t.dispatch(s()),r.preventDefault()}};function P0(t){return{left:t.clientX,top:t.clientY}}function kve(t,e){let r=e.x-t.clientX,n=e.y-t.clientY;return r*r+n*n<100}function vM(t,e,r,n,i){if(n==-1)return!1;let s=t.state.doc.resolve(n);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,r,s.nodeAfter,s.before(o),i,!0):a(t,r,s.node(o),s.before(o),i,!1)))return!0;return!1}function ed(t,e,r){if(t.focused||t.focus(),t.state.selection.eq(e))return;let n=t.state.tr.setSelection(e);n.setMeta("pointer",!0),t.dispatch(n)}function Tve(t,e){if(e==-1)return!1;let r=t.state.doc.resolve(e),n=r.nodeAfter;return n&&n.isAtom&&Re.isSelectable(n)?(ed(t,new Re(r)),!0):!1}function Ove(t,e){if(e==-1)return!1;let r=t.state.selection,n,i;r instanceof Re&&(n=r.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(Re.isSelectable(a)){n&&r.$from.depth>0&&o>=r.$from.depth&&s.before(r.$from.depth+1)==r.$from.pos?i=s.before(r.$from.depth):i=s.before(o);break}}return i!=null?(ed(t,Re.create(t.state.doc,i)),!0):!1}function jve(t,e,r,n,i){return vM(t,"handleClickOn",e,r,n)||t.someProp("handleClick",s=>s(t,e,n))||(i?Ove(t,r):Tve(t,r))}function Pve(t,e,r,n){return vM(t,"handleDoubleClickOn",e,r,n)||t.someProp("handleDoubleClick",i=>i(t,e,n))}function Ive(t,e,r,n){return vM(t,"handleTripleClickOn",e,r,n)||t.someProp("handleTripleClick",i=>i(t,e,n))||Rve(t,r,n)}function Rve(t,e,r){if(r.button!=0)return!1;let n=t.state.doc;if(e==-1)return n.inlineContent?(ed(t,Be.create(n,0,n.content.size)),!0):!1;let i=n.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)ed(t,Be.create(n,a+1,a+1+o.content.size));else if(Re.isSelectable(o))ed(t,Re.create(n,a));else continue;return!0}}function bM(t){return Xy(t)}const sne=Ti?"metaKey":"ctrlKey";jn.mousedown=(t,e)=>{let r=e;t.input.shiftKey=r.shiftKey;let n=bM(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&kve(r,t.input.lastClick)&&!r[sne]&&t.input.lastClick.button==r.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:r.clientX,y:r.clientY,type:s,button:r.button};let o=t.posAtCoords(P0(r));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Mve(t,o,r,!!n)):(s=="doubleClick"?Pve:Ive)(t,o.pos,o.inside,r)?r.preventDefault():Oa(t,"pointer"))};class Mve{constructor(e,r,n,i){this.view=e,this.pos=r,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[sne],this.allowDefault=n.shiftKey;let s,o;if(r.inside>-1)s=e.state.doc.nodeAt(r.inside),o=r.inside;else{let d=e.state.doc.resolve(r.pos);s=d.parent,o=d.depth?d.before():0}const a=i?null:n.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=e.state;(n.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof Re&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Di&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Oa(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>bo(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let r=this.pos;this.view.state.doc!=this.startDoc&&(r=this.view.posAtCoords(P0(e))),this.updateAllowDefault(e),this.allowDefault||!r?Oa(this.view,"pointer"):jve(this.view,r.pos,r.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||gn&&this.mightDrag&&!this.mightDrag.node.isAtom||Br&&!this.view.state.selection.visible&&Math.min(Math.abs(r.pos-this.view.state.selection.from),Math.abs(r.pos-this.view.state.selection.to))<=2)?(ed(this.view,Ge.near(this.view.state.doc.resolve(r.pos))),e.preventDefault()):Oa(this.view,"pointer")}move(e){this.updateAllowDefault(e),Oa(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}jn.touchstart=t=>{t.input.lastTouch=Date.now(),bM(t),Oa(t,"pointer")};jn.touchmove=t=>{t.input.lastTouch=Date.now(),Oa(t,"pointer")};jn.contextmenu=t=>bM(t);function one(t,e){return t.composing?!0:gn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const $ve=fo?5e3:-1;Pn.compositionstart=Pn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,r=e.selection.$to;if(e.selection instanceof Be&&(e.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)||Br&&Are&&Dve(t)))t.markCursor=t.state.storedMarks||r.marks(),Xy(t,!0),t.markCursor=null;else if(Xy(t,!e.selection.empty),Di&&e.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let n=t.domSelectionRange();for(let i=n.focusNode,s=n.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}ane(t,$ve)};function Dve(t){let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(!e||e.nodeType!=1||r>=e.childNodes.length)return!1;let n=e.childNodes[r];return n.nodeType==1&&n.contentEditable=="false"}Pn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,ane(t,20))};function ane(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Xy(t),e))}function lne(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=Fve());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function Ave(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let r=Oye(e.focusNode,e.focusOffset),n=jye(e.focusNode,e.focusOffset);if(r&&n&&r!=n){let i=n.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(r==s||n==s)return s;if(!i||!i.isText(n.nodeValue))return n;if(t.input.compositionNode==n){let o=r.pmViewDesc;if(!(!o||!o.isText(r.nodeValue)))return n}}return r||n}function Fve(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Xy(t,e=!1){if(!(fo&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),lne(t),e||t.docView&&t.docView.dirty){let r=pM(t),n=t.state.selection;return r&&!r.eq(n)?t.dispatch(t.state.tr.setSelection(r)):(t.markCursor||e)&&!n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function qve(t,e){if(!t.dom.parentNode)return;let r=t.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(e),r.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),n.removeAllRanges(),n.addRange(i),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),t.focus()},50)}const gp=Jn&&Va<15||Dd&&Mye<604;jn.copy=Pn.cut=(t,e)=>{let r=e,n=t.state.selection,i=r.type=="cut";if(n.empty)return;let s=gp?null:r.clipboardData,o=n.content(),{dom:a,text:l}=gM(t,o);s?(r.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):qve(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Lve(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function Bve(t,e){if(!t.dom.parentNode)return;let r=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,n=t.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),n.parentNode&&n.parentNode.removeChild(n),r?yp(t,n.value,null,i,e):yp(t,n.textContent,n.innerHTML,i,e)},50)}function yp(t,e,r,n,i){let s=Zre(t,e,r,n,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||me.empty)))return!0;if(!s)return!1;let o=Lve(s),a=o?t.state.tr.replaceSelectionWith(o,n):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function cne(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let r=t.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}Pn.paste=(t,e)=>{let r=e;if(t.composing&&!fo)return;let n=gp?null:r.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;n&&yp(t,cne(n),n.getData("text/html"),i,r)?r.preventDefault():Bve(t,r)};class une{constructor(e,r,n){this.slice=e,this.move=r,this.node=n}}const zve=Ti?"altKey":"ctrlKey";function dne(t,e){let r=t.someProp("dragCopies",n=>!n(e));return r??!e[zve]}jn.dragstart=(t,e)=>{let r=e,n=t.input.mouseDown;if(n&&n.done(),!r.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(P0(r)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Re?i.to-1:i.to))){if(n&&n.mightDrag)o=Re.create(t.state.doc,n.mightDrag.pos);else if(r.target&&r.target.nodeType==1){let h=t.docView.nearestDesc(r.target,!0);h&&h.node.type.spec.draggable&&h!=t.docView&&(o=Re.create(t.state.doc,h.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c,slice:d}=gM(t,a);(!r.dataTransfer.files.length||!Br||Dre>120)&&r.dataTransfer.clearData(),r.dataTransfer.setData(gp?"Text":"text/html",l.innerHTML),r.dataTransfer.effectAllowed="copyMove",gp||r.dataTransfer.setData("text/plain",c),t.dragging=new une(d,dne(t,r),o)};jn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Pn.dragover=Pn.dragenter=(t,e)=>e.preventDefault();Pn.drop=(t,e)=>{try{Vve(t,e,t.dragging)}finally{t.dragging=null}};function Vve(t,e,r){if(!e.dataTransfer)return;let n=t.posAtCoords(P0(e));if(!n)return;let i=t.state.doc.resolve(n.pos),s=r&&r.slice;s?t.someProp("transformPasted",p=>{s=p(s,t,!1)}):s=Zre(t,cne(e.dataTransfer),gp?null:e.dataTransfer.getData("text/html"),!1,i);let o=!!(r&&dne(t,e));if(t.someProp("handleDrop",p=>p(t,e,s||me.empty,o))){e.preventDefault();return}if(!s)return;e.preventDefault();let a=s?mre(t.state.doc,i.pos,s):i.pos;a==null&&(a=i.pos);let l=t.state.tr;if(o){let{node:p}=r;p?p.replace(l):l.deleteSelection()}let c=l.mapping.map(a),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,h=l.doc;if(d?l.replaceRangeWith(c,c,s.content.firstChild):l.replaceRange(c,c,s),l.doc.eq(h))return;let f=l.doc.resolve(c);if(d&&Re.isSelectable(s.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(s.content.firstChild))l.setSelection(new Re(f));else{let p=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((m,g,b,y)=>p=y),l.setSelection(mM(t,f,l.doc.resolve(p)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}jn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&bo(t)},20))};jn.blur=(t,e)=>{let r=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),r.relatedTarget&&t.dom.contains(r.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};jn.beforeinput=(t,e)=>{if(Br&&fo&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:n}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=n||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,kl(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Pn)jn[t]=Pn[t];function vp(t,e){if(t==e)return!0;for(let r in t)if(t[r]!==e[r])return!1;for(let r in e)if(!(r in t))return!1;return!0}class Jy{constructor(e,r){this.toDOM=e,this.spec=r||nc,this.side=this.spec.side||0}map(e,r,n,i){let{pos:s,deleted:o}=e.mapResult(r.from+i,this.side<0?-1:1);return o?null:new Tn(s-n,s-n,this)}valid(){return!0}eq(e){return this==e||e instanceof Jy&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&vp(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Ha{constructor(e,r){this.attrs=e,this.spec=r||nc}map(e,r,n,i){let s=e.map(r.from+i,this.spec.inclusiveStart?-1:1)-n,o=e.map(r.to+i,this.spec.inclusiveEnd?1:-1)-n;return s>=o?null:new Tn(s,o,this)}valid(e,r){return r.from<r.to}eq(e){return this==e||e instanceof Ha&&vp(this.attrs,e.attrs)&&vp(this.spec,e.spec)}static is(e){return e.type instanceof Ha}destroy(){}}class xM{constructor(e,r){this.attrs=e,this.spec=r||nc}map(e,r,n,i){let s=e.mapResult(r.from+i,1);if(s.deleted)return null;let o=e.mapResult(r.to+i,-1);return o.deleted||o.pos<=s.pos?null:new Tn(s.pos-n,o.pos-n,this)}valid(e,r){let{index:n,offset:i}=e.content.findIndex(r.from),s;return i==r.from&&!(s=e.child(n)).isText&&i+s.nodeSize==r.to}eq(e){return this==e||e instanceof xM&&vp(this.attrs,e.attrs)&&vp(this.spec,e.spec)}destroy(){}}class Tn{constructor(e,r,n){this.from=e,this.to=r,this.type=n}copy(e,r){return new Tn(e,r,this.type)}eq(e,r=0){return this.type.eq(e.type)&&this.from+r==e.from&&this.to+r==e.to}map(e,r,n){return this.type.map(e,this,r,n)}static widget(e,r,n){return new Tn(e,e,new Jy(r,n))}static inline(e,r,n,i){return new Tn(e,r,new Ha(n,i))}static node(e,r,n,i){return new Tn(e,r,new xM(n,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ha}get widget(){return this.type instanceof Jy}}const _u=[],nc={};class Kt{constructor(e,r){this.local=e.length?e:_u,this.children=r.length?r:_u}static create(e,r){return r.length?Zy(r,e,0,nc):dn}find(e,r,n){let i=[];return this.findInner(e??0,r??1e9,i,0,n),i}findInner(e,r,n,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=r&&a.to>=e&&(!s||s(a.spec))&&n.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<r&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,r-a,n,i+a,s)}}map(e,r,n){return this==dn||e.maps.length==0?this:this.mapInner(e,r,0,0,n||nc)}mapInner(e,r,n,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,n,i);l&&l.type.valid(r,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?Uve(this.children,o||[],e,r,n,i,s):o?new Kt(o.sort(ic),_u):dn}add(e,r){return r.length?this==dn?Kt.create(e,r):this.addInner(e,r,0):this}addInner(e,r,n){let i,s=0;e.forEach((a,l)=>{let c=l+n,d;if(d=fne(r,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,d,c+1):i.splice(s,0,l,l+a.nodeSize,Zy(d,a,c+1,nc)),s+=3}});let o=hne(s?pne(r):r,-n);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new Kt(o.length?this.local.concat(o).sort(ic):this.local,i||this.children)}remove(e){return e.length==0||this==dn?this:this.removeInner(e,0)}removeInner(e,r){let n=this.children,i=this.local;for(let s=0;s<n.length;s+=3){let o,a=n[s]+r,l=n[s+1]+r;for(let d=0,h;d<e.length;d++)(h=e[d])&&h.from>a&&h.to<l&&(e[d]=null,(o||(o=[])).push(h));if(!o)continue;n==this.children&&(n=this.children.slice());let c=n[s+2].removeInner(o,a+1);c!=dn?n[s+2]=c:(n.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,r)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return n==this.children&&i==this.local?this:i.length||n.length?new Kt(i,n):dn}forChild(e,r){if(this==dn)return this;if(r.isLeaf)return Kt.empty;let n,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(n=this.children[a+2]);break}let s=e+1,o=s+r.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Ha){let c=Math.max(s,l.from)-s,d=Math.min(o,l.to)-s;c<d&&(i||(i=[])).push(l.copy(c,d))}}if(i){let a=new Kt(i.sort(ic),_u);return n?new da([a,n]):a}return n||dn}eq(e){if(this==e)return!0;if(!(e instanceof Kt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let r=0;r<this.local.length;r++)if(!this.local[r].eq(e.local[r]))return!1;for(let r=0;r<this.children.length;r+=3)if(this.children[r]!=e.children[r]||this.children[r+1]!=e.children[r+1]||!this.children[r+2].eq(e.children[r+2]))return!1;return!0}locals(e){return wM(this.localsInner(e))}localsInner(e){if(this==dn)return _u;if(e.inlineContent||!this.local.some(Ha.is))return this.local;let r=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof Ha||r.push(this.local[n]);return r}forEachSet(e){e(this)}}Kt.empty=new Kt([],[]);Kt.removeOverlap=wM;const dn=Kt.empty;class da{constructor(e){this.members=e}map(e,r){const n=this.members.map(i=>i.map(e,r,nc));return da.from(n)}forChild(e,r){if(r.isLeaf)return Kt.empty;let n=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,r);s!=dn&&(s instanceof da?n=n.concat(s.members):n.push(s))}return da.from(n)}eq(e){if(!(e instanceof da)||e.members.length!=this.members.length)return!1;for(let r=0;r<this.members.length;r++)if(!this.members[r].eq(e.members[r]))return!1;return!0}locals(e){let r,n=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!r)r=s;else{n&&(r=r.slice(),n=!1);for(let o=0;o<s.length;o++)r.push(s[o])}}return r?wM(n?r:r.sort(ic)):_u}static from(e){switch(e.length){case 0:return dn;case 1:return e[0];default:return new da(e.every(r=>r instanceof Kt)?e:e.reduce((r,n)=>r.concat(n instanceof Kt?n:n.members),[]))}}forEachSet(e){for(let r=0;r<this.members.length;r++)this.members[r].forEachSet(e)}}function Uve(t,e,r,n,i,s,o){let a=t.slice();for(let c=0,d=s;c<r.maps.length;c++){let h=0;r.maps[c].forEach((f,p,m,g)=>{let b=g-m-(p-f);for(let y=0;y<a.length;y+=3){let v=a[y+1];if(v<0||f>v+d-h)continue;let w=a[y]+d-h;p>=w?a[y+1]=f<=w?-2:-1:f>=d&&b&&(a[y]+=b,a[y+1]+=b)}h+=b}),d=r.maps[c].map(d,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let d=r.map(t[c]+s),h=d-i;if(h<0||h>=n.content.size){l=!0;continue}let f=r.map(t[c+1]+s,-1),p=f-i,{index:m,offset:g}=n.content.findIndex(h),b=n.maybeChild(m);if(b&&g==h&&g+b.nodeSize==p){let y=a[c+2].mapInner(r,b,d+1,t[c]+s+1,o);y!=dn?(a[c]=h,a[c+1]=p,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=Hve(a,t,e,r,i,s,o),d=Zy(c,n,0,o);e=d.local;for(let h=0;h<a.length;h+=3)a[h+1]<0&&(a.splice(h,3),h-=3);for(let h=0,f=0;h<d.children.length;h+=3){let p=d.children[h];for(;f<a.length&&a[f]<p;)f+=3;a.splice(f,0,d.children[h],d.children[h+1],d.children[h+2])}}return new Kt(e.sort(ic),a)}function hne(t,e){if(!e||!t.length)return t;let r=[];for(let n=0;n<t.length;n++){let i=t[n];r.push(new Tn(i.from+e,i.to+e,i.type))}return r}function Hve(t,e,r,n,i,s,o){function a(l,c){for(let d=0;d<l.local.length;d++){let h=l.local[d].map(n,i,c);h?r.push(h):o.onRemove&&o.onRemove(l.local[d].spec)}for(let d=0;d<l.children.length;d+=3)a(l.children[d+2],l.children[d]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return r}function fne(t,e,r){if(e.isLeaf)return null;let n=r+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>r&&o.to<n&&((i||(i=[])).push(o),t[s]=null);return i}function pne(t){let e=[];for(let r=0;r<t.length;r++)t[r]!=null&&e.push(t[r]);return e}function Zy(t,e,r,n){let i=[],s=!1;e.forEach((a,l)=>{let c=fne(t,a,l+r);if(c){s=!0;let d=Zy(c,a,r+l+1,n);d!=dn&&i.push(l,l+a.nodeSize,d)}});let o=hne(s?pne(t):t,-r).sort(ic);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(n.onRemove&&n.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new Kt(o,i):dn}function ic(t,e){return t.from-e.from||t.to-e.to}function wM(t){let e=t;for(let r=0;r<e.length-1;r++){let n=e[r];if(n.from!=n.to)for(let i=r+1;i<e.length;i++){let s=e[i];if(s.from==n.from){s.to!=n.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,n.to),h4(e,i+1,s.copy(n.to,s.to)));continue}else{s.from<n.to&&(e==t&&(e=t.slice()),e[r]=n.copy(n.from,s.from),h4(e,i,n.copy(s.from,n.to)));break}}}return e}function h4(t,e,r){for(;e<t.length&&ic(r,t[e])>0;)e++;t.splice(e,0,r)}function E1(t){let e=[];return t.someProp("decorations",r=>{let n=r(t.state);n&&n!=dn&&e.push(n)}),t.cursorWrapper&&e.push(Kt.create(t.state.doc,[t.cursorWrapper.deco])),da.from(e)}const Wve={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Kve=Jn&&Va<=11;class Gve{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class Yve{constructor(e,r){this.view=e,this.handleDOMChange=r,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Gve,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let i=0;i<n.length;i++)this.queue.push(n[i]);Jn&&Va<=11&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),Kve&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Wve)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let r=0;r<e.length;r++)this.queue.push(e[r]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(i4(this.view)){if(this.suppressingSelectionUpdates)return bo(this.view);if(Jn&&Va<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&kc(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let r=new Set,n;for(let s=e.focusNode;s;s=$d(s))r.add(s);for(let s=e.anchorNode;s;s=$d(s))if(r.has(s)){n=s;break}let i=n&&this.view.docView.nearestDesc(n);if(i&&i.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let r=this.pendingRecords();r.length&&(this.queue=[]);let n=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&i4(e)&&!this.ignoreSelectionChange(n),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let d=0;d<r.length;d++){let h=this.registerMutation(r[d],l);h&&(s=s<0?h.from:Math.min(h.from,s),o=o<0?h.to:Math.max(h.to,o),h.typeOver&&(a=!0))}if(Di&&l.length){let d=l.filter(h=>h.nodeName=="BR");if(d.length==2){let[h,f]=d;h.parentNode&&h.parentNode.parentNode==f.parentNode?f.remove():h.remove()}else{let{focusNode:h}=this.currentSelection;for(let f of d){let p=f.parentNode;p&&p.nodeName=="LI"&&(!h||Jve(e,h)!=p)&&f.remove()}}}else if((Br||gn)&&l.some(d=>d.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let d of l)if(d.nodeName=="BR"&&d.parentNode){let h=d.nextSibling;h&&h.nodeType==1&&h.contentEditable=="false"&&d.parentNode.removeChild(d)}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&O0(n)&&(c=pM(e))&&c.eq(Ge.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,bo(e),this.currentSelection.set(n),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),Qve(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||bo(e),this.currentSelection.set(n))}registerMutation(e,r){if(r.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(n==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let h=e.addedNodes[d];r.push(h),h.nodeType==3&&(this.lastChangedTextNode=h)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let i=e.previousSibling,s=e.nextSibling;if(Jn&&Va<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:h,nextSibling:f}=e.addedNodes[d];(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}let o=i&&i.parentNode==e.target?tn(i)+1:0,a=n.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?tn(s):e.target.childNodes.length,c=n.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let f4=new WeakMap,p4=!1;function Qve(t){if(!f4.has(t)&&(f4.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Di,p4)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),p4=!0}}function m4(t,e){let r=e.startContainer,n=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return kc(o.node,o.offset,i,s)&&([r,n,i,s]=[i,s,r,n]),{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:s}}function Xve(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return m4(t,i)}let r;function n(i){i.preventDefault(),i.stopImmediatePropagation(),r=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0),r?m4(t,r):null}function Jve(t,e){for(let r=e.parentNode;r&&r!=t.dom;r=r.parentNode){let n=t.docView.nearestDesc(r,!0);if(n&&n.node.isBlock)return r}return null}function Zve(t,e,r){let{node:n,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,r),l=t.domSelectionRange(),c,d=l.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(c=[{node:d,offset:l.anchorOffset}],O0(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Br&&t.input.lastKeyCode===8)for(let b=s;b>i;b--){let y=n.childNodes[b-1],v=y.pmViewDesc;if(y.nodeName=="BR"&&!v){s=b;break}if(!v||v.size)break}let h=t.state.doc,f=t.someProp("domParser")||za.fromSchema(t.state.schema),p=h.resolve(o),m=null,g=f.parse(n,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:s,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:e0e,context:p});if(c&&c[0].pos!=null){let b=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=b),m={anchor:b+o,head:y+o}}return{doc:g,sel:m,from:o,to:a}}function e0e(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(gn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}else if(t.parentNode.lastChild==t||gn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const t0e=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function r0e(t,e,r,n,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let N=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,E=pM(t,N);if(E&&!t.state.selection.eq(E)){if(Br&&fo&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",C=>C(t,kl(13,"Enter"))))return;let k=t.state.tr.setSelection(E);N=="pointer"?k.setMeta("pointer",!0):N=="key"&&k.scrollIntoView(),s&&k.setMeta("composition",s),t.dispatch(k)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(r);e=o.before(a+1),r=t.state.doc.resolve(r).after(a+1);let l=t.state.selection,c=Zve(t,e,r),d=t.state.doc,h=d.slice(c.from,c.to),f,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,p="end"):(f=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let m=s0e(h.content,c.doc.content,c.from,f,p);if(m&&t.input.domChangeCount++,(Dd&&t.input.lastIOSEnter>Date.now()-225||fo)&&i.some(N=>N.nodeType==1&&!t0e.test(N.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",N=>N(t,kl(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(n&&l instanceof Be&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))m={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let N=g4(t,t.state.doc,c.sel);if(N&&!N.eq(t.state.selection)){let E=t.state.tr.setSelection(N);s&&E.setMeta("composition",s),t.dispatch(E)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof Be&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),Jn&&Va<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>c.from&&c.doc.textBetween(m.start-c.from-1,m.start-c.from+1)==" "&&(m.start--,m.endA--,m.endB--);let g=c.doc.resolveNoCache(m.start-c.from),b=c.doc.resolveNoCache(m.endB-c.from),y=d.resolve(m.start),v=g.sameParent(b)&&g.parent.inlineContent&&y.end()>=m.endA;if((Dd&&t.input.lastIOSEnter>Date.now()-225&&(!v||i.some(N=>N.nodeName=="DIV"||N.nodeName=="P"))||!v&&g.pos<c.doc.content.size&&(!g.sameParent(b)||!g.parent.inlineContent)&&g.pos<b.pos&&!/\S/.test(c.doc.textBetween(g.pos,b.pos,"","")))&&t.someProp("handleKeyDown",N=>N(t,kl(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&i0e(d,m.start,m.endA,g,b)&&t.someProp("handleKeyDown",N=>N(t,kl(8,"Backspace")))){fo&&Br&&t.domObserver.suppressSelectionUpdates();return}Br&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),fo&&!v&&g.start()!=b.start()&&b.parentOffset==0&&g.depth==b.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==m.endA&&(m.endB-=2,b=c.doc.resolveNoCache(m.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(N){return N(t,kl(13,"Enter"))})},20));let w=m.start,x=m.endA,S=N=>{let E=N||t.state.tr.replace(w,x,c.doc.slice(m.start-c.from,m.endB-c.from));if(c.sel){let k=g4(t,E.doc,c.sel);k&&!(Br&&t.composing&&k.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(k.head==w||k.head==E.mapping.map(x)-1)||Jn&&k.empty&&k.head==w)&&E.setSelection(k)}return s&&E.setMeta("composition",s),E.scrollIntoView()},_;if(v)if(g.pos==b.pos){Jn&&Va<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>bo(t),20));let N=S(t.state.tr.delete(w,x)),E=d.resolve(m.start).marksAcross(d.resolve(m.endA));E&&N.ensureMarks(E),t.dispatch(N)}else if(m.endA==m.endB&&(_=n0e(g.parent.content.cut(g.parentOffset,b.parentOffset),y.parent.content.cut(y.parentOffset,m.endA-y.start())))){let N=S(t.state.tr);_.type=="add"?N.addMark(w,x,_.mark):N.removeMark(w,x,_.mark),t.dispatch(N)}else if(g.parent.child(g.index()).isText&&g.index()==b.index()-(b.textOffset?0:1)){let N=g.parent.textBetween(g.parentOffset,b.parentOffset),E=()=>S(t.state.tr.insertText(N,w,x));t.someProp("handleTextInput",k=>k(t,w,x,N,E))||t.dispatch(E())}else t.dispatch(S());else t.dispatch(S())}function g4(t,e,r){return Math.max(r.anchor,r.head)>e.content.size?null:mM(t,e.resolve(r.anchor),e.resolve(r.head))}function n0e(t,e){let r=t.firstChild.marks,n=e.firstChild.marks,i=r,s=n,o,a,l;for(let d=0;d<n.length;d++)i=n[d].removeFromSet(i);for(let d=0;d<r.length;d++)s=r[d].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=d=>d.mark(a.addToSet(d.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=d=>d.mark(a.removeFromSet(d.marks));else return null;let c=[];for(let d=0;d<e.childCount;d++)c.push(l(e.child(d)));if(Q.from(c).eq(t))return{mark:a,type:o}}function i0e(t,e,r,n,i){if(r-e<=i.pos-n.pos||N1(n,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!n.parent.isTextblock){let a=s.nodeAfter;return a!=null&&r==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(N1(s,!0,!0));return!o.parent.isTextblock||o.pos>r||N1(o,!0,!1)<r?!1:n.parent.content.cut(n.parentOffset).eq(o.parent.content)}function N1(t,e,r){let n=t.depth,i=e?t.end():t.pos;for(;n>0&&(e||t.indexAfter(n)==t.node(n).childCount);)n--,i++,e=!1;if(r){let s=t.node(n).maybeChild(t.indexAfter(n));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function s0e(t,e,r,n,i){let s=t.findDiffStart(e,r);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,r+t.size,r+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.size<e.size){let l=n<=s&&n>=o?s-n:0;s-=l,s&&s<e.size&&y4(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,s&&s<t.size&&y4(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function y4(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),r=t.charCodeAt(1);return e>=56320&&e<=57343&&r>=55296&&r<=56319}class mne{constructor(e,r){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Sve,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=r,this.state=r.state,this.directPlugins=r.plugins||[],this.directPlugins.forEach(S4),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=x4(this),b4(this),this.nodeViews=w4(this),this.docView=JF(this.state.doc,v4(this),E1(this),this.dom,this),this.domObserver=new Yve(this,(n,i,s,o)=>r0e(this,n,i,s,o)),this.domObserver.start(),_ve(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let r in e)this._props[r]=e[r];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&sI(this);let r=this._props;this._props=e,e.plugins&&(e.plugins.forEach(S4),this.directPlugins=e.plugins),this.updateStateInner(e.state,r)}setProps(e){let r={};for(let n in this._props)r[n]=this._props[n];r.state=this.state;for(let n in e)r[n]=e[n];this.update(r)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,r){var n;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(lne(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=r.plugins;if(a||this._props.plugins!=r.plugins||this._props.nodeViews!=r.nodeViews){let p=w4(this);a0e(p,this.nodeViews)&&(this.nodeViews=p,s=!0)}(a||r.handleDOMEvents!=this._props.handleDOMEvents)&&sI(this),this.editable=x4(this),b4(this);let l=E1(this),c=v4(this),d=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",h=s||!this.docView.matchesNode(e.doc,c,l);(h||!e.selection.eq(i.selection))&&(o=!0);let f=d=="preserve"&&o&&this.dom.style.overflowAnchor==null&&Aye(this);if(o){this.domObserver.stop();let p=h&&(Jn||Br)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&o0e(i.selection,e.selection);if(h){let m=Br?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Ave(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=JF(e.doc,c,l,this.dom,this)),m&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&ave(this))?bo(this,p):(Qre(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((n=this.dragging)===null||n===void 0)&&n.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():f&&Fye(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",r=>r(this)))if(this.state.selection instanceof Re){let r=this.docView.domAfterPos(this.state.selection.from);r.nodeType==1&&WF(this,r.getBoundingClientRect(),e)}else WF(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let r=0;r<this.directPlugins.length;r++){let n=this.directPlugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let r=0;r<this.state.plugins.length;r++){let n=this.state.plugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let r=0;r<this.pluginViews.length;r++){let n=this.pluginViews[r];n.update&&n.update(this,e)}}updateDraggedNode(e,r){let n=e.node,i=-1;if(this.state.doc.nodeAt(n.from)==n.node)i=n.from;else{let s=n.from+(this.state.doc.content.size-r.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==n.node&&(i=s)}this.dragging=new une(e.slice,e.move,i<0?void 0:Re.create(this.state.doc,i))}someProp(e,r){let n=this._props&&this._props[e],i;if(n!=null&&(i=r?r(n):n))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=r?r(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=r?r(a):a))return i}}hasFocus(){if(Jn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&qye(this.dom),bo(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let r=this.dom.parentNode;r;r=r.parentNode)if(r.nodeType==9||r.nodeType==11&&r.host)return r.getSelection||(Object.getPrototypeOf(r).getSelection=()=>r.ownerDocument.getSelection()),this._root=r}return e||document}updateRoot(){this._root=null}posAtCoords(e){return Uye(this,e)}coordsAtPos(e,r=1){return zre(this,e,r)}domAtPos(e,r=0){return this.docView.domFromPos(e,r)}nodeDOM(e){let r=this.docView.descAt(e);return r?r.nodeDOM:null}posAtDOM(e,r,n=-1){let i=this.docView.posFromDOM(e,r,n);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,r){return Yye(this,r||this.state,e)}pasteHTML(e,r){return yp(this,"",e,!1,r||new ClipboardEvent("paste"))}pasteText(e,r){return yp(this,e,null,!0,r||new ClipboardEvent("paste"))}serializeForClipboard(e){return gM(this,e)}destroy(){this.docView&&(Eve(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],E1(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,kye())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Cve(this,e)}domSelectionRange(){let e=this.domSelection();return e?gn&&this.root.nodeType===11&&Iye(this.dom.ownerDocument)==this.dom&&Xve(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}mne.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function v4(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",r=>{if(typeof r=="function"&&(r=r(t.state)),r)for(let n in r)n=="class"?e.class+=" "+r[n]:n=="style"?e.style=(e.style?e.style+";":"")+r[n]:!e[n]&&n!="contenteditable"&&n!="nodeName"&&(e[n]=String(r[n]))}),e.translate||(e.translate="no"),[Tn.node(0,t.state.doc.content.size,e)]}function b4(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Tn.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function x4(t){return!t.someProp("editable",e=>e(t.state)===!1)}function o0e(t,e){let r=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(r)!=e.$anchor.start(r)}function w4(t){let e=Object.create(null);function r(n){for(let i in n)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=n[i])}return t.someProp("nodeViews",r),t.someProp("markViews",r),e}function a0e(t,e){let r=0,n=0;for(let i in t){if(t[i]!=e[i])return!0;r++}for(let i in e)n++;return r!=n}function S4(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var tl={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ev={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},l0e=typeof navigator<"u"&&/Mac/.test(navigator.platform),c0e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var rn=0;rn<10;rn++)tl[48+rn]=tl[96+rn]=String(rn);for(var rn=1;rn<=24;rn++)tl[rn+111]="F"+rn;for(var rn=65;rn<=90;rn++)tl[rn]=String.fromCharCode(rn+32),ev[rn]=String.fromCharCode(rn);for(var C1 in tl)ev.hasOwnProperty(C1)||(ev[C1]=tl[C1]);function u0e(t){var e=l0e&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||c0e&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",r=!e&&t.key||(t.shiftKey?ev:tl)[t.keyCode]||t.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}const d0e=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),h0e=typeof navigator<"u"&&/Win/.test(navigator.platform);function f0e(t){let e=t.split(/-(?!$)/),r=e[e.length-1];r=="Space"&&(r=" ");let n,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))d0e?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return n&&(r="Alt-"+r),i&&(r="Ctrl-"+r),o&&(r="Meta-"+r),s&&(r="Shift-"+r),r}function p0e(t){let e=Object.create(null);for(let r in t)e[f0e(r)]=t[r];return e}function k1(t,e,r=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),r&&e.shiftKey&&(t="Shift-"+t),t}function m0e(t){return new Xt({props:{handleKeyDown:gne(t)}})}function gne(t){let e=p0e(t);return function(r,n){let i=u0e(n),s,o=e[k1(i,n)];if(o&&o(r.state,r.dispatch,r))return!0;if(i.length==1&&i!=" "){if(n.shiftKey){let a=e[k1(i,n,!1)];if(a&&a(r.state,r.dispatch,r))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(h0e&&n.ctrlKey&&n.altKey)&&(s=tl[n.keyCode])&&s!=i){let a=e[k1(s,n)];if(a&&a(r.state,r.dispatch,r))return!0}}return!1}}var g0e=Object.defineProperty,SM=(t,e)=>{for(var r in e)g0e(t,r,{get:e[r],enumerable:!0})};function I0(t){const{state:e,transaction:r}=t;let{selection:n}=r,{doc:i}=r,{storedMarks:s}=r;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return n},get doc(){return i},get tr(){return n=r.selection,i=r.doc,s=r.storedMarks,r}}}var R0=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:r}=this,{view:n}=e,{tr:i}=r,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([o,a])=>[o,(...c)=>{const d=a(...c)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&n.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:r,editor:n,state:i}=this,{view:s}=n,o=[],a=!!t,l=t||i.tr,c=()=>(!a&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(l),o.every(h=>h===!0)),d={...Object.fromEntries(Object.entries(r).map(([h,f])=>[h,(...m)=>{const g=this.buildProps(l,e),b=f(...m)(g);return o.push(b),d}])),run:c};return d}createCan(t){const{rawCommands:e,state:r}=this,n=!1,i=t||r.tr,s=this.buildProps(i,n);return{...Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...c)=>l(...c)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,n)}}buildProps(t,e=!0){const{rawCommands:r,editor:n,state:i}=this,{view:s}=n,o={tr:t,editor:n,view:s,state:I0({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(r).map(([a,l])=>[a,(...c)=>l(...c)(o)]))}};return o}},yne={};SM(yne,{blur:()=>y0e,clearContent:()=>v0e,clearNodes:()=>b0e,command:()=>x0e,createParagraphNear:()=>w0e,cut:()=>S0e,deleteCurrentNode:()=>_0e,deleteNode:()=>E0e,deleteRange:()=>N0e,deleteSelection:()=>C0e,enter:()=>k0e,exitCode:()=>T0e,extendMarkRange:()=>O0e,first:()=>j0e,focus:()=>I0e,forEach:()=>R0e,insertContent:()=>M0e,insertContentAt:()=>A0e,joinBackward:()=>L0e,joinDown:()=>q0e,joinForward:()=>B0e,joinItemBackward:()=>z0e,joinItemForward:()=>V0e,joinTextblockBackward:()=>U0e,joinTextblockForward:()=>H0e,joinUp:()=>F0e,keyboardShortcut:()=>K0e,lift:()=>G0e,liftEmptyBlock:()=>Y0e,liftListItem:()=>Q0e,newlineInCode:()=>X0e,resetAttributes:()=>J0e,scrollIntoView:()=>Z0e,selectAll:()=>ebe,selectNodeBackward:()=>tbe,selectNodeForward:()=>rbe,selectParentNode:()=>nbe,selectTextblockEnd:()=>ibe,selectTextblockStart:()=>sbe,setContent:()=>obe,setMark:()=>Cbe,setMeta:()=>kbe,setNode:()=>Tbe,setNodeSelection:()=>Obe,setTextDirection:()=>jbe,setTextSelection:()=>Pbe,sinkListItem:()=>Ibe,splitBlock:()=>Rbe,splitListItem:()=>Mbe,toggleList:()=>$be,toggleMark:()=>Dbe,toggleNode:()=>Abe,toggleWrap:()=>Fbe,undoInputRule:()=>qbe,unsetAllMarks:()=>Lbe,unsetMark:()=>Bbe,unsetTextDirection:()=>zbe,updateAttributes:()=>Vbe,wrapIn:()=>Ube,wrapInList:()=>Hbe});var y0e=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var r;t.isDestroyed||(e.dom.blur(),(r=window==null?void 0:window.getSelection())==null||r.removeAllRanges())}),!0),v0e=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),b0e=()=>({state:t,tr:e,dispatch:r})=>{const{selection:n}=e,{ranges:i}=n;return r&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:d}=e,h=c.resolve(d.map(l)),f=c.resolve(d.map(l+a.nodeSize)),p=h.blockRange(f);if(!p)return;const m=nh(p);if(a.type.isTextblock){const{defaultType:g}=h.parent.contentMatchAt(h.index());e.setNodeMarkup(p.start,g)}(m||m===0)&&e.lift(p,m)})}),!0},x0e=t=>e=>t(e),w0e=()=>({state:t,dispatch:e})=>Pre(t,e),S0e=(t,e)=>({editor:r,tr:n})=>{const{state:i}=r,s=i.doc.slice(t.from,t.to);n.deleteRange(t.from,t.to);const o=n.mapping.map(e);return n.insert(o,s.content),n.setSelection(new Be(n.doc.resolve(Math.max(o-1,0)))),!0},_0e=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,n=r.$anchor.node();if(n.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===n.type){if(e){const a=i.before(s),l=i.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1};function Er(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var E0e=t=>({tr:e,state:r,dispatch:n})=>{const i=Er(t,r.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(n){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},N0e=t=>({tr:e,dispatch:r})=>{const{from:n,to:i}=t;return r&&e.delete(n,i),!0},C0e=()=>({state:t,dispatch:e})=>lM(t,e),k0e=()=>({commands:t})=>t.keyboardShortcut("Enter"),T0e=()=>({state:t,dispatch:e})=>hye(t,e);function _M(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function tv(t,e,r={strict:!0}){const n=Object.keys(e);return n.length?n.every(i=>r.strict?e[i]===t[i]:_M(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function vne(t,e,r={}){return t.find(n=>n.type===e&&tv(Object.fromEntries(Object.keys(r).map(i=>[i,n.attrs[i]])),r))}function _4(t,e,r={}){return!!vne(t,e,r)}function EM(t,e,r){var n;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(d=>d.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(d=>d.type===e)||(r=r||((n=i.node.marks[0])==null?void 0:n.attrs),!vne([...i.node.marks],e,r)))return;let o=i.index,a=t.start()+i.offset,l=o+1,c=a+i.node.nodeSize;for(;o>0&&_4([...t.parent.child(o-1).marks],e,r);)o-=1,a-=t.parent.child(o).nodeSize;for(;l<t.parent.childCount&&_4([...t.parent.child(l).marks],e,r);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function Lo(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var O0e=(t,e={})=>({tr:r,state:n,dispatch:i})=>{const s=Lo(t,n.schema),{doc:o,selection:a}=r,{$from:l,from:c,to:d}=a;if(i){const h=EM(l,s,e);if(h&&h.from<=c&&h.to>=d){const f=Be.create(o,h.from,h.to);r.setSelection(f)}}return!0},j0e=t=>e=>{const r=typeof t=="function"?t(e):t;for(let n=0;n<r.length;n+=1)if(r[n](e))return!0;return!1};function bne(t){return t instanceof Be}function $l(t=0,e=0,r=0){return Math.min(Math.max(t,e),r)}function xne(t,e=null){if(!e)return null;const r=Ge.atStart(t),n=Ge.atEnd(t);if(e==="start"||e===!0)return r;if(e==="end")return n;const i=r.from,s=n.to;return e==="all"?Be.create(t,$l(0,i,s),$l(t.content.size,i,s)):Be.create(t,$l(e,i,s),$l(e,i,s))}function E4(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function rv(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function P0e(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var I0e=(t=null,e={})=>({editor:r,view:n,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(rv()||E4())&&n.dom.focus(),P0e()&&!rv()&&!E4()&&n.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{r.isDestroyed||(n.focus(),e!=null&&e.scrollIntoView&&r.commands.scrollIntoView())})};if(n.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!bne(r.state.selection))return o(),!0;const a=xne(i.doc,t)||r.state.selection,l=r.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},R0e=(t,e)=>r=>t.every((n,i)=>e(n,{...r,index:i})),M0e=(t,e)=>({tr:r,commands:n})=>n.insertContentAt({from:r.selection.from,to:r.selection.to},t,e),wne=t=>{const e=t.childNodes;for(let r=e.length-1;r>=0;r-=1){const n=e[r];n.nodeType===3&&n.nodeValue&&/^(\n\s\s|\n)$/.test(n.nodeValue)?t.removeChild(n):n.nodeType===1&&wne(n)}return t};function bg(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,r=new window.DOMParser().parseFromString(e,"text/html").body;return wne(r)}function bp(t,e,r){if(t instanceof Ba||t instanceof Q)return t;r={slice:!0,parseOptions:{},...r};const n=typeof t=="object"&&t!==null,i=typeof t=="string";if(n)try{if(Array.isArray(t)&&t.length>0)return Q.fromArray(t.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(t);return r.errorOnInvalidContent&&o.check(),o}catch(s){if(r.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),bp("",e,r)}if(i){if(r.errorOnInvalidContent){let o=!1,a="";const l=new ire({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(r.slice?za.fromSchema(l).parseSlice(bg(t),r.parseOptions):za.fromSchema(l).parse(bg(t),r.parseOptions),r.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=za.fromSchema(e);return r.slice?s.parseSlice(bg(t),r.parseOptions).content:s.parse(bg(t),r.parseOptions)}return bp("",e,r)}function $0e(t,e,r){const n=t.steps.length-1;if(n<e)return;const i=t.steps[n];if(!(i instanceof qr||i instanceof Vr))return;const s=t.mapping.maps[n];let o=0;s.forEach((a,l,c,d)=>{o===0&&(o=d)}),t.setSelection(Ge.near(t.doc.resolve(o),r))}var D0e=t=>!("type"in t),A0e=(t,e,r)=>({tr:n,dispatch:i,editor:s})=>{var o;if(i){r={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...r};let a;const l=b=>{s.emit("contentError",{editor:s,error:b,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...r.parseOptions};if(!r.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{bp(e,s.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(b){l(b)}try{a=bp(e,s.schema,{parseOptions:c,errorOnInvalidContent:(o=r.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(b){return l(b),!1}let{from:d,to:h}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},f=!0,p=!0;if((D0e(a)?a:[a]).forEach(b=>{b.check(),f=f?b.isText&&b.marks.length===0:!1,p=p?b.isBlock:!1}),d===h&&p){const{parent:b}=n.doc.resolve(d);b.isTextblock&&!b.type.spec.code&&!b.childCount&&(d-=1,h+=1)}let g;if(f){if(Array.isArray(e))g=e.map(b=>b.text||"").join("");else if(e instanceof Q){let b="";e.forEach(y=>{y.text&&(b+=y.text)}),g=b}else typeof e=="object"&&e&&e.text?g=e.text:g=e;n.insertText(g,d,h)}else{g=a;const b=n.doc.resolve(d),y=b.node(),v=b.parentOffset===0,w=y.isText||y.isTextblock,x=y.content.size>0;v&&w&&x&&(d=Math.max(0,d-1)),n.replaceWith(d,h,g)}r.updateSelection&&$0e(n,n.steps.length-1,-1),r.applyInputRules&&n.setMeta("applyInputRules",{from:d,text:g}),r.applyPasteRules&&n.setMeta("applyPasteRules",{from:d,text:g})}return!0},F0e=()=>({state:t,dispatch:e})=>cye(t,e),q0e=()=>({state:t,dispatch:e})=>uye(t,e),L0e=()=>({state:t,dispatch:e})=>Ere(t,e),B0e=()=>({state:t,dispatch:e})=>Tre(t,e),z0e=()=>({state:t,dispatch:e,tr:r})=>{try{const n=C0(t.doc,t.selection.$from.pos,-1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},V0e=()=>({state:t,dispatch:e,tr:r})=>{try{const n=C0(t.doc,t.selection.$from.pos,1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},U0e=()=>({state:t,dispatch:e})=>aye(t,e),H0e=()=>({state:t,dispatch:e})=>lye(t,e);function Sne(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function W0e(t){const e=t.split(/-(?!$)/);let r=e[e.length-1];r==="Space"&&(r=" ");let n,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))rv()||Sne()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return n&&(r=`Alt-${r}`),i&&(r=`Ctrl-${r}`),o&&(r=`Meta-${r}`),s&&(r=`Shift-${r}`),r}var K0e=t=>({editor:e,view:r,tr:n,dispatch:i})=>{const s=W0e(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{r.someProp("handleKeyDown",c=>c(r,a))});return l==null||l.steps.forEach(c=>{const d=c.map(n.mapping);d&&i&&n.maybeStep(d)}),!0};function rl(t,e,r={}){const{from:n,to:i,empty:s}=t.selection,o=e?Er(e,t.schema):null,a=[];t.doc.nodesBetween(n,i,(h,f)=>{if(h.isText)return;const p=Math.max(n,f),m=Math.min(i,f+h.nodeSize);a.push({node:h,from:p,to:m})});const l=i-n,c=a.filter(h=>o?o.name===h.node.type.name:!0).filter(h=>tv(h.node.attrs,r,{strict:!1}));return s?!!c.length:c.reduce((h,f)=>h+f.to-f.from,0)>=l}var G0e=(t,e={})=>({state:r,dispatch:n})=>{const i=Er(t,r.schema);return rl(r,i,e)?dye(r,n):!1},Y0e=()=>({state:t,dispatch:e})=>Ire(t,e),Q0e=t=>({state:e,dispatch:r})=>{const n=Er(t,e.schema);return _ye(n)(e,r)},X0e=()=>({state:t,dispatch:e})=>jre(t,e);function M0(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function N4(t,e){const r=typeof e=="string"?[e]:e;return Object.keys(t).reduce((n,i)=>(r.includes(i)||(n[i]=t[i]),n),{})}var J0e=(t,e)=>({tr:r,state:n,dispatch:i})=>{let s=null,o=null;const a=M0(typeof t=="string"?t:t.name,n.schema);if(!a)return!1;a==="node"&&(s=Er(t,n.schema)),a==="mark"&&(o=Lo(t,n.schema));let l=!1;return r.selection.ranges.forEach(c=>{n.doc.nodesBetween(c.$from.pos,c.$to.pos,(d,h)=>{s&&s===d.type&&(l=!0,i&&r.setNodeMarkup(h,void 0,N4(d.attrs,e))),o&&d.marks.length&&d.marks.forEach(f=>{o===f.type&&(l=!0,i&&r.addMark(h,h+d.nodeSize,o.create(N4(f.attrs,e))))})})}),l},Z0e=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),ebe=()=>({tr:t,dispatch:e})=>{if(e){const r=new fi(t.doc);t.setSelection(r)}return!0},tbe=()=>({state:t,dispatch:e})=>Cre(t,e),rbe=()=>({state:t,dispatch:e})=>Ore(t,e),nbe=()=>({state:t,dispatch:e})=>mye(t,e),ibe=()=>({state:t,dispatch:e})=>vye(t,e),sbe=()=>({state:t,dispatch:e})=>yye(t,e);function oI(t,e,r={},n={}){return bp(t,e,{slice:!1,parseOptions:r,errorOnInvalidContent:n.errorOnInvalidContent})}var obe=(t,{errorOnInvalidContent:e,emitUpdate:r=!0,parseOptions:n={}}={})=>({editor:i,tr:s,dispatch:o,commands:a})=>{const{doc:l}=s;if(n.preserveWhitespace!=="full"){const c=oI(t,i.schema,n,{errorOnInvalidContent:e??i.options.enableContentCheck});return o&&s.replaceWith(0,l.content.size,c).setMeta("preventUpdate",!r),!0}return o&&s.setMeta("preventUpdate",!r),a.insertContentAt({from:0,to:l.content.size},t,{parseOptions:n,errorOnInvalidContent:e??i.options.enableContentCheck})};function _ne(t,e){const r=Lo(e,t.schema),{from:n,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(n,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===r.name);return a?{...a.attrs}:{}}function Ene(t,e){const r=new xre(t);return e.forEach(n=>{n.steps.forEach(i=>{r.step(i)})}),r}function abe(t){for(let e=0;e<t.edgeCount;e+=1){const{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function lbe(t,e,r){const n=[];return t.nodesBetween(e.from,e.to,(i,s)=>{r(i)&&n.push({node:i,pos:s})}),n}function cbe(t,e){for(let r=t.depth;r>0;r-=1){const n=t.node(r);if(e(n))return{pos:r>0?t.before(r):0,start:t.start(r),depth:r,node:n}}}function $0(t){return e=>cbe(e.$from,t)}function je(t,e,r){return t.config[e]===void 0&&t.parent?je(t.parent,e,r):typeof t.config[e]=="function"?t.config[e].bind({...r,parent:t.parent?je(t.parent,e,r):null}):t.config[e]}function NM(t){return t.map(e=>{const r={name:e.name,options:e.options,storage:e.storage},n=je(e,"addExtensions",r);return n?[e,...NM(n())]:e}).flat(10)}function CM(t,e){const r=Vc.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(r),i.innerHTML}function Nne(t){return typeof t=="function"}function _t(t,e=void 0,...r){return Nne(t)?e?t.bind(e)(...r):t(...r):t}function ube(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Ad(t){const e=t.filter(i=>i.type==="extension"),r=t.filter(i=>i.type==="node"),n=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:r,markExtensions:n}}function Cne(t){const e=[],{nodeExtensions:r,markExtensions:n}=Ad(t),i=[...r,...n],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:i},l=je(o,"addGlobalAttributes",a);if(!l)return;l().forEach(d=>{d.types.forEach(h=>{Object.entries(d.attributes).forEach(([f,p])=>{e.push({type:h,name:f,attribute:{...s,...p}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=je(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([d,h])=>{const f={...s,...h};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:o.name,name:d,attribute:f})})}),e}function Nr(...t){return t.filter(e=>!!e).reduce((e,r)=>{const n={...e};return Object.entries(r).forEach(([i,s])=>{if(!n[i]){n[i]=s;return}if(i==="class"){const a=s?String(s).split(" "):[],l=n[i]?n[i].split(" "):[],c=a.filter(d=>!l.includes(d));n[i]=[...l,...c].join(" ")}else if(i==="style"){const a=s?s.split(";").map(d=>d.trim()).filter(Boolean):[],l=n[i]?n[i].split(";").map(d=>d.trim()).filter(Boolean):[],c=new Map;l.forEach(d=>{const[h,f]=d.split(":").map(p=>p.trim());c.set(h,f)}),a.forEach(d=>{const[h,f]=d.split(":").map(p=>p.trim());c.set(h,f)}),n[i]=Array.from(c.entries()).map(([d,h])=>`${d}: ${h}`).join("; ")}else n[i]=s}),n},{})}function xp(t,e){return e.filter(r=>r.type===t.type.name).filter(r=>r.attribute.rendered).map(r=>r.attribute.renderHTML?r.attribute.renderHTML(t.attrs)||{}:{[r.name]:t.attrs[r.name]}).reduce((r,n)=>Nr(r,n),{})}function dbe(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function C4(t,e){return"style"in t?t:{...t,getAttrs:r=>{const n=t.getAttrs?t.getAttrs(r):t.attrs;if(n===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(r):dbe(r.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...n,...i}}}}function k4(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>e==="attrs"&&ube(r)?!1:r!=null))}function T4(t){var e,r;const n={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&"default"in((t==null?void 0:t.attribute)||{})&&(n.default=t.attribute.default),((r=t==null?void 0:t.attribute)==null?void 0:r.validate)!==void 0&&(n.validate=t.attribute.validate),[t.name,n]}function hbe(t,e){var r;const n=Cne(t),{nodeExtensions:i,markExtensions:s}=Ad(t),o=(r=i.find(c=>je(c,"topNode")))==null?void 0:r.name,a=Object.fromEntries(i.map(c=>{const d=n.filter(y=>y.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((y,v)=>{const w=je(v,"extendNodeSchema",h);return{...y,...w?w(c):{}}},{}),p=k4({...f,content:_t(je(c,"content",h)),marks:_t(je(c,"marks",h)),group:_t(je(c,"group",h)),inline:_t(je(c,"inline",h)),atom:_t(je(c,"atom",h)),selectable:_t(je(c,"selectable",h)),draggable:_t(je(c,"draggable",h)),code:_t(je(c,"code",h)),whitespace:_t(je(c,"whitespace",h)),linebreakReplacement:_t(je(c,"linebreakReplacement",h)),defining:_t(je(c,"defining",h)),isolating:_t(je(c,"isolating",h)),attrs:Object.fromEntries(d.map(T4))}),m=_t(je(c,"parseHTML",h));m&&(p.parseDOM=m.map(y=>C4(y,d)));const g=je(c,"renderHTML",h);g&&(p.toDOM=y=>g({node:y,HTMLAttributes:xp(y,d)}));const b=je(c,"renderText",h);return b&&(p.toText=b),[c.name,p]})),l=Object.fromEntries(s.map(c=>{const d=n.filter(b=>b.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((b,y)=>{const v=je(y,"extendMarkSchema",h);return{...b,...v?v(c):{}}},{}),p=k4({...f,inclusive:_t(je(c,"inclusive",h)),excludes:_t(je(c,"excludes",h)),group:_t(je(c,"group",h)),spanning:_t(je(c,"spanning",h)),code:_t(je(c,"code",h)),attrs:Object.fromEntries(d.map(T4))}),m=_t(je(c,"parseHTML",h));m&&(p.parseDOM=m.map(b=>C4(b,d)));const g=je(c,"renderHTML",h);return g&&(p.toDOM=b=>g({mark:b,HTMLAttributes:xp(b,d)})),[c.name,p]}));return new ire({topNode:o,nodes:a,marks:l})}function fbe(t){const e=t.filter((r,n)=>t.indexOf(r)!==n);return Array.from(new Set(e))}function nv(t){return t.sort((r,n)=>{const i=je(r,"priority")||100,s=je(n,"priority")||100;return i>s?-1:i<s?1:0})}function kne(t){const e=nv(NM(t)),r=fbe(e.map(n=>n.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(n=>`'${n}'`).join(", ")}]. This can lead to issues.`),e}function Tne(t,e,r){const{from:n,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=r||{};let a="";return t.nodesBetween(n,i,(l,c,d,h)=>{var f;l.isBlock&&c>n&&(a+=s);const p=o==null?void 0:o[l.type.name];if(p)return d&&(a+=p({node:l,pos:c,parent:d,index:h,range:e})),!1;l.isText&&(a+=(f=l==null?void 0:l.text)==null?void 0:f.slice(Math.max(n,c)-c,i-c))}),a}function pbe(t,e){const r={from:0,to:t.content.size};return Tne(t,r,e)}function One(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,r])=>[e,r.spec.toText]))}function mbe(t,e){const r=Er(e,t.schema),{from:n,to:i}=t.selection,s=[];t.doc.nodesBetween(n,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===r.name);return o?{...o.attrs}:{}}function jne(t,e){const r=M0(typeof e=="string"?e:e.name,t.schema);return r==="node"?mbe(t,e):r==="mark"?_ne(t,e):{}}function gbe(t,e=JSON.stringify){const r={};return t.filter(n=>{const i=e(n);return Object.prototype.hasOwnProperty.call(r,i)?!1:r[i]=!0})}function ybe(t){const e=gbe(t);return e.length===1?e:e.filter((r,n)=>!e.filter((s,o)=>o!==n).some(s=>r.oldRange.from>=s.oldRange.from&&r.oldRange.to<=s.oldRange.to&&r.newRange.from>=s.newRange.from&&r.newRange.to<=s.newRange.to))}function Pne(t){const{mapping:e,steps:r}=t,n=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=r[s];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const c=e.slice(s).map(a,-1),d=e.slice(s).map(l),h=e.invert().map(c,-1),f=e.invert().map(d);n.push({oldRange:{from:h,to:f},newRange:{from:c,to:d}})})}),ybe(n)}function kM(t,e,r){const n=[];return t===e?r.resolve(t).marks().forEach(i=>{const s=r.resolve(t),o=EM(s,i.type);o&&n.push({mark:i,...o})}):r.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||n.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),n}var vbe=(t,e,r,n=20)=>{const i=t.doc.resolve(r);let s=n,o=null;for(;s>0&&o===null;){const a=i.node(s);(a==null?void 0:a.type.name)===e?o=a:s-=1}return[o,s]};function xg(t,e){return e.nodes[t]||e.marks[t]||null}function ny(t,e,r){return Object.fromEntries(Object.entries(r).filter(([n])=>{const i=t.find(s=>s.type===e&&s.name===n);return i?i.attribute.keepOnSplit:!1}))}var bbe=(t,e=500)=>{let r="";const n=t.parentOffset;return t.parent.nodesBetween(Math.max(0,n-e),n,(i,s,o,a)=>{var l,c;const d=((c=(l=i.type.spec).toText)==null?void 0:c.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";r+=i.isAtom&&!i.isText?d:d.slice(0,Math.max(0,n-s))}),r};function aI(t,e,r={}){const{empty:n,ranges:i}=t.selection,s=e?Lo(e,t.schema):null;if(n)return!!(t.storedMarks||t.selection.$from.marks()).filter(h=>s?s.name===h.type.name:!0).find(h=>tv(h.attrs,r,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:h,$to:f})=>{const p=h.pos,m=f.pos;t.doc.nodesBetween(p,m,(g,b)=>{if(!g.isText&&!g.marks.length)return;const y=Math.max(p,b),v=Math.min(m,b+g.nodeSize),w=v-y;o+=w,a.push(...g.marks.map(x=>({mark:x,from:y,to:v})))})}),o===0)return!1;const l=a.filter(h=>s?s.name===h.mark.type.name:!0).filter(h=>tv(h.mark.attrs,r,{strict:!1})).reduce((h,f)=>h+f.to-f.from,0),c=a.filter(h=>s?h.mark.type!==s&&h.mark.type.excludes(s):!0).reduce((h,f)=>h+f.to-f.from,0);return(l>0?l+c:l)>=o}function xbe(t,e,r={}){if(!e)return rl(t,null,r)||aI(t,null,r);const n=M0(e,t.schema);return n==="node"?rl(t,e,r):n==="mark"?aI(t,e,r):!1}var wbe=(t,e)=>{const{$from:r,$to:n,$anchor:i}=t.selection;if(e){const s=$0(a=>a.type.name===e)(t.selection);if(!s)return!1;const o=t.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(n.parentOffset<n.parent.nodeSize-2||r.pos!==n.pos)},Sbe=t=>{const{$from:e,$to:r}=t.selection;return!(e.parentOffset>0||e.pos!==r.pos)};function O4(t,e){return Array.isArray(e)?e.some(r=>(typeof r=="string"?r:r.name)===t.name):e}function j4(t,e){const{nodeExtensions:r}=Ad(e),n=r.find(o=>o.name===t);if(!n)return!1;const i={name:n.name,options:n.options,storage:n.storage},s=_t(je(n,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function D0(t,{checkChildren:e=!0,ignoreWhitespace:r=!1}={}){var n;if(r){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((n=t.text)!=null?n:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(D0(s,{ignoreWhitespace:r,checkChildren:e})||(i=!1))}),i}return!1}function Ine(t){return t instanceof Re}var Rne=class Mne{constructor(e){this.position=e}static fromJSON(e){return new Mne(e.position)}toJSON(){return{position:this.position}}};function _be(t,e){const r=e.mapping.mapResult(t.position);return{position:new Rne(r.pos),mapResult:r}}function Ebe(t){return new Rne(t)}function Nbe(t,e,r){var n;const{selection:i}=e;let s=null;if(bne(i)&&(s=i.$cursor),s){const a=(n=t.storedMarks)!=null?n:s.marks();return s.parent.type.allowsMarkType(r)&&(!!r.isInSet(a)||!a.some(c=>c.type.excludes(r)))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(r):!1;return t.doc.nodesBetween(a.pos,l.pos,(d,h,f)=>{if(c)return!1;if(d.isInline){const p=!f||f.type.allowsMarkType(r),m=!!r.isInSet(d.marks)||!d.marks.some(g=>g.type.excludes(r));c=p&&m}return!c}),c})}var Cbe=(t,e={})=>({tr:r,state:n,dispatch:i})=>{const{selection:s}=r,{empty:o,ranges:a}=s,l=Lo(t,n.schema);if(i)if(o){const c=_ne(n,l);r.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const d=c.$from.pos,h=c.$to.pos;n.doc.nodesBetween(d,h,(f,p)=>{const m=Math.max(p,d),g=Math.min(p+f.nodeSize,h);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&r.addMark(m,g,l.create({...y.attrs,...e}))}):r.addMark(m,g,l.create(e))})});return Nbe(n,r,l)},kbe=(t,e)=>({tr:r})=>(r.setMeta(t,e),!0),Tbe=(t,e={})=>({state:r,dispatch:n,chain:i})=>{const s=Er(t,r.schema);let o;return r.selection.$anchor.sameParent(r.selection.$head)&&(o=r.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:a})=>VF(s,{...o,...e})(r)?!0:a.clearNodes()).command(({state:a})=>VF(s,{...o,...e})(a,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Obe=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,i=$l(t,0,n.content.size),s=Re.create(n,i);e.setSelection(s)}return!0},jbe=(t,e)=>({tr:r,state:n,dispatch:i})=>{const{selection:s}=n;let o,a;return typeof e=="number"?(o=e,a=e):e&&"from"in e&&"to"in e?(o=e.from,a=e.to):(o=s.from,a=s.to),i&&r.doc.nodesBetween(o,a,(l,c)=>{l.isText||r.setNodeMarkup(c,void 0,{...l.attrs,dir:t})}),!0},Pbe=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=Be.atStart(n).from,a=Be.atEnd(n).to,l=$l(i,o,a),c=$l(s,o,a),d=Be.create(n,l,c);e.setSelection(d)}return!0},Ibe=t=>({state:e,dispatch:r})=>{const n=Er(t,e.schema);return Cye(n)(e,r)};function P4(t,e){const r=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(r){const n=r.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(n)}}var Rbe=({keepMarks:t=!0}={})=>({tr:e,state:r,dispatch:n,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,d=ny(c,a.node().type.name,a.node().attrs);if(s instanceof Re&&s.node.isBlock)return!a.parentOffset||!vo(o,a.pos)?!1:(n&&(t&&P4(r,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const h=l.parentOffset===l.parent.content.size,f=a.depth===0?void 0:abe(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=h&&f?[{type:f,attrs:d}]:void 0,m=vo(e.doc,e.mapping.map(a.pos),1,p);if(!p&&!m&&vo(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(m=!0,p=f?[{type:f,attrs:d}]:void 0),n){if(m&&(s instanceof Be&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,p),f&&!h&&!a.parentOffset&&a.parent.type!==f)){const g=e.mapping.map(a.before()),b=e.doc.resolve(g);a.node(-1).canReplaceWith(b.index(),b.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}t&&P4(r,i.extensionManager.splittableMarks),e.scrollIntoView()}return m},Mbe=(t,e={})=>({tr:r,state:n,dispatch:i,editor:s})=>{var o;const a=Er(t,n.schema),{$from:l,$to:c}=n.selection,d=n.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(c))return!1;const h=l.node(-1);if(h.type!==a)return!1;const f=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let y=Q.empty;const v=l.index(-1)?1:l.index(-2)?2:3;for(let E=l.depth-v;E>=l.depth-3;E-=1)y=Q.from(l.node(E).copy(y));const w=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,x={...ny(f,l.node().type.name,l.node().attrs),...e},S=((o=a.contentMatch.defaultType)==null?void 0:o.createAndFill(x))||void 0;y=y.append(Q.from(a.createAndFill(null,S)||void 0));const _=l.before(l.depth-(v-1));r.replace(_,l.after(-w),new me(y,4-v,0));let N=-1;r.doc.nodesBetween(_,r.doc.content.size,(E,k)=>{if(N>-1)return!1;E.isTextblock&&E.content.size===0&&(N=k+1)}),N>-1&&r.setSelection(Be.near(r.doc.resolve(N))),r.scrollIntoView()}return!0}const p=c.pos===l.end()?h.contentMatchAt(0).defaultType:null,m={...ny(f,h.type.name,h.attrs),...e},g={...ny(f,l.node().type.name,l.node().attrs),...e};r.delete(l.pos,c.pos);const b=p?[{type:a,attrs:m},{type:p,attrs:g}]:[{type:a,attrs:m}];if(!vo(r.doc,l.pos,2))return!1;if(i){const{selection:y,storedMarks:v}=n,{splittableMarks:w}=s.extensionManager,x=v||y.$to.parentOffset&&y.$from.marks();if(r.split(l.pos,2,b).scrollIntoView(),!x||!i)return!0;const S=x.filter(_=>w.includes(_.type.name));r.ensureMarks(S)}return!0},T1=(t,e)=>{const r=$0(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(Math.max(0,r.pos-1)).before(r.depth);if(n===void 0)return!0;const i=t.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&cl(t.doc,r.pos)&&t.join(r.pos),!0},O1=(t,e)=>{const r=$0(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(r.start).after(r.depth);if(n===void 0)return!0;const i=t.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&cl(t.doc,n)&&t.join(n),!0},$be=(t,e,r,n={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:d})=>{const{extensions:h,splittableMarks:f}=i.extensionManager,p=Er(t,o.schema),m=Er(e,o.schema),{selection:g,storedMarks:b}=o,{$from:y,$to:v}=g,w=y.blockRange(v),x=b||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;const S=$0(_=>j4(_.type.name,h))(g);if(w.depth>=1&&S&&w.depth-S.depth<=1){if(S.node.type===p)return c.liftListItem(m);if(j4(S.node.type.name,h)&&p.validContent(S.node.content)&&a)return l().command(()=>(s.setNodeMarkup(S.pos,p),!0)).command(()=>T1(s,p)).command(()=>O1(s,p)).run()}return!r||!x||!a?l().command(()=>d().wrapInList(p,n)?!0:c.clearNodes()).wrapInList(p,n).command(()=>T1(s,p)).command(()=>O1(s,p)).run():l().command(()=>{const _=d().wrapInList(p,n),N=x.filter(E=>f.includes(E.type.name));return s.ensureMarks(N),_?!0:c.clearNodes()}).wrapInList(p,n).command(()=>T1(s,p)).command(()=>O1(s,p)).run()},Dbe=(t,e={},r={})=>({state:n,commands:i})=>{const{extendEmptyMarkRange:s=!1}=r,o=Lo(t,n.schema);return aI(n,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},Abe=(t,e,r={})=>({state:n,commands:i})=>{const s=Er(t,n.schema),o=Er(e,n.schema),a=rl(n,s,r);let l;return n.selection.$anchor.sameParent(n.selection.$head)&&(l=n.selection.$anchor.parent.attrs),a?i.setNode(o,l):i.setNode(s,{...l,...r})},Fbe=(t,e={})=>({state:r,commands:n})=>{const i=Er(t,r.schema);return rl(r,i,e)?n.lift(i):n.wrapIn(i,e)},qbe=()=>({state:t,dispatch:e})=>{const r=t.plugins;for(let n=0;n<r.length;n+=1){const i=r[n];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},Lbe=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,{empty:n,ranges:i}=r;return n||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},Bbe=(t,e={})=>({tr:r,state:n,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=r,l=Lo(t,n.schema),{$from:c,empty:d,ranges:h}=a;if(!i)return!0;if(d&&o){let{from:f,to:p}=a;const m=(s=c.marks().find(b=>b.type===l))==null?void 0:s.attrs,g=EM(c,l,m);g&&(f=g.from,p=g.to),r.removeMark(f,p,l)}else h.forEach(f=>{r.removeMark(f.$from.pos,f.$to.pos,l)});return r.removeStoredMark(l),!0},zbe=t=>({tr:e,state:r,dispatch:n})=>{const{selection:i}=r;let s,o;return typeof t=="number"?(s=t,o=t):t&&"from"in t&&"to"in t?(s=t.from,o=t.to):(s=i.from,o=i.to),n&&e.doc.nodesBetween(s,o,(a,l)=>{if(a.isText)return;const c={...a.attrs};delete c.dir,e.setNodeMarkup(l,void 0,c)}),!0},Vbe=(t,e={})=>({tr:r,state:n,dispatch:i})=>{let s=null,o=null;const a=M0(typeof t=="string"?t:t.name,n.schema);if(!a)return!1;a==="node"&&(s=Er(t,n.schema)),a==="mark"&&(o=Lo(t,n.schema));let l=!1;return r.selection.ranges.forEach(c=>{const d=c.$from.pos,h=c.$to.pos;let f,p,m,g;r.selection.empty?n.doc.nodesBetween(d,h,(b,y)=>{s&&s===b.type&&(l=!0,m=Math.max(y,d),g=Math.min(y+b.nodeSize,h),f=y,p=b)}):n.doc.nodesBetween(d,h,(b,y)=>{y<d&&s&&s===b.type&&(l=!0,m=Math.max(y,d),g=Math.min(y+b.nodeSize,h),f=y,p=b),y>=d&&y<=h&&(s&&s===b.type&&(l=!0,i&&r.setNodeMarkup(y,void 0,{...b.attrs,...e})),o&&b.marks.length&&b.marks.forEach(v=>{if(o===v.type&&(l=!0,i)){const w=Math.max(y,d),x=Math.min(y+b.nodeSize,h);r.addMark(w,x,o.create({...v.attrs,...e}))}}))}),p&&(f!==void 0&&i&&r.setNodeMarkup(f,void 0,{...p.attrs,...e}),o&&p.marks.length&&p.marks.forEach(b=>{o===b.type&&i&&r.addMark(m,g,o.create({...b.attrs,...e}))}))}),l},Ube=(t,e={})=>({state:r,dispatch:n})=>{const i=Er(t,r.schema);return bye(i,e)(r,n)},Hbe=(t,e={})=>({state:r,dispatch:n})=>{const i=Er(t,r.schema);return xye(i,e)(r,n)},Wbe=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const r=this.callbacks[t];return r&&r.forEach(n=>n.apply(this,e)),this}off(t,e){const r=this.callbacks[t];return r&&(e?this.callbacks[t]=r.filter(n=>n!==e):delete this.callbacks[t]),this}once(t,e){const r=(...n)=>{this.off(t,r),e.apply(this,n)};return this.on(t,r)}removeAllListeners(){this.callbacks={}}},A0=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},Kbe=(t,e)=>{if(_M(e))return e.exec(t);const r=e(t);if(!r)return null;const n=[r.text];return n.index=r.index,n.input=t,n.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(r.replaceWith)),n};function wg(t){var e;const{editor:r,from:n,to:i,text:s,rules:o,plugin:a}=t,{view:l}=r;if(l.composing)return!1;const c=l.state.doc.resolve(n);if(c.parent.type.spec.code||(e=c.nodeBefore||c.nodeAfter)!=null&&e.marks.find(f=>f.type.spec.code))return!1;let d=!1;const h=bbe(c)+s;return o.forEach(f=>{if(d)return;const p=Kbe(h,f.find);if(!p)return;const m=l.state.tr,g=I0({state:l.state,transaction:m}),b={from:n-(p[0].length-s.length),to:i},{commands:y,chain:v,can:w}=new R0({editor:r,state:g});f.handler({state:g,range:b,match:p,commands:y,chain:v,can:w})===null||!m.steps.length||(f.undoable&&m.setMeta(a,{transform:m,from:n,to:i,text:s}),l.dispatch(m),d=!0)}),d}function Gbe(t){const{editor:e,rules:r}=t,n=new Xt({state:{init(){return null},apply(i,s,o){const a=i.getMeta(n);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:d}=l;typeof d=="string"?d=d:d=CM(Q.from(d),o.schema);const{from:h}=l,f=h+d.length;wg({editor:e,from:h,to:f,text:d,rules:r,plugin:n})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return wg({editor:e,from:s,to:o,text:a,rules:r,plugin:n})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&wg({editor:e,from:s.pos,to:s.pos,text:"",rules:r,plugin:n})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?wg({editor:e,from:o.pos,to:o.pos,text:`
`,rules:r,plugin:n}):!1}},isInputRules:!0});return n}function Ybe(t){return Object.prototype.toString.call(t).slice(8,-1)}function Sg(t){return Ybe(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function $ne(t,e){const r={...t};return Sg(t)&&Sg(e)&&Object.keys(e).forEach(n=>{Sg(e[n])&&Sg(t[n])?r[n]=$ne(t[n],e[n]):r[n]=e[n]}),r}var TM=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{..._t(je(this,"addOptions",{name:this.name}))||{}}}get storage(){return{..._t(je(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>$ne(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},Uc=class Dne extends TM{constructor(){super(...arguments),this.type="mark"}static create(e={}){const r=typeof e=="function"?e():e;return new Dne(r)}static handleExit({editor:e,mark:r}){const{tr:n}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===r.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===r.name);return l&&n.removeStoredMark(l),n.insertText(" ",i.pos),e.view.dispatch(n),!0}return!1}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function Qbe(t){return typeof t=="number"}var Xbe=class{constructor(t){this.find=t.find,this.handler=t.handler}},Jbe=(t,e,r)=>{if(_M(e))return[...t.matchAll(e)];const n=e(t,r);return n?n.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function Zbe(t){const{editor:e,state:r,from:n,to:i,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:c,can:d}=new R0({editor:e,state:r}),h=[];return r.doc.nodesBetween(n,i,(p,m)=>{var g,b,y,v,w;if((b=(g=p.type)==null?void 0:g.spec)!=null&&b.code||!(p.isText||p.isTextblock||p.isInline))return;const x=(w=(v=(y=p.content)==null?void 0:y.size)!=null?v:p.nodeSize)!=null?w:0,S=Math.max(n,m),_=Math.min(i,m+x);if(S>=_)return;const N=p.isText?p.text||"":p.textBetween(S-m,_-m,void 0,"");Jbe(N,s.find,o).forEach(k=>{if(k.index===void 0)return;const C=S+k.index+1,O=C+k[0].length,P={from:r.tr.mapping.map(C),to:r.tr.mapping.map(O)},j=s.handler({state:r,range:P,match:k,commands:l,chain:c,can:d,pasteEvent:o,dropEvent:a});h.push(j)})}),h.every(p=>p!==null)}var _g=null,e1e=t=>{var e;const r=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=r.clipboardData)==null||e.setData("text/html",t),r};function t1e(t){const{editor:e,rules:r}=t;let n=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:d,from:h,to:f,rule:p,pasteEvt:m})=>{const g=d.tr,b=I0({state:d,transaction:g});if(!(!Zbe({editor:e,state:b,from:Math.max(h-1,0),to:f.b-1,rule:p,pasteEvent:m,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return r.map(d=>new Xt({view(h){const f=m=>{var g;n=(g=h.dom.parentElement)!=null&&g.contains(m.target)?h.dom.parentElement:null,n&&(_g=e)},p=()=>{_g&&(_g=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(h,f)=>{if(s=n===h.dom.parentElement,a=f,!s){const p=_g;p!=null&&p.isEditable&&setTimeout(()=>{const m=p.state.selection;m&&p.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(h,f)=>{var p;const m=(p=f.clipboardData)==null?void 0:p.getData("text/html");return o=f,i=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(h,f,p)=>{const m=h[0],g=m.getMeta("uiEvent")==="paste"&&!i,b=m.getMeta("uiEvent")==="drop"&&!s,y=m.getMeta("applyPasteRules"),v=!!y;if(!g&&!b&&!v)return;if(v){let{text:S}=y;typeof S=="string"?S=S:S=CM(Q.from(S),p.schema);const{from:_}=y,N=_+S.length,E=e1e(S);return l({rule:d,state:p,from:_,to:{b:N},pasteEvt:E})}const w=f.doc.content.findDiffStart(p.doc.content),x=f.doc.content.findDiffEnd(p.doc.content);if(!(!Qbe(w)||!x||w===x.b))return l({rule:d,state:p,from:w,to:x,pasteEvt:o})}}))}var F0=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=kne(t),this.schema=hbe(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:xg(e.name,this.schema)},n=je(e,"addCommands",r);return n?{...t,...n()}:t},{})}get plugins(){const{editor:t}=this;return nv([...this.extensions].reverse()).flatMap(n=>{const i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:xg(n.name,this.schema)},s=[],o=je(n,"addKeyboardShortcuts",i);let a={};if(n.type==="mark"&&je(n,"exitable",i)&&(a.ArrowRight=()=>Uc.handleExit({editor:t,mark:n})),o){const f=Object.fromEntries(Object.entries(o()).map(([p,m])=>[p,()=>m({editor:t})]));a={...a,...f}}const l=m0e(a);s.push(l);const c=je(n,"addInputRules",i);if(O4(n,t.options.enableInputRules)&&c){const f=c();if(f&&f.length){const p=Gbe({editor:t,rules:f}),m=Array.isArray(p)?p:[p];s.push(...m)}}const d=je(n,"addPasteRules",i);if(O4(n,t.options.enablePasteRules)&&d){const f=d();if(f&&f.length){const p=t1e({editor:t,rules:f});s.push(...p)}}const h=je(n,"addProseMirrorPlugins",i);if(h){const f=h();s.push(...f)}return s})}get attributes(){return Cne(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Ad(this.extensions);return Object.fromEntries(e.filter(r=>!!je(r,"addNodeView")).map(r=>{const n=this.attributes.filter(l=>l.type===r.name),i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:Er(r.name,this.schema)},s=je(r,"addNodeView",i);if(!s)return[];const o=s();if(!o)return[];const a=(l,c,d,h,f)=>{const p=xp(l,n);return o({node:l,view:c,getPos:d,decorations:h,innerDecorations:f,editor:t,extension:r,HTMLAttributes:p})};return[r.name,a]}))}dispatchTransaction(t){const{editor:e}=this;return nv([...this.extensions].reverse()).reduceRight((n,i)=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:e,type:xg(i.name,this.schema)},o=je(i,"dispatchTransaction",s);return o?a=>{o.call(s,{transaction:a,next:n})}:n},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=Ad(this.extensions);return Object.fromEntries(e.filter(r=>!!je(r,"addMarkView")).map(r=>{const n=this.attributes.filter(a=>a.type===r.name),i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:Lo(r.name,this.schema)},s=je(r,"addMarkView",i);if(!s)return[];const o=(a,l,c)=>{const d=xp(a,n);return s()({mark:a,view:l,inline:c,editor:t,extension:r,HTMLAttributes:d,updateAttributes:h=>{m1e(a,t,h)}})};return[r.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var r;const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:xg(e.name,this.schema)};e.type==="mark"&&((r=_t(je(e,"keepOnSplit",n)))==null||r)&&this.splittableMarks.push(e.name);const i=je(e,"onBeforeCreate",n),s=je(e,"onCreate",n),o=je(e,"onUpdate",n),a=je(e,"onSelectionUpdate",n),l=je(e,"onTransaction",n),c=je(e,"onFocus",n),d=je(e,"onBlur",n),h=je(e,"onDestroy",n);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),d&&this.editor.on("blur",d),h&&this.editor.on("destroy",h)})}};F0.resolve=kne;F0.sort=nv;F0.flatten=NM;var r1e={};SM(r1e,{ClipboardTextSerializer:()=>Fne,Commands:()=>qne,Delete:()=>Lne,Drop:()=>Bne,Editable:()=>zne,FocusEvents:()=>Une,Keymap:()=>Hne,Paste:()=>Wne,Tabindex:()=>Kne,TextDirection:()=>Gne,focusEventsPluginKey:()=>Vne});var mr=class Ane extends TM{constructor(){super(...arguments),this.type="extension"}static create(e={}){const r=typeof e=="function"?e():e;return new Ane(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}},Fne=mr.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Xt({key:new Mr("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:r}=t,{doc:n,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(d=>d.$from.pos)),a=Math.max(...s.map(d=>d.$to.pos)),l=One(r);return Tne(n,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),qne=mr.create({name:"commands",addCommands(){return{...yne}}}),Lne=mr.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var r,n,i;const s=()=>{var o,a,l,c;if((c=(l=(a=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,t))!=null?c:t.getMeta("y-sync$"))return;const d=Ene(t.before,[t,...e]);Pne(d).forEach(p=>{d.mapping.mapResult(p.oldRange.from).deletedAfter&&d.mapping.mapResult(p.oldRange.to).deletedBefore&&d.before.nodesBetween(p.oldRange.from,p.oldRange.to,(m,g)=>{const b=g+m.nodeSize-2,y=p.oldRange.from<=g&&b<=p.oldRange.to;this.editor.emit("delete",{type:"node",node:m,from:g,to:b,newFrom:d.mapping.map(g),newTo:d.mapping.map(b),deletedRange:p.oldRange,newRange:p.newRange,partial:!y,editor:this.editor,transaction:t,combinedTransform:d})})});const f=d.mapping;d.steps.forEach((p,m)=>{var g,b;if(p instanceof cs){const y=f.slice(m).map(p.from,-1),v=f.slice(m).map(p.to),w=f.invert().map(y,-1),x=f.invert().map(v),S=(g=d.doc.nodeAt(y-1))==null?void 0:g.marks.some(N=>N.eq(p.mark)),_=(b=d.doc.nodeAt(v))==null?void 0:b.marks.some(N=>N.eq(p.mark));this.editor.emit("delete",{type:"mark",mark:p.mark,from:p.from,to:p.to,deletedRange:{from:w,to:x},newRange:{from:y,to:v},partial:!!(_||S),editor:this.editor,transaction:t,combinedTransform:d})}})};(i=(n=(r=this.editor.options.coreExtensionOptions)==null?void 0:r.delete)==null?void 0:n.async)==null||i?setTimeout(s,0):s()}}),Bne=mr.create({name:"drop",addProseMirrorPlugins(){return[new Xt({key:new Mr("tiptapDrop"),props:{handleDrop:(t,e,r,n)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:r,moved:n})}}})]}}),zne=mr.create({name:"editable",addProseMirrorPlugins(){return[new Xt({key:new Mr("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Vne=new Mr("focusEvents"),Une=mr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Xt({key:Vne,props:{handleDOMEvents:{focus:(e,r)=>{t.isFocused=!0;const n=t.state.tr.setMeta("focus",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1},blur:(e,r)=>{t.isFocused=!1;const n=t.state.tr.setMeta("blur",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1}}}})]}}),Hne=mr.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:d,$anchor:h}=l,{pos:f,parent:p}=h,m=h.parent.isTextblock&&f>0?a.doc.resolve(f-1):h,g=m.parent.type.spec.isolating,b=h.pos-h.parentOffset,y=g&&m.parent.childCount===1?b===h.pos:Ge.atStart(c).from===f;return!d||!p.type.isTextblock||p.textContent.length||!y||y&&h.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...n},s={...n,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return rv()||Sne()?s:i},addProseMirrorPlugins(){return[new Xt({key:new Mr("clearDocument"),appendTransaction:(t,e,r)=>{if(t.some(g=>g.getMeta("composition")))return;const n=t.some(g=>g.docChanged)&&!e.doc.eq(r.doc),i=t.some(g=>g.getMeta("preventClearDocument"));if(!n||i)return;const{empty:s,from:o,to:a}=e.selection,l=Ge.atStart(e.doc).from,c=Ge.atEnd(e.doc).to;if(s||!(o===l&&a===c)||!D0(r.doc))return;const f=r.tr,p=I0({state:r,transaction:f}),{commands:m}=new R0({editor:this.editor,state:p});if(m.clearNodes(),!!f.steps.length)return f}})]}}),Wne=mr.create({name:"paste",addProseMirrorPlugins(){return[new Xt({key:new Mr("tiptapPaste"),props:{handlePaste:(t,e,r)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:r})}}})]}}),Kne=mr.create({name:"tabindex",addProseMirrorPlugins(){return[new Xt({key:new Mr("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),Gne=mr.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=Ad(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const r=e.getAttribute("dir");return r&&(r==="ltr"||r==="rtl"||r==="auto")?r:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new Xt({key:new Mr("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),n1e=class Eu{constructor(e,r,n=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=r,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let r=this.from,n=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}r=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:r,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),r=this.resolvedPos.doc.resolve(e);return new Eu(r,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Eu(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Eu(e,this.editor)}get children(){const e=[];return this.node.content.forEach((r,n)=>{const i=r.isBlock&&!r.isTextblock,s=r.isAtom&&!r.isText,o=this.pos+n+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(o);if(!i&&a.depth<=this.depth)return;const l=new Eu(a,this.editor,i,i?r:null);i&&(l.actualDepth=this.depth+1),e.push(new Eu(a,this.editor,i,i?r:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,r={}){let n=null,i=this.parent;for(;i&&!n;){if(i.node.type.name===e)if(Object.keys(r).length>0){const s=i.node.attrs,o=Object.keys(r);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==r[l])break}}else n=i;i=i.parent}return n}querySelector(e,r={}){return this.querySelectorAll(e,r,!0)[0]||null}querySelectorAll(e,r={},n=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(r);return this.children.forEach(o=>{n&&i.length>0||(o.node.type.name===e&&s.every(l=>r[l]===o.node.attrs[l])&&i.push(o),!(n&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,r,n))))}),i}setAttribute(e){const{tr:r}=this.editor.state;r.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(r)}},i1e=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function s1e(t,e,r){const n=document.querySelector("style[data-tiptap-style]");if(n!==null)return n;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var o1e=class extends Wbe{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:_be,createMappablePosition:Ebe},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:i,moved:s})=>this.options.onDrop(n,i,s)),this.on("paste",({event:n,slice:i})=>this.options.onPaste(n,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),r=xne(e,this.options.autofocus);this.editorState=qu.create({doc:e,schema:this.schema,selection:r||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=s1e(i1e,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const r=Nne(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let r=e;if([].concat(t).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;r=r.filter(o=>!o.key.startsWith(s))}),e.length===r.length)return;const n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}createExtensionManager(){var t,e;const n=[...this.options.enableCoreExtensions?[zne,Fne.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),qne,Une,Hne,Kne,Bne,Wne,Lne,Gne.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new F0(n,this)}createCommandManager(){this.commandManager=new R0({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=oI(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(r=>r.name!=="collaboration"),this.createExtensionManager()}}),t=oI(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:r}=this.options,n=e.dispatchTransaction||this.dispatchTransaction.bind(this),i=r?this.extensionManager.dispatchTransaction(n):n;this.editorView=new mne(t,{...e,attributes:{role:"textbox",...e==null?void 0:e.attributes},dispatchTransaction:i,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.prependClass(),this.injectCSS();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(c=>{var d;return(d=this.capturedTransaction)==null?void 0:d.step(c)});return}const{state:e,transactions:r}=this.state.applyTransaction(t),n=!this.state.selection.eq(e.selection),i=r.includes(t),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:r.slice(1)}),n&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=r.findLast(c=>c.getMeta("focus")||c.getMeta("blur")),a=o==null?void 0:o.getMeta("focus"),l=o==null?void 0:o.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:o}),l&&this.emit("blur",{editor:this,event:l.event,transaction:o}),!(t.getMeta("preventUpdate")||!r.some(c=>c.docChanged)||s.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:r.slice(1)})}getAttributes(t){return jne(this.state,t)}isActive(t,e){const r=typeof t=="string"?t:null,n=typeof t=="string"?e:t;return xbe(this.state,r,n)}getJSON(){return this.state.doc.toJSON()}getHTML(){return CM(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:r={}}=t||{};return pbe(this.state.doc,{blockSeparator:e,textSerializers:{...One(this.schema),...r}})}get isEmpty(){return D0(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelector(t,e))||null}$nodes(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new n1e(e,this)}get $doc(){return this.$pos(0)}};function Fd(t){return new A0({find:t.find,handler:({state:e,range:r,match:n})=>{const i=_t(t.getAttributes,void 0,n);if(i===!1||i===null)return null;const{tr:s}=e,o=n[n.length-1],a=n[0];if(o){const l=a.search(/\S/),c=r.from+a.indexOf(o),d=c+o.length;if(kM(r.from,r.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===t.type&&g!==p.mark.type)).filter(p=>p.to>c).length)return null;d<r.to&&s.delete(d,r.to),c>r.from&&s.delete(r.from+l,c);const f=r.from+l+o.length;s.addMark(r.from+l,f,t.type.create(i||{})),s.removeStoredMark(t.type)}},undoable:t.undoable})}function a1e(t){return new A0({find:t.find,handler:({state:e,range:r,match:n})=>{const i=_t(t.getAttributes,void 0,n)||{},{tr:s}=e,o=r.from;let a=r.to;const l=t.type.create(i);if(n[1]){const c=n[0].lastIndexOf(n[1]);let d=o+c;d>a?d=a:a=d+n[1].length;const h=n[0][n[0].length-1];s.insertText(h,o+n[0].length-1),s.replaceWith(d,a,l)}else if(n[0]){const c=t.type.isInline?o:o-1;s.insert(c,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()},undoable:t.undoable})}function lI(t){return new A0({find:t.find,handler:({state:e,range:r,match:n})=>{const i=e.doc.resolve(r.from),s=_t(t.getAttributes,void 0,n)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(r.from,r.to).setBlockType(r.from,r.from,t.type,s)},undoable:t.undoable})}function qd(t){return new A0({find:t.find,handler:({state:e,range:r,match:n,chain:i})=>{const s=_t(t.getAttributes,void 0,n)||{},o=e.tr.delete(r.from,r.to),l=o.doc.resolve(r.from).blockRange(),c=l&&oM(l,t.type,s);if(!c)return null;if(o.wrap(l,c),t.keepMarks&&t.editor){const{selection:h,storedMarks:f}=e,{splittableMarks:p}=t.editor.extensionManager,m=f||h.$to.parentOffset&&h.$from.marks();if(m){const g=m.filter(b=>p.includes(b.type.name));o.ensureMarks(g)}}if(t.keepAttributes){const h=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(h,s).run()}const d=o.doc.resolve(r.from-1).nodeBefore;d&&d.type===t.type&&cl(o.doc,r.from-1)&&(!t.joinPredicate||t.joinPredicate(n,d))&&o.join(r.from-1)},undoable:t.undoable})}function l1e(t,e){const{selection:r}=t,{$from:n}=r;if(r instanceof Re){const s=n.index();return n.parent.canReplaceWith(s,s+1,e)}let i=n.depth;for(;i>=0;){const s=n.index(i);if(n.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}var c1e={};SM(c1e,{createAtomBlockMarkdownSpec:()=>u1e,createBlockMarkdownSpec:()=>d1e,createInlineMarkdownSpec:()=>p1e,parseAttributes:()=>OM,parseIndentedBlocks:()=>cI,renderNestedMarkdownContent:()=>PM,serializeAttributes:()=>jM});function OM(t){if(!(t!=null&&t.trim()))return{};const e={},r=[],n=t.replace(/["']([^"']*)["']/g,c=>(r.push(c),`__QUOTED_${r.length-1}__`)),i=n.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const c=i.map(d=>d.trim().slice(1));e.class=c.join(" ")}const s=n.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(e.id=s[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(n.matchAll(o)).forEach(([,c,d])=>{var h;const f=parseInt(((h=d.match(/__QUOTED_(\d+)__/))==null?void 0:h[1])||"0",10),p=r[f];p&&(e[c]=p.slice(1,-1))});const l=n.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(d=>{d.match(/^[a-zA-Z][\w-]*$/)&&(e[d]=!0)}),e}function jM(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(n=>e.push(`.${n}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([r,n])=>{r==="class"||r==="id"||(n===!0?e.push(r):n!==!1&&n!=null&&e.push(`${r}="${String(n)}"`))}),e.join(" ")}function u1e(t){const{nodeName:e,name:r,parseAttributes:n=OM,serializeAttributes:i=jM,defaultAttributes:s={},requiredAttributes:o=[],allowedAttributes:a}=t,l=r||e,c=d=>{if(!a)return d;const h={};return a.forEach(f=>{f in d&&(h[f]=d[f])}),h};return{parseMarkdown:(d,h)=>{const f={...s,...d.attributes};return h.createNode(e,f,[])},markdownTokenizer:{name:e,level:"block",start(d){var h;const f=new RegExp(`^:::${l}(?:\\s|$)`,"m"),p=(h=d.match(f))==null?void 0:h.index;return p!==void 0?p:-1},tokenize(d,h,f){const p=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),m=d.match(p);if(!m)return;const g=m[1]||"",b=n(g);if(!o.find(v=>!(v in b)))return{type:e,raw:m[0],attributes:b}}},renderMarkdown:d=>{const h=c(d.attrs||{}),f=i(h),p=f?` {${f}}`:"";return`:::${l}${p} :::`}}}function d1e(t){const{nodeName:e,name:r,getContent:n,parseAttributes:i=OM,serializeAttributes:s=jM,defaultAttributes:o={},content:a="block",allowedAttributes:l}=t,c=r||e,d=h=>{if(!l)return h;const f={};return l.forEach(p=>{p in h&&(f[p]=h[p])}),f};return{parseMarkdown:(h,f)=>{let p;if(n){const g=n(h);p=typeof g=="string"?[{type:"text",text:g}]:g}else a==="block"?p=f.parseChildren(h.tokens||[]):p=f.parseInline(h.tokens||[]);const m={...o,...h.attributes};return f.createNode(e,m,p)},markdownTokenizer:{name:e,level:"block",start(h){var f;const p=new RegExp(`^:::${c}`,"m"),m=(f=h.match(p))==null?void 0:f.index;return m!==void 0?m:-1},tokenize(h,f,p){var m;const g=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),b=h.match(g);if(!b)return;const[y,v=""]=b,w=i(v);let x=1;const S=y.length;let _="";const N=/^:::([\w-]*)(\s.*)?/gm,E=h.slice(S);for(N.lastIndex=0;;){const k=N.exec(E);if(k===null)break;const C=k.index,O=k[1];if(!((m=k[2])!=null&&m.endsWith(":::"))){if(O)x+=1;else if(x-=1,x===0){const P=E.slice(0,C);_=P.trim();const j=h.slice(0,S+C+k[0].length);let M=[];if(_)if(a==="block")for(M=p.blockTokens(P),M.forEach(A=>{A.text&&(!A.tokens||A.tokens.length===0)&&(A.tokens=p.inlineTokens(A.text))});M.length>0;){const A=M[M.length-1];if(A.type==="paragraph"&&(!A.text||A.text.trim()===""))M.pop();else break}else M=p.inlineTokens(_);return{type:e,raw:j,attributes:w,content:_,tokens:M}}}}}},renderMarkdown:(h,f)=>{const p=d(h.attrs||{}),m=s(p),g=m?` {${m}}`:"",b=f.renderChildren(h.content||[],`

`);return`:::${c}${g}

${b}

:::`}}}function h1e(t){if(!t.trim())return{};const e={},r=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let n=r.exec(t);for(;n!==null;){const[,i,s,o]=n;e[i]=s||o,n=r.exec(t)}return e}function f1e(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,r])=>`${e}="${r}"`).join(" ")}function p1e(t){const{nodeName:e,name:r,getContent:n,parseAttributes:i=h1e,serializeAttributes:s=f1e,defaultAttributes:o={},selfClosing:a=!1,allowedAttributes:l}=t,c=r||e,d=f=>{if(!l)return f;const p={};return l.forEach(m=>{const g=typeof m=="string"?m:m.name,b=typeof m=="string"?void 0:m.skipIfDefault;if(g in f){const y=f[g];if(b!==void 0&&y===b)return;p[g]=y}}),p},h=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(f,p)=>{const m={...o,...f.attributes};if(a)return p.createNode(e,m);const g=n?n(f):f.content||"";return g?p.createNode(e,m,[p.createTextNode(g)]):p.createNode(e,m,[])},markdownTokenizer:{name:e,level:"inline",start(f){const p=a?new RegExp(`\\[${h}\\s*[^\\]]*\\]`):new RegExp(`\\[${h}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${h}\\]`),m=f.match(p),g=m==null?void 0:m.index;return g!==void 0?g:-1},tokenize(f,p,m){const g=a?new RegExp(`^\\[${h}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${h}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${h}\\]`),b=f.match(g);if(!b)return;let y="",v="";if(a){const[,x]=b;v=x}else{const[,x,S]=b;v=x,y=S||""}const w=i(v.trim());return{type:e,raw:b[0],content:y.trim(),attributes:w}}},renderMarkdown:f=>{let p="";n?p=n(f):f.content&&f.content.length>0&&(p=f.content.filter(y=>y.type==="text").map(y=>y.text).join(""));const m=d(f.attrs||{}),g=s(m),b=g?` ${g}`:"";return a?`[${c}${b}]`:`[${c}${b}]${p}[/${c}]`}}}function cI(t,e,r){var n,i,s,o;const a=t.split(`
`),l=[];let c="",d=0;const h=e.baseIndentSize||2;for(;d<a.length;){const f=a[d],p=f.match(e.itemPattern);if(!p){if(l.length>0)break;if(f.trim()===""){d+=1,c=`${c}${f}
`;continue}else return}const m=e.extractItemData(p),{indentLevel:g,mainContent:b}=m;c=`${c}${f}
`;const y=[b];for(d+=1;d<a.length;){const S=a[d];if(S.trim()===""){const N=a.slice(d+1).findIndex(C=>C.trim()!=="");if(N===-1)break;if((((i=(n=a[d+1+N].match(/^(\s*)/))==null?void 0:n[1])==null?void 0:i.length)||0)>g){y.push(S),c=`${c}${S}
`,d+=1;continue}else break}if((((o=(s=S.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:o.length)||0)>g)y.push(S),c=`${c}${S}
`,d+=1;else break}let v;const w=y.slice(1);if(w.length>0){const S=w.map(_=>_.slice(g+h)).join(`
`);S.trim()&&(e.customNestedParser?v=e.customNestedParser(S):v=r.blockTokens(S))}const x=e.createToken(m,v);l.push(x)}if(l.length!==0)return{items:l,raw:c}}function PM(t,e,r,n){if(!t||!Array.isArray(t.content))return"";const i=typeof r=="function"?r(n):r,[s,...o]=t.content,a=e.renderChildren([s]),l=[`${i}${a}`];return o&&o.length>0&&o.forEach(c=>{const d=e.renderChildren([c]);if(d){const h=d.split(`
`).map(f=>f?e.indent(f):"").join(`
`);l.push(h)}}),l.join(`
`)}function m1e(t,e,r={}){const{state:n}=e,{doc:i,tr:s}=n,o=t;i.descendants((a,l)=>{const c=s.mapping.map(l),d=s.mapping.map(l)+a.nodeSize;let h=null;if(a.marks.forEach(p=>{if(p!==o)return!1;h=p}),!h)return;let f=!1;if(Object.keys(r).forEach(p=>{r[p]!==h.attrs[p]&&(f=!0)}),f){const p=t.type.create({...t.attrs,...r});s.removeMark(c,d,t.type),s.addMark(c,d,p)}}),s.docChanged&&e.view.dispatch(s)}var vi=class Yne extends TM{constructor(){super(...arguments),this.type="node"}static create(e={}){const r=typeof e=="function"?e():e;return new Yne(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function Oc(t){return new Xbe({find:t.find,handler:({state:e,range:r,match:n,pasteEvent:i})=>{const s=_t(t.getAttributes,void 0,n,i);if(s===!1||s===null)return null;const{tr:o}=e,a=n[n.length-1],l=n[0];let c=r.to;if(a){const d=l.search(/\S/),h=r.from+l.indexOf(a),f=h+a.length;if(kM(r.from,r.to,e.doc).filter(m=>m.mark.type.excluded.find(b=>b===t.type&&b!==m.mark.type)).filter(m=>m.to>h).length)return null;f<r.to&&o.delete(f,r.to),h>r.from&&o.delete(r.from+d,h),c=r.from+d+a.length,o.addMark(r.from+d,c,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:g1e,getOwnPropertySymbols:y1e}=Object,{hasOwnProperty:v1e}=Object.prototype;function j1(t,e){return function(n,i,s){return t(n,i,s)&&e(n,i,s)}}function Eg(t){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,i);const{cache:s}=i,o=s.get(r),a=s.get(n);if(o&&a)return o===n&&a===r;s.set(r,n),s.set(n,r);const l=t(r,n,i);return s.delete(r),s.delete(n),l}}function b1e(t){return t!=null?t[Symbol.toStringTag]:void 0}function I4(t){return g1e(t).concat(y1e(t))}const x1e=Object.hasOwn||((t,e)=>v1e.call(t,e));function Hc(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const w1e="__v",S1e="__o",_1e="_owner",{getOwnPropertyDescriptor:R4,keys:M4}=Object;function E1e(t,e){return t.byteLength===e.byteLength&&iv(new Uint8Array(t),new Uint8Array(e))}function N1e(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function C1e(t,e){return t.byteLength===e.byteLength&&iv(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function k1e(t,e){return Hc(t.getTime(),e.getTime())}function T1e(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function O1e(t,e){return t===e}function $4(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),s=t.entries();let o,a,l=0;for(;(o=s.next())&&!o.done;){const c=e.entries();let d=!1,h=0;for(;(a=c.next())&&!a.done;){if(i[h]){h++;continue}const f=o.value,p=a.value;if(r.equals(f[0],p[0],l,h,t,e,r)&&r.equals(f[1],p[1],f[0],p[0],t,e,r)){d=i[h]=!0;break}h++}if(!d)return!1;l++}return!0}const j1e=Hc;function P1e(t,e,r){const n=M4(t);let i=n.length;if(M4(e).length!==i)return!1;for(;i-- >0;)if(!Qne(t,e,r,n[i]))return!1;return!0}function Qh(t,e,r){const n=I4(t);let i=n.length;if(I4(e).length!==i)return!1;let s,o,a;for(;i-- >0;)if(s=n[i],!Qne(t,e,r,s)||(o=R4(t,s),a=R4(e,s),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function I1e(t,e){return Hc(t.valueOf(),e.valueOf())}function R1e(t,e){return t.source===e.source&&t.flags===e.flags}function D4(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),s=t.values();let o,a;for(;(o=s.next())&&!o.done;){const l=e.values();let c=!1,d=0;for(;(a=l.next())&&!a.done;){if(!i[d]&&r.equals(o.value,a.value,o.value,a.value,t,e,r)){c=i[d]=!0;break}d++}if(!c)return!1}return!0}function iv(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function M1e(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function Qne(t,e,r,n){return(n===_1e||n===S1e||n===w1e)&&(t.$$typeof||e.$$typeof)?!0:x1e(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const $1e="[object ArrayBuffer]",D1e="[object Arguments]",A1e="[object Boolean]",F1e="[object DataView]",q1e="[object Date]",L1e="[object Error]",B1e="[object Map]",z1e="[object Number]",V1e="[object Object]",U1e="[object RegExp]",H1e="[object Set]",W1e="[object String]",K1e={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},G1e="[object URL]",Y1e=Object.prototype.toString;function Q1e({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:o,areNumbersEqual:a,areObjectsEqual:l,arePrimitiveWrappersEqual:c,areRegExpsEqual:d,areSetsEqual:h,areTypedArraysEqual:f,areUrlsEqual:p,unknownTagComparators:m}){return function(b,y,v){if(b===y)return!0;if(b==null||y==null)return!1;const w=typeof b;if(w!==typeof y)return!1;if(w!=="object")return w==="number"?a(b,y,v):w==="function"?s(b,y,v):!1;const x=b.constructor;if(x!==y.constructor)return!1;if(x===Object)return l(b,y,v);if(Array.isArray(b))return e(b,y,v);if(x===Date)return n(b,y,v);if(x===RegExp)return d(b,y,v);if(x===Map)return o(b,y,v);if(x===Set)return h(b,y,v);const S=Y1e.call(b);if(S===q1e)return n(b,y,v);if(S===U1e)return d(b,y,v);if(S===B1e)return o(b,y,v);if(S===H1e)return h(b,y,v);if(S===V1e)return typeof b.then!="function"&&typeof y.then!="function"&&l(b,y,v);if(S===G1e)return p(b,y,v);if(S===L1e)return i(b,y,v);if(S===D1e)return l(b,y,v);if(K1e[S])return f(b,y,v);if(S===$1e)return t(b,y,v);if(S===F1e)return r(b,y,v);if(S===A1e||S===z1e||S===W1e)return c(b,y,v);if(m){let _=m[S];if(!_){const N=b1e(b);N&&(_=m[N])}if(_)return _(b,y,v)}return!1}}function X1e({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:E1e,areArraysEqual:r?Qh:N1e,areDataViewsEqual:C1e,areDatesEqual:k1e,areErrorsEqual:T1e,areFunctionsEqual:O1e,areMapsEqual:r?j1($4,Qh):$4,areNumbersEqual:j1e,areObjectsEqual:r?Qh:P1e,arePrimitiveWrappersEqual:I1e,areRegExpsEqual:R1e,areSetsEqual:r?j1(D4,Qh):D4,areTypedArraysEqual:r?j1(iv,Qh):iv,areUrlsEqual:M1e,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const i=Eg(n.areArraysEqual),s=Eg(n.areMapsEqual),o=Eg(n.areObjectsEqual),a=Eg(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:a})}return n}function J1e(t){return function(e,r,n,i,s,o,a){return t(e,r,a)}}function Z1e({circular:t,comparator:e,createState:r,equals:n,strict:i}){if(r)return function(a,l){const{cache:c=t?new WeakMap:void 0,meta:d}=r();return e(a,l,{cache:c,equals:n,meta:d,strict:i})};if(t)return function(a,l){return e(a,l,{cache:new WeakMap,equals:n,meta:void 0,strict:i})};const s={cache:void 0,equals:n,meta:void 0,strict:i};return function(a,l){return e(a,l,s)}}const exe=dl();dl({strict:!0});dl({circular:!0});dl({circular:!0,strict:!0});dl({createInternalComparator:()=>Hc});dl({strict:!0,createInternalComparator:()=>Hc});dl({circular:!0,createInternalComparator:()=>Hc});dl({circular:!0,createInternalComparator:()=>Hc,strict:!0});function dl(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:i=!1}=t,s=X1e(t),o=Q1e(s),a=r?r(o):J1e(o);return Z1e({circular:e,comparator:o,createState:n,equals:a,strict:i})}var Xne={exports:{}},Jne={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q0=T,txe=nM;function rxe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nxe=typeof Object.is=="function"?Object.is:rxe,ixe=txe.useSyncExternalStore,sxe=q0.useRef,oxe=q0.useEffect,axe=q0.useMemo,lxe=q0.useDebugValue;Jne.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var s=sxe(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=axe(function(){function l(p){if(!c){if(c=!0,d=p,p=n(p),i!==void 0&&o.hasValue){var m=o.value;if(i(m,p))return h=m}return h=p}if(m=h,nxe(d,p))return m;var g=n(p);return i!==void 0&&i(m,g)?(d=p,m):(d=p,h=g)}var c=!1,d,h,f=r===void 0?null:r;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,r,n,i]);var a=ixe(t,s[0],s[1]);return oxe(function(){o.hasValue=!0,o.value=a},[a]),lxe(a),a};Xne.exports=Jne;var cxe=Xne.exports,uxe=(...t)=>e=>{t.forEach(r=>{typeof r=="function"?r(e):r&&(r.current=e)})},dxe=({contentComponent:t})=>{const e=nM.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return u.jsx(u.Fragment,{children:Object.values(e)})};function hxe(){const t=new Set;let e={};return{subscribe(r){return t.add(r),()=>{t.delete(r)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(r,n){e={...e,[r]:due.createPortal(n.reactElement,n.element,r)},t.forEach(i=>i())},removeRenderer(r){const n={...e};delete n[r],e=n,t.forEach(i=>i())}}}var fxe=class extends Ae.Component{constructor(t){var e;super(t),this.editorContentRef=Ae.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const r=this.editorContentRef.current;r.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:r}),e.contentComponent=hxe(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const r=document.createElement("div");r.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:r})}catch{}}}render(){const{editor:t,innerRef:e,...r}=this.props;return u.jsxs(u.Fragment,{children:[u.jsx("div",{ref:uxe(e,this.editorContentRef),...r}),(t==null?void 0:t.contentComponent)&&u.jsx(dxe,{contentComponent:t.contentComponent})]})}},pxe=T.forwardRef((t,e)=>{const r=Ae.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Ae.createElement(fxe,{key:r,innerRef:e,...t})}),mxe=Ae.memo(pxe),gxe=typeof window<"u"?T.useLayoutEffect:T.useEffect,yxe=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(n=>n())},r=this.editor;return r.on("transaction",e),()=>{r.off("transaction",e)}}}};function vxe(t){var e;const[r]=T.useState(()=>new yxe(t.editor)),n=cxe.useSyncExternalStoreWithSelector(r.subscribe,r.getSnapshot,r.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:exe);return gxe(()=>r.watch(t.editor),[t.editor,r]),T.useDebugValue(n),n}var bxe=!1,uI=typeof window>"u",xxe=uI||!!(typeof window<"u"&&window.next),wxe=class Zne{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(r=>r())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?uI||xxe?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...n)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...n)},onBlur:(...n)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...n)},onCreate:(...n)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...n)},onDestroy:(...n)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...n)},onFocus:(...n)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...n)},onSelectionUpdate:(...n)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...n)},onTransaction:(...n)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...n)},onUpdate:(...n)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...n)},onContentError:(...n)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...n)},onDrop:(...n)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...n)},onPaste:(...n)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...n)},onDelete:(...n)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...n)}};return new o1e(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,r){return Object.keys(e).every(n=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)?!0:n==="extensions"&&e.extensions&&r.extensions?e.extensions.length!==r.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=r.extensions)==null?void 0:o[s])}):e[n]===r[n])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Zne.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((n,i)=>n===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,r=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){r&&r.setOptions(this.options.current);return}r&&!r.isDestroyed&&(r.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function Sxe(t={},e=[]){const r=T.useRef(t);r.current=t;const[n]=T.useState(()=>new wxe(r)),i=nM.useSyncExternalStore(n.subscribe,n.getEditor,n.getServerSnapshot);return T.useDebugValue(i),T.useEffect(n.onRender(e)),vxe({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&s===0?0:s+1}),i}var _xe=T.createContext({editor:null});_xe.Consumer;var Exe=T.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),Nxe=()=>T.useContext(Exe);Ae.forwardRef((t,e)=>{const{onDragStart:r}=Nxe(),n=t.as||"div";return u.jsx(n,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:r,style:{whiteSpace:"normal",...t.style}})});Ae.createContext({markViewContentRef:()=>{}});var sv=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:r,...n}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,n,r]},Cxe=/^\s*>\s$/,kxe=vi.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return sv("blockquote",{...Nr(this.options.HTMLAttributes,t),children:sv("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const r=">",n=[];return t.content.forEach(i=>{const a=e.renderChildren([i]).split(`
`).map(l=>l.trim()===""?r:`${r} ${l}`);n.push(a.join(`
`))}),n.join(`
${r}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[qd({find:Cxe,type:this.type})]}}),Txe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Oxe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,jxe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Pxe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Ixe=Uc.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return sv("strong",{...Nr(this.options.HTMLAttributes,t),children:sv("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Fd({find:Txe,type:this.type}),Fd({find:jxe,type:this.type})]},addPasteRules(){return[Oc({find:Oxe,type:this.type}),Oc({find:Pxe,type:this.type})]}}),Rxe=/(^|[^`])`([^`]+)`(?!`)$/,Mxe=/(^|[^`])`([^`]+)`(?!`)/g,$xe=Uc.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Nr(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Fd({find:Rxe,type:this.type})]},addPasteRules(){return[Oc({find:Mxe,type:this.type})]}}),P1=4,Dxe=/^```([a-z]+)?[\s\n]$/,Axe=/^~~~([a-z]+)?[\s\n]$/,Fxe=vi.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:P1,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:r}=this.options;if(!r)return null;const s=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(r)).map(o=>o.replace(r,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Nr(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var r;return((r=t.raw)==null?void 0:r.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var r;let n="";const i=((r=t.attrs)==null?void 0:r.language)||"";return t.content?n=[`\`\`\`${i}`,e.renderChildren(t.content),"```"].join(`
`):n=`\`\`\`${i}

\`\`\``,n},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,r=e.pos===1;return!t||e.parent.type.name!==this.name?!1:r||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const r=(e=this.options.tabSize)!=null?e:P1,{state:n}=t,{selection:i}=n,{$from:s,empty:o}=i;if(s.parent.type!==this.type)return!1;const a=" ".repeat(r);return o?t.commands.insertContent(a):t.commands.command(({tr:l})=>{const{from:c,to:d}=i,p=n.doc.textBetween(c,d,`
`,`
`).split(`
`).map(m=>a+m).join(`
`);return l.replaceWith(c,d,n.schema.text(p)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const r=(e=this.options.tabSize)!=null?e:P1,{state:n}=t,{selection:i}=n,{$from:s,empty:o}=i;return s.parent.type!==this.type?!1:o?t.commands.command(({tr:a})=>{var l;const{pos:c}=s,d=s.start(),h=s.end(),p=n.doc.textBetween(d,h,`
`,`
`).split(`
`);let m=0,g=0;const b=c-d;for(let _=0;_<p.length;_+=1){if(g+p[_].length>=b){m=_;break}g+=p[_].length+1}const v=((l=p[m].match(/^ */))==null?void 0:l[0])||"",w=Math.min(v.length,r);if(w===0)return!0;let x=d;for(let _=0;_<m;_+=1)x+=p[_].length+1;return a.delete(x,x+w),c-x<=w&&a.setSelection(Be.create(a.doc,x)),!0}):t.commands.command(({tr:a})=>{const{from:l,to:c}=i,f=n.doc.textBetween(l,c,`
`,`
`).split(`
`).map(p=>{var m;const g=((m=p.match(/^ */))==null?void 0:m[0])||"",b=Math.min(g.length,r);return p.slice(b)}).join(`
`);return a.replaceWith(l,c,n.schema.text(f)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:r}=e,{$from:n,empty:i}=r;if(!i||n.parent.type!==this.type)return!1;const s=n.parentOffset===n.parent.nodeSize-2,o=n.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:a})=>(a.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:r,doc:n}=e,{$from:i,empty:s}=r;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:n.nodeAt(a)?t.commands.command(({tr:c})=>(c.setSelection(Ge.near(n.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[lI({find:Dxe,type:this.type,getAttributes:t=>({language:t[1]})}),lI({find:Axe,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Xt({key:new Mr("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const r=e.clipboardData.getData("text/plain"),n=e.clipboardData.getData("vscode-editor-data"),i=n?JSON.parse(n):void 0,s=i==null?void 0:i.mode;if(!r||!s)return!1;const{tr:o,schema:a}=t.state,l=a.text(r.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(Be.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),qxe=vi.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),Lxe=vi.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Nr(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:r,editor:n})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=r;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=n.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:d})=>{if(d&&l&&o){const h=l.filter(f=>a.includes(f.type.name));c.ensureMarks(h)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Bxe=vi.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Nr(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var r;const n=(r=t.attrs)!=null&&r.level?parseInt(t.attrs.level,10):1,i="#".repeat(n);return t.content?`${i} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>lI({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),zxe=vi.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Nr(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!l1e(e,e.schema.nodes[this.name]))return!1;const{selection:r}=e,{$to:n}=r,i=t();return Ine(r)?i.insertContentAt(n.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:s,tr:o,dispatch:a})=>{if(a){const{$to:l}=o.selection,c=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?o.setSelection(Be.create(o.doc,l.pos+1)):l.nodeAfter.isBlock?o.setSelection(Re.create(o.doc,l.pos)):o.setSelection(Be.create(o.doc,l.pos));else{const d=s.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,h=d==null?void 0:d.create();h&&(o.insert(c,h),o.setSelection(Be.create(o.doc,c+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[a1e({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),Vxe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Uxe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Hxe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Wxe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Kxe=Uc.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Nr(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Fd({find:Vxe,type:this.type}),Fd({find:Hxe,type:this.type})]},addPasteRules(){return[Oc({find:Uxe,type:this.type}),Oc({find:Wxe,type:this.type})]}});const Gxe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",Yxe="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",dI="numeric",hI="ascii",fI="alpha",Of="asciinumeric",hf="alphanumeric",pI="domain",eie="emoji",Qxe="scheme",Xxe="slashscheme",I1="whitespace";function Jxe(t,e){return t in e||(e[t]=[]),e[t]}function Dl(t,e,r){e[dI]&&(e[Of]=!0,e[hf]=!0),e[hI]&&(e[Of]=!0,e[fI]=!0),e[Of]&&(e[hf]=!0),e[fI]&&(e[hf]=!0),e[hf]&&(e[pI]=!0),e[eie]&&(e[pI]=!0);for(const n in e){const i=Jxe(n,r);i.indexOf(t)<0&&i.push(t)}}function Zxe(t,e){const r={};for(const n in e)e[n].indexOf(t)>=0&&(r[n]=!0);return r}function Vn(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Vn.groups={};Vn.prototype={accepts(){return!!this.t},go(t){const e=this,r=e.j[t];if(r)return r;for(let n=0;n<e.jr.length;n++){const i=e.jr[n][0],s=e.jr[n][1];if(s&&i.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,r,n){for(let i=0;i<t.length;i++)this.tt(t[i],e,r,n)},tr(t,e,r,n){n=n||Vn.groups;let i;return e&&e.j?i=e:(i=new Vn(e),r&&n&&Dl(e,r,n)),this.jr.push([t,i]),i},ts(t,e,r,n){let i=this;const s=t.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(t[o]);return i.tt(t[s-1],e,r,n)},tt(t,e,r,n){n=n||Vn.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const s=e;let o,a=i.go(t);if(a?(o=new Vn,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new Vn,s){if(n)if(o.t&&typeof o.t=="string"){const l=Object.assign(Zxe(o.t,n),r);Dl(s,l,n)}else r&&Dl(s,r,n);o.t=s}return i.j[t]=o,o}};const Ke=(t,e,r,n,i)=>t.ta(e,r,n,i),tr=(t,e,r,n,i)=>t.tr(e,r,n,i),A4=(t,e,r,n,i)=>t.ts(e,r,n,i),ee=(t,e,r,n,i)=>t.tt(e,r,n,i),to="WORD",mI="UWORD",tie="ASCIINUMERICAL",rie="ALPHANUMERICAL",wp="LOCALHOST",gI="TLD",yI="UTLD",iy="SCHEME",Nu="SLASH_SCHEME",IM="NUM",vI="WS",RM="NL",jf="OPENBRACE",Pf="CLOSEBRACE",ov="OPENBRACKET",av="CLOSEBRACKET",lv="OPENPAREN",cv="CLOSEPAREN",uv="OPENANGLEBRACKET",dv="CLOSEANGLEBRACKET",hv="FULLWIDTHLEFTPAREN",fv="FULLWIDTHRIGHTPAREN",pv="LEFTCORNERBRACKET",mv="RIGHTCORNERBRACKET",gv="LEFTWHITECORNERBRACKET",yv="RIGHTWHITECORNERBRACKET",vv="FULLWIDTHLESSTHAN",bv="FULLWIDTHGREATERTHAN",xv="AMPERSAND",wv="APOSTROPHE",Sv="ASTERISK",sa="AT",_v="BACKSLASH",Ev="BACKTICK",Nv="CARET",ha="COLON",MM="COMMA",Cv="DOLLAR",Ss="DOT",kv="EQUALS",$M="EXCLAMATION",Ei="HYPHEN",If="PERCENT",Tv="PIPE",Ov="PLUS",jv="POUND",Rf="QUERY",DM="QUOTE",nie="FULLWIDTHMIDDLEDOT",AM="SEMI",_s="SLASH",Mf="TILDE",Pv="UNDERSCORE",iie="EMOJI",Iv="SYM";var sie=Object.freeze({__proto__:null,ALPHANUMERICAL:rie,AMPERSAND:xv,APOSTROPHE:wv,ASCIINUMERICAL:tie,ASTERISK:Sv,AT:sa,BACKSLASH:_v,BACKTICK:Ev,CARET:Nv,CLOSEANGLEBRACKET:dv,CLOSEBRACE:Pf,CLOSEBRACKET:av,CLOSEPAREN:cv,COLON:ha,COMMA:MM,DOLLAR:Cv,DOT:Ss,EMOJI:iie,EQUALS:kv,EXCLAMATION:$M,FULLWIDTHGREATERTHAN:bv,FULLWIDTHLEFTPAREN:hv,FULLWIDTHLESSTHAN:vv,FULLWIDTHMIDDLEDOT:nie,FULLWIDTHRIGHTPAREN:fv,HYPHEN:Ei,LEFTCORNERBRACKET:pv,LEFTWHITECORNERBRACKET:gv,LOCALHOST:wp,NL:RM,NUM:IM,OPENANGLEBRACKET:uv,OPENBRACE:jf,OPENBRACKET:ov,OPENPAREN:lv,PERCENT:If,PIPE:Tv,PLUS:Ov,POUND:jv,QUERY:Rf,QUOTE:DM,RIGHTCORNERBRACKET:mv,RIGHTWHITECORNERBRACKET:yv,SCHEME:iy,SEMI:AM,SLASH:_s,SLASH_SCHEME:Nu,SYM:Iv,TILDE:Mf,TLD:gI,UNDERSCORE:Pv,UTLD:yI,UWORD:mI,WORD:to,WS:vI});const Xs=/[a-z]/,Xh=new RegExp("\\p{L}","u"),R1=new RegExp("\\p{Emoji}","u"),Js=/\d/,M1=/\s/,F4="\r",$1=`
`,ewe="",twe="",D1="";let Ng=null,Cg=null;function rwe(t=[]){const e={};Vn.groups=e;const r=new Vn;Ng==null&&(Ng=q4(Gxe)),Cg==null&&(Cg=q4(Yxe)),ee(r,"'",wv),ee(r,"{",jf),ee(r,"}",Pf),ee(r,"[",ov),ee(r,"]",av),ee(r,"(",lv),ee(r,")",cv),ee(r,"<",uv),ee(r,">",dv),ee(r,"",hv),ee(r,"",fv),ee(r,"",pv),ee(r,"",mv),ee(r,"",gv),ee(r,"",yv),ee(r,"",vv),ee(r,"",bv),ee(r,"&",xv),ee(r,"*",Sv),ee(r,"@",sa),ee(r,"`",Ev),ee(r,"^",Nv),ee(r,":",ha),ee(r,",",MM),ee(r,"$",Cv),ee(r,".",Ss),ee(r,"=",kv),ee(r,"!",$M),ee(r,"-",Ei),ee(r,"%",If),ee(r,"|",Tv),ee(r,"+",Ov),ee(r,"#",jv),ee(r,"?",Rf),ee(r,'"',DM),ee(r,"/",_s),ee(r,";",AM),ee(r,"~",Mf),ee(r,"_",Pv),ee(r,"\\",_v),ee(r,"",nie);const n=tr(r,Js,IM,{[dI]:!0});tr(n,Js,n);const i=tr(n,Xs,tie,{[Of]:!0}),s=tr(n,Xh,rie,{[hf]:!0}),o=tr(r,Xs,to,{[hI]:!0});tr(o,Js,i),tr(o,Xs,o),tr(i,Js,i),tr(i,Xs,i);const a=tr(r,Xh,mI,{[fI]:!0});tr(a,Xs),tr(a,Js,s),tr(a,Xh,a),tr(s,Js,s),tr(s,Xs),tr(s,Xh,s);const l=ee(r,$1,RM,{[I1]:!0}),c=ee(r,F4,vI,{[I1]:!0}),d=tr(r,M1,vI,{[I1]:!0});ee(r,D1,d),ee(c,$1,l),ee(c,D1,d),tr(c,M1,d),ee(d,F4),ee(d,$1),tr(d,M1,d),ee(d,D1,d);const h=tr(r,R1,iie,{[eie]:!0});ee(h,"#"),tr(h,R1,h),ee(h,ewe,h);const f=ee(h,twe);ee(f,"#"),tr(f,R1,h);const p=[[Xs,o],[Js,i]],m=[[Xs,null],[Xh,a],[Js,s]];for(let g=0;g<Ng.length;g++)Qo(r,Ng[g],gI,to,p);for(let g=0;g<Cg.length;g++)Qo(r,Cg[g],yI,mI,m);Dl(gI,{tld:!0,ascii:!0},e),Dl(yI,{utld:!0,alpha:!0},e),Qo(r,"file",iy,to,p),Qo(r,"mailto",iy,to,p),Qo(r,"http",Nu,to,p),Qo(r,"https",Nu,to,p),Qo(r,"ftp",Nu,to,p),Qo(r,"ftps",Nu,to,p),Dl(iy,{scheme:!0,ascii:!0},e),Dl(Nu,{slashscheme:!0,ascii:!0},e),t=t.sort((g,b)=>g[0]>b[0]?1:-1);for(let g=0;g<t.length;g++){const b=t[g][0],v=t[g][1]?{[Qxe]:!0}:{[Xxe]:!0};b.indexOf("-")>=0?v[pI]=!0:Xs.test(b)?Js.test(b)?v[Of]=!0:v[hI]=!0:v[dI]=!0,A4(r,b,b,v)}return A4(r,"localhost",wp,{ascii:!0}),r.jd=new Vn(Iv),{start:r,tokens:Object.assign({groups:e},sie)}}function oie(t,e){const r=nwe(e.replace(/[A-Z]/g,a=>a.toLowerCase())),n=r.length,i=[];let s=0,o=0;for(;o<n;){let a=t,l=null,c=0,d=null,h=-1,f=-1;for(;o<n&&(l=a.go(r[o]));)a=l,a.accepts()?(h=0,f=0,d=a):h>=0&&(h+=r[o].length,f++),c+=r[o].length,s+=r[o].length,o++;s-=h,o-=f,c-=h,i.push({t:d.t,v:e.slice(s-c,s),s:s-c,e:s})}return i}function nwe(t){const e=[],r=t.length;let n=0;for(;n<r;){let i=t.charCodeAt(n),s,o=i<55296||i>56319||n+1===r||(s=t.charCodeAt(n+1))<56320||s>57343?t[n]:t.slice(n,n+2);e.push(o),n+=o.length}return e}function Qo(t,e,r,n,i){let s;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];t.j[l]?s=t.j[l]:(s=new Vn(n),s.jr=i.slice(),t.j[l]=s),t=s}return s=new Vn(r),s.jr=i.slice(),t.j[e[o-1]]=s,s}function q4(t){const e=[],r=[];let n=0,i="0123456789";for(;n<t.length;){let s=0;for(;i.indexOf(t[n+s])>=0;)s++;if(s>0){e.push(r.join(""));for(let o=parseInt(t.substring(n,n+s),10);o>0;o--)r.pop();n+=s}else r.push(t[n]),n++}return e}const Sp={defaultProtocol:"http",events:null,format:L4,formatHref:L4,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function FM(t,e=null){let r=Object.assign({},Sp);t&&(r=Object.assign(r,t instanceof FM?t.o:t));const n=r.ignoreTags,i=[];for(let s=0;s<n.length;s++)i.push(n[s].toUpperCase());this.o=r,e&&(this.defaultRender=e),this.ignoreTags=i}FM.prototype={o:Sp,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,r){const n=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=r.t in i?i[r.t]:Sp[t],typeof i=="function"&&n&&(i=i(e,r))):typeof i=="function"&&n&&(i=i(e,r.t,r)),i)},getObj(t,e,r){let n=this.o[t];return typeof n=="function"&&e!=null&&(n=n(e,r.t,r)),n},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function L4(t){return t}function aie(t,e){this.t="token",this.v=t,this.tk=e}aie.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),r=t.get("truncate",e,this),n=t.get("format",e,this);return r&&n.length>r?n.substring(0,r)+"":n},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Sp.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,r=this.toHref(t.get("defaultProtocol")),n=t.get("formatHref",r,this),i=t.get("tagName",r,e),s=this.toFormattedString(t),o={},a=t.get("className",r,e),l=t.get("target",r,e),c=t.get("rel",r,e),d=t.getObj("attributes",r,e),h=t.getObj("events",r,e);return o.href=n,a&&(o.class=a),l&&(o.target=l),c&&(o.rel=c),d&&Object.assign(o,d),{tagName:i,attributes:o,content:s,eventListeners:h}}};function L0(t,e){class r extends aie{constructor(i,s){super(i,s),this.t=t}}for(const n in e)r.prototype[n]=e[n];return r.t=t,r}const B4=L0("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),z4=L0("text"),iwe=L0("nl"),kg=L0("url",{isLink:!0,toHref(t=Sp.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==wp&&t[1].t===ha}}),_i=t=>new Vn(t);function swe({groups:t}){const e=t.domain.concat([xv,Sv,sa,_v,Ev,Nv,Cv,kv,Ei,IM,If,Tv,Ov,jv,_s,Iv,Mf,Pv]),r=[wv,ha,MM,Ss,$M,If,Rf,DM,AM,uv,dv,jf,Pf,av,ov,lv,cv,hv,fv,pv,mv,gv,yv,vv,bv],n=[xv,wv,Sv,_v,Ev,Nv,Cv,kv,Ei,jf,Pf,If,Tv,Ov,jv,Rf,_s,Iv,Mf,Pv],i=_i(),s=ee(i,Mf);Ke(s,n,s),Ke(s,t.domain,s);const o=_i(),a=_i(),l=_i();Ke(i,t.domain,o),Ke(i,t.scheme,a),Ke(i,t.slashscheme,l),Ke(o,n,s),Ke(o,t.domain,o);const c=ee(o,sa);ee(s,sa,c),ee(a,sa,c),ee(l,sa,c);const d=ee(s,Ss);Ke(d,n,s),Ke(d,t.domain,s);const h=_i();Ke(c,t.domain,h),Ke(h,t.domain,h);const f=ee(h,Ss);Ke(f,t.domain,h);const p=_i(B4);Ke(f,t.tld,p),Ke(f,t.utld,p),ee(c,wp,p);const m=ee(h,Ei);ee(m,Ei,m),Ke(m,t.domain,h),Ke(p,t.domain,h),ee(p,Ss,f),ee(p,Ei,m);const g=ee(p,ha);Ke(g,t.numeric,B4);const b=ee(o,Ei),y=ee(o,Ss);ee(b,Ei,b),Ke(b,t.domain,o),Ke(y,n,s),Ke(y,t.domain,o);const v=_i(kg);Ke(y,t.tld,v),Ke(y,t.utld,v),Ke(v,t.domain,o),Ke(v,n,s),ee(v,Ss,y),ee(v,Ei,b),ee(v,sa,c);const w=ee(v,ha),x=_i(kg);Ke(w,t.numeric,x);const S=_i(kg),_=_i();Ke(S,e,S),Ke(S,r,_),Ke(_,e,S),Ke(_,r,_),ee(v,_s,S),ee(x,_s,S);const N=ee(a,ha),E=ee(l,ha),k=ee(E,_s),C=ee(k,_s);Ke(a,t.domain,o),ee(a,Ss,y),ee(a,Ei,b),Ke(l,t.domain,o),ee(l,Ss,y),ee(l,Ei,b),Ke(N,t.domain,S),ee(N,_s,S),ee(N,Rf,S),Ke(C,t.domain,S),Ke(C,e,S),ee(C,_s,S);const O=[[jf,Pf],[ov,av],[lv,cv],[uv,dv],[hv,fv],[pv,mv],[gv,yv],[vv,bv]];for(let P=0;P<O.length;P++){const[j,M]=O[P],A=ee(S,j);ee(_,j,A),ee(A,M,S);const I=_i(kg);Ke(A,e,I);const L=_i();Ke(A,r),Ke(I,e,I),Ke(I,r,L),Ke(L,e,I),Ke(L,r,L),ee(I,M,S),ee(L,M,S)}return ee(i,wp,v),ee(i,RM,iwe),{start:i,tokens:sie}}function owe(t,e,r){let n=r.length,i=0,s=[],o=[];for(;i<n;){let a=t,l=null,c=null,d=0,h=null,f=-1;for(;i<n&&!(l=a.go(r[i].t));)o.push(r[i++]);for(;i<n&&(c=l||a.go(r[i].t));)l=null,a=c,a.accepts()?(f=0,h=a):f>=0&&f++,i++,d++;if(f<0)i-=d,i<n&&(o.push(r[i]),i++);else{o.length>0&&(s.push(A1(z4,e,o)),o=[]),i-=f,d-=f;const p=h.t,m=r.slice(i-d,i);s.push(A1(p,e,m))}}return o.length>0&&s.push(A1(z4,e,o)),s}function A1(t,e,r){const n=r[0].s,i=r[r.length-1].e,s=e.slice(n,i);return new t(s,r)}const awe=typeof console<"u"&&console&&console.warn||(()=>{}),lwe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Lt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function cwe(){return Vn.groups={},Lt.scanner=null,Lt.parser=null,Lt.tokenQueue=[],Lt.pluginQueue=[],Lt.customSchemes=[],Lt.initialized=!1,Lt}function V4(t,e=!1){if(Lt.initialized&&awe(`linkifyjs: already initialized - will not register custom scheme "${t}" ${lwe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Lt.customSchemes.push([t,e])}function uwe(){Lt.scanner=rwe(Lt.customSchemes);for(let t=0;t<Lt.tokenQueue.length;t++)Lt.tokenQueue[t][1]({scanner:Lt.scanner});Lt.parser=swe(Lt.scanner.tokens);for(let t=0;t<Lt.pluginQueue.length;t++)Lt.pluginQueue[t][1]({scanner:Lt.scanner,parser:Lt.parser});return Lt.initialized=!0,Lt}function qM(t){return Lt.initialized||uwe(),owe(Lt.parser.start,t,oie(Lt.scanner.start,t))}qM.scan=oie;function lie(t,e=null,r=null){if(e&&typeof e=="object"){if(r)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);r=e,e=null}const n=new FM(r),i=qM(t),s=[];for(let o=0;o<i.length;o++){const a=i[o];a.isLink&&(!e||a.t===e)&&n.check(a)&&s.push(a.toFormattedObject(n))}return s}var LM="[\0- -\u2029]",dwe=new RegExp(LM),hwe=new RegExp(`${LM}$`),fwe=new RegExp(LM,"g");function pwe(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function mwe(t){return new Xt({key:new Mr("autolink"),appendTransaction:(e,r,n)=>{const i=e.some(c=>c.docChanged)&&!r.doc.eq(n.doc),s=e.some(c=>c.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=n,a=Ene(r.doc,[...e]);if(Pne(a).forEach(({newRange:c})=>{const d=lbe(n.doc,c,p=>p.isTextblock);let h,f;if(d.length>1)h=d[0],f=n.doc.textBetween(h.pos,h.pos+h.node.nodeSize,void 0," ");else if(d.length){const p=n.doc.textBetween(c.from,c.to," "," ");if(!hwe.test(p))return;h=d[0],f=n.doc.textBetween(h.pos,c.to,void 0," ")}if(h&&f){const p=f.split(dwe).filter(Boolean);if(p.length<=0)return!1;const m=p[p.length-1],g=h.pos+f.lastIndexOf(m);if(!m)return!1;const b=qM(m).map(y=>y.toObject(t.defaultProtocol));if(!pwe(b))return!1;b.filter(y=>y.isLink).map(y=>({...y,from:g+y.start+1,to:g+y.end+1})).filter(y=>n.schema.marks.code?!n.doc.rangeHasMark(y.from,y.to,n.schema.marks.code):!0).filter(y=>t.validate(y.value)).filter(y=>t.shouldAutoLink(y.value)).forEach(y=>{kM(y.from,y.to,n.doc).some(v=>v.mark.type===t.type)||o.addMark(y.from,y.to,t.type.create({href:y.href}))})}}),!!o.steps.length)return o}})}function gwe(t){return new Xt({key:new Mr("handleClickLink"),props:{handleClick:(e,r,n)=>{var i,s;if(n.button!==0||!e.editable)return!1;let o=!1;if(t.enableClickSelection&&(o=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){let a=null;if(n.target instanceof HTMLAnchorElement)a=n.target;else{let h=n.target;const f=[];for(;h.nodeName!=="DIV";)f.push(h),h=h.parentNode;a=f.find(p=>p.nodeName==="A")}if(!a)return o;const l=jne(e.state,t.type.name),c=(i=a==null?void 0:a.href)!=null?i:l.href,d=(s=a==null?void 0:a.target)!=null?s:l.target;a&&c&&(window.open(c,d),o=!0)}return o}}})}function ywe(t){return new Xt({key:new Mr("handlePasteLink"),props:{handlePaste:(e,r,n)=>{const{shouldAutoLink:i}=t,{state:s}=e,{selection:o}=s,{empty:a}=o;if(a)return!1;let l="";n.content.forEach(d=>{l+=d.textContent});const c=lie(l,{defaultProtocol:t.defaultProtocol}).find(d=>d.isLink&&d.value===l);return!l||!c||i!==void 0&&!i(c.value)?!1:t.editor.commands.setMark(t.type,{href:c.href})}}})}function wl(t,e){const r=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(n=>{const i=typeof n=="string"?n:n.scheme;i&&r.push(i)}),!t||t.replace(fwe,"").match(new RegExp(`^(?:(?:${r.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var cie=Uc.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){V4(t);return}V4(t.scheme,t.optionalSlashes)})},onDestroy(){cwe()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!wl(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),r=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||r&&!t.includes("@"))return!0;const i=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(i)||!/\./.test(i))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:r=>!!wl(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!wl(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Nr(this.options.HTMLAttributes,t),0]:["a",Nr(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var r;const n=((r=t.attrs)==null?void 0:r.href)||"";return`[${e.renderChildren(t)}](${n})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:r}=t;return this.options.isAllowedUri(r,{defaultValidate:n=>!!wl(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:r}=t||{};return r&&!this.options.isAllowedUri(r,{defaultValidate:n=>!!wl(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Oc({find:t=>{const e=[];if(t){const{protocols:r,defaultProtocol:n}=this.options,i=lie(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!wl(o,r),protocols:r,defaultProtocol:n}));i.length&&i.forEach(s=>{this.options.shouldAutoLink(s.value)&&e.push({text:s.value,data:{href:s.href},index:s.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:r}=this.options;return this.options.autolink&&t.push(mwe({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:n=>this.options.isAllowedUri(n,{defaultValidate:i=>!!wl(i,e),protocols:e,defaultProtocol:r}),shouldAutoLink:this.options.shouldAutoLink})),t.push(gwe({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(ywe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),vwe=cie,bwe=Object.defineProperty,xwe=(t,e)=>{for(var r in e)bwe(t,r,{get:e[r],enumerable:!0})},wwe="listItem",U4="textStyle",H4=/^\s*([-+*])\s$/,uie=vi.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Nr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(wwe,this.editor.getAttributes(U4)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=qd({find:H4,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=qd({find:H4,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(U4),editor:this.editor})),[t]}}),die=vi.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Nr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let r=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(i=>i.type==="paragraph"))r=e.parseChildren(t.tokens);else{const i=t.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(r=[{type:"paragraph",content:e.parseInline(i.tokens)}],t.tokens.length>1){const o=t.tokens.slice(1),a=e.parseChildren(o);r.push(...a)}}else r=e.parseChildren(t.tokens)}return r.length===0&&(r=[{type:"paragraph",content:[]}]),{type:"listItem",content:r}},renderMarkdown:(t,e,r)=>PM(t,e,n=>n.parentType==="bulletList"?"- ":n.parentType==="orderedList"?`${n.index+1}. `:"- ",r),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Swe={};xwe(Swe,{findListItemPos:()=>im,getNextListDepth:()=>BM,handleBackspace:()=>bI,handleDelete:()=>xI,hasListBefore:()=>hie,hasListItemAfter:()=>_we,hasListItemBefore:()=>fie,listItemHasSubList:()=>pie,nextListIsDeeper:()=>mie,nextListIsHigher:()=>gie});var im=(t,e)=>{const{$from:r}=e.selection,n=Er(t,e.schema);let i=null,s=r.depth,o=r.pos,a=null;for(;s>0&&a===null;)i=r.node(s),i.type===n?a=s:(s-=1,o-=1);return a===null?null:{$pos:e.doc.resolve(o),depth:a}},BM=(t,e)=>{const r=im(t,e);if(!r)return!1;const[,n]=vbe(e,t,r.$pos.pos+4);return n},hie=(t,e,r)=>{const{$anchor:n}=t.selection,i=Math.max(0,n.pos-2),s=t.doc.resolve(i).node();return!(!s||!r.includes(s.type.name))},fie=(t,e)=>{var r;const{$anchor:n}=e.selection,i=e.doc.resolve(n.pos-2);return!(i.index()===0||((r=i.nodeBefore)==null?void 0:r.type.name)!==t)},pie=(t,e,r)=>{if(!r)return!1;const n=Er(t,e.schema);let i=!1;return r.descendants(s=>{s.type===n&&(i=!0)}),i},bI=(t,e,r)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!rl(t.state,e)&&hie(t.state,e,r)){const{$anchor:a}=t.state.selection,l=t.state.doc.resolve(a.before()-1),c=[];l.node().descendants((f,p)=>{f.type.name===e&&c.push({node:f,pos:p})});const d=c.at(-1);if(!d)return!1;const h=t.state.doc.resolve(l.start()+d.pos+1);return t.chain().cut({from:a.start()-1,to:a.end()+1},h.end()).joinForward().run()}if(!rl(t.state,e)||!Sbe(t.state))return!1;const n=im(e,t.state);if(!n)return!1;const s=t.state.doc.resolve(n.$pos.pos-2).node(n.depth),o=pie(e,t.state,s);return fie(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},mie=(t,e)=>{const r=BM(t,e),n=im(t,e);return!n||!r?!1:r>n.depth},gie=(t,e)=>{const r=BM(t,e),n=im(t,e);return!n||!r?!1:r<n.depth},xI=(t,e)=>{if(!rl(t.state,e)||!wbe(t.state,e))return!1;const{selection:r}=t.state,{$from:n,$to:i}=r;return!r.empty&&n.sameParent(i)?!1:mie(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():gie(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},_we=(t,e)=>{var r;const{$anchor:n}=e.selection,i=e.doc.resolve(n.pos-n.parentOffset-2);return!(i.index()===i.parent.childCount-1||((r=i.nodeAfter)==null?void 0:r.type.name)!==t)},yie=mr.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&xI(t,r)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&xI(t,r)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&bI(t,r,n)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&bI(t,r,n)&&(e=!0)}),e}}}}),W4=/^(\s*)(\d+)\.\s+(.*)$/,Ewe=/^\s/;function Nwe(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r],s=i.match(W4);if(!s)break;const[,o,a,l]=s,c=o.length;let d=l,h=r+1;const f=[i];for(;h<t.length;){const p=t[h];if(p.match(W4))break;if(p.trim()==="")f.push(p),d+=`
`,h+=1;else if(p.match(Ewe))f.push(p),d+=`
${p.slice(c+2)}`,h+=1;else break}e.push({indent:c,number:parseInt(a,10),content:d.trim(),raw:f.join(`
`)}),n=h,r=h}return[e,n]}function vie(t,e,r){var n;const i=[];let s=0;for(;s<t.length;){const o=t[s];if(o.indent===e){const a=o.content.split(`
`),l=((n=a[0])==null?void 0:n.trim())||"",c=[];l&&c.push({type:"paragraph",raw:l,tokens:r.inlineTokens(l)});const d=a.slice(1).join(`
`).trim();if(d){const p=r.blockTokens(d);c.push(...p)}let h=s+1;const f=[];for(;h<t.length&&t[h].indent>e;)f.push(t[h]),h+=1;if(f.length>0){const p=Math.min(...f.map(g=>g.indent)),m=vie(f,p,r);c.push({type:"list",ordered:!0,start:f[0].number,items:m,raw:f.map(g=>g.raw).join(`
`)})}i.push({type:"list_item",raw:o.raw,tokens:c}),s=h}else s+=1}return i}function Cwe(t,e){return t.map(r=>{if(r.type!=="list_item")return e.parseChildren([r])[0];const n=[];return r.tokens&&r.tokens.length>0&&r.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")n.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const s=e.parseChildren([i]);n.push({type:"paragraph",content:s})}else{const s=e.parseChildren([i]);s.length>0&&n.push(...s)}}),{type:"listItem",content:n}})}var kwe="listItem",K4="textStyle",G4=/^(\d+)\.\s$/,bie=vi.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...r}=t;return e===1?["ol",Nr(this.options.HTMLAttributes,r),0]:["ol",Nr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const r=t.start||1,n=t.items?Cwe(t.items,e):[];return r!==1?{type:"orderedList",attrs:{start:r},content:n}:{type:"orderedList",content:n}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),r=e==null?void 0:e.index;return r!==void 0?r:-1},tokenize:(t,e,r)=>{var n;const i=t.split(`
`),[s,o]=Nwe(i);if(s.length===0)return;const a=vie(s,0,r);return a.length===0?void 0:{type:"list",ordered:!0,start:((n=s[0])==null?void 0:n.number)||1,items:a,raw:i.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(kwe,this.editor.getAttributes(K4)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=qd({find:G4,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=qd({find:G4,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(K4)}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1],editor:this.editor})),[t]}}),Twe=/^\s*(\[([( |x])?\])\s$/,Owe=vi.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Nr(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const r=[];if(t.tokens&&t.tokens.length>0?r.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?r.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):r.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const n=e.parseChildren(t.nestedTokens);r.push(...n)}return e.createNode("taskItem",{checked:t.checked||!1},r)},renderMarkdown:(t,e)=>{var r;const i=`- [${(r=t.attrs)!=null&&r.checked?"x":" "}] `;return PM(t,e,i)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:r,editor:n})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),c=h=>{var f,p;a.ariaLabel=((p=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:p.call(f,h,a.checked))||`Task item checkbox for ${h.textContent||"empty task item"}`};c(t),s.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",h=>h.preventDefault()),a.addEventListener("change",h=>{if(!n.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:f}=h.target;n.isEditable&&typeof r=="function"&&n.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:p})=>{const m=r();if(typeof m!="number")return!1;const g=p.doc.nodeAt(m);return p.setNodeMarkup(m,void 0,{...g==null?void 0:g.attrs,checked:f}),!0}).run(),!n.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,f)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([h,f])=>{i.setAttribute(h,f)}),i.dataset.checked=t.attrs.checked,a.checked=t.attrs.checked,s.append(a,o),i.append(s,l),Object.entries(e).forEach(([h,f])=>{i.setAttribute(h,f)});let d=new Set(Object.keys(e));return{dom:i,contentDOM:l,update:h=>{if(h.type!==this.type)return!1;i.dataset.checked=h.attrs.checked,a.checked=h.attrs.checked,c(h);const f=n.extensionManager.attributes,p=xp(h,f),m=new Set(Object.keys(p)),g=this.options.HTMLAttributes;return d.forEach(b=>{m.has(b)||(b in g?i.setAttribute(b,g[b]):i.removeAttribute(b))}),Object.entries(p).forEach(([b,y])=>{y==null?b in g?i.setAttribute(b,g[b]):i.removeAttribute(b):i.setAttribute(b,y)}),d=m,!0}}}},addInputRules(){return[qd({find:Twe,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),jwe=vi.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Nr(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const r=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return r!==void 0?r:-1},tokenize(t,e,r){const n=s=>{const o=cI(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:r.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:n},r);return o?[{type:"taskList",raw:o.raw,items:o.items}]:r.blockTokens(s)},i=cI(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,o)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:r.inlineTokens(s.mainContent),nestedTokens:o}),customNestedParser:n},r);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});mr.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(uie.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(die.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(yie.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(bie.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(Owe.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(jwe.configure(this.options.taskList)),t}});var Pwe=vi.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Nr(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const r=t.tokens||[];return r.length===1&&r[0].type==="image"?e.parseChildren([r[0]]):e.createNode("paragraph",void 0,e.parseInline(r))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Iwe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Rwe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Mwe=Uc.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Nr(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Fd({find:Iwe,type:this.type})]},addPasteRules(){return[Oc({find:Rwe,type:this.type})]}}),$we=vi.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),Dwe=Uc.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Nr(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,r){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!i)return;const s=i[2].trim();return{type:"underline",raw:i[0],text:s,tokens:r.inlineTokens(s)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function Awe(t={}){return new Xt({view(e){return new Fwe(e,t)}})}class Fwe{constructor(e,r){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(n=r.width)!==null&&n!==void 0?n:1,this.color=r.color===!1?void 0:r.color||"black",this.class=r.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:r})=>this.editorView.dom.removeEventListener(e,r))}update(e,r){this.cursorPos!=null&&r.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),r=!e.parent.inlineContent,n,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,a=s.height/i.offsetHeight;if(r){let h=e.nodeBefore,f=e.nodeAfter;if(h||f){let p=this.editorView.nodeDOM(this.cursorPos-(h?h.nodeSize:0));if(p){let m=p.getBoundingClientRect(),g=h?m.bottom:m.top;h&&f&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let b=this.width/2*a;n={left:m.left,right:m.right,top:g-b,bottom:g+b}}}}if(!n){let h=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*o;n={left:h.left-f,right:h.left+f,top:h.top,bottom:h.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",r),this.element.classList.toggle("prosemirror-dropcursor-inline",!r);let c,d;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,d=-pageYOffset;else{let h=l.getBoundingClientRect(),f=h.width/l.offsetWidth,p=h.height/l.offsetHeight;c=h.left-l.scrollLeft*f,d=h.top-l.scrollTop*p}this.element.style.left=(n.left-c)/o+"px",this.element.style.top=(n.top-d)/a+"px",this.element.style.width=(n.right-n.left)/o+"px",this.element.style.height=(n.bottom-n.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let r=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=r&&r.inside>=0&&this.editorView.state.doc.nodeAt(r.inside),i=n&&n.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,r,e):i;if(r&&!s){let o=r.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=mre(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class cr extends Ge{constructor(e){super(e,e)}map(e,r){let n=e.resolve(r.map(this.head));return cr.valid(n)?new cr(n):Ge.near(n)}content(){return me.empty}eq(e){return e instanceof cr&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new cr(e.resolve(r.pos))}getBookmark(){return new zM(this.anchor)}static valid(e){let r=e.parent;if(r.isTextblock||!qwe(e)||!Lwe(e))return!1;let n=r.type.spec.allowGapCursor;if(n!=null)return n;let i=r.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,r,n=!1){e:for(;;){if(!n&&cr.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(r>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(r>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=r;let l=e.doc.resolve(i);if(cr.valid(l))return l}for(;;){let o=r>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Re.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*r),n=!1;continue e}break}s=o,i+=r;let a=e.doc.resolve(i);if(cr.valid(a))return a}return null}}}cr.prototype.visible=!1;cr.findFrom=cr.findGapCursorFrom;Ge.jsonID("gapcursor",cr);class zM{constructor(e){this.pos=e}map(e){return new zM(e.map(this.pos))}resolve(e){let r=e.resolve(this.pos);return cr.valid(r)?new cr(r):Ge.near(r)}}function xie(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function qwe(t){for(let e=t.depth;e>=0;e--){let r=t.index(e),n=t.node(e);if(r==0){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||xie(i.type))return!0;if(i.inlineContent)return!1}}return!0}function Lwe(t){for(let e=t.depth;e>=0;e--){let r=t.indexAfter(e),n=t.node(e);if(r==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||xie(i.type))return!0;if(i.inlineContent)return!1}}return!0}function Bwe(){return new Xt({props:{decorations:Hwe,createSelectionBetween(t,e,r){return e.pos==r.pos&&cr.valid(r)?new cr(r):null},handleClick:Vwe,handleKeyDown:zwe,handleDOMEvents:{beforeinput:Uwe}}})}const zwe=gne({ArrowLeft:Tg("horiz",-1),ArrowRight:Tg("horiz",1),ArrowUp:Tg("vert",-1),ArrowDown:Tg("vert",1)});function Tg(t,e){const r=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(n,i,s){let o=n.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof Be){if(!s.endOfTextblock(r)||a.depth==0)return!1;l=!1,a=n.doc.resolve(e>0?a.after():a.before())}let c=cr.findGapCursorFrom(a,e,l);return c?(i&&i(n.tr.setSelection(new cr(c))),!0):!1}}function Vwe(t,e,r){if(!t||!t.editable)return!1;let n=t.state.doc.resolve(e);if(!cr.valid(n))return!1;let i=t.posAtCoords({left:r.clientX,top:r.clientY});return i&&i.inside>-1&&Re.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new cr(n))),!0)}function Uwe(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof cr))return!1;let{$from:r}=t.state.selection,n=r.parent.contentMatchAt(r.index()).findWrapping(t.state.schema.nodes.text);if(!n)return!1;let i=Q.empty;for(let o=n.length-1;o>=0;o--)i=Q.from(n[o].createAndFill(null,i));let s=t.state.tr.replace(r.pos,r.pos,new me(i,0,0));return s.setSelection(Be.near(s.doc.resolve(r.pos+1))),t.dispatch(s),!1}function Hwe(t){if(!(t.selection instanceof cr))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Kt.create(t.doc,[Tn.widget(t.selection.head,e,{key:"gapcursor"})])}var Rv=200,Ur=function(){};Ur.prototype.append=function(e){return e.length?(e=Ur.from(e),!this.length&&e||e.length<Rv&&this.leafAppend(e)||this.length<Rv&&e.leafPrepend(this)||this.appendInner(e)):this};Ur.prototype.prepend=function(e){return e.length?Ur.from(e).append(this):this};Ur.prototype.appendInner=function(e){return new Wwe(this,e)};Ur.prototype.slice=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=this.length),e>=r?Ur.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,r))};Ur.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Ur.prototype.forEach=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length),r<=n?this.forEachInner(e,r,n,0):this.forEachInvertedInner(e,r,n,0)};Ur.prototype.map=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},r,n),i};Ur.from=function(e){return e instanceof Ur?e:e&&e.length?new wie(e):Ur.empty};var wie=function(t){function e(n){t.call(this),this.values=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Rv)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Rv)return new e(i.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(e.prototype,r),e}(Ur);Ur.empty=new wie([]);var Wwe=function(t){function e(r,n){t.call(this),this.left=r,this.right=n,this.length=r.length+n.length,this.depth=Math.max(r.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(n,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(n,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(n,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(n,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(n,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(n,i){if(n==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(n,i):n>=s?this.right.slice(n-s,i-s):this.left.slice(n,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(n){var i=this.right.leafAppend(n);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(n){var i=this.left.leafPrepend(n);if(i)return new e(i,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e}(Ur);const Kwe=500;class ss{constructor(e,r){this.items=e,this.eventCount=r}popEvent(e,r){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let i,s;r&&(i=this.remapping(n,this.items.length),s=i.maps.length);let o=e.tr,a,l,c=[],d=[];return this.items.forEach((h,f)=>{if(!h.step){i||(i=this.remapping(n,f+1),s=i.maps.length),s--,d.push(h);return}if(i){d.push(new Es(h.map));let p=h.step.map(i.slice(s)),m;p&&o.maybeStep(p).doc&&(m=o.mapping.maps[o.mapping.maps.length-1],c.push(new Es(m,void 0,void 0,c.length+d.length))),s--,m&&i.appendMap(m,s)}else o.maybeStep(h.step);if(h.selection)return a=i?h.selection.map(i.slice(s)):h.selection,l=new ss(this.items.slice(0,n).append(d.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,r,n,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let d=0;d<e.steps.length;d++){let h=e.steps[d].invert(e.docs[d]),f=new Es(e.mapping.maps[d],h,r),p;(p=l&&l.merge(f))&&(f=p,d?s.pop():a=a.slice(0,a.length-1)),s.push(f),r&&(o++,r=void 0),i||(l=f)}let c=o-n.depth;return c>Ywe&&(a=Gwe(a,c),o-=c),new ss(a.append(s),o)}remapping(e,r){let n=new pp;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?n.maps.length-i.mirrorOffset:void 0;n.appendMap(i.map,o)},e,r),n}addMaps(e){return this.eventCount==0?this:new ss(this.items.append(e.map(r=>new Es(r))),this.eventCount)}rebased(e,r){if(!this.eventCount)return this;let n=[],i=Math.max(0,this.items.length-r),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},i);let l=r;this.items.forEach(f=>{let p=s.getMirror(--l);if(p==null)return;o=Math.min(o,p);let m=s.maps[p];if(f.step){let g=e.steps[p].invert(e.docs[p]),b=f.selection&&f.selection.map(s.slice(l+1,p));b&&a++,n.push(new Es(m,g,b))}else n.push(new Es(m))},i);let c=[];for(let f=r;f<o;f++)c.push(new Es(s.maps[f]));let d=this.items.slice(0,i).append(c).append(n),h=new ss(d,a);return h.emptyItemCount()>Kwe&&(h=h.compress(this.items.length-n.length)),h}emptyItemCount(){let e=0;return this.items.forEach(r=>{r.step||e++}),e}compress(e=this.items.length){let r=this.remapping(0,e),n=r.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(r.slice(n)),c=l&&l.getMap();if(n--,c&&r.appendMap(c,n),l){let d=o.selection&&o.selection.map(r.slice(n));d&&s++;let h=new Es(c.invert(),l,d),f,p=i.length-1;(f=i.length&&i[p].merge(h))?i[p]=f:i.push(h)}}else o.map&&n--},this.items.length,0),new ss(Ur.from(i.reverse()),s)}}ss.empty=new ss(Ur.empty,0);function Gwe(t,e){let r;return t.forEach((n,i)=>{if(n.selection&&e--==0)return r=i,!1}),t.slice(r)}class Es{constructor(e,r,n,i){this.map=e,this.step=r,this.selection=n,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let r=e.step.merge(this.step);if(r)return new Es(r.getMap().invert(),r,this.selection)}}}class oa{constructor(e,r,n,i,s){this.done=e,this.undone=r,this.prevRanges=n,this.prevTime=i,this.prevComposition=s}}const Ywe=20;function Qwe(t,e,r,n){let i=r.getMeta(sc),s;if(i)return i.historyState;r.getMeta(Zwe)&&(t=new oa(t.done,t.undone,null,0,-1));let o=r.getMeta("appendedTransaction");if(r.steps.length==0)return t;if(o&&o.getMeta(sc))return o.getMeta(sc).redo?new oa(t.done.addTransform(r,void 0,n,sy(e)),t.undone,Y4(r.mapping.maps),t.prevTime,t.prevComposition):new oa(t.done,t.undone.addTransform(r,void 0,n,sy(e)),null,t.prevTime,t.prevComposition);if(r.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=r.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(r.time||0)-n.newGroupDelay||!Xwe(r,t.prevRanges)),c=o?F1(t.prevRanges,r.mapping):Y4(r.mapping.maps);return new oa(t.done.addTransform(r,l?e.selection.getBookmark():void 0,n,sy(e)),ss.empty,c,r.time,a??t.prevComposition)}else return(s=r.getMeta("rebased"))?new oa(t.done.rebased(r,s),t.undone.rebased(r,s),F1(t.prevRanges,r.mapping),t.prevTime,t.prevComposition):new oa(t.done.addMaps(r.mapping.maps),t.undone.addMaps(r.mapping.maps),F1(t.prevRanges,r.mapping),t.prevTime,t.prevComposition)}function Xwe(t,e){if(!e)return!1;if(!t.docChanged)return!0;let r=!1;return t.mapping.maps[0].forEach((n,i)=>{for(let s=0;s<e.length;s+=2)n<=e[s+1]&&i>=e[s]&&(r=!0)}),r}function Y4(t){let e=[];for(let r=t.length-1;r>=0&&e.length==0;r--)t[r].forEach((n,i,s,o)=>e.push(s,o));return e}function F1(t,e){if(!t)return null;let r=[];for(let n=0;n<t.length;n+=2){let i=e.map(t[n],1),s=e.map(t[n+1],-1);i<=s&&r.push(i,s)}return r}function Jwe(t,e,r){let n=sy(e),i=sc.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,n);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,n),l=new oa(r?a:s.remaining,r?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(sc,{redo:r,historyState:l})}let q1=!1,Q4=null;function sy(t){let e=t.plugins;if(Q4!=e){q1=!1,Q4=e;for(let r=0;r<e.length;r++)if(e[r].spec.historyPreserveItems){q1=!0;break}}return q1}const sc=new Mr("history"),Zwe=new Mr("closeHistory");function eSe(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Xt({key:sc,state:{init(){return new oa(ss.empty,ss.empty,null,0,-1)},apply(e,r,n){return Qwe(r,n,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,r){let n=r.inputType,i=n=="historyUndo"?_ie:n=="historyRedo"?Eie:null;return!i||!e.editable?!1:(r.preventDefault(),i(e.state,e.dispatch))}}}})}function Sie(t,e){return(r,n)=>{let i=sc.getState(r);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(n){let s=Jwe(i,r,t);s&&n(e?s.scrollIntoView():s)}return!0}}const _ie=Sie(!1,!0),Eie=Sie(!0,!0);mr.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const n=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(n)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,r=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(r)}},addProseMirrorPlugins(){let t=!1;return[new Xt({key:new Mr("characterCount"),appendTransaction:(e,r,n)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const s=this.storage.characters({node:n.doc});if(s>i){const o=s-i,a=0,l=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const c=n.tr.deleteRange(a,l);return t=!0,c}t=!0},filterTransaction:(e,r)=>{const n=this.options.limit;if(!e.docChanged||n===0||n===null||n===void 0)return!0;const i=this.storage.characters({node:r.doc}),s=this.storage.characters({node:e.doc});if(s<=n||i>n&&s>n&&s<=i)return!0;if(i>n&&s>n&&s>i||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,l=s-n,c=a-l,d=a;return e.deleteRange(c,d),!(this.storage.characters({node:e.doc})>n)}})]}});var tSe=mr.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Awe(this.options)]}});mr.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Xt({key:new Mr("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:r,isFocused:n}=this.editor,{anchor:i}=e,s=[];if(!r||!n)return Kt.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((l,c)=>{if(l.isText)return;if(!(i>=c&&i<=c+l.nodeSize-1))return!1;o+=1});let a=0;return t.descendants((l,c)=>{if(l.isText||!(i>=c&&i<=c+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&o-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";s.push(Tn.node(c,c+l.nodeSize,{class:this.options.className}))}),Kt.create(t,s)}}})]}});var rSe=mr.create({name:"gapCursor",addProseMirrorPlugins(){return[Bwe()]},extendNodeSchema(t){var e;const r={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=_t(je(t,"allowGapCursor",r)))!=null?e:null}}}),nSe=mr.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Xt({key:new Mr("placeholder"),props:{decorations:({doc:t,selection:e})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:n}=e,i=[];if(!r)return null;const s=this.editor.isEmpty;return t.descendants((o,a)=>{const l=n>=a&&n<=a+o.nodeSize,c=!o.isLeaf&&D0(o);if((l||!this.options.showOnlyCurrent)&&c){const d=[this.options.emptyNodeClass];s&&d.push(this.options.emptyEditorClass);const h=Tn.node(a,a+o.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:a,hasAnchor:l}):this.options.placeholder});i.push(h)}return this.options.includeChildren}),Kt.create(t,i)}}})]}});mr.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new Xt({key:new Mr("selection"),props:{decorations(r){return r.selection.empty||t.isFocused||!t.isEditable||Ine(r.selection)||t.view.dragging?null:Kt.create(r.doc,[Tn.inline(r.selection.from,r.selection.to,{class:e.className})])}}})]}});function X4({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var iSe=mr.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new Mr(this.name),r=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",n=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(r).includes(i.name));return[new Xt({key:e,appendTransaction:(i,s,o)=>{const{doc:a,tr:l,schema:c}=o,d=e.getState(o),h=a.content.size,f=c.nodes[r];if(d)return l.insert(h,f.create())},state:{init:(i,s)=>{const o=s.tr.doc.lastChild;return!X4({node:o,types:n})},apply:(i,s)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return s;const o=i.doc.lastChild;return!X4({node:o,types:n})}}})]}}),sSe=mr.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>_ie(t,e),redo:()=>({state:t,dispatch:e})=>Eie(t,e)}},addProseMirrorPlugins(){return[eSe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),oSe=mr.create({name:"starterKit",addExtensions(){var t,e,r,n;const i=[];return this.options.bold!==!1&&i.push(Ixe.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(kxe.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(uie.configure(this.options.bulletList)),this.options.code!==!1&&i.push($xe.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(Fxe.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(qxe.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(tSe.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(rSe.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(Lxe.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(Bxe.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(sSe.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(zxe.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(Kxe.configure(this.options.italic)),this.options.listItem!==!1&&i.push(die.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(yie.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(cie.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(bie.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(Pwe.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(Mwe.configure(this.options.strike)),this.options.text!==!1&&i.push($we.configure(this.options.text)),this.options.underline!==!1&&i.push(Dwe.configure((r=this.options)==null?void 0:r.underline)),this.options.trailingNode!==!1&&i.push(iSe.configure((n=this.options)==null?void 0:n.trailingNode)),i}}),aSe=oSe,lSe=nSe;const Xo=({onClick:t,isActive:e,disabled:r,children:n,title:i})=>u.jsx("button",{type:"button",onClick:t,disabled:r,title:i,className:`p-1.5 rounded hover:bg-gray-100 transition-colors ${e?"bg-gray-200 text-primary-600":"text-gray-600"} ${r?"opacity-50 cursor-not-allowed":""}`,children:n}),cSe=({editor:t})=>{if(!t)return null;const e=()=>{const r=t.getAttributes("link").href,n=window.prompt("Enter URL:",r);if(n===null)return;if(n===""){t.chain().focus().extendMarkRange("link").unsetLink().run();return}const i=n.match(/^https?:\/\//)?n:`https://${n}`;t.chain().focus().extendMarkRange("link").setLink({href:i}).run()};return u.jsxs("div",{className:"flex items-center gap-0.5 p-1.5 border-b border-gray-200 bg-gray-50 rounded-t-md",children:[u.jsx(Xo,{onClick:()=>t.chain().focus().toggleBold().run(),isActive:t.isActive("bold"),title:"Bold (Cmd+B)",children:u.jsx(Cfe,{className:"w-4 h-4"})}),u.jsx(Xo,{onClick:()=>t.chain().focus().toggleItalic().run(),isActive:t.isActive("italic"),title:"Italic (Cmd+I)",children:u.jsx(Rfe,{className:"w-4 h-4"})}),u.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),u.jsx(Xo,{onClick:()=>t.chain().focus().toggleBulletList().run(),isActive:t.isActive("bulletList"),title:"Bullet list",children:u.jsx($fe,{className:"w-4 h-4"})}),u.jsx(Xo,{onClick:()=>t.chain().focus().toggleOrderedList().run(),isActive:t.isActive("orderedList"),title:"Numbered list",children:u.jsx(Mfe,{className:"w-4 h-4"})}),u.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),u.jsx(Xo,{onClick:e,isActive:t.isActive("link"),title:"Add link",children:u.jsx(JR,{className:"w-4 h-4"})}),t.isActive("link")&&u.jsx(Xo,{onClick:()=>t.chain().focus().unsetLink().run(),title:"Remove link",children:u.jsx(Wfe,{className:"w-4 h-4"})}),u.jsx("div",{className:"flex-1"}),u.jsx(Xo,{onClick:()=>t.chain().focus().undo().run(),disabled:!t.can().undo(),title:"Undo (Cmd+Z)",children:u.jsx(Hfe,{className:"w-4 h-4"})}),u.jsx(Xo,{onClick:()=>t.chain().focus().redo().run(),disabled:!t.can().redo(),title:"Redo (Cmd+Shift+Z)",children:u.jsx(Lfe,{className:"w-4 h-4"})})]})};function Nie({value:t="",onChange:e,placeholder:r="Write something...",disabled:n=!1,minHeight:i="120px",autoFocus:s=!1}){const o=Sxe({extensions:[aSe.configure({heading:!1,codeBlock:!1,blockquote:!1}),lSe.configure({placeholder:r}),vwe.configure({openOnClick:!1,HTMLAttributes:{class:"text-primary-600 hover:text-primary-700 underline"}})],content:t,editable:!n,autofocus:s,onUpdate:({editor:a})=>{const l=a.getHTML();e(l==="<p></p>"||l===""?"":l)}});if(o&&t!==o.getHTML()&&t!==""){const a=o.getHTML();t&&(a==="<p></p>"||a===""||t!==a)&&o.commands.setContent(t,!1)}return u.jsxs("div",{className:`border border-gray-300 rounded-md overflow-hidden focus-within:ring-2 focus-within:ring-primary-500 focus-within:border-transparent ${n?"bg-gray-100 opacity-60":"bg-white"}`,children:[u.jsx(cSe,{editor:o}),u.jsx(mxe,{editor:o,className:"prose prose-sm max-w-none",style:{minHeight:i}}),u.jsx("style",{children:`
        .ProseMirror {
          padding: 0.75rem;
          min-height: ${i};
          outline: none;
        }
        .ProseMirror p.is-editor-empty:first-child::before {
          content: attr(data-placeholder);
          float: left;
          color: #9ca3af;
          pointer-events: none;
          height: 0;
        }
        .ProseMirror ul,
        .ProseMirror ol {
          padding-left: 1.5rem;
        }
        .ProseMirror ul {
          list-style-type: disc;
        }
        .ProseMirror ol {
          list-style-type: decimal;
        }
        .ProseMirror li {
          margin-bottom: 0.25rem;
        }
        .ProseMirror p {
          margin-bottom: 0.5rem;
        }
        .ProseMirror p:last-child {
          margin-bottom: 0;
        }
      `})]})}function Mv(t){if(!t)return!0;const e=t.trim();return e===""||e==="<p></p>"||e==="<p><br></p>"}const L1=[{id:"call",label:"Phone call",icon:eM},{id:"email",label:"Email",icon:ZR},{id:"chat",label:"Chat",icon:mte},{id:"meeting",label:"Meeting",icon:As},{id:"coffee",label:"Coffee",icon:hte},{id:"lunch",label:"Lunch",icon:Ste},{id:"note",label:"Other",icon:_0}];function VM({isOpen:t,onClose:e,onSubmit:r,isLoading:n,personId:i,initialData:s=null,activity:o=null}){const[a,l]=T.useState("call"),[c,d]=T.useState(""),[h,f]=T.useState(""),[p,m]=T.useState(""),[g,b]=T.useState([]),[y,v]=T.useState(!1),[w,x]=T.useState(""),{data:S}=Bc(),_=!!o;if(T.useEffect(()=>{if(t){const I=new Date,L=I.toISOString().split("T")[0],F=I.toTimeString().slice(0,5);o?(d(o.activity_date||L),f(o.activity_time||""),m(o.content||""),b(o.participants||[]),l(o.activity_type||"note")):s?(d(s.activity_date||L),f(s.activity_time||F),m(s.content||""),b(s.participants||[]),l(s.activity_type||"note")):(d(L),f(F),m(""),b([]),l("call"))}},[t,s,o]),!t)return null;const N=(S||[]).filter(I=>I.id.toString()!==(i==null?void 0:i.toString())),E=N.filter(I=>{var L;return(L=I.name)==null?void 0:L.toLowerCase().includes(w.toLowerCase())}),k=I=>{I.preventDefault(),!Mv(p)&&(r({activity_type:a,activity_date:c||null,activity_time:h||null,content:p,participants:g}),m(""),b([]),d(new Date().toISOString().split("T")[0]),f(new Date().toTimeString().slice(0,5)))},C=()=>{m(""),b([]),d(""),f(""),v(!1),x(""),e()},O=I=>{b(L=>L.includes(I)?L.filter(F=>F!==I):[...L,I])},P=I=>{b(L=>L.filter(F=>F!==I))},j=()=>N.filter(I=>g.includes(I.id)),M=I=>{if(!I)return"";try{return new Date(I).toISOString().split("T")[0]}catch{return""}};return(L1.find(I=>I.id===a)||L1[0]).icon,u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b sticky top-0 bg-white z-10",children:[u.jsx("h2",{className:"text-lg font-semibold",children:_?"Edit activity":"Add activity"}),u.jsx("button",{onClick:C,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Lr,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:k,className:"p-4",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Activity type"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:L1.map(I=>{const L=I.icon,F=a===I.id;return u.jsxs("button",{type:"button",onClick:()=>l(I.id),className:`flex flex-col items-center justify-center p-3 border-2 rounded-lg transition-colors ${F?"border-primary-600 bg-primary-50 text-primary-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,disabled:n,children:[u.jsx(L,{className:"w-5 h-5 mb-1"}),u.jsx("span",{className:"text-xs",children:I.label})]},I.id)})})]}),u.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"activity-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),u.jsx("input",{id:"activity-date",type:"date",value:M(c),onChange:I=>d(I.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"activity-time",className:"block text-sm font-medium text-gray-700 mb-2",children:"Time"}),u.jsx("input",{id:"activity-time",type:"time",value:h,onChange:I=>f(I.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),u.jsx(Nie,{value:p,onChange:m,placeholder:"What happened?",disabled:n,minHeight:"100px"})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Participants (optional)"}),j().length>0&&u.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:j().map(I=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-700 rounded-full text-sm",children:[I.name,u.jsx("button",{type:"button",onClick:()=>P(I.id),className:"hover:text-primary-900",disabled:n,children:u.jsx(Lr,{className:"w-3 h-3"})})]},I.id))}),u.jsxs("div",{className:"relative",children:[u.jsx("button",{type:"button",onClick:()=>v(!y),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-left text-sm text-gray-500 hover:border-gray-400",disabled:n,children:g.length===0?"Add participants...":"Add more participants..."}),y&&u.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[u.jsx("div",{className:"p-2 border-b",children:u.jsx("input",{type:"text",placeholder:"Search people...",value:w,onChange:I=>x(I.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded",autoFocus:!0})}),u.jsx("div",{className:"max-h-48 overflow-y-auto",children:E.length===0?u.jsx("div",{className:"p-3 text-sm text-gray-500 text-center",children:"No people found"}):E.map(I=>{var F;const L=g.includes(I.id);return u.jsxs("button",{type:"button",onClick:()=>O(I.id),className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2 ${L?"bg-primary-50":""}`,children:[u.jsx("input",{type:"checkbox",checked:L,onChange:()=>{},className:"mr-1"}),I.thumbnail?u.jsx("img",{src:I.thumbnail,alt:I.name,className:"w-6 h-6 rounded-full"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-gray-500",children:((F=I.first_name)==null?void 0:F[0])||"?"})}),u.jsx("span",{children:I.name})]},I.id)})})]})]})]}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:C,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n||Mv(p),children:n?_?"Saving...":"Adding...":_?"Save":"Add activity"})]})]})]})})}function Jo({title:t,value:e,icon:r,href:n}){return u.jsx(ce,{to:n,className:"card p-6 hover:shadow-md transition-shadow",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-500",children:t}),u.jsx("p",{className:"mt-1 text-3xl font-semibold",children:e})]}),u.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:u.jsx(r,{className:"w-6 h-6 text-primary-600"})})]})})}function B1({person:t,hideStar:e=!1}){var r,n;return u.jsxs(ce,{to:`/people/${t.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[t.thumbnail?u.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-10 h-10 rounded-full object-cover"}):u.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-sm font-medium text-gray-500",children:((r=t.first_name)==null?void 0:r[0])||"?"})}),u.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.name}),((n=t.labels)==null?void 0:n.length)>0&&u.jsx("p",{className:"text-xs text-gray-500 truncate",children:t.labels.join(", ")})]}),t.is_favorite&&!e&&u.jsx(Pd,{className:"w-4 h-4 text-yellow-400 fill-current"})]})}function uSe({reminder:t}){var o,a,l;const e=t.days_until;let r="bg-gray-100 text-gray-700";e===0?r="bg-green-100 text-green-700":e<=3?r="bg-orange-100 text-orange-700":e<=7&&(r="bg-yellow-100 text-yellow-700");const n=(a=(o=t.related_people)==null?void 0:o[0])==null?void 0:a.id,i=((l=t.related_people)==null?void 0:l.length)>0,s=u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${r}`,children:e===0?"Today":`${e}d`}),u.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.title}),u.jsx("p",{className:"text-xs text-gray-500",children:Nn(new Date(t.next_occurrence),"MMMM d, yyyy")})]}),i&&u.jsx("div",{className:"flex -space-x-2 ml-3 flex-shrink-0",children:t.related_people.slice(0,3).map(c=>{var d;return c.thumbnail?u.jsx("img",{src:c.thumbnail,alt:c.name,loading:"lazy",className:"w-10 h-10 rounded-full border-2 border-white object-cover"},c.id):u.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full border-2 border-white flex items-center justify-center",children:u.jsx("span",{className:"text-sm",children:(d=c.name)==null?void 0:d[0]})},c.id)})})]});return i&&n?u.jsx(ce,{to:`/people/${n}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:s}):u.jsx("div",{className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:s})}function dSe({todo:t,onToggle:e}){var n;const r=em(t);return u.jsxs(ce,{to:`/people/${t.person_id}`,className:"flex items-start p-3 rounded-lg hover:bg-gray-50 transition-colors group",children:[u.jsx("button",{onClick:i=>{i.preventDefault(),i.stopPropagation(),e(t)},className:"mt-0.5 mr-3 flex-shrink-0",title:t.is_completed?"Mark as incomplete":"Mark as complete",children:t.is_completed?u.jsx(Ds,{className:"w-5 h-5 text-primary-600"}):u.jsx(jd,{className:`w-5 h-5 ${r?"text-red-600":"text-gray-400"}`})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:`text-sm font-medium ${t.is_completed?"line-through text-gray-400":r?"text-red-600":"text-gray-900"}`,children:t.content}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.person_thumbnail?u.jsx("img",{src:t.person_thumbnail,alt:t.person_name,loading:"lazy",className:"w-5 h-5 rounded-full object-cover"}):u.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-gray-500",children:(n=t.person_name)==null?void 0:n[0]})}),u.jsx("span",{className:"text-xs text-gray-500 truncate",children:t.person_name})]})]}),t.due_date&&u.jsxs("div",{className:`ml-3 text-xs text-right flex-shrink-0 ${r&&!t.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:[u.jsx("div",{children:Nn(new Date(t.due_date),"MMM d")}),r&&!t.is_completed&&u.jsx("div",{className:"text-red-600",children:"overdue"})]})]})}function hSe(){return u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{className:"p-4 bg-primary-50 rounded-full",children:u.jsx(bte,{className:"w-12 h-12 text-primary-600"})})}),u.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:["Welcome to ",_c,"!"]}),u.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"Get started by adding your first contact, organization, or important date. Your dashboard will populate as you add more information."}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[u.jsxs(ce,{to:"/people/new",className:"inline-flex items-center px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[u.jsx(or,{className:"w-5 h-5 mr-2"}),"Add Your First Person"]}),u.jsxs(ce,{to:"/companies/new",className:"inline-flex items-center px-6 py-3 bg-white text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[u.jsx(or,{className:"w-5 h-5 mr-2"}),"Add Your First Organization"]})]})]})}function fSe(){var C,O,P;const{data:t,isLoading:e,error:r}=Xfe(),{data:n}=Ete(!1),i=Nte(),s=tM(),[o,a]=T.useState(null),[l,c]=T.useState(!1),[d,h]=T.useState(!1),[f,p]=T.useState(null),m=j=>{if(!j.is_completed){a(j),c(!0);return}i.mutate({todoId:j.id,data:{content:j.content,due_date:j.due_date,is_completed:!1}})},g=()=>{o&&(i.mutate({todoId:o.id,data:{content:o.content,due_date:o.due_date,is_completed:!0}}),c(!1),a(null))},b=()=>{if(!o)return;const j=new Date().toISOString().split("T")[0];p({content:o.content,activity_date:j,activity_type:"note",participants:[]}),c(!1),h(!0)},y=async j=>{if(o)try{await s.mutateAsync({personId:o.person_id,data:j}),await i.mutateAsync({todoId:o.id,data:{content:o.content,due_date:o.due_date,is_completed:!0}}),h(!1),a(null),p(null)}catch(M){console.error("Failed to create activity:",M),alert("Failed to create activity. Please try again.")}};if(e)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(r){const j=((C=r==null?void 0:r.response)==null?void 0:C.status)>=500||!(r!=null&&r.response);return u.jsx("div",{className:"card p-8 text-center",children:u.jsx("div",{className:"text-red-600 mb-2",children:j?u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"font-medium mb-1",children:"Failed to load dashboard data"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Please check your connection and try refreshing the page."})]}):u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"font-medium mb-1",children:"Unable to load dashboard"}),u.jsx("p",{className:"text-sm text-gray-600",children:((P=(O=r==null?void 0:r.response)==null?void 0:O.data)==null?void 0:P.message)||"An error occurred while loading your data."})]})})})}const{stats:v,recent_people:w,upcoming_reminders:x,favorites:S,recently_contacted:_}=t||{};if(((v==null?void 0:v.total_people)||0)+((v==null?void 0:v.total_companies)||0)+((v==null?void 0:v.total_dates)||0)===0)return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsx(Jo,{title:"Total people",value:0,icon:As,href:"/people"}),u.jsx(Jo,{title:"Organizations",value:0,icon:Rr,href:"/companies"}),u.jsx(Jo,{title:"Events",value:0,icon:yo,href:"/dates"}),u.jsx(Jo,{title:"Open todos",value:0,icon:Ds,href:"/todos"})]}),u.jsx(hSe,{})]});const k=(n==null?void 0:n.slice(0,5))||[];return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsx(Jo,{title:"Total people",value:(v==null?void 0:v.total_people)||0,icon:As,href:"/people"}),u.jsx(Jo,{title:"Organizations",value:(v==null?void 0:v.total_companies)||0,icon:Rr,href:"/companies"}),u.jsx(Jo,{title:"Events",value:(v==null?void 0:v.total_dates)||0,icon:yo,href:"/dates"}),u.jsx(Jo,{title:"Open todos",value:(v==null?void 0:v.open_todos_count)||0,icon:Ds,href:"/todos"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(yo,{className:"w-5 h-5 mr-2 text-gray-500"}),"Upcoming reminders"]}),u.jsxs(ce,{to:"/dates",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all reminders",u.jsx(l1,{className:"w-4 h-4 ml-1"})]})]}),u.jsx("div",{className:"divide-y divide-gray-100",children:(x==null?void 0:x.length)>0?x.map(j=>u.jsx(uSe,{reminder:j},j.id)):u.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No upcoming reminders"})})]}),u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(Ds,{className:"w-5 h-5 mr-2 text-gray-500"}),"Open todos"]}),u.jsxs(ce,{to:"/todos",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all todos",u.jsx(l1,{className:"w-4 h-4 ml-1"})]})]}),u.jsx("div",{className:"divide-y divide-gray-100",children:k.length>0?k.map(j=>u.jsx(dSe,{todo:j,onToggle:m},j.id)):u.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No open todos"})})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(Pd,{className:"w-5 h-5 mr-2 text-yellow-500 fill-current"}),"Favorites"]})}),(S==null?void 0:S.length)>0?u.jsx("div",{className:"divide-y divide-gray-100",children:S.slice(0,5).map(j=>u.jsx(B1,{person:j,hideStar:!0},j.id))}):u.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No favorites yet"})]}),u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(MessageCircle,{className:"w-5 h-5 mr-2 text-gray-500"}),"Recently contacted"]})}),(_==null?void 0:_.length)>0?u.jsx("div",{className:"divide-y divide-gray-100",children:_.map(j=>u.jsx(B1,{person:j},j.id))}):u.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No recent activities yet"})]}),u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(As,{className:"w-5 h-5 mr-2 text-gray-500"}),"Recently edited"]}),u.jsxs(ce,{to:"/people",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all",u.jsx(l1,{className:"w-4 h-4 ml-1"})]})]}),u.jsx("div",{className:"divide-y divide-gray-100",children:(w==null?void 0:w.length)>0?w.map(j=>u.jsx(B1,{person:j},j.id)):u.jsxs("p",{className:"p-4 text-sm text-gray-500 text-center",children:["No people yet. ",u.jsx(ce,{to:"/people/new",className:"text-primary-600",children:"Add someone"})]})})]})]}),u.jsx(rM,{isOpen:l,onClose:()=>{c(!1),a(null)},todo:o,onComplete:g,onCompleteAsActivity:b}),u.jsx(VM,{isOpen:d,onClose:()=>{h(!1),a(null),p(null)},onSubmit:y,isLoading:s.isPending,personId:o==null?void 0:o.person_id,initialData:f})]})}function J4(t){var i;const e=((i=t.acf)==null?void 0:i.work_history)||[];if(e.length===0)return null;const r=e.find(s=>s.is_current&&s.company);if(r)return r.company;const n=e.filter(s=>s.company).sort((s,o)=>{const a=s.start_date?new Date(s.start_date):new Date(0);return(o.start_date?new Date(o.start_date):new Date(0))-a});return n.length>0?n[0].company:null}function pSe({person:t,companyName:e,isDeceased:r}){var n,i;return u.jsx(ce,{to:`/people/${t.id}`,className:"card p-4 hover:shadow-md transition-shadow",children:u.jsxs("div",{className:"flex items-start",children:[t.thumbnail?u.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-12 h-12 rounded-full object-cover"}):u.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-lg font-medium text-gray-500",children:((n=t.first_name)==null?void 0:n[0])||"?"})}),u.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsxs("h3",{className:"text-sm font-medium text-gray-900 truncate",children:[t.name,r&&u.jsx("span",{className:"ml-1 text-gray-500",children:""})]}),t.is_favorite&&u.jsx(Pd,{className:"w-4 h-4 ml-1 text-yellow-400 fill-current flex-shrink-0"})]}),e&&u.jsx("p",{className:"text-xs text-gray-500 mt-0.5 truncate",children:e}),((i=t.labels)==null?void 0:i.length)>0&&u.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.labels.slice(0,3).map(s=>u.jsx("span",{className:"inline-flex px-2 py-0.5 text-xs rounded-full bg-gray-100 text-gray-600",children:s},s))})]})]})})}function mSe(){const[t,e]=T.useState(!1),[r,n]=T.useState(!1),[i,s]=T.useState([]),[o,a]=T.useState(""),[l,c]=T.useState(""),[d,h]=T.useState("first_name"),[f,p]=T.useState("asc"),m=T.useRef(null),g=T.useRef(null),{data:b,isLoading:y,error:v}=Bc(),{data:w}=dt({queryKey:["person-labels"],queryFn:async()=>(await We.getPersonLabels()).data}),x=(w==null?void 0:w.map(M=>M.name))||[],S=T.useMemo(()=>{if(!b)return[];const M=b.map(A=>A.birth_year).filter(A=>A!=null);return[...new Set(M)].sort((A,I)=>I-A)},[b]);T.useEffect(()=>{const M=A=>{g.current&&!g.current.contains(A.target)&&m.current&&!m.current.contains(A.target)&&e(!1)};return document.addEventListener("mousedown",M),()=>{document.removeEventListener("mousedown",M)}},[]);const _=T.useMemo(()=>{if(!b)return[];let M=[...b];if(r&&(M=M.filter(A=>A.is_favorite)),i.length>0&&(M=M.filter(A=>{const I=A.labels||[];return i.some(L=>I.includes(L))})),o){const A=parseInt(o,10);M=M.filter(I=>I.birth_year===A)}if(l){const A=new Date;let I;switch(l){case"7":I=new Date(A.setDate(A.getDate()-7));break;case"30":I=new Date(A.setDate(A.getDate()-30));break;case"90":I=new Date(A.setDate(A.getDate()-90));break;case"365":I=new Date(A.setDate(A.getDate()-365));break;default:I=null}I&&(M=M.filter(L=>L.modified?new Date(L.modified)>=I:!1))}return M.sort((A,I)=>{var B,U,K,fe,we,Fe,Se,Oe;let L,F;if(d==="modified"){L=A.modified?new Date(A.modified).getTime():0,F=I.modified?new Date(I.modified).getTime():0;const $e=L-F;return f==="asc"?$e:-$e}if(d==="first_name"?(L=(((B=A.acf)==null?void 0:B.first_name)||A.first_name||"").toLowerCase(),F=(((U=I.acf)==null?void 0:U.first_name)||I.first_name||"").toLowerCase()):(L=(((K=A.acf)==null?void 0:K.last_name)||A.last_name||"").toLowerCase(),F=(((fe=I.acf)==null?void 0:fe.last_name)||I.last_name||"").toLowerCase()),L===F){const $e=d==="first_name"?(((we=A.acf)==null?void 0:we.last_name)||A.last_name||"").toLowerCase():(((Fe=A.acf)==null?void 0:Fe.first_name)||A.first_name||"").toLowerCase(),pt=d==="first_name"?(((Se=I.acf)==null?void 0:Se.last_name)||I.last_name||"").toLowerCase():(((Oe=I.acf)==null?void 0:Oe.first_name)||I.first_name||"").toLowerCase(),it=$e.localeCompare(pt);return f==="asc"?it:-it}const W=L.localeCompare(F);return f==="asc"?W:-W})},[b,r,i,o,l,d,f]),N=r||i.length>0||o||l,E=M=>{s(A=>A.includes(M)?A.filter(I=>I!==M):[...A,M])},k=()=>{n(!1),s([]),a(""),c("")},C=T.useMemo(()=>{if(!_)return[];const M=_.map(A=>J4(A)).filter(Boolean);return[...new Set(M)]},[_]),{data:O}=dt({queryKey:["companies","batch",C.sort().join(",")],queryFn:async()=>C.length===0?[]:(await We.getCompanies({per_page:100,include:C.join(",")})).data,enabled:C.length>0}),P=T.useMemo(()=>{const M={};return O&&O.forEach(A=>{M[A.id]=ir(A)}),M},[O]),j=T.useMemo(()=>{const M={};return _.forEach(A=>{const I=J4(A);I&&P[I]&&(M[A.id]=P[I])}),M},[_,P]);return u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:u.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[u.jsxs("div",{className:"flex items-center gap-2 border border-gray-200 rounded-lg p-1",children:[u.jsxs("select",{value:d,onChange:M=>h(M.target.value),className:"text-sm border-0 bg-transparent focus:ring-0 focus:outline-none cursor-pointer",children:[u.jsx("option",{value:"first_name",children:"First name"}),u.jsx("option",{value:"last_name",children:"Last name"}),u.jsx("option",{value:"modified",children:"Last modified"})]}),u.jsx("div",{className:"h-4 w-px bg-gray-300"}),u.jsx("button",{onClick:()=>p(f==="asc"?"desc":"asc"),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:`Sort ${f==="asc"?"descending":"ascending"}`,children:f==="asc"?u.jsx(Efe,{className:"w-4 h-4 text-gray-600"}):u.jsx(_fe,{className:"w-4 h-4 text-gray-600"})})]}),u.jsxs("div",{className:"relative",ref:m,children:[u.jsxs("button",{onClick:()=>e(!t),className:`btn-secondary ${N?"bg-primary-50 text-primary-700 border-primary-200":""}`,children:[u.jsx(VP,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Filter"}),N&&u.jsx("span",{className:"ml-2 px-1.5 py-0.5 bg-primary-600 text-white text-xs rounded-full",children:i.length+(r?1:0)+(o?1:0)+(l?1:0)})]}),t&&u.jsx("div",{ref:g,className:"absolute top-full left-0 mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:u.jsxs("div",{className:"p-4 space-y-4",children:[u.jsx("div",{children:u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:r,onChange:M=>n(M.target.checked),className:"sr-only"}),u.jsx("div",{className:`flex items-center justify-center w-5 h-5 border-2 rounded mr-3 ${r?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:r&&u.jsx(mF,{className:"w-3 h-3 text-white"})}),u.jsxs("div",{className:"flex items-center",children:[u.jsx(Pd,{className:"w-4 h-4 mr-2 text-yellow-400 fill-current"}),u.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Favorites only"})]})]})}),x.length>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Labels"}),u.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:x.map(M=>u.jsxs("label",{className:"flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded",children:[u.jsx("input",{type:"checkbox",checked:i.includes(M),onChange:()=>E(M),className:"sr-only"}),u.jsx("div",{className:`flex items-center justify-center w-5 h-5 border-2 rounded mr-3 ${i.includes(M)?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:i.includes(M)&&u.jsx(mF,{className:"w-3 h-3 text-white"})}),u.jsx("span",{className:"text-sm text-gray-700",children:M})]},M))})]}),S.length>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Birth year"}),u.jsxs("select",{value:o,onChange:M=>a(M.target.value),className:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[u.jsx("option",{value:"",children:"All years"}),S.map(M=>u.jsx("option",{value:M,children:M},M))]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Last modified"}),u.jsxs("select",{value:l,onChange:M=>c(M.target.value),className:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[u.jsx("option",{value:"",children:"Any time"}),u.jsx("option",{value:"7",children:"Last 7 days"}),u.jsx("option",{value:"30",children:"Last 30 days"}),u.jsx("option",{value:"90",children:"Last 90 days"}),u.jsx("option",{value:"365",children:"Last year"})]})]}),N&&u.jsx("button",{onClick:k,className:"w-full text-sm text-primary-600 hover:text-primary-700 font-medium pt-2 border-t border-gray-200",children:"Clear all filters"})]})})]}),N&&u.jsxs("div",{className:"flex flex-wrap gap-2",children:[r&&u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-800 rounded-full text-xs",children:[u.jsx(Pd,{className:"w-3 h-3"}),"Favorites",u.jsx("button",{onClick:()=>n(!1),className:"hover:text-primary-600",children:u.jsx(Lr,{className:"w-3 h-3"})})]}),i.map(M=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:[M,u.jsx("button",{onClick:()=>E(M),className:"hover:text-gray-600",children:u.jsx(Lr,{className:"w-3 h-3"})})]},M)),o&&u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:["Born ",o,u.jsx("button",{onClick:()=>a(""),className:"hover:text-gray-600",children:u.jsx(Lr,{className:"w-3 h-3"})})]}),l&&u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:["Modified: ",l==="7"?"Last 7 days":l==="30"?"Last 30 days":l==="90"?"Last 90 days":"Last year",u.jsx("button",{onClick:()=>c(""),className:"hover:text-gray-600",children:u.jsx(Lr,{className:"w-3 h-3"})})]})]}),u.jsxs(ce,{to:"/people/new",className:"btn-primary",children:[u.jsx(or,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add person"})]})]})}),y&&u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),v&&u.jsx("div",{className:"card p-6 text-center",children:u.jsx("p",{className:"text-red-600",children:"Failed to load people."})}),!y&&!v&&(b==null?void 0:b.length)===0&&u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(or,{className:"w-6 h-6 text-gray-400"})}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No people found"}),u.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by adding your first person."}),u.jsxs(ce,{to:"/people/new",className:"btn-primary",children:[u.jsx(or,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add person"})]})]}),!y&&!v&&(_==null?void 0:_.length)>0&&u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:_.map(M=>u.jsx(pSe,{person:M,companyName:j[M.id],isDeceased:M.is_deceased},M.id))}),!y&&!v&&(b==null?void 0:b.length)>0&&(_==null?void 0:_.length)===0&&u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(VP,{className:"w-6 h-6 text-gray-400"})}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No people match your filters"}),u.jsx("p",{className:"text-gray-500 mb-4",children:"Try adjusting your filters to see more results."}),u.jsx("button",{onClick:k,className:"btn-secondary",children:"Clear filters"})]})]})}const gSe="#0285FF",ySe=T.forwardRef(function({title:e="Bluesky",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=gSe),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479.815 2.736 3.713 3.66 6.383 3.364.136-.02.275-.039.415-.056-.138.022-.276.04-.415.056-3.912.58-7.387 2.005-2.83 7.078 5.013 5.19 6.87-1.113 7.823-4.308.953 3.195 2.05 9.271 7.733 4.308 4.267-4.308 1.172-6.498-2.74-7.078a8.741 8.741 0 0 1-.415-.056c.14.017.279.036.415.056 2.67.297 5.568-.628 6.383-3.364.246-.828.624-5.79.624-6.478 0-.69-.139-1.861-.902-2.206-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8Z"})]})}),vSe="#0866FF",bSe=T.forwardRef(function({title:e="Facebook",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=vSe),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M9.101 23.691v-7.98H6.627v-3.667h2.474v-1.58c0-4.085 1.848-5.978 5.858-5.978.401 0 .955.042 1.468.103a8.68 8.68 0 0 1 1.141.195v3.325a8.623 8.623 0 0 0-.653-.036 26.805 26.805 0 0 0-.733-.009c-.707 0-1.259.096-1.675.309a1.686 1.686 0 0 0-.679.622c-.258.42-.374.995-.374 1.752v1.297h3.919l-.386 2.103-.287 1.564h-3.246v8.245C19.396 23.238 24 18.179 24 12.044c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.628 3.874 10.35 9.101 11.647Z"})]})}),xSe="#FF0069",wSe=T.forwardRef(function({title:e="Instagram",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=xSe),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M7.0301.084c-1.2768.0602-2.1487.264-2.911.5634-.7888.3075-1.4575.72-2.1228 1.3877-.6652.6677-1.075 1.3368-1.3802 2.127-.2954.7638-.4956 1.6365-.552 2.914-.0564 1.2775-.0689 1.6882-.0626 4.947.0062 3.2586.0206 3.6671.0825 4.9473.061 1.2765.264 2.1482.5635 2.9107.308.7889.72 1.4573 1.388 2.1228.6679.6655 1.3365 1.0743 2.1285 1.38.7632.295 1.6361.4961 2.9134.552 1.2773.056 1.6884.069 4.9462.0627 3.2578-.0062 3.668-.0207 4.9478-.0814 1.28-.0607 2.147-.2652 2.9098-.5633.7889-.3086 1.4578-.72 2.1228-1.3881.665-.6682 1.0745-1.3378 1.3795-2.1284.2957-.7632.4966-1.636.552-2.9124.056-1.2809.0692-1.6898.063-4.948-.0063-3.2583-.021-3.6668-.0817-4.9465-.0607-1.2797-.264-2.1487-.5633-2.9117-.3084-.7889-.72-1.4568-1.3876-2.1228C21.2982 1.33 20.628.9208 19.8378.6165 19.074.321 18.2017.1197 16.9244.0645 15.6471.0093 15.236-.005 11.977.0014 8.718.0076 8.31.0215 7.0301.0839m.1402 21.6932c-1.17-.0509-1.8053-.2453-2.2287-.408-.5606-.216-.96-.4771-1.3819-.895-.422-.4178-.6811-.8186-.9-1.378-.1644-.4234-.3624-1.058-.4171-2.228-.0595-1.2645-.072-1.6442-.079-4.848-.007-3.2037.0053-3.583.0607-4.848.05-1.169.2456-1.805.408-2.2282.216-.5613.4762-.96.895-1.3816.4188-.4217.8184-.6814 1.3783-.9003.423-.1651 1.0575-.3614 2.227-.4171 1.2655-.06 1.6447-.072 4.848-.079 3.2033-.007 3.5835.005 4.8495.0608 1.169.0508 1.8053.2445 2.228.408.5608.216.96.4754 1.3816.895.4217.4194.6816.8176.9005 1.3787.1653.4217.3617 1.056.4169 2.2263.0602 1.2655.0739 1.645.0796 4.848.0058 3.203-.0055 3.5834-.061 4.848-.051 1.17-.245 1.8055-.408 2.2294-.216.5604-.4763.96-.8954 1.3814-.419.4215-.8181.6811-1.3783.9-.4224.1649-1.0577.3617-2.2262.4174-1.2656.0595-1.6448.072-4.8493.079-3.2045.007-3.5825-.006-4.848-.0608M16.953 5.5864A1.44 1.44 0 1 0 18.39 4.144a1.44 1.44 0 0 0-1.437 1.4424M5.8385 12.012c.0067 3.4032 2.7706 6.1557 6.173 6.1493 3.4026-.0065 6.157-2.7701 6.1506-6.1733-.0065-3.4032-2.771-6.1565-6.174-6.1498-3.403.0067-6.156 2.771-6.1496 6.1738M8 12.0077a4 4 0 1 1 4.008 3.9921A3.9996 3.9996 0 0 1 8 12.0077"})]})}),SSe="#000000",_Se=T.forwardRef(function({title:e="Threads",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=SSe),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M12.186 24h-.007c-3.581-.024-6.334-1.205-8.184-3.509C2.35 18.44 1.5 15.586 1.472 12.01v-.017c.03-3.579.879-6.43 2.525-8.482C5.845 1.205 8.6.024 12.18 0h.014c2.746.02 5.043.725 6.826 2.098 1.677 1.29 2.858 3.13 3.509 5.467l-2.04.569c-1.104-3.96-3.898-5.984-8.304-6.015-2.91.022-5.11.936-6.54 2.717C4.307 6.504 3.616 8.914 3.589 12c.027 3.086.718 5.496 2.057 7.164 1.43 1.783 3.631 2.698 6.54 2.717 2.623-.02 4.358-.631 5.8-2.045 1.647-1.613 1.618-3.593 1.09-4.798-.31-.71-.873-1.3-1.634-1.75-.192 1.352-.622 2.446-1.284 3.272-.886 1.102-2.14 1.704-3.73 1.79-1.202.065-2.361-.218-3.259-.801-1.063-.689-1.685-1.74-1.752-2.964-.065-1.19.408-2.285 1.33-3.082.88-.76 2.119-1.207 3.583-1.291a13.853 13.853 0 0 1 3.02.142c-.126-.742-.375-1.332-.75-1.757-.513-.586-1.308-.883-2.359-.89h-.029c-.844 0-1.992.232-2.721 1.32L7.734 7.847c.98-1.454 2.568-2.256 4.478-2.256h.044c3.194.02 5.097 1.975 5.287 5.388.108.046.216.094.321.142 1.49.7 2.58 1.761 3.154 3.07.797 1.82.871 4.79-1.548 7.158-1.85 1.81-4.094 2.628-7.277 2.65Zm1.003-11.69c-.242 0-.487.007-.739.021-1.836.103-2.98.946-2.916 2.143.067 1.256 1.452 1.839 2.784 1.767 1.224-.065 2.818-.543 3.086-3.71a10.5 10.5 0 0 0-2.215-.221z"})]})}),ESe="#000000",NSe=T.forwardRef(function({title:e="X",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=ESe),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"})]})}),CSe={Phone:eM,Mail:ZR,Users:As,Coffee:hte,Utensils:Ste,FileText:_0,Circle:BP};function kSe({timeline:t,onEdit:e,onDelete:r,onToggleTodo:n,personId:i,allPeople:s=[]}){const o=T.useMemo(()=>Jme(t||[]),[t]),a=f=>s.find(p=>p.id.toString()===f.toString()),l=f=>{if(f.type==="todo")return f.is_completed?LP:jd;if(f.type==="activity"&&f.activity_type){const p=ege(f.activity_type);return CSe[p]||BP}return f.type==="note"?_0:BP},c=f=>{var S;const p=l(f),m=f.type==="todo",g=f.type==="activity",b=f.type==="note";let y=f.activity_date||f.created;f.activity_date&&f.activity_time&&(y=`${f.activity_date}T${f.activity_time}`);const v=Zme(y),w=rge(f),x=m&&em(f);return u.jsxs("div",{className:`relative ${m?"pl-0":"pl-8"} pb-6 group`,children:[!m&&u.jsx("div",{className:"absolute left-0 top-1",children:u.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${g?"bg-blue-500 border-blue-500":"bg-gray-400 border-gray-400"}`})}),u.jsx("div",{className:`${w}`,children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[!m&&u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx(p,{className:`w-4 h-4 flex-shrink-0 ${g?"text-blue-600":"text-gray-500"}`}),g&&f.activity_type&&u.jsx("span",{className:"text-xs font-medium text-gray-600",children:tge(f.activity_type)}),u.jsx("span",{className:"text-xs text-gray-400",children:""}),u.jsx("span",{className:"text-xs text-gray-500",children:v})]}),u.jsxs("div",{className:"flex items-start gap-2",children:[m&&u.jsx("button",{onClick:()=>n&&n(f),className:"mt-0.5 flex-shrink-0",title:f.is_completed?"Mark as incomplete":"Mark as complete",children:f.is_completed?u.jsx(LP,{className:`w-5 h-5 ${x?"text-red-600":"text-primary-600"}`}):u.jsx(jd,{className:`w-5 h-5 ${x?"text-red-600":"text-gray-400"}`})}),(b||g)&&((S=f.content)!=null&&S.includes("<"))?u.jsx("div",{className:`text-sm flex-1 prose prose-sm max-w-none ${f.is_completed?"line-through opacity-60":""}`,dangerouslySetInnerHTML:{__html:f.content}}):u.jsx("p",{className:`text-sm flex-1 ${f.is_completed?"line-through opacity-60":""}`,children:f.content})]}),g&&f.participants&&f.participants.length>0&&u.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[u.jsx("span",{className:"text-xs text-gray-500",children:"With:"}),f.participants.map(_=>{const N=a(_);return N?u.jsxs(ce,{to:`/people/${_}`,className:"inline-flex items-center gap-1 text-xs text-primary-600 hover:text-primary-700 hover:underline",children:[u.jsx(JR,{className:"w-3 h-3"}),N.name]},_):null})]}),m&&f.due_date&&u.jsx("div",{className:"mt-2",children:u.jsxs("span",{className:`text-xs ${x?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",Nn(new Date(f.due_date),"MMM d, yyyy"),x&&" (overdue)"]})})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[e&&u.jsx("button",{onClick:()=>e(f),className:"p-1 hover:bg-gray-100 rounded",title:"Edit",children:u.jsx(na,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),r&&u.jsx("button",{onClick:()=>r(f),className:"p-1 hover:bg-red-50 rounded",title:"Delete",children:u.jsx(ai,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})})]},f.id)},d=(f,p)=>!p||p.length===0?null:u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3 uppercase tracking-wide",children:f}),u.jsx("div",{className:"relative pl-4 border-l-2 border-gray-200",children:p.map(c)})]});return o.today.length>0||o.yesterday.length>0||o.thisWeek.length>0||o.older.length>0?u.jsxs("div",{className:"space-y-6",children:[d("Today",o.today),d("Yesterday",o.yesterday),d("This week",o.thisWeek),d("Older",o.older)]}):u.jsx("div",{className:"text-center py-8",children:u.jsx("p",{className:"text-sm text-gray-500",children:"No timeline items yet."})})}function TSe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,initialContent:i=""}){const[s,o]=T.useState("");if(T.useEffect(()=>{t&&o(i||"")},[t,i]),!t)return null;const a=c=>{c.preventDefault(),!Mv(s)&&(r(s),o(""))},l=()=>{o(""),e()};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Add note"}),u.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Lr,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:a,className:"p-4",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Note"}),u.jsx(Nie,{value:s,onChange:o,placeholder:"Enter your note...",disabled:n,autoFocus:!0,minHeight:"150px"})]}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:l,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n||Mv(s),children:n?"Adding...":"Add note"})]})]})]})})}function Cie({isOpen:t,onClose:e,onSubmit:r,isLoading:n,todo:i=null}){const[s,o]=T.useState(""),[a,l]=T.useState(""),[c,d]=T.useState(!1),h=()=>new Date().toISOString().split("T")[0];if(T.useEffect(()=>{i?(o(i.content||""),l(i.due_date||""),d(i.is_completed||!1)):(o(""),l(h()),d(!1))},[i,t]),!t)return null;const f=g=>{g.preventDefault(),s.trim()&&(r({content:s.trim(),due_date:a||null,is_completed:c}),i||(o(""),l(h()),d(!1)))},p=()=>{i||(o(""),l(h()),d(!1)),e()},m=g=>{if(!g)return"";try{return new Date(g).toISOString().split("T")[0]}catch{return""}};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:i?"Edit todo":"Add todo"}),u.jsx("button",{onClick:p,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Lr,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:f,className:"p-4",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"todo-content",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),u.jsx("textarea",{id:"todo-content",value:s,onChange:g=>o(g.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"What needs to be done?",disabled:n,autoFocus:!0})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"todo-due-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Due date (optional)"}),u.jsx("input",{id:"todo-due-date",type:"date",value:m(a),onChange:g=>l(g.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),i&&u.jsx("div",{className:"mb-4",children:u.jsxs("label",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",checked:c,onChange:g=>d(g.target.checked),className:"mr-2",disabled:n}),u.jsx("span",{className:"text-sm text-gray-700",children:"Completed"})]})}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:p,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n||!s.trim(),children:n?i?"Saving...":"Adding...":i?"Save":"Add todo"})]})]})]})})}function An(t){return t?String(t).replace(/\\/g,"\\\\").replace(/;/g,"\\;").replace(/,/g,"\\,").replace(/\n/g,"\\n"):""}function OSe(t){return t?t.replace(/[^\d+]/g,""):""}function Z4(t){if(!t)return"";const e=new Date(t);if(isNaN(e.getTime()))return"";const r=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${r}${n}${i}`}function jSe(t,e={}){if(!t||!Array.isArray(t))return{title:"",org:""};const r=t.find(i=>i.is_current);if(r){const i=r.company&&e[r.company]?e[r.company].name||e[r.company]:"";return{title:r.job_title||"",org:i}}const n=[...t].filter(i=>i.start_date).sort((i,s)=>new Date(s.start_date)-new Date(i.start_date));if(n.length>0){const i=n[0].company&&e[n[0].company]?e[n[0].company].name||e[n[0].company]:"";return{title:n[0].job_title||"",org:i}}return{title:"",org:""}}function PSe(t,e={}){if(!t)throw new Error("Person data is required");const{companyMap:r={},personDates:n=[]}=e,i=t.acf||{},s=[];s.push("BEGIN:VCARD"),s.push("VERSION:3.0");const o=i.first_name||"",a=i.last_name||"",l=t.name||`${o} ${a}`.trim()||"Unknown";s.push(`FN:${An(l)}`),s.push(`N:${An(a)};${An(o)};;;`),i.nickname&&s.push(`NICKNAME:${An(i.nickname)}`),i.contact_info&&Array.isArray(i.contact_info)&&i.contact_info.forEach(h=>{if(!h.contact_value)return;const f=An(h.contact_value),p=h.contact_label?An(h.contact_label):"";switch(h.contact_type){case"email":const m=p?`EMAIL;TYPE=INTERNET,${p.toUpperCase()}`:"EMAIL;TYPE=INTERNET";s.push(`${m}:${f}`);break;case"phone":case"mobile":const g=h.contact_type==="mobile"?"CELL":"VOICE",b=p?`TEL;TYPE=${g},${p.toUpperCase()}`:`TEL;TYPE=${g}`,y=OSe(h.contact_value);y&&s.push(`${b}:${y}`);break;case"website":case"linkedin":case"twitter":case"instagram":case"facebook":let v=h.contact_value;v.match(/^https?:\/\//i)||(v=`https://${v}`);const w=h.contact_type==="linkedin"?"PROFILE":"WORK",x=p?`URL;TYPE=${w},${p.toUpperCase()}`:`URL;TYPE=${w}`;s.push(`${x}:${An(v)}`);break}}),i.addresses&&Array.isArray(i.addresses)&&i.addresses.forEach(h=>{const f=h.address_label?`ADR;TYPE=${h.address_label.toUpperCase()}`:"ADR;TYPE=HOME",p=An(h.street||""),m=An(h.city||""),g=An(h.state||""),b=An(h.postal_code||""),y=An(h.country||"");(p||m||g||b||y)&&s.push(`${f}:;;${p};${m};${g};${b};${y}`)});const{title:c,org:d}=jSe(i.work_history,r);if(d&&s.push(`ORG:${An(d)}`),c&&s.push(`TITLE:${An(c)}`),n&&Array.isArray(n)){const h=n.find(f=>{const p=Array.isArray(f.date_type)?f.date_type[0]:f.date_type;return(p==null?void 0:p.toLowerCase())==="birthday"});if(h!=null&&h.date_value){const f=Z4(h.date_value);f&&s.push(`BDAY:${f}`)}}if(t.thumbnail,t.modified){const h=Z4(t.modified);h&&s.push(`REV:${h}T000000Z`)}return s.push("END:VCARD"),s.join(`\r
`)}function ISe(t,e={}){const{filename:r,...n}=e,i=PSe(t,n),s=new Blob([i],{type:"text/vcard;charset=utf-8"}),o=URL.createObjectURL(s),a=document.createElement("a");a.href=o,a.download=r||`${t.name||"contact"}.vcf`.replace(/[^a-z0-9.-]/gi,"_"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)}const RSe=({className:t})=>u.jsx("svg",{className:t,viewBox:"0 0 382 382",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",children:u.jsx("path",{d:`M347.445,0H34.555C15.471,0,0,15.471,0,34.555v312.889C0,366.529,15.471,382,34.555,382h312.889
      C366.529,382,382,366.529,382,347.444V34.555C382,15.471,366.529,0,347.445,0z M118.207,329.844c0,5.554-4.502,10.056-10.056,10.056
      H65.345c-5.554,0-10.056-4.502-10.056-10.056V150.403c0-5.554,4.502-10.056,10.056-10.056h42.806
      c5.554,0,10.056,4.502,10.056,10.056V329.844z M86.748,123.432c-22.459,0-40.666-18.207-40.666-40.666S64.289,42.1,86.748,42.1
      s40.666,18.207,40.666,40.666S109.208,123.432,86.748,123.432z M341.91,330.654c0,5.106-4.14,9.246-9.246,9.246H286.73
      c-5.106,0-9.246-4.14-9.246-9.246v-84.168c0-12.556,3.683-55.021-32.813-55.021c-28.309,0-34.051,29.066-35.204,42.11v97.079
      c0,5.106-4.139,9.246-9.246,9.246h-44.426c-5.106,0-9.246-4.14-9.246-9.246V149.593c0-5.106,4.14-9.246,9.246-9.246h44.426
      c5.106,0,9.246,4.14,9.246,9.246v15.655c10.497-15.753,26.097-27.912,59.312-27.912c73.552,0,73.131,68.716,73.131,106.472
      L341.91,330.654L341.91,330.654z`})});function Og(t){if(!t)return null;switch(t){case"male":return"";case"female":return"";case"non_binary":case"other":case"prefer_not_to_say":return"";default:return null}}function MSe(){var nD,iD,sD,oD,aD,lD,cD,uD,dD,hD,fD,pD,mD,gD,yD;const{id:t}=zs(),e=yn(),r=bt(),{data:n,isLoading:i,error:s}=zc(t),{data:o}=tpe(t),{data:a}=rpe(t),l=ipe(),c=ope(),d=dpe(),h=rh(),f=spe(),p=tM(),m=ape(),g=kte(),b=cpe(),y=lpe(),v=upe(),{data:w}=Bc(),{data:x=[]}=dt({queryKey:["investments",t],queryFn:async()=>(await Le.getInvestments(t)).data,enabled:!!t}),[S,_]=T.useState(!1),[N,E]=T.useState(""),[k,C]=T.useState(!1),O=T.useRef(null),[P,j]=T.useState(!1),[M,A]=T.useState(!1),[I,L]=T.useState(!1),[F,W]=T.useState(null),[B,U]=T.useState(null),[K,fe]=T.useState(null),[we,Fe]=T.useState(!1),[Se,Oe]=T.useState(null),{data:$e}=dt({queryKey:["person-labels"],queryFn:async()=>(await We.getPersonLabels()).data}),pt=$e||[],it=(n==null?void 0:n.labels)||[],mt=((oD=(sD=(iD=(nD=n==null?void 0:n._embedded)==null?void 0:nD["wp:term"])==null?void 0:iD.flat())==null?void 0:sD.filter(D=>(D==null?void 0:D.taxonomy)==="person_label"))==null?void 0:oD.map(D=>D.id))||[],X=pt.filter(D=>!it.includes(D.name));yi((n==null?void 0:n.name)||((aD=n==null?void 0:n.title)==null?void 0:aD.rendered)||(n==null?void 0:n.title)||"Person");const ve=a==null?void 0:a.find(D=>{const Y=Array.isArray(D.date_type)?D.date_type[0]:D.date_type;return(Y==null?void 0:Y.toLowerCase())==="birthday"}),He=ve!=null&&ve.date_value?new Date(ve.date_value):null,lt=(ve==null?void 0:ve.year_unknown)??!1,It=a==null?void 0:a.find(D=>{const Y=Array.isArray(D.date_type)?D.date_type[0]:D.date_type;return(Y==null?void 0:Y.toLowerCase())==="died"}),ke=It!=null&&It.date_value?new Date(It.date_value):null,tt=(It==null?void 0:It.year_unknown)??!1,xt=!!ke,gt=He&&!lt?c1(xt?ke:new Date,He):null,$=a?[...a].sort((D,Y)=>{const G=D.date_value?new Date(D.date_value):new Date(0),Ie=Y.date_value?new Date(Y.date_value):new Date(0);return G-Ie}):[],q=async()=>{if(window.confirm("Are you sure you want to delete this person?"))try{await l.mutateAsync(t),e("/people")}catch(D){console.error("Failed to delete person:",D),alert("Failed to delete person. Please try again.")}},V=D=>{if(!D)return"";let Y=D.replace(/[\u200B-\u200D\uFEFF\u200E\u200F\u202A-\u202E]/g,"");const G=Y.startsWith("+");return Y=Y.replace(/\D/g,""),G?`+${Y}`:Y},oe=async D=>{var Ie;if(!window.confirm("Are you sure you want to delete this contact detail?"))return;const Y=[...((Ie=n.acf)==null?void 0:Ie.contact_info)||[]];Y.splice(D,1);const G=co(n.acf,{contact_info:Y});await h.mutateAsync({id:t,data:{acf:G}})},Z=async D=>{var Ie;if(!window.confirm("Are you sure you want to delete this address?"))return;const Y=[...((Ie=n.acf)==null?void 0:Ie.addresses)||[]];Y.splice(D,1);const G=co(n.acf,{addresses:Y});await h.mutateAsync({id:t,data:{acf:G}})},J=async D=>{var Ks,Yi,Gs,Wm,vD,bD;if(!window.confirm("Are you sure you want to delete this relationship?"))return;const Y=(Yi=(Ks=n.acf)==null?void 0:Ks.relationships)==null?void 0:Yi[D];if(!Y)return;const G=Y.related_person,Ie=Y.relationship_type;let Qe=!0;G&&Ie&&(Qe=window.confirm("Do you also want to delete the inverse relationship from the other person?"));let ut=null;if(!Qe&&G&&Ie)try{const[vs,Km]=await Promise.all([We.getPerson(G,{_embed:!0}),We.getRelationshipTypes()]),jb={};Km.data.forEach($h=>{jb[$h.id]=$h});const Si=jb[Ie],xl=(Gs=Si==null?void 0:Si.acf)==null?void 0:Gs.inverse_relationship_type;if(xl){const Dh=(((Wm=vs.data.acf)==null?void 0:Wm.relationships)||[]).find(Ys=>{var xD,wD;const Dae=typeof Ys.related_person=="object"?(xD=Ys.related_person)==null?void 0:xD.ID:Ys.related_person,Aae=typeof Ys.relationship_type=="object"?(wD=Ys.relationship_type)==null?void 0:wD.term_id:Ys.relationship_type;return Dae===parseInt(t)&&Aae===xl});Dh&&(ut={related_person:parseInt(t),relationship_type:xl,relationship_label:Dh.relationship_label||""})}}catch(vs){console.error("Failed to fetch inverse relationship:",vs)}const wt=[...((vD=n.acf)==null?void 0:vD.relationships)||[]];wt.splice(D,1);const Ko=co(n.acf,{relationships:wt});if(await h.mutateAsync({id:t,data:{acf:Ko}}),!Qe&&ut&&G){await new Promise(vs=>setTimeout(vs,500));try{const vs=await We.getPerson(G,{_embed:!0}),Km=((bD=vs.data.acf)==null?void 0:bD.relationships)||[];if(!Km.some(Si=>{var Dh,Ys;const xl=typeof Si.related_person=="object"?(Dh=Si.related_person)==null?void 0:Dh.ID:Si.related_person,$h=typeof Si.relationship_type=="object"?(Ys=Si.relationship_type)==null?void 0:Ys.term_id:Si.relationship_type;return xl===ut.related_person&&$h===ut.relationship_type})){const Si=[...Km,ut],xl=co(vs.data.acf,{relationships:Si});await We.updatePerson(G,{acf:xl})}}catch(vs){console.error("Failed to restore inverse relationship:",vs)}}r.invalidateQueries({queryKey:["person",t]}),G&&r.invalidateQueries({queryKey:["person",G]}),r.invalidateQueries({queryKey:["people"]})},ye=async D=>{window.confirm("Are you sure you want to delete this important date?")&&await d.mutateAsync({dateId:D,personId:t})},Ye=async D=>{window.confirm("Are you sure you want to delete this note?")&&await c.mutateAsync({noteId:D,personId:t})},Je=async D=>{try{await f.mutateAsync({personId:t,content:D}),j(!1)}catch(Y){console.error("Failed to create note:",Y),alert("Failed to create note. Please try again.")}},er=async D=>{try{B?(await m.mutateAsync({activityId:B.id,data:D,personId:t}),U(null)):(await p.mutateAsync({personId:t,data:D}),K&&(await b.mutateAsync({todoId:K.id,data:{content:K.content,due_date:K.due_date,is_completed:!0},personId:t}),fe(null),Oe(null))),A(!1)}catch(Y){console.error("Failed to save activity:",Y),alert("Failed to save activity. Please try again.")}},Ee=async D=>{try{await g.mutateAsync({personId:t,data:D}),L(!1),W(null)}catch(Y){console.error("Failed to create todo:",Y),alert("Failed to create todo. Please try again.")}},ie=async D=>{if(F)try{await b.mutateAsync({todoId:F.id,data:D,personId:t}),L(!1),W(null)}catch(Y){console.error("Failed to update todo:",Y),alert("Failed to update todo. Please try again.")}},de=async D=>{if(!D.is_completed){fe(D),Fe(!0);return}try{await b.mutateAsync({todoId:D.id,data:{content:D.content,due_date:D.due_date,is_completed:!1},personId:t})}catch(Y){console.error("Failed to toggle todo:",Y),alert("Failed to update todo. Please try again.")}},he=async()=>{if(K)try{await b.mutateAsync({todoId:K.id,data:{content:K.content,due_date:K.due_date,is_completed:!0},personId:t}),Fe(!1),fe(null)}catch(D){console.error("Failed to complete todo:",D),alert("Failed to complete todo. Please try again.")}},Ne=()=>{if(!K)return;const D=new Date().toISOString().split("T")[0];Oe({content:K.content,activity_date:D,activity_type:"note",participants:[]}),Fe(!1),A(!0)},st=async D=>{window.confirm("Are you sure you want to delete this activity?")&&await y.mutateAsync({activityId:D,personId:t})},ii=async D=>{window.confirm("Are you sure you want to delete this todo?")&&await v.mutateAsync({todoId:D,personId:t})},Gi=D=>{D.type==="todo"?(W(D),L(!0)):D.type==="activity"&&(U(D),A(!0))},hu=D=>{D.type==="note"?Ye(D.id):D.type==="activity"?st(D.id):D.type==="todo"&&ii(D.id)},_b=async D=>{var Ie;if(!window.confirm("Are you sure you want to delete this work history item?"))return;const Y=[...((Ie=n.acf)==null?void 0:Ie.work_history)||[]];Y.splice(D,1);const G=co(n.acf,{work_history:Y});await h.mutateAsync({id:t,data:{acf:G}})},Eb=async D=>{var Ie,Qe,ut;const Y=(ut=(Qe=(Ie=n==null?void 0:n._embedded)==null?void 0:Ie["wp:term"])==null?void 0:Qe.flat())==null?void 0:ut.find(wt=>(wt==null?void 0:wt.taxonomy)==="person_label"&&(wt==null?void 0:wt.name)===D);if(!Y)return;const G=mt.filter(wt=>wt!==Y.id);await h.mutateAsync({id:t,data:{person_label:G}})},Nb=async()=>{if(!N)return;const D=pt.find(G=>G.id.toString()===N);if(!D)return;const Y=[...mt,D.id];await h.mutateAsync({id:t,data:{person_label:Y}}),E(""),_(!1)},Cb=async D=>{var G;const Y=(G=D.target.files)==null?void 0:G[0];if(Y){if(!Y.type.startsWith("image/")){alert("Please select an image file");return}if(Y.size>5*1024*1024){alert("Image size must be less than 5MB");return}C(!0);try{await Le.uploadPersonPhoto(t,Y),r.invalidateQueries({queryKey:["person",t]}),r.invalidateQueries({queryKey:["people"]})}catch(Ie){console.error("Failed to upload photo:",Ie),alert("Failed to upload photo. Please try again.")}finally{C(!1),O.current&&(O.current.value="")}}},kb=()=>{if(n)try{ISe(n,{companyMap:Te,personDates:a||[]})}catch(D){console.error("Failed to export vCard:",D),alert("Failed to export vCard. Please try again.")}},zm=((cD=(lD=n==null?void 0:n.acf)==null?void 0:lD.work_history)==null?void 0:cD.map(D=>D.company).filter(Boolean))||[],Vm=MP({queries:zm.map(D=>({queryKey:["company",D],queryFn:async()=>(await We.getCompany(D,{_embed:!0})).data,enabled:!!D}))}),Ws=((dD=(uD=n==null?void 0:n.acf)==null?void 0:uD.relationships)==null?void 0:dD.map(D=>D.related_person).filter(Boolean))||[],fu=MP({queries:Ws.map(D=>({queryKey:["person-dates",D],queryFn:async()=>(await Le.getPersonDates(D)).data,enabled:!!D}))}),Ph=T.useMemo(()=>{const D={};return fu.forEach((Y,G)=>{if(Y.data&&Ws[G]){const Ie=Ws[G],Qe=Y.data.find(ut=>{const wt=Array.isArray(ut.date_type)?ut.date_type[0]:ut.date_type;return(wt==null?void 0:wt.toLowerCase())==="birthday"});if(Qe!=null&&Qe.date_value){const ut=new Date(Qe.date_value);D[Ie]=c1(new Date,ut)}else D[Ie]=-1}}),D},[fu,Ws]),Tb=T.useMemo(()=>{const D={};return fu.forEach((Y,G)=>{if(Y.data&&Ws[G]){const Ie=Ws[G],Qe=Y.data.some(ut=>{const wt=Array.isArray(ut.date_type)?ut.date_type[0]:ut.date_type;return(wt==null?void 0:wt.toLowerCase())==="died"});D[Ie]=Qe}}),D},[fu,Ws]),ge=T.useMemo(()=>{var D;return(D=n==null?void 0:n.acf)!=null&&D.relationships?[...n.acf.relationships].sort((Y,G)=>{const Ie=Ph[Y.related_person]??-1,Qe=Ph[G.related_person]??-1;return Ie===-1&&Qe===-1?0:Ie===-1?1:Qe===-1?-1:Qe-Ie}):[]},[(hD=n==null?void 0:n.acf)==null?void 0:hD.relationships,Ph]),Te={};Vm.forEach((D,Y)=>{var G,Ie,Qe,ut,wt,Ko,Ks,Yi,Gs;if(D.data){const Wm=zm[Y];Te[Wm]={name:ir(D.data),logo:((Qe=(Ie=(G=D.data._embedded)==null?void 0:G["wp:featuredmedia"])==null?void 0:Ie[0])==null?void 0:Qe.source_url)||((Gs=(Yi=(Ks=(Ko=(wt=(ut=D.data._embedded)==null?void 0:ut["wp:featuredmedia"])==null?void 0:wt[0])==null?void 0:Ko.media_details)==null?void 0:Ks.sizes)==null?void 0:Yi.thumbnail)==null?void 0:Gs.source_url)||null}}});const qe=T.useMemo(()=>{var D;return(D=n==null?void 0:n.acf)!=null&&D.work_history?[...n.acf.work_history].map((Y,G)=>({...Y,originalIndex:G})).sort((Y,G)=>{if(Y.is_current&&!G.is_current)return-1;if(!Y.is_current&&G.is_current)return 1;const Ie=Y.start_date?new Date(Y.start_date):new Date(0);return(G.start_date?new Date(G.start_date):new Date(0))-Ie}):[]},[(fD=n==null?void 0:n.acf)==null?void 0:fD.work_history]),zt=T.useMemo(()=>o?o.filter(Y=>Y.type==="todo").sort((Y,G)=>{if(Y.is_completed&&!G.is_completed)return 1;if(!Y.is_completed&&G.is_completed)return-1;if(!Y.is_completed&&!G.is_completed){if(Y.due_date&&G.due_date)return new Date(Y.due_date)-new Date(G.due_date);if(Y.due_date&&!G.due_date)return-1;if(!Y.due_date&&G.due_date)return 1}return new Date(G.created)-new Date(Y.created)}):[],[o]);if(T.useEffect(()=>{(n==null?void 0:n.status)==="trash"&&e("/people",{replace:!0})},[n,e]),i)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(s||!n)return u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600",children:"Failed to load person."}),u.jsx(ce,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]});if(n.status==="trash")return null;const yt=n.acf||{},Ih=["facebook","linkedin","instagram","twitter","bluesky","threads","website"],Um=((pD=yt.contact_info)==null?void 0:pD.filter(D=>Ih.includes(D.contact_type)))||[],Rh={linkedin:1,twitter:2,bluesky:3,threads:4,instagram:5,facebook:6,website:7},Mh=[...Um].sort((D,Y)=>{const G=Rh[D.contact_type]||99,Ie=Rh[Y.contact_type]||99;return G-Ie}),Hm=D=>{switch(D){case"facebook":return bSe;case"linkedin":return RSe;case"instagram":return wSe;case"twitter":return NSe;case"bluesky":return ySe;case"threads":return _Se;case"website":return ey;default:return ey}},Ob=D=>{switch(D){case"facebook":return"text-[#1877F2]";case"linkedin":return"text-[#0077B7]";case"instagram":return"text-[#E4405F]";case"twitter":return"text-[#1DA1F2]";case"bluesky":return"text-[#00A8E8]";case"threads":return"text-[#000000]";case"website":return"text-gray-600";default:return"text-gray-600"}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(ce,{to:"/people",className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(zi,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to people"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:kb,className:"btn-secondary",children:[u.jsx(zP,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Export vCard"})]}),u.jsxs(ce,{to:`/people/${t}/edit`,className:"btn-secondary",children:[u.jsx(xte,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Edit"})]}),u.jsxs("button",{onClick:q,className:"btn-danger",children:[u.jsx(ai,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Delete"})]})]})]}),u.jsxs("div",{className:"card p-6 relative",children:[u.jsx("div",{className:"absolute top-4 right-4",children:u.jsx(ce,{to:`/people/${t}/family-tree`,className:"btn-secondary text-sm",children:"View family tree"})}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[u.jsxs("div",{className:"relative group",children:[n.thumbnail?u.jsx("img",{src:n.thumbnail,alt:n.name,className:"w-28 h-28 rounded-full object-cover"}):u.jsx("div",{className:"w-28 h-28 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-3xl font-medium text-gray-500",children:((mD=n.first_name)==null?void 0:mD[0])||"?"})}),u.jsx("div",{className:"absolute inset-0 rounded-full bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var D;return(D=O.current)==null?void 0:D.click()},children:k?u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):u.jsx(Ef,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),u.jsx("input",{ref:O,type:"file",accept:"image/*",onChange:Cb,className:"hidden",disabled:k})]}),u.jsxs("div",{className:"flex-1 space-y-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("h1",{className:"text-2xl font-bold",children:[n.name,xt&&u.jsx("span",{className:"ml-1 text-gray-500",children:""})]}),n.is_favorite&&u.jsx(Pd,{className:"w-5 h-5 text-yellow-400 fill-current"})]}),yt.nickname&&u.jsxs("p",{className:"text-gray-500",children:['"',yt.nickname,'"']}),xt&&ke&&u.jsxs("p",{className:"text-gray-500 text-sm",children:[Og(yt.gender)&&u.jsx("span",{className:"mr-1",children:Og(yt.gender)}),"Died ",Nn(ke,tt?"MMMM d":"MMMM d, yyyy"),gt!==null&&` at age ${gt}`]}),!xt&&gt!==null&&u.jsxs("p",{className:"text-gray-500 text-sm",children:[Og(yt.gender)&&u.jsx("span",{className:"mr-1",children:Og(yt.gender)}),gt," years old"]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[n.labels&&n.labels.length>0&&n.labels.map((D,Y)=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 group/label",children:[D,u.jsx("button",{onClick:()=>Eb(D),className:"opacity-0 group-hover/label:opacity-100 transition-opacity hover:bg-gray-200 rounded-full p-0.5",title:"Remove label",children:u.jsx(Lr,{className:"w-3 h-3"})})]},Y)),S?u.jsxs("div",{className:"inline-flex items-center gap-2",children:[u.jsxs("select",{value:N,onChange:D=>E(D.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1",autoFocus:!0,disabled:X.length===0,children:[u.jsx("option",{value:"",children:"Select a label..."}),X.map(D=>u.jsx("option",{value:D.id,children:D.name},D.id))]}),u.jsx("button",{onClick:Nb,disabled:!N,className:"text-xs px-2 py-1 bg-primary-600 text-white rounded hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"}),u.jsx("button",{onClick:()=>{_(!1),E("")},className:"text-xs px-2 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Cancel"})]}):X.length>0&&u.jsxs("button",{onClick:()=>_(!0),className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",children:[u.jsx(or,{className:"w-3 h-3 mr-1"}),"Add label"]})]}),Mh.length>0&&u.jsx("div",{className:"flex items-center gap-3 mt-4",children:Mh.map((D,Y)=>{const G=Hm(D.contact_type),Ie=Ob(D.contact_type);let Qe=D.contact_value;return Qe.match(/^https?:\/\//i)||(Qe=`https://${Qe}`),u.jsx("a",{href:Qe,target:"_blank",rel:"noopener noreferrer",className:`flex-shrink-0 hover:opacity-80 transition-opacity ${Ie}`,title:`${D.contact_type.charAt(0).toUpperCase()+D.contact_type.slice(1)}: ${D.contact_value}`,children:u.jsx(G,{className:"w-5 h-5"})},Y)})})]})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[!xt&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Contact information"}),u.jsxs(ce,{to:`/people/${t}/contact/new`,className:"btn-secondary text-sm",children:[u.jsx(or,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add contact detail"})]})]}),((gD=yt.contact_info)==null?void 0:gD.filter(D=>!Ih.includes(D.contact_type)).length)>0?u.jsx("div",{className:"space-y-2",children:(()=>{const D={email:1,phone:2,mobile:2,calendar:3,other:4};return yt.contact_info.filter(G=>!Ih.includes(G.contact_type)).map((G,Ie)=>({...G,originalIndex:Ie})).sort((G,Ie)=>{const Qe=D[G.contact_type]||99,ut=D[Ie.contact_type]||99;return Qe!==ut?Qe-ut:G.originalIndex-Ie.originalIndex}).map((G,Ie)=>{yt.contact_info.indexOf(G);const Qe=G.contact_type==="email"?ZR:G.contact_type==="phone"||G.contact_type==="mobile"?eM:G.contact_type==="calendar"?yo:ey,ut=G.contact_type==="email",wt=G.contact_type==="phone"||G.contact_type==="mobile",Ko=G.contact_type==="mobile",Ks=G.contact_type==="calendar";let Yi=null,Gs=null;return ut?Yi=`mailto:${G.contact_value}`:wt?Yi=`tel:${V(G.contact_value)}`:Ks&&(Yi=G.contact_value,Gs="_blank"),u.jsx("div",{className:"group",children:u.jsxs("div",{className:"flex items-center rounded-md -mx-2 px-2 py-1.5 group-hover:bg-gray-50 transition-colors",children:[u.jsx(Qe,{className:"w-4 h-4 text-gray-400 mr-3 flex-shrink-0"}),u.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[u.jsxs("span",{className:"text-sm text-gray-500",children:[G.contact_label||G.contact_type,": "]}),Yi?u.jsx("a",{href:Yi,target:Gs||void 0,rel:Gs==="_blank"?"noopener noreferrer":void 0,className:"text-primary-600 hover:text-primary-700 hover:underline",children:G.contact_value}):u.jsx("span",{children:G.contact_value}),Ko&&u.jsx("a",{href:`https://wa.me/${V(G.contact_value)}`,target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0 hover:opacity-80 transition-opacity",title:"Open WhatsApp",children:u.jsx(mte,{className:"w-4 h-4 text-[#25D366]"})})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx(ce,{to:`/people/${t}/contact/${G.originalIndex}/edit`,className:"p-1 hover:bg-gray-100 rounded",title:"Edit contact detail",children:u.jsx(na,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>oe(G.originalIndex),className:"p-1 hover:bg-red-50 rounded",title:"Delete contact detail",children:u.jsx(ai,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})},G.originalIndex)})})()}):u.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No contact information yet."})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Events"}),u.jsxs(ce,{to:`/dates/new?person=${t}`,className:"btn-secondary text-sm",children:[u.jsx(or,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add Important Date"})]})]}),$.length>0?u.jsx("div",{className:"space-y-3",children:$.map(D=>{const Y=Array.isArray(D.date_type)?D.date_type[0]:D.date_type,G=(Y==null?void 0:Y.toLowerCase())||"",Ie=G.includes("died"),Qe=G.includes("wedding")||G.includes("marriage")?jfe:G.includes("birthday")?Ofe:yo,ut=D.year_unknown?"MMMM d":"MMMM d, yyyy";return u.jsxs("div",{className:"flex items-start group",children:[u.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center mr-3",children:Ie?u.jsx("span",{className:"text-gray-500 text-lg font-semibold",children:""}):u.jsx(Qe,{className:"w-4 h-4 text-gray-500"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm font-medium",children:D.title}),u.jsx("p",{className:"text-xs text-gray-500",children:D.date_value&&Nn(new Date(D.date_value),ut)}),Y&&u.jsx("p",{className:"text-xs text-gray-400 capitalize",children:Y})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[u.jsx(ce,{to:`/dates/${D.id}/edit`,className:"p-1 hover:bg-gray-100 rounded",title:"Edit date",children:u.jsx(na,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>ye(D.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete date",children:u.jsx(ai,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},D.id)})}):u.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No important dates yet."})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Timeline"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>j(!0),className:"btn-secondary text-sm",children:[u.jsx(or,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Note"})]}),u.jsxs("button",{onClick:()=>A(!0),className:"btn-secondary text-sm",children:[u.jsx(or,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Activity"})]})]})]}),u.jsx(kSe,{timeline:o||[],onEdit:Gi,onDelete:hu,onToggleTodo:de,personId:t,allPeople:w||[]})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Work history"}),u.jsxs(ce,{to:`/people/${t}/work-history/new`,className:"btn-secondary text-sm",children:[u.jsx(or,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add work history"})]})]}),(qe==null?void 0:qe.length)>0?u.jsx("div",{className:"space-y-4",children:qe.map((D,Y)=>{const G=D.company?Te[D.company]:null,Ie=D.originalIndex;return u.jsxs("div",{className:"flex items-start group",children:[G!=null&&G.logo?u.jsx("img",{src:G.logo,alt:G.name,className:"w-20 h-20 rounded-lg object-contain bg-white mr-3 flex-shrink-0"}):u.jsx("div",{className:"w-20 h-20 bg-white rounded-lg flex items-center justify-center mr-3 flex-shrink-0 border border-gray-200",children:u.jsx(Rr,{className:"w-10 h-10 text-gray-500"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-medium",children:D.job_title}),D.company&&G&&u.jsx(ce,{to:`/companies/${D.company}`,className:"text-sm text-primary-600 hover:underline",children:G.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:[D.start_date&&Nn(new Date(D.start_date),"MMM yyyy")," - ",D.is_current?"Present":D.end_date?Nn(new Date(D.end_date),"MMM yyyy"):""]}),D.description&&u.jsx("p",{className:"text-sm text-gray-600 mt-1",children:D.description})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx(ce,{to:`/people/${t}/work-history/${Ie}/edit`,className:"p-1 hover:bg-gray-100 rounded",title:"Edit work history",children:u.jsx(na,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>_b(Ie),className:"p-1 hover:bg-red-50 rounded",title:"Delete work history",children:u.jsx(ai,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},Ie)})}):u.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No work history yet."})]}),x.length>0&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(Ly,{className:"w-5 h-5 mr-2"}),"Investments"]}),u.jsx("div",{className:"space-y-3",children:x.map(D=>u.jsxs(ce,{to:`/companies/${D.id}`,className:"flex items-center p-2 rounded-lg hover:bg-gray-50 transition-colors group",children:[D.thumbnail?u.jsx("img",{src:D.thumbnail,alt:D.name,className:"w-12 h-12 rounded-lg object-contain bg-white border border-gray-200"}):u.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:u.jsx(Rr,{className:"w-6 h-6 text-gray-400"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-sm font-medium group-hover:text-primary-600",children:D.name}),D.industry&&u.jsx("p",{className:"text-xs text-gray-500",children:D.industry})]})]},D.id))})]}),u.jsx(TSe,{isOpen:P,onClose:()=>j(!1),onSubmit:Je,isLoading:f.isPending}),u.jsx(VM,{isOpen:M,onClose:()=>{A(!1),U(null),fe(null),Oe(null)},onSubmit:er,isLoading:B?m.isPending:p.isPending,personId:t,initialData:Se,activity:B}),u.jsx(rM,{isOpen:we,onClose:()=>{Fe(!1),fe(null)},todo:K,onComplete:he,onCompleteAsActivity:Ne}),u.jsx(Cie,{isOpen:I,onClose:()=>{L(!1),W(null)},onSubmit:F?ie:Ee,isLoading:F?b.isPending:g.isPending,todo:F})]}),u.jsxs("div",{className:"space-y-6",children:[(yt.how_we_met||yt.met_date)&&u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"font-semibold mb-3",children:"How we met"}),yt.met_date&&u.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[u.jsx(yo,{className:"w-4 h-4 inline mr-1"}),Nn(new Date(yt.met_date),"MMMM d, yyyy")]}),yt.how_we_met&&u.jsx("p",{className:"text-sm",children:yt.how_we_met})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("h2",{className:"font-semibold",children:"Todos"}),u.jsxs("button",{onClick:()=>{W(null),L(!0)},className:"btn-secondary text-sm",children:[u.jsx(or,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add todo"})]})]}),zt.length>0?u.jsx("div",{className:"space-y-2",children:zt.map(D=>{const Y=em(D);return u.jsxs("div",{className:"flex items-start p-2 rounded hover:bg-gray-50 group",children:[u.jsx("button",{onClick:()=>de(D),className:"mt-0.5 mr-2 flex-shrink-0",title:D.is_completed?"Mark as incomplete":"Mark as complete",children:D.is_completed?u.jsx(LP,{className:"w-5 h-5 text-primary-600"}):u.jsx(jd,{className:`w-5 h-5 ${Y?"text-red-600":"text-gray-400"}`})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:`text-sm ${D.is_completed?"line-through text-gray-400":Y?"text-red-600":""}`,children:D.content}),D.due_date&&u.jsxs("p",{className:`text-xs mt-0.5 ${Y&&!D.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",Nn(new Date(D.due_date),"MMM d, yyyy"),Y&&!D.is_completed&&" (overdue)"]})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx("button",{onClick:()=>{W(D),L(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit todo",children:u.jsx(na,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>ii(D.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete todo",children:u.jsx(ai,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},D.id)})}):u.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No todos yet."})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("h2",{className:"font-semibold",children:"Relationships"}),u.jsxs(ce,{to:`/people/${t}/relationship/new`,className:"btn-secondary text-sm",children:[u.jsx(or,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add relationship"})]})]}),(ge==null?void 0:ge.length)>0?u.jsx("div",{className:"space-y-2",children:ge.map((D,Y)=>{var Ie,Qe,ut;const G=((Qe=(Ie=n==null?void 0:n.acf)==null?void 0:Ie.relationships)==null?void 0:Qe.findIndex(wt=>wt.related_person===D.related_person&&wt.relationship_type===D.relationship_type))??Y;return u.jsxs("div",{className:"flex items-center p-2 rounded hover:bg-gray-50 group",children:[u.jsxs(ce,{to:`/people/${D.related_person}`,className:"flex items-center flex-1 min-w-0",children:[D.person_thumbnail?u.jsx("img",{src:D.person_thumbnail,alt:Wn(D.person_name)||"",className:"w-8 h-8 rounded-full object-cover mr-2"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full mr-2 flex items-center justify-center",children:u.jsx("span",{className:"text-xs font-medium text-gray-500",children:((ut=Wn(D.person_name))==null?void 0:ut[0])||"?"})}),u.jsxs("div",{children:[u.jsxs("p",{className:"text-sm font-medium",children:[Wn(D.person_name)||`Person #${D.related_person}`,Tb[D.related_person]&&u.jsx("span",{className:"text-gray-400 ml-1",title:"Deceased",children:""})]}),u.jsx("p",{className:"text-xs text-gray-500",children:Wn(D.relationship_name||D.relationship_label)})]})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx(ce,{to:`/people/${t}/relationship/${G}/edit`,className:"p-1 hover:bg-gray-100 rounded",title:"Edit relationship",children:u.jsx(na,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>J(G),className:"p-1 hover:bg-red-50 rounded",title:"Delete relationship",children:u.jsx(ai,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},Y)})}):u.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No relationships yet."})]}),!xt&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Addresses"}),u.jsxs(ce,{to:`/people/${t}/address/new`,className:"btn-secondary text-sm",children:[u.jsx(or,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add address"})]})]}),((yD=yt.addresses)==null?void 0:yD.length)>0?u.jsx("div",{className:"space-y-4",children:yt.addresses.map((D,Y)=>{const G=[];D.street&&G.push(D.street);const Ie=[D.postal_code,D.city].filter(Boolean).join(" ");Ie&&G.push(Ie);const Qe=[D.state,D.country].filter(Boolean).join(", ");Qe&&G.push(Qe);const ut=[D.street,D.postal_code,D.city,D.state,D.country].filter(Boolean).join(", "),wt=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(ut)}`;return u.jsx("div",{className:"group",children:u.jsxs("div",{className:"flex items-start rounded-md -mx-2 px-2 py-1.5 group-hover:bg-gray-50 transition-colors",children:[u.jsx(Afe,{className:"w-4 h-4 text-gray-400 mr-3 mt-0.5 flex-shrink-0"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[D.address_label&&u.jsx("span",{className:"text-sm text-gray-500 block mb-1",children:D.address_label}),u.jsx("a",{href:wt,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-700 hover:underline text-sm",children:G.map((Ko,Ks)=>u.jsx("span",{className:"block",children:Ko},Ks))})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx(ce,{to:`/people/${t}/address/${Y}/edit`,className:"p-1 hover:bg-gray-100 rounded",title:"Edit address",children:u.jsx(na,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>Z(Y),className:"p-1 hover:bg-red-50 rounded",title:"Delete address",children:u.jsx(ai,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})},Y)})}):u.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No addresses yet."})]})]})]})]})}var sm=t=>t.type==="checkbox",Al=t=>t instanceof Date,Ln=t=>t==null;const kie=t=>typeof t=="object";var xr=t=>!Ln(t)&&!Array.isArray(t)&&kie(t)&&!Al(t),Tie=t=>xr(t)&&t.target?sm(t.target)?t.target.checked:t.target.value:t,$Se=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Oie=(t,e)=>t.has($Se(e)),DSe=t=>{const e=t.constructor&&t.constructor.prototype;return xr(e)&&e.hasOwnProperty("isPrototypeOf")},UM=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function jr(t){if(t instanceof Date)return new Date(t);const e=typeof FileList<"u"&&t instanceof FileList;if(UM&&(t instanceof Blob||e))return t;const r=Array.isArray(t);if(!r&&!(xr(t)&&DSe(t)))return t;const n=r?[]:Object.create(Object.getPrototypeOf(t));for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=jr(t[i]));return n}var B0=t=>/^\w*$/.test(t),lr=t=>t===void 0,HM=t=>Array.isArray(t)?t.filter(Boolean):[],WM=t=>HM(t.replace(/["|']|\]/g,"").split(/\.|\[/)),pe=(t,e,r)=>{if(!e||!xr(t))return r;const n=(B0(e)?[e]:WM(e)).reduce((i,s)=>Ln(i)?i:i[s],t);return lr(n)||n===t?lr(t[e])?r:t[e]:n},li=t=>typeof t=="boolean",kn=t=>typeof t=="function",Rt=(t,e,r)=>{let n=-1;const i=B0(e)?[e]:WM(e),s=i.length,o=s-1;for(;++n<s;){const a=i[n];let l=r;if(n!==o){const c=t[a];l=xr(c)||Array.isArray(c)?c:isNaN(+i[n+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=l,t=t[a]}};const $v={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},as={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Zs={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},jie=Ae.createContext(null);jie.displayName="HookFormContext";const KM=()=>Ae.useContext(jie);var Pie=(t,e,r,n=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==as.all&&(e._proxyFormState[o]=!n||as.all),r&&(r[o]=!0),t[o]}});return i};const GM=typeof window<"u"?Ae.useLayoutEffect:Ae.useEffect;function ASe(t){const e=KM(),{control:r=e.control,disabled:n,name:i,exact:s}=t||{},[o,a]=Ae.useState(r._formState),l=Ae.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return GM(()=>r._subscribe({name:i,formState:l.current,exact:s,callback:c=>{!n&&a({...r._formState,...c})}}),[i,n,s]),Ae.useEffect(()=>{l.current.isValid&&r._setValid(!0)},[r]),Ae.useMemo(()=>Pie(o,r,l.current,!1),[o,r])}var ui=t=>typeof t=="string",wI=(t,e,r,n,i)=>ui(t)?(n&&e.watch.add(t),pe(r,t,i)):Array.isArray(t)?t.map(s=>(n&&e.watch.add(s),pe(r,s))):(n&&(e.watchAll=!0),r),SI=t=>Ln(t)||!kie(t);function ls(t,e,r=new WeakSet){if(SI(t)||SI(e))return Object.is(t,e);if(Al(t)&&Al(e))return t.getTime()===e.getTime();const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;if(r.has(t)||r.has(e))return!0;r.add(t),r.add(e);for(const s of n){const o=t[s];if(!i.includes(s))return!1;if(s!=="ref"){const a=e[s];if(Al(o)&&Al(a)||xr(o)&&xr(a)||Array.isArray(o)&&Array.isArray(a)?!ls(o,a,r):!Object.is(o,a))return!1}}return!0}function FSe(t){const e=KM(),{control:r=e.control,name:n,defaultValue:i,disabled:s,exact:o,compute:a}=t||{},l=Ae.useRef(i),c=Ae.useRef(a),d=Ae.useRef(void 0),h=Ae.useRef(r),f=Ae.useRef(n);c.current=a;const[p,m]=Ae.useState(()=>{const x=r._getWatch(n,l.current);return c.current?c.current(x):x}),g=Ae.useCallback(x=>{const S=wI(n,r._names,x||r._formValues,!1,l.current);return c.current?c.current(S):S},[r._formValues,r._names,n]),b=Ae.useCallback(x=>{if(!s){const S=wI(n,r._names,x||r._formValues,!1,l.current);if(c.current){const _=c.current(S);ls(_,d.current)||(m(_),d.current=_)}else m(S)}},[r._formValues,r._names,s,n]);GM(()=>((h.current!==r||!ls(f.current,n))&&(h.current=r,f.current=n,b()),r._subscribe({name:n,formState:{values:!0},exact:o,callback:x=>{b(x.values)}})),[r,o,n,b]),Ae.useEffect(()=>r._removeUnmounted());const y=h.current!==r,v=f.current,w=Ae.useMemo(()=>{if(s)return null;const x=!y&&!ls(v,n);return y||x?g():null},[s,y,n,v,g]);return w!==null?w:p}function qSe(t){const e=KM(),{name:r,disabled:n,control:i=e.control,shouldUnregister:s,defaultValue:o,exact:a=!0}=t,l=Oie(i._names.array,r),c=Ae.useMemo(()=>pe(i._formValues,r,pe(i._defaultValues,r,o)),[i,r,o]),d=FSe({control:i,name:r,defaultValue:c,exact:a}),h=ASe({control:i,name:r,exact:a}),f=Ae.useRef(t),p=Ae.useRef(void 0),m=Ae.useRef(i.register(r,{...t.rules,value:d,...li(t.disabled)?{disabled:t.disabled}:{}}));f.current=t;const g=Ae.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!pe(h.errors,r)},isDirty:{enumerable:!0,get:()=>!!pe(h.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!pe(h.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!pe(h.validatingFields,r)},error:{enumerable:!0,get:()=>pe(h.errors,r)}}),[h,r]),b=Ae.useCallback(x=>m.current.onChange({target:{value:Tie(x),name:r},type:$v.CHANGE}),[r]),y=Ae.useCallback(()=>m.current.onBlur({target:{value:pe(i._formValues,r),name:r},type:$v.BLUR}),[r,i._formValues]),v=Ae.useCallback(x=>{const S=pe(i._fields,r);S&&S._f&&x&&(S._f.ref={focus:()=>kn(x.focus)&&x.focus(),select:()=>kn(x.select)&&x.select(),setCustomValidity:_=>kn(x.setCustomValidity)&&x.setCustomValidity(_),reportValidity:()=>kn(x.reportValidity)&&x.reportValidity()})},[i._fields,r]),w=Ae.useMemo(()=>({name:r,value:d,...li(n)||h.disabled?{disabled:h.disabled||n}:{},onChange:b,onBlur:y,ref:v}),[r,n,h.disabled,b,y,v,d]);return Ae.useEffect(()=>{const x=i._options.shouldUnregister||s,S=p.current;S&&S!==r&&!l&&i.unregister(S),i.register(r,{...f.current.rules,...li(f.current.disabled)?{disabled:f.current.disabled}:{}});const _=(N,E)=>{const k=pe(i._fields,N);k&&k._f&&(k._f.mount=E)};if(_(r,!0),x){const N=jr(pe(i._options.defaultValues,r,f.current.defaultValue));Rt(i._defaultValues,r,N),lr(pe(i._formValues,r))&&Rt(i._formValues,r,N)}return!l&&i.register(r),p.current=r,()=>{(l?x&&!i._state.action:x)?i.unregister(r):_(r,!1)}},[r,i,l,s]),Ae.useEffect(()=>{i._setDisabledField({disabled:n,name:r})},[n,r,i]),Ae.useMemo(()=>({field:w,formState:h,fieldState:g}),[w,h,g])}const Dv=t=>t.render(qSe(t));var LSe=(t,e,r,n,i)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:i||!0}}:{},$f=t=>Array.isArray(t)?t:[t],eq=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}};function Iie(t,e){const r={};for(const n in t)if(t.hasOwnProperty(n)){const i=t[n],s=e[n];if(i&&xr(i)&&s){const o=Iie(i,s);xr(o)&&(r[n]=o)}else t[n]&&(r[n]=s)}return r}var wn=t=>xr(t)&&!Object.keys(t).length,YM=t=>t.type==="file",Av=t=>{if(!UM)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Rie=t=>t.type==="select-multiple",QM=t=>t.type==="radio",BSe=t=>QM(t)||sm(t),z1=t=>Av(t)&&t.isConnected;function zSe(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=lr(t)?n++:t[e[n++]];return t}function VSe(t){for(const e in t)if(t.hasOwnProperty(e)&&!lr(t[e]))return!1;return!0}function yr(t,e){const r=Array.isArray(e)?e:B0(e)?[e]:WM(e),n=r.length===1?t:zSe(t,r),i=r.length-1,s=r[i];return n&&delete n[s],i!==0&&(xr(n)&&wn(n)||Array.isArray(n)&&VSe(n))&&yr(t,r.slice(0,-1)),t}var USe=t=>{for(const e in t)if(kn(t[e]))return!0;return!1};function Mie(t){return Array.isArray(t)||xr(t)&&!USe(t)}function _I(t,e={}){for(const r in t){const n=t[r];Mie(n)?(e[r]=Array.isArray(n)?[]:{},_I(n,e[r])):lr(n)||(e[r]=!0)}return e}function Cu(t,e,r){r||(r=_I(e));for(const n in t){const i=t[n];if(Mie(i))lr(e)||SI(r[n])?r[n]=_I(i,Array.isArray(i)?[]:{}):Cu(i,Ln(e)?{}:e[n],r[n]);else{const s=e[n];r[n]=!ls(i,s)}}return r}const tq={value:!1,isValid:!1},rq={value:!0,isValid:!0};var $ie=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!lr(t[0].attributes.value)?lr(t[0].value)||t[0].value===""?rq:{value:t[0].value,isValid:!0}:rq:tq}return tq},Die=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>lr(t)?t:e?t===""?NaN:t&&+t:r&&ui(t)?new Date(t):n?n(t):t;const nq={isValid:!1,value:null};var Aie=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,nq):nq;function iq(t){const e=t.ref;return YM(e)?e.files:QM(e)?Aie(t.refs).value:Rie(e)?[...e.selectedOptions].map(({value:r})=>r):sm(e)?$ie(t.refs).value:Die(lr(e.value)?t.ref.value:e.value,t)}var HSe=(t,e,r,n)=>{const i={};for(const s of t){const o=pe(e,s);o&&Rt(i,s,o._f)}return{criteriaMode:r,names:[...t],fields:i,shouldUseNativeValidation:n}},Fv=t=>t instanceof RegExp,Jh=t=>lr(t)?t:Fv(t)?t.source:xr(t)?Fv(t.value)?t.value.source:t.value:t,sq=t=>({isOnSubmit:!t||t===as.onSubmit,isOnBlur:t===as.onBlur,isOnChange:t===as.onChange,isOnAll:t===as.all,isOnTouch:t===as.onTouched});const oq="AsyncFunction";var WSe=t=>!!t&&!!t.validate&&!!(kn(t.validate)&&t.validate.constructor.name===oq||xr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===oq)),KSe=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),aq=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const Df=(t,e,r,n)=>{for(const i of r||Object.keys(t)){const s=pe(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!n)return!0;if(o.ref&&e(o.ref,o.name)&&!n)return!0;if(Df(a,e))break}else if(xr(a)&&Df(a,e))break}}};function lq(t,e,r){const n=pe(t,r);if(n||B0(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const s=i.join("."),o=pe(e,s),a=pe(t,s);if(o&&!Array.isArray(o)&&r!==s)return{name:r};if(a&&a.type)return{name:s,error:a};if(a&&a.root&&a.root.type)return{name:`${s}.root`,error:a.root};i.pop()}return{name:r}}var GSe=(t,e,r,n)=>{r(t);const{name:i,...s}=t;return wn(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!n||as.all))},YSe=(t,e,r)=>!t||!e||t===e||$f(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n))),QSe=(t,e,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(e||t):(r?n.isOnBlur:i.isOnBlur)?!t:(r?n.isOnChange:i.isOnChange)?t:!0,XSe=(t,e)=>!HM(pe(t,e)).length&&yr(t,e),JSe=(t,e,r)=>{const n=$f(pe(t,r));return Rt(n,"root",e[r]),Rt(t,r,n),t};function cq(t,e,r="validate"){if(ui(t)||Array.isArray(t)&&t.every(ui)||li(t)&&!t)return{type:r,message:ui(t)?t:"",ref:e}}var vu=t=>xr(t)&&!Fv(t)?t:{value:t,message:""},uq=async(t,e,r,n,i,s)=>{const{ref:o,refs:a,required:l,maxLength:c,minLength:d,min:h,max:f,pattern:p,validate:m,name:g,valueAsNumber:b,mount:y}=t._f,v=pe(r,g);if(!y||e.has(g))return{};const w=a?a[0]:o,x=P=>{i&&w.reportValidity&&(w.setCustomValidity(li(P)?"":P||""),w.reportValidity())},S={},_=QM(o),N=sm(o),E=_||N,k=(b||YM(o))&&lr(o.value)&&lr(v)||Av(o)&&o.value===""||v===""||Array.isArray(v)&&!v.length,C=LSe.bind(null,g,n,S),O=(P,j,M,A=Zs.maxLength,I=Zs.minLength)=>{const L=P?j:M;S[g]={type:P?A:I,message:L,ref:o,...C(P?A:I,L)}};if(s?!Array.isArray(v)||!v.length:l&&(!E&&(k||Ln(v))||li(v)&&!v||N&&!$ie(a).isValid||_&&!Aie(a).isValid)){const{value:P,message:j}=ui(l)?{value:!!l,message:l}:vu(l);if(P&&(S[g]={type:Zs.required,message:j,ref:w,...C(Zs.required,j)},!n))return x(j),S}if(!k&&(!Ln(h)||!Ln(f))){let P,j;const M=vu(f),A=vu(h);if(!Ln(v)&&!isNaN(v)){const I=o.valueAsNumber||v&&+v;Ln(M.value)||(P=I>M.value),Ln(A.value)||(j=I<A.value)}else{const I=o.valueAsDate||new Date(v),L=B=>new Date(new Date().toDateString()+" "+B),F=o.type=="time",W=o.type=="week";ui(M.value)&&v&&(P=F?L(v)>L(M.value):W?v>M.value:I>new Date(M.value)),ui(A.value)&&v&&(j=F?L(v)<L(A.value):W?v<A.value:I<new Date(A.value))}if((P||j)&&(O(!!P,M.message,A.message,Zs.max,Zs.min),!n))return x(S[g].message),S}if((c||d)&&!k&&(ui(v)||s&&Array.isArray(v))){const P=vu(c),j=vu(d),M=!Ln(P.value)&&v.length>+P.value,A=!Ln(j.value)&&v.length<+j.value;if((M||A)&&(O(M,P.message,j.message),!n))return x(S[g].message),S}if(p&&!k&&ui(v)){const{value:P,message:j}=vu(p);if(Fv(P)&&!v.match(P)&&(S[g]={type:Zs.pattern,message:j,ref:o,...C(Zs.pattern,j)},!n))return x(j),S}if(m){if(kn(m)){const P=await m(v,r),j=cq(P,w);if(j&&(S[g]={...j,...C(Zs.validate,j.message)},!n))return x(j.message),S}else if(xr(m)){let P={};for(const j in m){if(!wn(P)&&!n)break;const M=cq(await m[j](v,r),w,j);M&&(P={...M,...C(j,M.message)},x(M.message),n&&(S[g]=P))}if(!wn(P)&&(S[g]={ref:w,...P},!n))return S}}return x(!0),S};const ZSe={mode:as.onSubmit,reValidateMode:as.onChange,shouldFocusError:!0};function e_e(t={}){let e={...ZSe,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:kn(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},n={},i=xr(e.defaultValues)||xr(e.values)?jr(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:jr(i),o={action:!1,mount:!1,watch:!1,keepIsValid:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={...d};let f={...h};const p={array:eq(),state:eq()},m=e.criteriaMode===as.all,g=$=>q=>{clearTimeout(c),c=setTimeout($,q)},b=async $=>{if(!o.keepIsValid&&!e.disabled&&(h.isValid||f.isValid||$)){let q;e.resolver?(q=wn((await E()).errors),y()):q=await C(n,!0),q!==r.isValid&&p.state.next({isValid:q})}},y=($,q)=>{!e.disabled&&(h.isValidating||h.validatingFields||f.isValidating||f.validatingFields)&&(($||Array.from(a.mount)).forEach(V=>{V&&(q?Rt(r.validatingFields,V,q):yr(r.validatingFields,V))}),p.state.next({validatingFields:r.validatingFields,isValidating:!wn(r.validatingFields)}))},v=($,q=[],V,oe,Z=!0,J=!0)=>{if(oe&&V&&!e.disabled){if(o.action=!0,J&&Array.isArray(pe(n,$))){const ye=V(pe(n,$),oe.argA,oe.argB);Z&&Rt(n,$,ye)}if(J&&Array.isArray(pe(r.errors,$))){const ye=V(pe(r.errors,$),oe.argA,oe.argB);Z&&Rt(r.errors,$,ye),XSe(r.errors,$)}if((h.touchedFields||f.touchedFields)&&J&&Array.isArray(pe(r.touchedFields,$))){const ye=V(pe(r.touchedFields,$),oe.argA,oe.argB);Z&&Rt(r.touchedFields,$,ye)}(h.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Cu(i,s)),p.state.next({name:$,isDirty:P($,q),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Rt(s,$,q)},w=($,q)=>{Rt(r.errors,$,q),p.state.next({errors:r.errors})},x=$=>{r.errors=$,p.state.next({errors:r.errors,isValid:!1})},S=($,q,V,oe)=>{const Z=pe(n,$);if(Z){const J=pe(s,$,lr(V)?pe(i,$):V);lr(J)||oe&&oe.defaultChecked||q?Rt(s,$,q?J:iq(Z._f)):A($,J),o.mount&&!o.action&&b()}},_=($,q,V,oe,Z)=>{let J=!1,ye=!1;const Ye={name:$};if(!e.disabled){if(!V||oe){(h.isDirty||f.isDirty)&&(ye=r.isDirty,r.isDirty=Ye.isDirty=P(),J=ye!==Ye.isDirty);const Je=ls(pe(i,$),q);ye=!!pe(r.dirtyFields,$),Je?yr(r.dirtyFields,$):Rt(r.dirtyFields,$,!0),Ye.dirtyFields=r.dirtyFields,J=J||(h.dirtyFields||f.dirtyFields)&&ye!==!Je}if(V){const Je=pe(r.touchedFields,$);Je||(Rt(r.touchedFields,$,V),Ye.touchedFields=r.touchedFields,J=J||(h.touchedFields||f.touchedFields)&&Je!==V)}J&&Z&&p.state.next(Ye)}return J?Ye:{}},N=($,q,V,oe)=>{const Z=pe(r.errors,$),J=(h.isValid||f.isValid)&&li(q)&&r.isValid!==q;if(e.delayError&&V?(l=g(()=>w($,V)),l(e.delayError)):(clearTimeout(c),l=null,V?Rt(r.errors,$,V):yr(r.errors,$)),(V?!ls(Z,V):Z)||!wn(oe)||J){const ye={...oe,...J&&li(q)?{isValid:q}:{},errors:r.errors,name:$};r={...r,...ye},p.state.next(ye)}},E=async $=>(y($,!0),await e.resolver(s,e.context,HSe($||a.mount,n,e.criteriaMode,e.shouldUseNativeValidation))),k=async $=>{const{errors:q}=await E($);if(y($),$)for(const V of $){const oe=pe(q,V);oe?Rt(r.errors,V,oe):yr(r.errors,V)}else r.errors=q;return q},C=async($,q,V={valid:!0})=>{for(const oe in $){const Z=$[oe];if(Z){const{_f:J,...ye}=Z;if(J){const Ye=a.array.has(J.name),Je=Z._f&&WSe(Z._f);Je&&h.validatingFields&&y([J.name],!0);const er=await uq(Z,a.disabled,s,m,e.shouldUseNativeValidation&&!q,Ye);if(Je&&h.validatingFields&&y([J.name]),er[J.name]&&(V.valid=!1,q))break;!q&&(pe(er,J.name)?Ye?JSe(r.errors,er,J.name):Rt(r.errors,J.name,er[J.name]):yr(r.errors,J.name))}!wn(ye)&&await C(ye,q,V)}}return V.valid},O=()=>{for(const $ of a.unMount){const q=pe(n,$);q&&(q._f.refs?q._f.refs.every(V=>!z1(V)):!z1(q._f.ref))&&$e($)}a.unMount=new Set},P=($,q)=>!e.disabled&&($&&q&&Rt(s,$,q),!ls(U(),i)),j=($,q,V)=>wI($,a,{...o.mount?s:lr(q)?i:ui($)?{[$]:q}:q},V,q),M=$=>HM(pe(o.mount?s:i,$,e.shouldUnregister?pe(i,$,[]):[])),A=($,q,V={})=>{const oe=pe(n,$);let Z=q;if(oe){const J=oe._f;J&&(!J.disabled&&Rt(s,$,Die(q,J)),Z=Av(J.ref)&&Ln(q)?"":q,Rie(J.ref)?[...J.ref.options].forEach(ye=>ye.selected=Z.includes(ye.value)):J.refs?sm(J.ref)?J.refs.forEach(ye=>{(!ye.defaultChecked||!ye.disabled)&&(Array.isArray(Z)?ye.checked=!!Z.find(Ye=>Ye===ye.value):ye.checked=Z===ye.value||!!Z)}):J.refs.forEach(ye=>ye.checked=ye.value===Z):YM(J.ref)?J.ref.value="":(J.ref.value=Z,J.ref.type||p.state.next({name:$,values:jr(s)})))}(V.shouldDirty||V.shouldTouch)&&_($,Z,V.shouldTouch,V.shouldDirty,!0),V.shouldValidate&&B($)},I=($,q,V)=>{for(const oe in q){if(!q.hasOwnProperty(oe))return;const Z=q[oe],J=$+"."+oe,ye=pe(n,J);(a.array.has($)||xr(Z)||ye&&!ye._f)&&!Al(Z)?I(J,Z,V):A(J,Z,V)}},L=($,q,V={})=>{const oe=pe(n,$),Z=a.array.has($),J=jr(q);Rt(s,$,J),Z?(p.array.next({name:$,values:jr(s)}),(h.isDirty||h.dirtyFields||f.isDirty||f.dirtyFields)&&V.shouldDirty&&p.state.next({name:$,dirtyFields:Cu(i,s),isDirty:P($,J)})):oe&&!oe._f&&!Ln(J)?I($,J,V):A($,J,V),aq($,a)&&p.state.next({...r,name:$}),p.state.next({name:o.mount?$:void 0,values:jr(s)})},F=async $=>{o.mount=!0;const q=$.target;let V=q.name,oe=!0;const Z=pe(n,V),J=Je=>{oe=Number.isNaN(Je)||Al(Je)&&isNaN(Je.getTime())||ls(Je,pe(s,V,Je))},ye=sq(e.mode),Ye=sq(e.reValidateMode);if(Z){let Je,er;const Ee=q.type?iq(Z._f):Tie($),ie=$.type===$v.BLUR||$.type===$v.FOCUS_OUT,de=!KSe(Z._f)&&!e.resolver&&!pe(r.errors,V)&&!Z._f.deps||QSe(ie,pe(r.touchedFields,V),r.isSubmitted,Ye,ye),he=aq(V,a,ie);Rt(s,V,Ee),ie?(!q||!q.readOnly)&&(Z._f.onBlur&&Z._f.onBlur($),l&&l(0)):Z._f.onChange&&Z._f.onChange($);const Ne=_(V,Ee,ie),st=!wn(Ne)||he;if(!ie&&p.state.next({name:V,type:$.type,values:jr(s)}),de)return(h.isValid||f.isValid)&&(e.mode==="onBlur"?ie&&b():ie||b()),st&&p.state.next({name:V,...he?{}:Ne});if(!ie&&he&&p.state.next({...r}),e.resolver){const{errors:ii}=await E([V]);if(y([V]),J(Ee),oe){const Gi=lq(r.errors,n,V),hu=lq(ii,n,Gi.name||V);Je=hu.error,V=hu.name,er=wn(ii)}}else y([V],!0),Je=(await uq(Z,a.disabled,s,m,e.shouldUseNativeValidation))[V],y([V]),J(Ee),oe&&(Je?er=!1:(h.isValid||f.isValid)&&(er=await C(n,!0)));oe&&(Z._f.deps&&(!Array.isArray(Z._f.deps)||Z._f.deps.length>0)&&B(Z._f.deps),N(V,er,Je,Ne))}},W=($,q)=>{if(pe(r.errors,q)&&$.focus)return $.focus(),1},B=async($,q={})=>{let V,oe;const Z=$f($);if(e.resolver){const J=await k(lr($)?$:Z);V=wn(J),oe=$?!Z.some(ye=>pe(J,ye)):V}else $?(oe=(await Promise.all(Z.map(async J=>{const ye=pe(n,J);return await C(ye&&ye._f?{[J]:ye}:ye)}))).every(Boolean),!(!oe&&!r.isValid)&&b()):oe=V=await C(n);return p.state.next({...!ui($)||(h.isValid||f.isValid)&&V!==r.isValid?{}:{name:$},...e.resolver||!$?{isValid:V}:{},errors:r.errors}),q.shouldFocus&&!oe&&Df(n,W,$?Z:a.mount),oe},U=($,q)=>{let V={...o.mount?s:i};return q&&(V=Iie(q.dirtyFields?r.dirtyFields:r.touchedFields,V)),lr($)?V:ui($)?pe(V,$):$.map(oe=>pe(V,oe))},K=($,q)=>({invalid:!!pe((q||r).errors,$),isDirty:!!pe((q||r).dirtyFields,$),error:pe((q||r).errors,$),isValidating:!!pe(r.validatingFields,$),isTouched:!!pe((q||r).touchedFields,$)}),fe=$=>{$&&$f($).forEach(q=>yr(r.errors,q)),p.state.next({errors:$?r.errors:{}})},we=($,q,V)=>{const oe=(pe(n,$,{_f:{}})._f||{}).ref,Z=pe(r.errors,$)||{},{ref:J,message:ye,type:Ye,...Je}=Z;Rt(r.errors,$,{...Je,...q,ref:oe}),p.state.next({name:$,errors:r.errors,isValid:!1}),V&&V.shouldFocus&&oe&&oe.focus&&oe.focus()},Fe=($,q)=>kn($)?p.state.subscribe({next:V=>"values"in V&&$(j(void 0,q),V)}):j($,q,!0),Se=$=>p.state.subscribe({next:q=>{YSe($.name,q.name,$.exact)&&GSe(q,$.formState||h,tt,$.reRenderRoot)&&$.callback({values:{...s},...r,...q,defaultValues:i})}}).unsubscribe,Oe=$=>(o.mount=!0,f={...f,...$.formState},Se({...$,formState:{...d,...$.formState}})),$e=($,q={})=>{for(const V of $?$f($):a.mount)a.mount.delete(V),a.array.delete(V),q.keepValue||(yr(n,V),yr(s,V)),!q.keepError&&yr(r.errors,V),!q.keepDirty&&yr(r.dirtyFields,V),!q.keepTouched&&yr(r.touchedFields,V),!q.keepIsValidating&&yr(r.validatingFields,V),!e.shouldUnregister&&!q.keepDefaultValue&&yr(i,V);p.state.next({values:jr(s)}),p.state.next({...r,...q.keepDirty?{isDirty:P()}:{}}),!q.keepIsValid&&b()},pt=({disabled:$,name:q})=>{(li($)&&o.mount||$||a.disabled.has(q))&&($?a.disabled.add(q):a.disabled.delete(q))},it=($,q={})=>{let V=pe(n,$);const oe=li(q.disabled)||li(e.disabled);return Rt(n,$,{...V||{},_f:{...V&&V._f?V._f:{ref:{name:$}},name:$,mount:!0,...q}}),a.mount.add($),V?pt({disabled:li(q.disabled)?q.disabled:e.disabled,name:$}):S($,!0,q.value),{...oe?{disabled:q.disabled||e.disabled}:{},...e.progressive?{required:!!q.required,min:Jh(q.min),max:Jh(q.max),minLength:Jh(q.minLength),maxLength:Jh(q.maxLength),pattern:Jh(q.pattern)}:{},name:$,onChange:F,onBlur:F,ref:Z=>{if(Z){it($,q),V=pe(n,$);const J=lr(Z.value)&&Z.querySelectorAll&&Z.querySelectorAll("input,select,textarea")[0]||Z,ye=BSe(J),Ye=V._f.refs||[];if(ye?Ye.find(Je=>Je===J):J===V._f.ref)return;Rt(n,$,{_f:{...V._f,...ye?{refs:[...Ye.filter(z1),J,...Array.isArray(pe(i,$))?[{}]:[]],ref:{type:J.type,name:$}}:{ref:J}}}),S($,!1,void 0,J)}else V=pe(n,$,{}),V._f&&(V._f.mount=!1),(e.shouldUnregister||q.shouldUnregister)&&!(Oie(a.array,$)&&o.action)&&a.unMount.add($)}}},mt=()=>e.shouldFocusError&&Df(n,W,a.mount),X=$=>{li($)&&(p.state.next({disabled:$}),Df(n,(q,V)=>{const oe=pe(n,V);oe&&(q.disabled=oe._f.disabled||$,Array.isArray(oe._f.refs)&&oe._f.refs.forEach(Z=>{Z.disabled=oe._f.disabled||$}))},0,!1))},ve=($,q)=>async V=>{let oe;V&&(V.preventDefault&&V.preventDefault(),V.persist&&V.persist());let Z=jr(s);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:J,values:ye}=await E();y(),r.errors=J,Z=jr(ye)}else await C(n);if(a.disabled.size)for(const J of a.disabled)yr(Z,J);if(yr(r.errors,"root"),wn(r.errors)){p.state.next({errors:{}});try{await $(Z,V)}catch(J){oe=J}}else q&&await q({...r.errors},V),mt(),setTimeout(mt);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:wn(r.errors)&&!oe,submitCount:r.submitCount+1,errors:r.errors}),oe)throw oe},He=($,q={})=>{pe(n,$)&&(lr(q.defaultValue)?L($,jr(pe(i,$))):(L($,q.defaultValue),Rt(i,$,jr(q.defaultValue))),q.keepTouched||yr(r.touchedFields,$),q.keepDirty||(yr(r.dirtyFields,$),r.isDirty=q.defaultValue?P($,jr(pe(i,$))):P()),q.keepError||(yr(r.errors,$),h.isValid&&b()),p.state.next({...r}))},lt=($,q={})=>{const V=$?jr($):i,oe=jr(V),Z=wn($),J=Z?i:oe;if(q.keepDefaultValues||(i=V),!q.keepValues){if(q.keepDirtyValues){const ye=new Set([...a.mount,...Object.keys(Cu(i,s))]);for(const Ye of Array.from(ye))pe(r.dirtyFields,Ye)?Rt(J,Ye,pe(s,Ye)):L(Ye,pe(J,Ye))}else{if(UM&&lr($))for(const ye of a.mount){const Ye=pe(n,ye);if(Ye&&Ye._f){const Je=Array.isArray(Ye._f.refs)?Ye._f.refs[0]:Ye._f.ref;if(Av(Je)){const er=Je.closest("form");if(er){er.reset();break}}}}if(q.keepFieldsRef)for(const ye of a.mount)L(ye,pe(J,ye));else n={}}s=e.shouldUnregister?q.keepDefaultValues?jr(i):{}:jr(J),p.array.next({values:{...J}}),p.state.next({values:{...J}})}a={mount:q.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!q.keepIsValid||!!q.keepDirtyValues||!e.shouldUnregister&&!wn(J),o.watch=!!e.shouldUnregister,o.keepIsValid=!!q.keepIsValid,o.action=!1,q.keepErrors||(r.errors={}),p.state.next({submitCount:q.keepSubmitCount?r.submitCount:0,isDirty:Z?!1:q.keepDirty?r.isDirty:!!(q.keepDefaultValues&&!ls($,i)),isSubmitted:q.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Z?{}:q.keepDirtyValues?q.keepDefaultValues&&s?Cu(i,s):r.dirtyFields:q.keepDefaultValues&&$?Cu(i,$):q.keepDirty?r.dirtyFields:{},touchedFields:q.keepTouched?r.touchedFields:{},errors:q.keepErrors?r.errors:{},isSubmitSuccessful:q.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},It=($,q)=>lt(kn($)?$(s):$,{...e.resetOptions,...q}),ke=($,q={})=>{const V=pe(n,$),oe=V&&V._f;if(oe){const Z=oe.refs?oe.refs[0]:oe.ref;Z.focus&&setTimeout(()=>{Z.focus(),q.shouldSelect&&kn(Z.select)&&Z.select()})}},tt=$=>{r={...r,...$}},gt={control:{register:it,unregister:$e,getFieldState:K,handleSubmit:ve,setError:we,_subscribe:Se,_runSchema:E,_updateIsValidating:y,_focusError:mt,_getWatch:j,_getDirty:P,_setValid:b,_setFieldArray:v,_setDisabledField:pt,_setErrors:x,_getFieldArray:M,_reset:lt,_resetDefaultValues:()=>kn(e.defaultValues)&&e.defaultValues().then($=>{It($,e.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:O,_disableForm:X,_subjects:p,_proxyFormState:h,get _fields(){return n},get _formValues(){return s},get _state(){return o},set _state($){o=$},get _defaultValues(){return i},get _names(){return a},set _names($){a=$},get _formState(){return r},get _options(){return e},set _options($){e={...e,...$}}},subscribe:Oe,trigger:B,register:it,handleSubmit:ve,watch:Fe,setValue:L,getValues:U,reset:It,resetField:He,clearErrors:fe,unregister:$e,setError:we,setFocus:ke,getFieldState:K};return{...gt,formControl:gt}}function Wc(t={}){const e=Ae.useRef(void 0),r=Ae.useRef(void 0),[n,i]=Ae.useState({isDirty:!1,isValidating:!1,isLoading:kn(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:kn(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:n},t.defaultValues&&!kn(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...a}=e_e(t);e.current={...a,formState:n}}const s=e.current.control;return s._options=t,GM(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(a=>({...a,isReady:!0})),s._formState.isReady=!0,o},[s]),Ae.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),Ae.useEffect(()=>{t.mode&&(s._options.mode=t.mode),t.reValidateMode&&(s._options.reValidateMode=t.reValidateMode)},[s,t.mode,t.reValidateMode]),Ae.useEffect(()=>{t.errors&&(s._setErrors(t.errors),s._focusError())},[s,t.errors]),Ae.useEffect(()=>{t.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,t.shouldUnregister]),Ae.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==n.isDirty&&s._subjects.state.next({isDirty:o})}},[s,n.isDirty]),Ae.useEffect(()=>{var o;t.values&&!ls(t.values,r.current)?(s._reset(t.values,{keepFieldsRef:!0,...s._options.resetOptions}),!((o=s._options.resetOptions)===null||o===void 0)&&o.keepIsValid||s._setValid(),r.current=t.values,i(a=>({...a}))):s._resetDefaultValues()},[s,t.values]),Ae.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=Pie(n,s),e.current}function dq(){var A;const{id:t}=zs(),e=yn(),[r]=y0(),n=!!t,i=r.get("returnTo"),s=r.get("sourcePersonId"),{data:o,isLoading:a}=zc(t),l=npe(),c=rh(),{data:d=[]}=dt({queryKey:["date-types"],queryFn:async()=>(await We.getDateTypes()).data}),h=d.find(I=>I.slug==="birthday"||I.name.toLowerCase()==="birthday"),[f,p]=T.useState(!1),[m,g]=T.useState(null),[b,y]=T.useState(null),v=ft({mutationFn:async I=>{const L=new FormData;return L.append("file",I),(await le.post("/prm/v1/import/vcard/parse",L,{headers:{"Content-Type":"multipart/form-data"}})).data}}),{register:w,handleSubmit:x,reset:S,watch:_,formState:{errors:N,isSubmitting:E}}=Wc({defaultValues:{first_name:"",last_name:"",nickname:"",gender:"",email:"",phone:"",phone_type:"mobile",how_we_met:"",is_favorite:!1,birthday:""}});_("phone"),T.useEffect(()=>{var I,L,F,W,B,U,K,fe,we,Fe;if(o){const Se=(L=(I=o.acf)==null?void 0:I.contact_info)==null?void 0:L.find(mt=>mt.contact_type==="email"),Oe=(Se==null?void 0:Se.contact_value)||"",$e=(W=(F=o.acf)==null?void 0:F.contact_info)==null?void 0:W.find(mt=>mt.contact_type==="phone"||mt.contact_type==="mobile"),pt=($e==null?void 0:$e.contact_value)||"",it=($e==null?void 0:$e.contact_type)||"mobile";S({first_name:((B=o.acf)==null?void 0:B.first_name)||"",last_name:((U=o.acf)==null?void 0:U.last_name)||"",nickname:((K=o.acf)==null?void 0:K.nickname)||"",gender:((fe=o.acf)==null?void 0:fe.gender)||"",email:Oe,phone:pt,phone_type:it,how_we_met:((we=o.acf)==null?void 0:we.how_we_met)||"",is_favorite:((Fe=o.acf)==null?void 0:Fe.is_favorite)||!1,birthday:""})}},[o,S]),yi(n&&o?`Edit ${((A=o.title)==null?void 0:A.rendered)||o.title||"person"}`:"New person");const k=T.useCallback(I=>{I.preventDefault(),I.stopPropagation(),I.type==="dragenter"||I.type==="dragover"?p(!0):I.type==="dragleave"&&p(!1)},[]),C=T.useCallback(I=>{I.preventDefault(),I.stopPropagation(),p(!1),y(null),I.dataTransfer.files&&I.dataTransfer.files[0]&&O(I.dataTransfer.files[0])},[]),O=I=>{const L=I.name.split(".").pop().toLowerCase();if(L!=="vcf"&&L!=="vcard"){y("Please select a vCard file (.vcf)");return}g(I),v.mutate(I,{onSuccess:F=>{S({first_name:F.first_name||"",last_name:F.last_name||"",nickname:F.nickname||"",gender:"",email:F.email||"",phone:F.phone||"",phone_type:F.phone_type||"mobile",how_we_met:F.note||"",is_favorite:!1,birthday:F.birthday||""}),F.contact_count>1&&y(`Note: File contains ${F.contact_count} contacts. Only the first contact was loaded.`)},onError:F=>{var W,B;y(((B=(W=F.response)==null?void 0:W.data)==null?void 0:B.message)||"Failed to parse vCard file"),g(null)}})},P=I=>{y(null),I.target.files&&I.target.files[0]&&O(I.target.files[0])},j=()=>{g(null),y(null),v.reset()},M=async I=>{try{const F=`${I.first_name||""} ${I.last_name||""}`.trim()||"Unnamed Person",W={title:F,status:"publish",acf:{first_name:I.first_name,last_name:I.last_name,nickname:I.nickname,gender:I.gender||null,how_we_met:I.how_we_met,is_favorite:I.is_favorite}};if(!n&&(I.email||I.phone)){const B=[];I.email&&B.push({contact_type:"email",contact_value:I.email,contact_label:""}),I.phone&&B.push({contact_type:I.phone_type||"mobile",contact_value:I.phone,contact_label:""}),W.acf.contact_info=B}if(n)W.title=F,await c.mutateAsync({id:t,data:W}),e(`/people/${t}`);else{const U=(await l.mutateAsync(W)).data.id;if(I.email)try{await Le.sideloadGravatar(U,I.email)}catch(K){console.error("Failed to load Gravatar:",K)}if(I.birthday&&h)try{const K=I.first_name||"Person";await We.createDate({title:`${K}'s Birthday`,status:"publish",date_type:[h.id],acf:{date_value:I.birthday,is_recurring:!0,related_people:[U],reminder_days_before:7}})}catch(K){console.error("Failed to create birthday:",K)}e(i==="relationship"&&s?`/people/${s}/relationship/new?newPersonId=${U}`:`/people/${U}`)}}catch(L){console.error("Failed to save person:",L)}};return n&&a?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:i==="relationship"&&s?u.jsxs(ce,{to:`/people/${s}/relationship/new`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(zi,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to add relationship"})]}):u.jsxs(ce,{to:"/people",className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(zi,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to people"})]})}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h1",{className:"text-xl font-bold mb-6",children:n?"Edit person":"Add new person"}),!n&&u.jsxs("div",{className:"mb-6",children:[u.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-4 text-center transition-colors ${f?"border-primary-500 bg-primary-50":m&&!b?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:k,onDragLeave:k,onDragOver:k,onDrop:C,children:[u.jsx("input",{type:"file",accept:".vcf,.vcard",onChange:P,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),v.isPending?u.jsxs("div",{className:"flex items-center justify-center gap-2 py-2",children:[u.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-primary-600"}),u.jsx("span",{className:"text-sm text-gray-600",children:"Parsing vCard..."})]}):m&&!b?u.jsxs("div",{className:"flex items-center justify-center gap-2 py-2",children:[u.jsx(Jp,{className:"h-5 w-5 text-green-600"}),u.jsxs("span",{className:"text-sm text-green-700",children:["Loaded from ",m.name]}),u.jsx("button",{type:"button",onClick:I=>{I.preventDefault(),I.stopPropagation(),j()},className:"ml-2 p-1 hover:bg-green-100 rounded",children:u.jsx(Lr,{className:"h-4 w-4 text-green-600"})})]}):u.jsxs("div",{className:"flex items-center justify-center gap-2 py-2",children:[u.jsx(Sc,{className:"h-5 w-5 text-gray-400"}),u.jsxs("span",{className:"text-sm text-gray-600",children:["Drop a vCard file here to import, or ",u.jsx("span",{className:"text-primary-600",children:"browse"})]})]})]}),b&&u.jsxs("div",{className:"mt-2 flex items-start gap-2 text-sm text-amber-700 bg-amber-50 rounded-lg p-2",children:[u.jsx(Ro,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),u.jsx("span",{children:b})]})]}),u.jsxs("form",{onSubmit:x(M),className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"First name *"}),u.jsx("input",{...w("first_name",{required:"First name is required"}),className:"input",placeholder:"John"}),N.first_name&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:N.first_name.message})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Last name"}),u.jsx("input",{...w("last_name"),className:"input",placeholder:"Doe"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Nickname"}),u.jsx("input",{...w("nickname"),className:"input",placeholder:"Johnny"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Gender"}),u.jsxs("select",{...w("gender"),className:"input",children:[u.jsx("option",{value:"",children:"Select gender..."}),u.jsx("option",{value:"male",children:"Male"}),u.jsx("option",{value:"female",children:"Female"}),u.jsx("option",{value:"non_binary",children:"Non-binary"}),u.jsx("option",{value:"other",children:"Other"}),u.jsx("option",{value:"prefer_not_to_say",children:"Prefer not to say"})]})]}),!n&&u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Email"}),u.jsx("input",{type:"email",...w("email"),className:"input",placeholder:"john@example.com"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: If a Gravatar is associated with this email, it will be automatically set as the profile photo"})]}),!n&&u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Phone"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("select",{...w("phone_type"),className:"input w-28",children:[u.jsx("option",{value:"mobile",children:"Mobile"}),u.jsx("option",{value:"phone",children:"Phone"})]}),u.jsx("input",{type:"tel",...w("phone"),className:"input flex-1",placeholder:"+1 555 123 4567"})]})]}),!n&&u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Birthday"}),u.jsx("input",{type:"date",...w("birthday"),className:"input"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Set their birthday when creating a new person"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"How we met"}),u.jsx("textarea",{...w("how_we_met"),className:"input",rows:4,placeholder:"We met at..."})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:"is_favorite",...w("is_favorite"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),u.jsx("label",{htmlFor:"is_favorite",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Mark as favorite"})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i==="relationship"&&s?u.jsx(ce,{to:`/people/${s}/relationship/new`,className:"btn-secondary",children:"Cancel"}):u.jsx(ce,{to:"/people",className:"btn-secondary",children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary",disabled:E,children:[E?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):u.jsx(Mo,{className:"w-4 h-4 mr-2"}),n?"Save changes":"Create person"]})]})]})]})]})}function t_e({value:t,onChange:e,companies:r,isLoading:n}){return u.jsxs("select",{value:t||"",onChange:i=>e(i.target.value?parseInt(i.target.value,10):null),className:"input",disabled:n,children:[u.jsx("option",{value:"",children:"Select an organization..."}),r.map(i=>{var s;return u.jsx("option",{value:i.id,children:((s=i.title)==null?void 0:s.rendered)||i.title},i.id)})]})}function hq(){var w,x;const{personId:t,index:e}=zs(),r=yn();bt();const n=parseInt(e,10),i=!isNaN(n),{data:s,isLoading:o}=zc(t),a=rh(),{data:l=[],isLoading:c}=dt({queryKey:["companies","all"],queryFn:async()=>(await We.getCompanies({per_page:100})).data}),d=T.useMemo(()=>[...l].sort((S,_)=>{var k,C;const N=(((k=S.title)==null?void 0:k.rendered)||S.title||"").toLowerCase(),E=(((C=_.title)==null?void 0:C.rendered)||_.title||"").toLowerCase();return N.localeCompare(E)}),[l]),{register:h,handleSubmit:f,reset:p,watch:m,control:g,formState:{errors:b,isSubmitting:y}}=Wc({defaultValues:{company:null,job_title:"",description:"",start_date:"",end_date:"",is_current:!1}});T.useEffect(()=>{var S;if(s&&i){const N=(((S=s.acf)==null?void 0:S.work_history)||[])[n];N&&p({company:N.company||null,job_title:N.job_title||"",description:N.description||"",start_date:N.start_date||"",end_date:N.end_date||"",is_current:N.is_current||!1})}},[s,n,i,p]),yi(i?`Edit work history - ${((w=s==null?void 0:s.title)==null?void 0:w.rendered)||(s==null?void 0:s.title)||"person"}`:`Add work history - ${((x=s==null?void 0:s.title)==null?void 0:x.rendered)||(s==null?void 0:s.title)||"person"}`);const v=async S=>{var _;try{const N=[...((_=s.acf)==null?void 0:_.work_history)||[]],E={company:S.company||null,job_title:S.job_title||"",description:S.description||"",start_date:S.start_date||"",end_date:S.end_date||"",is_current:S.is_current||!1};i?N[n]=E:N.push(E);const k=co(s.acf,{work_history:N});await a.mutateAsync({id:t,data:{acf:k}}),r(`/people/${t}`)}catch(N){console.error("Failed to save work history:",N)}};return m("is_current"),o?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):s?u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs(ce,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(zi,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to person"})]})}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h1",{className:"text-xl font-bold mb-6",children:i?"Edit work history":"Add work history"}),u.jsxs("form",{onSubmit:f(v),className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Organization"}),u.jsx(Dv,{name:"company",control:g,render:({field:S})=>u.jsx(t_e,{value:S.value,onChange:S.onChange,companies:d,isLoading:c})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Job title"}),u.jsx("input",{...h("job_title"),className:"input",placeholder:"e.g., Software Engineer"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Description"}),u.jsx("textarea",{...h("description"),className:"input",rows:4,placeholder:"Job description, responsibilities, achievements..."})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Start date"}),u.jsx("input",{type:"date",...h("start_date"),className:"input"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"End date"}),u.jsx("input",{type:"date",...h("end_date"),className:"input"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Set a future end date to automatically mark as former when it passes"})]})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:"is_current",...h("is_current"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),u.jsx("label",{htmlFor:"is_current",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Currently works here"})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[u.jsx(ce,{to:`/people/${t}`,className:"btn-secondary",children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary",disabled:y,children:[y?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):u.jsx(Mo,{className:"w-4 h-4 mr-2"}),i?"Save changes":"Add work history"]})]})]})]})]}):u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600",children:"Failed to load person."}),u.jsx(ce,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]})}const r_e=[{value:"email",label:"Email"},{value:"phone",label:"Phone"},{value:"mobile",label:"Mobile"},{value:"website",label:"Website"},{value:"calendar",label:"Calendar link"},{value:"linkedin",label:"LinkedIn"},{value:"twitter",label:"Twitter"},{value:"bluesky",label:"Bluesky"},{value:"threads",label:"Threads"},{value:"instagram",label:"Instagram"},{value:"facebook",label:"Facebook"},{value:"other",label:"Other"}];function fq(){var g,b;const{personId:t,index:e}=zs(),r=yn(),n=bt(),i=parseInt(e,10),s=!isNaN(i),{data:o,isLoading:a}=zc(t),l=rh(),{register:c,handleSubmit:d,reset:h,formState:{errors:f,isSubmitting:p}}=Wc({defaultValues:{contact_type:"",contact_label:"",contact_value:""}});T.useEffect(()=>{var y;if(o&&s){const w=(((y=o.acf)==null?void 0:y.contact_info)||[])[i];w&&h({contact_type:w.contact_type||"",contact_label:w.contact_label||"",contact_value:w.contact_value||""})}},[o,i,s,h]),yi(s?`Edit contact detail - ${((g=o==null?void 0:o.title)==null?void 0:g.rendered)||(o==null?void 0:o.title)||"person"}`:`Add contact detail - ${((b=o==null?void 0:o.title)==null?void 0:b.rendered)||(o==null?void 0:o.title)||"person"}`);const m=async y=>{var v,w,x,S;try{const _=[...((v=o.acf)==null?void 0:v.contact_info)||[]],N={contact_type:y.contact_type||"",contact_label:y.contact_label||"",contact_value:y.contact_value||""};s?_[i]=N:_.push(N);const E=co(o.acf,{contact_info:_});if(await l.mutateAsync({id:t,data:{acf:E}}),!s&&y.contact_type==="email"&&y.contact_value&&!(o.featured_media>0||((S=(x=(w=o._embedded)==null?void 0:w["wp:featuredmedia"])==null?void 0:x[0])==null?void 0:S.source_url)||o.thumbnail))try{await Le.sideloadGravatar(t,y.contact_value),n.invalidateQueries({queryKey:["person",t]})}catch(C){console.log("No Gravatar found or failed to load:",C)}r(`/people/${t}`)}catch(_){console.error("Failed to save contact detail:",_)}};return a?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):o?u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs(ce,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(zi,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to person"})]})}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h1",{className:"text-xl font-bold mb-6",children:s?"Edit contact detail":"Add contact detail"}),u.jsxs("form",{onSubmit:d(m),className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Contact type *"}),u.jsxs("select",{...c("contact_type",{required:"Please select a contact type"}),className:"input",children:[u.jsx("option",{value:"",children:"Select a type..."}),r_e.map(y=>u.jsx("option",{value:y.value,children:y.label},y.value))]}),f.contact_type&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:f.contact_type.message})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Label"}),u.jsx("input",{...c("contact_label"),className:"input",placeholder:"e.g., Work, Personal, Home"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Add a label to distinguish multiple entries of the same type"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Value *"}),u.jsx("input",{...c("contact_value",{required:"Please enter a contact value"}),className:"input",placeholder:"e.g., john@example.com, +1 234 567 8900"}),f.contact_value&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:f.contact_value.message})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[u.jsx(ce,{to:`/people/${t}`,className:"btn-secondary",children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary",disabled:p,children:[p?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):u.jsx(Mo,{className:"w-4 h-4 mr-2"}),s?"Save changes":"Add contact detail"]})]})]})]})]}):u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600",children:"Failed to load person."}),u.jsx(ce,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]})}function n_e({value:t,onChange:e,people:r,isLoading:n,excludePersonId:i}){const[s,o]=T.useState(""),[a,l]=T.useState(!1),c=T.useRef(null),d=T.useRef(null),h=T.useMemo(()=>r.filter(v=>v.id!==i).sort((v,w)=>{var _,N;const x=(v.first_name||((_=v.acf)==null?void 0:_.first_name)||"").toLowerCase(),S=(w.first_name||((N=w.acf)==null?void 0:N.first_name)||"").toLowerCase();return x<S?-1:x>S?1:0}),[r,i]),f=T.useMemo(()=>{if(!s)return h.slice(0,10);const y=s.toLowerCase();return h.filter(v=>{var _,N;const w=ec(v).toLowerCase(),x=(v.first_name||((_=v.acf)==null?void 0:_.first_name)||"").toLowerCase(),S=(v.last_name||((N=v.acf)==null?void 0:N.last_name)||"").toLowerCase();return w.includes(y)||x.includes(y)||S.includes(y)}).slice(0,10)},[h,s]),p=T.useMemo(()=>h.find(y=>y.id===t),[h,t]);T.useEffect(()=>{const y=v=>{d.current&&!d.current.contains(v.target)&&c.current&&!c.current.contains(v.target)&&l(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const m=y=>{e(y),o(""),l(!1)},g=()=>{e(null),o(""),l(!1)},b=p?ec(p):"";return u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"relative",children:p&&!a?u.jsxs("div",{className:"flex items-center justify-between input pr-8 cursor-text",onClick:()=>l(!0),children:[u.jsx("span",{children:b}),u.jsx("button",{type:"button",onClick:y=>{y.stopPropagation(),g()},className:"absolute right-2 text-gray-400 hover:text-gray-600",children:u.jsx(Lr,{className:"w-4 h-4"})})]}):u.jsx("input",{ref:c,type:"text",value:s,onChange:y=>{o(y.target.value),l(!0)},onFocus:()=>l(!0),placeholder:"Search for a person...",className:"input",disabled:n})}),a&&(s||!p)&&u.jsx("div",{ref:d,className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:f.length>0?f.map(y=>u.jsx("button",{type:"button",onClick:()=>m(y.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t===y.id?"bg-primary-50":""}`,children:ec(y)},y.id)):u.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No people found"})})]})}function pq(){var _,N;const{personId:t,index:e}=zs(),r=yn(),[n]=y0(),i=bt(),s=parseInt(e,10),o=!isNaN(s),{data:a,isLoading:l}=zc(t),c=rh(),{data:d=[],isLoading:h}=Bc(),{data:f=[],isLoading:p}=dt({queryKey:["relationship-types"],queryFn:async()=>(await We.getRelationshipTypes()).data}),{register:m,handleSubmit:g,reset:b,control:y,setValue:v,formState:{errors:w,isSubmitting:x}}=Wc({defaultValues:{related_person:null,relationship_type:"",relationship_label:""}});T.useEffect(()=>{const E=n.get("newPersonId");if(E&&!o&&!h){const k=parseInt(E,10);if(!isNaN(k))if(d.some(O=>O.id===k)){v("related_person",k);const O=new URLSearchParams(n);O.delete("newPersonId"),r({search:O.toString()},{replace:!0})}else(async()=>{try{await i.invalidateQueries({queryKey:["people"]});const{data:P=[]}=await i.refetchQueries({queryKey:["people"]});P.some(A=>A.id===k)&&v("related_person",k);const M=new URLSearchParams(n);M.delete("newPersonId"),r({search:M.toString()},{replace:!0})}catch(P){console.error("Failed to load new person:",P);const j=new URLSearchParams(n);j.delete("newPersonId"),r({search:j.toString()},{replace:!0})}})()}},[n,o,h,d,v,r,i]),T.useEffect(()=>{var E;if(a&&o){const C=(((E=a.acf)==null?void 0:E.relationships)||[])[s];C&&b({related_person:C.related_person||null,relationship_type:C.relationship_type?String(C.relationship_type):"",relationship_label:C.relationship_label||""})}},[a,s,o,b]),yi(o?`Edit relationship - ${((_=a==null?void 0:a.title)==null?void 0:_.rendered)||(a==null?void 0:a.title)||"person"}`:`Add relationship - ${((N=a==null?void 0:a.title)==null?void 0:N.rendered)||(a==null?void 0:a.title)||"person"}`);const S=async E=>{var k;try{const C=[...((k=a.acf)==null?void 0:k.relationships)||[]],O={related_person:E.related_person||null,relationship_type:E.relationship_type||null,relationship_label:E.relationship_label||""};o?C[s]=O:C.push(O);const P=co(a.acf,{relationships:C});await c.mutateAsync({id:t,data:{acf:P}}),r(`/people/${t}`)}catch(C){console.error("Failed to save relationship:",C)}};return l?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):a?u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs(ce,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(zi,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to person"})]})}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h1",{className:"text-xl font-bold mb-6",children:o?"Edit relationship":"Add relationship"}),u.jsxs("form",{onSubmit:g(S),className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Related person *"}),u.jsx(Dv,{name:"related_person",control:y,rules:{required:"Please select a person"},render:({field:E})=>u.jsx(n_e,{value:E.value,onChange:E.onChange,people:d,isLoading:h,excludePersonId:parseInt(t,10)})}),w.related_person&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:w.related_person.message}),!o&&u.jsx("div",{className:"mt-2",children:u.jsxs(ce,{to:`/people/new?returnTo=relationship&sourcePersonId=${t}`,className:"inline-flex items-center gap-1 text-sm text-primary-600 hover:text-primary-700",children:[u.jsx(or,{className:"w-4 h-4"}),"Add new person"]})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Relationship type"}),u.jsxs("select",{...m("relationship_type",{setValueAs:E=>E?parseInt(E,10):null}),className:"input",disabled:p,children:[u.jsx("option",{value:"",children:"Select a type..."}),f.map(E=>u.jsx("option",{value:E.id,children:E.name},E.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Custom label"}),u.jsx("input",{...m("relationship_label"),className:"input",placeholder:"e.g., Brother-in-law"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Override the relationship type with a custom label"})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[u.jsx(ce,{to:`/people/${t}`,className:"btn-secondary",children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary",disabled:x,children:[x?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):u.jsx(Mo,{className:"w-4 h-4 mr-2"}),o?"Save changes":"Add relationship"]})]})]})]})]}):u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600",children:"Failed to load person."}),u.jsx(ce,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]})}function mq(){var m,g;const{personId:t,index:e}=zs(),r=yn(),n=parseInt(e,10),i=!isNaN(n),{data:s,isLoading:o}=zc(t),a=rh(),{register:l,handleSubmit:c,reset:d,formState:{errors:h,isSubmitting:f}}=Wc({defaultValues:{address_label:"",street:"",postal_code:"",city:"",state:"",country:""}});T.useEffect(()=>{var b;if(s&&i){const v=(((b=s.acf)==null?void 0:b.addresses)||[])[n];v&&d({address_label:v.address_label||"",street:v.street||"",postal_code:v.postal_code||"",city:v.city||"",state:v.state||"",country:v.country||""})}},[s,n,i,d]),yi(i?`Edit address - ${((m=s==null?void 0:s.title)==null?void 0:m.rendered)||(s==null?void 0:s.title)||"person"}`:`Add address - ${((g=s==null?void 0:s.title)==null?void 0:g.rendered)||(s==null?void 0:s.title)||"person"}`);const p=async b=>{var y;try{const v=[...((y=s.acf)==null?void 0:y.addresses)||[]],w={address_label:b.address_label||"",street:b.street||"",postal_code:b.postal_code||"",city:b.city||"",state:b.state||"",country:b.country||""};i?v[n]=w:v.push(w);const x=co(s.acf,{addresses:v});await a.mutateAsync({id:t,data:{acf:x}}),r(`/people/${t}`)}catch(v){console.error("Failed to save address:",v)}};return o?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):s?u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs(ce,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(zi,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to person"})]})}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h1",{className:"text-xl font-bold mb-6",children:i?"Edit address":"Add address"}),u.jsxs("form",{onSubmit:c(p),className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Label"}),u.jsx("input",{...l("address_label"),className:"input",placeholder:"e.g., Home, Work"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Street"}),u.jsx("input",{...l("street"),className:"input",placeholder:"e.g., 123 Main Street"})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Postal code"}),u.jsx("input",{...l("postal_code"),className:"input",placeholder:"e.g., 12345"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"City"}),u.jsx("input",{...l("city"),className:"input",placeholder:"e.g., Amsterdam"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"State/Province"}),u.jsx("input",{...l("state"),className:"input",placeholder:"e.g., North Holland"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Country"}),u.jsx("input",{...l("country"),className:"input",placeholder:"e.g., Netherlands"})]})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[u.jsx(ce,{to:`/people/${t}`,className:"btn-secondary",children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary",disabled:f,children:[f?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):u.jsx(Mo,{className:"w-4 h-4 mr-2"}),i?"Save changes":"Add address"]})]})]})]})]}):u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600",children:"Failed to load person."}),u.jsx(ce,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]})}function i_e({company:t}){var e,r,n,i,s;return u.jsx(ce,{to:`/companies/${t.id}`,className:"card p-4 hover:shadow-md transition-shadow",children:u.jsxs("div",{className:"flex items-start",children:[(n=(r=(e=t._embedded)==null?void 0:e["wp:featuredmedia"])==null?void 0:r[0])!=null&&n.source_url?u.jsx("img",{src:t._embedded["wp:featuredmedia"][0].source_url,alt:ir(t),className:"w-12 h-12 rounded-lg object-contain bg-white"}):u.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:u.jsx(Rr,{className:"w-6 h-6 text-gray-400"})}),u.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[u.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:ir(t)}),((i=t.acf)==null?void 0:i.industry)&&u.jsx("p",{className:"text-sm text-gray-500",children:t.acf.industry}),((s=t.acf)==null?void 0:s.website)&&u.jsx("p",{className:"text-xs text-primary-600 truncate",children:t.acf.website})]})]})})}function s_e(){const[t,e]=T.useState(""),{data:r,isLoading:n,error:i}=dt({queryKey:["companies",t],queryFn:async()=>(await We.getCompanies({search:t,per_page:100,_embed:!0})).data}),s=T.useMemo(()=>r?[...r].sort((o,a)=>{var d,h;const l=(((d=o.title)==null?void 0:d.rendered)||o.title||"").toLowerCase(),c=(((h=a.title)==null?void 0:h.rendered)||a.title||"").toLowerCase();return l.localeCompare(c)}):[],[r]);return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"relative flex-1 max-w-md",children:[u.jsx(wc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{type:"search",placeholder:"Search organizations...",value:t,onChange:o=>e(o.target.value),className:"input pl-9"})]}),u.jsxs(ce,{to:"/companies/new",className:"btn-primary",children:[u.jsx(or,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add organization"})]})]}),n&&u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),i&&u.jsx("div",{className:"card p-6 text-center",children:u.jsx("p",{className:"text-red-600",children:"Failed to load organizations."})}),!n&&!i&&(s==null?void 0:s.length)===0&&u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(Rr,{className:"w-6 h-6 text-gray-400"})}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No organizations found"}),u.jsx("p",{className:"text-gray-500 mb-4",children:t?"Try a different search.":"Add your first organization."}),!t&&u.jsxs(ce,{to:"/companies/new",className:"btn-primary",children:[u.jsx(or,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add organization"})]})]}),!n&&!i&&(s==null?void 0:s.length)>0&&u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(o=>u.jsx(i_e,{company:o},o.id))})]})}function o_e(){var w,x,S,_,N,E,k;const{id:t}=zs(),e=yn(),r=bt(),n=T.useRef(null),[i,s]=T.useState(!1),{data:o,isLoading:a,error:l}=dt({queryKey:["company",t],queryFn:async()=>(await We.getCompany(t,{_embed:!0})).data}),{data:c}=dt({queryKey:["company-people",t],queryFn:async()=>(await Le.getCompanyPeople(t)).data}),{data:d}=dt({queryKey:["company",o==null?void 0:o.parent],queryFn:async()=>(await We.getCompany(o.parent,{_embed:!0})).data,enabled:!!(o!=null&&o.parent)}),{data:h=[]}=dt({queryKey:["company-children",t],queryFn:async()=>(await We.getCompanies({parent:t,per_page:100,_embed:!0})).data}),f=((w=o==null?void 0:o.acf)==null?void 0:w.investors)||[],{data:p=[]}=dt({queryKey:["company-investors",t,f],queryFn:async()=>{if(!f.length)return[];const[C,O]=await Promise.all([We.getPeople({per_page:100,include:f.join(","),_embed:!0}),We.getCompanies({per_page:100,include:f.join(","),_embed:!0})]),P=(C.data||[]).map(A=>{var I,L,F,W;return{id:A.id,type:"person",name:Wn(((I=A.title)==null?void 0:I.rendered)||""),thumbnail:(W=(F=(L=A._embedded)==null?void 0:L["wp:featuredmedia"])==null?void 0:F[0])==null?void 0:W.source_url}}),j=(O.data||[]).map(A=>{var I,L,F;return{id:A.id,type:"company",name:ir(A),thumbnail:(F=(L=(I=A._embedded)==null?void 0:I["wp:featuredmedia"])==null?void 0:L[0])==null?void 0:F.source_url}}),M=[...P,...j];return f.map(A=>M.find(I=>I.id===A)).filter(Boolean)},enabled:f.length>0}),{data:m=[]}=dt({queryKey:["investments",t],queryFn:async()=>(await Le.getInvestments(t)).data,enabled:!!t}),g=ft({mutationFn:()=>We.deleteCompany(t,{force:!0}),onSuccess:()=>{r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["dashboard"]}),e("/companies")}});yi(ir(o)||"Organization"),T.useEffect(()=>{(o==null?void 0:o.status)==="trash"&&e("/companies",{replace:!0})},[o,e]);const b=async()=>{if(window.confirm("Are you sure you want to delete this organization?"))try{await g.mutateAsync()}catch(C){console.error("Failed to delete company:",C),alert("Failed to delete organization. Please try again.")}},y=async C=>{var P;const O=(P=C.target.files)==null?void 0:P[0];if(O){if(!O.type.startsWith("image/")){alert("Please select an image file");return}if(O.size>5*1024*1024){alert("Image size must be less than 5MB");return}s(!0);try{await Le.uploadCompanyLogo(t,O),r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]})}catch(j){console.error("Failed to upload logo:",j),alert("Failed to upload logo. Please try again.")}finally{s(!1),n.current&&(n.current.value="")}}};if(a)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(l||!o)return u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600",children:"Failed to load organization."}),u.jsx(ce,{to:"/companies",className:"btn-secondary mt-4",children:"Back to organizations"})]});if(o.status==="trash")return null;const v=o.acf||{};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(ce,{to:"/companies",className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(zi,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to organizations"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs(ce,{to:`/companies/${t}/edit`,className:"btn-secondary",children:[u.jsx(xte,{className:"w-4 h-4 mr-2"}),"Edit"]}),u.jsxs("button",{onClick:b,className:"btn-danger",children:[u.jsx(ai,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]}),u.jsx("div",{className:"card p-6",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"relative group",children:[(_=(S=(x=o._embedded)==null?void 0:x["wp:featuredmedia"])==null?void 0:S[0])!=null&&_.source_url?u.jsx("img",{src:o._embedded["wp:featuredmedia"][0].source_url,alt:ir(o),className:"w-24 h-24 rounded-lg object-contain bg-white"}):u.jsx("div",{className:"w-24 h-24 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:u.jsx(Rr,{className:"w-12 h-12 text-gray-400"})}),u.jsx("div",{className:"absolute inset-0 rounded-lg bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var C;return(C=n.current)==null?void 0:C.click()},children:i?u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):u.jsx(Ef,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),u.jsx("input",{ref:n,type:"file",accept:"image/*",onChange:y,className:"hidden",disabled:i})]}),u.jsxs("div",{children:[d&&u.jsxs(ce,{to:`/companies/${d.id}`,className:"text-sm text-primary-600 hover:underline flex items-center mb-1",children:[u.jsx(gF,{className:"w-3 h-3 mr-1"}),"Subsidiary of ",ir(d)]}),u.jsx("h1",{className:"text-2xl font-bold",children:ir(o)}),v.industry&&u.jsx("p",{className:"text-gray-500",children:v.industry}),v.website&&u.jsxs("a",{href:v.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline flex items-center mt-1",children:[u.jsx(ey,{className:"w-4 h-4 mr-1"}),v.website]})]})]})}),h.length>0&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(gF,{className:"w-5 h-5 mr-2"}),"Subsidiaries"]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:h.map(C=>{var O,P,j,M;return u.jsxs(ce,{to:`/companies/${C.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[(j=(P=(O=C._embedded)==null?void 0:O["wp:featuredmedia"])==null?void 0:P[0])!=null&&j.source_url?u.jsx("img",{src:C._embedded["wp:featuredmedia"][0].source_url,alt:ir(C),className:"w-10 h-10 rounded object-contain bg-white"}):u.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded flex items-center justify-center",children:u.jsx(Rr,{className:"w-5 h-5 text-gray-400"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-sm font-medium",children:ir(C)}),((M=C.acf)==null?void 0:M.industry)&&u.jsx("p",{className:"text-xs text-gray-500",children:C.acf.industry})]})]},C.id)})})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(As,{className:"w-5 h-5 mr-2"}),"Current employees"]}),((N=c==null?void 0:c.current)==null?void 0:N.length)>0?u.jsx("div",{className:"space-y-2",children:c.current.map(C=>{var O;return u.jsxs(ce,{to:`/people/${C.id}`,className:"flex items-center p-2 rounded hover:bg-gray-50",children:[C.thumbnail?u.jsx("img",{src:C.thumbnail,alt:"",loading:"lazy",className:"w-8 h-8 rounded-full"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-gray-500",children:((O=C.name)==null?void 0:O[0])||"?"})}),u.jsxs("div",{className:"ml-2",children:[u.jsx("p",{className:"text-sm font-medium",children:C.name}),C.job_title&&u.jsx("p",{className:"text-xs text-gray-500",children:C.job_title})]})]},C.id)})}):u.jsx("p",{className:"text-sm text-gray-500",children:"No current employees."})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(As,{className:"w-5 h-5 mr-2"}),"Former employees"]}),((E=c==null?void 0:c.former)==null?void 0:E.length)>0?u.jsx("div",{className:"space-y-2",children:c.former.map(C=>{var O;return u.jsxs(ce,{to:`/people/${C.id}`,className:"flex items-center p-2 rounded hover:bg-gray-50",children:[C.thumbnail?u.jsx("img",{src:C.thumbnail,alt:"",loading:"lazy",className:"w-8 h-8 rounded-full opacity-75"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center opacity-75",children:u.jsx("span",{className:"text-xs text-gray-500",children:((O=C.name)==null?void 0:O[0])||"?"})}),u.jsxs("div",{className:"ml-2",children:[u.jsx("p",{className:"text-sm font-medium text-gray-700",children:C.name}),C.job_title&&u.jsx("p",{className:"text-xs text-gray-500",children:C.job_title})]})]},C.id)})}):u.jsx("p",{className:"text-sm text-gray-500",children:"No former employees."})]})]}),p.length>0&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(Ly,{className:"w-5 h-5 mr-2"}),"Investors"]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:p.map(C=>{const O=C.type==="person",P=O?`/people/${C.id}`:`/companies/${C.id}`;return u.jsxs(ce,{to:P,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[C.thumbnail?u.jsx("img",{src:C.thumbnail,alt:C.name,loading:"lazy",className:`w-10 h-10 object-cover ${O?"rounded-full":"rounded"}`}):u.jsx("div",{className:`w-10 h-10 bg-gray-100 flex items-center justify-center ${O?"rounded-full":"rounded"}`,children:O?u.jsx(el,{className:"w-5 h-5 text-gray-400"}):u.jsx(Rr,{className:"w-5 h-5 text-gray-400"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-sm font-medium",children:C.name}),u.jsx("p",{className:"text-xs text-gray-500",children:O?"Person":"Organization"})]})]},`${C.type}-${C.id}`)})})]}),m.length>0&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(Ly,{className:"w-5 h-5 mr-2"}),"Invested in"]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:m.map(C=>u.jsxs(ce,{to:`/companies/${C.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[C.thumbnail?u.jsx("img",{src:C.thumbnail,alt:C.name,loading:"lazy",className:"w-10 h-10 object-contain rounded"}):u.jsx("div",{className:"w-10 h-10 bg-gray-100 flex items-center justify-center rounded",children:u.jsx(Rr,{className:"w-5 h-5 text-gray-400"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-sm font-medium",children:C.name}),C.industry&&u.jsx("p",{className:"text-xs text-gray-500",children:C.industry})]})]},C.id))})]}),((k=v.contact_info)==null?void 0:k.length)>0&&u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"font-semibold mb-4",children:"Contact information"}),u.jsx("div",{className:"space-y-3",children:v.contact_info.map((C,O)=>u.jsxs("div",{children:[u.jsxs("span",{className:"text-sm text-gray-500",children:[C.contact_label||C.contact_type,":"]}),u.jsx("span",{className:"ml-2",children:C.contact_value})]},O))})]})]})}function gq(){var fe,we,Fe,Se,Oe,$e,pt,it,mt;const{id:t}=zs(),e=yn(),r=bt(),n=!!t,{data:i,isLoading:s}=dt({queryKey:["company",t],queryFn:async()=>(await We.getCompany(t,{_embed:!0})).data,enabled:n}),{data:o=[],isLoading:a}=dt({queryKey:["companies","all"],queryFn:async()=>(await We.getCompanies({per_page:100,_embed:!0})).data}),{data:l=[],isLoading:c}=dt({queryKey:["people","all"],queryFn:async()=>(await We.getPeople({per_page:100,_embed:!0})).data}),[d,h]=T.useState(!1),[f,p]=T.useState(!1),[m,g]=T.useState(""),[b,y]=T.useState(""),[v,w]=T.useState(!1),[x,S]=T.useState(""),[_,N]=T.useState([]),E=T.useRef(null),k=T.useRef(null),C=T.useRef(null),O=T.useMemo(()=>{const X=m.toLowerCase().trim();let ve=o.filter(He=>!(n&&He.id===parseInt(t)||n&&He.parent===parseInt(t)));return X&&(ve=ve.filter(He=>{var lt;return(lt=ir(He))==null?void 0:lt.toLowerCase().includes(X)})),[...ve].sort((He,lt)=>(ir(He)||"").localeCompare(ir(lt)||""))},[o,m,t,n]),P=T.useMemo(()=>o.find(X=>X.id===parseInt(b)),[o,b]),j=T.useMemo(()=>{const X=x.toLowerCase().trim(),ve=l.map(ke=>{var tt,xt,gt,$;return{id:ke.id,type:"person",name:Wn(((tt=ke.title)==null?void 0:tt.rendered)||""),thumbnail:($=(gt=(xt=ke._embedded)==null?void 0:xt["wp:featuredmedia"])==null?void 0:gt[0])==null?void 0:$.source_url}}),He=o.filter(ke=>!n||ke.id!==parseInt(t)).map(ke=>{var tt,xt,gt;return{id:ke.id,type:"company",name:ir(ke),thumbnail:(gt=(xt=(tt=ke._embedded)==null?void 0:tt["wp:featuredmedia"])==null?void 0:xt[0])==null?void 0:gt.source_url}});let lt=[...ve,...He];X&&(lt=lt.filter(ke=>{var tt;return(tt=ke.name)==null?void 0:tt.toLowerCase().includes(X)}));const It=_.map(ke=>`${ke.type}-${ke.id}`);return lt=lt.filter(ke=>!It.includes(`${ke.type}-${ke.id}`)),lt.sort((ke,tt)=>(ke.name||"").localeCompare(tt.name||""))},[l,o,x,_,t,n]);T.useEffect(()=>{const X=ve=>{k.current&&!k.current.contains(ve.target)&&p(!1)};if(f)return document.addEventListener("mousedown",X),()=>document.removeEventListener("mousedown",X)},[f]),T.useEffect(()=>{const X=ve=>{C.current&&!C.current.contains(ve.target)&&w(!1)};if(v)return document.addEventListener("mousedown",X),()=>document.removeEventListener("mousedown",X)},[v]);const M=ft({mutationFn:X=>We.createCompany(X),onSuccess:X=>{r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["dashboard"]}),e(`/companies/${X.data.id}`)}}),A=ft({mutationFn:X=>We.updateCompany(t,X),onSuccess:()=>{r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["people"]}),r.invalidateQueries({queryKey:["dashboard"]}),e(`/companies/${t}`)}}),I=async X=>{var He;const ve=(He=X.target.files)==null?void 0:He[0];if(ve){if(!ve.type.startsWith("image/")){alert("Please select an image file");return}if(ve.size>5*1024*1024){alert("Image size must be less than 5MB");return}h(!0);try{await Le.uploadCompanyLogo(t,ve),r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["people"]}),r.refetchQueries({queryKey:["company",t]}),r.refetchQueries({queryKey:["companies"]}),r.refetchQueries({queryKey:["people"]})}catch(lt){console.error("Failed to upload logo:",lt),alert("Failed to upload logo. Please try again.")}finally{h(!1),E.current&&(E.current.value="")}}},{register:L,handleSubmit:F,reset:W,formState:{errors:B,isSubmitting:U}}=Wc();T.useEffect(()=>{var X,ve,He;i&&(W({title:Wn(((X=i.title)==null?void 0:X.rendered)||""),website:((ve=i.acf)==null?void 0:ve.website)||"",industry:((He=i.acf)==null?void 0:He.industry)||""}),i.parent&&y(String(i.parent)))},[i,W]),T.useEffect(()=>{var X,ve;if(((ve=(X=i==null?void 0:i.acf)==null?void 0:X.investors)==null?void 0:ve.length)>0&&l.length>0&&o.length>0){const lt=i.acf.investors.map(It=>{var xt,gt,$,q,V,oe,Z;const ke=l.find(J=>J.id===It);if(ke)return{id:ke.id,type:"person",name:Wn(((xt=ke.title)==null?void 0:xt.rendered)||""),thumbnail:(q=($=(gt=ke._embedded)==null?void 0:gt["wp:featuredmedia"])==null?void 0:$[0])==null?void 0:q.source_url};const tt=o.find(J=>J.id===It);return tt?{id:tt.id,type:"company",name:ir(tt),thumbnail:(Z=(oe=(V=tt._embedded)==null?void 0:V["wp:featuredmedia"])==null?void 0:oe[0])==null?void 0:Z.source_url}:null}).filter(Boolean);N(lt)}},[i,l,o]),yi(n&&i?`Edit ${ir(i)||"organization"}`:"New organization");const K=async X=>{const ve=_.map(lt=>lt.id),He={title:X.title,status:"publish",parent:b?parseInt(b):0,acf:{website:X.website,industry:X.industry,investors:ve}};n?A.mutate(He):M.mutate(He)};return n&&s?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs(ce,{to:"/companies",className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(zi,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to organizations"})]})}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h1",{className:"text-xl font-bold mb-6",children:n?"Edit organization":"Add new organization"}),u.jsxs("form",{onSubmit:F(K),className:"space-y-6",children:[n&&u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Logo"}),u.jsxs("div",{className:"flex items-center gap-4",children:[(Fe=(we=(fe=i==null?void 0:i._embedded)==null?void 0:fe["wp:featuredmedia"])==null?void 0:we[0])!=null&&Fe.source_url?u.jsxs("div",{className:"relative group",children:[u.jsx("img",{src:i._embedded["wp:featuredmedia"][0].source_url,alt:ir(i)||"Organization logo",className:"w-20 h-20 rounded-lg object-contain bg-white"}),u.jsx("div",{className:"absolute inset-0 rounded-lg bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var X;return(X=E.current)==null?void 0:X.click()},children:d?u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):u.jsx(Ef,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}):u.jsxs("div",{className:"relative group",children:[u.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-lg flex items-center justify-center",children:u.jsx(Ef,{className:"w-8 h-8 text-gray-400"})}),u.jsx("div",{className:"absolute inset-0 rounded-lg bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var X;return(X=E.current)==null?void 0:X.click()},children:d?u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):u.jsx(Ef,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),u.jsxs("div",{children:[u.jsx("button",{type:"button",onClick:()=>{var X;return(X=E.current)==null?void 0:X.click()},className:"btn-secondary text-sm",disabled:d,children:($e=(Oe=(Se=i==null?void 0:i._embedded)==null?void 0:Se["wp:featuredmedia"])==null?void 0:Oe[0])!=null&&$e.source_url?"Change logo":"Upload logo"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Click the logo or button to upload a new logo"})]}),u.jsx("input",{ref:E,type:"file",accept:"image/*",onChange:I,className:"hidden",disabled:d})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Organization name *"}),u.jsx("input",{...L("title",{required:"Organization name is required"}),className:"input",placeholder:"Acme Inc."}),B.title&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:B.title.message})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Website"}),u.jsx("input",{...L("website"),type:"url",className:"input",placeholder:"https://example.com"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Industry"}),u.jsx("input",{...L("industry"),className:"input",placeholder:"Technology"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Parent organization"}),u.jsxs("div",{className:"relative",ref:k,children:[u.jsxs("button",{type:"button",onClick:()=>p(!f),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:a,children:[P?u.jsxs("div",{className:"flex items-center gap-2",children:[(mt=(it=(pt=P._embedded)==null?void 0:pt["wp:featuredmedia"])==null?void 0:it[0])!=null&&mt.source_url?u.jsx("img",{src:P._embedded["wp:featuredmedia"][0].source_url,alt:ir(P),className:"w-6 h-6 rounded object-contain bg-white"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center",children:u.jsx(Rr,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-gray-900",children:ir(P)})]}):u.jsx("span",{className:"text-gray-400",children:"No parent organization"}),u.jsx(qy,{className:`w-4 h-4 text-gray-400 transition-transform ${f?"rotate-180":""}`})]}),f&&u.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[u.jsx("div",{className:"p-2 border-b border-gray-100",children:u.jsxs("div",{className:"relative",children:[u.jsx(wc,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{type:"text",value:m,onChange:X=>g(X.target.value),placeholder:"Search organizations...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),u.jsxs("div",{className:"overflow-y-auto max-h-48",children:[u.jsx("button",{type:"button",onClick:()=>{y(""),p(!1),g("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${b?"":"bg-primary-50"}`,children:u.jsx("span",{className:"text-sm text-gray-500 italic",children:"No parent organization"})}),a?u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):O.length>0?O.map(X=>{var ve,He,lt;return u.jsxs("button",{type:"button",onClick:()=>{y(String(X.id)),p(!1),g("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${b===String(X.id)?"bg-primary-50":""}`,children:[(lt=(He=(ve=X._embedded)==null?void 0:ve["wp:featuredmedia"])==null?void 0:He[0])!=null&&lt.source_url?u.jsx("img",{src:X._embedded["wp:featuredmedia"][0].source_url,alt:ir(X),className:"w-6 h-6 rounded object-contain bg-white"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center",children:u.jsx(Rr,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-sm text-gray-900 truncate",children:ir(X)})]},X.id)}):u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"No organizations found"})]})]})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select if this organization is a subsidiary or division of another"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"label flex items-center",children:[u.jsx(Ly,{className:"w-4 h-4 mr-2"}),"Investors"]}),_.length>0&&u.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:_.map(X=>u.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-100 rounded-full pl-1 pr-2 py-1",children:[X.thumbnail?u.jsx("img",{src:X.thumbnail,alt:X.name,className:`w-5 h-5 object-cover ${X.type==="person"?"rounded-full":"rounded"}`}):u.jsx("div",{className:`w-5 h-5 bg-gray-300 flex items-center justify-center ${X.type==="person"?"rounded-full":"rounded"}`,children:X.type==="person"?u.jsx(el,{className:"w-3 h-3 text-gray-500"}):u.jsx(Rr,{className:"w-3 h-3 text-gray-500"})}),u.jsx("span",{className:"text-sm text-gray-700",children:X.name}),u.jsx("button",{type:"button",onClick:()=>N(ve=>ve.filter(He=>!(He.id===X.id&&He.type===X.type))),className:"ml-1 text-gray-400 hover:text-gray-600",children:u.jsx(Lr,{className:"w-3.5 h-3.5"})})]},`${X.type}-${X.id}`))}),u.jsxs("div",{className:"relative",ref:C,children:[u.jsxs("button",{type:"button",onClick:()=>w(!v),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:a||c,children:[u.jsx("span",{className:"text-gray-400",children:"Add investor..."}),u.jsx(qy,{className:`w-4 h-4 text-gray-400 transition-transform ${v?"rotate-180":""}`})]}),v&&u.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[u.jsx("div",{className:"p-2 border-b border-gray-100",children:u.jsxs("div",{className:"relative",children:[u.jsx(wc,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{type:"text",value:x,onChange:X=>S(X.target.value),placeholder:"Search people and organizations...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),u.jsx("div",{className:"overflow-y-auto max-h-48",children:a||c?u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):j.length>0?j.map(X=>u.jsxs("button",{type:"button",onClick:()=>{N(ve=>[...ve,X]),S("")},className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors",children:[X.thumbnail?u.jsx("img",{src:X.thumbnail,alt:X.name,className:`w-6 h-6 object-cover ${X.type==="person"?"rounded-full":"rounded"}`}):u.jsx("div",{className:`w-6 h-6 bg-gray-200 flex items-center justify-center ${X.type==="person"?"rounded-full":"rounded"}`,children:X.type==="person"?u.jsx(el,{className:"w-4 h-4 text-gray-500"}):u.jsx(Rr,{className:"w-4 h-4 text-gray-500"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("span",{className:"text-sm text-gray-900 truncate block",children:X.name}),u.jsx("span",{className:"text-xs text-gray-500",children:X.type==="person"?"Person":"Organization"})]})]},`${X.type}-${X.id}`)):u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:x?"No results found":"No people or organizations available"})})]})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select people or organizations that have invested in this company"})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[u.jsx(ce,{to:"/companies",className:"btn-secondary",children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary",disabled:U,children:[u.jsx(Mo,{className:"w-4 h-4 mr-2"}),n?"Save changes":"Create organization"]})]})]})]})]})}function a_e({person:t,dateType:e}){var r;return u.jsx("div",{className:"flex items-center gap-3 py-2",children:u.jsxs(ce,{to:`/people/${t.id}`,className:"flex items-center gap-3 flex-1 min-w-0 hover:opacity-80",children:[t.thumbnail?u.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}):u.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:u.jsx("span",{className:"text-sm font-medium text-gray-500",children:(r=t.name)==null?void 0:r[0]})}),u.jsx("span",{className:"font-medium truncate",children:t.name}),u.jsx("span",{className:"text-sm text-gray-500 capitalize flex-shrink-0",children:e})]})})}function l_e({dates:t}){const e=t[0],n=e.days_until===0?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600",i=[];return t.forEach(s=>{var a,l;const o=((a=s.date_type)==null?void 0:a[0])||"Date";((l=s.related_people)==null?void 0:l.length)>0?s.related_people.forEach(c=>{i.push({person:c,dateType:o})}):i.push({person:{id:null,name:s.title,thumbnail:null},dateType:o})}),u.jsx("div",{className:"card p-4 break-inside-avoid mb-4",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:`w-14 h-14 rounded-lg ${n} flex items-center justify-center flex-shrink-0`,children:u.jsx("span",{className:"text-2xl font-bold leading-none",children:Nn(new Date(e.next_occurrence),"d")})}),u.jsx("div",{className:"flex-1 min-w-0 divide-y divide-gray-100",children:i.map(({person:s,dateType:o},a)=>u.jsx(a_e,{person:s,dateType:o},s.id?`${s.id}-${o}`:`${a}-${o}`))})]})})}function c_e(){const{data:t,isLoading:e,error:r}=Jfe(365),n=(t==null?void 0:t.reduce((s,o)=>{const a=Nn(new Date(o.next_occurrence),"yyyy-MM-dd");return s[a]||(s[a]=[]),s[a].push(o),s},{}))||{},i=Object.entries(n).reduce((s,[o,a])=>{const l=Nn(new Date(o),"MMMM yyyy");return s[l]||(s[l]=[]),s[l].push(a),s},{});return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("p",{className:"text-gray-600",children:[(t==null?void 0:t.length)||0," upcoming dates"]}),u.jsxs(ce,{to:"/dates/new",className:"btn-primary",children:[u.jsx(or,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add date"})]})]}),e&&u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),r&&u.jsx("div",{className:"card p-6 text-center",children:u.jsx("p",{className:"text-red-600",children:"Failed to load dates."})}),!e&&!r&&(t==null?void 0:t.length)===0&&u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx(yo,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-medium mb-1",children:"No important dates"}),u.jsx("p",{className:"text-gray-500 mb-4",children:"Add birthdays, anniversaries, and more."}),u.jsxs(ce,{to:"/dates/new",className:"btn-primary",children:[u.jsx(or,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add date"})]})]}),Object.entries(i).map(([s,o])=>u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:s}),u.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 gap-4",children:o.map(a=>u.jsx(l_e,{dates:a},a[0].next_occurrence))})]},s))]})}function u_e({value:t=[],onChange:e,people:r=[],isLoading:n}){const[i,s]=T.useState(""),o=T.useMemo(()=>{if(!i)return r.slice(0,10);const d=i.toLowerCase();return r.filter(h=>ec(h).toLowerCase().includes(d)).slice(0,10)},[r,i]),a=T.useMemo(()=>t.map(d=>r.find(h=>h.id===d)).filter(Boolean),[t,r]),l=d=>{t.includes(d)||e([...t,d]),s("")},c=d=>{e(t.filter(h=>h!==d))};return u.jsxs("div",{className:"space-y-2",children:[a.length>0&&u.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(d=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-primary-100 text-primary-800 rounded-full text-sm",children:[ec(d),u.jsx("button",{type:"button",onClick:()=>c(d.id),className:"hover:text-primary-600",children:u.jsx(Lr,{className:"w-3 h-3"})})]},d.id))}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",value:i,onChange:d=>s(d.target.value),placeholder:"Search for people...",className:"input",disabled:n}),i&&u.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:o.length>0?o.map(d=>u.jsx("button",{type:"button",onClick:()=>l(d.id),disabled:t.includes(d.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t.includes(d.id)?"opacity-50 cursor-not-allowed":""}`,children:ec(d)},d.id)):u.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No people found"})})]})]})}function yq(){var W;const{id:t}=zs(),[e]=y0(),r=yn(),n=bt(),i=!!t,s=e.get("person"),o=e.get("type"),{data:a,isLoading:l}=dt({queryKey:["important-date",t],queryFn:async()=>(await We.getDate(t)).data,enabled:i}),c=T.useMemo(()=>{var U;if(!((U=a==null?void 0:a.acf)!=null&&U.related_people))return[];const B=a.acf.related_people;return Array.isArray(B)?B.map(K=>parseInt(typeof K=="object"&&K!==null?K.ID||K.id||K.post_id:K,10)).filter(K=>!isNaN(K)&&K>0):[]},[a]),{data:d=[],isLoading:h}=Bc({orderby:"title",order:"asc"}),{data:f=[]}=dt({queryKey:["people","specific",c],queryFn:async()=>{const B=c.map(K=>We.getPerson(K,{_embed:!0}).then(fe=>fe.data).catch(()=>null));return(await Promise.all(B)).filter(Boolean)},enabled:c.length>0}),p=T.useMemo(()=>{const B=new Map;return d.forEach(U=>B.set(U.id,U)),f.forEach(U=>{var fe,we,Fe,Se,Oe,$e,pt,it,mt,X,ve,He,lt,It,ke,tt;const K={...U,id:U.id,name:ec(U),first_name:((fe=U.acf)==null?void 0:fe.first_name)||"",last_name:((we=U.acf)==null?void 0:we.last_name)||"",is_favorite:((Fe=U.acf)==null?void 0:Fe.is_favorite)||!1,thumbnail:(($e=(Oe=(Se=U._embedded)==null?void 0:Se["wp:featuredmedia"])==null?void 0:Oe[0])==null?void 0:$e.source_url)||((He=(ve=(X=(mt=(it=(pt=U._embedded)==null?void 0:pt["wp:featuredmedia"])==null?void 0:it[0])==null?void 0:mt.media_details)==null?void 0:X.sizes)==null?void 0:ve.thumbnail)==null?void 0:He.source_url)||null,labels:((tt=(ke=(It=(lt=U._embedded)==null?void 0:lt["wp:term"])==null?void 0:It.flat())==null?void 0:ke.filter(xt=>(xt==null?void 0:xt.taxonomy)==="person_label"))==null?void 0:tt.map(xt=>xt.name))||[]};B.set(K.id,K)}),Array.from(B.values())},[d,f]),{data:m=[]}=dt({queryKey:["date-types"],queryFn:async()=>((await We.getDateTypes()).data||[]).sort((K,fe)=>{const we=K.name||"",Fe=fe.name||"";return we.localeCompare(Fe)})}),g=ft({mutationFn:B=>We.createDate(B),onSuccess:()=>{n.invalidateQueries({queryKey:["reminders"]}),r(s?`/people/${s}`:"/dates")}}),b=ft({mutationFn:B=>We.updateDate(t,B),onSuccess:()=>{n.invalidateQueries({queryKey:["reminders"]}),n.invalidateQueries({queryKey:["important-date",t]}),n.invalidateQueries({queryKey:["people"]});const B=x("related_people");(B==null?void 0:B.length)>0?r(`/people/${B[0]}`):r("/dates")}}),{register:y,handleSubmit:v,reset:w,watch:x,setValue:S,control:_,formState:{errors:N,isSubmitting:E}}=Wc({defaultValues:{title:"",date_value:"",date_type:"",related_people:[],is_recurring:!0,year_unknown:!1}}),k=x("related_people"),C=x("date_type"),O=x("title");T.useEffect(()=>{var K;if((!O||["'s Birthday","Wedding of "].some(fe=>O.endsWith(fe)||O.startsWith(fe)))&&(k==null?void 0:k.length)>0&&C){const fe=m.find(Oe=>Oe.id===parseInt(C)),we=(fe==null?void 0:fe.name)||"",Fe=((K=fe==null?void 0:fe.slug)==null?void 0:K.toLowerCase())||we.toLowerCase(),Se=k.map(Oe=>{var pt,it,mt;const $e=p.find(X=>X.id===Oe);return $e?Wn(((pt=$e.acf)==null?void 0:pt.first_name)||((mt=(it=$e.title)==null?void 0:it.rendered)==null?void 0:mt.split(" ")[0])||""):null}).filter(Boolean);if(Se.length>0&&we){let Oe;Fe==="wedding"?Se.length>=2?Oe=`Wedding of ${Se[0]} & ${Se[1]}`:Oe=`Wedding of ${Se[0]}`:Oe=`${Se[0]}'s ${we}`,S("title",Oe)}}},[k,C,p,m,S,O]);const[P,j]=T.useState(!1);T.useEffect(()=>{var U,K,fe,we,Fe,Se;if(P&&!i)return;const B=c.length===0||f.length>0;if(a&&p.length>0&&B){let Oe=[];const $e=(U=a.acf)==null?void 0:U.related_people;$e&&(Array.isArray($e)?Oe=$e.map(it=>parseInt(typeof it=="object"&&it!==null?it.ID||it.id||it.post_id:it,10)).filter(it=>!isNaN(it)&&it>0):typeof $e=="number"&&(Oe=[$e]));let pt="";((K=a.date_type)==null?void 0:K.length)>0&&(pt=a.date_type[0].toString()),w({title:Wn(((fe=a.title)==null?void 0:fe.rendered)||""),date_value:((we=a.acf)==null?void 0:we.date_value)||"",date_type:pt,related_people:Oe,is_recurring:((Fe=a.acf)==null?void 0:Fe.is_recurring)??!0,year_unknown:((Se=a.acf)==null?void 0:Se.year_unknown)??!1}),j(!0)}else if(!i&&p.length>0&&m.length>0){const Oe={title:"",date_value:"",date_type:"",related_people:[],is_recurring:!0,year_unknown:!1};if(s&&(Oe.related_people=[parseInt(s)]),o){const $e=m.find(pt=>pt.slug===o||pt.name.toLowerCase()===o.toLowerCase());$e&&(Oe.date_type=$e.id.toString())}w(Oe),j(!0)}},[a,w,i,s,o,m,p,c,f,P]),yi(i&&a?`Edit ${((W=a.title)==null?void 0:W.rendered)||a.title||"date"}`:"New date");const M=async B=>{const U={title:B.title,status:"publish",date_type:B.date_type?[parseInt(B.date_type)]:[],acf:{date_value:B.date_value,related_people:B.related_people,is_recurring:B.is_recurring,year_unknown:B.year_unknown}};i?b.mutate(U):g.mutate(U)};if(i&&l)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});const A=x("related_people"),I=i&&(A==null?void 0:A.length)>0?A[0]:s,L=I?`/people/${I}`:"/dates",F=I?"Back to person":"Back to dates";return u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs(ce,{to:L,className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(zi,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:F})]})}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h1",{className:"text-xl font-bold mb-6",children:i?"Edit date":"Add new date"}),u.jsxs("form",{onSubmit:v(M),className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Related people"}),u.jsx(Dv,{name:"related_people",control:_,render:({field:B})=>u.jsx(u_e,{value:B.value,onChange:B.onChange,people:p,isLoading:h})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Date type *"}),u.jsx(Dv,{name:"date_type",control:_,rules:{required:"Please select a date type"},render:({field:B})=>{const U=B.value?String(B.value):"";return u.jsxs("select",{value:U,onChange:K=>{const fe=K.target.value;B.onChange(fe)},onBlur:B.onBlur,name:B.name,ref:B.ref,className:"input",children:[u.jsx("option",{value:"",children:"Select a type..."}),m.map(K=>u.jsx("option",{value:String(K.id),children:K.name},K.id))]})}}),N.date_type&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:N.date_type.message})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Label"}),u.jsx("input",{...y("title"),className:"input",placeholder:"e.g., Mom's Birthday, Wedding Anniversary"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-generated from person and date type. You can customize it."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Date *"}),u.jsx("input",{...y("date_value",{required:"Date is required"}),type:"date",className:"input"}),N.date_value&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:N.date_value.message})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:"year_unknown",...y("year_unknown"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),u.jsx("label",{htmlFor:"year_unknown",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Year unknown"})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:"is_recurring",...y("is_recurring"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),u.jsx("label",{htmlFor:"is_recurring",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Repeats every year"})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[u.jsx(ce,{to:L,className:"btn-secondary",children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary",disabled:E,children:[u.jsx(Mo,{className:"w-4 h-4 mr-2"}),i?"Save changes":"Create date"]})]})]})]})]})}function d_e(){yi("Todos");const[t,e]=T.useState(!1),[r,n]=T.useState(null),[i,s]=T.useState(!1),[o,a]=T.useState(!1),[l,c]=T.useState(null),[d,h]=T.useState(!1),[f,p]=T.useState(!1),[m,g]=T.useState(null),{data:b,isLoading:y}=Ete(!0),v=Nte(),w=Zfe(),x=tM(),S=T.useMemo(()=>Fte(new Date,3),[]),{incompleteTodos:_,recentlyCompletedTodos:N,olderCompletedTodos:E}=T.useMemo(()=>{if(!b)return{incompleteTodos:[],recentlyCompletedTodos:[],olderCompletedTodos:[]};const I=[],L=[],F=[];return b.forEach(W=>{if(!W.is_completed)I.push(W);else try{const B=dp(W.created);Mme(B,S)?L.push(W):F.push(W)}catch{F.push(W)}}),{incompleteTodos:I,recentlyCompletedTodos:L,olderCompletedTodos:F}},[b,S]),k=I=>{if(!I.is_completed){c(I),h(!0);return}v.mutate({todoId:I.id,data:{content:I.content,due_date:I.due_date,is_completed:!1}})},C=()=>{l&&(v.mutate({todoId:l.id,data:{content:l.content,due_date:l.due_date,is_completed:!0}}),h(!1),c(null))},O=()=>{if(!l)return;const I=new Date().toISOString().split("T")[0];g({content:l.content,activity_date:I,activity_type:"note",participants:[]}),h(!1),p(!0)},P=async I=>{if(l)try{await x.mutateAsync({personId:l.person_id,data:I}),await v.mutateAsync({todoId:l.id,data:{content:l.content,due_date:l.due_date,is_completed:!0}}),p(!1),c(null),g(null)}catch(L){console.error("Failed to create activity:",L),alert("Failed to create activity. Please try again.")}},j=async I=>{r&&(await v.mutateAsync({todoId:r.id,data:I}),s(!1),n(null))},M=async I=>{window.confirm("Are you sure you want to delete this todo?")&&await w.mutateAsync(I)};if(y)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});const A=[...N,...E];return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsx("h1",{className:"text-2xl font-bold",children:"Todos"}),u.jsxs("div",{className:"flex items-center gap-2",children:[E.length>0&&u.jsxs("button",{onClick:()=>e(!t),className:`btn-secondary text-sm flex items-center gap-2 ${t?"bg-primary-50 border-primary-300":""}`,children:[u.jsx(VP,{className:"w-4 h-4"}),t?"Hide older":"Show all completed"]}),u.jsxs("button",{onClick:()=>a(!0),className:"btn-primary text-sm flex items-center gap-2",children:[u.jsx(or,{className:"w-4 h-4"}),"Add todo"]})]})]}),u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(jd,{className:"w-5 h-5 mr-2 text-gray-500"}),"Open todos (",_.length,")"]})}),_.length>0?u.jsx("div",{className:"divide-y divide-gray-100",children:_.map(I=>u.jsx(V1,{todo:I,onToggle:k,onEdit:L=>{n(L),s(!0)},onDelete:M},I.id))}):u.jsxs("div",{className:"p-8 text-center",children:[u.jsx(Ds,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),u.jsx("p",{className:"text-gray-500",children:"No open todos"}),u.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Create todos from a person's detail page"})]})]}),N.length>0&&!t&&u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(kfe,{className:"w-5 h-5 mr-2 text-primary-600"}),"Recently completed (",N.length,")"]})}),u.jsx("div",{className:"divide-y divide-gray-100",children:N.map(I=>u.jsx(V1,{todo:I,onToggle:k,onEdit:L=>{n(L),s(!0)},onDelete:M},I.id))})]}),t&&A.length>0&&u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(Ds,{className:"w-5 h-5 mr-2 text-primary-600"}),"All completed todos (",A.length,")"]})}),u.jsx("div",{className:"divide-y divide-gray-100",children:A.map(I=>u.jsx(V1,{todo:I,onToggle:k,onEdit:L=>{n(L),s(!0)},onDelete:M},I.id))})]}),u.jsx(Cie,{isOpen:i,onClose:()=>{s(!1),n(null)},onSubmit:j,isLoading:v.isPending,todo:r}),u.jsx(Tte,{isOpen:o,onClose:()=>a(!1)}),u.jsx(rM,{isOpen:d,onClose:()=>{h(!1),c(null)},todo:l,onComplete:C,onCompleteAsActivity:O}),u.jsx(VM,{isOpen:f,onClose:()=>{p(!1),c(null),g(null)},onSubmit:P,isLoading:x.isPending,personId:l==null?void 0:l.person_id,initialData:m})]})}function V1({todo:t,onToggle:e,onEdit:r,onDelete:n}){var s;const i=em(t);return u.jsxs("div",{className:"flex items-start p-4 hover:bg-gray-50 transition-colors group",children:[u.jsx("button",{onClick:()=>e(t),className:"mt-0.5 mr-3 flex-shrink-0",title:t.is_completed?"Mark as incomplete":"Mark as complete",children:t.is_completed?u.jsx(Ds,{className:"w-5 h-5 text-primary-600"}):u.jsx(jd,{className:`w-5 h-5 ${i?"text-red-600":"text-gray-400"}`})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:`text-sm ${t.is_completed?"line-through text-gray-400":i?"text-red-600 font-medium":"text-gray-900"}`,children:t.content}),u.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-2",children:[u.jsxs(ce,{to:`/people/${t.person_id}`,className:"flex items-center gap-2 text-xs text-primary-600 hover:text-primary-700 hover:underline",children:[t.person_thumbnail?u.jsx("img",{src:t.person_thumbnail,alt:t.person_name,className:"w-5 h-5 rounded-full object-cover"}):u.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-gray-500",children:(s=t.person_name)==null?void 0:s[0]})}),t.person_name]}),t.due_date&&u.jsxs("span",{className:`text-xs ${i&&!t.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",Nn(new Date(t.due_date),"MMM d, yyyy"),i&&!t.is_completed&&" (overdue)"]})]})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx("button",{onClick:()=>r(t),className:"p-1 hover:bg-gray-100 rounded",title:"Edit todo",children:u.jsx(na,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>n(t.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete todo",children:u.jsx(ai,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})}function h_e(){var y,v,w;const[t,e]=T.useState(null),[r,n]=T.useState(""),[i,s]=T.useState(!1),[o,a]=T.useState(null),l=bt(),c=ft({mutationFn:async x=>{const S=new FormData;return S.append("file",x),(await le.post("/prm/v1/import/monica/validate",S,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:x=>{a(x)},onError:x=>{var S,_;a({valid:!1,error:((_=(S=x.response)==null?void 0:S.data)==null?void 0:_.message)||"Failed to validate file"})}}),d=ft({mutationFn:async({file:x,monicaUrl:S})=>{const _=new FormData;return _.append("file",x),_.append("monica_url",S),(await le.post("/prm/v1/import/monica",_,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{l.invalidateQueries({queryKey:["people"]}),l.invalidateQueries({queryKey:["companies"]}),l.invalidateQueries({queryKey:["dates"]}),l.invalidateQueries({queryKey:["dashboard"]})}}),h=T.useCallback(x=>{x.preventDefault(),x.stopPropagation(),x.type==="dragenter"||x.type==="dragover"?s(!0):x.type==="dragleave"&&s(!1)},[]),f=T.useCallback(x=>{x.preventDefault(),x.stopPropagation(),s(!1),x.dataTransfer.files&&x.dataTransfer.files[0]&&m(x.dataTransfer.files[0])},[]),p=x=>{x.target.files&&x.target.files[0]&&m(x.target.files[0])},m=x=>{if(!x.name.endsWith(".sql")){a({valid:!1,error:"Please select a SQL file"});return}e(x),a(null),d.reset(),c.mutate(x)},g=()=>{if(!r.trim()){a(x=>({...x,urlError:"Please enter your Monica instance URL"}));return}t&&(o!=null&&o.valid)&&d.mutate({file:t,monicaUrl:r.trim()})},b=()=>{e(null),n(""),a(null),c.reset(),d.reset()};return u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Import from Monica"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts, relationships, notes, and photos from a Monica CRM SQL export file. Reimporting the same file will update existing contacts instead of creating duplicates."}),d.isSuccess?u.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Od,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),u.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[u.jsxs("p",{children:["Contacts imported: ",d.data.stats.contacts_imported]}),u.jsxs("p",{children:["Contacts updated: ",d.data.stats.contacts_updated]}),u.jsxs("p",{children:["Contacts skipped (partial): ",d.data.stats.contacts_skipped]}),u.jsxs("p",{children:["Photos imported: ",d.data.stats.photos_imported]}),u.jsxs("p",{children:["Organizations created: ",d.data.stats.companies_created]}),u.jsxs("p",{children:["Relationships created: ",d.data.stats.relationships_created]}),u.jsxs("p",{children:["Important dates created: ",d.data.stats.dates_created]}),u.jsxs("p",{children:["Notes created: ",d.data.stats.notes_created]}),((y=d.data.stats.errors)==null?void 0:y.length)>0&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[u.jsx("p",{className:"font-medium",children:"Errors:"}),u.jsx("ul",{className:"list-disc list-inside",children:d.data.stats.errors.map((x,S)=>u.jsx("li",{children:x},S))})]})]}),u.jsx("button",{onClick:b,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${i?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:f,children:[u.jsx("input",{type:"file",accept:".sql",onChange:p,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),c.isPending?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(xc,{className:"h-8 w-8 text-primary-600 animate-spin"}),u.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(Jp,{className:"h-8 w-8 text-green-600"}),u.jsx("p",{className:"font-medium text-gray-900",children:t.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024/1024).toFixed(2)," MB"]})]}):u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(Sc,{className:"h-8 w-8 text-gray-400"}),u.jsx("p",{className:"text-gray-600",children:"Drag and drop your Monica SQL export file here, or click to browse"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Supports SQL export files"})]})]}),o&&u.jsx("div",{className:`rounded-lg border p-4 ${o.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:o.valid?u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Od,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),u.jsxs("div",{className:"mt-2 text-sm text-green-800",children:[u.jsxs("p",{children:["Export format: ",o.version]}),u.jsxs("p",{children:["Contacts to import: ",o.summary.contacts]}),u.jsxs("p",{children:["Relationships: ",o.summary.relationships]}),u.jsxs("p",{children:["Notes: ",o.summary.notes]}),u.jsxs("p",{children:["Dates: ",o.summary.reminders]}),u.jsxs("p",{children:["Photos: ",o.summary.photos]}),u.jsxs("p",{children:["Organizations: ",o.summary.companies_count]})]})]})]}):u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Ro,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:o.error})]})]})}),(o==null?void 0:o.valid)&&u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{htmlFor:"monica-url",className:"block text-sm font-medium text-gray-700",children:"Monica Instance URL"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(JR,{className:"h-4 w-4 text-gray-400"})}),u.jsx("input",{type:"url",id:"monica-url",value:r,onChange:x=>n(x.target.value),placeholder:"https://your-monica-instance.com",className:`block w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ${o.urlError?"border-red-300":"border-gray-300"}`})]}),o.urlError&&u.jsx("p",{className:"text-sm text-red-600",children:o.urlError}),u.jsx("p",{className:"text-xs text-gray-500",children:"Enter the URL of your Monica instance to import photos. Photos will be downloaded from this URL."})]}),(o==null?void 0:o.valid)&&u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:g,disabled:d.isPending,className:"btn-primary flex items-center gap-2",children:d.isPending?u.jsxs(u.Fragment,{children:[u.jsx(xc,{className:"h-4 w-4 animate-spin"}),u.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(Sc,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),u.jsx("button",{onClick:b,disabled:d.isPending,className:"btn-secondary",children:"Cancel"})]}),d.isError&&u.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Ro,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:((w=(v=d.error.response)==null?void 0:v.data)==null?void 0:w.message)||"An error occurred during import"})]})]})})]})]})}function f_e(){var g,b,y;const[t,e]=T.useState(null),[r,n]=T.useState(!1),[i,s]=T.useState(null),o=bt(),a=ft({mutationFn:async v=>{const w=new FormData;return w.append("file",v),(await le.post("/prm/v1/import/vcard/validate",w,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:v=>{s(v)},onError:v=>{var w,x;s({valid:!1,error:((x=(w=v.response)==null?void 0:w.data)==null?void 0:x.message)||"Failed to validate file"})}}),l=ft({mutationFn:async v=>{const w=new FormData;return w.append("file",v),(await le.post("/prm/v1/import/vcard",w,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{o.invalidateQueries({queryKey:["people"]}),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["dates"]}),o.invalidateQueries({queryKey:["dashboard"]})}}),c=T.useCallback(v=>{v.preventDefault(),v.stopPropagation(),v.type==="dragenter"||v.type==="dragover"?n(!0):v.type==="dragleave"&&n(!1)},[]),d=T.useCallback(v=>{v.preventDefault(),v.stopPropagation(),n(!1),v.dataTransfer.files&&v.dataTransfer.files[0]&&f(v.dataTransfer.files[0])},[]),h=v=>{v.target.files&&v.target.files[0]&&f(v.target.files[0])},f=v=>{const w=v.name.split(".").pop().toLowerCase();if(w!=="vcf"&&w!=="vcard"){s({valid:!1,error:"Please select a vCard file (.vcf)"});return}e(v),s(null),l.reset(),a.mutate(v)},p=()=>{t&&(i!=null&&i.valid)&&l.mutate(t)},m=()=>{e(null),s(null),a.reset(),l.reset()};return u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Import from vCard"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts from a vCard (.vcf) file. vCard is a standard format supported by most contact apps including Apple Contacts, Outlook, and Android. Files can contain one or multiple contacts."}),l.isSuccess?u.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Od,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),u.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[u.jsxs("p",{children:["Contacts imported: ",l.data.stats.contacts_imported]}),u.jsxs("p",{children:["Contacts updated: ",l.data.stats.contacts_updated]}),u.jsxs("p",{children:["Contacts skipped: ",l.data.stats.contacts_skipped]}),u.jsxs("p",{children:["Photos imported: ",l.data.stats.photos_imported]}),u.jsxs("p",{children:["Organizations created: ",l.data.stats.companies_created]}),u.jsxs("p",{children:["Birthdays created: ",l.data.stats.dates_created]}),u.jsxs("p",{children:["Notes created: ",l.data.stats.notes_created]}),((g=l.data.stats.errors)==null?void 0:g.length)>0&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[u.jsx("p",{className:"font-medium",children:"Errors:"}),u.jsx("ul",{className:"list-disc list-inside",children:l.data.stats.errors.map((v,w)=>u.jsx("li",{children:v},w))})]})]}),u.jsx("button",{onClick:m,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${r?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:c,onDragLeave:c,onDragOver:c,onDrop:d,children:[u.jsx("input",{type:"file",accept:".vcf,.vcard",onChange:h,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),a.isPending?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(xc,{className:"h-8 w-8 text-primary-600 animate-spin"}),u.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(Jp,{className:"h-8 w-8 text-green-600"}),u.jsx("p",{className:"font-medium text-gray-900",children:t.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024).toFixed(2)," KB"]})]}):u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(Sc,{className:"h-8 w-8 text-gray-400"}),u.jsx("p",{className:"text-gray-600",children:"Drag and drop your vCard file here, or click to browse"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Supports .vcf and .vcard files"})]})]}),i&&u.jsx("div",{className:`rounded-lg border p-4 ${i.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:i.valid?u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Od,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),u.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-3 gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(As,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.contacts," contacts"]})]}),i.summary.companies_count>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Rr,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.companies_count," organizations"]})]}),i.summary.birthdays>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(dte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.birthdays," birthdays"]})]}),i.summary.photos>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(pte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.photos," photos"]})]}),i.summary.notes>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(wte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.notes," notes"]})]})]})]})]}):u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Ro,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:i.error})]})]})}),(i==null?void 0:i.valid)&&u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:p,disabled:l.isPending,className:"btn-primary flex items-center gap-2",children:l.isPending?u.jsxs(u.Fragment,{children:[u.jsx(xc,{className:"h-4 w-4 animate-spin"}),u.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(Sc,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),u.jsx("button",{onClick:m,disabled:l.isPending,className:"btn-secondary",children:"Cancel"})]}),l.isError&&u.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Ro,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:((y=(b=l.error.response)==null?void 0:b.data)==null?void 0:y.message)||"An error occurred during import"})]})]})})]})]})}function p_e(){var x,S,_;const[t,e]=T.useState(null),[r,n]=T.useState(!1),[i,s]=T.useState(null),[o,a]=T.useState({}),l=bt(),c=ft({mutationFn:async N=>{const E=new FormData;return E.append("file",N),(await le.post("/prm/v1/import/google-contacts/validate",E,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:N=>{var E;if(s(N),((E=N.duplicates)==null?void 0:E.length)>0){const k={};N.duplicates.forEach(C=>{k[C.index]="merge"}),a(k)}},onError:N=>{var E,k;s({valid:!1,error:((k=(E=N.response)==null?void 0:E.data)==null?void 0:k.message)||"Failed to validate file"})}}),d=ft({mutationFn:async({file:N,decisions:E})=>{const k=new FormData;return k.append("file",N),k.append("decisions",JSON.stringify(E)),(await le.post("/prm/v1/import/google-contacts",k,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{l.invalidateQueries({queryKey:["people"]}),l.invalidateQueries({queryKey:["companies"]}),l.invalidateQueries({queryKey:["dates"]}),l.invalidateQueries({queryKey:["dashboard"]})}}),h=T.useCallback(N=>{N.preventDefault(),N.stopPropagation(),N.type==="dragenter"||N.type==="dragover"?n(!0):N.type==="dragleave"&&n(!1)},[]),f=T.useCallback(N=>{N.preventDefault(),N.stopPropagation(),n(!1),N.dataTransfer.files&&N.dataTransfer.files[0]&&m(N.dataTransfer.files[0])},[]),p=N=>{N.target.files&&N.target.files[0]&&m(N.target.files[0])},m=N=>{if(!N.name.endsWith(".csv")){s({valid:!1,error:"Please select a CSV file"});return}e(N),s(null),a({}),d.reset(),c.mutate(N)},g=(N,E)=>{a(k=>({...k,[N]:E}))},b=()=>{t&&(i!=null&&i.valid)&&d.mutate({file:t,decisions:o})},y=()=>{e(null),s(null),a({}),c.reset(),d.reset()},v=(i==null?void 0:i.duplicates)||[],w=v.length>0;return u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Import from Google Contacts"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts from a Google Contacts CSV export. To export from Google:"}),u.jsxs("ol",{className:"text-sm text-gray-600 list-decimal list-inside space-y-1 ml-2",children:[u.jsxs("li",{children:["Go to ",u.jsx("a",{href:"https://contacts.google.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline",children:"contacts.google.com"})]}),u.jsx("li",{children:'Click "Export" in the left sidebar'}),u.jsx("li",{children:'Select "Google CSV" format and click "Export"'})]}),d.isSuccess?u.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Od,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),u.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[u.jsxs("p",{children:["Contacts imported: ",d.data.stats.contacts_imported]}),u.jsxs("p",{children:["Contacts updated: ",d.data.stats.contacts_updated]}),u.jsxs("p",{children:["Contacts skipped: ",d.data.stats.contacts_skipped]}),u.jsxs("p",{children:["Organizations created: ",d.data.stats.companies_created]}),u.jsxs("p",{children:["Birthdays created: ",d.data.stats.dates_created]}),u.jsxs("p",{children:["Notes created: ",d.data.stats.notes_created]}),u.jsxs("p",{children:["Photos imported: ",d.data.stats.photos_imported]}),((x=d.data.stats.errors)==null?void 0:x.length)>0&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[u.jsx("p",{className:"font-medium",children:"Errors:"}),u.jsx("ul",{className:"list-disc list-inside",children:d.data.stats.errors.map((N,E)=>u.jsx("li",{children:N},E))})]})]}),u.jsx("button",{onClick:y,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${r?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:f,children:[u.jsx("input",{type:"file",accept:".csv",onChange:p,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),c.isPending?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(xc,{className:"h-8 w-8 text-primary-600 animate-spin"}),u.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(XR,{className:"h-8 w-8 text-green-600"}),u.jsx("p",{className:"font-medium text-gray-900",children:t.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024).toFixed(2)," KB"]})]}):u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(Sc,{className:"h-8 w-8 text-gray-400"}),u.jsx("p",{className:"text-gray-600",children:"Drag and drop your Google Contacts CSV here, or click to browse"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Supports Google CSV format"})]})]}),i&&u.jsx("div",{className:`rounded-lg border p-4 ${i.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:i.valid?u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Od,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),u.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-3 gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(As,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.contacts," contacts"]})]}),i.summary.companies_count>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Rr,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.companies_count," organizations"]})]}),i.summary.birthdays>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(dte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.birthdays," birthdays"]})]}),i.summary.notes>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(wte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.notes," notes"]})]}),i.summary.photos>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(pte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.photos," photos"]})]})]})]})]}):u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Ro,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:i.error})]})]})}),(i==null?void 0:i.valid)&&w&&u.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Sfe,{className:"h-5 w-5 text-amber-600 mt-0.5 flex-shrink-0"}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("h3",{className:"font-medium text-amber-900",children:[v.length," contact",v.length>1?"s":""," may already exist"]}),u.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"Choose how to handle each potential duplicate:"}),u.jsx("div",{className:"mt-4 space-y-4",children:v.map(N=>u.jsx(m_e,{duplicate:N,decision:o[N.index]||"merge",onDecision:E=>g(N.index,E)},N.index))})]})]})}),(i==null?void 0:i.valid)&&u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:b,disabled:d.isPending,className:"btn-primary flex items-center gap-2",children:d.isPending?u.jsxs(u.Fragment,{children:[u.jsx(xc,{className:"h-4 w-4 animate-spin"}),u.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(Sc,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),u.jsx("button",{onClick:y,disabled:d.isPending,className:"btn-secondary",children:"Cancel"})]}),d.isError&&u.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Ro,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:((_=(S=d.error.response)==null?void 0:S.data)==null?void 0:_.message)||"An error occurred during import"})]})]})})]})]})}function m_e({duplicate:t,decision:e,onDecision:r}){var n,i;return u.jsxs("div",{className:"bg-white rounded-lg border border-amber-200 p-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"From CSV"}),u.jsx("p",{className:"font-medium text-gray-900 truncate",children:t.csv_name}),t.csv_org&&u.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.csv_org}),t.csv_email&&u.jsx("p",{className:"text-sm text-gray-500 truncate",children:t.csv_email})]}),u.jsx("div",{className:"hidden sm:flex items-center text-gray-400",children:u.jsx("span",{className:"text-lg",children:""})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Existing Contact"}),u.jsxs("div",{className:"flex items-start gap-3",children:[t.existing_photo?u.jsx("img",{src:t.existing_photo,alt:"",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}):u.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:u.jsx("span",{className:"text-gray-500 text-sm font-medium",children:((i=(n=t.existing_name)==null?void 0:n.charAt(0))==null?void 0:i.toUpperCase())||"?"})}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("p",{className:"font-medium text-gray-900 truncate",children:t.existing_name}),t.existing_org&&u.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.existing_org}),t.existing_email&&u.jsx("p",{className:"text-sm text-gray-500 truncate",children:t.existing_email})]})]})]})]}),u.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[u.jsxs("button",{type:"button",onClick:()=>r("merge"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="merge"?"bg-primary-100 text-primary-800 ring-2 ring-primary-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[u.jsx(Bfe,{className:"h-4 w-4"}),"Update existing"]}),u.jsxs("button",{type:"button",onClick:()=>r("new"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="new"?"bg-green-100 text-green-800 ring-2 ring-green-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[u.jsx(Kfe,{className:"h-4 w-4"}),"Create new"]}),u.jsxs("button",{type:"button",onClick:()=>r("skip"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="skip"?"bg-gray-200 text-gray-800 ring-2 ring-gray-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[u.jsx(Ufe,{className:"h-4 w-4"}),"Skip"]})]})]})}const g_e=[{id:"sync",label:"Sync",icon:zfe},{id:"notifications",label:"Notifications",icon:Nfe},{id:"data",label:"Data",icon:fte},{id:"admin",label:"Admin",icon:Vfe,adminOnly:!0},{id:"about",label:"About",icon:Ife}];function y_e(){const[t,e]=y0(),r=window.prmConfig||{},n=r.isAdmin||!1,i=r.userId,s=t.get("tab")||"sync",o=ge=>{e({tab:ge})},a=g_e.filter(ge=>!ge.adminOnly||n),[l,c]=T.useState(""),[d,h]=T.useState(""),[f,p]=T.useState(!0),[m,g]=T.useState(!1),[b,y]=T.useState(!1),[v,w]=T.useState([]),[x,S]=T.useState(!0),[_,N]=T.useState(""),[E,k]=T.useState(!1),[C,O]=T.useState(null),[P,j]=T.useState(!1),[M,A]=T.useState(null),[I,L]=T.useState([]),[F,W]=T.useState(""),[B,U]=T.useState(!1),[K,fe]=T.useState(""),[we,Fe]=T.useState("09:00"),[Se,Oe]=T.useState(!0),[$e,pt]=T.useState(!1),[it,mt]=T.useState(!1),[X,ve]=T.useState(""),[He,lt]=T.useState(!1),[It,ke]=T.useState([]),[tt,xt]=T.useState([]),[gt,$]=T.useState([]),[q,V]=T.useState(!1),[oe,Z]=T.useState(!1),[J,ye]=T.useState(!1),[Ye,Je]=T.useState(""),[er,Ee]=T.useState(!1),[ie,de]=T.useState("");T.useEffect(()=>{(async()=>{try{const Te=await le.get("/prm/v1/user/ical-url");c(Te.data.url),h(Te.data.webcal_url)}catch(Te){console.error("Failed to fetch iCal URL:",Te)}finally{p(!1)}})()},[]),T.useEffect(()=>{i&&(async()=>{try{const[Te,qe]=await Promise.all([Le.getAppPasswords(i),Le.getCardDAVUrls()]);w(Te.data||[]),A(qe.data)}catch(Te){console.error("Failed to fetch app passwords:",Te)}finally{S(!1)}})()},[i]);const he=async()=>{V(!0);try{const[ge,Te]=await Promise.all([Le.getSlackChannels(),Le.getSlackTargets()]);ke(ge.data.channels||[]),xt(ge.data.users||[]),$(Te.data.targets||[])}catch(ge){console.error("Failed to fetch Slack data:",ge),ve("Failed to load Slack channels and users. Please try refreshing the page.")}finally{V(!1)}};T.useEffect(()=>{(async()=>{try{const Te=await Le.getNotificationChannels();L(Te.data.channels||["email"]),W(Te.data.slack_webhook||""),Fe(Te.data.notification_time||"09:00");const qe=await Le.getSlackStatus(),zt=qe.data.connected||!1;U(zt),fe(qe.data.workspace_name||""),zt&&await he()}catch(Te){console.error("Failed to fetch notification channels:",Te)}finally{Oe(!1)}})()},[]),T.useEffect(()=>{B&&he()},[B]),T.useEffect(()=>{const ge=new URLSearchParams(window.location.search),Te=ge.get("slack_connected"),qe=ge.get("slack_error");Te==="1"?(ve("Slack connected successfully!"),o("notifications"),Le.getSlackStatus().then(zt=>{U(zt.data.connected||!1),fe(zt.data.workspace_name||"")}),e({tab:"notifications"})):qe&&(ve(`Slack connection failed: ${qe}`),o("notifications"),e({tab:"notifications"}))},[]);const Ne=async()=>{var ge,Te;try{const qe=await le.get("/prm/v1/slack/oauth/authorize");window.location.href=qe.data.oauth_url}catch(qe){console.error("Failed to get Slack OAuth URL:",qe),alert(((Te=(ge=qe.response)==null?void 0:ge.data)==null?void 0:Te.message)||"Failed to connect Slack")}},st=async()=>{var ge,Te;if(confirm("Are you sure you want to disconnect Slack? You will stop receiving Slack notifications.")){lt(!0);try{await Le.disconnectSlack(),U(!1),fe(""),ke([]),xt([]),$([]),ve("Slack disconnected successfully"),I.includes("slack")&&await Vm("slack")}catch(qe){console.error("Failed to disconnect Slack:",qe),alert(((Te=(ge=qe.response)==null?void 0:ge.data)==null?void 0:Te.message)||"Failed to disconnect Slack")}finally{lt(!1)}}},ii=ge=>{const Te=gt.includes(ge)?gt.filter(qe=>qe!==ge):[...gt,ge];$(Te)},Gi=async()=>{var ge,Te;Z(!0);try{await Le.updateSlackTargets(gt),ve("Notification targets saved successfully"),setTimeout(()=>ve(""),3e3)}catch(qe){console.error("Failed to save Slack targets:",qe),alert(((Te=(ge=qe.response)==null?void 0:ge.data)==null?void 0:Te.message)||"Failed to save notification targets")}finally{Z(!1)}},hu=async()=>{try{await navigator.clipboard.writeText(l),g(!0),setTimeout(()=>g(!1),2e3)}catch(ge){console.error("Failed to copy:",ge)}},_b=async ge=>{var Te,qe;if(ge.preventDefault(),!!_.trim()){k(!0);try{const zt=await Le.createAppPassword(i,_.trim());O(zt.data.password),w([...v,zt.data]),N("")}catch(zt){console.error("Failed to create app password:",zt),alert(((qe=(Te=zt.response)==null?void 0:Te.data)==null?void 0:qe.message)||"Failed to create app password")}finally{k(!1)}}},Eb=async(ge,Te)=>{var qe,zt;if(confirm(`Are you sure you want to revoke the app password "${Te}"? Any devices using this password will no longer be able to sync.`))try{await Le.deleteAppPassword(i,ge),w(v.filter(yt=>yt.uuid!==ge))}catch(yt){console.error("Failed to delete app password:",yt),alert(((zt=(qe=yt.response)==null?void 0:qe.data)==null?void 0:zt.message)||"Failed to revoke app password")}},Nb=async()=>{try{await navigator.clipboard.writeText(C),j(!0),setTimeout(()=>j(!1),2e3)}catch(ge){console.error("Failed to copy:",ge)}},Cb=async ge=>{try{await navigator.clipboard.writeText(ge)}catch(Te){console.error("Failed to copy:",Te)}},kb=ge=>{if(!ge)return"Never";const Te=new Date(ge);return Te.toLocaleDateString("en-US",{month:"short",day:"numeric",year:Te.getFullYear()!==new Date().getFullYear()?"numeric":void 0})},zm=async()=>{if(confirm("Are you sure you want to regenerate your calendar URL? Any existing calendar subscriptions will stop working until you update them with the new URL.")){y(!0);try{const ge=await le.post("/prm/v1/user/regenerate-ical-token");c(ge.data.url),h(ge.data.webcal_url)}catch(ge){console.error("Failed to regenerate token:",ge)}finally{y(!1)}}},Vm=async ge=>{var qe,zt;const Te=I.includes(ge)?I.filter(yt=>yt!==ge):[...I,ge];pt(!0);try{await Le.updateNotificationChannels(Te),L(Te)}catch(yt){console.error("Failed to update notification channels:",yt),alert(((zt=(qe=yt.response)==null?void 0:qe.data)==null?void 0:zt.message)||"Failed to update notification channels")}finally{pt(!1)}},Ws=async ge=>{var Rh,Mh;const[Te,qe]=ge.split(":").map(Number),zt=Math.round(qe/5)*5,yt=zt===60?(Te+1)%24:Te,Ih=zt===60?0:zt,Um=`${String(yt).padStart(2,"0")}:${String(Ih).padStart(2,"0")}`;Fe(Um),mt(!0);try{await Le.updateNotificationTime(Um)}catch(Hm){console.error("Failed to update notification time:",Hm),alert(((Mh=(Rh=Hm.response)==null?void 0:Rh.data)==null?void 0:Mh.message)||"Failed to update notification time");const Ob=await Le.getNotificationChannels();Fe(Ob.data.notification_time||"09:00")}finally{mt(!1)}},fu=async()=>{var ge,Te;if(confirm("This will send reminder emails for all reminders due today. Continue?")){ye(!0),Je("");try{const qe=await Le.triggerReminders();Je(qe.data.message||"Reminders triggered successfully.")}catch(qe){console.error("Failed to trigger reminders:",qe),Je(((Te=(ge=qe.response)==null?void 0:ge.data)==null?void 0:Te.message)||"Failed to trigger reminders. Please check server logs.")}finally{ye(!1)}}},Ph=async()=>{var ge,Te;if(confirm("This will reschedule all user reminder cron jobs based on their notification time preferences. Continue?")){Ee(!0),de("");try{const qe=await Le.rescheduleCronJobs();de(qe.data.message||"Cron jobs rescheduled successfully.")}catch(qe){console.error("Failed to reschedule cron jobs:",qe),de(((Te=(ge=qe.response)==null?void 0:ge.data)==null?void 0:Te.message)||"Failed to reschedule cron jobs. Please check server logs.")}finally{Ee(!1)}}},Tb=()=>{switch(s){case"sync":return u.jsx(v_e,{icalUrl:l,webcalUrl:d,icalLoading:f,icalCopied:m,copyIcalUrl:hu,regenerateIcalToken:zm,regenerating:b,appPasswords:v,appPasswordsLoading:x,carddavUrls:M,config:r,newPasswordName:_,setNewPasswordName:N,handleCreateAppPassword:_b,creatingPassword:E,newPassword:C,setNewPassword:O,copyNewPassword:Nb,passwordCopied:P,handleDeleteAppPassword:Eb,formatDate:kb,copyCarddavUrl:Cb});case"notifications":return u.jsx(b_e,{notificationsLoading:Se,notificationChannels:I,toggleChannel:Vm,savingChannels:$e,slackConnected:B,slackWorkspaceName:K,handleConnectSlack:Ne,handleDisconnectSlack:st,disconnectingSlack:He,webhookTestMessage:X,slackChannels:It,slackUsers:tt,slackTargets:gt,loadingSlackData:q,handleToggleSlackTarget:ii,handleSaveSlackTargets:Gi,savingSlackTargets:oe,slackWebhook:F,notificationTime:we,handleNotificationTimeChange:Ws,savingTime:it});case"data":return u.jsx(x_e,{});case"admin":return n?u.jsx(w_e,{handleTriggerReminders:fu,triggeringReminders:J,reminderMessage:Ye,handleRescheduleCron:Ph,reschedulingCron:er,cronMessage:ie}):null;case"about":return u.jsx(S_e,{config:r});default:return null}};return u.jsxs("div",{className:"max-w-3xl mx-auto",children:[u.jsx("div",{className:"border-b border-gray-200 mb-6",children:u.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:a.map(ge=>{const Te=ge.icon,qe=s===ge.id;return u.jsxs("button",{onClick:()=>o(ge.id),className:`
                  flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap
                  ${qe?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                `,children:[u.jsx(Te,{className:"w-4 h-4"}),ge.label]},ge.id)})})}),u.jsx("div",{className:"space-y-6",children:Tb()})]})}function v_e({icalUrl:t,webcalUrl:e,icalLoading:r,icalCopied:n,copyIcalUrl:i,regenerateIcalToken:s,regenerating:o,appPasswords:a,appPasswordsLoading:l,carddavUrls:c,config:d,newPasswordName:h,setNewPasswordName:f,handleCreateAppPassword:p,creatingPassword:m,newPassword:g,setNewPassword:b,copyNewPassword:y,passwordCopied:v,handleDeleteAppPassword:w,formatDate:x,copyCarddavUrl:S}){return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Calendar subscription"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Subscribe to your important dates in any calendar app (Apple Calendar, Google Calendar, Outlook, etc.)"}),r?u.jsxs("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),u.jsx("div",{className:"h-9 bg-gray-200 rounded w-24"})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label mb-1",children:"Your calendar feed URL"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",readOnly:!0,value:t,className:"input flex-1 text-sm font-mono bg-gray-50",onClick:_=>_.target.select()}),u.jsx("button",{onClick:i,className:"btn-secondary whitespace-nowrap",title:"Copy URL",children:n?u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied"]}):u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),"Copy"]})})]})]}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[u.jsx("a",{href:e,className:"btn-primary",children:u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Subscribe in calendar app"]})}),u.jsx("button",{onClick:s,disabled:o,className:"btn-secondary",children:o?"Regenerating...":"Regenerate URL"})]}),u.jsx("p",{className:"text-xs text-gray-500",children:'Keep this URL private. Anyone with access to it can see your important dates. If you think it has been compromised, click "Regenerate URL" to get a new one.'})]})]}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"CardDAV sync"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Sync your contacts with apps like Apple Contacts, Android Contacts, or Thunderbird using CardDAV."}),l?u.jsxs("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),u.jsx("div",{className:"h-24 bg-gray-200 rounded"})]}):u.jsxs("div",{className:"space-y-4",children:[c&&u.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-3",children:[u.jsx("h3",{className:"font-medium text-sm",children:"Connection details"}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-gray-500",children:"Server URL (for most apps)"}),u.jsxs("div",{className:"flex gap-2 mt-1",children:[u.jsx("input",{type:"text",readOnly:!0,value:c.addressbook,className:"input flex-1 text-xs font-mono bg-white",onClick:_=>_.target.select()}),u.jsx("button",{onClick:()=>S(c.addressbook),className:"btn-secondary text-xs px-2",title:"Copy URL",children:"Copy"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-gray-500",children:"Username"}),u.jsxs("div",{className:"flex gap-2 mt-1",children:[u.jsx("input",{type:"text",readOnly:!0,value:d.userLogin||"",className:"input flex-1 text-xs font-mono bg-white",onClick:_=>_.target.select()}),u.jsx("button",{onClick:()=>S(d.userLogin),className:"btn-secondary text-xs px-2",title:"Copy username",children:"Copy"})]})]}),u.jsx("p",{className:"text-xs text-gray-500",children:"Use one of the app passwords below instead of your regular password."})]}),u.jsxs("form",{onSubmit:p,className:"flex gap-2",children:[u.jsx("input",{type:"text",value:h,onChange:_=>f(_.target.value),placeholder:"Password name (e.g., iPhone Contacts)",className:"input flex-1",disabled:m}),u.jsx("button",{type:"submit",disabled:m||!h.trim(),className:"btn-primary whitespace-nowrap",children:m?"Creating...":"Create password"})]}),g&&u.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[u.jsx("p",{className:"text-sm text-green-800 font-medium mb-2",children:"Your new app password (copy it now, it won't be shown again):"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",readOnly:!0,value:g,className:"input flex-1 font-mono text-sm bg-white",onClick:_=>_.target.select()}),u.jsx("button",{onClick:y,className:"btn-primary whitespace-nowrap",children:v?"Copied!":"Copy"})]}),u.jsx("button",{onClick:()=>b(null),className:"text-xs text-green-700 mt-2 hover:underline",children:"I've saved this password, hide it"})]}),a.length>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-medium mb-2",children:"Your app passwords"}),u.jsx("div",{className:"space-y-2",children:a.map(_=>u.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-sm",children:_.name}),u.jsxs("p",{className:"text-xs text-gray-500",children:["Created ",x(_.created),"  Last used ",x(_.last_used)]})]}),u.jsx("button",{onClick:()=>w(_.uuid,_.name),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Revoke"})]},_.uuid))})]}),a.length===0&&!g&&u.jsx("p",{className:"text-sm text-gray-500",children:"No app passwords yet. Create one to start syncing your contacts."})]})]})]})}function b_e({notificationsLoading:t,notificationChannels:e,toggleChannel:r,savingChannels:n,slackConnected:i,slackWorkspaceName:s,handleConnectSlack:o,handleDisconnectSlack:a,disconnectingSlack:l,webhookTestMessage:c,slackChannels:d,slackUsers:h,slackTargets:f,loadingSlackData:p,handleToggleSlackTarget:m,handleSaveSlackTargets:g,savingSlackTargets:b,slackWebhook:y,notificationTime:v,handleNotificationTimeChange:w,savingTime:x}){return u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Notifications"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose how you want to receive daily reminders about your important dates."}),t?u.jsxs("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),u.jsx("div",{className:"h-10 bg-gray-200 rounded"})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:"Email"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Receive daily digest emails"})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:e.includes("email"),onChange:()=>r("email"),disabled:n,className:"sr-only peer"}),u.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:"Slack"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Receive notifications in Slack"})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:e.includes("slack"),onChange:()=>r("slack"),disabled:n||!i,className:"sr-only peer"}),u.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),u.jsx("div",{children:i?u.jsxs("div",{className:"space-y-3",children:[u.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-green-900",children:"Connected to Slack"}),s&&u.jsxs("p",{className:"text-sm text-green-700",children:["Workspace: ",s]})]}),u.jsx("button",{onClick:a,disabled:l,className:"btn-secondary text-sm",children:l?"Disconnecting...":"Disconnect"})]})}),c&&u.jsx("p",{className:`text-sm ${c.includes("successfully")||c.includes("disconnected")?"text-green-600":"text-red-600"}`,children:c}),e.includes("slack")&&u.jsxs("div",{className:"mt-4 p-4 border border-gray-200 rounded-lg",children:[u.jsx("h3",{className:"font-medium mb-3",children:"Notification targets"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose where to send Slack notifications. You can select multiple channels and users."}),p?u.jsx("p",{className:"text-sm text-gray-500",children:"Loading channels and users..."}):u.jsxs(u.Fragment,{children:[d.length>0&&u.jsxs("div",{className:"mb-4",children:[u.jsx("h4",{className:"text-sm font-medium mb-2",children:"Channels"}),u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:d.map(S=>u.jsxs("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:f.includes(S.id),onChange:()=>m(S.id),className:"mr-2 cursor-pointer"}),u.jsx("span",{className:"text-sm",children:S.name})]},S.id))})]}),h.length>0&&u.jsxs("div",{className:"mb-4",children:[u.jsx("h4",{className:"text-sm font-medium mb-2",children:"Direct messages"}),u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:h.map(S=>u.jsxs("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:f.includes(S.id),onChange:()=>m(S.id),className:"mr-2 cursor-pointer"}),u.jsxs("span",{className:"text-sm",children:[S.name,S.is_me&&u.jsx("span",{className:"text-gray-500 ml-1",children:"(you)"})]})]},S.id))})]}),d.length===0&&h.length===0&&!p&&u.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"No channels or users found. Make sure the Slack app has the necessary permissions."}),u.jsx("button",{onClick:g,disabled:b,className:"btn-primary text-sm mt-4",children:b?"Saving...":"Save targets"})]})]})]}):u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:o,className:"btn-primary w-full",disabled:l,children:"Connect Slack"}),c&&u.jsx("p",{className:`text-sm ${c.includes("successfully")?"text-green-600":"text-red-600"}`,children:c}),u.jsx("p",{className:"text-xs text-gray-500",children:"Connect your Slack workspace to receive daily reminder notifications. You'll be able to message channels or receive direct messages."})]})}),y&&!i&&u.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:u.jsxs("p",{className:"text-sm text-yellow-800",children:[u.jsx("strong",{children:"Legacy webhook detected."})," Please connect via OAuth for better functionality. Your webhook will continue to work until you connect via OAuth."]})}),u.jsxs("div",{children:[u.jsx("label",{className:"label mb-1",children:"Notification time (UTC)"}),u.jsx("input",{type:"time",value:v,onChange:S=>w(S.target.value),className:"input",disabled:x,step:"300"}),v&&u.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm",children:[u.jsxs("p",{className:"text-gray-700",children:[u.jsx("span",{className:"font-medium",children:"UTC:"})," ",v]}),u.jsxs("p",{className:"text-gray-700 mt-1",children:[u.jsxs("span",{className:"font-medium",children:["Your time (",Intl.DateTimeFormat().resolvedOptions().timeZone,"):"]})," ",(()=>{try{const[S,_]=v.split(":"),N=new Date;return N.setUTCHours(parseInt(S),parseInt(_),0,0),N.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}catch{return v}})()]})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose the UTC time when you want to receive your daily reminder digest. Reminders are sent within a 1-hour window of your selected time."})]})]})]})}const vq=[{id:"vcard",name:"vCard",description:"Apple Contacts, Outlook, Android",icon:Jp,component:f_e},{id:"google",name:"Google Contacts",description:"CSV export from Google",icon:XR,component:p_e},{id:"monica",name:"Monica CRM",description:"SQL export from Monica",icon:fte,component:h_e}];function x_e(){var i;const[t,e]=T.useState("vcard"),r=s=>{s==="vcard"?window.location.href="/wp-json/prm/v1/export/vcard":s==="google-csv"&&(window.location.href="/wp-json/prm/v1/export/google-csv")},n=(i=vq.find(s=>s.id===t))==null?void 0:i.component;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Import data"}),u.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Import your contacts from various sources. Existing contacts with matching names will be updated instead of duplicated."}),u.jsx("div",{className:"border-b border-gray-200 mb-6",children:u.jsx("nav",{className:"-mb-px flex space-x-6","aria-label":"Import types",children:vq.map(s=>{const o=s.icon,a=t===s.id;return u.jsxs("button",{onClick:()=>e(s.id),className:`group inline-flex items-center py-3 px-1 border-b-2 font-medium text-sm transition-colors ${a?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[u.jsx(o,{className:`mr-2 h-5 w-5 ${a?"text-primary-500":"text-gray-400 group-hover:text-gray-500"}`}),u.jsxs("div",{className:"text-left",children:[u.jsx("span",{className:"block",children:s.name}),u.jsx("span",{className:`block text-xs font-normal ${a?"text-primary-400":"text-gray-400"}`,children:s.description})]})]},s.id)})})}),n&&u.jsx(n,{})]}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Export data"}),u.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Export all your contacts in a format compatible with other contact management systems."}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("button",{onClick:()=>r("vcard"),className:"w-full p-4 rounded-lg border border-gray-200 hover:bg-gray-50 text-left flex items-center gap-4",children:[u.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:u.jsx(Jp,{className:"w-6 h-6 text-primary-600"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium",children:"Export as vCard (.vcf)"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Compatible with Apple Contacts, Outlook, Android, and most contact apps"})]}),u.jsx(zP,{className:"w-5 h-5 text-gray-400"})]}),u.jsxs("button",{onClick:()=>r("google-csv"),className:"w-full p-4 rounded-lg border border-gray-200 hover:bg-gray-50 text-left flex items-center gap-4",children:[u.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:u.jsx(XR,{className:"w-6 h-6 text-primary-600"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium",children:"Export as Google Contacts CSV"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Import directly into Google Contacts or other CSV-compatible systems"})]}),u.jsx(zP,{className:"w-5 h-5 text-gray-400"})]})]})]})]})}function w_e({handleTriggerReminders:t,triggeringReminders:e,reminderMessage:r,handleRescheduleCron:n,reschedulingCron:i,cronMessage:s}){return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"User management"}),u.jsx("div",{className:"space-y-3",children:u.jsxs(ce,{to:"/settings/user-approval",className:"block p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors",children:[u.jsx("p",{className:"font-medium",children:"User approval"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Approve or deny access for new users"})]})})]}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Configuration"}),u.jsx("div",{className:"space-y-3",children:u.jsxs(ce,{to:"/settings/relationship-types",className:"block p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors",children:[u.jsx("p",{className:"font-medium",children:"Relationship types"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Manage relationship types and their inverse mappings"})]})})]}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"System actions"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("button",{onClick:t,disabled:e,className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx("p",{className:"font-medium",children:"Trigger reminders"}),u.jsx("p",{className:"text-sm text-gray-500",children:e?"Sending...":"Manually send reminders for today"}),r&&u.jsx("p",{className:"text-sm text-green-600 mt-1",children:r})]}),u.jsxs("button",{onClick:n,disabled:i,className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx("p",{className:"font-medium",children:"Reschedule cron jobs"}),u.jsx("p",{className:"text-sm text-gray-500",children:i?"Rescheduling...":"Reschedule all user reminder cron jobs"}),s&&u.jsx("p",{className:"text-sm text-green-600 mt-1",children:s})]})]})]})]})}function S_e({config:t}){return u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"text-lg font-semibold mb-4",children:["About ",_c]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{children:u.jsxs("p",{className:"text-sm text-gray-600",children:["Version ",t.version||"1.0.0"]})}),u.jsx("div",{className:"pt-4 border-t border-gray-200",children:u.jsxs("p",{className:"text-sm text-gray-600",children:[_c," is a personal CRM system that helps you manage your contacts, track important dates, and maintain meaningful relationships."]})}),u.jsx("div",{className:"pt-4 border-t border-gray-200",children:u.jsx("p",{className:"text-sm text-gray-500",children:"Built with WordPress, React, and Tailwind CSS."})})]})]})}function bq({value:t,onChange:e,relationshipTypes:r,currentTypeId:n=null}){const[i,s]=T.useState(""),[o,a]=T.useState(!1),l=T.useRef(null),c=T.useRef(null),d=T.useMemo(()=>r.sort((b,y)=>{const v=(b.name||"").toLowerCase(),w=(y.name||"").toLowerCase();return v<w?-1:v>w?1:0}),[r]),h=T.useMemo(()=>{if(!i)return d.slice(0,10);const b=i.toLowerCase();return d.filter(y=>(y.name||"").toLowerCase().includes(b)).slice(0,10)},[d,i]),f=T.useMemo(()=>d.find(b=>b.id===parseInt(t,10)),[d,t]);T.useEffect(()=>{const b=y=>{c.current&&!c.current.contains(y.target)&&l.current&&!l.current.contains(y.target)&&a(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]);const p=b=>{e(b?b.toString():""),s(""),a(!1)},m=()=>{e(""),s(""),a(!1)},g=f?f.name:"";return u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"relative",children:f&&!o?u.jsxs("div",{className:"flex items-center justify-between input pr-8 cursor-text",onClick:()=>a(!0),children:[u.jsx("span",{children:g}),u.jsx("button",{type:"button",onClick:b=>{b.stopPropagation(),m()},className:"absolute right-2 text-gray-400 hover:text-gray-600",children:u.jsx(Lr,{className:"w-4 h-4"})})]}):u.jsx("input",{ref:l,type:"text",value:i,onChange:b=>{s(b.target.value),a(!0)},onFocus:()=>a(!0),placeholder:"Search for a relationship type...",className:"input"})}),o&&(i||!f)&&u.jsx("div",{ref:c,className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:h.length>0?u.jsxs(u.Fragment,{children:[u.jsx("button",{type:"button",onClick:()=>p(null),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t?"":"bg-primary-50"}`,children:u.jsx("span",{className:"text-gray-500 italic",children:"None (no inverse)"})}),h.map(b=>u.jsx("button",{type:"button",onClick:()=>p(b.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t===b.id.toString()?"bg-primary-50":""}`,children:b.name},b.id))]}):u.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No relationship types found"})})]})}function __e(){yi("Relationship Types - Settings");const t=bt();if(!((window.prmConfig||{}).isAdmin||!1))return u.jsx("div",{className:"max-w-2xl mx-auto",children:u.jsxs("div",{className:"card p-8 text-center",children:[u.jsx(vte,{className:"w-16 h-16 mx-auto text-amber-500 mb-4"}),u.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to manage relationship types. This feature is only available to administrators."}),u.jsx(ce,{to:"/settings",className:"btn-primary",children:"Back to Settings"})]})});const{data:n=[],isLoading:i}=dt({queryKey:["relationship-types"],queryFn:async()=>(await We.getRelationshipTypes()).data}),[s,o]=T.useState(null),[a,l]=T.useState(""),[c,d]=T.useState(""),[h,f]=T.useState(""),[p,m]=T.useState(""),[g,b]=T.useState(!1),y=ft({mutationFn:async({id:O,name:P,inverseId:j})=>{const M={name:P};return j&&(M.acf={inverse_relationship_type:parseInt(j,10)}),We.updateRelationshipType(O,M)},onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),o(null),l(""),d("")}}),v=ft({mutationFn:async({name:O,inverseId:P})=>{const j={name:O};return P&&(j.acf={inverse_relationship_type:parseInt(P,10)}),We.createRelationshipType(j)},onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),f(""),m(""),b(!1)}}),w=ft({mutationFn:O=>We.deleteRelationshipType(O),onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]})}}),x=ft({mutationFn:()=>We.restoreRelationshipTypeDefaults(),onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),alert("Default relationship type configurations have been restored.")},onError:()=>{alert("Failed to restore defaults. Please try again.")}});function S(){return u.jsxs("button",{onClick:()=>{window.confirm("This will restore all default inverse mappings and gender-dependent settings. Continue?")&&x.mutate()},disabled:x.isPending,className:"btn-secondary flex items-center gap-2",title:"Restore default inverse mappings and gender-dependent settings",children:[x.isPending?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600"}):u.jsx(gte,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Restore Defaults"})]})}const _=O=>{var j;o(O.id),l(O.name);const P=(j=O.acf)==null?void 0:j.inverse_relationship_type;d(P?P.toString():"")},N=()=>{o(null),l(""),d("")},E=()=>{if(!a.trim()){alert("Name is required");return}y.mutate({id:s,name:a.trim(),inverseId:c||null})},k=()=>{if(!h.trim()){alert("Name is required");return}v.mutate({name:h.trim(),inverseId:p||null})},C=(O,P)=>{window.confirm(`Are you sure you want to delete "${P}"? This cannot be undone.`)&&w.mutate(O)};return i?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):u.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h1",{className:"text-2xl font-bold",children:"Relationship Types"}),u.jsx("div",{className:"flex gap-2",children:!g&&u.jsxs(u.Fragment,{children:[u.jsx(S,{}),u.jsxs("button",{onClick:()=>b(!0),className:"btn-primary flex items-center gap-2",children:[u.jsx(or,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Add Relationship Type"})]})]})})]}),g&&u.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[u.jsx("h3",{className:"font-semibold mb-4",children:"Add New Relationship Type"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Name *"}),u.jsx("input",{type:"text",value:h,onChange:O=>f(O.target.value),className:"input",placeholder:"e.g., Parent, Spouse, Colleague"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Inverse Relationship Type"}),u.jsx(bq,{value:p,onChange:m,relationshipTypes:n}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Select the inverse relationship type. For example, if this is "Parent", select "Child". If this is "Spouse" or "Acquaintance", select the same type (e.g., "Spouse"  "Spouse").'})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:k,disabled:v.isPending,className:"btn-primary flex items-center gap-2",children:[v.isPending?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):u.jsx(Mo,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Save"})]}),u.jsx("button",{onClick:()=>{b(!1),f(""),m("")},className:"btn-secondary",children:"Cancel"})]})]})]}),u.jsx("div",{className:"space-y-2",children:n.length===0?u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No relationship types found."}):n.map(O=>{var I,L;const P=s===O.id,j=(I=O.acf)==null?void 0:I.inverse_relationship_type,M=typeof j=="object"&&(j!=null&&j.ID)?j.ID:typeof j=="object"&&(j!=null&&j.id)?j.id:j,A=M?n.find(F=>F.id===M):null;return u.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:P?u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Name *"}),u.jsx("input",{type:"text",value:a,onChange:F=>l(F.target.value),className:"input"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Inverse Relationship Type"}),u.jsx(bq,{value:c,onChange:d,relationshipTypes:n,currentTypeId:O.id}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Select the inverse relationship type. For example, if this is "Parent", select "Child". If this is "Spouse" or "Acquaintance", select the same type (e.g., "Spouse"  "Spouse").'})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:E,disabled:y.isPending,className:"btn-primary flex items-center gap-2",children:[y.isPending?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):u.jsx(Mo,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Save"})]}),u.jsxs("button",{onClick:N,className:"btn-secondary flex items-center gap-2",children:[u.jsx(Lr,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Cancel"})]})]})]}):u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"font-medium",children:O.name}),A&&u.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Inverse: ",u.jsx("span",{className:"font-medium",children:A.name})]}),!A&&((L=O.acf)==null?void 0:L.inverse_relationship_type)===null&&u.jsx("div",{className:"text-sm text-gray-400 mt-1 italic",children:"No inverse relationship"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>_(O),className:"p-2 text-gray-600 hover:text-primary-600 hover:bg-primary-50 rounded",title:"Edit",children:u.jsx(qfe,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>C(O.id,O.name),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded",title:"Delete",children:u.jsx(ai,{className:"w-4 h-4"})})]})]})},O.id)})})]})})}function E_e(){yi("User Approval - Settings");const t=bt();if(!((window.prmConfig||{}).isAdmin||!1))return u.jsx("div",{className:"max-w-2xl mx-auto",children:u.jsxs("div",{className:"card p-8 text-center",children:[u.jsx(vte,{className:"w-16 h-16 mx-auto text-amber-500 mb-4"}),u.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to manage user approvals. This feature is only available to administrators."}),u.jsx(ce,{to:"/settings",className:"btn-primary",children:"Back to Settings"})]})});const{data:n=[],isLoading:i}=dt({queryKey:["users"],queryFn:async()=>(await Le.getUsers()).data}),s=ft({mutationFn:p=>Le.approveUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),o=ft({mutationFn:p=>Le.denyUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),a=ft({mutationFn:p=>Le.deleteUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),l=p=>{window.confirm("Are you sure you want to approve this user?")&&s.mutate(p)},c=p=>{window.confirm("Are you sure you want to deny this user? They will not be able to access the system.")&&o.mutate(p)},d=(p,m)=>{window.confirm(`Are you sure you want to delete ${m}? This will permanently delete their account and all their related data (people, organizations, dates). This action cannot be undone.`)&&a.mutate(p)};if(i)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx(xc,{className:"w-8 h-8 animate-spin text-primary-600"})});const h=n.filter(p=>!p.is_approved),f=n.filter(p=>p.is_approved);return u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs(ce,{to:"/settings",className:"btn-secondary flex items-center gap-2",children:[u.jsx(zi,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Back to Settings"})]}),u.jsx("h1",{className:"text-2xl font-semibold",children:"User Approval"})]}),u.jsxs("div",{className:"space-y-6",children:[h.length>0&&u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Pending Approval"}),u.jsx("div",{className:"space-y-3",children:h.map(p=>u.jsxs("div",{className:"card p-4 flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:p.name}),u.jsx("p",{className:"text-sm text-gray-500",children:p.email}),u.jsxs("p",{className:"text-xs text-gray-400",children:["Registered: ",new Date(p.registered).toLocaleDateString()]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>l(p.id),disabled:s.isPending||a.isPending,className:"btn-primary flex items-center gap-2",children:[u.jsx(pF,{className:"w-4 h-4"}),"Approve"]}),u.jsxs("button",{onClick:()=>c(p.id),disabled:o.isPending||a.isPending,className:"btn-secondary flex items-center gap-2",children:[u.jsx(yF,{className:"w-4 h-4"}),"Deny"]}),u.jsxs("button",{onClick:()=>d(p.id,p.name),disabled:s.isPending||o.isPending||a.isPending,className:"btn-danger flex items-center gap-2",children:[u.jsx(ai,{className:"w-4 h-4"}),"Delete"]})]})]},p.id))})]}),f.length>0&&u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Approved Users"}),u.jsx("div",{className:"space-y-3",children:f.map(p=>u.jsxs("div",{className:"card p-4 flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-medium flex items-center gap-2",children:[p.name,u.jsx(pF,{className:"w-4 h-4 text-green-600"})]}),u.jsx("p",{className:"text-sm text-gray-500",children:p.email})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>c(p.id),disabled:o.isPending||a.isPending,className:"btn-secondary flex items-center gap-2",children:[u.jsx(yF,{className:"w-4 h-4"}),"Revoke Access"]}),u.jsxs("button",{onClick:()=>d(p.id,p.name),disabled:o.isPending||a.isPending,className:"btn-danger flex items-center gap-2",children:[u.jsx(ai,{className:"w-4 h-4"}),"Delete"]})]})]},p.id))})]}),n.length===0&&u.jsx("div",{className:"card p-8 text-center",children:u.jsx("p",{className:"text-gray-600",children:"No Caelis users found."})})]})]})}/**
 * vis-data
 * http://visjs.org/
 *
 * Manage unstructured data using DataSet. Add, update, and remove data, and listen for changes in the data.
 *
 * @version 8.0.3
 * @date    2025-09-10T16:22:00.613Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var xq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var U1={exports:{}},wq={},Zh,Sq;function Cr(){if(Sq)return Zh;Sq=1;var t=function(e){return e&&e.Math===Math&&e};return Zh=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof xq=="object"&&xq)||t(typeof Zh=="object"&&Zh)||function(){return this}()||Function("return this")(),Zh}var H1,_q;function kt(){return _q||(_q=1,H1=function(t){try{return!!t()}catch{return!0}}),H1}var W1,Eq;function om(){if(Eq)return W1;Eq=1;var t=kt();return W1=!t(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),W1}var K1,Nq;function z0(){if(Nq)return K1;Nq=1;var t=om(),e=Function.prototype,r=e.apply,n=e.call;return K1=typeof Reflect=="object"&&Reflect.apply||(t?n.bind(r):function(){return n.apply(r,arguments)}),K1}var G1,Cq;function Pt(){if(Cq)return G1;Cq=1;var t=om(),e=Function.prototype,r=e.call,n=t&&e.bind.bind(r,r);return G1=t?n:function(i){return function(){return r.apply(i,arguments)}},G1}var Y1,kq;function Bo(){if(kq)return Y1;kq=1;var t=Pt(),e=t({}.toString),r=t("".slice);return Y1=function(n){return r(e(n),8,-1)},Y1}var Q1,Tq;function Fie(){if(Tq)return Q1;Tq=1;var t=Bo(),e=Pt();return Q1=function(r){if(t(r)==="Function")return e(r)},Q1}var X1,Oq;function Hr(){if(Oq)return X1;Oq=1;var t=typeof document=="object"&&document.all;return X1=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"},X1}var J1={},Z1,jq;function kr(){if(jq)return Z1;jq=1;var t=kt();return Z1=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),Z1}var ex,Pq;function ti(){if(Pq)return ex;Pq=1;var t=om(),e=Function.prototype.call;return ex=t?e.bind(e):function(){return e.apply(e,arguments)},ex}var tx={},Iq;function XM(){if(Iq)return tx;Iq=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,r=e&&!t.call({1:2},1);return tx.f=r?function(i){var s=e(this,i);return!!s&&s.enumerable}:t,tx}var rx,Rq;function am(){return Rq||(Rq=1,rx=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}),rx}var nx,Mq;function V0(){if(Mq)return nx;Mq=1;var t=Pt(),e=kt(),r=Bo(),n=Object,i=t("".split);return nx=e(function(){return!n("z").propertyIsEnumerable(0)})?function(s){return r(s)==="String"?i(s,""):n(s)}:n,nx}var ix,$q;function lm(){return $q||($q=1,ix=function(t){return t==null}),ix}var sx,Dq;function Kc(){if(Dq)return sx;Dq=1;var t=lm(),e=TypeError;return sx=function(r){if(t(r))throw new e("Can't call method on "+r);return r},sx}var ox,Aq;function Vs(){if(Aq)return ox;Aq=1;var t=V0(),e=Kc();return ox=function(r){return t(e(r))},ox}var ax,Fq;function Dn(){if(Fq)return ax;Fq=1;var t=Hr();return ax=function(e){return typeof e=="object"?e!==null:t(e)},ax}var lx,qq;function $r(){return qq||(qq=1,lx={}),lx}var cx,Lq;function bi(){if(Lq)return cx;Lq=1;var t=$r(),e=Cr(),r=Hr(),n=function(i){return r(i)?i:void 0};return cx=function(i,s){return arguments.length<2?n(t[i])||n(e[i]):t[i]&&t[i][s]||e[i]&&e[i][s]},cx}var ux,Bq;function Wr(){if(Bq)return ux;Bq=1;var t=Pt();return ux=t({}.isPrototypeOf),ux}var dx,zq;function ih(){if(zq)return dx;zq=1;var t=Cr(),e=t.navigator,r=e&&e.userAgent;return dx=r?String(r):"",dx}var hx,Vq;function cm(){if(Vq)return hx;Vq=1;var t=Cr(),e=ih(),r=t.process,n=t.Deno,i=r&&r.versions||n&&n.version,s=i&&i.v8,o,a;return s&&(o=s.split("."),a=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!a&&e&&(o=e.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=e.match(/Chrome\/(\d+)/),o&&(a=+o[1]))),hx=a,hx}var fx,Uq;function sh(){if(Uq)return fx;Uq=1;var t=cm(),e=kt(),r=Cr(),n=r.String;return fx=!!Object.getOwnPropertySymbols&&!e(function(){var i=Symbol("symbol detection");return!n(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&t&&t<41}),fx}var px,Hq;function qie(){if(Hq)return px;Hq=1;var t=sh();return px=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol",px}var mx,Wq;function um(){if(Wq)return mx;Wq=1;var t=bi(),e=Hr(),r=Wr(),n=qie(),i=Object;return mx=n?function(s){return typeof s=="symbol"}:function(s){var o=t("Symbol");return e(o)&&r(o.prototype,i(s))},mx}var gx,Kq;function oh(){if(Kq)return gx;Kq=1;var t=String;return gx=function(e){try{return t(e)}catch{return"Object"}},gx}var yx,Gq;function zo(){if(Gq)return yx;Gq=1;var t=Hr(),e=oh(),r=TypeError;return yx=function(n){if(t(n))return n;throw new r(e(n)+" is not a function")},yx}var vx,Yq;function JM(){if(Yq)return vx;Yq=1;var t=zo(),e=lm();return vx=function(r,n){var i=r[n];return e(i)?void 0:t(i)},vx}var bx,Qq;function N_e(){if(Qq)return bx;Qq=1;var t=ti(),e=Hr(),r=Dn(),n=TypeError;return bx=function(i,s){var o,a;if(s==="string"&&e(o=i.toString)&&!r(a=t(o,i))||e(o=i.valueOf)&&!r(a=t(o,i))||s!=="string"&&e(o=i.toString)&&!r(a=t(o,i)))return a;throw new n("Can't convert object to primitive value")},bx}var xx={exports:{}},wx,Xq;function ah(){return Xq||(Xq=1,wx=!0),wx}var Sx,Jq;function C_e(){if(Jq)return Sx;Jq=1;var t=Cr(),e=Object.defineProperty;return Sx=function(r,n){try{e(t,r,{value:n,configurable:!0,writable:!0})}catch{t[r]=n}return n},Sx}var Zq;function ZM(){if(Zq)return xx.exports;Zq=1;var t=ah(),e=Cr(),r=C_e(),n="__core-js_shared__",i=xx.exports=e[n]||r(n,{});return(i.versions||(i.versions=[])).push({version:"3.44.0",mode:t?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),xx.exports}var _x,eL;function lh(){if(eL)return _x;eL=1;var t=ZM();return _x=function(e,r){return t[e]||(t[e]=r||{})},_x}var Ex,tL;function gs(){if(tL)return Ex;tL=1;var t=Kc(),e=Object;return Ex=function(r){return e(t(r))},Ex}var Nx,rL;function Kr(){if(rL)return Nx;rL=1;var t=Pt(),e=gs(),r=t({}.hasOwnProperty);return Nx=Object.hasOwn||function(i,s){return r(e(i),s)},Nx}var Cx,nL;function U0(){if(nL)return Cx;nL=1;var t=Pt(),e=0,r=Math.random(),n=t(1.1.toString);return Cx=function(i){return"Symbol("+(i===void 0?"":i)+")_"+n(++e+r,36)},Cx}var kx,iL;function Gr(){if(iL)return kx;iL=1;var t=Cr(),e=lh(),r=Kr(),n=U0(),i=sh(),s=qie(),o=t.Symbol,a=e("wks"),l=s?o.for||o:o&&o.withoutSetter||n;return kx=function(c){return r(a,c)||(a[c]=i&&r(o,c)?o[c]:l("Symbol."+c)),a[c]},kx}var Tx,sL;function Lie(){if(sL)return Tx;sL=1;var t=ti(),e=Dn(),r=um(),n=JM(),i=N_e(),s=Gr(),o=TypeError,a=s("toPrimitive");return Tx=function(l,c){if(!e(l)||r(l))return l;var d=n(l,a),h;if(d){if(c===void 0&&(c="default"),h=t(d,l,c),!e(h)||r(h))return h;throw new o("Can't convert object to primitive value")}return c===void 0&&(c="number"),i(l,c)},Tx}var Ox,oL;function e$(){if(oL)return Ox;oL=1;var t=Lie(),e=um();return Ox=function(r){var n=t(r,"string");return e(n)?n:n+""},Ox}var jx,aL;function Bie(){if(aL)return jx;aL=1;var t=Cr(),e=Dn(),r=t.document,n=e(r)&&e(r.createElement);return jx=function(i){return n?r.createElement(i):{}},jx}var Px,lL;function zie(){if(lL)return Px;lL=1;var t=kr(),e=kt(),r=Bie();return Px=!t&&!e(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7}),Px}var cL;function H0(){if(cL)return J1;cL=1;var t=kr(),e=ti(),r=XM(),n=am(),i=Vs(),s=e$(),o=Kr(),a=zie(),l=Object.getOwnPropertyDescriptor;return J1.f=t?l:function(d,h){if(d=i(d),h=s(h),a)try{return l(d,h)}catch{}if(o(d,h))return n(!e(r.f,d,h),d[h])},J1}var Ix,uL;function k_e(){if(uL)return Ix;uL=1;var t=kt(),e=Hr(),r=/#|\.prototype\./,n=function(l,c){var d=s[i(l)];return d===a?!0:d===o?!1:e(c)?t(c):!!c},i=n.normalize=function(l){return String(l).replace(r,".").toLowerCase()},s=n.data={},o=n.NATIVE="N",a=n.POLYFILL="P";return Ix=n,Ix}var Rx,dL;function W0(){if(dL)return Rx;dL=1;var t=Fie(),e=zo(),r=om(),n=t(t.bind);return Rx=function(i,s){return e(i),s===void 0?i:r?n(i,s):function(){return i.apply(s,arguments)}},Rx}var Mx={},$x,hL;function Vie(){if(hL)return $x;hL=1;var t=kr(),e=kt();return $x=t&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),$x}var Dx,fL;function Vo(){if(fL)return Dx;fL=1;var t=Dn(),e=String,r=TypeError;return Dx=function(n){if(t(n))return n;throw new r(e(n)+" is not an object")},Dx}var pL;function Vi(){if(pL)return Mx;pL=1;var t=kr(),e=zie(),r=Vie(),n=Vo(),i=e$(),s=TypeError,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l="enumerable",c="configurable",d="writable";return Mx.f=t?r?function(f,p,m){if(n(f),p=i(p),n(m),typeof f=="function"&&p==="prototype"&&"value"in m&&d in m&&!m[d]){var g=a(f,p);g&&g[d]&&(f[p]=m.value,m={configurable:c in m?m[c]:g[c],enumerable:l in m?m[l]:g[l],writable:!1})}return o(f,p,m)}:o:function(f,p,m){if(n(f),p=i(p),n(m),e)try{return o(f,p,m)}catch{}if("get"in m||"set"in m)throw new s("Accessors not supported");return"value"in m&&(f[p]=m.value),f},Mx}var Ax,mL;function ch(){if(mL)return Ax;mL=1;var t=kr(),e=Vi(),r=am();return Ax=t?function(n,i,s){return e.f(n,i,r(1,s))}:function(n,i,s){return n[i]=s,n},Ax}var Fx,gL;function Ve(){if(gL)return Fx;gL=1;var t=Cr(),e=z0(),r=Fie(),n=Hr(),i=H0().f,s=k_e(),o=$r(),a=W0(),l=ch(),c=Kr(),d=function(h){var f=function(p,m,g){if(this instanceof f){switch(arguments.length){case 0:return new h;case 1:return new h(p);case 2:return new h(p,m)}return new h(p,m,g)}return e(h,this,arguments)};return f.prototype=h.prototype,f};return Fx=function(h,f){var p=h.target,m=h.global,g=h.stat,b=h.proto,y=m?t:g?t[p]:t[p]&&t[p].prototype,v=m?o:o[p]||l(o,p,{})[p],w=v.prototype,x,S,_,N,E,k,C,O,P;for(N in f)x=s(m?N:p+(g?".":"#")+N,h.forced),S=!x&&y&&c(y,N),k=v[N],S&&(h.dontCallGetSet?(P=i(y,N),C=P&&P.value):C=y[N]),E=S&&C?C:f[N],!(!x&&!b&&typeof k==typeof E)&&(h.bind&&S?O=a(E,t):h.wrap&&S?O=d(E):b&&n(E)?O=r(E):O=E,(h.sham||E&&E.sham||k&&k.sham)&&l(O,"sham",!0),l(v,N,O),b&&(_=p+"Prototype",c(o,_)||l(o,_,{}),l(o[_],N,E),h.real&&w&&(x||!w[N])&&l(w,N,E)))},Fx}var yL;function T_e(){if(yL)return wq;yL=1;var t=Ve(),e=kr(),r=Vi().f;return t({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!e},{defineProperty:r}),wq}var vL;function O_e(){if(vL)return U1.exports;vL=1,T_e();var t=$r(),e=t.Object,r=U1.exports=function(i,s,o){return e.defineProperty(i,s,o)};return e.defineProperty.sham&&(r.sham=!0),U1.exports}var qx,bL;function Uie(){if(bL)return qx;bL=1;var t=O_e();return qx=t,qx}var Lx,xL;function j_e(){if(xL)return Lx;xL=1;var t=Uie();return Lx=t,Lx}var Bx,wL;function P_e(){if(wL)return Bx;wL=1;var t=j_e();return Bx=t,Bx}var zx,SL;function I_e(){return SL||(SL=1,zx=P_e()),zx}var R_e=I_e(),M_e=rt(R_e),_L={},Vx,EL;function Gc(){if(EL)return Vx;EL=1;var t=Bo();return Vx=Array.isArray||function(r){return t(r)==="Array"},Vx}var Ux,NL;function $_e(){if(NL)return Ux;NL=1;var t=Math.ceil,e=Math.floor;return Ux=Math.trunc||function(n){var i=+n;return(i>0?e:t)(i)},Ux}var Hx,CL;function uh(){if(CL)return Hx;CL=1;var t=$_e();return Hx=function(e){var r=+e;return r!==r||r===0?0:t(r)},Hx}var Wx,kL;function Hie(){if(kL)return Wx;kL=1;var t=uh(),e=Math.min;return Wx=function(r){var n=t(r);return n>0?e(n,9007199254740991):0},Wx}var Kx,TL;function hl(){if(TL)return Kx;TL=1;var t=Hie();return Kx=function(e){return t(e.length)},Kx}var Gx,OL;function Wie(){if(OL)return Gx;OL=1;var t=TypeError,e=9007199254740991;return Gx=function(r){if(r>e)throw t("Maximum allowed index exceeded");return r},Gx}var Yx,jL;function K0(){if(jL)return Yx;jL=1;var t=kr(),e=Vi(),r=am();return Yx=function(n,i,s){t?e.f(n,i,r(0,s)):n[i]=s},Yx}var Qx,PL;function t$(){if(PL)return Qx;PL=1;var t=Gr(),e=t("toStringTag"),r={};return r[e]="z",Qx=String(r)==="[object z]",Qx}var Xx,IL;function fl(){if(IL)return Xx;IL=1;var t=t$(),e=Hr(),r=Bo(),n=Gr(),i=n("toStringTag"),s=Object,o=r(function(){return arguments}())==="Arguments",a=function(l,c){try{return l[c]}catch{}};return Xx=t?r:function(l){var c,d,h;return l===void 0?"Undefined":l===null?"Null":typeof(d=a(c=s(l),i))=="string"?d:o?r(c):(h=r(c))==="Object"&&e(c.callee)?"Arguments":h},Xx}var Jx,RL;function D_e(){if(RL)return Jx;RL=1;var t=Pt(),e=Hr(),r=ZM(),n=t(Function.toString);return e(r.inspectSource)||(r.inspectSource=function(i){return n(i)}),Jx=r.inspectSource,Jx}var Zx,ML;function Kie(){if(ML)return Zx;ML=1;var t=Pt(),e=kt(),r=Hr(),n=fl(),i=bi(),s=D_e(),o=function(){},a=i("Reflect","construct"),l=/^\s*(?:class|function)\b/,c=t(l.exec),d=!l.test(o),h=function(m){if(!r(m))return!1;try{return a(o,[],m),!0}catch{return!1}},f=function(m){if(!r(m))return!1;switch(n(m)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!c(l,s(m))}catch{return!0}};return f.sham=!0,Zx=!a||e(function(){var p;return h(h.call)||!h(Object)||!h(function(){p=!0})||p})?f:h,Zx}var ew,$L;function A_e(){if($L)return ew;$L=1;var t=Gc(),e=Kie(),r=Dn(),n=Gr(),i=n("species"),s=Array;return ew=function(o){var a;return t(o)&&(a=o.constructor,e(a)&&(a===s||t(a.prototype))?a=void 0:r(a)&&(a=a[i],a===null&&(a=void 0))),a===void 0?s:a},ew}var tw,DL;function r$(){if(DL)return tw;DL=1;var t=A_e();return tw=function(e,r){return new(t(e))(r===0?0:r)},tw}var rw,AL;function dm(){if(AL)return rw;AL=1;var t=kt(),e=Gr(),r=cm(),n=e("species");return rw=function(i){return r>=51||!t(function(){var s=[],o=s.constructor={};return o[n]=function(){return{foo:1}},s[i](Boolean).foo!==1})},rw}var FL;function Gie(){if(FL)return _L;FL=1;var t=Ve(),e=kt(),r=Gc(),n=Dn(),i=gs(),s=hl(),o=Wie(),a=K0(),l=r$(),c=dm(),d=Gr(),h=cm(),f=d("isConcatSpreadable"),p=h>=51||!e(function(){var b=[];return b[f]=!1,b.concat()[0]!==b}),m=function(b){if(!n(b))return!1;var y=b[f];return y!==void 0?!!y:r(b)},g=!p||!c("concat");return t({target:"Array",proto:!0,arity:1,forced:g},{concat:function(y){var v=i(this),w=l(v,0),x=0,S,_,N,E,k;for(S=-1,N=arguments.length;S<N;S++)if(k=S===-1?v:arguments[S],m(k))for(E=s(k),o(x+E),_=0;_<E;_++,x++)_ in k&&a(w,x,k[_]);else o(x+1),a(w,x++,k);return w.length=x,w}}),_L}var qL={},LL={},nw,BL;function pl(){if(BL)return nw;BL=1;var t=fl(),e=String;return nw=function(r){if(t(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(r)},nw}var iw={},sw,zL;function n$(){if(zL)return sw;zL=1;var t=uh(),e=Math.max,r=Math.min;return sw=function(n,i){var s=t(n);return s<0?e(s+i,0):r(s,i)},sw}var ow,VL;function F_e(){if(VL)return ow;VL=1;var t=Vs(),e=n$(),r=hl(),n=function(i){return function(s,o,a){var l=t(s),c=r(l);if(c===0)return!i&&-1;var d=e(a,c),h;if(i&&o!==o){for(;c>d;)if(h=l[d++],h!==h)return!0}else for(;c>d;d++)if((i||d in l)&&l[d]===o)return i||d||0;return!i&&-1}};return ow={includes:n(!0),indexOf:n(!1)},ow}var aw,UL;function hm(){return UL||(UL=1,aw={}),aw}var lw,HL;function Yie(){if(HL)return lw;HL=1;var t=Pt(),e=Kr(),r=Vs(),n=F_e().indexOf,i=hm(),s=t([].push);return lw=function(o,a){var l=r(o),c=0,d=[],h;for(h in l)!e(i,h)&&e(l,h)&&s(d,h);for(;a.length>c;)e(l,h=a[c++])&&(~n(d,h)||s(d,h));return d},lw}var cw,WL;function i$(){return WL||(WL=1,cw=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),cw}var uw,KL;function G0(){if(KL)return uw;KL=1;var t=Yie(),e=i$();return uw=Object.keys||function(n){return t(n,e)},uw}var GL;function s$(){if(GL)return iw;GL=1;var t=kr(),e=Vie(),r=Vi(),n=Vo(),i=Vs(),s=G0();return iw.f=t&&!e?Object.defineProperties:function(a,l){n(a);for(var c=i(l),d=s(l),h=d.length,f=0,p;h>f;)r.f(a,p=d[f++],c[p]);return a},iw}var dw,YL;function q_e(){if(YL)return dw;YL=1;var t=bi();return dw=t("document","documentElement"),dw}var hw,QL;function Y0(){if(QL)return hw;QL=1;var t=lh(),e=U0(),r=t("keys");return hw=function(n){return r[n]||(r[n]=e(n))},hw}var fw,XL;function fm(){if(XL)return fw;XL=1;var t=Vo(),e=s$(),r=i$(),n=hm(),i=q_e(),s=Bie(),o=Y0(),a=">",l="<",c="prototype",d="script",h=o("IE_PROTO"),f=function(){},p=function(v){return l+d+a+v+l+"/"+d+a},m=function(v){v.write(p("")),v.close();var w=v.parentWindow.Object;return v=null,w},g=function(){var v=s("iframe"),w="java"+d+":",x;return v.style.display="none",i.appendChild(v),v.src=String(w),x=v.contentWindow.document,x.open(),x.write(p("document.F=Object")),x.close(),x.F},b,y=function(){try{b=new ActiveXObject("htmlfile")}catch{}y=typeof document<"u"?document.domain&&b?m(b):g():m(b);for(var v=r.length;v--;)delete y[c][r[v]];return y()};return n[h]=!0,fw=Object.create||function(w,x){var S;return w!==null?(f[c]=t(w),S=new f,f[c]=null,S[h]=w):S=y(),x===void 0?S:e.f(S,x)},fw}var pw={},JL;function Q0(){if(JL)return pw;JL=1;var t=Yie(),e=i$(),r=e.concat("length","prototype");return pw.f=Object.getOwnPropertyNames||function(i){return t(i,r)},pw}var mw={},gw,ZL;function dh(){if(ZL)return gw;ZL=1;var t=Pt();return gw=t([].slice),gw}var e3;function Qie(){if(e3)return mw;e3=1;var t=Bo(),e=Vs(),r=Q0().f,n=dh(),i=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(o){try{return r(o)}catch{return n(i)}};return mw.f=function(a){return i&&t(a)==="Window"?s(a):r(e(a))},mw}var yw={},t3;function X0(){return t3||(t3=1,yw.f=Object.getOwnPropertySymbols),yw}var vw,r3;function pm(){if(r3)return vw;r3=1;var t=ch();return vw=function(e,r,n,i){return i&&i.enumerable?e[r]=n:t(e,r,n),e},vw}var bw,n3;function o$(){if(n3)return bw;n3=1;var t=Vi();return bw=function(e,r,n){return t.f(e,r,n)},bw}var xw={},i3;function J0(){if(i3)return xw;i3=1;var t=Gr();return xw.f=t,xw}var ww,s3;function Jt(){if(s3)return ww;s3=1;var t=$r(),e=Kr(),r=J0(),n=Vi().f;return ww=function(i){var s=t.Symbol||(t.Symbol={});e(s,i)||n(s,i,{value:r.f(i)})},ww}var Sw,o3;function Xie(){if(o3)return Sw;o3=1;var t=ti(),e=bi(),r=Gr(),n=pm();return Sw=function(){var i=e("Symbol"),s=i&&i.prototype,o=s&&s.valueOf,a=r("toPrimitive");s&&!s[a]&&n(s,a,function(l){return t(o,this)},{arity:1})},Sw}var _w,a3;function L_e(){if(a3)return _w;a3=1;var t=t$(),e=fl();return _w=t?{}.toString:function(){return"[object "+e(this)+"]"},_w}var Ew,l3;function Yc(){if(l3)return Ew;l3=1;var t=t$(),e=Vi().f,r=ch(),n=Kr(),i=L_e(),s=Gr(),o=s("toStringTag");return Ew=function(a,l,c,d){var h=c?a:a&&a.prototype;h&&(n(h,o)||e(h,o,{configurable:!0,value:l}),d&&!t&&r(h,"toString",i))},Ew}var Nw,c3;function B_e(){if(c3)return Nw;c3=1;var t=Cr(),e=Hr(),r=t.WeakMap;return Nw=e(r)&&/native code/.test(String(r)),Nw}var Cw,u3;function mm(){if(u3)return Cw;u3=1;var t=B_e(),e=Cr(),r=Dn(),n=ch(),i=Kr(),s=ZM(),o=Y0(),a=hm(),l="Object already initialized",c=e.TypeError,d=e.WeakMap,h,f,p,m=function(v){return p(v)?f(v):h(v,{})},g=function(v){return function(w){var x;if(!r(w)||(x=f(w)).type!==v)throw new c("Incompatible receiver, "+v+" required");return x}};if(t||s.state){var b=s.state||(s.state=new d);b.get=b.get,b.has=b.has,b.set=b.set,h=function(v,w){if(b.has(v))throw new c(l);return w.facade=v,b.set(v,w),w},f=function(v){return b.get(v)||{}},p=function(v){return b.has(v)}}else{var y=o("state");a[y]=!0,h=function(v,w){if(i(v,y))throw new c(l);return w.facade=v,n(v,y,w),w},f=function(v){return i(v,y)?v[y]:{}},p=function(v){return i(v,y)}}return Cw={set:h,get:f,has:p,enforce:m,getterFor:g},Cw}var kw,d3;function hh(){if(d3)return kw;d3=1;var t=W0(),e=Pt(),r=V0(),n=gs(),i=hl(),s=r$(),o=e([].push),a=function(l){var c=l===1,d=l===2,h=l===3,f=l===4,p=l===6,m=l===7,g=l===5||p;return function(b,y,v,w){for(var x=n(b),S=r(x),_=i(S),N=t(y,v),E=0,k=w||s,C=c?k(b,_):d||m?k(b,0):void 0,O,P;_>E;E++)if((g||E in S)&&(O=S[E],P=N(O,E,x),l))if(c)C[E]=P;else if(P)switch(l){case 3:return!0;case 5:return O;case 6:return E;case 2:o(C,O)}else switch(l){case 4:return!1;case 7:o(C,O)}return p?-1:h||f?f:C}};return kw={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterReject:a(7)},kw}var h3;function z_e(){if(h3)return LL;h3=1;var t=Ve(),e=Cr(),r=ti(),n=Pt(),i=ah(),s=kr(),o=sh(),a=kt(),l=Kr(),c=Wr(),d=Vo(),h=Vs(),f=e$(),p=pl(),m=am(),g=fm(),b=G0(),y=Q0(),v=Qie(),w=X0(),x=H0(),S=Vi(),_=s$(),N=XM(),E=pm(),k=o$(),C=lh(),O=Y0(),P=hm(),j=U0(),M=Gr(),A=J0(),I=Jt(),L=Xie(),F=Yc(),W=mm(),B=hh().forEach,U=O("hidden"),K="Symbol",fe="prototype",we=W.set,Fe=W.getterFor(K),Se=Object[fe],Oe=e.Symbol,$e=Oe&&Oe[fe],pt=e.RangeError,it=e.TypeError,mt=e.QObject,X=x.f,ve=S.f,He=v.f,lt=N.f,It=n([].push),ke=C("symbols"),tt=C("op-symbols"),xt=C("wks"),gt=!mt||!mt[fe]||!mt[fe].findChild,$=function(Ee,ie,de){var he=X(Se,ie);he&&delete Se[ie],ve(Ee,ie,de),he&&Ee!==Se&&ve(Se,ie,he)},q=s&&a(function(){return g(ve({},"a",{get:function(){return ve(this,"a",{value:7}).a}})).a!==7})?$:ve,V=function(Ee,ie){var de=ke[Ee]=g($e);return we(de,{type:K,tag:Ee,description:ie}),s||(de.description=ie),de},oe=function(ie,de,he){ie===Se&&oe(tt,de,he),d(ie);var Ne=f(de);return d(he),l(ke,Ne)?(he.enumerable?(l(ie,U)&&ie[U][Ne]&&(ie[U][Ne]=!1),he=g(he,{enumerable:m(0,!1)})):(l(ie,U)||ve(ie,U,m(1,g(null))),ie[U][Ne]=!0),q(ie,Ne,he)):ve(ie,Ne,he)},Z=function(ie,de){d(ie);var he=h(de),Ne=b(he).concat(er(he));return B(Ne,function(st){(!s||r(ye,he,st))&&oe(ie,st,he[st])}),ie},J=function(ie,de){return de===void 0?g(ie):Z(g(ie),de)},ye=function(ie){var de=f(ie),he=r(lt,this,de);return this===Se&&l(ke,de)&&!l(tt,de)?!1:he||!l(this,de)||!l(ke,de)||l(this,U)&&this[U][de]?he:!0},Ye=function(ie,de){var he=h(ie),Ne=f(de);if(!(he===Se&&l(ke,Ne)&&!l(tt,Ne))){var st=X(he,Ne);return st&&l(ke,Ne)&&!(l(he,U)&&he[U][Ne])&&(st.enumerable=!0),st}},Je=function(ie){var de=He(h(ie)),he=[];return B(de,function(Ne){!l(ke,Ne)&&!l(P,Ne)&&It(he,Ne)}),he},er=function(Ee){var ie=Ee===Se,de=He(ie?tt:h(Ee)),he=[];return B(de,function(Ne){l(ke,Ne)&&(!ie||l(Se,Ne))&&It(he,ke[Ne])}),he};return o||(Oe=function(){if(c($e,this))throw new it("Symbol is not a constructor");var ie=!arguments.length||arguments[0]===void 0?void 0:p(arguments[0]),de=j(ie),he=function(Ne){var st=this===void 0?e:this;st===Se&&r(he,tt,Ne),l(st,U)&&l(st[U],de)&&(st[U][de]=!1);var ii=m(1,Ne);try{q(st,de,ii)}catch(Gi){if(!(Gi instanceof pt))throw Gi;$(st,de,ii)}};return s&&gt&&q(Se,de,{configurable:!0,set:he}),V(de,ie)},$e=Oe[fe],E($e,"toString",function(){return Fe(this).tag}),E(Oe,"withoutSetter",function(Ee){return V(j(Ee),Ee)}),N.f=ye,S.f=oe,_.f=Z,x.f=Ye,y.f=v.f=Je,w.f=er,A.f=function(Ee){return V(M(Ee),Ee)},s&&(k($e,"description",{configurable:!0,get:function(){return Fe(this).description}}),i||E(Se,"propertyIsEnumerable",ye,{unsafe:!0}))),t({global:!0,constructor:!0,wrap:!0,forced:!o,sham:!o},{Symbol:Oe}),B(b(xt),function(Ee){I(Ee)}),t({target:K,stat:!0,forced:!o},{useSetter:function(){gt=!0},useSimple:function(){gt=!1}}),t({target:"Object",stat:!0,forced:!o,sham:!s},{create:J,defineProperty:oe,defineProperties:Z,getOwnPropertyDescriptor:Ye}),t({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:Je}),L(),F(Oe,K),P[U]=!0,LL}var f3={},Tw,p3;function Jie(){if(p3)return Tw;p3=1;var t=sh();return Tw=t&&!!Symbol.for&&!!Symbol.keyFor,Tw}var m3;function V_e(){if(m3)return f3;m3=1;var t=Ve(),e=bi(),r=Kr(),n=pl(),i=lh(),s=Jie(),o=i("string-to-symbol-registry"),a=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{for:function(l){var c=n(l);if(r(o,c))return o[c];var d=e("Symbol")(c);return o[c]=d,a[d]=c,d}}),f3}var g3={},y3;function U_e(){if(y3)return g3;y3=1;var t=Ve(),e=Kr(),r=um(),n=oh(),i=lh(),s=Jie(),o=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{keyFor:function(l){if(!r(l))throw new TypeError(n(l)+" is not a symbol");if(e(o,l))return o[l]}}),g3}var v3={},Ow,b3;function H_e(){if(b3)return Ow;b3=1;var t=Pt(),e=Gc(),r=Hr(),n=Bo(),i=pl(),s=t([].push);return Ow=function(o){if(r(o))return o;if(e(o)){for(var a=o.length,l=[],c=0;c<a;c++){var d=o[c];typeof d=="string"?s(l,d):(typeof d=="number"||n(d)==="Number"||n(d)==="String")&&s(l,i(d))}var h=l.length,f=!0;return function(p,m){if(f)return f=!1,m;if(e(this))return m;for(var g=0;g<h;g++)if(l[g]===p)return m}}},Ow}var x3;function Zie(){if(x3)return v3;x3=1;var t=Ve(),e=bi(),r=z0(),n=ti(),i=Pt(),s=kt(),o=Hr(),a=um(),l=dh(),c=H_e(),d=sh(),h=String,f=e("JSON","stringify"),p=i(/./.exec),m=i("".charAt),g=i("".charCodeAt),b=i("".replace),y=i(1.1.toString),v=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,x=/^[\uDC00-\uDFFF]$/,S=!d||s(function(){var k=e("Symbol")("stringify detection");return f([k])!=="[null]"||f({a:k})!=="{}"||f(Object(k))!=="{}"}),_=s(function(){return f("\uDF06\uD834")!=='"\\udf06\\ud834"'||f("\uDEAD")!=='"\\udead"'}),N=function(k,C){var O=l(arguments),P=c(C);if(!(!o(P)&&(k===void 0||a(k))))return O[1]=function(j,M){if(o(P)&&(M=n(P,this,h(j),M)),!a(M))return M},r(f,null,O)},E=function(k,C,O){var P=m(O,C-1),j=m(O,C+1);return p(w,k)&&!p(x,j)||p(x,k)&&!p(w,P)?"\\u"+y(g(k,0),16):k};return f&&t({target:"JSON",stat:!0,arity:3,forced:S||_},{stringify:function(C,O,P){var j=l(arguments),M=r(S?N:f,null,j);return _&&typeof M=="string"?b(M,v,E):M}}),v3}var w3={},S3;function W_e(){if(S3)return w3;S3=1;var t=Ve(),e=sh(),r=kt(),n=X0(),i=gs(),s=!e||r(function(){n.f(1)});return t({target:"Object",stat:!0,forced:s},{getOwnPropertySymbols:function(a){var l=n.f;return l?l(i(a)):[]}}),w3}var _3;function ese(){return _3||(_3=1,z_e(),V_e(),U_e(),Zie(),W_e()),qL}var E3={},N3;function tse(){if(N3)return E3;N3=1;var t=Jt();return t("asyncDispose"),E3}var C3={},k3;function K_e(){if(k3)return C3;k3=1;var t=Jt();return t("asyncIterator"),C3}var T3={},O3;function rse(){if(O3)return T3;O3=1;var t=Jt();return t("dispose"),T3}var j3={},P3;function G_e(){if(P3)return j3;P3=1;var t=Jt();return t("hasInstance"),j3}var I3={},R3;function Y_e(){if(R3)return I3;R3=1;var t=Jt();return t("isConcatSpreadable"),I3}var M3={},$3;function nse(){if($3)return M3;$3=1;var t=Jt();return t("iterator"),M3}var D3={},A3;function Q_e(){if(A3)return D3;A3=1;var t=Jt();return t("match"),D3}var F3={},q3;function X_e(){if(q3)return F3;q3=1;var t=Jt();return t("matchAll"),F3}var L3={},B3;function J_e(){if(B3)return L3;B3=1;var t=Jt();return t("replace"),L3}var z3={},V3;function Z_e(){if(V3)return z3;V3=1;var t=Jt();return t("search"),z3}var U3={},H3;function eEe(){if(H3)return U3;H3=1;var t=Jt();return t("species"),U3}var W3={},K3;function tEe(){if(K3)return W3;K3=1;var t=Jt();return t("split"),W3}var G3={},Y3;function ise(){if(Y3)return G3;Y3=1;var t=Jt(),e=Xie();return t("toPrimitive"),e(),G3}var Q3={},X3;function rEe(){if(X3)return Q3;X3=1;var t=bi(),e=Jt(),r=Yc();return e("toStringTag"),r(t("Symbol"),"Symbol"),Q3}var J3={},Z3;function nEe(){if(Z3)return J3;Z3=1;var t=Jt();return t("unscopables"),J3}var e5={},t5;function iEe(){if(t5)return e5;t5=1;var t=Cr(),e=Yc();return e(t.JSON,"JSON",!0),e5}var jw,r5;function sEe(){if(r5)return jw;r5=1,Gie(),ese(),tse(),K_e(),rse(),G_e(),Y_e(),nse(),Q_e(),X_e(),J_e(),Z_e(),eEe(),tEe(),ise(),rEe(),nEe(),iEe();var t=$r();return jw=t.Symbol,jw}var n5={},Pw,i5;function oEe(){return i5||(i5=1,Pw=function(){}),Pw}var Iw,s5;function fh(){return s5||(s5=1,Iw={}),Iw}var Rw,o5;function aEe(){if(o5)return Rw;o5=1;var t=kr(),e=Kr(),r=Function.prototype,n=t&&Object.getOwnPropertyDescriptor,i=e(r,"name"),s=i&&(function(){}).name==="something",o=i&&(!t||t&&n(r,"name").configurable);return Rw={EXISTS:i,PROPER:s,CONFIGURABLE:o},Rw}var Mw,a5;function lEe(){if(a5)return Mw;a5=1;var t=kt();return Mw=!t(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),Mw}var $w,l5;function sse(){if(l5)return $w;l5=1;var t=Kr(),e=Hr(),r=gs(),n=Y0(),i=lEe(),s=n("IE_PROTO"),o=Object,a=o.prototype;return $w=i?o.getPrototypeOf:function(l){var c=r(l);if(t(c,s))return c[s];var d=c.constructor;return e(d)&&c instanceof d?d.prototype:c instanceof o?a:null},$w}var Dw,c5;function ose(){if(c5)return Dw;c5=1;var t=kt(),e=Hr(),r=Dn(),n=fm(),i=sse(),s=pm(),o=Gr(),a=ah(),l=o("iterator"),c=!1,d,h,f;[].keys&&(f=[].keys(),"next"in f?(h=i(i(f)),h!==Object.prototype&&(d=h)):c=!0);var p=!r(d)||t(function(){var m={};return d[l].call(m)!==m});return p?d={}:a&&(d=n(d)),e(d[l])||s(d,l,function(){return this}),Dw={IteratorPrototype:d,BUGGY_SAFARI_ITERATORS:c},Dw}var Aw,u5;function cEe(){if(u5)return Aw;u5=1;var t=ose().IteratorPrototype,e=fm(),r=am(),n=Yc(),i=fh(),s=function(){return this};return Aw=function(o,a,l,c){var d=a+" Iterator";return o.prototype=e(t,{next:r(+!c,l)}),n(o,d,!1,!0),i[d]=s,o},Aw}var Fw,d5;function uEe(){if(d5)return Fw;d5=1;var t=Pt(),e=zo();return Fw=function(r,n,i){try{return t(e(Object.getOwnPropertyDescriptor(r,n)[i]))}catch{}},Fw}var qw,h5;function dEe(){if(h5)return qw;h5=1;var t=Dn();return qw=function(e){return t(e)||e===null},qw}var Lw,f5;function hEe(){if(f5)return Lw;f5=1;var t=dEe(),e=String,r=TypeError;return Lw=function(n){if(t(n))return n;throw new r("Can't set "+e(n)+" as a prototype")},Lw}var Bw,p5;function fEe(){if(p5)return Bw;p5=1;var t=uEe(),e=Dn(),r=Kc(),n=hEe();return Bw=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,s={},o;try{o=t(Object.prototype,"__proto__","set"),o(s,[]),i=s instanceof Array}catch{}return function(l,c){return r(l),n(c),e(l)&&(i?o(l,c):l.__proto__=c),l}}():void 0),Bw}var zw,m5;function a$(){if(m5)return zw;m5=1;var t=Ve(),e=ti(),r=ah(),n=aEe(),i=Hr(),s=cEe(),o=sse(),a=fEe(),l=Yc(),c=ch(),d=pm(),h=Gr(),f=fh(),p=ose(),m=n.PROPER,g=n.CONFIGURABLE,b=p.IteratorPrototype,y=p.BUGGY_SAFARI_ITERATORS,v=h("iterator"),w="keys",x="values",S="entries",_=function(){return this};return zw=function(N,E,k,C,O,P,j){s(k,E,C);var M=function(we){if(we===O&&W)return W;if(!y&&we&&we in L)return L[we];switch(we){case w:return function(){return new k(this,we)};case x:return function(){return new k(this,we)};case S:return function(){return new k(this,we)}}return function(){return new k(this)}},A=E+" Iterator",I=!1,L=N.prototype,F=L[v]||L["@@iterator"]||O&&L[O],W=!y&&F||M(O),B=E==="Array"&&L.entries||F,U,K,fe;if(B&&(U=o(B.call(new N)),U!==Object.prototype&&U.next&&(!r&&o(U)!==b&&(a?a(U,b):i(U[v])||d(U,v,_)),l(U,A,!0,!0),r&&(f[A]=_))),m&&O===x&&F&&F.name!==x&&(!r&&g?c(L,"name",x):(I=!0,W=function(){return e(F,this)})),O)if(K={values:M(x),keys:P?W:M(w),entries:M(S)},j)for(fe in K)(y||I||!(fe in L))&&d(L,fe,K[fe]);else t({target:E,proto:!0,forced:y||I},K);return(!r||j)&&L[v]!==W&&d(L,v,W,{name:O}),f[E]=W,K},zw}var Vw,g5;function l$(){return g5||(g5=1,Vw=function(t,e){return{value:t,done:e}}),Vw}var Uw,y5;function ml(){if(y5)return Uw;y5=1;var t=Vs(),e=oEe(),r=fh(),n=mm(),i=Vi().f,s=a$(),o=l$(),a=ah(),l=kr(),c="Array Iterator",d=n.set,h=n.getterFor(c);Uw=s(Array,"Array",function(p,m){d(this,{type:c,target:t(p),index:0,kind:m})},function(){var p=h(this),m=p.target,g=p.index++;if(!m||g>=m.length)return p.target=null,o(void 0,!0);switch(p.kind){case"keys":return o(g,!1);case"values":return o(m[g],!1)}return o([g,m[g]],!1)},"values");var f=r.Arguments=r.Array;if(e("keys"),e("values"),e("entries"),!a&&l&&f.name!=="values")try{i(f,"name",{value:"values"})}catch{}return Uw}var Hw,v5;function pEe(){return v5||(v5=1,Hw={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),Hw}var b5;function gl(){if(b5)return n5;b5=1,ml();var t=pEe(),e=Cr(),r=Yc(),n=fh();for(var i in t)r(e[i],i),n[i]=n.Array;return n5}var Ww,x5;function ase(){if(x5)return Ww;x5=1;var t=sEe();return gl(),Ww=t,Ww}var w5={},S5;function mEe(){if(S5)return w5;S5=1;var t=Gr(),e=Vi().f,r=t("metadata"),n=Function.prototype;return n[r]===void 0&&e(n,r,{value:null}),w5}var _5={},E5;function gEe(){return E5||(E5=1,tse()),_5}var N5={},C5;function yEe(){return C5||(C5=1,rse()),N5}var k5={},T5;function vEe(){if(T5)return k5;T5=1;var t=Jt();return t("metadata"),k5}var Kw,O5;function bEe(){if(O5)return Kw;O5=1;var t=ase();return mEe(),gEe(),yEe(),vEe(),Kw=t,Kw}var j5={},Gw,P5;function lse(){if(P5)return Gw;P5=1;var t=bi(),e=Pt(),r=t("Symbol"),n=r.keyFor,i=e(r.prototype.valueOf);return Gw=r.isRegisteredSymbol||function(o){try{return n(i(o))!==void 0}catch{return!1}},Gw}var I5;function xEe(){if(I5)return j5;I5=1;var t=Ve(),e=lse();return t({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),j5}var R5={},Yw,M5;function cse(){if(M5)return Yw;M5=1;for(var t=lh(),e=bi(),r=Pt(),n=um(),i=Gr(),s=e("Symbol"),o=s.isWellKnownSymbol,a=e("Object","getOwnPropertyNames"),l=r(s.prototype.valueOf),c=t("wks"),d=0,h=a(s),f=h.length;d<f;d++)try{var p=h[d];n(s[p])&&i(p)}catch{}return Yw=function(g){if(o&&o(g))return!0;try{for(var b=l(g),y=0,v=a(c),w=v.length;y<w;y++)if(c[v[y]]==b)return!0}catch{}return!1},Yw}var $5;function wEe(){if($5)return R5;$5=1;var t=Ve(),e=cse();return t({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),R5}var D5={},A5;function SEe(){if(A5)return D5;A5=1;var t=Jt();return t("customMatcher"),D5}var F5={},q5;function _Ee(){if(q5)return F5;q5=1;var t=Jt();return t("observable"),F5}var L5={},B5;function EEe(){if(B5)return L5;B5=1;var t=Ve(),e=lse();return t({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),L5}var z5={},V5;function NEe(){if(V5)return z5;V5=1;var t=Ve(),e=cse();return t({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),z5}var U5={},H5;function CEe(){if(H5)return U5;H5=1;var t=Jt();return t("matcher"),U5}var W5={},K5;function kEe(){if(K5)return W5;K5=1;var t=Jt();return t("metadataKey"),W5}var G5={},Y5;function TEe(){if(Y5)return G5;Y5=1;var t=Jt();return t("patternMatch"),G5}var Q5={},X5;function OEe(){if(X5)return Q5;X5=1;var t=Jt();return t("replaceAll"),Q5}var Qw,J5;function jEe(){if(J5)return Qw;J5=1;var t=bEe();return xEe(),wEe(),SEe(),_Ee(),EEe(),NEe(),CEe(),kEe(),TEe(),OEe(),Qw=t,Qw}var Xw,Z5;function PEe(){return Z5||(Z5=1,Xw=jEe()),Xw}var IEe=PEe(),jg=rt(IEe),eB={},Jw,tB;function REe(){if(tB)return Jw;tB=1;var t=Pt(),e=uh(),r=pl(),n=Kc(),i=t("".charAt),s=t("".charCodeAt),o=t("".slice),a=function(l){return function(c,d){var h=r(n(c)),f=e(d),p=h.length,m,g;return f<0||f>=p?l?"":void 0:(m=s(h,f),m<55296||m>56319||f+1===p||(g=s(h,f+1))<56320||g>57343?l?i(h,f):m:l?o(h,f,f+2):(m-55296<<10)+(g-56320)+65536)}};return Jw={codeAt:a(!1),charAt:a(!0)},Jw}var rB;function Z0(){if(rB)return eB;rB=1;var t=REe().charAt,e=pl(),r=mm(),n=a$(),i=l$(),s="String Iterator",o=r.set,a=r.getterFor(s);return n(String,"String",function(l){o(this,{type:s,string:e(l),index:0})},function(){var c=a(this),d=c.string,h=c.index,f;return h>=d.length?i(void 0,!0):(f=t(d,h),c.index+=f.length,i(f,!1))}),eB}var Zw,nB;function MEe(){if(nB)return Zw;nB=1,ml(),Z0(),nse();var t=J0();return Zw=t.f("iterator"),Zw}var eS,iB;function use(){if(iB)return eS;iB=1;var t=MEe();return gl(),eS=t,eS}var tS,sB;function $Ee(){if(sB)return tS;sB=1;var t=use();return tS=t,tS}var rS,oB;function DEe(){if(oB)return rS;oB=1;var t=$Ee();return rS=t,rS}var nS,aB;function AEe(){return aB||(aB=1,nS=DEe()),nS}var FEe=AEe(),qEe=rt(FEe);function _p(t){"@babel/helpers - typeof";return _p=typeof jg=="function"&&typeof qEe=="symbol"?function(e){return typeof e}:function(e){return e&&typeof jg=="function"&&e.constructor===jg&&e!==jg.prototype?"symbol":typeof e},_p(t)}var iS,lB;function LEe(){if(lB)return iS;lB=1,ise();var t=J0();return iS=t.f("toPrimitive"),iS}var sS,cB;function BEe(){if(cB)return sS;cB=1;var t=LEe();return sS=t,sS}var oS,uB;function zEe(){if(uB)return oS;uB=1;var t=BEe();return oS=t,oS}var aS,dB;function VEe(){if(dB)return aS;dB=1;var t=zEe();return aS=t,aS}var lS,hB;function UEe(){return hB||(hB=1,lS=VEe()),lS}var HEe=UEe(),WEe=rt(HEe);function KEe(t,e){if(_p(t)!="object"||!t)return t;var r=t[WEe];if(r!==void 0){var n=r.call(t,e);if(_p(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GEe(t){var e=KEe(t,"string");return _p(e)=="symbol"?e:e+""}function Wa(t,e,r){return(e=GEe(e))in t?M_e(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var fB={},cS,pB;function YEe(){if(pB)return cS;pB=1;var t=Pt(),e=zo(),r=Dn(),n=Kr(),i=dh(),s=om(),o=Function,a=t([].concat),l=t([].join),c={},d=function(h,f,p){if(!n(c,f)){for(var m=[],g=0;g<f;g++)m[g]="a["+g+"]";c[f]=o("C,a","return new C("+l(m,",")+")")}return c[f](h,p)};return cS=s?o.bind:function(f){var p=e(this),m=p.prototype,g=i(arguments,1),b=function(){var v=a(g,i(arguments));return this instanceof b?d(p,v.length,v):p.apply(f,v)};return r(m)&&(b.prototype=m),b},cS}var mB;function QEe(){if(mB)return fB;mB=1;var t=Ve(),e=YEe();return t({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),fB}var uS,gB;function ri(){if(gB)return uS;gB=1;var t=Cr(),e=$r();return uS=function(r,n){var i=e[r+"Prototype"],s=i&&i[n];if(s)return s;var o=t[r],a=o&&o.prototype;return a&&a[n]},uS}var dS,yB;function XEe(){if(yB)return dS;yB=1,QEe();var t=ri();return dS=t("Function","bind"),dS}var hS,vB;function JEe(){if(vB)return hS;vB=1;var t=Wr(),e=XEe(),r=Function.prototype;return hS=function(n){var i=n.bind;return n===r||t(r,n)&&i===r.bind?e:i},hS}var fS,bB;function ZEe(){if(bB)return fS;bB=1;var t=JEe();return fS=t,fS}var pS,xB;function eNe(){return xB||(xB=1,pS=ZEe()),pS}var tNe=eNe(),dse=rt(tNe),wB={},mS,SB;function rNe(){if(SB)return mS;SB=1;var t=zo(),e=gs(),r=V0(),n=hl(),i=TypeError,s="Reduce of empty array with no initial value",o=function(a){return function(l,c,d,h){var f=e(l),p=r(f),m=n(f);if(t(c),m===0&&d<2)throw new i(s);var g=a?m-1:0,b=a?-1:1;if(d<2)for(;;){if(g in p){h=p[g],g+=b;break}if(g+=b,a?g<0:m<=g)throw new i(s)}for(;a?g>=0:m>g;g+=b)g in p&&(h=c(h,p[g],g,f));return h}};return mS={left:o(!1),right:o(!0)},mS}var gS,_B;function eb(){if(_B)return gS;_B=1;var t=kt();return gS=function(e,r){var n=[][e];return!!n&&t(function(){n.call(null,r||function(){return 1},1)})},gS}var yS,EB;function hse(){if(EB)return yS;EB=1;var t=Cr(),e=ih(),r=Bo(),n=function(i){return e.slice(0,i.length)===i};return yS=function(){return n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":t.Bun&&typeof Bun.version=="string"?"BUN":t.Deno&&typeof Deno.version=="object"?"DENO":r(t.process)==="process"?"NODE":t.window&&t.document?"BROWSER":"REST"}(),yS}var vS,NB;function nNe(){if(NB)return vS;NB=1;var t=hse();return vS=t==="NODE",vS}var CB;function iNe(){if(CB)return wB;CB=1;var t=Ve(),e=rNe().left,r=eb(),n=cm(),i=nNe(),s=!i&&n>79&&n<83,o=s||!r("reduce");return t({target:"Array",proto:!0,forced:o},{reduce:function(l){var c=arguments.length;return e(this,l,c,c>1?arguments[1]:void 0)}}),wB}var bS,kB;function sNe(){if(kB)return bS;kB=1,iNe();var t=ri();return bS=t("Array","reduce"),bS}var xS,TB;function oNe(){if(TB)return xS;TB=1;var t=Wr(),e=sNe(),r=Array.prototype;return xS=function(n){var i=n.reduce;return n===r||t(r,n)&&i===r.reduce?e:i},xS}var wS,OB;function aNe(){if(OB)return wS;OB=1;var t=oNe();return wS=t,wS}var SS,jB;function lNe(){return jB||(jB=1,SS=aNe()),SS}var cNe=lNe(),uNe=rt(cNe),PB={},IB;function dNe(){if(IB)return PB;IB=1;var t=Ve(),e=hh().filter,r=dm(),n=r("filter");return t({target:"Array",proto:!0,forced:!n},{filter:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),PB}var _S,RB;function hNe(){if(RB)return _S;RB=1,dNe();var t=ri();return _S=t("Array","filter"),_S}var ES,MB;function fNe(){if(MB)return ES;MB=1;var t=Wr(),e=hNe(),r=Array.prototype;return ES=function(n){var i=n.filter;return n===r||t(r,n)&&i===r.filter?e:i},ES}var NS,$B;function pNe(){if($B)return NS;$B=1;var t=fNe();return NS=t,NS}var CS,DB;function mNe(){return DB||(DB=1,CS=pNe()),CS}var gNe=mNe(),Lu=rt(gNe),AB={},FB;function yNe(){if(FB)return AB;FB=1;var t=Ve(),e=hh().map,r=dm(),n=r("map");return t({target:"Array",proto:!0,forced:!n},{map:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),AB}var kS,qB;function vNe(){if(qB)return kS;qB=1,yNe();var t=ri();return kS=t("Array","map"),kS}var TS,LB;function bNe(){if(LB)return TS;LB=1;var t=Wr(),e=vNe(),r=Array.prototype;return TS=function(n){var i=n.map;return n===r||t(r,n)&&i===r.map?e:i},TS}var OS,BB;function xNe(){if(BB)return OS;BB=1;var t=bNe();return OS=t,OS}var jS,zB;function wNe(){return zB||(zB=1,jS=xNe()),jS}var SNe=wNe(),ns=rt(SNe),PS,VB;function _Ne(){return VB||(VB=1,PS=ase()),PS}var ENe=_Ne(),NNe=rt(ENe),UB={},HB;function CNe(){if(HB)return UB;HB=1;var t=Ve(),e=Gc(),r=Kie(),n=Dn(),i=n$(),s=hl(),o=Vs(),a=K0(),l=Gr(),c=dm(),d=dh(),h=c("slice"),f=l("species"),p=Array,m=Math.max;return t({target:"Array",proto:!0,forced:!h},{slice:function(b,y){var v=o(this),w=s(v),x=i(b,w),S=i(y===void 0?w:y,w),_,N,E;if(e(v)&&(_=v.constructor,r(_)&&(_===p||e(_.prototype))?_=void 0:n(_)&&(_=_[f],_===null&&(_=void 0)),_===p||_===void 0))return d(v,x,S);for(N=new(_===void 0?p:_)(m(S-x,0)),E=0;x<S;x++,E++)x in v&&a(N,E,v[x]);return N.length=E,N}}),UB}var IS,WB;function kNe(){if(WB)return IS;WB=1,CNe();var t=ri();return IS=t("Array","slice"),IS}var RS,KB;function TNe(){if(KB)return RS;KB=1;var t=Wr(),e=kNe(),r=Array.prototype;return RS=function(n){var i=n.slice;return n===r||t(r,n)&&i===r.slice?e:i},RS}var MS,GB;function ONe(){if(GB)return MS;GB=1;var t=TNe();return MS=t,MS}var $S,YB;function jNe(){return YB||(YB=1,$S=ONe()),$S}var PNe=jNe(),INe=rt(PNe),QB={},DS,XB;function fse(){if(XB)return DS;XB=1;var t=bi(),e=Pt(),r=Q0(),n=X0(),i=Vo(),s=e([].concat);return DS=t("Reflect","ownKeys")||function(a){var l=r.f(i(a)),c=n.f;return c?s(l,c(a)):l},DS}var JB;function RNe(){if(JB)return QB;JB=1;var t=Ve(),e=fse();return t({target:"Reflect",stat:!0},{ownKeys:e}),QB}var AS,ZB;function MNe(){if(ZB)return AS;ZB=1,RNe();var t=$r();return AS=t.Reflect.ownKeys,AS}var FS,ez;function $Ne(){if(ez)return FS;ez=1;var t=MNe();return FS=t,FS}var qS,tz;function DNe(){return tz||(tz=1,qS=$Ne()),qS}var ANe=DNe(),FNe=rt(ANe),rz={},nz;function qNe(){if(nz)return rz;nz=1;var t=Ve(),e=Gc();return t({target:"Array",stat:!0},{isArray:e}),rz}var LS,iz;function LNe(){if(iz)return LS;iz=1,qNe();var t=$r();return LS=t.Array.isArray,LS}var BS,sz;function BNe(){if(sz)return BS;sz=1;var t=LNe();return BS=t,BS}var zS,oz;function zNe(){return oz||(oz=1,zS=BNe()),zS}var VNe=zNe(),Ns=rt(VNe),az={},lz;function UNe(){if(lz)return az;lz=1;var t=Ve(),e=gs(),r=G0(),n=kt(),i=n(function(){r(1)});return t({target:"Object",stat:!0,forced:i},{keys:function(o){return r(e(o))}}),az}var VS,cz;function HNe(){if(cz)return VS;cz=1,UNe();var t=$r();return VS=t.Object.keys,VS}var US,uz;function WNe(){if(uz)return US;uz=1;var t=HNe();return US=t,US}var HS,dz;function KNe(){return dz||(dz=1,HS=WNe()),HS}var GNe=KNe(),c$=rt(GNe),hz={},WS,fz;function YNe(){if(fz)return WS;fz=1;var t=hh().forEach,e=eb(),r=e("forEach");return WS=r?[].forEach:function(i){return t(this,i,arguments.length>1?arguments[1]:void 0)},WS}var pz;function QNe(){if(pz)return hz;pz=1;var t=Ve(),e=YNe();return t({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),hz}var KS,mz;function XNe(){if(mz)return KS;mz=1,QNe();var t=ri();return KS=t("Array","forEach"),KS}var GS,gz;function JNe(){if(gz)return GS;gz=1;var t=XNe();return GS=t,GS}var YS,yz;function ZNe(){if(yz)return YS;yz=1;var t=fl(),e=Kr(),r=Wr(),n=JNe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return YS=function(o){var a=o.forEach;return o===i||r(i,o)&&a===i.forEach||e(s,t(o))?n:a},YS}var QS,vz;function eCe(){return vz||(vz=1,QS=ZNe()),QS}var tCe=eCe(),jc=rt(tCe),bz={},xz;function rCe(){if(xz)return bz;xz=1;var t=Ve(),e=Pt(),r=Gc(),n=e([].reverse),i=[1,2];return t({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),n(this)}}),bz}var XS,wz;function nCe(){if(wz)return XS;wz=1,rCe();var t=ri();return XS=t("Array","reverse"),XS}var JS,Sz;function iCe(){if(Sz)return JS;Sz=1;var t=Wr(),e=nCe(),r=Array.prototype;return JS=function(n){var i=n.reverse;return n===r||t(r,n)&&i===r.reverse?e:i},JS}var ZS,_z;function sCe(){if(_z)return ZS;_z=1;var t=iCe();return ZS=t,ZS}var e_,Ez;function oCe(){return Ez||(Ez=1,e_=sCe()),e_}var aCe=oCe(),lCe=rt(aCe),Nz={},t_,Cz;function cCe(){if(Cz)return t_;Cz=1;var t=kr(),e=Gc(),r=TypeError,n=Object.getOwnPropertyDescriptor,i=t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(s){return s instanceof TypeError}}();return t_=i?function(s,o){if(e(s)&&!n(s,"length").writable)throw new r("Cannot set read only .length");return s.length=o}:function(s,o){return s.length=o},t_}var r_,kz;function pse(){if(kz)return r_;kz=1;var t=oh(),e=TypeError;return r_=function(r,n){if(!delete r[n])throw new e("Cannot delete property "+t(n)+" of "+t(r))},r_}var Tz;function uCe(){if(Tz)return Nz;Tz=1;var t=Ve(),e=gs(),r=n$(),n=uh(),i=hl(),s=cCe(),o=Wie(),a=r$(),l=K0(),c=pse(),d=dm(),h=d("splice"),f=Math.max,p=Math.min;return t({target:"Array",proto:!0,forced:!h},{splice:function(g,b){var y=e(this),v=i(y),w=r(g,v),x=arguments.length,S,_,N,E,k,C;for(x===0?S=_=0:x===1?(S=0,_=v-w):(S=x-2,_=p(f(n(b),0),v-w)),o(v+S-_),N=a(y,_),E=0;E<_;E++)k=w+E,k in y&&l(N,E,y[k]);if(N.length=_,S<_){for(E=w;E<v-_;E++)k=E+_,C=E+S,k in y?y[C]=y[k]:c(y,C);for(E=v;E>v-_+S;E--)c(y,E-1)}else if(S>_)for(E=v-_;E>w;E--)k=E+_-1,C=E+S-1,k in y?y[C]=y[k]:c(y,C);for(E=0;E<S;E++)y[E+w]=arguments[E+2];return s(y,v-_+S),N}}),Nz}var n_,Oz;function dCe(){if(Oz)return n_;Oz=1,uCe();var t=ri();return n_=t("Array","splice"),n_}var i_,jz;function hCe(){if(jz)return i_;jz=1;var t=Wr(),e=dCe(),r=Array.prototype;return i_=function(n){var i=n.splice;return n===r||t(r,n)&&i===r.splice?e:i},i_}var s_,Pz;function fCe(){if(Pz)return s_;Pz=1;var t=hCe();return s_=t,s_}var o_,Iz;function pCe(){return Iz||(Iz=1,o_=fCe()),o_}var mCe=pCe(),mse=rt(mCe),Rz={},a_,Mz;function gCe(){if(Mz)return a_;Mz=1;var t=kr(),e=Pt(),r=ti(),n=kt(),i=G0(),s=X0(),o=XM(),a=gs(),l=V0(),c=Object.assign,d=Object.defineProperty,h=e([].concat);return a_=!c||n(function(){if(t&&c({b:1},c(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},p={},m=Symbol("assign detection"),g="abcdefghijklmnopqrst";return f[m]=7,g.split("").forEach(function(b){p[b]=b}),c({},f)[m]!==7||i(c({},p)).join("")!==g})?function(p,m){for(var g=a(p),b=arguments.length,y=1,v=s.f,w=o.f;b>y;)for(var x=l(arguments[y++]),S=v?h(i(x),v(x)):i(x),_=S.length,N=0,E;_>N;)E=S[N++],(!t||r(w,x,E))&&(g[E]=x[E]);return g}:c,a_}var $z;function yCe(){if($z)return Rz;$z=1;var t=Ve(),e=gCe();return t({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),Rz}var l_,Dz;function vCe(){if(Dz)return l_;Dz=1,yCe();var t=$r();return l_=t.Object.assign,l_}var c_,Az;function bCe(){if(Az)return c_;Az=1;var t=vCe();return c_=t,c_}var u_,Fz;function xCe(){return Fz||(Fz=1,u_=bCe()),u_}var wCe=xCe(),SCe=rt(wCe),d_,qz;function _Ce(){if(qz)return d_;qz=1,Gie();var t=ri();return d_=t("Array","concat"),d_}var h_,Lz;function ECe(){if(Lz)return h_;Lz=1;var t=Wr(),e=_Ce(),r=Array.prototype;return h_=function(n){var i=n.concat;return n===r||t(r,n)&&i===r.concat?e:i},h_}var f_,Bz;function NCe(){if(Bz)return f_;Bz=1;var t=ECe();return f_=t,f_}var p_,zz;function CCe(){return zz||(zz=1,p_=NCe()),p_}var kCe=CCe(),TCe=rt(kCe),Vz={},Uz;function OCe(){if(Uz)return Vz;Uz=1;var t=Ve(),e=kr(),r=fm();return t({target:"Object",stat:!0,sham:!e},{create:r}),Vz}var m_,Hz;function jCe(){if(Hz)return m_;Hz=1,OCe();var t=$r(),e=t.Object;return m_=function(n,i){return e.create(n,i)},m_}var g_,Wz;function PCe(){if(Wz)return g_;Wz=1;var t=jCe();return g_=t,g_}var y_,Kz;function ICe(){return Kz||(Kz=1,y_=PCe()),y_}var RCe=ICe(),MCe=rt(RCe),Gz={},v_,Yz;function $Ce(){if(Yz)return v_;Yz=1;var t=uh(),e=pl(),r=Kc(),n=RangeError;return v_=function(s){var o=e(r(this)),a="",l=t(s);if(l<0||l===1/0)throw new n("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(o+=o))l&1&&(a+=o);return a},v_}var b_,Qz;function DCe(){if(Qz)return b_;Qz=1;var t=Pt(),e=Hie(),r=pl(),n=$Ce(),i=Kc(),s=t(n),o=t("".slice),a=Math.ceil,l=function(c){return function(d,h,f){var p=r(i(d)),m=e(h),g=p.length,b=f===void 0?" ":r(f),y,v;return m<=g||b===""?p:(y=m-g,v=s(b,a(y/b.length)),v.length>y&&(v=o(v,0,y)),c?p+v:v+p)}};return b_={start:l(!1),end:l(!0)},b_}var x_,Xz;function ACe(){if(Xz)return x_;Xz=1;var t=Pt(),e=kt(),r=DCe().start,n=RangeError,i=isFinite,s=Math.abs,o=Date.prototype,a=o.toISOString,l=t(o.getTime),c=t(o.getUTCDate),d=t(o.getUTCFullYear),h=t(o.getUTCHours),f=t(o.getUTCMilliseconds),p=t(o.getUTCMinutes),m=t(o.getUTCMonth),g=t(o.getUTCSeconds);return x_=e(function(){return a.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){a.call(new Date(NaN))})?function(){if(!i(l(this)))throw new n("Invalid time value");var y=this,v=d(y),w=f(y),x=v<0?"-":v>9999?"+":"";return x+r(s(v),x?6:4,0)+"-"+r(m(y)+1,2,0)+"-"+r(c(y),2,0)+"T"+r(h(y),2,0)+":"+r(p(y),2,0)+":"+r(g(y),2,0)+"."+r(w,3,0)+"Z"}:a,x_}var Jz;function FCe(){if(Jz)return Gz;Jz=1;var t=Ve(),e=ti(),r=gs(),n=Lie(),i=ACe(),s=Bo(),o=kt(),a=o(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return t({target:"Date",proto:!0,forced:a},{toJSON:function(c){var d=r(this),h=n(d,"number");return typeof h=="number"&&!isFinite(h)?null:!("toISOString"in d)&&s(d)==="Date"?e(i,d):d.toISOString()}}),Gz}var w_,Zz;function qCe(){if(Zz)return w_;Zz=1,FCe(),Zie();var t=$r(),e=z0();return t.JSON||(t.JSON={stringify:JSON.stringify}),w_=function(n,i,s){return e(t.JSON.stringify,null,arguments)},w_}var S_,e6;function LCe(){if(e6)return S_;e6=1;var t=qCe();return S_=t,S_}var __,t6;function BCe(){return t6||(t6=1,__=LCe()),__}var zCe=BCe(),VCe=rt(zCe),r6={},n6={},E_,i6;function UCe(){if(i6)return E_;i6=1;var t=TypeError;return E_=function(e,r){if(e<r)throw new t("Not enough arguments");return e},E_}var N_,s6;function gse(){if(s6)return N_;s6=1;var t=Cr(),e=z0(),r=Hr(),n=hse(),i=ih(),s=dh(),o=UCe(),a=t.Function,l=/MSIE .\./.test(i)||n==="BUN"&&function(){var c=t.Bun.version.split(".");return c.length<3||c[0]==="0"&&(c[1]<3||c[1]==="3"&&c[2]==="0")}();return N_=function(c,d){var h=d?2:1;return l?function(f,p){var m=o(arguments.length,1)>h,g=r(f)?f:a(f),b=m?s(arguments,h):[],y=m?function(){e(g,this,b)}:g;return d?c(y,p):c(y)}:c},N_}var o6;function HCe(){if(o6)return n6;o6=1;var t=Ve(),e=Cr(),r=gse(),n=r(e.setInterval,!0);return t({global:!0,bind:!0,forced:e.setInterval!==n},{setInterval:n}),n6}var a6={},l6;function WCe(){if(l6)return a6;l6=1;var t=Ve(),e=Cr(),r=gse(),n=r(e.setTimeout,!0);return t({global:!0,bind:!0,forced:e.setTimeout!==n},{setTimeout:n}),a6}var c6;function KCe(){return c6||(c6=1,HCe(),WCe()),r6}var C_,u6;function GCe(){if(u6)return C_;u6=1,KCe();var t=$r();return C_=t.setTimeout,C_}var k_,d6;function YCe(){return d6||(d6=1,k_=GCe()),k_}var QCe=YCe(),XCe=rt(QCe),T_={exports:{}},h6;function JCe(){return h6||(h6=1,function(t){function e(n){if(n)return r(n);this._callbacks=new Map}function r(n){return Object.assign(n,e.prototype),n._callbacks=new Map,n}e.prototype.on=function(n,i){const s=this._callbacks.get(n)??[];return s.push(i),this._callbacks.set(n,s),this},e.prototype.once=function(n,i){const s=(...o)=>{this.off(n,s),i.apply(this,o)};return s.fn=i,this.on(n,s),this},e.prototype.off=function(n,i){if(n===void 0&&i===void 0)return this._callbacks.clear(),this;if(i===void 0)return this._callbacks.delete(n),this;const s=this._callbacks.get(n);if(s){for(const[o,a]of s.entries())if(a===i||a.fn===i){s.splice(o,1);break}s.length===0?this._callbacks.delete(n):this._callbacks.set(n,s)}return this},e.prototype.emit=function(n,...i){const s=this._callbacks.get(n);if(s){const o=[...s];for(const a of o)a.apply(this,i)}return this},e.prototype.listeners=function(n){return this._callbacks.get(n)??[]},e.prototype.listenerCount=function(n){if(n)return this.listeners(n).length;let i=0;for(const s of this._callbacks.values())i+=s.length;return i},e.prototype.hasListeners=function(n){return this.listenerCount(n)>0},e.prototype.addEventListener=e.prototype.on,e.prototype.removeListener=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,t.exports=e}(T_)),T_.exports}var ZCe=JCe(),eke=rt(ZCe);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function fs(){return fs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fs.apply(this,arguments)}function Ui(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Pg(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var EI;typeof Object.assign!="function"?EI=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])}return r}:EI=Object.assign;var Pc=EI,f6=["","webkit","Moz","MS","ms","o"],tke=typeof document>"u"?{style:{}}:document.createElement("div"),rke="function",Bu=Math.round,Ic=Math.abs,u$=Date.now;function tb(t,e){for(var r,n,i=e[0].toUpperCase()+e.slice(1),s=0;s<f6.length;){if(r=f6[s],n=r?r+i:e,n in t)return n;s++}}var xo;typeof window>"u"?xo={}:xo=window;var yse=tb(tke.style,"touchAction"),vse=yse!==void 0;function nke(){if(!vse)return!1;var t={},e=xo.CSS&&xo.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){return t[r]=e?xo.CSS.supports("touch-action",r):!0}),t}var bse="compute",xse="auto",NI="manipulation",oc="none",Ep="pan-x",Np="pan-y",Ig=nke(),ike=/mobile|tablet|ip(ad|hone|od)|android/i,wse="ontouchstart"in xo,ske=tb(xo,"PointerEvent")!==void 0,oke=wse&&ike.test(navigator.userAgent),gm="touch",ake="pen",d$="mouse",lke="kinect",cke=25,In=1,Qc=2,wr=4,Zn=8,qv=1,ym=2,vm=4,bm=8,Ld=16,Fs=ym|vm,ac=bm|Ld,Sse=Fs|ac,_se=["x","y"],Lv=["clientX","clientY"];function wo(t,e,r){var n;if(t)if(t.forEach)t.forEach(e,r);else if(t.length!==void 0)for(n=0;n<t.length;)e.call(r,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t)}function rb(t,e){return typeof t===rke?t.apply(e&&e[0]||void 0,e):t}function Fl(t,e){return t.indexOf(e)>-1}function uke(t){if(Fl(t,oc))return oc;var e=Fl(t,Ep),r=Fl(t,Np);return e&&r?oc:e||r?e?Ep:Np:Fl(t,NI)?NI:xse}var Ese=function(){function t(r,n){this.manager=r,this.set(n)}var e=t.prototype;return e.set=function(n){n===bse&&(n=this.compute()),vse&&this.manager.element.style&&Ig[n]&&(this.manager.element.style[yse]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return wo(this.manager.recognizers,function(i){rb(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),uke(n.join(" "))},e.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=Fl(o,oc)&&!Ig[oc],l=Fl(o,Np)&&!Ig[Np],c=Fl(o,Ep)&&!Ig[Ep];if(a){var d=n.pointers.length===1,h=n.distance<2,f=n.deltaTime<250;if(d&&h&&f)return}if(!(c&&l)&&(a||l&&s&Fs||c&&s&ac))return this.preventSrc(i)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},t}();function h$(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function Nse(t){var e=t.length;if(e===1)return{x:Bu(t[0].clientX),y:Bu(t[0].clientY)};for(var r=0,n=0,i=0;i<e;)r+=t[i].clientX,n+=t[i].clientY,i++;return{x:Bu(r/e),y:Bu(n/e)}}function p6(t){for(var e=[],r=0;r<t.pointers.length;)e[r]={clientX:Bu(t.pointers[r].clientX),clientY:Bu(t.pointers[r].clientY)},r++;return{timeStamp:u$(),pointers:e,center:Nse(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Bv(t,e,r){r||(r=_se);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.sqrt(n*n+i*i)}function CI(t,e,r){r||(r=_se);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.atan2(i,n)*180/Math.PI}function Cse(t,e){return t===e?qv:Ic(t)>=Ic(e)?t<0?ym:vm:e<0?bm:Ld}function dke(t,e){var r=e.center,n=t.offsetDelta||{},i=t.prevDelta||{},s=t.prevInput||{};(e.eventType===In||s.eventType===wr)&&(i=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:r.x,y:r.y}),e.deltaX=i.x+(r.x-n.x),e.deltaY=i.y+(r.y-n.y)}function kse(t,e,r){return{x:e/t||0,y:r/t||0}}function hke(t,e){return Bv(e[0],e[1],Lv)/Bv(t[0],t[1],Lv)}function fke(t,e){return CI(e[1],e[0],Lv)+CI(t[1],t[0],Lv)}function pke(t,e){var r=t.lastInterval||e,n=e.timeStamp-r.timeStamp,i,s,o,a;if(e.eventType!==Zn&&(n>cke||r.velocity===void 0)){var l=e.deltaX-r.deltaX,c=e.deltaY-r.deltaY,d=kse(n,l,c);s=d.x,o=d.y,i=Ic(d.x)>Ic(d.y)?d.x:d.y,a=Cse(l,c),t.lastInterval=e}else i=r.velocity,s=r.velocityX,o=r.velocityY,a=r.direction;e.velocity=i,e.velocityX=s,e.velocityY=o,e.direction=a}function mke(t,e){var r=t.session,n=e.pointers,i=n.length;r.firstInput||(r.firstInput=p6(e)),i>1&&!r.firstMultiple?r.firstMultiple=p6(e):i===1&&(r.firstMultiple=!1);var s=r.firstInput,o=r.firstMultiple,a=o?o.center:s.center,l=e.center=Nse(n);e.timeStamp=u$(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=CI(a,l),e.distance=Bv(a,l),dke(r,e),e.offsetDirection=Cse(e.deltaX,e.deltaY);var c=kse(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=Ic(c.x)>Ic(c.y)?c.x:c.y,e.scale=o?hke(o.pointers,n):1,e.rotation=o?fke(o.pointers,n):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,pke(r,e);var d=t.element,h=e.srcEvent,f;h.composedPath?f=h.composedPath()[0]:h.path?f=h.path[0]:f=h.target,h$(f,d)&&(d=f),e.target=d}function gke(t,e,r){var n=r.pointers.length,i=r.changedPointers.length,s=e&In&&n-i===0,o=e&(wr|Zn)&&n-i===0;r.isFirst=!!s,r.isFinal=!!o,s&&(t.session={}),r.eventType=e,mke(t,r),t.emit("hammer.input",r),t.recognize(r),t.session.prevInput=r}function Cp(t){return t.trim().split(/\s+/g)}function Af(t,e,r){wo(Cp(e),function(n){t.addEventListener(n,r,!1)})}function Ff(t,e,r){wo(Cp(e),function(n){t.removeEventListener(n,r,!1)})}function m6(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var ph=function(){function t(r,n){var i=this;this.manager=r,this.callback=n,this.element=r.element,this.target=r.options.inputTarget,this.domHandler=function(s){rb(r.options.enable,[r])&&i.handler(s)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&Af(this.element,this.evEl,this.domHandler),this.evTarget&&Af(this.target,this.evTarget,this.domHandler),this.evWin&&Af(m6(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Ff(this.element,this.evEl,this.domHandler),this.evTarget&&Ff(this.target,this.evTarget,this.domHandler),this.evWin&&Ff(m6(this.element),this.evWin,this.domHandler)},t}();function Rc(t,e,r){if(t.indexOf&&!r)return t.indexOf(e);for(var n=0;n<t.length;){if(r&&t[n][r]==e||!r&&t[n]===e)return n;n++}return-1}var yke={pointerdown:In,pointermove:Qc,pointerup:wr,pointercancel:Zn,pointerout:Zn},vke={2:gm,3:ake,4:d$,5:lke},Tse="pointerdown",Ose="pointermove pointerup pointercancel";xo.MSPointerEvent&&!xo.PointerEvent&&(Tse="MSPointerDown",Ose="MSPointerMove MSPointerUp MSPointerCancel");var jse=function(t){Ui(e,t);function e(){var n,i=e.prototype;return i.evEl=Tse,i.evWin=Ose,n=t.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var r=e.prototype;return r.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=yke[a],c=vke[i.pointerType]||i.pointerType,d=c===gm,h=Rc(s,i.pointerId,"pointerId");l&In&&(i.button===0||d)?h<0&&(s.push(i),h=s.length-1):l&(wr|Zn)&&(o=!0),!(h<0)&&(s[h]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:c,srcEvent:i}),o&&s.splice(h,1))},e}(ph);function kp(t){return Array.prototype.slice.call(t,0)}function f$(t,e,r){for(var n=[],i=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];Rc(i,o)<0&&n.push(t[s]),i[s]=o,s++}return r&&(e?n=n.sort(function(a,l){return a[e]>l[e]}):n=n.sort()),n}var bke={touchstart:In,touchmove:Qc,touchend:wr,touchcancel:Zn},xke="touchstart touchmove touchend touchcancel",p$=function(t){Ui(e,t);function e(){var n;return e.prototype.evTarget=xke,n=t.apply(this,arguments)||this,n.targetIds={},n}var r=e.prototype;return r.handler=function(i){var s=bke[i.type],o=wke.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:gm,srcEvent:i})},e}(ph);function wke(t,e){var r=kp(t.touches),n=this.targetIds;if(e&(In|Qc)&&r.length===1)return n[r[0].identifier]=!0,[r,r];var i,s,o=kp(t.changedTouches),a=[],l=this.target;if(s=r.filter(function(c){return h$(c.target,l)}),e===In)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),e&(wr|Zn)&&delete n[o[i].identifier],i++;if(a.length)return[f$(s.concat(a),"identifier",!0),a]}var Ske={mousedown:In,mousemove:Qc,mouseup:wr},_ke="mousedown",Eke="mousemove mouseup",m$=function(t){Ui(e,t);function e(){var n,i=e.prototype;return i.evEl=_ke,i.evWin=Eke,n=t.apply(this,arguments)||this,n.pressed=!1,n}var r=e.prototype;return r.handler=function(i){var s=Ske[i.type];s&In&&i.button===0&&(this.pressed=!0),s&Qc&&i.which!==1&&(s=wr),this.pressed&&(s&wr&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:d$,srcEvent:i}))},e}(ph),Nke=2500,g6=25;function y6(t){var e=t.changedPointers,r=e[0];if(r.identifier===this.primaryTouch){var n={x:r.clientX,y:r.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,Nke)}}function Cke(t,e){t&In?(this.primaryTouch=e.changedPointers[0].identifier,y6.call(this,e)):t&(wr|Zn)&&y6.call(this,e)}function kke(t){for(var e=t.srcEvent.clientX,r=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(e-i.x),o=Math.abs(r-i.y);if(s<=g6&&o<=g6)return!0}return!1}var Pse=function(){var t=function(e){Ui(r,e);function r(i,s){var o;return o=e.call(this,i,s)||this,o.handler=function(a,l,c){var d=c.pointerType===gm,h=c.pointerType===d$;if(!(h&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)Cke.call(Pg(Pg(o)),l,c);else if(h&&kke.call(Pg(Pg(o)),c))return;o.callback(a,l,c)}},o.touch=new p$(o.manager,o.handler),o.mouse=new m$(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=r.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},r}(ph);return t}();function Tke(t){var e,r=t.options.inputClass;return r?e=r:ske?e=jse:oke?e=p$:wse?e=Pse:e=m$,new e(t,gke)}function zu(t,e,r){return Array.isArray(t)?(wo(t,r[e],r),!0):!1}var oy=1,Fi=2,Bd=4,Ka=8,So=Ka,Tp=16,Ps=32,Oke=1;function jke(){return Oke++}function Rg(t,e){var r=e.manager;return r?r.get(t):t}function v6(t){return t&Tp?"cancel":t&Ka?"end":t&Bd?"move":t&Fi?"start":""}var xm=function(){function t(r){r===void 0&&(r={}),this.options=fs({enable:!0},r),this.id=jke(),this.manager=null,this.state=oy,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(n){return Pc(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(zu(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=Rg(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return zu(n,"dropRecognizeWith",this)?this:(n=Rg(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(zu(n,"requireFailure",this))return this;var i=this.requireFail;return n=Rg(n,this),Rc(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(zu(n,"dropRequireFailure",this))return this;n=Rg(n,this);var i=Rc(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<Ka&&o(i.options.event+v6(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=Ka&&o(i.options.event+v6(s))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=Ps},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(Ps|oy)))return!1;n++}return!0},e.recognize=function(n){var i=Pc({},n);if(!rb(this.options.enable,[this,i])){this.reset(),this.state=Ps;return}this.state&(So|Tp|Ps)&&(this.state=oy),this.state=this.process(i),this.state&(Fi|Bd|Ka|Tp)&&this.tryEmit(i)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},t}(),kI=function(t){Ui(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,fs({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var r=e.prototype;return r.getTouchAction=function(){return[NI]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime<o.time;if(this.reset(),i.eventType&In&&this.count===0)return this.failTimeout();if(l&&c&&a){if(i.eventType!==wr)return this.failTimeout();var d=this.pTime?i.timeStamp-this.pTime<o.interval:!0,h=!this.pCenter||Bv(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!h||!d?this.count=1:this.count+=1,this._input=i;var f=this.count%o.taps;if(f===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=So,s.tryEmit()},o.interval),Fi):So}return Ps},r.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=Ps},this.options.interval),Ps},r.reset=function(){clearTimeout(this._timer)},r.emit=function(){this.state===So&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(xm),zd=function(t){Ui(e,t);function e(n){return n===void 0&&(n={}),t.call(this,fs({pointers:1},n))||this}var r=e.prototype;return r.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},r.process=function(i){var s=this.state,o=i.eventType,a=s&(Fi|Bd),l=this.attrTest(i);return a&&(o&Zn||!l)?s|Tp:a||l?o&wr?s|Ka:s&Fi?s|Bd:Fi:Ps},e}(xm);function Ise(t){return t===Ld?"down":t===bm?"up":t===ym?"left":t===vm?"right":""}var g$=function(t){Ui(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,fs({event:"pan",threshold:10,pointers:1,direction:Sse},n))||this,i.pX=null,i.pY=null,i}var r=e.prototype;return r.getTouchAction=function(){var i=this.options.direction,s=[];return i&Fs&&s.push(Np),i&ac&&s.push(Ep),s},r.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,c=i.deltaX,d=i.deltaY;return l&s.direction||(s.direction&Fs?(l=c===0?qv:c<0?ym:vm,o=c!==this.pX,a=Math.abs(i.deltaX)):(l=d===0?qv:d<0?bm:Ld,o=d!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},r.attrTest=function(i){return zd.prototype.attrTest.call(this,i)&&(this.state&Fi||!(this.state&Fi)&&this.directionTest(i))},r.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=Ise(i.direction);s&&(i.additionalEvent=this.options.event+s),t.prototype.emit.call(this,i)},e}(zd),Rse=function(t){Ui(e,t);function e(n){return n===void 0&&(n={}),t.call(this,fs({event:"swipe",threshold:10,velocity:.3,direction:Fs|ac,pointers:1},n))||this}var r=e.prototype;return r.getTouchAction=function(){return g$.prototype.getTouchAction.call(this)},r.attrTest=function(i){var s=this.options.direction,o;return s&(Fs|ac)?o=i.overallVelocity:s&Fs?o=i.overallVelocityX:s&ac&&(o=i.overallVelocityY),t.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&Ic(o)>this.options.velocity&&i.eventType&wr},r.emit=function(i){var s=Ise(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},e}(zd),Mse=function(t){Ui(e,t);function e(n){return n===void 0&&(n={}),t.call(this,fs({event:"pinch",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[oc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&Fi)},r.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}t.prototype.emit.call(this,i)},e}(zd),$se=function(t){Ui(e,t);function e(n){return n===void 0&&(n={}),t.call(this,fs({event:"rotate",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[oc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&Fi)},e}(zd),Dse=function(t){Ui(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,fs({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var r=e.prototype;return r.getTouchAction=function(){return[xse]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(wr|Zn)&&!c)this.reset();else if(i.eventType&In)this.reset(),this._timer=setTimeout(function(){s.state=So,s.tryEmit()},o.time);else if(i.eventType&wr)return So;return Ps},r.reset=function(){clearTimeout(this._timer)},r.emit=function(i){this.state===So&&(i&&i.eventType&wr?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=u$(),this.manager.emit(this.options.event,this._input)))},e}(xm),Ase={domEvents:!1,touchAction:bse,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},b6=[[$se,{enable:!1}],[Mse,{enable:!1},["rotate"]],[Rse,{direction:Fs}],[g$,{direction:Fs},["swipe"]],[kI],[kI,{event:"doubletap",taps:2},["tap"]],[Dse]],Pke=1,x6=2;function w6(t,e){var r=t.element;if(r.style){var n;wo(t.options.cssProps,function(i,s){n=tb(r.style,s),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function Ike(t,e){var r=document.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}var S6=function(){function t(r,n){var i=this;this.options=Pc({},Ase,n||{}),this.options.inputTarget=this.options.inputTarget||r,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=r,this.input=Tke(this),this.touchAction=new Ese(this,this.options.touchAction),w6(this,!0),wo(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var e=t.prototype;return e.set=function(n){return Pc(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?x6:Pke},e.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&So)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==x6&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(Fi|Bd|Ka)&&(i.curRecognizer=s,a=s),l++}},e.get=function(n){if(n instanceof xm)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},e.add=function(n){if(zu(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(zu(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=Rc(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},e.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return wo(Cp(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},e.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return wo(Cp(n),function(o){i?s[o]&&s[o].splice(Rc(s[o],i),1):delete s[o]}),this},e.emit=function(n,i){this.options.domEvents&&Ike(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},e.destroy=function(){this.element&&w6(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),Rke={touchstart:In,touchmove:Qc,touchend:wr,touchcancel:Zn},Mke="touchstart",$ke="touchstart touchmove touchend touchcancel",Dke=function(t){Ui(e,t);function e(){var n,i=e.prototype;return i.evTarget=Mke,i.evWin=$ke,n=t.apply(this,arguments)||this,n.started=!1,n}var r=e.prototype;return r.handler=function(i){var s=Rke[i.type];if(s===In&&(this.started=!0),!!this.started){var o=Ake.call(this,i,s);s&(wr|Zn)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:gm,srcEvent:i})}},e}(ph);function Ake(t,e){var r=kp(t.touches),n=kp(t.changedTouches);return e&(wr|Zn)&&(r=f$(r.concat(n),"identifier",!0)),[r,n]}function Fse(t,e,r){var n="DEPRECATED METHOD: "+e+`
`+r+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),t.apply(this,arguments)}}var qse=Fse(function(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;)(!r||r&&t[n[i]]===void 0)&&(t[n[i]]=e[n[i]]),i++;return t},"extend","Use `assign`."),Fke=Fse(function(t,e){return qse(t,e,!0)},"merge","Use `assign`.");function qke(t,e,r){var n=e.prototype,i;i=t.prototype=Object.create(n),i.constructor=t,i._super=n,r&&Pc(i,r)}function _6(t,e){return function(){return t.apply(e,arguments)}}var Lke=function(){var t=function(r,n){return n===void 0&&(n={}),new S6(r,fs({recognizers:b6.concat()},n))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=Sse,t.DIRECTION_DOWN=Ld,t.DIRECTION_LEFT=ym,t.DIRECTION_RIGHT=vm,t.DIRECTION_UP=bm,t.DIRECTION_HORIZONTAL=Fs,t.DIRECTION_VERTICAL=ac,t.DIRECTION_NONE=qv,t.DIRECTION_DOWN=Ld,t.INPUT_START=In,t.INPUT_MOVE=Qc,t.INPUT_END=wr,t.INPUT_CANCEL=Zn,t.STATE_POSSIBLE=oy,t.STATE_BEGAN=Fi,t.STATE_CHANGED=Bd,t.STATE_ENDED=Ka,t.STATE_RECOGNIZED=So,t.STATE_CANCELLED=Tp,t.STATE_FAILED=Ps,t.Manager=S6,t.Input=ph,t.TouchAction=Ese,t.TouchInput=p$,t.MouseInput=m$,t.PointerEventInput=jse,t.TouchMouseInput=Pse,t.SingleTouchInput=Dke,t.Recognizer=xm,t.AttrRecognizer=zd,t.Tap=kI,t.Pan=g$,t.Swipe=Rse,t.Pinch=Mse,t.Rotate=$se,t.Press=Dse,t.on=Af,t.off=Ff,t.each=wo,t.merge=Fke,t.extend=qse,t.bindFn=_6,t.assign=Pc,t.inherit=qke,t.bindFn=_6,t.prefixed=tb,t.toArray=kp,t.inArray=Rc,t.uniqueArray=f$,t.splitStr=Cp,t.boolOrFn=rb,t.hasParent=h$,t.addEventListeners=Af,t.removeEventListeners=Ff,t.defaults=Pc({},Ase,{preset:b6}),t}();const Lse=NNe("DELETE");function Bke(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return Bse({},t,...r)}function Bse(){const t=zv(...arguments);return Vse(t),t}function zv(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(e.length<2)return e[0];if(e.length>2)return zv(Bse(e[0],e[1]),...INe(e).call(e,2));const n=e[0],i=e[1];if(n instanceof Date&&i instanceof Date)return n.setTime(i.getTime()),n;for(const s of FNe(i))Object.prototype.propertyIsEnumerable.call(i,s)&&(i[s]===Lse?delete n[s]:n[s]!==null&&i[s]!==null&&typeof n[s]=="object"&&typeof i[s]=="object"&&!Ns(n[s])&&!Ns(i[s])?n[s]=zv(n[s],i[s]):n[s]=zse(i[s]));return n}function zse(t){return Ns(t)?ns(t).call(t,e=>zse(e)):typeof t=="object"&&t!==null?t instanceof Date?new Date(t.getTime()):zv({},t):t}function Vse(t){for(const e of c$(t))t[e]===Lse?delete t[e]:typeof t[e]=="object"&&t[e]!==null&&Vse(t[e])}function zke(){const t=()=>{};return{on:t,off:t,destroy:t,emit:t,get(){return{set:t}}}}const Vke=typeof window<"u"?window.Hammer||Lke:function(){return zke()};function po(t){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const r=Vke(this._dom.overlay);r.on("tap",dse(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{r.destroy()});const n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];jc(n).call(n,i=>{r.on(i,s=>{s.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=i=>{Uke(i.target,t)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=i=>{("key"in i?i.key==="Escape":i.keyCode===27)&&this.deactivate()}}eke(po.prototype);po.current=null;po.prototype.destroy=function(){this.deactivate();for(const r of lCe(t=mse(e=this._cleanupQueue).call(e,0)).call(t)){var t,e;r()}};po.prototype.activate=function(){po.current&&po.current.deactivate(),po.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};po.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};po.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};function Uke(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}var O_,E6;function Hke(){if(E6)return O_;E6=1,ese();var t=$r();return O_=t.Object.getOwnPropertySymbols,O_}var j_,N6;function Wke(){if(N6)return j_;N6=1;var t=Hke();return j_=t,j_}var P_,C6;function Kke(){return C6||(C6=1,P_=Wke()),P_}var Gke=Kke(),k6=rt(Gke),I_={exports:{}},T6={},O6;function Yke(){if(O6)return T6;O6=1;var t=Ve(),e=kt(),r=Vs(),n=H0().f,i=kr(),s=!i||e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getOwnPropertyDescriptor:function(a,l){return n(r(a),l)}}),T6}var j6;function Qke(){if(j6)return I_.exports;j6=1,Yke();var t=$r(),e=t.Object,r=I_.exports=function(i,s){return e.getOwnPropertyDescriptor(i,s)};return e.getOwnPropertyDescriptor.sham&&(r.sham=!0),I_.exports}var R_,P6;function Xke(){if(P6)return R_;P6=1;var t=Qke();return R_=t,R_}var M_,I6;function Jke(){return I6||(I6=1,M_=Xke()),M_}var Zke=Jke(),Use=rt(Zke),R6={},M6;function eTe(){if(M6)return R6;M6=1;var t=Ve(),e=kr(),r=fse(),n=Vs(),i=H0(),s=K0();return t({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(a){for(var l=n(a),c=i.f,d=r(l),h={},f=0,p,m;d.length>f;)m=c(l,p=d[f++]),m!==void 0&&s(h,p,m);return h}}),R6}var $_,$6;function tTe(){if($6)return $_;$6=1,eTe();var t=$r();return $_=t.Object.getOwnPropertyDescriptors,$_}var D_,D6;function rTe(){if(D6)return D_;D6=1;var t=tTe();return D_=t,D_}var A_,A6;function nTe(){return A6||(A6=1,A_=rTe()),A_}var iTe=nTe(),F6=rt(iTe),F_={exports:{}},q6={},L6;function sTe(){if(L6)return q6;L6=1;var t=Ve(),e=kr(),r=s$().f;return t({target:"Object",stat:!0,forced:Object.defineProperties!==r,sham:!e},{defineProperties:r}),q6}var B6;function oTe(){if(B6)return F_.exports;B6=1,sTe();var t=$r(),e=t.Object,r=F_.exports=function(i,s){return e.defineProperties(i,s)};return e.defineProperties.sham&&(r.sham=!0),F_.exports}var q_,z6;function aTe(){if(z6)return q_;z6=1;var t=oTe();return q_=t,q_}var L_,V6;function lTe(){return V6||(V6=1,L_=aTe()),L_}var cTe=lTe(),uTe=rt(cTe),B_,U6;function dTe(){return U6||(U6=1,B_=Uie()),B_}var hTe=dTe(),fTe=rt(hTe),H6={},W6={},z_={exports:{}},V_,K6;function pTe(){if(K6)return V_;K6=1;var t=kt();return V_=t(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),V_}var U_,G6;function mTe(){if(G6)return U_;G6=1;var t=kt(),e=Dn(),r=Bo(),n=pTe(),i=Object.isExtensible,s=t(function(){});return U_=s||n?function(a){return!e(a)||n&&r(a)==="ArrayBuffer"?!1:i?i(a):!0}:i,U_}var H_,Y6;function gTe(){if(Y6)return H_;Y6=1;var t=kt();return H_=!t(function(){return Object.isExtensible(Object.preventExtensions({}))}),H_}var Q6;function Hse(){if(Q6)return z_.exports;Q6=1;var t=Ve(),e=Pt(),r=hm(),n=Dn(),i=Kr(),s=Vi().f,o=Q0(),a=Qie(),l=mTe(),c=U0(),d=gTe(),h=!1,f=c("meta"),p=0,m=function(x){s(x,f,{value:{objectID:"O"+p++,weakData:{}}})},g=function(x,S){if(!n(x))return typeof x=="symbol"?x:(typeof x=="string"?"S":"P")+x;if(!i(x,f)){if(!l(x))return"F";if(!S)return"E";m(x)}return x[f].objectID},b=function(x,S){if(!i(x,f)){if(!l(x))return!0;if(!S)return!1;m(x)}return x[f].weakData},y=function(x){return d&&h&&l(x)&&!i(x,f)&&m(x),x},v=function(){w.enable=function(){},h=!0;var x=o.f,S=e([].splice),_={};_[f]=1,x(_).length&&(o.f=function(N){for(var E=x(N),k=0,C=E.length;k<C;k++)if(E[k]===f){S(E,k,1);break}return E},t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:a.f}))},w=z_.exports={enable:v,fastKey:g,getWeakData:b,onFreeze:y};return r[f]=!0,z_.exports}var W_,X6;function yTe(){if(X6)return W_;X6=1;var t=Gr(),e=fh(),r=t("iterator"),n=Array.prototype;return W_=function(i){return i!==void 0&&(e.Array===i||n[r]===i)},W_}var K_,J6;function Wse(){if(J6)return K_;J6=1;var t=fl(),e=JM(),r=lm(),n=fh(),i=Gr(),s=i("iterator");return K_=function(o){if(!r(o))return e(o,s)||e(o,"@@iterator")||n[t(o)]},K_}var G_,Z6;function Kse(){if(Z6)return G_;Z6=1;var t=ti(),e=zo(),r=Vo(),n=oh(),i=Wse(),s=TypeError;return G_=function(o,a){var l=arguments.length<2?i(o):a;if(e(l))return r(t(l,o));throw new s(n(o)+" is not iterable")},G_}var Y_,e8;function y$(){if(e8)return Y_;e8=1;var t=ti(),e=Vo(),r=JM();return Y_=function(n,i,s){var o,a;e(n);try{if(o=r(n,"return"),!o){if(i==="throw")throw s;return s}o=t(o,n)}catch(l){a=!0,o=l}if(i==="throw")throw s;if(a)throw o;return e(o),s},Y_}var Q_,t8;function v$(){if(t8)return Q_;t8=1;var t=W0(),e=ti(),r=Vo(),n=oh(),i=yTe(),s=hl(),o=Wr(),a=Kse(),l=Wse(),c=y$(),d=TypeError,h=function(p,m){this.stopped=p,this.result=m},f=h.prototype;return Q_=function(p,m,g){var b=g&&g.that,y=!!(g&&g.AS_ENTRIES),v=!!(g&&g.IS_RECORD),w=!!(g&&g.IS_ITERATOR),x=!!(g&&g.INTERRUPTED),S=t(m,b),_,N,E,k,C,O,P,j=function(A){return _&&c(_,"normal"),new h(!0,A)},M=function(A){return y?(r(A),x?S(A[0],A[1],j):S(A[0],A[1])):x?S(A,j):S(A)};if(v)_=p.iterator;else if(w)_=p;else{if(N=l(p),!N)throw new d(n(p)+" is not iterable");if(i(N)){for(E=0,k=s(p);k>E;E++)if(C=M(p[E]),C&&o(f,C))return C;return new h(!1)}_=a(p,N)}for(O=v?p.next:_.next;!(P=e(O,_)).done;){try{C=M(P.value)}catch(A){c(_,"throw",A)}if(typeof C=="object"&&C&&o(f,C))return C}return new h(!1)},Q_}var X_,r8;function Gse(){if(r8)return X_;r8=1;var t=Wr(),e=TypeError;return X_=function(r,n){if(t(n,r))return r;throw new e("Incorrect invocation")},X_}var J_,n8;function Yse(){if(n8)return J_;n8=1;var t=Ve(),e=Cr(),r=Hse(),n=kt(),i=ch(),s=v$(),o=Gse(),a=Hr(),l=Dn(),c=lm(),d=Yc(),h=Vi().f,f=hh().forEach,p=kr(),m=mm(),g=m.set,b=m.getterFor;return J_=function(y,v,w){var x=y.indexOf("Map")!==-1,S=y.indexOf("Weak")!==-1,_=x?"set":"add",N=e[y],E=N&&N.prototype,k={},C;if(!p||!a(N)||!(S||E.forEach&&!n(function(){new N().entries().next()})))C=w.getConstructor(v,y,x,_),r.enable();else{C=v(function(j,M){g(o(j,O),{type:y,collection:new N}),c(M)||s(M,j[_],{that:j,AS_ENTRIES:x})});var O=C.prototype,P=b(y);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(j){var M=j==="add"||j==="set";j in E&&!(S&&j==="clear")&&i(O,j,function(A,I){var L=P(this).collection;if(!M&&S&&!l(A))return j==="get"?void 0:!1;var F=L[j](A===0?0:A,I);return M?this:F})}),S||h(O,"size",{configurable:!0,get:function(){return P(this).collection.size}})}return d(C,y,!1,!0),k[y]=C,t({global:!0,forced:!0},k),S||w.setStrong(C,y,x),C},J_}var Z_,i8;function vTe(){if(i8)return Z_;i8=1;var t=pm();return Z_=function(e,r,n){for(var i in r)n&&n.unsafe&&e[i]?e[i]=r[i]:t(e,i,r[i],n);return e},Z_}var eE,s8;function bTe(){if(s8)return eE;s8=1;var t=bi(),e=o$(),r=Gr(),n=kr(),i=r("species");return eE=function(s){var o=t(s);n&&o&&!o[i]&&e(o,i,{configurable:!0,get:function(){return this}})},eE}var tE,o8;function Qse(){if(o8)return tE;o8=1;var t=fm(),e=o$(),r=vTe(),n=W0(),i=Gse(),s=lm(),o=v$(),a=a$(),l=l$(),c=bTe(),d=kr(),h=Hse().fastKey,f=mm(),p=f.set,m=f.getterFor;return tE={getConstructor:function(g,b,y,v){var w=g(function(E,k){i(E,x),p(E,{type:b,index:t(null),first:null,last:null,size:0}),d||(E.size=0),s(k)||o(k,E[v],{that:E,AS_ENTRIES:y})}),x=w.prototype,S=m(b),_=function(E,k,C){var O=S(E),P=N(E,k),j,M;return P?P.value=C:(O.last=P={index:M=h(k,!0),key:k,value:C,previous:j=O.last,next:null,removed:!1},O.first||(O.first=P),j&&(j.next=P),d?O.size++:E.size++,M!=="F"&&(O.index[M]=P)),E},N=function(E,k){var C=S(E),O=h(k),P;if(O!=="F")return C.index[O];for(P=C.first;P;P=P.next)if(P.key===k)return P};return r(x,{clear:function(){for(var k=this,C=S(k),O=C.first;O;)O.removed=!0,O.previous&&(O.previous=O.previous.next=null),O=O.next;C.first=C.last=null,C.index=t(null),d?C.size=0:k.size=0},delete:function(E){var k=this,C=S(k),O=N(k,E);if(O){var P=O.next,j=O.previous;delete C.index[O.index],O.removed=!0,j&&(j.next=P),P&&(P.previous=j),C.first===O&&(C.first=P),C.last===O&&(C.last=j),d?C.size--:k.size--}return!!O},forEach:function(k){for(var C=S(this),O=n(k,arguments.length>1?arguments[1]:void 0),P;P=P?P.next:C.first;)for(O(P.value,P.key,this);P&&P.removed;)P=P.previous},has:function(k){return!!N(this,k)}}),r(x,y?{get:function(k){var C=N(this,k);return C&&C.value},set:function(k,C){return _(this,k===0?0:k,C)}}:{add:function(k){return _(this,k=k===0?0:k,k)}}),d&&e(x,"size",{configurable:!0,get:function(){return S(this).size}}),w},setStrong:function(g,b,y){var v=b+" Iterator",w=m(b),x=m(v);a(g,b,function(S,_){p(this,{type:v,target:S,state:w(S),kind:_,last:null})},function(){for(var S=x(this),_=S.kind,N=S.last;N&&N.removed;)N=N.previous;return!S.target||!(S.last=N=N?N.next:S.state.first)?(S.target=null,l(void 0,!0)):l(_==="keys"?N.key:_==="values"?N.value:[N.key,N.value],!1)},y?"entries":"values",!y,!0),c(b)}},tE}var a8;function xTe(){if(a8)return W6;a8=1;var t=Yse(),e=Qse();return t("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),W6}var l8;function wTe(){return l8||(l8=1,xTe()),H6}var c8={},rE,u8;function Xse(){return u8||(u8=1,rE=function(t,e){return e===1?function(r,n){return r[t](n)}:function(r,n,i){return r[t](n,i)}}),rE}var nE,d8;function STe(){if(d8)return nE;d8=1;var t=bi(),e=Xse(),r=t("Map");return nE={Map:r,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:r.prototype},nE}var h8;function _Te(){if(h8)return c8;h8=1;var t=Ve(),e=Pt(),r=zo(),n=Kc(),i=v$(),s=STe(),o=ah(),a=kt(),l=s.Map,c=s.has,d=s.get,h=s.set,f=e([].push),p=o||a(function(){return l.groupBy("ab",function(m){return m}).get("a").length!==1});return t({target:"Map",stat:!0,forced:o||p},{groupBy:function(g,b){n(g),r(b);var y=new l,v=0;return i(g,function(w){var x=b(w,v++);c(y,x)?f(d(y,x),w):h(y,x,[w])}),y}}),c8}var iE,f8;function ETe(){if(f8)return iE;f8=1,ml(),wTe(),_Te(),Z0();var t=$r();return iE=t.Map,iE}var sE,p8;function NTe(){if(p8)return sE;p8=1;var t=ETe();return gl(),sE=t,sE}var oE,m8;function CTe(){return m8||(m8=1,oE=NTe()),oE}var kTe=CTe(),Jse=rt(kTe),g8={},y8;function TTe(){if(y8)return g8;y8=1;var t=Ve(),e=hh().some,r=eb(),n=r("some");return t({target:"Array",proto:!0,forced:!n},{some:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),g8}var aE,v8;function OTe(){if(v8)return aE;v8=1,TTe();var t=ri();return aE=t("Array","some"),aE}var lE,b8;function jTe(){if(b8)return lE;b8=1;var t=Wr(),e=OTe(),r=Array.prototype;return lE=function(n){var i=n.some;return n===r||t(r,n)&&i===r.some?e:i},lE}var cE,x8;function PTe(){if(x8)return cE;x8=1;var t=jTe();return cE=t,cE}var uE,w8;function ITe(){return w8||(w8=1,uE=PTe()),uE}var RTe=ITe(),MTe=rt(RTe),dE,S8;function $Te(){if(S8)return dE;S8=1,ml();var t=ri();return dE=t("Array","keys"),dE}var hE,_8;function DTe(){if(_8)return hE;_8=1;var t=$Te();return hE=t,hE}var fE,E8;function ATe(){if(E8)return fE;E8=1,gl();var t=fl(),e=Kr(),r=Wr(),n=DTe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return fE=function(o){var a=o.keys;return o===i||r(i,o)&&a===i.keys||e(s,t(o))?n:a},fE}var pE,N8;function FTe(){return N8||(N8=1,pE=ATe()),pE}var qTe=FTe(),bu=rt(qTe),C8={},mE,k8;function LTe(){if(k8)return mE;k8=1;var t=dh(),e=Math.floor,r=function(n,i){var s=n.length;if(s<8)for(var o=1,a,l;o<s;){for(l=o,a=n[o];l&&i(n[l-1],a)>0;)n[l]=n[--l];l!==o++&&(n[l]=a)}else for(var c=e(s/2),d=r(t(n,0,c),i),h=r(t(n,c),i),f=d.length,p=h.length,m=0,g=0;m<f||g<p;)n[m+g]=m<f&&g<p?i(d[m],h[g])<=0?d[m++]:h[g++]:m<f?d[m++]:h[g++];return n};return mE=r,mE}var gE,T8;function BTe(){if(T8)return gE;T8=1;var t=ih(),e=t.match(/firefox\/(\d+)/i);return gE=!!e&&+e[1],gE}var yE,O8;function zTe(){if(O8)return yE;O8=1;var t=ih();return yE=/MSIE|Trident/.test(t),yE}var vE,j8;function VTe(){if(j8)return vE;j8=1;var t=ih(),e=t.match(/AppleWebKit\/(\d+)\./);return vE=!!e&&+e[1],vE}var P8;function UTe(){if(P8)return C8;P8=1;var t=Ve(),e=Pt(),r=zo(),n=gs(),i=hl(),s=pse(),o=pl(),a=kt(),l=LTe(),c=eb(),d=BTe(),h=zTe(),f=cm(),p=VTe(),m=[],g=e(m.sort),b=e(m.push),y=a(function(){m.sort(void 0)}),v=a(function(){m.sort(null)}),w=c("sort"),x=!a(function(){if(f)return f<70;if(!(d&&d>3)){if(h)return!0;if(p)return p<603;var N="",E,k,C,O;for(E=65;E<76;E++){switch(k=String.fromCharCode(E),E){case 66:case 69:case 70:case 72:C=3;break;case 68:case 71:C=4;break;default:C=2}for(O=0;O<47;O++)m.push({k:k+O,v:C})}for(m.sort(function(P,j){return j.v-P.v}),O=0;O<m.length;O++)k=m[O].k.charAt(0),N.charAt(N.length-1)!==k&&(N+=k);return N!=="DGBEFHACIJK"}}),S=y||!v||!w||!x,_=function(N){return function(E,k){return k===void 0?-1:E===void 0?1:N!==void 0?+N(E,k)||0:o(E)>o(k)?1:-1}};return t({target:"Array",proto:!0,forced:S},{sort:function(E){E!==void 0&&r(E);var k=n(this);if(x)return E===void 0?g(k):g(k,E);var C=[],O=i(k),P,j;for(j=0;j<O;j++)j in k&&b(C,k[j]);for(l(C,_(E)),P=i(C),j=0;j<P;)k[j]=C[j++];for(;j<O;)s(k,j++);return k}}),C8}var bE,I8;function HTe(){if(I8)return bE;I8=1,UTe();var t=ri();return bE=t("Array","sort"),bE}var xE,R8;function WTe(){if(R8)return xE;R8=1;var t=Wr(),e=HTe(),r=Array.prototype;return xE=function(n){var i=n.sort;return n===r||t(r,n)&&i===r.sort?e:i},xE}var wE,M8;function KTe(){if(M8)return wE;M8=1;var t=WTe();return wE=t,wE}var SE,$8;function GTe(){return $8||($8=1,SE=KTe()),SE}var YTe=GTe(),TI=rt(YTe),_E,D8;function QTe(){if(D8)return _E;D8=1,ml();var t=ri();return _E=t("Array","values"),_E}var EE,A8;function XTe(){if(A8)return EE;A8=1;var t=QTe();return EE=t,EE}var NE,F8;function JTe(){if(F8)return NE;F8=1,gl();var t=fl(),e=Kr(),r=Wr(),n=XTe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return NE=function(o){var a=o.values;return o===i||r(i,o)&&a===i.values||e(s,t(o))?n:a},NE}var CE,q8;function ZTe(){return q8||(q8=1,CE=JTe()),CE}var e2e=ZTe(),L8=rt(e2e),kE,B8;function t2e(){return B8||(B8=1,kE=use()),kE}var r2e=t2e(),Vu=rt(r2e),TE,z8;function n2e(){if(z8)return TE;z8=1,ml();var t=ri();return TE=t("Array","entries"),TE}var OE,V8;function i2e(){if(V8)return OE;V8=1;var t=n2e();return OE=t,OE}var jE,U8;function s2e(){if(U8)return jE;U8=1,gl();var t=fl(),e=Kr(),r=Wr(),n=i2e(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return jE=function(o){var a=o.entries;return o===i||r(i,o)&&a===i.entries||e(s,t(o))?n:a},jE}var PE,H8;function o2e(){return H8||(H8=1,PE=s2e()),PE}var a2e=o2e(),l2e=rt(a2e);const Xr=[];for(let t=0;t<256;++t)Xr.push((t+256).toString(16).slice(1));function c2e(t,e=0){return(Xr[t[e+0]]+Xr[t[e+1]]+Xr[t[e+2]]+Xr[t[e+3]]+"-"+Xr[t[e+4]]+Xr[t[e+5]]+"-"+Xr[t[e+6]]+Xr[t[e+7]]+"-"+Xr[t[e+8]]+Xr[t[e+9]]+"-"+Xr[t[e+10]]+Xr[t[e+11]]+Xr[t[e+12]]+Xr[t[e+13]]+Xr[t[e+14]]+Xr[t[e+15]]).toLowerCase()}let IE;const u2e=new Uint8Array(16);function d2e(){if(!IE){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");IE=crypto.getRandomValues.bind(crypto)}return IE(u2e)}const h2e=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var W8={randomUUID:h2e};function f2e(t,e,r){var i;t=t||{};const n=t.random??((i=t.rng)==null?void 0:i.call(t))??d2e();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,c2e(n)}function p2e(t,e,r){return W8.randomUUID&&!t?W8.randomUUID():f2e(t)}function K8(t){return typeof t=="string"||typeof t=="number"}class b${constructor(e){Wa(this,"_queue",[]),Wa(this,"_timeout",null),Wa(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(e)}setOptions(e){e&&typeof e.delay<"u"&&(this.delay=e.delay),e&&typeof e.max<"u"&&(this.max=e.max),this._flushIfNeeded()}static extend(e,r){const n=new b$(r);if(e.flush!==void 0)throw new Error("Target object already has a property flush");e.flush=()=>{n.flush()};const i=[{name:"flush",original:void 0}];if(r&&r.replace)for(let s=0;s<r.replace.length;s++){const o=r.replace[s];i.push({name:o,original:e[o]}),n.replace(e,o)}return n._extended={object:e,methods:i},n}destroy(){if(this.flush(),this._extended){const e=this._extended.object,r=this._extended.methods;for(let n=0;n<r.length;n++){const i=r[n];i.original?e[i.name]=i.original:delete e[i.name]}this._extended=null}}replace(e,r){const n=this,i=e[r];if(!i)throw new Error("Method "+r+" undefined");e[r]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];n.queue({args:o,fn:i,context:this})}}queue(e){typeof e=="function"?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()}_flushIfNeeded(){this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=XCe(()=>{this.flush()},this.delay))}flush(){var e,r;jc(e=mse(r=this._queue).call(r,0)).call(e,n=>{n.fn.apply(n.context||n.fn,n.args||[])})}}class Vv{constructor(){Wa(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),Wa(this,"subscribe",Vv.prototype.on),Wa(this,"unsubscribe",Vv.prototype.off)}_trigger(e,r,n){var i;if(e==="*")throw new Error("Cannot trigger event *");jc(i=[...this._subscribers[e],...this._subscribers["*"]]).call(i,s=>{s(e,r,n??null)})}on(e,r){typeof r=="function"&&this._subscribers[e].push(r)}off(e,r){var n;this._subscribers[e]=Lu(n=this._subscribers[e]).call(n,i=>i!==r)}}var G8={},Y8={},Q8;function m2e(){if(Q8)return Y8;Q8=1;var t=Yse(),e=Qse();return t("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),Y8}var X8;function g2e(){return X8||(X8=1,m2e()),G8}var J8={},RE,Z8;function Xc(){if(Z8)return RE;Z8=1;var t=oh(),e=TypeError;return RE=function(r){if(typeof r=="object"&&"size"in r&&"has"in r&&"add"in r&&"delete"in r&&"keys"in r)return r;throw new e(t(r)+" is not a set")},RE}var ME,eV;function Jc(){if(eV)return ME;eV=1;var t=bi(),e=Xse(),r=t("Set"),n=r.prototype;return ME={Set:r,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:n},ME}var $E,tV;function Zc(){if(tV)return $E;tV=1;var t=ti();return $E=function(e,r,n){for(var i=n?e:e.iterator,s=e.next,o,a;!(o=t(s,i)).done;)if(a=r(o.value),a!==void 0)return a},$E}var DE,rV;function wm(){if(rV)return DE;rV=1;var t=Zc();return DE=function(e,r,n){return n?t(e.keys(),r,!0):e.forEach(r)},DE}var AE,nV;function x$(){if(nV)return AE;nV=1;var t=Jc(),e=wm(),r=t.Set,n=t.add;return AE=function(i){var s=new r;return e(i,function(o){n(s,o)}),s},AE}var FE,iV;function Sm(){return iV||(iV=1,FE=function(t){return t.size}),FE}var qE,sV;function y2e(){return sV||(sV=1,qE=function(t){return{iterator:t,next:t.next,done:!1}}),qE}var LE,oV;function eu(){if(oV)return LE;oV=1;var t=zo(),e=Vo(),r=ti(),n=uh(),i=y2e(),s="Invalid size",o=RangeError,a=TypeError,l=Math.max,c=function(d,h){this.set=d,this.size=l(h,0),this.has=t(d.has),this.keys=t(d.keys)};return c.prototype={getIterator:function(){return i(e(r(this.keys,this.set)))},includes:function(d){return r(this.has,this.set,d)}},LE=function(d){e(d);var h=+d.size;if(h!==h)throw new a(s);var f=n(h);if(f<0)throw new o(s);return new c(d,f)},LE}var BE,aV;function v2e(){if(aV)return BE;aV=1;var t=Xc(),e=Jc(),r=x$(),n=Sm(),i=eu(),s=wm(),o=Zc(),a=e.has,l=e.remove;return BE=function(d){var h=t(this),f=i(d),p=r(h);return n(h)<=f.size?s(h,function(m){f.includes(m)&&l(p,m)}):o(f.getIterator(),function(m){a(p,m)&&l(p,m)}),p},BE}var zE,lV;function tu(){return lV||(lV=1,zE=function(){return!1}),zE}var cV;function b2e(){if(cV)return J8;cV=1;var t=Ve(),e=v2e(),r=kt(),n=tu(),i=!n("difference",function(o){return o.size===0}),s=i||r(function(){var o={size:1,has:function(){return!0},keys:function(){var l=0;return{next:function(){var c=l++>1;return a.has(1)&&a.clear(),{done:c,value:2}}}}},a=new Set([1,2,3,4]);return a.difference(o).size!==3});return t({target:"Set",proto:!0,real:!0,forced:s},{difference:e}),J8}var uV={},VE,dV;function x2e(){if(dV)return VE;dV=1;var t=Xc(),e=Jc(),r=Sm(),n=eu(),i=wm(),s=Zc(),o=e.Set,a=e.add,l=e.has;return VE=function(d){var h=t(this),f=n(d),p=new o;return r(h)>f.size?s(f.getIterator(),function(m){l(h,m)&&a(p,m)}):i(h,function(m){f.includes(m)&&a(p,m)}),p},VE}var hV;function w2e(){if(hV)return uV;hV=1;var t=Ve(),e=kt(),r=x2e(),n=tu(),i=!n("intersection",function(s){return s.size===2&&s.has(1)&&s.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return t({target:"Set",proto:!0,real:!0,forced:i},{intersection:r}),uV}var fV={},UE,pV;function S2e(){if(pV)return UE;pV=1;var t=Xc(),e=Jc().has,r=Sm(),n=eu(),i=wm(),s=Zc(),o=y$();return UE=function(l){var c=t(this),d=n(l);if(r(c)<=d.size)return i(c,function(f){if(d.includes(f))return!1},!0)!==!1;var h=d.getIterator();return s(h,function(f){if(e(c,f))return o(h,"normal",!1)})!==!1},UE}var mV;function _2e(){if(mV)return fV;mV=1;var t=Ve(),e=S2e(),r=tu(),n=!r("isDisjointFrom",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:e}),fV}var gV={},HE,yV;function E2e(){if(yV)return HE;yV=1;var t=Xc(),e=Sm(),r=wm(),n=eu();return HE=function(s){var o=t(this),a=n(s);return e(o)>a.size?!1:r(o,function(l){if(!a.includes(l))return!1},!0)!==!1},HE}var vV;function N2e(){if(vV)return gV;vV=1;var t=Ve(),e=E2e(),r=tu(),n=!r("isSubsetOf",function(i){return i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:e}),gV}var bV={},WE,xV;function C2e(){if(xV)return WE;xV=1;var t=Xc(),e=Jc().has,r=Sm(),n=eu(),i=Zc(),s=y$();return WE=function(a){var l=t(this),c=n(a);if(r(l)<c.size)return!1;var d=c.getIterator();return i(d,function(h){if(!e(l,h))return s(d,"normal",!1)})!==!1},WE}var wV;function k2e(){if(wV)return bV;wV=1;var t=Ve(),e=C2e(),r=tu(),n=!r("isSupersetOf",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:e}),bV}var SV={},KE,_V;function T2e(){if(_V)return KE;_V=1;var t=Xc(),e=Jc(),r=x$(),n=eu(),i=Zc(),s=e.add,o=e.has,a=e.remove;return KE=function(c){var d=t(this),h=n(c).getIterator(),f=r(d);return i(h,function(p){o(d,p)?a(f,p):s(f,p)}),f},KE}var GE,EV;function Zse(){return EV||(EV=1,GE=function(t){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[t](r);return n.size===1&&n.values().next().value===4}catch{return!1}}),GE}var NV;function O2e(){if(NV)return SV;NV=1;var t=Ve(),e=T2e(),r=Zse(),n=tu(),i=!n("symmetricDifference")||!r("symmetricDifference");return t({target:"Set",proto:!0,real:!0,forced:i},{symmetricDifference:e}),SV}var CV={},YE,kV;function j2e(){if(kV)return YE;kV=1;var t=Xc(),e=Jc().add,r=x$(),n=eu(),i=Zc();return YE=function(o){var a=t(this),l=n(o).getIterator(),c=r(a);return i(l,function(d){e(c,d)}),c},YE}var TV;function P2e(){if(TV)return CV;TV=1;var t=Ve(),e=j2e(),r=Zse(),n=tu(),i=!n("union")||!r("union");return t({target:"Set",proto:!0,real:!0,forced:i},{union:e}),CV}var QE,OV;function I2e(){if(OV)return QE;OV=1,ml(),g2e(),b2e(),w2e(),_2e(),N2e(),k2e(),O2e(),P2e(),Z0();var t=$r();return QE=t.Set,QE}var XE,jV;function R2e(){if(jV)return XE;jV=1;var t=I2e();return gl(),XE=t,XE}var JE,PV;function M2e(){return PV||(PV=1,JE=R2e()),JE}var $2e=M2e(),ZE=rt($2e),eN,IV;function D2e(){if(IV)return eN;IV=1,ml(),Z0();var t=Kse();return eN=t,eN}var tN,RV;function A2e(){if(RV)return tN;RV=1;var t=D2e();return gl(),tN=t,tN}var rN,MV;function F2e(){if(MV)return rN;MV=1;var t=A2e();return rN=t,rN}var nN,$V;function q2e(){if($V)return nN;$V=1;var t=F2e();return nN=t,nN}var iN,DV;function L2e(){return DV||(DV=1,iN=q2e()),iN}var sN,AV;function B2e(){return AV||(AV=1,sN=L2e()),sN}var z2e=B2e(),oN=rt(z2e);class ql{constructor(e){this._pairs=e}*[Vu](){for(const[e,r]of this._pairs)yield[e,r]}*entries(){for(const[e,r]of this._pairs)yield[e,r]}*keys(){for(const[e]of this._pairs)yield e}*values(){for(const[,e]of this._pairs)yield e}toIdArray(){var e;return ns(e=[...this._pairs]).call(e,r=>r[0])}toItemArray(){var e;return ns(e=[...this._pairs]).call(e,r=>r[1])}toEntryArray(){return[...this._pairs]}toObjectMap(){const e=MCe(null);for(const[r,n]of this._pairs)e[r]=n;return e}toMap(){return new Jse(this._pairs)}toIdSet(){return new ZE(this.toIdArray())}toItemSet(){return new ZE(this.toItemArray())}cache(){return new ql([...this._pairs])}distinct(e){const r=new ZE;for(const[n,i]of this._pairs)r.add(e(i,n));return r}filter(e){const r=this._pairs;return new ql({*[Vu](){for(const[n,i]of r)e(i,n)&&(yield[n,i])}})}forEach(e){for(const[r,n]of this._pairs)e(n,r)}map(e){const r=this._pairs;return new ql({*[Vu](){for(const[n,i]of r)yield[n,e(i,n)]}})}max(e){const r=oN(this._pairs);let n=r.next();if(n.done)return null;let i=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=r.next()).done;){const[o,a]=n.value,l=e(a,o);l>s&&(s=l,i=a)}return i}min(e){const r=oN(this._pairs);let n=r.next();if(n.done)return null;let i=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=r.next()).done;){const[o,a]=n.value,l=e(a,o);l<s&&(s=l,i=a)}return i}reduce(e,r){for(const[n,i]of this._pairs)r=e(r,i,n);return r}sort(e){return new ql({[Vu]:()=>{var r;return oN(TI(r=[...this._pairs]).call(r,(n,i)=>{let[s,o]=n,[a,l]=i;return e(o,l,s,a)}))}})}}function FV(t,e){var r=c$(t);if(k6){var n=k6(t);e&&(n=Lu(n).call(n,function(i){return Use(t,i).enumerable})),r.push.apply(r,n)}return r}function qV(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?jc(r=FV(Object(i),!0)).call(r,function(s){Wa(t,s,i[s])}):F6?uTe(t,F6(i)):jc(n=FV(Object(i))).call(n,function(s){fTe(t,s,Use(i,s))})}return t}function V2e(t,e){return t[e]==null&&(t[e]=p2e()),t}class Vd extends Vv{get idProp(){return this._idProp}constructor(e,r){super(),Wa(this,"_queue",null),e&&!Ns(e)&&(r=e,e=[]),this._options=r||{},this._data=new Jse,this.length=0,this._idProp=this._options.fieldId||"id",e&&e.length&&this.add(e),this.setOptions(r)}setOptions(e){e&&e.queue!==void 0&&(e.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=b$.extend(this,{replace:["add","update","remove"]})),e.queue&&typeof e.queue=="object"&&this._queue.setOptions(e.queue)))}add(e,r){const n=[];let i;if(Ns(e)){const s=ns(e).call(e,o=>o[this._idProp]);if(MTe(s).call(s,o=>this._data.has(o)))throw new Error("A duplicate id was found in the parameter array.");for(let o=0,a=e.length;o<a;o++)i=this._addItem(e[o]),n.push(i)}else if(e&&typeof e=="object")i=this._addItem(e),n.push(i);else throw new Error("Unknown dataType");return n.length&&this._trigger("add",{items:n},r),n}update(e,r){const n=[],i=[],s=[],o=[],a=this._idProp,l=c=>{const d=c[a];if(d!=null&&this._data.has(d)){const h=c,f=SCe({},this._data.get(d)),p=this._updateItem(h);i.push(p),o.push(h),s.push(f)}else{const h=this._addItem(c);n.push(h)}};if(Ns(e))for(let c=0,d=e.length;c<d;c++)e[c]&&typeof e[c]=="object"?l(e[c]):console.warn("Ignoring input item, which is not an object at index "+c);else if(e&&typeof e=="object")l(e);else throw new Error("Unknown dataType");if(n.length&&this._trigger("add",{items:n},r),i.length){const c={items:i,oldData:s,data:o};this._trigger("update",c,r)}return TCe(n).call(n,i)}updateOnly(e,r){var n;Ns(e)||(e=[e]);const i=ns(n=ns(e).call(e,s=>{const o=this._data.get(s[this._idProp]);if(o==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:o,update:s}})).call(n,s=>{let{oldData:o,update:a}=s;const l=o[this._idProp],c=Bke(o,a);return this._data.set(l,c),{id:l,oldData:o,updatedData:c}});if(i.length){const s={items:ns(i).call(i,o=>o.id),oldData:ns(i).call(i,o=>o.oldData),data:ns(i).call(i,o=>o.updatedData)};return this._trigger("update",s,r),s.items}else return[]}get(e,r){let n,i,s;K8(e)?(n=e,s=r):Ns(e)?(i=e,s=r):s=e;const o=s&&s.returnType==="Object"?"Object":"Array",a=s&&Lu(s),l=[];let c,d,h;if(n!=null)c=this._data.get(n),c&&a&&!a(c)&&(c=void 0);else if(i!=null)for(let p=0,m=i.length;p<m;p++)c=this._data.get(i[p]),c!=null&&(!a||a(c))&&l.push(c);else{var f;d=[...bu(f=this._data).call(f)];for(let p=0,m=d.length;p<m;p++)h=d[p],c=this._data.get(h),c!=null&&(!a||a(c))&&l.push(c)}if(s&&s.order&&n==null&&this._sort(l,s.order),s&&s.fields){const p=s.fields;if(n!=null&&c!=null)c=this._filterFields(c,p);else for(let m=0,g=l.length;m<g;m++)l[m]=this._filterFields(l[m],p)}if(o=="Object"){const p={};for(let m=0,g=l.length;m<g;m++){const b=l[m],y=b[this._idProp];p[y]=b}return p}else return n!=null?c??null:l}getIds(e){const r=this._data,n=e&&Lu(e),i=e&&e.order,s=[...bu(r).call(r)],o=[];if(n)if(i){const a=[];for(let l=0,c=s.length;l<c;l++){const d=s[l],h=this._data.get(d);h!=null&&n(h)&&a.push(h)}this._sort(a,i);for(let l=0,c=a.length;l<c;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const c=s[a],d=this._data.get(c);d!=null&&n(d)&&o.push(d[this._idProp])}else if(i){const a=[];for(let l=0,c=s.length;l<c;l++){const d=s[l];a.push(r.get(d))}this._sort(a,i);for(let l=0,c=a.length;l<c;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const c=s[a],d=r.get(c);d!=null&&o.push(d[this._idProp])}return o}getDataSet(){return this}forEach(e,r){const n=r&&Lu(r),i=this._data,s=[...bu(i).call(i)];if(r&&r.order){const o=this.get(r);for(let a=0,l=o.length;a<l;a++){const c=o[a],d=c[this._idProp];e(c,d)}}else for(let o=0,a=s.length;o<a;o++){const l=s[o],c=this._data.get(l);c!=null&&(!n||n(c))&&e(c,l)}}map(e,r){const n=r&&Lu(r),i=[],s=this._data,o=[...bu(s).call(s)];for(let a=0,l=o.length;a<l;a++){const c=o[a],d=this._data.get(c);d!=null&&(!n||n(d))&&i.push(e(d,c))}return r&&r.order&&this._sort(i,r.order),i}_filterFields(e,r){var n;return e&&uNe(n=Ns(r)?r:c$(r)).call(n,(i,s)=>(i[s]=e[s],i),{})}_sort(e,r){if(typeof r=="string"){const n=r;TI(e).call(e,(i,s)=>{const o=i[n],a=s[n];return o>a?1:o<a?-1:0})}else if(typeof r=="function")TI(e).call(e,r);else throw new TypeError("Order must be a function or a string")}remove(e,r){const n=[],i=[],s=Ns(e)?e:[e];for(let o=0,a=s.length;o<a;o++){const l=this._remove(s[o]);if(l){const c=l[this._idProp];c!=null&&(n.push(c),i.push(l))}}return n.length&&this._trigger("remove",{items:n,oldData:i},r),n}_remove(e){let r;if(K8(e)?r=e:e&&typeof e=="object"&&(r=e[this._idProp]),r!=null&&this._data.has(r)){const n=this._data.get(r)||null;return this._data.delete(r),--this.length,n}return null}clear(e){var r;const n=[...bu(r=this._data).call(r)],i=[];for(let s=0,o=n.length;s<o;s++)i.push(this._data.get(n[s]));return this._data.clear(),this.length=0,this._trigger("remove",{items:n,oldData:i},e),n}max(e){let r=null,n=null;for(const s of L8(i=this._data).call(i)){var i;const o=s[e];typeof o=="number"&&(n==null||o>n)&&(r=s,n=o)}return r||null}min(e){let r=null,n=null;for(const s of L8(i=this._data).call(i)){var i;const o=s[e];typeof o=="number"&&(n==null||o<n)&&(r=s,n=o)}return r||null}distinct(e){const r=this._data,n=[...bu(r).call(r)],i=[];let s=0;for(let o=0,a=n.length;o<a;o++){const l=n[o],d=r.get(l)[e];let h=!1;for(let f=0;f<s;f++)if(i[f]==d){h=!0;break}!h&&d!==void 0&&(i[s]=d,s++)}return i}_addItem(e){const r=V2e(e,this._idProp),n=r[this._idProp];if(this._data.has(n))throw new Error("Cannot add item: item with id "+n+" already exists");return this._data.set(n,r),++this.length,n}_updateItem(e){const r=e[this._idProp];if(r==null)throw new Error("Cannot update item: item has no id (item: "+VCe(e)+")");const n=this._data.get(r);if(!n)throw new Error("Cannot update item: no item with id "+r+" found");return this._data.set(r,qV(qV({},n),e)),r}stream(e){if(e){const n=this._data;return new ql({*[Vu](){for(const i of e){const s=n.get(i);s!=null&&(yield[i,s])}}})}else{var r;return new ql({[Vu]:dse(r=l2e(this._data)).call(r,this._data)})}}}function U2e(t,e){return typeof e=="object"&&e!==null&&t===e.idProp&&typeof e.add=="function"&&typeof e.clear=="function"&&typeof e.distinct=="function"&&typeof jc(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof ns(e)=="function"&&typeof e.max=="function"&&typeof e.min=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.remove=="function"&&typeof e.setOptions=="function"&&typeof e.stream=="function"&&typeof e.update=="function"&&typeof e.updateOnly=="function"}function eoe(t,e){return typeof e=="object"&&e!==null&&t===e.idProp&&typeof jc(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof ns(e)=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.stream=="function"&&U2e(t,e.getDataSet())}/**
 * vis-network
 * https://visjs.github.io/vis-network/
 *
 * A dynamic, browser-based visualization library.
 *
 * @version 10.0.2
 * @date    2025-09-15T17:48:13.838Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var LV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ze(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var BV={},ef,zV;function Ht(){if(zV)return ef;zV=1;var t=function(e){return e&&e.Math===Math&&e};return ef=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof LV=="object"&&LV)||t(typeof ef=="object"&&ef)||function(){return this}()||Function("return this")(),ef}var aN,VV;function nt(){return VV||(VV=1,aN=function(t){try{return!!t()}catch{return!0}}),aN}var lN,UV;function _m(){if(UV)return lN;UV=1;var t=nt();return lN=!t(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),lN}var cN,HV;function nb(){if(HV)return cN;HV=1;var t=_m(),e=Function.prototype,r=e.apply,n=e.call;return cN=typeof Reflect=="object"&&Reflect.apply||(t?n.bind(r):function(){return n.apply(r,arguments)}),cN}var uN,WV;function at(){if(WV)return uN;WV=1;var t=_m(),e=Function.prototype,r=e.call,n=t&&e.bind.bind(r,r);return uN=t?n:function(i){return function(){return r.apply(i,arguments)}},uN}var dN,KV;function Us(){if(KV)return dN;KV=1;var t=at(),e=t({}.toString),r=t("".slice);return dN=function(n){return r(e(n),8,-1)},dN}var hN,GV;function w$(){if(GV)return hN;GV=1;var t=Us(),e=at();return hN=function(r){if(t(r)==="Function")return e(r)},hN}var fN,YV;function Yr(){if(YV)return fN;YV=1;var t=typeof document=="object"&&document.all;return fN=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"},fN}var pN={},mN,QV;function gr(){if(QV)return mN;QV=1;var t=nt();return mN=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),mN}var gN,XV;function ni(){if(XV)return gN;XV=1;var t=_m(),e=Function.prototype.call;return gN=t?e.bind(e):function(){return e.apply(e,arguments)},gN}var yN={},JV;function ib(){if(JV)return yN;JV=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,r=e&&!t.call({1:2},1);return yN.f=r?function(i){var s=e(this,i);return!!s&&s.enumerable}:t,yN}var vN,ZV;function Em(){return ZV||(ZV=1,vN=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}),vN}var bN,eU;function sb(){if(eU)return bN;eU=1;var t=at(),e=nt(),r=Us(),n=Object,i=t("".split);return bN=e(function(){return!n("z").propertyIsEnumerable(0)})?function(s){return r(s)==="String"?i(s,""):n(s)}:n,bN}var xN,tU;function mh(){return tU||(tU=1,xN=function(t){return t==null}),xN}var wN,rU;function Uo(){if(rU)return wN;rU=1;var t=mh(),e=TypeError;return wN=function(r){if(t(r))throw new e("Can't call method on "+r);return r},wN}var SN,nU;function ys(){if(nU)return SN;nU=1;var t=sb(),e=Uo();return SN=function(r){return t(e(r))},SN}var _N,iU;function Qr(){if(iU)return _N;iU=1;var t=Yr();return _N=function(e){return typeof e=="object"?e!==null:t(e)},_N}var EN,sU;function Tt(){return sU||(sU=1,EN={}),EN}var NN,oU;function xi(){if(oU)return NN;oU=1;var t=Tt(),e=Ht(),r=Yr(),n=function(i){return r(i)?i:void 0};return NN=function(i,s){return arguments.length<2?n(t[i])||n(e[i]):t[i]&&t[i][s]||e[i]&&e[i][s]},NN}var CN,aU;function Tr(){if(aU)return CN;aU=1;var t=at();return CN=t({}.isPrototypeOf),CN}var kN,lU;function gh(){if(lU)return kN;lU=1;var t=Ht(),e=t.navigator,r=e&&e.userAgent;return kN=r?String(r):"",kN}var TN,cU;function Nm(){if(cU)return TN;cU=1;var t=Ht(),e=gh(),r=t.process,n=t.Deno,i=r&&r.versions||n&&n.version,s=i&&i.v8,o,a;return s&&(o=s.split("."),a=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!a&&e&&(o=e.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=e.match(/Chrome\/(\d+)/),o&&(a=+o[1]))),TN=a,TN}var ON,uU;function yh(){if(uU)return ON;uU=1;var t=Nm(),e=nt(),r=Ht(),n=r.String;return ON=!!Object.getOwnPropertySymbols&&!e(function(){var i=Symbol("symbol detection");return!n(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&t&&t<41}),ON}var jN,dU;function toe(){if(dU)return jN;dU=1;var t=yh();return jN=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol",jN}var PN,hU;function Cm(){if(hU)return PN;hU=1;var t=xi(),e=Yr(),r=Tr(),n=toe(),i=Object;return PN=n?function(s){return typeof s=="symbol"}:function(s){var o=t("Symbol");return e(o)&&r(o.prototype,i(s))},PN}var IN,fU;function vh(){if(fU)return IN;fU=1;var t=String;return IN=function(e){try{return t(e)}catch{return"Object"}},IN}var RN,pU;function Ho(){if(pU)return RN;pU=1;var t=Yr(),e=vh(),r=TypeError;return RN=function(n){if(t(n))return n;throw new r(e(n)+" is not a function")},RN}var MN,mU;function S$(){if(mU)return MN;mU=1;var t=Ho(),e=mh();return MN=function(r,n){var i=r[n];return e(i)?void 0:t(i)},MN}var $N,gU;function H2e(){if(gU)return $N;gU=1;var t=ni(),e=Yr(),r=Qr(),n=TypeError;return $N=function(i,s){var o,a;if(s==="string"&&e(o=i.toString)&&!r(a=t(o,i))||e(o=i.valueOf)&&!r(a=t(o,i))||s!=="string"&&e(o=i.toString)&&!r(a=t(o,i)))return a;throw new n("Can't convert object to primitive value")},$N}var DN={exports:{}},AN,yU;function bh(){return yU||(yU=1,AN=!0),AN}var FN,vU;function W2e(){if(vU)return FN;vU=1;var t=Ht(),e=Object.defineProperty;return FN=function(r,n){try{e(t,r,{value:n,configurable:!0,writable:!0})}catch{t[r]=n}return n},FN}var bU;function _$(){if(bU)return DN.exports;bU=1;var t=bh(),e=Ht(),r=W2e(),n="__core-js_shared__",i=DN.exports=e[n]||r(n,{});return(i.versions||(i.versions=[])).push({version:"3.44.0",mode:t?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),DN.exports}var qN,xU;function xh(){if(xU)return qN;xU=1;var t=_$();return qN=function(e,r){return t[e]||(t[e]=r||{})},qN}var LN,wU;function wi(){if(wU)return LN;wU=1;var t=Uo(),e=Object;return LN=function(r){return e(t(r))},LN}var BN,SU;function an(){if(SU)return BN;SU=1;var t=at(),e=wi(),r=t({}.hasOwnProperty);return BN=Object.hasOwn||function(i,s){return r(e(i),s)},BN}var zN,_U;function ob(){if(_U)return zN;_U=1;var t=at(),e=0,r=Math.random(),n=t(1.1.toString);return zN=function(i){return"Symbol("+(i===void 0?"":i)+")_"+n(++e+r,36)},zN}var VN,EU;function Or(){if(EU)return VN;EU=1;var t=Ht(),e=xh(),r=an(),n=ob(),i=yh(),s=toe(),o=t.Symbol,a=e("wks"),l=s?o.for||o:o&&o.withoutSetter||n;return VN=function(c){return r(a,c)||(a[c]=i&&r(o,c)?o[c]:l("Symbol."+c)),a[c]},VN}var UN,NU;function roe(){if(NU)return UN;NU=1;var t=ni(),e=Qr(),r=Cm(),n=S$(),i=H2e(),s=Or(),o=TypeError,a=s("toPrimitive");return UN=function(l,c){if(!e(l)||r(l))return l;var d=n(l,a),h;if(d){if(c===void 0&&(c="default"),h=t(d,l,c),!e(h)||r(h))return h;throw new o("Can't convert object to primitive value")}return c===void 0&&(c="number"),i(l,c)},UN}var HN,CU;function E$(){if(CU)return HN;CU=1;var t=roe(),e=Cm();return HN=function(r){var n=t(r,"string");return e(n)?n:n+""},HN}var WN,kU;function noe(){if(kU)return WN;kU=1;var t=Ht(),e=Qr(),r=t.document,n=e(r)&&e(r.createElement);return WN=function(i){return n?r.createElement(i):{}},WN}var KN,TU;function ioe(){if(TU)return KN;TU=1;var t=gr(),e=nt(),r=noe();return KN=!t&&!e(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7}),KN}var OU;function ab(){if(OU)return pN;OU=1;var t=gr(),e=ni(),r=ib(),n=Em(),i=ys(),s=E$(),o=an(),a=ioe(),l=Object.getOwnPropertyDescriptor;return pN.f=t?l:function(d,h){if(d=i(d),h=s(h),a)try{return l(d,h)}catch{}if(o(d,h))return n(!e(r.f,d,h),d[h])},pN}var GN,jU;function K2e(){if(jU)return GN;jU=1;var t=nt(),e=Yr(),r=/#|\.prototype\./,n=function(l,c){var d=s[i(l)];return d===a?!0:d===o?!1:e(c)?t(c):!!c},i=n.normalize=function(l){return String(l).replace(r,".").toLowerCase()},s=n.data={},o=n.NATIVE="N",a=n.POLYFILL="P";return GN=n,GN}var YN,PU;function lb(){if(PU)return YN;PU=1;var t=w$(),e=Ho(),r=_m(),n=t(t.bind);return YN=function(i,s){return e(i),s===void 0?i:r?n(i,s):function(){return i.apply(s,arguments)}},YN}var QN={},XN,IU;function soe(){if(IU)return XN;IU=1;var t=gr(),e=nt();return XN=t&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),XN}var JN,RU;function Hs(){if(RU)return JN;RU=1;var t=Qr(),e=String,r=TypeError;return JN=function(n){if(t(n))return n;throw new r(e(n)+" is not an object")},JN}var MU;function Hi(){if(MU)return QN;MU=1;var t=gr(),e=ioe(),r=soe(),n=Hs(),i=E$(),s=TypeError,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l="enumerable",c="configurable",d="writable";return QN.f=t?r?function(f,p,m){if(n(f),p=i(p),n(m),typeof f=="function"&&p==="prototype"&&"value"in m&&d in m&&!m[d]){var g=a(f,p);g&&g[d]&&(f[p]=m.value,m={configurable:c in m?m[c]:g[c],enumerable:l in m?m[l]:g[l],writable:!1})}return o(f,p,m)}:o:function(f,p,m){if(n(f),p=i(p),n(m),e)try{return o(f,p,m)}catch{}if("get"in m||"set"in m)throw new s("Accessors not supported");return"value"in m&&(f[p]=m.value),f},QN}var ZN,$U;function wh(){if($U)return ZN;$U=1;var t=gr(),e=Hi(),r=Em();return ZN=t?function(n,i,s){return e.f(n,i,r(1,s))}:function(n,i,s){return n[i]=s,n},ZN}var eC,DU;function Pe(){if(DU)return eC;DU=1;var t=Ht(),e=nb(),r=w$(),n=Yr(),i=ab().f,s=K2e(),o=Tt(),a=lb(),l=wh(),c=an(),d=function(h){var f=function(p,m,g){if(this instanceof f){switch(arguments.length){case 0:return new h;case 1:return new h(p);case 2:return new h(p,m)}return new h(p,m,g)}return e(h,this,arguments)};return f.prototype=h.prototype,f};return eC=function(h,f){var p=h.target,m=h.global,g=h.stat,b=h.proto,y=m?t:g?t[p]:t[p]&&t[p].prototype,v=m?o:o[p]||l(o,p,{})[p],w=v.prototype,x,S,_,N,E,k,C,O,P;for(N in f)x=s(m?N:p+(g?".":"#")+N,h.forced),S=!x&&y&&c(y,N),k=v[N],S&&(h.dontCallGetSet?(P=i(y,N),C=P&&P.value):C=y[N]),E=S&&C?C:f[N],!(!x&&!b&&typeof k==typeof E)&&(h.bind&&S?O=a(E,t):h.wrap&&S?O=d(E):b&&n(E)?O=r(E):O=E,(h.sham||E&&E.sham||k&&k.sham)&&l(O,"sham",!0),l(v,N,O),b&&(_=p+"Prototype",c(o,_)||l(o,_,{}),l(o[_],N,E),h.real&&w&&(x||!w[N])&&l(w,N,E)))},eC}var tC,AU;function G2e(){if(AU)return tC;AU=1;var t=Math.ceil,e=Math.floor;return tC=Math.trunc||function(n){var i=+n;return(i>0?e:t)(i)},tC}var rC,FU;function Sh(){if(FU)return rC;FU=1;var t=G2e();return rC=function(e){var r=+e;return r!==r||r===0?0:t(r)},rC}var nC,qU;function cb(){if(qU)return nC;qU=1;var t=Sh(),e=Math.max,r=Math.min;return nC=function(n,i){var s=t(n);return s<0?e(s+i,0):r(s,i)},nC}var iC,LU;function ooe(){if(LU)return iC;LU=1;var t=Sh(),e=Math.min;return iC=function(r){var n=t(r);return n>0?e(n,9007199254740991):0},iC}var sC,BU;function Wo(){if(BU)return sC;BU=1;var t=ooe();return sC=function(e){return t(e.length)},sC}var oC,zU;function N$(){if(zU)return oC;zU=1;var t=ys(),e=cb(),r=Wo(),n=function(i){return function(s,o,a){var l=t(s),c=r(l);if(c===0)return!i&&-1;var d=e(a,c),h;if(i&&o!==o){for(;c>d;)if(h=l[d++],h!==h)return!0}else for(;c>d;d++)if((i||d in l)&&l[d]===o)return i||d||0;return!i&&-1}};return oC={includes:n(!0),indexOf:n(!1)},oC}var aC,VU;function km(){return VU||(VU=1,aC={}),aC}var lC,UU;function aoe(){if(UU)return lC;UU=1;var t=at(),e=an(),r=ys(),n=N$().indexOf,i=km(),s=t([].push);return lC=function(o,a){var l=r(o),c=0,d=[],h;for(h in l)!e(i,h)&&e(l,h)&&s(d,h);for(;a.length>c;)e(l,h=a[c++])&&(~n(d,h)||s(d,h));return d},lC}var cC,HU;function C$(){return HU||(HU=1,cC=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),cC}var uC,WU;function Tm(){if(WU)return uC;WU=1;var t=aoe(),e=C$();return uC=Object.keys||function(n){return t(n,e)},uC}var dC={},KU;function ub(){return KU||(KU=1,dC.f=Object.getOwnPropertySymbols),dC}var hC,GU;function Y2e(){if(GU)return hC;GU=1;var t=gr(),e=at(),r=ni(),n=nt(),i=Tm(),s=ub(),o=ib(),a=wi(),l=sb(),c=Object.assign,d=Object.defineProperty,h=e([].concat);return hC=!c||n(function(){if(t&&c({b:1},c(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},p={},m=Symbol("assign detection"),g="abcdefghijklmnopqrst";return f[m]=7,g.split("").forEach(function(b){p[b]=b}),c({},f)[m]!==7||i(c({},p)).join("")!==g})?function(p,m){for(var g=a(p),b=arguments.length,y=1,v=s.f,w=o.f;b>y;)for(var x=l(arguments[y++]),S=v?h(i(x),v(x)):i(x),_=S.length,N=0,E;_>N;)E=S[N++],(!t||r(w,x,E))&&(g[E]=x[E]);return g}:c,hC}var YU;function Q2e(){if(YU)return BV;YU=1;var t=Pe(),e=Y2e();return t({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),BV}var fC,QU;function X2e(){if(QU)return fC;QU=1,Q2e();var t=Tt();return fC=t.Object.assign,fC}var pC,XU;function J2e(){if(XU)return pC;XU=1;var t=X2e();return pC=t,pC}var mC,JU;function Z2e(){return JU||(JU=1,mC=J2e()),mC}var eOe=Z2e(),Sr=ze(eOe),ZU={},gC,eH;function _h(){if(eH)return gC;eH=1;var t=at();return gC=t([].slice),gC}var yC,tH;function tOe(){if(tH)return yC;tH=1;var t=at(),e=Ho(),r=Qr(),n=an(),i=_h(),s=_m(),o=Function,a=t([].concat),l=t([].join),c={},d=function(h,f,p){if(!n(c,f)){for(var m=[],g=0;g<f;g++)m[g]="a["+g+"]";c[f]=o("C,a","return new C("+l(m,",")+")")}return c[f](h,p)};return yC=s?o.bind:function(f){var p=e(this),m=p.prototype,g=i(arguments,1),b=function(){var v=a(g,i(arguments));return this instanceof b?d(p,v.length,v):p.apply(f,v)};return r(m)&&(b.prototype=m),b},yC}var rH;function rOe(){if(rH)return ZU;rH=1;var t=Pe(),e=tOe();return t({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),ZU}var vC,nH;function ln(){if(nH)return vC;nH=1;var t=Ht(),e=Tt();return vC=function(r,n){var i=e[r+"Prototype"],s=i&&i[n];if(s)return s;var o=t[r],a=o&&o.prototype;return a&&a[n]},vC}var bC,iH;function nOe(){if(iH)return bC;iH=1,rOe();var t=ln();return bC=t("Function","bind"),bC}var xC,sH;function iOe(){if(sH)return xC;sH=1;var t=Tr(),e=nOe(),r=Function.prototype;return xC=function(n){var i=n.bind;return n===r||t(r,n)&&i===r.bind?e:i},xC}var wC,oH;function sOe(){if(oH)return wC;oH=1;var t=iOe();return wC=t,wC}var SC,aH;function oOe(){return aH||(aH=1,SC=sOe()),SC}var aOe=oOe(),ne=ze(aOe);function k$(t,e,r,n){t.beginPath(),t.arc(e,r,n,0,2*Math.PI,!1),t.closePath()}function lOe(t,e,r,n){t.beginPath(),t.rect(e-n,r-n,n*2,n*2),t.closePath()}function cOe(t,e,r,n){t.beginPath(),n*=1.15,r+=.275*n;const i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);t.moveTo(e,r-(a-o)),t.lineTo(e+s,r+o),t.lineTo(e-s,r+o),t.lineTo(e,r-(a-o)),t.closePath()}function uOe(t,e,r,n){t.beginPath(),n*=1.15,r-=.275*n;const i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);t.moveTo(e,r+(a-o)),t.lineTo(e+s,r-o),t.lineTo(e-s,r-o),t.lineTo(e,r+(a-o)),t.closePath()}function dOe(t,e,r,n){t.beginPath(),n*=.82,r+=.1*n;for(let i=0;i<10;i++){const s=i%2===0?n*1.3:n*.5;t.lineTo(e+s*Math.sin(i*2*Math.PI/10),r-s*Math.cos(i*2*Math.PI/10))}t.closePath()}function hOe(t,e,r,n){t.beginPath(),t.lineTo(e,r+n),t.lineTo(e+n,r),t.lineTo(e,r-n),t.lineTo(e-n,r),t.closePath()}function loe(t,e,r,n,i,s){const o=Math.PI/180;n-2*s<0&&(s=n/2),i-2*s<0&&(s=i/2),t.beginPath(),t.moveTo(e+s,r),t.lineTo(e+n-s,r),t.arc(e+n-s,r+s,s,o*270,o*360,!1),t.lineTo(e+n,r+i-s),t.arc(e+n-s,r+i-s,s,0,o*90,!1),t.lineTo(e+s,r+i),t.arc(e+s,r+i-s,s,o*90,o*180,!1),t.lineTo(e,r+s),t.arc(e+s,r+s,s,o*180,o*270,!1),t.closePath()}function OI(t,e,r,n,i){const s=.5522848,o=n/2*s,a=i/2*s,l=e+n,c=r+i,d=e+n/2,h=r+i/2;t.beginPath(),t.moveTo(e,h),t.bezierCurveTo(e,h-a,d-o,r,d,r),t.bezierCurveTo(d+o,r,l,h-a,l,h),t.bezierCurveTo(l,h+a,d+o,c,d,c),t.bezierCurveTo(d-o,c,e,h+a,e,h),t.closePath()}function coe(t,e,r,n,i){const s=.3333333333333333,o=n,a=i*s,l=.5522848,c=o/2*l,d=a/2*l,h=e+o,f=r+a,p=e+o/2,m=r+a/2,g=r+(i-a/2),b=r+i;t.beginPath(),t.moveTo(h,m),t.bezierCurveTo(h,m+d,p+c,f,p,f),t.bezierCurveTo(p-c,f,e,m+d,e,m),t.bezierCurveTo(e,m-d,p-c,r,p,r),t.bezierCurveTo(p+c,r,h,m-d,h,m),t.lineTo(h,g),t.bezierCurveTo(h,g+d,p+c,b,p,b),t.bezierCurveTo(p-c,b,e,g+d,e,g),t.lineTo(e,m)}function uoe(t,e,r,n,i,s){t.beginPath(),t.moveTo(e,r);const o=s.length,a=n-e,l=i-r,c=l/a;let d=Math.sqrt(a*a+l*l),h=0,f=!0,p=0,m=+s[0];for(;d>=.1;)m=+s[h++%o],m>d&&(m=d),p=Math.sqrt(m*m/(1+c*c)),p=a<0?-p:p,e+=p,r+=c*p,f===!0?t.lineTo(e,r):t.moveTo(e,r),d-=m,f=!f}function fOe(t,e,r,n){t.beginPath();const i=6,s=Math.PI*2/i;t.moveTo(e+n,r);for(let o=1;o<i;o++)t.lineTo(e+n*Math.cos(s*o),r+n*Math.sin(s*o));t.closePath()}const lH={circle:k$,dashedLine:uoe,database:coe,diamond:hOe,ellipse:OI,ellipse_vis:OI,hexagon:fOe,roundRect:loe,square:lOe,star:dOe,triangle:cOe,triangleDown:uOe};function pOe(t){return Object.prototype.hasOwnProperty.call(lH,t)?lH[t]:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];CanvasRenderingContext2D.prototype[t].call(e,n)}}var _C={exports:{}},cH;function mOe(){return cH||(cH=1,function(t){t.exports=e;function e(n){if(n)return r(n)}function r(n){for(var i in e.prototype)n[i]=e.prototype[i];return n}e.prototype.on=e.prototype.addEventListener=function(n,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(i),this},e.prototype.once=function(n,i){function s(){this.off(n,s),i.apply(this,arguments)}return s.fn=i,this.on(n,s),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(n,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+n];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var o,a=0;a<s.length;a++)if(o=s[a],o===i||o.fn===i){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+n],this},e.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),s=this._callbacks["$"+n],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(s){s=s.slice(0);for(var o=0,a=s.length;o<a;++o)s[o].apply(this,i)}return this},e.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},e.prototype.hasListeners=function(n){return!!this.listeners(n).length}}(_C)),_C.exports}var gOe=mOe(),doe=ze(gOe),uH={},EC,dH;function ru(){if(dH)return EC;dH=1;var t=Us();return EC=Array.isArray||function(r){return t(r)==="Array"},EC}var NC,hH;function hoe(){if(hH)return NC;hH=1;var t=TypeError,e=9007199254740991;return NC=function(r){if(r>e)throw t("Maximum allowed index exceeded");return r},NC}var CC,fH;function db(){if(fH)return CC;fH=1;var t=gr(),e=Hi(),r=Em();return CC=function(n,i,s){t?e.f(n,i,r(0,s)):n[i]=s},CC}var kC,pH;function T$(){if(pH)return kC;pH=1;var t=Or(),e=t("toStringTag"),r={};return r[e]="z",kC=String(r)==="[object z]",kC}var TC,mH;function Eh(){if(mH)return TC;mH=1;var t=T$(),e=Yr(),r=Us(),n=Or(),i=n("toStringTag"),s=Object,o=r(function(){return arguments}())==="Arguments",a=function(l,c){try{return l[c]}catch{}};return TC=t?r:function(l){var c,d,h;return l===void 0?"Undefined":l===null?"Null":typeof(d=a(c=s(l),i))=="string"?d:o?r(c):(h=r(c))==="Object"&&e(c.callee)?"Arguments":h},TC}var OC,gH;function yOe(){if(gH)return OC;gH=1;var t=at(),e=Yr(),r=_$(),n=t(Function.toString);return e(r.inspectSource)||(r.inspectSource=function(i){return n(i)}),OC=r.inspectSource,OC}var jC,yH;function foe(){if(yH)return jC;yH=1;var t=at(),e=nt(),r=Yr(),n=Eh(),i=xi(),s=yOe(),o=function(){},a=i("Reflect","construct"),l=/^\s*(?:class|function)\b/,c=t(l.exec),d=!l.test(o),h=function(m){if(!r(m))return!1;try{return a(o,[],m),!0}catch{return!1}},f=function(m){if(!r(m))return!1;switch(n(m)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!c(l,s(m))}catch{return!0}};return f.sham=!0,jC=!a||e(function(){var p;return h(h.call)||!h(Object)||!h(function(){p=!0})||p})?f:h,jC}var PC,vH;function vOe(){if(vH)return PC;vH=1;var t=ru(),e=foe(),r=Qr(),n=Or(),i=n("species"),s=Array;return PC=function(o){var a;return t(o)&&(a=o.constructor,e(a)&&(a===s||t(a.prototype))?a=void 0:r(a)&&(a=a[i],a===null&&(a=void 0))),a===void 0?s:a},PC}var IC,bH;function O$(){if(bH)return IC;bH=1;var t=vOe();return IC=function(e,r){return new(t(e))(r===0?0:r)},IC}var RC,xH;function Om(){if(xH)return RC;xH=1;var t=nt(),e=Or(),r=Nm(),n=e("species");return RC=function(i){return r>=51||!t(function(){var s=[],o=s.constructor={};return o[n]=function(){return{foo:1}},s[i](Boolean).foo!==1})},RC}var wH;function poe(){if(wH)return uH;wH=1;var t=Pe(),e=nt(),r=ru(),n=Qr(),i=wi(),s=Wo(),o=hoe(),a=db(),l=O$(),c=Om(),d=Or(),h=Nm(),f=d("isConcatSpreadable"),p=h>=51||!e(function(){var b=[];return b[f]=!1,b.concat()[0]!==b}),m=function(b){if(!n(b))return!1;var y=b[f];return y!==void 0?!!y:r(b)},g=!p||!c("concat");return t({target:"Array",proto:!0,arity:1,forced:g},{concat:function(y){var v=i(this),w=l(v,0),x=0,S,_,N,E,k;for(S=-1,N=arguments.length;S<N;S++)if(k=S===-1?v:arguments[S],m(k))for(E=s(k),o(x+E),_=0;_<E;_++,x++)_ in k&&a(w,x,k[_]);else o(x+1),a(w,x++,k);return w.length=x,w}}),uH}var SH={},_H={},MC,EH;function Wi(){if(EH)return MC;EH=1;var t=Eh(),e=String;return MC=function(r){if(t(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(r)},MC}var $C={},NH;function j$(){if(NH)return $C;NH=1;var t=gr(),e=soe(),r=Hi(),n=Hs(),i=ys(),s=Tm();return $C.f=t&&!e?Object.defineProperties:function(a,l){n(a);for(var c=i(l),d=s(l),h=d.length,f=0,p;h>f;)r.f(a,p=d[f++],c[p]);return a},$C}var DC,CH;function bOe(){if(CH)return DC;CH=1;var t=xi();return DC=t("document","documentElement"),DC}var AC,kH;function hb(){if(kH)return AC;kH=1;var t=xh(),e=ob(),r=t("keys");return AC=function(n){return r[n]||(r[n]=e(n))},AC}var FC,TH;function jm(){if(TH)return FC;TH=1;var t=Hs(),e=j$(),r=C$(),n=km(),i=bOe(),s=noe(),o=hb(),a=">",l="<",c="prototype",d="script",h=o("IE_PROTO"),f=function(){},p=function(v){return l+d+a+v+l+"/"+d+a},m=function(v){v.write(p("")),v.close();var w=v.parentWindow.Object;return v=null,w},g=function(){var v=s("iframe"),w="java"+d+":",x;return v.style.display="none",i.appendChild(v),v.src=String(w),x=v.contentWindow.document,x.open(),x.write(p("document.F=Object")),x.close(),x.F},b,y=function(){try{b=new ActiveXObject("htmlfile")}catch{}y=typeof document<"u"?document.domain&&b?m(b):g():m(b);for(var v=r.length;v--;)delete y[c][r[v]];return y()};return n[h]=!0,FC=Object.create||function(w,x){var S;return w!==null?(f[c]=t(w),S=new f,f[c]=null,S[h]=w):S=y(),x===void 0?S:e.f(S,x)},FC}var qC={},OH;function fb(){if(OH)return qC;OH=1;var t=aoe(),e=C$(),r=e.concat("length","prototype");return qC.f=Object.getOwnPropertyNames||function(i){return t(i,r)},qC}var LC={},jH;function P$(){if(jH)return LC;jH=1;var t=Us(),e=ys(),r=fb().f,n=_h(),i=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(o){try{return r(o)}catch{return n(i)}};return LC.f=function(a){return i&&t(a)==="Window"?s(a):r(e(a))},LC}var BC,PH;function Pm(){if(PH)return BC;PH=1;var t=wh();return BC=function(e,r,n,i){return i&&i.enumerable?e[r]=n:t(e,r,n),e},BC}var zC,IH;function I$(){if(IH)return zC;IH=1;var t=Hi();return zC=function(e,r,n){return t.f(e,r,n)},zC}var VC={},RH;function pb(){if(RH)return VC;RH=1;var t=Or();return VC.f=t,VC}var UC,MH;function Zt(){if(MH)return UC;MH=1;var t=Tt(),e=an(),r=pb(),n=Hi().f;return UC=function(i){var s=t.Symbol||(t.Symbol={});e(s,i)||n(s,i,{value:r.f(i)})},UC}var HC,$H;function moe(){if($H)return HC;$H=1;var t=ni(),e=xi(),r=Or(),n=Pm();return HC=function(){var i=e("Symbol"),s=i&&i.prototype,o=s&&s.valueOf,a=r("toPrimitive");s&&!s[a]&&n(s,a,function(l){return t(o,this)},{arity:1})},HC}var WC,DH;function xOe(){if(DH)return WC;DH=1;var t=T$(),e=Eh();return WC=t?{}.toString:function(){return"[object "+e(this)+"]"},WC}var KC,AH;function nu(){if(AH)return KC;AH=1;var t=T$(),e=Hi().f,r=wh(),n=an(),i=xOe(),s=Or(),o=s("toStringTag");return KC=function(a,l,c,d){var h=c?a:a&&a.prototype;h&&(n(h,o)||e(h,o,{configurable:!0,value:l}),d&&!t&&r(h,"toString",i))},KC}var GC,FH;function goe(){if(FH)return GC;FH=1;var t=Ht(),e=Yr(),r=t.WeakMap;return GC=e(r)&&/native code/.test(String(r)),GC}var YC,qH;function iu(){if(qH)return YC;qH=1;var t=goe(),e=Ht(),r=Qr(),n=wh(),i=an(),s=_$(),o=hb(),a=km(),l="Object already initialized",c=e.TypeError,d=e.WeakMap,h,f,p,m=function(v){return p(v)?f(v):h(v,{})},g=function(v){return function(w){var x;if(!r(w)||(x=f(w)).type!==v)throw new c("Incompatible receiver, "+v+" required");return x}};if(t||s.state){var b=s.state||(s.state=new d);b.get=b.get,b.has=b.has,b.set=b.set,h=function(v,w){if(b.has(v))throw new c(l);return w.facade=v,b.set(v,w),w},f=function(v){return b.get(v)||{}},p=function(v){return b.has(v)}}else{var y=o("state");a[y]=!0,h=function(v,w){if(i(v,y))throw new c(l);return w.facade=v,n(v,y,w),w},f=function(v){return i(v,y)?v[y]:{}},p=function(v){return i(v,y)}}return YC={set:h,get:f,has:p,enforce:m,getterFor:g},YC}var QC,LH;function yl(){if(LH)return QC;LH=1;var t=lb(),e=at(),r=sb(),n=wi(),i=Wo(),s=O$(),o=e([].push),a=function(l){var c=l===1,d=l===2,h=l===3,f=l===4,p=l===6,m=l===7,g=l===5||p;return function(b,y,v,w){for(var x=n(b),S=r(x),_=i(S),N=t(y,v),E=0,k=w||s,C=c?k(b,_):d||m?k(b,0):void 0,O,P;_>E;E++)if((g||E in S)&&(O=S[E],P=N(O,E,x),l))if(c)C[E]=P;else if(P)switch(l){case 3:return!0;case 5:return O;case 6:return E;case 2:o(C,O)}else switch(l){case 4:return!1;case 7:o(C,O)}return p?-1:h||f?f:C}};return QC={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterReject:a(7)},QC}var BH;function wOe(){if(BH)return _H;BH=1;var t=Pe(),e=Ht(),r=ni(),n=at(),i=bh(),s=gr(),o=yh(),a=nt(),l=an(),c=Tr(),d=Hs(),h=ys(),f=E$(),p=Wi(),m=Em(),g=jm(),b=Tm(),y=fb(),v=P$(),w=ub(),x=ab(),S=Hi(),_=j$(),N=ib(),E=Pm(),k=I$(),C=xh(),O=hb(),P=km(),j=ob(),M=Or(),A=pb(),I=Zt(),L=moe(),F=nu(),W=iu(),B=yl().forEach,U=O("hidden"),K="Symbol",fe="prototype",we=W.set,Fe=W.getterFor(K),Se=Object[fe],Oe=e.Symbol,$e=Oe&&Oe[fe],pt=e.RangeError,it=e.TypeError,mt=e.QObject,X=x.f,ve=S.f,He=v.f,lt=N.f,It=n([].push),ke=C("symbols"),tt=C("op-symbols"),xt=C("wks"),gt=!mt||!mt[fe]||!mt[fe].findChild,$=function(Ee,ie,de){var he=X(Se,ie);he&&delete Se[ie],ve(Ee,ie,de),he&&Ee!==Se&&ve(Se,ie,he)},q=s&&a(function(){return g(ve({},"a",{get:function(){return ve(this,"a",{value:7}).a}})).a!==7})?$:ve,V=function(Ee,ie){var de=ke[Ee]=g($e);return we(de,{type:K,tag:Ee,description:ie}),s||(de.description=ie),de},oe=function(ie,de,he){ie===Se&&oe(tt,de,he),d(ie);var Ne=f(de);return d(he),l(ke,Ne)?(he.enumerable?(l(ie,U)&&ie[U][Ne]&&(ie[U][Ne]=!1),he=g(he,{enumerable:m(0,!1)})):(l(ie,U)||ve(ie,U,m(1,g(null))),ie[U][Ne]=!0),q(ie,Ne,he)):ve(ie,Ne,he)},Z=function(ie,de){d(ie);var he=h(de),Ne=b(he).concat(er(he));return B(Ne,function(st){(!s||r(ye,he,st))&&oe(ie,st,he[st])}),ie},J=function(ie,de){return de===void 0?g(ie):Z(g(ie),de)},ye=function(ie){var de=f(ie),he=r(lt,this,de);return this===Se&&l(ke,de)&&!l(tt,de)?!1:he||!l(this,de)||!l(ke,de)||l(this,U)&&this[U][de]?he:!0},Ye=function(ie,de){var he=h(ie),Ne=f(de);if(!(he===Se&&l(ke,Ne)&&!l(tt,Ne))){var st=X(he,Ne);return st&&l(ke,Ne)&&!(l(he,U)&&he[U][Ne])&&(st.enumerable=!0),st}},Je=function(ie){var de=He(h(ie)),he=[];return B(de,function(Ne){!l(ke,Ne)&&!l(P,Ne)&&It(he,Ne)}),he},er=function(Ee){var ie=Ee===Se,de=He(ie?tt:h(Ee)),he=[];return B(de,function(Ne){l(ke,Ne)&&(!ie||l(Se,Ne))&&It(he,ke[Ne])}),he};return o||(Oe=function(){if(c($e,this))throw new it("Symbol is not a constructor");var ie=!arguments.length||arguments[0]===void 0?void 0:p(arguments[0]),de=j(ie),he=function(Ne){var st=this===void 0?e:this;st===Se&&r(he,tt,Ne),l(st,U)&&l(st[U],de)&&(st[U][de]=!1);var ii=m(1,Ne);try{q(st,de,ii)}catch(Gi){if(!(Gi instanceof pt))throw Gi;$(st,de,ii)}};return s&&gt&&q(Se,de,{configurable:!0,set:he}),V(de,ie)},$e=Oe[fe],E($e,"toString",function(){return Fe(this).tag}),E(Oe,"withoutSetter",function(Ee){return V(j(Ee),Ee)}),N.f=ye,S.f=oe,_.f=Z,x.f=Ye,y.f=v.f=Je,w.f=er,A.f=function(Ee){return V(M(Ee),Ee)},s&&(k($e,"description",{configurable:!0,get:function(){return Fe(this).description}}),i||E(Se,"propertyIsEnumerable",ye,{unsafe:!0}))),t({global:!0,constructor:!0,wrap:!0,forced:!o,sham:!o},{Symbol:Oe}),B(b(xt),function(Ee){I(Ee)}),t({target:K,stat:!0,forced:!o},{useSetter:function(){gt=!0},useSimple:function(){gt=!1}}),t({target:"Object",stat:!0,forced:!o,sham:!s},{create:J,defineProperty:oe,defineProperties:Z,getOwnPropertyDescriptor:Ye}),t({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:Je}),L(),F(Oe,K),P[U]=!0,_H}var zH={},XC,VH;function yoe(){if(VH)return XC;VH=1;var t=yh();return XC=t&&!!Symbol.for&&!!Symbol.keyFor,XC}var UH;function SOe(){if(UH)return zH;UH=1;var t=Pe(),e=xi(),r=an(),n=Wi(),i=xh(),s=yoe(),o=i("string-to-symbol-registry"),a=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{for:function(l){var c=n(l);if(r(o,c))return o[c];var d=e("Symbol")(c);return o[c]=d,a[d]=c,d}}),zH}var HH={},WH;function _Oe(){if(WH)return HH;WH=1;var t=Pe(),e=an(),r=Cm(),n=vh(),i=xh(),s=yoe(),o=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{keyFor:function(l){if(!r(l))throw new TypeError(n(l)+" is not a symbol");if(e(o,l))return o[l]}}),HH}var KH={},JC,GH;function EOe(){if(GH)return JC;GH=1;var t=at(),e=ru(),r=Yr(),n=Us(),i=Wi(),s=t([].push);return JC=function(o){if(r(o))return o;if(e(o)){for(var a=o.length,l=[],c=0;c<a;c++){var d=o[c];typeof d=="string"?s(l,d):(typeof d=="number"||n(d)==="Number"||n(d)==="String")&&s(l,i(d))}var h=l.length,f=!0;return function(p,m){if(f)return f=!1,m;if(e(this))return m;for(var g=0;g<h;g++)if(l[g]===p)return m}}},JC}var YH;function voe(){if(YH)return KH;YH=1;var t=Pe(),e=xi(),r=nb(),n=ni(),i=at(),s=nt(),o=Yr(),a=Cm(),l=_h(),c=EOe(),d=yh(),h=String,f=e("JSON","stringify"),p=i(/./.exec),m=i("".charAt),g=i("".charCodeAt),b=i("".replace),y=i(1.1.toString),v=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,x=/^[\uDC00-\uDFFF]$/,S=!d||s(function(){var k=e("Symbol")("stringify detection");return f([k])!=="[null]"||f({a:k})!=="{}"||f(Object(k))!=="{}"}),_=s(function(){return f("\uDF06\uD834")!=='"\\udf06\\ud834"'||f("\uDEAD")!=='"\\udead"'}),N=function(k,C){var O=l(arguments),P=c(C);if(!(!o(P)&&(k===void 0||a(k))))return O[1]=function(j,M){if(o(P)&&(M=n(P,this,h(j),M)),!a(M))return M},r(f,null,O)},E=function(k,C,O){var P=m(O,C-1),j=m(O,C+1);return p(w,k)&&!p(x,j)||p(x,k)&&!p(w,P)?"\\u"+y(g(k,0),16):k};return f&&t({target:"JSON",stat:!0,arity:3,forced:S||_},{stringify:function(C,O,P){var j=l(arguments),M=r(S?N:f,null,j);return _&&typeof M=="string"?b(M,v,E):M}}),KH}var QH={},XH;function NOe(){if(XH)return QH;XH=1;var t=Pe(),e=yh(),r=nt(),n=ub(),i=wi(),s=!e||r(function(){n.f(1)});return t({target:"Object",stat:!0,forced:s},{getOwnPropertySymbols:function(a){var l=n.f;return l?l(i(a)):[]}}),QH}var JH;function boe(){return JH||(JH=1,wOe(),SOe(),_Oe(),voe(),NOe()),SH}var ZH={},e7;function xoe(){if(e7)return ZH;e7=1;var t=Zt();return t("asyncDispose"),ZH}var t7={},r7;function COe(){if(r7)return t7;r7=1;var t=Zt();return t("asyncIterator"),t7}var n7={},i7;function woe(){if(i7)return n7;i7=1;var t=Zt();return t("dispose"),n7}var s7={},o7;function kOe(){if(o7)return s7;o7=1;var t=Zt();return t("hasInstance"),s7}var a7={},l7;function TOe(){if(l7)return a7;l7=1;var t=Zt();return t("isConcatSpreadable"),a7}var c7={},u7;function Soe(){if(u7)return c7;u7=1;var t=Zt();return t("iterator"),c7}var d7={},h7;function OOe(){if(h7)return d7;h7=1;var t=Zt();return t("match"),d7}var f7={},p7;function jOe(){if(p7)return f7;p7=1;var t=Zt();return t("matchAll"),f7}var m7={},g7;function POe(){if(g7)return m7;g7=1;var t=Zt();return t("replace"),m7}var y7={},v7;function IOe(){if(v7)return y7;v7=1;var t=Zt();return t("search"),y7}var b7={},x7;function ROe(){if(x7)return b7;x7=1;var t=Zt();return t("species"),b7}var w7={},S7;function MOe(){if(S7)return w7;S7=1;var t=Zt();return t("split"),w7}var _7={},E7;function _oe(){if(E7)return _7;E7=1;var t=Zt(),e=moe();return t("toPrimitive"),e(),_7}var N7={},C7;function $Oe(){if(C7)return N7;C7=1;var t=xi(),e=Zt(),r=nu();return e("toStringTag"),r(t("Symbol"),"Symbol"),N7}var k7={},T7;function DOe(){if(T7)return k7;T7=1;var t=Zt();return t("unscopables"),k7}var O7={},j7;function AOe(){if(j7)return O7;j7=1;var t=Ht(),e=nu();return e(t.JSON,"JSON",!0),O7}var ZC,P7;function FOe(){if(P7)return ZC;P7=1,poe(),boe(),xoe(),COe(),woe(),kOe(),TOe(),Soe(),OOe(),jOe(),POe(),IOe(),ROe(),MOe(),_oe(),$Oe(),DOe(),AOe();var t=Tt();return ZC=t.Symbol,ZC}var I7={},ek,R7;function R$(){return R7||(R7=1,ek=function(){}),ek}var tk,M7;function Nh(){return M7||(M7=1,tk={}),tk}var rk,$7;function qOe(){if($7)return rk;$7=1;var t=gr(),e=an(),r=Function.prototype,n=t&&Object.getOwnPropertyDescriptor,i=e(r,"name"),s=i&&(function(){}).name==="something",o=i&&(!t||t&&n(r,"name").configurable);return rk={EXISTS:i,PROPER:s,CONFIGURABLE:o},rk}var nk,D7;function Eoe(){if(D7)return nk;D7=1;var t=nt();return nk=!t(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),nk}var ik,A7;function mb(){if(A7)return ik;A7=1;var t=an(),e=Yr(),r=wi(),n=hb(),i=Eoe(),s=n("IE_PROTO"),o=Object,a=o.prototype;return ik=i?o.getPrototypeOf:function(l){var c=r(l);if(t(c,s))return c[s];var d=c.constructor;return e(d)&&c instanceof d?d.prototype:c instanceof o?a:null},ik}var sk,F7;function Noe(){if(F7)return sk;F7=1;var t=nt(),e=Yr(),r=Qr(),n=jm(),i=mb(),s=Pm(),o=Or(),a=bh(),l=o("iterator"),c=!1,d,h,f;[].keys&&(f=[].keys(),"next"in f?(h=i(i(f)),h!==Object.prototype&&(d=h)):c=!0);var p=!r(d)||t(function(){var m={};return d[l].call(m)!==m});return p?d={}:a&&(d=n(d)),e(d[l])||s(d,l,function(){return this}),sk={IteratorPrototype:d,BUGGY_SAFARI_ITERATORS:c},sk}var ok,q7;function LOe(){if(q7)return ok;q7=1;var t=Noe().IteratorPrototype,e=jm(),r=Em(),n=nu(),i=Nh(),s=function(){return this};return ok=function(o,a,l,c){var d=a+" Iterator";return o.prototype=e(t,{next:r(+!c,l)}),n(o,d,!1,!0),i[d]=s,o},ok}var ak,L7;function BOe(){if(L7)return ak;L7=1;var t=at(),e=Ho();return ak=function(r,n,i){try{return t(e(Object.getOwnPropertyDescriptor(r,n)[i]))}catch{}},ak}var lk,B7;function zOe(){if(B7)return lk;B7=1;var t=Qr();return lk=function(e){return t(e)||e===null},lk}var ck,z7;function VOe(){if(z7)return ck;z7=1;var t=zOe(),e=String,r=TypeError;return ck=function(n){if(t(n))return n;throw new r("Can't set "+e(n)+" as a prototype")},ck}var uk,V7;function UOe(){if(V7)return uk;V7=1;var t=BOe(),e=Qr(),r=Uo(),n=VOe();return uk=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,s={},o;try{o=t(Object.prototype,"__proto__","set"),o(s,[]),i=s instanceof Array}catch{}return function(l,c){return r(l),n(c),e(l)&&(i?o(l,c):l.__proto__=c),l}}():void 0),uk}var dk,U7;function M$(){if(U7)return dk;U7=1;var t=Pe(),e=ni(),r=bh(),n=qOe(),i=Yr(),s=LOe(),o=mb(),a=UOe(),l=nu(),c=wh(),d=Pm(),h=Or(),f=Nh(),p=Noe(),m=n.PROPER,g=n.CONFIGURABLE,b=p.IteratorPrototype,y=p.BUGGY_SAFARI_ITERATORS,v=h("iterator"),w="keys",x="values",S="entries",_=function(){return this};return dk=function(N,E,k,C,O,P,j){s(k,E,C);var M=function(we){if(we===O&&W)return W;if(!y&&we&&we in L)return L[we];switch(we){case w:return function(){return new k(this,we)};case x:return function(){return new k(this,we)};case S:return function(){return new k(this,we)}}return function(){return new k(this)}},A=E+" Iterator",I=!1,L=N.prototype,F=L[v]||L["@@iterator"]||O&&L[O],W=!y&&F||M(O),B=E==="Array"&&L.entries||F,U,K,fe;if(B&&(U=o(B.call(new N)),U!==Object.prototype&&U.next&&(!r&&o(U)!==b&&(a?a(U,b):i(U[v])||d(U,v,_)),l(U,A,!0,!0),r&&(f[A]=_))),m&&O===x&&F&&F.name!==x&&(!r&&g?c(L,"name",x):(I=!0,W=function(){return e(F,this)})),O)if(K={values:M(x),keys:P?W:M(w),entries:M(S)},j)for(fe in K)(y||I||!(fe in L))&&d(L,fe,K[fe]);else t({target:E,proto:!0,forced:y||I},K);return(!r||j)&&L[v]!==W&&d(L,v,W,{name:O}),f[E]=W,K},dk}var hk,H7;function $$(){return H7||(H7=1,hk=function(t,e){return{value:t,done:e}}),hk}var fk,W7;function Ch(){if(W7)return fk;W7=1;var t=ys(),e=R$(),r=Nh(),n=iu(),i=Hi().f,s=M$(),o=$$(),a=bh(),l=gr(),c="Array Iterator",d=n.set,h=n.getterFor(c);fk=s(Array,"Array",function(p,m){d(this,{type:c,target:t(p),index:0,kind:m})},function(){var p=h(this),m=p.target,g=p.index++;if(!m||g>=m.length)return p.target=null,o(void 0,!0);switch(p.kind){case"keys":return o(g,!1);case"values":return o(m[g],!1)}return o([g,m[g]],!1)},"values");var f=r.Arguments=r.Array;if(e("keys"),e("values"),e("entries"),!a&&l&&f.name!=="values")try{i(f,"name",{value:"values"})}catch{}return fk}var pk,K7;function HOe(){return K7||(K7=1,pk={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),pk}var G7;function kh(){if(G7)return I7;G7=1,Ch();var t=HOe(),e=Ht(),r=nu(),n=Nh();for(var i in t)r(e[i],i),n[i]=n.Array;return I7}var mk,Y7;function Coe(){if(Y7)return mk;Y7=1;var t=FOe();return kh(),mk=t,mk}var gk,Q7;function WOe(){return Q7||(Q7=1,gk=Coe()),gk}var KOe=WOe(),GOe=ze(KOe),X7={},J7;function YOe(){if(J7)return X7;J7=1;var t=Pe(),e=ru(),r=foe(),n=Qr(),i=cb(),s=Wo(),o=ys(),a=db(),l=Or(),c=Om(),d=_h(),h=c("slice"),f=l("species"),p=Array,m=Math.max;return t({target:"Array",proto:!0,forced:!h},{slice:function(b,y){var v=o(this),w=s(v),x=i(b,w),S=i(y===void 0?w:y,w),_,N,E;if(e(v)&&(_=v.constructor,r(_)&&(_===p||e(_.prototype))?_=void 0:n(_)&&(_=_[f],_===null&&(_=void 0)),_===p||_===void 0))return d(v,x,S);for(N=new(_===void 0?p:_)(m(S-x,0)),E=0;x<S;x++,E++)x in v&&a(N,E,v[x]);return N.length=E,N}}),X7}var yk,Z7;function QOe(){if(Z7)return yk;Z7=1,YOe();var t=ln();return yk=t("Array","slice"),yk}var vk,eW;function XOe(){if(eW)return vk;eW=1;var t=Tr(),e=QOe(),r=Array.prototype;return vk=function(n){var i=n.slice;return n===r||t(r,n)&&i===r.slice?e:i},vk}var bk,tW;function JOe(){if(tW)return bk;tW=1;var t=XOe();return bk=t,bk}var xk,rW;function ZOe(){return rW||(rW=1,xk=JOe()),xk}var eje=ZOe(),js=ze(eje),wk,nW;function tje(){if(nW)return wk;nW=1;var t=xi(),e=at(),r=fb(),n=ub(),i=Hs(),s=e([].concat);return wk=t("Reflect","ownKeys")||function(a){var l=r.f(i(a)),c=n.f;return c?s(l,c(a)):l},wk}var iW={},sW;function rje(){if(sW)return iW;sW=1;var t=Pe(),e=ru();return t({target:"Array",stat:!0},{isArray:e}),iW}var Sk,oW;function nje(){if(oW)return Sk;oW=1,rje();var t=Tt();return Sk=t.Array.isArray,Sk}var _k,aW;function ije(){if(aW)return _k;aW=1;var t=nje();return _k=t,_k}var Ek,lW;function sje(){return lW||(lW=1,Ek=ije()),Ek}var oje=sje(),dr=ze(oje),cW={},uW;function aje(){if(uW)return cW;uW=1;var t=Pe(),e=yl().map,r=Om(),n=r("map");return t({target:"Array",proto:!0,forced:!n},{map:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),cW}var Nk,dW;function lje(){if(dW)return Nk;dW=1,aje();var t=ln();return Nk=t("Array","map"),Nk}var Ck,hW;function cje(){if(hW)return Ck;hW=1;var t=Tr(),e=lje(),r=Array.prototype;return Ck=function(n){var i=n.map;return n===r||t(r,n)&&i===r.map?e:i},Ck}var kk,fW;function uje(){if(fW)return kk;fW=1;var t=cje();return kk=t,kk}var Tk,pW;function dje(){return pW||(pW=1,Tk=uje()),Tk}var hje=dje(),Ud=ze(hje),mW={},gW;function fje(){if(gW)return mW;gW=1;var t=Pe(),e=wi(),r=Tm(),n=nt(),i=n(function(){r(1)});return t({target:"Object",stat:!0,forced:i},{keys:function(o){return r(e(o))}}),mW}var Ok,yW;function pje(){if(yW)return Ok;yW=1,fje();var t=Tt();return Ok=t.Object.keys,Ok}var jk,vW;function mje(){if(vW)return jk;vW=1;var t=pje();return jk=t,jk}var Pk,bW;function gje(){return bW||(bW=1,Pk=mje()),Pk}var yje=gje(),ar=ze(yje),xW={},wW;function vje(){if(wW)return xW;wW=1;var t=Pe(),e=at(),r=Date,n=e(r.prototype.getTime);return t({target:"Date",stat:!0},{now:function(){return n(new r)}}),xW}var Ik,SW;function bje(){if(SW)return Ik;SW=1,vje();var t=Tt();return Ik=t.Date.now,Ik}var Rk,_W;function xje(){if(_W)return Rk;_W=1;var t=bje();return Rk=t,Rk}var Mk,EW;function wje(){return EW||(EW=1,Mk=xje()),Mk}var Sje=wje(),Uv=ze(Sje),NW={},$k,CW;function Th(){if(CW)return $k;CW=1;var t=nt();return $k=function(e,r){var n=[][e];return!!n&&t(function(){n.call(null,r||function(){return 1},1)})},$k}var Dk,kW;function _je(){if(kW)return Dk;kW=1;var t=yl().forEach,e=Th(),r=e("forEach");return Dk=r?[].forEach:function(i){return t(this,i,arguments.length>1?arguments[1]:void 0)},Dk}var TW;function Eje(){if(TW)return NW;TW=1;var t=Pe(),e=_je();return t({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),NW}var Ak,OW;function Nje(){if(OW)return Ak;OW=1,Eje();var t=ln();return Ak=t("Array","forEach"),Ak}var Fk,jW;function Cje(){if(jW)return Fk;jW=1;var t=Nje();return Fk=t,Fk}var qk,PW;function kje(){if(PW)return qk;PW=1;var t=Eh(),e=an(),r=Tr(),n=Cje(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return qk=function(o){var a=o.forEach;return o===i||r(i,o)&&a===i.forEach||e(s,t(o))?n:a},qk}var Lk,IW;function Tje(){return IW||(IW=1,Lk=kje()),Lk}var Oje=Tje(),jt=ze(Oje),RW={},MW;function jje(){if(MW)return RW;MW=1;var t=Pe(),e=at(),r=ru(),n=e([].reverse),i=[1,2];return t({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),n(this)}}),RW}var Bk,$W;function Pje(){if($W)return Bk;$W=1,jje();var t=ln();return Bk=t("Array","reverse"),Bk}var zk,DW;function Ije(){if(DW)return zk;DW=1;var t=Tr(),e=Pje(),r=Array.prototype;return zk=function(n){var i=n.reverse;return n===r||t(r,n)&&i===r.reverse?e:i},zk}var Vk,AW;function Rje(){if(AW)return Vk;AW=1;var t=Ije();return Vk=t,Vk}var Uk,FW;function Mje(){return FW||(FW=1,Uk=Rje()),Uk}var $je=Mje(),lc=ze($je),qW={},Hk,LW;function Dje(){if(LW)return Hk;LW=1;var t=gr(),e=ru(),r=TypeError,n=Object.getOwnPropertyDescriptor,i=t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(s){return s instanceof TypeError}}();return Hk=i?function(s,o){if(e(s)&&!n(s,"length").writable)throw new r("Cannot set read only .length");return s.length=o}:function(s,o){return s.length=o},Hk}var Wk,BW;function koe(){if(BW)return Wk;BW=1;var t=vh(),e=TypeError;return Wk=function(r,n){if(!delete r[n])throw new e("Cannot delete property "+t(n)+" of "+t(r))},Wk}var zW;function Aje(){if(zW)return qW;zW=1;var t=Pe(),e=wi(),r=cb(),n=Sh(),i=Wo(),s=Dje(),o=hoe(),a=O$(),l=db(),c=koe(),d=Om(),h=d("splice"),f=Math.max,p=Math.min;return t({target:"Array",proto:!0,forced:!h},{splice:function(g,b){var y=e(this),v=i(y),w=r(g,v),x=arguments.length,S,_,N,E,k,C;for(x===0?S=_=0:x===1?(S=0,_=v-w):(S=x-2,_=p(f(n(b),0),v-w)),o(v+S-_),N=a(y,_),E=0;E<_;E++)k=w+E,k in y&&l(N,E,y[k]);if(N.length=_,S<_){for(E=w;E<v-_;E++)k=E+_,C=E+S,k in y?y[C]=y[k]:c(y,C);for(E=v;E>v-_+S;E--)c(y,E-1)}else if(S>_)for(E=v-_;E>w;E--)k=E+_-1,C=E+S-1,k in y?y[C]=y[k]:c(y,C);for(E=0;E<S;E++)y[E+w]=arguments[E+2];return s(y,v-_+S),N}}),qW}var Kk,VW;function Fje(){if(VW)return Kk;VW=1,Aje();var t=ln();return Kk=t("Array","splice"),Kk}var Gk,UW;function qje(){if(UW)return Gk;UW=1;var t=Tr(),e=Fje(),r=Array.prototype;return Gk=function(n){var i=n.splice;return n===r||t(r,n)&&i===r.splice?e:i},Gk}var Yk,HW;function Lje(){if(HW)return Yk;HW=1;var t=qje();return Yk=t,Yk}var Qk,WW;function Bje(){return WW||(WW=1,Qk=Lje()),Qk}var zje=Bje(),_o=ze(zje),KW={},GW;function Vje(){if(GW)return KW;GW=1;var t=Pe(),e=N$().includes,r=nt(),n=R$(),i=r(function(){return!Array(1).includes()});return t({target:"Array",proto:!0,forced:i},{includes:function(o){return e(this,o,arguments.length>1?arguments[1]:void 0)}}),n("includes"),KW}var Xk,YW;function Uje(){if(YW)return Xk;YW=1,Vje();var t=ln();return Xk=t("Array","includes"),Xk}var QW={},Jk,XW;function Hje(){if(XW)return Jk;XW=1;var t=Qr(),e=Us(),r=Or(),n=r("match");return Jk=function(i){var s;return t(i)&&((s=i[n])!==void 0?!!s:e(i)==="RegExp")},Jk}var Zk,JW;function Wje(){if(JW)return Zk;JW=1;var t=Hje(),e=TypeError;return Zk=function(r){if(t(r))throw new e("The method doesn't accept regular expressions");return r},Zk}var eT,ZW;function Kje(){if(ZW)return eT;ZW=1;var t=Or(),e=t("match");return eT=function(r){var n=/./;try{"/./"[r](n)}catch{try{return n[e]=!1,"/./"[r](n)}catch{}}return!1},eT}var e9;function Gje(){if(e9)return QW;e9=1;var t=Pe(),e=at(),r=Wje(),n=Uo(),i=Wi(),s=Kje(),o=e("".indexOf);return t({target:"String",proto:!0,forced:!s("includes")},{includes:function(l){return!!~o(i(n(this)),i(r(l)),arguments.length>1?arguments[1]:void 0)}}),QW}var tT,t9;function Yje(){if(t9)return tT;t9=1,Gje();var t=ln();return tT=t("String","includes"),tT}var rT,r9;function Qje(){if(r9)return rT;r9=1;var t=Tr(),e=Uje(),r=Yje(),n=Array.prototype,i=String.prototype;return rT=function(s){var o=s.includes;return s===n||t(n,s)&&o===n.includes?e:typeof s=="string"||s===i||t(i,s)&&o===i.includes?r:o},rT}var nT,n9;function Xje(){if(n9)return nT;n9=1;var t=Qje();return nT=t,nT}var iT,i9;function Jje(){return i9||(i9=1,iT=Xje()),iT}var Zje=Jje(),Ga=ze(Zje),s9={},o9;function ePe(){if(o9)return s9;o9=1;var t=Pe(),e=nt(),r=wi(),n=mb(),i=Eoe(),s=e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getPrototypeOf:function(a){return n(r(a))}}),s9}var sT,a9;function tPe(){if(a9)return sT;a9=1,ePe();var t=Tt();return sT=t.Object.getPrototypeOf,sT}var oT,l9;function rPe(){if(l9)return oT;l9=1;var t=tPe();return oT=t,oT}var aT,c9;function nPe(){return c9||(c9=1,aT=rPe()),aT}var iPe=nPe(),u9=ze(iPe),lT,d9;function sPe(){if(d9)return lT;d9=1,poe();var t=ln();return lT=t("Array","concat"),lT}var cT,h9;function oPe(){if(h9)return cT;h9=1;var t=Tr(),e=sPe(),r=Array.prototype;return cT=function(n){var i=n.concat;return n===r||t(r,n)&&i===r.concat?e:i},cT}var uT,f9;function aPe(){if(f9)return uT;f9=1;var t=oPe();return uT=t,uT}var dT,p9;function lPe(){return p9||(p9=1,dT=aPe()),dT}var cPe=lPe(),uPe=ze(cPe),m9={},g9;function dPe(){if(g9)return m9;g9=1;var t=Pe(),e=yl().filter,r=Om(),n=r("filter");return t({target:"Array",proto:!0,forced:!n},{filter:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),m9}var hT,y9;function hPe(){if(y9)return hT;y9=1,dPe();var t=ln();return hT=t("Array","filter"),hT}var fT,v9;function fPe(){if(v9)return fT;v9=1;var t=Tr(),e=hPe(),r=Array.prototype;return fT=function(n){var i=n.filter;return n===r||t(r,n)&&i===r.filter?e:i},fT}var pT,b9;function pPe(){if(b9)return pT;b9=1;var t=fPe();return pT=t,pT}var mT,x9;function mPe(){return x9||(x9=1,mT=pPe()),mT}var gPe=mPe(),Un=ze(gPe),w9={},gT,S9;function yPe(){if(S9)return gT;S9=1;var t=gr(),e=nt(),r=at(),n=mb(),i=Tm(),s=ys(),o=ib().f,a=r(o),l=r([].push),c=t&&e(function(){var h=Object.create(null);return h[2]=2,!a(h,2)}),d=function(h){return function(f){for(var p=s(f),m=i(p),g=c&&n(p)===null,b=m.length,y=0,v=[],w;b>y;)w=m[y++],(!t||(g?w in p:a(p,w)))&&l(v,h?[w,p[w]]:p[w]);return v}};return gT={entries:d(!0),values:d(!1)},gT}var _9;function vPe(){if(_9)return w9;_9=1;var t=Pe(),e=yPe().values;return t({target:"Object",stat:!0},{values:function(n){return e(n)}}),w9}var yT,E9;function bPe(){if(E9)return yT;E9=1,vPe();var t=Tt();return yT=t.Object.values,yT}var vT,N9;function xPe(){if(N9)return vT;N9=1;var t=bPe();return vT=t,vT}var bT,C9;function wPe(){return C9||(C9=1,bT=xPe()),bT}var SPe=wPe(),_Pe=ze(SPe),k9={},xT,T9;function D$(){return T9||(T9=1,xT=`	
\v\f\r \u2028\u2029\uFEFF`),xT}var wT,O9;function Toe(){if(O9)return wT;O9=1;var t=at(),e=Uo(),r=Wi(),n=D$(),i=t("".replace),s=RegExp("^["+n+"]+"),o=RegExp("(^|[^"+n+"])["+n+"]+$"),a=function(l){return function(c){var d=r(e(c));return l&1&&(d=i(d,s,"")),l&2&&(d=i(d,o,"$1")),d}};return wT={start:a(1),end:a(2),trim:a(3)},wT}var ST,j9;function EPe(){if(j9)return ST;j9=1;var t=Ht(),e=nt(),r=at(),n=Wi(),i=Toe().trim,s=D$(),o=t.parseInt,a=t.Symbol,l=a&&a.iterator,c=/^[+-]?0x/i,d=r(c.exec),h=o(s+"08")!==8||o(s+"0x16")!==22||l&&!e(function(){o(Object(l))});return ST=h?function(p,m){var g=i(n(p));return o(g,m>>>0||(d(c,g)?16:10))}:o,ST}var P9;function NPe(){if(P9)return k9;P9=1;var t=Pe(),e=EPe();return t({global:!0,forced:parseInt!==e},{parseInt:e}),k9}var _T,I9;function CPe(){if(I9)return _T;I9=1,NPe();var t=Tt();return _T=t.parseInt,_T}var ET,R9;function kPe(){if(R9)return ET;R9=1;var t=CPe();return ET=t,ET}var NT,M9;function TPe(){return M9||(M9=1,NT=kPe()),NT}var OPe=TPe(),is=ze(OPe),$9={},D9;function jPe(){if(D9)return $9;D9=1;var t=Pe(),e=w$(),r=N$().indexOf,n=Th(),i=e([].indexOf),s=!!i&&1/i([1],1,-0)<0,o=s||!n("indexOf");return t({target:"Array",proto:!0,forced:o},{indexOf:function(l){var c=arguments.length>1?arguments[1]:void 0;return s?i(this,l,c)||0:r(this,l,c)}}),$9}var CT,A9;function PPe(){if(A9)return CT;A9=1,jPe();var t=ln();return CT=t("Array","indexOf"),CT}var kT,F9;function IPe(){if(F9)return kT;F9=1;var t=Tr(),e=PPe(),r=Array.prototype;return kT=function(n){var i=n.indexOf;return n===r||t(r,n)&&i===r.indexOf?e:i},kT}var TT,q9;function RPe(){if(q9)return TT;q9=1;var t=IPe();return TT=t,TT}var OT,L9;function MPe(){return L9||(L9=1,OT=RPe()),OT}var $Pe=MPe(),Nt=ze($Pe),B9={},z9;function DPe(){if(z9)return B9;z9=1;var t=Pe(),e=gr(),r=jm();return t({target:"Object",stat:!0,sham:!e},{create:r}),B9}var jT,V9;function APe(){if(V9)return jT;V9=1,DPe();var t=Tt(),e=t.Object;return jT=function(n,i){return e.create(n,i)},jT}var PT,U9;function FPe(){if(U9)return PT;U9=1;var t=APe();return PT=t,PT}var IT,H9;function qPe(){return H9||(H9=1,IT=FPe()),IT}var LPe=qPe(),cc=ze(LPe),W9={},RT,K9;function BPe(){if(K9)return RT;K9=1;var t=Sh(),e=Wi(),r=Uo(),n=RangeError;return RT=function(s){var o=e(r(this)),a="",l=t(s);if(l<0||l===1/0)throw new n("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(o+=o))l&1&&(a+=o);return a},RT}var MT,G9;function zPe(){if(G9)return MT;G9=1;var t=at(),e=ooe(),r=Wi(),n=BPe(),i=Uo(),s=t(n),o=t("".slice),a=Math.ceil,l=function(c){return function(d,h,f){var p=r(i(d)),m=e(h),g=p.length,b=f===void 0?" ":r(f),y,v;return m<=g||b===""?p:(y=m-g,v=s(b,a(y/b.length)),v.length>y&&(v=o(v,0,y)),c?p+v:v+p)}};return MT={start:l(!1),end:l(!0)},MT}var $T,Y9;function VPe(){if(Y9)return $T;Y9=1;var t=at(),e=nt(),r=zPe().start,n=RangeError,i=isFinite,s=Math.abs,o=Date.prototype,a=o.toISOString,l=t(o.getTime),c=t(o.getUTCDate),d=t(o.getUTCFullYear),h=t(o.getUTCHours),f=t(o.getUTCMilliseconds),p=t(o.getUTCMinutes),m=t(o.getUTCMonth),g=t(o.getUTCSeconds);return $T=e(function(){return a.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){a.call(new Date(NaN))})?function(){if(!i(l(this)))throw new n("Invalid time value");var y=this,v=d(y),w=f(y),x=v<0?"-":v>9999?"+":"";return x+r(s(v),x?6:4,0)+"-"+r(m(y)+1,2,0)+"-"+r(c(y),2,0)+"T"+r(h(y),2,0)+":"+r(p(y),2,0)+":"+r(g(y),2,0)+"."+r(w,3,0)+"Z"}:a,$T}var Q9;function UPe(){if(Q9)return W9;Q9=1;var t=Pe(),e=ni(),r=wi(),n=roe(),i=VPe(),s=Us(),o=nt(),a=o(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return t({target:"Date",proto:!0,forced:a},{toJSON:function(c){var d=r(this),h=n(d,"number");return typeof h=="number"&&!isFinite(h)?null:!("toISOString"in d)&&s(d)==="Date"?e(i,d):d.toISOString()}}),W9}var DT,X9;function HPe(){if(X9)return DT;X9=1,UPe(),voe();var t=Tt(),e=nb();return t.JSON||(t.JSON={stringify:JSON.stringify}),DT=function(n,i,s){return e(t.JSON.stringify,null,arguments)},DT}var AT,J9;function WPe(){if(J9)return AT;J9=1;var t=HPe();return AT=t,AT}var FT,Z9;function KPe(){return Z9||(Z9=1,FT=WPe()),FT}var GPe=KPe(),Im=ze(GPe),eK={},tK={},qT,rK;function Ooe(){if(rK)return qT;rK=1;var t=Ht(),e=gh(),r=Us(),n=function(i){return e.slice(0,i.length)===i};return qT=function(){return n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":t.Bun&&typeof Bun.version=="string"?"BUN":t.Deno&&typeof Deno.version=="object"?"DENO":r(t.process)==="process"?"NODE":t.window&&t.document?"BROWSER":"REST"}(),qT}var LT,nK;function YPe(){if(nK)return LT;nK=1;var t=TypeError;return LT=function(e,r){if(e<r)throw new t("Not enough arguments");return e},LT}var BT,iK;function joe(){if(iK)return BT;iK=1;var t=Ht(),e=nb(),r=Yr(),n=Ooe(),i=gh(),s=_h(),o=YPe(),a=t.Function,l=/MSIE .\./.test(i)||n==="BUN"&&function(){var c=t.Bun.version.split(".");return c.length<3||c[0]==="0"&&(c[1]<3||c[1]==="3"&&c[2]==="0")}();return BT=function(c,d){var h=d?2:1;return l?function(f,p){var m=o(arguments.length,1)>h,g=r(f)?f:a(f),b=m?s(arguments,h):[],y=m?function(){e(g,this,b)}:g;return d?c(y,p):c(y)}:c},BT}var sK;function QPe(){if(sK)return tK;sK=1;var t=Pe(),e=Ht(),r=joe(),n=r(e.setInterval,!0);return t({global:!0,bind:!0,forced:e.setInterval!==n},{setInterval:n}),tK}var oK={},aK;function XPe(){if(aK)return oK;aK=1;var t=Pe(),e=Ht(),r=joe(),n=r(e.setTimeout,!0);return t({global:!0,bind:!0,forced:e.setTimeout!==n},{setTimeout:n}),oK}var lK;function Poe(){return lK||(lK=1,QPe(),XPe()),eK}var zT,cK;function JPe(){if(cK)return zT;cK=1,Poe();var t=Tt();return zT=t.setTimeout,zT}var VT,uK;function ZPe(){return uK||(uK=1,VT=JPe()),VT}var eIe=ZPe(),Eo=ze(eIe),dK={},UT,hK;function tIe(){if(hK)return UT;hK=1;var t=wi(),e=cb(),r=Wo();return UT=function(i){for(var s=t(this),o=r(s),a=arguments.length,l=e(a>1?arguments[1]:void 0,o),c=a>2?arguments[2]:void 0,d=c===void 0?o:e(c,o);d>l;)s[l++]=i;return s},UT}var fK;function rIe(){if(fK)return dK;fK=1;var t=Pe(),e=tIe(),r=R$();return t({target:"Array",proto:!0},{fill:e}),r("fill"),dK}var HT,pK;function nIe(){if(pK)return HT;pK=1,rIe();var t=ln();return HT=t("Array","fill"),HT}var WT,mK;function iIe(){if(mK)return WT;mK=1;var t=Tr(),e=nIe(),r=Array.prototype;return WT=function(n){var i=n.fill;return n===r||t(r,n)&&i===r.fill?e:i},WT}var KT,gK;function sIe(){if(gK)return KT;gK=1;var t=iIe();return KT=t,KT}var GT,yK;function oIe(){return yK||(yK=1,GT=sIe()),GT}var aIe=oIe(),Rm=ze(aIe);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function ps(){return ps=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ps.apply(this,arguments)}function Ki(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Mg(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var jI;typeof Object.assign!="function"?jI=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])}return r}:jI=Object.assign;var Mc=jI,vK=["","webkit","Moz","MS","ms","o"],lIe=typeof document>"u"?{style:{}}:document.createElement("div"),cIe="function",Uu=Math.round,$c=Math.abs,A$=Date.now;function gb(t,e){for(var r,n,i=e[0].toUpperCase()+e.slice(1),s=0;s<vK.length;){if(r=vK[s],n=r?r+i:e,n in t)return n;s++}}var No;typeof window>"u"?No={}:No=window;var Ioe=gb(lIe.style,"touchAction"),Roe=Ioe!==void 0;function uIe(){if(!Roe)return!1;var t={},e=No.CSS&&No.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){return t[r]=e?No.CSS.supports("touch-action",r):!0}),t}var Moe="compute",$oe="auto",PI="manipulation",uc="none",Op="pan-x",jp="pan-y",$g=uIe(),dIe=/mobile|tablet|ip(ad|hone|od)|android/i,Doe="ontouchstart"in No,hIe=gb(No,"PointerEvent")!==void 0,fIe=Doe&&dIe.test(navigator.userAgent),Mm="touch",pIe="pen",F$="mouse",mIe="kinect",gIe=25,Rn=1,su=2,_r=4,ei=8,Hv=1,$m=2,Dm=4,Am=8,Hd=16,qs=$m|Dm,dc=Am|Hd,Aoe=qs|dc,Foe=["x","y"],Wv=["clientX","clientY"];function Co(t,e,r){var n;if(t)if(t.forEach)t.forEach(e,r);else if(t.length!==void 0)for(n=0;n<t.length;)e.call(r,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t)}function yb(t,e){return typeof t===cIe?t.apply(e&&e[0]||void 0,e):t}function Ll(t,e){return t.indexOf(e)>-1}function yIe(t){if(Ll(t,uc))return uc;var e=Ll(t,Op),r=Ll(t,jp);return e&&r?uc:e||r?e?Op:jp:Ll(t,PI)?PI:$oe}var qoe=function(){function t(r,n){this.manager=r,this.set(n)}var e=t.prototype;return e.set=function(n){n===Moe&&(n=this.compute()),Roe&&this.manager.element.style&&$g[n]&&(this.manager.element.style[Ioe]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return Co(this.manager.recognizers,function(i){yb(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),yIe(n.join(" "))},e.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=Ll(o,uc)&&!$g[uc],l=Ll(o,jp)&&!$g[jp],c=Ll(o,Op)&&!$g[Op];if(a){var d=n.pointers.length===1,h=n.distance<2,f=n.deltaTime<250;if(d&&h&&f)return}if(!(c&&l)&&(a||l&&s&qs||c&&s&dc))return this.preventSrc(i)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},t}();function q$(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function Loe(t){var e=t.length;if(e===1)return{x:Uu(t[0].clientX),y:Uu(t[0].clientY)};for(var r=0,n=0,i=0;i<e;)r+=t[i].clientX,n+=t[i].clientY,i++;return{x:Uu(r/e),y:Uu(n/e)}}function bK(t){for(var e=[],r=0;r<t.pointers.length;)e[r]={clientX:Uu(t.pointers[r].clientX),clientY:Uu(t.pointers[r].clientY)},r++;return{timeStamp:A$(),pointers:e,center:Loe(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Kv(t,e,r){r||(r=Foe);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.sqrt(n*n+i*i)}function II(t,e,r){r||(r=Foe);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.atan2(i,n)*180/Math.PI}function Boe(t,e){return t===e?Hv:$c(t)>=$c(e)?t<0?$m:Dm:e<0?Am:Hd}function vIe(t,e){var r=e.center,n=t.offsetDelta||{},i=t.prevDelta||{},s=t.prevInput||{};(e.eventType===Rn||s.eventType===_r)&&(i=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:r.x,y:r.y}),e.deltaX=i.x+(r.x-n.x),e.deltaY=i.y+(r.y-n.y)}function zoe(t,e,r){return{x:e/t||0,y:r/t||0}}function bIe(t,e){return Kv(e[0],e[1],Wv)/Kv(t[0],t[1],Wv)}function xIe(t,e){return II(e[1],e[0],Wv)+II(t[1],t[0],Wv)}function wIe(t,e){var r=t.lastInterval||e,n=e.timeStamp-r.timeStamp,i,s,o,a;if(e.eventType!==ei&&(n>gIe||r.velocity===void 0)){var l=e.deltaX-r.deltaX,c=e.deltaY-r.deltaY,d=zoe(n,l,c);s=d.x,o=d.y,i=$c(d.x)>$c(d.y)?d.x:d.y,a=Boe(l,c),t.lastInterval=e}else i=r.velocity,s=r.velocityX,o=r.velocityY,a=r.direction;e.velocity=i,e.velocityX=s,e.velocityY=o,e.direction=a}function SIe(t,e){var r=t.session,n=e.pointers,i=n.length;r.firstInput||(r.firstInput=bK(e)),i>1&&!r.firstMultiple?r.firstMultiple=bK(e):i===1&&(r.firstMultiple=!1);var s=r.firstInput,o=r.firstMultiple,a=o?o.center:s.center,l=e.center=Loe(n);e.timeStamp=A$(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=II(a,l),e.distance=Kv(a,l),vIe(r,e),e.offsetDirection=Boe(e.deltaX,e.deltaY);var c=zoe(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=$c(c.x)>$c(c.y)?c.x:c.y,e.scale=o?bIe(o.pointers,n):1,e.rotation=o?xIe(o.pointers,n):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,wIe(r,e);var d=t.element,h=e.srcEvent,f;h.composedPath?f=h.composedPath()[0]:h.path?f=h.path[0]:f=h.target,q$(f,d)&&(d=f),e.target=d}function _Ie(t,e,r){var n=r.pointers.length,i=r.changedPointers.length,s=e&Rn&&n-i===0,o=e&(_r|ei)&&n-i===0;r.isFirst=!!s,r.isFinal=!!o,s&&(t.session={}),r.eventType=e,SIe(t,r),t.emit("hammer.input",r),t.recognize(r),t.session.prevInput=r}function Pp(t){return t.trim().split(/\s+/g)}function qf(t,e,r){Co(Pp(e),function(n){t.addEventListener(n,r,!1)})}function Lf(t,e,r){Co(Pp(e),function(n){t.removeEventListener(n,r,!1)})}function xK(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var Oh=function(){function t(r,n){var i=this;this.manager=r,this.callback=n,this.element=r.element,this.target=r.options.inputTarget,this.domHandler=function(s){yb(r.options.enable,[r])&&i.handler(s)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&qf(this.element,this.evEl,this.domHandler),this.evTarget&&qf(this.target,this.evTarget,this.domHandler),this.evWin&&qf(xK(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Lf(this.element,this.evEl,this.domHandler),this.evTarget&&Lf(this.target,this.evTarget,this.domHandler),this.evWin&&Lf(xK(this.element),this.evWin,this.domHandler)},t}();function Dc(t,e,r){if(t.indexOf&&!r)return t.indexOf(e);for(var n=0;n<t.length;){if(r&&t[n][r]==e||!r&&t[n]===e)return n;n++}return-1}var EIe={pointerdown:Rn,pointermove:su,pointerup:_r,pointercancel:ei,pointerout:ei},NIe={2:Mm,3:pIe,4:F$,5:mIe},Voe="pointerdown",Uoe="pointermove pointerup pointercancel";No.MSPointerEvent&&!No.PointerEvent&&(Voe="MSPointerDown",Uoe="MSPointerMove MSPointerUp MSPointerCancel");var Hoe=function(t){Ki(e,t);function e(){var n,i=e.prototype;return i.evEl=Voe,i.evWin=Uoe,n=t.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var r=e.prototype;return r.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=EIe[a],c=NIe[i.pointerType]||i.pointerType,d=c===Mm,h=Dc(s,i.pointerId,"pointerId");l&Rn&&(i.button===0||d)?h<0&&(s.push(i),h=s.length-1):l&(_r|ei)&&(o=!0),!(h<0)&&(s[h]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:c,srcEvent:i}),o&&s.splice(h,1))},e}(Oh);function Ip(t){return Array.prototype.slice.call(t,0)}function L$(t,e,r){for(var n=[],i=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];Dc(i,o)<0&&n.push(t[s]),i[s]=o,s++}return r&&(e?n=n.sort(function(a,l){return a[e]>l[e]}):n=n.sort()),n}var CIe={touchstart:Rn,touchmove:su,touchend:_r,touchcancel:ei},kIe="touchstart touchmove touchend touchcancel",B$=function(t){Ki(e,t);function e(){var n;return e.prototype.evTarget=kIe,n=t.apply(this,arguments)||this,n.targetIds={},n}var r=e.prototype;return r.handler=function(i){var s=CIe[i.type],o=TIe.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Mm,srcEvent:i})},e}(Oh);function TIe(t,e){var r=Ip(t.touches),n=this.targetIds;if(e&(Rn|su)&&r.length===1)return n[r[0].identifier]=!0,[r,r];var i,s,o=Ip(t.changedTouches),a=[],l=this.target;if(s=r.filter(function(c){return q$(c.target,l)}),e===Rn)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),e&(_r|ei)&&delete n[o[i].identifier],i++;if(a.length)return[L$(s.concat(a),"identifier",!0),a]}var OIe={mousedown:Rn,mousemove:su,mouseup:_r},jIe="mousedown",PIe="mousemove mouseup",z$=function(t){Ki(e,t);function e(){var n,i=e.prototype;return i.evEl=jIe,i.evWin=PIe,n=t.apply(this,arguments)||this,n.pressed=!1,n}var r=e.prototype;return r.handler=function(i){var s=OIe[i.type];s&Rn&&i.button===0&&(this.pressed=!0),s&su&&i.which!==1&&(s=_r),this.pressed&&(s&_r&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:F$,srcEvent:i}))},e}(Oh),IIe=2500,wK=25;function SK(t){var e=t.changedPointers,r=e[0];if(r.identifier===this.primaryTouch){var n={x:r.clientX,y:r.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,IIe)}}function RIe(t,e){t&Rn?(this.primaryTouch=e.changedPointers[0].identifier,SK.call(this,e)):t&(_r|ei)&&SK.call(this,e)}function MIe(t){for(var e=t.srcEvent.clientX,r=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(e-i.x),o=Math.abs(r-i.y);if(s<=wK&&o<=wK)return!0}return!1}var Woe=function(){var t=function(e){Ki(r,e);function r(i,s){var o;return o=e.call(this,i,s)||this,o.handler=function(a,l,c){var d=c.pointerType===Mm,h=c.pointerType===F$;if(!(h&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)RIe.call(Mg(Mg(o)),l,c);else if(h&&MIe.call(Mg(Mg(o)),c))return;o.callback(a,l,c)}},o.touch=new B$(o.manager,o.handler),o.mouse=new z$(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=r.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},r}(Oh);return t}();function $Ie(t){var e,r=t.options.inputClass;return r?e=r:hIe?e=Hoe:fIe?e=B$:Doe?e=Woe:e=z$,new e(t,_Ie)}function Hu(t,e,r){return Array.isArray(t)?(Co(t,r[e],r),!0):!1}var ay=1,qi=2,Wd=4,Ya=8,ko=Ya,Rp=16,Is=32,DIe=1;function AIe(){return DIe++}function Dg(t,e){var r=e.manager;return r?r.get(t):t}function _K(t){return t&Rp?"cancel":t&Ya?"end":t&Wd?"move":t&qi?"start":""}var Fm=function(){function t(r){r===void 0&&(r={}),this.options=ps({enable:!0},r),this.id=AIe(),this.manager=null,this.state=ay,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(n){return Mc(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(Hu(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=Dg(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return Hu(n,"dropRecognizeWith",this)?this:(n=Dg(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(Hu(n,"requireFailure",this))return this;var i=this.requireFail;return n=Dg(n,this),Dc(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(Hu(n,"dropRequireFailure",this))return this;n=Dg(n,this);var i=Dc(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<Ya&&o(i.options.event+_K(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=Ya&&o(i.options.event+_K(s))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=Is},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(Is|ay)))return!1;n++}return!0},e.recognize=function(n){var i=Mc({},n);if(!yb(this.options.enable,[this,i])){this.reset(),this.state=Is;return}this.state&(ko|Rp|Is)&&(this.state=ay),this.state=this.process(i),this.state&(qi|Wd|Ya|Rp)&&this.tryEmit(i)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},t}(),RI=function(t){Ki(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,ps({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var r=e.prototype;return r.getTouchAction=function(){return[PI]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime<o.time;if(this.reset(),i.eventType&Rn&&this.count===0)return this.failTimeout();if(l&&c&&a){if(i.eventType!==_r)return this.failTimeout();var d=this.pTime?i.timeStamp-this.pTime<o.interval:!0,h=!this.pCenter||Kv(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!h||!d?this.count=1:this.count+=1,this._input=i;var f=this.count%o.taps;if(f===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=ko,s.tryEmit()},o.interval),qi):ko}return Is},r.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=Is},this.options.interval),Is},r.reset=function(){clearTimeout(this._timer)},r.emit=function(){this.state===ko&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(Fm),Kd=function(t){Ki(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ps({pointers:1},n))||this}var r=e.prototype;return r.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},r.process=function(i){var s=this.state,o=i.eventType,a=s&(qi|Wd),l=this.attrTest(i);return a&&(o&ei||!l)?s|Rp:a||l?o&_r?s|Ya:s&qi?s|Wd:qi:Is},e}(Fm);function Koe(t){return t===Hd?"down":t===Am?"up":t===$m?"left":t===Dm?"right":""}var V$=function(t){Ki(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,ps({event:"pan",threshold:10,pointers:1,direction:Aoe},n))||this,i.pX=null,i.pY=null,i}var r=e.prototype;return r.getTouchAction=function(){var i=this.options.direction,s=[];return i&qs&&s.push(jp),i&dc&&s.push(Op),s},r.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,c=i.deltaX,d=i.deltaY;return l&s.direction||(s.direction&qs?(l=c===0?Hv:c<0?$m:Dm,o=c!==this.pX,a=Math.abs(i.deltaX)):(l=d===0?Hv:d<0?Am:Hd,o=d!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},r.attrTest=function(i){return Kd.prototype.attrTest.call(this,i)&&(this.state&qi||!(this.state&qi)&&this.directionTest(i))},r.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=Koe(i.direction);s&&(i.additionalEvent=this.options.event+s),t.prototype.emit.call(this,i)},e}(Kd),Goe=function(t){Ki(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ps({event:"swipe",threshold:10,velocity:.3,direction:qs|dc,pointers:1},n))||this}var r=e.prototype;return r.getTouchAction=function(){return V$.prototype.getTouchAction.call(this)},r.attrTest=function(i){var s=this.options.direction,o;return s&(qs|dc)?o=i.overallVelocity:s&qs?o=i.overallVelocityX:s&dc&&(o=i.overallVelocityY),t.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&$c(o)>this.options.velocity&&i.eventType&_r},r.emit=function(i){var s=Koe(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},e}(Kd),Yoe=function(t){Ki(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ps({event:"pinch",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[uc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&qi)},r.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}t.prototype.emit.call(this,i)},e}(Kd),Qoe=function(t){Ki(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ps({event:"rotate",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[uc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&qi)},e}(Kd),Xoe=function(t){Ki(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,ps({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var r=e.prototype;return r.getTouchAction=function(){return[$oe]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(_r|ei)&&!c)this.reset();else if(i.eventType&Rn)this.reset(),this._timer=setTimeout(function(){s.state=ko,s.tryEmit()},o.time);else if(i.eventType&_r)return ko;return Is},r.reset=function(){clearTimeout(this._timer)},r.emit=function(i){this.state===ko&&(i&&i.eventType&_r?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=A$(),this.manager.emit(this.options.event,this._input)))},e}(Fm),Joe={domEvents:!1,touchAction:Moe,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},EK=[[Qoe,{enable:!1}],[Yoe,{enable:!1},["rotate"]],[Goe,{direction:qs}],[V$,{direction:qs},["swipe"]],[RI],[RI,{event:"doubletap",taps:2},["tap"]],[Xoe]],FIe=1,NK=2;function CK(t,e){var r=t.element;if(r.style){var n;Co(t.options.cssProps,function(i,s){n=gb(r.style,s),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function qIe(t,e){var r=document.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}var kK=function(){function t(r,n){var i=this;this.options=Mc({},Joe,n||{}),this.options.inputTarget=this.options.inputTarget||r,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=r,this.input=$Ie(this),this.touchAction=new qoe(this,this.options.touchAction),CK(this,!0),Co(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var e=t.prototype;return e.set=function(n){return Mc(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?NK:FIe},e.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&ko)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==NK&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(qi|Wd|Ya)&&(i.curRecognizer=s,a=s),l++}},e.get=function(n){if(n instanceof Fm)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},e.add=function(n){if(Hu(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(Hu(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=Dc(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},e.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return Co(Pp(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},e.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return Co(Pp(n),function(o){i?s[o]&&s[o].splice(Dc(s[o],i),1):delete s[o]}),this},e.emit=function(n,i){this.options.domEvents&&qIe(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},e.destroy=function(){this.element&&CK(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),LIe={touchstart:Rn,touchmove:su,touchend:_r,touchcancel:ei},BIe="touchstart",zIe="touchstart touchmove touchend touchcancel",VIe=function(t){Ki(e,t);function e(){var n,i=e.prototype;return i.evTarget=BIe,i.evWin=zIe,n=t.apply(this,arguments)||this,n.started=!1,n}var r=e.prototype;return r.handler=function(i){var s=LIe[i.type];if(s===Rn&&(this.started=!0),!!this.started){var o=UIe.call(this,i,s);s&(_r|ei)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Mm,srcEvent:i})}},e}(Oh);function UIe(t,e){var r=Ip(t.touches),n=Ip(t.changedTouches);return e&(_r|ei)&&(r=L$(r.concat(n),"identifier",!0)),[r,n]}function Zoe(t,e,r){var n="DEPRECATED METHOD: "+e+`
`+r+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),t.apply(this,arguments)}}var eae=Zoe(function(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;)(!r||r&&t[n[i]]===void 0)&&(t[n[i]]=e[n[i]]),i++;return t},"extend","Use `assign`."),HIe=Zoe(function(t,e){return eae(t,e,!0)},"merge","Use `assign`.");function WIe(t,e,r){var n=e.prototype,i;i=t.prototype=Object.create(n),i.constructor=t,i._super=n,r&&Mc(i,r)}function TK(t,e){return function(){return t.apply(e,arguments)}}var tae=function(){var t=function(r,n){return n===void 0&&(n={}),new kK(r,ps({recognizers:EK.concat()},n))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=Aoe,t.DIRECTION_DOWN=Hd,t.DIRECTION_LEFT=$m,t.DIRECTION_RIGHT=Dm,t.DIRECTION_UP=Am,t.DIRECTION_HORIZONTAL=qs,t.DIRECTION_VERTICAL=dc,t.DIRECTION_NONE=Hv,t.DIRECTION_DOWN=Hd,t.INPUT_START=Rn,t.INPUT_MOVE=su,t.INPUT_END=_r,t.INPUT_CANCEL=ei,t.STATE_POSSIBLE=ay,t.STATE_BEGAN=qi,t.STATE_CHANGED=Wd,t.STATE_ENDED=Ya,t.STATE_RECOGNIZED=ko,t.STATE_CANCELLED=Rp,t.STATE_FAILED=Is,t.Manager=kK,t.Input=Oh,t.TouchAction=qoe,t.TouchInput=B$,t.MouseInput=z$,t.PointerEventInput=Hoe,t.TouchMouseInput=Woe,t.SingleTouchInput=VIe,t.Recognizer=Fm,t.AttrRecognizer=Kd,t.Tap=RI,t.Pan=V$,t.Swipe=Goe,t.Pinch=Yoe,t.Rotate=Qoe,t.Press=Xoe,t.on=qf,t.off=Lf,t.each=Co,t.merge=HIe,t.extend=eae,t.bindFn=TK,t.assign=Mc,t.inherit=WIe,t.bindFn=TK,t.prefixed=gb,t.toArray=Ip,t.inArray=Dc,t.uniqueArray=L$,t.splitStr=Pp,t.boolOrFn=yb,t.hasParent=q$,t.addEventListeners=qf,t.removeEventListeners=Lf,t.defaults=Mc({},Joe,{preset:EK}),t}();tae.defaults;GOe("DELETE");function vb(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return KIe(e.length?e:[Uv()])}function KIe(t){let[e,r,n]=GIe(t),i=1;const s=()=>{const o=2091639*e+i*23283064365386963e-26;return e=r,r=n,n=o-(i=o|0)};return s.uint32=()=>s()*4294967296,s.fract53=()=>s()+(s()*2097152|0)*11102230246251565e-32,s.algorithm="Alea",s.seed=t,s.version="0.9",s}function GIe(){const t=YIe();let e=t(" "),r=t(" "),n=t(" ");for(let i=0;i<arguments.length;i++)e-=t(i<0||arguments.length<=i?void 0:arguments[i]),e<0&&(e+=1),r-=t(i<0||arguments.length<=i?void 0:arguments[i]),r<0&&(r+=1),n-=t(i<0||arguments.length<=i?void 0:arguments[i]),n<0&&(n+=1);return[e,r,n]}function YIe(){let t=4022871197;return function(e){const r=e.toString();for(let n=0;n<r.length;n++){t+=r.charCodeAt(n);let i=.02519603282416938*t;t=i>>>0,i-=t,i*=t,t=i>>>0,i-=t,t+=i*4294967296}return(t>>>0)*23283064365386963e-26}}function QIe(){const t=()=>{};return{on:t,off:t,destroy:t,emit:t,get(){return{set:t}}}}const U$=typeof window<"u"?window.Hammer||tae:function(){return QIe()};function Rs(t){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const r=U$(this._dom.overlay);r.on("tap",ne(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{r.destroy()});const n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];jt(n).call(n,i=>{r.on(i,s=>{s.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=i=>{XIe(i.target,t)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=i=>{("key"in i?i.key==="Escape":i.keyCode===27)&&this.deactivate()}}doe(Rs.prototype);Rs.current=null;Rs.prototype.destroy=function(){this.deactivate();for(const r of lc(t=_o(e=this._cleanupQueue).call(e,0)).call(t)){var t,e;r()}};Rs.prototype.activate=function(){Rs.current&&Rs.current.deactivate(),Rs.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};Rs.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};Rs.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};function XIe(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}const JIe=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,ZIe=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,eRe=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,tRe=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function aa(t){if(t)for(;t.hasChildNodes()===!0;){const e=t.firstChild;e&&(aa(e),t.removeChild(e))}}function td(t){return t instanceof String||typeof t=="string"}function OK(t){return typeof t=="object"&&t!==null}function Ac(t,e,r,n){let i=!1;n===!0&&(i=e[r]===null&&t[r]!==void 0),i?delete t[r]:t[r]=e[r]}function rae(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;for(const n in t)if(e[n]!==void 0)if(e[n]===null||typeof e[n]!="object")Ac(t,e,n,r);else{const i=t[n],s=e[n];OK(i)&&OK(s)&&rae(i,s,r)}}function jh(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(dr(r))throw new TypeError("Arrays are not supported by deepExtend");for(let i=0;i<t.length;i++){const s=t[i];if(Object.prototype.hasOwnProperty.call(r,s))if(r[s]&&r[s].constructor===Object)e[s]===void 0&&(e[s]={}),e[s].constructor===Object?$t(e[s],r[s],!1,n):Ac(e,r,s,n);else{if(dr(r[s]))throw new TypeError("Arrays are not supported by deepExtend");Ac(e,r,s,n)}}return e}function Gv(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(dr(r))throw new TypeError("Arrays are not supported by deepExtend");for(const i in r)if(Object.prototype.hasOwnProperty.call(r,i)&&!Ga(t).call(t,i))if(r[i]&&r[i].constructor===Object)e[i]===void 0&&(e[i]={}),e[i].constructor===Object?$t(e[i],r[i]):Ac(e,r,i,n);else if(dr(r[i])){e[i]=[];for(let s=0;s<r[i].length;s++)e[i].push(r[i][s])}else Ac(e,r,i,n);return e}function $t(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)||r===!0)if(typeof e[s]=="object"&&e[s]!==null&&u9(e[s])===Object.prototype)t[s]===void 0?t[s]=$t({},e[s],r):typeof t[s]=="object"&&t[s]!==null&&u9(t[s])===Object.prototype?$t(t[s],e[s],r):Ac(t,e,s,n);else if(dr(e[s])){var i;t[s]=js(i=e[s]).call(i)}else Ac(t,e,s,n);return t}function Yv(t,e){return[...t,e]}function rRe(t){return js(t).call(t)}function nRe(t){return t.getBoundingClientRect().left}function iRe(t){return t.getBoundingClientRect().top}function Ze(t,e){if(dr(t)){const r=t.length;for(let n=0;n<r;n++)e(t[n],n,t)}else for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(t[r],r,t)}function H$(t){let e;switch(t.length){case 3:case 4:return e=ZIe.exec(t),e?{r:is(e[1]+e[1],16),g:is(e[2]+e[2],16),b:is(e[3]+e[3],16)}:null;case 6:case 7:return e=JIe.exec(t),e?{r:is(e[1],16),g:is(e[2],16),b:is(e[3],16)}:null;default:return null}}function Ri(t,e){if(Ga(t).call(t,"rgba"))return t;if(Ga(t).call(t,"rgb")){const r=t.substr(Nt(t).call(t,"(")+1).replace(")","").split(",");return"rgba("+r[0]+","+r[1]+","+r[2]+","+e+")"}else{const r=H$(t);return r==null?t:"rgba("+r.r+","+r.g+","+r.b+","+e+")"}}function nae(t,e,r){var n;return"#"+js(n=((1<<24)+(t<<16)+(e<<8)+r).toString(16)).call(n,1)}function MI(t,e){if(td(t)){let n=t;if(sae(n)){var r;const i=Ud(r=n.substr(4).substr(0,n.length-5).split(",")).call(r,function(s){return is(s)});n=nae(i[0],i[1],i[2])}if(iae(n)===!0){const i=sRe(n),s={h:i.h,s:i.s*.8,v:Math.min(1,i.v*1.02)},o={h:i.h,s:Math.min(1,i.s*1.25),v:i.v*.8},a=$I(o.h,o.s,o.v),l=$I(s.h,s.s,s.v);return{background:n,border:a,highlight:{background:l,border:a},hover:{background:l,border:a}}}else return{background:n,border:n,highlight:{background:n,border:n},hover:{background:n,border:n}}}else return{background:t.background||void 0,border:t.border||void 0,highlight:td(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||void 0,border:t.highlight&&t.highlight.border||void 0},hover:td(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||void 0,background:t.hover&&t.hover.background||void 0}}}function ff(t,e,r){t=t/255,e=e/255,r=r/255;const n=Math.min(t,Math.min(e,r)),i=Math.max(t,Math.max(e,r));if(n===i)return{h:0,s:0,v:n};const s=t===n?e-r:r===n?t-e:r-t,a=60*((t===n?3:r===n?1:5)-s/(i-n))/360,l=(i-n)/i;return{h:a,s:l,v:i}}function ly(t,e,r){let n,i,s;const o=Math.floor(t*6),a=t*6-o,l=r*(1-e),c=r*(1-a*e),d=r*(1-(1-a)*e);switch(o%6){case 0:n=r,i=d,s=l;break;case 1:n=c,i=r,s=l;break;case 2:n=l,i=r,s=d;break;case 3:n=l,i=c,s=r;break;case 4:n=d,i=l,s=r;break;case 5:n=r,i=l,s=c;break}return{r:Math.floor(n*255),g:Math.floor(i*255),b:Math.floor(s*255)}}function $I(t,e,r){const n=ly(t,e,r);return nae(n.r,n.g,n.b)}function sRe(t){const e=H$(t);if(!e)throw new TypeError("'".concat(t,"' is not a valid color."));return ff(e.r,e.g,e.b)}function iae(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)}function sae(t){return eRe.test(t)}function oRe(t){return tRe.test(t)}function Qa(t){if(t===null||typeof t!="object")return null;if(t instanceof Element)return t;const e=cc(t);for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&typeof t[r]=="object"&&(e[r]=Qa(t[r]));return e}function Oi(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=function(p){return p!=null},s=function(p){return p!==null&&typeof p=="object"},o=function(p){for(const m in p)if(Object.prototype.hasOwnProperty.call(p,m))return!1;return!0};if(!s(t))throw new Error("Parameter mergeTarget must be an object");if(!s(e))throw new Error("Parameter options must be an object");if(!i(r))throw new Error("Parameter option must have a value");if(!s(n))throw new Error("Parameter globalOptions must be an object");const a=function(p,m,g){s(p[g])||(p[g]={});const b=m[g],y=p[g];for(const v in b)Object.prototype.hasOwnProperty.call(b,v)&&(y[v]=b[v])},l=e[r],d=s(n)&&!o(n)?n[r]:void 0,h=d?d.enabled:void 0;if(l===void 0)return;if(typeof l=="boolean"){s(t[r])||(t[r]={}),t[r].enabled=l;return}if(l===null&&!s(t[r]))if(i(d))t[r]=cc(d);else return;if(!s(l))return;let f=!0;l.enabled!==void 0?f=l.enabled:h!==void 0&&(f=d.enabled),a(t,e,r),t[r].enabled=f}const aRe={linear(t){return t},easeInQuad(t){return t*t},easeOutQuad(t){return t*(2-t)},easeInOutQuad(t){return t<.5?2*t*t:-1+(4-2*t)*t},easeInCubic(t){return t*t*t},easeOutCubic(t){return--t*t*t+1},easeInOutCubic(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart(t){return t*t*t*t},easeOutQuart(t){return 1- --t*t*t*t},easeInOutQuart(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint(t){return t*t*t*t*t},easeOutQuint(t){return 1+--t*t*t*t*t},easeInOutQuint(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}};function la(t,e){let r;dr(e)||(e=[e]);for(const n of t)if(n){r=n[e[0]];for(let i=1;i<e.length;i++)r&&(r=r[e[i]]);if(typeof r<"u")break}return r}const lRe={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};let cRe=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}setCloseCallback(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}_isColorString(e){if(typeof e=="string")return lRe[e]}setColor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e==="none")return;let n;const i=this._isColorString(e);if(i!==void 0&&(e=i),td(e)===!0){if(sae(e)===!0){const s=e.substr(4).substr(0,e.length-5).split(",");n={r:s[0],g:s[1],b:s[2],a:1}}else if(oRe(e)===!0){const s=e.substr(5).substr(0,e.length-6).split(",");n={r:s[0],g:s[1],b:s[2],a:s[3]}}else if(iae(e)===!0){const s=H$(e);n={r:s.r,g:s.g,b:s.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){const s=e.a!==void 0?e.a:"1.0";n={r:e.r,g:e.g,b:e.b,a:s}}if(n===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+Im(e));this._setColor(n,r)}show(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0&&(this.previousColor=Sr({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",Eo(()=>{this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0)},0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)===!0&&(this.initialColor=Sr({},e)),this.color=e;const n=ff(e.r,e.g,e.b),i=2*Math.PI,s=this.r*n.s,o=this.centerCoordinates.x+s*Math.sin(i*n.h),a=this.centerCoordinates.y+s*Math.cos(i*n.h);this.colorPickerSelector.style.left=o-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=a-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}_setOpacity(e){this.color.a=e/100,this._updatePicker(this.color)}_setBrightness(e){const r=ff(this.color.r,this.color.g,this.color.b);r.v=e/100;const n=ly(r.h,r.s,r.v);n.a=this.color.a,this.color=n,this._updatePicker()}_updatePicker(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color;const r=ff(e.r,e.g,e.b),n=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const i=this.colorPickerCanvas.clientWidth,s=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,i,s),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-r.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),Rm(n).call(n),this.brightnessRange.value=100*r.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){var e,r,n,i;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){const o=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{const o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);const s=this;this.opacityRange.onchange=function(){s._setOpacity(this.value)},this.opacityRange.oninput=function(){s._setOpacity(this.value)},this.brightnessRange.onchange=function(){s._setBrightness(this.value)},this.brightnessRange.oninput=function(){s._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=ne(e=this._hide).call(e,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=ne(r=this._apply).call(r,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=ne(n=this._save).call(n,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=ne(i=this._loadLast).call(i,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new U$(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",e=>{e.isFirst&&this._moveSelector(e)}),this.hammer.on("tap",e=>{this._moveSelector(e)}),this.hammer.on("panstart",e=>{this._moveSelector(e)}),this.hammer.on("panmove",e=>{this._moveSelector(e)}),this.hammer.on("panend",e=>{this._moveSelector(e)})}_generateHueCircle(){if(this.generated===!1){const e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const r=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,r,n);let i,s,o,a;this.centerCoordinates={x:r*.5,y:n*.5},this.r=.49*r;const l=2*Math.PI/360,c=1/360,d=1/this.r;let h;for(o=0;o<360;o++)for(a=0;a<this.r;a++)i=this.centerCoordinates.x+a*Math.sin(l*o),s=this.centerCoordinates.y+a*Math.cos(l*o),h=ly(o*c,a*d,1),e.fillStyle="rgb("+h.r+","+h.g+","+h.b+")",e.fillRect(i-.5,s-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,r,n)}this.generated=!0}_moveSelector(e){const r=this.colorPickerDiv.getBoundingClientRect(),n=e.center.x-r.left,i=e.center.y-r.top,s=.5*this.colorPickerDiv.clientHeight,o=.5*this.colorPickerDiv.clientWidth,a=n-o,l=i-s,c=Math.atan2(a,l),d=.98*Math.min(Math.sqrt(a*a+l*l),o),h=Math.cos(c)*d+s,f=Math.sin(c)*d+o;this.colorPickerSelector.style.top=h-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=f-.5*this.colorPickerSelector.clientWidth+"px";let p=c/(2*Math.PI);p=p<0?p+1:p;const m=d/this.r,g=ff(this.color.r,this.color.g,this.color.b);g.h=p,g.s=m;const b=ly(g.h,g.s,g.v);b.a=this.color.a,this.color=b,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}};function DI(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(e.length<1)throw new TypeError("Invalid arguments.");if(e.length===1)return document.createTextNode(e[0]);{const n=document.createElement(e[0]);return n.appendChild(DI(...js(e).call(e,1))),n}}let uRe=class{constructor(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:()=>!1;this.parent=e,this.changedOptions=[],this.container=r,this.allowCreation=!1,this.hideOption=s,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},Sr(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new cRe(i),this.wrapper=void 0}setOptions(e){if(e!==void 0){this.popupHistory={},this._removePopup();let r=!0;if(typeof e=="string")this.options.filter=e;else if(dr(e))this.options.filter=e.join();else if(typeof e=="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),Un(e)!==void 0&&(this.options.filter=Un(e)),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(r=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,r=e):typeof e=="function"&&(this.options.filter=e,r=!0);Un(this.options)===!1&&(r=!1),this.options.enabled=r}this._clean()}setModuleOptions(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];const e=Un(this.options);let r=0,n=!1;for(const i in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,i)&&(this.allowCreation=!1,n=!1,typeof e=="function"?(n=e(i,[]),n=n||this._handleObject(this.configureOptions[i],[i],!0)):(e===!0||Nt(e).call(e,i)!==-1)&&(n=!0),n!==!1&&(this.allowCreation=!0,r>0&&this._makeItem([]),this._makeHeader(i),this._handleObject(this.configureOptions[i],[i])),r++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(let e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}_clean(){for(let e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(e){let r=this.moduleOptions;for(let n=0;n<e.length;n++)if(r[e[n]]!==void 0)r=r[e[n]];else{r=void 0;break}return r}_makeItem(e){if(this.allowCreation===!0){const s=document.createElement("div");s.className="vis-configuration vis-config-item vis-config-s"+e.length;for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return jt(n).call(n,o=>{s.appendChild(o)}),this.domElements.push(s),this.domElements.length}return 0}_makeHeader(e){const r=document.createElement("div");r.className="vis-configuration vis-config-header",r.innerText=e,this._makeItem([],r)}_makeLabel(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=document.createElement("div");if(i.className="vis-configuration vis-config-label vis-config-s"+r.length,n===!0){for(;i.firstChild;)i.removeChild(i.firstChild);i.appendChild(DI("i","b",e))}else i.innerText=e+":";return i}_makeDropdown(e,r,n){const i=document.createElement("select");i.className="vis-configuration vis-config-select";let s=0;r!==void 0&&Nt(e).call(e,r)!==-1&&(s=Nt(e).call(e,r));for(let l=0;l<e.length;l++){const c=document.createElement("option");c.value=e[l],l===s&&(c.selected="selected"),c.innerText=e[l],i.appendChild(c)}const o=this;i.onchange=function(){o._update(this.value,n)};const a=this._makeLabel(n[n.length-1],n);this._makeItem(n,a,i)}_makeRange(e,r,n){const i=e[0],s=e[1],o=e[2],a=e[3],l=document.createElement("input");l.className="vis-configuration vis-config-range";try{l.type="range",l.min=s,l.max=o}catch{}l.step=a;let c="",d=0;r!==void 0?(r<0&&r*1.2<s?(l.min=Math.ceil(r*1.2),d=l.min,c="range increased"):r/1.2<s&&(l.min=Math.ceil(r/1.2),d=l.min,c="range increased"),r*1.2>o&&o!==1&&(l.max=Math.ceil(r*1.2),d=l.max,c="range increased"),l.value=r):l.value=i;const h=document.createElement("input");h.className="vis-configuration vis-config-rangeinput",h.value=l.value;const f=this;l.onchange=function(){h.value=this.value,f._update(Number(this.value),n)},l.oninput=function(){h.value=this.value};const p=this._makeLabel(n[n.length-1],n),m=this._makeItem(n,p,l,h);c!==""&&this.popupHistory[m]!==d&&(this.popupHistory[m]=d,this._setupPopup(c,m))}_makeButton(){if(this.options.showButton===!0){const e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerText="generate options",e.onclick=()=>{this._printOptions()},e.onmouseover=()=>{e.className="vis-configuration vis-config-button hover"},e.onmouseout=()=>{e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}_setupPopup(e,r){if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){const n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerText=e,n.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:r}}}_removePopup(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(this.popupDiv.html!==void 0){const r=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=r.left+"px",this.popupDiv.html.style.top=r.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=Eo(()=>{this.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=Eo(()=>{this._removePopup()},1800)}}_makeCheckbox(e,r,n){const i=document.createElement("input");i.type="checkbox",i.className="vis-configuration vis-config-checkbox",i.checked=e,r!==void 0&&(i.checked=r,r!==e&&(typeof e=="object"?r!==e.enabled&&this.changedOptions.push({path:n,value:r}):this.changedOptions.push({path:n,value:r})));const s=this;i.onchange=function(){s._update(this.checked,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}_makeTextInput(e,r,n){const i=document.createElement("input");i.type="text",i.className="vis-configuration vis-config-text",i.value=r,r!==e&&this.changedOptions.push({path:n,value:r});const s=this;i.onchange=function(){s._update(this.value,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}_makeColorField(e,r,n){const i=e[1],s=document.createElement("div");r=r===void 0?i:r,r!=="none"?(s.className="vis-configuration vis-config-colorBlock",s.style.backgroundColor=r):s.className="vis-configuration vis-config-colorBlock none",r=r===void 0?i:r,s.onclick=()=>{this._showColorPicker(r,s,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,s)}_showColorPicker(e,r,n){r.onclick=function(){},this.colorPicker.insertTo(r),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(i=>{const s="rgba("+i.r+","+i.g+","+i.b+","+i.a+")";r.style.backgroundColor=s,this._update(s,n)}),this.colorPicker.setCloseCallback(()=>{r.onclick=()=>{this._showColorPicker(e,r,n)}})}_handleObject(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=!1;const s=Un(this.options);let o=!1;for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)){i=!0;const l=e[a],c=Yv(r,a);if(typeof s=="function"&&(i=s(a,r),i===!1&&!dr(l)&&typeof l!="string"&&typeof l!="boolean"&&l instanceof Object&&(this.allowCreation=!1,i=this._handleObject(l,c,!0),this.allowCreation=n===!1)),i!==!1){o=!0;const d=this._getValue(c);if(dr(l))this._handleArray(l,d,c);else if(typeof l=="string")this._makeTextInput(l,d,c);else if(typeof l=="boolean")this._makeCheckbox(l,d,c);else if(l instanceof Object){if(!this.hideOption(r,a,this.moduleOptions))if(l.enabled!==void 0){const h=Yv(c,"enabled"),f=this._getValue(h);if(f===!0){const p=this._makeLabel(a,c,!0);this._makeItem(c,p),o=this._handleObject(l,c)||o}else this._makeCheckbox(l,f,c)}else{const h=this._makeLabel(a,c,!0);this._makeItem(c,h),o=this._handleObject(l,c)||o}}else console.error("dont know how to handle",l,a,c)}}return o}_handleArray(e,r,n){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,r,n),e[1]!==r&&this.changedOptions.push({path:n,value:r})):typeof e[0]=="string"?(this._makeDropdown(e,r,n),e[0]!==r&&this.changedOptions.push({path:n,value:r})):typeof e[0]=="number"&&(this._makeRange(e,r,n),e[0]!==r&&this.changedOptions.push({path:n,value:Number(r)}))}_update(e,r){const n=this._constructOptions(e,r);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",n),this.initialized=!0,this.parent.setOptions(n)}_constructOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n;e=e==="true"?!0:e,e=e==="false"?!1:e;for(let s=0;s<r.length;s++)r[s]!=="global"&&(i[r[s]]===void 0&&(i[r[s]]={}),s!==r.length-1?i=i[r[s]]:i[r[s]]=e);return n}_printOptions(){const e=this.getOptions();for(;this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(DI("pre","const options = "+Im(e,null,2)))}getOptions(){const e={};for(let r=0;r<this.changedOptions.length;r++)this._constructOptions(this.changedOptions[r].value,this.changedOptions[r].path,e);return e}},dRe=class{constructor(e,r){this.container=e,this.overflowMethod=r||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(e,r){this.x=is(e),this.y=is(r)}setText(e){if(e instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(e)}else this.frame.innerText=e}show(e){if(e===void 0&&(e=!0),e===!0){const r=this.frame.clientHeight,n=this.frame.clientWidth,i=this.frame.parentNode.clientHeight,s=this.frame.parentNode.clientWidth;let o=0,a=0;if(this.overflowMethod=="flip"){let l=!1,c=!0;this.y-r<this.padding&&(c=!1),this.x+n>s-this.padding&&(l=!0),l?o=this.x-n:o=this.x,c?a=this.y-r:a=this.y}else a=this.y-r,a+r+this.padding>i&&(a=i-r-this.padding),a<this.padding&&(a=this.padding),o=this.x,o+n+this.padding>s&&(o=s-n-this.padding),o<this.padding&&(o=this.padding);this.frame.style.left=o+"px",this.frame.style.top=a+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}},tf=!1,jK;const AI="background: #FFeeee; color: #dd0000";let hRe=class rr{static validate(e,r,n){tf=!1,jK=r;let i=r;return n!==void 0&&(i=r[n]),rr.parse(e,i,[]),tf}static parse(e,r,n){for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&rr.check(i,e,r,n)}static check(e,r,n,i){if(n[e]===void 0&&n.__any__===void 0){rr.getSuggestion(e,n,i);return}let s=e,o=!0;n[e]===void 0&&n.__any__!==void 0&&(s="__any__",o=rr.getType(r[e])==="object");let a=n[s];o&&a.__type__!==void 0&&(a=a.__type__),rr.checkFields(e,r,n,s,a,i)}static checkFields(e,r,n,i,s,o){const a=function(d){console.error("%c"+d+rr.printLocation(o,e),AI)},l=rr.getType(r[e]),c=s[l];c!==void 0?rr.getType(c)==="array"&&Nt(c).call(c,r[e])===-1?(a('Invalid option detected in "'+e+'". Allowed values are:'+rr.print(c)+' not "'+r[e]+'". '),tf=!0):l==="object"&&i!=="__any__"&&(o=Yv(o,e),rr.parse(r[e],n[i],o)):s.any===void 0&&(a('Invalid type received for "'+e+'". Expected: '+rr.print(ar(s))+". Received ["+l+'] "'+r[e]+'"'),tf=!0)}static getType(e){const r=typeof e;return r==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":dr(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":r==="number"?"number":r==="boolean"?"boolean":r==="string"?"string":r===void 0?"undefined":r}static getSuggestion(e,r,n){const i=rr.findInOptions(e,r,n,!1),s=rr.findInOptions(e,jK,[],!0),o=8,a=4;let l;i.indexMatch!==void 0?l=" in "+rr.printLocation(i.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+i.indexMatch+`"?

`:s.distance<=a&&i.distance>s.distance?l=" in "+rr.printLocation(i.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+rr.printLocation(s.path,s.closestMatch,""):i.distance<=o?l='. Did you mean "'+i.closestMatch+'"?'+rr.printLocation(i.path,e):l=". Did you mean one of these: "+rr.print(ar(r))+rr.printLocation(n,e),console.error('%cUnknown option detected: "'+e+'"'+l,AI),tf=!0}static findInOptions(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=1e9,o="",a=[];const l=e.toLowerCase();let c;for(const h in r){let f;if(r[h].__type__!==void 0&&i===!0){const p=rr.findInOptions(e,r[h],Yv(n,h));s>p.distance&&(o=p.closestMatch,a=p.path,s=p.distance,c=p.indexMatch)}else{var d;Nt(d=h.toLowerCase()).call(d,l)!==-1&&(c=h),f=rr.levenshteinDistance(e,h),s>f&&(o=h,a=rRe(n),s=f)}}return{closestMatch:o,path:a,distance:s,indexMatch:c}}static printLocation(e,r){let i=`

`+(arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`)+`options = {
`;for(let s=0;s<e.length;s++){for(let o=0;o<s+1;o++)i+="  ";i+=e[s]+`: {
`}for(let s=0;s<e.length+1;s++)i+="  ";i+=r+`
`;for(let s=0;s<e.length+1;s++){for(let o=0;o<e.length-s;o++)i+="  ";i+=`}
`}return i+`

`}static print(e){return Im(e).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}static levenshteinDistance(e,r){if(e.length===0)return r.length;if(r.length===0)return e.length;const n=[];let i;for(i=0;i<=r.length;i++)n[i]=[i];let s;for(s=0;s<=e.length;s++)n[0][s]=s;for(i=1;i<=r.length;i++)for(s=1;s<=e.length;s++)r.charAt(i-1)==e.charAt(s-1)?n[i][s]=n[i-1][s-1]:n[i][s]=Math.min(n[i-1][s-1]+1,Math.min(n[i][s-1]+1,n[i-1][s]+1));return n[r.length][e.length]}};const fRe=Rs,pRe=uRe,rd=U$,mRe=dRe,oae=AI,gRe=hRe;function yRe(t){return ja=t,wRe()}var aae={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},W$=cc(aae);W$.color="color.color";W$.style="dashes";var _n={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},PK={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},ja="",Gd=0,Xe="",Me="",Bn=_n.NULL;function vRe(){Gd=0,Xe=ja.charAt(0)}function Dr(){Gd++,Xe=ja.charAt(Gd)}function xu(){return ja.charAt(Gd+1)}function IK(t){var e=t.charCodeAt(0);return e<47?e===35||e===46:e<59?e>47:e<91?e>64:e<96?e===95:e<123?e>96:!1}function nl(t,e){if(t||(t={}),e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function bRe(t,e,r){for(var n=e.split("."),i=t;n.length;){var s=n.shift();n.length?(i[s]||(i[s]={}),i=i[s]):i[s]=r}}function lae(t,e){for(var r,n,i=null,s=[t],o=t;o.parent;)s.push(o.parent),o=o.parent;if(o.nodes){for(r=0,n=o.nodes.length;r<n;r++)if(e.id===o.nodes[r].id){i=o.nodes[r];break}}for(i||(i={id:e.id},t.node&&(i.attr=nl(i.attr,t.node))),r=s.length-1;r>=0;r--){var a,l=s[r];l.nodes||(l.nodes=[]),Nt(a=l.nodes).call(a,i)===-1&&l.nodes.push(i)}e.attr&&(i.attr=nl(i.attr,e.attr))}function xRe(t,e){if(t.edges||(t.edges=[]),t.edges.push(e),t.edge){var r=nl({},t.edge);e.attr=nl(r,e.attr)}}function cae(t,e,r,n,i){var s={from:e,to:r,type:n};return t.edge&&(s.attr=nl({},t.edge)),s.attr=nl(s.attr||{},i),i!=null&&i.hasOwnProperty("arrows")&&i.arrows!=null&&(s.arrows={to:{enabled:!0,type:i.arrows.type}},i.arrows=null),s}function Dt(){for(Bn=_n.NULL,Me="";Xe===" "||Xe==="	"||Xe===`
`||Xe==="\r";)Dr();do{var t=!1;if(Xe==="#"){for(var e=Gd-1;ja.charAt(e)===" "||ja.charAt(e)==="	";)e--;if(ja.charAt(e)===`
`||ja.charAt(e)===""){for(;Xe!=""&&Xe!=`
`;)Dr();t=!0}}if(Xe==="/"&&xu()==="/"){for(;Xe!=""&&Xe!=`
`;)Dr();t=!0}if(Xe==="/"&&xu()==="*"){for(;Xe!="";)if(Xe==="*"&&xu()==="/"){Dr(),Dr();break}else Dr();t=!0}for(;Xe===" "||Xe==="	"||Xe===`
`||Xe==="\r";)Dr()}while(t);if(Xe===""){Bn=_n.DELIMITER;return}var r=Xe+xu();if(PK[r]){Bn=_n.DELIMITER,Me=r,Dr(),Dr();return}if(PK[Xe]){Bn=_n.DELIMITER,Me=Xe,Dr();return}if(IK(Xe)||Xe==="-"){for(Me+=Xe,Dr();IK(Xe);)Me+=Xe,Dr();Me==="false"?Me=!1:Me==="true"?Me=!0:isNaN(Number(Me))||(Me=Number(Me)),Bn=_n.IDENTIFIER;return}if(Xe==='"'){for(Dr();Xe!=""&&(Xe!='"'||Xe==='"'&&xu()==='"');)Xe==='"'?(Me+=Xe,Dr()):Xe==="\\"&&xu()==="n"?(Me+=`
`,Dr()):Me+=Xe,Dr();if(Xe!='"')throw En('End of string " expected');Dr(),Bn=_n.IDENTIFIER;return}for(Bn=_n.UNKNOWN;Xe!="";)Me+=Xe,Dr();throw new SyntaxError('Syntax error in part "'+fae(Me,30)+'"')}function wRe(){var t={};if(vRe(),Dt(),Me==="strict"&&(t.strict=!0,Dt()),(Me==="graph"||Me==="digraph")&&(t.type=Me,Dt()),Bn===_n.IDENTIFIER&&(t.id=Me,Dt()),Me!="{")throw En("Angle bracket { expected");if(Dt(),uae(t),Me!="}")throw En("Angle bracket } expected");if(Dt(),Me!=="")throw En("End of file expected");return Dt(),delete t.node,delete t.edge,delete t.graph,t}function uae(t){for(;Me!==""&&Me!="}";)SRe(t),Me===";"&&Dt()}function SRe(t){var e=dae(t);if(e){hae(t,e);return}var r=_Re(t);if(!r){if(Bn!=_n.IDENTIFIER)throw En("Identifier expected");var n=Me;if(Dt(),Me==="="){if(Dt(),Bn!=_n.IDENTIFIER)throw En("Identifier expected");t[n]=Me,Dt()}else ERe(t,n)}}function dae(t){var e=null;if(Me==="subgraph"&&(e={},e.type="subgraph",Dt(),Bn===_n.IDENTIFIER&&(e.id=Me,Dt())),Me==="{"){if(Dt(),e||(e={}),e.parent=t,e.node=t.node,e.edge=t.edge,e.graph=t.graph,uae(e),Me!="}")throw En("Angle bracket } expected");Dt(),delete e.node,delete e.edge,delete e.graph,delete e.parent,t.subgraphs||(t.subgraphs=[]),t.subgraphs.push(e)}return e}function _Re(t){return Me==="node"?(Dt(),t.node=Bf(),"node"):Me==="edge"?(Dt(),t.edge=Bf(),"edge"):Me==="graph"?(Dt(),t.graph=Bf(),"graph"):null}function ERe(t,e){var r={id:e},n=Bf();n&&(r.attr=n),lae(t,r),hae(t,e)}function hae(t,e){for(;Me==="->"||Me==="--";){var r,n=Me;Dt();var i=dae(t);if(i)r=i;else{if(Bn!=_n.IDENTIFIER)throw En("Identifier or subgraph expected");r=Me,lae(t,{id:r}),Dt()}var s=Bf(),o=cae(t,e,r,n,s);xRe(t,o),e=r}}function Bf(){for(var t,e=null,r={dashed:!0,solid:!1,dotted:[1,5]},n={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},i=new Array,s=new Array;Me==="[";){for(Dt(),e={};Me!==""&&Me!="]";){if(Bn!=_n.IDENTIFIER)throw En("Attribute name expected");var o=Me;if(Dt(),Me!="=")throw En("Equal sign = expected");if(Dt(),Bn!=_n.IDENTIFIER)throw En("Attribute value expected");var a=Me;o==="style"&&(a=r[a]);var l;o==="arrowhead"&&(l=n[a],o="arrows",a={to:{enabled:!0,type:l}}),o==="arrowtail"&&(l=n[a],o="arrows",a={from:{enabled:!0,type:l}}),i.push({attr:e,name:o,value:a}),s.push(o),Dt(),Me==","&&Dt()}if(Me!="]")throw En("Bracket ] expected");Dt()}if(Ga(s).call(s,"dir")){var c={};for(c.arrows={},t=0;t<i.length;t++)if(i[t].name==="arrows")if(i[t].value.to!=null)c.arrows.to=t;else if(i[t].value.from!=null)c.arrows.from=t;else throw En("Invalid value of arrows");else i[t].name==="dir"&&(c.dir=t);var d=i[c.dir].value;if(!Ga(s).call(s,"arrows"))if(d==="both")i.push({attr:i[c.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),c.arrows.to=i.length-1,i.push({attr:i[c.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),c.arrows.from=i.length-1;else if(d==="forward")i.push({attr:i[c.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),c.arrows.to=i.length-1;else if(d==="back")i.push({attr:i[c.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),c.arrows.from=i.length-1;else if(d==="none")i.push({attr:i[c.dir].attr,name:"arrows",value:""}),c.arrows.to=i.length-1;else throw En('Invalid dir type "'+d+'"');var h,f;if(d==="both")c.arrows.to&&c.arrows.from?(f=i[c.arrows.to].value.to.type,h=i[c.arrows.from].value.from.type,i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}},_o(i).call(i,c.arrows.from,1)):c.arrows.to?(f=i[c.arrows.to].value.to.type,h="arrow",i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.from&&(f="arrow",h=i[c.arrows.from].value.from.type,i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}});else if(d==="back")c.arrows.to&&c.arrows.from?(f="",h=i[c.arrows.from].value.from.type,i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.to?(f="",h="arrow",c.arrows.from=c.arrows.to,i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.from&&(f="",h=i[c.arrows.from].value.from.type,i[c.arrows.to]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}),i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{from:{enabled:!0,type:i[c.arrows.from].value.from.type}}};else if(d==="none"){var p;c.arrows.to?p=c.arrows.to:p=c.arrows.from,i[p]={attr:i[p].attr,name:i[p].name,value:""}}else if(d==="forward")c.arrows.to&&c.arrows.from?(f=i[c.arrows.to].value.to.type,h="",i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.to?(f=i[c.arrows.to].value.to.type,h="",i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.from&&(f="arrow",h="",c.arrows.to=c.arrows.from,i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}),i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:i[c.arrows.to].value.to.type}}};else throw En('Invalid dir type "'+d+'"');_o(i).call(i,c.dir,1)}var m;if(Ga(s).call(s,"penwidth")){var g=[];for(m=i.length,t=0;t<m;t++)i[t].name!=="width"&&(i[t].name==="penwidth"&&(i[t].name="width"),g.push(i[t]));i=g}for(m=i.length,t=0;t<m;t++)bRe(i[t].attr,i[t].name,i[t].value);return e}function En(t){return new SyntaxError(t+', got "'+fae(Me,30)+'" (char '+Gd+")")}function fae(t,e){return t.length<=e?t:t.substr(0,27)+"..."}function NRe(t,e,r){dr(t)?jt(t).call(t,function(n){dr(e)?jt(e).call(e,function(i){r(n,i)}):r(n,e)}):dr(e)?jt(e).call(e,function(n){r(t,n)}):r(t,e)}function YT(t,e,r){for(var n=e.split("."),i=n.pop(),s=t,o=0;o<n.length;o++){var a=n[o];a in s||(s[a]={}),s=s[a]}return s[i]=r,t}function RK(t,e){var r={};for(var n in t)if(t.hasOwnProperty(n)){var i=e[n];dr(i)?jt(i).call(i,function(s){YT(r,s,t[n])}):typeof i=="string"?YT(r,i,t[n]):YT(r,n,t[n])}return r}function CRe(t){var e=yRe(t),r={nodes:[],edges:[],options:{}};if(e.nodes){var n;jt(n=e.nodes).call(n,function(o){var a={id:o.id,label:String(o.label||o.id)};nl(a,RK(o.attr,aae)),a.image&&(a.shape="image"),r.nodes.push(a)})}if(e.edges){var i,s=function(o){var a={from:o.from,to:o.to};return nl(a,RK(o.attr,W$)),a.arrows==null&&o.type==="->"&&(a.arrows="to"),a};jt(i=e.edges).call(i,function(o){var a,l;if(o.from instanceof Object?a=o.from.nodes:a={id:o.from},o.to instanceof Object?l=o.to.nodes:l={id:o.to},o.from instanceof Object&&o.from.edges){var c;jt(c=o.from.edges).call(c,function(h){var f=s(h);r.edges.push(f)})}if(NRe(a,l,function(h,f){var p=cae(r,h.id,f.id,o.type,o.attr),m=s(p);r.edges.push(m)}),o.to instanceof Object&&o.to.edges){var d;jt(d=o.to.edges).call(d,function(h){var f=s(h);r.edges.push(f)})}})}return e.attr&&(r.options=e.attr),r}function kRe(t,e){var r;const n={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};e!=null&&(e.fixed!=null&&(n.nodes.fixed=e.fixed),e.parseColor!=null&&(n.nodes.parseColor=e.parseColor),e.inheritColor!=null&&(n.edges.inheritColor=e.inheritColor));const i=t.edges,s=Ud(i).call(i,a=>{const l={from:a.source,id:a.id,to:a.target};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.type==="Directed"&&(l.arrows="to"),a.color&&n.edges.inheritColor===!1&&(l.color=a.color),l});return{nodes:Ud(r=t.nodes).call(r,a=>{const l={id:a.id,fixed:n.nodes.fixed&&a.x!=null&&a.y!=null};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.size!=null&&(l.size=a.size),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.title!=null&&(l.title=a.title),a.x!=null&&(l.x=a.x),a.y!=null&&(l.y=a.y),a.color!=null&&(n.nodes.parseColor===!0?l.color=a.color:l.color={background:a.color,border:a.color,highlight:{background:a.color,border:a.color},hover:{background:a.color,border:a.color}}),l}),edges:s}}const TRe={addDescription:"Click in an empty space to place a new node.",addEdge:"Add Edge",addNode:"Add Node",back:"Back",close:"Close",createEdgeError:"Cannot link edges to a cluster.",del:"Delete selected",deleteClusterError:"Clusters cannot be deleted.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",edit:"Edit",editClusterError:"Clusters cannot be edited.",editEdge:"Edit Edge",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",editNode:"Edit Node"},ORe={addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",addEdge:"Kante hinzufgen",addNode:"Knoten hinzufgen",back:"Zurck",close:"Schlieen",createEdgeError:"Es ist nicht mglich, Kanten mit Clustern zu verbinden.",del:"Lsche Auswahl",deleteClusterError:"Cluster knnen nicht gelscht werden.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",edit:"Editieren",editClusterError:"Cluster knnen nicht editiert werden.",editEdge:"Kante editieren",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",editNode:"Knoten editieren"},jRe={addDescription:"Haga clic en un lugar vaco para colocar un nuevo nodo.",addEdge:"Aadir arista",addNode:"Aadir nodo",back:"Atrs",close:"Cerrar",createEdgeError:"No se puede conectar una arista a un grupo.",del:"Eliminar seleccin",deleteClusterError:"No es posible eliminar grupos.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",edit:"Editar",editClusterError:"No es posible editar grupos.",editEdge:"Editar arista",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",editNode:"Editar nodo"},PRe={addDescription:"Clicca per aggiungere un nuovo nodo",addEdge:"Aggiungi un vertice",addNode:"Aggiungi un nodo",back:"Indietro",close:"Chiudere",createEdgeError:"Non si possono collegare vertici ad un cluster",del:"Cancella la selezione",deleteClusterError:"I cluster non possono essere cancellati",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",edit:"Modifica",editClusterError:"I clusters non possono essere modificati.",editEdge:"Modifica il vertice",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",editNode:"Modifica il nodo"},IRe={addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",addEdge:"Link toevoegen",addNode:"Node toevoegen",back:"Terug",close:"Sluiten",createEdgeError:"Kan geen link maken naar een cluster.",del:"Selectie verwijderen",deleteClusterError:"Clusters kunnen niet worden verwijderd.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",edit:"Wijzigen",editClusterError:"Clusters kunnen niet worden aangepast.",editEdge:"Link wijzigen",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",editNode:"Node wijzigen"},RRe={addDescription:"Clique em um espao em branco para adicionar um novo n",addEdge:"Adicionar aresta",addNode:"Adicionar n",back:"Voltar",close:"Fechar",createEdgeError:"No foi possvel linkar arestas a um cluster.",del:"Remover selecionado",deleteClusterError:"Clusters no puderam ser removidos.",edgeDescription:"Clique em um n e arraste a aresta at outro n para conect-los",edit:"Editar",editClusterError:"Clusters no puderam ser editados.",editEdge:"Editar aresta",editEdgeDescription:"Clique nos pontos de controle e os arraste para um n para conect-los",editNode:"Editar n"},MRe={addDescription:"   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"    .",del:" ",deleteClusterError:"    ",edgeDescription:"        ,   .",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},$Re={addDescription:"",addEdge:"",addNode:"",back:"",close:"",createEdgeError:"",del:"",deleteClusterError:"",edgeDescription:"",edit:"",editClusterError:"",editEdge:"",editEdgeDescription:"",editNode:""},DRe={addDescription:"K   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"  '   .",del:" ",deleteClusterError:"    .",edgeDescription:"        ,   '.",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},ARe={addDescription:"Cliquez dans un endroit vide pour placer un nud.",addEdge:"Ajouter un lien",addNode:"Ajouter un nud",back:"Retour",close:"Fermer",createEdgeError:"Impossible de crer un lien vers un cluster.",del:"Effacer la slection",deleteClusterError:"Les clusters ne peuvent pas tre effacs.",edgeDescription:"Cliquez sur un nud et glissez le lien vers un autre nud pour les connecter.",edit:"diter",editClusterError:"Les clusters ne peuvent pas tre dits.",editEdge:"diter le lien",editEdgeDescription:"Cliquez sur les points de contrle et glissez-les pour connecter un nud.",editNode:"diter le nud"},FRe={addDescription:"Kluknutm do przdnho prostoru mete pidat nov vrchol.",addEdge:"Pidat hranu",addNode:"Pidat vrchol",back:"Zpt",close:"Zavt",createEdgeError:"Nelze pipojit hranu ke shluku.",del:"Smazat vbr",deleteClusterError:"Nelze mazat shluky.",edgeDescription:"Petaenm z jednoho vrcholu do druhho mete spojit tyto vrcholy novou hranou.",edit:"Upravit",editClusterError:"Nelze upravovat shluky.",editEdge:"Upravit hranu",editEdgeDescription:"Petaenm kontrolnho vrcholu hrany ji mete pipojit k jinmu vrcholu.",editNode:"Upravit vrchol"};var qRe=Object.freeze({__proto__:null,cn:$Re,cs:FRe,de:ORe,en:TRe,es:jRe,fr:ARe,it:PRe,nl:IRe,pt:RRe,ru:MRe,uk:DRe});function LRe(t,e){try{const[n,i]=e.split(/[-_ /]/,2),s=n!=null?n.toLowerCase():null,o=i!=null?i.toUpperCase():null;if(s&&o){const a=s+"-"+o;if(Object.prototype.hasOwnProperty.call(t,a))return a;var r;console.warn(uPe(r="Unknown variant ".concat(o," of language ")).call(r,s,"."))}if(s){const a=s;if(Object.prototype.hasOwnProperty.call(t,a))return a;console.warn("Unknown language ".concat(s))}return console.warn("Unknown locale ".concat(e,", falling back to English.")),"en"}catch(n){return console.error(n),console.warn("Unexpected error while normalizing locale ".concat(e,", falling back to English.")),"en"}}class BRe{constructor(){this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}init(){if(this.initialized())return;this.src=this.image.src;const e=this.image.width,r=this.image.height;this.width=e,this.height=r;const n=Math.floor(r/2),i=Math.floor(r/4),s=Math.floor(r/8),o=Math.floor(r/16),a=Math.floor(e/2),l=Math.floor(e/4),c=Math.floor(e/8),d=Math.floor(e/16);this.canvas.width=3*l,this.canvas.height=n,this.coordinates=[[0,0,a,n],[a,0,l,i],[a,i,c,s],[5*c,i,d,o]],this._fillMipMap()}initialized(){return this.coordinates!==void 0}_fillMipMap(){const e=this.canvas.getContext("2d"),r=this.coordinates[0];e.drawImage(this.image,r[0],r[1],r[2],r[3]);for(let n=1;n<this.NUM_ITERATIONS;n++){const i=this.coordinates[n-1],s=this.coordinates[n];e.drawImage(this.canvas,i[0],i[1],i[2],i[3],s[0],s[1],s[2],s[3])}}drawImageAtPosition(e,r,n,i,s,o){if(this.initialized())if(r>2){r*=.5;let a=0;for(;r>2&&a<this.NUM_ITERATIONS;)r*=.5,a+=1;a>=this.NUM_ITERATIONS&&(a=this.NUM_ITERATIONS-1);const l=this.coordinates[a];e.drawImage(this.canvas,l[0],l[1],l[2],l[3],n,i,s,o)}else e.drawImage(this.image,n,i,s,o)}}class zRe{constructor(e){this.images={},this.imageBroken={},this.callback=e}_tryloadBrokenUrl(e,r,n){if(!(e===void 0||n===void 0)){if(r===void 0){console.warn("No broken url image defined");return}n.image.onerror=()=>{console.error("Could not load brokenImage:",r)},n.image.src=r}}_redrawWithImage(e){this.callback&&this.callback(e)}load(e,r){const n=this.images[e];if(n)return n;const i=new BRe;return this.images[e]=i,i.image.onload=()=>{this._fixImageCoordinates(i.image),i.init(),this._redrawWithImage(i)},i.image.onerror=()=>{console.error("Could not load image:",e),this._tryloadBrokenUrl(e,r,i)},i.image.src=e,i}_fixImageCoordinates(e){e.width===0&&(document.body.appendChild(e),e.width=e.offsetWidth,e.height=e.offsetHeight,document.body.removeChild(e))}}var MK={},$K={},QT={exports:{}},XT,DK;function VRe(){if(DK)return XT;DK=1;var t=nt();return XT=t(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),XT}var JT,AK;function URe(){if(AK)return JT;AK=1;var t=nt(),e=Qr(),r=Us(),n=VRe(),i=Object.isExtensible,s=t(function(){});return JT=s||n?function(a){return!e(a)||n&&r(a)==="ArrayBuffer"?!1:i?i(a):!0}:i,JT}var ZT,FK;function pae(){if(FK)return ZT;FK=1;var t=nt();return ZT=!t(function(){return Object.isExtensible(Object.preventExtensions({}))}),ZT}var qK;function bb(){if(qK)return QT.exports;qK=1;var t=Pe(),e=at(),r=km(),n=Qr(),i=an(),s=Hi().f,o=fb(),a=P$(),l=URe(),c=ob(),d=pae(),h=!1,f=c("meta"),p=0,m=function(x){s(x,f,{value:{objectID:"O"+p++,weakData:{}}})},g=function(x,S){if(!n(x))return typeof x=="symbol"?x:(typeof x=="string"?"S":"P")+x;if(!i(x,f)){if(!l(x))return"F";if(!S)return"E";m(x)}return x[f].objectID},b=function(x,S){if(!i(x,f)){if(!l(x))return!0;if(!S)return!1;m(x)}return x[f].weakData},y=function(x){return d&&h&&l(x)&&!i(x,f)&&m(x),x},v=function(){w.enable=function(){},h=!0;var x=o.f,S=e([].splice),_={};_[f]=1,x(_).length&&(o.f=function(N){for(var E=x(N),k=0,C=E.length;k<C;k++)if(E[k]===f){S(E,k,1);break}return E},t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:a.f}))},w=QT.exports={enable:v,fastKey:g,getWeakData:b,onFreeze:y};return r[f]=!0,QT.exports}var e2,LK;function HRe(){if(LK)return e2;LK=1;var t=Or(),e=Nh(),r=t("iterator"),n=Array.prototype;return e2=function(i){return i!==void 0&&(e.Array===i||n[r]===i)},e2}var t2,BK;function mae(){if(BK)return t2;BK=1;var t=Eh(),e=S$(),r=mh(),n=Nh(),i=Or(),s=i("iterator");return t2=function(o){if(!r(o))return e(o,s)||e(o,"@@iterator")||n[t(o)]},t2}var r2,zK;function WRe(){if(zK)return r2;zK=1;var t=ni(),e=Ho(),r=Hs(),n=vh(),i=mae(),s=TypeError;return r2=function(o,a){var l=arguments.length<2?i(o):a;if(e(l))return r(t(l,o));throw new s(n(o)+" is not iterable")},r2}var n2,VK;function K$(){if(VK)return n2;VK=1;var t=ni(),e=Hs(),r=S$();return n2=function(n,i,s){var o,a;e(n);try{if(o=r(n,"return"),!o){if(i==="throw")throw s;return s}o=t(o,n)}catch(l){a=!0,o=l}if(i==="throw")throw s;if(a)throw o;return e(o),s},n2}var i2,UK;function xb(){if(UK)return i2;UK=1;var t=lb(),e=ni(),r=Hs(),n=vh(),i=HRe(),s=Wo(),o=Tr(),a=WRe(),l=mae(),c=K$(),d=TypeError,h=function(p,m){this.stopped=p,this.result=m},f=h.prototype;return i2=function(p,m,g){var b=g&&g.that,y=!!(g&&g.AS_ENTRIES),v=!!(g&&g.IS_RECORD),w=!!(g&&g.IS_ITERATOR),x=!!(g&&g.INTERRUPTED),S=t(m,b),_,N,E,k,C,O,P,j=function(A){return _&&c(_,"normal"),new h(!0,A)},M=function(A){return y?(r(A),x?S(A[0],A[1],j):S(A[0],A[1])):x?S(A,j):S(A)};if(v)_=p.iterator;else if(w)_=p;else{if(N=l(p),!N)throw new d(n(p)+" is not iterable");if(i(N)){for(E=0,k=s(p);k>E;E++)if(C=M(p[E]),C&&o(f,C))return C;return new h(!1)}_=a(p,N)}for(O=v?p.next:_.next;!(P=e(O,_)).done;){try{C=M(P.value)}catch(A){c(_,"throw",A)}if(typeof C=="object"&&C&&o(f,C))return C}return new h(!1)},i2}var s2,HK;function G$(){if(HK)return s2;HK=1;var t=Tr(),e=TypeError;return s2=function(r,n){if(t(n,r))return r;throw new e("Incorrect invocation")},s2}var o2,WK;function Y$(){if(WK)return o2;WK=1;var t=Pe(),e=Ht(),r=bb(),n=nt(),i=wh(),s=xb(),o=G$(),a=Yr(),l=Qr(),c=mh(),d=nu(),h=Hi().f,f=yl().forEach,p=gr(),m=iu(),g=m.set,b=m.getterFor;return o2=function(y,v,w){var x=y.indexOf("Map")!==-1,S=y.indexOf("Weak")!==-1,_=x?"set":"add",N=e[y],E=N&&N.prototype,k={},C;if(!p||!a(N)||!(S||E.forEach&&!n(function(){new N().entries().next()})))C=w.getConstructor(v,y,x,_),r.enable();else{C=v(function(j,M){g(o(j,O),{type:y,collection:new N}),c(M)||s(M,j[_],{that:j,AS_ENTRIES:x})});var O=C.prototype,P=b(y);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(j){var M=j==="add"||j==="set";j in E&&!(S&&j==="clear")&&i(O,j,function(A,I){var L=P(this).collection;if(!M&&S&&!l(A))return j==="get"?void 0:!1;var F=L[j](A===0?0:A,I);return M?this:F})}),S||h(O,"size",{configurable:!0,get:function(){return P(this).collection.size}})}return d(C,y,!1,!0),k[y]=C,t({global:!0,forced:!0},k),S||w.setStrong(C,y,x),C},o2}var a2,KK;function Q$(){if(KK)return a2;KK=1;var t=Pm();return a2=function(e,r,n){for(var i in r)n&&n.unsafe&&e[i]?e[i]=r[i]:t(e,i,r[i],n);return e},a2}var l2,GK;function KRe(){if(GK)return l2;GK=1;var t=xi(),e=I$(),r=Or(),n=gr(),i=r("species");return l2=function(s){var o=t(s);n&&o&&!o[i]&&e(o,i,{configurable:!0,get:function(){return this}})},l2}var c2,YK;function gae(){if(YK)return c2;YK=1;var t=jm(),e=I$(),r=Q$(),n=lb(),i=G$(),s=mh(),o=xb(),a=M$(),l=$$(),c=KRe(),d=gr(),h=bb().fastKey,f=iu(),p=f.set,m=f.getterFor;return c2={getConstructor:function(g,b,y,v){var w=g(function(E,k){i(E,x),p(E,{type:b,index:t(null),first:null,last:null,size:0}),d||(E.size=0),s(k)||o(k,E[v],{that:E,AS_ENTRIES:y})}),x=w.prototype,S=m(b),_=function(E,k,C){var O=S(E),P=N(E,k),j,M;return P?P.value=C:(O.last=P={index:M=h(k,!0),key:k,value:C,previous:j=O.last,next:null,removed:!1},O.first||(O.first=P),j&&(j.next=P),d?O.size++:E.size++,M!=="F"&&(O.index[M]=P)),E},N=function(E,k){var C=S(E),O=h(k),P;if(O!=="F")return C.index[O];for(P=C.first;P;P=P.next)if(P.key===k)return P};return r(x,{clear:function(){for(var k=this,C=S(k),O=C.first;O;)O.removed=!0,O.previous&&(O.previous=O.previous.next=null),O=O.next;C.first=C.last=null,C.index=t(null),d?C.size=0:k.size=0},delete:function(E){var k=this,C=S(k),O=N(k,E);if(O){var P=O.next,j=O.previous;delete C.index[O.index],O.removed=!0,j&&(j.next=P),P&&(P.previous=j),C.first===O&&(C.first=P),C.last===O&&(C.last=j),d?C.size--:k.size--}return!!O},forEach:function(k){for(var C=S(this),O=n(k,arguments.length>1?arguments[1]:void 0),P;P=P?P.next:C.first;)for(O(P.value,P.key,this);P&&P.removed;)P=P.previous},has:function(k){return!!N(this,k)}}),r(x,y?{get:function(k){var C=N(this,k);return C&&C.value},set:function(k,C){return _(this,k===0?0:k,C)}}:{add:function(k){return _(this,k=k===0?0:k,k)}}),d&&e(x,"size",{configurable:!0,get:function(){return S(this).size}}),w},setStrong:function(g,b,y){var v=b+" Iterator",w=m(b),x=m(v);a(g,b,function(S,_){p(this,{type:v,target:S,state:w(S),kind:_,last:null})},function(){for(var S=x(this),_=S.kind,N=S.last;N&&N.removed;)N=N.previous;return!S.target||!(S.last=N=N?N.next:S.state.first)?(S.target=null,l(void 0,!0)):l(_==="keys"?N.key:_==="values"?N.value:[N.key,N.value],!1)},y?"entries":"values",!y,!0),c(b)}},c2}var QK;function GRe(){if(QK)return $K;QK=1;var t=Y$(),e=gae();return t("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),$K}var XK;function YRe(){return XK||(XK=1,GRe()),MK}var JK={},u2,ZK;function yae(){return ZK||(ZK=1,u2=function(t,e){return e===1?function(r,n){return r[t](n)}:function(r,n,i){return r[t](n,i)}}),u2}var d2,eG;function QRe(){if(eG)return d2;eG=1;var t=xi(),e=yae(),r=t("Map");return d2={Map:r,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:r.prototype},d2}var tG;function XRe(){if(tG)return JK;tG=1;var t=Pe(),e=at(),r=Ho(),n=Uo(),i=xb(),s=QRe(),o=bh(),a=nt(),l=s.Map,c=s.has,d=s.get,h=s.set,f=e([].push),p=o||a(function(){return l.groupBy("ab",function(m){return m}).get("a").length!==1});return t({target:"Map",stat:!0,forced:o||p},{groupBy:function(g,b){n(g),r(b);var y=new l,v=0;return i(g,function(w){var x=b(w,v++);c(y,x)?f(d(y,x),w):h(y,x,[w])}),y}}),JK}var rG={},h2,nG;function JRe(){if(nG)return h2;nG=1;var t=at(),e=Sh(),r=Wi(),n=Uo(),i=t("".charAt),s=t("".charCodeAt),o=t("".slice),a=function(l){return function(c,d){var h=r(n(c)),f=e(d),p=h.length,m,g;return f<0||f>=p?l?"":void 0:(m=s(h,f),m<55296||m>56319||f+1===p||(g=s(h,f+1))<56320||g>57343?l?i(h,f):m:l?o(h,f,f+2):(m-55296<<10)+(g-56320)+65536)}};return h2={codeAt:a(!1),charAt:a(!0)},h2}var iG;function X$(){if(iG)return rG;iG=1;var t=JRe().charAt,e=Wi(),r=iu(),n=M$(),i=$$(),s="String Iterator",o=r.set,a=r.getterFor(s);return n(String,"String",function(l){o(this,{type:s,string:e(l),index:0})},function(){var c=a(this),d=c.string,h=c.index,f;return h>=d.length?i(void 0,!0):(f=t(d,h),c.index+=f.length,i(f,!1))}),rG}var f2,sG;function ZRe(){if(sG)return f2;sG=1,Ch(),YRe(),XRe(),X$();var t=Tt();return f2=t.Map,f2}var p2,oG;function eMe(){if(oG)return p2;oG=1;var t=ZRe();return kh(),p2=t,p2}var m2,aG;function tMe(){return aG||(aG=1,m2=eMe()),m2}var rMe=tMe(),J$=ze(rMe);class nMe{constructor(){this.clear(),this._defaultIndex=0,this._groupIndex=0,this._defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},Sr(this.options,this.defaultOptions)}setOptions(e){const r=["useDefaultGroups"];if(e!==void 0){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Nt(r).call(r,n)===-1){const i=e[n];this.add(n,i)}}}clear(){this._groups=new J$,this._groupNames=[]}get(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this._groups.get(e);if(n===void 0&&r)if(this.options.useDefaultGroups===!1&&this._groupNames.length>0){const i=this._groupIndex%this._groupNames.length;++this._groupIndex,n={},n.color=this._groups.get(this._groupNames[i]),this._groups.set(e,n)}else{const i=this._defaultIndex%this._defaultGroups.length;this._defaultIndex++,n={},n.color=this._defaultGroups[i],this._groups.set(e,n)}return n}add(e,r){return this._groups.has(e)||this._groupNames.push(e),this._groups.set(e,r),r}}var lG={},cG;function iMe(){if(cG)return lG;cG=1;var t=Pe();return t({target:"Number",stat:!0},{isNaN:function(r){return r!==r}}),lG}var g2,uG;function sMe(){if(uG)return g2;uG=1,iMe();var t=Tt();return g2=t.Number.isNaN,g2}var y2,dG;function oMe(){if(dG)return y2;dG=1;var t=sMe();return y2=t,y2}var v2,hG;function aMe(){return hG||(hG=1,v2=oMe()),v2}var lMe=aMe(),FI=ze(lMe),fG={},b2,pG;function cMe(){if(pG)return b2;pG=1;var t=Ht(),e=t.isFinite;return b2=Number.isFinite||function(n){return typeof n=="number"&&e(n)},b2}var mG;function uMe(){if(mG)return fG;mG=1;var t=Pe(),e=cMe();return t({target:"Number",stat:!0},{isFinite:e}),fG}var x2,gG;function dMe(){if(gG)return x2;gG=1,uMe();var t=Tt();return x2=t.Number.isFinite,x2}var w2,yG;function hMe(){if(yG)return w2;yG=1;var t=dMe();return w2=t,w2}var S2,vG;function fMe(){return vG||(vG=1,S2=hMe()),S2}var pMe=fMe(),Bl=ze(pMe),bG={},xG;function mMe(){if(xG)return bG;xG=1;var t=Pe(),e=yl().some,r=Th(),n=r("some");return t({target:"Array",proto:!0,forced:!n},{some:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),bG}var _2,wG;function gMe(){if(wG)return _2;wG=1,mMe();var t=ln();return _2=t("Array","some"),_2}var E2,SG;function yMe(){if(SG)return E2;SG=1;var t=Tr(),e=gMe(),r=Array.prototype;return E2=function(n){var i=n.some;return n===r||t(r,n)&&i===r.some?e:i},E2}var N2,_G;function vMe(){if(_G)return N2;_G=1;var t=yMe();return N2=t,N2}var C2,EG;function bMe(){return EG||(EG=1,C2=vMe()),C2}var xMe=bMe(),wMe=ze(xMe),k2={exports:{}},NG={},CG;function SMe(){if(CG)return NG;CG=1;var t=Pe(),e=gr(),r=Hi().f;return t({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!e},{defineProperty:r}),NG}var kG;function _Me(){if(kG)return k2.exports;kG=1,SMe();var t=Tt(),e=t.Object,r=k2.exports=function(i,s,o){return e.defineProperty(i,s,o)};return e.defineProperty.sham&&(r.sham=!0),k2.exports}var T2,TG;function vae(){if(TG)return T2;TG=1;var t=_Me();return T2=t,T2}var O2,OG;function EMe(){if(OG)return O2;OG=1;var t=vae();return O2=t,O2}var j2,jG;function NMe(){if(jG)return j2;jG=1;var t=EMe();return j2=t,j2}var P2,PG;function CMe(){return PG||(PG=1,P2=NMe()),P2}var kMe=CMe(),TMe=ze(kMe),IG={},RG;function OMe(){if(RG)return IG;RG=1;var t=Or(),e=Hi().f,r=t("metadata"),n=Function.prototype;return n[r]===void 0&&e(n,r,{value:null}),IG}var MG={},$G;function jMe(){return $G||($G=1,xoe()),MG}var DG={},AG;function PMe(){return AG||(AG=1,woe()),DG}var FG={},qG;function IMe(){if(qG)return FG;qG=1;var t=Zt();return t("metadata"),FG}var I2,LG;function RMe(){if(LG)return I2;LG=1;var t=Coe();return OMe(),jMe(),PMe(),IMe(),I2=t,I2}var BG={},R2,zG;function bae(){if(zG)return R2;zG=1;var t=xi(),e=at(),r=t("Symbol"),n=r.keyFor,i=e(r.prototype.valueOf);return R2=r.isRegisteredSymbol||function(o){try{return n(i(o))!==void 0}catch{return!1}},R2}var VG;function MMe(){if(VG)return BG;VG=1;var t=Pe(),e=bae();return t({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),BG}var UG={},M2,HG;function xae(){if(HG)return M2;HG=1;for(var t=xh(),e=xi(),r=at(),n=Cm(),i=Or(),s=e("Symbol"),o=s.isWellKnownSymbol,a=e("Object","getOwnPropertyNames"),l=r(s.prototype.valueOf),c=t("wks"),d=0,h=a(s),f=h.length;d<f;d++)try{var p=h[d];n(s[p])&&i(p)}catch{}return M2=function(g){if(o&&o(g))return!0;try{for(var b=l(g),y=0,v=a(c),w=v.length;y<w;y++)if(c[v[y]]==b)return!0}catch{}return!1},M2}var WG;function $Me(){if(WG)return UG;WG=1;var t=Pe(),e=xae();return t({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),UG}var KG={},GG;function DMe(){if(GG)return KG;GG=1;var t=Zt();return t("customMatcher"),KG}var YG={},QG;function AMe(){if(QG)return YG;QG=1;var t=Zt();return t("observable"),YG}var XG={},JG;function FMe(){if(JG)return XG;JG=1;var t=Pe(),e=bae();return t({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),XG}var ZG={},eY;function qMe(){if(eY)return ZG;eY=1;var t=Pe(),e=xae();return t({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),ZG}var tY={},rY;function LMe(){if(rY)return tY;rY=1;var t=Zt();return t("matcher"),tY}var nY={},iY;function BMe(){if(iY)return nY;iY=1;var t=Zt();return t("metadataKey"),nY}var sY={},oY;function zMe(){if(oY)return sY;oY=1;var t=Zt();return t("patternMatch"),sY}var aY={},lY;function VMe(){if(lY)return aY;lY=1;var t=Zt();return t("replaceAll"),aY}var $2,cY;function UMe(){if(cY)return $2;cY=1;var t=RMe();return MMe(),$Me(),DMe(),AMe(),FMe(),qMe(),LMe(),BMe(),zMe(),VMe(),$2=t,$2}var D2,uY;function HMe(){return uY||(uY=1,D2=UMe()),D2}var WMe=HMe(),Ag=ze(WMe),A2,dY;function KMe(){if(dY)return A2;dY=1,Ch(),X$(),Soe();var t=pb();return A2=t.f("iterator"),A2}var F2,hY;function GMe(){if(hY)return F2;hY=1;var t=KMe();return kh(),F2=t,F2}var q2,fY;function YMe(){if(fY)return q2;fY=1;var t=GMe();return q2=t,q2}var L2,pY;function QMe(){if(pY)return L2;pY=1;var t=YMe();return L2=t,L2}var B2,mY;function XMe(){return mY||(mY=1,B2=QMe()),B2}var JMe=XMe(),ZMe=ze(JMe);function Mp(t){"@babel/helpers - typeof";return Mp=typeof Ag=="function"&&typeof ZMe=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Ag=="function"&&e.constructor===Ag&&e!==Ag.prototype?"symbol":typeof e},Mp(t)}var z2,gY;function e$e(){if(gY)return z2;gY=1,_oe();var t=pb();return z2=t.f("toPrimitive"),z2}var V2,yY;function t$e(){if(yY)return V2;yY=1;var t=e$e();return V2=t,V2}var U2,vY;function r$e(){if(vY)return U2;vY=1;var t=t$e();return U2=t,U2}var H2,bY;function n$e(){if(bY)return H2;bY=1;var t=r$e();return H2=t,H2}var W2,xY;function i$e(){return xY||(xY=1,W2=n$e()),W2}var s$e=i$e(),o$e=ze(s$e);function a$e(t,e){if(Mp(t)!="object"||!t)return t;var r=t[o$e];if(r!==void 0){var n=r.call(t,e);if(Mp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function l$e(t){var e=a$e(t,"string");return Mp(e)=="symbol"?e:e+""}function mo(t,e,r){return(e=l$e(e))in t?TMe(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var wY={},K2,SY;function c$e(){if(SY)return K2;SY=1;var t=Ht(),e=nt(),r=at(),n=Wi(),i=Toe().trim,s=D$(),o=r("".charAt),a=t.parseFloat,l=t.Symbol,c=l&&l.iterator,d=1/a(s+"-0")!==-1/0||c&&!e(function(){a(Object(c))});return K2=d?function(f){var p=i(n(f)),m=a(p);return m===0&&o(p,0)==="-"?-0:m}:a,K2}var _Y;function u$e(){if(_Y)return wY;_Y=1;var t=Pe(),e=c$e();return t({global:!0,forced:parseFloat!==e},{parseFloat:e}),wY}var G2,EY;function d$e(){if(EY)return G2;EY=1,u$e();var t=Tt();return G2=t.parseFloat,G2}var Y2,NY;function h$e(){if(NY)return Y2;NY=1;var t=d$e();return Y2=t,Y2}var Q2,CY;function f$e(){return CY||(CY=1,Q2=h$e()),Q2}var p$e=f$e(),wae=ze(p$e),kY={},TY;function m$e(){if(TY)return kY;TY=1;var t=Pe(),e=nt(),r=P$().f,n=e(function(){return!Object.getOwnPropertyNames(1)});return t({target:"Object",stat:!0,forced:n},{getOwnPropertyNames:r}),kY}var X2,OY;function g$e(){if(OY)return X2;OY=1,m$e();var t=Tt(),e=t.Object;return X2=function(n){return e.getOwnPropertyNames(n)},X2}var J2,jY;function y$e(){if(jY)return J2;jY=1;var t=g$e();return J2=t,J2}var Z2,PY;function v$e(){return PY||(PY=1,Z2=y$e()),Z2}var b$e=v$e(),x$e=ze(b$e),eO,IY;function w$e(){if(IY)return eO;IY=1,boe();var t=Tt();return eO=t.Object.getOwnPropertySymbols,eO}var tO,RY;function S$e(){if(RY)return tO;RY=1;var t=w$e();return tO=t,tO}var rO,MY;function _$e(){return MY||(MY=1,rO=S$e()),rO}var E$e=_$e(),il=ze(E$e),nO={exports:{}},$Y={},DY;function N$e(){if(DY)return $Y;DY=1;var t=Pe(),e=nt(),r=ys(),n=ab().f,i=gr(),s=!i||e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getOwnPropertyDescriptor:function(a,l){return n(r(a),l)}}),$Y}var AY;function C$e(){if(AY)return nO.exports;AY=1,N$e();var t=Tt(),e=t.Object,r=nO.exports=function(i,s){return e.getOwnPropertyDescriptor(i,s)};return e.getOwnPropertyDescriptor.sham&&(r.sham=!0),nO.exports}var iO,FY;function k$e(){if(FY)return iO;FY=1;var t=C$e();return iO=t,iO}var sO,qY;function T$e(){return qY||(qY=1,sO=k$e()),sO}var O$e=T$e(),vl=ze(O$e),LY={},BY;function j$e(){if(BY)return LY;BY=1;var t=Pe(),e=gr(),r=tje(),n=ys(),i=ab(),s=db();return t({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(a){for(var l=n(a),c=i.f,d=r(l),h={},f=0,p,m;d.length>f;)m=c(l,p=d[f++]),m!==void 0&&s(h,p,m);return h}}),LY}var oO,zY;function P$e(){if(zY)return oO;zY=1,j$e();var t=Tt();return oO=t.Object.getOwnPropertyDescriptors,oO}var aO,VY;function I$e(){if(VY)return aO;VY=1;var t=P$e();return aO=t,aO}var lO,UY;function R$e(){return UY||(UY=1,lO=I$e()),lO}var M$e=R$e(),sl=ze(M$e),cO={exports:{}},HY={},WY;function $$e(){if(WY)return HY;WY=1;var t=Pe(),e=gr(),r=j$().f;return t({target:"Object",stat:!0,forced:Object.defineProperties!==r,sham:!e},{defineProperties:r}),HY}var KY;function D$e(){if(KY)return cO.exports;KY=1,$$e();var t=Tt(),e=t.Object,r=cO.exports=function(i,s){return e.defineProperties(i,s)};return e.defineProperties.sham&&(r.sham=!0),cO.exports}var uO,GY;function A$e(){if(GY)return uO;GY=1;var t=D$e();return uO=t,uO}var dO,YY;function F$e(){return YY||(YY=1,dO=A$e()),dO}var q$e=F$e(),wb=ze(q$e),hO,QY;function L$e(){return QY||(QY=1,hO=vae()),hO}var B$e=L$e(),Sb=ze(B$e);function Z$(t,e){const r=["node","edge","label"];let n=!0;const i=la(e,"chosen");if(typeof i=="boolean")n=i;else if(typeof i=="object"){if(Nt(r).call(r,t)===-1)throw new Error("choosify: subOption '"+t+"' should be one of '"+r.join("', '")+"'");const s=la(e,["chosen",t]);(typeof s=="boolean"||typeof s=="function")&&(n=s)}return n}function qI(t,e,r){if(t.width<=0||t.height<=0)return!1;if(r!==void 0){const s={x:e.x-r.x,y:e.y-r.y};if(r.angle!==0){const o=-r.angle;e={x:Math.cos(o)*s.x-Math.sin(o)*s.y,y:Math.sin(o)*s.x+Math.cos(o)*s.y}}else e=s}const n=t.x+t.width,i=t.y+t.width;return t.left<e.x&&n>e.x&&t.top<e.y&&i>e.y}function Qv(t){return typeof t=="string"&&t!==""}function Sae(t,e,r,n){let i=n.x,s=n.y;if(typeof n.distanceToBorder=="function"){const o=n.distanceToBorder(t,e),a=Math.sin(e)*o,l=Math.cos(e)*o;l===o?(i+=o,s=n.y):a===o?(i=n.x,s-=o):(i+=l,s-=a)}else n.shape.width>n.shape.height?(i=n.x+n.shape.width*.5,s=n.y-r):(i=n.x+r,s=n.y-n.shape.height*.5);return{x:i,y:s}}var fO,XY;function z$e(){if(XY)return fO;XY=1,Ch();var t=ln();return fO=t("Array","values"),fO}var pO,JY;function V$e(){if(JY)return pO;JY=1;var t=z$e();return pO=t,pO}var mO,ZY;function U$e(){if(ZY)return mO;ZY=1,kh();var t=Eh(),e=an(),r=Tr(),n=V$e(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return mO=function(o){var a=o.values;return o===i||r(i,o)&&a===i.values||e(s,t(o))?n:a},mO}var gO,eQ;function H$e(){return eQ||(eQ=1,gO=U$e()),gO}var W$e=H$e(),_ae=ze(W$e);class K$e{constructor(e){this.measureText=e,this.current=0,this.width=0,this.height=0,this.lines=[]}_add(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"normal";this.lines[e]===void 0&&(this.lines[e]={width:0,height:0,blocks:[]});let i=r;(r===void 0||r==="")&&(i=" ");const s=this.measureText(i,n),o=Sr({},_ae(s));o.text=r,o.width=s.width,o.mod=n,(r===void 0||r==="")&&(o.width=0),this.lines[e].blocks.push(o),this.lines[e].width+=o.width}curWidth(){const e=this.lines[this.current];return e===void 0?0:e.width}append(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,r)}newLine(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,r),this.current++}determineLineHeights(){for(let e=0;e<this.lines.length;e++){const r=this.lines[e];let n=0;if(r.blocks!==void 0)for(let i=0;i<r.blocks.length;i++){const s=r.blocks[i];n<s.height&&(n=s.height)}r.height=n}}determineLabelSize(){let e=0,r=0;for(let n=0;n<this.lines.length;n++){const i=this.lines[n];i.width>e&&(e=i.width),r+=i.height}this.width=e,this.height=r}removeEmptyBlocks(){const e=[];for(let r=0;r<this.lines.length;r++){const n=this.lines[r];if(n.blocks.length===0||r===this.lines.length-1&&n.width===0)continue;const i={};Sr(i,n),i.blocks=[];let s;const o=[];for(let a=0;a<n.blocks.length;a++){const l=n.blocks[a];l.width!==0?o.push(l):s===void 0&&(s=l)}o.length===0&&s!==void 0&&o.push(s),i.blocks=o,e.push(i)}return e}finalize(){this.determineLineHeights(),this.determineLabelSize();const e=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:e}}}const G$e={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/_/,"`":/`/,afterBold:/[^*]/,afterItal:/[^_]/,afterMono:/[^`]/};class tQ{constructor(e){this.text=e,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}mod(){return this.modStack.length===0?"normal":this.modStack[0]}modName(){if(this.modStack.length===0)return"normal";if(this.modStack[0]==="mono")return"mono";if(this.bold&&this.ital)return"boldital";if(this.bold)return"bold";if(this.ital)return"ital"}emitBlock(){this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}add(e){e===" "&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1),e!=" "&&(this.buffer+=e)}parseWS(e){return/[ \t]/.test(e)?(this.mono?this.add(e):this.spacing=!0,!0):!1}setTag(e){this.emitBlock(),this[e]=!0,this.modStack.unshift(e)}unsetTag(e){this.emitBlock(),this[e]=!1,this.modStack.shift()}parseStartTag(e,r){return!this.mono&&!this[e]&&this.match(r)?(this.setTag(e),!0):!1}match(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const[n,i]=this.prepareRegExp(e),s=n.test(this.text.substr(this.position,i));return s&&r&&(this.position+=i-1),s}parseEndTag(e,r,n){let i=this.mod()===e;return e==="mono"?i=i&&this.mono:i=i&&!this.mono,i&&this.match(r)?(n!==void 0?(this.position===this.text.length-1||this.match(n,!1))&&this.unsetTag(e):this.unsetTag(e),!0):!1}replace(e,r){return this.match(e)?(this.add(r),this.position+=length-1,!0):!1}prepareRegExp(e){let r,n;if(e instanceof RegExp)n=e,r=1;else{const i=G$e[e];i!==void 0?n=i:n=new RegExp(e),r=e.length}return[n,r]}}class Y$e{constructor(e,r,n,i){this.ctx=e,this.parent=r,this.selected=n,this.hover=i;const s=(o,a)=>{if(o===void 0)return 0;const l=this.parent.getFormattingValues(e,n,i,a);let c=0;return o!==""&&(c=this.ctx.measureText(o).width),{width:c,values:l}};this.lines=new K$e(s)}process(e){if(!Qv(e))return this.lines.finalize();const r=this.parent.fontOptions;e=e.replace(/\r\n/g,`
`),e=e.replace(/\r/g,`
`);const n=String(e).split(`
`),i=n.length;if(r.multi)for(let s=0;s<i;s++){const o=this.splitBlocks(n[s],r.multi);if(o!==void 0){if(o.length===0){this.lines.newLine("");continue}if(r.maxWdt>0)for(let a=0;a<o.length;a++){const l=o[a].mod,c=o[a].text;this.splitStringIntoLines(c,l,!0)}else for(let a=0;a<o.length;a++){const l=o[a].mod,c=o[a].text;this.lines.append(c,l)}this.lines.newLine()}}else if(r.maxWdt>0)for(let s=0;s<i;s++)this.splitStringIntoLines(n[s]);else for(let s=0;s<i;s++)this.lines.newLine(n[s]);return this.lines.finalize()}decodeMarkupSystem(e){let r="none";return e==="markdown"||e==="md"?r="markdown":(e===!0||e==="html")&&(r="html"),r}splitHtmlBlocks(e){const r=new tQ(e),n=i=>/&/.test(i)?(r.replace(r.text,"&lt;","<")||r.replace(r.text,"&amp;","&")||r.add("&"),!0):!1;for(;r.position<r.text.length;){const i=r.text.charAt(r.position);r.parseWS(i)||/</.test(i)&&(r.parseStartTag("bold","<b>")||r.parseStartTag("ital","<i>")||r.parseStartTag("mono","<code>")||r.parseEndTag("bold","</b>")||r.parseEndTag("ital","</i>")||r.parseEndTag("mono","</code>"))||n(i)||r.add(i),r.position++}return r.emitBlock(),r.blocks}splitMarkdownBlocks(e){const r=new tQ(e);let n=!0;const i=s=>/\\/.test(s)?(r.position<this.text.length+1&&(r.position++,s=this.text.charAt(r.position),/ \t/.test(s)?r.spacing=!0:(r.add(s),n=!1)),!0):!1;for(;r.position<r.text.length;){const s=r.text.charAt(r.position);r.parseWS(s)||i(s)||(n||r.spacing)&&(r.parseStartTag("bold","*")||r.parseStartTag("ital","_")||r.parseStartTag("mono","`"))||r.parseEndTag("bold","*","afterBold")||r.parseEndTag("ital","_","afterItal")||r.parseEndTag("mono","`","afterMono")||(r.add(s),n=!1),r.position++}return r.emitBlock(),r.blocks}splitBlocks(e,r){const n=this.decodeMarkupSystem(r);if(n==="none")return[{text:e,mod:"normal"}];if(n==="markdown")return this.splitMarkdownBlocks(e);if(n==="html")return this.splitHtmlBlocks(e)}overMaxWidth(e){const r=this.ctx.measureText(e).width;return this.lines.curWidth()+r>this.parent.fontOptions.maxWdt}getLongestFit(e){let r="",n=0;for(;n<e.length;){const s=r+(r===""?"":" ")+e[n];if(this.overMaxWidth(s))break;r=s,n++}return n}getLongestFitWord(e){let r=0;for(;r<e.length&&!this.overMaxWidth(js(e).call(e,0,r));)r++;return r}splitStringIntoLines(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.parent.getFormattingValues(this.ctx,this.selected,this.hover,r),e=e.replace(/^( +)/g,"$1\r"),e=e.replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r");let i=e.split("\r");for(;i.length>0;){let s=this.getLongestFit(i);if(s===0){const o=i[0],a=this.getLongestFitWord(o);this.lines.newLine(js(o).call(o,0,a),r),i[0]=js(o).call(o,a)}else{let o=s;i[s-1]===" "?s--:i[o]===" "&&o++;const a=js(i).call(i,0,s).join("");s==i.length&&n?this.lines.append(a,r):this.lines.newLine(a,r),i=js(i).call(i,o)}}}}const rf=["bold","ital","boldital","mono"];class nd{constructor(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.body=e,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(r),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=n}setOptions(e){if(this.elementOptions=e,this.initFontOptions(e.font),Qv(e.label)?this.labelDirty=!0:e.label=void 0,e.font!==void 0&&e.font!==null){if(typeof e.font=="string")this.baseSize=this.fontOptions.size;else if(typeof e.font=="object"){const r=e.font.size;r!==void 0&&(this.baseSize=r)}}}initFontOptions(e){if(Ze(rf,r=>{this.fontOptions[r]={}}),nd.parseFontString(this.fontOptions,e)){this.fontOptions.vadjust=0;return}Ze(e,(r,n)=>{r!=null&&typeof r!="object"&&(this.fontOptions[n]=r)})}static parseFontString(e,r){if(!r||typeof r!="string")return!1;const n=r.split(" ");return e.size=+n[0].replace("px",""),e.face=n[1],e.color=n[2],!0}constrain(e){const r={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},n=la(e,"widthConstraint");if(typeof n=="number")r.maxWdt=Number(n),r.minWdt=Number(n);else if(typeof n=="object"){const s=la(e,["widthConstraint","maximum"]);typeof s=="number"&&(r.maxWdt=Number(s));const o=la(e,["widthConstraint","minimum"]);typeof o=="number"&&(r.minWdt=Number(o))}const i=la(e,"heightConstraint");if(typeof i=="number")r.minHgt=Number(i);else if(typeof i=="object"){const s=la(e,["heightConstraint","minimum"]);typeof s=="number"&&(r.minHgt=Number(s));const o=la(e,["heightConstraint","valign"]);typeof o=="string"&&(o==="top"||o==="bottom")&&(r.valign=o)}return r}update(e,r){this.setOptions(e,!0),this.propagateFonts(r),$t(this.fontOptions,this.constrain(r)),this.fontOptions.chooser=Z$("label",r)}adjustSizes(e){const r=e?e.right+e.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=r,this.fontOptions.minWdt-=r);const n=e?e.top+e.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=n)}addFontOptionsToPile(e,r){for(let n=0;n<r.length;++n)this.addFontToPile(e,r[n])}addFontToPile(e,r){if(r===void 0||r.font===void 0||r.font===null)return;const n=r.font;e.push(n)}getBasicOptions(e){const r={};for(let n=0;n<e.length;++n){let i=e[n];const s={};nd.parseFontString(s,i)&&(i=s),Ze(i,(o,a)=>{o!==void 0&&(Object.prototype.hasOwnProperty.call(r,a)||(Nt(rf).call(rf,a)!==-1?r[a]={}:r[a]=o))})}return r}getFontOption(e,r,n){let i;for(let s=0;s<e.length;++s){const o=e[s];if(Object.prototype.hasOwnProperty.call(o,r)){if(i=o[r],i==null)continue;const a={};if(nd.parseFontString(a,i)&&(i=a),Object.prototype.hasOwnProperty.call(i,n))return i[n]}}if(Object.prototype.hasOwnProperty.call(this.fontOptions,n))return this.fontOptions[n];throw new Error("Did not find value for multi-font for property: '"+n+"'")}getFontOptions(e,r){const n={},i=["color","size","face","mod","vadjust"];for(let s=0;s<i.length;++s){const o=i[s];n[o]=this.getFontOption(e,r,o)}return n}propagateFonts(e){const r=[];this.addFontOptionsToPile(r,e),this.fontOptions=this.getBasicOptions(r);for(let n=0;n<rf.length;++n){const i=rf[n],s=this.fontOptions[i],o=this.getFontOptions(r,i);Ze(o,(a,l)=>{s[l]=a}),s.size=Number(s.size),s.vadjust=Number(s.vadjust)}}draw(e,r,n,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";if(this.elementOptions.label===void 0)return;let a=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&a<this.elementOptions.scaling.label.drawThreshold-1||(a>=this.elementOptions.scaling.label.maxVisible&&(a=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(e,i,s,r,n,o),this._drawBackground(e),this._drawText(e,r,this.size.yLine,o,a))}_drawBackground(e){if(this.fontOptions.background!==void 0&&this.fontOptions.background!=="none"){e.fillStyle=this.fontOptions.background;const r=this.getSize();e.fillRect(r.left,r.top,r.width,r.height)}}_drawText(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"middle",s=arguments.length>4?arguments[4]:void 0;[r,n]=this._setAlignment(e,r,n,i),e.textAlign="left",r=r-this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&(this.fontOptions.valign==="top"&&(n-=(this.size.height-this.size.labelHeight)/2),this.fontOptions.valign==="bottom"&&(n+=(this.size.height-this.size.labelHeight)/2));for(let o=0;o<this.lineCount;o++){const a=this.lines[o];if(a&&a.blocks){let l=0;this.isEdgeLabel||this.fontOptions.align==="center"?l+=(this.size.width-a.width)/2:this.fontOptions.align==="right"&&(l+=this.size.width-a.width);for(let c=0;c<a.blocks.length;c++){const d=a.blocks[c];e.font=d.font;const[h,f]=this._getColor(d.color,s,d.strokeColor);d.strokeWidth>0&&(e.lineWidth=d.strokeWidth,e.strokeStyle=f,e.lineJoin="round"),e.fillStyle=h,d.strokeWidth>0&&e.strokeText(d.text,r+l,n+d.vadjust),e.fillText(d.text,r+l,n+d.vadjust),l+=d.width}n+=a.height}}}_setAlignment(e,r,n,i){if(this.isEdgeLabel&&this.fontOptions.align!=="horizontal"&&this.pointToSelf===!1){r=0,n=0;const s=2;this.fontOptions.align==="top"?(e.textBaseline="alphabetic",n-=2*s):this.fontOptions.align==="bottom"?(e.textBaseline="hanging",n+=2*s):e.textBaseline="middle"}else e.textBaseline=i;return[r,n]}_getColor(e,r,n){let i=e||"#000000",s=n||"#ffffff";if(r<=this.elementOptions.scaling.label.drawThreshold){const o=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-r)));i=Ri(i,o),s=Ri(s,o)}return[i,s]}getTextSize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this._processLabel(e,r,n),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}getSize(){let r=this.size.left,n=this.size.top-.5*2;if(this.isEdgeLabel){const s=-this.size.width*.5;switch(this.fontOptions.align){case"middle":r=s,n=-this.size.height*.5;break;case"top":r=s,n=-(this.size.height+2);break;case"bottom":r=s,n=2;break}}return{left:r,top:n,width:this.size.width,height:this.size.height}}calculateLabelSize(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";this._processLabel(e,r,n),this.size.left=i-this.size.width*.5,this.size.top=s-this.size.height*.5,this.size.yLine=s+(1-this.lineCount)*.5*this.fontOptions.size,o==="hanging"&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}getFormattingValues(e,r,n,i){const s=function(l,c,d){return c==="normal"?d==="mod"?"":l[d]:l[c][d]!==void 0?l[c][d]:l[d]},o={color:s(this.fontOptions,i,"color"),size:s(this.fontOptions,i,"size"),face:s(this.fontOptions,i,"face"),mod:s(this.fontOptions,i,"mod"),vadjust:s(this.fontOptions,i,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(r||n)&&(i==="normal"&&this.fontOptions.chooser===!0&&this.elementOptions.labelHighlightBold?o.mod="bold":typeof this.fontOptions.chooser=="function"&&this.fontOptions.chooser(o,this.elementOptions.id,r,n));let a="";return o.mod!==void 0&&o.mod!==""&&(a+=o.mod+" "),a+=o.size+"px "+o.face,e.font=a.replace(/"/g,""),o.font=e.font,o.height=o.size,o}differentState(e,r){return e!==this.selectedState||r!==this.hoverState}_processLabelText(e,r,n,i){return new Y$e(e,this,r,n).process(i)}_processLabel(e,r,n){if(this.labelDirty===!1&&!this.differentState(r,n))return;const i=this._processLabelText(e,r,n,this.elementOptions.label);this.fontOptions.minWdt>0&&i.width<this.fontOptions.minWdt&&(i.width=this.fontOptions.minWdt),this.size.labelHeight=i.height,this.fontOptions.minHgt>0&&i.height<this.fontOptions.minHgt&&(i.height=this.fontOptions.minHgt),this.lines=i.lines,this.lineCount=i.lines.length,this.size.width=i.width,this.size.height=i.height,this.selectedState=r,this.hoverState=n,this.labelDirty=!1}visible(){return!(this.size.width===0||this.size.height===0||this.elementOptions.label===void 0||this.fontOptions.size*this.body.view.scale<this.elementOptions.scaling.label.drawThreshold-1)}}class ou{constructor(e,r,n){this.body=r,this.labelModule=n,this.setOptions(e),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}setOptions(e){this.options=e}_setMargins(e){this.margin={},this.options.margin&&(typeof this.options.margin=="object"?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),e.adjustSizes(this.margin)}_distanceToBorder(e,r){const n=this.options.borderWidth;return e&&this.resize(e),Math.min(Math.abs(this.width/2/Math.cos(r)),Math.abs(this.height/2/Math.sin(r)))+n}enableShadow(e,r){r.shadow&&(e.shadowColor=r.shadowColor,e.shadowBlur=r.shadowSize,e.shadowOffsetX=r.shadowX,e.shadowOffsetY=r.shadowY)}disableShadow(e,r){r.shadow&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}enableBorderDashes(e,r){if(r.borderDashes!==!1)if(e.setLineDash!==void 0){let n=r.borderDashes;n===!0&&(n=[5,15]),e.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,r.borderDashes=!1}disableBorderDashes(e,r){r.borderDashes!==!1&&(e.setLineDash!==void 0?e.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,r.borderDashes=!1))}needsRefresh(e,r){return this.refreshNeeded===!0?(this.refreshNeeded=!1,!0):this.width===void 0||this.labelModule.differentState(e,r)}initContextForDraw(e,r){const n=r.borderWidth/this.body.view.scale;e.lineWidth=Math.min(this.width,n),e.strokeStyle=r.borderColor,e.fillStyle=r.color}performStroke(e,r){const n=r.borderWidth/this.body.view.scale;e.save(),n>0&&(this.enableBorderDashes(e,r),e.stroke(),this.disableBorderDashes(e,r)),e.restore()}performFill(e,r){e.save(),e.fillStyle=r.color,this.enableShadow(e,r),Rm(e).call(e),this.disableShadow(e,r),e.restore(),this.performStroke(e,r)}_addBoundingBoxMargin(e){this.boundingBox.left-=e,this.boundingBox.top-=e,this.boundingBox.bottom+=e,this.boundingBox.right+=e}_updateBoundingBox(e,r,n,i,s){n!==void 0&&this.resize(n,i,s),this.left=e-this.width/2,this.top=r-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}updateBoundingBox(e,r,n,i,s){this._updateBoundingBox(e,r,n,i,s)}getDimensionsFromLabel(e,r,n){this.textSize=this.labelModule.getTextSize(e,r,n);let i=this.textSize.width,s=this.textSize.height;const o=14;return i===0&&(i=o,s=o),{width:i,height:s}}}let Q$e=class extends ou{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n);this.width=i.width+this.margin.right+this.margin.left,this.height=i.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.initContextForDraw(e,o),loe(e,this.left,this.top,this.width,this.height,o.borderRadius),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s)}updateBoundingBox(e,r,n,i,s){this._updateBoundingBox(e,r,n,i,s);const o=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(o)}distanceToBorder(e,r){e&&this.resize(e);const n=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(r)),Math.abs(this.height/2/Math.sin(r)))+n}};class eD extends ou{constructor(e,r,n){super(e,r,n),this.labelOffset=0,this.selected=!1}setOptions(e,r,n){this.options=e,r===void 0&&n===void 0||this.setImages(r,n)}setImages(e,r){r&&this.selected?(this.imageObj=r,this.imageObjAlt=e):(this.imageObj=e,this.imageObjAlt=r)}switchImages(e){const r=e&&!this.selected||!e&&this.selected;if(this.selected=e,this.imageObjAlt!==void 0&&r){const n=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=n}}_getImagePadding(){const e={top:0,right:0,bottom:0,left:0};if(this.options.imagePadding){const r=this.options.imagePadding;typeof r=="object"?(e.top=r.top,e.right=r.right,e.bottom=r.bottom,e.left=r.left):(e.top=r,e.right=r,e.bottom=r,e.left=r)}return e}_resizeImage(){let e,r;if(this.options.shapeProperties.useImageSize===!1){let n=1,i=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?n=this.imageObj.width/this.imageObj.height:i=this.imageObj.height/this.imageObj.width),e=this.options.size*2*n,r=this.options.size*2*i}else{const n=this._getImagePadding();e=this.imageObj.width+n.left+n.right,r=this.imageObj.height+n.top+n.bottom}this.width=e,this.height=r,this.radius=.5*this.width}_drawRawCircle(e,r,n,i){this.initContextForDraw(e,i),k$(e,r,n,i.size),this.performFill(e,i)}_drawImageAtPosition(e,r){if(this.imageObj.width!=0){e.globalAlpha=r.opacity!==void 0?r.opacity:1,this.enableShadow(e,r);let n=1;this.options.shapeProperties.interpolation===!0&&(n=this.imageObj.width/this.width/this.body.view.scale);const i=this._getImagePadding(),s=this.left+i.left,o=this.top+i.top,a=this.width-i.left-i.right,l=this.height-i.top-i.bottom;this.imageObj.drawImageAtPosition(e,n,s,o,a,l),this.disableShadow(e,r)}}_drawImageLabel(e,r,n,i,s){let o=0;if(this.height!==void 0){o=this.height*.5;const l=this.labelModule.getTextSize(e,i,s);l.lineCount>=1&&(o+=l.height/2)}const a=n+o;this.options.label&&(this.labelOffset=o),this.labelModule.draw(e,r,a,i,s,"hanging")}}let X$e=class extends eD{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n),s=Math.max(i.width+this.margin.right+this.margin.left,i.height+this.margin.top+this.margin.bottom);this.options.size=s/2,this.width=s,this.height=s,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this._drawRawCircle(e,r,n,o),this.updateBoundingBox(r,n),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,n,i,s)}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size}distanceToBorder(e){return e&&this.resize(e),this.width*.5}};class J$e extends eD{constructor(e,r,n,i,s){super(e,r,n),this.setImages(i,s)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0){const s=this.options.size*2;this.width=s,this.height=s,this.radius=.5*this.width;return}this.needsRefresh(r,n)&&this._resizeImage()}draw(e,r,n,i,s,o){this.switchImages(i),this.resize();let a=r,l=n;this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=r,this.top=n,a+=this.width/2,l+=this.height/2):(this.left=r-this.width/2,this.top=n-this.height/2),this._drawRawCircle(e,a,l,o),e.save(),e.clip(),this._drawImageAtPosition(e,o),e.restore(),this._drawImageLabel(e,a,l,i,s),this.updateBoundingBox(r,n)}updateBoundingBox(e,r){this.options.shapeProperties.coordinateOrigin==="top-left"?(this.boundingBox.top=r,this.boundingBox.left=e,this.boundingBox.right=e+this.options.size*2,this.boundingBox.bottom=r+this.options.size*2):(this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size),this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}distanceToBorder(e){return e&&this.resize(e),this.width*.5}}class bl extends ou{constructor(e,r,n){super(e,r,n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{size:this.options.size};if(this.needsRefresh(r,n)){var s,o;this.labelModule.getTextSize(e,r,n);const a=2*i.size;this.width=(s=this.customSizeWidth)!==null&&s!==void 0?s:a,this.height=(o=this.customSizeHeight)!==null&&o!==void 0?o:a,this.radius=.5*this.width}}_drawShape(e,r,n,i,s,o,a,l){return this.resize(e,o,a,l),this.left=i-this.width/2,this.top=s-this.height/2,this.initContextForDraw(e,l),pOe(r)(e,i,s,l.size),this.performFill(e,l),this.options.icon!==void 0&&this.options.icon.code!==void 0&&(e.font=(o?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",e.fillText(this.options.icon.code,i,s)),{drawExternalLabel:()=>{if(this.options.label!==void 0){this.labelModule.calculateLabelSize(e,o,a,i,s,"hanging");const c=s+.5*this.height+.5*this.labelModule.size.height;this.labelModule.draw(e,i,c,o,a,"hanging")}this.updateBoundingBox(i,s)}}}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}function rQ(t,e){var r=ar(t);if(il){var n=il(t);e&&(n=Un(n).call(n,function(i){return vl(t,i).enumerable})),r.push.apply(r,n)}return r}function Z$e(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?jt(r=rQ(Object(i),!0)).call(r,function(s){mo(t,s,i[s])}):sl?wb(t,sl(i)):jt(n=rQ(Object(i))).call(n,function(s){Sb(t,s,vl(i,s))})}return t}class eDe extends bl{constructor(e,r,n,i){super(e,r,n,i),this.ctxRenderer=i}draw(e,r,n,i,s,o){this.resize(e,i,s,o),this.left=r-this.width/2,this.top=n-this.height/2,e.save();const a=this.ctxRenderer({ctx:e,id:this.options.id,x:r,y:n,state:{selected:i,hover:s},style:Z$e({},o),label:this.options.label});if(a.drawNode!=null&&a.drawNode(),e.restore(),a.drawExternalLabel){const l=a.drawExternalLabel;a.drawExternalLabel=()=>{e.save(),l(),e.restore()}}return a.nodeDimensions&&(this.customSizeWidth=a.nodeDimensions.width,this.customSizeHeight=a.nodeDimensions.height),a}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class tDe extends ou{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){if(this.needsRefresh(r,n)){const s=this.getDimensionsFromLabel(e,r,n).width+this.margin.right+this.margin.left;this.width=s,this.height=s,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.initContextForDraw(e,o),coe(e,r-this.width/2,n-this.height/2,this.width,this.height),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let rDe=class extends bl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"diamond",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class nDe extends bl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"circle",2,r,n,i,s,o)}distanceToBorder(e){return e&&this.resize(e),this.options.size}}class nQ extends ou{constructor(e,r,n){super(e,r,n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n);this.height=i.height*2,this.width=i.width+i.height,this.radius=.5*this.width}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width*.5,this.top=n-this.height*.5,this.initContextForDraw(e,o),OI(e,this.left,this.top,this.width,this.height),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,r,n,i,s)}distanceToBorder(e,r){e&&this.resize(e);const n=this.width*.5,i=this.height*.5,s=Math.sin(r)*n,o=Math.cos(r)*i;return n*i/Math.sqrt(s*s+o*o)}}class iDe extends ou{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){this.needsRefresh(r,n)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}draw(e,r,n,i,s,o){return this.resize(e,i,s),this.options.icon.size=this.options.icon.size||50,this.left=r-this.width/2,this.top=n-this.height/2,this._icon(e,r,n,i,s,o),{drawExternalLabel:()=>{this.options.label!==void 0&&this.labelModule.draw(e,this.left+this.iconSize.width/2+this.margin.left,n+this.height/2+5,i),this.updateBoundingBox(r,n)}}}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.icon.size*.5,this.boundingBox.left=e-this.options.icon.size*.5,this.boundingBox.right=e+this.options.icon.size*.5,this.boundingBox.bottom=r+this.options.icon.size*.5,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+5))}_icon(e,r,n,i,s,o){const a=Number(this.options.icon.size);this.options.icon.code!==void 0?(e.font=[this.options.icon.weight!=null?this.options.icon.weight:i?"bold":"",(this.options.icon.weight!=null&&i?5:0)+a+"px",this.options.icon.face].join(" "),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",this.enableShadow(e,o),e.fillText(this.options.icon.code,r,n),this.disableShadow(e,o)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let sDe=class extends eD{constructor(e,r,n,i,s){super(e,r,n),this.setImages(i,s)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0){const s=this.options.size*2;this.width=s,this.height=s;return}this.needsRefresh(r,n)&&this._resizeImage()}draw(e,r,n,i,s,o){e.save(),this.switchImages(i),this.resize();let a=r,l=n;if(this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=r,this.top=n,a+=this.width/2,l+=this.height/2):(this.left=r-this.width/2,this.top=n-this.height/2),this.options.shapeProperties.useBorderWithImage===!0){const c=this.options.borderWidth,d=this.options.borderWidthSelected||2*this.options.borderWidth,h=(i?d:c)/this.body.view.scale;e.lineWidth=Math.min(this.width,h),e.beginPath();let f=i?this.options.color.highlight.border:s?this.options.color.hover.border:this.options.color.border,p=i?this.options.color.highlight.background:s?this.options.color.hover.background:this.options.color.background;o.opacity!==void 0&&(f=Ri(f,o.opacity),p=Ri(p,o.opacity)),e.strokeStyle=f,e.fillStyle=p,e.rect(this.left-.5*e.lineWidth,this.top-.5*e.lineWidth,this.width+e.lineWidth,this.height+e.lineWidth),Rm(e).call(e),this.performStroke(e,o),e.closePath()}this._drawImageAtPosition(e,o),this._drawImageLabel(e,a,l,i,s),this.updateBoundingBox(r,n),e.restore()}updateBoundingBox(e,r){this.resize(),this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=e,this.top=r):(this.left=e-this.width/2,this.top=r-this.height/2),this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class oDe extends bl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"square",2,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class aDe extends bl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"hexagon",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class lDe extends bl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"star",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class cDe extends ou{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){this.needsRefresh(r,n)&&(this.textSize=this.labelModule.getTextSize(e,r,n),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.enableShadow(e,o),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s),this.disableShadow(e,o),this.updateBoundingBox(r,n,e,i,s)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let uDe=class extends bl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"triangle",3,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class dDe extends bl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"triangleDown",3,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}function iQ(t,e){var r=ar(t);if(il){var n=il(t);e&&(n=Un(n).call(n,function(i){return vl(t,i).enumerable})),r.push.apply(r,n)}return r}function sQ(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?jt(r=iQ(Object(i),!0)).call(r,function(s){mo(t,s,i[s])}):sl?wb(t,sl(i)):jt(n=iQ(Object(i))).call(n,function(s){Sb(t,s,vl(i,s))})}return t}class Vt{constructor(e,r,n,i,s,o){this.options=Qa(s),this.globalOptions=s,this.defaultOptions=o,this.body=r,this.edges=[],this.id=void 0,this.imagelist=n,this.grouplist=i,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new nd(this.body,this.options,!1),this.setOptions(e)}attachEdge(e){var r;Nt(r=this.edges).call(r,e)===-1&&this.edges.push(e)}detachEdge(e){var r;const n=Nt(r=this.edges).call(r,e);if(n!=-1){var i;_o(i=this.edges).call(i,n,1)}}setOptions(e){const r=this.options.shape;if(!e)return;if(typeof e.color<"u"&&(this._localColor=e.color),e.id!==void 0&&(this.id=e.id),this.id===void 0)throw new Error("Node must have an id");Vt.checkMass(e,this.id),e.x!==void 0&&(e.x===null?(this.x=void 0,this.predefinedPosition=!1):(this.x=is(e.x),this.predefinedPosition=!0)),e.y!==void 0&&(e.y===null?(this.y=void 0,this.predefinedPosition=!1):(this.y=is(e.y),this.predefinedPosition=!0)),e.size!==void 0&&(this.baseSize=e.size),e.value!==void 0&&(e.value=wae(e.value)),Vt.parseOptions(this.options,e,!0,this.globalOptions,this.grouplist);const n=[e,this.options,this.defaultOptions];return this.chooser=Z$("node",n),this._load_images(),this.updateLabelModule(e),e.opacity!==void 0&&Vt.checkOpacity(e.opacity)&&(this.options.opacity=e.opacity),this.updateShape(r),e.hidden!==void 0||e.physics!==void 0}_load_images(){if((this.options.shape==="circularImage"||this.options.shape==="image")&&this.options.image===void 0)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(this.options.image!==void 0){if(this.imagelist===void 0)throw new Error("Internal Error: No images provided");if(typeof this.options.image=="string")this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(this.options.image.unselected===void 0)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),this.options.image.selected!==void 0?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}static checkOpacity(e){return 0<=e&&e<=1}static checkCoordinateOrigin(e){return e===void 0||e==="center"||e==="top-left"}static updateGroupOptions(e,r,n){var i;if(n===void 0)return;const s=e.group;if(r!==void 0&&r.group!==void 0&&s!==r.group)throw new Error("updateGroupOptions: group values in options don't match.");if(!(typeof s=="number"||typeof s=="string"&&s!=""))return;const a=n.get(s);a.opacity!==void 0&&r.opacity===void 0&&(Vt.checkOpacity(a.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+a.opacity),a.opacity=void 0));const l=Un(i=x$e(r)).call(i,c=>r[c]!=null);l.push("font"),Gv(l,e,a),e.color=MI(e.color)}static parseOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4?arguments[4]:void 0;if(Gv(["color","fixed","shadow"],e,r,n),Vt.checkMass(r),e.opacity!==void 0&&(Vt.checkOpacity(e.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity),e.opacity=void 0)),r.opacity!==void 0&&(Vt.checkOpacity(r.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+r.opacity),r.opacity=void 0)),r.shapeProperties&&!Vt.checkCoordinateOrigin(r.shapeProperties.coordinateOrigin)&&console.error("Invalid option for node coordinateOrigin, found: "+r.shapeProperties.coordinateOrigin),Oi(e,r,"shadow",i),r.color!==void 0&&r.color!==null){const a=MI(r.color);rae(e.color,a)}else n===!0&&r.color===null&&(e.color=Qa(i.color));r.fixed!==void 0&&r.fixed!==null&&(typeof r.fixed=="boolean"?(e.fixed.x=r.fixed,e.fixed.y=r.fixed):(r.fixed.x!==void 0&&typeof r.fixed.x=="boolean"&&(e.fixed.x=r.fixed.x),r.fixed.y!==void 0&&typeof r.fixed.y=="boolean"&&(e.fixed.y=r.fixed.y))),n===!0&&r.font===null&&(e.font=Qa(i.font)),Vt.updateGroupOptions(e,r,s),r.scaling!==void 0&&Oi(e.scaling,r.scaling,"label",i.scaling)}getFormattingValues(){const e={color:this.options.color.background,opacity:this.options.opacity,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};if(this.selected||this.hover?this.chooser===!0?this.selected?(this.options.borderWidthSelected!=null?e.borderWidth=this.options.borderWidthSelected:e.borderWidth*=2,e.color=this.options.color.highlight.background,e.borderColor=this.options.color.highlight.border,e.shadow=this.options.shadow.enabled):this.hover&&(e.color=this.options.color.hover.background,e.borderColor=this.options.color.hover.border,e.shadow=this.options.shadow.enabled):typeof this.chooser=="function"&&(this.chooser(e,this.options.id,this.selected,this.hover),e.shadow===!1&&(e.shadowColor!==this.options.shadow.color||e.shadowSize!==this.options.shadow.size||e.shadowX!==this.options.shadow.x||e.shadowY!==this.options.shadow.y)&&(e.shadow=!0)):e.shadow=this.options.shadow.enabled,this.options.opacity!==void 0){const r=this.options.opacity;e.borderColor=Ri(e.borderColor,r),e.color=Ri(e.color,r),e.shadowColor=Ri(e.shadowColor,r)}return e}updateLabelModule(e){(this.options.label===void 0||this.options.label===null)&&(this.options.label=""),Vt.updateGroupOptions(this.options,sQ(sQ({},e),{},{color:e&&e.color||this._localColor||void 0}),this.grouplist);const r=this.grouplist.get(this.options.group,!1),n=[e,this.options,r,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,n),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}updateShape(e){if(e===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new Q$e(this.options,this.body,this.labelModule);break;case"circle":this.shape=new X$e(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new J$e(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"custom":this.shape=new eDe(this.options,this.body,this.labelModule,this.options.ctxRenderer);break;case"database":this.shape=new tDe(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new rDe(this.options,this.body,this.labelModule);break;case"dot":this.shape=new nDe(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new nQ(this.options,this.body,this.labelModule);break;case"icon":this.shape=new iDe(this.options,this.body,this.labelModule);break;case"image":this.shape=new sDe(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new oDe(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new aDe(this.options,this.body,this.labelModule);break;case"star":this.shape=new lDe(this.options,this.body,this.labelModule);break;case"text":this.shape=new cDe(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new uDe(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new dDe(this.options,this.body,this.labelModule);break;default:this.shape=new nQ(this.options,this.body,this.labelModule);break}this.needsRefresh()}select(){this.selected=!0,this.needsRefresh()}unselect(){this.selected=!1,this.needsRefresh()}needsRefresh(){this.shape.refreshNeeded=!0}getTitle(){return this.options.title}distanceToBorder(e,r){return this.shape.distanceToBorder(e,r)}isFixed(){return this.options.fixed.x&&this.options.fixed.y}isSelected(){return this.selected}getValue(){return this.options.value}getLabelSize(){return this.labelModule.size()}setValueRange(e,r,n){if(this.options.value!==void 0){const i=this.options.scaling.customScalingFunction(e,r,n,this.options.value),s=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){const o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*o}this.options.size=this.options.scaling.min+i*s}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}draw(e){const r=this.getFormattingValues();return this.shape.draw(e,this.x,this.y,this.selected,this.hover,r)||{}}updateBoundingBox(e){this.shape.updateBoundingBox(this.x,this.y,e)}resize(e){const r=this.getFormattingValues();this.shape.resize(e,this.selected,this.hover,r)}getItemsOnPoint(e){const r=[];return this.labelModule.visible()&&qI(this.labelModule.getSize(),e)&&r.push({nodeId:this.id,labelId:0}),qI(this.shape.boundingBox,e)&&r.push({nodeId:this.id}),r}isOverlappingWith(e){return this.shape.left<e.right&&this.shape.left+this.shape.width>e.left&&this.shape.top<e.bottom&&this.shape.top+this.shape.height>e.top}isBoundingBoxOverlappingWith(e){return this.shape.boundingBox.left<e.right&&this.shape.boundingBox.right>e.left&&this.shape.boundingBox.top<e.bottom&&this.shape.boundingBox.bottom>e.top}static checkMass(e,r){if(e.mass!==void 0&&e.mass<=0){let n="";r!==void 0&&(n=" in node id: "+r),console.error("%cNegative or zero mass disallowed"+n+", setting mass to 1.",oae),e.mass=1}}}class hDe{constructor(e,r,n,i){var s;if(this.body=e,this.images=r,this.groups=n,this.layoutEngine=i,this.body.functions.createNode=ne(s=this.create).call(s,this),this.nodesListeners={add:(o,a)=>{this.add(a.items)},update:(o,a)=>{this.update(a.items,a.data,a.oldData)},remove:(o,a)=>{this.remove(a.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:void 0,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},opacity:void 0,fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(o,a,l,c){if(a===o)return .5;{const d=1/(a-o);return Math.max(0,(c-o)*d)}}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1,coordinateOrigin:"center"},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=Qa(this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e,r;this.body.emitter.on("refreshNodes",ne(e=this.refresh).call(e,this)),this.body.emitter.on("refresh",ne(r=this.refresh).call(r,this)),this.body.emitter.on("destroy",()=>{Ze(this.nodesListeners,(n,i)=>{this.body.data.nodes&&this.body.data.nodes.off(i,n)}),delete this.body.functions.createNode,delete this.nodesListeners.add,delete this.nodesListeners.update,delete this.nodesListeners.remove,delete this.nodesListeners})}setOptions(e){if(e!==void 0){if(Vt.parseOptions(this.options,e),e.opacity!==void 0&&(FI(e.opacity)||!Bl(e.opacity)||e.opacity<0||e.opacity>1?console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity):this.options.opacity=e.opacity),e.shape!==void 0)for(const r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&this.body.nodes[r].updateShape();if(typeof e.font<"u"||typeof e.widthConstraint<"u"||typeof e.heightConstraint<"u")for(const r of ar(this.body.nodes))this.body.nodes[r].updateLabelModule(),this.body.nodes[r].needsRefresh();if(e.size!==void 0)for(const r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&this.body.nodes[r].needsRefresh();(e.hidden!==void 0||e.physics!==void 0)&&this.body.emitter.emit("_dataChanged")}}setData(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.data.nodes;if(eoe("id",e))this.body.data.nodes=e;else if(dr(e))this.body.data.nodes=new Vd,this.body.data.nodes.add(e);else if(!e)this.body.data.nodes=new Vd;else throw new TypeError("Array or DataSet expected");if(n&&Ze(this.nodesListeners,function(i,s){n.off(s,i)}),this.body.nodes={},this.body.data.nodes){const i=this;Ze(this.nodesListeners,function(o,a){i.body.data.nodes.on(a,o)});const s=this.body.data.nodes.getIds();this.add(s,!0)}r===!1&&this.body.emitter.emit("_dataChanged")}add(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n;const i=[];for(let s=0;s<e.length;s++){n=e[s];const o=this.body.data.nodes.get(n),a=this.create(o);i.push(a),this.body.nodes[n]=a}this.layoutEngine.positionInitially(i),r===!1&&this.body.emitter.emit("_dataChanged")}update(e,r,n){const i=this.body.nodes;let s=!1;for(let o=0;o<e.length;o++){const a=e[o];let l=i[a];const c=r[o];l!==void 0?l.setOptions(c)&&(s=!0):(s=!0,l=this.create(c),i[a]=l)}!s&&n!==void 0&&(s=wMe(r).call(r,function(o,a){const l=n[a];return l&&l.level!==o.level})),s===!0?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}remove(e){const r=this.body.nodes;for(let n=0;n<e.length;n++){const i=e[n];delete r[i]}this.body.emitter.emit("_dataChanged")}create(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vt;return new r(e,this.body,this.images,this.groups,this.options,this.defaultOptions)}refresh(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;Ze(this.body.nodes,(r,n)=>{const i=this.body.data.nodes.get(n);i!==void 0&&(e===!0&&r.setOptions({x:null,y:null}),r.setOptions({fixed:!1}),r.setOptions(i))})}getPositions(e){const r={};if(e!==void 0){if(dr(e)===!0){for(let n=0;n<e.length;n++)if(this.body.nodes[e[n]]!==void 0){const i=this.body.nodes[e[n]];r[e[n]]={x:Math.round(i.x),y:Math.round(i.y)}}}else if(this.body.nodes[e]!==void 0){const n=this.body.nodes[e];r[e]={x:Math.round(n.x),y:Math.round(n.y)}}}else for(let n=0;n<this.body.nodeIndices.length;n++){const i=this.body.nodes[this.body.nodeIndices[n]];r[this.body.nodeIndices[n]]={x:Math.round(i.x),y:Math.round(i.y)}}return r}getPosition(e){if(e==null)throw new TypeError("No id was specified for getPosition method.");if(this.body.nodes[e]==null)throw new ReferenceError("NodeId provided for getPosition does not exist. Provided: ".concat(e));return{x:Math.round(this.body.nodes[e].x),y:Math.round(this.body.nodes[e].y)}}storePositions(){const e=[],r=this.body.data.nodes.getDataSet();for(const n of r.get()){const i=n.id,s=this.body.nodes[i],o=Math.round(s.x),a=Math.round(s.y);(n.x!==o||n.y!==a)&&e.push({id:i,x:o,y:a})}r.update(e)}getBoundingBox(e){if(this.body.nodes[e]!==void 0)return this.body.nodes[e].shape.boundingBox}getConnectedNodes(e,r){const n=[];if(this.body.nodes[e]!==void 0){const i=this.body.nodes[e],s={};for(let o=0;o<i.edges.length;o++){const a=i.edges[o];r!=="to"&&a.toId==i.id?s[a.fromId]===void 0&&(n.push(a.fromId),s[a.fromId]=!0):r!=="from"&&a.fromId==i.id&&s[a.toId]===void 0&&(n.push(a.toId),s[a.toId]=!0)}}return n}getConnectedEdges(e){const r=[];if(this.body.nodes[e]!==void 0){const n=this.body.nodes[e];for(let i=0;i<n.edges.length;i++)r.push(n.edges[i].id)}else console.error("NodeId provided for getConnectedEdges does not exist. Provided: ",e);return r}moveNode(e,r,n){this.body.nodes[e]!==void 0?(this.body.nodes[e].x=Number(r),this.body.nodes[e].y=Number(n),Eo(()=>{this.body.emitter.emit("startSimulation")},0)):console.error("Node id supplied to moveNode does not exist. Provided: ",e)}}var oQ={},aQ;function fDe(){if(aQ)return oQ;aQ=1;var t=Pe(),e=Math.hypot,r=Math.abs,n=Math.sqrt,i=!!e&&e(1/0,NaN)!==1/0;return t({target:"Math",stat:!0,arity:2,forced:i},{hypot:function(o,a){for(var l=0,c=0,d=arguments.length,h=0,f,p;c<d;)f=r(arguments[c++]),h<f?(p=h/f,l=l*p*p+1,h=f):f>0?(p=f/h,l+=p*p):l+=f;return h===1/0?1/0:h*n(l)}}),oQ}var yO,lQ;function pDe(){if(lQ)return yO;lQ=1,fDe();var t=Tt();return yO=t.Math.hypot,yO}var vO,cQ;function mDe(){if(cQ)return vO;cQ=1;var t=pDe();return vO=t,vO}var bO,uQ;function gDe(){return uQ||(uQ=1,bO=mDe()),bO}var yDe=gDe(),vDe=ze(yDe);class fr{static transform(e,r){dr(e)||(e=[e]);const n=r.point.x,i=r.point.y,s=r.angle,o=r.length;for(let a=0;a<e.length;++a){const l=e[a],c=l.x*Math.cos(s)-l.y*Math.sin(s),d=l.x*Math.sin(s)+l.y*Math.cos(s);l.x=n+o*c,l.y=i+o*d}}static drawPath(e,r){e.beginPath(),e.moveTo(r[0].x,r[0].y);for(let n=1;n<r.length;++n)e.lineTo(r[n].x,r[n].y);e.closePath()}}let bDe=class extends fr{static draw(e,r){if(r.image){e.save(),e.translate(r.point.x,r.point.y),e.rotate(Math.PI/2+r.angle);const n=r.imageWidth!=null?r.imageWidth:r.image.width,i=r.imageHeight!=null?r.imageHeight:r.image.height;r.image.drawImageAtPosition(e,1,-n/2,0,n,i),e.restore()}return!1}};class xDe extends fr{static draw(e,r){const n=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];return fr.transform(n,r),fr.drawPath(e,n),!0}}class wDe{static draw(e,r){const n=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];return fr.transform(n,r),fr.drawPath(e,n),!0}}class SDe{static draw(e,r){const n={x:-.4,y:0};fr.transform(n,r),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";const i=Math.PI,s=r.angle-i/2,o=r.angle+i/2;return e.beginPath(),e.arc(n.x,n.y,r.length*.4,s,o,!1),e.stroke(),!0}}class _De{static draw(e,r){const n={x:-.3,y:0};fr.transform(n,r),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";const i=Math.PI,s=r.angle+i/2,o=r.angle+3*i/2;return e.beginPath(),e.arc(n.x,n.y,r.length*.4,s,o,!1),e.stroke(),!0}}class EDe{static draw(e,r){const n=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];return fr.transform(n,r),fr.drawPath(e,n),!0}}class NDe{static draw(e,r){const n=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];return fr.transform(n,r),fr.drawPath(e,n),!0}}class CDe{static draw(e,r){const n={x:-.4,y:0};return fr.transform(n,r),k$(e,n.x,n.y,r.length*.4),!0}}class kDe{static draw(e,r){const n=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];return fr.transform(n,r),fr.drawPath(e,n),!0}}class TDe{static draw(e,r){const n=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];return fr.transform(n,r),fr.drawPath(e,n),!0}}class ODe{static draw(e,r){const n=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];return fr.transform(n,r),fr.drawPath(e,n),!0}}class jDe{static draw(e,r){const n=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];return fr.transform(n,r),fr.drawPath(e,n),!0}}class Eae{static draw(e,r){let n;switch(r.type&&(n=r.type.toLowerCase()),n){case"image":return bDe.draw(e,r);case"circle":return CDe.draw(e,r);case"box":return TDe.draw(e,r);case"crow":return wDe.draw(e,r);case"curve":return SDe.draw(e,r);case"diamond":return ODe.draw(e,r);case"inv_curve":return _De.draw(e,r);case"triangle":return EDe.draw(e,r);case"inv_triangle":return NDe.draw(e,r);case"bar":return kDe.draw(e,r);case"vee":return jDe.draw(e,r);case"arrow":default:return xDe.draw(e,r)}}}function dQ(t,e){var r=ar(t);if(il){var n=il(t);e&&(n=Un(n).call(n,function(i){return vl(t,i).enumerable})),r.push.apply(r,n)}return r}function hQ(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?jt(r=dQ(Object(i),!0)).call(r,function(s){mo(t,s,i[s])}):sl?wb(t,sl(i)):jt(n=dQ(Object(i))).call(n,function(s){Sb(t,s,vl(i,s))})}return t}class Nae{constructor(e,r,n){mo(this,"color",{}),mo(this,"colorDirty",!0),mo(this,"hoverWidth",1.5),mo(this,"selectionWidth",2),this._body=r,this._labelModule=n,this.setOptions(e),this.fromPoint=this.from,this.toPoint=this.to}connect(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to]}cleanup(){return!1}setOptions(e){this.options=e,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.id=this.options.id}drawLine(e,r,n,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.getViaNode();e.strokeStyle=this.getColor(e,r),e.lineWidth=r.width,r.dashes!==!1?this._drawDashedLine(e,r,s):this._drawLine(e,r,s)}_drawLine(e,r,n,i,s){if(this.from!=this.to)this._line(e,r,n,i,s);else{const[o,a,l]=this._getCircleData(e);this._circle(e,r,o,a,l)}}_drawDashedLine(e,r,n,i,s){e.lineCap="round";const o=dr(r.dashes)?r.dashes:[5,5];if(e.setLineDash!==void 0){if(e.save(),e.setLineDash(o),e.lineDashOffset=0,this.from!=this.to)this._line(e,r,n);else{const[a,l,c]=this._getCircleData(e);this._circle(e,r,a,l,c)}e.setLineDash([0]),e.lineDashOffset=0,e.restore()}else{if(this.from!=this.to)uoe(e,this.from.x,this.from.y,this.to.x,this.to.y,o);else{const[a,l,c]=this._getCircleData(e);this._circle(e,r,a,l,c)}this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}}findBorderPosition(e,r,n){return this.from!=this.to?this._findBorderPosition(e,r,n):this._findBorderPositionCircle(e,r,n)}findBorderPositions(e){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,e),to:this._findBorderPosition(this.to,e)};{var r;const[n,i]=js(r=this._getCircleData(e)).call(r,0,2);return{from:this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:.6,high:.8,direction:1})}}}_getCircleData(e){const r=this.options.selfReference.size;e!==void 0&&this.from.shape.width===void 0&&this.from.shape.resize(e);const n=Sae(e,this.options.selfReference.angle,r,this.from);return[n.x,n.y,r]}_pointOnCircle(e,r,n,i){const s=i*2*Math.PI;return{x:e+n*Math.cos(s),y:r-n*Math.sin(s)}}_findBorderPositionCircle(e,r,n){const i=n.x,s=n.y;let o=n.low,a=n.high;const l=n.direction,c=10,d=this.options.selfReference.size,h=.05;let f,p=(o+a)*.5,m=0;this.options.arrowStrikethrough===!0&&(l===-1?m=this.options.endPointOffset.from:l===1&&(m=this.options.endPointOffset.to));let g=0;do{p=(o+a)*.5,f=this._pointOnCircle(i,s,d,p);const b=Math.atan2(e.y-f.y,e.x-f.x),y=e.distanceToBorder(r,b)+m,v=Math.sqrt(Math.pow(f.x-e.x,2)+Math.pow(f.y-e.y,2)),w=y-v;if(Math.abs(w)<h)break;w>0?l>0?o=p:a=p:l>0?a=p:o=p,++g}while(o<=a&&g<c);return hQ(hQ({},f),{},{t:p})}getLineWidth(e,r){return e===!0?Math.max(this.selectionWidth,.3/this._body.view.scale):r===!0?Math.max(this.hoverWidth,.3/this._body.view.scale):Math.max(this.options.width,.3/this._body.view.scale)}getColor(e,r){if(r.inheritsColor!==!1){if(r.inheritsColor==="both"&&this.from.id!==this.to.id){const n=e.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y);let i=this.from.options.color.highlight.border,s=this.to.options.color.highlight.border;return this.from.selected===!1&&this.to.selected===!1?(i=Ri(this.from.options.color.border,r.opacity),s=Ri(this.to.options.color.border,r.opacity)):this.from.selected===!0&&this.to.selected===!1?s=this.to.options.color.border:this.from.selected===!1&&this.to.selected===!0&&(i=this.from.options.color.border),n.addColorStop(0,i),n.addColorStop(1,s),n}return r.inheritsColor==="to"?Ri(this.to.options.color.border,r.opacity):Ri(this.from.options.color.border,r.opacity)}else return Ri(r.color,r.opacity)}_circle(e,r,n,i,s){this.enableShadow(e,r);let o=0,a=Math.PI*2;if(!this.options.selfReference.renderBehindTheNode){const l=this.options.selfReference.angle,c=this.options.selfReference.angle+Math.PI,d=this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:l,high:c,direction:-1}),h=this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:l,high:c,direction:1});o=Math.atan2(d.y-i,d.x-n),a=Math.atan2(h.y-i,h.x-n)}e.beginPath(),e.arc(n,i,s,o,a,!1),e.stroke(),this.disableShadow(e,r)}getDistanceToEdge(e,r,n,i,s,o){if(this.from!=this.to)return this._getDistanceToEdge(e,r,n,i,s,o);{const[a,l,c]=this._getCircleData(void 0),d=a-s,h=l-o;return Math.abs(Math.sqrt(d*d+h*h)-c)}}_getDistanceToLine(e,r,n,i,s,o){const a=n-e,l=i-r,c=a*a+l*l;let d=((s-e)*a+(o-r)*l)/c;d>1?d=1:d<0&&(d=0);const h=e+d*a,f=r+d*l,p=h-s,m=f-o;return Math.sqrt(p*p+m*m)}getArrowData(e,r,n,i,s,o){let a,l,c,d,h,f,p;const m=o.width;r==="from"?(c=this.from,d=this.to,h=o.fromArrowScale<0,f=Math.abs(o.fromArrowScale),p=o.fromArrowType):r==="to"?(c=this.to,d=this.from,h=o.toArrowScale<0,f=Math.abs(o.toArrowScale),p=o.toArrowType):(c=this.to,d=this.from,h=o.middleArrowScale<0,f=Math.abs(o.middleArrowScale),p=o.middleArrowType);const g=15*f+3*m;if(c!=d){const w=vDe(c.x-d.x,c.y-d.y),x=g/w;if(r!=="middle")if(this.options.smooth.enabled===!0){const S=this._findBorderPosition(c,e,{via:n}),_=this.getPoint(S.t+x*(r==="from"?1:-1),n);a=Math.atan2(S.y-_.y,S.x-_.x),l=S}else a=Math.atan2(c.y-d.y,c.x-d.x),l=this._findBorderPosition(c,e);else{const S=(h?-x:x)/2,_=this.getPoint(.5+S,n),N=this.getPoint(.5-S,n);a=Math.atan2(_.y-N.y,_.x-N.x),l=this.getPoint(.5,n)}}else{const[w,x,S]=this._getCircleData(e);if(r==="from"){const _=this.options.selfReference.angle,N=this.options.selfReference.angle+Math.PI,E=this._findBorderPositionCircle(this.from,e,{x:w,y:x,low:_,high:N,direction:-1});a=E.t*-2*Math.PI+1.5*Math.PI+.1*Math.PI,l=E}else if(r==="to"){const _=this.options.selfReference.angle,N=this.options.selfReference.angle+Math.PI,E=this._findBorderPositionCircle(this.from,e,{x:w,y:x,low:_,high:N,direction:1});a=E.t*-2*Math.PI+1.5*Math.PI-1.1*Math.PI,l=E}else{const _=this.options.selfReference.angle/(2*Math.PI);l=this._pointOnCircle(w,x,S,_),a=_*-2*Math.PI+1.5*Math.PI+.1*Math.PI}}const b=l.x-g*.9*Math.cos(a),y=l.y-g*.9*Math.sin(a);return{point:l,core:{x:b,y},angle:a,length:g,type:p}}drawArrowHead(e,r,n,i,s){e.strokeStyle=this.getColor(e,r),e.fillStyle=e.strokeStyle,e.lineWidth=r.width,Eae.draw(e,s)&&(this.enableShadow(e,r),Rm(e).call(e),this.disableShadow(e,r))}enableShadow(e,r){r.shadow===!0&&(e.shadowColor=r.shadowColor,e.shadowBlur=r.shadowSize,e.shadowOffsetX=r.shadowX,e.shadowOffsetY=r.shadowY)}disableShadow(e,r){r.shadow===!0&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}drawBackground(e,r){if(r.background!==!1){const n={strokeStyle:e.strokeStyle,lineWidth:e.lineWidth,dashes:e.dashes};e.strokeStyle=r.backgroundColor,e.lineWidth=r.backgroundSize,this.setStrokeDashed(e,r.backgroundDashes),e.stroke(),e.strokeStyle=n.strokeStyle,e.lineWidth=n.lineWidth,e.dashes=n.dashes,this.setStrokeDashed(e,r.dashes)}}setStrokeDashed(e,r){if(r!==!1)if(e.setLineDash!==void 0){const n=dr(r)?r:[5,5];e.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.");else e.setLineDash!==void 0?e.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}function fQ(t,e){var r=ar(t);if(il){var n=il(t);e&&(n=Un(n).call(n,function(i){return vl(t,i).enumerable})),r.push.apply(r,n)}return r}function pQ(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?jt(r=fQ(Object(i),!0)).call(r,function(s){mo(t,s,i[s])}):sl?wb(t,sl(i)):jt(n=fQ(Object(i))).call(n,function(s){Sb(t,s,vl(i,s))})}return t}class tD extends Nae{constructor(e,r,n){super(e,r,n)}_findBorderPositionBezier(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this._getViaCoordinates();const i=10,s=.2;let o=!1,a=1,l=0,c=this.to,d,h,f=this.options.endPointOffset?this.options.endPointOffset.to:0;e.id===this.from.id&&(c=this.from,o=!0,f=this.options.endPointOffset?this.options.endPointOffset.from:0),this.options.arrowStrikethrough===!1&&(f=0);let p=0;do{h=(l+a)*.5,d=this.getPoint(h,n);const m=Math.atan2(c.y-d.y,c.x-d.x),g=c.distanceToBorder(r,m)+f,b=Math.sqrt(Math.pow(d.x-c.x,2)+Math.pow(d.y-c.y,2)),y=g-b;if(Math.abs(y)<s)break;y<0?o===!1?l=h:a=h:o===!1?a=h:l=h,++p}while(l<=a&&p<i);return pQ(pQ({},d),{},{t:h})}_getDistanceToBezierEdge(e,r,n,i,s,o,a){let l=1e9,c,d,h,f,p,m=e,g=r;for(d=1;d<10;d++)h=.1*d,f=Math.pow(1-h,2)*e+2*h*(1-h)*a.x+Math.pow(h,2)*n,p=Math.pow(1-h,2)*r+2*h*(1-h)*a.y+Math.pow(h,2)*i,d>0&&(c=this._getDistanceToLine(m,g,f,p,s,o),l=c<l?c:l),m=f,g=p;return l}_bezierCurve(e,r,n,i){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),n!=null&&n.x!=null?i!=null&&i.x!=null?e.bezierCurveTo(n.x,n.y,i.x,i.y,this.toPoint.x,this.toPoint.y):e.quadraticCurveTo(n.x,n.y,this.toPoint.x,this.toPoint.y):e.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(e,r),this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}getViaNode(){return this._getViaCoordinates()}}class mQ extends tD{constructor(e,r,n){super(e,r,n),mo(this,"via",this.via),this._boundFunction=()=>{this.positionBezierNode()},this._body.emitter.on("_repositionBezierNodes",this._boundFunction)}setOptions(e){super.setOptions(e);let r=!1;this.options.physics!==e.physics&&(r=!0),this.options=e,this.id=this.options.id,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.setupSupportNode(),this.connect(),r===!0&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}connect(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.from===void 0||this.to===void 0||this.options.physics===!1?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}cleanup(){return this._body.emitter.off("_repositionBezierNodes",this._boundFunction),this.via!==void 0?(delete this._body.nodes[this.via.id],this.via=void 0,!0):!1}setupSupportNode(){if(this.via===void 0){const e="edgeId:"+this.id,r=this._body.functions.createNode({id:e,shape:"circle",physics:!0,hidden:!0});this._body.nodes[e]=r,this.via=r,this.via.parentEdgeId=this.id,this.positionBezierNode()}}positionBezierNode(){this.via!==void 0&&this.from!==void 0&&this.to!==void 0?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):this.via!==void 0&&(this.via.x=0,this.via.y=0)}_line(e,r,n){this._bezierCurve(e,r,n)}_getViaCoordinates(){return this.via}getViaNode(){return this.via}getPoint(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.via;if(this.from===this.to){const[n,i,s]=this._getCircleData(),o=2*Math.PI*(1-e);return{x:n+s*Math.sin(o),y:i+s-s*(1-Math.cos(o))}}else return{x:Math.pow(1-e,2)*this.fromPoint.x+2*e*(1-e)*r.x+Math.pow(e,2)*this.toPoint.x,y:Math.pow(1-e,2)*this.fromPoint.y+2*e*(1-e)*r.y+Math.pow(e,2)*this.toPoint.y}}_findBorderPosition(e,r){return this._findBorderPositionBezier(e,r,this.via)}_getDistanceToEdge(e,r,n,i,s,o){return this._getDistanceToBezierEdge(e,r,n,i,s,o,this.via)}}class gQ extends tD{constructor(e,r,n){super(e,r,n)}_line(e,r,n){this._bezierCurve(e,r,n)}getViaNode(){return this._getViaCoordinates()}_getViaCoordinates(){const e=this.options.smooth.roundness,r=this.options.smooth.type;let n=Math.abs(this.from.x-this.to.x),i=Math.abs(this.from.y-this.to.y);if(r==="discrete"||r==="diagonalCross"){let s,o;n<=i?s=o=e*i:s=o=e*n,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(o=-o);let a=this.from.x+s,l=this.from.y+o;return r==="discrete"&&(n<=i?a=n<e*i?this.from.x:a:l=i<e*n?this.from.y:l),{x:a,y:l}}else if(r==="straightCross"){let s=(1-e)*n,o=(1-e)*i;return n<=i?(s=0,this.from.y<this.to.y&&(o=-o)):(this.from.x<this.to.x&&(s=-s),o=0),{x:this.to.x+s,y:this.to.y+o}}else if(r==="horizontal"){let s=(1-e)*n;return this.from.x<this.to.x&&(s=-s),{x:this.to.x+s,y:this.from.y}}else if(r==="vertical"){let s=(1-e)*i;return this.from.y<this.to.y&&(s=-s),{x:this.from.x,y:this.to.y+s}}else if(r==="curvedCW"){n=this.to.x-this.from.x,i=this.from.y-this.to.y;const s=Math.sqrt(n*n+i*i),o=Math.PI,l=(Math.atan2(i,n)+(e*.5+.5)*o)%(2*o);return{x:this.from.x+(e*.5+.5)*s*Math.sin(l),y:this.from.y+(e*.5+.5)*s*Math.cos(l)}}else if(r==="curvedCCW"){n=this.to.x-this.from.x,i=this.from.y-this.to.y;const s=Math.sqrt(n*n+i*i),o=Math.PI,l=(Math.atan2(i,n)+(-e*.5+.5)*o)%(2*o);return{x:this.from.x+(e*.5+.5)*s*Math.sin(l),y:this.from.y+(e*.5+.5)*s*Math.cos(l)}}else{let s,o;n<=i?s=o=e*i:s=o=e*n,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(o=-o);let a=this.from.x+s,l=this.from.y+o;return n<=i?this.from.x<=this.to.x?a=this.to.x<a?this.to.x:a:a=this.to.x>a?this.to.x:a:this.from.y>=this.to.y?l=this.to.y>l?this.to.y:l:l=this.to.y<l?this.to.y:l,{x:a,y:l}}}_findBorderPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._findBorderPositionBezier(e,r,n.via)}_getDistanceToEdge(e,r,n,i,s,o){let a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(e,r,n,i,s,o,a)}getPoint(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates();const n=e,i=Math.pow(1-n,2)*this.fromPoint.x+2*n*(1-n)*r.x+Math.pow(n,2)*this.toPoint.x,s=Math.pow(1-n,2)*this.fromPoint.y+2*n*(1-n)*r.y+Math.pow(n,2)*this.toPoint.y;return{x:i,y:s}}}class PDe extends tD{constructor(e,r,n){super(e,r,n)}_getDistanceToBezierEdge2(e,r,n,i,s,o,a,l){let c=1e9,d=e,h=r;const f=[0,0,0,0];for(let p=1;p<10;p++){const m=.1*p;f[0]=Math.pow(1-m,3),f[1]=3*m*Math.pow(1-m,2),f[2]=3*Math.pow(m,2)*(1-m),f[3]=Math.pow(m,3);const g=f[0]*e+f[1]*a.x+f[2]*l.x+f[3]*n,b=f[0]*r+f[1]*a.y+f[2]*l.y+f[3]*i;if(p>0){const y=this._getDistanceToLine(d,h,g,b,s,o);c=y<c?y:c}d=g,h=b}return c}}class yQ extends PDe{constructor(e,r,n){super(e,r,n)}_line(e,r,n){const i=n[0],s=n[1];this._bezierCurve(e,r,i,s)}_getViaCoordinates(){const e=this.from.x-this.to.x,r=this.from.y-this.to.y;let n,i,s,o;const a=this.options.smooth.roundness;return(Math.abs(e)>Math.abs(r)||this.options.smooth.forceDirection===!0||this.options.smooth.forceDirection==="horizontal")&&this.options.smooth.forceDirection!=="vertical"?(i=this.from.y,o=this.to.y,n=this.from.x-a*e,s=this.to.x+a*e):(i=this.from.y-a*r,o=this.to.y+a*r,n=this.from.x,s=this.to.x),[{x:n,y:i},{x:s,y:o}]}getViaNode(){return this._getViaCoordinates()}_findBorderPosition(e,r){return this._findBorderPositionBezier(e,r)}_getDistanceToEdge(e,r,n,i,s,o){let[a,l]=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge2(e,r,n,i,s,o,a,l)}getPoint(e){let[r,n]=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates();const i=e,s=[Math.pow(1-i,3),3*i*Math.pow(1-i,2),3*Math.pow(i,2)*(1-i),Math.pow(i,3)],o=s[0]*this.fromPoint.x+s[1]*r.x+s[2]*n.x+s[3]*this.toPoint.x,a=s[0]*this.fromPoint.y+s[1]*r.y+s[2]*n.y+s[3]*this.toPoint.y;return{x:o,y:a}}}class vQ extends Nae{constructor(e,r,n){super(e,r,n)}_line(e,r){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),e.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}getViaNode(){}getPoint(e){return{x:(1-e)*this.fromPoint.x+e*this.toPoint.x,y:(1-e)*this.fromPoint.y+e*this.toPoint.y}}_findBorderPosition(e,r){let n=this.to,i=this.from;e.id===this.from.id&&(n=this.from,i=this.to);const s=Math.atan2(n.y-i.y,n.x-i.x),o=n.x-i.x,a=n.y-i.y,l=Math.sqrt(o*o+a*a),c=e.distanceToBorder(r,s),d=(l-c)/l;return{x:(1-d)*i.x+d*n.x,y:(1-d)*i.y+d*n.y,t:0}}_getDistanceToEdge(e,r,n,i,s,o){return this._getDistanceToLine(e,r,n,i,s,o)}}class Xa{constructor(e,r,n,i,s){if(r===void 0)throw new Error("No body provided");this.options=Qa(i),this.globalOptions=i,this.defaultOptions=s,this.body=r,this.imagelist=n,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new nd(this.body,this.options,!0),this.setOptions(e)}setOptions(e){if(!e)return;let r=typeof e.physics<"u"&&this.options.physics!==e.physics||typeof e.hidden<"u"&&(this.options.hidden||!1)!==(e.hidden||!1)||typeof e.from<"u"&&this.options.from!==e.from||typeof e.to<"u"&&this.options.to!==e.to;Xa.parseOptions(this.options,e,!0,this.globalOptions),e.id!==void 0&&(this.id=e.id),e.from!==void 0&&(this.fromId=e.from),e.to!==void 0&&(this.toId=e.to),e.title!==void 0&&(this.title=e.title),e.value!==void 0&&(e.value=wae(e.value));const n=[e,this.options,this.defaultOptions];return this.chooser=Z$("edge",n),this.updateLabelModule(e),r=this.updateEdgeType()||r,this._setInteractionWidths(),this.connect(),r}static parseOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(jh(["endPointOffset","arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","selfReference","to","title","value","width","font","chosen","widthConstraint"],e,r,n),r.endPointOffset!==void 0&&r.endPointOffset.from!==void 0&&(Bl(r.endPointOffset.from)?e.endPointOffset.from=r.endPointOffset.from:(e.endPointOffset.from=i.endPointOffset.from!==void 0?i.endPointOffset.from:0,console.error("endPointOffset.from is not a valid number"))),r.endPointOffset!==void 0&&r.endPointOffset.to!==void 0&&(Bl(r.endPointOffset.to)?e.endPointOffset.to=r.endPointOffset.to:(e.endPointOffset.to=i.endPointOffset.to!==void 0?i.endPointOffset.to:0,console.error("endPointOffset.to is not a valid number"))),Qv(r.label)?e.label=r.label:Qv(e.label)||(e.label=void 0),Oi(e,r,"smooth",i),Oi(e,r,"shadow",i),Oi(e,r,"background",i),r.dashes!==void 0&&r.dashes!==null?e.dashes=r.dashes:n===!0&&r.dashes===null&&(e.dashes=cc(i.dashes)),r.scaling!==void 0&&r.scaling!==null?(r.scaling.min!==void 0&&(e.scaling.min=r.scaling.min),r.scaling.max!==void 0&&(e.scaling.max=r.scaling.max),Oi(e.scaling,r.scaling,"label",i.scaling)):n===!0&&r.scaling===null&&(e.scaling=cc(i.scaling)),r.arrows!==void 0&&r.arrows!==null)if(typeof r.arrows=="string"){const a=r.arrows.toLowerCase();e.arrows.to.enabled=Nt(a).call(a,"to")!=-1,e.arrows.middle.enabled=Nt(a).call(a,"middle")!=-1,e.arrows.from.enabled=Nt(a).call(a,"from")!=-1}else if(typeof r.arrows=="object")Oi(e.arrows,r.arrows,"to",i.arrows),Oi(e.arrows,r.arrows,"middle",i.arrows),Oi(e.arrows,r.arrows,"from",i.arrows);else throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+Im(r.arrows));else n===!0&&r.arrows===null&&(e.arrows=cc(i.arrows));if(r.color!==void 0&&r.color!==null){const a=td(r.color)?{color:r.color,highlight:r.color,hover:r.color,inherit:!1,opacity:1}:r.color,l=e.color;if(s)$t(l,i.color,!1,n);else for(const c in l)Object.prototype.hasOwnProperty.call(l,c)&&delete l[c];if(td(l))l.color=l,l.highlight=l,l.hover=l,l.inherit=!1,a.opacity===void 0&&(l.opacity=1);else{let c=!1;a.color!==void 0&&(l.color=a.color,c=!0),a.highlight!==void 0&&(l.highlight=a.highlight,c=!0),a.hover!==void 0&&(l.hover=a.hover,c=!0),a.inherit!==void 0&&(l.inherit=a.inherit),a.opacity!==void 0&&(l.opacity=Math.min(1,Math.max(0,a.opacity))),c===!0?l.inherit=!1:l.inherit===void 0&&(l.inherit="from")}}else n===!0&&r.color===null&&(e.color=Qa(i.color));n===!0&&r.font===null&&(e.font=Qa(i.font)),Object.prototype.hasOwnProperty.call(r,"selfReferenceSize")&&(console.warn("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),e.selfReference.size=r.selfReferenceSize)}getFormattingValues(){const e=this.options.arrows.to===!0||this.options.arrows.to.enabled===!0,r=this.options.arrows.from===!0||this.options.arrows.from.enabled===!0,n=this.options.arrows.middle===!0||this.options.arrows.middle.enabled===!0,i=this.options.color.inherit,s={toArrow:e,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,toArrowSrc:this.options.arrows.to.src,toArrowImageWidth:this.options.arrows.to.imageWidth,toArrowImageHeight:this.options.arrows.to.imageHeight,middleArrow:n,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,middleArrowSrc:this.options.arrows.middle.src,middleArrowImageWidth:this.options.arrows.middle.imageWidth,middleArrowImageHeight:this.options.arrows.middle.imageHeight,fromArrow:r,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,fromArrowSrc:this.options.arrows.from.src,fromArrowImageWidth:this.options.arrows.from.imageWidth,fromArrowImageHeight:this.options.arrows.from.imageHeight,arrowStrikethrough:this.options.arrowStrikethrough,color:i?void 0:this.options.color.color,inheritsColor:i,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover)if(this.chooser===!0){if(this.selected){const o=this.options.selectionWidth;typeof o=="function"?s.width=o(s.width):typeof o=="number"&&(s.width+=o),s.width=Math.max(s.width,.3/this.body.view.scale),s.color=this.options.color.highlight,s.shadow=this.options.shadow.enabled}else if(this.hover){const o=this.options.hoverWidth;typeof o=="function"?s.width=o(s.width):typeof o=="number"&&(s.width+=o),s.width=Math.max(s.width,.3/this.body.view.scale),s.color=this.options.color.hover,s.shadow=this.options.shadow.enabled}}else typeof this.chooser=="function"&&(this.chooser(s,this.options.id,this.selected,this.hover),s.color!==void 0&&(s.inheritsColor=!1),s.shadow===!1&&(s.shadowColor!==this.options.shadow.color||s.shadowSize!==this.options.shadow.size||s.shadowX!==this.options.shadow.x||s.shadowY!==this.options.shadow.y)&&(s.shadow=!0));else s.shadow=this.options.shadow.enabled,s.width=Math.max(s.width,.3/this.body.view.scale);return s}updateLabelModule(e){const r=[e,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,r),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}updateEdgeType(){const e=this.options.smooth;let r=!1,n=!0;return this.edgeType!==void 0&&((this.edgeType instanceof mQ&&e.enabled===!0&&e.type==="dynamic"||this.edgeType instanceof yQ&&e.enabled===!0&&e.type==="cubicBezier"||this.edgeType instanceof gQ&&e.enabled===!0&&e.type!=="dynamic"&&e.type!=="cubicBezier"||this.edgeType instanceof vQ&&e.type.enabled===!1)&&(n=!1),n===!0&&(r=this.cleanup())),n===!0?e.enabled===!0?e.type==="dynamic"?(r=!0,this.edgeType=new mQ(this.options,this.body,this.labelModule)):e.type==="cubicBezier"?this.edgeType=new yQ(this.options,this.body,this.labelModule):this.edgeType=new gQ(this.options,this.body,this.labelModule):this.edgeType=new vQ(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),r}connect(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=this.from!==void 0&&this.to!==void 0,this.connected===!0?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}disconnect(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}getTitle(){return this.title}isSelected(){return this.selected}getValue(){return this.options.value}setValueRange(e,r,n){if(this.options.value!==void 0){const i=this.options.scaling.customScalingFunction(e,r,n,this.options.value),s=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){const o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*o}this.options.width=this.options.scaling.min+i*s}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}_setInteractionWidths(){typeof this.options.hoverWidth=="function"?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,typeof this.options.selectionWidth=="function"?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}draw(e){const r=this.getFormattingValues();if(r.hidden)return;const n=this.edgeType.getViaNode();this.edgeType.drawLine(e,r,this.selected,this.hover,n),this.drawLabel(e,n)}drawArrows(e){const r=this.getFormattingValues();if(r.hidden)return;const n=this.edgeType.getViaNode(),i={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,r.fromArrow&&(i.from=this.edgeType.getArrowData(e,"from",n,this.selected,this.hover,r),r.arrowStrikethrough===!1&&(this.edgeType.fromPoint=i.from.core),r.fromArrowSrc&&(i.from.image=this.imagelist.load(r.fromArrowSrc)),r.fromArrowImageWidth&&(i.from.imageWidth=r.fromArrowImageWidth),r.fromArrowImageHeight&&(i.from.imageHeight=r.fromArrowImageHeight)),r.toArrow&&(i.to=this.edgeType.getArrowData(e,"to",n,this.selected,this.hover,r),r.arrowStrikethrough===!1&&(this.edgeType.toPoint=i.to.core),r.toArrowSrc&&(i.to.image=this.imagelist.load(r.toArrowSrc)),r.toArrowImageWidth&&(i.to.imageWidth=r.toArrowImageWidth),r.toArrowImageHeight&&(i.to.imageHeight=r.toArrowImageHeight)),r.middleArrow&&(i.middle=this.edgeType.getArrowData(e,"middle",n,this.selected,this.hover,r),r.middleArrowSrc&&(i.middle.image=this.imagelist.load(r.middleArrowSrc)),r.middleArrowImageWidth&&(i.middle.imageWidth=r.middleArrowImageWidth),r.middleArrowImageHeight&&(i.middle.imageHeight=r.middleArrowImageHeight)),r.fromArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.from),r.middleArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.middle),r.toArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.to)}drawLabel(e,r){if(this.options.label!==void 0){const n=this.from,i=this.to;this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(e,this.selected,this.hover);let s;if(n.id!=i.id){this.labelModule.pointToSelf=!1,s=this.edgeType.getPoint(.5,r),e.save();const o=this._getRotation(e);o.angle!=0&&(e.translate(o.x,o.y),e.rotate(o.angle)),this.labelModule.draw(e,s.x,s.y,this.selected,this.hover),e.restore()}else{this.labelModule.pointToSelf=!0;const o=Sae(e,this.options.selfReference.angle,this.options.selfReference.size,n);s=this._pointOnCircle(o.x,o.y,this.options.selfReference.size,this.options.selfReference.angle),this.labelModule.draw(e,s.x,s.y,this.selected,this.hover)}}}getItemsOnPoint(e){const r=[];if(this.labelModule.visible()){const i=this._getRotation();qI(this.labelModule.getSize(),e,i)&&r.push({edgeId:this.id,labelId:0})}const n={left:e.x,top:e.y};return this.isOverlappingWith(n)&&r.push({edgeId:this.id}),r}isOverlappingWith(e){if(this.connected){const n=this.from.x,i=this.from.y,s=this.to.x,o=this.to.y,a=e.left,l=e.top;return this.edgeType.getDistanceToEdge(n,i,s,o,a,l)<10}else return!1}_getRotation(e){const r=this.edgeType.getViaNode(),n=this.edgeType.getPoint(.5,r);e!==void 0&&this.labelModule.calculateLabelSize(e,this.selected,this.hover,n.x,n.y);const i={x:n.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible()||this.options.font.align==="horizontal")return i;const s=this.from.y-this.to.y,o=this.from.x-this.to.x;let a=Math.atan2(s,o);return(a<-1&&o<0||a>0&&o<0)&&(a+=Math.PI),i.angle=a,i}_pointOnCircle(e,r,n,i){return{x:e+n*Math.cos(i),y:r-n*Math.sin(i)}}select(){this.selected=!0}unselect(){this.selected=!1}cleanup(){return this.edgeType.cleanup()}remove(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}endPointsValid(){return this.body.nodes[this.fromId]!==void 0&&this.body.nodes[this.toId]!==void 0}}class IDe{constructor(e,r,n){var i;this.body=e,this.images=r,this.groups=n,this.body.functions.createEdge=ne(i=this.create).call(i,this),this.edgesListeners={add:(s,o)=>{this.add(o.items)},update:(s,o)=>{this.update(o.items)},remove:(s,o)=>{this.remove(o.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},endPointOffset:{from:0,to:0},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(s,o,a,l){if(o===s)return .5;{const c=1/(o-s);return Math.max(0,(l-s)*c)}}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},$t(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e=this,r,n;this.body.emitter.on("_forceDisableDynamicCurves",function(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i==="dynamic"&&(i="continuous");let o=!1;for(const a in e.body.edges)if(Object.prototype.hasOwnProperty.call(e.body.edges,a)){const l=e.body.edges[a],c=e.body.data.edges.get(a);if(c!=null){const d=c.smooth;d!==void 0&&d.enabled===!0&&d.type==="dynamic"&&(i===void 0?l.setOptions({smooth:!1}):l.setOptions({smooth:{type:i}}),o=!0)}}s===!0&&o===!0&&e.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",()=>{this.reconnectEdges()}),this.body.emitter.on("refreshEdges",ne(r=this.refresh).call(r,this)),this.body.emitter.on("refresh",ne(n=this.refresh).call(n,this)),this.body.emitter.on("destroy",()=>{Ze(this.edgesListeners,(i,s)=>{this.body.data.edges&&this.body.data.edges.off(s,i)}),delete this.body.functions.createEdge,delete this.edgesListeners.add,delete this.edgesListeners.update,delete this.edgesListeners.remove,delete this.edgesListeners})}setOptions(e){if(e!==void 0){Xa.parseOptions(this.options,e,!0,this.defaultOptions,!0);let r=!1;if(e.smooth!==void 0)for(const n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&(r=this.body.edges[n].updateEdgeType()||r);if(e.font!==void 0)for(const n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&this.body.edges[n].updateLabelModule();(e.hidden!==void 0||e.physics!==void 0||r===!0)&&this.body.emitter.emit("_dataChanged")}}setData(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.data.edges;if(eoe("id",e))this.body.data.edges=e;else if(dr(e))this.body.data.edges=new Vd,this.body.data.edges.add(e);else if(!e)this.body.data.edges=new Vd;else throw new TypeError("Array or DataSet expected");if(n&&Ze(this.edgesListeners,(i,s)=>{n.off(s,i)}),this.body.edges={},this.body.data.edges){Ze(this.edgesListeners,(s,o)=>{this.body.data.edges.on(o,s)});const i=this.body.data.edges.getIds();this.add(i,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),r===!1&&this.body.emitter.emit("_dataChanged")}add(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.edges,i=this.body.data.edges;for(let s=0;s<e.length;s++){const o=e[s],a=n[o];a&&a.disconnect();const l=i.get(o,{showInternalIds:!0});n[o]=this.create(l)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),r===!1&&this.body.emitter.emit("_dataChanged")}update(e){const r=this.body.edges,n=this.body.data.edges;let i=!1;for(let s=0;s<e.length;s++){const o=e[s],a=n.get(o),l=r[o];l!==void 0?(l.disconnect(),i=l.setOptions(a)||i,l.connect()):(this.body.edges[o]=this.create(a),i=!0)}i===!0?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}remove(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.length===0)return;const n=this.body.edges;Ze(e,i=>{const s=n[i];s!==void 0&&s.remove()}),r&&this.body.emitter.emit("_dataChanged")}refresh(){Ze(this.body.edges,(e,r)=>{const n=this.body.data.edges.get(r);n!==void 0&&e.setOptions(n)})}create(e){return new Xa(e,this.body,this.images,this.options,this.defaultOptions)}reconnectEdges(){let e;const r=this.body.nodes,n=this.body.edges;for(e in r)Object.prototype.hasOwnProperty.call(r,e)&&(r[e].edges=[]);for(e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=n[e];i.from=null,i.to=null,i.connect()}}getConnectedNodes(e){const r=[];if(this.body.edges[e]!==void 0){const n=this.body.edges[e];n.fromId!==void 0&&r.push(n.fromId),n.toId!==void 0&&r.push(n.toId)}return r}_updateState(){this._addMissingEdges(),this._removeInvalidEdges()}_removeInvalidEdges(){const e=[];Ze(this.body.edges,(r,n)=>{const i=this.body.nodes[r.toId],s=this.body.nodes[r.fromId];i!==void 0&&i.isCluster===!0||s!==void 0&&s.isCluster===!0||(i===void 0||s===void 0)&&e.push(n)}),this.remove(e,!1)}_addMissingEdges(){const e=this.body.data.edges;if(e==null)return;const r=this.body.edges,n=[];jt(e).call(e,(i,s)=>{r[s]===void 0&&n.push(s)}),this.add(n,!0)}}class Cae{constructor(e,r,n){this.body=e,this.physicsBody=r,this.barnesHutTree,this.setOptions(n),this._rng=vb("BARNES HUT SOLVER")}setOptions(e){this.options=e,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}solve(){if(this.options.gravitationalConstant!==0&&this.physicsBody.physicsNodeIndices.length>0){let e;const r=this.body.nodes,n=this.physicsBody.physicsNodeIndices,i=n.length,s=this._formBarnesHutTree(r,n);this.barnesHutTree=s;for(let o=0;o<i;o++)e=r[n[o]],e.options.mass>0&&this._getForceContributions(s.root,e)}}_getForceContributions(e,r){this._getForceContribution(e.children.NW,r),this._getForceContribution(e.children.NE,r),this._getForceContribution(e.children.SW,r),this._getForceContribution(e.children.SE,r)}_getForceContribution(e,r){if(e.childrenCount>0){const n=e.centerOfMass.x-r.x,i=e.centerOfMass.y-r.y,s=Math.sqrt(n*n+i*i);s*e.calcSize>this.thetaInversed?this._calculateForces(s,n,i,r,e):e.childrenCount===4?this._getForceContributions(e,r):e.children.data.id!=r.id&&this._calculateForces(s,n,i,r,e)}}_calculateForces(e,r,n,i,s){e===0&&(e=.1,r=e),this.overlapAvoidanceFactor<1&&i.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,e-i.shape.radius));const o=this.options.gravitationalConstant*s.mass*i.options.mass/Math.pow(e,3),a=r*o,l=n*o;this.physicsBody.forces[i.id].x+=a,this.physicsBody.forces[i.id].y+=l}_formBarnesHutTree(e,r){let n;const i=r.length;let s=e[r[0]].x,o=e[r[0]].y,a=e[r[0]].x,l=e[r[0]].y;for(let b=1;b<i;b++){const y=e[r[b]],v=y.x,w=y.y;y.options.mass>0&&(v<s&&(s=v),v>a&&(a=v),w<o&&(o=w),w>l&&(l=w))}const c=Math.abs(a-s)-Math.abs(l-o);c>0?(o-=.5*c,l+=.5*c):(s+=.5*c,a-=.5*c);const h=Math.max(1e-5,Math.abs(a-s)),f=.5*h,p=.5*(s+a),m=.5*(o+l),g={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:p-f,maxX:p+f,minY:m-f,maxY:m+f},size:h,calcSize:1/h,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(g.root);for(let b=0;b<i;b++)n=e[r[b]],n.options.mass>0&&this._placeInTree(g.root,n);return g}_updateBranchMass(e,r){const n=e.centerOfMass,i=e.mass+r.options.mass,s=1/i;n.x=n.x*e.mass+r.x*r.options.mass,n.x*=s,n.y=n.y*e.mass+r.y*r.options.mass,n.y*=s,e.mass=i;const o=Math.max(Math.max(r.height,r.radius),r.width);e.maxWidth=e.maxWidth<o?o:e.maxWidth}_placeInTree(e,r,n){(n!=!0||n===void 0)&&this._updateBranchMass(e,r);const i=e.children.NW.range;let s;i.maxX>r.x?i.maxY>r.y?s="NW":s="SW":i.maxY>r.y?s="NE":s="SE",this._placeInRegion(e,r,s)}_placeInRegion(e,r,n){const i=e.children[n];switch(i.childrenCount){case 0:i.children.data=r,i.childrenCount=1,this._updateBranchMass(i,r);break;case 1:i.children.data.x===r.x&&i.children.data.y===r.y?(r.x+=this._rng(),r.y+=this._rng()):(this._splitBranch(i),this._placeInTree(i,r));break;case 4:this._placeInTree(i,r);break}}_splitBranch(e){let r=null;e.childrenCount===1&&(r=e.children.data,e.mass=0,e.centerOfMass.x=0,e.centerOfMass.y=0),e.childrenCount=4,e.children.data=null,this._insertRegion(e,"NW"),this._insertRegion(e,"NE"),this._insertRegion(e,"SW"),this._insertRegion(e,"SE"),r!=null&&this._placeInTree(e,r)}_insertRegion(e,r){let n,i,s,o;const a=.5*e.size;switch(r){case"NW":n=e.range.minX,i=e.range.minX+a,s=e.range.minY,o=e.range.minY+a;break;case"NE":n=e.range.minX+a,i=e.range.maxX,s=e.range.minY,o=e.range.minY+a;break;case"SW":n=e.range.minX,i=e.range.minX+a,s=e.range.minY+a,o=e.range.maxY;break;case"SE":n=e.range.minX+a,i=e.range.maxX,s=e.range.minY+a,o=e.range.maxY;break}e.children[r]={centerOfMass:{x:0,y:0},mass:0,range:{minX:n,maxX:i,minY:s,maxY:o},size:.5*e.size,calcSize:2*e.calcSize,children:{data:null},maxWidth:0,level:e.level+1,childrenCount:0}}_debug(e,r){this.barnesHutTree!==void 0&&(e.lineWidth=1,this._drawBranch(this.barnesHutTree.root,e,r))}_drawBranch(e,r,n){n===void 0&&(n="#FF0000"),e.childrenCount===4&&(this._drawBranch(e.children.NW,r),this._drawBranch(e.children.NE,r),this._drawBranch(e.children.SE,r),this._drawBranch(e.children.SW,r)),r.strokeStyle=n,r.beginPath(),r.moveTo(e.range.minX,e.range.minY),r.lineTo(e.range.maxX,e.range.minY),r.stroke(),r.beginPath(),r.moveTo(e.range.maxX,e.range.minY),r.lineTo(e.range.maxX,e.range.maxY),r.stroke(),r.beginPath(),r.moveTo(e.range.maxX,e.range.maxY),r.lineTo(e.range.minX,e.range.maxY),r.stroke(),r.beginPath(),r.moveTo(e.range.minX,e.range.maxY),r.lineTo(e.range.minX,e.range.minY),r.stroke()}}class RDe{constructor(e,r,n){this._rng=vb("REPULSION SOLVER"),this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i,s,o,a,l;const c=this.body.nodes,d=this.physicsBody.physicsNodeIndices,h=this.physicsBody.forces,f=this.options.nodeDistance,p=-2/3/f,m=4/3;for(let g=0;g<d.length-1;g++){a=c[d[g]];for(let b=g+1;b<d.length;b++)l=c[d[b]],e=l.x-a.x,r=l.y-a.y,n=Math.sqrt(e*e+r*r),n===0&&(n=.1*this._rng(),e=n),n<2*f&&(n<.5*f?o=1:o=p*n+m,o=o/n,i=e*o,s=r*o,h[a.id].x-=i,h[a.id].y-=s,h[l.id].x+=i,h[l.id].y+=s)}}}class MDe{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e,this.overlapAvoidanceFactor=Math.max(0,Math.min(1,this.options.avoidOverlap||0))}solve(){const e=this.body.nodes,r=this.physicsBody.physicsNodeIndices,n=this.physicsBody.forces,i=this.options.nodeDistance;for(let s=0;s<r.length-1;s++){const o=e[r[s]];for(let a=s+1;a<r.length;a++){const l=e[r[a]];if(o.level===l.level){const c=i+this.overlapAvoidanceFactor*((o.shape.radius||0)/2+(l.shape.radius||0)/2),d=l.x-o.x,h=l.y-o.y,f=Math.sqrt(d*d+h*h),p=.05;let m;f<c?m=-Math.pow(p*f,2)+Math.pow(p*c,2):m=0,f!==0&&(m=m/f);const g=d*m,b=h*m;n[o.id].x-=g,n[o.id].y-=b,n[l.id].x+=g,n[l.id].y+=b}}}}}class xO{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r;const n=this.physicsBody.physicsEdgeIndices,i=this.body.edges;let s,o,a;for(let l=0;l<n.length;l++)r=i[n[l]],r.connected===!0&&r.toId!==r.fromId&&this.body.nodes[r.toId]!==void 0&&this.body.nodes[r.fromId]!==void 0&&(r.edgeType.via!==void 0?(e=r.options.length===void 0?this.options.springLength:r.options.length,s=r.to,o=r.edgeType.via,a=r.from,this._calculateSpringForce(s,o,.5*e),this._calculateSpringForce(o,a,.5*e)):(e=r.options.length===void 0?this.options.springLength*1.5:r.options.length,this._calculateSpringForce(r.from,r.to,e)))}_calculateSpringForce(e,r,n){const i=e.x-r.x,s=e.y-r.y,o=Math.max(Math.sqrt(i*i+s*s),.01),a=this.options.springConstant*(n-o)/o,l=i*a,c=s*a;this.physicsBody.forces[e.id]!==void 0&&(this.physicsBody.forces[e.id].x+=l,this.physicsBody.forces[e.id].y+=c),this.physicsBody.forces[r.id]!==void 0&&(this.physicsBody.forces[r.id].x-=l,this.physicsBody.forces[r.id].y-=c)}}class $De{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i,s,o,a,l;const c=this.body.edges,d=.5,h=this.physicsBody.physicsEdgeIndices,f=this.physicsBody.physicsNodeIndices,p=this.physicsBody.forces;for(let x=0;x<f.length;x++){const S=f[x];p[S].springFx=0,p[S].springFy=0}for(let x=0;x<h.length;x++)r=c[h[x]],r.connected===!0&&(e=r.options.length===void 0?this.options.springLength:r.options.length,n=r.from.x-r.to.x,i=r.from.y-r.to.y,l=Math.sqrt(n*n+i*i),l=l===0?.01:l,a=this.options.springConstant*(e-l)/l,s=n*a,o=i*a,r.to.level!=r.from.level?(p[r.toId]!==void 0&&(p[r.toId].springFx-=s,p[r.toId].springFy-=o),p[r.fromId]!==void 0&&(p[r.fromId].springFx+=s,p[r.fromId].springFy+=o)):(p[r.toId]!==void 0&&(p[r.toId].x-=d*s,p[r.toId].y-=d*o),p[r.fromId]!==void 0&&(p[r.fromId].x+=d*s,p[r.fromId].y+=d*o)));a=1;let m,g;for(let x=0;x<f.length;x++){const S=f[x];m=Math.min(a,Math.max(-a,p[S].springFx)),g=Math.min(a,Math.max(-a,p[S].springFy)),p[S].x+=m,p[S].y+=g}let b=0,y=0;for(let x=0;x<f.length;x++){const S=f[x];b+=p[S].x,y+=p[S].y}const v=b/f.length,w=y/f.length;for(let x=0;x<f.length;x++){const S=f[x];p[S].x-=v,p[S].y-=w}}}class cy{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i;const s=this.body.nodes,o=this.physicsBody.physicsNodeIndices,a=this.physicsBody.forces;for(let l=0;l<o.length;l++){const c=o[l];i=s[c],e=-i.x,r=-i.y,n=Math.sqrt(e*e+r*r),this._calculateForces(n,e,r,a,i)}}_calculateForces(e,r,n,i,s){const o=e===0?0:this.options.centralGravity/e;i[s.id].x=r*o,i[s.id].y=n*o}}class DDe extends Cae{constructor(e,r,n){super(e,r,n),this._rng=vb("FORCE ATLAS 2 BASED REPULSION SOLVER")}_calculateForces(e,r,n,i,s){e===0&&(e=.1*this._rng(),r=e),this.overlapAvoidanceFactor<1&&i.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,e-i.shape.radius));const o=i.edges.length+1,a=this.options.gravitationalConstant*s.mass*i.options.mass*o/Math.pow(e,2),l=r*a,c=n*a;this.physicsBody.forces[i.id].x+=l,this.physicsBody.forces[i.id].y+=c}}class ADe extends cy{constructor(e,r,n){super(e,r,n)}_calculateForces(e,r,n,i,s){if(e>0){const o=s.edges.length+1,a=this.options.centralGravity*o*s.options.mass;i[s.id].x=r*a,i[s.id].y=n*a}}}class FDe{constructor(e){this.body=e,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}},Sr(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("initPhysics",()=>{this.initPhysics()}),this.body.emitter.on("_layoutFailed",()=>{this.layoutFailed=!0}),this.body.emitter.on("resetPhysics",()=>{this.stopSimulation(),this.ready=!1}),this.body.emitter.on("disablePhysics",()=>{this.physicsEnabled=!1,this.stopSimulation()}),this.body.emitter.on("restorePhysics",()=>{this.setOptions(this.options),this.ready===!0&&this.startSimulation()}),this.body.emitter.on("startSimulation",()=>{this.ready===!0&&this.startSimulation()}),this.body.emitter.on("stopSimulation",()=>{this.stopSimulation()}),this.body.emitter.on("destroy",()=>{this.stopSimulation(!1),this.body.emitter.off()}),this.body.emitter.on("_dataChanged",()=>{this.updatePhysicsData()})}setOptions(e){if(e!==void 0)if(e===!1)this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation();else if(e===!0)this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation();else{this.physicsEnabled=!0,Gv(["stabilization"],this.options,e),Oi(this.options,e,"stabilization"),e.enabled===void 0&&(this.options.enabled=!0),this.options.enabled===!1&&(this.physicsEnabled=!1,this.stopSimulation());const r=this.options.wind;r&&((typeof r.x!="number"||FI(r.x))&&(r.x=0),(typeof r.y!="number"||FI(r.y))&&(r.y=0)),this.timestep=this.options.timestep}this.init()}init(){let e;this.options.solver==="forceAtlas2Based"?(e=this.options.forceAtlas2Based,this.nodesSolver=new DDe(this.body,this.physicsBody,e),this.edgesSolver=new xO(this.body,this.physicsBody,e),this.gravitySolver=new ADe(this.body,this.physicsBody,e)):this.options.solver==="repulsion"?(e=this.options.repulsion,this.nodesSolver=new RDe(this.body,this.physicsBody,e),this.edgesSolver=new xO(this.body,this.physicsBody,e),this.gravitySolver=new cy(this.body,this.physicsBody,e)):this.options.solver==="hierarchicalRepulsion"?(e=this.options.hierarchicalRepulsion,this.nodesSolver=new MDe(this.body,this.physicsBody,e),this.edgesSolver=new $De(this.body,this.physicsBody,e),this.gravitySolver=new cy(this.body,this.physicsBody,e)):(e=this.options.barnesHut,this.nodesSolver=new Cae(this.body,this.physicsBody,e),this.edgesSolver=new xO(this.body,this.physicsBody,e),this.gravitySolver=new cy(this.body,this.physicsBody,e)),this.modelOptions=e}initPhysics(){this.physicsEnabled===!0&&this.options.enabled===!0?this.options.stabilization.enabled===!0?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}startSimulation(){if(this.physicsEnabled===!0&&this.options.enabled===!0){if(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),this.viewFunction===void 0){var e;this.viewFunction=ne(e=this.simulationStep).call(e,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}else this.body.emitter.emit("_redraw")}stopSimulation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.stabilized=!0,e===!0&&this._emitStabilized(),this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,e===!0&&this.body.emitter.emit("_stopRendering"))}simulationStep(){const e=Uv();this.physicsTick(),(Uv()-e<.4*this.simulationInterval||this.runDoubleSpeed===!0)&&this.stabilized===!1&&(this.physicsTick(),this.runDoubleSpeed=!0),this.stabilized===!0&&this.stopSimulation()}_emitStabilized(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.stabilizationIterations;(this.stabilizationIterations>1||this.startedStabilization===!0)&&Eo(()=>{this.body.emitter.emit("stabilized",{iterations:e}),this.startedStabilization=!1,this.stabilizationIterations=0},0)}physicsStep(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}adjustTimeStep(){this._evaluateStepQuality()===!0?this.timestep=1.2*this.timestep:this.timestep/1.2<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/1.2))}physicsTick(){this._startStabilizing(),this.stabilized!==!0&&(this.adaptiveTimestep===!0&&this.adaptiveTimestepEnabled===!0?(this.adaptiveCounter%this.adaptiveInterval===0?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1):(this.timestep=this.options.timestep,this.physicsStep()),this.stabilized===!0&&this.revert(),this.stabilizationIterations++)}updatePhysicsData(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];const e=this.body.nodes,r=this.body.edges;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&e[n].options.physics===!0&&this.physicsBody.physicsNodeIndices.push(e[n].id);for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&r[n].options.physics===!0&&this.physicsBody.physicsEdgeIndices.push(r[n].id);for(let n=0;n<this.physicsBody.physicsNodeIndices.length;n++){const i=this.physicsBody.physicsNodeIndices[n];this.physicsBody.forces[i]={x:0,y:0},this.physicsBody.velocities[i]===void 0&&(this.physicsBody.velocities[i]={x:0,y:0})}for(const n in this.physicsBody.velocities)e[n]===void 0&&delete this.physicsBody.velocities[n]}revert(){const e=ar(this.previousStates),r=this.body.nodes,n=this.physicsBody.velocities;this.referenceState={};for(let i=0;i<e.length;i++){const s=e[i];r[s]!==void 0?r[s].options.physics===!0&&(this.referenceState[s]={positions:{x:r[s].x,y:r[s].y}},n[s].x=this.previousStates[s].vx,n[s].y=this.previousStates[s].vy,r[s].x=this.previousStates[s].x,r[s].y=this.previousStates[s].y):delete this.previousStates[s]}}_evaluateStepQuality(){let e,r,n;const i=this.body.nodes,s=this.referenceState,o=.3;for(const a in this.referenceState)if(Object.prototype.hasOwnProperty.call(this.referenceState,a)&&i[a]!==void 0&&(e=i[a].x-s[a].positions.x,r=i[a].y-s[a].positions.y,n=Math.sqrt(Math.pow(e,2)+Math.pow(r,2)),n>o))return!1;return!0}moveNodes(){const e=this.physicsBody.physicsNodeIndices;let r=0,n=0;const i=5;for(let s=0;s<e.length;s++){const o=e[s],a=this._performStep(o);r=Math.max(r,a),n+=a}this.adaptiveTimestepEnabled=n/e.length<i,this.stabilized=r<this.options.minVelocity}calculateComponentVelocity(e,r,n){const i=this.modelOptions.damping*e,s=(r-i)/n;e+=s*this.timestep;const o=this.options.maxVelocity||1e9;return Math.abs(e)>o&&(e=e>0?o:-o),e}_performStep(e){const r=this.body.nodes[e],n=this.physicsBody.forces[e];this.options.wind&&(n.x+=this.options.wind.x,n.y+=this.options.wind.y);const i=this.physicsBody.velocities[e];return this.previousStates[e]={x:r.x,y:r.y,vx:i.x,vy:i.y},r.options.fixed.x===!1?(i.x=this.calculateComponentVelocity(i.x,n.x,r.options.mass),r.x+=i.x*this.timestep):(n.x=0,i.x=0),r.options.fixed.y===!1?(i.y=this.calculateComponentVelocity(i.y,n.y,r.options.mass),r.y+=i.y*this.timestep):(n.y=0,i.y=0),Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2))}_freezeNodes(){const e=this.body.nodes;for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&e[r].x&&e[r].y){const n=e[r].options.fixed;this.freezeCache[r]={x:n.x,y:n.y},n.x=!0,n.y=!0}}_restoreFrozenNodes(){const e=this.body.nodes;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&this.freezeCache[r]!==void 0&&(e[r].options.fixed.x=this.freezeCache[r].x,e[r].options.fixed.y=this.freezeCache[r].y);this.freezeCache={}}stabilize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.stabilization.iterations;if(typeof e!="number"&&(e=this.options.stabilization.iterations,console.error("The stabilize method needs a numeric amount of iterations. Switching to default: ",e)),this.physicsBody.physicsNodeIndices.length===0){this.ready=!0;return}this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=e,this.options.stabilization.onlyDynamicEdges===!0&&this._freezeNodes(),this.stabilizationIterations=0,Eo(()=>this._stabilizationBatch(),0)}_startStabilizing(){return this.startedStabilization===!0?!1:(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}_stabilizationBatch(){const e=()=>this.stabilized===!1&&this.stabilizationIterations<this.targetIterations,r=()=>{this.body.emitter.emit("stabilizationProgress",{iterations:this.stabilizationIterations,total:this.targetIterations})};this._startStabilizing()&&r();let n=0;for(;e()&&n<this.options.stabilization.updateInterval;)this.physicsTick(),n++;if(r(),e()){var i;Eo(ne(i=this._stabilizationBatch).call(i,this),0)}else this._finalizeStabilization()}_finalizeStabilization(){this.body.emitter.emit("_allowRedraw"),this.options.stabilization.fit===!0&&this.body.emitter.emit("fit"),this.options.stabilization.onlyDynamicEdges===!0&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),this.stabilized===!0?this._emitStabilized():this.startSimulation(),this.ready=!0}_drawForces(e){for(let r=0;r<this.physicsBody.physicsNodeIndices.length;r++){const n=this.physicsBody.physicsNodeIndices[r],i=this.body.nodes[n],s=this.physicsBody.forces[n],o=20,a=.03,l=Math.sqrt(Math.pow(s.x,2)+Math.pow(s.x,2)),c=Math.min(Math.max(5,l),15),d=3*c,h=$I((180-Math.min(1,Math.max(0,a*l))*180)/360,1,1),f={x:i.x+o*s.x,y:i.y+o*s.y};e.lineWidth=c,e.strokeStyle=h,e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(f.x,f.y),e.stroke();const p=Math.atan2(s.y,s.x);e.fillStyle=h,Eae.draw(e,{type:"arrow",point:f,angle:p,length:d}),Rm(e).call(e)}}}const Jr=[];for(let t=0;t<256;++t)Jr.push((t+256).toString(16).slice(1));function qDe(t,e=0){return(Jr[t[e+0]]+Jr[t[e+1]]+Jr[t[e+2]]+Jr[t[e+3]]+"-"+Jr[t[e+4]]+Jr[t[e+5]]+"-"+Jr[t[e+6]]+Jr[t[e+7]]+"-"+Jr[t[e+8]]+Jr[t[e+9]]+"-"+Jr[t[e+10]]+Jr[t[e+11]]+Jr[t[e+12]]+Jr[t[e+13]]+Jr[t[e+14]]+Jr[t[e+15]]).toLowerCase()}let wO;const LDe=new Uint8Array(16);function BDe(){if(!wO){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");wO=crypto.getRandomValues.bind(crypto)}return wO(LDe)}const zDe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var bQ={randomUUID:zDe};function VDe(t,e,r){var i;t=t||{};const n=t.random??((i=t.rng)==null?void 0:i.call(t))??BDe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,qDe(n)}function zf(t,e,r){return bQ.randomUUID&&!t?bQ.randomUUID():VDe(t)}class Cn{constructor(){}static getRange(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=1e9,i=-1e9,s=1e9,o=-1e9,a;if(r.length>0)for(let l=0;l<r.length;l++)a=e[r[l]],s>a.shape.boundingBox.left&&(s=a.shape.boundingBox.left),o<a.shape.boundingBox.right&&(o=a.shape.boundingBox.right),n>a.shape.boundingBox.top&&(n=a.shape.boundingBox.top),i<a.shape.boundingBox.bottom&&(i=a.shape.boundingBox.bottom);return s===1e9&&o===-1e9&&n===1e9&&i===-1e9&&(n=0,i=0,s=0,o=0),{minX:s,maxX:o,minY:n,maxY:i}}static getRangeCore(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=1e9,i=-1e9,s=1e9,o=-1e9,a;if(r.length>0)for(let l=0;l<r.length;l++)a=e[r[l]],s>a.x&&(s=a.x),o<a.x&&(o=a.x),n>a.y&&(n=a.y),i<a.y&&(i=a.y);return s===1e9&&o===-1e9&&n===1e9&&i===-1e9&&(n=0,i=0,s=0,o=0),{minX:s,maxX:o,minY:n,maxY:i}}static findCenter(e){return{x:.5*(e.maxX+e.minX),y:.5*(e.maxY+e.minY)}}static cloneOptions(e,r){const n={};return r===void 0||r==="node"?($t(n,e.options,!0),n.x=e.x,n.y=e.y,n.amountOfConnections=e.edges.length):$t(n,e.options,!0),n}}class UDe extends Vt{constructor(e,r,n,i,s,o){super(e,r,n,i,s,o),this.isCluster=!0,this.containedNodes={},this.containedEdges={}}_openChildCluster(e){const r=this.body.nodes[e];if(this.containedNodes[e]===void 0)throw new Error("node with id: "+e+" not in current cluster");if(!r.isCluster)throw new Error("node with id: "+e+" is not a cluster");delete this.containedNodes[e],Ze(r.edges,n=>{delete this.containedEdges[n.id]}),Ze(r.containedNodes,(n,i)=>{this.containedNodes[i]=n}),r.containedNodes={},Ze(r.containedEdges,(n,i)=>{this.containedEdges[i]=n}),r.containedEdges={},Ze(r.edges,n=>{Ze(this.edges,i=>{var s,o;const a=Nt(s=i.clusteringEdgeReplacingIds).call(s,n.id);a!==-1&&(Ze(n.clusteringEdgeReplacingIds,l=>{i.clusteringEdgeReplacingIds.push(l),this.body.edges[l].edgeReplacedById=i.id}),_o(o=i.clusteringEdgeReplacingIds).call(o,a,1))})}),r.edges=[]}}class HDe{constructor(e){this.body=e,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},Sr(this.options,this.defaultOptions),this.body.emitter.on("_resetData",()=>{this.clusteredNodes={},this.clusteredEdges={}})}clusterByHubsize(e,r){e===void 0?e=this._getHubSize():typeof e=="object"&&(r=this._checkOptions(e),e=this._getHubSize());const n=[];for(let i=0;i<this.body.nodeIndices.length;i++){const s=this.body.nodes[this.body.nodeIndices[i]];s.edges.length>=e&&n.push(s.id)}for(let i=0;i<n.length;i++)this.clusterByConnection(n[i],r,!0);this.body.emitter.emit("_dataChanged")}cluster(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.joinCondition===void 0)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");e=this._checkOptions(e);const n={},i={};Ze(this.body.nodes,(s,o)=>{s.options&&e.joinCondition(s.options)===!0&&(n[o]=s,Ze(s.edges,a=>{this.clusteredEdges[a.id]===void 0&&(i[a.id]=a)}))}),this._cluster(n,i,e,r)}clusterByEdgeCount(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;r=this._checkOptions(r);const i=[],s={};let o,a,l;for(let c=0;c<this.body.nodeIndices.length;c++){const d={},h={},f=this.body.nodeIndices[c],p=this.body.nodes[f];if(s[f]===void 0){l=0,a=[];for(let m=0;m<p.edges.length;m++)o=p.edges[m],this.clusteredEdges[o.id]===void 0&&(o.toId!==o.fromId&&l++,a.push(o));if(l===e){const m=function(b){if(r.joinCondition===void 0||r.joinCondition===null)return!0;const y=Cn.cloneOptions(b);return r.joinCondition(y)};let g=!0;for(let b=0;b<a.length;b++){o=a[b];const y=this._getConnectedId(o,f);if(m(p))h[o.id]=o,d[f]=p,d[y]=this.body.nodes[y],s[f]=!0;else{g=!1;break}}if(ar(d).length>0&&ar(h).length>0&&g===!0){const y=function(){for(let v=0;v<i.length;++v)for(const w in d)if(i[v].nodes[w]!==void 0)return i[v]}();if(y!==void 0){for(const v in d)y.nodes[v]===void 0&&(y.nodes[v]=d[v]);for(const v in h)y.edges[v]===void 0&&(y.edges[v]=h[v])}else i.push({nodes:d,edges:h})}}}}for(let c=0;c<i.length;c++)this._cluster(i[c].nodes,i[c].edges,r,!1);n===!0&&this.body.emitter.emit("_dataChanged")}clusterOutliers(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(1,e,r)}clusterBridges(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(2,e,r)}clusterByConnection(e,r){var n;let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0)throw new Error("No nodeId supplied to clusterByConnection!");if(this.body.nodes[e]===void 0)throw new Error("The nodeId given to clusterByConnection does not exist!");const s=this.body.nodes[e];r=this._checkOptions(r,s),r.clusterNodeProperties.x===void 0&&(r.clusterNodeProperties.x=s.x),r.clusterNodeProperties.y===void 0&&(r.clusterNodeProperties.y=s.y),r.clusterNodeProperties.fixed===void 0&&(r.clusterNodeProperties.fixed={},r.clusterNodeProperties.fixed.x=s.options.fixed.x,r.clusterNodeProperties.fixed.y=s.options.fixed.y);const o={},a={},l=s.id,c=Cn.cloneOptions(s);o[l]=s;for(let h=0;h<s.edges.length;h++){const f=s.edges[h];if(this.clusteredEdges[f.id]===void 0){const p=this._getConnectedId(f,l);if(this.clusteredNodes[p]===void 0)if(p!==l)if(r.joinCondition===void 0)a[f.id]=f,o[p]=this.body.nodes[p];else{const m=Cn.cloneOptions(this.body.nodes[p]);r.joinCondition(c,m)===!0&&(a[f.id]=f,o[p]=this.body.nodes[p])}else a[f.id]=f}}const d=Ud(n=ar(o)).call(n,function(h){return o[h].id});for(const h in o){if(!Object.prototype.hasOwnProperty.call(o,h))continue;const f=o[h];for(let p=0;p<f.edges.length;p++){const m=f.edges[p];Nt(d).call(d,this._getConnectedId(m,f.id))>-1&&(a[m.id]=m)}}this._cluster(o,a,r,i)}_createClusterEdges(e,r,n,i){let s,o,a,l,c,d;const h=ar(e),f=[];for(let g=0;g<h.length;g++){o=h[g],a=e[o];for(let b=0;b<a.edges.length;b++)s=a.edges[b],this.clusteredEdges[s.id]===void 0&&(s.toId==s.fromId?r[s.id]=s:s.toId==o?(l=n.id,c=s.fromId,d=c):(l=s.toId,c=n.id,d=l),e[d]===void 0&&f.push({edge:s,fromId:c,toId:l}))}const p=[],m=function(g){for(let b=0;b<p.length;b++){const y=p[b],v=g.fromId===y.fromId&&g.toId===y.toId,w=g.fromId===y.toId&&g.toId===y.fromId;if(v||w)return y}return null};for(let g=0;g<f.length;g++){const b=f[g],y=b.edge;let v=m(b);v===null?(v=this._createClusteredEdge(b.fromId,b.toId,y,i),p.push(v)):v.clusteringEdgeReplacingIds.push(y.id),this.body.edges[y.id].edgeReplacedById=v.id,this._backupEdgeOptions(y),y.setOptions({physics:!1})}}_checkOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.clusterEdgeProperties===void 0&&(e.clusterEdgeProperties={}),e.clusterNodeProperties===void 0&&(e.clusterNodeProperties={}),e}_cluster(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;const s=[];for(const d in e)Object.prototype.hasOwnProperty.call(e,d)&&this.clusteredNodes[d]!==void 0&&s.push(d);for(let d=0;d<s.length;++d)delete e[s[d]];if(ar(e).length==0||ar(e).length==1&&n.clusterNodeProperties.allowSingleNodeCluster!=!0)return;let o=$t({},n.clusterNodeProperties);if(n.processProperties!==void 0){const d=[];for(const f in e)if(Object.prototype.hasOwnProperty.call(e,f)){const p=Cn.cloneOptions(e[f]);d.push(p)}const h=[];for(const f in r)if(Object.prototype.hasOwnProperty.call(r,f)&&f.substr(0,12)!=="clusterEdge:"){const p=Cn.cloneOptions(r[f],"edge");h.push(p)}if(o=n.processProperties(o,d,h),!o)throw new Error("The processProperties function does not return properties!")}o.id===void 0&&(o.id="cluster:"+zf());const a=o.id;o.label===void 0&&(o.label="cluster");let l;o.x===void 0&&(l=this._getClusterPosition(e),o.x=l.x),o.y===void 0&&(l===void 0&&(l=this._getClusterPosition(e)),o.y=l.y),o.id=a;const c=this.body.functions.createNode(o,UDe);c.containedNodes=e,c.containedEdges=r,c.clusterEdgeProperties=n.clusterEdgeProperties,this.body.nodes[o.id]=c,this._clusterEdges(e,r,o,n.clusterEdgeProperties),o.id=void 0,i===!0&&this.body.emitter.emit("_dataChanged")}_backupEdgeOptions(e){this.clusteredEdges[e.id]===void 0&&(this.clusteredEdges[e.id]={physics:e.options.physics})}_restoreEdge(e){const r=this.clusteredEdges[e.id];r!==void 0&&(e.setOptions({physics:r.physics}),delete this.clusteredEdges[e.id])}isCluster(e){return this.body.nodes[e]!==void 0?this.body.nodes[e].isCluster===!0:(console.error("Node does not exist."),!1)}_getClusterPosition(e){const r=ar(e);let n=e[r[0]].x,i=e[r[0]].x,s=e[r[0]].y,o=e[r[0]].y,a;for(let l=1;l<r.length;l++)a=e[r[l]],n=a.x<n?a.x:n,i=a.x>i?a.x:i,s=a.y<s?a.y:s,o=a.y>o?a.y:o;return{x:.5*(n+i),y:.5*(s+o)}}openCluster(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0)throw new Error("No clusterNodeId supplied to openCluster.");const i=this.body.nodes[e];if(i===void 0)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(i.isCluster!==!0||i.containedNodes===void 0||i.containedEdges===void 0)throw new Error("The node:"+e+" is not a valid cluster.");const s=this.findNode(e),o=Nt(s).call(s,e)-1;if(o>=0){const d=s[o];this.body.nodes[d]._openChildCluster(e),delete this.body.nodes[e],n===!0&&this.body.emitter.emit("_dataChanged");return}const a=i.containedNodes,l=i.containedEdges;if(r!==void 0&&r.releaseFunction!==void 0&&typeof r.releaseFunction=="function"){const d={},h={x:i.x,y:i.y};for(const p in a)if(Object.prototype.hasOwnProperty.call(a,p)){const m=this.body.nodes[p];d[p]={x:m.x,y:m.y}}const f=r.releaseFunction(h,d);for(const p in a)if(Object.prototype.hasOwnProperty.call(a,p)){const m=this.body.nodes[p];f[p]!==void 0&&(m.x=f[p].x===void 0?i.x:f[p].x,m.y=f[p].y===void 0?i.y:f[p].y)}}else Ze(a,function(d){d.options.fixed.x===!1&&(d.x=i.x),d.options.fixed.y===!1&&(d.y=i.y)});for(const d in a)if(Object.prototype.hasOwnProperty.call(a,d)){const h=this.body.nodes[d];h.vx=i.vx,h.vy=i.vy,h.setOptions({physics:!0}),delete this.clusteredNodes[d]}const c=[];for(let d=0;d<i.edges.length;d++)c.push(i.edges[d]);for(let d=0;d<c.length;d++){const h=c[d],f=this._getConnectedId(h,e),p=this.clusteredNodes[f];for(let m=0;m<h.clusteringEdgeReplacingIds.length;m++){const g=h.clusteringEdgeReplacingIds[m],b=this.body.edges[g];if(b!==void 0)if(p!==void 0){const y=this.body.nodes[p.clusterId];y.containedEdges[b.id]=b,delete l[b.id];let v=b.fromId,w=b.toId;b.toId==f?w=p.clusterId:v=p.clusterId,this._createClusteredEdge(v,w,b,y.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(b)}h.remove()}for(const d in l)Object.prototype.hasOwnProperty.call(l,d)&&this._restoreEdge(l[d]);delete this.body.nodes[e],n===!0&&this.body.emitter.emit("_dataChanged")}getNodesInCluster(e){const r=[];if(this.isCluster(e)===!0){const n=this.body.nodes[e].containedNodes;for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&r.push(this.body.nodes[i].id)}return r}findNode(e){const r=[];let i=0,s;for(;this.clusteredNodes[e]!==void 0&&i<100;){if(s=this.body.nodes[e],s===void 0)return[];r.push(s.id),e=this.clusteredNodes[e].clusterId,i++}return s=this.body.nodes[e],s===void 0?[]:(r.push(s.id),lc(r).call(r),r)}updateClusteredNode(e,r){if(e===void 0)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(r===void 0)throw new Error("No newOptions supplied to updateClusteredNode.");if(this.body.nodes[e]===void 0)throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[e].setOptions(r),this.body.emitter.emit("_dataChanged")}updateEdge(e,r){if(e===void 0)throw new Error("No startEdgeId supplied to updateEdge.");if(r===void 0)throw new Error("No newOptions supplied to updateEdge.");if(this.body.edges[e]===void 0)throw new Error("The startEdgeId supplied to updateEdge does not exist.");const n=this.getClusteredEdges(e);for(let i=0;i<n.length;i++)this.body.edges[n[i]].setOptions(r);this.body.emitter.emit("_dataChanged")}getClusteredEdges(e){const r=[];let i=0;for(;e!==void 0&&this.body.edges[e]!==void 0&&i<100;)r.push(this.body.edges[e].id),e=this.body.edges[e].edgeReplacedById,i++;return lc(r).call(r),r}getBaseEdge(e){return this.getBaseEdges(e)[0]}getBaseEdges(e){const r=[e],n=[],i=[],s=100;let o=0;for(;r.length>0&&o<s;){const a=r.pop();if(a===void 0)continue;const l=this.body.edges[a];if(l===void 0)continue;o++;const c=l.clusteringEdgeReplacingIds;if(c===void 0)i.push(a);else for(let d=0;d<c.length;++d){const h=c[d];Nt(r).call(r,c)!==-1||Nt(n).call(n,c)!==-1||r.push(h)}n.push(a)}return i}_getConnectedId(e,r){return e.toId!=r?e.toId:(e.fromId!=r,e.fromId)}_getHubSize(){let e=0,r=0,n=0,i=0;for(let l=0;l<this.body.nodeIndices.length;l++){const c=this.body.nodes[this.body.nodeIndices[l]];c.edges.length>i&&(i=c.edges.length),e+=c.edges.length,r+=Math.pow(c.edges.length,2),n+=1}e=e/n,r=r/n;const s=r-Math.pow(e,2),o=Math.sqrt(s);let a=Math.floor(e+2*o);return a>i&&(a=i),a}_createClusteredEdge(e,r,n,i,s){const o=Cn.cloneOptions(n,"edge");$t(o,i),o.from=e,o.to=r,o.id="clusterEdge:"+zf(),s!==void 0&&$t(o,s);const a=this.body.functions.createEdge(o);return a.clusteringEdgeReplacingIds=[n.id],a.connect(),this.body.edges[a.id]=a,a}_clusterEdges(e,r,n,i){if(r instanceof Xa){const s=r,o={};o[s.id]=s,r=o}if(e instanceof Vt){const s=e,o={};o[s.id]=s,e=o}if(n==null)throw new Error("_clusterEdges: parameter clusterNode required");i===void 0&&(i=n.clusterEdgeProperties),this._createClusterEdges(e,r,n,i);for(const s in r)if(Object.prototype.hasOwnProperty.call(r,s)&&this.body.edges[s]!==void 0){const o=this.body.edges[s];this._backupEdgeOptions(o),o.setOptions({physics:!1})}for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(this.clusteredNodes[s]={clusterId:n.id,node:this.body.nodes[s]},this.body.nodes[s].setOptions({physics:!1}))}_getClusterNodeForNode(e){if(e===void 0)return;const r=this.clusteredNodes[e];if(r===void 0)return;const n=r.clusterId;if(n!==void 0)return this.body.nodes[n]}_filter(e,r){const n=[];return Ze(e,i=>{r(i)&&n.push(i)}),n}_updateState(){let e;const r=[],n={},i=l=>{Ze(this.body.nodes,c=>{c.isCluster===!0&&l(c)})};for(e in this.clusteredNodes){if(!Object.prototype.hasOwnProperty.call(this.clusteredNodes,e))continue;this.body.nodes[e]===void 0&&r.push(e)}i(function(l){for(let c=0;c<r.length;c++)delete l.containedNodes[r[c]]});for(let l=0;l<r.length;l++)delete this.clusteredNodes[r[l]];Ze(this.clusteredEdges,l=>{const c=this.body.edges[l];(c===void 0||!c.endPointsValid())&&(n[l]=l)}),i(function(l){Ze(l.containedEdges,(c,d)=>{!c.endPointsValid()&&!n[d]&&(n[d]=d)})}),Ze(this.body.edges,(l,c)=>{let d=!0;const h=l.clusteringEdgeReplacingIds;if(h!==void 0){let f=0;Ze(h,p=>{const m=this.body.edges[p];m!==void 0&&m.endPointsValid()&&(f+=1)}),d=f>0}(!l.endPointsValid()||!d)&&(n[c]=c)}),i(l=>{Ze(n,c=>{delete l.containedEdges[c],Ze(l.edges,(d,h)=>{if(d.id===c){l.edges[h]=null;return}d.clusteringEdgeReplacingIds=this._filter(d.clusteringEdgeReplacingIds,function(f){return!n[f]})}),l.edges=this._filter(l.edges,function(d){return d!==null})})}),Ze(n,l=>{delete this.clusteredEdges[l]}),Ze(n,l=>{delete this.body.edges[l]});const s=ar(this.body.edges);Ze(s,l=>{const c=this.body.edges[l],d=this._isClusteredNode(c.fromId)||this._isClusteredNode(c.toId);if(d!==this._isClusteredEdge(c.id))if(d){const h=this._getClusterNodeForNode(c.fromId);h!==void 0&&this._clusterEdges(this.body.nodes[c.fromId],c,h);const f=this._getClusterNodeForNode(c.toId);f!==void 0&&this._clusterEdges(this.body.nodes[c.toId],c,f)}else delete this._clusterEdges[l],this._restoreEdge(c)});let o=!1,a=!0;for(;a;){const l=[];i(function(c){const d=ar(c.containedNodes).length,h=c.options.allowSingleNodeCluster===!0;(h&&d<1||!h&&d<2)&&l.push(c.id)});for(let c=0;c<l.length;++c)this.openCluster(l[c],{},!1);a=l.length>0,o=o||a}o&&this._updateState()}_isClusteredNode(e){return this.clusteredNodes[e]!==void 0}_isClusteredEdge(e){return this.clusteredEdges[e]!==void 0}}class WDe{constructor(e,r){this.body=e,this.canvas=r,this.redrawRequested=!1,this.requestAnimationFrameRequestId=void 0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},Sr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e;this.body.emitter.on("dragStart",()=>{this.dragging=!0}),this.body.emitter.on("dragEnd",()=>{this.dragging=!1}),this.body.emitter.on("zoom",()=>{this.zooming=!0,window.clearTimeout(this.zoomTimeoutId),this.zoomTimeoutId=Eo(()=>{var r;this.zooming=!1,ne(r=this._requestRedraw).call(r,this)()},250)}),this.body.emitter.on("_resizeNodes",()=>{this._resizeNodes()}),this.body.emitter.on("_redraw",()=>{this.renderingActive===!1&&this._redraw()}),this.body.emitter.on("_blockRedraw",()=>{this.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",()=>{this.allowRedraw=!0,this.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",ne(e=this._requestRedraw).call(e,this)),this.body.emitter.on("_startRendering",()=>{this.renderRequests+=1,this.renderingActive=!0,this._startRendering()}),this.body.emitter.on("_stopRendering",()=>{this.renderRequests-=1,this.renderingActive=this.renderRequests>0,this.requestAnimationFrameRequestId=void 0}),this.body.emitter.on("destroy",()=>{this.renderRequests=0,this.allowRedraw=!1,this.renderingActive=!1,window.cancelAnimationFrame(this.requestAnimationFrameRequestId),this.body.emitter.off()})}setOptions(e){e!==void 0&&jh(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"],this.options,e)}_startRendering(){if(this.renderingActive===!0&&this.requestAnimationFrameRequestId===void 0){var e;this.requestAnimationFrameRequestId=window.requestAnimationFrame(ne(e=this._renderStep).call(e,this),this.simulationInterval)}}_renderStep(){this.renderingActive===!0&&(this.requestAnimationFrameRequestId=void 0,this._startRendering(),this._redraw())}redraw(){this.body.emitter.emit("setSize"),this._redraw()}_requestRedraw(){this.redrawRequested!==!0&&this.renderingActive===!1&&this.allowRedraw===!0&&(this.redrawRequested=!0,window.requestAnimationFrame(()=>{this._redraw(!1)}))}_redraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.allowRedraw===!0){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;const r={drawExternalLabels:null};(this.canvas.frame.canvas.width===0||this.canvas.frame.canvas.height===0)&&this.canvas.setSize(),this.canvas.setTransform();const n=this.canvas.getContext(),i=this.canvas.frame.canvas.clientWidth,s=this.canvas.frame.canvas.clientHeight;if(n.clearRect(0,0,i,s),this.canvas.frame.clientWidth===0)return;if(n.save(),n.translate(this.body.view.translation.x,this.body.view.translation.y),n.scale(this.body.view.scale,this.body.view.scale),n.beginPath(),this.body.emitter.emit("beforeDrawing",n),n.closePath(),e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawEdges(n),this.dragging===!1||this.dragging===!0&&this.options.hideNodesOnDrag===!1){const{drawExternalLabels:o}=this._drawNodes(n,e);r.drawExternalLabels=o}e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawArrows(n),r.drawExternalLabels!=null&&r.drawExternalLabels(),e===!1&&this._drawSelectionBox(n),n.beginPath(),this.body.emitter.emit("afterDrawing",n),n.closePath(),n.restore(),e===!0&&n.clearRect(0,0,i,s)}}_resizeNodes(){this.canvas.setTransform();const e=this.canvas.getContext();e.save(),e.translate(this.body.view.translation.x,this.body.view.translation.y),e.scale(this.body.view.scale,this.body.view.scale);const r=this.body.nodes;let n;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n=r[i],n.resize(e),n.updateBoundingBox(e,n.selected));e.restore()}_drawNodes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.nodes,i=this.body.nodeIndices;let s;const o=[],a=[],l=20,c=this.canvas.DOMtoCanvas({x:-l,y:-l}),d=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+l,y:this.canvas.frame.canvas.clientHeight+l}),h={top:c.y,left:c.x,bottom:d.y,right:d.x},f=[];for(let b=0;b<i.length;b++)if(s=n[i[b]],s.hover)a.push(i[b]);else if(s.isSelected())o.push(i[b]);else if(r===!0){const y=s.draw(e);y.drawExternalLabel!=null&&f.push(y.drawExternalLabel)}else if(s.isBoundingBoxOverlappingWith(h)===!0){const y=s.draw(e);y.drawExternalLabel!=null&&f.push(y.drawExternalLabel)}else s.updateBoundingBox(e,s.selected);let p;const m=o.length,g=a.length;for(p=0;p<m;p++){s=n[o[p]];const b=s.draw(e);b.drawExternalLabel!=null&&f.push(b.drawExternalLabel)}for(p=0;p<g;p++){s=n[a[p]];const b=s.draw(e);b.drawExternalLabel!=null&&f.push(b.drawExternalLabel)}return{drawExternalLabels:()=>{for(const b of f)b()}}}_drawEdges(e){const r=this.body.edges,n=this.body.edgeIndices;for(let i=0;i<n.length;i++){const s=r[n[i]];s.connected===!0&&s.draw(e)}}_drawArrows(e){const r=this.body.edges,n=this.body.edgeIndices;for(let i=0;i<n.length;i++){const s=r[n[i]];s.connected===!0&&s.drawArrows(e)}}_drawSelectionBox(e){if(this.body.selectionBox.show){e.beginPath();const r=this.body.selectionBox.position.end.x-this.body.selectionBox.position.start.x,n=this.body.selectionBox.position.end.y-this.body.selectionBox.position.start.y;e.rect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,r,n),e.fillStyle="rgba(151, 194, 252, 0.2)",e.fillRect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,r,n),e.strokeStyle="rgba(151, 194, 252, 1)",e.stroke()}else e.closePath()}}var SO,xQ;function KDe(){if(xQ)return SO;xQ=1,Poe();var t=Tt();return SO=t.setInterval,SO}var _O,wQ;function GDe(){return wQ||(wQ=1,_O=KDe()),_O}var YDe=GDe(),QDe=ze(YDe);function Xv(t,e){e.inputHandler=function(r){r.isFirst&&e(r)},t.on("hammer.input",e.inputHandler)}function kae(t,e){return e.inputHandler=function(r){r.isFinal&&e(r)},t.on("hammer.input",e.inputHandler)}class XDe{constructor(e){this.body=e,this.pixelRatio=1,this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this._cleanupCallbacks=[],this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},Sr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e;this.body.emitter.once("resize",r=>{r.width!==0&&(this.body.view.translation.x=r.width*.5),r.height!==0&&(this.body.view.translation.y=r.height*.5)}),this.body.emitter.on("setSize",ne(e=this.setSize).call(e,this)),this.body.emitter.on("destroy",()=>{this.hammerFrame.destroy(),this.hammer.destroy(),this._cleanUp()})}setOptions(e){if(e!==void 0&&jh(["width","height","autoResize"],this.options,e),this._cleanUp(),this.options.autoResize===!0){var r;if(window.ResizeObserver){const i=new ResizeObserver(()=>{this.setSize()===!0&&this.body.emitter.emit("_requestRedraw")}),{frame:s}=this;i.observe(s),this._cleanupCallbacks.push(()=>{i.unobserve(s)})}else{const i=QDe(()=>{this.setSize()===!0&&this.body.emitter.emit("_requestRedraw")},1e3);this._cleanupCallbacks.push(()=>{clearInterval(i)})}const n=ne(r=this._onResize).call(r,this);window.addEventListener("resize",n),this._cleanupCallbacks.push(()=>{window.removeEventListener("resize",n)})}}_cleanUp(){var e,r,n;jt(e=lc(r=_o(n=this._cleanupCallbacks).call(n,0)).call(r)).call(e,i=>{try{i()}catch(s){console.error(s)}})}_onResize(){this.setSize(),this.body.emitter.emit("_redraw")}_getCameraState(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.pixelRatio;this.initialized===!0&&(this.cameraState.previousWidth=this.frame.canvas.width/e,this.cameraState.previousHeight=this.frame.canvas.height/e,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/e,y:.5*this.frame.canvas.height/e}))}_setCameraState(){if(this.cameraState.scale!==void 0&&this.frame.canvas.clientWidth!==0&&this.frame.canvas.clientHeight!==0&&this.pixelRatio!==0&&this.cameraState.previousWidth>0&&this.cameraState.previousHeight>0){const e=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,r=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight;let n=this.cameraState.scale;e!=1&&r!=1?n=this.cameraState.scale*.5*(e+r):e!=1?n=this.cameraState.scale*e:r!=1&&(n=this.cameraState.scale*r),this.body.view.scale=n;const i=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),s={x:i.x-this.cameraState.position.x,y:i.y-this.cameraState.position.y};this.body.view.translation.x+=s.x*this.body.view.scale,this.body.view.translation.y+=s.y*this.body.view.scale}}_prepareValue(e){if(typeof e=="number")return e+"px";if(typeof e=="string"){if(Nt(e).call(e,"%")!==-1||Nt(e).call(e,"px")!==-1)return e;if(Nt(e).call(e,"%")===-1)return e+"px"}throw new Error("Could not use the value supplied for width or height:"+e)}_create(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=0,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{const e=document.createElement("DIV");e.style.color="red",e.style.fontWeight="bold",e.style.padding="10px",e.innerText="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(e)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}_bindHammer(){this.hammer!==void 0&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new rd(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:rd.DIRECTION_ALL}),Xv(this.hammer,e=>{this.body.eventListeners.onTouch(e)}),this.hammer.on("tap",e=>{this.body.eventListeners.onTap(e)}),this.hammer.on("doubletap",e=>{this.body.eventListeners.onDoubleTap(e)}),this.hammer.on("press",e=>{this.body.eventListeners.onHold(e)}),this.hammer.on("panstart",e=>{this.body.eventListeners.onDragStart(e)}),this.hammer.on("panmove",e=>{this.body.eventListeners.onDrag(e)}),this.hammer.on("panend",e=>{this.body.eventListeners.onDragEnd(e)}),this.hammer.on("pinch",e=>{this.body.eventListeners.onPinch(e)}),this.frame.canvas.addEventListener("wheel",e=>{this.body.eventListeners.onMouseWheel(e)}),this.frame.canvas.addEventListener("mousemove",e=>{this.body.eventListeners.onMouseMove(e)}),this.frame.canvas.addEventListener("contextmenu",e=>{this.body.eventListeners.onContext(e)}),this.hammerFrame=new rd(this.frame),kae(this.hammerFrame,e=>{this.body.eventListeners.onRelease(e)})}setSize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.width,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.height;e=this._prepareValue(e),r=this._prepareValue(r);let n=!1;const i=this.frame.canvas.width,s=this.frame.canvas.height,o=this.pixelRatio;if(this._setPixelRatio(),e!=this.options.width||r!=this.options.height||this.frame.style.width!=e||this.frame.style.height!=r)this._getCameraState(o),this.frame.style.width=e,this.frame.style.height=r,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=e,this.options.height=r,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},n=!0;else{const a=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),l=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);(this.frame.canvas.width!==a||this.frame.canvas.height!==l)&&this._getCameraState(o),this.frame.canvas.width!==a&&(this.frame.canvas.width=a,n=!0),this.frame.canvas.height!==l&&(this.frame.canvas.height=l,n=!0)}return n===!0&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(i/this.pixelRatio),oldHeight:Math.round(s/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,n}getContext(){return this.frame.canvas.getContext("2d")}_determinePixelRatio(){const e=this.getContext();if(e===void 0)throw new Error("Could not get canvax context");let r=1;typeof window<"u"&&(r=window.devicePixelRatio||1);const n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return r/n}_setPixelRatio(){this.pixelRatio=this._determinePixelRatio()}setTransform(){const e=this.getContext();if(e===void 0)throw new Error("Could not get canvax context");e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}_XconvertDOMtoCanvas(e){return(e-this.body.view.translation.x)/this.body.view.scale}_XconvertCanvasToDOM(e){return e*this.body.view.scale+this.body.view.translation.x}_YconvertDOMtoCanvas(e){return(e-this.body.view.translation.y)/this.body.view.scale}_YconvertCanvasToDOM(e){return e*this.body.view.scale+this.body.view.translation.y}canvasToDOM(e){return{x:this._XconvertCanvasToDOM(e.x),y:this._YconvertCanvasToDOM(e.y)}}DOMtoCanvas(e){return{x:this._XconvertDOMtoCanvas(e.x),y:this._YconvertDOMtoCanvas(e.y)}}}function JDe(t,e){const r=Sr({nodes:e,minZoomLevel:Number.MIN_VALUE,maxZoomLevel:1},t??{});if(!dr(r.nodes))throw new TypeError("Nodes has to be an array of ids.");if(r.nodes.length===0&&(r.nodes=e),!(typeof r.minZoomLevel=="number"&&r.minZoomLevel>0))throw new TypeError("Min zoom level has to be a number higher than zero.");if(!(typeof r.maxZoomLevel=="number"&&r.minZoomLevel<=r.maxZoomLevel))throw new TypeError("Max zoom level has to be a number higher than min zoom level.");return r}class ZDe{constructor(e,r){var n,i;this.body=e,this.canvas=r,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",ne(n=this.fit).call(n,this)),this.body.emitter.on("animationFinished",()=>{this.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",ne(i=this.releaseNode).call(i,this))}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.options=e}fit(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;e=JDe(e,this.body.nodeIndices);const n=this.canvas.frame.canvas.clientWidth,i=this.canvas.frame.canvas.clientHeight;let s,o;if(n===0||i===0)o=1,s=Cn.getRange(this.body.nodes,e.nodes);else if(r===!0){let c=0;for(const f in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,f)&&this.body.nodes[f].predefinedPosition===!0&&(c+=1);if(c>.5*this.body.nodeIndices.length){this.fit(e,!1);return}s=Cn.getRange(this.body.nodes,e.nodes),o=12.662/(this.body.nodeIndices.length+7.4147)+.0964822;const h=Math.min(n/600,i/600);o*=h}else{this.body.emitter.emit("_resizeNodes"),s=Cn.getRange(this.body.nodes,e.nodes);const c=Math.abs(s.maxX-s.minX)*1.1,d=Math.abs(s.maxY-s.minY)*1.1,h=n/c,f=i/d;o=h<=f?h:f}o>e.maxZoomLevel?o=e.maxZoomLevel:o<e.minZoomLevel&&(o=e.minZoomLevel);const l={position:Cn.findCenter(s),scale:o,animation:e.animation};this.moveTo(l)}focus(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.body.nodes[e]!==void 0){const n={x:this.body.nodes[e].x,y:this.body.nodes[e].y};r.position=n,r.lockedOnNode=e,this.moveTo(r)}else console.error("Node: "+e+" cannot be found.")}moveTo(e){if(e===void 0){e={};return}if(e.offset!=null){if(e.offset.x!=null){if(e.offset.x=+e.offset.x,!Bl(e.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.')}else e.offset.x=0;if(e.offset.y!=null){if(e.offset.y=+e.offset.y,!Bl(e.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else e.offset.x=0}else e.offset={x:0,y:0};if(e.position!=null){if(e.position.x!=null){if(e.position.x=+e.position.x,!Bl(e.position.x))throw new TypeError('The option "position.x" has to be a finite number.')}else e.position.x=0;if(e.position.y!=null){if(e.position.y=+e.position.y,!Bl(e.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else e.position.x=0}else e.position=this.getViewPosition();if(e.scale!=null){if(e.scale=+e.scale,!(e.scale>0))throw new TypeError('The option "scale" has to be a number greater than zero.')}else e.scale=this.body.view.scale;e.animation===void 0&&(e.animation={duration:0}),e.animation===!1&&(e.animation={duration:0}),e.animation===!0&&(e.animation={}),e.animation.duration===void 0&&(e.animation.duration=1e3),e.animation.easingFunction===void 0&&(e.animation.easingFunction="easeInOutQuad"),this.animateView(e)}animateView(e){if(e===void 0)return;this.animationEasingFunction=e.animation.easingFunction,this.releaseNode(),e.locked===!0&&(this.lockedOnNodeId=e.lockedOnNode,this.lockedOnNodeOffset=e.offset),this.easingTime!=0&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=e.scale,this.body.view.scale=this.targetScale;const r=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n={x:r.x-e.position.x,y:r.y-e.position.y};if(this.targetTranslation={x:this.sourceTranslation.x+n.x*this.targetScale+e.offset.x,y:this.sourceTranslation.y+n.y*this.targetScale+e.offset.y},e.animation.duration===0)if(this.lockedOnNodeId!=null){var i;this.viewFunction=ne(i=this._lockedRedraw).call(i,this),this.body.emitter.on("initRedraw",this.viewFunction)}else this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw");else{var s;this.animationSpeed=1/(60*e.animation.duration*.001)||1/60,this.animationEasingFunction=e.animation.easingFunction,this.viewFunction=ne(s=this._transitionRedraw).call(s,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}_lockedRedraw(){const e={x:this.body.nodes[this.lockedOnNodeId].x,y:this.body.nodes[this.lockedOnNodeId].y},r=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n={x:r.x-e.x,y:r.y-e.y},i=this.body.view.translation,s={x:i.x+n.x*this.body.view.scale+this.lockedOnNodeOffset.x,y:i.y+n.y*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=s}releaseNode(){this.lockedOnNodeId!==void 0&&this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}_transitionRedraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.easingTime+=this.animationSpeed,this.easingTime=e===!0?1:this.easingTime;const r=aRe[this.animationEasingFunction](this.easingTime);if(this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*r,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*r,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*r},this.easingTime>=1){if(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,this.lockedOnNodeId!=null){var n;this.viewFunction=ne(n=this._lockedRedraw).call(n,this),this.body.emitter.on("initRedraw",this.viewFunction)}this.body.emitter.emit("animationFinished")}}getScale(){return this.body.view.scale}getViewPosition(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}function SQ(t){var e=t&&t.preventDefault||!1,r=t&&t.container||window,n={},i={keydown:{},keyup:{}},s={},o;for(o=97;o<=122;o++)s[String.fromCharCode(o)]={code:65+(o-97),shift:!1};for(o=65;o<=90;o++)s[String.fromCharCode(o)]={code:o,shift:!0};for(o=0;o<=9;o++)s[""+o]={code:48+o,shift:!1};for(o=1;o<=12;o++)s["F"+o]={code:111+o,shift:!1};for(o=0;o<=9;o++)s["num"+o]={code:96+o,shift:!1};s["num*"]={code:106,shift:!1},s["num+"]={code:107,shift:!1},s["num-"]={code:109,shift:!1},s["num/"]={code:111,shift:!1},s["num."]={code:110,shift:!1},s.left={code:37,shift:!1},s.up={code:38,shift:!1},s.right={code:39,shift:!1},s.down={code:40,shift:!1},s.space={code:32,shift:!1},s.enter={code:13,shift:!1},s.shift={code:16,shift:void 0},s.esc={code:27,shift:!1},s.backspace={code:8,shift:!1},s.tab={code:9,shift:!1},s.ctrl={code:17,shift:!1},s.alt={code:18,shift:!1},s.delete={code:46,shift:!1},s.pageup={code:33,shift:!1},s.pagedown={code:34,shift:!1},s["="]={code:187,shift:!1},s["-"]={code:189,shift:!1},s["]"]={code:221,shift:!1},s["["]={code:219,shift:!1};var a=function(d){c(d,"keydown")},l=function(d){c(d,"keyup")},c=function(d,h){if(i[h][d.keyCode]!==void 0){for(var f=i[h][d.keyCode],p=0;p<f.length;p++)(f[p].shift===void 0||f[p].shift==!0&&d.shiftKey==!0||f[p].shift==!1&&d.shiftKey==!1)&&f[p].fn(d);e==!0&&d.preventDefault()}};return n.bind=function(d,h,f){if(f===void 0&&(f="keydown"),s[d]===void 0)throw new Error("unsupported key: "+d);i[f][s[d].code]===void 0&&(i[f][s[d].code]=[]),i[f][s[d].code].push({fn:h,shift:s[d].shift})},n.bindAll=function(d,h){h===void 0&&(h="keydown");for(var f in s)s.hasOwnProperty(f)&&n.bind(f,d,h)},n.getKey=function(d){for(var h in s)if(s.hasOwnProperty(h)){if(d.shiftKey==!0&&s[h].shift==!0&&d.keyCode==s[h].code)return h;if(d.shiftKey==!1&&s[h].shift==!1&&d.keyCode==s[h].code)return h;if(d.keyCode==s[h].code&&h=="shift")return h}return"unknown key, currently not supported"},n.unbind=function(d,h,f){if(f===void 0&&(f="keydown"),s[d]===void 0)throw new Error("unsupported key: "+d);if(h!==void 0){var p=[],m=i[f][s[d].code];if(m!==void 0)for(var g=0;g<m.length;g++)m[g].fn==h&&m[g].shift==s[d].shift||p.push(i[f][s[d].code][g]);i[f][s[d].code]=p}else i[f][s[d].code]=[]},n.reset=function(){i={keydown:{},keyup:{}}},n.destroy=function(){i={keydown:{},keyup:{}},r.removeEventListener("keydown",a,!0),r.removeEventListener("keyup",l,!0)},r.addEventListener("keydown",a,!0),r.addEventListener("keyup",l,!0),n}class eAe{constructor(e,r){this.body=e,this.canvas=r,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",()=>{this.activated=!0,this.configureKeyboardBindings()}),this.body.emitter.on("deactivate",()=>{this.activated=!1,this.configureKeyboardBindings()}),this.body.emitter.on("destroy",()=>{this.keycharm!==void 0&&this.keycharm.destroy()}),this.options={}}setOptions(e){e!==void 0&&(this.options=e,this.create())}create(){this.options.navigationButtons===!0?this.iconsCreated===!1&&this.loadNavigationElements():this.iconsCreated===!0&&this.cleanNavigation(),this.configureKeyboardBindings()}cleanNavigation(){if(this.navigationHammers.length!=0){for(let e=0;e<this.navigationHammers.length;e++)this.navigationHammers[e].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}loadNavigationElements(){this.cleanNavigation(),this.navigationDOM={};const e=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],r=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(let o=0;o<e.length;o++){this.navigationDOM[e[o]]=document.createElement("div"),this.navigationDOM[e[o]].className="vis-button vis-"+e[o],this.navigationDOM.wrapper.appendChild(this.navigationDOM[e[o]]);const a=new rd(this.navigationDOM[e[o]]);if(r[o]==="_fit"){var n;Xv(a,ne(n=this._fit).call(n,this))}else{var i;Xv(a,ne(i=this.bindToRedraw).call(i,this,r[o]))}this.navigationHammers.push(a)}const s=new rd(this.canvas.frame);kae(s,()=>{this._stopMovement()}),this.navigationHammers.push(s),this.iconsCreated=!0}bindToRedraw(e){if(this.boundFunctions[e]===void 0){var r;this.boundFunctions[e]=ne(r=this[e]).call(r,this),this.body.emitter.on("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_startRendering")}}unbindFromRedraw(e){this.boundFunctions[e]!==void 0&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[e])}_fit(){new Date().valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=new Date().valueOf())}_stopMovement(){for(const e in this.boundFunctions)Object.prototype.hasOwnProperty.call(this.boundFunctions,e)&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}_moveUp(){this.body.view.translation.y+=this.options.keyboard.speed.y}_moveDown(){this.body.view.translation.y-=this.options.keyboard.speed.y}_moveLeft(){this.body.view.translation.x+=this.options.keyboard.speed.x}_moveRight(){this.body.view.translation.x-=this.options.keyboard.speed.x}_zoomIn(){const e=this.body.view.scale,r=this.body.view.scale*(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=r/e,s=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,o=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=r,this.body.view.translation={x:s,y:o},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}_zoomOut(){const e=this.body.view.scale,r=this.body.view.scale/(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=r/e,s=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,o=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=r,this.body.view.translation={x:s,y:o},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}configureKeyboardBindings(){if(this.keycharm!==void 0&&this.keycharm.destroy(),this.options.keyboard.enabled===!0&&(this.options.keyboard.bindToWindow===!0?this.keycharm=SQ({container:window,preventDefault:!0}):this.keycharm=SQ({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),this.activated===!0)){var e,r,n,i,s,o,a,l,c,d,h,f,p,m,g,b,y,v,w,x,S,_,N,E;ne(e=this.keycharm).call(e,"up",()=>{this.bindToRedraw("_moveUp")},"keydown"),ne(r=this.keycharm).call(r,"down",()=>{this.bindToRedraw("_moveDown")},"keydown"),ne(n=this.keycharm).call(n,"left",()=>{this.bindToRedraw("_moveLeft")},"keydown"),ne(i=this.keycharm).call(i,"right",()=>{this.bindToRedraw("_moveRight")},"keydown"),ne(s=this.keycharm).call(s,"=",()=>{this.bindToRedraw("_zoomIn")},"keydown"),ne(o=this.keycharm).call(o,"num+",()=>{this.bindToRedraw("_zoomIn")},"keydown"),ne(a=this.keycharm).call(a,"num-",()=>{this.bindToRedraw("_zoomOut")},"keydown"),ne(l=this.keycharm).call(l,"-",()=>{this.bindToRedraw("_zoomOut")},"keydown"),ne(c=this.keycharm).call(c,"[",()=>{this.bindToRedraw("_zoomOut")},"keydown"),ne(d=this.keycharm).call(d,"]",()=>{this.bindToRedraw("_zoomIn")},"keydown"),ne(h=this.keycharm).call(h,"pageup",()=>{this.bindToRedraw("_zoomIn")},"keydown"),ne(f=this.keycharm).call(f,"pagedown",()=>{this.bindToRedraw("_zoomOut")},"keydown"),ne(p=this.keycharm).call(p,"up",()=>{this.unbindFromRedraw("_moveUp")},"keyup"),ne(m=this.keycharm).call(m,"down",()=>{this.unbindFromRedraw("_moveDown")},"keyup"),ne(g=this.keycharm).call(g,"left",()=>{this.unbindFromRedraw("_moveLeft")},"keyup"),ne(b=this.keycharm).call(b,"right",()=>{this.unbindFromRedraw("_moveRight")},"keyup"),ne(y=this.keycharm).call(y,"=",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),ne(v=this.keycharm).call(v,"num+",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),ne(w=this.keycharm).call(w,"num-",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),ne(x=this.keycharm).call(x,"-",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),ne(S=this.keycharm).call(S,"[",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),ne(_=this.keycharm).call(_,"]",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),ne(N=this.keycharm).call(N,"pageup",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),ne(E=this.keycharm).call(E,"pagedown",()=>{this.unbindFromRedraw("_zoomOut")},"keyup")}}}class tAe{constructor(e,r,n){var i,s,o,a,l,c,d,h,f,p,m,g,b;this.body=e,this.canvas=r,this.selectionHandler=n,this.navigationHandler=new eAe(e,r),this.body.eventListeners.onTap=ne(i=this.onTap).call(i,this),this.body.eventListeners.onTouch=ne(s=this.onTouch).call(s,this),this.body.eventListeners.onDoubleTap=ne(o=this.onDoubleTap).call(o,this),this.body.eventListeners.onHold=ne(a=this.onHold).call(a,this),this.body.eventListeners.onDragStart=ne(l=this.onDragStart).call(l,this),this.body.eventListeners.onDrag=ne(c=this.onDrag).call(c,this),this.body.eventListeners.onDragEnd=ne(d=this.onDragEnd).call(d,this),this.body.eventListeners.onMouseWheel=ne(h=this.onMouseWheel).call(h,this),this.body.eventListeners.onPinch=ne(f=this.onPinch).call(f,this),this.body.eventListeners.onMouseMove=ne(p=this.onMouseMove).call(p,this),this.body.eventListeners.onRelease=ne(m=this.onRelease).call(m,this),this.body.eventListeners.onContext=ne(g=this.onContext).call(g,this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=ne(b=this.getPointer).call(b,this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0,autoFocus:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},Sr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("destroy",()=>{clearTimeout(this.popupTimer),delete this.body.functions.getPointer})}setOptions(e){e!==void 0&&(Gv(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"],this.options,e),Oi(this.options,e,"keyboard"),e.tooltip&&(Sr(this.options.tooltip,e.tooltip),e.tooltip.color&&(this.options.tooltip.color=MI(e.tooltip.color)))),this.navigationHandler.setOptions(this.options)}getPointer(e){return{x:e.x-nRe(this.canvas.frame.canvas),y:e.y-iRe(this.canvas.frame.canvas)}}onTouch(e){new Date().valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(e.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=new Date().valueOf())}onTap(e){const r=this.getPointer(e.center),n=this.selectionHandler.options.multiselect&&(e.changedPointers[0].ctrlKey||e.changedPointers[0].metaKey);this.checkSelectionChanges(r,n),this.selectionHandler.commitAndEmit(r,e),this.selectionHandler.generateClickEvent("click",e,r)}onDoubleTap(e){const r=this.getPointer(e.center);this.selectionHandler.generateClickEvent("doubleClick",e,r)}onHold(e){const r=this.getPointer(e.center),n=this.selectionHandler.options.multiselect;this.checkSelectionChanges(r,n),this.selectionHandler.commitAndEmit(r,e),this.selectionHandler.generateClickEvent("click",e,r),this.selectionHandler.generateClickEvent("hold",e,r)}onRelease(e){if(new Date().valueOf()-this.touchTime>10){const r=this.getPointer(e.center);this.selectionHandler.generateClickEvent("release",e,r),this.touchTime=new Date().valueOf()}}onContext(e){const r=this.getPointer({x:e.clientX,y:e.clientY});this.selectionHandler.generateClickEvent("oncontext",e,r)}checkSelectionChanges(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)===!0?this.selectionHandler.selectAdditionalOnPoint(e):this.selectionHandler.selectOnPoint(e)}_determineDifference(e,r){const n=function(i,s){const o=[];for(let a=0;a<i.length;a++){const l=i[a];Nt(s).call(s,l)===-1&&o.push(l)}return o};return{nodes:n(e.nodes,r.nodes),edges:n(e.edges,r.edges)}}onDragStart(e){if(this.drag.dragging)return;this.drag.pointer===void 0&&this.onTouch(e);const r=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=Sr({},this.body.view.translation),this.drag.nodeId=void 0,e.srcEvent.shiftKey){this.body.selectionBox.show=!0;const n=this.getPointer(e.center);this.body.selectionBox.position.start={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)},this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)}}else if(r!==void 0&&this.options.dragNodes===!0){this.drag.nodeId=r.id,r.isSelected()===!1&&this.selectionHandler.setSelection({nodes:[r.id]}),this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer);for(const n of this.selectionHandler.getSelectedNodes()){const i={id:n.id,node:n,x:n.x,y:n.y,xFixed:n.options.fixed.x,yFixed:n.options.fixed.y};n.options.fixed.x=!0,n.options.fixed.y=!0,this.drag.selection.push(i)}}else this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer,void 0,!0)}onDrag(e){if(this.drag.pinched===!0)return;this.body.emitter.emit("unlockNode");const r=this.getPointer(e.center),n=this.drag.selection;if(n&&n.length&&this.options.dragNodes===!0){this.selectionHandler.generateClickEvent("dragging",e,r);const i=r.x-this.drag.pointer.x,s=r.y-this.drag.pointer.y;jt(n).call(n,o=>{const a=o.node;o.xFixed===!1&&(a.x=this.canvas._XconvertDOMtoCanvas(this.canvas._XconvertCanvasToDOM(o.x)+i)),o.yFixed===!1&&(a.y=this.canvas._YconvertDOMtoCanvas(this.canvas._YconvertCanvasToDOM(o.y)+s))}),this.body.emitter.emit("startSimulation")}else{if(e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,r,void 0,!0),this.drag.pointer===void 0){this.onDragStart(e);return}this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(r.x),y:this.canvas._YconvertDOMtoCanvas(r.y)},this.body.emitter.emit("_requestRedraw")}if(this.options.dragView===!0&&!e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,r,void 0,!0),this.drag.pointer===void 0){this.onDragStart(e);return}const i=r.x-this.drag.pointer.x,s=r.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+i,y:this.drag.translation.y+s},this.body.emitter.emit("_requestRedraw")}}}onDragEnd(e){if(this.drag.dragging=!1,this.body.selectionBox.show){var r;this.body.selectionBox.show=!1;const n=this.body.selectionBox.position,i={minX:Math.min(n.start.x,n.end.x),minY:Math.min(n.start.y,n.end.y),maxX:Math.max(n.start.x,n.end.x),maxY:Math.max(n.start.y,n.end.y)},s=Un(r=this.body.nodeIndices).call(r,a=>{const l=this.body.nodes[a];return l.x>=i.minX&&l.x<=i.maxX&&l.y>=i.minY&&l.y<=i.maxY});jt(s).call(s,a=>this.selectionHandler.selectObject(this.body.nodes[a]));const o=this.getPointer(e.center);this.selectionHandler.commitAndEmit(o,e),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw")}else{const n=this.drag.selection;n&&n.length?(jt(n).call(n,function(i){i.node.options.fixed.x=i.xFixed,i.node.options.fixed.y=i.yFixed}),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}}onPinch(e){const r=this.getPointer(e.center);this.drag.pinched=!0,this.pinch.scale===void 0&&(this.pinch.scale=1);const n=this.pinch.scale*e.scale;this.zoom(n,r)}zoom(e,r){if(this.options.zoomView===!0){const n=this.body.view.scale;e<1e-5&&(e=1e-5),e>10&&(e=10);let i;this.drag!==void 0&&this.drag.dragging===!0&&(i=this.canvas.DOMtoCanvas(this.drag.pointer));const s=this.body.view.translation,o=e/n,a=(1-o)*r.x+s.x*o,l=(1-o)*r.y+s.y*o;if(this.body.view.scale=e,this.body.view.translation={x:a,y:l},i!=null){const c=this.canvas.canvasToDOM(i);this.drag.pointer.x=c.x,this.drag.pointer.y=c.y}this.body.emitter.emit("_requestRedraw"),n<e?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:r}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:r})}}onMouseWheel(e){if(this.options.zoomView===!0){if(e.deltaY!==0){let r=this.body.view.scale;r*=1+(e.deltaY<0?1:-1)*(this.options.zoomSpeed*.1);const n=this.getPointer({x:e.clientX,y:e.clientY});this.zoom(r,n)}e.preventDefault()}}onMouseMove(e){const r=this.getPointer({x:e.clientX,y:e.clientY});let n=!1;this.popup!==void 0&&(this.popup.hidden===!1&&this._checkHidePopup(r),this.popup.hidden===!1&&(n=!0,this.popup.setPosition(r.x+3,r.y-5),this.popup.show())),this.options.keyboard.autoFocus&&this.options.keyboard.bindToWindow===!1&&this.options.keyboard.enabled===!0&&this.canvas.frame.focus(),n===!1&&(this.popupTimer!==void 0&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=Eo(()=>this._checkShowPopup(r),this.options.tooltipDelay))),this.options.hover===!0&&this.selectionHandler.hoverObject(e,r)}_checkShowPopup(e){const r=this.canvas._XconvertDOMtoCanvas(e.x),n=this.canvas._YconvertDOMtoCanvas(e.y),i={left:r,top:n,right:r,bottom:n},s=this.popupObj===void 0?void 0:this.popupObj.id;let o=!1,a="node";if(this.popupObj===void 0){const l=this.body.nodeIndices,c=this.body.nodes;let d;const h=[];for(let f=0;f<l.length;f++)d=c[l[f]],d.isOverlappingWith(i)===!0&&(o=!0,d.getTitle()!==void 0&&h.push(l[f]));h.length>0&&(this.popupObj=c[h[h.length-1]],o=!0)}if(this.popupObj===void 0&&o===!1){const l=this.body.edgeIndices,c=this.body.edges;let d;const h=[];for(let f=0;f<l.length;f++)d=c[l[f]],d.isOverlappingWith(i)===!0&&d.connected===!0&&d.getTitle()!==void 0&&h.push(l[f]);h.length>0&&(this.popupObj=c[h[h.length-1]],a="edge")}this.popupObj!==void 0?this.popupObj.id!==s&&(this.popup===void 0&&(this.popup=new mRe(this.canvas.frame)),this.popup.popupTargetType=a,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(e.x+3,e.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):this.popup!==void 0&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}_checkHidePopup(e){const r=this.selectionHandler._pointerToPositionObject(e);let n=!1;if(this.popup.popupTargetType==="node"){if(this.body.nodes[this.popup.popupTargetId]!==void 0&&(n=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(r),n===!0)){const i=this.selectionHandler.getNodeAt(e);n=i===void 0?!1:i.id===this.popup.popupTargetId}}else this.selectionHandler.getNodeAt(e)===void 0&&this.body.edges[this.popup.popupTargetId]!==void 0&&(n=this.body.edges[this.popup.popupTargetId].isOverlappingWith(r));n===!1&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}var _Q={},EQ={},NQ;function rAe(){if(NQ)return EQ;NQ=1;var t=Y$(),e=gae();return t("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),EQ}var CQ;function nAe(){return CQ||(CQ=1,rAe()),_Q}var kQ={},EO,TQ;function au(){if(TQ)return EO;TQ=1;var t=vh(),e=TypeError;return EO=function(r){if(typeof r=="object"&&"size"in r&&"has"in r&&"add"in r&&"delete"in r&&"keys"in r)return r;throw new e(t(r)+" is not a set")},EO}var NO,OQ;function lu(){if(OQ)return NO;OQ=1;var t=xi(),e=yae(),r=t("Set"),n=r.prototype;return NO={Set:r,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:n},NO}var CO,jQ;function cu(){if(jQ)return CO;jQ=1;var t=ni();return CO=function(e,r,n){for(var i=n?e:e.iterator,s=e.next,o,a;!(o=t(s,i)).done;)if(a=r(o.value),a!==void 0)return a},CO}var kO,PQ;function qm(){if(PQ)return kO;PQ=1;var t=cu();return kO=function(e,r,n){return n?t(e.keys(),r,!0):e.forEach(r)},kO}var TO,IQ;function rD(){if(IQ)return TO;IQ=1;var t=lu(),e=qm(),r=t.Set,n=t.add;return TO=function(i){var s=new r;return e(i,function(o){n(s,o)}),s},TO}var OO,RQ;function Lm(){return RQ||(RQ=1,OO=function(t){return t.size}),OO}var jO,MQ;function iAe(){return MQ||(MQ=1,jO=function(t){return{iterator:t,next:t.next,done:!1}}),jO}var PO,$Q;function uu(){if($Q)return PO;$Q=1;var t=Ho(),e=Hs(),r=ni(),n=Sh(),i=iAe(),s="Invalid size",o=RangeError,a=TypeError,l=Math.max,c=function(d,h){this.set=d,this.size=l(h,0),this.has=t(d.has),this.keys=t(d.keys)};return c.prototype={getIterator:function(){return i(e(r(this.keys,this.set)))},includes:function(d){return r(this.has,this.set,d)}},PO=function(d){e(d);var h=+d.size;if(h!==h)throw new a(s);var f=n(h);if(f<0)throw new o(s);return new c(d,f)},PO}var IO,DQ;function sAe(){if(DQ)return IO;DQ=1;var t=au(),e=lu(),r=rD(),n=Lm(),i=uu(),s=qm(),o=cu(),a=e.has,l=e.remove;return IO=function(d){var h=t(this),f=i(d),p=r(h);return n(h)<=f.size?s(h,function(m){f.includes(m)&&l(p,m)}):o(f.getIterator(),function(m){a(p,m)&&l(p,m)}),p},IO}var RO,AQ;function du(){return AQ||(AQ=1,RO=function(){return!1}),RO}var FQ;function oAe(){if(FQ)return kQ;FQ=1;var t=Pe(),e=sAe(),r=nt(),n=du(),i=!n("difference",function(o){return o.size===0}),s=i||r(function(){var o={size:1,has:function(){return!0},keys:function(){var l=0;return{next:function(){var c=l++>1;return a.has(1)&&a.clear(),{done:c,value:2}}}}},a=new Set([1,2,3,4]);return a.difference(o).size!==3});return t({target:"Set",proto:!0,real:!0,forced:s},{difference:e}),kQ}var qQ={},MO,LQ;function aAe(){if(LQ)return MO;LQ=1;var t=au(),e=lu(),r=Lm(),n=uu(),i=qm(),s=cu(),o=e.Set,a=e.add,l=e.has;return MO=function(d){var h=t(this),f=n(d),p=new o;return r(h)>f.size?s(f.getIterator(),function(m){l(h,m)&&a(p,m)}):i(h,function(m){f.includes(m)&&a(p,m)}),p},MO}var BQ;function lAe(){if(BQ)return qQ;BQ=1;var t=Pe(),e=nt(),r=aAe(),n=du(),i=!n("intersection",function(s){return s.size===2&&s.has(1)&&s.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return t({target:"Set",proto:!0,real:!0,forced:i},{intersection:r}),qQ}var zQ={},$O,VQ;function cAe(){if(VQ)return $O;VQ=1;var t=au(),e=lu().has,r=Lm(),n=uu(),i=qm(),s=cu(),o=K$();return $O=function(l){var c=t(this),d=n(l);if(r(c)<=d.size)return i(c,function(f){if(d.includes(f))return!1},!0)!==!1;var h=d.getIterator();return s(h,function(f){if(e(c,f))return o(h,"normal",!1)})!==!1},$O}var UQ;function uAe(){if(UQ)return zQ;UQ=1;var t=Pe(),e=cAe(),r=du(),n=!r("isDisjointFrom",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:e}),zQ}var HQ={},DO,WQ;function dAe(){if(WQ)return DO;WQ=1;var t=au(),e=Lm(),r=qm(),n=uu();return DO=function(s){var o=t(this),a=n(s);return e(o)>a.size?!1:r(o,function(l){if(!a.includes(l))return!1},!0)!==!1},DO}var KQ;function hAe(){if(KQ)return HQ;KQ=1;var t=Pe(),e=dAe(),r=du(),n=!r("isSubsetOf",function(i){return i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:e}),HQ}var GQ={},AO,YQ;function fAe(){if(YQ)return AO;YQ=1;var t=au(),e=lu().has,r=Lm(),n=uu(),i=cu(),s=K$();return AO=function(a){var l=t(this),c=n(a);if(r(l)<c.size)return!1;var d=c.getIterator();return i(d,function(h){if(!e(l,h))return s(d,"normal",!1)})!==!1},AO}var QQ;function pAe(){if(QQ)return GQ;QQ=1;var t=Pe(),e=fAe(),r=du(),n=!r("isSupersetOf",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:e}),GQ}var XQ={},FO,JQ;function mAe(){if(JQ)return FO;JQ=1;var t=au(),e=lu(),r=rD(),n=uu(),i=cu(),s=e.add,o=e.has,a=e.remove;return FO=function(c){var d=t(this),h=n(c).getIterator(),f=r(d);return i(h,function(p){o(d,p)?a(f,p):s(f,p)}),f},FO}var qO,ZQ;function Tae(){return ZQ||(ZQ=1,qO=function(t){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[t](r);return n.size===1&&n.values().next().value===4}catch{return!1}}),qO}var eX;function gAe(){if(eX)return XQ;eX=1;var t=Pe(),e=mAe(),r=Tae(),n=du(),i=!n("symmetricDifference")||!r("symmetricDifference");return t({target:"Set",proto:!0,real:!0,forced:i},{symmetricDifference:e}),XQ}var tX={},LO,rX;function yAe(){if(rX)return LO;rX=1;var t=au(),e=lu().add,r=rD(),n=uu(),i=cu();return LO=function(o){var a=t(this),l=n(o).getIterator(),c=r(a);return i(l,function(d){e(c,d)}),c},LO}var nX;function vAe(){if(nX)return tX;nX=1;var t=Pe(),e=yAe(),r=Tae(),n=du(),i=!n("union")||!r("union");return t({target:"Set",proto:!0,real:!0,forced:i},{union:e}),tX}var BO,iX;function bAe(){if(iX)return BO;iX=1,Ch(),nAe(),oAe(),lAe(),uAe(),hAe(),pAe(),gAe(),vAe(),X$();var t=Tt();return BO=t.Set,BO}var zO,sX;function xAe(){if(sX)return zO;sX=1;var t=bAe();return kh(),zO=t,zO}var VO,oX;function wAe(){return oX||(oX=1,VO=xAe()),VO}var SAe=wAe(),fa=ze(SAe),aX={},lX={},UO,cX;function _Ae(){if(cX)return UO;cX=1;var t=at(),e=Q$(),r=bb().getWeakData,n=G$(),i=Hs(),s=mh(),o=Qr(),a=xb(),l=yl(),c=an(),d=iu(),h=d.set,f=d.getterFor,p=l.find,m=l.findIndex,g=t([].splice),b=0,y=function(x){return x.frozen||(x.frozen=new v)},v=function(){this.entries=[]},w=function(x,S){return p(x.entries,function(_){return _[0]===S})};return v.prototype={get:function(x){var S=w(this,x);if(S)return S[1]},has:function(x){return!!w(this,x)},set:function(x,S){var _=w(this,x);_?_[1]=S:this.entries.push([x,S])},delete:function(x){var S=m(this.entries,function(_){return _[0]===x});return~S&&g(this.entries,S,1),!!~S}},UO={getConstructor:function(x,S,_,N){var E=x(function(P,j){n(P,k),h(P,{type:S,id:b++,frozen:null}),s(j)||a(j,P[N],{that:P,AS_ENTRIES:_})}),k=E.prototype,C=f(S),O=function(P,j,M){var A=C(P),I=r(i(j),!0);return I===!0?y(A).set(j,M):I[A.id]=M,P};return e(k,{delete:function(P){var j=C(this);if(!o(P))return!1;var M=r(P);return M===!0?y(j).delete(P):M&&c(M,j.id)&&delete M[j.id]},has:function(j){var M=C(this);if(!o(j))return!1;var A=r(j);return A===!0?y(M).has(j):A&&c(A,M.id)}}),e(k,_?{get:function(j){var M=C(this);if(o(j)){var A=r(j);if(A===!0)return y(M).get(j);if(A)return A[M.id]}},set:function(j,M){return O(this,j,M)}}:{add:function(j){return O(this,j,!0)}}),E}},UO}var uX;function EAe(){if(uX)return lX;uX=1;var t=pae(),e=Ht(),r=at(),n=Q$(),i=bb(),s=Y$(),o=_Ae(),a=Qr(),l=iu().enforce,c=nt(),d=goe(),h=Object,f=Array.isArray,p=h.isExtensible,m=h.isFrozen,g=h.isSealed,b=h.freeze,y=h.seal,v=!e.ActiveXObject&&"ActiveXObject"in e,w,x=function(P){return function(){return P(this,arguments.length?arguments[0]:void 0)}},S=s("WeakMap",x,o),_=S.prototype,N=r(_.set),E=function(){return t&&c(function(){var P=b([]);return N(new S,P,1),!m(P)})};if(d)if(v){w=o.getConstructor(x,"WeakMap",!0),i.enable();var k=r(_.delete),C=r(_.has),O=r(_.get);n(_,{delete:function(P){if(a(P)&&!p(P)){var j=l(this);return j.frozen||(j.frozen=new w),k(this,P)||j.frozen.delete(P)}return k(this,P)},has:function(j){if(a(j)&&!p(j)){var M=l(this);return M.frozen||(M.frozen=new w),C(this,j)||M.frozen.has(j)}return C(this,j)},get:function(j){if(a(j)&&!p(j)){var M=l(this);return M.frozen||(M.frozen=new w),C(this,j)?O(this,j):M.frozen.get(j)}return O(this,j)},set:function(j,M){if(a(j)&&!p(j)){var A=l(this);A.frozen||(A.frozen=new w),C(this,j)?N(this,j,M):A.frozen.set(j,M)}else N(this,j,M);return this}})}else E()&&n(_,{set:function(j,M){var A;return f(j)&&(m(j)?A=b:g(j)&&(A=y)),N(this,j,M),A&&A(j),this}});return lX}var dX;function NAe(){return dX||(dX=1,EAe()),aX}var HO,hX;function CAe(){if(hX)return HO;hX=1,Ch(),NAe();var t=Tt();return HO=t.WeakMap,HO}var WO,fX;function kAe(){if(fX)return WO;fX=1;var t=CAe();return kh(),WO=t,WO}var KO,pX;function TAe(){return pX||(pX=1,KO=kAe()),KO}var OAe=TAe(),Bm=ze(OAe);function Vf(t,e,r){jAe(t,e),e.set(t,r)}function jAe(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function LI(t,e,r){return t.set(Oae(t,e),r),r}function Mt(t,e){return t.get(Oae(t,e))}function Oae(t,e,r){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function mX(t,e){const r=new fa;for(const n of e)t.has(n)||r.add(n);return r}var wu=new Bm,Xi=new Bm;class gX{constructor(){Vf(this,wu,new fa),Vf(this,Xi,new fa)}get size(){return Mt(Xi,this).size}add(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(const i of r)Mt(Xi,this).add(i)}delete(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(const i of r)Mt(Xi,this).delete(i)}clear(){Mt(Xi,this).clear()}getSelection(){return[...Mt(Xi,this)]}getChanges(){return{added:[...mX(Mt(wu,this),Mt(Xi,this))],deleted:[...mX(Mt(Xi,this),Mt(wu,this))],previous:[...new fa(Mt(wu,this))],current:[...new fa(Mt(Xi,this))]}}commit(){const e=this.getChanges();LI(wu,this,Mt(Xi,this)),LI(Xi,this,new fa(Mt(wu,this)));for(const r of e.added)r.select();for(const r of e.deleted)r.unselect();return e}}var Sl=new Bm,_l=new Bm,GO=new Bm;class PAe{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:()=>{};Vf(this,Sl,new gX),Vf(this,_l,new gX),Vf(this,GO,void 0),LI(GO,this,e)}get sizeNodes(){return Mt(Sl,this).size}get sizeEdges(){return Mt(_l,this).size}getNodes(){return Mt(Sl,this).getSelection()}getEdges(){return Mt(_l,this).getSelection()}addNodes(){Mt(Sl,this).add(...arguments)}addEdges(){Mt(_l,this).add(...arguments)}deleteNodes(e){Mt(Sl,this).delete(e)}deleteEdges(e){Mt(_l,this).delete(e)}clear(){Mt(Sl,this).clear(),Mt(_l,this).clear()}commit(){const e={nodes:Mt(Sl,this).commit(),edges:Mt(_l,this).commit()};for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return Mt(GO,this).call(this,e,...n),e}}class IAe{constructor(e,r){this.body=e,this.canvas=r,this._selectionAccumulator=new PAe,this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},Sr(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",()=>{this.updateSelection()})}setOptions(e){e!==void 0&&jh(["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"],this.options,e)}selectOnPoint(e){let r=!1;if(this.options.selectable===!0){const n=this.getNodeAt(e)||this.getEdgeAt(e);this.unselectAll(),n!==void 0&&(r=this.selectObject(n)),this.body.emitter.emit("_requestRedraw")}return r}selectAdditionalOnPoint(e){let r=!1;if(this.options.selectable===!0){const n=this.getNodeAt(e)||this.getEdgeAt(e);n!==void 0&&(r=!0,n.isSelected()===!0?this.deselectObject(n):this.selectObject(n),this.body.emitter.emit("_requestRedraw"))}return r}_initBaseEvent(e,r){const n={};return n.pointer={DOM:{x:r.x,y:r.y},canvas:this.canvas.DOMtoCanvas(r)},n.event=e,n}generateClickEvent(e,r,n,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;const o=this._initBaseEvent(r,n);if(s===!0)o.nodes=[],o.edges=[];else{const a=this.getSelection();o.nodes=a.nodes,o.edges=a.edges}i!==void 0&&(o.previousSelection=i),e=="click"&&(o.items=this.getClickedItems(n)),r.controlEdge!==void 0&&(o.controlEdge=r.controlEdge),this.body.emitter.emit(e,o)}selectObject(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.selectConnectedEdges;return e!==void 0?(e instanceof Vt?(r===!0&&this._selectionAccumulator.addEdges(...e.edges),this._selectionAccumulator.addNodes(e)):this._selectionAccumulator.addEdges(e),!0):!1}deselectObject(e){e.isSelected()===!0&&(e.selected=!1,this._removeFromSelection(e))}_getAllNodesOverlappingWith(e){const r=[],n=this.body.nodes;for(let i=0;i<this.body.nodeIndices.length;i++){const s=this.body.nodeIndices[i];n[s].isOverlappingWith(e)&&r.push(s)}return r}_pointerToPositionObject(e){const r=this.canvas.DOMtoCanvas(e);return{left:r.x-1,top:r.y+1,right:r.x+1,bottom:r.y-1}}getNodeAt(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=this._pointerToPositionObject(e),i=this._getAllNodesOverlappingWith(n);if(i.length>0)return r===!0?this.body.nodes[i[i.length-1]]:i[i.length-1]}_getEdgesOverlappingWith(e,r){const n=this.body.edges;for(let i=0;i<this.body.edgeIndices.length;i++){const s=this.body.edgeIndices[i];n[s].isOverlappingWith(e)&&r.push(s)}}_getAllEdgesOverlappingWith(e){const r=[];return this._getEdgesOverlappingWith(e,r),r}getEdgeAt(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=this.canvas.DOMtoCanvas(e);let i=10,s=null;const o=this.body.edges;for(let a=0;a<this.body.edgeIndices.length;a++){const l=this.body.edgeIndices[a],c=o[l];if(c.connected){const d=c.from.x,h=c.from.y,f=c.to.x,p=c.to.y,m=c.edgeType.getDistanceToEdge(d,h,f,p,n.x,n.y);m<i&&(s=l,i=m)}}if(s!==null)return r===!0?this.body.edges[s]:s}_addToHover(e){e instanceof Vt?this.hoverObj.nodes[e.id]=e:this.hoverObj.edges[e.id]=e}_removeFromSelection(e){e instanceof Vt?(this._selectionAccumulator.deleteNodes(e),this._selectionAccumulator.deleteEdges(...e.edges)):this._selectionAccumulator.deleteEdges(e)}unselectAll(){this._selectionAccumulator.clear()}getSelectedNodeCount(){return this._selectionAccumulator.sizeNodes}getSelectedEdgeCount(){return this._selectionAccumulator.sizeEdges}_hoverConnectedEdges(e){for(let r=0;r<e.edges.length;r++){const n=e.edges[r];n.hover=!0,this._addToHover(n)}}emitBlurEvent(e,r,n){const i=this._initBaseEvent(e,r);n.hover===!0&&(n.hover=!1,n instanceof Vt?(i.node=n.id,this.body.emitter.emit("blurNode",i)):(i.edge=n.id,this.body.emitter.emit("blurEdge",i)))}emitHoverEvent(e,r,n){const i=this._initBaseEvent(e,r);let s=!1;return n.hover===!1&&(n.hover=!0,this._addToHover(n),s=!0,n instanceof Vt?(i.node=n.id,this.body.emitter.emit("hoverNode",i)):(i.edge=n.id,this.body.emitter.emit("hoverEdge",i))),s}hoverObject(e,r){let n=this.getNodeAt(r);n===void 0&&(n=this.getEdgeAt(r));let i=!1;for(const s in this.hoverObj.nodes)Object.prototype.hasOwnProperty.call(this.hoverObj.nodes,s)&&(n===void 0||n instanceof Vt&&n.id!=s||n instanceof Xa)&&(this.emitBlurEvent(e,r,this.hoverObj.nodes[s]),delete this.hoverObj.nodes[s],i=!0);for(const s in this.hoverObj.edges)Object.prototype.hasOwnProperty.call(this.hoverObj.edges,s)&&(i===!0?(this.hoverObj.edges[s].hover=!1,delete this.hoverObj.edges[s]):(n===void 0||n instanceof Xa&&n.id!=s||n instanceof Vt&&!n.hover)&&(this.emitBlurEvent(e,r,this.hoverObj.edges[s]),delete this.hoverObj.edges[s],i=!0));if(n!==void 0){const s=ar(this.hoverObj.edges).length,o=ar(this.hoverObj.nodes).length,a=n instanceof Xa&&s===0&&o===0,l=n instanceof Vt&&s===0&&o===0;(i||a||l)&&(i=this.emitHoverEvent(e,r,n)),n instanceof Vt&&this.options.hoverConnectedEdges===!0&&this._hoverConnectedEdges(n)}i===!0&&this.body.emitter.emit("_requestRedraw")}commitWithoutEmitting(){this._selectionAccumulator.commit()}commitAndEmit(e,r){let n=!1;const i=this._selectionAccumulator.commit(),s={nodes:i.nodes.previous,edges:i.edges.previous};i.edges.deleted.length>0&&(this.generateClickEvent("deselectEdge",r,e,s),n=!0),i.nodes.deleted.length>0&&(this.generateClickEvent("deselectNode",r,e,s),n=!0),i.nodes.added.length>0&&(this.generateClickEvent("selectNode",r,e),n=!0),i.edges.added.length>0&&(this.generateClickEvent("selectEdge",r,e),n=!0),n===!0&&this.generateClickEvent("select",r,e)}getSelection(){return{nodes:this.getSelectedNodeIds(),edges:this.getSelectedEdgeIds()}}getSelectedNodes(){return this._selectionAccumulator.getNodes()}getSelectedEdges(){return this._selectionAccumulator.getEdges()}getSelectedNodeIds(){var e;return Ud(e=this._selectionAccumulator.getNodes()).call(e,r=>r.id)}getSelectedEdgeIds(){var e;return Ud(e=this._selectionAccumulator.getEdges()).call(e,r=>r.id)}setSelection(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e||!e.nodes&&!e.edges)throw new TypeError("Selection must be an object with nodes and/or edges properties");if((r.unselectAll||r.unselectAll===void 0)&&this.unselectAll(),e.nodes)for(const n of e.nodes){const i=this.body.nodes[n];if(!i)throw new RangeError('Node with id "'+n+'" not found');this.selectObject(i,r.highlightEdges)}if(e.edges)for(const n of e.edges){const i=this.body.edges[n];if(!i)throw new RangeError('Edge with id "'+n+'" not found');this.selectObject(i)}this.body.emitter.emit("_requestRedraw"),this._selectionAccumulator.commit()}selectNodes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({nodes:e},{highlightEdges:r})}selectEdges(e){if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({edges:e})}updateSelection(){for(const e in this._selectionAccumulator.getNodes())Object.prototype.hasOwnProperty.call(this.body.nodes,e.id)||this._selectionAccumulator.deleteNodes(e);for(const e in this._selectionAccumulator.getEdges())Object.prototype.hasOwnProperty.call(this.body.edges,e.id)||this._selectionAccumulator.deleteEdges(e)}getClickedItems(e){const r=this.canvas.DOMtoCanvas(e),n=[],i=this.body.nodeIndices,s=this.body.nodes;for(let l=i.length-1;l>=0;l--){const d=s[i[l]].getItemsOnPoint(r);n.push.apply(n,d)}const o=this.body.edgeIndices,a=this.body.edges;for(let l=o.length-1;l>=0;l--){const d=a[o[l]].getItemsOnPoint(r);n.push.apply(n,d)}return n}}var yX={},YO,vX;function RAe(){if(vX)return YO;vX=1;var t=_h(),e=Math.floor,r=function(n,i){var s=n.length;if(s<8)for(var o=1,a,l;o<s;){for(l=o,a=n[o];l&&i(n[l-1],a)>0;)n[l]=n[--l];l!==o++&&(n[l]=a)}else for(var c=e(s/2),d=r(t(n,0,c),i),h=r(t(n,c),i),f=d.length,p=h.length,m=0,g=0;m<f||g<p;)n[m+g]=m<f&&g<p?i(d[m],h[g])<=0?d[m++]:h[g++]:m<f?d[m++]:h[g++];return n};return YO=r,YO}var QO,bX;function MAe(){if(bX)return QO;bX=1;var t=gh(),e=t.match(/firefox\/(\d+)/i);return QO=!!e&&+e[1],QO}var XO,xX;function $Ae(){if(xX)return XO;xX=1;var t=gh();return XO=/MSIE|Trident/.test(t),XO}var JO,wX;function DAe(){if(wX)return JO;wX=1;var t=gh(),e=t.match(/AppleWebKit\/(\d+)\./);return JO=!!e&&+e[1],JO}var SX;function AAe(){if(SX)return yX;SX=1;var t=Pe(),e=at(),r=Ho(),n=wi(),i=Wo(),s=koe(),o=Wi(),a=nt(),l=RAe(),c=Th(),d=MAe(),h=$Ae(),f=Nm(),p=DAe(),m=[],g=e(m.sort),b=e(m.push),y=a(function(){m.sort(void 0)}),v=a(function(){m.sort(null)}),w=c("sort"),x=!a(function(){if(f)return f<70;if(!(d&&d>3)){if(h)return!0;if(p)return p<603;var N="",E,k,C,O;for(E=65;E<76;E++){switch(k=String.fromCharCode(E),E){case 66:case 69:case 70:case 72:C=3;break;case 68:case 71:C=4;break;default:C=2}for(O=0;O<47;O++)m.push({k:k+O,v:C})}for(m.sort(function(P,j){return j.v-P.v}),O=0;O<m.length;O++)k=m[O].k.charAt(0),N.charAt(N.length-1)!==k&&(N+=k);return N!=="DGBEFHACIJK"}}),S=y||!v||!w||!x,_=function(N){return function(E,k){return k===void 0?-1:E===void 0?1:N!==void 0?+N(E,k)||0:o(E)>o(k)?1:-1}};return t({target:"Array",proto:!0,forced:S},{sort:function(E){E!==void 0&&r(E);var k=n(this);if(x)return E===void 0?g(k):g(k,E);var C=[],O=i(k),P,j;for(j=0;j<O;j++)j in k&&b(C,k[j]);for(l(C,_(E)),P=i(C),j=0;j<P;)k[j]=C[j++];for(;j<O;)s(k,j++);return k}}),yX}var ZO,_X;function FAe(){if(_X)return ZO;_X=1,AAe();var t=ln();return ZO=t("Array","sort"),ZO}var ej,EX;function qAe(){if(EX)return ej;EX=1;var t=Tr(),e=FAe(),r=Array.prototype;return ej=function(n){var i=n.sort;return n===r||t(r,n)&&i===r.sort?e:i},ej}var tj,NX;function LAe(){if(NX)return tj;NX=1;var t=qAe();return tj=t,tj}var rj,CX;function BAe(){return CX||(CX=1,rj=LAe()),rj}var zAe=BAe(),id=ze(zAe),kX={},nj,TX;function VAe(){if(TX)return nj;TX=1;var t=Ho(),e=wi(),r=sb(),n=Wo(),i=TypeError,s="Reduce of empty array with no initial value",o=function(a){return function(l,c,d,h){var f=e(l),p=r(f),m=n(f);if(t(c),m===0&&d<2)throw new i(s);var g=a?m-1:0,b=a?-1:1;if(d<2)for(;;){if(g in p){h=p[g],g+=b;break}if(g+=b,a?g<0:m<=g)throw new i(s)}for(;a?g>=0:m>g;g+=b)g in p&&(h=c(h,p[g],g,f));return h}};return nj={left:o(!1),right:o(!0)},nj}var ij,OX;function UAe(){if(OX)return ij;OX=1;var t=Ooe();return ij=t==="NODE",ij}var jX;function HAe(){if(jX)return kX;jX=1;var t=Pe(),e=VAe().left,r=Th(),n=Nm(),i=UAe(),s=!i&&n>79&&n<83,o=s||!r("reduce");return t({target:"Array",proto:!0,forced:o},{reduce:function(l){var c=arguments.length;return e(this,l,c,c>1?arguments[1]:void 0)}}),kX}var sj,PX;function WAe(){if(PX)return sj;PX=1,HAe();var t=ln();return sj=t("Array","reduce"),sj}var oj,IX;function KAe(){if(IX)return oj;IX=1;var t=Tr(),e=WAe(),r=Array.prototype;return oj=function(n){var i=n.reduce;return n===r||t(r,n)&&i===r.reduce?e:i},oj}var aj,RX;function GAe(){if(RX)return aj;RX=1;var t=KAe();return aj=t,aj}var lj,MX;function YAe(){return MX||(MX=1,lj=GAe()),lj}var QAe=YAe(),jae=ze(QAe);class Pae{abstract(){throw new Error("Can't instantiate abstract class!")}fake_use(){}curveType(){return this.abstract()}getPosition(e){return this.fake_use(e),this.abstract()}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;this.fake_use(e,r,n),this.abstract()}getTreeSize(e){return this.fake_use(e),this.abstract()}sort(e){this.fake_use(e),this.abstract()}fix(e,r){this.fake_use(e,r),this.abstract()}shift(e,r){this.fake_use(e,r),this.abstract()}}class XAe extends Pae{constructor(e){super(),this.layout=e}curveType(){return"horizontal"}getPosition(e){return e.x}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;n!==void 0&&this.layout.hierarchical.addToOrdering(e,n),e.x=r}getTreeSize(e){const r=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:r.min_x,max:r.max_x}}sort(e){id(e).call(e,function(r,n){return r.x-n.x})}fix(e,r){e.y=this.layout.options.hierarchical.levelSeparation*r,e.options.fixed.y=!0}shift(e,r){this.layout.body.nodes[e].x+=r}}class JAe extends Pae{constructor(e){super(),this.layout=e}curveType(){return"vertical"}getPosition(e){return e.y}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;n!==void 0&&this.layout.hierarchical.addToOrdering(e,n),e.y=r}getTreeSize(e){const r=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:r.min_y,max:r.max_y}}sort(e){id(e).call(e,function(r,n){return r.y-n.y})}fix(e,r){e.x=this.layout.options.hierarchical.levelSeparation*r,e.options.fixed.x=!0}shift(e,r){this.layout.body.nodes[e].y+=r}}var $X={},DX;function ZAe(){if(DX)return $X;DX=1;var t=Pe(),e=yl().every,r=Th(),n=r("every");return t({target:"Array",proto:!0,forced:!n},{every:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),$X}var cj,AX;function eFe(){if(AX)return cj;AX=1,ZAe();var t=ln();return cj=t("Array","every"),cj}var uj,FX;function tFe(){if(FX)return uj;FX=1;var t=Tr(),e=eFe(),r=Array.prototype;return uj=function(n){var i=n.every;return n===r||t(r,n)&&i===r.every?e:i},uj}var dj,qX;function rFe(){if(qX)return dj;qX=1;var t=tFe();return dj=t,dj}var hj,LX;function nFe(){return LX||(LX=1,hj=rFe()),hj}var iFe=nFe(),Iae=ze(iFe);function sFe(t,e){const r=new fa;return jt(t).call(t,n=>{var i;jt(i=n.edges).call(i,s=>{s.connected&&r.add(s)})}),jt(r).call(r,n=>{const i=n.from.id,s=n.to.id;e[i]==null&&(e[i]=0),(e[s]==null||e[i]>=e[s])&&(e[s]=e[i]+1)}),e}function oFe(t){return Rae(e=>{var r,n;return Iae(r=Un(n=e.edges).call(n,i=>t.has(i.toId))).call(r,i=>i.to===e)},(e,r)=>r>e,"from",t)}function aFe(t){return Rae(e=>{var r,n;return Iae(r=Un(n=e.edges).call(n,i=>t.has(i.toId))).call(r,i=>i.from===e)},(e,r)=>r<e,"to",t)}function Rae(t,e,r,n){var i;const s=cc(null),o=jae(i=[..._ae(n).call(n)]).call(i,(h,f)=>h+1+f.edges.length,0),a=r+"Id",l=r==="to"?1:-1;for(const[h,f]of n){if(!n.has(h)||!t(f))continue;s[h]=0;const p=[f];let m=0,g;for(;g=p.pop();){var c,d;if(!n.has(h))continue;const b=s[g.id]+l;if(jt(c=Un(d=g.edges).call(d,y=>y.connected&&y.to!==y.from&&y[r]!==g&&n.has(y.toId)&&n.has(y.fromId))).call(c,y=>{const v=y[a],w=s[v];(w==null||e(b,w))&&(s[v]=b,p.push(y[r]))}),m>o)return sFe(n,s);++m}}return s}class lFe{constructor(){this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}addRelation(e,r){this.childrenReference[e]===void 0&&(this.childrenReference[e]=[]),this.childrenReference[e].push(r),this.parentReference[r]===void 0&&(this.parentReference[r]=[]),this.parentReference[r].push(e)}checkIfTree(){for(const e in this.parentReference)if(this.parentReference[e].length>1){this.isTree=!1;return}this.isTree=!0}numTrees(){return this.treeIndex+1}setTreeIndex(e,r){r!==void 0&&this.trees[e.id]===void 0&&(this.trees[e.id]=r,this.treeIndex=Math.max(r,this.treeIndex))}ensureLevel(e){this.levels[e]===void 0&&(this.levels[e]=0)}getMaxLevel(e){const r={},n=i=>{if(r[i]!==void 0)return r[i];let s=this.levels[i];if(this.childrenReference[i]){const o=this.childrenReference[i];if(o.length>0)for(let a=0;a<o.length;a++)s=Math.max(s,n(o[a]))}return r[i]=s,s};return n(e)}levelDownstream(e,r){this.levels[r.id]===void 0&&(this.levels[e.id]===void 0&&(this.levels[e.id]=0),this.levels[r.id]=this.levels[e.id]+1)}setMinLevelToZero(){var e;const r=new J$;let n=0;const i=id(e=[...new fa(_Pe(this.levels))]).call(e,(s,o)=>s-o);for(const s of i)r.set(s,n++);for(const s in this.levels)Object.prototype.hasOwnProperty.call(this.levels,s)&&(this.levels[s]=r.get(this.levels[s]))}getTreeSize(e,r){let n=1e9,i=-1e9,s=1e9,o=-1e9;for(const a in this.trees)if(Object.prototype.hasOwnProperty.call(this.trees,a)&&this.trees[a]===r){const l=e[a];n=Math.min(l.x,n),i=Math.max(l.x,i),s=Math.min(l.y,s),o=Math.max(l.y,o)}return{min_x:n,max_x:i,min_y:s,max_y:o}}hasSameParent(e,r){const n=this.parentReference[e.id],i=this.parentReference[r.id];if(n===void 0||i===void 0)return!1;for(let s=0;s<n.length;s++)for(let o=0;o<i.length;o++)if(n[s]==i[o])return!0;return!1}inSameSubNetwork(e,r){return this.trees[e.id]===this.trees[r.id]}getLevels(){return ar(this.distributionOrdering)}addToOrdering(e,r){this.distributionOrdering[r]===void 0&&(this.distributionOrdering[r]=[]);let n=!1;const i=this.distributionOrdering[r];for(const s in i)if(i[s]===e){n=!0;break}n||(this.distributionOrdering[r].push(e),this.distributionIndex[e.id]=this.distributionOrdering[r].length-1)}}class cFe{constructor(e){this.body=e,this._resetRNG(Math.random()+":"+Uv()),this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},Sr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("_dataChanged",()=>{this.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",()=>{this.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",()=>{this.setupHierarchicalLayout()}),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",()=>{if(this.options.hierarchical.enabled!==!0)return;const e=this.direction.curveType();this.body.emitter.emit("_forceDisableDynamicCurves",e,!1)})}setOptions(e,r){if(e!==void 0){const n=this.options.hierarchical,i=n.enabled;if(jh(["randomSeed","improvedLayout","clusterThreshold"],this.options,e),Oi(this.options,e,"hierarchical"),e.randomSeed!==void 0&&this._resetRNG(e.randomSeed),n.enabled===!0)return i===!0&&this.body.emitter.emit("refresh",!0),n.direction==="RL"||n.direction==="DU"?n.levelSeparation>0&&(n.levelSeparation*=-1):n.levelSeparation<0&&(n.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(r);if(i===!0)return this.body.emitter.emit("refresh"),$t(r,this.optionsBackup)}return r}_resetRNG(e){this.initialRandomSeed=e,this._rng=vb(this.initialRandomSeed)}adaptAllOptionsForHierarchicalLayout(e){if(this.options.hierarchical.enabled===!0){const r=this.optionsBackup.physics;e.physics===void 0||e.physics===!0?(e.physics={enabled:r.enabled===void 0?!0:r.enabled,solver:"hierarchicalRepulsion"},r.enabled=r.enabled===void 0?!0:r.enabled,r.solver=r.solver||"barnesHut"):typeof e.physics=="object"?(r.enabled=e.physics.enabled===void 0?!0:e.physics.enabled,r.solver=e.physics.solver||"barnesHut",e.physics.solver="hierarchicalRepulsion"):e.physics!==!1&&(r.solver="barnesHut",e.physics={solver:"hierarchicalRepulsion"});let n=this.direction.curveType();if(e.edges===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges={smooth:!1};else if(e.edges.smooth===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges.smooth=!1;else if(typeof e.edges.smooth=="boolean")this.optionsBackup.edges={smooth:e.edges.smooth},e.edges.smooth={enabled:e.edges.smooth,type:n};else{const i=e.edges.smooth;i.type!==void 0&&i.type!=="dynamic"&&(n=i.type),this.optionsBackup.edges={smooth:{enabled:i.enabled===void 0?!0:i.enabled,type:i.type===void 0?"dynamic":i.type,roundness:i.roundness===void 0?.5:i.roundness,forceDirection:i.forceDirection===void 0?!1:i.forceDirection}},e.edges.smooth={enabled:i.enabled===void 0?!0:i.enabled,type:n,roundness:i.roundness===void 0?.5:i.roundness,forceDirection:i.forceDirection===void 0?!1:i.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",n)}return e}positionInitially(e){if(this.options.hierarchical.enabled!==!0){this._resetRNG(this.initialRandomSeed);const r=e.length+50;for(let n=0;n<e.length;n++){const i=e[n],s=2*Math.PI*this._rng();i.x===void 0&&(i.x=r*Math.cos(s)),i.y===void 0&&(i.y=r*Math.sin(s))}}}layoutNetwork(){if(this.options.hierarchical.enabled!==!0&&this.options.improvedLayout===!0){const e=this.body.nodeIndices;let r=0;for(let n=0;n<e.length;n++)this.body.nodes[e[n]].predefinedPosition===!0&&(r+=1);if(r<.5*e.length){let i=0;const s=this.options.clusterThreshold,o={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(e.length>s){const l=e.length;for(;e.length>s&&i<=10;){i+=1;const c=e.length;i%3===0?this.body.modules.clustering.clusterBridges(o):this.body.modules.clustering.clusterOutliers(o);const d=e.length;if(c==d&&i%3!==0){this._declusterAll(),this.body.emitter.emit("_layoutFailed"),console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.");return}}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*l)})}i>10&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(e,this.body.edgeIndices,!0),this._shiftToCenter();const a=70;for(let l=0;l<e.length;l++){const c=this.body.nodes[e[l]];c.predefinedPosition===!1&&(c.x+=(.5-this._rng())*a,c.y+=(.5-this._rng())*a)}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}_shiftToCenter(){const e=Cn.getRangeCore(this.body.nodes,this.body.nodeIndices),r=Cn.findCenter(e);for(let n=0;n<this.body.nodeIndices.length;n++){const i=this.body.nodes[this.body.nodeIndices[n]];i.x-=r.x,i.y-=r.y}}_declusterAll(){let e=!0;for(;e===!0;){e=!1;for(let r=0;r<this.body.nodeIndices.length;r++)this.body.nodes[this.body.nodeIndices[r]].isCluster===!0&&(e=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[r],{},!1));e===!0&&this.body.emitter.emit("_dataChanged")}}getSeed(){return this.initialRandomSeed}setupHierarchicalLayout(){if(this.options.hierarchical.enabled===!0&&this.body.nodeIndices.length>0){let e,r,n=!1,i=!1;this.lastNodeOnLevel={},this.hierarchical=new lFe;for(r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&(e=this.body.nodes[r],e.options.level!==void 0?(n=!0,this.hierarchical.levels[r]=e.options.level):i=!0);if(i===!0&&n===!0)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");{if(i===!0){const o=this.options.hierarchical.sortMethod;o==="hubsize"?this._determineLevelsByHubsize():o==="directed"?this._determineLevelsDirected():o==="custom"&&this._determineLevelsCustomCallback()}for(const o in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,o)&&this.hierarchical.ensureLevel(o);const s=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(s),this._condenseHierarchy(),this._shiftToCenter()}}}_condenseHierarchy(){var e=this;let r=!1;const n={},i=()=>{const y=o();let v=0;for(let w=0;w<y.length-1;w++){const x=y[w].max-y[w+1].min;v+=x+this.options.hierarchical.treeSpacing,s(w+1,v)}},s=(y,v)=>{const w=this.hierarchical.trees;for(const x in w)Object.prototype.hasOwnProperty.call(w,x)&&w[x]===y&&this.direction.shift(x,v)},o=()=>{const y=[];for(let v=0;v<this.hierarchical.numTrees();v++)y.push(this.direction.getTreeSize(v));return y},a=(y,v)=>{if(!v[y.id]&&(v[y.id]=!0,this.hierarchical.childrenReference[y.id])){const w=this.hierarchical.childrenReference[y.id];if(w.length>0)for(let x=0;x<w.length;x++)a(this.body.nodes[w[x]],v)}},l=function(y){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e9,w=1e9,x=1e9,S=1e9,_=-1e9;for(const N in y)if(Object.prototype.hasOwnProperty.call(y,N)){const E=e.body.nodes[N],k=e.hierarchical.levels[E.id],C=e.direction.getPosition(E),[O,P]=e._getSpaceAroundNode(E,y);w=Math.min(O,w),x=Math.min(P,x),k<=v&&(S=Math.min(C,S),_=Math.max(C,_))}return[S,_,w,x]},c=(y,v)=>{const w=this.hierarchical.getMaxLevel(y.id),x=this.hierarchical.getMaxLevel(v.id);return Math.min(w,x)},d=(y,v,w)=>{const x=this.hierarchical;for(let S=0;S<v.length;S++){const _=v[S],N=x.distributionOrdering[_];if(N.length>1)for(let E=0;E<N.length-1;E++){const k=N[E],C=N[E+1];x.hasSameParent(k,C)&&x.inSameSubNetwork(k,C)&&y(k,C,w)}}},h=function(y,v){let w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const x=e.direction.getPosition(y),S=e.direction.getPosition(v),_=Math.abs(S-x),N=e.options.hierarchical.nodeSpacing;if(_>N){const E={},k={};a(y,E),a(v,k);const C=c(y,v),O=l(E,C),P=l(k,C),j=O[1],M=P[0],A=P[2];if(Math.abs(j-M)>N){let L=j-M+N;L<-A+N&&(L=-A+N),L<0&&(e._shiftBlock(v.id,L),r=!0,w===!0&&e._centerParent(v))}}},f=(y,v)=>{const w=v.id,x=v.edges,S=this.hierarchical.levels[v.id],_=this.options.hierarchical.levelSeparation*this.options.hierarchical.levelSeparation,N={},E=[];for(let A=0;A<x.length;A++){const I=x[A];if(I.toId!=I.fromId){const L=I.toId==w?I.from:I.to;N[x[A].id]=L,this.hierarchical.levels[L.id]<S&&E.push(I)}}const k=(A,I)=>{let L=0;for(let F=0;F<I.length;F++)if(N[I[F].id]!==void 0){const W=this.direction.getPosition(N[I[F].id])-A;L+=W/Math.sqrt(W*W+_)}return L},C=(A,I)=>{let L=0;for(let F=0;F<I.length;F++)if(N[I[F].id]!==void 0){const W=this.direction.getPosition(N[I[F].id])-A;L-=_*Math.pow(W*W+_,-1.5)}return L},O=(A,I)=>{let L=this.direction.getPosition(v);const F={};for(let W=0;W<A;W++){const B=k(L,I),U=C(L,I),K=40,fe=Math.max(-K,Math.min(K,Math.round(B/U)));if(L=L-fe,F[L]!==void 0)break;F[L]=W}return L},P=A=>{const I=this.direction.getPosition(v);if(n[v.id]===void 0){const K={};a(v,K),n[v.id]=K}const L=l(n[v.id]),F=L[2],W=L[3],B=A-I;let U=0;B>0?U=Math.min(B,W-this.options.hierarchical.nodeSpacing):B<0&&(U=-Math.min(-B,F-this.options.hierarchical.nodeSpacing)),U!=0&&(this._shiftBlock(v.id,U),r=!0)},j=A=>{const I=this.direction.getPosition(v),[L,F]=this._getSpaceAroundNode(v),W=A-I;let B=I;W>0?B=Math.min(I+(F-this.options.hierarchical.nodeSpacing),A):W<0&&(B=Math.max(I-(L-this.options.hierarchical.nodeSpacing),A)),B!==I&&(this.direction.setPosition(v,B),r=!0)};let M=O(y,E);P(M),M=O(y,x),j(M)},p=y=>{let v=this.hierarchical.getLevels();v=lc(v).call(v);for(let w=0;w<y;w++){r=!1;for(let x=0;x<v.length;x++){const S=v[x],_=this.hierarchical.distributionOrdering[S];for(let N=0;N<_.length;N++)f(1e3,_[N])}if(r!==!0)break}},m=y=>{let v=this.hierarchical.getLevels();v=lc(v).call(v);for(let w=0;w<y&&(r=!1,d(h,v,!0),r===!0);w++);},g=()=>{for(const y in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,y)&&this._centerParent(this.body.nodes[y])},b=()=>{let y=this.hierarchical.getLevels();y=lc(y).call(y);for(let v=0;v<y.length;v++){const w=y[v],x=this.hierarchical.distributionOrdering[w];for(let S=0;S<x.length;S++)this._centerParent(x[S])}};this.options.hierarchical.blockShifting===!0&&(m(5),g()),this.options.hierarchical.edgeMinimization===!0&&p(20),this.options.hierarchical.parentCentralization===!0&&b(),i()}_getSpaceAroundNode(e,r){let n=!0;r===void 0&&(n=!1);const i=this.hierarchical.levels[e.id];if(i!==void 0){const s=this.hierarchical.distributionIndex[e.id],o=this.direction.getPosition(e),a=this.hierarchical.distributionOrdering[i];let l=1e9,c=1e9;if(s!==0){const d=a[s-1];if(n===!0&&r[d.id]===void 0||n===!1){const h=this.direction.getPosition(d);l=o-h}}if(s!=a.length-1){const d=a[s+1];if(n===!0&&r[d.id]===void 0||n===!1){const h=this.direction.getPosition(d);c=Math.min(c,h-o)}}return[l,c]}else return[0,0]}_centerParent(e){if(this.hierarchical.parentReference[e.id]){const r=this.hierarchical.parentReference[e.id];for(let n=0;n<r.length;n++){const i=r[n],s=this.body.nodes[i],o=this.hierarchical.childrenReference[i];if(o!==void 0){const a=this._getCenterPosition(o),l=this.direction.getPosition(s),[c,d]=this._getSpaceAroundNode(s),h=l-a;(h<0&&Math.abs(h)<d-this.options.hierarchical.nodeSpacing||h>0&&Math.abs(h)<c-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(s,a)}}}}_placeNodesByHierarchy(e){this.positionedNodes={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r;let i=ar(e[n]);i=this._indexArrayToNodes(i),id(r=this.direction).call(r,i);let s=0;for(let o=0;o<i.length;o++){const a=i[o];if(this.positionedNodes[a.id]===void 0){const l=this.options.hierarchical.nodeSpacing;let c=l*s;s>0&&(c=this.direction.getPosition(i[o-1])+l),this.direction.setPosition(a,c,n),this._validatePositionAndContinue(a,n,c),s++}}}}_placeBranchNodes(e,r){var n;const i=this.hierarchical.childrenReference[e];if(i===void 0)return;const s=[];for(let a=0;a<i.length;a++)s.push(this.body.nodes[i[a]]);id(n=this.direction).call(n,s);for(let a=0;a<s.length;a++){const l=s[a],c=this.hierarchical.levels[l.id];if(c>r&&this.positionedNodes[l.id]===void 0){const d=this.options.hierarchical.nodeSpacing;let h;a===0?h=this.direction.getPosition(this.body.nodes[e]):h=this.direction.getPosition(s[a-1])+d,this.direction.setPosition(l,h,c),this._validatePositionAndContinue(l,c,h)}else return}const o=this._getCenterPosition(s);this.direction.setPosition(this.body.nodes[e],o,r)}_validatePositionAndContinue(e,r,n){if(this.hierarchical.isTree){if(this.lastNodeOnLevel[r]!==void 0){const i=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[r]]);if(n-i<this.options.hierarchical.nodeSpacing){const s=i+this.options.hierarchical.nodeSpacing-n,o=this._findCommonParent(this.lastNodeOnLevel[r],e.id);this._shiftBlock(o.withChild,s)}}this.lastNodeOnLevel[r]=e.id,this.positionedNodes[e.id]=!0,this._placeBranchNodes(e.id,r)}}_indexArrayToNodes(e){const r=[];for(let n=0;n<e.length;n++)r.push(this.body.nodes[e[n]]);return r}_getDistribution(){const e={};let r,n;for(r in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,r)){n=this.body.nodes[r];const i=this.hierarchical.levels[r]===void 0?0:this.hierarchical.levels[r];this.direction.fix(n,i),e[i]===void 0&&(e[i]={}),e[i][r]=n}return e}_getActiveEdges(e){const r=[];return Ze(e.edges,n=>{var i;Nt(i=this.body.edgeIndices).call(i,n.id)!==-1&&r.push(n)}),r}_getHubSizes(){const e={},r=this.body.nodeIndices;Ze(r,i=>{const s=this.body.nodes[i],o=this._getActiveEdges(s).length;e[o]=!0});const n=[];return Ze(e,i=>{n.push(Number(i))}),id(n).call(n,function(i,s){return s-i}),n}_determineLevelsByHubsize(){const e=(n,i)=>{this.hierarchical.levelDownstream(n,i)},r=this._getHubSizes();for(let n=0;n<r.length;++n){const i=r[n];if(i===0)break;Ze(this.body.nodeIndices,s=>{const o=this.body.nodes[s];i===this._getActiveEdges(o).length&&this._crawlNetwork(e,s)})}}_determineLevelsCustomCallback(){const r=function(i,s,o){},n=(i,s,o)=>{let a=this.hierarchical.levels[i.id];a===void 0&&(a=this.hierarchical.levels[i.id]=1e5);const l=r(Cn.cloneOptions(i,"node"),Cn.cloneOptions(s,"node"),Cn.cloneOptions(o,"edge"));this.hierarchical.levels[s.id]=a+l};this._crawlNetwork(n),this.hierarchical.setMinLevelToZero()}_determineLevelsDirected(){var e;const r=jae(e=this.body.nodeIndices).call(e,(n,i)=>(n.set(i,this.body.nodes[i]),n),new J$);this.options.hierarchical.shakeTowards==="roots"?this.hierarchical.levels=aFe(r):this.hierarchical.levels=oFe(r),this.hierarchical.setMinLevelToZero()}_generateMap(){const e=(r,n)=>{this.hierarchical.levels[n.id]>this.hierarchical.levels[r.id]&&this.hierarchical.addRelation(r.id,n.id)};this._crawlNetwork(e),this.hierarchical.checkIfTree()}_crawlNetwork(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},r=arguments.length>1?arguments[1]:void 0;const n={},i=(s,o)=>{if(n[s.id]===void 0){this.hierarchical.setTreeIndex(s,o),n[s.id]=!0;let a;const l=this._getActiveEdges(s);for(let c=0;c<l.length;c++){const d=l[c];d.connected===!0&&(d.toId==s.id?a=d.from:a=d.to,s.id!=a.id&&(e(s,a,d),i(a,o)))}}};if(r===void 0){let s=0;for(let o=0;o<this.body.nodeIndices.length;o++){const a=this.body.nodeIndices[o];if(n[a]===void 0){const l=this.body.nodes[a];i(l,s),s+=1}}}else{const s=this.body.nodes[r];if(s===void 0){console.error("Node not found:",r);return}i(s)}}_shiftBlock(e,r){const n={},i=s=>{if(n[s])return;n[s]=!0,this.direction.shift(s,r);const o=this.hierarchical.childrenReference[s];if(o!==void 0)for(let a=0;a<o.length;a++)i(o[a])};i(e)}_findCommonParent(e,r){const n={},i=(o,a)=>{const l=this.hierarchical.parentReference[a];if(l!==void 0)for(let c=0;c<l.length;c++){const d=l[c];o[d]=!0,i(o,d)}},s=(o,a)=>{const l=this.hierarchical.parentReference[a];if(l!==void 0)for(let c=0;c<l.length;c++){const d=l[c];if(o[d]!==void 0)return{foundParent:d,withChild:a};const h=s(o,d);if(h.foundParent!==null)return h}return{foundParent:null,withChild:a}};return i(n,e),s(n,r)}setDirectionStrategy(){this.options.hierarchical.direction==="UD"||this.options.hierarchical.direction==="DU"?this.direction=new XAe(this):this.direction=new JAe(this)}_getCenterPosition(e){let r=1e9,n=-1e9;for(let i=0;i<e.length;i++){let s;if(e[i].id!==void 0)s=e[i];else{const a=e[i];s=this.body.nodes[a]}const o=this.direction.getPosition(s);r=Math.min(r,o),n=Math.max(n,o)}return .5*(r+n)}}class uFe{constructor(e,r,n,i){var s,o;this.body=e,this.canvas=r,this.selectionHandler=n,this.interactionHandler=i,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this._domEventListenerCleanupQueue=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},Sr(this.options,this.defaultOptions),this.body.emitter.on("destroy",()=>{this._clean()}),this.body.emitter.on("_dataChanged",ne(s=this._restore).call(s,this)),this.body.emitter.on("_resetData",ne(o=this._restore).call(o,this))}_restore(){this.inMode!==!1&&(this.options.initiallyActive===!0?this.enableEditMode():this.disableEditMode())}setOptions(e,r,n){r!==void 0&&(r.locale!==void 0?this.options.locale=r.locale:this.options.locale=n.locale,r.locales!==void 0?this.options.locales=r.locales:this.options.locales=n.locales),e!==void 0&&(typeof e=="boolean"?this.options.enabled=e:(this.options.enabled=!0,$t(this.options,e)),this.options.initiallyActive===!0&&(this.editMode=!0),this._setup())}toggleEditMode(){this.editMode===!0?this.disableEditMode():this.enableEditMode()}enableEditMode(){this.editMode=!0,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}disableEditMode(){this.editMode=!1,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}showManipulatorToolbar(){if(this._clean(),this.manipulationDOM={},this.guiEnabled===!0){var e,r;this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";const n=this.selectionHandler.getSelectedNodeCount(),i=this.selectionHandler.getSelectedEdgeCount(),s=n+i,o=this.options.locales[this.options.locale];let a=!1;this.options.addNode!==!1&&(this._createAddNodeButton(o),a=!0),this.options.addEdge!==!1&&(a===!0?this._createSeperator(1):a=!0,this._createAddEdgeButton(o)),n===1&&typeof this.options.editNode=="function"?(a===!0?this._createSeperator(2):a=!0,this._createEditNodeButton(o)):i===1&&n===0&&this.options.editEdge!==!1&&(a===!0?this._createSeperator(3):a=!0,this._createEditEdgeButton(o)),s!==0&&(n>0&&this.options.deleteNode!==!1?(a===!0&&this._createSeperator(4),this._createDeleteButton(o)):n===0&&this.options.deleteEdge!==!1&&(a===!0&&this._createSeperator(4),this._createDeleteButton(o))),this._bindElementEvents(this.closeDiv,ne(e=this.toggleEditMode).call(e,this)),this._temporaryBindEvent("select",ne(r=this.showManipulatorToolbar).call(r,this))}this.body.emitter.emit("_redraw")}addNodeMode(){var e;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addNode",this.guiEnabled===!0){var r;const n=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(n),this._createSeperator(),this._createDescription(n.addDescription||this.options.locales.en.addDescription),this._bindElementEvents(this.closeDiv,ne(r=this.toggleEditMode).call(r,this))}this._temporaryBindEvent("click",ne(e=this._performAddNode).call(e,this))}editNode(){this.editMode!==!0&&this.enableEditMode(),this._clean();const e=this.selectionHandler.getSelectedNodes()[0];if(e!==void 0)if(this.inMode="editNode",typeof this.options.editNode=="function")if(e.isCluster!==!0){const r=$t({},e.options,!1);if(r.x=e.x,r.y=e.y,this.options.editNode.length===2)this.options.editNode(r,n=>{n!=null&&this.inMode==="editNode"&&this.body.data.nodes.getDataSet().update(n),this.showManipulatorToolbar()});else throw new Error("The function for edit does not support two arguments (data, callback)")}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError);else throw new Error("No function has been configured to handle the editing of nodes.");else this.showManipulatorToolbar()}addEdgeMode(){var e,r,n,i,s;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addEdge",this.guiEnabled===!0){var o;const a=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(a),this._createSeperator(),this._createDescription(a.edgeDescription||this.options.locales.en.edgeDescription),this._bindElementEvents(this.closeDiv,ne(o=this.toggleEditMode).call(o,this))}this._temporaryBindUI("onTouch",ne(e=this._handleConnect).call(e,this)),this._temporaryBindUI("onDragEnd",ne(r=this._finishConnect).call(r,this)),this._temporaryBindUI("onDrag",ne(n=this._dragControlNode).call(n,this)),this._temporaryBindUI("onRelease",ne(i=this._finishConnect).call(i,this)),this._temporaryBindUI("onDragStart",ne(s=this._dragStartEdge).call(s,this)),this._temporaryBindUI("onHold",()=>{})}editEdgeMode(){if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="editEdge",typeof this.options.editEdge=="object"&&typeof this.options.editEdge.editWithoutDrag=="function"&&(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0)){const o=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(o.from.id,o.to.id);return}if(this.guiEnabled===!0){var e;const o=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(o),this._createSeperator(),this._createDescription(o.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindElementEvents(this.closeDiv,ne(e=this.toggleEditMode).call(e,this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0){var r,n,i,s;const o=this.body.edges[this.edgeBeingEditedId],a=this._getNewTargetNode(o.from.x,o.from.y),l=this._getNewTargetNode(o.to.x,o.to.y);this.temporaryIds.nodes.push(a.id),this.temporaryIds.nodes.push(l.id),this.body.nodes[a.id]=a,this.body.nodeIndices.push(a.id),this.body.nodes[l.id]=l,this.body.nodeIndices.push(l.id),this._temporaryBindUI("onTouch",ne(r=this._controlNodeTouch).call(r,this)),this._temporaryBindUI("onTap",()=>{}),this._temporaryBindUI("onHold",()=>{}),this._temporaryBindUI("onDragStart",ne(n=this._controlNodeDragStart).call(n,this)),this._temporaryBindUI("onDrag",ne(i=this._controlNodeDrag).call(i,this)),this._temporaryBindUI("onDragEnd",ne(s=this._controlNodeDragEnd).call(s,this)),this._temporaryBindUI("onMouseMove",()=>{}),this._temporaryBindEvent("beforeDrawing",c=>{const d=o.edgeType.findBorderPositions(c);a.selected===!1&&(a.x=d.from.x,a.y=d.from.y),l.selected===!1&&(l.x=d.to.x,l.y=d.to.y)}),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}deleteSelected(){this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="delete";const e=this.selectionHandler.getSelectedNodeIds(),r=this.selectionHandler.getSelectedEdgeIds();let n;if(e.length>0){for(let i=0;i<e.length;i++)if(this.body.nodes[e[i]].isCluster===!0){alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);return}typeof this.options.deleteNode=="function"&&(n=this.options.deleteNode)}else r.length>0&&typeof this.options.deleteEdge=="function"&&(n=this.options.deleteEdge);if(typeof n=="function"){const i={nodes:e,edges:r};if(n.length===2)n(i,s=>{s!=null&&this.inMode==="delete"?(this.body.data.edges.getDataSet().remove(s.edges),this.body.data.nodes.getDataSet().remove(s.nodes),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()):(this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar())});else throw new Error("The function for delete does not support two arguments (data, callback)")}else this.body.data.edges.getDataSet().remove(r),this.body.data.nodes.getDataSet().remove(e),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}_setup(){this.options.enabled===!0?(this.guiEnabled=!0,this._createWrappers(),this.editMode===!1?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}_createWrappers(){if(this.manipulationDiv===void 0&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",this.editMode===!0?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),this.editModeDiv===void 0&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",this.editMode===!0?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),this.closeDiv===void 0){var e,r;this.closeDiv=document.createElement("button"),this.closeDiv.className="vis-close",this.closeDiv.setAttribute("aria-label",(e=(r=this.options.locales[this.options.locale])===null||r===void 0?void 0:r.close)!==null&&e!==void 0?e:this.options.locales.en.close),this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv)}}_getNewTargetNode(e,r){const n=$t({},this.options.controlNodeStyle);n.id="targetNode"+zf(),n.hidden=!1,n.physics=!1,n.x=e,n.y=r;const i=this.body.functions.createNode(n);return i.shape.boundingBox={left:e,right:e,top:r,bottom:r},i}_createEditButton(){var e;this._clean(),this.manipulationDOM={},aa(this.editModeDiv);const r=this.options.locales[this.options.locale],n=this._createButton("editMode","vis-edit vis-edit-mode",r.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(n),this._bindElementEvents(n,ne(e=this.toggleEditMode).call(e,this))}_clean(){this.inMode=!1,this.guiEnabled===!0&&(aa(this.editModeDiv),aa(this.manipulationDiv),this._cleanupDOMEventListeners()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}_cleanupDOMEventListeners(){for(const r of _o(e=this._domEventListenerCleanupQueue).call(e,0)){var e;r()}}_removeManipulationDOM(){this._clean(),aa(this.manipulationDiv),aa(this.editModeDiv),aa(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}_createSeperator(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+e]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+e].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+e])}_createAddNodeButton(e){var r;const n=this._createButton("addNode","vis-add",e.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ne(r=this.addNodeMode).call(r,this))}_createAddEdgeButton(e){var r;const n=this._createButton("addEdge","vis-connect",e.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ne(r=this.addEdgeMode).call(r,this))}_createEditNodeButton(e){var r;const n=this._createButton("editNode","vis-edit",e.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ne(r=this.editNode).call(r,this))}_createEditEdgeButton(e){var r;const n=this._createButton("editEdge","vis-edit",e.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ne(r=this.editEdgeMode).call(r,this))}_createDeleteButton(e){var r;let n;this.options.rtl?n="vis-delete-rtl":n="vis-delete";const i=this._createButton("delete",n,e.del||this.options.locales.en.del);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,ne(r=this.deleteSelected).call(r,this))}_createBackButton(e){var r;const n=this._createButton("back","vis-back",e.back||this.options.locales.en.back);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ne(r=this.showManipulatorToolbar).call(r,this))}_createButton(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"vis-label";return this.manipulationDOM[e+"Div"]=document.createElement("button"),this.manipulationDOM[e+"Div"].className="vis-button "+r,this.manipulationDOM[e+"Label"]=document.createElement("div"),this.manipulationDOM[e+"Label"].className=i,this.manipulationDOM[e+"Label"].innerText=n,this.manipulationDOM[e+"Div"].appendChild(this.manipulationDOM[e+"Label"]),this.manipulationDOM[e+"Div"]}_createDescription(e){this.manipulationDOM.descriptionLabel=document.createElement("div"),this.manipulationDOM.descriptionLabel.className="vis-none",this.manipulationDOM.descriptionLabel.innerText=e,this.manipulationDiv.appendChild(this.manipulationDOM.descriptionLabel)}_temporaryBindEvent(e,r){this.temporaryEventFunctions.push({event:e,boundFunction:r}),this.body.emitter.on(e,r)}_temporaryBindUI(e,r){if(this.body.eventListeners[e]!==void 0)this.temporaryUIFunctions[e]=this.body.eventListeners[e],this.body.eventListeners[e]=r;else throw new Error("This UI function does not exist. Typo? You tried: "+e+" possible are: "+Im(ar(this.body.eventListeners)))}_unbindTemporaryUIs(){for(const e in this.temporaryUIFunctions)Object.prototype.hasOwnProperty.call(this.temporaryUIFunctions,e)&&(this.body.eventListeners[e]=this.temporaryUIFunctions[e],delete this.temporaryUIFunctions[e]);this.temporaryUIFunctions={}}_unbindTemporaryEvents(){for(let e=0;e<this.temporaryEventFunctions.length;e++){const r=this.temporaryEventFunctions[e].event,n=this.temporaryEventFunctions[e].boundFunction;this.body.emitter.off(r,n)}this.temporaryEventFunctions=[]}_bindElementEvents(e,r){const n=new rd(e,{});Xv(n,r),this._domEventListenerCleanupQueue.push(()=>{n.destroy()});const i=s=>{let{keyCode:o,key:a}=s;(a==="Enter"||a===" "||o===13||o===32)&&r()};e.addEventListener("keyup",i,!1),this._domEventListenerCleanupQueue.push(()=>{e.removeEventListener("keyup",i,!1)})}_cleanupTemporaryNodesAndEdges(){for(let s=0;s<this.temporaryIds.edges.length;s++){var e;this.body.edges[this.temporaryIds.edges[s]].disconnect(),delete this.body.edges[this.temporaryIds.edges[s]];const o=Nt(e=this.body.edgeIndices).call(e,this.temporaryIds.edges[s]);if(o!==-1){var r;_o(r=this.body.edgeIndices).call(r,o,1)}}for(let s=0;s<this.temporaryIds.nodes.length;s++){var n;delete this.body.nodes[this.temporaryIds.nodes[s]];const o=Nt(n=this.body.nodeIndices).call(n,this.temporaryIds.nodes[s]);if(o!==-1){var i;_o(i=this.body.nodeIndices).call(i,o,1)}}this.temporaryIds={nodes:[],edges:[]}}_controlNodeTouch(e){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=Sr({},this.body.view.translation)}_controlNodeDragStart(){const e=this.lastTouch,r=this.selectionHandler._pointerToPositionObject(e),n=this.body.nodes[this.temporaryIds.nodes[0]],i=this.body.nodes[this.temporaryIds.nodes[1]],s=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;const o=n.isOverlappingWith(r),a=i.isOverlappingWith(r);o===!0?(this.selectedControlNode=n,s.edgeType.from=n):a===!0&&(this.selectedControlNode=i,s.edgeType.to=i),this.selectedControlNode!==void 0&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}_controlNodeDrag(e){this.body.emitter.emit("disablePhysics");const r=this.body.functions.getPointer(e.center),n=this.canvas.DOMtoCanvas(r);this.selectedControlNode!==void 0?(this.selectedControlNode.x=n.x,this.selectedControlNode.y=n.y):this.interactionHandler.onDrag(e),this.body.emitter.emit("_redraw")}_controlNodeDragEnd(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r),i=this.body.edges[this.edgeBeingEditedId];if(this.selectedControlNode===void 0)return;this.selectionHandler.unselectAll();const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let a=s.length-1;a>=0;a--)if(s[a]!==this.selectedControlNode.id){o=this.body.nodes[s[a]];break}if(o!==void 0&&this.selectedControlNode!==void 0)if(o.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{const a=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===a.id?this._performEditEdge(o.id,i.to.id):this._performEditEdge(i.from.id,o.id)}else i.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}_handleConnect(e){if(new Date().valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=Sr({},this.body.view.translation),this.interactionHandler.drag.pointer=this.lastTouch,this.interactionHandler.drag.translation=this.lastTouch.translation;const r=this.lastTouch,n=this.selectionHandler.getNodeAt(r);if(n!==void 0)if(n.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{const i=this._getNewTargetNode(n.x,n.y);this.body.nodes[i.id]=i,this.body.nodeIndices.push(i.id);const s=this.body.functions.createEdge({id:"connectionEdge"+zf(),from:n.id,to:i.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[s.id]=s,this.body.edgeIndices.push(s.id),this.temporaryIds.nodes.push(i.id),this.temporaryIds.edges.push(s.id)}this.touchTime=new Date().valueOf()}}_dragControlNode(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r);let i;this.temporaryIds.edges[0]!==void 0&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let l=s.length-1;l>=0;l--){var a;if(Nt(a=this.temporaryIds.nodes).call(a,s[l])===-1){o=this.body.nodes[s[l]];break}}if(e.controlEdge={from:i,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragging",e,r),this.temporaryIds.nodes[0]!==void 0){const l=this.body.nodes[this.temporaryIds.nodes[0]];l.x=this.canvas._XconvertDOMtoCanvas(r.x),l.y=this.canvas._YconvertDOMtoCanvas(r.y),this.body.emitter.emit("_redraw")}else this.interactionHandler.onDrag(e)}_finishConnect(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r);let i;this.temporaryIds.edges[0]!==void 0&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let l=s.length-1;l>=0;l--){var a;if(Nt(a=this.temporaryIds.nodes).call(a,s[l])===-1){o=this.body.nodes[s[l]];break}}this._cleanupTemporaryNodesAndEdges(),o!==void 0&&(o.isCluster===!0?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):this.body.nodes[i]!==void 0&&this.body.nodes[o.id]!==void 0&&this._performAddEdge(i,o.id)),e.controlEdge={from:i,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragEnd",e,r),this.body.emitter.emit("_redraw")}_dragStartEdge(e){const r=this.lastTouch;this.selectionHandler.generateClickEvent("dragStart",e,r,void 0,!0)}_performAddNode(e){const r={id:zf(),x:e.pointer.canvas.x,y:e.pointer.canvas.y,label:"new"};if(typeof this.options.addNode=="function")if(this.options.addNode.length===2)this.options.addNode(r,n=>{n!=null&&this.inMode==="addNode"&&this.body.data.nodes.getDataSet().add(n),this.showManipulatorToolbar()});else throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");else this.body.data.nodes.getDataSet().add(r),this.showManipulatorToolbar()}_performAddEdge(e,r){const n={from:e,to:r};if(typeof this.options.addEdge=="function")if(this.options.addEdge.length===2)this.options.addEdge(n,i=>{i!=null&&this.inMode==="addEdge"&&(this.body.data.edges.getDataSet().add(i),this.selectionHandler.unselectAll(),this.showManipulatorToolbar())});else throw new Error("The function for connect does not support two arguments (data,callback)");else this.body.data.edges.getDataSet().add(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}_performEditEdge(e,r){const n={id:this.edgeBeingEditedId,from:e,to:r,label:this.body.data.edges.get(this.edgeBeingEditedId).label};let i=this.options.editEdge;if(typeof i=="object"&&(i=i.editWithoutDrag),typeof i=="function")if(i.length===2)i(n,s=>{s==null||this.inMode!=="editEdge"?(this.body.edges[n.id].updateEdgeType(),this.body.emitter.emit("_redraw"),this.showManipulatorToolbar()):(this.body.data.edges.getDataSet().update(s),this.selectionHandler.unselectAll(),this.showManipulatorToolbar())});else throw new Error("The function for edit does not support two arguments (data, callback)");else this.body.data.edges.getDataSet().update(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}const ae="string",re="boolean",H="number",pf="array",Ce="object",Mae="dom",dFe="any",fj=["arrow","bar","box","circle","crow","curve","diamond","image","inv_curve","inv_triangle","triangle","vee"],pj={borderWidth:{number:H},borderWidthSelected:{number:H,undefined:"undefined"},brokenImage:{string:ae,undefined:"undefined"},chosen:{label:{boolean:re,function:"function"},node:{boolean:re,function:"function"},__type__:{object:Ce,boolean:re}},color:{border:{string:ae},background:{string:ae},highlight:{border:{string:ae},background:{string:ae},__type__:{object:Ce,string:ae}},hover:{border:{string:ae},background:{string:ae},__type__:{object:Ce,string:ae}},__type__:{object:Ce,string:ae}},opacity:{number:H,undefined:"undefined"},fixed:{x:{boolean:re},y:{boolean:re},__type__:{object:Ce,boolean:re}},font:{align:{string:ae},color:{string:ae},size:{number:H},face:{string:ae},background:{string:ae},strokeWidth:{number:H},strokeColor:{string:ae},vadjust:{number:H},multi:{boolean:re,string:ae},bold:{color:{string:ae},size:{number:H},face:{string:ae},mod:{string:ae},vadjust:{number:H},__type__:{object:Ce,string:ae}},boldital:{color:{string:ae},size:{number:H},face:{string:ae},mod:{string:ae},vadjust:{number:H},__type__:{object:Ce,string:ae}},ital:{color:{string:ae},size:{number:H},face:{string:ae},mod:{string:ae},vadjust:{number:H},__type__:{object:Ce,string:ae}},mono:{color:{string:ae},size:{number:H},face:{string:ae},mod:{string:ae},vadjust:{number:H},__type__:{object:Ce,string:ae}},__type__:{object:Ce,string:ae}},group:{string:ae,number:H,undefined:"undefined"},heightConstraint:{minimum:{number:H},valign:{string:ae},__type__:{object:Ce,boolean:re,number:H}},hidden:{boolean:re},icon:{face:{string:ae},code:{string:ae},size:{number:H},color:{string:ae},weight:{string:ae,number:H},__type__:{object:Ce}},id:{string:ae,number:H},image:{selected:{string:ae,undefined:"undefined"},unselected:{string:ae,undefined:"undefined"},__type__:{object:Ce,string:ae}},imagePadding:{top:{number:H},right:{number:H},bottom:{number:H},left:{number:H},__type__:{object:Ce,number:H}},label:{string:ae,undefined:"undefined"},labelHighlightBold:{boolean:re},level:{number:H,undefined:"undefined"},margin:{top:{number:H},right:{number:H},bottom:{number:H},left:{number:H},__type__:{object:Ce,number:H}},mass:{number:H},physics:{boolean:re},scaling:{min:{number:H},max:{number:H},label:{enabled:{boolean:re},min:{number:H},max:{number:H},maxVisible:{number:H},drawThreshold:{number:H},__type__:{object:Ce,boolean:re}},customScalingFunction:{function:"function"},__type__:{object:Ce}},shadow:{enabled:{boolean:re},color:{string:ae},size:{number:H},x:{number:H},y:{number:H},__type__:{object:Ce,boolean:re}},shape:{string:["custom","ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},ctxRenderer:{function:"function"},shapeProperties:{borderDashes:{boolean:re,array:pf},borderRadius:{number:H},interpolation:{boolean:re},useImageSize:{boolean:re},useBorderWithImage:{boolean:re},coordinateOrigin:{string:["center","top-left"]},__type__:{object:Ce}},size:{number:H},title:{string:ae,dom:Mae,undefined:"undefined"},value:{number:H,undefined:"undefined"},widthConstraint:{minimum:{number:H},maximum:{number:H},__type__:{object:Ce,boolean:re,number:H}},x:{number:H},y:{number:H},__type__:{object:Ce}},hFe={configure:{enabled:{boolean:re},filter:{boolean:re,string:ae,array:pf,function:"function"},container:{dom:Mae},showButton:{boolean:re},__type__:{object:Ce,boolean:re,string:ae,array:pf,function:"function"}},edges:{arrows:{to:{enabled:{boolean:re},scaleFactor:{number:H},type:{string:fj},imageHeight:{number:H},imageWidth:{number:H},src:{string:ae},__type__:{object:Ce,boolean:re}},middle:{enabled:{boolean:re},scaleFactor:{number:H},type:{string:fj},imageWidth:{number:H},imageHeight:{number:H},src:{string:ae},__type__:{object:Ce,boolean:re}},from:{enabled:{boolean:re},scaleFactor:{number:H},type:{string:fj},imageWidth:{number:H},imageHeight:{number:H},src:{string:ae},__type__:{object:Ce,boolean:re}},__type__:{string:["from","to","middle"],object:Ce}},endPointOffset:{from:{number:H},to:{number:H},__type__:{object:Ce,number:H}},arrowStrikethrough:{boolean:re},background:{enabled:{boolean:re},color:{string:ae},size:{number:H},dashes:{boolean:re,array:pf},__type__:{object:Ce,boolean:re}},chosen:{label:{boolean:re,function:"function"},edge:{boolean:re,function:"function"},__type__:{object:Ce,boolean:re}},color:{color:{string:ae},highlight:{string:ae},hover:{string:ae},inherit:{string:["from","to","both"],boolean:re},opacity:{number:H},__type__:{object:Ce,string:ae}},dashes:{boolean:re,array:pf},font:{color:{string:ae},size:{number:H},face:{string:ae},background:{string:ae},strokeWidth:{number:H},strokeColor:{string:ae},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:H},multi:{boolean:re,string:ae},bold:{color:{string:ae},size:{number:H},face:{string:ae},mod:{string:ae},vadjust:{number:H},__type__:{object:Ce,string:ae}},boldital:{color:{string:ae},size:{number:H},face:{string:ae},mod:{string:ae},vadjust:{number:H},__type__:{object:Ce,string:ae}},ital:{color:{string:ae},size:{number:H},face:{string:ae},mod:{string:ae},vadjust:{number:H},__type__:{object:Ce,string:ae}},mono:{color:{string:ae},size:{number:H},face:{string:ae},mod:{string:ae},vadjust:{number:H},__type__:{object:Ce,string:ae}},__type__:{object:Ce,string:ae}},hidden:{boolean:re},hoverWidth:{function:"function",number:H},label:{string:ae,undefined:"undefined"},labelHighlightBold:{boolean:re},length:{number:H,undefined:"undefined"},physics:{boolean:re},scaling:{min:{number:H},max:{number:H},label:{enabled:{boolean:re},min:{number:H},max:{number:H},maxVisible:{number:H},drawThreshold:{number:H},__type__:{object:Ce,boolean:re}},customScalingFunction:{function:"function"},__type__:{object:Ce}},selectionWidth:{function:"function",number:H},selfReferenceSize:{number:H},selfReference:{size:{number:H},angle:{number:H},renderBehindTheNode:{boolean:re},__type__:{object:Ce}},shadow:{enabled:{boolean:re},color:{string:ae},size:{number:H},x:{number:H},y:{number:H},__type__:{object:Ce,boolean:re}},smooth:{enabled:{boolean:re},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:H},forceDirection:{string:["horizontal","vertical","none"],boolean:re},__type__:{object:Ce,boolean:re}},title:{string:ae,undefined:"undefined"},width:{number:H},widthConstraint:{maximum:{number:H},__type__:{object:Ce,boolean:re,number:H}},value:{number:H,undefined:"undefined"},__type__:{object:Ce}},groups:{useDefaultGroups:{boolean:re},__any__:pj,__type__:{object:Ce}},interaction:{dragNodes:{boolean:re},dragView:{boolean:re},hideEdgesOnDrag:{boolean:re},hideEdgesOnZoom:{boolean:re},hideNodesOnDrag:{boolean:re},hover:{boolean:re},keyboard:{enabled:{boolean:re},speed:{x:{number:H},y:{number:H},zoom:{number:H},__type__:{object:Ce}},bindToWindow:{boolean:re},autoFocus:{boolean:re},__type__:{object:Ce,boolean:re}},multiselect:{boolean:re},navigationButtons:{boolean:re},selectable:{boolean:re},selectConnectedEdges:{boolean:re},hoverConnectedEdges:{boolean:re},tooltipDelay:{number:H},zoomView:{boolean:re},zoomSpeed:{number:H},__type__:{object:Ce}},layout:{randomSeed:{undefined:"undefined",number:H,string:ae},improvedLayout:{boolean:re},clusterThreshold:{number:H},hierarchical:{enabled:{boolean:re},levelSeparation:{number:H},nodeSpacing:{number:H},treeSpacing:{number:H},blockShifting:{boolean:re},edgeMinimization:{boolean:re},parentCentralization:{boolean:re},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:Ce,boolean:re}},__type__:{object:Ce}},manipulation:{enabled:{boolean:re},initiallyActive:{boolean:re},addNode:{boolean:re,function:"function"},addEdge:{boolean:re,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:Ce,boolean:re,function:"function"}},deleteNode:{boolean:re,function:"function"},deleteEdge:{boolean:re,function:"function"},controlNodeStyle:pj,__type__:{object:Ce,boolean:re}},nodes:pj,physics:{enabled:{boolean:re},barnesHut:{theta:{number:H},gravitationalConstant:{number:H},centralGravity:{number:H},springLength:{number:H},springConstant:{number:H},damping:{number:H},avoidOverlap:{number:H},__type__:{object:Ce}},forceAtlas2Based:{theta:{number:H},gravitationalConstant:{number:H},centralGravity:{number:H},springLength:{number:H},springConstant:{number:H},damping:{number:H},avoidOverlap:{number:H},__type__:{object:Ce}},repulsion:{centralGravity:{number:H},springLength:{number:H},springConstant:{number:H},nodeDistance:{number:H},damping:{number:H},__type__:{object:Ce}},hierarchicalRepulsion:{centralGravity:{number:H},springLength:{number:H},springConstant:{number:H},nodeDistance:{number:H},damping:{number:H},avoidOverlap:{number:H},__type__:{object:Ce}},maxVelocity:{number:H},minVelocity:{number:H},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:re},iterations:{number:H},updateInterval:{number:H},onlyDynamicEdges:{boolean:re},fit:{boolean:re},__type__:{object:Ce,boolean:re}},timestep:{number:H},adaptiveTimestep:{boolean:re},wind:{x:{number:H},y:{number:H},__type__:{object:Ce}},__type__:{object:Ce,boolean:re}},autoResize:{boolean:re},clickToUse:{boolean:re},locale:{string:ae},locales:{__any__:{any:dFe},__type__:{object:Ce}},height:{string:ae},width:{string:ae},__type__:{object:Ce}},$ae={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},opacity:[0,0,1,.1],fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},endPointOffset:{from:[0,-10,10,1],to:[0,-10,10,1]},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0,autoFocus:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},fFe=(t,e,r)=>{var n;return!!(Ga(t).call(t,"physics")&&Ga(n=$ae.physics.solver).call(n,e)&&r.physics.solver!==e&&e!=="wind")};class pFe{constructor(){}getDistances(e,r,n){const i={},s=e.edges;for(let a=0;a<r.length;a++){const l=r[a],c={};i[l]=c;for(let d=0;d<r.length;d++)c[r[d]]=a==d?0:1e9}for(let a=0;a<n.length;a++){const l=s[n[a]];l.connected===!0&&i[l.fromId]!==void 0&&i[l.toId]!==void 0&&(i[l.fromId][l.toId]=1,i[l.toId][l.fromId]=1)}const o=r.length;for(let a=0;a<o;a++){const l=r[a],c=i[l];for(let d=0;d<o-1;d++){const h=r[d],f=i[h];for(let p=d+1;p<o;p++){const m=r[p],g=i[m],b=Math.min(f[m],f[l]+c[m]);f[m]=b,g[h]=b}}}return i}}class mFe{constructor(e,r,n){this.body=e,this.springLength=r,this.springConstant=n,this.distanceSolver=new pFe}setOptions(e){e&&(e.springLength&&(this.springLength=e.springLength),e.springConstant&&(this.springConstant=e.springConstant))}solve(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=this.distanceSolver.getDistances(this.body,e,r);this._createL_matrix(i),this._createK_matrix(i),this._createE_matrix();const s=.01,o=1;let a=0;const l=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),c=5;let d=1e9,h=0,f=0,p=0,m=0,g=0;for(;d>s&&a<l;)for(a+=1,[h,d,f,p]=this._getHighestEnergyNode(n),m=d,g=0;m>o&&g<c;)g+=1,this._moveNode(h,f,p),[m,f,p]=this._getEnergy(h)}_getHighestEnergyNode(e){const r=this.body.nodeIndices,n=this.body.nodes;let i=0,s=r[0],o=0,a=0;for(let l=0;l<r.length;l++){const c=r[l];if(n[c].predefinedPosition!==!0||n[c].isCluster===!0&&e===!0||n[c].options.fixed.x!==!0||n[c].options.fixed.y!==!0){const[d,h,f]=this._getEnergy(c);i<d&&(i=d,s=c,o=h,a=f)}}return[s,i,o,a]}_getEnergy(e){const[r,n]=this.E_sums[e];return[Math.sqrt(r**2+n**2),r,n]}_moveNode(e,r,n){const i=this.body.nodeIndices,s=this.body.nodes;let o=0,a=0,l=0;const c=s[e].x,d=s[e].y,h=this.K_matrix[e],f=this.L_matrix[e];for(let x=0;x<i.length;x++){const S=i[x];if(S!==e){const _=s[S].x,N=s[S].y,E=h[S],k=f[S],C=1/((c-_)**2+(d-N)**2)**1.5;o+=E*(1-k*(d-N)**2*C),a+=E*(k*(c-_)*(d-N)*C),l+=E*(1-k*(c-_)**2*C)}}const p=o,m=a,g=r,b=l,y=n,v=(g/p+y/m)/(m/p-b/m),w=-(m*v+g)/p;s[e].x+=w,s[e].y+=v,this._updateE_matrix(e)}_createL_matrix(e){const r=this.body.nodeIndices,n=this.springLength;this.L_matrix=[];for(let i=0;i<r.length;i++){this.L_matrix[r[i]]={};for(let s=0;s<r.length;s++)this.L_matrix[r[i]][r[s]]=n*e[r[i]][r[s]]}}_createK_matrix(e){const r=this.body.nodeIndices,n=this.springConstant;this.K_matrix=[];for(let i=0;i<r.length;i++){this.K_matrix[r[i]]={};for(let s=0;s<r.length;s++)this.K_matrix[r[i]][r[s]]=n*e[r[i]][r[s]]**-2}}_createE_matrix(){const e=this.body.nodeIndices,r=this.body.nodes;this.E_matrix={},this.E_sums={};for(let n=0;n<e.length;n++)this.E_matrix[e[n]]=[];for(let n=0;n<e.length;n++){const i=e[n],s=r[i].x,o=r[i].y;let a=0,l=0;for(let c=n;c<e.length;c++){const d=e[c];if(d!==i){const h=r[d].x,f=r[d].y,p=1/Math.sqrt((s-h)**2+(o-f)**2);this.E_matrix[i][c]=[this.K_matrix[i][d]*(s-h-this.L_matrix[i][d]*(s-h)*p),this.K_matrix[i][d]*(o-f-this.L_matrix[i][d]*(o-f)*p)],this.E_matrix[d][n]=this.E_matrix[i][c],a+=this.E_matrix[i][c][0],l+=this.E_matrix[i][c][1]}}this.E_sums[i]=[a,l]}}_updateE_matrix(e){const r=this.body.nodeIndices,n=this.body.nodes,i=this.E_matrix[e],s=this.K_matrix[e],o=this.L_matrix[e],a=n[e].x,l=n[e].y;let c=0,d=0;for(let h=0;h<r.length;h++){const f=r[h];if(f!==e){const p=i[h],m=p[0],g=p[1],b=n[f].x,y=n[f].y,v=1/Math.sqrt((a-b)**2+(l-y)**2),w=s[f]*(a-b-o[f]*(a-b)*v),x=s[f]*(l-y-o[f]*(l-y)*v);i[h]=[w,x],c+=w,d+=x;const S=this.E_sums[f];S[0]+=w-m,S[1]+=x-g}}this.E_sums[e]=[c,d]}}function _e(t,e,r){var n,i,s,o;if(!(this instanceof _e))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:qRe,clickToUse:!1},Sr(this.options,this.defaultOptions),this.body={container:t,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:ne(n=this.on).call(n,this),off:ne(i=this.off).call(i,this),emit:ne(s=this.emit).call(s,this),once:ne(o=this.once).call(o,this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}},selectionBox:{show:!1,position:{start:{x:0,y:0},end:{x:0,y:0}}}},this.bindEventListeners(),this.images=new zRe(()=>this.body.emitter.emit("_requestRedraw")),this.groups=new nMe,this.canvas=new XDe(this.body),this.selectionHandler=new IAe(this.body,this.canvas),this.interactionHandler=new tAe(this.body,this.canvas,this.selectionHandler),this.view=new ZDe(this.body,this.canvas),this.renderer=new WDe(this.body,this.canvas),this.physics=new FDe(this.body),this.layoutEngine=new cFe(this.body),this.clustering=new HDe(this.body),this.manipulation=new uFe(this.body,this.canvas,this.selectionHandler,this.interactionHandler),this.nodesHandler=new hDe(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new IDe(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new mFe(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(r),this.setData(e)}doe(_e.prototype);_e.prototype.setOptions=function(t){if(t===null&&(t=void 0),t!==void 0){if(gRe.validate(t,hFe)===!0&&console.error("%cErrors have been found in the supplied options object.",oae),jh(["locale","locales","clickToUse"],this.options,t),t.locale!==void 0&&(t.locale=LRe(t.locales||this.options.locales,t.locale)),t=this.layoutEngine.setOptions(t.layout,t),this.canvas.setOptions(t),this.groups.setOptions(t.groups),this.nodesHandler.setOptions(t.nodes),this.edgesHandler.setOptions(t.edges),this.physics.setOptions(t.physics),this.manipulation.setOptions(t.manipulation,t,this.options),this.interactionHandler.setOptions(t.interaction),this.renderer.setOptions(t.interaction),this.selectionHandler.setOptions(t.interaction),t.groups!==void 0&&this.body.emitter.emit("refreshNodes"),"configure"in t&&(this.configurator||(this.configurator=new pRe(this,this.body.container,$ae,this.canvas.pixelRatio,fFe)),this.configurator.setOptions(t.configure)),this.configurator&&this.configurator.options.enabled===!0){const n={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};$t(n.nodes,this.nodesHandler.options),$t(n.edges,this.edgesHandler.options),$t(n.layout,this.layoutEngine.options),$t(n.interaction,this.selectionHandler.options),$t(n.interaction,this.renderer.options),$t(n.interaction,this.interactionHandler.options),$t(n.manipulation,this.manipulation.options),$t(n.physics,this.physics.options),$t(n.global,this.canvas.options),$t(n.global,this.options),this.configurator.setModuleOptions(n)}t.clickToUse!==void 0?t.clickToUse===!0?this.activator===void 0&&(this.activator=new fRe(this.canvas.frame),this.activator.on("change",()=>{this.body.emitter.emit("activate")})):(this.activator!==void 0&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}};_e.prototype._updateVisibleIndices=function(){const t=this.body.nodes,e=this.body.edges;this.body.nodeIndices=[],this.body.edgeIndices=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&!this.clustering._isClusteredNode(r)&&t[r].options.hidden===!1&&this.body.nodeIndices.push(t[r].id);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const n=e[r],i=t[n.fromId],s=t[n.toId],o=i!==void 0&&s!==void 0;!this.clustering._isClusteredEdge(r)&&n.options.hidden===!1&&o&&i.options.hidden===!1&&s.options.hidden===!1&&this.body.edgeIndices.push(n.id)}};_e.prototype.bindEventListeners=function(){this.body.emitter.on("_dataChanged",()=>{this.edgesHandler._updateState(),this.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",()=>{this.clustering._updateState(),this._updateVisibleIndices(),this._updateValueRange(this.body.nodes),this._updateValueRange(this.body.edges),this.body.emitter.emit("startSimulation"),this.body.emitter.emit("_requestRedraw")})};_e.prototype.setData=function(t){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),t&&t.dot&&(t.nodes||t.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(t&&t.options),t&&t.dot){console.warn("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");const e=CRe(t.dot);this.setData(e);return}else if(t&&t.gephi){console.warn("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");const e=kRe(t.gephi);this.setData(e);return}else this.nodesHandler.setData(t&&t.nodes,!0),this.edgesHandler.setData(t&&t.edges,!0);this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")};_e.prototype.destroy=function(){this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images;for(const t in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,t)&&delete this.body.nodes[t];for(const t in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,t)&&delete this.body.edges[t];aa(this.body.container)};_e.prototype._updateValueRange=function(t){let e,r,n,i=0;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const s=t[e].getValue();s!==void 0&&(r=r===void 0?s:Math.min(s,r),n=n===void 0?s:Math.max(s,n),i+=s)}if(r!==void 0&&n!==void 0)for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&t[e].setValueRange(r,n,i)};_e.prototype.isActive=function(){return!this.activator||this.activator.active};_e.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)};_e.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)};_e.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)};_e.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)};_e.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)};_e.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)};_e.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)};_e.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)};_e.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)};_e.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)};_e.prototype.updateClusteredNode=function(){return this.clustering.updateClusteredNode.apply(this.clustering,arguments)};_e.prototype.getClusteredEdges=function(){return this.clustering.getClusteredEdges.apply(this.clustering,arguments)};_e.prototype.getBaseEdge=function(){return this.clustering.getBaseEdge.apply(this.clustering,arguments)};_e.prototype.getBaseEdges=function(){return this.clustering.getBaseEdges.apply(this.clustering,arguments)};_e.prototype.updateEdge=function(){return this.clustering.updateEdge.apply(this.clustering,arguments)};_e.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)};_e.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)};_e.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)};_e.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)};_e.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)};_e.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)};_e.prototype.editNodeMode=function(){return console.warn("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)};_e.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)};_e.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)};_e.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)};_e.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)};_e.prototype.getPosition=function(){return this.nodesHandler.getPosition.apply(this.nodesHandler,arguments)};_e.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)};_e.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)};_e.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)};_e.prototype.getConnectedNodes=function(t){return this.body.nodes[t]!==void 0?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)};_e.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)};_e.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)};_e.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)};_e.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)};_e.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)};_e.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)};_e.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodeIds.apply(this.selectionHandler,arguments)};_e.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdgeIds.apply(this.selectionHandler,arguments)};_e.prototype.getNodeAt=function(){const t=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return t!==void 0&&t.id!==void 0?t.id:t};_e.prototype.getEdgeAt=function(){const t=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return t!==void 0&&t.id!==void 0?t.id:t};_e.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)};_e.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)};_e.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.selectionHandler.commitWithoutEmitting.apply(this.selectionHandler),this.redraw()};_e.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)};_e.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)};_e.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)};_e.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)};_e.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)};_e.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)};_e.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)};_e.prototype.getOptionsFromConfigurator=function(){let t={};return this.configurator&&(t=this.configurator.getOptions.apply(this.configurator)),t};function gFe({graphData:t,startPersonId:e,onNodeClick:r}){const n=T.useRef(null),i=T.useRef(null),s=yn(),o=T.useCallback(d=>{r?r(d):s(`/people/${d}`)},[r,s]);T.useEffect(()=>{if(!n.current||!t||!t.nodes||t.nodes.length===0)return;const d=new Vd(t.nodes),h=new Vd(t.edges),f={layout:{hierarchical:{enabled:!0,direction:"UD",sortMethod:"directed",levelSeparation:180,nodeSpacing:200,treeSpacing:250,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0}},nodes:{shape:"box",margin:10,font:{size:14,face:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',color:"#1f2937"},color:{border:"#d1d5db",background:"#ffffff",highlight:{border:"#f59e0b",background:"#fef3c7"},hover:{border:"#9ca3af",background:"#f9fafb"}},borderWidth:2,borderWidthSelected:3,shadow:{enabled:!0,color:"rgba(0,0,0,0.1)",size:5,x:0,y:2}},edges:{color:{color:"#9ca3af",highlight:"#6b7280",hover:"#6b7280"},width:2,smooth:{enabled:!0,type:"cubicBezier",forceDirection:"vertical",roundness:.4},arrows:{to:{enabled:!1}}},physics:{enabled:!1},interaction:{hover:!0,tooltipDelay:200,zoomView:!0,dragView:!0,dragNodes:!1,navigationButtons:!1,keyboard:{enabled:!0,bindToWindow:!1}}},p=new _e(n.current,{nodes:d,edges:h},f);return i.current=p,p.on("click",m=>{if(m.nodes.length>0){const g=m.nodes[0];o(g)}}),p.on("doubleClick",m=>{m.nodes.length>0&&p.focus(m.nodes[0],{scale:1,animation:{duration:500,easingFunction:"easeInOutQuad"}})}),p.once("stabilized",()=>{const m=t.edges.filter(g=>g.dashes).map(g=>[g.from,g.to]);if(m.length>0){const g=p.getPositions(),b={},y=new Set;m.forEach(([v,w])=>{if(y.has(v)||y.has(w))return;const x=g[v],S=g[w];if(!x||!S)return;const _=(x.x+S.x)/2;b[v]={x:_-60,y:x.y},b[w]={x:_+60,y:S.y},y.add(v),y.add(w)}),Object.entries(b).forEach(([v,w])=>{p.moveNode(v,w.x,w.y)})}setTimeout(()=>{p.fit({animation:{duration:500,easingFunction:"easeInOutQuad"}})},50)}),setTimeout(()=>{e&&p&&p.focus(e,{scale:.8,animation:{duration:500,easingFunction:"easeInOutQuad"}})},100),()=>{p&&p.destroy()}},[t,e,o]);const a=()=>{if(i.current){const d=i.current.getScale();i.current.moveTo({scale:d*1.3,animation:{duration:300,easingFunction:"easeInOutQuad"}})}},l=()=>{if(i.current){const d=i.current.getScale();i.current.moveTo({scale:d/1.3,animation:{duration:300,easingFunction:"easeInOutQuad"}})}},c=()=>{i.current&&i.current.fit({animation:{duration:500,easingFunction:"easeInOutQuad"}})};return!t||!t.nodes||t.nodes.length===0?u.jsx("div",{className:"flex items-center justify-center h-96",children:u.jsx("p",{className:"text-gray-500",children:"No family tree data available"})}):u.jsxs("div",{className:"relative w-full h-full",children:[u.jsxs("div",{className:"absolute top-4 right-4 z-10 flex gap-2 bg-white rounded-lg shadow-lg p-2",children:[u.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded",title:"Zoom In",children:u.jsx(Gfe,{className:"w-4 h-4"})}),u.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 rounded",title:"Zoom Out",children:u.jsx(Yfe,{className:"w-4 h-4"})}),u.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 rounded",title:"Fit All",children:u.jsx(gte,{className:"w-4 h-4"})})]}),u.jsx("div",{className:"absolute bottom-4 left-4 z-10 text-xs text-gray-500 bg-white/80 px-2 py-1 rounded",children:"Click a person to view details  Double-click to center  Scroll to zoom"}),u.jsx("div",{ref:n,className:"w-full h-full min-h-[600px]",style:{background:"#fafafa"}})]})}const yFe=["parent","child","spouse","lover","partner"];function vFe(t){return yFe.includes(t==null?void 0:t.toLowerCase())}function bFe(t){return(t==null?void 0:t.toLowerCase())==="parent"}function xFe(t){return(t==null?void 0:t.toLowerCase())==="child"}function wFe(t){const e=t==null?void 0:t.toLowerCase();return e==="spouse"||e==="lover"||e==="partner"}function SFe(t,e,r){var d;const n=new Map,i=[],s=new Set,o=new Map;e.forEach(h=>o.set(h.id,h));const a=[{personId:t,depth:0}];s.add(t);function l(h,f){var v,w,x,S;let p=h.name||((v=h.title)==null?void 0:v.rendered)||h.title||`Person ${f}`;if(p&&typeof p=="string"&&typeof document<"u"){const _=document.createElement("textarea");_.innerHTML=p,p=_.value}let m=null,g=((w=h.acf)==null?void 0:w.birth_date)||null;if(g){const _=new Date(g);isNaN(_.getTime())||(m=Math.floor((new Date-_)/(365.25*24*60*60*1e3)))}let b="";switch((x=h.acf)==null?void 0:x.gender){case"male":b="";break;case"female":b="";break;case"non_binary":case"other":case"prefer_not_to_say":b="";break}let y="";if(g)try{const _=new Date(g);if(!isNaN(_.getTime())){const N=String(_.getDate()).padStart(2,"0"),E=String(_.getMonth()+1).padStart(2,"0"),k=_.getFullYear();y=`${N}-${E}-${k}`}}catch{}return{id:f,name:p,gender:((S=h.acf)==null?void 0:S.gender)||"",genderSymbol:b,photo:h.thumbnail||null,age:m,birthDate:g,formattedBirthDate:y}}const c=o.get(t);for(c&&n.set(t,l(c,t));a.length>0;){const{personId:h,depth:f}=a.shift(),p=r.get(h)||[];for(const m of p){if(m.relationship_type_slug&&!vFe(m.relationship_type_slug))continue;const g=m.related_person;if(!g||!o.has(g))continue;if(!n.has(g)){const w=o.get(g);n.set(g,l(w,g))}const b=`${h}-${g}`,y=`${g}-${h}`;if(!i.some(w=>`${w.from}-${w.to}`===b||`${w.from}-${w.to}`===y)){const w=(d=m.relationship_type_slug)==null?void 0:d.toLowerCase();if(bFe(w))i.push({from:g,to:h,type:"parent-child"});else if(xFe(w))i.push({from:h,to:g,type:"parent-child"});else if(wFe(w)){const[x,S]=h<g?[h,g]:[g,h];i.push({from:x,to:S,type:"spouse"})}}s.has(g)||(s.add(g),a.push({personId:g,depth:f+1}))}}return{nodes:Array.from(n.values()),edges:i}}function _Fe(t,e,r={}){const{nodes:n,edges:i}=t;if(n.length===0)return{nodes:[],edges:[]};const s=new Map,o=new Map,a=new Map;n.forEach(b=>{s.set(b.id,[]),o.set(b.id,[]),a.set(b.id,[])}),i.forEach(b=>{var y,v,w,x;b.type==="parent-child"?((y=s.get(b.to))==null||y.push(b.from),(v=o.get(b.from))==null||v.push(b.to)):b.type==="spouse"&&((w=a.get(b.from))==null||w.push(b.to),(x=a.get(b.to))==null||x.push(b.from))});const l=new Map,c=new Set,d=[{id:e,generation:0}];for(l.set(e,0),c.add(e);d.length>0;){const{id:b,generation:y}=d.shift(),v=s.get(b)||[];for(const S of v)c.has(S)||(c.add(S),l.set(S,y-1),d.push({id:S,generation:y-1}));const w=o.get(b)||[];for(const S of w)c.has(S)||(c.add(S),l.set(S,y+1),d.push({id:S,generation:y+1}));const x=a.get(b)||[];for(const S of x)c.has(S)||(c.add(S),l.set(S,y),d.push({id:S,generation:y}))}n.forEach(b=>{l.has(b.id)||l.set(b.id,0)});const h=Math.min(...l.values()),f=new Map;l.forEach((b,y)=>{f.set(y,b-h)});function p(b,y,v=!1){const w=b?b.split(" ").map(N=>N[0]).join("").toUpperCase().slice(0,2):"?";let x,S;v?(x="%23d1d5db",S="%236b7280"):y?(x="%23fef3c7",S="%23b45309"):(x="%23e5e7eb",S="%23374151");const _=`<svg xmlns="http://www.w3.org/2000/svg" width="90" height="90" viewBox="0 0 90 90">
      <circle cx="45" cy="45" r="45" fill="${x}"/>
      <text x="45" y="55" text-anchor="middle" font-family="system-ui, sans-serif" font-size="28" font-weight="500" fill="${S}">${w}</text>
    </svg>`;return"data:image/svg+xml,"+encodeURIComponent(_)}const m=n.map(b=>{const y=f.get(b.id)||0,v=b.id===e,w=r[b.id]||!1;let x=b.name;w&&(x=b.name+" ");let S=[x],_="";b.genderSymbol&&(_+=b.genderSymbol+" "),b.age!==null&&(_+=b.age+" "),b.formattedBirthDate&&(_+=b.formattedBirthDate),_.trim()&&S.push(_.trim());const N=b.photo||p(b.name,v,w);let E="#d1d5db";return v?E="#f59e0b":w&&(E="#9ca3af"),{id:b.id,label:S.join(`
`),level:y,shape:"circularImage",image:N,size:45,font:{size:14,face:"system-ui, -apple-system, sans-serif",vadjust:8,color:w?"#6b7280":"#1f2937"},color:{border:E,background:"#ffffff",highlight:{border:"#f59e0b",background:"#fef3c7"}},borderWidth:v?3:2,data:{...b,isDeceased:w}}}),g=i.map((b,y)=>{const v=b.type==="spouse";return{id:`edge-${y}`,from:b.from,to:b.to,arrows:{to:{enabled:!1}},color:{color:v?"#ec4899":"#9ca3af",highlight:v?"#db2777":"#6b7280"},width:2,dashes:v?[5,5]:!1,smooth:!1,length:v?50:300}});return{nodes:m,edges:g}}function EFe(t){const e=new Map;return t.forEach(r=>{var s;const i=(((s=r.acf)==null?void 0:s.relationships)||[]).map(o=>{var c,d,h,f,p,m;let a="";o.relationship_slug?a=o.relationship_slug.toLowerCase():typeof o.relationship_type=="object"?a=((c=o.relationship_type)==null?void 0:c.slug)||((h=(d=o.relationship_type)==null?void 0:d.name)==null?void 0:h.toLowerCase())||"":typeof o.relationship_type=="string"&&(a=o.relationship_type.toLowerCase());let l=null;return typeof o.related_person=="object"?l=((f=o.related_person)==null?void 0:f.ID)||((p=o.related_person)==null?void 0:p.id)||((m=o.related_person)==null?void 0:m.term_id):(typeof o.related_person=="number"||typeof o.related_person=="string")&&(l=parseInt(o.related_person,10)),{related_person:l,relationship_type:o.relationship_type,relationship_type_slug:a,relationship_name:o.relationship_name||"",relationship_label:o.relationship_label||""}}).filter(o=>o.related_person);e.set(r.id,i)}),e}function NFe(t,e){const r=new Map;e.forEach(n=>{var i;r.set(n.id,n.slug||((i=n.name)==null?void 0:i.toLowerCase()))}),t.forEach(n=>{n.forEach(i=>{if(!i.relationship_type_slug&&i.relationship_type){const s=typeof i.relationship_type=="object"?i.relationship_type.term_id||i.relationship_type.id:i.relationship_type;i.relationship_type_slug=r.get(s)||""}})})}function CFe(){var p,m;const{id:t}=zs(),e=yn(),r=parseInt(t,10),{data:n,isLoading:i}=zc(t),{data:s=[],isLoading:o}=Bc(),{data:a=[]}=dt({queryKey:["relationship-types"],queryFn:async()=>(await We.getRelationshipTypes()).data}),l=T.useMemo(()=>s.map(g=>g.id).filter(Boolean),[s]),c=MP({queries:l.map(g=>({queryKey:["person-dates",g],queryFn:async()=>(await Le.getPersonDates(g)).data,enabled:!!g,staleTime:5*60*1e3}))}),d=T.useMemo(()=>{const g={};return c.forEach((b,y)=>{if(b.data&&l[y]){const v=l[y],w=b.data.some(x=>{const S=Array.isArray(x.date_type)?x.date_type[0]:x.date_type;return(S==null?void 0:S.toLowerCase())==="died"});g[v]=w}}),g},[c,l]);yi(n?`Family Tree - ${n.name||((p=n.title)==null?void 0:p.rendered)||n.title||"Person"}`:"Family Tree");const h=T.useMemo(()=>{if(!n||!s.length)return null;try{const g=EFe(s);a.length>0&&NFe(g,a);const b=SFe(r,s,g);return!b||b.nodes.length===0?null:_Fe(b,r,d)}catch(g){return console.error("Error building family tree:",g),null}},[n,s,a,r,d]),f=g=>{e(`/people/${g}`)};return i||o?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):n?u.jsxs("div",{className:"max-w-full mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs(ce,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(zi,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to Person"})]}),u.jsxs("h1",{className:"text-2xl font-bold",children:["Family Tree: ",n.name||((m=n.title)==null?void 0:m.rendered)||n.title||`Person ${t}`]})]})}),u.jsx("div",{className:"card p-6",children:u.jsx("div",{className:"w-full",style:{height:"800px"},children:h&&h.nodes&&h.nodes.length>0?u.jsx(gFe,{graphData:h,startPersonId:r,onNodeClick:f}):u.jsx("div",{className:"flex items-center justify-center h-full",children:u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-gray-500 mb-2",children:"No family relationships found."}),u.jsx("p",{className:"text-sm text-gray-400",children:"Add parent or child relationships to see the family tree."})]})})})})]}):u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600 mb-4",children:"Failed to load person."}),u.jsx(ce,{to:"/people",className:"btn-secondary",children:"Back to People"})]})}function kFe(){const{loginUrl:t,isLoggedIn:e}=WR();return _te(),T.useEffect(()=>{e||(window.location.href=t)},[e,t]),u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Redirecting to login..."})]})})}function TFe({children:t}){const{data:e,isLoading:r,error:n}=dt({queryKey:["current-user"],queryFn:async()=>(await Le.getCurrentUser()).data,retry:!1});return r?u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):n||!e?u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:u.jsx("div",{className:"max-w-md w-full mx-4",children:u.jsxs("div",{className:"card p-8 text-center",children:[u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:u.jsx(Ro,{className:"w-8 h-8 text-yellow-600"})})}),u.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Account Pending Approval"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Your account is pending approval by an administrator. You will receive an email notification once your account has been approved."}),u.jsx("p",{className:"text-sm text-gray-500",children:"If you have any questions, please contact your administrator."})]})})}):e!=null&&e.is_admin||e.is_approved?t:u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:u.jsx("div",{className:"max-w-md w-full mx-4",children:u.jsxs("div",{className:"card p-8 text-center",children:[u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:u.jsx(Ro,{className:"w-8 h-8 text-yellow-600"})})}),u.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Account Pending Approval"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Your account is pending approval by an administrator. You will receive an email notification once your account has been approved."}),u.jsx("p",{className:"text-sm text-gray-500",children:"If you have any questions, please contact your administrator."})]})})})}function OFe({children:t}){const{isLoggedIn:e,isLoading:r}=WR();return r?u.jsx("div",{className:"flex items-center justify-center min-h-screen",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e?u.jsx(TFe,{children:t}):u.jsx(See,{to:"/login",replace:!0})}function jFe(){return u.jsxs(FA,{children:[u.jsx(St,{path:"/login",element:u.jsx(kFe,{})}),u.jsx(St,{path:"/*",element:u.jsx(OFe,{children:u.jsx(ype,{children:u.jsxs(FA,{children:[u.jsx(St,{path:"/",element:u.jsx(fSe,{})}),u.jsx(St,{path:"/people",element:u.jsx(mSe,{})}),u.jsx(St,{path:"/people/new",element:u.jsx(dq,{})}),u.jsx(St,{path:"/people/:personId/contact/new",element:u.jsx(fq,{})}),u.jsx(St,{path:"/people/:personId/contact/:index/edit",element:u.jsx(fq,{})}),u.jsx(St,{path:"/people/:personId/address/new",element:u.jsx(mq,{})}),u.jsx(St,{path:"/people/:personId/address/:index/edit",element:u.jsx(mq,{})}),u.jsx(St,{path:"/people/:personId/work-history/new",element:u.jsx(hq,{})}),u.jsx(St,{path:"/people/:personId/work-history/:index/edit",element:u.jsx(hq,{})}),u.jsx(St,{path:"/people/:personId/relationship/new",element:u.jsx(pq,{})}),u.jsx(St,{path:"/people/:personId/relationship/:index/edit",element:u.jsx(pq,{})}),u.jsx(St,{path:"/people/:id/family-tree",element:u.jsx(CFe,{})}),u.jsx(St,{path:"/people/:id/edit",element:u.jsx(dq,{})}),u.jsx(St,{path:"/people/:id",element:u.jsx(MSe,{})}),u.jsx(St,{path:"/companies",element:u.jsx(s_e,{})}),u.jsx(St,{path:"/companies/new",element:u.jsx(gq,{})}),u.jsx(St,{path:"/companies/:id",element:u.jsx(o_e,{})}),u.jsx(St,{path:"/companies/:id/edit",element:u.jsx(gq,{})}),u.jsx(St,{path:"/dates",element:u.jsx(c_e,{})}),u.jsx(St,{path:"/dates/new",element:u.jsx(yq,{})}),u.jsx(St,{path:"/dates/:id/edit",element:u.jsx(yq,{})}),u.jsx(St,{path:"/todos",element:u.jsx(d_e,{})}),u.jsx(St,{path:"/settings",element:u.jsx(y_e,{})}),u.jsx(St,{path:"/settings/relationship-types",element:u.jsx(__e,{})}),u.jsx(St,{path:"/settings/user-approval",element:u.jsx(E_e,{})}),u.jsx(St,{path:"*",element:u.jsx(See,{to:"/",replace:!0})})]})})})})]})}const PFe=new Lde({defaultOptions:{queries:{staleTime:5*60*1e3,retry:1}}}),mj=document.getElementById("root");if(!mj)console.error('Root element not found! Make sure there is a <div id="root"></div> in your HTML.');else try{gj.createRoot(mj).render(u.jsx(Ae.StrictMode,{children:u.jsx(Bde,{client:PFe,children:u.jsx(cde,{children:u.jsx(jFe,{})})})}))}catch(t){console.error("Error mounting React app:",t),mj.innerHTML='<div style="padding: 20px; color: red;"><h1>Error Loading Application</h1><p>Please check the browser console for details.</p></div>'}
