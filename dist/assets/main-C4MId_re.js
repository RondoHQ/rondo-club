var u$=t=>{throw TypeError(t)};var Yb=(t,e,r)=>e.has(t)||u$("Cannot "+r);var R=(t,e,r)=>(Yb(t,e,"read from private field"),r?r.call(t):e.get(t)),xe=(t,e,r)=>e.has(t)?u$("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),le=(t,e,r,n)=>(Yb(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),$e=(t,e,r)=>(Yb(t,e,"access private method"),r);var og=(t,e,r,n)=>({set _(i){le(t,e,i,r)},get _(){return R(t,e,n)}});function rce(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}function PJ(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var IJ={exports:{}},u0={},RJ={exports:{}},nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zp=Symbol.for("react.element"),nce=Symbol.for("react.portal"),ice=Symbol.for("react.fragment"),sce=Symbol.for("react.strict_mode"),oce=Symbol.for("react.profiler"),ace=Symbol.for("react.provider"),lce=Symbol.for("react.context"),cce=Symbol.for("react.forward_ref"),uce=Symbol.for("react.suspense"),dce=Symbol.for("react.memo"),hce=Symbol.for("react.lazy"),d$=Symbol.iterator;function fce(t){return t===null||typeof t!="object"?null:(t=d$&&t[d$]||t["@@iterator"],typeof t=="function"?t:null)}var MJ={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},AJ=Object.assign,DJ={};function oh(t,e,r){this.props=t,this.context=e,this.refs=DJ,this.updater=r||MJ}oh.prototype.isReactComponent={};oh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};oh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function $J(){}$J.prototype=oh.prototype;function mR(t,e,r){this.props=t,this.context=e,this.refs=DJ,this.updater=r||MJ}var gR=mR.prototype=new $J;gR.constructor=mR;AJ(gR,oh.prototype);gR.isPureReactComponent=!0;var h$=Array.isArray,FJ=Object.prototype.hasOwnProperty,yR={current:null},qJ={key:!0,ref:!0,__self:!0,__source:!0};function LJ(t,e,r){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)FJ.call(e,n)&&!qJ.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:Zp,type:t,key:s,ref:o,props:i,_owner:yR.current}}function pce(t,e){return{$$typeof:Zp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function vR(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zp}function mce(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var f$=/\/+/g;function Qb(t,e){return typeof t=="object"&&t!==null&&t.key!=null?mce(""+t.key):e.toString(36)}function Yg(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Zp:case nce:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+Qb(o,0):n,h$(i)?(r="",t!=null&&(r=t.replace(f$,"$&/")+"/"),Yg(i,e,r,"",function(u){return u})):i!=null&&(vR(i)&&(i=pce(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(f$,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",h$(t))for(var a=0;a<t.length;a++){s=t[a];var l=n+Qb(s,a);o+=Yg(s,e,r,l,i)}else if(l=fce(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=n+Qb(s,a++),o+=Yg(s,e,r,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ag(t,e,r){if(t==null)return t;var n=[],i=0;return Yg(t,n,"","",function(s){return e.call(r,s,i++)}),n}function gce(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Dn={current:null},Qg={transition:null},yce={ReactCurrentDispatcher:Dn,ReactCurrentBatchConfig:Qg,ReactCurrentOwner:yR};function BJ(){throw Error("act(...) is not supported in production builds of React.")}nt.Children={map:ag,forEach:function(t,e,r){ag(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return ag(t,function(){e++}),e},toArray:function(t){return ag(t,function(e){return e})||[]},only:function(t){if(!vR(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};nt.Component=oh;nt.Fragment=ice;nt.Profiler=oce;nt.PureComponent=mR;nt.StrictMode=sce;nt.Suspense=uce;nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yce;nt.act=BJ;nt.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=AJ({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=yR.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)FJ.call(e,l)&&!qJ.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:Zp,type:t.type,key:i,ref:s,props:n,_owner:o}};nt.createContext=function(t){return t={$$typeof:lce,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ace,_context:t},t.Consumer=t};nt.createElement=LJ;nt.createFactory=function(t){var e=LJ.bind(null,t);return e.type=t,e};nt.createRef=function(){return{current:null}};nt.forwardRef=function(t){return{$$typeof:cce,render:t}};nt.isValidElement=vR;nt.lazy=function(t){return{$$typeof:hce,_payload:{_status:-1,_result:t},_init:gce}};nt.memo=function(t,e){return{$$typeof:dce,type:t,compare:e===void 0?null:e}};nt.startTransition=function(t){var e=Qg.transition;Qg.transition={};try{t()}finally{Qg.transition=e}};nt.unstable_act=BJ;nt.useCallback=function(t,e){return Dn.current.useCallback(t,e)};nt.useContext=function(t){return Dn.current.useContext(t)};nt.useDebugValue=function(){};nt.useDeferredValue=function(t){return Dn.current.useDeferredValue(t)};nt.useEffect=function(t,e){return Dn.current.useEffect(t,e)};nt.useId=function(){return Dn.current.useId()};nt.useImperativeHandle=function(t,e,r){return Dn.current.useImperativeHandle(t,e,r)};nt.useInsertionEffect=function(t,e){return Dn.current.useInsertionEffect(t,e)};nt.useLayoutEffect=function(t,e){return Dn.current.useLayoutEffect(t,e)};nt.useMemo=function(t,e){return Dn.current.useMemo(t,e)};nt.useReducer=function(t,e,r){return Dn.current.useReducer(t,e,r)};nt.useRef=function(t){return Dn.current.useRef(t)};nt.useState=function(t){return Dn.current.useState(t)};nt.useSyncExternalStore=function(t,e,r){return Dn.current.useSyncExternalStore(t,e,r)};nt.useTransition=function(){return Dn.current.useTransition()};nt.version="18.3.1";RJ.exports=nt;var k=RJ.exports;const Se=PJ(k),vce=rce({__proto__:null,default:Se},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bce=k,xce=Symbol.for("react.element"),wce=Symbol.for("react.fragment"),Sce=Object.prototype.hasOwnProperty,_ce=bce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ece={key:!0,ref:!0,__self:!0,__source:!0};function zJ(t,e,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Sce.call(e,n)&&!Ece.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:xce,type:t,key:s,ref:o,props:i,_owner:_ce.current}}u0.Fragment=wce;u0.jsx=zJ;u0.jsxs=zJ;IJ.exports=u0;var c=IJ.exports,zO={},VJ={exports:{}},bi={},WJ={exports:{}},UJ={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,W){var Y=M.length;M.push(W);e:for(;0<Y;){var Q=Y-1>>>1,pe=M[Q];if(0<i(pe,W))M[Q]=W,M[Y]=pe,Y=Q;else break e}}function r(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var W=M[0],Y=M.pop();if(Y!==W){M[0]=Y;e:for(var Q=0,pe=M.length,K=pe>>>1;Q<K;){var oe=2*(Q+1)-1,Te=M[oe],me=oe+1,Be=M[me];if(0>i(Te,Y))me<pe&&0>i(Be,Te)?(M[Q]=Be,M[me]=Y,Q=me):(M[Q]=Te,M[oe]=Y,Q=oe);else if(me<pe&&0>i(Be,Y))M[Q]=Be,M[me]=Y,Q=me;else break e}}return W}function i(M,W){var Y=M.sortIndex-W.sortIndex;return Y!==0?Y:M.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(M){for(var W=r(u);W!==null;){if(W.callback===null)n(u);else if(W.startTime<=M)n(u),W.sortIndex=W.expirationTime,e(l,W);else break;W=r(u)}}function x(M){if(g=!1,w(M),!m)if(r(l)!==null)m=!0,$(S);else{var W=r(u);W!==null&&L(x,W.startTime-M)}}function S(M,W){m=!1,g&&(g=!1,y(N),N=-1),p=!0;var Y=f;try{for(w(W),h=r(l);h!==null&&(!(h.expirationTime>W)||M&&!P());){var Q=h.callback;if(typeof Q=="function"){h.callback=null,f=h.priorityLevel;var pe=Q(h.expirationTime<=W);W=t.unstable_now(),typeof pe=="function"?h.callback=pe:h===r(l)&&n(l),w(W)}else n(l);h=r(l)}if(h!==null)var K=!0;else{var oe=r(u);oe!==null&&L(x,oe.startTime-W),K=!1}return K}finally{h=null,f=Y,p=!1}}var _=!1,E=null,N=-1,T=5,j=-1;function P(){return!(t.unstable_now()-j<T)}function O(){if(E!==null){var M=t.unstable_now();j=M;var W=!0;try{W=E(!0,M)}finally{W?C():(_=!1,E=null)}}else _=!1}var C;if(typeof b=="function")C=function(){b(O)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,F=D.port2;D.port1.onmessage=O,C=function(){F.postMessage(null)}}else C=function(){v(O,0)};function $(M){E=M,_||(_=!0,C())}function L(M,W){N=v(function(){M(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,$(S))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(M){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var Y=f;f=W;try{return M()}finally{f=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,W){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var Y=f;f=M;try{return W()}finally{f=Y}},t.unstable_scheduleCallback=function(M,W,Y){var Q=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?Q+Y:Q):Y=Q,M){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=Y+pe,M={id:d++,callback:W,priorityLevel:M,startTime:Y,expirationTime:pe,sortIndex:-1},Y>Q?(M.sortIndex=Y,e(u,M),r(l)===null&&M===r(u)&&(g?(y(N),N=-1):g=!0,L(x,Y-Q))):(M.sortIndex=pe,e(l,M),m||p||(m=!0,$(S))),M},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(M){var W=f;return function(){var Y=f;f=W;try{return M.apply(this,arguments)}finally{f=Y}}}})(UJ);WJ.exports=UJ;var Nce=WJ.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kce=k,vi=Nce;function re(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var HJ=new Set,Jf={};function Uc(t,e){Id(t,e),Id(t+"Capture",e)}function Id(t,e){for(Jf[t]=e,t=0;t<e.length;t++)HJ.add(e[t])}var Po=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),VO=Object.prototype.hasOwnProperty,Cce=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p$={},m$={};function Tce(t){return VO.call(m$,t)?!0:VO.call(p$,t)?!1:Cce.test(t)?m$[t]=!0:(p$[t]=!0,!1)}function jce(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Oce(t,e,r,n){if(e===null||typeof e>"u"||jce(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $n(t,e,r,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var nn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nn[t]=new $n(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nn[e]=new $n(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nn[t]=new $n(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nn[t]=new $n(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nn[t]=new $n(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nn[t]=new $n(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nn[t]=new $n(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nn[t]=new $n(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nn[t]=new $n(t,5,!1,t.toLowerCase(),null,!1,!1)});var bR=/[\-:]([a-z])/g;function xR(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(bR,xR);nn[e]=new $n(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(bR,xR);nn[e]=new $n(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(bR,xR);nn[e]=new $n(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nn[t]=new $n(t,1,!1,t.toLowerCase(),null,!1,!1)});nn.xlinkHref=new $n("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nn[t]=new $n(t,1,!1,t.toLowerCase(),null,!0,!0)});function wR(t,e,r,n){var i=nn.hasOwnProperty(e)?nn[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Oce(e,r,i,n)&&(r=null),n||i===null?Tce(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Fo=kce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lg=Symbol.for("react.element"),Du=Symbol.for("react.portal"),$u=Symbol.for("react.fragment"),SR=Symbol.for("react.strict_mode"),WO=Symbol.for("react.profiler"),KJ=Symbol.for("react.provider"),GJ=Symbol.for("react.context"),_R=Symbol.for("react.forward_ref"),UO=Symbol.for("react.suspense"),HO=Symbol.for("react.suspense_list"),ER=Symbol.for("react.memo"),ia=Symbol.for("react.lazy"),YJ=Symbol.for("react.offscreen"),g$=Symbol.iterator;function Gh(t){return t===null||typeof t!="object"?null:(t=g$&&t[g$]||t["@@iterator"],typeof t=="function"?t:null)}var Gt=Object.assign,Xb;function mf(t){if(Xb===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Xb=e&&e[1]||""}return`
`+Xb+t}var Jb=!1;function Zb(t,e){if(!t||Jb)return"";Jb=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Jb=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?mf(t):""}function Pce(t){switch(t.tag){case 5:return mf(t.type);case 16:return mf("Lazy");case 13:return mf("Suspense");case 19:return mf("SuspenseList");case 0:case 2:case 15:return t=Zb(t.type,!1),t;case 11:return t=Zb(t.type.render,!1),t;case 1:return t=Zb(t.type,!0),t;default:return""}}function KO(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $u:return"Fragment";case Du:return"Portal";case WO:return"Profiler";case SR:return"StrictMode";case UO:return"Suspense";case HO:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case GJ:return(t.displayName||"Context")+".Consumer";case KJ:return(t._context.displayName||"Context")+".Provider";case _R:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ER:return e=t.displayName||null,e!==null?e:KO(t.type)||"Memo";case ia:e=t._payload,t=t._init;try{return KO(t(e))}catch{}}return null}function Ice(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return KO(e);case 8:return e===SR?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function tl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function QJ(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Rce(t){var e=QJ(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function cg(t){t._valueTracker||(t._valueTracker=Rce(t))}function XJ(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=QJ(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Sy(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function GO(t,e){var r=e.checked;return Gt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function y$(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=tl(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function JJ(t,e){e=e.checked,e!=null&&wR(t,"checked",e,!1)}function YO(t,e){JJ(t,e);var r=tl(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?QO(t,e.type,r):e.hasOwnProperty("defaultValue")&&QO(t,e.type,tl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function v$(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function QO(t,e,r){(e!=="number"||Sy(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var gf=Array.isArray;function rd(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+tl(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function XO(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(re(91));return Gt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function b$(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(re(92));if(gf(r)){if(1<r.length)throw Error(re(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:tl(r)}}function ZJ(t,e){var r=tl(e.value),n=tl(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function x$(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function eZ(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function JO(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?eZ(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ug,tZ=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ug=ug||document.createElement("div"),ug.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ug.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Zf(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var kf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mce=["Webkit","ms","Moz","O"];Object.keys(kf).forEach(function(t){Mce.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),kf[e]=kf[t]})});function rZ(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||kf.hasOwnProperty(t)&&kf[t]?(""+e).trim():e+"px"}function nZ(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=rZ(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var Ace=Gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ZO(t,e){if(e){if(Ace[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(re(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(re(62))}}function eP(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tP=null;function NR(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var rP=null,nd=null,id=null;function w$(t){if(t=rm(t)){if(typeof rP!="function")throw Error(re(280));var e=t.stateNode;e&&(e=m0(e),rP(t.stateNode,t.type,e))}}function iZ(t){nd?id?id.push(t):id=[t]:nd=t}function sZ(){if(nd){var t=nd,e=id;if(id=nd=null,w$(t),e)for(t=0;t<e.length;t++)w$(e[t])}}function oZ(t,e){return t(e)}function aZ(){}var ex=!1;function lZ(t,e,r){if(ex)return t(e,r);ex=!0;try{return oZ(t,e,r)}finally{ex=!1,(nd!==null||id!==null)&&(aZ(),sZ())}}function ep(t,e){var r=t.stateNode;if(r===null)return null;var n=m0(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(re(231,e,typeof r));return r}var nP=!1;if(Po)try{var Yh={};Object.defineProperty(Yh,"passive",{get:function(){nP=!0}}),window.addEventListener("test",Yh,Yh),window.removeEventListener("test",Yh,Yh)}catch{nP=!1}function Dce(t,e,r,n,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var Cf=!1,_y=null,Ey=!1,iP=null,$ce={onError:function(t){Cf=!0,_y=t}};function Fce(t,e,r,n,i,s,o,a,l){Cf=!1,_y=null,Dce.apply($ce,arguments)}function qce(t,e,r,n,i,s,o,a,l){if(Fce.apply(this,arguments),Cf){if(Cf){var u=_y;Cf=!1,_y=null}else throw Error(re(198));Ey||(Ey=!0,iP=u)}}function Hc(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function cZ(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function S$(t){if(Hc(t)!==t)throw Error(re(188))}function Lce(t){var e=t.alternate;if(!e){if(e=Hc(t),e===null)throw Error(re(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return S$(i),t;if(s===n)return S$(i),e;s=s.sibling}throw Error(re(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(re(189))}}if(r.alternate!==n)throw Error(re(190))}if(r.tag!==3)throw Error(re(188));return r.stateNode.current===r?t:e}function uZ(t){return t=Lce(t),t!==null?dZ(t):null}function dZ(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=dZ(t);if(e!==null)return e;t=t.sibling}return null}var hZ=vi.unstable_scheduleCallback,_$=vi.unstable_cancelCallback,Bce=vi.unstable_shouldYield,zce=vi.unstable_requestPaint,dr=vi.unstable_now,Vce=vi.unstable_getCurrentPriorityLevel,kR=vi.unstable_ImmediatePriority,fZ=vi.unstable_UserBlockingPriority,Ny=vi.unstable_NormalPriority,Wce=vi.unstable_LowPriority,pZ=vi.unstable_IdlePriority,d0=null,Ds=null;function Uce(t){if(Ds&&typeof Ds.onCommitFiberRoot=="function")try{Ds.onCommitFiberRoot(d0,t,void 0,(t.current.flags&128)===128)}catch{}}var hs=Math.clz32?Math.clz32:Gce,Hce=Math.log,Kce=Math.LN2;function Gce(t){return t>>>=0,t===0?32:31-(Hce(t)/Kce|0)|0}var dg=64,hg=4194304;function yf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ky(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=yf(a):(s&=o,s!==0&&(n=yf(s)))}else o=r&~i,o!==0?n=yf(o):s!==0&&(n=yf(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-hs(e),i=1<<r,n|=t[r],e&=~i;return n}function Yce(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qce(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-hs(s),a=1<<o,l=i[o];l===-1?(!(a&r)||a&n)&&(i[o]=Yce(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function sP(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function mZ(){var t=dg;return dg<<=1,!(dg&4194240)&&(dg=64),t}function tx(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function em(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-hs(e),t[e]=r}function Xce(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-hs(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function CR(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-hs(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var wt=0;function gZ(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var yZ,TR,vZ,bZ,xZ,oP=!1,fg=[],Ma=null,Aa=null,Da=null,tp=new Map,rp=new Map,ha=[],Jce="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function E$(t,e){switch(t){case"focusin":case"focusout":Ma=null;break;case"dragenter":case"dragleave":Aa=null;break;case"mouseover":case"mouseout":Da=null;break;case"pointerover":case"pointerout":tp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":rp.delete(e.pointerId)}}function Qh(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=rm(e),e!==null&&TR(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Zce(t,e,r,n,i){switch(e){case"focusin":return Ma=Qh(Ma,t,e,r,n,i),!0;case"dragenter":return Aa=Qh(Aa,t,e,r,n,i),!0;case"mouseover":return Da=Qh(Da,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return tp.set(s,Qh(tp.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,rp.set(s,Qh(rp.get(s)||null,t,e,r,n,i)),!0}return!1}function wZ(t){var e=$l(t.target);if(e!==null){var r=Hc(e);if(r!==null){if(e=r.tag,e===13){if(e=cZ(r),e!==null){t.blockedOn=e,xZ(t.priority,function(){vZ(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=aP(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);tP=n,r.target.dispatchEvent(n),tP=null}else return e=rm(r),e!==null&&TR(e),t.blockedOn=r,!1;e.shift()}return!0}function N$(t,e,r){Xg(t)&&r.delete(e)}function eue(){oP=!1,Ma!==null&&Xg(Ma)&&(Ma=null),Aa!==null&&Xg(Aa)&&(Aa=null),Da!==null&&Xg(Da)&&(Da=null),tp.forEach(N$),rp.forEach(N$)}function Xh(t,e){t.blockedOn===e&&(t.blockedOn=null,oP||(oP=!0,vi.unstable_scheduleCallback(vi.unstable_NormalPriority,eue)))}function np(t){function e(i){return Xh(i,t)}if(0<fg.length){Xh(fg[0],t);for(var r=1;r<fg.length;r++){var n=fg[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Ma!==null&&Xh(Ma,t),Aa!==null&&Xh(Aa,t),Da!==null&&Xh(Da,t),tp.forEach(e),rp.forEach(e),r=0;r<ha.length;r++)n=ha[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<ha.length&&(r=ha[0],r.blockedOn===null);)wZ(r),r.blockedOn===null&&ha.shift()}var sd=Fo.ReactCurrentBatchConfig,Cy=!0;function tue(t,e,r,n){var i=wt,s=sd.transition;sd.transition=null;try{wt=1,jR(t,e,r,n)}finally{wt=i,sd.transition=s}}function rue(t,e,r,n){var i=wt,s=sd.transition;sd.transition=null;try{wt=4,jR(t,e,r,n)}finally{wt=i,sd.transition=s}}function jR(t,e,r,n){if(Cy){var i=aP(t,e,r,n);if(i===null)dx(t,e,n,Ty,r),E$(t,n);else if(Zce(i,t,e,r,n))n.stopPropagation();else if(E$(t,n),e&4&&-1<Jce.indexOf(t)){for(;i!==null;){var s=rm(i);if(s!==null&&yZ(s),s=aP(t,e,r,n),s===null&&dx(t,e,n,Ty,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else dx(t,e,n,null,r)}}var Ty=null;function aP(t,e,r,n){if(Ty=null,t=NR(n),t=$l(t),t!==null)if(e=Hc(t),e===null)t=null;else if(r=e.tag,r===13){if(t=cZ(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ty=t,null}function SZ(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vce()){case kR:return 1;case fZ:return 4;case Ny:case Wce:return 16;case pZ:return 536870912;default:return 16}default:return 16}}var Ca=null,OR=null,Jg=null;function _Z(){if(Jg)return Jg;var t,e=OR,r=e.length,n,i="value"in Ca?Ca.value:Ca.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[s-n];n++);return Jg=i.slice(t,1<n?1-n:void 0)}function Zg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function pg(){return!0}function k$(){return!1}function xi(t){function e(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?pg:k$,this.isPropagationStopped=k$,this}return Gt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=pg)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=pg)},persist:function(){},isPersistent:pg}),e}var ah={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},PR=xi(ah),tm=Gt({},ah,{view:0,detail:0}),nue=xi(tm),rx,nx,Jh,h0=Gt({},tm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:IR,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jh&&(Jh&&t.type==="mousemove"?(rx=t.screenX-Jh.screenX,nx=t.screenY-Jh.screenY):nx=rx=0,Jh=t),rx)},movementY:function(t){return"movementY"in t?t.movementY:nx}}),C$=xi(h0),iue=Gt({},h0,{dataTransfer:0}),sue=xi(iue),oue=Gt({},tm,{relatedTarget:0}),ix=xi(oue),aue=Gt({},ah,{animationName:0,elapsedTime:0,pseudoElement:0}),lue=xi(aue),cue=Gt({},ah,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),uue=xi(cue),due=Gt({},ah,{data:0}),T$=xi(due),hue={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fue={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pue={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mue(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=pue[t])?!!e[t]:!1}function IR(){return mue}var gue=Gt({},tm,{key:function(t){if(t.key){var e=hue[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Zg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?fue[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:IR,charCode:function(t){return t.type==="keypress"?Zg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),yue=xi(gue),vue=Gt({},h0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),j$=xi(vue),bue=Gt({},tm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:IR}),xue=xi(bue),wue=Gt({},ah,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sue=xi(wue),_ue=Gt({},h0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Eue=xi(_ue),Nue=[9,13,27,32],RR=Po&&"CompositionEvent"in window,Tf=null;Po&&"documentMode"in document&&(Tf=document.documentMode);var kue=Po&&"TextEvent"in window&&!Tf,EZ=Po&&(!RR||Tf&&8<Tf&&11>=Tf),O$=" ",P$=!1;function NZ(t,e){switch(t){case"keyup":return Nue.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kZ(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fu=!1;function Cue(t,e){switch(t){case"compositionend":return kZ(e);case"keypress":return e.which!==32?null:(P$=!0,O$);case"textInput":return t=e.data,t===O$&&P$?null:t;default:return null}}function Tue(t,e){if(Fu)return t==="compositionend"||!RR&&NZ(t,e)?(t=_Z(),Jg=OR=Ca=null,Fu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return EZ&&e.locale!=="ko"?null:e.data;default:return null}}var jue={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function I$(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!jue[t.type]:e==="textarea"}function CZ(t,e,r,n){iZ(n),e=jy(e,"onChange"),0<e.length&&(r=new PR("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var jf=null,ip=null;function Oue(t){FZ(t,0)}function f0(t){var e=Bu(t);if(XJ(e))return t}function Pue(t,e){if(t==="change")return e}var TZ=!1;if(Po){var sx;if(Po){var ox="oninput"in document;if(!ox){var R$=document.createElement("div");R$.setAttribute("oninput","return;"),ox=typeof R$.oninput=="function"}sx=ox}else sx=!1;TZ=sx&&(!document.documentMode||9<document.documentMode)}function M$(){jf&&(jf.detachEvent("onpropertychange",jZ),ip=jf=null)}function jZ(t){if(t.propertyName==="value"&&f0(ip)){var e=[];CZ(e,ip,t,NR(t)),lZ(Oue,e)}}function Iue(t,e,r){t==="focusin"?(M$(),jf=e,ip=r,jf.attachEvent("onpropertychange",jZ)):t==="focusout"&&M$()}function Rue(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return f0(ip)}function Mue(t,e){if(t==="click")return f0(e)}function Aue(t,e){if(t==="input"||t==="change")return f0(e)}function Due(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ps=typeof Object.is=="function"?Object.is:Due;function sp(t,e){if(ps(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!VO.call(e,i)||!ps(t[i],e[i]))return!1}return!0}function A$(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function D$(t,e){var r=A$(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=A$(r)}}function OZ(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?OZ(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function PZ(){for(var t=window,e=Sy();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Sy(t.document)}return e}function MR(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function $ue(t){var e=PZ(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&OZ(r.ownerDocument.documentElement,r)){if(n!==null&&MR(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=D$(r,s);var o=D$(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Fue=Po&&"documentMode"in document&&11>=document.documentMode,qu=null,lP=null,Of=null,cP=!1;function $$(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;cP||qu==null||qu!==Sy(n)||(n=qu,"selectionStart"in n&&MR(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Of&&sp(Of,n)||(Of=n,n=jy(lP,"onSelect"),0<n.length&&(e=new PR("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=qu)))}function mg(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Lu={animationend:mg("Animation","AnimationEnd"),animationiteration:mg("Animation","AnimationIteration"),animationstart:mg("Animation","AnimationStart"),transitionend:mg("Transition","TransitionEnd")},ax={},IZ={};Po&&(IZ=document.createElement("div").style,"AnimationEvent"in window||(delete Lu.animationend.animation,delete Lu.animationiteration.animation,delete Lu.animationstart.animation),"TransitionEvent"in window||delete Lu.transitionend.transition);function p0(t){if(ax[t])return ax[t];if(!Lu[t])return t;var e=Lu[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in IZ)return ax[t]=e[r];return t}var RZ=p0("animationend"),MZ=p0("animationiteration"),AZ=p0("animationstart"),DZ=p0("transitionend"),$Z=new Map,F$="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ul(t,e){$Z.set(t,e),Uc(e,[t])}for(var lx=0;lx<F$.length;lx++){var cx=F$[lx],que=cx.toLowerCase(),Lue=cx[0].toUpperCase()+cx.slice(1);ul(que,"on"+Lue)}ul(RZ,"onAnimationEnd");ul(MZ,"onAnimationIteration");ul(AZ,"onAnimationStart");ul("dblclick","onDoubleClick");ul("focusin","onFocus");ul("focusout","onBlur");ul(DZ,"onTransitionEnd");Id("onMouseEnter",["mouseout","mouseover"]);Id("onMouseLeave",["mouseout","mouseover"]);Id("onPointerEnter",["pointerout","pointerover"]);Id("onPointerLeave",["pointerout","pointerover"]);Uc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Uc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Uc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Uc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Uc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Uc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bue=new Set("cancel close invalid load scroll toggle".split(" ").concat(vf));function q$(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,qce(n,e,void 0,t),t.currentTarget=null}function FZ(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;q$(i,a,u),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;q$(i,a,u),s=l}}}if(Ey)throw t=iP,Ey=!1,iP=null,t}function Mt(t,e){var r=e[pP];r===void 0&&(r=e[pP]=new Set);var n=t+"__bubble";r.has(n)||(qZ(e,t,2,!1),r.add(n))}function ux(t,e,r){var n=0;e&&(n|=4),qZ(r,t,n,e)}var gg="_reactListening"+Math.random().toString(36).slice(2);function op(t){if(!t[gg]){t[gg]=!0,HJ.forEach(function(r){r!=="selectionchange"&&(Bue.has(r)||ux(r,!1,t),ux(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[gg]||(e[gg]=!0,ux("selectionchange",!1,e))}}function qZ(t,e,r,n){switch(SZ(e)){case 1:var i=tue;break;case 4:i=rue;break;default:i=jR}r=i.bind(null,e,r,t),i=void 0,!nP||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function dx(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=$l(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue e}a=a.parentNode}}n=n.return}lZ(function(){var u=s,d=NR(r),h=[];e:{var f=$Z.get(t);if(f!==void 0){var p=PR,m=t;switch(t){case"keypress":if(Zg(r)===0)break e;case"keydown":case"keyup":p=yue;break;case"focusin":m="focus",p=ix;break;case"focusout":m="blur",p=ix;break;case"beforeblur":case"afterblur":p=ix;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=C$;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=sue;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=xue;break;case RZ:case MZ:case AZ:p=lue;break;case DZ:p=Sue;break;case"scroll":p=nue;break;case"wheel":p=Eue;break;case"copy":case"cut":case"paste":p=uue;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=j$}var g=(e&4)!==0,v=!g&&t==="scroll",y=g?f!==null?f+"Capture":null:f;g=[];for(var b=u,w;b!==null;){w=b;var x=w.stateNode;if(w.tag===5&&x!==null&&(w=x,y!==null&&(x=ep(b,y),x!=null&&g.push(ap(b,x,w)))),v)break;b=b.return}0<g.length&&(f=new p(f,m,null,r,d),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&r!==tP&&(m=r.relatedTarget||r.fromElement)&&($l(m)||m[Io]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=u,m=m?$l(m):null,m!==null&&(v=Hc(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(g=C$,x="onMouseLeave",y="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=j$,x="onPointerLeave",y="onPointerEnter",b="pointer"),v=p==null?f:Bu(p),w=m==null?f:Bu(m),f=new g(x,b+"leave",p,r,d),f.target=v,f.relatedTarget=w,x=null,$l(d)===u&&(g=new g(y,b+"enter",m,r,d),g.target=w,g.relatedTarget=v,x=g),v=x,p&&m)t:{for(g=p,y=m,b=0,w=g;w;w=_u(w))b++;for(w=0,x=y;x;x=_u(x))w++;for(;0<b-w;)g=_u(g),b--;for(;0<w-b;)y=_u(y),w--;for(;b--;){if(g===y||y!==null&&g===y.alternate)break t;g=_u(g),y=_u(y)}g=null}else g=null;p!==null&&L$(h,f,p,g,!1),m!==null&&v!==null&&L$(h,v,m,g,!0)}}e:{if(f=u?Bu(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var S=Pue;else if(I$(f))if(TZ)S=Aue;else{S=Rue;var _=Iue}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=Mue);if(S&&(S=S(t,u))){CZ(h,S,r,d);break e}_&&_(t,f,u),t==="focusout"&&(_=f._wrapperState)&&_.controlled&&f.type==="number"&&QO(f,"number",f.value)}switch(_=u?Bu(u):window,t){case"focusin":(I$(_)||_.contentEditable==="true")&&(qu=_,lP=u,Of=null);break;case"focusout":Of=lP=qu=null;break;case"mousedown":cP=!0;break;case"contextmenu":case"mouseup":case"dragend":cP=!1,$$(h,r,d);break;case"selectionchange":if(Fue)break;case"keydown":case"keyup":$$(h,r,d)}var E;if(RR)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Fu?NZ(t,r)&&(N="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(N="onCompositionStart");N&&(EZ&&r.locale!=="ko"&&(Fu||N!=="onCompositionStart"?N==="onCompositionEnd"&&Fu&&(E=_Z()):(Ca=d,OR="value"in Ca?Ca.value:Ca.textContent,Fu=!0)),_=jy(u,N),0<_.length&&(N=new T$(N,t,null,r,d),h.push({event:N,listeners:_}),E?N.data=E:(E=kZ(r),E!==null&&(N.data=E)))),(E=kue?Cue(t,r):Tue(t,r))&&(u=jy(u,"onBeforeInput"),0<u.length&&(d=new T$("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=E))}FZ(h,e)})}function ap(t,e,r){return{instance:t,listener:e,currentTarget:r}}function jy(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ep(t,r),s!=null&&n.unshift(ap(t,s,i)),s=ep(t,e),s!=null&&n.push(ap(t,s,i))),t=t.return}return n}function _u(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function L$(t,e,r,n,i){for(var s=e._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,u=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&u!==null&&(a=u,i?(l=ep(r,s),l!=null&&o.unshift(ap(r,l,a))):i||(l=ep(r,s),l!=null&&o.push(ap(r,l,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var zue=/\r\n?/g,Vue=/\u0000|\uFFFD/g;function B$(t){return(typeof t=="string"?t:""+t).replace(zue,`
`).replace(Vue,"")}function yg(t,e,r){if(e=B$(e),B$(t)!==e&&r)throw Error(re(425))}function Oy(){}var uP=null,dP=null;function hP(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var fP=typeof setTimeout=="function"?setTimeout:void 0,Wue=typeof clearTimeout=="function"?clearTimeout:void 0,z$=typeof Promise=="function"?Promise:void 0,Uue=typeof queueMicrotask=="function"?queueMicrotask:typeof z$<"u"?function(t){return z$.resolve(null).then(t).catch(Hue)}:fP;function Hue(t){setTimeout(function(){throw t})}function hx(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),np(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);np(e)}function $a(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function V$(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var lh=Math.random().toString(36).slice(2),Ps="__reactFiber$"+lh,lp="__reactProps$"+lh,Io="__reactContainer$"+lh,pP="__reactEvents$"+lh,Kue="__reactListeners$"+lh,Gue="__reactHandles$"+lh;function $l(t){var e=t[Ps];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Io]||r[Ps]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=V$(t);t!==null;){if(r=t[Ps])return r;t=V$(t)}return e}t=r,r=t.parentNode}return null}function rm(t){return t=t[Ps]||t[Io],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Bu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(re(33))}function m0(t){return t[lp]||null}var mP=[],zu=-1;function dl(t){return{current:t}}function Ft(t){0>zu||(t.current=mP[zu],mP[zu]=null,zu--)}function Rt(t,e){zu++,mP[zu]=t.current,t.current=e}var rl={},gn=dl(rl),Xn=dl(!1),xc=rl;function Rd(t,e){var r=t.type.contextTypes;if(!r)return rl;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Jn(t){return t=t.childContextTypes,t!=null}function Py(){Ft(Xn),Ft(gn)}function W$(t,e,r){if(gn.current!==rl)throw Error(re(168));Rt(gn,e),Rt(Xn,r)}function LZ(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(re(108,Ice(t)||"Unknown",i));return Gt({},r,n)}function Iy(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||rl,xc=gn.current,Rt(gn,t),Rt(Xn,Xn.current),!0}function U$(t,e,r){var n=t.stateNode;if(!n)throw Error(re(169));r?(t=LZ(t,e,xc),n.__reactInternalMemoizedMergedChildContext=t,Ft(Xn),Ft(gn),Rt(gn,t)):Ft(Xn),Rt(Xn,r)}var ao=null,g0=!1,fx=!1;function BZ(t){ao===null?ao=[t]:ao.push(t)}function Yue(t){g0=!0,BZ(t)}function hl(){if(!fx&&ao!==null){fx=!0;var t=0,e=wt;try{var r=ao;for(wt=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}ao=null,g0=!1}catch(i){throw ao!==null&&(ao=ao.slice(t+1)),hZ(kR,hl),i}finally{wt=e,fx=!1}}return null}var Vu=[],Wu=0,Ry=null,My=0,Ai=[],Di=0,wc=null,fo=1,po="";function Rl(t,e){Vu[Wu++]=My,Vu[Wu++]=Ry,Ry=t,My=e}function zZ(t,e,r){Ai[Di++]=fo,Ai[Di++]=po,Ai[Di++]=wc,wc=t;var n=fo;t=po;var i=32-hs(n)-1;n&=~(1<<i),r+=1;var s=32-hs(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,fo=1<<32-hs(e)+i|r<<i|n,po=s+t}else fo=1<<s|r<<i|n,po=t}function AR(t){t.return!==null&&(Rl(t,1),zZ(t,1,0))}function DR(t){for(;t===Ry;)Ry=Vu[--Wu],Vu[Wu]=null,My=Vu[--Wu],Vu[Wu]=null;for(;t===wc;)wc=Ai[--Di],Ai[Di]=null,po=Ai[--Di],Ai[Di]=null,fo=Ai[--Di],Ai[Di]=null}var gi=null,mi=null,Bt=!1,ss=null;function VZ(t,e){var r=Li(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function H$(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,gi=t,mi=$a(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,gi=t,mi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=wc!==null?{id:fo,overflow:po}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Li(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,gi=t,mi=null,!0):!1;default:return!1}}function gP(t){return(t.mode&1)!==0&&(t.flags&128)===0}function yP(t){if(Bt){var e=mi;if(e){var r=e;if(!H$(t,e)){if(gP(t))throw Error(re(418));e=$a(r.nextSibling);var n=gi;e&&H$(t,e)?VZ(n,r):(t.flags=t.flags&-4097|2,Bt=!1,gi=t)}}else{if(gP(t))throw Error(re(418));t.flags=t.flags&-4097|2,Bt=!1,gi=t}}}function K$(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;gi=t}function vg(t){if(t!==gi)return!1;if(!Bt)return K$(t),Bt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!hP(t.type,t.memoizedProps)),e&&(e=mi)){if(gP(t))throw WZ(),Error(re(418));for(;e;)VZ(t,e),e=$a(e.nextSibling)}if(K$(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(re(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){mi=$a(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}mi=null}}else mi=gi?$a(t.stateNode.nextSibling):null;return!0}function WZ(){for(var t=mi;t;)t=$a(t.nextSibling)}function Md(){mi=gi=null,Bt=!1}function $R(t){ss===null?ss=[t]:ss.push(t)}var Que=Fo.ReactCurrentBatchConfig;function Zh(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(re(309));var n=r.stateNode}if(!n)throw Error(re(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(re(284));if(!r._owner)throw Error(re(290,t))}return t}function bg(t,e){throw t=Object.prototype.toString.call(e),Error(re(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function G$(t){var e=t._init;return e(t._payload)}function UZ(t){function e(y,b){if(t){var w=y.deletions;w===null?(y.deletions=[b],y.flags|=16):w.push(b)}}function r(y,b){if(!t)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function n(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function i(y,b){return y=Ba(y,b),y.index=0,y.sibling=null,y}function s(y,b,w){return y.index=w,t?(w=y.alternate,w!==null?(w=w.index,w<b?(y.flags|=2,b):w):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,b,w,x){return b===null||b.tag!==6?(b=xx(w,y.mode,x),b.return=y,b):(b=i(b,w),b.return=y,b)}function l(y,b,w,x){var S=w.type;return S===$u?d(y,b,w.props.children,x,w.key):b!==null&&(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ia&&G$(S)===b.type)?(x=i(b,w.props),x.ref=Zh(y,b,w),x.return=y,x):(x=oy(w.type,w.key,w.props,null,y.mode,x),x.ref=Zh(y,b,w),x.return=y,x)}function u(y,b,w,x){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=wx(w,y.mode,x),b.return=y,b):(b=i(b,w.children||[]),b.return=y,b)}function d(y,b,w,x,S){return b===null||b.tag!==7?(b=ac(w,y.mode,x,S),b.return=y,b):(b=i(b,w),b.return=y,b)}function h(y,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=xx(""+b,y.mode,w),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case lg:return w=oy(b.type,b.key,b.props,null,y.mode,w),w.ref=Zh(y,null,b),w.return=y,w;case Du:return b=wx(b,y.mode,w),b.return=y,b;case ia:var x=b._init;return h(y,x(b._payload),w)}if(gf(b)||Gh(b))return b=ac(b,y.mode,w,null),b.return=y,b;bg(y,b)}return null}function f(y,b,w,x){var S=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(y,b,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case lg:return w.key===S?l(y,b,w,x):null;case Du:return w.key===S?u(y,b,w,x):null;case ia:return S=w._init,f(y,b,S(w._payload),x)}if(gf(w)||Gh(w))return S!==null?null:d(y,b,w,x,null);bg(y,w)}return null}function p(y,b,w,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(w)||null,a(b,y,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case lg:return y=y.get(x.key===null?w:x.key)||null,l(b,y,x,S);case Du:return y=y.get(x.key===null?w:x.key)||null,u(b,y,x,S);case ia:var _=x._init;return p(y,b,w,_(x._payload),S)}if(gf(x)||Gh(x))return y=y.get(w)||null,d(b,y,x,S,null);bg(b,x)}return null}function m(y,b,w,x){for(var S=null,_=null,E=b,N=b=0,T=null;E!==null&&N<w.length;N++){E.index>N?(T=E,E=null):T=E.sibling;var j=f(y,E,w[N],x);if(j===null){E===null&&(E=T);break}t&&E&&j.alternate===null&&e(y,E),b=s(j,b,N),_===null?S=j:_.sibling=j,_=j,E=T}if(N===w.length)return r(y,E),Bt&&Rl(y,N),S;if(E===null){for(;N<w.length;N++)E=h(y,w[N],x),E!==null&&(b=s(E,b,N),_===null?S=E:_.sibling=E,_=E);return Bt&&Rl(y,N),S}for(E=n(y,E);N<w.length;N++)T=p(E,y,N,w[N],x),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?N:T.key),b=s(T,b,N),_===null?S=T:_.sibling=T,_=T);return t&&E.forEach(function(P){return e(y,P)}),Bt&&Rl(y,N),S}function g(y,b,w,x){var S=Gh(w);if(typeof S!="function")throw Error(re(150));if(w=S.call(w),w==null)throw Error(re(151));for(var _=S=null,E=b,N=b=0,T=null,j=w.next();E!==null&&!j.done;N++,j=w.next()){E.index>N?(T=E,E=null):T=E.sibling;var P=f(y,E,j.value,x);if(P===null){E===null&&(E=T);break}t&&E&&P.alternate===null&&e(y,E),b=s(P,b,N),_===null?S=P:_.sibling=P,_=P,E=T}if(j.done)return r(y,E),Bt&&Rl(y,N),S;if(E===null){for(;!j.done;N++,j=w.next())j=h(y,j.value,x),j!==null&&(b=s(j,b,N),_===null?S=j:_.sibling=j,_=j);return Bt&&Rl(y,N),S}for(E=n(y,E);!j.done;N++,j=w.next())j=p(E,y,N,j.value,x),j!==null&&(t&&j.alternate!==null&&E.delete(j.key===null?N:j.key),b=s(j,b,N),_===null?S=j:_.sibling=j,_=j);return t&&E.forEach(function(O){return e(y,O)}),Bt&&Rl(y,N),S}function v(y,b,w,x){if(typeof w=="object"&&w!==null&&w.type===$u&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case lg:e:{for(var S=w.key,_=b;_!==null;){if(_.key===S){if(S=w.type,S===$u){if(_.tag===7){r(y,_.sibling),b=i(_,w.props.children),b.return=y,y=b;break e}}else if(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ia&&G$(S)===_.type){r(y,_.sibling),b=i(_,w.props),b.ref=Zh(y,_,w),b.return=y,y=b;break e}r(y,_);break}else e(y,_);_=_.sibling}w.type===$u?(b=ac(w.props.children,y.mode,x,w.key),b.return=y,y=b):(x=oy(w.type,w.key,w.props,null,y.mode,x),x.ref=Zh(y,b,w),x.return=y,y=x)}return o(y);case Du:e:{for(_=w.key;b!==null;){if(b.key===_)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){r(y,b.sibling),b=i(b,w.children||[]),b.return=y,y=b;break e}else{r(y,b);break}else e(y,b);b=b.sibling}b=wx(w,y.mode,x),b.return=y,y=b}return o(y);case ia:return _=w._init,v(y,b,_(w._payload),x)}if(gf(w))return m(y,b,w,x);if(Gh(w))return g(y,b,w,x);bg(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(r(y,b.sibling),b=i(b,w),b.return=y,y=b):(r(y,b),b=xx(w,y.mode,x),b.return=y,y=b),o(y)):r(y,b)}return v}var Ad=UZ(!0),HZ=UZ(!1),Ay=dl(null),Dy=null,Uu=null,FR=null;function qR(){FR=Uu=Dy=null}function LR(t){var e=Ay.current;Ft(Ay),t._currentValue=e}function vP(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function od(t,e){Dy=t,FR=Uu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Yn=!0),t.firstContext=null)}function Hi(t){var e=t._currentValue;if(FR!==t)if(t={context:t,memoizedValue:e,next:null},Uu===null){if(Dy===null)throw Error(re(308));Uu=t,Dy.dependencies={lanes:0,firstContext:t}}else Uu=Uu.next=t;return e}var Fl=null;function BR(t){Fl===null?Fl=[t]:Fl.push(t)}function KZ(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,BR(e)):(r.next=i.next,i.next=r),e.interleaved=r,Ro(t,n)}function Ro(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var sa=!1;function zR(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function GZ(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Fa(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,ft&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Ro(t,r)}return i=n.interleaved,i===null?(e.next=e,BR(n)):(e.next=i.next,i.next=e),n.interleaved=e,Ro(t,r)}function ey(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,CR(t,r)}}function Y$(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function $y(t,e,r,n){var i=t.updateQueue;sa=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=u=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,g=a;switch(f=e,p=r,g.tag){case 1:if(m=g.payload,typeof m=="function"){h=m.call(p,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(p,h,f):m,f==null)break e;h=Gt({},h,f);break e;case 2:sa=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=p,l=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);_c|=o,t.lanes=o,t.memoizedState=h}}function Q$(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(re(191,i));i.call(n)}}}var nm={},$s=dl(nm),cp=dl(nm),up=dl(nm);function ql(t){if(t===nm)throw Error(re(174));return t}function VR(t,e){switch(Rt(up,e),Rt(cp,t),Rt($s,nm),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:JO(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=JO(e,t)}Ft($s),Rt($s,e)}function Dd(){Ft($s),Ft(cp),Ft(up)}function YZ(t){ql(up.current);var e=ql($s.current),r=JO(e,t.type);e!==r&&(Rt(cp,t),Rt($s,r))}function WR(t){cp.current===t&&(Ft($s),Ft(cp))}var Wt=dl(0);function Fy(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var px=[];function UR(){for(var t=0;t<px.length;t++)px[t]._workInProgressVersionPrimary=null;px.length=0}var ty=Fo.ReactCurrentDispatcher,mx=Fo.ReactCurrentBatchConfig,Sc=0,Ht=null,Or=null,$r=null,qy=!1,Pf=!1,dp=0,Xue=0;function ln(){throw Error(re(321))}function HR(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!ps(t[r],e[r]))return!1;return!0}function KR(t,e,r,n,i,s){if(Sc=s,Ht=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ty.current=t===null||t.memoizedState===null?tde:rde,t=r(n,i),Pf){s=0;do{if(Pf=!1,dp=0,25<=s)throw Error(re(301));s+=1,$r=Or=null,e.updateQueue=null,ty.current=nde,t=r(n,i)}while(Pf)}if(ty.current=Ly,e=Or!==null&&Or.next!==null,Sc=0,$r=Or=Ht=null,qy=!1,e)throw Error(re(300));return t}function GR(){var t=dp!==0;return dp=0,t}function _s(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $r===null?Ht.memoizedState=$r=t:$r=$r.next=t,$r}function Ki(){if(Or===null){var t=Ht.alternate;t=t!==null?t.memoizedState:null}else t=Or.next;var e=$r===null?Ht.memoizedState:$r.next;if(e!==null)$r=e,Or=t;else{if(t===null)throw Error(re(310));Or=t,t={memoizedState:Or.memoizedState,baseState:Or.baseState,baseQueue:Or.baseQueue,queue:Or.queue,next:null},$r===null?Ht.memoizedState=$r=t:$r=$r.next=t}return $r}function hp(t,e){return typeof e=="function"?e(t):e}function gx(t){var e=Ki(),r=e.queue;if(r===null)throw Error(re(311));r.lastRenderedReducer=t;var n=Or,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,l=null,u=s;do{var d=u.lane;if((Sc&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=n):l=l.next=h,Ht.lanes|=d,_c|=d}u=u.next}while(u!==null&&u!==s);l===null?o=n:l.next=a,ps(n,e.memoizedState)||(Yn=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,Ht.lanes|=s,_c|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function yx(t){var e=Ki(),r=e.queue;if(r===null)throw Error(re(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ps(s,e.memoizedState)||(Yn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function QZ(){}function XZ(t,e){var r=Ht,n=Ki(),i=e(),s=!ps(n.memoizedState,i);if(s&&(n.memoizedState=i,Yn=!0),n=n.queue,YR(eee.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||$r!==null&&$r.memoizedState.tag&1){if(r.flags|=2048,fp(9,ZZ.bind(null,r,n,i,e),void 0,null),Lr===null)throw Error(re(349));Sc&30||JZ(r,e,i)}return i}function JZ(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Ht.updateQueue,e===null?(e={lastEffect:null,stores:null},Ht.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function ZZ(t,e,r,n){e.value=r,e.getSnapshot=n,tee(e)&&ree(t)}function eee(t,e,r){return r(function(){tee(e)&&ree(t)})}function tee(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!ps(t,r)}catch{return!0}}function ree(t){var e=Ro(t,1);e!==null&&fs(e,t,1,-1)}function X$(t){var e=_s();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hp,lastRenderedState:t},e.queue=t,t=t.dispatch=ede.bind(null,Ht,t),[e.memoizedState,t]}function fp(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Ht.updateQueue,e===null?(e={lastEffect:null,stores:null},Ht.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function nee(){return Ki().memoizedState}function ry(t,e,r,n){var i=_s();Ht.flags|=t,i.memoizedState=fp(1|e,r,void 0,n===void 0?null:n)}function y0(t,e,r,n){var i=Ki();n=n===void 0?null:n;var s=void 0;if(Or!==null){var o=Or.memoizedState;if(s=o.destroy,n!==null&&HR(n,o.deps)){i.memoizedState=fp(e,r,s,n);return}}Ht.flags|=t,i.memoizedState=fp(1|e,r,s,n)}function J$(t,e){return ry(8390656,8,t,e)}function YR(t,e){return y0(2048,8,t,e)}function iee(t,e){return y0(4,2,t,e)}function see(t,e){return y0(4,4,t,e)}function oee(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function aee(t,e,r){return r=r!=null?r.concat([t]):null,y0(4,4,oee.bind(null,e,t),r)}function QR(){}function lee(t,e){var r=Ki();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&HR(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function cee(t,e){var r=Ki();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&HR(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function uee(t,e,r){return Sc&21?(ps(r,e)||(r=mZ(),Ht.lanes|=r,_c|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Yn=!0),t.memoizedState=r)}function Jue(t,e){var r=wt;wt=r!==0&&4>r?r:4,t(!0);var n=mx.transition;mx.transition={};try{t(!1),e()}finally{wt=r,mx.transition=n}}function dee(){return Ki().memoizedState}function Zue(t,e,r){var n=La(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},hee(t))fee(e,r);else if(r=KZ(t,e,r,n),r!==null){var i=On();fs(r,t,n,i),pee(r,e,n)}}function ede(t,e,r){var n=La(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(hee(t))fee(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,ps(a,o)){var l=e.interleaved;l===null?(i.next=i,BR(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=KZ(t,e,i,n),r!==null&&(i=On(),fs(r,t,n,i),pee(r,e,n))}}function hee(t){var e=t.alternate;return t===Ht||e!==null&&e===Ht}function fee(t,e){Pf=qy=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function pee(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,CR(t,r)}}var Ly={readContext:Hi,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useInsertionEffect:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useSyncExternalStore:ln,useId:ln,unstable_isNewReconciler:!1},tde={readContext:Hi,useCallback:function(t,e){return _s().memoizedState=[t,e===void 0?null:e],t},useContext:Hi,useEffect:J$,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,ry(4194308,4,oee.bind(null,e,t),r)},useLayoutEffect:function(t,e){return ry(4194308,4,t,e)},useInsertionEffect:function(t,e){return ry(4,2,t,e)},useMemo:function(t,e){var r=_s();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=_s();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Zue.bind(null,Ht,t),[n.memoizedState,t]},useRef:function(t){var e=_s();return t={current:t},e.memoizedState=t},useState:X$,useDebugValue:QR,useDeferredValue:function(t){return _s().memoizedState=t},useTransition:function(){var t=X$(!1),e=t[0];return t=Jue.bind(null,t[1]),_s().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Ht,i=_s();if(Bt){if(r===void 0)throw Error(re(407));r=r()}else{if(r=e(),Lr===null)throw Error(re(349));Sc&30||JZ(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,J$(eee.bind(null,n,s,t),[t]),n.flags|=2048,fp(9,ZZ.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=_s(),e=Lr.identifierPrefix;if(Bt){var r=po,n=fo;r=(n&~(1<<32-hs(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=dp++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Xue++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},rde={readContext:Hi,useCallback:lee,useContext:Hi,useEffect:YR,useImperativeHandle:aee,useInsertionEffect:iee,useLayoutEffect:see,useMemo:cee,useReducer:gx,useRef:nee,useState:function(){return gx(hp)},useDebugValue:QR,useDeferredValue:function(t){var e=Ki();return uee(e,Or.memoizedState,t)},useTransition:function(){var t=gx(hp)[0],e=Ki().memoizedState;return[t,e]},useMutableSource:QZ,useSyncExternalStore:XZ,useId:dee,unstable_isNewReconciler:!1},nde={readContext:Hi,useCallback:lee,useContext:Hi,useEffect:YR,useImperativeHandle:aee,useInsertionEffect:iee,useLayoutEffect:see,useMemo:cee,useReducer:yx,useRef:nee,useState:function(){return yx(hp)},useDebugValue:QR,useDeferredValue:function(t){var e=Ki();return Or===null?e.memoizedState=t:uee(e,Or.memoizedState,t)},useTransition:function(){var t=yx(hp)[0],e=Ki().memoizedState;return[t,e]},useMutableSource:QZ,useSyncExternalStore:XZ,useId:dee,unstable_isNewReconciler:!1};function ts(t,e){if(t&&t.defaultProps){e=Gt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function bP(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Gt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var v0={isMounted:function(t){return(t=t._reactInternals)?Hc(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=On(),i=La(t),s=vo(n,i);s.payload=e,r!=null&&(s.callback=r),e=Fa(t,s,i),e!==null&&(fs(e,t,i,n),ey(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=On(),i=La(t),s=vo(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=Fa(t,s,i),e!==null&&(fs(e,t,i,n),ey(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=On(),n=La(t),i=vo(r,n);i.tag=2,e!=null&&(i.callback=e),e=Fa(t,i,n),e!==null&&(fs(e,t,n,r),ey(e,t,n))}};function Z$(t,e,r,n,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!sp(r,n)||!sp(i,s):!0}function mee(t,e,r){var n=!1,i=rl,s=e.contextType;return typeof s=="object"&&s!==null?s=Hi(s):(i=Jn(e)?xc:gn.current,n=e.contextTypes,s=(n=n!=null)?Rd(t,i):rl),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=v0,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function e4(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&v0.enqueueReplaceState(e,e.state,null)}function xP(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},zR(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Hi(s):(s=Jn(e)?xc:gn.current,i.context=Rd(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(bP(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&v0.enqueueReplaceState(i,i.state,null),$y(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function $d(t,e){try{var r="",n=e;do r+=Pce(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function vx(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function wP(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var ide=typeof WeakMap=="function"?WeakMap:Map;function gee(t,e,r){r=vo(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){zy||(zy=!0,PP=n),wP(t,e)},r}function yee(t,e,r){r=vo(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){wP(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){wP(t,e),typeof n!="function"&&(qa===null?qa=new Set([this]):qa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function t4(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new ide;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=vde.bind(null,t,e,r),e.then(t,t))}function r4(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function n4(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=vo(-1,1),e.tag=2,Fa(r,e,1))),r.lanes|=1),t)}var sde=Fo.ReactCurrentOwner,Yn=!1;function Sn(t,e,r,n){e.child=t===null?HZ(e,null,r,n):Ad(e,t.child,r,n)}function i4(t,e,r,n,i){r=r.render;var s=e.ref;return od(e,i),n=KR(t,e,r,n,s,i),r=GR(),t!==null&&!Yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Mo(t,e,i)):(Bt&&r&&AR(e),e.flags|=1,Sn(t,e,n,i),e.child)}function s4(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!iM(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,vee(t,e,s,n,i)):(t=oy(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:sp,r(o,n)&&t.ref===e.ref)return Mo(t,e,i)}return e.flags|=1,t=Ba(s,n),t.ref=e.ref,t.return=e,e.child=t}function vee(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(sp(s,n)&&t.ref===e.ref)if(Yn=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(Yn=!0);else return e.lanes=t.lanes,Mo(t,e,i)}return SP(t,e,r,n,i)}function bee(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rt(Ku,di),di|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Rt(Ku,di),di|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Rt(Ku,di),di|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Rt(Ku,di),di|=n;return Sn(t,e,i,r),e.child}function xee(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function SP(t,e,r,n,i){var s=Jn(r)?xc:gn.current;return s=Rd(e,s),od(e,i),r=KR(t,e,r,n,s,i),n=GR(),t!==null&&!Yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Mo(t,e,i)):(Bt&&n&&AR(e),e.flags|=1,Sn(t,e,r,i),e.child)}function o4(t,e,r,n,i){if(Jn(r)){var s=!0;Iy(e)}else s=!1;if(od(e,i),e.stateNode===null)ny(t,e),mee(e,r,n),xP(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Hi(u):(u=Jn(r)?xc:gn.current,u=Rd(e,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==u)&&e4(e,o,n,u),sa=!1;var f=e.memoizedState;o.state=f,$y(e,n,o,i),l=e.memoizedState,a!==n||f!==l||Xn.current||sa?(typeof d=="function"&&(bP(e,r,d,n),l=e.memoizedState),(a=sa||Z$(e,r,a,n,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=u,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,GZ(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:ts(e.type,a),o.props=u,h=e.pendingProps,f=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Hi(l):(l=Jn(r)?xc:gn.current,l=Rd(e,l));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&e4(e,o,n,l),sa=!1,f=e.memoizedState,o.state=f,$y(e,n,o,i);var m=e.memoizedState;a!==h||f!==m||Xn.current||sa?(typeof p=="function"&&(bP(e,r,p,n),m=e.memoizedState),(u=sa||Z$(e,r,u,n,f,m,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return _P(t,e,r,n,s,i)}function _P(t,e,r,n,i,s){xee(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&U$(e,r,!1),Mo(t,e,s);n=e.stateNode,sde.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Ad(e,t.child,null,s),e.child=Ad(e,null,a,s)):Sn(t,e,a,s),e.memoizedState=n.state,i&&U$(e,r,!0),e.child}function wee(t){var e=t.stateNode;e.pendingContext?W$(t,e.pendingContext,e.pendingContext!==e.context):e.context&&W$(t,e.context,!1),VR(t,e.containerInfo)}function a4(t,e,r,n,i){return Md(),$R(i),e.flags|=256,Sn(t,e,r,n),e.child}var EP={dehydrated:null,treeContext:null,retryLane:0};function NP(t){return{baseLanes:t,cachePool:null,transitions:null}}function See(t,e,r){var n=e.pendingProps,i=Wt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Rt(Wt,i&1),t===null)return yP(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=w0(o,n,0,null),t=ac(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=NP(r),e.memoizedState=EP,t):XR(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return ode(t,e,o,n,a,i,r);if(s){s=n.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Ba(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ba(a,s):(s=ac(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?NP(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=EP,n}return s=t.child,t=s.sibling,n=Ba(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function XR(t,e){return e=w0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function xg(t,e,r,n){return n!==null&&$R(n),Ad(e,t.child,null,r),t=XR(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ode(t,e,r,n,i,s,o){if(r)return e.flags&256?(e.flags&=-257,n=vx(Error(re(422))),xg(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=w0({mode:"visible",children:n.children},i,0,null),s=ac(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Ad(e,t.child,null,o),e.child.memoizedState=NP(o),e.memoizedState=EP,s);if(!(e.mode&1))return xg(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(re(419)),n=vx(s,n,void 0),xg(t,e,o,n)}if(a=(o&t.childLanes)!==0,Yn||a){if(n=Lr,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ro(t,i),fs(n,t,i,-1))}return nM(),n=vx(Error(re(421))),xg(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=bde.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,mi=$a(i.nextSibling),gi=e,Bt=!0,ss=null,t!==null&&(Ai[Di++]=fo,Ai[Di++]=po,Ai[Di++]=wc,fo=t.id,po=t.overflow,wc=e),e=XR(e,n.children),e.flags|=4096,e)}function l4(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),vP(t.return,e,r)}function bx(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function _ee(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Sn(t,e,n.children,r),n=Wt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&l4(t,r,e);else if(t.tag===19)l4(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Rt(Wt,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Fy(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),bx(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Fy(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}bx(e,!0,r,null,s);break;case"together":bx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ny(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Mo(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),_c|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(re(153));if(e.child!==null){for(t=e.child,r=Ba(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Ba(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function ade(t,e,r){switch(e.tag){case 3:wee(e),Md();break;case 5:YZ(e);break;case 1:Jn(e.type)&&Iy(e);break;case 4:VR(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Rt(Ay,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Rt(Wt,Wt.current&1),e.flags|=128,null):r&e.child.childLanes?See(t,e,r):(Rt(Wt,Wt.current&1),t=Mo(t,e,r),t!==null?t.sibling:null);Rt(Wt,Wt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return _ee(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Rt(Wt,Wt.current),n)break;return null;case 22:case 23:return e.lanes=0,bee(t,e,r)}return Mo(t,e,r)}var Eee,kP,Nee,kee;Eee=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};kP=function(){};Nee=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,ql($s.current);var s=null;switch(r){case"input":i=GO(t,i),n=GO(t,n),s=[];break;case"select":i=Gt({},i,{value:void 0}),n=Gt({},n,{value:void 0}),s=[];break;case"textarea":i=XO(t,i),n=XO(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Oy)}ZO(r,n);var o;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Jf.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var l=n[u];if(a=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Jf.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Mt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};kee=function(t,e,r,n){r!==n&&(e.flags|=4)};function ef(t,e){if(!Bt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function cn(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function lde(t,e,r){var n=e.pendingProps;switch(DR(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(e),null;case 1:return Jn(e.type)&&Py(),cn(e),null;case 3:return n=e.stateNode,Dd(),Ft(Xn),Ft(gn),UR(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(vg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ss!==null&&(MP(ss),ss=null))),kP(t,e),cn(e),null;case 5:WR(e);var i=ql(up.current);if(r=e.type,t!==null&&e.stateNode!=null)Nee(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(re(166));return cn(e),null}if(t=ql($s.current),vg(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Ps]=e,n[lp]=s,t=(e.mode&1)!==0,r){case"dialog":Mt("cancel",n),Mt("close",n);break;case"iframe":case"object":case"embed":Mt("load",n);break;case"video":case"audio":for(i=0;i<vf.length;i++)Mt(vf[i],n);break;case"source":Mt("error",n);break;case"img":case"image":case"link":Mt("error",n),Mt("load",n);break;case"details":Mt("toggle",n);break;case"input":y$(n,s),Mt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Mt("invalid",n);break;case"textarea":b$(n,s),Mt("invalid",n)}ZO(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&yg(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&yg(n.textContent,a,t),i=["children",""+a]):Jf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Mt("scroll",n)}switch(r){case"input":cg(n),v$(n,s,!0);break;case"textarea":cg(n),x$(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Oy)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=eZ(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Ps]=e,t[lp]=n,Eee(t,e,!1,!1),e.stateNode=t;e:{switch(o=eP(r,n),r){case"dialog":Mt("cancel",t),Mt("close",t),i=n;break;case"iframe":case"object":case"embed":Mt("load",t),i=n;break;case"video":case"audio":for(i=0;i<vf.length;i++)Mt(vf[i],t);i=n;break;case"source":Mt("error",t),i=n;break;case"img":case"image":case"link":Mt("error",t),Mt("load",t),i=n;break;case"details":Mt("toggle",t),i=n;break;case"input":y$(t,n),i=GO(t,n),Mt("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Gt({},n,{value:void 0}),Mt("invalid",t);break;case"textarea":b$(t,n),i=XO(t,n),Mt("invalid",t);break;default:i=n}ZO(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?nZ(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&tZ(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Zf(t,l):typeof l=="number"&&Zf(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Jf.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Mt("scroll",t):l!=null&&wR(t,s,l,o))}switch(r){case"input":cg(t),v$(t,n,!1);break;case"textarea":cg(t),x$(t);break;case"option":n.value!=null&&t.setAttribute("value",""+tl(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?rd(t,!!n.multiple,s,!1):n.defaultValue!=null&&rd(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Oy)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return cn(e),null;case 6:if(t&&e.stateNode!=null)kee(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(re(166));if(r=ql(up.current),ql($s.current),vg(e)){if(n=e.stateNode,r=e.memoizedProps,n[Ps]=e,(s=n.nodeValue!==r)&&(t=gi,t!==null))switch(t.tag){case 3:yg(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&yg(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ps]=e,e.stateNode=n}return cn(e),null;case 13:if(Ft(Wt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Bt&&mi!==null&&e.mode&1&&!(e.flags&128))WZ(),Md(),e.flags|=98560,s=!1;else if(s=vg(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(re(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(re(317));s[Ps]=e}else Md(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;cn(e),s=!1}else ss!==null&&(MP(ss),ss=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Wt.current&1?Pr===0&&(Pr=3):nM())),e.updateQueue!==null&&(e.flags|=4),cn(e),null);case 4:return Dd(),kP(t,e),t===null&&op(e.stateNode.containerInfo),cn(e),null;case 10:return LR(e.type._context),cn(e),null;case 17:return Jn(e.type)&&Py(),cn(e),null;case 19:if(Ft(Wt),s=e.memoizedState,s===null)return cn(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)ef(s,!1);else{if(Pr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Fy(t),o!==null){for(e.flags|=128,ef(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Rt(Wt,Wt.current&1|2),e.child}t=t.sibling}s.tail!==null&&dr()>Fd&&(e.flags|=128,n=!0,ef(s,!1),e.lanes=4194304)}else{if(!n)if(t=Fy(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),ef(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Bt)return cn(e),null}else 2*dr()-s.renderingStartTime>Fd&&r!==1073741824&&(e.flags|=128,n=!0,ef(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=dr(),e.sibling=null,r=Wt.current,Rt(Wt,n?r&1|2:r&1),e):(cn(e),null);case 22:case 23:return rM(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?di&1073741824&&(cn(e),e.subtreeFlags&6&&(e.flags|=8192)):cn(e),null;case 24:return null;case 25:return null}throw Error(re(156,e.tag))}function cde(t,e){switch(DR(e),e.tag){case 1:return Jn(e.type)&&Py(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Dd(),Ft(Xn),Ft(gn),UR(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return WR(e),null;case 13:if(Ft(Wt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(re(340));Md()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ft(Wt),null;case 4:return Dd(),null;case 10:return LR(e.type._context),null;case 22:case 23:return rM(),null;case 24:return null;default:return null}}var wg=!1,fn=!1,ude=typeof WeakSet=="function"?WeakSet:Set,we=null;function Hu(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){rr(t,e,n)}else r.current=null}function CP(t,e,r){try{r()}catch(n){rr(t,e,n)}}var c4=!1;function dde(t,e){if(uP=Cy,t=PZ(),MR(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==r||i!==0&&h.nodeType!==3||(a=o+i),h!==s||n!==0&&h.nodeType!==3||(l=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===r&&++u===i&&(a=o),f===s&&++d===n&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(dP={focusedElem:t,selectionRange:r},Cy=!1,we=e;we!==null;)if(e=we,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,we=t;else for(;we!==null;){e=we;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,v=m.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:ts(e.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(x){rr(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,we=t;break}we=e.return}return m=c4,c4=!1,m}function If(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&CP(e,r,s)}i=i.next}while(i!==n)}}function b0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function TP(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Cee(t){var e=t.alternate;e!==null&&(t.alternate=null,Cee(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ps],delete e[lp],delete e[pP],delete e[Kue],delete e[Gue])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Tee(t){return t.tag===5||t.tag===3||t.tag===4}function u4(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Tee(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jP(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Oy));else if(n!==4&&(t=t.child,t!==null))for(jP(t,e,r),t=t.sibling;t!==null;)jP(t,e,r),t=t.sibling}function OP(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(OP(t,e,r),t=t.sibling;t!==null;)OP(t,e,r),t=t.sibling}var Jr=null,is=!1;function Qo(t,e,r){for(r=r.child;r!==null;)jee(t,e,r),r=r.sibling}function jee(t,e,r){if(Ds&&typeof Ds.onCommitFiberUnmount=="function")try{Ds.onCommitFiberUnmount(d0,r)}catch{}switch(r.tag){case 5:fn||Hu(r,e);case 6:var n=Jr,i=is;Jr=null,Qo(t,e,r),Jr=n,is=i,Jr!==null&&(is?(t=Jr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Jr.removeChild(r.stateNode));break;case 18:Jr!==null&&(is?(t=Jr,r=r.stateNode,t.nodeType===8?hx(t.parentNode,r):t.nodeType===1&&hx(t,r),np(t)):hx(Jr,r.stateNode));break;case 4:n=Jr,i=is,Jr=r.stateNode.containerInfo,is=!0,Qo(t,e,r),Jr=n,is=i;break;case 0:case 11:case 14:case 15:if(!fn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&CP(r,e,o),i=i.next}while(i!==n)}Qo(t,e,r);break;case 1:if(!fn&&(Hu(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){rr(r,e,a)}Qo(t,e,r);break;case 21:Qo(t,e,r);break;case 22:r.mode&1?(fn=(n=fn)||r.memoizedState!==null,Qo(t,e,r),fn=n):Qo(t,e,r);break;default:Qo(t,e,r)}}function d4(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new ude),e.forEach(function(n){var i=xde.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Zi(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Jr=a.stateNode,is=!1;break e;case 3:Jr=a.stateNode.containerInfo,is=!0;break e;case 4:Jr=a.stateNode.containerInfo,is=!0;break e}a=a.return}if(Jr===null)throw Error(re(160));jee(s,o,i),Jr=null,is=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){rr(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Oee(e,t),e=e.sibling}function Oee(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zi(e,t),ws(t),n&4){try{If(3,t,t.return),b0(3,t)}catch(g){rr(t,t.return,g)}try{If(5,t,t.return)}catch(g){rr(t,t.return,g)}}break;case 1:Zi(e,t),ws(t),n&512&&r!==null&&Hu(r,r.return);break;case 5:if(Zi(e,t),ws(t),n&512&&r!==null&&Hu(r,r.return),t.flags&32){var i=t.stateNode;try{Zf(i,"")}catch(g){rr(t,t.return,g)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&JJ(i,s),eP(a,o);var u=eP(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?nZ(i,h):d==="dangerouslySetInnerHTML"?tZ(i,h):d==="children"?Zf(i,h):wR(i,d,h,u)}switch(a){case"input":YO(i,s);break;case"textarea":ZJ(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?rd(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?rd(i,!!s.multiple,s.defaultValue,!0):rd(i,!!s.multiple,s.multiple?[]:"",!1))}i[lp]=s}catch(g){rr(t,t.return,g)}}break;case 6:if(Zi(e,t),ws(t),n&4){if(t.stateNode===null)throw Error(re(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){rr(t,t.return,g)}}break;case 3:if(Zi(e,t),ws(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{np(e.containerInfo)}catch(g){rr(t,t.return,g)}break;case 4:Zi(e,t),ws(t);break;case 13:Zi(e,t),ws(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(eM=dr())),n&4&&d4(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(fn=(u=fn)||d,Zi(e,t),fn=u):Zi(e,t),ws(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(we=t,d=t.child;d!==null;){for(h=we=d;we!==null;){switch(f=we,p=f.child,f.tag){case 0:case 11:case 14:case 15:If(4,f,f.return);break;case 1:Hu(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){rr(n,r,g)}}break;case 5:Hu(f,f.return);break;case 22:if(f.memoizedState!==null){f4(h);continue}}p!==null?(p.return=f,we=p):f4(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=rZ("display",o))}catch(g){rr(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){rr(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Zi(e,t),ws(t),n&4&&d4(t);break;case 21:break;default:Zi(e,t),ws(t)}}function ws(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Tee(r)){var n=r;break e}r=r.return}throw Error(re(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Zf(i,""),n.flags&=-33);var s=u4(t);OP(t,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=u4(t);jP(t,a,o);break;default:throw Error(re(161))}}catch(l){rr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function hde(t,e,r){we=t,Pee(t)}function Pee(t,e,r){for(var n=(t.mode&1)!==0;we!==null;){var i=we,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||wg;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||fn;a=wg;var u=fn;if(wg=o,(fn=l)&&!u)for(we=i;we!==null;)o=we,l=o.child,o.tag===22&&o.memoizedState!==null?p4(i):l!==null?(l.return=o,we=l):p4(i);for(;s!==null;)we=s,Pee(s),s=s.sibling;we=i,wg=a,fn=u}h4(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,we=s):h4(t)}}function h4(t){for(;we!==null;){var e=we;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:fn||b0(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!fn)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:ts(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Q$(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Q$(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&np(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}fn||e.flags&512&&TP(e)}catch(f){rr(e,e.return,f)}}if(e===t){we=null;break}if(r=e.sibling,r!==null){r.return=e.return,we=r;break}we=e.return}}function f4(t){for(;we!==null;){var e=we;if(e===t){we=null;break}var r=e.sibling;if(r!==null){r.return=e.return,we=r;break}we=e.return}}function p4(t){for(;we!==null;){var e=we;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{b0(4,e)}catch(l){rr(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){rr(e,i,l)}}var s=e.return;try{TP(e)}catch(l){rr(e,s,l)}break;case 5:var o=e.return;try{TP(e)}catch(l){rr(e,o,l)}}}catch(l){rr(e,e.return,l)}if(e===t){we=null;break}var a=e.sibling;if(a!==null){a.return=e.return,we=a;break}we=e.return}}var fde=Math.ceil,By=Fo.ReactCurrentDispatcher,JR=Fo.ReactCurrentOwner,Bi=Fo.ReactCurrentBatchConfig,ft=0,Lr=null,gr=null,rn=0,di=0,Ku=dl(0),Pr=0,pp=null,_c=0,x0=0,ZR=0,Rf=null,Hn=null,eM=0,Fd=1/0,so=null,zy=!1,PP=null,qa=null,Sg=!1,Ta=null,Vy=0,Mf=0,IP=null,iy=-1,sy=0;function On(){return ft&6?dr():iy!==-1?iy:iy=dr()}function La(t){return t.mode&1?ft&2&&rn!==0?rn&-rn:Que.transition!==null?(sy===0&&(sy=mZ()),sy):(t=wt,t!==0||(t=window.event,t=t===void 0?16:SZ(t.type)),t):1}function fs(t,e,r,n){if(50<Mf)throw Mf=0,IP=null,Error(re(185));em(t,r,n),(!(ft&2)||t!==Lr)&&(t===Lr&&(!(ft&2)&&(x0|=r),Pr===4&&fa(t,rn)),Zn(t,n),r===1&&ft===0&&!(e.mode&1)&&(Fd=dr()+500,g0&&hl()))}function Zn(t,e){var r=t.callbackNode;Qce(t,e);var n=ky(t,t===Lr?rn:0);if(n===0)r!==null&&_$(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&_$(r),e===1)t.tag===0?Yue(m4.bind(null,t)):BZ(m4.bind(null,t)),Uue(function(){!(ft&6)&&hl()}),r=null;else{switch(gZ(n)){case 1:r=kR;break;case 4:r=fZ;break;case 16:r=Ny;break;case 536870912:r=pZ;break;default:r=Ny}r=qee(r,Iee.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Iee(t,e){if(iy=-1,sy=0,ft&6)throw Error(re(327));var r=t.callbackNode;if(ad()&&t.callbackNode!==r)return null;var n=ky(t,t===Lr?rn:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Wy(t,n);else{e=n;var i=ft;ft|=2;var s=Mee();(Lr!==t||rn!==e)&&(so=null,Fd=dr()+500,oc(t,e));do try{gde();break}catch(a){Ree(t,a)}while(!0);qR(),By.current=s,ft=i,gr!==null?e=0:(Lr=null,rn=0,e=Pr)}if(e!==0){if(e===2&&(i=sP(t),i!==0&&(n=i,e=RP(t,i))),e===1)throw r=pp,oc(t,0),fa(t,n),Zn(t,dr()),r;if(e===6)fa(t,n);else{if(i=t.current.alternate,!(n&30)&&!pde(i)&&(e=Wy(t,n),e===2&&(s=sP(t),s!==0&&(n=s,e=RP(t,s))),e===1))throw r=pp,oc(t,0),fa(t,n),Zn(t,dr()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(re(345));case 2:Ml(t,Hn,so);break;case 3:if(fa(t,n),(n&130023424)===n&&(e=eM+500-dr(),10<e)){if(ky(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){On(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=fP(Ml.bind(null,t,Hn,so),e);break}Ml(t,Hn,so);break;case 4:if(fa(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-hs(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=dr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*fde(n/1960))-n,10<n){t.timeoutHandle=fP(Ml.bind(null,t,Hn,so),n);break}Ml(t,Hn,so);break;case 5:Ml(t,Hn,so);break;default:throw Error(re(329))}}}return Zn(t,dr()),t.callbackNode===r?Iee.bind(null,t):null}function RP(t,e){var r=Rf;return t.current.memoizedState.isDehydrated&&(oc(t,e).flags|=256),t=Wy(t,e),t!==2&&(e=Hn,Hn=r,e!==null&&MP(e)),t}function MP(t){Hn===null?Hn=t:Hn.push.apply(Hn,t)}function pde(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!ps(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fa(t,e){for(e&=~ZR,e&=~x0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-hs(e),n=1<<r;t[r]=-1,e&=~n}}function m4(t){if(ft&6)throw Error(re(327));ad();var e=ky(t,0);if(!(e&1))return Zn(t,dr()),null;var r=Wy(t,e);if(t.tag!==0&&r===2){var n=sP(t);n!==0&&(e=n,r=RP(t,n))}if(r===1)throw r=pp,oc(t,0),fa(t,e),Zn(t,dr()),r;if(r===6)throw Error(re(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ml(t,Hn,so),Zn(t,dr()),null}function tM(t,e){var r=ft;ft|=1;try{return t(e)}finally{ft=r,ft===0&&(Fd=dr()+500,g0&&hl())}}function Ec(t){Ta!==null&&Ta.tag===0&&!(ft&6)&&ad();var e=ft;ft|=1;var r=Bi.transition,n=wt;try{if(Bi.transition=null,wt=1,t)return t()}finally{wt=n,Bi.transition=r,ft=e,!(ft&6)&&hl()}}function rM(){di=Ku.current,Ft(Ku)}function oc(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Wue(r)),gr!==null)for(r=gr.return;r!==null;){var n=r;switch(DR(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Py();break;case 3:Dd(),Ft(Xn),Ft(gn),UR();break;case 5:WR(n);break;case 4:Dd();break;case 13:Ft(Wt);break;case 19:Ft(Wt);break;case 10:LR(n.type._context);break;case 22:case 23:rM()}r=r.return}if(Lr=t,gr=t=Ba(t.current,null),rn=di=e,Pr=0,pp=null,ZR=x0=_c=0,Hn=Rf=null,Fl!==null){for(e=0;e<Fl.length;e++)if(r=Fl[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}Fl=null}return t}function Ree(t,e){do{var r=gr;try{if(qR(),ty.current=Ly,qy){for(var n=Ht.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}qy=!1}if(Sc=0,$r=Or=Ht=null,Pf=!1,dp=0,JR.current=null,r===null||r.return===null){Pr=1,pp=e,gr=null;break}e:{var s=t,o=r.return,a=r,l=e;if(e=rn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=r4(o);if(p!==null){p.flags&=-257,n4(p,o,a,s,e),p.mode&1&&t4(s,u,e),e=p,l=u;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){t4(s,u,e),nM();break e}l=Error(re(426))}}else if(Bt&&a.mode&1){var v=r4(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),n4(v,o,a,s,e),$R($d(l,a));break e}}s=l=$d(l,a),Pr!==4&&(Pr=2),Rf===null?Rf=[s]:Rf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=gee(s,l,e);Y$(s,y);break e;case 1:a=l;var b=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(qa===null||!qa.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=yee(s,a,e);Y$(s,x);break e}}s=s.return}while(s!==null)}Dee(r)}catch(S){e=S,gr===r&&r!==null&&(gr=r=r.return);continue}break}while(!0)}function Mee(){var t=By.current;return By.current=Ly,t===null?Ly:t}function nM(){(Pr===0||Pr===3||Pr===2)&&(Pr=4),Lr===null||!(_c&268435455)&&!(x0&268435455)||fa(Lr,rn)}function Wy(t,e){var r=ft;ft|=2;var n=Mee();(Lr!==t||rn!==e)&&(so=null,oc(t,e));do try{mde();break}catch(i){Ree(t,i)}while(!0);if(qR(),ft=r,By.current=n,gr!==null)throw Error(re(261));return Lr=null,rn=0,Pr}function mde(){for(;gr!==null;)Aee(gr)}function gde(){for(;gr!==null&&!Bce();)Aee(gr)}function Aee(t){var e=Fee(t.alternate,t,di);t.memoizedProps=t.pendingProps,e===null?Dee(t):gr=e,JR.current=null}function Dee(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=cde(r,e),r!==null){r.flags&=32767,gr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Pr=6,gr=null;return}}else if(r=lde(r,e,di),r!==null){gr=r;return}if(e=e.sibling,e!==null){gr=e;return}gr=e=t}while(e!==null);Pr===0&&(Pr=5)}function Ml(t,e,r){var n=wt,i=Bi.transition;try{Bi.transition=null,wt=1,yde(t,e,r,n)}finally{Bi.transition=i,wt=n}return null}function yde(t,e,r,n){do ad();while(Ta!==null);if(ft&6)throw Error(re(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(re(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(Xce(t,s),t===Lr&&(gr=Lr=null,rn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Sg||(Sg=!0,qee(Ny,function(){return ad(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Bi.transition,Bi.transition=null;var o=wt;wt=1;var a=ft;ft|=4,JR.current=null,dde(t,r),Oee(r,t),$ue(dP),Cy=!!uP,dP=uP=null,t.current=r,hde(r),zce(),ft=a,wt=o,Bi.transition=s}else t.current=r;if(Sg&&(Sg=!1,Ta=t,Vy=i),s=t.pendingLanes,s===0&&(qa=null),Uce(r.stateNode),Zn(t,dr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(zy)throw zy=!1,t=PP,PP=null,t;return Vy&1&&t.tag!==0&&ad(),s=t.pendingLanes,s&1?t===IP?Mf++:(Mf=0,IP=t):Mf=0,hl(),null}function ad(){if(Ta!==null){var t=gZ(Vy),e=Bi.transition,r=wt;try{if(Bi.transition=null,wt=16>t?16:t,Ta===null)var n=!1;else{if(t=Ta,Ta=null,Vy=0,ft&6)throw Error(re(331));var i=ft;for(ft|=4,we=t.current;we!==null;){var s=we,o=s.child;if(we.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(we=u;we!==null;){var d=we;switch(d.tag){case 0:case 11:case 15:If(8,d,s)}var h=d.child;if(h!==null)h.return=d,we=h;else for(;we!==null;){d=we;var f=d.sibling,p=d.return;if(Cee(d),d===u){we=null;break}if(f!==null){f.return=p,we=f;break}we=p}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}we=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,we=o;else e:for(;we!==null;){if(s=we,s.flags&2048)switch(s.tag){case 0:case 11:case 15:If(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,we=y;break e}we=s.return}}var b=t.current;for(we=b;we!==null;){o=we;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,we=w;else e:for(o=b;we!==null;){if(a=we,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:b0(9,a)}}catch(S){rr(a,a.return,S)}if(a===o){we=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,we=x;break e}we=a.return}}if(ft=i,hl(),Ds&&typeof Ds.onPostCommitFiberRoot=="function")try{Ds.onPostCommitFiberRoot(d0,t)}catch{}n=!0}return n}finally{wt=r,Bi.transition=e}}return!1}function g4(t,e,r){e=$d(r,e),e=gee(t,e,1),t=Fa(t,e,1),e=On(),t!==null&&(em(t,1,e),Zn(t,e))}function rr(t,e,r){if(t.tag===3)g4(t,t,r);else for(;e!==null;){if(e.tag===3){g4(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(qa===null||!qa.has(n))){t=$d(r,t),t=yee(e,t,1),e=Fa(e,t,1),t=On(),e!==null&&(em(e,1,t),Zn(e,t));break}}e=e.return}}function vde(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=On(),t.pingedLanes|=t.suspendedLanes&r,Lr===t&&(rn&r)===r&&(Pr===4||Pr===3&&(rn&130023424)===rn&&500>dr()-eM?oc(t,0):ZR|=r),Zn(t,e)}function $ee(t,e){e===0&&(t.mode&1?(e=hg,hg<<=1,!(hg&130023424)&&(hg=4194304)):e=1);var r=On();t=Ro(t,e),t!==null&&(em(t,e,r),Zn(t,r))}function bde(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),$ee(t,r)}function xde(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(re(314))}n!==null&&n.delete(e),$ee(t,r)}var Fee;Fee=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xn.current)Yn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Yn=!1,ade(t,e,r);Yn=!!(t.flags&131072)}else Yn=!1,Bt&&e.flags&1048576&&zZ(e,My,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;ny(t,e),t=e.pendingProps;var i=Rd(e,gn.current);od(e,r),i=KR(null,e,n,t,i,r);var s=GR();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jn(n)?(s=!0,Iy(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,zR(e),i.updater=v0,e.stateNode=i,i._reactInternals=e,xP(e,n,t,r),e=_P(null,e,n,!0,s,r)):(e.tag=0,Bt&&s&&AR(e),Sn(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(ny(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=Sde(n),t=ts(n,t),i){case 0:e=SP(null,e,n,t,r);break e;case 1:e=o4(null,e,n,t,r);break e;case 11:e=i4(null,e,n,t,r);break e;case 14:e=s4(null,e,n,ts(n.type,t),r);break e}throw Error(re(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ts(n,i),SP(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ts(n,i),o4(t,e,n,i,r);case 3:e:{if(wee(e),t===null)throw Error(re(387));n=e.pendingProps,s=e.memoizedState,i=s.element,GZ(t,e),$y(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=$d(Error(re(423)),e),e=a4(t,e,n,r,i);break e}else if(n!==i){i=$d(Error(re(424)),e),e=a4(t,e,n,r,i);break e}else for(mi=$a(e.stateNode.containerInfo.firstChild),gi=e,Bt=!0,ss=null,r=HZ(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Md(),n===i){e=Mo(t,e,r);break e}Sn(t,e,n,r)}e=e.child}return e;case 5:return YZ(e),t===null&&yP(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,hP(n,i)?o=null:s!==null&&hP(n,s)&&(e.flags|=32),xee(t,e),Sn(t,e,o,r),e.child;case 6:return t===null&&yP(e),null;case 13:return See(t,e,r);case 4:return VR(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Ad(e,null,n,r):Sn(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ts(n,i),i4(t,e,n,i,r);case 7:return Sn(t,e,e.pendingProps,r),e.child;case 8:return Sn(t,e,e.pendingProps.children,r),e.child;case 12:return Sn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Rt(Ay,n._currentValue),n._currentValue=o,s!==null)if(ps(s.value,o)){if(s.children===i.children&&!Xn.current){e=Mo(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=vo(-1,r&-r),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),vP(s.return,r,e),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(re(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),vP(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Sn(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,od(e,r),i=Hi(i),n=n(i),e.flags|=1,Sn(t,e,n,r),e.child;case 14:return n=e.type,i=ts(n,e.pendingProps),i=ts(n.type,i),s4(t,e,n,i,r);case 15:return vee(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ts(n,i),ny(t,e),e.tag=1,Jn(n)?(t=!0,Iy(e)):t=!1,od(e,r),mee(e,n,i),xP(e,n,i,r),_P(null,e,n,!0,t,r);case 19:return _ee(t,e,r);case 22:return bee(t,e,r)}throw Error(re(156,e.tag))};function qee(t,e){return hZ(t,e)}function wde(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Li(t,e,r,n){return new wde(t,e,r,n)}function iM(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Sde(t){if(typeof t=="function")return iM(t)?1:0;if(t!=null){if(t=t.$$typeof,t===_R)return 11;if(t===ER)return 14}return 2}function Ba(t,e){var r=t.alternate;return r===null?(r=Li(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function oy(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")iM(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case $u:return ac(r.children,i,s,e);case SR:o=8,i|=8;break;case WO:return t=Li(12,r,e,i|2),t.elementType=WO,t.lanes=s,t;case UO:return t=Li(13,r,e,i),t.elementType=UO,t.lanes=s,t;case HO:return t=Li(19,r,e,i),t.elementType=HO,t.lanes=s,t;case YJ:return w0(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case KJ:o=10;break e;case GJ:o=9;break e;case _R:o=11;break e;case ER:o=14;break e;case ia:o=16,n=null;break e}throw Error(re(130,t==null?t:typeof t,""))}return e=Li(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function ac(t,e,r,n){return t=Li(7,t,n,e),t.lanes=r,t}function w0(t,e,r,n){return t=Li(22,t,n,e),t.elementType=YJ,t.lanes=r,t.stateNode={isHidden:!1},t}function xx(t,e,r){return t=Li(6,t,null,e),t.lanes=r,t}function wx(t,e,r){return e=Li(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function _de(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tx(0),this.expirationTimes=tx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tx(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function sM(t,e,r,n,i,s,o,a,l){return t=new _de(t,e,r,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Li(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},zR(s),t}function Ede(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Du,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Lee(t){if(!t)return rl;t=t._reactInternals;e:{if(Hc(t)!==t||t.tag!==1)throw Error(re(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(re(171))}if(t.tag===1){var r=t.type;if(Jn(r))return LZ(t,r,e)}return e}function Bee(t,e,r,n,i,s,o,a,l){return t=sM(r,n,!0,t,i,s,o,a,l),t.context=Lee(null),r=t.current,n=On(),i=La(r),s=vo(n,i),s.callback=e??null,Fa(r,s,i),t.current.lanes=i,em(t,i,n),Zn(t,n),t}function S0(t,e,r,n){var i=e.current,s=On(),o=La(i);return r=Lee(r),e.context===null?e.context=r:e.pendingContext=r,e=vo(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Fa(i,e,o),t!==null&&(fs(t,i,o,s),ey(t,i,o)),o}function Uy(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function y4(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function oM(t,e){y4(t,e),(t=t.alternate)&&y4(t,e)}function Nde(){return null}var zee=typeof reportError=="function"?reportError:function(t){console.error(t)};function aM(t){this._internalRoot=t}_0.prototype.render=aM.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(re(409));S0(t,e,null,null)};_0.prototype.unmount=aM.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ec(function(){S0(null,t,null,null)}),e[Io]=null}};function _0(t){this._internalRoot=t}_0.prototype.unstable_scheduleHydration=function(t){if(t){var e=bZ();t={blockedOn:null,target:t,priority:e};for(var r=0;r<ha.length&&e!==0&&e<ha[r].priority;r++);ha.splice(r,0,t),r===0&&wZ(t)}};function lM(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function E0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function v4(){}function kde(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=Uy(o);s.call(u)}}var o=Bee(e,n,t,0,null,!1,!1,"",v4);return t._reactRootContainer=o,t[Io]=o.current,op(t.nodeType===8?t.parentNode:t),Ec(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var u=Uy(l);a.call(u)}}var l=sM(t,0,!1,null,null,!1,!1,"",v4);return t._reactRootContainer=l,t[Io]=l.current,op(t.nodeType===8?t.parentNode:t),Ec(function(){S0(e,l,r,n)}),l}function N0(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Uy(o);a.call(l)}}S0(e,o,t,i)}else o=kde(r,e,t,i,n);return Uy(o)}yZ=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=yf(e.pendingLanes);r!==0&&(CR(e,r|1),Zn(e,dr()),!(ft&6)&&(Fd=dr()+500,hl()))}break;case 13:Ec(function(){var n=Ro(t,1);if(n!==null){var i=On();fs(n,t,1,i)}}),oM(t,1)}};TR=function(t){if(t.tag===13){var e=Ro(t,134217728);if(e!==null){var r=On();fs(e,t,134217728,r)}oM(t,134217728)}};vZ=function(t){if(t.tag===13){var e=La(t),r=Ro(t,e);if(r!==null){var n=On();fs(r,t,e,n)}oM(t,e)}};bZ=function(){return wt};xZ=function(t,e){var r=wt;try{return wt=t,e()}finally{wt=r}};rP=function(t,e,r){switch(e){case"input":if(YO(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=m0(n);if(!i)throw Error(re(90));XJ(n),YO(n,i)}}}break;case"textarea":ZJ(t,r);break;case"select":e=r.value,e!=null&&rd(t,!!r.multiple,e,!1)}};oZ=tM;aZ=Ec;var Cde={usingClientEntryPoint:!1,Events:[rm,Bu,m0,iZ,sZ,tM]},tf={findFiberByHostInstance:$l,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Tde={bundleType:tf.bundleType,version:tf.version,rendererPackageName:tf.rendererPackageName,rendererConfig:tf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=uZ(t),t===null?null:t.stateNode},findFiberByHostInstance:tf.findFiberByHostInstance||Nde,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _g=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_g.isDisabled&&_g.supportsFiber)try{d0=_g.inject(Tde),Ds=_g}catch{}}bi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cde;bi.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lM(e))throw Error(re(200));return Ede(t,e,null,r)};bi.createRoot=function(t,e){if(!lM(t))throw Error(re(299));var r=!1,n="",i=zee;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=sM(t,1,!1,null,null,r,!1,n,i),t[Io]=e.current,op(t.nodeType===8?t.parentNode:t),new aM(e)};bi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(re(188)):(t=Object.keys(t).join(","),Error(re(268,t)));return t=uZ(e),t=t===null?null:t.stateNode,t};bi.flushSync=function(t){return Ec(t)};bi.hydrate=function(t,e,r){if(!E0(e))throw Error(re(200));return N0(null,t,e,!0,r)};bi.hydrateRoot=function(t,e,r){if(!lM(t))throw Error(re(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=zee;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=Bee(e,null,t,1,r??null,i,!1,s,o),t[Io]=e.current,op(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new _0(e)};bi.render=function(t,e,r){if(!E0(e))throw Error(re(200));return N0(null,t,e,!1,r)};bi.unmountComponentAtNode=function(t){if(!E0(t))throw Error(re(40));return t._reactRootContainer?(Ec(function(){N0(null,null,t,!1,function(){t._reactRootContainer=null,t[Io]=null})}),!0):!1};bi.unstable_batchedUpdates=tM;bi.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!E0(r))throw Error(re(200));if(t==null||t._reactInternals===void 0)throw Error(re(38));return N0(t,e,r,!1,n)};bi.version="18.3.1-next-f1338f8080-20240426";function Vee(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vee)}catch(t){console.error(t)}}Vee(),VJ.exports=bi;var Wee=VJ.exports;const jde=PJ(Wee);var b4=Wee;zO.createRoot=b4.createRoot,zO.hydrateRoot=b4.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mp(){return mp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mp.apply(this,arguments)}var ja;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ja||(ja={}));const x4="popstate";function Ode(t){t===void 0&&(t={});function e(n,i){let{pathname:s,search:o,hash:a}=n.location;return AP("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Hy(i)}return Ide(e,r,null,t)}function Kt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function cM(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Pde(){return Math.random().toString(36).substr(2,8)}function w4(t,e){return{usr:t.state,key:t.key,idx:e}}function AP(t,e,r,n){return r===void 0&&(r=null),mp({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ch(e):e,{state:r,key:e&&e.key||n||Pde()})}function Hy(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function ch(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function Ide(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,a=ja.Pop,l=null,u=d();u==null&&(u=0,o.replaceState(mp({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=ja.Pop;let v=d(),y=v==null?null:v-u;u=v,l&&l({action:a,location:g.location,delta:y})}function f(v,y){a=ja.Push;let b=AP(g.location,v,y);u=d()+1;let w=w4(b,u),x=g.createHref(b);try{o.pushState(w,"",x)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(x)}s&&l&&l({action:a,location:g.location,delta:1})}function p(v,y){a=ja.Replace;let b=AP(g.location,v,y);u=d();let w=w4(b,u),x=g.createHref(b);o.replaceState(w,"",x),s&&l&&l({action:a,location:g.location,delta:0})}function m(v){let y=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof v=="string"?v:Hy(v);return b=b.replace(/ $/,"%20"),Kt(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let g={get action(){return a},get location(){return t(i,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(x4,h),l=v,()=>{i.removeEventListener(x4,h),l=null}},createHref(v){return e(i,v)},createURL:m,encodeLocation(v){let y=m(v);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:p,go(v){return o.go(v)}};return g}var S4;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(S4||(S4={}));function Rde(t,e,r){return r===void 0&&(r="/"),Mde(t,e,r)}function Mde(t,e,r,n){let i=typeof e=="string"?ch(e):e,s=qd(i.pathname||"/",r);if(s==null)return null;let o=Uee(t);Ade(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=Hde(s);a=Wde(o[l],u)}return a}function Uee(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Kt(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=za([n,l.relativePath]),d=r.concat(l);s.children&&s.children.length>0&&(Kt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Uee(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:zde(u,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of Hee(s.path))i(s,o,l)}),e}function Hee(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let o=Hee(n.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Ade(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:Vde(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Dde=/^:[\w-]+$/,$de=3,Fde=2,qde=1,Lde=10,Bde=-2,_4=t=>t==="*";function zde(t,e){let r=t.split("/"),n=r.length;return r.some(_4)&&(n+=Bde),e&&(n+=Fde),r.filter(i=>!_4(i)).reduce((i,s)=>i+(Dde.test(s)?$de:s===""?qde:Lde),n)}function Vde(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function Wde(t,e,r){let{routesMeta:n}=t,i={},s="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],u=a===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=DP({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),f=l.route;if(!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:za([s,h.pathname]),pathnameBase:Xde(za([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=za([s,h.pathnameBase]))}return o}function DP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Ude(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let g=a[h]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const m=a[h];return p&&!m?u[f]=void 0:u[f]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function Ude(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),cM(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function Hde(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cM(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function qd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const Kde=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gde=t=>Kde.test(t);function Yde(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?ch(t):t,s;if(r)if(Gde(r))s=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),cM(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?s=E4(r.substring(1),"/"):s=E4(r,e)}else s=e;return{pathname:s,search:Jde(n),hash:Zde(i)}}function E4(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Sx(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Qde(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function uM(t,e){let r=Qde(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function dM(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=ch(t):(i=mp({},t),Kt(!i.pathname||!i.pathname.includes("?"),Sx("?","pathname","search",i)),Kt(!i.pathname||!i.pathname.includes("#"),Sx("#","pathname","hash",i)),Kt(!i.search||!i.search.includes("#"),Sx("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=r;else{let h=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=Yde(i,a),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const za=t=>t.join("/").replace(/\/\/+/g,"/"),Xde=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Jde=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Zde=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ehe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Kee=["post","put","patch","delete"];new Set(Kee);const the=["get",...Kee];new Set(the);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gp(){return gp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gp.apply(this,arguments)}const k0=k.createContext(null),Gee=k.createContext(null),qo=k.createContext(null),C0=k.createContext(null),Lo=k.createContext({outlet:null,matches:[],isDataRoute:!1}),Yee=k.createContext(null);function rhe(t,e){let{relative:r}=e===void 0?{}:e;uh()||Kt(!1);let{basename:n,navigator:i}=k.useContext(qo),{hash:s,pathname:o,search:a}=T0(t,{relative:r}),l=o;return n!=="/"&&(l=o==="/"?n:za([n,o])),i.createHref({pathname:l,search:a,hash:s})}function uh(){return k.useContext(C0)!=null}function Bo(){return uh()||Kt(!1),k.useContext(C0).location}function Qee(t){k.useContext(qo).static||k.useLayoutEffect(t)}function Fn(){let{isDataRoute:t}=k.useContext(Lo);return t?mhe():nhe()}function nhe(){uh()||Kt(!1);let t=k.useContext(k0),{basename:e,future:r,navigator:n}=k.useContext(qo),{matches:i}=k.useContext(Lo),{pathname:s}=Bo(),o=JSON.stringify(uM(i,r.v7_relativeSplatPath)),a=k.useRef(!1);return Qee(()=>{a.current=!0}),k.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){n.go(u);return}let h=dM(u,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:za([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,o,s,t])}function dh(){let{matches:t}=k.useContext(Lo),e=t[t.length-1];return e?e.params:{}}function T0(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=k.useContext(qo),{matches:i}=k.useContext(Lo),{pathname:s}=Bo(),o=JSON.stringify(uM(i,n.v7_relativeSplatPath));return k.useMemo(()=>dM(t,JSON.parse(o),s,r==="path"),[t,o,s,r])}function ihe(t,e){return she(t,e)}function she(t,e,r,n){uh()||Kt(!1);let{navigator:i}=k.useContext(qo),{matches:s}=k.useContext(Lo),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Bo(),d;if(e){var h;let v=typeof e=="string"?ch(e):e;l==="/"||(h=v.pathname)!=null&&h.startsWith(l)||Kt(!1),d=v}else d=u;let f=d.pathname||"/",p=f;if(l!=="/"){let v=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let m=Rde(t,{pathname:p}),g=uhe(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:za([l,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:za([l,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,r,n);return e&&g?k.createElement(C0.Provider,{value:{location:gp({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ja.Pop}},g):g}function ohe(){let t=phe(),e=ehe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),r?k.createElement("pre",{style:i},r):null,null)}const ahe=k.createElement(ohe,null);class lhe extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?k.createElement(Lo.Provider,{value:this.props.routeContext},k.createElement(Yee.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function che(t){let{routeContext:e,match:r,children:n}=t,i=k.useContext(k0);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),k.createElement(Lo.Provider,{value:e},n)}function uhe(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if(!r)return null;if(r.errors)t=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,a=(i=r)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Kt(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:p}=r,m=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||m){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,m=!1,g=null,v=null;r&&(p=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||ahe,l&&(u<0&&f===0?(ghe("route-fallback"),m=!0,v=null):u===f&&(m=!0,v=h.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,f+1)),b=()=>{let w;return p?w=g:m?w=v:h.route.Component?w=k.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,k.createElement(che,{match:h,routeContext:{outlet:d,matches:y,isDataRoute:r!=null},children:w})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?k.createElement(lhe,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var Xee=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Xee||{}),Jee=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Jee||{});function dhe(t){let e=k.useContext(k0);return e||Kt(!1),e}function hhe(t){let e=k.useContext(Gee);return e||Kt(!1),e}function fhe(t){let e=k.useContext(Lo);return e||Kt(!1),e}function Zee(t){let e=fhe(),r=e.matches[e.matches.length-1];return r.route.id||Kt(!1),r.route.id}function phe(){var t;let e=k.useContext(Yee),r=hhe(),n=Zee();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function mhe(){let{router:t}=dhe(Xee.UseNavigateStable),e=Zee(Jee.UseNavigateStable),r=k.useRef(!1);return Qee(()=>{r.current=!0}),k.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,gp({fromRouteId:e},s)))},[t,e])}const N4={};function ghe(t,e,r){N4[t]||(N4[t]=!0)}function yhe(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function ete(t){let{to:e,replace:r,state:n,relative:i}=t;uh()||Kt(!1);let{future:s,static:o}=k.useContext(qo),{matches:a}=k.useContext(Lo),{pathname:l}=Bo(),u=Fn(),d=dM(e,uM(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(d);return k.useEffect(()=>u(JSON.parse(h),{replace:r,state:n,relative:i}),[u,h,i,r,n]),null}function jr(t){Kt(!1)}function vhe(t){let{basename:e="/",children:r=null,location:n,navigationType:i=ja.Pop,navigator:s,static:o=!1,future:a}=t;uh()&&Kt(!1);let l=e.replace(/^\/*/,"/"),u=k.useMemo(()=>({basename:l,navigator:s,static:o,future:gp({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof n=="string"&&(n=ch(n));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:m="default"}=n,g=k.useMemo(()=>{let v=qd(d,l);return v==null?null:{location:{pathname:v,search:h,hash:f,state:p,key:m},navigationType:i}},[l,d,h,f,p,m,i]);return g==null?null:k.createElement(qo.Provider,{value:u},k.createElement(C0.Provider,{children:r,value:g}))}function k4(t){let{children:e,location:r}=t;return ihe($P(e),r)}new Promise(()=>{});function $P(t,e){e===void 0&&(e=[]);let r=[];return k.Children.forEach(t,(n,i)=>{if(!k.isValidElement(n))return;let s=[...e,i];if(n.type===k.Fragment){r.push.apply(r,$P(n.props.children,s));return}n.type!==jr&&Kt(!1),!n.props.index||!n.props.children||Kt(!1);let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=$P(n.props.children,s)),r.push(o)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ky(){return Ky=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ky.apply(this,arguments)}function tte(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function bhe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function xhe(t,e){return t.button===0&&(!e||e==="_self")&&!bhe(t)}function FP(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function whe(t,e){let r=FP(t);return e&&e.forEach((n,i)=>{r.has(i)||e.getAll(i).forEach(s=>{r.append(i,s)})}),r}const She=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],_he=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Ehe="6";try{window.__reactRouterVersion=Ehe}catch{}const Nhe=k.createContext({isTransitioning:!1}),khe="startTransition",C4=vce[khe];function Che(t){let{basename:e,children:r,future:n,window:i}=t,s=k.useRef();s.current==null&&(s.current=Ode({window:i,v5Compat:!0}));let o=s.current,[a,l]=k.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=k.useCallback(h=>{u&&C4?C4(()=>l(h)):l(h)},[l,u]);return k.useLayoutEffect(()=>o.listen(d),[o,d]),k.useEffect(()=>yhe(n),[n]),k.createElement(vhe,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:o,future:n})}const The=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",jhe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Le=k.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:d,viewTransition:h}=e,f=tte(e,She),{basename:p}=k.useContext(qo),m,g=!1;if(typeof u=="string"&&jhe.test(u)&&(m=u,The))try{let w=new URL(window.location.href),x=u.startsWith("//")?new URL(w.protocol+u):new URL(u),S=qd(x.pathname,p);x.origin===w.origin&&S!=null?u=S+x.search+x.hash:g=!0}catch{}let v=rhe(u,{relative:i}),y=Ihe(u,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:h});function b(w){n&&n(w),w.defaultPrevented||y(w)}return k.createElement("a",Ky({},f,{href:m||v,onClick:g||s?n:b,ref:r,target:l}))}),Ohe=k.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:u,children:d}=e,h=tte(e,_he),f=T0(l,{relative:h.relative}),p=Bo(),m=k.useContext(Gee),{navigator:g,basename:v}=k.useContext(qo),y=m!=null&&Mhe(f)&&u===!0,b=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,w=p.pathname,x=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;i||(w=w.toLowerCase(),x=x?x.toLowerCase():null,b=b.toLowerCase()),x&&v&&(x=qd(x,v)||x);const S=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let _=w===b||!o&&w.startsWith(b)&&w.charAt(S)==="/",E=x!=null&&(x===b||!o&&x.startsWith(b)&&x.charAt(b.length)==="/"),N={isActive:_,isPending:E,isTransitioning:y},T=_?n:void 0,j;typeof s=="function"?j=s(N):j=[s,_?"active":null,E?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let P=typeof a=="function"?a(N):a;return k.createElement(Le,Ky({},h,{"aria-current":T,className:j,ref:r,style:P,to:l,viewTransition:u}),typeof d=="function"?d(N):d)});var qP;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(qP||(qP={}));var T4;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(T4||(T4={}));function Phe(t){let e=k.useContext(k0);return e||Kt(!1),e}function Ihe(t,e){let{target:r,replace:n,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Fn(),u=Bo(),d=T0(t,{relative:o});return k.useCallback(h=>{if(xhe(h,r)){h.preventDefault();let f=n!==void 0?n:Hy(u)===Hy(d);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,d,n,i,r,t,s,o,a])}function Rhe(t){let e=k.useRef(FP(t)),r=k.useRef(!1),n=Bo(),i=k.useMemo(()=>whe(n.search,r.current?null:e.current),[n.search]),s=Fn(),o=k.useCallback((a,l)=>{const u=FP(typeof a=="function"?a(i):a);r.current=!0,s("?"+u,l)},[s,i]);return[i,o]}function Mhe(t,e){e===void 0&&(e={});let r=k.useContext(Nhe);r==null&&Kt(!1);let{basename:n}=Phe(qP.useViewTransitionState),i=T0(t,{relative:e.relative});if(!r.isTransitioning)return!1;let s=qd(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=qd(r.nextLocation.pathname,n)||r.nextLocation.pathname;return DP(i.pathname,o)!=null||DP(i.pathname,s)!=null}var Kc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ahe={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},ya,pR,bJ,Dhe=(bJ=class{constructor(){xe(this,ya,Ahe);xe(this,pR,!1)}setTimeoutProvider(t){le(this,ya,t)}setTimeout(t,e){return R(this,ya).setTimeout(t,e)}clearTimeout(t){R(this,ya).clearTimeout(t)}setInterval(t,e){return R(this,ya).setInterval(t,e)}clearInterval(t){R(this,ya).clearInterval(t)}},ya=new WeakMap,pR=new WeakMap,bJ),Ll=new Dhe;function $he(t){setTimeout(t,0)}var Nc=typeof window>"u"||"Deno"in globalThis;function hn(){}function Fhe(t,e){return typeof t=="function"?t(e):t}function LP(t){return typeof t=="number"&&t>=0&&t!==1/0}function rte(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Va(t,e){return typeof t=="function"?t(e):t}function Ii(t,e){return typeof t=="function"?t(e):t}function j4(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(n){if(e.queryHash!==hM(o,e.options))return!1}else if(!yp(e.queryKey,o))return!1}if(r!=="all"){const l=e.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function O4(t,e){const{exact:r,status:n,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(r){if(kc(e.options.mutationKey)!==kc(s))return!1}else if(!yp(e.options.mutationKey,s))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function hM(t,e){return((e==null?void 0:e.queryKeyHashFn)||kc)(t)}function kc(t){return JSON.stringify(t,(e,r)=>BP(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function yp(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>yp(t[r],e[r])):!1}var qhe=Object.prototype.hasOwnProperty;function fM(t,e){if(t===e)return t;const r=P4(t)&&P4(e);if(!r&&!(BP(t)&&BP(e)))return e;const i=(r?t:Object.keys(t)).length,s=r?e:Object.keys(e),o=s.length,a=r?new Array(o):{};let l=0;for(let u=0;u<o;u++){const d=r?u:s[u],h=t[d],f=e[d];if(h===f){a[d]=h,(r?u<i:qhe.call(t,d))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[d]=f;continue}const p=fM(h,f);a[d]=p,p===h&&l++}return i===o&&l===i?t:a}function vp(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function P4(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function BP(t){if(!I4(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!I4(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function I4(t){return Object.prototype.toString.call(t)==="[object Object]"}function Lhe(t){return new Promise(e=>{Ll.setTimeout(e,t)})}function zP(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?fM(t,e):e}function Bhe(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function zhe(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var pM=Symbol();function nte(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===pM?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function mM(t,e){return typeof t=="function"?t(...e):!!t}function Vhe(t,e,r){let n=!1,i;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(i??(i=e()),n||(n=!0,i.aborted?r():i.addEventListener("abort",r,{once:!0})),i)}),t}var Xl,va,yd,xJ,Whe=(xJ=class extends Kc{constructor(){super();xe(this,Xl);xe(this,va);xe(this,yd);le(this,yd,e=>{if(!Nc&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){R(this,va)||this.setEventListener(R(this,yd))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,va))==null||e.call(this),le(this,va,void 0))}setEventListener(e){var r;le(this,yd,e),(r=R(this,va))==null||r.call(this),le(this,va,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){R(this,Xl)!==e&&(le(this,Xl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof R(this,Xl)=="boolean"?R(this,Xl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Xl=new WeakMap,va=new WeakMap,yd=new WeakMap,xJ),gM=new Whe;function VP(){let t,e;const r=new Promise((i,s)=>{t=i,e=s});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),t(i)},r.reject=i=>{n({status:"rejected",reason:i}),e(i)},r}var Uhe=$he;function Hhe(){let t=[],e=0,r=a=>{a()},n=a=>{a()},i=Uhe;const s=a=>{e?t.push(a):i(()=>{r(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{n(()=>{a.forEach(l=>{r(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{r=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{i=a}}}var sr=Hhe(),vd,ba,bd,wJ,Khe=(wJ=class extends Kc{constructor(){super();xe(this,vd,!0);xe(this,ba);xe(this,bd);le(this,bd,e=>{if(!Nc&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){R(this,ba)||this.setEventListener(R(this,bd))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,ba))==null||e.call(this),le(this,ba,void 0))}setEventListener(e){var r;le(this,bd,e),(r=R(this,ba))==null||r.call(this),le(this,ba,e(this.setOnline.bind(this)))}setOnline(e){R(this,vd)!==e&&(le(this,vd,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return R(this,vd)}},vd=new WeakMap,ba=new WeakMap,bd=new WeakMap,wJ),Gy=new Khe;function Ghe(t){return Math.min(1e3*2**t,3e4)}function ite(t){return(t??"online")==="online"?Gy.isOnline():!0}var WP=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function ste(t){let e=!1,r=0,n;const i=VP(),s=()=>i.status!=="pending",o=g=>{var v;if(!s()){const y=new WP(g);f(y),(v=t.onCancel)==null||v.call(t,y)}},a=()=>{e=!0},l=()=>{e=!1},u=()=>gM.isFocused()&&(t.networkMode==="always"||Gy.isOnline())&&t.canRun(),d=()=>ite(t.networkMode)&&t.canRun(),h=g=>{s()||(n==null||n(),i.resolve(g))},f=g=>{s()||(n==null||n(),i.reject(g))},p=()=>new Promise(g=>{var v;n=y=>{(s()||u())&&g(y)},(v=t.onPause)==null||v.call(t)}).then(()=>{var g;n=void 0,s()||(g=t.onContinue)==null||g.call(t)}),m=()=>{if(s())return;let g;const v=r===0?t.initialPromise:void 0;try{g=v??t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(h).catch(y=>{var _;if(s())return;const b=t.retry??(Nc?0:3),w=t.retryDelay??Ghe,x=typeof w=="function"?w(r,y):w,S=b===!0||typeof b=="number"&&r<b||typeof b=="function"&&b(r,y);if(e||!S){f(y);return}r++,(_=t.onFail)==null||_.call(t,r,y),Lhe(x).then(()=>u()?void 0:p()).then(()=>{e?f(y):m()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(n==null||n(),i),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?m():p().then(m),i)}}var Jl,SJ,ote=(SJ=class{constructor(){xe(this,Jl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),LP(this.gcTime)&&le(this,Jl,Ll.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Nc?1/0:5*60*1e3))}clearGcTimeout(){R(this,Jl)&&(Ll.clearTimeout(R(this,Jl)),le(this,Jl,void 0))}},Jl=new WeakMap,SJ),Zl,xd,Oi,ec,Dr,Up,tc,rs,no,_J,Yhe=(_J=class extends ote{constructor(e){super();xe(this,rs);xe(this,Zl);xe(this,xd);xe(this,Oi);xe(this,ec);xe(this,Dr);xe(this,Up);xe(this,tc);le(this,tc,!1),le(this,Up,e.defaultOptions),this.setOptions(e.options),this.observers=[],le(this,ec,e.client),le(this,Oi,R(this,ec).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,le(this,Zl,M4(this.options)),this.state=e.state??R(this,Zl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=R(this,Dr))==null?void 0:e.promise}setOptions(e){if(this.options={...R(this,Up),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=M4(this.options);r.data!==void 0&&(this.setState(R4(r.data,r.dataUpdatedAt)),le(this,Zl,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&R(this,Oi).remove(this)}setData(e,r){const n=zP(this.state.data,e,this.options);return $e(this,rs,no).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){$e(this,rs,no).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,i;const r=(n=R(this,Dr))==null?void 0:n.promise;return(i=R(this,Dr))==null||i.cancel(e),r?r.then(hn).catch(hn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(R(this,Zl))}isActive(){return this.observers.some(e=>Ii(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===pM||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Va(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!rte(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=R(this,Dr))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=R(this,Dr))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),R(this,Oi).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(R(this,Dr)&&(R(this,tc)?R(this,Dr).cancel({revert:!0}):R(this,Dr).cancelRetry()),this.scheduleGc()),R(this,Oi).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||$e(this,rs,no).call(this,{type:"invalidate"})}async fetch(e,r){var l,u,d,h,f,p,m,g,v,y,b,w;if(this.state.fetchStatus!=="idle"&&((l=R(this,Dr))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(R(this,Dr))return R(this,Dr).continueRetry(),R(this,Dr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const x=this.observers.find(S=>S.options.queryFn);x&&this.setOptions(x.options)}const n=new AbortController,i=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(le(this,tc,!0),n.signal)})},s=()=>{const x=nte(this.options,r),_=(()=>{const E={client:R(this,ec),queryKey:this.queryKey,meta:this.meta};return i(E),E})();return le(this,tc,!1),this.options.persister?this.options.persister(x,_,this):x(_)},a=(()=>{const x={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:R(this,ec),state:this.state,fetchFn:s};return i(x),x})();(u=this.options.behavior)==null||u.onFetch(a,this),le(this,xd,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&$e(this,rs,no).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta}),le(this,Dr,ste({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,onCancel:x=>{x instanceof WP&&x.revert&&this.setState({...R(this,xd),fetchStatus:"idle"}),n.abort()},onFail:(x,S)=>{$e(this,rs,no).call(this,{type:"failed",failureCount:x,error:S})},onPause:()=>{$e(this,rs,no).call(this,{type:"pause"})},onContinue:()=>{$e(this,rs,no).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const x=await R(this,Dr).start();if(x===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(x),(p=(f=R(this,Oi).config).onSuccess)==null||p.call(f,x,this),(g=(m=R(this,Oi).config).onSettled)==null||g.call(m,x,this.state.error,this),x}catch(x){if(x instanceof WP){if(x.silent)return R(this,Dr).promise;if(x.revert){if(this.state.data===void 0)throw x;return this.state.data}}throw $e(this,rs,no).call(this,{type:"error",error:x}),(y=(v=R(this,Oi).config).onError)==null||y.call(v,x,this),(w=(b=R(this,Oi).config).onSettled)==null||w.call(b,this.state.data,x,this),x}finally{this.scheduleGc()}}},Zl=new WeakMap,xd=new WeakMap,Oi=new WeakMap,ec=new WeakMap,Dr=new WeakMap,Up=new WeakMap,tc=new WeakMap,rs=new WeakSet,no=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...ate(n.data,this.options),fetchMeta:e.meta??null};case"success":const i={...n,...R4(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return le(this,xd,e.manual?i:void 0),i;case"error":const s=e.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),sr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),R(this,Oi).notify({query:this,type:"updated",action:e})})},_J);function ate(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ite(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function R4(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function M4(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var zn,lt,Hp,xn,rc,wd,lo,xa,Kp,Sd,_d,nc,ic,wa,Ed,yt,bf,UP,HP,KP,GP,YP,QP,XP,lte,EJ,yM=(EJ=class extends Kc{constructor(e,r){super();xe(this,yt);xe(this,zn);xe(this,lt);xe(this,Hp);xe(this,xn);xe(this,rc);xe(this,wd);xe(this,lo);xe(this,xa);xe(this,Kp);xe(this,Sd);xe(this,_d);xe(this,nc);xe(this,ic);xe(this,wa);xe(this,Ed,new Set);this.options=r,le(this,zn,e),le(this,xa,null),le(this,lo,VP()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(R(this,lt).addObserver(this),A4(R(this,lt),this.options)?$e(this,yt,bf).call(this):this.updateResult(),$e(this,yt,GP).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return JP(R(this,lt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return JP(R(this,lt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,$e(this,yt,YP).call(this),$e(this,yt,QP).call(this),R(this,lt).removeObserver(this)}setOptions(e){const r=this.options,n=R(this,lt);if(this.options=R(this,zn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ii(this.options.enabled,R(this,lt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");$e(this,yt,XP).call(this),R(this,lt).setOptions(this.options),r._defaulted&&!vp(this.options,r)&&R(this,zn).getQueryCache().notify({type:"observerOptionsUpdated",query:R(this,lt),observer:this});const i=this.hasListeners();i&&D4(R(this,lt),n,this.options,r)&&$e(this,yt,bf).call(this),this.updateResult(),i&&(R(this,lt)!==n||Ii(this.options.enabled,R(this,lt))!==Ii(r.enabled,R(this,lt))||Va(this.options.staleTime,R(this,lt))!==Va(r.staleTime,R(this,lt)))&&$e(this,yt,UP).call(this);const s=$e(this,yt,HP).call(this);i&&(R(this,lt)!==n||Ii(this.options.enabled,R(this,lt))!==Ii(r.enabled,R(this,lt))||s!==R(this,wa))&&$e(this,yt,KP).call(this,s)}getOptimisticResult(e){const r=R(this,zn).getQueryCache().build(R(this,zn),e),n=this.createResult(r,e);return Xhe(this,n)&&(le(this,xn,n),le(this,wd,this.options),le(this,rc,R(this,lt).state)),n}getCurrentResult(){return R(this,xn)}trackResult(e,r){return new Proxy(e,{get:(n,i)=>(this.trackProp(i),r==null||r(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&R(this,lo).status==="pending"&&R(this,lo).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,i))})}trackProp(e){R(this,Ed).add(e)}getCurrentQuery(){return R(this,lt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=R(this,zn).defaultQueryOptions(e),n=R(this,zn).getQueryCache().build(R(this,zn),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(e){return $e(this,yt,bf).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),R(this,xn)))}createResult(e,r){var T;const n=R(this,lt),i=this.options,s=R(this,xn),o=R(this,rc),a=R(this,wd),u=e!==n?e.state:R(this,Hp),{state:d}=e;let h={...d},f=!1,p;if(r._optimisticResults){const j=this.hasListeners(),P=!j&&A4(e,r),O=j&&D4(e,n,r,i);(P||O)&&(h={...h,...ate(d.data,e.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:m,errorUpdatedAt:g,status:v}=h;p=h.data;let y=!1;if(r.placeholderData!==void 0&&p===void 0&&v==="pending"){let j;s!=null&&s.isPlaceholderData&&r.placeholderData===(a==null?void 0:a.placeholderData)?(j=s.data,y=!0):j=typeof r.placeholderData=="function"?r.placeholderData((T=R(this,_d))==null?void 0:T.state.data,R(this,_d)):r.placeholderData,j!==void 0&&(v="success",p=zP(s==null?void 0:s.data,j,r),f=!0)}if(r.select&&p!==void 0&&!y)if(s&&p===(o==null?void 0:o.data)&&r.select===R(this,Kp))p=R(this,Sd);else try{le(this,Kp,r.select),p=r.select(p),p=zP(s==null?void 0:s.data,p,r),le(this,Sd,p),le(this,xa,null)}catch(j){le(this,xa,j)}R(this,xa)&&(m=R(this,xa),p=R(this,Sd),g=Date.now(),v="error");const b=h.fetchStatus==="fetching",w=v==="pending",x=v==="error",S=w&&b,_=p!==void 0,N={status:v,fetchStatus:h.fetchStatus,isPending:w,isSuccess:v==="success",isError:x,isInitialLoading:S,isLoading:S,data:p,dataUpdatedAt:h.dataUpdatedAt,error:m,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:b,isRefetching:b&&!w,isLoadingError:x&&!_,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:x&&_,isStale:vM(e,r),refetch:this.refetch,promise:R(this,lo),isEnabled:Ii(r.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const j=C=>{N.status==="error"?C.reject(N.error):N.data!==void 0&&C.resolve(N.data)},P=()=>{const C=le(this,lo,N.promise=VP());j(C)},O=R(this,lo);switch(O.status){case"pending":e.queryHash===n.queryHash&&j(O);break;case"fulfilled":(N.status==="error"||N.data!==O.value)&&P();break;case"rejected":(N.status!=="error"||N.error!==O.reason)&&P();break}}return N}updateResult(){const e=R(this,xn),r=this.createResult(R(this,lt),this.options);if(le(this,rc,R(this,lt).state),le(this,wd,this.options),R(this,rc).data!==void 0&&le(this,_d,R(this,lt)),vp(r,e))return;le(this,xn,r);const n=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!R(this,Ed).size)return!0;const o=new Set(s??R(this,Ed));return this.options.throwOnError&&o.add("error"),Object.keys(R(this,xn)).some(a=>{const l=a;return R(this,xn)[l]!==e[l]&&o.has(l)})};$e(this,yt,lte).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&$e(this,yt,GP).call(this)}},zn=new WeakMap,lt=new WeakMap,Hp=new WeakMap,xn=new WeakMap,rc=new WeakMap,wd=new WeakMap,lo=new WeakMap,xa=new WeakMap,Kp=new WeakMap,Sd=new WeakMap,_d=new WeakMap,nc=new WeakMap,ic=new WeakMap,wa=new WeakMap,Ed=new WeakMap,yt=new WeakSet,bf=function(e){$e(this,yt,XP).call(this);let r=R(this,lt).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(hn)),r},UP=function(){$e(this,yt,YP).call(this);const e=Va(this.options.staleTime,R(this,lt));if(Nc||R(this,xn).isStale||!LP(e))return;const n=rte(R(this,xn).dataUpdatedAt,e)+1;le(this,nc,Ll.setTimeout(()=>{R(this,xn).isStale||this.updateResult()},n))},HP=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(R(this,lt)):this.options.refetchInterval)??!1},KP=function(e){$e(this,yt,QP).call(this),le(this,wa,e),!(Nc||Ii(this.options.enabled,R(this,lt))===!1||!LP(R(this,wa))||R(this,wa)===0)&&le(this,ic,Ll.setInterval(()=>{(this.options.refetchIntervalInBackground||gM.isFocused())&&$e(this,yt,bf).call(this)},R(this,wa)))},GP=function(){$e(this,yt,UP).call(this),$e(this,yt,KP).call(this,$e(this,yt,HP).call(this))},YP=function(){R(this,nc)&&(Ll.clearTimeout(R(this,nc)),le(this,nc,void 0))},QP=function(){R(this,ic)&&(Ll.clearInterval(R(this,ic)),le(this,ic,void 0))},XP=function(){const e=R(this,zn).getQueryCache().build(R(this,zn),this.options);if(e===R(this,lt))return;const r=R(this,lt);le(this,lt,e),le(this,Hp,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},lte=function(e){sr.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(R(this,xn))}),R(this,zn).getQueryCache().notify({query:R(this,lt),type:"observerResultsUpdated"})})},EJ);function Qhe(t,e){return Ii(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function A4(t,e){return Qhe(t,e)||t.state.data!==void 0&&JP(t,e,e.refetchOnMount)}function JP(t,e,r){if(Ii(e.enabled,t)!==!1&&Va(e.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&vM(t,e)}return!1}function D4(t,e,r,n){return(t!==e||Ii(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&vM(t,r)}function vM(t,e){return Ii(e.enabled,t)!==!1&&t.isStaleByTime(Va(e.staleTime,t))}function Xhe(t,e){return!vp(t.getCurrentResult(),e)}function $4(t){return{onFetch:(e,r)=>{var d,h,f,p,m;const n=e.options,i=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,s=((p=e.state.data)==null?void 0:p.pages)||[],o=((m=e.state.data)==null?void 0:m.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let g=!1;const v=w=>{Vhe(w,()=>e.signal,()=>g=!0)},y=nte(e.options,e.fetchOptions),b=async(w,x,S)=>{if(g)return Promise.reject();if(x==null&&w.pages.length)return Promise.resolve(w);const E=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:x,direction:S?"backward":"forward",meta:e.options.meta};return v(P),P})(),N=await y(E),{maxPages:T}=e.options,j=S?zhe:Bhe;return{pages:j(w.pages,N,T),pageParams:j(w.pageParams,x,T)}};if(i&&s.length){const w=i==="backward",x=w?Jhe:F4,S={pages:s,pageParams:o},_=x(n,S);a=await b(S,_,w)}else{const w=t??s.length;do{const x=l===0?o[0]??n.initialPageParam:F4(n,a);if(l>0&&x==null)break;a=await b(a,x),l++}while(l<w)}return a};e.options.persister?e.fetchFn=()=>{var g,v;return(v=(g=e.options).persister)==null?void 0:v.call(g,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=u}}}function F4(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function Jhe(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var Gp,Ts,wn,sc,js,ra,NJ,Zhe=(NJ=class extends ote{constructor(e){super();xe(this,js);xe(this,Gp);xe(this,Ts);xe(this,wn);xe(this,sc);le(this,Gp,e.client),this.mutationId=e.mutationId,le(this,wn,e.mutationCache),le(this,Ts,[]),this.state=e.state||cte(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){R(this,Ts).includes(e)||(R(this,Ts).push(e),this.clearGcTimeout(),R(this,wn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){le(this,Ts,R(this,Ts).filter(r=>r!==e)),this.scheduleGc(),R(this,wn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){R(this,Ts).length||(this.state.status==="pending"?this.scheduleGc():R(this,wn).remove(this))}continue(){var e;return((e=R(this,sc))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,l,u,d,h,f,p,m,g,v,y,b,w,x,S,_,E,N,T;const r=()=>{$e(this,js,ra).call(this,{type:"continue"})},n={client:R(this,Gp),meta:this.options.meta,mutationKey:this.options.mutationKey};le(this,sc,ste({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(j,P)=>{$e(this,js,ra).call(this,{type:"failed",failureCount:j,error:P})},onPause:()=>{$e(this,js,ra).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>R(this,wn).canRun(this)}));const i=this.state.status==="pending",s=!R(this,sc).canStart();try{if(i)r();else{$e(this,js,ra).call(this,{type:"pending",variables:e,isPaused:s}),await((a=(o=R(this,wn).config).onMutate)==null?void 0:a.call(o,e,this,n));const P=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,e,n));P!==this.state.context&&$e(this,js,ra).call(this,{type:"pending",context:P,variables:e,isPaused:s})}const j=await R(this,sc).start();return await((h=(d=R(this,wn).config).onSuccess)==null?void 0:h.call(d,j,e,this.state.context,this,n)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,j,e,this.state.context,n)),await((g=(m=R(this,wn).config).onSettled)==null?void 0:g.call(m,j,null,this.state.variables,this.state.context,this,n)),await((y=(v=this.options).onSettled)==null?void 0:y.call(v,j,null,e,this.state.context,n)),$e(this,js,ra).call(this,{type:"success",data:j}),j}catch(j){try{await((w=(b=R(this,wn).config).onError)==null?void 0:w.call(b,j,e,this.state.context,this,n))}catch(P){Promise.reject(P)}try{await((S=(x=this.options).onError)==null?void 0:S.call(x,j,e,this.state.context,n))}catch(P){Promise.reject(P)}try{await((E=(_=R(this,wn).config).onSettled)==null?void 0:E.call(_,void 0,j,this.state.variables,this.state.context,this,n))}catch(P){Promise.reject(P)}try{await((T=(N=this.options).onSettled)==null?void 0:T.call(N,void 0,j,e,this.state.context,n))}catch(P){Promise.reject(P)}throw $e(this,js,ra).call(this,{type:"error",error:j}),j}finally{R(this,wn).runNext(this)}}},Gp=new WeakMap,Ts=new WeakMap,wn=new WeakMap,sc=new WeakMap,js=new WeakSet,ra=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),sr.batch(()=>{R(this,Ts).forEach(n=>{n.onMutationUpdate(e)}),R(this,wn).notify({mutation:this,type:"updated",action:e})})},NJ);function cte(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var co,ns,Yp,kJ,efe=(kJ=class extends Kc{constructor(e={}){super();xe(this,co);xe(this,ns);xe(this,Yp);this.config=e,le(this,co,new Set),le(this,ns,new Map),le(this,Yp,0)}build(e,r,n){const i=new Zhe({client:e,mutationCache:this,mutationId:++og(this,Yp)._,options:e.defaultMutationOptions(r),state:n});return this.add(i),i}add(e){R(this,co).add(e);const r=Eg(e);if(typeof r=="string"){const n=R(this,ns).get(r);n?n.push(e):R(this,ns).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(R(this,co).delete(e)){const r=Eg(e);if(typeof r=="string"){const n=R(this,ns).get(r);if(n)if(n.length>1){const i=n.indexOf(e);i!==-1&&n.splice(i,1)}else n[0]===e&&R(this,ns).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=Eg(e);if(typeof r=="string"){const n=R(this,ns).get(r),i=n==null?void 0:n.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var n;const r=Eg(e);if(typeof r=="string"){const i=(n=R(this,ns).get(r))==null?void 0:n.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){sr.batch(()=>{R(this,co).forEach(e=>{this.notify({type:"removed",mutation:e})}),R(this,co).clear(),R(this,ns).clear()})}getAll(){return Array.from(R(this,co))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>O4(r,n))}findAll(e={}){return this.getAll().filter(r=>O4(e,r))}notify(e){sr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return sr.batch(()=>Promise.all(e.map(r=>r.continue().catch(hn))))}},co=new WeakMap,ns=new WeakMap,Yp=new WeakMap,kJ);function Eg(t){var e;return(e=t.options.scope)==null?void 0:e.id}var uo,Sa,Vn,ho,Oo,ay,ZP,CJ,tfe=(CJ=class extends Kc{constructor(e,r){super();xe(this,Oo);xe(this,uo);xe(this,Sa);xe(this,Vn);xe(this,ho);le(this,uo,e),this.setOptions(r),this.bindMethods(),$e(this,Oo,ay).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var n;const r=this.options;this.options=R(this,uo).defaultMutationOptions(e),vp(this.options,r)||R(this,uo).getMutationCache().notify({type:"observerOptionsUpdated",mutation:R(this,Vn),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&kc(r.mutationKey)!==kc(this.options.mutationKey)?this.reset():((n=R(this,Vn))==null?void 0:n.state.status)==="pending"&&R(this,Vn).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=R(this,Vn))==null||e.removeObserver(this)}onMutationUpdate(e){$e(this,Oo,ay).call(this),$e(this,Oo,ZP).call(this,e)}getCurrentResult(){return R(this,Sa)}reset(){var e;(e=R(this,Vn))==null||e.removeObserver(this),le(this,Vn,void 0),$e(this,Oo,ay).call(this),$e(this,Oo,ZP).call(this)}mutate(e,r){var n;return le(this,ho,r),(n=R(this,Vn))==null||n.removeObserver(this),le(this,Vn,R(this,uo).getMutationCache().build(R(this,uo),this.options)),R(this,Vn).addObserver(this),R(this,Vn).execute(e)}},uo=new WeakMap,Sa=new WeakMap,Vn=new WeakMap,ho=new WeakMap,Oo=new WeakSet,ay=function(){var r;const e=((r=R(this,Vn))==null?void 0:r.state)??cte();le(this,Sa,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},ZP=function(e){sr.batch(()=>{var r,n,i,s,o,a,l,u;if(R(this,ho)&&this.hasListeners()){const d=R(this,Sa).variables,h=R(this,Sa).context,f={client:R(this,uo),meta:this.options.meta,mutationKey:this.options.mutationKey};if((e==null?void 0:e.type)==="success"){try{(n=(r=R(this,ho)).onSuccess)==null||n.call(r,e.data,d,h,f)}catch(p){Promise.reject(p)}try{(s=(i=R(this,ho)).onSettled)==null||s.call(i,e.data,null,d,h,f)}catch(p){Promise.reject(p)}}else if((e==null?void 0:e.type)==="error"){try{(a=(o=R(this,ho)).onError)==null||a.call(o,e.error,d,h,f)}catch(p){Promise.reject(p)}try{(u=(l=R(this,ho)).onSettled)==null||u.call(l,void 0,e.error,d,h,f)}catch(p){Promise.reject(p)}}}this.listeners.forEach(d=>{d(R(this,Sa))})})},CJ);function q4(t,e){const r=new Set(e);return t.filter(n=>!r.has(n))}function rfe(t,e,r){const n=t.slice(0);return n[e]=r,n}var Nd,ui,kd,Cd,Pi,_a,Qp,Xp,Jp,sn,eI,tI,rI,nI,iI,TJ,nfe=(TJ=class extends Kc{constructor(e,r,n){super();xe(this,sn);xe(this,Nd);xe(this,ui);xe(this,kd);xe(this,Cd);xe(this,Pi);xe(this,_a);xe(this,Qp);xe(this,Xp);xe(this,Jp,[]);le(this,Nd,e),le(this,Cd,n),le(this,kd,[]),le(this,Pi,[]),le(this,ui,[]),this.setQueries(r)}onSubscribe(){this.listeners.size===1&&R(this,Pi).forEach(e=>{e.subscribe(r=>{$e(this,sn,nI).call(this,e,r)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,R(this,Pi).forEach(e=>{e.destroy()})}setQueries(e,r){le(this,kd,e),le(this,Cd,r),sr.batch(()=>{const n=R(this,Pi),i=$e(this,sn,rI).call(this,R(this,kd));i.forEach(h=>h.observer.setOptions(h.defaultedQueryOptions));const s=i.map(h=>h.observer),o=s.map(h=>h.getCurrentResult()),a=n.length!==s.length,l=s.some((h,f)=>h!==n[f]),u=a||l,d=u?!0:o.some((h,f)=>{const p=R(this,ui)[f];return!p||!vp(h,p)});!u&&!d||(u&&(le(this,Jp,i),le(this,Pi,s)),le(this,ui,o),this.hasListeners()&&(u&&(q4(n,s).forEach(h=>{h.destroy()}),q4(s,n).forEach(h=>{h.subscribe(f=>{$e(this,sn,nI).call(this,h,f)})})),$e(this,sn,iI).call(this)))})}getCurrentResult(){return R(this,ui)}getQueries(){return R(this,Pi).map(e=>e.getCurrentQuery())}getObservers(){return R(this,Pi)}getOptimisticResult(e,r){const n=$e(this,sn,rI).call(this,e),i=n.map(s=>s.observer.getOptimisticResult(s.defaultedQueryOptions));return[i,s=>$e(this,sn,tI).call(this,s??i,r),()=>$e(this,sn,eI).call(this,i,n)]}},Nd=new WeakMap,ui=new WeakMap,kd=new WeakMap,Cd=new WeakMap,Pi=new WeakMap,_a=new WeakMap,Qp=new WeakMap,Xp=new WeakMap,Jp=new WeakMap,sn=new WeakSet,eI=function(e,r){return r.map((n,i)=>{const s=e[i];return n.defaultedQueryOptions.notifyOnChangeProps?s:n.observer.trackResult(s,o=>{r.forEach(a=>{a.observer.trackProp(o)})})})},tI=function(e,r){return r?((!R(this,_a)||R(this,ui)!==R(this,Xp)||r!==R(this,Qp))&&(le(this,Qp,r),le(this,Xp,R(this,ui)),le(this,_a,fM(R(this,_a),r(e)))),R(this,_a)):e},rI=function(e){const r=new Map;R(this,Pi).forEach(i=>{const s=i.options.queryHash;if(!s)return;const o=r.get(s);o?o.push(i):r.set(s,[i])});const n=[];return e.forEach(i=>{var l;const s=R(this,Nd).defaultQueryOptions(i),a=((l=r.get(s.queryHash))==null?void 0:l.shift())??new yM(R(this,Nd),s);n.push({defaultedQueryOptions:s,observer:a})}),n},nI=function(e,r){const n=R(this,Pi).indexOf(e);n!==-1&&(le(this,ui,rfe(R(this,ui),n,r)),$e(this,sn,iI).call(this))},iI=function(){var e;if(this.hasListeners()){const r=R(this,_a),n=$e(this,sn,eI).call(this,R(this,ui),R(this,Jp)),i=$e(this,sn,tI).call(this,n,(e=R(this,Cd))==null?void 0:e.combine);r!==i&&sr.batch(()=>{this.listeners.forEach(s=>{s(R(this,ui))})})}},TJ),Os,jJ,ife=(jJ=class extends Kc{constructor(e={}){super();xe(this,Os);this.config=e,le(this,Os,new Map)}build(e,r,n){const i=r.queryKey,s=r.queryHash??hM(i,r);let o=this.get(s);return o||(o=new Yhe({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){R(this,Os).has(e.queryHash)||(R(this,Os).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=R(this,Os).get(e.queryHash);r&&(e.destroy(),r===e&&R(this,Os).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){sr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return R(this,Os).get(e)}getAll(){return[...R(this,Os).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>j4(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>j4(e,n)):r}notify(e){sr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){sr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){sr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Os=new WeakMap,jJ),tr,Ea,Na,Td,jd,ka,Od,Pd,OJ,sfe=(OJ=class{constructor(t={}){xe(this,tr);xe(this,Ea);xe(this,Na);xe(this,Td);xe(this,jd);xe(this,ka);xe(this,Od);xe(this,Pd);le(this,tr,t.queryCache||new ife),le(this,Ea,t.mutationCache||new efe),le(this,Na,t.defaultOptions||{}),le(this,Td,new Map),le(this,jd,new Map),le(this,ka,0)}mount(){og(this,ka)._++,R(this,ka)===1&&(le(this,Od,gM.subscribe(async t=>{t&&(await this.resumePausedMutations(),R(this,tr).onFocus())})),le(this,Pd,Gy.subscribe(async t=>{t&&(await this.resumePausedMutations(),R(this,tr).onOnline())})))}unmount(){var t,e;og(this,ka)._--,R(this,ka)===0&&((t=R(this,Od))==null||t.call(this),le(this,Od,void 0),(e=R(this,Pd))==null||e.call(this),le(this,Pd,void 0))}isFetching(t){return R(this,tr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return R(this,Ea).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=R(this,tr).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=R(this,tr).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(Va(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return R(this,tr).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),i=R(this,tr).get(n.queryHash),s=i==null?void 0:i.state.data,o=Fhe(e,s);if(o!==void 0)return R(this,tr).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(t,e,r){return sr.batch(()=>R(this,tr).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=R(this,tr).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=R(this,tr);sr.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=R(this,tr);return sr.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=sr.batch(()=>R(this,tr).findAll(t).map(i=>i.cancel(r)));return Promise.all(n).then(hn).catch(hn)}invalidateQueries(t,e={}){return sr.batch(()=>(R(this,tr).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=sr.batch(()=>R(this,tr).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,r);return r.throwOnError||(s=s.catch(hn)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(hn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=R(this,tr).build(this,e);return r.isStaleByTime(Va(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(hn).catch(hn)}fetchInfiniteQuery(t){return t.behavior=$4(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(hn).catch(hn)}ensureInfiniteQueryData(t){return t.behavior=$4(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Gy.isOnline()?R(this,Ea).resumePausedMutations():Promise.resolve()}getQueryCache(){return R(this,tr)}getMutationCache(){return R(this,Ea)}getDefaultOptions(){return R(this,Na)}setDefaultOptions(t){le(this,Na,t)}setQueryDefaults(t,e){R(this,Td).set(kc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...R(this,Td).values()],r={};return e.forEach(n=>{yp(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){R(this,jd).set(kc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...R(this,jd).values()],r={};return e.forEach(n=>{yp(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...R(this,Na).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=hM(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===pM&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...R(this,Na).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){R(this,tr).clear(),R(this,Ea).clear()}},tr=new WeakMap,Ea=new WeakMap,Na=new WeakMap,Td=new WeakMap,jd=new WeakMap,ka=new WeakMap,Od=new WeakMap,Pd=new WeakMap,OJ),ute=k.createContext(void 0),rt=t=>{const e=k.useContext(ute);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},ofe=({client:t,children:e})=>(k.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),c.jsx(ute.Provider,{value:t,children:e})),dte=k.createContext(!1),hte=()=>k.useContext(dte);dte.Provider;function afe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var lfe=k.createContext(afe()),fte=()=>k.useContext(lfe),pte=(t,e,r)=>{const n=r!=null&&r.state.error&&typeof t.throwOnError=="function"?mM(t.throwOnError,[r.state.error,r]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||n)&&(e.isReset()||(t.retryOnMount=!1))},mte=t=>{k.useEffect(()=>{t.clearReset()},[t])},gte=({result:t,errorResetBoundary:e,throwOnError:r,query:n,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&(i&&t.data===void 0||mM(r,[t.error,n])),yte=t=>{if(t.suspense){const r=i=>i==="static"?i:Math.max(i??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...i)=>r(n(...i)):r(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},vte=(t,e)=>t.isLoading&&t.isFetching&&!e,sI=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Yy=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function ly({queries:t,...e},r){const n=rt(),i=hte(),s=fte(),o=k.useMemo(()=>t.map(g=>{const v=n.defaultQueryOptions(g);return v._optimisticResults=i?"isRestoring":"optimistic",v}),[t,n,i]);o.forEach(g=>{yte(g);const v=n.getQueryCache().get(g.queryHash);pte(g,s,v)}),mte(s);const[a]=k.useState(()=>new nfe(n,o,e)),[l,u,d]=a.getOptimisticResult(o,e.combine),h=!i&&e.subscribed!==!1;k.useSyncExternalStore(k.useCallback(g=>h?a.subscribe(sr.batchCalls(g)):hn,[a,h]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),k.useEffect(()=>{a.setQueries(o,e)},[o,e,a]);const p=l.some((g,v)=>sI(o[v],g))?l.flatMap((g,v)=>{const y=o[v];if(y){const b=new yM(n,y);if(sI(y,g))return Yy(y,b,s);vte(g,i)&&Yy(y,b,s)}return[]}):[];if(p.length>0)throw Promise.all(p);const m=l.find((g,v)=>{const y=o[v];return y&&gte({result:g,errorResetBoundary:s,throwOnError:y.throwOnError,query:n.getQueryCache().get(y.queryHash),suspense:y.suspense})});if(m!=null&&m.error)throw m.error;return u(d())}function cfe(t,e,r){var f,p,m,g;const n=hte(),i=fte(),s=rt(),o=s.defaultQueryOptions(t);(p=(f=s.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||p.call(f,o);const a=s.getQueryCache().get(o.queryHash);o._optimisticResults=n?"isRestoring":"optimistic",yte(o),pte(o,i,a),mte(i);const l=!s.getQueryCache().get(o.queryHash),[u]=k.useState(()=>new e(s,o)),d=u.getOptimisticResult(o),h=!n&&t.subscribed!==!1;if(k.useSyncExternalStore(k.useCallback(v=>{const y=h?u.subscribe(sr.batchCalls(v)):hn;return u.updateResult(),y},[u,h]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),k.useEffect(()=>{u.setOptions(o)},[o,u]),sI(o,d))throw Yy(o,u,i);if(gte({result:d,errorResetBoundary:i,throwOnError:o.throwOnError,query:a,suspense:o.suspense}))throw d.error;if((g=(m=s.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||g.call(m,o,d),o.experimental_prefetchInRender&&!Nc&&vte(d,n)){const v=l?Yy(o,u,i):a==null?void 0:a.promise;v==null||v.catch(hn).finally(()=>{u.updateResult()})}return o.notifyOnChangeProps?d:u.trackResult(d)}function st(t,e){return cfe(t,yM)}function We(t,e){const r=rt(),[n]=k.useState(()=>new tfe(r,t));k.useEffect(()=>{n.setOptions(t)},[n,t]);const i=k.useSyncExternalStore(k.useCallback(o=>n.subscribe(sr.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),s=k.useCallback((o,a)=>{n.mutate(o,a).catch(hn)},[n]);if(i.error&&mM(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}function bM(){const t=window.prmConfig||{};return k.useMemo(()=>({isLoggedIn:t.isLoggedIn||!1,userId:t.userId||null,loginUrl:t.loginUrl||"/wp-login.php",logoutUrl:t.logoutUrl||"/wp-login.php?action=logout",isLoading:!1}),[t.isLoggedIn,t.userId,t.loginUrl,t.logoutUrl])}function bte(t,e){return function(){return t.apply(e,arguments)}}const{toString:ufe}=Object.prototype,{getPrototypeOf:xM}=Object,{iterator:j0,toStringTag:xte}=Symbol,O0=(t=>e=>{const r=ufe.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ys=t=>(t=t.toLowerCase(),e=>O0(e)===t),P0=t=>e=>typeof e===t,{isArray:hh}=Array,Ld=P0("undefined");function im(t){return t!==null&&!Ld(t)&&t.constructor!==null&&!Ld(t.constructor)&&ei(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const wte=ys("ArrayBuffer");function dfe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&wte(t.buffer),e}const hfe=P0("string"),ei=P0("function"),Ste=P0("number"),sm=t=>t!==null&&typeof t=="object",ffe=t=>t===!0||t===!1,cy=t=>{if(O0(t)!=="object")return!1;const e=xM(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(xte in t)&&!(j0 in t)},pfe=t=>{if(!sm(t)||im(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},mfe=ys("Date"),gfe=ys("File"),yfe=ys("Blob"),vfe=ys("FileList"),bfe=t=>sm(t)&&ei(t.pipe),xfe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ei(t.append)&&((e=O0(t))==="formdata"||e==="object"&&ei(t.toString)&&t.toString()==="[object FormData]"))},wfe=ys("URLSearchParams"),[Sfe,_fe,Efe,Nfe]=["ReadableStream","Request","Response","Headers"].map(ys),kfe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function om(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),hh(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{if(im(t))return;const s=r?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(n=0;n<o;n++)a=s[n],e.call(null,t[a],a,t)}}function _te(t,e){if(im(t))return null;e=e.toLowerCase();const r=Object.keys(t);let n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}const Bl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ete=t=>!Ld(t)&&t!==Bl;function oI(){const{caseless:t,skipUndefined:e}=Ete(this)&&this||{},r={},n=(i,s)=>{const o=t&&_te(r,s)||s;cy(r[o])&&cy(i)?r[o]=oI(r[o],i):cy(i)?r[o]=oI({},i):hh(i)?r[o]=i.slice():(!e||!Ld(i))&&(r[o]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&om(arguments[i],n);return r}const Cfe=(t,e,r,{allOwnKeys:n}={})=>(om(e,(i,s)=>{r&&ei(i)?t[s]=bte(i,r):t[s]=i},{allOwnKeys:n}),t),Tfe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),jfe=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},Ofe=(t,e,r,n)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!n||n(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=r!==!1&&xM(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},Pfe=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},Ife=t=>{if(!t)return null;if(hh(t))return t;let e=t.length;if(!Ste(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},Rfe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&xM(Uint8Array)),Mfe=(t,e)=>{const n=(t&&t[j0]).call(t);let i;for(;(i=n.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},Afe=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},Dfe=ys("HTMLFormElement"),$fe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),L4=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),Ffe=ys("RegExp"),Nte=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};om(r,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(n[s]=o||i)}),Object.defineProperties(t,n)},qfe=t=>{Nte(t,(e,r)=>{if(ei(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(ei(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Lfe=(t,e)=>{const r={},n=i=>{i.forEach(s=>{r[s]=!0})};return hh(t)?n(t):n(String(t).split(e)),r},Bfe=()=>{},zfe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Vfe(t){return!!(t&&ei(t.append)&&t[xte]==="FormData"&&t[j0])}const Wfe=t=>{const e=new Array(10),r=(n,i)=>{if(sm(n)){if(e.indexOf(n)>=0)return;if(im(n))return n;if(!("toJSON"in n)){e[i]=n;const s=hh(n)?[]:{};return om(n,(o,a)=>{const l=r(o,i+1);!Ld(l)&&(s[a]=l)}),e[i]=void 0,s}}return n};return r(t,0)},Ufe=ys("AsyncFunction"),Hfe=t=>t&&(sm(t)||ei(t))&&ei(t.then)&&ei(t.catch),kte=((t,e)=>t?setImmediate:e?((r,n)=>(Bl.addEventListener("message",({source:i,data:s})=>{i===Bl&&s===r&&n.length&&n.shift()()},!1),i=>{n.push(i),Bl.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",ei(Bl.postMessage)),Kfe=typeof queueMicrotask<"u"?queueMicrotask.bind(Bl):typeof process<"u"&&process.nextTick||kte,Gfe=t=>t!=null&&ei(t[j0]),B={isArray:hh,isArrayBuffer:wte,isBuffer:im,isFormData:xfe,isArrayBufferView:dfe,isString:hfe,isNumber:Ste,isBoolean:ffe,isObject:sm,isPlainObject:cy,isEmptyObject:pfe,isReadableStream:Sfe,isRequest:_fe,isResponse:Efe,isHeaders:Nfe,isUndefined:Ld,isDate:mfe,isFile:gfe,isBlob:yfe,isRegExp:Ffe,isFunction:ei,isStream:bfe,isURLSearchParams:wfe,isTypedArray:Rfe,isFileList:vfe,forEach:om,merge:oI,extend:Cfe,trim:kfe,stripBOM:Tfe,inherits:jfe,toFlatObject:Ofe,kindOf:O0,kindOfTest:ys,endsWith:Pfe,toArray:Ife,forEachEntry:Mfe,matchAll:Afe,isHTMLForm:Dfe,hasOwnProperty:L4,hasOwnProp:L4,reduceDescriptors:Nte,freezeMethods:qfe,toObjectSet:Lfe,toCamelCase:$fe,noop:Bfe,toFiniteNumber:zfe,findKey:_te,global:Bl,isContextDefined:Ete,isSpecCompliantForm:Vfe,toJSONObject:Wfe,isAsyncFn:Ufe,isThenable:Hfe,setImmediate:kte,asap:Kfe,isIterable:Gfe};function Ge(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}B.inherits(Ge,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:B.toJSONObject(this.config),code:this.code,status:this.status}}});const Cte=Ge.prototype,Tte={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Tte[t]={value:t}});Object.defineProperties(Ge,Tte);Object.defineProperty(Cte,"isAxiosError",{value:!0});Ge.from=(t,e,r,n,i,s)=>{const o=Object.create(Cte);B.toFlatObject(t,o,function(d){return d!==Error.prototype},u=>u!=="isAxiosError");const a=t&&t.message?t.message:"Error",l=e==null&&t?t.code:e;return Ge.call(o,a,l,r,n,i),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",s&&Object.assign(o,s),o};const Yfe=null;function aI(t){return B.isPlainObject(t)||B.isArray(t)}function jte(t){return B.endsWith(t,"[]")?t.slice(0,-2):t}function B4(t,e,r){return t?t.concat(e).map(function(i,s){return i=jte(i),!r&&s?"["+i+"]":i}).join(r?".":""):e}function Qfe(t){return B.isArray(t)&&!t.some(aI)}const Xfe=B.toFlatObject(B,{},null,function(e){return/^is[A-Z]/.test(e)});function I0(t,e,r){if(!B.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=B.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,v){return!B.isUndefined(v[g])});const n=r.metaTokens,i=r.visitor||d,s=r.dots,o=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&B.isSpecCompliantForm(e);if(!B.isFunction(i))throw new TypeError("visitor must be a function");function u(m){if(m===null)return"";if(B.isDate(m))return m.toISOString();if(B.isBoolean(m))return m.toString();if(!l&&B.isBlob(m))throw new Ge("Blob is not supported. Use a Buffer instead.");return B.isArrayBuffer(m)||B.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,g,v){let y=m;if(m&&!v&&typeof m=="object"){if(B.endsWith(g,"{}"))g=n?g:g.slice(0,-2),m=JSON.stringify(m);else if(B.isArray(m)&&Qfe(m)||(B.isFileList(m)||B.endsWith(g,"[]"))&&(y=B.toArray(m)))return g=jte(g),y.forEach(function(w,x){!(B.isUndefined(w)||w===null)&&e.append(o===!0?B4([g],x,s):o===null?g:g+"[]",u(w))}),!1}return aI(m)?!0:(e.append(B4(v,g,s),u(m)),!1)}const h=[],f=Object.assign(Xfe,{defaultVisitor:d,convertValue:u,isVisitable:aI});function p(m,g){if(!B.isUndefined(m)){if(h.indexOf(m)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(m),B.forEach(m,function(y,b){(!(B.isUndefined(y)||y===null)&&i.call(e,y,B.isString(b)?b.trim():b,g,f))===!0&&p(y,g?g.concat(b):[b])}),h.pop()}}if(!B.isObject(t))throw new TypeError("data must be an object");return p(t),e}function z4(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function wM(t,e){this._pairs=[],t&&I0(t,this,e)}const Ote=wM.prototype;Ote.append=function(e,r){this._pairs.push([e,r])};Ote.toString=function(e){const r=e?function(n){return e.call(this,n,z4)}:z4;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function Jfe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Pte(t,e,r){if(!e)return t;const n=r&&r.encode||Jfe;B.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let s;if(i?s=i(e,r):s=B.isURLSearchParams(e)?e.toString():new wM(e,r).toString(n),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class V4{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){B.forEach(this.handlers,function(n){n!==null&&e(n)})}}const Ite={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Zfe=typeof URLSearchParams<"u"?URLSearchParams:wM,epe=typeof FormData<"u"?FormData:null,tpe=typeof Blob<"u"?Blob:null,rpe={isBrowser:!0,classes:{URLSearchParams:Zfe,FormData:epe,Blob:tpe},protocols:["http","https","file","blob","url","data"]},SM=typeof window<"u"&&typeof document<"u",lI=typeof navigator=="object"&&navigator||void 0,npe=SM&&(!lI||["ReactNative","NativeScript","NS"].indexOf(lI.product)<0),ipe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",spe=SM&&window.location.href||"http://localhost",ope=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:SM,hasStandardBrowserEnv:npe,hasStandardBrowserWebWorkerEnv:ipe,navigator:lI,origin:spe},Symbol.toStringTag,{value:"Module"})),mn={...ope,...rpe};function ape(t,e){return I0(t,new mn.classes.URLSearchParams,{visitor:function(r,n,i,s){return mn.isNode&&B.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function lpe(t){return B.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function cpe(t){const e={},r=Object.keys(t);let n;const i=r.length;let s;for(n=0;n<i;n++)s=r[n],e[s]=t[s];return e}function Rte(t){function e(r,n,i,s){let o=r[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=r.length;return o=!o&&B.isArray(i)?i.length:o,l?(B.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!a):((!i[o]||!B.isObject(i[o]))&&(i[o]=[]),e(r,n,i[o],s)&&B.isArray(i[o])&&(i[o]=cpe(i[o])),!a)}if(B.isFormData(t)&&B.isFunction(t.entries)){const r={};return B.forEachEntry(t,(n,i)=>{e(lpe(n),i,r,0)}),r}return null}function upe(t,e,r){if(B.isString(t))try{return(e||JSON.parse)(t),B.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const am={transitional:Ite,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,s=B.isObject(e);if(s&&B.isHTMLForm(e)&&(e=new FormData(e)),B.isFormData(e))return i?JSON.stringify(Rte(e)):e;if(B.isArrayBuffer(e)||B.isBuffer(e)||B.isStream(e)||B.isFile(e)||B.isBlob(e)||B.isReadableStream(e))return e;if(B.isArrayBufferView(e))return e.buffer;if(B.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return ape(e,this.formSerializer).toString();if((a=B.isFileList(e))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return I0(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(r.setContentType("application/json",!1),upe(e)):e}],transformResponse:[function(e){const r=this.transitional||am.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(B.isResponse(e)||B.isReadableStream(e))return e;if(e&&B.isString(e)&&(n&&!this.responseType||i)){const o=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?Ge.from(a,Ge.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:mn.classes.FormData,Blob:mn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};B.forEach(["delete","get","head","post","put","patch"],t=>{am.headers[t]={}});const dpe=B.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),hpe=t=>{const e={};let r,n,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),r=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!r||e[r]&&dpe[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},W4=Symbol("internals");function rf(t){return t&&String(t).trim().toLowerCase()}function uy(t){return t===!1||t==null?t:B.isArray(t)?t.map(uy):String(t)}function fpe(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const ppe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function _x(t,e,r,n,i){if(B.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!B.isString(e)){if(B.isString(n))return e.indexOf(n)!==-1;if(B.isRegExp(n))return n.test(e)}}function mpe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function gpe(t,e){const r=B.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,s,o){return this[n].call(this,e,i,s,o)},configurable:!0})})}let ti=class{constructor(e){e&&this.set(e)}set(e,r,n){const i=this;function s(a,l,u){const d=rf(l);if(!d)throw new Error("header name must be a non-empty string");const h=B.findKey(i,d);(!h||i[h]===void 0||u===!0||u===void 0&&i[h]!==!1)&&(i[h||l]=uy(a))}const o=(a,l)=>B.forEach(a,(u,d)=>s(u,d,l));if(B.isPlainObject(e)||e instanceof this.constructor)o(e,r);else if(B.isString(e)&&(e=e.trim())&&!ppe(e))o(hpe(e),r);else if(B.isObject(e)&&B.isIterable(e)){let a={},l,u;for(const d of e){if(!B.isArray(d))throw TypeError("Object iterator must return a key-value pair");a[u=d[0]]=(l=a[u])?B.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}o(a,r)}else e!=null&&s(r,e,n);return this}get(e,r){if(e=rf(e),e){const n=B.findKey(this,e);if(n){const i=this[n];if(!r)return i;if(r===!0)return fpe(i);if(B.isFunction(r))return r.call(this,i,n);if(B.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=rf(e),e){const n=B.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||_x(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let i=!1;function s(o){if(o=rf(o),o){const a=B.findKey(n,o);a&&(!r||_x(n,n[a],a,r))&&(delete n[a],i=!0)}}return B.isArray(e)?e.forEach(s):s(e),i}clear(e){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const s=r[n];(!e||_x(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const r=this,n={};return B.forEach(this,(i,s)=>{const o=B.findKey(n,s);if(o){r[o]=uy(i),delete r[s];return}const a=e?mpe(s):String(s).trim();a!==s&&delete r[s],r[a]=uy(i),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return B.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&B.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[W4]=this[W4]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=rf(o);n[a]||(gpe(i,o),n[a]=!0)}return B.isArray(e)?e.forEach(s):s(e),this}};ti.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);B.reduceDescriptors(ti.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});B.freezeMethods(ti);function Ex(t,e){const r=this||am,n=e||r,i=ti.from(n.headers);let s=n.data;return B.forEach(t,function(a){s=a.call(r,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function Mte(t){return!!(t&&t.__CANCEL__)}function fh(t,e,r){Ge.call(this,t??"canceled",Ge.ERR_CANCELED,e,r),this.name="CanceledError"}B.inherits(fh,Ge,{__CANCEL__:!0});function Ate(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new Ge("Request failed with status code "+r.status,[Ge.ERR_BAD_REQUEST,Ge.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function ype(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function vpe(t,e){t=t||10;const r=new Array(t),n=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),d=n[s];o||(o=u),r[i]=l,n[i]=u;let h=s,f=0;for(;h!==i;)f+=r[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),u-o<e)return;const p=d&&u-d;return p?Math.round(f*1e3/p):void 0}}function bpe(t,e){let r=0,n=1e3/e,i,s;const o=(u,d=Date.now())=>{r=d,i=null,s&&(clearTimeout(s),s=null),t(...u)};return[(...u)=>{const d=Date.now(),h=d-r;h>=n?o(u,d):(i=u,s||(s=setTimeout(()=>{s=null,o(i)},n-h)))},()=>i&&o(i)]}const Qy=(t,e,r=3)=>{let n=0;const i=vpe(50,250);return bpe(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-n,u=i(l),d=o<=a;n=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&d?(a-o)/u:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},r)},U4=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},H4=t=>(...e)=>B.asap(()=>t(...e)),xpe=mn.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,mn.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(mn.origin),mn.navigator&&/(msie|trident)/i.test(mn.navigator.userAgent)):()=>!0,wpe=mn.hasStandardBrowserEnv?{write(t,e,r,n,i,s,o){if(typeof document>"u")return;const a=[`${t}=${encodeURIComponent(e)}`];B.isNumber(r)&&a.push(`expires=${new Date(r).toUTCString()}`),B.isString(n)&&a.push(`path=${n}`),B.isString(i)&&a.push(`domain=${i}`),s===!0&&a.push("secure"),B.isString(o)&&a.push(`SameSite=${o}`),document.cookie=a.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Spe(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function _pe(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Dte(t,e,r){let n=!Spe(e);return t&&(n||r==!1)?_pe(t,e):e}const K4=t=>t instanceof ti?{...t}:t;function Cc(t,e){e=e||{};const r={};function n(u,d,h,f){return B.isPlainObject(u)&&B.isPlainObject(d)?B.merge.call({caseless:f},u,d):B.isPlainObject(d)?B.merge({},d):B.isArray(d)?d.slice():d}function i(u,d,h,f){if(B.isUndefined(d)){if(!B.isUndefined(u))return n(void 0,u,h,f)}else return n(u,d,h,f)}function s(u,d){if(!B.isUndefined(d))return n(void 0,d)}function o(u,d){if(B.isUndefined(d)){if(!B.isUndefined(u))return n(void 0,u)}else return n(void 0,d)}function a(u,d,h){if(h in e)return n(u,d);if(h in t)return n(void 0,u)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,d,h)=>i(K4(u),K4(d),h,!0)};return B.forEach(Object.keys({...t,...e}),function(d){const h=l[d]||i,f=h(t[d],e[d],d);B.isUndefined(f)&&h!==a||(r[d]=f)}),r}const $te=t=>{const e=Cc({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;if(e.headers=o=ti.from(o),e.url=Pte(Dte(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),B.isFormData(r)){if(mn.hasStandardBrowserEnv||mn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(B.isFunction(r.getHeaders)){const l=r.getHeaders(),u=["content-type","content-length"];Object.entries(l).forEach(([d,h])=>{u.includes(d.toLowerCase())&&o.set(d,h)})}}if(mn.hasStandardBrowserEnv&&(n&&B.isFunction(n)&&(n=n(e)),n||n!==!1&&xpe(e.url))){const l=i&&s&&wpe.read(s);l&&o.set(i,l)}return e},Epe=typeof XMLHttpRequest<"u",Npe=Epe&&function(t){return new Promise(function(r,n){const i=$te(t);let s=i.data;const o=ti.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:u}=i,d,h,f,p,m;function g(){p&&p(),m&&m(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let v=new XMLHttpRequest;v.open(i.method.toUpperCase(),i.url,!0),v.timeout=i.timeout;function y(){if(!v)return;const w=ti.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),S={data:!a||a==="text"||a==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:w,config:t,request:v};Ate(function(E){r(E),g()},function(E){n(E),g()},S),v=null}"onloadend"in v?v.onloadend=y:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(y)},v.onabort=function(){v&&(n(new Ge("Request aborted",Ge.ECONNABORTED,t,v)),v=null)},v.onerror=function(x){const S=x&&x.message?x.message:"Network Error",_=new Ge(S,Ge.ERR_NETWORK,t,v);_.event=x||null,n(_),v=null},v.ontimeout=function(){let x=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const S=i.transitional||Ite;i.timeoutErrorMessage&&(x=i.timeoutErrorMessage),n(new Ge(x,S.clarifyTimeoutError?Ge.ETIMEDOUT:Ge.ECONNABORTED,t,v)),v=null},s===void 0&&o.setContentType(null),"setRequestHeader"in v&&B.forEach(o.toJSON(),function(x,S){v.setRequestHeader(S,x)}),B.isUndefined(i.withCredentials)||(v.withCredentials=!!i.withCredentials),a&&a!=="json"&&(v.responseType=i.responseType),u&&([f,m]=Qy(u,!0),v.addEventListener("progress",f)),l&&v.upload&&([h,p]=Qy(l),v.upload.addEventListener("progress",h),v.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(d=w=>{v&&(n(!w||w.type?new fh(null,t,v):w),v.abort(),v=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const b=ype(i.url);if(b&&mn.protocols.indexOf(b)===-1){n(new Ge("Unsupported protocol "+b+":",Ge.ERR_BAD_REQUEST,t));return}v.send(s||null)})},kpe=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,i;const s=function(u){if(!i){i=!0,a();const d=u instanceof Error?u:this.reason;n.abort(d instanceof Ge?d:new fh(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,s(new Ge(`timeout ${e} of ms exceeded`,Ge.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),t=null)};t.forEach(u=>u.addEventListener("abort",s));const{signal:l}=n;return l.unsubscribe=()=>B.asap(a),l}},Cpe=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,i;for(;n<r;)i=n+e,yield t.slice(n,i),n=i},Tpe=async function*(t,e){for await(const r of jpe(t))yield*Cpe(r,e)},jpe=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},G4=(t,e,r,n)=>{const i=Tpe(t,e);let s=0,o,a=l=>{o||(o=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:u,value:d}=await i.next();if(u){a(),l.close();return}let h=d.byteLength;if(r){let f=s+=h;r(f)}l.enqueue(new Uint8Array(d))}catch(u){throw a(u),u}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},Y4=64*1024,{isFunction:Ng}=B,Ope=(({Request:t,Response:e})=>({Request:t,Response:e}))(B.global),{ReadableStream:Q4,TextEncoder:X4}=B.global,J4=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Ppe=t=>{t=B.merge.call({skipUndefined:!0},Ope,t);const{fetch:e,Request:r,Response:n}=t,i=e?Ng(e):typeof fetch=="function",s=Ng(r),o=Ng(n);if(!i)return!1;const a=i&&Ng(Q4),l=i&&(typeof X4=="function"?(m=>g=>m.encode(g))(new X4):async m=>new Uint8Array(await new r(m).arrayBuffer())),u=s&&a&&J4(()=>{let m=!1;const g=new r(mn.origin,{body:new Q4,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!g}),d=o&&a&&J4(()=>B.isReadableStream(new n("").body)),h={stream:d&&(m=>m.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!h[m]&&(h[m]=(g,v)=>{let y=g&&g[m];if(y)return y.call(g);throw new Ge(`Response type '${m}' is not supported`,Ge.ERR_NOT_SUPPORT,v)})});const f=async m=>{if(m==null)return 0;if(B.isBlob(m))return m.size;if(B.isSpecCompliantForm(m))return(await new r(mn.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(B.isArrayBufferView(m)||B.isArrayBuffer(m))return m.byteLength;if(B.isURLSearchParams(m)&&(m=m+""),B.isString(m))return(await l(m)).byteLength},p=async(m,g)=>{const v=B.toFiniteNumber(m.getContentLength());return v??f(g)};return async m=>{let{url:g,method:v,data:y,signal:b,cancelToken:w,timeout:x,onDownloadProgress:S,onUploadProgress:_,responseType:E,headers:N,withCredentials:T="same-origin",fetchOptions:j}=$te(m),P=e||fetch;E=E?(E+"").toLowerCase():"text";let O=kpe([b,w&&w.toAbortSignal()],x),C=null;const D=O&&O.unsubscribe&&(()=>{O.unsubscribe()});let F;try{if(_&&u&&v!=="get"&&v!=="head"&&(F=await p(N,y))!==0){let Q=new r(g,{method:"POST",body:y,duplex:"half"}),pe;if(B.isFormData(y)&&(pe=Q.headers.get("content-type"))&&N.setContentType(pe),Q.body){const[K,oe]=U4(F,Qy(H4(_)));y=G4(Q.body,Y4,K,oe)}}B.isString(T)||(T=T?"include":"omit");const $=s&&"credentials"in r.prototype,L={...j,signal:O,method:v.toUpperCase(),headers:N.normalize().toJSON(),body:y,duplex:"half",credentials:$?T:void 0};C=s&&new r(g,L);let M=await(s?P(C,j):P(g,L));const W=d&&(E==="stream"||E==="response");if(d&&(S||W&&D)){const Q={};["status","statusText","headers"].forEach(Te=>{Q[Te]=M[Te]});const pe=B.toFiniteNumber(M.headers.get("content-length")),[K,oe]=S&&U4(pe,Qy(H4(S),!0))||[];M=new n(G4(M.body,Y4,K,()=>{oe&&oe(),D&&D()}),Q)}E=E||"text";let Y=await h[B.findKey(h,E)||"text"](M,m);return!W&&D&&D(),await new Promise((Q,pe)=>{Ate(Q,pe,{data:Y,headers:ti.from(M.headers),status:M.status,statusText:M.statusText,config:m,request:C})})}catch($){throw D&&D(),$&&$.name==="TypeError"&&/Load failed|fetch/i.test($.message)?Object.assign(new Ge("Network Error",Ge.ERR_NETWORK,m,C),{cause:$.cause||$}):Ge.from($,$&&$.code,m,C)}}},Ipe=new Map,Fte=t=>{let e=t&&t.env||{};const{fetch:r,Request:n,Response:i}=e,s=[n,i,r];let o=s.length,a=o,l,u,d=Ipe;for(;a--;)l=s[a],u=d.get(l),u===void 0&&d.set(l,u=a?new Map:Ppe(e)),d=u;return u};Fte();const _M={http:Yfe,xhr:Npe,fetch:{get:Fte}};B.forEach(_M,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Z4=t=>`- ${t}`,Rpe=t=>B.isFunction(t)||t===null||t===!1;function Mpe(t,e){t=B.isArray(t)?t:[t];const{length:r}=t;let n,i;const s={};for(let o=0;o<r;o++){n=t[o];let a;if(i=n,!Rpe(n)&&(i=_M[(a=String(n)).toLowerCase()],i===void 0))throw new Ge(`Unknown adapter '${a}'`);if(i&&(B.isFunction(i)||(i=i.get(e))))break;s[a||"#"+o]=i}if(!i){const o=Object.entries(s).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=r?o.length>1?`since :
`+o.map(Z4).join(`
`):" "+Z4(o[0]):"as no adapter specified";throw new Ge("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i}const qte={getAdapter:Mpe,adapters:_M};function Nx(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new fh(null,t)}function e5(t){return Nx(t),t.headers=ti.from(t.headers),t.data=Ex.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),qte.getAdapter(t.adapter||am.adapter,t)(t).then(function(n){return Nx(t),n.data=Ex.call(t,t.transformResponse,n),n.headers=ti.from(n.headers),n},function(n){return Mte(n)||(Nx(t),n&&n.response&&(n.response.data=Ex.call(t,t.transformResponse,n.response),n.response.headers=ti.from(n.response.headers))),Promise.reject(n)})}const Lte="1.13.2",R0={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{R0[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const t5={};R0.transitional=function(e,r,n){function i(s,o){return"[Axios v"+Lte+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return(s,o,a)=>{if(e===!1)throw new Ge(i(o," has been removed"+(r?" in "+r:"")),Ge.ERR_DEPRECATED);return r&&!t5[o]&&(t5[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};R0.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function Ape(t,e,r){if(typeof t!="object")throw new Ge("options must be an object",Ge.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const s=n[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new Ge("option "+s+" must be "+l,Ge.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ge("Unknown option "+s,Ge.ERR_BAD_OPTION)}}const dy={assertOptions:Ape,validators:R0},Ss=dy.validators;let lc=class{constructor(e){this.defaults=e||{},this.interceptors={request:new V4,response:new V4}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Cc(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:s}=r;n!==void 0&&dy.assertOptions(n,{silentJSONParsing:Ss.transitional(Ss.boolean),forcedJSONParsing:Ss.transitional(Ss.boolean),clarifyTimeoutError:Ss.transitional(Ss.boolean)},!1),i!=null&&(B.isFunction(i)?r.paramsSerializer={serialize:i}:dy.assertOptions(i,{encode:Ss.function,serialize:Ss.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),dy.assertOptions(r,{baseUrl:Ss.spelling("baseURL"),withXsrfToken:Ss.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=s&&B.merge(s.common,s[r.method]);s&&B.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),r.headers=ti.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const u=[];this.interceptors.response.forEach(function(g){u.push(g.fulfilled,g.rejected)});let d,h=0,f;if(!l){const m=[e5.bind(this),void 0];for(m.unshift(...a),m.push(...u),f=m.length,d=Promise.resolve(r);h<f;)d=d.then(m[h++],m[h++]);return d}f=a.length;let p=r;for(;h<f;){const m=a[h++],g=a[h++];try{p=m(p)}catch(v){g.call(this,v);break}}try{d=e5.call(this,p)}catch(m){return Promise.reject(m)}for(h=0,f=u.length;h<f;)d=d.then(u[h++],u[h++]);return d}getUri(e){e=Cc(this.defaults,e);const r=Dte(e.baseURL,e.url,e.allowAbsoluteUrls);return Pte(r,e.params,e.paramsSerializer)}};B.forEach(["delete","get","head","options"],function(e){lc.prototype[e]=function(r,n){return this.request(Cc(n||{},{method:e,url:r,data:(n||{}).data}))}});B.forEach(["post","put","patch"],function(e){function r(n){return function(s,o,a){return this.request(Cc(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}lc.prototype[e]=r(),lc.prototype[e+"Form"]=r(!0)});let Dpe=class Bte{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{n.subscribe(a),s=a}).then(i);return o.cancel=function(){n.unsubscribe(s)},o},e(function(s,o,a){n.reason||(n.reason=new fh(s,o,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new Bte(function(i){e=i}),cancel:e}}};function $pe(t){return function(r){return t.apply(null,r)}}function Fpe(t){return B.isObject(t)&&t.isAxiosError===!0}const cI={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(cI).forEach(([t,e])=>{cI[e]=t});function zte(t){const e=new lc(t),r=bte(lc.prototype.request,e);return B.extend(r,lc.prototype,e,{allOwnKeys:!0}),B.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return zte(Cc(t,i))},r}const fr=zte(am);fr.Axios=lc;fr.CanceledError=fh;fr.CancelToken=Dpe;fr.isCancel=Mte;fr.VERSION=Lte;fr.toFormData=I0;fr.AxiosError=Ge;fr.Cancel=fr.CanceledError;fr.all=function(e){return Promise.all(e)};fr.spread=$pe;fr.isAxiosError=Fpe;fr.mergeConfig=Cc;fr.AxiosHeaders=ti;fr.formToJSON=t=>Rte(B.isHTMLForm(t)?new FormData(t):t);fr.getAdapter=qte.getAdapter;fr.HttpStatusCode=cI;fr.default=fr;const{Axios:MFe,AxiosError:AFe,CanceledError:DFe,isCancel:$Fe,CancelToken:FFe,VERSION:qFe,all:LFe,Cancel:BFe,isAxiosError:zFe,spread:VFe,toFormData:WFe,AxiosHeaders:UFe,HttpStatusCode:HFe,formToJSON:KFe,getAdapter:GFe,mergeConfig:YFe}=fr,uI=window.prmConfig||{},Z=fr.create({baseURL:uI.apiUrl||"/wp-json",headers:{"Content-Type":"application/json","X-WP-Nonce":uI.nonce||""}});Z.interceptors.request.use(t=>{var e;return(e=window.prmConfig)!=null&&e.nonce&&(t.headers["X-WP-Nonce"]=window.prmConfig.nonce),t});Z.interceptors.response.use(t=>t,t=>{var e;return((e=t.response)==null?void 0:e.status)===401&&(window.location.href=uI.loginUrl||"/wp-login.php"),Promise.reject(t)});const He={getPeople:t=>Z.get("/wp/v2/people",{params:t}),getPerson:(t,e={})=>Z.get(`/wp/v2/people/${t}`,{params:e}),createPerson:t=>Z.post("/wp/v2/people",t),updatePerson:(t,e)=>Z.put(`/wp/v2/people/${t}`,e),deletePerson:(t,e={})=>Z.delete(`/wp/v2/people/${t}`,{params:e}),getCompanies:t=>Z.get("/wp/v2/companies",{params:t}),getCompany:(t,e={})=>Z.get(`/wp/v2/companies/${t}`,{params:e}),createCompany:t=>Z.post("/wp/v2/companies",t),updateCompany:(t,e)=>Z.put(`/wp/v2/companies/${t}`,e),deleteCompany:(t,e={})=>Z.delete(`/wp/v2/companies/${t}`,{params:e}),getDates:t=>Z.get("/wp/v2/important-dates",{params:t}),getDate:t=>Z.get(`/wp/v2/important-dates/${t}`),createDate:t=>Z.post("/wp/v2/important-dates",t),updateDate:(t,e)=>Z.put(`/wp/v2/important-dates/${t}`,e),deleteDate:t=>Z.delete(`/wp/v2/important-dates/${t}`),getPersonLabels:()=>Z.get("/wp/v2/person_label"),getCompanyLabels:()=>Z.get("/wp/v2/company_label"),getRelationshipTypes:()=>Z.get("/wp/v2/relationship_type",{params:{per_page:100,_fields:"id,name,slug,acf"}}),createRelationshipType:t=>Z.post("/wp/v2/relationship_type",t),updateRelationshipType:(t,e)=>Z.post(`/wp/v2/relationship_type/${t}`,e),deleteRelationshipType:t=>Z.delete(`/wp/v2/relationship_type/${t}?force=true`),restoreRelationshipTypeDefaults:()=>Z.post("/prm/v1/relationship-types/restore-defaults"),getDateTypes:()=>Z.get("/wp/v2/date_type",{params:{per_page:100}}),uploadMedia:t=>{const e=new FormData;return e.append("file",t),Z.post("/wp/v2/media",e,{headers:{"Content-Type":"multipart/form-data"}})}},_e={getVersion:()=>Z.get("/prm/v1/version"),getDashboard:()=>Z.get("/prm/v1/dashboard"),sideloadGravatar:(t,e)=>Z.post(`/prm/v1/people/${t}/gravatar`,{email:e}),getCurrentUser:()=>Z.get("/prm/v1/user/me"),getUsers:()=>Z.get("/prm/v1/users"),approveUser:t=>Z.post(`/prm/v1/users/${t}/approve`),denyUser:t=>Z.post(`/prm/v1/users/${t}/deny`),deleteUser:t=>Z.delete(`/prm/v1/users/${t}`),search:t=>Z.get("/prm/v1/search",{params:{q:t}}),getReminders:(t=30)=>Z.get("/prm/v1/reminders",{params:{days_ahead:t}}),triggerReminders:()=>Z.post("/prm/v1/reminders/trigger"),rescheduleCronJobs:()=>Z.post("/prm/v1/reminders/reschedule-cron"),getNotificationChannels:()=>Z.get("/prm/v1/user/notification-channels"),updateNotificationChannels:t=>Z.post("/prm/v1/user/notification-channels",{channels:t}),updateSlackWebhook:t=>Z.post("/prm/v1/user/slack-webhook",{webhook:t}),updateNotificationTime:t=>Z.post("/prm/v1/user/notification-time",{time:t}),getSlackStatus:()=>Z.get("/prm/v1/user/slack-status"),disconnectSlack:()=>Z.post("/prm/v1/slack/disconnect"),getSlackChannels:()=>Z.get("/prm/v1/slack/channels"),getSlackTargets:()=>Z.get("/prm/v1/slack/targets"),updateSlackTargets:t=>Z.post("/prm/v1/slack/targets",{targets:t}),getPersonDates:t=>Z.get(`/prm/v1/people/${t}/dates`),getPersonTimeline:t=>Z.get(`/prm/v1/people/${t}/timeline`),getPersonNotes:t=>Z.get(`/prm/v1/people/${t}/notes`),createNote:(t,e)=>Z.post(`/prm/v1/people/${t}/notes`,{content:e}),updateNote:(t,e)=>Z.put(`/prm/v1/notes/${t}`,{content:e}),deleteNote:t=>Z.delete(`/prm/v1/notes/${t}`),getPersonActivities:t=>Z.get(`/prm/v1/people/${t}/activities`),createActivity:(t,e)=>Z.post(`/prm/v1/people/${t}/activities`,e),updateActivity:(t,e)=>Z.put(`/prm/v1/activities/${t}`,e),deleteActivity:t=>Z.delete(`/prm/v1/activities/${t}`),getAllTodos:(t=!1)=>Z.get("/prm/v1/todos",{params:{completed:t}}),getInvestments:t=>Z.get(`/prm/v1/investments/${t}`),getPersonTodos:t=>Z.get(`/prm/v1/people/${t}/todos`),createTodo:(t,e)=>Z.post(`/prm/v1/people/${t}/todos`,e),updateTodo:(t,e)=>Z.put(`/prm/v1/todos/${t}`,e),deleteTodo:t=>Z.delete(`/prm/v1/todos/${t}`),getCompanyPeople:t=>Z.get(`/prm/v1/companies/${t}/people`),setCompanyLogo:(t,e)=>Z.post(`/prm/v1/companies/${t}/logo`,{media_id:e}),uploadPersonPhoto:(t,e)=>{const r=new FormData;return r.append("file",e),Z.post(`/prm/v1/people/${t}/photo`,r,{headers:{"Content-Type":"multipart/form-data"}})},uploadCompanyLogo:(t,e)=>{const r=new FormData;return r.append("file",e),Z.post(`/prm/v1/companies/${t}/logo/upload`,r,{headers:{"Content-Type":"multipart/form-data"}})},getCardDAVUrls:()=>Z.get("/prm/v1/carddav/urls"),getAppPasswords:t=>Z.get(`/wp/v2/users/${t}/application-passwords`),createAppPassword:(t,e)=>Z.post(`/wp/v2/users/${t}/application-passwords`,{name:e}),deleteAppPassword:(t,e)=>Z.delete(`/wp/v2/users/${t}/application-passwords/${e}`),getWorkspaces:()=>Z.get("/prm/v1/workspaces"),getWorkspace:t=>Z.get(`/prm/v1/workspaces/${t}`),createWorkspace:t=>Z.post("/prm/v1/workspaces",t),updateWorkspace:(t,e)=>Z.put(`/prm/v1/workspaces/${t}`,e),deleteWorkspace:t=>Z.delete(`/prm/v1/workspaces/${t}`),addWorkspaceMember:(t,e)=>Z.post(`/prm/v1/workspaces/${t}/members`,e),removeWorkspaceMember:(t,e)=>Z.delete(`/prm/v1/workspaces/${t}/members/${e}`),updateWorkspaceMember:(t,e,r)=>Z.put(`/prm/v1/workspaces/${t}/members/${e}`,r),getWorkspaceInvites:t=>Z.get(`/prm/v1/workspaces/${t}/invites`),createWorkspaceInvite:(t,e)=>Z.post(`/prm/v1/workspaces/${t}/invites`,e),revokeWorkspaceInvite:(t,e)=>Z.delete(`/prm/v1/workspaces/${t}/invites/${e}`),validateInvite:t=>Z.get(`/prm/v1/invites/${t}`),acceptInvite:t=>Z.post(`/prm/v1/invites/${t}/accept`),getPostShares:(t,e)=>Z.get(`/prm/v1/${e}/${t}/shares`),sharePost:(t,e,r)=>Z.post(`/prm/v1/${e}/${t}/shares`,r),unsharePost:(t,e,r)=>Z.delete(`/prm/v1/${e}/${t}/shares/${r}`),searchUsers:t=>Z.get("/prm/v1/users/search",{params:{q:t}})};function qpe({checkInterval:t=5*60*1e3}={}){const[e,r]=k.useState(!1),[n]=k.useState(()=>{var l;return((l=window.prmConfig)==null?void 0:l.version)||null}),[i,s]=k.useState(null),o=k.useCallback(async()=>{var l;if(n)try{const d=(l=(await _e.getVersion()).data)==null?void 0:l.version;d&&d!==n&&(s(d),r(!0))}catch(u){console.debug("Version check failed:",u.message)}},[n]),a=k.useCallback(()=>{window.location.reload(!0)},[]);return k.useEffect(()=>{const l=setTimeout(o,5e3);return()=>clearTimeout(l)},[o]),k.useEffect(()=>{const l=setInterval(o,t);return()=>clearInterval(l)},[o,t]),k.useEffect(()=>{const l=()=>{document.visibilityState==="visible"&&o()};return document.addEventListener("visibilitychange",l),()=>document.removeEventListener("visibilitychange",l)},[o]),{hasUpdate:e,currentVersion:n,latestVersion:i,reload:a,checkVersion:o}}/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Lpe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bpe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),de=(t,e)=>{const r=k.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...u},d)=>k.createElement("svg",{ref:d,...Lpe,width:i,height:i,stroke:n,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${Bpe(t)}`,a].join(" "),...u},[...e.map(([h,f])=>k.createElement(h,f)),...Array.isArray(l)?l:[l]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=de("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vte=de("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zpe=de("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=de("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=de("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vpe=de("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wpe=de("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Upe=de("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=de("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wte=de("Cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h0.01",key:"hsw7lv"}],["path",{d:"M12 4h0.01",key:"1e3d8f"}],["path",{d:"M17 4h0.01",key:"p7cxgy"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=de("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ute=de("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=de("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tc=de("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dI=de("CheckSquare2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=de("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=de("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bp=de("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=de("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hte=de("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kte=de("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hpe=de("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gte=de("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yte=de("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fI=de("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qte=de("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=de("FileCode",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m10 13-2 2 2 2",key:"17smn8"}],["path",{d:"m14 17 2-2-2-2",key:"14mezr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=de("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=de("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=de("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kpe=de("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=de("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hy=de("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gpe=de("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ype=de("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xte=de("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qpe=de("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xpe=de("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=de("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jpe=de("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zpe=de("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=de("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eme=de("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tme=de("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=de("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rme=de("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nme=de("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=de("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ime=de("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sme=de("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=de("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=de("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=de("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ome=de("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jte=de("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zte=de("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=de("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nl=de("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=de("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=de("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ere=de("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=de("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ame=de("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tre=de("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rre=de("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=de("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=de("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=de("StickyNote",[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M15 3v6h6",key:"edgan2"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=de("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=de("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lme=de("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cme=de("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=de("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ume=de("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=de("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=de("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dme=de("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=de("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nre=de("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=de("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=de("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hme=de("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fme=de("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Oc="Caelis";function mh(t){k.useEffect(()=>{var e;if(t){const r=((e=window.prmConfig)==null?void 0:e.siteName)||Oc;document.title=`${t} - ${r}`}},[t])}function pme(t){const e=t.match(/\/(?:people|companies|dates)\/(\d+)/);return e?e[1]:null}function ire(t=null){const e=Bo();k.useEffect(()=>{var i;let r=t;if(!r){const s=e.pathname,o=pme(s);s==="/"?r="Dashboard":s==="/login"?r="Login":s.startsWith("/people")?s==="/people"||s==="/people/"?r="People":s==="/people/new"?r="New person":s.endsWith("/edit")?r="Edit person":o?r="Person":r="People":s.startsWith("/companies")?s==="/companies"||s==="/companies/"?r="Organizations":s==="/companies/new"?r="New organization":s.endsWith("/edit")?r="Edit organization":o?r="Organization":r="Organizations":s.startsWith("/dates")?s==="/dates"||s==="/dates/"?r="Events":s==="/dates/new"?r="New date":s.endsWith("/edit")?r="Edit date":r="Events":s.startsWith("/settings")?r="Settings":r=Oc}const n=((i=window.prmConfig)==null?void 0:i.siteName)||Oc;document.title=`${r} - ${n}`},[e.pathname,t])}function mme(){return st({queryKey:["dashboard"],queryFn:async()=>(await _e.getDashboard()).data})}function gme(t=30){return st({queryKey:["reminders",t],queryFn:async()=>(await _e.getReminders(t)).data})}function sre(t=!1){return st({queryKey:["todos",t],queryFn:async()=>(await _e.getAllTodos(t)).data})}function ore(){const t=rt();return We({mutationFn:({todoId:e,data:r})=>_e.updateTodo(e,r),onSuccess:()=>{t.invalidateQueries({queryKey:["todos"]}),t.invalidateQueries({queryKey:["dashboard"]})}})}function yme(){const t=rt();return We({mutationFn:e=>_e.deleteTodo(e),onSuccess:()=>{t.invalidateQueries({queryKey:["todos"]}),t.invalidateQueries({queryKey:["dashboard"]})}})}function vme(t){const e=typeof t=="string"?t:"",r=e.length>=2;return st({queryKey:["search",e],queryFn:async()=>r?(await _e.search(e)).data:{people:[],companies:[]},enabled:r})}function Tn(t){if(!t)return"";const e=document.createElement("textarea");return e.innerHTML=t,e.value}function ur(t){var r;if(!t)return"";const e=((r=t.title)==null?void 0:r.rendered)||t.title||t.name||"";return Tn(e)}function ld(t){var r,n;if(!t)return"";if(t.name&&typeof t.name=="string"&&!((r=t.title)!=null&&r.rendered))return Tn(t.name);const e=((n=t.title)==null?void 0:n.rendered)||t.title||t.name||"";return Tn(e)}function Xs(t,e={}){const r=["gender"],n=["contact_info","addresses","work_history","relationships","photo_gallery"],i={...t};return r.forEach(s=>{i[s]===""&&(i[s]=null)}),n.forEach(s=>{Array.isArray(i[s])||(i[s]=[])}),Object.assign(i,e),i}const $t={all:["people"],lists:()=>[...$t.all,"list"],list:t=>[...$t.lists(),t],details:()=>[...$t.all,"detail"],detail:t=>[...$t.details(),t],timeline:t=>[...$t.detail(t),"timeline"],dates:t=>[...$t.detail(t),"dates"]};function are(t){var i,s,o,a,l,u,d,h,f,p,m,g,v,y,b,w,x;const e=((o=(s=(i=t._embedded)==null?void 0:i["wp:featuredmedia"])==null?void 0:s[0])==null?void 0:o.source_url)||((f=(h=(d=(u=(l=(a=t._embedded)==null?void 0:a["wp:featuredmedia"])==null?void 0:l[0])==null?void 0:u.media_details)==null?void 0:d.sizes)==null?void 0:h.thumbnail)==null?void 0:f.source_url)||null,r=((v=(g=(m=(p=t._embedded)==null?void 0:p["wp:term"])==null?void 0:m.flat())==null?void 0:g.filter(S=>(S==null?void 0:S.taxonomy)==="person_label"))==null?void 0:v.map(S=>S.name))||[],n=Tn(((y=t.title)==null?void 0:y.rendered)||"");return{...t,id:t.id,name:n,first_name:((b=t.acf)==null?void 0:b.first_name)||"",last_name:((w=t.acf)==null?void 0:w.last_name)||"",is_favorite:((x=t.acf)==null?void 0:x.is_favorite)||!1,is_deceased:t.is_deceased||!1,birth_year:t.birth_year||null,modified:t.modified||null,thumbnail:e,labels:r}}function Gc(t={}){return st({queryKey:$t.list(t),queryFn:async()=>{const e=[];let r=1;const n=100;for(;;){const i=await He.getPeople({per_page:n,page:r,_embed:!0,...t}),s=i.data.map(are);if(e.push(...s),s.length<n)break;const o=parseInt(i.headers["x-wp-totalpages"]||i.headers["X-WP-TotalPages"]||"0",10);if(o>0&&r>=o)break;r++}return e}})}function lre(t){return st({queryKey:$t.detail(t),queryFn:async()=>{const e=await He.getPerson(t,{_embed:!0});return are(e.data)},enabled:!!t})}function bme(t){return st({queryKey:$t.timeline(t),queryFn:async()=>(await _e.getPersonTimeline(t)).data,enabled:!!t})}function xme(t){return st({queryKey:$t.dates(t),queryFn:async()=>(await _e.getPersonDates(t)).data,enabled:!!t})}function wme(){const t=rt();return We({mutationFn:({id:e,data:r})=>He.updatePerson(e,r),onSuccess:(e,{id:r,data:n})=>{var i;t.invalidateQueries({queryKey:$t.detail(r)}),t.invalidateQueries({queryKey:$t.lists()}),t.invalidateQueries({queryKey:["dashboard"]}),(i=n==null?void 0:n.acf)!=null&&i.relationships&&(Array.isArray(n.acf.relationships)?n.acf.relationships:[]).forEach(o=>{const a=o.related_person;a&&t.invalidateQueries({queryKey:$t.detail(a)})})}})}function Sme(){const t=rt();return We({mutationFn:e=>He.deletePerson(e,{force:!0}),onSuccess:()=>{t.invalidateQueries({queryKey:$t.lists()}),t.invalidateQueries({queryKey:$t.details()}),t.invalidateQueries({queryKey:["dashboard"]})}})}function _me(){const t=rt();return We({mutationFn:({personId:e,content:r})=>_e.createNote(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:$t.timeline(r)})}})}function Eme(){const t=rt();return We({mutationFn:({noteId:e,personId:r})=>_e.deleteNote(e),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:$t.timeline(r)})}})}function PM(){const t=rt();return We({mutationFn:({personId:e,data:r})=>_e.createActivity(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:$t.timeline(r)})}})}function Nme(){const t=rt();return We({mutationFn:({activityId:e,data:r,personId:n})=>_e.updateActivity(e,r),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:$t.timeline(r)})}})}function kme(){const t=rt();return We({mutationFn:({activityId:e,personId:r})=>_e.deleteActivity(e),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:$t.timeline(r)})}})}function cre(){const t=rt();return We({mutationFn:({personId:e,data:r})=>_e.createTodo(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:$t.timeline(r)})}})}function Cme(){const t=rt();return We({mutationFn:({todoId:e,data:r,personId:n})=>_e.updateTodo(e,r),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:$t.timeline(r)})}})}function Tme(){const t=rt();return We({mutationFn:({todoId:e,personId:r})=>_e.deleteTodo(e),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:$t.timeline(r)})}})}function jme(){const t=rt();return We({mutationFn:({dateId:e,personId:r})=>He.deleteDate(e),onSuccess:(e,{personId:r})=>{r&&(t.invalidateQueries({queryKey:$t.dates(r)}),t.invalidateQueries({queryKey:$t.detail(r)})),t.invalidateQueries({queryKey:["reminders"]})}})}function ure({isOpen:t,onClose:e}){const[r,n]=k.useState(""),[i,s]=k.useState(""),[o,a]=k.useState(""),[l,u]=k.useState(!1),[d,h]=k.useState(""),{data:f=[],isLoading:p}=Gc(),m=cre(),g=rt(),v=k.useMemo(()=>{const _=d.toLowerCase().trim();let E=f;return _&&(E=f.filter(N=>{var T,j,P;return((T=N.name)==null?void 0:T.toLowerCase().includes(_))||((j=N.first_name)==null?void 0:j.toLowerCase().includes(_))||((P=N.last_name)==null?void 0:P.toLowerCase().includes(_))})),[...E].sort((N,T)=>(N.name||"").localeCompare(T.name||""))},[f,d]),y=k.useMemo(()=>f.find(_=>_.id===parseInt(o)),[f,o]),b=()=>new Date().toISOString().split("T")[0];if(k.useEffect(()=>{t&&(n(""),s(b()),a(""),h(""),u(!1))},[t]),!t)return null;const w=async _=>{if(_.preventDefault(),!(!r.trim()||!o))try{await m.mutateAsync({personId:parseInt(o),data:{content:r.trim(),due_date:i||null,is_completed:!1}}),g.invalidateQueries({queryKey:["todos"]}),e()}catch{}},x=()=>{e()},S=_=>{if(!_)return"";try{return new Date(_).toISOString().split("T")[0]}catch{return""}};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Add todo"}),c.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600",disabled:m.isPending,children:c.jsx(mt,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:w,className:"p-4",children:[c.jsxs("div",{className:"mb-4",children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Person ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{type:"button",onClick:()=>u(!l),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:m.isPending,children:[y?c.jsxs("div",{className:"flex items-center gap-2",children:[y.thumbnail?c.jsx("img",{src:y.thumbnail,alt:y.name,className:"w-6 h-6 rounded-full object-cover"}):c.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx(il,{className:"w-4 h-4 text-gray-500"})}),c.jsx("span",{className:"text-gray-900",children:y.name})]}):c.jsx("span",{className:"text-gray-400",children:"Select a person..."}),c.jsx(bp,{className:`w-4 h-4 text-gray-400 transition-transform ${l?"rotate-180":""}`})]}),l&&c.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[c.jsx("div",{className:"p-2 border-b border-gray-100",children:c.jsxs("div",{className:"relative",children:[c.jsx(nl,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),c.jsx("input",{type:"text",value:d,onChange:_=>h(_.target.value),placeholder:"Search people...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),c.jsx("div",{className:"overflow-y-auto max-h-48",children:p?c.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):v.length>0?v.map(_=>c.jsxs("button",{type:"button",onClick:()=>{a(String(_.id)),u(!1),h("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${o===String(_.id)?"bg-primary-50":""}`,children:[_.thumbnail?c.jsx("img",{src:_.thumbnail,alt:_.name,className:"w-6 h-6 rounded-full object-cover"}):c.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx(il,{className:"w-4 h-4 text-gray-500"})}),c.jsx("span",{className:"text-sm text-gray-900 truncate",children:_.name})]},_.id)):c.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"No people found"})})]})]})]}),c.jsxs("div",{className:"mb-4",children:[c.jsxs("label",{htmlFor:"todo-content",className:"block text-sm font-medium text-gray-700 mb-2",children:["Description ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{id:"todo-content",value:r,onChange:_=>n(_.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"What needs to be done?",disabled:m.isPending})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"todo-due-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Due date (optional)"}),c.jsx("input",{id:"todo-due-date",type:"date",value:S(i),onChange:_=>s(_.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:m.isPending})]}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx("button",{type:"button",onClick:x,className:"btn-secondary",disabled:m.isPending,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:m.isPending||!r.trim()||!o,children:m.isPending?"Adding...":"Add todo"})]})]})]})})}var cm=t=>t.type==="checkbox",zl=t=>t instanceof Date,Wn=t=>t==null;const dre=t=>typeof t=="object";var vr=t=>!Wn(t)&&!Array.isArray(t)&&dre(t)&&!zl(t),hre=t=>vr(t)&&t.target?cm(t.target)?t.target.checked:t.target.value:t,Ome=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,fre=(t,e)=>t.has(Ome(e)),Pme=t=>{const e=t.constructor&&t.constructor.prototype;return vr(e)&&e.hasOwnProperty("isPrototypeOf")},IM=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function At(t){if(t instanceof Date)return new Date(t);const e=typeof FileList<"u"&&t instanceof FileList;if(IM&&(t instanceof Blob||e))return t;const r=Array.isArray(t);if(!r&&!(vr(t)&&Pme(t)))return t;const n=r?[]:Object.create(Object.getPrototypeOf(t));for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=At(t[i]));return n}var F0=t=>/^\w*$/.test(t),Pt=t=>t===void 0,q0=t=>Array.isArray(t)?t.filter(Boolean):[],RM=t=>q0(t.replace(/["|']|\]/g,"").split(/\.|\[/)),fe=(t,e,r)=>{if(!e||!vr(t))return r;const n=(F0(e)?[e]:RM(e)).reduce((i,s)=>Wn(i)?i:i[s],t);return Pt(n)||n===t?Pt(t[e])?r:t[e]:n},hi=t=>typeof t=="boolean",Cn=t=>typeof t=="function",Et=(t,e,r)=>{let n=-1;const i=F0(e)?[e]:RM(e),s=i.length,o=s-1;for(;++n<s;){const a=i[n];let l=r;if(n!==o){const u=t[a];l=vr(u)||Array.isArray(u)?u:isNaN(+i[n+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=l,t=t[a]}};const Zy={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},$i={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Js={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},pre=Se.createContext(null);pre.displayName="HookFormContext";const L0=()=>Se.useContext(pre);var mre=(t,e,r,n=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==$i.all&&(e._proxyFormState[o]=!n||$i.all),r&&(r[o]=!0),t[o]}});return i};const B0=typeof window<"u"?Se.useLayoutEffect:Se.useEffect;function Ime(t){const e=L0(),{control:r=e.control,disabled:n,name:i,exact:s}=t||{},[o,a]=Se.useState(r._formState),l=Se.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return B0(()=>r._subscribe({name:i,formState:l.current,exact:s,callback:u=>{!n&&a({...r._formState,...u})}}),[i,n,s]),Se.useEffect(()=>{l.current.isValid&&r._setValid(!0)},[r]),Se.useMemo(()=>mre(o,r,l.current,!1),[o,r])}var fi=t=>typeof t=="string",mI=(t,e,r,n,i)=>fi(t)?(n&&e.watch.add(t),fe(r,t,i)):Array.isArray(t)?t.map(s=>(n&&e.watch.add(s),fe(r,s))):(n&&(e.watchAll=!0),r),gI=t=>Wn(t)||!dre(t);function cs(t,e,r=new WeakSet){if(gI(t)||gI(e))return Object.is(t,e);if(zl(t)&&zl(e))return t.getTime()===e.getTime();const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;if(r.has(t)||r.has(e))return!0;r.add(t),r.add(e);for(const s of n){const o=t[s];if(!i.includes(s))return!1;if(s!=="ref"){const a=e[s];if(zl(o)&&zl(a)||vr(o)&&vr(a)||Array.isArray(o)&&Array.isArray(a)?!cs(o,a,r):!Object.is(o,a))return!1}}return!0}function Rme(t){const e=L0(),{control:r=e.control,name:n,defaultValue:i,disabled:s,exact:o,compute:a}=t||{},l=Se.useRef(i),u=Se.useRef(a),d=Se.useRef(void 0),h=Se.useRef(r),f=Se.useRef(n);u.current=a;const[p,m]=Se.useState(()=>{const x=r._getWatch(n,l.current);return u.current?u.current(x):x}),g=Se.useCallback(x=>{const S=mI(n,r._names,x||r._formValues,!1,l.current);return u.current?u.current(S):S},[r._formValues,r._names,n]),v=Se.useCallback(x=>{if(!s){const S=mI(n,r._names,x||r._formValues,!1,l.current);if(u.current){const _=u.current(S);cs(_,d.current)||(m(_),d.current=_)}else m(S)}},[r._formValues,r._names,s,n]);B0(()=>((h.current!==r||!cs(f.current,n))&&(h.current=r,f.current=n,v()),r._subscribe({name:n,formState:{values:!0},exact:o,callback:x=>{v(x.values)}})),[r,o,n,v]),Se.useEffect(()=>r._removeUnmounted());const y=h.current!==r,b=f.current,w=Se.useMemo(()=>{if(s)return null;const x=!y&&!cs(b,n);return y||x?g():null},[s,y,n,b,g]);return w!==null?w:p}function Mme(t){const e=L0(),{name:r,disabled:n,control:i=e.control,shouldUnregister:s,defaultValue:o,exact:a=!0}=t,l=fre(i._names.array,r),u=Se.useMemo(()=>fe(i._formValues,r,fe(i._defaultValues,r,o)),[i,r,o]),d=Rme({control:i,name:r,defaultValue:u,exact:a}),h=Ime({control:i,name:r,exact:a}),f=Se.useRef(t),p=Se.useRef(void 0),m=Se.useRef(i.register(r,{...t.rules,value:d,...hi(t.disabled)?{disabled:t.disabled}:{}}));f.current=t;const g=Se.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!fe(h.errors,r)},isDirty:{enumerable:!0,get:()=>!!fe(h.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!fe(h.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!fe(h.validatingFields,r)},error:{enumerable:!0,get:()=>fe(h.errors,r)}}),[h,r]),v=Se.useCallback(x=>m.current.onChange({target:{value:hre(x),name:r},type:Zy.CHANGE}),[r]),y=Se.useCallback(()=>m.current.onBlur({target:{value:fe(i._formValues,r),name:r},type:Zy.BLUR}),[r,i._formValues]),b=Se.useCallback(x=>{const S=fe(i._fields,r);S&&S._f&&x&&(S._f.ref={focus:()=>Cn(x.focus)&&x.focus(),select:()=>Cn(x.select)&&x.select(),setCustomValidity:_=>Cn(x.setCustomValidity)&&x.setCustomValidity(_),reportValidity:()=>Cn(x.reportValidity)&&x.reportValidity()})},[i._fields,r]),w=Se.useMemo(()=>({name:r,value:d,...hi(n)||h.disabled?{disabled:h.disabled||n}:{},onChange:v,onBlur:y,ref:b}),[r,n,h.disabled,v,y,b,d]);return Se.useEffect(()=>{const x=i._options.shouldUnregister||s,S=p.current;S&&S!==r&&!l&&i.unregister(S),i.register(r,{...f.current.rules,...hi(f.current.disabled)?{disabled:f.current.disabled}:{}});const _=(E,N)=>{const T=fe(i._fields,E);T&&T._f&&(T._f.mount=N)};if(_(r,!0),x){const E=At(fe(i._options.defaultValues,r,f.current.defaultValue));Et(i._defaultValues,r,E),Pt(fe(i._formValues,r))&&Et(i._formValues,r,E)}return!l&&i.register(r),p.current=r,()=>{(l?x&&!i._state.action:x)?i.unregister(r):_(r,!1)}},[r,i,l,s]),Se.useEffect(()=>{i._setDisabledField({disabled:n,name:r})},[n,r,i]),Se.useMemo(()=>({field:w,formState:h,fieldState:g}),[w,h,g])}const ev=t=>t.render(Mme(t));var Ame=(t,e,r,n,i)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:i||!0}}:{},Qn=t=>Array.isArray(t)?t:[t],s5=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}};function gre(t,e){const r={};for(const n in t)if(t.hasOwnProperty(n)){const i=t[n],s=e[n];if(i&&vr(i)&&s){const o=gre(i,s);vr(o)&&(r[n]=o)}else t[n]&&(r[n]=s)}return r}var un=t=>vr(t)&&!Object.keys(t).length,MM=t=>t.type==="file",tv=t=>{if(!IM)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},yre=t=>t.type==="select-multiple",AM=t=>t.type==="radio",Dme=t=>AM(t)||cm(t),Cx=t=>tv(t)&&t.isConnected;function $me(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=Pt(t)?n++:t[e[n++]];return t}function Fme(t){for(const e in t)if(t.hasOwnProperty(e)&&!Pt(t[e]))return!1;return!0}function cr(t,e){const r=Array.isArray(e)?e:F0(e)?[e]:RM(e),n=r.length===1?t:$me(t,r),i=r.length-1,s=r[i];return n&&delete n[s],i!==0&&(vr(n)&&un(n)||Array.isArray(n)&&Fme(n))&&cr(t,r.slice(0,-1)),t}var qme=t=>{for(const e in t)if(Cn(t[e]))return!0;return!1};function vre(t){return Array.isArray(t)||vr(t)&&!qme(t)}function yI(t,e={}){for(const r in t){const n=t[r];vre(n)?(e[r]=Array.isArray(n)?[]:{},yI(n,e[r])):Pt(n)||(e[r]=!0)}return e}function Pu(t,e,r){r||(r=yI(e));for(const n in t){const i=t[n];if(vre(i))Pt(e)||gI(r[n])?r[n]=yI(i,Array.isArray(i)?[]:{}):Pu(i,Wn(e)?{}:e[n],r[n]);else{const s=e[n];r[n]=!cs(i,s)}}return r}const o5={value:!1,isValid:!1},a5={value:!0,isValid:!0};var bre=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Pt(t[0].attributes.value)?Pt(t[0].value)||t[0].value===""?a5:{value:t[0].value,isValid:!0}:a5:o5}return o5},xre=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>Pt(t)?t:e?t===""?NaN:t&&+t:r&&fi(t)?new Date(t):n?n(t):t;const l5={isValid:!1,value:null};var wre=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,l5):l5;function c5(t){const e=t.ref;return MM(e)?e.files:AM(e)?wre(t.refs).value:yre(e)?[...e.selectedOptions].map(({value:r})=>r):cm(e)?bre(t.refs).value:xre(Pt(e.value)?t.ref.value:e.value,t)}var Lme=(t,e,r,n)=>{const i={};for(const s of t){const o=fe(e,s);o&&Et(i,s,o._f)}return{criteriaMode:r,names:[...t],fields:i,shouldUseNativeValidation:n}},rv=t=>t instanceof RegExp,nf=t=>Pt(t)?t:rv(t)?t.source:vr(t)?rv(t.value)?t.value.source:t.value:t,Gu=t=>({isOnSubmit:!t||t===$i.onSubmit,isOnBlur:t===$i.onBlur,isOnChange:t===$i.onChange,isOnAll:t===$i.all,isOnTouch:t===$i.onTouched});const u5="AsyncFunction";var Bme=t=>!!t&&!!t.validate&&!!(Cn(t.validate)&&t.validate.constructor.name===u5||vr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===u5)),zme=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),vI=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const cd=(t,e,r,n)=>{for(const i of r||Object.keys(t)){const s=fe(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!n)return!0;if(o.ref&&e(o.ref,o.name)&&!n)return!0;if(cd(a,e))break}else if(vr(a)&&cd(a,e))break}}};function d5(t,e,r){const n=fe(t,r);if(n||F0(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const s=i.join("."),o=fe(e,s),a=fe(t,s);if(o&&!Array.isArray(o)&&r!==s)return{name:r};if(a&&a.type)return{name:s,error:a};if(a&&a.root&&a.root.type)return{name:`${s}.root`,error:a.root};i.pop()}return{name:r}}var Vme=(t,e,r,n)=>{r(t);const{name:i,...s}=t;return un(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!n||$i.all))},Wme=(t,e,r)=>!t||!e||t===e||Qn(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n))),Ume=(t,e,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(e||t):(r?n.isOnBlur:i.isOnBlur)?!t:(r?n.isOnChange:i.isOnChange)?t:!0,Hme=(t,e)=>!q0(fe(t,e)).length&&cr(t,e),Sre=(t,e,r)=>{const n=Qn(fe(t,r));return Et(n,"root",e[r]),Et(t,r,n),t};function h5(t,e,r="validate"){if(fi(t)||Array.isArray(t)&&t.every(fi)||hi(t)&&!t)return{type:r,message:fi(t)?t:"",ref:e}}var Eu=t=>vr(t)&&!rv(t)?t:{value:t,message:""},bI=async(t,e,r,n,i,s)=>{const{ref:o,refs:a,required:l,maxLength:u,minLength:d,min:h,max:f,pattern:p,validate:m,name:g,valueAsNumber:v,mount:y}=t._f,b=fe(r,g);if(!y||e.has(g))return{};const w=a?a[0]:o,x=O=>{i&&w.reportValidity&&(w.setCustomValidity(hi(O)?"":O||""),w.reportValidity())},S={},_=AM(o),E=cm(o),N=_||E,T=(v||MM(o))&&Pt(o.value)&&Pt(b)||tv(o)&&o.value===""||b===""||Array.isArray(b)&&!b.length,j=Ame.bind(null,g,n,S),P=(O,C,D,F=Js.maxLength,$=Js.minLength)=>{const L=O?C:D;S[g]={type:O?F:$,message:L,ref:o,...j(O?F:$,L)}};if(s?!Array.isArray(b)||!b.length:l&&(!N&&(T||Wn(b))||hi(b)&&!b||E&&!bre(a).isValid||_&&!wre(a).isValid)){const{value:O,message:C}=fi(l)?{value:!!l,message:l}:Eu(l);if(O&&(S[g]={type:Js.required,message:C,ref:w,...j(Js.required,C)},!n))return x(C),S}if(!T&&(!Wn(h)||!Wn(f))){let O,C;const D=Eu(f),F=Eu(h);if(!Wn(b)&&!isNaN(b)){const $=o.valueAsNumber||b&&+b;Wn(D.value)||(O=$>D.value),Wn(F.value)||(C=$<F.value)}else{const $=o.valueAsDate||new Date(b),L=Y=>new Date(new Date().toDateString()+" "+Y),M=o.type=="time",W=o.type=="week";fi(D.value)&&b&&(O=M?L(b)>L(D.value):W?b>D.value:$>new Date(D.value)),fi(F.value)&&b&&(C=M?L(b)<L(F.value):W?b<F.value:$<new Date(F.value))}if((O||C)&&(P(!!O,D.message,F.message,Js.max,Js.min),!n))return x(S[g].message),S}if((u||d)&&!T&&(fi(b)||s&&Array.isArray(b))){const O=Eu(u),C=Eu(d),D=!Wn(O.value)&&b.length>+O.value,F=!Wn(C.value)&&b.length<+C.value;if((D||F)&&(P(D,O.message,C.message),!n))return x(S[g].message),S}if(p&&!T&&fi(b)){const{value:O,message:C}=Eu(p);if(rv(O)&&!b.match(O)&&(S[g]={type:Js.pattern,message:C,ref:o,...j(Js.pattern,C)},!n))return x(C),S}if(m){if(Cn(m)){const O=await m(b,r),C=h5(O,w);if(C&&(S[g]={...C,...j(Js.validate,C.message)},!n))return x(C.message),S}else if(vr(m)){let O={};for(const C in m){if(!un(O)&&!n)break;const D=h5(await m[C](b,r),w,C);D&&(O={...D,...j(C,D.message)},x(D.message),n&&(S[g]=O))}if(!un(O)&&(S[g]={ref:w,...O},!n))return S}}return x(!0),S};const Kme={mode:$i.onSubmit,reValidateMode:$i.onChange,shouldFocusError:!0};function Gme(t={}){let e={...Kme,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Cn(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},n={},i=vr(e.defaultValues)||vr(e.values)?At(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:At(i),o={action:!1,mount:!1,watch:!1,keepIsValid:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={...d};let f={...h};const p={array:s5(),state:s5()},m=e.criteriaMode===$i.all,g=A=>q=>{clearTimeout(u),u=setTimeout(A,q)},v=async A=>{if(!o.keepIsValid&&!e.disabled&&(h.isValid||f.isValid||A)){let q;e.resolver?(q=un((await N()).errors),y()):q=await j(n,!0),q!==r.isValid&&p.state.next({isValid:q})}},y=(A,q)=>{!e.disabled&&(h.isValidating||h.validatingFields||f.isValidating||f.validatingFields)&&((A||Array.from(a.mount)).forEach(z=>{z&&(q?Et(r.validatingFields,z,q):cr(r.validatingFields,z))}),p.state.next({validatingFields:r.validatingFields,isValidating:!un(r.validatingFields)}))},b=(A,q=[],z,ae,ee=!0,J=!0)=>{if(ae&&z&&!e.disabled){if(o.action=!0,J&&Array.isArray(fe(n,A))){const ye=z(fe(n,A),ae.argA,ae.argB);ee&&Et(n,A,ye)}if(J&&Array.isArray(fe(r.errors,A))){const ye=z(fe(r.errors,A),ae.argA,ae.argB);ee&&Et(r.errors,A,ye),Hme(r.errors,A)}if((h.touchedFields||f.touchedFields)&&J&&Array.isArray(fe(r.touchedFields,A))){const ye=z(fe(r.touchedFields,A),ae.argA,ae.argB);ee&&Et(r.touchedFields,A,ye)}(h.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Pu(i,s)),p.state.next({name:A,isDirty:O(A,q),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Et(s,A,q)},w=(A,q)=>{Et(r.errors,A,q),p.state.next({errors:r.errors})},x=A=>{r.errors=A,p.state.next({errors:r.errors,isValid:!1})},S=(A,q,z,ae)=>{const ee=fe(n,A);if(ee){const J=fe(s,A,Pt(z)?fe(i,A):z);Pt(J)||ae&&ae.defaultChecked||q?Et(s,A,q?J:c5(ee._f)):F(A,J),o.mount&&!o.action&&v()}},_=(A,q,z,ae,ee)=>{let J=!1,ye=!1;const Ue={name:A};if(!e.disabled){if(!z||ae){(h.isDirty||f.isDirty)&&(ye=r.isDirty,r.isDirty=Ue.isDirty=O(),J=ye!==Ue.isDirty);const Ye=cs(fe(i,A),q);ye=!!fe(r.dirtyFields,A),Ye?cr(r.dirtyFields,A):Et(r.dirtyFields,A,!0),Ue.dirtyFields=r.dirtyFields,J=J||(h.dirtyFields||f.dirtyFields)&&ye!==!Ye}if(z){const Ye=fe(r.touchedFields,A);Ye||(Et(r.touchedFields,A,z),Ue.touchedFields=r.touchedFields,J=J||(h.touchedFields||f.touchedFields)&&Ye!==z)}J&&ee&&p.state.next(Ue)}return J?Ue:{}},E=(A,q,z,ae)=>{const ee=fe(r.errors,A),J=(h.isValid||f.isValid)&&hi(q)&&r.isValid!==q;if(e.delayError&&z?(l=g(()=>w(A,z)),l(e.delayError)):(clearTimeout(u),l=null,z?Et(r.errors,A,z):cr(r.errors,A)),(z?!cs(ee,z):ee)||!un(ae)||J){const ye={...ae,...J&&hi(q)?{isValid:q}:{},errors:r.errors,name:A};r={...r,...ye},p.state.next(ye)}},N=async A=>(y(A,!0),await e.resolver(s,e.context,Lme(A||a.mount,n,e.criteriaMode,e.shouldUseNativeValidation))),T=async A=>{const{errors:q}=await N(A);if(y(A),A)for(const z of A){const ae=fe(q,z);ae?Et(r.errors,z,ae):cr(r.errors,z)}else r.errors=q;return q},j=async(A,q,z={valid:!0})=>{for(const ae in A){const ee=A[ae];if(ee){const{_f:J,...ye}=ee;if(J){const Ue=a.array.has(J.name),Ye=ee._f&&Bme(ee._f);Ye&&h.validatingFields&&y([J.name],!0);const qt=await bI(ee,a.disabled,s,m,e.shouldUseNativeValidation&&!q,Ue);if(Ye&&h.validatingFields&&y([J.name]),qt[J.name]&&(z.valid=!1,q))break;!q&&(fe(qt,J.name)?Ue?Sre(r.errors,qt,J.name):Et(r.errors,J.name,qt[J.name]):cr(r.errors,J.name))}!un(ye)&&await j(ye,q,z)}}return z.valid},P=()=>{for(const A of a.unMount){const q=fe(n,A);q&&(q._f.refs?q._f.refs.every(z=>!Cx(z)):!Cx(q._f.ref))&&Oe(A)}a.unMount=new Set},O=(A,q)=>!e.disabled&&(A&&q&&Et(s,A,q),!cs(Q(),i)),C=(A,q,z)=>mI(A,a,{...o.mount?s:Pt(q)?i:fi(A)?{[A]:q}:q},z,q),D=A=>q0(fe(o.mount?s:i,A,e.shouldUnregister?fe(i,A,[]):[])),F=(A,q,z={})=>{const ae=fe(n,A);let ee=q;if(ae){const J=ae._f;J&&(!J.disabled&&Et(s,A,xre(q,J)),ee=tv(J.ref)&&Wn(q)?"":q,yre(J.ref)?[...J.ref.options].forEach(ye=>ye.selected=ee.includes(ye.value)):J.refs?cm(J.ref)?J.refs.forEach(ye=>{(!ye.defaultChecked||!ye.disabled)&&(Array.isArray(ee)?ye.checked=!!ee.find(Ue=>Ue===ye.value):ye.checked=ee===ye.value||!!ee)}):J.refs.forEach(ye=>ye.checked=ye.value===ee):MM(J.ref)?J.ref.value="":(J.ref.value=ee,J.ref.type||p.state.next({name:A,values:At(s)})))}(z.shouldDirty||z.shouldTouch)&&_(A,ee,z.shouldTouch,z.shouldDirty,!0),z.shouldValidate&&Y(A)},$=(A,q,z)=>{for(const ae in q){if(!q.hasOwnProperty(ae))return;const ee=q[ae],J=A+"."+ae,ye=fe(n,J);(a.array.has(A)||vr(ee)||ye&&!ye._f)&&!zl(ee)?$(J,ee,z):F(J,ee,z)}},L=(A,q,z={})=>{const ae=fe(n,A),ee=a.array.has(A),J=At(q);Et(s,A,J),ee?(p.array.next({name:A,values:At(s)}),(h.isDirty||h.dirtyFields||f.isDirty||f.dirtyFields)&&z.shouldDirty&&p.state.next({name:A,dirtyFields:Pu(i,s),isDirty:O(A,J)})):ae&&!ae._f&&!Wn(J)?$(A,J,z):F(A,J,z),vI(A,a)&&p.state.next({...r,name:A}),p.state.next({name:o.mount?A:void 0,values:At(s)})},M=async A=>{o.mount=!0;const q=A.target;let z=q.name,ae=!0;const ee=fe(n,z),J=Ye=>{ae=Number.isNaN(Ye)||zl(Ye)&&isNaN(Ye.getTime())||cs(Ye,fe(s,z,Ye))},ye=Gu(e.mode),Ue=Gu(e.reValidateMode);if(ee){let Ye,qt;const Ee=q.type?c5(ee._f):hre(A),ne=A.type===Zy.BLUR||A.type===Zy.FOCUS_OUT,ge=!zme(ee._f)&&!e.resolver&&!fe(r.errors,z)&&!ee._f.deps||Ume(ne,fe(r.touchedFields,z),r.isSubmitted,Ue,ye),he=vI(z,a,ne);Et(s,z,Ee),ne?(!q||!q.readOnly)&&(ee._f.onBlur&&ee._f.onBlur(A),l&&l(0)):ee._f.onChange&&ee._f.onChange(A);const ke=_(z,Ee,ne),Ze=!un(ke)||he;if(!ne&&p.state.next({name:z,type:A.type,values:At(s)}),ge)return(h.isValid||f.isValid)&&(e.mode==="onBlur"?ne&&v():ne||v()),Ze&&p.state.next({name:z,...he?{}:ke});if(!ne&&he&&p.state.next({...r}),e.resolver){const{errors:ki}=await N([z]);if(y([z]),J(Ee),ae){const bn=d5(r.errors,n,z),El=d5(ki,n,bn.name||z);Ye=El.error,z=El.name,qt=un(ki)}}else y([z],!0),Ye=(await bI(ee,a.disabled,s,m,e.shouldUseNativeValidation))[z],y([z]),J(Ee),ae&&(Ye?qt=!1:(h.isValid||f.isValid)&&(qt=await j(n,!0)));ae&&(ee._f.deps&&(!Array.isArray(ee._f.deps)||ee._f.deps.length>0)&&Y(ee._f.deps),E(z,qt,Ye,ke))}},W=(A,q)=>{if(fe(r.errors,q)&&A.focus)return A.focus(),1},Y=async(A,q={})=>{let z,ae;const ee=Qn(A);if(e.resolver){const J=await T(Pt(A)?A:ee);z=un(J),ae=A?!ee.some(ye=>fe(J,ye)):z}else A?(ae=(await Promise.all(ee.map(async J=>{const ye=fe(n,J);return await j(ye&&ye._f?{[J]:ye}:ye)}))).every(Boolean),!(!ae&&!r.isValid)&&v()):ae=z=await j(n);return p.state.next({...!fi(A)||(h.isValid||f.isValid)&&z!==r.isValid?{}:{name:A},...e.resolver||!A?{isValid:z}:{},errors:r.errors}),q.shouldFocus&&!ae&&cd(n,W,A?ee:a.mount),ae},Q=(A,q)=>{let z={...o.mount?s:i};return q&&(z=gre(q.dirtyFields?r.dirtyFields:r.touchedFields,z)),Pt(A)?z:fi(A)?fe(z,A):A.map(ae=>fe(z,ae))},pe=(A,q)=>({invalid:!!fe((q||r).errors,A),isDirty:!!fe((q||r).dirtyFields,A),error:fe((q||r).errors,A),isValidating:!!fe(r.validatingFields,A),isTouched:!!fe((q||r).touchedFields,A)}),K=A=>{A&&Qn(A).forEach(q=>cr(r.errors,q)),p.state.next({errors:A?r.errors:{}})},oe=(A,q,z)=>{const ae=(fe(n,A,{_f:{}})._f||{}).ref,ee=fe(r.errors,A)||{},{ref:J,message:ye,type:Ue,...Ye}=ee;Et(r.errors,A,{...Ye,...q,ref:ae}),p.state.next({name:A,errors:r.errors,isValid:!1}),z&&z.shouldFocus&&ae&&ae.focus&&ae.focus()},Te=(A,q)=>Cn(A)?p.state.subscribe({next:z=>"values"in z&&A(C(void 0,q),z)}):C(A,q,!0),me=A=>p.state.subscribe({next:q=>{Wme(A.name,q.name,A.exact)&&Vme(q,A.formState||h,lr,A.reRenderRoot)&&A.callback({values:{...s},...r,...q,defaultValues:i})}}).unsubscribe,Be=A=>(o.mount=!0,f={...f,...A.formState},me({...A,formState:{...d,...A.formState}})),Oe=(A,q={})=>{for(const z of A?Qn(A):a.mount)a.mount.delete(z),a.array.delete(z),q.keepValue||(cr(n,z),cr(s,z)),!q.keepError&&cr(r.errors,z),!q.keepDirty&&cr(r.dirtyFields,z),!q.keepTouched&&cr(r.touchedFields,z),!q.keepIsValidating&&cr(r.validatingFields,z),!e.shouldUnregister&&!q.keepDefaultValue&&cr(i,z);p.state.next({values:At(s)}),p.state.next({...r,...q.keepDirty?{isDirty:O()}:{}}),!q.keepIsValid&&v()},gt=({disabled:A,name:q})=>{(hi(A)&&o.mount||A||a.disabled.has(q))&&(A?a.disabled.add(q):a.disabled.delete(q))},U=(A,q={})=>{let z=fe(n,A);const ae=hi(q.disabled)||hi(e.disabled);return Et(n,A,{...z||{},_f:{...z&&z._f?z._f:{ref:{name:A}},name:A,mount:!0,...q}}),a.mount.add(A),z?gt({disabled:hi(q.disabled)?q.disabled:e.disabled,name:A}):S(A,!0,q.value),{...ae?{disabled:q.disabled||e.disabled}:{},...e.progressive?{required:!!q.required,min:nf(q.min),max:nf(q.max),minLength:nf(q.minLength),maxLength:nf(q.maxLength),pattern:nf(q.pattern)}:{},name:A,onChange:M,onBlur:M,ref:ee=>{if(ee){U(A,q),z=fe(n,A);const J=Pt(ee.value)&&ee.querySelectorAll&&ee.querySelectorAll("input,select,textarea")[0]||ee,ye=Dme(J),Ue=z._f.refs||[];if(ye?Ue.find(Ye=>Ye===J):J===z._f.ref)return;Et(n,A,{_f:{...z._f,...ye?{refs:[...Ue.filter(Cx),J,...Array.isArray(fe(i,A))?[{}]:[]],ref:{type:J.type,name:A}}:{ref:J}}}),S(A,!1,void 0,J)}else z=fe(n,A,{}),z._f&&(z._f.mount=!1),(e.shouldUnregister||q.shouldUnregister)&&!(fre(a.array,A)&&o.action)&&a.unMount.add(A)}}},ce=()=>e.shouldFocusError&&cd(n,W,a.mount),Me=A=>{hi(A)&&(p.state.next({disabled:A}),cd(n,(q,z)=>{const ae=fe(n,z);ae&&(q.disabled=ae._f.disabled||A,Array.isArray(ae._f.refs)&&ae._f.refs.forEach(ee=>{ee.disabled=ae._f.disabled||A}))},0,!1))},Fe=(A,q)=>async z=>{let ae;z&&(z.preventDefault&&z.preventDefault(),z.persist&&z.persist());let ee=At(s);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:J,values:ye}=await N();y(),r.errors=J,ee=At(ye)}else await j(n);if(a.disabled.size)for(const J of a.disabled)cr(ee,J);if(cr(r.errors,"root"),un(r.errors)){p.state.next({errors:{}});try{await A(ee,z)}catch(J){ae=J}}else q&&await q({...r.errors},z),ce(),setTimeout(ce);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:un(r.errors)&&!ae,submitCount:r.submitCount+1,errors:r.errors}),ae)throw ae},Tt=(A,q={})=>{fe(n,A)&&(Pt(q.defaultValue)?L(A,At(fe(i,A))):(L(A,q.defaultValue),Et(i,A,At(q.defaultValue))),q.keepTouched||cr(r.touchedFields,A),q.keepDirty||(cr(r.dirtyFields,A),r.isDirty=q.defaultValue?O(A,At(fe(i,A))):O()),q.keepError||(cr(r.errors,A),h.isValid&&v()),p.state.next({...r}))},Yr=(A,q={})=>{const z=A?At(A):i,ae=At(z),ee=un(A),J=ee?i:ae;if(q.keepDefaultValues||(i=z),!q.keepValues){if(q.keepDirtyValues){const ye=new Set([...a.mount,...Object.keys(Pu(i,s))]);for(const Ue of Array.from(ye))fe(r.dirtyFields,Ue)?Et(J,Ue,fe(s,Ue)):L(Ue,fe(J,Ue))}else{if(IM&&Pt(A))for(const ye of a.mount){const Ue=fe(n,ye);if(Ue&&Ue._f){const Ye=Array.isArray(Ue._f.refs)?Ue._f.refs[0]:Ue._f.ref;if(tv(Ye)){const qt=Ye.closest("form");if(qt){qt.reset();break}}}}if(q.keepFieldsRef)for(const ye of a.mount)L(ye,fe(J,ye));else n={}}s=e.shouldUnregister?q.keepDefaultValues?At(i):{}:At(J),p.array.next({values:{...J}}),p.state.next({values:{...J}})}a={mount:q.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!q.keepIsValid||!!q.keepDirtyValues||!e.shouldUnregister&&!un(J),o.watch=!!e.shouldUnregister,o.keepIsValid=!!q.keepIsValid,o.action=!1,q.keepErrors||(r.errors={}),p.state.next({submitCount:q.keepSubmitCount?r.submitCount:0,isDirty:ee?!1:q.keepDirty?r.isDirty:!!(q.keepDefaultValues&&!cs(A,i)),isSubmitted:q.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:ee?{}:q.keepDirtyValues?q.keepDefaultValues&&s?Pu(i,s):r.dirtyFields:q.keepDefaultValues&&A?Pu(i,A):q.keepDirty?r.dirtyFields:{},touchedFields:q.keepTouched?r.touchedFields:{},errors:q.keepErrors?r.errors:{},isSubmitSuccessful:q.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},Tr=(A,q)=>Yr(Cn(A)?A(s):A,{...e.resetOptions,...q}),dt=(A,q={})=>{const z=fe(n,A),ae=z&&z._f;if(ae){const ee=ae.refs?ae.refs[0]:ae.ref;ee.focus&&setTimeout(()=>{ee.focus(),q.shouldSelect&&Cn(ee.select)&&ee.select()})}},lr=A=>{r={...r,...A}},Jt={control:{register:U,unregister:Oe,getFieldState:pe,handleSubmit:Fe,setError:oe,_subscribe:me,_runSchema:N,_updateIsValidating:y,_focusError:ce,_getWatch:C,_getDirty:O,_setValid:v,_setFieldArray:b,_setDisabledField:gt,_setErrors:x,_getFieldArray:D,_reset:Yr,_resetDefaultValues:()=>Cn(e.defaultValues)&&e.defaultValues().then(A=>{Tr(A,e.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:P,_disableForm:Me,_subjects:p,_proxyFormState:h,get _fields(){return n},get _formValues(){return s},get _state(){return o},set _state(A){o=A},get _defaultValues(){return i},get _names(){return a},set _names(A){a=A},get _formState(){return r},get _options(){return e},set _options(A){e={...e,...A}}},subscribe:Be,trigger:Y,register:U,handleSubmit:Fe,watch:Te,setValue:L,getValues:Q,reset:Tr,resetField:Tt,clearErrors:K,unregister:Oe,setError:oe,setFocus:dt,getFieldState:pe};return{...Jt,formControl:Jt}}var Xo=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const t=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const r=(Math.random()*16+t)%16|0;return(e=="x"?r:r&3|8).toString(16)})},Tx=(t,e,r={})=>r.shouldFocus||Pt(r.shouldFocus)?r.focusName||`${t}.${Pt(r.focusIndex)?e:r.focusIndex}.`:"",jx=(t,e)=>[...t,...Qn(e)],Ox=t=>Array.isArray(t)?t.map(()=>{}):void 0;function Px(t,e,r){return[...t.slice(0,e),...Qn(r),...t.slice(e)]}var Ix=(t,e,r)=>Array.isArray(t)?(Pt(t[r])&&(t[r]=void 0),t.splice(r,0,t.splice(e,1)[0]),t):[],Rx=(t,e)=>[...Qn(e),...Qn(t)];function Yme(t,e){let r=0;const n=[...t];for(const i of e)n.splice(i-r,1),r++;return q0(n).length?n:[]}var Mx=(t,e)=>Pt(e)?[]:Yme(t,Qn(e).sort((r,n)=>r-n)),Ax=(t,e,r)=>{[t[e],t[r]]=[t[r],t[e]]},f5=(t,e,r)=>(t[e]=r,t);function Qme(t){const e=L0(),{control:r=e.control,name:n,keyName:i="id",shouldUnregister:s,rules:o}=t,[a,l]=Se.useState(r._getFieldArray(n)),u=Se.useRef(r._getFieldArray(n).map(Xo)),d=Se.useRef(!1);r._names.array.add(n),Se.useMemo(()=>o&&a.length>=0&&r.register(n,o),[r,n,a.length,o]),B0(()=>r._subjects.array.subscribe({next:({values:x,name:S})=>{if(S===n||!S){const _=fe(x,n);Array.isArray(_)&&(l(_),u.current=_.map(Xo))}}}).unsubscribe,[r,n]);const h=Se.useCallback(x=>{d.current=!0,r._setFieldArray(n,x)},[r,n]),f=(x,S)=>{const _=Qn(At(x)),E=jx(r._getFieldArray(n),_);r._names.focus=Tx(n,E.length-1,S),u.current=jx(u.current,_.map(Xo)),h(E),l(E),r._setFieldArray(n,E,jx,{argA:Ox(x)})},p=(x,S)=>{const _=Qn(At(x)),E=Rx(r._getFieldArray(n),_);r._names.focus=Tx(n,0,S),u.current=Rx(u.current,_.map(Xo)),h(E),l(E),r._setFieldArray(n,E,Rx,{argA:Ox(x)})},m=x=>{const S=Mx(r._getFieldArray(n),x);u.current=Mx(u.current,x),h(S),l(S),!Array.isArray(fe(r._fields,n))&&Et(r._fields,n,void 0),r._setFieldArray(n,S,Mx,{argA:x})},g=(x,S,_)=>{const E=Qn(At(S)),N=Px(r._getFieldArray(n),x,E);r._names.focus=Tx(n,x,_),u.current=Px(u.current,x,E.map(Xo)),h(N),l(N),r._setFieldArray(n,N,Px,{argA:x,argB:Ox(S)})},v=(x,S)=>{const _=r._getFieldArray(n);Ax(_,x,S),Ax(u.current,x,S),h(_),l(_),r._setFieldArray(n,_,Ax,{argA:x,argB:S},!1)},y=(x,S)=>{const _=r._getFieldArray(n);Ix(_,x,S),Ix(u.current,x,S),h(_),l(_),r._setFieldArray(n,_,Ix,{argA:x,argB:S},!1)},b=(x,S)=>{const _=At(S),E=f5(r._getFieldArray(n),x,_);u.current=[...E].map((N,T)=>!N||T===x?Xo():u.current[T]),h(E),l([...E]),r._setFieldArray(n,E,f5,{argA:x,argB:_},!0,!1)},w=x=>{const S=Qn(At(x));u.current=S.map(Xo),h([...S]),l([...S]),r._setFieldArray(n,[...S],_=>_,{},!0,!1)};return Se.useEffect(()=>{if(r._state.action=!1,vI(n,r._names)&&r._subjects.state.next({...r._formState}),d.current&&(!Gu(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!Gu(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(x=>{r._updateIsValidating([n]);const S=fe(x.errors,n),_=fe(r._formState.errors,n);(_?!S&&_.type||S&&(_.type!==S.type||_.message!==S.message):S&&S.type)&&(S?Et(r._formState.errors,n,S):cr(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const x=fe(r._fields,n);x&&x._f&&!(Gu(r._options.reValidateMode).isOnSubmit&&Gu(r._options.mode).isOnSubmit)&&bI(x,r._names.disabled,r._formValues,r._options.criteriaMode===$i.all,r._options.shouldUseNativeValidation,!0).then(S=>!un(S)&&r._subjects.state.next({errors:Sre(r._formState.errors,S,n)}))}r._subjects.state.next({name:n,values:At(r._formValues)}),r._names.focus&&cd(r._fields,(x,S)=>{if(r._names.focus&&S.startsWith(r._names.focus)&&x.focus)return x.focus(),1}),r._names.focus="",r._setValid(),d.current=!1},[a,n,r]),Se.useEffect(()=>(!fe(r._formValues,n)&&r._setFieldArray(n),()=>{const x=(S,_)=>{const E=fe(r._fields,S);E&&E._f&&(E._f.mount=_)};r._options.shouldUnregister||s?r.unregister(n):x(n,!1)}),[n,r,i,s]),{swap:Se.useCallback(v,[h,n,r]),move:Se.useCallback(y,[h,n,r]),prepend:Se.useCallback(p,[h,n,r]),append:Se.useCallback(f,[h,n,r]),remove:Se.useCallback(m,[h,n,r]),insert:Se.useCallback(g,[h,n,r]),update:Se.useCallback(b,[h,n,r]),replace:Se.useCallback(w,[h,n,r]),fields:Se.useMemo(()=>a.map((x,S)=>({...x,[i]:u.current[S]||Xo()})),[a,i])}}function Vs(t={}){const e=Se.useRef(void 0),r=Se.useRef(void 0),[n,i]=Se.useState({isDirty:!1,isValidating:!1,isLoading:Cn(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Cn(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:n},t.defaultValues&&!Cn(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...a}=Gme(t);e.current={...a,formState:n}}const s=e.current.control;return s._options=t,B0(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(a=>({...a,isReady:!0})),s._formState.isReady=!0,o},[s]),Se.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),Se.useEffect(()=>{t.mode&&(s._options.mode=t.mode),t.reValidateMode&&(s._options.reValidateMode=t.reValidateMode)},[s,t.mode,t.reValidateMode]),Se.useEffect(()=>{t.errors&&(s._setErrors(t.errors),s._focusError())},[s,t.errors]),Se.useEffect(()=>{t.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,t.shouldUnregister]),Se.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==n.isDirty&&s._subjects.state.next({isDirty:o})}},[s,n.isDirty]),Se.useEffect(()=>{var o;t.values&&!cs(t.values,r.current)?(s._reset(t.values,{keepFieldsRef:!0,...s._options.resetOptions}),!((o=s._options.resetOptions)===null||o===void 0)&&o.keepIsValid||s._setValid(),r.current=t.values,i(a=>({...a}))):s._resetDefaultValues()},[s,t.values]),Se.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=mre(n,s),e.current}function z0(){return st({queryKey:["workspaces"],queryFn:async()=>(await _e.getWorkspaces()).data})}function _re(t){return st({queryKey:["workspaces",t],queryFn:async()=>(await _e.getWorkspace(t)).data,enabled:!!t})}function Xme(){const t=rt();return We({mutationFn:async e=>(await _e.createWorkspace(e)).data,onSuccess:()=>{t.invalidateQueries({queryKey:["workspaces"]})}})}function Jme(){const t=rt();return We({mutationFn:async({id:e,data:r})=>(await _e.updateWorkspace(e,r)).data,onSuccess:(e,{id:r})=>{t.invalidateQueries({queryKey:["workspaces"]}),t.invalidateQueries({queryKey:["workspaces",r]})}})}function Zme(){const t=rt();return We({mutationFn:async e=>{await _e.deleteWorkspace(e)},onSuccess:()=>{t.invalidateQueries({queryKey:["workspaces"]})}})}function ege(){const t=rt();return We({mutationFn:async({workspaceId:e,userId:r})=>{await _e.removeWorkspaceMember(e,r)},onSuccess:(e,{workspaceId:r})=>{t.invalidateQueries({queryKey:["workspaces",r]})}})}function tge(){const t=rt();return We({mutationFn:async({workspaceId:e,userId:r,role:n})=>(await _e.updateWorkspaceMember(e,r,{role:n})).data,onSuccess:(e,{workspaceId:r})=>{t.invalidateQueries({queryKey:["workspaces",r]})}})}function rge(t){return st({queryKey:["workspaces",t,"invites"],queryFn:async()=>(await _e.getWorkspaceInvites(t)).data,enabled:!!t})}function nge(){const t=rt();return We({mutationFn:async({workspaceId:e,email:r,role:n})=>(await _e.createWorkspaceInvite(e,{email:r,role:n})).data,onSuccess:(e,{workspaceId:r})=>{t.invalidateQueries({queryKey:["workspaces",r,"invites"]})}})}function ige(){const t=rt();return We({mutationFn:async({workspaceId:e,inviteId:r})=>{await _e.revokeWorkspaceInvite(e,r)},onSuccess:(e,{workspaceId:r})=>{t.invalidateQueries({queryKey:["workspaces",r,"invites"]})}})}function sge(t){return st({queryKey:["invite",t],queryFn:async()=>(await _e.validateInvite(t)).data,enabled:!!t,retry:!1})}function oge(){const t=rt();return We({mutationFn:async e=>(await _e.acceptInvite(e)).data,onSuccess:()=>{t.invalidateQueries({queryKey:["workspaces"]})}})}function Ere({value:t="private",workspaces:e=[],onChange:r,disabled:n=!1}){const[i,s]=k.useState(!1),{data:o=[],isLoading:a}=z0(),l=[{value:"private",label:"Private",description:"Only you can see this",icon:eme},{value:"workspace",label:"Workspace",description:"Share with workspace members",icon:Pn}],u=l.find(p=>p.value===t)||l[0],d=u.icon,h=p=>{r==null||r({visibility:p,workspaces:p==="private"?[]:e}),p==="private"&&s(!1)},f=p=>{const m=e.includes(p)?e.filter(g=>g!==p):[...e,p];r==null||r({visibility:t,workspaces:m})};return c.jsxs("div",{className:"relative",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Visibility"}),c.jsxs("button",{type:"button",onClick:()=>!n&&s(!i),disabled:n,className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-lg bg-white text-left focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(d,{className:"w-4 h-4 text-gray-500"}),c.jsx("span",{className:"text-sm text-gray-900",children:u.label})]}),c.jsx(bp,{className:`w-4 h-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]}),i&&c.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg",children:[c.jsx("div",{className:"p-2 border-b border-gray-100",children:l.map(p=>{const m=p.icon,g=t===p.value;return c.jsxs("button",{type:"button",onClick:()=>h(p.value),className:`w-full flex items-start gap-3 p-2 rounded-md text-left hover:bg-gray-50 ${g?"bg-primary-50":""}`,children:[c.jsx(m,{className:`w-4 h-4 mt-0.5 ${g?"text-primary-600":"text-gray-400"}`}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:`text-sm font-medium ${g?"text-primary-900":"text-gray-900"}`,children:p.label}),c.jsx("div",{className:"text-xs text-gray-500",children:p.description})]}),g&&c.jsx(Xy,{className:"w-4 h-4 text-primary-600 mt-0.5"})]},p.value)})}),t==="workspace"&&c.jsxs("div",{className:"p-2",children:[c.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2 px-2",children:"Select Workspaces"}),a?c.jsx("div",{className:"px-2 py-3 text-sm text-gray-500",children:"Loading workspaces..."}):o.length===0?c.jsx("div",{className:"px-2 py-3 text-sm text-gray-500",children:"No workspaces available. Create one first."}):c.jsx("div",{className:"max-h-48 overflow-y-auto",children:o.map(p=>{const m=e.includes(p.id);return c.jsxs("button",{type:"button",onClick:()=>f(p.id),className:"w-full flex items-center gap-3 p-2 rounded-md text-left hover:bg-gray-50",children:[c.jsx("div",{className:`flex items-center justify-center w-4 h-4 border-2 rounded ${m?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:m&&c.jsx(Xy,{className:"w-3 h-3 text-white"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"text-sm text-gray-900",children:p.title}),c.jsxs("div",{className:"text-xs text-gray-500",children:[p.member_count," members"]})]})]},p.id)})})]}),t==="workspace"&&c.jsx("div",{className:"p-2 border-t border-gray-100",children:c.jsx("button",{type:"button",onClick:()=>s(!1),className:"w-full px-3 py-2 text-sm font-medium text-primary-600 hover:bg-primary-50 rounded-md",children:"Done"})})]}),t==="workspace"&&e.length>0&&!i&&c.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:["Shared with ",e.length," workspace",e.length!==1?"s":""]})]})}function DM({isOpen:t,onClose:e,onSubmit:r,isLoading:n,person:i=null}){const s=!!i,[o,a]=k.useState(!1),[l,u]=k.useState(null),[d,h]=k.useState(null),[f,p]=k.useState("private"),[m,g]=k.useState([]),{data:v=[]}=st({queryKey:["date-types"],queryFn:async()=>(await He.getDateTypes()).data,enabled:t&&!s}),y=v.find(C=>C.slug==="birthday"||C.name.toLowerCase()==="birthday"),b=We({mutationFn:async C=>{const D=new FormData;return D.append("file",C),(await Z.post("/prm/v1/import/vcard/parse",D,{headers:{"Content-Type":"multipart/form-data"}})).data}}),{register:w,handleSubmit:x,reset:S,formState:{errors:_}}=Vs({defaultValues:{first_name:"",last_name:"",nickname:"",gender:"",pronouns:"",email:"",phone:"",phone_type:"mobile",birthday:"",how_we_met:"",is_favorite:!1}});k.useEffect(()=>{var C,D,F,$,L,M,W,Y,Q,pe,K,oe,Te;if(t)if(u(null),h(null),b.reset(),i){const me=(D=(C=i.acf)==null?void 0:C.contact_info)==null?void 0:D.find(Oe=>Oe.contact_type==="email"),Be=($=(F=i.acf)==null?void 0:F.contact_info)==null?void 0:$.find(Oe=>Oe.contact_type==="phone"||Oe.contact_type==="mobile");S({first_name:((L=i.acf)==null?void 0:L.first_name)||"",last_name:((M=i.acf)==null?void 0:M.last_name)||"",nickname:((W=i.acf)==null?void 0:W.nickname)||"",gender:((Y=i.acf)==null?void 0:Y.gender)||"",pronouns:((Q=i.acf)==null?void 0:Q.pronouns)||"",email:(me==null?void 0:me.contact_value)||"",phone:(Be==null?void 0:Be.contact_value)||"",phone_type:(Be==null?void 0:Be.contact_type)||"mobile",birthday:"",how_we_met:((pe=i.acf)==null?void 0:pe.how_we_met)||"",is_favorite:((K=i.acf)==null?void 0:K.is_favorite)||!1}),p(((oe=i.acf)==null?void 0:oe._visibility)||"private"),g(((Te=i.acf)==null?void 0:Te._assigned_workspaces)||[])}else S({first_name:"",last_name:"",nickname:"",gender:"",pronouns:"",email:"",phone:"",phone_type:"mobile",birthday:"",how_we_met:"",is_favorite:!1}),p("private"),g([])},[t,i,S]);const E=k.useCallback(C=>{C.preventDefault(),C.stopPropagation(),C.type==="dragenter"||C.type==="dragover"?a(!0):C.type==="dragleave"&&a(!1)},[]),N=k.useCallback(C=>{C.preventDefault(),C.stopPropagation(),a(!1),h(null),C.dataTransfer.files&&C.dataTransfer.files[0]&&T(C.dataTransfer.files[0])},[]),T=C=>{const D=C.name.split(".").pop().toLowerCase();if(D!=="vcf"&&D!=="vcard"){h("Please select a vCard file (.vcf)");return}u(C),b.mutate(C,{onSuccess:F=>{S({first_name:F.first_name||"",last_name:F.last_name||"",nickname:F.nickname||"",gender:F.gender||"",pronouns:F.pronouns||"",email:F.email||"",phone:F.phone||"",phone_type:F.phone_type||"mobile",birthday:F.birthday||"",how_we_met:F.note||"",is_favorite:!1}),F.contact_count>1&&h(`Note: File contains ${F.contact_count} contacts. Only the first contact was loaded.`)},onError:F=>{var $,L;h(((L=($=F.response)==null?void 0:$.data)==null?void 0:L.message)||"Failed to parse vCard file"),u(null)}})},j=C=>{h(null),C.target.files&&C.target.files[0]&&T(C.target.files[0])},P=()=>{u(null),h(null),b.reset()};if(!t)return null;const O=C=>{r({...C,birthdayType:y,visibility:f,assigned_workspaces:m})};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:s?"Edit person":"Add person"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(mt,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:x(O),className:"flex flex-col flex-1 overflow-hidden",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[!s&&c.jsxs("div",{children:[c.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-3 text-center transition-colors ${o?"border-primary-500 bg-primary-50":l&&!d?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:E,onDragLeave:E,onDragOver:E,onDrop:N,children:[c.jsx("input",{type:"file",accept:".vcf,.vcard",onChange:j,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:n}),b.isPending?c.jsxs("div",{className:"flex items-center justify-center gap-2 py-1",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600"}),c.jsx("span",{className:"text-sm text-gray-600",children:"Parsing vCard..."})]}):l&&!d?c.jsxs("div",{className:"flex items-center justify-center gap-2 py-1",children:[c.jsx(lm,{className:"h-4 w-4 text-green-600"}),c.jsxs("span",{className:"text-sm text-green-700",children:["Loaded from ",l.name]}),c.jsx("button",{type:"button",onClick:C=>{C.preventDefault(),C.stopPropagation(),P()},className:"ml-1 p-0.5 hover:bg-green-100 rounded",children:c.jsx(mt,{className:"h-3 w-3 text-green-600"})})]}):c.jsxs("div",{className:"flex items-center justify-center gap-2 py-1",children:[c.jsx(jc,{className:"h-4 w-4 text-gray-400"}),c.jsxs("span",{className:"text-sm text-gray-600",children:["Drop a vCard or ",c.jsx("span",{className:"text-primary-600",children:"browse"})]})]})]}),d&&c.jsxs("div",{className:"mt-2 flex items-start gap-2 text-xs text-amber-700 bg-amber-50 rounded-lg p-2",children:[c.jsx(Ao,{className:"h-3 w-3 mt-0.5 flex-shrink-0"}),c.jsx("span",{children:d})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"First name *"}),c.jsx("input",{...w("first_name",{required:"First name is required"}),className:"input",placeholder:"John",disabled:n,autoFocus:!0}),_.first_name&&c.jsx("p",{className:"text-sm text-red-600 mt-1",children:_.first_name.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Last name"}),c.jsx("input",{...w("last_name"),className:"input",placeholder:"Doe",disabled:n})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Nickname"}),c.jsx("input",{...w("nickname"),className:"input",placeholder:"Johnny",disabled:n})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Gender"}),c.jsxs("select",{...w("gender"),className:"input",disabled:n,children:[c.jsx("option",{value:"",children:"Select..."}),c.jsx("option",{value:"male",children:"Male"}),c.jsx("option",{value:"female",children:"Female"}),c.jsx("option",{value:"non_binary",children:"Non-binary"}),c.jsx("option",{value:"other",children:"Other"}),c.jsx("option",{value:"prefer_not_to_say",children:"Prefer not to say"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Pronouns"}),c.jsx("input",{...w("pronouns"),type:"text",className:"input",placeholder:"e.g., they/them",disabled:n})]})]}),!s&&c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Email"}),c.jsx("input",{...w("email"),type:"email",className:"input",placeholder:"john@example.com",disabled:n}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Gravatar will be auto-fetched if available"})]}),!s&&c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Phone"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("select",{...w("phone_type"),className:"input w-24",disabled:n,children:[c.jsx("option",{value:"mobile",children:"Mobile"}),c.jsx("option",{value:"phone",children:"Phone"})]}),c.jsx("input",{...w("phone"),type:"tel",className:"input flex-1",placeholder:"+1 234 567 890",disabled:n})]})]}),!s&&c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Birthday"}),c.jsx("input",{...w("birthday"),type:"date",className:"input",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"How we met"}),c.jsx("textarea",{...w("how_we_met"),className:"input",rows:3,placeholder:"We met at...",disabled:n})]}),c.jsx(Ere,{value:f,workspaces:m,onChange:({visibility:C,workspaces:D})=>{p(C),g(D)},disabled:n}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"is_favorite",...w("is_favorite"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),c.jsx("label",{htmlFor:"is_favorite",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Mark as favorite"})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":s?"Save changes":"Create person"})]})]})]})})}function $M({isOpen:t,onClose:e,onSubmit:r,isLoading:n,company:i=null}){var Y,Q,pe;const s=!!i,[o,a]=k.useState(!1),[l,u]=k.useState(""),[d,h]=k.useState(""),[f,p]=k.useState(!1),[m,g]=k.useState(""),[v,y]=k.useState([]),[b,w]=k.useState("private"),[x,S]=k.useState([]),_=k.useRef(null),E=k.useRef(null),{data:N=[],isLoading:T}=st({queryKey:["companies","all"],queryFn:async()=>(await He.getCompanies({per_page:100,_embed:!0})).data,enabled:t}),{data:j=[],isLoading:P}=st({queryKey:["people","all"],queryFn:async()=>(await He.getPeople({per_page:100,_embed:!0})).data,enabled:t}),{register:O,handleSubmit:C,reset:D,formState:{errors:F}}=Vs({defaultValues:{title:"",website:"",industry:""}}),$=k.useMemo(()=>{const K=l.toLowerCase().trim();let oe=N.filter(Te=>!(s&&Te.id===(i==null?void 0:i.id)||s&&Te.parent===(i==null?void 0:i.id)));return K&&(oe=oe.filter(Te=>{var me;return(me=ur(Te))==null?void 0:me.toLowerCase().includes(K)})),[...oe].sort((Te,me)=>(ur(Te)||"").localeCompare(ur(me)||""))},[N,l,i,s]),L=k.useMemo(()=>N.find(K=>K.id===parseInt(d)),[N,d]),M=k.useMemo(()=>{const K=m.toLowerCase().trim(),oe=j.map(Oe=>{var gt,U,ce,Me;return{id:Oe.id,type:"person",name:Tn(((gt=Oe.title)==null?void 0:gt.rendered)||""),thumbnail:(Me=(ce=(U=Oe._embedded)==null?void 0:U["wp:featuredmedia"])==null?void 0:ce[0])==null?void 0:Me.source_url}}),Te=N.filter(Oe=>!s||Oe.id!==(i==null?void 0:i.id)).map(Oe=>{var gt,U,ce;return{id:Oe.id,type:"company",name:ur(Oe),thumbnail:(ce=(U=(gt=Oe._embedded)==null?void 0:gt["wp:featuredmedia"])==null?void 0:U[0])==null?void 0:ce.source_url}});let me=[...oe,...Te];K&&(me=me.filter(Oe=>{var gt;return(gt=Oe.name)==null?void 0:gt.toLowerCase().includes(K)}));const Be=v.map(Oe=>`${Oe.type}-${Oe.id}`);return me=me.filter(Oe=>!Be.includes(`${Oe.type}-${Oe.id}`)),me.sort((Oe,gt)=>(Oe.name||"").localeCompare(gt.name||""))},[j,N,m,v,i,s]);if(k.useEffect(()=>{var K,oe,Te,me,Be;t&&(a(!1),p(!1),u(""),g(""),i?(D({title:Tn(((K=i.title)==null?void 0:K.rendered)||""),website:((oe=i.acf)==null?void 0:oe.website)||"",industry:((Te=i.acf)==null?void 0:Te.industry)||""}),h(i.parent?String(i.parent):""),w(((me=i.acf)==null?void 0:me._visibility)||"private"),S(((Be=i.acf)==null?void 0:Be._assigned_workspaces)||[])):(D({title:"",website:"",industry:""}),h(""),y([]),w("private"),S([])))},[t,i,D]),k.useEffect(()=>{var K,oe;if(t&&((oe=(K=i==null?void 0:i.acf)==null?void 0:K.investors)==null?void 0:oe.length)>0&&j.length>0&&N.length>0){const me=i.acf.investors.map(Be=>{var U,ce,Me,Fe,Tt,Yr,Tr;const Oe=j.find(dt=>dt.id===Be);if(Oe)return{id:Oe.id,type:"person",name:Tn(((U=Oe.title)==null?void 0:U.rendered)||""),thumbnail:(Fe=(Me=(ce=Oe._embedded)==null?void 0:ce["wp:featuredmedia"])==null?void 0:Me[0])==null?void 0:Fe.source_url};const gt=N.find(dt=>dt.id===Be);return gt?{id:gt.id,type:"company",name:ur(gt),thumbnail:(Tr=(Yr=(Tt=gt._embedded)==null?void 0:Tt["wp:featuredmedia"])==null?void 0:Yr[0])==null?void 0:Tr.source_url}:null}).filter(Boolean);y(me)}else t&&!i&&y([])},[t,i,j,N]),k.useEffect(()=>{const K=oe=>{_.current&&!_.current.contains(oe.target)&&a(!1)};if(o)return document.addEventListener("mousedown",K),()=>document.removeEventListener("mousedown",K)},[o]),k.useEffect(()=>{const K=oe=>{E.current&&!E.current.contains(oe.target)&&p(!1)};if(f)return document.addEventListener("mousedown",K),()=>document.removeEventListener("mousedown",K)},[f]),!t)return null;const W=K=>{r({...K,parentId:d?parseInt(d):0,investors:v.map(oe=>oe.id),visibility:b,assigned_workspaces:x})};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:s?"Edit organization":"Add organization"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(mt,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:C(W),className:"flex flex-col flex-1 overflow-hidden",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Organization name *"}),c.jsx("input",{...O("title",{required:"Organization name is required"}),className:"input",placeholder:"Acme Inc.",disabled:n,autoFocus:!0}),F.title&&c.jsx("p",{className:"text-sm text-red-600 mt-1",children:F.title.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Website"}),c.jsx("input",{...O("website"),type:"url",className:"input",placeholder:"https://example.com",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Industry"}),c.jsx("input",{...O("industry"),className:"input",placeholder:"Technology",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Parent organization"}),c.jsxs("div",{className:"relative",ref:_,children:[c.jsxs("button",{type:"button",onClick:()=>a(!o),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:T||n,children:[L?c.jsxs("div",{className:"flex items-center gap-2",children:[(pe=(Q=(Y=L._embedded)==null?void 0:Y["wp:featuredmedia"])==null?void 0:Q[0])!=null&&pe.source_url?c.jsx("img",{src:L._embedded["wp:featuredmedia"][0].source_url,alt:ur(L),className:"w-6 h-6 rounded object-contain bg-white"}):c.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center",children:c.jsx(Ir,{className:"w-4 h-4 text-gray-500"})}),c.jsx("span",{className:"text-gray-900",children:ur(L)})]}):c.jsx("span",{className:"text-gray-400",children:"No parent organization"}),c.jsx(bp,{className:`w-4 h-4 text-gray-400 transition-transform ${o?"rotate-180":""}`})]}),o&&c.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[c.jsx("div",{className:"p-2 border-b border-gray-100",children:c.jsxs("div",{className:"relative",children:[c.jsx(nl,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),c.jsx("input",{type:"text",value:l,onChange:K=>u(K.target.value),placeholder:"Search organizations...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),c.jsxs("div",{className:"overflow-y-auto max-h-48",children:[c.jsx("button",{type:"button",onClick:()=>{h(""),a(!1),u("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${d?"":"bg-primary-50"}`,children:c.jsx("span",{className:"text-sm text-gray-500 italic",children:"No parent organization"})}),T?c.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):$.length>0?$.map(K=>{var oe,Te,me;return c.jsxs("button",{type:"button",onClick:()=>{h(String(K.id)),a(!1),u("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${d===String(K.id)?"bg-primary-50":""}`,children:[(me=(Te=(oe=K._embedded)==null?void 0:oe["wp:featuredmedia"])==null?void 0:Te[0])!=null&&me.source_url?c.jsx("img",{src:K._embedded["wp:featuredmedia"][0].source_url,alt:ur(K),className:"w-6 h-6 rounded object-contain bg-white"}):c.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center",children:c.jsx(Ir,{className:"w-4 h-4 text-gray-500"})}),c.jsx("span",{className:"text-sm text-gray-900 truncate",children:ur(K)})]},K.id)}):c.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"No organizations found"})]})]})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select if this organization is a subsidiary or division of another"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"label flex items-center",children:[c.jsx(Jy,{className:"w-4 h-4 mr-2"}),"Investors"]}),v.length>0&&c.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:v.map(K=>c.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-100 rounded-full pl-1 pr-2 py-1",children:[K.thumbnail?c.jsx("img",{src:K.thumbnail,alt:K.name,className:`w-5 h-5 object-cover ${K.type==="person"?"rounded-full":"rounded"}`}):c.jsx("div",{className:`w-5 h-5 bg-gray-300 flex items-center justify-center ${K.type==="person"?"rounded-full":"rounded"}`,children:K.type==="person"?c.jsx(il,{className:"w-3 h-3 text-gray-500"}):c.jsx(Ir,{className:"w-3 h-3 text-gray-500"})}),c.jsx("span",{className:"text-sm text-gray-700",children:K.name}),c.jsx("button",{type:"button",onClick:()=>y(oe=>oe.filter(Te=>!(Te.id===K.id&&Te.type===K.type))),className:"ml-1 text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(mt,{className:"w-3.5 h-3.5"})})]},`${K.type}-${K.id}`))}),c.jsxs("div",{className:"relative",ref:E,children:[c.jsxs("button",{type:"button",onClick:()=>p(!f),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:T||P||n,children:[c.jsx("span",{className:"text-gray-400",children:"Add investor..."}),c.jsx(bp,{className:`w-4 h-4 text-gray-400 transition-transform ${f?"rotate-180":""}`})]}),f&&c.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[c.jsx("div",{className:"p-2 border-b border-gray-100",children:c.jsxs("div",{className:"relative",children:[c.jsx(nl,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),c.jsx("input",{type:"text",value:m,onChange:K=>g(K.target.value),placeholder:"Search people and organizations...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),c.jsx("div",{className:"overflow-y-auto max-h-48",children:T||P?c.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):M.length>0?M.map(K=>c.jsxs("button",{type:"button",onClick:()=>{y(oe=>[...oe,K]),g("")},className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors",children:[K.thumbnail?c.jsx("img",{src:K.thumbnail,alt:K.name,className:`w-6 h-6 object-cover ${K.type==="person"?"rounded-full":"rounded"}`}):c.jsx("div",{className:`w-6 h-6 bg-gray-200 flex items-center justify-center ${K.type==="person"?"rounded-full":"rounded"}`,children:K.type==="person"?c.jsx(il,{className:"w-4 h-4 text-gray-500"}):c.jsx(Ir,{className:"w-4 h-4 text-gray-500"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("span",{className:"text-sm text-gray-900 truncate block",children:K.name}),c.jsx("span",{className:"text-xs text-gray-500",children:K.type==="person"?"Person":"Organization"})]})]},`${K.type}-${K.id}`)):c.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:m?"No results found":"No people or organizations available"})})]})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select people or organizations that have invested in this company"})]}),c.jsx(Ere,{value:b,workspaces:x,onChange:({visibility:K,workspaces:oe})=>{w(K),S(oe)},disabled:n})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":s?"Save changes":"Create organization"})]})]})]})})}function age({value:t=[],onChange:e,people:r=[],isLoading:n,currentPersonId:i}){const[s,o]=k.useState(""),a=k.useMemo(()=>{if(!s)return r.slice(0,10);const h=s.toLowerCase();return r.filter(f=>ld(f).toLowerCase().includes(h)).slice(0,10)},[r,s]),l=k.useMemo(()=>t.map(h=>r.find(f=>f.id===h)).filter(Boolean),[t,r]),u=h=>{t.includes(h)||e([...t,h]),o("")},d=h=>{h!==i&&e(t.filter(f=>f!==h))};return c.jsxs("div",{className:"space-y-2",children:[l.length>0&&c.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(h=>c.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-primary-100 text-primary-800 rounded-full text-sm",children:[ld(h),h.id!==i&&c.jsx("button",{type:"button",onClick:()=>d(h.id),className:"hover:text-primary-600",children:c.jsx(mt,{className:"w-3 h-3"})})]},h.id))}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",value:s,onChange:h=>o(h.target.value),placeholder:"Search for people to add...",className:"input",disabled:n}),s&&c.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:a.length>0?a.map(h=>c.jsx("button",{type:"button",onClick:()=>u(h.id),disabled:t.includes(h.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t.includes(h.id)?"opacity-50 cursor-not-allowed":""}`,children:ld(h)},h.id)):c.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No people found"})})]})]})}function FM({isOpen:t,onClose:e,onSubmit:r,isLoading:n,dateItem:i=null,personId:s,allPeople:o=[],isPeopleLoading:a=!1}){const l=!!i,{data:u=[]}=st({queryKey:["date-types"],queryFn:async()=>((await He.getDateTypes()).data||[]).sort((E,N)=>{const T=E.name||"",j=N.name||"";return T.localeCompare(j)})}),{register:d,handleSubmit:h,reset:f,watch:p,setValue:m,control:g,formState:{errors:v}}=Vs({defaultValues:{title:"",date_value:"",date_type:"",related_people:[],is_recurring:!0,year_unknown:!1}}),y=p("related_people"),b=p("date_type"),w=p("title");if(k.useEffect(()=>{var E;if((!w||["'s Birthday","Wedding of "].some(N=>w.endsWith(N)||w.startsWith(N)))&&(y==null?void 0:y.length)>0&&b){const N=u.find(O=>O.id===parseInt(b)),T=(N==null?void 0:N.name)||"",j=((E=N==null?void 0:N.slug)==null?void 0:E.toLowerCase())||T.toLowerCase(),P=y.map(O=>{var D,F,$;const C=o.find(L=>L.id===O);return C?Tn(((D=C.acf)==null?void 0:D.first_name)||C.first_name||(($=(F=C.title)==null?void 0:F.rendered)==null?void 0:$.split(" ")[0])||""):null}).filter(Boolean);if(P.length>0&&T){let O;j==="wedding"?O=P.length>=2?`Wedding of ${P[0]} & ${P[1]}`:`Wedding of ${P[0]}`:O=`${P[0]}'s ${T}`,m("title",O)}}},[y,b,o,u,m,w]),k.useEffect(()=>{var S,_,E,N,T,j;if(t)if(i){let P=[];const O=i.related_people||((S=i.acf)==null?void 0:S.related_people);O&&(Array.isArray(O)?P=O.map(D=>parseInt(typeof D=="object"&&D!==null?D.ID||D.id||D.post_id:D,10)).filter(D=>!isNaN(D)&&D>0):typeof O=="number"&&(P=[O]));let C="";if(((_=i.date_type)==null?void 0:_.length)>0&&i.date_type[0]!=null){const D=i.date_type[0];if(typeof D=="string"){const F=u.find($=>$.name.toLowerCase()===D.toLowerCase());C=F?String(F.id):""}else C=String(D)}f({title:Tn(((E=i.title)==null?void 0:E.rendered)||i.title||""),date_value:((N=i.acf)==null?void 0:N.date_value)||i.date_value||"",date_type:C,related_people:P,is_recurring:((T=i.acf)==null?void 0:T.is_recurring)??i.is_recurring??!0,year_unknown:((j=i.acf)==null?void 0:j.year_unknown)??i.year_unknown??!1})}else f({title:"",date_value:"",date_type:"",related_people:s?[parseInt(s)]:[],is_recurring:!0,year_unknown:!1})},[t,i,s,f,u]),!t)return null;const x=S=>{const _=S.date_type?parseInt(S.date_type,10):null,E=_&&!isNaN(_)?[_]:[];r({title:S.title,date_type:E,date_value:S.date_value,related_people:S.related_people,is_recurring:S.is_recurring,year_unknown:S.year_unknown})};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:l?"Edit date":"Add date"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(mt,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:h(x),className:"flex flex-col flex-1 overflow-hidden",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Related people"}),c.jsx(ev,{name:"related_people",control:g,render:({field:S})=>c.jsx(age,{value:S.value,onChange:S.onChange,people:o,isLoading:a,currentPersonId:parseInt(s)})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Date type *"}),c.jsx(ev,{name:"date_type",control:g,rules:{required:"Please select a date type"},render:({field:S})=>c.jsxs("select",{value:S.value?String(S.value):"",onChange:_=>S.onChange(_.target.value),className:"input",disabled:n,children:[c.jsx("option",{value:"",children:"Select a type..."}),u.map(_=>c.jsx("option",{value:String(_.id),children:_.name},_.id))]})}),v.date_type&&c.jsx("p",{className:"text-sm text-red-600 mt-1",children:v.date_type.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Label"}),c.jsx("input",{...d("title"),className:"input",placeholder:"e.g., Mom's Birthday",disabled:n}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-generated from person and date type. You can customize it."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Date *"}),c.jsx("input",{...d("date_value",{required:"Date is required"}),type:"date",className:"input",disabled:n}),v.date_value&&c.jsx("p",{className:"text-sm text-red-600 mt-1",children:v.date_value.message})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"year_unknown",...d("year_unknown"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),c.jsx("label",{htmlFor:"year_unknown",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Year unknown"})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"is_recurring",...d("is_recurring"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),c.jsx("label",{htmlFor:"is_recurring",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Repeats every year"})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":l?"Save changes":"Add date"})]})]})]})})}const lge=[{name:"Dashboard",href:"/",icon:Ype},{name:"People",href:"/people",icon:Pn},{name:"Organizations",href:"/companies",icon:Ir},{name:"Dates",href:"/dates",icon:bo},{name:"Todos",href:"/todos",icon:Fs},{name:"Workspaces",href:"/workspaces",icon:dme},{name:"Settings",href:"/settings",icon:CM}];function p5({mobile:t=!1,onClose:e}){const{logoutUrl:r}=bM();return c.jsxs("div",{className:"flex flex-col h-full bg-white border-r border-gray-200",children:[c.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[c.jsxs(Le,{to:"/",className:"flex items-center gap-2 text-xl font-bold text-primary-600",children:[c.jsx(tre,{className:"w-5 h-5"}),Oc]}),t&&c.jsx("button",{onClick:e,className:"p-2 -mr-2",children:c.jsx(mt,{className:"w-5 h-5"})})]}),c.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1 overflow-y-auto",children:lge.map(n=>c.jsxs(Ohe,{to:n.href,onClick:t?e:void 0,className:({isActive:i})=>`flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${i?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-50"}`,children:[c.jsx(n.icon,{className:"w-5 h-5 mr-3"}),n.name]},n.name))}),c.jsx("div",{className:"p-4 border-t border-gray-200",children:c.jsxs("a",{href:r,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[c.jsx(tme,{className:"w-5 h-5 mr-3"}),"Log Out"]})})]})}function cge(){var o;const[t,e]=k.useState(!1),r=k.useRef(null),{data:n,isLoading:i}=st({queryKey:["current-user"],queryFn:async()=>(await _e.getCurrentUser()).data});if(k.useEffect(()=>{const a=l=>{r.current&&!r.current.contains(l.target)&&e(!1)};if(t)return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[t]),i||!n)return c.jsx("div",{className:"flex items-center ml-auto",children:c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full animate-pulse"})});const s=((o=n.name)==null?void 0:o.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2))||"?";return c.jsxs("div",{className:"relative ml-auto",ref:r,children:[c.jsxs("button",{onClick:()=>e(!t),className:"flex items-center gap-2 p-1 rounded-full hover:bg-gray-100 transition-colors","aria-label":"User menu",children:[n.avatar_url?c.jsx("img",{src:n.avatar_url,alt:n.name,className:"w-8 h-8 rounded-full object-cover"}):c.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-sm font-medium text-primary-700",children:s})}),c.jsx(bp,{className:`w-4 h-4 text-gray-500 transition-transform ${t?"rotate-180":""}`})]}),t&&c.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:c.jsxs("div",{className:"py-1",children:[c.jsxs("a",{href:n.profile_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>e(!1),children:[c.jsx(il,{className:"w-4 h-4 mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Edit profile"})]}),n.is_admin&&c.jsxs("a",{href:n.admin_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>e(!1),children:[c.jsx(CM,{className:"w-4 h-4 mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"WordPress admin"})]})]})})]})}function uge({isOpen:t,onClose:e}){const[r,n]=k.useState(""),[i,s]=k.useState(0),o=Fn(),a=k.useRef(null),l=r.trim(),{data:u,isLoading:d}=vme(l),h=u||{people:[],companies:[]},f=[...(h.people||[]).map(y=>({...y,type:"person"})),...(h.companies||[]).map(y=>({...y,type:"company"}))],p=f.length>0,m=r.trim().length>=2;k.useEffect(()=>{t&&(n(""),s(0),setTimeout(()=>{var y;return(y=a.current)==null?void 0:y.focus()},50))},[t]),k.useEffect(()=>{s(0)},[u]);const g=y=>{if(y.key==="Escape"){e();return}if(!(!m||!p)){if(y.key==="ArrowDown")y.preventDefault(),s(b=>Math.min(b+1,f.length-1));else if(y.key==="ArrowUp")y.preventDefault(),s(b=>Math.max(b-1,0));else if(y.key==="Enter"){y.preventDefault();const b=f[i];b&&v(b.type,b.id)}}},v=(y,b)=>{e(),y==="person"?o(`/people/${b}`):y==="company"&&o(`/companies/${b}`)};return t?c.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:e}),c.jsx("div",{className:"relative min-h-screen flex items-start justify-center pt-[15vh] px-4",children:c.jsxs("div",{className:"relative w-full max-w-xl bg-white rounded-xl shadow-2xl overflow-hidden",children:[c.jsxs("div",{className:"flex items-center px-4 border-b border-gray-200",children:[c.jsx(nl,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),c.jsx("input",{ref:a,type:"text",value:r,onChange:y=>n(y.target.value),onKeyDown:g,placeholder:"Search people & organizations...",className:"flex-1 px-4 py-4 text-lg outline-none placeholder:text-gray-400",autoComplete:"off"}),c.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[c.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-gray-500 font-mono",children:"esc"}),c.jsx("span",{children:"to close"})]})]}),c.jsx("div",{className:"max-h-96 overflow-y-auto",children:m?d?c.jsxs("div",{className:"px-4 py-8 text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),c.jsx("p",{className:"mt-3 text-sm text-gray-500",children:"Searching..."})]}):p?c.jsxs("div",{className:"py-2",children:[h.people&&h.people.length>0&&c.jsxs("div",{className:"px-2",children:[c.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"People"}),h.people.map((y,b)=>{const x=i===b;return c.jsxs("button",{onClick:()=>v("person",y.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors text-left ${x?"bg-primary-50 text-primary-900":"hover:bg-gray-50"}`,children:[y.thumbnail?c.jsx("img",{src:y.thumbnail,alt:y.name,className:"w-8 h-8 rounded-full object-cover"}):c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx(il,{className:"w-4 h-4 text-gray-500"})}),c.jsx("span",{className:"text-sm font-medium flex-1 truncate",children:y.name}),x&&c.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:""})]},y.id)})]}),h.companies&&h.companies.length>0&&c.jsxs("div",{className:"px-2 mt-2",children:[c.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Organizations"}),h.companies.map((y,b)=>{var S;const w=(((S=h.people)==null?void 0:S.length)||0)+b,x=i===w;return c.jsxs("button",{onClick:()=>v("company",y.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors text-left ${x?"bg-primary-50 text-primary-900":"hover:bg-gray-50"}`,children:[y.thumbnail?c.jsx("img",{src:y.thumbnail,alt:y.name,className:"w-8 h-8 rounded object-contain bg-white"}):c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded flex items-center justify-center",children:c.jsx(Ir,{className:"w-4 h-4 text-gray-500"})}),c.jsx("span",{className:"text-sm font-medium flex-1 truncate",children:y.name}),x&&c.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:""})]},y.id)})]})]}):c.jsx("div",{className:"px-4 py-8 text-center text-gray-500",children:c.jsxs("p",{className:"text-sm",children:['No results found for "',r,'"']})}):c.jsxs("div",{className:"px-4 py-8 text-center text-gray-500",children:[c.jsx(nl,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),c.jsx("p",{className:"text-sm",children:"Type at least 2 characters to search"})]})}),c.jsx("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-xs text-gray-500",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),c.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),c.jsx("span",{children:"to navigate"})]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),c.jsx("span",{children:"to select"})]})]})})]})})]}):null}function dge({onAddTodo:t,onAddPerson:e,onAddCompany:r,onAddDate:n}){const[i,s]=k.useState(!1),o=k.useRef(null);k.useEffect(()=>{const h=f=>{o.current&&!o.current.contains(f.target)&&s(!1)};if(i)return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[i]);const a=()=>{s(!1),t()},l=()=>{s(!1),e()},u=()=>{s(!1),r()},d=()=>{s(!1),n()};return c.jsxs("div",{className:"relative",ref:o,children:[c.jsx("button",{onClick:()=>s(!i),className:"flex items-center justify-center w-9 h-9 rounded-lg bg-primary-600 hover:bg-primary-700 text-white transition-colors","aria-label":"Quick add",title:"Quick add",children:c.jsx(or,{className:"w-5 h-5"})}),i&&c.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:c.jsxs("div",{className:"py-1",children:[c.jsxs("button",{onClick:l,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[c.jsx(il,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Person"]}),c.jsxs("button",{onClick:u,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[c.jsx(Ir,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Organization"]}),c.jsxs("button",{onClick:a,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[c.jsx(Fs,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Todo"]}),c.jsxs("button",{onClick:d,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[c.jsx(bo,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Date"]})]})})]})}function hge({onMenuClick:t,onAddTodo:e,onAddPerson:r,onAddCompany:n,onAddDate:i,onOpenSearch:s}){const o=Bo(),a=()=>{const l=o.pathname;return l==="/"?"Dashboard":l.startsWith("/people")?"People":l.startsWith("/companies")?"Organizations":l.startsWith("/dates")?"Important Dates":l.startsWith("/todos")?"Todos":l.startsWith("/workspaces")?"Workspaces":l.startsWith("/settings")?"Settings":""};return c.jsxs("header",{className:"sticky top-0 z-10 flex items-center h-16 px-4 bg-white border-b border-gray-200 lg:px-6",children:[c.jsx("button",{onClick:t,className:"p-2 -ml-2 lg:hidden",children:c.jsx(nme,{className:"w-5 h-5"})}),c.jsx("h1",{className:"ml-2 text-lg font-semibold lg:ml-0",children:a()}),c.jsx("div",{className:"flex-1"}),c.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg border border-gray-200 hover:bg-gray-50 text-gray-500 transition-colors","aria-label":"Search",title:"Search (K)",children:[c.jsx(nl,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden sm:inline text-sm",children:"Search..."}),c.jsxs("kbd",{className:"hidden sm:flex items-center gap-0.5 px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:[c.jsx(Hpe,{className:"w-3 h-3"}),"K"]})]}),c.jsx("div",{className:"ml-2",children:c.jsx(dge,{onAddTodo:e,onAddPerson:r,onAddCompany:n,onAddDate:i})}),c.jsx("div",{className:"ml-2",children:c.jsx(cge,{})})]})}function fge({children:t}){const[e,r]=k.useState(!1),[n,i]=k.useState(!1),[s,o]=k.useState(!1),[a,l]=k.useState(!1),[u,d]=k.useState(!1),[h,f]=k.useState(!1),[p,m]=k.useState(!1),[g,v]=k.useState(!1),[y,b]=k.useState(!1),w=Fn(),x=rt(),{data:S=[],isLoading:_}=Gc();ire();const E=We({mutationFn:async C=>{const D=[];C.email&&D.push({contact_type:"email",contact_value:C.email,contact_label:"Email"}),C.phone&&D.push({contact_type:C.phone_type||"mobile",contact_value:C.phone,contact_label:C.phone_type==="mobile"?"Mobile":"Phone"});const F={title:`${C.first_name} ${C.last_name}`.trim(),status:"publish",acf:{first_name:C.first_name,last_name:C.last_name,nickname:C.nickname,gender:C.gender||null,pronouns:C.pronouns||null,how_we_met:C.how_we_met,is_favorite:C.is_favorite,contact_info:D}},$=await He.createPerson(F),L=$.data.id;if(C.email)try{await _e.sideloadGravatar(L,C.email)}catch{}if(C.birthday&&C.birthdayType)try{await He.createDate({title:`${C.first_name}'s Birthday`,status:"publish",date_type:[C.birthdayType.id],acf:{date_value:C.birthday,is_recurring:!0,related_people:[L]}})}catch{}return $.data},onSuccess:C=>{x.invalidateQueries({queryKey:["people"]}),x.invalidateQueries({queryKey:["dashboard"]}),x.invalidateQueries({queryKey:["reminders"]}),l(!1),w(`/people/${C.id}`)}}),N=We({mutationFn:async C=>{const D={title:C.title,status:"publish",parent:C.parentId||0,acf:{website:C.website,industry:C.industry,investors:C.investors||[]}};return(await He.createCompany(D)).data},onSuccess:C=>{x.invalidateQueries({queryKey:["companies"]}),x.invalidateQueries({queryKey:["dashboard"]}),d(!1),w(`/companies/${C.id}`)}}),T=We({mutationFn:async C=>{const D={title:C.title,status:"publish",date_type:C.date_type,acf:{date_value:C.date_value,related_people:C.related_people,is_recurring:C.is_recurring,year_unknown:C.year_unknown}};return(await He.createDate(D)).data},onSuccess:()=>{x.invalidateQueries({queryKey:["reminders"]}),f(!1)}}),j=async C=>{m(!0);try{await E.mutateAsync(C)}finally{m(!1)}},P=async C=>{v(!0);try{await N.mutateAsync(C)}finally{v(!1)}},O=async C=>{b(!0);try{await T.mutateAsync(C)}finally{b(!1)}};return k.useEffect(()=>{const C=D=>{(D.metaKey||D.ctrlKey)&&D.key==="k"&&(D.preventDefault(),o(!0))};return document.addEventListener("keydown",C),()=>document.removeEventListener("keydown",C)},[]),c.jsxs("div",{className:"flex h-screen bg-gray-50",children:[c.jsx("div",{className:"hidden lg:flex lg:w-64 lg:flex-col",children:c.jsx(p5,{})}),e&&c.jsxs("div",{className:"fixed inset-0 z-40 lg:hidden",children:[c.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>r(!1)}),c.jsx("div",{className:"fixed inset-y-0 left-0 flex flex-col w-64 bg-white",children:c.jsx(p5,{mobile:!0,onClose:()=>r(!1)})})]}),c.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[c.jsx(hge,{onMenuClick:()=>r(!0),onAddTodo:()=>i(!0),onAddPerson:()=>l(!0),onAddCompany:()=>d(!0),onAddDate:()=>f(!0),onOpenSearch:()=>o(!0)}),c.jsx("main",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:t})]}),c.jsx(uge,{isOpen:s,onClose:()=>o(!1)}),c.jsx(ure,{isOpen:n,onClose:()=>i(!1)}),c.jsx(DM,{isOpen:a,onClose:()=>l(!1),onSubmit:j,isLoading:p}),c.jsx($M,{isOpen:u,onClose:()=>d(!1),onSubmit:P,isLoading:g}),c.jsx(FM,{isOpen:h,onClose:()=>f(!1),onSubmit:O,isLoading:y,allPeople:S,isPeopleLoading:_})]})}function ut(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function $o(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function pge(t,e){const r=ut(t);return isNaN(e)?$o(t,NaN):(e&&r.setDate(r.getDate()+e),r)}const Nre=6048e5,mge=864e5,kre=6e4,Cre=36e5,kg=43200,m5=1440;let gge={};function um(){return gge}function Pc(t,e){var a,l,u,d;const r=um(),n=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=ut(t),s=i.getDay(),o=(s<n?7:0)+s-n;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function nv(t){return Pc(t,{weekStartsOn:1})}function Tre(t){const e=ut(t),r=e.getFullYear(),n=$o(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=nv(n),s=$o(t,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=nv(s);return e.getTime()>=i.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function iv(t){const e=ut(t);return e.setHours(0,0,0,0),e}function sv(t){const e=ut(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function yge(t,e){const r=iv(t),n=iv(e),i=+r-sv(r),s=+n-sv(n);return Math.round((i-s)/mge)}function vge(t){const e=Tre(t),r=$o(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),nv(r)}function ud(t,e){const r=ut(t),n=ut(e),i=r.getTime()-n.getTime();return i<0?-1:i>0?1:i}function V0(t){return $o(t,Date.now())}function jre(t,e){const r=iv(t),n=iv(e);return+r==+n}function bge(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function xge(t){if(!bge(t)&&typeof t!="number")return!1;const e=ut(t);return!isNaN(Number(e))}function wge(t,e){const r=ut(t),n=ut(e),i=r.getFullYear()-n.getFullYear(),s=r.getMonth()-n.getMonth();return i*12+s}function Sge(t,e){const r=ut(t),n=ut(e);return r.getFullYear()-n.getFullYear()}function _ge(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function Ege(t,e){return+ut(t)-+ut(e)}function Nge(t){const e=ut(t);return e.setHours(23,59,59,999),e}function kge(t){const e=ut(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function Cge(t){const e=ut(t);return+Nge(e)==+kge(e)}function Tge(t,e){const r=ut(t),n=ut(e),i=ud(r,n),s=Math.abs(wge(r,n));let o;if(s<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*s);let a=ud(r,n)===-i;Cge(ut(t))&&s===1&&ud(t,n)===1&&(a=!1),o=i*(s-Number(a))}return o===0?0:o}function jge(t,e,r){const n=Ege(t,e)/1e3;return _ge(r==null?void 0:r.roundingMethod)(n)}function Dx(t,e){const r=ut(t),n=ut(e),i=ud(r,n),s=Math.abs(Sge(r,n));r.setFullYear(1584),n.setFullYear(1584);const o=ud(r,n)===-i,a=i*(s-+o);return a===0?0:a}function Oge(t){const e=ut(t),r=$o(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Pge={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ige=(t,e,r)=>{let n;const i=Pge[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function $x(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const Rge={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Mge={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Age={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Dge={date:$x({formats:Rge,defaultWidth:"full"}),time:$x({formats:Mge,defaultWidth:"full"}),dateTime:$x({formats:Age,defaultWidth:"full"})},$ge={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Fge=(t,e,r,n)=>$ge[t];function sf(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let i;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=r!=null&&r.width?String(r.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=r!=null&&r.width?String(r.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const qge={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Lge={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Bge={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},zge={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Vge={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Wge={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Uge=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Hge={ordinalNumber:Uge,era:sf({values:qge,defaultWidth:"wide"}),quarter:sf({values:Lge,defaultWidth:"wide",argumentCallback:t=>t-1}),month:sf({values:Bge,defaultWidth:"wide"}),day:sf({values:zge,defaultWidth:"wide"}),dayPeriod:sf({values:Vge,defaultWidth:"wide",formattingValues:Wge,defaultFormattingWidth:"wide"})};function of(t){return(e,r={})=>{const n=r.width,i=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?Gge(a,h=>h.test(o)):Kge(a,h=>h.test(o));let u;u=t.valueCallback?t.valueCallback(l):l,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function Kge(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function Gge(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function Yge(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const i=n[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const Qge=/^(\d+)(th|st|nd|rd)?/i,Xge=/\d+/i,Jge={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Zge={any:[/^b/i,/^(a|c)/i]},eye={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},tye={any:[/1/i,/2/i,/3/i,/4/i]},rye={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},nye={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},iye={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},sye={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},oye={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},aye={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},lye={ordinalNumber:Yge({matchPattern:Qge,parsePattern:Xge,valueCallback:t=>parseInt(t,10)}),era:of({matchPatterns:Jge,defaultMatchWidth:"wide",parsePatterns:Zge,defaultParseWidth:"any"}),quarter:of({matchPatterns:eye,defaultMatchWidth:"wide",parsePatterns:tye,defaultParseWidth:"any",valueCallback:t=>t+1}),month:of({matchPatterns:rye,defaultMatchWidth:"wide",parsePatterns:nye,defaultParseWidth:"any"}),day:of({matchPatterns:iye,defaultMatchWidth:"wide",parsePatterns:sye,defaultParseWidth:"any"}),dayPeriod:of({matchPatterns:oye,defaultMatchWidth:"any",parsePatterns:aye,defaultParseWidth:"any"})},Ore={code:"en-US",formatDistance:Ige,formatLong:Dge,formatRelative:Fge,localize:Hge,match:lye,options:{weekStartsOn:0,firstWeekContainsDate:1}};function cye(t){const e=ut(t);return yge(e,Oge(e))+1}function uye(t){const e=ut(t),r=+nv(e)-+vge(e);return Math.round(r/Nre)+1}function Pre(t,e){var d,h,f,p;const r=ut(t),n=r.getFullYear(),i=um(),s=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(f=i.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=$o(t,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const a=Pc(o,e),l=$o(t,0);l.setFullYear(n,0,s),l.setHours(0,0,0,0);const u=Pc(l,e);return r.getTime()>=a.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function dye(t,e){var a,l,u,d;const r=um(),n=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=Pre(t,e),s=$o(t,0);return s.setFullYear(i,0,n),s.setHours(0,0,0,0),Pc(s,e)}function hye(t,e){const r=ut(t),n=+Pc(r,e)-+dye(r,e);return Math.round(n/Nre)+1}function bt(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const Jo={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return bt(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):bt(r+1,2)},d(t,e){return bt(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return bt(t.getHours()%12||12,e.length)},H(t,e){return bt(t.getHours(),e.length)},m(t,e){return bt(t.getMinutes(),e.length)},s(t,e){return bt(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return bt(i,e.length)}},Nu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},g5={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return Jo.y(t,e)},Y:function(t,e,r,n){const i=Pre(t,n),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return bt(o,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):bt(s,e.length)},R:function(t,e){const r=Tre(t);return bt(r,e.length)},u:function(t,e){const r=t.getFullYear();return bt(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return bt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return bt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return Jo.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return bt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const i=hye(t,n);return e==="wo"?r.ordinalNumber(i,{unit:"week"}):bt(i,e.length)},I:function(t,e,r){const n=uye(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):bt(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):Jo.d(t,e)},D:function(t,e,r){const n=cye(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):bt(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return bt(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return bt(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return bt(i,e.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let i;switch(n===12?i=Nu.noon:n===0?i=Nu.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let i;switch(n>=17?i=Nu.evening:n>=12?i=Nu.afternoon:n>=4?i=Nu.morning:i=Nu.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Jo.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):Jo.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):bt(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):bt(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):Jo.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):Jo.s(t,e)},S:function(t,e){return Jo.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return v5(n);case"XXXX":case"XX":return Al(n);case"XXXXX":case"XXX":default:return Al(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return v5(n);case"xxxx":case"xx":return Al(n);case"xxxxx":case"xxx":default:return Al(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+y5(n,":");case"OOOO":default:return"GMT"+Al(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+y5(n,":");case"zzzz":default:return"GMT"+Al(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return bt(n,e.length)},T:function(t,e,r){const n=t.getTime();return bt(n,e.length)}};function y5(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Math.trunc(n/60),s=n%60;return s===0?r+String(i):r+String(i)+e+bt(s,2)}function v5(t,e){return t%60===0?(t>0?"-":"+")+bt(Math.abs(t)/60,2):Al(t,e)}function Al(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=bt(Math.trunc(n/60),2),s=bt(n%60,2);return r+i+e+s}const b5=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Ire=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},fye=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return b5(t,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",b5(n,e)).replace("{{time}}",Ire(i,e))},pye={p:Ire,P:fye},mye=/^D+$/,gye=/^Y+$/,yye=["D","DD","YY","YYYY"];function vye(t){return mye.test(t)}function bye(t){return gye.test(t)}function xye(t,e,r){const n=wye(t,e,r);if(console.warn(n),yye.includes(t))throw new RangeError(n)}function wye(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Sye=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,_ye=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Eye=/^'([^]*?)'?$/,Nye=/''/g,kye=/[a-zA-Z]/;function Nn(t,e,r){var d,h,f,p;const n=um(),i=n.locale??Ore,s=n.firstWeekContainsDate??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,o=n.weekStartsOn??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,a=ut(t);if(!xge(a))throw new RangeError("Invalid time value");let l=e.match(_ye).map(m=>{const g=m[0];if(g==="p"||g==="P"){const v=pye[g];return v(m,i.formatLong)}return m}).join("").match(Sye).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const g=m[0];if(g==="'")return{isToken:!1,value:Cye(m)};if(g5[g])return{isToken:!0,value:m};if(g.match(kye))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:m}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(m=>{if(!m.isToken)return m.value;const g=m.value;(bye(g)||vye(g))&&xye(g,e,String(t));const v=g5[g[0]];return v(a,g,i.localize,u)}).join("")}function Cye(t){const e=t.match(Eye);return e?e[1].replace(Nye,"'"):t}function Tye(t,e,r){const n=um(),i=(r==null?void 0:r.locale)??n.locale??Ore,s=2520,o=ud(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const a=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let l,u;o>0?(l=ut(e),u=ut(t)):(l=ut(t),u=ut(e));const d=jge(u,l),h=(sv(u)-sv(l))/1e3,f=Math.round((d-h)/60);let p;if(f<2)return r!=null&&r.includeSeconds?d<5?i.formatDistance("lessThanXSeconds",5,a):d<10?i.formatDistance("lessThanXSeconds",10,a):d<20?i.formatDistance("lessThanXSeconds",20,a):d<40?i.formatDistance("halfAMinute",0,a):d<60?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",1,a):f===0?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",f,a);if(f<45)return i.formatDistance("xMinutes",f,a);if(f<90)return i.formatDistance("aboutXHours",1,a);if(f<m5){const m=Math.round(f/60);return i.formatDistance("aboutXHours",m,a)}else{if(f<s)return i.formatDistance("xDays",1,a);if(f<kg){const m=Math.round(f/m5);return i.formatDistance("xDays",m,a)}else if(f<kg*2)return p=Math.round(f/kg),i.formatDistance("aboutXMonths",p,a)}if(p=Tge(u,l),p<12){const m=Math.round(f/kg);return i.formatDistance("xMonths",m,a)}else{const m=p%12,g=Math.trunc(p/12);return m<3?i.formatDistance("aboutXYears",g,a):m<9?i.formatDistance("overXYears",g,a):i.formatDistance("almostXYears",g+1,a)}}function jye(t,e){return Tye(t,V0(t),e)}function Oye(t,e){const r=ut(t),n=ut(e);return r.getTime()>n.getTime()}function Pye(t,e,r){const n=Pc(t,r),i=Pc(e,r);return+n==+i}function Iye(t,e){return Pye(t,V0(t),e)}function Rre(t){return jre(t,V0(t))}function Mre(t,e){return pge(t,-e)}function Are(t){return jre(t,Mre(V0(t),1))}function wp(t,e){const n=Dye(t);let i;if(n.date){const l=$ye(n.date,2);i=Fye(l.restDateString,l.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const s=i.getTime();let o=0,a;if(n.time&&(o=qye(n.time),isNaN(o)))return new Date(NaN);if(n.timezone){if(a=Lye(n.timezone),isNaN(a))return new Date(NaN)}else{const l=new Date(s+o),u=new Date(0);return u.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),u.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),u}return new Date(s+o+a)}const Cg={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Rye=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Mye=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Aye=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Dye(t){const e={},r=t.split(Cg.dateTimeDelimiter);let n;if(r.length>2)return e;if(/:/.test(r[0])?n=r[0]:(e.date=r[0],n=r[1],Cg.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Cg.timeZoneDelimiter)[0],n=t.substr(e.date.length,t.length))),n){const i=Cg.timezone.exec(n);i?(e.time=n.replace(i[1],""),e.timezone=i[1]):e.time=n}return e}function $ye(t,e){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=t.match(r);if(!n)return{year:NaN,restDateString:""};const i=n[1]?parseInt(n[1]):null,s=n[2]?parseInt(n[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((n[1]||n[2]).length)}}function Fye(t,e){if(e===null)return new Date(NaN);const r=t.match(Rye);if(!r)return new Date(NaN);const n=!!r[4],i=af(r[1]),s=af(r[2])-1,o=af(r[3]),a=af(r[4]),l=af(r[5])-1;if(n)return Uye(e,a,l)?Bye(e,a,l):new Date(NaN);{const u=new Date(0);return!Vye(e,s,o)||!Wye(e,i)?new Date(NaN):(u.setUTCFullYear(e,s,Math.max(i,o)),u)}}function af(t){return t?parseInt(t):1}function qye(t){const e=t.match(Mye);if(!e)return NaN;const r=Fx(e[1]),n=Fx(e[2]),i=Fx(e[3]);return Hye(r,n,i)?r*Cre+n*kre+i*1e3:NaN}function Fx(t){return t&&parseFloat(t.replace(",","."))||0}function Lye(t){if(t==="Z")return 0;const e=t.match(Aye);if(!e)return 0;const r=e[1]==="+"?-1:1,n=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return Kye(n,i)?r*(n*Cre+i*kre):NaN}function Bye(t,e,r){const n=new Date(0);n.setUTCFullYear(t,0,4);const i=n.getUTCDay()||7,s=(e-1)*7+r+1-i;return n.setUTCDate(n.getUTCDate()+s),n}const zye=[31,null,31,30,31,30,31,31,30,31,30,31];function Dre(t){return t%400===0||t%4===0&&t%100!==0}function Vye(t,e,r){return e>=0&&e<=11&&r>=1&&r<=(zye[e]||(Dre(t)?29:28))}function Wye(t,e){return e>=1&&e<=(Dre(t)?366:365)}function Uye(t,e,r){return e>=1&&e<=53&&r>=0&&r<=6}function Hye(t,e,r){return t===24?e===0&&r===0:r>=0&&r<60&&e>=0&&e<60&&t>=0&&t<25}function Kye(t,e){return e>=0&&e<=59}function Gye(t){if(!t||t.length===0)return{todos:[],today:[],yesterday:[],thisWeek:[],older:[]};const e={todos:[],today:[],yesterday:[],thisWeek:[],older:[]};return t.forEach(r=>{if(r.type==="todo"){e.todos.push(r);return}wp(r.created);let n=r.activity_date||r.created;r.activity_date&&r.activity_time&&(n=`${r.activity_date}T${r.activity_time}`);const i=wp(n);Rre(i)?e.today.push(r):Are(i)?e.yesterday.push(r):Iye(i)?e.thisWeek.push(r):e.older.push(r)}),e.todos.sort((r,n)=>{if(r.is_completed&&!n.is_completed)return 1;if(!r.is_completed&&n.is_completed)return-1;if(!r.is_completed&&!n.is_completed){if(r.due_date&&n.due_date)return new Date(r.due_date)-new Date(n.due_date);if(r.due_date&&!n.due_date)return-1;if(!r.due_date&&n.due_date)return 1}return new Date(n.created)-new Date(r.created)}),e}function Yye(t){if(!t)return"";try{const e=wp(t),r=t.includes("T")&&t.length>10,n=r?" at HH:mm":"";return Rre(e)?jye(e,{addSuffix:!0}):Are(e)?r?Nn(e,"'Yesterday' 'at' HH:mm"):"Yesterday":Nn(e,r?"MMM d, yyyy 'at' HH:mm":"MMM d, yyyy")}catch{return t}}function Qye(t){return{call:"Phone",email:"Mail",chat:"MessageCircle",meeting:"Users",coffee:"Coffee",lunch:"Utensils",note:"FileText"}[t]||"Circle"}function Xye(t){return{call:"Phone call",email:"Email",chat:"Chat",meeting:"Meeting",coffee:"Coffee",lunch:"Lunch",note:"Note"}[t]||t||"Activity"}function dm(t){if(!t.due_date||t.is_completed)return!1;try{const e=wp(t.due_date),r=new Date;return r.setHours(0,0,0,0),e.setHours(0,0,0,0),e<r}catch{return!1}}function Jye(t){const e=[];return t.is_completed?e.push("opacity-60","line-through"):dm(t)&&e.push("text-red-600","font-medium"),e.join(" ")}function qM({isOpen:t,onClose:e,todo:r,onComplete:n,onCompleteAsActivity:i}){return!t||!r?null:c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Complete todo"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:c.jsx(mt,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"p-4",children:[c.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:['"',r.content,'"']}),c.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"How would you like to complete this todo?"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("button",{onClick:n,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-colors text-left",children:[c.jsx(Fs,{className:"w-5 h-5 text-primary-600 flex-shrink-0"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium text-gray-900",children:"Just complete"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Mark the todo as done"})]})]}),c.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors text-left",children:[c.jsx(M0,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium text-gray-900",children:"Complete & log activity"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Record this as an activity on the timeline"})]})]})]})]}),c.jsx("div",{className:"flex justify-end p-4 border-t bg-gray-50 rounded-b-lg",children:c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancel"})})]})})}var $re={exports:{}},Fre={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vd=k;function Zye(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var eve=typeof Object.is=="function"?Object.is:Zye,tve=Vd.useState,rve=Vd.useEffect,nve=Vd.useLayoutEffect,ive=Vd.useDebugValue;function sve(t,e){var r=e(),n=tve({inst:{value:r,getSnapshot:e}}),i=n[0].inst,s=n[1];return nve(function(){i.value=r,i.getSnapshot=e,qx(i)&&s({inst:i})},[t,r,e]),rve(function(){return qx(i)&&s({inst:i}),t(function(){qx(i)&&s({inst:i})})},[t]),ive(r),r}function qx(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!eve(t,r)}catch{return!0}}function ove(t,e){return e()}var ave=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ove:sve;Fre.useSyncExternalStore=Vd.useSyncExternalStore!==void 0?Vd.useSyncExternalStore:ave;$re.exports=Fre;var LM=$re.exports;function Zr(t){this.content=t}Zr.prototype={constructor:Zr,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,r){var n=r&&r!=t?this.remove(r):this,i=n.find(t),s=n.content.slice();return i==-1?s.push(r||t,e):(s[i+1]=e,r&&(s[i]=r)),new Zr(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var r=this.content.slice();return r.splice(e,2),new Zr(r)},addToStart:function(t,e){return new Zr([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var r=this.remove(t).content.slice();return r.push(t,e),new Zr(r)},addBefore:function(t,e,r){var n=this.remove(e),i=n.content.slice(),s=n.find(t);return i.splice(s==-1?i.length:s,0,e,r),new Zr(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Zr.from(t),t.size?new Zr(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Zr.from(t),t.size?new Zr(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Zr.from(t);for(var r=0;r<t.content.length;r+=2)e=e.remove(t.content[r]);return e},toObject:function(){var t={};return this.forEach(function(e,r){t[e]=r}),t},get size(){return this.content.length>>1}};Zr.from=function(t){if(t instanceof Zr)return t;var e=[];if(t)for(var r in t)e.push(r,t[r]);return new Zr(e)};function qre(t,e,r){for(let n=0;;n++){if(n==t.childCount||n==e.childCount)return t.childCount==e.childCount?null:r;let i=t.child(n),s=e.child(n);if(i==s){r+=i.nodeSize;continue}if(!i.sameMarkup(s))return r;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)r++;return r}if(i.content.size||s.content.size){let o=qre(i.content,s.content,r+1);if(o!=null)return o}r+=i.nodeSize}}function Lre(t,e,r,n){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:r,b:n};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){r-=l,n-=l;continue}if(!o.sameMarkup(a))return{a:r,b:n};if(o.isText&&o.text!=a.text){let u=0,d=Math.min(o.text.length,a.text.length);for(;u<d&&o.text[o.text.length-u-1]==a.text[a.text.length-u-1];)u++,r--,n--;return{a:r,b:n}}if(o.content.size||a.content.size){let u=Lre(o.content,a.content,r-1,n-1);if(u)return u}r-=l,n-=l}}class X{constructor(e,r){if(this.content=e,this.size=r||0,r==null)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,r,n,i=0,s){for(let o=0,a=0;a<r;o++){let l=this.content[o],u=a+l.nodeSize;if(u>e&&n(l,i+a,s||null,o)!==!1&&l.content.size){let d=a+1;l.nodesBetween(Math.max(0,e-d),Math.min(l.content.size,r-d),n,i+d)}a=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,r,n,i){let s="",o=!0;return this.nodesBetween(e,r,(a,l)=>{let u=a.isText?a.text.slice(Math.max(e,l)-l,r-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&u||a.isTextblock)&&n&&(o?o=!1:s+=n),s+=u},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let r=this.lastChild,n=e.firstChild,i=this.content.slice(),s=0;for(r.isText&&r.sameMarkup(n)&&(i[i.length-1]=r.withText(r.text+n.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new X(i,this.size+e.size)}cut(e,r=this.size){if(e==0&&r==this.size)return this;let n=[],i=0;if(r>e)for(let s=0,o=0;o<r;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>r)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,r-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,r-o-1))),n.push(a),i+=a.nodeSize),o=l}return new X(n,i)}cutByIndex(e,r){return e==r?X.empty:e==0&&r==this.content.length?this:new X(this.content.slice(e,r))}replaceChild(e,r){let n=this.content[e];if(n==r)return this;let i=this.content.slice(),s=this.size+r.nodeSize-n.nodeSize;return i[e]=r,new X(i,s)}addToStart(e){return new X([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new X(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let r=0;r<this.content.length;r++)if(!this.content[r].eq(e.content[r]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let r=this.content[e];if(!r)throw new RangeError("Index "+e+" out of range for "+this);return r}maybeChild(e){return this.content[e]||null}forEach(e){for(let r=0,n=0;r<this.content.length;r++){let i=this.content[r];e(i,n,r),n+=i.nodeSize}}findDiffStart(e,r=0){return qre(this,e,r)}findDiffEnd(e,r=this.size,n=e.size){return Lre(this,e,r,n)}findIndex(e){if(e==0)return Tg(0,e);if(e==this.size)return Tg(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,n=0;;r++){let i=this.child(r),s=n+i.nodeSize;if(s>=e)return s==e?Tg(r+1,s):Tg(r,n);n=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,r){if(!r)return X.empty;if(!Array.isArray(r))throw new RangeError("Invalid input for Fragment.fromJSON");return new X(r.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return X.empty;let r,n=0;for(let i=0;i<e.length;i++){let s=e[i];n+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(r||(r=e.slice(0,i)),r[r.length-1]=s.withText(r[r.length-1].text+s.text)):r&&r.push(s)}return new X(r||e,n)}static from(e){if(!e)return X.empty;if(e instanceof X)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new X([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}X.empty=new X([],0);const Lx={index:0,offset:0};function Tg(t,e){return Lx.index=t,Lx.offset=e,Lx}function ov(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let r=Array.isArray(t);if(Array.isArray(e)!=r)return!1;if(r){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!ov(t[n],e[n]))return!1}else{for(let n in t)if(!(n in e)||!ov(t[n],e[n]))return!1;for(let n in e)if(!(n in t))return!1}return!0}let Nt=class xI{constructor(e,r){this.type=e,this.attrs=r}addToSet(e){let r,n=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))r||(r=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!n&&s.type.rank>this.type.rank&&(r||(r=e.slice(0,i)),r.push(this),n=!0),r&&r.push(s)}}return r||(r=e.slice()),n||r.push(this),r}removeFromSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return e.slice(0,r).concat(e.slice(r+1));return e}isInSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return!0;return!1}eq(e){return this==e||this.type==e.type&&ov(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[r.type];if(!n)throw new RangeError(`There is no mark type ${r.type} in this schema`);let i=n.create(r.attrs);return n.checkAttrs(i.attrs),i}static sameSet(e,r){if(e==r)return!0;if(e.length!=r.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(r[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return xI.none;if(e instanceof xI)return[e];let r=e.slice();return r.sort((n,i)=>n.type.rank-i.type.rank),r}};Nt.none=[];class av extends Error{}class ve{constructor(e,r,n){this.content=e,this.openStart=r,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,r){let n=zre(this.content,e+this.openStart,r);return n&&new ve(n,this.openStart,this.openEnd)}removeBetween(e,r){return new ve(Bre(this.content,e+this.openStart,r+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,r){if(!r)return ve.empty;let n=r.openStart||0,i=r.openEnd||0;if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ve(X.fromJSON(e,r.content),n,i)}static maxOpen(e,r=!0){let n=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(r||!s.type.spec.isolating);s=s.firstChild)n++;for(let s=e.lastChild;s&&!s.isLeaf&&(r||!s.type.spec.isolating);s=s.lastChild)i++;return new ve(e,n,i)}}ve.empty=new ve(X.empty,0,0);function Bre(t,e,r){let{index:n,offset:i}=t.findIndex(e),s=t.maybeChild(n),{index:o,offset:a}=t.findIndex(r);if(i==e||s.isText){if(a!=r&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(r))}if(n!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(n,s.copy(Bre(s.content,e-i-1,r-i-1)))}function zre(t,e,r,n){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return n&&!n.canReplace(i,i,r)?null:t.cut(0,e).append(r).append(t.cut(e));let a=zre(o.content,e-s-1,r,o);return a&&t.replaceChild(i,o.copy(a))}function lve(t,e,r){if(r.openStart>t.depth)throw new av("Inserted content deeper than insertion position");if(t.depth-r.openStart!=e.depth-r.openEnd)throw new av("Inconsistent open depths");return Vre(t,e,r,0)}function Vre(t,e,r,n){let i=t.index(n),s=t.node(n);if(i==e.index(n)&&n<t.depth-r.openStart){let o=Vre(t,e,r,n+1);return s.copy(s.content.replaceChild(i,o))}else if(r.content.size)if(!r.openStart&&!r.openEnd&&t.depth==n&&e.depth==n){let o=t.parent,a=o.content;return uc(o,a.cut(0,t.parentOffset).append(r.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=cve(r,t);return uc(s,Ure(t,o,a,e,n))}else return uc(s,lv(t,e,n))}function Wre(t,e){if(!e.type.compatibleContent(t.type))throw new av("Cannot join "+e.type.name+" onto "+t.type.name)}function wI(t,e,r){let n=t.node(r);return Wre(n,e.node(r)),n}function cc(t,e){let r=e.length-1;r>=0&&t.isText&&t.sameMarkup(e[r])?e[r]=t.withText(e[r].text+t.text):e.push(t)}function Af(t,e,r,n){let i=(e||t).node(r),s=0,o=e?e.index(r):i.childCount;t&&(s=t.index(r),t.depth>r?s++:t.textOffset&&(cc(t.nodeAfter,n),s++));for(let a=s;a<o;a++)cc(i.child(a),n);e&&e.depth==r&&e.textOffset&&cc(e.nodeBefore,n)}function uc(t,e){return t.type.checkContent(e),t.copy(e)}function Ure(t,e,r,n,i){let s=t.depth>i&&wI(t,e,i+1),o=n.depth>i&&wI(r,n,i+1),a=[];return Af(null,t,i,a),s&&o&&e.index(i)==r.index(i)?(Wre(s,o),cc(uc(s,Ure(t,e,r,n,i+1)),a)):(s&&cc(uc(s,lv(t,e,i+1)),a),Af(e,r,i,a),o&&cc(uc(o,lv(r,n,i+1)),a)),Af(n,null,i,a),new X(a)}function lv(t,e,r){let n=[];if(Af(null,t,r,n),t.depth>r){let i=wI(t,e,r+1);cc(uc(i,lv(t,e,r+1)),n)}return Af(e,null,r,n),new X(n)}function cve(t,e){let r=e.depth-t.openStart,i=e.node(r).copy(t.content);for(let s=r-1;s>=0;s--)i=e.node(s).copy(X.from(i));return{start:i.resolveNoCache(t.openStart+r),end:i.resolveNoCache(i.content.size-t.openEnd-r)}}class Sp{constructor(e,r,n){this.pos=e,this.path=r,this.parentOffset=n,this.depth=r.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,r=this.index(this.depth);if(r==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],i=e.child(r);return n?e.child(r).cut(n):i}get nodeBefore(){let e=this.index(this.depth),r=this.pos-this.path[this.path.length-1];return r?this.parent.child(e).cut(0,r):e==0?null:this.parent.child(e-1)}posAtIndex(e,r){r=this.resolveDepth(r);let n=this.path[r*3],i=r==0?0:this.path[r*3-1]+1;for(let s=0;s<e;s++)i+=n.child(s).nodeSize;return i}marks(){let e=this.parent,r=this.index();if(e.content.size==0)return Nt.none;if(this.textOffset)return e.child(r).marks;let n=e.maybeChild(r-1),i=e.maybeChild(r);if(!n){let a=n;n=i,i=a}let s=n.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let r=this.parent.maybeChild(this.index());if(!r||!r.isInline)return null;let n=r.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<n.length;s++)n[s].type.spec.inclusive===!1&&(!i||!n[s].isInSet(i.marks))&&(n=n[s--].removeFromSet(n));return n}sharedDepth(e){for(let r=this.depth;r>0;r--)if(this.start(r)<=e&&this.end(r)>=e)return r;return 0}blockRange(e=this,r){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!r||r(this.node(n))))return new cv(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let r=1;r<=this.depth;r++)e+=(e?"/":"")+this.node(r).type.name+"_"+this.index(r-1);return e+":"+this.parentOffset}static resolve(e,r){if(!(r>=0&&r<=e.content.size))throw new RangeError("Position "+r+" out of range");let n=[],i=0,s=r;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),u=s-l;if(n.push(o,a,i+l),!u||(o=o.child(a),o.isText))break;s=u-1,i+=l+1}return new Sp(r,n,s)}static resolveCached(e,r){let n=x5.get(e);if(n)for(let s=0;s<n.elts.length;s++){let o=n.elts[s];if(o.pos==r)return o}else x5.set(e,n=new uve);let i=n.elts[n.i]=Sp.resolve(e,r);return n.i=(n.i+1)%dve,i}}class uve{constructor(){this.elts=[],this.i=0}}const dve=12,x5=new WeakMap;class cv{constructor(e,r,n){this.$from=e,this.$to=r,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const hve=Object.create(null);let Wa=class SI{constructor(e,r,n,i=Nt.none){this.type=e,this.attrs=r,this.marks=i,this.content=n||X.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,r,n,i=0){this.content.nodesBetween(e,r,n,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,r,n,i){return this.content.textBetween(e,r,n,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,r,n){return this.type==e&&ov(this.attrs,r||e.defaultAttrs||hve)&&Nt.sameSet(this.marks,n||Nt.none)}copy(e=null){return e==this.content?this:new SI(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new SI(this.type,this.attrs,this.content,e)}cut(e,r=this.content.size){return e==0&&r==this.content.size?this:this.copy(this.content.cut(e,r))}slice(e,r=this.content.size,n=!1){if(e==r)return ve.empty;let i=this.resolve(e),s=this.resolve(r),o=n?0:i.sharedDepth(r),a=i.start(o),u=i.node(o).content.cut(i.pos-a,s.pos-a);return new ve(u,i.depth-o,s.depth-o)}replace(e,r,n){return lve(this.resolve(e),this.resolve(r),n)}nodeAt(e){for(let r=this;;){let{index:n,offset:i}=r.content.findIndex(e);if(r=r.maybeChild(n),!r)return null;if(i==e||r.isText)return r;e-=i+1}}childAfter(e){let{index:r,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(r),index:r,offset:n}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:r,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(r),index:r,offset:n};let i=this.content.child(r-1);return{node:i,index:r-1,offset:n-i.nodeSize}}resolve(e){return Sp.resolveCached(this,e)}resolveNoCache(e){return Sp.resolve(this,e)}rangeHasMark(e,r,n){let i=!1;return r>e&&this.nodesBetween(e,r,s=>(n.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Hre(this.marks,e)}contentMatchAt(e){let r=this.type.contentMatch.matchFragment(this.content,0,e);if(!r)throw new Error("Called contentMatchAt on a node with invalid content");return r}canReplace(e,r,n=X.empty,i=0,s=n.childCount){let o=this.contentMatchAt(e).matchFragment(n,i,s),a=o&&o.matchFragment(this.content,r);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(n.child(l).marks))return!1;return!0}canReplaceWith(e,r,n,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(n),o=s&&s.matchFragment(this.content,r);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Nt.none;for(let r=0;r<this.marks.length;r++){let n=this.marks[r];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!Nt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(r=>r.type.name)}`);this.content.forEach(r=>r.check())}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(r=>r.toJSON())),e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Node.fromJSON");let n;if(r.marks){if(!Array.isArray(r.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=r.marks.map(e.markFromJSON)}if(r.type=="text"){if(typeof r.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(r.text,n)}let i=X.fromJSON(e,r.content),s=e.nodeType(r.type).create(r.attrs,i,n);return s.type.checkAttrs(s.attrs),s}};Wa.prototype.text=void 0;class uv extends Wa{constructor(e,r,n,i){if(super(e,r,null,i),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Hre(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,r){return this.text.slice(e,r)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new uv(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new uv(this.type,this.attrs,e,this.marks)}cut(e=0,r=this.text.length){return e==0&&r==this.text.length?this:this.withText(this.text.slice(e,r))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Hre(t,e){for(let r=t.length-1;r>=0;r--)e=t[r].type.name+"("+e+")";return e}class Ic{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,r){let n=new fve(e,r);if(n.next==null)return Ic.empty;let i=Kre(n);n.next&&n.err("Unexpected trailing text");let s=xve(bve(i));return wve(s,n),s}matchType(e){for(let r=0;r<this.next.length;r++)if(this.next[r].type==e)return this.next[r].next;return null}matchFragment(e,r=0,n=e.childCount){let i=this;for(let s=r;i&&s<n;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:r}=this.next[e];if(!(r.isText||r.hasRequiredAttrs()))return r}return null}compatible(e){for(let r=0;r<this.next.length;r++)for(let n=0;n<e.next.length;n++)if(this.next[r].type==e.next[n].type)return!0;return!1}fillBefore(e,r=!1,n=0){let i=[this];function s(o,a){let l=o.matchFragment(e,n);if(l&&(!r||l.validEnd))return X.from(a.map(u=>u.createAndFill()));for(let u=0;u<o.next.length;u++){let{type:d,next:h}=o.next[u];if(!(d.isText||d.hasRequiredAttrs())&&i.indexOf(h)==-1){i.push(h);let f=s(h,a.concat(d));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let r=this.computeWrapping(e);return this.wrapCache.push(e,r),r}computeWrapping(e){let r=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let i=n.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in r)&&(!i.type||l.validEnd)&&(n.push({match:a.contentMatch,type:a,via:i}),r[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function r(n){e.push(n);for(let i=0;i<n.next.length;i++)e.indexOf(n.next[i].next)==-1&&r(n.next[i].next)}return r(this),e.map((n,i)=>{let s=i+(n.validEnd?"*":" ")+" ";for(let o=0;o<n.next.length;o++)s+=(o?", ":"")+n.next[o].type.name+"->"+e.indexOf(n.next[o].next);return s}).join(`
`)}}Ic.empty=new Ic(!0);class fve{constructor(e,r){this.string=e,this.nodeTypes=r,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Kre(t){let e=[];do e.push(pve(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function pve(t){let e=[];do e.push(mve(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function mve(t){let e=vve(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=gve(t,e);else break;return e}function w5(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function gve(t,e){let r=w5(t),n=r;return t.eat(",")&&(t.next!="}"?n=w5(t):n=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:r,max:n,expr:e}}function yve(t,e){let r=t.nodeTypes,n=r[e];if(n)return[n];let i=[];for(let s in r){let o=r[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function vve(t){if(t.eat("(")){let e=Kre(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=yve(t,t.next).map(r=>(t.inline==null?t.inline=r.isInline:t.inline!=r.isInline&&t.err("Mixing inline and block content"),{type:"name",value:r}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function bve(t){let e=[[]];return i(s(t,0),r()),e;function r(){return e.push([])-1}function n(o,a,l){let u={term:l,to:a};return e[o].push(u),u}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,u)=>l.concat(s(u,a)),[]);if(o.type=="seq")for(let l=0;;l++){let u=s(o.exprs[l],a);if(l==o.exprs.length-1)return u;i(u,a=r())}else if(o.type=="star"){let l=r();return n(a,l),i(s(o.expr,l),l),[n(l)]}else if(o.type=="plus"){let l=r();return i(s(o.expr,a),l),i(s(o.expr,l),l),[n(l)]}else{if(o.type=="opt")return[n(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let u=0;u<o.min;u++){let d=r();i(s(o.expr,l),d),l=d}if(o.max==-1)i(s(o.expr,l),l);else for(let u=o.min;u<o.max;u++){let d=r();n(l,d),i(s(o.expr,l),d),l=d}return[n(l)]}else{if(o.type=="name")return[n(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function Gre(t,e){return e-t}function S5(t,e){let r=[];return n(e),r.sort(Gre);function n(i){let s=t[i];if(s.length==1&&!s[0].term)return n(s[0].to);r.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&r.indexOf(l)==-1&&n(l)}}}function xve(t){let e=Object.create(null);return r(S5(t,0));function r(n){let i=[];n.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let u;for(let d=0;d<i.length;d++)i[d][0]==a&&(u=i[d][1]);S5(t,l).forEach(d=>{u||i.push([a,u=[]]),u.indexOf(d)==-1&&u.push(d)})})});let s=e[n.join(",")]=new Ic(n.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(Gre);s.next.push({type:i[o][0],next:e[a.join(",")]||r(a)})}return s}}function wve(t,e){for(let r=0,n=[t];r<n.length;r++){let i=n[r],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:u}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),n.indexOf(u)==-1&&n.push(u)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Yre(t){let e=Object.create(null);for(let r in t){let n=t[r];if(!n.hasDefault)return null;e[r]=n.default}return e}function Qre(t,e){let r=Object.create(null);for(let n in t){let i=e&&e[n];if(i===void 0){let s=t[n];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+n)}r[n]=i}return r}function Xre(t,e,r,n){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${r} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function Jre(t,e){let r=Object.create(null);if(e)for(let n in e)r[n]=new _ve(t,n,e[n]);return r}let _5=class Zre{constructor(e,r,n){this.name=e,this.schema=r,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=Jre(e,n.attrs),this.defaultAttrs=Yre(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ic.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Qre(this.attrs,e)}create(e=null,r,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Wa(this,this.computeAttrs(e),X.from(r),Nt.setFrom(n))}createChecked(e=null,r,n){return r=X.from(r),this.checkContent(r),new Wa(this,this.computeAttrs(e),r,Nt.setFrom(n))}createAndFill(e=null,r,n){if(e=this.computeAttrs(e),r=X.from(r),r.size){let o=this.contentMatch.fillBefore(r);if(!o)return null;r=o.append(r)}let i=this.contentMatch.matchFragment(r),s=i&&i.fillBefore(X.empty,!0);return s?new Wa(this,e,r.append(s),Nt.setFrom(n)):null}validContent(e){let r=this.contentMatch.matchFragment(e);if(!r||!r.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Xre(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let r=0;r<e.length;r++)if(!this.allowsMarkType(e[r].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let r;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?r&&r.push(e[n]):r||(r=e.slice(0,n));return r?r.length?r:Nt.none:e}static compile(e,r){let n=Object.create(null);e.forEach((s,o)=>n[s]=new Zre(s,r,o));let i=r.spec.topNode||"doc";if(!n[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let s in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function Sve(t,e,r){let n=r.split("|");return i=>{let s=i===null?"null":typeof i;if(n.indexOf(s)<0)throw new RangeError(`Expected value of type ${n} for attribute ${e} on type ${t}, got ${s}`)}}class _ve{constructor(e,r,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?Sve(e,r,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class W0{constructor(e,r,n,i){this.name=e,this.rank=r,this.schema=n,this.spec=i,this.attrs=Jre(e,i.attrs),this.excluded=null;let s=Yre(this.attrs);this.instance=s?new Nt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Nt(this,Qre(this.attrs,e))}static compile(e,r){let n=Object.create(null),i=0;return e.forEach((s,o)=>n[s]=new W0(s,i++,r,o)),n}removeFromSet(e){for(var r=0;r<e.length;r++)e[r].type==this&&(e=e.slice(0,r).concat(e.slice(r+1)),r--);return e}isInSet(e){for(let r=0;r<e.length;r++)if(e[r].type==this)return e[r]}checkAttrs(e){Xre(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class ene{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let r=this.spec={};for(let i in e)r[i]=e[i];r.nodes=Zr.from(e.nodes),r.marks=Zr.from(e.marks||{}),this.nodes=_5.compile(this.spec.nodes,this),this.marks=W0.compile(this.spec.marks,this);let n=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=n[o]||(n[o]=Ic.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?E5(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:E5(this,o.split(" "))}this.nodeFromJSON=i=>Wa.fromJSON(this,i),this.markFromJSON=i=>Nt.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,r=null,n,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof _5){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(r,n,i)}text(e,r){let n=this.nodes.text;return new uv(n,n.defaultAttrs,e,Nt.setFrom(r))}mark(e,r){return typeof e=="string"&&(e=this.marks[e]),e.create(r)}nodeType(e){let r=this.nodes[e];if(!r)throw new RangeError("Unknown node type: "+e);return r}}function E5(t,e){let r=[];for(let n=0;n<e.length;n++){let i=e[n],s=t.marks[i],o=s;if(s)r.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&r.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return r}function Eve(t){return t.tag!=null}function Nve(t){return t.style!=null}class Ua{constructor(e,r){this.schema=e,this.rules=r,this.tags=[],this.styles=[];let n=this.matchedStyles=[];r.forEach(i=>{if(Eve(i))this.tags.push(i);else if(Nve(i)){let s=/[^=]*/.exec(i.style)[0];n.indexOf(s)<0&&n.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,r={}){let n=new k5(this,r,!1);return n.addAll(e,Nt.none,r.from,r.to),n.finish()}parseSlice(e,r={}){let n=new k5(this,r,!0);return n.addAll(e,Nt.none,r.from,r.to),ve.maxOpen(n.finish())}matchTag(e,r,n){for(let i=n?this.tags.indexOf(n)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(Tve(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||r.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,r,n,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!n.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=r))){if(o.getAttrs){let l=o.getAttrs(r);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let r=[];function n(i){let s=i.priority==null?50:i.priority,o=0;for(;o<r.length;o++){let a=r[o];if((a.priority==null?50:a.priority)<s)break}r.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{n(o=C5(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{n(o=C5(o)),o.node||o.ignore||o.mark||(o.node=i)})}return r}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Ua(e,Ua.schemaRules(e)))}}const tne={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},kve={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},rne={ol:!0,ul:!0},_p=1,_I=2,Df=4;function N5(t,e,r){return e!=null?(e?_p:0)|(e==="full"?_I:0):t&&t.whitespace=="pre"?_p|_I:r&~Df}class jg{constructor(e,r,n,i,s,o){this.type=e,this.attrs=r,this.marks=n,this.solid=i,this.options=o,this.content=[],this.activeMarks=Nt.none,this.match=s||(o&Df?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let r=this.type.contentMatch.fillBefore(X.from(e));if(r)this.match=this.type.contentMatch.matchFragment(r);else{let n=this.type.contentMatch,i;return(i=n.findWrapping(e.type))?(this.match=n,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&_p)){let n=this.content[this.content.length-1],i;if(n&&n.isText&&(i=/[ \t\r\n\u000c]+$/.exec(n.text))){let s=n;n.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let r=X.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(X.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!tne.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class k5{constructor(e,r,n){this.parser=e,this.options=r,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let i=r.topNode,s,o=N5(null,r.preserveWhitespace,0)|(n?Df:0);i?s=new jg(i.type,i.attrs,Nt.none,!0,r.topMatch||i.type.contentMatch,o):n?s=new jg(null,null,Nt.none,!0,null,o):s=new jg(e.schema.topNodeType,null,Nt.none,!0,null,o),this.nodes=[s],this.find=r.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,r){e.nodeType==3?this.addTextNode(e,r):e.nodeType==1&&this.addElement(e,r)}addTextNode(e,r){let n=e.nodeValue,i=this.top,s=i.options&_I?"full":this.localPreserveWS||(i.options&_p)>0,{schema:o}=this.parser;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(s)if(s==="full")n=n.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(n)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=n.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),r,!0),a[l]&&this.insertNode(o.text(a[l]),r,!/\S/.test(a[l]));n=""}else n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],l=e.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(n=n.slice(1))}n&&this.insertNode(o.text(n),r,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,r,n){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;rne.hasOwnProperty(o)&&this.parser.normalizeLists&&Cve(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,n));e:if(l?l.ignore:kve.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,r);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let u,d=this.needsBlock;if(tne.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),u=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,r);break e}let h=l&&l.skip?r:this.readStyles(e,r);h&&this.addAll(e,h),u&&this.sync(s),this.needsBlock=d}else{let u=this.readStyles(e,r);u&&this.addElementByRule(e,l,u,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,r){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),r)}ignoreFallback(e,r){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),r,!0)}readStyles(e,r){let n=e.style;if(n&&n.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=n.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?r=r.filter(u=>!l.clearMark(u)):r=r.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return r}addElementByRule(e,r,n,i){let s,o;if(r.node)if(o=this.parser.schema.nodes[r.node],o.isLeaf)this.insertNode(o.create(r.attrs),n,e.nodeName=="BR")||this.leafFallback(e,n);else{let l=this.enter(o,r.attrs||null,n,r.preserveWhitespace);l&&(s=!0,n=l)}else{let l=this.parser.schema.marks[r.mark];n=n.concat(l.create(r.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,n,i);else if(r.getContent)this.findInside(e),r.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,n,!1));else{let l=e;typeof r.contentElement=="string"?l=e.querySelector(r.contentElement):typeof r.contentElement=="function"?l=r.contentElement(e):r.contentElement&&(l=r.contentElement),this.findAround(e,l,!0),this.addAll(l,n),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,r,n,i){let s=n||0;for(let o=n?e.childNodes[n]:e.firstChild,a=i==null?null:e.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,r);this.findAtPoint(e,s)}findPlace(e,r,n){let i,s;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],u=l.findWrapping(e);if(u&&(!i||i.length>u.length+a)&&(i=u,s=l,!u.length))break;if(l.solid){if(n)break;a+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)r=this.enterInner(i[o],null,r,!1);return r}insertNode(e,r,n){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(r=this.enterInner(s,null,r))}let i=this.findPlace(e,r,n);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=Nt.none;for(let a of i.concat(e.marks))(s.type?s.type.allowsMarkType(a.type):T5(a.type,e.type))&&(o=a.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,r,n,i){let s=this.findPlace(e.create(r),n,!1);return s&&(s=this.enterInner(e,r,n,!0,i)),s}enterInner(e,r,n,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=N5(e,s,o.options);o.options&Df&&o.content.length==0&&(a|=Df);let l=Nt.none;return n=n.filter(u=>(o.type?o.type.allowsMarkType(u.type):T5(u.type,e))?(l=u.addToSet(l),!1):!0),this.nodes.push(new jg(e,r,l,i,null,a)),this.open++,n}closeExtra(e=!1){let r=this.nodes.length-1;if(r>this.open){for(;r>this.open;r--)this.nodes[r-1].content.push(this.nodes[r].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let r=this.open;r>=0;r--){if(this.nodes[r]==e)return this.open=r,!0;this.localPreserveWS&&(this.nodes[r].options|=_p)}return!1}get currentPos(){this.closeExtra();let e=0;for(let r=this.open;r>=0;r--){let n=this.nodes[r].content;for(let i=n.length-1;i>=0;i--)e+=n[i].nodeSize;r&&e++}return e}findAtPoint(e,r){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==r&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)&&(this.find[r].pos=this.currentPos)}findAround(e,r,n){if(e!=r&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&r.compareDocumentPosition(this.find[i].node)&(n?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&(this.find[r].pos=this.currentPos-(e.nodeValue.length-this.find[r].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let r=e.split("/"),n=this.options.context,i=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),s=-(n?n.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let u=r[a];if(u==""){if(a==r.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let d=l>0||l==0&&i?this.nodes[l].type:n&&l>=s?n.node(l-s).type:null;if(!d||d.name!=u&&!d.isInGroup(u))return!1;l--}}return!0};return o(r.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let r=e.depth;r>=0;r--){let n=e.node(r).contentMatchAt(e.indexAfter(r)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let r in this.parser.schema.nodes){let n=this.parser.schema.nodes[r];if(n.isTextblock&&n.defaultAttrs)return n}}}function Cve(t){for(let e=t.firstChild,r=null;e;e=e.nextSibling){let n=e.nodeType==1?e.nodeName.toLowerCase():null;n&&rne.hasOwnProperty(n)&&r?(r.appendChild(e),e=r):n=="li"?r=e:n&&(r=null)}}function Tve(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function C5(t){let e={};for(let r in t)e[r]=t[r];return e}function T5(t,e){let r=e.schema.nodes;for(let n in r){let i=r[n];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:u,next:d}=a.edge(l);if(u==e||s.indexOf(d)<0&&o(d))return!0}};if(o(i.contentMatch))return!0}}class Yc{constructor(e,r){this.nodes=e,this.marks=r}serializeFragment(e,r={},n){n||(n=Bx(r).createDocumentFragment());let i=n,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let u=o.marks[l];if(!this.marks[u.type.name]){l++;continue}if(!u.eq(s[a][0])||u.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let u=o.marks[l++],d=this.serializeMark(u,o.isInline,r);d&&(s.push([u,i]),i.appendChild(d.dom),i=d.contentDOM||d.dom)}}i.appendChild(this.serializeNodeInner(o,r))}),n}serializeNodeInner(e,r){let{dom:n,contentDOM:i}=fy(Bx(r),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,r,i)}return n}serializeNode(e,r={}){let n=this.serializeNodeInner(e,r);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,r);s&&((s.contentDOM||s.dom).appendChild(n),n=s.dom)}return n}serializeMark(e,r,n={}){let i=this.marks[e.type.name];return i&&fy(Bx(n),i(e,r),null,e.attrs)}static renderSpec(e,r,n=null,i){return fy(e,r,n,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Yc(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let r=j5(e.nodes);return r.text||(r.text=n=>n.text),r}static marksFromSchema(e){return j5(e.marks)}}function j5(t){let e={};for(let r in t){let n=t[r].spec.toDOM;n&&(e[r]=n)}return e}function Bx(t){return t.document||window.document}const O5=new WeakMap;function jve(t){let e=O5.get(t);return e===void 0&&O5.set(t,e=Ove(t)),e}function Ove(t){let e=null;function r(n){if(n&&typeof n=="object")if(Array.isArray(n))if(typeof n[0]=="string")e||(e=[]),e.push(n);else for(let i=0;i<n.length;i++)r(n[i]);else for(let i in n)r(n[i])}return r(t),e}function fy(t,e,r,n){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(n&&(s=jve(n))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(r=i.slice(0,o),i=i.slice(o+1));let a,l=r?t.createElementNS(r,i):t.createElement(i),u=e[1],d=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){d=2;for(let h in u)if(u[h]!=null){let f=h.indexOf(" ");f>0?l.setAttributeNS(h.slice(0,f),h.slice(f+1),u[h]):h=="style"&&l.style?l.style.cssText=u[h]:l.setAttribute(h,u[h])}}for(let h=d;h<e.length;h++){let f=e[h];if(f===0){if(h<e.length-1||h>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:p,contentDOM:m}=fy(t,f,r,n);if(l.appendChild(p),m){if(a)throw new RangeError("Multiple content holes");a=m}}}return{dom:l,contentDOM:a}}const nne=65535,ine=Math.pow(2,16);function Pve(t,e){return t+e*ine}function P5(t){return t&nne}function Ive(t){return(t-(t&nne))/ine}const sne=1,one=2,py=4,ane=8;class EI{constructor(e,r,n){this.pos=e,this.delInfo=r,this.recover=n}get deleted(){return(this.delInfo&ane)>0}get deletedBefore(){return(this.delInfo&(sne|py))>0}get deletedAfter(){return(this.delInfo&(one|py))>0}get deletedAcross(){return(this.delInfo&py)>0}}class pi{constructor(e,r=!1){if(this.ranges=e,this.inverted=r,!e.length&&pi.empty)return pi.empty}recover(e){let r=0,n=P5(e);if(!this.inverted)for(let i=0;i<n;i++)r+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[n*3]+r+Ive(e)}mapResult(e,r=1){return this._map(e,r,!1)}map(e,r=1){return this._map(e,r,!0)}_map(e,r,n){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let u=this.ranges[a+s],d=this.ranges[a+o],h=l+u;if(e<=h){let f=u?e==l?-1:e==h?1:r:r,p=l+i+(f<0?0:d);if(n)return p;let m=e==(r<0?l:h)?null:Pve(a/3,e-l),g=e==l?one:e==h?sne:py;return(r<0?e!=l:e!=h)&&(g|=ane),new EI(p,g,m)}i+=d-u}return n?e+i:new EI(e+i,0,null)}touches(e,r){let n=0,i=P5(r),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?n:0);if(l>e)break;let u=this.ranges[a+s],d=l+u;if(e<=d&&a==i*3)return!0;n+=this.ranges[a+o]-u}return!1}forEach(e){let r=this.inverted?2:1,n=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),u=this.ranges[i+r],d=this.ranges[i+n];e(a,a+u,l,l+d),s+=d-u}}invert(){return new pi(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?pi.empty:new pi(e<0?[0,-e,0]:[0,0,e])}}pi.empty=new pi([]);class Ep{constructor(e,r,n=0,i=e?e.length:0){this.mirror=r,this.from=n,this.to=i,this._maps=e||[],this.ownData=!(e||r)}get maps(){return this._maps}slice(e=0,r=this.maps.length){return new Ep(this._maps,this.mirror,e,r)}appendMap(e,r){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),r!=null&&this.setMirror(this._maps.length-1,r)}appendMapping(e){for(let r=0,n=this._maps.length;r<e._maps.length;r++){let i=e.getMirror(r);this.appendMap(e._maps[r],i!=null&&i<r?n+i:void 0)}}getMirror(e){if(this.mirror){for(let r=0;r<this.mirror.length;r++)if(this.mirror[r]==e)return this.mirror[r+(r%2?-1:1)]}}setMirror(e,r){this.mirror||(this.mirror=[]),this.mirror.push(e,r)}appendMappingInverted(e){for(let r=e.maps.length-1,n=this._maps.length+e._maps.length;r>=0;r--){let i=e.getMirror(r);this.appendMap(e._maps[r].invert(),i!=null&&i>r?n-i-1:void 0)}}invert(){let e=new Ep;return e.appendMappingInverted(this),e}map(e,r=1){if(this.mirror)return this._map(e,r,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,r);return e}mapResult(e,r=1){return this._map(e,r,!1)}_map(e,r,n){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(e,r);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return n?e:new EI(e,i,null)}}const zx=Object.create(null);class vn{getMap(){return pi.empty}merge(e){return null}static fromJSON(e,r){if(!r||!r.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=zx[r.stepType];if(!n)throw new RangeError(`No step type ${r.stepType} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in zx)throw new RangeError("Duplicate use of step JSON ID "+e);return zx[e]=r,r.prototype.jsonID=e,r}}class yr{constructor(e,r){this.doc=e,this.failed=r}static ok(e){return new yr(e,null)}static fail(e){return new yr(null,e)}static fromReplace(e,r,n,i){try{return yr.ok(e.replace(r,n,i))}catch(s){if(s instanceof av)return yr.fail(s.message);throw s}}}function BM(t,e,r){let n=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(BM(s.content,e,s))),s.isInline&&(s=e(s,r,i)),n.push(s)}return X.fromArray(n)}class Oa extends vn{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=e.resolve(this.from),i=n.node(n.sharedDepth(this.to)),s=new ve(BM(r.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),r.openStart,r.openEnd);return yr.fromReplace(e,this.from,this.to,s)}invert(){return new ds(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new Oa(r.pos,n.pos,this.mark)}merge(e){return e instanceof Oa&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Oa(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Oa(r.from,r.to,e.markFromJSON(r.mark))}}vn.jsonID("addMark",Oa);class ds extends vn{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=new ve(BM(r.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),r.openStart,r.openEnd);return yr.fromReplace(e,this.from,this.to,n)}invert(){return new Oa(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new ds(r.pos,n.pos,this.mark)}merge(e){return e instanceof ds&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ds(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ds(r.from,r.to,e.markFromJSON(r.mark))}}vn.jsonID("removeMark",ds);class Pa extends vn{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return yr.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.addToSet(r.marks));return yr.fromReplace(e,this.pos,this.pos+1,new ve(X.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);if(r){let n=this.mark.addToSet(r.marks);if(n.length==r.marks.length){for(let i=0;i<r.marks.length;i++)if(!r.marks[i].isInSet(n))return new Pa(this.pos,r.marks[i]);return new Pa(this.pos,this.mark)}}return new Rc(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Pa(r.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Pa(r.pos,e.markFromJSON(r.mark))}}vn.jsonID("addNodeMark",Pa);class Rc extends vn{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return yr.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.removeFromSet(r.marks));return yr.fromReplace(e,this.pos,this.pos+1,new ve(X.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);return!r||!this.mark.isInSet(r.marks)?this:new Pa(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Rc(r.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Rc(r.pos,e.markFromJSON(r.mark))}}vn.jsonID("removeNodeMark",Rc);class Fr extends vn{constructor(e,r,n,i=!1){super(),this.from=e,this.to=r,this.slice=n,this.structure=i}apply(e){return this.structure&&NI(e,this.from,this.to)?yr.fail("Structure replace would overwrite content"):yr.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new pi([this.from,this.to-this.from,this.slice.size])}invert(e){return new Fr(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deletedAcross&&n.deletedAcross?null:new Fr(r.pos,Math.max(r.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Fr)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let r=this.slice.size+e.slice.size==0?ve.empty:new ve(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Fr(this.from,this.to+(e.to-e.from),r,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let r=this.slice.size+e.slice.size==0?ve.empty:new ve(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Fr(e.from,this.to,r,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Fr(r.from,r.to,ve.fromJSON(e,r.slice),!!r.structure)}}vn.jsonID("replace",Fr);class Br extends vn{constructor(e,r,n,i,s,o,a=!1){super(),this.from=e,this.to=r,this.gapFrom=n,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(NI(e,this.from,this.gapFrom)||NI(e,this.gapTo,this.to)))return yr.fail("Structure gap-replace would overwrite content");let r=e.slice(this.gapFrom,this.gapTo);if(r.openStart||r.openEnd)return yr.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,r.content);return n?yr.fromReplace(e,this.from,this.to,n):yr.fail("Content does not fit in gap")}getMap(){return new pi([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let r=this.gapTo-this.gapFrom;return new Br(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),i=this.from==this.gapFrom?r.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return r.deletedAcross&&n.deletedAcross||i<r.pos||s>n.pos?null:new Br(r.pos,n.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number"||typeof r.gapFrom!="number"||typeof r.gapTo!="number"||typeof r.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Br(r.from,r.to,r.gapFrom,r.gapTo,ve.fromJSON(e,r.slice),r.insert,!!r.structure)}}vn.jsonID("replaceAround",Br);function NI(t,e,r){let n=t.resolve(e),i=r-e,s=n.depth;for(;i>0&&s>0&&n.indexAfter(s)==n.node(s).childCount;)s--,i--;if(i>0){let o=n.node(s).maybeChild(n.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function Rve(t,e,r,n){let i=[],s=[],o,a;t.doc.nodesBetween(e,r,(l,u,d)=>{if(!l.isInline)return;let h=l.marks;if(!n.isInSet(h)&&d.type.allowsMarkType(n.type)){let f=Math.max(u,e),p=Math.min(u+l.nodeSize,r),m=n.addToSet(h);for(let g=0;g<h.length;g++)h[g].isInSet(m)||(o&&o.to==f&&o.mark.eq(h[g])?o.to=p:i.push(o=new ds(f,p,h[g])));a&&a.to==f?a.to=p:s.push(a=new Oa(f,p,n))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function Mve(t,e,r,n){let i=[],s=0;t.doc.nodesBetween(e,r,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(n instanceof W0){let u=o.marks,d;for(;d=n.isInSet(u);)(l||(l=[])).push(d),u=d.removeFromSet(u)}else n?n.isInSet(o.marks)&&(l=[n]):l=o.marks;if(l&&l.length){let u=Math.min(a+o.nodeSize,r);for(let d=0;d<l.length;d++){let h=l[d],f;for(let p=0;p<i.length;p++){let m=i[p];m.step==s-1&&h.eq(i[p].style)&&(f=m)}f?(f.to=u,f.step=s):i.push({style:h,from:Math.max(a,e),to:u,step:s})}}}),i.forEach(o=>t.step(new ds(o.from,o.to,o.style)))}function zM(t,e,r,n=r.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<s.childCount;l++){let u=s.child(l),d=a+u.nodeSize,h=n.matchType(u.type);if(!h)o.push(new Fr(a,d,ve.empty));else{n=h;for(let f=0;f<u.marks.length;f++)r.allowsMarkType(u.marks[f].type)||t.step(new ds(a,d,u.marks[f]));if(i&&u.isText&&r.whitespace!="pre"){let f,p=/\r?\n|\r/g,m;for(;f=p.exec(u.text);)m||(m=new ve(X.from(r.schema.text(" ",r.allowedMarks(u.marks))),0,0)),o.push(new Fr(a+f.index,a+f.index+f[0].length,m))}}a=d}if(!n.validEnd){let l=n.fillBefore(X.empty,!0);t.replace(a,a,new ve(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function Ave(t,e,r){return(e==0||t.canReplace(e,t.childCount))&&(r==t.childCount||t.canReplace(0,r))}function gh(t){let r=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let n=t.depth,i=0,s=0;;--n){let o=t.$from.node(n),a=t.$from.index(n)+i,l=t.$to.indexAfter(n)-s;if(n<t.depth&&o.canReplace(a,l,r))return n;if(n==0||o.type.spec.isolating||!Ave(o,a,l))break;a&&(i=1),l<o.childCount&&(s=1)}return null}function Dve(t,e,r){let{$from:n,$to:i,depth:s}=e,o=n.before(s+1),a=i.after(s+1),l=o,u=a,d=X.empty,h=0;for(let m=s,g=!1;m>r;m--)g||n.index(m)>0?(g=!0,d=X.from(n.node(m).copy(d)),h++):l--;let f=X.empty,p=0;for(let m=s,g=!1;m>r;m--)g||i.after(m+1)<i.end(m)?(g=!0,f=X.from(i.node(m).copy(f)),p++):u++;t.step(new Br(l,u,o,a,new ve(d.append(f),h,p),d.size-h,!0))}function VM(t,e,r=null,n=t){let i=$ve(t,e),s=i&&Fve(n,e);return s?i.map(I5).concat({type:e,attrs:r}).concat(s.map(I5)):null}function I5(t){return{type:t,attrs:null}}function $ve(t,e){let{parent:r,startIndex:n,endIndex:i}=t,s=r.contentMatchAt(n).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return r.canReplaceWith(n,i,o)?s:null}function Fve(t,e){let{parent:r,startIndex:n,endIndex:i}=t,s=r.child(n),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let u=n;l&&u<i;u++)l=l.matchType(r.child(u).type);return!l||!l.validEnd?null:o}function qve(t,e,r){let n=X.empty;for(let o=r.length-1;o>=0;o--){if(n.size){let a=r[o].type.contentMatch.matchFragment(n);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=X.from(r[o].type.create(r[o].attrs,n))}let i=e.start,s=e.end;t.step(new Br(i,s,i,s,new ve(n,0,0),r.length,!0))}function Lve(t,e,r,n,i){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,r,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(n,l)&&Bve(t.doc,t.mapping.slice(s).map(a),n)){let u=null;if(n.schema.linebreakReplacement){let p=n.whitespace=="pre",m=!!n.contentMatch.matchType(n.schema.linebreakReplacement);p&&!m?u=!1:!p&&m&&(u=!0)}u===!1&&cne(t,o,a,s),zM(t,t.mapping.slice(s).map(a,1),n,void 0,u===null);let d=t.mapping.slice(s),h=d.map(a,1),f=d.map(a+o.nodeSize,1);return t.step(new Br(h,f,h+1,f-1,new ve(X.from(n.create(l,null,o.marks)),0,0),1,!0)),u===!0&&lne(t,o,a,s),!1}})}function lne(t,e,r,n){e.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=t.mapping.slice(n).map(r+1+s+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function cne(t,e,r,n){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(n).map(r+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function Bve(t,e,r){let n=t.resolve(e),i=n.index();return n.parent.canReplaceWith(i,i+1,r)}function zve(t,e,r,n,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");r||(r=s.type);let o=r.create(n,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!r.validContent(s.content))throw new RangeError("Invalid content for node type "+r.name);t.step(new Br(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new ve(X.from(o),0,0),1,!0))}function xo(t,e,r=1,n){let i=t.resolve(e),s=i.depth-r,o=n&&n[n.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,d=r-2;u>s;u--,d--){let h=i.node(u),f=i.index(u);if(h.type.spec.isolating)return!1;let p=h.content.cutByIndex(f,h.childCount),m=n&&n[d+1];m&&(p=p.replaceChild(0,m.type.create(m.attrs)));let g=n&&n[d]||h;if(!h.canReplace(f+1,h.childCount)||!g.type.validContent(p))return!1}let a=i.indexAfter(s),l=n&&n[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function Vve(t,e,r=1,n){let i=t.doc.resolve(e),s=X.empty,o=X.empty;for(let a=i.depth,l=i.depth-r,u=r-1;a>l;a--,u--){s=X.from(i.node(a).copy(s));let d=n&&n[u];o=X.from(d?d.type.create(d.attrs,o):i.node(a).copy(o))}t.step(new Fr(e,e,new ve(s.append(o),r,r),!0))}function fl(t,e){let r=t.resolve(e),n=r.index();return une(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function Wve(t,e){e.content.size||t.type.compatibleContent(e.type);let r=t.contentMatchAt(t.childCount),{linebreakReplacement:n}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==n?t.type.schema.nodes.text:s.type;if(r=r.matchType(o),!r||!t.type.allowsMarks(s.marks))return!1}return r.validEnd}function une(t,e){return!!(t&&e&&!t.isLeaf&&Wve(t,e))}function U0(t,e,r=-1){let n=t.resolve(e);for(let i=n.depth;;i--){let s,o,a=n.index(i);if(i==n.depth?(s=n.nodeBefore,o=n.nodeAfter):r>0?(s=n.node(i+1),a++,o=n.node(i).maybeChild(a)):(s=n.node(i).maybeChild(a-1),o=n.node(i+1)),s&&!s.isTextblock&&une(s,o)&&n.node(i).canReplace(a,a+1))return e;if(i==0)break;e=r<0?n.before(i):n.after(i)}}function Uve(t,e,r){let n=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-r),o=s.node().type;if(i&&o.inlineContent){let d=o.whitespace=="pre",h=!!o.contentMatch.matchType(i);d&&!h?n=!1:!d&&h&&(n=!0)}let a=t.steps.length;if(n===!1){let d=t.doc.resolve(e+r);cne(t,d.node(),d.before(),a)}o.inlineContent&&zM(t,e+r-1,o,s.node().contentMatchAt(s.index()),n==null);let l=t.mapping.slice(a),u=l.map(e-r);if(t.step(new Fr(u,l.map(e+r,-1),ve.empty,!0)),n===!0){let d=t.doc.resolve(u);lne(t,d.node(),d.before(),t.steps.length)}return t}function Hve(t,e,r){let n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),r))return e;if(n.parentOffset==0)for(let i=n.depth-1;i>=0;i--){let s=n.index(i);if(n.node(i).canReplaceWith(s,s,r))return n.before(i+1);if(s>0)return null}if(n.parentOffset==n.parent.content.size)for(let i=n.depth-1;i>=0;i--){let s=n.indexAfter(i);if(n.node(i).canReplaceWith(s,s,r))return n.after(i+1);if(s<n.node(i).childCount)return null}return null}function dne(t,e,r){let n=t.resolve(e);if(!r.content.size)return e;let i=r.content;for(let s=0;s<r.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(r.openStart==0&&r.size?2:1);s++)for(let o=n.depth;o>=0;o--){let a=o==n.depth?0:n.pos<=(n.start(o+1)+n.end(o+1))/2?-1:1,l=n.index(o)+(a>0?1:0),u=n.node(o),d=!1;if(s==1)d=u.canReplace(l,l,i);else{let h=u.contentMatchAt(l).findWrapping(i.firstChild.type);d=h&&u.canReplaceWith(l,l,h[0])}if(d)return a==0?n.pos:a<0?n.before(o+1):n.after(o+1)}return null}function H0(t,e,r=e,n=ve.empty){if(e==r&&!n.size)return null;let i=t.resolve(e),s=t.resolve(r);return hne(i,s,n)?new Fr(e,r,n):new Kve(i,s,n).fit()}function hne(t,e,r){return!r.openStart&&!r.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),r.content)}class Kve{constructor(e,r,n){this.$from=e,this.$to=r,this.unplaced=n,this.frontier=[],this.placed=X.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=X.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(e<0?this.$to:n.doc.resolve(e));if(!i)return null;let s=this.placed,o=n.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new ve(s,o,a);return e>-1?new Br(n.pos,e,this.$to.pos,this.$to.end(),l,r):l.size||n.pos!=this.$to.pos?new Fr(n.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let r=this.unplaced.content,n=0,i=this.unplaced.openEnd;n<e;n++){let s=r.firstChild;if(r.childCount>1&&(i=0),s.type.spec.isolating&&i<=n){e=n;break}r=s.content}for(let r=1;r<=2;r++)for(let n=r==1?e:this.unplaced.openStart;n>=0;n--){let i,s=null;n?(s=Vx(this.unplaced.content,n-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:u}=this.frontier[a],d,h=null;if(r==1&&(o?u.matchType(o.type)||(h=u.fillBefore(X.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:n,frontierDepth:a,parent:s,inject:h};if(r==2&&o&&(d=u.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:a,parent:s,wrap:d};if(s&&u.matchType(s.type))break}}}openMore(){let{content:e,openStart:r,openEnd:n}=this.unplaced,i=Vx(e,r);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new ve(e,r+1,Math.max(n,i.size+r>=e.size-n?r+1:0)),!0)}dropNode(){let{content:e,openStart:r,openEnd:n}=this.unplaced,i=Vx(e,r);if(i.childCount<=1&&r>0){let s=e.size-r<=r+i.size;this.unplaced=new ve(xf(e,r-1,1),r-1,s?r-1:n)}else this.unplaced=new ve(xf(e,r,1),r,n)}placeNodes({sliceDepth:e,frontierDepth:r,parent:n,inject:i,wrap:s}){for(;this.depth>r;)this.closeFrontierNode();if(s)for(let g=0;g<s.length;g++)this.openFrontierNode(s[g]);let o=this.unplaced,a=n?n.content:o.content,l=o.openStart-e,u=0,d=[],{match:h,type:f}=this.frontier[r];if(i){for(let g=0;g<i.childCount;g++)d.push(i.child(g));h=h.matchFragment(i)}let p=a.size+e-(o.content.size-o.openEnd);for(;u<a.childCount;){let g=a.child(u),v=h.matchType(g.type);if(!v)break;u++,(u>1||l==0||g.content.size)&&(h=v,d.push(fne(g.mark(f.allowedMarks(g.marks)),u==1?l:0,u==a.childCount?p:-1)))}let m=u==a.childCount;m||(p=-1),this.placed=wf(this.placed,r,X.from(d)),this.frontier[r].match=h,m&&p<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,v=a;g<p;g++){let y=v.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),v=y.content}this.unplaced=m?e==0?ve.empty:new ve(xf(o.content,e-1,1),e-1,p<0?o.openEnd:e-1):new ve(xf(o.content,e,u),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],r;if(!e.type.isTextblock||!Wx(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(r=this.findCloseLevel(this.$to))&&r.depth==this.depth)return-1;let{depth:n}=this.$to,i=this.$to.after(n);for(;n>1&&i==this.$to.end(--n);)++i;return i}findCloseLevel(e){e:for(let r=Math.min(this.depth,e.depth);r>=0;r--){let{match:n,type:i}=this.frontier[r],s=r<e.depth&&e.end(r+1)==e.pos+(e.depth-(r+1)),o=Wx(e,r,i,n,s);if(o){for(let a=r-1;a>=0;a--){let{match:l,type:u}=this.frontier[a],d=Wx(e,a,u,l,!0);if(!d||d.childCount)continue e}return{depth:r,fit:o,move:s?e.doc.resolve(e.after(r+1)):e}}}}close(e){let r=this.findCloseLevel(e);if(!r)return null;for(;this.depth>r.depth;)this.closeFrontierNode();r.fit.childCount&&(this.placed=wf(this.placed,r.depth,r.fit)),e=r.move;for(let n=r.depth+1;n<=e.depth;n++){let i=e.node(n),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(n));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,r=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=wf(this.placed,this.depth,X.from(e.create(r,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let r=this.frontier.pop().match.fillBefore(X.empty,!0);r.childCount&&(this.placed=wf(this.placed,this.frontier.length,r))}}function xf(t,e,r){return e==0?t.cutByIndex(r,t.childCount):t.replaceChild(0,t.firstChild.copy(xf(t.firstChild.content,e-1,r)))}function wf(t,e,r){return e==0?t.append(r):t.replaceChild(t.childCount-1,t.lastChild.copy(wf(t.lastChild.content,e-1,r)))}function Vx(t,e){for(let r=0;r<e;r++)t=t.firstChild.content;return t}function fne(t,e,r){if(e<=0)return t;let n=t.content;return e>1&&(n=n.replaceChild(0,fne(n.firstChild,e-1,n.childCount==1?r-1:0))),e>0&&(n=t.type.contentMatch.fillBefore(n).append(n),r<=0&&(n=n.append(t.type.contentMatch.matchFragment(n).fillBefore(X.empty,!0)))),t.copy(n)}function Wx(t,e,r,n,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!r.compatibleContent(s.type))return null;let a=n.fillBefore(s.content,!0,o);return a&&!Gve(r,s.content,o)?a:null}function Gve(t,e,r){for(let n=r;n<e.childCount;n++)if(!t.allowsMarks(e.child(n).marks))return!0;return!1}function Yve(t){return t.spec.defining||t.spec.definingForContent}function Qve(t,e,r,n){if(!n.size)return t.deleteRange(e,r);let i=t.doc.resolve(e),s=t.doc.resolve(r);if(hne(i,s,n))return t.step(new Fr(e,r,n));let o=mne(i,s);o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let f=i.depth,p=i.pos-1;f>0;f--,p--){let m=i.node(f).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;o.indexOf(f)>-1?a=f:i.before(f)==p&&o.splice(1,0,-f)}let l=o.indexOf(a),u=[],d=n.openStart;for(let f=n.content,p=0;;p++){let m=f.firstChild;if(u.push(m),p==n.openStart)break;f=m.content}for(let f=d-1;f>=0;f--){let p=u[f],m=Yve(p.type);if(m&&!p.sameMarkup(i.node(Math.abs(a)-1)))d=f;else if(m||!p.type.isTextblock)break}for(let f=n.openStart;f>=0;f--){let p=(f+d+1)%(n.openStart+1),m=u[p];if(m)for(let g=0;g<o.length;g++){let v=o[(g+l)%o.length],y=!0;v<0&&(y=!1,v=-v);let b=i.node(v-1),w=i.index(v-1);if(b.canReplaceWith(w,w,m.type,m.marks))return t.replace(i.before(v),y?s.after(v):r,new ve(pne(n.content,0,n.openStart,p),p,n.openEnd))}}let h=t.steps.length;for(let f=o.length-1;f>=0&&(t.replace(e,r,n),!(t.steps.length>h));f--){let p=o[f];p<0||(e=i.before(p),r=s.after(p))}}function pne(t,e,r,n,i){if(e<r){let s=t.firstChild;t=t.replaceChild(0,s.copy(pne(s.content,e+1,r,n,s)))}if(e>n){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(X.empty,!0))}return t}function Xve(t,e,r,n){if(!n.isInline&&e==r&&t.doc.resolve(e).parent.content.size){let i=Hve(t.doc,e,n.type);i!=null&&(e=r=i)}t.replaceRange(e,r,new ve(X.from(n),0,0))}function Jve(t,e,r){let n=t.doc.resolve(e),i=t.doc.resolve(r),s=mne(n,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||n.node(a).type.contentMatch.validEnd)return t.delete(n.start(a),i.end(a));if(a>0&&(l||n.node(a-1).canReplace(n.index(a-1),i.indexAfter(a-1))))return t.delete(n.before(a),i.after(a))}for(let o=1;o<=n.depth&&o<=i.depth;o++)if(e-n.start(o)==n.depth-o&&r>n.end(o)&&i.end(o)-r!=i.depth-o&&n.start(o-1)==i.start(o-1)&&n.node(o-1).canReplace(n.index(o-1),i.index(o-1)))return t.delete(n.before(o),r);t.delete(e,r)}function mne(t,e){let r=[],n=Math.min(t.depth,e.depth);for(let i=n;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&r.push(i)}return r}class dd extends vn{constructor(e,r,n){super(),this.pos=e,this.attr=r,this.value=n}apply(e){let r=e.nodeAt(this.pos);if(!r)return yr.fail("No node at attribute step's position");let n=Object.create(null);for(let s in r.attrs)n[s]=r.attrs[s];n[this.attr]=this.value;let i=r.type.create(n,null,r.marks);return yr.fromReplace(e,this.pos,this.pos+1,new ve(X.from(i),0,r.isLeaf?0:1))}getMap(){return pi.empty}invert(e){return new dd(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new dd(r.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.pos!="number"||typeof r.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new dd(r.pos,r.attr,r.value)}}vn.jsonID("attr",dd);class Np extends vn{constructor(e,r){super(),this.attr=e,this.value=r}apply(e){let r=Object.create(null);for(let i in e.attrs)r[i]=e.attrs[i];r[this.attr]=this.value;let n=e.type.create(r,e.content,e.marks);return yr.ok(n)}getMap(){return pi.empty}invert(e){return new Np(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Np(r.attr,r.value)}}vn.jsonID("docAttr",Np);let Wd=class extends Error{};Wd=function t(e){let r=Error.call(this,e);return r.__proto__=t.prototype,r};Wd.prototype=Object.create(Error.prototype);Wd.prototype.constructor=Wd;Wd.prototype.name="TransformError";class gne{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Ep}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let r=this.maybeStep(e);if(r.failed)throw new Wd(r.failed);return this}maybeStep(e){let r=e.apply(this.doc);return r.failed||this.addStep(e,r.doc),r}get docChanged(){return this.steps.length>0}addStep(e,r){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=r}replace(e,r=e,n=ve.empty){let i=H0(this.doc,e,r,n);return i&&this.step(i),this}replaceWith(e,r,n){return this.replace(e,r,new ve(X.from(n),0,0))}delete(e,r){return this.replace(e,r,ve.empty)}insert(e,r){return this.replaceWith(e,e,r)}replaceRange(e,r,n){return Qve(this,e,r,n),this}replaceRangeWith(e,r,n){return Xve(this,e,r,n),this}deleteRange(e,r){return Jve(this,e,r),this}lift(e,r){return Dve(this,e,r),this}join(e,r=1){return Uve(this,e,r),this}wrap(e,r){return qve(this,e,r),this}setBlockType(e,r=e,n,i=null){return Lve(this,e,r,n,i),this}setNodeMarkup(e,r,n=null,i){return zve(this,e,r,n,i),this}setNodeAttribute(e,r,n){return this.step(new dd(e,r,n)),this}setDocAttribute(e,r){return this.step(new Np(e,r)),this}addNodeMark(e,r){return this.step(new Pa(e,r)),this}removeNodeMark(e,r){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(r instanceof Nt)r.isInSet(n.marks)&&this.step(new Rc(e,r));else{let i=n.marks,s,o=[];for(;s=r.isInSet(i);)o.push(new Rc(e,s)),i=s.removeFromSet(i);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,r=1,n){return Vve(this,e,r,n),this}addMark(e,r,n){return Rve(this,e,r,n),this}removeMark(e,r,n){return Mve(this,e,r,n),this}clearIncompatible(e,r,n){return zM(this,e,r,n),this}}const Ux=Object.create(null);class Je{constructor(e,r,n){this.$anchor=e,this.$head=r,this.ranges=n||[new Zve(e.min(r),e.max(r))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let r=0;r<e.length;r++)if(e[r].$from.pos!=e[r].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,r=ve.empty){let n=r.content.lastChild,i=null;for(let a=0;a<r.openEnd;a++)i=n,n=n.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:u}=o[a],d=e.mapping.slice(s);e.replaceRange(d.map(l.pos),d.map(u.pos),a?ve.empty:r),a==0&&A5(e,s,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,r){let n=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(n),u=l.map(o.pos),d=l.map(a.pos);s?e.deleteRange(u,d):(e.replaceRangeWith(u,d,r),A5(e,n,r.isInline?-1:1))}}static findFrom(e,r,n=!1){let i=e.parent.inlineContent?new ze(e):Iu(e.node(0),e.parent,e.pos,e.index(),r,n);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=r<0?Iu(e.node(0),e.node(s),e.before(s+1),e.index(s),r,n):Iu(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,r,n);if(o)return o}return null}static near(e,r=1){return this.findFrom(e,r)||this.findFrom(e,-r)||new yi(e.node(0))}static atStart(e){return Iu(e,e,0,0,1)||new yi(e)}static atEnd(e){return Iu(e,e,e.content.size,e.childCount,-1)||new yi(e)}static fromJSON(e,r){if(!r||!r.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=Ux[r.type];if(!n)throw new RangeError(`No selection type ${r.type} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in Ux)throw new RangeError("Duplicate use of selection JSON ID "+e);return Ux[e]=r,r.prototype.jsonID=e,r}getBookmark(){return ze.between(this.$anchor,this.$head).getBookmark()}}Je.prototype.visible=!0;class Zve{constructor(e,r){this.$from=e,this.$to=r}}let R5=!1;function M5(t){!R5&&!t.parent.inlineContent&&(R5=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class ze extends Je{constructor(e,r=e){M5(e),M5(r),super(e,r)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,r){let n=e.resolve(r.map(this.head));if(!n.parent.inlineContent)return Je.near(n);let i=e.resolve(r.map(this.anchor));return new ze(i.parent.inlineContent?i:n,n)}replace(e,r=ve.empty){if(super.replace(e,r),r==ve.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof ze&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new K0(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,r){if(typeof r.anchor!="number"||typeof r.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ze(e.resolve(r.anchor),e.resolve(r.head))}static create(e,r,n=r){let i=e.resolve(r);return new this(i,n==r?i:e.resolve(n))}static between(e,r,n){let i=e.pos-r.pos;if((!n||i)&&(n=i>=0?1:-1),!r.parent.inlineContent){let s=Je.findFrom(r,n,!0)||Je.findFrom(r,-n,!0);if(s)r=s.$head;else return Je.near(r,n)}return e.parent.inlineContent||(i==0?e=r:(e=(Je.findFrom(e,-n,!0)||Je.findFrom(e,n,!0)).$anchor,e.pos<r.pos!=i<0&&(e=r))),new ze(e,r)}}Je.jsonID("text",ze);class K0{constructor(e,r){this.anchor=e,this.head=r}map(e){return new K0(e.map(this.anchor),e.map(this.head))}resolve(e){return ze.between(e.resolve(this.anchor),e.resolve(this.head))}}class Re extends Je{constructor(e){let r=e.nodeAfter,n=e.node(0).resolve(e.pos+r.nodeSize);super(e,n),this.node=r}map(e,r){let{deleted:n,pos:i}=r.mapResult(this.anchor),s=e.resolve(i);return n?Je.near(s):new Re(s)}content(){return new ve(X.from(this.node),0,0)}eq(e){return e instanceof Re&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new WM(this.anchor)}static fromJSON(e,r){if(typeof r.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Re(e.resolve(r.anchor))}static create(e,r){return new Re(e.resolve(r))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Re.prototype.visible=!1;Je.jsonID("node",Re);class WM{constructor(e){this.anchor=e}map(e){let{deleted:r,pos:n}=e.mapResult(this.anchor);return r?new K0(n,n):new WM(n)}resolve(e){let r=e.resolve(this.anchor),n=r.nodeAfter;return n&&Re.isSelectable(n)?new Re(r):Je.near(r)}}class yi extends Je{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,r=ve.empty){if(r==ve.empty){e.delete(0,e.doc.content.size);let n=Je.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,r)}toJSON(){return{type:"all"}}static fromJSON(e){return new yi(e)}map(e){return new yi(e)}eq(e){return e instanceof yi}getBookmark(){return e0e}}Je.jsonID("all",yi);const e0e={map(){return this},resolve(t){return new yi(t)}};function Iu(t,e,r,n,i,s=!1){if(e.inlineContent)return ze.create(t,r);for(let o=n-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&Re.isSelectable(a))return Re.create(t,r-(i<0?a.nodeSize:0))}else{let l=Iu(t,a,r+i,i<0?a.childCount:0,i,s);if(l)return l}r+=a.nodeSize*i}return null}function A5(t,e,r){let n=t.steps.length-1;if(n<e)return;let i=t.steps[n];if(!(i instanceof Fr||i instanceof Br))return;let s=t.mapping.maps[n],o;s.forEach((a,l,u,d)=>{o==null&&(o=d)}),t.setSelection(Je.near(t.doc.resolve(o),r))}const D5=1,Og=2,$5=4;class t0e extends gne{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|D5)&~Og,this.storedMarks=null,this}get selectionSet(){return(this.updated&D5)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Og,this}ensureMarks(e){return Nt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Og)>0}addStep(e,r){super.addStep(e,r),this.updated=this.updated&~Og,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,r=!0){let n=this.selection;return r&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||Nt.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,r,n){let i=this.doc.type.schema;if(r==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(n==null&&(n=r),!e)return this.deleteRange(r,n);let s=this.storedMarks;if(!s){let o=this.doc.resolve(r);s=n==r?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(r,n,i.text(e,s)),!this.selection.empty&&this.selection.to==r+e.length&&this.setSelection(Je.near(this.selection.$to)),this}}setMeta(e,r){return this.meta[typeof e=="string"?e:e.key]=r,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=$5,this}get scrolledIntoView(){return(this.updated&$5)>0}}function F5(t,e){return!e||!t?t:t.bind(e)}class Sf{constructor(e,r,n){this.name=e,this.init=F5(r.init,n),this.apply=F5(r.apply,n)}}const r0e=[new Sf("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Sf("selection",{init(t,e){return t.selection||Je.atStart(e.doc)},apply(t){return t.selection}}),new Sf("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,r,n){return n.selection.$cursor?t.storedMarks:null}}),new Sf("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Hx{constructor(e,r){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=r0e.slice(),r&&r.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new Sf(n.key,n.spec.state,n))})}}class Yu{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,r=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=r){let i=this.config.plugins[n];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let r=[e],n=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,u=i?i[o].state:this,d=l<r.length&&a.spec.appendTransaction.call(a,l?r.slice(l):r,u,n);if(d&&n.filterTransaction(d,o)){if(d.setMeta("appendedTransaction",e),!i){i=[];for(let h=0;h<this.config.plugins.length;h++)i.push(h<o?{state:n,n:r.length}:{state:this,n:0})}r.push(d),n=n.applyInner(d),s=!0}i&&(i[o]={state:n,n:r.length})}}if(!s)return{state:n,transactions:r}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let r=new Yu(this.config),n=this.config.fields;for(let i=0;i<n.length;i++){let s=n[i];r[s.name]=s.apply(e,this[s.name],this,r)}return r}get tr(){return new t0e(this)}static create(e){let r=new Hx(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new Yu(r);for(let i=0;i<r.fields.length;i++)n[r.fields[i].name]=r.fields[i].init(e,n);return n}reconfigure(e){let r=new Hx(this.schema,e.plugins),n=r.fields,i=new Yu(r);for(let s=0;s<n.length;s++){let o=n[s].name;i[o]=this.hasOwnProperty(o)?this[o]:n[s].init(e,i)}return i}toJSON(e){let r={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(r.storedMarks=this.storedMarks.map(n=>n.toJSON())),e&&typeof e=="object")for(let n in e){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[n],s=i.spec.state;s&&s.toJSON&&(r[n]=s.toJSON.call(i,this[i.key]))}return r}static fromJSON(e,r,n){if(!r)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Hx(e.schema,e.plugins),s=new Yu(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Wa.fromJSON(e.schema,r.doc);else if(o.name=="selection")s.selection=Je.fromJSON(s.doc,r.selection);else if(o.name=="storedMarks")r.storedMarks&&(s.storedMarks=r.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let a in n){let l=n[a],u=l.spec.state;if(l.key==o.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(r,a)){s[o.name]=u.fromJSON.call(l,e,r[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function yne(t,e,r){for(let n in t){let i=t[n];i instanceof Function?i=i.bind(e):n=="handleDOMEvents"&&(i=yne(i,e,{})),r[n]=i}return r}class Yt{constructor(e){this.spec=e,this.props={},e.props&&yne(e.props,this,this.props),this.key=e.key?e.key.key:vne("plugin")}getState(e){return e[this.key]}}const Kx=Object.create(null);function vne(t){return t in Kx?t+"$"+ ++Kx[t]:(Kx[t]=0,t+"$")}class Rr{constructor(e="key"){this.key=vne(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const UM=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function bne(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("backward",t):r.parentOffset>0)?null:r}const xne=(t,e,r)=>{let n=bne(t,r);if(!n)return!1;let i=HM(n);if(!i){let o=n.blockRange(),a=o&&gh(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(jne(t,i,e,-1))return!0;if(n.parent.content.size==0&&(Ud(s,"end")||Re.isSelectable(s)))for(let o=n.depth;;o--){let a=H0(t.doc,n.before(o),n.after(o),ve.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(Ud(s,"end")?Je.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):Re.create(l.doc,i.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||n.node(o-1).childCount>1)break}return s.isAtom&&i.depth==n.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},n0e=(t,e,r)=>{let n=bne(t,r);if(!n)return!1;let i=HM(n);return i?wne(t,i,e):!1},i0e=(t,e,r)=>{let n=_ne(t,r);if(!n)return!1;let i=KM(n);return i?wne(t,i,e):!1};function wne(t,e,r){let n=e.nodeBefore,i=n,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let d=i.lastChild;if(!d)return!1;i=d}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let d=a.firstChild;if(!d)return!1;a=d}let u=H0(t.doc,s,l,ve.empty);if(!u||u.from!=s||u instanceof Fr&&u.slice.size>=l-s)return!1;if(r){let d=t.tr.step(u);d.setSelection(ze.create(d.doc,s)),r(d.scrollIntoView())}return!0}function Ud(t,e,r=!1){for(let n=t;n;n=e=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(r&&n.childCount!=1)return!1}return!1}const Sne=(t,e,r)=>{let{$head:n,empty:i}=t.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("backward",t):n.parentOffset>0)return!1;s=HM(n)}let o=s&&s.nodeBefore;return!o||!Re.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Re.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function HM(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function _ne(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)?null:r}const Ene=(t,e,r)=>{let n=_ne(t,r);if(!n)return!1;let i=KM(n);if(!i)return!1;let s=i.nodeAfter;if(jne(t,i,e,1))return!0;if(n.parent.content.size==0&&(Ud(s,"start")||Re.isSelectable(s))){let o=H0(t.doc,n.before(),n.after(),ve.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Ud(s,"start")?Je.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):Re.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==n.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},Nne=(t,e,r)=>{let{$head:n,empty:i}=t.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)return!1;s=KM(n)}let o=s&&s.nodeAfter;return!o||!Re.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Re.create(t.doc,s.pos)).scrollIntoView()),!0)};function KM(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let r=t.node(e);if(t.index(e)+1<r.childCount)return t.doc.resolve(t.after(e+1));if(r.type.spec.isolating)break}return null}const s0e=(t,e)=>{let r=t.selection,n=r instanceof Re,i;if(n){if(r.node.isTextblock||!fl(t.doc,r.from))return!1;i=r.from}else if(i=U0(t.doc,r.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);n&&s.setSelection(Re.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},o0e=(t,e)=>{let r=t.selection,n;if(r instanceof Re){if(r.node.isTextblock||!fl(t.doc,r.to))return!1;n=r.to}else if(n=U0(t.doc,r.to,1),n==null)return!1;return e&&e(t.tr.join(n).scrollIntoView()),!0},a0e=(t,e)=>{let{$from:r,$to:n}=t.selection,i=r.blockRange(n),s=i&&gh(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},kne=(t,e)=>{let{$head:r,$anchor:n}=t.selection;return!r.parent.type.spec.code||!r.sameParent(n)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function GM(t){for(let e=0;e<t.edgeCount;e++){let{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}const l0e=(t,e)=>{let{$head:r,$anchor:n}=t.selection;if(!r.parent.type.spec.code||!r.sameParent(n))return!1;let i=r.node(-1),s=r.indexAfter(-1),o=GM(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=r.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(Je.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},Cne=(t,e)=>{let r=t.selection,{$from:n,$to:i}=r;if(r instanceof yi||n.parent.inlineContent||i.parent.inlineContent)return!1;let s=GM(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!n.parentOffset&&i.index()<i.parent.childCount?n:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(ze.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},Tne=(t,e)=>{let{$cursor:r}=t.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let s=r.before();if(xo(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let n=r.blockRange(),i=n&&gh(n);return i==null?!1:(e&&e(t.tr.lift(n,i).scrollIntoView()),!0)};function c0e(t){return(e,r)=>{let{$from:n,$to:i}=e.selection;if(e.selection instanceof Re&&e.selection.node.isBlock)return!n.parentOffset||!xo(e.doc,n.pos)?!1:(r&&r(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let s=[],o,a,l=!1,u=!1;for(let p=n.depth;;p--)if(n.node(p).isBlock){l=n.end(p)==n.pos+(n.depth-p),u=n.start(p)==n.pos-(n.depth-p),a=GM(n.node(p-1).contentMatchAt(n.indexAfter(p-1))),s.unshift(l&&a?{type:a}:null),o=p;break}else{if(p==1)return!1;s.unshift(null)}let d=e.tr;(e.selection instanceof ze||e.selection instanceof yi)&&d.deleteSelection();let h=d.mapping.map(n.pos),f=xo(d.doc,h,s.length,s);if(f||(s[0]=a?{type:a}:null,f=xo(d.doc,h,s.length,s)),!f)return!1;if(d.split(h,s.length,s),!l&&u&&n.node(o).type!=a){let p=d.mapping.map(n.before(o)),m=d.doc.resolve(p);a&&n.node(o-1).canReplaceWith(m.index(),m.index()+1,a)&&d.setNodeMarkup(d.mapping.map(n.before(o)),a)}return r&&r(d.scrollIntoView()),!0}}const u0e=c0e(),d0e=(t,e)=>{let{$from:r,to:n}=t.selection,i,s=r.sharedDepth(n);return s==0?!1:(i=r.before(s),e&&e(t.tr.setSelection(Re.create(t.doc,i))),!0)};function h0e(t,e,r){let n=e.nodeBefore,i=e.nodeAfter,s=e.index();return!n||!i||!n.type.compatibleContent(i.type)?!1:!n.content.size&&e.parent.canReplace(s-1,s)?(r&&r(t.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||fl(t.doc,e.pos))?!1:(r&&r(t.tr.join(e.pos).scrollIntoView()),!0)}function jne(t,e,r,n){let i=e.nodeBefore,s=e.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&h0e(t,e,r))return!0;let u=!l&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(r){let p=e.pos+s.nodeSize,m=X.empty;for(let y=o.length-1;y>=0;y--)m=X.from(o[y].create(null,m));m=X.from(i.copy(m));let g=t.tr.step(new Br(e.pos-1,p,e.pos,p,new ve(m,1,0),o.length,!0)),v=g.doc.resolve(p+2*o.length);v.nodeAfter&&v.nodeAfter.type==i.type&&fl(g.doc,v.pos)&&g.join(v.pos),r(g.scrollIntoView())}return!0}let d=s.type.spec.isolating||n>0&&l?null:Je.findFrom(e,1),h=d&&d.$from.blockRange(d.$to),f=h&&gh(h);if(f!=null&&f>=e.depth)return r&&r(t.tr.lift(h,f).scrollIntoView()),!0;if(u&&Ud(s,"start",!0)&&Ud(i,"end")){let p=i,m=[];for(;m.push(p),!p.isTextblock;)p=p.lastChild;let g=s,v=1;for(;!g.isTextblock;g=g.firstChild)v++;if(p.canReplace(p.childCount,p.childCount,g.content)){if(r){let y=X.empty;for(let w=m.length-1;w>=0;w--)y=X.from(m[w].copy(y));let b=t.tr.step(new Br(e.pos-m.length,e.pos+s.nodeSize,e.pos+v,e.pos+s.nodeSize-v,new ve(y,m.length,0),0,!0));r(b.scrollIntoView())}return!0}}return!1}function One(t){return function(e,r){let n=e.selection,i=t<0?n.$from:n.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(r&&r(e.tr.setSelection(ze.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const f0e=One(-1),p0e=One(1);function m0e(t,e=null){return function(r,n){let{$from:i,$to:s}=r.selection,o=i.blockRange(s),a=o&&VM(o,t,e);return a?(n&&n(r.tr.wrap(o,a).scrollIntoView()),!0):!1}}function q5(t,e=null){return function(r,n){let i=!1;for(let s=0;s<r.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=r.selection.ranges[s];r.doc.nodesBetween(o,a,(l,u)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let d=r.doc.resolve(u),h=d.index();i=d.parent.canReplaceWith(h,h+1,t)}})}if(!i)return!1;if(n){let s=r.tr;for(let o=0;o<r.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=r.selection.ranges[o];s.setBlockType(a,l,t,e)}n(s.scrollIntoView())}return!0}}function YM(...t){return function(e,r,n){for(let i=0;i<t.length;i++)if(t[i](e,r,n))return!0;return!1}}YM(UM,xne,Sne);YM(UM,Ene,Nne);YM(kne,Cne,Tne,u0e);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function g0e(t,e=null){return function(r,n){let{$from:i,$to:s}=r.selection,o=i.blockRange(s);if(!o)return!1;let a=n?r.tr:null;return y0e(a,o,t,e)?(n&&n(a.scrollIntoView()),!0):!1}}function y0e(t,e,r,n=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(r)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);s=new cv(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new cv(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=VM(s,r,n,e);return a?(t&&v0e(t,e,a,i,r),!0):!1}function v0e(t,e,r,n,i){let s=X.empty;for(let d=r.length-1;d>=0;d--)s=X.from(r[d].type.create(r[d].attrs,s));t.step(new Br(e.start-(n?2:0),e.end,e.start,e.end,new ve(s,0,0),r.length,!0));let o=0;for(let d=0;d<r.length;d++)r[d].type==i&&(o=d+1);let a=r.length-o,l=e.start+r.length-(n?2:0),u=e.parent;for(let d=e.startIndex,h=e.endIndex,f=!0;d<h;d++,f=!1)!f&&xo(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=u.child(d).nodeSize;return t}function b0e(t){return function(e,r){let{$from:n,$to:i}=e.selection,s=n.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?r?n.node(s.depth-1).type==t?x0e(e,r,t,s):w0e(e,r,s):!0:!1}}function x0e(t,e,r,n){let i=t.tr,s=n.end,o=n.$to.end(n.depth);s<o&&(i.step(new Br(s-1,o,s,o,new ve(X.from(r.create(null,n.parent.copy())),1,0),1,!0)),n=new cv(i.doc.resolve(n.$from.pos),i.doc.resolve(o),n.depth));const a=gh(n);if(a==null)return!1;i.lift(n,a);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return fl(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function w0e(t,e,r){let n=t.tr,i=r.parent;for(let p=r.end,m=r.endIndex-1,g=r.startIndex;m>g;m--)p-=i.child(m).nodeSize,n.delete(p-1,p+1);let s=n.doc.resolve(r.start),o=s.nodeAfter;if(n.mapping.map(r.end)!=r.start+s.nodeAfter.nodeSize)return!1;let a=r.startIndex==0,l=r.endIndex==i.childCount,u=s.node(-1),d=s.index(-1);if(!u.canReplace(d+(a?0:1),d+1,o.content.append(l?X.empty:X.from(i))))return!1;let h=s.pos,f=h+o.nodeSize;return n.step(new Br(h-(a?1:0),f+(l?1:0),h+1,f-1,new ve((a?X.empty:X.from(i.copy(X.empty))).append(l?X.empty:X.from(i.copy(X.empty))),a?0:1,l?0:1),a?0:1)),e(n.scrollIntoView()),!0}function S0e(t){return function(e,r){let{$from:n,$to:i}=e.selection,s=n.blockRange(i,u=>u.childCount>0&&u.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(r){let u=l.lastChild&&l.lastChild.type==a.type,d=X.from(u?t.create():null),h=new ve(X.from(t.create(null,X.from(a.type.create(null,d)))),u?3:1,0),f=s.start,p=s.end;r(e.tr.step(new Br(f-(u?3:1),p,f,p,h,1,!0)).scrollIntoView())}return!0}}const en=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Hd=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let kI=null;const oo=function(t,e,r){let n=kI||(kI=document.createRange());return n.setEnd(t,r??t.nodeValue.length),n.setStart(t,e||0),n},_0e=function(){kI=null},Mc=function(t,e,r,n){return r&&(L5(t,e,r,n,-1)||L5(t,e,r,n,1))},E0e=/^(img|br|input|textarea|hr)$/i;function L5(t,e,r,n,i){for(var s;;){if(t==r&&e==n)return!0;if(e==(i<0?0:Fi(t))){let o=t.parentNode;if(!o||o.nodeType!=1||hm(t)||E0e.test(t.nodeName)||t.contentEditable=="false")return!1;e=en(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?Fi(t):0}else return!1}}function Fi(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function N0e(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Fi(t)}else if(t.parentNode&&!hm(t))e=en(t),t=t.parentNode;else return null}}function k0e(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!hm(t))e=en(t)+1,t=t.parentNode;else return null}}function C0e(t,e,r){for(let n=e==0,i=e==Fi(t);n||i;){if(t==r)return!0;let s=en(t);if(t=t.parentNode,!t)return!1;n=n&&s==0,i=i&&s==Fi(t)}}function hm(t){let e;for(let r=t;r&&!(e=r.pmViewDesc);r=r.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const G0=function(t){return t.focusNode&&Mc(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Dl(t,e){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=t,r.key=r.code=e,r}function T0e(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function j0e(t,e,r){if(t.caretPositionFromPoint)try{let n=t.caretPositionFromPoint(e,r);if(n)return{node:n.offsetNode,offset:Math.min(Fi(n.offsetNode),n.offset)}}catch{}if(t.caretRangeFromPoint){let n=t.caretRangeFromPoint(e,r);if(n)return{node:n.startContainer,offset:Math.min(Fi(n.startContainer),n.startOffset)}}}const Bs=typeof navigator<"u"?navigator:null,B5=typeof document<"u"?document:null,pl=Bs&&Bs.userAgent||"",CI=/Edge\/(\d+)/.exec(pl),Pne=/MSIE \d/.exec(pl),TI=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(pl),ri=!!(Pne||TI||CI),Ha=Pne?document.documentMode:TI?+TI[1]:CI?+CI[1]:0,zi=!ri&&/gecko\/(\d+)/i.test(pl);zi&&+(/Firefox\/(\d+)/.exec(pl)||[0,0])[1];const jI=!ri&&/Chrome\/(\d+)/.exec(pl),qr=!!jI,Ine=jI?+jI[1]:0,yn=!ri&&!!Bs&&/Apple Computer/.test(Bs.vendor),Kd=yn&&(/Mobile\/\w+/.test(pl)||!!Bs&&Bs.maxTouchPoints>2),Ri=Kd||(Bs?/Mac/.test(Bs.platform):!1),Rne=Bs?/Win/.test(Bs.platform):!1,mo=/Android \d/.test(pl),fm=!!B5&&"webkitFontSmoothing"in B5.documentElement.style,O0e=fm?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function P0e(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Zs(t,e){return typeof t=="number"?t:t[e]}function I0e(t){let e=t.getBoundingClientRect(),r=e.width/t.offsetWidth||1,n=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*r,top:e.top,bottom:e.top+t.clientHeight*n}}function z5(t,e,r){let n=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=r||t.dom;o;){if(o.nodeType!=1){o=Hd(o);continue}let a=o,l=a==s.body,u=l?P0e(s):I0e(a),d=0,h=0;if(e.top<u.top+Zs(n,"top")?h=-(u.top-e.top+Zs(i,"top")):e.bottom>u.bottom-Zs(n,"bottom")&&(h=e.bottom-e.top>u.bottom-u.top?e.top+Zs(i,"top")-u.top:e.bottom-u.bottom+Zs(i,"bottom")),e.left<u.left+Zs(n,"left")?d=-(u.left-e.left+Zs(i,"left")):e.right>u.right-Zs(n,"right")&&(d=e.right-u.right+Zs(i,"right")),d||h)if(l)s.defaultView.scrollBy(d,h);else{let p=a.scrollLeft,m=a.scrollTop;h&&(a.scrollTop+=h),d&&(a.scrollLeft+=d);let g=a.scrollLeft-p,v=a.scrollTop-m;e={left:e.left-g,top:e.top-v,right:e.right-g,bottom:e.bottom-v}}let f=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(f))break;o=f=="absolute"?o.offsetParent:Hd(o)}}function R0e(t){let e=t.dom.getBoundingClientRect(),r=Math.max(0,e.top),n,i;for(let s=(e.left+e.right)/2,o=r+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=r-20){n=a,i=l.top;break}}return{refDOM:n,refTop:i,stack:Mne(t.dom)}}function Mne(t){let e=[],r=t.ownerDocument;for(let n=t;n&&(e.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),t!=r);n=Hd(n));return e}function M0e({refDOM:t,refTop:e,stack:r}){let n=t?t.getBoundingClientRect().top:0;Ane(r,n==0?0:n-e)}function Ane(t,e){for(let r=0;r<t.length;r++){let{dom:n,top:i,left:s}=t[r];n.scrollTop!=i+e&&(n.scrollTop=i+e),n.scrollLeft!=s&&(n.scrollLeft=s)}}let ku=null;function A0e(t){if(t.setActive)return t.setActive();if(ku)return t.focus(ku);let e=Mne(t);t.focus(ku==null?{get preventScroll(){return ku={preventScroll:!0},!0}}:void 0),ku||(ku=!1,Ane(e,0))}function Dne(t,e){let r,n=2e8,i,s=0,o=e.top,a=e.top,l,u;for(let d=t.firstChild,h=0;d;d=d.nextSibling,h++){let f;if(d.nodeType==1)f=d.getClientRects();else if(d.nodeType==3)f=oo(d).getClientRects();else continue;for(let p=0;p<f.length;p++){let m=f[p];if(m.top<=o&&m.bottom>=a){o=Math.max(m.bottom,o),a=Math.min(m.top,a);let g=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(g<n){r=d,n=g,i=g&&r.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,d.nodeType==1&&g&&(s=h+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!l&&m.left<=e.left&&m.right>=e.left&&(l=d,u={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!r&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(s=h+1)}}return!r&&l&&(r=l,i=u,n=0),r&&r.nodeType==3?D0e(r,i):!r||n&&r.nodeType==1?{node:t,offset:s}:Dne(r,i)}function D0e(t,e){let r=t.nodeValue.length,n=document.createRange(),i;for(let s=0;s<r;s++){n.setEnd(t,s+1),n.setStart(t,s);let o=na(n,1);if(o.top!=o.bottom&&QM(e,o)){i={node:t,offset:s+(e.left>=(o.left+o.right)/2?1:0)};break}}return n.detach(),i||{node:t,offset:0}}function QM(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function $0e(t,e){let r=t.parentNode;return r&&/^li$/i.test(r.nodeName)&&e.left<t.getBoundingClientRect().left?r:t}function F0e(t,e,r){let{node:n,offset:i}=Dne(e,r),s=-1;if(n.nodeType==1&&!n.firstChild){let o=n.getBoundingClientRect();s=o.left!=o.right&&r.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(n,i,s)}function q0e(t,e,r,n){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>n.left||l.top>n.top?i=a.posBefore:(!o&&l.right<n.left||l.bottom<n.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?n.top<(l.top+l.bottom)/2:n.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,r,-1)}function $ne(t,e,r){let n=t.childNodes.length;if(n&&r.top<r.bottom)for(let i=Math.max(0,Math.min(n-1,Math.floor(n*(e.top-r.top)/(r.bottom-r.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let u=a[l];if(QM(e,u))return $ne(o,e,u)}}if((s=(s+1)%n)==i)break}return t}function L0e(t,e){let r=t.dom.ownerDocument,n,i=0,s=j0e(r,e.left,e.top);s&&({node:n,offset:i}=s);let o=(t.root.elementFromPoint?t.root:r).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let u=t.dom.getBoundingClientRect();if(!QM(e,u)||(o=$ne(t.dom,e,u),!o))return null}if(yn)for(let u=o;n&&u;u=Hd(u))u.draggable&&(n=void 0);if(o=$0e(o,e),n){if(zi&&n.nodeType==1&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){let d=n.childNodes[i],h;d.nodeName=="IMG"&&(h=d.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&i++}let u;fm&&i&&n.nodeType==1&&(u=n.childNodes[i-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&i--,n==t.dom&&i==n.childNodes.length-1&&n.lastChild.nodeType==1&&e.top>n.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||n.nodeType!=1||n.childNodes[i-1].nodeName!="BR")&&(a=q0e(t,n,i,e))}a==null&&(a=F0e(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function V5(t){return t.top<t.bottom||t.left<t.right}function na(t,e){let r=t.getClientRects();if(r.length){let n=r[e<0?0:r.length-1];if(V5(n))return n}return Array.prototype.find.call(r,V5)||t.getBoundingClientRect()}const B0e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Fne(t,e,r){let{node:n,offset:i,atom:s}=t.docView.domFromPos(e,r<0?-1:1),o=fm||zi;if(n.nodeType==3)if(o&&(B0e.test(n.nodeValue)||(r<0?!i:i==n.nodeValue.length))){let l=na(oo(n,i,i),r);if(zi&&i&&/\s/.test(n.nodeValue[i-1])&&i<n.nodeValue.length){let u=na(oo(n,i-1,i-1),-1);if(u.top==l.top){let d=na(oo(n,i,i+1),-1);if(d.top!=l.top)return lf(d,d.left<u.left)}}return l}else{let l=i,u=i,d=r<0?1:-1;return r<0&&!i?(u++,d=-1):r>=0&&i==n.nodeValue.length?(l--,d=1):r<0?l--:u++,lf(na(oo(n,l,u),d),d<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(r<0||i==Fi(n))){let l=n.childNodes[i-1];if(l.nodeType==1)return Gx(l.getBoundingClientRect(),!1)}if(s==null&&i<Fi(n)){let l=n.childNodes[i];if(l.nodeType==1)return Gx(l.getBoundingClientRect(),!0)}return Gx(n.getBoundingClientRect(),r>=0)}if(s==null&&i&&(r<0||i==Fi(n))){let l=n.childNodes[i-1],u=l.nodeType==3?oo(l,Fi(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(u)return lf(na(u,1),!1)}if(s==null&&i<Fi(n)){let l=n.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let u=l?l.nodeType==3?oo(l,0,o?0:1):l.nodeType==1?l:null:null;if(u)return lf(na(u,-1),!0)}return lf(na(n.nodeType==3?oo(n):n,-r),r>=0)}function lf(t,e){if(t.width==0)return t;let r=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:r,right:r}}function Gx(t,e){if(t.height==0)return t;let r=e?t.top:t.bottom;return{top:r,bottom:r,left:t.left,right:t.right}}function qne(t,e,r){let n=t.state,i=t.root.activeElement;n!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return r()}finally{n!=e&&t.updateState(n),i!=t.dom&&i&&i.focus()}}function z0e(t,e,r){let n=e.selection,i=r=="up"?n.$from:n.$to;return qne(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,r=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=Fne(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=oo(a,0,a.nodeValue.length).getClientRects();else continue;for(let u=0;u<l.length;u++){let d=l[u];if(d.bottom>d.top+1&&(r=="up"?o.top-d.top>(d.bottom-o.top)*2:d.bottom-o.bottom>(o.bottom-d.top)*2))return!1}}return!0})}const V0e=/[\u0590-\u08ac]/;function W0e(t,e,r){let{$head:n}=e.selection;if(!n.parent.isTextblock)return!1;let i=n.parentOffset,s=!i,o=i==n.parent.content.size,a=t.domSelection();return a?!V0e.test(n.parent.textContent)||!a.modify?r=="left"||r=="backward"?s:o:qne(t,e,()=>{let{focusNode:l,focusOffset:u,anchorNode:d,anchorOffset:h}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",r,"character");let p=n.depth?t.docView.domAfterPos(n.before()):t.dom,{focusNode:m,focusOffset:g}=t.domSelectionRange(),v=m&&!p.contains(m.nodeType==1?m:m.parentNode)||l==m&&u==g;try{a.collapse(d,h),l&&(l!=d||u!=h)&&a.extend&&a.extend(l,u)}catch{}return f!=null&&(a.caretBidiLevel=f),v}):n.pos==n.start()||n.pos==n.end()}let W5=null,U5=null,H5=!1;function U0e(t,e,r){return W5==e&&U5==r?H5:(W5=e,U5=r,H5=r=="up"||r=="down"?z0e(t,e,r):W0e(t,e,r))}const Vi=0,K5=1,Vl=2,zs=3;class pm{constructor(e,r,n,i){this.parent=e,this.children=r,this.dom=n,this.contentDOM=i,this.dirty=Vi,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,r,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let r=0;r<this.children.length;r++)e+=this.children[r].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let r=0,n=this.posAtStart;;r++){let i=this.children[r];if(i==e)return n;n+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,r,n){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(n<0){let s,o;if(e==this.contentDOM)s=e.childNodes[r-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[r];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=r>en(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(r==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&r==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??n>0?this.posAtEnd:this.posAtStart}nearestDesc(e,r=!1){for(let n=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!r||s.node))if(n&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))n=!1;else return s}}getDesc(e){let r=e.pmViewDesc;for(let n=r;n;n=n.parent)if(n==this)return r}posFromDOM(e,r,n){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,r,n)}return-1}descAt(e){for(let r=0,n=0;r<this.children.length;r++){let i=this.children[r],s=n+i.size;if(n==e&&s!=n){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(e<s)return i.descAt(e-n-i.border);n=s}}domFromPos(e,r){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,i=0;for(let s=0;n<this.children.length;n++){let o=this.children[n],a=s+o.size;if(a>e||o instanceof Bne){i=e-s;break}s=a}if(i)return this.children[n].domFromPos(i-this.children[n].border,r);for(let s;n&&!(s=this.children[n-1]).size&&s instanceof Lne&&s.side>=0;n--);if(r<=0){let s,o=!0;for(;s=n?this.children[n-1]:null,!(!s||s.dom.parentNode==this.contentDOM);n--,o=!1);return s&&r&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,r):{node:this.contentDOM,offset:s?en(s.dom)+1:0}}else{let s,o=!0;for(;s=n<this.children.length?this.children[n]:null,!(!s||s.dom.parentNode==this.contentDOM);n++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,r):{node:this.contentDOM,offset:s?en(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,r,n=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:r,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=n,a=0;;a++){let l=this.children[a],u=o+l.size;if(i==-1&&e<=u){let d=o+l.border;if(e>=d&&r<=u-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,r,d);e=o;for(let h=a;h>0;h--){let f=this.children[h-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=en(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(u>r||a==this.children.length-1)){r=u;for(let d=a+1;d<this.children.length;d++){let h=this.children[d];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){s=en(h.dom);break}r+=h.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=u}return{node:this.contentDOM,from:e,to:r,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let r=this.children[e<0?0:this.children.length-1];return r.size==0||r.emptyChildAt(e)}domAfterPos(e){let{node:r,offset:n}=this.domFromPos(e,0);if(r.nodeType!=1||n==r.childNodes.length)throw new RangeError("No node after pos "+e);return r.childNodes[n]}setSelection(e,r,n,i=!1){let s=Math.min(e,r),o=Math.max(e,r);for(let p=0,m=0;p<this.children.length;p++){let g=this.children[p],v=m+g.size;if(s>m&&o<v)return g.setSelection(e-m-g.border,r-m-g.border,n,i);m=v}let a=this.domFromPos(e,e?-1:1),l=r==e?a:this.domFromPos(r,r?-1:1),u=n.root.getSelection(),d=n.domSelectionRange(),h=!1;if((zi||yn)&&e==r){let{node:p,offset:m}=a;if(p.nodeType==3){if(h=!!(m&&p.nodeValue[m-1]==`
`),h&&m==p.nodeValue.length)for(let g=p,v;g;g=g.parentNode){if(v=g.nextSibling){v.nodeName=="BR"&&(a=l={node:v.parentNode,offset:en(v)+1});break}let y=g.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let g=p.childNodes[m-1];h=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(zi&&d.focusNode&&d.focusNode!=l.node&&d.focusNode.nodeType==1){let p=d.focusNode.childNodes[d.focusOffset];p&&p.contentEditable=="false"&&(i=!0)}if(!(i||h&&yn)&&Mc(a.node,a.offset,d.anchorNode,d.anchorOffset)&&Mc(l.node,l.offset,d.focusNode,d.focusOffset))return;let f=!1;if((u.extend||e==r)&&!(h&&zi)){u.collapse(a.node,a.offset);try{e!=r&&u.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>r){let m=a;a=l,l=m}let p=document.createRange();p.setEnd(l.node,l.offset),p.setStart(a.node,a.offset),u.removeAllRanges(),u.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,r){for(let n=0,i=0;i<this.children.length;i++){let s=this.children[i],o=n+s.size;if(n==o?e<=o&&r>=n:e<o&&r>n){let a=n+s.border,l=o-s.border;if(e>=a&&r<=l){this.dirty=e==n||r==o?Vl:K5,e==a&&r==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=zs:s.markDirty(e-a,r-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Vl:zs}n=o}this.dirty=Vl}markParentsDirty(){let e=1;for(let r=this.parent;r;r=r.parent,e++){let n=e==1?Vl:K5;r.dirty<n&&(r.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class Lne extends pm{constructor(e,r,n,i){let s,o=r.type.toDOM;if(typeof o=="function"&&(o=o(n,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!r.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=r,this.widget=r,s=this}matchesWidget(e){return this.dirty==Vi&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let r=this.widget.spec.stopEvent;return r?r(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class H0e extends pm{constructor(e,r,n,i){super(e,[],r,null),this.textDOM=n,this.text=i}get size(){return this.text.length}localPosFromDOM(e,r){return e!=this.textDOM?this.posAtStart+(r?this.size:0):this.posAtStart+r}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Ac extends pm{constructor(e,r,n,i,s){super(e,[],n,i),this.mark=r,this.spec=s}static create(e,r,n,i){let s=i.nodeViews[r.type.name],o=s&&s(r,i,n);return(!o||!o.dom)&&(o=Yc.renderSpec(document,r.type.spec.toDOM(r,n),null,r.attrs)),new Ac(e,r,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&zs||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=zs&&this.mark.eq(e)}markDirty(e,r){if(super.markDirty(e,r),this.dirty!=Vi){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=Vi}}slice(e,r,n){let i=Ac.create(this.parent,this.mark,!0,n),s=this.children,o=this.size;r<o&&(s=PI(s,r,o,n)),e>0&&(s=PI(s,0,e,n));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Ka extends pm{constructor(e,r,n,i,s,o,a,l,u){super(e,[],s,o),this.node=r,this.outerDeco=n,this.innerDeco=i,this.nodeDOM=a}static create(e,r,n,i,s,o){let a=s.nodeViews[r.type.name],l,u=a&&a(r,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},n,i),d=u&&u.dom,h=u&&u.contentDOM;if(r.isText){if(!d)d=document.createTextNode(r.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:h}=Yc.renderSpec(document,r.type.spec.toDOM(r),null,r.attrs));!h&&!r.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),r.type.spec.draggable&&(d.draggable=!0));let f=d;return d=Wne(d,n,r),u?l=new K0e(e,r,n,i,d,h||null,f,u,s,o+1):r.isText?new Y0(e,r,n,i,d,f,s):new Ka(e,r,n,i,d,h||null,f,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let r=this.children.length-1;r>=0;r--){let n=this.children[r];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>X.empty)}return e}matchesNode(e,r,n){return this.dirty==Vi&&e.eq(this.node)&&dv(r,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,r){let n=this.node.inlineContent,i=r,s=e.composing?this.localCompositionInfo(e,r):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new Y0e(this,o&&o.node,e);J0e(this.node,this.innerDeco,(u,d,h)=>{u.spec.marks?l.syncToMarks(u.spec.marks,n,e):u.type.side>=0&&!h&&l.syncToMarks(d==this.node.childCount?Nt.none:this.node.child(d).marks,n,e),l.placeWidget(u,e,i)},(u,d,h,f)=>{l.syncToMarks(u.marks,n,e);let p;l.findNodeMatch(u,d,h,f)||a&&e.state.selection.from>i&&e.state.selection.to<i+u.nodeSize&&(p=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(u,d,h,p,e)||l.updateNextNode(u,d,h,e,f,i)||l.addNode(u,d,h,e,i),i+=u.nodeSize}),l.syncToMarks([],n,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Vl)&&(o&&this.protectLocalComposition(e,o),zne(this.contentDOM,this.children,e),Kd&&Z0e(this.dom))}localCompositionInfo(e,r){let{from:n,to:i}=e.state.selection;if(!(e.state.selection instanceof ze)||n<r||i>r+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=ebe(this.node.content,o,n-r,i-r);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:r,pos:n,text:i}){if(this.getDesc(r))return;let s=r;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new H0e(this,s,r,i);e.input.compositionNodes.push(o),this.children=PI(this.children,n,n+i.length,e,o)}update(e,r,n,i){return this.dirty==zs||!e.sameMarkup(this.node)?!1:(this.updateInner(e,r,n,i),!0)}updateInner(e,r,n,i){this.updateOuterDeco(r),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Vi}updateOuterDeco(e){if(dv(e,this.outerDeco))return;let r=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=Vne(this.dom,this.nodeDOM,OI(this.outerDeco,this.node,r),OI(e,this.node,r)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function G5(t,e,r,n,i){Wne(n,e,t);let s=new Ka(void 0,t,e,r,n,n,n,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Y0 extends Ka{constructor(e,r,n,i,s,o,a){super(e,r,n,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,r,n,i){return this.dirty==zs||this.dirty!=Vi&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(r),(this.dirty!=Vi||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Vi,!0)}inParent(){let e=this.parent.contentDOM;for(let r=this.nodeDOM;r;r=r.parentNode)if(r==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,r,n){return e==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):super.localPosFromDOM(e,r,n)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,r,n){let i=this.node.cut(e,r),s=document.createTextNode(i.text);return new Y0(this.parent,i,this.outerDeco,this.innerDeco,s,s,n)}markDirty(e,r){super.markDirty(e,r),this.dom!=this.nodeDOM&&(e==0||r==this.nodeDOM.nodeValue.length)&&(this.dirty=zs)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Bne extends pm{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Vi&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class K0e extends Ka{constructor(e,r,n,i,s,o,a,l,u,d){super(e,r,n,i,s,o,a,u,d),this.spec=l}update(e,r,n,i){if(this.dirty==zs)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,r,n);return s&&this.updateInner(e,r,n,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,r,n,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,r,n,i){this.spec.setSelection?this.spec.setSelection(e,r,n.root):super.setSelection(e,r,n,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function zne(t,e,r){let n=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=n;)n=Y5(n),i=!0;n=n.nextSibling}else i=!0,t.insertBefore(a,n);if(o instanceof Ac){let l=n?n.previousSibling:t.lastChild;zne(o.contentDOM,o.children,r),n=l?l.nextSibling:t.firstChild}}for(;n;)n=Y5(n),i=!0;i&&r.trackWrites==t&&(r.trackWrites=null)}const $f=function(t){t&&(this.nodeName=t)};$f.prototype=Object.create(null);const Wl=[new $f];function OI(t,e,r){if(t.length==0)return Wl;let n=r?Wl[0]:new $f,i=[n];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(n=new $f(o.nodeName));for(let a in o){let l=o[a];l!=null&&(r&&i.length==1&&i.push(n=new $f(e.isInline?"span":"div")),a=="class"?n.class=(n.class?n.class+" ":"")+l:a=="style"?n.style=(n.style?n.style+";":"")+l:a!="nodeName"&&(n[a]=l))}}}return i}function Vne(t,e,r,n){if(r==Wl&&n==Wl)return e;let i=e;for(let s=0;s<n.length;s++){let o=n[s],a=r[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=Wl[0]),i=l}G0e(i,a||Wl[0],o)}return i}function G0e(t,e,r){for(let n in e)n!="class"&&n!="style"&&n!="nodeName"&&!(n in r)&&t.removeAttribute(n);for(let n in r)n!="class"&&n!="style"&&n!="nodeName"&&r[n]!=e[n]&&t.setAttribute(n,r[n]);if(e.class!=r.class){let n=e.class?e.class.split(" ").filter(Boolean):[],i=r.class?r.class.split(" ").filter(Boolean):[];for(let s=0;s<n.length;s++)i.indexOf(n[s])==-1&&t.classList.remove(n[s]);for(let s=0;s<i.length;s++)n.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=r.style){if(e.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=n.exec(e.style);)t.style.removeProperty(i[1])}r.style&&(t.style.cssText+=r.style)}}function Wne(t,e,r){return Vne(t,t,Wl,OI(e,r,t.nodeType!=1))}function dv(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].type.eq(e[r].type))return!1;return!0}function Y5(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Y0e{constructor(e,r,n){this.lock=r,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=Q0e(e.node.content,e)}destroyBetween(e,r){if(e!=r){for(let n=e;n<r;n++)this.top.children[n].destroy();this.top.children.splice(e,r-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,r,n){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Vi,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let u=this.top.children[l];if(u.matchesMark(e[s])&&!this.isLocked(u.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Ac.create(this.top,e[s],r,n);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,r,n,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,r,n))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let u=this.top.children[a];if(u.matchesNode(e,r,n)&&!this.preMatch.matched.has(u)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,r,n,i,s){let o=this.top.children[i];return o.dirty==zs&&o.dom==o.contentDOM&&(o.dirty=Vl),o.update(e,r,n,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let r=e.parentNode;if(!r)return-1;if(r==this.top.contentDOM){let n=e.pmViewDesc;if(n){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==n)return i}return-1}e=r}}updateNextNode(e,r,n,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Ka){let u=this.preMatch.matched.get(l);if(u!=null&&u!=s)return!1;let d=l.dom,h,f=this.isLocked(d)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=zs&&dv(r,l.outerDeco));if(!f&&l.update(e,r,n,i))return this.destroyBetween(this.index,a),l.dom!=d&&(this.changed=!0),this.index++,!0;if(!f&&(h=this.recreateWrapper(l,e,r,n,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=h,h.contentDOM&&(h.dirty=Vl,h.updateChildren(i,o+1),h.dirty=Vi),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,r,n,i,s,o){if(e.dirty||r.isAtom||!e.children.length||!e.node.content.eq(r.content)||!dv(n,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=Ka.create(this.top,r,n,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,r,n,i,s){let o=Ka.create(this.top,e,r,n,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,r,n){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new Lne(this.top,e,r,n);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],r=this.top;for(;e instanceof Ac;)r=e,e=r.children[r.children.length-1];(!e||!(e instanceof Y0)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((yn||qr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",r),this.addHackNode("BR",this.top))}addHackNode(e,r){if(r==this.top&&this.index<r.children.length&&r.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);e=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),e=="BR"&&(n.className="ProseMirror-trailingBreak");let i=new Bne(this.top,[],n,null);r!=this.top?r.children.push(i):r.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function Q0e(t,e){let r=e,n=r.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(n){let u=r.children[n-1];if(u instanceof Ac)r=u,n=u.children.length;else{a=u,n--;break}}else{if(r==e)break e;n=r.parent.children.indexOf(r),r=r.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function X0e(t,e){return t.type.side-e.type.side}function J0e(t,e,r,n){let i=e.locals(t),s=0;if(i.length==0){for(let u=0;u<t.childCount;u++){let d=t.child(u);n(d,i,e.forChild(s,d),u),s+=d.nodeSize}return}let o=0,a=[],l=null;for(let u=0;;){let d,h;for(;o<i.length&&i[o].to==s;){let v=i[o++];v.widget&&(d?(h||(h=[d])).push(v):d=v)}if(d)if(h){h.sort(X0e);for(let v=0;v<h.length;v++)r(h[v],u,!!l)}else r(d,u,!!l);let f,p;if(l)p=-1,f=l,l=null;else if(u<t.childCount)p=u,f=t.child(u++);else break;for(let v=0;v<a.length;v++)a[v].to<=s&&a.splice(v--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let m=s+f.nodeSize;if(f.isText){let v=m;o<i.length&&i[o].from<v&&(v=i[o].from);for(let y=0;y<a.length;y++)a[y].to<v&&(v=a[y].to);v<m&&(l=f.cut(v-s),f=f.cut(0,v-s),m=v,p=-1)}else for(;o<i.length&&i[o].to<m;)o++;let g=f.isInline&&!f.isLeaf?a.filter(v=>!v.inline):a.slice();n(f,g,e.forChild(s,f),p),s=m}}function Z0e(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function ebe(t,e,r,n){for(let i=0,s=0;i<t.childCount&&s<=n;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let u=t.child(i++);if(s+=u.nodeSize,!u.isText)break;l+=u.text}if(s>=r){if(s>=n&&l.slice(n-e.length-a,n-a)==e)return n-e.length;let u=a<n?l.lastIndexOf(e,n-a-1):-1;if(u>=0&&u+e.length+a>=r)return a+u;if(r==n&&l.length>=n+e.length-a&&l.slice(n-a,n-a+e.length)==e)return n}}return-1}function PI(t,e,r,n,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],u=a,d=a+=l.size;u>=r||d<=e?s.push(l):(u<e&&s.push(l.slice(0,e-u,n)),i&&(s.push(i),i=void 0),d>r&&s.push(l.slice(r-u,l.size,n)))}return s}function XM(t,e=null){let r=t.domSelectionRange(),n=t.state.doc;if(!r.focusNode)return null;let i=t.docView.nearestDesc(r.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(o<0)return null;let a=n.resolve(o),l,u;if(G0(r)){for(l=o;i&&!i.node;)i=i.parent;let h=i.node;if(i&&h.isAtom&&Re.isSelectable(h)&&i.parent&&!(h.isInline&&C0e(r.focusNode,r.focusOffset,i.dom))){let f=i.posBefore;u=new Re(o==f?a:n.resolve(f))}}else{if(r instanceof t.dom.ownerDocument.defaultView.Selection&&r.rangeCount>1){let h=o,f=o;for(let p=0;p<r.rangeCount;p++){let m=r.getRangeAt(p);h=Math.min(h,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(h<0)return null;[l,o]=f==t.state.selection.anchor?[f,h]:[h,f],a=n.resolve(o)}else l=t.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(l<0)return null}let d=n.resolve(l);if(!u){let h=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;u=JM(t,d,a,h)}return u}function Une(t){return t.editable?t.hasFocus():Kne(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function wo(t,e=!1){let r=t.state.selection;if(Hne(t,r),!!Une(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&qr){let n=t.domSelectionRange(),i=t.domObserver.currentSelection;if(n.anchorNode&&i.anchorNode&&Mc(n.anchorNode,n.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)rbe(t);else{let{anchor:n,head:i}=r,s,o;Q5&&!(r instanceof ze)&&(r.$from.parent.inlineContent||(s=X5(t,r.from)),!r.empty&&!r.$from.parent.inlineContent&&(o=X5(t,r.to))),t.docView.setSelection(n,i,t,e),Q5&&(s&&J5(s),o&&J5(o)),r.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&tbe(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const Q5=yn||qr&&Ine<63;function X5(t,e){let{node:r,offset:n}=t.docView.domFromPos(e,0),i=n<r.childNodes.length?r.childNodes[n]:null,s=n?r.childNodes[n-1]:null;if(yn&&i&&i.contentEditable=="false")return Yx(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return Yx(i);if(s)return Yx(s)}}function Yx(t){return t.contentEditable="true",yn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function J5(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function tbe(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let r=t.domSelectionRange(),n=r.anchorNode,i=r.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(r.anchorNode!=n||r.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!Une(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function rbe(t){let e=t.domSelection();if(!e)return;let r=t.cursorWrapper.dom,n=r.nodeName=="IMG";n?e.collapse(r.parentNode,en(r)+1):e.collapse(r,0),!n&&!t.state.selection.visible&&ri&&Ha<=11&&(r.disabled=!0,r.disabled=!1)}function Hne(t,e){if(e instanceof Re){let r=t.docView.descAt(e.from);r!=t.lastSelectedViewDesc&&(Z5(t),r&&r.selectNode(),t.lastSelectedViewDesc=r)}else Z5(t)}function Z5(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function JM(t,e,r,n){return t.someProp("createSelectionBetween",i=>i(t,e,r))||ze.between(e,r,n)}function eF(t){return t.editable&&!t.hasFocus()?!1:Kne(t)}function Kne(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function nbe(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),r=t.domSelectionRange();return Mc(e.node,e.offset,r.anchorNode,r.anchorOffset)}function II(t,e){let{$anchor:r,$head:n}=t.selection,i=e>0?r.max(n):r.min(n),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&Je.findFrom(s,e)}function aa(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function tF(t,e,r){let n=t.state.selection;if(n instanceof ze)if(r.indexOf("s")>-1){let{$head:i}=n,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return aa(t,new ze(n.$anchor,o))}else if(n.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=II(t.state,e);return i&&i instanceof Re?aa(t,i):!1}else if(!(Ri&&r.indexOf("m")>-1)){let i=n.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?Re.isSelectable(s)?aa(t,new Re(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):fm?aa(t,new ze(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(n instanceof Re&&n.node.isInline)return aa(t,new ze(e>0?n.$to:n.$from));{let i=II(t.state,e);return i?aa(t,i):!1}}}function hv(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Ff(t,e){let r=t.pmViewDesc;return r&&r.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Cu(t,e){return e<0?ibe(t):sbe(t)}function ibe(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let i,s,o=!1;for(zi&&r.nodeType==1&&n<hv(r)&&Ff(r.childNodes[n],-1)&&(o=!0);;)if(n>0){if(r.nodeType!=1)break;{let a=r.childNodes[n-1];if(Ff(a,-1))i=r,s=--n;else if(a.nodeType==3)r=a,n=r.nodeValue.length;else break}}else{if(Gne(r))break;{let a=r.previousSibling;for(;a&&Ff(a,-1);)i=r.parentNode,s=en(a),a=a.previousSibling;if(a)r=a,n=hv(r);else{if(r=r.parentNode,r==t.dom)break;n=0}}}o?RI(t,r,n):i&&RI(t,i,s)}function sbe(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let i=hv(r),s,o;for(;;)if(n<i){if(r.nodeType!=1)break;let a=r.childNodes[n];if(Ff(a,1))s=r,o=++n;else break}else{if(Gne(r))break;{let a=r.nextSibling;for(;a&&Ff(a,1);)s=a.parentNode,o=en(a)+1,a=a.nextSibling;if(a)r=a,n=0,i=hv(r);else{if(r=r.parentNode,r==t.dom)break;n=i=0}}}s&&RI(t,s,o)}function Gne(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function obe(t,e){for(;t&&e==t.childNodes.length&&!hm(t);)e=en(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let r=t.childNodes[e];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=0}}function abe(t,e){for(;t&&!e&&!hm(t);)e=en(t),t=t.parentNode;for(;t&&e;){let r=t.childNodes[e-1];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=t.childNodes.length}}function RI(t,e,r){if(e.nodeType!=3){let s,o;(o=obe(e,r))?(e=o,r=0):(s=abe(e,r))&&(e=s,r=s.nodeValue.length)}let n=t.domSelection();if(!n)return;if(G0(n)){let s=document.createRange();s.setEnd(e,r),s.setStart(e,r),n.removeAllRanges(),n.addRange(s)}else n.extend&&n.extend(e,r);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&wo(t)},50)}function rF(t,e){let r=t.state.doc.resolve(e);if(!(qr||Rne)&&r.parent.inlineContent){let i=t.coordsAtPos(e);if(e>r.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<r.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function nF(t,e,r){let n=t.state.selection;if(n instanceof ze&&!n.empty||r.indexOf("s")>-1||Ri&&r.indexOf("m")>-1)return!1;let{$from:i,$to:s}=n;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=II(t.state,e);if(o&&o instanceof Re)return aa(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=n instanceof yi?Je.near(o,e):Je.findFrom(o,e);return a?aa(t,a):!1}return!1}function iF(t,e){if(!(t.state.selection instanceof ze))return!0;let{$head:r,$anchor:n,empty:i}=t.state.selection;if(!r.sameParent(n))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!r.textOffset&&(e<0?r.nodeBefore:r.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(r.pos-s.nodeSize,r.pos):o.delete(r.pos,r.pos+s.nodeSize),t.dispatch(o),!0}return!1}function sF(t,e,r){t.domObserver.stop(),e.contentEditable=r,t.domObserver.start()}function lbe(t){if(!yn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(e&&e.nodeType==1&&r==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let n=e.firstChild;sF(t,n,"true"),setTimeout(()=>sF(t,n,"false"),20)}return!1}function cbe(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function ube(t,e){let r=e.keyCode,n=cbe(e);if(r==8||Ri&&r==72&&n=="c")return iF(t,-1)||Cu(t,-1);if(r==46&&!e.shiftKey||Ri&&r==68&&n=="c")return iF(t,1)||Cu(t,1);if(r==13||r==27)return!0;if(r==37||Ri&&r==66&&n=="c"){let i=r==37?rF(t,t.state.selection.from)=="ltr"?-1:1:-1;return tF(t,i,n)||Cu(t,i)}else if(r==39||Ri&&r==70&&n=="c"){let i=r==39?rF(t,t.state.selection.from)=="ltr"?1:-1:1;return tF(t,i,n)||Cu(t,i)}else{if(r==38||Ri&&r==80&&n=="c")return nF(t,-1,n)||Cu(t,-1);if(r==40||Ri&&r==78&&n=="c")return lbe(t)||nF(t,1,n)||Cu(t,1);if(n==(Ri?"m":"c")&&(r==66||r==73||r==89||r==90))return!0}return!1}function ZM(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let r=[],{content:n,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&n.childCount==1&&n.firstChild.childCount==1;){i--,s--;let p=n.firstChild;r.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),n=p.content}let o=t.someProp("clipboardSerializer")||Yc.fromSchema(t.state.schema),a=eie(),l=a.createElement("div");l.appendChild(o.serializeFragment(n,{document:a}));let u=l.firstChild,d,h=0;for(;u&&u.nodeType==1&&(d=Zne[u.nodeName.toLowerCase()]);){for(let p=d.length-1;p>=0;p--){let m=a.createElement(d[p]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),h++}u=l.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${s}${h?` -${h}`:""} ${JSON.stringify(r)}`);let f=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f,slice:e}}function Yne(t,e,r,n,i){let s=i.parent.type.spec.code,o,a;if(!r&&!e)return null;let l=!!e&&(n||s||!r);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,s||n,t)}),s)return a=new ve(X.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",f=>{a=f(a,t,!0)}),a;let h=t.someProp("clipboardTextParser",f=>f(e,i,n,t));if(h)a=h;else{let f=i.marks(),{schema:p}=t.state,m=Yc.fromSchema(p);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let v=o.appendChild(document.createElement("p"));g&&v.appendChild(m.serializeNode(p.text(g,f)))})}}else t.someProp("transformPastedHTML",h=>{r=h(r,t)}),o=pbe(r),fm&&mbe(o);let u=o&&o.querySelector("[data-pm-slice]"),d=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let h=+d[3];h>0;h--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Ua.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||d),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!dbe.test(f.parentNode.nodeName)?{ignore:!0}:null}})),d)a=gbe(oF(a,+d[1],+d[2]),d[4]);else if(a=ve.maxOpen(hbe(a.content,i),!0),a.openStart||a.openEnd){let h=0,f=0;for(let p=a.content.firstChild;h<a.openStart&&!p.type.spec.isolating;h++,p=p.firstChild);for(let p=a.content.lastChild;f<a.openEnd&&!p.type.spec.isolating;f++,p=p.lastChild);a=oF(a,h,f)}return t.someProp("transformPasted",h=>{a=h(a,t,l)}),a}const dbe=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function hbe(t,e){if(t.childCount<2)return t;for(let r=e.depth;r>=0;r--){let i=e.node(r).contentMatchAt(e.index(r)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),u;if(!l)return o=null;if(u=o.length&&s.length&&Xne(l,s,a,o[o.length-1],0))o[o.length-1]=u;else{o.length&&(o[o.length-1]=Jne(o[o.length-1],s.length));let d=Qne(a,l);o.push(d),i=i.matchType(d.type),s=l}}),o)return X.from(o)}return t}function Qne(t,e,r=0){for(let n=e.length-1;n>=r;n--)t=e[n].create(null,X.from(t));return t}function Xne(t,e,r,n,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=Xne(t,e,r,n.lastChild,i+1);if(s)return n.copy(n.content.replaceChild(n.childCount-1,s));if(n.contentMatchAt(n.childCount).matchType(i==t.length-1?r.type:t[i+1]))return n.copy(n.content.append(X.from(Qne(r,t,i+1))))}}function Jne(t,e){if(e==0)return t;let r=t.content.replaceChild(t.childCount-1,Jne(t.lastChild,e-1)),n=t.contentMatchAt(t.childCount).fillBefore(X.empty,!0);return t.copy(r.append(n))}function MI(t,e,r,n,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<n-1&&(a=MI(a,e,r,n,i+1,s)),i>=r&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(X.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function oF(t,e,r){return e<t.openStart&&(t=new ve(MI(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),r<t.openEnd&&(t=new ve(MI(t.content,1,r,t.openEnd,0,0),t.openStart,r)),t}const Zne={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let aF=null;function eie(){return aF||(aF=document.implementation.createHTMLDocument("title"))}let Qx=null;function fbe(t){let e=window.trustedTypes;return e?(Qx||(Qx=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:r=>r})),Qx.createHTML(t)):t}function pbe(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let r=eie().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(t),i;if((i=n&&Zne[n[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),r.innerHTML=fbe(t),i)for(let s=0;s<i.length;s++)r=r.querySelector(i[s])||r;return r}function mbe(t){let e=t.querySelectorAll(qr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<e.length;r++){let n=e[r];n.childNodes.length==1&&n.textContent==""&&n.parentNode&&n.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),n)}}function gbe(t,e){if(!t.size)return t;let r=t.content.firstChild.type.schema,n;try{n=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=n.length-2;a>=0;a-=2){let l=r.nodes[n[a]];if(!l||l.hasRequiredAttrs())break;i=X.from(l.create(n[a+1],i)),s++,o++}return new ve(i,s,o)}const In={},Rn={},ybe={touchstart:!0,touchmove:!0};class vbe{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function bbe(t){for(let e in In){let r=In[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=n=>{wbe(t,n)&&!eA(t,n)&&(t.editable||!(n.type in Rn))&&r(t,n)},ybe[e]?{passive:!0}:void 0)}yn&&t.dom.addEventListener("input",()=>null),AI(t)}function Ia(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function xbe(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function AI(t){t.someProp("handleDOMEvents",e=>{for(let r in e)t.input.eventHandlers[r]||t.dom.addEventListener(r,t.input.eventHandlers[r]=n=>eA(t,n))})}function eA(t,e){return t.someProp("handleDOMEvents",r=>{let n=r[e.type];return n?n(t,e)||e.defaultPrevented:!1})}function wbe(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r=e.target;r!=t.dom;r=r.parentNode)if(!r||r.nodeType==11||r.pmViewDesc&&r.pmViewDesc.stopEvent(e))return!1;return!0}function Sbe(t,e){!eA(t,e)&&In[e.type]&&(t.editable||!(e.type in Rn))&&In[e.type](t,e)}Rn.keydown=(t,e)=>{let r=e;if(t.input.shiftKey=r.keyCode==16||r.shiftKey,!rie(t,r)&&(t.input.lastKeyCode=r.keyCode,t.input.lastKeyCodeTime=Date.now(),!(mo&&qr&&r.keyCode==13)))if(r.keyCode!=229&&t.domObserver.forceFlush(),Kd&&r.keyCode==13&&!r.ctrlKey&&!r.altKey&&!r.metaKey){let n=Date.now();t.input.lastIOSEnter=n,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==n&&(t.someProp("handleKeyDown",i=>i(t,Dl(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",n=>n(t,r))||ube(t,r)?r.preventDefault():Ia(t,"key")};Rn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Rn.keypress=(t,e)=>{let r=e;if(rie(t,r)||!r.charCode||r.ctrlKey&&!r.altKey||Ri&&r.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,r))){r.preventDefault();return}let n=t.state.selection;if(!(n instanceof ze)||!n.$from.sameParent(n.$to)){let i=String.fromCharCode(r.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,n.$from.pos,n.$to.pos,i,s))&&t.dispatch(s()),r.preventDefault()}};function Q0(t){return{left:t.clientX,top:t.clientY}}function _be(t,e){let r=e.x-t.clientX,n=e.y-t.clientY;return r*r+n*n<100}function tA(t,e,r,n,i){if(n==-1)return!1;let s=t.state.doc.resolve(n);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,r,s.nodeAfter,s.before(o),i,!0):a(t,r,s.node(o),s.before(o),i,!1)))return!0;return!1}function hd(t,e,r){if(t.focused||t.focus(),t.state.selection.eq(e))return;let n=t.state.tr.setSelection(e);n.setMeta("pointer",!0),t.dispatch(n)}function Ebe(t,e){if(e==-1)return!1;let r=t.state.doc.resolve(e),n=r.nodeAfter;return n&&n.isAtom&&Re.isSelectable(n)?(hd(t,new Re(r)),!0):!1}function Nbe(t,e){if(e==-1)return!1;let r=t.state.selection,n,i;r instanceof Re&&(n=r.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(Re.isSelectable(a)){n&&r.$from.depth>0&&o>=r.$from.depth&&s.before(r.$from.depth+1)==r.$from.pos?i=s.before(r.$from.depth):i=s.before(o);break}}return i!=null?(hd(t,Re.create(t.state.doc,i)),!0):!1}function kbe(t,e,r,n,i){return tA(t,"handleClickOn",e,r,n)||t.someProp("handleClick",s=>s(t,e,n))||(i?Nbe(t,r):Ebe(t,r))}function Cbe(t,e,r,n){return tA(t,"handleDoubleClickOn",e,r,n)||t.someProp("handleDoubleClick",i=>i(t,e,n))}function Tbe(t,e,r,n){return tA(t,"handleTripleClickOn",e,r,n)||t.someProp("handleTripleClick",i=>i(t,e,n))||jbe(t,r,n)}function jbe(t,e,r){if(r.button!=0)return!1;let n=t.state.doc;if(e==-1)return n.inlineContent?(hd(t,ze.create(n,0,n.content.size)),!0):!1;let i=n.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)hd(t,ze.create(n,a+1,a+1+o.content.size));else if(Re.isSelectable(o))hd(t,Re.create(n,a));else continue;return!0}}function rA(t){return fv(t)}const tie=Ri?"metaKey":"ctrlKey";In.mousedown=(t,e)=>{let r=e;t.input.shiftKey=r.shiftKey;let n=rA(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&_be(r,t.input.lastClick)&&!r[tie]&&t.input.lastClick.button==r.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:r.clientX,y:r.clientY,type:s,button:r.button};let o=t.posAtCoords(Q0(r));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Obe(t,o,r,!!n)):(s=="doubleClick"?Cbe:Tbe)(t,o.pos,o.inside,r)?r.preventDefault():Ia(t,"pointer"))};class Obe{constructor(e,r,n,i){this.view=e,this.pos=r,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[tie],this.allowDefault=n.shiftKey;let s,o;if(r.inside>-1)s=e.state.doc.nodeAt(r.inside),o=r.inside;else{let d=e.state.doc.resolve(r.pos);s=d.parent,o=d.depth?d.before():0}const a=i?null:n.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:u}=e.state;(n.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||u instanceof Re&&u.from<=o&&u.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&zi&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ia(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>wo(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let r=this.pos;this.view.state.doc!=this.startDoc&&(r=this.view.posAtCoords(Q0(e))),this.updateAllowDefault(e),this.allowDefault||!r?Ia(this.view,"pointer"):kbe(this.view,r.pos,r.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||yn&&this.mightDrag&&!this.mightDrag.node.isAtom||qr&&!this.view.state.selection.visible&&Math.min(Math.abs(r.pos-this.view.state.selection.from),Math.abs(r.pos-this.view.state.selection.to))<=2)?(hd(this.view,Je.near(this.view.state.doc.resolve(r.pos))),e.preventDefault()):Ia(this.view,"pointer")}move(e){this.updateAllowDefault(e),Ia(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}In.touchstart=t=>{t.input.lastTouch=Date.now(),rA(t),Ia(t,"pointer")};In.touchmove=t=>{t.input.lastTouch=Date.now(),Ia(t,"pointer")};In.contextmenu=t=>rA(t);function rie(t,e){return t.composing?!0:yn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const Pbe=mo?5e3:-1;Rn.compositionstart=Rn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,r=e.selection.$to;if(e.selection instanceof ze&&(e.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)||qr&&Rne&&Ibe(t)))t.markCursor=t.state.storedMarks||r.marks(),fv(t,!0),t.markCursor=null;else if(fv(t,!e.selection.empty),zi&&e.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let n=t.domSelectionRange();for(let i=n.focusNode,s=n.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}nie(t,Pbe)};function Ibe(t){let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(!e||e.nodeType!=1||r>=e.childNodes.length)return!1;let n=e.childNodes[r];return n.nodeType==1&&n.contentEditable=="false"}Rn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,nie(t,20))};function nie(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>fv(t),e))}function iie(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=Mbe());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function Rbe(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let r=N0e(e.focusNode,e.focusOffset),n=k0e(e.focusNode,e.focusOffset);if(r&&n&&r!=n){let i=n.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(r==s||n==s)return s;if(!i||!i.isText(n.nodeValue))return n;if(t.input.compositionNode==n){let o=r.pmViewDesc;if(!(!o||!o.isText(r.nodeValue)))return n}}return r||n}function Mbe(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function fv(t,e=!1){if(!(mo&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),iie(t),e||t.docView&&t.docView.dirty){let r=XM(t),n=t.state.selection;return r&&!r.eq(n)?t.dispatch(t.state.tr.setSelection(r)):(t.markCursor||e)&&!n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function Abe(t,e){if(!t.dom.parentNode)return;let r=t.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(e),r.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),n.removeAllRanges(),n.addRange(i),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),t.focus()},50)}const kp=ri&&Ha<15||Kd&&O0e<604;In.copy=Rn.cut=(t,e)=>{let r=e,n=t.state.selection,i=r.type=="cut";if(n.empty)return;let s=kp?null:r.clipboardData,o=n.content(),{dom:a,text:l}=ZM(t,o);s?(r.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):Abe(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Dbe(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function $be(t,e){if(!t.dom.parentNode)return;let r=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,n=t.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),n.parentNode&&n.parentNode.removeChild(n),r?Cp(t,n.value,null,i,e):Cp(t,n.textContent,n.innerHTML,i,e)},50)}function Cp(t,e,r,n,i){let s=Yne(t,e,r,n,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||ve.empty)))return!0;if(!s)return!1;let o=Dbe(s),a=o?t.state.tr.replaceSelectionWith(o,n):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function sie(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let r=t.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}Rn.paste=(t,e)=>{let r=e;if(t.composing&&!mo)return;let n=kp?null:r.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;n&&Cp(t,sie(n),n.getData("text/html"),i,r)?r.preventDefault():$be(t,r)};class oie{constructor(e,r,n){this.slice=e,this.move=r,this.node=n}}const Fbe=Ri?"altKey":"ctrlKey";function aie(t,e){let r=t.someProp("dragCopies",n=>!n(e));return r??!e[Fbe]}In.dragstart=(t,e)=>{let r=e,n=t.input.mouseDown;if(n&&n.done(),!r.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(Q0(r)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Re?i.to-1:i.to))){if(n&&n.mightDrag)o=Re.create(t.state.doc,n.mightDrag.pos);else if(r.target&&r.target.nodeType==1){let h=t.docView.nearestDesc(r.target,!0);h&&h.node.type.spec.draggable&&h!=t.docView&&(o=Re.create(t.state.doc,h.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:u,slice:d}=ZM(t,a);(!r.dataTransfer.files.length||!qr||Ine>120)&&r.dataTransfer.clearData(),r.dataTransfer.setData(kp?"Text":"text/html",l.innerHTML),r.dataTransfer.effectAllowed="copyMove",kp||r.dataTransfer.setData("text/plain",u),t.dragging=new oie(d,aie(t,r),o)};In.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Rn.dragover=Rn.dragenter=(t,e)=>e.preventDefault();Rn.drop=(t,e)=>{try{qbe(t,e,t.dragging)}finally{t.dragging=null}};function qbe(t,e,r){if(!e.dataTransfer)return;let n=t.posAtCoords(Q0(e));if(!n)return;let i=t.state.doc.resolve(n.pos),s=r&&r.slice;s?t.someProp("transformPasted",p=>{s=p(s,t,!1)}):s=Yne(t,sie(e.dataTransfer),kp?null:e.dataTransfer.getData("text/html"),!1,i);let o=!!(r&&aie(t,e));if(t.someProp("handleDrop",p=>p(t,e,s||ve.empty,o))){e.preventDefault();return}if(!s)return;e.preventDefault();let a=s?dne(t.state.doc,i.pos,s):i.pos;a==null&&(a=i.pos);let l=t.state.tr;if(o){let{node:p}=r;p?p.replace(l):l.deleteSelection()}let u=l.mapping.map(a),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,h=l.doc;if(d?l.replaceRangeWith(u,u,s.content.firstChild):l.replaceRange(u,u,s),l.doc.eq(h))return;let f=l.doc.resolve(u);if(d&&Re.isSelectable(s.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(s.content.firstChild))l.setSelection(new Re(f));else{let p=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((m,g,v,y)=>p=y),l.setSelection(JM(t,f,l.doc.resolve(p)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}In.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&wo(t)},20))};In.blur=(t,e)=>{let r=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),r.relatedTarget&&t.dom.contains(r.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};In.beforeinput=(t,e)=>{if(qr&&mo&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:n}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=n||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Dl(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Rn)In[t]=Rn[t];function Tp(t,e){if(t==e)return!0;for(let r in t)if(t[r]!==e[r])return!1;for(let r in e)if(!(r in t))return!1;return!0}class pv{constructor(e,r){this.toDOM=e,this.spec=r||dc,this.side=this.spec.side||0}map(e,r,n,i){let{pos:s,deleted:o}=e.mapResult(r.from+i,this.side<0?-1:1);return o?null:new jn(s-n,s-n,this)}valid(){return!0}eq(e){return this==e||e instanceof pv&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Tp(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Ga{constructor(e,r){this.attrs=e,this.spec=r||dc}map(e,r,n,i){let s=e.map(r.from+i,this.spec.inclusiveStart?-1:1)-n,o=e.map(r.to+i,this.spec.inclusiveEnd?1:-1)-n;return s>=o?null:new jn(s,o,this)}valid(e,r){return r.from<r.to}eq(e){return this==e||e instanceof Ga&&Tp(this.attrs,e.attrs)&&Tp(this.spec,e.spec)}static is(e){return e.type instanceof Ga}destroy(){}}class nA{constructor(e,r){this.attrs=e,this.spec=r||dc}map(e,r,n,i){let s=e.mapResult(r.from+i,1);if(s.deleted)return null;let o=e.mapResult(r.to+i,-1);return o.deleted||o.pos<=s.pos?null:new jn(s.pos-n,o.pos-n,this)}valid(e,r){let{index:n,offset:i}=e.content.findIndex(r.from),s;return i==r.from&&!(s=e.child(n)).isText&&i+s.nodeSize==r.to}eq(e){return this==e||e instanceof nA&&Tp(this.attrs,e.attrs)&&Tp(this.spec,e.spec)}destroy(){}}class jn{constructor(e,r,n){this.from=e,this.to=r,this.type=n}copy(e,r){return new jn(e,r,this.type)}eq(e,r=0){return this.type.eq(e.type)&&this.from+r==e.from&&this.to+r==e.to}map(e,r,n){return this.type.map(e,this,r,n)}static widget(e,r,n){return new jn(e,e,new pv(r,n))}static inline(e,r,n,i){return new jn(e,r,new Ga(n,i))}static node(e,r,n,i){return new jn(e,r,new nA(n,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ga}get widget(){return this.type instanceof pv}}const Ru=[],dc={};class Ut{constructor(e,r){this.local=e.length?e:Ru,this.children=r.length?r:Ru}static create(e,r){return r.length?mv(r,e,0,dc):dn}find(e,r,n){let i=[];return this.findInner(e??0,r??1e9,i,0,n),i}findInner(e,r,n,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=r&&a.to>=e&&(!s||s(a.spec))&&n.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<r&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,r-a,n,i+a,s)}}map(e,r,n){return this==dn||e.maps.length==0?this:this.mapInner(e,r,0,0,n||dc)}mapInner(e,r,n,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,n,i);l&&l.type.valid(r,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?Lbe(this.children,o||[],e,r,n,i,s):o?new Ut(o.sort(hc),Ru):dn}add(e,r){return r.length?this==dn?Ut.create(e,r):this.addInner(e,r,0):this}addInner(e,r,n){let i,s=0;e.forEach((a,l)=>{let u=l+n,d;if(d=cie(r,a,u)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,d,u+1):i.splice(s,0,l,l+a.nodeSize,mv(d,a,u+1,dc)),s+=3}});let o=lie(s?uie(r):r,-n);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new Ut(o.length?this.local.concat(o).sort(hc):this.local,i||this.children)}remove(e){return e.length==0||this==dn?this:this.removeInner(e,0)}removeInner(e,r){let n=this.children,i=this.local;for(let s=0;s<n.length;s+=3){let o,a=n[s]+r,l=n[s+1]+r;for(let d=0,h;d<e.length;d++)(h=e[d])&&h.from>a&&h.to<l&&(e[d]=null,(o||(o=[])).push(h));if(!o)continue;n==this.children&&(n=this.children.slice());let u=n[s+2].removeInner(o,a+1);u!=dn?n[s+2]=u:(n.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,r)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return n==this.children&&i==this.local?this:i.length||n.length?new Ut(i,n):dn}forChild(e,r){if(this==dn)return this;if(r.isLeaf)return Ut.empty;let n,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(n=this.children[a+2]);break}let s=e+1,o=s+r.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Ga){let u=Math.max(s,l.from)-s,d=Math.min(o,l.to)-s;u<d&&(i||(i=[])).push(l.copy(u,d))}}if(i){let a=new Ut(i.sort(hc),Ru);return n?new pa([a,n]):a}return n||dn}eq(e){if(this==e)return!0;if(!(e instanceof Ut)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let r=0;r<this.local.length;r++)if(!this.local[r].eq(e.local[r]))return!1;for(let r=0;r<this.children.length;r+=3)if(this.children[r]!=e.children[r]||this.children[r+1]!=e.children[r+1]||!this.children[r+2].eq(e.children[r+2]))return!1;return!0}locals(e){return iA(this.localsInner(e))}localsInner(e){if(this==dn)return Ru;if(e.inlineContent||!this.local.some(Ga.is))return this.local;let r=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof Ga||r.push(this.local[n]);return r}forEachSet(e){e(this)}}Ut.empty=new Ut([],[]);Ut.removeOverlap=iA;const dn=Ut.empty;class pa{constructor(e){this.members=e}map(e,r){const n=this.members.map(i=>i.map(e,r,dc));return pa.from(n)}forChild(e,r){if(r.isLeaf)return Ut.empty;let n=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,r);s!=dn&&(s instanceof pa?n=n.concat(s.members):n.push(s))}return pa.from(n)}eq(e){if(!(e instanceof pa)||e.members.length!=this.members.length)return!1;for(let r=0;r<this.members.length;r++)if(!this.members[r].eq(e.members[r]))return!1;return!0}locals(e){let r,n=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!r)r=s;else{n&&(r=r.slice(),n=!1);for(let o=0;o<s.length;o++)r.push(s[o])}}return r?iA(n?r:r.sort(hc)):Ru}static from(e){switch(e.length){case 0:return dn;case 1:return e[0];default:return new pa(e.every(r=>r instanceof Ut)?e:e.reduce((r,n)=>r.concat(n instanceof Ut?n:n.members),[]))}}forEachSet(e){for(let r=0;r<this.members.length;r++)this.members[r].forEachSet(e)}}function Lbe(t,e,r,n,i,s,o){let a=t.slice();for(let u=0,d=s;u<r.maps.length;u++){let h=0;r.maps[u].forEach((f,p,m,g)=>{let v=g-m-(p-f);for(let y=0;y<a.length;y+=3){let b=a[y+1];if(b<0||f>b+d-h)continue;let w=a[y]+d-h;p>=w?a[y+1]=f<=w?-2:-1:f>=d&&v&&(a[y]+=v,a[y+1]+=v)}h+=v}),d=r.maps[u].map(d,-1)}let l=!1;for(let u=0;u<a.length;u+=3)if(a[u+1]<0){if(a[u+1]==-2){l=!0,a[u+1]=-1;continue}let d=r.map(t[u]+s),h=d-i;if(h<0||h>=n.content.size){l=!0;continue}let f=r.map(t[u+1]+s,-1),p=f-i,{index:m,offset:g}=n.content.findIndex(h),v=n.maybeChild(m);if(v&&g==h&&g+v.nodeSize==p){let y=a[u+2].mapInner(r,v,d+1,t[u]+s+1,o);y!=dn?(a[u]=h,a[u+1]=p,a[u+2]=y):(a[u+1]=-2,l=!0)}else l=!0}if(l){let u=Bbe(a,t,e,r,i,s,o),d=mv(u,n,0,o);e=d.local;for(let h=0;h<a.length;h+=3)a[h+1]<0&&(a.splice(h,3),h-=3);for(let h=0,f=0;h<d.children.length;h+=3){let p=d.children[h];for(;f<a.length&&a[f]<p;)f+=3;a.splice(f,0,d.children[h],d.children[h+1],d.children[h+2])}}return new Ut(e.sort(hc),a)}function lie(t,e){if(!e||!t.length)return t;let r=[];for(let n=0;n<t.length;n++){let i=t[n];r.push(new jn(i.from+e,i.to+e,i.type))}return r}function Bbe(t,e,r,n,i,s,o){function a(l,u){for(let d=0;d<l.local.length;d++){let h=l.local[d].map(n,i,u);h?r.push(h):o.onRemove&&o.onRemove(l.local[d].spec)}for(let d=0;d<l.children.length;d+=3)a(l.children[d+2],l.children[d]+u+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return r}function cie(t,e,r){if(e.isLeaf)return null;let n=r+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>r&&o.to<n&&((i||(i=[])).push(o),t[s]=null);return i}function uie(t){let e=[];for(let r=0;r<t.length;r++)t[r]!=null&&e.push(t[r]);return e}function mv(t,e,r,n){let i=[],s=!1;e.forEach((a,l)=>{let u=cie(t,a,l+r);if(u){s=!0;let d=mv(u,a,r+l+1,n);d!=dn&&i.push(l,l+a.nodeSize,d)}});let o=lie(s?uie(t):t,-r).sort(hc);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(n.onRemove&&n.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new Ut(o,i):dn}function hc(t,e){return t.from-e.from||t.to-e.to}function iA(t){let e=t;for(let r=0;r<e.length-1;r++){let n=e[r];if(n.from!=n.to)for(let i=r+1;i<e.length;i++){let s=e[i];if(s.from==n.from){s.to!=n.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,n.to),lF(e,i+1,s.copy(n.to,s.to)));continue}else{s.from<n.to&&(e==t&&(e=t.slice()),e[r]=n.copy(n.from,s.from),lF(e,i,n.copy(s.from,n.to)));break}}}return e}function lF(t,e,r){for(;e<t.length&&hc(r,t[e])>0;)e++;t.splice(e,0,r)}function Xx(t){let e=[];return t.someProp("decorations",r=>{let n=r(t.state);n&&n!=dn&&e.push(n)}),t.cursorWrapper&&e.push(Ut.create(t.state.doc,[t.cursorWrapper.deco])),pa.from(e)}const zbe={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Vbe=ri&&Ha<=11;class Wbe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class Ube{constructor(e,r){this.view=e,this.handleDOMChange=r,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Wbe,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let i=0;i<n.length;i++)this.queue.push(n[i]);ri&&Ha<=11&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),Vbe&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,zbe)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let r=0;r<e.length;r++)this.queue.push(e[r]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(eF(this.view)){if(this.suppressingSelectionUpdates)return wo(this.view);if(ri&&Ha<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Mc(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let r=new Set,n;for(let s=e.focusNode;s;s=Hd(s))r.add(s);for(let s=e.anchorNode;s;s=Hd(s))if(r.has(s)){n=s;break}let i=n&&this.view.docView.nearestDesc(n);if(i&&i.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let r=this.pendingRecords();r.length&&(this.queue=[]);let n=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&eF(e)&&!this.ignoreSelectionChange(n),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let d=0;d<r.length;d++){let h=this.registerMutation(r[d],l);h&&(s=s<0?h.from:Math.min(h.from,s),o=o<0?h.to:Math.max(h.to,o),h.typeOver&&(a=!0))}if(zi&&l.length){let d=l.filter(h=>h.nodeName=="BR");if(d.length==2){let[h,f]=d;h.parentNode&&h.parentNode.parentNode==f.parentNode?f.remove():h.remove()}else{let{focusNode:h}=this.currentSelection;for(let f of d){let p=f.parentNode;p&&p.nodeName=="LI"&&(!h||Gbe(e,h)!=p)&&f.remove()}}}else if((qr||yn)&&l.some(d=>d.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let d of l)if(d.nodeName=="BR"&&d.parentNode){let h=d.nextSibling;h&&h.nodeType==1&&h.contentEditable=="false"&&d.parentNode.removeChild(d)}}let u=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&G0(n)&&(u=XM(e))&&u.eq(Je.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,wo(e),this.currentSelection.set(n),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),Hbe(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||wo(e),this.currentSelection.set(n))}registerMutation(e,r){if(r.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(n==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let h=e.addedNodes[d];r.push(h),h.nodeType==3&&(this.lastChangedTextNode=h)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let i=e.previousSibling,s=e.nextSibling;if(ri&&Ha<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:h,nextSibling:f}=e.addedNodes[d];(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}let o=i&&i.parentNode==e.target?en(i)+1:0,a=n.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?en(s):e.target.childNodes.length,u=n.localPosFromDOM(e.target,l,1);return{from:a,to:u}}else return e.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let cF=new WeakMap,uF=!1;function Hbe(t){if(!cF.has(t)&&(cF.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=zi,uF)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),uF=!0}}function dF(t,e){let r=e.startContainer,n=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return Mc(o.node,o.offset,i,s)&&([r,n,i,s]=[i,s,r,n]),{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:s}}function Kbe(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return dF(t,i)}let r;function n(i){i.preventDefault(),i.stopImmediatePropagation(),r=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0),r?dF(t,r):null}function Gbe(t,e){for(let r=e.parentNode;r&&r!=t.dom;r=r.parentNode){let n=t.docView.nearestDesc(r,!0);if(n&&n.node.isBlock)return r}return null}function Ybe(t,e,r){let{node:n,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,r),l=t.domSelectionRange(),u,d=l.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(u=[{node:d,offset:l.anchorOffset}],G0(l)||u.push({node:l.focusNode,offset:l.focusOffset})),qr&&t.input.lastKeyCode===8)for(let v=s;v>i;v--){let y=n.childNodes[v-1],b=y.pmViewDesc;if(y.nodeName=="BR"&&!b){s=v;break}if(!b||b.size)break}let h=t.state.doc,f=t.someProp("domParser")||Ua.fromSchema(t.state.schema),p=h.resolve(o),m=null,g=f.parse(n,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:s,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:Qbe,context:p});if(u&&u[0].pos!=null){let v=u[0].pos,y=u[1]&&u[1].pos;y==null&&(y=v),m={anchor:v+o,head:y+o}}return{doc:g,sel:m,from:o,to:a}}function Qbe(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(yn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}else if(t.parentNode.lastChild==t||yn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Xbe=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Jbe(t,e,r,n,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let E=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,N=XM(t,E);if(N&&!t.state.selection.eq(N)){if(qr&&mo&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",j=>j(t,Dl(13,"Enter"))))return;let T=t.state.tr.setSelection(N);E=="pointer"?T.setMeta("pointer",!0):E=="key"&&T.scrollIntoView(),s&&T.setMeta("composition",s),t.dispatch(T)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(r);e=o.before(a+1),r=t.state.doc.resolve(r).after(a+1);let l=t.state.selection,u=Ybe(t,e,r),d=t.state.doc,h=d.slice(u.from,u.to),f,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,p="end"):(f=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let m=txe(h.content,u.doc.content,u.from,f,p);if(m&&t.input.domChangeCount++,(Kd&&t.input.lastIOSEnter>Date.now()-225||mo)&&i.some(E=>E.nodeType==1&&!Xbe.test(E.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",E=>E(t,Dl(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(n&&l instanceof ze&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))m={start:l.from,endA:l.to,endB:l.to};else{if(u.sel){let E=hF(t,t.state.doc,u.sel);if(E&&!E.eq(t.state.selection)){let N=t.state.tr.setSelection(E);s&&N.setMeta("composition",s),t.dispatch(N)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof ze&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=u.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=u.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),ri&&Ha<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>u.from&&u.doc.textBetween(m.start-u.from-1,m.start-u.from+1)==" "&&(m.start--,m.endA--,m.endB--);let g=u.doc.resolveNoCache(m.start-u.from),v=u.doc.resolveNoCache(m.endB-u.from),y=d.resolve(m.start),b=g.sameParent(v)&&g.parent.inlineContent&&y.end()>=m.endA;if((Kd&&t.input.lastIOSEnter>Date.now()-225&&(!b||i.some(E=>E.nodeName=="DIV"||E.nodeName=="P"))||!b&&g.pos<u.doc.content.size&&(!g.sameParent(v)||!g.parent.inlineContent)&&g.pos<v.pos&&!/\S/.test(u.doc.textBetween(g.pos,v.pos,"","")))&&t.someProp("handleKeyDown",E=>E(t,Dl(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&exe(d,m.start,m.endA,g,v)&&t.someProp("handleKeyDown",E=>E(t,Dl(8,"Backspace")))){mo&&qr&&t.domObserver.suppressSelectionUpdates();return}qr&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),mo&&!b&&g.start()!=v.start()&&v.parentOffset==0&&g.depth==v.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==m.endA&&(m.endB-=2,v=u.doc.resolveNoCache(m.endB-u.from),setTimeout(()=>{t.someProp("handleKeyDown",function(E){return E(t,Dl(13,"Enter"))})},20));let w=m.start,x=m.endA,S=E=>{let N=E||t.state.tr.replace(w,x,u.doc.slice(m.start-u.from,m.endB-u.from));if(u.sel){let T=hF(t,N.doc,u.sel);T&&!(qr&&t.composing&&T.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(T.head==w||T.head==N.mapping.map(x)-1)||ri&&T.empty&&T.head==w)&&N.setSelection(T)}return s&&N.setMeta("composition",s),N.scrollIntoView()},_;if(b)if(g.pos==v.pos){ri&&Ha<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>wo(t),20));let E=S(t.state.tr.delete(w,x)),N=d.resolve(m.start).marksAcross(d.resolve(m.endA));N&&E.ensureMarks(N),t.dispatch(E)}else if(m.endA==m.endB&&(_=Zbe(g.parent.content.cut(g.parentOffset,v.parentOffset),y.parent.content.cut(y.parentOffset,m.endA-y.start())))){let E=S(t.state.tr);_.type=="add"?E.addMark(w,x,_.mark):E.removeMark(w,x,_.mark),t.dispatch(E)}else if(g.parent.child(g.index()).isText&&g.index()==v.index()-(v.textOffset?0:1)){let E=g.parent.textBetween(g.parentOffset,v.parentOffset),N=()=>S(t.state.tr.insertText(E,w,x));t.someProp("handleTextInput",T=>T(t,w,x,E,N))||t.dispatch(N())}else t.dispatch(S());else t.dispatch(S())}function hF(t,e,r){return Math.max(r.anchor,r.head)>e.content.size?null:JM(t,e.resolve(r.anchor),e.resolve(r.head))}function Zbe(t,e){let r=t.firstChild.marks,n=e.firstChild.marks,i=r,s=n,o,a,l;for(let d=0;d<n.length;d++)i=n[d].removeFromSet(i);for(let d=0;d<r.length;d++)s=r[d].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=d=>d.mark(a.addToSet(d.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=d=>d.mark(a.removeFromSet(d.marks));else return null;let u=[];for(let d=0;d<e.childCount;d++)u.push(l(e.child(d)));if(X.from(u).eq(t))return{mark:a,type:o}}function exe(t,e,r,n,i){if(r-e<=i.pos-n.pos||Jx(n,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!n.parent.isTextblock){let a=s.nodeAfter;return a!=null&&r==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(Jx(s,!0,!0));return!o.parent.isTextblock||o.pos>r||Jx(o,!0,!1)<r?!1:n.parent.content.cut(n.parentOffset).eq(o.parent.content)}function Jx(t,e,r){let n=t.depth,i=e?t.end():t.pos;for(;n>0&&(e||t.indexAfter(n)==t.node(n).childCount);)n--,i++,e=!1;if(r){let s=t.node(n).maybeChild(t.indexAfter(n));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function txe(t,e,r,n,i){let s=t.findDiffStart(e,r);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,r+t.size,r+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.size<e.size){let l=n<=s&&n>=o?s-n:0;s-=l,s&&s<e.size&&fF(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,s&&s<t.size&&fF(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function fF(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),r=t.charCodeAt(1);return e>=56320&&e<=57343&&r>=55296&&r<=56319}class die{constructor(e,r){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new vbe,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=r,this.state=r.state,this.directPlugins=r.plugins||[],this.directPlugins.forEach(vF),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=gF(this),mF(this),this.nodeViews=yF(this),this.docView=G5(this.state.doc,pF(this),Xx(this),this.dom,this),this.domObserver=new Ube(this,(n,i,s,o)=>Jbe(this,n,i,s,o)),this.domObserver.start(),bbe(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let r in e)this._props[r]=e[r];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&AI(this);let r=this._props;this._props=e,e.plugins&&(e.plugins.forEach(vF),this.directPlugins=e.plugins),this.updateStateInner(e.state,r)}setProps(e){let r={};for(let n in this._props)r[n]=this._props[n];r.state=this.state;for(let n in e)r[n]=e[n];this.update(r)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,r){var n;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(iie(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=r.plugins;if(a||this._props.plugins!=r.plugins||this._props.nodeViews!=r.nodeViews){let p=yF(this);nxe(p,this.nodeViews)&&(this.nodeViews=p,s=!0)}(a||r.handleDOMEvents!=this._props.handleDOMEvents)&&AI(this),this.editable=gF(this),mF(this);let l=Xx(this),u=pF(this),d=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",h=s||!this.docView.matchesNode(e.doc,u,l);(h||!e.selection.eq(i.selection))&&(o=!0);let f=d=="preserve"&&o&&this.dom.style.overflowAnchor==null&&R0e(this);if(o){this.domObserver.stop();let p=h&&(ri||qr)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&rxe(i.selection,e.selection);if(h){let m=qr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Rbe(this)),(s||!this.docView.update(e.doc,u,l,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=G5(e.doc,u,l,this.dom,this)),m&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&nbe(this))?wo(this,p):(Hne(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((n=this.dragging)===null||n===void 0)&&n.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():f&&M0e(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",r=>r(this)))if(this.state.selection instanceof Re){let r=this.docView.domAfterPos(this.state.selection.from);r.nodeType==1&&z5(this,r.getBoundingClientRect(),e)}else z5(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let r=0;r<this.directPlugins.length;r++){let n=this.directPlugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let r=0;r<this.state.plugins.length;r++){let n=this.state.plugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let r=0;r<this.pluginViews.length;r++){let n=this.pluginViews[r];n.update&&n.update(this,e)}}updateDraggedNode(e,r){let n=e.node,i=-1;if(this.state.doc.nodeAt(n.from)==n.node)i=n.from;else{let s=n.from+(this.state.doc.content.size-r.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==n.node&&(i=s)}this.dragging=new oie(e.slice,e.move,i<0?void 0:Re.create(this.state.doc,i))}someProp(e,r){let n=this._props&&this._props[e],i;if(n!=null&&(i=r?r(n):n))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=r?r(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=r?r(a):a))return i}}hasFocus(){if(ri){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&A0e(this.dom),wo(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let r=this.dom.parentNode;r;r=r.parentNode)if(r.nodeType==9||r.nodeType==11&&r.host)return r.getSelection||(Object.getPrototypeOf(r).getSelection=()=>r.ownerDocument.getSelection()),this._root=r}return e||document}updateRoot(){this._root=null}posAtCoords(e){return L0e(this,e)}coordsAtPos(e,r=1){return Fne(this,e,r)}domAtPos(e,r=0){return this.docView.domFromPos(e,r)}nodeDOM(e){let r=this.docView.descAt(e);return r?r.nodeDOM:null}posAtDOM(e,r,n=-1){let i=this.docView.posFromDOM(e,r,n);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,r){return U0e(this,r||this.state,e)}pasteHTML(e,r){return Cp(this,"",e,!1,r||new ClipboardEvent("paste"))}pasteText(e,r){return Cp(this,e,null,!0,r||new ClipboardEvent("paste"))}serializeForClipboard(e){return ZM(this,e)}destroy(){this.docView&&(xbe(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Xx(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,_0e())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Sbe(this,e)}domSelectionRange(){let e=this.domSelection();return e?yn&&this.root.nodeType===11&&T0e(this.dom.ownerDocument)==this.dom&&Kbe(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}die.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function pF(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",r=>{if(typeof r=="function"&&(r=r(t.state)),r)for(let n in r)n=="class"?e.class+=" "+r[n]:n=="style"?e.style=(e.style?e.style+";":"")+r[n]:!e[n]&&n!="contenteditable"&&n!="nodeName"&&(e[n]=String(r[n]))}),e.translate||(e.translate="no"),[jn.node(0,t.state.doc.content.size,e)]}function mF(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:jn.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function gF(t){return!t.someProp("editable",e=>e(t.state)===!1)}function rxe(t,e){let r=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(r)!=e.$anchor.start(r)}function yF(t){let e=Object.create(null);function r(n){for(let i in n)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=n[i])}return t.someProp("nodeViews",r),t.someProp("markViews",r),e}function nxe(t,e){let r=0,n=0;for(let i in t){if(t[i]!=e[i])return!0;r++}for(let i in e)n++;return r!=n}function vF(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var sl={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},gv={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},ixe=typeof navigator<"u"&&/Mac/.test(navigator.platform),sxe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var tn=0;tn<10;tn++)sl[48+tn]=sl[96+tn]=String(tn);for(var tn=1;tn<=24;tn++)sl[tn+111]="F"+tn;for(var tn=65;tn<=90;tn++)sl[tn]=String.fromCharCode(tn+32),gv[tn]=String.fromCharCode(tn);for(var Zx in sl)gv.hasOwnProperty(Zx)||(gv[Zx]=sl[Zx]);function oxe(t){var e=ixe&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||sxe&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",r=!e&&t.key||(t.shiftKey?gv:sl)[t.keyCode]||t.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}const axe=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),lxe=typeof navigator<"u"&&/Win/.test(navigator.platform);function cxe(t){let e=t.split(/-(?!$)/),r=e[e.length-1];r=="Space"&&(r=" ");let n,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))axe?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return n&&(r="Alt-"+r),i&&(r="Ctrl-"+r),o&&(r="Meta-"+r),s&&(r="Shift-"+r),r}function uxe(t){let e=Object.create(null);for(let r in t)e[cxe(r)]=t[r];return e}function e1(t,e,r=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),r&&e.shiftKey&&(t="Shift-"+t),t}function dxe(t){return new Yt({props:{handleKeyDown:hie(t)}})}function hie(t){let e=uxe(t);return function(r,n){let i=oxe(n),s,o=e[e1(i,n)];if(o&&o(r.state,r.dispatch,r))return!0;if(i.length==1&&i!=" "){if(n.shiftKey){let a=e[e1(i,n,!1)];if(a&&a(r.state,r.dispatch,r))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(lxe&&n.ctrlKey&&n.altKey)&&(s=sl[n.keyCode])&&s!=i){let a=e[e1(s,n)];if(a&&a(r.state,r.dispatch,r))return!0}}return!1}}var hxe=Object.defineProperty,sA=(t,e)=>{for(var r in e)hxe(t,r,{get:e[r],enumerable:!0})};function X0(t){const{state:e,transaction:r}=t;let{selection:n}=r,{doc:i}=r,{storedMarks:s}=r;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return n},get doc(){return i},get tr(){return n=r.selection,i=r.doc,s=r.storedMarks,r}}}var J0=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:r}=this,{view:n}=e,{tr:i}=r,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([o,a])=>[o,(...u)=>{const d=a(...u)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&n.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:r,editor:n,state:i}=this,{view:s}=n,o=[],a=!!t,l=t||i.tr,u=()=>(!a&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(l),o.every(h=>h===!0)),d={...Object.fromEntries(Object.entries(r).map(([h,f])=>[h,(...m)=>{const g=this.buildProps(l,e),v=f(...m)(g);return o.push(v),d}])),run:u};return d}createCan(t){const{rawCommands:e,state:r}=this,n=!1,i=t||r.tr,s=this.buildProps(i,n);return{...Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>l(...u)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,n)}}buildProps(t,e=!0){const{rawCommands:r,editor:n,state:i}=this,{view:s}=n,o={tr:t,editor:n,view:s,state:X0({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(r).map(([a,l])=>[a,(...u)=>l(...u)(o)]))}};return o}},fie={};sA(fie,{blur:()=>fxe,clearContent:()=>pxe,clearNodes:()=>mxe,command:()=>gxe,createParagraphNear:()=>yxe,cut:()=>vxe,deleteCurrentNode:()=>bxe,deleteNode:()=>xxe,deleteRange:()=>wxe,deleteSelection:()=>Sxe,enter:()=>_xe,exitCode:()=>Exe,extendMarkRange:()=>Nxe,first:()=>kxe,focus:()=>Txe,forEach:()=>jxe,insertContent:()=>Oxe,insertContentAt:()=>Rxe,joinBackward:()=>Dxe,joinDown:()=>Axe,joinForward:()=>$xe,joinItemBackward:()=>Fxe,joinItemForward:()=>qxe,joinTextblockBackward:()=>Lxe,joinTextblockForward:()=>Bxe,joinUp:()=>Mxe,keyboardShortcut:()=>Vxe,lift:()=>Wxe,liftEmptyBlock:()=>Uxe,liftListItem:()=>Hxe,newlineInCode:()=>Kxe,resetAttributes:()=>Gxe,scrollIntoView:()=>Yxe,selectAll:()=>Qxe,selectNodeBackward:()=>Xxe,selectNodeForward:()=>Jxe,selectParentNode:()=>Zxe,selectTextblockEnd:()=>e1e,selectTextblockStart:()=>t1e,setContent:()=>r1e,setMark:()=>S1e,setMeta:()=>_1e,setNode:()=>E1e,setNodeSelection:()=>N1e,setTextDirection:()=>k1e,setTextSelection:()=>C1e,sinkListItem:()=>T1e,splitBlock:()=>j1e,splitListItem:()=>O1e,toggleList:()=>P1e,toggleMark:()=>I1e,toggleNode:()=>R1e,toggleWrap:()=>M1e,undoInputRule:()=>A1e,unsetAllMarks:()=>D1e,unsetMark:()=>$1e,unsetTextDirection:()=>F1e,updateAttributes:()=>q1e,wrapIn:()=>L1e,wrapInList:()=>B1e});var fxe=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var r;t.isDestroyed||(e.dom.blur(),(r=window==null?void 0:window.getSelection())==null||r.removeAllRanges())}),!0),pxe=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),mxe=()=>({state:t,tr:e,dispatch:r})=>{const{selection:n}=e,{ranges:i}=n;return r&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:u,mapping:d}=e,h=u.resolve(d.map(l)),f=u.resolve(d.map(l+a.nodeSize)),p=h.blockRange(f);if(!p)return;const m=gh(p);if(a.type.isTextblock){const{defaultType:g}=h.parent.contentMatchAt(h.index());e.setNodeMarkup(p.start,g)}(m||m===0)&&e.lift(p,m)})}),!0},gxe=t=>e=>t(e),yxe=()=>({state:t,dispatch:e})=>Cne(t,e),vxe=(t,e)=>({editor:r,tr:n})=>{const{state:i}=r,s=i.doc.slice(t.from,t.to);n.deleteRange(t.from,t.to);const o=n.mapping.map(e);return n.insert(o,s.content),n.setSelection(new ze(n.doc.resolve(Math.max(o-1,0)))),!0},bxe=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,n=r.$anchor.node();if(n.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===n.type){if(e){const a=i.before(s),l=i.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1};function Sr(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var xxe=t=>({tr:e,state:r,dispatch:n})=>{const i=Sr(t,r.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(n){const l=s.before(o),u=s.after(o);e.delete(l,u).scrollIntoView()}return!0}return!1},wxe=t=>({tr:e,dispatch:r})=>{const{from:n,to:i}=t;return r&&e.delete(n,i),!0},Sxe=()=>({state:t,dispatch:e})=>UM(t,e),_xe=()=>({commands:t})=>t.keyboardShortcut("Enter"),Exe=()=>({state:t,dispatch:e})=>l0e(t,e);function oA(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function yv(t,e,r={strict:!0}){const n=Object.keys(e);return n.length?n.every(i=>r.strict?e[i]===t[i]:oA(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function pie(t,e,r={}){return t.find(n=>n.type===e&&yv(Object.fromEntries(Object.keys(r).map(i=>[i,n.attrs[i]])),r))}function bF(t,e,r={}){return!!pie(t,e,r)}function aA(t,e,r){var n;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(d=>d.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(d=>d.type===e)||(r=r||((n=i.node.marks[0])==null?void 0:n.attrs),!pie([...i.node.marks],e,r)))return;let o=i.index,a=t.start()+i.offset,l=o+1,u=a+i.node.nodeSize;for(;o>0&&bF([...t.parent.child(o-1).marks],e,r);)o-=1,a-=t.parent.child(o).nodeSize;for(;l<t.parent.childCount&&bF([...t.parent.child(l).marks],e,r);)u+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:u}}function zo(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var Nxe=(t,e={})=>({tr:r,state:n,dispatch:i})=>{const s=zo(t,n.schema),{doc:o,selection:a}=r,{$from:l,from:u,to:d}=a;if(i){const h=aA(l,s,e);if(h&&h.from<=u&&h.to>=d){const f=ze.create(o,h.from,h.to);r.setSelection(f)}}return!0},kxe=t=>e=>{const r=typeof t=="function"?t(e):t;for(let n=0;n<r.length;n+=1)if(r[n](e))return!0;return!1};function mie(t){return t instanceof ze}function Ul(t=0,e=0,r=0){return Math.min(Math.max(t,e),r)}function gie(t,e=null){if(!e)return null;const r=Je.atStart(t),n=Je.atEnd(t);if(e==="start"||e===!0)return r;if(e==="end")return n;const i=r.from,s=n.to;return e==="all"?ze.create(t,Ul(0,i,s),Ul(t.content.size,i,s)):ze.create(t,Ul(e,i,s),Ul(e,i,s))}function xF(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function vv(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Cxe(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var Txe=(t=null,e={})=>({editor:r,view:n,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(vv()||xF())&&n.dom.focus(),Cxe()&&!vv()&&!xF()&&n.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{r.isDestroyed||(n.focus(),e!=null&&e.scrollIntoView&&r.commands.scrollIntoView())})};if(n.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!mie(r.state.selection))return o(),!0;const a=gie(i.doc,t)||r.state.selection,l=r.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},jxe=(t,e)=>r=>t.every((n,i)=>e(n,{...r,index:i})),Oxe=(t,e)=>({tr:r,commands:n})=>n.insertContentAt({from:r.selection.from,to:r.selection.to},t,e),yie=t=>{const e=t.childNodes;for(let r=e.length-1;r>=0;r-=1){const n=e[r];n.nodeType===3&&n.nodeValue&&/^(\n\s\s|\n)$/.test(n.nodeValue)?t.removeChild(n):n.nodeType===1&&yie(n)}return t};function Pg(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,r=new window.DOMParser().parseFromString(e,"text/html").body;return yie(r)}function jp(t,e,r){if(t instanceof Wa||t instanceof X)return t;r={slice:!0,parseOptions:{},...r};const n=typeof t=="object"&&t!==null,i=typeof t=="string";if(n)try{if(Array.isArray(t)&&t.length>0)return X.fromArray(t.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(t);return r.errorOnInvalidContent&&o.check(),o}catch(s){if(r.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),jp("",e,r)}if(i){if(r.errorOnInvalidContent){let o=!1,a="";const l=new ene({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(o=!0,a=typeof u=="string"?u:u.outerHTML,null)}]}})});if(r.slice?Ua.fromSchema(l).parseSlice(Pg(t),r.parseOptions):Ua.fromSchema(l).parse(Pg(t),r.parseOptions),r.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=Ua.fromSchema(e);return r.slice?s.parseSlice(Pg(t),r.parseOptions).content:s.parse(Pg(t),r.parseOptions)}return jp("",e,r)}function Pxe(t,e,r){const n=t.steps.length-1;if(n<e)return;const i=t.steps[n];if(!(i instanceof Fr||i instanceof Br))return;const s=t.mapping.maps[n];let o=0;s.forEach((a,l,u,d)=>{o===0&&(o=d)}),t.setSelection(Je.near(t.doc.resolve(o),r))}var Ixe=t=>!("type"in t),Rxe=(t,e,r)=>({tr:n,dispatch:i,editor:s})=>{var o;if(i){r={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...r};let a;const l=v=>{s.emit("contentError",{editor:s,error:v,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},u={preserveWhitespace:"full",...r.parseOptions};if(!r.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{jp(e,s.schema,{parseOptions:u,errorOnInvalidContent:!0})}catch(v){l(v)}try{a=jp(e,s.schema,{parseOptions:u,errorOnInvalidContent:(o=r.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(v){return l(v),!1}let{from:d,to:h}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},f=!0,p=!0;if((Ixe(a)?a:[a]).forEach(v=>{v.check(),f=f?v.isText&&v.marks.length===0:!1,p=p?v.isBlock:!1}),d===h&&p){const{parent:v}=n.doc.resolve(d);v.isTextblock&&!v.type.spec.code&&!v.childCount&&(d-=1,h+=1)}let g;if(f){if(Array.isArray(e))g=e.map(v=>v.text||"").join("");else if(e instanceof X){let v="";e.forEach(y=>{y.text&&(v+=y.text)}),g=v}else typeof e=="object"&&e&&e.text?g=e.text:g=e;n.insertText(g,d,h)}else{g=a;const v=n.doc.resolve(d),y=v.node(),b=v.parentOffset===0,w=y.isText||y.isTextblock,x=y.content.size>0;b&&w&&x&&(d=Math.max(0,d-1)),n.replaceWith(d,h,g)}r.updateSelection&&Pxe(n,n.steps.length-1,-1),r.applyInputRules&&n.setMeta("applyInputRules",{from:d,text:g}),r.applyPasteRules&&n.setMeta("applyPasteRules",{from:d,text:g})}return!0},Mxe=()=>({state:t,dispatch:e})=>s0e(t,e),Axe=()=>({state:t,dispatch:e})=>o0e(t,e),Dxe=()=>({state:t,dispatch:e})=>xne(t,e),$xe=()=>({state:t,dispatch:e})=>Ene(t,e),Fxe=()=>({state:t,dispatch:e,tr:r})=>{try{const n=U0(t.doc,t.selection.$from.pos,-1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},qxe=()=>({state:t,dispatch:e,tr:r})=>{try{const n=U0(t.doc,t.selection.$from.pos,1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},Lxe=()=>({state:t,dispatch:e})=>n0e(t,e),Bxe=()=>({state:t,dispatch:e})=>i0e(t,e);function vie(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function zxe(t){const e=t.split(/-(?!$)/);let r=e[e.length-1];r==="Space"&&(r=" ");let n,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))vv()||vie()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return n&&(r=`Alt-${r}`),i&&(r=`Ctrl-${r}`),o&&(r=`Meta-${r}`),s&&(r=`Shift-${r}`),r}var Vxe=t=>({editor:e,view:r,tr:n,dispatch:i})=>{const s=zxe(t).split(/-(?!$)/),o=s.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{r.someProp("handleKeyDown",u=>u(r,a))});return l==null||l.steps.forEach(u=>{const d=u.map(n.mapping);d&&i&&n.maybeStep(d)}),!0};function ol(t,e,r={}){const{from:n,to:i,empty:s}=t.selection,o=e?Sr(e,t.schema):null,a=[];t.doc.nodesBetween(n,i,(h,f)=>{if(h.isText)return;const p=Math.max(n,f),m=Math.min(i,f+h.nodeSize);a.push({node:h,from:p,to:m})});const l=i-n,u=a.filter(h=>o?o.name===h.node.type.name:!0).filter(h=>yv(h.node.attrs,r,{strict:!1}));return s?!!u.length:u.reduce((h,f)=>h+f.to-f.from,0)>=l}var Wxe=(t,e={})=>({state:r,dispatch:n})=>{const i=Sr(t,r.schema);return ol(r,i,e)?a0e(r,n):!1},Uxe=()=>({state:t,dispatch:e})=>Tne(t,e),Hxe=t=>({state:e,dispatch:r})=>{const n=Sr(t,e.schema);return b0e(n)(e,r)},Kxe=()=>({state:t,dispatch:e})=>kne(t,e);function Z0(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function wF(t,e){const r=typeof e=="string"?[e]:e;return Object.keys(t).reduce((n,i)=>(r.includes(i)||(n[i]=t[i]),n),{})}var Gxe=(t,e)=>({tr:r,state:n,dispatch:i})=>{let s=null,o=null;const a=Z0(typeof t=="string"?t:t.name,n.schema);if(!a)return!1;a==="node"&&(s=Sr(t,n.schema)),a==="mark"&&(o=zo(t,n.schema));let l=!1;return r.selection.ranges.forEach(u=>{n.doc.nodesBetween(u.$from.pos,u.$to.pos,(d,h)=>{s&&s===d.type&&(l=!0,i&&r.setNodeMarkup(h,void 0,wF(d.attrs,e))),o&&d.marks.length&&d.marks.forEach(f=>{o===f.type&&(l=!0,i&&r.addMark(h,h+d.nodeSize,o.create(wF(f.attrs,e))))})})}),l},Yxe=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),Qxe=()=>({tr:t,dispatch:e})=>{if(e){const r=new yi(t.doc);t.setSelection(r)}return!0},Xxe=()=>({state:t,dispatch:e})=>Sne(t,e),Jxe=()=>({state:t,dispatch:e})=>Nne(t,e),Zxe=()=>({state:t,dispatch:e})=>d0e(t,e),e1e=()=>({state:t,dispatch:e})=>p0e(t,e),t1e=()=>({state:t,dispatch:e})=>f0e(t,e);function DI(t,e,r={},n={}){return jp(t,e,{slice:!1,parseOptions:r,errorOnInvalidContent:n.errorOnInvalidContent})}var r1e=(t,{errorOnInvalidContent:e,emitUpdate:r=!0,parseOptions:n={}}={})=>({editor:i,tr:s,dispatch:o,commands:a})=>{const{doc:l}=s;if(n.preserveWhitespace!=="full"){const u=DI(t,i.schema,n,{errorOnInvalidContent:e??i.options.enableContentCheck});return o&&s.replaceWith(0,l.content.size,u).setMeta("preventUpdate",!r),!0}return o&&s.setMeta("preventUpdate",!r),a.insertContentAt({from:0,to:l.content.size},t,{parseOptions:n,errorOnInvalidContent:e??i.options.enableContentCheck})};function bie(t,e){const r=zo(e,t.schema),{from:n,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(n,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===r.name);return a?{...a.attrs}:{}}function xie(t,e){const r=new gne(t);return e.forEach(n=>{n.steps.forEach(i=>{r.step(i)})}),r}function n1e(t){for(let e=0;e<t.edgeCount;e+=1){const{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function i1e(t,e,r){const n=[];return t.nodesBetween(e.from,e.to,(i,s)=>{r(i)&&n.push({node:i,pos:s})}),n}function s1e(t,e){for(let r=t.depth;r>0;r-=1){const n=t.node(r);if(e(n))return{pos:r>0?t.before(r):0,start:t.start(r),depth:r,node:n}}}function eb(t){return e=>s1e(e.$from,t)}function Pe(t,e,r){return t.config[e]===void 0&&t.parent?Pe(t.parent,e,r):typeof t.config[e]=="function"?t.config[e].bind({...r,parent:t.parent?Pe(t.parent,e,r):null}):t.config[e]}function lA(t){return t.map(e=>{const r={name:e.name,options:e.options,storage:e.storage},n=Pe(e,"addExtensions",r);return n?[e,...lA(n())]:e}).flat(10)}function cA(t,e){const r=Yc.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(r),i.innerHTML}function wie(t){return typeof t=="function"}function vt(t,e=void 0,...r){return wie(t)?e?t.bind(e)(...r):t(...r):t}function o1e(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Gd(t){const e=t.filter(i=>i.type==="extension"),r=t.filter(i=>i.type==="node"),n=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:r,markExtensions:n}}function Sie(t){const e=[],{nodeExtensions:r,markExtensions:n}=Gd(t),i=[...r,...n],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:i},l=Pe(o,"addGlobalAttributes",a);if(!l)return;l().forEach(d=>{d.types.forEach(h=>{Object.entries(d.attributes).forEach(([f,p])=>{e.push({type:h,name:f,attribute:{...s,...p}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=Pe(o,"addAttributes",a);if(!l)return;const u=l();Object.entries(u).forEach(([d,h])=>{const f={...s,...h};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:o.name,name:d,attribute:f})})}),e}function _r(...t){return t.filter(e=>!!e).reduce((e,r)=>{const n={...e};return Object.entries(r).forEach(([i,s])=>{if(!n[i]){n[i]=s;return}if(i==="class"){const a=s?String(s).split(" "):[],l=n[i]?n[i].split(" "):[],u=a.filter(d=>!l.includes(d));n[i]=[...l,...u].join(" ")}else if(i==="style"){const a=s?s.split(";").map(d=>d.trim()).filter(Boolean):[],l=n[i]?n[i].split(";").map(d=>d.trim()).filter(Boolean):[],u=new Map;l.forEach(d=>{const[h,f]=d.split(":").map(p=>p.trim());u.set(h,f)}),a.forEach(d=>{const[h,f]=d.split(":").map(p=>p.trim());u.set(h,f)}),n[i]=Array.from(u.entries()).map(([d,h])=>`${d}: ${h}`).join("; ")}else n[i]=s}),n},{})}function Op(t,e){return e.filter(r=>r.type===t.type.name).filter(r=>r.attribute.rendered).map(r=>r.attribute.renderHTML?r.attribute.renderHTML(t.attrs)||{}:{[r.name]:t.attrs[r.name]}).reduce((r,n)=>_r(r,n),{})}function a1e(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function SF(t,e){return"style"in t?t:{...t,getAttrs:r=>{const n=t.getAttrs?t.getAttrs(r):t.attrs;if(n===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(r):a1e(r.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...n,...i}}}}function _F(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>e==="attrs"&&o1e(r)?!1:r!=null))}function EF(t){var e,r;const n={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&"default"in((t==null?void 0:t.attribute)||{})&&(n.default=t.attribute.default),((r=t==null?void 0:t.attribute)==null?void 0:r.validate)!==void 0&&(n.validate=t.attribute.validate),[t.name,n]}function l1e(t,e){var r;const n=Sie(t),{nodeExtensions:i,markExtensions:s}=Gd(t),o=(r=i.find(u=>Pe(u,"topNode")))==null?void 0:r.name,a=Object.fromEntries(i.map(u=>{const d=n.filter(y=>y.type===u.name),h={name:u.name,options:u.options,storage:u.storage,editor:e},f=t.reduce((y,b)=>{const w=Pe(b,"extendNodeSchema",h);return{...y,...w?w(u):{}}},{}),p=_F({...f,content:vt(Pe(u,"content",h)),marks:vt(Pe(u,"marks",h)),group:vt(Pe(u,"group",h)),inline:vt(Pe(u,"inline",h)),atom:vt(Pe(u,"atom",h)),selectable:vt(Pe(u,"selectable",h)),draggable:vt(Pe(u,"draggable",h)),code:vt(Pe(u,"code",h)),whitespace:vt(Pe(u,"whitespace",h)),linebreakReplacement:vt(Pe(u,"linebreakReplacement",h)),defining:vt(Pe(u,"defining",h)),isolating:vt(Pe(u,"isolating",h)),attrs:Object.fromEntries(d.map(EF))}),m=vt(Pe(u,"parseHTML",h));m&&(p.parseDOM=m.map(y=>SF(y,d)));const g=Pe(u,"renderHTML",h);g&&(p.toDOM=y=>g({node:y,HTMLAttributes:Op(y,d)}));const v=Pe(u,"renderText",h);return v&&(p.toText=v),[u.name,p]})),l=Object.fromEntries(s.map(u=>{const d=n.filter(v=>v.type===u.name),h={name:u.name,options:u.options,storage:u.storage,editor:e},f=t.reduce((v,y)=>{const b=Pe(y,"extendMarkSchema",h);return{...v,...b?b(u):{}}},{}),p=_F({...f,inclusive:vt(Pe(u,"inclusive",h)),excludes:vt(Pe(u,"excludes",h)),group:vt(Pe(u,"group",h)),spanning:vt(Pe(u,"spanning",h)),code:vt(Pe(u,"code",h)),attrs:Object.fromEntries(d.map(EF))}),m=vt(Pe(u,"parseHTML",h));m&&(p.parseDOM=m.map(v=>SF(v,d)));const g=Pe(u,"renderHTML",h);return g&&(p.toDOM=v=>g({mark:v,HTMLAttributes:Op(v,d)})),[u.name,p]}));return new ene({topNode:o,nodes:a,marks:l})}function c1e(t){const e=t.filter((r,n)=>t.indexOf(r)!==n);return Array.from(new Set(e))}function bv(t){return t.sort((r,n)=>{const i=Pe(r,"priority")||100,s=Pe(n,"priority")||100;return i>s?-1:i<s?1:0})}function _ie(t){const e=bv(lA(t)),r=c1e(e.map(n=>n.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(n=>`'${n}'`).join(", ")}]. This can lead to issues.`),e}function Eie(t,e,r){const{from:n,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=r||{};let a="";return t.nodesBetween(n,i,(l,u,d,h)=>{var f;l.isBlock&&u>n&&(a+=s);const p=o==null?void 0:o[l.type.name];if(p)return d&&(a+=p({node:l,pos:u,parent:d,index:h,range:e})),!1;l.isText&&(a+=(f=l==null?void 0:l.text)==null?void 0:f.slice(Math.max(n,u)-u,i-u))}),a}function u1e(t,e){const r={from:0,to:t.content.size};return Eie(t,r,e)}function Nie(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,r])=>[e,r.spec.toText]))}function d1e(t,e){const r=Sr(e,t.schema),{from:n,to:i}=t.selection,s=[];t.doc.nodesBetween(n,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===r.name);return o?{...o.attrs}:{}}function kie(t,e){const r=Z0(typeof e=="string"?e:e.name,t.schema);return r==="node"?d1e(t,e):r==="mark"?bie(t,e):{}}function h1e(t,e=JSON.stringify){const r={};return t.filter(n=>{const i=e(n);return Object.prototype.hasOwnProperty.call(r,i)?!1:r[i]=!0})}function f1e(t){const e=h1e(t);return e.length===1?e:e.filter((r,n)=>!e.filter((s,o)=>o!==n).some(s=>r.oldRange.from>=s.oldRange.from&&r.oldRange.to<=s.oldRange.to&&r.newRange.from>=s.newRange.from&&r.newRange.to<=s.newRange.to))}function Cie(t){const{mapping:e,steps:r}=t,n=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=r[s];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const u=e.slice(s).map(a,-1),d=e.slice(s).map(l),h=e.invert().map(u,-1),f=e.invert().map(d);n.push({oldRange:{from:h,to:f},newRange:{from:u,to:d}})})}),f1e(n)}function uA(t,e,r){const n=[];return t===e?r.resolve(t).marks().forEach(i=>{const s=r.resolve(t),o=aA(s,i.type);o&&n.push({mark:i,...o})}):r.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||n.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),n}var p1e=(t,e,r,n=20)=>{const i=t.doc.resolve(r);let s=n,o=null;for(;s>0&&o===null;){const a=i.node(s);(a==null?void 0:a.type.name)===e?o=a:s-=1}return[o,s]};function Ig(t,e){return e.nodes[t]||e.marks[t]||null}function my(t,e,r){return Object.fromEntries(Object.entries(r).filter(([n])=>{const i=t.find(s=>s.type===e&&s.name===n);return i?i.attribute.keepOnSplit:!1}))}var m1e=(t,e=500)=>{let r="";const n=t.parentOffset;return t.parent.nodesBetween(Math.max(0,n-e),n,(i,s,o,a)=>{var l,u;const d=((u=(l=i.type.spec).toText)==null?void 0:u.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";r+=i.isAtom&&!i.isText?d:d.slice(0,Math.max(0,n-s))}),r};function $I(t,e,r={}){const{empty:n,ranges:i}=t.selection,s=e?zo(e,t.schema):null;if(n)return!!(t.storedMarks||t.selection.$from.marks()).filter(h=>s?s.name===h.type.name:!0).find(h=>yv(h.attrs,r,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:h,$to:f})=>{const p=h.pos,m=f.pos;t.doc.nodesBetween(p,m,(g,v)=>{if(!g.isText&&!g.marks.length)return;const y=Math.max(p,v),b=Math.min(m,v+g.nodeSize),w=b-y;o+=w,a.push(...g.marks.map(x=>({mark:x,from:y,to:b})))})}),o===0)return!1;const l=a.filter(h=>s?s.name===h.mark.type.name:!0).filter(h=>yv(h.mark.attrs,r,{strict:!1})).reduce((h,f)=>h+f.to-f.from,0),u=a.filter(h=>s?h.mark.type!==s&&h.mark.type.excludes(s):!0).reduce((h,f)=>h+f.to-f.from,0);return(l>0?l+u:l)>=o}function g1e(t,e,r={}){if(!e)return ol(t,null,r)||$I(t,null,r);const n=Z0(e,t.schema);return n==="node"?ol(t,e,r):n==="mark"?$I(t,e,r):!1}var y1e=(t,e)=>{const{$from:r,$to:n,$anchor:i}=t.selection;if(e){const s=eb(a=>a.type.name===e)(t.selection);if(!s)return!1;const o=t.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(n.parentOffset<n.parent.nodeSize-2||r.pos!==n.pos)},v1e=t=>{const{$from:e,$to:r}=t.selection;return!(e.parentOffset>0||e.pos!==r.pos)};function NF(t,e){return Array.isArray(e)?e.some(r=>(typeof r=="string"?r:r.name)===t.name):e}function kF(t,e){const{nodeExtensions:r}=Gd(e),n=r.find(o=>o.name===t);if(!n)return!1;const i={name:n.name,options:n.options,storage:n.storage},s=vt(Pe(n,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function tb(t,{checkChildren:e=!0,ignoreWhitespace:r=!1}={}){var n;if(r){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((n=t.text)!=null?n:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(tb(s,{ignoreWhitespace:r,checkChildren:e})||(i=!1))}),i}return!1}function Tie(t){return t instanceof Re}var jie=class Oie{constructor(e){this.position=e}static fromJSON(e){return new Oie(e.position)}toJSON(){return{position:this.position}}};function b1e(t,e){const r=e.mapping.mapResult(t.position);return{position:new jie(r.pos),mapResult:r}}function x1e(t){return new jie(t)}function w1e(t,e,r){var n;const{selection:i}=e;let s=null;if(mie(i)&&(s=i.$cursor),s){const a=(n=t.storedMarks)!=null?n:s.marks();return s.parent.type.allowsMarkType(r)&&(!!r.isInSet(a)||!a.some(u=>u.type.excludes(r)))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let u=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(r):!1;return t.doc.nodesBetween(a.pos,l.pos,(d,h,f)=>{if(u)return!1;if(d.isInline){const p=!f||f.type.allowsMarkType(r),m=!!r.isInSet(d.marks)||!d.marks.some(g=>g.type.excludes(r));u=p&&m}return!u}),u})}var S1e=(t,e={})=>({tr:r,state:n,dispatch:i})=>{const{selection:s}=r,{empty:o,ranges:a}=s,l=zo(t,n.schema);if(i)if(o){const u=bie(n,l);r.addStoredMark(l.create({...u,...e}))}else a.forEach(u=>{const d=u.$from.pos,h=u.$to.pos;n.doc.nodesBetween(d,h,(f,p)=>{const m=Math.max(p,d),g=Math.min(p+f.nodeSize,h);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&r.addMark(m,g,l.create({...y.attrs,...e}))}):r.addMark(m,g,l.create(e))})});return w1e(n,r,l)},_1e=(t,e)=>({tr:r})=>(r.setMeta(t,e),!0),E1e=(t,e={})=>({state:r,dispatch:n,chain:i})=>{const s=Sr(t,r.schema);let o;return r.selection.$anchor.sameParent(r.selection.$head)&&(o=r.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:a})=>q5(s,{...o,...e})(r)?!0:a.clearNodes()).command(({state:a})=>q5(s,{...o,...e})(a,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},N1e=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,i=Ul(t,0,n.content.size),s=Re.create(n,i);e.setSelection(s)}return!0},k1e=(t,e)=>({tr:r,state:n,dispatch:i})=>{const{selection:s}=n;let o,a;return typeof e=="number"?(o=e,a=e):e&&"from"in e&&"to"in e?(o=e.from,a=e.to):(o=s.from,a=s.to),i&&r.doc.nodesBetween(o,a,(l,u)=>{l.isText||r.setNodeMarkup(u,void 0,{...l.attrs,dir:t})}),!0},C1e=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=ze.atStart(n).from,a=ze.atEnd(n).to,l=Ul(i,o,a),u=Ul(s,o,a),d=ze.create(n,l,u);e.setSelection(d)}return!0},T1e=t=>({state:e,dispatch:r})=>{const n=Sr(t,e.schema);return S0e(n)(e,r)};function CF(t,e){const r=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(r){const n=r.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(n)}}var j1e=({keepMarks:t=!0}={})=>({tr:e,state:r,dispatch:n,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,u=i.extensionManager.attributes,d=my(u,a.node().type.name,a.node().attrs);if(s instanceof Re&&s.node.isBlock)return!a.parentOffset||!xo(o,a.pos)?!1:(n&&(t&&CF(r,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const h=l.parentOffset===l.parent.content.size,f=a.depth===0?void 0:n1e(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=h&&f?[{type:f,attrs:d}]:void 0,m=xo(e.doc,e.mapping.map(a.pos),1,p);if(!p&&!m&&xo(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(m=!0,p=f?[{type:f,attrs:d}]:void 0),n){if(m&&(s instanceof ze&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,p),f&&!h&&!a.parentOffset&&a.parent.type!==f)){const g=e.mapping.map(a.before()),v=e.doc.resolve(g);a.node(-1).canReplaceWith(v.index(),v.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}t&&CF(r,i.extensionManager.splittableMarks),e.scrollIntoView()}return m},O1e=(t,e={})=>({tr:r,state:n,dispatch:i,editor:s})=>{var o;const a=Sr(t,n.schema),{$from:l,$to:u}=n.selection,d=n.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(u))return!1;const h=l.node(-1);if(h.type!==a)return!1;const f=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let y=X.empty;const b=l.index(-1)?1:l.index(-2)?2:3;for(let N=l.depth-b;N>=l.depth-3;N-=1)y=X.from(l.node(N).copy(y));const w=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,x={...my(f,l.node().type.name,l.node().attrs),...e},S=((o=a.contentMatch.defaultType)==null?void 0:o.createAndFill(x))||void 0;y=y.append(X.from(a.createAndFill(null,S)||void 0));const _=l.before(l.depth-(b-1));r.replace(_,l.after(-w),new ve(y,4-b,0));let E=-1;r.doc.nodesBetween(_,r.doc.content.size,(N,T)=>{if(E>-1)return!1;N.isTextblock&&N.content.size===0&&(E=T+1)}),E>-1&&r.setSelection(ze.near(r.doc.resolve(E))),r.scrollIntoView()}return!0}const p=u.pos===l.end()?h.contentMatchAt(0).defaultType:null,m={...my(f,h.type.name,h.attrs),...e},g={...my(f,l.node().type.name,l.node().attrs),...e};r.delete(l.pos,u.pos);const v=p?[{type:a,attrs:m},{type:p,attrs:g}]:[{type:a,attrs:m}];if(!xo(r.doc,l.pos,2))return!1;if(i){const{selection:y,storedMarks:b}=n,{splittableMarks:w}=s.extensionManager,x=b||y.$to.parentOffset&&y.$from.marks();if(r.split(l.pos,2,v).scrollIntoView(),!x||!i)return!0;const S=x.filter(_=>w.includes(_.type.name));r.ensureMarks(S)}return!0},t1=(t,e)=>{const r=eb(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(Math.max(0,r.pos-1)).before(r.depth);if(n===void 0)return!0;const i=t.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&fl(t.doc,r.pos)&&t.join(r.pos),!0},r1=(t,e)=>{const r=eb(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(r.start).after(r.depth);if(n===void 0)return!0;const i=t.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&fl(t.doc,n)&&t.join(n),!0},P1e=(t,e,r,n={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:u,can:d})=>{const{extensions:h,splittableMarks:f}=i.extensionManager,p=Sr(t,o.schema),m=Sr(e,o.schema),{selection:g,storedMarks:v}=o,{$from:y,$to:b}=g,w=y.blockRange(b),x=v||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;const S=eb(_=>kF(_.type.name,h))(g);if(w.depth>=1&&S&&w.depth-S.depth<=1){if(S.node.type===p)return u.liftListItem(m);if(kF(S.node.type.name,h)&&p.validContent(S.node.content)&&a)return l().command(()=>(s.setNodeMarkup(S.pos,p),!0)).command(()=>t1(s,p)).command(()=>r1(s,p)).run()}return!r||!x||!a?l().command(()=>d().wrapInList(p,n)?!0:u.clearNodes()).wrapInList(p,n).command(()=>t1(s,p)).command(()=>r1(s,p)).run():l().command(()=>{const _=d().wrapInList(p,n),E=x.filter(N=>f.includes(N.type.name));return s.ensureMarks(E),_?!0:u.clearNodes()}).wrapInList(p,n).command(()=>t1(s,p)).command(()=>r1(s,p)).run()},I1e=(t,e={},r={})=>({state:n,commands:i})=>{const{extendEmptyMarkRange:s=!1}=r,o=zo(t,n.schema);return $I(n,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},R1e=(t,e,r={})=>({state:n,commands:i})=>{const s=Sr(t,n.schema),o=Sr(e,n.schema),a=ol(n,s,r);let l;return n.selection.$anchor.sameParent(n.selection.$head)&&(l=n.selection.$anchor.parent.attrs),a?i.setNode(o,l):i.setNode(s,{...l,...r})},M1e=(t,e={})=>({state:r,commands:n})=>{const i=Sr(t,r.schema);return ol(r,i,e)?n.lift(i):n.wrapIn(i,e)},A1e=()=>({state:t,dispatch:e})=>{const r=t.plugins;for(let n=0;n<r.length;n+=1){const i=r[n];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},D1e=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,{empty:n,ranges:i}=r;return n||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},$1e=(t,e={})=>({tr:r,state:n,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=r,l=zo(t,n.schema),{$from:u,empty:d,ranges:h}=a;if(!i)return!0;if(d&&o){let{from:f,to:p}=a;const m=(s=u.marks().find(v=>v.type===l))==null?void 0:s.attrs,g=aA(u,l,m);g&&(f=g.from,p=g.to),r.removeMark(f,p,l)}else h.forEach(f=>{r.removeMark(f.$from.pos,f.$to.pos,l)});return r.removeStoredMark(l),!0},F1e=t=>({tr:e,state:r,dispatch:n})=>{const{selection:i}=r;let s,o;return typeof t=="number"?(s=t,o=t):t&&"from"in t&&"to"in t?(s=t.from,o=t.to):(s=i.from,o=i.to),n&&e.doc.nodesBetween(s,o,(a,l)=>{if(a.isText)return;const u={...a.attrs};delete u.dir,e.setNodeMarkup(l,void 0,u)}),!0},q1e=(t,e={})=>({tr:r,state:n,dispatch:i})=>{let s=null,o=null;const a=Z0(typeof t=="string"?t:t.name,n.schema);if(!a)return!1;a==="node"&&(s=Sr(t,n.schema)),a==="mark"&&(o=zo(t,n.schema));let l=!1;return r.selection.ranges.forEach(u=>{const d=u.$from.pos,h=u.$to.pos;let f,p,m,g;r.selection.empty?n.doc.nodesBetween(d,h,(v,y)=>{s&&s===v.type&&(l=!0,m=Math.max(y,d),g=Math.min(y+v.nodeSize,h),f=y,p=v)}):n.doc.nodesBetween(d,h,(v,y)=>{y<d&&s&&s===v.type&&(l=!0,m=Math.max(y,d),g=Math.min(y+v.nodeSize,h),f=y,p=v),y>=d&&y<=h&&(s&&s===v.type&&(l=!0,i&&r.setNodeMarkup(y,void 0,{...v.attrs,...e})),o&&v.marks.length&&v.marks.forEach(b=>{if(o===b.type&&(l=!0,i)){const w=Math.max(y,d),x=Math.min(y+v.nodeSize,h);r.addMark(w,x,o.create({...b.attrs,...e}))}}))}),p&&(f!==void 0&&i&&r.setNodeMarkup(f,void 0,{...p.attrs,...e}),o&&p.marks.length&&p.marks.forEach(v=>{o===v.type&&i&&r.addMark(m,g,o.create({...v.attrs,...e}))}))}),l},L1e=(t,e={})=>({state:r,dispatch:n})=>{const i=Sr(t,r.schema);return m0e(i,e)(r,n)},B1e=(t,e={})=>({state:r,dispatch:n})=>{const i=Sr(t,r.schema);return g0e(i,e)(r,n)},z1e=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const r=this.callbacks[t];return r&&r.forEach(n=>n.apply(this,e)),this}off(t,e){const r=this.callbacks[t];return r&&(e?this.callbacks[t]=r.filter(n=>n!==e):delete this.callbacks[t]),this}once(t,e){const r=(...n)=>{this.off(t,r),e.apply(this,n)};return this.on(t,r)}removeAllListeners(){this.callbacks={}}},rb=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},V1e=(t,e)=>{if(oA(e))return e.exec(t);const r=e(t);if(!r)return null;const n=[r.text];return n.index=r.index,n.input=t,n.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(r.replaceWith)),n};function Rg(t){var e;const{editor:r,from:n,to:i,text:s,rules:o,plugin:a}=t,{view:l}=r;if(l.composing)return!1;const u=l.state.doc.resolve(n);if(u.parent.type.spec.code||(e=u.nodeBefore||u.nodeAfter)!=null&&e.marks.find(f=>f.type.spec.code))return!1;let d=!1;const h=m1e(u)+s;return o.forEach(f=>{if(d)return;const p=V1e(h,f.find);if(!p)return;const m=l.state.tr,g=X0({state:l.state,transaction:m}),v={from:n-(p[0].length-s.length),to:i},{commands:y,chain:b,can:w}=new J0({editor:r,state:g});f.handler({state:g,range:v,match:p,commands:y,chain:b,can:w})===null||!m.steps.length||(f.undoable&&m.setMeta(a,{transform:m,from:n,to:i,text:s}),l.dispatch(m),d=!0)}),d}function W1e(t){const{editor:e,rules:r}=t,n=new Yt({state:{init(){return null},apply(i,s,o){const a=i.getMeta(n);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:d}=l;typeof d=="string"?d=d:d=cA(X.from(d),o.schema);const{from:h}=l,f=h+d.length;Rg({editor:e,from:h,to:f,text:d,rules:r,plugin:n})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return Rg({editor:e,from:s,to:o,text:a,rules:r,plugin:n})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Rg({editor:e,from:s.pos,to:s.pos,text:"",rules:r,plugin:n})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?Rg({editor:e,from:o.pos,to:o.pos,text:`
`,rules:r,plugin:n}):!1}},isInputRules:!0});return n}function U1e(t){return Object.prototype.toString.call(t).slice(8,-1)}function Mg(t){return U1e(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Pie(t,e){const r={...t};return Mg(t)&&Mg(e)&&Object.keys(e).forEach(n=>{Mg(e[n])&&Mg(t[n])?r[n]=Pie(t[n],e[n]):r[n]=e[n]}),r}var dA=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...vt(Pe(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...vt(Pe(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>Pie(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},Qc=class Iie extends dA{constructor(){super(...arguments),this.type="mark"}static create(e={}){const r=typeof e=="function"?e():e;return new Iie(r)}static handleExit({editor:e,mark:r}){const{tr:n}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(u=>(u==null?void 0:u.type.name)===r.name))return!1;const l=o.find(u=>(u==null?void 0:u.type.name)===r.name);return l&&n.removeStoredMark(l),n.insertText(" ",i.pos),e.view.dispatch(n),!0}return!1}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function H1e(t){return typeof t=="number"}var K1e=class{constructor(t){this.find=t.find,this.handler=t.handler}},G1e=(t,e,r)=>{if(oA(e))return[...t.matchAll(e)];const n=e(t,r);return n?n.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function Y1e(t){const{editor:e,state:r,from:n,to:i,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:u,can:d}=new J0({editor:e,state:r}),h=[];return r.doc.nodesBetween(n,i,(p,m)=>{var g,v,y,b,w;if((v=(g=p.type)==null?void 0:g.spec)!=null&&v.code||!(p.isText||p.isTextblock||p.isInline))return;const x=(w=(b=(y=p.content)==null?void 0:y.size)!=null?b:p.nodeSize)!=null?w:0,S=Math.max(n,m),_=Math.min(i,m+x);if(S>=_)return;const E=p.isText?p.text||"":p.textBetween(S-m,_-m,void 0,"");G1e(E,s.find,o).forEach(T=>{if(T.index===void 0)return;const j=S+T.index+1,P=j+T[0].length,O={from:r.tr.mapping.map(j),to:r.tr.mapping.map(P)},C=s.handler({state:r,range:O,match:T,commands:l,chain:u,can:d,pasteEvent:o,dropEvent:a});h.push(C)})}),h.every(p=>p!==null)}var Ag=null,Q1e=t=>{var e;const r=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=r.clipboardData)==null||e.setData("text/html",t),r};function X1e(t){const{editor:e,rules:r}=t;let n=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:d,from:h,to:f,rule:p,pasteEvt:m})=>{const g=d.tr,v=X0({state:d,transaction:g});if(!(!Y1e({editor:e,state:v,from:Math.max(h-1,0),to:f.b-1,rule:p,pasteEvent:m,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return r.map(d=>new Yt({view(h){const f=m=>{var g;n=(g=h.dom.parentElement)!=null&&g.contains(m.target)?h.dom.parentElement:null,n&&(Ag=e)},p=()=>{Ag&&(Ag=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(h,f)=>{if(s=n===h.dom.parentElement,a=f,!s){const p=Ag;p!=null&&p.isEditable&&setTimeout(()=>{const m=p.state.selection;m&&p.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(h,f)=>{var p;const m=(p=f.clipboardData)==null?void 0:p.getData("text/html");return o=f,i=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(h,f,p)=>{const m=h[0],g=m.getMeta("uiEvent")==="paste"&&!i,v=m.getMeta("uiEvent")==="drop"&&!s,y=m.getMeta("applyPasteRules"),b=!!y;if(!g&&!v&&!b)return;if(b){let{text:S}=y;typeof S=="string"?S=S:S=cA(X.from(S),p.schema);const{from:_}=y,E=_+S.length,N=Q1e(S);return l({rule:d,state:p,from:_,to:{b:E},pasteEvt:N})}const w=f.doc.content.findDiffStart(p.doc.content),x=f.doc.content.findDiffEnd(p.doc.content);if(!(!H1e(w)||!x||w===x.b))return l({rule:d,state:p,from:w,to:x,pasteEvt:o})}}))}var nb=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=_ie(t),this.schema=l1e(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Ig(e.name,this.schema)},n=Pe(e,"addCommands",r);return n?{...t,...n()}:t},{})}get plugins(){const{editor:t}=this;return bv([...this.extensions].reverse()).flatMap(n=>{const i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Ig(n.name,this.schema)},s=[],o=Pe(n,"addKeyboardShortcuts",i);let a={};if(n.type==="mark"&&Pe(n,"exitable",i)&&(a.ArrowRight=()=>Qc.handleExit({editor:t,mark:n})),o){const f=Object.fromEntries(Object.entries(o()).map(([p,m])=>[p,()=>m({editor:t})]));a={...a,...f}}const l=dxe(a);s.push(l);const u=Pe(n,"addInputRules",i);if(NF(n,t.options.enableInputRules)&&u){const f=u();if(f&&f.length){const p=W1e({editor:t,rules:f}),m=Array.isArray(p)?p:[p];s.push(...m)}}const d=Pe(n,"addPasteRules",i);if(NF(n,t.options.enablePasteRules)&&d){const f=d();if(f&&f.length){const p=X1e({editor:t,rules:f});s.push(...p)}}const h=Pe(n,"addProseMirrorPlugins",i);if(h){const f=h();s.push(...f)}return s})}get attributes(){return Sie(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Gd(this.extensions);return Object.fromEntries(e.filter(r=>!!Pe(r,"addNodeView")).map(r=>{const n=this.attributes.filter(l=>l.type===r.name),i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:Sr(r.name,this.schema)},s=Pe(r,"addNodeView",i);if(!s)return[];const o=s();if(!o)return[];const a=(l,u,d,h,f)=>{const p=Op(l,n);return o({node:l,view:u,getPos:d,decorations:h,innerDecorations:f,editor:t,extension:r,HTMLAttributes:p})};return[r.name,a]}))}dispatchTransaction(t){const{editor:e}=this;return bv([...this.extensions].reverse()).reduceRight((n,i)=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:e,type:Ig(i.name,this.schema)},o=Pe(i,"dispatchTransaction",s);return o?a=>{o.call(s,{transaction:a,next:n})}:n},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=Gd(this.extensions);return Object.fromEntries(e.filter(r=>!!Pe(r,"addMarkView")).map(r=>{const n=this.attributes.filter(a=>a.type===r.name),i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:zo(r.name,this.schema)},s=Pe(r,"addMarkView",i);if(!s)return[];const o=(a,l,u)=>{const d=Op(a,n);return s()({mark:a,view:l,inline:u,editor:t,extension:r,HTMLAttributes:d,updateAttributes:h=>{dwe(a,t,h)}})};return[r.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var r;const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Ig(e.name,this.schema)};e.type==="mark"&&((r=vt(Pe(e,"keepOnSplit",n)))==null||r)&&this.splittableMarks.push(e.name);const i=Pe(e,"onBeforeCreate",n),s=Pe(e,"onCreate",n),o=Pe(e,"onUpdate",n),a=Pe(e,"onSelectionUpdate",n),l=Pe(e,"onTransaction",n),u=Pe(e,"onFocus",n),d=Pe(e,"onBlur",n),h=Pe(e,"onDestroy",n);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),u&&this.editor.on("focus",u),d&&this.editor.on("blur",d),h&&this.editor.on("destroy",h)})}};nb.resolve=_ie;nb.sort=bv;nb.flatten=lA;var J1e={};sA(J1e,{ClipboardTextSerializer:()=>Mie,Commands:()=>Aie,Delete:()=>Die,Drop:()=>$ie,Editable:()=>Fie,FocusEvents:()=>Lie,Keymap:()=>Bie,Paste:()=>zie,Tabindex:()=>Vie,TextDirection:()=>Wie,focusEventsPluginKey:()=>qie});var pr=class Rie extends dA{constructor(){super(...arguments),this.type="extension"}static create(e={}){const r=typeof e=="function"?e():e;return new Rie(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}},Mie=pr.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Yt({key:new Rr("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:r}=t,{doc:n,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(d=>d.$from.pos)),a=Math.max(...s.map(d=>d.$to.pos)),l=Nie(r);return Eie(n,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),Aie=pr.create({name:"commands",addCommands(){return{...fie}}}),Die=pr.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var r,n,i;const s=()=>{var o,a,l,u;if((u=(l=(a=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,t))!=null?u:t.getMeta("y-sync$"))return;const d=xie(t.before,[t,...e]);Cie(d).forEach(p=>{d.mapping.mapResult(p.oldRange.from).deletedAfter&&d.mapping.mapResult(p.oldRange.to).deletedBefore&&d.before.nodesBetween(p.oldRange.from,p.oldRange.to,(m,g)=>{const v=g+m.nodeSize-2,y=p.oldRange.from<=g&&v<=p.oldRange.to;this.editor.emit("delete",{type:"node",node:m,from:g,to:v,newFrom:d.mapping.map(g),newTo:d.mapping.map(v),deletedRange:p.oldRange,newRange:p.newRange,partial:!y,editor:this.editor,transaction:t,combinedTransform:d})})});const f=d.mapping;d.steps.forEach((p,m)=>{var g,v;if(p instanceof ds){const y=f.slice(m).map(p.from,-1),b=f.slice(m).map(p.to),w=f.invert().map(y,-1),x=f.invert().map(b),S=(g=d.doc.nodeAt(y-1))==null?void 0:g.marks.some(E=>E.eq(p.mark)),_=(v=d.doc.nodeAt(b))==null?void 0:v.marks.some(E=>E.eq(p.mark));this.editor.emit("delete",{type:"mark",mark:p.mark,from:p.from,to:p.to,deletedRange:{from:w,to:x},newRange:{from:y,to:b},partial:!!(_||S),editor:this.editor,transaction:t,combinedTransform:d})}})};(i=(n=(r=this.editor.options.coreExtensionOptions)==null?void 0:r.delete)==null?void 0:n.async)==null||i?setTimeout(s,0):s()}}),$ie=pr.create({name:"drop",addProseMirrorPlugins(){return[new Yt({key:new Rr("tiptapDrop"),props:{handleDrop:(t,e,r,n)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:r,moved:n})}}})]}}),Fie=pr.create({name:"editable",addProseMirrorPlugins(){return[new Yt({key:new Rr("editable"),props:{editable:()=>this.editor.options.editable}})]}}),qie=new Rr("focusEvents"),Lie=pr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Yt({key:qie,props:{handleDOMEvents:{focus:(e,r)=>{t.isFocused=!0;const n=t.state.tr.setMeta("focus",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1},blur:(e,r)=>{t.isFocused=!1;const n=t.state.tr.setMeta("blur",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1}}}})]}}),Bie=pr.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:u}=a,{empty:d,$anchor:h}=l,{pos:f,parent:p}=h,m=h.parent.isTextblock&&f>0?a.doc.resolve(f-1):h,g=m.parent.type.spec.isolating,v=h.pos-h.parentOffset,y=g&&m.parent.childCount===1?v===h.pos:Je.atStart(u).from===f;return!d||!p.type.isTextblock||p.textContent.length||!y||y&&h.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...n},s={...n,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return vv()||vie()?s:i},addProseMirrorPlugins(){return[new Yt({key:new Rr("clearDocument"),appendTransaction:(t,e,r)=>{if(t.some(g=>g.getMeta("composition")))return;const n=t.some(g=>g.docChanged)&&!e.doc.eq(r.doc),i=t.some(g=>g.getMeta("preventClearDocument"));if(!n||i)return;const{empty:s,from:o,to:a}=e.selection,l=Je.atStart(e.doc).from,u=Je.atEnd(e.doc).to;if(s||!(o===l&&a===u)||!tb(r.doc))return;const f=r.tr,p=X0({state:r,transaction:f}),{commands:m}=new J0({editor:this.editor,state:p});if(m.clearNodes(),!!f.steps.length)return f}})]}}),zie=pr.create({name:"paste",addProseMirrorPlugins(){return[new Yt({key:new Rr("tiptapPaste"),props:{handlePaste:(t,e,r)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:r})}}})]}}),Vie=pr.create({name:"tabindex",addProseMirrorPlugins(){return[new Yt({key:new Rr("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),Wie=pr.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=Gd(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const r=e.getAttribute("dir");return r&&(r==="ltr"||r==="rtl"||r==="auto")?r:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new Yt({key:new Rr("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),Z1e=class Mu{constructor(e,r,n=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=r,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let r=this.from,n=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}r=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:r,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),r=this.resolvedPos.doc.resolve(e);return new Mu(r,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Mu(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Mu(e,this.editor)}get children(){const e=[];return this.node.content.forEach((r,n)=>{const i=r.isBlock&&!r.isTextblock,s=r.isAtom&&!r.isText,o=this.pos+n+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(o);if(!i&&a.depth<=this.depth)return;const l=new Mu(a,this.editor,i,i?r:null);i&&(l.actualDepth=this.depth+1),e.push(new Mu(a,this.editor,i,i?r:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,r={}){let n=null,i=this.parent;for(;i&&!n;){if(i.node.type.name===e)if(Object.keys(r).length>0){const s=i.node.attrs,o=Object.keys(r);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==r[l])break}}else n=i;i=i.parent}return n}querySelector(e,r={}){return this.querySelectorAll(e,r,!0)[0]||null}querySelectorAll(e,r={},n=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(r);return this.children.forEach(o=>{n&&i.length>0||(o.node.type.name===e&&s.every(l=>r[l]===o.node.attrs[l])&&i.push(o),!(n&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,r,n))))}),i}setAttribute(e){const{tr:r}=this.editor.state;r.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(r)}},ewe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function twe(t,e,r){const n=document.querySelector("style[data-tiptap-style]");if(n!==null)return n;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var rwe=class extends z1e{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:b1e,createMappablePosition:x1e},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:i,moved:s})=>this.options.onDrop(n,i,s)),this.on("paste",({event:n,slice:i})=>this.options.onPaste(n,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),r=gie(e,this.options.autofocus);this.editorState=Yu.create({doc:e,schema:this.schema,selection:r||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=twe(ewe,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const r=wie(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let r=e;if([].concat(t).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;r=r.filter(o=>!o.key.startsWith(s))}),e.length===r.length)return;const n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}createExtensionManager(){var t,e;const n=[...this.options.enableCoreExtensions?[Fie,Mie.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),Aie,Lie,Bie,Vie,$ie,zie,Die,Wie.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new nb(n,this)}createCommandManager(){this.commandManager=new J0({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=DI(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(r=>r.name!=="collaboration"),this.createExtensionManager()}}),t=DI(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:r}=this.options,n=e.dispatchTransaction||this.dispatchTransaction.bind(this),i=r?this.extensionManager.dispatchTransaction(n):n;this.editorView=new die(t,{...e,attributes:{role:"textbox",...e==null?void 0:e.attributes},dispatchTransaction:i,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.prependClass(),this.injectCSS();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(u=>{var d;return(d=this.capturedTransaction)==null?void 0:d.step(u)});return}const{state:e,transactions:r}=this.state.applyTransaction(t),n=!this.state.selection.eq(e.selection),i=r.includes(t),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:r.slice(1)}),n&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=r.findLast(u=>u.getMeta("focus")||u.getMeta("blur")),a=o==null?void 0:o.getMeta("focus"),l=o==null?void 0:o.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:o}),l&&this.emit("blur",{editor:this,event:l.event,transaction:o}),!(t.getMeta("preventUpdate")||!r.some(u=>u.docChanged)||s.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:r.slice(1)})}getAttributes(t){return kie(this.state,t)}isActive(t,e){const r=typeof t=="string"?t:null,n=typeof t=="string"?e:t;return g1e(this.state,r,n)}getJSON(){return this.state.doc.toJSON()}getHTML(){return cA(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:r={}}=t||{};return u1e(this.state.doc,{blockSeparator:e,textSerializers:{...Nie(this.schema),...r}})}get isEmpty(){return tb(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelector(t,e))||null}$nodes(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new Z1e(e,this)}get $doc(){return this.$pos(0)}};function Yd(t){return new rb({find:t.find,handler:({state:e,range:r,match:n})=>{const i=vt(t.getAttributes,void 0,n);if(i===!1||i===null)return null;const{tr:s}=e,o=n[n.length-1],a=n[0];if(o){const l=a.search(/\S/),u=r.from+a.indexOf(o),d=u+o.length;if(uA(r.from,r.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===t.type&&g!==p.mark.type)).filter(p=>p.to>u).length)return null;d<r.to&&s.delete(d,r.to),u>r.from&&s.delete(r.from+l,u);const f=r.from+l+o.length;s.addMark(r.from+l,f,t.type.create(i||{})),s.removeStoredMark(t.type)}},undoable:t.undoable})}function nwe(t){return new rb({find:t.find,handler:({state:e,range:r,match:n})=>{const i=vt(t.getAttributes,void 0,n)||{},{tr:s}=e,o=r.from;let a=r.to;const l=t.type.create(i);if(n[1]){const u=n[0].lastIndexOf(n[1]);let d=o+u;d>a?d=a:a=d+n[1].length;const h=n[0][n[0].length-1];s.insertText(h,o+n[0].length-1),s.replaceWith(d,a,l)}else if(n[0]){const u=t.type.isInline?o:o-1;s.insert(u,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()},undoable:t.undoable})}function FI(t){return new rb({find:t.find,handler:({state:e,range:r,match:n})=>{const i=e.doc.resolve(r.from),s=vt(t.getAttributes,void 0,n)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(r.from,r.to).setBlockType(r.from,r.from,t.type,s)},undoable:t.undoable})}function Qd(t){return new rb({find:t.find,handler:({state:e,range:r,match:n,chain:i})=>{const s=vt(t.getAttributes,void 0,n)||{},o=e.tr.delete(r.from,r.to),l=o.doc.resolve(r.from).blockRange(),u=l&&VM(l,t.type,s);if(!u)return null;if(o.wrap(l,u),t.keepMarks&&t.editor){const{selection:h,storedMarks:f}=e,{splittableMarks:p}=t.editor.extensionManager,m=f||h.$to.parentOffset&&h.$from.marks();if(m){const g=m.filter(v=>p.includes(v.type.name));o.ensureMarks(g)}}if(t.keepAttributes){const h=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(h,s).run()}const d=o.doc.resolve(r.from-1).nodeBefore;d&&d.type===t.type&&fl(o.doc,r.from-1)&&(!t.joinPredicate||t.joinPredicate(n,d))&&o.join(r.from-1)},undoable:t.undoable})}function iwe(t,e){const{selection:r}=t,{$from:n}=r;if(r instanceof Re){const s=n.index();return n.parent.canReplaceWith(s,s+1,e)}let i=n.depth;for(;i>=0;){const s=n.index(i);if(n.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}var swe={};sA(swe,{createAtomBlockMarkdownSpec:()=>owe,createBlockMarkdownSpec:()=>awe,createInlineMarkdownSpec:()=>uwe,parseAttributes:()=>hA,parseIndentedBlocks:()=>qI,renderNestedMarkdownContent:()=>pA,serializeAttributes:()=>fA});function hA(t){if(!(t!=null&&t.trim()))return{};const e={},r=[],n=t.replace(/["']([^"']*)["']/g,u=>(r.push(u),`__QUOTED_${r.length-1}__`)),i=n.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const u=i.map(d=>d.trim().slice(1));e.class=u.join(" ")}const s=n.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(e.id=s[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(n.matchAll(o)).forEach(([,u,d])=>{var h;const f=parseInt(((h=d.match(/__QUOTED_(\d+)__/))==null?void 0:h[1])||"0",10),p=r[f];p&&(e[u]=p.slice(1,-1))});const l=n.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(d=>{d.match(/^[a-zA-Z][\w-]*$/)&&(e[d]=!0)}),e}function fA(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(n=>e.push(`.${n}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([r,n])=>{r==="class"||r==="id"||(n===!0?e.push(r):n!==!1&&n!=null&&e.push(`${r}="${String(n)}"`))}),e.join(" ")}function owe(t){const{nodeName:e,name:r,parseAttributes:n=hA,serializeAttributes:i=fA,defaultAttributes:s={},requiredAttributes:o=[],allowedAttributes:a}=t,l=r||e,u=d=>{if(!a)return d;const h={};return a.forEach(f=>{f in d&&(h[f]=d[f])}),h};return{parseMarkdown:(d,h)=>{const f={...s,...d.attributes};return h.createNode(e,f,[])},markdownTokenizer:{name:e,level:"block",start(d){var h;const f=new RegExp(`^:::${l}(?:\\s|$)`,"m"),p=(h=d.match(f))==null?void 0:h.index;return p!==void 0?p:-1},tokenize(d,h,f){const p=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),m=d.match(p);if(!m)return;const g=m[1]||"",v=n(g);if(!o.find(b=>!(b in v)))return{type:e,raw:m[0],attributes:v}}},renderMarkdown:d=>{const h=u(d.attrs||{}),f=i(h),p=f?` {${f}}`:"";return`:::${l}${p} :::`}}}function awe(t){const{nodeName:e,name:r,getContent:n,parseAttributes:i=hA,serializeAttributes:s=fA,defaultAttributes:o={},content:a="block",allowedAttributes:l}=t,u=r||e,d=h=>{if(!l)return h;const f={};return l.forEach(p=>{p in h&&(f[p]=h[p])}),f};return{parseMarkdown:(h,f)=>{let p;if(n){const g=n(h);p=typeof g=="string"?[{type:"text",text:g}]:g}else a==="block"?p=f.parseChildren(h.tokens||[]):p=f.parseInline(h.tokens||[]);const m={...o,...h.attributes};return f.createNode(e,m,p)},markdownTokenizer:{name:e,level:"block",start(h){var f;const p=new RegExp(`^:::${u}`,"m"),m=(f=h.match(p))==null?void 0:f.index;return m!==void 0?m:-1},tokenize(h,f,p){var m;const g=new RegExp(`^:::${u}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),v=h.match(g);if(!v)return;const[y,b=""]=v,w=i(b);let x=1;const S=y.length;let _="";const E=/^:::([\w-]*)(\s.*)?/gm,N=h.slice(S);for(E.lastIndex=0;;){const T=E.exec(N);if(T===null)break;const j=T.index,P=T[1];if(!((m=T[2])!=null&&m.endsWith(":::"))){if(P)x+=1;else if(x-=1,x===0){const O=N.slice(0,j);_=O.trim();const C=h.slice(0,S+j+T[0].length);let D=[];if(_)if(a==="block")for(D=p.blockTokens(O),D.forEach(F=>{F.text&&(!F.tokens||F.tokens.length===0)&&(F.tokens=p.inlineTokens(F.text))});D.length>0;){const F=D[D.length-1];if(F.type==="paragraph"&&(!F.text||F.text.trim()===""))D.pop();else break}else D=p.inlineTokens(_);return{type:e,raw:C,attributes:w,content:_,tokens:D}}}}}},renderMarkdown:(h,f)=>{const p=d(h.attrs||{}),m=s(p),g=m?` {${m}}`:"",v=f.renderChildren(h.content||[],`

`);return`:::${u}${g}

${v}

:::`}}}function lwe(t){if(!t.trim())return{};const e={},r=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let n=r.exec(t);for(;n!==null;){const[,i,s,o]=n;e[i]=s||o,n=r.exec(t)}return e}function cwe(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,r])=>`${e}="${r}"`).join(" ")}function uwe(t){const{nodeName:e,name:r,getContent:n,parseAttributes:i=lwe,serializeAttributes:s=cwe,defaultAttributes:o={},selfClosing:a=!1,allowedAttributes:l}=t,u=r||e,d=f=>{if(!l)return f;const p={};return l.forEach(m=>{const g=typeof m=="string"?m:m.name,v=typeof m=="string"?void 0:m.skipIfDefault;if(g in f){const y=f[g];if(v!==void 0&&y===v)return;p[g]=y}}),p},h=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(f,p)=>{const m={...o,...f.attributes};if(a)return p.createNode(e,m);const g=n?n(f):f.content||"";return g?p.createNode(e,m,[p.createTextNode(g)]):p.createNode(e,m,[])},markdownTokenizer:{name:e,level:"inline",start(f){const p=a?new RegExp(`\\[${h}\\s*[^\\]]*\\]`):new RegExp(`\\[${h}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${h}\\]`),m=f.match(p),g=m==null?void 0:m.index;return g!==void 0?g:-1},tokenize(f,p,m){const g=a?new RegExp(`^\\[${h}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${h}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${h}\\]`),v=f.match(g);if(!v)return;let y="",b="";if(a){const[,x]=v;b=x}else{const[,x,S]=v;b=x,y=S||""}const w=i(b.trim());return{type:e,raw:v[0],content:y.trim(),attributes:w}}},renderMarkdown:f=>{let p="";n?p=n(f):f.content&&f.content.length>0&&(p=f.content.filter(y=>y.type==="text").map(y=>y.text).join(""));const m=d(f.attrs||{}),g=s(m),v=g?` ${g}`:"";return a?`[${u}${v}]`:`[${u}${v}]${p}[/${u}]`}}}function qI(t,e,r){var n,i,s,o;const a=t.split(`
`),l=[];let u="",d=0;const h=e.baseIndentSize||2;for(;d<a.length;){const f=a[d],p=f.match(e.itemPattern);if(!p){if(l.length>0)break;if(f.trim()===""){d+=1,u=`${u}${f}
`;continue}else return}const m=e.extractItemData(p),{indentLevel:g,mainContent:v}=m;u=`${u}${f}
`;const y=[v];for(d+=1;d<a.length;){const S=a[d];if(S.trim()===""){const E=a.slice(d+1).findIndex(j=>j.trim()!=="");if(E===-1)break;if((((i=(n=a[d+1+E].match(/^(\s*)/))==null?void 0:n[1])==null?void 0:i.length)||0)>g){y.push(S),u=`${u}${S}
`,d+=1;continue}else break}if((((o=(s=S.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:o.length)||0)>g)y.push(S),u=`${u}${S}
`,d+=1;else break}let b;const w=y.slice(1);if(w.length>0){const S=w.map(_=>_.slice(g+h)).join(`
`);S.trim()&&(e.customNestedParser?b=e.customNestedParser(S):b=r.blockTokens(S))}const x=e.createToken(m,b);l.push(x)}if(l.length!==0)return{items:l,raw:u}}function pA(t,e,r,n){if(!t||!Array.isArray(t.content))return"";const i=typeof r=="function"?r(n):r,[s,...o]=t.content,a=e.renderChildren([s]),l=[`${i}${a}`];return o&&o.length>0&&o.forEach(u=>{const d=e.renderChildren([u]);if(d){const h=d.split(`
`).map(f=>f?e.indent(f):"").join(`
`);l.push(h)}}),l.join(`
`)}function dwe(t,e,r={}){const{state:n}=e,{doc:i,tr:s}=n,o=t;i.descendants((a,l)=>{const u=s.mapping.map(l),d=s.mapping.map(l)+a.nodeSize;let h=null;if(a.marks.forEach(p=>{if(p!==o)return!1;h=p}),!h)return;let f=!1;if(Object.keys(r).forEach(p=>{r[p]!==h.attrs[p]&&(f=!0)}),f){const p=t.type.create({...t.attrs,...r});s.removeMark(u,d,t.type),s.addMark(u,d,p)}}),s.docChanged&&e.view.dispatch(s)}var wi=class Uie extends dA{constructor(){super(...arguments),this.type="node"}static create(e={}){const r=typeof e=="function"?e():e;return new Uie(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function Dc(t){return new K1e({find:t.find,handler:({state:e,range:r,match:n,pasteEvent:i})=>{const s=vt(t.getAttributes,void 0,n,i);if(s===!1||s===null)return null;const{tr:o}=e,a=n[n.length-1],l=n[0];let u=r.to;if(a){const d=l.search(/\S/),h=r.from+l.indexOf(a),f=h+a.length;if(uA(r.from,r.to,e.doc).filter(m=>m.mark.type.excluded.find(v=>v===t.type&&v!==m.mark.type)).filter(m=>m.to>h).length)return null;f<r.to&&o.delete(f,r.to),h>r.from&&o.delete(r.from+d,h),u=r.from+d+a.length,o.addMark(r.from+d,u,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:hwe,getOwnPropertySymbols:fwe}=Object,{hasOwnProperty:pwe}=Object.prototype;function n1(t,e){return function(n,i,s){return t(n,i,s)&&e(n,i,s)}}function Dg(t){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,i);const{cache:s}=i,o=s.get(r),a=s.get(n);if(o&&a)return o===n&&a===r;s.set(r,n),s.set(n,r);const l=t(r,n,i);return s.delete(r),s.delete(n),l}}function mwe(t){return t!=null?t[Symbol.toStringTag]:void 0}function TF(t){return hwe(t).concat(fwe(t))}const gwe=Object.hasOwn||((t,e)=>pwe.call(t,e));function Xc(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const ywe="__v",vwe="__o",bwe="_owner",{getOwnPropertyDescriptor:jF,keys:OF}=Object;function xwe(t,e){return t.byteLength===e.byteLength&&xv(new Uint8Array(t),new Uint8Array(e))}function wwe(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function Swe(t,e){return t.byteLength===e.byteLength&&xv(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function _we(t,e){return Xc(t.getTime(),e.getTime())}function Ewe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function Nwe(t,e){return t===e}function PF(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),s=t.entries();let o,a,l=0;for(;(o=s.next())&&!o.done;){const u=e.entries();let d=!1,h=0;for(;(a=u.next())&&!a.done;){if(i[h]){h++;continue}const f=o.value,p=a.value;if(r.equals(f[0],p[0],l,h,t,e,r)&&r.equals(f[1],p[1],f[0],p[0],t,e,r)){d=i[h]=!0;break}h++}if(!d)return!1;l++}return!0}const kwe=Xc;function Cwe(t,e,r){const n=OF(t);let i=n.length;if(OF(e).length!==i)return!1;for(;i-- >0;)if(!Hie(t,e,r,n[i]))return!1;return!0}function cf(t,e,r){const n=TF(t);let i=n.length;if(TF(e).length!==i)return!1;let s,o,a;for(;i-- >0;)if(s=n[i],!Hie(t,e,r,s)||(o=jF(t,s),a=jF(e,s),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function Twe(t,e){return Xc(t.valueOf(),e.valueOf())}function jwe(t,e){return t.source===e.source&&t.flags===e.flags}function IF(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),s=t.values();let o,a;for(;(o=s.next())&&!o.done;){const l=e.values();let u=!1,d=0;for(;(a=l.next())&&!a.done;){if(!i[d]&&r.equals(o.value,a.value,o.value,a.value,t,e,r)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function xv(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function Owe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function Hie(t,e,r,n){return(n===bwe||n===vwe||n===ywe)&&(t.$$typeof||e.$$typeof)?!0:gwe(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const Pwe="[object ArrayBuffer]",Iwe="[object Arguments]",Rwe="[object Boolean]",Mwe="[object DataView]",Awe="[object Date]",Dwe="[object Error]",$we="[object Map]",Fwe="[object Number]",qwe="[object Object]",Lwe="[object RegExp]",Bwe="[object Set]",zwe="[object String]",Vwe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},Wwe="[object URL]",Uwe=Object.prototype.toString;function Hwe({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:o,areNumbersEqual:a,areObjectsEqual:l,arePrimitiveWrappersEqual:u,areRegExpsEqual:d,areSetsEqual:h,areTypedArraysEqual:f,areUrlsEqual:p,unknownTagComparators:m}){return function(v,y,b){if(v===y)return!0;if(v==null||y==null)return!1;const w=typeof v;if(w!==typeof y)return!1;if(w!=="object")return w==="number"?a(v,y,b):w==="function"?s(v,y,b):!1;const x=v.constructor;if(x!==y.constructor)return!1;if(x===Object)return l(v,y,b);if(Array.isArray(v))return e(v,y,b);if(x===Date)return n(v,y,b);if(x===RegExp)return d(v,y,b);if(x===Map)return o(v,y,b);if(x===Set)return h(v,y,b);const S=Uwe.call(v);if(S===Awe)return n(v,y,b);if(S===Lwe)return d(v,y,b);if(S===$we)return o(v,y,b);if(S===Bwe)return h(v,y,b);if(S===qwe)return typeof v.then!="function"&&typeof y.then!="function"&&l(v,y,b);if(S===Wwe)return p(v,y,b);if(S===Dwe)return i(v,y,b);if(S===Iwe)return l(v,y,b);if(Vwe[S])return f(v,y,b);if(S===Pwe)return t(v,y,b);if(S===Mwe)return r(v,y,b);if(S===Rwe||S===Fwe||S===zwe)return u(v,y,b);if(m){let _=m[S];if(!_){const E=mwe(v);E&&(_=m[E])}if(_)return _(v,y,b)}return!1}}function Kwe({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:xwe,areArraysEqual:r?cf:wwe,areDataViewsEqual:Swe,areDatesEqual:_we,areErrorsEqual:Ewe,areFunctionsEqual:Nwe,areMapsEqual:r?n1(PF,cf):PF,areNumbersEqual:kwe,areObjectsEqual:r?cf:Cwe,arePrimitiveWrappersEqual:Twe,areRegExpsEqual:jwe,areSetsEqual:r?n1(IF,cf):IF,areTypedArraysEqual:r?n1(xv,cf):xv,areUrlsEqual:Owe,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const i=Dg(n.areArraysEqual),s=Dg(n.areMapsEqual),o=Dg(n.areObjectsEqual),a=Dg(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:a})}return n}function Gwe(t){return function(e,r,n,i,s,o,a){return t(e,r,a)}}function Ywe({circular:t,comparator:e,createState:r,equals:n,strict:i}){if(r)return function(a,l){const{cache:u=t?new WeakMap:void 0,meta:d}=r();return e(a,l,{cache:u,equals:n,meta:d,strict:i})};if(t)return function(a,l){return e(a,l,{cache:new WeakMap,equals:n,meta:void 0,strict:i})};const s={cache:void 0,equals:n,meta:void 0,strict:i};return function(a,l){return e(a,l,s)}}const Qwe=ml();ml({strict:!0});ml({circular:!0});ml({circular:!0,strict:!0});ml({createInternalComparator:()=>Xc});ml({strict:!0,createInternalComparator:()=>Xc});ml({circular:!0,createInternalComparator:()=>Xc});ml({circular:!0,createInternalComparator:()=>Xc,strict:!0});function ml(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:i=!1}=t,s=Kwe(t),o=Hwe(s),a=r?r(o):Gwe(o);return Ywe({circular:e,comparator:o,createState:n,equals:a,strict:i})}var Kie={exports:{}},Gie={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ib=k,Xwe=LM;function Jwe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Zwe=typeof Object.is=="function"?Object.is:Jwe,eSe=Xwe.useSyncExternalStore,tSe=ib.useRef,rSe=ib.useEffect,nSe=ib.useMemo,iSe=ib.useDebugValue;Gie.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var s=tSe(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=nSe(function(){function l(p){if(!u){if(u=!0,d=p,p=n(p),i!==void 0&&o.hasValue){var m=o.value;if(i(m,p))return h=m}return h=p}if(m=h,Zwe(d,p))return m;var g=n(p);return i!==void 0&&i(m,g)?(d=p,m):(d=p,h=g)}var u=!1,d,h,f=r===void 0?null:r;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,r,n,i]);var a=eSe(t,s[0],s[1]);return rSe(function(){o.hasValue=!0,o.value=a},[a]),iSe(a),a};Kie.exports=Gie;var sSe=Kie.exports,oSe=(...t)=>e=>{t.forEach(r=>{typeof r=="function"?r(e):r&&(r.current=e)})},aSe=({contentComponent:t})=>{const e=LM.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return c.jsx(c.Fragment,{children:Object.values(e)})};function lSe(){const t=new Set;let e={};return{subscribe(r){return t.add(r),()=>{t.delete(r)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(r,n){e={...e,[r]:jde.createPortal(n.reactElement,n.element,r)},t.forEach(i=>i())},removeRenderer(r){const n={...e};delete n[r],e=n,t.forEach(i=>i())}}}var cSe=class extends Se.Component{constructor(t){var e;super(t),this.editorContentRef=Se.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const r=this.editorContentRef.current;r.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:r}),e.contentComponent=lSe(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const r=document.createElement("div");r.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:r})}catch{}}}render(){const{editor:t,innerRef:e,...r}=this.props;return c.jsxs(c.Fragment,{children:[c.jsx("div",{ref:oSe(e,this.editorContentRef),...r}),(t==null?void 0:t.contentComponent)&&c.jsx(aSe,{contentComponent:t.contentComponent})]})}},uSe=k.forwardRef((t,e)=>{const r=Se.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Se.createElement(cSe,{key:r,innerRef:e,...t})}),dSe=Se.memo(uSe),hSe=typeof window<"u"?k.useLayoutEffect:k.useEffect,fSe=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(n=>n())},r=this.editor;return r.on("transaction",e),()=>{r.off("transaction",e)}}}};function pSe(t){var e;const[r]=k.useState(()=>new fSe(t.editor)),n=sSe.useSyncExternalStoreWithSelector(r.subscribe,r.getSnapshot,r.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:Qwe);return hSe(()=>r.watch(t.editor),[t.editor,r]),k.useDebugValue(n),n}var mSe=!1,LI=typeof window>"u",gSe=LI||!!(typeof window<"u"&&window.next),ySe=class Yie{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(r=>r())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?LI||gSe?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...n)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...n)},onBlur:(...n)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...n)},onCreate:(...n)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...n)},onDestroy:(...n)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...n)},onFocus:(...n)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...n)},onSelectionUpdate:(...n)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...n)},onTransaction:(...n)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...n)},onUpdate:(...n)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...n)},onContentError:(...n)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...n)},onDrop:(...n)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...n)},onPaste:(...n)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...n)},onDelete:(...n)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...n)}};return new rwe(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,r){return Object.keys(e).every(n=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)?!0:n==="extensions"&&e.extensions&&r.extensions?e.extensions.length!==r.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=r.extensions)==null?void 0:o[s])}):e[n]===r[n])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Yie.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((n,i)=>n===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,r=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){r&&r.setOptions(this.options.current);return}r&&!r.isDestroyed&&(r.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function vSe(t={},e=[]){const r=k.useRef(t);r.current=t;const[n]=k.useState(()=>new ySe(r)),i=LM.useSyncExternalStore(n.subscribe,n.getEditor,n.getServerSnapshot);return k.useDebugValue(i),k.useEffect(n.onRender(e)),pSe({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&s===0?0:s+1}),i}var bSe=k.createContext({editor:null});bSe.Consumer;var xSe=k.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),wSe=()=>k.useContext(xSe);Se.forwardRef((t,e)=>{const{onDragStart:r}=wSe(),n=t.as||"div";return c.jsx(n,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:r,style:{whiteSpace:"normal",...t.style}})});Se.createContext({markViewContentRef:()=>{}});var wv=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:r,...n}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,n,r]},SSe=/^\s*>\s$/,_Se=wi.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return wv("blockquote",{..._r(this.options.HTMLAttributes,t),children:wv("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const r=">",n=[];return t.content.forEach(i=>{const a=e.renderChildren([i]).split(`
`).map(l=>l.trim()===""?r:`${r} ${l}`);n.push(a.join(`
`))}),n.join(`
${r}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Qd({find:SSe,type:this.type})]}}),ESe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,NSe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,kSe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,CSe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,TSe=Qc.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return wv("strong",{..._r(this.options.HTMLAttributes,t),children:wv("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Yd({find:ESe,type:this.type}),Yd({find:kSe,type:this.type})]},addPasteRules(){return[Dc({find:NSe,type:this.type}),Dc({find:CSe,type:this.type})]}}),jSe=/(^|[^`])`([^`]+)`(?!`)$/,OSe=/(^|[^`])`([^`]+)`(?!`)/g,PSe=Qc.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",_r(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Yd({find:jSe,type:this.type})]},addPasteRules(){return[Dc({find:OSe,type:this.type})]}}),i1=4,ISe=/^```([a-z]+)?[\s\n]$/,RSe=/^~~~([a-z]+)?[\s\n]$/,MSe=wi.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:i1,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:r}=this.options;if(!r)return null;const s=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(r)).map(o=>o.replace(r,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",_r(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var r;return((r=t.raw)==null?void 0:r.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var r;let n="";const i=((r=t.attrs)==null?void 0:r.language)||"";return t.content?n=[`\`\`\`${i}`,e.renderChildren(t.content),"```"].join(`
`):n=`\`\`\`${i}

\`\`\``,n},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,r=e.pos===1;return!t||e.parent.type.name!==this.name?!1:r||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const r=(e=this.options.tabSize)!=null?e:i1,{state:n}=t,{selection:i}=n,{$from:s,empty:o}=i;if(s.parent.type!==this.type)return!1;const a=" ".repeat(r);return o?t.commands.insertContent(a):t.commands.command(({tr:l})=>{const{from:u,to:d}=i,p=n.doc.textBetween(u,d,`
`,`
`).split(`
`).map(m=>a+m).join(`
`);return l.replaceWith(u,d,n.schema.text(p)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const r=(e=this.options.tabSize)!=null?e:i1,{state:n}=t,{selection:i}=n,{$from:s,empty:o}=i;return s.parent.type!==this.type?!1:o?t.commands.command(({tr:a})=>{var l;const{pos:u}=s,d=s.start(),h=s.end(),p=n.doc.textBetween(d,h,`
`,`
`).split(`
`);let m=0,g=0;const v=u-d;for(let _=0;_<p.length;_+=1){if(g+p[_].length>=v){m=_;break}g+=p[_].length+1}const b=((l=p[m].match(/^ */))==null?void 0:l[0])||"",w=Math.min(b.length,r);if(w===0)return!0;let x=d;for(let _=0;_<m;_+=1)x+=p[_].length+1;return a.delete(x,x+w),u-x<=w&&a.setSelection(ze.create(a.doc,x)),!0}):t.commands.command(({tr:a})=>{const{from:l,to:u}=i,f=n.doc.textBetween(l,u,`
`,`
`).split(`
`).map(p=>{var m;const g=((m=p.match(/^ */))==null?void 0:m[0])||"",v=Math.min(g.length,r);return p.slice(v)}).join(`
`);return a.replaceWith(l,u,n.schema.text(f)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:r}=e,{$from:n,empty:i}=r;if(!i||n.parent.type!==this.type)return!1;const s=n.parentOffset===n.parent.nodeSize-2,o=n.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:a})=>(a.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:r,doc:n}=e,{$from:i,empty:s}=r;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:n.nodeAt(a)?t.commands.command(({tr:u})=>(u.setSelection(Je.near(n.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[FI({find:ISe,type:this.type,getAttributes:t=>({language:t[1]})}),FI({find:RSe,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Yt({key:new Rr("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const r=e.clipboardData.getData("text/plain"),n=e.clipboardData.getData("vscode-editor-data"),i=n?JSON.parse(n):void 0,s=i==null?void 0:i.mode;if(!r||!s)return!1;const{tr:o,schema:a}=t.state,l=a.text(r.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(ze.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),ASe=wi.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),DSe=wi.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",_r(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:r,editor:n})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=r;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=n.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:d})=>{if(d&&l&&o){const h=l.filter(f=>a.includes(f.type.name));u.ensureMarks(h)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),$Se=wi.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,_r(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var r;const n=(r=t.attrs)!=null&&r.level?parseInt(t.attrs.level,10):1,i="#".repeat(n);return t.content?`${i} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>FI({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),FSe=wi.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",_r(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!iwe(e,e.schema.nodes[this.name]))return!1;const{selection:r}=e,{$to:n}=r,i=t();return Tie(r)?i.insertContentAt(n.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:s,tr:o,dispatch:a})=>{if(a){const{$to:l}=o.selection,u=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?o.setSelection(ze.create(o.doc,l.pos+1)):l.nodeAfter.isBlock?o.setSelection(Re.create(o.doc,l.pos)):o.setSelection(ze.create(o.doc,l.pos));else{const d=s.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,h=d==null?void 0:d.create();h&&(o.insert(u,h),o.setSelection(ze.create(o.doc,u+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[nwe({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),qSe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,LSe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,BSe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,zSe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,VSe=Qc.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",_r(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Yd({find:qSe,type:this.type}),Yd({find:BSe,type:this.type})]},addPasteRules(){return[Dc({find:LSe,type:this.type}),Dc({find:zSe,type:this.type})]}});const WSe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",USe="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",BI="numeric",zI="ascii",VI="alpha",qf="asciinumeric",_f="alphanumeric",WI="domain",Qie="emoji",HSe="scheme",KSe="slashscheme",s1="whitespace";function GSe(t,e){return t in e||(e[t]=[]),e[t]}function Hl(t,e,r){e[BI]&&(e[qf]=!0,e[_f]=!0),e[zI]&&(e[qf]=!0,e[VI]=!0),e[qf]&&(e[_f]=!0),e[VI]&&(e[_f]=!0),e[_f]&&(e[WI]=!0),e[Qie]&&(e[WI]=!0);for(const n in e){const i=GSe(n,r);i.indexOf(t)<0&&i.push(t)}}function YSe(t,e){const r={};for(const n in e)e[n].indexOf(t)>=0&&(r[n]=!0);return r}function Kn(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Kn.groups={};Kn.prototype={accepts(){return!!this.t},go(t){const e=this,r=e.j[t];if(r)return r;for(let n=0;n<e.jr.length;n++){const i=e.jr[n][0],s=e.jr[n][1];if(s&&i.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,r,n){for(let i=0;i<t.length;i++)this.tt(t[i],e,r,n)},tr(t,e,r,n){n=n||Kn.groups;let i;return e&&e.j?i=e:(i=new Kn(e),r&&n&&Hl(e,r,n)),this.jr.push([t,i]),i},ts(t,e,r,n){let i=this;const s=t.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(t[o]);return i.tt(t[s-1],e,r,n)},tt(t,e,r,n){n=n||Kn.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const s=e;let o,a=i.go(t);if(a?(o=new Kn,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new Kn,s){if(n)if(o.t&&typeof o.t=="string"){const l=Object.assign(YSe(o.t,n),r);Hl(s,l,n)}else r&&Hl(s,r,n);o.t=s}return i.j[t]=o,o}};const Xe=(t,e,r,n,i)=>t.ta(e,r,n,i),Zt=(t,e,r,n,i)=>t.tr(e,r,n,i),RF=(t,e,r,n,i)=>t.ts(e,r,n,i),te=(t,e,r,n,i)=>t.tt(e,r,n,i),io="WORD",UI="UWORD",Xie="ASCIINUMERICAL",Jie="ALPHANUMERICAL",Pp="LOCALHOST",HI="TLD",KI="UTLD",gy="SCHEME",Au="SLASH_SCHEME",mA="NUM",GI="WS",gA="NL",Lf="OPENBRACE",Bf="CLOSEBRACE",Sv="OPENBRACKET",_v="CLOSEBRACKET",Ev="OPENPAREN",Nv="CLOSEPAREN",kv="OPENANGLEBRACKET",Cv="CLOSEANGLEBRACKET",Tv="FULLWIDTHLEFTPAREN",jv="FULLWIDTHRIGHTPAREN",Ov="LEFTCORNERBRACKET",Pv="RIGHTCORNERBRACKET",Iv="LEFTWHITECORNERBRACKET",Rv="RIGHTWHITECORNERBRACKET",Mv="FULLWIDTHLESSTHAN",Av="FULLWIDTHGREATERTHAN",Dv="AMPERSAND",$v="APOSTROPHE",Fv="ASTERISK",la="AT",qv="BACKSLASH",Lv="BACKTICK",Bv="CARET",ma="COLON",yA="COMMA",zv="DOLLAR",Es="DOT",Vv="EQUALS",vA="EXCLAMATION",ji="HYPHEN",zf="PERCENT",Wv="PIPE",Uv="PLUS",Hv="POUND",Vf="QUERY",bA="QUOTE",Zie="FULLWIDTHMIDDLEDOT",xA="SEMI",Ns="SLASH",Wf="TILDE",Kv="UNDERSCORE",ese="EMOJI",Gv="SYM";var tse=Object.freeze({__proto__:null,ALPHANUMERICAL:Jie,AMPERSAND:Dv,APOSTROPHE:$v,ASCIINUMERICAL:Xie,ASTERISK:Fv,AT:la,BACKSLASH:qv,BACKTICK:Lv,CARET:Bv,CLOSEANGLEBRACKET:Cv,CLOSEBRACE:Bf,CLOSEBRACKET:_v,CLOSEPAREN:Nv,COLON:ma,COMMA:yA,DOLLAR:zv,DOT:Es,EMOJI:ese,EQUALS:Vv,EXCLAMATION:vA,FULLWIDTHGREATERTHAN:Av,FULLWIDTHLEFTPAREN:Tv,FULLWIDTHLESSTHAN:Mv,FULLWIDTHMIDDLEDOT:Zie,FULLWIDTHRIGHTPAREN:jv,HYPHEN:ji,LEFTCORNERBRACKET:Ov,LEFTWHITECORNERBRACKET:Iv,LOCALHOST:Pp,NL:gA,NUM:mA,OPENANGLEBRACKET:kv,OPENBRACE:Lf,OPENBRACKET:Sv,OPENPAREN:Ev,PERCENT:zf,PIPE:Wv,PLUS:Uv,POUND:Hv,QUERY:Vf,QUOTE:bA,RIGHTCORNERBRACKET:Pv,RIGHTWHITECORNERBRACKET:Rv,SCHEME:gy,SEMI:xA,SLASH:Ns,SLASH_SCHEME:Au,SYM:Gv,TILDE:Wf,TLD:HI,UNDERSCORE:Kv,UTLD:KI,UWORD:UI,WORD:io,WS:GI});const eo=/[a-z]/,uf=new RegExp("\\p{L}","u"),o1=new RegExp("\\p{Emoji}","u"),to=/\d/,a1=/\s/,MF="\r",l1=`
`,QSe="",XSe="",c1="";let $g=null,Fg=null;function JSe(t=[]){const e={};Kn.groups=e;const r=new Kn;$g==null&&($g=AF(WSe)),Fg==null&&(Fg=AF(USe)),te(r,"'",$v),te(r,"{",Lf),te(r,"}",Bf),te(r,"[",Sv),te(r,"]",_v),te(r,"(",Ev),te(r,")",Nv),te(r,"<",kv),te(r,">",Cv),te(r,"",Tv),te(r,"",jv),te(r,"",Ov),te(r,"",Pv),te(r,"",Iv),te(r,"",Rv),te(r,"",Mv),te(r,"",Av),te(r,"&",Dv),te(r,"*",Fv),te(r,"@",la),te(r,"`",Lv),te(r,"^",Bv),te(r,":",ma),te(r,",",yA),te(r,"$",zv),te(r,".",Es),te(r,"=",Vv),te(r,"!",vA),te(r,"-",ji),te(r,"%",zf),te(r,"|",Wv),te(r,"+",Uv),te(r,"#",Hv),te(r,"?",Vf),te(r,'"',bA),te(r,"/",Ns),te(r,";",xA),te(r,"~",Wf),te(r,"_",Kv),te(r,"\\",qv),te(r,"",Zie);const n=Zt(r,to,mA,{[BI]:!0});Zt(n,to,n);const i=Zt(n,eo,Xie,{[qf]:!0}),s=Zt(n,uf,Jie,{[_f]:!0}),o=Zt(r,eo,io,{[zI]:!0});Zt(o,to,i),Zt(o,eo,o),Zt(i,to,i),Zt(i,eo,i);const a=Zt(r,uf,UI,{[VI]:!0});Zt(a,eo),Zt(a,to,s),Zt(a,uf,a),Zt(s,to,s),Zt(s,eo),Zt(s,uf,s);const l=te(r,l1,gA,{[s1]:!0}),u=te(r,MF,GI,{[s1]:!0}),d=Zt(r,a1,GI,{[s1]:!0});te(r,c1,d),te(u,l1,l),te(u,c1,d),Zt(u,a1,d),te(d,MF),te(d,l1),Zt(d,a1,d),te(d,c1,d);const h=Zt(r,o1,ese,{[Qie]:!0});te(h,"#"),Zt(h,o1,h),te(h,QSe,h);const f=te(h,XSe);te(f,"#"),Zt(f,o1,h);const p=[[eo,o],[to,i]],m=[[eo,null],[uf,a],[to,s]];for(let g=0;g<$g.length;g++)Zo(r,$g[g],HI,io,p);for(let g=0;g<Fg.length;g++)Zo(r,Fg[g],KI,UI,m);Hl(HI,{tld:!0,ascii:!0},e),Hl(KI,{utld:!0,alpha:!0},e),Zo(r,"file",gy,io,p),Zo(r,"mailto",gy,io,p),Zo(r,"http",Au,io,p),Zo(r,"https",Au,io,p),Zo(r,"ftp",Au,io,p),Zo(r,"ftps",Au,io,p),Hl(gy,{scheme:!0,ascii:!0},e),Hl(Au,{slashscheme:!0,ascii:!0},e),t=t.sort((g,v)=>g[0]>v[0]?1:-1);for(let g=0;g<t.length;g++){const v=t[g][0],b=t[g][1]?{[HSe]:!0}:{[KSe]:!0};v.indexOf("-")>=0?b[WI]=!0:eo.test(v)?to.test(v)?b[qf]=!0:b[zI]=!0:b[BI]=!0,RF(r,v,v,b)}return RF(r,"localhost",Pp,{ascii:!0}),r.jd=new Kn(Gv),{start:r,tokens:Object.assign({groups:e},tse)}}function rse(t,e){const r=ZSe(e.replace(/[A-Z]/g,a=>a.toLowerCase())),n=r.length,i=[];let s=0,o=0;for(;o<n;){let a=t,l=null,u=0,d=null,h=-1,f=-1;for(;o<n&&(l=a.go(r[o]));)a=l,a.accepts()?(h=0,f=0,d=a):h>=0&&(h+=r[o].length,f++),u+=r[o].length,s+=r[o].length,o++;s-=h,o-=f,u-=h,i.push({t:d.t,v:e.slice(s-u,s),s:s-u,e:s})}return i}function ZSe(t){const e=[],r=t.length;let n=0;for(;n<r;){let i=t.charCodeAt(n),s,o=i<55296||i>56319||n+1===r||(s=t.charCodeAt(n+1))<56320||s>57343?t[n]:t.slice(n,n+2);e.push(o),n+=o.length}return e}function Zo(t,e,r,n,i){let s;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];t.j[l]?s=t.j[l]:(s=new Kn(n),s.jr=i.slice(),t.j[l]=s),t=s}return s=new Kn(r),s.jr=i.slice(),t.j[e[o-1]]=s,s}function AF(t){const e=[],r=[];let n=0,i="0123456789";for(;n<t.length;){let s=0;for(;i.indexOf(t[n+s])>=0;)s++;if(s>0){e.push(r.join(""));for(let o=parseInt(t.substring(n,n+s),10);o>0;o--)r.pop();n+=s}else r.push(t[n]),n++}return e}const Ip={defaultProtocol:"http",events:null,format:DF,formatHref:DF,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function wA(t,e=null){let r=Object.assign({},Ip);t&&(r=Object.assign(r,t instanceof wA?t.o:t));const n=r.ignoreTags,i=[];for(let s=0;s<n.length;s++)i.push(n[s].toUpperCase());this.o=r,e&&(this.defaultRender=e),this.ignoreTags=i}wA.prototype={o:Ip,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,r){const n=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=r.t in i?i[r.t]:Ip[t],typeof i=="function"&&n&&(i=i(e,r))):typeof i=="function"&&n&&(i=i(e,r.t,r)),i)},getObj(t,e,r){let n=this.o[t];return typeof n=="function"&&e!=null&&(n=n(e,r.t,r)),n},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function DF(t){return t}function nse(t,e){this.t="token",this.v=t,this.tk=e}nse.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),r=t.get("truncate",e,this),n=t.get("format",e,this);return r&&n.length>r?n.substring(0,r)+"":n},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Ip.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,r=this.toHref(t.get("defaultProtocol")),n=t.get("formatHref",r,this),i=t.get("tagName",r,e),s=this.toFormattedString(t),o={},a=t.get("className",r,e),l=t.get("target",r,e),u=t.get("rel",r,e),d=t.getObj("attributes",r,e),h=t.getObj("events",r,e);return o.href=n,a&&(o.class=a),l&&(o.target=l),u&&(o.rel=u),d&&Object.assign(o,d),{tagName:i,attributes:o,content:s,eventListeners:h}}};function sb(t,e){class r extends nse{constructor(i,s){super(i,s),this.t=t}}for(const n in e)r.prototype[n]=e[n];return r.t=t,r}const $F=sb("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),FF=sb("text"),e_e=sb("nl"),qg=sb("url",{isLink:!0,toHref(t=Ip.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Pp&&t[1].t===ma}}),Ti=t=>new Kn(t);function t_e({groups:t}){const e=t.domain.concat([Dv,Fv,la,qv,Lv,Bv,zv,Vv,ji,mA,zf,Wv,Uv,Hv,Ns,Gv,Wf,Kv]),r=[$v,ma,yA,Es,vA,zf,Vf,bA,xA,kv,Cv,Lf,Bf,_v,Sv,Ev,Nv,Tv,jv,Ov,Pv,Iv,Rv,Mv,Av],n=[Dv,$v,Fv,qv,Lv,Bv,zv,Vv,ji,Lf,Bf,zf,Wv,Uv,Hv,Vf,Ns,Gv,Wf,Kv],i=Ti(),s=te(i,Wf);Xe(s,n,s),Xe(s,t.domain,s);const o=Ti(),a=Ti(),l=Ti();Xe(i,t.domain,o),Xe(i,t.scheme,a),Xe(i,t.slashscheme,l),Xe(o,n,s),Xe(o,t.domain,o);const u=te(o,la);te(s,la,u),te(a,la,u),te(l,la,u);const d=te(s,Es);Xe(d,n,s),Xe(d,t.domain,s);const h=Ti();Xe(u,t.domain,h),Xe(h,t.domain,h);const f=te(h,Es);Xe(f,t.domain,h);const p=Ti($F);Xe(f,t.tld,p),Xe(f,t.utld,p),te(u,Pp,p);const m=te(h,ji);te(m,ji,m),Xe(m,t.domain,h),Xe(p,t.domain,h),te(p,Es,f),te(p,ji,m);const g=te(p,ma);Xe(g,t.numeric,$F);const v=te(o,ji),y=te(o,Es);te(v,ji,v),Xe(v,t.domain,o),Xe(y,n,s),Xe(y,t.domain,o);const b=Ti(qg);Xe(y,t.tld,b),Xe(y,t.utld,b),Xe(b,t.domain,o),Xe(b,n,s),te(b,Es,y),te(b,ji,v),te(b,la,u);const w=te(b,ma),x=Ti(qg);Xe(w,t.numeric,x);const S=Ti(qg),_=Ti();Xe(S,e,S),Xe(S,r,_),Xe(_,e,S),Xe(_,r,_),te(b,Ns,S),te(x,Ns,S);const E=te(a,ma),N=te(l,ma),T=te(N,Ns),j=te(T,Ns);Xe(a,t.domain,o),te(a,Es,y),te(a,ji,v),Xe(l,t.domain,o),te(l,Es,y),te(l,ji,v),Xe(E,t.domain,S),te(E,Ns,S),te(E,Vf,S),Xe(j,t.domain,S),Xe(j,e,S),te(j,Ns,S);const P=[[Lf,Bf],[Sv,_v],[Ev,Nv],[kv,Cv],[Tv,jv],[Ov,Pv],[Iv,Rv],[Mv,Av]];for(let O=0;O<P.length;O++){const[C,D]=P[O],F=te(S,C);te(_,C,F),te(F,D,S);const $=Ti(qg);Xe(F,e,$);const L=Ti();Xe(F,r),Xe($,e,$),Xe($,r,L),Xe(L,e,$),Xe(L,r,L),te($,D,S),te(L,D,S)}return te(i,Pp,b),te(i,gA,e_e),{start:i,tokens:tse}}function r_e(t,e,r){let n=r.length,i=0,s=[],o=[];for(;i<n;){let a=t,l=null,u=null,d=0,h=null,f=-1;for(;i<n&&!(l=a.go(r[i].t));)o.push(r[i++]);for(;i<n&&(u=l||a.go(r[i].t));)l=null,a=u,a.accepts()?(f=0,h=a):f>=0&&f++,i++,d++;if(f<0)i-=d,i<n&&(o.push(r[i]),i++);else{o.length>0&&(s.push(u1(FF,e,o)),o=[]),i-=f,d-=f;const p=h.t,m=r.slice(i-d,i);s.push(u1(p,e,m))}}return o.length>0&&s.push(u1(FF,e,o)),s}function u1(t,e,r){const n=r[0].s,i=r[r.length-1].e,s=e.slice(n,i);return new t(s,r)}const n_e=typeof console<"u"&&console&&console.warn||(()=>{}),i_e="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Dt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function s_e(){return Kn.groups={},Dt.scanner=null,Dt.parser=null,Dt.tokenQueue=[],Dt.pluginQueue=[],Dt.customSchemes=[],Dt.initialized=!1,Dt}function qF(t,e=!1){if(Dt.initialized&&n_e(`linkifyjs: already initialized - will not register custom scheme "${t}" ${i_e}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Dt.customSchemes.push([t,e])}function o_e(){Dt.scanner=JSe(Dt.customSchemes);for(let t=0;t<Dt.tokenQueue.length;t++)Dt.tokenQueue[t][1]({scanner:Dt.scanner});Dt.parser=t_e(Dt.scanner.tokens);for(let t=0;t<Dt.pluginQueue.length;t++)Dt.pluginQueue[t][1]({scanner:Dt.scanner,parser:Dt.parser});return Dt.initialized=!0,Dt}function SA(t){return Dt.initialized||o_e(),r_e(Dt.parser.start,t,rse(Dt.scanner.start,t))}SA.scan=rse;function ise(t,e=null,r=null){if(e&&typeof e=="object"){if(r)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);r=e,e=null}const n=new wA(r),i=SA(t),s=[];for(let o=0;o<i.length;o++){const a=i[o];a.isLink&&(!e||a.t===e)&&n.check(a)&&s.push(a.toFormattedObject(n))}return s}var _A="[\0- -\u2029]",a_e=new RegExp(_A),l_e=new RegExp(`${_A}$`),c_e=new RegExp(_A,"g");function u_e(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function d_e(t){return new Yt({key:new Rr("autolink"),appendTransaction:(e,r,n)=>{const i=e.some(u=>u.docChanged)&&!r.doc.eq(n.doc),s=e.some(u=>u.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=n,a=xie(r.doc,[...e]);if(Cie(a).forEach(({newRange:u})=>{const d=i1e(n.doc,u,p=>p.isTextblock);let h,f;if(d.length>1)h=d[0],f=n.doc.textBetween(h.pos,h.pos+h.node.nodeSize,void 0," ");else if(d.length){const p=n.doc.textBetween(u.from,u.to," "," ");if(!l_e.test(p))return;h=d[0],f=n.doc.textBetween(h.pos,u.to,void 0," ")}if(h&&f){const p=f.split(a_e).filter(Boolean);if(p.length<=0)return!1;const m=p[p.length-1],g=h.pos+f.lastIndexOf(m);if(!m)return!1;const v=SA(m).map(y=>y.toObject(t.defaultProtocol));if(!u_e(v))return!1;v.filter(y=>y.isLink).map(y=>({...y,from:g+y.start+1,to:g+y.end+1})).filter(y=>n.schema.marks.code?!n.doc.rangeHasMark(y.from,y.to,n.schema.marks.code):!0).filter(y=>t.validate(y.value)).filter(y=>t.shouldAutoLink(y.value)).forEach(y=>{uA(y.from,y.to,n.doc).some(b=>b.mark.type===t.type)||o.addMark(y.from,y.to,t.type.create({href:y.href}))})}}),!!o.steps.length)return o}})}function h_e(t){return new Yt({key:new Rr("handleClickLink"),props:{handleClick:(e,r,n)=>{var i,s;if(n.button!==0||!e.editable)return!1;let o=!1;if(t.enableClickSelection&&(o=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){let a=null;if(n.target instanceof HTMLAnchorElement)a=n.target;else{let h=n.target;const f=[];for(;h.nodeName!=="DIV";)f.push(h),h=h.parentNode;a=f.find(p=>p.nodeName==="A")}if(!a)return o;const l=kie(e.state,t.type.name),u=(i=a==null?void 0:a.href)!=null?i:l.href,d=(s=a==null?void 0:a.target)!=null?s:l.target;a&&u&&(window.open(u,d),o=!0)}return o}}})}function f_e(t){return new Yt({key:new Rr("handlePasteLink"),props:{handlePaste:(e,r,n)=>{const{shouldAutoLink:i}=t,{state:s}=e,{selection:o}=s,{empty:a}=o;if(a)return!1;let l="";n.content.forEach(d=>{l+=d.textContent});const u=ise(l,{defaultProtocol:t.defaultProtocol}).find(d=>d.isLink&&d.value===l);return!l||!u||i!==void 0&&!i(u.value)?!1:t.editor.commands.setMark(t.type,{href:u.href})}}})}function Ol(t,e){const r=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(n=>{const i=typeof n=="string"?n:n.scheme;i&&r.push(i)}),!t||t.replace(c_e,"").match(new RegExp(`^(?:(?:${r.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var sse=Qc.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){qF(t);return}qF(t.scheme,t.optionalSlashes)})},onDestroy(){s_e()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Ol(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),r=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||r&&!t.includes("@"))return!0;const i=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(i)||!/\./.test(i))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:r=>!!Ol(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Ol(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",_r(this.options.HTMLAttributes,t),0]:["a",_r(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var r;const n=((r=t.attrs)==null?void 0:r.href)||"";return`[${e.renderChildren(t)}](${n})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:r}=t;return this.options.isAllowedUri(r,{defaultValidate:n=>!!Ol(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:r}=t||{};return r&&!this.options.isAllowedUri(r,{defaultValidate:n=>!!Ol(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Dc({find:t=>{const e=[];if(t){const{protocols:r,defaultProtocol:n}=this.options,i=ise(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!Ol(o,r),protocols:r,defaultProtocol:n}));i.length&&i.forEach(s=>{this.options.shouldAutoLink(s.value)&&e.push({text:s.value,data:{href:s.href},index:s.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:r}=this.options;return this.options.autolink&&t.push(d_e({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:n=>this.options.isAllowedUri(n,{defaultValidate:i=>!!Ol(i,e),protocols:e,defaultProtocol:r}),shouldAutoLink:this.options.shouldAutoLink})),t.push(h_e({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(f_e({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),p_e=sse,m_e=Object.defineProperty,g_e=(t,e)=>{for(var r in e)m_e(t,r,{get:e[r],enumerable:!0})},y_e="listItem",LF="textStyle",BF=/^\s*([-+*])\s$/,ose=wi.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",_r(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(y_e,this.editor.getAttributes(LF)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Qd({find:BF,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Qd({find:BF,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(LF),editor:this.editor})),[t]}}),ase=wi.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",_r(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let r=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(i=>i.type==="paragraph"))r=e.parseChildren(t.tokens);else{const i=t.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(r=[{type:"paragraph",content:e.parseInline(i.tokens)}],t.tokens.length>1){const o=t.tokens.slice(1),a=e.parseChildren(o);r.push(...a)}}else r=e.parseChildren(t.tokens)}return r.length===0&&(r=[{type:"paragraph",content:[]}]),{type:"listItem",content:r}},renderMarkdown:(t,e,r)=>pA(t,e,n=>n.parentType==="bulletList"?"- ":n.parentType==="orderedList"?`${n.index+1}. `:"- ",r),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),v_e={};g_e(v_e,{findListItemPos:()=>mm,getNextListDepth:()=>EA,handleBackspace:()=>YI,handleDelete:()=>QI,hasListBefore:()=>lse,hasListItemAfter:()=>b_e,hasListItemBefore:()=>cse,listItemHasSubList:()=>use,nextListIsDeeper:()=>dse,nextListIsHigher:()=>hse});var mm=(t,e)=>{const{$from:r}=e.selection,n=Sr(t,e.schema);let i=null,s=r.depth,o=r.pos,a=null;for(;s>0&&a===null;)i=r.node(s),i.type===n?a=s:(s-=1,o-=1);return a===null?null:{$pos:e.doc.resolve(o),depth:a}},EA=(t,e)=>{const r=mm(t,e);if(!r)return!1;const[,n]=p1e(e,t,r.$pos.pos+4);return n},lse=(t,e,r)=>{const{$anchor:n}=t.selection,i=Math.max(0,n.pos-2),s=t.doc.resolve(i).node();return!(!s||!r.includes(s.type.name))},cse=(t,e)=>{var r;const{$anchor:n}=e.selection,i=e.doc.resolve(n.pos-2);return!(i.index()===0||((r=i.nodeBefore)==null?void 0:r.type.name)!==t)},use=(t,e,r)=>{if(!r)return!1;const n=Sr(t,e.schema);let i=!1;return r.descendants(s=>{s.type===n&&(i=!0)}),i},YI=(t,e,r)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!ol(t.state,e)&&lse(t.state,e,r)){const{$anchor:a}=t.state.selection,l=t.state.doc.resolve(a.before()-1),u=[];l.node().descendants((f,p)=>{f.type.name===e&&u.push({node:f,pos:p})});const d=u.at(-1);if(!d)return!1;const h=t.state.doc.resolve(l.start()+d.pos+1);return t.chain().cut({from:a.start()-1,to:a.end()+1},h.end()).joinForward().run()}if(!ol(t.state,e)||!v1e(t.state))return!1;const n=mm(e,t.state);if(!n)return!1;const s=t.state.doc.resolve(n.$pos.pos-2).node(n.depth),o=use(e,t.state,s);return cse(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},dse=(t,e)=>{const r=EA(t,e),n=mm(t,e);return!n||!r?!1:r>n.depth},hse=(t,e)=>{const r=EA(t,e),n=mm(t,e);return!n||!r?!1:r<n.depth},QI=(t,e)=>{if(!ol(t.state,e)||!y1e(t.state,e))return!1;const{selection:r}=t.state,{$from:n,$to:i}=r;return!r.empty&&n.sameParent(i)?!1:dse(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():hse(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},b_e=(t,e)=>{var r;const{$anchor:n}=e.selection,i=e.doc.resolve(n.pos-n.parentOffset-2);return!(i.index()===i.parent.childCount-1||((r=i.nodeAfter)==null?void 0:r.type.name)!==t)},fse=pr.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&QI(t,r)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&QI(t,r)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&YI(t,r,n)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&YI(t,r,n)&&(e=!0)}),e}}}}),zF=/^(\s*)(\d+)\.\s+(.*)$/,x_e=/^\s/;function w_e(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r],s=i.match(zF);if(!s)break;const[,o,a,l]=s,u=o.length;let d=l,h=r+1;const f=[i];for(;h<t.length;){const p=t[h];if(p.match(zF))break;if(p.trim()==="")f.push(p),d+=`
`,h+=1;else if(p.match(x_e))f.push(p),d+=`
${p.slice(u+2)}`,h+=1;else break}e.push({indent:u,number:parseInt(a,10),content:d.trim(),raw:f.join(`
`)}),n=h,r=h}return[e,n]}function pse(t,e,r){var n;const i=[];let s=0;for(;s<t.length;){const o=t[s];if(o.indent===e){const a=o.content.split(`
`),l=((n=a[0])==null?void 0:n.trim())||"",u=[];l&&u.push({type:"paragraph",raw:l,tokens:r.inlineTokens(l)});const d=a.slice(1).join(`
`).trim();if(d){const p=r.blockTokens(d);u.push(...p)}let h=s+1;const f=[];for(;h<t.length&&t[h].indent>e;)f.push(t[h]),h+=1;if(f.length>0){const p=Math.min(...f.map(g=>g.indent)),m=pse(f,p,r);u.push({type:"list",ordered:!0,start:f[0].number,items:m,raw:f.map(g=>g.raw).join(`
`)})}i.push({type:"list_item",raw:o.raw,tokens:u}),s=h}else s+=1}return i}function S_e(t,e){return t.map(r=>{if(r.type!=="list_item")return e.parseChildren([r])[0];const n=[];return r.tokens&&r.tokens.length>0&&r.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")n.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const s=e.parseChildren([i]);n.push({type:"paragraph",content:s})}else{const s=e.parseChildren([i]);s.length>0&&n.push(...s)}}),{type:"listItem",content:n}})}var __e="listItem",VF="textStyle",WF=/^(\d+)\.\s$/,mse=wi.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...r}=t;return e===1?["ol",_r(this.options.HTMLAttributes,r),0]:["ol",_r(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const r=t.start||1,n=t.items?S_e(t.items,e):[];return r!==1?{type:"orderedList",attrs:{start:r},content:n}:{type:"orderedList",content:n}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),r=e==null?void 0:e.index;return r!==void 0?r:-1},tokenize:(t,e,r)=>{var n;const i=t.split(`
`),[s,o]=w_e(i);if(s.length===0)return;const a=pse(s,0,r);return a.length===0?void 0:{type:"list",ordered:!0,start:((n=s[0])==null?void 0:n.number)||1,items:a,raw:i.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(__e,this.editor.getAttributes(VF)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Qd({find:WF,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Qd({find:WF,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(VF)}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1],editor:this.editor})),[t]}}),E_e=/^\s*(\[([( |x])?\])\s$/,N_e=wi.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",_r(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const r=[];if(t.tokens&&t.tokens.length>0?r.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?r.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):r.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const n=e.parseChildren(t.nestedTokens);r.push(...n)}return e.createNode("taskItem",{checked:t.checked||!1},r)},renderMarkdown:(t,e)=>{var r;const i=`- [${(r=t.attrs)!=null&&r.checked?"x":" "}] `;return pA(t,e,i)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:r,editor:n})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),u=h=>{var f,p;a.ariaLabel=((p=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:p.call(f,h,a.checked))||`Task item checkbox for ${h.textContent||"empty task item"}`};u(t),s.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",h=>h.preventDefault()),a.addEventListener("change",h=>{if(!n.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:f}=h.target;n.isEditable&&typeof r=="function"&&n.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:p})=>{const m=r();if(typeof m!="number")return!1;const g=p.doc.nodeAt(m);return p.setNodeMarkup(m,void 0,{...g==null?void 0:g.attrs,checked:f}),!0}).run(),!n.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,f)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([h,f])=>{i.setAttribute(h,f)}),i.dataset.checked=t.attrs.checked,a.checked=t.attrs.checked,s.append(a,o),i.append(s,l),Object.entries(e).forEach(([h,f])=>{i.setAttribute(h,f)});let d=new Set(Object.keys(e));return{dom:i,contentDOM:l,update:h=>{if(h.type!==this.type)return!1;i.dataset.checked=h.attrs.checked,a.checked=h.attrs.checked,u(h);const f=n.extensionManager.attributes,p=Op(h,f),m=new Set(Object.keys(p)),g=this.options.HTMLAttributes;return d.forEach(v=>{m.has(v)||(v in g?i.setAttribute(v,g[v]):i.removeAttribute(v))}),Object.entries(p).forEach(([v,y])=>{y==null?v in g?i.setAttribute(v,g[v]):i.removeAttribute(v):i.setAttribute(v,y)}),d=m,!0}}}},addInputRules(){return[Qd({find:E_e,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),k_e=wi.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",_r(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const r=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return r!==void 0?r:-1},tokenize(t,e,r){const n=s=>{const o=qI(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:r.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:n},r);return o?[{type:"taskList",raw:o.raw,items:o.items}]:r.blockTokens(s)},i=qI(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,o)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:r.inlineTokens(s.mainContent),nestedTokens:o}),customNestedParser:n},r);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});pr.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(ose.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(ase.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(fse.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(mse.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(N_e.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(k_e.configure(this.options.taskList)),t}});var C_e=wi.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",_r(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const r=t.tokens||[];return r.length===1&&r[0].type==="image"?e.parseChildren([r[0]]):e.createNode("paragraph",void 0,e.parseInline(r))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),T_e=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,j_e=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,O_e=Qc.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",_r(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Yd({find:T_e,type:this.type})]},addPasteRules(){return[Dc({find:j_e,type:this.type})]}}),P_e=wi.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),I_e=Qc.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",_r(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,r){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!i)return;const s=i[2].trim();return{type:"underline",raw:i[0],text:s,tokens:r.inlineTokens(s)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function R_e(t={}){return new Yt({view(e){return new M_e(e,t)}})}class M_e{constructor(e,r){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(n=r.width)!==null&&n!==void 0?n:1,this.color=r.color===!1?void 0:r.color||"black",this.class=r.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:r})=>this.editorView.dom.removeEventListener(e,r))}update(e,r){this.cursorPos!=null&&r.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),r=!e.parent.inlineContent,n,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,a=s.height/i.offsetHeight;if(r){let h=e.nodeBefore,f=e.nodeAfter;if(h||f){let p=this.editorView.nodeDOM(this.cursorPos-(h?h.nodeSize:0));if(p){let m=p.getBoundingClientRect(),g=h?m.bottom:m.top;h&&f&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let v=this.width/2*a;n={left:m.left,right:m.right,top:g-v,bottom:g+v}}}}if(!n){let h=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*o;n={left:h.left-f,right:h.left+f,top:h.top,bottom:h.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",r),this.element.classList.toggle("prosemirror-dropcursor-inline",!r);let u,d;if(!l||l==document.body&&getComputedStyle(l).position=="static")u=-pageXOffset,d=-pageYOffset;else{let h=l.getBoundingClientRect(),f=h.width/l.offsetWidth,p=h.height/l.offsetHeight;u=h.left-l.scrollLeft*f,d=h.top-l.scrollTop*p}this.element.style.left=(n.left-u)/o+"px",this.element.style.top=(n.top-d)/a+"px",this.element.style.width=(n.right-n.left)/o+"px",this.element.style.height=(n.bottom-n.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let r=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=r&&r.inside>=0&&this.editorView.state.doc.nodeAt(r.inside),i=n&&n.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,r,e):i;if(r&&!s){let o=r.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=dne(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class ir extends Je{constructor(e){super(e,e)}map(e,r){let n=e.resolve(r.map(this.head));return ir.valid(n)?new ir(n):Je.near(n)}content(){return ve.empty}eq(e){return e instanceof ir&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new ir(e.resolve(r.pos))}getBookmark(){return new NA(this.anchor)}static valid(e){let r=e.parent;if(r.isTextblock||!A_e(e)||!D_e(e))return!1;let n=r.type.spec.allowGapCursor;if(n!=null)return n;let i=r.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,r,n=!1){e:for(;;){if(!n&&ir.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(r>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(r>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=r;let l=e.doc.resolve(i);if(ir.valid(l))return l}for(;;){let o=r>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Re.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*r),n=!1;continue e}break}s=o,i+=r;let a=e.doc.resolve(i);if(ir.valid(a))return a}return null}}}ir.prototype.visible=!1;ir.findFrom=ir.findGapCursorFrom;Je.jsonID("gapcursor",ir);class NA{constructor(e){this.pos=e}map(e){return new NA(e.map(this.pos))}resolve(e){let r=e.resolve(this.pos);return ir.valid(r)?new ir(r):Je.near(r)}}function gse(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function A_e(t){for(let e=t.depth;e>=0;e--){let r=t.index(e),n=t.node(e);if(r==0){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||gse(i.type))return!0;if(i.inlineContent)return!1}}return!0}function D_e(t){for(let e=t.depth;e>=0;e--){let r=t.indexAfter(e),n=t.node(e);if(r==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||gse(i.type))return!0;if(i.inlineContent)return!1}}return!0}function $_e(){return new Yt({props:{decorations:B_e,createSelectionBetween(t,e,r){return e.pos==r.pos&&ir.valid(r)?new ir(r):null},handleClick:q_e,handleKeyDown:F_e,handleDOMEvents:{beforeinput:L_e}}})}const F_e=hie({ArrowLeft:Lg("horiz",-1),ArrowRight:Lg("horiz",1),ArrowUp:Lg("vert",-1),ArrowDown:Lg("vert",1)});function Lg(t,e){const r=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(n,i,s){let o=n.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof ze){if(!s.endOfTextblock(r)||a.depth==0)return!1;l=!1,a=n.doc.resolve(e>0?a.after():a.before())}let u=ir.findGapCursorFrom(a,e,l);return u?(i&&i(n.tr.setSelection(new ir(u))),!0):!1}}function q_e(t,e,r){if(!t||!t.editable)return!1;let n=t.state.doc.resolve(e);if(!ir.valid(n))return!1;let i=t.posAtCoords({left:r.clientX,top:r.clientY});return i&&i.inside>-1&&Re.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new ir(n))),!0)}function L_e(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof ir))return!1;let{$from:r}=t.state.selection,n=r.parent.contentMatchAt(r.index()).findWrapping(t.state.schema.nodes.text);if(!n)return!1;let i=X.empty;for(let o=n.length-1;o>=0;o--)i=X.from(n[o].createAndFill(null,i));let s=t.state.tr.replace(r.pos,r.pos,new ve(i,0,0));return s.setSelection(ze.near(s.doc.resolve(r.pos+1))),t.dispatch(s),!1}function B_e(t){if(!(t.selection instanceof ir))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ut.create(t.doc,[jn.widget(t.selection.head,e,{key:"gapcursor"})])}var Yv=200,zr=function(){};zr.prototype.append=function(e){return e.length?(e=zr.from(e),!this.length&&e||e.length<Yv&&this.leafAppend(e)||this.length<Yv&&e.leafPrepend(this)||this.appendInner(e)):this};zr.prototype.prepend=function(e){return e.length?zr.from(e).append(this):this};zr.prototype.appendInner=function(e){return new z_e(this,e)};zr.prototype.slice=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=this.length),e>=r?zr.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,r))};zr.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};zr.prototype.forEach=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length),r<=n?this.forEachInner(e,r,n,0):this.forEachInvertedInner(e,r,n,0)};zr.prototype.map=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},r,n),i};zr.from=function(e){return e instanceof zr?e:e&&e.length?new yse(e):zr.empty};var yse=function(t){function e(n){t.call(this),this.values=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Yv)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Yv)return new e(i.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(e.prototype,r),e}(zr);zr.empty=new yse([]);var z_e=function(t){function e(r,n){t.call(this),this.left=r,this.right=n,this.length=r.length+n.length,this.depth=Math.max(r.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(n,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(n,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(n,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(n,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(n,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(n,i){if(n==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(n,i):n>=s?this.right.slice(n-s,i-s):this.left.slice(n,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(n){var i=this.right.leafAppend(n);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(n){var i=this.left.leafPrepend(n);if(i)return new e(i,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e}(zr);const V_e=500;class us{constructor(e,r){this.items=e,this.eventCount=r}popEvent(e,r){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let i,s;r&&(i=this.remapping(n,this.items.length),s=i.maps.length);let o=e.tr,a,l,u=[],d=[];return this.items.forEach((h,f)=>{if(!h.step){i||(i=this.remapping(n,f+1),s=i.maps.length),s--,d.push(h);return}if(i){d.push(new ks(h.map));let p=h.step.map(i.slice(s)),m;p&&o.maybeStep(p).doc&&(m=o.mapping.maps[o.mapping.maps.length-1],u.push(new ks(m,void 0,void 0,u.length+d.length))),s--,m&&i.appendMap(m,s)}else o.maybeStep(h.step);if(h.selection)return a=i?h.selection.map(i.slice(s)):h.selection,l=new us(this.items.slice(0,n).append(d.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,r,n,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let d=0;d<e.steps.length;d++){let h=e.steps[d].invert(e.docs[d]),f=new ks(e.mapping.maps[d],h,r),p;(p=l&&l.merge(f))&&(f=p,d?s.pop():a=a.slice(0,a.length-1)),s.push(f),r&&(o++,r=void 0),i||(l=f)}let u=o-n.depth;return u>U_e&&(a=W_e(a,u),o-=u),new us(a.append(s),o)}remapping(e,r){let n=new Ep;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?n.maps.length-i.mirrorOffset:void 0;n.appendMap(i.map,o)},e,r),n}addMaps(e){return this.eventCount==0?this:new us(this.items.append(e.map(r=>new ks(r))),this.eventCount)}rebased(e,r){if(!this.eventCount)return this;let n=[],i=Math.max(0,this.items.length-r),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},i);let l=r;this.items.forEach(f=>{let p=s.getMirror(--l);if(p==null)return;o=Math.min(o,p);let m=s.maps[p];if(f.step){let g=e.steps[p].invert(e.docs[p]),v=f.selection&&f.selection.map(s.slice(l+1,p));v&&a++,n.push(new ks(m,g,v))}else n.push(new ks(m))},i);let u=[];for(let f=r;f<o;f++)u.push(new ks(s.maps[f]));let d=this.items.slice(0,i).append(u).append(n),h=new us(d,a);return h.emptyItemCount()>V_e&&(h=h.compress(this.items.length-n.length)),h}emptyItemCount(){let e=0;return this.items.forEach(r=>{r.step||e++}),e}compress(e=this.items.length){let r=this.remapping(0,e),n=r.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(r.slice(n)),u=l&&l.getMap();if(n--,u&&r.appendMap(u,n),l){let d=o.selection&&o.selection.map(r.slice(n));d&&s++;let h=new ks(u.invert(),l,d),f,p=i.length-1;(f=i.length&&i[p].merge(h))?i[p]=f:i.push(h)}}else o.map&&n--},this.items.length,0),new us(zr.from(i.reverse()),s)}}us.empty=new us(zr.empty,0);function W_e(t,e){let r;return t.forEach((n,i)=>{if(n.selection&&e--==0)return r=i,!1}),t.slice(r)}class ks{constructor(e,r,n,i){this.map=e,this.step=r,this.selection=n,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let r=e.step.merge(this.step);if(r)return new ks(r.getMap().invert(),r,this.selection)}}}class ca{constructor(e,r,n,i,s){this.done=e,this.undone=r,this.prevRanges=n,this.prevTime=i,this.prevComposition=s}}const U_e=20;function H_e(t,e,r,n){let i=r.getMeta(fc),s;if(i)return i.historyState;r.getMeta(Y_e)&&(t=new ca(t.done,t.undone,null,0,-1));let o=r.getMeta("appendedTransaction");if(r.steps.length==0)return t;if(o&&o.getMeta(fc))return o.getMeta(fc).redo?new ca(t.done.addTransform(r,void 0,n,yy(e)),t.undone,UF(r.mapping.maps),t.prevTime,t.prevComposition):new ca(t.done,t.undone.addTransform(r,void 0,n,yy(e)),null,t.prevTime,t.prevComposition);if(r.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=r.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(r.time||0)-n.newGroupDelay||!K_e(r,t.prevRanges)),u=o?d1(t.prevRanges,r.mapping):UF(r.mapping.maps);return new ca(t.done.addTransform(r,l?e.selection.getBookmark():void 0,n,yy(e)),us.empty,u,r.time,a??t.prevComposition)}else return(s=r.getMeta("rebased"))?new ca(t.done.rebased(r,s),t.undone.rebased(r,s),d1(t.prevRanges,r.mapping),t.prevTime,t.prevComposition):new ca(t.done.addMaps(r.mapping.maps),t.undone.addMaps(r.mapping.maps),d1(t.prevRanges,r.mapping),t.prevTime,t.prevComposition)}function K_e(t,e){if(!e)return!1;if(!t.docChanged)return!0;let r=!1;return t.mapping.maps[0].forEach((n,i)=>{for(let s=0;s<e.length;s+=2)n<=e[s+1]&&i>=e[s]&&(r=!0)}),r}function UF(t){let e=[];for(let r=t.length-1;r>=0&&e.length==0;r--)t[r].forEach((n,i,s,o)=>e.push(s,o));return e}function d1(t,e){if(!t)return null;let r=[];for(let n=0;n<t.length;n+=2){let i=e.map(t[n],1),s=e.map(t[n+1],-1);i<=s&&r.push(i,s)}return r}function G_e(t,e,r){let n=yy(e),i=fc.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,n);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,n),l=new ca(r?a:s.remaining,r?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(fc,{redo:r,historyState:l})}let h1=!1,HF=null;function yy(t){let e=t.plugins;if(HF!=e){h1=!1,HF=e;for(let r=0;r<e.length;r++)if(e[r].spec.historyPreserveItems){h1=!0;break}}return h1}const fc=new Rr("history"),Y_e=new Rr("closeHistory");function Q_e(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Yt({key:fc,state:{init(){return new ca(us.empty,us.empty,null,0,-1)},apply(e,r,n){return H_e(r,n,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,r){let n=r.inputType,i=n=="historyUndo"?bse:n=="historyRedo"?xse:null;return!i||!e.editable?!1:(r.preventDefault(),i(e.state,e.dispatch))}}}})}function vse(t,e){return(r,n)=>{let i=fc.getState(r);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(n){let s=G_e(i,r,t);s&&n(e?s.scrollIntoView():s)}return!0}}const bse=vse(!1,!0),xse=vse(!0,!0);pr.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const n=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(n)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,r=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(r)}},addProseMirrorPlugins(){let t=!1;return[new Yt({key:new Rr("characterCount"),appendTransaction:(e,r,n)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const s=this.storage.characters({node:n.doc});if(s>i){const o=s-i,a=0,l=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const u=n.tr.deleteRange(a,l);return t=!0,u}t=!0},filterTransaction:(e,r)=>{const n=this.options.limit;if(!e.docChanged||n===0||n===null||n===void 0)return!0;const i=this.storage.characters({node:r.doc}),s=this.storage.characters({node:e.doc});if(s<=n||i>n&&s>n&&s<=i)return!0;if(i>n&&s>n&&s>i||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,l=s-n,u=a-l,d=a;return e.deleteRange(u,d),!(this.storage.characters({node:e.doc})>n)}})]}});var X_e=pr.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[R_e(this.options)]}});pr.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Yt({key:new Rr("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:r,isFocused:n}=this.editor,{anchor:i}=e,s=[];if(!r||!n)return Ut.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((l,u)=>{if(l.isText)return;if(!(i>=u&&i<=u+l.nodeSize-1))return!1;o+=1});let a=0;return t.descendants((l,u)=>{if(l.isText||!(i>=u&&i<=u+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&o-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";s.push(jn.node(u,u+l.nodeSize,{class:this.options.className}))}),Ut.create(t,s)}}})]}});var J_e=pr.create({name:"gapCursor",addProseMirrorPlugins(){return[$_e()]},extendNodeSchema(t){var e;const r={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=vt(Pe(t,"allowGapCursor",r)))!=null?e:null}}}),Z_e=pr.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Yt({key:new Rr("placeholder"),props:{decorations:({doc:t,selection:e})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:n}=e,i=[];if(!r)return null;const s=this.editor.isEmpty;return t.descendants((o,a)=>{const l=n>=a&&n<=a+o.nodeSize,u=!o.isLeaf&&tb(o);if((l||!this.options.showOnlyCurrent)&&u){const d=[this.options.emptyNodeClass];s&&d.push(this.options.emptyEditorClass);const h=jn.node(a,a+o.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:a,hasAnchor:l}):this.options.placeholder});i.push(h)}return this.options.includeChildren}),Ut.create(t,i)}}})]}});pr.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new Yt({key:new Rr("selection"),props:{decorations(r){return r.selection.empty||t.isFocused||!t.isEditable||Tie(r.selection)||t.view.dragging?null:Ut.create(r.doc,[jn.inline(r.selection.from,r.selection.to,{class:e.className})])}}})]}});function KF({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var eEe=pr.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new Rr(this.name),r=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",n=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(r).includes(i.name));return[new Yt({key:e,appendTransaction:(i,s,o)=>{const{doc:a,tr:l,schema:u}=o,d=e.getState(o),h=a.content.size,f=u.nodes[r];if(d)return l.insert(h,f.create())},state:{init:(i,s)=>{const o=s.tr.doc.lastChild;return!KF({node:o,types:n})},apply:(i,s)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return s;const o=i.doc.lastChild;return!KF({node:o,types:n})}}})]}}),tEe=pr.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>bse(t,e),redo:()=>({state:t,dispatch:e})=>xse(t,e)}},addProseMirrorPlugins(){return[Q_e(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),rEe=pr.create({name:"starterKit",addExtensions(){var t,e,r,n;const i=[];return this.options.bold!==!1&&i.push(TSe.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(_Se.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(ose.configure(this.options.bulletList)),this.options.code!==!1&&i.push(PSe.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(MSe.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(ASe.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(X_e.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(J_e.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(DSe.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push($Se.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(tEe.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(FSe.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(VSe.configure(this.options.italic)),this.options.listItem!==!1&&i.push(ase.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(fse.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(sse.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(mse.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(C_e.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(O_e.configure(this.options.strike)),this.options.text!==!1&&i.push(P_e.configure(this.options.text)),this.options.underline!==!1&&i.push(I_e.configure((r=this.options)==null?void 0:r.underline)),this.options.trailingNode!==!1&&i.push(eEe.configure((n=this.options)==null?void 0:n.trailingNode)),i}}),nEe=rEe,iEe=Z_e;const ea=({onClick:t,isActive:e,disabled:r,children:n,title:i})=>c.jsx("button",{type:"button",onClick:t,disabled:r,title:i,className:`p-1.5 rounded hover:bg-gray-100 transition-colors ${e?"bg-gray-200 text-primary-600":"text-gray-600"} ${r?"opacity-50 cursor-not-allowed":""}`,children:n}),sEe=({editor:t})=>{if(!t)return null;const e=()=>{const r=t.getAttributes("link").href,n=window.prompt("Enter URL:",r);if(n===null)return;if(n===""){t.chain().focus().extendMarkRange("link").unsetLink().run();return}const i=n.match(/^https?:\/\//)?n:`https://${n}`;t.chain().focus().extendMarkRange("link").setLink({href:i}).run()};return c.jsxs("div",{className:"flex items-center gap-0.5 p-1.5 border-b border-gray-200 bg-gray-50 rounded-t-md",children:[c.jsx(ea,{onClick:()=>t.chain().focus().toggleBold().run(),isActive:t.isActive("bold"),title:"Bold (Cmd+B)",children:c.jsx(Upe,{className:"w-4 h-4"})}),c.jsx(ea,{onClick:()=>t.chain().focus().toggleItalic().run(),isActive:t.isActive("italic"),title:"Italic (Cmd+I)",children:c.jsx(Xpe,{className:"w-4 h-4"})}),c.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),c.jsx(ea,{onClick:()=>t.chain().focus().toggleBulletList().run(),isActive:t.isActive("bulletList"),title:"Bullet list",children:c.jsx(Zpe,{className:"w-4 h-4"})}),c.jsx(ea,{onClick:()=>t.chain().focus().toggleOrderedList().run(),isActive:t.isActive("orderedList"),title:"Numbered list",children:c.jsx(Jpe,{className:"w-4 h-4"})}),c.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),c.jsx(ea,{onClick:e,isActive:t.isActive("link"),title:"Add link",children:c.jsx(NM,{className:"w-4 h-4"})}),t.isActive("link")&&c.jsx(ea,{onClick:()=>t.chain().focus().unsetLink().run(),title:"Remove link",children:c.jsx(cme,{className:"w-4 h-4"})}),c.jsx("div",{className:"flex-1"}),c.jsx(ea,{onClick:()=>t.chain().focus().undo().run(),disabled:!t.can().undo(),title:"Undo (Cmd+Z)",children:c.jsx(lme,{className:"w-4 h-4"})}),c.jsx(ea,{onClick:()=>t.chain().focus().redo().run(),disabled:!t.can().redo(),title:"Redo (Cmd+Shift+Z)",children:c.jsx(ome,{className:"w-4 h-4"})})]})};function wse({value:t="",onChange:e,placeholder:r="Write something...",disabled:n=!1,minHeight:i="120px",autoFocus:s=!1}){const o=vSe({extensions:[nEe.configure({heading:!1,codeBlock:!1,blockquote:!1}),iEe.configure({placeholder:r}),p_e.configure({openOnClick:!1,HTMLAttributes:{class:"text-primary-600 hover:text-primary-700 underline"}})],content:t,editable:!n,autofocus:s,onUpdate:({editor:a})=>{const l=a.getHTML();e(l==="<p></p>"||l===""?"":l)}});if(o&&t!==o.getHTML()&&t!==""){const a=o.getHTML();t&&(a==="<p></p>"||a===""||t!==a)&&o.commands.setContent(t,!1)}return c.jsxs("div",{className:`border border-gray-300 rounded-md overflow-hidden focus-within:ring-2 focus-within:ring-primary-500 focus-within:border-transparent ${n?"bg-gray-100 opacity-60":"bg-white"}`,children:[c.jsx(sEe,{editor:o}),c.jsx(dSe,{editor:o,className:"prose prose-sm max-w-none",style:{minHeight:i}}),c.jsx("style",{children:`
        .ProseMirror {
          padding: 0.75rem;
          min-height: ${i};
          outline: none;
        }
        .ProseMirror p.is-editor-empty:first-child::before {
          content: attr(data-placeholder);
          float: left;
          color: #9ca3af;
          pointer-events: none;
          height: 0;
        }
        .ProseMirror ul,
        .ProseMirror ol {
          padding-left: 1.5rem;
        }
        .ProseMirror ul {
          list-style-type: disc;
        }
        .ProseMirror ol {
          list-style-type: decimal;
        }
        .ProseMirror li {
          margin-bottom: 0.25rem;
        }
        .ProseMirror p {
          margin-bottom: 0.5rem;
        }
        .ProseMirror p:last-child {
          margin-bottom: 0;
        }
      `})]})}function Qv(t){if(!t)return!0;const e=t.trim();return e===""||e==="<p></p>"||e==="<p><br></p>"}const f1=[{id:"call",label:"Phone call",icon:kM},{id:"email",label:"Email",icon:A0},{id:"chat",label:"Chat",icon:D0},{id:"meeting",label:"Meeting",icon:Pn},{id:"coffee",label:"Coffee",icon:Kte},{id:"lunch",label:"Lunch",icon:nre},{id:"note",label:"Other",icon:M0}];function kA({isOpen:t,onClose:e,onSubmit:r,isLoading:n,personId:i,initialData:s=null,activity:o=null}){const[a,l]=k.useState("call"),[u,d]=k.useState(""),[h,f]=k.useState(""),[p,m]=k.useState(""),[g,v]=k.useState([]),[y,b]=k.useState(!1),[w,x]=k.useState(""),{data:S}=Gc(),_=!!o;if(k.useEffect(()=>{if(t){const $=new Date,L=$.toISOString().split("T")[0],M=$.toTimeString().slice(0,5);o?(d(o.activity_date||L),f(o.activity_time||""),m(o.content||""),v(o.participants||[]),l(o.activity_type||"note")):s?(d(s.activity_date||L),f(s.activity_time||M),m(s.content||""),v(s.participants||[]),l(s.activity_type||"note")):(d(L),f(M),m(""),v([]),l("call"))}},[t,s,o]),!t)return null;const E=(S||[]).filter($=>$.id.toString()!==(i==null?void 0:i.toString())),N=E.filter($=>{var L;return(L=$.name)==null?void 0:L.toLowerCase().includes(w.toLowerCase())}),T=$=>{$.preventDefault(),!Qv(p)&&(r({activity_type:a,activity_date:u||null,activity_time:h||null,content:p,participants:g}),m(""),v([]),d(new Date().toISOString().split("T")[0]),f(new Date().toTimeString().slice(0,5)))},j=()=>{m(""),v([]),d(""),f(""),b(!1),x(""),e()},P=$=>{v(L=>L.includes($)?L.filter(M=>M!==$):[...L,$])},O=$=>{v(L=>L.filter(M=>M!==$))},C=()=>E.filter($=>g.includes($.id)),D=$=>{if(!$)return"";try{return new Date($).toISOString().split("T")[0]}catch{return""}};return(f1.find($=>$.id===a)||f1[0]).icon,c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b sticky top-0 bg-white z-10",children:[c.jsx("h2",{className:"text-lg font-semibold",children:_?"Edit activity":"Add activity"}),c.jsx("button",{onClick:j,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(mt,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:T,className:"p-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"space-y-4 md:col-span-1",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Activity type"}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:f1.map($=>{const L=$.icon,M=a===$.id;return c.jsxs("button",{type:"button",onClick:()=>l($.id),className:`flex flex-col items-center justify-center p-3 border-2 rounded-lg transition-colors ${M?"border-primary-600 bg-primary-50 text-primary-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,disabled:n,children:[c.jsx(L,{className:"w-5 h-5 mb-1"}),c.jsx("span",{className:"text-xs",children:$.label})]},$.id)})})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"activity-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),c.jsx("input",{id:"activity-date",type:"date",value:D(u),onChange:$=>d($.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"activity-time",className:"block text-sm font-medium text-gray-700 mb-2",children:"Time"}),c.jsx("input",{id:"activity-time",type:"time",value:h,onChange:$=>f($.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Participants (optional)"}),C().length>0&&c.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:C().map($=>c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-700 rounded-full text-sm",children:[$.name,c.jsx("button",{type:"button",onClick:()=>O($.id),className:"hover:text-primary-900",disabled:n,children:c.jsx(mt,{className:"w-3 h-3"})})]},$.id))}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{type:"button",onClick:()=>b(!y),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-left text-sm text-gray-500 hover:border-gray-400",disabled:n,children:g.length===0?"Add participants...":"Add more participants..."}),y&&c.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[c.jsx("div",{className:"p-2 border-b",children:c.jsx("input",{type:"text",placeholder:"Search people...",value:w,onChange:$=>x($.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded",autoFocus:!0})}),c.jsx("div",{className:"max-h-48 overflow-y-auto",children:N.length===0?c.jsx("div",{className:"p-3 text-sm text-gray-500 text-center",children:"No people found"}):N.map($=>{var M;const L=g.includes($.id);return c.jsxs("button",{type:"button",onClick:()=>P($.id),className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2 ${L?"bg-primary-50":""}`,children:[c.jsx("input",{type:"checkbox",checked:L,onChange:()=>{},className:"mr-1"}),$.thumbnail?c.jsx("img",{src:$.thumbnail,alt:$.name,className:"w-6 h-6 rounded-full"}):c.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-xs text-gray-500",children:((M=$.first_name)==null?void 0:M[0])||"?"})}),c.jsx("span",{children:$.name})]},$.id)})})]})]})]})]}),c.jsxs("div",{className:"flex flex-col md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),c.jsx("div",{className:"flex-1",children:c.jsx(wse,{value:p,onChange:m,placeholder:"What happened? Add your call notes, chat summary, meeting notes...",disabled:n,minHeight:"280px"})})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 mt-6 pt-4 border-t",children:[c.jsx("button",{type:"button",onClick:j,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n||Qv(p),children:n?_?"Saving...":"Adding...":_?"Save":"Add activity"})]})]})]})})}function ta({title:t,value:e,icon:r,href:n}){return c.jsx(Le,{to:n,className:"card p-6 hover:shadow-md transition-shadow",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-500",children:t}),c.jsx("p",{className:"mt-1 text-3xl font-semibold",children:e})]}),c.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:c.jsx(r,{className:"w-6 h-6 text-primary-600"})})]})})}function p1({person:t,hideStar:e=!1}){var r,n;return c.jsxs(Le,{to:`/people/${t.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[t.thumbnail?c.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-10 h-10 rounded-full object-cover"}):c.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-sm font-medium text-gray-500",children:((r=t.first_name)==null?void 0:r[0])||"?"})}),c.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.name}),((n=t.labels)==null?void 0:n.length)>0&&c.jsx("p",{className:"text-xs text-gray-500 truncate",children:t.labels.join(", ")})]}),t.is_favorite&&!e&&c.jsx(zd,{className:"w-4 h-4 text-yellow-400 fill-current"})]})}function oEe({reminder:t}){var o,a,l;const e=t.days_until;let r="bg-gray-100 text-gray-700";e===0?r="bg-green-100 text-green-700":e<=3?r="bg-orange-100 text-orange-700":e<=7&&(r="bg-yellow-100 text-yellow-700");const n=(a=(o=t.related_people)==null?void 0:o[0])==null?void 0:a.id,i=((l=t.related_people)==null?void 0:l.length)>0,s=c.jsxs(c.Fragment,{children:[c.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${r}`,children:e===0?"Today":`${e}d`}),c.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.title}),c.jsx("p",{className:"text-xs text-gray-500",children:Nn(new Date(t.next_occurrence),"MMMM d, yyyy")})]}),i&&c.jsx("div",{className:"flex -space-x-2 ml-3 flex-shrink-0",children:t.related_people.slice(0,3).map(u=>{var d;return u.thumbnail?c.jsx("img",{src:u.thumbnail,alt:u.name,loading:"lazy",className:"w-10 h-10 rounded-full border-2 border-white object-cover"},u.id):c.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full border-2 border-white flex items-center justify-center",children:c.jsx("span",{className:"text-sm",children:(d=u.name)==null?void 0:d[0]})},u.id)})})]});return i&&n?c.jsx(Le,{to:`/people/${n}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:s}):c.jsx("div",{className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:s})}function aEe({todo:t,onToggle:e}){var n;const r=dm(t);return c.jsxs(Le,{to:`/people/${t.person_id}`,className:"flex items-start p-3 rounded-lg hover:bg-gray-50 transition-colors group",children:[c.jsx("button",{onClick:i=>{i.preventDefault(),i.stopPropagation(),e(t)},className:"mt-0.5 mr-3 flex-shrink-0",title:t.is_completed?"Mark as incomplete":"Mark as complete",children:t.is_completed?c.jsx(Fs,{className:"w-5 h-5 text-primary-600"}):c.jsx(Bd,{className:`w-5 h-5 ${r?"text-red-600":"text-gray-400"}`})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:`text-sm font-medium ${t.is_completed?"line-through text-gray-400":r?"text-red-600":"text-gray-900"}`,children:t.content}),c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.person_thumbnail?c.jsx("img",{src:t.person_thumbnail,alt:t.person_name,loading:"lazy",className:"w-5 h-5 rounded-full object-cover"}):c.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-xs text-gray-500",children:(n=t.person_name)==null?void 0:n[0]})}),c.jsx("span",{className:"text-xs text-gray-500 truncate",children:t.person_name})]})]}),t.due_date&&c.jsxs("div",{className:`ml-3 text-xs text-right flex-shrink-0 ${r&&!t.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:[c.jsx("div",{children:Nn(new Date(t.due_date),"MMM d")}),r&&!t.is_completed&&c.jsx("div",{className:"text-red-600",children:"overdue"})]})]})}function lEe(){return c.jsxs("div",{className:"card p-12 text-center",children:[c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx("div",{className:"p-4 bg-primary-50 rounded-full",children:c.jsx(tre,{className:"w-12 h-12 text-primary-600"})})}),c.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:["Welcome to ",Oc,"!"]}),c.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"Get started by adding your first contact, organization, or important date. Your dashboard will populate as you add more information."}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[c.jsxs(Le,{to:"/people/new",className:"inline-flex items-center px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[c.jsx(or,{className:"w-5 h-5 mr-2"}),"Add Your First Person"]}),c.jsxs(Le,{to:"/companies/new",className:"inline-flex items-center px-6 py-3 bg-white text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[c.jsx(or,{className:"w-5 h-5 mr-2"}),"Add Your First Organization"]})]})]})}function cEe(){var j,P,O;const{data:t,isLoading:e,error:r}=mme(),{data:n}=sre(!1),i=ore(),s=PM(),[o,a]=k.useState(null),[l,u]=k.useState(!1),[d,h]=k.useState(!1),[f,p]=k.useState(null),m=C=>{if(!C.is_completed){a(C),u(!0);return}i.mutate({todoId:C.id,data:{content:C.content,due_date:C.due_date,is_completed:!1}})},g=()=>{o&&(i.mutate({todoId:o.id,data:{content:o.content,due_date:o.due_date,is_completed:!0}}),u(!1),a(null))},v=()=>{if(!o)return;const C=new Date().toISOString().split("T")[0];p({content:o.content,activity_date:C,activity_type:"note",participants:[]}),u(!1),h(!0)},y=async C=>{if(o)try{await s.mutateAsync({personId:o.person_id,data:C}),await i.mutateAsync({todoId:o.id,data:{content:o.content,due_date:o.due_date,is_completed:!0}}),h(!1),a(null),p(null)}catch{alert("Failed to create activity. Please try again.")}};if(e)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(r){const C=((j=r==null?void 0:r.response)==null?void 0:j.status)>=500||!(r!=null&&r.response);return c.jsx("div",{className:"card p-8 text-center",children:c.jsx("div",{className:"text-red-600 mb-2",children:C?c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"font-medium mb-1",children:"Failed to load dashboard data"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Please check your connection and try refreshing the page."})]}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"font-medium mb-1",children:"Unable to load dashboard"}),c.jsx("p",{className:"text-sm text-gray-600",children:((O=(P=r==null?void 0:r.response)==null?void 0:P.data)==null?void 0:O.message)||"An error occurred while loading your data."})]})})})}const{stats:b,recent_people:w,upcoming_reminders:x,favorites:S,recently_contacted:_}=t||{};if(((b==null?void 0:b.total_people)||0)+((b==null?void 0:b.total_companies)||0)+((b==null?void 0:b.total_dates)||0)===0)return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsx(ta,{title:"Total people",value:0,icon:Pn,href:"/people"}),c.jsx(ta,{title:"Organizations",value:0,icon:Ir,href:"/companies"}),c.jsx(ta,{title:"Events",value:0,icon:bo,href:"/dates"}),c.jsx(ta,{title:"Open todos",value:0,icon:Fs,href:"/todos"})]}),c.jsx(lEe,{})]});const T=(n==null?void 0:n.slice(0,5))||[];return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsx(ta,{title:"Total people",value:(b==null?void 0:b.total_people)||0,icon:Pn,href:"/people"}),c.jsx(ta,{title:"Organizations",value:(b==null?void 0:b.total_companies)||0,icon:Ir,href:"/companies"}),c.jsx(ta,{title:"Events",value:(b==null?void 0:b.total_dates)||0,icon:bo,href:"/dates"}),c.jsx(ta,{title:"Open todos",value:(b==null?void 0:b.open_todos_count)||0,icon:Fs,href:"/todos"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"card",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx(bo,{className:"w-5 h-5 mr-2 text-gray-500"}),"Upcoming reminders"]}),c.jsxs(Le,{to:"/dates",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all reminders",c.jsx(kx,{className:"w-4 h-4 ml-1"})]})]}),c.jsx("div",{className:"divide-y divide-gray-100",children:(x==null?void 0:x.length)>0?x.map(C=>c.jsx(oEe,{reminder:C},C.id)):c.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No upcoming reminders"})})]}),c.jsxs("div",{className:"card",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx(Fs,{className:"w-5 h-5 mr-2 text-gray-500"}),"Open todos"]}),c.jsxs(Le,{to:"/todos",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all todos",c.jsx(kx,{className:"w-4 h-4 ml-1"})]})]}),c.jsx("div",{className:"divide-y divide-gray-100",children:T.length>0?T.map(C=>c.jsx(aEe,{todo:C,onToggle:m},C.id)):c.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No open todos"})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx(zd,{className:"w-5 h-5 mr-2 text-yellow-500 fill-current"}),"Favorites"]})}),(S==null?void 0:S.length)>0?c.jsx("div",{className:"divide-y divide-gray-100",children:S.slice(0,5).map(C=>c.jsx(p1,{person:C,hideStar:!0},C.id))}):c.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No favorites yet"})]}),c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx(D0,{className:"w-5 h-5 mr-2 text-gray-500"}),"Recently contacted"]})}),(_==null?void 0:_.length)>0?c.jsx("div",{className:"divide-y divide-gray-100",children:_.map(C=>c.jsx(p1,{person:C},C.id))}):c.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No recent activities yet"})]}),c.jsxs("div",{className:"card",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx(Pn,{className:"w-5 h-5 mr-2 text-gray-500"}),"Recently edited"]}),c.jsxs(Le,{to:"/people",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all",c.jsx(kx,{className:"w-4 h-4 ml-1"})]})]}),c.jsx("div",{className:"divide-y divide-gray-100",children:(w==null?void 0:w.length)>0?w.map(C=>c.jsx(p1,{person:C},C.id)):c.jsxs("p",{className:"p-4 text-sm text-gray-500 text-center",children:["No people yet. ",c.jsx(Le,{to:"/people/new",className:"text-primary-600",children:"Add someone"})]})})]})]}),c.jsx(qM,{isOpen:l,onClose:()=>{u(!1),a(null)},todo:o,onComplete:g,onCompleteAsActivity:v}),c.jsx(kA,{isOpen:d,onClose:()=>{h(!1),a(null),p(null)},onSubmit:y,isLoading:s.isPending,personId:o==null?void 0:o.person_id,initialData:f})]})}function GF(t){var i;const e=((i=t.acf)==null?void 0:i.work_history)||[];if(e.length===0)return null;const r=e.find(s=>s.is_current&&s.company);if(r)return r.company;const n=e.filter(s=>s.company).sort((s,o)=>{const a=s.start_date?new Date(s.start_date):new Date(0);return(o.start_date?new Date(o.start_date):new Date(0))-a});return n.length>0?n[0].company:null}function uEe({person:t,companyName:e,isDeceased:r}){var n,i;return c.jsx(Le,{to:`/people/${t.id}`,className:"card p-4 hover:shadow-md transition-shadow",children:c.jsxs("div",{className:"flex items-start",children:[t.thumbnail?c.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-12 h-12 rounded-full object-cover"}):c.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-lg font-medium text-gray-500",children:((n=t.first_name)==null?void 0:n[0])||"?"})}),c.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsxs("h3",{className:"text-sm font-medium text-gray-900 truncate",children:[t.name,r&&c.jsx("span",{className:"ml-1 text-gray-500",children:""})]}),t.is_favorite&&c.jsx(zd,{className:"w-4 h-4 ml-1 text-yellow-400 fill-current flex-shrink-0"})]}),e&&c.jsx("p",{className:"text-xs text-gray-500 mt-0.5 truncate",children:e}),((i=t.labels)==null?void 0:i.length)>0&&c.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.labels.slice(0,3).map(s=>c.jsx("span",{className:"inline-flex px-2 py-0.5 text-xs rounded-full bg-gray-100 text-gray-600",children:s},s))})]})]})})}function dEe(){var Oe,gt;const[t,e]=k.useState(!1),[r,n]=k.useState(!1),[i,s]=k.useState([]),[o,a]=k.useState(""),[l,u]=k.useState(""),[d,h]=k.useState("all"),[f,p]=k.useState(""),[m,g]=k.useState("first_name"),[v,y]=k.useState("asc"),[b,w]=k.useState(!1),[x,S]=k.useState(!1),_=k.useRef(null),E=k.useRef(null),N=Fn(),T=rt(),{data:j,isLoading:P,error:O}=Gc(),{data:C=[]}=z0(),D=(Oe=window.prmConfig)==null?void 0:Oe.userId,F=We({mutationFn:async U=>{const ce=[];U.email&&ce.push({contact_type:"email",contact_value:U.email,contact_label:"Email"}),U.phone&&ce.push({contact_type:U.phone_type||"mobile",contact_value:U.phone,contact_label:U.phone_type==="mobile"?"Mobile":"Phone"});const Me={title:`${U.first_name} ${U.last_name}`.trim(),status:"publish",acf:{first_name:U.first_name,last_name:U.last_name,nickname:U.nickname,gender:U.gender||null,pronouns:U.pronouns||null,how_we_met:U.how_we_met,is_favorite:U.is_favorite,contact_info:ce,_visibility:U.visibility||"private",_assigned_workspaces:U.assigned_workspaces||[]}},Fe=await He.createPerson(Me),Tt=Fe.data.id;if(U.email)try{await _e.sideloadGravatar(Tt,U.email)}catch{}if(U.birthday&&U.birthdayType)try{await He.createDate({title:`${U.first_name}'s Birthday`,status:"publish",date_type:[U.birthdayType.id],acf:{date_value:U.birthday,is_recurring:!0,related_people:[Tt]}})}catch{}return Fe.data},onSuccess:U=>{T.invalidateQueries({queryKey:["people"]}),T.invalidateQueries({queryKey:["dashboard"]}),T.invalidateQueries({queryKey:["reminders"]}),w(!1),N(`/people/${U.id}`)}}),$=async U=>{S(!0);try{await F.mutateAsync(U)}finally{S(!1)}},{data:L}=st({queryKey:["person-labels"],queryFn:async()=>(await He.getPersonLabels()).data}),M=(L==null?void 0:L.map(U=>U.name))||[],W=k.useMemo(()=>{if(!j)return[];const U=j.map(ce=>ce.birth_year).filter(ce=>ce!=null);return[...new Set(U)].sort((ce,Me)=>Me-ce)},[j]);k.useEffect(()=>{const U=ce=>{E.current&&!E.current.contains(ce.target)&&_.current&&!_.current.contains(ce.target)&&e(!1)};return document.addEventListener("mousedown",U),()=>{document.removeEventListener("mousedown",U)}},[]);const Y=k.useMemo(()=>{if(!j)return[];let U=[...j];if(r&&(U=U.filter(ce=>ce.is_favorite)),i.length>0&&(U=U.filter(ce=>{const Me=ce.labels||[];return i.some(Fe=>Me.includes(Fe))})),o){const ce=parseInt(o,10);U=U.filter(Me=>Me.birth_year===ce)}if(l){const ce=new Date;let Me;switch(l){case"7":Me=new Date(ce.setDate(ce.getDate()-7));break;case"30":Me=new Date(ce.setDate(ce.getDate()-30));break;case"90":Me=new Date(ce.setDate(ce.getDate()-90));break;case"365":Me=new Date(ce.setDate(ce.getDate()-365));break;default:Me=null}Me&&(U=U.filter(Fe=>Fe.modified?new Date(Fe.modified)>=Me:!1))}return d==="mine"?U=U.filter(ce=>ce.author===D):d==="shared"&&(U=U.filter(ce=>ce.author!==D)),f&&(U=U.filter(ce=>{var Fe;return(((Fe=ce.acf)==null?void 0:Fe._assigned_workspaces)||[]).includes(parseInt(f))})),U.sort((ce,Me)=>{var Tr,dt,lr,Ni,Jt,A,q,z;let Fe,Tt;if(m==="modified"){Fe=ce.modified?new Date(ce.modified).getTime():0,Tt=Me.modified?new Date(Me.modified).getTime():0;const ae=Fe-Tt;return v==="asc"?ae:-ae}if(m==="first_name"?(Fe=(((Tr=ce.acf)==null?void 0:Tr.first_name)||ce.first_name||"").toLowerCase(),Tt=(((dt=Me.acf)==null?void 0:dt.first_name)||Me.first_name||"").toLowerCase()):(Fe=(((lr=ce.acf)==null?void 0:lr.last_name)||ce.last_name||"").toLowerCase(),Tt=(((Ni=Me.acf)==null?void 0:Ni.last_name)||Me.last_name||"").toLowerCase()),Fe===Tt){const ae=m==="first_name"?(((Jt=ce.acf)==null?void 0:Jt.last_name)||ce.last_name||"").toLowerCase():(((A=ce.acf)==null?void 0:A.first_name)||ce.first_name||"").toLowerCase(),ee=m==="first_name"?(((q=Me.acf)==null?void 0:q.last_name)||Me.last_name||"").toLowerCase():(((z=Me.acf)==null?void 0:z.first_name)||Me.first_name||"").toLowerCase(),J=ae.localeCompare(ee);return v==="asc"?J:-J}const Yr=Fe.localeCompare(Tt);return v==="asc"?Yr:-Yr})},[j,r,i,o,l,d,f,D,m,v]),Q=r||i.length>0||o||l||d!=="all"||f,pe=U=>{s(ce=>ce.includes(U)?ce.filter(Me=>Me!==U):[...ce,U])},K=()=>{n(!1),s([]),a(""),u(""),h("all"),p("")},oe=k.useMemo(()=>{if(!Y)return[];const U=Y.map(ce=>GF(ce)).filter(Boolean);return[...new Set(U)]},[Y]),{data:Te}=st({queryKey:["companies","batch",oe.sort().join(",")],queryFn:async()=>oe.length===0?[]:(await He.getCompanies({per_page:100,include:oe.join(",")})).data,enabled:oe.length>0}),me=k.useMemo(()=>{const U={};return Te&&Te.forEach(ce=>{U[ce.id]=ur(ce)}),U},[Te]),Be=k.useMemo(()=>{const U={};return Y.forEach(ce=>{const Me=GF(ce);Me&&me[Me]&&(U[ce.id]=me[Me])}),U},[Y,me]);return c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsxs("div",{className:"flex items-center gap-2 border border-gray-200 rounded-lg p-1",children:[c.jsxs("select",{value:m,onChange:U=>g(U.target.value),className:"text-sm border-0 bg-transparent focus:ring-0 focus:outline-none cursor-pointer",children:[c.jsx("option",{value:"first_name",children:"First name"}),c.jsx("option",{value:"last_name",children:"Last name"}),c.jsx("option",{value:"modified",children:"Last modified"})]}),c.jsx("div",{className:"h-4 w-px bg-gray-300"}),c.jsx("button",{onClick:()=>y(v==="asc"?"desc":"asc"),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:`Sort ${v==="asc"?"descending":"ascending"}`,children:v==="asc"?c.jsx(Vpe,{className:"w-4 h-4 text-gray-600"}):c.jsx(zpe,{className:"w-4 h-4 text-gray-600"})})]}),c.jsxs("div",{className:"relative",ref:_,children:[c.jsxs("button",{onClick:()=>e(!t),className:`btn-secondary ${Q?"bg-primary-50 text-primary-700 border-primary-200":""}`,children:[c.jsx(xp,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Filter"}),Q&&c.jsx("span",{className:"ml-2 px-1.5 py-0.5 bg-primary-600 text-white text-xs rounded-full",children:i.length+(r?1:0)+(o?1:0)+(l?1:0)})]}),t&&c.jsx("div",{ref:E,className:"absolute top-full left-0 mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsx("div",{children:c.jsxs("label",{className:"flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:r,onChange:U=>n(U.target.checked),className:"sr-only"}),c.jsx("div",{className:`flex items-center justify-center w-5 h-5 border-2 rounded mr-3 ${r?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:r&&c.jsx(Xy,{className:"w-3 h-3 text-white"})}),c.jsxs("div",{className:"flex items-center",children:[c.jsx(zd,{className:"w-4 h-4 mr-2 text-yellow-400 fill-current"}),c.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Favorites only"})]})]})}),M.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Labels"}),c.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:M.map(U=>c.jsxs("label",{className:"flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded",children:[c.jsx("input",{type:"checkbox",checked:i.includes(U),onChange:()=>pe(U),className:"sr-only"}),c.jsx("div",{className:`flex items-center justify-center w-5 h-5 border-2 rounded mr-3 ${i.includes(U)?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:i.includes(U)&&c.jsx(Xy,{className:"w-3 h-3 text-white"})}),c.jsx("span",{className:"text-sm text-gray-700",children:U})]},U))})]}),W.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Birth year"}),c.jsxs("select",{value:o,onChange:U=>a(U.target.value),className:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[c.jsx("option",{value:"",children:"All years"}),W.map(U=>c.jsx("option",{value:U,children:U},U))]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Last modified"}),c.jsxs("select",{value:l,onChange:U=>u(U.target.value),className:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[c.jsx("option",{value:"",children:"Any time"}),c.jsx("option",{value:"7",children:"Last 7 days"}),c.jsx("option",{value:"30",children:"Last 30 days"}),c.jsx("option",{value:"90",children:"Last 90 days"}),c.jsx("option",{value:"365",children:"Last year"})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Ownership"}),c.jsx("div",{className:"space-y-1",children:[{value:"all",label:"All Contacts"},{value:"mine",label:"My Contacts"},{value:"shared",label:"Shared with Me"}].map(U=>c.jsxs("label",{className:"flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded",children:[c.jsx("input",{type:"radio",name:"ownership",value:U.value,checked:d===U.value,onChange:ce=>h(ce.target.value),className:"sr-only"}),c.jsx("div",{className:`flex items-center justify-center w-4 h-4 border-2 rounded-full mr-3 ${d===U.value?"border-primary-600":"border-gray-300"}`,children:d===U.value&&c.jsx("div",{className:"w-2 h-2 bg-primary-600 rounded-full"})}),c.jsx("span",{className:"text-sm text-gray-700",children:U.label})]},U.value))})]}),C.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Workspace"}),c.jsxs("select",{value:f,onChange:U=>p(U.target.value),className:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[c.jsx("option",{value:"",children:"All Workspaces"}),C.map(U=>c.jsx("option",{value:U.id,children:U.title},U.id))]})]}),Q&&c.jsx("button",{onClick:K,className:"w-full text-sm text-primary-600 hover:text-primary-700 font-medium pt-2 border-t border-gray-200",children:"Clear all filters"})]})})]}),Q&&c.jsxs("div",{className:"flex flex-wrap gap-2",children:[r&&c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-800 rounded-full text-xs",children:[c.jsx(zd,{className:"w-3 h-3"}),"Favorites",c.jsx("button",{onClick:()=>n(!1),className:"hover:text-primary-600",children:c.jsx(mt,{className:"w-3 h-3"})})]}),i.map(U=>c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:[U,c.jsx("button",{onClick:()=>pe(U),className:"hover:text-gray-600",children:c.jsx(mt,{className:"w-3 h-3"})})]},U)),o&&c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:["Born ",o,c.jsx("button",{onClick:()=>a(""),className:"hover:text-gray-600",children:c.jsx(mt,{className:"w-3 h-3"})})]}),l&&c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:["Modified: ",l==="7"?"Last 7 days":l==="30"?"Last 30 days":l==="90"?"Last 90 days":"Last year",c.jsx("button",{onClick:()=>u(""),className:"hover:text-gray-600",children:c.jsx(mt,{className:"w-3 h-3"})})]}),d!=="all"&&c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-800 rounded-full text-xs",children:[d==="mine"?"My Contacts":"Shared with Me",c.jsx("button",{onClick:()=>h("all"),className:"hover:text-primary-600",children:c.jsx(mt,{className:"w-3 h-3"})})]}),f&&c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:[((gt=C.find(U=>U.id===parseInt(f)))==null?void 0:gt.title)||"Workspace",c.jsx("button",{onClick:()=>p(""),className:"hover:text-blue-600",children:c.jsx(mt,{className:"w-3 h-3"})})]})]}),c.jsxs("button",{onClick:()=>w(!0),className:"btn-primary",children:[c.jsx(or,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Add person"})]})]})}),P&&c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),O&&c.jsx("div",{className:"card p-6 text-center",children:c.jsx("p",{className:"text-red-600",children:"Failed to load people."})}),!P&&!O&&(j==null?void 0:j.length)===0&&c.jsxs("div",{className:"card p-12 text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(or,{className:"w-6 h-6 text-gray-400"})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No people found"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by adding your first person."}),c.jsxs("button",{onClick:()=>w(!0),className:"btn-primary",children:[c.jsx(or,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Add person"})]})]}),!P&&!O&&(Y==null?void 0:Y.length)>0&&c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Y.map(U=>c.jsx(uEe,{person:U,companyName:Be[U.id],isDeceased:U.is_deceased},U.id))}),!P&&!O&&(j==null?void 0:j.length)>0&&(Y==null?void 0:Y.length)===0&&c.jsxs("div",{className:"card p-12 text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(xp,{className:"w-6 h-6 text-gray-400"})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No people match your filters"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Try adjusting your filters to see more results."}),c.jsx("button",{onClick:K,className:"btn-secondary",children:"Clear filters"})]}),c.jsx(DM,{isOpen:b,onClose:()=>w(!1),onSubmit:$,isLoading:x})]})}const hEe="#0285FF",fEe=k.forwardRef(function({title:e="Bluesky",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=hEe),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[c.jsx("title",{children:e}),c.jsx("path",{d:"M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479.815 2.736 3.713 3.66 6.383 3.364.136-.02.275-.039.415-.056-.138.022-.276.04-.415.056-3.912.58-7.387 2.005-2.83 7.078 5.013 5.19 6.87-1.113 7.823-4.308.953 3.195 2.05 9.271 7.733 4.308 4.267-4.308 1.172-6.498-2.74-7.078a8.741 8.741 0 0 1-.415-.056c.14.017.279.036.415.056 2.67.297 5.568-.628 6.383-3.364.246-.828.624-5.79.624-6.478 0-.69-.139-1.861-.902-2.206-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8Z"})]})}),pEe="#0866FF",mEe=k.forwardRef(function({title:e="Facebook",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=pEe),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[c.jsx("title",{children:e}),c.jsx("path",{d:"M9.101 23.691v-7.98H6.627v-3.667h2.474v-1.58c0-4.085 1.848-5.978 5.858-5.978.401 0 .955.042 1.468.103a8.68 8.68 0 0 1 1.141.195v3.325a8.623 8.623 0 0 0-.653-.036 26.805 26.805 0 0 0-.733-.009c-.707 0-1.259.096-1.675.309a1.686 1.686 0 0 0-.679.622c-.258.42-.374.995-.374 1.752v1.297h3.919l-.386 2.103-.287 1.564h-3.246v8.245C19.396 23.238 24 18.179 24 12.044c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.628 3.874 10.35 9.101 11.647Z"})]})}),gEe="#FF0069",yEe=k.forwardRef(function({title:e="Instagram",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=gEe),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[c.jsx("title",{children:e}),c.jsx("path",{d:"M7.0301.084c-1.2768.0602-2.1487.264-2.911.5634-.7888.3075-1.4575.72-2.1228 1.3877-.6652.6677-1.075 1.3368-1.3802 2.127-.2954.7638-.4956 1.6365-.552 2.914-.0564 1.2775-.0689 1.6882-.0626 4.947.0062 3.2586.0206 3.6671.0825 4.9473.061 1.2765.264 2.1482.5635 2.9107.308.7889.72 1.4573 1.388 2.1228.6679.6655 1.3365 1.0743 2.1285 1.38.7632.295 1.6361.4961 2.9134.552 1.2773.056 1.6884.069 4.9462.0627 3.2578-.0062 3.668-.0207 4.9478-.0814 1.28-.0607 2.147-.2652 2.9098-.5633.7889-.3086 1.4578-.72 2.1228-1.3881.665-.6682 1.0745-1.3378 1.3795-2.1284.2957-.7632.4966-1.636.552-2.9124.056-1.2809.0692-1.6898.063-4.948-.0063-3.2583-.021-3.6668-.0817-4.9465-.0607-1.2797-.264-2.1487-.5633-2.9117-.3084-.7889-.72-1.4568-1.3876-2.1228C21.2982 1.33 20.628.9208 19.8378.6165 19.074.321 18.2017.1197 16.9244.0645 15.6471.0093 15.236-.005 11.977.0014 8.718.0076 8.31.0215 7.0301.0839m.1402 21.6932c-1.17-.0509-1.8053-.2453-2.2287-.408-.5606-.216-.96-.4771-1.3819-.895-.422-.4178-.6811-.8186-.9-1.378-.1644-.4234-.3624-1.058-.4171-2.228-.0595-1.2645-.072-1.6442-.079-4.848-.007-3.2037.0053-3.583.0607-4.848.05-1.169.2456-1.805.408-2.2282.216-.5613.4762-.96.895-1.3816.4188-.4217.8184-.6814 1.3783-.9003.423-.1651 1.0575-.3614 2.227-.4171 1.2655-.06 1.6447-.072 4.848-.079 3.2033-.007 3.5835.005 4.8495.0608 1.169.0508 1.8053.2445 2.228.408.5608.216.96.4754 1.3816.895.4217.4194.6816.8176.9005 1.3787.1653.4217.3617 1.056.4169 2.2263.0602 1.2655.0739 1.645.0796 4.848.0058 3.203-.0055 3.5834-.061 4.848-.051 1.17-.245 1.8055-.408 2.2294-.216.5604-.4763.96-.8954 1.3814-.419.4215-.8181.6811-1.3783.9-.4224.1649-1.0577.3617-2.2262.4174-1.2656.0595-1.6448.072-4.8493.079-3.2045.007-3.5825-.006-4.848-.0608M16.953 5.5864A1.44 1.44 0 1 0 18.39 4.144a1.44 1.44 0 0 0-1.437 1.4424M5.8385 12.012c.0067 3.4032 2.7706 6.1557 6.173 6.1493 3.4026-.0065 6.157-2.7701 6.1506-6.1733-.0065-3.4032-2.771-6.1565-6.174-6.1498-3.403.0067-6.156 2.771-6.1496 6.1738M8 12.0077a4 4 0 1 1 4.008 3.9921A3.9996 3.9996 0 0 1 8 12.0077"})]})}),vEe="#4A154B",bEe=k.forwardRef(function({title:e="Slack",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=vEe),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[c.jsx("title",{children:e}),c.jsx("path",{d:"M5.042 15.165a2.528 2.528 0 0 1-2.52 2.523A2.528 2.528 0 0 1 0 15.165a2.527 2.527 0 0 1 2.522-2.52h2.52v2.52zM6.313 15.165a2.527 2.527 0 0 1 2.521-2.52 2.527 2.527 0 0 1 2.521 2.52v6.313A2.528 2.528 0 0 1 8.834 24a2.528 2.528 0 0 1-2.521-2.522v-6.313zM8.834 5.042a2.528 2.528 0 0 1-2.521-2.52A2.528 2.528 0 0 1 8.834 0a2.528 2.528 0 0 1 2.521 2.522v2.52H8.834zM8.834 6.313a2.528 2.528 0 0 1 2.521 2.521 2.528 2.528 0 0 1-2.521 2.521H2.522A2.528 2.528 0 0 1 0 8.834a2.528 2.528 0 0 1 2.522-2.521h6.312zM18.956 8.834a2.528 2.528 0 0 1 2.522-2.521A2.528 2.528 0 0 1 24 8.834a2.528 2.528 0 0 1-2.522 2.521h-2.522V8.834zM17.688 8.834a2.528 2.528 0 0 1-2.523 2.521 2.527 2.527 0 0 1-2.52-2.521V2.522A2.527 2.527 0 0 1 15.165 0a2.528 2.528 0 0 1 2.523 2.522v6.312zM15.165 18.956a2.528 2.528 0 0 1 2.523 2.522A2.528 2.528 0 0 1 15.165 24a2.527 2.527 0 0 1-2.52-2.522v-2.522h2.52zM15.165 17.688a2.527 2.527 0 0 1-2.52-2.523 2.526 2.526 0 0 1 2.52-2.52h6.313A2.527 2.527 0 0 1 24 15.165a2.528 2.528 0 0 1-2.522 2.523h-6.313z"})]})}),xEe="#000000",wEe=k.forwardRef(function({title:e="Threads",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=xEe),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[c.jsx("title",{children:e}),c.jsx("path",{d:"M12.186 24h-.007c-3.581-.024-6.334-1.205-8.184-3.509C2.35 18.44 1.5 15.586 1.472 12.01v-.017c.03-3.579.879-6.43 2.525-8.482C5.845 1.205 8.6.024 12.18 0h.014c2.746.02 5.043.725 6.826 2.098 1.677 1.29 2.858 3.13 3.509 5.467l-2.04.569c-1.104-3.96-3.898-5.984-8.304-6.015-2.91.022-5.11.936-6.54 2.717C4.307 6.504 3.616 8.914 3.589 12c.027 3.086.718 5.496 2.057 7.164 1.43 1.783 3.631 2.698 6.54 2.717 2.623-.02 4.358-.631 5.8-2.045 1.647-1.613 1.618-3.593 1.09-4.798-.31-.71-.873-1.3-1.634-1.75-.192 1.352-.622 2.446-1.284 3.272-.886 1.102-2.14 1.704-3.73 1.79-1.202.065-2.361-.218-3.259-.801-1.063-.689-1.685-1.74-1.752-2.964-.065-1.19.408-2.285 1.33-3.082.88-.76 2.119-1.207 3.583-1.291a13.853 13.853 0 0 1 3.02.142c-.126-.742-.375-1.332-.75-1.757-.513-.586-1.308-.883-2.359-.89h-.029c-.844 0-1.992.232-2.721 1.32L7.734 7.847c.98-1.454 2.568-2.256 4.478-2.256h.044c3.194.02 5.097 1.975 5.287 5.388.108.046.216.094.321.142 1.49.7 2.58 1.761 3.154 3.07.797 1.82.871 4.79-1.548 7.158-1.85 1.81-4.094 2.628-7.277 2.65Zm1.003-11.69c-.242 0-.487.007-.739.021-1.836.103-2.98.946-2.916 2.143.067 1.256 1.452 1.839 2.784 1.767 1.224-.065 2.818-.543 3.086-3.71a10.5 10.5 0 0 0-2.215-.221z"})]})}),SEe="#25D366",_Ee=k.forwardRef(function({title:e="WhatsApp",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=SEe),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[c.jsx("title",{children:e}),c.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})]})}),EEe="#000000",NEe=k.forwardRef(function({title:e="X",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=EEe),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[c.jsx("title",{children:e}),c.jsx("path",{d:"M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"})]})}),kEe={Phone:kM,Mail:A0,Users:Pn,Coffee:Kte,Utensils:nre,FileText:M0,Circle:hI,MessageCircle:D0};function CEe({timeline:t,onEdit:e,onDelete:r,onToggleTodo:n,personId:i,allPeople:s=[]}){const o=k.useMemo(()=>Gye(t||[]),[t]),a=f=>s.find(p=>p.id.toString()===f.toString()),l=f=>{if(f.type==="todo")return f.is_completed?dI:Bd;if(f.type==="activity"&&f.activity_type){const p=Qye(f.activity_type);return kEe[p]||hI}return f.type==="note"?M0:hI},u=f=>{var S;const p=l(f),m=f.type==="todo",g=f.type==="activity",v=f.type==="note";let y=f.activity_date||f.created;f.activity_date&&f.activity_time&&(y=`${f.activity_date}T${f.activity_time}`);const b=Yye(y),w=Jye(f),x=m&&dm(f);return c.jsxs("div",{className:`relative ${m?"pl-0":"pl-8"} pb-6 group`,children:[!m&&c.jsx("div",{className:"absolute left-0 top-1",children:c.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${g?"bg-blue-500 border-blue-500":"bg-gray-400 border-gray-400"}`})}),c.jsx("div",{className:`${w}`,children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[!m&&c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx(p,{className:`w-4 h-4 flex-shrink-0 ${g?"text-blue-600":"text-gray-500"}`}),g&&f.activity_type&&c.jsx("span",{className:"text-xs font-medium text-gray-600",children:Xye(f.activity_type)}),c.jsx("span",{className:"text-xs text-gray-400",children:""}),c.jsx("span",{className:"text-xs text-gray-500",children:b})]}),c.jsxs("div",{className:"flex items-start gap-2",children:[m&&c.jsx("button",{onClick:()=>n&&n(f),className:"mt-0.5 flex-shrink-0",title:f.is_completed?"Mark as incomplete":"Mark as complete",children:f.is_completed?c.jsx(dI,{className:`w-5 h-5 ${x?"text-red-600":"text-primary-600"}`}):c.jsx(Bd,{className:`w-5 h-5 ${x?"text-red-600":"text-gray-400"}`})}),(v||g)&&((S=f.content)!=null&&S.includes("<"))?c.jsx("div",{className:`text-sm flex-1 timeline-content ${f.is_completed?"line-through opacity-60":""}`,dangerouslySetInnerHTML:{__html:f.content}}):c.jsx("p",{className:`text-sm flex-1 ${f.is_completed?"line-through opacity-60":""}`,children:f.content})]}),g&&f.participants&&f.participants.length>0&&c.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[c.jsx("span",{className:"text-xs text-gray-500",children:"With:"}),f.participants.map(_=>{const E=a(_);return E?c.jsxs(Le,{to:`/people/${_}`,className:"inline-flex items-center gap-1 text-xs text-primary-600 hover:text-primary-700 hover:underline",children:[c.jsx(NM,{className:"w-3 h-3"}),E.name]},_):null})]}),m&&f.due_date&&c.jsx("div",{className:"mt-2",children:c.jsxs("span",{className:`text-xs ${x?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",Nn(new Date(f.due_date),"MMM d, yyyy"),x&&" (overdue)"]})})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[e&&c.jsx("button",{onClick:()=>e(f),className:"p-1 hover:bg-gray-100 rounded",title:"Edit",children:c.jsx(oa,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),r&&c.jsx("button",{onClick:()=>r(f),className:"p-1 hover:bg-red-50 rounded",title:"Delete",children:c.jsx(pn,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})})]},f.id)},d=(f,p)=>!p||p.length===0?null:c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3 uppercase tracking-wide",children:f}),c.jsx("div",{className:"relative pl-4 border-l-2 border-gray-200",children:p.map(u)})]});return o.today.length>0||o.yesterday.length>0||o.thisWeek.length>0||o.older.length>0?c.jsxs("div",{className:"space-y-6",children:[d("Today",o.today),d("Yesterday",o.yesterday),d("This week",o.thisWeek),d("Older",o.older)]}):c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-sm text-gray-500",children:"No timeline items yet."})})}function TEe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,initialContent:i=""}){const[s,o]=k.useState("");if(k.useEffect(()=>{t&&o(i||"")},[t,i]),!t)return null;const a=u=>{u.preventDefault(),!Qv(s)&&(r(s),o(""))},l=()=>{o(""),e()};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Add note"}),c.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(mt,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:a,className:"p-4",children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Note"}),c.jsx(wse,{value:s,onChange:o,placeholder:"Enter your note...",disabled:n,autoFocus:!0,minHeight:"150px"})]}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx("button",{type:"button",onClick:l,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n||Qv(s),children:n?"Adding...":"Add note"})]})]})]})})}function Sse({isOpen:t,onClose:e,onSubmit:r,isLoading:n,todo:i=null}){const[s,o]=k.useState(""),[a,l]=k.useState(""),[u,d]=k.useState(!1),h=()=>new Date().toISOString().split("T")[0];if(k.useEffect(()=>{i?(o(i.content||""),l(i.due_date||""),d(i.is_completed||!1)):(o(""),l(h()),d(!1))},[i,t]),!t)return null;const f=g=>{g.preventDefault(),s.trim()&&(r({content:s.trim(),due_date:a||null,is_completed:u}),i||(o(""),l(h()),d(!1)))},p=()=>{i||(o(""),l(h()),d(!1)),e()},m=g=>{if(!g)return"";try{return new Date(g).toISOString().split("T")[0]}catch{return""}};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:i?"Edit todo":"Add todo"}),c.jsx("button",{onClick:p,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(mt,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:f,className:"p-4",children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"todo-content",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),c.jsx("textarea",{id:"todo-content",value:s,onChange:g=>o(g.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"What needs to be done?",disabled:n,autoFocus:!0})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"todo-due-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Due date (optional)"}),c.jsx("input",{id:"todo-due-date",type:"date",value:m(a),onChange:g=>l(g.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),i&&c.jsx("div",{className:"mb-4",children:c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:u,onChange:g=>d(g.target.checked),className:"mr-2",disabled:n}),c.jsx("span",{className:"text-sm text-gray-700",children:"Completed"})]})}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx("button",{type:"button",onClick:p,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n||!s.trim(),children:n?i?"Saving...":"Adding...":i?"Save":"Add todo"})]})]})]})})}const jEe=[{value:"email",label:"Email"},{value:"phone",label:"Phone"},{value:"mobile",label:"Mobile"},{value:"website",label:"Website"},{value:"calendar",label:"Calendar link"},{value:"linkedin",label:"LinkedIn"},{value:"twitter",label:"Twitter"},{value:"bluesky",label:"Bluesky"},{value:"threads",label:"Threads"},{value:"instagram",label:"Instagram"},{value:"facebook",label:"Facebook"},{value:"slack",label:"Slack"},{value:"other",label:"Other"}];function OEe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,contactInfo:i=[]}){const{register:s,control:o,handleSubmit:a,reset:l,formState:{errors:u}}=Vs({defaultValues:{contacts:i.length>0?i.map(g=>({contact_type:g.contact_type||"",contact_label:g.contact_label||"",contact_value:g.contact_value||""})):[]}}),{fields:d,append:h,remove:f}=Qme({control:o,name:"contacts"});if(k.useEffect(()=>{t&&l({contacts:i.length>0?i.map(g=>({contact_type:g.contact_type||"",contact_label:g.contact_label||"",contact_value:g.contact_value||""})):[]})},[t,i,l]),!t)return null;const p=g=>{const v=g.contacts.filter(y=>y.contact_type&&y.contact_value);r(v)},m=()=>{h({contact_type:"",contact_label:"",contact_value:""})};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Edit contact details"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(mt,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:a(p),className:"flex flex-col flex-1 overflow-hidden",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[d.length===0?c.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:'No contact details yet. Click "Add contact detail" to add one.'}):c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"hidden md:grid md:grid-cols-12 gap-2 text-xs font-medium text-gray-500 px-1",children:[c.jsx("div",{className:"col-span-3",children:"Type"}),c.jsx("div",{className:"col-span-3",children:"Label"}),c.jsx("div",{className:"col-span-5",children:"Value"}),c.jsx("div",{className:"col-span-1"})]}),d.map((g,v)=>c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-2 p-3 md:p-2 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"md:hidden text-xs font-medium text-gray-500 mb-1 block",children:"Type"}),c.jsxs("select",{...s(`contacts.${v}.contact_type`,{required:!0}),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n,children:[c.jsx("option",{value:"",children:"Select type..."}),jEe.map(y=>c.jsx("option",{value:y.value,children:y.label},y.value))]})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"md:hidden text-xs font-medium text-gray-500 mb-1 block",children:"Label"}),c.jsx("input",{...s(`contacts.${v}.contact_label`),placeholder:"e.g., Work",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),c.jsxs("div",{className:"md:col-span-5",children:[c.jsx("label",{className:"md:hidden text-xs font-medium text-gray-500 mb-1 block",children:"Value"}),c.jsx("input",{...s(`contacts.${v}.contact_value`,{required:!0}),placeholder:"e.g., john@example.com",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),c.jsx("div",{className:"md:col-span-1 flex items-center justify-end md:justify-center",children:c.jsx("button",{type:"button",onClick:()=>f(v),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove",disabled:n,children:c.jsx(pn,{className:"w-4 h-4"})})})]},g.id))]}),c.jsxs("button",{type:"button",onClick:m,className:"mt-4 w-full py-2 px-4 border-2 border-dashed border-gray-300 rounded-lg text-sm text-gray-600 hover:border-gray-400 hover:text-gray-700 transition-colors flex items-center justify-center gap-2",disabled:n,children:[c.jsx(or,{className:"w-4 h-4"}),"Add contact detail"]})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":"Save changes"})]})]})]})})}function PEe({value:t,onChange:e,people:r,isLoading:n,excludePersonId:i}){const[s,o]=k.useState(""),[a,l]=k.useState(!1),u=k.useRef(null),d=k.useRef(null),h=k.useMemo(()=>r.filter(b=>b.id!==i).sort((b,w)=>{var _,E;const x=(b.first_name||((_=b.acf)==null?void 0:_.first_name)||"").toLowerCase(),S=(w.first_name||((E=w.acf)==null?void 0:E.first_name)||"").toLowerCase();return x<S?-1:x>S?1:0}),[r,i]),f=k.useMemo(()=>{if(!s)return h.slice(0,10);const y=s.toLowerCase();return h.filter(b=>{var _,E;const w=ld(b).toLowerCase(),x=(b.first_name||((_=b.acf)==null?void 0:_.first_name)||"").toLowerCase(),S=(b.last_name||((E=b.acf)==null?void 0:E.last_name)||"").toLowerCase();return w.includes(y)||x.includes(y)||S.includes(y)}).slice(0,10)},[h,s]),p=k.useMemo(()=>h.find(y=>y.id===t),[h,t]);k.useEffect(()=>{const y=b=>{d.current&&!d.current.contains(b.target)&&u.current&&!u.current.contains(b.target)&&l(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const m=y=>{e(y),o(""),l(!1)},g=()=>{e(null),o(""),l(!1)},v=p?ld(p):"";return c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"relative",children:p&&!a?c.jsxs("div",{className:"flex items-center justify-between input pr-8 cursor-text",onClick:()=>l(!0),children:[c.jsx("span",{children:v}),c.jsx("button",{type:"button",onClick:y=>{y.stopPropagation(),g()},className:"absolute right-2 text-gray-400 hover:text-gray-600",children:c.jsx(mt,{className:"w-4 h-4"})})]}):c.jsx("input",{ref:u,type:"text",value:s,onChange:y=>{o(y.target.value),l(!0)},onFocus:()=>l(!0),placeholder:"Search for a person...",className:"input",disabled:n})}),a&&(s||!p)&&c.jsx("div",{ref:d,className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:f.length>0?f.map(y=>c.jsx("button",{type:"button",onClick:()=>m(y.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t===y.id?"bg-primary-50":""}`,children:ld(y)},y.id)):c.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No people found"})})]})}function IEe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,relationship:i=null,personId:s,allPeople:o=[],isPeopleLoading:a=!1,onCreatePerson:l}){const u=!!i,{data:d=[],isLoading:h}=st({queryKey:["relationship-types"],queryFn:async()=>(await He.getRelationshipTypes()).data}),{register:f,handleSubmit:p,reset:m,control:g,formState:{errors:v}}=Vs({defaultValues:{related_person:null,relationship_type:"",relationship_label:""}});if(k.useEffect(()=>{t&&m(i?{related_person:i.related_person||null,relationship_type:i.relationship_type?String(i.relationship_type):"",relationship_label:i.relationship_label||""}:{related_person:null,relationship_type:"",relationship_label:""})},[t,i,m]),!t)return null;const y=b=>{r({related_person:b.related_person||null,relationship_type:b.relationship_type?parseInt(b.relationship_type,10):null,relationship_label:b.relationship_label||""})};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:u?"Edit relationship":"Add relationship"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(mt,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:p(y),className:"flex flex-col flex-1 overflow-hidden",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Related person *"}),c.jsx(ev,{name:"related_person",control:g,rules:{required:"Please select a person"},render:({field:b})=>c.jsx(PEe,{value:b.value,onChange:b.onChange,people:o,isLoading:a,excludePersonId:parseInt(s,10)})}),v.related_person&&c.jsx("p",{className:"text-sm text-red-600 mt-1",children:v.related_person.message}),!u&&l&&c.jsx("div",{className:"mt-2",children:c.jsxs("button",{type:"button",onClick:l,className:"inline-flex items-center gap-1 text-sm text-primary-600 hover:text-primary-700",children:[c.jsx(or,{className:"w-4 h-4"}),"Add new person"]})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Relationship type"}),c.jsxs("select",{...f("relationship_type"),className:"input",disabled:h||n,children:[c.jsx("option",{value:"",children:"Select a type..."}),d.map(b=>c.jsx("option",{value:b.id,children:b.name},b.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Custom label"}),c.jsx("input",{...f("relationship_label"),className:"input",placeholder:"e.g., Brother-in-law",disabled:n}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Override the relationship type with a custom label"})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":u?"Save changes":"Add relationship"})]})]})]})})}function REe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,address:i=null}){const s=!!i,{register:o,handleSubmit:a,reset:l,formState:{errors:u}}=Vs({defaultValues:{address_label:"",street:"",postal_code:"",city:"",state:"",country:""}});if(k.useEffect(()=>{t&&l(i?{address_label:i.address_label||"",street:i.street||"",postal_code:i.postal_code||"",city:i.city||"",state:i.state||"",country:i.country||""}:{address_label:"",street:"",postal_code:"",city:"",state:"",country:""})},[t,i,l]),!t)return null;const d=h=>{r({address_label:h.address_label||"",street:h.street||"",postal_code:h.postal_code||"",city:h.city||"",state:h.state||"",country:h.country||""})};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:s?"Edit address":"Add address"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(mt,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:a(d),className:"flex flex-col flex-1 overflow-hidden",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Label"}),c.jsx("input",{...o("address_label"),className:"input",placeholder:"e.g., Home, Work",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Street"}),c.jsx("input",{...o("street"),className:"input",placeholder:"e.g., 123 Main Street",disabled:n})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Postal code"}),c.jsx("input",{...o("postal_code"),className:"input",placeholder:"e.g., 12345",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"City"}),c.jsx("input",{...o("city"),className:"input",placeholder:"e.g., Amsterdam",disabled:n})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"State/Province"}),c.jsx("input",{...o("state"),className:"input",placeholder:"e.g., North Holland",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Country"}),c.jsx("input",{...o("country"),className:"input",placeholder:"e.g., Netherlands",disabled:n})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":s?"Save changes":"Add address"})]})]})]})})}function MEe({value:t,onChange:e,companies:r,isLoading:n}){return c.jsxs("select",{value:t||"",onChange:i=>e(i.target.value?parseInt(i.target.value,10):null),className:"input",disabled:n,children:[c.jsx("option",{value:"",children:"Select an organization..."}),r.map(i=>{var s;return c.jsx("option",{value:i.id,children:((s=i.title)==null?void 0:s.rendered)||i.title},i.id)})]})}function AEe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,workHistoryItem:i=null}){const s=!!i,{data:o=[],isLoading:a}=st({queryKey:["companies","all"],queryFn:async()=>(await He.getCompanies({per_page:100})).data}),l=k.useMemo(()=>[...o].sort((v,y)=>{var x,S;const b=(((x=v.title)==null?void 0:x.rendered)||v.title||"").toLowerCase(),w=(((S=y.title)==null?void 0:S.rendered)||y.title||"").toLowerCase();return b.localeCompare(w)}),[o]),{register:u,handleSubmit:d,reset:h,watch:f,control:p,formState:{errors:m}}=Vs({defaultValues:{company:null,job_title:"",description:"",start_date:"",end_date:"",is_current:!1}});if(f("is_current"),k.useEffect(()=>{t&&h(i?{company:i.company||null,job_title:i.job_title||"",description:i.description||"",start_date:i.start_date||"",end_date:i.end_date||"",is_current:i.is_current||!1}:{company:null,job_title:"",description:"",start_date:"",end_date:"",is_current:!1})},[t,i,h]),!t)return null;const g=v=>{r({company:v.company||null,job_title:v.job_title||"",description:v.description||"",start_date:v.start_date||"",end_date:v.end_date||"",is_current:v.is_current||!1})};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:s?"Edit work history":"Add work history"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(mt,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:d(g),className:"flex flex-col flex-1 overflow-hidden",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Organization"}),c.jsx(ev,{name:"company",control:p,render:({field:v})=>c.jsx(MEe,{value:v.value,onChange:v.onChange,companies:l,isLoading:a||n})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Job title"}),c.jsx("input",{...u("job_title"),className:"input",placeholder:"e.g., Software Engineer",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Description"}),c.jsx("textarea",{...u("description"),className:"input",rows:3,placeholder:"Job description, responsibilities, achievements...",disabled:n})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Start date"}),c.jsx("input",{type:"date",...u("start_date"),className:"input",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"End date"}),c.jsx("input",{type:"date",...u("end_date"),className:"input",disabled:n})]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"is_current",...u("is_current"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),c.jsx("label",{htmlFor:"is_current",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Currently works here"})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":s?"Save changes":"Add work history"})]})]})]})})}function DEe(t,e){return st({queryKey:["shares",t,e],queryFn:async()=>(await _e.getPostShares(e,t)).data,enabled:!!e})}function $Ee(){const t=rt();return We({mutationFn:async({postType:e,postId:r,userId:n,permission:i})=>(await _e.sharePost(r,e,{user_id:n,permission:i})).data,onSuccess:(e,{postType:r,postId:n})=>{t.invalidateQueries({queryKey:["shares",r,n]})}})}function FEe(){const t=rt();return We({mutationFn:async({postType:e,postId:r,userId:n})=>{await _e.unsharePost(r,e,n)},onSuccess:(e,{postType:r,postId:n})=>{t.invalidateQueries({queryKey:["shares",r,n]})}})}function qEe(t){return st({queryKey:["users","search",t],queryFn:async()=>(await _e.searchUsers(t)).data,enabled:(t==null?void 0:t.length)>=2})}function _se({isOpen:t,onClose:e,postType:r,postId:n,postTitle:i}){const[s,o]=k.useState(""),[a,l]=k.useState("view"),u=k.useRef(null),{data:d=[],isLoading:h}=DEe(r,n),{data:f=[],isLoading:p}=qEe(s),m=$Ee(),g=FEe();k.useEffect(()=>{t&&(o(""),setTimeout(()=>{var w;return(w=u.current)==null?void 0:w.focus()},100))},[t]);const v=f.filter(w=>!d.some(x=>x.user_id===w.id)),y=async w=>{await m.mutateAsync({postType:r,postId:n,userId:w.id,permission:a}),o("")},b=async w=>{await g.mutateAsync({postType:r,postId:n,userId:w})};return t?c.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:e}),c.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:c.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-lg shadow-xl",children:[c.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Share"}),c.jsx("p",{className:"text-sm text-gray-500 truncate max-w-xs",children:i})]}),c.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:c.jsx(mt,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"px-6 py-4",children:[c.jsxs("div",{className:"relative mb-4",children:[c.jsx(nl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),c.jsx("input",{ref:u,type:"text",value:s,onChange:w=>o(w.target.value),placeholder:"Search users by name or email...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Permission:"}),c.jsxs("select",{value:a,onChange:w=>l(w.target.value),className:"text-sm border border-gray-300 rounded-md px-2 py-1 focus:ring-primary-500 focus:border-primary-500",children:[c.jsx("option",{value:"view",children:"Can view"}),c.jsx("option",{value:"edit",children:"Can edit"})]})]}),s.length>=2&&c.jsx("div",{className:"mb-4",children:p?c.jsx("div",{className:"py-3 text-center text-sm text-gray-500",children:"Searching..."}):v.length===0?c.jsx("div",{className:"py-3 text-center text-sm text-gray-500",children:f.length===0?"No users found":"All matching users already have access"}):c.jsx("div",{className:"border border-gray-200 rounded-lg divide-y divide-gray-100",children:v.map(w=>c.jsxs("div",{className:"flex items-center gap-3 p-3 hover:bg-gray-50",children:[c.jsx("img",{src:w.avatar_url,alt:w.display_name,className:"w-8 h-8 rounded-full"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:w.display_name}),c.jsx("div",{className:"text-xs text-gray-500 truncate",children:w.email})]}),c.jsx("button",{onClick:()=>y(w),disabled:m.isPending,className:"p-2 text-primary-600 hover:bg-primary-50 rounded-full",children:c.jsx($0,{className:"w-4 h-4"})})]},w.id))})}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Shared with (",d.length,")"]}),h?c.jsx("div",{className:"py-3 text-center text-sm text-gray-500",children:"Loading..."}):d.length===0?c.jsx("div",{className:"py-6 text-center text-sm text-gray-500",children:"Not shared with anyone yet"}):c.jsx("div",{className:"border border-gray-200 rounded-lg divide-y divide-gray-100",children:d.map(w=>c.jsxs("div",{className:"flex items-center gap-3 p-3",children:[c.jsx("img",{src:w.avatar_url,alt:w.display_name,className:"w-8 h-8 rounded-full"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:w.display_name}),c.jsxs("div",{className:"text-xs text-gray-500",children:["Can ",w.permission]})]}),c.jsx("button",{onClick:()=>b(w.user_id),disabled:g.isPending,className:"p-2 text-red-600 hover:bg-red-50 rounded-full",children:c.jsx(pn,{className:"w-4 h-4"})})]},w.user_id))})]})]}),c.jsx("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end",children:c.jsx("button",{onClick:e,className:"btn-secondary",children:"Done"})})]})})]}):null}function Bn(t){return t?String(t).replace(/\\/g,"\\\\").replace(/;/g,"\\;").replace(/,/g,"\\,").replace(/\n/g,"\\n"):""}function LEe(t){return t?t.replace(/[^\d+]/g,""):""}function YF(t){if(!t)return"";const e=new Date(t);if(isNaN(e.getTime()))return"";const r=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${r}${n}${i}`}function BEe(t,e={}){if(!t||!Array.isArray(t))return{title:"",org:""};const r=t.find(i=>i.is_current);if(r){const i=r.company&&e[r.company]?e[r.company].name||e[r.company]:"";return{title:r.job_title||"",org:i}}const n=[...t].filter(i=>i.start_date).sort((i,s)=>new Date(s.start_date)-new Date(i.start_date));if(n.length>0){const i=n[0].company&&e[n[0].company]?e[n[0].company].name||e[n[0].company]:"";return{title:n[0].job_title||"",org:i}}return{title:"",org:""}}function zEe(t,e={}){if(!t)throw new Error("Person data is required");const{companyMap:r={},personDates:n=[]}=e,i=t.acf||{},s=[];s.push("BEGIN:VCARD"),s.push("VERSION:3.0");const o=i.first_name||"",a=i.last_name||"",l=t.name||`${o} ${a}`.trim()||"Unknown";s.push(`FN:${Bn(l)}`),s.push(`N:${Bn(a)};${Bn(o)};;;`),i.nickname&&s.push(`NICKNAME:${Bn(i.nickname)}`),i.contact_info&&Array.isArray(i.contact_info)&&i.contact_info.forEach(h=>{if(!h.contact_value)return;const f=Bn(h.contact_value),p=h.contact_label?Bn(h.contact_label):"";switch(h.contact_type){case"email":const m=p?`EMAIL;TYPE=INTERNET,${p.toUpperCase()}`:"EMAIL;TYPE=INTERNET";s.push(`${m}:${f}`);break;case"phone":case"mobile":const g=h.contact_type==="mobile"?"CELL":"VOICE",v=p?`TEL;TYPE=${g},${p.toUpperCase()}`:`TEL;TYPE=${g}`,y=LEe(h.contact_value);y&&s.push(`${v}:${y}`);break;case"website":case"linkedin":case"twitter":case"instagram":case"facebook":let b=h.contact_value;b.match(/^https?:\/\//i)||(b=`https://${b}`);const w=h.contact_type==="linkedin"?"PROFILE":"WORK",x=p?`URL;TYPE=${w},${p.toUpperCase()}`:`URL;TYPE=${w}`;s.push(`${x}:${Bn(b)}`);break}}),i.addresses&&Array.isArray(i.addresses)&&i.addresses.forEach(h=>{const f=h.address_label?`ADR;TYPE=${h.address_label.toUpperCase()}`:"ADR;TYPE=HOME",p=Bn(h.street||""),m=Bn(h.city||""),g=Bn(h.state||""),v=Bn(h.postal_code||""),y=Bn(h.country||"");(p||m||g||v||y)&&s.push(`${f}:;;${p};${m};${g};${v};${y}`)});const{title:u,org:d}=BEe(i.work_history,r);if(d&&s.push(`ORG:${Bn(d)}`),u&&s.push(`TITLE:${Bn(u)}`),n&&Array.isArray(n)){const h=n.find(f=>{const p=Array.isArray(f.date_type)?f.date_type[0]:f.date_type;return(p==null?void 0:p.toLowerCase())==="birthday"});if(h!=null&&h.date_value){const f=YF(h.date_value);f&&s.push(`BDAY:${f}`)}}if(t.thumbnail,t.modified){const h=YF(t.modified);h&&s.push(`REV:${h}T000000Z`)}return s.push("END:VCARD"),s.join(`\r
`)}function VEe(t,e={}){const{filename:r,...n}=e,i=zEe(t,n),s=new Blob([i],{type:"text/vcard;charset=utf-8"}),o=URL.createObjectURL(s),a=document.createElement("a");a.href=o,a.download=r||`${t.name||"contact"}.vcf`.replace(/[^a-z0-9.-]/gi,"_"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)}const WEe=({className:t})=>c.jsx("svg",{className:t,viewBox:"0 0 382 382",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",children:c.jsx("path",{d:`M347.445,0H34.555C15.471,0,0,15.471,0,34.555v312.889C0,366.529,15.471,382,34.555,382h312.889
      C366.529,382,382,366.529,382,347.444V34.555C382,15.471,366.529,0,347.445,0z M118.207,329.844c0,5.554-4.502,10.056-10.056,10.056
      H65.345c-5.554,0-10.056-4.502-10.056-10.056V150.403c0-5.554,4.502-10.056,10.056-10.056h42.806
      c5.554,0,10.056,4.502,10.056,10.056V329.844z M86.748,123.432c-22.459,0-40.666-18.207-40.666-40.666S64.289,42.1,86.748,42.1
      s40.666,18.207,40.666,40.666S109.208,123.432,86.748,123.432z M341.91,330.654c0,5.106-4.14,9.246-9.246,9.246H286.73
      c-5.106,0-9.246-4.14-9.246-9.246v-84.168c0-12.556,3.683-55.021-32.813-55.021c-28.309,0-34.051,29.066-35.204,42.11v97.079
      c0,5.106-4.139,9.246-9.246,9.246h-44.426c-5.106,0-9.246-4.14-9.246-9.246V149.593c0-5.106,4.14-9.246,9.246-9.246h44.426
      c5.106,0,9.246,4.14,9.246,9.246v15.655c10.497-15.753,26.097-27.912,59.312-27.912c73.552,0,73.131,68.716,73.131,106.472
      L341.91,330.654L341.91,330.654z`})});function ro(t){if(!t)return null;switch(t){case"male":return"";case"female":return"";case"non_binary":case"other":case"prefer_not_to_say":return"";default:return null}}function UEe(){var zD,VD,WD,UD,HD,KD,GD,YD,QD,XD,JD,ZD,e$,t$,r$,n$,i$,s$;const{id:t}=dh(),e=Fn(),r=rt(),{data:n,isLoading:i,error:s}=lre(t),{data:o}=bme(t),{data:a}=xme(t),l=Sme(),u=Eme(),d=jme(),h=wme(),f=_me(),p=PM(),m=Nme(),g=cre(),v=Cme(),y=kme(),b=Tme(),{data:w,isLoading:x}=Gc(),{data:S=[]}=st({queryKey:["investments",t],queryFn:async()=>(await _e.getInvestments(t)).data,enabled:!!t}),[_,E]=k.useState("profile"),[N,T]=k.useState(!1),[j,P]=k.useState(""),[O,C]=k.useState(!1),D=k.useRef(null),[F,$]=k.useState(!1),[L,M]=k.useState(!1),[W,Y]=k.useState(!1),[Q,pe]=k.useState(!1),[K,oe]=k.useState(!1),[Te,me]=k.useState(!1),[Be,Oe]=k.useState(!1),[gt,U]=k.useState(!1),[ce,Me]=k.useState(!1),[Fe,Tt]=k.useState(!1),[Yr,Tr]=k.useState(!1),[dt,lr]=k.useState(!1),[Ni,Jt]=k.useState(!1),[A,q]=k.useState(!1),[z,ae]=k.useState(!1),[ee,J]=k.useState(!1),[ye,Ue]=k.useState(null),[Ye,qt]=k.useState(null),[Ee,ne]=k.useState(null),[ge,he]=k.useState(null),[ke,Ze]=k.useState(null),[ki,bn]=k.useState(null),[El,Nl]=k.useState(null),[Bb,kl]=k.useState(null),[Jm,Cl]=k.useState(null),[li,Yo]=k.useState(null),[zb,yu]=k.useState(!1),[Vb,Wh]=k.useState(null),{data:je}=st({queryKey:["person-labels"],queryFn:async()=>(await He.getPersonLabels()).data}),qe=je||[],Qe=(n==null?void 0:n.labels)||[],Vt=((UD=(WD=(VD=(zD=n==null?void 0:n._embedded)==null?void 0:zD["wp:term"])==null?void 0:VD.flat())==null?void 0:WD.filter(I=>(I==null?void 0:I.taxonomy)==="person_label"))==null?void 0:UD.map(I=>I.id))||[],ci=qe.filter(I=>!Qe.includes(I.name));mh((n==null?void 0:n.name)||((HD=n==null?void 0:n.title)==null?void 0:HD.rendered)||(n==null?void 0:n.title)||"Person");const Ks=a==null?void 0:a.find(I=>{const H=Array.isArray(I.date_type)?I.date_type[0]:I.date_type;return(H==null?void 0:H.toLowerCase())==="birthday"}),vu=Ks!=null&&Ks.date_value?new Date(Ks.date_value):null,Zm=(Ks==null?void 0:Ks.year_unknown)??!1,xs=a==null?void 0:a.find(I=>{const H=Array.isArray(I.date_type)?I.date_type[0]:I.date_type;return(H==null?void 0:H.toLowerCase())==="died"}),bu=xs!=null&&xs.date_value?new Date(xs.date_value):null,Wb=(xs==null?void 0:xs.year_unknown)??!1,xu=!!bu,wu=vu&&!Zm?Dx(xu?bu:new Date,vu):null,RD=a?[...a].sort((I,H)=>{const G=I.date_value?new Date(I.date_value):new Date(0),be=H.date_value?new Date(H.date_value):new Date(0);return G-be}):[],Sle=async()=>{if(window.confirm("Are you sure you want to delete this person?"))try{await l.mutateAsync(t),e("/people")}catch{alert("Failed to delete person. Please try again.")}},_le=I=>{if(!I)return"";let H=I.replace(/[\u200B-\u200D\uFEFF\u200E\u200F\u202A-\u202E]/g,"");const G=H.startsWith("+");return H=H.replace(/\D/g,""),G?`+${H}`:H},Ele=async I=>{Tr(!0);try{const H=Xs(n.acf,{contact_info:I});await h.mutateAsync({id:t,data:{acf:H}}),pe(!1)}catch{alert("Failed to save contacts. Please try again.")}finally{Tr(!1)}},Nle=async I=>{lr(!0);try{Ee?await He.updateDate(Ee.id,{title:I.title,date_type:I.date_type,acf:{date_value:I.date_value,related_people:I.related_people,is_recurring:I.is_recurring,year_unknown:I.year_unknown}}):await He.createDate({title:I.title,status:"publish",date_type:I.date_type,acf:{date_value:I.date_value,related_people:I.related_people,is_recurring:I.is_recurring,year_unknown:I.year_unknown}}),r.invalidateQueries({queryKey:["person-dates",t]}),r.invalidateQueries({queryKey:["reminders"]}),oe(!1),ne(null)}catch{alert("Failed to save date. Please try again.")}finally{lr(!1)}},kle=async I=>{var H;Jt(!0);try{const G=[...((H=n.acf)==null?void 0:H.relationships)||[]],be={related_person:I.related_person||null,relationship_type:I.relationship_type||null,relationship_label:I.relationship_label||""};ke!==null?G[ke]=be:G.push(be);const Ae=Xs(n.acf,{relationships:G});await h.mutateAsync({id:t,data:{acf:Ae}}),r.invalidateQueries({queryKey:["person",t]}),me(!1),he(null),Ze(null)}catch{alert("Failed to save relationship. Please try again.")}finally{Jt(!1)}},Cle=async I=>{var H;q(!0);try{const G=[...((H=n.acf)==null?void 0:H.addresses)||[]],be={address_label:I.address_label||"",street:I.street||"",postal_code:I.postal_code||"",city:I.city||"",state:I.state||"",country:I.country||""};El!==null?G[El]=be:G.push(be);const Ae=Xs(n.acf,{addresses:G});await h.mutateAsync({id:t,data:{acf:Ae}}),Oe(!1),bn(null),Nl(null)}catch{alert("Failed to save address. Please try again.")}finally{q(!1)}},Tle=async I=>{var H;ae(!0);try{const G=[...((H=n.acf)==null?void 0:H.work_history)||[]],be={company:I.company||null,job_title:I.job_title||"",description:I.description||"",start_date:I.start_date||"",end_date:I.end_date||"",is_current:I.is_current||!1};Jm!==null?G[Jm]=be:G.push(be);const Ae=Xs(n.acf,{work_history:G});await h.mutateAsync({id:t,data:{acf:Ae}}),U(!1),kl(null),Cl(null)}catch{alert("Failed to save work history. Please try again.")}finally{ae(!1)}},jle=async I=>{J(!0);try{const H=Xs(n.acf,{first_name:I.first_name,last_name:I.last_name,nickname:I.nickname,gender:I.gender||null,pronouns:I.pronouns||null,how_we_met:I.how_we_met,is_favorite:I.is_favorite});await h.mutateAsync({id:t,data:{title:`${I.first_name} ${I.last_name}`.trim(),acf:H}}),Me(!1)}catch{alert("Failed to save person. Please try again.")}finally{J(!1)}},Ole=async I=>{var be;if(!window.confirm("Are you sure you want to delete this address?"))return;const H=[...((be=n.acf)==null?void 0:be.addresses)||[]];H.splice(I,1);const G=Xs(n.acf,{addresses:H});await h.mutateAsync({id:t,data:{acf:G}})},Ple=async I=>{var Ln,Ys,Uh,ig,o$,a$;if(!window.confirm("Are you sure you want to delete this relationship?"))return;const H=(Ys=(Ln=n.acf)==null?void 0:Ln.relationships)==null?void 0:Ys[I];if(!H)return;const G=H.related_person,be=H.relationship_type;let Ae=!0;G&&be&&(Ae=window.confirm("Do you also want to delete the inverse relationship from the other person?"));let it=null;if(!Ae&&G&&be)try{const[Su,sg]=await Promise.all([He.getPerson(G,{_embed:!0}),He.getRelationshipTypes()]),Gb={};sg.data.forEach(Hh=>{Gb[Hh.id]=Hh});const Ci=Gb[be],jl=(Uh=Ci==null?void 0:Ci.acf)==null?void 0:Uh.inverse_relationship_type;if(jl){const Kh=(((ig=Su.data.acf)==null?void 0:ig.relationships)||[]).find(Qs=>{var l$,c$;const ece=typeof Qs.related_person=="object"?(l$=Qs.related_person)==null?void 0:l$.ID:Qs.related_person,tce=typeof Qs.relationship_type=="object"?(c$=Qs.relationship_type)==null?void 0:c$.term_id:Qs.relationship_type;return ece===parseInt(t)&&tce===jl});Kh&&(it={related_person:parseInt(t),relationship_type:jl,relationship_label:Kh.relationship_label||""})}}catch{}const pt=[...((o$=n.acf)==null?void 0:o$.relationships)||[]];pt.splice(I,1);const Gs=Xs(n.acf,{relationships:pt});if(await h.mutateAsync({id:t,data:{acf:Gs}}),!Ae&&it&&G){await new Promise(Su=>setTimeout(Su,500));try{const Su=await He.getPerson(G,{_embed:!0}),sg=((a$=Su.data.acf)==null?void 0:a$.relationships)||[];if(!sg.some(Ci=>{var Kh,Qs;const jl=typeof Ci.related_person=="object"?(Kh=Ci.related_person)==null?void 0:Kh.ID:Ci.related_person,Hh=typeof Ci.relationship_type=="object"?(Qs=Ci.relationship_type)==null?void 0:Qs.term_id:Ci.relationship_type;return jl===it.related_person&&Hh===it.relationship_type})){const Ci=[...sg,it],jl=Xs(Su.data.acf,{relationships:Ci});await He.updatePerson(G,{acf:jl})}}catch{}}r.invalidateQueries({queryKey:["person",t]}),G&&r.invalidateQueries({queryKey:["person",G]}),r.invalidateQueries({queryKey:["people"]})},Ile=async I=>{window.confirm("Are you sure you want to delete this important date?")&&await d.mutateAsync({dateId:I,personId:t})},Rle=async I=>{window.confirm("Are you sure you want to delete this note?")&&await u.mutateAsync({noteId:I,personId:t})},Mle=async I=>{try{await f.mutateAsync({personId:t,content:I}),$(!1)}catch{alert("Failed to create note. Please try again.")}},Ale=async I=>{try{Ye?(await m.mutateAsync({activityId:Ye.id,data:I,personId:t}),qt(null)):(await p.mutateAsync({personId:t,data:I}),li&&(await v.mutateAsync({todoId:li.id,data:{content:li.content,due_date:li.due_date,is_completed:!0},personId:t}),Yo(null),Wh(null))),M(!1)}catch{alert("Failed to save activity. Please try again.")}},Dle=async I=>{try{await g.mutateAsync({personId:t,data:I}),Y(!1),Ue(null)}catch{alert("Failed to create todo. Please try again.")}},$le=async I=>{if(ye)try{await v.mutateAsync({todoId:ye.id,data:I,personId:t}),Y(!1),Ue(null)}catch{alert("Failed to update todo. Please try again.")}},MD=async I=>{if(!I.is_completed){Yo(I),yu(!0);return}try{await v.mutateAsync({todoId:I.id,data:{content:I.content,due_date:I.due_date,is_completed:!1},personId:t})}catch{alert("Failed to update todo. Please try again.")}},Fle=async()=>{if(li)try{await v.mutateAsync({todoId:li.id,data:{content:li.content,due_date:li.due_date,is_completed:!0},personId:t}),yu(!1),Yo(null)}catch{alert("Failed to complete todo. Please try again.")}},qle=()=>{if(!li)return;const I=new Date().toISOString().split("T")[0];Wh({content:li.content,activity_date:I,activity_type:"note",participants:[]}),yu(!1),M(!0)},Lle=async I=>{window.confirm("Are you sure you want to delete this activity?")&&await y.mutateAsync({activityId:I,personId:t})},AD=async I=>{window.confirm("Are you sure you want to delete this todo?")&&await b.mutateAsync({todoId:I,personId:t})},Ble=I=>{I.type==="todo"?(Ue(I),Y(!0)):I.type==="activity"&&(qt(I),M(!0))},zle=I=>{I.type==="note"?Rle(I.id):I.type==="activity"?Lle(I.id):I.type==="todo"&&AD(I.id)},Vle=async I=>{var be;if(!window.confirm("Are you sure you want to delete this work history item?"))return;const H=[...((be=n.acf)==null?void 0:be.work_history)||[]];H.splice(I,1);const G=Xs(n.acf,{work_history:H});await h.mutateAsync({id:t,data:{acf:G}})},Wle=async I=>{var be,Ae,it;const H=(it=(Ae=(be=n==null?void 0:n._embedded)==null?void 0:be["wp:term"])==null?void 0:Ae.flat())==null?void 0:it.find(pt=>(pt==null?void 0:pt.taxonomy)==="person_label"&&(pt==null?void 0:pt.name)===I);if(!H)return;const G=Vt.filter(pt=>pt!==H.id);await h.mutateAsync({id:t,data:{person_label:G}})},Ule=async()=>{if(!j)return;const I=qe.find(G=>G.id.toString()===j);if(!I)return;const H=[...Vt,I.id];await h.mutateAsync({id:t,data:{person_label:H}}),P(""),T(!1)},Hle=async I=>{var G;const H=(G=I.target.files)==null?void 0:G[0];if(H){if(!H.type.startsWith("image/")){alert("Please select an image file");return}if(H.size>5*1024*1024){alert("Image size must be less than 5MB");return}C(!0);try{await _e.uploadPersonPhoto(t,H),r.invalidateQueries({queryKey:["person",t]}),r.invalidateQueries({queryKey:["people"]})}catch{alert("Failed to upload photo. Please try again.")}finally{C(!1),D.current&&(D.current.value="")}}},Kle=()=>{if(n)try{VEe(n,{companyMap:Hb,personDates:a||[]})}catch{alert("Failed to export vCard. Please try again.")}},DD=((GD=(KD=n==null?void 0:n.acf)==null?void 0:KD.work_history)==null?void 0:GD.map(I=>I.company).filter(Boolean))||[],Gle=ly({queries:DD.map(I=>({queryKey:["company",I],queryFn:async()=>(await He.getCompany(I,{_embed:!0})).data,enabled:!!I}))}),Yle=k.useMemo(()=>{var I;return(I=n==null?void 0:n.acf)!=null&&I.work_history?n.acf.work_history.filter(H=>!H.end_date&&H.company).map(H=>H.company):[]},[(YD=n==null?void 0:n.acf)==null?void 0:YD.work_history]),$D=ly({queries:Yle.map(I=>({queryKey:["company-people",I],queryFn:async()=>{const H=await _e.getCompanyPeople(I);return{companyId:I,...H.data}},enabled:!!I}))}),eg=k.useMemo(()=>{const I=new Map;return $D.forEach(H=>{var G;(G=H.data)!=null&&G.current&&H.data.current.forEach(be=>{if(be.id!==parseInt(t))if(I.has(be.id)){const Ae=I.get(be.id);Ae.companies.includes(H.data.companyId)||Ae.companies.push(H.data.companyId)}else I.set(be.id,{...be,companies:[H.data.companyId]})})}),Array.from(I.values()).sort((H,G)=>(H.name||"").localeCompare(G.name||""))},[$D,t]),Tl=((XD=(QD=n==null?void 0:n.acf)==null?void 0:QD.relationships)==null?void 0:XD.map(I=>I.related_person).filter(Boolean))||[],tg=ly({queries:Tl.map(I=>({queryKey:["person-dates",I],queryFn:async()=>(await _e.getPersonDates(I)).data,enabled:!!I}))}),Ub=k.useMemo(()=>{const I={};return tg.forEach((H,G)=>{if(H.data&&Tl[G]){const be=Tl[G],Ae=H.data.find(it=>{const pt=Array.isArray(it.date_type)?it.date_type[0]:it.date_type;return(pt==null?void 0:pt.toLowerCase())==="birthday"});if(Ae!=null&&Ae.date_value){const it=new Date(Ae.date_value);I[be]=Dx(new Date,it)}else I[be]=-1}}),I},[tg,Tl]),Qle=k.useMemo(()=>{const I={};return tg.forEach((H,G)=>{if(H.data&&Tl[G]){const be=Tl[G],Ae=H.data.some(it=>{const pt=Array.isArray(it.date_type)?it.date_type[0]:it.date_type;return(pt==null?void 0:pt.toLowerCase())==="died"});I[be]=Ae}}),I},[tg,Tl]),rg=k.useMemo(()=>{var I;return(I=n==null?void 0:n.acf)!=null&&I.relationships?[...n.acf.relationships].sort((H,G)=>{const be=Ub[H.related_person]??-1,Ae=Ub[G.related_person]??-1;return be===-1&&Ae===-1?0:be===-1?1:Ae===-1?-1:Ae-be}):[]},[(JD=n==null?void 0:n.acf)==null?void 0:JD.relationships,Ub]),Hb={};Gle.forEach((I,H)=>{var G,be,Ae,it,pt,Gs,Ln,Ys,Uh;if(I.data){const ig=DD[H];Hb[ig]={name:ur(I.data),logo:((Ae=(be=(G=I.data._embedded)==null?void 0:G["wp:featuredmedia"])==null?void 0:be[0])==null?void 0:Ae.source_url)||((Uh=(Ys=(Ln=(Gs=(pt=(it=I.data._embedded)==null?void 0:it["wp:featuredmedia"])==null?void 0:pt[0])==null?void 0:Gs.media_details)==null?void 0:Ln.sizes)==null?void 0:Ys.thumbnail)==null?void 0:Uh.source_url)||null}}});const ng=k.useMemo(()=>{var I;return(I=n==null?void 0:n.acf)!=null&&I.work_history?[...n.acf.work_history].map((H,G)=>({...H,originalIndex:G})).sort((H,G)=>{if(H.is_current&&!G.is_current)return-1;if(!H.is_current&&G.is_current)return 1;const be=H.start_date?new Date(H.start_date):new Date(0);return(G.start_date?new Date(G.start_date):new Date(0))-be}):[]},[(ZD=n==null?void 0:n.acf)==null?void 0:ZD.work_history]),FD=k.useMemo(()=>o?o.filter(H=>H.type==="todo").sort((H,G)=>{if(H.is_completed&&!G.is_completed)return 1;if(!H.is_completed&&G.is_completed)return-1;if(!H.is_completed&&!G.is_completed){if(H.due_date&&G.due_date)return new Date(H.due_date)-new Date(G.due_date);if(H.due_date&&!G.due_date)return-1;if(!H.due_date&&G.due_date)return 1}return new Date(G.created)-new Date(H.created)}):[],[o]);if(k.useEffect(()=>{(n==null?void 0:n.status)==="trash"&&e("/people",{replace:!0})},[n,e]),i)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(s||!n)return c.jsxs("div",{className:"card p-6 text-center",children:[c.jsx("p",{className:"text-red-600",children:"Failed to load person."}),c.jsx(Le,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]});if(n.status==="trash")return null;const ht=n.acf||{},Kb=["facebook","linkedin","instagram","twitter","bluesky","threads","website"],Xle=((e$=ht.contact_info)==null?void 0:e$.filter(I=>Kb.includes(I.contact_type)))||[],qD=(t$=ht.contact_info)==null?void 0:t$.find(I=>I.contact_type==="mobile"),LD={linkedin:1,twitter:2,bluesky:3,threads:4,instagram:5,facebook:6,whatsapp:7,website:8},BD=(()=>{const I=[...Xle];return qD&&I.push({contact_type:"whatsapp",contact_value:`https://wa.me/${qD.contact_value.replace(/[^0-9+]/g,"")}`}),I.sort((H,G)=>{const be=LD[H.contact_type]||99,Ae=LD[G.contact_type]||99;return be-Ae})})(),Jle=I=>{switch(I){case"facebook":return mEe;case"linkedin":return WEe;case"instagram":return yEe;case"twitter":return NEe;case"bluesky":return fEe;case"threads":return wEe;case"whatsapp":return _Ee;case"website":return hy;default:return hy}},Zle=I=>{switch(I){case"facebook":return"text-[#1877F2]";case"linkedin":return"text-[#0077B7]";case"instagram":return"text-[#E4405F]";case"twitter":return"text-[#1DA1F2]";case"bluesky":return"text-[#00A8E8]";case"threads":return"text-[#000000]";case"whatsapp":return"text-[#25D366]";case"website":return"text-gray-600";default:return"text-gray-600"}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs(Le,{to:"/people",className:"flex items-center text-gray-600 hover:text-gray-900",children:[c.jsx(ph,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Back to people"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:Kle,className:"btn-secondary",children:[c.jsx(fI,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Export vCard"})]}),c.jsxs("button",{onClick:()=>Tt(!0),className:"btn-secondary",title:"Share",children:[c.jsx(TM,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Share"})]}),c.jsxs("button",{onClick:()=>Me(!0),className:"btn-secondary",children:[c.jsx(rre,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Edit"})]}),c.jsxs("button",{onClick:Sle,className:"btn-danger",children:[c.jsx(pn,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Delete"})]})]})]}),c.jsx("div",{className:"card p-6",children:c.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[c.jsxs("div",{className:"relative group",children:[n.thumbnail?c.jsx("img",{src:n.thumbnail,alt:n.name,className:"w-28 h-28 rounded-full object-cover"}):c.jsx("div",{className:"w-28 h-28 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-3xl font-medium text-gray-500",children:((r$=n.first_name)==null?void 0:r$[0])||"?"})}),c.jsx("div",{className:"absolute inset-0 rounded-full bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var I;return(I=D.current)==null?void 0:I.click()},children:O?c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):c.jsx(Ute,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),c.jsx("input",{ref:D,type:"file",accept:"image/*",onChange:Hle,className:"hidden",disabled:O})]}),c.jsxs("div",{className:"flex-1 space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("h1",{className:"text-2xl font-bold",children:[n.name,xu&&c.jsx("span",{className:"ml-1 text-gray-500",children:""})]}),n.is_favorite&&c.jsx(zd,{className:"w-5 h-5 text-yellow-400 fill-current"})]}),ht.nickname&&c.jsxs("p",{className:"text-gray-500",children:['"',ht.nickname,'"']}),xu&&bu&&c.jsxs("p",{className:"text-gray-500 text-sm inline-flex items-center flex-wrap",children:[ro(ht.gender)&&c.jsx("span",{children:ro(ht.gender)}),ro(ht.gender)&&ht.pronouns&&c.jsx("span",{children:""}),ht.pronouns&&c.jsx("span",{children:ht.pronouns}),(ro(ht.gender)||ht.pronouns)&&c.jsx("span",{children:""}),c.jsxs("span",{children:["Died ",Nn(bu,Wb?"MMMM d":"MMMM d, yyyy"),wu!==null&&` at age ${wu}`]})]}),!xu&&(ro(ht.gender)||ht.pronouns||wu!==null)&&c.jsxs("p",{className:"text-gray-500 text-sm inline-flex items-center flex-wrap",children:[ro(ht.gender)&&c.jsx("span",{children:ro(ht.gender)}),ro(ht.gender)&&ht.pronouns&&c.jsx("span",{children:""}),ht.pronouns&&c.jsx("span",{children:ht.pronouns}),(ro(ht.gender)||ht.pronouns)&&wu!==null&&c.jsx("span",{children:""}),wu!==null&&c.jsxs("span",{children:[wu," years old"]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[n.labels&&n.labels.length>0&&n.labels.map((I,H)=>c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 group/label",children:[I,c.jsx("button",{onClick:()=>Wle(I),className:"opacity-0 group-hover/label:opacity-100 transition-opacity hover:bg-gray-200 rounded-full p-0.5",title:"Remove label",children:c.jsx(mt,{className:"w-3 h-3"})})]},H)),N?c.jsxs("div",{className:"inline-flex items-center gap-2",children:[c.jsxs("select",{value:j,onChange:I=>P(I.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1",autoFocus:!0,disabled:ci.length===0,children:[c.jsx("option",{value:"",children:"Select a label..."}),ci.map(I=>c.jsx("option",{value:I.id,children:I.name},I.id))]}),c.jsx("button",{onClick:Ule,disabled:!j,className:"text-xs px-2 py-1 bg-primary-600 text-white rounded hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"}),c.jsx("button",{onClick:()=>{T(!1),P("")},className:"text-xs px-2 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Cancel"})]}):ci.length>0&&c.jsxs("button",{onClick:()=>T(!0),className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",children:[c.jsx(or,{className:"w-3 h-3 mr-1"}),"Add label"]})]}),BD.length>0&&c.jsx("div",{className:"flex items-center gap-3 mt-4",children:BD.map((I,H)=>{const G=Jle(I.contact_type),be=Zle(I.contact_type);let Ae=I.contact_value;return Ae.match(/^https?:\/\//i)||(Ae=`https://${Ae}`),c.jsx("a",{href:Ae,target:"_blank",rel:"noopener noreferrer",className:`flex-shrink-0 hover:opacity-80 transition-opacity ${be}`,title:`${I.contact_type.charAt(0).toUpperCase()+I.contact_type.slice(1)}: ${I.contact_value}`,children:c.jsx(G,{className:"w-5 h-5"})},H)})})]})]})]})}),c.jsx("div",{className:"border-b border-gray-200",children:c.jsxs("nav",{className:"flex gap-8",children:[c.jsx("button",{onClick:()=>E("profile"),className:`pb-3 text-sm font-medium border-b-2 transition-colors ${_==="profile"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Profile"}),c.jsx("button",{onClick:()=>E("timeline"),className:`pb-3 text-sm font-medium border-b-2 transition-colors ${_==="timeline"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Timeline"}),c.jsx("button",{onClick:()=>E("work"),className:`pb-3 text-sm font-medium border-b-2 transition-colors ${_==="work"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Work"})]})}),c.jsxs("div",{className:"space-y-6",children:[_==="profile"&&c.jsxs("div",{className:"columns-1 md:columns-2 gap-6",children:[!xu&&c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"font-semibold",children:"Contact information"}),c.jsxs("button",{onClick:()=>pe(!0),className:"btn-secondary text-sm",children:[c.jsx(oa,{className:"w-4 h-4 md:mr-1"}),c.jsx("span",{className:"hidden md:inline",children:"Edit"})]})]}),((n$=ht.contact_info)==null?void 0:n$.filter(I=>!Kb.includes(I.contact_type)).length)>0?c.jsx("div",{className:"space-y-2",children:(()=>{const I={email:1,phone:2,mobile:2,slack:3,calendar:4,other:5};return ht.contact_info.filter(G=>!Kb.includes(G.contact_type)).map((G,be)=>({...G,originalIndex:be})).sort((G,be)=>{const Ae=I[G.contact_type]||99,it=I[be.contact_type]||99;return Ae!==it?Ae-it:G.originalIndex-be.originalIndex}).map(G=>{const be=G.contact_type==="email"?A0:G.contact_type==="phone"||G.contact_type==="mobile"?kM:G.contact_type==="slack"?bEe:G.contact_type==="calendar"?bo:hy,Ae=G.contact_type==="email",it=G.contact_type==="phone"||G.contact_type==="mobile",pt=G.contact_type==="slack",Gs=G.contact_type==="calendar";let Ln=null,Ys=null;return Ae?Ln=`mailto:${G.contact_value}`:it?Ln=`tel:${_le(G.contact_value)}`:(pt||Gs)&&(Ln=G.contact_value,Ys="_blank"),c.jsx("div",{children:c.jsxs("div",{className:"flex items-center rounded-md -mx-2 px-2 py-1.5",children:[c.jsx(be,{className:"w-4 h-4 text-gray-400 mr-3 flex-shrink-0"}),c.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[c.jsxs("span",{className:"text-sm text-gray-500",children:[G.contact_label||G.contact_type,": "]}),Ln?c.jsx("a",{href:Ln,target:Ys||void 0,rel:Ys==="_blank"?"noopener noreferrer":void 0,className:"text-primary-600 hover:text-primary-700 hover:underline",children:G.contact_value}):c.jsx("span",{children:G.contact_value})]})]})},G.originalIndex)})})()}):c.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No contact information yet. ",c.jsx("button",{onClick:()=>pe(!0),className:"text-primary-600 hover:underline",children:"Add some"})]})]}),c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"font-semibold",children:"Important dates"}),c.jsx("button",{onClick:()=>{ne(null),oe(!0)},className:"btn-secondary text-sm",title:"Add important date",children:c.jsx(or,{className:"w-4 h-4"})})]}),RD.length>0?c.jsx("div",{className:"space-y-3",children:RD.map(I=>{const H=Array.isArray(I.date_type)?I.date_type[0]:I.date_type,G=(H==null?void 0:H.toLowerCase())||"",be=G.includes("died"),Ae=G.includes("wedding")||G.includes("marriage")?Gpe:G.includes("birthday")?Kpe:bo,it=I.year_unknown?"MMMM d":"MMMM d, yyyy";return c.jsxs("div",{className:"flex items-start group",children:[c.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center mr-3",children:be?c.jsx("span",{className:"text-gray-500 text-lg font-semibold",children:""}):c.jsx(Ae,{className:"w-4 h-4 text-gray-500"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium",children:I.title}),c.jsx("p",{className:"text-xs text-gray-500",children:I.date_value&&Nn(new Date(I.date_value),it)}),H&&c.jsx("p",{className:"text-xs text-gray-400 capitalize",children:H})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>{ne(I),oe(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit date",children:c.jsx(oa,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),c.jsx("button",{onClick:()=>Ile(I.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete date",children:c.jsx(pn,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},I.id)})}):c.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No important dates yet. ",c.jsx("button",{onClick:()=>{ne(null),oe(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]}),!xu&&c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"font-semibold",children:"Addresses"}),c.jsx("button",{onClick:()=>{bn(null),Nl(null),Oe(!0)},className:"btn-secondary text-sm",title:"Add address",children:c.jsx(or,{className:"w-4 h-4"})})]}),((i$=ht.addresses)==null?void 0:i$.length)>0?c.jsx("div",{className:"space-y-3",children:ht.addresses.map((I,H)=>{const G=[I.street,[I.city,I.state,I.postal_code].filter(Boolean).join(", "),I.country].filter(Boolean),be=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(G.join(", "))}`;return c.jsxs("div",{className:"flex items-start group",children:[c.jsx(rme,{className:"w-4 h-4 text-gray-400 mt-1 mr-3 flex-shrink-0"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[I.address_label&&c.jsx("p",{className:"text-xs text-gray-500 mb-1",children:I.address_label}),c.jsx("a",{href:be,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-700 hover:underline text-sm",children:G.map((Ae,it)=>c.jsx("span",{className:"block",children:Ae},it))})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[c.jsx("button",{onClick:()=>{bn(I),Nl(H),Oe(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit address",children:c.jsx(oa,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),c.jsx("button",{onClick:()=>Ole(H),className:"p-1 hover:bg-red-50 rounded",title:"Delete address",children:c.jsx(pn,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},H)})}):c.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No addresses yet. ",c.jsx("button",{onClick:()=>{bn(null),Nl(null),Oe(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]}),(ht.how_we_met||ht.met_date)&&c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsx("h2",{className:"font-semibold mb-3",children:"How we met"}),ht.met_date&&c.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[c.jsx(bo,{className:"w-4 h-4 inline mr-1"}),Nn(new Date(ht.met_date),"MMMM d, yyyy")]}),ht.how_we_met&&c.jsx("p",{className:"text-sm",children:ht.how_we_met})]}),c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h2",{className:"font-semibold",children:"Relationships"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Le,{to:`/people/${t}/family-tree`,className:"btn-secondary text-sm",children:"View family tree"}),c.jsx("button",{onClick:()=>{he(null),Ze(null),me(!0)},className:"btn-secondary text-sm",title:"Add relationship",children:c.jsx(or,{className:"w-4 h-4"})})]})]}),(rg==null?void 0:rg.length)>0?c.jsx("div",{className:"space-y-2",children:rg.map((I,H)=>{var be,Ae,it;const G=((Ae=(be=n==null?void 0:n.acf)==null?void 0:be.relationships)==null?void 0:Ae.findIndex(pt=>pt.related_person===I.related_person&&pt.relationship_type===I.relationship_type))??H;return c.jsxs("div",{className:"flex items-center p-2 rounded hover:bg-gray-50 group",children:[c.jsxs(Le,{to:`/people/${I.related_person}`,className:"flex items-center flex-1 min-w-0",children:[I.person_thumbnail?c.jsx("img",{src:I.person_thumbnail,alt:Tn(I.person_name)||"",className:"w-8 h-8 rounded-full object-cover mr-2"}):c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full mr-2 flex items-center justify-center",children:c.jsx("span",{className:"text-xs font-medium text-gray-500",children:((it=Tn(I.person_name))==null?void 0:it[0])||"?"})}),c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm font-medium",children:[Tn(I.person_name)||`Person #${I.related_person}`,Qle[I.related_person]&&c.jsx("span",{className:"text-gray-400 ml-1",title:"Deceased",children:""})]}),c.jsx("p",{className:"text-xs text-gray-500",children:Tn(I.relationship_name||I.relationship_label)})]})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[c.jsx("button",{onClick:()=>{var Gs,Ln;const pt=(Ln=(Gs=n==null?void 0:n.acf)==null?void 0:Gs.relationships)==null?void 0:Ln[G];he(pt),Ze(G),me(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit relationship",children:c.jsx(oa,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),c.jsx("button",{onClick:()=>Ple(G),className:"p-1 hover:bg-red-50 rounded",title:"Delete relationship",children:c.jsx(pn,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},H)})}):c.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No relationships yet. ",c.jsx("button",{onClick:()=>{he(null),Ze(null),me(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]})]}),_==="timeline"&&c.jsxs("div",{className:"columns-1 md:columns-2 gap-6",children:[c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h2",{className:"font-semibold",children:"Todos"}),c.jsx("button",{onClick:()=>{Ue(null),Y(!0)},className:"btn-secondary text-sm",title:"Add todo",children:c.jsx(or,{className:"w-4 h-4"})})]}),FD.length>0?c.jsx("div",{className:"space-y-2",children:FD.map(I=>{const H=dm(I);return c.jsxs("div",{className:"flex items-start p-2 rounded hover:bg-gray-50 group",children:[c.jsx("button",{onClick:()=>MD(I),className:"mt-0.5 mr-2 flex-shrink-0",title:I.is_completed?"Mark as incomplete":"Mark as complete",children:I.is_completed?c.jsx(dI,{className:"w-5 h-5 text-primary-600"}):c.jsx(Bd,{className:`w-5 h-5 ${H?"text-red-600":"text-gray-400"}`})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:`text-sm ${I.is_completed?"line-through text-gray-400":H?"text-red-600":""}`,children:I.content}),I.due_date&&c.jsxs("p",{className:`text-xs mt-0.5 ${H&&!I.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",Nn(new Date(I.due_date),"MMM d, yyyy"),H&&!I.is_completed&&" (overdue)"]})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[c.jsx("button",{onClick:()=>{Ue(I),Y(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit todo",children:c.jsx(oa,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),c.jsx("button",{onClick:()=>AD(I.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete todo",children:c.jsx(pn,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},I.id)})}):c.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No todos yet."})]}),c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"font-semibold",children:"Timeline"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>$(!0),className:"btn-secondary text-sm",title:"Add note",children:[c.jsx(OM,{className:"w-4 h-4 md:mr-1"}),c.jsx("span",{className:"hidden md:inline",children:"Note"})]}),c.jsxs("button",{onClick:()=>M(!0),className:"btn-secondary text-sm",title:"Add activity",children:[c.jsx(D0,{className:"w-4 h-4 md:mr-1"}),c.jsx("span",{className:"hidden md:inline",children:"Activity"})]})]})]}),c.jsx(CEe,{timeline:o||[],onEdit:Ble,onDelete:zle,onToggleTodo:MD,personId:t,allPeople:w||[]})]})]}),_==="work"&&c.jsxs("div",{className:"columns-1 md:columns-2 gap-6",children:[c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"font-semibold",children:"Work history"}),c.jsx("button",{onClick:()=>{kl(null),Cl(null),U(!0)},className:"btn-secondary text-sm",title:"Add work history",children:c.jsx(or,{className:"w-4 h-4"})})]}),(ng==null?void 0:ng.length)>0?c.jsx("div",{className:"space-y-4",children:ng.map((I,H)=>{const G=I.company?Hb[I.company]:null,be=I.originalIndex;return c.jsxs("div",{className:"flex items-start group",children:[G!=null&&G.logo?c.jsx("img",{src:G.logo,alt:G.name,className:"w-20 h-20 rounded-lg object-contain bg-white mr-3 flex-shrink-0"}):c.jsx("div",{className:"w-20 h-20 bg-white rounded-lg flex items-center justify-center mr-3 flex-shrink-0 border border-gray-200",children:c.jsx(Ir,{className:"w-10 h-10 text-gray-500"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"font-medium",children:I.job_title}),I.company&&G&&c.jsx(Le,{to:`/companies/${I.company}`,className:"text-sm text-primary-600 hover:underline",children:G.name}),c.jsxs("p",{className:"text-sm text-gray-500",children:[I.start_date&&Nn(new Date(I.start_date),"MMM yyyy")," - ",I.is_current?"Present":I.end_date?Nn(new Date(I.end_date),"MMM yyyy"):""]}),I.description&&c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:I.description})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[c.jsx("button",{onClick:()=>{var it,pt;const Ae=(pt=(it=n==null?void 0:n.acf)==null?void 0:it.work_history)==null?void 0:pt[be];kl(Ae),Cl(be),U(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit work history",children:c.jsx(oa,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),c.jsx("button",{onClick:()=>Vle(be),className:"p-1 hover:bg-red-50 rounded",title:"Delete work history",children:c.jsx(pn,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},be)})}):c.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No work history yet. ",c.jsx("button",{onClick:()=>{kl(null),Cl(null),U(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]}),S.length>0&&c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[c.jsx(Jy,{className:"w-5 h-5 mr-2"}),"Investments"]}),c.jsx("div",{className:"space-y-3",children:S.map(I=>c.jsxs(Le,{to:`/companies/${I.id}`,className:"flex items-center p-2 rounded-lg hover:bg-gray-50 transition-colors group",children:[I.thumbnail?c.jsx("img",{src:I.thumbnail,alt:I.name,className:"w-12 h-12 rounded-lg object-contain bg-white border border-gray-200"}):c.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:c.jsx(Ir,{className:"w-6 h-6 text-gray-400"})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("p",{className:"text-sm font-medium group-hover:text-primary-600",children:I.name}),I.industry&&c.jsx("p",{className:"text-xs text-gray-500",children:I.industry})]})]},I.id))})]}),eg.length>0&&c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h2",{className:"font-semibold",children:"Colleagues"}),c.jsxs("span",{className:"text-xs text-gray-500",children:[eg.length," ",eg.length===1?"colleague":"colleagues"]})]}),c.jsx("div",{className:"space-y-2",children:eg.map(I=>{var H;return c.jsxs(Le,{to:`/people/${I.id}`,className:"flex items-center p-2 rounded hover:bg-gray-50",children:[I.thumbnail?c.jsx("img",{src:I.thumbnail,alt:I.name||"",className:"w-8 h-8 rounded-full object-cover mr-2"}):c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full mr-2 flex items-center justify-center",children:c.jsx("span",{className:"text-xs font-medium text-gray-500",children:((H=I.name)==null?void 0:H[0])||"?"})}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"text-sm font-medium truncate",children:I.name}),I.job_title&&c.jsx("p",{className:"text-xs text-gray-500 truncate",children:I.job_title})]})]},I.id)})})]})]})]}),c.jsx(TEe,{isOpen:F,onClose:()=>$(!1),onSubmit:Mle,isLoading:f.isPending}),c.jsx(kA,{isOpen:L,onClose:()=>{M(!1),qt(null),Yo(null),Wh(null)},onSubmit:Ale,isLoading:Ye?m.isPending:p.isPending,personId:t,initialData:Vb,activity:Ye}),c.jsx(qM,{isOpen:zb,onClose:()=>{yu(!1),Yo(null)},todo:li,onComplete:Fle,onCompleteAsActivity:qle}),c.jsx(Sse,{isOpen:W,onClose:()=>{Y(!1),Ue(null)},onSubmit:ye?$le:Dle,isLoading:ye?v.isPending:g.isPending,todo:ye}),c.jsx(OEe,{isOpen:Q,onClose:()=>pe(!1),onSubmit:Ele,isLoading:Yr,contactInfo:ht.contact_info||[]}),c.jsx(FM,{isOpen:K,onClose:()=>{oe(!1),ne(null)},onSubmit:Nle,isLoading:dt,dateItem:Ee,personId:t,allPeople:w||[],isPeopleLoading:x}),c.jsx(IEe,{isOpen:Te,onClose:()=>{me(!1),he(null),Ze(null)},onSubmit:kle,isLoading:Ni,relationship:ge,personId:t,allPeople:w||[],isPeopleLoading:x}),c.jsx(REe,{isOpen:Be,onClose:()=>{Oe(!1),bn(null),Nl(null)},onSubmit:Cle,isLoading:A,address:ki}),c.jsx(AEe,{isOpen:gt,onClose:()=>{U(!1),kl(null),Cl(null)},onSubmit:Tle,isLoading:z,workHistoryItem:Bb}),c.jsx(DM,{isOpen:ce,onClose:()=>Me(!1),onSubmit:jle,isLoading:ee,person:n}),c.jsx(_se,{isOpen:Fe,onClose:()=>Tt(!1),postType:"people",postId:n.id,postTitle:n.name||((s$=n.title)==null?void 0:s$.rendered)})]})}function HEe({company:t}){var e,r,n,i,s;return c.jsx(Le,{to:`/companies/${t.id}`,className:"card p-4 hover:shadow-md transition-shadow",children:c.jsxs("div",{className:"flex items-start",children:[(n=(r=(e=t._embedded)==null?void 0:e["wp:featuredmedia"])==null?void 0:r[0])!=null&&n.source_url?c.jsx("img",{src:t._embedded["wp:featuredmedia"][0].source_url,alt:ur(t),className:"w-12 h-12 rounded-lg object-contain bg-white"}):c.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:c.jsx(Ir,{className:"w-6 h-6 text-gray-400"})}),c.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:ur(t)}),((i=t.acf)==null?void 0:i.industry)&&c.jsx("p",{className:"text-sm text-gray-500",children:t.acf.industry}),((s=t.acf)==null?void 0:s.website)&&c.jsx("p",{className:"text-xs text-primary-600 truncate",children:t.acf.website})]})]})})}function KEe(){var j,P;const[t,e]=k.useState(""),[r,n]=k.useState(!1),[i,s]=k.useState("all"),[o,a]=k.useState(""),[l,u]=k.useState(!1),[d,h]=k.useState(!1),f=k.useRef(null),p=k.useRef(null),m=Fn(),g=rt(),{data:v=[]}=z0(),y=(j=window.prmConfig)==null?void 0:j.userId,{data:b,isLoading:w,error:x}=st({queryKey:["companies",t],queryFn:async()=>(await He.getCompanies({search:t,per_page:100,_embed:!0})).data}),S=We({mutationFn:async O=>{const C={title:O.title,status:"publish",parent:O.parentId||0,acf:{website:O.website,industry:O.industry,investors:O.investors||[],_visibility:O.visibility||"private",_assigned_workspaces:O.assigned_workspaces||[]}};return(await He.createCompany(C)).data},onSuccess:O=>{g.invalidateQueries({queryKey:["companies"]}),g.invalidateQueries({queryKey:["dashboard"]}),u(!1),m(`/companies/${O.id}`)}}),_=async O=>{h(!0);try{await S.mutateAsync(O)}finally{h(!1)}};k.useEffect(()=>{const O=C=>{p.current&&!p.current.contains(C.target)&&f.current&&!f.current.contains(C.target)&&n(!1)};return document.addEventListener("mousedown",O),()=>{document.removeEventListener("mousedown",O)}},[]);const E=i!=="all"||o,N=()=>{s("all"),a("")},T=k.useMemo(()=>{if(!b)return[];let O=[...b];return i==="mine"?O=O.filter(C=>C.author===y):i==="shared"&&(O=O.filter(C=>C.author!==y)),o&&(O=O.filter(C=>{var F;return(((F=C.acf)==null?void 0:F._assigned_workspaces)||[]).includes(parseInt(o))})),O.sort((C,D)=>{var L,M;const F=(((L=C.title)==null?void 0:L.rendered)||C.title||"").toLowerCase(),$=(((M=D.title)==null?void 0:M.rendered)||D.title||"").toLowerCase();return F.localeCompare($)})},[b,i,o,y]);return c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsxs("div",{className:"relative flex-1 min-w-48 max-w-md",children:[c.jsx(nl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),c.jsx("input",{type:"search",placeholder:"Search organizations...",value:t,onChange:O=>e(O.target.value),className:"input pl-9"})]}),c.jsxs("div",{className:"relative",ref:f,children:[c.jsxs("button",{onClick:()=>n(!r),className:`btn-secondary ${E?"bg-primary-50 text-primary-700 border-primary-200":""}`,children:[c.jsx(xp,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Filter"}),E&&c.jsx("span",{className:"ml-2 px-1.5 py-0.5 bg-primary-600 text-white text-xs rounded-full",children:(i!=="all"?1:0)+(o?1:0)})]}),r&&c.jsx("div",{ref:p,className:"absolute top-full left-0 mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Ownership"}),c.jsx("div",{className:"space-y-1",children:[{value:"all",label:"All Organizations"},{value:"mine",label:"My Organizations"},{value:"shared",label:"Shared with Me"}].map(O=>c.jsxs("label",{className:"flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded",children:[c.jsx("input",{type:"radio",name:"ownership",value:O.value,checked:i===O.value,onChange:C=>s(C.target.value),className:"sr-only"}),c.jsx("div",{className:`flex items-center justify-center w-4 h-4 border-2 rounded-full mr-3 ${i===O.value?"border-primary-600":"border-gray-300"}`,children:i===O.value&&c.jsx("div",{className:"w-2 h-2 bg-primary-600 rounded-full"})}),c.jsx("span",{className:"text-sm text-gray-700",children:O.label})]},O.value))})]}),v.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Workspace"}),c.jsxs("select",{value:o,onChange:O=>a(O.target.value),className:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[c.jsx("option",{value:"",children:"All Workspaces"}),v.map(O=>c.jsx("option",{value:O.id,children:O.title},O.id))]})]}),E&&c.jsx("button",{onClick:N,className:"w-full text-sm text-primary-600 hover:text-primary-700 font-medium pt-2 border-t border-gray-200",children:"Clear all filters"})]})})]}),E&&c.jsxs("div",{className:"flex flex-wrap gap-2",children:[i!=="all"&&c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-800 rounded-full text-xs",children:[i==="mine"?"My Organizations":"Shared with Me",c.jsx("button",{onClick:()=>s("all"),className:"hover:text-primary-600",children:c.jsx(mt,{className:"w-3 h-3"})})]}),o&&c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:[((P=v.find(O=>O.id===parseInt(o)))==null?void 0:P.title)||"Workspace",c.jsx("button",{onClick:()=>a(""),className:"hover:text-blue-600",children:c.jsx(mt,{className:"w-3 h-3"})})]})]}),c.jsxs("button",{onClick:()=>u(!0),className:"btn-primary",children:[c.jsx(or,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Add organization"})]})]})}),w&&c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),x&&c.jsx("div",{className:"card p-6 text-center",children:c.jsx("p",{className:"text-red-600",children:"Failed to load organizations."})}),!w&&!x&&(b==null?void 0:b.length)===0&&c.jsxs("div",{className:"card p-12 text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(Ir,{className:"w-6 h-6 text-gray-400"})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No organizations found"}),c.jsx("p",{className:"text-gray-500 mb-4",children:t?"Try a different search.":"Add your first organization."}),!t&&c.jsxs("button",{onClick:()=>u(!0),className:"btn-primary",children:[c.jsx(or,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Add organization"})]})]}),!w&&!x&&(b==null?void 0:b.length)>0&&(T==null?void 0:T.length)===0&&c.jsxs("div",{className:"card p-12 text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(xp,{className:"w-6 h-6 text-gray-400"})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No organizations match your filters"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Try adjusting your filters to see more results."}),c.jsx("button",{onClick:N,className:"btn-secondary",children:"Clear filters"})]}),!w&&!x&&(T==null?void 0:T.length)>0&&c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:T.map(O=>c.jsx(HEe,{company:O},O.id))}),c.jsx($M,{isOpen:l,onClose:()=>u(!1),onSubmit:_,isLoading:d})]})}function GEe(){var P,O,C,D,F,$,L;const{id:t}=dh(),e=Fn(),r=rt(),n=k.useRef(null),[i,s]=k.useState(!1),[o,a]=k.useState(!1),[l,u]=k.useState(!1),[d,h]=k.useState(!1),{data:f,isLoading:p,error:m}=st({queryKey:["company",t],queryFn:async()=>(await He.getCompany(t,{_embed:!0})).data}),{data:g}=st({queryKey:["company-people",t],queryFn:async()=>(await _e.getCompanyPeople(t)).data}),{data:v}=st({queryKey:["company",f==null?void 0:f.parent],queryFn:async()=>(await He.getCompany(f.parent,{_embed:!0})).data,enabled:!!(f!=null&&f.parent)}),{data:y=[]}=st({queryKey:["company-children",t],queryFn:async()=>(await He.getCompanies({parent:t,per_page:100,_embed:!0})).data}),b=((P=f==null?void 0:f.acf)==null?void 0:P.investors)||[],{data:w=[]}=st({queryKey:["company-investors",t,b],queryFn:async()=>{if(!b.length)return[];const[M,W]=await Promise.all([He.getPeople({per_page:100,include:b.join(","),_embed:!0}),He.getCompanies({per_page:100,include:b.join(","),_embed:!0})]),Y=(M.data||[]).map(K=>{var oe,Te,me,Be;return{id:K.id,type:"person",name:Tn(((oe=K.title)==null?void 0:oe.rendered)||""),thumbnail:(Be=(me=(Te=K._embedded)==null?void 0:Te["wp:featuredmedia"])==null?void 0:me[0])==null?void 0:Be.source_url}}),Q=(W.data||[]).map(K=>{var oe,Te,me;return{id:K.id,type:"company",name:ur(K),thumbnail:(me=(Te=(oe=K._embedded)==null?void 0:oe["wp:featuredmedia"])==null?void 0:Te[0])==null?void 0:me.source_url}}),pe=[...Y,...Q];return b.map(K=>pe.find(oe=>oe.id===K)).filter(Boolean)},enabled:b.length>0}),{data:x=[]}=st({queryKey:["investments",t],queryFn:async()=>(await _e.getInvestments(t)).data,enabled:!!t}),S=We({mutationFn:()=>He.deleteCompany(t,{force:!0}),onSuccess:()=>{r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["dashboard"]}),e("/companies")}}),_=We({mutationFn:M=>He.updateCompany(t,M),onSuccess:()=>{r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["company-investors",t]}),r.invalidateQueries({queryKey:["dashboard"]})}});mh(ur(f)||"Organization"),k.useEffect(()=>{(f==null?void 0:f.status)==="trash"&&e("/companies",{replace:!0})},[f,e]);const E=async()=>{if(window.confirm("Are you sure you want to delete this organization?"))try{await S.mutateAsync()}catch{alert("Failed to delete organization. Please try again.")}},N=async M=>{h(!0);try{const W={title:M.title,parent:M.parentId||0,acf:{website:M.website,industry:M.industry,investors:M.investors||[]}};await _.mutateAsync(W),a(!1)}catch{alert("Failed to save organization. Please try again.")}finally{h(!1)}},T=async M=>{var Y;const W=(Y=M.target.files)==null?void 0:Y[0];if(W){if(!W.type.startsWith("image/")){alert("Please select an image file");return}if(W.size>5*1024*1024){alert("Image size must be less than 5MB");return}s(!0);try{await _e.uploadCompanyLogo(t,W),r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]})}catch{alert("Failed to upload logo. Please try again.")}finally{s(!1),n.current&&(n.current.value="")}}};if(p)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(m||!f)return c.jsxs("div",{className:"card p-6 text-center",children:[c.jsx("p",{className:"text-red-600",children:"Failed to load organization."}),c.jsx(Le,{to:"/companies",className:"btn-secondary mt-4",children:"Back to organizations"})]});if(f.status==="trash")return null;const j=f.acf||{};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs(Le,{to:"/companies",className:"flex items-center text-gray-600 hover:text-gray-900",children:[c.jsx(ph,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Back to organizations"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>u(!0),className:"btn-secondary",title:"Share",children:[c.jsx(TM,{className:"w-4 h-4 mr-2"}),"Share"]}),c.jsxs("button",{onClick:()=>a(!0),className:"btn-secondary",children:[c.jsx(rre,{className:"w-4 h-4 mr-2"}),"Edit"]}),c.jsxs("button",{onClick:E,className:"btn-danger",children:[c.jsx(pn,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]}),c.jsx("div",{className:"card p-6",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"relative group",children:[(D=(C=(O=f._embedded)==null?void 0:O["wp:featuredmedia"])==null?void 0:C[0])!=null&&D.source_url?c.jsx("img",{src:f._embedded["wp:featuredmedia"][0].source_url,alt:ur(f),className:"w-24 h-24 rounded-lg object-contain bg-white"}):c.jsx("div",{className:"w-24 h-24 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:c.jsx(Ir,{className:"w-12 h-12 text-gray-400"})}),c.jsx("div",{className:"absolute inset-0 rounded-lg bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var M;return(M=n.current)==null?void 0:M.click()},children:i?c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):c.jsx(Ute,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),c.jsx("input",{ref:n,type:"file",accept:"image/*",onChange:T,className:"hidden",disabled:i})]}),c.jsxs("div",{children:[v&&c.jsxs(Le,{to:`/companies/${v.id}`,className:"text-sm text-primary-600 hover:underline flex items-center mb-1",children:[c.jsx(n5,{className:"w-3 h-3 mr-1"}),"Subsidiary of ",ur(v)]}),c.jsx("h1",{className:"text-2xl font-bold",children:ur(f)}),j.industry&&c.jsx("p",{className:"text-gray-500",children:j.industry}),j.website&&c.jsxs("a",{href:j.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline flex items-center mt-1",children:[c.jsx(hy,{className:"w-4 h-4 mr-1"}),j.website]})]})]})}),y.length>0&&c.jsxs("div",{className:"card p-6",children:[c.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[c.jsx(n5,{className:"w-5 h-5 mr-2"}),"Subsidiaries"]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:y.map(M=>{var W,Y,Q,pe;return c.jsxs(Le,{to:`/companies/${M.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[(Q=(Y=(W=M._embedded)==null?void 0:W["wp:featuredmedia"])==null?void 0:Y[0])!=null&&Q.source_url?c.jsx("img",{src:M._embedded["wp:featuredmedia"][0].source_url,alt:ur(M),className:"w-10 h-10 rounded object-contain bg-white"}):c.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded flex items-center justify-center",children:c.jsx(Ir,{className:"w-5 h-5 text-gray-400"})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("p",{className:"text-sm font-medium",children:ur(M)}),((pe=M.acf)==null?void 0:pe.industry)&&c.jsx("p",{className:"text-xs text-gray-500",children:M.acf.industry})]})]},M.id)})})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"card p-6",children:[c.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[c.jsx(Pn,{className:"w-5 h-5 mr-2"}),"Current employees"]}),((F=g==null?void 0:g.current)==null?void 0:F.length)>0?c.jsx("div",{className:"space-y-2",children:g.current.map(M=>{var W;return c.jsxs(Le,{to:`/people/${M.id}`,className:"flex items-center p-2 rounded hover:bg-gray-50",children:[M.thumbnail?c.jsx("img",{src:M.thumbnail,alt:"",loading:"lazy",className:"w-8 h-8 rounded-full"}):c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-xs text-gray-500",children:((W=M.name)==null?void 0:W[0])||"?"})}),c.jsxs("div",{className:"ml-2",children:[c.jsx("p",{className:"text-sm font-medium",children:M.name}),M.job_title&&c.jsx("p",{className:"text-xs text-gray-500",children:M.job_title})]})]},M.id)})}):c.jsx("p",{className:"text-sm text-gray-500",children:"No current employees."})]}),c.jsxs("div",{className:"card p-6",children:[c.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[c.jsx(Pn,{className:"w-5 h-5 mr-2"}),"Former employees"]}),(($=g==null?void 0:g.former)==null?void 0:$.length)>0?c.jsx("div",{className:"space-y-2",children:g.former.map(M=>{var W;return c.jsxs(Le,{to:`/people/${M.id}`,className:"flex items-center p-2 rounded hover:bg-gray-50",children:[M.thumbnail?c.jsx("img",{src:M.thumbnail,alt:"",loading:"lazy",className:"w-8 h-8 rounded-full opacity-75"}):c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center opacity-75",children:c.jsx("span",{className:"text-xs text-gray-500",children:((W=M.name)==null?void 0:W[0])||"?"})}),c.jsxs("div",{className:"ml-2",children:[c.jsx("p",{className:"text-sm font-medium text-gray-700",children:M.name}),M.job_title&&c.jsx("p",{className:"text-xs text-gray-500",children:M.job_title})]})]},M.id)})}):c.jsx("p",{className:"text-sm text-gray-500",children:"No former employees."})]})]}),w.length>0&&c.jsxs("div",{className:"card p-6",children:[c.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[c.jsx(Jy,{className:"w-5 h-5 mr-2"}),"Investors"]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:w.map(M=>{const W=M.type==="person",Y=W?`/people/${M.id}`:`/companies/${M.id}`;return c.jsxs(Le,{to:Y,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[M.thumbnail?c.jsx("img",{src:M.thumbnail,alt:M.name,loading:"lazy",className:`w-10 h-10 object-cover ${W?"rounded-full":"rounded"}`}):c.jsx("div",{className:`w-10 h-10 bg-gray-100 flex items-center justify-center ${W?"rounded-full":"rounded"}`,children:W?c.jsx(il,{className:"w-5 h-5 text-gray-400"}):c.jsx(Ir,{className:"w-5 h-5 text-gray-400"})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("p",{className:"text-sm font-medium",children:M.name}),c.jsx("p",{className:"text-xs text-gray-500",children:W?"Person":"Organization"})]})]},`${M.type}-${M.id}`)})})]}),x.length>0&&c.jsxs("div",{className:"card p-6",children:[c.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[c.jsx(Jy,{className:"w-5 h-5 mr-2"}),"Invested in"]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:x.map(M=>c.jsxs(Le,{to:`/companies/${M.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[M.thumbnail?c.jsx("img",{src:M.thumbnail,alt:M.name,loading:"lazy",className:"w-10 h-10 object-contain rounded"}):c.jsx("div",{className:"w-10 h-10 bg-gray-100 flex items-center justify-center rounded",children:c.jsx(Ir,{className:"w-5 h-5 text-gray-400"})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("p",{className:"text-sm font-medium",children:M.name}),M.industry&&c.jsx("p",{className:"text-xs text-gray-500",children:M.industry})]})]},M.id))})]}),((L=j.contact_info)==null?void 0:L.length)>0&&c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"font-semibold mb-4",children:"Contact information"}),c.jsx("div",{className:"space-y-3",children:j.contact_info.map((M,W)=>c.jsxs("div",{children:[c.jsxs("span",{className:"text-sm text-gray-500",children:[M.contact_label||M.contact_type,":"]}),c.jsx("span",{className:"ml-2",children:M.contact_value})]},W))})]}),c.jsx($M,{isOpen:o,onClose:()=>a(!1),onSubmit:N,isLoading:d,company:f}),c.jsx(_se,{isOpen:l,onClose:()=>u(!1),postType:"companies",postId:f.id,postTitle:ur(f)})]})}function YEe({person:t,dateType:e}){var r;return c.jsx("div",{className:"flex items-center gap-3 py-2",children:c.jsxs(Le,{to:`/people/${t.id}`,className:"flex items-center gap-3 flex-1 min-w-0 hover:opacity-80",children:[t.thumbnail?c.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}):c.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:c.jsx("span",{className:"text-sm font-medium text-gray-500",children:(r=t.name)==null?void 0:r[0]})}),c.jsx("span",{className:"font-medium truncate",children:t.name}),c.jsx("span",{className:"text-sm text-gray-500 capitalize flex-shrink-0",children:e})]})})}function QEe({dates:t}){const e=t[0],n=e.days_until===0?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600",i=[];return t.forEach(s=>{var a,l;const o=((a=s.date_type)==null?void 0:a[0])||"Date";((l=s.related_people)==null?void 0:l.length)>0?s.related_people.forEach(u=>{i.push({person:u,dateType:o})}):i.push({person:{id:null,name:s.title,thumbnail:null},dateType:o})}),c.jsx("div",{className:"card p-4 break-inside-avoid mb-4",children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:`w-14 h-14 rounded-lg ${n} flex items-center justify-center flex-shrink-0`,children:c.jsx("span",{className:"text-2xl font-bold leading-none",children:Nn(new Date(e.next_occurrence),"d")})}),c.jsx("div",{className:"flex-1 min-w-0 divide-y divide-gray-100",children:i.map(({person:s,dateType:o},a)=>c.jsx(YEe,{person:s,dateType:o},s.id?`${s.id}-${o}`:`${a}-${o}`))})]})})}function XEe(){const[t,e]=k.useState(!1),[r,n]=k.useState(!1),i=rt(),{data:s,isLoading:o,error:a}=gme(365),{data:l=[],isLoading:u}=Gc(),d=We({mutationFn:async m=>{const g={title:m.title,status:"publish",date_type:m.date_type,acf:{date_value:m.date_value,related_people:m.related_people,is_recurring:m.is_recurring,year_unknown:m.year_unknown}};return(await He.createDate(g)).data},onSuccess:()=>{i.invalidateQueries({queryKey:["reminders"]}),e(!1)}}),h=async m=>{n(!0);try{await d.mutateAsync(m)}finally{n(!1)}},f=(s==null?void 0:s.reduce((m,g)=>{const v=Nn(new Date(g.next_occurrence),"yyyy-MM-dd");return m[v]||(m[v]=[]),m[v].push(g),m},{}))||{},p=Object.entries(f).reduce((m,[g,v])=>{const y=Nn(new Date(g),"MMMM yyyy");return m[y]||(m[y]=[]),m[y].push(v),m},{});return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("p",{className:"text-gray-600",children:[(s==null?void 0:s.length)||0," upcoming dates"]}),c.jsxs("button",{onClick:()=>e(!0),className:"btn-primary",children:[c.jsx(or,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Add date"})]})]}),o&&c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),a&&c.jsx("div",{className:"card p-6 text-center",children:c.jsx("p",{className:"text-red-600",children:"Failed to load dates."})}),!o&&!a&&(s==null?void 0:s.length)===0&&c.jsxs("div",{className:"card p-12 text-center",children:[c.jsx(bo,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium mb-1",children:"No important dates"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Add birthdays, anniversaries, and more."}),c.jsxs("button",{onClick:()=>e(!0),className:"btn-primary",children:[c.jsx(or,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Add date"})]})]}),Object.entries(p).map(([m,g])=>c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:m}),c.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 gap-4",children:g.map(v=>c.jsx(QEe,{dates:v},v[0].next_occurrence))})]},m)),c.jsx(FM,{isOpen:t,onClose:()=>e(!1),onSubmit:h,isLoading:r,allPeople:l,isPeopleLoading:u})]})}function JEe(){mh("Todos");const[t,e]=k.useState(!1),[r,n]=k.useState(null),[i,s]=k.useState(!1),[o,a]=k.useState(!1),[l,u]=k.useState(null),[d,h]=k.useState(!1),[f,p]=k.useState(!1),[m,g]=k.useState(null),{data:v,isLoading:y}=sre(!0),b=ore(),w=yme(),x=PM(),S=k.useMemo(()=>Mre(new Date,3),[]),{incompleteTodos:_,recentlyCompletedTodos:E,olderCompletedTodos:N}=k.useMemo(()=>{if(!v)return{incompleteTodos:[],recentlyCompletedTodos:[],olderCompletedTodos:[]};const $=[],L=[],M=[];return v.forEach(W=>{if(!W.is_completed)$.push(W);else try{const Y=wp(W.created);Oye(Y,S)?L.push(W):M.push(W)}catch{M.push(W)}}),{incompleteTodos:$,recentlyCompletedTodos:L,olderCompletedTodos:M}},[v,S]),T=$=>{if(!$.is_completed){u($),h(!0);return}b.mutate({todoId:$.id,data:{content:$.content,due_date:$.due_date,is_completed:!1}})},j=()=>{l&&(b.mutate({todoId:l.id,data:{content:l.content,due_date:l.due_date,is_completed:!0}}),h(!1),u(null))},P=()=>{if(!l)return;const $=new Date().toISOString().split("T")[0];g({content:l.content,activity_date:$,activity_type:"note",participants:[]}),h(!1),p(!0)},O=async $=>{if(l)try{await x.mutateAsync({personId:l.person_id,data:$}),await b.mutateAsync({todoId:l.id,data:{content:l.content,due_date:l.due_date,is_completed:!0}}),p(!1),u(null),g(null)}catch{alert("Failed to create activity. Please try again.")}},C=async $=>{r&&(await b.mutateAsync({todoId:r.id,data:$}),s(!1),n(null))},D=async $=>{window.confirm("Are you sure you want to delete this todo?")&&await w.mutateAsync($)};if(y)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});const F=[...E,...N];return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsx("h1",{className:"text-2xl font-bold",children:"Todos"}),c.jsxs("div",{className:"flex items-center gap-2",children:[N.length>0&&c.jsxs("button",{onClick:()=>e(!t),className:`btn-secondary text-sm flex items-center gap-2 ${t?"bg-primary-50 border-primary-300":""}`,children:[c.jsx(xp,{className:"w-4 h-4"}),t?"Hide older":"Show all completed"]}),c.jsxs("button",{onClick:()=>a(!0),className:"btn-primary text-sm flex items-center gap-2",children:[c.jsx(or,{className:"w-4 h-4"}),"Add todo"]})]})]}),c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"p-4 border-b border-gray-200",children:c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx(Bd,{className:"w-5 h-5 mr-2 text-gray-500"}),"Open todos (",_.length,")"]})}),_.length>0?c.jsx("div",{className:"divide-y divide-gray-100",children:_.map($=>c.jsx(m1,{todo:$,onToggle:T,onEdit:L=>{n(L),s(!0)},onDelete:D},$.id))}):c.jsxs("div",{className:"p-8 text-center",children:[c.jsx(Fs,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),c.jsx("p",{className:"text-gray-500",children:"No open todos"}),c.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Create todos from a person's detail page"})]})]}),E.length>0&&!t&&c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"p-4 border-b border-gray-200",children:c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx(Hte,{className:"w-5 h-5 mr-2 text-primary-600"}),"Recently completed (",E.length,")"]})}),c.jsx("div",{className:"divide-y divide-gray-100",children:E.map($=>c.jsx(m1,{todo:$,onToggle:T,onEdit:L=>{n(L),s(!0)},onDelete:D},$.id))})]}),t&&F.length>0&&c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"p-4 border-b border-gray-200",children:c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx(Fs,{className:"w-5 h-5 mr-2 text-primary-600"}),"All completed todos (",F.length,")"]})}),c.jsx("div",{className:"divide-y divide-gray-100",children:F.map($=>c.jsx(m1,{todo:$,onToggle:T,onEdit:L=>{n(L),s(!0)},onDelete:D},$.id))})]}),c.jsx(Sse,{isOpen:i,onClose:()=>{s(!1),n(null)},onSubmit:C,isLoading:b.isPending,todo:r}),c.jsx(ure,{isOpen:o,onClose:()=>a(!1)}),c.jsx(qM,{isOpen:d,onClose:()=>{h(!1),u(null)},todo:l,onComplete:j,onCompleteAsActivity:P}),c.jsx(kA,{isOpen:f,onClose:()=>{p(!1),u(null),g(null)},onSubmit:O,isLoading:x.isPending,personId:l==null?void 0:l.person_id,initialData:m})]})}function m1({todo:t,onToggle:e,onEdit:r,onDelete:n}){var s;const i=dm(t);return c.jsxs("div",{className:"flex items-start p-4 hover:bg-gray-50 transition-colors group",children:[c.jsx("button",{onClick:()=>e(t),className:"mt-0.5 mr-3 flex-shrink-0",title:t.is_completed?"Mark as incomplete":"Mark as complete",children:t.is_completed?c.jsx(Fs,{className:"w-5 h-5 text-primary-600"}):c.jsx(Bd,{className:`w-5 h-5 ${i?"text-red-600":"text-gray-400"}`})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:`text-sm ${t.is_completed?"line-through text-gray-400":i?"text-red-600 font-medium":"text-gray-900"}`,children:t.content}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-2",children:[c.jsxs(Le,{to:`/people/${t.person_id}`,className:"flex items-center gap-2 text-xs text-primary-600 hover:text-primary-700 hover:underline",children:[t.person_thumbnail?c.jsx("img",{src:t.person_thumbnail,alt:t.person_name,className:"w-5 h-5 rounded-full object-cover"}):c.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-xs text-gray-500",children:(s=t.person_name)==null?void 0:s[0]})}),t.person_name]}),t.due_date&&c.jsxs("span",{className:`text-xs ${i&&!t.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",Nn(new Date(t.due_date),"MMM d, yyyy"),i&&!t.is_completed&&" (overdue)"]})]})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[c.jsx("button",{onClick:()=>r(t),className:"p-1 hover:bg-gray-100 rounded",title:"Edit todo",children:c.jsx(oa,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),c.jsx("button",{onClick:()=>n(t.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete todo",children:c.jsx(pn,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})}function ZEe(){var y,b,w;const[t,e]=k.useState(null),[r,n]=k.useState(""),[i,s]=k.useState(!1),[o,a]=k.useState(null),l=rt(),u=We({mutationFn:async x=>{const S=new FormData;return S.append("file",x),(await Z.post("/prm/v1/import/monica/validate",S,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:x=>{a(x)},onError:x=>{var S,_;a({valid:!1,error:((_=(S=x.response)==null?void 0:S.data)==null?void 0:_.message)||"Failed to validate file"})}}),d=We({mutationFn:async({file:x,monicaUrl:S})=>{const _=new FormData;return _.append("file",x),_.append("monica_url",S),(await Z.post("/prm/v1/import/monica",_,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{l.invalidateQueries({queryKey:["people"]}),l.invalidateQueries({queryKey:["companies"]}),l.invalidateQueries({queryKey:["dates"]}),l.invalidateQueries({queryKey:["dashboard"]})}}),h=k.useCallback(x=>{x.preventDefault(),x.stopPropagation(),x.type==="dragenter"||x.type==="dragover"?s(!0):x.type==="dragleave"&&s(!1)},[]),f=k.useCallback(x=>{x.preventDefault(),x.stopPropagation(),s(!1),x.dataTransfer.files&&x.dataTransfer.files[0]&&m(x.dataTransfer.files[0])},[]),p=x=>{x.target.files&&x.target.files[0]&&m(x.target.files[0])},m=x=>{if(!x.name.endsWith(".sql")){a({valid:!1,error:"Please select a SQL file"});return}e(x),a(null),d.reset(),u.mutate(x)},g=()=>{if(!r.trim()){a(x=>({...x,urlError:"Please enter your Monica instance URL"}));return}t&&(o!=null&&o.valid)&&d.mutate({file:t,monicaUrl:r.trim()})},v=()=>{e(null),n(""),a(null),u.reset(),d.reset()};return c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Import from Monica"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts, relationships, notes, and photos from a Monica CRM SQL export file. Reimporting the same file will update existing contacts instead of creating duplicates."}),d.isSuccess?c.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Tc,{className:"h-5 w-5 text-green-600 mt-0.5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),c.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[c.jsxs("p",{children:["Contacts imported: ",d.data.stats.contacts_imported]}),c.jsxs("p",{children:["Contacts updated: ",d.data.stats.contacts_updated]}),c.jsxs("p",{children:["Contacts skipped (partial): ",d.data.stats.contacts_skipped]}),c.jsxs("p",{children:["Photos imported: ",d.data.stats.photos_imported]}),c.jsxs("p",{children:["Organizations created: ",d.data.stats.companies_created]}),c.jsxs("p",{children:["Relationships created: ",d.data.stats.relationships_created]}),c.jsxs("p",{children:["Important dates created: ",d.data.stats.dates_created]}),c.jsxs("p",{children:["Notes created: ",d.data.stats.notes_created]}),((y=d.data.stats.errors)==null?void 0:y.length)>0&&c.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[c.jsx("p",{className:"font-medium",children:"Errors:"}),c.jsx("ul",{className:"list-disc list-inside",children:d.data.stats.errors.map((x,S)=>c.jsx("li",{children:x},S))})]})]}),c.jsx("button",{onClick:v,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${i?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:f,children:[c.jsx("input",{type:"file",accept:".sql",onChange:p,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),u.isPending?c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(Do,{className:"h-8 w-8 text-primary-600 animate-spin"}),c.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(lm,{className:"h-8 w-8 text-green-600"}),c.jsx("p",{className:"font-medium text-gray-900",children:t.name}),c.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024/1024).toFixed(2)," MB"]})]}):c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(jc,{className:"h-8 w-8 text-gray-400"}),c.jsx("p",{className:"text-gray-600",children:"Drag and drop your Monica SQL export file here, or click to browse"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Supports SQL export files"})]})]}),o&&c.jsx("div",{className:`rounded-lg border p-4 ${o.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:o.valid?c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Tc,{className:"h-5 w-5 text-green-600 mt-0.5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),c.jsxs("div",{className:"mt-2 text-sm text-green-800",children:[c.jsxs("p",{children:["Export format: ",o.version]}),c.jsxs("p",{children:["Contacts to import: ",o.summary.contacts]}),c.jsxs("p",{children:["Relationships: ",o.summary.relationships]}),c.jsxs("p",{children:["Notes: ",o.summary.notes]}),c.jsxs("p",{children:["Dates: ",o.summary.reminders]}),c.jsxs("p",{children:["Photos: ",o.summary.photos]}),c.jsxs("p",{children:["Organizations: ",o.summary.companies_count]})]})]})]}):c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Ao,{className:"h-5 w-5 text-red-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),c.jsx("p",{className:"text-sm text-red-700 mt-1",children:o.error})]})]})}),(o==null?void 0:o.valid)&&c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"monica-url",className:"block text-sm font-medium text-gray-700",children:"Monica Instance URL"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(NM,{className:"h-4 w-4 text-gray-400"})}),c.jsx("input",{type:"url",id:"monica-url",value:r,onChange:x=>n(x.target.value),placeholder:"https://your-monica-instance.com",className:`block w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ${o.urlError?"border-red-300":"border-gray-300"}`})]}),o.urlError&&c.jsx("p",{className:"text-sm text-red-600",children:o.urlError}),c.jsx("p",{className:"text-xs text-gray-500",children:"Enter the URL of your Monica instance to import photos. Photos will be downloaded from this URL."})]}),(o==null?void 0:o.valid)&&c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:g,disabled:d.isPending,className:"btn-primary flex items-center gap-2",children:d.isPending?c.jsxs(c.Fragment,{children:[c.jsx(Do,{className:"h-4 w-4 animate-spin"}),c.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(jc,{className:"h-4 w-4"}),c.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),c.jsx("button",{onClick:v,disabled:d.isPending,className:"btn-secondary",children:"Cancel"})]}),d.isError&&c.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Ao,{className:"h-5 w-5 text-red-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),c.jsx("p",{className:"text-sm text-red-700 mt-1",children:((w=(b=d.error.response)==null?void 0:b.data)==null?void 0:w.message)||"An error occurred during import"})]})]})})]})]})}function eNe(){var g,v,y;const[t,e]=k.useState(null),[r,n]=k.useState(!1),[i,s]=k.useState(null),o=rt(),a=We({mutationFn:async b=>{const w=new FormData;return w.append("file",b),(await Z.post("/prm/v1/import/vcard/validate",w,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:b=>{s(b)},onError:b=>{var w,x;s({valid:!1,error:((x=(w=b.response)==null?void 0:w.data)==null?void 0:x.message)||"Failed to validate file"})}}),l=We({mutationFn:async b=>{const w=new FormData;return w.append("file",b),(await Z.post("/prm/v1/import/vcard",w,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{o.invalidateQueries({queryKey:["people"]}),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["dates"]}),o.invalidateQueries({queryKey:["dashboard"]})}}),u=k.useCallback(b=>{b.preventDefault(),b.stopPropagation(),b.type==="dragenter"||b.type==="dragover"?n(!0):b.type==="dragleave"&&n(!1)},[]),d=k.useCallback(b=>{b.preventDefault(),b.stopPropagation(),n(!1),b.dataTransfer.files&&b.dataTransfer.files[0]&&f(b.dataTransfer.files[0])},[]),h=b=>{b.target.files&&b.target.files[0]&&f(b.target.files[0])},f=b=>{const w=b.name.split(".").pop().toLowerCase();if(w!=="vcf"&&w!=="vcard"){s({valid:!1,error:"Please select a vCard file (.vcf)"});return}e(b),s(null),l.reset(),a.mutate(b)},p=()=>{t&&(i!=null&&i.valid)&&l.mutate(t)},m=()=>{e(null),s(null),a.reset(),l.reset()};return c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Import from vCard"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts from a vCard (.vcf) file. vCard is a standard format supported by most contact apps including Apple Contacts, Outlook, and Android. Files can contain one or multiple contacts."}),l.isSuccess?c.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Tc,{className:"h-5 w-5 text-green-600 mt-0.5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),c.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[c.jsxs("p",{children:["Contacts imported: ",l.data.stats.contacts_imported]}),c.jsxs("p",{children:["Contacts updated: ",l.data.stats.contacts_updated]}),c.jsxs("p",{children:["Contacts skipped: ",l.data.stats.contacts_skipped]}),c.jsxs("p",{children:["Photos imported: ",l.data.stats.photos_imported]}),c.jsxs("p",{children:["Organizations created: ",l.data.stats.companies_created]}),c.jsxs("p",{children:["Birthdays created: ",l.data.stats.dates_created]}),c.jsxs("p",{children:["Notes created: ",l.data.stats.notes_created]}),((g=l.data.stats.errors)==null?void 0:g.length)>0&&c.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[c.jsx("p",{className:"font-medium",children:"Errors:"}),c.jsx("ul",{className:"list-disc list-inside",children:l.data.stats.errors.map((b,w)=>c.jsx("li",{children:b},w))})]})]}),c.jsx("button",{onClick:m,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${r?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:u,onDragLeave:u,onDragOver:u,onDrop:d,children:[c.jsx("input",{type:"file",accept:".vcf,.vcard",onChange:h,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),a.isPending?c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(Do,{className:"h-8 w-8 text-primary-600 animate-spin"}),c.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(lm,{className:"h-8 w-8 text-green-600"}),c.jsx("p",{className:"font-medium text-gray-900",children:t.name}),c.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024).toFixed(2)," KB"]})]}):c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(jc,{className:"h-8 w-8 text-gray-400"}),c.jsx("p",{className:"text-gray-600",children:"Drag and drop your vCard file here, or click to browse"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Supports .vcf and .vcard files"})]})]}),i&&c.jsx("div",{className:`rounded-lg border p-4 ${i.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:i.valid?c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Tc,{className:"h-5 w-5 text-green-600 mt-0.5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),c.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-3 gap-3",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(Pn,{className:"h-4 w-4"}),c.jsxs("span",{children:[i.summary.contacts," contacts"]})]}),i.summary.companies_count>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(Ir,{className:"h-4 w-4"}),c.jsxs("span",{children:[i.summary.companies_count," organizations"]})]}),i.summary.birthdays>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(Wte,{className:"h-4 w-4"}),c.jsxs("span",{children:[i.summary.birthdays," birthdays"]})]}),i.summary.photos>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(Xte,{className:"h-4 w-4"}),c.jsxs("span",{children:[i.summary.photos," photos"]})]}),i.summary.notes>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(OM,{className:"h-4 w-4"}),c.jsxs("span",{children:[i.summary.notes," notes"]})]})]})]})]}):c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Ao,{className:"h-5 w-5 text-red-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),c.jsx("p",{className:"text-sm text-red-700 mt-1",children:i.error})]})]})}),(i==null?void 0:i.valid)&&c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:p,disabled:l.isPending,className:"btn-primary flex items-center gap-2",children:l.isPending?c.jsxs(c.Fragment,{children:[c.jsx(Do,{className:"h-4 w-4 animate-spin"}),c.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(jc,{className:"h-4 w-4"}),c.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),c.jsx("button",{onClick:m,disabled:l.isPending,className:"btn-secondary",children:"Cancel"})]}),l.isError&&c.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Ao,{className:"h-5 w-5 text-red-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),c.jsx("p",{className:"text-sm text-red-700 mt-1",children:((y=(v=l.error.response)==null?void 0:v.data)==null?void 0:y.message)||"An error occurred during import"})]})]})})]})]})}function tNe(){var x,S,_;const[t,e]=k.useState(null),[r,n]=k.useState(!1),[i,s]=k.useState(null),[o,a]=k.useState({}),l=rt(),u=We({mutationFn:async E=>{const N=new FormData;return N.append("file",E),(await Z.post("/prm/v1/import/google-contacts/validate",N,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:E=>{var N;if(s(E),((N=E.duplicates)==null?void 0:N.length)>0){const T={};E.duplicates.forEach(j=>{T[j.index]="merge"}),a(T)}},onError:E=>{var N,T;s({valid:!1,error:((T=(N=E.response)==null?void 0:N.data)==null?void 0:T.message)||"Failed to validate file"})}}),d=We({mutationFn:async({file:E,decisions:N})=>{const T=new FormData;return T.append("file",E),T.append("decisions",JSON.stringify(N)),(await Z.post("/prm/v1/import/google-contacts",T,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{l.invalidateQueries({queryKey:["people"]}),l.invalidateQueries({queryKey:["companies"]}),l.invalidateQueries({queryKey:["dates"]}),l.invalidateQueries({queryKey:["dashboard"]})}}),h=k.useCallback(E=>{E.preventDefault(),E.stopPropagation(),E.type==="dragenter"||E.type==="dragover"?n(!0):E.type==="dragleave"&&n(!1)},[]),f=k.useCallback(E=>{E.preventDefault(),E.stopPropagation(),n(!1),E.dataTransfer.files&&E.dataTransfer.files[0]&&m(E.dataTransfer.files[0])},[]),p=E=>{E.target.files&&E.target.files[0]&&m(E.target.files[0])},m=E=>{if(!E.name.endsWith(".csv")){s({valid:!1,error:"Please select a CSV file"});return}e(E),s(null),a({}),d.reset(),u.mutate(E)},g=(E,N)=>{a(T=>({...T,[E]:N}))},v=()=>{t&&(i!=null&&i.valid)&&d.mutate({file:t,decisions:o})},y=()=>{e(null),s(null),a({}),u.reset(),d.reset()},b=(i==null?void 0:i.duplicates)||[],w=b.length>0;return c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Import from Google Contacts"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts from a Google Contacts CSV export. To export from Google:"}),c.jsxs("ol",{className:"text-sm text-gray-600 list-decimal list-inside space-y-1 ml-2",children:[c.jsxs("li",{children:["Go to ",c.jsx("a",{href:"https://contacts.google.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline",children:"contacts.google.com"})]}),c.jsx("li",{children:'Click "Export" in the left sidebar'}),c.jsx("li",{children:'Select "Google CSV" format and click "Export"'})]}),d.isSuccess?c.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Tc,{className:"h-5 w-5 text-green-600 mt-0.5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),c.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[c.jsxs("p",{children:["Contacts imported: ",d.data.stats.contacts_imported]}),c.jsxs("p",{children:["Contacts updated: ",d.data.stats.contacts_updated]}),c.jsxs("p",{children:["Contacts skipped: ",d.data.stats.contacts_skipped]}),c.jsxs("p",{children:["Organizations created: ",d.data.stats.companies_created]}),c.jsxs("p",{children:["Birthdays created: ",d.data.stats.dates_created]}),c.jsxs("p",{children:["Notes created: ",d.data.stats.notes_created]}),c.jsxs("p",{children:["Photos imported: ",d.data.stats.photos_imported]}),((x=d.data.stats.errors)==null?void 0:x.length)>0&&c.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[c.jsx("p",{className:"font-medium",children:"Errors:"}),c.jsx("ul",{className:"list-disc list-inside",children:d.data.stats.errors.map((E,N)=>c.jsx("li",{children:E},N))})]})]}),c.jsx("button",{onClick:y,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${r?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:f,children:[c.jsx("input",{type:"file",accept:".csv",onChange:p,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),u.isPending?c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(Do,{className:"h-8 w-8 text-primary-600 animate-spin"}),c.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(EM,{className:"h-8 w-8 text-green-600"}),c.jsx("p",{className:"font-medium text-gray-900",children:t.name}),c.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024).toFixed(2)," KB"]})]}):c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(jc,{className:"h-8 w-8 text-gray-400"}),c.jsx("p",{className:"text-gray-600",children:"Drag and drop your Google Contacts CSV here, or click to browse"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Supports Google CSV format"})]})]}),i&&c.jsx("div",{className:`rounded-lg border p-4 ${i.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:i.valid?c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Tc,{className:"h-5 w-5 text-green-600 mt-0.5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),c.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-3 gap-3",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(Pn,{className:"h-4 w-4"}),c.jsxs("span",{children:[i.summary.contacts," contacts"]})]}),i.summary.companies_count>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(Ir,{className:"h-4 w-4"}),c.jsxs("span",{children:[i.summary.companies_count," organizations"]})]}),i.summary.birthdays>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(Wte,{className:"h-4 w-4"}),c.jsxs("span",{children:[i.summary.birthdays," birthdays"]})]}),i.summary.notes>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(OM,{className:"h-4 w-4"}),c.jsxs("span",{children:[i.summary.notes," notes"]})]}),i.summary.photos>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(Xte,{className:"h-4 w-4"}),c.jsxs("span",{children:[i.summary.photos," photos"]})]})]})]})]}):c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Ao,{className:"h-5 w-5 text-red-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),c.jsx("p",{className:"text-sm text-red-700 mt-1",children:i.error})]})]})}),(i==null?void 0:i.valid)&&w&&c.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Vte,{className:"h-5 w-5 text-amber-600 mt-0.5 flex-shrink-0"}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("h3",{className:"font-medium text-amber-900",children:[b.length," contact",b.length>1?"s":""," may already exist"]}),c.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"Choose how to handle each potential duplicate:"}),c.jsx("div",{className:"mt-4 space-y-4",children:b.map(E=>c.jsx(rNe,{duplicate:E,decision:o[E.index]||"merge",onDecision:N=>g(E.index,N)},E.index))})]})]})}),(i==null?void 0:i.valid)&&c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:v,disabled:d.isPending,className:"btn-primary flex items-center gap-2",children:d.isPending?c.jsxs(c.Fragment,{children:[c.jsx(Do,{className:"h-4 w-4 animate-spin"}),c.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(jc,{className:"h-4 w-4"}),c.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),c.jsx("button",{onClick:y,disabled:d.isPending,className:"btn-secondary",children:"Cancel"})]}),d.isError&&c.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Ao,{className:"h-5 w-5 text-red-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),c.jsx("p",{className:"text-sm text-red-700 mt-1",children:((_=(S=d.error.response)==null?void 0:S.data)==null?void 0:_.message)||"An error occurred during import"})]})]})})]})]})}function rNe({duplicate:t,decision:e,onDecision:r}){var n,i;return c.jsxs("div",{className:"bg-white rounded-lg border border-amber-200 p-4",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"From CSV"}),c.jsx("p",{className:"font-medium text-gray-900 truncate",children:t.csv_name}),t.csv_org&&c.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.csv_org}),t.csv_email&&c.jsx("p",{className:"text-sm text-gray-500 truncate",children:t.csv_email})]}),c.jsx("div",{className:"hidden sm:flex items-center text-gray-400",children:c.jsx("span",{className:"text-lg",children:""})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Existing Contact"}),c.jsxs("div",{className:"flex items-start gap-3",children:[t.existing_photo?c.jsx("img",{src:t.existing_photo,alt:"",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}):c.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:c.jsx("span",{className:"text-gray-500 text-sm font-medium",children:((i=(n=t.existing_name)==null?void 0:n.charAt(0))==null?void 0:i.toUpperCase())||"?"})}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"font-medium text-gray-900 truncate",children:t.existing_name}),t.existing_org&&c.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.existing_org}),t.existing_email&&c.jsx("p",{className:"text-sm text-gray-500 truncate",children:t.existing_email})]})]})]})]}),c.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[c.jsxs("button",{type:"button",onClick:()=>r("merge"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="merge"?"bg-primary-100 text-primary-800 ring-2 ring-primary-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[c.jsx(Jte,{className:"h-4 w-4"}),"Update existing"]}),c.jsxs("button",{type:"button",onClick:()=>r("new"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="new"?"bg-green-100 text-green-800 ring-2 ring-green-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[c.jsx($0,{className:"h-4 w-4"}),"Create new"]}),c.jsxs("button",{type:"button",onClick:()=>r("skip"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="skip"?"bg-gray-200 text-gray-800 ring-2 ring-gray-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[c.jsx(ame,{className:"h-4 w-4"}),"Skip"]})]})]})}const nNe=[{id:"sync",label:"Sync",icon:TM},{id:"notifications",label:"Notifications",icon:Wpe},{id:"data",label:"Data",icon:Yte},{id:"admin",label:"Admin",icon:jM,adminOnly:!0},{id:"about",label:"About",icon:Qpe}];function iNe(){const[t,e]=Rhe(),r=window.prmConfig||{},n=r.isAdmin||!1,i=r.userId,s=t.get("tab")||"sync",o=je=>{e({tab:je})},a=nNe.filter(je=>!je.adminOnly||n),[l,u]=k.useState(""),[d,h]=k.useState(""),[f,p]=k.useState(!0),[m,g]=k.useState(!1),[v,y]=k.useState(!1),[b,w]=k.useState([]),[x,S]=k.useState(!0),[_,E]=k.useState(""),[N,T]=k.useState(!1),[j,P]=k.useState(null),[O,C]=k.useState(!1),[D,F]=k.useState(null),[$,L]=k.useState([]),[M,W]=k.useState(""),[Y,Q]=k.useState(!1),[pe,K]=k.useState(""),[oe,Te]=k.useState("09:00"),[me,Be]=k.useState(!0),[Oe,gt]=k.useState(!1),[U,ce]=k.useState(!1),[Me,Fe]=k.useState(""),[Tt,Yr]=k.useState(!1),[Tr,dt]=k.useState([]),[lr,Ni]=k.useState([]),[Jt,A]=k.useState([]),[q,z]=k.useState(!1),[ae,ee]=k.useState(!1),[J,ye]=k.useState(!1),[Ue,Ye]=k.useState(""),[qt,Ee]=k.useState(!1),[ne,ge]=k.useState("");k.useEffect(()=>{(async()=>{try{const qe=await Z.get("/prm/v1/user/ical-url");u(qe.data.url),h(qe.data.webcal_url)}catch{}finally{p(!1)}})()},[]),k.useEffect(()=>{i&&(async()=>{try{const[qe,Qe]=await Promise.all([_e.getAppPasswords(i),_e.getCardDAVUrls()]);w(qe.data||[]),F(Qe.data)}catch{}finally{S(!1)}})()},[i]);const he=async()=>{z(!0);try{const[je,qe]=await Promise.all([_e.getSlackChannels(),_e.getSlackTargets()]);dt(je.data.channels||[]),Ni(je.data.users||[]),A(qe.data.targets||[])}catch{Fe("Failed to load Slack channels and users. Please try refreshing the page.")}finally{z(!1)}};k.useEffect(()=>{(async()=>{try{const qe=await _e.getNotificationChannels();L(qe.data.channels||["email"]),W(qe.data.slack_webhook||""),Te(qe.data.notification_time||"09:00");const Qe=await _e.getSlackStatus(),Vt=Qe.data.connected||!1;Q(Vt),K(Qe.data.workspace_name||""),Vt&&await he()}catch{}finally{Be(!1)}})()},[]),k.useEffect(()=>{Y&&he()},[Y]),k.useEffect(()=>{const je=new URLSearchParams(window.location.search),qe=je.get("slack_connected"),Qe=je.get("slack_error");qe==="1"?(Fe("Slack connected successfully!"),o("notifications"),_e.getSlackStatus().then(Vt=>{Q(Vt.data.connected||!1),K(Vt.data.workspace_name||"")}),e({tab:"notifications"})):Qe&&(Fe(`Slack connection failed: ${Qe}`),o("notifications"),e({tab:"notifications"}))},[]);const ke=async()=>{var je,qe;try{const Qe=await Z.get("/prm/v1/slack/oauth/authorize");window.location.href=Qe.data.oauth_url}catch(Qe){alert(((qe=(je=Qe.response)==null?void 0:je.data)==null?void 0:qe.message)||"Failed to connect Slack")}},Ze=async()=>{var je,qe;if(confirm("Are you sure you want to disconnect Slack? You will stop receiving Slack notifications.")){Yr(!0);try{await _e.disconnectSlack(),Q(!1),K(""),dt([]),Ni([]),A([]),Fe("Slack disconnected successfully"),$.includes("slack")&&await Yo("slack")}catch(Qe){alert(((qe=(je=Qe.response)==null?void 0:je.data)==null?void 0:qe.message)||"Failed to disconnect Slack")}finally{Yr(!1)}}},ki=je=>{const qe=Jt.includes(je)?Jt.filter(Qe=>Qe!==je):[...Jt,je];A(qe)},bn=async()=>{var je,qe;ee(!0);try{await _e.updateSlackTargets(Jt),Fe("Notification targets saved successfully"),setTimeout(()=>Fe(""),3e3)}catch(Qe){alert(((qe=(je=Qe.response)==null?void 0:je.data)==null?void 0:qe.message)||"Failed to save notification targets")}finally{ee(!1)}},El=async()=>{try{await navigator.clipboard.writeText(l),g(!0),setTimeout(()=>g(!1),2e3)}catch{}},Nl=async je=>{var qe,Qe;if(je.preventDefault(),!!_.trim()){T(!0);try{const Vt=await _e.createAppPassword(i,_.trim());P(Vt.data.password),w([...b,Vt.data]),E("")}catch(Vt){alert(((Qe=(qe=Vt.response)==null?void 0:qe.data)==null?void 0:Qe.message)||"Failed to create app password")}finally{T(!1)}}},Bb=async(je,qe)=>{var Qe,Vt;if(confirm(`Are you sure you want to revoke the app password "${qe}"? Any devices using this password will no longer be able to sync.`))try{await _e.deleteAppPassword(i,je),w(b.filter(ci=>ci.uuid!==je))}catch(ci){alert(((Vt=(Qe=ci.response)==null?void 0:Qe.data)==null?void 0:Vt.message)||"Failed to revoke app password")}},kl=async()=>{try{await navigator.clipboard.writeText(j),C(!0),setTimeout(()=>C(!1),2e3)}catch{}},Jm=async je=>{try{await navigator.clipboard.writeText(je)}catch{}},Cl=je=>{if(!je)return"Never";const qe=new Date(je);return qe.toLocaleDateString("en-US",{month:"short",day:"numeric",year:qe.getFullYear()!==new Date().getFullYear()?"numeric":void 0})},li=async()=>{if(confirm("Are you sure you want to regenerate your calendar URL? Any existing calendar subscriptions will stop working until you update them with the new URL.")){y(!0);try{const je=await Z.post("/prm/v1/user/regenerate-ical-token");u(je.data.url),h(je.data.webcal_url)}catch{}finally{y(!1)}}},Yo=async je=>{var Qe,Vt;const qe=$.includes(je)?$.filter(ci=>ci!==je):[...$,je];gt(!0);try{await _e.updateNotificationChannels(qe),L(qe)}catch(ci){alert(((Vt=(Qe=ci.response)==null?void 0:Qe.data)==null?void 0:Vt.message)||"Failed to update notification channels")}finally{gt(!1)}},zb=async je=>{var Zm,xs;const[qe,Qe]=je.split(":").map(Number),Vt=Math.round(Qe/5)*5,ci=Vt===60?(qe+1)%24:qe,Ks=Vt===60?0:Vt,vu=`${String(ci).padStart(2,"0")}:${String(Ks).padStart(2,"0")}`;Te(vu),ce(!0);try{await _e.updateNotificationTime(vu)}catch(bu){alert(((xs=(Zm=bu.response)==null?void 0:Zm.data)==null?void 0:xs.message)||"Failed to update notification time");const Wb=await _e.getNotificationChannels();Te(Wb.data.notification_time||"09:00")}finally{ce(!1)}},yu=async()=>{var je,qe;if(confirm("This will send reminder emails for all reminders due today. Continue?")){ye(!0),Ye("");try{const Qe=await _e.triggerReminders();Ye(Qe.data.message||"Reminders triggered successfully.")}catch(Qe){Ye(((qe=(je=Qe.response)==null?void 0:je.data)==null?void 0:qe.message)||"Failed to trigger reminders. Please check server logs.")}finally{ye(!1)}}},Vb=async()=>{var je,qe;if(confirm("This will reschedule all user reminder cron jobs based on their notification time preferences. Continue?")){Ee(!0),ge("");try{const Qe=await _e.rescheduleCronJobs();ge(Qe.data.message||"Cron jobs rescheduled successfully.")}catch(Qe){ge(((qe=(je=Qe.response)==null?void 0:je.data)==null?void 0:qe.message)||"Failed to reschedule cron jobs. Please check server logs.")}finally{Ee(!1)}}},Wh=()=>{switch(s){case"sync":return c.jsx(sNe,{icalUrl:l,webcalUrl:d,icalLoading:f,icalCopied:m,copyIcalUrl:El,regenerateIcalToken:li,regenerating:v,appPasswords:b,appPasswordsLoading:x,carddavUrls:D,config:r,newPasswordName:_,setNewPasswordName:E,handleCreateAppPassword:Nl,creatingPassword:N,newPassword:j,setNewPassword:P,copyNewPassword:kl,passwordCopied:O,handleDeleteAppPassword:Bb,formatDate:Cl,copyCarddavUrl:Jm});case"notifications":return c.jsx(oNe,{notificationsLoading:me,notificationChannels:$,toggleChannel:Yo,savingChannels:Oe,slackConnected:Y,slackWorkspaceName:pe,handleConnectSlack:ke,handleDisconnectSlack:Ze,disconnectingSlack:Tt,webhookTestMessage:Me,slackChannels:Tr,slackUsers:lr,slackTargets:Jt,loadingSlackData:q,handleToggleSlackTarget:ki,handleSaveSlackTargets:bn,savingSlackTargets:ae,slackWebhook:M,notificationTime:oe,handleNotificationTimeChange:zb,savingTime:U});case"data":return c.jsx(aNe,{});case"admin":return n?c.jsx(lNe,{handleTriggerReminders:yu,triggeringReminders:J,reminderMessage:Ue,handleRescheduleCron:Vb,reschedulingCron:qt,cronMessage:ne}):null;case"about":return c.jsx(cNe,{config:r});default:return null}};return c.jsxs("div",{className:"max-w-3xl mx-auto",children:[c.jsx("div",{className:"border-b border-gray-200 mb-6",children:c.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:a.map(je=>{const qe=je.icon,Qe=s===je.id;return c.jsxs("button",{onClick:()=>o(je.id),className:`
                  flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap
                  ${Qe?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                `,children:[c.jsx(qe,{className:"w-4 h-4"}),je.label]},je.id)})})}),c.jsx("div",{className:"space-y-6",children:Wh()})]})}function sNe({icalUrl:t,webcalUrl:e,icalLoading:r,icalCopied:n,copyIcalUrl:i,regenerateIcalToken:s,regenerating:o,appPasswords:a,appPasswordsLoading:l,carddavUrls:u,config:d,newPasswordName:h,setNewPasswordName:f,handleCreateAppPassword:p,creatingPassword:m,newPassword:g,setNewPassword:v,copyNewPassword:y,passwordCopied:b,handleDeleteAppPassword:w,formatDate:x,copyCarddavUrl:S}){return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Calendar subscription"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Subscribe to your important dates in any calendar app (Apple Calendar, Google Calendar, Outlook, etc.)"}),r?c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),c.jsx("div",{className:"h-9 bg-gray-200 rounded w-24"})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label mb-1",children:"Your calendar feed URL"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",readOnly:!0,value:t,className:"input flex-1 text-sm font-mono bg-gray-50",onClick:_=>_.target.select()}),c.jsx("button",{onClick:i,className:"btn-secondary whitespace-nowrap",title:"Copy URL",children:n?c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied"]}):c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),"Copy"]})})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("a",{href:e,className:"btn-primary",children:c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Subscribe in calendar app"]})}),c.jsx("button",{onClick:s,disabled:o,className:"btn-secondary",children:o?"Regenerating...":"Regenerate URL"})]}),c.jsx("p",{className:"text-xs text-gray-500",children:'Keep this URL private. Anyone with access to it can see your important dates. If you think it has been compromised, click "Regenerate URL" to get a new one.'})]})]}),c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"CardDAV sync"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Sync your contacts with apps like Apple Contacts, Android Contacts, or Thunderbird using CardDAV."}),l?c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),c.jsx("div",{className:"h-24 bg-gray-200 rounded"})]}):c.jsxs("div",{className:"space-y-4",children:[u&&c.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-3",children:[c.jsx("h3",{className:"font-medium text-sm",children:"Connection details"}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-gray-500",children:"Server URL (for most apps)"}),c.jsxs("div",{className:"flex gap-2 mt-1",children:[c.jsx("input",{type:"text",readOnly:!0,value:u.addressbook,className:"input flex-1 text-xs font-mono bg-white",onClick:_=>_.target.select()}),c.jsx("button",{onClick:()=>S(u.addressbook),className:"btn-secondary text-xs px-2",title:"Copy URL",children:"Copy"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-gray-500",children:"Username"}),c.jsxs("div",{className:"flex gap-2 mt-1",children:[c.jsx("input",{type:"text",readOnly:!0,value:d.userLogin||"",className:"input flex-1 text-xs font-mono bg-white",onClick:_=>_.target.select()}),c.jsx("button",{onClick:()=>S(d.userLogin),className:"btn-secondary text-xs px-2",title:"Copy username",children:"Copy"})]})]}),c.jsx("p",{className:"text-xs text-gray-500",children:"Use one of the app passwords below instead of your regular password."})]}),c.jsxs("form",{onSubmit:p,className:"flex gap-2",children:[c.jsx("input",{type:"text",value:h,onChange:_=>f(_.target.value),placeholder:"Password name (e.g., iPhone Contacts)",className:"input flex-1",disabled:m}),c.jsx("button",{type:"submit",disabled:m||!h.trim(),className:"btn-primary whitespace-nowrap",children:m?"Creating...":"Create password"})]}),g&&c.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[c.jsx("p",{className:"text-sm text-green-800 font-medium mb-2",children:"Your new app password (copy it now, it won't be shown again):"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",readOnly:!0,value:g,className:"input flex-1 font-mono text-sm bg-white",onClick:_=>_.target.select()}),c.jsx("button",{onClick:y,className:"btn-primary whitespace-nowrap",children:b?"Copied!":"Copy"})]}),c.jsx("button",{onClick:()=>v(null),className:"text-xs text-green-700 mt-2 hover:underline",children:"I've saved this password, hide it"})]}),a.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium mb-2",children:"Your app passwords"}),c.jsx("div",{className:"space-y-2",children:a.map(_=>c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-sm",children:_.name}),c.jsxs("p",{className:"text-xs text-gray-500",children:["Created ",x(_.created),"  Last used ",x(_.last_used)]})]}),c.jsx("button",{onClick:()=>w(_.uuid,_.name),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Revoke"})]},_.uuid))})]}),a.length===0&&!g&&c.jsx("p",{className:"text-sm text-gray-500",children:"No app passwords yet. Create one to start syncing your contacts."})]})]})]})}function oNe({notificationsLoading:t,notificationChannels:e,toggleChannel:r,savingChannels:n,slackConnected:i,slackWorkspaceName:s,handleConnectSlack:o,handleDisconnectSlack:a,disconnectingSlack:l,webhookTestMessage:u,slackChannels:d,slackUsers:h,slackTargets:f,loadingSlackData:p,handleToggleSlackTarget:m,handleSaveSlackTargets:g,savingSlackTargets:v,slackWebhook:y,notificationTime:b,handleNotificationTimeChange:w,savingTime:x}){return c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Notifications"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose how you want to receive daily reminders about your important dates."}),t?c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),c.jsx("div",{className:"h-10 bg-gray-200 rounded"})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:"Email"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Receive daily digest emails"})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:e.includes("email"),onChange:()=>r("email"),disabled:n,className:"sr-only peer"}),c.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:"Slack"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Receive notifications in Slack"})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:e.includes("slack"),onChange:()=>r("slack"),disabled:n||!i,className:"sr-only peer"}),c.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),c.jsx("div",{children:i?c.jsxs("div",{className:"space-y-3",children:[c.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-green-900",children:"Connected to Slack"}),s&&c.jsxs("p",{className:"text-sm text-green-700",children:["Workspace: ",s]})]}),c.jsx("button",{onClick:a,disabled:l,className:"btn-secondary text-sm",children:l?"Disconnecting...":"Disconnect"})]})}),u&&c.jsx("p",{className:`text-sm ${u.includes("successfully")||u.includes("disconnected")?"text-green-600":"text-red-600"}`,children:u}),e.includes("slack")&&c.jsxs("div",{className:"mt-4 p-4 border border-gray-200 rounded-lg",children:[c.jsx("h3",{className:"font-medium mb-3",children:"Notification targets"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose where to send Slack notifications. You can select multiple channels and users."}),p?c.jsx("p",{className:"text-sm text-gray-500",children:"Loading channels and users..."}):c.jsxs(c.Fragment,{children:[d.length>0&&c.jsxs("div",{className:"mb-4",children:[c.jsx("h4",{className:"text-sm font-medium mb-2",children:"Channels"}),c.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:d.map(S=>c.jsxs("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:f.includes(S.id),onChange:()=>m(S.id),className:"mr-2 cursor-pointer"}),c.jsx("span",{className:"text-sm",children:S.name})]},S.id))})]}),h.length>0&&c.jsxs("div",{className:"mb-4",children:[c.jsx("h4",{className:"text-sm font-medium mb-2",children:"Direct messages"}),c.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:h.map(S=>c.jsxs("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:f.includes(S.id),onChange:()=>m(S.id),className:"mr-2 cursor-pointer"}),c.jsxs("span",{className:"text-sm",children:[S.name,S.is_me&&c.jsx("span",{className:"text-gray-500 ml-1",children:"(you)"})]})]},S.id))})]}),d.length===0&&h.length===0&&!p&&c.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"No channels or users found. Make sure the Slack app has the necessary permissions."}),c.jsx("button",{onClick:g,disabled:v,className:"btn-primary text-sm mt-4",children:v?"Saving...":"Save targets"})]})]})]}):c.jsxs("div",{className:"space-y-3",children:[c.jsx("button",{onClick:o,className:"btn-primary w-full",disabled:l,children:"Connect Slack"}),u&&c.jsx("p",{className:`text-sm ${u.includes("successfully")?"text-green-600":"text-red-600"}`,children:u}),c.jsx("p",{className:"text-xs text-gray-500",children:"Connect your Slack workspace to receive daily reminder notifications. You'll be able to message channels or receive direct messages."})]})}),y&&!i&&c.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:c.jsxs("p",{className:"text-sm text-yellow-800",children:[c.jsx("strong",{children:"Legacy webhook detected."})," Please connect via OAuth for better functionality. Your webhook will continue to work until you connect via OAuth."]})}),c.jsxs("div",{children:[c.jsx("label",{className:"label mb-1",children:"Notification time (UTC)"}),c.jsx("input",{type:"time",value:b,onChange:S=>w(S.target.value),className:"input",disabled:x,step:"300"}),b&&c.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm",children:[c.jsxs("p",{className:"text-gray-700",children:[c.jsx("span",{className:"font-medium",children:"UTC:"})," ",b]}),c.jsxs("p",{className:"text-gray-700 mt-1",children:[c.jsxs("span",{className:"font-medium",children:["Your time (",Intl.DateTimeFormat().resolvedOptions().timeZone,"):"]})," ",(()=>{try{const[S,_]=b.split(":"),E=new Date;return E.setUTCHours(parseInt(S),parseInt(_),0,0),E.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}catch{return b}})()]})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose the UTC time when you want to receive your daily reminder digest. Reminders are sent within a 1-hour window of your selected time."})]})]})]})}const QF=[{id:"vcard",name:"vCard",description:"Apple Contacts, Outlook, Android",icon:lm,component:eNe},{id:"google",name:"Google Contacts",description:"CSV export from Google",icon:EM,component:tNe},{id:"monica",name:"Monica CRM",description:"SQL export from Monica",icon:Yte,component:ZEe}];function aNe(){var i;const[t,e]=k.useState("vcard"),r=s=>{s==="vcard"?window.location.href="/wp-json/prm/v1/export/vcard":s==="google-csv"&&(window.location.href="/wp-json/prm/v1/export/google-csv")},n=(i=QF.find(s=>s.id===t))==null?void 0:i.component;return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Import data"}),c.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Import your contacts from various sources. Existing contacts with matching names will be updated instead of duplicated."}),c.jsx("div",{className:"border-b border-gray-200 mb-6",children:c.jsx("nav",{className:"-mb-px flex space-x-6","aria-label":"Import types",children:QF.map(s=>{const o=s.icon,a=t===s.id;return c.jsxs("button",{onClick:()=>e(s.id),className:`group inline-flex items-center py-3 px-1 border-b-2 font-medium text-sm transition-colors ${a?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[c.jsx(o,{className:`mr-2 h-5 w-5 ${a?"text-primary-500":"text-gray-400 group-hover:text-gray-500"}`}),c.jsxs("div",{className:"text-left",children:[c.jsx("span",{className:"block",children:s.name}),c.jsx("span",{className:`block text-xs font-normal ${a?"text-primary-400":"text-gray-400"}`,children:s.description})]})]},s.id)})})}),n&&c.jsx(n,{})]}),c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Export data"}),c.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Export all your contacts in a format compatible with other contact management systems."}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("button",{onClick:()=>r("vcard"),className:"w-full p-4 rounded-lg border border-gray-200 hover:bg-gray-50 text-left flex items-center gap-4",children:[c.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:c.jsx(lm,{className:"w-6 h-6 text-primary-600"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium",children:"Export as vCard (.vcf)"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Compatible with Apple Contacts, Outlook, Android, and most contact apps"})]}),c.jsx(fI,{className:"w-5 h-5 text-gray-400"})]}),c.jsxs("button",{onClick:()=>r("google-csv"),className:"w-full p-4 rounded-lg border border-gray-200 hover:bg-gray-50 text-left flex items-center gap-4",children:[c.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:c.jsx(EM,{className:"w-6 h-6 text-primary-600"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium",children:"Export as Google Contacts CSV"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Import directly into Google Contacts or other CSV-compatible systems"})]}),c.jsx(fI,{className:"w-5 h-5 text-gray-400"})]})]})]})]})}function lNe({handleTriggerReminders:t,triggeringReminders:e,reminderMessage:r,handleRescheduleCron:n,reschedulingCron:i,cronMessage:s}){return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"User management"}),c.jsx("div",{className:"space-y-3",children:c.jsxs(Le,{to:"/settings/user-approval",className:"block p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors",children:[c.jsx("p",{className:"font-medium",children:"User approval"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Approve or deny access for new users"})]})})]}),c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Configuration"}),c.jsx("div",{className:"space-y-3",children:c.jsxs(Le,{to:"/settings/relationship-types",className:"block p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors",children:[c.jsx("p",{className:"font-medium",children:"Relationship types"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Manage relationship types and their inverse mappings"})]})})]}),c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"System actions"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("button",{onClick:t,disabled:e,className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx("p",{className:"font-medium",children:"Trigger reminders"}),c.jsx("p",{className:"text-sm text-gray-500",children:e?"Sending...":"Manually send reminders for today"}),r&&c.jsx("p",{className:"text-sm text-green-600 mt-1",children:r})]}),c.jsxs("button",{onClick:n,disabled:i,className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx("p",{className:"font-medium",children:"Reschedule cron jobs"}),c.jsx("p",{className:"text-sm text-gray-500",children:i?"Rescheduling...":"Reschedule all user reminder cron jobs"}),s&&c.jsx("p",{className:"text-sm text-green-600 mt-1",children:s})]})]})]})]})}function cNe({config:t}){return c.jsxs("div",{className:"card p-6",children:[c.jsxs("h2",{className:"text-lg font-semibold mb-4",children:["About ",Oc]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{children:c.jsxs("p",{className:"text-sm text-gray-600",children:["Version ",t.version||"1.0.0"]})}),c.jsx("div",{className:"pt-4 border-t border-gray-200",children:c.jsxs("p",{className:"text-sm text-gray-600",children:[Oc," is a personal CRM system that helps you manage your contacts, track important dates, and maintain meaningful relationships."]})}),c.jsx("div",{className:"pt-4 border-t border-gray-200",children:c.jsx("p",{className:"text-sm text-gray-500",children:"Built with WordPress, React, and Tailwind CSS."})})]})]})}function XF({value:t,onChange:e,relationshipTypes:r,currentTypeId:n=null}){const[i,s]=k.useState(""),[o,a]=k.useState(!1),l=k.useRef(null),u=k.useRef(null),d=k.useMemo(()=>r.sort((v,y)=>{const b=(v.name||"").toLowerCase(),w=(y.name||"").toLowerCase();return b<w?-1:b>w?1:0}),[r]),h=k.useMemo(()=>{if(!i)return d.slice(0,10);const v=i.toLowerCase();return d.filter(y=>(y.name||"").toLowerCase().includes(v)).slice(0,10)},[d,i]),f=k.useMemo(()=>d.find(v=>v.id===parseInt(t,10)),[d,t]);k.useEffect(()=>{const v=y=>{u.current&&!u.current.contains(y.target)&&l.current&&!l.current.contains(y.target)&&a(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const p=v=>{e(v?v.toString():""),s(""),a(!1)},m=()=>{e(""),s(""),a(!1)},g=f?f.name:"";return c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"relative",children:f&&!o?c.jsxs("div",{className:"flex items-center justify-between input pr-8 cursor-text",onClick:()=>a(!0),children:[c.jsx("span",{children:g}),c.jsx("button",{type:"button",onClick:v=>{v.stopPropagation(),m()},className:"absolute right-2 text-gray-400 hover:text-gray-600",children:c.jsx(mt,{className:"w-4 h-4"})})]}):c.jsx("input",{ref:l,type:"text",value:i,onChange:v=>{s(v.target.value),a(!0)},onFocus:()=>a(!0),placeholder:"Search for a relationship type...",className:"input"})}),o&&(i||!f)&&c.jsx("div",{ref:u,className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:h.length>0?c.jsxs(c.Fragment,{children:[c.jsx("button",{type:"button",onClick:()=>p(null),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t?"":"bg-primary-50"}`,children:c.jsx("span",{className:"text-gray-500 italic",children:"None (no inverse)"})}),h.map(v=>c.jsx("button",{type:"button",onClick:()=>p(v.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t===v.id.toString()?"bg-primary-50":""}`,children:v.name},v.id))]}):c.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No relationship types found"})})]})}function uNe(){mh("Relationship Types - Settings");const t=rt();if(!((window.prmConfig||{}).isAdmin||!1))return c.jsx("div",{className:"max-w-2xl mx-auto",children:c.jsxs("div",{className:"card p-8 text-center",children:[c.jsx(ere,{className:"w-16 h-16 mx-auto text-amber-500 mb-4"}),c.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to manage relationship types. This feature is only available to administrators."}),c.jsx(Le,{to:"/settings",className:"btn-primary",children:"Back to Settings"})]})});const{data:n=[],isLoading:i}=st({queryKey:["relationship-types"],queryFn:async()=>(await He.getRelationshipTypes()).data}),[s,o]=k.useState(null),[a,l]=k.useState(""),[u,d]=k.useState(""),[h,f]=k.useState(""),[p,m]=k.useState(""),[g,v]=k.useState(!1),y=We({mutationFn:async({id:P,name:O,inverseId:C})=>{const D={name:O};return C&&(D.acf={inverse_relationship_type:parseInt(C,10)}),He.updateRelationshipType(P,D)},onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),o(null),l(""),d("")}}),b=We({mutationFn:async({name:P,inverseId:O})=>{const C={name:P};return O&&(C.acf={inverse_relationship_type:parseInt(O,10)}),He.createRelationshipType(C)},onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),f(""),m(""),v(!1)}}),w=We({mutationFn:P=>He.deleteRelationshipType(P),onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]})}}),x=We({mutationFn:()=>He.restoreRelationshipTypeDefaults(),onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),alert("Default relationship type configurations have been restored.")},onError:()=>{alert("Failed to restore defaults. Please try again.")}});function S(){return c.jsxs("button",{onClick:()=>{window.confirm("This will restore all default inverse mappings and gender-dependent settings. Continue?")&&x.mutate()},disabled:x.isPending,className:"btn-secondary flex items-center gap-2",title:"Restore default inverse mappings and gender-dependent settings",children:[x.isPending?c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600"}):c.jsx(Zte,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden md:inline",children:"Restore Defaults"})]})}const _=P=>{var C;o(P.id),l(P.name);const O=(C=P.acf)==null?void 0:C.inverse_relationship_type;d(O?O.toString():"")},E=()=>{o(null),l(""),d("")},N=()=>{if(!a.trim()){alert("Name is required");return}y.mutate({id:s,name:a.trim(),inverseId:u||null})},T=()=>{if(!h.trim()){alert("Name is required");return}b.mutate({name:h.trim(),inverseId:p||null})},j=(P,O)=>{window.confirm(`Are you sure you want to delete "${O}"? This cannot be undone.`)&&w.mutate(P)};return i?c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):c.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:c.jsxs("div",{className:"card p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h1",{className:"text-2xl font-bold",children:"Relationship Types"}),c.jsx("div",{className:"flex gap-2",children:!g&&c.jsxs(c.Fragment,{children:[c.jsx(S,{}),c.jsxs("button",{onClick:()=>v(!0),className:"btn-primary flex items-center gap-2",children:[c.jsx(or,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden md:inline",children:"Add Relationship Type"})]})]})})]}),g&&c.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[c.jsx("h3",{className:"font-semibold mb-4",children:"Add New Relationship Type"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Name *"}),c.jsx("input",{type:"text",value:h,onChange:P=>f(P.target.value),className:"input",placeholder:"e.g., Parent, Spouse, Colleague"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Inverse Relationship Type"}),c.jsx(XF,{value:p,onChange:m,relationshipTypes:n}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Select the inverse relationship type. For example, if this is "Parent", select "Child". If this is "Spouse" or "Acquaintance", select the same type (e.g., "Spouse"  "Spouse").'})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:T,disabled:b.isPending,className:"btn-primary flex items-center gap-2",children:[b.isPending?c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):c.jsx(i5,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden md:inline",children:"Save"})]}),c.jsx("button",{onClick:()=>{v(!1),f(""),m("")},className:"btn-secondary",children:"Cancel"})]})]})]}),c.jsx("div",{className:"space-y-2",children:n.length===0?c.jsx("p",{className:"text-gray-500 text-center py-8",children:"No relationship types found."}):n.map(P=>{var $,L;const O=s===P.id,C=($=P.acf)==null?void 0:$.inverse_relationship_type,D=typeof C=="object"&&(C!=null&&C.ID)?C.ID:typeof C=="object"&&(C!=null&&C.id)?C.id:C,F=D?n.find(M=>M.id===D):null;return c.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:O?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Name *"}),c.jsx("input",{type:"text",value:a,onChange:M=>l(M.target.value),className:"input"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Inverse Relationship Type"}),c.jsx(XF,{value:u,onChange:d,relationshipTypes:n,currentTypeId:P.id}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Select the inverse relationship type. For example, if this is "Parent", select "Child". If this is "Spouse" or "Acquaintance", select the same type (e.g., "Spouse"  "Spouse").'})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:N,disabled:y.isPending,className:"btn-primary flex items-center gap-2",children:[y.isPending?c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):c.jsx(i5,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden md:inline",children:"Save"})]}),c.jsxs("button",{onClick:E,className:"btn-secondary flex items-center gap-2",children:[c.jsx(mt,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden md:inline",children:"Cancel"})]})]})]}):c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-medium",children:P.name}),F&&c.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Inverse: ",c.jsx("span",{className:"font-medium",children:F.name})]}),!F&&((L=P.acf)==null?void 0:L.inverse_relationship_type)===null&&c.jsx("div",{className:"text-sm text-gray-400 mt-1 italic",children:"No inverse relationship"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>_(P),className:"p-2 text-gray-600 hover:text-primary-600 hover:bg-primary-50 rounded",title:"Edit",children:c.jsx(sme,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>j(P.id,P.name),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded",title:"Delete",children:c.jsx(pn,{className:"w-4 h-4"})})]})]})},P.id)})})]})})}function dNe(){mh("User Approval - Settings");const t=rt();if(!((window.prmConfig||{}).isAdmin||!1))return c.jsx("div",{className:"max-w-2xl mx-auto",children:c.jsxs("div",{className:"card p-8 text-center",children:[c.jsx(ere,{className:"w-16 h-16 mx-auto text-amber-500 mb-4"}),c.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to manage user approvals. This feature is only available to administrators."}),c.jsx(Le,{to:"/settings",className:"btn-primary",children:"Back to Settings"})]})});const{data:n=[],isLoading:i}=st({queryKey:["users"],queryFn:async()=>(await _e.getUsers()).data}),s=We({mutationFn:p=>_e.approveUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),o=We({mutationFn:p=>_e.denyUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),a=We({mutationFn:p=>_e.deleteUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),l=p=>{window.confirm("Are you sure you want to approve this user?")&&s.mutate(p)},u=p=>{window.confirm("Are you sure you want to deny this user? They will not be able to access the system.")&&o.mutate(p)},d=(p,m)=>{window.confirm(`Are you sure you want to delete ${m}? This will permanently delete their account and all their related data (people, organizations, dates). This action cannot be undone.`)&&a.mutate(p)};if(i)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx(Do,{className:"w-8 h-8 animate-spin text-primary-600"})});const h=n.filter(p=>!p.is_approved),f=n.filter(p=>p.is_approved);return c.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs(Le,{to:"/settings",className:"btn-secondary flex items-center gap-2",children:[c.jsx(ph,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden md:inline",children:"Back to Settings"})]}),c.jsx("h1",{className:"text-2xl font-semibold",children:"User Approval"})]}),c.jsxs("div",{className:"space-y-6",children:[h.length>0&&c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Pending Approval"}),c.jsx("div",{className:"space-y-3",children:h.map(p=>c.jsxs("div",{className:"card p-4 flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:p.name}),c.jsx("p",{className:"text-sm text-gray-500",children:p.email}),c.jsxs("p",{className:"text-xs text-gray-400",children:["Registered: ",new Date(p.registered).toLocaleDateString()]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>l(p.id),disabled:s.isPending||a.isPending,className:"btn-primary flex items-center gap-2",children:[c.jsx(r5,{className:"w-4 h-4"}),"Approve"]}),c.jsxs("button",{onClick:()=>u(p.id),disabled:o.isPending||a.isPending,className:"btn-secondary flex items-center gap-2",children:[c.jsx(pI,{className:"w-4 h-4"}),"Deny"]}),c.jsxs("button",{onClick:()=>d(p.id,p.name),disabled:s.isPending||o.isPending||a.isPending,className:"btn-danger flex items-center gap-2",children:[c.jsx(pn,{className:"w-4 h-4"}),"Delete"]})]})]},p.id))})]}),f.length>0&&c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Approved Users"}),c.jsx("div",{className:"space-y-3",children:f.map(p=>c.jsxs("div",{className:"card p-4 flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-medium flex items-center gap-2",children:[p.name,c.jsx(r5,{className:"w-4 h-4 text-green-600"})]}),c.jsx("p",{className:"text-sm text-gray-500",children:p.email})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>u(p.id),disabled:o.isPending||a.isPending,className:"btn-secondary flex items-center gap-2",children:[c.jsx(pI,{className:"w-4 h-4"}),"Revoke Access"]}),c.jsxs("button",{onClick:()=>d(p.id,p.name),disabled:o.isPending||a.isPending,className:"btn-danger flex items-center gap-2",children:[c.jsx(pn,{className:"w-4 h-4"}),"Delete"]})]})]},p.id))})]}),n.length===0&&c.jsx("div",{className:"card p-8 text-center",children:c.jsx("p",{className:"text-gray-600",children:"No Caelis users found."})})]})]})}/**
 * vis-data
 * http://visjs.org/
 *
 * Manage unstructured data using DataSet. Add, update, and remove data, and listen for changes in the data.
 *
 * @version 8.0.3
 * @date    2025-09-10T16:22:00.613Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var JF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ot(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var g1={exports:{}},ZF={},df,e3;function Er(){if(e3)return df;e3=1;var t=function(e){return e&&e.Math===Math&&e};return df=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof JF=="object"&&JF)||t(typeof df=="object"&&df)||function(){return this}()||Function("return this")(),df}var y1,t3;function St(){return t3||(t3=1,y1=function(t){try{return!!t()}catch{return!0}}),y1}var v1,r3;function gm(){if(r3)return v1;r3=1;var t=St();return v1=!t(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),v1}var b1,n3;function ob(){if(n3)return b1;n3=1;var t=gm(),e=Function.prototype,r=e.apply,n=e.call;return b1=typeof Reflect=="object"&&Reflect.apply||(t?n.bind(r):function(){return n.apply(r,arguments)}),b1}var x1,i3;function Ct(){if(i3)return x1;i3=1;var t=gm(),e=Function.prototype,r=e.call,n=t&&e.bind.bind(r,r);return x1=t?n:function(i){return function(){return r.apply(i,arguments)}},x1}var w1,s3;function Vo(){if(s3)return w1;s3=1;var t=Ct(),e=t({}.toString),r=t("".slice);return w1=function(n){return r(e(n),8,-1)},w1}var S1,o3;function Ese(){if(o3)return S1;o3=1;var t=Vo(),e=Ct();return S1=function(r){if(t(r)==="Function")return e(r)},S1}var _1,a3;function Vr(){if(a3)return _1;a3=1;var t=typeof document=="object"&&document.all;return _1=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"},_1}var E1={},N1,l3;function Nr(){if(l3)return N1;l3=1;var t=St();return N1=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),N1}var k1,c3;function si(){if(c3)return k1;c3=1;var t=gm(),e=Function.prototype.call;return k1=t?e.bind(e):function(){return e.apply(e,arguments)},k1}var C1={},u3;function CA(){if(u3)return C1;u3=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,r=e&&!t.call({1:2},1);return C1.f=r?function(i){var s=e(this,i);return!!s&&s.enumerable}:t,C1}var T1,d3;function ym(){return d3||(d3=1,T1=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}),T1}var j1,h3;function ab(){if(h3)return j1;h3=1;var t=Ct(),e=St(),r=Vo(),n=Object,i=t("".split);return j1=e(function(){return!n("z").propertyIsEnumerable(0)})?function(s){return r(s)==="String"?i(s,""):n(s)}:n,j1}var O1,f3;function vm(){return f3||(f3=1,O1=function(t){return t==null}),O1}var P1,p3;function Jc(){if(p3)return P1;p3=1;var t=vm(),e=TypeError;return P1=function(r){if(t(r))throw new e("Can't call method on "+r);return r},P1}var I1,m3;function Ws(){if(m3)return I1;m3=1;var t=ab(),e=Jc();return I1=function(r){return t(e(r))},I1}var R1,g3;function qn(){if(g3)return R1;g3=1;var t=Vr();return R1=function(e){return typeof e=="object"?e!==null:t(e)},R1}var M1,y3;function Mr(){return y3||(y3=1,M1={}),M1}var A1,v3;function Si(){if(v3)return A1;v3=1;var t=Mr(),e=Er(),r=Vr(),n=function(i){return r(i)?i:void 0};return A1=function(i,s){return arguments.length<2?n(t[i])||n(e[i]):t[i]&&t[i][s]||e[i]&&e[i][s]},A1}var D1,b3;function Wr(){if(b3)return D1;b3=1;var t=Ct();return D1=t({}.isPrototypeOf),D1}var $1,x3;function yh(){if(x3)return $1;x3=1;var t=Er(),e=t.navigator,r=e&&e.userAgent;return $1=r?String(r):"",$1}var F1,w3;function bm(){if(w3)return F1;w3=1;var t=Er(),e=yh(),r=t.process,n=t.Deno,i=r&&r.versions||n&&n.version,s=i&&i.v8,o,a;return s&&(o=s.split("."),a=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!a&&e&&(o=e.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=e.match(/Chrome\/(\d+)/),o&&(a=+o[1]))),F1=a,F1}var q1,S3;function vh(){if(S3)return q1;S3=1;var t=bm(),e=St(),r=Er(),n=r.String;return q1=!!Object.getOwnPropertySymbols&&!e(function(){var i=Symbol("symbol detection");return!n(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&t&&t<41}),q1}var L1,_3;function Nse(){if(_3)return L1;_3=1;var t=vh();return L1=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol",L1}var B1,E3;function xm(){if(E3)return B1;E3=1;var t=Si(),e=Vr(),r=Wr(),n=Nse(),i=Object;return B1=n?function(s){return typeof s=="symbol"}:function(s){var o=t("Symbol");return e(o)&&r(o.prototype,i(s))},B1}var z1,N3;function bh(){if(N3)return z1;N3=1;var t=String;return z1=function(e){try{return t(e)}catch{return"Object"}},z1}var V1,k3;function Wo(){if(k3)return V1;k3=1;var t=Vr(),e=bh(),r=TypeError;return V1=function(n){if(t(n))return n;throw new r(e(n)+" is not a function")},V1}var W1,C3;function TA(){if(C3)return W1;C3=1;var t=Wo(),e=vm();return W1=function(r,n){var i=r[n];return e(i)?void 0:t(i)},W1}var U1,T3;function hNe(){if(T3)return U1;T3=1;var t=si(),e=Vr(),r=qn(),n=TypeError;return U1=function(i,s){var o,a;if(s==="string"&&e(o=i.toString)&&!r(a=t(o,i))||e(o=i.valueOf)&&!r(a=t(o,i))||s!=="string"&&e(o=i.toString)&&!r(a=t(o,i)))return a;throw new n("Can't convert object to primitive value")},U1}var H1={exports:{}},K1,j3;function xh(){return j3||(j3=1,K1=!0),K1}var G1,O3;function fNe(){if(O3)return G1;O3=1;var t=Er(),e=Object.defineProperty;return G1=function(r,n){try{e(t,r,{value:n,configurable:!0,writable:!0})}catch{t[r]=n}return n},G1}var P3;function jA(){if(P3)return H1.exports;P3=1;var t=xh(),e=Er(),r=fNe(),n="__core-js_shared__",i=H1.exports=e[n]||r(n,{});return(i.versions||(i.versions=[])).push({version:"3.44.0",mode:t?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),H1.exports}var Y1,I3;function wh(){if(I3)return Y1;I3=1;var t=jA();return Y1=function(e,r){return t[e]||(t[e]=r||{})},Y1}var Q1,R3;function vs(){if(R3)return Q1;R3=1;var t=Jc(),e=Object;return Q1=function(r){return e(t(r))},Q1}var X1,M3;function Ur(){if(M3)return X1;M3=1;var t=Ct(),e=vs(),r=t({}.hasOwnProperty);return X1=Object.hasOwn||function(i,s){return r(e(i),s)},X1}var J1,A3;function lb(){if(A3)return J1;A3=1;var t=Ct(),e=0,r=Math.random(),n=t(1.1.toString);return J1=function(i){return"Symbol("+(i===void 0?"":i)+")_"+n(++e+r,36)},J1}var Z1,D3;function Hr(){if(D3)return Z1;D3=1;var t=Er(),e=wh(),r=Ur(),n=lb(),i=vh(),s=Nse(),o=t.Symbol,a=e("wks"),l=s?o.for||o:o&&o.withoutSetter||n;return Z1=function(u){return r(a,u)||(a[u]=i&&r(o,u)?o[u]:l("Symbol."+u)),a[u]},Z1}var ew,$3;function kse(){if($3)return ew;$3=1;var t=si(),e=qn(),r=xm(),n=TA(),i=hNe(),s=Hr(),o=TypeError,a=s("toPrimitive");return ew=function(l,u){if(!e(l)||r(l))return l;var d=n(l,a),h;if(d){if(u===void 0&&(u="default"),h=t(d,l,u),!e(h)||r(h))return h;throw new o("Can't convert object to primitive value")}return u===void 0&&(u="number"),i(l,u)},ew}var tw,F3;function OA(){if(F3)return tw;F3=1;var t=kse(),e=xm();return tw=function(r){var n=t(r,"string");return e(n)?n:n+""},tw}var rw,q3;function Cse(){if(q3)return rw;q3=1;var t=Er(),e=qn(),r=t.document,n=e(r)&&e(r.createElement);return rw=function(i){return n?r.createElement(i):{}},rw}var nw,L3;function Tse(){if(L3)return nw;L3=1;var t=Nr(),e=St(),r=Cse();return nw=!t&&!e(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7}),nw}var B3;function cb(){if(B3)return E1;B3=1;var t=Nr(),e=si(),r=CA(),n=ym(),i=Ws(),s=OA(),o=Ur(),a=Tse(),l=Object.getOwnPropertyDescriptor;return E1.f=t?l:function(d,h){if(d=i(d),h=s(h),a)try{return l(d,h)}catch{}if(o(d,h))return n(!e(r.f,d,h),d[h])},E1}var iw,z3;function pNe(){if(z3)return iw;z3=1;var t=St(),e=Vr(),r=/#|\.prototype\./,n=function(l,u){var d=s[i(l)];return d===a?!0:d===o?!1:e(u)?t(u):!!u},i=n.normalize=function(l){return String(l).replace(r,".").toLowerCase()},s=n.data={},o=n.NATIVE="N",a=n.POLYFILL="P";return iw=n,iw}var sw,V3;function ub(){if(V3)return sw;V3=1;var t=Ese(),e=Wo(),r=gm(),n=t(t.bind);return sw=function(i,s){return e(i),s===void 0?i:r?n(i,s):function(){return i.apply(s,arguments)}},sw}var ow={},aw,W3;function jse(){if(W3)return aw;W3=1;var t=Nr(),e=St();return aw=t&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),aw}var lw,U3;function Uo(){if(U3)return lw;U3=1;var t=qn(),e=String,r=TypeError;return lw=function(n){if(t(n))return n;throw new r(e(n)+" is not an object")},lw}var H3;function Gi(){if(H3)return ow;H3=1;var t=Nr(),e=Tse(),r=jse(),n=Uo(),i=OA(),s=TypeError,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l="enumerable",u="configurable",d="writable";return ow.f=t?r?function(f,p,m){if(n(f),p=i(p),n(m),typeof f=="function"&&p==="prototype"&&"value"in m&&d in m&&!m[d]){var g=a(f,p);g&&g[d]&&(f[p]=m.value,m={configurable:u in m?m[u]:g[u],enumerable:l in m?m[l]:g[l],writable:!1})}return o(f,p,m)}:o:function(f,p,m){if(n(f),p=i(p),n(m),e)try{return o(f,p,m)}catch{}if("get"in m||"set"in m)throw new s("Accessors not supported");return"value"in m&&(f[p]=m.value),f},ow}var cw,K3;function Sh(){if(K3)return cw;K3=1;var t=Nr(),e=Gi(),r=ym();return cw=t?function(n,i,s){return e.f(n,i,r(1,s))}:function(n,i,s){return n[i]=s,n},cw}var uw,G3;function Ke(){if(G3)return uw;G3=1;var t=Er(),e=ob(),r=Ese(),n=Vr(),i=cb().f,s=pNe(),o=Mr(),a=ub(),l=Sh(),u=Ur(),d=function(h){var f=function(p,m,g){if(this instanceof f){switch(arguments.length){case 0:return new h;case 1:return new h(p);case 2:return new h(p,m)}return new h(p,m,g)}return e(h,this,arguments)};return f.prototype=h.prototype,f};return uw=function(h,f){var p=h.target,m=h.global,g=h.stat,v=h.proto,y=m?t:g?t[p]:t[p]&&t[p].prototype,b=m?o:o[p]||l(o,p,{})[p],w=b.prototype,x,S,_,E,N,T,j,P,O;for(E in f)x=s(m?E:p+(g?".":"#")+E,h.forced),S=!x&&y&&u(y,E),T=b[E],S&&(h.dontCallGetSet?(O=i(y,E),j=O&&O.value):j=y[E]),N=S&&j?j:f[E],!(!x&&!v&&typeof T==typeof N)&&(h.bind&&S?P=a(N,t):h.wrap&&S?P=d(N):v&&n(N)?P=r(N):P=N,(h.sham||N&&N.sham||T&&T.sham)&&l(P,"sham",!0),l(b,E,P),v&&(_=p+"Prototype",u(o,_)||l(o,_,{}),l(o[_],E,N),h.real&&w&&(x||!w[E])&&l(w,E,N)))},uw}var Y3;function mNe(){if(Y3)return ZF;Y3=1;var t=Ke(),e=Nr(),r=Gi().f;return t({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!e},{defineProperty:r}),ZF}var Q3;function gNe(){if(Q3)return g1.exports;Q3=1,mNe();var t=Mr(),e=t.Object,r=g1.exports=function(i,s,o){return e.defineProperty(i,s,o)};return e.defineProperty.sham&&(r.sham=!0),g1.exports}var dw,X3;function Ose(){if(X3)return dw;X3=1;var t=gNe();return dw=t,dw}var hw,J3;function yNe(){if(J3)return hw;J3=1;var t=Ose();return hw=t,hw}var fw,Z3;function vNe(){if(Z3)return fw;Z3=1;var t=yNe();return fw=t,fw}var pw,eq;function bNe(){return eq||(eq=1,pw=vNe()),pw}var xNe=bNe(),wNe=ot(xNe),tq={},mw,rq;function Zc(){if(rq)return mw;rq=1;var t=Vo();return mw=Array.isArray||function(r){return t(r)==="Array"},mw}var gw,nq;function SNe(){if(nq)return gw;nq=1;var t=Math.ceil,e=Math.floor;return gw=Math.trunc||function(n){var i=+n;return(i>0?e:t)(i)},gw}var yw,iq;function _h(){if(iq)return yw;iq=1;var t=SNe();return yw=function(e){var r=+e;return r!==r||r===0?0:t(r)},yw}var vw,sq;function Pse(){if(sq)return vw;sq=1;var t=_h(),e=Math.min;return vw=function(r){var n=t(r);return n>0?e(n,9007199254740991):0},vw}var bw,oq;function gl(){if(oq)return bw;oq=1;var t=Pse();return bw=function(e){return t(e.length)},bw}var xw,aq;function Ise(){if(aq)return xw;aq=1;var t=TypeError,e=9007199254740991;return xw=function(r){if(r>e)throw t("Maximum allowed index exceeded");return r},xw}var ww,lq;function db(){if(lq)return ww;lq=1;var t=Nr(),e=Gi(),r=ym();return ww=function(n,i,s){t?e.f(n,i,r(0,s)):n[i]=s},ww}var Sw,cq;function PA(){if(cq)return Sw;cq=1;var t=Hr(),e=t("toStringTag"),r={};return r[e]="z",Sw=String(r)==="[object z]",Sw}var _w,uq;function yl(){if(uq)return _w;uq=1;var t=PA(),e=Vr(),r=Vo(),n=Hr(),i=n("toStringTag"),s=Object,o=r(function(){return arguments}())==="Arguments",a=function(l,u){try{return l[u]}catch{}};return _w=t?r:function(l){var u,d,h;return l===void 0?"Undefined":l===null?"Null":typeof(d=a(u=s(l),i))=="string"?d:o?r(u):(h=r(u))==="Object"&&e(u.callee)?"Arguments":h},_w}var Ew,dq;function _Ne(){if(dq)return Ew;dq=1;var t=Ct(),e=Vr(),r=jA(),n=t(Function.toString);return e(r.inspectSource)||(r.inspectSource=function(i){return n(i)}),Ew=r.inspectSource,Ew}var Nw,hq;function Rse(){if(hq)return Nw;hq=1;var t=Ct(),e=St(),r=Vr(),n=yl(),i=Si(),s=_Ne(),o=function(){},a=i("Reflect","construct"),l=/^\s*(?:class|function)\b/,u=t(l.exec),d=!l.test(o),h=function(m){if(!r(m))return!1;try{return a(o,[],m),!0}catch{return!1}},f=function(m){if(!r(m))return!1;switch(n(m)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!u(l,s(m))}catch{return!0}};return f.sham=!0,Nw=!a||e(function(){var p;return h(h.call)||!h(Object)||!h(function(){p=!0})||p})?f:h,Nw}var kw,fq;function ENe(){if(fq)return kw;fq=1;var t=Zc(),e=Rse(),r=qn(),n=Hr(),i=n("species"),s=Array;return kw=function(o){var a;return t(o)&&(a=o.constructor,e(a)&&(a===s||t(a.prototype))?a=void 0:r(a)&&(a=a[i],a===null&&(a=void 0))),a===void 0?s:a},kw}var Cw,pq;function IA(){if(pq)return Cw;pq=1;var t=ENe();return Cw=function(e,r){return new(t(e))(r===0?0:r)},Cw}var Tw,mq;function wm(){if(mq)return Tw;mq=1;var t=St(),e=Hr(),r=bm(),n=e("species");return Tw=function(i){return r>=51||!t(function(){var s=[],o=s.constructor={};return o[n]=function(){return{foo:1}},s[i](Boolean).foo!==1})},Tw}var gq;function Mse(){if(gq)return tq;gq=1;var t=Ke(),e=St(),r=Zc(),n=qn(),i=vs(),s=gl(),o=Ise(),a=db(),l=IA(),u=wm(),d=Hr(),h=bm(),f=d("isConcatSpreadable"),p=h>=51||!e(function(){var v=[];return v[f]=!1,v.concat()[0]!==v}),m=function(v){if(!n(v))return!1;var y=v[f];return y!==void 0?!!y:r(v)},g=!p||!u("concat");return t({target:"Array",proto:!0,arity:1,forced:g},{concat:function(y){var b=i(this),w=l(b,0),x=0,S,_,E,N,T;for(S=-1,E=arguments.length;S<E;S++)if(T=S===-1?b:arguments[S],m(T))for(N=s(T),o(x+N),_=0;_<N;_++,x++)_ in T&&a(w,x,T[_]);else o(x+1),a(w,x++,T);return w.length=x,w}}),tq}var yq={},vq={},jw,bq;function vl(){if(bq)return jw;bq=1;var t=yl(),e=String;return jw=function(r){if(t(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(r)},jw}var Ow={},Pw,xq;function RA(){if(xq)return Pw;xq=1;var t=_h(),e=Math.max,r=Math.min;return Pw=function(n,i){var s=t(n);return s<0?e(s+i,0):r(s,i)},Pw}var Iw,wq;function NNe(){if(wq)return Iw;wq=1;var t=Ws(),e=RA(),r=gl(),n=function(i){return function(s,o,a){var l=t(s),u=r(l);if(u===0)return!i&&-1;var d=e(a,u),h;if(i&&o!==o){for(;u>d;)if(h=l[d++],h!==h)return!0}else for(;u>d;d++)if((i||d in l)&&l[d]===o)return i||d||0;return!i&&-1}};return Iw={includes:n(!0),indexOf:n(!1)},Iw}var Rw,Sq;function Sm(){return Sq||(Sq=1,Rw={}),Rw}var Mw,_q;function Ase(){if(_q)return Mw;_q=1;var t=Ct(),e=Ur(),r=Ws(),n=NNe().indexOf,i=Sm(),s=t([].push);return Mw=function(o,a){var l=r(o),u=0,d=[],h;for(h in l)!e(i,h)&&e(l,h)&&s(d,h);for(;a.length>u;)e(l,h=a[u++])&&(~n(d,h)||s(d,h));return d},Mw}var Aw,Eq;function MA(){return Eq||(Eq=1,Aw=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),Aw}var Dw,Nq;function hb(){if(Nq)return Dw;Nq=1;var t=Ase(),e=MA();return Dw=Object.keys||function(n){return t(n,e)},Dw}var kq;function AA(){if(kq)return Ow;kq=1;var t=Nr(),e=jse(),r=Gi(),n=Uo(),i=Ws(),s=hb();return Ow.f=t&&!e?Object.defineProperties:function(a,l){n(a);for(var u=i(l),d=s(l),h=d.length,f=0,p;h>f;)r.f(a,p=d[f++],u[p]);return a},Ow}var $w,Cq;function kNe(){if(Cq)return $w;Cq=1;var t=Si();return $w=t("document","documentElement"),$w}var Fw,Tq;function fb(){if(Tq)return Fw;Tq=1;var t=wh(),e=lb(),r=t("keys");return Fw=function(n){return r[n]||(r[n]=e(n))},Fw}var qw,jq;function _m(){if(jq)return qw;jq=1;var t=Uo(),e=AA(),r=MA(),n=Sm(),i=kNe(),s=Cse(),o=fb(),a=">",l="<",u="prototype",d="script",h=o("IE_PROTO"),f=function(){},p=function(b){return l+d+a+b+l+"/"+d+a},m=function(b){b.write(p("")),b.close();var w=b.parentWindow.Object;return b=null,w},g=function(){var b=s("iframe"),w="java"+d+":",x;return b.style.display="none",i.appendChild(b),b.src=String(w),x=b.contentWindow.document,x.open(),x.write(p("document.F=Object")),x.close(),x.F},v,y=function(){try{v=new ActiveXObject("htmlfile")}catch{}y=typeof document<"u"?document.domain&&v?m(v):g():m(v);for(var b=r.length;b--;)delete y[u][r[b]];return y()};return n[h]=!0,qw=Object.create||function(w,x){var S;return w!==null?(f[u]=t(w),S=new f,f[u]=null,S[h]=w):S=y(),x===void 0?S:e.f(S,x)},qw}var Lw={},Oq;function pb(){if(Oq)return Lw;Oq=1;var t=Ase(),e=MA(),r=e.concat("length","prototype");return Lw.f=Object.getOwnPropertyNames||function(i){return t(i,r)},Lw}var Bw={},zw,Pq;function Eh(){if(Pq)return zw;Pq=1;var t=Ct();return zw=t([].slice),zw}var Iq;function Dse(){if(Iq)return Bw;Iq=1;var t=Vo(),e=Ws(),r=pb().f,n=Eh(),i=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(o){try{return r(o)}catch{return n(i)}};return Bw.f=function(a){return i&&t(a)==="Window"?s(a):r(e(a))},Bw}var Vw={},Rq;function mb(){return Rq||(Rq=1,Vw.f=Object.getOwnPropertySymbols),Vw}var Ww,Mq;function Em(){if(Mq)return Ww;Mq=1;var t=Sh();return Ww=function(e,r,n,i){return i&&i.enumerable?e[r]=n:t(e,r,n),e},Ww}var Uw,Aq;function DA(){if(Aq)return Uw;Aq=1;var t=Gi();return Uw=function(e,r,n){return t.f(e,r,n)},Uw}var Hw={},Dq;function gb(){if(Dq)return Hw;Dq=1;var t=Hr();return Hw.f=t,Hw}var Kw,$q;function Qt(){if($q)return Kw;$q=1;var t=Mr(),e=Ur(),r=gb(),n=Gi().f;return Kw=function(i){var s=t.Symbol||(t.Symbol={});e(s,i)||n(s,i,{value:r.f(i)})},Kw}var Gw,Fq;function $se(){if(Fq)return Gw;Fq=1;var t=si(),e=Si(),r=Hr(),n=Em();return Gw=function(){var i=e("Symbol"),s=i&&i.prototype,o=s&&s.valueOf,a=r("toPrimitive");s&&!s[a]&&n(s,a,function(l){return t(o,this)},{arity:1})},Gw}var Yw,qq;function CNe(){if(qq)return Yw;qq=1;var t=PA(),e=yl();return Yw=t?{}.toString:function(){return"[object "+e(this)+"]"},Yw}var Qw,Lq;function eu(){if(Lq)return Qw;Lq=1;var t=PA(),e=Gi().f,r=Sh(),n=Ur(),i=CNe(),s=Hr(),o=s("toStringTag");return Qw=function(a,l,u,d){var h=u?a:a&&a.prototype;h&&(n(h,o)||e(h,o,{configurable:!0,value:l}),d&&!t&&r(h,"toString",i))},Qw}var Xw,Bq;function TNe(){if(Bq)return Xw;Bq=1;var t=Er(),e=Vr(),r=t.WeakMap;return Xw=e(r)&&/native code/.test(String(r)),Xw}var Jw,zq;function Nm(){if(zq)return Jw;zq=1;var t=TNe(),e=Er(),r=qn(),n=Sh(),i=Ur(),s=jA(),o=fb(),a=Sm(),l="Object already initialized",u=e.TypeError,d=e.WeakMap,h,f,p,m=function(b){return p(b)?f(b):h(b,{})},g=function(b){return function(w){var x;if(!r(w)||(x=f(w)).type!==b)throw new u("Incompatible receiver, "+b+" required");return x}};if(t||s.state){var v=s.state||(s.state=new d);v.get=v.get,v.has=v.has,v.set=v.set,h=function(b,w){if(v.has(b))throw new u(l);return w.facade=b,v.set(b,w),w},f=function(b){return v.get(b)||{}},p=function(b){return v.has(b)}}else{var y=o("state");a[y]=!0,h=function(b,w){if(i(b,y))throw new u(l);return w.facade=b,n(b,y,w),w},f=function(b){return i(b,y)?b[y]:{}},p=function(b){return i(b,y)}}return Jw={set:h,get:f,has:p,enforce:m,getterFor:g},Jw}var Zw,Vq;function Nh(){if(Vq)return Zw;Vq=1;var t=ub(),e=Ct(),r=ab(),n=vs(),i=gl(),s=IA(),o=e([].push),a=function(l){var u=l===1,d=l===2,h=l===3,f=l===4,p=l===6,m=l===7,g=l===5||p;return function(v,y,b,w){for(var x=n(v),S=r(x),_=i(S),E=t(y,b),N=0,T=w||s,j=u?T(v,_):d||m?T(v,0):void 0,P,O;_>N;N++)if((g||N in S)&&(P=S[N],O=E(P,N,x),l))if(u)j[N]=O;else if(O)switch(l){case 3:return!0;case 5:return P;case 6:return N;case 2:o(j,P)}else switch(l){case 4:return!1;case 7:o(j,P)}return p?-1:h||f?f:j}};return Zw={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterReject:a(7)},Zw}var Wq;function jNe(){if(Wq)return vq;Wq=1;var t=Ke(),e=Er(),r=si(),n=Ct(),i=xh(),s=Nr(),o=vh(),a=St(),l=Ur(),u=Wr(),d=Uo(),h=Ws(),f=OA(),p=vl(),m=ym(),g=_m(),v=hb(),y=pb(),b=Dse(),w=mb(),x=cb(),S=Gi(),_=AA(),E=CA(),N=Em(),T=DA(),j=wh(),P=fb(),O=Sm(),C=lb(),D=Hr(),F=gb(),$=Qt(),L=$se(),M=eu(),W=Nm(),Y=Nh().forEach,Q=P("hidden"),pe="Symbol",K="prototype",oe=W.set,Te=W.getterFor(pe),me=Object[K],Be=e.Symbol,Oe=Be&&Be[K],gt=e.RangeError,U=e.TypeError,ce=e.QObject,Me=x.f,Fe=S.f,Tt=b.f,Yr=E.f,Tr=n([].push),dt=j("symbols"),lr=j("op-symbols"),Ni=j("wks"),Jt=!ce||!ce[K]||!ce[K].findChild,A=function(Ee,ne,ge){var he=Me(me,ne);he&&delete me[ne],Fe(Ee,ne,ge),he&&Ee!==me&&Fe(me,ne,he)},q=s&&a(function(){return g(Fe({},"a",{get:function(){return Fe(this,"a",{value:7}).a}})).a!==7})?A:Fe,z=function(Ee,ne){var ge=dt[Ee]=g(Oe);return oe(ge,{type:pe,tag:Ee,description:ne}),s||(ge.description=ne),ge},ae=function(ne,ge,he){ne===me&&ae(lr,ge,he),d(ne);var ke=f(ge);return d(he),l(dt,ke)?(he.enumerable?(l(ne,Q)&&ne[Q][ke]&&(ne[Q][ke]=!1),he=g(he,{enumerable:m(0,!1)})):(l(ne,Q)||Fe(ne,Q,m(1,g(null))),ne[Q][ke]=!0),q(ne,ke,he)):Fe(ne,ke,he)},ee=function(ne,ge){d(ne);var he=h(ge),ke=v(he).concat(qt(he));return Y(ke,function(Ze){(!s||r(ye,he,Ze))&&ae(ne,Ze,he[Ze])}),ne},J=function(ne,ge){return ge===void 0?g(ne):ee(g(ne),ge)},ye=function(ne){var ge=f(ne),he=r(Yr,this,ge);return this===me&&l(dt,ge)&&!l(lr,ge)?!1:he||!l(this,ge)||!l(dt,ge)||l(this,Q)&&this[Q][ge]?he:!0},Ue=function(ne,ge){var he=h(ne),ke=f(ge);if(!(he===me&&l(dt,ke)&&!l(lr,ke))){var Ze=Me(he,ke);return Ze&&l(dt,ke)&&!(l(he,Q)&&he[Q][ke])&&(Ze.enumerable=!0),Ze}},Ye=function(ne){var ge=Tt(h(ne)),he=[];return Y(ge,function(ke){!l(dt,ke)&&!l(O,ke)&&Tr(he,ke)}),he},qt=function(Ee){var ne=Ee===me,ge=Tt(ne?lr:h(Ee)),he=[];return Y(ge,function(ke){l(dt,ke)&&(!ne||l(me,ke))&&Tr(he,dt[ke])}),he};return o||(Be=function(){if(u(Oe,this))throw new U("Symbol is not a constructor");var ne=!arguments.length||arguments[0]===void 0?void 0:p(arguments[0]),ge=C(ne),he=function(ke){var Ze=this===void 0?e:this;Ze===me&&r(he,lr,ke),l(Ze,Q)&&l(Ze[Q],ge)&&(Ze[Q][ge]=!1);var ki=m(1,ke);try{q(Ze,ge,ki)}catch(bn){if(!(bn instanceof gt))throw bn;A(Ze,ge,ki)}};return s&&Jt&&q(me,ge,{configurable:!0,set:he}),z(ge,ne)},Oe=Be[K],N(Oe,"toString",function(){return Te(this).tag}),N(Be,"withoutSetter",function(Ee){return z(C(Ee),Ee)}),E.f=ye,S.f=ae,_.f=ee,x.f=Ue,y.f=b.f=Ye,w.f=qt,F.f=function(Ee){return z(D(Ee),Ee)},s&&(T(Oe,"description",{configurable:!0,get:function(){return Te(this).description}}),i||N(me,"propertyIsEnumerable",ye,{unsafe:!0}))),t({global:!0,constructor:!0,wrap:!0,forced:!o,sham:!o},{Symbol:Be}),Y(v(Ni),function(Ee){$(Ee)}),t({target:pe,stat:!0,forced:!o},{useSetter:function(){Jt=!0},useSimple:function(){Jt=!1}}),t({target:"Object",stat:!0,forced:!o,sham:!s},{create:J,defineProperty:ae,defineProperties:ee,getOwnPropertyDescriptor:Ue}),t({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:Ye}),L(),M(Be,pe),O[Q]=!0,vq}var Uq={},eS,Hq;function Fse(){if(Hq)return eS;Hq=1;var t=vh();return eS=t&&!!Symbol.for&&!!Symbol.keyFor,eS}var Kq;function ONe(){if(Kq)return Uq;Kq=1;var t=Ke(),e=Si(),r=Ur(),n=vl(),i=wh(),s=Fse(),o=i("string-to-symbol-registry"),a=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{for:function(l){var u=n(l);if(r(o,u))return o[u];var d=e("Symbol")(u);return o[u]=d,a[d]=u,d}}),Uq}var Gq={},Yq;function PNe(){if(Yq)return Gq;Yq=1;var t=Ke(),e=Ur(),r=xm(),n=bh(),i=wh(),s=Fse(),o=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{keyFor:function(l){if(!r(l))throw new TypeError(n(l)+" is not a symbol");if(e(o,l))return o[l]}}),Gq}var Qq={},tS,Xq;function INe(){if(Xq)return tS;Xq=1;var t=Ct(),e=Zc(),r=Vr(),n=Vo(),i=vl(),s=t([].push);return tS=function(o){if(r(o))return o;if(e(o)){for(var a=o.length,l=[],u=0;u<a;u++){var d=o[u];typeof d=="string"?s(l,d):(typeof d=="number"||n(d)==="Number"||n(d)==="String")&&s(l,i(d))}var h=l.length,f=!0;return function(p,m){if(f)return f=!1,m;if(e(this))return m;for(var g=0;g<h;g++)if(l[g]===p)return m}}},tS}var Jq;function qse(){if(Jq)return Qq;Jq=1;var t=Ke(),e=Si(),r=ob(),n=si(),i=Ct(),s=St(),o=Vr(),a=xm(),l=Eh(),u=INe(),d=vh(),h=String,f=e("JSON","stringify"),p=i(/./.exec),m=i("".charAt),g=i("".charCodeAt),v=i("".replace),y=i(1.1.toString),b=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,x=/^[\uDC00-\uDFFF]$/,S=!d||s(function(){var T=e("Symbol")("stringify detection");return f([T])!=="[null]"||f({a:T})!=="{}"||f(Object(T))!=="{}"}),_=s(function(){return f("\uDF06\uD834")!=='"\\udf06\\ud834"'||f("\uDEAD")!=='"\\udead"'}),E=function(T,j){var P=l(arguments),O=u(j);if(!(!o(O)&&(T===void 0||a(T))))return P[1]=function(C,D){if(o(O)&&(D=n(O,this,h(C),D)),!a(D))return D},r(f,null,P)},N=function(T,j,P){var O=m(P,j-1),C=m(P,j+1);return p(w,T)&&!p(x,C)||p(x,T)&&!p(w,O)?"\\u"+y(g(T,0),16):T};return f&&t({target:"JSON",stat:!0,arity:3,forced:S||_},{stringify:function(j,P,O){var C=l(arguments),D=r(S?E:f,null,C);return _&&typeof D=="string"?v(D,b,N):D}}),Qq}var Zq={},eL;function RNe(){if(eL)return Zq;eL=1;var t=Ke(),e=vh(),r=St(),n=mb(),i=vs(),s=!e||r(function(){n.f(1)});return t({target:"Object",stat:!0,forced:s},{getOwnPropertySymbols:function(a){var l=n.f;return l?l(i(a)):[]}}),Zq}var tL;function Lse(){return tL||(tL=1,jNe(),ONe(),PNe(),qse(),RNe()),yq}var rL={},nL;function Bse(){if(nL)return rL;nL=1;var t=Qt();return t("asyncDispose"),rL}var iL={},sL;function MNe(){if(sL)return iL;sL=1;var t=Qt();return t("asyncIterator"),iL}var oL={},aL;function zse(){if(aL)return oL;aL=1;var t=Qt();return t("dispose"),oL}var lL={},cL;function ANe(){if(cL)return lL;cL=1;var t=Qt();return t("hasInstance"),lL}var uL={},dL;function DNe(){if(dL)return uL;dL=1;var t=Qt();return t("isConcatSpreadable"),uL}var hL={},fL;function Vse(){if(fL)return hL;fL=1;var t=Qt();return t("iterator"),hL}var pL={},mL;function $Ne(){if(mL)return pL;mL=1;var t=Qt();return t("match"),pL}var gL={},yL;function FNe(){if(yL)return gL;yL=1;var t=Qt();return t("matchAll"),gL}var vL={},bL;function qNe(){if(bL)return vL;bL=1;var t=Qt();return t("replace"),vL}var xL={},wL;function LNe(){if(wL)return xL;wL=1;var t=Qt();return t("search"),xL}var SL={},_L;function BNe(){if(_L)return SL;_L=1;var t=Qt();return t("species"),SL}var EL={},NL;function zNe(){if(NL)return EL;NL=1;var t=Qt();return t("split"),EL}var kL={},CL;function Wse(){if(CL)return kL;CL=1;var t=Qt(),e=$se();return t("toPrimitive"),e(),kL}var TL={},jL;function VNe(){if(jL)return TL;jL=1;var t=Si(),e=Qt(),r=eu();return e("toStringTag"),r(t("Symbol"),"Symbol"),TL}var OL={},PL;function WNe(){if(PL)return OL;PL=1;var t=Qt();return t("unscopables"),OL}var IL={},RL;function UNe(){if(RL)return IL;RL=1;var t=Er(),e=eu();return e(t.JSON,"JSON",!0),IL}var rS,ML;function HNe(){if(ML)return rS;ML=1,Mse(),Lse(),Bse(),MNe(),zse(),ANe(),DNe(),Vse(),$Ne(),FNe(),qNe(),LNe(),BNe(),zNe(),Wse(),VNe(),WNe(),UNe();var t=Mr();return rS=t.Symbol,rS}var AL={},nS,DL;function KNe(){return DL||(DL=1,nS=function(){}),nS}var iS,$L;function kh(){return $L||($L=1,iS={}),iS}var sS,FL;function GNe(){if(FL)return sS;FL=1;var t=Nr(),e=Ur(),r=Function.prototype,n=t&&Object.getOwnPropertyDescriptor,i=e(r,"name"),s=i&&(function(){}).name==="something",o=i&&(!t||t&&n(r,"name").configurable);return sS={EXISTS:i,PROPER:s,CONFIGURABLE:o},sS}var oS,qL;function YNe(){if(qL)return oS;qL=1;var t=St();return oS=!t(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),oS}var aS,LL;function Use(){if(LL)return aS;LL=1;var t=Ur(),e=Vr(),r=vs(),n=fb(),i=YNe(),s=n("IE_PROTO"),o=Object,a=o.prototype;return aS=i?o.getPrototypeOf:function(l){var u=r(l);if(t(u,s))return u[s];var d=u.constructor;return e(d)&&u instanceof d?d.prototype:u instanceof o?a:null},aS}var lS,BL;function Hse(){if(BL)return lS;BL=1;var t=St(),e=Vr(),r=qn(),n=_m(),i=Use(),s=Em(),o=Hr(),a=xh(),l=o("iterator"),u=!1,d,h,f;[].keys&&(f=[].keys(),"next"in f?(h=i(i(f)),h!==Object.prototype&&(d=h)):u=!0);var p=!r(d)||t(function(){var m={};return d[l].call(m)!==m});return p?d={}:a&&(d=n(d)),e(d[l])||s(d,l,function(){return this}),lS={IteratorPrototype:d,BUGGY_SAFARI_ITERATORS:u},lS}var cS,zL;function QNe(){if(zL)return cS;zL=1;var t=Hse().IteratorPrototype,e=_m(),r=ym(),n=eu(),i=kh(),s=function(){return this};return cS=function(o,a,l,u){var d=a+" Iterator";return o.prototype=e(t,{next:r(+!u,l)}),n(o,d,!1,!0),i[d]=s,o},cS}var uS,VL;function XNe(){if(VL)return uS;VL=1;var t=Ct(),e=Wo();return uS=function(r,n,i){try{return t(e(Object.getOwnPropertyDescriptor(r,n)[i]))}catch{}},uS}var dS,WL;function JNe(){if(WL)return dS;WL=1;var t=qn();return dS=function(e){return t(e)||e===null},dS}var hS,UL;function ZNe(){if(UL)return hS;UL=1;var t=JNe(),e=String,r=TypeError;return hS=function(n){if(t(n))return n;throw new r("Can't set "+e(n)+" as a prototype")},hS}var fS,HL;function eke(){if(HL)return fS;HL=1;var t=XNe(),e=qn(),r=Jc(),n=ZNe();return fS=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,s={},o;try{o=t(Object.prototype,"__proto__","set"),o(s,[]),i=s instanceof Array}catch{}return function(l,u){return r(l),n(u),e(l)&&(i?o(l,u):l.__proto__=u),l}}():void 0),fS}var pS,KL;function $A(){if(KL)return pS;KL=1;var t=Ke(),e=si(),r=xh(),n=GNe(),i=Vr(),s=QNe(),o=Use(),a=eke(),l=eu(),u=Sh(),d=Em(),h=Hr(),f=kh(),p=Hse(),m=n.PROPER,g=n.CONFIGURABLE,v=p.IteratorPrototype,y=p.BUGGY_SAFARI_ITERATORS,b=h("iterator"),w="keys",x="values",S="entries",_=function(){return this};return pS=function(E,N,T,j,P,O,C){s(T,N,j);var D=function(oe){if(oe===P&&W)return W;if(!y&&oe&&oe in L)return L[oe];switch(oe){case w:return function(){return new T(this,oe)};case x:return function(){return new T(this,oe)};case S:return function(){return new T(this,oe)}}return function(){return new T(this)}},F=N+" Iterator",$=!1,L=E.prototype,M=L[b]||L["@@iterator"]||P&&L[P],W=!y&&M||D(P),Y=N==="Array"&&L.entries||M,Q,pe,K;if(Y&&(Q=o(Y.call(new E)),Q!==Object.prototype&&Q.next&&(!r&&o(Q)!==v&&(a?a(Q,v):i(Q[b])||d(Q,b,_)),l(Q,F,!0,!0),r&&(f[F]=_))),m&&P===x&&M&&M.name!==x&&(!r&&g?u(L,"name",x):($=!0,W=function(){return e(M,this)})),P)if(pe={values:D(x),keys:O?W:D(w),entries:D(S)},C)for(K in pe)(y||$||!(K in L))&&d(L,K,pe[K]);else t({target:N,proto:!0,forced:y||$},pe);return(!r||C)&&L[b]!==W&&d(L,b,W,{name:P}),f[N]=W,pe},pS}var mS,GL;function FA(){return GL||(GL=1,mS=function(t,e){return{value:t,done:e}}),mS}var gS,YL;function bl(){if(YL)return gS;YL=1;var t=Ws(),e=KNe(),r=kh(),n=Nm(),i=Gi().f,s=$A(),o=FA(),a=xh(),l=Nr(),u="Array Iterator",d=n.set,h=n.getterFor(u);gS=s(Array,"Array",function(p,m){d(this,{type:u,target:t(p),index:0,kind:m})},function(){var p=h(this),m=p.target,g=p.index++;if(!m||g>=m.length)return p.target=null,o(void 0,!0);switch(p.kind){case"keys":return o(g,!1);case"values":return o(m[g],!1)}return o([g,m[g]],!1)},"values");var f=r.Arguments=r.Array;if(e("keys"),e("values"),e("entries"),!a&&l&&f.name!=="values")try{i(f,"name",{value:"values"})}catch{}return gS}var yS,QL;function tke(){return QL||(QL=1,yS={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),yS}var XL;function xl(){if(XL)return AL;XL=1,bl();var t=tke(),e=Er(),r=eu(),n=kh();for(var i in t)r(e[i],i),n[i]=n.Array;return AL}var vS,JL;function Kse(){if(JL)return vS;JL=1;var t=HNe();return xl(),vS=t,vS}var ZL={},eB;function rke(){if(eB)return ZL;eB=1;var t=Hr(),e=Gi().f,r=t("metadata"),n=Function.prototype;return n[r]===void 0&&e(n,r,{value:null}),ZL}var tB={},rB;function nke(){return rB||(rB=1,Bse()),tB}var nB={},iB;function ike(){return iB||(iB=1,zse()),nB}var sB={},oB;function ske(){if(oB)return sB;oB=1;var t=Qt();return t("metadata"),sB}var bS,aB;function oke(){if(aB)return bS;aB=1;var t=Kse();return rke(),nke(),ike(),ske(),bS=t,bS}var lB={},xS,cB;function Gse(){if(cB)return xS;cB=1;var t=Si(),e=Ct(),r=t("Symbol"),n=r.keyFor,i=e(r.prototype.valueOf);return xS=r.isRegisteredSymbol||function(o){try{return n(i(o))!==void 0}catch{return!1}},xS}var uB;function ake(){if(uB)return lB;uB=1;var t=Ke(),e=Gse();return t({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),lB}var dB={},wS,hB;function Yse(){if(hB)return wS;hB=1;for(var t=wh(),e=Si(),r=Ct(),n=xm(),i=Hr(),s=e("Symbol"),o=s.isWellKnownSymbol,a=e("Object","getOwnPropertyNames"),l=r(s.prototype.valueOf),u=t("wks"),d=0,h=a(s),f=h.length;d<f;d++)try{var p=h[d];n(s[p])&&i(p)}catch{}return wS=function(g){if(o&&o(g))return!0;try{for(var v=l(g),y=0,b=a(u),w=b.length;y<w;y++)if(u[b[y]]==v)return!0}catch{}return!1},wS}var fB;function lke(){if(fB)return dB;fB=1;var t=Ke(),e=Yse();return t({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),dB}var pB={},mB;function cke(){if(mB)return pB;mB=1;var t=Qt();return t("customMatcher"),pB}var gB={},yB;function uke(){if(yB)return gB;yB=1;var t=Qt();return t("observable"),gB}var vB={},bB;function dke(){if(bB)return vB;bB=1;var t=Ke(),e=Gse();return t({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),vB}var xB={},wB;function hke(){if(wB)return xB;wB=1;var t=Ke(),e=Yse();return t({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),xB}var SB={},_B;function fke(){if(_B)return SB;_B=1;var t=Qt();return t("matcher"),SB}var EB={},NB;function pke(){if(NB)return EB;NB=1;var t=Qt();return t("metadataKey"),EB}var kB={},CB;function mke(){if(CB)return kB;CB=1;var t=Qt();return t("patternMatch"),kB}var TB={},jB;function gke(){if(jB)return TB;jB=1;var t=Qt();return t("replaceAll"),TB}var SS,OB;function yke(){if(OB)return SS;OB=1;var t=oke();return ake(),lke(),cke(),uke(),dke(),hke(),fke(),pke(),mke(),gke(),SS=t,SS}var _S,PB;function vke(){return PB||(PB=1,_S=yke()),_S}var bke=vke(),Bg=ot(bke),IB={},ES,RB;function xke(){if(RB)return ES;RB=1;var t=Ct(),e=_h(),r=vl(),n=Jc(),i=t("".charAt),s=t("".charCodeAt),o=t("".slice),a=function(l){return function(u,d){var h=r(n(u)),f=e(d),p=h.length,m,g;return f<0||f>=p?l?"":void 0:(m=s(h,f),m<55296||m>56319||f+1===p||(g=s(h,f+1))<56320||g>57343?l?i(h,f):m:l?o(h,f,f+2):(m-55296<<10)+(g-56320)+65536)}};return ES={codeAt:a(!1),charAt:a(!0)},ES}var MB;function yb(){if(MB)return IB;MB=1;var t=xke().charAt,e=vl(),r=Nm(),n=$A(),i=FA(),s="String Iterator",o=r.set,a=r.getterFor(s);return n(String,"String",function(l){o(this,{type:s,string:e(l),index:0})},function(){var u=a(this),d=u.string,h=u.index,f;return h>=d.length?i(void 0,!0):(f=t(d,h),u.index+=f.length,i(f,!1))}),IB}var NS,AB;function wke(){if(AB)return NS;AB=1,bl(),yb(),Vse();var t=gb();return NS=t.f("iterator"),NS}var kS,DB;function Qse(){if(DB)return kS;DB=1;var t=wke();return xl(),kS=t,kS}var CS,$B;function Ske(){if($B)return CS;$B=1;var t=Qse();return CS=t,CS}var TS,FB;function _ke(){if(FB)return TS;FB=1;var t=Ske();return TS=t,TS}var jS,qB;function Eke(){return qB||(qB=1,jS=_ke()),jS}var Nke=Eke(),kke=ot(Nke);function Rp(t){"@babel/helpers - typeof";return Rp=typeof Bg=="function"&&typeof kke=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Bg=="function"&&e.constructor===Bg&&e!==Bg.prototype?"symbol":typeof e},Rp(t)}var OS,LB;function Cke(){if(LB)return OS;LB=1,Wse();var t=gb();return OS=t.f("toPrimitive"),OS}var PS,BB;function Tke(){if(BB)return PS;BB=1;var t=Cke();return PS=t,PS}var IS,zB;function jke(){if(zB)return IS;zB=1;var t=Tke();return IS=t,IS}var RS,VB;function Oke(){if(VB)return RS;VB=1;var t=jke();return RS=t,RS}var MS,WB;function Pke(){return WB||(WB=1,MS=Oke()),MS}var Ike=Pke(),Rke=ot(Ike);function Mke(t,e){if(Rp(t)!="object"||!t)return t;var r=t[Rke];if(r!==void 0){var n=r.call(t,e);if(Rp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ake(t){var e=Mke(t,"string");return Rp(e)=="symbol"?e:e+""}function Ya(t,e,r){return(e=Ake(e))in t?wNe(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var UB={},AS,HB;function Dke(){if(HB)return AS;HB=1;var t=Ct(),e=Wo(),r=qn(),n=Ur(),i=Eh(),s=gm(),o=Function,a=t([].concat),l=t([].join),u={},d=function(h,f,p){if(!n(u,f)){for(var m=[],g=0;g<f;g++)m[g]="a["+g+"]";u[f]=o("C,a","return new C("+l(m,",")+")")}return u[f](h,p)};return AS=s?o.bind:function(f){var p=e(this),m=p.prototype,g=i(arguments,1),v=function(){var b=a(g,i(arguments));return this instanceof v?d(p,b.length,b):p.apply(f,b)};return r(m)&&(v.prototype=m),v},AS}var KB;function $ke(){if(KB)return UB;KB=1;var t=Ke(),e=Dke();return t({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),UB}var DS,GB;function oi(){if(GB)return DS;GB=1;var t=Er(),e=Mr();return DS=function(r,n){var i=e[r+"Prototype"],s=i&&i[n];if(s)return s;var o=t[r],a=o&&o.prototype;return a&&a[n]},DS}var $S,YB;function Fke(){if(YB)return $S;YB=1,$ke();var t=oi();return $S=t("Function","bind"),$S}var FS,QB;function qke(){if(QB)return FS;QB=1;var t=Wr(),e=Fke(),r=Function.prototype;return FS=function(n){var i=n.bind;return n===r||t(r,n)&&i===r.bind?e:i},FS}var qS,XB;function Lke(){if(XB)return qS;XB=1;var t=qke();return qS=t,qS}var LS,JB;function Bke(){return JB||(JB=1,LS=Lke()),LS}var zke=Bke(),Xse=ot(zke),ZB={},BS,e6;function Vke(){if(e6)return BS;e6=1;var t=Wo(),e=vs(),r=ab(),n=gl(),i=TypeError,s="Reduce of empty array with no initial value",o=function(a){return function(l,u,d,h){var f=e(l),p=r(f),m=n(f);if(t(u),m===0&&d<2)throw new i(s);var g=a?m-1:0,v=a?-1:1;if(d<2)for(;;){if(g in p){h=p[g],g+=v;break}if(g+=v,a?g<0:m<=g)throw new i(s)}for(;a?g>=0:m>g;g+=v)g in p&&(h=u(h,p[g],g,f));return h}};return BS={left:o(!1),right:o(!0)},BS}var zS,t6;function vb(){if(t6)return zS;t6=1;var t=St();return zS=function(e,r){var n=[][e];return!!n&&t(function(){n.call(null,r||function(){return 1},1)})},zS}var VS,r6;function Jse(){if(r6)return VS;r6=1;var t=Er(),e=yh(),r=Vo(),n=function(i){return e.slice(0,i.length)===i};return VS=function(){return n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":t.Bun&&typeof Bun.version=="string"?"BUN":t.Deno&&typeof Deno.version=="object"?"DENO":r(t.process)==="process"?"NODE":t.window&&t.document?"BROWSER":"REST"}(),VS}var WS,n6;function Wke(){if(n6)return WS;n6=1;var t=Jse();return WS=t==="NODE",WS}var i6;function Uke(){if(i6)return ZB;i6=1;var t=Ke(),e=Vke().left,r=vb(),n=bm(),i=Wke(),s=!i&&n>79&&n<83,o=s||!r("reduce");return t({target:"Array",proto:!0,forced:o},{reduce:function(l){var u=arguments.length;return e(this,l,u,u>1?arguments[1]:void 0)}}),ZB}var US,s6;function Hke(){if(s6)return US;s6=1,Uke();var t=oi();return US=t("Array","reduce"),US}var HS,o6;function Kke(){if(o6)return HS;o6=1;var t=Wr(),e=Hke(),r=Array.prototype;return HS=function(n){var i=n.reduce;return n===r||t(r,n)&&i===r.reduce?e:i},HS}var KS,a6;function Gke(){if(a6)return KS;a6=1;var t=Kke();return KS=t,KS}var GS,l6;function Yke(){return l6||(l6=1,GS=Gke()),GS}var Qke=Yke(),Xke=ot(Qke),c6={},u6;function Jke(){if(u6)return c6;u6=1;var t=Ke(),e=Nh().filter,r=wm(),n=r("filter");return t({target:"Array",proto:!0,forced:!n},{filter:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),c6}var YS,d6;function Zke(){if(d6)return YS;d6=1,Jke();var t=oi();return YS=t("Array","filter"),YS}var QS,h6;function e2e(){if(h6)return QS;h6=1;var t=Wr(),e=Zke(),r=Array.prototype;return QS=function(n){var i=n.filter;return n===r||t(r,n)&&i===r.filter?e:i},QS}var XS,f6;function t2e(){if(f6)return XS;f6=1;var t=e2e();return XS=t,XS}var JS,p6;function r2e(){return p6||(p6=1,JS=t2e()),JS}var n2e=r2e(),Qu=ot(n2e),m6={},g6;function i2e(){if(g6)return m6;g6=1;var t=Ke(),e=Nh().map,r=wm(),n=r("map");return t({target:"Array",proto:!0,forced:!n},{map:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),m6}var ZS,y6;function s2e(){if(y6)return ZS;y6=1,i2e();var t=oi();return ZS=t("Array","map"),ZS}var e_,v6;function o2e(){if(v6)return e_;v6=1;var t=Wr(),e=s2e(),r=Array.prototype;return e_=function(n){var i=n.map;return n===r||t(r,n)&&i===r.map?e:i},e_}var t_,b6;function a2e(){if(b6)return t_;b6=1;var t=o2e();return t_=t,t_}var r_,x6;function l2e(){return x6||(x6=1,r_=a2e()),r_}var c2e=l2e(),as=ot(c2e),n_,w6;function u2e(){return w6||(w6=1,n_=Kse()),n_}var d2e=u2e(),h2e=ot(d2e),S6={},_6;function f2e(){if(_6)return S6;_6=1;var t=Ke(),e=Zc(),r=Rse(),n=qn(),i=RA(),s=gl(),o=Ws(),a=db(),l=Hr(),u=wm(),d=Eh(),h=u("slice"),f=l("species"),p=Array,m=Math.max;return t({target:"Array",proto:!0,forced:!h},{slice:function(v,y){var b=o(this),w=s(b),x=i(v,w),S=i(y===void 0?w:y,w),_,E,N;if(e(b)&&(_=b.constructor,r(_)&&(_===p||e(_.prototype))?_=void 0:n(_)&&(_=_[f],_===null&&(_=void 0)),_===p||_===void 0))return d(b,x,S);for(E=new(_===void 0?p:_)(m(S-x,0)),N=0;x<S;x++,N++)x in b&&a(E,N,b[x]);return E.length=N,E}}),S6}var i_,E6;function p2e(){if(E6)return i_;E6=1,f2e();var t=oi();return i_=t("Array","slice"),i_}var s_,N6;function m2e(){if(N6)return s_;N6=1;var t=Wr(),e=p2e(),r=Array.prototype;return s_=function(n){var i=n.slice;return n===r||t(r,n)&&i===r.slice?e:i},s_}var o_,k6;function g2e(){if(k6)return o_;k6=1;var t=m2e();return o_=t,o_}var a_,C6;function y2e(){return C6||(C6=1,a_=g2e()),a_}var v2e=y2e(),b2e=ot(v2e),T6={},l_,j6;function Zse(){if(j6)return l_;j6=1;var t=Si(),e=Ct(),r=pb(),n=mb(),i=Uo(),s=e([].concat);return l_=t("Reflect","ownKeys")||function(a){var l=r.f(i(a)),u=n.f;return u?s(l,u(a)):l},l_}var O6;function x2e(){if(O6)return T6;O6=1;var t=Ke(),e=Zse();return t({target:"Reflect",stat:!0},{ownKeys:e}),T6}var c_,P6;function w2e(){if(P6)return c_;P6=1,x2e();var t=Mr();return c_=t.Reflect.ownKeys,c_}var u_,I6;function S2e(){if(I6)return u_;I6=1;var t=w2e();return u_=t,u_}var d_,R6;function _2e(){return R6||(R6=1,d_=S2e()),d_}var E2e=_2e(),N2e=ot(E2e),M6={},A6;function k2e(){if(A6)return M6;A6=1;var t=Ke(),e=Zc();return t({target:"Array",stat:!0},{isArray:e}),M6}var h_,D6;function C2e(){if(D6)return h_;D6=1,k2e();var t=Mr();return h_=t.Array.isArray,h_}var f_,$6;function T2e(){if($6)return f_;$6=1;var t=C2e();return f_=t,f_}var p_,F6;function j2e(){return F6||(F6=1,p_=T2e()),p_}var O2e=j2e(),Cs=ot(O2e),q6={},L6;function P2e(){if(L6)return q6;L6=1;var t=Ke(),e=vs(),r=hb(),n=St(),i=n(function(){r(1)});return t({target:"Object",stat:!0,forced:i},{keys:function(o){return r(e(o))}}),q6}var m_,B6;function I2e(){if(B6)return m_;B6=1,P2e();var t=Mr();return m_=t.Object.keys,m_}var g_,z6;function R2e(){if(z6)return g_;z6=1;var t=I2e();return g_=t,g_}var y_,V6;function M2e(){return V6||(V6=1,y_=R2e()),y_}var A2e=M2e(),qA=ot(A2e),W6={},v_,U6;function D2e(){if(U6)return v_;U6=1;var t=Nh().forEach,e=vb(),r=e("forEach");return v_=r?[].forEach:function(i){return t(this,i,arguments.length>1?arguments[1]:void 0)},v_}var H6;function $2e(){if(H6)return W6;H6=1;var t=Ke(),e=D2e();return t({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),W6}var b_,K6;function F2e(){if(K6)return b_;K6=1,$2e();var t=oi();return b_=t("Array","forEach"),b_}var x_,G6;function q2e(){if(G6)return x_;G6=1;var t=F2e();return x_=t,x_}var w_,Y6;function L2e(){if(Y6)return w_;Y6=1;var t=yl(),e=Ur(),r=Wr(),n=q2e(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return w_=function(o){var a=o.forEach;return o===i||r(i,o)&&a===i.forEach||e(s,t(o))?n:a},w_}var S_,Q6;function B2e(){return Q6||(Q6=1,S_=L2e()),S_}var z2e=B2e(),$c=ot(z2e),X6={},J6;function V2e(){if(J6)return X6;J6=1;var t=Ke(),e=Ct(),r=Zc(),n=e([].reverse),i=[1,2];return t({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),n(this)}}),X6}var __,Z6;function W2e(){if(Z6)return __;Z6=1,V2e();var t=oi();return __=t("Array","reverse"),__}var E_,ez;function U2e(){if(ez)return E_;ez=1;var t=Wr(),e=W2e(),r=Array.prototype;return E_=function(n){var i=n.reverse;return n===r||t(r,n)&&i===r.reverse?e:i},E_}var N_,tz;function H2e(){if(tz)return N_;tz=1;var t=U2e();return N_=t,N_}var k_,rz;function K2e(){return rz||(rz=1,k_=H2e()),k_}var G2e=K2e(),Y2e=ot(G2e),nz={},C_,iz;function Q2e(){if(iz)return C_;iz=1;var t=Nr(),e=Zc(),r=TypeError,n=Object.getOwnPropertyDescriptor,i=t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(s){return s instanceof TypeError}}();return C_=i?function(s,o){if(e(s)&&!n(s,"length").writable)throw new r("Cannot set read only .length");return s.length=o}:function(s,o){return s.length=o},C_}var T_,sz;function eoe(){if(sz)return T_;sz=1;var t=bh(),e=TypeError;return T_=function(r,n){if(!delete r[n])throw new e("Cannot delete property "+t(n)+" of "+t(r))},T_}var oz;function X2e(){if(oz)return nz;oz=1;var t=Ke(),e=vs(),r=RA(),n=_h(),i=gl(),s=Q2e(),o=Ise(),a=IA(),l=db(),u=eoe(),d=wm(),h=d("splice"),f=Math.max,p=Math.min;return t({target:"Array",proto:!0,forced:!h},{splice:function(g,v){var y=e(this),b=i(y),w=r(g,b),x=arguments.length,S,_,E,N,T,j;for(x===0?S=_=0:x===1?(S=0,_=b-w):(S=x-2,_=p(f(n(v),0),b-w)),o(b+S-_),E=a(y,_),N=0;N<_;N++)T=w+N,T in y&&l(E,N,y[T]);if(E.length=_,S<_){for(N=w;N<b-_;N++)T=N+_,j=N+S,T in y?y[j]=y[T]:u(y,j);for(N=b;N>b-_+S;N--)u(y,N-1)}else if(S>_)for(N=b-_;N>w;N--)T=N+_-1,j=N+S-1,T in y?y[j]=y[T]:u(y,j);for(N=0;N<S;N++)y[N+w]=arguments[N+2];return s(y,b-_+S),E}}),nz}var j_,az;function J2e(){if(az)return j_;az=1,X2e();var t=oi();return j_=t("Array","splice"),j_}var O_,lz;function Z2e(){if(lz)return O_;lz=1;var t=Wr(),e=J2e(),r=Array.prototype;return O_=function(n){var i=n.splice;return n===r||t(r,n)&&i===r.splice?e:i},O_}var P_,cz;function eCe(){if(cz)return P_;cz=1;var t=Z2e();return P_=t,P_}var I_,uz;function tCe(){return uz||(uz=1,I_=eCe()),I_}var rCe=tCe(),toe=ot(rCe),dz={},R_,hz;function nCe(){if(hz)return R_;hz=1;var t=Nr(),e=Ct(),r=si(),n=St(),i=hb(),s=mb(),o=CA(),a=vs(),l=ab(),u=Object.assign,d=Object.defineProperty,h=e([].concat);return R_=!u||n(function(){if(t&&u({b:1},u(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},p={},m=Symbol("assign detection"),g="abcdefghijklmnopqrst";return f[m]=7,g.split("").forEach(function(v){p[v]=v}),u({},f)[m]!==7||i(u({},p)).join("")!==g})?function(p,m){for(var g=a(p),v=arguments.length,y=1,b=s.f,w=o.f;v>y;)for(var x=l(arguments[y++]),S=b?h(i(x),b(x)):i(x),_=S.length,E=0,N;_>E;)N=S[E++],(!t||r(w,x,N))&&(g[N]=x[N]);return g}:u,R_}var fz;function iCe(){if(fz)return dz;fz=1;var t=Ke(),e=nCe();return t({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),dz}var M_,pz;function sCe(){if(pz)return M_;pz=1,iCe();var t=Mr();return M_=t.Object.assign,M_}var A_,mz;function oCe(){if(mz)return A_;mz=1;var t=sCe();return A_=t,A_}var D_,gz;function aCe(){return gz||(gz=1,D_=oCe()),D_}var lCe=aCe(),cCe=ot(lCe),$_,yz;function uCe(){if(yz)return $_;yz=1,Mse();var t=oi();return $_=t("Array","concat"),$_}var F_,vz;function dCe(){if(vz)return F_;vz=1;var t=Wr(),e=uCe(),r=Array.prototype;return F_=function(n){var i=n.concat;return n===r||t(r,n)&&i===r.concat?e:i},F_}var q_,bz;function hCe(){if(bz)return q_;bz=1;var t=dCe();return q_=t,q_}var L_,xz;function fCe(){return xz||(xz=1,L_=hCe()),L_}var pCe=fCe(),mCe=ot(pCe),wz={},Sz;function gCe(){if(Sz)return wz;Sz=1;var t=Ke(),e=Nr(),r=_m();return t({target:"Object",stat:!0,sham:!e},{create:r}),wz}var B_,_z;function yCe(){if(_z)return B_;_z=1,gCe();var t=Mr(),e=t.Object;return B_=function(n,i){return e.create(n,i)},B_}var z_,Ez;function vCe(){if(Ez)return z_;Ez=1;var t=yCe();return z_=t,z_}var V_,Nz;function bCe(){return Nz||(Nz=1,V_=vCe()),V_}var xCe=bCe(),wCe=ot(xCe),kz={},W_,Cz;function SCe(){if(Cz)return W_;Cz=1;var t=_h(),e=vl(),r=Jc(),n=RangeError;return W_=function(s){var o=e(r(this)),a="",l=t(s);if(l<0||l===1/0)throw new n("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(o+=o))l&1&&(a+=o);return a},W_}var U_,Tz;function _Ce(){if(Tz)return U_;Tz=1;var t=Ct(),e=Pse(),r=vl(),n=SCe(),i=Jc(),s=t(n),o=t("".slice),a=Math.ceil,l=function(u){return function(d,h,f){var p=r(i(d)),m=e(h),g=p.length,v=f===void 0?" ":r(f),y,b;return m<=g||v===""?p:(y=m-g,b=s(v,a(y/v.length)),b.length>y&&(b=o(b,0,y)),u?p+b:b+p)}};return U_={start:l(!1),end:l(!0)},U_}var H_,jz;function ECe(){if(jz)return H_;jz=1;var t=Ct(),e=St(),r=_Ce().start,n=RangeError,i=isFinite,s=Math.abs,o=Date.prototype,a=o.toISOString,l=t(o.getTime),u=t(o.getUTCDate),d=t(o.getUTCFullYear),h=t(o.getUTCHours),f=t(o.getUTCMilliseconds),p=t(o.getUTCMinutes),m=t(o.getUTCMonth),g=t(o.getUTCSeconds);return H_=e(function(){return a.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){a.call(new Date(NaN))})?function(){if(!i(l(this)))throw new n("Invalid time value");var y=this,b=d(y),w=f(y),x=b<0?"-":b>9999?"+":"";return x+r(s(b),x?6:4,0)+"-"+r(m(y)+1,2,0)+"-"+r(u(y),2,0)+"T"+r(h(y),2,0)+":"+r(p(y),2,0)+":"+r(g(y),2,0)+"."+r(w,3,0)+"Z"}:a,H_}var Oz;function NCe(){if(Oz)return kz;Oz=1;var t=Ke(),e=si(),r=vs(),n=kse(),i=ECe(),s=Vo(),o=St(),a=o(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return t({target:"Date",proto:!0,forced:a},{toJSON:function(u){var d=r(this),h=n(d,"number");return typeof h=="number"&&!isFinite(h)?null:!("toISOString"in d)&&s(d)==="Date"?e(i,d):d.toISOString()}}),kz}var K_,Pz;function kCe(){if(Pz)return K_;Pz=1,NCe(),qse();var t=Mr(),e=ob();return t.JSON||(t.JSON={stringify:JSON.stringify}),K_=function(n,i,s){return e(t.JSON.stringify,null,arguments)},K_}var G_,Iz;function CCe(){if(Iz)return G_;Iz=1;var t=kCe();return G_=t,G_}var Y_,Rz;function TCe(){return Rz||(Rz=1,Y_=CCe()),Y_}var jCe=TCe(),OCe=ot(jCe),Mz={},Az={},Q_,Dz;function PCe(){if(Dz)return Q_;Dz=1;var t=TypeError;return Q_=function(e,r){if(e<r)throw new t("Not enough arguments");return e},Q_}var X_,$z;function roe(){if($z)return X_;$z=1;var t=Er(),e=ob(),r=Vr(),n=Jse(),i=yh(),s=Eh(),o=PCe(),a=t.Function,l=/MSIE .\./.test(i)||n==="BUN"&&function(){var u=t.Bun.version.split(".");return u.length<3||u[0]==="0"&&(u[1]<3||u[1]==="3"&&u[2]==="0")}();return X_=function(u,d){var h=d?2:1;return l?function(f,p){var m=o(arguments.length,1)>h,g=r(f)?f:a(f),v=m?s(arguments,h):[],y=m?function(){e(g,this,v)}:g;return d?u(y,p):u(y)}:u},X_}var Fz;function ICe(){if(Fz)return Az;Fz=1;var t=Ke(),e=Er(),r=roe(),n=r(e.setInterval,!0);return t({global:!0,bind:!0,forced:e.setInterval!==n},{setInterval:n}),Az}var qz={},Lz;function RCe(){if(Lz)return qz;Lz=1;var t=Ke(),e=Er(),r=roe(),n=r(e.setTimeout,!0);return t({global:!0,bind:!0,forced:e.setTimeout!==n},{setTimeout:n}),qz}var Bz;function MCe(){return Bz||(Bz=1,ICe(),RCe()),Mz}var J_,zz;function ACe(){if(zz)return J_;zz=1,MCe();var t=Mr();return J_=t.setTimeout,J_}var Z_,Vz;function DCe(){return Vz||(Vz=1,Z_=ACe()),Z_}var $Ce=DCe(),FCe=ot($Ce),eE={exports:{}},Wz;function qCe(){return Wz||(Wz=1,function(t){function e(n){if(n)return r(n);this._callbacks=new Map}function r(n){return Object.assign(n,e.prototype),n._callbacks=new Map,n}e.prototype.on=function(n,i){const s=this._callbacks.get(n)??[];return s.push(i),this._callbacks.set(n,s),this},e.prototype.once=function(n,i){const s=(...o)=>{this.off(n,s),i.apply(this,o)};return s.fn=i,this.on(n,s),this},e.prototype.off=function(n,i){if(n===void 0&&i===void 0)return this._callbacks.clear(),this;if(i===void 0)return this._callbacks.delete(n),this;const s=this._callbacks.get(n);if(s){for(const[o,a]of s.entries())if(a===i||a.fn===i){s.splice(o,1);break}s.length===0?this._callbacks.delete(n):this._callbacks.set(n,s)}return this},e.prototype.emit=function(n,...i){const s=this._callbacks.get(n);if(s){const o=[...s];for(const a of o)a.apply(this,i)}return this},e.prototype.listeners=function(n){return this._callbacks.get(n)??[]},e.prototype.listenerCount=function(n){if(n)return this.listeners(n).length;let i=0;for(const s of this._callbacks.values())i+=s.length;return i},e.prototype.hasListeners=function(n){return this.listenerCount(n)>0},e.prototype.addEventListener=e.prototype.on,e.prototype.removeListener=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,t.exports=e}(eE)),eE.exports}var LCe=qCe(),BCe=ot(LCe);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function ms(){return ms=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ms.apply(this,arguments)}function Yi(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function zg(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var XI;typeof Object.assign!="function"?XI=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])}return r}:XI=Object.assign;var Fc=XI,Uz=["","webkit","Moz","MS","ms","o"],zCe=typeof document>"u"?{style:{}}:document.createElement("div"),VCe="function",Xu=Math.round,qc=Math.abs,LA=Date.now;function bb(t,e){for(var r,n,i=e[0].toUpperCase()+e.slice(1),s=0;s<Uz.length;){if(r=Uz[s],n=r?r+i:e,n in t)return n;s++}}var So;typeof window>"u"?So={}:So=window;var noe=bb(zCe.style,"touchAction"),ioe=noe!==void 0;function WCe(){if(!ioe)return!1;var t={},e=So.CSS&&So.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){return t[r]=e?So.CSS.supports("touch-action",r):!0}),t}var soe="compute",ooe="auto",JI="manipulation",pc="none",Mp="pan-x",Ap="pan-y",Vg=WCe(),UCe=/mobile|tablet|ip(ad|hone|od)|android/i,aoe="ontouchstart"in So,HCe=bb(So,"PointerEvent")!==void 0,KCe=aoe&&UCe.test(navigator.userAgent),km="touch",GCe="pen",BA="mouse",YCe="kinect",QCe=25,Mn=1,tu=2,br=4,ni=8,Xv=1,Cm=2,Tm=4,jm=8,Xd=16,qs=Cm|Tm,mc=jm|Xd,loe=qs|mc,coe=["x","y"],Jv=["clientX","clientY"];function _o(t,e,r){var n;if(t)if(t.forEach)t.forEach(e,r);else if(t.length!==void 0)for(n=0;n<t.length;)e.call(r,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t)}function xb(t,e){return typeof t===VCe?t.apply(e&&e[0]||void 0,e):t}function Kl(t,e){return t.indexOf(e)>-1}function XCe(t){if(Kl(t,pc))return pc;var e=Kl(t,Mp),r=Kl(t,Ap);return e&&r?pc:e||r?e?Mp:Ap:Kl(t,JI)?JI:ooe}var uoe=function(){function t(r,n){this.manager=r,this.set(n)}var e=t.prototype;return e.set=function(n){n===soe&&(n=this.compute()),ioe&&this.manager.element.style&&Vg[n]&&(this.manager.element.style[noe]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return _o(this.manager.recognizers,function(i){xb(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),XCe(n.join(" "))},e.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=Kl(o,pc)&&!Vg[pc],l=Kl(o,Ap)&&!Vg[Ap],u=Kl(o,Mp)&&!Vg[Mp];if(a){var d=n.pointers.length===1,h=n.distance<2,f=n.deltaTime<250;if(d&&h&&f)return}if(!(u&&l)&&(a||l&&s&qs||u&&s&mc))return this.preventSrc(i)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},t}();function zA(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function doe(t){var e=t.length;if(e===1)return{x:Xu(t[0].clientX),y:Xu(t[0].clientY)};for(var r=0,n=0,i=0;i<e;)r+=t[i].clientX,n+=t[i].clientY,i++;return{x:Xu(r/e),y:Xu(n/e)}}function Hz(t){for(var e=[],r=0;r<t.pointers.length;)e[r]={clientX:Xu(t.pointers[r].clientX),clientY:Xu(t.pointers[r].clientY)},r++;return{timeStamp:LA(),pointers:e,center:doe(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Zv(t,e,r){r||(r=coe);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.sqrt(n*n+i*i)}function ZI(t,e,r){r||(r=coe);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.atan2(i,n)*180/Math.PI}function hoe(t,e){return t===e?Xv:qc(t)>=qc(e)?t<0?Cm:Tm:e<0?jm:Xd}function JCe(t,e){var r=e.center,n=t.offsetDelta||{},i=t.prevDelta||{},s=t.prevInput||{};(e.eventType===Mn||s.eventType===br)&&(i=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:r.x,y:r.y}),e.deltaX=i.x+(r.x-n.x),e.deltaY=i.y+(r.y-n.y)}function foe(t,e,r){return{x:e/t||0,y:r/t||0}}function ZCe(t,e){return Zv(e[0],e[1],Jv)/Zv(t[0],t[1],Jv)}function eTe(t,e){return ZI(e[1],e[0],Jv)+ZI(t[1],t[0],Jv)}function tTe(t,e){var r=t.lastInterval||e,n=e.timeStamp-r.timeStamp,i,s,o,a;if(e.eventType!==ni&&(n>QCe||r.velocity===void 0)){var l=e.deltaX-r.deltaX,u=e.deltaY-r.deltaY,d=foe(n,l,u);s=d.x,o=d.y,i=qc(d.x)>qc(d.y)?d.x:d.y,a=hoe(l,u),t.lastInterval=e}else i=r.velocity,s=r.velocityX,o=r.velocityY,a=r.direction;e.velocity=i,e.velocityX=s,e.velocityY=o,e.direction=a}function rTe(t,e){var r=t.session,n=e.pointers,i=n.length;r.firstInput||(r.firstInput=Hz(e)),i>1&&!r.firstMultiple?r.firstMultiple=Hz(e):i===1&&(r.firstMultiple=!1);var s=r.firstInput,o=r.firstMultiple,a=o?o.center:s.center,l=e.center=doe(n);e.timeStamp=LA(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=ZI(a,l),e.distance=Zv(a,l),JCe(r,e),e.offsetDirection=hoe(e.deltaX,e.deltaY);var u=foe(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=qc(u.x)>qc(u.y)?u.x:u.y,e.scale=o?ZCe(o.pointers,n):1,e.rotation=o?eTe(o.pointers,n):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,tTe(r,e);var d=t.element,h=e.srcEvent,f;h.composedPath?f=h.composedPath()[0]:h.path?f=h.path[0]:f=h.target,zA(f,d)&&(d=f),e.target=d}function nTe(t,e,r){var n=r.pointers.length,i=r.changedPointers.length,s=e&Mn&&n-i===0,o=e&(br|ni)&&n-i===0;r.isFirst=!!s,r.isFinal=!!o,s&&(t.session={}),r.eventType=e,rTe(t,r),t.emit("hammer.input",r),t.recognize(r),t.session.prevInput=r}function Dp(t){return t.trim().split(/\s+/g)}function Uf(t,e,r){_o(Dp(e),function(n){t.addEventListener(n,r,!1)})}function Hf(t,e,r){_o(Dp(e),function(n){t.removeEventListener(n,r,!1)})}function Kz(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var Ch=function(){function t(r,n){var i=this;this.manager=r,this.callback=n,this.element=r.element,this.target=r.options.inputTarget,this.domHandler=function(s){xb(r.options.enable,[r])&&i.handler(s)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&Uf(this.element,this.evEl,this.domHandler),this.evTarget&&Uf(this.target,this.evTarget,this.domHandler),this.evWin&&Uf(Kz(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Hf(this.element,this.evEl,this.domHandler),this.evTarget&&Hf(this.target,this.evTarget,this.domHandler),this.evWin&&Hf(Kz(this.element),this.evWin,this.domHandler)},t}();function Lc(t,e,r){if(t.indexOf&&!r)return t.indexOf(e);for(var n=0;n<t.length;){if(r&&t[n][r]==e||!r&&t[n]===e)return n;n++}return-1}var iTe={pointerdown:Mn,pointermove:tu,pointerup:br,pointercancel:ni,pointerout:ni},sTe={2:km,3:GCe,4:BA,5:YCe},poe="pointerdown",moe="pointermove pointerup pointercancel";So.MSPointerEvent&&!So.PointerEvent&&(poe="MSPointerDown",moe="MSPointerMove MSPointerUp MSPointerCancel");var goe=function(t){Yi(e,t);function e(){var n,i=e.prototype;return i.evEl=poe,i.evWin=moe,n=t.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var r=e.prototype;return r.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=iTe[a],u=sTe[i.pointerType]||i.pointerType,d=u===km,h=Lc(s,i.pointerId,"pointerId");l&Mn&&(i.button===0||d)?h<0&&(s.push(i),h=s.length-1):l&(br|ni)&&(o=!0),!(h<0)&&(s[h]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:u,srcEvent:i}),o&&s.splice(h,1))},e}(Ch);function $p(t){return Array.prototype.slice.call(t,0)}function VA(t,e,r){for(var n=[],i=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];Lc(i,o)<0&&n.push(t[s]),i[s]=o,s++}return r&&(e?n=n.sort(function(a,l){return a[e]>l[e]}):n=n.sort()),n}var oTe={touchstart:Mn,touchmove:tu,touchend:br,touchcancel:ni},aTe="touchstart touchmove touchend touchcancel",WA=function(t){Yi(e,t);function e(){var n;return e.prototype.evTarget=aTe,n=t.apply(this,arguments)||this,n.targetIds={},n}var r=e.prototype;return r.handler=function(i){var s=oTe[i.type],o=lTe.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:km,srcEvent:i})},e}(Ch);function lTe(t,e){var r=$p(t.touches),n=this.targetIds;if(e&(Mn|tu)&&r.length===1)return n[r[0].identifier]=!0,[r,r];var i,s,o=$p(t.changedTouches),a=[],l=this.target;if(s=r.filter(function(u){return zA(u.target,l)}),e===Mn)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),e&(br|ni)&&delete n[o[i].identifier],i++;if(a.length)return[VA(s.concat(a),"identifier",!0),a]}var cTe={mousedown:Mn,mousemove:tu,mouseup:br},uTe="mousedown",dTe="mousemove mouseup",UA=function(t){Yi(e,t);function e(){var n,i=e.prototype;return i.evEl=uTe,i.evWin=dTe,n=t.apply(this,arguments)||this,n.pressed=!1,n}var r=e.prototype;return r.handler=function(i){var s=cTe[i.type];s&Mn&&i.button===0&&(this.pressed=!0),s&tu&&i.which!==1&&(s=br),this.pressed&&(s&br&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:BA,srcEvent:i}))},e}(Ch),hTe=2500,Gz=25;function Yz(t){var e=t.changedPointers,r=e[0];if(r.identifier===this.primaryTouch){var n={x:r.clientX,y:r.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,hTe)}}function fTe(t,e){t&Mn?(this.primaryTouch=e.changedPointers[0].identifier,Yz.call(this,e)):t&(br|ni)&&Yz.call(this,e)}function pTe(t){for(var e=t.srcEvent.clientX,r=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(e-i.x),o=Math.abs(r-i.y);if(s<=Gz&&o<=Gz)return!0}return!1}var yoe=function(){var t=function(e){Yi(r,e);function r(i,s){var o;return o=e.call(this,i,s)||this,o.handler=function(a,l,u){var d=u.pointerType===km,h=u.pointerType===BA;if(!(h&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(d)fTe.call(zg(zg(o)),l,u);else if(h&&pTe.call(zg(zg(o)),u))return;o.callback(a,l,u)}},o.touch=new WA(o.manager,o.handler),o.mouse=new UA(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=r.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},r}(Ch);return t}();function mTe(t){var e,r=t.options.inputClass;return r?e=r:HCe?e=goe:KCe?e=WA:aoe?e=yoe:e=UA,new e(t,nTe)}function Ju(t,e,r){return Array.isArray(t)?(_o(t,r[e],r),!0):!1}var vy=1,Wi=2,Jd=4,Qa=8,Eo=Qa,Fp=16,Rs=32,gTe=1;function yTe(){return gTe++}function Wg(t,e){var r=e.manager;return r?r.get(t):t}function Qz(t){return t&Fp?"cancel":t&Qa?"end":t&Jd?"move":t&Wi?"start":""}var Om=function(){function t(r){r===void 0&&(r={}),this.options=ms({enable:!0},r),this.id=yTe(),this.manager=null,this.state=vy,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(n){return Fc(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(Ju(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=Wg(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return Ju(n,"dropRecognizeWith",this)?this:(n=Wg(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(Ju(n,"requireFailure",this))return this;var i=this.requireFail;return n=Wg(n,this),Lc(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(Ju(n,"dropRequireFailure",this))return this;n=Wg(n,this);var i=Lc(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<Qa&&o(i.options.event+Qz(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=Qa&&o(i.options.event+Qz(s))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=Rs},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(Rs|vy)))return!1;n++}return!0},e.recognize=function(n){var i=Fc({},n);if(!xb(this.options.enable,[this,i])){this.reset(),this.state=Rs;return}this.state&(Eo|Fp|Rs)&&(this.state=vy),this.state=this.process(i),this.state&(Wi|Jd|Qa|Fp)&&this.tryEmit(i)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},t}(),eR=function(t){Yi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,ms({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var r=e.prototype;return r.getTouchAction=function(){return[JI]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime<o.time;if(this.reset(),i.eventType&Mn&&this.count===0)return this.failTimeout();if(l&&u&&a){if(i.eventType!==br)return this.failTimeout();var d=this.pTime?i.timeStamp-this.pTime<o.interval:!0,h=!this.pCenter||Zv(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!h||!d?this.count=1:this.count+=1,this._input=i;var f=this.count%o.taps;if(f===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=Eo,s.tryEmit()},o.interval),Wi):Eo}return Rs},r.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=Rs},this.options.interval),Rs},r.reset=function(){clearTimeout(this._timer)},r.emit=function(){this.state===Eo&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(Om),Zd=function(t){Yi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ms({pointers:1},n))||this}var r=e.prototype;return r.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},r.process=function(i){var s=this.state,o=i.eventType,a=s&(Wi|Jd),l=this.attrTest(i);return a&&(o&ni||!l)?s|Fp:a||l?o&br?s|Qa:s&Wi?s|Jd:Wi:Rs},e}(Om);function voe(t){return t===Xd?"down":t===jm?"up":t===Cm?"left":t===Tm?"right":""}var HA=function(t){Yi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,ms({event:"pan",threshold:10,pointers:1,direction:loe},n))||this,i.pX=null,i.pY=null,i}var r=e.prototype;return r.getTouchAction=function(){var i=this.options.direction,s=[];return i&qs&&s.push(Ap),i&mc&&s.push(Mp),s},r.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,u=i.deltaX,d=i.deltaY;return l&s.direction||(s.direction&qs?(l=u===0?Xv:u<0?Cm:Tm,o=u!==this.pX,a=Math.abs(i.deltaX)):(l=d===0?Xv:d<0?jm:Xd,o=d!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},r.attrTest=function(i){return Zd.prototype.attrTest.call(this,i)&&(this.state&Wi||!(this.state&Wi)&&this.directionTest(i))},r.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=voe(i.direction);s&&(i.additionalEvent=this.options.event+s),t.prototype.emit.call(this,i)},e}(Zd),boe=function(t){Yi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ms({event:"swipe",threshold:10,velocity:.3,direction:qs|mc,pointers:1},n))||this}var r=e.prototype;return r.getTouchAction=function(){return HA.prototype.getTouchAction.call(this)},r.attrTest=function(i){var s=this.options.direction,o;return s&(qs|mc)?o=i.overallVelocity:s&qs?o=i.overallVelocityX:s&mc&&(o=i.overallVelocityY),t.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&qc(o)>this.options.velocity&&i.eventType&br},r.emit=function(i){var s=voe(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},e}(Zd),xoe=function(t){Yi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ms({event:"pinch",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[pc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&Wi)},r.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}t.prototype.emit.call(this,i)},e}(Zd),woe=function(t){Yi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ms({event:"rotate",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[pc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&Wi)},e}(Zd),Soe=function(t){Yi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,ms({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var r=e.prototype;return r.getTouchAction=function(){return[ooe]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(br|ni)&&!u)this.reset();else if(i.eventType&Mn)this.reset(),this._timer=setTimeout(function(){s.state=Eo,s.tryEmit()},o.time);else if(i.eventType&br)return Eo;return Rs},r.reset=function(){clearTimeout(this._timer)},r.emit=function(i){this.state===Eo&&(i&&i.eventType&br?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=LA(),this.manager.emit(this.options.event,this._input)))},e}(Om),_oe={domEvents:!1,touchAction:soe,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Xz=[[woe,{enable:!1}],[xoe,{enable:!1},["rotate"]],[boe,{direction:qs}],[HA,{direction:qs},["swipe"]],[eR],[eR,{event:"doubletap",taps:2},["tap"]],[Soe]],vTe=1,Jz=2;function Zz(t,e){var r=t.element;if(r.style){var n;_o(t.options.cssProps,function(i,s){n=bb(r.style,s),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function bTe(t,e){var r=document.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}var e8=function(){function t(r,n){var i=this;this.options=Fc({},_oe,n||{}),this.options.inputTarget=this.options.inputTarget||r,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=r,this.input=mTe(this),this.touchAction=new uoe(this,this.options.touchAction),Zz(this,!0),_o(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var e=t.prototype;return e.set=function(n){return Fc(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?Jz:vTe},e.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&Eo)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==Jz&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(Wi|Jd|Qa)&&(i.curRecognizer=s,a=s),l++}},e.get=function(n){if(n instanceof Om)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},e.add=function(n){if(Ju(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(Ju(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=Lc(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},e.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return _o(Dp(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},e.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return _o(Dp(n),function(o){i?s[o]&&s[o].splice(Lc(s[o],i),1):delete s[o]}),this},e.emit=function(n,i){this.options.domEvents&&bTe(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},e.destroy=function(){this.element&&Zz(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),xTe={touchstart:Mn,touchmove:tu,touchend:br,touchcancel:ni},wTe="touchstart",STe="touchstart touchmove touchend touchcancel",_Te=function(t){Yi(e,t);function e(){var n,i=e.prototype;return i.evTarget=wTe,i.evWin=STe,n=t.apply(this,arguments)||this,n.started=!1,n}var r=e.prototype;return r.handler=function(i){var s=xTe[i.type];if(s===Mn&&(this.started=!0),!!this.started){var o=ETe.call(this,i,s);s&(br|ni)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:km,srcEvent:i})}},e}(Ch);function ETe(t,e){var r=$p(t.touches),n=$p(t.changedTouches);return e&(br|ni)&&(r=VA(r.concat(n),"identifier",!0)),[r,n]}function Eoe(t,e,r){var n="DEPRECATED METHOD: "+e+`
`+r+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),t.apply(this,arguments)}}var Noe=Eoe(function(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;)(!r||r&&t[n[i]]===void 0)&&(t[n[i]]=e[n[i]]),i++;return t},"extend","Use `assign`."),NTe=Eoe(function(t,e){return Noe(t,e,!0)},"merge","Use `assign`.");function kTe(t,e,r){var n=e.prototype,i;i=t.prototype=Object.create(n),i.constructor=t,i._super=n,r&&Fc(i,r)}function t8(t,e){return function(){return t.apply(e,arguments)}}var CTe=function(){var t=function(r,n){return n===void 0&&(n={}),new e8(r,ms({recognizers:Xz.concat()},n))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=loe,t.DIRECTION_DOWN=Xd,t.DIRECTION_LEFT=Cm,t.DIRECTION_RIGHT=Tm,t.DIRECTION_UP=jm,t.DIRECTION_HORIZONTAL=qs,t.DIRECTION_VERTICAL=mc,t.DIRECTION_NONE=Xv,t.DIRECTION_DOWN=Xd,t.INPUT_START=Mn,t.INPUT_MOVE=tu,t.INPUT_END=br,t.INPUT_CANCEL=ni,t.STATE_POSSIBLE=vy,t.STATE_BEGAN=Wi,t.STATE_CHANGED=Jd,t.STATE_ENDED=Qa,t.STATE_RECOGNIZED=Eo,t.STATE_CANCELLED=Fp,t.STATE_FAILED=Rs,t.Manager=e8,t.Input=Ch,t.TouchAction=uoe,t.TouchInput=WA,t.MouseInput=UA,t.PointerEventInput=goe,t.TouchMouseInput=yoe,t.SingleTouchInput=_Te,t.Recognizer=Om,t.AttrRecognizer=Zd,t.Tap=eR,t.Pan=HA,t.Swipe=boe,t.Pinch=xoe,t.Rotate=woe,t.Press=Soe,t.on=Uf,t.off=Hf,t.each=_o,t.merge=NTe,t.extend=Noe,t.bindFn=t8,t.assign=Fc,t.inherit=kTe,t.bindFn=t8,t.prefixed=bb,t.toArray=$p,t.inArray=Lc,t.uniqueArray=VA,t.splitStr=Dp,t.boolOrFn=xb,t.hasParent=zA,t.addEventListeners=Uf,t.removeEventListeners=Hf,t.defaults=Fc({},_oe,{preset:Xz}),t}();const koe=h2e("DELETE");function TTe(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return Coe({},t,...r)}function Coe(){const t=e0(...arguments);return joe(t),t}function e0(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(e.length<2)return e[0];if(e.length>2)return e0(Coe(e[0],e[1]),...b2e(e).call(e,2));const n=e[0],i=e[1];if(n instanceof Date&&i instanceof Date)return n.setTime(i.getTime()),n;for(const s of N2e(i))Object.prototype.propertyIsEnumerable.call(i,s)&&(i[s]===koe?delete n[s]:n[s]!==null&&i[s]!==null&&typeof n[s]=="object"&&typeof i[s]=="object"&&!Cs(n[s])&&!Cs(i[s])?n[s]=e0(n[s],i[s]):n[s]=Toe(i[s]));return n}function Toe(t){return Cs(t)?as(t).call(t,e=>Toe(e)):typeof t=="object"&&t!==null?t instanceof Date?new Date(t.getTime()):e0({},t):t}function joe(t){for(const e of qA(t))t[e]===koe?delete t[e]:typeof t[e]=="object"&&t[e]!==null&&joe(t[e])}function jTe(){const t=()=>{};return{on:t,off:t,destroy:t,emit:t,get(){return{set:t}}}}const OTe=typeof window<"u"?window.Hammer||CTe:function(){return jTe()};function go(t){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const r=OTe(this._dom.overlay);r.on("tap",Xse(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{r.destroy()});const n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];$c(n).call(n,i=>{r.on(i,s=>{s.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=i=>{PTe(i.target,t)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=i=>{("key"in i?i.key==="Escape":i.keyCode===27)&&this.deactivate()}}BCe(go.prototype);go.current=null;go.prototype.destroy=function(){this.deactivate();for(const r of Y2e(t=toe(e=this._cleanupQueue).call(e,0)).call(t)){var t,e;r()}};go.prototype.activate=function(){go.current&&go.current.deactivate(),go.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};go.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};go.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};function PTe(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}var tE,r8;function ITe(){if(r8)return tE;r8=1,Lse();var t=Mr();return tE=t.Object.getOwnPropertySymbols,tE}var rE,n8;function RTe(){if(n8)return rE;n8=1;var t=ITe();return rE=t,rE}var nE,i8;function MTe(){return i8||(i8=1,nE=RTe()),nE}var ATe=MTe(),s8=ot(ATe),iE={exports:{}},o8={},a8;function DTe(){if(a8)return o8;a8=1;var t=Ke(),e=St(),r=Ws(),n=cb().f,i=Nr(),s=!i||e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getOwnPropertyDescriptor:function(a,l){return n(r(a),l)}}),o8}var l8;function $Te(){if(l8)return iE.exports;l8=1,DTe();var t=Mr(),e=t.Object,r=iE.exports=function(i,s){return e.getOwnPropertyDescriptor(i,s)};return e.getOwnPropertyDescriptor.sham&&(r.sham=!0),iE.exports}var sE,c8;function FTe(){if(c8)return sE;c8=1;var t=$Te();return sE=t,sE}var oE,u8;function qTe(){return u8||(u8=1,oE=FTe()),oE}var LTe=qTe(),Ooe=ot(LTe),d8={},h8;function BTe(){if(h8)return d8;h8=1;var t=Ke(),e=Nr(),r=Zse(),n=Ws(),i=cb(),s=db();return t({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(a){for(var l=n(a),u=i.f,d=r(l),h={},f=0,p,m;d.length>f;)m=u(l,p=d[f++]),m!==void 0&&s(h,p,m);return h}}),d8}var aE,f8;function zTe(){if(f8)return aE;f8=1,BTe();var t=Mr();return aE=t.Object.getOwnPropertyDescriptors,aE}var lE,p8;function VTe(){if(p8)return lE;p8=1;var t=zTe();return lE=t,lE}var cE,m8;function WTe(){return m8||(m8=1,cE=VTe()),cE}var UTe=WTe(),g8=ot(UTe),uE={exports:{}},y8={},v8;function HTe(){if(v8)return y8;v8=1;var t=Ke(),e=Nr(),r=AA().f;return t({target:"Object",stat:!0,forced:Object.defineProperties!==r,sham:!e},{defineProperties:r}),y8}var b8;function KTe(){if(b8)return uE.exports;b8=1,HTe();var t=Mr(),e=t.Object,r=uE.exports=function(i,s){return e.defineProperties(i,s)};return e.defineProperties.sham&&(r.sham=!0),uE.exports}var dE,x8;function GTe(){if(x8)return dE;x8=1;var t=KTe();return dE=t,dE}var hE,w8;function YTe(){return w8||(w8=1,hE=GTe()),hE}var QTe=YTe(),XTe=ot(QTe),fE,S8;function JTe(){return S8||(S8=1,fE=Ose()),fE}var ZTe=JTe(),eje=ot(ZTe),_8={},E8={},pE={exports:{}},mE,N8;function tje(){if(N8)return mE;N8=1;var t=St();return mE=t(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),mE}var gE,k8;function rje(){if(k8)return gE;k8=1;var t=St(),e=qn(),r=Vo(),n=tje(),i=Object.isExtensible,s=t(function(){});return gE=s||n?function(a){return!e(a)||n&&r(a)==="ArrayBuffer"?!1:i?i(a):!0}:i,gE}var yE,C8;function nje(){if(C8)return yE;C8=1;var t=St();return yE=!t(function(){return Object.isExtensible(Object.preventExtensions({}))}),yE}var T8;function Poe(){if(T8)return pE.exports;T8=1;var t=Ke(),e=Ct(),r=Sm(),n=qn(),i=Ur(),s=Gi().f,o=pb(),a=Dse(),l=rje(),u=lb(),d=nje(),h=!1,f=u("meta"),p=0,m=function(x){s(x,f,{value:{objectID:"O"+p++,weakData:{}}})},g=function(x,S){if(!n(x))return typeof x=="symbol"?x:(typeof x=="string"?"S":"P")+x;if(!i(x,f)){if(!l(x))return"F";if(!S)return"E";m(x)}return x[f].objectID},v=function(x,S){if(!i(x,f)){if(!l(x))return!0;if(!S)return!1;m(x)}return x[f].weakData},y=function(x){return d&&h&&l(x)&&!i(x,f)&&m(x),x},b=function(){w.enable=function(){},h=!0;var x=o.f,S=e([].splice),_={};_[f]=1,x(_).length&&(o.f=function(E){for(var N=x(E),T=0,j=N.length;T<j;T++)if(N[T]===f){S(N,T,1);break}return N},t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:a.f}))},w=pE.exports={enable:b,fastKey:g,getWeakData:v,onFreeze:y};return r[f]=!0,pE.exports}var vE,j8;function ije(){if(j8)return vE;j8=1;var t=Hr(),e=kh(),r=t("iterator"),n=Array.prototype;return vE=function(i){return i!==void 0&&(e.Array===i||n[r]===i)},vE}var bE,O8;function Ioe(){if(O8)return bE;O8=1;var t=yl(),e=TA(),r=vm(),n=kh(),i=Hr(),s=i("iterator");return bE=function(o){if(!r(o))return e(o,s)||e(o,"@@iterator")||n[t(o)]},bE}var xE,P8;function Roe(){if(P8)return xE;P8=1;var t=si(),e=Wo(),r=Uo(),n=bh(),i=Ioe(),s=TypeError;return xE=function(o,a){var l=arguments.length<2?i(o):a;if(e(l))return r(t(l,o));throw new s(n(o)+" is not iterable")},xE}var wE,I8;function KA(){if(I8)return wE;I8=1;var t=si(),e=Uo(),r=TA();return wE=function(n,i,s){var o,a;e(n);try{if(o=r(n,"return"),!o){if(i==="throw")throw s;return s}o=t(o,n)}catch(l){a=!0,o=l}if(i==="throw")throw s;if(a)throw o;return e(o),s},wE}var SE,R8;function GA(){if(R8)return SE;R8=1;var t=ub(),e=si(),r=Uo(),n=bh(),i=ije(),s=gl(),o=Wr(),a=Roe(),l=Ioe(),u=KA(),d=TypeError,h=function(p,m){this.stopped=p,this.result=m},f=h.prototype;return SE=function(p,m,g){var v=g&&g.that,y=!!(g&&g.AS_ENTRIES),b=!!(g&&g.IS_RECORD),w=!!(g&&g.IS_ITERATOR),x=!!(g&&g.INTERRUPTED),S=t(m,v),_,E,N,T,j,P,O,C=function(F){return _&&u(_,"normal"),new h(!0,F)},D=function(F){return y?(r(F),x?S(F[0],F[1],C):S(F[0],F[1])):x?S(F,C):S(F)};if(b)_=p.iterator;else if(w)_=p;else{if(E=l(p),!E)throw new d(n(p)+" is not iterable");if(i(E)){for(N=0,T=s(p);T>N;N++)if(j=D(p[N]),j&&o(f,j))return j;return new h(!1)}_=a(p,E)}for(P=b?p.next:_.next;!(O=e(P,_)).done;){try{j=D(O.value)}catch(F){u(_,"throw",F)}if(typeof j=="object"&&j&&o(f,j))return j}return new h(!1)},SE}var _E,M8;function Moe(){if(M8)return _E;M8=1;var t=Wr(),e=TypeError;return _E=function(r,n){if(t(n,r))return r;throw new e("Incorrect invocation")},_E}var EE,A8;function Aoe(){if(A8)return EE;A8=1;var t=Ke(),e=Er(),r=Poe(),n=St(),i=Sh(),s=GA(),o=Moe(),a=Vr(),l=qn(),u=vm(),d=eu(),h=Gi().f,f=Nh().forEach,p=Nr(),m=Nm(),g=m.set,v=m.getterFor;return EE=function(y,b,w){var x=y.indexOf("Map")!==-1,S=y.indexOf("Weak")!==-1,_=x?"set":"add",E=e[y],N=E&&E.prototype,T={},j;if(!p||!a(E)||!(S||N.forEach&&!n(function(){new E().entries().next()})))j=w.getConstructor(b,y,x,_),r.enable();else{j=b(function(C,D){g(o(C,P),{type:y,collection:new E}),u(D)||s(D,C[_],{that:C,AS_ENTRIES:x})});var P=j.prototype,O=v(y);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(C){var D=C==="add"||C==="set";C in N&&!(S&&C==="clear")&&i(P,C,function(F,$){var L=O(this).collection;if(!D&&S&&!l(F))return C==="get"?void 0:!1;var M=L[C](F===0?0:F,$);return D?this:M})}),S||h(P,"size",{configurable:!0,get:function(){return O(this).collection.size}})}return d(j,y,!1,!0),T[y]=j,t({global:!0,forced:!0},T),S||w.setStrong(j,y,x),j},EE}var NE,D8;function sje(){if(D8)return NE;D8=1;var t=Em();return NE=function(e,r,n){for(var i in r)n&&n.unsafe&&e[i]?e[i]=r[i]:t(e,i,r[i],n);return e},NE}var kE,$8;function oje(){if($8)return kE;$8=1;var t=Si(),e=DA(),r=Hr(),n=Nr(),i=r("species");return kE=function(s){var o=t(s);n&&o&&!o[i]&&e(o,i,{configurable:!0,get:function(){return this}})},kE}var CE,F8;function Doe(){if(F8)return CE;F8=1;var t=_m(),e=DA(),r=sje(),n=ub(),i=Moe(),s=vm(),o=GA(),a=$A(),l=FA(),u=oje(),d=Nr(),h=Poe().fastKey,f=Nm(),p=f.set,m=f.getterFor;return CE={getConstructor:function(g,v,y,b){var w=g(function(N,T){i(N,x),p(N,{type:v,index:t(null),first:null,last:null,size:0}),d||(N.size=0),s(T)||o(T,N[b],{that:N,AS_ENTRIES:y})}),x=w.prototype,S=m(v),_=function(N,T,j){var P=S(N),O=E(N,T),C,D;return O?O.value=j:(P.last=O={index:D=h(T,!0),key:T,value:j,previous:C=P.last,next:null,removed:!1},P.first||(P.first=O),C&&(C.next=O),d?P.size++:N.size++,D!=="F"&&(P.index[D]=O)),N},E=function(N,T){var j=S(N),P=h(T),O;if(P!=="F")return j.index[P];for(O=j.first;O;O=O.next)if(O.key===T)return O};return r(x,{clear:function(){for(var T=this,j=S(T),P=j.first;P;)P.removed=!0,P.previous&&(P.previous=P.previous.next=null),P=P.next;j.first=j.last=null,j.index=t(null),d?j.size=0:T.size=0},delete:function(N){var T=this,j=S(T),P=E(T,N);if(P){var O=P.next,C=P.previous;delete j.index[P.index],P.removed=!0,C&&(C.next=O),O&&(O.previous=C),j.first===P&&(j.first=O),j.last===P&&(j.last=C),d?j.size--:T.size--}return!!P},forEach:function(T){for(var j=S(this),P=n(T,arguments.length>1?arguments[1]:void 0),O;O=O?O.next:j.first;)for(P(O.value,O.key,this);O&&O.removed;)O=O.previous},has:function(T){return!!E(this,T)}}),r(x,y?{get:function(T){var j=E(this,T);return j&&j.value},set:function(T,j){return _(this,T===0?0:T,j)}}:{add:function(T){return _(this,T=T===0?0:T,T)}}),d&&e(x,"size",{configurable:!0,get:function(){return S(this).size}}),w},setStrong:function(g,v,y){var b=v+" Iterator",w=m(v),x=m(b);a(g,v,function(S,_){p(this,{type:b,target:S,state:w(S),kind:_,last:null})},function(){for(var S=x(this),_=S.kind,E=S.last;E&&E.removed;)E=E.previous;return!S.target||!(S.last=E=E?E.next:S.state.first)?(S.target=null,l(void 0,!0)):l(_==="keys"?E.key:_==="values"?E.value:[E.key,E.value],!1)},y?"entries":"values",!y,!0),u(v)}},CE}var q8;function aje(){if(q8)return E8;q8=1;var t=Aoe(),e=Doe();return t("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),E8}var L8;function lje(){return L8||(L8=1,aje()),_8}var B8={},TE,z8;function $oe(){return z8||(z8=1,TE=function(t,e){return e===1?function(r,n){return r[t](n)}:function(r,n,i){return r[t](n,i)}}),TE}var jE,V8;function cje(){if(V8)return jE;V8=1;var t=Si(),e=$oe(),r=t("Map");return jE={Map:r,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:r.prototype},jE}var W8;function uje(){if(W8)return B8;W8=1;var t=Ke(),e=Ct(),r=Wo(),n=Jc(),i=GA(),s=cje(),o=xh(),a=St(),l=s.Map,u=s.has,d=s.get,h=s.set,f=e([].push),p=o||a(function(){return l.groupBy("ab",function(m){return m}).get("a").length!==1});return t({target:"Map",stat:!0,forced:o||p},{groupBy:function(g,v){n(g),r(v);var y=new l,b=0;return i(g,function(w){var x=v(w,b++);u(y,x)?f(d(y,x),w):h(y,x,[w])}),y}}),B8}var OE,U8;function dje(){if(U8)return OE;U8=1,bl(),lje(),uje(),yb();var t=Mr();return OE=t.Map,OE}var PE,H8;function hje(){if(H8)return PE;H8=1;var t=dje();return xl(),PE=t,PE}var IE,K8;function fje(){return K8||(K8=1,IE=hje()),IE}var pje=fje(),Foe=ot(pje),G8={},Y8;function mje(){if(Y8)return G8;Y8=1;var t=Ke(),e=Nh().some,r=vb(),n=r("some");return t({target:"Array",proto:!0,forced:!n},{some:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),G8}var RE,Q8;function gje(){if(Q8)return RE;Q8=1,mje();var t=oi();return RE=t("Array","some"),RE}var ME,X8;function yje(){if(X8)return ME;X8=1;var t=Wr(),e=gje(),r=Array.prototype;return ME=function(n){var i=n.some;return n===r||t(r,n)&&i===r.some?e:i},ME}var AE,J8;function vje(){if(J8)return AE;J8=1;var t=yje();return AE=t,AE}var DE,Z8;function bje(){return Z8||(Z8=1,DE=vje()),DE}var xje=bje(),wje=ot(xje),$E,e7;function Sje(){if(e7)return $E;e7=1,bl();var t=oi();return $E=t("Array","keys"),$E}var FE,t7;function _je(){if(t7)return FE;t7=1;var t=Sje();return FE=t,FE}var qE,r7;function Eje(){if(r7)return qE;r7=1,xl();var t=yl(),e=Ur(),r=Wr(),n=_je(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return qE=function(o){var a=o.keys;return o===i||r(i,o)&&a===i.keys||e(s,t(o))?n:a},qE}var LE,n7;function Nje(){return n7||(n7=1,LE=Eje()),LE}var kje=Nje(),Tu=ot(kje),i7={},BE,s7;function Cje(){if(s7)return BE;s7=1;var t=Eh(),e=Math.floor,r=function(n,i){var s=n.length;if(s<8)for(var o=1,a,l;o<s;){for(l=o,a=n[o];l&&i(n[l-1],a)>0;)n[l]=n[--l];l!==o++&&(n[l]=a)}else for(var u=e(s/2),d=r(t(n,0,u),i),h=r(t(n,u),i),f=d.length,p=h.length,m=0,g=0;m<f||g<p;)n[m+g]=m<f&&g<p?i(d[m],h[g])<=0?d[m++]:h[g++]:m<f?d[m++]:h[g++];return n};return BE=r,BE}var zE,o7;function Tje(){if(o7)return zE;o7=1;var t=yh(),e=t.match(/firefox\/(\d+)/i);return zE=!!e&&+e[1],zE}var VE,a7;function jje(){if(a7)return VE;a7=1;var t=yh();return VE=/MSIE|Trident/.test(t),VE}var WE,l7;function Oje(){if(l7)return WE;l7=1;var t=yh(),e=t.match(/AppleWebKit\/(\d+)\./);return WE=!!e&&+e[1],WE}var c7;function Pje(){if(c7)return i7;c7=1;var t=Ke(),e=Ct(),r=Wo(),n=vs(),i=gl(),s=eoe(),o=vl(),a=St(),l=Cje(),u=vb(),d=Tje(),h=jje(),f=bm(),p=Oje(),m=[],g=e(m.sort),v=e(m.push),y=a(function(){m.sort(void 0)}),b=a(function(){m.sort(null)}),w=u("sort"),x=!a(function(){if(f)return f<70;if(!(d&&d>3)){if(h)return!0;if(p)return p<603;var E="",N,T,j,P;for(N=65;N<76;N++){switch(T=String.fromCharCode(N),N){case 66:case 69:case 70:case 72:j=3;break;case 68:case 71:j=4;break;default:j=2}for(P=0;P<47;P++)m.push({k:T+P,v:j})}for(m.sort(function(O,C){return C.v-O.v}),P=0;P<m.length;P++)T=m[P].k.charAt(0),E.charAt(E.length-1)!==T&&(E+=T);return E!=="DGBEFHACIJK"}}),S=y||!b||!w||!x,_=function(E){return function(N,T){return T===void 0?-1:N===void 0?1:E!==void 0?+E(N,T)||0:o(N)>o(T)?1:-1}};return t({target:"Array",proto:!0,forced:S},{sort:function(N){N!==void 0&&r(N);var T=n(this);if(x)return N===void 0?g(T):g(T,N);var j=[],P=i(T),O,C;for(C=0;C<P;C++)C in T&&v(j,T[C]);for(l(j,_(N)),O=i(j),C=0;C<O;)T[C]=j[C++];for(;C<P;)s(T,C++);return T}}),i7}var UE,u7;function Ije(){if(u7)return UE;u7=1,Pje();var t=oi();return UE=t("Array","sort"),UE}var HE,d7;function Rje(){if(d7)return HE;d7=1;var t=Wr(),e=Ije(),r=Array.prototype;return HE=function(n){var i=n.sort;return n===r||t(r,n)&&i===r.sort?e:i},HE}var KE,h7;function Mje(){if(h7)return KE;h7=1;var t=Rje();return KE=t,KE}var GE,f7;function Aje(){return f7||(f7=1,GE=Mje()),GE}var Dje=Aje(),tR=ot(Dje),YE,p7;function $je(){if(p7)return YE;p7=1,bl();var t=oi();return YE=t("Array","values"),YE}var QE,m7;function Fje(){if(m7)return QE;m7=1;var t=$je();return QE=t,QE}var XE,g7;function qje(){if(g7)return XE;g7=1,xl();var t=yl(),e=Ur(),r=Wr(),n=Fje(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return XE=function(o){var a=o.values;return o===i||r(i,o)&&a===i.values||e(s,t(o))?n:a},XE}var JE,y7;function Lje(){return y7||(y7=1,JE=qje()),JE}var Bje=Lje(),v7=ot(Bje),ZE,b7;function zje(){return b7||(b7=1,ZE=Qse()),ZE}var Vje=zje(),Zu=ot(Vje),eN,x7;function Wje(){if(x7)return eN;x7=1,bl();var t=oi();return eN=t("Array","entries"),eN}var tN,w7;function Uje(){if(w7)return tN;w7=1;var t=Wje();return tN=t,tN}var rN,S7;function Hje(){if(S7)return rN;S7=1,xl();var t=yl(),e=Ur(),r=Wr(),n=Uje(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return rN=function(o){var a=o.entries;return o===i||r(i,o)&&a===i.entries||e(s,t(o))?n:a},rN}var nN,_7;function Kje(){return _7||(_7=1,nN=Hje()),nN}var Gje=Kje(),Yje=ot(Gje);const Qr=[];for(let t=0;t<256;++t)Qr.push((t+256).toString(16).slice(1));function Qje(t,e=0){return(Qr[t[e+0]]+Qr[t[e+1]]+Qr[t[e+2]]+Qr[t[e+3]]+"-"+Qr[t[e+4]]+Qr[t[e+5]]+"-"+Qr[t[e+6]]+Qr[t[e+7]]+"-"+Qr[t[e+8]]+Qr[t[e+9]]+"-"+Qr[t[e+10]]+Qr[t[e+11]]+Qr[t[e+12]]+Qr[t[e+13]]+Qr[t[e+14]]+Qr[t[e+15]]).toLowerCase()}let iN;const Xje=new Uint8Array(16);function Jje(){if(!iN){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");iN=crypto.getRandomValues.bind(crypto)}return iN(Xje)}const Zje=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var E7={randomUUID:Zje};function eOe(t,e,r){var i;t=t||{};const n=t.random??((i=t.rng)==null?void 0:i.call(t))??Jje();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,Qje(n)}function tOe(t,e,r){return E7.randomUUID&&!t?E7.randomUUID():eOe(t)}function N7(t){return typeof t=="string"||typeof t=="number"}class YA{constructor(e){Ya(this,"_queue",[]),Ya(this,"_timeout",null),Ya(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(e)}setOptions(e){e&&typeof e.delay<"u"&&(this.delay=e.delay),e&&typeof e.max<"u"&&(this.max=e.max),this._flushIfNeeded()}static extend(e,r){const n=new YA(r);if(e.flush!==void 0)throw new Error("Target object already has a property flush");e.flush=()=>{n.flush()};const i=[{name:"flush",original:void 0}];if(r&&r.replace)for(let s=0;s<r.replace.length;s++){const o=r.replace[s];i.push({name:o,original:e[o]}),n.replace(e,o)}return n._extended={object:e,methods:i},n}destroy(){if(this.flush(),this._extended){const e=this._extended.object,r=this._extended.methods;for(let n=0;n<r.length;n++){const i=r[n];i.original?e[i.name]=i.original:delete e[i.name]}this._extended=null}}replace(e,r){const n=this,i=e[r];if(!i)throw new Error("Method "+r+" undefined");e[r]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];n.queue({args:o,fn:i,context:this})}}queue(e){typeof e=="function"?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()}_flushIfNeeded(){this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=FCe(()=>{this.flush()},this.delay))}flush(){var e,r;$c(e=toe(r=this._queue).call(r,0)).call(e,n=>{n.fn.apply(n.context||n.fn,n.args||[])})}}class t0{constructor(){Ya(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),Ya(this,"subscribe",t0.prototype.on),Ya(this,"unsubscribe",t0.prototype.off)}_trigger(e,r,n){var i;if(e==="*")throw new Error("Cannot trigger event *");$c(i=[...this._subscribers[e],...this._subscribers["*"]]).call(i,s=>{s(e,r,n??null)})}on(e,r){typeof r=="function"&&this._subscribers[e].push(r)}off(e,r){var n;this._subscribers[e]=Qu(n=this._subscribers[e]).call(n,i=>i!==r)}}var k7={},C7={},T7;function rOe(){if(T7)return C7;T7=1;var t=Aoe(),e=Doe();return t("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),C7}var j7;function nOe(){return j7||(j7=1,rOe()),k7}var O7={},sN,P7;function ru(){if(P7)return sN;P7=1;var t=bh(),e=TypeError;return sN=function(r){if(typeof r=="object"&&"size"in r&&"has"in r&&"add"in r&&"delete"in r&&"keys"in r)return r;throw new e(t(r)+" is not a set")},sN}var oN,I7;function nu(){if(I7)return oN;I7=1;var t=Si(),e=$oe(),r=t("Set"),n=r.prototype;return oN={Set:r,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:n},oN}var aN,R7;function iu(){if(R7)return aN;R7=1;var t=si();return aN=function(e,r,n){for(var i=n?e:e.iterator,s=e.next,o,a;!(o=t(s,i)).done;)if(a=r(o.value),a!==void 0)return a},aN}var lN,M7;function Pm(){if(M7)return lN;M7=1;var t=iu();return lN=function(e,r,n){return n?t(e.keys(),r,!0):e.forEach(r)},lN}var cN,A7;function QA(){if(A7)return cN;A7=1;var t=nu(),e=Pm(),r=t.Set,n=t.add;return cN=function(i){var s=new r;return e(i,function(o){n(s,o)}),s},cN}var uN,D7;function Im(){return D7||(D7=1,uN=function(t){return t.size}),uN}var dN,$7;function iOe(){return $7||($7=1,dN=function(t){return{iterator:t,next:t.next,done:!1}}),dN}var hN,F7;function su(){if(F7)return hN;F7=1;var t=Wo(),e=Uo(),r=si(),n=_h(),i=iOe(),s="Invalid size",o=RangeError,a=TypeError,l=Math.max,u=function(d,h){this.set=d,this.size=l(h,0),this.has=t(d.has),this.keys=t(d.keys)};return u.prototype={getIterator:function(){return i(e(r(this.keys,this.set)))},includes:function(d){return r(this.has,this.set,d)}},hN=function(d){e(d);var h=+d.size;if(h!==h)throw new a(s);var f=n(h);if(f<0)throw new o(s);return new u(d,f)},hN}var fN,q7;function sOe(){if(q7)return fN;q7=1;var t=ru(),e=nu(),r=QA(),n=Im(),i=su(),s=Pm(),o=iu(),a=e.has,l=e.remove;return fN=function(d){var h=t(this),f=i(d),p=r(h);return n(h)<=f.size?s(h,function(m){f.includes(m)&&l(p,m)}):o(f.getIterator(),function(m){a(p,m)&&l(p,m)}),p},fN}var pN,L7;function ou(){return L7||(L7=1,pN=function(){return!1}),pN}var B7;function oOe(){if(B7)return O7;B7=1;var t=Ke(),e=sOe(),r=St(),n=ou(),i=!n("difference",function(o){return o.size===0}),s=i||r(function(){var o={size:1,has:function(){return!0},keys:function(){var l=0;return{next:function(){var u=l++>1;return a.has(1)&&a.clear(),{done:u,value:2}}}}},a=new Set([1,2,3,4]);return a.difference(o).size!==3});return t({target:"Set",proto:!0,real:!0,forced:s},{difference:e}),O7}var z7={},mN,V7;function aOe(){if(V7)return mN;V7=1;var t=ru(),e=nu(),r=Im(),n=su(),i=Pm(),s=iu(),o=e.Set,a=e.add,l=e.has;return mN=function(d){var h=t(this),f=n(d),p=new o;return r(h)>f.size?s(f.getIterator(),function(m){l(h,m)&&a(p,m)}):i(h,function(m){f.includes(m)&&a(p,m)}),p},mN}var W7;function lOe(){if(W7)return z7;W7=1;var t=Ke(),e=St(),r=aOe(),n=ou(),i=!n("intersection",function(s){return s.size===2&&s.has(1)&&s.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return t({target:"Set",proto:!0,real:!0,forced:i},{intersection:r}),z7}var U7={},gN,H7;function cOe(){if(H7)return gN;H7=1;var t=ru(),e=nu().has,r=Im(),n=su(),i=Pm(),s=iu(),o=KA();return gN=function(l){var u=t(this),d=n(l);if(r(u)<=d.size)return i(u,function(f){if(d.includes(f))return!1},!0)!==!1;var h=d.getIterator();return s(h,function(f){if(e(u,f))return o(h,"normal",!1)})!==!1},gN}var K7;function uOe(){if(K7)return U7;K7=1;var t=Ke(),e=cOe(),r=ou(),n=!r("isDisjointFrom",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:e}),U7}var G7={},yN,Y7;function dOe(){if(Y7)return yN;Y7=1;var t=ru(),e=Im(),r=Pm(),n=su();return yN=function(s){var o=t(this),a=n(s);return e(o)>a.size?!1:r(o,function(l){if(!a.includes(l))return!1},!0)!==!1},yN}var Q7;function hOe(){if(Q7)return G7;Q7=1;var t=Ke(),e=dOe(),r=ou(),n=!r("isSubsetOf",function(i){return i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:e}),G7}var X7={},vN,J7;function fOe(){if(J7)return vN;J7=1;var t=ru(),e=nu().has,r=Im(),n=su(),i=iu(),s=KA();return vN=function(a){var l=t(this),u=n(a);if(r(l)<u.size)return!1;var d=u.getIterator();return i(d,function(h){if(!e(l,h))return s(d,"normal",!1)})!==!1},vN}var Z7;function pOe(){if(Z7)return X7;Z7=1;var t=Ke(),e=fOe(),r=ou(),n=!r("isSupersetOf",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:e}),X7}var eV={},bN,tV;function mOe(){if(tV)return bN;tV=1;var t=ru(),e=nu(),r=QA(),n=su(),i=iu(),s=e.add,o=e.has,a=e.remove;return bN=function(u){var d=t(this),h=n(u).getIterator(),f=r(d);return i(h,function(p){o(d,p)?a(f,p):s(f,p)}),f},bN}var xN,rV;function qoe(){return rV||(rV=1,xN=function(t){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[t](r);return n.size===1&&n.values().next().value===4}catch{return!1}}),xN}var nV;function gOe(){if(nV)return eV;nV=1;var t=Ke(),e=mOe(),r=qoe(),n=ou(),i=!n("symmetricDifference")||!r("symmetricDifference");return t({target:"Set",proto:!0,real:!0,forced:i},{symmetricDifference:e}),eV}var iV={},wN,sV;function yOe(){if(sV)return wN;sV=1;var t=ru(),e=nu().add,r=QA(),n=su(),i=iu();return wN=function(o){var a=t(this),l=n(o).getIterator(),u=r(a);return i(l,function(d){e(u,d)}),u},wN}var oV;function vOe(){if(oV)return iV;oV=1;var t=Ke(),e=yOe(),r=qoe(),n=ou(),i=!n("union")||!r("union");return t({target:"Set",proto:!0,real:!0,forced:i},{union:e}),iV}var SN,aV;function bOe(){if(aV)return SN;aV=1,bl(),nOe(),oOe(),lOe(),uOe(),hOe(),pOe(),gOe(),vOe(),yb();var t=Mr();return SN=t.Set,SN}var _N,lV;function xOe(){if(lV)return _N;lV=1;var t=bOe();return xl(),_N=t,_N}var EN,cV;function wOe(){return cV||(cV=1,EN=xOe()),EN}var SOe=wOe(),NN=ot(SOe),kN,uV;function _Oe(){if(uV)return kN;uV=1,bl(),yb();var t=Roe();return kN=t,kN}var CN,dV;function EOe(){if(dV)return CN;dV=1;var t=_Oe();return xl(),CN=t,CN}var TN,hV;function NOe(){if(hV)return TN;hV=1;var t=EOe();return TN=t,TN}var jN,fV;function kOe(){if(fV)return jN;fV=1;var t=NOe();return jN=t,jN}var ON,pV;function COe(){return pV||(pV=1,ON=kOe()),ON}var PN,mV;function TOe(){return mV||(mV=1,PN=COe()),PN}var jOe=TOe(),IN=ot(jOe);class Gl{constructor(e){this._pairs=e}*[Zu](){for(const[e,r]of this._pairs)yield[e,r]}*entries(){for(const[e,r]of this._pairs)yield[e,r]}*keys(){for(const[e]of this._pairs)yield e}*values(){for(const[,e]of this._pairs)yield e}toIdArray(){var e;return as(e=[...this._pairs]).call(e,r=>r[0])}toItemArray(){var e;return as(e=[...this._pairs]).call(e,r=>r[1])}toEntryArray(){return[...this._pairs]}toObjectMap(){const e=wCe(null);for(const[r,n]of this._pairs)e[r]=n;return e}toMap(){return new Foe(this._pairs)}toIdSet(){return new NN(this.toIdArray())}toItemSet(){return new NN(this.toItemArray())}cache(){return new Gl([...this._pairs])}distinct(e){const r=new NN;for(const[n,i]of this._pairs)r.add(e(i,n));return r}filter(e){const r=this._pairs;return new Gl({*[Zu](){for(const[n,i]of r)e(i,n)&&(yield[n,i])}})}forEach(e){for(const[r,n]of this._pairs)e(n,r)}map(e){const r=this._pairs;return new Gl({*[Zu](){for(const[n,i]of r)yield[n,e(i,n)]}})}max(e){const r=IN(this._pairs);let n=r.next();if(n.done)return null;let i=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=r.next()).done;){const[o,a]=n.value,l=e(a,o);l>s&&(s=l,i=a)}return i}min(e){const r=IN(this._pairs);let n=r.next();if(n.done)return null;let i=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=r.next()).done;){const[o,a]=n.value,l=e(a,o);l<s&&(s=l,i=a)}return i}reduce(e,r){for(const[n,i]of this._pairs)r=e(r,i,n);return r}sort(e){return new Gl({[Zu]:()=>{var r;return IN(tR(r=[...this._pairs]).call(r,(n,i)=>{let[s,o]=n,[a,l]=i;return e(o,l,s,a)}))}})}}function gV(t,e){var r=qA(t);if(s8){var n=s8(t);e&&(n=Qu(n).call(n,function(i){return Ooe(t,i).enumerable})),r.push.apply(r,n)}return r}function yV(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?$c(r=gV(Object(i),!0)).call(r,function(s){Ya(t,s,i[s])}):g8?XTe(t,g8(i)):$c(n=gV(Object(i))).call(n,function(s){eje(t,s,Ooe(i,s))})}return t}function OOe(t,e){return t[e]==null&&(t[e]=tOe()),t}class eh extends t0{get idProp(){return this._idProp}constructor(e,r){super(),Ya(this,"_queue",null),e&&!Cs(e)&&(r=e,e=[]),this._options=r||{},this._data=new Foe,this.length=0,this._idProp=this._options.fieldId||"id",e&&e.length&&this.add(e),this.setOptions(r)}setOptions(e){e&&e.queue!==void 0&&(e.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=YA.extend(this,{replace:["add","update","remove"]})),e.queue&&typeof e.queue=="object"&&this._queue.setOptions(e.queue)))}add(e,r){const n=[];let i;if(Cs(e)){const s=as(e).call(e,o=>o[this._idProp]);if(wje(s).call(s,o=>this._data.has(o)))throw new Error("A duplicate id was found in the parameter array.");for(let o=0,a=e.length;o<a;o++)i=this._addItem(e[o]),n.push(i)}else if(e&&typeof e=="object")i=this._addItem(e),n.push(i);else throw new Error("Unknown dataType");return n.length&&this._trigger("add",{items:n},r),n}update(e,r){const n=[],i=[],s=[],o=[],a=this._idProp,l=u=>{const d=u[a];if(d!=null&&this._data.has(d)){const h=u,f=cCe({},this._data.get(d)),p=this._updateItem(h);i.push(p),o.push(h),s.push(f)}else{const h=this._addItem(u);n.push(h)}};if(Cs(e))for(let u=0,d=e.length;u<d;u++)e[u]&&typeof e[u]=="object"?l(e[u]):console.warn("Ignoring input item, which is not an object at index "+u);else if(e&&typeof e=="object")l(e);else throw new Error("Unknown dataType");if(n.length&&this._trigger("add",{items:n},r),i.length){const u={items:i,oldData:s,data:o};this._trigger("update",u,r)}return mCe(n).call(n,i)}updateOnly(e,r){var n;Cs(e)||(e=[e]);const i=as(n=as(e).call(e,s=>{const o=this._data.get(s[this._idProp]);if(o==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:o,update:s}})).call(n,s=>{let{oldData:o,update:a}=s;const l=o[this._idProp],u=TTe(o,a);return this._data.set(l,u),{id:l,oldData:o,updatedData:u}});if(i.length){const s={items:as(i).call(i,o=>o.id),oldData:as(i).call(i,o=>o.oldData),data:as(i).call(i,o=>o.updatedData)};return this._trigger("update",s,r),s.items}else return[]}get(e,r){let n,i,s;N7(e)?(n=e,s=r):Cs(e)?(i=e,s=r):s=e;const o=s&&s.returnType==="Object"?"Object":"Array",a=s&&Qu(s),l=[];let u,d,h;if(n!=null)u=this._data.get(n),u&&a&&!a(u)&&(u=void 0);else if(i!=null)for(let p=0,m=i.length;p<m;p++)u=this._data.get(i[p]),u!=null&&(!a||a(u))&&l.push(u);else{var f;d=[...Tu(f=this._data).call(f)];for(let p=0,m=d.length;p<m;p++)h=d[p],u=this._data.get(h),u!=null&&(!a||a(u))&&l.push(u)}if(s&&s.order&&n==null&&this._sort(l,s.order),s&&s.fields){const p=s.fields;if(n!=null&&u!=null)u=this._filterFields(u,p);else for(let m=0,g=l.length;m<g;m++)l[m]=this._filterFields(l[m],p)}if(o=="Object"){const p={};for(let m=0,g=l.length;m<g;m++){const v=l[m],y=v[this._idProp];p[y]=v}return p}else return n!=null?u??null:l}getIds(e){const r=this._data,n=e&&Qu(e),i=e&&e.order,s=[...Tu(r).call(r)],o=[];if(n)if(i){const a=[];for(let l=0,u=s.length;l<u;l++){const d=s[l],h=this._data.get(d);h!=null&&n(h)&&a.push(h)}this._sort(a,i);for(let l=0,u=a.length;l<u;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const u=s[a],d=this._data.get(u);d!=null&&n(d)&&o.push(d[this._idProp])}else if(i){const a=[];for(let l=0,u=s.length;l<u;l++){const d=s[l];a.push(r.get(d))}this._sort(a,i);for(let l=0,u=a.length;l<u;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const u=s[a],d=r.get(u);d!=null&&o.push(d[this._idProp])}return o}getDataSet(){return this}forEach(e,r){const n=r&&Qu(r),i=this._data,s=[...Tu(i).call(i)];if(r&&r.order){const o=this.get(r);for(let a=0,l=o.length;a<l;a++){const u=o[a],d=u[this._idProp];e(u,d)}}else for(let o=0,a=s.length;o<a;o++){const l=s[o],u=this._data.get(l);u!=null&&(!n||n(u))&&e(u,l)}}map(e,r){const n=r&&Qu(r),i=[],s=this._data,o=[...Tu(s).call(s)];for(let a=0,l=o.length;a<l;a++){const u=o[a],d=this._data.get(u);d!=null&&(!n||n(d))&&i.push(e(d,u))}return r&&r.order&&this._sort(i,r.order),i}_filterFields(e,r){var n;return e&&Xke(n=Cs(r)?r:qA(r)).call(n,(i,s)=>(i[s]=e[s],i),{})}_sort(e,r){if(typeof r=="string"){const n=r;tR(e).call(e,(i,s)=>{const o=i[n],a=s[n];return o>a?1:o<a?-1:0})}else if(typeof r=="function")tR(e).call(e,r);else throw new TypeError("Order must be a function or a string")}remove(e,r){const n=[],i=[],s=Cs(e)?e:[e];for(let o=0,a=s.length;o<a;o++){const l=this._remove(s[o]);if(l){const u=l[this._idProp];u!=null&&(n.push(u),i.push(l))}}return n.length&&this._trigger("remove",{items:n,oldData:i},r),n}_remove(e){let r;if(N7(e)?r=e:e&&typeof e=="object"&&(r=e[this._idProp]),r!=null&&this._data.has(r)){const n=this._data.get(r)||null;return this._data.delete(r),--this.length,n}return null}clear(e){var r;const n=[...Tu(r=this._data).call(r)],i=[];for(let s=0,o=n.length;s<o;s++)i.push(this._data.get(n[s]));return this._data.clear(),this.length=0,this._trigger("remove",{items:n,oldData:i},e),n}max(e){let r=null,n=null;for(const s of v7(i=this._data).call(i)){var i;const o=s[e];typeof o=="number"&&(n==null||o>n)&&(r=s,n=o)}return r||null}min(e){let r=null,n=null;for(const s of v7(i=this._data).call(i)){var i;const o=s[e];typeof o=="number"&&(n==null||o<n)&&(r=s,n=o)}return r||null}distinct(e){const r=this._data,n=[...Tu(r).call(r)],i=[];let s=0;for(let o=0,a=n.length;o<a;o++){const l=n[o],d=r.get(l)[e];let h=!1;for(let f=0;f<s;f++)if(i[f]==d){h=!0;break}!h&&d!==void 0&&(i[s]=d,s++)}return i}_addItem(e){const r=OOe(e,this._idProp),n=r[this._idProp];if(this._data.has(n))throw new Error("Cannot add item: item with id "+n+" already exists");return this._data.set(n,r),++this.length,n}_updateItem(e){const r=e[this._idProp];if(r==null)throw new Error("Cannot update item: item has no id (item: "+OCe(e)+")");const n=this._data.get(r);if(!n)throw new Error("Cannot update item: no item with id "+r+" found");return this._data.set(r,yV(yV({},n),e)),r}stream(e){if(e){const n=this._data;return new Gl({*[Zu](){for(const i of e){const s=n.get(i);s!=null&&(yield[i,s])}}})}else{var r;return new Gl({[Zu]:Xse(r=Yje(this._data)).call(r,this._data)})}}}function POe(t,e){return typeof e=="object"&&e!==null&&t===e.idProp&&typeof e.add=="function"&&typeof e.clear=="function"&&typeof e.distinct=="function"&&typeof $c(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof as(e)=="function"&&typeof e.max=="function"&&typeof e.min=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.remove=="function"&&typeof e.setOptions=="function"&&typeof e.stream=="function"&&typeof e.update=="function"&&typeof e.updateOnly=="function"}function Loe(t,e){return typeof e=="object"&&e!==null&&t===e.idProp&&typeof $c(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof as(e)=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.stream=="function"&&POe(t,e.getDataSet())}/**
 * vis-network
 * https://visjs.github.io/vis-network/
 *
 * A dynamic, browser-based visualization library.
 *
 * @version 10.0.2
 * @date    2025-09-15T17:48:13.838Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var vV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ve(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bV={},hf,xV;function zt(){if(xV)return hf;xV=1;var t=function(e){return e&&e.Math===Math&&e};return hf=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof vV=="object"&&vV)||t(typeof hf=="object"&&hf)||function(){return this}()||Function("return this")(),hf}var RN,wV;function at(){return wV||(wV=1,RN=function(t){try{return!!t()}catch{return!0}}),RN}var MN,SV;function Rm(){if(SV)return MN;SV=1;var t=at();return MN=!t(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),MN}var AN,_V;function wb(){if(_V)return AN;_V=1;var t=Rm(),e=Function.prototype,r=e.apply,n=e.call;return AN=typeof Reflect=="object"&&Reflect.apply||(t?n.bind(r):function(){return n.apply(r,arguments)}),AN}var DN,EV;function ct(){if(EV)return DN;EV=1;var t=Rm(),e=Function.prototype,r=e.call,n=t&&e.bind.bind(r,r);return DN=t?n:function(i){return function(){return r.apply(i,arguments)}},DN}var $N,NV;function Us(){if(NV)return $N;NV=1;var t=ct(),e=t({}.toString),r=t("".slice);return $N=function(n){return r(e(n),8,-1)},$N}var FN,kV;function XA(){if(kV)return FN;kV=1;var t=Us(),e=ct();return FN=function(r){if(t(r)==="Function")return e(r)},FN}var qN,CV;function Kr(){if(CV)return qN;CV=1;var t=typeof document=="object"&&document.all;return qN=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"},qN}var LN={},BN,TV;function mr(){if(TV)return BN;TV=1;var t=at();return BN=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),BN}var zN,jV;function ai(){if(jV)return zN;jV=1;var t=Rm(),e=Function.prototype.call;return zN=t?e.bind(e):function(){return e.apply(e,arguments)},zN}var VN={},OV;function Sb(){if(OV)return VN;OV=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,r=e&&!t.call({1:2},1);return VN.f=r?function(i){var s=e(this,i);return!!s&&s.enumerable}:t,VN}var WN,PV;function Mm(){return PV||(PV=1,WN=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}),WN}var UN,IV;function _b(){if(IV)return UN;IV=1;var t=ct(),e=at(),r=Us(),n=Object,i=t("".split);return UN=e(function(){return!n("z").propertyIsEnumerable(0)})?function(s){return r(s)==="String"?i(s,""):n(s)}:n,UN}var HN,RV;function Th(){return RV||(RV=1,HN=function(t){return t==null}),HN}var KN,MV;function Ho(){if(MV)return KN;MV=1;var t=Th(),e=TypeError;return KN=function(r){if(t(r))throw new e("Can't call method on "+r);return r},KN}var GN,AV;function bs(){if(AV)return GN;AV=1;var t=_b(),e=Ho();return GN=function(r){return t(e(r))},GN}var YN,DV;function Gr(){if(DV)return YN;DV=1;var t=Kr();return YN=function(e){return typeof e=="object"?e!==null:t(e)},YN}var QN,$V;function _t(){return $V||($V=1,QN={}),QN}var XN,FV;function _i(){if(FV)return XN;FV=1;var t=_t(),e=zt(),r=Kr(),n=function(i){return r(i)?i:void 0};return XN=function(i,s){return arguments.length<2?n(t[i])||n(e[i]):t[i]&&t[i][s]||e[i]&&e[i][s]},XN}var JN,qV;function kr(){if(qV)return JN;qV=1;var t=ct();return JN=t({}.isPrototypeOf),JN}var ZN,LV;function jh(){if(LV)return ZN;LV=1;var t=zt(),e=t.navigator,r=e&&e.userAgent;return ZN=r?String(r):"",ZN}var ek,BV;function Am(){if(BV)return ek;BV=1;var t=zt(),e=jh(),r=t.process,n=t.Deno,i=r&&r.versions||n&&n.version,s=i&&i.v8,o,a;return s&&(o=s.split("."),a=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!a&&e&&(o=e.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=e.match(/Chrome\/(\d+)/),o&&(a=+o[1]))),ek=a,ek}var tk,zV;function Oh(){if(zV)return tk;zV=1;var t=Am(),e=at(),r=zt(),n=r.String;return tk=!!Object.getOwnPropertySymbols&&!e(function(){var i=Symbol("symbol detection");return!n(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&t&&t<41}),tk}var rk,VV;function Boe(){if(VV)return rk;VV=1;var t=Oh();return rk=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol",rk}var nk,WV;function Dm(){if(WV)return nk;WV=1;var t=_i(),e=Kr(),r=kr(),n=Boe(),i=Object;return nk=n?function(s){return typeof s=="symbol"}:function(s){var o=t("Symbol");return e(o)&&r(o.prototype,i(s))},nk}var ik,UV;function Ph(){if(UV)return ik;UV=1;var t=String;return ik=function(e){try{return t(e)}catch{return"Object"}},ik}var sk,HV;function Ko(){if(HV)return sk;HV=1;var t=Kr(),e=Ph(),r=TypeError;return sk=function(n){if(t(n))return n;throw new r(e(n)+" is not a function")},sk}var ok,KV;function JA(){if(KV)return ok;KV=1;var t=Ko(),e=Th();return ok=function(r,n){var i=r[n];return e(i)?void 0:t(i)},ok}var ak,GV;function IOe(){if(GV)return ak;GV=1;var t=ai(),e=Kr(),r=Gr(),n=TypeError;return ak=function(i,s){var o,a;if(s==="string"&&e(o=i.toString)&&!r(a=t(o,i))||e(o=i.valueOf)&&!r(a=t(o,i))||s!=="string"&&e(o=i.toString)&&!r(a=t(o,i)))return a;throw new n("Can't convert object to primitive value")},ak}var lk={exports:{}},ck,YV;function Ih(){return YV||(YV=1,ck=!0),ck}var uk,QV;function ROe(){if(QV)return uk;QV=1;var t=zt(),e=Object.defineProperty;return uk=function(r,n){try{e(t,r,{value:n,configurable:!0,writable:!0})}catch{t[r]=n}return n},uk}var XV;function ZA(){if(XV)return lk.exports;XV=1;var t=Ih(),e=zt(),r=ROe(),n="__core-js_shared__",i=lk.exports=e[n]||r(n,{});return(i.versions||(i.versions=[])).push({version:"3.44.0",mode:t?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),lk.exports}var dk,JV;function Rh(){if(JV)return dk;JV=1;var t=ZA();return dk=function(e,r){return t[e]||(t[e]=r||{})},dk}var hk,ZV;function Ei(){if(ZV)return hk;ZV=1;var t=Ho(),e=Object;return hk=function(r){return e(t(r))},hk}var fk,eW;function on(){if(eW)return fk;eW=1;var t=ct(),e=Ei(),r=t({}.hasOwnProperty);return fk=Object.hasOwn||function(i,s){return r(e(i),s)},fk}var pk,tW;function Eb(){if(tW)return pk;tW=1;var t=ct(),e=0,r=Math.random(),n=t(1.1.toString);return pk=function(i){return"Symbol("+(i===void 0?"":i)+")_"+n(++e+r,36)},pk}var mk,rW;function Cr(){if(rW)return mk;rW=1;var t=zt(),e=Rh(),r=on(),n=Eb(),i=Oh(),s=Boe(),o=t.Symbol,a=e("wks"),l=s?o.for||o:o&&o.withoutSetter||n;return mk=function(u){return r(a,u)||(a[u]=i&&r(o,u)?o[u]:l("Symbol."+u)),a[u]},mk}var gk,nW;function zoe(){if(nW)return gk;nW=1;var t=ai(),e=Gr(),r=Dm(),n=JA(),i=IOe(),s=Cr(),o=TypeError,a=s("toPrimitive");return gk=function(l,u){if(!e(l)||r(l))return l;var d=n(l,a),h;if(d){if(u===void 0&&(u="default"),h=t(d,l,u),!e(h)||r(h))return h;throw new o("Can't convert object to primitive value")}return u===void 0&&(u="number"),i(l,u)},gk}var yk,iW;function eD(){if(iW)return yk;iW=1;var t=zoe(),e=Dm();return yk=function(r){var n=t(r,"string");return e(n)?n:n+""},yk}var vk,sW;function Voe(){if(sW)return vk;sW=1;var t=zt(),e=Gr(),r=t.document,n=e(r)&&e(r.createElement);return vk=function(i){return n?r.createElement(i):{}},vk}var bk,oW;function Woe(){if(oW)return bk;oW=1;var t=mr(),e=at(),r=Voe();return bk=!t&&!e(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7}),bk}var aW;function Nb(){if(aW)return LN;aW=1;var t=mr(),e=ai(),r=Sb(),n=Mm(),i=bs(),s=eD(),o=on(),a=Woe(),l=Object.getOwnPropertyDescriptor;return LN.f=t?l:function(d,h){if(d=i(d),h=s(h),a)try{return l(d,h)}catch{}if(o(d,h))return n(!e(r.f,d,h),d[h])},LN}var xk,lW;function MOe(){if(lW)return xk;lW=1;var t=at(),e=Kr(),r=/#|\.prototype\./,n=function(l,u){var d=s[i(l)];return d===a?!0:d===o?!1:e(u)?t(u):!!u},i=n.normalize=function(l){return String(l).replace(r,".").toLowerCase()},s=n.data={},o=n.NATIVE="N",a=n.POLYFILL="P";return xk=n,xk}var wk,cW;function kb(){if(cW)return wk;cW=1;var t=XA(),e=Ko(),r=Rm(),n=t(t.bind);return wk=function(i,s){return e(i),s===void 0?i:r?n(i,s):function(){return i.apply(s,arguments)}},wk}var Sk={},_k,uW;function Uoe(){if(uW)return _k;uW=1;var t=mr(),e=at();return _k=t&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),_k}var Ek,dW;function Hs(){if(dW)return Ek;dW=1;var t=Gr(),e=String,r=TypeError;return Ek=function(n){if(t(n))return n;throw new r(e(n)+" is not an object")},Ek}var hW;function Qi(){if(hW)return Sk;hW=1;var t=mr(),e=Woe(),r=Uoe(),n=Hs(),i=eD(),s=TypeError,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l="enumerable",u="configurable",d="writable";return Sk.f=t?r?function(f,p,m){if(n(f),p=i(p),n(m),typeof f=="function"&&p==="prototype"&&"value"in m&&d in m&&!m[d]){var g=a(f,p);g&&g[d]&&(f[p]=m.value,m={configurable:u in m?m[u]:g[u],enumerable:l in m?m[l]:g[l],writable:!1})}return o(f,p,m)}:o:function(f,p,m){if(n(f),p=i(p),n(m),e)try{return o(f,p,m)}catch{}if("get"in m||"set"in m)throw new s("Accessors not supported");return"value"in m&&(f[p]=m.value),f},Sk}var Nk,fW;function Mh(){if(fW)return Nk;fW=1;var t=mr(),e=Qi(),r=Mm();return Nk=t?function(n,i,s){return e.f(n,i,r(1,s))}:function(n,i,s){return n[i]=s,n},Nk}var kk,pW;function Ie(){if(pW)return kk;pW=1;var t=zt(),e=wb(),r=XA(),n=Kr(),i=Nb().f,s=MOe(),o=_t(),a=kb(),l=Mh(),u=on(),d=function(h){var f=function(p,m,g){if(this instanceof f){switch(arguments.length){case 0:return new h;case 1:return new h(p);case 2:return new h(p,m)}return new h(p,m,g)}return e(h,this,arguments)};return f.prototype=h.prototype,f};return kk=function(h,f){var p=h.target,m=h.global,g=h.stat,v=h.proto,y=m?t:g?t[p]:t[p]&&t[p].prototype,b=m?o:o[p]||l(o,p,{})[p],w=b.prototype,x,S,_,E,N,T,j,P,O;for(E in f)x=s(m?E:p+(g?".":"#")+E,h.forced),S=!x&&y&&u(y,E),T=b[E],S&&(h.dontCallGetSet?(O=i(y,E),j=O&&O.value):j=y[E]),N=S&&j?j:f[E],!(!x&&!v&&typeof T==typeof N)&&(h.bind&&S?P=a(N,t):h.wrap&&S?P=d(N):v&&n(N)?P=r(N):P=N,(h.sham||N&&N.sham||T&&T.sham)&&l(P,"sham",!0),l(b,E,P),v&&(_=p+"Prototype",u(o,_)||l(o,_,{}),l(o[_],E,N),h.real&&w&&(x||!w[E])&&l(w,E,N)))},kk}var Ck,mW;function AOe(){if(mW)return Ck;mW=1;var t=Math.ceil,e=Math.floor;return Ck=Math.trunc||function(n){var i=+n;return(i>0?e:t)(i)},Ck}var Tk,gW;function Ah(){if(gW)return Tk;gW=1;var t=AOe();return Tk=function(e){var r=+e;return r!==r||r===0?0:t(r)},Tk}var jk,yW;function Cb(){if(yW)return jk;yW=1;var t=Ah(),e=Math.max,r=Math.min;return jk=function(n,i){var s=t(n);return s<0?e(s+i,0):r(s,i)},jk}var Ok,vW;function Hoe(){if(vW)return Ok;vW=1;var t=Ah(),e=Math.min;return Ok=function(r){var n=t(r);return n>0?e(n,9007199254740991):0},Ok}var Pk,bW;function Go(){if(bW)return Pk;bW=1;var t=Hoe();return Pk=function(e){return t(e.length)},Pk}var Ik,xW;function tD(){if(xW)return Ik;xW=1;var t=bs(),e=Cb(),r=Go(),n=function(i){return function(s,o,a){var l=t(s),u=r(l);if(u===0)return!i&&-1;var d=e(a,u),h;if(i&&o!==o){for(;u>d;)if(h=l[d++],h!==h)return!0}else for(;u>d;d++)if((i||d in l)&&l[d]===o)return i||d||0;return!i&&-1}};return Ik={includes:n(!0),indexOf:n(!1)},Ik}var Rk,wW;function $m(){return wW||(wW=1,Rk={}),Rk}var Mk,SW;function Koe(){if(SW)return Mk;SW=1;var t=ct(),e=on(),r=bs(),n=tD().indexOf,i=$m(),s=t([].push);return Mk=function(o,a){var l=r(o),u=0,d=[],h;for(h in l)!e(i,h)&&e(l,h)&&s(d,h);for(;a.length>u;)e(l,h=a[u++])&&(~n(d,h)||s(d,h));return d},Mk}var Ak,_W;function rD(){return _W||(_W=1,Ak=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),Ak}var Dk,EW;function Fm(){if(EW)return Dk;EW=1;var t=Koe(),e=rD();return Dk=Object.keys||function(n){return t(n,e)},Dk}var $k={},NW;function Tb(){return NW||(NW=1,$k.f=Object.getOwnPropertySymbols),$k}var Fk,kW;function DOe(){if(kW)return Fk;kW=1;var t=mr(),e=ct(),r=ai(),n=at(),i=Fm(),s=Tb(),o=Sb(),a=Ei(),l=_b(),u=Object.assign,d=Object.defineProperty,h=e([].concat);return Fk=!u||n(function(){if(t&&u({b:1},u(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},p={},m=Symbol("assign detection"),g="abcdefghijklmnopqrst";return f[m]=7,g.split("").forEach(function(v){p[v]=v}),u({},f)[m]!==7||i(u({},p)).join("")!==g})?function(p,m){for(var g=a(p),v=arguments.length,y=1,b=s.f,w=o.f;v>y;)for(var x=l(arguments[y++]),S=b?h(i(x),b(x)):i(x),_=S.length,E=0,N;_>E;)N=S[E++],(!t||r(w,x,N))&&(g[N]=x[N]);return g}:u,Fk}var CW;function $Oe(){if(CW)return bV;CW=1;var t=Ie(),e=DOe();return t({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),bV}var qk,TW;function FOe(){if(TW)return qk;TW=1,$Oe();var t=_t();return qk=t.Object.assign,qk}var Lk,jW;function qOe(){if(jW)return Lk;jW=1;var t=FOe();return Lk=t,Lk}var Bk,OW;function LOe(){return OW||(OW=1,Bk=qOe()),Bk}var BOe=LOe(),xr=Ve(BOe),PW={},zk,IW;function Dh(){if(IW)return zk;IW=1;var t=ct();return zk=t([].slice),zk}var Vk,RW;function zOe(){if(RW)return Vk;RW=1;var t=ct(),e=Ko(),r=Gr(),n=on(),i=Dh(),s=Rm(),o=Function,a=t([].concat),l=t([].join),u={},d=function(h,f,p){if(!n(u,f)){for(var m=[],g=0;g<f;g++)m[g]="a["+g+"]";u[f]=o("C,a","return new C("+l(m,",")+")")}return u[f](h,p)};return Vk=s?o.bind:function(f){var p=e(this),m=p.prototype,g=i(arguments,1),v=function(){var b=a(g,i(arguments));return this instanceof v?d(p,b.length,b):p.apply(f,b)};return r(m)&&(v.prototype=m),v},Vk}var MW;function VOe(){if(MW)return PW;MW=1;var t=Ie(),e=zOe();return t({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),PW}var Wk,AW;function an(){if(AW)return Wk;AW=1;var t=zt(),e=_t();return Wk=function(r,n){var i=e[r+"Prototype"],s=i&&i[n];if(s)return s;var o=t[r],a=o&&o.prototype;return a&&a[n]},Wk}var Uk,DW;function WOe(){if(DW)return Uk;DW=1,VOe();var t=an();return Uk=t("Function","bind"),Uk}var Hk,$W;function UOe(){if($W)return Hk;$W=1;var t=kr(),e=WOe(),r=Function.prototype;return Hk=function(n){var i=n.bind;return n===r||t(r,n)&&i===r.bind?e:i},Hk}var Kk,FW;function HOe(){if(FW)return Kk;FW=1;var t=UOe();return Kk=t,Kk}var Gk,qW;function KOe(){return qW||(qW=1,Gk=HOe()),Gk}var GOe=KOe(),se=Ve(GOe);function nD(t,e,r,n){t.beginPath(),t.arc(e,r,n,0,2*Math.PI,!1),t.closePath()}function YOe(t,e,r,n){t.beginPath(),t.rect(e-n,r-n,n*2,n*2),t.closePath()}function QOe(t,e,r,n){t.beginPath(),n*=1.15,r+=.275*n;const i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);t.moveTo(e,r-(a-o)),t.lineTo(e+s,r+o),t.lineTo(e-s,r+o),t.lineTo(e,r-(a-o)),t.closePath()}function XOe(t,e,r,n){t.beginPath(),n*=1.15,r-=.275*n;const i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);t.moveTo(e,r+(a-o)),t.lineTo(e+s,r-o),t.lineTo(e-s,r-o),t.lineTo(e,r+(a-o)),t.closePath()}function JOe(t,e,r,n){t.beginPath(),n*=.82,r+=.1*n;for(let i=0;i<10;i++){const s=i%2===0?n*1.3:n*.5;t.lineTo(e+s*Math.sin(i*2*Math.PI/10),r-s*Math.cos(i*2*Math.PI/10))}t.closePath()}function ZOe(t,e,r,n){t.beginPath(),t.lineTo(e,r+n),t.lineTo(e+n,r),t.lineTo(e,r-n),t.lineTo(e-n,r),t.closePath()}function Goe(t,e,r,n,i,s){const o=Math.PI/180;n-2*s<0&&(s=n/2),i-2*s<0&&(s=i/2),t.beginPath(),t.moveTo(e+s,r),t.lineTo(e+n-s,r),t.arc(e+n-s,r+s,s,o*270,o*360,!1),t.lineTo(e+n,r+i-s),t.arc(e+n-s,r+i-s,s,0,o*90,!1),t.lineTo(e+s,r+i),t.arc(e+s,r+i-s,s,o*90,o*180,!1),t.lineTo(e,r+s),t.arc(e+s,r+s,s,o*180,o*270,!1),t.closePath()}function rR(t,e,r,n,i){const s=.5522848,o=n/2*s,a=i/2*s,l=e+n,u=r+i,d=e+n/2,h=r+i/2;t.beginPath(),t.moveTo(e,h),t.bezierCurveTo(e,h-a,d-o,r,d,r),t.bezierCurveTo(d+o,r,l,h-a,l,h),t.bezierCurveTo(l,h+a,d+o,u,d,u),t.bezierCurveTo(d-o,u,e,h+a,e,h),t.closePath()}function Yoe(t,e,r,n,i){const s=.3333333333333333,o=n,a=i*s,l=.5522848,u=o/2*l,d=a/2*l,h=e+o,f=r+a,p=e+o/2,m=r+a/2,g=r+(i-a/2),v=r+i;t.beginPath(),t.moveTo(h,m),t.bezierCurveTo(h,m+d,p+u,f,p,f),t.bezierCurveTo(p-u,f,e,m+d,e,m),t.bezierCurveTo(e,m-d,p-u,r,p,r),t.bezierCurveTo(p+u,r,h,m-d,h,m),t.lineTo(h,g),t.bezierCurveTo(h,g+d,p+u,v,p,v),t.bezierCurveTo(p-u,v,e,g+d,e,g),t.lineTo(e,m)}function Qoe(t,e,r,n,i,s){t.beginPath(),t.moveTo(e,r);const o=s.length,a=n-e,l=i-r,u=l/a;let d=Math.sqrt(a*a+l*l),h=0,f=!0,p=0,m=+s[0];for(;d>=.1;)m=+s[h++%o],m>d&&(m=d),p=Math.sqrt(m*m/(1+u*u)),p=a<0?-p:p,e+=p,r+=u*p,f===!0?t.lineTo(e,r):t.moveTo(e,r),d-=m,f=!f}function ePe(t,e,r,n){t.beginPath();const i=6,s=Math.PI*2/i;t.moveTo(e+n,r);for(let o=1;o<i;o++)t.lineTo(e+n*Math.cos(s*o),r+n*Math.sin(s*o));t.closePath()}const LW={circle:nD,dashedLine:Qoe,database:Yoe,diamond:ZOe,ellipse:rR,ellipse_vis:rR,hexagon:ePe,roundRect:Goe,square:YOe,star:JOe,triangle:QOe,triangleDown:XOe};function tPe(t){return Object.prototype.hasOwnProperty.call(LW,t)?LW[t]:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];CanvasRenderingContext2D.prototype[t].call(e,n)}}var Yk={exports:{}},BW;function rPe(){return BW||(BW=1,function(t){t.exports=e;function e(n){if(n)return r(n)}function r(n){for(var i in e.prototype)n[i]=e.prototype[i];return n}e.prototype.on=e.prototype.addEventListener=function(n,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(i),this},e.prototype.once=function(n,i){function s(){this.off(n,s),i.apply(this,arguments)}return s.fn=i,this.on(n,s),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(n,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+n];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var o,a=0;a<s.length;a++)if(o=s[a],o===i||o.fn===i){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+n],this},e.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),s=this._callbacks["$"+n],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(s){s=s.slice(0);for(var o=0,a=s.length;o<a;++o)s[o].apply(this,i)}return this},e.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},e.prototype.hasListeners=function(n){return!!this.listeners(n).length}}(Yk)),Yk.exports}var nPe=rPe(),Xoe=Ve(nPe),zW={},Qk,VW;function au(){if(VW)return Qk;VW=1;var t=Us();return Qk=Array.isArray||function(r){return t(r)==="Array"},Qk}var Xk,WW;function Joe(){if(WW)return Xk;WW=1;var t=TypeError,e=9007199254740991;return Xk=function(r){if(r>e)throw t("Maximum allowed index exceeded");return r},Xk}var Jk,UW;function jb(){if(UW)return Jk;UW=1;var t=mr(),e=Qi(),r=Mm();return Jk=function(n,i,s){t?e.f(n,i,r(0,s)):n[i]=s},Jk}var Zk,HW;function iD(){if(HW)return Zk;HW=1;var t=Cr(),e=t("toStringTag"),r={};return r[e]="z",Zk=String(r)==="[object z]",Zk}var e2,KW;function $h(){if(KW)return e2;KW=1;var t=iD(),e=Kr(),r=Us(),n=Cr(),i=n("toStringTag"),s=Object,o=r(function(){return arguments}())==="Arguments",a=function(l,u){try{return l[u]}catch{}};return e2=t?r:function(l){var u,d,h;return l===void 0?"Undefined":l===null?"Null":typeof(d=a(u=s(l),i))=="string"?d:o?r(u):(h=r(u))==="Object"&&e(u.callee)?"Arguments":h},e2}var t2,GW;function iPe(){if(GW)return t2;GW=1;var t=ct(),e=Kr(),r=ZA(),n=t(Function.toString);return e(r.inspectSource)||(r.inspectSource=function(i){return n(i)}),t2=r.inspectSource,t2}var r2,YW;function Zoe(){if(YW)return r2;YW=1;var t=ct(),e=at(),r=Kr(),n=$h(),i=_i(),s=iPe(),o=function(){},a=i("Reflect","construct"),l=/^\s*(?:class|function)\b/,u=t(l.exec),d=!l.test(o),h=function(m){if(!r(m))return!1;try{return a(o,[],m),!0}catch{return!1}},f=function(m){if(!r(m))return!1;switch(n(m)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!u(l,s(m))}catch{return!0}};return f.sham=!0,r2=!a||e(function(){var p;return h(h.call)||!h(Object)||!h(function(){p=!0})||p})?f:h,r2}var n2,QW;function sPe(){if(QW)return n2;QW=1;var t=au(),e=Zoe(),r=Gr(),n=Cr(),i=n("species"),s=Array;return n2=function(o){var a;return t(o)&&(a=o.constructor,e(a)&&(a===s||t(a.prototype))?a=void 0:r(a)&&(a=a[i],a===null&&(a=void 0))),a===void 0?s:a},n2}var i2,XW;function sD(){if(XW)return i2;XW=1;var t=sPe();return i2=function(e,r){return new(t(e))(r===0?0:r)},i2}var s2,JW;function qm(){if(JW)return s2;JW=1;var t=at(),e=Cr(),r=Am(),n=e("species");return s2=function(i){return r>=51||!t(function(){var s=[],o=s.constructor={};return o[n]=function(){return{foo:1}},s[i](Boolean).foo!==1})},s2}var ZW;function eae(){if(ZW)return zW;ZW=1;var t=Ie(),e=at(),r=au(),n=Gr(),i=Ei(),s=Go(),o=Joe(),a=jb(),l=sD(),u=qm(),d=Cr(),h=Am(),f=d("isConcatSpreadable"),p=h>=51||!e(function(){var v=[];return v[f]=!1,v.concat()[0]!==v}),m=function(v){if(!n(v))return!1;var y=v[f];return y!==void 0?!!y:r(v)},g=!p||!u("concat");return t({target:"Array",proto:!0,arity:1,forced:g},{concat:function(y){var b=i(this),w=l(b,0),x=0,S,_,E,N,T;for(S=-1,E=arguments.length;S<E;S++)if(T=S===-1?b:arguments[S],m(T))for(N=s(T),o(x+N),_=0;_<N;_++,x++)_ in T&&a(w,x,T[_]);else o(x+1),a(w,x++,T);return w.length=x,w}}),zW}var eU={},tU={},o2,rU;function Xi(){if(rU)return o2;rU=1;var t=$h(),e=String;return o2=function(r){if(t(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(r)},o2}var a2={},nU;function oD(){if(nU)return a2;nU=1;var t=mr(),e=Uoe(),r=Qi(),n=Hs(),i=bs(),s=Fm();return a2.f=t&&!e?Object.defineProperties:function(a,l){n(a);for(var u=i(l),d=s(l),h=d.length,f=0,p;h>f;)r.f(a,p=d[f++],u[p]);return a},a2}var l2,iU;function oPe(){if(iU)return l2;iU=1;var t=_i();return l2=t("document","documentElement"),l2}var c2,sU;function Ob(){if(sU)return c2;sU=1;var t=Rh(),e=Eb(),r=t("keys");return c2=function(n){return r[n]||(r[n]=e(n))},c2}var u2,oU;function Lm(){if(oU)return u2;oU=1;var t=Hs(),e=oD(),r=rD(),n=$m(),i=oPe(),s=Voe(),o=Ob(),a=">",l="<",u="prototype",d="script",h=o("IE_PROTO"),f=function(){},p=function(b){return l+d+a+b+l+"/"+d+a},m=function(b){b.write(p("")),b.close();var w=b.parentWindow.Object;return b=null,w},g=function(){var b=s("iframe"),w="java"+d+":",x;return b.style.display="none",i.appendChild(b),b.src=String(w),x=b.contentWindow.document,x.open(),x.write(p("document.F=Object")),x.close(),x.F},v,y=function(){try{v=new ActiveXObject("htmlfile")}catch{}y=typeof document<"u"?document.domain&&v?m(v):g():m(v);for(var b=r.length;b--;)delete y[u][r[b]];return y()};return n[h]=!0,u2=Object.create||function(w,x){var S;return w!==null?(f[u]=t(w),S=new f,f[u]=null,S[h]=w):S=y(),x===void 0?S:e.f(S,x)},u2}var d2={},aU;function Pb(){if(aU)return d2;aU=1;var t=Koe(),e=rD(),r=e.concat("length","prototype");return d2.f=Object.getOwnPropertyNames||function(i){return t(i,r)},d2}var h2={},lU;function aD(){if(lU)return h2;lU=1;var t=Us(),e=bs(),r=Pb().f,n=Dh(),i=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(o){try{return r(o)}catch{return n(i)}};return h2.f=function(a){return i&&t(a)==="Window"?s(a):r(e(a))},h2}var f2,cU;function Bm(){if(cU)return f2;cU=1;var t=Mh();return f2=function(e,r,n,i){return i&&i.enumerable?e[r]=n:t(e,r,n),e},f2}var p2,uU;function lD(){if(uU)return p2;uU=1;var t=Qi();return p2=function(e,r,n){return t.f(e,r,n)},p2}var m2={},dU;function Ib(){if(dU)return m2;dU=1;var t=Cr();return m2.f=t,m2}var g2,hU;function Xt(){if(hU)return g2;hU=1;var t=_t(),e=on(),r=Ib(),n=Qi().f;return g2=function(i){var s=t.Symbol||(t.Symbol={});e(s,i)||n(s,i,{value:r.f(i)})},g2}var y2,fU;function tae(){if(fU)return y2;fU=1;var t=ai(),e=_i(),r=Cr(),n=Bm();return y2=function(){var i=e("Symbol"),s=i&&i.prototype,o=s&&s.valueOf,a=r("toPrimitive");s&&!s[a]&&n(s,a,function(l){return t(o,this)},{arity:1})},y2}var v2,pU;function aPe(){if(pU)return v2;pU=1;var t=iD(),e=$h();return v2=t?{}.toString:function(){return"[object "+e(this)+"]"},v2}var b2,mU;function lu(){if(mU)return b2;mU=1;var t=iD(),e=Qi().f,r=Mh(),n=on(),i=aPe(),s=Cr(),o=s("toStringTag");return b2=function(a,l,u,d){var h=u?a:a&&a.prototype;h&&(n(h,o)||e(h,o,{configurable:!0,value:l}),d&&!t&&r(h,"toString",i))},b2}var x2,gU;function rae(){if(gU)return x2;gU=1;var t=zt(),e=Kr(),r=t.WeakMap;return x2=e(r)&&/native code/.test(String(r)),x2}var w2,yU;function cu(){if(yU)return w2;yU=1;var t=rae(),e=zt(),r=Gr(),n=Mh(),i=on(),s=ZA(),o=Ob(),a=$m(),l="Object already initialized",u=e.TypeError,d=e.WeakMap,h,f,p,m=function(b){return p(b)?f(b):h(b,{})},g=function(b){return function(w){var x;if(!r(w)||(x=f(w)).type!==b)throw new u("Incompatible receiver, "+b+" required");return x}};if(t||s.state){var v=s.state||(s.state=new d);v.get=v.get,v.has=v.has,v.set=v.set,h=function(b,w){if(v.has(b))throw new u(l);return w.facade=b,v.set(b,w),w},f=function(b){return v.get(b)||{}},p=function(b){return v.has(b)}}else{var y=o("state");a[y]=!0,h=function(b,w){if(i(b,y))throw new u(l);return w.facade=b,n(b,y,w),w},f=function(b){return i(b,y)?b[y]:{}},p=function(b){return i(b,y)}}return w2={set:h,get:f,has:p,enforce:m,getterFor:g},w2}var S2,vU;function wl(){if(vU)return S2;vU=1;var t=kb(),e=ct(),r=_b(),n=Ei(),i=Go(),s=sD(),o=e([].push),a=function(l){var u=l===1,d=l===2,h=l===3,f=l===4,p=l===6,m=l===7,g=l===5||p;return function(v,y,b,w){for(var x=n(v),S=r(x),_=i(S),E=t(y,b),N=0,T=w||s,j=u?T(v,_):d||m?T(v,0):void 0,P,O;_>N;N++)if((g||N in S)&&(P=S[N],O=E(P,N,x),l))if(u)j[N]=O;else if(O)switch(l){case 3:return!0;case 5:return P;case 6:return N;case 2:o(j,P)}else switch(l){case 4:return!1;case 7:o(j,P)}return p?-1:h||f?f:j}};return S2={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterReject:a(7)},S2}var bU;function lPe(){if(bU)return tU;bU=1;var t=Ie(),e=zt(),r=ai(),n=ct(),i=Ih(),s=mr(),o=Oh(),a=at(),l=on(),u=kr(),d=Hs(),h=bs(),f=eD(),p=Xi(),m=Mm(),g=Lm(),v=Fm(),y=Pb(),b=aD(),w=Tb(),x=Nb(),S=Qi(),_=oD(),E=Sb(),N=Bm(),T=lD(),j=Rh(),P=Ob(),O=$m(),C=Eb(),D=Cr(),F=Ib(),$=Xt(),L=tae(),M=lu(),W=cu(),Y=wl().forEach,Q=P("hidden"),pe="Symbol",K="prototype",oe=W.set,Te=W.getterFor(pe),me=Object[K],Be=e.Symbol,Oe=Be&&Be[K],gt=e.RangeError,U=e.TypeError,ce=e.QObject,Me=x.f,Fe=S.f,Tt=b.f,Yr=E.f,Tr=n([].push),dt=j("symbols"),lr=j("op-symbols"),Ni=j("wks"),Jt=!ce||!ce[K]||!ce[K].findChild,A=function(Ee,ne,ge){var he=Me(me,ne);he&&delete me[ne],Fe(Ee,ne,ge),he&&Ee!==me&&Fe(me,ne,he)},q=s&&a(function(){return g(Fe({},"a",{get:function(){return Fe(this,"a",{value:7}).a}})).a!==7})?A:Fe,z=function(Ee,ne){var ge=dt[Ee]=g(Oe);return oe(ge,{type:pe,tag:Ee,description:ne}),s||(ge.description=ne),ge},ae=function(ne,ge,he){ne===me&&ae(lr,ge,he),d(ne);var ke=f(ge);return d(he),l(dt,ke)?(he.enumerable?(l(ne,Q)&&ne[Q][ke]&&(ne[Q][ke]=!1),he=g(he,{enumerable:m(0,!1)})):(l(ne,Q)||Fe(ne,Q,m(1,g(null))),ne[Q][ke]=!0),q(ne,ke,he)):Fe(ne,ke,he)},ee=function(ne,ge){d(ne);var he=h(ge),ke=v(he).concat(qt(he));return Y(ke,function(Ze){(!s||r(ye,he,Ze))&&ae(ne,Ze,he[Ze])}),ne},J=function(ne,ge){return ge===void 0?g(ne):ee(g(ne),ge)},ye=function(ne){var ge=f(ne),he=r(Yr,this,ge);return this===me&&l(dt,ge)&&!l(lr,ge)?!1:he||!l(this,ge)||!l(dt,ge)||l(this,Q)&&this[Q][ge]?he:!0},Ue=function(ne,ge){var he=h(ne),ke=f(ge);if(!(he===me&&l(dt,ke)&&!l(lr,ke))){var Ze=Me(he,ke);return Ze&&l(dt,ke)&&!(l(he,Q)&&he[Q][ke])&&(Ze.enumerable=!0),Ze}},Ye=function(ne){var ge=Tt(h(ne)),he=[];return Y(ge,function(ke){!l(dt,ke)&&!l(O,ke)&&Tr(he,ke)}),he},qt=function(Ee){var ne=Ee===me,ge=Tt(ne?lr:h(Ee)),he=[];return Y(ge,function(ke){l(dt,ke)&&(!ne||l(me,ke))&&Tr(he,dt[ke])}),he};return o||(Be=function(){if(u(Oe,this))throw new U("Symbol is not a constructor");var ne=!arguments.length||arguments[0]===void 0?void 0:p(arguments[0]),ge=C(ne),he=function(ke){var Ze=this===void 0?e:this;Ze===me&&r(he,lr,ke),l(Ze,Q)&&l(Ze[Q],ge)&&(Ze[Q][ge]=!1);var ki=m(1,ke);try{q(Ze,ge,ki)}catch(bn){if(!(bn instanceof gt))throw bn;A(Ze,ge,ki)}};return s&&Jt&&q(me,ge,{configurable:!0,set:he}),z(ge,ne)},Oe=Be[K],N(Oe,"toString",function(){return Te(this).tag}),N(Be,"withoutSetter",function(Ee){return z(C(Ee),Ee)}),E.f=ye,S.f=ae,_.f=ee,x.f=Ue,y.f=b.f=Ye,w.f=qt,F.f=function(Ee){return z(D(Ee),Ee)},s&&(T(Oe,"description",{configurable:!0,get:function(){return Te(this).description}}),i||N(me,"propertyIsEnumerable",ye,{unsafe:!0}))),t({global:!0,constructor:!0,wrap:!0,forced:!o,sham:!o},{Symbol:Be}),Y(v(Ni),function(Ee){$(Ee)}),t({target:pe,stat:!0,forced:!o},{useSetter:function(){Jt=!0},useSimple:function(){Jt=!1}}),t({target:"Object",stat:!0,forced:!o,sham:!s},{create:J,defineProperty:ae,defineProperties:ee,getOwnPropertyDescriptor:Ue}),t({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:Ye}),L(),M(Be,pe),O[Q]=!0,tU}var xU={},_2,wU;function nae(){if(wU)return _2;wU=1;var t=Oh();return _2=t&&!!Symbol.for&&!!Symbol.keyFor,_2}var SU;function cPe(){if(SU)return xU;SU=1;var t=Ie(),e=_i(),r=on(),n=Xi(),i=Rh(),s=nae(),o=i("string-to-symbol-registry"),a=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{for:function(l){var u=n(l);if(r(o,u))return o[u];var d=e("Symbol")(u);return o[u]=d,a[d]=u,d}}),xU}var _U={},EU;function uPe(){if(EU)return _U;EU=1;var t=Ie(),e=on(),r=Dm(),n=Ph(),i=Rh(),s=nae(),o=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{keyFor:function(l){if(!r(l))throw new TypeError(n(l)+" is not a symbol");if(e(o,l))return o[l]}}),_U}var NU={},E2,kU;function dPe(){if(kU)return E2;kU=1;var t=ct(),e=au(),r=Kr(),n=Us(),i=Xi(),s=t([].push);return E2=function(o){if(r(o))return o;if(e(o)){for(var a=o.length,l=[],u=0;u<a;u++){var d=o[u];typeof d=="string"?s(l,d):(typeof d=="number"||n(d)==="Number"||n(d)==="String")&&s(l,i(d))}var h=l.length,f=!0;return function(p,m){if(f)return f=!1,m;if(e(this))return m;for(var g=0;g<h;g++)if(l[g]===p)return m}}},E2}var CU;function iae(){if(CU)return NU;CU=1;var t=Ie(),e=_i(),r=wb(),n=ai(),i=ct(),s=at(),o=Kr(),a=Dm(),l=Dh(),u=dPe(),d=Oh(),h=String,f=e("JSON","stringify"),p=i(/./.exec),m=i("".charAt),g=i("".charCodeAt),v=i("".replace),y=i(1.1.toString),b=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,x=/^[\uDC00-\uDFFF]$/,S=!d||s(function(){var T=e("Symbol")("stringify detection");return f([T])!=="[null]"||f({a:T})!=="{}"||f(Object(T))!=="{}"}),_=s(function(){return f("\uDF06\uD834")!=='"\\udf06\\ud834"'||f("\uDEAD")!=='"\\udead"'}),E=function(T,j){var P=l(arguments),O=u(j);if(!(!o(O)&&(T===void 0||a(T))))return P[1]=function(C,D){if(o(O)&&(D=n(O,this,h(C),D)),!a(D))return D},r(f,null,P)},N=function(T,j,P){var O=m(P,j-1),C=m(P,j+1);return p(w,T)&&!p(x,C)||p(x,T)&&!p(w,O)?"\\u"+y(g(T,0),16):T};return f&&t({target:"JSON",stat:!0,arity:3,forced:S||_},{stringify:function(j,P,O){var C=l(arguments),D=r(S?E:f,null,C);return _&&typeof D=="string"?v(D,b,N):D}}),NU}var TU={},jU;function hPe(){if(jU)return TU;jU=1;var t=Ie(),e=Oh(),r=at(),n=Tb(),i=Ei(),s=!e||r(function(){n.f(1)});return t({target:"Object",stat:!0,forced:s},{getOwnPropertySymbols:function(a){var l=n.f;return l?l(i(a)):[]}}),TU}var OU;function sae(){return OU||(OU=1,lPe(),cPe(),uPe(),iae(),hPe()),eU}var PU={},IU;function oae(){if(IU)return PU;IU=1;var t=Xt();return t("asyncDispose"),PU}var RU={},MU;function fPe(){if(MU)return RU;MU=1;var t=Xt();return t("asyncIterator"),RU}var AU={},DU;function aae(){if(DU)return AU;DU=1;var t=Xt();return t("dispose"),AU}var $U={},FU;function pPe(){if(FU)return $U;FU=1;var t=Xt();return t("hasInstance"),$U}var qU={},LU;function mPe(){if(LU)return qU;LU=1;var t=Xt();return t("isConcatSpreadable"),qU}var BU={},zU;function lae(){if(zU)return BU;zU=1;var t=Xt();return t("iterator"),BU}var VU={},WU;function gPe(){if(WU)return VU;WU=1;var t=Xt();return t("match"),VU}var UU={},HU;function yPe(){if(HU)return UU;HU=1;var t=Xt();return t("matchAll"),UU}var KU={},GU;function vPe(){if(GU)return KU;GU=1;var t=Xt();return t("replace"),KU}var YU={},QU;function bPe(){if(QU)return YU;QU=1;var t=Xt();return t("search"),YU}var XU={},JU;function xPe(){if(JU)return XU;JU=1;var t=Xt();return t("species"),XU}var ZU={},eH;function wPe(){if(eH)return ZU;eH=1;var t=Xt();return t("split"),ZU}var tH={},rH;function cae(){if(rH)return tH;rH=1;var t=Xt(),e=tae();return t("toPrimitive"),e(),tH}var nH={},iH;function SPe(){if(iH)return nH;iH=1;var t=_i(),e=Xt(),r=lu();return e("toStringTag"),r(t("Symbol"),"Symbol"),nH}var sH={},oH;function _Pe(){if(oH)return sH;oH=1;var t=Xt();return t("unscopables"),sH}var aH={},lH;function EPe(){if(lH)return aH;lH=1;var t=zt(),e=lu();return e(t.JSON,"JSON",!0),aH}var N2,cH;function NPe(){if(cH)return N2;cH=1,eae(),sae(),oae(),fPe(),aae(),pPe(),mPe(),lae(),gPe(),yPe(),vPe(),bPe(),xPe(),wPe(),cae(),SPe(),_Pe(),EPe();var t=_t();return N2=t.Symbol,N2}var uH={},k2,dH;function cD(){return dH||(dH=1,k2=function(){}),k2}var C2,hH;function Fh(){return hH||(hH=1,C2={}),C2}var T2,fH;function kPe(){if(fH)return T2;fH=1;var t=mr(),e=on(),r=Function.prototype,n=t&&Object.getOwnPropertyDescriptor,i=e(r,"name"),s=i&&(function(){}).name==="something",o=i&&(!t||t&&n(r,"name").configurable);return T2={EXISTS:i,PROPER:s,CONFIGURABLE:o},T2}var j2,pH;function uae(){if(pH)return j2;pH=1;var t=at();return j2=!t(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),j2}var O2,mH;function Rb(){if(mH)return O2;mH=1;var t=on(),e=Kr(),r=Ei(),n=Ob(),i=uae(),s=n("IE_PROTO"),o=Object,a=o.prototype;return O2=i?o.getPrototypeOf:function(l){var u=r(l);if(t(u,s))return u[s];var d=u.constructor;return e(d)&&u instanceof d?d.prototype:u instanceof o?a:null},O2}var P2,gH;function dae(){if(gH)return P2;gH=1;var t=at(),e=Kr(),r=Gr(),n=Lm(),i=Rb(),s=Bm(),o=Cr(),a=Ih(),l=o("iterator"),u=!1,d,h,f;[].keys&&(f=[].keys(),"next"in f?(h=i(i(f)),h!==Object.prototype&&(d=h)):u=!0);var p=!r(d)||t(function(){var m={};return d[l].call(m)!==m});return p?d={}:a&&(d=n(d)),e(d[l])||s(d,l,function(){return this}),P2={IteratorPrototype:d,BUGGY_SAFARI_ITERATORS:u},P2}var I2,yH;function CPe(){if(yH)return I2;yH=1;var t=dae().IteratorPrototype,e=Lm(),r=Mm(),n=lu(),i=Fh(),s=function(){return this};return I2=function(o,a,l,u){var d=a+" Iterator";return o.prototype=e(t,{next:r(+!u,l)}),n(o,d,!1,!0),i[d]=s,o},I2}var R2,vH;function TPe(){if(vH)return R2;vH=1;var t=ct(),e=Ko();return R2=function(r,n,i){try{return t(e(Object.getOwnPropertyDescriptor(r,n)[i]))}catch{}},R2}var M2,bH;function jPe(){if(bH)return M2;bH=1;var t=Gr();return M2=function(e){return t(e)||e===null},M2}var A2,xH;function OPe(){if(xH)return A2;xH=1;var t=jPe(),e=String,r=TypeError;return A2=function(n){if(t(n))return n;throw new r("Can't set "+e(n)+" as a prototype")},A2}var D2,wH;function PPe(){if(wH)return D2;wH=1;var t=TPe(),e=Gr(),r=Ho(),n=OPe();return D2=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,s={},o;try{o=t(Object.prototype,"__proto__","set"),o(s,[]),i=s instanceof Array}catch{}return function(l,u){return r(l),n(u),e(l)&&(i?o(l,u):l.__proto__=u),l}}():void 0),D2}var $2,SH;function uD(){if(SH)return $2;SH=1;var t=Ie(),e=ai(),r=Ih(),n=kPe(),i=Kr(),s=CPe(),o=Rb(),a=PPe(),l=lu(),u=Mh(),d=Bm(),h=Cr(),f=Fh(),p=dae(),m=n.PROPER,g=n.CONFIGURABLE,v=p.IteratorPrototype,y=p.BUGGY_SAFARI_ITERATORS,b=h("iterator"),w="keys",x="values",S="entries",_=function(){return this};return $2=function(E,N,T,j,P,O,C){s(T,N,j);var D=function(oe){if(oe===P&&W)return W;if(!y&&oe&&oe in L)return L[oe];switch(oe){case w:return function(){return new T(this,oe)};case x:return function(){return new T(this,oe)};case S:return function(){return new T(this,oe)}}return function(){return new T(this)}},F=N+" Iterator",$=!1,L=E.prototype,M=L[b]||L["@@iterator"]||P&&L[P],W=!y&&M||D(P),Y=N==="Array"&&L.entries||M,Q,pe,K;if(Y&&(Q=o(Y.call(new E)),Q!==Object.prototype&&Q.next&&(!r&&o(Q)!==v&&(a?a(Q,v):i(Q[b])||d(Q,b,_)),l(Q,F,!0,!0),r&&(f[F]=_))),m&&P===x&&M&&M.name!==x&&(!r&&g?u(L,"name",x):($=!0,W=function(){return e(M,this)})),P)if(pe={values:D(x),keys:O?W:D(w),entries:D(S)},C)for(K in pe)(y||$||!(K in L))&&d(L,K,pe[K]);else t({target:N,proto:!0,forced:y||$},pe);return(!r||C)&&L[b]!==W&&d(L,b,W,{name:P}),f[N]=W,pe},$2}var F2,_H;function dD(){return _H||(_H=1,F2=function(t,e){return{value:t,done:e}}),F2}var q2,EH;function qh(){if(EH)return q2;EH=1;var t=bs(),e=cD(),r=Fh(),n=cu(),i=Qi().f,s=uD(),o=dD(),a=Ih(),l=mr(),u="Array Iterator",d=n.set,h=n.getterFor(u);q2=s(Array,"Array",function(p,m){d(this,{type:u,target:t(p),index:0,kind:m})},function(){var p=h(this),m=p.target,g=p.index++;if(!m||g>=m.length)return p.target=null,o(void 0,!0);switch(p.kind){case"keys":return o(g,!1);case"values":return o(m[g],!1)}return o([g,m[g]],!1)},"values");var f=r.Arguments=r.Array;if(e("keys"),e("values"),e("entries"),!a&&l&&f.name!=="values")try{i(f,"name",{value:"values"})}catch{}return q2}var L2,NH;function IPe(){return NH||(NH=1,L2={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),L2}var kH;function Lh(){if(kH)return uH;kH=1,qh();var t=IPe(),e=zt(),r=lu(),n=Fh();for(var i in t)r(e[i],i),n[i]=n.Array;return uH}var B2,CH;function hae(){if(CH)return B2;CH=1;var t=NPe();return Lh(),B2=t,B2}var z2,TH;function RPe(){return TH||(TH=1,z2=hae()),z2}var MPe=RPe(),APe=Ve(MPe),jH={},OH;function DPe(){if(OH)return jH;OH=1;var t=Ie(),e=au(),r=Zoe(),n=Gr(),i=Cb(),s=Go(),o=bs(),a=jb(),l=Cr(),u=qm(),d=Dh(),h=u("slice"),f=l("species"),p=Array,m=Math.max;return t({target:"Array",proto:!0,forced:!h},{slice:function(v,y){var b=o(this),w=s(b),x=i(v,w),S=i(y===void 0?w:y,w),_,E,N;if(e(b)&&(_=b.constructor,r(_)&&(_===p||e(_.prototype))?_=void 0:n(_)&&(_=_[f],_===null&&(_=void 0)),_===p||_===void 0))return d(b,x,S);for(E=new(_===void 0?p:_)(m(S-x,0)),N=0;x<S;x++,N++)x in b&&a(E,N,b[x]);return E.length=N,E}}),jH}var V2,PH;function $Pe(){if(PH)return V2;PH=1,DPe();var t=an();return V2=t("Array","slice"),V2}var W2,IH;function FPe(){if(IH)return W2;IH=1;var t=kr(),e=$Pe(),r=Array.prototype;return W2=function(n){var i=n.slice;return n===r||t(r,n)&&i===r.slice?e:i},W2}var U2,RH;function qPe(){if(RH)return U2;RH=1;var t=FPe();return U2=t,U2}var H2,MH;function LPe(){return MH||(MH=1,H2=qPe()),H2}var BPe=LPe(),Is=Ve(BPe),K2,AH;function zPe(){if(AH)return K2;AH=1;var t=_i(),e=ct(),r=Pb(),n=Tb(),i=Hs(),s=e([].concat);return K2=t("Reflect","ownKeys")||function(a){var l=r.f(i(a)),u=n.f;return u?s(l,u(a)):l},K2}var DH={},$H;function VPe(){if($H)return DH;$H=1;var t=Ie(),e=au();return t({target:"Array",stat:!0},{isArray:e}),DH}var G2,FH;function WPe(){if(FH)return G2;FH=1,VPe();var t=_t();return G2=t.Array.isArray,G2}var Y2,qH;function UPe(){if(qH)return Y2;qH=1;var t=WPe();return Y2=t,Y2}var Q2,LH;function HPe(){return LH||(LH=1,Q2=UPe()),Q2}var KPe=HPe(),ar=Ve(KPe),BH={},zH;function GPe(){if(zH)return BH;zH=1;var t=Ie(),e=wl().map,r=qm(),n=r("map");return t({target:"Array",proto:!0,forced:!n},{map:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),BH}var X2,VH;function YPe(){if(VH)return X2;VH=1,GPe();var t=an();return X2=t("Array","map"),X2}var J2,WH;function QPe(){if(WH)return J2;WH=1;var t=kr(),e=YPe(),r=Array.prototype;return J2=function(n){var i=n.map;return n===r||t(r,n)&&i===r.map?e:i},J2}var Z2,UH;function XPe(){if(UH)return Z2;UH=1;var t=QPe();return Z2=t,Z2}var eC,HH;function JPe(){return HH||(HH=1,eC=XPe()),eC}var ZPe=JPe(),th=Ve(ZPe),KH={},GH;function eIe(){if(GH)return KH;GH=1;var t=Ie(),e=Ei(),r=Fm(),n=at(),i=n(function(){r(1)});return t({target:"Object",stat:!0,forced:i},{keys:function(o){return r(e(o))}}),KH}var tC,YH;function tIe(){if(YH)return tC;YH=1,eIe();var t=_t();return tC=t.Object.keys,tC}var rC,QH;function rIe(){if(QH)return rC;QH=1;var t=tIe();return rC=t,rC}var nC,XH;function nIe(){return XH||(XH=1,nC=rIe()),nC}var iIe=nIe(),nr=Ve(iIe),JH={},ZH;function sIe(){if(ZH)return JH;ZH=1;var t=Ie(),e=ct(),r=Date,n=e(r.prototype.getTime);return t({target:"Date",stat:!0},{now:function(){return n(new r)}}),JH}var iC,e9;function oIe(){if(e9)return iC;e9=1,sIe();var t=_t();return iC=t.Date.now,iC}var sC,t9;function aIe(){if(t9)return sC;t9=1;var t=oIe();return sC=t,sC}var oC,r9;function lIe(){return r9||(r9=1,oC=aIe()),oC}var cIe=lIe(),r0=Ve(cIe),n9={},aC,i9;function Bh(){if(i9)return aC;i9=1;var t=at();return aC=function(e,r){var n=[][e];return!!n&&t(function(){n.call(null,r||function(){return 1},1)})},aC}var lC,s9;function uIe(){if(s9)return lC;s9=1;var t=wl().forEach,e=Bh(),r=e("forEach");return lC=r?[].forEach:function(i){return t(this,i,arguments.length>1?arguments[1]:void 0)},lC}var o9;function dIe(){if(o9)return n9;o9=1;var t=Ie(),e=uIe();return t({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),n9}var cC,a9;function hIe(){if(a9)return cC;a9=1,dIe();var t=an();return cC=t("Array","forEach"),cC}var uC,l9;function fIe(){if(l9)return uC;l9=1;var t=hIe();return uC=t,uC}var dC,c9;function pIe(){if(c9)return dC;c9=1;var t=$h(),e=on(),r=kr(),n=fIe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return dC=function(o){var a=o.forEach;return o===i||r(i,o)&&a===i.forEach||e(s,t(o))?n:a},dC}var hC,u9;function mIe(){return u9||(u9=1,hC=pIe()),hC}var gIe=mIe(),kt=Ve(gIe),d9={},h9;function yIe(){if(h9)return d9;h9=1;var t=Ie(),e=ct(),r=au(),n=e([].reverse),i=[1,2];return t({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),n(this)}}),d9}var fC,f9;function vIe(){if(f9)return fC;f9=1,yIe();var t=an();return fC=t("Array","reverse"),fC}var pC,p9;function bIe(){if(p9)return pC;p9=1;var t=kr(),e=vIe(),r=Array.prototype;return pC=function(n){var i=n.reverse;return n===r||t(r,n)&&i===r.reverse?e:i},pC}var mC,m9;function xIe(){if(m9)return mC;m9=1;var t=bIe();return mC=t,mC}var gC,g9;function wIe(){return g9||(g9=1,gC=xIe()),gC}var SIe=wIe(),gc=Ve(SIe),y9={},yC,v9;function _Ie(){if(v9)return yC;v9=1;var t=mr(),e=au(),r=TypeError,n=Object.getOwnPropertyDescriptor,i=t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(s){return s instanceof TypeError}}();return yC=i?function(s,o){if(e(s)&&!n(s,"length").writable)throw new r("Cannot set read only .length");return s.length=o}:function(s,o){return s.length=o},yC}var vC,b9;function fae(){if(b9)return vC;b9=1;var t=Ph(),e=TypeError;return vC=function(r,n){if(!delete r[n])throw new e("Cannot delete property "+t(n)+" of "+t(r))},vC}var x9;function EIe(){if(x9)return y9;x9=1;var t=Ie(),e=Ei(),r=Cb(),n=Ah(),i=Go(),s=_Ie(),o=Joe(),a=sD(),l=jb(),u=fae(),d=qm(),h=d("splice"),f=Math.max,p=Math.min;return t({target:"Array",proto:!0,forced:!h},{splice:function(g,v){var y=e(this),b=i(y),w=r(g,b),x=arguments.length,S,_,E,N,T,j;for(x===0?S=_=0:x===1?(S=0,_=b-w):(S=x-2,_=p(f(n(v),0),b-w)),o(b+S-_),E=a(y,_),N=0;N<_;N++)T=w+N,T in y&&l(E,N,y[T]);if(E.length=_,S<_){for(N=w;N<b-_;N++)T=N+_,j=N+S,T in y?y[j]=y[T]:u(y,j);for(N=b;N>b-_+S;N--)u(y,N-1)}else if(S>_)for(N=b-_;N>w;N--)T=N+_-1,j=N+S-1,T in y?y[j]=y[T]:u(y,j);for(N=0;N<S;N++)y[N+w]=arguments[N+2];return s(y,b-_+S),E}}),y9}var bC,w9;function NIe(){if(w9)return bC;w9=1,EIe();var t=an();return bC=t("Array","splice"),bC}var xC,S9;function kIe(){if(S9)return xC;S9=1;var t=kr(),e=NIe(),r=Array.prototype;return xC=function(n){var i=n.splice;return n===r||t(r,n)&&i===r.splice?e:i},xC}var wC,_9;function CIe(){if(_9)return wC;_9=1;var t=kIe();return wC=t,wC}var SC,E9;function TIe(){return E9||(E9=1,SC=CIe()),SC}var jIe=TIe(),No=Ve(jIe),N9={},k9;function OIe(){if(k9)return N9;k9=1;var t=Ie(),e=tD().includes,r=at(),n=cD(),i=r(function(){return!Array(1).includes()});return t({target:"Array",proto:!0,forced:i},{includes:function(o){return e(this,o,arguments.length>1?arguments[1]:void 0)}}),n("includes"),N9}var _C,C9;function PIe(){if(C9)return _C;C9=1,OIe();var t=an();return _C=t("Array","includes"),_C}var T9={},EC,j9;function IIe(){if(j9)return EC;j9=1;var t=Gr(),e=Us(),r=Cr(),n=r("match");return EC=function(i){var s;return t(i)&&((s=i[n])!==void 0?!!s:e(i)==="RegExp")},EC}var NC,O9;function RIe(){if(O9)return NC;O9=1;var t=IIe(),e=TypeError;return NC=function(r){if(t(r))throw new e("The method doesn't accept regular expressions");return r},NC}var kC,P9;function MIe(){if(P9)return kC;P9=1;var t=Cr(),e=t("match");return kC=function(r){var n=/./;try{"/./"[r](n)}catch{try{return n[e]=!1,"/./"[r](n)}catch{}}return!1},kC}var I9;function AIe(){if(I9)return T9;I9=1;var t=Ie(),e=ct(),r=RIe(),n=Ho(),i=Xi(),s=MIe(),o=e("".indexOf);return t({target:"String",proto:!0,forced:!s("includes")},{includes:function(l){return!!~o(i(n(this)),i(r(l)),arguments.length>1?arguments[1]:void 0)}}),T9}var CC,R9;function DIe(){if(R9)return CC;R9=1,AIe();var t=an();return CC=t("String","includes"),CC}var TC,M9;function $Ie(){if(M9)return TC;M9=1;var t=kr(),e=PIe(),r=DIe(),n=Array.prototype,i=String.prototype;return TC=function(s){var o=s.includes;return s===n||t(n,s)&&o===n.includes?e:typeof s=="string"||s===i||t(i,s)&&o===i.includes?r:o},TC}var jC,A9;function FIe(){if(A9)return jC;A9=1;var t=$Ie();return jC=t,jC}var OC,D9;function qIe(){return D9||(D9=1,OC=FIe()),OC}var LIe=qIe(),Xa=Ve(LIe),$9={},F9;function BIe(){if(F9)return $9;F9=1;var t=Ie(),e=at(),r=Ei(),n=Rb(),i=uae(),s=e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getPrototypeOf:function(a){return n(r(a))}}),$9}var PC,q9;function zIe(){if(q9)return PC;q9=1,BIe();var t=_t();return PC=t.Object.getPrototypeOf,PC}var IC,L9;function VIe(){if(L9)return IC;L9=1;var t=zIe();return IC=t,IC}var RC,B9;function WIe(){return B9||(B9=1,RC=VIe()),RC}var UIe=WIe(),z9=Ve(UIe),MC,V9;function HIe(){if(V9)return MC;V9=1,eae();var t=an();return MC=t("Array","concat"),MC}var AC,W9;function KIe(){if(W9)return AC;W9=1;var t=kr(),e=HIe(),r=Array.prototype;return AC=function(n){var i=n.concat;return n===r||t(r,n)&&i===r.concat?e:i},AC}var DC,U9;function GIe(){if(U9)return DC;U9=1;var t=KIe();return DC=t,DC}var $C,H9;function YIe(){return H9||(H9=1,$C=GIe()),$C}var QIe=YIe(),XIe=Ve(QIe),K9={},G9;function JIe(){if(G9)return K9;G9=1;var t=Ie(),e=wl().filter,r=qm(),n=r("filter");return t({target:"Array",proto:!0,forced:!n},{filter:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),K9}var FC,Y9;function ZIe(){if(Y9)return FC;Y9=1,JIe();var t=an();return FC=t("Array","filter"),FC}var qC,Q9;function eRe(){if(Q9)return qC;Q9=1;var t=kr(),e=ZIe(),r=Array.prototype;return qC=function(n){var i=n.filter;return n===r||t(r,n)&&i===r.filter?e:i},qC}var LC,X9;function tRe(){if(X9)return LC;X9=1;var t=eRe();return LC=t,LC}var BC,J9;function rRe(){return J9||(J9=1,BC=tRe()),BC}var nRe=rRe(),Gn=Ve(nRe),Z9={},zC,eK;function iRe(){if(eK)return zC;eK=1;var t=mr(),e=at(),r=ct(),n=Rb(),i=Fm(),s=bs(),o=Sb().f,a=r(o),l=r([].push),u=t&&e(function(){var h=Object.create(null);return h[2]=2,!a(h,2)}),d=function(h){return function(f){for(var p=s(f),m=i(p),g=u&&n(p)===null,v=m.length,y=0,b=[],w;v>y;)w=m[y++],(!t||(g?w in p:a(p,w)))&&l(b,h?[w,p[w]]:p[w]);return b}};return zC={entries:d(!0),values:d(!1)},zC}var tK;function sRe(){if(tK)return Z9;tK=1;var t=Ie(),e=iRe().values;return t({target:"Object",stat:!0},{values:function(n){return e(n)}}),Z9}var VC,rK;function oRe(){if(rK)return VC;rK=1,sRe();var t=_t();return VC=t.Object.values,VC}var WC,nK;function aRe(){if(nK)return WC;nK=1;var t=oRe();return WC=t,WC}var UC,iK;function lRe(){return iK||(iK=1,UC=aRe()),UC}var cRe=lRe(),uRe=Ve(cRe),sK={},HC,oK;function hD(){return oK||(oK=1,HC=`	
\v\f\r \u2028\u2029\uFEFF`),HC}var KC,aK;function pae(){if(aK)return KC;aK=1;var t=ct(),e=Ho(),r=Xi(),n=hD(),i=t("".replace),s=RegExp("^["+n+"]+"),o=RegExp("(^|[^"+n+"])["+n+"]+$"),a=function(l){return function(u){var d=r(e(u));return l&1&&(d=i(d,s,"")),l&2&&(d=i(d,o,"$1")),d}};return KC={start:a(1),end:a(2),trim:a(3)},KC}var GC,lK;function dRe(){if(lK)return GC;lK=1;var t=zt(),e=at(),r=ct(),n=Xi(),i=pae().trim,s=hD(),o=t.parseInt,a=t.Symbol,l=a&&a.iterator,u=/^[+-]?0x/i,d=r(u.exec),h=o(s+"08")!==8||o(s+"0x16")!==22||l&&!e(function(){o(Object(l))});return GC=h?function(p,m){var g=i(n(p));return o(g,m>>>0||(d(u,g)?16:10))}:o,GC}var cK;function hRe(){if(cK)return sK;cK=1;var t=Ie(),e=dRe();return t({global:!0,forced:parseInt!==e},{parseInt:e}),sK}var YC,uK;function fRe(){if(uK)return YC;uK=1,hRe();var t=_t();return YC=t.parseInt,YC}var QC,dK;function pRe(){if(dK)return QC;dK=1;var t=fRe();return QC=t,QC}var XC,hK;function mRe(){return hK||(hK=1,XC=pRe()),XC}var gRe=mRe(),ls=Ve(gRe),fK={},pK;function yRe(){if(pK)return fK;pK=1;var t=Ie(),e=XA(),r=tD().indexOf,n=Bh(),i=e([].indexOf),s=!!i&&1/i([1],1,-0)<0,o=s||!n("indexOf");return t({target:"Array",proto:!0,forced:o},{indexOf:function(l){var u=arguments.length>1?arguments[1]:void 0;return s?i(this,l,u)||0:r(this,l,u)}}),fK}var JC,mK;function vRe(){if(mK)return JC;mK=1,yRe();var t=an();return JC=t("Array","indexOf"),JC}var ZC,gK;function bRe(){if(gK)return ZC;gK=1;var t=kr(),e=vRe(),r=Array.prototype;return ZC=function(n){var i=n.indexOf;return n===r||t(r,n)&&i===r.indexOf?e:i},ZC}var eT,yK;function xRe(){if(yK)return eT;yK=1;var t=bRe();return eT=t,eT}var tT,vK;function wRe(){return vK||(vK=1,tT=xRe()),tT}var SRe=wRe(),xt=Ve(SRe),bK={},xK;function _Re(){if(xK)return bK;xK=1;var t=Ie(),e=mr(),r=Lm();return t({target:"Object",stat:!0,sham:!e},{create:r}),bK}var rT,wK;function ERe(){if(wK)return rT;wK=1,_Re();var t=_t(),e=t.Object;return rT=function(n,i){return e.create(n,i)},rT}var nT,SK;function NRe(){if(SK)return nT;SK=1;var t=ERe();return nT=t,nT}var iT,_K;function kRe(){return _K||(_K=1,iT=NRe()),iT}var CRe=kRe(),yc=Ve(CRe),EK={},sT,NK;function TRe(){if(NK)return sT;NK=1;var t=Ah(),e=Xi(),r=Ho(),n=RangeError;return sT=function(s){var o=e(r(this)),a="",l=t(s);if(l<0||l===1/0)throw new n("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(o+=o))l&1&&(a+=o);return a},sT}var oT,kK;function jRe(){if(kK)return oT;kK=1;var t=ct(),e=Hoe(),r=Xi(),n=TRe(),i=Ho(),s=t(n),o=t("".slice),a=Math.ceil,l=function(u){return function(d,h,f){var p=r(i(d)),m=e(h),g=p.length,v=f===void 0?" ":r(f),y,b;return m<=g||v===""?p:(y=m-g,b=s(v,a(y/v.length)),b.length>y&&(b=o(b,0,y)),u?p+b:b+p)}};return oT={start:l(!1),end:l(!0)},oT}var aT,CK;function ORe(){if(CK)return aT;CK=1;var t=ct(),e=at(),r=jRe().start,n=RangeError,i=isFinite,s=Math.abs,o=Date.prototype,a=o.toISOString,l=t(o.getTime),u=t(o.getUTCDate),d=t(o.getUTCFullYear),h=t(o.getUTCHours),f=t(o.getUTCMilliseconds),p=t(o.getUTCMinutes),m=t(o.getUTCMonth),g=t(o.getUTCSeconds);return aT=e(function(){return a.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){a.call(new Date(NaN))})?function(){if(!i(l(this)))throw new n("Invalid time value");var y=this,b=d(y),w=f(y),x=b<0?"-":b>9999?"+":"";return x+r(s(b),x?6:4,0)+"-"+r(m(y)+1,2,0)+"-"+r(u(y),2,0)+"T"+r(h(y),2,0)+":"+r(p(y),2,0)+":"+r(g(y),2,0)+"."+r(w,3,0)+"Z"}:a,aT}var TK;function PRe(){if(TK)return EK;TK=1;var t=Ie(),e=ai(),r=Ei(),n=zoe(),i=ORe(),s=Us(),o=at(),a=o(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return t({target:"Date",proto:!0,forced:a},{toJSON:function(u){var d=r(this),h=n(d,"number");return typeof h=="number"&&!isFinite(h)?null:!("toISOString"in d)&&s(d)==="Date"?e(i,d):d.toISOString()}}),EK}var lT,jK;function IRe(){if(jK)return lT;jK=1,PRe(),iae();var t=_t(),e=wb();return t.JSON||(t.JSON={stringify:JSON.stringify}),lT=function(n,i,s){return e(t.JSON.stringify,null,arguments)},lT}var cT,OK;function RRe(){if(OK)return cT;OK=1;var t=IRe();return cT=t,cT}var uT,PK;function MRe(){return PK||(PK=1,uT=RRe()),uT}var ARe=MRe(),zm=Ve(ARe),IK={},RK={},dT,MK;function mae(){if(MK)return dT;MK=1;var t=zt(),e=jh(),r=Us(),n=function(i){return e.slice(0,i.length)===i};return dT=function(){return n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":t.Bun&&typeof Bun.version=="string"?"BUN":t.Deno&&typeof Deno.version=="object"?"DENO":r(t.process)==="process"?"NODE":t.window&&t.document?"BROWSER":"REST"}(),dT}var hT,AK;function DRe(){if(AK)return hT;AK=1;var t=TypeError;return hT=function(e,r){if(e<r)throw new t("Not enough arguments");return e},hT}var fT,DK;function gae(){if(DK)return fT;DK=1;var t=zt(),e=wb(),r=Kr(),n=mae(),i=jh(),s=Dh(),o=DRe(),a=t.Function,l=/MSIE .\./.test(i)||n==="BUN"&&function(){var u=t.Bun.version.split(".");return u.length<3||u[0]==="0"&&(u[1]<3||u[1]==="3"&&u[2]==="0")}();return fT=function(u,d){var h=d?2:1;return l?function(f,p){var m=o(arguments.length,1)>h,g=r(f)?f:a(f),v=m?s(arguments,h):[],y=m?function(){e(g,this,v)}:g;return d?u(y,p):u(y)}:u},fT}var $K;function $Re(){if($K)return RK;$K=1;var t=Ie(),e=zt(),r=gae(),n=r(e.setInterval,!0);return t({global:!0,bind:!0,forced:e.setInterval!==n},{setInterval:n}),RK}var FK={},qK;function FRe(){if(qK)return FK;qK=1;var t=Ie(),e=zt(),r=gae(),n=r(e.setTimeout,!0);return t({global:!0,bind:!0,forced:e.setTimeout!==n},{setTimeout:n}),FK}var LK;function yae(){return LK||(LK=1,$Re(),FRe()),IK}var pT,BK;function qRe(){if(BK)return pT;BK=1,yae();var t=_t();return pT=t.setTimeout,pT}var mT,zK;function LRe(){return zK||(zK=1,mT=qRe()),mT}var BRe=LRe(),ko=Ve(BRe),VK={},gT,WK;function zRe(){if(WK)return gT;WK=1;var t=Ei(),e=Cb(),r=Go();return gT=function(i){for(var s=t(this),o=r(s),a=arguments.length,l=e(a>1?arguments[1]:void 0,o),u=a>2?arguments[2]:void 0,d=u===void 0?o:e(u,o);d>l;)s[l++]=i;return s},gT}var UK;function VRe(){if(UK)return VK;UK=1;var t=Ie(),e=zRe(),r=cD();return t({target:"Array",proto:!0},{fill:e}),r("fill"),VK}var yT,HK;function WRe(){if(HK)return yT;HK=1,VRe();var t=an();return yT=t("Array","fill"),yT}var vT,KK;function URe(){if(KK)return vT;KK=1;var t=kr(),e=WRe(),r=Array.prototype;return vT=function(n){var i=n.fill;return n===r||t(r,n)&&i===r.fill?e:i},vT}var bT,GK;function HRe(){if(GK)return bT;GK=1;var t=URe();return bT=t,bT}var xT,YK;function KRe(){return YK||(YK=1,xT=HRe()),xT}var GRe=KRe(),Vm=Ve(GRe);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function gs(){return gs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gs.apply(this,arguments)}function Ji(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Ug(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var nR;typeof Object.assign!="function"?nR=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])}return r}:nR=Object.assign;var Bc=nR,QK=["","webkit","Moz","MS","ms","o"],YRe=typeof document>"u"?{style:{}}:document.createElement("div"),QRe="function",ed=Math.round,zc=Math.abs,fD=Date.now;function Mb(t,e){for(var r,n,i=e[0].toUpperCase()+e.slice(1),s=0;s<QK.length;){if(r=QK[s],n=r?r+i:e,n in t)return n;s++}}var Co;typeof window>"u"?Co={}:Co=window;var vae=Mb(YRe.style,"touchAction"),bae=vae!==void 0;function XRe(){if(!bae)return!1;var t={},e=Co.CSS&&Co.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){return t[r]=e?Co.CSS.supports("touch-action",r):!0}),t}var xae="compute",wae="auto",iR="manipulation",vc="none",qp="pan-x",Lp="pan-y",Hg=XRe(),JRe=/mobile|tablet|ip(ad|hone|od)|android/i,Sae="ontouchstart"in Co,ZRe=Mb(Co,"PointerEvent")!==void 0,eMe=Sae&&JRe.test(navigator.userAgent),Wm="touch",tMe="pen",pD="mouse",rMe="kinect",nMe=25,An=1,uu=2,wr=4,ii=8,n0=1,Um=2,Hm=4,Km=8,rh=16,Ls=Um|Hm,bc=Km|rh,_ae=Ls|bc,Eae=["x","y"],i0=["clientX","clientY"];function To(t,e,r){var n;if(t)if(t.forEach)t.forEach(e,r);else if(t.length!==void 0)for(n=0;n<t.length;)e.call(r,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t)}function Ab(t,e){return typeof t===QRe?t.apply(e&&e[0]||void 0,e):t}function Yl(t,e){return t.indexOf(e)>-1}function iMe(t){if(Yl(t,vc))return vc;var e=Yl(t,qp),r=Yl(t,Lp);return e&&r?vc:e||r?e?qp:Lp:Yl(t,iR)?iR:wae}var Nae=function(){function t(r,n){this.manager=r,this.set(n)}var e=t.prototype;return e.set=function(n){n===xae&&(n=this.compute()),bae&&this.manager.element.style&&Hg[n]&&(this.manager.element.style[vae]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return To(this.manager.recognizers,function(i){Ab(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),iMe(n.join(" "))},e.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=Yl(o,vc)&&!Hg[vc],l=Yl(o,Lp)&&!Hg[Lp],u=Yl(o,qp)&&!Hg[qp];if(a){var d=n.pointers.length===1,h=n.distance<2,f=n.deltaTime<250;if(d&&h&&f)return}if(!(u&&l)&&(a||l&&s&Ls||u&&s&bc))return this.preventSrc(i)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},t}();function mD(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function kae(t){var e=t.length;if(e===1)return{x:ed(t[0].clientX),y:ed(t[0].clientY)};for(var r=0,n=0,i=0;i<e;)r+=t[i].clientX,n+=t[i].clientY,i++;return{x:ed(r/e),y:ed(n/e)}}function XK(t){for(var e=[],r=0;r<t.pointers.length;)e[r]={clientX:ed(t.pointers[r].clientX),clientY:ed(t.pointers[r].clientY)},r++;return{timeStamp:fD(),pointers:e,center:kae(e),deltaX:t.deltaX,deltaY:t.deltaY}}function s0(t,e,r){r||(r=Eae);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.sqrt(n*n+i*i)}function sR(t,e,r){r||(r=Eae);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.atan2(i,n)*180/Math.PI}function Cae(t,e){return t===e?n0:zc(t)>=zc(e)?t<0?Um:Hm:e<0?Km:rh}function sMe(t,e){var r=e.center,n=t.offsetDelta||{},i=t.prevDelta||{},s=t.prevInput||{};(e.eventType===An||s.eventType===wr)&&(i=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:r.x,y:r.y}),e.deltaX=i.x+(r.x-n.x),e.deltaY=i.y+(r.y-n.y)}function Tae(t,e,r){return{x:e/t||0,y:r/t||0}}function oMe(t,e){return s0(e[0],e[1],i0)/s0(t[0],t[1],i0)}function aMe(t,e){return sR(e[1],e[0],i0)+sR(t[1],t[0],i0)}function lMe(t,e){var r=t.lastInterval||e,n=e.timeStamp-r.timeStamp,i,s,o,a;if(e.eventType!==ii&&(n>nMe||r.velocity===void 0)){var l=e.deltaX-r.deltaX,u=e.deltaY-r.deltaY,d=Tae(n,l,u);s=d.x,o=d.y,i=zc(d.x)>zc(d.y)?d.x:d.y,a=Cae(l,u),t.lastInterval=e}else i=r.velocity,s=r.velocityX,o=r.velocityY,a=r.direction;e.velocity=i,e.velocityX=s,e.velocityY=o,e.direction=a}function cMe(t,e){var r=t.session,n=e.pointers,i=n.length;r.firstInput||(r.firstInput=XK(e)),i>1&&!r.firstMultiple?r.firstMultiple=XK(e):i===1&&(r.firstMultiple=!1);var s=r.firstInput,o=r.firstMultiple,a=o?o.center:s.center,l=e.center=kae(n);e.timeStamp=fD(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=sR(a,l),e.distance=s0(a,l),sMe(r,e),e.offsetDirection=Cae(e.deltaX,e.deltaY);var u=Tae(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=zc(u.x)>zc(u.y)?u.x:u.y,e.scale=o?oMe(o.pointers,n):1,e.rotation=o?aMe(o.pointers,n):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,lMe(r,e);var d=t.element,h=e.srcEvent,f;h.composedPath?f=h.composedPath()[0]:h.path?f=h.path[0]:f=h.target,mD(f,d)&&(d=f),e.target=d}function uMe(t,e,r){var n=r.pointers.length,i=r.changedPointers.length,s=e&An&&n-i===0,o=e&(wr|ii)&&n-i===0;r.isFirst=!!s,r.isFinal=!!o,s&&(t.session={}),r.eventType=e,cMe(t,r),t.emit("hammer.input",r),t.recognize(r),t.session.prevInput=r}function Bp(t){return t.trim().split(/\s+/g)}function Kf(t,e,r){To(Bp(e),function(n){t.addEventListener(n,r,!1)})}function Gf(t,e,r){To(Bp(e),function(n){t.removeEventListener(n,r,!1)})}function JK(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var zh=function(){function t(r,n){var i=this;this.manager=r,this.callback=n,this.element=r.element,this.target=r.options.inputTarget,this.domHandler=function(s){Ab(r.options.enable,[r])&&i.handler(s)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&Kf(this.element,this.evEl,this.domHandler),this.evTarget&&Kf(this.target,this.evTarget,this.domHandler),this.evWin&&Kf(JK(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Gf(this.element,this.evEl,this.domHandler),this.evTarget&&Gf(this.target,this.evTarget,this.domHandler),this.evWin&&Gf(JK(this.element),this.evWin,this.domHandler)},t}();function Vc(t,e,r){if(t.indexOf&&!r)return t.indexOf(e);for(var n=0;n<t.length;){if(r&&t[n][r]==e||!r&&t[n]===e)return n;n++}return-1}var dMe={pointerdown:An,pointermove:uu,pointerup:wr,pointercancel:ii,pointerout:ii},hMe={2:Wm,3:tMe,4:pD,5:rMe},jae="pointerdown",Oae="pointermove pointerup pointercancel";Co.MSPointerEvent&&!Co.PointerEvent&&(jae="MSPointerDown",Oae="MSPointerMove MSPointerUp MSPointerCancel");var Pae=function(t){Ji(e,t);function e(){var n,i=e.prototype;return i.evEl=jae,i.evWin=Oae,n=t.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var r=e.prototype;return r.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=dMe[a],u=hMe[i.pointerType]||i.pointerType,d=u===Wm,h=Vc(s,i.pointerId,"pointerId");l&An&&(i.button===0||d)?h<0&&(s.push(i),h=s.length-1):l&(wr|ii)&&(o=!0),!(h<0)&&(s[h]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:u,srcEvent:i}),o&&s.splice(h,1))},e}(zh);function zp(t){return Array.prototype.slice.call(t,0)}function gD(t,e,r){for(var n=[],i=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];Vc(i,o)<0&&n.push(t[s]),i[s]=o,s++}return r&&(e?n=n.sort(function(a,l){return a[e]>l[e]}):n=n.sort()),n}var fMe={touchstart:An,touchmove:uu,touchend:wr,touchcancel:ii},pMe="touchstart touchmove touchend touchcancel",yD=function(t){Ji(e,t);function e(){var n;return e.prototype.evTarget=pMe,n=t.apply(this,arguments)||this,n.targetIds={},n}var r=e.prototype;return r.handler=function(i){var s=fMe[i.type],o=mMe.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Wm,srcEvent:i})},e}(zh);function mMe(t,e){var r=zp(t.touches),n=this.targetIds;if(e&(An|uu)&&r.length===1)return n[r[0].identifier]=!0,[r,r];var i,s,o=zp(t.changedTouches),a=[],l=this.target;if(s=r.filter(function(u){return mD(u.target,l)}),e===An)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),e&(wr|ii)&&delete n[o[i].identifier],i++;if(a.length)return[gD(s.concat(a),"identifier",!0),a]}var gMe={mousedown:An,mousemove:uu,mouseup:wr},yMe="mousedown",vMe="mousemove mouseup",vD=function(t){Ji(e,t);function e(){var n,i=e.prototype;return i.evEl=yMe,i.evWin=vMe,n=t.apply(this,arguments)||this,n.pressed=!1,n}var r=e.prototype;return r.handler=function(i){var s=gMe[i.type];s&An&&i.button===0&&(this.pressed=!0),s&uu&&i.which!==1&&(s=wr),this.pressed&&(s&wr&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:pD,srcEvent:i}))},e}(zh),bMe=2500,ZK=25;function eG(t){var e=t.changedPointers,r=e[0];if(r.identifier===this.primaryTouch){var n={x:r.clientX,y:r.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,bMe)}}function xMe(t,e){t&An?(this.primaryTouch=e.changedPointers[0].identifier,eG.call(this,e)):t&(wr|ii)&&eG.call(this,e)}function wMe(t){for(var e=t.srcEvent.clientX,r=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(e-i.x),o=Math.abs(r-i.y);if(s<=ZK&&o<=ZK)return!0}return!1}var Iae=function(){var t=function(e){Ji(r,e);function r(i,s){var o;return o=e.call(this,i,s)||this,o.handler=function(a,l,u){var d=u.pointerType===Wm,h=u.pointerType===pD;if(!(h&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(d)xMe.call(Ug(Ug(o)),l,u);else if(h&&wMe.call(Ug(Ug(o)),u))return;o.callback(a,l,u)}},o.touch=new yD(o.manager,o.handler),o.mouse=new vD(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=r.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},r}(zh);return t}();function SMe(t){var e,r=t.options.inputClass;return r?e=r:ZRe?e=Pae:eMe?e=yD:Sae?e=Iae:e=vD,new e(t,uMe)}function td(t,e,r){return Array.isArray(t)?(To(t,r[e],r),!0):!1}var by=1,Ui=2,nh=4,Ja=8,jo=Ja,Vp=16,Ms=32,_Me=1;function EMe(){return _Me++}function Kg(t,e){var r=e.manager;return r?r.get(t):t}function tG(t){return t&Vp?"cancel":t&Ja?"end":t&nh?"move":t&Ui?"start":""}var Gm=function(){function t(r){r===void 0&&(r={}),this.options=gs({enable:!0},r),this.id=EMe(),this.manager=null,this.state=by,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(n){return Bc(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(td(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=Kg(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return td(n,"dropRecognizeWith",this)?this:(n=Kg(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(td(n,"requireFailure",this))return this;var i=this.requireFail;return n=Kg(n,this),Vc(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(td(n,"dropRequireFailure",this))return this;n=Kg(n,this);var i=Vc(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<Ja&&o(i.options.event+tG(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=Ja&&o(i.options.event+tG(s))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=Ms},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(Ms|by)))return!1;n++}return!0},e.recognize=function(n){var i=Bc({},n);if(!Ab(this.options.enable,[this,i])){this.reset(),this.state=Ms;return}this.state&(jo|Vp|Ms)&&(this.state=by),this.state=this.process(i),this.state&(Ui|nh|Ja|Vp)&&this.tryEmit(i)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},t}(),oR=function(t){Ji(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,gs({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var r=e.prototype;return r.getTouchAction=function(){return[iR]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime<o.time;if(this.reset(),i.eventType&An&&this.count===0)return this.failTimeout();if(l&&u&&a){if(i.eventType!==wr)return this.failTimeout();var d=this.pTime?i.timeStamp-this.pTime<o.interval:!0,h=!this.pCenter||s0(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!h||!d?this.count=1:this.count+=1,this._input=i;var f=this.count%o.taps;if(f===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=jo,s.tryEmit()},o.interval),Ui):jo}return Ms},r.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=Ms},this.options.interval),Ms},r.reset=function(){clearTimeout(this._timer)},r.emit=function(){this.state===jo&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(Gm),ih=function(t){Ji(e,t);function e(n){return n===void 0&&(n={}),t.call(this,gs({pointers:1},n))||this}var r=e.prototype;return r.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},r.process=function(i){var s=this.state,o=i.eventType,a=s&(Ui|nh),l=this.attrTest(i);return a&&(o&ii||!l)?s|Vp:a||l?o&wr?s|Ja:s&Ui?s|nh:Ui:Ms},e}(Gm);function Rae(t){return t===rh?"down":t===Km?"up":t===Um?"left":t===Hm?"right":""}var bD=function(t){Ji(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,gs({event:"pan",threshold:10,pointers:1,direction:_ae},n))||this,i.pX=null,i.pY=null,i}var r=e.prototype;return r.getTouchAction=function(){var i=this.options.direction,s=[];return i&Ls&&s.push(Lp),i&bc&&s.push(qp),s},r.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,u=i.deltaX,d=i.deltaY;return l&s.direction||(s.direction&Ls?(l=u===0?n0:u<0?Um:Hm,o=u!==this.pX,a=Math.abs(i.deltaX)):(l=d===0?n0:d<0?Km:rh,o=d!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},r.attrTest=function(i){return ih.prototype.attrTest.call(this,i)&&(this.state&Ui||!(this.state&Ui)&&this.directionTest(i))},r.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=Rae(i.direction);s&&(i.additionalEvent=this.options.event+s),t.prototype.emit.call(this,i)},e}(ih),Mae=function(t){Ji(e,t);function e(n){return n===void 0&&(n={}),t.call(this,gs({event:"swipe",threshold:10,velocity:.3,direction:Ls|bc,pointers:1},n))||this}var r=e.prototype;return r.getTouchAction=function(){return bD.prototype.getTouchAction.call(this)},r.attrTest=function(i){var s=this.options.direction,o;return s&(Ls|bc)?o=i.overallVelocity:s&Ls?o=i.overallVelocityX:s&bc&&(o=i.overallVelocityY),t.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&zc(o)>this.options.velocity&&i.eventType&wr},r.emit=function(i){var s=Rae(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},e}(ih),Aae=function(t){Ji(e,t);function e(n){return n===void 0&&(n={}),t.call(this,gs({event:"pinch",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[vc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&Ui)},r.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}t.prototype.emit.call(this,i)},e}(ih),Dae=function(t){Ji(e,t);function e(n){return n===void 0&&(n={}),t.call(this,gs({event:"rotate",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[vc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&Ui)},e}(ih),$ae=function(t){Ji(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,gs({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var r=e.prototype;return r.getTouchAction=function(){return[wae]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(wr|ii)&&!u)this.reset();else if(i.eventType&An)this.reset(),this._timer=setTimeout(function(){s.state=jo,s.tryEmit()},o.time);else if(i.eventType&wr)return jo;return Ms},r.reset=function(){clearTimeout(this._timer)},r.emit=function(i){this.state===jo&&(i&&i.eventType&wr?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=fD(),this.manager.emit(this.options.event,this._input)))},e}(Gm),Fae={domEvents:!1,touchAction:xae,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},rG=[[Dae,{enable:!1}],[Aae,{enable:!1},["rotate"]],[Mae,{direction:Ls}],[bD,{direction:Ls},["swipe"]],[oR],[oR,{event:"doubletap",taps:2},["tap"]],[$ae]],NMe=1,nG=2;function iG(t,e){var r=t.element;if(r.style){var n;To(t.options.cssProps,function(i,s){n=Mb(r.style,s),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function kMe(t,e){var r=document.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}var sG=function(){function t(r,n){var i=this;this.options=Bc({},Fae,n||{}),this.options.inputTarget=this.options.inputTarget||r,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=r,this.input=SMe(this),this.touchAction=new Nae(this,this.options.touchAction),iG(this,!0),To(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var e=t.prototype;return e.set=function(n){return Bc(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?nG:NMe},e.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&jo)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==nG&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(Ui|nh|Ja)&&(i.curRecognizer=s,a=s),l++}},e.get=function(n){if(n instanceof Gm)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},e.add=function(n){if(td(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(td(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=Vc(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},e.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return To(Bp(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},e.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return To(Bp(n),function(o){i?s[o]&&s[o].splice(Vc(s[o],i),1):delete s[o]}),this},e.emit=function(n,i){this.options.domEvents&&kMe(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},e.destroy=function(){this.element&&iG(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),CMe={touchstart:An,touchmove:uu,touchend:wr,touchcancel:ii},TMe="touchstart",jMe="touchstart touchmove touchend touchcancel",OMe=function(t){Ji(e,t);function e(){var n,i=e.prototype;return i.evTarget=TMe,i.evWin=jMe,n=t.apply(this,arguments)||this,n.started=!1,n}var r=e.prototype;return r.handler=function(i){var s=CMe[i.type];if(s===An&&(this.started=!0),!!this.started){var o=PMe.call(this,i,s);s&(wr|ii)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Wm,srcEvent:i})}},e}(zh);function PMe(t,e){var r=zp(t.touches),n=zp(t.changedTouches);return e&(wr|ii)&&(r=gD(r.concat(n),"identifier",!0)),[r,n]}function qae(t,e,r){var n="DEPRECATED METHOD: "+e+`
`+r+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),t.apply(this,arguments)}}var Lae=qae(function(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;)(!r||r&&t[n[i]]===void 0)&&(t[n[i]]=e[n[i]]),i++;return t},"extend","Use `assign`."),IMe=qae(function(t,e){return Lae(t,e,!0)},"merge","Use `assign`.");function RMe(t,e,r){var n=e.prototype,i;i=t.prototype=Object.create(n),i.constructor=t,i._super=n,r&&Bc(i,r)}function oG(t,e){return function(){return t.apply(e,arguments)}}var Bae=function(){var t=function(r,n){return n===void 0&&(n={}),new sG(r,gs({recognizers:rG.concat()},n))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=_ae,t.DIRECTION_DOWN=rh,t.DIRECTION_LEFT=Um,t.DIRECTION_RIGHT=Hm,t.DIRECTION_UP=Km,t.DIRECTION_HORIZONTAL=Ls,t.DIRECTION_VERTICAL=bc,t.DIRECTION_NONE=n0,t.DIRECTION_DOWN=rh,t.INPUT_START=An,t.INPUT_MOVE=uu,t.INPUT_END=wr,t.INPUT_CANCEL=ii,t.STATE_POSSIBLE=by,t.STATE_BEGAN=Ui,t.STATE_CHANGED=nh,t.STATE_ENDED=Ja,t.STATE_RECOGNIZED=jo,t.STATE_CANCELLED=Vp,t.STATE_FAILED=Ms,t.Manager=sG,t.Input=zh,t.TouchAction=Nae,t.TouchInput=yD,t.MouseInput=vD,t.PointerEventInput=Pae,t.TouchMouseInput=Iae,t.SingleTouchInput=OMe,t.Recognizer=Gm,t.AttrRecognizer=ih,t.Tap=oR,t.Pan=bD,t.Swipe=Mae,t.Pinch=Aae,t.Rotate=Dae,t.Press=$ae,t.on=Kf,t.off=Gf,t.each=To,t.merge=IMe,t.extend=Lae,t.bindFn=oG,t.assign=Bc,t.inherit=RMe,t.bindFn=oG,t.prefixed=Mb,t.toArray=zp,t.inArray=Vc,t.uniqueArray=gD,t.splitStr=Bp,t.boolOrFn=Ab,t.hasParent=mD,t.addEventListeners=Kf,t.removeEventListeners=Gf,t.defaults=Bc({},Fae,{preset:rG}),t}();Bae.defaults;APe("DELETE");function Db(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return MMe(e.length?e:[r0()])}function MMe(t){let[e,r,n]=AMe(t),i=1;const s=()=>{const o=2091639*e+i*23283064365386963e-26;return e=r,r=n,n=o-(i=o|0)};return s.uint32=()=>s()*4294967296,s.fract53=()=>s()+(s()*2097152|0)*11102230246251565e-32,s.algorithm="Alea",s.seed=t,s.version="0.9",s}function AMe(){const t=DMe();let e=t(" "),r=t(" "),n=t(" ");for(let i=0;i<arguments.length;i++)e-=t(i<0||arguments.length<=i?void 0:arguments[i]),e<0&&(e+=1),r-=t(i<0||arguments.length<=i?void 0:arguments[i]),r<0&&(r+=1),n-=t(i<0||arguments.length<=i?void 0:arguments[i]),n<0&&(n+=1);return[e,r,n]}function DMe(){let t=4022871197;return function(e){const r=e.toString();for(let n=0;n<r.length;n++){t+=r.charCodeAt(n);let i=.02519603282416938*t;t=i>>>0,i-=t,i*=t,t=i>>>0,i-=t,t+=i*4294967296}return(t>>>0)*23283064365386963e-26}}function $Me(){const t=()=>{};return{on:t,off:t,destroy:t,emit:t,get(){return{set:t}}}}const xD=typeof window<"u"?window.Hammer||Bae:function(){return $Me()};function As(t){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const r=xD(this._dom.overlay);r.on("tap",se(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{r.destroy()});const n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];kt(n).call(n,i=>{r.on(i,s=>{s.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=i=>{FMe(i.target,t)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=i=>{("key"in i?i.key==="Escape":i.keyCode===27)&&this.deactivate()}}Xoe(As.prototype);As.current=null;As.prototype.destroy=function(){this.deactivate();for(const r of gc(t=No(e=this._cleanupQueue).call(e,0)).call(t)){var t,e;r()}};As.prototype.activate=function(){As.current&&As.current.deactivate(),As.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};As.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};As.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};function FMe(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}const qMe=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,LMe=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,BMe=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,zMe=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function ua(t){if(t)for(;t.hasChildNodes()===!0;){const e=t.firstChild;e&&(ua(e),t.removeChild(e))}}function fd(t){return t instanceof String||typeof t=="string"}function aG(t){return typeof t=="object"&&t!==null}function Wc(t,e,r,n){let i=!1;n===!0&&(i=e[r]===null&&t[r]!==void 0),i?delete t[r]:t[r]=e[r]}function zae(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;for(const n in t)if(e[n]!==void 0)if(e[n]===null||typeof e[n]!="object")Wc(t,e,n,r);else{const i=t[n],s=e[n];aG(i)&&aG(s)&&zae(i,s,r)}}function Vh(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(ar(r))throw new TypeError("Arrays are not supported by deepExtend");for(let i=0;i<t.length;i++){const s=t[i];if(Object.prototype.hasOwnProperty.call(r,s))if(r[s]&&r[s].constructor===Object)e[s]===void 0&&(e[s]={}),e[s].constructor===Object?Ot(e[s],r[s],!1,n):Wc(e,r,s,n);else{if(ar(r[s]))throw new TypeError("Arrays are not supported by deepExtend");Wc(e,r,s,n)}}return e}function o0(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(ar(r))throw new TypeError("Arrays are not supported by deepExtend");for(const i in r)if(Object.prototype.hasOwnProperty.call(r,i)&&!Xa(t).call(t,i))if(r[i]&&r[i].constructor===Object)e[i]===void 0&&(e[i]={}),e[i].constructor===Object?Ot(e[i],r[i]):Wc(e,r,i,n);else if(ar(r[i])){e[i]=[];for(let s=0;s<r[i].length;s++)e[i].push(r[i][s])}else Wc(e,r,i,n);return e}function Ot(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)||r===!0)if(typeof e[s]=="object"&&e[s]!==null&&z9(e[s])===Object.prototype)t[s]===void 0?t[s]=Ot({},e[s],r):typeof t[s]=="object"&&t[s]!==null&&z9(t[s])===Object.prototype?Ot(t[s],e[s],r):Wc(t,e,s,n);else if(ar(e[s])){var i;t[s]=Is(i=e[s]).call(i)}else Wc(t,e,s,n);return t}function a0(t,e){return[...t,e]}function VMe(t){return Is(t).call(t)}function WMe(t){return t.getBoundingClientRect().left}function UMe(t){return t.getBoundingClientRect().top}function tt(t,e){if(ar(t)){const r=t.length;for(let n=0;n<r;n++)e(t[n],n,t)}else for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(t[r],r,t)}function wD(t){let e;switch(t.length){case 3:case 4:return e=LMe.exec(t),e?{r:ls(e[1]+e[1],16),g:ls(e[2]+e[2],16),b:ls(e[3]+e[3],16)}:null;case 6:case 7:return e=qMe.exec(t),e?{r:ls(e[1],16),g:ls(e[2],16),b:ls(e[3],16)}:null;default:return null}}function qi(t,e){if(Xa(t).call(t,"rgba"))return t;if(Xa(t).call(t,"rgb")){const r=t.substr(xt(t).call(t,"(")+1).replace(")","").split(",");return"rgba("+r[0]+","+r[1]+","+r[2]+","+e+")"}else{const r=wD(t);return r==null?t:"rgba("+r.r+","+r.g+","+r.b+","+e+")"}}function Vae(t,e,r){var n;return"#"+Is(n=((1<<24)+(t<<16)+(e<<8)+r).toString(16)).call(n,1)}function aR(t,e){if(fd(t)){let n=t;if(Uae(n)){var r;const i=th(r=n.substr(4).substr(0,n.length-5).split(",")).call(r,function(s){return ls(s)});n=Vae(i[0],i[1],i[2])}if(Wae(n)===!0){const i=HMe(n),s={h:i.h,s:i.s*.8,v:Math.min(1,i.v*1.02)},o={h:i.h,s:Math.min(1,i.s*1.25),v:i.v*.8},a=lR(o.h,o.s,o.v),l=lR(s.h,s.s,s.v);return{background:n,border:a,highlight:{background:l,border:a},hover:{background:l,border:a}}}else return{background:n,border:n,highlight:{background:n,border:n},hover:{background:n,border:n}}}else return{background:t.background||void 0,border:t.border||void 0,highlight:fd(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||void 0,border:t.highlight&&t.highlight.border||void 0},hover:fd(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||void 0,background:t.hover&&t.hover.background||void 0}}}function Ef(t,e,r){t=t/255,e=e/255,r=r/255;const n=Math.min(t,Math.min(e,r)),i=Math.max(t,Math.max(e,r));if(n===i)return{h:0,s:0,v:n};const s=t===n?e-r:r===n?t-e:r-t,a=60*((t===n?3:r===n?1:5)-s/(i-n))/360,l=(i-n)/i;return{h:a,s:l,v:i}}function xy(t,e,r){let n,i,s;const o=Math.floor(t*6),a=t*6-o,l=r*(1-e),u=r*(1-a*e),d=r*(1-(1-a)*e);switch(o%6){case 0:n=r,i=d,s=l;break;case 1:n=u,i=r,s=l;break;case 2:n=l,i=r,s=d;break;case 3:n=l,i=u,s=r;break;case 4:n=d,i=l,s=r;break;case 5:n=r,i=l,s=u;break}return{r:Math.floor(n*255),g:Math.floor(i*255),b:Math.floor(s*255)}}function lR(t,e,r){const n=xy(t,e,r);return Vae(n.r,n.g,n.b)}function HMe(t){const e=wD(t);if(!e)throw new TypeError("'".concat(t,"' is not a valid color."));return Ef(e.r,e.g,e.b)}function Wae(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)}function Uae(t){return BMe.test(t)}function KMe(t){return zMe.test(t)}function Za(t){if(t===null||typeof t!="object")return null;if(t instanceof Element)return t;const e=yc(t);for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&typeof t[r]=="object"&&(e[r]=Za(t[r]));return e}function Mi(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=function(p){return p!=null},s=function(p){return p!==null&&typeof p=="object"},o=function(p){for(const m in p)if(Object.prototype.hasOwnProperty.call(p,m))return!1;return!0};if(!s(t))throw new Error("Parameter mergeTarget must be an object");if(!s(e))throw new Error("Parameter options must be an object");if(!i(r))throw new Error("Parameter option must have a value");if(!s(n))throw new Error("Parameter globalOptions must be an object");const a=function(p,m,g){s(p[g])||(p[g]={});const v=m[g],y=p[g];for(const b in v)Object.prototype.hasOwnProperty.call(v,b)&&(y[b]=v[b])},l=e[r],d=s(n)&&!o(n)?n[r]:void 0,h=d?d.enabled:void 0;if(l===void 0)return;if(typeof l=="boolean"){s(t[r])||(t[r]={}),t[r].enabled=l;return}if(l===null&&!s(t[r]))if(i(d))t[r]=yc(d);else return;if(!s(l))return;let f=!0;l.enabled!==void 0?f=l.enabled:h!==void 0&&(f=d.enabled),a(t,e,r),t[r].enabled=f}const GMe={linear(t){return t},easeInQuad(t){return t*t},easeOutQuad(t){return t*(2-t)},easeInOutQuad(t){return t<.5?2*t*t:-1+(4-2*t)*t},easeInCubic(t){return t*t*t},easeOutCubic(t){return--t*t*t+1},easeInOutCubic(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart(t){return t*t*t*t},easeOutQuart(t){return 1- --t*t*t*t},easeInOutQuart(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint(t){return t*t*t*t*t},easeOutQuint(t){return 1+--t*t*t*t*t},easeInOutQuint(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}};function da(t,e){let r;ar(e)||(e=[e]);for(const n of t)if(n){r=n[e[0]];for(let i=1;i<e.length;i++)r&&(r=r[e[i]]);if(typeof r<"u")break}return r}const YMe={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};let QMe=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}setCloseCallback(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}_isColorString(e){if(typeof e=="string")return YMe[e]}setColor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e==="none")return;let n;const i=this._isColorString(e);if(i!==void 0&&(e=i),fd(e)===!0){if(Uae(e)===!0){const s=e.substr(4).substr(0,e.length-5).split(",");n={r:s[0],g:s[1],b:s[2],a:1}}else if(KMe(e)===!0){const s=e.substr(5).substr(0,e.length-6).split(",");n={r:s[0],g:s[1],b:s[2],a:s[3]}}else if(Wae(e)===!0){const s=wD(e);n={r:s.r,g:s.g,b:s.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){const s=e.a!==void 0?e.a:"1.0";n={r:e.r,g:e.g,b:e.b,a:s}}if(n===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+zm(e));this._setColor(n,r)}show(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0&&(this.previousColor=xr({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",ko(()=>{this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0)},0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)===!0&&(this.initialColor=xr({},e)),this.color=e;const n=Ef(e.r,e.g,e.b),i=2*Math.PI,s=this.r*n.s,o=this.centerCoordinates.x+s*Math.sin(i*n.h),a=this.centerCoordinates.y+s*Math.cos(i*n.h);this.colorPickerSelector.style.left=o-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=a-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}_setOpacity(e){this.color.a=e/100,this._updatePicker(this.color)}_setBrightness(e){const r=Ef(this.color.r,this.color.g,this.color.b);r.v=e/100;const n=xy(r.h,r.s,r.v);n.a=this.color.a,this.color=n,this._updatePicker()}_updatePicker(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color;const r=Ef(e.r,e.g,e.b),n=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const i=this.colorPickerCanvas.clientWidth,s=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,i,s),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-r.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),Vm(n).call(n),this.brightnessRange.value=100*r.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){var e,r,n,i;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){const o=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{const o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);const s=this;this.opacityRange.onchange=function(){s._setOpacity(this.value)},this.opacityRange.oninput=function(){s._setOpacity(this.value)},this.brightnessRange.onchange=function(){s._setBrightness(this.value)},this.brightnessRange.oninput=function(){s._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=se(e=this._hide).call(e,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=se(r=this._apply).call(r,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=se(n=this._save).call(n,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=se(i=this._loadLast).call(i,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new xD(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",e=>{e.isFirst&&this._moveSelector(e)}),this.hammer.on("tap",e=>{this._moveSelector(e)}),this.hammer.on("panstart",e=>{this._moveSelector(e)}),this.hammer.on("panmove",e=>{this._moveSelector(e)}),this.hammer.on("panend",e=>{this._moveSelector(e)})}_generateHueCircle(){if(this.generated===!1){const e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const r=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,r,n);let i,s,o,a;this.centerCoordinates={x:r*.5,y:n*.5},this.r=.49*r;const l=2*Math.PI/360,u=1/360,d=1/this.r;let h;for(o=0;o<360;o++)for(a=0;a<this.r;a++)i=this.centerCoordinates.x+a*Math.sin(l*o),s=this.centerCoordinates.y+a*Math.cos(l*o),h=xy(o*u,a*d,1),e.fillStyle="rgb("+h.r+","+h.g+","+h.b+")",e.fillRect(i-.5,s-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,r,n)}this.generated=!0}_moveSelector(e){const r=this.colorPickerDiv.getBoundingClientRect(),n=e.center.x-r.left,i=e.center.y-r.top,s=.5*this.colorPickerDiv.clientHeight,o=.5*this.colorPickerDiv.clientWidth,a=n-o,l=i-s,u=Math.atan2(a,l),d=.98*Math.min(Math.sqrt(a*a+l*l),o),h=Math.cos(u)*d+s,f=Math.sin(u)*d+o;this.colorPickerSelector.style.top=h-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=f-.5*this.colorPickerSelector.clientWidth+"px";let p=u/(2*Math.PI);p=p<0?p+1:p;const m=d/this.r,g=Ef(this.color.r,this.color.g,this.color.b);g.h=p,g.s=m;const v=xy(g.h,g.s,g.v);v.a=this.color.a,this.color=v,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}};function cR(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(e.length<1)throw new TypeError("Invalid arguments.");if(e.length===1)return document.createTextNode(e[0]);{const n=document.createElement(e[0]);return n.appendChild(cR(...Is(e).call(e,1))),n}}let XMe=class{constructor(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:()=>!1;this.parent=e,this.changedOptions=[],this.container=r,this.allowCreation=!1,this.hideOption=s,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},xr(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new QMe(i),this.wrapper=void 0}setOptions(e){if(e!==void 0){this.popupHistory={},this._removePopup();let r=!0;if(typeof e=="string")this.options.filter=e;else if(ar(e))this.options.filter=e.join();else if(typeof e=="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),Gn(e)!==void 0&&(this.options.filter=Gn(e)),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(r=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,r=e):typeof e=="function"&&(this.options.filter=e,r=!0);Gn(this.options)===!1&&(r=!1),this.options.enabled=r}this._clean()}setModuleOptions(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];const e=Gn(this.options);let r=0,n=!1;for(const i in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,i)&&(this.allowCreation=!1,n=!1,typeof e=="function"?(n=e(i,[]),n=n||this._handleObject(this.configureOptions[i],[i],!0)):(e===!0||xt(e).call(e,i)!==-1)&&(n=!0),n!==!1&&(this.allowCreation=!0,r>0&&this._makeItem([]),this._makeHeader(i),this._handleObject(this.configureOptions[i],[i])),r++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(let e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}_clean(){for(let e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(e){let r=this.moduleOptions;for(let n=0;n<e.length;n++)if(r[e[n]]!==void 0)r=r[e[n]];else{r=void 0;break}return r}_makeItem(e){if(this.allowCreation===!0){const s=document.createElement("div");s.className="vis-configuration vis-config-item vis-config-s"+e.length;for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return kt(n).call(n,o=>{s.appendChild(o)}),this.domElements.push(s),this.domElements.length}return 0}_makeHeader(e){const r=document.createElement("div");r.className="vis-configuration vis-config-header",r.innerText=e,this._makeItem([],r)}_makeLabel(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=document.createElement("div");if(i.className="vis-configuration vis-config-label vis-config-s"+r.length,n===!0){for(;i.firstChild;)i.removeChild(i.firstChild);i.appendChild(cR("i","b",e))}else i.innerText=e+":";return i}_makeDropdown(e,r,n){const i=document.createElement("select");i.className="vis-configuration vis-config-select";let s=0;r!==void 0&&xt(e).call(e,r)!==-1&&(s=xt(e).call(e,r));for(let l=0;l<e.length;l++){const u=document.createElement("option");u.value=e[l],l===s&&(u.selected="selected"),u.innerText=e[l],i.appendChild(u)}const o=this;i.onchange=function(){o._update(this.value,n)};const a=this._makeLabel(n[n.length-1],n);this._makeItem(n,a,i)}_makeRange(e,r,n){const i=e[0],s=e[1],o=e[2],a=e[3],l=document.createElement("input");l.className="vis-configuration vis-config-range";try{l.type="range",l.min=s,l.max=o}catch{}l.step=a;let u="",d=0;r!==void 0?(r<0&&r*1.2<s?(l.min=Math.ceil(r*1.2),d=l.min,u="range increased"):r/1.2<s&&(l.min=Math.ceil(r/1.2),d=l.min,u="range increased"),r*1.2>o&&o!==1&&(l.max=Math.ceil(r*1.2),d=l.max,u="range increased"),l.value=r):l.value=i;const h=document.createElement("input");h.className="vis-configuration vis-config-rangeinput",h.value=l.value;const f=this;l.onchange=function(){h.value=this.value,f._update(Number(this.value),n)},l.oninput=function(){h.value=this.value};const p=this._makeLabel(n[n.length-1],n),m=this._makeItem(n,p,l,h);u!==""&&this.popupHistory[m]!==d&&(this.popupHistory[m]=d,this._setupPopup(u,m))}_makeButton(){if(this.options.showButton===!0){const e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerText="generate options",e.onclick=()=>{this._printOptions()},e.onmouseover=()=>{e.className="vis-configuration vis-config-button hover"},e.onmouseout=()=>{e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}_setupPopup(e,r){if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){const n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerText=e,n.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:r}}}_removePopup(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(this.popupDiv.html!==void 0){const r=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=r.left+"px",this.popupDiv.html.style.top=r.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=ko(()=>{this.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=ko(()=>{this._removePopup()},1800)}}_makeCheckbox(e,r,n){const i=document.createElement("input");i.type="checkbox",i.className="vis-configuration vis-config-checkbox",i.checked=e,r!==void 0&&(i.checked=r,r!==e&&(typeof e=="object"?r!==e.enabled&&this.changedOptions.push({path:n,value:r}):this.changedOptions.push({path:n,value:r})));const s=this;i.onchange=function(){s._update(this.checked,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}_makeTextInput(e,r,n){const i=document.createElement("input");i.type="text",i.className="vis-configuration vis-config-text",i.value=r,r!==e&&this.changedOptions.push({path:n,value:r});const s=this;i.onchange=function(){s._update(this.value,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}_makeColorField(e,r,n){const i=e[1],s=document.createElement("div");r=r===void 0?i:r,r!=="none"?(s.className="vis-configuration vis-config-colorBlock",s.style.backgroundColor=r):s.className="vis-configuration vis-config-colorBlock none",r=r===void 0?i:r,s.onclick=()=>{this._showColorPicker(r,s,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,s)}_showColorPicker(e,r,n){r.onclick=function(){},this.colorPicker.insertTo(r),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(i=>{const s="rgba("+i.r+","+i.g+","+i.b+","+i.a+")";r.style.backgroundColor=s,this._update(s,n)}),this.colorPicker.setCloseCallback(()=>{r.onclick=()=>{this._showColorPicker(e,r,n)}})}_handleObject(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=!1;const s=Gn(this.options);let o=!1;for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)){i=!0;const l=e[a],u=a0(r,a);if(typeof s=="function"&&(i=s(a,r),i===!1&&!ar(l)&&typeof l!="string"&&typeof l!="boolean"&&l instanceof Object&&(this.allowCreation=!1,i=this._handleObject(l,u,!0),this.allowCreation=n===!1)),i!==!1){o=!0;const d=this._getValue(u);if(ar(l))this._handleArray(l,d,u);else if(typeof l=="string")this._makeTextInput(l,d,u);else if(typeof l=="boolean")this._makeCheckbox(l,d,u);else if(l instanceof Object){if(!this.hideOption(r,a,this.moduleOptions))if(l.enabled!==void 0){const h=a0(u,"enabled"),f=this._getValue(h);if(f===!0){const p=this._makeLabel(a,u,!0);this._makeItem(u,p),o=this._handleObject(l,u)||o}else this._makeCheckbox(l,f,u)}else{const h=this._makeLabel(a,u,!0);this._makeItem(u,h),o=this._handleObject(l,u)||o}}else console.error("dont know how to handle",l,a,u)}}return o}_handleArray(e,r,n){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,r,n),e[1]!==r&&this.changedOptions.push({path:n,value:r})):typeof e[0]=="string"?(this._makeDropdown(e,r,n),e[0]!==r&&this.changedOptions.push({path:n,value:r})):typeof e[0]=="number"&&(this._makeRange(e,r,n),e[0]!==r&&this.changedOptions.push({path:n,value:Number(r)}))}_update(e,r){const n=this._constructOptions(e,r);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",n),this.initialized=!0,this.parent.setOptions(n)}_constructOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n;e=e==="true"?!0:e,e=e==="false"?!1:e;for(let s=0;s<r.length;s++)r[s]!=="global"&&(i[r[s]]===void 0&&(i[r[s]]={}),s!==r.length-1?i=i[r[s]]:i[r[s]]=e);return n}_printOptions(){const e=this.getOptions();for(;this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(cR("pre","const options = "+zm(e,null,2)))}getOptions(){const e={};for(let r=0;r<this.changedOptions.length;r++)this._constructOptions(this.changedOptions[r].value,this.changedOptions[r].path,e);return e}},JMe=class{constructor(e,r){this.container=e,this.overflowMethod=r||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(e,r){this.x=ls(e),this.y=ls(r)}setText(e){if(e instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(e)}else this.frame.innerText=e}show(e){if(e===void 0&&(e=!0),e===!0){const r=this.frame.clientHeight,n=this.frame.clientWidth,i=this.frame.parentNode.clientHeight,s=this.frame.parentNode.clientWidth;let o=0,a=0;if(this.overflowMethod=="flip"){let l=!1,u=!0;this.y-r<this.padding&&(u=!1),this.x+n>s-this.padding&&(l=!0),l?o=this.x-n:o=this.x,u?a=this.y-r:a=this.y}else a=this.y-r,a+r+this.padding>i&&(a=i-r-this.padding),a<this.padding&&(a=this.padding),o=this.x,o+n+this.padding>s&&(o=s-n-this.padding),o<this.padding&&(o=this.padding);this.frame.style.left=o+"px",this.frame.style.top=a+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}},ff=!1,lG;const uR="background: #FFeeee; color: #dd0000";let ZMe=class er{static validate(e,r,n){ff=!1,lG=r;let i=r;return n!==void 0&&(i=r[n]),er.parse(e,i,[]),ff}static parse(e,r,n){for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&er.check(i,e,r,n)}static check(e,r,n,i){if(n[e]===void 0&&n.__any__===void 0){er.getSuggestion(e,n,i);return}let s=e,o=!0;n[e]===void 0&&n.__any__!==void 0&&(s="__any__",o=er.getType(r[e])==="object");let a=n[s];o&&a.__type__!==void 0&&(a=a.__type__),er.checkFields(e,r,n,s,a,i)}static checkFields(e,r,n,i,s,o){const a=function(d){console.error("%c"+d+er.printLocation(o,e),uR)},l=er.getType(r[e]),u=s[l];u!==void 0?er.getType(u)==="array"&&xt(u).call(u,r[e])===-1?(a('Invalid option detected in "'+e+'". Allowed values are:'+er.print(u)+' not "'+r[e]+'". '),ff=!0):l==="object"&&i!=="__any__"&&(o=a0(o,e),er.parse(r[e],n[i],o)):s.any===void 0&&(a('Invalid type received for "'+e+'". Expected: '+er.print(nr(s))+". Received ["+l+'] "'+r[e]+'"'),ff=!0)}static getType(e){const r=typeof e;return r==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":ar(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":r==="number"?"number":r==="boolean"?"boolean":r==="string"?"string":r===void 0?"undefined":r}static getSuggestion(e,r,n){const i=er.findInOptions(e,r,n,!1),s=er.findInOptions(e,lG,[],!0),o=8,a=4;let l;i.indexMatch!==void 0?l=" in "+er.printLocation(i.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+i.indexMatch+`"?

`:s.distance<=a&&i.distance>s.distance?l=" in "+er.printLocation(i.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+er.printLocation(s.path,s.closestMatch,""):i.distance<=o?l='. Did you mean "'+i.closestMatch+'"?'+er.printLocation(i.path,e):l=". Did you mean one of these: "+er.print(nr(r))+er.printLocation(n,e),console.error('%cUnknown option detected: "'+e+'"'+l,uR),ff=!0}static findInOptions(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=1e9,o="",a=[];const l=e.toLowerCase();let u;for(const h in r){let f;if(r[h].__type__!==void 0&&i===!0){const p=er.findInOptions(e,r[h],a0(n,h));s>p.distance&&(o=p.closestMatch,a=p.path,s=p.distance,u=p.indexMatch)}else{var d;xt(d=h.toLowerCase()).call(d,l)!==-1&&(u=h),f=er.levenshteinDistance(e,h),s>f&&(o=h,a=VMe(n),s=f)}}return{closestMatch:o,path:a,distance:s,indexMatch:u}}static printLocation(e,r){let i=`

`+(arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`)+`options = {
`;for(let s=0;s<e.length;s++){for(let o=0;o<s+1;o++)i+="  ";i+=e[s]+`: {
`}for(let s=0;s<e.length+1;s++)i+="  ";i+=r+`
`;for(let s=0;s<e.length+1;s++){for(let o=0;o<e.length-s;o++)i+="  ";i+=`}
`}return i+`

`}static print(e){return zm(e).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}static levenshteinDistance(e,r){if(e.length===0)return r.length;if(r.length===0)return e.length;const n=[];let i;for(i=0;i<=r.length;i++)n[i]=[i];let s;for(s=0;s<=e.length;s++)n[0][s]=s;for(i=1;i<=r.length;i++)for(s=1;s<=e.length;s++)r.charAt(i-1)==e.charAt(s-1)?n[i][s]=n[i-1][s-1]:n[i][s]=Math.min(n[i-1][s-1]+1,Math.min(n[i][s-1]+1,n[i-1][s]+1));return n[r.length][e.length]}};const eAe=As,tAe=XMe,pd=xD,rAe=JMe,Hae=uR,nAe=ZMe;function iAe(t){return Ra=t,lAe()}var Kae={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},SD=yc(Kae);SD.color="color.color";SD.style="dashes";var _n={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},cG={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},Ra="",sh=0,et="",De="",Un=_n.NULL;function sAe(){sh=0,et=Ra.charAt(0)}function Ar(){sh++,et=Ra.charAt(sh)}function ju(){return Ra.charAt(sh+1)}function uG(t){var e=t.charCodeAt(0);return e<47?e===35||e===46:e<59?e>47:e<91?e>64:e<96?e===95:e<123?e>96:!1}function al(t,e){if(t||(t={}),e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function oAe(t,e,r){for(var n=e.split("."),i=t;n.length;){var s=n.shift();n.length?(i[s]||(i[s]={}),i=i[s]):i[s]=r}}function Gae(t,e){for(var r,n,i=null,s=[t],o=t;o.parent;)s.push(o.parent),o=o.parent;if(o.nodes){for(r=0,n=o.nodes.length;r<n;r++)if(e.id===o.nodes[r].id){i=o.nodes[r];break}}for(i||(i={id:e.id},t.node&&(i.attr=al(i.attr,t.node))),r=s.length-1;r>=0;r--){var a,l=s[r];l.nodes||(l.nodes=[]),xt(a=l.nodes).call(a,i)===-1&&l.nodes.push(i)}e.attr&&(i.attr=al(i.attr,e.attr))}function aAe(t,e){if(t.edges||(t.edges=[]),t.edges.push(e),t.edge){var r=al({},t.edge);e.attr=al(r,e.attr)}}function Yae(t,e,r,n,i){var s={from:e,to:r,type:n};return t.edge&&(s.attr=al({},t.edge)),s.attr=al(s.attr||{},i),i!=null&&i.hasOwnProperty("arrows")&&i.arrows!=null&&(s.arrows={to:{enabled:!0,type:i.arrows.type}},i.arrows=null),s}function It(){for(Un=_n.NULL,De="";et===" "||et==="	"||et===`
`||et==="\r";)Ar();do{var t=!1;if(et==="#"){for(var e=sh-1;Ra.charAt(e)===" "||Ra.charAt(e)==="	";)e--;if(Ra.charAt(e)===`
`||Ra.charAt(e)===""){for(;et!=""&&et!=`
`;)Ar();t=!0}}if(et==="/"&&ju()==="/"){for(;et!=""&&et!=`
`;)Ar();t=!0}if(et==="/"&&ju()==="*"){for(;et!="";)if(et==="*"&&ju()==="/"){Ar(),Ar();break}else Ar();t=!0}for(;et===" "||et==="	"||et===`
`||et==="\r";)Ar()}while(t);if(et===""){Un=_n.DELIMITER;return}var r=et+ju();if(cG[r]){Un=_n.DELIMITER,De=r,Ar(),Ar();return}if(cG[et]){Un=_n.DELIMITER,De=et,Ar();return}if(uG(et)||et==="-"){for(De+=et,Ar();uG(et);)De+=et,Ar();De==="false"?De=!1:De==="true"?De=!0:isNaN(Number(De))||(De=Number(De)),Un=_n.IDENTIFIER;return}if(et==='"'){for(Ar();et!=""&&(et!='"'||et==='"'&&ju()==='"');)et==='"'?(De+=et,Ar()):et==="\\"&&ju()==="n"?(De+=`
`,Ar()):De+=et,Ar();if(et!='"')throw En('End of string " expected');Ar(),Un=_n.IDENTIFIER;return}for(Un=_n.UNKNOWN;et!="";)De+=et,Ar();throw new SyntaxError('Syntax error in part "'+Zae(De,30)+'"')}function lAe(){var t={};if(sAe(),It(),De==="strict"&&(t.strict=!0,It()),(De==="graph"||De==="digraph")&&(t.type=De,It()),Un===_n.IDENTIFIER&&(t.id=De,It()),De!="{")throw En("Angle bracket { expected");if(It(),Qae(t),De!="}")throw En("Angle bracket } expected");if(It(),De!=="")throw En("End of file expected");return It(),delete t.node,delete t.edge,delete t.graph,t}function Qae(t){for(;De!==""&&De!="}";)cAe(t),De===";"&&It()}function cAe(t){var e=Xae(t);if(e){Jae(t,e);return}var r=uAe(t);if(!r){if(Un!=_n.IDENTIFIER)throw En("Identifier expected");var n=De;if(It(),De==="="){if(It(),Un!=_n.IDENTIFIER)throw En("Identifier expected");t[n]=De,It()}else dAe(t,n)}}function Xae(t){var e=null;if(De==="subgraph"&&(e={},e.type="subgraph",It(),Un===_n.IDENTIFIER&&(e.id=De,It())),De==="{"){if(It(),e||(e={}),e.parent=t,e.node=t.node,e.edge=t.edge,e.graph=t.graph,Qae(e),De!="}")throw En("Angle bracket } expected");It(),delete e.node,delete e.edge,delete e.graph,delete e.parent,t.subgraphs||(t.subgraphs=[]),t.subgraphs.push(e)}return e}function uAe(t){return De==="node"?(It(),t.node=Yf(),"node"):De==="edge"?(It(),t.edge=Yf(),"edge"):De==="graph"?(It(),t.graph=Yf(),"graph"):null}function dAe(t,e){var r={id:e},n=Yf();n&&(r.attr=n),Gae(t,r),Jae(t,e)}function Jae(t,e){for(;De==="->"||De==="--";){var r,n=De;It();var i=Xae(t);if(i)r=i;else{if(Un!=_n.IDENTIFIER)throw En("Identifier or subgraph expected");r=De,Gae(t,{id:r}),It()}var s=Yf(),o=Yae(t,e,r,n,s);aAe(t,o),e=r}}function Yf(){for(var t,e=null,r={dashed:!0,solid:!1,dotted:[1,5]},n={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},i=new Array,s=new Array;De==="[";){for(It(),e={};De!==""&&De!="]";){if(Un!=_n.IDENTIFIER)throw En("Attribute name expected");var o=De;if(It(),De!="=")throw En("Equal sign = expected");if(It(),Un!=_n.IDENTIFIER)throw En("Attribute value expected");var a=De;o==="style"&&(a=r[a]);var l;o==="arrowhead"&&(l=n[a],o="arrows",a={to:{enabled:!0,type:l}}),o==="arrowtail"&&(l=n[a],o="arrows",a={from:{enabled:!0,type:l}}),i.push({attr:e,name:o,value:a}),s.push(o),It(),De==","&&It()}if(De!="]")throw En("Bracket ] expected");It()}if(Xa(s).call(s,"dir")){var u={};for(u.arrows={},t=0;t<i.length;t++)if(i[t].name==="arrows")if(i[t].value.to!=null)u.arrows.to=t;else if(i[t].value.from!=null)u.arrows.from=t;else throw En("Invalid value of arrows");else i[t].name==="dir"&&(u.dir=t);var d=i[u.dir].value;if(!Xa(s).call(s,"arrows"))if(d==="both")i.push({attr:i[u.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),u.arrows.to=i.length-1,i.push({attr:i[u.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),u.arrows.from=i.length-1;else if(d==="forward")i.push({attr:i[u.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),u.arrows.to=i.length-1;else if(d==="back")i.push({attr:i[u.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),u.arrows.from=i.length-1;else if(d==="none")i.push({attr:i[u.dir].attr,name:"arrows",value:""}),u.arrows.to=i.length-1;else throw En('Invalid dir type "'+d+'"');var h,f;if(d==="both")u.arrows.to&&u.arrows.from?(f=i[u.arrows.to].value.to.type,h=i[u.arrows.from].value.from.type,i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}},No(i).call(i,u.arrows.from,1)):u.arrows.to?(f=i[u.arrows.to].value.to.type,h="arrow",i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):u.arrows.from&&(f="arrow",h=i[u.arrows.from].value.from.type,i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}});else if(d==="back")u.arrows.to&&u.arrows.from?(f="",h=i[u.arrows.from].value.from.type,i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):u.arrows.to?(f="",h="arrow",u.arrows.from=u.arrows.to,i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):u.arrows.from&&(f="",h=i[u.arrows.from].value.from.type,i[u.arrows.to]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}),i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{from:{enabled:!0,type:i[u.arrows.from].value.from.type}}};else if(d==="none"){var p;u.arrows.to?p=u.arrows.to:p=u.arrows.from,i[p]={attr:i[p].attr,name:i[p].name,value:""}}else if(d==="forward")u.arrows.to&&u.arrows.from?(f=i[u.arrows.to].value.to.type,h="",i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):u.arrows.to?(f=i[u.arrows.to].value.to.type,h="",i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):u.arrows.from&&(f="arrow",h="",u.arrows.to=u.arrows.from,i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}),i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:i[u.arrows.to].value.to.type}}};else throw En('Invalid dir type "'+d+'"');No(i).call(i,u.dir,1)}var m;if(Xa(s).call(s,"penwidth")){var g=[];for(m=i.length,t=0;t<m;t++)i[t].name!=="width"&&(i[t].name==="penwidth"&&(i[t].name="width"),g.push(i[t]));i=g}for(m=i.length,t=0;t<m;t++)oAe(i[t].attr,i[t].name,i[t].value);return e}function En(t){return new SyntaxError(t+', got "'+Zae(De,30)+'" (char '+sh+")")}function Zae(t,e){return t.length<=e?t:t.substr(0,27)+"..."}function hAe(t,e,r){ar(t)?kt(t).call(t,function(n){ar(e)?kt(e).call(e,function(i){r(n,i)}):r(n,e)}):ar(e)?kt(e).call(e,function(n){r(t,n)}):r(t,e)}function wT(t,e,r){for(var n=e.split("."),i=n.pop(),s=t,o=0;o<n.length;o++){var a=n[o];a in s||(s[a]={}),s=s[a]}return s[i]=r,t}function dG(t,e){var r={};for(var n in t)if(t.hasOwnProperty(n)){var i=e[n];ar(i)?kt(i).call(i,function(s){wT(r,s,t[n])}):typeof i=="string"?wT(r,i,t[n]):wT(r,n,t[n])}return r}function fAe(t){var e=iAe(t),r={nodes:[],edges:[],options:{}};if(e.nodes){var n;kt(n=e.nodes).call(n,function(o){var a={id:o.id,label:String(o.label||o.id)};al(a,dG(o.attr,Kae)),a.image&&(a.shape="image"),r.nodes.push(a)})}if(e.edges){var i,s=function(o){var a={from:o.from,to:o.to};return al(a,dG(o.attr,SD)),a.arrows==null&&o.type==="->"&&(a.arrows="to"),a};kt(i=e.edges).call(i,function(o){var a,l;if(o.from instanceof Object?a=o.from.nodes:a={id:o.from},o.to instanceof Object?l=o.to.nodes:l={id:o.to},o.from instanceof Object&&o.from.edges){var u;kt(u=o.from.edges).call(u,function(h){var f=s(h);r.edges.push(f)})}if(hAe(a,l,function(h,f){var p=Yae(r,h.id,f.id,o.type,o.attr),m=s(p);r.edges.push(m)}),o.to instanceof Object&&o.to.edges){var d;kt(d=o.to.edges).call(d,function(h){var f=s(h);r.edges.push(f)})}})}return e.attr&&(r.options=e.attr),r}function pAe(t,e){var r;const n={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};e!=null&&(e.fixed!=null&&(n.nodes.fixed=e.fixed),e.parseColor!=null&&(n.nodes.parseColor=e.parseColor),e.inheritColor!=null&&(n.edges.inheritColor=e.inheritColor));const i=t.edges,s=th(i).call(i,a=>{const l={from:a.source,id:a.id,to:a.target};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.type==="Directed"&&(l.arrows="to"),a.color&&n.edges.inheritColor===!1&&(l.color=a.color),l});return{nodes:th(r=t.nodes).call(r,a=>{const l={id:a.id,fixed:n.nodes.fixed&&a.x!=null&&a.y!=null};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.size!=null&&(l.size=a.size),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.title!=null&&(l.title=a.title),a.x!=null&&(l.x=a.x),a.y!=null&&(l.y=a.y),a.color!=null&&(n.nodes.parseColor===!0?l.color=a.color:l.color={background:a.color,border:a.color,highlight:{background:a.color,border:a.color},hover:{background:a.color,border:a.color}}),l}),edges:s}}const mAe={addDescription:"Click in an empty space to place a new node.",addEdge:"Add Edge",addNode:"Add Node",back:"Back",close:"Close",createEdgeError:"Cannot link edges to a cluster.",del:"Delete selected",deleteClusterError:"Clusters cannot be deleted.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",edit:"Edit",editClusterError:"Clusters cannot be edited.",editEdge:"Edit Edge",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",editNode:"Edit Node"},gAe={addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",addEdge:"Kante hinzufgen",addNode:"Knoten hinzufgen",back:"Zurck",close:"Schlieen",createEdgeError:"Es ist nicht mglich, Kanten mit Clustern zu verbinden.",del:"Lsche Auswahl",deleteClusterError:"Cluster knnen nicht gelscht werden.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",edit:"Editieren",editClusterError:"Cluster knnen nicht editiert werden.",editEdge:"Kante editieren",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",editNode:"Knoten editieren"},yAe={addDescription:"Haga clic en un lugar vaco para colocar un nuevo nodo.",addEdge:"Aadir arista",addNode:"Aadir nodo",back:"Atrs",close:"Cerrar",createEdgeError:"No se puede conectar una arista a un grupo.",del:"Eliminar seleccin",deleteClusterError:"No es posible eliminar grupos.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",edit:"Editar",editClusterError:"No es posible editar grupos.",editEdge:"Editar arista",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",editNode:"Editar nodo"},vAe={addDescription:"Clicca per aggiungere un nuovo nodo",addEdge:"Aggiungi un vertice",addNode:"Aggiungi un nodo",back:"Indietro",close:"Chiudere",createEdgeError:"Non si possono collegare vertici ad un cluster",del:"Cancella la selezione",deleteClusterError:"I cluster non possono essere cancellati",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",edit:"Modifica",editClusterError:"I clusters non possono essere modificati.",editEdge:"Modifica il vertice",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",editNode:"Modifica il nodo"},bAe={addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",addEdge:"Link toevoegen",addNode:"Node toevoegen",back:"Terug",close:"Sluiten",createEdgeError:"Kan geen link maken naar een cluster.",del:"Selectie verwijderen",deleteClusterError:"Clusters kunnen niet worden verwijderd.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",edit:"Wijzigen",editClusterError:"Clusters kunnen niet worden aangepast.",editEdge:"Link wijzigen",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",editNode:"Node wijzigen"},xAe={addDescription:"Clique em um espao em branco para adicionar um novo n",addEdge:"Adicionar aresta",addNode:"Adicionar n",back:"Voltar",close:"Fechar",createEdgeError:"No foi possvel linkar arestas a um cluster.",del:"Remover selecionado",deleteClusterError:"Clusters no puderam ser removidos.",edgeDescription:"Clique em um n e arraste a aresta at outro n para conect-los",edit:"Editar",editClusterError:"Clusters no puderam ser editados.",editEdge:"Editar aresta",editEdgeDescription:"Clique nos pontos de controle e os arraste para um n para conect-los",editNode:"Editar n"},wAe={addDescription:"   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"    .",del:" ",deleteClusterError:"    ",edgeDescription:"        ,   .",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},SAe={addDescription:"",addEdge:"",addNode:"",back:"",close:"",createEdgeError:"",del:"",deleteClusterError:"",edgeDescription:"",edit:"",editClusterError:"",editEdge:"",editEdgeDescription:"",editNode:""},_Ae={addDescription:"K   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"  '   .",del:" ",deleteClusterError:"    .",edgeDescription:"        ,   '.",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},EAe={addDescription:"Cliquez dans un endroit vide pour placer un nud.",addEdge:"Ajouter un lien",addNode:"Ajouter un nud",back:"Retour",close:"Fermer",createEdgeError:"Impossible de crer un lien vers un cluster.",del:"Effacer la slection",deleteClusterError:"Les clusters ne peuvent pas tre effacs.",edgeDescription:"Cliquez sur un nud et glissez le lien vers un autre nud pour les connecter.",edit:"diter",editClusterError:"Les clusters ne peuvent pas tre dits.",editEdge:"diter le lien",editEdgeDescription:"Cliquez sur les points de contrle et glissez-les pour connecter un nud.",editNode:"diter le nud"},NAe={addDescription:"Kluknutm do przdnho prostoru mete pidat nov vrchol.",addEdge:"Pidat hranu",addNode:"Pidat vrchol",back:"Zpt",close:"Zavt",createEdgeError:"Nelze pipojit hranu ke shluku.",del:"Smazat vbr",deleteClusterError:"Nelze mazat shluky.",edgeDescription:"Petaenm z jednoho vrcholu do druhho mete spojit tyto vrcholy novou hranou.",edit:"Upravit",editClusterError:"Nelze upravovat shluky.",editEdge:"Upravit hranu",editEdgeDescription:"Petaenm kontrolnho vrcholu hrany ji mete pipojit k jinmu vrcholu.",editNode:"Upravit vrchol"};var kAe=Object.freeze({__proto__:null,cn:SAe,cs:NAe,de:gAe,en:mAe,es:yAe,fr:EAe,it:vAe,nl:bAe,pt:xAe,ru:wAe,uk:_Ae});function CAe(t,e){try{const[n,i]=e.split(/[-_ /]/,2),s=n!=null?n.toLowerCase():null,o=i!=null?i.toUpperCase():null;if(s&&o){const a=s+"-"+o;if(Object.prototype.hasOwnProperty.call(t,a))return a;var r;console.warn(XIe(r="Unknown variant ".concat(o," of language ")).call(r,s,"."))}if(s){const a=s;if(Object.prototype.hasOwnProperty.call(t,a))return a;console.warn("Unknown language ".concat(s))}return console.warn("Unknown locale ".concat(e,", falling back to English.")),"en"}catch(n){return console.error(n),console.warn("Unexpected error while normalizing locale ".concat(e,", falling back to English.")),"en"}}class TAe{constructor(){this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}init(){if(this.initialized())return;this.src=this.image.src;const e=this.image.width,r=this.image.height;this.width=e,this.height=r;const n=Math.floor(r/2),i=Math.floor(r/4),s=Math.floor(r/8),o=Math.floor(r/16),a=Math.floor(e/2),l=Math.floor(e/4),u=Math.floor(e/8),d=Math.floor(e/16);this.canvas.width=3*l,this.canvas.height=n,this.coordinates=[[0,0,a,n],[a,0,l,i],[a,i,u,s],[5*u,i,d,o]],this._fillMipMap()}initialized(){return this.coordinates!==void 0}_fillMipMap(){const e=this.canvas.getContext("2d"),r=this.coordinates[0];e.drawImage(this.image,r[0],r[1],r[2],r[3]);for(let n=1;n<this.NUM_ITERATIONS;n++){const i=this.coordinates[n-1],s=this.coordinates[n];e.drawImage(this.canvas,i[0],i[1],i[2],i[3],s[0],s[1],s[2],s[3])}}drawImageAtPosition(e,r,n,i,s,o){if(this.initialized())if(r>2){r*=.5;let a=0;for(;r>2&&a<this.NUM_ITERATIONS;)r*=.5,a+=1;a>=this.NUM_ITERATIONS&&(a=this.NUM_ITERATIONS-1);const l=this.coordinates[a];e.drawImage(this.canvas,l[0],l[1],l[2],l[3],n,i,s,o)}else e.drawImage(this.image,n,i,s,o)}}class jAe{constructor(e){this.images={},this.imageBroken={},this.callback=e}_tryloadBrokenUrl(e,r,n){if(!(e===void 0||n===void 0)){if(r===void 0){console.warn("No broken url image defined");return}n.image.onerror=()=>{console.error("Could not load brokenImage:",r)},n.image.src=r}}_redrawWithImage(e){this.callback&&this.callback(e)}load(e,r){const n=this.images[e];if(n)return n;const i=new TAe;return this.images[e]=i,i.image.onload=()=>{this._fixImageCoordinates(i.image),i.init(),this._redrawWithImage(i)},i.image.onerror=()=>{console.error("Could not load image:",e),this._tryloadBrokenUrl(e,r,i)},i.image.src=e,i}_fixImageCoordinates(e){e.width===0&&(document.body.appendChild(e),e.width=e.offsetWidth,e.height=e.offsetHeight,document.body.removeChild(e))}}var hG={},fG={},ST={exports:{}},_T,pG;function OAe(){if(pG)return _T;pG=1;var t=at();return _T=t(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),_T}var ET,mG;function PAe(){if(mG)return ET;mG=1;var t=at(),e=Gr(),r=Us(),n=OAe(),i=Object.isExtensible,s=t(function(){});return ET=s||n?function(a){return!e(a)||n&&r(a)==="ArrayBuffer"?!1:i?i(a):!0}:i,ET}var NT,gG;function ele(){if(gG)return NT;gG=1;var t=at();return NT=!t(function(){return Object.isExtensible(Object.preventExtensions({}))}),NT}var yG;function $b(){if(yG)return ST.exports;yG=1;var t=Ie(),e=ct(),r=$m(),n=Gr(),i=on(),s=Qi().f,o=Pb(),a=aD(),l=PAe(),u=Eb(),d=ele(),h=!1,f=u("meta"),p=0,m=function(x){s(x,f,{value:{objectID:"O"+p++,weakData:{}}})},g=function(x,S){if(!n(x))return typeof x=="symbol"?x:(typeof x=="string"?"S":"P")+x;if(!i(x,f)){if(!l(x))return"F";if(!S)return"E";m(x)}return x[f].objectID},v=function(x,S){if(!i(x,f)){if(!l(x))return!0;if(!S)return!1;m(x)}return x[f].weakData},y=function(x){return d&&h&&l(x)&&!i(x,f)&&m(x),x},b=function(){w.enable=function(){},h=!0;var x=o.f,S=e([].splice),_={};_[f]=1,x(_).length&&(o.f=function(E){for(var N=x(E),T=0,j=N.length;T<j;T++)if(N[T]===f){S(N,T,1);break}return N},t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:a.f}))},w=ST.exports={enable:b,fastKey:g,getWeakData:v,onFreeze:y};return r[f]=!0,ST.exports}var kT,vG;function IAe(){if(vG)return kT;vG=1;var t=Cr(),e=Fh(),r=t("iterator"),n=Array.prototype;return kT=function(i){return i!==void 0&&(e.Array===i||n[r]===i)},kT}var CT,bG;function tle(){if(bG)return CT;bG=1;var t=$h(),e=JA(),r=Th(),n=Fh(),i=Cr(),s=i("iterator");return CT=function(o){if(!r(o))return e(o,s)||e(o,"@@iterator")||n[t(o)]},CT}var TT,xG;function RAe(){if(xG)return TT;xG=1;var t=ai(),e=Ko(),r=Hs(),n=Ph(),i=tle(),s=TypeError;return TT=function(o,a){var l=arguments.length<2?i(o):a;if(e(l))return r(t(l,o));throw new s(n(o)+" is not iterable")},TT}var jT,wG;function _D(){if(wG)return jT;wG=1;var t=ai(),e=Hs(),r=JA();return jT=function(n,i,s){var o,a;e(n);try{if(o=r(n,"return"),!o){if(i==="throw")throw s;return s}o=t(o,n)}catch(l){a=!0,o=l}if(i==="throw")throw s;if(a)throw o;return e(o),s},jT}var OT,SG;function Fb(){if(SG)return OT;SG=1;var t=kb(),e=ai(),r=Hs(),n=Ph(),i=IAe(),s=Go(),o=kr(),a=RAe(),l=tle(),u=_D(),d=TypeError,h=function(p,m){this.stopped=p,this.result=m},f=h.prototype;return OT=function(p,m,g){var v=g&&g.that,y=!!(g&&g.AS_ENTRIES),b=!!(g&&g.IS_RECORD),w=!!(g&&g.IS_ITERATOR),x=!!(g&&g.INTERRUPTED),S=t(m,v),_,E,N,T,j,P,O,C=function(F){return _&&u(_,"normal"),new h(!0,F)},D=function(F){return y?(r(F),x?S(F[0],F[1],C):S(F[0],F[1])):x?S(F,C):S(F)};if(b)_=p.iterator;else if(w)_=p;else{if(E=l(p),!E)throw new d(n(p)+" is not iterable");if(i(E)){for(N=0,T=s(p);T>N;N++)if(j=D(p[N]),j&&o(f,j))return j;return new h(!1)}_=a(p,E)}for(P=b?p.next:_.next;!(O=e(P,_)).done;){try{j=D(O.value)}catch(F){u(_,"throw",F)}if(typeof j=="object"&&j&&o(f,j))return j}return new h(!1)},OT}var PT,_G;function ED(){if(_G)return PT;_G=1;var t=kr(),e=TypeError;return PT=function(r,n){if(t(n,r))return r;throw new e("Incorrect invocation")},PT}var IT,EG;function ND(){if(EG)return IT;EG=1;var t=Ie(),e=zt(),r=$b(),n=at(),i=Mh(),s=Fb(),o=ED(),a=Kr(),l=Gr(),u=Th(),d=lu(),h=Qi().f,f=wl().forEach,p=mr(),m=cu(),g=m.set,v=m.getterFor;return IT=function(y,b,w){var x=y.indexOf("Map")!==-1,S=y.indexOf("Weak")!==-1,_=x?"set":"add",E=e[y],N=E&&E.prototype,T={},j;if(!p||!a(E)||!(S||N.forEach&&!n(function(){new E().entries().next()})))j=w.getConstructor(b,y,x,_),r.enable();else{j=b(function(C,D){g(o(C,P),{type:y,collection:new E}),u(D)||s(D,C[_],{that:C,AS_ENTRIES:x})});var P=j.prototype,O=v(y);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(C){var D=C==="add"||C==="set";C in N&&!(S&&C==="clear")&&i(P,C,function(F,$){var L=O(this).collection;if(!D&&S&&!l(F))return C==="get"?void 0:!1;var M=L[C](F===0?0:F,$);return D?this:M})}),S||h(P,"size",{configurable:!0,get:function(){return O(this).collection.size}})}return d(j,y,!1,!0),T[y]=j,t({global:!0,forced:!0},T),S||w.setStrong(j,y,x),j},IT}var RT,NG;function kD(){if(NG)return RT;NG=1;var t=Bm();return RT=function(e,r,n){for(var i in r)n&&n.unsafe&&e[i]?e[i]=r[i]:t(e,i,r[i],n);return e},RT}var MT,kG;function MAe(){if(kG)return MT;kG=1;var t=_i(),e=lD(),r=Cr(),n=mr(),i=r("species");return MT=function(s){var o=t(s);n&&o&&!o[i]&&e(o,i,{configurable:!0,get:function(){return this}})},MT}var AT,CG;function rle(){if(CG)return AT;CG=1;var t=Lm(),e=lD(),r=kD(),n=kb(),i=ED(),s=Th(),o=Fb(),a=uD(),l=dD(),u=MAe(),d=mr(),h=$b().fastKey,f=cu(),p=f.set,m=f.getterFor;return AT={getConstructor:function(g,v,y,b){var w=g(function(N,T){i(N,x),p(N,{type:v,index:t(null),first:null,last:null,size:0}),d||(N.size=0),s(T)||o(T,N[b],{that:N,AS_ENTRIES:y})}),x=w.prototype,S=m(v),_=function(N,T,j){var P=S(N),O=E(N,T),C,D;return O?O.value=j:(P.last=O={index:D=h(T,!0),key:T,value:j,previous:C=P.last,next:null,removed:!1},P.first||(P.first=O),C&&(C.next=O),d?P.size++:N.size++,D!=="F"&&(P.index[D]=O)),N},E=function(N,T){var j=S(N),P=h(T),O;if(P!=="F")return j.index[P];for(O=j.first;O;O=O.next)if(O.key===T)return O};return r(x,{clear:function(){for(var T=this,j=S(T),P=j.first;P;)P.removed=!0,P.previous&&(P.previous=P.previous.next=null),P=P.next;j.first=j.last=null,j.index=t(null),d?j.size=0:T.size=0},delete:function(N){var T=this,j=S(T),P=E(T,N);if(P){var O=P.next,C=P.previous;delete j.index[P.index],P.removed=!0,C&&(C.next=O),O&&(O.previous=C),j.first===P&&(j.first=O),j.last===P&&(j.last=C),d?j.size--:T.size--}return!!P},forEach:function(T){for(var j=S(this),P=n(T,arguments.length>1?arguments[1]:void 0),O;O=O?O.next:j.first;)for(P(O.value,O.key,this);O&&O.removed;)O=O.previous},has:function(T){return!!E(this,T)}}),r(x,y?{get:function(T){var j=E(this,T);return j&&j.value},set:function(T,j){return _(this,T===0?0:T,j)}}:{add:function(T){return _(this,T=T===0?0:T,T)}}),d&&e(x,"size",{configurable:!0,get:function(){return S(this).size}}),w},setStrong:function(g,v,y){var b=v+" Iterator",w=m(v),x=m(b);a(g,v,function(S,_){p(this,{type:b,target:S,state:w(S),kind:_,last:null})},function(){for(var S=x(this),_=S.kind,E=S.last;E&&E.removed;)E=E.previous;return!S.target||!(S.last=E=E?E.next:S.state.first)?(S.target=null,l(void 0,!0)):l(_==="keys"?E.key:_==="values"?E.value:[E.key,E.value],!1)},y?"entries":"values",!y,!0),u(v)}},AT}var TG;function AAe(){if(TG)return fG;TG=1;var t=ND(),e=rle();return t("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),fG}var jG;function DAe(){return jG||(jG=1,AAe()),hG}var OG={},DT,PG;function nle(){return PG||(PG=1,DT=function(t,e){return e===1?function(r,n){return r[t](n)}:function(r,n,i){return r[t](n,i)}}),DT}var $T,IG;function $Ae(){if(IG)return $T;IG=1;var t=_i(),e=nle(),r=t("Map");return $T={Map:r,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:r.prototype},$T}var RG;function FAe(){if(RG)return OG;RG=1;var t=Ie(),e=ct(),r=Ko(),n=Ho(),i=Fb(),s=$Ae(),o=Ih(),a=at(),l=s.Map,u=s.has,d=s.get,h=s.set,f=e([].push),p=o||a(function(){return l.groupBy("ab",function(m){return m}).get("a").length!==1});return t({target:"Map",stat:!0,forced:o||p},{groupBy:function(g,v){n(g),r(v);var y=new l,b=0;return i(g,function(w){var x=v(w,b++);u(y,x)?f(d(y,x),w):h(y,x,[w])}),y}}),OG}var MG={},FT,AG;function qAe(){if(AG)return FT;AG=1;var t=ct(),e=Ah(),r=Xi(),n=Ho(),i=t("".charAt),s=t("".charCodeAt),o=t("".slice),a=function(l){return function(u,d){var h=r(n(u)),f=e(d),p=h.length,m,g;return f<0||f>=p?l?"":void 0:(m=s(h,f),m<55296||m>56319||f+1===p||(g=s(h,f+1))<56320||g>57343?l?i(h,f):m:l?o(h,f,f+2):(m-55296<<10)+(g-56320)+65536)}};return FT={codeAt:a(!1),charAt:a(!0)},FT}var DG;function CD(){if(DG)return MG;DG=1;var t=qAe().charAt,e=Xi(),r=cu(),n=uD(),i=dD(),s="String Iterator",o=r.set,a=r.getterFor(s);return n(String,"String",function(l){o(this,{type:s,string:e(l),index:0})},function(){var u=a(this),d=u.string,h=u.index,f;return h>=d.length?i(void 0,!0):(f=t(d,h),u.index+=f.length,i(f,!1))}),MG}var qT,$G;function LAe(){if($G)return qT;$G=1,qh(),DAe(),FAe(),CD();var t=_t();return qT=t.Map,qT}var LT,FG;function BAe(){if(FG)return LT;FG=1;var t=LAe();return Lh(),LT=t,LT}var BT,qG;function zAe(){return qG||(qG=1,BT=BAe()),BT}var VAe=zAe(),TD=Ve(VAe);class WAe{constructor(){this.clear(),this._defaultIndex=0,this._groupIndex=0,this._defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},xr(this.options,this.defaultOptions)}setOptions(e){const r=["useDefaultGroups"];if(e!==void 0){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&xt(r).call(r,n)===-1){const i=e[n];this.add(n,i)}}}clear(){this._groups=new TD,this._groupNames=[]}get(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this._groups.get(e);if(n===void 0&&r)if(this.options.useDefaultGroups===!1&&this._groupNames.length>0){const i=this._groupIndex%this._groupNames.length;++this._groupIndex,n={},n.color=this._groups.get(this._groupNames[i]),this._groups.set(e,n)}else{const i=this._defaultIndex%this._defaultGroups.length;this._defaultIndex++,n={},n.color=this._defaultGroups[i],this._groups.set(e,n)}return n}add(e,r){return this._groups.has(e)||this._groupNames.push(e),this._groups.set(e,r),r}}var LG={},BG;function UAe(){if(BG)return LG;BG=1;var t=Ie();return t({target:"Number",stat:!0},{isNaN:function(r){return r!==r}}),LG}var zT,zG;function HAe(){if(zG)return zT;zG=1,UAe();var t=_t();return zT=t.Number.isNaN,zT}var VT,VG;function KAe(){if(VG)return VT;VG=1;var t=HAe();return VT=t,VT}var WT,WG;function GAe(){return WG||(WG=1,WT=KAe()),WT}var YAe=GAe(),dR=Ve(YAe),UG={},UT,HG;function QAe(){if(HG)return UT;HG=1;var t=zt(),e=t.isFinite;return UT=Number.isFinite||function(n){return typeof n=="number"&&e(n)},UT}var KG;function XAe(){if(KG)return UG;KG=1;var t=Ie(),e=QAe();return t({target:"Number",stat:!0},{isFinite:e}),UG}var HT,GG;function JAe(){if(GG)return HT;GG=1,XAe();var t=_t();return HT=t.Number.isFinite,HT}var KT,YG;function ZAe(){if(YG)return KT;YG=1;var t=JAe();return KT=t,KT}var GT,QG;function eDe(){return QG||(QG=1,GT=ZAe()),GT}var tDe=eDe(),Ql=Ve(tDe),XG={},JG;function rDe(){if(JG)return XG;JG=1;var t=Ie(),e=wl().some,r=Bh(),n=r("some");return t({target:"Array",proto:!0,forced:!n},{some:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),XG}var YT,ZG;function nDe(){if(ZG)return YT;ZG=1,rDe();var t=an();return YT=t("Array","some"),YT}var QT,eY;function iDe(){if(eY)return QT;eY=1;var t=kr(),e=nDe(),r=Array.prototype;return QT=function(n){var i=n.some;return n===r||t(r,n)&&i===r.some?e:i},QT}var XT,tY;function sDe(){if(tY)return XT;tY=1;var t=iDe();return XT=t,XT}var JT,rY;function oDe(){return rY||(rY=1,JT=sDe()),JT}var aDe=oDe(),lDe=Ve(aDe),ZT={exports:{}},nY={},iY;function cDe(){if(iY)return nY;iY=1;var t=Ie(),e=mr(),r=Qi().f;return t({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!e},{defineProperty:r}),nY}var sY;function uDe(){if(sY)return ZT.exports;sY=1,cDe();var t=_t(),e=t.Object,r=ZT.exports=function(i,s,o){return e.defineProperty(i,s,o)};return e.defineProperty.sham&&(r.sham=!0),ZT.exports}var ej,oY;function ile(){if(oY)return ej;oY=1;var t=uDe();return ej=t,ej}var tj,aY;function dDe(){if(aY)return tj;aY=1;var t=ile();return tj=t,tj}var rj,lY;function hDe(){if(lY)return rj;lY=1;var t=dDe();return rj=t,rj}var nj,cY;function fDe(){return cY||(cY=1,nj=hDe()),nj}var pDe=fDe(),mDe=Ve(pDe),uY={},dY;function gDe(){if(dY)return uY;dY=1;var t=Cr(),e=Qi().f,r=t("metadata"),n=Function.prototype;return n[r]===void 0&&e(n,r,{value:null}),uY}var hY={},fY;function yDe(){return fY||(fY=1,oae()),hY}var pY={},mY;function vDe(){return mY||(mY=1,aae()),pY}var gY={},yY;function bDe(){if(yY)return gY;yY=1;var t=Xt();return t("metadata"),gY}var ij,vY;function xDe(){if(vY)return ij;vY=1;var t=hae();return gDe(),yDe(),vDe(),bDe(),ij=t,ij}var bY={},sj,xY;function sle(){if(xY)return sj;xY=1;var t=_i(),e=ct(),r=t("Symbol"),n=r.keyFor,i=e(r.prototype.valueOf);return sj=r.isRegisteredSymbol||function(o){try{return n(i(o))!==void 0}catch{return!1}},sj}var wY;function wDe(){if(wY)return bY;wY=1;var t=Ie(),e=sle();return t({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),bY}var SY={},oj,_Y;function ole(){if(_Y)return oj;_Y=1;for(var t=Rh(),e=_i(),r=ct(),n=Dm(),i=Cr(),s=e("Symbol"),o=s.isWellKnownSymbol,a=e("Object","getOwnPropertyNames"),l=r(s.prototype.valueOf),u=t("wks"),d=0,h=a(s),f=h.length;d<f;d++)try{var p=h[d];n(s[p])&&i(p)}catch{}return oj=function(g){if(o&&o(g))return!0;try{for(var v=l(g),y=0,b=a(u),w=b.length;y<w;y++)if(u[b[y]]==v)return!0}catch{}return!1},oj}var EY;function SDe(){if(EY)return SY;EY=1;var t=Ie(),e=ole();return t({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),SY}var NY={},kY;function _De(){if(kY)return NY;kY=1;var t=Xt();return t("customMatcher"),NY}var CY={},TY;function EDe(){if(TY)return CY;TY=1;var t=Xt();return t("observable"),CY}var jY={},OY;function NDe(){if(OY)return jY;OY=1;var t=Ie(),e=sle();return t({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),jY}var PY={},IY;function kDe(){if(IY)return PY;IY=1;var t=Ie(),e=ole();return t({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),PY}var RY={},MY;function CDe(){if(MY)return RY;MY=1;var t=Xt();return t("matcher"),RY}var AY={},DY;function TDe(){if(DY)return AY;DY=1;var t=Xt();return t("metadataKey"),AY}var $Y={},FY;function jDe(){if(FY)return $Y;FY=1;var t=Xt();return t("patternMatch"),$Y}var qY={},LY;function ODe(){if(LY)return qY;LY=1;var t=Xt();return t("replaceAll"),qY}var aj,BY;function PDe(){if(BY)return aj;BY=1;var t=xDe();return wDe(),SDe(),_De(),EDe(),NDe(),kDe(),CDe(),TDe(),jDe(),ODe(),aj=t,aj}var lj,zY;function IDe(){return zY||(zY=1,lj=PDe()),lj}var RDe=IDe(),Gg=Ve(RDe),cj,VY;function MDe(){if(VY)return cj;VY=1,qh(),CD(),lae();var t=Ib();return cj=t.f("iterator"),cj}var uj,WY;function ADe(){if(WY)return uj;WY=1;var t=MDe();return Lh(),uj=t,uj}var dj,UY;function DDe(){if(UY)return dj;UY=1;var t=ADe();return dj=t,dj}var hj,HY;function $De(){if(HY)return hj;HY=1;var t=DDe();return hj=t,hj}var fj,KY;function FDe(){return KY||(KY=1,fj=$De()),fj}var qDe=FDe(),LDe=Ve(qDe);function Wp(t){"@babel/helpers - typeof";return Wp=typeof Gg=="function"&&typeof LDe=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Gg=="function"&&e.constructor===Gg&&e!==Gg.prototype?"symbol":typeof e},Wp(t)}var pj,GY;function BDe(){if(GY)return pj;GY=1,cae();var t=Ib();return pj=t.f("toPrimitive"),pj}var mj,YY;function zDe(){if(YY)return mj;YY=1;var t=BDe();return mj=t,mj}var gj,QY;function VDe(){if(QY)return gj;QY=1;var t=zDe();return gj=t,gj}var yj,XY;function WDe(){if(XY)return yj;XY=1;var t=VDe();return yj=t,yj}var vj,JY;function UDe(){return JY||(JY=1,vj=WDe()),vj}var HDe=UDe(),KDe=Ve(HDe);function GDe(t,e){if(Wp(t)!="object"||!t)return t;var r=t[KDe];if(r!==void 0){var n=r.call(t,e);if(Wp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function YDe(t){var e=GDe(t,"string");return Wp(e)=="symbol"?e:e+""}function yo(t,e,r){return(e=YDe(e))in t?mDe(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var ZY={},bj,eQ;function QDe(){if(eQ)return bj;eQ=1;var t=zt(),e=at(),r=ct(),n=Xi(),i=pae().trim,s=hD(),o=r("".charAt),a=t.parseFloat,l=t.Symbol,u=l&&l.iterator,d=1/a(s+"-0")!==-1/0||u&&!e(function(){a(Object(u))});return bj=d?function(f){var p=i(n(f)),m=a(p);return m===0&&o(p,0)==="-"?-0:m}:a,bj}var tQ;function XDe(){if(tQ)return ZY;tQ=1;var t=Ie(),e=QDe();return t({global:!0,forced:parseFloat!==e},{parseFloat:e}),ZY}var xj,rQ;function JDe(){if(rQ)return xj;rQ=1,XDe();var t=_t();return xj=t.parseFloat,xj}var wj,nQ;function ZDe(){if(nQ)return wj;nQ=1;var t=JDe();return wj=t,wj}var Sj,iQ;function e$e(){return iQ||(iQ=1,Sj=ZDe()),Sj}var t$e=e$e(),ale=Ve(t$e),sQ={},oQ;function r$e(){if(oQ)return sQ;oQ=1;var t=Ie(),e=at(),r=aD().f,n=e(function(){return!Object.getOwnPropertyNames(1)});return t({target:"Object",stat:!0,forced:n},{getOwnPropertyNames:r}),sQ}var _j,aQ;function n$e(){if(aQ)return _j;aQ=1,r$e();var t=_t(),e=t.Object;return _j=function(n){return e.getOwnPropertyNames(n)},_j}var Ej,lQ;function i$e(){if(lQ)return Ej;lQ=1;var t=n$e();return Ej=t,Ej}var Nj,cQ;function s$e(){return cQ||(cQ=1,Nj=i$e()),Nj}var o$e=s$e(),a$e=Ve(o$e),kj,uQ;function l$e(){if(uQ)return kj;uQ=1,sae();var t=_t();return kj=t.Object.getOwnPropertySymbols,kj}var Cj,dQ;function c$e(){if(dQ)return Cj;dQ=1;var t=l$e();return Cj=t,Cj}var Tj,hQ;function u$e(){return hQ||(hQ=1,Tj=c$e()),Tj}var d$e=u$e(),ll=Ve(d$e),jj={exports:{}},fQ={},pQ;function h$e(){if(pQ)return fQ;pQ=1;var t=Ie(),e=at(),r=bs(),n=Nb().f,i=mr(),s=!i||e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getOwnPropertyDescriptor:function(a,l){return n(r(a),l)}}),fQ}var mQ;function f$e(){if(mQ)return jj.exports;mQ=1,h$e();var t=_t(),e=t.Object,r=jj.exports=function(i,s){return e.getOwnPropertyDescriptor(i,s)};return e.getOwnPropertyDescriptor.sham&&(r.sham=!0),jj.exports}var Oj,gQ;function p$e(){if(gQ)return Oj;gQ=1;var t=f$e();return Oj=t,Oj}var Pj,yQ;function m$e(){return yQ||(yQ=1,Pj=p$e()),Pj}var g$e=m$e(),Sl=Ve(g$e),vQ={},bQ;function y$e(){if(bQ)return vQ;bQ=1;var t=Ie(),e=mr(),r=zPe(),n=bs(),i=Nb(),s=jb();return t({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(a){for(var l=n(a),u=i.f,d=r(l),h={},f=0,p,m;d.length>f;)m=u(l,p=d[f++]),m!==void 0&&s(h,p,m);return h}}),vQ}var Ij,xQ;function v$e(){if(xQ)return Ij;xQ=1,y$e();var t=_t();return Ij=t.Object.getOwnPropertyDescriptors,Ij}var Rj,wQ;function b$e(){if(wQ)return Rj;wQ=1;var t=v$e();return Rj=t,Rj}var Mj,SQ;function x$e(){return SQ||(SQ=1,Mj=b$e()),Mj}var w$e=x$e(),cl=Ve(w$e),Aj={exports:{}},_Q={},EQ;function S$e(){if(EQ)return _Q;EQ=1;var t=Ie(),e=mr(),r=oD().f;return t({target:"Object",stat:!0,forced:Object.defineProperties!==r,sham:!e},{defineProperties:r}),_Q}var NQ;function _$e(){if(NQ)return Aj.exports;NQ=1,S$e();var t=_t(),e=t.Object,r=Aj.exports=function(i,s){return e.defineProperties(i,s)};return e.defineProperties.sham&&(r.sham=!0),Aj.exports}var Dj,kQ;function E$e(){if(kQ)return Dj;kQ=1;var t=_$e();return Dj=t,Dj}var $j,CQ;function N$e(){return CQ||(CQ=1,$j=E$e()),$j}var k$e=N$e(),qb=Ve(k$e),Fj,TQ;function C$e(){return TQ||(TQ=1,Fj=ile()),Fj}var T$e=C$e(),Lb=Ve(T$e);function jD(t,e){const r=["node","edge","label"];let n=!0;const i=da(e,"chosen");if(typeof i=="boolean")n=i;else if(typeof i=="object"){if(xt(r).call(r,t)===-1)throw new Error("choosify: subOption '"+t+"' should be one of '"+r.join("', '")+"'");const s=da(e,["chosen",t]);(typeof s=="boolean"||typeof s=="function")&&(n=s)}return n}function hR(t,e,r){if(t.width<=0||t.height<=0)return!1;if(r!==void 0){const s={x:e.x-r.x,y:e.y-r.y};if(r.angle!==0){const o=-r.angle;e={x:Math.cos(o)*s.x-Math.sin(o)*s.y,y:Math.sin(o)*s.x+Math.cos(o)*s.y}}else e=s}const n=t.x+t.width,i=t.y+t.width;return t.left<e.x&&n>e.x&&t.top<e.y&&i>e.y}function l0(t){return typeof t=="string"&&t!==""}function lle(t,e,r,n){let i=n.x,s=n.y;if(typeof n.distanceToBorder=="function"){const o=n.distanceToBorder(t,e),a=Math.sin(e)*o,l=Math.cos(e)*o;l===o?(i+=o,s=n.y):a===o?(i=n.x,s-=o):(i+=l,s-=a)}else n.shape.width>n.shape.height?(i=n.x+n.shape.width*.5,s=n.y-r):(i=n.x+r,s=n.y-n.shape.height*.5);return{x:i,y:s}}var qj,jQ;function j$e(){if(jQ)return qj;jQ=1,qh();var t=an();return qj=t("Array","values"),qj}var Lj,OQ;function O$e(){if(OQ)return Lj;OQ=1;var t=j$e();return Lj=t,Lj}var Bj,PQ;function P$e(){if(PQ)return Bj;PQ=1,Lh();var t=$h(),e=on(),r=kr(),n=O$e(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return Bj=function(o){var a=o.values;return o===i||r(i,o)&&a===i.values||e(s,t(o))?n:a},Bj}var zj,IQ;function I$e(){return IQ||(IQ=1,zj=P$e()),zj}var R$e=I$e(),cle=Ve(R$e);class M$e{constructor(e){this.measureText=e,this.current=0,this.width=0,this.height=0,this.lines=[]}_add(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"normal";this.lines[e]===void 0&&(this.lines[e]={width:0,height:0,blocks:[]});let i=r;(r===void 0||r==="")&&(i=" ");const s=this.measureText(i,n),o=xr({},cle(s));o.text=r,o.width=s.width,o.mod=n,(r===void 0||r==="")&&(o.width=0),this.lines[e].blocks.push(o),this.lines[e].width+=o.width}curWidth(){const e=this.lines[this.current];return e===void 0?0:e.width}append(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,r)}newLine(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,r),this.current++}determineLineHeights(){for(let e=0;e<this.lines.length;e++){const r=this.lines[e];let n=0;if(r.blocks!==void 0)for(let i=0;i<r.blocks.length;i++){const s=r.blocks[i];n<s.height&&(n=s.height)}r.height=n}}determineLabelSize(){let e=0,r=0;for(let n=0;n<this.lines.length;n++){const i=this.lines[n];i.width>e&&(e=i.width),r+=i.height}this.width=e,this.height=r}removeEmptyBlocks(){const e=[];for(let r=0;r<this.lines.length;r++){const n=this.lines[r];if(n.blocks.length===0||r===this.lines.length-1&&n.width===0)continue;const i={};xr(i,n),i.blocks=[];let s;const o=[];for(let a=0;a<n.blocks.length;a++){const l=n.blocks[a];l.width!==0?o.push(l):s===void 0&&(s=l)}o.length===0&&s!==void 0&&o.push(s),i.blocks=o,e.push(i)}return e}finalize(){this.determineLineHeights(),this.determineLabelSize();const e=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:e}}}const A$e={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/_/,"`":/`/,afterBold:/[^*]/,afterItal:/[^_]/,afterMono:/[^`]/};class RQ{constructor(e){this.text=e,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}mod(){return this.modStack.length===0?"normal":this.modStack[0]}modName(){if(this.modStack.length===0)return"normal";if(this.modStack[0]==="mono")return"mono";if(this.bold&&this.ital)return"boldital";if(this.bold)return"bold";if(this.ital)return"ital"}emitBlock(){this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}add(e){e===" "&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1),e!=" "&&(this.buffer+=e)}parseWS(e){return/[ \t]/.test(e)?(this.mono?this.add(e):this.spacing=!0,!0):!1}setTag(e){this.emitBlock(),this[e]=!0,this.modStack.unshift(e)}unsetTag(e){this.emitBlock(),this[e]=!1,this.modStack.shift()}parseStartTag(e,r){return!this.mono&&!this[e]&&this.match(r)?(this.setTag(e),!0):!1}match(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const[n,i]=this.prepareRegExp(e),s=n.test(this.text.substr(this.position,i));return s&&r&&(this.position+=i-1),s}parseEndTag(e,r,n){let i=this.mod()===e;return e==="mono"?i=i&&this.mono:i=i&&!this.mono,i&&this.match(r)?(n!==void 0?(this.position===this.text.length-1||this.match(n,!1))&&this.unsetTag(e):this.unsetTag(e),!0):!1}replace(e,r){return this.match(e)?(this.add(r),this.position+=length-1,!0):!1}prepareRegExp(e){let r,n;if(e instanceof RegExp)n=e,r=1;else{const i=A$e[e];i!==void 0?n=i:n=new RegExp(e),r=e.length}return[n,r]}}class D$e{constructor(e,r,n,i){this.ctx=e,this.parent=r,this.selected=n,this.hover=i;const s=(o,a)=>{if(o===void 0)return 0;const l=this.parent.getFormattingValues(e,n,i,a);let u=0;return o!==""&&(u=this.ctx.measureText(o).width),{width:u,values:l}};this.lines=new M$e(s)}process(e){if(!l0(e))return this.lines.finalize();const r=this.parent.fontOptions;e=e.replace(/\r\n/g,`
`),e=e.replace(/\r/g,`
`);const n=String(e).split(`
`),i=n.length;if(r.multi)for(let s=0;s<i;s++){const o=this.splitBlocks(n[s],r.multi);if(o!==void 0){if(o.length===0){this.lines.newLine("");continue}if(r.maxWdt>0)for(let a=0;a<o.length;a++){const l=o[a].mod,u=o[a].text;this.splitStringIntoLines(u,l,!0)}else for(let a=0;a<o.length;a++){const l=o[a].mod,u=o[a].text;this.lines.append(u,l)}this.lines.newLine()}}else if(r.maxWdt>0)for(let s=0;s<i;s++)this.splitStringIntoLines(n[s]);else for(let s=0;s<i;s++)this.lines.newLine(n[s]);return this.lines.finalize()}decodeMarkupSystem(e){let r="none";return e==="markdown"||e==="md"?r="markdown":(e===!0||e==="html")&&(r="html"),r}splitHtmlBlocks(e){const r=new RQ(e),n=i=>/&/.test(i)?(r.replace(r.text,"&lt;","<")||r.replace(r.text,"&amp;","&")||r.add("&"),!0):!1;for(;r.position<r.text.length;){const i=r.text.charAt(r.position);r.parseWS(i)||/</.test(i)&&(r.parseStartTag("bold","<b>")||r.parseStartTag("ital","<i>")||r.parseStartTag("mono","<code>")||r.parseEndTag("bold","</b>")||r.parseEndTag("ital","</i>")||r.parseEndTag("mono","</code>"))||n(i)||r.add(i),r.position++}return r.emitBlock(),r.blocks}splitMarkdownBlocks(e){const r=new RQ(e);let n=!0;const i=s=>/\\/.test(s)?(r.position<this.text.length+1&&(r.position++,s=this.text.charAt(r.position),/ \t/.test(s)?r.spacing=!0:(r.add(s),n=!1)),!0):!1;for(;r.position<r.text.length;){const s=r.text.charAt(r.position);r.parseWS(s)||i(s)||(n||r.spacing)&&(r.parseStartTag("bold","*")||r.parseStartTag("ital","_")||r.parseStartTag("mono","`"))||r.parseEndTag("bold","*","afterBold")||r.parseEndTag("ital","_","afterItal")||r.parseEndTag("mono","`","afterMono")||(r.add(s),n=!1),r.position++}return r.emitBlock(),r.blocks}splitBlocks(e,r){const n=this.decodeMarkupSystem(r);if(n==="none")return[{text:e,mod:"normal"}];if(n==="markdown")return this.splitMarkdownBlocks(e);if(n==="html")return this.splitHtmlBlocks(e)}overMaxWidth(e){const r=this.ctx.measureText(e).width;return this.lines.curWidth()+r>this.parent.fontOptions.maxWdt}getLongestFit(e){let r="",n=0;for(;n<e.length;){const s=r+(r===""?"":" ")+e[n];if(this.overMaxWidth(s))break;r=s,n++}return n}getLongestFitWord(e){let r=0;for(;r<e.length&&!this.overMaxWidth(Is(e).call(e,0,r));)r++;return r}splitStringIntoLines(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.parent.getFormattingValues(this.ctx,this.selected,this.hover,r),e=e.replace(/^( +)/g,"$1\r"),e=e.replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r");let i=e.split("\r");for(;i.length>0;){let s=this.getLongestFit(i);if(s===0){const o=i[0],a=this.getLongestFitWord(o);this.lines.newLine(Is(o).call(o,0,a),r),i[0]=Is(o).call(o,a)}else{let o=s;i[s-1]===" "?s--:i[o]===" "&&o++;const a=Is(i).call(i,0,s).join("");s==i.length&&n?this.lines.append(a,r):this.lines.newLine(a,r),i=Is(i).call(i,o)}}}}const pf=["bold","ital","boldital","mono"];class md{constructor(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.body=e,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(r),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=n}setOptions(e){if(this.elementOptions=e,this.initFontOptions(e.font),l0(e.label)?this.labelDirty=!0:e.label=void 0,e.font!==void 0&&e.font!==null){if(typeof e.font=="string")this.baseSize=this.fontOptions.size;else if(typeof e.font=="object"){const r=e.font.size;r!==void 0&&(this.baseSize=r)}}}initFontOptions(e){if(tt(pf,r=>{this.fontOptions[r]={}}),md.parseFontString(this.fontOptions,e)){this.fontOptions.vadjust=0;return}tt(e,(r,n)=>{r!=null&&typeof r!="object"&&(this.fontOptions[n]=r)})}static parseFontString(e,r){if(!r||typeof r!="string")return!1;const n=r.split(" ");return e.size=+n[0].replace("px",""),e.face=n[1],e.color=n[2],!0}constrain(e){const r={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},n=da(e,"widthConstraint");if(typeof n=="number")r.maxWdt=Number(n),r.minWdt=Number(n);else if(typeof n=="object"){const s=da(e,["widthConstraint","maximum"]);typeof s=="number"&&(r.maxWdt=Number(s));const o=da(e,["widthConstraint","minimum"]);typeof o=="number"&&(r.minWdt=Number(o))}const i=da(e,"heightConstraint");if(typeof i=="number")r.minHgt=Number(i);else if(typeof i=="object"){const s=da(e,["heightConstraint","minimum"]);typeof s=="number"&&(r.minHgt=Number(s));const o=da(e,["heightConstraint","valign"]);typeof o=="string"&&(o==="top"||o==="bottom")&&(r.valign=o)}return r}update(e,r){this.setOptions(e,!0),this.propagateFonts(r),Ot(this.fontOptions,this.constrain(r)),this.fontOptions.chooser=jD("label",r)}adjustSizes(e){const r=e?e.right+e.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=r,this.fontOptions.minWdt-=r);const n=e?e.top+e.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=n)}addFontOptionsToPile(e,r){for(let n=0;n<r.length;++n)this.addFontToPile(e,r[n])}addFontToPile(e,r){if(r===void 0||r.font===void 0||r.font===null)return;const n=r.font;e.push(n)}getBasicOptions(e){const r={};for(let n=0;n<e.length;++n){let i=e[n];const s={};md.parseFontString(s,i)&&(i=s),tt(i,(o,a)=>{o!==void 0&&(Object.prototype.hasOwnProperty.call(r,a)||(xt(pf).call(pf,a)!==-1?r[a]={}:r[a]=o))})}return r}getFontOption(e,r,n){let i;for(let s=0;s<e.length;++s){const o=e[s];if(Object.prototype.hasOwnProperty.call(o,r)){if(i=o[r],i==null)continue;const a={};if(md.parseFontString(a,i)&&(i=a),Object.prototype.hasOwnProperty.call(i,n))return i[n]}}if(Object.prototype.hasOwnProperty.call(this.fontOptions,n))return this.fontOptions[n];throw new Error("Did not find value for multi-font for property: '"+n+"'")}getFontOptions(e,r){const n={},i=["color","size","face","mod","vadjust"];for(let s=0;s<i.length;++s){const o=i[s];n[o]=this.getFontOption(e,r,o)}return n}propagateFonts(e){const r=[];this.addFontOptionsToPile(r,e),this.fontOptions=this.getBasicOptions(r);for(let n=0;n<pf.length;++n){const i=pf[n],s=this.fontOptions[i],o=this.getFontOptions(r,i);tt(o,(a,l)=>{s[l]=a}),s.size=Number(s.size),s.vadjust=Number(s.vadjust)}}draw(e,r,n,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";if(this.elementOptions.label===void 0)return;let a=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&a<this.elementOptions.scaling.label.drawThreshold-1||(a>=this.elementOptions.scaling.label.maxVisible&&(a=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(e,i,s,r,n,o),this._drawBackground(e),this._drawText(e,r,this.size.yLine,o,a))}_drawBackground(e){if(this.fontOptions.background!==void 0&&this.fontOptions.background!=="none"){e.fillStyle=this.fontOptions.background;const r=this.getSize();e.fillRect(r.left,r.top,r.width,r.height)}}_drawText(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"middle",s=arguments.length>4?arguments[4]:void 0;[r,n]=this._setAlignment(e,r,n,i),e.textAlign="left",r=r-this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&(this.fontOptions.valign==="top"&&(n-=(this.size.height-this.size.labelHeight)/2),this.fontOptions.valign==="bottom"&&(n+=(this.size.height-this.size.labelHeight)/2));for(let o=0;o<this.lineCount;o++){const a=this.lines[o];if(a&&a.blocks){let l=0;this.isEdgeLabel||this.fontOptions.align==="center"?l+=(this.size.width-a.width)/2:this.fontOptions.align==="right"&&(l+=this.size.width-a.width);for(let u=0;u<a.blocks.length;u++){const d=a.blocks[u];e.font=d.font;const[h,f]=this._getColor(d.color,s,d.strokeColor);d.strokeWidth>0&&(e.lineWidth=d.strokeWidth,e.strokeStyle=f,e.lineJoin="round"),e.fillStyle=h,d.strokeWidth>0&&e.strokeText(d.text,r+l,n+d.vadjust),e.fillText(d.text,r+l,n+d.vadjust),l+=d.width}n+=a.height}}}_setAlignment(e,r,n,i){if(this.isEdgeLabel&&this.fontOptions.align!=="horizontal"&&this.pointToSelf===!1){r=0,n=0;const s=2;this.fontOptions.align==="top"?(e.textBaseline="alphabetic",n-=2*s):this.fontOptions.align==="bottom"?(e.textBaseline="hanging",n+=2*s):e.textBaseline="middle"}else e.textBaseline=i;return[r,n]}_getColor(e,r,n){let i=e||"#000000",s=n||"#ffffff";if(r<=this.elementOptions.scaling.label.drawThreshold){const o=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-r)));i=qi(i,o),s=qi(s,o)}return[i,s]}getTextSize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this._processLabel(e,r,n),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}getSize(){let r=this.size.left,n=this.size.top-.5*2;if(this.isEdgeLabel){const s=-this.size.width*.5;switch(this.fontOptions.align){case"middle":r=s,n=-this.size.height*.5;break;case"top":r=s,n=-(this.size.height+2);break;case"bottom":r=s,n=2;break}}return{left:r,top:n,width:this.size.width,height:this.size.height}}calculateLabelSize(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";this._processLabel(e,r,n),this.size.left=i-this.size.width*.5,this.size.top=s-this.size.height*.5,this.size.yLine=s+(1-this.lineCount)*.5*this.fontOptions.size,o==="hanging"&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}getFormattingValues(e,r,n,i){const s=function(l,u,d){return u==="normal"?d==="mod"?"":l[d]:l[u][d]!==void 0?l[u][d]:l[d]},o={color:s(this.fontOptions,i,"color"),size:s(this.fontOptions,i,"size"),face:s(this.fontOptions,i,"face"),mod:s(this.fontOptions,i,"mod"),vadjust:s(this.fontOptions,i,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(r||n)&&(i==="normal"&&this.fontOptions.chooser===!0&&this.elementOptions.labelHighlightBold?o.mod="bold":typeof this.fontOptions.chooser=="function"&&this.fontOptions.chooser(o,this.elementOptions.id,r,n));let a="";return o.mod!==void 0&&o.mod!==""&&(a+=o.mod+" "),a+=o.size+"px "+o.face,e.font=a.replace(/"/g,""),o.font=e.font,o.height=o.size,o}differentState(e,r){return e!==this.selectedState||r!==this.hoverState}_processLabelText(e,r,n,i){return new D$e(e,this,r,n).process(i)}_processLabel(e,r,n){if(this.labelDirty===!1&&!this.differentState(r,n))return;const i=this._processLabelText(e,r,n,this.elementOptions.label);this.fontOptions.minWdt>0&&i.width<this.fontOptions.minWdt&&(i.width=this.fontOptions.minWdt),this.size.labelHeight=i.height,this.fontOptions.minHgt>0&&i.height<this.fontOptions.minHgt&&(i.height=this.fontOptions.minHgt),this.lines=i.lines,this.lineCount=i.lines.length,this.size.width=i.width,this.size.height=i.height,this.selectedState=r,this.hoverState=n,this.labelDirty=!1}visible(){return!(this.size.width===0||this.size.height===0||this.elementOptions.label===void 0||this.fontOptions.size*this.body.view.scale<this.elementOptions.scaling.label.drawThreshold-1)}}class du{constructor(e,r,n){this.body=r,this.labelModule=n,this.setOptions(e),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}setOptions(e){this.options=e}_setMargins(e){this.margin={},this.options.margin&&(typeof this.options.margin=="object"?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),e.adjustSizes(this.margin)}_distanceToBorder(e,r){const n=this.options.borderWidth;return e&&this.resize(e),Math.min(Math.abs(this.width/2/Math.cos(r)),Math.abs(this.height/2/Math.sin(r)))+n}enableShadow(e,r){r.shadow&&(e.shadowColor=r.shadowColor,e.shadowBlur=r.shadowSize,e.shadowOffsetX=r.shadowX,e.shadowOffsetY=r.shadowY)}disableShadow(e,r){r.shadow&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}enableBorderDashes(e,r){if(r.borderDashes!==!1)if(e.setLineDash!==void 0){let n=r.borderDashes;n===!0&&(n=[5,15]),e.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,r.borderDashes=!1}disableBorderDashes(e,r){r.borderDashes!==!1&&(e.setLineDash!==void 0?e.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,r.borderDashes=!1))}needsRefresh(e,r){return this.refreshNeeded===!0?(this.refreshNeeded=!1,!0):this.width===void 0||this.labelModule.differentState(e,r)}initContextForDraw(e,r){const n=r.borderWidth/this.body.view.scale;e.lineWidth=Math.min(this.width,n),e.strokeStyle=r.borderColor,e.fillStyle=r.color}performStroke(e,r){const n=r.borderWidth/this.body.view.scale;e.save(),n>0&&(this.enableBorderDashes(e,r),e.stroke(),this.disableBorderDashes(e,r)),e.restore()}performFill(e,r){e.save(),e.fillStyle=r.color,this.enableShadow(e,r),Vm(e).call(e),this.disableShadow(e,r),e.restore(),this.performStroke(e,r)}_addBoundingBoxMargin(e){this.boundingBox.left-=e,this.boundingBox.top-=e,this.boundingBox.bottom+=e,this.boundingBox.right+=e}_updateBoundingBox(e,r,n,i,s){n!==void 0&&this.resize(n,i,s),this.left=e-this.width/2,this.top=r-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}updateBoundingBox(e,r,n,i,s){this._updateBoundingBox(e,r,n,i,s)}getDimensionsFromLabel(e,r,n){this.textSize=this.labelModule.getTextSize(e,r,n);let i=this.textSize.width,s=this.textSize.height;const o=14;return i===0&&(i=o,s=o),{width:i,height:s}}}let $$e=class extends du{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n);this.width=i.width+this.margin.right+this.margin.left,this.height=i.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.initContextForDraw(e,o),Goe(e,this.left,this.top,this.width,this.height,o.borderRadius),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s)}updateBoundingBox(e,r,n,i,s){this._updateBoundingBox(e,r,n,i,s);const o=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(o)}distanceToBorder(e,r){e&&this.resize(e);const n=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(r)),Math.abs(this.height/2/Math.sin(r)))+n}};class OD extends du{constructor(e,r,n){super(e,r,n),this.labelOffset=0,this.selected=!1}setOptions(e,r,n){this.options=e,r===void 0&&n===void 0||this.setImages(r,n)}setImages(e,r){r&&this.selected?(this.imageObj=r,this.imageObjAlt=e):(this.imageObj=e,this.imageObjAlt=r)}switchImages(e){const r=e&&!this.selected||!e&&this.selected;if(this.selected=e,this.imageObjAlt!==void 0&&r){const n=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=n}}_getImagePadding(){const e={top:0,right:0,bottom:0,left:0};if(this.options.imagePadding){const r=this.options.imagePadding;typeof r=="object"?(e.top=r.top,e.right=r.right,e.bottom=r.bottom,e.left=r.left):(e.top=r,e.right=r,e.bottom=r,e.left=r)}return e}_resizeImage(){let e,r;if(this.options.shapeProperties.useImageSize===!1){let n=1,i=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?n=this.imageObj.width/this.imageObj.height:i=this.imageObj.height/this.imageObj.width),e=this.options.size*2*n,r=this.options.size*2*i}else{const n=this._getImagePadding();e=this.imageObj.width+n.left+n.right,r=this.imageObj.height+n.top+n.bottom}this.width=e,this.height=r,this.radius=.5*this.width}_drawRawCircle(e,r,n,i){this.initContextForDraw(e,i),nD(e,r,n,i.size),this.performFill(e,i)}_drawImageAtPosition(e,r){if(this.imageObj.width!=0){e.globalAlpha=r.opacity!==void 0?r.opacity:1,this.enableShadow(e,r);let n=1;this.options.shapeProperties.interpolation===!0&&(n=this.imageObj.width/this.width/this.body.view.scale);const i=this._getImagePadding(),s=this.left+i.left,o=this.top+i.top,a=this.width-i.left-i.right,l=this.height-i.top-i.bottom;this.imageObj.drawImageAtPosition(e,n,s,o,a,l),this.disableShadow(e,r)}}_drawImageLabel(e,r,n,i,s){let o=0;if(this.height!==void 0){o=this.height*.5;const l=this.labelModule.getTextSize(e,i,s);l.lineCount>=1&&(o+=l.height/2)}const a=n+o;this.options.label&&(this.labelOffset=o),this.labelModule.draw(e,r,a,i,s,"hanging")}}let F$e=class extends OD{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n),s=Math.max(i.width+this.margin.right+this.margin.left,i.height+this.margin.top+this.margin.bottom);this.options.size=s/2,this.width=s,this.height=s,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this._drawRawCircle(e,r,n,o),this.updateBoundingBox(r,n),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,n,i,s)}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size}distanceToBorder(e){return e&&this.resize(e),this.width*.5}};class q$e extends OD{constructor(e,r,n,i,s){super(e,r,n),this.setImages(i,s)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0){const s=this.options.size*2;this.width=s,this.height=s,this.radius=.5*this.width;return}this.needsRefresh(r,n)&&this._resizeImage()}draw(e,r,n,i,s,o){this.switchImages(i),this.resize();let a=r,l=n;this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=r,this.top=n,a+=this.width/2,l+=this.height/2):(this.left=r-this.width/2,this.top=n-this.height/2),this._drawRawCircle(e,a,l,o),e.save(),e.clip(),this._drawImageAtPosition(e,o),e.restore(),this._drawImageLabel(e,a,l,i,s),this.updateBoundingBox(r,n)}updateBoundingBox(e,r){this.options.shapeProperties.coordinateOrigin==="top-left"?(this.boundingBox.top=r,this.boundingBox.left=e,this.boundingBox.right=e+this.options.size*2,this.boundingBox.bottom=r+this.options.size*2):(this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size),this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}distanceToBorder(e){return e&&this.resize(e),this.width*.5}}class _l extends du{constructor(e,r,n){super(e,r,n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{size:this.options.size};if(this.needsRefresh(r,n)){var s,o;this.labelModule.getTextSize(e,r,n);const a=2*i.size;this.width=(s=this.customSizeWidth)!==null&&s!==void 0?s:a,this.height=(o=this.customSizeHeight)!==null&&o!==void 0?o:a,this.radius=.5*this.width}}_drawShape(e,r,n,i,s,o,a,l){return this.resize(e,o,a,l),this.left=i-this.width/2,this.top=s-this.height/2,this.initContextForDraw(e,l),tPe(r)(e,i,s,l.size),this.performFill(e,l),this.options.icon!==void 0&&this.options.icon.code!==void 0&&(e.font=(o?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",e.fillText(this.options.icon.code,i,s)),{drawExternalLabel:()=>{if(this.options.label!==void 0){this.labelModule.calculateLabelSize(e,o,a,i,s,"hanging");const u=s+.5*this.height+.5*this.labelModule.size.height;this.labelModule.draw(e,i,u,o,a,"hanging")}this.updateBoundingBox(i,s)}}}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}function MQ(t,e){var r=nr(t);if(ll){var n=ll(t);e&&(n=Gn(n).call(n,function(i){return Sl(t,i).enumerable})),r.push.apply(r,n)}return r}function L$e(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?kt(r=MQ(Object(i),!0)).call(r,function(s){yo(t,s,i[s])}):cl?qb(t,cl(i)):kt(n=MQ(Object(i))).call(n,function(s){Lb(t,s,Sl(i,s))})}return t}class B$e extends _l{constructor(e,r,n,i){super(e,r,n,i),this.ctxRenderer=i}draw(e,r,n,i,s,o){this.resize(e,i,s,o),this.left=r-this.width/2,this.top=n-this.height/2,e.save();const a=this.ctxRenderer({ctx:e,id:this.options.id,x:r,y:n,state:{selected:i,hover:s},style:L$e({},o),label:this.options.label});if(a.drawNode!=null&&a.drawNode(),e.restore(),a.drawExternalLabel){const l=a.drawExternalLabel;a.drawExternalLabel=()=>{e.save(),l(),e.restore()}}return a.nodeDimensions&&(this.customSizeWidth=a.nodeDimensions.width,this.customSizeHeight=a.nodeDimensions.height),a}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class z$e extends du{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){if(this.needsRefresh(r,n)){const s=this.getDimensionsFromLabel(e,r,n).width+this.margin.right+this.margin.left;this.width=s,this.height=s,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.initContextForDraw(e,o),Yoe(e,r-this.width/2,n-this.height/2,this.width,this.height),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let V$e=class extends _l{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"diamond",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class W$e extends _l{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"circle",2,r,n,i,s,o)}distanceToBorder(e){return e&&this.resize(e),this.options.size}}class AQ extends du{constructor(e,r,n){super(e,r,n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n);this.height=i.height*2,this.width=i.width+i.height,this.radius=.5*this.width}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width*.5,this.top=n-this.height*.5,this.initContextForDraw(e,o),rR(e,this.left,this.top,this.width,this.height),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,r,n,i,s)}distanceToBorder(e,r){e&&this.resize(e);const n=this.width*.5,i=this.height*.5,s=Math.sin(r)*n,o=Math.cos(r)*i;return n*i/Math.sqrt(s*s+o*o)}}class U$e extends du{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){this.needsRefresh(r,n)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}draw(e,r,n,i,s,o){return this.resize(e,i,s),this.options.icon.size=this.options.icon.size||50,this.left=r-this.width/2,this.top=n-this.height/2,this._icon(e,r,n,i,s,o),{drawExternalLabel:()=>{this.options.label!==void 0&&this.labelModule.draw(e,this.left+this.iconSize.width/2+this.margin.left,n+this.height/2+5,i),this.updateBoundingBox(r,n)}}}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.icon.size*.5,this.boundingBox.left=e-this.options.icon.size*.5,this.boundingBox.right=e+this.options.icon.size*.5,this.boundingBox.bottom=r+this.options.icon.size*.5,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+5))}_icon(e,r,n,i,s,o){const a=Number(this.options.icon.size);this.options.icon.code!==void 0?(e.font=[this.options.icon.weight!=null?this.options.icon.weight:i?"bold":"",(this.options.icon.weight!=null&&i?5:0)+a+"px",this.options.icon.face].join(" "),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",this.enableShadow(e,o),e.fillText(this.options.icon.code,r,n),this.disableShadow(e,o)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let H$e=class extends OD{constructor(e,r,n,i,s){super(e,r,n),this.setImages(i,s)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0){const s=this.options.size*2;this.width=s,this.height=s;return}this.needsRefresh(r,n)&&this._resizeImage()}draw(e,r,n,i,s,o){e.save(),this.switchImages(i),this.resize();let a=r,l=n;if(this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=r,this.top=n,a+=this.width/2,l+=this.height/2):(this.left=r-this.width/2,this.top=n-this.height/2),this.options.shapeProperties.useBorderWithImage===!0){const u=this.options.borderWidth,d=this.options.borderWidthSelected||2*this.options.borderWidth,h=(i?d:u)/this.body.view.scale;e.lineWidth=Math.min(this.width,h),e.beginPath();let f=i?this.options.color.highlight.border:s?this.options.color.hover.border:this.options.color.border,p=i?this.options.color.highlight.background:s?this.options.color.hover.background:this.options.color.background;o.opacity!==void 0&&(f=qi(f,o.opacity),p=qi(p,o.opacity)),e.strokeStyle=f,e.fillStyle=p,e.rect(this.left-.5*e.lineWidth,this.top-.5*e.lineWidth,this.width+e.lineWidth,this.height+e.lineWidth),Vm(e).call(e),this.performStroke(e,o),e.closePath()}this._drawImageAtPosition(e,o),this._drawImageLabel(e,a,l,i,s),this.updateBoundingBox(r,n),e.restore()}updateBoundingBox(e,r){this.resize(),this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=e,this.top=r):(this.left=e-this.width/2,this.top=r-this.height/2),this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class K$e extends _l{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"square",2,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class G$e extends _l{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"hexagon",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class Y$e extends _l{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"star",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class Q$e extends du{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){this.needsRefresh(r,n)&&(this.textSize=this.labelModule.getTextSize(e,r,n),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.enableShadow(e,o),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s),this.disableShadow(e,o),this.updateBoundingBox(r,n,e,i,s)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let X$e=class extends _l{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"triangle",3,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class J$e extends _l{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"triangleDown",3,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}function DQ(t,e){var r=nr(t);if(ll){var n=ll(t);e&&(n=Gn(n).call(n,function(i){return Sl(t,i).enumerable})),r.push.apply(r,n)}return r}function $Q(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?kt(r=DQ(Object(i),!0)).call(r,function(s){yo(t,s,i[s])}):cl?qb(t,cl(i)):kt(n=DQ(Object(i))).call(n,function(s){Lb(t,s,Sl(i,s))})}return t}class Lt{constructor(e,r,n,i,s,o){this.options=Za(s),this.globalOptions=s,this.defaultOptions=o,this.body=r,this.edges=[],this.id=void 0,this.imagelist=n,this.grouplist=i,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new md(this.body,this.options,!1),this.setOptions(e)}attachEdge(e){var r;xt(r=this.edges).call(r,e)===-1&&this.edges.push(e)}detachEdge(e){var r;const n=xt(r=this.edges).call(r,e);if(n!=-1){var i;No(i=this.edges).call(i,n,1)}}setOptions(e){const r=this.options.shape;if(!e)return;if(typeof e.color<"u"&&(this._localColor=e.color),e.id!==void 0&&(this.id=e.id),this.id===void 0)throw new Error("Node must have an id");Lt.checkMass(e,this.id),e.x!==void 0&&(e.x===null?(this.x=void 0,this.predefinedPosition=!1):(this.x=ls(e.x),this.predefinedPosition=!0)),e.y!==void 0&&(e.y===null?(this.y=void 0,this.predefinedPosition=!1):(this.y=ls(e.y),this.predefinedPosition=!0)),e.size!==void 0&&(this.baseSize=e.size),e.value!==void 0&&(e.value=ale(e.value)),Lt.parseOptions(this.options,e,!0,this.globalOptions,this.grouplist);const n=[e,this.options,this.defaultOptions];return this.chooser=jD("node",n),this._load_images(),this.updateLabelModule(e),e.opacity!==void 0&&Lt.checkOpacity(e.opacity)&&(this.options.opacity=e.opacity),this.updateShape(r),e.hidden!==void 0||e.physics!==void 0}_load_images(){if((this.options.shape==="circularImage"||this.options.shape==="image")&&this.options.image===void 0)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(this.options.image!==void 0){if(this.imagelist===void 0)throw new Error("Internal Error: No images provided");if(typeof this.options.image=="string")this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(this.options.image.unselected===void 0)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),this.options.image.selected!==void 0?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}static checkOpacity(e){return 0<=e&&e<=1}static checkCoordinateOrigin(e){return e===void 0||e==="center"||e==="top-left"}static updateGroupOptions(e,r,n){var i;if(n===void 0)return;const s=e.group;if(r!==void 0&&r.group!==void 0&&s!==r.group)throw new Error("updateGroupOptions: group values in options don't match.");if(!(typeof s=="number"||typeof s=="string"&&s!=""))return;const a=n.get(s);a.opacity!==void 0&&r.opacity===void 0&&(Lt.checkOpacity(a.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+a.opacity),a.opacity=void 0));const l=Gn(i=a$e(r)).call(i,u=>r[u]!=null);l.push("font"),o0(l,e,a),e.color=aR(e.color)}static parseOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4?arguments[4]:void 0;if(o0(["color","fixed","shadow"],e,r,n),Lt.checkMass(r),e.opacity!==void 0&&(Lt.checkOpacity(e.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity),e.opacity=void 0)),r.opacity!==void 0&&(Lt.checkOpacity(r.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+r.opacity),r.opacity=void 0)),r.shapeProperties&&!Lt.checkCoordinateOrigin(r.shapeProperties.coordinateOrigin)&&console.error("Invalid option for node coordinateOrigin, found: "+r.shapeProperties.coordinateOrigin),Mi(e,r,"shadow",i),r.color!==void 0&&r.color!==null){const a=aR(r.color);zae(e.color,a)}else n===!0&&r.color===null&&(e.color=Za(i.color));r.fixed!==void 0&&r.fixed!==null&&(typeof r.fixed=="boolean"?(e.fixed.x=r.fixed,e.fixed.y=r.fixed):(r.fixed.x!==void 0&&typeof r.fixed.x=="boolean"&&(e.fixed.x=r.fixed.x),r.fixed.y!==void 0&&typeof r.fixed.y=="boolean"&&(e.fixed.y=r.fixed.y))),n===!0&&r.font===null&&(e.font=Za(i.font)),Lt.updateGroupOptions(e,r,s),r.scaling!==void 0&&Mi(e.scaling,r.scaling,"label",i.scaling)}getFormattingValues(){const e={color:this.options.color.background,opacity:this.options.opacity,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};if(this.selected||this.hover?this.chooser===!0?this.selected?(this.options.borderWidthSelected!=null?e.borderWidth=this.options.borderWidthSelected:e.borderWidth*=2,e.color=this.options.color.highlight.background,e.borderColor=this.options.color.highlight.border,e.shadow=this.options.shadow.enabled):this.hover&&(e.color=this.options.color.hover.background,e.borderColor=this.options.color.hover.border,e.shadow=this.options.shadow.enabled):typeof this.chooser=="function"&&(this.chooser(e,this.options.id,this.selected,this.hover),e.shadow===!1&&(e.shadowColor!==this.options.shadow.color||e.shadowSize!==this.options.shadow.size||e.shadowX!==this.options.shadow.x||e.shadowY!==this.options.shadow.y)&&(e.shadow=!0)):e.shadow=this.options.shadow.enabled,this.options.opacity!==void 0){const r=this.options.opacity;e.borderColor=qi(e.borderColor,r),e.color=qi(e.color,r),e.shadowColor=qi(e.shadowColor,r)}return e}updateLabelModule(e){(this.options.label===void 0||this.options.label===null)&&(this.options.label=""),Lt.updateGroupOptions(this.options,$Q($Q({},e),{},{color:e&&e.color||this._localColor||void 0}),this.grouplist);const r=this.grouplist.get(this.options.group,!1),n=[e,this.options,r,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,n),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}updateShape(e){if(e===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new $$e(this.options,this.body,this.labelModule);break;case"circle":this.shape=new F$e(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new q$e(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"custom":this.shape=new B$e(this.options,this.body,this.labelModule,this.options.ctxRenderer);break;case"database":this.shape=new z$e(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new V$e(this.options,this.body,this.labelModule);break;case"dot":this.shape=new W$e(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new AQ(this.options,this.body,this.labelModule);break;case"icon":this.shape=new U$e(this.options,this.body,this.labelModule);break;case"image":this.shape=new H$e(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new K$e(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new G$e(this.options,this.body,this.labelModule);break;case"star":this.shape=new Y$e(this.options,this.body,this.labelModule);break;case"text":this.shape=new Q$e(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new X$e(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new J$e(this.options,this.body,this.labelModule);break;default:this.shape=new AQ(this.options,this.body,this.labelModule);break}this.needsRefresh()}select(){this.selected=!0,this.needsRefresh()}unselect(){this.selected=!1,this.needsRefresh()}needsRefresh(){this.shape.refreshNeeded=!0}getTitle(){return this.options.title}distanceToBorder(e,r){return this.shape.distanceToBorder(e,r)}isFixed(){return this.options.fixed.x&&this.options.fixed.y}isSelected(){return this.selected}getValue(){return this.options.value}getLabelSize(){return this.labelModule.size()}setValueRange(e,r,n){if(this.options.value!==void 0){const i=this.options.scaling.customScalingFunction(e,r,n,this.options.value),s=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){const o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*o}this.options.size=this.options.scaling.min+i*s}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}draw(e){const r=this.getFormattingValues();return this.shape.draw(e,this.x,this.y,this.selected,this.hover,r)||{}}updateBoundingBox(e){this.shape.updateBoundingBox(this.x,this.y,e)}resize(e){const r=this.getFormattingValues();this.shape.resize(e,this.selected,this.hover,r)}getItemsOnPoint(e){const r=[];return this.labelModule.visible()&&hR(this.labelModule.getSize(),e)&&r.push({nodeId:this.id,labelId:0}),hR(this.shape.boundingBox,e)&&r.push({nodeId:this.id}),r}isOverlappingWith(e){return this.shape.left<e.right&&this.shape.left+this.shape.width>e.left&&this.shape.top<e.bottom&&this.shape.top+this.shape.height>e.top}isBoundingBoxOverlappingWith(e){return this.shape.boundingBox.left<e.right&&this.shape.boundingBox.right>e.left&&this.shape.boundingBox.top<e.bottom&&this.shape.boundingBox.bottom>e.top}static checkMass(e,r){if(e.mass!==void 0&&e.mass<=0){let n="";r!==void 0&&(n=" in node id: "+r),console.error("%cNegative or zero mass disallowed"+n+", setting mass to 1.",Hae),e.mass=1}}}class Z$e{constructor(e,r,n,i){var s;if(this.body=e,this.images=r,this.groups=n,this.layoutEngine=i,this.body.functions.createNode=se(s=this.create).call(s,this),this.nodesListeners={add:(o,a)=>{this.add(a.items)},update:(o,a)=>{this.update(a.items,a.data,a.oldData)},remove:(o,a)=>{this.remove(a.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:void 0,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},opacity:void 0,fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(o,a,l,u){if(a===o)return .5;{const d=1/(a-o);return Math.max(0,(u-o)*d)}}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1,coordinateOrigin:"center"},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=Za(this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e,r;this.body.emitter.on("refreshNodes",se(e=this.refresh).call(e,this)),this.body.emitter.on("refresh",se(r=this.refresh).call(r,this)),this.body.emitter.on("destroy",()=>{tt(this.nodesListeners,(n,i)=>{this.body.data.nodes&&this.body.data.nodes.off(i,n)}),delete this.body.functions.createNode,delete this.nodesListeners.add,delete this.nodesListeners.update,delete this.nodesListeners.remove,delete this.nodesListeners})}setOptions(e){if(e!==void 0){if(Lt.parseOptions(this.options,e),e.opacity!==void 0&&(dR(e.opacity)||!Ql(e.opacity)||e.opacity<0||e.opacity>1?console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity):this.options.opacity=e.opacity),e.shape!==void 0)for(const r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&this.body.nodes[r].updateShape();if(typeof e.font<"u"||typeof e.widthConstraint<"u"||typeof e.heightConstraint<"u")for(const r of nr(this.body.nodes))this.body.nodes[r].updateLabelModule(),this.body.nodes[r].needsRefresh();if(e.size!==void 0)for(const r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&this.body.nodes[r].needsRefresh();(e.hidden!==void 0||e.physics!==void 0)&&this.body.emitter.emit("_dataChanged")}}setData(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.data.nodes;if(Loe("id",e))this.body.data.nodes=e;else if(ar(e))this.body.data.nodes=new eh,this.body.data.nodes.add(e);else if(!e)this.body.data.nodes=new eh;else throw new TypeError("Array or DataSet expected");if(n&&tt(this.nodesListeners,function(i,s){n.off(s,i)}),this.body.nodes={},this.body.data.nodes){const i=this;tt(this.nodesListeners,function(o,a){i.body.data.nodes.on(a,o)});const s=this.body.data.nodes.getIds();this.add(s,!0)}r===!1&&this.body.emitter.emit("_dataChanged")}add(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n;const i=[];for(let s=0;s<e.length;s++){n=e[s];const o=this.body.data.nodes.get(n),a=this.create(o);i.push(a),this.body.nodes[n]=a}this.layoutEngine.positionInitially(i),r===!1&&this.body.emitter.emit("_dataChanged")}update(e,r,n){const i=this.body.nodes;let s=!1;for(let o=0;o<e.length;o++){const a=e[o];let l=i[a];const u=r[o];l!==void 0?l.setOptions(u)&&(s=!0):(s=!0,l=this.create(u),i[a]=l)}!s&&n!==void 0&&(s=lDe(r).call(r,function(o,a){const l=n[a];return l&&l.level!==o.level})),s===!0?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}remove(e){const r=this.body.nodes;for(let n=0;n<e.length;n++){const i=e[n];delete r[i]}this.body.emitter.emit("_dataChanged")}create(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Lt;return new r(e,this.body,this.images,this.groups,this.options,this.defaultOptions)}refresh(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;tt(this.body.nodes,(r,n)=>{const i=this.body.data.nodes.get(n);i!==void 0&&(e===!0&&r.setOptions({x:null,y:null}),r.setOptions({fixed:!1}),r.setOptions(i))})}getPositions(e){const r={};if(e!==void 0){if(ar(e)===!0){for(let n=0;n<e.length;n++)if(this.body.nodes[e[n]]!==void 0){const i=this.body.nodes[e[n]];r[e[n]]={x:Math.round(i.x),y:Math.round(i.y)}}}else if(this.body.nodes[e]!==void 0){const n=this.body.nodes[e];r[e]={x:Math.round(n.x),y:Math.round(n.y)}}}else for(let n=0;n<this.body.nodeIndices.length;n++){const i=this.body.nodes[this.body.nodeIndices[n]];r[this.body.nodeIndices[n]]={x:Math.round(i.x),y:Math.round(i.y)}}return r}getPosition(e){if(e==null)throw new TypeError("No id was specified for getPosition method.");if(this.body.nodes[e]==null)throw new ReferenceError("NodeId provided for getPosition does not exist. Provided: ".concat(e));return{x:Math.round(this.body.nodes[e].x),y:Math.round(this.body.nodes[e].y)}}storePositions(){const e=[],r=this.body.data.nodes.getDataSet();for(const n of r.get()){const i=n.id,s=this.body.nodes[i],o=Math.round(s.x),a=Math.round(s.y);(n.x!==o||n.y!==a)&&e.push({id:i,x:o,y:a})}r.update(e)}getBoundingBox(e){if(this.body.nodes[e]!==void 0)return this.body.nodes[e].shape.boundingBox}getConnectedNodes(e,r){const n=[];if(this.body.nodes[e]!==void 0){const i=this.body.nodes[e],s={};for(let o=0;o<i.edges.length;o++){const a=i.edges[o];r!=="to"&&a.toId==i.id?s[a.fromId]===void 0&&(n.push(a.fromId),s[a.fromId]=!0):r!=="from"&&a.fromId==i.id&&s[a.toId]===void 0&&(n.push(a.toId),s[a.toId]=!0)}}return n}getConnectedEdges(e){const r=[];if(this.body.nodes[e]!==void 0){const n=this.body.nodes[e];for(let i=0;i<n.edges.length;i++)r.push(n.edges[i].id)}else console.error("NodeId provided for getConnectedEdges does not exist. Provided: ",e);return r}moveNode(e,r,n){this.body.nodes[e]!==void 0?(this.body.nodes[e].x=Number(r),this.body.nodes[e].y=Number(n),ko(()=>{this.body.emitter.emit("startSimulation")},0)):console.error("Node id supplied to moveNode does not exist. Provided: ",e)}}var FQ={},qQ;function e4e(){if(qQ)return FQ;qQ=1;var t=Ie(),e=Math.hypot,r=Math.abs,n=Math.sqrt,i=!!e&&e(1/0,NaN)!==1/0;return t({target:"Math",stat:!0,arity:2,forced:i},{hypot:function(o,a){for(var l=0,u=0,d=arguments.length,h=0,f,p;u<d;)f=r(arguments[u++]),h<f?(p=h/f,l=l*p*p+1,h=f):f>0?(p=f/h,l+=p*p):l+=f;return h===1/0?1/0:h*n(l)}}),FQ}var Vj,LQ;function t4e(){if(LQ)return Vj;LQ=1,e4e();var t=_t();return Vj=t.Math.hypot,Vj}var Wj,BQ;function r4e(){if(BQ)return Wj;BQ=1;var t=t4e();return Wj=t,Wj}var Uj,zQ;function n4e(){return zQ||(zQ=1,Uj=r4e()),Uj}var i4e=n4e(),s4e=Ve(i4e);class hr{static transform(e,r){ar(e)||(e=[e]);const n=r.point.x,i=r.point.y,s=r.angle,o=r.length;for(let a=0;a<e.length;++a){const l=e[a],u=l.x*Math.cos(s)-l.y*Math.sin(s),d=l.x*Math.sin(s)+l.y*Math.cos(s);l.x=n+o*u,l.y=i+o*d}}static drawPath(e,r){e.beginPath(),e.moveTo(r[0].x,r[0].y);for(let n=1;n<r.length;++n)e.lineTo(r[n].x,r[n].y);e.closePath()}}let o4e=class extends hr{static draw(e,r){if(r.image){e.save(),e.translate(r.point.x,r.point.y),e.rotate(Math.PI/2+r.angle);const n=r.imageWidth!=null?r.imageWidth:r.image.width,i=r.imageHeight!=null?r.imageHeight:r.image.height;r.image.drawImageAtPosition(e,1,-n/2,0,n,i),e.restore()}return!1}};class a4e extends hr{static draw(e,r){const n=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];return hr.transform(n,r),hr.drawPath(e,n),!0}}class l4e{static draw(e,r){const n=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];return hr.transform(n,r),hr.drawPath(e,n),!0}}class c4e{static draw(e,r){const n={x:-.4,y:0};hr.transform(n,r),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";const i=Math.PI,s=r.angle-i/2,o=r.angle+i/2;return e.beginPath(),e.arc(n.x,n.y,r.length*.4,s,o,!1),e.stroke(),!0}}class u4e{static draw(e,r){const n={x:-.3,y:0};hr.transform(n,r),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";const i=Math.PI,s=r.angle+i/2,o=r.angle+3*i/2;return e.beginPath(),e.arc(n.x,n.y,r.length*.4,s,o,!1),e.stroke(),!0}}class d4e{static draw(e,r){const n=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];return hr.transform(n,r),hr.drawPath(e,n),!0}}class h4e{static draw(e,r){const n=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];return hr.transform(n,r),hr.drawPath(e,n),!0}}class f4e{static draw(e,r){const n={x:-.4,y:0};return hr.transform(n,r),nD(e,n.x,n.y,r.length*.4),!0}}class p4e{static draw(e,r){const n=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];return hr.transform(n,r),hr.drawPath(e,n),!0}}class m4e{static draw(e,r){const n=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];return hr.transform(n,r),hr.drawPath(e,n),!0}}class g4e{static draw(e,r){const n=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];return hr.transform(n,r),hr.drawPath(e,n),!0}}class y4e{static draw(e,r){const n=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];return hr.transform(n,r),hr.drawPath(e,n),!0}}class ule{static draw(e,r){let n;switch(r.type&&(n=r.type.toLowerCase()),n){case"image":return o4e.draw(e,r);case"circle":return f4e.draw(e,r);case"box":return m4e.draw(e,r);case"crow":return l4e.draw(e,r);case"curve":return c4e.draw(e,r);case"diamond":return g4e.draw(e,r);case"inv_curve":return u4e.draw(e,r);case"triangle":return d4e.draw(e,r);case"inv_triangle":return h4e.draw(e,r);case"bar":return p4e.draw(e,r);case"vee":return y4e.draw(e,r);case"arrow":default:return a4e.draw(e,r)}}}function VQ(t,e){var r=nr(t);if(ll){var n=ll(t);e&&(n=Gn(n).call(n,function(i){return Sl(t,i).enumerable})),r.push.apply(r,n)}return r}function WQ(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?kt(r=VQ(Object(i),!0)).call(r,function(s){yo(t,s,i[s])}):cl?qb(t,cl(i)):kt(n=VQ(Object(i))).call(n,function(s){Lb(t,s,Sl(i,s))})}return t}class dle{constructor(e,r,n){yo(this,"color",{}),yo(this,"colorDirty",!0),yo(this,"hoverWidth",1.5),yo(this,"selectionWidth",2),this._body=r,this._labelModule=n,this.setOptions(e),this.fromPoint=this.from,this.toPoint=this.to}connect(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to]}cleanup(){return!1}setOptions(e){this.options=e,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.id=this.options.id}drawLine(e,r,n,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.getViaNode();e.strokeStyle=this.getColor(e,r),e.lineWidth=r.width,r.dashes!==!1?this._drawDashedLine(e,r,s):this._drawLine(e,r,s)}_drawLine(e,r,n,i,s){if(this.from!=this.to)this._line(e,r,n,i,s);else{const[o,a,l]=this._getCircleData(e);this._circle(e,r,o,a,l)}}_drawDashedLine(e,r,n,i,s){e.lineCap="round";const o=ar(r.dashes)?r.dashes:[5,5];if(e.setLineDash!==void 0){if(e.save(),e.setLineDash(o),e.lineDashOffset=0,this.from!=this.to)this._line(e,r,n);else{const[a,l,u]=this._getCircleData(e);this._circle(e,r,a,l,u)}e.setLineDash([0]),e.lineDashOffset=0,e.restore()}else{if(this.from!=this.to)Qoe(e,this.from.x,this.from.y,this.to.x,this.to.y,o);else{const[a,l,u]=this._getCircleData(e);this._circle(e,r,a,l,u)}this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}}findBorderPosition(e,r,n){return this.from!=this.to?this._findBorderPosition(e,r,n):this._findBorderPositionCircle(e,r,n)}findBorderPositions(e){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,e),to:this._findBorderPosition(this.to,e)};{var r;const[n,i]=Is(r=this._getCircleData(e)).call(r,0,2);return{from:this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:.6,high:.8,direction:1})}}}_getCircleData(e){const r=this.options.selfReference.size;e!==void 0&&this.from.shape.width===void 0&&this.from.shape.resize(e);const n=lle(e,this.options.selfReference.angle,r,this.from);return[n.x,n.y,r]}_pointOnCircle(e,r,n,i){const s=i*2*Math.PI;return{x:e+n*Math.cos(s),y:r-n*Math.sin(s)}}_findBorderPositionCircle(e,r,n){const i=n.x,s=n.y;let o=n.low,a=n.high;const l=n.direction,u=10,d=this.options.selfReference.size,h=.05;let f,p=(o+a)*.5,m=0;this.options.arrowStrikethrough===!0&&(l===-1?m=this.options.endPointOffset.from:l===1&&(m=this.options.endPointOffset.to));let g=0;do{p=(o+a)*.5,f=this._pointOnCircle(i,s,d,p);const v=Math.atan2(e.y-f.y,e.x-f.x),y=e.distanceToBorder(r,v)+m,b=Math.sqrt(Math.pow(f.x-e.x,2)+Math.pow(f.y-e.y,2)),w=y-b;if(Math.abs(w)<h)break;w>0?l>0?o=p:a=p:l>0?a=p:o=p,++g}while(o<=a&&g<u);return WQ(WQ({},f),{},{t:p})}getLineWidth(e,r){return e===!0?Math.max(this.selectionWidth,.3/this._body.view.scale):r===!0?Math.max(this.hoverWidth,.3/this._body.view.scale):Math.max(this.options.width,.3/this._body.view.scale)}getColor(e,r){if(r.inheritsColor!==!1){if(r.inheritsColor==="both"&&this.from.id!==this.to.id){const n=e.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y);let i=this.from.options.color.highlight.border,s=this.to.options.color.highlight.border;return this.from.selected===!1&&this.to.selected===!1?(i=qi(this.from.options.color.border,r.opacity),s=qi(this.to.options.color.border,r.opacity)):this.from.selected===!0&&this.to.selected===!1?s=this.to.options.color.border:this.from.selected===!1&&this.to.selected===!0&&(i=this.from.options.color.border),n.addColorStop(0,i),n.addColorStop(1,s),n}return r.inheritsColor==="to"?qi(this.to.options.color.border,r.opacity):qi(this.from.options.color.border,r.opacity)}else return qi(r.color,r.opacity)}_circle(e,r,n,i,s){this.enableShadow(e,r);let o=0,a=Math.PI*2;if(!this.options.selfReference.renderBehindTheNode){const l=this.options.selfReference.angle,u=this.options.selfReference.angle+Math.PI,d=this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:l,high:u,direction:-1}),h=this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:l,high:u,direction:1});o=Math.atan2(d.y-i,d.x-n),a=Math.atan2(h.y-i,h.x-n)}e.beginPath(),e.arc(n,i,s,o,a,!1),e.stroke(),this.disableShadow(e,r)}getDistanceToEdge(e,r,n,i,s,o){if(this.from!=this.to)return this._getDistanceToEdge(e,r,n,i,s,o);{const[a,l,u]=this._getCircleData(void 0),d=a-s,h=l-o;return Math.abs(Math.sqrt(d*d+h*h)-u)}}_getDistanceToLine(e,r,n,i,s,o){const a=n-e,l=i-r,u=a*a+l*l;let d=((s-e)*a+(o-r)*l)/u;d>1?d=1:d<0&&(d=0);const h=e+d*a,f=r+d*l,p=h-s,m=f-o;return Math.sqrt(p*p+m*m)}getArrowData(e,r,n,i,s,o){let a,l,u,d,h,f,p;const m=o.width;r==="from"?(u=this.from,d=this.to,h=o.fromArrowScale<0,f=Math.abs(o.fromArrowScale),p=o.fromArrowType):r==="to"?(u=this.to,d=this.from,h=o.toArrowScale<0,f=Math.abs(o.toArrowScale),p=o.toArrowType):(u=this.to,d=this.from,h=o.middleArrowScale<0,f=Math.abs(o.middleArrowScale),p=o.middleArrowType);const g=15*f+3*m;if(u!=d){const w=s4e(u.x-d.x,u.y-d.y),x=g/w;if(r!=="middle")if(this.options.smooth.enabled===!0){const S=this._findBorderPosition(u,e,{via:n}),_=this.getPoint(S.t+x*(r==="from"?1:-1),n);a=Math.atan2(S.y-_.y,S.x-_.x),l=S}else a=Math.atan2(u.y-d.y,u.x-d.x),l=this._findBorderPosition(u,e);else{const S=(h?-x:x)/2,_=this.getPoint(.5+S,n),E=this.getPoint(.5-S,n);a=Math.atan2(_.y-E.y,_.x-E.x),l=this.getPoint(.5,n)}}else{const[w,x,S]=this._getCircleData(e);if(r==="from"){const _=this.options.selfReference.angle,E=this.options.selfReference.angle+Math.PI,N=this._findBorderPositionCircle(this.from,e,{x:w,y:x,low:_,high:E,direction:-1});a=N.t*-2*Math.PI+1.5*Math.PI+.1*Math.PI,l=N}else if(r==="to"){const _=this.options.selfReference.angle,E=this.options.selfReference.angle+Math.PI,N=this._findBorderPositionCircle(this.from,e,{x:w,y:x,low:_,high:E,direction:1});a=N.t*-2*Math.PI+1.5*Math.PI-1.1*Math.PI,l=N}else{const _=this.options.selfReference.angle/(2*Math.PI);l=this._pointOnCircle(w,x,S,_),a=_*-2*Math.PI+1.5*Math.PI+.1*Math.PI}}const v=l.x-g*.9*Math.cos(a),y=l.y-g*.9*Math.sin(a);return{point:l,core:{x:v,y},angle:a,length:g,type:p}}drawArrowHead(e,r,n,i,s){e.strokeStyle=this.getColor(e,r),e.fillStyle=e.strokeStyle,e.lineWidth=r.width,ule.draw(e,s)&&(this.enableShadow(e,r),Vm(e).call(e),this.disableShadow(e,r))}enableShadow(e,r){r.shadow===!0&&(e.shadowColor=r.shadowColor,e.shadowBlur=r.shadowSize,e.shadowOffsetX=r.shadowX,e.shadowOffsetY=r.shadowY)}disableShadow(e,r){r.shadow===!0&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}drawBackground(e,r){if(r.background!==!1){const n={strokeStyle:e.strokeStyle,lineWidth:e.lineWidth,dashes:e.dashes};e.strokeStyle=r.backgroundColor,e.lineWidth=r.backgroundSize,this.setStrokeDashed(e,r.backgroundDashes),e.stroke(),e.strokeStyle=n.strokeStyle,e.lineWidth=n.lineWidth,e.dashes=n.dashes,this.setStrokeDashed(e,r.dashes)}}setStrokeDashed(e,r){if(r!==!1)if(e.setLineDash!==void 0){const n=ar(r)?r:[5,5];e.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.");else e.setLineDash!==void 0?e.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}function UQ(t,e){var r=nr(t);if(ll){var n=ll(t);e&&(n=Gn(n).call(n,function(i){return Sl(t,i).enumerable})),r.push.apply(r,n)}return r}function HQ(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?kt(r=UQ(Object(i),!0)).call(r,function(s){yo(t,s,i[s])}):cl?qb(t,cl(i)):kt(n=UQ(Object(i))).call(n,function(s){Lb(t,s,Sl(i,s))})}return t}class PD extends dle{constructor(e,r,n){super(e,r,n)}_findBorderPositionBezier(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this._getViaCoordinates();const i=10,s=.2;let o=!1,a=1,l=0,u=this.to,d,h,f=this.options.endPointOffset?this.options.endPointOffset.to:0;e.id===this.from.id&&(u=this.from,o=!0,f=this.options.endPointOffset?this.options.endPointOffset.from:0),this.options.arrowStrikethrough===!1&&(f=0);let p=0;do{h=(l+a)*.5,d=this.getPoint(h,n);const m=Math.atan2(u.y-d.y,u.x-d.x),g=u.distanceToBorder(r,m)+f,v=Math.sqrt(Math.pow(d.x-u.x,2)+Math.pow(d.y-u.y,2)),y=g-v;if(Math.abs(y)<s)break;y<0?o===!1?l=h:a=h:o===!1?a=h:l=h,++p}while(l<=a&&p<i);return HQ(HQ({},d),{},{t:h})}_getDistanceToBezierEdge(e,r,n,i,s,o,a){let l=1e9,u,d,h,f,p,m=e,g=r;for(d=1;d<10;d++)h=.1*d,f=Math.pow(1-h,2)*e+2*h*(1-h)*a.x+Math.pow(h,2)*n,p=Math.pow(1-h,2)*r+2*h*(1-h)*a.y+Math.pow(h,2)*i,d>0&&(u=this._getDistanceToLine(m,g,f,p,s,o),l=u<l?u:l),m=f,g=p;return l}_bezierCurve(e,r,n,i){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),n!=null&&n.x!=null?i!=null&&i.x!=null?e.bezierCurveTo(n.x,n.y,i.x,i.y,this.toPoint.x,this.toPoint.y):e.quadraticCurveTo(n.x,n.y,this.toPoint.x,this.toPoint.y):e.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(e,r),this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}getViaNode(){return this._getViaCoordinates()}}class KQ extends PD{constructor(e,r,n){super(e,r,n),yo(this,"via",this.via),this._boundFunction=()=>{this.positionBezierNode()},this._body.emitter.on("_repositionBezierNodes",this._boundFunction)}setOptions(e){super.setOptions(e);let r=!1;this.options.physics!==e.physics&&(r=!0),this.options=e,this.id=this.options.id,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.setupSupportNode(),this.connect(),r===!0&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}connect(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.from===void 0||this.to===void 0||this.options.physics===!1?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}cleanup(){return this._body.emitter.off("_repositionBezierNodes",this._boundFunction),this.via!==void 0?(delete this._body.nodes[this.via.id],this.via=void 0,!0):!1}setupSupportNode(){if(this.via===void 0){const e="edgeId:"+this.id,r=this._body.functions.createNode({id:e,shape:"circle",physics:!0,hidden:!0});this._body.nodes[e]=r,this.via=r,this.via.parentEdgeId=this.id,this.positionBezierNode()}}positionBezierNode(){this.via!==void 0&&this.from!==void 0&&this.to!==void 0?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):this.via!==void 0&&(this.via.x=0,this.via.y=0)}_line(e,r,n){this._bezierCurve(e,r,n)}_getViaCoordinates(){return this.via}getViaNode(){return this.via}getPoint(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.via;if(this.from===this.to){const[n,i,s]=this._getCircleData(),o=2*Math.PI*(1-e);return{x:n+s*Math.sin(o),y:i+s-s*(1-Math.cos(o))}}else return{x:Math.pow(1-e,2)*this.fromPoint.x+2*e*(1-e)*r.x+Math.pow(e,2)*this.toPoint.x,y:Math.pow(1-e,2)*this.fromPoint.y+2*e*(1-e)*r.y+Math.pow(e,2)*this.toPoint.y}}_findBorderPosition(e,r){return this._findBorderPositionBezier(e,r,this.via)}_getDistanceToEdge(e,r,n,i,s,o){return this._getDistanceToBezierEdge(e,r,n,i,s,o,this.via)}}class GQ extends PD{constructor(e,r,n){super(e,r,n)}_line(e,r,n){this._bezierCurve(e,r,n)}getViaNode(){return this._getViaCoordinates()}_getViaCoordinates(){const e=this.options.smooth.roundness,r=this.options.smooth.type;let n=Math.abs(this.from.x-this.to.x),i=Math.abs(this.from.y-this.to.y);if(r==="discrete"||r==="diagonalCross"){let s,o;n<=i?s=o=e*i:s=o=e*n,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(o=-o);let a=this.from.x+s,l=this.from.y+o;return r==="discrete"&&(n<=i?a=n<e*i?this.from.x:a:l=i<e*n?this.from.y:l),{x:a,y:l}}else if(r==="straightCross"){let s=(1-e)*n,o=(1-e)*i;return n<=i?(s=0,this.from.y<this.to.y&&(o=-o)):(this.from.x<this.to.x&&(s=-s),o=0),{x:this.to.x+s,y:this.to.y+o}}else if(r==="horizontal"){let s=(1-e)*n;return this.from.x<this.to.x&&(s=-s),{x:this.to.x+s,y:this.from.y}}else if(r==="vertical"){let s=(1-e)*i;return this.from.y<this.to.y&&(s=-s),{x:this.from.x,y:this.to.y+s}}else if(r==="curvedCW"){n=this.to.x-this.from.x,i=this.from.y-this.to.y;const s=Math.sqrt(n*n+i*i),o=Math.PI,l=(Math.atan2(i,n)+(e*.5+.5)*o)%(2*o);return{x:this.from.x+(e*.5+.5)*s*Math.sin(l),y:this.from.y+(e*.5+.5)*s*Math.cos(l)}}else if(r==="curvedCCW"){n=this.to.x-this.from.x,i=this.from.y-this.to.y;const s=Math.sqrt(n*n+i*i),o=Math.PI,l=(Math.atan2(i,n)+(-e*.5+.5)*o)%(2*o);return{x:this.from.x+(e*.5+.5)*s*Math.sin(l),y:this.from.y+(e*.5+.5)*s*Math.cos(l)}}else{let s,o;n<=i?s=o=e*i:s=o=e*n,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(o=-o);let a=this.from.x+s,l=this.from.y+o;return n<=i?this.from.x<=this.to.x?a=this.to.x<a?this.to.x:a:a=this.to.x>a?this.to.x:a:this.from.y>=this.to.y?l=this.to.y>l?this.to.y:l:l=this.to.y<l?this.to.y:l,{x:a,y:l}}}_findBorderPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._findBorderPositionBezier(e,r,n.via)}_getDistanceToEdge(e,r,n,i,s,o){let a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(e,r,n,i,s,o,a)}getPoint(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates();const n=e,i=Math.pow(1-n,2)*this.fromPoint.x+2*n*(1-n)*r.x+Math.pow(n,2)*this.toPoint.x,s=Math.pow(1-n,2)*this.fromPoint.y+2*n*(1-n)*r.y+Math.pow(n,2)*this.toPoint.y;return{x:i,y:s}}}class v4e extends PD{constructor(e,r,n){super(e,r,n)}_getDistanceToBezierEdge2(e,r,n,i,s,o,a,l){let u=1e9,d=e,h=r;const f=[0,0,0,0];for(let p=1;p<10;p++){const m=.1*p;f[0]=Math.pow(1-m,3),f[1]=3*m*Math.pow(1-m,2),f[2]=3*Math.pow(m,2)*(1-m),f[3]=Math.pow(m,3);const g=f[0]*e+f[1]*a.x+f[2]*l.x+f[3]*n,v=f[0]*r+f[1]*a.y+f[2]*l.y+f[3]*i;if(p>0){const y=this._getDistanceToLine(d,h,g,v,s,o);u=y<u?y:u}d=g,h=v}return u}}class YQ extends v4e{constructor(e,r,n){super(e,r,n)}_line(e,r,n){const i=n[0],s=n[1];this._bezierCurve(e,r,i,s)}_getViaCoordinates(){const e=this.from.x-this.to.x,r=this.from.y-this.to.y;let n,i,s,o;const a=this.options.smooth.roundness;return(Math.abs(e)>Math.abs(r)||this.options.smooth.forceDirection===!0||this.options.smooth.forceDirection==="horizontal")&&this.options.smooth.forceDirection!=="vertical"?(i=this.from.y,o=this.to.y,n=this.from.x-a*e,s=this.to.x+a*e):(i=this.from.y-a*r,o=this.to.y+a*r,n=this.from.x,s=this.to.x),[{x:n,y:i},{x:s,y:o}]}getViaNode(){return this._getViaCoordinates()}_findBorderPosition(e,r){return this._findBorderPositionBezier(e,r)}_getDistanceToEdge(e,r,n,i,s,o){let[a,l]=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge2(e,r,n,i,s,o,a,l)}getPoint(e){let[r,n]=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates();const i=e,s=[Math.pow(1-i,3),3*i*Math.pow(1-i,2),3*Math.pow(i,2)*(1-i),Math.pow(i,3)],o=s[0]*this.fromPoint.x+s[1]*r.x+s[2]*n.x+s[3]*this.toPoint.x,a=s[0]*this.fromPoint.y+s[1]*r.y+s[2]*n.y+s[3]*this.toPoint.y;return{x:o,y:a}}}class QQ extends dle{constructor(e,r,n){super(e,r,n)}_line(e,r){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),e.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}getViaNode(){}getPoint(e){return{x:(1-e)*this.fromPoint.x+e*this.toPoint.x,y:(1-e)*this.fromPoint.y+e*this.toPoint.y}}_findBorderPosition(e,r){let n=this.to,i=this.from;e.id===this.from.id&&(n=this.from,i=this.to);const s=Math.atan2(n.y-i.y,n.x-i.x),o=n.x-i.x,a=n.y-i.y,l=Math.sqrt(o*o+a*a),u=e.distanceToBorder(r,s),d=(l-u)/l;return{x:(1-d)*i.x+d*n.x,y:(1-d)*i.y+d*n.y,t:0}}_getDistanceToEdge(e,r,n,i,s,o){return this._getDistanceToLine(e,r,n,i,s,o)}}class el{constructor(e,r,n,i,s){if(r===void 0)throw new Error("No body provided");this.options=Za(i),this.globalOptions=i,this.defaultOptions=s,this.body=r,this.imagelist=n,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new md(this.body,this.options,!0),this.setOptions(e)}setOptions(e){if(!e)return;let r=typeof e.physics<"u"&&this.options.physics!==e.physics||typeof e.hidden<"u"&&(this.options.hidden||!1)!==(e.hidden||!1)||typeof e.from<"u"&&this.options.from!==e.from||typeof e.to<"u"&&this.options.to!==e.to;el.parseOptions(this.options,e,!0,this.globalOptions),e.id!==void 0&&(this.id=e.id),e.from!==void 0&&(this.fromId=e.from),e.to!==void 0&&(this.toId=e.to),e.title!==void 0&&(this.title=e.title),e.value!==void 0&&(e.value=ale(e.value));const n=[e,this.options,this.defaultOptions];return this.chooser=jD("edge",n),this.updateLabelModule(e),r=this.updateEdgeType()||r,this._setInteractionWidths(),this.connect(),r}static parseOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Vh(["endPointOffset","arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","selfReference","to","title","value","width","font","chosen","widthConstraint"],e,r,n),r.endPointOffset!==void 0&&r.endPointOffset.from!==void 0&&(Ql(r.endPointOffset.from)?e.endPointOffset.from=r.endPointOffset.from:(e.endPointOffset.from=i.endPointOffset.from!==void 0?i.endPointOffset.from:0,console.error("endPointOffset.from is not a valid number"))),r.endPointOffset!==void 0&&r.endPointOffset.to!==void 0&&(Ql(r.endPointOffset.to)?e.endPointOffset.to=r.endPointOffset.to:(e.endPointOffset.to=i.endPointOffset.to!==void 0?i.endPointOffset.to:0,console.error("endPointOffset.to is not a valid number"))),l0(r.label)?e.label=r.label:l0(e.label)||(e.label=void 0),Mi(e,r,"smooth",i),Mi(e,r,"shadow",i),Mi(e,r,"background",i),r.dashes!==void 0&&r.dashes!==null?e.dashes=r.dashes:n===!0&&r.dashes===null&&(e.dashes=yc(i.dashes)),r.scaling!==void 0&&r.scaling!==null?(r.scaling.min!==void 0&&(e.scaling.min=r.scaling.min),r.scaling.max!==void 0&&(e.scaling.max=r.scaling.max),Mi(e.scaling,r.scaling,"label",i.scaling)):n===!0&&r.scaling===null&&(e.scaling=yc(i.scaling)),r.arrows!==void 0&&r.arrows!==null)if(typeof r.arrows=="string"){const a=r.arrows.toLowerCase();e.arrows.to.enabled=xt(a).call(a,"to")!=-1,e.arrows.middle.enabled=xt(a).call(a,"middle")!=-1,e.arrows.from.enabled=xt(a).call(a,"from")!=-1}else if(typeof r.arrows=="object")Mi(e.arrows,r.arrows,"to",i.arrows),Mi(e.arrows,r.arrows,"middle",i.arrows),Mi(e.arrows,r.arrows,"from",i.arrows);else throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+zm(r.arrows));else n===!0&&r.arrows===null&&(e.arrows=yc(i.arrows));if(r.color!==void 0&&r.color!==null){const a=fd(r.color)?{color:r.color,highlight:r.color,hover:r.color,inherit:!1,opacity:1}:r.color,l=e.color;if(s)Ot(l,i.color,!1,n);else for(const u in l)Object.prototype.hasOwnProperty.call(l,u)&&delete l[u];if(fd(l))l.color=l,l.highlight=l,l.hover=l,l.inherit=!1,a.opacity===void 0&&(l.opacity=1);else{let u=!1;a.color!==void 0&&(l.color=a.color,u=!0),a.highlight!==void 0&&(l.highlight=a.highlight,u=!0),a.hover!==void 0&&(l.hover=a.hover,u=!0),a.inherit!==void 0&&(l.inherit=a.inherit),a.opacity!==void 0&&(l.opacity=Math.min(1,Math.max(0,a.opacity))),u===!0?l.inherit=!1:l.inherit===void 0&&(l.inherit="from")}}else n===!0&&r.color===null&&(e.color=Za(i.color));n===!0&&r.font===null&&(e.font=Za(i.font)),Object.prototype.hasOwnProperty.call(r,"selfReferenceSize")&&(console.warn("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),e.selfReference.size=r.selfReferenceSize)}getFormattingValues(){const e=this.options.arrows.to===!0||this.options.arrows.to.enabled===!0,r=this.options.arrows.from===!0||this.options.arrows.from.enabled===!0,n=this.options.arrows.middle===!0||this.options.arrows.middle.enabled===!0,i=this.options.color.inherit,s={toArrow:e,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,toArrowSrc:this.options.arrows.to.src,toArrowImageWidth:this.options.arrows.to.imageWidth,toArrowImageHeight:this.options.arrows.to.imageHeight,middleArrow:n,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,middleArrowSrc:this.options.arrows.middle.src,middleArrowImageWidth:this.options.arrows.middle.imageWidth,middleArrowImageHeight:this.options.arrows.middle.imageHeight,fromArrow:r,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,fromArrowSrc:this.options.arrows.from.src,fromArrowImageWidth:this.options.arrows.from.imageWidth,fromArrowImageHeight:this.options.arrows.from.imageHeight,arrowStrikethrough:this.options.arrowStrikethrough,color:i?void 0:this.options.color.color,inheritsColor:i,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover)if(this.chooser===!0){if(this.selected){const o=this.options.selectionWidth;typeof o=="function"?s.width=o(s.width):typeof o=="number"&&(s.width+=o),s.width=Math.max(s.width,.3/this.body.view.scale),s.color=this.options.color.highlight,s.shadow=this.options.shadow.enabled}else if(this.hover){const o=this.options.hoverWidth;typeof o=="function"?s.width=o(s.width):typeof o=="number"&&(s.width+=o),s.width=Math.max(s.width,.3/this.body.view.scale),s.color=this.options.color.hover,s.shadow=this.options.shadow.enabled}}else typeof this.chooser=="function"&&(this.chooser(s,this.options.id,this.selected,this.hover),s.color!==void 0&&(s.inheritsColor=!1),s.shadow===!1&&(s.shadowColor!==this.options.shadow.color||s.shadowSize!==this.options.shadow.size||s.shadowX!==this.options.shadow.x||s.shadowY!==this.options.shadow.y)&&(s.shadow=!0));else s.shadow=this.options.shadow.enabled,s.width=Math.max(s.width,.3/this.body.view.scale);return s}updateLabelModule(e){const r=[e,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,r),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}updateEdgeType(){const e=this.options.smooth;let r=!1,n=!0;return this.edgeType!==void 0&&((this.edgeType instanceof KQ&&e.enabled===!0&&e.type==="dynamic"||this.edgeType instanceof YQ&&e.enabled===!0&&e.type==="cubicBezier"||this.edgeType instanceof GQ&&e.enabled===!0&&e.type!=="dynamic"&&e.type!=="cubicBezier"||this.edgeType instanceof QQ&&e.type.enabled===!1)&&(n=!1),n===!0&&(r=this.cleanup())),n===!0?e.enabled===!0?e.type==="dynamic"?(r=!0,this.edgeType=new KQ(this.options,this.body,this.labelModule)):e.type==="cubicBezier"?this.edgeType=new YQ(this.options,this.body,this.labelModule):this.edgeType=new GQ(this.options,this.body,this.labelModule):this.edgeType=new QQ(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),r}connect(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=this.from!==void 0&&this.to!==void 0,this.connected===!0?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}disconnect(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}getTitle(){return this.title}isSelected(){return this.selected}getValue(){return this.options.value}setValueRange(e,r,n){if(this.options.value!==void 0){const i=this.options.scaling.customScalingFunction(e,r,n,this.options.value),s=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){const o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*o}this.options.width=this.options.scaling.min+i*s}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}_setInteractionWidths(){typeof this.options.hoverWidth=="function"?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,typeof this.options.selectionWidth=="function"?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}draw(e){const r=this.getFormattingValues();if(r.hidden)return;const n=this.edgeType.getViaNode();this.edgeType.drawLine(e,r,this.selected,this.hover,n),this.drawLabel(e,n)}drawArrows(e){const r=this.getFormattingValues();if(r.hidden)return;const n=this.edgeType.getViaNode(),i={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,r.fromArrow&&(i.from=this.edgeType.getArrowData(e,"from",n,this.selected,this.hover,r),r.arrowStrikethrough===!1&&(this.edgeType.fromPoint=i.from.core),r.fromArrowSrc&&(i.from.image=this.imagelist.load(r.fromArrowSrc)),r.fromArrowImageWidth&&(i.from.imageWidth=r.fromArrowImageWidth),r.fromArrowImageHeight&&(i.from.imageHeight=r.fromArrowImageHeight)),r.toArrow&&(i.to=this.edgeType.getArrowData(e,"to",n,this.selected,this.hover,r),r.arrowStrikethrough===!1&&(this.edgeType.toPoint=i.to.core),r.toArrowSrc&&(i.to.image=this.imagelist.load(r.toArrowSrc)),r.toArrowImageWidth&&(i.to.imageWidth=r.toArrowImageWidth),r.toArrowImageHeight&&(i.to.imageHeight=r.toArrowImageHeight)),r.middleArrow&&(i.middle=this.edgeType.getArrowData(e,"middle",n,this.selected,this.hover,r),r.middleArrowSrc&&(i.middle.image=this.imagelist.load(r.middleArrowSrc)),r.middleArrowImageWidth&&(i.middle.imageWidth=r.middleArrowImageWidth),r.middleArrowImageHeight&&(i.middle.imageHeight=r.middleArrowImageHeight)),r.fromArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.from),r.middleArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.middle),r.toArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.to)}drawLabel(e,r){if(this.options.label!==void 0){const n=this.from,i=this.to;this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(e,this.selected,this.hover);let s;if(n.id!=i.id){this.labelModule.pointToSelf=!1,s=this.edgeType.getPoint(.5,r),e.save();const o=this._getRotation(e);o.angle!=0&&(e.translate(o.x,o.y),e.rotate(o.angle)),this.labelModule.draw(e,s.x,s.y,this.selected,this.hover),e.restore()}else{this.labelModule.pointToSelf=!0;const o=lle(e,this.options.selfReference.angle,this.options.selfReference.size,n);s=this._pointOnCircle(o.x,o.y,this.options.selfReference.size,this.options.selfReference.angle),this.labelModule.draw(e,s.x,s.y,this.selected,this.hover)}}}getItemsOnPoint(e){const r=[];if(this.labelModule.visible()){const i=this._getRotation();hR(this.labelModule.getSize(),e,i)&&r.push({edgeId:this.id,labelId:0})}const n={left:e.x,top:e.y};return this.isOverlappingWith(n)&&r.push({edgeId:this.id}),r}isOverlappingWith(e){if(this.connected){const n=this.from.x,i=this.from.y,s=this.to.x,o=this.to.y,a=e.left,l=e.top;return this.edgeType.getDistanceToEdge(n,i,s,o,a,l)<10}else return!1}_getRotation(e){const r=this.edgeType.getViaNode(),n=this.edgeType.getPoint(.5,r);e!==void 0&&this.labelModule.calculateLabelSize(e,this.selected,this.hover,n.x,n.y);const i={x:n.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible()||this.options.font.align==="horizontal")return i;const s=this.from.y-this.to.y,o=this.from.x-this.to.x;let a=Math.atan2(s,o);return(a<-1&&o<0||a>0&&o<0)&&(a+=Math.PI),i.angle=a,i}_pointOnCircle(e,r,n,i){return{x:e+n*Math.cos(i),y:r-n*Math.sin(i)}}select(){this.selected=!0}unselect(){this.selected=!1}cleanup(){return this.edgeType.cleanup()}remove(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}endPointsValid(){return this.body.nodes[this.fromId]!==void 0&&this.body.nodes[this.toId]!==void 0}}class b4e{constructor(e,r,n){var i;this.body=e,this.images=r,this.groups=n,this.body.functions.createEdge=se(i=this.create).call(i,this),this.edgesListeners={add:(s,o)=>{this.add(o.items)},update:(s,o)=>{this.update(o.items)},remove:(s,o)=>{this.remove(o.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},endPointOffset:{from:0,to:0},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(s,o,a,l){if(o===s)return .5;{const u=1/(o-s);return Math.max(0,(l-s)*u)}}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},Ot(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e=this,r,n;this.body.emitter.on("_forceDisableDynamicCurves",function(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i==="dynamic"&&(i="continuous");let o=!1;for(const a in e.body.edges)if(Object.prototype.hasOwnProperty.call(e.body.edges,a)){const l=e.body.edges[a],u=e.body.data.edges.get(a);if(u!=null){const d=u.smooth;d!==void 0&&d.enabled===!0&&d.type==="dynamic"&&(i===void 0?l.setOptions({smooth:!1}):l.setOptions({smooth:{type:i}}),o=!0)}}s===!0&&o===!0&&e.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",()=>{this.reconnectEdges()}),this.body.emitter.on("refreshEdges",se(r=this.refresh).call(r,this)),this.body.emitter.on("refresh",se(n=this.refresh).call(n,this)),this.body.emitter.on("destroy",()=>{tt(this.edgesListeners,(i,s)=>{this.body.data.edges&&this.body.data.edges.off(s,i)}),delete this.body.functions.createEdge,delete this.edgesListeners.add,delete this.edgesListeners.update,delete this.edgesListeners.remove,delete this.edgesListeners})}setOptions(e){if(e!==void 0){el.parseOptions(this.options,e,!0,this.defaultOptions,!0);let r=!1;if(e.smooth!==void 0)for(const n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&(r=this.body.edges[n].updateEdgeType()||r);if(e.font!==void 0)for(const n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&this.body.edges[n].updateLabelModule();(e.hidden!==void 0||e.physics!==void 0||r===!0)&&this.body.emitter.emit("_dataChanged")}}setData(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.data.edges;if(Loe("id",e))this.body.data.edges=e;else if(ar(e))this.body.data.edges=new eh,this.body.data.edges.add(e);else if(!e)this.body.data.edges=new eh;else throw new TypeError("Array or DataSet expected");if(n&&tt(this.edgesListeners,(i,s)=>{n.off(s,i)}),this.body.edges={},this.body.data.edges){tt(this.edgesListeners,(s,o)=>{this.body.data.edges.on(o,s)});const i=this.body.data.edges.getIds();this.add(i,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),r===!1&&this.body.emitter.emit("_dataChanged")}add(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.edges,i=this.body.data.edges;for(let s=0;s<e.length;s++){const o=e[s],a=n[o];a&&a.disconnect();const l=i.get(o,{showInternalIds:!0});n[o]=this.create(l)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),r===!1&&this.body.emitter.emit("_dataChanged")}update(e){const r=this.body.edges,n=this.body.data.edges;let i=!1;for(let s=0;s<e.length;s++){const o=e[s],a=n.get(o),l=r[o];l!==void 0?(l.disconnect(),i=l.setOptions(a)||i,l.connect()):(this.body.edges[o]=this.create(a),i=!0)}i===!0?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}remove(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.length===0)return;const n=this.body.edges;tt(e,i=>{const s=n[i];s!==void 0&&s.remove()}),r&&this.body.emitter.emit("_dataChanged")}refresh(){tt(this.body.edges,(e,r)=>{const n=this.body.data.edges.get(r);n!==void 0&&e.setOptions(n)})}create(e){return new el(e,this.body,this.images,this.options,this.defaultOptions)}reconnectEdges(){let e;const r=this.body.nodes,n=this.body.edges;for(e in r)Object.prototype.hasOwnProperty.call(r,e)&&(r[e].edges=[]);for(e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=n[e];i.from=null,i.to=null,i.connect()}}getConnectedNodes(e){const r=[];if(this.body.edges[e]!==void 0){const n=this.body.edges[e];n.fromId!==void 0&&r.push(n.fromId),n.toId!==void 0&&r.push(n.toId)}return r}_updateState(){this._addMissingEdges(),this._removeInvalidEdges()}_removeInvalidEdges(){const e=[];tt(this.body.edges,(r,n)=>{const i=this.body.nodes[r.toId],s=this.body.nodes[r.fromId];i!==void 0&&i.isCluster===!0||s!==void 0&&s.isCluster===!0||(i===void 0||s===void 0)&&e.push(n)}),this.remove(e,!1)}_addMissingEdges(){const e=this.body.data.edges;if(e==null)return;const r=this.body.edges,n=[];kt(e).call(e,(i,s)=>{r[s]===void 0&&n.push(s)}),this.add(n,!0)}}class hle{constructor(e,r,n){this.body=e,this.physicsBody=r,this.barnesHutTree,this.setOptions(n),this._rng=Db("BARNES HUT SOLVER")}setOptions(e){this.options=e,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}solve(){if(this.options.gravitationalConstant!==0&&this.physicsBody.physicsNodeIndices.length>0){let e;const r=this.body.nodes,n=this.physicsBody.physicsNodeIndices,i=n.length,s=this._formBarnesHutTree(r,n);this.barnesHutTree=s;for(let o=0;o<i;o++)e=r[n[o]],e.options.mass>0&&this._getForceContributions(s.root,e)}}_getForceContributions(e,r){this._getForceContribution(e.children.NW,r),this._getForceContribution(e.children.NE,r),this._getForceContribution(e.children.SW,r),this._getForceContribution(e.children.SE,r)}_getForceContribution(e,r){if(e.childrenCount>0){const n=e.centerOfMass.x-r.x,i=e.centerOfMass.y-r.y,s=Math.sqrt(n*n+i*i);s*e.calcSize>this.thetaInversed?this._calculateForces(s,n,i,r,e):e.childrenCount===4?this._getForceContributions(e,r):e.children.data.id!=r.id&&this._calculateForces(s,n,i,r,e)}}_calculateForces(e,r,n,i,s){e===0&&(e=.1,r=e),this.overlapAvoidanceFactor<1&&i.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,e-i.shape.radius));const o=this.options.gravitationalConstant*s.mass*i.options.mass/Math.pow(e,3),a=r*o,l=n*o;this.physicsBody.forces[i.id].x+=a,this.physicsBody.forces[i.id].y+=l}_formBarnesHutTree(e,r){let n;const i=r.length;let s=e[r[0]].x,o=e[r[0]].y,a=e[r[0]].x,l=e[r[0]].y;for(let v=1;v<i;v++){const y=e[r[v]],b=y.x,w=y.y;y.options.mass>0&&(b<s&&(s=b),b>a&&(a=b),w<o&&(o=w),w>l&&(l=w))}const u=Math.abs(a-s)-Math.abs(l-o);u>0?(o-=.5*u,l+=.5*u):(s+=.5*u,a-=.5*u);const h=Math.max(1e-5,Math.abs(a-s)),f=.5*h,p=.5*(s+a),m=.5*(o+l),g={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:p-f,maxX:p+f,minY:m-f,maxY:m+f},size:h,calcSize:1/h,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(g.root);for(let v=0;v<i;v++)n=e[r[v]],n.options.mass>0&&this._placeInTree(g.root,n);return g}_updateBranchMass(e,r){const n=e.centerOfMass,i=e.mass+r.options.mass,s=1/i;n.x=n.x*e.mass+r.x*r.options.mass,n.x*=s,n.y=n.y*e.mass+r.y*r.options.mass,n.y*=s,e.mass=i;const o=Math.max(Math.max(r.height,r.radius),r.width);e.maxWidth=e.maxWidth<o?o:e.maxWidth}_placeInTree(e,r,n){(n!=!0||n===void 0)&&this._updateBranchMass(e,r);const i=e.children.NW.range;let s;i.maxX>r.x?i.maxY>r.y?s="NW":s="SW":i.maxY>r.y?s="NE":s="SE",this._placeInRegion(e,r,s)}_placeInRegion(e,r,n){const i=e.children[n];switch(i.childrenCount){case 0:i.children.data=r,i.childrenCount=1,this._updateBranchMass(i,r);break;case 1:i.children.data.x===r.x&&i.children.data.y===r.y?(r.x+=this._rng(),r.y+=this._rng()):(this._splitBranch(i),this._placeInTree(i,r));break;case 4:this._placeInTree(i,r);break}}_splitBranch(e){let r=null;e.childrenCount===1&&(r=e.children.data,e.mass=0,e.centerOfMass.x=0,e.centerOfMass.y=0),e.childrenCount=4,e.children.data=null,this._insertRegion(e,"NW"),this._insertRegion(e,"NE"),this._insertRegion(e,"SW"),this._insertRegion(e,"SE"),r!=null&&this._placeInTree(e,r)}_insertRegion(e,r){let n,i,s,o;const a=.5*e.size;switch(r){case"NW":n=e.range.minX,i=e.range.minX+a,s=e.range.minY,o=e.range.minY+a;break;case"NE":n=e.range.minX+a,i=e.range.maxX,s=e.range.minY,o=e.range.minY+a;break;case"SW":n=e.range.minX,i=e.range.minX+a,s=e.range.minY+a,o=e.range.maxY;break;case"SE":n=e.range.minX+a,i=e.range.maxX,s=e.range.minY+a,o=e.range.maxY;break}e.children[r]={centerOfMass:{x:0,y:0},mass:0,range:{minX:n,maxX:i,minY:s,maxY:o},size:.5*e.size,calcSize:2*e.calcSize,children:{data:null},maxWidth:0,level:e.level+1,childrenCount:0}}_debug(e,r){this.barnesHutTree!==void 0&&(e.lineWidth=1,this._drawBranch(this.barnesHutTree.root,e,r))}_drawBranch(e,r,n){n===void 0&&(n="#FF0000"),e.childrenCount===4&&(this._drawBranch(e.children.NW,r),this._drawBranch(e.children.NE,r),this._drawBranch(e.children.SE,r),this._drawBranch(e.children.SW,r)),r.strokeStyle=n,r.beginPath(),r.moveTo(e.range.minX,e.range.minY),r.lineTo(e.range.maxX,e.range.minY),r.stroke(),r.beginPath(),r.moveTo(e.range.maxX,e.range.minY),r.lineTo(e.range.maxX,e.range.maxY),r.stroke(),r.beginPath(),r.moveTo(e.range.maxX,e.range.maxY),r.lineTo(e.range.minX,e.range.maxY),r.stroke(),r.beginPath(),r.moveTo(e.range.minX,e.range.maxY),r.lineTo(e.range.minX,e.range.minY),r.stroke()}}class x4e{constructor(e,r,n){this._rng=Db("REPULSION SOLVER"),this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i,s,o,a,l;const u=this.body.nodes,d=this.physicsBody.physicsNodeIndices,h=this.physicsBody.forces,f=this.options.nodeDistance,p=-2/3/f,m=4/3;for(let g=0;g<d.length-1;g++){a=u[d[g]];for(let v=g+1;v<d.length;v++)l=u[d[v]],e=l.x-a.x,r=l.y-a.y,n=Math.sqrt(e*e+r*r),n===0&&(n=.1*this._rng(),e=n),n<2*f&&(n<.5*f?o=1:o=p*n+m,o=o/n,i=e*o,s=r*o,h[a.id].x-=i,h[a.id].y-=s,h[l.id].x+=i,h[l.id].y+=s)}}}class w4e{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e,this.overlapAvoidanceFactor=Math.max(0,Math.min(1,this.options.avoidOverlap||0))}solve(){const e=this.body.nodes,r=this.physicsBody.physicsNodeIndices,n=this.physicsBody.forces,i=this.options.nodeDistance;for(let s=0;s<r.length-1;s++){const o=e[r[s]];for(let a=s+1;a<r.length;a++){const l=e[r[a]];if(o.level===l.level){const u=i+this.overlapAvoidanceFactor*((o.shape.radius||0)/2+(l.shape.radius||0)/2),d=l.x-o.x,h=l.y-o.y,f=Math.sqrt(d*d+h*h),p=.05;let m;f<u?m=-Math.pow(p*f,2)+Math.pow(p*u,2):m=0,f!==0&&(m=m/f);const g=d*m,v=h*m;n[o.id].x-=g,n[o.id].y-=v,n[l.id].x+=g,n[l.id].y+=v}}}}}class Hj{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r;const n=this.physicsBody.physicsEdgeIndices,i=this.body.edges;let s,o,a;for(let l=0;l<n.length;l++)r=i[n[l]],r.connected===!0&&r.toId!==r.fromId&&this.body.nodes[r.toId]!==void 0&&this.body.nodes[r.fromId]!==void 0&&(r.edgeType.via!==void 0?(e=r.options.length===void 0?this.options.springLength:r.options.length,s=r.to,o=r.edgeType.via,a=r.from,this._calculateSpringForce(s,o,.5*e),this._calculateSpringForce(o,a,.5*e)):(e=r.options.length===void 0?this.options.springLength*1.5:r.options.length,this._calculateSpringForce(r.from,r.to,e)))}_calculateSpringForce(e,r,n){const i=e.x-r.x,s=e.y-r.y,o=Math.max(Math.sqrt(i*i+s*s),.01),a=this.options.springConstant*(n-o)/o,l=i*a,u=s*a;this.physicsBody.forces[e.id]!==void 0&&(this.physicsBody.forces[e.id].x+=l,this.physicsBody.forces[e.id].y+=u),this.physicsBody.forces[r.id]!==void 0&&(this.physicsBody.forces[r.id].x-=l,this.physicsBody.forces[r.id].y-=u)}}class S4e{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i,s,o,a,l;const u=this.body.edges,d=.5,h=this.physicsBody.physicsEdgeIndices,f=this.physicsBody.physicsNodeIndices,p=this.physicsBody.forces;for(let x=0;x<f.length;x++){const S=f[x];p[S].springFx=0,p[S].springFy=0}for(let x=0;x<h.length;x++)r=u[h[x]],r.connected===!0&&(e=r.options.length===void 0?this.options.springLength:r.options.length,n=r.from.x-r.to.x,i=r.from.y-r.to.y,l=Math.sqrt(n*n+i*i),l=l===0?.01:l,a=this.options.springConstant*(e-l)/l,s=n*a,o=i*a,r.to.level!=r.from.level?(p[r.toId]!==void 0&&(p[r.toId].springFx-=s,p[r.toId].springFy-=o),p[r.fromId]!==void 0&&(p[r.fromId].springFx+=s,p[r.fromId].springFy+=o)):(p[r.toId]!==void 0&&(p[r.toId].x-=d*s,p[r.toId].y-=d*o),p[r.fromId]!==void 0&&(p[r.fromId].x+=d*s,p[r.fromId].y+=d*o)));a=1;let m,g;for(let x=0;x<f.length;x++){const S=f[x];m=Math.min(a,Math.max(-a,p[S].springFx)),g=Math.min(a,Math.max(-a,p[S].springFy)),p[S].x+=m,p[S].y+=g}let v=0,y=0;for(let x=0;x<f.length;x++){const S=f[x];v+=p[S].x,y+=p[S].y}const b=v/f.length,w=y/f.length;for(let x=0;x<f.length;x++){const S=f[x];p[S].x-=b,p[S].y-=w}}}class wy{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i;const s=this.body.nodes,o=this.physicsBody.physicsNodeIndices,a=this.physicsBody.forces;for(let l=0;l<o.length;l++){const u=o[l];i=s[u],e=-i.x,r=-i.y,n=Math.sqrt(e*e+r*r),this._calculateForces(n,e,r,a,i)}}_calculateForces(e,r,n,i,s){const o=e===0?0:this.options.centralGravity/e;i[s.id].x=r*o,i[s.id].y=n*o}}class _4e extends hle{constructor(e,r,n){super(e,r,n),this._rng=Db("FORCE ATLAS 2 BASED REPULSION SOLVER")}_calculateForces(e,r,n,i,s){e===0&&(e=.1*this._rng(),r=e),this.overlapAvoidanceFactor<1&&i.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,e-i.shape.radius));const o=i.edges.length+1,a=this.options.gravitationalConstant*s.mass*i.options.mass*o/Math.pow(e,2),l=r*a,u=n*a;this.physicsBody.forces[i.id].x+=l,this.physicsBody.forces[i.id].y+=u}}class E4e extends wy{constructor(e,r,n){super(e,r,n)}_calculateForces(e,r,n,i,s){if(e>0){const o=s.edges.length+1,a=this.options.centralGravity*o*s.options.mass;i[s.id].x=r*a,i[s.id].y=n*a}}}class N4e{constructor(e){this.body=e,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}},xr(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("initPhysics",()=>{this.initPhysics()}),this.body.emitter.on("_layoutFailed",()=>{this.layoutFailed=!0}),this.body.emitter.on("resetPhysics",()=>{this.stopSimulation(),this.ready=!1}),this.body.emitter.on("disablePhysics",()=>{this.physicsEnabled=!1,this.stopSimulation()}),this.body.emitter.on("restorePhysics",()=>{this.setOptions(this.options),this.ready===!0&&this.startSimulation()}),this.body.emitter.on("startSimulation",()=>{this.ready===!0&&this.startSimulation()}),this.body.emitter.on("stopSimulation",()=>{this.stopSimulation()}),this.body.emitter.on("destroy",()=>{this.stopSimulation(!1),this.body.emitter.off()}),this.body.emitter.on("_dataChanged",()=>{this.updatePhysicsData()})}setOptions(e){if(e!==void 0)if(e===!1)this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation();else if(e===!0)this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation();else{this.physicsEnabled=!0,o0(["stabilization"],this.options,e),Mi(this.options,e,"stabilization"),e.enabled===void 0&&(this.options.enabled=!0),this.options.enabled===!1&&(this.physicsEnabled=!1,this.stopSimulation());const r=this.options.wind;r&&((typeof r.x!="number"||dR(r.x))&&(r.x=0),(typeof r.y!="number"||dR(r.y))&&(r.y=0)),this.timestep=this.options.timestep}this.init()}init(){let e;this.options.solver==="forceAtlas2Based"?(e=this.options.forceAtlas2Based,this.nodesSolver=new _4e(this.body,this.physicsBody,e),this.edgesSolver=new Hj(this.body,this.physicsBody,e),this.gravitySolver=new E4e(this.body,this.physicsBody,e)):this.options.solver==="repulsion"?(e=this.options.repulsion,this.nodesSolver=new x4e(this.body,this.physicsBody,e),this.edgesSolver=new Hj(this.body,this.physicsBody,e),this.gravitySolver=new wy(this.body,this.physicsBody,e)):this.options.solver==="hierarchicalRepulsion"?(e=this.options.hierarchicalRepulsion,this.nodesSolver=new w4e(this.body,this.physicsBody,e),this.edgesSolver=new S4e(this.body,this.physicsBody,e),this.gravitySolver=new wy(this.body,this.physicsBody,e)):(e=this.options.barnesHut,this.nodesSolver=new hle(this.body,this.physicsBody,e),this.edgesSolver=new Hj(this.body,this.physicsBody,e),this.gravitySolver=new wy(this.body,this.physicsBody,e)),this.modelOptions=e}initPhysics(){this.physicsEnabled===!0&&this.options.enabled===!0?this.options.stabilization.enabled===!0?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}startSimulation(){if(this.physicsEnabled===!0&&this.options.enabled===!0){if(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),this.viewFunction===void 0){var e;this.viewFunction=se(e=this.simulationStep).call(e,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}else this.body.emitter.emit("_redraw")}stopSimulation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.stabilized=!0,e===!0&&this._emitStabilized(),this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,e===!0&&this.body.emitter.emit("_stopRendering"))}simulationStep(){const e=r0();this.physicsTick(),(r0()-e<.4*this.simulationInterval||this.runDoubleSpeed===!0)&&this.stabilized===!1&&(this.physicsTick(),this.runDoubleSpeed=!0),this.stabilized===!0&&this.stopSimulation()}_emitStabilized(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.stabilizationIterations;(this.stabilizationIterations>1||this.startedStabilization===!0)&&ko(()=>{this.body.emitter.emit("stabilized",{iterations:e}),this.startedStabilization=!1,this.stabilizationIterations=0},0)}physicsStep(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}adjustTimeStep(){this._evaluateStepQuality()===!0?this.timestep=1.2*this.timestep:this.timestep/1.2<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/1.2))}physicsTick(){this._startStabilizing(),this.stabilized!==!0&&(this.adaptiveTimestep===!0&&this.adaptiveTimestepEnabled===!0?(this.adaptiveCounter%this.adaptiveInterval===0?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1):(this.timestep=this.options.timestep,this.physicsStep()),this.stabilized===!0&&this.revert(),this.stabilizationIterations++)}updatePhysicsData(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];const e=this.body.nodes,r=this.body.edges;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&e[n].options.physics===!0&&this.physicsBody.physicsNodeIndices.push(e[n].id);for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&r[n].options.physics===!0&&this.physicsBody.physicsEdgeIndices.push(r[n].id);for(let n=0;n<this.physicsBody.physicsNodeIndices.length;n++){const i=this.physicsBody.physicsNodeIndices[n];this.physicsBody.forces[i]={x:0,y:0},this.physicsBody.velocities[i]===void 0&&(this.physicsBody.velocities[i]={x:0,y:0})}for(const n in this.physicsBody.velocities)e[n]===void 0&&delete this.physicsBody.velocities[n]}revert(){const e=nr(this.previousStates),r=this.body.nodes,n=this.physicsBody.velocities;this.referenceState={};for(let i=0;i<e.length;i++){const s=e[i];r[s]!==void 0?r[s].options.physics===!0&&(this.referenceState[s]={positions:{x:r[s].x,y:r[s].y}},n[s].x=this.previousStates[s].vx,n[s].y=this.previousStates[s].vy,r[s].x=this.previousStates[s].x,r[s].y=this.previousStates[s].y):delete this.previousStates[s]}}_evaluateStepQuality(){let e,r,n;const i=this.body.nodes,s=this.referenceState,o=.3;for(const a in this.referenceState)if(Object.prototype.hasOwnProperty.call(this.referenceState,a)&&i[a]!==void 0&&(e=i[a].x-s[a].positions.x,r=i[a].y-s[a].positions.y,n=Math.sqrt(Math.pow(e,2)+Math.pow(r,2)),n>o))return!1;return!0}moveNodes(){const e=this.physicsBody.physicsNodeIndices;let r=0,n=0;const i=5;for(let s=0;s<e.length;s++){const o=e[s],a=this._performStep(o);r=Math.max(r,a),n+=a}this.adaptiveTimestepEnabled=n/e.length<i,this.stabilized=r<this.options.minVelocity}calculateComponentVelocity(e,r,n){const i=this.modelOptions.damping*e,s=(r-i)/n;e+=s*this.timestep;const o=this.options.maxVelocity||1e9;return Math.abs(e)>o&&(e=e>0?o:-o),e}_performStep(e){const r=this.body.nodes[e],n=this.physicsBody.forces[e];this.options.wind&&(n.x+=this.options.wind.x,n.y+=this.options.wind.y);const i=this.physicsBody.velocities[e];return this.previousStates[e]={x:r.x,y:r.y,vx:i.x,vy:i.y},r.options.fixed.x===!1?(i.x=this.calculateComponentVelocity(i.x,n.x,r.options.mass),r.x+=i.x*this.timestep):(n.x=0,i.x=0),r.options.fixed.y===!1?(i.y=this.calculateComponentVelocity(i.y,n.y,r.options.mass),r.y+=i.y*this.timestep):(n.y=0,i.y=0),Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2))}_freezeNodes(){const e=this.body.nodes;for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&e[r].x&&e[r].y){const n=e[r].options.fixed;this.freezeCache[r]={x:n.x,y:n.y},n.x=!0,n.y=!0}}_restoreFrozenNodes(){const e=this.body.nodes;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&this.freezeCache[r]!==void 0&&(e[r].options.fixed.x=this.freezeCache[r].x,e[r].options.fixed.y=this.freezeCache[r].y);this.freezeCache={}}stabilize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.stabilization.iterations;if(typeof e!="number"&&(e=this.options.stabilization.iterations,console.error("The stabilize method needs a numeric amount of iterations. Switching to default: ",e)),this.physicsBody.physicsNodeIndices.length===0){this.ready=!0;return}this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=e,this.options.stabilization.onlyDynamicEdges===!0&&this._freezeNodes(),this.stabilizationIterations=0,ko(()=>this._stabilizationBatch(),0)}_startStabilizing(){return this.startedStabilization===!0?!1:(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}_stabilizationBatch(){const e=()=>this.stabilized===!1&&this.stabilizationIterations<this.targetIterations,r=()=>{this.body.emitter.emit("stabilizationProgress",{iterations:this.stabilizationIterations,total:this.targetIterations})};this._startStabilizing()&&r();let n=0;for(;e()&&n<this.options.stabilization.updateInterval;)this.physicsTick(),n++;if(r(),e()){var i;ko(se(i=this._stabilizationBatch).call(i,this),0)}else this._finalizeStabilization()}_finalizeStabilization(){this.body.emitter.emit("_allowRedraw"),this.options.stabilization.fit===!0&&this.body.emitter.emit("fit"),this.options.stabilization.onlyDynamicEdges===!0&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),this.stabilized===!0?this._emitStabilized():this.startSimulation(),this.ready=!0}_drawForces(e){for(let r=0;r<this.physicsBody.physicsNodeIndices.length;r++){const n=this.physicsBody.physicsNodeIndices[r],i=this.body.nodes[n],s=this.physicsBody.forces[n],o=20,a=.03,l=Math.sqrt(Math.pow(s.x,2)+Math.pow(s.x,2)),u=Math.min(Math.max(5,l),15),d=3*u,h=lR((180-Math.min(1,Math.max(0,a*l))*180)/360,1,1),f={x:i.x+o*s.x,y:i.y+o*s.y};e.lineWidth=u,e.strokeStyle=h,e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(f.x,f.y),e.stroke();const p=Math.atan2(s.y,s.x);e.fillStyle=h,ule.draw(e,{type:"arrow",point:f,angle:p,length:d}),Vm(e).call(e)}}}const Xr=[];for(let t=0;t<256;++t)Xr.push((t+256).toString(16).slice(1));function k4e(t,e=0){return(Xr[t[e+0]]+Xr[t[e+1]]+Xr[t[e+2]]+Xr[t[e+3]]+"-"+Xr[t[e+4]]+Xr[t[e+5]]+"-"+Xr[t[e+6]]+Xr[t[e+7]]+"-"+Xr[t[e+8]]+Xr[t[e+9]]+"-"+Xr[t[e+10]]+Xr[t[e+11]]+Xr[t[e+12]]+Xr[t[e+13]]+Xr[t[e+14]]+Xr[t[e+15]]).toLowerCase()}let Kj;const C4e=new Uint8Array(16);function T4e(){if(!Kj){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Kj=crypto.getRandomValues.bind(crypto)}return Kj(C4e)}const j4e=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var XQ={randomUUID:j4e};function O4e(t,e,r){var i;t=t||{};const n=t.random??((i=t.rng)==null?void 0:i.call(t))??T4e();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,k4e(n)}function Qf(t,e,r){return XQ.randomUUID&&!t?XQ.randomUUID():O4e(t)}class kn{constructor(){}static getRange(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=1e9,i=-1e9,s=1e9,o=-1e9,a;if(r.length>0)for(let l=0;l<r.length;l++)a=e[r[l]],s>a.shape.boundingBox.left&&(s=a.shape.boundingBox.left),o<a.shape.boundingBox.right&&(o=a.shape.boundingBox.right),n>a.shape.boundingBox.top&&(n=a.shape.boundingBox.top),i<a.shape.boundingBox.bottom&&(i=a.shape.boundingBox.bottom);return s===1e9&&o===-1e9&&n===1e9&&i===-1e9&&(n=0,i=0,s=0,o=0),{minX:s,maxX:o,minY:n,maxY:i}}static getRangeCore(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=1e9,i=-1e9,s=1e9,o=-1e9,a;if(r.length>0)for(let l=0;l<r.length;l++)a=e[r[l]],s>a.x&&(s=a.x),o<a.x&&(o=a.x),n>a.y&&(n=a.y),i<a.y&&(i=a.y);return s===1e9&&o===-1e9&&n===1e9&&i===-1e9&&(n=0,i=0,s=0,o=0),{minX:s,maxX:o,minY:n,maxY:i}}static findCenter(e){return{x:.5*(e.maxX+e.minX),y:.5*(e.maxY+e.minY)}}static cloneOptions(e,r){const n={};return r===void 0||r==="node"?(Ot(n,e.options,!0),n.x=e.x,n.y=e.y,n.amountOfConnections=e.edges.length):Ot(n,e.options,!0),n}}class P4e extends Lt{constructor(e,r,n,i,s,o){super(e,r,n,i,s,o),this.isCluster=!0,this.containedNodes={},this.containedEdges={}}_openChildCluster(e){const r=this.body.nodes[e];if(this.containedNodes[e]===void 0)throw new Error("node with id: "+e+" not in current cluster");if(!r.isCluster)throw new Error("node with id: "+e+" is not a cluster");delete this.containedNodes[e],tt(r.edges,n=>{delete this.containedEdges[n.id]}),tt(r.containedNodes,(n,i)=>{this.containedNodes[i]=n}),r.containedNodes={},tt(r.containedEdges,(n,i)=>{this.containedEdges[i]=n}),r.containedEdges={},tt(r.edges,n=>{tt(this.edges,i=>{var s,o;const a=xt(s=i.clusteringEdgeReplacingIds).call(s,n.id);a!==-1&&(tt(n.clusteringEdgeReplacingIds,l=>{i.clusteringEdgeReplacingIds.push(l),this.body.edges[l].edgeReplacedById=i.id}),No(o=i.clusteringEdgeReplacingIds).call(o,a,1))})}),r.edges=[]}}class I4e{constructor(e){this.body=e,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},xr(this.options,this.defaultOptions),this.body.emitter.on("_resetData",()=>{this.clusteredNodes={},this.clusteredEdges={}})}clusterByHubsize(e,r){e===void 0?e=this._getHubSize():typeof e=="object"&&(r=this._checkOptions(e),e=this._getHubSize());const n=[];for(let i=0;i<this.body.nodeIndices.length;i++){const s=this.body.nodes[this.body.nodeIndices[i]];s.edges.length>=e&&n.push(s.id)}for(let i=0;i<n.length;i++)this.clusterByConnection(n[i],r,!0);this.body.emitter.emit("_dataChanged")}cluster(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.joinCondition===void 0)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");e=this._checkOptions(e);const n={},i={};tt(this.body.nodes,(s,o)=>{s.options&&e.joinCondition(s.options)===!0&&(n[o]=s,tt(s.edges,a=>{this.clusteredEdges[a.id]===void 0&&(i[a.id]=a)}))}),this._cluster(n,i,e,r)}clusterByEdgeCount(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;r=this._checkOptions(r);const i=[],s={};let o,a,l;for(let u=0;u<this.body.nodeIndices.length;u++){const d={},h={},f=this.body.nodeIndices[u],p=this.body.nodes[f];if(s[f]===void 0){l=0,a=[];for(let m=0;m<p.edges.length;m++)o=p.edges[m],this.clusteredEdges[o.id]===void 0&&(o.toId!==o.fromId&&l++,a.push(o));if(l===e){const m=function(v){if(r.joinCondition===void 0||r.joinCondition===null)return!0;const y=kn.cloneOptions(v);return r.joinCondition(y)};let g=!0;for(let v=0;v<a.length;v++){o=a[v];const y=this._getConnectedId(o,f);if(m(p))h[o.id]=o,d[f]=p,d[y]=this.body.nodes[y],s[f]=!0;else{g=!1;break}}if(nr(d).length>0&&nr(h).length>0&&g===!0){const y=function(){for(let b=0;b<i.length;++b)for(const w in d)if(i[b].nodes[w]!==void 0)return i[b]}();if(y!==void 0){for(const b in d)y.nodes[b]===void 0&&(y.nodes[b]=d[b]);for(const b in h)y.edges[b]===void 0&&(y.edges[b]=h[b])}else i.push({nodes:d,edges:h})}}}}for(let u=0;u<i.length;u++)this._cluster(i[u].nodes,i[u].edges,r,!1);n===!0&&this.body.emitter.emit("_dataChanged")}clusterOutliers(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(1,e,r)}clusterBridges(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(2,e,r)}clusterByConnection(e,r){var n;let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0)throw new Error("No nodeId supplied to clusterByConnection!");if(this.body.nodes[e]===void 0)throw new Error("The nodeId given to clusterByConnection does not exist!");const s=this.body.nodes[e];r=this._checkOptions(r,s),r.clusterNodeProperties.x===void 0&&(r.clusterNodeProperties.x=s.x),r.clusterNodeProperties.y===void 0&&(r.clusterNodeProperties.y=s.y),r.clusterNodeProperties.fixed===void 0&&(r.clusterNodeProperties.fixed={},r.clusterNodeProperties.fixed.x=s.options.fixed.x,r.clusterNodeProperties.fixed.y=s.options.fixed.y);const o={},a={},l=s.id,u=kn.cloneOptions(s);o[l]=s;for(let h=0;h<s.edges.length;h++){const f=s.edges[h];if(this.clusteredEdges[f.id]===void 0){const p=this._getConnectedId(f,l);if(this.clusteredNodes[p]===void 0)if(p!==l)if(r.joinCondition===void 0)a[f.id]=f,o[p]=this.body.nodes[p];else{const m=kn.cloneOptions(this.body.nodes[p]);r.joinCondition(u,m)===!0&&(a[f.id]=f,o[p]=this.body.nodes[p])}else a[f.id]=f}}const d=th(n=nr(o)).call(n,function(h){return o[h].id});for(const h in o){if(!Object.prototype.hasOwnProperty.call(o,h))continue;const f=o[h];for(let p=0;p<f.edges.length;p++){const m=f.edges[p];xt(d).call(d,this._getConnectedId(m,f.id))>-1&&(a[m.id]=m)}}this._cluster(o,a,r,i)}_createClusterEdges(e,r,n,i){let s,o,a,l,u,d;const h=nr(e),f=[];for(let g=0;g<h.length;g++){o=h[g],a=e[o];for(let v=0;v<a.edges.length;v++)s=a.edges[v],this.clusteredEdges[s.id]===void 0&&(s.toId==s.fromId?r[s.id]=s:s.toId==o?(l=n.id,u=s.fromId,d=u):(l=s.toId,u=n.id,d=l),e[d]===void 0&&f.push({edge:s,fromId:u,toId:l}))}const p=[],m=function(g){for(let v=0;v<p.length;v++){const y=p[v],b=g.fromId===y.fromId&&g.toId===y.toId,w=g.fromId===y.toId&&g.toId===y.fromId;if(b||w)return y}return null};for(let g=0;g<f.length;g++){const v=f[g],y=v.edge;let b=m(v);b===null?(b=this._createClusteredEdge(v.fromId,v.toId,y,i),p.push(b)):b.clusteringEdgeReplacingIds.push(y.id),this.body.edges[y.id].edgeReplacedById=b.id,this._backupEdgeOptions(y),y.setOptions({physics:!1})}}_checkOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.clusterEdgeProperties===void 0&&(e.clusterEdgeProperties={}),e.clusterNodeProperties===void 0&&(e.clusterNodeProperties={}),e}_cluster(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;const s=[];for(const d in e)Object.prototype.hasOwnProperty.call(e,d)&&this.clusteredNodes[d]!==void 0&&s.push(d);for(let d=0;d<s.length;++d)delete e[s[d]];if(nr(e).length==0||nr(e).length==1&&n.clusterNodeProperties.allowSingleNodeCluster!=!0)return;let o=Ot({},n.clusterNodeProperties);if(n.processProperties!==void 0){const d=[];for(const f in e)if(Object.prototype.hasOwnProperty.call(e,f)){const p=kn.cloneOptions(e[f]);d.push(p)}const h=[];for(const f in r)if(Object.prototype.hasOwnProperty.call(r,f)&&f.substr(0,12)!=="clusterEdge:"){const p=kn.cloneOptions(r[f],"edge");h.push(p)}if(o=n.processProperties(o,d,h),!o)throw new Error("The processProperties function does not return properties!")}o.id===void 0&&(o.id="cluster:"+Qf());const a=o.id;o.label===void 0&&(o.label="cluster");let l;o.x===void 0&&(l=this._getClusterPosition(e),o.x=l.x),o.y===void 0&&(l===void 0&&(l=this._getClusterPosition(e)),o.y=l.y),o.id=a;const u=this.body.functions.createNode(o,P4e);u.containedNodes=e,u.containedEdges=r,u.clusterEdgeProperties=n.clusterEdgeProperties,this.body.nodes[o.id]=u,this._clusterEdges(e,r,o,n.clusterEdgeProperties),o.id=void 0,i===!0&&this.body.emitter.emit("_dataChanged")}_backupEdgeOptions(e){this.clusteredEdges[e.id]===void 0&&(this.clusteredEdges[e.id]={physics:e.options.physics})}_restoreEdge(e){const r=this.clusteredEdges[e.id];r!==void 0&&(e.setOptions({physics:r.physics}),delete this.clusteredEdges[e.id])}isCluster(e){return this.body.nodes[e]!==void 0?this.body.nodes[e].isCluster===!0:(console.error("Node does not exist."),!1)}_getClusterPosition(e){const r=nr(e);let n=e[r[0]].x,i=e[r[0]].x,s=e[r[0]].y,o=e[r[0]].y,a;for(let l=1;l<r.length;l++)a=e[r[l]],n=a.x<n?a.x:n,i=a.x>i?a.x:i,s=a.y<s?a.y:s,o=a.y>o?a.y:o;return{x:.5*(n+i),y:.5*(s+o)}}openCluster(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0)throw new Error("No clusterNodeId supplied to openCluster.");const i=this.body.nodes[e];if(i===void 0)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(i.isCluster!==!0||i.containedNodes===void 0||i.containedEdges===void 0)throw new Error("The node:"+e+" is not a valid cluster.");const s=this.findNode(e),o=xt(s).call(s,e)-1;if(o>=0){const d=s[o];this.body.nodes[d]._openChildCluster(e),delete this.body.nodes[e],n===!0&&this.body.emitter.emit("_dataChanged");return}const a=i.containedNodes,l=i.containedEdges;if(r!==void 0&&r.releaseFunction!==void 0&&typeof r.releaseFunction=="function"){const d={},h={x:i.x,y:i.y};for(const p in a)if(Object.prototype.hasOwnProperty.call(a,p)){const m=this.body.nodes[p];d[p]={x:m.x,y:m.y}}const f=r.releaseFunction(h,d);for(const p in a)if(Object.prototype.hasOwnProperty.call(a,p)){const m=this.body.nodes[p];f[p]!==void 0&&(m.x=f[p].x===void 0?i.x:f[p].x,m.y=f[p].y===void 0?i.y:f[p].y)}}else tt(a,function(d){d.options.fixed.x===!1&&(d.x=i.x),d.options.fixed.y===!1&&(d.y=i.y)});for(const d in a)if(Object.prototype.hasOwnProperty.call(a,d)){const h=this.body.nodes[d];h.vx=i.vx,h.vy=i.vy,h.setOptions({physics:!0}),delete this.clusteredNodes[d]}const u=[];for(let d=0;d<i.edges.length;d++)u.push(i.edges[d]);for(let d=0;d<u.length;d++){const h=u[d],f=this._getConnectedId(h,e),p=this.clusteredNodes[f];for(let m=0;m<h.clusteringEdgeReplacingIds.length;m++){const g=h.clusteringEdgeReplacingIds[m],v=this.body.edges[g];if(v!==void 0)if(p!==void 0){const y=this.body.nodes[p.clusterId];y.containedEdges[v.id]=v,delete l[v.id];let b=v.fromId,w=v.toId;v.toId==f?w=p.clusterId:b=p.clusterId,this._createClusteredEdge(b,w,v,y.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(v)}h.remove()}for(const d in l)Object.prototype.hasOwnProperty.call(l,d)&&this._restoreEdge(l[d]);delete this.body.nodes[e],n===!0&&this.body.emitter.emit("_dataChanged")}getNodesInCluster(e){const r=[];if(this.isCluster(e)===!0){const n=this.body.nodes[e].containedNodes;for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&r.push(this.body.nodes[i].id)}return r}findNode(e){const r=[];let i=0,s;for(;this.clusteredNodes[e]!==void 0&&i<100;){if(s=this.body.nodes[e],s===void 0)return[];r.push(s.id),e=this.clusteredNodes[e].clusterId,i++}return s=this.body.nodes[e],s===void 0?[]:(r.push(s.id),gc(r).call(r),r)}updateClusteredNode(e,r){if(e===void 0)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(r===void 0)throw new Error("No newOptions supplied to updateClusteredNode.");if(this.body.nodes[e]===void 0)throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[e].setOptions(r),this.body.emitter.emit("_dataChanged")}updateEdge(e,r){if(e===void 0)throw new Error("No startEdgeId supplied to updateEdge.");if(r===void 0)throw new Error("No newOptions supplied to updateEdge.");if(this.body.edges[e]===void 0)throw new Error("The startEdgeId supplied to updateEdge does not exist.");const n=this.getClusteredEdges(e);for(let i=0;i<n.length;i++)this.body.edges[n[i]].setOptions(r);this.body.emitter.emit("_dataChanged")}getClusteredEdges(e){const r=[];let i=0;for(;e!==void 0&&this.body.edges[e]!==void 0&&i<100;)r.push(this.body.edges[e].id),e=this.body.edges[e].edgeReplacedById,i++;return gc(r).call(r),r}getBaseEdge(e){return this.getBaseEdges(e)[0]}getBaseEdges(e){const r=[e],n=[],i=[],s=100;let o=0;for(;r.length>0&&o<s;){const a=r.pop();if(a===void 0)continue;const l=this.body.edges[a];if(l===void 0)continue;o++;const u=l.clusteringEdgeReplacingIds;if(u===void 0)i.push(a);else for(let d=0;d<u.length;++d){const h=u[d];xt(r).call(r,u)!==-1||xt(n).call(n,u)!==-1||r.push(h)}n.push(a)}return i}_getConnectedId(e,r){return e.toId!=r?e.toId:(e.fromId!=r,e.fromId)}_getHubSize(){let e=0,r=0,n=0,i=0;for(let l=0;l<this.body.nodeIndices.length;l++){const u=this.body.nodes[this.body.nodeIndices[l]];u.edges.length>i&&(i=u.edges.length),e+=u.edges.length,r+=Math.pow(u.edges.length,2),n+=1}e=e/n,r=r/n;const s=r-Math.pow(e,2),o=Math.sqrt(s);let a=Math.floor(e+2*o);return a>i&&(a=i),a}_createClusteredEdge(e,r,n,i,s){const o=kn.cloneOptions(n,"edge");Ot(o,i),o.from=e,o.to=r,o.id="clusterEdge:"+Qf(),s!==void 0&&Ot(o,s);const a=this.body.functions.createEdge(o);return a.clusteringEdgeReplacingIds=[n.id],a.connect(),this.body.edges[a.id]=a,a}_clusterEdges(e,r,n,i){if(r instanceof el){const s=r,o={};o[s.id]=s,r=o}if(e instanceof Lt){const s=e,o={};o[s.id]=s,e=o}if(n==null)throw new Error("_clusterEdges: parameter clusterNode required");i===void 0&&(i=n.clusterEdgeProperties),this._createClusterEdges(e,r,n,i);for(const s in r)if(Object.prototype.hasOwnProperty.call(r,s)&&this.body.edges[s]!==void 0){const o=this.body.edges[s];this._backupEdgeOptions(o),o.setOptions({physics:!1})}for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(this.clusteredNodes[s]={clusterId:n.id,node:this.body.nodes[s]},this.body.nodes[s].setOptions({physics:!1}))}_getClusterNodeForNode(e){if(e===void 0)return;const r=this.clusteredNodes[e];if(r===void 0)return;const n=r.clusterId;if(n!==void 0)return this.body.nodes[n]}_filter(e,r){const n=[];return tt(e,i=>{r(i)&&n.push(i)}),n}_updateState(){let e;const r=[],n={},i=l=>{tt(this.body.nodes,u=>{u.isCluster===!0&&l(u)})};for(e in this.clusteredNodes){if(!Object.prototype.hasOwnProperty.call(this.clusteredNodes,e))continue;this.body.nodes[e]===void 0&&r.push(e)}i(function(l){for(let u=0;u<r.length;u++)delete l.containedNodes[r[u]]});for(let l=0;l<r.length;l++)delete this.clusteredNodes[r[l]];tt(this.clusteredEdges,l=>{const u=this.body.edges[l];(u===void 0||!u.endPointsValid())&&(n[l]=l)}),i(function(l){tt(l.containedEdges,(u,d)=>{!u.endPointsValid()&&!n[d]&&(n[d]=d)})}),tt(this.body.edges,(l,u)=>{let d=!0;const h=l.clusteringEdgeReplacingIds;if(h!==void 0){let f=0;tt(h,p=>{const m=this.body.edges[p];m!==void 0&&m.endPointsValid()&&(f+=1)}),d=f>0}(!l.endPointsValid()||!d)&&(n[u]=u)}),i(l=>{tt(n,u=>{delete l.containedEdges[u],tt(l.edges,(d,h)=>{if(d.id===u){l.edges[h]=null;return}d.clusteringEdgeReplacingIds=this._filter(d.clusteringEdgeReplacingIds,function(f){return!n[f]})}),l.edges=this._filter(l.edges,function(d){return d!==null})})}),tt(n,l=>{delete this.clusteredEdges[l]}),tt(n,l=>{delete this.body.edges[l]});const s=nr(this.body.edges);tt(s,l=>{const u=this.body.edges[l],d=this._isClusteredNode(u.fromId)||this._isClusteredNode(u.toId);if(d!==this._isClusteredEdge(u.id))if(d){const h=this._getClusterNodeForNode(u.fromId);h!==void 0&&this._clusterEdges(this.body.nodes[u.fromId],u,h);const f=this._getClusterNodeForNode(u.toId);f!==void 0&&this._clusterEdges(this.body.nodes[u.toId],u,f)}else delete this._clusterEdges[l],this._restoreEdge(u)});let o=!1,a=!0;for(;a;){const l=[];i(function(u){const d=nr(u.containedNodes).length,h=u.options.allowSingleNodeCluster===!0;(h&&d<1||!h&&d<2)&&l.push(u.id)});for(let u=0;u<l.length;++u)this.openCluster(l[u],{},!1);a=l.length>0,o=o||a}o&&this._updateState()}_isClusteredNode(e){return this.clusteredNodes[e]!==void 0}_isClusteredEdge(e){return this.clusteredEdges[e]!==void 0}}class R4e{constructor(e,r){this.body=e,this.canvas=r,this.redrawRequested=!1,this.requestAnimationFrameRequestId=void 0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},xr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e;this.body.emitter.on("dragStart",()=>{this.dragging=!0}),this.body.emitter.on("dragEnd",()=>{this.dragging=!1}),this.body.emitter.on("zoom",()=>{this.zooming=!0,window.clearTimeout(this.zoomTimeoutId),this.zoomTimeoutId=ko(()=>{var r;this.zooming=!1,se(r=this._requestRedraw).call(r,this)()},250)}),this.body.emitter.on("_resizeNodes",()=>{this._resizeNodes()}),this.body.emitter.on("_redraw",()=>{this.renderingActive===!1&&this._redraw()}),this.body.emitter.on("_blockRedraw",()=>{this.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",()=>{this.allowRedraw=!0,this.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",se(e=this._requestRedraw).call(e,this)),this.body.emitter.on("_startRendering",()=>{this.renderRequests+=1,this.renderingActive=!0,this._startRendering()}),this.body.emitter.on("_stopRendering",()=>{this.renderRequests-=1,this.renderingActive=this.renderRequests>0,this.requestAnimationFrameRequestId=void 0}),this.body.emitter.on("destroy",()=>{this.renderRequests=0,this.allowRedraw=!1,this.renderingActive=!1,window.cancelAnimationFrame(this.requestAnimationFrameRequestId),this.body.emitter.off()})}setOptions(e){e!==void 0&&Vh(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"],this.options,e)}_startRendering(){if(this.renderingActive===!0&&this.requestAnimationFrameRequestId===void 0){var e;this.requestAnimationFrameRequestId=window.requestAnimationFrame(se(e=this._renderStep).call(e,this),this.simulationInterval)}}_renderStep(){this.renderingActive===!0&&(this.requestAnimationFrameRequestId=void 0,this._startRendering(),this._redraw())}redraw(){this.body.emitter.emit("setSize"),this._redraw()}_requestRedraw(){this.redrawRequested!==!0&&this.renderingActive===!1&&this.allowRedraw===!0&&(this.redrawRequested=!0,window.requestAnimationFrame(()=>{this._redraw(!1)}))}_redraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.allowRedraw===!0){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;const r={drawExternalLabels:null};(this.canvas.frame.canvas.width===0||this.canvas.frame.canvas.height===0)&&this.canvas.setSize(),this.canvas.setTransform();const n=this.canvas.getContext(),i=this.canvas.frame.canvas.clientWidth,s=this.canvas.frame.canvas.clientHeight;if(n.clearRect(0,0,i,s),this.canvas.frame.clientWidth===0)return;if(n.save(),n.translate(this.body.view.translation.x,this.body.view.translation.y),n.scale(this.body.view.scale,this.body.view.scale),n.beginPath(),this.body.emitter.emit("beforeDrawing",n),n.closePath(),e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawEdges(n),this.dragging===!1||this.dragging===!0&&this.options.hideNodesOnDrag===!1){const{drawExternalLabels:o}=this._drawNodes(n,e);r.drawExternalLabels=o}e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawArrows(n),r.drawExternalLabels!=null&&r.drawExternalLabels(),e===!1&&this._drawSelectionBox(n),n.beginPath(),this.body.emitter.emit("afterDrawing",n),n.closePath(),n.restore(),e===!0&&n.clearRect(0,0,i,s)}}_resizeNodes(){this.canvas.setTransform();const e=this.canvas.getContext();e.save(),e.translate(this.body.view.translation.x,this.body.view.translation.y),e.scale(this.body.view.scale,this.body.view.scale);const r=this.body.nodes;let n;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n=r[i],n.resize(e),n.updateBoundingBox(e,n.selected));e.restore()}_drawNodes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.nodes,i=this.body.nodeIndices;let s;const o=[],a=[],l=20,u=this.canvas.DOMtoCanvas({x:-l,y:-l}),d=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+l,y:this.canvas.frame.canvas.clientHeight+l}),h={top:u.y,left:u.x,bottom:d.y,right:d.x},f=[];for(let v=0;v<i.length;v++)if(s=n[i[v]],s.hover)a.push(i[v]);else if(s.isSelected())o.push(i[v]);else if(r===!0){const y=s.draw(e);y.drawExternalLabel!=null&&f.push(y.drawExternalLabel)}else if(s.isBoundingBoxOverlappingWith(h)===!0){const y=s.draw(e);y.drawExternalLabel!=null&&f.push(y.drawExternalLabel)}else s.updateBoundingBox(e,s.selected);let p;const m=o.length,g=a.length;for(p=0;p<m;p++){s=n[o[p]];const v=s.draw(e);v.drawExternalLabel!=null&&f.push(v.drawExternalLabel)}for(p=0;p<g;p++){s=n[a[p]];const v=s.draw(e);v.drawExternalLabel!=null&&f.push(v.drawExternalLabel)}return{drawExternalLabels:()=>{for(const v of f)v()}}}_drawEdges(e){const r=this.body.edges,n=this.body.edgeIndices;for(let i=0;i<n.length;i++){const s=r[n[i]];s.connected===!0&&s.draw(e)}}_drawArrows(e){const r=this.body.edges,n=this.body.edgeIndices;for(let i=0;i<n.length;i++){const s=r[n[i]];s.connected===!0&&s.drawArrows(e)}}_drawSelectionBox(e){if(this.body.selectionBox.show){e.beginPath();const r=this.body.selectionBox.position.end.x-this.body.selectionBox.position.start.x,n=this.body.selectionBox.position.end.y-this.body.selectionBox.position.start.y;e.rect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,r,n),e.fillStyle="rgba(151, 194, 252, 0.2)",e.fillRect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,r,n),e.strokeStyle="rgba(151, 194, 252, 1)",e.stroke()}else e.closePath()}}var Gj,JQ;function M4e(){if(JQ)return Gj;JQ=1,yae();var t=_t();return Gj=t.setInterval,Gj}var Yj,ZQ;function A4e(){return ZQ||(ZQ=1,Yj=M4e()),Yj}var D4e=A4e(),$4e=Ve(D4e);function c0(t,e){e.inputHandler=function(r){r.isFirst&&e(r)},t.on("hammer.input",e.inputHandler)}function fle(t,e){return e.inputHandler=function(r){r.isFinal&&e(r)},t.on("hammer.input",e.inputHandler)}class F4e{constructor(e){this.body=e,this.pixelRatio=1,this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this._cleanupCallbacks=[],this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},xr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e;this.body.emitter.once("resize",r=>{r.width!==0&&(this.body.view.translation.x=r.width*.5),r.height!==0&&(this.body.view.translation.y=r.height*.5)}),this.body.emitter.on("setSize",se(e=this.setSize).call(e,this)),this.body.emitter.on("destroy",()=>{this.hammerFrame.destroy(),this.hammer.destroy(),this._cleanUp()})}setOptions(e){if(e!==void 0&&Vh(["width","height","autoResize"],this.options,e),this._cleanUp(),this.options.autoResize===!0){var r;if(window.ResizeObserver){const i=new ResizeObserver(()=>{this.setSize()===!0&&this.body.emitter.emit("_requestRedraw")}),{frame:s}=this;i.observe(s),this._cleanupCallbacks.push(()=>{i.unobserve(s)})}else{const i=$4e(()=>{this.setSize()===!0&&this.body.emitter.emit("_requestRedraw")},1e3);this._cleanupCallbacks.push(()=>{clearInterval(i)})}const n=se(r=this._onResize).call(r,this);window.addEventListener("resize",n),this._cleanupCallbacks.push(()=>{window.removeEventListener("resize",n)})}}_cleanUp(){var e,r,n;kt(e=gc(r=No(n=this._cleanupCallbacks).call(n,0)).call(r)).call(e,i=>{try{i()}catch(s){console.error(s)}})}_onResize(){this.setSize(),this.body.emitter.emit("_redraw")}_getCameraState(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.pixelRatio;this.initialized===!0&&(this.cameraState.previousWidth=this.frame.canvas.width/e,this.cameraState.previousHeight=this.frame.canvas.height/e,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/e,y:.5*this.frame.canvas.height/e}))}_setCameraState(){if(this.cameraState.scale!==void 0&&this.frame.canvas.clientWidth!==0&&this.frame.canvas.clientHeight!==0&&this.pixelRatio!==0&&this.cameraState.previousWidth>0&&this.cameraState.previousHeight>0){const e=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,r=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight;let n=this.cameraState.scale;e!=1&&r!=1?n=this.cameraState.scale*.5*(e+r):e!=1?n=this.cameraState.scale*e:r!=1&&(n=this.cameraState.scale*r),this.body.view.scale=n;const i=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),s={x:i.x-this.cameraState.position.x,y:i.y-this.cameraState.position.y};this.body.view.translation.x+=s.x*this.body.view.scale,this.body.view.translation.y+=s.y*this.body.view.scale}}_prepareValue(e){if(typeof e=="number")return e+"px";if(typeof e=="string"){if(xt(e).call(e,"%")!==-1||xt(e).call(e,"px")!==-1)return e;if(xt(e).call(e,"%")===-1)return e+"px"}throw new Error("Could not use the value supplied for width or height:"+e)}_create(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=0,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{const e=document.createElement("DIV");e.style.color="red",e.style.fontWeight="bold",e.style.padding="10px",e.innerText="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(e)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}_bindHammer(){this.hammer!==void 0&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new pd(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:pd.DIRECTION_ALL}),c0(this.hammer,e=>{this.body.eventListeners.onTouch(e)}),this.hammer.on("tap",e=>{this.body.eventListeners.onTap(e)}),this.hammer.on("doubletap",e=>{this.body.eventListeners.onDoubleTap(e)}),this.hammer.on("press",e=>{this.body.eventListeners.onHold(e)}),this.hammer.on("panstart",e=>{this.body.eventListeners.onDragStart(e)}),this.hammer.on("panmove",e=>{this.body.eventListeners.onDrag(e)}),this.hammer.on("panend",e=>{this.body.eventListeners.onDragEnd(e)}),this.hammer.on("pinch",e=>{this.body.eventListeners.onPinch(e)}),this.frame.canvas.addEventListener("wheel",e=>{this.body.eventListeners.onMouseWheel(e)}),this.frame.canvas.addEventListener("mousemove",e=>{this.body.eventListeners.onMouseMove(e)}),this.frame.canvas.addEventListener("contextmenu",e=>{this.body.eventListeners.onContext(e)}),this.hammerFrame=new pd(this.frame),fle(this.hammerFrame,e=>{this.body.eventListeners.onRelease(e)})}setSize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.width,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.height;e=this._prepareValue(e),r=this._prepareValue(r);let n=!1;const i=this.frame.canvas.width,s=this.frame.canvas.height,o=this.pixelRatio;if(this._setPixelRatio(),e!=this.options.width||r!=this.options.height||this.frame.style.width!=e||this.frame.style.height!=r)this._getCameraState(o),this.frame.style.width=e,this.frame.style.height=r,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=e,this.options.height=r,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},n=!0;else{const a=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),l=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);(this.frame.canvas.width!==a||this.frame.canvas.height!==l)&&this._getCameraState(o),this.frame.canvas.width!==a&&(this.frame.canvas.width=a,n=!0),this.frame.canvas.height!==l&&(this.frame.canvas.height=l,n=!0)}return n===!0&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(i/this.pixelRatio),oldHeight:Math.round(s/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,n}getContext(){return this.frame.canvas.getContext("2d")}_determinePixelRatio(){const e=this.getContext();if(e===void 0)throw new Error("Could not get canvax context");let r=1;typeof window<"u"&&(r=window.devicePixelRatio||1);const n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return r/n}_setPixelRatio(){this.pixelRatio=this._determinePixelRatio()}setTransform(){const e=this.getContext();if(e===void 0)throw new Error("Could not get canvax context");e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}_XconvertDOMtoCanvas(e){return(e-this.body.view.translation.x)/this.body.view.scale}_XconvertCanvasToDOM(e){return e*this.body.view.scale+this.body.view.translation.x}_YconvertDOMtoCanvas(e){return(e-this.body.view.translation.y)/this.body.view.scale}_YconvertCanvasToDOM(e){return e*this.body.view.scale+this.body.view.translation.y}canvasToDOM(e){return{x:this._XconvertCanvasToDOM(e.x),y:this._YconvertCanvasToDOM(e.y)}}DOMtoCanvas(e){return{x:this._XconvertDOMtoCanvas(e.x),y:this._YconvertDOMtoCanvas(e.y)}}}function q4e(t,e){const r=xr({nodes:e,minZoomLevel:Number.MIN_VALUE,maxZoomLevel:1},t??{});if(!ar(r.nodes))throw new TypeError("Nodes has to be an array of ids.");if(r.nodes.length===0&&(r.nodes=e),!(typeof r.minZoomLevel=="number"&&r.minZoomLevel>0))throw new TypeError("Min zoom level has to be a number higher than zero.");if(!(typeof r.maxZoomLevel=="number"&&r.minZoomLevel<=r.maxZoomLevel))throw new TypeError("Max zoom level has to be a number higher than min zoom level.");return r}class L4e{constructor(e,r){var n,i;this.body=e,this.canvas=r,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",se(n=this.fit).call(n,this)),this.body.emitter.on("animationFinished",()=>{this.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",se(i=this.releaseNode).call(i,this))}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.options=e}fit(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;e=q4e(e,this.body.nodeIndices);const n=this.canvas.frame.canvas.clientWidth,i=this.canvas.frame.canvas.clientHeight;let s,o;if(n===0||i===0)o=1,s=kn.getRange(this.body.nodes,e.nodes);else if(r===!0){let u=0;for(const f in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,f)&&this.body.nodes[f].predefinedPosition===!0&&(u+=1);if(u>.5*this.body.nodeIndices.length){this.fit(e,!1);return}s=kn.getRange(this.body.nodes,e.nodes),o=12.662/(this.body.nodeIndices.length+7.4147)+.0964822;const h=Math.min(n/600,i/600);o*=h}else{this.body.emitter.emit("_resizeNodes"),s=kn.getRange(this.body.nodes,e.nodes);const u=Math.abs(s.maxX-s.minX)*1.1,d=Math.abs(s.maxY-s.minY)*1.1,h=n/u,f=i/d;o=h<=f?h:f}o>e.maxZoomLevel?o=e.maxZoomLevel:o<e.minZoomLevel&&(o=e.minZoomLevel);const l={position:kn.findCenter(s),scale:o,animation:e.animation};this.moveTo(l)}focus(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.body.nodes[e]!==void 0){const n={x:this.body.nodes[e].x,y:this.body.nodes[e].y};r.position=n,r.lockedOnNode=e,this.moveTo(r)}else console.error("Node: "+e+" cannot be found.")}moveTo(e){if(e===void 0){e={};return}if(e.offset!=null){if(e.offset.x!=null){if(e.offset.x=+e.offset.x,!Ql(e.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.')}else e.offset.x=0;if(e.offset.y!=null){if(e.offset.y=+e.offset.y,!Ql(e.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else e.offset.x=0}else e.offset={x:0,y:0};if(e.position!=null){if(e.position.x!=null){if(e.position.x=+e.position.x,!Ql(e.position.x))throw new TypeError('The option "position.x" has to be a finite number.')}else e.position.x=0;if(e.position.y!=null){if(e.position.y=+e.position.y,!Ql(e.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else e.position.x=0}else e.position=this.getViewPosition();if(e.scale!=null){if(e.scale=+e.scale,!(e.scale>0))throw new TypeError('The option "scale" has to be a number greater than zero.')}else e.scale=this.body.view.scale;e.animation===void 0&&(e.animation={duration:0}),e.animation===!1&&(e.animation={duration:0}),e.animation===!0&&(e.animation={}),e.animation.duration===void 0&&(e.animation.duration=1e3),e.animation.easingFunction===void 0&&(e.animation.easingFunction="easeInOutQuad"),this.animateView(e)}animateView(e){if(e===void 0)return;this.animationEasingFunction=e.animation.easingFunction,this.releaseNode(),e.locked===!0&&(this.lockedOnNodeId=e.lockedOnNode,this.lockedOnNodeOffset=e.offset),this.easingTime!=0&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=e.scale,this.body.view.scale=this.targetScale;const r=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n={x:r.x-e.position.x,y:r.y-e.position.y};if(this.targetTranslation={x:this.sourceTranslation.x+n.x*this.targetScale+e.offset.x,y:this.sourceTranslation.y+n.y*this.targetScale+e.offset.y},e.animation.duration===0)if(this.lockedOnNodeId!=null){var i;this.viewFunction=se(i=this._lockedRedraw).call(i,this),this.body.emitter.on("initRedraw",this.viewFunction)}else this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw");else{var s;this.animationSpeed=1/(60*e.animation.duration*.001)||1/60,this.animationEasingFunction=e.animation.easingFunction,this.viewFunction=se(s=this._transitionRedraw).call(s,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}_lockedRedraw(){const e={x:this.body.nodes[this.lockedOnNodeId].x,y:this.body.nodes[this.lockedOnNodeId].y},r=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n={x:r.x-e.x,y:r.y-e.y},i=this.body.view.translation,s={x:i.x+n.x*this.body.view.scale+this.lockedOnNodeOffset.x,y:i.y+n.y*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=s}releaseNode(){this.lockedOnNodeId!==void 0&&this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}_transitionRedraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.easingTime+=this.animationSpeed,this.easingTime=e===!0?1:this.easingTime;const r=GMe[this.animationEasingFunction](this.easingTime);if(this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*r,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*r,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*r},this.easingTime>=1){if(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,this.lockedOnNodeId!=null){var n;this.viewFunction=se(n=this._lockedRedraw).call(n,this),this.body.emitter.on("initRedraw",this.viewFunction)}this.body.emitter.emit("animationFinished")}}getScale(){return this.body.view.scale}getViewPosition(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}function eX(t){var e=t&&t.preventDefault||!1,r=t&&t.container||window,n={},i={keydown:{},keyup:{}},s={},o;for(o=97;o<=122;o++)s[String.fromCharCode(o)]={code:65+(o-97),shift:!1};for(o=65;o<=90;o++)s[String.fromCharCode(o)]={code:o,shift:!0};for(o=0;o<=9;o++)s[""+o]={code:48+o,shift:!1};for(o=1;o<=12;o++)s["F"+o]={code:111+o,shift:!1};for(o=0;o<=9;o++)s["num"+o]={code:96+o,shift:!1};s["num*"]={code:106,shift:!1},s["num+"]={code:107,shift:!1},s["num-"]={code:109,shift:!1},s["num/"]={code:111,shift:!1},s["num."]={code:110,shift:!1},s.left={code:37,shift:!1},s.up={code:38,shift:!1},s.right={code:39,shift:!1},s.down={code:40,shift:!1},s.space={code:32,shift:!1},s.enter={code:13,shift:!1},s.shift={code:16,shift:void 0},s.esc={code:27,shift:!1},s.backspace={code:8,shift:!1},s.tab={code:9,shift:!1},s.ctrl={code:17,shift:!1},s.alt={code:18,shift:!1},s.delete={code:46,shift:!1},s.pageup={code:33,shift:!1},s.pagedown={code:34,shift:!1},s["="]={code:187,shift:!1},s["-"]={code:189,shift:!1},s["]"]={code:221,shift:!1},s["["]={code:219,shift:!1};var a=function(d){u(d,"keydown")},l=function(d){u(d,"keyup")},u=function(d,h){if(i[h][d.keyCode]!==void 0){for(var f=i[h][d.keyCode],p=0;p<f.length;p++)(f[p].shift===void 0||f[p].shift==!0&&d.shiftKey==!0||f[p].shift==!1&&d.shiftKey==!1)&&f[p].fn(d);e==!0&&d.preventDefault()}};return n.bind=function(d,h,f){if(f===void 0&&(f="keydown"),s[d]===void 0)throw new Error("unsupported key: "+d);i[f][s[d].code]===void 0&&(i[f][s[d].code]=[]),i[f][s[d].code].push({fn:h,shift:s[d].shift})},n.bindAll=function(d,h){h===void 0&&(h="keydown");for(var f in s)s.hasOwnProperty(f)&&n.bind(f,d,h)},n.getKey=function(d){for(var h in s)if(s.hasOwnProperty(h)){if(d.shiftKey==!0&&s[h].shift==!0&&d.keyCode==s[h].code)return h;if(d.shiftKey==!1&&s[h].shift==!1&&d.keyCode==s[h].code)return h;if(d.keyCode==s[h].code&&h=="shift")return h}return"unknown key, currently not supported"},n.unbind=function(d,h,f){if(f===void 0&&(f="keydown"),s[d]===void 0)throw new Error("unsupported key: "+d);if(h!==void 0){var p=[],m=i[f][s[d].code];if(m!==void 0)for(var g=0;g<m.length;g++)m[g].fn==h&&m[g].shift==s[d].shift||p.push(i[f][s[d].code][g]);i[f][s[d].code]=p}else i[f][s[d].code]=[]},n.reset=function(){i={keydown:{},keyup:{}}},n.destroy=function(){i={keydown:{},keyup:{}},r.removeEventListener("keydown",a,!0),r.removeEventListener("keyup",l,!0)},r.addEventListener("keydown",a,!0),r.addEventListener("keyup",l,!0),n}class B4e{constructor(e,r){this.body=e,this.canvas=r,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",()=>{this.activated=!0,this.configureKeyboardBindings()}),this.body.emitter.on("deactivate",()=>{this.activated=!1,this.configureKeyboardBindings()}),this.body.emitter.on("destroy",()=>{this.keycharm!==void 0&&this.keycharm.destroy()}),this.options={}}setOptions(e){e!==void 0&&(this.options=e,this.create())}create(){this.options.navigationButtons===!0?this.iconsCreated===!1&&this.loadNavigationElements():this.iconsCreated===!0&&this.cleanNavigation(),this.configureKeyboardBindings()}cleanNavigation(){if(this.navigationHammers.length!=0){for(let e=0;e<this.navigationHammers.length;e++)this.navigationHammers[e].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}loadNavigationElements(){this.cleanNavigation(),this.navigationDOM={};const e=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],r=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(let o=0;o<e.length;o++){this.navigationDOM[e[o]]=document.createElement("div"),this.navigationDOM[e[o]].className="vis-button vis-"+e[o],this.navigationDOM.wrapper.appendChild(this.navigationDOM[e[o]]);const a=new pd(this.navigationDOM[e[o]]);if(r[o]==="_fit"){var n;c0(a,se(n=this._fit).call(n,this))}else{var i;c0(a,se(i=this.bindToRedraw).call(i,this,r[o]))}this.navigationHammers.push(a)}const s=new pd(this.canvas.frame);fle(s,()=>{this._stopMovement()}),this.navigationHammers.push(s),this.iconsCreated=!0}bindToRedraw(e){if(this.boundFunctions[e]===void 0){var r;this.boundFunctions[e]=se(r=this[e]).call(r,this),this.body.emitter.on("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_startRendering")}}unbindFromRedraw(e){this.boundFunctions[e]!==void 0&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[e])}_fit(){new Date().valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=new Date().valueOf())}_stopMovement(){for(const e in this.boundFunctions)Object.prototype.hasOwnProperty.call(this.boundFunctions,e)&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}_moveUp(){this.body.view.translation.y+=this.options.keyboard.speed.y}_moveDown(){this.body.view.translation.y-=this.options.keyboard.speed.y}_moveLeft(){this.body.view.translation.x+=this.options.keyboard.speed.x}_moveRight(){this.body.view.translation.x-=this.options.keyboard.speed.x}_zoomIn(){const e=this.body.view.scale,r=this.body.view.scale*(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=r/e,s=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,o=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=r,this.body.view.translation={x:s,y:o},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}_zoomOut(){const e=this.body.view.scale,r=this.body.view.scale/(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=r/e,s=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,o=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=r,this.body.view.translation={x:s,y:o},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}configureKeyboardBindings(){if(this.keycharm!==void 0&&this.keycharm.destroy(),this.options.keyboard.enabled===!0&&(this.options.keyboard.bindToWindow===!0?this.keycharm=eX({container:window,preventDefault:!0}):this.keycharm=eX({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),this.activated===!0)){var e,r,n,i,s,o,a,l,u,d,h,f,p,m,g,v,y,b,w,x,S,_,E,N;se(e=this.keycharm).call(e,"up",()=>{this.bindToRedraw("_moveUp")},"keydown"),se(r=this.keycharm).call(r,"down",()=>{this.bindToRedraw("_moveDown")},"keydown"),se(n=this.keycharm).call(n,"left",()=>{this.bindToRedraw("_moveLeft")},"keydown"),se(i=this.keycharm).call(i,"right",()=>{this.bindToRedraw("_moveRight")},"keydown"),se(s=this.keycharm).call(s,"=",()=>{this.bindToRedraw("_zoomIn")},"keydown"),se(o=this.keycharm).call(o,"num+",()=>{this.bindToRedraw("_zoomIn")},"keydown"),se(a=this.keycharm).call(a,"num-",()=>{this.bindToRedraw("_zoomOut")},"keydown"),se(l=this.keycharm).call(l,"-",()=>{this.bindToRedraw("_zoomOut")},"keydown"),se(u=this.keycharm).call(u,"[",()=>{this.bindToRedraw("_zoomOut")},"keydown"),se(d=this.keycharm).call(d,"]",()=>{this.bindToRedraw("_zoomIn")},"keydown"),se(h=this.keycharm).call(h,"pageup",()=>{this.bindToRedraw("_zoomIn")},"keydown"),se(f=this.keycharm).call(f,"pagedown",()=>{this.bindToRedraw("_zoomOut")},"keydown"),se(p=this.keycharm).call(p,"up",()=>{this.unbindFromRedraw("_moveUp")},"keyup"),se(m=this.keycharm).call(m,"down",()=>{this.unbindFromRedraw("_moveDown")},"keyup"),se(g=this.keycharm).call(g,"left",()=>{this.unbindFromRedraw("_moveLeft")},"keyup"),se(v=this.keycharm).call(v,"right",()=>{this.unbindFromRedraw("_moveRight")},"keyup"),se(y=this.keycharm).call(y,"=",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),se(b=this.keycharm).call(b,"num+",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),se(w=this.keycharm).call(w,"num-",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),se(x=this.keycharm).call(x,"-",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),se(S=this.keycharm).call(S,"[",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),se(_=this.keycharm).call(_,"]",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),se(E=this.keycharm).call(E,"pageup",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),se(N=this.keycharm).call(N,"pagedown",()=>{this.unbindFromRedraw("_zoomOut")},"keyup")}}}class z4e{constructor(e,r,n){var i,s,o,a,l,u,d,h,f,p,m,g,v;this.body=e,this.canvas=r,this.selectionHandler=n,this.navigationHandler=new B4e(e,r),this.body.eventListeners.onTap=se(i=this.onTap).call(i,this),this.body.eventListeners.onTouch=se(s=this.onTouch).call(s,this),this.body.eventListeners.onDoubleTap=se(o=this.onDoubleTap).call(o,this),this.body.eventListeners.onHold=se(a=this.onHold).call(a,this),this.body.eventListeners.onDragStart=se(l=this.onDragStart).call(l,this),this.body.eventListeners.onDrag=se(u=this.onDrag).call(u,this),this.body.eventListeners.onDragEnd=se(d=this.onDragEnd).call(d,this),this.body.eventListeners.onMouseWheel=se(h=this.onMouseWheel).call(h,this),this.body.eventListeners.onPinch=se(f=this.onPinch).call(f,this),this.body.eventListeners.onMouseMove=se(p=this.onMouseMove).call(p,this),this.body.eventListeners.onRelease=se(m=this.onRelease).call(m,this),this.body.eventListeners.onContext=se(g=this.onContext).call(g,this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=se(v=this.getPointer).call(v,this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0,autoFocus:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},xr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("destroy",()=>{clearTimeout(this.popupTimer),delete this.body.functions.getPointer})}setOptions(e){e!==void 0&&(o0(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"],this.options,e),Mi(this.options,e,"keyboard"),e.tooltip&&(xr(this.options.tooltip,e.tooltip),e.tooltip.color&&(this.options.tooltip.color=aR(e.tooltip.color)))),this.navigationHandler.setOptions(this.options)}getPointer(e){return{x:e.x-WMe(this.canvas.frame.canvas),y:e.y-UMe(this.canvas.frame.canvas)}}onTouch(e){new Date().valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(e.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=new Date().valueOf())}onTap(e){const r=this.getPointer(e.center),n=this.selectionHandler.options.multiselect&&(e.changedPointers[0].ctrlKey||e.changedPointers[0].metaKey);this.checkSelectionChanges(r,n),this.selectionHandler.commitAndEmit(r,e),this.selectionHandler.generateClickEvent("click",e,r)}onDoubleTap(e){const r=this.getPointer(e.center);this.selectionHandler.generateClickEvent("doubleClick",e,r)}onHold(e){const r=this.getPointer(e.center),n=this.selectionHandler.options.multiselect;this.checkSelectionChanges(r,n),this.selectionHandler.commitAndEmit(r,e),this.selectionHandler.generateClickEvent("click",e,r),this.selectionHandler.generateClickEvent("hold",e,r)}onRelease(e){if(new Date().valueOf()-this.touchTime>10){const r=this.getPointer(e.center);this.selectionHandler.generateClickEvent("release",e,r),this.touchTime=new Date().valueOf()}}onContext(e){const r=this.getPointer({x:e.clientX,y:e.clientY});this.selectionHandler.generateClickEvent("oncontext",e,r)}checkSelectionChanges(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)===!0?this.selectionHandler.selectAdditionalOnPoint(e):this.selectionHandler.selectOnPoint(e)}_determineDifference(e,r){const n=function(i,s){const o=[];for(let a=0;a<i.length;a++){const l=i[a];xt(s).call(s,l)===-1&&o.push(l)}return o};return{nodes:n(e.nodes,r.nodes),edges:n(e.edges,r.edges)}}onDragStart(e){if(this.drag.dragging)return;this.drag.pointer===void 0&&this.onTouch(e);const r=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=xr({},this.body.view.translation),this.drag.nodeId=void 0,e.srcEvent.shiftKey){this.body.selectionBox.show=!0;const n=this.getPointer(e.center);this.body.selectionBox.position.start={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)},this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)}}else if(r!==void 0&&this.options.dragNodes===!0){this.drag.nodeId=r.id,r.isSelected()===!1&&this.selectionHandler.setSelection({nodes:[r.id]}),this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer);for(const n of this.selectionHandler.getSelectedNodes()){const i={id:n.id,node:n,x:n.x,y:n.y,xFixed:n.options.fixed.x,yFixed:n.options.fixed.y};n.options.fixed.x=!0,n.options.fixed.y=!0,this.drag.selection.push(i)}}else this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer,void 0,!0)}onDrag(e){if(this.drag.pinched===!0)return;this.body.emitter.emit("unlockNode");const r=this.getPointer(e.center),n=this.drag.selection;if(n&&n.length&&this.options.dragNodes===!0){this.selectionHandler.generateClickEvent("dragging",e,r);const i=r.x-this.drag.pointer.x,s=r.y-this.drag.pointer.y;kt(n).call(n,o=>{const a=o.node;o.xFixed===!1&&(a.x=this.canvas._XconvertDOMtoCanvas(this.canvas._XconvertCanvasToDOM(o.x)+i)),o.yFixed===!1&&(a.y=this.canvas._YconvertDOMtoCanvas(this.canvas._YconvertCanvasToDOM(o.y)+s))}),this.body.emitter.emit("startSimulation")}else{if(e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,r,void 0,!0),this.drag.pointer===void 0){this.onDragStart(e);return}this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(r.x),y:this.canvas._YconvertDOMtoCanvas(r.y)},this.body.emitter.emit("_requestRedraw")}if(this.options.dragView===!0&&!e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,r,void 0,!0),this.drag.pointer===void 0){this.onDragStart(e);return}const i=r.x-this.drag.pointer.x,s=r.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+i,y:this.drag.translation.y+s},this.body.emitter.emit("_requestRedraw")}}}onDragEnd(e){if(this.drag.dragging=!1,this.body.selectionBox.show){var r;this.body.selectionBox.show=!1;const n=this.body.selectionBox.position,i={minX:Math.min(n.start.x,n.end.x),minY:Math.min(n.start.y,n.end.y),maxX:Math.max(n.start.x,n.end.x),maxY:Math.max(n.start.y,n.end.y)},s=Gn(r=this.body.nodeIndices).call(r,a=>{const l=this.body.nodes[a];return l.x>=i.minX&&l.x<=i.maxX&&l.y>=i.minY&&l.y<=i.maxY});kt(s).call(s,a=>this.selectionHandler.selectObject(this.body.nodes[a]));const o=this.getPointer(e.center);this.selectionHandler.commitAndEmit(o,e),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw")}else{const n=this.drag.selection;n&&n.length?(kt(n).call(n,function(i){i.node.options.fixed.x=i.xFixed,i.node.options.fixed.y=i.yFixed}),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}}onPinch(e){const r=this.getPointer(e.center);this.drag.pinched=!0,this.pinch.scale===void 0&&(this.pinch.scale=1);const n=this.pinch.scale*e.scale;this.zoom(n,r)}zoom(e,r){if(this.options.zoomView===!0){const n=this.body.view.scale;e<1e-5&&(e=1e-5),e>10&&(e=10);let i;this.drag!==void 0&&this.drag.dragging===!0&&(i=this.canvas.DOMtoCanvas(this.drag.pointer));const s=this.body.view.translation,o=e/n,a=(1-o)*r.x+s.x*o,l=(1-o)*r.y+s.y*o;if(this.body.view.scale=e,this.body.view.translation={x:a,y:l},i!=null){const u=this.canvas.canvasToDOM(i);this.drag.pointer.x=u.x,this.drag.pointer.y=u.y}this.body.emitter.emit("_requestRedraw"),n<e?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:r}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:r})}}onMouseWheel(e){if(this.options.zoomView===!0){if(e.deltaY!==0){let r=this.body.view.scale;r*=1+(e.deltaY<0?1:-1)*(this.options.zoomSpeed*.1);const n=this.getPointer({x:e.clientX,y:e.clientY});this.zoom(r,n)}e.preventDefault()}}onMouseMove(e){const r=this.getPointer({x:e.clientX,y:e.clientY});let n=!1;this.popup!==void 0&&(this.popup.hidden===!1&&this._checkHidePopup(r),this.popup.hidden===!1&&(n=!0,this.popup.setPosition(r.x+3,r.y-5),this.popup.show())),this.options.keyboard.autoFocus&&this.options.keyboard.bindToWindow===!1&&this.options.keyboard.enabled===!0&&this.canvas.frame.focus(),n===!1&&(this.popupTimer!==void 0&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=ko(()=>this._checkShowPopup(r),this.options.tooltipDelay))),this.options.hover===!0&&this.selectionHandler.hoverObject(e,r)}_checkShowPopup(e){const r=this.canvas._XconvertDOMtoCanvas(e.x),n=this.canvas._YconvertDOMtoCanvas(e.y),i={left:r,top:n,right:r,bottom:n},s=this.popupObj===void 0?void 0:this.popupObj.id;let o=!1,a="node";if(this.popupObj===void 0){const l=this.body.nodeIndices,u=this.body.nodes;let d;const h=[];for(let f=0;f<l.length;f++)d=u[l[f]],d.isOverlappingWith(i)===!0&&(o=!0,d.getTitle()!==void 0&&h.push(l[f]));h.length>0&&(this.popupObj=u[h[h.length-1]],o=!0)}if(this.popupObj===void 0&&o===!1){const l=this.body.edgeIndices,u=this.body.edges;let d;const h=[];for(let f=0;f<l.length;f++)d=u[l[f]],d.isOverlappingWith(i)===!0&&d.connected===!0&&d.getTitle()!==void 0&&h.push(l[f]);h.length>0&&(this.popupObj=u[h[h.length-1]],a="edge")}this.popupObj!==void 0?this.popupObj.id!==s&&(this.popup===void 0&&(this.popup=new rAe(this.canvas.frame)),this.popup.popupTargetType=a,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(e.x+3,e.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):this.popup!==void 0&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}_checkHidePopup(e){const r=this.selectionHandler._pointerToPositionObject(e);let n=!1;if(this.popup.popupTargetType==="node"){if(this.body.nodes[this.popup.popupTargetId]!==void 0&&(n=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(r),n===!0)){const i=this.selectionHandler.getNodeAt(e);n=i===void 0?!1:i.id===this.popup.popupTargetId}}else this.selectionHandler.getNodeAt(e)===void 0&&this.body.edges[this.popup.popupTargetId]!==void 0&&(n=this.body.edges[this.popup.popupTargetId].isOverlappingWith(r));n===!1&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}var tX={},rX={},nX;function V4e(){if(nX)return rX;nX=1;var t=ND(),e=rle();return t("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),rX}var iX;function W4e(){return iX||(iX=1,V4e()),tX}var sX={},Qj,oX;function hu(){if(oX)return Qj;oX=1;var t=Ph(),e=TypeError;return Qj=function(r){if(typeof r=="object"&&"size"in r&&"has"in r&&"add"in r&&"delete"in r&&"keys"in r)return r;throw new e(t(r)+" is not a set")},Qj}var Xj,aX;function fu(){if(aX)return Xj;aX=1;var t=_i(),e=nle(),r=t("Set"),n=r.prototype;return Xj={Set:r,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:n},Xj}var Jj,lX;function pu(){if(lX)return Jj;lX=1;var t=ai();return Jj=function(e,r,n){for(var i=n?e:e.iterator,s=e.next,o,a;!(o=t(s,i)).done;)if(a=r(o.value),a!==void 0)return a},Jj}var Zj,cX;function Ym(){if(cX)return Zj;cX=1;var t=pu();return Zj=function(e,r,n){return n?t(e.keys(),r,!0):e.forEach(r)},Zj}var eO,uX;function ID(){if(uX)return eO;uX=1;var t=fu(),e=Ym(),r=t.Set,n=t.add;return eO=function(i){var s=new r;return e(i,function(o){n(s,o)}),s},eO}var tO,dX;function Qm(){return dX||(dX=1,tO=function(t){return t.size}),tO}var rO,hX;function U4e(){return hX||(hX=1,rO=function(t){return{iterator:t,next:t.next,done:!1}}),rO}var nO,fX;function mu(){if(fX)return nO;fX=1;var t=Ko(),e=Hs(),r=ai(),n=Ah(),i=U4e(),s="Invalid size",o=RangeError,a=TypeError,l=Math.max,u=function(d,h){this.set=d,this.size=l(h,0),this.has=t(d.has),this.keys=t(d.keys)};return u.prototype={getIterator:function(){return i(e(r(this.keys,this.set)))},includes:function(d){return r(this.has,this.set,d)}},nO=function(d){e(d);var h=+d.size;if(h!==h)throw new a(s);var f=n(h);if(f<0)throw new o(s);return new u(d,f)},nO}var iO,pX;function H4e(){if(pX)return iO;pX=1;var t=hu(),e=fu(),r=ID(),n=Qm(),i=mu(),s=Ym(),o=pu(),a=e.has,l=e.remove;return iO=function(d){var h=t(this),f=i(d),p=r(h);return n(h)<=f.size?s(h,function(m){f.includes(m)&&l(p,m)}):o(f.getIterator(),function(m){a(p,m)&&l(p,m)}),p},iO}var sO,mX;function gu(){return mX||(mX=1,sO=function(){return!1}),sO}var gX;function K4e(){if(gX)return sX;gX=1;var t=Ie(),e=H4e(),r=at(),n=gu(),i=!n("difference",function(o){return o.size===0}),s=i||r(function(){var o={size:1,has:function(){return!0},keys:function(){var l=0;return{next:function(){var u=l++>1;return a.has(1)&&a.clear(),{done:u,value:2}}}}},a=new Set([1,2,3,4]);return a.difference(o).size!==3});return t({target:"Set",proto:!0,real:!0,forced:s},{difference:e}),sX}var yX={},oO,vX;function G4e(){if(vX)return oO;vX=1;var t=hu(),e=fu(),r=Qm(),n=mu(),i=Ym(),s=pu(),o=e.Set,a=e.add,l=e.has;return oO=function(d){var h=t(this),f=n(d),p=new o;return r(h)>f.size?s(f.getIterator(),function(m){l(h,m)&&a(p,m)}):i(h,function(m){f.includes(m)&&a(p,m)}),p},oO}var bX;function Y4e(){if(bX)return yX;bX=1;var t=Ie(),e=at(),r=G4e(),n=gu(),i=!n("intersection",function(s){return s.size===2&&s.has(1)&&s.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return t({target:"Set",proto:!0,real:!0,forced:i},{intersection:r}),yX}var xX={},aO,wX;function Q4e(){if(wX)return aO;wX=1;var t=hu(),e=fu().has,r=Qm(),n=mu(),i=Ym(),s=pu(),o=_D();return aO=function(l){var u=t(this),d=n(l);if(r(u)<=d.size)return i(u,function(f){if(d.includes(f))return!1},!0)!==!1;var h=d.getIterator();return s(h,function(f){if(e(u,f))return o(h,"normal",!1)})!==!1},aO}var SX;function X4e(){if(SX)return xX;SX=1;var t=Ie(),e=Q4e(),r=gu(),n=!r("isDisjointFrom",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:e}),xX}var _X={},lO,EX;function J4e(){if(EX)return lO;EX=1;var t=hu(),e=Qm(),r=Ym(),n=mu();return lO=function(s){var o=t(this),a=n(s);return e(o)>a.size?!1:r(o,function(l){if(!a.includes(l))return!1},!0)!==!1},lO}var NX;function Z4e(){if(NX)return _X;NX=1;var t=Ie(),e=J4e(),r=gu(),n=!r("isSubsetOf",function(i){return i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:e}),_X}var kX={},cO,CX;function e5e(){if(CX)return cO;CX=1;var t=hu(),e=fu().has,r=Qm(),n=mu(),i=pu(),s=_D();return cO=function(a){var l=t(this),u=n(a);if(r(l)<u.size)return!1;var d=u.getIterator();return i(d,function(h){if(!e(l,h))return s(d,"normal",!1)})!==!1},cO}var TX;function t5e(){if(TX)return kX;TX=1;var t=Ie(),e=e5e(),r=gu(),n=!r("isSupersetOf",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:e}),kX}var jX={},uO,OX;function r5e(){if(OX)return uO;OX=1;var t=hu(),e=fu(),r=ID(),n=mu(),i=pu(),s=e.add,o=e.has,a=e.remove;return uO=function(u){var d=t(this),h=n(u).getIterator(),f=r(d);return i(h,function(p){o(d,p)?a(f,p):s(f,p)}),f},uO}var dO,PX;function ple(){return PX||(PX=1,dO=function(t){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[t](r);return n.size===1&&n.values().next().value===4}catch{return!1}}),dO}var IX;function n5e(){if(IX)return jX;IX=1;var t=Ie(),e=r5e(),r=ple(),n=gu(),i=!n("symmetricDifference")||!r("symmetricDifference");return t({target:"Set",proto:!0,real:!0,forced:i},{symmetricDifference:e}),jX}var RX={},hO,MX;function i5e(){if(MX)return hO;MX=1;var t=hu(),e=fu().add,r=ID(),n=mu(),i=pu();return hO=function(o){var a=t(this),l=n(o).getIterator(),u=r(a);return i(l,function(d){e(u,d)}),u},hO}var AX;function s5e(){if(AX)return RX;AX=1;var t=Ie(),e=i5e(),r=ple(),n=gu(),i=!n("union")||!r("union");return t({target:"Set",proto:!0,real:!0,forced:i},{union:e}),RX}var fO,DX;function o5e(){if(DX)return fO;DX=1,qh(),W4e(),K4e(),Y4e(),X4e(),Z4e(),t5e(),n5e(),s5e(),CD();var t=_t();return fO=t.Set,fO}var pO,$X;function a5e(){if($X)return pO;$X=1;var t=o5e();return Lh(),pO=t,pO}var mO,FX;function l5e(){return FX||(FX=1,mO=a5e()),mO}var c5e=l5e(),ga=Ve(c5e),qX={},LX={},gO,BX;function u5e(){if(BX)return gO;BX=1;var t=ct(),e=kD(),r=$b().getWeakData,n=ED(),i=Hs(),s=Th(),o=Gr(),a=Fb(),l=wl(),u=on(),d=cu(),h=d.set,f=d.getterFor,p=l.find,m=l.findIndex,g=t([].splice),v=0,y=function(x){return x.frozen||(x.frozen=new b)},b=function(){this.entries=[]},w=function(x,S){return p(x.entries,function(_){return _[0]===S})};return b.prototype={get:function(x){var S=w(this,x);if(S)return S[1]},has:function(x){return!!w(this,x)},set:function(x,S){var _=w(this,x);_?_[1]=S:this.entries.push([x,S])},delete:function(x){var S=m(this.entries,function(_){return _[0]===x});return~S&&g(this.entries,S,1),!!~S}},gO={getConstructor:function(x,S,_,E){var N=x(function(O,C){n(O,T),h(O,{type:S,id:v++,frozen:null}),s(C)||a(C,O[E],{that:O,AS_ENTRIES:_})}),T=N.prototype,j=f(S),P=function(O,C,D){var F=j(O),$=r(i(C),!0);return $===!0?y(F).set(C,D):$[F.id]=D,O};return e(T,{delete:function(O){var C=j(this);if(!o(O))return!1;var D=r(O);return D===!0?y(C).delete(O):D&&u(D,C.id)&&delete D[C.id]},has:function(C){var D=j(this);if(!o(C))return!1;var F=r(C);return F===!0?y(D).has(C):F&&u(F,D.id)}}),e(T,_?{get:function(C){var D=j(this);if(o(C)){var F=r(C);if(F===!0)return y(D).get(C);if(F)return F[D.id]}},set:function(C,D){return P(this,C,D)}}:{add:function(C){return P(this,C,!0)}}),N}},gO}var zX;function d5e(){if(zX)return LX;zX=1;var t=ele(),e=zt(),r=ct(),n=kD(),i=$b(),s=ND(),o=u5e(),a=Gr(),l=cu().enforce,u=at(),d=rae(),h=Object,f=Array.isArray,p=h.isExtensible,m=h.isFrozen,g=h.isSealed,v=h.freeze,y=h.seal,b=!e.ActiveXObject&&"ActiveXObject"in e,w,x=function(O){return function(){return O(this,arguments.length?arguments[0]:void 0)}},S=s("WeakMap",x,o),_=S.prototype,E=r(_.set),N=function(){return t&&u(function(){var O=v([]);return E(new S,O,1),!m(O)})};if(d)if(b){w=o.getConstructor(x,"WeakMap",!0),i.enable();var T=r(_.delete),j=r(_.has),P=r(_.get);n(_,{delete:function(O){if(a(O)&&!p(O)){var C=l(this);return C.frozen||(C.frozen=new w),T(this,O)||C.frozen.delete(O)}return T(this,O)},has:function(C){if(a(C)&&!p(C)){var D=l(this);return D.frozen||(D.frozen=new w),j(this,C)||D.frozen.has(C)}return j(this,C)},get:function(C){if(a(C)&&!p(C)){var D=l(this);return D.frozen||(D.frozen=new w),j(this,C)?P(this,C):D.frozen.get(C)}return P(this,C)},set:function(C,D){if(a(C)&&!p(C)){var F=l(this);F.frozen||(F.frozen=new w),j(this,C)?E(this,C,D):F.frozen.set(C,D)}else E(this,C,D);return this}})}else N()&&n(_,{set:function(C,D){var F;return f(C)&&(m(C)?F=v:g(C)&&(F=y)),E(this,C,D),F&&F(C),this}});return LX}var VX;function h5e(){return VX||(VX=1,d5e()),qX}var yO,WX;function f5e(){if(WX)return yO;WX=1,qh(),h5e();var t=_t();return yO=t.WeakMap,yO}var vO,UX;function p5e(){if(UX)return vO;UX=1;var t=f5e();return Lh(),vO=t,vO}var bO,HX;function m5e(){return HX||(HX=1,bO=p5e()),bO}var g5e=m5e(),Xm=Ve(g5e);function Xf(t,e,r){y5e(t,e),e.set(t,r)}function y5e(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function fR(t,e,r){return t.set(mle(t,e),r),r}function jt(t,e){return t.get(mle(t,e))}function mle(t,e,r){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function KX(t,e){const r=new ga;for(const n of e)t.has(n)||r.add(n);return r}var Ou=new Xm,es=new Xm;class GX{constructor(){Xf(this,Ou,new ga),Xf(this,es,new ga)}get size(){return jt(es,this).size}add(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(const i of r)jt(es,this).add(i)}delete(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(const i of r)jt(es,this).delete(i)}clear(){jt(es,this).clear()}getSelection(){return[...jt(es,this)]}getChanges(){return{added:[...KX(jt(Ou,this),jt(es,this))],deleted:[...KX(jt(es,this),jt(Ou,this))],previous:[...new ga(jt(Ou,this))],current:[...new ga(jt(es,this))]}}commit(){const e=this.getChanges();fR(Ou,this,jt(es,this)),fR(es,this,new ga(jt(Ou,this)));for(const r of e.added)r.select();for(const r of e.deleted)r.unselect();return e}}var Pl=new Xm,Il=new Xm,xO=new Xm;class v5e{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:()=>{};Xf(this,Pl,new GX),Xf(this,Il,new GX),Xf(this,xO,void 0),fR(xO,this,e)}get sizeNodes(){return jt(Pl,this).size}get sizeEdges(){return jt(Il,this).size}getNodes(){return jt(Pl,this).getSelection()}getEdges(){return jt(Il,this).getSelection()}addNodes(){jt(Pl,this).add(...arguments)}addEdges(){jt(Il,this).add(...arguments)}deleteNodes(e){jt(Pl,this).delete(e)}deleteEdges(e){jt(Il,this).delete(e)}clear(){jt(Pl,this).clear(),jt(Il,this).clear()}commit(){const e={nodes:jt(Pl,this).commit(),edges:jt(Il,this).commit()};for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return jt(xO,this).call(this,e,...n),e}}class b5e{constructor(e,r){this.body=e,this.canvas=r,this._selectionAccumulator=new v5e,this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},xr(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",()=>{this.updateSelection()})}setOptions(e){e!==void 0&&Vh(["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"],this.options,e)}selectOnPoint(e){let r=!1;if(this.options.selectable===!0){const n=this.getNodeAt(e)||this.getEdgeAt(e);this.unselectAll(),n!==void 0&&(r=this.selectObject(n)),this.body.emitter.emit("_requestRedraw")}return r}selectAdditionalOnPoint(e){let r=!1;if(this.options.selectable===!0){const n=this.getNodeAt(e)||this.getEdgeAt(e);n!==void 0&&(r=!0,n.isSelected()===!0?this.deselectObject(n):this.selectObject(n),this.body.emitter.emit("_requestRedraw"))}return r}_initBaseEvent(e,r){const n={};return n.pointer={DOM:{x:r.x,y:r.y},canvas:this.canvas.DOMtoCanvas(r)},n.event=e,n}generateClickEvent(e,r,n,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;const o=this._initBaseEvent(r,n);if(s===!0)o.nodes=[],o.edges=[];else{const a=this.getSelection();o.nodes=a.nodes,o.edges=a.edges}i!==void 0&&(o.previousSelection=i),e=="click"&&(o.items=this.getClickedItems(n)),r.controlEdge!==void 0&&(o.controlEdge=r.controlEdge),this.body.emitter.emit(e,o)}selectObject(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.selectConnectedEdges;return e!==void 0?(e instanceof Lt?(r===!0&&this._selectionAccumulator.addEdges(...e.edges),this._selectionAccumulator.addNodes(e)):this._selectionAccumulator.addEdges(e),!0):!1}deselectObject(e){e.isSelected()===!0&&(e.selected=!1,this._removeFromSelection(e))}_getAllNodesOverlappingWith(e){const r=[],n=this.body.nodes;for(let i=0;i<this.body.nodeIndices.length;i++){const s=this.body.nodeIndices[i];n[s].isOverlappingWith(e)&&r.push(s)}return r}_pointerToPositionObject(e){const r=this.canvas.DOMtoCanvas(e);return{left:r.x-1,top:r.y+1,right:r.x+1,bottom:r.y-1}}getNodeAt(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=this._pointerToPositionObject(e),i=this._getAllNodesOverlappingWith(n);if(i.length>0)return r===!0?this.body.nodes[i[i.length-1]]:i[i.length-1]}_getEdgesOverlappingWith(e,r){const n=this.body.edges;for(let i=0;i<this.body.edgeIndices.length;i++){const s=this.body.edgeIndices[i];n[s].isOverlappingWith(e)&&r.push(s)}}_getAllEdgesOverlappingWith(e){const r=[];return this._getEdgesOverlappingWith(e,r),r}getEdgeAt(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=this.canvas.DOMtoCanvas(e);let i=10,s=null;const o=this.body.edges;for(let a=0;a<this.body.edgeIndices.length;a++){const l=this.body.edgeIndices[a],u=o[l];if(u.connected){const d=u.from.x,h=u.from.y,f=u.to.x,p=u.to.y,m=u.edgeType.getDistanceToEdge(d,h,f,p,n.x,n.y);m<i&&(s=l,i=m)}}if(s!==null)return r===!0?this.body.edges[s]:s}_addToHover(e){e instanceof Lt?this.hoverObj.nodes[e.id]=e:this.hoverObj.edges[e.id]=e}_removeFromSelection(e){e instanceof Lt?(this._selectionAccumulator.deleteNodes(e),this._selectionAccumulator.deleteEdges(...e.edges)):this._selectionAccumulator.deleteEdges(e)}unselectAll(){this._selectionAccumulator.clear()}getSelectedNodeCount(){return this._selectionAccumulator.sizeNodes}getSelectedEdgeCount(){return this._selectionAccumulator.sizeEdges}_hoverConnectedEdges(e){for(let r=0;r<e.edges.length;r++){const n=e.edges[r];n.hover=!0,this._addToHover(n)}}emitBlurEvent(e,r,n){const i=this._initBaseEvent(e,r);n.hover===!0&&(n.hover=!1,n instanceof Lt?(i.node=n.id,this.body.emitter.emit("blurNode",i)):(i.edge=n.id,this.body.emitter.emit("blurEdge",i)))}emitHoverEvent(e,r,n){const i=this._initBaseEvent(e,r);let s=!1;return n.hover===!1&&(n.hover=!0,this._addToHover(n),s=!0,n instanceof Lt?(i.node=n.id,this.body.emitter.emit("hoverNode",i)):(i.edge=n.id,this.body.emitter.emit("hoverEdge",i))),s}hoverObject(e,r){let n=this.getNodeAt(r);n===void 0&&(n=this.getEdgeAt(r));let i=!1;for(const s in this.hoverObj.nodes)Object.prototype.hasOwnProperty.call(this.hoverObj.nodes,s)&&(n===void 0||n instanceof Lt&&n.id!=s||n instanceof el)&&(this.emitBlurEvent(e,r,this.hoverObj.nodes[s]),delete this.hoverObj.nodes[s],i=!0);for(const s in this.hoverObj.edges)Object.prototype.hasOwnProperty.call(this.hoverObj.edges,s)&&(i===!0?(this.hoverObj.edges[s].hover=!1,delete this.hoverObj.edges[s]):(n===void 0||n instanceof el&&n.id!=s||n instanceof Lt&&!n.hover)&&(this.emitBlurEvent(e,r,this.hoverObj.edges[s]),delete this.hoverObj.edges[s],i=!0));if(n!==void 0){const s=nr(this.hoverObj.edges).length,o=nr(this.hoverObj.nodes).length,a=n instanceof el&&s===0&&o===0,l=n instanceof Lt&&s===0&&o===0;(i||a||l)&&(i=this.emitHoverEvent(e,r,n)),n instanceof Lt&&this.options.hoverConnectedEdges===!0&&this._hoverConnectedEdges(n)}i===!0&&this.body.emitter.emit("_requestRedraw")}commitWithoutEmitting(){this._selectionAccumulator.commit()}commitAndEmit(e,r){let n=!1;const i=this._selectionAccumulator.commit(),s={nodes:i.nodes.previous,edges:i.edges.previous};i.edges.deleted.length>0&&(this.generateClickEvent("deselectEdge",r,e,s),n=!0),i.nodes.deleted.length>0&&(this.generateClickEvent("deselectNode",r,e,s),n=!0),i.nodes.added.length>0&&(this.generateClickEvent("selectNode",r,e),n=!0),i.edges.added.length>0&&(this.generateClickEvent("selectEdge",r,e),n=!0),n===!0&&this.generateClickEvent("select",r,e)}getSelection(){return{nodes:this.getSelectedNodeIds(),edges:this.getSelectedEdgeIds()}}getSelectedNodes(){return this._selectionAccumulator.getNodes()}getSelectedEdges(){return this._selectionAccumulator.getEdges()}getSelectedNodeIds(){var e;return th(e=this._selectionAccumulator.getNodes()).call(e,r=>r.id)}getSelectedEdgeIds(){var e;return th(e=this._selectionAccumulator.getEdges()).call(e,r=>r.id)}setSelection(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e||!e.nodes&&!e.edges)throw new TypeError("Selection must be an object with nodes and/or edges properties");if((r.unselectAll||r.unselectAll===void 0)&&this.unselectAll(),e.nodes)for(const n of e.nodes){const i=this.body.nodes[n];if(!i)throw new RangeError('Node with id "'+n+'" not found');this.selectObject(i,r.highlightEdges)}if(e.edges)for(const n of e.edges){const i=this.body.edges[n];if(!i)throw new RangeError('Edge with id "'+n+'" not found');this.selectObject(i)}this.body.emitter.emit("_requestRedraw"),this._selectionAccumulator.commit()}selectNodes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({nodes:e},{highlightEdges:r})}selectEdges(e){if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({edges:e})}updateSelection(){for(const e in this._selectionAccumulator.getNodes())Object.prototype.hasOwnProperty.call(this.body.nodes,e.id)||this._selectionAccumulator.deleteNodes(e);for(const e in this._selectionAccumulator.getEdges())Object.prototype.hasOwnProperty.call(this.body.edges,e.id)||this._selectionAccumulator.deleteEdges(e)}getClickedItems(e){const r=this.canvas.DOMtoCanvas(e),n=[],i=this.body.nodeIndices,s=this.body.nodes;for(let l=i.length-1;l>=0;l--){const d=s[i[l]].getItemsOnPoint(r);n.push.apply(n,d)}const o=this.body.edgeIndices,a=this.body.edges;for(let l=o.length-1;l>=0;l--){const d=a[o[l]].getItemsOnPoint(r);n.push.apply(n,d)}return n}}var YX={},wO,QX;function x5e(){if(QX)return wO;QX=1;var t=Dh(),e=Math.floor,r=function(n,i){var s=n.length;if(s<8)for(var o=1,a,l;o<s;){for(l=o,a=n[o];l&&i(n[l-1],a)>0;)n[l]=n[--l];l!==o++&&(n[l]=a)}else for(var u=e(s/2),d=r(t(n,0,u),i),h=r(t(n,u),i),f=d.length,p=h.length,m=0,g=0;m<f||g<p;)n[m+g]=m<f&&g<p?i(d[m],h[g])<=0?d[m++]:h[g++]:m<f?d[m++]:h[g++];return n};return wO=r,wO}var SO,XX;function w5e(){if(XX)return SO;XX=1;var t=jh(),e=t.match(/firefox\/(\d+)/i);return SO=!!e&&+e[1],SO}var _O,JX;function S5e(){if(JX)return _O;JX=1;var t=jh();return _O=/MSIE|Trident/.test(t),_O}var EO,ZX;function _5e(){if(ZX)return EO;ZX=1;var t=jh(),e=t.match(/AppleWebKit\/(\d+)\./);return EO=!!e&&+e[1],EO}var eJ;function E5e(){if(eJ)return YX;eJ=1;var t=Ie(),e=ct(),r=Ko(),n=Ei(),i=Go(),s=fae(),o=Xi(),a=at(),l=x5e(),u=Bh(),d=w5e(),h=S5e(),f=Am(),p=_5e(),m=[],g=e(m.sort),v=e(m.push),y=a(function(){m.sort(void 0)}),b=a(function(){m.sort(null)}),w=u("sort"),x=!a(function(){if(f)return f<70;if(!(d&&d>3)){if(h)return!0;if(p)return p<603;var E="",N,T,j,P;for(N=65;N<76;N++){switch(T=String.fromCharCode(N),N){case 66:case 69:case 70:case 72:j=3;break;case 68:case 71:j=4;break;default:j=2}for(P=0;P<47;P++)m.push({k:T+P,v:j})}for(m.sort(function(O,C){return C.v-O.v}),P=0;P<m.length;P++)T=m[P].k.charAt(0),E.charAt(E.length-1)!==T&&(E+=T);return E!=="DGBEFHACIJK"}}),S=y||!b||!w||!x,_=function(E){return function(N,T){return T===void 0?-1:N===void 0?1:E!==void 0?+E(N,T)||0:o(N)>o(T)?1:-1}};return t({target:"Array",proto:!0,forced:S},{sort:function(N){N!==void 0&&r(N);var T=n(this);if(x)return N===void 0?g(T):g(T,N);var j=[],P=i(T),O,C;for(C=0;C<P;C++)C in T&&v(j,T[C]);for(l(j,_(N)),O=i(j),C=0;C<O;)T[C]=j[C++];for(;C<P;)s(T,C++);return T}}),YX}var NO,tJ;function N5e(){if(tJ)return NO;tJ=1,E5e();var t=an();return NO=t("Array","sort"),NO}var kO,rJ;function k5e(){if(rJ)return kO;rJ=1;var t=kr(),e=N5e(),r=Array.prototype;return kO=function(n){var i=n.sort;return n===r||t(r,n)&&i===r.sort?e:i},kO}var CO,nJ;function C5e(){if(nJ)return CO;nJ=1;var t=k5e();return CO=t,CO}var TO,iJ;function T5e(){return iJ||(iJ=1,TO=C5e()),TO}var j5e=T5e(),gd=Ve(j5e),sJ={},jO,oJ;function O5e(){if(oJ)return jO;oJ=1;var t=Ko(),e=Ei(),r=_b(),n=Go(),i=TypeError,s="Reduce of empty array with no initial value",o=function(a){return function(l,u,d,h){var f=e(l),p=r(f),m=n(f);if(t(u),m===0&&d<2)throw new i(s);var g=a?m-1:0,v=a?-1:1;if(d<2)for(;;){if(g in p){h=p[g],g+=v;break}if(g+=v,a?g<0:m<=g)throw new i(s)}for(;a?g>=0:m>g;g+=v)g in p&&(h=u(h,p[g],g,f));return h}};return jO={left:o(!1),right:o(!0)},jO}var OO,aJ;function P5e(){if(aJ)return OO;aJ=1;var t=mae();return OO=t==="NODE",OO}var lJ;function I5e(){if(lJ)return sJ;lJ=1;var t=Ie(),e=O5e().left,r=Bh(),n=Am(),i=P5e(),s=!i&&n>79&&n<83,o=s||!r("reduce");return t({target:"Array",proto:!0,forced:o},{reduce:function(l){var u=arguments.length;return e(this,l,u,u>1?arguments[1]:void 0)}}),sJ}var PO,cJ;function R5e(){if(cJ)return PO;cJ=1,I5e();var t=an();return PO=t("Array","reduce"),PO}var IO,uJ;function M5e(){if(uJ)return IO;uJ=1;var t=kr(),e=R5e(),r=Array.prototype;return IO=function(n){var i=n.reduce;return n===r||t(r,n)&&i===r.reduce?e:i},IO}var RO,dJ;function A5e(){if(dJ)return RO;dJ=1;var t=M5e();return RO=t,RO}var MO,hJ;function D5e(){return hJ||(hJ=1,MO=A5e()),MO}var $5e=D5e(),gle=Ve($5e);class yle{abstract(){throw new Error("Can't instantiate abstract class!")}fake_use(){}curveType(){return this.abstract()}getPosition(e){return this.fake_use(e),this.abstract()}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;this.fake_use(e,r,n),this.abstract()}getTreeSize(e){return this.fake_use(e),this.abstract()}sort(e){this.fake_use(e),this.abstract()}fix(e,r){this.fake_use(e,r),this.abstract()}shift(e,r){this.fake_use(e,r),this.abstract()}}class F5e extends yle{constructor(e){super(),this.layout=e}curveType(){return"horizontal"}getPosition(e){return e.x}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;n!==void 0&&this.layout.hierarchical.addToOrdering(e,n),e.x=r}getTreeSize(e){const r=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:r.min_x,max:r.max_x}}sort(e){gd(e).call(e,function(r,n){return r.x-n.x})}fix(e,r){e.y=this.layout.options.hierarchical.levelSeparation*r,e.options.fixed.y=!0}shift(e,r){this.layout.body.nodes[e].x+=r}}class q5e extends yle{constructor(e){super(),this.layout=e}curveType(){return"vertical"}getPosition(e){return e.y}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;n!==void 0&&this.layout.hierarchical.addToOrdering(e,n),e.y=r}getTreeSize(e){const r=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:r.min_y,max:r.max_y}}sort(e){gd(e).call(e,function(r,n){return r.y-n.y})}fix(e,r){e.x=this.layout.options.hierarchical.levelSeparation*r,e.options.fixed.x=!0}shift(e,r){this.layout.body.nodes[e].y+=r}}var fJ={},pJ;function L5e(){if(pJ)return fJ;pJ=1;var t=Ie(),e=wl().every,r=Bh(),n=r("every");return t({target:"Array",proto:!0,forced:!n},{every:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),fJ}var AO,mJ;function B5e(){if(mJ)return AO;mJ=1,L5e();var t=an();return AO=t("Array","every"),AO}var DO,gJ;function z5e(){if(gJ)return DO;gJ=1;var t=kr(),e=B5e(),r=Array.prototype;return DO=function(n){var i=n.every;return n===r||t(r,n)&&i===r.every?e:i},DO}var $O,yJ;function V5e(){if(yJ)return $O;yJ=1;var t=z5e();return $O=t,$O}var FO,vJ;function W5e(){return vJ||(vJ=1,FO=V5e()),FO}var U5e=W5e(),vle=Ve(U5e);function H5e(t,e){const r=new ga;return kt(t).call(t,n=>{var i;kt(i=n.edges).call(i,s=>{s.connected&&r.add(s)})}),kt(r).call(r,n=>{const i=n.from.id,s=n.to.id;e[i]==null&&(e[i]=0),(e[s]==null||e[i]>=e[s])&&(e[s]=e[i]+1)}),e}function K5e(t){return ble(e=>{var r,n;return vle(r=Gn(n=e.edges).call(n,i=>t.has(i.toId))).call(r,i=>i.to===e)},(e,r)=>r>e,"from",t)}function G5e(t){return ble(e=>{var r,n;return vle(r=Gn(n=e.edges).call(n,i=>t.has(i.toId))).call(r,i=>i.from===e)},(e,r)=>r<e,"to",t)}function ble(t,e,r,n){var i;const s=yc(null),o=gle(i=[...cle(n).call(n)]).call(i,(h,f)=>h+1+f.edges.length,0),a=r+"Id",l=r==="to"?1:-1;for(const[h,f]of n){if(!n.has(h)||!t(f))continue;s[h]=0;const p=[f];let m=0,g;for(;g=p.pop();){var u,d;if(!n.has(h))continue;const v=s[g.id]+l;if(kt(u=Gn(d=g.edges).call(d,y=>y.connected&&y.to!==y.from&&y[r]!==g&&n.has(y.toId)&&n.has(y.fromId))).call(u,y=>{const b=y[a],w=s[b];(w==null||e(v,w))&&(s[b]=v,p.push(y[r]))}),m>o)return H5e(n,s);++m}}return s}class Y5e{constructor(){this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}addRelation(e,r){this.childrenReference[e]===void 0&&(this.childrenReference[e]=[]),this.childrenReference[e].push(r),this.parentReference[r]===void 0&&(this.parentReference[r]=[]),this.parentReference[r].push(e)}checkIfTree(){for(const e in this.parentReference)if(this.parentReference[e].length>1){this.isTree=!1;return}this.isTree=!0}numTrees(){return this.treeIndex+1}setTreeIndex(e,r){r!==void 0&&this.trees[e.id]===void 0&&(this.trees[e.id]=r,this.treeIndex=Math.max(r,this.treeIndex))}ensureLevel(e){this.levels[e]===void 0&&(this.levels[e]=0)}getMaxLevel(e){const r={},n=i=>{if(r[i]!==void 0)return r[i];let s=this.levels[i];if(this.childrenReference[i]){const o=this.childrenReference[i];if(o.length>0)for(let a=0;a<o.length;a++)s=Math.max(s,n(o[a]))}return r[i]=s,s};return n(e)}levelDownstream(e,r){this.levels[r.id]===void 0&&(this.levels[e.id]===void 0&&(this.levels[e.id]=0),this.levels[r.id]=this.levels[e.id]+1)}setMinLevelToZero(){var e;const r=new TD;let n=0;const i=gd(e=[...new ga(uRe(this.levels))]).call(e,(s,o)=>s-o);for(const s of i)r.set(s,n++);for(const s in this.levels)Object.prototype.hasOwnProperty.call(this.levels,s)&&(this.levels[s]=r.get(this.levels[s]))}getTreeSize(e,r){let n=1e9,i=-1e9,s=1e9,o=-1e9;for(const a in this.trees)if(Object.prototype.hasOwnProperty.call(this.trees,a)&&this.trees[a]===r){const l=e[a];n=Math.min(l.x,n),i=Math.max(l.x,i),s=Math.min(l.y,s),o=Math.max(l.y,o)}return{min_x:n,max_x:i,min_y:s,max_y:o}}hasSameParent(e,r){const n=this.parentReference[e.id],i=this.parentReference[r.id];if(n===void 0||i===void 0)return!1;for(let s=0;s<n.length;s++)for(let o=0;o<i.length;o++)if(n[s]==i[o])return!0;return!1}inSameSubNetwork(e,r){return this.trees[e.id]===this.trees[r.id]}getLevels(){return nr(this.distributionOrdering)}addToOrdering(e,r){this.distributionOrdering[r]===void 0&&(this.distributionOrdering[r]=[]);let n=!1;const i=this.distributionOrdering[r];for(const s in i)if(i[s]===e){n=!0;break}n||(this.distributionOrdering[r].push(e),this.distributionIndex[e.id]=this.distributionOrdering[r].length-1)}}class Q5e{constructor(e){this.body=e,this._resetRNG(Math.random()+":"+r0()),this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},xr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("_dataChanged",()=>{this.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",()=>{this.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",()=>{this.setupHierarchicalLayout()}),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",()=>{if(this.options.hierarchical.enabled!==!0)return;const e=this.direction.curveType();this.body.emitter.emit("_forceDisableDynamicCurves",e,!1)})}setOptions(e,r){if(e!==void 0){const n=this.options.hierarchical,i=n.enabled;if(Vh(["randomSeed","improvedLayout","clusterThreshold"],this.options,e),Mi(this.options,e,"hierarchical"),e.randomSeed!==void 0&&this._resetRNG(e.randomSeed),n.enabled===!0)return i===!0&&this.body.emitter.emit("refresh",!0),n.direction==="RL"||n.direction==="DU"?n.levelSeparation>0&&(n.levelSeparation*=-1):n.levelSeparation<0&&(n.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(r);if(i===!0)return this.body.emitter.emit("refresh"),Ot(r,this.optionsBackup)}return r}_resetRNG(e){this.initialRandomSeed=e,this._rng=Db(this.initialRandomSeed)}adaptAllOptionsForHierarchicalLayout(e){if(this.options.hierarchical.enabled===!0){const r=this.optionsBackup.physics;e.physics===void 0||e.physics===!0?(e.physics={enabled:r.enabled===void 0?!0:r.enabled,solver:"hierarchicalRepulsion"},r.enabled=r.enabled===void 0?!0:r.enabled,r.solver=r.solver||"barnesHut"):typeof e.physics=="object"?(r.enabled=e.physics.enabled===void 0?!0:e.physics.enabled,r.solver=e.physics.solver||"barnesHut",e.physics.solver="hierarchicalRepulsion"):e.physics!==!1&&(r.solver="barnesHut",e.physics={solver:"hierarchicalRepulsion"});let n=this.direction.curveType();if(e.edges===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges={smooth:!1};else if(e.edges.smooth===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges.smooth=!1;else if(typeof e.edges.smooth=="boolean")this.optionsBackup.edges={smooth:e.edges.smooth},e.edges.smooth={enabled:e.edges.smooth,type:n};else{const i=e.edges.smooth;i.type!==void 0&&i.type!=="dynamic"&&(n=i.type),this.optionsBackup.edges={smooth:{enabled:i.enabled===void 0?!0:i.enabled,type:i.type===void 0?"dynamic":i.type,roundness:i.roundness===void 0?.5:i.roundness,forceDirection:i.forceDirection===void 0?!1:i.forceDirection}},e.edges.smooth={enabled:i.enabled===void 0?!0:i.enabled,type:n,roundness:i.roundness===void 0?.5:i.roundness,forceDirection:i.forceDirection===void 0?!1:i.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",n)}return e}positionInitially(e){if(this.options.hierarchical.enabled!==!0){this._resetRNG(this.initialRandomSeed);const r=e.length+50;for(let n=0;n<e.length;n++){const i=e[n],s=2*Math.PI*this._rng();i.x===void 0&&(i.x=r*Math.cos(s)),i.y===void 0&&(i.y=r*Math.sin(s))}}}layoutNetwork(){if(this.options.hierarchical.enabled!==!0&&this.options.improvedLayout===!0){const e=this.body.nodeIndices;let r=0;for(let n=0;n<e.length;n++)this.body.nodes[e[n]].predefinedPosition===!0&&(r+=1);if(r<.5*e.length){let i=0;const s=this.options.clusterThreshold,o={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(e.length>s){const l=e.length;for(;e.length>s&&i<=10;){i+=1;const u=e.length;i%3===0?this.body.modules.clustering.clusterBridges(o):this.body.modules.clustering.clusterOutliers(o);const d=e.length;if(u==d&&i%3!==0){this._declusterAll(),this.body.emitter.emit("_layoutFailed"),console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.");return}}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*l)})}i>10&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(e,this.body.edgeIndices,!0),this._shiftToCenter();const a=70;for(let l=0;l<e.length;l++){const u=this.body.nodes[e[l]];u.predefinedPosition===!1&&(u.x+=(.5-this._rng())*a,u.y+=(.5-this._rng())*a)}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}_shiftToCenter(){const e=kn.getRangeCore(this.body.nodes,this.body.nodeIndices),r=kn.findCenter(e);for(let n=0;n<this.body.nodeIndices.length;n++){const i=this.body.nodes[this.body.nodeIndices[n]];i.x-=r.x,i.y-=r.y}}_declusterAll(){let e=!0;for(;e===!0;){e=!1;for(let r=0;r<this.body.nodeIndices.length;r++)this.body.nodes[this.body.nodeIndices[r]].isCluster===!0&&(e=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[r],{},!1));e===!0&&this.body.emitter.emit("_dataChanged")}}getSeed(){return this.initialRandomSeed}setupHierarchicalLayout(){if(this.options.hierarchical.enabled===!0&&this.body.nodeIndices.length>0){let e,r,n=!1,i=!1;this.lastNodeOnLevel={},this.hierarchical=new Y5e;for(r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&(e=this.body.nodes[r],e.options.level!==void 0?(n=!0,this.hierarchical.levels[r]=e.options.level):i=!0);if(i===!0&&n===!0)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");{if(i===!0){const o=this.options.hierarchical.sortMethod;o==="hubsize"?this._determineLevelsByHubsize():o==="directed"?this._determineLevelsDirected():o==="custom"&&this._determineLevelsCustomCallback()}for(const o in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,o)&&this.hierarchical.ensureLevel(o);const s=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(s),this._condenseHierarchy(),this._shiftToCenter()}}}_condenseHierarchy(){var e=this;let r=!1;const n={},i=()=>{const y=o();let b=0;for(let w=0;w<y.length-1;w++){const x=y[w].max-y[w+1].min;b+=x+this.options.hierarchical.treeSpacing,s(w+1,b)}},s=(y,b)=>{const w=this.hierarchical.trees;for(const x in w)Object.prototype.hasOwnProperty.call(w,x)&&w[x]===y&&this.direction.shift(x,b)},o=()=>{const y=[];for(let b=0;b<this.hierarchical.numTrees();b++)y.push(this.direction.getTreeSize(b));return y},a=(y,b)=>{if(!b[y.id]&&(b[y.id]=!0,this.hierarchical.childrenReference[y.id])){const w=this.hierarchical.childrenReference[y.id];if(w.length>0)for(let x=0;x<w.length;x++)a(this.body.nodes[w[x]],b)}},l=function(y){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e9,w=1e9,x=1e9,S=1e9,_=-1e9;for(const E in y)if(Object.prototype.hasOwnProperty.call(y,E)){const N=e.body.nodes[E],T=e.hierarchical.levels[N.id],j=e.direction.getPosition(N),[P,O]=e._getSpaceAroundNode(N,y);w=Math.min(P,w),x=Math.min(O,x),T<=b&&(S=Math.min(j,S),_=Math.max(j,_))}return[S,_,w,x]},u=(y,b)=>{const w=this.hierarchical.getMaxLevel(y.id),x=this.hierarchical.getMaxLevel(b.id);return Math.min(w,x)},d=(y,b,w)=>{const x=this.hierarchical;for(let S=0;S<b.length;S++){const _=b[S],E=x.distributionOrdering[_];if(E.length>1)for(let N=0;N<E.length-1;N++){const T=E[N],j=E[N+1];x.hasSameParent(T,j)&&x.inSameSubNetwork(T,j)&&y(T,j,w)}}},h=function(y,b){let w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const x=e.direction.getPosition(y),S=e.direction.getPosition(b),_=Math.abs(S-x),E=e.options.hierarchical.nodeSpacing;if(_>E){const N={},T={};a(y,N),a(b,T);const j=u(y,b),P=l(N,j),O=l(T,j),C=P[1],D=O[0],F=O[2];if(Math.abs(C-D)>E){let L=C-D+E;L<-F+E&&(L=-F+E),L<0&&(e._shiftBlock(b.id,L),r=!0,w===!0&&e._centerParent(b))}}},f=(y,b)=>{const w=b.id,x=b.edges,S=this.hierarchical.levels[b.id],_=this.options.hierarchical.levelSeparation*this.options.hierarchical.levelSeparation,E={},N=[];for(let F=0;F<x.length;F++){const $=x[F];if($.toId!=$.fromId){const L=$.toId==w?$.from:$.to;E[x[F].id]=L,this.hierarchical.levels[L.id]<S&&N.push($)}}const T=(F,$)=>{let L=0;for(let M=0;M<$.length;M++)if(E[$[M].id]!==void 0){const W=this.direction.getPosition(E[$[M].id])-F;L+=W/Math.sqrt(W*W+_)}return L},j=(F,$)=>{let L=0;for(let M=0;M<$.length;M++)if(E[$[M].id]!==void 0){const W=this.direction.getPosition(E[$[M].id])-F;L-=_*Math.pow(W*W+_,-1.5)}return L},P=(F,$)=>{let L=this.direction.getPosition(b);const M={};for(let W=0;W<F;W++){const Y=T(L,$),Q=j(L,$),pe=40,K=Math.max(-pe,Math.min(pe,Math.round(Y/Q)));if(L=L-K,M[L]!==void 0)break;M[L]=W}return L},O=F=>{const $=this.direction.getPosition(b);if(n[b.id]===void 0){const pe={};a(b,pe),n[b.id]=pe}const L=l(n[b.id]),M=L[2],W=L[3],Y=F-$;let Q=0;Y>0?Q=Math.min(Y,W-this.options.hierarchical.nodeSpacing):Y<0&&(Q=-Math.min(-Y,M-this.options.hierarchical.nodeSpacing)),Q!=0&&(this._shiftBlock(b.id,Q),r=!0)},C=F=>{const $=this.direction.getPosition(b),[L,M]=this._getSpaceAroundNode(b),W=F-$;let Y=$;W>0?Y=Math.min($+(M-this.options.hierarchical.nodeSpacing),F):W<0&&(Y=Math.max($-(L-this.options.hierarchical.nodeSpacing),F)),Y!==$&&(this.direction.setPosition(b,Y),r=!0)};let D=P(y,N);O(D),D=P(y,x),C(D)},p=y=>{let b=this.hierarchical.getLevels();b=gc(b).call(b);for(let w=0;w<y;w++){r=!1;for(let x=0;x<b.length;x++){const S=b[x],_=this.hierarchical.distributionOrdering[S];for(let E=0;E<_.length;E++)f(1e3,_[E])}if(r!==!0)break}},m=y=>{let b=this.hierarchical.getLevels();b=gc(b).call(b);for(let w=0;w<y&&(r=!1,d(h,b,!0),r===!0);w++);},g=()=>{for(const y in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,y)&&this._centerParent(this.body.nodes[y])},v=()=>{let y=this.hierarchical.getLevels();y=gc(y).call(y);for(let b=0;b<y.length;b++){const w=y[b],x=this.hierarchical.distributionOrdering[w];for(let S=0;S<x.length;S++)this._centerParent(x[S])}};this.options.hierarchical.blockShifting===!0&&(m(5),g()),this.options.hierarchical.edgeMinimization===!0&&p(20),this.options.hierarchical.parentCentralization===!0&&v(),i()}_getSpaceAroundNode(e,r){let n=!0;r===void 0&&(n=!1);const i=this.hierarchical.levels[e.id];if(i!==void 0){const s=this.hierarchical.distributionIndex[e.id],o=this.direction.getPosition(e),a=this.hierarchical.distributionOrdering[i];let l=1e9,u=1e9;if(s!==0){const d=a[s-1];if(n===!0&&r[d.id]===void 0||n===!1){const h=this.direction.getPosition(d);l=o-h}}if(s!=a.length-1){const d=a[s+1];if(n===!0&&r[d.id]===void 0||n===!1){const h=this.direction.getPosition(d);u=Math.min(u,h-o)}}return[l,u]}else return[0,0]}_centerParent(e){if(this.hierarchical.parentReference[e.id]){const r=this.hierarchical.parentReference[e.id];for(let n=0;n<r.length;n++){const i=r[n],s=this.body.nodes[i],o=this.hierarchical.childrenReference[i];if(o!==void 0){const a=this._getCenterPosition(o),l=this.direction.getPosition(s),[u,d]=this._getSpaceAroundNode(s),h=l-a;(h<0&&Math.abs(h)<d-this.options.hierarchical.nodeSpacing||h>0&&Math.abs(h)<u-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(s,a)}}}}_placeNodesByHierarchy(e){this.positionedNodes={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r;let i=nr(e[n]);i=this._indexArrayToNodes(i),gd(r=this.direction).call(r,i);let s=0;for(let o=0;o<i.length;o++){const a=i[o];if(this.positionedNodes[a.id]===void 0){const l=this.options.hierarchical.nodeSpacing;let u=l*s;s>0&&(u=this.direction.getPosition(i[o-1])+l),this.direction.setPosition(a,u,n),this._validatePositionAndContinue(a,n,u),s++}}}}_placeBranchNodes(e,r){var n;const i=this.hierarchical.childrenReference[e];if(i===void 0)return;const s=[];for(let a=0;a<i.length;a++)s.push(this.body.nodes[i[a]]);gd(n=this.direction).call(n,s);for(let a=0;a<s.length;a++){const l=s[a],u=this.hierarchical.levels[l.id];if(u>r&&this.positionedNodes[l.id]===void 0){const d=this.options.hierarchical.nodeSpacing;let h;a===0?h=this.direction.getPosition(this.body.nodes[e]):h=this.direction.getPosition(s[a-1])+d,this.direction.setPosition(l,h,u),this._validatePositionAndContinue(l,u,h)}else return}const o=this._getCenterPosition(s);this.direction.setPosition(this.body.nodes[e],o,r)}_validatePositionAndContinue(e,r,n){if(this.hierarchical.isTree){if(this.lastNodeOnLevel[r]!==void 0){const i=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[r]]);if(n-i<this.options.hierarchical.nodeSpacing){const s=i+this.options.hierarchical.nodeSpacing-n,o=this._findCommonParent(this.lastNodeOnLevel[r],e.id);this._shiftBlock(o.withChild,s)}}this.lastNodeOnLevel[r]=e.id,this.positionedNodes[e.id]=!0,this._placeBranchNodes(e.id,r)}}_indexArrayToNodes(e){const r=[];for(let n=0;n<e.length;n++)r.push(this.body.nodes[e[n]]);return r}_getDistribution(){const e={};let r,n;for(r in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,r)){n=this.body.nodes[r];const i=this.hierarchical.levels[r]===void 0?0:this.hierarchical.levels[r];this.direction.fix(n,i),e[i]===void 0&&(e[i]={}),e[i][r]=n}return e}_getActiveEdges(e){const r=[];return tt(e.edges,n=>{var i;xt(i=this.body.edgeIndices).call(i,n.id)!==-1&&r.push(n)}),r}_getHubSizes(){const e={},r=this.body.nodeIndices;tt(r,i=>{const s=this.body.nodes[i],o=this._getActiveEdges(s).length;e[o]=!0});const n=[];return tt(e,i=>{n.push(Number(i))}),gd(n).call(n,function(i,s){return s-i}),n}_determineLevelsByHubsize(){const e=(n,i)=>{this.hierarchical.levelDownstream(n,i)},r=this._getHubSizes();for(let n=0;n<r.length;++n){const i=r[n];if(i===0)break;tt(this.body.nodeIndices,s=>{const o=this.body.nodes[s];i===this._getActiveEdges(o).length&&this._crawlNetwork(e,s)})}}_determineLevelsCustomCallback(){const r=function(i,s,o){},n=(i,s,o)=>{let a=this.hierarchical.levels[i.id];a===void 0&&(a=this.hierarchical.levels[i.id]=1e5);const l=r(kn.cloneOptions(i,"node"),kn.cloneOptions(s,"node"),kn.cloneOptions(o,"edge"));this.hierarchical.levels[s.id]=a+l};this._crawlNetwork(n),this.hierarchical.setMinLevelToZero()}_determineLevelsDirected(){var e;const r=gle(e=this.body.nodeIndices).call(e,(n,i)=>(n.set(i,this.body.nodes[i]),n),new TD);this.options.hierarchical.shakeTowards==="roots"?this.hierarchical.levels=G5e(r):this.hierarchical.levels=K5e(r),this.hierarchical.setMinLevelToZero()}_generateMap(){const e=(r,n)=>{this.hierarchical.levels[n.id]>this.hierarchical.levels[r.id]&&this.hierarchical.addRelation(r.id,n.id)};this._crawlNetwork(e),this.hierarchical.checkIfTree()}_crawlNetwork(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},r=arguments.length>1?arguments[1]:void 0;const n={},i=(s,o)=>{if(n[s.id]===void 0){this.hierarchical.setTreeIndex(s,o),n[s.id]=!0;let a;const l=this._getActiveEdges(s);for(let u=0;u<l.length;u++){const d=l[u];d.connected===!0&&(d.toId==s.id?a=d.from:a=d.to,s.id!=a.id&&(e(s,a,d),i(a,o)))}}};if(r===void 0){let s=0;for(let o=0;o<this.body.nodeIndices.length;o++){const a=this.body.nodeIndices[o];if(n[a]===void 0){const l=this.body.nodes[a];i(l,s),s+=1}}}else{const s=this.body.nodes[r];if(s===void 0){console.error("Node not found:",r);return}i(s)}}_shiftBlock(e,r){const n={},i=s=>{if(n[s])return;n[s]=!0,this.direction.shift(s,r);const o=this.hierarchical.childrenReference[s];if(o!==void 0)for(let a=0;a<o.length;a++)i(o[a])};i(e)}_findCommonParent(e,r){const n={},i=(o,a)=>{const l=this.hierarchical.parentReference[a];if(l!==void 0)for(let u=0;u<l.length;u++){const d=l[u];o[d]=!0,i(o,d)}},s=(o,a)=>{const l=this.hierarchical.parentReference[a];if(l!==void 0)for(let u=0;u<l.length;u++){const d=l[u];if(o[d]!==void 0)return{foundParent:d,withChild:a};const h=s(o,d);if(h.foundParent!==null)return h}return{foundParent:null,withChild:a}};return i(n,e),s(n,r)}setDirectionStrategy(){this.options.hierarchical.direction==="UD"||this.options.hierarchical.direction==="DU"?this.direction=new F5e(this):this.direction=new q5e(this)}_getCenterPosition(e){let r=1e9,n=-1e9;for(let i=0;i<e.length;i++){let s;if(e[i].id!==void 0)s=e[i];else{const a=e[i];s=this.body.nodes[a]}const o=this.direction.getPosition(s);r=Math.min(r,o),n=Math.max(n,o)}return .5*(r+n)}}class X5e{constructor(e,r,n,i){var s,o;this.body=e,this.canvas=r,this.selectionHandler=n,this.interactionHandler=i,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this._domEventListenerCleanupQueue=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},xr(this.options,this.defaultOptions),this.body.emitter.on("destroy",()=>{this._clean()}),this.body.emitter.on("_dataChanged",se(s=this._restore).call(s,this)),this.body.emitter.on("_resetData",se(o=this._restore).call(o,this))}_restore(){this.inMode!==!1&&(this.options.initiallyActive===!0?this.enableEditMode():this.disableEditMode())}setOptions(e,r,n){r!==void 0&&(r.locale!==void 0?this.options.locale=r.locale:this.options.locale=n.locale,r.locales!==void 0?this.options.locales=r.locales:this.options.locales=n.locales),e!==void 0&&(typeof e=="boolean"?this.options.enabled=e:(this.options.enabled=!0,Ot(this.options,e)),this.options.initiallyActive===!0&&(this.editMode=!0),this._setup())}toggleEditMode(){this.editMode===!0?this.disableEditMode():this.enableEditMode()}enableEditMode(){this.editMode=!0,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}disableEditMode(){this.editMode=!1,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}showManipulatorToolbar(){if(this._clean(),this.manipulationDOM={},this.guiEnabled===!0){var e,r;this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";const n=this.selectionHandler.getSelectedNodeCount(),i=this.selectionHandler.getSelectedEdgeCount(),s=n+i,o=this.options.locales[this.options.locale];let a=!1;this.options.addNode!==!1&&(this._createAddNodeButton(o),a=!0),this.options.addEdge!==!1&&(a===!0?this._createSeperator(1):a=!0,this._createAddEdgeButton(o)),n===1&&typeof this.options.editNode=="function"?(a===!0?this._createSeperator(2):a=!0,this._createEditNodeButton(o)):i===1&&n===0&&this.options.editEdge!==!1&&(a===!0?this._createSeperator(3):a=!0,this._createEditEdgeButton(o)),s!==0&&(n>0&&this.options.deleteNode!==!1?(a===!0&&this._createSeperator(4),this._createDeleteButton(o)):n===0&&this.options.deleteEdge!==!1&&(a===!0&&this._createSeperator(4),this._createDeleteButton(o))),this._bindElementEvents(this.closeDiv,se(e=this.toggleEditMode).call(e,this)),this._temporaryBindEvent("select",se(r=this.showManipulatorToolbar).call(r,this))}this.body.emitter.emit("_redraw")}addNodeMode(){var e;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addNode",this.guiEnabled===!0){var r;const n=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(n),this._createSeperator(),this._createDescription(n.addDescription||this.options.locales.en.addDescription),this._bindElementEvents(this.closeDiv,se(r=this.toggleEditMode).call(r,this))}this._temporaryBindEvent("click",se(e=this._performAddNode).call(e,this))}editNode(){this.editMode!==!0&&this.enableEditMode(),this._clean();const e=this.selectionHandler.getSelectedNodes()[0];if(e!==void 0)if(this.inMode="editNode",typeof this.options.editNode=="function")if(e.isCluster!==!0){const r=Ot({},e.options,!1);if(r.x=e.x,r.y=e.y,this.options.editNode.length===2)this.options.editNode(r,n=>{n!=null&&this.inMode==="editNode"&&this.body.data.nodes.getDataSet().update(n),this.showManipulatorToolbar()});else throw new Error("The function for edit does not support two arguments (data, callback)")}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError);else throw new Error("No function has been configured to handle the editing of nodes.");else this.showManipulatorToolbar()}addEdgeMode(){var e,r,n,i,s;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addEdge",this.guiEnabled===!0){var o;const a=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(a),this._createSeperator(),this._createDescription(a.edgeDescription||this.options.locales.en.edgeDescription),this._bindElementEvents(this.closeDiv,se(o=this.toggleEditMode).call(o,this))}this._temporaryBindUI("onTouch",se(e=this._handleConnect).call(e,this)),this._temporaryBindUI("onDragEnd",se(r=this._finishConnect).call(r,this)),this._temporaryBindUI("onDrag",se(n=this._dragControlNode).call(n,this)),this._temporaryBindUI("onRelease",se(i=this._finishConnect).call(i,this)),this._temporaryBindUI("onDragStart",se(s=this._dragStartEdge).call(s,this)),this._temporaryBindUI("onHold",()=>{})}editEdgeMode(){if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="editEdge",typeof this.options.editEdge=="object"&&typeof this.options.editEdge.editWithoutDrag=="function"&&(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0)){const o=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(o.from.id,o.to.id);return}if(this.guiEnabled===!0){var e;const o=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(o),this._createSeperator(),this._createDescription(o.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindElementEvents(this.closeDiv,se(e=this.toggleEditMode).call(e,this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0){var r,n,i,s;const o=this.body.edges[this.edgeBeingEditedId],a=this._getNewTargetNode(o.from.x,o.from.y),l=this._getNewTargetNode(o.to.x,o.to.y);this.temporaryIds.nodes.push(a.id),this.temporaryIds.nodes.push(l.id),this.body.nodes[a.id]=a,this.body.nodeIndices.push(a.id),this.body.nodes[l.id]=l,this.body.nodeIndices.push(l.id),this._temporaryBindUI("onTouch",se(r=this._controlNodeTouch).call(r,this)),this._temporaryBindUI("onTap",()=>{}),this._temporaryBindUI("onHold",()=>{}),this._temporaryBindUI("onDragStart",se(n=this._controlNodeDragStart).call(n,this)),this._temporaryBindUI("onDrag",se(i=this._controlNodeDrag).call(i,this)),this._temporaryBindUI("onDragEnd",se(s=this._controlNodeDragEnd).call(s,this)),this._temporaryBindUI("onMouseMove",()=>{}),this._temporaryBindEvent("beforeDrawing",u=>{const d=o.edgeType.findBorderPositions(u);a.selected===!1&&(a.x=d.from.x,a.y=d.from.y),l.selected===!1&&(l.x=d.to.x,l.y=d.to.y)}),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}deleteSelected(){this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="delete";const e=this.selectionHandler.getSelectedNodeIds(),r=this.selectionHandler.getSelectedEdgeIds();let n;if(e.length>0){for(let i=0;i<e.length;i++)if(this.body.nodes[e[i]].isCluster===!0){alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);return}typeof this.options.deleteNode=="function"&&(n=this.options.deleteNode)}else r.length>0&&typeof this.options.deleteEdge=="function"&&(n=this.options.deleteEdge);if(typeof n=="function"){const i={nodes:e,edges:r};if(n.length===2)n(i,s=>{s!=null&&this.inMode==="delete"?(this.body.data.edges.getDataSet().remove(s.edges),this.body.data.nodes.getDataSet().remove(s.nodes),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()):(this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar())});else throw new Error("The function for delete does not support two arguments (data, callback)")}else this.body.data.edges.getDataSet().remove(r),this.body.data.nodes.getDataSet().remove(e),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}_setup(){this.options.enabled===!0?(this.guiEnabled=!0,this._createWrappers(),this.editMode===!1?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}_createWrappers(){if(this.manipulationDiv===void 0&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",this.editMode===!0?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),this.editModeDiv===void 0&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",this.editMode===!0?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),this.closeDiv===void 0){var e,r;this.closeDiv=document.createElement("button"),this.closeDiv.className="vis-close",this.closeDiv.setAttribute("aria-label",(e=(r=this.options.locales[this.options.locale])===null||r===void 0?void 0:r.close)!==null&&e!==void 0?e:this.options.locales.en.close),this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv)}}_getNewTargetNode(e,r){const n=Ot({},this.options.controlNodeStyle);n.id="targetNode"+Qf(),n.hidden=!1,n.physics=!1,n.x=e,n.y=r;const i=this.body.functions.createNode(n);return i.shape.boundingBox={left:e,right:e,top:r,bottom:r},i}_createEditButton(){var e;this._clean(),this.manipulationDOM={},ua(this.editModeDiv);const r=this.options.locales[this.options.locale],n=this._createButton("editMode","vis-edit vis-edit-mode",r.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(n),this._bindElementEvents(n,se(e=this.toggleEditMode).call(e,this))}_clean(){this.inMode=!1,this.guiEnabled===!0&&(ua(this.editModeDiv),ua(this.manipulationDiv),this._cleanupDOMEventListeners()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}_cleanupDOMEventListeners(){for(const r of No(e=this._domEventListenerCleanupQueue).call(e,0)){var e;r()}}_removeManipulationDOM(){this._clean(),ua(this.manipulationDiv),ua(this.editModeDiv),ua(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}_createSeperator(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+e]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+e].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+e])}_createAddNodeButton(e){var r;const n=this._createButton("addNode","vis-add",e.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,se(r=this.addNodeMode).call(r,this))}_createAddEdgeButton(e){var r;const n=this._createButton("addEdge","vis-connect",e.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,se(r=this.addEdgeMode).call(r,this))}_createEditNodeButton(e){var r;const n=this._createButton("editNode","vis-edit",e.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,se(r=this.editNode).call(r,this))}_createEditEdgeButton(e){var r;const n=this._createButton("editEdge","vis-edit",e.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,se(r=this.editEdgeMode).call(r,this))}_createDeleteButton(e){var r;let n;this.options.rtl?n="vis-delete-rtl":n="vis-delete";const i=this._createButton("delete",n,e.del||this.options.locales.en.del);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,se(r=this.deleteSelected).call(r,this))}_createBackButton(e){var r;const n=this._createButton("back","vis-back",e.back||this.options.locales.en.back);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,se(r=this.showManipulatorToolbar).call(r,this))}_createButton(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"vis-label";return this.manipulationDOM[e+"Div"]=document.createElement("button"),this.manipulationDOM[e+"Div"].className="vis-button "+r,this.manipulationDOM[e+"Label"]=document.createElement("div"),this.manipulationDOM[e+"Label"].className=i,this.manipulationDOM[e+"Label"].innerText=n,this.manipulationDOM[e+"Div"].appendChild(this.manipulationDOM[e+"Label"]),this.manipulationDOM[e+"Div"]}_createDescription(e){this.manipulationDOM.descriptionLabel=document.createElement("div"),this.manipulationDOM.descriptionLabel.className="vis-none",this.manipulationDOM.descriptionLabel.innerText=e,this.manipulationDiv.appendChild(this.manipulationDOM.descriptionLabel)}_temporaryBindEvent(e,r){this.temporaryEventFunctions.push({event:e,boundFunction:r}),this.body.emitter.on(e,r)}_temporaryBindUI(e,r){if(this.body.eventListeners[e]!==void 0)this.temporaryUIFunctions[e]=this.body.eventListeners[e],this.body.eventListeners[e]=r;else throw new Error("This UI function does not exist. Typo? You tried: "+e+" possible are: "+zm(nr(this.body.eventListeners)))}_unbindTemporaryUIs(){for(const e in this.temporaryUIFunctions)Object.prototype.hasOwnProperty.call(this.temporaryUIFunctions,e)&&(this.body.eventListeners[e]=this.temporaryUIFunctions[e],delete this.temporaryUIFunctions[e]);this.temporaryUIFunctions={}}_unbindTemporaryEvents(){for(let e=0;e<this.temporaryEventFunctions.length;e++){const r=this.temporaryEventFunctions[e].event,n=this.temporaryEventFunctions[e].boundFunction;this.body.emitter.off(r,n)}this.temporaryEventFunctions=[]}_bindElementEvents(e,r){const n=new pd(e,{});c0(n,r),this._domEventListenerCleanupQueue.push(()=>{n.destroy()});const i=s=>{let{keyCode:o,key:a}=s;(a==="Enter"||a===" "||o===13||o===32)&&r()};e.addEventListener("keyup",i,!1),this._domEventListenerCleanupQueue.push(()=>{e.removeEventListener("keyup",i,!1)})}_cleanupTemporaryNodesAndEdges(){for(let s=0;s<this.temporaryIds.edges.length;s++){var e;this.body.edges[this.temporaryIds.edges[s]].disconnect(),delete this.body.edges[this.temporaryIds.edges[s]];const o=xt(e=this.body.edgeIndices).call(e,this.temporaryIds.edges[s]);if(o!==-1){var r;No(r=this.body.edgeIndices).call(r,o,1)}}for(let s=0;s<this.temporaryIds.nodes.length;s++){var n;delete this.body.nodes[this.temporaryIds.nodes[s]];const o=xt(n=this.body.nodeIndices).call(n,this.temporaryIds.nodes[s]);if(o!==-1){var i;No(i=this.body.nodeIndices).call(i,o,1)}}this.temporaryIds={nodes:[],edges:[]}}_controlNodeTouch(e){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=xr({},this.body.view.translation)}_controlNodeDragStart(){const e=this.lastTouch,r=this.selectionHandler._pointerToPositionObject(e),n=this.body.nodes[this.temporaryIds.nodes[0]],i=this.body.nodes[this.temporaryIds.nodes[1]],s=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;const o=n.isOverlappingWith(r),a=i.isOverlappingWith(r);o===!0?(this.selectedControlNode=n,s.edgeType.from=n):a===!0&&(this.selectedControlNode=i,s.edgeType.to=i),this.selectedControlNode!==void 0&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}_controlNodeDrag(e){this.body.emitter.emit("disablePhysics");const r=this.body.functions.getPointer(e.center),n=this.canvas.DOMtoCanvas(r);this.selectedControlNode!==void 0?(this.selectedControlNode.x=n.x,this.selectedControlNode.y=n.y):this.interactionHandler.onDrag(e),this.body.emitter.emit("_redraw")}_controlNodeDragEnd(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r),i=this.body.edges[this.edgeBeingEditedId];if(this.selectedControlNode===void 0)return;this.selectionHandler.unselectAll();const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let a=s.length-1;a>=0;a--)if(s[a]!==this.selectedControlNode.id){o=this.body.nodes[s[a]];break}if(o!==void 0&&this.selectedControlNode!==void 0)if(o.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{const a=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===a.id?this._performEditEdge(o.id,i.to.id):this._performEditEdge(i.from.id,o.id)}else i.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}_handleConnect(e){if(new Date().valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=xr({},this.body.view.translation),this.interactionHandler.drag.pointer=this.lastTouch,this.interactionHandler.drag.translation=this.lastTouch.translation;const r=this.lastTouch,n=this.selectionHandler.getNodeAt(r);if(n!==void 0)if(n.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{const i=this._getNewTargetNode(n.x,n.y);this.body.nodes[i.id]=i,this.body.nodeIndices.push(i.id);const s=this.body.functions.createEdge({id:"connectionEdge"+Qf(),from:n.id,to:i.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[s.id]=s,this.body.edgeIndices.push(s.id),this.temporaryIds.nodes.push(i.id),this.temporaryIds.edges.push(s.id)}this.touchTime=new Date().valueOf()}}_dragControlNode(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r);let i;this.temporaryIds.edges[0]!==void 0&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let l=s.length-1;l>=0;l--){var a;if(xt(a=this.temporaryIds.nodes).call(a,s[l])===-1){o=this.body.nodes[s[l]];break}}if(e.controlEdge={from:i,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragging",e,r),this.temporaryIds.nodes[0]!==void 0){const l=this.body.nodes[this.temporaryIds.nodes[0]];l.x=this.canvas._XconvertDOMtoCanvas(r.x),l.y=this.canvas._YconvertDOMtoCanvas(r.y),this.body.emitter.emit("_redraw")}else this.interactionHandler.onDrag(e)}_finishConnect(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r);let i;this.temporaryIds.edges[0]!==void 0&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let l=s.length-1;l>=0;l--){var a;if(xt(a=this.temporaryIds.nodes).call(a,s[l])===-1){o=this.body.nodes[s[l]];break}}this._cleanupTemporaryNodesAndEdges(),o!==void 0&&(o.isCluster===!0?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):this.body.nodes[i]!==void 0&&this.body.nodes[o.id]!==void 0&&this._performAddEdge(i,o.id)),e.controlEdge={from:i,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragEnd",e,r),this.body.emitter.emit("_redraw")}_dragStartEdge(e){const r=this.lastTouch;this.selectionHandler.generateClickEvent("dragStart",e,r,void 0,!0)}_performAddNode(e){const r={id:Qf(),x:e.pointer.canvas.x,y:e.pointer.canvas.y,label:"new"};if(typeof this.options.addNode=="function")if(this.options.addNode.length===2)this.options.addNode(r,n=>{n!=null&&this.inMode==="addNode"&&this.body.data.nodes.getDataSet().add(n),this.showManipulatorToolbar()});else throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");else this.body.data.nodes.getDataSet().add(r),this.showManipulatorToolbar()}_performAddEdge(e,r){const n={from:e,to:r};if(typeof this.options.addEdge=="function")if(this.options.addEdge.length===2)this.options.addEdge(n,i=>{i!=null&&this.inMode==="addEdge"&&(this.body.data.edges.getDataSet().add(i),this.selectionHandler.unselectAll(),this.showManipulatorToolbar())});else throw new Error("The function for connect does not support two arguments (data,callback)");else this.body.data.edges.getDataSet().add(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}_performEditEdge(e,r){const n={id:this.edgeBeingEditedId,from:e,to:r,label:this.body.data.edges.get(this.edgeBeingEditedId).label};let i=this.options.editEdge;if(typeof i=="object"&&(i=i.editWithoutDrag),typeof i=="function")if(i.length===2)i(n,s=>{s==null||this.inMode!=="editEdge"?(this.body.edges[n.id].updateEdgeType(),this.body.emitter.emit("_redraw"),this.showManipulatorToolbar()):(this.body.data.edges.getDataSet().update(s),this.selectionHandler.unselectAll(),this.showManipulatorToolbar())});else throw new Error("The function for edit does not support two arguments (data, callback)");else this.body.data.edges.getDataSet().update(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}const ue="string",ie="boolean",V="number",Nf="array",Ce="object",xle="dom",J5e="any",qO=["arrow","bar","box","circle","crow","curve","diamond","image","inv_curve","inv_triangle","triangle","vee"],LO={borderWidth:{number:V},borderWidthSelected:{number:V,undefined:"undefined"},brokenImage:{string:ue,undefined:"undefined"},chosen:{label:{boolean:ie,function:"function"},node:{boolean:ie,function:"function"},__type__:{object:Ce,boolean:ie}},color:{border:{string:ue},background:{string:ue},highlight:{border:{string:ue},background:{string:ue},__type__:{object:Ce,string:ue}},hover:{border:{string:ue},background:{string:ue},__type__:{object:Ce,string:ue}},__type__:{object:Ce,string:ue}},opacity:{number:V,undefined:"undefined"},fixed:{x:{boolean:ie},y:{boolean:ie},__type__:{object:Ce,boolean:ie}},font:{align:{string:ue},color:{string:ue},size:{number:V},face:{string:ue},background:{string:ue},strokeWidth:{number:V},strokeColor:{string:ue},vadjust:{number:V},multi:{boolean:ie,string:ue},bold:{color:{string:ue},size:{number:V},face:{string:ue},mod:{string:ue},vadjust:{number:V},__type__:{object:Ce,string:ue}},boldital:{color:{string:ue},size:{number:V},face:{string:ue},mod:{string:ue},vadjust:{number:V},__type__:{object:Ce,string:ue}},ital:{color:{string:ue},size:{number:V},face:{string:ue},mod:{string:ue},vadjust:{number:V},__type__:{object:Ce,string:ue}},mono:{color:{string:ue},size:{number:V},face:{string:ue},mod:{string:ue},vadjust:{number:V},__type__:{object:Ce,string:ue}},__type__:{object:Ce,string:ue}},group:{string:ue,number:V,undefined:"undefined"},heightConstraint:{minimum:{number:V},valign:{string:ue},__type__:{object:Ce,boolean:ie,number:V}},hidden:{boolean:ie},icon:{face:{string:ue},code:{string:ue},size:{number:V},color:{string:ue},weight:{string:ue,number:V},__type__:{object:Ce}},id:{string:ue,number:V},image:{selected:{string:ue,undefined:"undefined"},unselected:{string:ue,undefined:"undefined"},__type__:{object:Ce,string:ue}},imagePadding:{top:{number:V},right:{number:V},bottom:{number:V},left:{number:V},__type__:{object:Ce,number:V}},label:{string:ue,undefined:"undefined"},labelHighlightBold:{boolean:ie},level:{number:V,undefined:"undefined"},margin:{top:{number:V},right:{number:V},bottom:{number:V},left:{number:V},__type__:{object:Ce,number:V}},mass:{number:V},physics:{boolean:ie},scaling:{min:{number:V},max:{number:V},label:{enabled:{boolean:ie},min:{number:V},max:{number:V},maxVisible:{number:V},drawThreshold:{number:V},__type__:{object:Ce,boolean:ie}},customScalingFunction:{function:"function"},__type__:{object:Ce}},shadow:{enabled:{boolean:ie},color:{string:ue},size:{number:V},x:{number:V},y:{number:V},__type__:{object:Ce,boolean:ie}},shape:{string:["custom","ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},ctxRenderer:{function:"function"},shapeProperties:{borderDashes:{boolean:ie,array:Nf},borderRadius:{number:V},interpolation:{boolean:ie},useImageSize:{boolean:ie},useBorderWithImage:{boolean:ie},coordinateOrigin:{string:["center","top-left"]},__type__:{object:Ce}},size:{number:V},title:{string:ue,dom:xle,undefined:"undefined"},value:{number:V,undefined:"undefined"},widthConstraint:{minimum:{number:V},maximum:{number:V},__type__:{object:Ce,boolean:ie,number:V}},x:{number:V},y:{number:V},__type__:{object:Ce}},Z5e={configure:{enabled:{boolean:ie},filter:{boolean:ie,string:ue,array:Nf,function:"function"},container:{dom:xle},showButton:{boolean:ie},__type__:{object:Ce,boolean:ie,string:ue,array:Nf,function:"function"}},edges:{arrows:{to:{enabled:{boolean:ie},scaleFactor:{number:V},type:{string:qO},imageHeight:{number:V},imageWidth:{number:V},src:{string:ue},__type__:{object:Ce,boolean:ie}},middle:{enabled:{boolean:ie},scaleFactor:{number:V},type:{string:qO},imageWidth:{number:V},imageHeight:{number:V},src:{string:ue},__type__:{object:Ce,boolean:ie}},from:{enabled:{boolean:ie},scaleFactor:{number:V},type:{string:qO},imageWidth:{number:V},imageHeight:{number:V},src:{string:ue},__type__:{object:Ce,boolean:ie}},__type__:{string:["from","to","middle"],object:Ce}},endPointOffset:{from:{number:V},to:{number:V},__type__:{object:Ce,number:V}},arrowStrikethrough:{boolean:ie},background:{enabled:{boolean:ie},color:{string:ue},size:{number:V},dashes:{boolean:ie,array:Nf},__type__:{object:Ce,boolean:ie}},chosen:{label:{boolean:ie,function:"function"},edge:{boolean:ie,function:"function"},__type__:{object:Ce,boolean:ie}},color:{color:{string:ue},highlight:{string:ue},hover:{string:ue},inherit:{string:["from","to","both"],boolean:ie},opacity:{number:V},__type__:{object:Ce,string:ue}},dashes:{boolean:ie,array:Nf},font:{color:{string:ue},size:{number:V},face:{string:ue},background:{string:ue},strokeWidth:{number:V},strokeColor:{string:ue},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:V},multi:{boolean:ie,string:ue},bold:{color:{string:ue},size:{number:V},face:{string:ue},mod:{string:ue},vadjust:{number:V},__type__:{object:Ce,string:ue}},boldital:{color:{string:ue},size:{number:V},face:{string:ue},mod:{string:ue},vadjust:{number:V},__type__:{object:Ce,string:ue}},ital:{color:{string:ue},size:{number:V},face:{string:ue},mod:{string:ue},vadjust:{number:V},__type__:{object:Ce,string:ue}},mono:{color:{string:ue},size:{number:V},face:{string:ue},mod:{string:ue},vadjust:{number:V},__type__:{object:Ce,string:ue}},__type__:{object:Ce,string:ue}},hidden:{boolean:ie},hoverWidth:{function:"function",number:V},label:{string:ue,undefined:"undefined"},labelHighlightBold:{boolean:ie},length:{number:V,undefined:"undefined"},physics:{boolean:ie},scaling:{min:{number:V},max:{number:V},label:{enabled:{boolean:ie},min:{number:V},max:{number:V},maxVisible:{number:V},drawThreshold:{number:V},__type__:{object:Ce,boolean:ie}},customScalingFunction:{function:"function"},__type__:{object:Ce}},selectionWidth:{function:"function",number:V},selfReferenceSize:{number:V},selfReference:{size:{number:V},angle:{number:V},renderBehindTheNode:{boolean:ie},__type__:{object:Ce}},shadow:{enabled:{boolean:ie},color:{string:ue},size:{number:V},x:{number:V},y:{number:V},__type__:{object:Ce,boolean:ie}},smooth:{enabled:{boolean:ie},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:V},forceDirection:{string:["horizontal","vertical","none"],boolean:ie},__type__:{object:Ce,boolean:ie}},title:{string:ue,undefined:"undefined"},width:{number:V},widthConstraint:{maximum:{number:V},__type__:{object:Ce,boolean:ie,number:V}},value:{number:V,undefined:"undefined"},__type__:{object:Ce}},groups:{useDefaultGroups:{boolean:ie},__any__:LO,__type__:{object:Ce}},interaction:{dragNodes:{boolean:ie},dragView:{boolean:ie},hideEdgesOnDrag:{boolean:ie},hideEdgesOnZoom:{boolean:ie},hideNodesOnDrag:{boolean:ie},hover:{boolean:ie},keyboard:{enabled:{boolean:ie},speed:{x:{number:V},y:{number:V},zoom:{number:V},__type__:{object:Ce}},bindToWindow:{boolean:ie},autoFocus:{boolean:ie},__type__:{object:Ce,boolean:ie}},multiselect:{boolean:ie},navigationButtons:{boolean:ie},selectable:{boolean:ie},selectConnectedEdges:{boolean:ie},hoverConnectedEdges:{boolean:ie},tooltipDelay:{number:V},zoomView:{boolean:ie},zoomSpeed:{number:V},__type__:{object:Ce}},layout:{randomSeed:{undefined:"undefined",number:V,string:ue},improvedLayout:{boolean:ie},clusterThreshold:{number:V},hierarchical:{enabled:{boolean:ie},levelSeparation:{number:V},nodeSpacing:{number:V},treeSpacing:{number:V},blockShifting:{boolean:ie},edgeMinimization:{boolean:ie},parentCentralization:{boolean:ie},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:Ce,boolean:ie}},__type__:{object:Ce}},manipulation:{enabled:{boolean:ie},initiallyActive:{boolean:ie},addNode:{boolean:ie,function:"function"},addEdge:{boolean:ie,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:Ce,boolean:ie,function:"function"}},deleteNode:{boolean:ie,function:"function"},deleteEdge:{boolean:ie,function:"function"},controlNodeStyle:LO,__type__:{object:Ce,boolean:ie}},nodes:LO,physics:{enabled:{boolean:ie},barnesHut:{theta:{number:V},gravitationalConstant:{number:V},centralGravity:{number:V},springLength:{number:V},springConstant:{number:V},damping:{number:V},avoidOverlap:{number:V},__type__:{object:Ce}},forceAtlas2Based:{theta:{number:V},gravitationalConstant:{number:V},centralGravity:{number:V},springLength:{number:V},springConstant:{number:V},damping:{number:V},avoidOverlap:{number:V},__type__:{object:Ce}},repulsion:{centralGravity:{number:V},springLength:{number:V},springConstant:{number:V},nodeDistance:{number:V},damping:{number:V},__type__:{object:Ce}},hierarchicalRepulsion:{centralGravity:{number:V},springLength:{number:V},springConstant:{number:V},nodeDistance:{number:V},damping:{number:V},avoidOverlap:{number:V},__type__:{object:Ce}},maxVelocity:{number:V},minVelocity:{number:V},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:ie},iterations:{number:V},updateInterval:{number:V},onlyDynamicEdges:{boolean:ie},fit:{boolean:ie},__type__:{object:Ce,boolean:ie}},timestep:{number:V},adaptiveTimestep:{boolean:ie},wind:{x:{number:V},y:{number:V},__type__:{object:Ce}},__type__:{object:Ce,boolean:ie}},autoResize:{boolean:ie},clickToUse:{boolean:ie},locale:{string:ue},locales:{__any__:{any:J5e},__type__:{object:Ce}},height:{string:ue},width:{string:ue},__type__:{object:Ce}},wle={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},opacity:[0,0,1,.1],fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},endPointOffset:{from:[0,-10,10,1],to:[0,-10,10,1]},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0,autoFocus:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},eFe=(t,e,r)=>{var n;return!!(Xa(t).call(t,"physics")&&Xa(n=wle.physics.solver).call(n,e)&&r.physics.solver!==e&&e!=="wind")};class tFe{constructor(){}getDistances(e,r,n){const i={},s=e.edges;for(let a=0;a<r.length;a++){const l=r[a],u={};i[l]=u;for(let d=0;d<r.length;d++)u[r[d]]=a==d?0:1e9}for(let a=0;a<n.length;a++){const l=s[n[a]];l.connected===!0&&i[l.fromId]!==void 0&&i[l.toId]!==void 0&&(i[l.fromId][l.toId]=1,i[l.toId][l.fromId]=1)}const o=r.length;for(let a=0;a<o;a++){const l=r[a],u=i[l];for(let d=0;d<o-1;d++){const h=r[d],f=i[h];for(let p=d+1;p<o;p++){const m=r[p],g=i[m],v=Math.min(f[m],f[l]+u[m]);f[m]=v,g[h]=v}}}return i}}class rFe{constructor(e,r,n){this.body=e,this.springLength=r,this.springConstant=n,this.distanceSolver=new tFe}setOptions(e){e&&(e.springLength&&(this.springLength=e.springLength),e.springConstant&&(this.springConstant=e.springConstant))}solve(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=this.distanceSolver.getDistances(this.body,e,r);this._createL_matrix(i),this._createK_matrix(i),this._createE_matrix();const s=.01,o=1;let a=0;const l=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),u=5;let d=1e9,h=0,f=0,p=0,m=0,g=0;for(;d>s&&a<l;)for(a+=1,[h,d,f,p]=this._getHighestEnergyNode(n),m=d,g=0;m>o&&g<u;)g+=1,this._moveNode(h,f,p),[m,f,p]=this._getEnergy(h)}_getHighestEnergyNode(e){const r=this.body.nodeIndices,n=this.body.nodes;let i=0,s=r[0],o=0,a=0;for(let l=0;l<r.length;l++){const u=r[l];if(n[u].predefinedPosition!==!0||n[u].isCluster===!0&&e===!0||n[u].options.fixed.x!==!0||n[u].options.fixed.y!==!0){const[d,h,f]=this._getEnergy(u);i<d&&(i=d,s=u,o=h,a=f)}}return[s,i,o,a]}_getEnergy(e){const[r,n]=this.E_sums[e];return[Math.sqrt(r**2+n**2),r,n]}_moveNode(e,r,n){const i=this.body.nodeIndices,s=this.body.nodes;let o=0,a=0,l=0;const u=s[e].x,d=s[e].y,h=this.K_matrix[e],f=this.L_matrix[e];for(let x=0;x<i.length;x++){const S=i[x];if(S!==e){const _=s[S].x,E=s[S].y,N=h[S],T=f[S],j=1/((u-_)**2+(d-E)**2)**1.5;o+=N*(1-T*(d-E)**2*j),a+=N*(T*(u-_)*(d-E)*j),l+=N*(1-T*(u-_)**2*j)}}const p=o,m=a,g=r,v=l,y=n,b=(g/p+y/m)/(m/p-v/m),w=-(m*b+g)/p;s[e].x+=w,s[e].y+=b,this._updateE_matrix(e)}_createL_matrix(e){const r=this.body.nodeIndices,n=this.springLength;this.L_matrix=[];for(let i=0;i<r.length;i++){this.L_matrix[r[i]]={};for(let s=0;s<r.length;s++)this.L_matrix[r[i]][r[s]]=n*e[r[i]][r[s]]}}_createK_matrix(e){const r=this.body.nodeIndices,n=this.springConstant;this.K_matrix=[];for(let i=0;i<r.length;i++){this.K_matrix[r[i]]={};for(let s=0;s<r.length;s++)this.K_matrix[r[i]][r[s]]=n*e[r[i]][r[s]]**-2}}_createE_matrix(){const e=this.body.nodeIndices,r=this.body.nodes;this.E_matrix={},this.E_sums={};for(let n=0;n<e.length;n++)this.E_matrix[e[n]]=[];for(let n=0;n<e.length;n++){const i=e[n],s=r[i].x,o=r[i].y;let a=0,l=0;for(let u=n;u<e.length;u++){const d=e[u];if(d!==i){const h=r[d].x,f=r[d].y,p=1/Math.sqrt((s-h)**2+(o-f)**2);this.E_matrix[i][u]=[this.K_matrix[i][d]*(s-h-this.L_matrix[i][d]*(s-h)*p),this.K_matrix[i][d]*(o-f-this.L_matrix[i][d]*(o-f)*p)],this.E_matrix[d][n]=this.E_matrix[i][u],a+=this.E_matrix[i][u][0],l+=this.E_matrix[i][u][1]}}this.E_sums[i]=[a,l]}}_updateE_matrix(e){const r=this.body.nodeIndices,n=this.body.nodes,i=this.E_matrix[e],s=this.K_matrix[e],o=this.L_matrix[e],a=n[e].x,l=n[e].y;let u=0,d=0;for(let h=0;h<r.length;h++){const f=r[h];if(f!==e){const p=i[h],m=p[0],g=p[1],v=n[f].x,y=n[f].y,b=1/Math.sqrt((a-v)**2+(l-y)**2),w=s[f]*(a-v-o[f]*(a-v)*b),x=s[f]*(l-y-o[f]*(l-y)*b);i[h]=[w,x],u+=w,d+=x;const S=this.E_sums[f];S[0]+=w-m,S[1]+=x-g}}this.E_sums[e]=[u,d]}}function Ne(t,e,r){var n,i,s,o;if(!(this instanceof Ne))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:kAe,clickToUse:!1},xr(this.options,this.defaultOptions),this.body={container:t,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:se(n=this.on).call(n,this),off:se(i=this.off).call(i,this),emit:se(s=this.emit).call(s,this),once:se(o=this.once).call(o,this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}},selectionBox:{show:!1,position:{start:{x:0,y:0},end:{x:0,y:0}}}},this.bindEventListeners(),this.images=new jAe(()=>this.body.emitter.emit("_requestRedraw")),this.groups=new WAe,this.canvas=new F4e(this.body),this.selectionHandler=new b5e(this.body,this.canvas),this.interactionHandler=new z4e(this.body,this.canvas,this.selectionHandler),this.view=new L4e(this.body,this.canvas),this.renderer=new R4e(this.body,this.canvas),this.physics=new N4e(this.body),this.layoutEngine=new Q5e(this.body),this.clustering=new I4e(this.body),this.manipulation=new X5e(this.body,this.canvas,this.selectionHandler,this.interactionHandler),this.nodesHandler=new Z$e(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new b4e(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new rFe(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(r),this.setData(e)}Xoe(Ne.prototype);Ne.prototype.setOptions=function(t){if(t===null&&(t=void 0),t!==void 0){if(nAe.validate(t,Z5e)===!0&&console.error("%cErrors have been found in the supplied options object.",Hae),Vh(["locale","locales","clickToUse"],this.options,t),t.locale!==void 0&&(t.locale=CAe(t.locales||this.options.locales,t.locale)),t=this.layoutEngine.setOptions(t.layout,t),this.canvas.setOptions(t),this.groups.setOptions(t.groups),this.nodesHandler.setOptions(t.nodes),this.edgesHandler.setOptions(t.edges),this.physics.setOptions(t.physics),this.manipulation.setOptions(t.manipulation,t,this.options),this.interactionHandler.setOptions(t.interaction),this.renderer.setOptions(t.interaction),this.selectionHandler.setOptions(t.interaction),t.groups!==void 0&&this.body.emitter.emit("refreshNodes"),"configure"in t&&(this.configurator||(this.configurator=new tAe(this,this.body.container,wle,this.canvas.pixelRatio,eFe)),this.configurator.setOptions(t.configure)),this.configurator&&this.configurator.options.enabled===!0){const n={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};Ot(n.nodes,this.nodesHandler.options),Ot(n.edges,this.edgesHandler.options),Ot(n.layout,this.layoutEngine.options),Ot(n.interaction,this.selectionHandler.options),Ot(n.interaction,this.renderer.options),Ot(n.interaction,this.interactionHandler.options),Ot(n.manipulation,this.manipulation.options),Ot(n.physics,this.physics.options),Ot(n.global,this.canvas.options),Ot(n.global,this.options),this.configurator.setModuleOptions(n)}t.clickToUse!==void 0?t.clickToUse===!0?this.activator===void 0&&(this.activator=new eAe(this.canvas.frame),this.activator.on("change",()=>{this.body.emitter.emit("activate")})):(this.activator!==void 0&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}};Ne.prototype._updateVisibleIndices=function(){const t=this.body.nodes,e=this.body.edges;this.body.nodeIndices=[],this.body.edgeIndices=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&!this.clustering._isClusteredNode(r)&&t[r].options.hidden===!1&&this.body.nodeIndices.push(t[r].id);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const n=e[r],i=t[n.fromId],s=t[n.toId],o=i!==void 0&&s!==void 0;!this.clustering._isClusteredEdge(r)&&n.options.hidden===!1&&o&&i.options.hidden===!1&&s.options.hidden===!1&&this.body.edgeIndices.push(n.id)}};Ne.prototype.bindEventListeners=function(){this.body.emitter.on("_dataChanged",()=>{this.edgesHandler._updateState(),this.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",()=>{this.clustering._updateState(),this._updateVisibleIndices(),this._updateValueRange(this.body.nodes),this._updateValueRange(this.body.edges),this.body.emitter.emit("startSimulation"),this.body.emitter.emit("_requestRedraw")})};Ne.prototype.setData=function(t){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),t&&t.dot&&(t.nodes||t.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(t&&t.options),t&&t.dot){console.warn("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");const e=fAe(t.dot);this.setData(e);return}else if(t&&t.gephi){console.warn("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");const e=pAe(t.gephi);this.setData(e);return}else this.nodesHandler.setData(t&&t.nodes,!0),this.edgesHandler.setData(t&&t.edges,!0);this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")};Ne.prototype.destroy=function(){this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images;for(const t in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,t)&&delete this.body.nodes[t];for(const t in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,t)&&delete this.body.edges[t];ua(this.body.container)};Ne.prototype._updateValueRange=function(t){let e,r,n,i=0;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const s=t[e].getValue();s!==void 0&&(r=r===void 0?s:Math.min(s,r),n=n===void 0?s:Math.max(s,n),i+=s)}if(r!==void 0&&n!==void 0)for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&t[e].setValueRange(r,n,i)};Ne.prototype.isActive=function(){return!this.activator||this.activator.active};Ne.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)};Ne.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)};Ne.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)};Ne.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)};Ne.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)};Ne.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)};Ne.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)};Ne.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)};Ne.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)};Ne.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)};Ne.prototype.updateClusteredNode=function(){return this.clustering.updateClusteredNode.apply(this.clustering,arguments)};Ne.prototype.getClusteredEdges=function(){return this.clustering.getClusteredEdges.apply(this.clustering,arguments)};Ne.prototype.getBaseEdge=function(){return this.clustering.getBaseEdge.apply(this.clustering,arguments)};Ne.prototype.getBaseEdges=function(){return this.clustering.getBaseEdges.apply(this.clustering,arguments)};Ne.prototype.updateEdge=function(){return this.clustering.updateEdge.apply(this.clustering,arguments)};Ne.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)};Ne.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)};Ne.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)};Ne.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)};Ne.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)};Ne.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)};Ne.prototype.editNodeMode=function(){return console.warn("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)};Ne.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)};Ne.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)};Ne.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)};Ne.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)};Ne.prototype.getPosition=function(){return this.nodesHandler.getPosition.apply(this.nodesHandler,arguments)};Ne.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)};Ne.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)};Ne.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)};Ne.prototype.getConnectedNodes=function(t){return this.body.nodes[t]!==void 0?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)};Ne.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)};Ne.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)};Ne.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)};Ne.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)};Ne.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)};Ne.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)};Ne.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodeIds.apply(this.selectionHandler,arguments)};Ne.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdgeIds.apply(this.selectionHandler,arguments)};Ne.prototype.getNodeAt=function(){const t=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return t!==void 0&&t.id!==void 0?t.id:t};Ne.prototype.getEdgeAt=function(){const t=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return t!==void 0&&t.id!==void 0?t.id:t};Ne.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)};Ne.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)};Ne.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.selectionHandler.commitWithoutEmitting.apply(this.selectionHandler),this.redraw()};Ne.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)};Ne.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)};Ne.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)};Ne.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)};Ne.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)};Ne.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)};Ne.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)};Ne.prototype.getOptionsFromConfigurator=function(){let t={};return this.configurator&&(t=this.configurator.getOptions.apply(this.configurator)),t};function nFe({graphData:t,startPersonId:e,onNodeClick:r}){const n=k.useRef(null),i=k.useRef(null),s=Fn(),o=k.useCallback(d=>{r?r(d):s(`/people/${d}`)},[r,s]);k.useEffect(()=>{if(!n.current||!t||!t.nodes||t.nodes.length===0)return;const d=new eh(t.nodes),h=new eh(t.edges),f={layout:{hierarchical:{enabled:!0,direction:"UD",sortMethod:"directed",levelSeparation:180,nodeSpacing:200,treeSpacing:250,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0}},nodes:{shape:"box",margin:10,font:{size:14,face:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',color:"#1f2937"},color:{border:"#d1d5db",background:"#ffffff",highlight:{border:"#f59e0b",background:"#fef3c7"},hover:{border:"#9ca3af",background:"#f9fafb"}},borderWidth:2,borderWidthSelected:3,shadow:{enabled:!0,color:"rgba(0,0,0,0.1)",size:5,x:0,y:2}},edges:{color:{color:"#9ca3af",highlight:"#6b7280",hover:"#6b7280"},width:2,smooth:{enabled:!0,type:"cubicBezier",forceDirection:"vertical",roundness:.4},arrows:{to:{enabled:!1}}},physics:{enabled:!1},interaction:{hover:!0,tooltipDelay:200,zoomView:!0,dragView:!0,dragNodes:!1,navigationButtons:!1,keyboard:{enabled:!0,bindToWindow:!1}}},p=new Ne(n.current,{nodes:d,edges:h},f);return i.current=p,p.on("click",m=>{if(m.nodes.length>0){const g=m.nodes[0];o(g)}}),p.on("doubleClick",m=>{m.nodes.length>0&&p.focus(m.nodes[0],{scale:1,animation:{duration:500,easingFunction:"easeInOutQuad"}})}),p.once("stabilized",()=>{const m=t.edges.filter(g=>g.dashes).map(g=>[g.from,g.to]);if(m.length>0){const g=p.getPositions(),v={},y=new Set;m.forEach(([b,w])=>{if(y.has(b)||y.has(w))return;const x=g[b],S=g[w];if(!x||!S)return;const _=(x.x+S.x)/2;v[b]={x:_-60,y:x.y},v[w]={x:_+60,y:S.y},y.add(b),y.add(w)}),Object.entries(v).forEach(([b,w])=>{p.moveNode(b,w.x,w.y)})}setTimeout(()=>{p.fit({animation:{duration:500,easingFunction:"easeInOutQuad"}})},50)}),setTimeout(()=>{e&&p&&p.focus(e,{scale:.8,animation:{duration:500,easingFunction:"easeInOutQuad"}})},100),()=>{p&&p.destroy()}},[t,e,o]);const a=()=>{if(i.current){const d=i.current.getScale();i.current.moveTo({scale:d*1.3,animation:{duration:300,easingFunction:"easeInOutQuad"}})}},l=()=>{if(i.current){const d=i.current.getScale();i.current.moveTo({scale:d/1.3,animation:{duration:300,easingFunction:"easeInOutQuad"}})}},u=()=>{i.current&&i.current.fit({animation:{duration:500,easingFunction:"easeInOutQuad"}})};return!t||!t.nodes||t.nodes.length===0?c.jsx("div",{className:"flex items-center justify-center h-96",children:c.jsx("p",{className:"text-gray-500",children:"No family tree data available"})}):c.jsxs("div",{className:"relative w-full h-full",children:[c.jsxs("div",{className:"absolute top-4 right-4 z-10 flex gap-2 bg-white rounded-lg shadow-lg p-2",children:[c.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded",title:"Zoom In",children:c.jsx(hme,{className:"w-4 h-4"})}),c.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 rounded",title:"Zoom Out",children:c.jsx(fme,{className:"w-4 h-4"})}),c.jsx("button",{onClick:u,className:"p-2 hover:bg-gray-100 rounded",title:"Fit All",children:c.jsx(Zte,{className:"w-4 h-4"})})]}),c.jsx("div",{className:"absolute bottom-4 left-4 z-10 text-xs text-gray-500 bg-white/80 px-2 py-1 rounded",children:"Click a person to view details  Double-click to center  Scroll to zoom"}),c.jsx("div",{ref:n,className:"w-full h-full min-h-[600px]",style:{background:"#fafafa"}})]})}const iFe=["parent","child","spouse","lover","partner"];function sFe(t){return iFe.includes(t==null?void 0:t.toLowerCase())}function oFe(t){return(t==null?void 0:t.toLowerCase())==="parent"}function aFe(t){return(t==null?void 0:t.toLowerCase())==="child"}function lFe(t){const e=t==null?void 0:t.toLowerCase();return e==="spouse"||e==="lover"||e==="partner"}function cFe(t,e,r){var d;const n=new Map,i=[],s=new Set,o=new Map;e.forEach(h=>o.set(h.id,h));const a=[{personId:t,depth:0}];s.add(t);function l(h,f){var w,x,S,_;const p=h.name||((w=h.title)==null?void 0:w.rendered)||h.title||`Person ${f}`,m=Tn(p);let g=null,v=((x=h.acf)==null?void 0:x.birth_date)||null;if(v){const E=new Date(v);isNaN(E.getTime())||(g=Math.floor((new Date-E)/(365.25*24*60*60*1e3)))}let y="";switch((S=h.acf)==null?void 0:S.gender){case"male":y="";break;case"female":y="";break;case"non_binary":case"other":case"prefer_not_to_say":y="";break}let b="";if(v)try{const E=new Date(v);if(!isNaN(E.getTime())){const N=String(E.getDate()).padStart(2,"0"),T=String(E.getMonth()+1).padStart(2,"0"),j=E.getFullYear();b=`${N}-${T}-${j}`}}catch{}return{id:f,name:m,gender:((_=h.acf)==null?void 0:_.gender)||"",genderSymbol:y,photo:h.thumbnail||null,age:g,birthDate:v,formattedBirthDate:b}}const u=o.get(t);for(u&&n.set(t,l(u,t));a.length>0;){const{personId:h,depth:f}=a.shift(),p=r.get(h)||[];for(const m of p){if(m.relationship_type_slug&&!sFe(m.relationship_type_slug))continue;const g=m.related_person;if(!g||!o.has(g))continue;if(!n.has(g)){const w=o.get(g);n.set(g,l(w,g))}const v=`${h}-${g}`,y=`${g}-${h}`;if(!i.some(w=>`${w.from}-${w.to}`===v||`${w.from}-${w.to}`===y)){const w=(d=m.relationship_type_slug)==null?void 0:d.toLowerCase();if(oFe(w))i.push({from:g,to:h,type:"parent-child"});else if(aFe(w))i.push({from:h,to:g,type:"parent-child"});else if(lFe(w)){const[x,S]=h<g?[h,g]:[g,h];i.push({from:x,to:S,type:"spouse"})}}s.has(g)||(s.add(g),a.push({personId:g,depth:f+1}))}}return{nodes:Array.from(n.values()),edges:i}}function uFe(t,e,r={}){const{nodes:n,edges:i}=t;if(n.length===0)return{nodes:[],edges:[]};const s=new Map,o=new Map,a=new Map;n.forEach(v=>{s.set(v.id,[]),o.set(v.id,[]),a.set(v.id,[])}),i.forEach(v=>{var y,b,w,x;v.type==="parent-child"?((y=s.get(v.to))==null||y.push(v.from),(b=o.get(v.from))==null||b.push(v.to)):v.type==="spouse"&&((w=a.get(v.from))==null||w.push(v.to),(x=a.get(v.to))==null||x.push(v.from))});const l=new Map,u=new Set,d=[{id:e,generation:0}];for(l.set(e,0),u.add(e);d.length>0;){const{id:v,generation:y}=d.shift(),b=s.get(v)||[];for(const S of b)u.has(S)||(u.add(S),l.set(S,y-1),d.push({id:S,generation:y-1}));const w=o.get(v)||[];for(const S of w)u.has(S)||(u.add(S),l.set(S,y+1),d.push({id:S,generation:y+1}));const x=a.get(v)||[];for(const S of x)u.has(S)||(u.add(S),l.set(S,y),d.push({id:S,generation:y}))}n.forEach(v=>{l.has(v.id)||l.set(v.id,0)});const h=Math.min(...l.values()),f=new Map;l.forEach((v,y)=>{f.set(y,v-h)});function p(v,y,b=!1){const w=v?v.split(" ").map(E=>E[0]).join("").toUpperCase().slice(0,2):"?";let x,S;b?(x="%23d1d5db",S="%236b7280"):y?(x="%23fef3c7",S="%23b45309"):(x="%23e5e7eb",S="%23374151");const _=`<svg xmlns="http://www.w3.org/2000/svg" width="90" height="90" viewBox="0 0 90 90">
      <circle cx="45" cy="45" r="45" fill="${x}"/>
      <text x="45" y="55" text-anchor="middle" font-family="system-ui, sans-serif" font-size="28" font-weight="500" fill="${S}">${w}</text>
    </svg>`;return"data:image/svg+xml,"+encodeURIComponent(_)}const m=n.map(v=>{const y=f.get(v.id)||0,b=v.id===e,w=r[v.id]||!1;let x=v.name;w&&(x=v.name+" ");let S=[x],_="";v.genderSymbol&&(_+=v.genderSymbol+" "),v.age!==null&&(_+=v.age+" "),v.formattedBirthDate&&(_+=v.formattedBirthDate),_.trim()&&S.push(_.trim());const E=v.photo||p(v.name,b,w);let N="#d1d5db";return b?N="#f59e0b":w&&(N="#9ca3af"),{id:v.id,label:S.join(`
`),level:y,shape:"circularImage",image:E,size:45,font:{size:14,face:"system-ui, -apple-system, sans-serif",vadjust:8,color:w?"#6b7280":"#1f2937"},color:{border:N,background:"#ffffff",highlight:{border:"#f59e0b",background:"#fef3c7"}},borderWidth:b?3:2,data:{...v,isDeceased:w}}}),g=i.map((v,y)=>{const b=v.type==="spouse";return{id:`edge-${y}`,from:v.from,to:v.to,arrows:{to:{enabled:!1}},color:{color:b?"#ec4899":"#9ca3af",highlight:b?"#db2777":"#6b7280"},width:2,dashes:b?[5,5]:!1,smooth:!1,length:b?50:300}});return{nodes:m,edges:g}}function dFe(t){const e=new Map;return t.forEach(r=>{var s;const i=(((s=r.acf)==null?void 0:s.relationships)||[]).map(o=>{var u,d,h,f,p,m;let a="";o.relationship_slug?a=o.relationship_slug.toLowerCase():typeof o.relationship_type=="object"?a=((u=o.relationship_type)==null?void 0:u.slug)||((h=(d=o.relationship_type)==null?void 0:d.name)==null?void 0:h.toLowerCase())||"":typeof o.relationship_type=="string"&&(a=o.relationship_type.toLowerCase());let l=null;return typeof o.related_person=="object"?l=((f=o.related_person)==null?void 0:f.ID)||((p=o.related_person)==null?void 0:p.id)||((m=o.related_person)==null?void 0:m.term_id):(typeof o.related_person=="number"||typeof o.related_person=="string")&&(l=parseInt(o.related_person,10)),{related_person:l,relationship_type:o.relationship_type,relationship_type_slug:a,relationship_name:o.relationship_name||"",relationship_label:o.relationship_label||""}}).filter(o=>o.related_person);e.set(r.id,i)}),e}function hFe(t,e){const r=new Map;e.forEach(n=>{var i;r.set(n.id,n.slug||((i=n.name)==null?void 0:i.toLowerCase()))}),t.forEach(n=>{n.forEach(i=>{if(!i.relationship_type_slug&&i.relationship_type){const s=typeof i.relationship_type=="object"?i.relationship_type.term_id||i.relationship_type.id:i.relationship_type;i.relationship_type_slug=r.get(s)||""}})})}function fFe(){var p,m;const{id:t}=dh(),e=Fn(),r=parseInt(t,10),{data:n,isLoading:i}=lre(t),{data:s=[],isLoading:o}=Gc(),{data:a=[]}=st({queryKey:["relationship-types"],queryFn:async()=>(await He.getRelationshipTypes()).data}),l=k.useMemo(()=>s.map(g=>g.id).filter(Boolean),[s]),u=ly({queries:l.map(g=>({queryKey:["person-dates",g],queryFn:async()=>(await _e.getPersonDates(g)).data,enabled:!!g,staleTime:5*60*1e3}))}),d=k.useMemo(()=>{const g={};return u.forEach((v,y)=>{if(v.data&&l[y]){const b=l[y],w=v.data.some(x=>{const S=Array.isArray(x.date_type)?x.date_type[0]:x.date_type;return(S==null?void 0:S.toLowerCase())==="died"});g[b]=w}}),g},[u,l]);mh(n?`Family Tree - ${n.name||((p=n.title)==null?void 0:p.rendered)||n.title||"Person"}`:"Family Tree");const h=k.useMemo(()=>{if(!n||!s.length)return null;try{const g=dFe(s);a.length>0&&hFe(g,a);const v=cFe(r,s,g);return!v||v.nodes.length===0?null:uFe(v,r,d)}catch{return null}},[n,s,a,r,d]),f=g=>{e(`/people/${g}`)};return i||o?c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):n?c.jsxs("div",{className:"max-w-full mx-auto space-y-6",children:[c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs(Le,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[c.jsx(ph,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Back to Person"})]}),c.jsxs("h1",{className:"text-2xl font-bold",children:["Family Tree: ",n.name||((m=n.title)==null?void 0:m.rendered)||n.title||`Person ${t}`]})]})}),c.jsx("div",{className:"card p-6",children:c.jsx("div",{className:"w-full",style:{height:"800px"},children:h&&h.nodes&&h.nodes.length>0?c.jsx(nFe,{graphData:h,startPersonId:r,onNodeClick:f}):c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-500 mb-2",children:"No family relationships found."}),c.jsx("p",{className:"text-sm text-gray-400",children:"Add parent or child relationships to see the family tree."})]})})})})]}):c.jsxs("div",{className:"card p-6 text-center",children:[c.jsx("p",{className:"text-red-600 mb-4",children:"Failed to load person."}),c.jsx(Le,{to:"/people",className:"btn-secondary",children:"Back to People"})]})}function pFe({isOpen:t,onClose:e}){const r=Fn(),n=Xme(),{register:i,handleSubmit:s,reset:o,formState:{errors:a}}=Vs({defaultValues:{title:"",description:""}});k.useEffect(()=>{t&&o({title:"",description:""})},[t,o]);const l=async u=>{const d=await n.mutateAsync({title:u.title,content:u.description,status:"publish"});e(),r(`/workspaces/${d.id}`)};return t?c.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:e}),c.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:c.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-lg shadow-xl",children:[c.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Create Workspace"}),c.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:c.jsx(mt,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:s(l),children:[c.jsxs("div",{className:"px-6 py-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Workspace Name *"}),c.jsx("input",{type:"text",...i("title",{required:"Name is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., Sales Team"}),a.title&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.title.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),c.jsx("textarea",{...i("description"),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"What's this workspace for?"})]})]}),c.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:n.isPending,className:"btn-primary",children:n.isPending?"Creating...":"Create Workspace"})]})]})]})})]}):null}function mFe({role:t,isOwner:e}){if(e)return c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:[c.jsx(Gte,{className:"w-3 h-3"}),"Owner"]});const r={admin:{icon:jM,bg:"bg-purple-100",text:"text-purple-800",label:"Admin"},member:{icon:Pn,bg:"bg-blue-100",text:"text-blue-800",label:"Member"},viewer:{icon:Qte,bg:"bg-gray-100",text:"text-gray-800",label:"Viewer"}},n=r[t]||r.member,i=n.icon;return c.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 ${n.bg} ${n.text} text-xs rounded-full`,children:[c.jsx(i,{className:"w-3 h-3"}),n.label]})}function gFe({workspace:t}){return c.jsx(Le,{to:`/workspaces/${t.id}`,className:"card p-4 hover:shadow-md transition-shadow",children:c.jsx("div",{className:"flex items-start justify-between",children:c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h3",{className:"text-base font-medium text-gray-900 truncate",children:t.title}),t.description&&c.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:t.description}),c.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[c.jsx(mFe,{role:t.role,isOwner:t.is_owner}),c.jsxs("span",{className:"text-sm text-gray-500",children:[t.member_count," member",t.member_count!==1?"s":""]})]})]})})})}function yFe(){const[t,e]=k.useState(!1),{data:r,isLoading:n,error:i}=z0();return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Workspaces"}),c.jsxs("button",{onClick:()=>e(!0),className:"btn-primary",children:[c.jsx(or,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Create Workspace"})]})]}),n&&c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),i&&c.jsx("div",{className:"card p-6 text-center",children:c.jsx("p",{className:"text-red-600",children:"Failed to load workspaces."})}),!n&&!i&&(r==null?void 0:r.length)===0&&c.jsxs("div",{className:"card p-12 text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(Pn,{className:"w-6 h-6 text-gray-400"})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No workspaces yet"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Create a workspace to start collaborating with others."}),c.jsxs("button",{onClick:()=>e(!0),className:"btn-primary",children:[c.jsx(or,{className:"w-4 h-4 mr-2"}),"Create Workspace"]})]}),!n&&!i&&(r==null?void 0:r.length)>0&&c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(s=>c.jsx(gFe,{workspace:s},s.id))}),c.jsx(pFe,{isOpen:t,onClose:()=>e(!1)})]})}function vFe({isOpen:t,onClose:e,workspaceId:r,workspaceName:n}){var d,h,f;const i=nge(),{register:s,handleSubmit:o,reset:a,formState:{errors:l}}=Vs({defaultValues:{email:"",role:"member"}});k.useEffect(()=>{t&&a({email:"",role:"member"})},[t,a]);const u=async p=>{await i.mutateAsync({workspaceId:r,email:p.email,role:p.role}),e()};return t?c.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:e}),c.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:c.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-lg shadow-xl",children:[c.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Invite to Workspace"}),c.jsx("p",{className:"text-sm text-gray-500",children:n})]}),c.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:c.jsx(mt,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:o(u),children:[c.jsxs("div",{className:"px-6 py-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),c.jsxs("div",{className:"relative",children:[c.jsx(A0,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),c.jsx("input",{type:"email",...s("email",{required:"Email is required",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Invalid email address"}}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"colleague@example.com"})]}),l.email&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.email.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),c.jsxs("select",{...s("role"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[c.jsx("option",{value:"admin",children:"Admin - Can manage members and settings"}),c.jsx("option",{value:"member",children:"Member - Can view and edit contacts"}),c.jsx("option",{value:"viewer",children:"Viewer - Can only view contacts"})]})]}),i.isError&&c.jsx("p",{className:"text-sm text-red-600",children:((f=(h=(d=i.error)==null?void 0:d.response)==null?void 0:h.data)==null?void 0:f.message)||"Failed to send invitation"})]}),c.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:i.isPending,className:"btn-primary",children:i.isPending?"Sending...":"Send Invitation"})]})]})]})})]}):null}function bFe({role:t,isOwner:e,small:r=!1}){if(e)return c.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 bg-yellow-100 text-yellow-800 rounded-full ${r?"text-xs":"text-sm"}`,children:[c.jsx(Gte,{className:r?"w-3 h-3":"w-4 h-4"}),"Owner"]});const n={admin:{icon:jM,bg:"bg-purple-100",text:"text-purple-800",label:"Admin"},member:{icon:Pn,bg:"bg-blue-100",text:"text-blue-800",label:"Member"},viewer:{icon:Qte,bg:"bg-gray-100",text:"text-gray-600",label:"Viewer"}},i=n[t]||n.member,s=i.icon;return c.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 ${i.bg} ${i.text} rounded-full ${r?"text-xs":"text-sm"}`,children:[c.jsx(s,{className:r?"w-3 h-3":"w-4 h-4"}),i.label]})}function xFe({member:t,currentUserRole:e,onRemove:r,onChangeRole:n}){const[i,s]=k.useState(!1),o=e==="admin"||e==="owner",a=t.is_owner;return c.jsxs("div",{className:"flex items-center gap-3 p-3 hover:bg-gray-50",children:[c.jsx("img",{src:t.avatar_url,alt:t.display_name,className:"w-10 h-10 rounded-full"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.display_name}),c.jsx("div",{className:"text-xs text-gray-500",children:t.email})]}),c.jsx(bFe,{role:t.role,isOwner:t.is_owner,small:!0}),o&&!a&&c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>s(!i),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:c.jsx(ime,{className:"w-4 h-4"})}),i&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0",onClick:()=>s(!1)}),c.jsx("div",{className:"absolute right-0 mt-1 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-10",children:c.jsxs("div",{className:"py-1",children:[c.jsx("button",{onClick:()=>{n(t.user_id,"admin"),s(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50",children:"Make Admin"}),c.jsx("button",{onClick:()=>{n(t.user_id,"member"),s(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50",children:"Make Member"}),c.jsx("button",{onClick:()=>{n(t.user_id,"viewer"),s(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50",children:"Make Viewer"}),c.jsx("hr",{className:"my-1"}),c.jsxs("button",{onClick:()=>{r(t.user_id),s(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[c.jsx(ume,{className:"w-4 h-4"}),"Remove"]})]})})]})]})]})}function wFe({invite:t,onRevoke:e}){return c.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center",children:c.jsx($0,{className:"w-5 h-5 text-gray-400"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.email}),c.jsxs("div",{className:"text-xs text-gray-500",children:["Invited as ",t.role,"  Expires ",new Date(t.expires_at).toLocaleDateString()]})]}),c.jsx("span",{className:"px-2 py-0.5 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:"Pending"}),c.jsx("button",{onClick:()=>e(t.id),className:"p-2 text-gray-400 hover:text-red-600 rounded-full hover:bg-red-50",title:"Revoke invite",children:c.jsx(pn,{className:"w-4 h-4"})})]})}function SFe(){var y,b,w,x;const{id:t}=dh(),e=Fn(),[r,n]=k.useState(!1),{data:i,isLoading:s,error:o}=_re(t),{data:a=[]}=rge(t),l=ege(),u=tge(),d=ige(),h=async S=>{confirm("Remove this member from the workspace?")&&await l.mutateAsync({workspaceId:parseInt(t),userId:S})},f=async(S,_)=>{await u.mutateAsync({workspaceId:parseInt(t),userId:S,role:_})},p=async S=>{await d.mutateAsync({workspaceId:parseInt(t),inviteId:S})};if(s)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(o||!i)return c.jsxs("div",{className:"card p-6 text-center",children:[c.jsx("p",{className:"text-red-600",children:"Failed to load workspace."}),c.jsx(Le,{to:"/workspaces",className:"text-primary-600 hover:underline mt-2 inline-block",children:"Back to Workspaces"})]});const m=(y=i.current_user)!=null&&y.is_owner?"owner":(b=i.current_user)==null?void 0:b.role,g=m==="admin"||m==="owner",v=(w=i.current_user)==null?void 0:w.is_owner;return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{children:[c.jsxs("button",{onClick:()=>e("/workspaces"),className:"flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700 mb-2",children:[c.jsx(ph,{className:"w-4 h-4"}),"Back to Workspaces"]}),c.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:i.title}),i.description&&c.jsx("p",{className:"text-gray-500 mt-1",children:i.description})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[g&&c.jsxs("button",{onClick:()=>n(!0),className:"btn-primary",children:[c.jsx($0,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Invite"})]}),v&&c.jsxs(Le,{to:`/workspaces/${t}/settings`,className:"btn-secondary",children:[c.jsx(CM,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Settings"})]})]})]}),c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:c.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Members (",i.member_count,")"]})}),c.jsx("div",{className:"divide-y divide-gray-100",children:(x=i.members)==null?void 0:x.map(S=>c.jsx(xFe,{member:S,currentUserRole:m,onRemove:h,onChangeRole:f},S.user_id))})]}),g&&a.length>0&&c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:c.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Pending Invites (",a.length,")"]})}),c.jsx("div",{className:"divide-y divide-gray-100",children:a.map(S=>c.jsx(wFe,{invite:S,onRevoke:p},S.id))})]}),c.jsx(vFe,{isOpen:r,onClose:()=>n(!1),workspaceId:parseInt(t),workspaceName:i.title})]})}function _Fe(){var w;const{id:t}=dh(),e=Fn(),[r,n]=k.useState(!1),[i,s]=k.useState(""),{data:o,isLoading:a,error:l}=_re(t),u=Jme(),d=Zme(),{register:h,handleSubmit:f,reset:p,formState:{errors:m,isDirty:g}}=Vs();k.useEffect(()=>{o&&p({title:o.title,description:o.description||""})},[o,p]);const v=async x=>{await u.mutateAsync({id:parseInt(t),data:{title:x.title,content:x.description}})},y=async()=>{i===o.title&&(await d.mutateAsync(parseInt(t)),e("/workspaces"))};return a?c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):l||!o?c.jsxs("div",{className:"card p-6 text-center",children:[c.jsx("p",{className:"text-red-600",children:"Failed to load workspace."}),c.jsx(Le,{to:"/workspaces",className:"text-primary-600 hover:underline mt-2 inline-block",children:"Back to Workspaces"})]}):((w=o.current_user)==null?void 0:w.is_owner)?c.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[c.jsxs("div",{children:[c.jsxs("button",{onClick:()=>e(`/workspaces/${t}`),className:"flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700 mb-2",children:[c.jsx(ph,{className:"w-4 h-4"}),"Back to Workspace"]}),c.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Workspace Settings"}),c.jsx("p",{className:"text-gray-500 mt-1",children:o.title})]}),c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:c.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"General"})}),c.jsxs("form",{onSubmit:f(v),className:"p-6 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Workspace Name *"}),c.jsx("input",{type:"text",...h("title",{required:"Name is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),m.title&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.title.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),c.jsx("textarea",{...h("description"),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{type:"submit",disabled:!g||u.isPending,className:"btn-primary disabled:opacity-50",children:u.isPending?"Saving...":"Save Changes"})})]})]}),c.jsxs("div",{className:"card border-red-200",children:[c.jsx("div",{className:"px-6 py-4 border-b border-red-200 bg-red-50",children:c.jsxs("h2",{className:"text-lg font-medium text-red-900 flex items-center gap-2",children:[c.jsx(Vte,{className:"w-5 h-5"}),"Danger Zone"]})}),c.jsx("div",{className:"p-6",children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx(pn,{className:"w-6 h-6 text-red-600 flex-shrink-0"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-base font-medium text-gray-900",children:"Delete Workspace"}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"This will permanently delete the workspace and remove all member access. Contacts will remain but will no longer be shared via this workspace."}),r?c.jsxs("div",{className:"mt-4 p-4 bg-red-50 rounded-lg",children:[c.jsxs("p",{className:"text-sm text-red-800 mb-3",children:["Type ",c.jsx("strong",{children:o.title})," to confirm deletion:"]}),c.jsx("input",{type:"text",value:i,onChange:x=>s(x.target.value),className:"w-full px-3 py-2 border border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 mb-3",placeholder:"Type workspace name..."}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>{n(!1),s("")},className:"btn-secondary",children:"Cancel"}),c.jsx("button",{onClick:y,disabled:i!==o.title||d.isPending,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:d.isPending?"Deleting...":"Delete Forever"})]})]}):c.jsx("button",{onClick:()=>n(!0),className:"mt-4 px-4 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50",children:"Delete Workspace"})]})]})})]})]}):c.jsxs("div",{className:"card p-6 text-center",children:[c.jsx("p",{className:"text-gray-600",children:"Only workspace owners can access settings."}),c.jsx(Le,{to:`/workspaces/${t}`,className:"text-primary-600 hover:underline mt-2 inline-block",children:"Back to Workspace"})]})}function EFe(){var a,l,u,d,h;const{token:t}=dh(),e=Fn(),{data:r,isLoading:n,error:i}=sge(t),s=oge(),o=async()=>{try{const f=await s.mutateAsync(t);e(`/workspaces/${f.workspace_id}`)}catch{}};if(n)return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"card p-8 max-w-md w-full mx-4 text-center",children:[c.jsx(Do,{className:"w-8 h-8 text-primary-600 animate-spin mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Validating invitation..."})]})});if(i||!r){const f=((l=(a=i==null?void 0:i.response)==null?void 0:a.data)==null?void 0:l.message)||"This invitation is invalid or has expired.";return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"card p-8 max-w-md w-full mx-4 text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(pI,{className:"w-8 h-8 text-red-600"})}),c.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Invalid Invitation"}),c.jsx("p",{className:"text-gray-600 mb-6",children:f}),c.jsx(Le,{to:"/workspaces",className:"btn-primary inline-block",children:"Go to Workspaces"})]})})}return r.status==="accepted"?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"card p-8 max-w-md w-full mx-4 text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(Tc,{className:"w-8 h-8 text-green-600"})}),c.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Already Accepted"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"This invitation has already been accepted."}),c.jsx(Le,{to:`/workspaces/${r.workspace_id}`,className:"btn-primary inline-block",children:"Go to Workspace"})]})}):c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"card p-8 max-w-md w-full mx-4",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(Pn,{className:"w-8 h-8 text-primary-600"})}),c.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Workspace Invitation"})]}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"You have been invited to join"}),c.jsx("p",{className:"text-lg font-semibold text-gray-900",children:r.workspace_name})]}),c.jsx("hr",{className:"my-4 border-gray-200"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-500",children:"Invited by"}),c.jsx("p",{className:"font-medium text-gray-900",children:r.invited_by})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-500",children:"Your role"}),c.jsx("p",{className:"font-medium text-gray-900 capitalize",children:r.role})]})]}),c.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-sm text-gray-500",children:[c.jsx(Hte,{className:"w-4 h-4"}),"Expires ",new Date(r.expires_at).toLocaleDateString()]})]}),s.error&&c.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm text-red-600",children:((h=(d=(u=s.error)==null?void 0:u.response)==null?void 0:d.data)==null?void 0:h.message)||"Failed to accept invitation"})}),c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsx("button",{onClick:o,disabled:s.isPending,className:"btn-primary w-full justify-center",children:s.isPending?c.jsxs(c.Fragment,{children:[c.jsx(Do,{className:"w-4 h-4 animate-spin mr-2"}),"Joining..."]}):"Accept Invitation"}),c.jsx(Le,{to:"/workspaces",className:"btn-secondary w-full justify-center text-center",children:"Decline"})]}),c.jsxs("p",{className:"text-xs text-gray-500 text-center mt-4",children:["This invitation was sent to ",r.email]})]})})}function NFe(){const{loginUrl:t,isLoggedIn:e}=bM();return ire(),k.useEffect(()=>{e||(window.location.href=t)},[e,t]),c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Redirecting to login..."})]})})}function kFe({children:t}){const{data:e,isLoading:r,error:n}=st({queryKey:["current-user"],queryFn:async()=>(await _e.getCurrentUser()).data,retry:!1});return r?c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):n||!e?c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:c.jsx("div",{className:"max-w-md w-full mx-4",children:c.jsxs("div",{className:"card p-8 text-center",children:[c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:c.jsx(Ao,{className:"w-8 h-8 text-yellow-600"})})}),c.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Account Pending Approval"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Your account is pending approval by an administrator. You will receive an email notification once your account has been approved."}),c.jsx("p",{className:"text-sm text-gray-500",children:"If you have any questions, please contact your administrator."})]})})}):e!=null&&e.is_admin||e.is_approved?t:c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:c.jsx("div",{className:"max-w-md w-full mx-4",children:c.jsxs("div",{className:"card p-8 text-center",children:[c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:c.jsx(Ao,{className:"w-8 h-8 text-yellow-600"})})}),c.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Account Pending Approval"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Your account is pending approval by an administrator. You will receive an email notification once your account has been approved."}),c.jsx("p",{className:"text-sm text-gray-500",children:"If you have any questions, please contact your administrator."})]})})})}function CFe({children:t}){const{isLoggedIn:e,isLoading:r}=bM();return r?c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e?c.jsx(kFe,{children:t}):c.jsx(ete,{to:"/login",replace:!0})}function TFe(){const{hasUpdate:t,latestVersion:e,reload:r}=qpe();return t?c.jsx("div",{className:"fixed top-0 left-0 right-0 z-[100] bg-primary-600 text-white py-2 px-4 shadow-lg",children:c.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-center gap-4 text-sm",children:[c.jsxs("span",{children:["A new version (",e,") is available."]}),c.jsxs("button",{onClick:r,className:"inline-flex items-center gap-2 px-3 py-1 bg-white text-primary-600 rounded-md font-medium hover:bg-primary-50 transition-colors",children:[c.jsx(Jte,{className:"w-4 h-4"}),"Reload"]})]})}):null}function jFe(){return c.jsxs(c.Fragment,{children:[c.jsx(TFe,{}),c.jsxs(k4,{children:[c.jsx(jr,{path:"/login",element:c.jsx(NFe,{})}),c.jsx(jr,{path:"/*",element:c.jsx(CFe,{children:c.jsx(fge,{children:c.jsxs(k4,{children:[c.jsx(jr,{path:"/",element:c.jsx(cEe,{})}),c.jsx(jr,{path:"/people",element:c.jsx(dEe,{})}),c.jsx(jr,{path:"/people/:id/family-tree",element:c.jsx(fFe,{})}),c.jsx(jr,{path:"/people/:id",element:c.jsx(UEe,{})}),c.jsx(jr,{path:"/companies",element:c.jsx(KEe,{})}),c.jsx(jr,{path:"/companies/:id",element:c.jsx(GEe,{})}),c.jsx(jr,{path:"/dates",element:c.jsx(XEe,{})}),c.jsx(jr,{path:"/todos",element:c.jsx(JEe,{})}),c.jsx(jr,{path:"/settings",element:c.jsx(iNe,{})}),c.jsx(jr,{path:"/settings/relationship-types",element:c.jsx(uNe,{})}),c.jsx(jr,{path:"/settings/user-approval",element:c.jsx(dNe,{})}),c.jsx(jr,{path:"/workspaces",element:c.jsx(yFe,{})}),c.jsx(jr,{path:"/workspaces/:id",element:c.jsx(SFe,{})}),c.jsx(jr,{path:"/workspaces/:id/settings",element:c.jsx(_Fe,{})}),c.jsx(jr,{path:"/workspace-invite/:token",element:c.jsx(EFe,{})}),c.jsx(jr,{path:"*",element:c.jsx(ete,{to:"/",replace:!0})})]})})})})]})]})}const OFe=new sfe({defaultOptions:{queries:{staleTime:5*60*1e3,retry:1}}}),BO=document.getElementById("root");if(BO)try{zO.createRoot(BO).render(c.jsx(Se.StrictMode,{children:c.jsx(ofe,{client:OFe,children:c.jsx(Che,{children:c.jsx(jFe,{})})})}))}catch{BO.innerHTML='<div style="padding: 20px; color: red;"><h1>Error Loading Application</h1><p>Please check the browser console for details.</p></div>'}
