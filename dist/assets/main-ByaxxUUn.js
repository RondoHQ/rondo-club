var r4=t=>{throw TypeError(t)};var Tx=(t,e,r)=>e.has(t)||r4("Cannot "+r);var R=(t,e,r)=>(Tx(t,e,"read from private field"),r?r.call(t):e.get(t)),Ce=(t,e,r)=>e.has(t)?r4("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),de=(t,e,r,n)=>(Tx(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Le=(t,e,r)=>(Tx(t,e,"access private method"),r);var Ag=(t,e,r,n)=>({set _(s){de(t,e,s,r)},get _(){return R(t,e,n)}});function kue(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}function Ch(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var MZ={exports:{}},V0={},AZ={exports:{}},at={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var km=Symbol.for("react.element"),jue=Symbol.for("react.portal"),Tue=Symbol.for("react.fragment"),Oue=Symbol.for("react.strict_mode"),Pue=Symbol.for("react.profiler"),Iue=Symbol.for("react.provider"),Rue=Symbol.for("react.context"),Mue=Symbol.for("react.forward_ref"),Aue=Symbol.for("react.suspense"),Due=Symbol.for("react.memo"),$ue=Symbol.for("react.lazy"),n4=Symbol.iterator;function Fue(t){return t===null||typeof t!="object"?null:(t=n4&&t[n4]||t["@@iterator"],typeof t=="function"?t:null)}var DZ={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$Z=Object.assign,FZ={};function kh(t,e,r){this.props=t,this.context=e,this.refs=FZ,this.updater=r||DZ}kh.prototype.isReactComponent={};kh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};kh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function qZ(){}qZ.prototype=kh.prototype;function eM(t,e,r){this.props=t,this.context=e,this.refs=FZ,this.updater=r||DZ}var tM=eM.prototype=new qZ;tM.constructor=eM;$Z(tM,kh.prototype);tM.isPureReactComponent=!0;var s4=Array.isArray,LZ=Object.prototype.hasOwnProperty,rM={current:null},BZ={key:!0,ref:!0,__self:!0,__source:!0};function zZ(t,e,r){var n,s={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)LZ.call(e,n)&&!BZ.hasOwnProperty(n)&&(s[n]=e[n]);var a=arguments.length-2;if(a===1)s.children=r;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:km,type:t,key:i,ref:o,props:s,_owner:rM.current}}function que(t,e){return{$$typeof:km,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function nM(t){return typeof t=="object"&&t!==null&&t.$$typeof===km}function Lue(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var i4=/\/+/g;function Ox(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Lue(""+t.key):e.toString(36)}function Cy(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case km:case jue:o=!0}}if(o)return o=t,s=s(o),t=n===""?"."+Ox(o,0):n,s4(s)?(r="",t!=null&&(r=t.replace(i4,"$&/")+"/"),Cy(s,e,r,"",function(u){return u})):s!=null&&(nM(s)&&(s=que(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(i4,"$&/")+"/")+t)),e.push(s)),1;if(o=0,n=n===""?".":n+":",s4(t))for(var a=0;a<t.length;a++){i=t[a];var l=n+Ox(i,a);o+=Cy(i,e,r,l,s)}else if(l=Fue(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=n+Ox(i,a++),o+=Cy(i,e,r,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Dg(t,e,r){if(t==null)return t;var n=[],s=0;return Cy(t,n,"","",function(i){return e.call(r,i,s++)}),n}function Bue(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Hn={current:null},ky={transition:null},zue={ReactCurrentDispatcher:Hn,ReactCurrentBatchConfig:ky,ReactCurrentOwner:rM};function WZ(){throw Error("act(...) is not supported in production builds of React.")}at.Children={map:Dg,forEach:function(t,e,r){Dg(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Dg(t,function(){e++}),e},toArray:function(t){return Dg(t,function(e){return e})||[]},only:function(t){if(!nM(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};at.Component=kh;at.Fragment=Tue;at.Profiler=Pue;at.PureComponent=eM;at.StrictMode=Oue;at.Suspense=Aue;at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zue;at.act=WZ;at.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=$Z({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=rM.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)LZ.call(e,l)&&!BZ.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:km,type:t.type,key:s,ref:i,props:n,_owner:o}};at.createContext=function(t){return t={$$typeof:Rue,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Iue,_context:t},t.Consumer=t};at.createElement=zZ;at.createFactory=function(t){var e=zZ.bind(null,t);return e.type=t,e};at.createRef=function(){return{current:null}};at.forwardRef=function(t){return{$$typeof:Mue,render:t}};at.isValidElement=nM;at.lazy=function(t){return{$$typeof:$ue,_payload:{_status:-1,_result:t},_init:Bue}};at.memo=function(t,e){return{$$typeof:Due,type:t,compare:e===void 0?null:e}};at.startTransition=function(t){var e=ky.transition;ky.transition={};try{t()}finally{ky.transition=e}};at.unstable_act=WZ;at.useCallback=function(t,e){return Hn.current.useCallback(t,e)};at.useContext=function(t){return Hn.current.useContext(t)};at.useDebugValue=function(){};at.useDeferredValue=function(t){return Hn.current.useDeferredValue(t)};at.useEffect=function(t,e){return Hn.current.useEffect(t,e)};at.useId=function(){return Hn.current.useId()};at.useImperativeHandle=function(t,e,r){return Hn.current.useImperativeHandle(t,e,r)};at.useInsertionEffect=function(t,e){return Hn.current.useInsertionEffect(t,e)};at.useLayoutEffect=function(t,e){return Hn.current.useLayoutEffect(t,e)};at.useMemo=function(t,e){return Hn.current.useMemo(t,e)};at.useReducer=function(t,e,r){return Hn.current.useReducer(t,e,r)};at.useRef=function(t){return Hn.current.useRef(t)};at.useState=function(t){return Hn.current.useState(t)};at.useSyncExternalStore=function(t,e,r){return Hn.current.useSyncExternalStore(t,e,r)};at.useTransition=function(){return Hn.current.useTransition()};at.version="18.3.1";AZ.exports=at;var C=AZ.exports;const te=Ch(C),Wue=kue({__proto__:null,default:te},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vue=C,Uue=Symbol.for("react.element"),Hue=Symbol.for("react.fragment"),Kue=Object.prototype.hasOwnProperty,Gue=Vue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Yue={key:!0,ref:!0,__self:!0,__source:!0};function VZ(t,e,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Kue.call(e,n)&&!Yue.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:Uue,type:t,key:i,ref:o,props:s,_owner:Gue.current}}V0.Fragment=Hue;V0.jsx=VZ;V0.jsxs=VZ;MZ.exports=V0;var c=MZ.exports,EP={},UZ={exports:{}},Ts={},HZ={exports:{}},KZ={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,z){var Y=M.length;M.push(z);e:for(;0<Y;){var H=Y-1>>>1,me=M[H];if(0<s(me,z))M[H]=z,M[Y]=me,Y=H;else break e}}function r(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var z=M[0],Y=M.pop();if(Y!==z){M[0]=Y;e:for(var H=0,me=M.length,G=me>>>1;H<G;){var oe=2*(H+1)-1,Ie=M[oe],ce=oe+1,De=M[ce];if(0>s(Ie,Y))ce<me&&0>s(De,Ie)?(M[H]=De,M[ce]=Y,H=ce):(M[H]=Ie,M[oe]=Y,H=oe);else if(ce<me&&0>s(De,Y))M[H]=De,M[ce]=Y,H=ce;else break e}}return z}function s(M,z){var Y=M.sortIndex-z.sortIndex;return Y!==0?Y:M.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(M){for(var z=r(u);z!==null;){if(z.callback===null)n(u);else if(z.startTime<=M)n(u),z.sortIndex=z.expirationTime,e(l,z);else break;z=r(u)}}function x(M){if(g=!1,w(M),!m)if(r(l)!==null)m=!0,$(S);else{var z=r(u);z!==null&&q(x,z.startTime-M)}}function S(M,z){m=!1,g&&(g=!1,v(_),_=-1),p=!0;var Y=f;try{for(w(z),h=r(l);h!==null&&(!(h.expirationTime>z)||M&&!T());){var H=h.callback;if(typeof H=="function"){h.callback=null,f=h.priorityLevel;var me=H(h.expirationTime<=z);z=t.unstable_now(),typeof me=="function"?h.callback=me:h===r(l)&&n(l),w(z)}else n(l);h=r(l)}if(h!==null)var G=!0;else{var oe=r(u);oe!==null&&q(x,oe.startTime-z),G=!1}return G}finally{h=null,f=Y,p=!1}}var E=!1,N=null,_=-1,k=5,j=-1;function T(){return!(t.unstable_now()-j<k)}function P(){if(N!==null){var M=t.unstable_now();j=M;var z=!0;try{z=N(!0,M)}finally{z?O():(E=!1,N=null)}}else E=!1}var O;if(typeof b=="function")O=function(){b(P)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,F=D.port2;D.port1.onmessage=P,O=function(){F.postMessage(null)}}else O=function(){y(P,0)};function $(M){N=M,E||(E=!0,O())}function q(M,z){_=y(function(){M(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,$(S))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(M){switch(f){case 1:case 2:case 3:var z=3;break;default:z=f}var Y=f;f=z;try{return M()}finally{f=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,z){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var Y=f;f=M;try{return z()}finally{f=Y}},t.unstable_scheduleCallback=function(M,z,Y){var H=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?H+Y:H):Y=H,M){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=Y+me,M={id:d++,callback:z,priorityLevel:M,startTime:Y,expirationTime:me,sortIndex:-1},Y>H?(M.sortIndex=Y,e(u,M),r(l)===null&&M===r(u)&&(g?(v(_),_=-1):g=!0,q(x,Y-H))):(M.sortIndex=me,e(l,M),m||p||(m=!0,$(S))),M},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(M){var z=f;return function(){var Y=f;f=z;try{return M.apply(this,arguments)}finally{f=Y}}}})(KZ);HZ.exports=KZ;var Que=HZ.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xue=C,js=Que;function se(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var GZ=new Set,Cp={};function cu(t,e){Jd(t,e),Jd(t+"Capture",e)}function Jd(t,e){for(Cp[t]=e,t=0;t<e.length;t++)GZ.add(e[t])}var Yo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_P=Object.prototype.hasOwnProperty,Jue=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,o4={},a4={};function Zue(t){return _P.call(a4,t)?!0:_P.call(o4,t)?!1:Jue.test(t)?a4[t]=!0:(o4[t]=!0,!1)}function ede(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tde(t,e,r,n){if(e===null||typeof e>"u"||ede(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Kn(t,e,r,n,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var fn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){fn[t]=new Kn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];fn[e]=new Kn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){fn[t]=new Kn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){fn[t]=new Kn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){fn[t]=new Kn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){fn[t]=new Kn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){fn[t]=new Kn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){fn[t]=new Kn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){fn[t]=new Kn(t,5,!1,t.toLowerCase(),null,!1,!1)});var sM=/[\-:]([a-z])/g;function iM(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(sM,iM);fn[e]=new Kn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(sM,iM);fn[e]=new Kn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(sM,iM);fn[e]=new Kn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){fn[t]=new Kn(t,1,!1,t.toLowerCase(),null,!1,!1)});fn.xlinkHref=new Kn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){fn[t]=new Kn(t,1,!1,t.toLowerCase(),null,!0,!0)});function oM(t,e,r,n){var s=fn.hasOwnProperty(e)?fn[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tde(e,r,s,n)&&(r=null),n||s===null?Zue(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var ra=Xue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$g=Symbol.for("react.element"),td=Symbol.for("react.portal"),rd=Symbol.for("react.fragment"),aM=Symbol.for("react.strict_mode"),NP=Symbol.for("react.profiler"),YZ=Symbol.for("react.provider"),QZ=Symbol.for("react.context"),lM=Symbol.for("react.forward_ref"),CP=Symbol.for("react.suspense"),kP=Symbol.for("react.suspense_list"),cM=Symbol.for("react.memo"),Sa=Symbol.for("react.lazy"),XZ=Symbol.for("react.offscreen"),l4=Symbol.iterator;function vf(t){return t===null||typeof t!="object"?null:(t=l4&&t[l4]||t["@@iterator"],typeof t=="function"?t:null)}var Zt=Object.assign,Px;function Lf(t){if(Px===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Px=e&&e[1]||""}return`
`+Px+t}var Ix=!1;function Rx(t,e){if(!t||Ix)return"";Ix=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ix=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Lf(t):""}function rde(t){switch(t.tag){case 5:return Lf(t.type);case 16:return Lf("Lazy");case 13:return Lf("Suspense");case 19:return Lf("SuspenseList");case 0:case 2:case 15:return t=Rx(t.type,!1),t;case 11:return t=Rx(t.type.render,!1),t;case 1:return t=Rx(t.type,!0),t;default:return""}}function jP(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case rd:return"Fragment";case td:return"Portal";case NP:return"Profiler";case aM:return"StrictMode";case CP:return"Suspense";case kP:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case QZ:return(t.displayName||"Context")+".Consumer";case YZ:return(t._context.displayName||"Context")+".Provider";case lM:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case cM:return e=t.displayName||null,e!==null?e:jP(t.type)||"Memo";case Sa:e=t._payload,t=t._init;try{return jP(t(e))}catch{}}return null}function nde(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jP(e);case 8:return e===aM?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function bl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function JZ(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sde(t){var e=JZ(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Fg(t){t._valueTracker||(t._valueTracker=sde(t))}function ZZ(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=JZ(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function tv(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function TP(t,e){var r=e.checked;return Zt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function c4(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=bl(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function eee(t,e){e=e.checked,e!=null&&oM(t,"checked",e,!1)}function OP(t,e){eee(t,e);var r=bl(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?PP(t,e.type,r):e.hasOwnProperty("defaultValue")&&PP(t,e.type,bl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function u4(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function PP(t,e,r){(e!=="number"||tv(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Bf=Array.isArray;function wd(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+bl(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function IP(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(se(91));return Zt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function d4(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(se(92));if(Bf(r)){if(1<r.length)throw Error(se(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:bl(r)}}function tee(t,e){var r=bl(e.value),n=bl(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function h4(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ree(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function RP(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ree(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var qg,nee=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(qg=qg||document.createElement("div"),qg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qg.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function kp(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Jf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ide=["Webkit","ms","Moz","O"];Object.keys(Jf).forEach(function(t){ide.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Jf[e]=Jf[t]})});function see(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Jf.hasOwnProperty(t)&&Jf[t]?(""+e).trim():e+"px"}function iee(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=see(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var ode=Zt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function MP(t,e){if(e){if(ode[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(se(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(se(62))}}function AP(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var DP=null;function uM(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $P=null,Sd=null,Ed=null;function f4(t){if(t=Om(t)){if(typeof $P!="function")throw Error(se(280));var e=t.stateNode;e&&(e=Y0(e),$P(t.stateNode,t.type,e))}}function oee(t){Sd?Ed?Ed.push(t):Ed=[t]:Sd=t}function aee(){if(Sd){var t=Sd,e=Ed;if(Ed=Sd=null,f4(t),e)for(t=0;t<e.length;t++)f4(e[t])}}function lee(t,e){return t(e)}function cee(){}var Mx=!1;function uee(t,e,r){if(Mx)return t(e,r);Mx=!0;try{return lee(t,e,r)}finally{Mx=!1,(Sd!==null||Ed!==null)&&(cee(),aee())}}function jp(t,e){var r=t.stateNode;if(r===null)return null;var n=Y0(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(se(231,e,typeof r));return r}var FP=!1;if(Yo)try{var bf={};Object.defineProperty(bf,"passive",{get:function(){FP=!0}}),window.addEventListener("test",bf,bf),window.removeEventListener("test",bf,bf)}catch{FP=!1}function ade(t,e,r,n,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var Zf=!1,rv=null,nv=!1,qP=null,lde={onError:function(t){Zf=!0,rv=t}};function cde(t,e,r,n,s,i,o,a,l){Zf=!1,rv=null,ade.apply(lde,arguments)}function ude(t,e,r,n,s,i,o,a,l){if(cde.apply(this,arguments),Zf){if(Zf){var u=rv;Zf=!1,rv=null}else throw Error(se(198));nv||(nv=!0,qP=u)}}function uu(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function dee(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function p4(t){if(uu(t)!==t)throw Error(se(188))}function dde(t){var e=t.alternate;if(!e){if(e=uu(t),e===null)throw Error(se(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return p4(s),t;if(i===n)return p4(s),e;i=i.sibling}throw Error(se(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o)throw Error(se(189))}}if(r.alternate!==n)throw Error(se(190))}if(r.tag!==3)throw Error(se(188));return r.stateNode.current===r?t:e}function hee(t){return t=dde(t),t!==null?fee(t):null}function fee(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=fee(t);if(e!==null)return e;t=t.sibling}return null}var pee=js.unstable_scheduleCallback,m4=js.unstable_cancelCallback,hde=js.unstable_shouldYield,fde=js.unstable_requestPaint,gr=js.unstable_now,pde=js.unstable_getCurrentPriorityLevel,dM=js.unstable_ImmediatePriority,mee=js.unstable_UserBlockingPriority,sv=js.unstable_NormalPriority,mde=js.unstable_LowPriority,gee=js.unstable_IdlePriority,U0=null,Qi=null;function gde(t){if(Qi&&typeof Qi.onCommitFiberRoot=="function")try{Qi.onCommitFiberRoot(U0,t,void 0,(t.current.flags&128)===128)}catch{}}var Ei=Math.clz32?Math.clz32:bde,yde=Math.log,vde=Math.LN2;function bde(t){return t>>>=0,t===0?32:31-(yde(t)/vde|0)|0}var Lg=64,Bg=4194304;function zf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function iv(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~s;a!==0?n=zf(a):(i&=o,i!==0&&(n=zf(i)))}else o=r&~s,o!==0?n=zf(o):i!==0&&(n=zf(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Ei(e),s=1<<r,n|=t[r],e&=~s;return n}function xde(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wde(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ei(i),a=1<<o,l=s[o];l===-1?(!(a&r)||a&n)&&(s[o]=xde(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function LP(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function yee(){var t=Lg;return Lg<<=1,!(Lg&4194240)&&(Lg=64),t}function Ax(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function jm(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ei(e),t[e]=r}function Sde(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-Ei(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function hM(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Ei(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Ct=0;function vee(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bee,fM,xee,wee,See,BP=!1,zg=[],Ja=null,Za=null,el=null,Tp=new Map,Op=new Map,Oa=[],Ede="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function g4(t,e){switch(t){case"focusin":case"focusout":Ja=null;break;case"dragenter":case"dragleave":Za=null;break;case"mouseover":case"mouseout":el=null;break;case"pointerover":case"pointerout":Tp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Op.delete(e.pointerId)}}function xf(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Om(e),e!==null&&fM(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function _de(t,e,r,n,s){switch(e){case"focusin":return Ja=xf(Ja,t,e,r,n,s),!0;case"dragenter":return Za=xf(Za,t,e,r,n,s),!0;case"mouseover":return el=xf(el,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return Tp.set(i,xf(Tp.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Op.set(i,xf(Op.get(i)||null,t,e,r,n,s)),!0}return!1}function Eee(t){var e=ec(t.target);if(e!==null){var r=uu(e);if(r!==null){if(e=r.tag,e===13){if(e=dee(r),e!==null){t.blockedOn=e,See(t.priority,function(){xee(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function jy(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=zP(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);DP=n,r.target.dispatchEvent(n),DP=null}else return e=Om(r),e!==null&&fM(e),t.blockedOn=r,!1;e.shift()}return!0}function y4(t,e,r){jy(t)&&r.delete(e)}function Nde(){BP=!1,Ja!==null&&jy(Ja)&&(Ja=null),Za!==null&&jy(Za)&&(Za=null),el!==null&&jy(el)&&(el=null),Tp.forEach(y4),Op.forEach(y4)}function wf(t,e){t.blockedOn===e&&(t.blockedOn=null,BP||(BP=!0,js.unstable_scheduleCallback(js.unstable_NormalPriority,Nde)))}function Pp(t){function e(s){return wf(s,t)}if(0<zg.length){wf(zg[0],t);for(var r=1;r<zg.length;r++){var n=zg[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Ja!==null&&wf(Ja,t),Za!==null&&wf(Za,t),el!==null&&wf(el,t),Tp.forEach(e),Op.forEach(e),r=0;r<Oa.length;r++)n=Oa[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Oa.length&&(r=Oa[0],r.blockedOn===null);)Eee(r),r.blockedOn===null&&Oa.shift()}var _d=ra.ReactCurrentBatchConfig,ov=!0;function Cde(t,e,r,n){var s=Ct,i=_d.transition;_d.transition=null;try{Ct=1,pM(t,e,r,n)}finally{Ct=s,_d.transition=i}}function kde(t,e,r,n){var s=Ct,i=_d.transition;_d.transition=null;try{Ct=4,pM(t,e,r,n)}finally{Ct=s,_d.transition=i}}function pM(t,e,r,n){if(ov){var s=zP(t,e,r,n);if(s===null)Ux(t,e,n,av,r),g4(t,n);else if(_de(s,t,e,r,n))n.stopPropagation();else if(g4(t,n),e&4&&-1<Ede.indexOf(t)){for(;s!==null;){var i=Om(s);if(i!==null&&bee(i),i=zP(t,e,r,n),i===null&&Ux(t,e,n,av,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Ux(t,e,n,null,r)}}var av=null;function zP(t,e,r,n){if(av=null,t=uM(n),t=ec(t),t!==null)if(e=uu(t),e===null)t=null;else if(r=e.tag,r===13){if(t=dee(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return av=t,null}function _ee(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pde()){case dM:return 1;case mee:return 4;case sv:case mde:return 16;case gee:return 536870912;default:return 16}default:return 16}}var Ua=null,mM=null,Ty=null;function Nee(){if(Ty)return Ty;var t,e=mM,r=e.length,n,s="value"in Ua?Ua.value:Ua.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===s[i-n];n++);return Ty=s.slice(t,1<n?1-n:void 0)}function Oy(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Wg(){return!0}function v4(){return!1}function Os(t){function e(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Wg:v4,this.isPropagationStopped=v4,this}return Zt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Wg)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Wg)},persist:function(){},isPersistent:Wg}),e}var jh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gM=Os(jh),Tm=Zt({},jh,{view:0,detail:0}),jde=Os(Tm),Dx,$x,Sf,H0=Zt({},Tm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yM,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Sf&&(Sf&&t.type==="mousemove"?(Dx=t.screenX-Sf.screenX,$x=t.screenY-Sf.screenY):$x=Dx=0,Sf=t),Dx)},movementY:function(t){return"movementY"in t?t.movementY:$x}}),b4=Os(H0),Tde=Zt({},H0,{dataTransfer:0}),Ode=Os(Tde),Pde=Zt({},Tm,{relatedTarget:0}),Fx=Os(Pde),Ide=Zt({},jh,{animationName:0,elapsedTime:0,pseudoElement:0}),Rde=Os(Ide),Mde=Zt({},jh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ade=Os(Mde),Dde=Zt({},jh,{data:0}),x4=Os(Dde),$de={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fde={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qde={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lde(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=qde[t])?!!e[t]:!1}function yM(){return Lde}var Bde=Zt({},Tm,{key:function(t){if(t.key){var e=$de[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Oy(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Fde[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yM,charCode:function(t){return t.type==="keypress"?Oy(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Oy(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zde=Os(Bde),Wde=Zt({},H0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w4=Os(Wde),Vde=Zt({},Tm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yM}),Ude=Os(Vde),Hde=Zt({},jh,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kde=Os(Hde),Gde=Zt({},H0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Yde=Os(Gde),Qde=[9,13,27,32],vM=Yo&&"CompositionEvent"in window,ep=null;Yo&&"documentMode"in document&&(ep=document.documentMode);var Xde=Yo&&"TextEvent"in window&&!ep,Cee=Yo&&(!vM||ep&&8<ep&&11>=ep),S4=" ",E4=!1;function kee(t,e){switch(t){case"keyup":return Qde.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jee(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var nd=!1;function Jde(t,e){switch(t){case"compositionend":return jee(e);case"keypress":return e.which!==32?null:(E4=!0,S4);case"textInput":return t=e.data,t===S4&&E4?null:t;default:return null}}function Zde(t,e){if(nd)return t==="compositionend"||!vM&&kee(t,e)?(t=Nee(),Ty=mM=Ua=null,nd=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Cee&&e.locale!=="ko"?null:e.data;default:return null}}var ehe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _4(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ehe[t.type]:e==="textarea"}function Tee(t,e,r,n){oee(n),e=lv(e,"onChange"),0<e.length&&(r=new gM("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var tp=null,Ip=null;function the(t){Lee(t,0)}function K0(t){var e=od(t);if(ZZ(e))return t}function rhe(t,e){if(t==="change")return e}var Oee=!1;if(Yo){var qx;if(Yo){var Lx="oninput"in document;if(!Lx){var N4=document.createElement("div");N4.setAttribute("oninput","return;"),Lx=typeof N4.oninput=="function"}qx=Lx}else qx=!1;Oee=qx&&(!document.documentMode||9<document.documentMode)}function C4(){tp&&(tp.detachEvent("onpropertychange",Pee),Ip=tp=null)}function Pee(t){if(t.propertyName==="value"&&K0(Ip)){var e=[];Tee(e,Ip,t,uM(t)),uee(the,e)}}function nhe(t,e,r){t==="focusin"?(C4(),tp=e,Ip=r,tp.attachEvent("onpropertychange",Pee)):t==="focusout"&&C4()}function she(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return K0(Ip)}function ihe(t,e){if(t==="click")return K0(e)}function ohe(t,e){if(t==="input"||t==="change")return K0(e)}function ahe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ni=typeof Object.is=="function"?Object.is:ahe;function Rp(t,e){if(Ni(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!_P.call(e,s)||!Ni(t[s],e[s]))return!1}return!0}function k4(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function j4(t,e){var r=k4(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=k4(r)}}function Iee(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Iee(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ree(){for(var t=window,e=tv();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=tv(t.document)}return e}function bM(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function lhe(t){var e=Ree(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Iee(r.ownerDocument.documentElement,r)){if(n!==null&&bM(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=j4(r,i);var o=j4(r,n);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var che=Yo&&"documentMode"in document&&11>=document.documentMode,sd=null,WP=null,rp=null,VP=!1;function T4(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;VP||sd==null||sd!==tv(n)||(n=sd,"selectionStart"in n&&bM(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),rp&&Rp(rp,n)||(rp=n,n=lv(WP,"onSelect"),0<n.length&&(e=new gM("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=sd)))}function Vg(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var id={animationend:Vg("Animation","AnimationEnd"),animationiteration:Vg("Animation","AnimationIteration"),animationstart:Vg("Animation","AnimationStart"),transitionend:Vg("Transition","TransitionEnd")},Bx={},Mee={};Yo&&(Mee=document.createElement("div").style,"AnimationEvent"in window||(delete id.animationend.animation,delete id.animationiteration.animation,delete id.animationstart.animation),"TransitionEvent"in window||delete id.transitionend.transition);function G0(t){if(Bx[t])return Bx[t];if(!id[t])return t;var e=id[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Mee)return Bx[t]=e[r];return t}var Aee=G0("animationend"),Dee=G0("animationiteration"),$ee=G0("animationstart"),Fee=G0("transitionend"),qee=new Map,O4="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tl(t,e){qee.set(t,e),cu(e,[t])}for(var zx=0;zx<O4.length;zx++){var Wx=O4[zx],uhe=Wx.toLowerCase(),dhe=Wx[0].toUpperCase()+Wx.slice(1);Tl(uhe,"on"+dhe)}Tl(Aee,"onAnimationEnd");Tl(Dee,"onAnimationIteration");Tl($ee,"onAnimationStart");Tl("dblclick","onDoubleClick");Tl("focusin","onFocus");Tl("focusout","onBlur");Tl(Fee,"onTransitionEnd");Jd("onMouseEnter",["mouseout","mouseover"]);Jd("onMouseLeave",["mouseout","mouseover"]);Jd("onPointerEnter",["pointerout","pointerover"]);Jd("onPointerLeave",["pointerout","pointerover"]);cu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cu("onBeforeInput",["compositionend","keypress","textInput","paste"]);cu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hhe=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wf));function P4(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,ude(n,e,void 0,t),t.currentTarget=null}function Lee(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;P4(s,a,u),i=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;P4(s,a,u),i=l}}}if(nv)throw t=qP,nv=!1,qP=null,t}function Bt(t,e){var r=e[YP];r===void 0&&(r=e[YP]=new Set);var n=t+"__bubble";r.has(n)||(Bee(e,t,2,!1),r.add(n))}function Vx(t,e,r){var n=0;e&&(n|=4),Bee(r,t,n,e)}var Ug="_reactListening"+Math.random().toString(36).slice(2);function Mp(t){if(!t[Ug]){t[Ug]=!0,GZ.forEach(function(r){r!=="selectionchange"&&(hhe.has(r)||Vx(r,!1,t),Vx(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ug]||(e[Ug]=!0,Vx("selectionchange",!1,e))}}function Bee(t,e,r,n){switch(_ee(e)){case 1:var s=Cde;break;case 4:s=kde;break;default:s=pM}r=s.bind(null,e,r,t),s=void 0,!FP||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Ux(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ec(a),o===null)return;if(l=o.tag,l===5||l===6){n=i=o;continue e}a=a.parentNode}}n=n.return}uee(function(){var u=i,d=uM(r),h=[];e:{var f=qee.get(t);if(f!==void 0){var p=gM,m=t;switch(t){case"keypress":if(Oy(r)===0)break e;case"keydown":case"keyup":p=zde;break;case"focusin":m="focus",p=Fx;break;case"focusout":m="blur",p=Fx;break;case"beforeblur":case"afterblur":p=Fx;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=b4;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Ode;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Ude;break;case Aee:case Dee:case $ee:p=Rde;break;case Fee:p=Kde;break;case"scroll":p=jde;break;case"wheel":p=Yde;break;case"copy":case"cut":case"paste":p=Ade;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=w4}var g=(e&4)!==0,y=!g&&t==="scroll",v=g?f!==null?f+"Capture":null:f;g=[];for(var b=u,w;b!==null;){w=b;var x=w.stateNode;if(w.tag===5&&x!==null&&(w=x,v!==null&&(x=jp(b,v),x!=null&&g.push(Ap(b,x,w)))),y)break;b=b.return}0<g.length&&(f=new p(f,m,null,r,d),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&r!==DP&&(m=r.relatedTarget||r.fromElement)&&(ec(m)||m[Qo]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=u,m=m?ec(m):null,m!==null&&(y=uu(m),m!==y||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(g=b4,x="onMouseLeave",v="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=w4,x="onPointerLeave",v="onPointerEnter",b="pointer"),y=p==null?f:od(p),w=m==null?f:od(m),f=new g(x,b+"leave",p,r,d),f.target=y,f.relatedTarget=w,x=null,ec(d)===u&&(g=new g(v,b+"enter",m,r,d),g.target=w,g.relatedTarget=y,x=g),y=x,p&&m)t:{for(g=p,v=m,b=0,w=g;w;w=Lu(w))b++;for(w=0,x=v;x;x=Lu(x))w++;for(;0<b-w;)g=Lu(g),b--;for(;0<w-b;)v=Lu(v),w--;for(;b--;){if(g===v||v!==null&&g===v.alternate)break t;g=Lu(g),v=Lu(v)}g=null}else g=null;p!==null&&I4(h,f,p,g,!1),m!==null&&y!==null&&I4(h,y,m,g,!0)}}e:{if(f=u?od(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var S=rhe;else if(_4(f))if(Oee)S=ohe;else{S=she;var E=nhe}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=ihe);if(S&&(S=S(t,u))){Tee(h,S,r,d);break e}E&&E(t,f,u),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&PP(f,"number",f.value)}switch(E=u?od(u):window,t){case"focusin":(_4(E)||E.contentEditable==="true")&&(sd=E,WP=u,rp=null);break;case"focusout":rp=WP=sd=null;break;case"mousedown":VP=!0;break;case"contextmenu":case"mouseup":case"dragend":VP=!1,T4(h,r,d);break;case"selectionchange":if(che)break;case"keydown":case"keyup":T4(h,r,d)}var N;if(vM)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else nd?kee(t,r)&&(_="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(Cee&&r.locale!=="ko"&&(nd||_!=="onCompositionStart"?_==="onCompositionEnd"&&nd&&(N=Nee()):(Ua=d,mM="value"in Ua?Ua.value:Ua.textContent,nd=!0)),E=lv(u,_),0<E.length&&(_=new x4(_,t,null,r,d),h.push({event:_,listeners:E}),N?_.data=N:(N=jee(r),N!==null&&(_.data=N)))),(N=Xde?Jde(t,r):Zde(t,r))&&(u=lv(u,"onBeforeInput"),0<u.length&&(d=new x4("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=N))}Lee(h,e)})}function Ap(t,e,r){return{instance:t,listener:e,currentTarget:r}}function lv(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=jp(t,r),i!=null&&n.unshift(Ap(t,i,s)),i=jp(t,e),i!=null&&n.push(Ap(t,i,s))),t=t.return}return n}function Lu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function I4(t,e,r,n,s){for(var i=e._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,u=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&u!==null&&(a=u,s?(l=jp(r,i),l!=null&&o.unshift(Ap(r,l,a))):s||(l=jp(r,i),l!=null&&o.push(Ap(r,l,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var fhe=/\r\n?/g,phe=/\u0000|\uFFFD/g;function R4(t){return(typeof t=="string"?t:""+t).replace(fhe,`
`).replace(phe,"")}function Hg(t,e,r){if(e=R4(e),R4(t)!==e&&r)throw Error(se(425))}function cv(){}var UP=null,HP=null;function KP(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var GP=typeof setTimeout=="function"?setTimeout:void 0,mhe=typeof clearTimeout=="function"?clearTimeout:void 0,M4=typeof Promise=="function"?Promise:void 0,ghe=typeof queueMicrotask=="function"?queueMicrotask:typeof M4<"u"?function(t){return M4.resolve(null).then(t).catch(yhe)}:GP;function yhe(t){setTimeout(function(){throw t})}function Hx(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Pp(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Pp(e)}function tl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function A4(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Th=Math.random().toString(36).slice(2),Ui="__reactFiber$"+Th,Dp="__reactProps$"+Th,Qo="__reactContainer$"+Th,YP="__reactEvents$"+Th,vhe="__reactListeners$"+Th,bhe="__reactHandles$"+Th;function ec(t){var e=t[Ui];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Qo]||r[Ui]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=A4(t);t!==null;){if(r=t[Ui])return r;t=A4(t)}return e}t=r,r=t.parentNode}return null}function Om(t){return t=t[Ui]||t[Qo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function od(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(se(33))}function Y0(t){return t[Dp]||null}var QP=[],ad=-1;function Ol(t){return{current:t}}function Vt(t){0>ad||(t.current=QP[ad],QP[ad]=null,ad--)}function Lt(t,e){ad++,QP[ad]=t.current,t.current=e}var xl={},kn=Ol(xl),ls=Ol(!1),$c=xl;function Zd(t,e){var r=t.type.contextTypes;if(!r)return xl;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function cs(t){return t=t.childContextTypes,t!=null}function uv(){Vt(ls),Vt(kn)}function D4(t,e,r){if(kn.current!==xl)throw Error(se(168));Lt(kn,e),Lt(ls,r)}function zee(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(se(108,nde(t)||"Unknown",s));return Zt({},r,n)}function dv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||xl,$c=kn.current,Lt(kn,t),Lt(ls,ls.current),!0}function $4(t,e,r){var n=t.stateNode;if(!n)throw Error(se(169));r?(t=zee(t,e,$c),n.__reactInternalMemoizedMergedChildContext=t,Vt(ls),Vt(kn),Lt(kn,t)):Vt(ls),Lt(ls,r)}var Co=null,Q0=!1,Kx=!1;function Wee(t){Co===null?Co=[t]:Co.push(t)}function xhe(t){Q0=!0,Wee(t)}function Pl(){if(!Kx&&Co!==null){Kx=!0;var t=0,e=Ct;try{var r=Co;for(Ct=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Co=null,Q0=!1}catch(s){throw Co!==null&&(Co=Co.slice(t+1)),pee(dM,Pl),s}finally{Ct=e,Kx=!1}}return null}var ld=[],cd=0,hv=null,fv=0,Vs=[],Us=0,Fc=null,Io=1,Ro="";function Yl(t,e){ld[cd++]=fv,ld[cd++]=hv,hv=t,fv=e}function Vee(t,e,r){Vs[Us++]=Io,Vs[Us++]=Ro,Vs[Us++]=Fc,Fc=t;var n=Io;t=Ro;var s=32-Ei(n)-1;n&=~(1<<s),r+=1;var i=32-Ei(e)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Io=1<<32-Ei(e)+s|r<<s|n,Ro=i+t}else Io=1<<i|r<<s|n,Ro=t}function xM(t){t.return!==null&&(Yl(t,1),Vee(t,1,0))}function wM(t){for(;t===hv;)hv=ld[--cd],ld[cd]=null,fv=ld[--cd],ld[cd]=null;for(;t===Fc;)Fc=Vs[--Us],Vs[Us]=null,Ro=Vs[--Us],Vs[Us]=null,Io=Vs[--Us],Vs[Us]=null}var Cs=null,Ns=null,Ht=!1,yi=null;function Uee(t,e){var r=Ys(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function F4(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Cs=t,Ns=tl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Cs=t,Ns=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Fc!==null?{id:Io,overflow:Ro}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Ys(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Cs=t,Ns=null,!0):!1;default:return!1}}function XP(t){return(t.mode&1)!==0&&(t.flags&128)===0}function JP(t){if(Ht){var e=Ns;if(e){var r=e;if(!F4(t,e)){if(XP(t))throw Error(se(418));e=tl(r.nextSibling);var n=Cs;e&&F4(t,e)?Uee(n,r):(t.flags=t.flags&-4097|2,Ht=!1,Cs=t)}}else{if(XP(t))throw Error(se(418));t.flags=t.flags&-4097|2,Ht=!1,Cs=t}}}function q4(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Cs=t}function Kg(t){if(t!==Cs)return!1;if(!Ht)return q4(t),Ht=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!KP(t.type,t.memoizedProps)),e&&(e=Ns)){if(XP(t))throw Hee(),Error(se(418));for(;e;)Uee(t,e),e=tl(e.nextSibling)}if(q4(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(se(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Ns=tl(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Ns=null}}else Ns=Cs?tl(t.stateNode.nextSibling):null;return!0}function Hee(){for(var t=Ns;t;)t=tl(t.nextSibling)}function eh(){Ns=Cs=null,Ht=!1}function SM(t){yi===null?yi=[t]:yi.push(t)}var whe=ra.ReactCurrentBatchConfig;function Ef(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(se(309));var n=r.stateNode}if(!n)throw Error(se(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(se(284));if(!r._owner)throw Error(se(290,t))}return t}function Gg(t,e){throw t=Object.prototype.toString.call(e),Error(se(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function L4(t){var e=t._init;return e(t._payload)}function Kee(t){function e(v,b){if(t){var w=v.deletions;w===null?(v.deletions=[b],v.flags|=16):w.push(b)}}function r(v,b){if(!t)return null;for(;b!==null;)e(v,b),b=b.sibling;return null}function n(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function s(v,b){return v=il(v,b),v.index=0,v.sibling=null,v}function i(v,b,w){return v.index=w,t?(w=v.alternate,w!==null?(w=w.index,w<b?(v.flags|=2,b):w):(v.flags|=2,b)):(v.flags|=1048576,b)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,b,w,x){return b===null||b.tag!==6?(b=e1(w,v.mode,x),b.return=v,b):(b=s(b,w),b.return=v,b)}function l(v,b,w,x){var S=w.type;return S===rd?d(v,b,w.props.children,x,w.key):b!==null&&(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Sa&&L4(S)===b.type)?(x=s(b,w.props),x.ref=Ef(v,b,w),x.return=v,x):(x=$y(w.type,w.key,w.props,null,v.mode,x),x.ref=Ef(v,b,w),x.return=v,x)}function u(v,b,w,x){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=t1(w,v.mode,x),b.return=v,b):(b=s(b,w.children||[]),b.return=v,b)}function d(v,b,w,x,S){return b===null||b.tag!==7?(b=_c(w,v.mode,x,S),b.return=v,b):(b=s(b,w),b.return=v,b)}function h(v,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=e1(""+b,v.mode,w),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case $g:return w=$y(b.type,b.key,b.props,null,v.mode,w),w.ref=Ef(v,null,b),w.return=v,w;case td:return b=t1(b,v.mode,w),b.return=v,b;case Sa:var x=b._init;return h(v,x(b._payload),w)}if(Bf(b)||vf(b))return b=_c(b,v.mode,w,null),b.return=v,b;Gg(v,b)}return null}function f(v,b,w,x){var S=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(v,b,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case $g:return w.key===S?l(v,b,w,x):null;case td:return w.key===S?u(v,b,w,x):null;case Sa:return S=w._init,f(v,b,S(w._payload),x)}if(Bf(w)||vf(w))return S!==null?null:d(v,b,w,x,null);Gg(v,w)}return null}function p(v,b,w,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return v=v.get(w)||null,a(b,v,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case $g:return v=v.get(x.key===null?w:x.key)||null,l(b,v,x,S);case td:return v=v.get(x.key===null?w:x.key)||null,u(b,v,x,S);case Sa:var E=x._init;return p(v,b,w,E(x._payload),S)}if(Bf(x)||vf(x))return v=v.get(w)||null,d(b,v,x,S,null);Gg(b,x)}return null}function m(v,b,w,x){for(var S=null,E=null,N=b,_=b=0,k=null;N!==null&&_<w.length;_++){N.index>_?(k=N,N=null):k=N.sibling;var j=f(v,N,w[_],x);if(j===null){N===null&&(N=k);break}t&&N&&j.alternate===null&&e(v,N),b=i(j,b,_),E===null?S=j:E.sibling=j,E=j,N=k}if(_===w.length)return r(v,N),Ht&&Yl(v,_),S;if(N===null){for(;_<w.length;_++)N=h(v,w[_],x),N!==null&&(b=i(N,b,_),E===null?S=N:E.sibling=N,E=N);return Ht&&Yl(v,_),S}for(N=n(v,N);_<w.length;_++)k=p(N,v,_,w[_],x),k!==null&&(t&&k.alternate!==null&&N.delete(k.key===null?_:k.key),b=i(k,b,_),E===null?S=k:E.sibling=k,E=k);return t&&N.forEach(function(T){return e(v,T)}),Ht&&Yl(v,_),S}function g(v,b,w,x){var S=vf(w);if(typeof S!="function")throw Error(se(150));if(w=S.call(w),w==null)throw Error(se(151));for(var E=S=null,N=b,_=b=0,k=null,j=w.next();N!==null&&!j.done;_++,j=w.next()){N.index>_?(k=N,N=null):k=N.sibling;var T=f(v,N,j.value,x);if(T===null){N===null&&(N=k);break}t&&N&&T.alternate===null&&e(v,N),b=i(T,b,_),E===null?S=T:E.sibling=T,E=T,N=k}if(j.done)return r(v,N),Ht&&Yl(v,_),S;if(N===null){for(;!j.done;_++,j=w.next())j=h(v,j.value,x),j!==null&&(b=i(j,b,_),E===null?S=j:E.sibling=j,E=j);return Ht&&Yl(v,_),S}for(N=n(v,N);!j.done;_++,j=w.next())j=p(N,v,_,j.value,x),j!==null&&(t&&j.alternate!==null&&N.delete(j.key===null?_:j.key),b=i(j,b,_),E===null?S=j:E.sibling=j,E=j);return t&&N.forEach(function(P){return e(v,P)}),Ht&&Yl(v,_),S}function y(v,b,w,x){if(typeof w=="object"&&w!==null&&w.type===rd&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case $g:e:{for(var S=w.key,E=b;E!==null;){if(E.key===S){if(S=w.type,S===rd){if(E.tag===7){r(v,E.sibling),b=s(E,w.props.children),b.return=v,v=b;break e}}else if(E.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Sa&&L4(S)===E.type){r(v,E.sibling),b=s(E,w.props),b.ref=Ef(v,E,w),b.return=v,v=b;break e}r(v,E);break}else e(v,E);E=E.sibling}w.type===rd?(b=_c(w.props.children,v.mode,x,w.key),b.return=v,v=b):(x=$y(w.type,w.key,w.props,null,v.mode,x),x.ref=Ef(v,b,w),x.return=v,v=x)}return o(v);case td:e:{for(E=w.key;b!==null;){if(b.key===E)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){r(v,b.sibling),b=s(b,w.children||[]),b.return=v,v=b;break e}else{r(v,b);break}else e(v,b);b=b.sibling}b=t1(w,v.mode,x),b.return=v,v=b}return o(v);case Sa:return E=w._init,y(v,b,E(w._payload),x)}if(Bf(w))return m(v,b,w,x);if(vf(w))return g(v,b,w,x);Gg(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(r(v,b.sibling),b=s(b,w),b.return=v,v=b):(r(v,b),b=e1(w,v.mode,x),b.return=v,v=b),o(v)):r(v,b)}return y}var th=Kee(!0),Gee=Kee(!1),pv=Ol(null),mv=null,ud=null,EM=null;function _M(){EM=ud=mv=null}function NM(t){var e=pv.current;Vt(pv),t._currentValue=e}function ZP(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Nd(t,e){mv=t,EM=ud=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(is=!0),t.firstContext=null)}function ni(t){var e=t._currentValue;if(EM!==t)if(t={context:t,memoizedValue:e,next:null},ud===null){if(mv===null)throw Error(se(308));ud=t,mv.dependencies={lanes:0,firstContext:t}}else ud=ud.next=t;return e}var tc=null;function CM(t){tc===null?tc=[t]:tc.push(t)}function Yee(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,CM(e)):(r.next=s.next,s.next=r),e.interleaved=r,Xo(t,n)}function Xo(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Ea=!1;function kM(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qee(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $o(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function rl(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,yt&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Xo(t,r)}return s=n.interleaved,s===null?(e.next=e,CM(n)):(e.next=s.next,s.next=e),n.interleaved=e,Xo(t,r)}function Py(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,hM(t,r)}}function B4(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function gv(t,e,r,n){var s=t.updateQueue;Ea=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=u=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,g=a;switch(f=e,p=r,g.tag){case 1:if(m=g.payload,typeof m=="function"){h=m.call(p,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(p,h,f):m,f==null)break e;h=Zt({},h,f);break e;case 2:Ea=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=p,l=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Lc|=o,t.lanes=o,t.memoizedState=h}}function z4(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(se(191,s));s.call(n)}}}var Pm={},Xi=Ol(Pm),$p=Ol(Pm),Fp=Ol(Pm);function rc(t){if(t===Pm)throw Error(se(174));return t}function jM(t,e){switch(Lt(Fp,e),Lt($p,t),Lt(Xi,Pm),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:RP(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=RP(e,t)}Vt(Xi),Lt(Xi,e)}function rh(){Vt(Xi),Vt($p),Vt(Fp)}function Xee(t){rc(Fp.current);var e=rc(Xi.current),r=RP(e,t.type);e!==r&&(Lt($p,t),Lt(Xi,r))}function TM(t){$p.current===t&&(Vt(Xi),Vt($p))}var Yt=Ol(0);function yv(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Gx=[];function OM(){for(var t=0;t<Gx.length;t++)Gx[t]._workInProgressVersionPrimary=null;Gx.length=0}var Iy=ra.ReactCurrentDispatcher,Yx=ra.ReactCurrentBatchConfig,qc=0,Xt=null,$r=null,Ur=null,vv=!1,np=!1,qp=0,She=0;function bn(){throw Error(se(321))}function PM(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Ni(t[r],e[r]))return!1;return!0}function IM(t,e,r,n,s,i){if(qc=i,Xt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Iy.current=t===null||t.memoizedState===null?Che:khe,t=r(n,s),np){i=0;do{if(np=!1,qp=0,25<=i)throw Error(se(301));i+=1,Ur=$r=null,e.updateQueue=null,Iy.current=jhe,t=r(n,s)}while(np)}if(Iy.current=bv,e=$r!==null&&$r.next!==null,qc=0,Ur=$r=Xt=null,vv=!1,e)throw Error(se(300));return t}function RM(){var t=qp!==0;return qp=0,t}function Di(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ur===null?Xt.memoizedState=Ur=t:Ur=Ur.next=t,Ur}function si(){if($r===null){var t=Xt.alternate;t=t!==null?t.memoizedState:null}else t=$r.next;var e=Ur===null?Xt.memoizedState:Ur.next;if(e!==null)Ur=e,$r=t;else{if(t===null)throw Error(se(310));$r=t,t={memoizedState:$r.memoizedState,baseState:$r.baseState,baseQueue:$r.baseQueue,queue:$r.queue,next:null},Ur===null?Xt.memoizedState=Ur=t:Ur=Ur.next=t}return Ur}function Lp(t,e){return typeof e=="function"?e(t):e}function Qx(t){var e=si(),r=e.queue;if(r===null)throw Error(se(311));r.lastRenderedReducer=t;var n=$r,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var a=o=null,l=null,u=i;do{var d=u.lane;if((qc&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=n):l=l.next=h,Xt.lanes|=d,Lc|=d}u=u.next}while(u!==null&&u!==i);l===null?o=n:l.next=a,Ni(n,e.memoizedState)||(is=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,Xt.lanes|=i,Lc|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Xx(t){var e=si(),r=e.queue;if(r===null)throw Error(se(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Ni(i,e.memoizedState)||(is=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function Jee(){}function Zee(t,e){var r=Xt,n=si(),s=e(),i=!Ni(n.memoizedState,s);if(i&&(n.memoizedState=s,is=!0),n=n.queue,MM(rte.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||Ur!==null&&Ur.memoizedState.tag&1){if(r.flags|=2048,Bp(9,tte.bind(null,r,n,s,e),void 0,null),Gr===null)throw Error(se(349));qc&30||ete(r,e,s)}return s}function ete(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Xt.updateQueue,e===null?(e={lastEffect:null,stores:null},Xt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function tte(t,e,r,n){e.value=r,e.getSnapshot=n,nte(e)&&ste(t)}function rte(t,e,r){return r(function(){nte(e)&&ste(t)})}function nte(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Ni(t,r)}catch{return!0}}function ste(t){var e=Xo(t,1);e!==null&&_i(e,t,1,-1)}function W4(t){var e=Di();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lp,lastRenderedState:t},e.queue=t,t=t.dispatch=Nhe.bind(null,Xt,t),[e.memoizedState,t]}function Bp(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Xt.updateQueue,e===null?(e={lastEffect:null,stores:null},Xt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function ite(){return si().memoizedState}function Ry(t,e,r,n){var s=Di();Xt.flags|=t,s.memoizedState=Bp(1|e,r,void 0,n===void 0?null:n)}function X0(t,e,r,n){var s=si();n=n===void 0?null:n;var i=void 0;if($r!==null){var o=$r.memoizedState;if(i=o.destroy,n!==null&&PM(n,o.deps)){s.memoizedState=Bp(e,r,i,n);return}}Xt.flags|=t,s.memoizedState=Bp(1|e,r,i,n)}function V4(t,e){return Ry(8390656,8,t,e)}function MM(t,e){return X0(2048,8,t,e)}function ote(t,e){return X0(4,2,t,e)}function ate(t,e){return X0(4,4,t,e)}function lte(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function cte(t,e,r){return r=r!=null?r.concat([t]):null,X0(4,4,lte.bind(null,e,t),r)}function AM(){}function ute(t,e){var r=si();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&PM(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function dte(t,e){var r=si();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&PM(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function hte(t,e,r){return qc&21?(Ni(r,e)||(r=yee(),Xt.lanes|=r,Lc|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,is=!0),t.memoizedState=r)}function Ehe(t,e){var r=Ct;Ct=r!==0&&4>r?r:4,t(!0);var n=Yx.transition;Yx.transition={};try{t(!1),e()}finally{Ct=r,Yx.transition=n}}function fte(){return si().memoizedState}function _he(t,e,r){var n=sl(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},pte(t))mte(e,r);else if(r=Yee(t,e,r,n),r!==null){var s=Bn();_i(r,t,n,s),gte(r,e,n)}}function Nhe(t,e,r){var n=sl(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(pte(t))mte(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,r);if(s.hasEagerState=!0,s.eagerState=a,Ni(a,o)){var l=e.interleaved;l===null?(s.next=s,CM(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}r=Yee(t,e,s,n),r!==null&&(s=Bn(),_i(r,t,n,s),gte(r,e,n))}}function pte(t){var e=t.alternate;return t===Xt||e!==null&&e===Xt}function mte(t,e){np=vv=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function gte(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,hM(t,r)}}var bv={readContext:ni,useCallback:bn,useContext:bn,useEffect:bn,useImperativeHandle:bn,useInsertionEffect:bn,useLayoutEffect:bn,useMemo:bn,useReducer:bn,useRef:bn,useState:bn,useDebugValue:bn,useDeferredValue:bn,useTransition:bn,useMutableSource:bn,useSyncExternalStore:bn,useId:bn,unstable_isNewReconciler:!1},Che={readContext:ni,useCallback:function(t,e){return Di().memoizedState=[t,e===void 0?null:e],t},useContext:ni,useEffect:V4,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Ry(4194308,4,lte.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Ry(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ry(4,2,t,e)},useMemo:function(t,e){var r=Di();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Di();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=_he.bind(null,Xt,t),[n.memoizedState,t]},useRef:function(t){var e=Di();return t={current:t},e.memoizedState=t},useState:W4,useDebugValue:AM,useDeferredValue:function(t){return Di().memoizedState=t},useTransition:function(){var t=W4(!1),e=t[0];return t=Ehe.bind(null,t[1]),Di().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Xt,s=Di();if(Ht){if(r===void 0)throw Error(se(407));r=r()}else{if(r=e(),Gr===null)throw Error(se(349));qc&30||ete(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,V4(rte.bind(null,n,i,t),[t]),n.flags|=2048,Bp(9,tte.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=Di(),e=Gr.identifierPrefix;if(Ht){var r=Ro,n=Io;r=(n&~(1<<32-Ei(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=qp++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=She++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},khe={readContext:ni,useCallback:ute,useContext:ni,useEffect:MM,useImperativeHandle:cte,useInsertionEffect:ote,useLayoutEffect:ate,useMemo:dte,useReducer:Qx,useRef:ite,useState:function(){return Qx(Lp)},useDebugValue:AM,useDeferredValue:function(t){var e=si();return hte(e,$r.memoizedState,t)},useTransition:function(){var t=Qx(Lp)[0],e=si().memoizedState;return[t,e]},useMutableSource:Jee,useSyncExternalStore:Zee,useId:fte,unstable_isNewReconciler:!1},jhe={readContext:ni,useCallback:ute,useContext:ni,useEffect:MM,useImperativeHandle:cte,useInsertionEffect:ote,useLayoutEffect:ate,useMemo:dte,useReducer:Xx,useRef:ite,useState:function(){return Xx(Lp)},useDebugValue:AM,useDeferredValue:function(t){var e=si();return $r===null?e.memoizedState=t:hte(e,$r.memoizedState,t)},useTransition:function(){var t=Xx(Lp)[0],e=si().memoizedState;return[t,e]},useMutableSource:Jee,useSyncExternalStore:Zee,useId:fte,unstable_isNewReconciler:!1};function fi(t,e){if(t&&t.defaultProps){e=Zt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function eI(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Zt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var J0={isMounted:function(t){return(t=t._reactInternals)?uu(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Bn(),s=sl(t),i=$o(n,s);i.payload=e,r!=null&&(i.callback=r),e=rl(t,i,s),e!==null&&(_i(e,t,s,n),Py(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Bn(),s=sl(t),i=$o(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=rl(t,i,s),e!==null&&(_i(e,t,s,n),Py(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Bn(),n=sl(t),s=$o(r,n);s.tag=2,e!=null&&(s.callback=e),e=rl(t,s,n),e!==null&&(_i(e,t,n,r),Py(e,t,n))}};function U4(t,e,r,n,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!Rp(r,n)||!Rp(s,i):!0}function yte(t,e,r){var n=!1,s=xl,i=e.contextType;return typeof i=="object"&&i!==null?i=ni(i):(s=cs(e)?$c:kn.current,n=e.contextTypes,i=(n=n!=null)?Zd(t,s):xl),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=J0,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function H4(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&J0.enqueueReplaceState(e,e.state,null)}function tI(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},kM(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ni(i):(i=cs(e)?$c:kn.current,s.context=Zd(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(eI(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&J0.enqueueReplaceState(s,s.state,null),gv(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function nh(t,e){try{var r="",n=e;do r+=rde(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Jx(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function rI(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var The=typeof WeakMap=="function"?WeakMap:Map;function vte(t,e,r){r=$o(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){wv||(wv=!0,hI=n),rI(t,e)},r}function bte(t,e,r){r=$o(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){rI(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){rI(t,e),typeof n!="function"&&(nl===null?nl=new Set([this]):nl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function K4(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new The;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=Whe.bind(null,t,e,r),e.then(t,t))}function G4(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Y4(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=$o(-1,1),e.tag=2,rl(r,e,1))),r.lanes|=1),t)}var Ohe=ra.ReactCurrentOwner,is=!1;function In(t,e,r,n){e.child=t===null?Gee(e,null,r,n):th(e,t.child,r,n)}function Q4(t,e,r,n,s){r=r.render;var i=e.ref;return Nd(e,s),n=IM(t,e,r,n,i,s),r=RM(),t!==null&&!is?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Jo(t,e,s)):(Ht&&r&&xM(e),e.flags|=1,In(t,e,n,s),e.child)}function X4(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!WM(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,xte(t,e,i,n,s)):(t=$y(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Rp,r(o,n)&&t.ref===e.ref)return Jo(t,e,s)}return e.flags|=1,t=il(i,n),t.ref=e.ref,t.return=e,e.child=t}function xte(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(Rp(i,n)&&t.ref===e.ref)if(is=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(is=!0);else return e.lanes=t.lanes,Jo(t,e,s)}return nI(t,e,r,n,s)}function wte(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Lt(hd,ws),ws|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Lt(hd,ws),ws|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Lt(hd,ws),ws|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,Lt(hd,ws),ws|=n;return In(t,e,s,r),e.child}function Ste(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function nI(t,e,r,n,s){var i=cs(r)?$c:kn.current;return i=Zd(e,i),Nd(e,s),r=IM(t,e,r,n,i,s),n=RM(),t!==null&&!is?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Jo(t,e,s)):(Ht&&n&&xM(e),e.flags|=1,In(t,e,r,s),e.child)}function J4(t,e,r,n,s){if(cs(r)){var i=!0;dv(e)}else i=!1;if(Nd(e,s),e.stateNode===null)My(t,e),yte(e,r,n),tI(e,r,n,s),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=ni(u):(u=cs(r)?$c:kn.current,u=Zd(e,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==u)&&H4(e,o,n,u),Ea=!1;var f=e.memoizedState;o.state=f,gv(e,n,o,s),l=e.memoizedState,a!==n||f!==l||ls.current||Ea?(typeof d=="function"&&(eI(e,r,d,n),l=e.memoizedState),(a=Ea||U4(e,r,a,n,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=u,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,Qee(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:fi(e.type,a),o.props=u,h=e.pendingProps,f=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=ni(l):(l=cs(r)?$c:kn.current,l=Zd(e,l));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&H4(e,o,n,l),Ea=!1,f=e.memoizedState,o.state=f,gv(e,n,o,s);var m=e.memoizedState;a!==h||f!==m||ls.current||Ea?(typeof p=="function"&&(eI(e,r,p,n),m=e.memoizedState),(u=Ea||U4(e,r,u,n,f,m,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return sI(t,e,r,n,i,s)}function sI(t,e,r,n,s,i){Ste(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&$4(e,r,!1),Jo(t,e,i);n=e.stateNode,Ohe.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=th(e,t.child,null,i),e.child=th(e,null,a,i)):In(t,e,a,i),e.memoizedState=n.state,s&&$4(e,r,!0),e.child}function Ete(t){var e=t.stateNode;e.pendingContext?D4(t,e.pendingContext,e.pendingContext!==e.context):e.context&&D4(t,e.context,!1),jM(t,e.containerInfo)}function Z4(t,e,r,n,s){return eh(),SM(s),e.flags|=256,In(t,e,r,n),e.child}var iI={dehydrated:null,treeContext:null,retryLane:0};function oI(t){return{baseLanes:t,cachePool:null,transitions:null}}function _te(t,e,r){var n=e.pendingProps,s=Yt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Lt(Yt,s&1),t===null)return JP(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=tb(o,n,0,null),t=_c(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=oI(r),e.memoizedState=iI,t):DM(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Phe(t,e,o,n,a,s,r);if(i){i=n.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=il(s,l),n.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=il(a,i):(i=_c(i,o,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=t.child.memoizedState,o=o===null?oI(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~r,e.memoizedState=iI,n}return i=t.child,t=i.sibling,n=il(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function DM(t,e){return e=tb({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Yg(t,e,r,n){return n!==null&&SM(n),th(e,t.child,null,r),t=DM(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Phe(t,e,r,n,s,i,o){if(r)return e.flags&256?(e.flags&=-257,n=Jx(Error(se(422))),Yg(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=tb({mode:"visible",children:n.children},s,0,null),i=_c(i,s,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&th(e,t.child,null,o),e.child.memoizedState=oI(o),e.memoizedState=iI,i);if(!(e.mode&1))return Yg(t,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var a=n.dgst;return n=a,i=Error(se(419)),n=Jx(i,n,void 0),Yg(t,e,o,n)}if(a=(o&t.childLanes)!==0,is||a){if(n=Gr,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Xo(t,s),_i(n,t,s,-1))}return zM(),n=Jx(Error(se(421))),Yg(t,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Vhe.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ns=tl(s.nextSibling),Cs=e,Ht=!0,yi=null,t!==null&&(Vs[Us++]=Io,Vs[Us++]=Ro,Vs[Us++]=Fc,Io=t.id,Ro=t.overflow,Fc=e),e=DM(e,n.children),e.flags|=4096,e)}function e5(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),ZP(t.return,e,r)}function Zx(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function Nte(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(In(t,e,n.children,r),n=Yt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&e5(t,r,e);else if(t.tag===19)e5(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Lt(Yt,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&yv(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Zx(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&yv(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Zx(e,!0,r,null,i);break;case"together":Zx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function My(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Jo(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Lc|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(se(153));if(e.child!==null){for(t=e.child,r=il(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=il(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Ihe(t,e,r){switch(e.tag){case 3:Ete(e),eh();break;case 5:Xee(e);break;case 1:cs(e.type)&&dv(e);break;case 4:jM(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;Lt(pv,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Lt(Yt,Yt.current&1),e.flags|=128,null):r&e.child.childLanes?_te(t,e,r):(Lt(Yt,Yt.current&1),t=Jo(t,e,r),t!==null?t.sibling:null);Lt(Yt,Yt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Nte(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Lt(Yt,Yt.current),n)break;return null;case 22:case 23:return e.lanes=0,wte(t,e,r)}return Jo(t,e,r)}var Cte,aI,kte,jte;Cte=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};aI=function(){};kte=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,rc(Xi.current);var i=null;switch(r){case"input":s=TP(t,s),n=TP(t,n),i=[];break;case"select":s=Zt({},s,{value:void 0}),n=Zt({},n,{value:void 0}),i=[];break;case"textarea":s=IP(t,s),n=IP(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=cv)}MP(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Cp.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var l=n[u];if(a=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(i||(i=[]),i.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Cp.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Bt("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}r&&(i=i||[]).push("style",r);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};jte=function(t,e,r,n){r!==n&&(e.flags|=4)};function _f(t,e){if(!Ht)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function xn(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Rhe(t,e,r){var n=e.pendingProps;switch(wM(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xn(e),null;case 1:return cs(e.type)&&uv(),xn(e),null;case 3:return n=e.stateNode,rh(),Vt(ls),Vt(kn),OM(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Kg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,yi!==null&&(mI(yi),yi=null))),aI(t,e),xn(e),null;case 5:TM(e);var s=rc(Fp.current);if(r=e.type,t!==null&&e.stateNode!=null)kte(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(se(166));return xn(e),null}if(t=rc(Xi.current),Kg(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[Ui]=e,n[Dp]=i,t=(e.mode&1)!==0,r){case"dialog":Bt("cancel",n),Bt("close",n);break;case"iframe":case"object":case"embed":Bt("load",n);break;case"video":case"audio":for(s=0;s<Wf.length;s++)Bt(Wf[s],n);break;case"source":Bt("error",n);break;case"img":case"image":case"link":Bt("error",n),Bt("load",n);break;case"details":Bt("toggle",n);break;case"input":c4(n,i),Bt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Bt("invalid",n);break;case"textarea":d4(n,i),Bt("invalid",n)}MP(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?n.textContent!==a&&(i.suppressHydrationWarning!==!0&&Hg(n.textContent,a,t),s=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Hg(n.textContent,a,t),s=["children",""+a]):Cp.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Bt("scroll",n)}switch(r){case"input":Fg(n),u4(n,i,!0);break;case"textarea":Fg(n),h4(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=cv)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ree(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Ui]=e,t[Dp]=n,Cte(t,e,!1,!1),e.stateNode=t;e:{switch(o=AP(r,n),r){case"dialog":Bt("cancel",t),Bt("close",t),s=n;break;case"iframe":case"object":case"embed":Bt("load",t),s=n;break;case"video":case"audio":for(s=0;s<Wf.length;s++)Bt(Wf[s],t);s=n;break;case"source":Bt("error",t),s=n;break;case"img":case"image":case"link":Bt("error",t),Bt("load",t),s=n;break;case"details":Bt("toggle",t),s=n;break;case"input":c4(t,n),s=TP(t,n),Bt("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=Zt({},n,{value:void 0}),Bt("invalid",t);break;case"textarea":d4(t,n),s=IP(t,n),Bt("invalid",t);break;default:s=n}MP(r,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?iee(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&nee(t,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&kp(t,l):typeof l=="number"&&kp(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Cp.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Bt("scroll",t):l!=null&&oM(t,i,l,o))}switch(r){case"input":Fg(t),u4(t,n,!1);break;case"textarea":Fg(t),h4(t);break;case"option":n.value!=null&&t.setAttribute("value",""+bl(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?wd(t,!!n.multiple,i,!1):n.defaultValue!=null&&wd(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=cv)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xn(e),null;case 6:if(t&&e.stateNode!=null)jte(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(se(166));if(r=rc(Fp.current),rc(Xi.current),Kg(e)){if(n=e.stateNode,r=e.memoizedProps,n[Ui]=e,(i=n.nodeValue!==r)&&(t=Cs,t!==null))switch(t.tag){case 3:Hg(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Hg(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ui]=e,e.stateNode=n}return xn(e),null;case 13:if(Vt(Yt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ht&&Ns!==null&&e.mode&1&&!(e.flags&128))Hee(),eh(),e.flags|=98560,i=!1;else if(i=Kg(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(se(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(se(317));i[Ui]=e}else eh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xn(e),i=!1}else yi!==null&&(mI(yi),yi=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Yt.current&1?Fr===0&&(Fr=3):zM())),e.updateQueue!==null&&(e.flags|=4),xn(e),null);case 4:return rh(),aI(t,e),t===null&&Mp(e.stateNode.containerInfo),xn(e),null;case 10:return NM(e.type._context),xn(e),null;case 17:return cs(e.type)&&uv(),xn(e),null;case 19:if(Vt(Yt),i=e.memoizedState,i===null)return xn(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)_f(i,!1);else{if(Fr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=yv(t),o!==null){for(e.flags|=128,_f(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Lt(Yt,Yt.current&1|2),e.child}t=t.sibling}i.tail!==null&&gr()>sh&&(e.flags|=128,n=!0,_f(i,!1),e.lanes=4194304)}else{if(!n)if(t=yv(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),_f(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ht)return xn(e),null}else 2*gr()-i.renderingStartTime>sh&&r!==1073741824&&(e.flags|=128,n=!0,_f(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(r=i.last,r!==null?r.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=gr(),e.sibling=null,r=Yt.current,Lt(Yt,n?r&1|2:r&1),e):(xn(e),null);case 22:case 23:return BM(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?ws&1073741824&&(xn(e),e.subtreeFlags&6&&(e.flags|=8192)):xn(e),null;case 24:return null;case 25:return null}throw Error(se(156,e.tag))}function Mhe(t,e){switch(wM(e),e.tag){case 1:return cs(e.type)&&uv(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return rh(),Vt(ls),Vt(kn),OM(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return TM(e),null;case 13:if(Vt(Yt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(se(340));eh()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Vt(Yt),null;case 4:return rh(),null;case 10:return NM(e.type._context),null;case 22:case 23:return BM(),null;case 24:return null;default:return null}}var Qg=!1,_n=!1,Ahe=typeof WeakSet=="function"?WeakSet:Set,ke=null;function dd(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){or(t,e,n)}else r.current=null}function lI(t,e,r){try{r()}catch(n){or(t,e,n)}}var t5=!1;function Dhe(t,e){if(UP=ov,t=Ree(),bM(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==r||s!==0&&h.nodeType!==3||(a=o+s),h!==i||n!==0&&h.nodeType!==3||(l=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===r&&++u===s&&(a=o),f===i&&++d===n&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(HP={focusedElem:t,selectionRange:r},ov=!1,ke=e;ke!==null;)if(e=ke,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ke=t;else for(;ke!==null;){e=ke;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,y=m.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:fi(e.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(x){or(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,ke=t;break}ke=e.return}return m=t5,t5=!1,m}function sp(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&lI(e,r,i)}s=s.next}while(s!==n)}}function Z0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function cI(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Tte(t){var e=t.alternate;e!==null&&(t.alternate=null,Tte(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ui],delete e[Dp],delete e[YP],delete e[vhe],delete e[bhe])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ote(t){return t.tag===5||t.tag===3||t.tag===4}function r5(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ote(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function uI(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=cv));else if(n!==4&&(t=t.child,t!==null))for(uI(t,e,r),t=t.sibling;t!==null;)uI(t,e,r),t=t.sibling}function dI(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(dI(t,e,r),t=t.sibling;t!==null;)dI(t,e,r),t=t.sibling}var ln=null,gi=!1;function fa(t,e,r){for(r=r.child;r!==null;)Pte(t,e,r),r=r.sibling}function Pte(t,e,r){if(Qi&&typeof Qi.onCommitFiberUnmount=="function")try{Qi.onCommitFiberUnmount(U0,r)}catch{}switch(r.tag){case 5:_n||dd(r,e);case 6:var n=ln,s=gi;ln=null,fa(t,e,r),ln=n,gi=s,ln!==null&&(gi?(t=ln,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):ln.removeChild(r.stateNode));break;case 18:ln!==null&&(gi?(t=ln,r=r.stateNode,t.nodeType===8?Hx(t.parentNode,r):t.nodeType===1&&Hx(t,r),Pp(t)):Hx(ln,r.stateNode));break;case 4:n=ln,s=gi,ln=r.stateNode.containerInfo,gi=!0,fa(t,e,r),ln=n,gi=s;break;case 0:case 11:case 14:case 15:if(!_n&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&lI(r,e,o),s=s.next}while(s!==n)}fa(t,e,r);break;case 1:if(!_n&&(dd(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){or(r,e,a)}fa(t,e,r);break;case 21:fa(t,e,r);break;case 22:r.mode&1?(_n=(n=_n)||r.memoizedState!==null,fa(t,e,r),_n=n):fa(t,e,r);break;default:fa(t,e,r)}}function n5(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Ahe),e.forEach(function(n){var s=Uhe.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function ui(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ln=a.stateNode,gi=!1;break e;case 3:ln=a.stateNode.containerInfo,gi=!0;break e;case 4:ln=a.stateNode.containerInfo,gi=!0;break e}a=a.return}if(ln===null)throw Error(se(160));Pte(i,o,s),ln=null,gi=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){or(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ite(e,t),e=e.sibling}function Ite(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ui(e,t),Mi(t),n&4){try{sp(3,t,t.return),Z0(3,t)}catch(g){or(t,t.return,g)}try{sp(5,t,t.return)}catch(g){or(t,t.return,g)}}break;case 1:ui(e,t),Mi(t),n&512&&r!==null&&dd(r,r.return);break;case 5:if(ui(e,t),Mi(t),n&512&&r!==null&&dd(r,r.return),t.flags&32){var s=t.stateNode;try{kp(s,"")}catch(g){or(t,t.return,g)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=r!==null?r.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&eee(s,i),AP(a,o);var u=AP(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?iee(s,h):d==="dangerouslySetInnerHTML"?nee(s,h):d==="children"?kp(s,h):oM(s,d,h,u)}switch(a){case"input":OP(s,i);break;case"textarea":tee(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?wd(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?wd(s,!!i.multiple,i.defaultValue,!0):wd(s,!!i.multiple,i.multiple?[]:"",!1))}s[Dp]=i}catch(g){or(t,t.return,g)}}break;case 6:if(ui(e,t),Mi(t),n&4){if(t.stateNode===null)throw Error(se(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){or(t,t.return,g)}}break;case 3:if(ui(e,t),Mi(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Pp(e.containerInfo)}catch(g){or(t,t.return,g)}break;case 4:ui(e,t),Mi(t);break;case 13:ui(e,t),Mi(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(qM=gr())),n&4&&n5(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(_n=(u=_n)||d,ui(e,t),_n=u):ui(e,t),Mi(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(ke=t,d=t.child;d!==null;){for(h=ke=d;ke!==null;){switch(f=ke,p=f.child,f.tag){case 0:case 11:case 14:case 15:sp(4,f,f.return);break;case 1:dd(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){or(n,r,g)}}break;case 5:dd(f,f.return);break;case 22:if(f.memoizedState!==null){i5(h);continue}}p!==null?(p.return=f,ke=p):i5(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=see("display",o))}catch(g){or(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){or(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ui(e,t),Mi(t),n&4&&n5(t);break;case 21:break;default:ui(e,t),Mi(t)}}function Mi(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Ote(r)){var n=r;break e}r=r.return}throw Error(se(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(kp(s,""),n.flags&=-33);var i=r5(t);dI(t,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,a=r5(t);uI(t,a,o);break;default:throw Error(se(161))}}catch(l){or(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function $he(t,e,r){ke=t,Rte(t)}function Rte(t,e,r){for(var n=(t.mode&1)!==0;ke!==null;){var s=ke,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Qg;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||_n;a=Qg;var u=_n;if(Qg=o,(_n=l)&&!u)for(ke=s;ke!==null;)o=ke,l=o.child,o.tag===22&&o.memoizedState!==null?o5(s):l!==null?(l.return=o,ke=l):o5(s);for(;i!==null;)ke=i,Rte(i),i=i.sibling;ke=s,Qg=a,_n=u}s5(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ke=i):s5(t)}}function s5(t){for(;ke!==null;){var e=ke;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:_n||Z0(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!_n)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:fi(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&z4(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}z4(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Pp(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}_n||e.flags&512&&cI(e)}catch(f){or(e,e.return,f)}}if(e===t){ke=null;break}if(r=e.sibling,r!==null){r.return=e.return,ke=r;break}ke=e.return}}function i5(t){for(;ke!==null;){var e=ke;if(e===t){ke=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ke=r;break}ke=e.return}}function o5(t){for(;ke!==null;){var e=ke;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Z0(4,e)}catch(l){or(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(l){or(e,s,l)}}var i=e.return;try{cI(e)}catch(l){or(e,i,l)}break;case 5:var o=e.return;try{cI(e)}catch(l){or(e,o,l)}}}catch(l){or(e,e.return,l)}if(e===t){ke=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ke=a;break}ke=e.return}}var Fhe=Math.ceil,xv=ra.ReactCurrentDispatcher,$M=ra.ReactCurrentOwner,Qs=ra.ReactCurrentBatchConfig,yt=0,Gr=null,_r=null,hn=0,ws=0,hd=Ol(0),Fr=0,zp=null,Lc=0,eb=0,FM=0,ip=null,rs=null,qM=0,sh=1/0,_o=null,wv=!1,hI=null,nl=null,Xg=!1,Ha=null,Sv=0,op=0,fI=null,Ay=-1,Dy=0;function Bn(){return yt&6?gr():Ay!==-1?Ay:Ay=gr()}function sl(t){return t.mode&1?yt&2&&hn!==0?hn&-hn:whe.transition!==null?(Dy===0&&(Dy=yee()),Dy):(t=Ct,t!==0||(t=window.event,t=t===void 0?16:_ee(t.type)),t):1}function _i(t,e,r,n){if(50<op)throw op=0,fI=null,Error(se(185));jm(t,r,n),(!(yt&2)||t!==Gr)&&(t===Gr&&(!(yt&2)&&(eb|=r),Fr===4&&Pa(t,hn)),us(t,n),r===1&&yt===0&&!(e.mode&1)&&(sh=gr()+500,Q0&&Pl()))}function us(t,e){var r=t.callbackNode;wde(t,e);var n=iv(t,t===Gr?hn:0);if(n===0)r!==null&&m4(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&m4(r),e===1)t.tag===0?xhe(a5.bind(null,t)):Wee(a5.bind(null,t)),ghe(function(){!(yt&6)&&Pl()}),r=null;else{switch(vee(n)){case 1:r=dM;break;case 4:r=mee;break;case 16:r=sv;break;case 536870912:r=gee;break;default:r=sv}r=Bte(r,Mte.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Mte(t,e){if(Ay=-1,Dy=0,yt&6)throw Error(se(327));var r=t.callbackNode;if(Cd()&&t.callbackNode!==r)return null;var n=iv(t,t===Gr?hn:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Ev(t,n);else{e=n;var s=yt;yt|=2;var i=Dte();(Gr!==t||hn!==e)&&(_o=null,sh=gr()+500,Ec(t,e));do try{Bhe();break}catch(a){Ate(t,a)}while(!0);_M(),xv.current=i,yt=s,_r!==null?e=0:(Gr=null,hn=0,e=Fr)}if(e!==0){if(e===2&&(s=LP(t),s!==0&&(n=s,e=pI(t,s))),e===1)throw r=zp,Ec(t,0),Pa(t,n),us(t,gr()),r;if(e===6)Pa(t,n);else{if(s=t.current.alternate,!(n&30)&&!qhe(s)&&(e=Ev(t,n),e===2&&(i=LP(t),i!==0&&(n=i,e=pI(t,i))),e===1))throw r=zp,Ec(t,0),Pa(t,n),us(t,gr()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(se(345));case 2:Ql(t,rs,_o);break;case 3:if(Pa(t,n),(n&130023424)===n&&(e=qM+500-gr(),10<e)){if(iv(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Bn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=GP(Ql.bind(null,t,rs,_o),e);break}Ql(t,rs,_o);break;case 4:if(Pa(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var o=31-Ei(n);i=1<<o,o=e[o],o>s&&(s=o),n&=~i}if(n=s,n=gr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Fhe(n/1960))-n,10<n){t.timeoutHandle=GP(Ql.bind(null,t,rs,_o),n);break}Ql(t,rs,_o);break;case 5:Ql(t,rs,_o);break;default:throw Error(se(329))}}}return us(t,gr()),t.callbackNode===r?Mte.bind(null,t):null}function pI(t,e){var r=ip;return t.current.memoizedState.isDehydrated&&(Ec(t,e).flags|=256),t=Ev(t,e),t!==2&&(e=rs,rs=r,e!==null&&mI(e)),t}function mI(t){rs===null?rs=t:rs.push.apply(rs,t)}function qhe(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Ni(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Pa(t,e){for(e&=~FM,e&=~eb,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Ei(e),n=1<<r;t[r]=-1,e&=~n}}function a5(t){if(yt&6)throw Error(se(327));Cd();var e=iv(t,0);if(!(e&1))return us(t,gr()),null;var r=Ev(t,e);if(t.tag!==0&&r===2){var n=LP(t);n!==0&&(e=n,r=pI(t,n))}if(r===1)throw r=zp,Ec(t,0),Pa(t,e),us(t,gr()),r;if(r===6)throw Error(se(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ql(t,rs,_o),us(t,gr()),null}function LM(t,e){var r=yt;yt|=1;try{return t(e)}finally{yt=r,yt===0&&(sh=gr()+500,Q0&&Pl())}}function Bc(t){Ha!==null&&Ha.tag===0&&!(yt&6)&&Cd();var e=yt;yt|=1;var r=Qs.transition,n=Ct;try{if(Qs.transition=null,Ct=1,t)return t()}finally{Ct=n,Qs.transition=r,yt=e,!(yt&6)&&Pl()}}function BM(){ws=hd.current,Vt(hd)}function Ec(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,mhe(r)),_r!==null)for(r=_r.return;r!==null;){var n=r;switch(wM(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&uv();break;case 3:rh(),Vt(ls),Vt(kn),OM();break;case 5:TM(n);break;case 4:rh();break;case 13:Vt(Yt);break;case 19:Vt(Yt);break;case 10:NM(n.type._context);break;case 22:case 23:BM()}r=r.return}if(Gr=t,_r=t=il(t.current,null),hn=ws=e,Fr=0,zp=null,FM=eb=Lc=0,rs=ip=null,tc!==null){for(e=0;e<tc.length;e++)if(r=tc[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}tc=null}return t}function Ate(t,e){do{var r=_r;try{if(_M(),Iy.current=bv,vv){for(var n=Xt.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}vv=!1}if(qc=0,Ur=$r=Xt=null,np=!1,qp=0,$M.current=null,r===null||r.return===null){Fr=1,zp=e,_r=null;break}e:{var i=t,o=r.return,a=r,l=e;if(e=hn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=G4(o);if(p!==null){p.flags&=-257,Y4(p,o,a,i,e),p.mode&1&&K4(i,u,e),e=p,l=u;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){K4(i,u,e),zM();break e}l=Error(se(426))}}else if(Ht&&a.mode&1){var y=G4(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Y4(y,o,a,i,e),SM(nh(l,a));break e}}i=l=nh(l,a),Fr!==4&&(Fr=2),ip===null?ip=[i]:ip.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=vte(i,l,e);B4(i,v);break e;case 1:a=l;var b=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(nl===null||!nl.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=bte(i,a,e);B4(i,x);break e}}i=i.return}while(i!==null)}Fte(r)}catch(S){e=S,_r===r&&r!==null&&(_r=r=r.return);continue}break}while(!0)}function Dte(){var t=xv.current;return xv.current=bv,t===null?bv:t}function zM(){(Fr===0||Fr===3||Fr===2)&&(Fr=4),Gr===null||!(Lc&268435455)&&!(eb&268435455)||Pa(Gr,hn)}function Ev(t,e){var r=yt;yt|=2;var n=Dte();(Gr!==t||hn!==e)&&(_o=null,Ec(t,e));do try{Lhe();break}catch(s){Ate(t,s)}while(!0);if(_M(),yt=r,xv.current=n,_r!==null)throw Error(se(261));return Gr=null,hn=0,Fr}function Lhe(){for(;_r!==null;)$te(_r)}function Bhe(){for(;_r!==null&&!hde();)$te(_r)}function $te(t){var e=Lte(t.alternate,t,ws);t.memoizedProps=t.pendingProps,e===null?Fte(t):_r=e,$M.current=null}function Fte(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Mhe(r,e),r!==null){r.flags&=32767,_r=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fr=6,_r=null;return}}else if(r=Rhe(r,e,ws),r!==null){_r=r;return}if(e=e.sibling,e!==null){_r=e;return}_r=e=t}while(e!==null);Fr===0&&(Fr=5)}function Ql(t,e,r){var n=Ct,s=Qs.transition;try{Qs.transition=null,Ct=1,zhe(t,e,r,n)}finally{Qs.transition=s,Ct=n}return null}function zhe(t,e,r,n){do Cd();while(Ha!==null);if(yt&6)throw Error(se(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(se(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(Sde(t,i),t===Gr&&(_r=Gr=null,hn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Xg||(Xg=!0,Bte(sv,function(){return Cd(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Qs.transition,Qs.transition=null;var o=Ct;Ct=1;var a=yt;yt|=4,$M.current=null,Dhe(t,r),Ite(r,t),lhe(HP),ov=!!UP,HP=UP=null,t.current=r,$he(r),fde(),yt=a,Ct=o,Qs.transition=i}else t.current=r;if(Xg&&(Xg=!1,Ha=t,Sv=s),i=t.pendingLanes,i===0&&(nl=null),gde(r.stateNode),us(t,gr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(wv)throw wv=!1,t=hI,hI=null,t;return Sv&1&&t.tag!==0&&Cd(),i=t.pendingLanes,i&1?t===fI?op++:(op=0,fI=t):op=0,Pl(),null}function Cd(){if(Ha!==null){var t=vee(Sv),e=Qs.transition,r=Ct;try{if(Qs.transition=null,Ct=16>t?16:t,Ha===null)var n=!1;else{if(t=Ha,Ha=null,Sv=0,yt&6)throw Error(se(331));var s=yt;for(yt|=4,ke=t.current;ke!==null;){var i=ke,o=i.child;if(ke.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ke=u;ke!==null;){var d=ke;switch(d.tag){case 0:case 11:case 15:sp(8,d,i)}var h=d.child;if(h!==null)h.return=d,ke=h;else for(;ke!==null;){d=ke;var f=d.sibling,p=d.return;if(Tte(d),d===u){ke=null;break}if(f!==null){f.return=p,ke=f;break}ke=p}}}var m=i.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}ke=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ke=o;else e:for(;ke!==null;){if(i=ke,i.flags&2048)switch(i.tag){case 0:case 11:case 15:sp(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,ke=v;break e}ke=i.return}}var b=t.current;for(ke=b;ke!==null;){o=ke;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ke=w;else e:for(o=b;ke!==null;){if(a=ke,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Z0(9,a)}}catch(S){or(a,a.return,S)}if(a===o){ke=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,ke=x;break e}ke=a.return}}if(yt=s,Pl(),Qi&&typeof Qi.onPostCommitFiberRoot=="function")try{Qi.onPostCommitFiberRoot(U0,t)}catch{}n=!0}return n}finally{Ct=r,Qs.transition=e}}return!1}function l5(t,e,r){e=nh(r,e),e=vte(t,e,1),t=rl(t,e,1),e=Bn(),t!==null&&(jm(t,1,e),us(t,e))}function or(t,e,r){if(t.tag===3)l5(t,t,r);else for(;e!==null;){if(e.tag===3){l5(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(nl===null||!nl.has(n))){t=nh(r,t),t=bte(e,t,1),e=rl(e,t,1),t=Bn(),e!==null&&(jm(e,1,t),us(e,t));break}}e=e.return}}function Whe(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Bn(),t.pingedLanes|=t.suspendedLanes&r,Gr===t&&(hn&r)===r&&(Fr===4||Fr===3&&(hn&130023424)===hn&&500>gr()-qM?Ec(t,0):FM|=r),us(t,e)}function qte(t,e){e===0&&(t.mode&1?(e=Bg,Bg<<=1,!(Bg&130023424)&&(Bg=4194304)):e=1);var r=Bn();t=Xo(t,e),t!==null&&(jm(t,e,r),us(t,r))}function Vhe(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),qte(t,r)}function Uhe(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(se(314))}n!==null&&n.delete(e),qte(t,r)}var Lte;Lte=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||ls.current)is=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return is=!1,Ihe(t,e,r);is=!!(t.flags&131072)}else is=!1,Ht&&e.flags&1048576&&Vee(e,fv,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;My(t,e),t=e.pendingProps;var s=Zd(e,kn.current);Nd(e,r),s=IM(null,e,n,t,s,r);var i=RM();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,cs(n)?(i=!0,dv(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,kM(e),s.updater=J0,e.stateNode=s,s._reactInternals=e,tI(e,n,t,r),e=sI(null,e,n,!0,i,r)):(e.tag=0,Ht&&i&&xM(e),In(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(My(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=Khe(n),t=fi(n,t),s){case 0:e=nI(null,e,n,t,r);break e;case 1:e=J4(null,e,n,t,r);break e;case 11:e=Q4(null,e,n,t,r);break e;case 14:e=X4(null,e,n,fi(n.type,t),r);break e}throw Error(se(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:fi(n,s),nI(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:fi(n,s),J4(t,e,n,s,r);case 3:e:{if(Ete(e),t===null)throw Error(se(387));n=e.pendingProps,i=e.memoizedState,s=i.element,Qee(t,e),gv(e,n,null,r);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=nh(Error(se(423)),e),e=Z4(t,e,n,r,s);break e}else if(n!==s){s=nh(Error(se(424)),e),e=Z4(t,e,n,r,s);break e}else for(Ns=tl(e.stateNode.containerInfo.firstChild),Cs=e,Ht=!0,yi=null,r=Gee(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(eh(),n===s){e=Jo(t,e,r);break e}In(t,e,n,r)}e=e.child}return e;case 5:return Xee(e),t===null&&JP(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,KP(n,s)?o=null:i!==null&&KP(n,i)&&(e.flags|=32),Ste(t,e),In(t,e,o,r),e.child;case 6:return t===null&&JP(e),null;case 13:return _te(t,e,r);case 4:return jM(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=th(e,null,n,r):In(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:fi(n,s),Q4(t,e,n,s,r);case 7:return In(t,e,e.pendingProps,r),e.child;case 8:return In(t,e,e.pendingProps.children,r),e.child;case 12:return In(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Lt(pv,n._currentValue),n._currentValue=o,i!==null)if(Ni(i.value,o)){if(i.children===s.children&&!ls.current){e=Jo(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=$o(-1,r&-r),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),ZP(i.return,r,e),a.lanes|=r;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(se(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),ZP(o,r,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}In(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Nd(e,r),s=ni(s),n=n(s),e.flags|=1,In(t,e,n,r),e.child;case 14:return n=e.type,s=fi(n,e.pendingProps),s=fi(n.type,s),X4(t,e,n,s,r);case 15:return xte(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:fi(n,s),My(t,e),e.tag=1,cs(n)?(t=!0,dv(e)):t=!1,Nd(e,r),yte(e,n,s),tI(e,n,s,r),sI(null,e,n,!0,t,r);case 19:return Nte(t,e,r);case 22:return wte(t,e,r)}throw Error(se(156,e.tag))};function Bte(t,e){return pee(t,e)}function Hhe(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ys(t,e,r,n){return new Hhe(t,e,r,n)}function WM(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Khe(t){if(typeof t=="function")return WM(t)?1:0;if(t!=null){if(t=t.$$typeof,t===lM)return 11;if(t===cM)return 14}return 2}function il(t,e){var r=t.alternate;return r===null?(r=Ys(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function $y(t,e,r,n,s,i){var o=2;if(n=t,typeof t=="function")WM(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case rd:return _c(r.children,s,i,e);case aM:o=8,s|=8;break;case NP:return t=Ys(12,r,e,s|2),t.elementType=NP,t.lanes=i,t;case CP:return t=Ys(13,r,e,s),t.elementType=CP,t.lanes=i,t;case kP:return t=Ys(19,r,e,s),t.elementType=kP,t.lanes=i,t;case XZ:return tb(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case YZ:o=10;break e;case QZ:o=9;break e;case lM:o=11;break e;case cM:o=14;break e;case Sa:o=16,n=null;break e}throw Error(se(130,t==null?t:typeof t,""))}return e=Ys(o,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function _c(t,e,r,n){return t=Ys(7,t,n,e),t.lanes=r,t}function tb(t,e,r,n){return t=Ys(22,t,n,e),t.elementType=XZ,t.lanes=r,t.stateNode={isHidden:!1},t}function e1(t,e,r){return t=Ys(6,t,null,e),t.lanes=r,t}function t1(t,e,r){return e=Ys(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ghe(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ax(0),this.expirationTimes=Ax(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ax(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function VM(t,e,r,n,s,i,o,a,l){return t=new Ghe(t,e,r,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ys(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},kM(i),t}function Yhe(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:td,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function zte(t){if(!t)return xl;t=t._reactInternals;e:{if(uu(t)!==t||t.tag!==1)throw Error(se(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(cs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(se(171))}if(t.tag===1){var r=t.type;if(cs(r))return zee(t,r,e)}return e}function Wte(t,e,r,n,s,i,o,a,l){return t=VM(r,n,!0,t,s,i,o,a,l),t.context=zte(null),r=t.current,n=Bn(),s=sl(r),i=$o(n,s),i.callback=e??null,rl(r,i,s),t.current.lanes=s,jm(t,s,n),us(t,n),t}function rb(t,e,r,n){var s=e.current,i=Bn(),o=sl(s);return r=zte(r),e.context===null?e.context=r:e.pendingContext=r,e=$o(i,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=rl(s,e,o),t!==null&&(_i(t,s,o,i),Py(t,s,o)),o}function _v(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function c5(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function UM(t,e){c5(t,e),(t=t.alternate)&&c5(t,e)}function Qhe(){return null}var Vte=typeof reportError=="function"?reportError:function(t){console.error(t)};function HM(t){this._internalRoot=t}nb.prototype.render=HM.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(se(409));rb(t,e,null,null)};nb.prototype.unmount=HM.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Bc(function(){rb(null,t,null,null)}),e[Qo]=null}};function nb(t){this._internalRoot=t}nb.prototype.unstable_scheduleHydration=function(t){if(t){var e=wee();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Oa.length&&e!==0&&e<Oa[r].priority;r++);Oa.splice(r,0,t),r===0&&Eee(t)}};function KM(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function sb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function u5(){}function Xhe(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=_v(o);i.call(u)}}var o=Wte(e,n,t,0,null,!1,!1,"",u5);return t._reactRootContainer=o,t[Qo]=o.current,Mp(t.nodeType===8?t.parentNode:t),Bc(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var a=n;n=function(){var u=_v(l);a.call(u)}}var l=VM(t,0,!1,null,null,!1,!1,"",u5);return t._reactRootContainer=l,t[Qo]=l.current,Mp(t.nodeType===8?t.parentNode:t),Bc(function(){rb(e,l,r,n)}),l}function ib(t,e,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=_v(o);a.call(l)}}rb(e,o,t,s)}else o=Xhe(r,e,t,s,n);return _v(o)}bee=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=zf(e.pendingLanes);r!==0&&(hM(e,r|1),us(e,gr()),!(yt&6)&&(sh=gr()+500,Pl()))}break;case 13:Bc(function(){var n=Xo(t,1);if(n!==null){var s=Bn();_i(n,t,1,s)}}),UM(t,1)}};fM=function(t){if(t.tag===13){var e=Xo(t,134217728);if(e!==null){var r=Bn();_i(e,t,134217728,r)}UM(t,134217728)}};xee=function(t){if(t.tag===13){var e=sl(t),r=Xo(t,e);if(r!==null){var n=Bn();_i(r,t,e,n)}UM(t,e)}};wee=function(){return Ct};See=function(t,e){var r=Ct;try{return Ct=t,e()}finally{Ct=r}};$P=function(t,e,r){switch(e){case"input":if(OP(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Y0(n);if(!s)throw Error(se(90));ZZ(n),OP(n,s)}}}break;case"textarea":tee(t,r);break;case"select":e=r.value,e!=null&&wd(t,!!r.multiple,e,!1)}};lee=LM;cee=Bc;var Jhe={usingClientEntryPoint:!1,Events:[Om,od,Y0,oee,aee,LM]},Nf={findFiberByHostInstance:ec,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Zhe={bundleType:Nf.bundleType,version:Nf.version,rendererPackageName:Nf.rendererPackageName,rendererConfig:Nf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ra.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=hee(t),t===null?null:t.stateNode},findFiberByHostInstance:Nf.findFiberByHostInstance||Qhe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jg.isDisabled&&Jg.supportsFiber)try{U0=Jg.inject(Zhe),Qi=Jg}catch{}}Ts.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jhe;Ts.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!KM(e))throw Error(se(200));return Yhe(t,e,null,r)};Ts.createRoot=function(t,e){if(!KM(t))throw Error(se(299));var r=!1,n="",s=Vte;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=VM(t,1,!1,null,null,r,!1,n,s),t[Qo]=e.current,Mp(t.nodeType===8?t.parentNode:t),new HM(e)};Ts.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(se(188)):(t=Object.keys(t).join(","),Error(se(268,t)));return t=hee(e),t=t===null?null:t.stateNode,t};Ts.flushSync=function(t){return Bc(t)};Ts.hydrate=function(t,e,r){if(!sb(e))throw Error(se(200));return ib(null,t,e,!0,r)};Ts.hydrateRoot=function(t,e,r){if(!KM(t))throw Error(se(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=Vte;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=Wte(e,null,t,1,r??null,s,!1,i,o),t[Qo]=e.current,Mp(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new nb(e)};Ts.render=function(t,e,r){if(!sb(e))throw Error(se(200));return ib(null,t,e,!1,r)};Ts.unmountComponentAtNode=function(t){if(!sb(t))throw Error(se(40));return t._reactRootContainer?(Bc(function(){ib(null,null,t,!1,function(){t._reactRootContainer=null,t[Qo]=null})}),!0):!1};Ts.unstable_batchedUpdates=LM;Ts.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!sb(r))throw Error(se(200));if(t==null||t._reactInternals===void 0)throw Error(se(38));return ib(t,e,r,!1,n)};Ts.version="18.3.1-next-f1338f8080-20240426";function Ute(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ute)}catch(t){console.error(t)}}Ute(),UZ.exports=Ts;var Hte=UZ.exports;const Kte=Ch(Hte);var d5=Hte;EP.createRoot=d5.createRoot,EP.hydrateRoot=d5.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wp(){return Wp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Wp.apply(this,arguments)}var Ka;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ka||(Ka={}));const h5="popstate";function efe(t){t===void 0&&(t={});function e(n,s){let{pathname:i,search:o,hash:a}=n.location;return gI("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Nv(s)}return rfe(e,r,null,t)}function Jt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function GM(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function tfe(){return Math.random().toString(36).substr(2,8)}function f5(t,e){return{usr:t.state,key:t.key,idx:e}}function gI(t,e,r,n){return r===void 0&&(r=null),Wp({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Oh(e):e,{state:r,key:e&&e.key||n||tfe()})}function Nv(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Oh(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function rfe(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,a=Ka.Pop,l=null,u=d();u==null&&(u=0,o.replaceState(Wp({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Ka.Pop;let y=d(),v=y==null?null:y-u;u=y,l&&l({action:a,location:g.location,delta:v})}function f(y,v){a=Ka.Push;let b=gI(g.location,y,v);u=d()+1;let w=f5(b,u),x=g.createHref(b);try{o.pushState(w,"",x)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(x)}i&&l&&l({action:a,location:g.location,delta:1})}function p(y,v){a=Ka.Replace;let b=gI(g.location,y,v);u=d();let w=f5(b,u),x=g.createHref(b);o.replaceState(w,"",x),i&&l&&l({action:a,location:g.location,delta:0})}function m(y){let v=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof y=="string"?y:Nv(y);return b=b.replace(/ $/,"%20"),Jt(v,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,v)}let g={get action(){return a},get location(){return t(s,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(h5,h),l=y,()=>{s.removeEventListener(h5,h),l=null}},createHref(y){return e(s,y)},createURL:m,encodeLocation(y){let v=m(y);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:p,go(y){return o.go(y)}};return g}var p5;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(p5||(p5={}));function nfe(t,e,r){return r===void 0&&(r="/"),sfe(t,e,r)}function sfe(t,e,r,n){let s=typeof e=="string"?Oh(e):e,i=ih(s.pathname||"/",r);if(i==null)return null;let o=Gte(t);ife(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=gfe(i);a=pfe(o[l],u)}return a}function Gte(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Jt(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=ol([n,l.relativePath]),d=r.concat(l);i.children&&i.children.length>0&&(Jt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Gte(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:hfe(u,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of Yte(i.path))s(i,o,l)}),e}function Yte(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=Yte(n.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function ife(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:ffe(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const ofe=/^:[\w-]+$/,afe=3,lfe=2,cfe=1,ufe=10,dfe=-2,m5=t=>t==="*";function hfe(t,e){let r=t.split("/"),n=r.length;return r.some(m5)&&(n+=dfe),e&&(n+=lfe),r.filter(s=>!m5(s)).reduce((s,i)=>s+(ofe.test(i)?afe:i===""?cfe:ufe),n)}function ffe(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function pfe(t,e,r){let{routesMeta:n}=t,s={},i="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],u=a===n.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=yI({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),f=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:ol([i,h.pathname]),pathnameBase:wfe(ol([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=ol([i,h.pathnameBase]))}return o}function yI(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=mfe(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let g=a[h]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const m=a[h];return p&&!m?u[f]=void 0:u[f]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function mfe(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),GM(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function gfe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return GM(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ih(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const yfe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vfe=t=>yfe.test(t);function bfe(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?Oh(t):t,i;if(r)if(vfe(r))i=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),GM(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?i=g5(r.substring(1),"/"):i=g5(r,e)}else i=e;return{pathname:i,search:Sfe(n),hash:Efe(s)}}function g5(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function r1(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function xfe(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function YM(t,e){let r=xfe(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function QM(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=Oh(t):(s=Wp({},t),Jt(!s.pathname||!s.pathname.includes("?"),r1("?","pathname","search",s)),Jt(!s.pathname||!s.pathname.includes("#"),r1("#","pathname","hash",s)),Jt(!s.search||!s.search.includes("#"),r1("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=r;else{let h=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=bfe(s,a),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const ol=t=>t.join("/").replace(/\/\/+/g,"/"),wfe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Sfe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Efe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function _fe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Qte=["post","put","patch","delete"];new Set(Qte);const Nfe=["get",...Qte];new Set(Nfe);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vp(){return Vp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vp.apply(this,arguments)}const ob=C.createContext(null),Xte=C.createContext(null),na=C.createContext(null),ab=C.createContext(null),sa=C.createContext({outlet:null,matches:[],isDataRoute:!1}),Jte=C.createContext(null);function Cfe(t,e){let{relative:r}=e===void 0?{}:e;Ph()||Jt(!1);let{basename:n,navigator:s}=C.useContext(na),{hash:i,pathname:o,search:a}=lb(t,{relative:r}),l=o;return n!=="/"&&(l=o==="/"?n:ol([n,o])),s.createHref({pathname:l,search:a,hash:i})}function Ph(){return C.useContext(ab)!=null}function ia(){return Ph()||Jt(!1),C.useContext(ab).location}function Zte(t){C.useContext(na).static||C.useLayoutEffect(t)}function Gn(){let{isDataRoute:t}=C.useContext(sa);return t?qfe():kfe()}function kfe(){Ph()||Jt(!1);let t=C.useContext(ob),{basename:e,future:r,navigator:n}=C.useContext(na),{matches:s}=C.useContext(sa),{pathname:i}=ia(),o=JSON.stringify(YM(s,r.v7_relativeSplatPath)),a=C.useRef(!1);return Zte(()=>{a.current=!0}),C.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){n.go(u);return}let h=QM(u,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ol([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,o,i,t])}function Ih(){let{matches:t}=C.useContext(sa),e=t[t.length-1];return e?e.params:{}}function lb(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=C.useContext(na),{matches:s}=C.useContext(sa),{pathname:i}=ia(),o=JSON.stringify(YM(s,n.v7_relativeSplatPath));return C.useMemo(()=>QM(t,JSON.parse(o),i,r==="path"),[t,o,i,r])}function jfe(t,e){return Tfe(t,e)}function Tfe(t,e,r,n){Ph()||Jt(!1);let{navigator:s}=C.useContext(na),{matches:i}=C.useContext(sa),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=ia(),d;if(e){var h;let y=typeof e=="string"?Oh(e):e;l==="/"||(h=y.pathname)!=null&&h.startsWith(l)||Jt(!1),d=y}else d=u;let f=d.pathname||"/",p=f;if(l!=="/"){let y=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let m=nfe(t,{pathname:p}),g=Mfe(m&&m.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:ol([l,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:ol([l,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,r,n);return e&&g?C.createElement(ab.Provider,{value:{location:Vp({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ka.Pop}},g):g}function Ofe(){let t=Ffe(),e=_fe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),r?C.createElement("pre",{style:s},r):null,null)}const Pfe=C.createElement(Ofe,null);class Ife extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?C.createElement(sa.Provider,{value:this.props.routeContext},C.createElement(Jte.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Rfe(t){let{routeContext:e,match:r,children:n}=t,s=C.useContext(ob);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),C.createElement(sa.Provider,{value:e},n)}function Mfe(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,a=(s=r)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Jt(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:p}=r,m=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||m){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,m=!1,g=null,y=null;r&&(p=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||Pfe,l&&(u<0&&f===0?(Lfe("route-fallback"),m=!0,y=null):u===f&&(m=!0,y=h.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,f+1)),b=()=>{let w;return p?w=g:m?w=y:h.route.Component?w=C.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,C.createElement(Rfe,{match:h,routeContext:{outlet:d,matches:v,isDataRoute:r!=null},children:w})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?C.createElement(Ife,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):b()},null)}var ere=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ere||{}),tre=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(tre||{});function Afe(t){let e=C.useContext(ob);return e||Jt(!1),e}function Dfe(t){let e=C.useContext(Xte);return e||Jt(!1),e}function $fe(t){let e=C.useContext(sa);return e||Jt(!1),e}function rre(t){let e=$fe(),r=e.matches[e.matches.length-1];return r.route.id||Jt(!1),r.route.id}function Ffe(){var t;let e=C.useContext(Jte),r=Dfe(),n=rre();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function qfe(){let{router:t}=Afe(ere.UseNavigateStable),e=rre(tre.UseNavigateStable),r=C.useRef(!1);return Zte(()=>{r.current=!0}),C.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Vp({fromRouteId:e},i)))},[t,e])}const y5={};function Lfe(t,e,r){y5[t]||(y5[t]=!0)}function Bfe(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function nre(t){let{to:e,replace:r,state:n,relative:s}=t;Ph()||Jt(!1);let{future:i,static:o}=C.useContext(na),{matches:a}=C.useContext(sa),{pathname:l}=ia(),u=Gn(),d=QM(e,YM(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return C.useEffect(()=>u(JSON.parse(h),{replace:r,state:n,relative:s}),[u,h,s,r,n]),null}function Dr(t){Jt(!1)}function zfe(t){let{basename:e="/",children:r=null,location:n,navigationType:s=Ka.Pop,navigator:i,static:o=!1,future:a}=t;Ph()&&Jt(!1);let l=e.replace(/^\/*/,"/"),u=C.useMemo(()=>({basename:l,navigator:i,static:o,future:Vp({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof n=="string"&&(n=Oh(n));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:m="default"}=n,g=C.useMemo(()=>{let y=ih(d,l);return y==null?null:{location:{pathname:y,search:h,hash:f,state:p,key:m},navigationType:s}},[l,d,h,f,p,m,s]);return g==null?null:C.createElement(na.Provider,{value:u},C.createElement(ab.Provider,{children:r,value:g}))}function v5(t){let{children:e,location:r}=t;return jfe(vI(e),r)}new Promise(()=>{});function vI(t,e){e===void 0&&(e=[]);let r=[];return C.Children.forEach(t,(n,s)=>{if(!C.isValidElement(n))return;let i=[...e,s];if(n.type===C.Fragment){r.push.apply(r,vI(n.props.children,i));return}n.type!==Dr&&Jt(!1),!n.props.index||!n.props.children||Jt(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=vI(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cv(){return Cv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cv.apply(this,arguments)}function sre(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function Wfe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Vfe(t,e){return t.button===0&&(!e||e==="_self")&&!Wfe(t)}function bI(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function Ufe(t,e){let r=bI(t);return e&&e.forEach((n,s)=>{r.has(s)||e.getAll(s).forEach(i=>{r.append(s,i)})}),r}const Hfe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Kfe=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Gfe="6";try{window.__reactRouterVersion=Gfe}catch{}const Yfe=C.createContext({isTransitioning:!1}),Qfe="startTransition",b5=Wue[Qfe];function Xfe(t){let{basename:e,children:r,future:n,window:s}=t,i=C.useRef();i.current==null&&(i.current=efe({window:s,v5Compat:!0}));let o=i.current,[a,l]=C.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=C.useCallback(h=>{u&&b5?b5(()=>l(h)):l(h)},[l,u]);return C.useLayoutEffect(()=>o.listen(d),[o,d]),C.useEffect(()=>Bfe(n),[n]),C.createElement(zfe,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:o,future:n})}const Jfe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Zfe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ze=C.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:u,preventScrollReset:d,viewTransition:h}=e,f=sre(e,Hfe),{basename:p}=C.useContext(na),m,g=!1;if(typeof u=="string"&&Zfe.test(u)&&(m=u,Jfe))try{let w=new URL(window.location.href),x=u.startsWith("//")?new URL(w.protocol+u):new URL(u),S=ih(x.pathname,p);x.origin===w.origin&&S!=null?u=S+x.search+x.hash:g=!0}catch{}let y=Cfe(u,{relative:s}),v=rpe(u,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function b(w){n&&n(w),w.defaultPrevented||v(w)}return C.createElement("a",Cv({},f,{href:m||y,onClick:g||i?n:b,ref:r,target:l}))}),epe=C.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:s=!1,className:i="",end:o=!1,style:a,to:l,viewTransition:u,children:d}=e,h=sre(e,Kfe),f=lb(l,{relative:h.relative}),p=ia(),m=C.useContext(Xte),{navigator:g,basename:y}=C.useContext(na),v=m!=null&&spe(f)&&u===!0,b=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,w=p.pathname,x=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;s||(w=w.toLowerCase(),x=x?x.toLowerCase():null,b=b.toLowerCase()),x&&y&&(x=ih(x,y)||x);const S=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let E=w===b||!o&&w.startsWith(b)&&w.charAt(S)==="/",N=x!=null&&(x===b||!o&&x.startsWith(b)&&x.charAt(b.length)==="/"),_={isActive:E,isPending:N,isTransitioning:v},k=E?n:void 0,j;typeof i=="function"?j=i(_):j=[i,E?"active":null,N?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let T=typeof a=="function"?a(_):a;return C.createElement(ze,Cv({},h,{"aria-current":k,className:j,ref:r,style:T,to:l,viewTransition:u}),typeof d=="function"?d(_):d)});var xI;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(xI||(xI={}));var x5;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(x5||(x5={}));function tpe(t){let e=C.useContext(ob);return e||Jt(!1),e}function rpe(t,e){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=Gn(),u=ia(),d=lb(t,{relative:o});return C.useCallback(h=>{if(Vfe(h,r)){h.preventDefault();let f=n!==void 0?n:Nv(u)===Nv(d);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[u,l,d,n,s,r,t,i,o,a])}function npe(t){let e=C.useRef(bI(t)),r=C.useRef(!1),n=ia(),s=C.useMemo(()=>Ufe(n.search,r.current?null:e.current),[n.search]),i=Gn(),o=C.useCallback((a,l)=>{const u=bI(typeof a=="function"?a(s):a);r.current=!0,i("?"+u,l)},[i,s]);return[s,o]}function spe(t,e){e===void 0&&(e={});let r=C.useContext(Yfe);r==null&&Jt(!1);let{basename:n}=tpe(xI.useViewTransitionState),s=lb(t,{relative:e.relative});if(!r.isTransitioning)return!1;let i=ih(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=ih(r.nextLocation.pathname,n)||r.nextLocation.pathname;return yI(s.pathname,o)!=null||yI(s.pathname,i)!=null}var du=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ipe={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Aa,ZR,SZ,ope=(SZ=class{constructor(){Ce(this,Aa,ipe);Ce(this,ZR,!1)}setTimeoutProvider(t){de(this,Aa,t)}setTimeout(t,e){return R(this,Aa).setTimeout(t,e)}clearTimeout(t){R(this,Aa).clearTimeout(t)}setInterval(t,e){return R(this,Aa).setInterval(t,e)}clearInterval(t){R(this,Aa).clearInterval(t)}},Aa=new WeakMap,ZR=new WeakMap,SZ),nc=new ope;function ape(t){setTimeout(t,0)}var zc=typeof window>"u"||"Deno"in globalThis;function En(){}function lpe(t,e){return typeof t=="function"?t(e):t}function wI(t){return typeof t=="number"&&t>=0&&t!==1/0}function ire(t,e){return Math.max(t+(e||0)-Date.now(),0)}function al(t,e){return typeof t=="function"?t(e):t}function Bs(t,e){return typeof t=="function"?t(e):t}function w5(t,e){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(n){if(e.queryHash!==XM(o,e.options))return!1}else if(!Up(e.queryKey,o))return!1}if(r!=="all"){const l=e.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function S5(t,e){const{exact:r,status:n,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(r){if(Wc(e.options.mutationKey)!==Wc(i))return!1}else if(!Up(e.options.mutationKey,i))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function XM(t,e){return((e==null?void 0:e.queryKeyHashFn)||Wc)(t)}function Wc(t){return JSON.stringify(t,(e,r)=>SI(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function Up(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>Up(t[r],e[r])):!1}var cpe=Object.prototype.hasOwnProperty;function JM(t,e){if(t===e)return t;const r=E5(t)&&E5(e);if(!r&&!(SI(t)&&SI(e)))return e;const s=(r?t:Object.keys(t)).length,i=r?e:Object.keys(e),o=i.length,a=r?new Array(o):{};let l=0;for(let u=0;u<o;u++){const d=r?u:i[u],h=t[d],f=e[d];if(h===f){a[d]=h,(r?u<s:cpe.call(t,d))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[d]=f;continue}const p=JM(h,f);a[d]=p,p===h&&l++}return s===o&&l===s?t:a}function Hp(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function E5(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function SI(t){if(!_5(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!_5(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function _5(t){return Object.prototype.toString.call(t)==="[object Object]"}function upe(t){return new Promise(e=>{nc.setTimeout(e,t)})}function EI(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?JM(t,e):e}function dpe(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function hpe(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var ZM=Symbol();function ore(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===ZM?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function eA(t,e){return typeof t=="function"?t(...e):!!t}function fpe(t,e,r){let n=!1,s;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(s??(s=e()),n||(n=!0,s.aborted?r():s.addEventListener("abort",r,{once:!0})),s)}),t}var pc,Da,$d,EZ,ppe=(EZ=class extends du{constructor(){super();Ce(this,pc);Ce(this,Da);Ce(this,$d);de(this,$d,e=>{if(!zc&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){R(this,Da)||this.setEventListener(R(this,$d))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,Da))==null||e.call(this),de(this,Da,void 0))}setEventListener(e){var r;de(this,$d,e),(r=R(this,Da))==null||r.call(this),de(this,Da,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){R(this,pc)!==e&&(de(this,pc,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof R(this,pc)=="boolean"?R(this,pc):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},pc=new WeakMap,Da=new WeakMap,$d=new WeakMap,EZ),tA=new ppe;function _I(){let t,e;const r=new Promise((s,i)=>{t=s,e=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),t(s)},r.reject=s=>{n({status:"rejected",reason:s}),e(s)},r}var mpe=ape;function gpe(){let t=[],e=0,r=a=>{a()},n=a=>{a()},s=mpe;const i=a=>{e?t.push(a):s(()=>{r(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{n(()=>{a.forEach(l=>{r(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{r=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{s=a}}}var ur=gpe(),Fd,$a,qd,_Z,ype=(_Z=class extends du{constructor(){super();Ce(this,Fd,!0);Ce(this,$a);Ce(this,qd);de(this,qd,e=>{if(!zc&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){R(this,$a)||this.setEventListener(R(this,qd))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,$a))==null||e.call(this),de(this,$a,void 0))}setEventListener(e){var r;de(this,qd,e),(r=R(this,$a))==null||r.call(this),de(this,$a,e(this.setOnline.bind(this)))}setOnline(e){R(this,Fd)!==e&&(de(this,Fd,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return R(this,Fd)}},Fd=new WeakMap,$a=new WeakMap,qd=new WeakMap,_Z),kv=new ype;function vpe(t){return Math.min(1e3*2**t,3e4)}function are(t){return(t??"online")==="online"?kv.isOnline():!0}var NI=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function lre(t){let e=!1,r=0,n;const s=_I(),i=()=>s.status!=="pending",o=g=>{var y;if(!i()){const v=new NI(g);f(v),(y=t.onCancel)==null||y.call(t,v)}},a=()=>{e=!0},l=()=>{e=!1},u=()=>tA.isFocused()&&(t.networkMode==="always"||kv.isOnline())&&t.canRun(),d=()=>are(t.networkMode)&&t.canRun(),h=g=>{i()||(n==null||n(),s.resolve(g))},f=g=>{i()||(n==null||n(),s.reject(g))},p=()=>new Promise(g=>{var y;n=v=>{(i()||u())&&g(v)},(y=t.onPause)==null||y.call(t)}).then(()=>{var g;n=void 0,i()||(g=t.onContinue)==null||g.call(t)}),m=()=>{if(i())return;let g;const y=r===0?t.initialPromise:void 0;try{g=y??t.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(h).catch(v=>{var E;if(i())return;const b=t.retry??(zc?0:3),w=t.retryDelay??vpe,x=typeof w=="function"?w(r,v):w,S=b===!0||typeof b=="number"&&r<b||typeof b=="function"&&b(r,v);if(e||!S){f(v);return}r++,(E=t.onFail)==null||E.call(t,r,v),upe(x).then(()=>u()?void 0:p()).then(()=>{e?f(v):m()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(n==null||n(),s),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?m():p().then(m),s)}}var mc,NZ,cre=(NZ=class{constructor(){Ce(this,mc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),wI(this.gcTime)&&de(this,mc,nc.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(zc?1/0:5*60*1e3))}clearGcTimeout(){R(this,mc)&&(nc.clearTimeout(R(this,mc)),de(this,mc,void 0))}},mc=new WeakMap,NZ),gc,Ld,qs,yc,Vr,bm,vc,pi,So,CZ,bpe=(CZ=class extends cre{constructor(e){super();Ce(this,pi);Ce(this,gc);Ce(this,Ld);Ce(this,qs);Ce(this,yc);Ce(this,Vr);Ce(this,bm);Ce(this,vc);de(this,vc,!1),de(this,bm,e.defaultOptions),this.setOptions(e.options),this.observers=[],de(this,yc,e.client),de(this,qs,R(this,yc).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,de(this,gc,C5(this.options)),this.state=e.state??R(this,gc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=R(this,Vr))==null?void 0:e.promise}setOptions(e){if(this.options={...R(this,bm),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=C5(this.options);r.data!==void 0&&(this.setState(N5(r.data,r.dataUpdatedAt)),de(this,gc,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&R(this,qs).remove(this)}setData(e,r){const n=EI(this.state.data,e,this.options);return Le(this,pi,So).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){Le(this,pi,So).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,s;const r=(n=R(this,Vr))==null?void 0:n.promise;return(s=R(this,Vr))==null||s.cancel(e),r?r.then(En).catch(En):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(R(this,gc))}isActive(){return this.observers.some(e=>Bs(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ZM||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>al(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!ire(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=R(this,Vr))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=R(this,Vr))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),R(this,qs).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(R(this,Vr)&&(R(this,vc)?R(this,Vr).cancel({revert:!0}):R(this,Vr).cancelRetry()),this.scheduleGc()),R(this,qs).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Le(this,pi,So).call(this,{type:"invalidate"})}async fetch(e,r){var l,u,d,h,f,p,m,g,y,v,b,w;if(this.state.fetchStatus!=="idle"&&((l=R(this,Vr))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(R(this,Vr))return R(this,Vr).continueRetry(),R(this,Vr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const x=this.observers.find(S=>S.options.queryFn);x&&this.setOptions(x.options)}const n=new AbortController,s=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(de(this,vc,!0),n.signal)})},i=()=>{const x=ore(this.options,r),E=(()=>{const N={client:R(this,yc),queryKey:this.queryKey,meta:this.meta};return s(N),N})();return de(this,vc,!1),this.options.persister?this.options.persister(x,E,this):x(E)},a=(()=>{const x={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:R(this,yc),state:this.state,fetchFn:i};return s(x),x})();(u=this.options.behavior)==null||u.onFetch(a,this),de(this,Ld,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&Le(this,pi,So).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta}),de(this,Vr,lre({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,onCancel:x=>{x instanceof NI&&x.revert&&this.setState({...R(this,Ld),fetchStatus:"idle"}),n.abort()},onFail:(x,S)=>{Le(this,pi,So).call(this,{type:"failed",failureCount:x,error:S})},onPause:()=>{Le(this,pi,So).call(this,{type:"pause"})},onContinue:()=>{Le(this,pi,So).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const x=await R(this,Vr).start();if(x===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(x),(p=(f=R(this,qs).config).onSuccess)==null||p.call(f,x,this),(g=(m=R(this,qs).config).onSettled)==null||g.call(m,x,this.state.error,this),x}catch(x){if(x instanceof NI){if(x.silent)return R(this,Vr).promise;if(x.revert){if(this.state.data===void 0)throw x;return this.state.data}}throw Le(this,pi,So).call(this,{type:"error",error:x}),(v=(y=R(this,qs).config).onError)==null||v.call(y,x,this),(w=(b=R(this,qs).config).onSettled)==null||w.call(b,this.state.data,x,this),x}finally{this.scheduleGc()}}},gc=new WeakMap,Ld=new WeakMap,qs=new WeakMap,yc=new WeakMap,Vr=new WeakMap,bm=new WeakMap,vc=new WeakMap,pi=new WeakSet,So=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...ure(n.data,this.options),fetchMeta:e.meta??null};case"success":const s={...n,...N5(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return de(this,Ld,e.manual?s:void 0),s;case"error":const i=e.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),ur.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),R(this,qs).notify({query:this,type:"updated",action:e})})},CZ);function ure(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:are(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function N5(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function C5(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Jn,ht,xm,On,bc,Bd,ko,Fa,wm,zd,Wd,xc,wc,qa,Vd,xt,Vf,CI,kI,jI,TI,OI,PI,II,dre,kZ,rA=(kZ=class extends du{constructor(e,r){super();Ce(this,xt);Ce(this,Jn);Ce(this,ht);Ce(this,xm);Ce(this,On);Ce(this,bc);Ce(this,Bd);Ce(this,ko);Ce(this,Fa);Ce(this,wm);Ce(this,zd);Ce(this,Wd);Ce(this,xc);Ce(this,wc);Ce(this,qa);Ce(this,Vd,new Set);this.options=r,de(this,Jn,e),de(this,Fa,null),de(this,ko,_I()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(R(this,ht).addObserver(this),k5(R(this,ht),this.options)?Le(this,xt,Vf).call(this):this.updateResult(),Le(this,xt,TI).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return RI(R(this,ht),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return RI(R(this,ht),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Le(this,xt,OI).call(this),Le(this,xt,PI).call(this),R(this,ht).removeObserver(this)}setOptions(e){const r=this.options,n=R(this,ht);if(this.options=R(this,Jn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Bs(this.options.enabled,R(this,ht))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Le(this,xt,II).call(this),R(this,ht).setOptions(this.options),r._defaulted&&!Hp(this.options,r)&&R(this,Jn).getQueryCache().notify({type:"observerOptionsUpdated",query:R(this,ht),observer:this});const s=this.hasListeners();s&&j5(R(this,ht),n,this.options,r)&&Le(this,xt,Vf).call(this),this.updateResult(),s&&(R(this,ht)!==n||Bs(this.options.enabled,R(this,ht))!==Bs(r.enabled,R(this,ht))||al(this.options.staleTime,R(this,ht))!==al(r.staleTime,R(this,ht)))&&Le(this,xt,CI).call(this);const i=Le(this,xt,kI).call(this);s&&(R(this,ht)!==n||Bs(this.options.enabled,R(this,ht))!==Bs(r.enabled,R(this,ht))||i!==R(this,qa))&&Le(this,xt,jI).call(this,i)}getOptimisticResult(e){const r=R(this,Jn).getQueryCache().build(R(this,Jn),e),n=this.createResult(r,e);return wpe(this,n)&&(de(this,On,n),de(this,Bd,this.options),de(this,bc,R(this,ht).state)),n}getCurrentResult(){return R(this,On)}trackResult(e,r){return new Proxy(e,{get:(n,s)=>(this.trackProp(s),r==null||r(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&R(this,ko).status==="pending"&&R(this,ko).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,s))})}trackProp(e){R(this,Vd).add(e)}getCurrentQuery(){return R(this,ht)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=R(this,Jn).defaultQueryOptions(e),n=R(this,Jn).getQueryCache().build(R(this,Jn),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(e){return Le(this,xt,Vf).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),R(this,On)))}createResult(e,r){var k;const n=R(this,ht),s=this.options,i=R(this,On),o=R(this,bc),a=R(this,Bd),u=e!==n?e.state:R(this,xm),{state:d}=e;let h={...d},f=!1,p;if(r._optimisticResults){const j=this.hasListeners(),T=!j&&k5(e,r),P=j&&j5(e,n,r,s);(T||P)&&(h={...h,...ure(d.data,e.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:m,errorUpdatedAt:g,status:y}=h;p=h.data;let v=!1;if(r.placeholderData!==void 0&&p===void 0&&y==="pending"){let j;i!=null&&i.isPlaceholderData&&r.placeholderData===(a==null?void 0:a.placeholderData)?(j=i.data,v=!0):j=typeof r.placeholderData=="function"?r.placeholderData((k=R(this,Wd))==null?void 0:k.state.data,R(this,Wd)):r.placeholderData,j!==void 0&&(y="success",p=EI(i==null?void 0:i.data,j,r),f=!0)}if(r.select&&p!==void 0&&!v)if(i&&p===(o==null?void 0:o.data)&&r.select===R(this,wm))p=R(this,zd);else try{de(this,wm,r.select),p=r.select(p),p=EI(i==null?void 0:i.data,p,r),de(this,zd,p),de(this,Fa,null)}catch(j){de(this,Fa,j)}R(this,Fa)&&(m=R(this,Fa),p=R(this,zd),g=Date.now(),y="error");const b=h.fetchStatus==="fetching",w=y==="pending",x=y==="error",S=w&&b,E=p!==void 0,_={status:y,fetchStatus:h.fetchStatus,isPending:w,isSuccess:y==="success",isError:x,isInitialLoading:S,isLoading:S,data:p,dataUpdatedAt:h.dataUpdatedAt,error:m,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:b,isRefetching:b&&!w,isLoadingError:x&&!E,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:x&&E,isStale:nA(e,r),refetch:this.refetch,promise:R(this,ko),isEnabled:Bs(r.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const j=O=>{_.status==="error"?O.reject(_.error):_.data!==void 0&&O.resolve(_.data)},T=()=>{const O=de(this,ko,_.promise=_I());j(O)},P=R(this,ko);switch(P.status){case"pending":e.queryHash===n.queryHash&&j(P);break;case"fulfilled":(_.status==="error"||_.data!==P.value)&&T();break;case"rejected":(_.status!=="error"||_.error!==P.reason)&&T();break}}return _}updateResult(){const e=R(this,On),r=this.createResult(R(this,ht),this.options);if(de(this,bc,R(this,ht).state),de(this,Bd,this.options),R(this,bc).data!==void 0&&de(this,Wd,R(this,ht)),Hp(r,e))return;de(this,On,r);const n=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!R(this,Vd).size)return!0;const o=new Set(i??R(this,Vd));return this.options.throwOnError&&o.add("error"),Object.keys(R(this,On)).some(a=>{const l=a;return R(this,On)[l]!==e[l]&&o.has(l)})};Le(this,xt,dre).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Le(this,xt,TI).call(this)}},Jn=new WeakMap,ht=new WeakMap,xm=new WeakMap,On=new WeakMap,bc=new WeakMap,Bd=new WeakMap,ko=new WeakMap,Fa=new WeakMap,wm=new WeakMap,zd=new WeakMap,Wd=new WeakMap,xc=new WeakMap,wc=new WeakMap,qa=new WeakMap,Vd=new WeakMap,xt=new WeakSet,Vf=function(e){Le(this,xt,II).call(this);let r=R(this,ht).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(En)),r},CI=function(){Le(this,xt,OI).call(this);const e=al(this.options.staleTime,R(this,ht));if(zc||R(this,On).isStale||!wI(e))return;const n=ire(R(this,On).dataUpdatedAt,e)+1;de(this,xc,nc.setTimeout(()=>{R(this,On).isStale||this.updateResult()},n))},kI=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(R(this,ht)):this.options.refetchInterval)??!1},jI=function(e){Le(this,xt,PI).call(this),de(this,qa,e),!(zc||Bs(this.options.enabled,R(this,ht))===!1||!wI(R(this,qa))||R(this,qa)===0)&&de(this,wc,nc.setInterval(()=>{(this.options.refetchIntervalInBackground||tA.isFocused())&&Le(this,xt,Vf).call(this)},R(this,qa)))},TI=function(){Le(this,xt,CI).call(this),Le(this,xt,jI).call(this,Le(this,xt,kI).call(this))},OI=function(){R(this,xc)&&(nc.clearTimeout(R(this,xc)),de(this,xc,void 0))},PI=function(){R(this,wc)&&(nc.clearInterval(R(this,wc)),de(this,wc,void 0))},II=function(){const e=R(this,Jn).getQueryCache().build(R(this,Jn),this.options);if(e===R(this,ht))return;const r=R(this,ht);de(this,ht,e),de(this,xm,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},dre=function(e){ur.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(R(this,On))}),R(this,Jn).getQueryCache().notify({query:R(this,ht),type:"observerResultsUpdated"})})},kZ);function xpe(t,e){return Bs(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function k5(t,e){return xpe(t,e)||t.state.data!==void 0&&RI(t,e,e.refetchOnMount)}function RI(t,e,r){if(Bs(e.enabled,t)!==!1&&al(e.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&nA(t,e)}return!1}function j5(t,e,r,n){return(t!==e||Bs(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&nA(t,r)}function nA(t,e){return Bs(e.enabled,t)!==!1&&t.isStaleByTime(al(e.staleTime,t))}function wpe(t,e){return!Hp(t.getCurrentResult(),e)}function T5(t){return{onFetch:(e,r)=>{var d,h,f,p,m;const n=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],o=((m=e.state.data)==null?void 0:m.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let g=!1;const y=w=>{fpe(w,()=>e.signal,()=>g=!0)},v=ore(e.options,e.fetchOptions),b=async(w,x,S)=>{if(g)return Promise.reject();if(x==null&&w.pages.length)return Promise.resolve(w);const N=(()=>{const T={client:e.client,queryKey:e.queryKey,pageParam:x,direction:S?"backward":"forward",meta:e.options.meta};return y(T),T})(),_=await v(N),{maxPages:k}=e.options,j=S?hpe:dpe;return{pages:j(w.pages,_,k),pageParams:j(w.pageParams,x,k)}};if(s&&i.length){const w=s==="backward",x=w?Spe:O5,S={pages:i,pageParams:o},E=x(n,S);a=await b(S,E,w)}else{const w=t??i.length;do{const x=l===0?o[0]??n.initialPageParam:O5(n,a);if(l>0&&x==null)break;a=await b(a,x),l++}while(l<w)}return a};e.options.persister?e.fetchFn=()=>{var g,y;return(y=(g=e.options).persister)==null?void 0:y.call(g,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=u}}}function O5(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function Spe(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var Sm,Bi,Pn,Sc,zi,ba,jZ,Epe=(jZ=class extends cre{constructor(e){super();Ce(this,zi);Ce(this,Sm);Ce(this,Bi);Ce(this,Pn);Ce(this,Sc);de(this,Sm,e.client),this.mutationId=e.mutationId,de(this,Pn,e.mutationCache),de(this,Bi,[]),this.state=e.state||hre(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){R(this,Bi).includes(e)||(R(this,Bi).push(e),this.clearGcTimeout(),R(this,Pn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){de(this,Bi,R(this,Bi).filter(r=>r!==e)),this.scheduleGc(),R(this,Pn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){R(this,Bi).length||(this.state.status==="pending"?this.scheduleGc():R(this,Pn).remove(this))}continue(){var e;return((e=R(this,Sc))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,l,u,d,h,f,p,m,g,y,v,b,w,x,S,E,N,_,k;const r=()=>{Le(this,zi,ba).call(this,{type:"continue"})},n={client:R(this,Sm),meta:this.options.meta,mutationKey:this.options.mutationKey};de(this,Sc,lre({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(j,T)=>{Le(this,zi,ba).call(this,{type:"failed",failureCount:j,error:T})},onPause:()=>{Le(this,zi,ba).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>R(this,Pn).canRun(this)}));const s=this.state.status==="pending",i=!R(this,Sc).canStart();try{if(s)r();else{Le(this,zi,ba).call(this,{type:"pending",variables:e,isPaused:i}),await((a=(o=R(this,Pn).config).onMutate)==null?void 0:a.call(o,e,this,n));const T=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,e,n));T!==this.state.context&&Le(this,zi,ba).call(this,{type:"pending",context:T,variables:e,isPaused:i})}const j=await R(this,Sc).start();return await((h=(d=R(this,Pn).config).onSuccess)==null?void 0:h.call(d,j,e,this.state.context,this,n)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,j,e,this.state.context,n)),await((g=(m=R(this,Pn).config).onSettled)==null?void 0:g.call(m,j,null,this.state.variables,this.state.context,this,n)),await((v=(y=this.options).onSettled)==null?void 0:v.call(y,j,null,e,this.state.context,n)),Le(this,zi,ba).call(this,{type:"success",data:j}),j}catch(j){try{await((w=(b=R(this,Pn).config).onError)==null?void 0:w.call(b,j,e,this.state.context,this,n))}catch(T){Promise.reject(T)}try{await((S=(x=this.options).onError)==null?void 0:S.call(x,j,e,this.state.context,n))}catch(T){Promise.reject(T)}try{await((N=(E=R(this,Pn).config).onSettled)==null?void 0:N.call(E,void 0,j,this.state.variables,this.state.context,this,n))}catch(T){Promise.reject(T)}try{await((k=(_=this.options).onSettled)==null?void 0:k.call(_,void 0,j,e,this.state.context,n))}catch(T){Promise.reject(T)}throw Le(this,zi,ba).call(this,{type:"error",error:j}),j}finally{R(this,Pn).runNext(this)}}},Sm=new WeakMap,Bi=new WeakMap,Pn=new WeakMap,Sc=new WeakMap,zi=new WeakSet,ba=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),ur.batch(()=>{R(this,Bi).forEach(n=>{n.onMutationUpdate(e)}),R(this,Pn).notify({mutation:this,type:"updated",action:e})})},jZ);function hre(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var jo,mi,Em,TZ,_pe=(TZ=class extends du{constructor(e={}){super();Ce(this,jo);Ce(this,mi);Ce(this,Em);this.config=e,de(this,jo,new Set),de(this,mi,new Map),de(this,Em,0)}build(e,r,n){const s=new Epe({client:e,mutationCache:this,mutationId:++Ag(this,Em)._,options:e.defaultMutationOptions(r),state:n});return this.add(s),s}add(e){R(this,jo).add(e);const r=Zg(e);if(typeof r=="string"){const n=R(this,mi).get(r);n?n.push(e):R(this,mi).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(R(this,jo).delete(e)){const r=Zg(e);if(typeof r=="string"){const n=R(this,mi).get(r);if(n)if(n.length>1){const s=n.indexOf(e);s!==-1&&n.splice(s,1)}else n[0]===e&&R(this,mi).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=Zg(e);if(typeof r=="string"){const n=R(this,mi).get(r),s=n==null?void 0:n.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var n;const r=Zg(e);if(typeof r=="string"){const s=(n=R(this,mi).get(r))==null?void 0:n.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ur.batch(()=>{R(this,jo).forEach(e=>{this.notify({type:"removed",mutation:e})}),R(this,jo).clear(),R(this,mi).clear()})}getAll(){return Array.from(R(this,jo))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>S5(r,n))}findAll(e={}){return this.getAll().filter(r=>S5(e,r))}notify(e){ur.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return ur.batch(()=>Promise.all(e.map(r=>r.continue().catch(En))))}},jo=new WeakMap,mi=new WeakMap,Em=new WeakMap,TZ);function Zg(t){var e;return(e=t.options.scope)==null?void 0:e.id}var To,La,Zn,Oo,Go,Fy,MI,OZ,Npe=(OZ=class extends du{constructor(e,r){super();Ce(this,Go);Ce(this,To);Ce(this,La);Ce(this,Zn);Ce(this,Oo);de(this,To,e),this.setOptions(r),this.bindMethods(),Le(this,Go,Fy).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var n;const r=this.options;this.options=R(this,To).defaultMutationOptions(e),Hp(this.options,r)||R(this,To).getMutationCache().notify({type:"observerOptionsUpdated",mutation:R(this,Zn),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Wc(r.mutationKey)!==Wc(this.options.mutationKey)?this.reset():((n=R(this,Zn))==null?void 0:n.state.status)==="pending"&&R(this,Zn).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=R(this,Zn))==null||e.removeObserver(this)}onMutationUpdate(e){Le(this,Go,Fy).call(this),Le(this,Go,MI).call(this,e)}getCurrentResult(){return R(this,La)}reset(){var e;(e=R(this,Zn))==null||e.removeObserver(this),de(this,Zn,void 0),Le(this,Go,Fy).call(this),Le(this,Go,MI).call(this)}mutate(e,r){var n;return de(this,Oo,r),(n=R(this,Zn))==null||n.removeObserver(this),de(this,Zn,R(this,To).getMutationCache().build(R(this,To),this.options)),R(this,Zn).addObserver(this),R(this,Zn).execute(e)}},To=new WeakMap,La=new WeakMap,Zn=new WeakMap,Oo=new WeakMap,Go=new WeakSet,Fy=function(){var r;const e=((r=R(this,Zn))==null?void 0:r.state)??hre();de(this,La,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},MI=function(e){ur.batch(()=>{var r,n,s,i,o,a,l,u;if(R(this,Oo)&&this.hasListeners()){const d=R(this,La).variables,h=R(this,La).context,f={client:R(this,To),meta:this.options.meta,mutationKey:this.options.mutationKey};if((e==null?void 0:e.type)==="success"){try{(n=(r=R(this,Oo)).onSuccess)==null||n.call(r,e.data,d,h,f)}catch(p){Promise.reject(p)}try{(i=(s=R(this,Oo)).onSettled)==null||i.call(s,e.data,null,d,h,f)}catch(p){Promise.reject(p)}}else if((e==null?void 0:e.type)==="error"){try{(a=(o=R(this,Oo)).onError)==null||a.call(o,e.error,d,h,f)}catch(p){Promise.reject(p)}try{(u=(l=R(this,Oo)).onSettled)==null||u.call(l,void 0,e.error,d,h,f)}catch(p){Promise.reject(p)}}}this.listeners.forEach(d=>{d(R(this,La))})})},OZ);function P5(t,e){const r=new Set(e);return t.filter(n=>!r.has(n))}function Cpe(t,e,r){const n=t.slice(0);return n[e]=r,n}var Ud,xs,Hd,Kd,Ls,Ba,_m,Nm,Cm,pn,AI,DI,$I,FI,qI,PZ,kpe=(PZ=class extends du{constructor(e,r,n){super();Ce(this,pn);Ce(this,Ud);Ce(this,xs);Ce(this,Hd);Ce(this,Kd);Ce(this,Ls);Ce(this,Ba);Ce(this,_m);Ce(this,Nm);Ce(this,Cm,[]);de(this,Ud,e),de(this,Kd,n),de(this,Hd,[]),de(this,Ls,[]),de(this,xs,[]),this.setQueries(r)}onSubscribe(){this.listeners.size===1&&R(this,Ls).forEach(e=>{e.subscribe(r=>{Le(this,pn,FI).call(this,e,r)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,R(this,Ls).forEach(e=>{e.destroy()})}setQueries(e,r){de(this,Hd,e),de(this,Kd,r),ur.batch(()=>{const n=R(this,Ls),s=Le(this,pn,$I).call(this,R(this,Hd));s.forEach(h=>h.observer.setOptions(h.defaultedQueryOptions));const i=s.map(h=>h.observer),o=i.map(h=>h.getCurrentResult()),a=n.length!==i.length,l=i.some((h,f)=>h!==n[f]),u=a||l,d=u?!0:o.some((h,f)=>{const p=R(this,xs)[f];return!p||!Hp(h,p)});!u&&!d||(u&&(de(this,Cm,s),de(this,Ls,i)),de(this,xs,o),this.hasListeners()&&(u&&(P5(n,i).forEach(h=>{h.destroy()}),P5(i,n).forEach(h=>{h.subscribe(f=>{Le(this,pn,FI).call(this,h,f)})})),Le(this,pn,qI).call(this)))})}getCurrentResult(){return R(this,xs)}getQueries(){return R(this,Ls).map(e=>e.getCurrentQuery())}getObservers(){return R(this,Ls)}getOptimisticResult(e,r){const n=Le(this,pn,$I).call(this,e),s=n.map(i=>i.observer.getOptimisticResult(i.defaultedQueryOptions));return[s,i=>Le(this,pn,DI).call(this,i??s,r),()=>Le(this,pn,AI).call(this,s,n)]}},Ud=new WeakMap,xs=new WeakMap,Hd=new WeakMap,Kd=new WeakMap,Ls=new WeakMap,Ba=new WeakMap,_m=new WeakMap,Nm=new WeakMap,Cm=new WeakMap,pn=new WeakSet,AI=function(e,r){return r.map((n,s)=>{const i=e[s];return n.defaultedQueryOptions.notifyOnChangeProps?i:n.observer.trackResult(i,o=>{r.forEach(a=>{a.observer.trackProp(o)})})})},DI=function(e,r){return r?((!R(this,Ba)||R(this,xs)!==R(this,Nm)||r!==R(this,_m))&&(de(this,_m,r),de(this,Nm,R(this,xs)),de(this,Ba,JM(R(this,Ba),r(e)))),R(this,Ba)):e},$I=function(e){const r=new Map;R(this,Ls).forEach(s=>{const i=s.options.queryHash;if(!i)return;const o=r.get(i);o?o.push(s):r.set(i,[s])});const n=[];return e.forEach(s=>{var l;const i=R(this,Ud).defaultQueryOptions(s),a=((l=r.get(i.queryHash))==null?void 0:l.shift())??new rA(R(this,Ud),i);n.push({defaultedQueryOptions:i,observer:a})}),n},FI=function(e,r){const n=R(this,Ls).indexOf(e);n!==-1&&(de(this,xs,Cpe(R(this,xs),n,r)),Le(this,pn,qI).call(this))},qI=function(){var e;if(this.hasListeners()){const r=R(this,Ba),n=Le(this,pn,AI).call(this,R(this,xs),R(this,Cm)),s=Le(this,pn,DI).call(this,n,(e=R(this,Kd))==null?void 0:e.combine);r!==s&&ur.batch(()=>{this.listeners.forEach(i=>{i(R(this,xs))})})}},PZ),Wi,IZ,jpe=(IZ=class extends du{constructor(e={}){super();Ce(this,Wi);this.config=e,de(this,Wi,new Map)}build(e,r,n){const s=r.queryKey,i=r.queryHash??XM(s,r);let o=this.get(i);return o||(o=new bpe({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){R(this,Wi).has(e.queryHash)||(R(this,Wi).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=R(this,Wi).get(e.queryHash);r&&(e.destroy(),r===e&&R(this,Wi).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ur.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return R(this,Wi).get(e)}getAll(){return[...R(this,Wi).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>w5(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>w5(e,n)):r}notify(e){ur.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){ur.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ur.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Wi=new WeakMap,IZ),ir,za,Wa,Gd,Yd,Va,Qd,Xd,RZ,Tpe=(RZ=class{constructor(t={}){Ce(this,ir);Ce(this,za);Ce(this,Wa);Ce(this,Gd);Ce(this,Yd);Ce(this,Va);Ce(this,Qd);Ce(this,Xd);de(this,ir,t.queryCache||new jpe),de(this,za,t.mutationCache||new _pe),de(this,Wa,t.defaultOptions||{}),de(this,Gd,new Map),de(this,Yd,new Map),de(this,Va,0)}mount(){Ag(this,Va)._++,R(this,Va)===1&&(de(this,Qd,tA.subscribe(async t=>{t&&(await this.resumePausedMutations(),R(this,ir).onFocus())})),de(this,Xd,kv.subscribe(async t=>{t&&(await this.resumePausedMutations(),R(this,ir).onOnline())})))}unmount(){var t,e;Ag(this,Va)._--,R(this,Va)===0&&((t=R(this,Qd))==null||t.call(this),de(this,Qd,void 0),(e=R(this,Xd))==null||e.call(this),de(this,Xd,void 0))}isFetching(t){return R(this,ir).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return R(this,za).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=R(this,ir).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=R(this,ir).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(al(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return R(this,ir).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),s=R(this,ir).get(n.queryHash),i=s==null?void 0:s.state.data,o=lpe(e,i);if(o!==void 0)return R(this,ir).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(t,e,r){return ur.batch(()=>R(this,ir).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=R(this,ir).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=R(this,ir);ur.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=R(this,ir);return ur.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=ur.batch(()=>R(this,ir).findAll(t).map(s=>s.cancel(r)));return Promise.all(n).then(En).catch(En)}invalidateQueries(t,e={}){return ur.batch(()=>(R(this,ir).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=ur.batch(()=>R(this,ir).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(En)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(En)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=R(this,ir).build(this,e);return r.isStaleByTime(al(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(En).catch(En)}fetchInfiniteQuery(t){return t.behavior=T5(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(En).catch(En)}ensureInfiniteQueryData(t){return t.behavior=T5(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return kv.isOnline()?R(this,za).resumePausedMutations():Promise.resolve()}getQueryCache(){return R(this,ir)}getMutationCache(){return R(this,za)}getDefaultOptions(){return R(this,Wa)}setDefaultOptions(t){de(this,Wa,t)}setQueryDefaults(t,e){R(this,Gd).set(Wc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...R(this,Gd).values()],r={};return e.forEach(n=>{Up(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){R(this,Yd).set(Wc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...R(this,Yd).values()],r={};return e.forEach(n=>{Up(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...R(this,Wa).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=XM(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ZM&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...R(this,Wa).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){R(this,ir).clear(),R(this,za).clear()}},ir=new WeakMap,za=new WeakMap,Wa=new WeakMap,Gd=new WeakMap,Yd=new WeakMap,Va=new WeakMap,Qd=new WeakMap,Xd=new WeakMap,RZ),fre=C.createContext(void 0),rt=t=>{const e=C.useContext(fre);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Ope=({client:t,children:e})=>(C.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),c.jsx(fre.Provider,{value:t,children:e})),pre=C.createContext(!1),mre=()=>C.useContext(pre);pre.Provider;function Ppe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Ipe=C.createContext(Ppe()),gre=()=>C.useContext(Ipe),yre=(t,e,r)=>{const n=r!=null&&r.state.error&&typeof t.throwOnError=="function"?eA(t.throwOnError,[r.state.error,r]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||n)&&(e.isReset()||(t.retryOnMount=!1))},vre=t=>{C.useEffect(()=>{t.clearReset()},[t])},bre=({result:t,errorResetBoundary:e,throwOnError:r,query:n,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&(s&&t.data===void 0||eA(r,[t.error,n])),xre=t=>{if(t.suspense){const r=s=>s==="static"?s:Math.max(s??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...s)=>r(n(...s)):r(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},wre=(t,e)=>t.isLoading&&t.isFetching&&!e,LI=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,jv=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function qy({queries:t,...e},r){const n=rt(),s=mre(),i=gre(),o=C.useMemo(()=>t.map(g=>{const y=n.defaultQueryOptions(g);return y._optimisticResults=s?"isRestoring":"optimistic",y}),[t,n,s]);o.forEach(g=>{xre(g);const y=n.getQueryCache().get(g.queryHash);yre(g,i,y)}),vre(i);const[a]=C.useState(()=>new kpe(n,o,e)),[l,u,d]=a.getOptimisticResult(o,e.combine),h=!s&&e.subscribed!==!1;C.useSyncExternalStore(C.useCallback(g=>h?a.subscribe(ur.batchCalls(g)):En,[a,h]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),C.useEffect(()=>{a.setQueries(o,e)},[o,e,a]);const p=l.some((g,y)=>LI(o[y],g))?l.flatMap((g,y)=>{const v=o[y];if(v){const b=new rA(n,v);if(LI(v,g))return jv(v,b,i);wre(g,s)&&jv(v,b,i)}return[]}):[];if(p.length>0)throw Promise.all(p);const m=l.find((g,y)=>{const v=o[y];return v&&bre({result:g,errorResetBoundary:i,throwOnError:v.throwOnError,query:n.getQueryCache().get(v.queryHash),suspense:v.suspense})});if(m!=null&&m.error)throw m.error;return u(d())}function Rpe(t,e,r){var f,p,m,g;const n=mre(),s=gre(),i=rt(),o=i.defaultQueryOptions(t);(p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||p.call(f,o);const a=i.getQueryCache().get(o.queryHash);o._optimisticResults=n?"isRestoring":"optimistic",xre(o),yre(o,s,a),vre(s);const l=!i.getQueryCache().get(o.queryHash),[u]=C.useState(()=>new e(i,o)),d=u.getOptimisticResult(o),h=!n&&t.subscribed!==!1;if(C.useSyncExternalStore(C.useCallback(y=>{const v=h?u.subscribe(ur.batchCalls(y)):En;return u.updateResult(),v},[u,h]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),C.useEffect(()=>{u.setOptions(o)},[o,u]),LI(o,d))throw jv(o,u,s);if(bre({result:d,errorResetBoundary:s,throwOnError:o.throwOnError,query:a,suspense:o.suspense}))throw d.error;if((g=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||g.call(m,o,d),o.experimental_prefetchInRender&&!zc&&wre(d,n)){const y=l?jv(o,u,s):a==null?void 0:a.promise;y==null||y.catch(En).finally(()=>{u.updateResult()})}return o.notifyOnChangeProps?d:u.trackResult(d)}function it(t,e){return Rpe(t,rA)}function Ke(t,e){const r=rt(),[n]=C.useState(()=>new Npe(r,t));C.useEffect(()=>{n.setOptions(t)},[n,t]);const s=C.useSyncExternalStore(C.useCallback(o=>n.subscribe(ur.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=C.useCallback((o,a)=>{n.mutate(o,a).catch(En)},[n]);if(s.error&&eA(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function sA(){const t=window.prmConfig||{};return C.useMemo(()=>({isLoggedIn:t.isLoggedIn||!1,userId:t.userId||null,loginUrl:t.loginUrl||"/wp-login.php",logoutUrl:t.logoutUrl||"/wp-login.php?action=logout",isLoading:!1}),[t.isLoggedIn,t.userId,t.loginUrl,t.logoutUrl])}function Sre(t,e){return function(){return t.apply(e,arguments)}}const{toString:Mpe}=Object.prototype,{getPrototypeOf:iA}=Object,{iterator:cb,toStringTag:Ere}=Symbol,ub=(t=>e=>{const r=Mpe.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ji=t=>(t=t.toLowerCase(),e=>ub(e)===t),db=t=>e=>typeof e===t,{isArray:Rh}=Array,oh=db("undefined");function Im(t){return t!==null&&!oh(t)&&t.constructor!==null&&!oh(t.constructor)&&ds(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const _re=ji("ArrayBuffer");function Ape(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&_re(t.buffer),e}const Dpe=db("string"),ds=db("function"),Nre=db("number"),Rm=t=>t!==null&&typeof t=="object",$pe=t=>t===!0||t===!1,Ly=t=>{if(ub(t)!=="object")return!1;const e=iA(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Ere in t)&&!(cb in t)},Fpe=t=>{if(!Rm(t)||Im(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},qpe=ji("Date"),Lpe=ji("File"),Bpe=ji("Blob"),zpe=ji("FileList"),Wpe=t=>Rm(t)&&ds(t.pipe),Vpe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ds(t.append)&&((e=ub(t))==="formdata"||e==="object"&&ds(t.toString)&&t.toString()==="[object FormData]"))},Upe=ji("URLSearchParams"),[Hpe,Kpe,Gpe,Ype]=["ReadableStream","Request","Response","Headers"].map(ji),Qpe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Mm(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,s;if(typeof t!="object"&&(t=[t]),Rh(t))for(n=0,s=t.length;n<s;n++)e.call(null,t[n],n,t);else{if(Im(t))return;const i=r?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(n=0;n<o;n++)a=i[n],e.call(null,t[a],a,t)}}function Cre(t,e){if(Im(t))return null;e=e.toLowerCase();const r=Object.keys(t);let n=r.length,s;for(;n-- >0;)if(s=r[n],e===s.toLowerCase())return s;return null}const sc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,kre=t=>!oh(t)&&t!==sc;function BI(){const{caseless:t,skipUndefined:e}=kre(this)&&this||{},r={},n=(s,i)=>{const o=t&&Cre(r,i)||i;Ly(r[o])&&Ly(s)?r[o]=BI(r[o],s):Ly(s)?r[o]=BI({},s):Rh(s)?r[o]=s.slice():(!e||!oh(s))&&(r[o]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&Mm(arguments[s],n);return r}const Xpe=(t,e,r,{allOwnKeys:n}={})=>(Mm(e,(s,i)=>{r&&ds(s)?t[i]=Sre(s,r):t[i]=s},{allOwnKeys:n}),t),Jpe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Zpe=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},eme=(t,e,r,n)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!n||n(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=r!==!1&&iA(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},tme=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},rme=t=>{if(!t)return null;if(Rh(t))return t;let e=t.length;if(!Nre(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},nme=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&iA(Uint8Array)),sme=(t,e)=>{const n=(t&&t[cb]).call(t);let s;for(;(s=n.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},ime=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},ome=ji("HTMLFormElement"),ame=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),I5=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),lme=ji("RegExp"),jre=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};Mm(r,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(n[i]=o||s)}),Object.defineProperties(t,n)},cme=t=>{jre(t,(e,r)=>{if(ds(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(ds(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},ume=(t,e)=>{const r={},n=s=>{s.forEach(i=>{r[i]=!0})};return Rh(t)?n(t):n(String(t).split(e)),r},dme=()=>{},hme=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function fme(t){return!!(t&&ds(t.append)&&t[Ere]==="FormData"&&t[cb])}const pme=t=>{const e=new Array(10),r=(n,s)=>{if(Rm(n)){if(e.indexOf(n)>=0)return;if(Im(n))return n;if(!("toJSON"in n)){e[s]=n;const i=Rh(n)?[]:{};return Mm(n,(o,a)=>{const l=r(o,s+1);!oh(l)&&(i[a]=l)}),e[s]=void 0,i}}return n};return r(t,0)},mme=ji("AsyncFunction"),gme=t=>t&&(Rm(t)||ds(t))&&ds(t.then)&&ds(t.catch),Tre=((t,e)=>t?setImmediate:e?((r,n)=>(sc.addEventListener("message",({source:s,data:i})=>{s===sc&&i===r&&n.length&&n.shift()()},!1),s=>{n.push(s),sc.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",ds(sc.postMessage)),yme=typeof queueMicrotask<"u"?queueMicrotask.bind(sc):typeof process<"u"&&process.nextTick||Tre,vme=t=>t!=null&&ds(t[cb]),W={isArray:Rh,isArrayBuffer:_re,isBuffer:Im,isFormData:Vpe,isArrayBufferView:Ape,isString:Dpe,isNumber:Nre,isBoolean:$pe,isObject:Rm,isPlainObject:Ly,isEmptyObject:Fpe,isReadableStream:Hpe,isRequest:Kpe,isResponse:Gpe,isHeaders:Ype,isUndefined:oh,isDate:qpe,isFile:Lpe,isBlob:Bpe,isRegExp:lme,isFunction:ds,isStream:Wpe,isURLSearchParams:Upe,isTypedArray:nme,isFileList:zpe,forEach:Mm,merge:BI,extend:Xpe,trim:Qpe,stripBOM:Jpe,inherits:Zpe,toFlatObject:eme,kindOf:ub,kindOfTest:ji,endsWith:tme,toArray:rme,forEachEntry:sme,matchAll:ime,isHTMLForm:ome,hasOwnProperty:I5,hasOwnProp:I5,reduceDescriptors:jre,freezeMethods:cme,toObjectSet:ume,toCamelCase:ame,noop:dme,toFiniteNumber:hme,findKey:Cre,global:sc,isContextDefined:kre,isSpecCompliantForm:fme,toJSONObject:pme,isAsyncFn:mme,isThenable:gme,setImmediate:Tre,asap:yme,isIterable:vme};function Ye(t,e,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}W.inherits(Ye,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:W.toJSONObject(this.config),code:this.code,status:this.status}}});const Ore=Ye.prototype,Pre={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Pre[t]={value:t}});Object.defineProperties(Ye,Pre);Object.defineProperty(Ore,"isAxiosError",{value:!0});Ye.from=(t,e,r,n,s,i)=>{const o=Object.create(Ore);W.toFlatObject(t,o,function(d){return d!==Error.prototype},u=>u!=="isAxiosError");const a=t&&t.message?t.message:"Error",l=e==null&&t?t.code:e;return Ye.call(o,a,l,r,n,s),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",i&&Object.assign(o,i),o};const bme=null;function zI(t){return W.isPlainObject(t)||W.isArray(t)}function Ire(t){return W.endsWith(t,"[]")?t.slice(0,-2):t}function R5(t,e,r){return t?t.concat(e).map(function(s,i){return s=Ire(s),!r&&i?"["+s+"]":s}).join(r?".":""):e}function xme(t){return W.isArray(t)&&!t.some(zI)}const wme=W.toFlatObject(W,{},null,function(e){return/^is[A-Z]/.test(e)});function hb(t,e,r){if(!W.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=W.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,y){return!W.isUndefined(y[g])});const n=r.metaTokens,s=r.visitor||d,i=r.dots,o=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&W.isSpecCompliantForm(e);if(!W.isFunction(s))throw new TypeError("visitor must be a function");function u(m){if(m===null)return"";if(W.isDate(m))return m.toISOString();if(W.isBoolean(m))return m.toString();if(!l&&W.isBlob(m))throw new Ye("Blob is not supported. Use a Buffer instead.");return W.isArrayBuffer(m)||W.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,g,y){let v=m;if(m&&!y&&typeof m=="object"){if(W.endsWith(g,"{}"))g=n?g:g.slice(0,-2),m=JSON.stringify(m);else if(W.isArray(m)&&xme(m)||(W.isFileList(m)||W.endsWith(g,"[]"))&&(v=W.toArray(m)))return g=Ire(g),v.forEach(function(w,x){!(W.isUndefined(w)||w===null)&&e.append(o===!0?R5([g],x,i):o===null?g:g+"[]",u(w))}),!1}return zI(m)?!0:(e.append(R5(y,g,i),u(m)),!1)}const h=[],f=Object.assign(wme,{defaultVisitor:d,convertValue:u,isVisitable:zI});function p(m,g){if(!W.isUndefined(m)){if(h.indexOf(m)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(m),W.forEach(m,function(v,b){(!(W.isUndefined(v)||v===null)&&s.call(e,v,W.isString(b)?b.trim():b,g,f))===!0&&p(v,g?g.concat(b):[b])}),h.pop()}}if(!W.isObject(t))throw new TypeError("data must be an object");return p(t),e}function M5(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function oA(t,e){this._pairs=[],t&&hb(t,this,e)}const Rre=oA.prototype;Rre.append=function(e,r){this._pairs.push([e,r])};Rre.toString=function(e){const r=e?function(n){return e.call(this,n,M5)}:M5;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function Sme(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Mre(t,e,r){if(!e)return t;const n=r&&r.encode||Sme;W.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let i;if(s?i=s(e,r):i=W.isURLSearchParams(e)?e.toString():new oA(e,r).toString(n),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class A5{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){W.forEach(this.handlers,function(n){n!==null&&e(n)})}}const Are={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Eme=typeof URLSearchParams<"u"?URLSearchParams:oA,_me=typeof FormData<"u"?FormData:null,Nme=typeof Blob<"u"?Blob:null,Cme={isBrowser:!0,classes:{URLSearchParams:Eme,FormData:_me,Blob:Nme},protocols:["http","https","file","blob","url","data"]},aA=typeof window<"u"&&typeof document<"u",WI=typeof navigator=="object"&&navigator||void 0,kme=aA&&(!WI||["ReactNative","NativeScript","NS"].indexOf(WI.product)<0),jme=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Tme=aA&&window.location.href||"http://localhost",Ome=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:aA,hasStandardBrowserEnv:kme,hasStandardBrowserWebWorkerEnv:jme,navigator:WI,origin:Tme},Symbol.toStringTag,{value:"Module"})),Cn={...Ome,...Cme};function Pme(t,e){return hb(t,new Cn.classes.URLSearchParams,{visitor:function(r,n,s,i){return Cn.isNode&&W.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function Ime(t){return W.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Rme(t){const e={},r=Object.keys(t);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],e[i]=t[i];return e}function Dre(t){function e(r,n,s,i){let o=r[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=i>=r.length;return o=!o&&W.isArray(s)?s.length:o,l?(W.hasOwnProp(s,o)?s[o]=[s[o],n]:s[o]=n,!a):((!s[o]||!W.isObject(s[o]))&&(s[o]=[]),e(r,n,s[o],i)&&W.isArray(s[o])&&(s[o]=Rme(s[o])),!a)}if(W.isFormData(t)&&W.isFunction(t.entries)){const r={};return W.forEachEntry(t,(n,s)=>{e(Ime(n),s,r,0)}),r}return null}function Mme(t,e,r){if(W.isString(t))try{return(e||JSON.parse)(t),W.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const Am={transitional:Are,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,i=W.isObject(e);if(i&&W.isHTMLForm(e)&&(e=new FormData(e)),W.isFormData(e))return s?JSON.stringify(Dre(e)):e;if(W.isArrayBuffer(e)||W.isBuffer(e)||W.isStream(e)||W.isFile(e)||W.isBlob(e)||W.isReadableStream(e))return e;if(W.isArrayBufferView(e))return e.buffer;if(W.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Pme(e,this.formSerializer).toString();if((a=W.isFileList(e))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return hb(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(r.setContentType("application/json",!1),Mme(e)):e}],transformResponse:[function(e){const r=this.transitional||Am.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(W.isResponse(e)||W.isReadableStream(e))return e;if(e&&W.isString(e)&&(n&&!this.responseType||s)){const o=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?Ye.from(a,Ye.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Cn.classes.FormData,Blob:Cn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};W.forEach(["delete","get","head","post","put","patch"],t=>{Am.headers[t]={}});const Ame=W.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Dme=t=>{const e={};let r,n,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),r=o.substring(0,s).trim().toLowerCase(),n=o.substring(s+1).trim(),!(!r||e[r]&&Ame[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},D5=Symbol("internals");function Cf(t){return t&&String(t).trim().toLowerCase()}function By(t){return t===!1||t==null?t:W.isArray(t)?t.map(By):String(t)}function $me(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const Fme=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function n1(t,e,r,n,s){if(W.isFunction(n))return n.call(this,e,r);if(s&&(e=r),!!W.isString(e)){if(W.isString(n))return e.indexOf(n)!==-1;if(W.isRegExp(n))return n.test(e)}}function qme(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function Lme(t,e){const r=W.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(s,i,o){return this[n].call(this,e,s,i,o)},configurable:!0})})}let hs=class{constructor(e){e&&this.set(e)}set(e,r,n){const s=this;function i(a,l,u){const d=Cf(l);if(!d)throw new Error("header name must be a non-empty string");const h=W.findKey(s,d);(!h||s[h]===void 0||u===!0||u===void 0&&s[h]!==!1)&&(s[h||l]=By(a))}const o=(a,l)=>W.forEach(a,(u,d)=>i(u,d,l));if(W.isPlainObject(e)||e instanceof this.constructor)o(e,r);else if(W.isString(e)&&(e=e.trim())&&!Fme(e))o(Dme(e),r);else if(W.isObject(e)&&W.isIterable(e)){let a={},l,u;for(const d of e){if(!W.isArray(d))throw TypeError("Object iterator must return a key-value pair");a[u=d[0]]=(l=a[u])?W.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}o(a,r)}else e!=null&&i(r,e,n);return this}get(e,r){if(e=Cf(e),e){const n=W.findKey(this,e);if(n){const s=this[n];if(!r)return s;if(r===!0)return $me(s);if(W.isFunction(r))return r.call(this,s,n);if(W.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=Cf(e),e){const n=W.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||n1(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let s=!1;function i(o){if(o=Cf(o),o){const a=W.findKey(n,o);a&&(!r||n1(n,n[a],a,r))&&(delete n[a],s=!0)}}return W.isArray(e)?e.forEach(i):i(e),s}clear(e){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const i=r[n];(!e||n1(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const r=this,n={};return W.forEach(this,(s,i)=>{const o=W.findKey(n,i);if(o){r[o]=By(s),delete r[i];return}const a=e?qme(i):String(i).trim();a!==i&&delete r[i],r[a]=By(s),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return W.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=e&&W.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[D5]=this[D5]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=Cf(o);n[a]||(Lme(s,o),n[a]=!0)}return W.isArray(e)?e.forEach(i):i(e),this}};hs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);W.reduceDescriptors(hs.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});W.freezeMethods(hs);function s1(t,e){const r=this||Am,n=e||r,s=hs.from(n.headers);let i=n.data;return W.forEach(t,function(a){i=a.call(r,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function $re(t){return!!(t&&t.__CANCEL__)}function Mh(t,e,r){Ye.call(this,t??"canceled",Ye.ERR_CANCELED,e,r),this.name="CanceledError"}W.inherits(Mh,Ye,{__CANCEL__:!0});function Fre(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new Ye("Request failed with status code "+r.status,[Ye.ERR_BAD_REQUEST,Ye.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Bme(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function zme(t,e){t=t||10;const r=new Array(t),n=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),d=n[i];o||(o=u),r[s]=l,n[s]=u;let h=i,f=0;for(;h!==s;)f+=r[h++],h=h%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),u-o<e)return;const p=d&&u-d;return p?Math.round(f*1e3/p):void 0}}function Wme(t,e){let r=0,n=1e3/e,s,i;const o=(u,d=Date.now())=>{r=d,s=null,i&&(clearTimeout(i),i=null),t(...u)};return[(...u)=>{const d=Date.now(),h=d-r;h>=n?o(u,d):(s=u,i||(i=setTimeout(()=>{i=null,o(s)},n-h)))},()=>s&&o(s)]}const Tv=(t,e,r=3)=>{let n=0;const s=zme(50,250);return Wme(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,l=o-n,u=s(l),d=o<=a;n=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&d?(a-o)/u:void 0,event:i,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},r)},$5=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},F5=t=>(...e)=>W.asap(()=>t(...e)),Vme=Cn.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,Cn.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(Cn.origin),Cn.navigator&&/(msie|trident)/i.test(Cn.navigator.userAgent)):()=>!0,Ume=Cn.hasStandardBrowserEnv?{write(t,e,r,n,s,i,o){if(typeof document>"u")return;const a=[`${t}=${encodeURIComponent(e)}`];W.isNumber(r)&&a.push(`expires=${new Date(r).toUTCString()}`),W.isString(n)&&a.push(`path=${n}`),W.isString(s)&&a.push(`domain=${s}`),i===!0&&a.push("secure"),W.isString(o)&&a.push(`SameSite=${o}`),document.cookie=a.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Hme(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Kme(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function qre(t,e,r){let n=!Hme(e);return t&&(n||r==!1)?Kme(t,e):e}const q5=t=>t instanceof hs?{...t}:t;function Vc(t,e){e=e||{};const r={};function n(u,d,h,f){return W.isPlainObject(u)&&W.isPlainObject(d)?W.merge.call({caseless:f},u,d):W.isPlainObject(d)?W.merge({},d):W.isArray(d)?d.slice():d}function s(u,d,h,f){if(W.isUndefined(d)){if(!W.isUndefined(u))return n(void 0,u,h,f)}else return n(u,d,h,f)}function i(u,d){if(!W.isUndefined(d))return n(void 0,d)}function o(u,d){if(W.isUndefined(d)){if(!W.isUndefined(u))return n(void 0,u)}else return n(void 0,d)}function a(u,d,h){if(h in e)return n(u,d);if(h in t)return n(void 0,u)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,d,h)=>s(q5(u),q5(d),h,!0)};return W.forEach(Object.keys({...t,...e}),function(d){const h=l[d]||s,f=h(t[d],e[d],d);W.isUndefined(f)&&h!==a||(r[d]=f)}),r}const Lre=t=>{const e=Vc({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:a}=e;if(e.headers=o=hs.from(o),e.url=Mre(qre(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),W.isFormData(r)){if(Cn.hasStandardBrowserEnv||Cn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(W.isFunction(r.getHeaders)){const l=r.getHeaders(),u=["content-type","content-length"];Object.entries(l).forEach(([d,h])=>{u.includes(d.toLowerCase())&&o.set(d,h)})}}if(Cn.hasStandardBrowserEnv&&(n&&W.isFunction(n)&&(n=n(e)),n||n!==!1&&Vme(e.url))){const l=s&&i&&Ume.read(i);l&&o.set(s,l)}return e},Gme=typeof XMLHttpRequest<"u",Yme=Gme&&function(t){return new Promise(function(r,n){const s=Lre(t);let i=s.data;const o=hs.from(s.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:u}=s,d,h,f,p,m;function g(){p&&p(),m&&m(),s.cancelToken&&s.cancelToken.unsubscribe(d),s.signal&&s.signal.removeEventListener("abort",d)}let y=new XMLHttpRequest;y.open(s.method.toUpperCase(),s.url,!0),y.timeout=s.timeout;function v(){if(!y)return;const w=hs.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),S={data:!a||a==="text"||a==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:w,config:t,request:y};Fre(function(N){r(N),g()},function(N){n(N),g()},S),y=null}"onloadend"in y?y.onloadend=v:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(v)},y.onabort=function(){y&&(n(new Ye("Request aborted",Ye.ECONNABORTED,t,y)),y=null)},y.onerror=function(x){const S=x&&x.message?x.message:"Network Error",E=new Ye(S,Ye.ERR_NETWORK,t,y);E.event=x||null,n(E),y=null},y.ontimeout=function(){let x=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const S=s.transitional||Are;s.timeoutErrorMessage&&(x=s.timeoutErrorMessage),n(new Ye(x,S.clarifyTimeoutError?Ye.ETIMEDOUT:Ye.ECONNABORTED,t,y)),y=null},i===void 0&&o.setContentType(null),"setRequestHeader"in y&&W.forEach(o.toJSON(),function(x,S){y.setRequestHeader(S,x)}),W.isUndefined(s.withCredentials)||(y.withCredentials=!!s.withCredentials),a&&a!=="json"&&(y.responseType=s.responseType),u&&([f,m]=Tv(u,!0),y.addEventListener("progress",f)),l&&y.upload&&([h,p]=Tv(l),y.upload.addEventListener("progress",h),y.upload.addEventListener("loadend",p)),(s.cancelToken||s.signal)&&(d=w=>{y&&(n(!w||w.type?new Mh(null,t,y):w),y.abort(),y=null)},s.cancelToken&&s.cancelToken.subscribe(d),s.signal&&(s.signal.aborted?d():s.signal.addEventListener("abort",d)));const b=Bme(s.url);if(b&&Cn.protocols.indexOf(b)===-1){n(new Ye("Unsupported protocol "+b+":",Ye.ERR_BAD_REQUEST,t));return}y.send(i||null)})},Qme=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,s;const i=function(u){if(!s){s=!0,a();const d=u instanceof Error?u:this.reason;n.abort(d instanceof Ye?d:new Mh(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,i(new Ye(`timeout ${e} of ms exceeded`,Ye.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),t=null)};t.forEach(u=>u.addEventListener("abort",i));const{signal:l}=n;return l.unsubscribe=()=>W.asap(a),l}},Xme=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,s;for(;n<r;)s=n+e,yield t.slice(n,s),n=s},Jme=async function*(t,e){for await(const r of Zme(t))yield*Xme(r,e)},Zme=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},L5=(t,e,r,n)=>{const s=Jme(t,e);let i=0,o,a=l=>{o||(o=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:u,value:d}=await s.next();if(u){a(),l.close();return}let h=d.byteLength;if(r){let f=i+=h;r(f)}l.enqueue(new Uint8Array(d))}catch(u){throw a(u),u}},cancel(l){return a(l),s.return()}},{highWaterMark:2})},B5=64*1024,{isFunction:ey}=W,ege=(({Request:t,Response:e})=>({Request:t,Response:e}))(W.global),{ReadableStream:z5,TextEncoder:W5}=W.global,V5=(t,...e)=>{try{return!!t(...e)}catch{return!1}},tge=t=>{t=W.merge.call({skipUndefined:!0},ege,t);const{fetch:e,Request:r,Response:n}=t,s=e?ey(e):typeof fetch=="function",i=ey(r),o=ey(n);if(!s)return!1;const a=s&&ey(z5),l=s&&(typeof W5=="function"?(m=>g=>m.encode(g))(new W5):async m=>new Uint8Array(await new r(m).arrayBuffer())),u=i&&a&&V5(()=>{let m=!1;const g=new r(Cn.origin,{body:new z5,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!g}),d=o&&a&&V5(()=>W.isReadableStream(new n("").body)),h={stream:d&&(m=>m.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!h[m]&&(h[m]=(g,y)=>{let v=g&&g[m];if(v)return v.call(g);throw new Ye(`Response type '${m}' is not supported`,Ye.ERR_NOT_SUPPORT,y)})});const f=async m=>{if(m==null)return 0;if(W.isBlob(m))return m.size;if(W.isSpecCompliantForm(m))return(await new r(Cn.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(W.isArrayBufferView(m)||W.isArrayBuffer(m))return m.byteLength;if(W.isURLSearchParams(m)&&(m=m+""),W.isString(m))return(await l(m)).byteLength},p=async(m,g)=>{const y=W.toFiniteNumber(m.getContentLength());return y??f(g)};return async m=>{let{url:g,method:y,data:v,signal:b,cancelToken:w,timeout:x,onDownloadProgress:S,onUploadProgress:E,responseType:N,headers:_,withCredentials:k="same-origin",fetchOptions:j}=Lre(m),T=e||fetch;N=N?(N+"").toLowerCase():"text";let P=Qme([b,w&&w.toAbortSignal()],x),O=null;const D=P&&P.unsubscribe&&(()=>{P.unsubscribe()});let F;try{if(E&&u&&y!=="get"&&y!=="head"&&(F=await p(_,v))!==0){let H=new r(g,{method:"POST",body:v,duplex:"half"}),me;if(W.isFormData(v)&&(me=H.headers.get("content-type"))&&_.setContentType(me),H.body){const[G,oe]=$5(F,Tv(F5(E)));v=L5(H.body,B5,G,oe)}}W.isString(k)||(k=k?"include":"omit");const $=i&&"credentials"in r.prototype,q={...j,signal:P,method:y.toUpperCase(),headers:_.normalize().toJSON(),body:v,duplex:"half",credentials:$?k:void 0};O=i&&new r(g,q);let M=await(i?T(O,j):T(g,q));const z=d&&(N==="stream"||N==="response");if(d&&(S||z&&D)){const H={};["status","statusText","headers"].forEach(Ie=>{H[Ie]=M[Ie]});const me=W.toFiniteNumber(M.headers.get("content-length")),[G,oe]=S&&$5(me,Tv(F5(S),!0))||[];M=new n(L5(M.body,B5,G,()=>{oe&&oe(),D&&D()}),H)}N=N||"text";let Y=await h[W.findKey(h,N)||"text"](M,m);return!z&&D&&D(),await new Promise((H,me)=>{Fre(H,me,{data:Y,headers:hs.from(M.headers),status:M.status,statusText:M.statusText,config:m,request:O})})}catch($){throw D&&D(),$&&$.name==="TypeError"&&/Load failed|fetch/i.test($.message)?Object.assign(new Ye("Network Error",Ye.ERR_NETWORK,m,O),{cause:$.cause||$}):Ye.from($,$&&$.code,m,O)}}},rge=new Map,Bre=t=>{let e=t&&t.env||{};const{fetch:r,Request:n,Response:s}=e,i=[n,s,r];let o=i.length,a=o,l,u,d=rge;for(;a--;)l=i[a],u=d.get(l),u===void 0&&d.set(l,u=a?new Map:tge(e)),d=u;return u};Bre();const lA={http:bme,xhr:Yme,fetch:{get:Bre}};W.forEach(lA,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const U5=t=>`- ${t}`,nge=t=>W.isFunction(t)||t===null||t===!1;function sge(t,e){t=W.isArray(t)?t:[t];const{length:r}=t;let n,s;const i={};for(let o=0;o<r;o++){n=t[o];let a;if(s=n,!nge(n)&&(s=lA[(a=String(n)).toLowerCase()],s===void 0))throw new Ye(`Unknown adapter '${a}'`);if(s&&(W.isFunction(s)||(s=s.get(e))))break;i[a||"#"+o]=s}if(!s){const o=Object.entries(i).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=r?o.length>1?`since :
`+o.map(U5).join(`
`):" "+U5(o[0]):"as no adapter specified";throw new Ye("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return s}const zre={getAdapter:sge,adapters:lA};function i1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Mh(null,t)}function H5(t){return i1(t),t.headers=hs.from(t.headers),t.data=s1.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),zre.getAdapter(t.adapter||Am.adapter,t)(t).then(function(n){return i1(t),n.data=s1.call(t,t.transformResponse,n),n.headers=hs.from(n.headers),n},function(n){return $re(n)||(i1(t),n&&n.response&&(n.response.data=s1.call(t,t.transformResponse,n.response),n.response.headers=hs.from(n.response.headers))),Promise.reject(n)})}const Wre="1.13.2",fb={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{fb[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const K5={};fb.transitional=function(e,r,n){function s(i,o){return"[Axios v"+Wre+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,a)=>{if(e===!1)throw new Ye(s(o," has been removed"+(r?" in "+r:"")),Ye.ERR_DEPRECATED);return r&&!K5[o]&&(K5[o]=!0,console.warn(s(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(i,o,a):!0}};fb.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function ige(t,e,r){if(typeof t!="object")throw new Ye("options must be an object",Ye.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let s=n.length;for(;s-- >0;){const i=n[s],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new Ye("option "+i+" must be "+l,Ye.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ye("Unknown option "+i,Ye.ERR_BAD_OPTION)}}const zy={assertOptions:ige,validators:fb},Ai=zy.validators;let Nc=class{constructor(e){this.defaults=e||{},this.interceptors={request:new A5,response:new A5}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Vc(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:i}=r;n!==void 0&&zy.assertOptions(n,{silentJSONParsing:Ai.transitional(Ai.boolean),forcedJSONParsing:Ai.transitional(Ai.boolean),clarifyTimeoutError:Ai.transitional(Ai.boolean)},!1),s!=null&&(W.isFunction(s)?r.paramsSerializer={serialize:s}:zy.assertOptions(s,{encode:Ai.function,serialize:Ai.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),zy.assertOptions(r,{baseUrl:Ai.spelling("baseURL"),withXsrfToken:Ai.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&W.merge(i.common,i[r.method]);i&&W.forEach(["delete","get","head","post","put","patch","common"],m=>{delete i[m]}),r.headers=hs.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const u=[];this.interceptors.response.forEach(function(g){u.push(g.fulfilled,g.rejected)});let d,h=0,f;if(!l){const m=[H5.bind(this),void 0];for(m.unshift(...a),m.push(...u),f=m.length,d=Promise.resolve(r);h<f;)d=d.then(m[h++],m[h++]);return d}f=a.length;let p=r;for(;h<f;){const m=a[h++],g=a[h++];try{p=m(p)}catch(y){g.call(this,y);break}}try{d=H5.call(this,p)}catch(m){return Promise.reject(m)}for(h=0,f=u.length;h<f;)d=d.then(u[h++],u[h++]);return d}getUri(e){e=Vc(this.defaults,e);const r=qre(e.baseURL,e.url,e.allowAbsoluteUrls);return Mre(r,e.params,e.paramsSerializer)}};W.forEach(["delete","get","head","options"],function(e){Nc.prototype[e]=function(r,n){return this.request(Vc(n||{},{method:e,url:r,data:(n||{}).data}))}});W.forEach(["post","put","patch"],function(e){function r(n){return function(i,o,a){return this.request(Vc(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Nc.prototype[e]=r(),Nc.prototype[e+"Form"]=r(!0)});let oge=class Vre{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{n.subscribe(a),i=a}).then(s);return o.cancel=function(){n.unsubscribe(i)},o},e(function(i,o,a){n.reason||(n.reason=new Mh(i,o,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new Vre(function(s){e=s}),cancel:e}}};function age(t){return function(r){return t.apply(null,r)}}function lge(t){return W.isObject(t)&&t.isAxiosError===!0}const VI={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(VI).forEach(([t,e])=>{VI[e]=t});function Ure(t){const e=new Nc(t),r=Sre(Nc.prototype.request,e);return W.extend(r,Nc.prototype,e,{allOwnKeys:!0}),W.extend(r,e,null,{allOwnKeys:!0}),r.create=function(s){return Ure(Vc(t,s))},r}const br=Ure(Am);br.Axios=Nc;br.CanceledError=Mh;br.CancelToken=oge;br.isCancel=$re;br.VERSION=Wre;br.toFormData=hb;br.AxiosError=Ye;br.Cancel=br.CanceledError;br.all=function(e){return Promise.all(e)};br.spread=age;br.isAxiosError=lge;br.mergeConfig=Vc;br.AxiosHeaders=hs;br.formToJSON=t=>Dre(W.isHTMLForm(t)?new FormData(t):t);br.getAdapter=zre.getAdapter;br.HttpStatusCode=VI;br.default=br;const{Axios:RLe,AxiosError:MLe,CanceledError:ALe,isCancel:DLe,CancelToken:$Le,VERSION:FLe,all:qLe,Cancel:LLe,isAxiosError:BLe,spread:zLe,toFormData:WLe,AxiosHeaders:VLe,HttpStatusCode:ULe,formToJSON:HLe,getAdapter:KLe,mergeConfig:GLe}=br,UI=window.prmConfig||{},X=br.create({baseURL:UI.apiUrl||"/wp-json",headers:{"Content-Type":"application/json","X-WP-Nonce":UI.nonce||""}});X.interceptors.request.use(t=>{var e;return(e=window.prmConfig)!=null&&e.nonce&&(t.headers["X-WP-Nonce"]=window.prmConfig.nonce),t});X.interceptors.response.use(t=>t,t=>{var e;return((e=t.response)==null?void 0:e.status)===401&&(window.location.href=UI.loginUrl||"/wp-login.php"),Promise.reject(t)});const Je={getPeople:t=>X.get("/wp/v2/people",{params:t}),getPerson:(t,e={})=>X.get(`/wp/v2/people/${t}`,{params:e}),createPerson:t=>X.post("/wp/v2/people",t),updatePerson:(t,e)=>X.put(`/wp/v2/people/${t}`,e),deletePerson:(t,e={})=>X.delete(`/wp/v2/people/${t}`,{params:e}),getCompanies:t=>X.get("/wp/v2/companies",{params:t}),getCompany:(t,e={})=>X.get(`/wp/v2/companies/${t}`,{params:e}),createCompany:t=>X.post("/wp/v2/companies",t),updateCompany:(t,e)=>X.put(`/wp/v2/companies/${t}`,e),deleteCompany:(t,e={})=>X.delete(`/wp/v2/companies/${t}`,{params:e}),getDates:t=>X.get("/wp/v2/important-dates",{params:t}),getDate:t=>X.get(`/wp/v2/important-dates/${t}`),createDate:t=>X.post("/wp/v2/important-dates",t),updateDate:(t,e)=>X.put(`/wp/v2/important-dates/${t}`,e),deleteDate:t=>X.delete(`/wp/v2/important-dates/${t}`),getPersonLabels:()=>X.get("/wp/v2/person_label"),getCompanyLabels:()=>X.get("/wp/v2/company_label"),getRelationshipTypes:()=>X.get("/wp/v2/relationship_type",{params:{per_page:100,_fields:"id,name,slug,acf"}}),createRelationshipType:t=>X.post("/wp/v2/relationship_type",t),updateRelationshipType:(t,e)=>X.post(`/wp/v2/relationship_type/${t}`,e),deleteRelationshipType:t=>X.delete(`/wp/v2/relationship_type/${t}?force=true`),restoreRelationshipTypeDefaults:()=>X.post("/prm/v1/relationship-types/restore-defaults"),getDateTypes:()=>X.get("/wp/v2/date_type",{params:{per_page:100}}),uploadMedia:t=>{const e=new FormData;return e.append("file",t),X.post("/wp/v2/media",e,{headers:{"Content-Type":"multipart/form-data"}})}},Ee={getVersion:()=>X.get("/prm/v1/version"),getDashboard:()=>X.get("/prm/v1/dashboard"),sideloadGravatar:(t,e)=>X.post(`/prm/v1/people/${t}/gravatar`,{email:e}),bulkUpdatePeople:(t,e)=>X.post("/prm/v1/people/bulk-update",{ids:t,updates:e}),getCurrentUser:()=>X.get("/prm/v1/user/me"),getUsers:()=>X.get("/prm/v1/users"),approveUser:t=>X.post(`/prm/v1/users/${t}/approve`),denyUser:t=>X.post(`/prm/v1/users/${t}/deny`),deleteUser:t=>X.delete(`/prm/v1/users/${t}`),search:t=>X.get("/prm/v1/search",{params:{q:t}}),getReminders:(t=30)=>X.get("/prm/v1/reminders",{params:{days_ahead:t}}),triggerReminders:()=>X.post("/prm/v1/reminders/trigger"),rescheduleCronJobs:()=>X.post("/prm/v1/reminders/reschedule-cron"),getNotificationChannels:()=>X.get("/prm/v1/user/notification-channels"),updateNotificationChannels:t=>X.post("/prm/v1/user/notification-channels",{channels:t}),updateSlackWebhook:t=>X.post("/prm/v1/user/slack-webhook",{webhook:t}),updateNotificationTime:t=>X.post("/prm/v1/user/notification-time",{time:t}),updateMentionNotifications:t=>X.post("/prm/v1/user/mention-notifications",{preference:t}),getSlackStatus:()=>X.get("/prm/v1/user/slack-status"),disconnectSlack:()=>X.post("/prm/v1/slack/disconnect"),getSlackChannels:()=>X.get("/prm/v1/slack/channels"),getSlackTargets:()=>X.get("/prm/v1/slack/targets"),updateSlackTargets:t=>X.post("/prm/v1/slack/targets",{targets:t}),getPersonDates:t=>X.get(`/prm/v1/people/${t}/dates`),getPersonTimeline:t=>X.get(`/prm/v1/people/${t}/timeline`),getPersonNotes:t=>X.get(`/prm/v1/people/${t}/notes`),createNote:(t,e,r="private")=>X.post(`/prm/v1/people/${t}/notes`,{content:e,visibility:r}),updateNote:(t,e,r=null)=>X.put(`/prm/v1/notes/${t}`,{content:e,...r&&{visibility:r}}),deleteNote:t=>X.delete(`/prm/v1/notes/${t}`),getPersonActivities:t=>X.get(`/prm/v1/people/${t}/activities`),createActivity:(t,e)=>X.post(`/prm/v1/people/${t}/activities`,e),updateActivity:(t,e)=>X.put(`/prm/v1/activities/${t}`,e),deleteActivity:t=>X.delete(`/prm/v1/activities/${t}`),getAllTodos:(t=!1)=>X.get("/prm/v1/todos",{params:{completed:t}}),getInvestments:t=>X.get(`/prm/v1/investments/${t}`),getPersonTodos:t=>X.get(`/prm/v1/people/${t}/todos`),createTodo:(t,e)=>X.post(`/prm/v1/people/${t}/todos`,e),updateTodo:(t,e)=>X.put(`/prm/v1/todos/${t}`,e),deleteTodo:t=>X.delete(`/prm/v1/todos/${t}`),getCompanyPeople:t=>X.get(`/prm/v1/companies/${t}/people`),setCompanyLogo:(t,e)=>X.post(`/prm/v1/companies/${t}/logo`,{media_id:e}),uploadPersonPhoto:(t,e)=>{const r=new FormData;return r.append("file",e),X.post(`/prm/v1/people/${t}/photo`,r,{headers:{"Content-Type":"multipart/form-data"}})},uploadCompanyLogo:(t,e)=>{const r=new FormData;return r.append("file",e),X.post(`/prm/v1/companies/${t}/logo/upload`,r,{headers:{"Content-Type":"multipart/form-data"}})},getCardDAVUrls:()=>X.get("/prm/v1/carddav/urls"),getAppPasswords:t=>X.get(`/wp/v2/users/${t}/application-passwords`),createAppPassword:(t,e)=>X.post(`/wp/v2/users/${t}/application-passwords`,{name:e}),deleteAppPassword:(t,e)=>X.delete(`/wp/v2/users/${t}/application-passwords/${e}`),getWorkspaces:()=>X.get("/prm/v1/workspaces"),getWorkspace:t=>X.get(`/prm/v1/workspaces/${t}`),createWorkspace:t=>X.post("/prm/v1/workspaces",t),updateWorkspace:(t,e)=>X.put(`/prm/v1/workspaces/${t}`,e),deleteWorkspace:t=>X.delete(`/prm/v1/workspaces/${t}`),addWorkspaceMember:(t,e)=>X.post(`/prm/v1/workspaces/${t}/members`,e),removeWorkspaceMember:(t,e)=>X.delete(`/prm/v1/workspaces/${t}/members/${e}`),updateWorkspaceMember:(t,e,r)=>X.put(`/prm/v1/workspaces/${t}/members/${e}`,r),searchWorkspaceMembers:async(t,e)=>{const{data:r}=await X.get("/prm/v1/workspaces/members/search",{params:{workspace_ids:t.join(","),query:e}});return r},getWorkspaceInvites:t=>X.get(`/prm/v1/workspaces/${t}/invites`),createWorkspaceInvite:(t,e)=>X.post(`/prm/v1/workspaces/${t}/invites`,e),revokeWorkspaceInvite:(t,e)=>X.delete(`/prm/v1/workspaces/${t}/invites/${e}`),validateInvite:t=>X.get(`/prm/v1/invites/${t}`),acceptInvite:t=>X.post(`/prm/v1/invites/${t}/accept`),getPostShares:(t,e)=>X.get(`/prm/v1/${e}/${t}/shares`),sharePost:(t,e,r)=>X.post(`/prm/v1/${e}/${t}/shares`,r),unsharePost:(t,e,r)=>X.delete(`/prm/v1/${e}/${t}/shares/${r}`),searchUsers:t=>X.get("/prm/v1/users/search",{params:{q:t}}),getIcalUrl:()=>X.get("/prm/v1/user/ical-url")};function cge({checkInterval:t=5*60*1e3}={}){const[e,r]=C.useState(!1),[n]=C.useState(()=>{var l;return((l=window.prmConfig)==null?void 0:l.version)||null}),[s,i]=C.useState(null),o=C.useCallback(async()=>{var l;if(n)try{const d=(l=(await Ee.getVersion()).data)==null?void 0:l.version;d&&d!==n&&(i(d),r(!0))}catch(u){console.debug("Version check failed:",u.message)}},[n]),a=C.useCallback(()=>{window.location.reload(!0)},[]);return C.useEffect(()=>{const l=setTimeout(o,5e3);return()=>clearTimeout(l)},[o]),C.useEffect(()=>{const l=setInterval(o,t);return()=>clearInterval(l)},[o,t]),C.useEffect(()=>{const l=()=>{document.visibilityState==="visible"&&o()};return document.addEventListener("visibilitychange",l),()=>document.removeEventListener("visibilitychange",l)},[o]),{hasUpdate:e,currentVersion:n,latestVersion:s,reload:a,checkVersion:o}}/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var uge={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dge=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),he=(t,e)=>{const r=C.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...u},d)=>C.createElement("svg",{ref:d,...uge,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${dge(t)}`,a].join(" "),...u},[...e.map(([h,f])=>C.createElement(h,f)),...Array.isArray(l)?l:[l]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=he("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hre=he("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kre=he("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ah=he("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=he("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gre=he("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hge=he("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fge=he("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=he("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yre=he("Cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h0.01",key:"hsw7lv"}],["path",{d:"M12 4h0.01",key:"1e3d8f"}],["path",{d:"M17 4h0.01",key:"p7cxgy"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=he("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qre=he("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=he("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=he("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=he("CheckSquare2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=he("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=he("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ah=he("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=he("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xre=he("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jre=he("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pge=he("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mge=he("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zre=he("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ene=he("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=he("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tne=he("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=he("FileCode",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m10 13-2 2 2 2",key:"17smn8"}],["path",{d:"m14 17 2-2-2-2",key:"14mezr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=he("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=he("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kp=he("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gge=he("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=he("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ap=he("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yge=he("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vge=he("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rne=he("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bge=he("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xge=he("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wge=he("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=he("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sge=he("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nne=he("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=he("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=he("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ege=he("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=he("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ge=he("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nge=he("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=he("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cge=he("MinusSquare",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kge=he("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jge=he("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=he("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=he("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=he("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tge=he("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sne=he("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ine=he("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=he("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=he("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=he("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=he("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const one=he("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=he("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oge=he("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ane=he("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lne=he("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl=he("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=he("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=he("StickyNote",[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M15 3v6h6",key:"edgan2"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cne=he("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=he("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=he("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pge=he("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ige=he("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=he("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rge=he("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=he("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=he("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mge=he("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=he("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const une=he("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=he("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=he("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Age=he("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dge=he("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function qn(t){if(!t)return"";const e=document.createElement("textarea");return e.innerHTML=t,e.value}function ar(t){var r;if(!t)return"";const e=((r=t.title)==null?void 0:r.rendered)||t.title||t.name||"";return qn(e)}function kd(t){var r,n;if(!t)return"";if(t.name&&typeof t.name=="string"&&!((r=t.title)!=null&&r.rendered))return qn(t.name);const e=((n=t.title)==null?void 0:n.rendered)||t.title||t.name||"";return qn(e)}function go(t,e={}){const r=["gender"],n=["contact_info","addresses","work_history","relationships","photo_gallery"],s={...t};return r.forEach(i=>{s[i]===""&&(s[i]=null)}),n.forEach(i=>{Array.isArray(s[i])||(s[i]=[])}),Object.assign(s,e),s}const It={all:["people"],lists:()=>[...It.all,"list"],list:t=>[...It.lists(),t],details:()=>[...It.all,"detail"],detail:t=>[...It.details(),t],timeline:t=>[...It.detail(t),"timeline"],dates:t=>[...It.detail(t),"dates"]};function dne(t){var s,i,o,a,l,u,d,h,f,p,m,g,y,v,b,w,x;const e=((o=(i=(s=t._embedded)==null?void 0:s["wp:featuredmedia"])==null?void 0:i[0])==null?void 0:o.source_url)||((f=(h=(d=(u=(l=(a=t._embedded)==null?void 0:a["wp:featuredmedia"])==null?void 0:l[0])==null?void 0:u.media_details)==null?void 0:d.sizes)==null?void 0:h.thumbnail)==null?void 0:f.source_url)||null,r=((y=(g=(m=(p=t._embedded)==null?void 0:p["wp:term"])==null?void 0:m.flat())==null?void 0:g.filter(S=>(S==null?void 0:S.taxonomy)==="person_label"))==null?void 0:y.map(S=>S.name))||[],n=qn(((v=t.title)==null?void 0:v.rendered)||"");return{...t,id:t.id,name:n,first_name:((b=t.acf)==null?void 0:b.first_name)||"",last_name:((w=t.acf)==null?void 0:w.last_name)||"",is_favorite:((x=t.acf)==null?void 0:x.is_favorite)||!1,is_deceased:t.is_deceased||!1,birth_year:t.birth_year||null,modified:t.modified||null,thumbnail:e,labels:r}}function hu(t={}){return it({queryKey:It.list(t),queryFn:async()=>{const e=[];let r=1;const n=100;for(;;){const s=await Je.getPeople({per_page:n,page:r,_embed:!0,...t}),i=s.data.map(dne);if(e.push(...i),i.length<n)break;const o=parseInt(s.headers["x-wp-totalpages"]||s.headers["X-WP-TotalPages"]||"0",10);if(o>0&&r>=o)break;r++}return e}})}function hne(t){return it({queryKey:It.detail(t),queryFn:async()=>{const e=await Je.getPerson(t,{_embed:!0});return dne(e.data)},enabled:!!t})}function $ge(t){return it({queryKey:It.timeline(t),queryFn:async()=>(await Ee.getPersonTimeline(t)).data,enabled:!!t})}function Fge(t){return it({queryKey:It.dates(t),queryFn:async()=>(await Ee.getPersonDates(t)).data,enabled:!!t})}function fne({onSuccess:t}={}){const e=rt();return Ke({mutationFn:async r=>{const n=[];r.email&&n.push({contact_type:"email",contact_value:r.email,contact_label:"Email"}),r.phone&&n.push({contact_type:r.phone_type||"mobile",contact_value:r.phone,contact_label:r.phone_type==="mobile"?"Mobile":"Phone"});const s={title:`${r.first_name} ${r.last_name}`.trim(),status:"publish",acf:{first_name:r.first_name,last_name:r.last_name,nickname:r.nickname,gender:r.gender||null,pronouns:r.pronouns||null,how_we_met:r.how_we_met,is_favorite:r.is_favorite,contact_info:n,_visibility:r.visibility||"private",_assigned_workspaces:r.assigned_workspaces||[]}},i=await Je.createPerson(s),o=i.data.id;if(r.email)try{await Ee.sideloadGravatar(o,r.email)}catch{}if(r.birthday&&r.birthdayType)try{await Je.createDate({title:`${r.first_name}'s Birthday`,status:"publish",date_type:[r.birthdayType.id],acf:{date_value:r.birthday,is_recurring:!0,related_people:[o],_visibility:"private"}})}catch{}return i.data},onSuccess:r=>{e.invalidateQueries({queryKey:It.lists()}),e.invalidateQueries({queryKey:["dashboard"]}),e.invalidateQueries({queryKey:["reminders"]}),t==null||t(r)}})}function qge(){const t=rt();return Ke({mutationFn:({id:e,data:r})=>Je.updatePerson(e,r),onSuccess:(e,{id:r,data:n})=>{var s;t.invalidateQueries({queryKey:It.detail(r)}),t.invalidateQueries({queryKey:It.lists()}),t.invalidateQueries({queryKey:["dashboard"]}),(s=n==null?void 0:n.acf)!=null&&s.relationships&&(Array.isArray(n.acf.relationships)?n.acf.relationships:[]).forEach(o=>{const a=o.related_person;a&&t.invalidateQueries({queryKey:It.detail(a)})})}})}function Lge(){const t=rt();return Ke({mutationFn:e=>Je.deletePerson(e,{force:!0}),onSuccess:()=>{t.invalidateQueries({queryKey:It.lists()}),t.invalidateQueries({queryKey:It.details()}),t.invalidateQueries({queryKey:["dashboard"]})}})}function Bge(){const t=rt();return Ke({mutationFn:({ids:e,updates:r})=>Ee.bulkUpdatePeople(e,r),onSuccess:async()=>{await t.refetchQueries({queryKey:It.lists()}),t.invalidateQueries({queryKey:It.details()})}})}function zge(){const t=rt();return Ke({mutationFn:({personId:e,content:r,visibility:n="private"})=>Ee.createNote(e,r,n),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:It.timeline(r)})}})}function Wge(){const t=rt();return Ke({mutationFn:({noteId:e,personId:r})=>Ee.deleteNote(e),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:It.timeline(r)})}})}function gA(){const t=rt();return Ke({mutationFn:({personId:e,data:r})=>Ee.createActivity(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:It.timeline(r)})}})}function Vge(){const t=rt();return Ke({mutationFn:({activityId:e,data:r,personId:n})=>Ee.updateActivity(e,r),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:It.timeline(r)})}})}function Uge(){const t=rt();return Ke({mutationFn:({activityId:e,personId:r})=>Ee.deleteActivity(e),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:It.timeline(r)})}})}function pne(){const t=rt();return Ke({mutationFn:({personId:e,data:r})=>Ee.createTodo(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:It.timeline(r)})}})}function Hge(){const t=rt();return Ke({mutationFn:({todoId:e,data:r,personId:n})=>Ee.updateTodo(e,r),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:It.timeline(r)})}})}function Kge(){const t=rt();return Ke({mutationFn:({todoId:e,personId:r})=>Ee.deleteTodo(e),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:It.timeline(r)})}})}function Gge(){const t=rt();return Ke({mutationFn:({dateId:e,personId:r})=>Je.deleteDate(e),onSuccess:(e,{personId:r})=>{r&&(t.invalidateQueries({queryKey:It.dates(r)}),t.invalidateQueries({queryKey:It.detail(r)})),t.invalidateQueries({queryKey:["reminders"]})}})}function mne({onSuccess:t}={}){const e=rt();return Ke({mutationFn:async r=>{const n={title:r.title,status:"publish",date_type:r.date_type,acf:{date_value:r.date_value,related_people:r.related_people,is_recurring:r.is_recurring,year_unknown:r.year_unknown,_visibility:"private"}};return(await Je.createDate(n)).data},onSuccess:r=>{e.invalidateQueries({queryKey:["reminders"]}),t==null||t(r)}})}function gne({onSuccess:t}={}){const e=rt();return Ke({mutationFn:async r=>{const n={title:r.title,status:"publish",parent:r.parentId||0,acf:{website:r.website,industry:r.industry,investors:r.investors||[],_visibility:r.visibility||"private",_assigned_workspaces:r.assigned_workspaces||[]}};return(await Je.createCompany(n)).data},onSuccess:r=>{e.invalidateQueries({queryKey:["companies"]}),e.invalidateQueries({queryKey:["dashboard"]}),t==null||t(r)}})}const Gc="Caelis";function Dh(t){C.useEffect(()=>{var e;if(t){const r=((e=window.prmConfig)==null?void 0:e.siteName)||Gc;document.title=`${t} - ${r}`}},[t])}function Yge(t){const e=t.match(/\/(?:people|companies|dates)\/(\d+)/);return e?e[1]:null}function yne(t=null){const e=ia();C.useEffect(()=>{var s;let r=t;if(!r){const i=e.pathname,o=Yge(i);i==="/"?r="Dashboard":i==="/login"?r="Login":i.startsWith("/people")?i==="/people"||i==="/people/"?r="People":i==="/people/new"?r="New person":i.endsWith("/edit")?r="Edit person":o?r="Person":r="People":i.startsWith("/companies")?i==="/companies"||i==="/companies/"?r="Organizations":i==="/companies/new"?r="New organization":i.endsWith("/edit")?r="Edit organization":o?r="Organization":r="Organizations":i.startsWith("/dates")?i==="/dates"||i==="/dates/"?r="Events":i==="/dates/new"?r="New date":i.endsWith("/edit")?r="Edit date":r="Events":i.startsWith("/settings")?r="Settings":r=Gc}const n=((s=window.prmConfig)==null?void 0:s.siteName)||Gc;document.title=`${r} - ${n}`},[e.pathname,t])}function Qge(){return it({queryKey:["dashboard"],queryFn:async()=>(await Ee.getDashboard()).data})}function Xge(t=30){return it({queryKey:["reminders",t],queryFn:async()=>(await Ee.getReminders(t)).data})}function vne(t=!1){return it({queryKey:["todos",t],queryFn:async()=>(await Ee.getAllTodos(t)).data})}function bne(){const t=rt();return Ke({mutationFn:({todoId:e,data:r})=>Ee.updateTodo(e,r),onSuccess:()=>{t.invalidateQueries({queryKey:["todos"]}),t.invalidateQueries({queryKey:["dashboard"]})}})}function Jge(){const t=rt();return Ke({mutationFn:e=>Ee.deleteTodo(e),onSuccess:()=>{t.invalidateQueries({queryKey:["todos"]}),t.invalidateQueries({queryKey:["dashboard"]})}})}function Zge(t){const e=typeof t=="string"?t:"",r=e.length>=2;return it({queryKey:["search",e],queryFn:async()=>r?(await Ee.search(e)).data:{people:[],companies:[]},enabled:r})}function xne({isOpen:t,onClose:e}){const[r,n]=C.useState(""),[s,i]=C.useState(""),[o,a]=C.useState(""),[l,u]=C.useState(!1),[d,h]=C.useState(""),{data:f=[],isLoading:p}=hu(),m=pne(),g=rt(),y=C.useMemo(()=>{const E=d.toLowerCase().trim();let N=f;return E&&(N=f.filter(_=>{var k,j,T;return((k=_.name)==null?void 0:k.toLowerCase().includes(E))||((j=_.first_name)==null?void 0:j.toLowerCase().includes(E))||((T=_.last_name)==null?void 0:T.toLowerCase().includes(E))})),[...N].sort((_,k)=>(_.name||"").localeCompare(k.name||""))},[f,d]),v=C.useMemo(()=>f.find(E=>E.id===parseInt(o)),[f,o]),b=()=>new Date().toISOString().split("T")[0];if(C.useEffect(()=>{t&&(n(""),i(b()),a(""),h(""),u(!1))},[t]),!t)return null;const w=async E=>{if(E.preventDefault(),!(!r.trim()||!o))try{await m.mutateAsync({personId:parseInt(o),data:{content:r.trim(),due_date:s||null,is_completed:!1}}),g.invalidateQueries({queryKey:["todos"]}),e()}catch{}},x=()=>{e()},S=E=>{if(!E)return"";try{return new Date(E).toISOString().split("T")[0]}catch{return""}};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Add todo"}),c.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600",disabled:m.isPending,children:c.jsx(ot,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:w,className:"p-4",children:[c.jsxs("div",{className:"mb-4",children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Person ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{type:"button",onClick:()=>u(!l),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:m.isPending,children:[v?c.jsxs("div",{className:"flex items-center gap-2",children:[v.thumbnail?c.jsx("img",{src:v.thumbnail,alt:v.name,className:"w-6 h-6 rounded-full object-cover"}):c.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx(El,{className:"w-4 h-4 text-gray-500"})}),c.jsx("span",{className:"text-gray-900",children:v.name})]}):c.jsx("span",{className:"text-gray-400",children:"Select a person..."}),c.jsx(ah,{className:`w-4 h-4 text-gray-400 transition-transform ${l?"rotate-180":""}`})]}),l&&c.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[c.jsx("div",{className:"p-2 border-b border-gray-100",children:c.jsxs("div",{className:"relative",children:[c.jsx(wl,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),c.jsx("input",{type:"text",value:d,onChange:E=>h(E.target.value),placeholder:"Search people...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),c.jsx("div",{className:"overflow-y-auto max-h-48",children:p?c.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):y.length>0?y.map(E=>c.jsxs("button",{type:"button",onClick:()=>{a(String(E.id)),u(!1),h("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${o===String(E.id)?"bg-primary-50":""}`,children:[E.thumbnail?c.jsx("img",{src:E.thumbnail,alt:E.name,className:"w-6 h-6 rounded-full object-cover"}):c.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx(El,{className:"w-4 h-4 text-gray-500"})}),c.jsx("span",{className:"text-sm text-gray-900 truncate",children:E.name})]},E.id)):c.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"No people found"})})]})]})]}),c.jsxs("div",{className:"mb-4",children:[c.jsxs("label",{htmlFor:"todo-content",className:"block text-sm font-medium text-gray-700 mb-2",children:["Description ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{id:"todo-content",value:r,onChange:E=>n(E.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"What needs to be done?",disabled:m.isPending})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"todo-due-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Due date (optional)"}),c.jsx("input",{id:"todo-due-date",type:"date",value:S(s),onChange:E=>i(E.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:m.isPending})]}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx("button",{type:"button",onClick:x,className:"btn-secondary",disabled:m.isPending,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:m.isPending||!r.trim()||!o,children:m.isPending?"Adding...":"Add todo"})]})]})]})})}var Fm=t=>t.type==="checkbox",ic=t=>t instanceof Date,es=t=>t==null;const wne=t=>typeof t=="object";var Cr=t=>!es(t)&&!Array.isArray(t)&&wne(t)&&!ic(t),Sne=t=>Cr(t)&&t.target?Fm(t.target)?t.target.checked:t.target.value:t,eye=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Ene=(t,e)=>t.has(eye(e)),tye=t=>{const e=t.constructor&&t.constructor.prototype;return Cr(e)&&e.hasOwnProperty("isPrototypeOf")},yA=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function zt(t){if(t instanceof Date)return new Date(t);const e=typeof FileList<"u"&&t instanceof FileList;if(yA&&(t instanceof Blob||e))return t;const r=Array.isArray(t);if(!r&&!(Cr(t)&&tye(t)))return t;const n=r?[]:Object.create(Object.getPrototypeOf(t));for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=zt(t[s]));return n}var vb=t=>/^\w*$/.test(t),Ft=t=>t===void 0,bb=t=>Array.isArray(t)?t.filter(Boolean):[],vA=t=>bb(t.replace(/["|']|\]/g,"").split(/\.|\[/)),ye=(t,e,r)=>{if(!e||!Cr(t))return r;const n=(vb(e)?[e]:vA(e)).reduce((s,i)=>es(s)?s:s[i],t);return Ft(n)||n===t?Ft(t[e])?r:t[e]:n},Ss=t=>typeof t=="boolean",Fn=t=>typeof t=="function",Pt=(t,e,r)=>{let n=-1;const s=vb(e)?[e]:vA(e),i=s.length,o=i-1;for(;++n<i;){const a=s[n];let l=r;if(n!==o){const u=t[a];l=Cr(u)||Array.isArray(u)?u:isNaN(+s[n+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=l,t=t[a]}};const Pv={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Hs={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},yo={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},_ne=te.createContext(null);_ne.displayName="HookFormContext";const xb=()=>te.useContext(_ne);var Nne=(t,e,r,n=!0)=>{const s={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(s,i,{get:()=>{const o=i;return e._proxyFormState[o]!==Hs.all&&(e._proxyFormState[o]=!n||Hs.all),r&&(r[o]=!0),t[o]}});return s};const wb=typeof window<"u"?te.useLayoutEffect:te.useEffect;function rye(t){const e=xb(),{control:r=e.control,disabled:n,name:s,exact:i}=t||{},[o,a]=te.useState(r._formState),l=te.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return wb(()=>r._subscribe({name:s,formState:l.current,exact:i,callback:u=>{!n&&a({...r._formState,...u})}}),[s,n,i]),te.useEffect(()=>{l.current.isValid&&r._setValid(!0)},[r]),te.useMemo(()=>Nne(o,r,l.current,!1),[o,r])}var Es=t=>typeof t=="string",QI=(t,e,r,n,s)=>Es(t)?(n&&e.watch.add(t),ye(r,t,s)):Array.isArray(t)?t.map(i=>(n&&e.watch.add(i),ye(r,i))):(n&&(e.watchAll=!0),r),XI=t=>es(t)||!wne(t);function xi(t,e,r=new WeakSet){if(XI(t)||XI(e))return Object.is(t,e);if(ic(t)&&ic(e))return t.getTime()===e.getTime();const n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;if(r.has(t)||r.has(e))return!0;r.add(t),r.add(e);for(const i of n){const o=t[i];if(!s.includes(i))return!1;if(i!=="ref"){const a=e[i];if(ic(o)&&ic(a)||Cr(o)&&Cr(a)||Array.isArray(o)&&Array.isArray(a)?!xi(o,a,r):!Object.is(o,a))return!1}}return!0}function nye(t){const e=xb(),{control:r=e.control,name:n,defaultValue:s,disabled:i,exact:o,compute:a}=t||{},l=te.useRef(s),u=te.useRef(a),d=te.useRef(void 0),h=te.useRef(r),f=te.useRef(n);u.current=a;const[p,m]=te.useState(()=>{const x=r._getWatch(n,l.current);return u.current?u.current(x):x}),g=te.useCallback(x=>{const S=QI(n,r._names,x||r._formValues,!1,l.current);return u.current?u.current(S):S},[r._formValues,r._names,n]),y=te.useCallback(x=>{if(!i){const S=QI(n,r._names,x||r._formValues,!1,l.current);if(u.current){const E=u.current(S);xi(E,d.current)||(m(E),d.current=E)}else m(S)}},[r._formValues,r._names,i,n]);wb(()=>((h.current!==r||!xi(f.current,n))&&(h.current=r,f.current=n,y()),r._subscribe({name:n,formState:{values:!0},exact:o,callback:x=>{y(x.values)}})),[r,o,n,y]),te.useEffect(()=>r._removeUnmounted());const v=h.current!==r,b=f.current,w=te.useMemo(()=>{if(i)return null;const x=!v&&!xi(b,n);return v||x?g():null},[i,v,n,b,g]);return w!==null?w:p}function sye(t){const e=xb(),{name:r,disabled:n,control:s=e.control,shouldUnregister:i,defaultValue:o,exact:a=!0}=t,l=Ene(s._names.array,r),u=te.useMemo(()=>ye(s._formValues,r,ye(s._defaultValues,r,o)),[s,r,o]),d=nye({control:s,name:r,defaultValue:u,exact:a}),h=rye({control:s,name:r,exact:a}),f=te.useRef(t),p=te.useRef(void 0),m=te.useRef(s.register(r,{...t.rules,value:d,...Ss(t.disabled)?{disabled:t.disabled}:{}}));f.current=t;const g=te.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!ye(h.errors,r)},isDirty:{enumerable:!0,get:()=>!!ye(h.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!ye(h.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!ye(h.validatingFields,r)},error:{enumerable:!0,get:()=>ye(h.errors,r)}}),[h,r]),y=te.useCallback(x=>m.current.onChange({target:{value:Sne(x),name:r},type:Pv.CHANGE}),[r]),v=te.useCallback(()=>m.current.onBlur({target:{value:ye(s._formValues,r),name:r},type:Pv.BLUR}),[r,s._formValues]),b=te.useCallback(x=>{const S=ye(s._fields,r);S&&S._f&&x&&(S._f.ref={focus:()=>Fn(x.focus)&&x.focus(),select:()=>Fn(x.select)&&x.select(),setCustomValidity:E=>Fn(x.setCustomValidity)&&x.setCustomValidity(E),reportValidity:()=>Fn(x.reportValidity)&&x.reportValidity()})},[s._fields,r]),w=te.useMemo(()=>({name:r,value:d,...Ss(n)||h.disabled?{disabled:h.disabled||n}:{},onChange:y,onBlur:v,ref:b}),[r,n,h.disabled,y,v,b,d]);return te.useEffect(()=>{const x=s._options.shouldUnregister||i,S=p.current;S&&S!==r&&!l&&s.unregister(S),s.register(r,{...f.current.rules,...Ss(f.current.disabled)?{disabled:f.current.disabled}:{}});const E=(N,_)=>{const k=ye(s._fields,N);k&&k._f&&(k._f.mount=_)};if(E(r,!0),x){const N=zt(ye(s._options.defaultValues,r,f.current.defaultValue));Pt(s._defaultValues,r,N),Ft(ye(s._formValues,r))&&Pt(s._formValues,r,N)}return!l&&s.register(r),p.current=r,()=>{(l?x&&!s._state.action:x)?s.unregister(r):E(r,!1)}},[r,s,l,i]),te.useEffect(()=>{s._setDisabledField({disabled:n,name:r})},[n,r,s]),te.useMemo(()=>({field:w,formState:h,fieldState:g}),[w,h,g])}const Iv=t=>t.render(sye(t));var iye=(t,e,r,n,s)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:s||!0}}:{},as=t=>Array.isArray(t)?t:[t],X5=()=>{let t=[];return{get observers(){return t},next:s=>{for(const i of t)i.next&&i.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(i=>i!==s)}}),unsubscribe:()=>{t=[]}}};function Cne(t,e){const r={};for(const n in t)if(t.hasOwnProperty(n)){const s=t[n],i=e[n];if(s&&Cr(s)&&i){const o=Cne(s,i);Cr(o)&&(r[n]=o)}else t[n]&&(r[n]=i)}return r}var wn=t=>Cr(t)&&!Object.keys(t).length,bA=t=>t.type==="file",Rv=t=>{if(!yA)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},kne=t=>t.type==="select-multiple",xA=t=>t.type==="radio",oye=t=>xA(t)||Fm(t),a1=t=>Rv(t)&&t.isConnected;function aye(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=Ft(t)?n++:t[e[n++]];return t}function lye(t){for(const e in t)if(t.hasOwnProperty(e)&&!Ft(t[e]))return!1;return!0}function mr(t,e){const r=Array.isArray(e)?e:vb(e)?[e]:vA(e),n=r.length===1?t:aye(t,r),s=r.length-1,i=r[s];return n&&delete n[i],s!==0&&(Cr(n)&&wn(n)||Array.isArray(n)&&lye(n))&&mr(t,r.slice(0,-1)),t}var cye=t=>{for(const e in t)if(Fn(t[e]))return!0;return!1};function jne(t){return Array.isArray(t)||Cr(t)&&!cye(t)}function JI(t,e={}){for(const r in t){const n=t[r];jne(n)?(e[r]=Array.isArray(n)?[]:{},JI(n,e[r])):Ft(n)||(e[r]=!0)}return e}function Qu(t,e,r){r||(r=JI(e));for(const n in t){const s=t[n];if(jne(s))Ft(e)||XI(r[n])?r[n]=JI(s,Array.isArray(s)?[]:{}):Qu(s,es(e)?{}:e[n],r[n]);else{const i=e[n];r[n]=!xi(s,i)}}return r}const J5={value:!1,isValid:!1},Z5={value:!0,isValid:!0};var Tne=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Ft(t[0].attributes.value)?Ft(t[0].value)||t[0].value===""?Z5:{value:t[0].value,isValid:!0}:Z5:J5}return J5},One=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>Ft(t)?t:e?t===""?NaN:t&&+t:r&&Es(t)?new Date(t):n?n(t):t;const e3={isValid:!1,value:null};var Pne=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,e3):e3;function t3(t){const e=t.ref;return bA(e)?e.files:xA(e)?Pne(t.refs).value:kne(e)?[...e.selectedOptions].map(({value:r})=>r):Fm(e)?Tne(t.refs).value:One(Ft(e.value)?t.ref.value:e.value,t)}var uye=(t,e,r,n)=>{const s={};for(const i of t){const o=ye(e,i);o&&Pt(s,i,o._f)}return{criteriaMode:r,names:[...t],fields:s,shouldUseNativeValidation:n}},Mv=t=>t instanceof RegExp,kf=t=>Ft(t)?t:Mv(t)?t.source:Cr(t)?Mv(t.value)?t.value.source:t.value:t,fd=t=>({isOnSubmit:!t||t===Hs.onSubmit,isOnBlur:t===Hs.onBlur,isOnChange:t===Hs.onChange,isOnAll:t===Hs.all,isOnTouch:t===Hs.onTouched});const r3="AsyncFunction";var dye=t=>!!t&&!!t.validate&&!!(Fn(t.validate)&&t.validate.constructor.name===r3||Cr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===r3)),hye=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),ZI=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const jd=(t,e,r,n)=>{for(const s of r||Object.keys(t)){const i=ye(t,s);if(i){const{_f:o,...a}=i;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!n)return!0;if(o.ref&&e(o.ref,o.name)&&!n)return!0;if(jd(a,e))break}else if(Cr(a)&&jd(a,e))break}}};function n3(t,e,r){const n=ye(t,r);if(n||vb(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const i=s.join("."),o=ye(e,i),a=ye(t,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(a&&a.type)return{name:i,error:a};if(a&&a.root&&a.root.type)return{name:`${i}.root`,error:a.root};s.pop()}return{name:r}}var fye=(t,e,r,n)=>{r(t);const{name:s,...i}=t;return wn(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(o=>e[o]===(!n||Hs.all))},pye=(t,e,r)=>!t||!e||t===e||as(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n))),mye=(t,e,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(e||t):(r?n.isOnBlur:s.isOnBlur)?!t:(r?n.isOnChange:s.isOnChange)?t:!0,gye=(t,e)=>!bb(ye(t,e)).length&&mr(t,e),Ine=(t,e,r)=>{const n=as(ye(t,r));return Pt(n,"root",e[r]),Pt(t,r,n),t};function s3(t,e,r="validate"){if(Es(t)||Array.isArray(t)&&t.every(Es)||Ss(t)&&!t)return{type:r,message:Es(t)?t:"",ref:e}}var Bu=t=>Cr(t)&&!Mv(t)?t:{value:t,message:""},eR=async(t,e,r,n,s,i)=>{const{ref:o,refs:a,required:l,maxLength:u,minLength:d,min:h,max:f,pattern:p,validate:m,name:g,valueAsNumber:y,mount:v}=t._f,b=ye(r,g);if(!v||e.has(g))return{};const w=a?a[0]:o,x=P=>{s&&w.reportValidity&&(w.setCustomValidity(Ss(P)?"":P||""),w.reportValidity())},S={},E=xA(o),N=Fm(o),_=E||N,k=(y||bA(o))&&Ft(o.value)&&Ft(b)||Rv(o)&&o.value===""||b===""||Array.isArray(b)&&!b.length,j=iye.bind(null,g,n,S),T=(P,O,D,F=yo.maxLength,$=yo.minLength)=>{const q=P?O:D;S[g]={type:P?F:$,message:q,ref:o,...j(P?F:$,q)}};if(i?!Array.isArray(b)||!b.length:l&&(!_&&(k||es(b))||Ss(b)&&!b||N&&!Tne(a).isValid||E&&!Pne(a).isValid)){const{value:P,message:O}=Es(l)?{value:!!l,message:l}:Bu(l);if(P&&(S[g]={type:yo.required,message:O,ref:w,...j(yo.required,O)},!n))return x(O),S}if(!k&&(!es(h)||!es(f))){let P,O;const D=Bu(f),F=Bu(h);if(!es(b)&&!isNaN(b)){const $=o.valueAsNumber||b&&+b;es(D.value)||(P=$>D.value),es(F.value)||(O=$<F.value)}else{const $=o.valueAsDate||new Date(b),q=Y=>new Date(new Date().toDateString()+" "+Y),M=o.type=="time",z=o.type=="week";Es(D.value)&&b&&(P=M?q(b)>q(D.value):z?b>D.value:$>new Date(D.value)),Es(F.value)&&b&&(O=M?q(b)<q(F.value):z?b<F.value:$<new Date(F.value))}if((P||O)&&(T(!!P,D.message,F.message,yo.max,yo.min),!n))return x(S[g].message),S}if((u||d)&&!k&&(Es(b)||i&&Array.isArray(b))){const P=Bu(u),O=Bu(d),D=!es(P.value)&&b.length>+P.value,F=!es(O.value)&&b.length<+O.value;if((D||F)&&(T(D,P.message,O.message),!n))return x(S[g].message),S}if(p&&!k&&Es(b)){const{value:P,message:O}=Bu(p);if(Mv(P)&&!b.match(P)&&(S[g]={type:yo.pattern,message:O,ref:o,...j(yo.pattern,O)},!n))return x(O),S}if(m){if(Fn(m)){const P=await m(b,r),O=s3(P,w);if(O&&(S[g]={...O,...j(yo.validate,O.message)},!n))return x(O.message),S}else if(Cr(m)){let P={};for(const O in m){if(!wn(P)&&!n)break;const D=s3(await m[O](b,r),w,O);D&&(P={...D,...j(O,D.message)},x(D.message),n&&(S[g]=P))}if(!wn(P)&&(S[g]={ref:w,...P},!n))return S}}return x(!0),S};const yye={mode:Hs.onSubmit,reValidateMode:Hs.onChange,shouldFocusError:!0};function vye(t={}){let e={...yye,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Fn(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},n={},s=Cr(e.defaultValues)||Cr(e.values)?zt(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:zt(s),o={action:!1,mount:!1,watch:!1,keepIsValid:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={...d};let f={...h};const p={array:X5(),state:X5()},m=e.criteriaMode===Hs.all,g=A=>L=>{clearTimeout(u),u=setTimeout(A,L)},y=async A=>{if(!o.keepIsValid&&!e.disabled&&(h.isValid||f.isValid||A)){let L;e.resolver?(L=wn((await _()).errors),v()):L=await j(n,!0),L!==r.isValid&&p.state.next({isValid:L})}},v=(A,L)=>{!e.disabled&&(h.isValidating||h.validatingFields||f.isValidating||f.validatingFields)&&((A||Array.from(a.mount)).forEach(V=>{V&&(L?Pt(r.validatingFields,V,L):mr(r.validatingFields,V))}),p.state.next({validatingFields:r.validatingFields,isValidating:!wn(r.validatingFields)}))},b=(A,L=[],V,le,Z=!0,ee=!0)=>{if(le&&V&&!e.disabled){if(o.action=!0,ee&&Array.isArray(ye(n,A))){const be=V(ye(n,A),le.argA,le.argB);Z&&Pt(n,A,be)}if(ee&&Array.isArray(ye(r.errors,A))){const be=V(ye(r.errors,A),le.argA,le.argB);Z&&Pt(r.errors,A,be),gye(r.errors,A)}if((h.touchedFields||f.touchedFields)&&ee&&Array.isArray(ye(r.touchedFields,A))){const be=V(ye(r.touchedFields,A),le.argA,le.argB);Z&&Pt(r.touchedFields,A,be)}(h.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Qu(s,i)),p.state.next({name:A,isDirty:P(A,L),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Pt(i,A,L)},w=(A,L)=>{Pt(r.errors,A,L),p.state.next({errors:r.errors})},x=A=>{r.errors=A,p.state.next({errors:r.errors,isValid:!1})},S=(A,L,V,le)=>{const Z=ye(n,A);if(Z){const ee=ye(i,A,Ft(V)?ye(s,A):V);Ft(ee)||le&&le.defaultChecked||L?Pt(i,A,L?ee:t3(Z._f)):F(A,ee),o.mount&&!o.action&&y()}},E=(A,L,V,le,Z)=>{let ee=!1,be=!1;const Be={name:A};if(!e.disabled){if(!V||le){(h.isDirty||f.isDirty)&&(be=r.isDirty,r.isDirty=Be.isDirty=P(),ee=be!==Be.isDirty);const Ue=xi(ye(s,A),L);be=!!ye(r.dirtyFields,A),Ue?mr(r.dirtyFields,A):Pt(r.dirtyFields,A,!0),Be.dirtyFields=r.dirtyFields,ee=ee||(h.dirtyFields||f.dirtyFields)&&be!==!Ue}if(V){const Ue=ye(r.touchedFields,A);Ue||(Pt(r.touchedFields,A,V),Be.touchedFields=r.touchedFields,ee=ee||(h.touchedFields||f.touchedFields)&&Ue!==V)}ee&&Z&&p.state.next(Be)}return ee?Be:{}},N=(A,L,V,le)=>{const Z=ye(r.errors,A),ee=(h.isValid||f.isValid)&&Ss(L)&&r.isValid!==L;if(e.delayError&&V?(l=g(()=>w(A,V)),l(e.delayError)):(clearTimeout(u),l=null,V?Pt(r.errors,A,V):mr(r.errors,A)),(V?!xi(Z,V):Z)||!wn(le)||ee){const be={...le,...ee&&Ss(L)?{isValid:L}:{},errors:r.errors,name:A};r={...r,...be},p.state.next(be)}},_=async A=>(v(A,!0),await e.resolver(i,e.context,uye(A||a.mount,n,e.criteriaMode,e.shouldUseNativeValidation))),k=async A=>{const{errors:L}=await _(A);if(v(A),A)for(const V of A){const le=ye(L,V);le?Pt(r.errors,V,le):mr(r.errors,V)}else r.errors=L;return L},j=async(A,L,V={valid:!0})=>{for(const le in A){const Z=A[le];if(Z){const{_f:ee,...be}=Z;if(ee){const Be=a.array.has(ee.name),Ue=Z._f&&dye(Z._f);Ue&&h.validatingFields&&v([ee.name],!0);const Ot=await eR(Z,a.disabled,i,m,e.shouldUseNativeValidation&&!L,Be);if(Ue&&h.validatingFields&&v([ee.name]),Ot[ee.name]&&(V.valid=!1,L))break;!L&&(ye(Ot,ee.name)?Be?Ine(r.errors,Ot,ee.name):Pt(r.errors,ee.name,Ot[ee.name]):mr(r.errors,ee.name))}!wn(be)&&await j(be,L,V)}}return V.valid},T=()=>{for(const A of a.unMount){const L=ye(n,A);L&&(L._f.refs?L._f.refs.every(V=>!a1(V)):!a1(L._f.ref))&&Oe(A)}a.unMount=new Set},P=(A,L)=>!e.disabled&&(A&&L&&Pt(i,A,L),!xi(H(),s)),O=(A,L,V)=>QI(A,a,{...o.mount?i:Ft(L)?s:Es(A)?{[A]:L}:L},V,L),D=A=>bb(ye(o.mount?i:s,A,e.shouldUnregister?ye(s,A,[]):[])),F=(A,L,V={})=>{const le=ye(n,A);let Z=L;if(le){const ee=le._f;ee&&(!ee.disabled&&Pt(i,A,One(L,ee)),Z=Rv(ee.ref)&&es(L)?"":L,kne(ee.ref)?[...ee.ref.options].forEach(be=>be.selected=Z.includes(be.value)):ee.refs?Fm(ee.ref)?ee.refs.forEach(be=>{(!be.defaultChecked||!be.disabled)&&(Array.isArray(Z)?be.checked=!!Z.find(Be=>Be===be.value):be.checked=Z===be.value||!!Z)}):ee.refs.forEach(be=>be.checked=be.value===Z):bA(ee.ref)?ee.ref.value="":(ee.ref.value=Z,ee.ref.type||p.state.next({name:A,values:zt(i)})))}(V.shouldDirty||V.shouldTouch)&&E(A,Z,V.shouldTouch,V.shouldDirty,!0),V.shouldValidate&&Y(A)},$=(A,L,V)=>{for(const le in L){if(!L.hasOwnProperty(le))return;const Z=L[le],ee=A+"."+le,be=ye(n,ee);(a.array.has(A)||Cr(Z)||be&&!be._f)&&!ic(Z)?$(ee,Z,V):F(ee,Z,V)}},q=(A,L,V={})=>{const le=ye(n,A),Z=a.array.has(A),ee=zt(L);Pt(i,A,ee),Z?(p.array.next({name:A,values:zt(i)}),(h.isDirty||h.dirtyFields||f.isDirty||f.dirtyFields)&&V.shouldDirty&&p.state.next({name:A,dirtyFields:Qu(s,i),isDirty:P(A,ee)})):le&&!le._f&&!es(ee)?$(A,ee,V):F(A,ee,V),ZI(A,a)&&p.state.next({...r,name:A}),p.state.next({name:o.mount?A:void 0,values:zt(i)})},M=async A=>{o.mount=!0;const L=A.target;let V=L.name,le=!0;const Z=ye(n,V),ee=Ue=>{le=Number.isNaN(Ue)||ic(Ue)&&isNaN(Ue.getTime())||xi(Ue,ye(i,V,Ue))},be=fd(e.mode),Be=fd(e.reValidateMode);if(Z){let Ue,Ot;const Se=L.type?t3(Z._f):Sne(A),re=A.type===Pv.BLUR||A.type===Pv.FOCUS_OUT,ue=!hye(Z._f)&&!e.resolver&&!ye(r.errors,V)&&!Z._f.deps||mye(re,ye(r.touchedFields,V),r.isSubmitted,Be,be),ge=ZI(V,a,re);Pt(i,V,Se),re?(!L||!L.readOnly)&&(Z._f.onBlur&&Z._f.onBlur(A),l&&l(0)):Z._f.onChange&&Z._f.onChange(A);const je=E(V,Se,re),B=!wn(je)||ge;if(!re&&p.state.next({name:V,type:A.type,values:zt(i)}),ue)return(h.isValid||f.isValid)&&(e.mode==="onBlur"?re&&y():re||y()),B&&p.state.next({name:V,...ge?{}:je});if(!re&&ge&&p.state.next({...r}),e.resolver){const{errors:fe}=await _([V]);if(v([V]),ee(Se),le){const xe=n3(r.errors,n,V),Qe=n3(fe,n,xe.name||V);Ue=Qe.error,V=Qe.name,Ot=wn(fe)}}else v([V],!0),Ue=(await eR(Z,a.disabled,i,m,e.shouldUseNativeValidation))[V],v([V]),ee(Se),le&&(Ue?Ot=!1:(h.isValid||f.isValid)&&(Ot=await j(n,!0)));le&&(Z._f.deps&&(!Array.isArray(Z._f.deps)||Z._f.deps.length>0)&&Y(Z._f.deps),N(V,Ot,Ue,je))}},z=(A,L)=>{if(ye(r.errors,L)&&A.focus)return A.focus(),1},Y=async(A,L={})=>{let V,le;const Z=as(A);if(e.resolver){const ee=await k(Ft(A)?A:Z);V=wn(ee),le=A?!Z.some(be=>ye(ee,be)):V}else A?(le=(await Promise.all(Z.map(async ee=>{const be=ye(n,ee);return await j(be&&be._f?{[ee]:be}:be)}))).every(Boolean),!(!le&&!r.isValid)&&y()):le=V=await j(n);return p.state.next({...!Es(A)||(h.isValid||f.isValid)&&V!==r.isValid?{}:{name:A},...e.resolver||!A?{isValid:V}:{},errors:r.errors}),L.shouldFocus&&!le&&jd(n,z,A?Z:a.mount),le},H=(A,L)=>{let V={...o.mount?i:s};return L&&(V=Cne(L.dirtyFields?r.dirtyFields:r.touchedFields,V)),Ft(A)?V:Es(A)?ye(V,A):A.map(le=>ye(V,le))},me=(A,L)=>({invalid:!!ye((L||r).errors,A),isDirty:!!ye((L||r).dirtyFields,A),error:ye((L||r).errors,A),isValidating:!!ye(r.validatingFields,A),isTouched:!!ye((L||r).touchedFields,A)}),G=A=>{A&&as(A).forEach(L=>mr(r.errors,L)),p.state.next({errors:A?r.errors:{}})},oe=(A,L,V)=>{const le=(ye(n,A,{_f:{}})._f||{}).ref,Z=ye(r.errors,A)||{},{ref:ee,message:be,type:Be,...Ue}=Z;Pt(r.errors,A,{...Ue,...L,ref:le}),p.state.next({name:A,errors:r.errors,isValid:!1}),V&&V.shouldFocus&&le&&le.focus&&le.focus()},Ie=(A,L)=>Fn(A)?p.state.subscribe({next:V=>"values"in V&&A(O(void 0,L),V)}):O(A,L,!0),ce=A=>p.state.subscribe({next:L=>{pye(A.name,L.name,A.exact)&&fye(L,A.formState||h,pr,A.reRenderRoot)&&A.callback({values:{...i},...r,...L,defaultValues:s})}}).unsubscribe,De=A=>(o.mount=!0,f={...f,...A.formState},ce({...A,formState:{...d,...A.formState}})),Oe=(A,L={})=>{for(const V of A?as(A):a.mount)a.mount.delete(V),a.array.delete(V),L.keepValue||(mr(n,V),mr(i,V)),!L.keepError&&mr(r.errors,V),!L.keepDirty&&mr(r.dirtyFields,V),!L.keepTouched&&mr(r.touchedFields,V),!L.keepIsValidating&&mr(r.validatingFields,V),!e.shouldUnregister&&!L.keepDefaultValue&&mr(s,V);p.state.next({values:zt(i)}),p.state.next({...r,...L.keepDirty?{isDirty:P()}:{}}),!L.keepIsValid&&y()},pt=({disabled:A,name:L})=>{(Ss(A)&&o.mount||A||a.disabled.has(L))&&(A?a.disabled.add(L):a.disabled.delete(L))},wt=(A,L={})=>{let V=ye(n,A);const le=Ss(L.disabled)||Ss(e.disabled);return Pt(n,A,{...V||{},_f:{...V&&V._f?V._f:{ref:{name:A}},name:A,mount:!0,...L}}),a.mount.add(A),V?pt({disabled:Ss(L.disabled)?L.disabled:e.disabled,name:A}):S(A,!0,L.value),{...le?{disabled:L.disabled||e.disabled}:{},...e.progressive?{required:!!L.required,min:kf(L.min),max:kf(L.max),minLength:kf(L.minLength),maxLength:kf(L.maxLength),pattern:kf(L.pattern)}:{},name:A,onChange:M,onBlur:M,ref:Z=>{if(Z){wt(A,L),V=ye(n,A);const ee=Ft(Z.value)&&Z.querySelectorAll&&Z.querySelectorAll("input,select,textarea")[0]||Z,be=oye(ee),Be=V._f.refs||[];if(be?Be.find(Ue=>Ue===ee):ee===V._f.ref)return;Pt(n,A,{_f:{...V._f,...be?{refs:[...Be.filter(a1),ee,...Array.isArray(ye(s,A))?[{}]:[]],ref:{type:ee.type,name:A}}:{ref:ee}}}),S(A,!1,void 0,ee)}else V=ye(n,A,{}),V._f&&(V._f.mount=!1),(e.shouldUnregister||L.shouldUnregister)&&!(Ene(a.array,A)&&o.action)&&a.unMount.add(A)}}},St=()=>e.shouldFocusError&&jd(n,z,a.mount),fr=A=>{Ss(A)&&(p.state.next({disabled:A}),jd(n,(L,V)=>{const le=ye(n,V);le&&(L.disabled=le._f.disabled||A,Array.isArray(le._f.refs)&&le._f.refs.forEach(Z=>{Z.disabled=le._f.disabled||A}))},0,!1))},Tt=(A,L)=>async V=>{let le;V&&(V.preventDefault&&V.preventDefault(),V.persist&&V.persist());let Z=zt(i);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:ee,values:be}=await _();v(),r.errors=ee,Z=zt(be)}else await j(n);if(a.disabled.size)for(const ee of a.disabled)mr(Z,ee);if(mr(r.errors,"root"),wn(r.errors)){p.state.next({errors:{}});try{await A(Z,V)}catch(ee){le=ee}}else L&&await L({...r.errors},V),St(),setTimeout(St);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:wn(r.errors)&&!le,submitCount:r.submitCount+1,errors:r.errors}),le)throw le},Sr=(A,L={})=>{ye(n,A)&&(Ft(L.defaultValue)?q(A,zt(ye(s,A))):(q(A,L.defaultValue),Pt(s,A,zt(L.defaultValue))),L.keepTouched||mr(r.touchedFields,A),L.keepDirty||(mr(r.dirtyFields,A),r.isDirty=L.defaultValue?P(A,zt(ye(s,A))):P()),L.keepError||(mr(r.errors,A),h.isValid&&y()),p.state.next({...r}))},nn=(A,L={})=>{const V=A?zt(A):s,le=zt(V),Z=wn(A),ee=Z?s:le;if(L.keepDefaultValues||(s=V),!L.keepValues){if(L.keepDirtyValues){const be=new Set([...a.mount,...Object.keys(Qu(s,i))]);for(const Be of Array.from(be))ye(r.dirtyFields,Be)?Pt(ee,Be,ye(i,Be)):q(Be,ye(ee,Be))}else{if(yA&&Ft(A))for(const be of a.mount){const Be=ye(n,be);if(Be&&Be._f){const Ue=Array.isArray(Be._f.refs)?Be._f.refs[0]:Be._f.ref;if(Rv(Ue)){const Ot=Ue.closest("form");if(Ot){Ot.reset();break}}}}if(L.keepFieldsRef)for(const be of a.mount)q(be,ye(ee,be));else n={}}i=e.shouldUnregister?L.keepDefaultValues?zt(s):{}:zt(ee),p.array.next({values:{...ee}}),p.state.next({values:{...ee}})}a={mount:L.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!L.keepIsValid||!!L.keepDirtyValues||!e.shouldUnregister&&!wn(ee),o.watch=!!e.shouldUnregister,o.keepIsValid=!!L.keepIsValid,o.action=!1,L.keepErrors||(r.errors={}),p.state.next({submitCount:L.keepSubmitCount?r.submitCount:0,isDirty:Z?!1:L.keepDirty?r.isDirty:!!(L.keepDefaultValues&&!xi(A,s)),isSubmitted:L.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Z?{}:L.keepDirtyValues?L.keepDefaultValues&&i?Qu(s,i):r.dirtyFields:L.keepDefaultValues&&A?Qu(s,A):L.keepDirty?r.dirtyFields:{},touchedFields:L.keepTouched?r.touchedFields:{},errors:L.keepErrors?r.errors:{},isSubmitSuccessful:L.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},zr=(A,L)=>nn(Fn(A)?A(i):A,{...e.resetOptions,...L}),lt=(A,L={})=>{const V=ye(n,A),le=V&&V._f;if(le){const Z=le.refs?le.refs[0]:le.ref;Z.focus&&setTimeout(()=>{Z.focus(),L.shouldSelect&&Fn(Z.select)&&Z.select()})}},pr=A=>{r={...r,...A}},Er={control:{register:wt,unregister:Oe,getFieldState:me,handleSubmit:Tt,setError:oe,_subscribe:ce,_runSchema:_,_updateIsValidating:v,_focusError:St,_getWatch:O,_getDirty:P,_setValid:y,_setFieldArray:b,_setDisabledField:pt,_setErrors:x,_getFieldArray:D,_reset:nn,_resetDefaultValues:()=>Fn(e.defaultValues)&&e.defaultValues().then(A=>{zr(A,e.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:T,_disableForm:fr,_subjects:p,_proxyFormState:h,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(A){o=A},get _defaultValues(){return s},get _names(){return a},set _names(A){a=A},get _formState(){return r},get _options(){return e},set _options(A){e={...e,...A}}},subscribe:De,trigger:Y,register:wt,handleSubmit:Tt,watch:Ie,setValue:q,getValues:H,reset:zr,resetField:Sr,clearErrors:G,unregister:Oe,setError:oe,setFocus:lt,getFieldState:me};return{...Er,formControl:Er}}var pa=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const t=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const r=(Math.random()*16+t)%16|0;return(e=="x"?r:r&3|8).toString(16)})},l1=(t,e,r={})=>r.shouldFocus||Ft(r.shouldFocus)?r.focusName||`${t}.${Ft(r.focusIndex)?e:r.focusIndex}.`:"",c1=(t,e)=>[...t,...as(e)],u1=t=>Array.isArray(t)?t.map(()=>{}):void 0;function d1(t,e,r){return[...t.slice(0,e),...as(r),...t.slice(e)]}var h1=(t,e,r)=>Array.isArray(t)?(Ft(t[r])&&(t[r]=void 0),t.splice(r,0,t.splice(e,1)[0]),t):[],f1=(t,e)=>[...as(e),...as(t)];function bye(t,e){let r=0;const n=[...t];for(const s of e)n.splice(s-r,1),r++;return bb(n).length?n:[]}var p1=(t,e)=>Ft(e)?[]:bye(t,as(e).sort((r,n)=>r-n)),m1=(t,e,r)=>{[t[e],t[r]]=[t[r],t[e]]},i3=(t,e,r)=>(t[e]=r,t);function xye(t){const e=xb(),{control:r=e.control,name:n,keyName:s="id",shouldUnregister:i,rules:o}=t,[a,l]=te.useState(r._getFieldArray(n)),u=te.useRef(r._getFieldArray(n).map(pa)),d=te.useRef(!1);r._names.array.add(n),te.useMemo(()=>o&&a.length>=0&&r.register(n,o),[r,n,a.length,o]),wb(()=>r._subjects.array.subscribe({next:({values:x,name:S})=>{if(S===n||!S){const E=ye(x,n);Array.isArray(E)&&(l(E),u.current=E.map(pa))}}}).unsubscribe,[r,n]);const h=te.useCallback(x=>{d.current=!0,r._setFieldArray(n,x)},[r,n]),f=(x,S)=>{const E=as(zt(x)),N=c1(r._getFieldArray(n),E);r._names.focus=l1(n,N.length-1,S),u.current=c1(u.current,E.map(pa)),h(N),l(N),r._setFieldArray(n,N,c1,{argA:u1(x)})},p=(x,S)=>{const E=as(zt(x)),N=f1(r._getFieldArray(n),E);r._names.focus=l1(n,0,S),u.current=f1(u.current,E.map(pa)),h(N),l(N),r._setFieldArray(n,N,f1,{argA:u1(x)})},m=x=>{const S=p1(r._getFieldArray(n),x);u.current=p1(u.current,x),h(S),l(S),!Array.isArray(ye(r._fields,n))&&Pt(r._fields,n,void 0),r._setFieldArray(n,S,p1,{argA:x})},g=(x,S,E)=>{const N=as(zt(S)),_=d1(r._getFieldArray(n),x,N);r._names.focus=l1(n,x,E),u.current=d1(u.current,x,N.map(pa)),h(_),l(_),r._setFieldArray(n,_,d1,{argA:x,argB:u1(S)})},y=(x,S)=>{const E=r._getFieldArray(n);m1(E,x,S),m1(u.current,x,S),h(E),l(E),r._setFieldArray(n,E,m1,{argA:x,argB:S},!1)},v=(x,S)=>{const E=r._getFieldArray(n);h1(E,x,S),h1(u.current,x,S),h(E),l(E),r._setFieldArray(n,E,h1,{argA:x,argB:S},!1)},b=(x,S)=>{const E=zt(S),N=i3(r._getFieldArray(n),x,E);u.current=[...N].map((_,k)=>!_||k===x?pa():u.current[k]),h(N),l([...N]),r._setFieldArray(n,N,i3,{argA:x,argB:E},!0,!1)},w=x=>{const S=as(zt(x));u.current=S.map(pa),h([...S]),l([...S]),r._setFieldArray(n,[...S],E=>E,{},!0,!1)};return te.useEffect(()=>{if(r._state.action=!1,ZI(n,r._names)&&r._subjects.state.next({...r._formState}),d.current&&(!fd(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!fd(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(x=>{r._updateIsValidating([n]);const S=ye(x.errors,n),E=ye(r._formState.errors,n);(E?!S&&E.type||S&&(E.type!==S.type||E.message!==S.message):S&&S.type)&&(S?Pt(r._formState.errors,n,S):mr(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const x=ye(r._fields,n);x&&x._f&&!(fd(r._options.reValidateMode).isOnSubmit&&fd(r._options.mode).isOnSubmit)&&eR(x,r._names.disabled,r._formValues,r._options.criteriaMode===Hs.all,r._options.shouldUseNativeValidation,!0).then(S=>!wn(S)&&r._subjects.state.next({errors:Ine(r._formState.errors,S,n)}))}r._subjects.state.next({name:n,values:zt(r._formValues)}),r._names.focus&&jd(r._fields,(x,S)=>{if(r._names.focus&&S.startsWith(r._names.focus)&&x.focus)return x.focus(),1}),r._names.focus="",r._setValid(),d.current=!1},[a,n,r]),te.useEffect(()=>(!ye(r._formValues,n)&&r._setFieldArray(n),()=>{const x=(S,E)=>{const N=ye(r._fields,S);N&&N._f&&(N._f.mount=E)};r._options.shouldUnregister||i?r.unregister(n):x(n,!1)}),[n,r,s,i]),{swap:te.useCallback(y,[h,n,r]),move:te.useCallback(v,[h,n,r]),prepend:te.useCallback(p,[h,n,r]),append:te.useCallback(f,[h,n,r]),remove:te.useCallback(m,[h,n,r]),insert:te.useCallback(g,[h,n,r]),update:te.useCallback(b,[h,n,r]),replace:te.useCallback(w,[h,n,r]),fields:te.useMemo(()=>a.map((x,S)=>({...x,[s]:u.current[S]||pa()})),[a,s])}}function so(t={}){const e=te.useRef(void 0),r=te.useRef(void 0),[n,s]=te.useState({isDirty:!1,isValidating:!1,isLoading:Fn(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Fn(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:n},t.defaultValues&&!Fn(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...a}=vye(t);e.current={...a,formState:n}}const i=e.current.control;return i._options=t,wb(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(a=>({...a,isReady:!0})),i._formState.isReady=!0,o},[i]),te.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),te.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),te.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),te.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),te.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==n.isDirty&&i._subjects.state.next({isDirty:o})}},[i,n.isDirty]),te.useEffect(()=>{var o;t.values&&!xi(t.values,r.current)?(i._reset(t.values,{keepFieldsRef:!0,...i._options.resetOptions}),!((o=i._options.resetOptions)===null||o===void 0)&&o.keepIsValid||i._setValid(),r.current=t.values,s(a=>({...a}))):i._resetDefaultValues()},[i,t.values]),te.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=Nne(n,i),e.current}function Sb(){return it({queryKey:["workspaces"],queryFn:async()=>(await Ee.getWorkspaces()).data})}function Rne(t){return it({queryKey:["workspaces",t],queryFn:async()=>(await Ee.getWorkspace(t)).data,enabled:!!t})}function wye(){const t=rt();return Ke({mutationFn:async e=>(await Ee.createWorkspace(e)).data,onSuccess:()=>{t.invalidateQueries({queryKey:["workspaces"]})}})}function Sye(){const t=rt();return Ke({mutationFn:async({id:e,data:r})=>(await Ee.updateWorkspace(e,r)).data,onSuccess:(e,{id:r})=>{t.invalidateQueries({queryKey:["workspaces"]}),t.invalidateQueries({queryKey:["workspaces",r]})}})}function Eye(){const t=rt();return Ke({mutationFn:async e=>{await Ee.deleteWorkspace(e)},onSuccess:()=>{t.invalidateQueries({queryKey:["workspaces"]})}})}function _ye(){const t=rt();return Ke({mutationFn:async({workspaceId:e,userId:r})=>{await Ee.removeWorkspaceMember(e,r)},onSuccess:(e,{workspaceId:r})=>{t.invalidateQueries({queryKey:["workspaces",r]})}})}function Nye(){const t=rt();return Ke({mutationFn:async({workspaceId:e,userId:r,role:n})=>(await Ee.updateWorkspaceMember(e,r,{role:n})).data,onSuccess:(e,{workspaceId:r})=>{t.invalidateQueries({queryKey:["workspaces",r]})}})}function Cye(t){return it({queryKey:["workspaces",t,"invites"],queryFn:async()=>(await Ee.getWorkspaceInvites(t)).data,enabled:!!t})}function kye(){const t=rt();return Ke({mutationFn:async({workspaceId:e,email:r,role:n})=>(await Ee.createWorkspaceInvite(e,{email:r,role:n})).data,onSuccess:(e,{workspaceId:r})=>{t.invalidateQueries({queryKey:["workspaces",r,"invites"]})}})}function jye(){const t=rt();return Ke({mutationFn:async({workspaceId:e,inviteId:r})=>{await Ee.revokeWorkspaceInvite(e,r)},onSuccess:(e,{workspaceId:r})=>{t.invalidateQueries({queryKey:["workspaces",r,"invites"]})}})}function Tye(t){return it({queryKey:["invite",t],queryFn:async()=>(await Ee.validateInvite(t)).data,enabled:!!t,retry:!1})}function Oye(){const t=rt();return Ke({mutationFn:async e=>(await Ee.acceptInvite(e)).data,onSuccess:()=>{t.invalidateQueries({queryKey:["workspaces"]})}})}function Mne({value:t="private",workspaces:e=[],onChange:r,disabled:n=!1}){const[s,i]=C.useState(!1),{data:o=[],isLoading:a}=Sb(),l=[{value:"private",label:"Private",description:"Only you can see this",icon:$m},{value:"workspace",label:"Workspace",description:"Share with workspace members",icon:qr}],u=l.find(p=>p.value===t)||l[0],d=u.icon,h=p=>{r==null||r({visibility:p,workspaces:p==="private"?[]:e}),p==="private"&&i(!1)},f=p=>{const m=e.includes(p)?e.filter(g=>g!==p):[...e,p];r==null||r({visibility:t,workspaces:m})};return c.jsxs("div",{className:"relative",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Visibility"}),c.jsxs("button",{type:"button",onClick:()=>!n&&i(!s),disabled:n,className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-lg bg-white text-left focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(d,{className:"w-4 h-4 text-gray-500"}),c.jsx("span",{className:"text-sm text-gray-900",children:u.label})]}),c.jsx(ah,{className:`w-4 h-4 text-gray-400 transition-transform ${s?"rotate-180":""}`})]}),s&&c.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg",children:[c.jsx("div",{className:"p-2 border-b border-gray-100",children:l.map(p=>{const m=p.icon,g=t===p.value;return c.jsxs("button",{type:"button",onClick:()=>h(p.value),className:`w-full flex items-start gap-3 p-2 rounded-md text-left hover:bg-gray-50 ${g?"bg-primary-50":""}`,children:[c.jsx(m,{className:`w-4 h-4 mt-0.5 ${g?"text-primary-600":"text-gray-400"}`}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:`text-sm font-medium ${g?"text-primary-900":"text-gray-900"}`,children:p.label}),c.jsx("div",{className:"text-xs text-gray-500",children:p.description})]}),g&&c.jsx(to,{className:"w-4 h-4 text-primary-600 mt-0.5"})]},p.value)})}),t==="workspace"&&c.jsxs("div",{className:"p-2",children:[c.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2 px-2",children:"Select Workspaces"}),a?c.jsx("div",{className:"px-2 py-3 text-sm text-gray-500",children:"Loading workspaces..."}):o.length===0?c.jsx("div",{className:"px-2 py-3 text-sm text-gray-500",children:"No workspaces available. Create one first."}):c.jsx("div",{className:"max-h-48 overflow-y-auto",children:o.map(p=>{const m=e.includes(p.id);return c.jsxs("button",{type:"button",onClick:()=>f(p.id),className:"w-full flex items-center gap-3 p-2 rounded-md text-left hover:bg-gray-50",children:[c.jsx("div",{className:`flex items-center justify-center w-4 h-4 border-2 rounded ${m?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:m&&c.jsx(to,{className:"w-3 h-3 text-white"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"text-sm text-gray-900",children:p.title}),c.jsxs("div",{className:"text-xs text-gray-500",children:[p.member_count," members"]})]})]},p.id)})})]}),t==="workspace"&&c.jsx("div",{className:"p-2 border-t border-gray-100",children:c.jsx("button",{type:"button",onClick:()=>i(!1),className:"w-full px-3 py-2 text-sm font-medium text-primary-600 hover:bg-primary-50 rounded-md",children:"Done"})})]}),t==="workspace"&&e.length>0&&!s&&c.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:["Shared with ",e.length," workspace",e.length!==1?"s":""]})]})}function wA({isOpen:t,onClose:e,onSubmit:r,isLoading:n,person:s=null}){const i=!!s,[o,a]=C.useState(!1),[l,u]=C.useState(null),[d,h]=C.useState(null),[f,p]=C.useState("private"),[m,g]=C.useState([]),{data:y=[]}=it({queryKey:["date-types"],queryFn:async()=>(await Je.getDateTypes()).data,enabled:t&&!i}),v=y.find(O=>O.slug==="birthday"||O.name.toLowerCase()==="birthday"),b=Ke({mutationFn:async O=>{const D=new FormData;return D.append("file",O),(await X.post("/prm/v1/import/vcard/parse",D,{headers:{"Content-Type":"multipart/form-data"}})).data}}),{register:w,handleSubmit:x,reset:S,formState:{errors:E}}=so({defaultValues:{first_name:"",last_name:"",nickname:"",gender:"",pronouns:"",email:"",phone:"",phone_type:"mobile",birthday:"",how_we_met:"",is_favorite:!1}});C.useEffect(()=>{var O,D,F,$,q,M,z,Y,H,me,G,oe,Ie;if(t)if(u(null),h(null),b.reset(),s){const ce=(D=(O=s.acf)==null?void 0:O.contact_info)==null?void 0:D.find(Oe=>Oe.contact_type==="email"),De=($=(F=s.acf)==null?void 0:F.contact_info)==null?void 0:$.find(Oe=>Oe.contact_type==="phone"||Oe.contact_type==="mobile");S({first_name:((q=s.acf)==null?void 0:q.first_name)||"",last_name:((M=s.acf)==null?void 0:M.last_name)||"",nickname:((z=s.acf)==null?void 0:z.nickname)||"",gender:((Y=s.acf)==null?void 0:Y.gender)||"",pronouns:((H=s.acf)==null?void 0:H.pronouns)||"",email:(ce==null?void 0:ce.contact_value)||"",phone:(De==null?void 0:De.contact_value)||"",phone_type:(De==null?void 0:De.contact_type)||"mobile",birthday:"",how_we_met:((me=s.acf)==null?void 0:me.how_we_met)||"",is_favorite:((G=s.acf)==null?void 0:G.is_favorite)||!1}),p(((oe=s.acf)==null?void 0:oe._visibility)||"private"),g(((Ie=s.acf)==null?void 0:Ie._assigned_workspaces)||[])}else S({first_name:"",last_name:"",nickname:"",gender:"",pronouns:"",email:"",phone:"",phone_type:"mobile",birthday:"",how_we_met:"",is_favorite:!1}),p("private"),g([])},[t,s,S]);const N=C.useCallback(O=>{O.preventDefault(),O.stopPropagation(),O.type==="dragenter"||O.type==="dragover"?a(!0):O.type==="dragleave"&&a(!1)},[]),_=C.useCallback(O=>{O.preventDefault(),O.stopPropagation(),a(!1),h(null),O.dataTransfer.files&&O.dataTransfer.files[0]&&k(O.dataTransfer.files[0])},[]),k=O=>{const D=O.name.split(".").pop().toLowerCase();if(D!=="vcf"&&D!=="vcard"){h("Please select a vCard file (.vcf)");return}u(O),b.mutate(O,{onSuccess:F=>{S({first_name:F.first_name||"",last_name:F.last_name||"",nickname:F.nickname||"",gender:F.gender||"",pronouns:F.pronouns||"",email:F.email||"",phone:F.phone||"",phone_type:F.phone_type||"mobile",birthday:F.birthday||"",how_we_met:F.note||"",is_favorite:!1}),F.contact_count>1&&h(`Note: File contains ${F.contact_count} contacts. Only the first contact was loaded.`)},onError:F=>{var $,q;h(((q=($=F.response)==null?void 0:$.data)==null?void 0:q.message)||"Failed to parse vCard file"),u(null)}})},j=O=>{h(null),O.target.files&&O.target.files[0]&&k(O.target.files[0])},T=()=>{u(null),h(null),b.reset()};if(!t)return null;const P=O=>{r({...O,birthdayType:v,visibility:f,assigned_workspaces:m})};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:i?"Edit person":"Add person"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(ot,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:x(P),className:"flex flex-col flex-1 overflow-hidden",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[!i&&c.jsxs("div",{children:[c.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-3 text-center transition-colors ${o?"border-primary-500 bg-primary-50":l&&!d?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:N,onDragLeave:N,onDragOver:N,onDrop:_,children:[c.jsx("input",{type:"file",accept:".vcf,.vcard",onChange:j,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:n}),b.isPending?c.jsxs("div",{className:"flex items-center justify-center gap-2 py-1",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600"}),c.jsx("span",{className:"text-sm text-gray-600",children:"Parsing vCard..."})]}):l&&!d?c.jsxs("div",{className:"flex items-center justify-center gap-2 py-1",children:[c.jsx(Dm,{className:"h-4 w-4 text-green-600"}),c.jsxs("span",{className:"text-sm text-green-700",children:["Loaded from ",l.name]}),c.jsx("button",{type:"button",onClick:O=>{O.preventDefault(),O.stopPropagation(),T()},className:"ml-1 p-0.5 hover:bg-green-100 rounded",children:c.jsx(ot,{className:"h-3 w-3 text-green-600"})})]}):c.jsxs("div",{className:"flex items-center justify-center gap-2 py-1",children:[c.jsx(Kc,{className:"h-4 w-4 text-gray-400"}),c.jsxs("span",{className:"text-sm text-gray-600",children:["Drop a vCard or ",c.jsx("span",{className:"text-primary-600",children:"browse"})]})]})]}),d&&c.jsxs("div",{className:"mt-2 flex items-start gap-2 text-xs text-amber-700 bg-amber-50 rounded-lg p-2",children:[c.jsx(Zo,{className:"h-3 w-3 mt-0.5 flex-shrink-0"}),c.jsx("span",{children:d})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"First name *"}),c.jsx("input",{...w("first_name",{required:"First name is required"}),className:"input",placeholder:"John",disabled:n,autoFocus:!0}),E.first_name&&c.jsx("p",{className:"text-sm text-red-600 mt-1",children:E.first_name.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Last name"}),c.jsx("input",{...w("last_name"),className:"input",placeholder:"Doe",disabled:n})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Nickname"}),c.jsx("input",{...w("nickname"),className:"input",placeholder:"Johnny",disabled:n})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Gender"}),c.jsxs("select",{...w("gender"),className:"input",disabled:n,children:[c.jsx("option",{value:"",children:"Select..."}),c.jsx("option",{value:"male",children:"Male"}),c.jsx("option",{value:"female",children:"Female"}),c.jsx("option",{value:"non_binary",children:"Non-binary"}),c.jsx("option",{value:"other",children:"Other"}),c.jsx("option",{value:"prefer_not_to_say",children:"Prefer not to say"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Pronouns"}),c.jsx("input",{...w("pronouns"),type:"text",className:"input",placeholder:"e.g., they/them",disabled:n})]})]}),!i&&c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Email"}),c.jsx("input",{...w("email"),type:"email",className:"input",placeholder:"john@example.com",disabled:n}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Gravatar will be auto-fetched if available"})]}),!i&&c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Phone"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("select",{...w("phone_type"),className:"input w-24",disabled:n,children:[c.jsx("option",{value:"mobile",children:"Mobile"}),c.jsx("option",{value:"phone",children:"Phone"})]}),c.jsx("input",{...w("phone"),type:"tel",className:"input flex-1",placeholder:"+1 234 567 890",disabled:n})]})]}),!i&&c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Birthday"}),c.jsx("input",{...w("birthday"),type:"date",className:"input",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"How we met"}),c.jsx("textarea",{...w("how_we_met"),className:"input",rows:3,placeholder:"We met at...",disabled:n})]}),c.jsx(Mne,{value:f,workspaces:m,onChange:({visibility:O,workspaces:D})=>{p(O),g(D)},disabled:n}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"is_favorite",...w("is_favorite"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),c.jsx("label",{htmlFor:"is_favorite",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Mark as favorite"})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":i?"Save changes":"Create person"})]})]})]})})}function SA({isOpen:t,onClose:e,onSubmit:r,isLoading:n,company:s=null}){var Y,H,me;const i=!!s,[o,a]=C.useState(!1),[l,u]=C.useState(""),[d,h]=C.useState(""),[f,p]=C.useState(!1),[m,g]=C.useState(""),[y,v]=C.useState([]),[b,w]=C.useState("private"),[x,S]=C.useState([]),E=C.useRef(null),N=C.useRef(null),{data:_=[],isLoading:k}=it({queryKey:["companies","all"],queryFn:async()=>(await Je.getCompanies({per_page:100,_embed:!0})).data,enabled:t}),{data:j=[],isLoading:T}=it({queryKey:["people","all"],queryFn:async()=>(await Je.getPeople({per_page:100,_embed:!0})).data,enabled:t}),{register:P,handleSubmit:O,reset:D,formState:{errors:F}}=so({defaultValues:{title:"",website:"",industry:""}}),$=C.useMemo(()=>{const G=l.toLowerCase().trim();let oe=_.filter(Ie=>!(i&&Ie.id===(s==null?void 0:s.id)||i&&Ie.parent===(s==null?void 0:s.id)));return G&&(oe=oe.filter(Ie=>{var ce;return(ce=ar(Ie))==null?void 0:ce.toLowerCase().includes(G)})),[...oe].sort((Ie,ce)=>(ar(Ie)||"").localeCompare(ar(ce)||""))},[_,l,s,i]),q=C.useMemo(()=>_.find(G=>G.id===parseInt(d)),[_,d]),M=C.useMemo(()=>{const G=m.toLowerCase().trim(),oe=j.map(Oe=>{var pt,wt,St,fr;return{id:Oe.id,type:"person",name:qn(((pt=Oe.title)==null?void 0:pt.rendered)||""),thumbnail:(fr=(St=(wt=Oe._embedded)==null?void 0:wt["wp:featuredmedia"])==null?void 0:St[0])==null?void 0:fr.source_url}}),Ie=_.filter(Oe=>!i||Oe.id!==(s==null?void 0:s.id)).map(Oe=>{var pt,wt,St;return{id:Oe.id,type:"company",name:ar(Oe),thumbnail:(St=(wt=(pt=Oe._embedded)==null?void 0:pt["wp:featuredmedia"])==null?void 0:wt[0])==null?void 0:St.source_url}});let ce=[...oe,...Ie];G&&(ce=ce.filter(Oe=>{var pt;return(pt=Oe.name)==null?void 0:pt.toLowerCase().includes(G)}));const De=y.map(Oe=>`${Oe.type}-${Oe.id}`);return ce=ce.filter(Oe=>!De.includes(`${Oe.type}-${Oe.id}`)),ce.sort((Oe,pt)=>(Oe.name||"").localeCompare(pt.name||""))},[j,_,m,y,s,i]);if(C.useEffect(()=>{var G,oe,Ie,ce,De;t&&(a(!1),p(!1),u(""),g(""),s?(D({title:qn(((G=s.title)==null?void 0:G.rendered)||""),website:((oe=s.acf)==null?void 0:oe.website)||"",industry:((Ie=s.acf)==null?void 0:Ie.industry)||""}),h(s.parent?String(s.parent):""),w(((ce=s.acf)==null?void 0:ce._visibility)||"private"),S(((De=s.acf)==null?void 0:De._assigned_workspaces)||[])):(D({title:"",website:"",industry:""}),h(""),v([]),w("private"),S([])))},[t,s,D]),C.useEffect(()=>{var G,oe;if(t&&((oe=(G=s==null?void 0:s.acf)==null?void 0:G.investors)==null?void 0:oe.length)>0&&j.length>0&&_.length>0){const ce=s.acf.investors.map(De=>{var wt,St,fr,Tt,Sr,nn,zr;const Oe=j.find(lt=>lt.id===De);if(Oe)return{id:Oe.id,type:"person",name:qn(((wt=Oe.title)==null?void 0:wt.rendered)||""),thumbnail:(Tt=(fr=(St=Oe._embedded)==null?void 0:St["wp:featuredmedia"])==null?void 0:fr[0])==null?void 0:Tt.source_url};const pt=_.find(lt=>lt.id===De);return pt?{id:pt.id,type:"company",name:ar(pt),thumbnail:(zr=(nn=(Sr=pt._embedded)==null?void 0:Sr["wp:featuredmedia"])==null?void 0:nn[0])==null?void 0:zr.source_url}:null}).filter(Boolean);v(ce)}else t&&!s&&v([])},[t,s,j,_]),C.useEffect(()=>{const G=oe=>{E.current&&!E.current.contains(oe.target)&&a(!1)};if(o)return document.addEventListener("mousedown",G),()=>document.removeEventListener("mousedown",G)},[o]),C.useEffect(()=>{const G=oe=>{N.current&&!N.current.contains(oe.target)&&p(!1)};if(f)return document.addEventListener("mousedown",G),()=>document.removeEventListener("mousedown",G)},[f]),!t)return null;const z=G=>{r({...G,parentId:d?parseInt(d):0,investors:y.map(oe=>oe.id),visibility:b,assigned_workspaces:x})};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:i?"Edit organization":"Add organization"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(ot,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:O(z),className:"flex flex-col flex-1 overflow-hidden",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Organization name *"}),c.jsx("input",{...P("title",{required:"Organization name is required"}),className:"input",placeholder:"Acme Inc.",disabled:n,autoFocus:!0}),F.title&&c.jsx("p",{className:"text-sm text-red-600 mt-1",children:F.title.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Website"}),c.jsx("input",{...P("website"),type:"url",className:"input",placeholder:"https://example.com",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Industry"}),c.jsx("input",{...P("industry"),className:"input",placeholder:"Technology",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Parent organization"}),c.jsxs("div",{className:"relative",ref:E,children:[c.jsxs("button",{type:"button",onClick:()=>a(!o),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:k||n,children:[q?c.jsxs("div",{className:"flex items-center gap-2",children:[(me=(H=(Y=q._embedded)==null?void 0:Y["wp:featuredmedia"])==null?void 0:H[0])!=null&&me.source_url?c.jsx("img",{src:q._embedded["wp:featuredmedia"][0].source_url,alt:ar(q),className:"w-6 h-6 rounded object-contain bg-white"}):c.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center",children:c.jsx(yr,{className:"w-4 h-4 text-gray-500"})}),c.jsx("span",{className:"text-gray-900",children:ar(q)})]}):c.jsx("span",{className:"text-gray-400",children:"No parent organization"}),c.jsx(ah,{className:`w-4 h-4 text-gray-400 transition-transform ${o?"rotate-180":""}`})]}),o&&c.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[c.jsx("div",{className:"p-2 border-b border-gray-100",children:c.jsxs("div",{className:"relative",children:[c.jsx(wl,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),c.jsx("input",{type:"text",value:l,onChange:G=>u(G.target.value),placeholder:"Search organizations...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),c.jsxs("div",{className:"overflow-y-auto max-h-48",children:[c.jsx("button",{type:"button",onClick:()=>{h(""),a(!1),u("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${d?"":"bg-primary-50"}`,children:c.jsx("span",{className:"text-sm text-gray-500 italic",children:"No parent organization"})}),k?c.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):$.length>0?$.map(G=>{var oe,Ie,ce;return c.jsxs("button",{type:"button",onClick:()=>{h(String(G.id)),a(!1),u("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${d===String(G.id)?"bg-primary-50":""}`,children:[(ce=(Ie=(oe=G._embedded)==null?void 0:oe["wp:featuredmedia"])==null?void 0:Ie[0])!=null&&ce.source_url?c.jsx("img",{src:G._embedded["wp:featuredmedia"][0].source_url,alt:ar(G),className:"w-6 h-6 rounded object-contain bg-white"}):c.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center",children:c.jsx(yr,{className:"w-4 h-4 text-gray-500"})}),c.jsx("span",{className:"text-sm text-gray-900 truncate",children:ar(G)})]},G.id)}):c.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"No organizations found"})]})]})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select if this organization is a subsidiary or division of another"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"label flex items-center",children:[c.jsx(Ov,{className:"w-4 h-4 mr-2"}),"Investors"]}),y.length>0&&c.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:y.map(G=>c.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-100 rounded-full pl-1 pr-2 py-1",children:[G.thumbnail?c.jsx("img",{src:G.thumbnail,alt:G.name,className:`w-5 h-5 object-cover ${G.type==="person"?"rounded-full":"rounded"}`}):c.jsx("div",{className:`w-5 h-5 bg-gray-300 flex items-center justify-center ${G.type==="person"?"rounded-full":"rounded"}`,children:G.type==="person"?c.jsx(El,{className:"w-3 h-3 text-gray-500"}):c.jsx(yr,{className:"w-3 h-3 text-gray-500"})}),c.jsx("span",{className:"text-sm text-gray-700",children:G.name}),c.jsx("button",{type:"button",onClick:()=>v(oe=>oe.filter(Ie=>!(Ie.id===G.id&&Ie.type===G.type))),className:"ml-1 text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(ot,{className:"w-3.5 h-3.5"})})]},`${G.type}-${G.id}`))}),c.jsxs("div",{className:"relative",ref:N,children:[c.jsxs("button",{type:"button",onClick:()=>p(!f),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:k||T||n,children:[c.jsx("span",{className:"text-gray-400",children:"Add investor..."}),c.jsx(ah,{className:`w-4 h-4 text-gray-400 transition-transform ${f?"rotate-180":""}`})]}),f&&c.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[c.jsx("div",{className:"p-2 border-b border-gray-100",children:c.jsxs("div",{className:"relative",children:[c.jsx(wl,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),c.jsx("input",{type:"text",value:m,onChange:G=>g(G.target.value),placeholder:"Search people and organizations...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),c.jsx("div",{className:"overflow-y-auto max-h-48",children:k||T?c.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):M.length>0?M.map(G=>c.jsxs("button",{type:"button",onClick:()=>{v(oe=>[...oe,G]),g("")},className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors",children:[G.thumbnail?c.jsx("img",{src:G.thumbnail,alt:G.name,className:`w-6 h-6 object-cover ${G.type==="person"?"rounded-full":"rounded"}`}):c.jsx("div",{className:`w-6 h-6 bg-gray-200 flex items-center justify-center ${G.type==="person"?"rounded-full":"rounded"}`,children:G.type==="person"?c.jsx(El,{className:"w-4 h-4 text-gray-500"}):c.jsx(yr,{className:"w-4 h-4 text-gray-500"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("span",{className:"text-sm text-gray-900 truncate block",children:G.name}),c.jsx("span",{className:"text-xs text-gray-500",children:G.type==="person"?"Person":"Organization"})]})]},`${G.type}-${G.id}`)):c.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:m?"No results found":"No people or organizations available"})})]})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select people or organizations that have invested in this company"})]}),c.jsx(Mne,{value:b,workspaces:x,onChange:({visibility:G,workspaces:oe})=>{w(G),S(oe)},disabled:n})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":i?"Save changes":"Create organization"})]})]})]})})}function Pye({value:t=[],onChange:e,people:r=[],isLoading:n,currentPersonId:s}){const[i,o]=C.useState(""),a=C.useMemo(()=>{if(!i)return r.slice(0,10);const h=i.toLowerCase();return r.filter(f=>kd(f).toLowerCase().includes(h)).slice(0,10)},[r,i]),l=C.useMemo(()=>t.map(h=>r.find(f=>f.id===h)).filter(Boolean),[t,r]),u=h=>{t.includes(h)||e([...t,h]),o("")},d=h=>{h!==s&&e(t.filter(f=>f!==h))};return c.jsxs("div",{className:"space-y-2",children:[l.length>0&&c.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(h=>c.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-primary-100 text-primary-800 rounded-full text-sm",children:[kd(h),h.id!==s&&c.jsx("button",{type:"button",onClick:()=>d(h.id),className:"hover:text-primary-600",children:c.jsx(ot,{className:"w-3 h-3"})})]},h.id))}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",value:i,onChange:h=>o(h.target.value),placeholder:"Search for people to add...",className:"input",disabled:n}),i&&c.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:a.length>0?a.map(h=>c.jsx("button",{type:"button",onClick:()=>u(h.id),disabled:t.includes(h.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t.includes(h.id)?"opacity-50 cursor-not-allowed":""}`,children:kd(h)},h.id)):c.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No people found"})})]})]})}function EA({isOpen:t,onClose:e,onSubmit:r,isLoading:n,dateItem:s=null,personId:i,allPeople:o=[],isPeopleLoading:a=!1}){const l=!!s,{data:u=[]}=it({queryKey:["date-types"],queryFn:async()=>((await Je.getDateTypes()).data||[]).sort((N,_)=>{const k=N.name||"",j=_.name||"";return k.localeCompare(j)})}),{register:d,handleSubmit:h,reset:f,watch:p,setValue:m,control:g,formState:{errors:y}}=so({defaultValues:{title:"",date_value:"",date_type:"",related_people:[],is_recurring:!0,year_unknown:!1}}),v=p("related_people"),b=p("date_type"),w=p("title");if(C.useEffect(()=>{var N;if((!w||["'s Birthday","Wedding of "].some(_=>w.endsWith(_)||w.startsWith(_)))&&(v==null?void 0:v.length)>0&&b){const _=u.find(P=>P.id===parseInt(b)),k=(_==null?void 0:_.name)||"",j=((N=_==null?void 0:_.slug)==null?void 0:N.toLowerCase())||k.toLowerCase(),T=v.map(P=>{var D,F,$;const O=o.find(q=>q.id===P);return O?qn(((D=O.acf)==null?void 0:D.first_name)||O.first_name||(($=(F=O.title)==null?void 0:F.rendered)==null?void 0:$.split(" ")[0])||""):null}).filter(Boolean);if(T.length>0&&k){let P;j==="wedding"?P=T.length>=2?`Wedding of ${T[0]} & ${T[1]}`:`Wedding of ${T[0]}`:P=`${T[0]}'s ${k}`,m("title",P)}}},[v,b,o,u,m,w]),C.useEffect(()=>{var S,E,N,_,k,j;if(t)if(s){let T=[];const P=s.related_people||((S=s.acf)==null?void 0:S.related_people);P&&(Array.isArray(P)?T=P.map(D=>parseInt(typeof D=="object"&&D!==null?D.ID||D.id||D.post_id:D,10)).filter(D=>!isNaN(D)&&D>0):typeof P=="number"&&(T=[P]));let O="";if(((E=s.date_type)==null?void 0:E.length)>0&&s.date_type[0]!=null){const D=s.date_type[0];if(typeof D=="string"){const F=u.find($=>$.name.toLowerCase()===D.toLowerCase());O=F?String(F.id):""}else O=String(D)}f({title:qn(((N=s.title)==null?void 0:N.rendered)||s.title||""),date_value:((_=s.acf)==null?void 0:_.date_value)||s.date_value||"",date_type:O,related_people:T,is_recurring:((k=s.acf)==null?void 0:k.is_recurring)??s.is_recurring??!0,year_unknown:((j=s.acf)==null?void 0:j.year_unknown)??s.year_unknown??!1})}else f({title:"",date_value:"",date_type:"",related_people:i?[parseInt(i)]:[],is_recurring:!0,year_unknown:!1})},[t,s,i,f,u]),!t)return null;const x=S=>{const E=S.date_type?parseInt(S.date_type,10):null,N=E&&!isNaN(E)?[E]:[];r({title:S.title,date_type:N,date_value:S.date_value,related_people:S.related_people,is_recurring:S.is_recurring,year_unknown:S.year_unknown})};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:l?"Edit date":"Add date"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(ot,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:h(x),className:"flex flex-col flex-1 overflow-hidden",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Related people"}),c.jsx(Iv,{name:"related_people",control:g,render:({field:S})=>c.jsx(Pye,{value:S.value,onChange:S.onChange,people:o,isLoading:a,currentPersonId:parseInt(i)})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Date type *"}),c.jsx(Iv,{name:"date_type",control:g,rules:{required:"Please select a date type"},render:({field:S})=>c.jsxs("select",{value:S.value?String(S.value):"",onChange:E=>S.onChange(E.target.value),className:"input",disabled:n,children:[c.jsx("option",{value:"",children:"Select a type..."}),u.map(E=>c.jsx("option",{value:String(E.id),children:E.name},E.id))]})}),y.date_type&&c.jsx("p",{className:"text-sm text-red-600 mt-1",children:y.date_type.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Label"}),c.jsx("input",{...d("title"),className:"input",placeholder:"e.g., Mom's Birthday",disabled:n}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-generated from person and date type. You can customize it."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Date *"}),c.jsx("input",{...d("date_value",{required:"Date is required"}),type:"date",className:"input",disabled:n}),y.date_value&&c.jsx("p",{className:"text-sm text-red-600 mt-1",children:y.date_value.message})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"year_unknown",...d("year_unknown"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),c.jsx("label",{htmlFor:"year_unknown",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Year unknown"})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"is_recurring",...d("is_recurring"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),c.jsx("label",{htmlFor:"is_recurring",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Repeats every year"})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":l?"Save changes":"Add date"})]})]})]})})}const Iye=[{name:"Dashboard",href:"/",icon:vge},{name:"People",href:"/people",icon:qr},{name:"Organizations",href:"/companies",icon:yr},{name:"Dates",href:"/dates",icon:Ji},{name:"Todos",href:"/todos",icon:Xs},{name:"Workspaces",href:"/workspaces",icon:Mge},{name:"Settings",href:"/settings",icon:hA}];function o3({mobile:t=!1,onClose:e}){const{logoutUrl:r}=sA();return c.jsxs("div",{className:"flex flex-col h-full bg-white border-r border-gray-200",children:[c.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[c.jsxs(ze,{to:"/",className:"flex items-center gap-2 text-xl font-bold text-primary-600",children:[c.jsx(ane,{className:"w-5 h-5"}),Gc]}),t&&c.jsx("button",{onClick:e,className:"p-2 -mr-2",children:c.jsx(ot,{className:"w-5 h-5"})})]}),c.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1 overflow-y-auto",children:Iye.map(n=>c.jsxs(epe,{to:n.href,onClick:t?e:void 0,className:({isActive:s})=>`flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${s?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-50"}`,children:[c.jsx(n.icon,{className:"w-5 h-5 mr-3"}),n.name]},n.name))}),c.jsx("div",{className:"p-4 border-t border-gray-200",children:c.jsxs("a",{href:r,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[c.jsx(Ege,{className:"w-5 h-5 mr-3"}),"Log Out"]})})]})}function Rye(){var o;const[t,e]=C.useState(!1),r=C.useRef(null),{data:n,isLoading:s}=it({queryKey:["current-user"],queryFn:async()=>(await Ee.getCurrentUser()).data});if(C.useEffect(()=>{const a=l=>{r.current&&!r.current.contains(l.target)&&e(!1)};if(t)return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[t]),s||!n)return c.jsx("div",{className:"flex items-center ml-auto",children:c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full animate-pulse"})});const i=((o=n.name)==null?void 0:o.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2))||"?";return c.jsxs("div",{className:"relative ml-auto",ref:r,children:[c.jsxs("button",{onClick:()=>e(!t),className:"flex items-center gap-2 p-1 rounded-full hover:bg-gray-100 transition-colors","aria-label":"User menu",children:[n.avatar_url?c.jsx("img",{src:n.avatar_url,alt:n.name,className:"w-8 h-8 rounded-full object-cover"}):c.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-sm font-medium text-primary-700",children:i})}),c.jsx(ah,{className:`w-4 h-4 text-gray-500 transition-transform ${t?"rotate-180":""}`})]}),t&&c.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:c.jsxs("div",{className:"py-1",children:[c.jsxs("a",{href:n.profile_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>e(!1),children:[c.jsx(El,{className:"w-4 h-4 mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Edit profile"})]}),n.is_admin&&c.jsxs("a",{href:n.admin_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>e(!1),children:[c.jsx(hA,{className:"w-4 h-4 mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"WordPress admin"})]})]})})]})}function Mye({isOpen:t,onClose:e}){const[r,n]=C.useState(""),[s,i]=C.useState(0),o=Gn(),a=C.useRef(null),l=r.trim(),{data:u,isLoading:d}=Zge(l),h=u||{people:[],companies:[]},f=[...(h.people||[]).map(v=>({...v,type:"person"})),...(h.companies||[]).map(v=>({...v,type:"company"}))],p=f.length>0,m=r.trim().length>=2;C.useEffect(()=>{t&&(n(""),i(0),setTimeout(()=>{var v;return(v=a.current)==null?void 0:v.focus()},50))},[t]),C.useEffect(()=>{i(0)},[u]);const g=v=>{if(v.key==="Escape"){e();return}if(!(!m||!p)){if(v.key==="ArrowDown")v.preventDefault(),i(b=>Math.min(b+1,f.length-1));else if(v.key==="ArrowUp")v.preventDefault(),i(b=>Math.max(b-1,0));else if(v.key==="Enter"){v.preventDefault();const b=f[s];b&&y(b.type,b.id)}}},y=(v,b)=>{e(),v==="person"?o(`/people/${b}`):v==="company"&&o(`/companies/${b}`)};return t?c.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:e}),c.jsx("div",{className:"relative min-h-screen flex items-start justify-center pt-[15vh] px-4",children:c.jsxs("div",{className:"relative w-full max-w-xl bg-white rounded-xl shadow-2xl overflow-hidden",children:[c.jsxs("div",{className:"flex items-center px-4 border-b border-gray-200",children:[c.jsx(wl,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),c.jsx("input",{ref:a,type:"text",value:r,onChange:v=>n(v.target.value),onKeyDown:g,placeholder:"Search people & organizations...",className:"flex-1 px-4 py-4 text-lg outline-none placeholder:text-gray-400",autoComplete:"off"}),c.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[c.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-gray-500 font-mono",children:"esc"}),c.jsx("span",{children:"to close"})]})]}),c.jsx("div",{className:"max-h-96 overflow-y-auto",children:m?d?c.jsxs("div",{className:"px-4 py-8 text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),c.jsx("p",{className:"mt-3 text-sm text-gray-500",children:"Searching..."})]}):p?c.jsxs("div",{className:"py-2",children:[h.people&&h.people.length>0&&c.jsxs("div",{className:"px-2",children:[c.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"People"}),h.people.map((v,b)=>{const x=s===b;return c.jsxs("button",{onClick:()=>y("person",v.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors text-left ${x?"bg-primary-50 text-primary-900":"hover:bg-gray-50"}`,children:[v.thumbnail?c.jsx("img",{src:v.thumbnail,alt:v.name,className:"w-8 h-8 rounded-full object-cover"}):c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx(El,{className:"w-4 h-4 text-gray-500"})}),c.jsx("span",{className:"text-sm font-medium flex-1 truncate",children:v.name}),x&&c.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:""})]},v.id)})]}),h.companies&&h.companies.length>0&&c.jsxs("div",{className:"px-2 mt-2",children:[c.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Organizations"}),h.companies.map((v,b)=>{var S;const w=(((S=h.people)==null?void 0:S.length)||0)+b,x=s===w;return c.jsxs("button",{onClick:()=>y("company",v.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors text-left ${x?"bg-primary-50 text-primary-900":"hover:bg-gray-50"}`,children:[v.thumbnail?c.jsx("img",{src:v.thumbnail,alt:v.name,className:"w-8 h-8 rounded object-contain bg-white"}):c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded flex items-center justify-center",children:c.jsx(yr,{className:"w-4 h-4 text-gray-500"})}),c.jsx("span",{className:"text-sm font-medium flex-1 truncate",children:v.name}),x&&c.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:""})]},v.id)})]})]}):c.jsx("div",{className:"px-4 py-8 text-center text-gray-500",children:c.jsxs("p",{className:"text-sm",children:['No results found for "',r,'"']})}):c.jsxs("div",{className:"px-4 py-8 text-center text-gray-500",children:[c.jsx(wl,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),c.jsx("p",{className:"text-sm",children:"Type at least 2 characters to search"})]})}),c.jsx("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-xs text-gray-500",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),c.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),c.jsx("span",{children:"to navigate"})]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),c.jsx("span",{children:"to select"})]})]})})]})})]}):null}function Aye({onAddTodo:t,onAddPerson:e,onAddCompany:r,onAddDate:n}){const[s,i]=C.useState(!1),o=C.useRef(null);C.useEffect(()=>{const h=f=>{o.current&&!o.current.contains(f.target)&&i(!1)};if(s)return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[s]);const a=()=>{i(!1),t()},l=()=>{i(!1),e()},u=()=>{i(!1),r()},d=()=>{i(!1),n()};return c.jsxs("div",{className:"relative",ref:o,children:[c.jsx("button",{onClick:()=>i(!s),className:"flex items-center justify-center w-9 h-9 rounded-lg bg-primary-600 hover:bg-primary-700 text-white transition-colors","aria-label":"Quick add",title:"Quick add",children:c.jsx(dr,{className:"w-5 h-5"})}),s&&c.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:c.jsxs("div",{className:"py-1",children:[c.jsxs("button",{onClick:l,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[c.jsx(El,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Person"]}),c.jsxs("button",{onClick:u,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[c.jsx(yr,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Organization"]}),c.jsxs("button",{onClick:a,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[c.jsx(Xs,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Todo"]}),c.jsxs("button",{onClick:d,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[c.jsx(Ji,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Date"]})]})})]})}function Dye({onMenuClick:t,onAddTodo:e,onAddPerson:r,onAddCompany:n,onAddDate:s,onOpenSearch:i}){const o=ia(),a=()=>{const l=o.pathname;return l==="/"?"Dashboard":l.startsWith("/people")?"People":l.startsWith("/companies")?"Organizations":l.startsWith("/dates")?"Important Dates":l.startsWith("/todos")?"Todos":l.startsWith("/workspaces")?"Workspaces":l.startsWith("/settings")?"Settings":""};return c.jsxs("header",{className:"sticky top-0 z-10 flex items-center h-16 px-4 bg-white border-b border-gray-200 lg:px-6",children:[c.jsx("button",{onClick:t,className:"p-2 -ml-2 lg:hidden",children:c.jsx(Nge,{className:"w-5 h-5"})}),c.jsx("h1",{className:"ml-2 text-lg font-semibold lg:ml-0",children:a()}),c.jsx("div",{className:"flex-1"}),c.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg border border-gray-200 hover:bg-gray-50 text-gray-500 transition-colors","aria-label":"Search",title:"Search (K)",children:[c.jsx(wl,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden sm:inline text-sm",children:"Search..."}),c.jsxs("kbd",{className:"hidden sm:flex items-center gap-0.5 px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:[c.jsx(pge,{className:"w-3 h-3"}),"K"]})]}),c.jsx("div",{className:"ml-2",children:c.jsx(Aye,{onAddTodo:e,onAddPerson:r,onAddCompany:n,onAddDate:s})}),c.jsx("div",{className:"ml-2",children:c.jsx(Rye,{})})]})}function $ye({children:t}){const[e,r]=C.useState(!1),[n,s]=C.useState(!1),[i,o]=C.useState(!1),[a,l]=C.useState(!1),[u,d]=C.useState(!1),[h,f]=C.useState(!1),[p,m]=C.useState(!1),[g,y]=C.useState(!1),[v,b]=C.useState(!1),w=Gn();rt();const{data:x=[],isLoading:S}=hu();yne();const E=fne({onSuccess:P=>{l(!1),w(`/people/${P.id}`)}}),N=gne({onSuccess:P=>{d(!1),w(`/companies/${P.id}`)}}),_=mne({onSuccess:()=>f(!1)}),k=async P=>{m(!0);try{await E.mutateAsync(P)}finally{m(!1)}},j=async P=>{y(!0);try{await N.mutateAsync(P)}finally{y(!1)}},T=async P=>{b(!0);try{await _.mutateAsync(P)}finally{b(!1)}};return C.useEffect(()=>{const P=O=>{(O.metaKey||O.ctrlKey)&&O.key==="k"&&(O.preventDefault(),o(!0))};return document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)},[]),c.jsxs("div",{className:"flex h-screen bg-gray-50",children:[c.jsx("div",{className:"hidden lg:flex lg:w-64 lg:flex-col",children:c.jsx(o3,{})}),e&&c.jsxs("div",{className:"fixed inset-0 z-40 lg:hidden",children:[c.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>r(!1)}),c.jsx("div",{className:"fixed inset-y-0 left-0 flex flex-col w-64 bg-white",children:c.jsx(o3,{mobile:!0,onClose:()=>r(!1)})})]}),c.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[c.jsx(Dye,{onMenuClick:()=>r(!0),onAddTodo:()=>s(!0),onAddPerson:()=>l(!0),onAddCompany:()=>d(!0),onAddDate:()=>f(!0),onOpenSearch:()=>o(!0)}),c.jsx("main",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:t})]}),c.jsx(Mye,{isOpen:i,onClose:()=>o(!1)}),c.jsx(xne,{isOpen:n,onClose:()=>s(!1)}),c.jsx(wA,{isOpen:a,onClose:()=>l(!1),onSubmit:k,isLoading:p}),c.jsx(SA,{isOpen:u,onClose:()=>d(!1),onSubmit:j,isLoading:g}),c.jsx(EA,{isOpen:h,onClose:()=>f(!1),onSubmit:T,isLoading:v,allPeople:x,isPeopleLoading:S})]})}function mt(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function ta(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Fye(t,e){const r=mt(t);return isNaN(e)?ta(t,NaN):(e&&r.setDate(r.getDate()+e),r)}const Ane=6048e5,qye=864e5,Dne=6e4,$ne=36e5,ty=43200,a3=1440;let Lye={};function qm(){return Lye}function Yc(t,e){var a,l,u,d;const r=qm(),n=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=mt(t),i=s.getDay(),o=(i<n?7:0)+i-n;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Av(t){return Yc(t,{weekStartsOn:1})}function Fne(t){const e=mt(t),r=e.getFullYear(),n=ta(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const s=Av(n),i=ta(t,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=Av(i);return e.getTime()>=s.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function Dv(t){const e=mt(t);return e.setHours(0,0,0,0),e}function $v(t){const e=mt(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function Bye(t,e){const r=Dv(t),n=Dv(e),s=+r-$v(r),i=+n-$v(n);return Math.round((s-i)/qye)}function zye(t){const e=Fne(t),r=ta(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),Av(r)}function Td(t,e){const r=mt(t),n=mt(e),s=r.getTime()-n.getTime();return s<0?-1:s>0?1:s}function Eb(t){return ta(t,Date.now())}function qne(t,e){const r=Dv(t),n=Dv(e);return+r==+n}function Wye(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Vye(t){if(!Wye(t)&&typeof t!="number")return!1;const e=mt(t);return!isNaN(Number(e))}function Uye(t,e){const r=mt(t),n=mt(e),s=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return s*12+i}function Hye(t,e){const r=mt(t),n=mt(e);return r.getFullYear()-n.getFullYear()}function Kye(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function Gye(t,e){return+mt(t)-+mt(e)}function Yye(t){const e=mt(t);return e.setHours(23,59,59,999),e}function Qye(t){const e=mt(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function Xye(t){const e=mt(t);return+Yye(e)==+Qye(e)}function Jye(t,e){const r=mt(t),n=mt(e),s=Td(r,n),i=Math.abs(Uye(r,n));let o;if(i<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-s*i);let a=Td(r,n)===-s;Xye(mt(t))&&i===1&&Td(t,n)===1&&(a=!1),o=s*(i-Number(a))}return o===0?0:o}function Zye(t,e,r){const n=Gye(t,e)/1e3;return Kye(r==null?void 0:r.roundingMethod)(n)}function g1(t,e){const r=mt(t),n=mt(e),s=Td(r,n),i=Math.abs(Hye(r,n));r.setFullYear(1584),n.setFullYear(1584);const o=Td(r,n)===-s,a=s*(i-+o);return a===0?0:a}function eve(t){const e=mt(t),r=ta(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}const tve={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},rve=(t,e,r)=>{let n;const s=tve[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function y1(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const nve={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},sve={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ive={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ove={date:y1({formats:nve,defaultWidth:"full"}),time:y1({formats:sve,defaultWidth:"full"}),dateTime:y1({formats:ive,defaultWidth:"full"})},ave={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},lve=(t,e,r,n)=>ave[t];function jf(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=r!=null&&r.width?String(r.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=r!=null&&r.width?String(r.width):t.defaultWidth;s=t.values[a]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const cve={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},uve={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},dve={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},hve={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},fve={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},pve={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},mve=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},gve={ordinalNumber:mve,era:jf({values:cve,defaultWidth:"wide"}),quarter:jf({values:uve,defaultWidth:"wide",argumentCallback:t=>t-1}),month:jf({values:dve,defaultWidth:"wide"}),day:jf({values:hve,defaultWidth:"wide"}),dayPeriod:jf({values:fve,defaultWidth:"wide",formattingValues:pve,defaultFormattingWidth:"wide"})};function Tf(t){return(e,r={})=>{const n=r.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],a=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?vve(a,h=>h.test(o)):yve(a,h=>h.test(o));let u;u=t.valueCallback?t.valueCallback(l):l,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function yve(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function vve(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function bve(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const s=n[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const xve=/^(\d+)(th|st|nd|rd)?/i,wve=/\d+/i,Sve={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Eve={any:[/^b/i,/^(a|c)/i]},_ve={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Nve={any:[/1/i,/2/i,/3/i,/4/i]},Cve={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},kve={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},jve={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Tve={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ove={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Pve={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Ive={ordinalNumber:bve({matchPattern:xve,parsePattern:wve,valueCallback:t=>parseInt(t,10)}),era:Tf({matchPatterns:Sve,defaultMatchWidth:"wide",parsePatterns:Eve,defaultParseWidth:"any"}),quarter:Tf({matchPatterns:_ve,defaultMatchWidth:"wide",parsePatterns:Nve,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Tf({matchPatterns:Cve,defaultMatchWidth:"wide",parsePatterns:kve,defaultParseWidth:"any"}),day:Tf({matchPatterns:jve,defaultMatchWidth:"wide",parsePatterns:Tve,defaultParseWidth:"any"}),dayPeriod:Tf({matchPatterns:Ove,defaultMatchWidth:"any",parsePatterns:Pve,defaultParseWidth:"any"})},Lne={code:"en-US",formatDistance:rve,formatLong:ove,formatRelative:lve,localize:gve,match:Ive,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Rve(t){const e=mt(t);return Bye(e,eve(e))+1}function Mve(t){const e=mt(t),r=+Av(e)-+zye(e);return Math.round(r/Ane)+1}function Bne(t,e){var d,h,f,p;const r=mt(t),n=r.getFullYear(),s=qm(),i=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(f=s.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=ta(t,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const a=Yc(o,e),l=ta(t,0);l.setFullYear(n,0,i),l.setHours(0,0,0,0);const u=Yc(l,e);return r.getTime()>=a.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function Ave(t,e){var a,l,u,d;const r=qm(),n=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=Bne(t,e),i=ta(t,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),Yc(i,e)}function Dve(t,e){const r=mt(t),n=+Yc(r,e)-+Ave(r,e);return Math.round(n/Ane)+1}function _t(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const ma={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return _t(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):_t(r+1,2)},d(t,e){return _t(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return _t(t.getHours()%12||12,e.length)},H(t,e){return _t(t.getHours(),e.length)},m(t,e){return _t(t.getMinutes(),e.length)},s(t,e){return _t(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return _t(s,e.length)}},zu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},l3={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return ma.y(t,e)},Y:function(t,e,r,n){const s=Bne(t,n),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return _t(o,2)}return e==="Yo"?r.ordinalNumber(i,{unit:"year"}):_t(i,e.length)},R:function(t,e){const r=Fne(t);return _t(r,e.length)},u:function(t,e){const r=t.getFullYear();return _t(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return _t(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return _t(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return ma.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return _t(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const s=Dve(t,n);return e==="wo"?r.ordinalNumber(s,{unit:"week"}):_t(s,e.length)},I:function(t,e,r){const n=Mve(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):_t(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):ma.d(t,e)},D:function(t,e,r){const n=Rve(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):_t(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const s=t.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return _t(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const s=t.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return _t(i,e.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return _t(s,e.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let s;switch(n===12?s=zu.noon:n===0?s=zu.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let s;switch(n>=17?s=zu.evening:n>=12?s=zu.afternoon:n>=4?s=zu.morning:s=zu.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return ma.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):ma.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):_t(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):_t(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):ma.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):ma.s(t,e)},S:function(t,e){return ma.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return u3(n);case"XXXX":case"XX":return Xl(n);case"XXXXX":case"XXX":default:return Xl(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return u3(n);case"xxxx":case"xx":return Xl(n);case"xxxxx":case"xxx":default:return Xl(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+c3(n,":");case"OOOO":default:return"GMT"+Xl(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+c3(n,":");case"zzzz":default:return"GMT"+Xl(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return _t(n,e.length)},T:function(t,e,r){const n=t.getTime();return _t(n,e.length)}};function c3(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Math.trunc(n/60),i=n%60;return i===0?r+String(s):r+String(s)+e+_t(i,2)}function u3(t,e){return t%60===0?(t>0?"-":"+")+_t(Math.abs(t)/60,2):Xl(t,e)}function Xl(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=_t(Math.trunc(n/60),2),i=_t(n%60,2);return r+s+e+i}const d3=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},zne=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},$ve=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return d3(t,e);let i;switch(n){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",d3(n,e)).replace("{{time}}",zne(s,e))},Fve={p:zne,P:$ve},qve=/^D+$/,Lve=/^Y+$/,Bve=["D","DD","YY","YYYY"];function zve(t){return qve.test(t)}function Wve(t){return Lve.test(t)}function Vve(t,e,r){const n=Uve(t,e,r);if(console.warn(n),Bve.includes(t))throw new RangeError(n)}function Uve(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Hve=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Kve=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Gve=/^'([^]*?)'?$/,Yve=/''/g,Qve=/[a-zA-Z]/;function Dn(t,e,r){var d,h,f,p;const n=qm(),s=n.locale??Lne,i=n.firstWeekContainsDate??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,o=n.weekStartsOn??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,a=mt(t);if(!Vye(a))throw new RangeError("Invalid time value");let l=e.match(Kve).map(m=>{const g=m[0];if(g==="p"||g==="P"){const y=Fve[g];return y(m,s.formatLong)}return m}).join("").match(Hve).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const g=m[0];if(g==="'")return{isToken:!1,value:Xve(m)};if(l3[g])return{isToken:!0,value:m};if(g.match(Qve))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:m}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return l.map(m=>{if(!m.isToken)return m.value;const g=m.value;(Wve(g)||zve(g))&&Vve(g,e,String(t));const y=l3[g[0]];return y(a,g,s.localize,u)}).join("")}function Xve(t){const e=t.match(Gve);return e?e[1].replace(Yve,"'"):t}function Jve(t,e,r){const n=qm(),s=(r==null?void 0:r.locale)??n.locale??Lne,i=2520,o=Td(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const a=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let l,u;o>0?(l=mt(e),u=mt(t)):(l=mt(t),u=mt(e));const d=Zye(u,l),h=($v(u)-$v(l))/1e3,f=Math.round((d-h)/60);let p;if(f<2)return r!=null&&r.includeSeconds?d<5?s.formatDistance("lessThanXSeconds",5,a):d<10?s.formatDistance("lessThanXSeconds",10,a):d<20?s.formatDistance("lessThanXSeconds",20,a):d<40?s.formatDistance("halfAMinute",0,a):d<60?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",1,a):f===0?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",f,a);if(f<45)return s.formatDistance("xMinutes",f,a);if(f<90)return s.formatDistance("aboutXHours",1,a);if(f<a3){const m=Math.round(f/60);return s.formatDistance("aboutXHours",m,a)}else{if(f<i)return s.formatDistance("xDays",1,a);if(f<ty){const m=Math.round(f/a3);return s.formatDistance("xDays",m,a)}else if(f<ty*2)return p=Math.round(f/ty),s.formatDistance("aboutXMonths",p,a)}if(p=Jye(u,l),p<12){const m=Math.round(f/ty);return s.formatDistance("xMonths",m,a)}else{const m=p%12,g=Math.trunc(p/12);return m<3?s.formatDistance("aboutXYears",g,a):m<9?s.formatDistance("overXYears",g,a):s.formatDistance("almostXYears",g+1,a)}}function Zve(t,e){return Jve(t,Eb(t),e)}function e0e(t,e){const r=mt(t),n=mt(e);return r.getTime()>n.getTime()}function t0e(t,e,r){const n=Yc(t,r),s=Yc(e,r);return+n==+s}function r0e(t,e){return t0e(t,Eb(t),e)}function Wne(t){return qne(t,Eb(t))}function Vne(t,e){return Fye(t,-e)}function Une(t){return qne(t,Vne(Eb(t),1))}function Gp(t,e){const n=o0e(t);let s;if(n.date){const l=a0e(n.date,2);s=l0e(l.restDateString,l.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);const i=s.getTime();let o=0,a;if(n.time&&(o=c0e(n.time),isNaN(o)))return new Date(NaN);if(n.timezone){if(a=u0e(n.timezone),isNaN(a))return new Date(NaN)}else{const l=new Date(i+o),u=new Date(0);return u.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),u.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),u}return new Date(i+o+a)}const ry={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},n0e=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,s0e=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,i0e=/^([+-])(\d{2})(?::?(\d{2}))?$/;function o0e(t){const e={},r=t.split(ry.dateTimeDelimiter);let n;if(r.length>2)return e;if(/:/.test(r[0])?n=r[0]:(e.date=r[0],n=r[1],ry.timeZoneDelimiter.test(e.date)&&(e.date=t.split(ry.timeZoneDelimiter)[0],n=t.substr(e.date.length,t.length))),n){const s=ry.timezone.exec(n);s?(e.time=n.replace(s[1],""),e.timezone=s[1]):e.time=n}return e}function a0e(t,e){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=t.match(r);if(!n)return{year:NaN,restDateString:""};const s=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?s:i*100,restDateString:t.slice((n[1]||n[2]).length)}}function l0e(t,e){if(e===null)return new Date(NaN);const r=t.match(n0e);if(!r)return new Date(NaN);const n=!!r[4],s=Of(r[1]),i=Of(r[2])-1,o=Of(r[3]),a=Of(r[4]),l=Of(r[5])-1;if(n)return m0e(e,a,l)?d0e(e,a,l):new Date(NaN);{const u=new Date(0);return!f0e(e,i,o)||!p0e(e,s)?new Date(NaN):(u.setUTCFullYear(e,i,Math.max(s,o)),u)}}function Of(t){return t?parseInt(t):1}function c0e(t){const e=t.match(s0e);if(!e)return NaN;const r=v1(e[1]),n=v1(e[2]),s=v1(e[3]);return g0e(r,n,s)?r*$ne+n*Dne+s*1e3:NaN}function v1(t){return t&&parseFloat(t.replace(",","."))||0}function u0e(t){if(t==="Z")return 0;const e=t.match(i0e);if(!e)return 0;const r=e[1]==="+"?-1:1,n=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return y0e(n,s)?r*(n*$ne+s*Dne):NaN}function d0e(t,e,r){const n=new Date(0);n.setUTCFullYear(t,0,4);const s=n.getUTCDay()||7,i=(e-1)*7+r+1-s;return n.setUTCDate(n.getUTCDate()+i),n}const h0e=[31,null,31,30,31,30,31,31,30,31,30,31];function Hne(t){return t%400===0||t%4===0&&t%100!==0}function f0e(t,e,r){return e>=0&&e<=11&&r>=1&&r<=(h0e[e]||(Hne(t)?29:28))}function p0e(t,e){return e>=1&&e<=(Hne(t)?366:365)}function m0e(t,e,r){return e>=1&&e<=53&&r>=0&&r<=6}function g0e(t,e,r){return t===24?e===0&&r===0:r>=0&&r<60&&e>=0&&e<60&&t>=0&&t<25}function y0e(t,e){return e>=0&&e<=59}function v0e(t){if(!t||t.length===0)return{todos:[],today:[],yesterday:[],thisWeek:[],older:[]};const e={todos:[],today:[],yesterday:[],thisWeek:[],older:[]};return t.forEach(r=>{if(r.type==="todo"){e.todos.push(r);return}Gp(r.created);let n=r.activity_date||r.created;r.activity_date&&r.activity_time&&(n=`${r.activity_date}T${r.activity_time}`);const s=Gp(n);Wne(s)?e.today.push(r):Une(s)?e.yesterday.push(r):r0e(s)?e.thisWeek.push(r):e.older.push(r)}),e.todos.sort((r,n)=>{if(r.is_completed&&!n.is_completed)return 1;if(!r.is_completed&&n.is_completed)return-1;if(!r.is_completed&&!n.is_completed){if(r.due_date&&n.due_date)return new Date(r.due_date)-new Date(n.due_date);if(r.due_date&&!n.due_date)return-1;if(!r.due_date&&n.due_date)return 1}return new Date(n.created)-new Date(r.created)}),e}function b0e(t){if(!t)return"";try{const e=Gp(t),r=t.includes("T")&&t.length>10,n=r?" at HH:mm":"";return Wne(e)?Zve(e,{addSuffix:!0}):Une(e)?r?Dn(e,"'Yesterday' 'at' HH:mm"):"Yesterday":Dn(e,r?"MMM d, yyyy 'at' HH:mm":"MMM d, yyyy")}catch{return t}}function x0e(t){return{call:"Phone",email:"Mail",chat:"MessageCircle",meeting:"Users",coffee:"Coffee",lunch:"Utensils",note:"FileText"}[t]||"Circle"}function w0e(t){return{call:"Phone call",email:"Email",chat:"Chat",meeting:"Meeting",coffee:"Coffee",lunch:"Lunch",note:"Note"}[t]||t||"Activity"}function Lm(t){if(!t.due_date||t.is_completed)return!1;try{const e=Gp(t.due_date),r=new Date;return r.setHours(0,0,0,0),e.setHours(0,0,0,0),e<r}catch{return!1}}function S0e(t){const e=[];return t.is_completed?e.push("opacity-60","line-through"):Lm(t)&&e.push("text-red-600","font-medium"),e.join(" ")}function _A({isOpen:t,onClose:e,todo:r,onComplete:n,onCompleteAsActivity:s}){return!t||!r?null:c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Complete todo"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:c.jsx(ot,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"p-4",children:[c.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:['"',r.content,'"']}),c.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"How would you like to complete this todo?"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("button",{onClick:n,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-colors text-left",children:[c.jsx(Xs,{className:"w-5 h-5 text-primary-600 flex-shrink-0"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium text-gray-900",children:"Just complete"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Mark the todo as done"})]})]}),c.jsxs("button",{onClick:s,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors text-left",children:[c.jsx(pb,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium text-gray-900",children:"Complete & log activity"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Record this as an activity on the timeline"})]})]})]})]}),c.jsx("div",{className:"flex justify-end p-4 border-t bg-gray-50 rounded-b-lg",children:c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancel"})})]})})}var Kne={exports:{}},Gne={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lh=C;function E0e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _0e=typeof Object.is=="function"?Object.is:E0e,N0e=lh.useState,C0e=lh.useEffect,k0e=lh.useLayoutEffect,j0e=lh.useDebugValue;function T0e(t,e){var r=e(),n=N0e({inst:{value:r,getSnapshot:e}}),s=n[0].inst,i=n[1];return k0e(function(){s.value=r,s.getSnapshot=e,b1(s)&&i({inst:s})},[t,r,e]),C0e(function(){return b1(s)&&i({inst:s}),t(function(){b1(s)&&i({inst:s})})},[t]),j0e(r),r}function b1(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!_0e(t,r)}catch{return!0}}function O0e(t,e){return e()}var P0e=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?O0e:T0e;Gne.useSyncExternalStore=lh.useSyncExternalStore!==void 0?lh.useSyncExternalStore:P0e;Kne.exports=Gne;var NA=Kne.exports;function cn(t){this.content=t}cn.prototype={constructor:cn,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,r){var n=r&&r!=t?this.remove(r):this,s=n.find(t),i=n.content.slice();return s==-1?i.push(r||t,e):(i[s+1]=e,r&&(i[s]=r)),new cn(i)},remove:function(t){var e=this.find(t);if(e==-1)return this;var r=this.content.slice();return r.splice(e,2),new cn(r)},addToStart:function(t,e){return new cn([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var r=this.remove(t).content.slice();return r.push(t,e),new cn(r)},addBefore:function(t,e,r){var n=this.remove(e),s=n.content.slice(),i=n.find(t);return s.splice(i==-1?s.length:i,0,e,r),new cn(s)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=cn.from(t),t.size?new cn(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=cn.from(t),t.size?new cn(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=cn.from(t);for(var r=0;r<t.content.length;r+=2)e=e.remove(t.content[r]);return e},toObject:function(){var t={};return this.forEach(function(e,r){t[e]=r}),t},get size(){return this.content.length>>1}};cn.from=function(t){if(t instanceof cn)return t;var e=[];if(t)for(var r in t)e.push(r,t[r]);return new cn(e)};function Yne(t,e,r){for(let n=0;;n++){if(n==t.childCount||n==e.childCount)return t.childCount==e.childCount?null:r;let s=t.child(n),i=e.child(n);if(s==i){r+=s.nodeSize;continue}if(!s.sameMarkup(i))return r;if(s.isText&&s.text!=i.text){for(let o=0;s.text[o]==i.text[o];o++)r++;return r}if(s.content.size||i.content.size){let o=Yne(s.content,i.content,r+1);if(o!=null)return o}r+=s.nodeSize}}function Qne(t,e,r,n){for(let s=t.childCount,i=e.childCount;;){if(s==0||i==0)return s==i?null:{a:r,b:n};let o=t.child(--s),a=e.child(--i),l=o.nodeSize;if(o==a){r-=l,n-=l;continue}if(!o.sameMarkup(a))return{a:r,b:n};if(o.isText&&o.text!=a.text){let u=0,d=Math.min(o.text.length,a.text.length);for(;u<d&&o.text[o.text.length-u-1]==a.text[a.text.length-u-1];)u++,r--,n--;return{a:r,b:n}}if(o.content.size||a.content.size){let u=Qne(o.content,a.content,r-1,n-1);if(u)return u}r-=l,n-=l}}class J{constructor(e,r){if(this.content=e,this.size=r||0,r==null)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,r,n,s=0,i){for(let o=0,a=0;a<r;o++){let l=this.content[o],u=a+l.nodeSize;if(u>e&&n(l,s+a,i||null,o)!==!1&&l.content.size){let d=a+1;l.nodesBetween(Math.max(0,e-d),Math.min(l.content.size,r-d),n,s+d)}a=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,r,n,s){let i="",o=!0;return this.nodesBetween(e,r,(a,l)=>{let u=a.isText?a.text.slice(Math.max(e,l)-l,r-l):a.isLeaf?s?typeof s=="function"?s(a):s:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&u||a.isTextblock)&&n&&(o?o=!1:i+=n),i+=u},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let r=this.lastChild,n=e.firstChild,s=this.content.slice(),i=0;for(r.isText&&r.sameMarkup(n)&&(s[s.length-1]=r.withText(r.text+n.text),i=1);i<e.content.length;i++)s.push(e.content[i]);return new J(s,this.size+e.size)}cut(e,r=this.size){if(e==0&&r==this.size)return this;let n=[],s=0;if(r>e)for(let i=0,o=0;o<r;i++){let a=this.content[i],l=o+a.nodeSize;l>e&&((o<e||l>r)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,r-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,r-o-1))),n.push(a),s+=a.nodeSize),o=l}return new J(n,s)}cutByIndex(e,r){return e==r?J.empty:e==0&&r==this.content.length?this:new J(this.content.slice(e,r))}replaceChild(e,r){let n=this.content[e];if(n==r)return this;let s=this.content.slice(),i=this.size+r.nodeSize-n.nodeSize;return s[e]=r,new J(s,i)}addToStart(e){return new J([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new J(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let r=0;r<this.content.length;r++)if(!this.content[r].eq(e.content[r]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let r=this.content[e];if(!r)throw new RangeError("Index "+e+" out of range for "+this);return r}maybeChild(e){return this.content[e]||null}forEach(e){for(let r=0,n=0;r<this.content.length;r++){let s=this.content[r];e(s,n,r),n+=s.nodeSize}}findDiffStart(e,r=0){return Yne(this,e,r)}findDiffEnd(e,r=this.size,n=e.size){return Qne(this,e,r,n)}findIndex(e){if(e==0)return ny(0,e);if(e==this.size)return ny(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,n=0;;r++){let s=this.child(r),i=n+s.nodeSize;if(i>=e)return i==e?ny(r+1,i):ny(r,n);n=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,r){if(!r)return J.empty;if(!Array.isArray(r))throw new RangeError("Invalid input for Fragment.fromJSON");return new J(r.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return J.empty;let r,n=0;for(let s=0;s<e.length;s++){let i=e[s];n+=i.nodeSize,s&&i.isText&&e[s-1].sameMarkup(i)?(r||(r=e.slice(0,s)),r[r.length-1]=i.withText(r[r.length-1].text+i.text)):r&&r.push(i)}return new J(r||e,n)}static from(e){if(!e)return J.empty;if(e instanceof J)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new J([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}J.empty=new J([],0);const x1={index:0,offset:0};function ny(t,e){return x1.index=t,x1.offset=e,x1}function Fv(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let r=Array.isArray(t);if(Array.isArray(e)!=r)return!1;if(r){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!Fv(t[n],e[n]))return!1}else{for(let n in t)if(!(n in e)||!Fv(t[n],e[n]))return!1;for(let n in e)if(!(n in t))return!1}return!0}let Rt=class tR{constructor(e,r){this.type=e,this.attrs=r}addToSet(e){let r,n=!1;for(let s=0;s<e.length;s++){let i=e[s];if(this.eq(i))return e;if(this.type.excludes(i.type))r||(r=e.slice(0,s));else{if(i.type.excludes(this.type))return e;!n&&i.type.rank>this.type.rank&&(r||(r=e.slice(0,s)),r.push(this),n=!0),r&&r.push(i)}}return r||(r=e.slice()),n||r.push(this),r}removeFromSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return e.slice(0,r).concat(e.slice(r+1));return e}isInSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Fv(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[r.type];if(!n)throw new RangeError(`There is no mark type ${r.type} in this schema`);let s=n.create(r.attrs);return n.checkAttrs(s.attrs),s}static sameSet(e,r){if(e==r)return!0;if(e.length!=r.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(r[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return tR.none;if(e instanceof tR)return[e];let r=e.slice();return r.sort((n,s)=>n.type.rank-s.type.rank),r}};Rt.none=[];class qv extends Error{}class we{constructor(e,r,n){this.content=e,this.openStart=r,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,r){let n=Jne(this.content,e+this.openStart,r);return n&&new we(n,this.openStart,this.openEnd)}removeBetween(e,r){return new we(Xne(this.content,e+this.openStart,r+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,r){if(!r)return we.empty;let n=r.openStart||0,s=r.openEnd||0;if(typeof n!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new we(J.fromJSON(e,r.content),n,s)}static maxOpen(e,r=!0){let n=0,s=0;for(let i=e.firstChild;i&&!i.isLeaf&&(r||!i.type.spec.isolating);i=i.firstChild)n++;for(let i=e.lastChild;i&&!i.isLeaf&&(r||!i.type.spec.isolating);i=i.lastChild)s++;return new we(e,n,s)}}we.empty=new we(J.empty,0,0);function Xne(t,e,r){let{index:n,offset:s}=t.findIndex(e),i=t.maybeChild(n),{index:o,offset:a}=t.findIndex(r);if(s==e||i.isText){if(a!=r&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(r))}if(n!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(n,i.copy(Xne(i.content,e-s-1,r-s-1)))}function Jne(t,e,r,n){let{index:s,offset:i}=t.findIndex(e),o=t.maybeChild(s);if(i==e||o.isText)return n&&!n.canReplace(s,s,r)?null:t.cut(0,e).append(r).append(t.cut(e));let a=Jne(o.content,e-i-1,r,o);return a&&t.replaceChild(s,o.copy(a))}function I0e(t,e,r){if(r.openStart>t.depth)throw new qv("Inserted content deeper than insertion position");if(t.depth-r.openStart!=e.depth-r.openEnd)throw new qv("Inconsistent open depths");return Zne(t,e,r,0)}function Zne(t,e,r,n){let s=t.index(n),i=t.node(n);if(s==e.index(n)&&n<t.depth-r.openStart){let o=Zne(t,e,r,n+1);return i.copy(i.content.replaceChild(s,o))}else if(r.content.size)if(!r.openStart&&!r.openEnd&&t.depth==n&&e.depth==n){let o=t.parent,a=o.content;return kc(o,a.cut(0,t.parentOffset).append(r.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=R0e(r,t);return kc(i,tse(t,o,a,e,n))}else return kc(i,Lv(t,e,n))}function ese(t,e){if(!e.type.compatibleContent(t.type))throw new qv("Cannot join "+e.type.name+" onto "+t.type.name)}function rR(t,e,r){let n=t.node(r);return ese(n,e.node(r)),n}function Cc(t,e){let r=e.length-1;r>=0&&t.isText&&t.sameMarkup(e[r])?e[r]=t.withText(e[r].text+t.text):e.push(t)}function lp(t,e,r,n){let s=(e||t).node(r),i=0,o=e?e.index(r):s.childCount;t&&(i=t.index(r),t.depth>r?i++:t.textOffset&&(Cc(t.nodeAfter,n),i++));for(let a=i;a<o;a++)Cc(s.child(a),n);e&&e.depth==r&&e.textOffset&&Cc(e.nodeBefore,n)}function kc(t,e){return t.type.checkContent(e),t.copy(e)}function tse(t,e,r,n,s){let i=t.depth>s&&rR(t,e,s+1),o=n.depth>s&&rR(r,n,s+1),a=[];return lp(null,t,s,a),i&&o&&e.index(s)==r.index(s)?(ese(i,o),Cc(kc(i,tse(t,e,r,n,s+1)),a)):(i&&Cc(kc(i,Lv(t,e,s+1)),a),lp(e,r,s,a),o&&Cc(kc(o,Lv(r,n,s+1)),a)),lp(n,null,s,a),new J(a)}function Lv(t,e,r){let n=[];if(lp(null,t,r,n),t.depth>r){let s=rR(t,e,r+1);Cc(kc(s,Lv(t,e,r+1)),n)}return lp(e,null,r,n),new J(n)}function R0e(t,e){let r=e.depth-t.openStart,s=e.node(r).copy(t.content);for(let i=r-1;i>=0;i--)s=e.node(i).copy(J.from(s));return{start:s.resolveNoCache(t.openStart+r),end:s.resolveNoCache(s.content.size-t.openEnd-r)}}class Yp{constructor(e,r,n){this.pos=e,this.path=r,this.parentOffset=n,this.depth=r.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,r=this.index(this.depth);if(r==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],s=e.child(r);return n?e.child(r).cut(n):s}get nodeBefore(){let e=this.index(this.depth),r=this.pos-this.path[this.path.length-1];return r?this.parent.child(e).cut(0,r):e==0?null:this.parent.child(e-1)}posAtIndex(e,r){r=this.resolveDepth(r);let n=this.path[r*3],s=r==0?0:this.path[r*3-1]+1;for(let i=0;i<e;i++)s+=n.child(i).nodeSize;return s}marks(){let e=this.parent,r=this.index();if(e.content.size==0)return Rt.none;if(this.textOffset)return e.child(r).marks;let n=e.maybeChild(r-1),s=e.maybeChild(r);if(!n){let a=n;n=s,s=a}let i=n.marks;for(var o=0;o<i.length;o++)i[o].type.spec.inclusive===!1&&(!s||!i[o].isInSet(s.marks))&&(i=i[o--].removeFromSet(i));return i}marksAcross(e){let r=this.parent.maybeChild(this.index());if(!r||!r.isInline)return null;let n=r.marks,s=e.parent.maybeChild(e.index());for(var i=0;i<n.length;i++)n[i].type.spec.inclusive===!1&&(!s||!n[i].isInSet(s.marks))&&(n=n[i--].removeFromSet(n));return n}sharedDepth(e){for(let r=this.depth;r>0;r--)if(this.start(r)<=e&&this.end(r)>=e)return r;return 0}blockRange(e=this,r){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!r||r(this.node(n))))return new Bv(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let r=1;r<=this.depth;r++)e+=(e?"/":"")+this.node(r).type.name+"_"+this.index(r-1);return e+":"+this.parentOffset}static resolve(e,r){if(!(r>=0&&r<=e.content.size))throw new RangeError("Position "+r+" out of range");let n=[],s=0,i=r;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(i),u=i-l;if(n.push(o,a,s+l),!u||(o=o.child(a),o.isText))break;i=u-1,s+=l+1}return new Yp(r,n,i)}static resolveCached(e,r){let n=h3.get(e);if(n)for(let i=0;i<n.elts.length;i++){let o=n.elts[i];if(o.pos==r)return o}else h3.set(e,n=new M0e);let s=n.elts[n.i]=Yp.resolve(e,r);return n.i=(n.i+1)%A0e,s}}class M0e{constructor(){this.elts=[],this.i=0}}const A0e=12,h3=new WeakMap;class Bv{constructor(e,r,n){this.$from=e,this.$to=r,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const D0e=Object.create(null);let ll=class nR{constructor(e,r,n,s=Rt.none){this.type=e,this.attrs=r,this.marks=s,this.content=n||J.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,r,n,s=0){this.content.nodesBetween(e,r,n,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,r,n,s){return this.content.textBetween(e,r,n,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,r,n){return this.type==e&&Fv(this.attrs,r||e.defaultAttrs||D0e)&&Rt.sameSet(this.marks,n||Rt.none)}copy(e=null){return e==this.content?this:new nR(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new nR(this.type,this.attrs,this.content,e)}cut(e,r=this.content.size){return e==0&&r==this.content.size?this:this.copy(this.content.cut(e,r))}slice(e,r=this.content.size,n=!1){if(e==r)return we.empty;let s=this.resolve(e),i=this.resolve(r),o=n?0:s.sharedDepth(r),a=s.start(o),u=s.node(o).content.cut(s.pos-a,i.pos-a);return new we(u,s.depth-o,i.depth-o)}replace(e,r,n){return I0e(this.resolve(e),this.resolve(r),n)}nodeAt(e){for(let r=this;;){let{index:n,offset:s}=r.content.findIndex(e);if(r=r.maybeChild(n),!r)return null;if(s==e||r.isText)return r;e-=s+1}}childAfter(e){let{index:r,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(r),index:r,offset:n}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:r,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(r),index:r,offset:n};let s=this.content.child(r-1);return{node:s,index:r-1,offset:n-s.nodeSize}}resolve(e){return Yp.resolveCached(this,e)}resolveNoCache(e){return Yp.resolve(this,e)}rangeHasMark(e,r,n){let s=!1;return r>e&&this.nodesBetween(e,r,i=>(n.isInSet(i.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),rse(this.marks,e)}contentMatchAt(e){let r=this.type.contentMatch.matchFragment(this.content,0,e);if(!r)throw new Error("Called contentMatchAt on a node with invalid content");return r}canReplace(e,r,n=J.empty,s=0,i=n.childCount){let o=this.contentMatchAt(e).matchFragment(n,s,i),a=o&&o.matchFragment(this.content,r);if(!a||!a.validEnd)return!1;for(let l=s;l<i;l++)if(!this.type.allowsMarks(n.child(l).marks))return!1;return!0}canReplaceWith(e,r,n,s){if(s&&!this.type.allowsMarks(s))return!1;let i=this.contentMatchAt(e).matchType(n),o=i&&i.matchFragment(this.content,r);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Rt.none;for(let r=0;r<this.marks.length;r++){let n=this.marks[r];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!Rt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(r=>r.type.name)}`);this.content.forEach(r=>r.check())}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(r=>r.toJSON())),e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Node.fromJSON");let n;if(r.marks){if(!Array.isArray(r.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=r.marks.map(e.markFromJSON)}if(r.type=="text"){if(typeof r.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(r.text,n)}let s=J.fromJSON(e,r.content),i=e.nodeType(r.type).create(r.attrs,s,n);return i.type.checkAttrs(i.attrs),i}};ll.prototype.text=void 0;class zv extends ll{constructor(e,r,n,s){if(super(e,r,null,s),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):rse(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,r){return this.text.slice(e,r)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new zv(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new zv(this.type,this.attrs,e,this.marks)}cut(e=0,r=this.text.length){return e==0&&r==this.text.length?this:this.withText(this.text.slice(e,r))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function rse(t,e){for(let r=t.length-1;r>=0;r--)e=t[r].type.name+"("+e+")";return e}class Qc{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,r){let n=new $0e(e,r);if(n.next==null)return Qc.empty;let s=nse(n);n.next&&n.err("Unexpected trailing text");let i=V0e(W0e(s));return U0e(i,n),i}matchType(e){for(let r=0;r<this.next.length;r++)if(this.next[r].type==e)return this.next[r].next;return null}matchFragment(e,r=0,n=e.childCount){let s=this;for(let i=r;s&&i<n;i++)s=s.matchType(e.child(i).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:r}=this.next[e];if(!(r.isText||r.hasRequiredAttrs()))return r}return null}compatible(e){for(let r=0;r<this.next.length;r++)for(let n=0;n<e.next.length;n++)if(this.next[r].type==e.next[n].type)return!0;return!1}fillBefore(e,r=!1,n=0){let s=[this];function i(o,a){let l=o.matchFragment(e,n);if(l&&(!r||l.validEnd))return J.from(a.map(u=>u.createAndFill()));for(let u=0;u<o.next.length;u++){let{type:d,next:h}=o.next[u];if(!(d.isText||d.hasRequiredAttrs())&&s.indexOf(h)==-1){s.push(h);let f=i(h,a.concat(d));if(f)return f}}return null}return i(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let r=this.computeWrapping(e);return this.wrapCache.push(e,r),r}computeWrapping(e){let r=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let s=n.shift(),i=s.match;if(i.matchType(e)){let o=[];for(let a=s;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<i.next.length;o++){let{type:a,next:l}=i.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in r)&&(!s.type||l.validEnd)&&(n.push({match:a.contentMatch,type:a,via:s}),r[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function r(n){e.push(n);for(let s=0;s<n.next.length;s++)e.indexOf(n.next[s].next)==-1&&r(n.next[s].next)}return r(this),e.map((n,s)=>{let i=s+(n.validEnd?"*":" ")+" ";for(let o=0;o<n.next.length;o++)i+=(o?", ":"")+n.next[o].type.name+"->"+e.indexOf(n.next[o].next);return i}).join(`
`)}}Qc.empty=new Qc(!0);class $0e{constructor(e,r){this.string=e,this.nodeTypes=r,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function nse(t){let e=[];do e.push(F0e(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function F0e(t){let e=[];do e.push(q0e(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function q0e(t){let e=z0e(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=L0e(t,e);else break;return e}function f3(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function L0e(t,e){let r=f3(t),n=r;return t.eat(",")&&(t.next!="}"?n=f3(t):n=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:r,max:n,expr:e}}function B0e(t,e){let r=t.nodeTypes,n=r[e];if(n)return[n];let s=[];for(let i in r){let o=r[i];o.isInGroup(e)&&s.push(o)}return s.length==0&&t.err("No node type or group '"+e+"' found"),s}function z0e(t){if(t.eat("(")){let e=nse(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=B0e(t,t.next).map(r=>(t.inline==null?t.inline=r.isInline:t.inline!=r.isInline&&t.err("Mixing inline and block content"),{type:"name",value:r}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function W0e(t){let e=[[]];return s(i(t,0),r()),e;function r(){return e.push([])-1}function n(o,a,l){let u={term:l,to:a};return e[o].push(u),u}function s(o,a){o.forEach(l=>l.to=a)}function i(o,a){if(o.type=="choice")return o.exprs.reduce((l,u)=>l.concat(i(u,a)),[]);if(o.type=="seq")for(let l=0;;l++){let u=i(o.exprs[l],a);if(l==o.exprs.length-1)return u;s(u,a=r())}else if(o.type=="star"){let l=r();return n(a,l),s(i(o.expr,l),l),[n(l)]}else if(o.type=="plus"){let l=r();return s(i(o.expr,a),l),s(i(o.expr,l),l),[n(l)]}else{if(o.type=="opt")return[n(a)].concat(i(o.expr,a));if(o.type=="range"){let l=a;for(let u=0;u<o.min;u++){let d=r();s(i(o.expr,l),d),l=d}if(o.max==-1)s(i(o.expr,l),l);else for(let u=o.min;u<o.max;u++){let d=r();n(l,d),s(i(o.expr,l),d),l=d}return[n(l)]}else{if(o.type=="name")return[n(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function sse(t,e){return e-t}function p3(t,e){let r=[];return n(e),r.sort(sse);function n(s){let i=t[s];if(i.length==1&&!i[0].term)return n(i[0].to);r.push(s);for(let o=0;o<i.length;o++){let{term:a,to:l}=i[o];!a&&r.indexOf(l)==-1&&n(l)}}}function V0e(t){let e=Object.create(null);return r(p3(t,0));function r(n){let s=[];n.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let u;for(let d=0;d<s.length;d++)s[d][0]==a&&(u=s[d][1]);p3(t,l).forEach(d=>{u||s.push([a,u=[]]),u.indexOf(d)==-1&&u.push(d)})})});let i=e[n.join(",")]=new Qc(n.indexOf(t.length-1)>-1);for(let o=0;o<s.length;o++){let a=s[o][1].sort(sse);i.next.push({type:s[o][0],next:e[a.join(",")]||r(a)})}return i}}function U0e(t,e){for(let r=0,n=[t];r<n.length;r++){let s=n[r],i=!s.validEnd,o=[];for(let a=0;a<s.next.length;a++){let{type:l,next:u}=s.next[a];o.push(l.name),i&&!(l.isText||l.hasRequiredAttrs())&&(i=!1),n.indexOf(u)==-1&&n.push(u)}i&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function ise(t){let e=Object.create(null);for(let r in t){let n=t[r];if(!n.hasDefault)return null;e[r]=n.default}return e}function ose(t,e){let r=Object.create(null);for(let n in t){let s=e&&e[n];if(s===void 0){let i=t[n];if(i.hasDefault)s=i.default;else throw new RangeError("No value supplied for attribute "+n)}r[n]=s}return r}function ase(t,e,r,n){for(let s in e)if(!(s in t))throw new RangeError(`Unsupported attribute ${s} for ${r} of type ${s}`);for(let s in t){let i=t[s];i.validate&&i.validate(e[s])}}function lse(t,e){let r=Object.create(null);if(e)for(let n in e)r[n]=new K0e(t,n,e[n]);return r}let m3=class cse{constructor(e,r,n){this.name=e,this.schema=r,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=lse(e,n.attrs),this.defaultAttrs=ise(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Qc.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:ose(this.attrs,e)}create(e=null,r,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ll(this,this.computeAttrs(e),J.from(r),Rt.setFrom(n))}createChecked(e=null,r,n){return r=J.from(r),this.checkContent(r),new ll(this,this.computeAttrs(e),r,Rt.setFrom(n))}createAndFill(e=null,r,n){if(e=this.computeAttrs(e),r=J.from(r),r.size){let o=this.contentMatch.fillBefore(r);if(!o)return null;r=o.append(r)}let s=this.contentMatch.matchFragment(r),i=s&&s.fillBefore(J.empty,!0);return i?new ll(this,e,r.append(i),Rt.setFrom(n)):null}validContent(e){let r=this.contentMatch.matchFragment(e);if(!r||!r.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){ase(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let r=0;r<e.length;r++)if(!this.allowsMarkType(e[r].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let r;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?r&&r.push(e[n]):r||(r=e.slice(0,n));return r?r.length?r:Rt.none:e}static compile(e,r){let n=Object.create(null);e.forEach((i,o)=>n[i]=new cse(i,r,o));let s=r.spec.topNode||"doc";if(!n[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let i in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function H0e(t,e,r){let n=r.split("|");return s=>{let i=s===null?"null":typeof s;if(n.indexOf(i)<0)throw new RangeError(`Expected value of type ${n} for attribute ${e} on type ${t}, got ${i}`)}}class K0e{constructor(e,r,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?H0e(e,r,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class _b{constructor(e,r,n,s){this.name=e,this.rank=r,this.schema=n,this.spec=s,this.attrs=lse(e,s.attrs),this.excluded=null;let i=ise(this.attrs);this.instance=i?new Rt(this,i):null}create(e=null){return!e&&this.instance?this.instance:new Rt(this,ose(this.attrs,e))}static compile(e,r){let n=Object.create(null),s=0;return e.forEach((i,o)=>n[i]=new _b(i,s++,r,o)),n}removeFromSet(e){for(var r=0;r<e.length;r++)e[r].type==this&&(e=e.slice(0,r).concat(e.slice(r+1)),r--);return e}isInSet(e){for(let r=0;r<e.length;r++)if(e[r].type==this)return e[r]}checkAttrs(e){ase(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class use{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let r=this.spec={};for(let s in e)r[s]=e[s];r.nodes=cn.from(e.nodes),r.marks=cn.from(e.marks||{}),this.nodes=m3.compile(this.spec.nodes,this),this.marks=_b.compile(this.spec.marks,this);let n=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let i=this.nodes[s],o=i.spec.content||"",a=i.spec.marks;if(i.contentMatch=n[o]||(n[o]=Qc.parse(o,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=a=="_"?null:a?g3(this,a.split(" ")):a==""||!i.inlineContent?[]:null}for(let s in this.marks){let i=this.marks[s],o=i.spec.excludes;i.excluded=o==null?[i]:o==""?[]:g3(this,o.split(" "))}this.nodeFromJSON=s=>ll.fromJSON(this,s),this.markFromJSON=s=>Rt.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,r=null,n,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof m3){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(r,n,s)}text(e,r){let n=this.nodes.text;return new zv(n,n.defaultAttrs,e,Rt.setFrom(r))}mark(e,r){return typeof e=="string"&&(e=this.marks[e]),e.create(r)}nodeType(e){let r=this.nodes[e];if(!r)throw new RangeError("Unknown node type: "+e);return r}}function g3(t,e){let r=[];for(let n=0;n<e.length;n++){let s=e[n],i=t.marks[s],o=i;if(i)r.push(i);else for(let a in t.marks){let l=t.marks[a];(s=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(s)>-1)&&r.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return r}function G0e(t){return t.tag!=null}function Y0e(t){return t.style!=null}class cl{constructor(e,r){this.schema=e,this.rules=r,this.tags=[],this.styles=[];let n=this.matchedStyles=[];r.forEach(s=>{if(G0e(s))this.tags.push(s);else if(Y0e(s)){let i=/[^=]*/.exec(s.style)[0];n.indexOf(i)<0&&n.push(i),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let i=e.nodes[s.node];return i.contentMatch.matchType(i)})}parse(e,r={}){let n=new v3(this,r,!1);return n.addAll(e,Rt.none,r.from,r.to),n.finish()}parseSlice(e,r={}){let n=new v3(this,r,!0);return n.addAll(e,Rt.none,r.from,r.to),we.maxOpen(n.finish())}matchTag(e,r,n){for(let s=n?this.tags.indexOf(n)+1:0;s<this.tags.length;s++){let i=this.tags[s];if(J0e(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||r.matchesContext(i.context))){if(i.getAttrs){let o=i.getAttrs(e);if(o===!1)continue;i.attrs=o||void 0}return i}}}matchStyle(e,r,n,s){for(let i=s?this.styles.indexOf(s)+1:0;i<this.styles.length;i++){let o=this.styles[i],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!n.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=r))){if(o.getAttrs){let l=o.getAttrs(r);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let r=[];function n(s){let i=s.priority==null?50:s.priority,o=0;for(;o<r.length;o++){let a=r[o];if((a.priority==null?50:a.priority)<i)break}r.splice(o,0,s)}for(let s in e.marks){let i=e.marks[s].spec.parseDOM;i&&i.forEach(o=>{n(o=b3(o)),o.mark||o.ignore||o.clearMark||(o.mark=s)})}for(let s in e.nodes){let i=e.nodes[s].spec.parseDOM;i&&i.forEach(o=>{n(o=b3(o)),o.node||o.ignore||o.mark||(o.node=s)})}return r}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new cl(e,cl.schemaRules(e)))}}const dse={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Q0e={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},hse={ol:!0,ul:!0},Qp=1,sR=2,cp=4;function y3(t,e,r){return e!=null?(e?Qp:0)|(e==="full"?sR:0):t&&t.whitespace=="pre"?Qp|sR:r&~cp}class sy{constructor(e,r,n,s,i,o){this.type=e,this.attrs=r,this.marks=n,this.solid=s,this.options=o,this.content=[],this.activeMarks=Rt.none,this.match=i||(o&cp?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let r=this.type.contentMatch.fillBefore(J.from(e));if(r)this.match=this.type.contentMatch.matchFragment(r);else{let n=this.type.contentMatch,s;return(s=n.findWrapping(e.type))?(this.match=n,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Qp)){let n=this.content[this.content.length-1],s;if(n&&n.isText&&(s=/[ \t\r\n\u000c]+$/.exec(n.text))){let i=n;n.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-s[0].length))}}let r=J.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(J.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!dse.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class v3{constructor(e,r,n){this.parser=e,this.options=r,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let s=r.topNode,i,o=y3(null,r.preserveWhitespace,0)|(n?cp:0);s?i=new sy(s.type,s.attrs,Rt.none,!0,r.topMatch||s.type.contentMatch,o):n?i=new sy(null,null,Rt.none,!0,null,o):i=new sy(e.schema.topNodeType,null,Rt.none,!0,null,o),this.nodes=[i],this.find=r.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,r){e.nodeType==3?this.addTextNode(e,r):e.nodeType==1&&this.addElement(e,r)}addTextNode(e,r){let n=e.nodeValue,s=this.top,i=s.options&sR?"full":this.localPreserveWS||(s.options&Qp)>0,{schema:o}=this.parser;if(i==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(i)if(i==="full")n=n.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(n)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=n.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),r,!0),a[l]&&this.insertNode(o.text(a[l]),r,!/\S/.test(a[l]));n=""}else n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let a=s.content[s.content.length-1],l=e.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(n=n.slice(1))}n&&this.insertNode(o.text(n),r,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,r,n){let s=this.localPreserveWS,i=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;hse.hasOwnProperty(o)&&this.parser.normalizeLists&&X0e(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,n));e:if(l?l.ignore:Q0e.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,r);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let u,d=this.needsBlock;if(dse.hasOwnProperty(o))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),u=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,r);break e}let h=l&&l.skip?r:this.readStyles(e,r);h&&this.addAll(e,h),u&&this.sync(i),this.needsBlock=d}else{let u=this.readStyles(e,r);u&&this.addElementByRule(e,l,u,l.consuming===!1?a:void 0)}this.localPreserveWS=s}leafFallback(e,r){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),r)}ignoreFallback(e,r){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),r,!0)}readStyles(e,r){let n=e.style;if(n&&n.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let i=this.parser.matchedStyles[s],o=n.getPropertyValue(i);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(i,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?r=r.filter(u=>!l.clearMark(u)):r=r.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return r}addElementByRule(e,r,n,s){let i,o;if(r.node)if(o=this.parser.schema.nodes[r.node],o.isLeaf)this.insertNode(o.create(r.attrs),n,e.nodeName=="BR")||this.leafFallback(e,n);else{let l=this.enter(o,r.attrs||null,n,r.preserveWhitespace);l&&(i=!0,n=l)}else{let l=this.parser.schema.marks[r.mark];n=n.concat(l.create(r.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(s)this.addElement(e,n,s);else if(r.getContent)this.findInside(e),r.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,n,!1));else{let l=e;typeof r.contentElement=="string"?l=e.querySelector(r.contentElement):typeof r.contentElement=="function"?l=r.contentElement(e):r.contentElement&&(l=r.contentElement),this.findAround(e,l,!0),this.addAll(l,n),this.findAround(e,l,!1)}i&&this.sync(a)&&this.open--}addAll(e,r,n,s){let i=n||0;for(let o=n?e.childNodes[n]:e.firstChild,a=s==null?null:e.childNodes[s];o!=a;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o,r);this.findAtPoint(e,i)}findPlace(e,r,n){let s,i;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],u=l.findWrapping(e);if(u&&(!s||s.length>u.length+a)&&(s=u,i=l,!u.length))break;if(l.solid){if(n)break;a+=2}}if(!s)return null;this.sync(i);for(let o=0;o<s.length;o++)r=this.enterInner(s[o],null,r,!1);return r}insertNode(e,r,n){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(r=this.enterInner(i,null,r))}let s=this.findPlace(e,r,n);if(s){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let o=Rt.none;for(let a of s.concat(e.marks))(i.type?i.type.allowsMarkType(a.type):x3(a.type,e.type))&&(o=a.addToSet(o));return i.content.push(e.mark(o)),!0}return!1}enter(e,r,n,s){let i=this.findPlace(e.create(r),n,!1);return i&&(i=this.enterInner(e,r,n,!0,s)),i}enterInner(e,r,n,s=!1,i){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=y3(e,i,o.options);o.options&cp&&o.content.length==0&&(a|=cp);let l=Rt.none;return n=n.filter(u=>(o.type?o.type.allowsMarkType(u.type):x3(u.type,e))?(l=u.addToSet(l),!1):!0),this.nodes.push(new sy(e,r,l,s,null,a)),this.open++,n}closeExtra(e=!1){let r=this.nodes.length-1;if(r>this.open){for(;r>this.open;r--)this.nodes[r-1].content.push(this.nodes[r].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let r=this.open;r>=0;r--){if(this.nodes[r]==e)return this.open=r,!0;this.localPreserveWS&&(this.nodes[r].options|=Qp)}return!1}get currentPos(){this.closeExtra();let e=0;for(let r=this.open;r>=0;r--){let n=this.nodes[r].content;for(let s=n.length-1;s>=0;s--)e+=n[s].nodeSize;r&&e++}return e}findAtPoint(e,r){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==r&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)&&(this.find[r].pos=this.currentPos)}findAround(e,r,n){if(e!=r&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&r.compareDocumentPosition(this.find[s].node)&(n?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&(this.find[r].pos=this.currentPos-(e.nodeValue.length-this.find[r].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let r=e.split("/"),n=this.options.context,s=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),i=-(n?n.depth+1:0)+(s?0:1),o=(a,l)=>{for(;a>=0;a--){let u=r[a];if(u==""){if(a==r.length-1||a==0)continue;for(;l>=i;l--)if(o(a-1,l))return!0;return!1}else{let d=l>0||l==0&&s?this.nodes[l].type:n&&l>=i?n.node(l-i).type:null;if(!d||d.name!=u&&!d.isInGroup(u))return!1;l--}}return!0};return o(r.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let r=e.depth;r>=0;r--){let n=e.node(r).contentMatchAt(e.indexAfter(r)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let r in this.parser.schema.nodes){let n=this.parser.schema.nodes[r];if(n.isTextblock&&n.defaultAttrs)return n}}}function X0e(t){for(let e=t.firstChild,r=null;e;e=e.nextSibling){let n=e.nodeType==1?e.nodeName.toLowerCase():null;n&&hse.hasOwnProperty(n)&&r?(r.appendChild(e),e=r):n=="li"?r=e:n&&(r=null)}}function J0e(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function b3(t){let e={};for(let r in t)e[r]=t[r];return e}function x3(t,e){let r=e.schema.nodes;for(let n in r){let s=r[n];if(!s.allowsMarkType(t))continue;let i=[],o=a=>{i.push(a);for(let l=0;l<a.edgeCount;l++){let{type:u,next:d}=a.edge(l);if(u==e||i.indexOf(d)<0&&o(d))return!0}};if(o(s.contentMatch))return!0}}class fu{constructor(e,r){this.nodes=e,this.marks=r}serializeFragment(e,r={},n){n||(n=w1(r).createDocumentFragment());let s=n,i=[];return e.forEach(o=>{if(i.length||o.marks.length){let a=0,l=0;for(;a<i.length&&l<o.marks.length;){let u=o.marks[l];if(!this.marks[u.type.name]){l++;continue}if(!u.eq(i[a][0])||u.type.spec.spanning===!1)break;a++,l++}for(;a<i.length;)s=i.pop()[1];for(;l<o.marks.length;){let u=o.marks[l++],d=this.serializeMark(u,o.isInline,r);d&&(i.push([u,s]),s.appendChild(d.dom),s=d.contentDOM||d.dom)}}s.appendChild(this.serializeNodeInner(o,r))}),n}serializeNodeInner(e,r){let{dom:n,contentDOM:s}=Wy(w1(r),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,r,s)}return n}serializeNode(e,r={}){let n=this.serializeNodeInner(e,r);for(let s=e.marks.length-1;s>=0;s--){let i=this.serializeMark(e.marks[s],e.isInline,r);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}serializeMark(e,r,n={}){let s=this.marks[e.type.name];return s&&Wy(w1(n),s(e,r),null,e.attrs)}static renderSpec(e,r,n=null,s){return Wy(e,r,n,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new fu(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let r=w3(e.nodes);return r.text||(r.text=n=>n.text),r}static marksFromSchema(e){return w3(e.marks)}}function w3(t){let e={};for(let r in t){let n=t[r].spec.toDOM;n&&(e[r]=n)}return e}function w1(t){return t.document||window.document}const S3=new WeakMap;function Z0e(t){let e=S3.get(t);return e===void 0&&S3.set(t,e=ebe(t)),e}function ebe(t){let e=null;function r(n){if(n&&typeof n=="object")if(Array.isArray(n))if(typeof n[0]=="string")e||(e=[]),e.push(n);else for(let s=0;s<n.length;s++)r(n[s]);else for(let s in n)r(n[s])}return r(t),e}function Wy(t,e,r,n){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],i;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(n&&(i=Z0e(n))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=s.indexOf(" ");o>0&&(r=s.slice(0,o),s=s.slice(o+1));let a,l=r?t.createElementNS(r,s):t.createElement(s),u=e[1],d=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){d=2;for(let h in u)if(u[h]!=null){let f=h.indexOf(" ");f>0?l.setAttributeNS(h.slice(0,f),h.slice(f+1),u[h]):h=="style"&&l.style?l.style.cssText=u[h]:l.setAttribute(h,u[h])}}for(let h=d;h<e.length;h++){let f=e[h];if(f===0){if(h<e.length-1||h>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:p,contentDOM:m}=Wy(t,f,r,n);if(l.appendChild(p),m){if(a)throw new RangeError("Multiple content holes");a=m}}}return{dom:l,contentDOM:a}}const fse=65535,pse=Math.pow(2,16);function tbe(t,e){return t+e*pse}function E3(t){return t&fse}function rbe(t){return(t-(t&fse))/pse}const mse=1,gse=2,Vy=4,yse=8;class iR{constructor(e,r,n){this.pos=e,this.delInfo=r,this.recover=n}get deleted(){return(this.delInfo&yse)>0}get deletedBefore(){return(this.delInfo&(mse|Vy))>0}get deletedAfter(){return(this.delInfo&(gse|Vy))>0}get deletedAcross(){return(this.delInfo&Vy)>0}}class _s{constructor(e,r=!1){if(this.ranges=e,this.inverted=r,!e.length&&_s.empty)return _s.empty}recover(e){let r=0,n=E3(e);if(!this.inverted)for(let s=0;s<n;s++)r+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[n*3]+r+rbe(e)}mapResult(e,r=1){return this._map(e,r,!1)}map(e,r=1){return this._map(e,r,!0)}_map(e,r,n){let s=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?s:0);if(l>e)break;let u=this.ranges[a+i],d=this.ranges[a+o],h=l+u;if(e<=h){let f=u?e==l?-1:e==h?1:r:r,p=l+s+(f<0?0:d);if(n)return p;let m=e==(r<0?l:h)?null:tbe(a/3,e-l),g=e==l?gse:e==h?mse:Vy;return(r<0?e!=l:e!=h)&&(g|=yse),new iR(p,g,m)}s+=d-u}return n?e+s:new iR(e+s,0,null)}touches(e,r){let n=0,s=E3(r),i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?n:0);if(l>e)break;let u=this.ranges[a+i],d=l+u;if(e<=d&&a==s*3)return!0;n+=this.ranges[a+o]-u}return!1}forEach(e){let r=this.inverted?2:1,n=this.inverted?1:2;for(let s=0,i=0;s<this.ranges.length;s+=3){let o=this.ranges[s],a=o-(this.inverted?i:0),l=o+(this.inverted?0:i),u=this.ranges[s+r],d=this.ranges[s+n];e(a,a+u,l,l+d),i+=d-u}}invert(){return new _s(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?_s.empty:new _s(e<0?[0,-e,0]:[0,0,e])}}_s.empty=new _s([]);class Xp{constructor(e,r,n=0,s=e?e.length:0){this.mirror=r,this.from=n,this.to=s,this._maps=e||[],this.ownData=!(e||r)}get maps(){return this._maps}slice(e=0,r=this.maps.length){return new Xp(this._maps,this.mirror,e,r)}appendMap(e,r){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),r!=null&&this.setMirror(this._maps.length-1,r)}appendMapping(e){for(let r=0,n=this._maps.length;r<e._maps.length;r++){let s=e.getMirror(r);this.appendMap(e._maps[r],s!=null&&s<r?n+s:void 0)}}getMirror(e){if(this.mirror){for(let r=0;r<this.mirror.length;r++)if(this.mirror[r]==e)return this.mirror[r+(r%2?-1:1)]}}setMirror(e,r){this.mirror||(this.mirror=[]),this.mirror.push(e,r)}appendMappingInverted(e){for(let r=e.maps.length-1,n=this._maps.length+e._maps.length;r>=0;r--){let s=e.getMirror(r);this.appendMap(e._maps[r].invert(),s!=null&&s>r?n-s-1:void 0)}}invert(){let e=new Xp;return e.appendMappingInverted(this),e}map(e,r=1){if(this.mirror)return this._map(e,r,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,r);return e}mapResult(e,r=1){return this._map(e,r,!1)}_map(e,r,n){let s=0;for(let i=this.from;i<this.to;i++){let o=this._maps[i],a=o.mapResult(e,r);if(a.recover!=null){let l=this.getMirror(i);if(l!=null&&l>i&&l<this.to){i=l,e=this._maps[l].recover(a.recover);continue}}s|=a.delInfo,e=a.pos}return n?e:new iR(e,s,null)}}const S1=Object.create(null);class Tn{getMap(){return _s.empty}merge(e){return null}static fromJSON(e,r){if(!r||!r.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=S1[r.stepType];if(!n)throw new RangeError(`No step type ${r.stepType} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in S1)throw new RangeError("Duplicate use of step JSON ID "+e);return S1[e]=r,r.prototype.jsonID=e,r}}class Nr{constructor(e,r){this.doc=e,this.failed=r}static ok(e){return new Nr(e,null)}static fail(e){return new Nr(null,e)}static fromReplace(e,r,n,s){try{return Nr.ok(e.replace(r,n,s))}catch(i){if(i instanceof qv)return Nr.fail(i.message);throw i}}}function CA(t,e,r){let n=[];for(let s=0;s<t.childCount;s++){let i=t.child(s);i.content.size&&(i=i.copy(CA(i.content,e,i))),i.isInline&&(i=e(i,r,s)),n.push(i)}return J.fromArray(n)}class Ga extends Tn{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=e.resolve(this.from),s=n.node(n.sharedDepth(this.to)),i=new we(CA(r.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),s),r.openStart,r.openEnd);return Nr.fromReplace(e,this.from,this.to,i)}invert(){return new Si(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new Ga(r.pos,n.pos,this.mark)}merge(e){return e instanceof Ga&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ga(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ga(r.from,r.to,e.markFromJSON(r.mark))}}Tn.jsonID("addMark",Ga);class Si extends Tn{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=new we(CA(r.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),r.openStart,r.openEnd);return Nr.fromReplace(e,this.from,this.to,n)}invert(){return new Ga(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new Si(r.pos,n.pos,this.mark)}merge(e){return e instanceof Si&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Si(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Si(r.from,r.to,e.markFromJSON(r.mark))}}Tn.jsonID("removeMark",Si);class Ya extends Tn{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return Nr.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.addToSet(r.marks));return Nr.fromReplace(e,this.pos,this.pos+1,new we(J.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);if(r){let n=this.mark.addToSet(r.marks);if(n.length==r.marks.length){for(let s=0;s<r.marks.length;s++)if(!r.marks[s].isInSet(n))return new Ya(this.pos,r.marks[s]);return new Ya(this.pos,this.mark)}}return new Xc(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Ya(r.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ya(r.pos,e.markFromJSON(r.mark))}}Tn.jsonID("addNodeMark",Ya);class Xc extends Tn{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return Nr.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.removeFromSet(r.marks));return Nr.fromReplace(e,this.pos,this.pos+1,new we(J.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);return!r||!this.mark.isInSet(r.marks)?this:new Ya(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Xc(r.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Xc(r.pos,e.markFromJSON(r.mark))}}Tn.jsonID("removeNodeMark",Xc);class Hr extends Tn{constructor(e,r,n,s=!1){super(),this.from=e,this.to=r,this.slice=n,this.structure=s}apply(e){return this.structure&&oR(e,this.from,this.to)?Nr.fail("Structure replace would overwrite content"):Nr.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new _s([this.from,this.to-this.from,this.slice.size])}invert(e){return new Hr(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deletedAcross&&n.deletedAcross?null:new Hr(r.pos,Math.max(r.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Hr)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let r=this.slice.size+e.slice.size==0?we.empty:new we(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Hr(this.from,this.to+(e.to-e.from),r,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let r=this.slice.size+e.slice.size==0?we.empty:new we(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Hr(e.from,this.to,r,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Hr(r.from,r.to,we.fromJSON(e,r.slice),!!r.structure)}}Tn.jsonID("replace",Hr);class Yr extends Tn{constructor(e,r,n,s,i,o,a=!1){super(),this.from=e,this.to=r,this.gapFrom=n,this.gapTo=s,this.slice=i,this.insert=o,this.structure=a}apply(e){if(this.structure&&(oR(e,this.from,this.gapFrom)||oR(e,this.gapTo,this.to)))return Nr.fail("Structure gap-replace would overwrite content");let r=e.slice(this.gapFrom,this.gapTo);if(r.openStart||r.openEnd)return Nr.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,r.content);return n?Nr.fromReplace(e,this.from,this.to,n):Nr.fail("Content does not fit in gap")}getMap(){return new _s([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let r=this.gapTo-this.gapFrom;return new Yr(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),s=this.from==this.gapFrom?r.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return r.deletedAcross&&n.deletedAcross||s<r.pos||i>n.pos?null:new Yr(r.pos,n.pos,s,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number"||typeof r.gapFrom!="number"||typeof r.gapTo!="number"||typeof r.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Yr(r.from,r.to,r.gapFrom,r.gapTo,we.fromJSON(e,r.slice),r.insert,!!r.structure)}}Tn.jsonID("replaceAround",Yr);function oR(t,e,r){let n=t.resolve(e),s=r-e,i=n.depth;for(;s>0&&i>0&&n.indexAfter(i)==n.node(i).childCount;)i--,s--;if(s>0){let o=n.node(i).maybeChild(n.indexAfter(i));for(;s>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,s--}}return!1}function nbe(t,e,r,n){let s=[],i=[],o,a;t.doc.nodesBetween(e,r,(l,u,d)=>{if(!l.isInline)return;let h=l.marks;if(!n.isInSet(h)&&d.type.allowsMarkType(n.type)){let f=Math.max(u,e),p=Math.min(u+l.nodeSize,r),m=n.addToSet(h);for(let g=0;g<h.length;g++)h[g].isInSet(m)||(o&&o.to==f&&o.mark.eq(h[g])?o.to=p:s.push(o=new Si(f,p,h[g])));a&&a.to==f?a.to=p:i.push(a=new Ga(f,p,n))}}),s.forEach(l=>t.step(l)),i.forEach(l=>t.step(l))}function sbe(t,e,r,n){let s=[],i=0;t.doc.nodesBetween(e,r,(o,a)=>{if(!o.isInline)return;i++;let l=null;if(n instanceof _b){let u=o.marks,d;for(;d=n.isInSet(u);)(l||(l=[])).push(d),u=d.removeFromSet(u)}else n?n.isInSet(o.marks)&&(l=[n]):l=o.marks;if(l&&l.length){let u=Math.min(a+o.nodeSize,r);for(let d=0;d<l.length;d++){let h=l[d],f;for(let p=0;p<s.length;p++){let m=s[p];m.step==i-1&&h.eq(s[p].style)&&(f=m)}f?(f.to=u,f.step=i):s.push({style:h,from:Math.max(a,e),to:u,step:i})}}}),s.forEach(o=>t.step(new Si(o.from,o.to,o.style)))}function kA(t,e,r,n=r.contentMatch,s=!0){let i=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<i.childCount;l++){let u=i.child(l),d=a+u.nodeSize,h=n.matchType(u.type);if(!h)o.push(new Hr(a,d,we.empty));else{n=h;for(let f=0;f<u.marks.length;f++)r.allowsMarkType(u.marks[f].type)||t.step(new Si(a,d,u.marks[f]));if(s&&u.isText&&r.whitespace!="pre"){let f,p=/\r?\n|\r/g,m;for(;f=p.exec(u.text);)m||(m=new we(J.from(r.schema.text(" ",r.allowedMarks(u.marks))),0,0)),o.push(new Hr(a+f.index,a+f.index+f[0].length,m))}}a=d}if(!n.validEnd){let l=n.fillBefore(J.empty,!0);t.replace(a,a,new we(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function ibe(t,e,r){return(e==0||t.canReplace(e,t.childCount))&&(r==t.childCount||t.canReplace(0,r))}function $h(t){let r=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let n=t.depth,s=0,i=0;;--n){let o=t.$from.node(n),a=t.$from.index(n)+s,l=t.$to.indexAfter(n)-i;if(n<t.depth&&o.canReplace(a,l,r))return n;if(n==0||o.type.spec.isolating||!ibe(o,a,l))break;a&&(s=1),l<o.childCount&&(i=1)}return null}function obe(t,e,r){let{$from:n,$to:s,depth:i}=e,o=n.before(i+1),a=s.after(i+1),l=o,u=a,d=J.empty,h=0;for(let m=i,g=!1;m>r;m--)g||n.index(m)>0?(g=!0,d=J.from(n.node(m).copy(d)),h++):l--;let f=J.empty,p=0;for(let m=i,g=!1;m>r;m--)g||s.after(m+1)<s.end(m)?(g=!0,f=J.from(s.node(m).copy(f)),p++):u++;t.step(new Yr(l,u,o,a,new we(d.append(f),h,p),d.size-h,!0))}function jA(t,e,r=null,n=t){let s=abe(t,e),i=s&&lbe(n,e);return i?s.map(_3).concat({type:e,attrs:r}).concat(i.map(_3)):null}function _3(t){return{type:t,attrs:null}}function abe(t,e){let{parent:r,startIndex:n,endIndex:s}=t,i=r.contentMatchAt(n).findWrapping(e);if(!i)return null;let o=i.length?i[0]:e;return r.canReplaceWith(n,s,o)?i:null}function lbe(t,e){let{parent:r,startIndex:n,endIndex:s}=t,i=r.child(n),o=e.contentMatch.findWrapping(i.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let u=n;l&&u<s;u++)l=l.matchType(r.child(u).type);return!l||!l.validEnd?null:o}function cbe(t,e,r){let n=J.empty;for(let o=r.length-1;o>=0;o--){if(n.size){let a=r[o].type.contentMatch.matchFragment(n);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=J.from(r[o].type.create(r[o].attrs,n))}let s=e.start,i=e.end;t.step(new Yr(s,i,s,i,new we(n,0,0),r.length,!0))}function ube(t,e,r,n,s){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=t.steps.length;t.doc.nodesBetween(e,r,(o,a)=>{let l=typeof s=="function"?s(o):s;if(o.isTextblock&&!o.hasMarkup(n,l)&&dbe(t.doc,t.mapping.slice(i).map(a),n)){let u=null;if(n.schema.linebreakReplacement){let p=n.whitespace=="pre",m=!!n.contentMatch.matchType(n.schema.linebreakReplacement);p&&!m?u=!1:!p&&m&&(u=!0)}u===!1&&bse(t,o,a,i),kA(t,t.mapping.slice(i).map(a,1),n,void 0,u===null);let d=t.mapping.slice(i),h=d.map(a,1),f=d.map(a+o.nodeSize,1);return t.step(new Yr(h,f,h+1,f-1,new we(J.from(n.create(l,null,o.marks)),0,0),1,!0)),u===!0&&vse(t,o,a,i),!1}})}function vse(t,e,r,n){e.forEach((s,i)=>{if(s.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(s.text);){let l=t.mapping.slice(n).map(r+1+i+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function bse(t,e,r,n){e.forEach((s,i)=>{if(s.type==s.type.schema.linebreakReplacement){let o=t.mapping.slice(n).map(r+1+i);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function dbe(t,e,r){let n=t.resolve(e),s=n.index();return n.parent.canReplaceWith(s,s+1,r)}function hbe(t,e,r,n,s){let i=t.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");r||(r=i.type);let o=r.create(n,null,s||i.marks);if(i.isLeaf)return t.replaceWith(e,e+i.nodeSize,o);if(!r.validContent(i.content))throw new RangeError("Invalid content for node type "+r.name);t.step(new Yr(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new we(J.from(o),0,0),1,!0))}function Fo(t,e,r=1,n){let s=t.resolve(e),i=s.depth-r,o=n&&n[n.length-1]||s.parent;if(i<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!o.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let u=s.depth-1,d=r-2;u>i;u--,d--){let h=s.node(u),f=s.index(u);if(h.type.spec.isolating)return!1;let p=h.content.cutByIndex(f,h.childCount),m=n&&n[d+1];m&&(p=p.replaceChild(0,m.type.create(m.attrs)));let g=n&&n[d]||h;if(!h.canReplace(f+1,h.childCount)||!g.type.validContent(p))return!1}let a=s.indexAfter(i),l=n&&n[0];return s.node(i).canReplaceWith(a,a,l?l.type:s.node(i+1).type)}function fbe(t,e,r=1,n){let s=t.doc.resolve(e),i=J.empty,o=J.empty;for(let a=s.depth,l=s.depth-r,u=r-1;a>l;a--,u--){i=J.from(s.node(a).copy(i));let d=n&&n[u];o=J.from(d?d.type.create(d.attrs,o):s.node(a).copy(o))}t.step(new Hr(e,e,new we(i.append(o),r,r),!0))}function Il(t,e){let r=t.resolve(e),n=r.index();return xse(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function pbe(t,e){e.content.size||t.type.compatibleContent(e.type);let r=t.contentMatchAt(t.childCount),{linebreakReplacement:n}=t.type.schema;for(let s=0;s<e.childCount;s++){let i=e.child(s),o=i.type==n?t.type.schema.nodes.text:i.type;if(r=r.matchType(o),!r||!t.type.allowsMarks(i.marks))return!1}return r.validEnd}function xse(t,e){return!!(t&&e&&!t.isLeaf&&pbe(t,e))}function Nb(t,e,r=-1){let n=t.resolve(e);for(let s=n.depth;;s--){let i,o,a=n.index(s);if(s==n.depth?(i=n.nodeBefore,o=n.nodeAfter):r>0?(i=n.node(s+1),a++,o=n.node(s).maybeChild(a)):(i=n.node(s).maybeChild(a-1),o=n.node(s+1)),i&&!i.isTextblock&&xse(i,o)&&n.node(s).canReplace(a,a+1))return e;if(s==0)break;e=r<0?n.before(s):n.after(s)}}function mbe(t,e,r){let n=null,{linebreakReplacement:s}=t.doc.type.schema,i=t.doc.resolve(e-r),o=i.node().type;if(s&&o.inlineContent){let d=o.whitespace=="pre",h=!!o.contentMatch.matchType(s);d&&!h?n=!1:!d&&h&&(n=!0)}let a=t.steps.length;if(n===!1){let d=t.doc.resolve(e+r);bse(t,d.node(),d.before(),a)}o.inlineContent&&kA(t,e+r-1,o,i.node().contentMatchAt(i.index()),n==null);let l=t.mapping.slice(a),u=l.map(e-r);if(t.step(new Hr(u,l.map(e+r,-1),we.empty,!0)),n===!0){let d=t.doc.resolve(u);vse(t,d.node(),d.before(),t.steps.length)}return t}function gbe(t,e,r){let n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),r))return e;if(n.parentOffset==0)for(let s=n.depth-1;s>=0;s--){let i=n.index(s);if(n.node(s).canReplaceWith(i,i,r))return n.before(s+1);if(i>0)return null}if(n.parentOffset==n.parent.content.size)for(let s=n.depth-1;s>=0;s--){let i=n.indexAfter(s);if(n.node(s).canReplaceWith(i,i,r))return n.after(s+1);if(i<n.node(s).childCount)return null}return null}function wse(t,e,r){let n=t.resolve(e);if(!r.content.size)return e;let s=r.content;for(let i=0;i<r.openStart;i++)s=s.firstChild.content;for(let i=1;i<=(r.openStart==0&&r.size?2:1);i++)for(let o=n.depth;o>=0;o--){let a=o==n.depth?0:n.pos<=(n.start(o+1)+n.end(o+1))/2?-1:1,l=n.index(o)+(a>0?1:0),u=n.node(o),d=!1;if(i==1)d=u.canReplace(l,l,s);else{let h=u.contentMatchAt(l).findWrapping(s.firstChild.type);d=h&&u.canReplaceWith(l,l,h[0])}if(d)return a==0?n.pos:a<0?n.before(o+1):n.after(o+1)}return null}function Cb(t,e,r=e,n=we.empty){if(e==r&&!n.size)return null;let s=t.resolve(e),i=t.resolve(r);return Sse(s,i,n)?new Hr(e,r,n):new ybe(s,i,n).fit()}function Sse(t,e,r){return!r.openStart&&!r.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),r.content)}class ybe{constructor(e,r,n){this.$from=e,this.$to=r,this.unplaced=n,this.frontier=[],this.placed=J.empty;for(let s=0;s<=e.depth;s++){let i=e.node(s);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=J.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,n=this.$from,s=this.close(e<0?this.$to:n.doc.resolve(e));if(!s)return null;let i=this.placed,o=n.depth,a=s.depth;for(;o&&a&&i.childCount==1;)i=i.firstChild.content,o--,a--;let l=new we(i,o,a);return e>-1?new Yr(n.pos,e,this.$to.pos,this.$to.end(),l,r):l.size||n.pos!=this.$to.pos?new Hr(n.pos,s.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let r=this.unplaced.content,n=0,s=this.unplaced.openEnd;n<e;n++){let i=r.firstChild;if(r.childCount>1&&(s=0),i.type.spec.isolating&&s<=n){e=n;break}r=i.content}for(let r=1;r<=2;r++)for(let n=r==1?e:this.unplaced.openStart;n>=0;n--){let s,i=null;n?(i=E1(this.unplaced.content,n-1).firstChild,s=i.content):s=this.unplaced.content;let o=s.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:u}=this.frontier[a],d,h=null;if(r==1&&(o?u.matchType(o.type)||(h=u.fillBefore(J.from(o),!1)):i&&l.compatibleContent(i.type)))return{sliceDepth:n,frontierDepth:a,parent:i,inject:h};if(r==2&&o&&(d=u.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:a,parent:i,wrap:d};if(i&&u.matchType(i.type))break}}}openMore(){let{content:e,openStart:r,openEnd:n}=this.unplaced,s=E1(e,r);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new we(e,r+1,Math.max(n,s.size+r>=e.size-n?r+1:0)),!0)}dropNode(){let{content:e,openStart:r,openEnd:n}=this.unplaced,s=E1(e,r);if(s.childCount<=1&&r>0){let i=e.size-r<=r+s.size;this.unplaced=new we(Uf(e,r-1,1),r-1,i?r-1:n)}else this.unplaced=new we(Uf(e,r,1),r,n)}placeNodes({sliceDepth:e,frontierDepth:r,parent:n,inject:s,wrap:i}){for(;this.depth>r;)this.closeFrontierNode();if(i)for(let g=0;g<i.length;g++)this.openFrontierNode(i[g]);let o=this.unplaced,a=n?n.content:o.content,l=o.openStart-e,u=0,d=[],{match:h,type:f}=this.frontier[r];if(s){for(let g=0;g<s.childCount;g++)d.push(s.child(g));h=h.matchFragment(s)}let p=a.size+e-(o.content.size-o.openEnd);for(;u<a.childCount;){let g=a.child(u),y=h.matchType(g.type);if(!y)break;u++,(u>1||l==0||g.content.size)&&(h=y,d.push(Ese(g.mark(f.allowedMarks(g.marks)),u==1?l:0,u==a.childCount?p:-1)))}let m=u==a.childCount;m||(p=-1),this.placed=Hf(this.placed,r,J.from(d)),this.frontier[r].match=h,m&&p<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,y=a;g<p;g++){let v=y.lastChild;this.frontier.push({type:v.type,match:v.contentMatchAt(v.childCount)}),y=v.content}this.unplaced=m?e==0?we.empty:new we(Uf(o.content,e-1,1),e-1,p<0?o.openEnd:e-1):new we(Uf(o.content,e,u),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],r;if(!e.type.isTextblock||!_1(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(r=this.findCloseLevel(this.$to))&&r.depth==this.depth)return-1;let{depth:n}=this.$to,s=this.$to.after(n);for(;n>1&&s==this.$to.end(--n);)++s;return s}findCloseLevel(e){e:for(let r=Math.min(this.depth,e.depth);r>=0;r--){let{match:n,type:s}=this.frontier[r],i=r<e.depth&&e.end(r+1)==e.pos+(e.depth-(r+1)),o=_1(e,r,s,n,i);if(o){for(let a=r-1;a>=0;a--){let{match:l,type:u}=this.frontier[a],d=_1(e,a,u,l,!0);if(!d||d.childCount)continue e}return{depth:r,fit:o,move:i?e.doc.resolve(e.after(r+1)):e}}}}close(e){let r=this.findCloseLevel(e);if(!r)return null;for(;this.depth>r.depth;)this.closeFrontierNode();r.fit.childCount&&(this.placed=Hf(this.placed,r.depth,r.fit)),e=r.move;for(let n=r.depth+1;n<=e.depth;n++){let s=e.node(n),i=s.type.contentMatch.fillBefore(s.content,!0,e.index(n));this.openFrontierNode(s.type,s.attrs,i)}return e}openFrontierNode(e,r=null,n){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=Hf(this.placed,this.depth,J.from(e.create(r,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let r=this.frontier.pop().match.fillBefore(J.empty,!0);r.childCount&&(this.placed=Hf(this.placed,this.frontier.length,r))}}function Uf(t,e,r){return e==0?t.cutByIndex(r,t.childCount):t.replaceChild(0,t.firstChild.copy(Uf(t.firstChild.content,e-1,r)))}function Hf(t,e,r){return e==0?t.append(r):t.replaceChild(t.childCount-1,t.lastChild.copy(Hf(t.lastChild.content,e-1,r)))}function E1(t,e){for(let r=0;r<e;r++)t=t.firstChild.content;return t}function Ese(t,e,r){if(e<=0)return t;let n=t.content;return e>1&&(n=n.replaceChild(0,Ese(n.firstChild,e-1,n.childCount==1?r-1:0))),e>0&&(n=t.type.contentMatch.fillBefore(n).append(n),r<=0&&(n=n.append(t.type.contentMatch.matchFragment(n).fillBefore(J.empty,!0)))),t.copy(n)}function _1(t,e,r,n,s){let i=t.node(e),o=s?t.indexAfter(e):t.index(e);if(o==i.childCount&&!r.compatibleContent(i.type))return null;let a=n.fillBefore(i.content,!0,o);return a&&!vbe(r,i.content,o)?a:null}function vbe(t,e,r){for(let n=r;n<e.childCount;n++)if(!t.allowsMarks(e.child(n).marks))return!0;return!1}function bbe(t){return t.spec.defining||t.spec.definingForContent}function xbe(t,e,r,n){if(!n.size)return t.deleteRange(e,r);let s=t.doc.resolve(e),i=t.doc.resolve(r);if(Sse(s,i,n))return t.step(new Hr(e,r,n));let o=Nse(s,i);o[o.length-1]==0&&o.pop();let a=-(s.depth+1);o.unshift(a);for(let f=s.depth,p=s.pos-1;f>0;f--,p--){let m=s.node(f).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;o.indexOf(f)>-1?a=f:s.before(f)==p&&o.splice(1,0,-f)}let l=o.indexOf(a),u=[],d=n.openStart;for(let f=n.content,p=0;;p++){let m=f.firstChild;if(u.push(m),p==n.openStart)break;f=m.content}for(let f=d-1;f>=0;f--){let p=u[f],m=bbe(p.type);if(m&&!p.sameMarkup(s.node(Math.abs(a)-1)))d=f;else if(m||!p.type.isTextblock)break}for(let f=n.openStart;f>=0;f--){let p=(f+d+1)%(n.openStart+1),m=u[p];if(m)for(let g=0;g<o.length;g++){let y=o[(g+l)%o.length],v=!0;y<0&&(v=!1,y=-y);let b=s.node(y-1),w=s.index(y-1);if(b.canReplaceWith(w,w,m.type,m.marks))return t.replace(s.before(y),v?i.after(y):r,new we(_se(n.content,0,n.openStart,p),p,n.openEnd))}}let h=t.steps.length;for(let f=o.length-1;f>=0&&(t.replace(e,r,n),!(t.steps.length>h));f--){let p=o[f];p<0||(e=s.before(p),r=i.after(p))}}function _se(t,e,r,n,s){if(e<r){let i=t.firstChild;t=t.replaceChild(0,i.copy(_se(i.content,e+1,r,n,i)))}if(e>n){let i=s.contentMatchAt(0),o=i.fillBefore(t).append(t);t=o.append(i.matchFragment(o).fillBefore(J.empty,!0))}return t}function wbe(t,e,r,n){if(!n.isInline&&e==r&&t.doc.resolve(e).parent.content.size){let s=gbe(t.doc,e,n.type);s!=null&&(e=r=s)}t.replaceRange(e,r,new we(J.from(n),0,0))}function Sbe(t,e,r){let n=t.doc.resolve(e),s=t.doc.resolve(r),i=Nse(n,s);for(let o=0;o<i.length;o++){let a=i[o],l=o==i.length-1;if(l&&a==0||n.node(a).type.contentMatch.validEnd)return t.delete(n.start(a),s.end(a));if(a>0&&(l||n.node(a-1).canReplace(n.index(a-1),s.indexAfter(a-1))))return t.delete(n.before(a),s.after(a))}for(let o=1;o<=n.depth&&o<=s.depth;o++)if(e-n.start(o)==n.depth-o&&r>n.end(o)&&s.end(o)-r!=s.depth-o&&n.start(o-1)==s.start(o-1)&&n.node(o-1).canReplace(n.index(o-1),s.index(o-1)))return t.delete(n.before(o),r);t.delete(e,r)}function Nse(t,e){let r=[],n=Math.min(t.depth,e.depth);for(let s=n;s>=0;s--){let i=t.start(s);if(i<t.pos-(t.depth-s)||e.end(s)>e.pos+(e.depth-s)||t.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(i==e.start(s)||s==t.depth&&s==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==i-1)&&r.push(s)}return r}class Od extends Tn{constructor(e,r,n){super(),this.pos=e,this.attr=r,this.value=n}apply(e){let r=e.nodeAt(this.pos);if(!r)return Nr.fail("No node at attribute step's position");let n=Object.create(null);for(let i in r.attrs)n[i]=r.attrs[i];n[this.attr]=this.value;let s=r.type.create(n,null,r.marks);return Nr.fromReplace(e,this.pos,this.pos+1,new we(J.from(s),0,r.isLeaf?0:1))}getMap(){return _s.empty}invert(e){return new Od(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Od(r.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.pos!="number"||typeof r.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Od(r.pos,r.attr,r.value)}}Tn.jsonID("attr",Od);class Jp extends Tn{constructor(e,r){super(),this.attr=e,this.value=r}apply(e){let r=Object.create(null);for(let s in e.attrs)r[s]=e.attrs[s];r[this.attr]=this.value;let n=e.type.create(r,e.content,e.marks);return Nr.ok(n)}getMap(){return _s.empty}invert(e){return new Jp(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Jp(r.attr,r.value)}}Tn.jsonID("docAttr",Jp);let ch=class extends Error{};ch=function t(e){let r=Error.call(this,e);return r.__proto__=t.prototype,r};ch.prototype=Object.create(Error.prototype);ch.prototype.constructor=ch;ch.prototype.name="TransformError";class Cse{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Xp}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let r=this.maybeStep(e);if(r.failed)throw new ch(r.failed);return this}maybeStep(e){let r=e.apply(this.doc);return r.failed||this.addStep(e,r.doc),r}get docChanged(){return this.steps.length>0}addStep(e,r){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=r}replace(e,r=e,n=we.empty){let s=Cb(this.doc,e,r,n);return s&&this.step(s),this}replaceWith(e,r,n){return this.replace(e,r,new we(J.from(n),0,0))}delete(e,r){return this.replace(e,r,we.empty)}insert(e,r){return this.replaceWith(e,e,r)}replaceRange(e,r,n){return xbe(this,e,r,n),this}replaceRangeWith(e,r,n){return wbe(this,e,r,n),this}deleteRange(e,r){return Sbe(this,e,r),this}lift(e,r){return obe(this,e,r),this}join(e,r=1){return mbe(this,e,r),this}wrap(e,r){return cbe(this,e,r),this}setBlockType(e,r=e,n,s=null){return ube(this,e,r,n,s),this}setNodeMarkup(e,r,n=null,s){return hbe(this,e,r,n,s),this}setNodeAttribute(e,r,n){return this.step(new Od(e,r,n)),this}setDocAttribute(e,r){return this.step(new Jp(e,r)),this}addNodeMark(e,r){return this.step(new Ya(e,r)),this}removeNodeMark(e,r){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(r instanceof Rt)r.isInSet(n.marks)&&this.step(new Xc(e,r));else{let s=n.marks,i,o=[];for(;i=r.isInSet(s);)o.push(new Xc(e,i)),s=i.removeFromSet(s);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,r=1,n){return fbe(this,e,r,n),this}addMark(e,r,n){return nbe(this,e,r,n),this}removeMark(e,r,n){return sbe(this,e,r,n),this}clearIncompatible(e,r,n){return kA(this,e,r,n),this}}const N1=Object.create(null);class Ze{constructor(e,r,n){this.$anchor=e,this.$head=r,this.ranges=n||[new Ebe(e.min(r),e.max(r))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let r=0;r<e.length;r++)if(e[r].$from.pos!=e[r].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,r=we.empty){let n=r.content.lastChild,s=null;for(let a=0;a<r.openEnd;a++)s=n,n=n.lastChild;let i=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:u}=o[a],d=e.mapping.slice(i);e.replaceRange(d.map(l.pos),d.map(u.pos),a?we.empty:r),a==0&&k3(e,i,(n?n.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,r){let n=e.steps.length,s=this.ranges;for(let i=0;i<s.length;i++){let{$from:o,$to:a}=s[i],l=e.mapping.slice(n),u=l.map(o.pos),d=l.map(a.pos);i?e.deleteRange(u,d):(e.replaceRangeWith(u,d,r),k3(e,n,r.isInline?-1:1))}}static findFrom(e,r,n=!1){let s=e.parent.inlineContent?new We(e):Xu(e.node(0),e.parent,e.pos,e.index(),r,n);if(s)return s;for(let i=e.depth-1;i>=0;i--){let o=r<0?Xu(e.node(0),e.node(i),e.before(i+1),e.index(i),r,n):Xu(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,r,n);if(o)return o}return null}static near(e,r=1){return this.findFrom(e,r)||this.findFrom(e,-r)||new ks(e.node(0))}static atStart(e){return Xu(e,e,0,0,1)||new ks(e)}static atEnd(e){return Xu(e,e,e.content.size,e.childCount,-1)||new ks(e)}static fromJSON(e,r){if(!r||!r.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=N1[r.type];if(!n)throw new RangeError(`No selection type ${r.type} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in N1)throw new RangeError("Duplicate use of selection JSON ID "+e);return N1[e]=r,r.prototype.jsonID=e,r}getBookmark(){return We.between(this.$anchor,this.$head).getBookmark()}}Ze.prototype.visible=!0;class Ebe{constructor(e,r){this.$from=e,this.$to=r}}let N3=!1;function C3(t){!N3&&!t.parent.inlineContent&&(N3=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class We extends Ze{constructor(e,r=e){C3(e),C3(r),super(e,r)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,r){let n=e.resolve(r.map(this.head));if(!n.parent.inlineContent)return Ze.near(n);let s=e.resolve(r.map(this.anchor));return new We(s.parent.inlineContent?s:n,n)}replace(e,r=we.empty){if(super.replace(e,r),r==we.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof We&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new kb(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,r){if(typeof r.anchor!="number"||typeof r.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new We(e.resolve(r.anchor),e.resolve(r.head))}static create(e,r,n=r){let s=e.resolve(r);return new this(s,n==r?s:e.resolve(n))}static between(e,r,n){let s=e.pos-r.pos;if((!n||s)&&(n=s>=0?1:-1),!r.parent.inlineContent){let i=Ze.findFrom(r,n,!0)||Ze.findFrom(r,-n,!0);if(i)r=i.$head;else return Ze.near(r,n)}return e.parent.inlineContent||(s==0?e=r:(e=(Ze.findFrom(e,-n,!0)||Ze.findFrom(e,n,!0)).$anchor,e.pos<r.pos!=s<0&&(e=r))),new We(e,r)}}Ze.jsonID("text",We);class kb{constructor(e,r){this.anchor=e,this.head=r}map(e){return new kb(e.map(this.anchor),e.map(this.head))}resolve(e){return We.between(e.resolve(this.anchor),e.resolve(this.head))}}class Ae extends Ze{constructor(e){let r=e.nodeAfter,n=e.node(0).resolve(e.pos+r.nodeSize);super(e,n),this.node=r}map(e,r){let{deleted:n,pos:s}=r.mapResult(this.anchor),i=e.resolve(s);return n?Ze.near(i):new Ae(i)}content(){return new we(J.from(this.node),0,0)}eq(e){return e instanceof Ae&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new TA(this.anchor)}static fromJSON(e,r){if(typeof r.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ae(e.resolve(r.anchor))}static create(e,r){return new Ae(e.resolve(r))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Ae.prototype.visible=!1;Ze.jsonID("node",Ae);class TA{constructor(e){this.anchor=e}map(e){let{deleted:r,pos:n}=e.mapResult(this.anchor);return r?new kb(n,n):new TA(n)}resolve(e){let r=e.resolve(this.anchor),n=r.nodeAfter;return n&&Ae.isSelectable(n)?new Ae(r):Ze.near(r)}}class ks extends Ze{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,r=we.empty){if(r==we.empty){e.delete(0,e.doc.content.size);let n=Ze.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,r)}toJSON(){return{type:"all"}}static fromJSON(e){return new ks(e)}map(e){return new ks(e)}eq(e){return e instanceof ks}getBookmark(){return _be}}Ze.jsonID("all",ks);const _be={map(){return this},resolve(t){return new ks(t)}};function Xu(t,e,r,n,s,i=!1){if(e.inlineContent)return We.create(t,r);for(let o=n-(s>0?0:1);s>0?o<e.childCount:o>=0;o+=s){let a=e.child(o);if(a.isAtom){if(!i&&Ae.isSelectable(a))return Ae.create(t,r-(s<0?a.nodeSize:0))}else{let l=Xu(t,a,r+s,s<0?a.childCount:0,s,i);if(l)return l}r+=a.nodeSize*s}return null}function k3(t,e,r){let n=t.steps.length-1;if(n<e)return;let s=t.steps[n];if(!(s instanceof Hr||s instanceof Yr))return;let i=t.mapping.maps[n],o;i.forEach((a,l,u,d)=>{o==null&&(o=d)}),t.setSelection(Ze.near(t.doc.resolve(o),r))}const j3=1,iy=2,T3=4;class Nbe extends Cse{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|j3)&~iy,this.storedMarks=null,this}get selectionSet(){return(this.updated&j3)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=iy,this}ensureMarks(e){return Rt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&iy)>0}addStep(e,r){super.addStep(e,r),this.updated=this.updated&~iy,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,r=!0){let n=this.selection;return r&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||Rt.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,r,n){let s=this.doc.type.schema;if(r==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(n==null&&(n=r),!e)return this.deleteRange(r,n);let i=this.storedMarks;if(!i){let o=this.doc.resolve(r);i=n==r?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(r,n,s.text(e,i)),!this.selection.empty&&this.selection.to==r+e.length&&this.setSelection(Ze.near(this.selection.$to)),this}}setMeta(e,r){return this.meta[typeof e=="string"?e:e.key]=r,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=T3,this}get scrolledIntoView(){return(this.updated&T3)>0}}function O3(t,e){return!e||!t?t:t.bind(e)}class Kf{constructor(e,r,n){this.name=e,this.init=O3(r.init,n),this.apply=O3(r.apply,n)}}const Cbe=[new Kf("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Kf("selection",{init(t,e){return t.selection||Ze.atStart(e.doc)},apply(t){return t.selection}}),new Kf("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,r,n){return n.selection.$cursor?t.storedMarks:null}}),new Kf("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class C1{constructor(e,r){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Cbe.slice(),r&&r.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new Kf(n.key,n.spec.state,n))})}}class pd{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,r=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=r){let s=this.config.plugins[n];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let r=[e],n=this.applyInner(e),s=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=s?s[o].n:0,u=s?s[o].state:this,d=l<r.length&&a.spec.appendTransaction.call(a,l?r.slice(l):r,u,n);if(d&&n.filterTransaction(d,o)){if(d.setMeta("appendedTransaction",e),!s){s=[];for(let h=0;h<this.config.plugins.length;h++)s.push(h<o?{state:n,n:r.length}:{state:this,n:0})}r.push(d),n=n.applyInner(d),i=!0}s&&(s[o]={state:n,n:r.length})}}if(!i)return{state:n,transactions:r}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let r=new pd(this.config),n=this.config.fields;for(let s=0;s<n.length;s++){let i=n[s];r[i.name]=i.apply(e,this[i.name],this,r)}return r}get tr(){return new Nbe(this)}static create(e){let r=new C1(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new pd(r);for(let s=0;s<r.fields.length;s++)n[r.fields[s].name]=r.fields[s].init(e,n);return n}reconfigure(e){let r=new C1(this.schema,e.plugins),n=r.fields,s=new pd(r);for(let i=0;i<n.length;i++){let o=n[i].name;s[o]=this.hasOwnProperty(o)?this[o]:n[i].init(e,s)}return s}toJSON(e){let r={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(r.storedMarks=this.storedMarks.map(n=>n.toJSON())),e&&typeof e=="object")for(let n in e){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[n],i=s.spec.state;i&&i.toJSON&&(r[n]=i.toJSON.call(s,this[s.key]))}return r}static fromJSON(e,r,n){if(!r)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new C1(e.schema,e.plugins),i=new pd(s);return s.fields.forEach(o=>{if(o.name=="doc")i.doc=ll.fromJSON(e.schema,r.doc);else if(o.name=="selection")i.selection=Ze.fromJSON(i.doc,r.selection);else if(o.name=="storedMarks")r.storedMarks&&(i.storedMarks=r.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let a in n){let l=n[a],u=l.spec.state;if(l.key==o.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(r,a)){i[o.name]=u.fromJSON.call(l,e,r[a],i);return}}i[o.name]=o.init(e,i)}}),i}}function kse(t,e,r){for(let n in t){let s=t[n];s instanceof Function?s=s.bind(e):n=="handleDOMEvents"&&(s=kse(s,e,{})),r[n]=s}return r}class er{constructor(e){this.spec=e,this.props={},e.props&&kse(e.props,this,this.props),this.key=e.key?e.key.key:jse("plugin")}getState(e){return e[this.key]}}const k1=Object.create(null);function jse(t){return t in k1?t+"$"+ ++k1[t]:(k1[t]=0,t+"$")}class Lr{constructor(e="key"){this.key=jse(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const OA=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function Tse(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("backward",t):r.parentOffset>0)?null:r}const Ose=(t,e,r)=>{let n=Tse(t,r);if(!n)return!1;let s=PA(n);if(!s){let o=n.blockRange(),a=o&&$h(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let i=s.nodeBefore;if(qse(t,s,e,-1))return!0;if(n.parent.content.size==0&&(uh(i,"end")||Ae.isSelectable(i)))for(let o=n.depth;;o--){let a=Cb(t.doc,n.before(o),n.after(o),we.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(uh(i,"end")?Ze.findFrom(l.doc.resolve(l.mapping.map(s.pos,-1)),-1):Ae.create(l.doc,s.pos-i.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||n.node(o-1).childCount>1)break}return i.isAtom&&s.depth==n.depth-1?(e&&e(t.tr.delete(s.pos-i.nodeSize,s.pos).scrollIntoView()),!0):!1},kbe=(t,e,r)=>{let n=Tse(t,r);if(!n)return!1;let s=PA(n);return s?Pse(t,s,e):!1},jbe=(t,e,r)=>{let n=Rse(t,r);if(!n)return!1;let s=IA(n);return s?Pse(t,s,e):!1};function Pse(t,e,r){let n=e.nodeBefore,s=n,i=e.pos-1;for(;!s.isTextblock;i--){if(s.type.spec.isolating)return!1;let d=s.lastChild;if(!d)return!1;s=d}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let d=a.firstChild;if(!d)return!1;a=d}let u=Cb(t.doc,i,l,we.empty);if(!u||u.from!=i||u instanceof Hr&&u.slice.size>=l-i)return!1;if(r){let d=t.tr.step(u);d.setSelection(We.create(d.doc,i)),r(d.scrollIntoView())}return!0}function uh(t,e,r=!1){for(let n=t;n;n=e=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(r&&n.childCount!=1)return!1}return!1}const Ise=(t,e,r)=>{let{$head:n,empty:s}=t.selection,i=n;if(!s)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("backward",t):n.parentOffset>0)return!1;i=PA(n)}let o=i&&i.nodeBefore;return!o||!Ae.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Ae.create(t.doc,i.pos-o.nodeSize)).scrollIntoView()),!0)};function PA(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Rse(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)?null:r}const Mse=(t,e,r)=>{let n=Rse(t,r);if(!n)return!1;let s=IA(n);if(!s)return!1;let i=s.nodeAfter;if(qse(t,s,e,1))return!0;if(n.parent.content.size==0&&(uh(i,"start")||Ae.isSelectable(i))){let o=Cb(t.doc,n.before(),n.after(),we.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(uh(i,"start")?Ze.findFrom(a.doc.resolve(a.mapping.map(s.pos)),1):Ae.create(a.doc,a.mapping.map(s.pos))),e(a.scrollIntoView())}return!0}}return i.isAtom&&s.depth==n.depth-1?(e&&e(t.tr.delete(s.pos,s.pos+i.nodeSize).scrollIntoView()),!0):!1},Ase=(t,e,r)=>{let{$head:n,empty:s}=t.selection,i=n;if(!s)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)return!1;i=IA(n)}let o=i&&i.nodeAfter;return!o||!Ae.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Ae.create(t.doc,i.pos)).scrollIntoView()),!0)};function IA(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let r=t.node(e);if(t.index(e)+1<r.childCount)return t.doc.resolve(t.after(e+1));if(r.type.spec.isolating)break}return null}const Tbe=(t,e)=>{let r=t.selection,n=r instanceof Ae,s;if(n){if(r.node.isTextblock||!Il(t.doc,r.from))return!1;s=r.from}else if(s=Nb(t.doc,r.from,-1),s==null)return!1;if(e){let i=t.tr.join(s);n&&i.setSelection(Ae.create(i.doc,s-t.doc.resolve(s).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},Obe=(t,e)=>{let r=t.selection,n;if(r instanceof Ae){if(r.node.isTextblock||!Il(t.doc,r.to))return!1;n=r.to}else if(n=Nb(t.doc,r.to,1),n==null)return!1;return e&&e(t.tr.join(n).scrollIntoView()),!0},Pbe=(t,e)=>{let{$from:r,$to:n}=t.selection,s=r.blockRange(n),i=s&&$h(s);return i==null?!1:(e&&e(t.tr.lift(s,i).scrollIntoView()),!0)},Dse=(t,e)=>{let{$head:r,$anchor:n}=t.selection;return!r.parent.type.spec.code||!r.sameParent(n)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function RA(t){for(let e=0;e<t.edgeCount;e++){let{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}const Ibe=(t,e)=>{let{$head:r,$anchor:n}=t.selection;if(!r.parent.type.spec.code||!r.sameParent(n))return!1;let s=r.node(-1),i=r.indexAfter(-1),o=RA(s.contentMatchAt(i));if(!o||!s.canReplaceWith(i,i,o))return!1;if(e){let a=r.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(Ze.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},$se=(t,e)=>{let r=t.selection,{$from:n,$to:s}=r;if(r instanceof ks||n.parent.inlineContent||s.parent.inlineContent)return!1;let i=RA(s.parent.contentMatchAt(s.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let o=(!n.parentOffset&&s.index()<s.parent.childCount?n:s).pos,a=t.tr.insert(o,i.createAndFill());a.setSelection(We.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},Fse=(t,e)=>{let{$cursor:r}=t.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let i=r.before();if(Fo(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}let n=r.blockRange(),s=n&&$h(n);return s==null?!1:(e&&e(t.tr.lift(n,s).scrollIntoView()),!0)};function Rbe(t){return(e,r)=>{let{$from:n,$to:s}=e.selection;if(e.selection instanceof Ae&&e.selection.node.isBlock)return!n.parentOffset||!Fo(e.doc,n.pos)?!1:(r&&r(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let i=[],o,a,l=!1,u=!1;for(let p=n.depth;;p--)if(n.node(p).isBlock){l=n.end(p)==n.pos+(n.depth-p),u=n.start(p)==n.pos-(n.depth-p),a=RA(n.node(p-1).contentMatchAt(n.indexAfter(p-1))),i.unshift(l&&a?{type:a}:null),o=p;break}else{if(p==1)return!1;i.unshift(null)}let d=e.tr;(e.selection instanceof We||e.selection instanceof ks)&&d.deleteSelection();let h=d.mapping.map(n.pos),f=Fo(d.doc,h,i.length,i);if(f||(i[0]=a?{type:a}:null,f=Fo(d.doc,h,i.length,i)),!f)return!1;if(d.split(h,i.length,i),!l&&u&&n.node(o).type!=a){let p=d.mapping.map(n.before(o)),m=d.doc.resolve(p);a&&n.node(o-1).canReplaceWith(m.index(),m.index()+1,a)&&d.setNodeMarkup(d.mapping.map(n.before(o)),a)}return r&&r(d.scrollIntoView()),!0}}const Mbe=Rbe(),Abe=(t,e)=>{let{$from:r,to:n}=t.selection,s,i=r.sharedDepth(n);return i==0?!1:(s=r.before(i),e&&e(t.tr.setSelection(Ae.create(t.doc,s))),!0)};function Dbe(t,e,r){let n=e.nodeBefore,s=e.nodeAfter,i=e.index();return!n||!s||!n.type.compatibleContent(s.type)?!1:!n.content.size&&e.parent.canReplace(i-1,i)?(r&&r(t.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(s.isTextblock||Il(t.doc,e.pos))?!1:(r&&r(t.tr.join(e.pos).scrollIntoView()),!0)}function qse(t,e,r,n){let s=e.nodeBefore,i=e.nodeAfter,o,a,l=s.type.spec.isolating||i.type.spec.isolating;if(!l&&Dbe(t,e,r))return!0;let u=!l&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(o=(a=s.contentMatchAt(s.childCount)).findWrapping(i.type))&&a.matchType(o[0]||i.type).validEnd){if(r){let p=e.pos+i.nodeSize,m=J.empty;for(let v=o.length-1;v>=0;v--)m=J.from(o[v].create(null,m));m=J.from(s.copy(m));let g=t.tr.step(new Yr(e.pos-1,p,e.pos,p,new we(m,1,0),o.length,!0)),y=g.doc.resolve(p+2*o.length);y.nodeAfter&&y.nodeAfter.type==s.type&&Il(g.doc,y.pos)&&g.join(y.pos),r(g.scrollIntoView())}return!0}let d=i.type.spec.isolating||n>0&&l?null:Ze.findFrom(e,1),h=d&&d.$from.blockRange(d.$to),f=h&&$h(h);if(f!=null&&f>=e.depth)return r&&r(t.tr.lift(h,f).scrollIntoView()),!0;if(u&&uh(i,"start",!0)&&uh(s,"end")){let p=s,m=[];for(;m.push(p),!p.isTextblock;)p=p.lastChild;let g=i,y=1;for(;!g.isTextblock;g=g.firstChild)y++;if(p.canReplace(p.childCount,p.childCount,g.content)){if(r){let v=J.empty;for(let w=m.length-1;w>=0;w--)v=J.from(m[w].copy(v));let b=t.tr.step(new Yr(e.pos-m.length,e.pos+i.nodeSize,e.pos+y,e.pos+i.nodeSize-y,new we(v,m.length,0),0,!0));r(b.scrollIntoView())}return!0}}return!1}function Lse(t){return function(e,r){let n=e.selection,s=t<0?n.$from:n.$to,i=s.depth;for(;s.node(i).isInline;){if(!i)return!1;i--}return s.node(i).isTextblock?(r&&r(e.tr.setSelection(We.create(e.doc,t<0?s.start(i):s.end(i)))),!0):!1}}const $be=Lse(-1),Fbe=Lse(1);function qbe(t,e=null){return function(r,n){let{$from:s,$to:i}=r.selection,o=s.blockRange(i),a=o&&jA(o,t,e);return a?(n&&n(r.tr.wrap(o,a).scrollIntoView()),!0):!1}}function P3(t,e=null){return function(r,n){let s=!1;for(let i=0;i<r.selection.ranges.length&&!s;i++){let{$from:{pos:o},$to:{pos:a}}=r.selection.ranges[i];r.doc.nodesBetween(o,a,(l,u)=>{if(s)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)s=!0;else{let d=r.doc.resolve(u),h=d.index();s=d.parent.canReplaceWith(h,h+1,t)}})}if(!s)return!1;if(n){let i=r.tr;for(let o=0;o<r.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=r.selection.ranges[o];i.setBlockType(a,l,t,e)}n(i.scrollIntoView())}return!0}}function MA(...t){return function(e,r,n){for(let s=0;s<t.length;s++)if(t[s](e,r,n))return!0;return!1}}MA(OA,Ose,Ise);MA(OA,Mse,Ase);MA(Dse,$se,Fse,Mbe);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Lbe(t,e=null){return function(r,n){let{$from:s,$to:i}=r.selection,o=s.blockRange(i);if(!o)return!1;let a=n?r.tr:null;return Bbe(a,o,t,e)?(n&&n(a.scrollIntoView()),!0):!1}}function Bbe(t,e,r,n=null){let s=!1,i=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(r)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);i=new Bv(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new Bv(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),s=!0}let a=jA(i,r,n,e);return a?(t&&zbe(t,e,a,s,r),!0):!1}function zbe(t,e,r,n,s){let i=J.empty;for(let d=r.length-1;d>=0;d--)i=J.from(r[d].type.create(r[d].attrs,i));t.step(new Yr(e.start-(n?2:0),e.end,e.start,e.end,new we(i,0,0),r.length,!0));let o=0;for(let d=0;d<r.length;d++)r[d].type==s&&(o=d+1);let a=r.length-o,l=e.start+r.length-(n?2:0),u=e.parent;for(let d=e.startIndex,h=e.endIndex,f=!0;d<h;d++,f=!1)!f&&Fo(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=u.child(d).nodeSize;return t}function Wbe(t){return function(e,r){let{$from:n,$to:s}=e.selection,i=n.blockRange(s,o=>o.childCount>0&&o.firstChild.type==t);return i?r?n.node(i.depth-1).type==t?Vbe(e,r,t,i):Ube(e,r,i):!0:!1}}function Vbe(t,e,r,n){let s=t.tr,i=n.end,o=n.$to.end(n.depth);i<o&&(s.step(new Yr(i-1,o,i,o,new we(J.from(r.create(null,n.parent.copy())),1,0),1,!0)),n=new Bv(s.doc.resolve(n.$from.pos),s.doc.resolve(o),n.depth));const a=$h(n);if(a==null)return!1;s.lift(n,a);let l=s.doc.resolve(s.mapping.map(i,-1)-1);return Il(s.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&s.join(l.pos),e(s.scrollIntoView()),!0}function Ube(t,e,r){let n=t.tr,s=r.parent;for(let p=r.end,m=r.endIndex-1,g=r.startIndex;m>g;m--)p-=s.child(m).nodeSize,n.delete(p-1,p+1);let i=n.doc.resolve(r.start),o=i.nodeAfter;if(n.mapping.map(r.end)!=r.start+i.nodeAfter.nodeSize)return!1;let a=r.startIndex==0,l=r.endIndex==s.childCount,u=i.node(-1),d=i.index(-1);if(!u.canReplace(d+(a?0:1),d+1,o.content.append(l?J.empty:J.from(s))))return!1;let h=i.pos,f=h+o.nodeSize;return n.step(new Yr(h-(a?1:0),f+(l?1:0),h+1,f-1,new we((a?J.empty:J.from(s.copy(J.empty))).append(l?J.empty:J.from(s.copy(J.empty))),a?0:1,l?0:1),a?0:1)),e(n.scrollIntoView()),!0}function Hbe(t){return function(e,r){let{$from:n,$to:s}=e.selection,i=n.blockRange(s,u=>u.childCount>0&&u.firstChild.type==t);if(!i)return!1;let o=i.startIndex;if(o==0)return!1;let a=i.parent,l=a.child(o-1);if(l.type!=t)return!1;if(r){let u=l.lastChild&&l.lastChild.type==a.type,d=J.from(u?t.create():null),h=new we(J.from(t.create(null,J.from(a.type.create(null,d)))),u?3:1,0),f=i.start,p=i.end;r(e.tr.step(new Yr(f-(u?3:1),p,f,p,h,1,!0)).scrollIntoView())}return!0}}const un=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},dh=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let aR=null;const No=function(t,e,r){let n=aR||(aR=document.createRange());return n.setEnd(t,r??t.nodeValue.length),n.setStart(t,e||0),n},Kbe=function(){aR=null},Jc=function(t,e,r,n){return r&&(I3(t,e,r,n,-1)||I3(t,e,r,n,1))},Gbe=/^(img|br|input|textarea|hr)$/i;function I3(t,e,r,n,s){for(var i;;){if(t==r&&e==n)return!0;if(e==(s<0?0:Ks(t))){let o=t.parentNode;if(!o||o.nodeType!=1||Bm(t)||Gbe.test(t.nodeName)||t.contentEditable=="false")return!1;e=un(t)+(s<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(s<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((i=o.pmViewDesc)===null||i===void 0)&&i.ignoreForSelection)e+=s;else return!1;else t=o,e=s<0?Ks(t):0}else return!1}}function Ks(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Ybe(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Ks(t)}else if(t.parentNode&&!Bm(t))e=un(t),t=t.parentNode;else return null}}function Qbe(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Bm(t))e=un(t)+1,t=t.parentNode;else return null}}function Xbe(t,e,r){for(let n=e==0,s=e==Ks(t);n||s;){if(t==r)return!0;let i=un(t);if(t=t.parentNode,!t)return!1;n=n&&i==0,s=s&&i==Ks(t)}}function Bm(t){let e;for(let r=t;r&&!(e=r.pmViewDesc);r=r.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const jb=function(t){return t.focusNode&&Jc(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Jl(t,e){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=t,r.key=r.code=e,r}function Jbe(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Zbe(t,e,r){if(t.caretPositionFromPoint)try{let n=t.caretPositionFromPoint(e,r);if(n)return{node:n.offsetNode,offset:Math.min(Ks(n.offsetNode),n.offset)}}catch{}if(t.caretRangeFromPoint){let n=t.caretRangeFromPoint(e,r);if(n)return{node:n.startContainer,offset:Math.min(Ks(n.startContainer),n.startOffset)}}}const ro=typeof navigator<"u"?navigator:null,R3=typeof document<"u"?document:null,Rl=ro&&ro.userAgent||"",lR=/Edge\/(\d+)/.exec(Rl),Bse=/MSIE \d/.exec(Rl),cR=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Rl),fs=!!(Bse||cR||lR),ul=Bse?document.documentMode:cR?+cR[1]:lR?+lR[1]:0,Js=!fs&&/gecko\/(\d+)/i.test(Rl);Js&&+(/Firefox\/(\d+)/.exec(Rl)||[0,0])[1];const uR=!fs&&/Chrome\/(\d+)/.exec(Rl),Kr=!!uR,zse=uR?+uR[1]:0,jn=!fs&&!!ro&&/Apple Computer/.test(ro.vendor),hh=jn&&(/Mobile\/\w+/.test(Rl)||!!ro&&ro.maxTouchPoints>2),zs=hh||(ro?/Mac/.test(ro.platform):!1),Wse=ro?/Win/.test(ro.platform):!1,Mo=/Android \d/.test(Rl),zm=!!R3&&"webkitFontSmoothing"in R3.documentElement.style,exe=zm?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function txe(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function vo(t,e){return typeof t=="number"?t:t[e]}function rxe(t){let e=t.getBoundingClientRect(),r=e.width/t.offsetWidth||1,n=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*r,top:e.top,bottom:e.top+t.clientHeight*n}}function M3(t,e,r){let n=t.someProp("scrollThreshold")||0,s=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument;for(let o=r||t.dom;o;){if(o.nodeType!=1){o=dh(o);continue}let a=o,l=a==i.body,u=l?txe(i):rxe(a),d=0,h=0;if(e.top<u.top+vo(n,"top")?h=-(u.top-e.top+vo(s,"top")):e.bottom>u.bottom-vo(n,"bottom")&&(h=e.bottom-e.top>u.bottom-u.top?e.top+vo(s,"top")-u.top:e.bottom-u.bottom+vo(s,"bottom")),e.left<u.left+vo(n,"left")?d=-(u.left-e.left+vo(s,"left")):e.right>u.right-vo(n,"right")&&(d=e.right-u.right+vo(s,"right")),d||h)if(l)i.defaultView.scrollBy(d,h);else{let p=a.scrollLeft,m=a.scrollTop;h&&(a.scrollTop+=h),d&&(a.scrollLeft+=d);let g=a.scrollLeft-p,y=a.scrollTop-m;e={left:e.left-g,top:e.top-y,right:e.right-g,bottom:e.bottom-y}}let f=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(f))break;o=f=="absolute"?o.offsetParent:dh(o)}}function nxe(t){let e=t.dom.getBoundingClientRect(),r=Math.max(0,e.top),n,s;for(let i=(e.left+e.right)/2,o=r+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(i,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=r-20){n=a,s=l.top;break}}return{refDOM:n,refTop:s,stack:Vse(t.dom)}}function Vse(t){let e=[],r=t.ownerDocument;for(let n=t;n&&(e.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),t!=r);n=dh(n));return e}function sxe({refDOM:t,refTop:e,stack:r}){let n=t?t.getBoundingClientRect().top:0;Use(r,n==0?0:n-e)}function Use(t,e){for(let r=0;r<t.length;r++){let{dom:n,top:s,left:i}=t[r];n.scrollTop!=s+e&&(n.scrollTop=s+e),n.scrollLeft!=i&&(n.scrollLeft=i)}}let Wu=null;function ixe(t){if(t.setActive)return t.setActive();if(Wu)return t.focus(Wu);let e=Vse(t);t.focus(Wu==null?{get preventScroll(){return Wu={preventScroll:!0},!0}}:void 0),Wu||(Wu=!1,Use(e,0))}function Hse(t,e){let r,n=2e8,s,i=0,o=e.top,a=e.top,l,u;for(let d=t.firstChild,h=0;d;d=d.nextSibling,h++){let f;if(d.nodeType==1)f=d.getClientRects();else if(d.nodeType==3)f=No(d).getClientRects();else continue;for(let p=0;p<f.length;p++){let m=f[p];if(m.top<=o&&m.bottom>=a){o=Math.max(m.bottom,o),a=Math.min(m.top,a);let g=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(g<n){r=d,n=g,s=g&&r.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,d.nodeType==1&&g&&(i=h+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!l&&m.left<=e.left&&m.right>=e.left&&(l=d,u={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!r&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(i=h+1)}}return!r&&l&&(r=l,s=u,n=0),r&&r.nodeType==3?oxe(r,s):!r||n&&r.nodeType==1?{node:t,offset:i}:Hse(r,s)}function oxe(t,e){let r=t.nodeValue.length,n=document.createRange(),s;for(let i=0;i<r;i++){n.setEnd(t,i+1),n.setStart(t,i);let o=xa(n,1);if(o.top!=o.bottom&&AA(e,o)){s={node:t,offset:i+(e.left>=(o.left+o.right)/2?1:0)};break}}return n.detach(),s||{node:t,offset:0}}function AA(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function axe(t,e){let r=t.parentNode;return r&&/^li$/i.test(r.nodeName)&&e.left<t.getBoundingClientRect().left?r:t}function lxe(t,e,r){let{node:n,offset:s}=Hse(e,r),i=-1;if(n.nodeType==1&&!n.firstChild){let o=n.getBoundingClientRect();i=o.left!=o.right&&r.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(n,s,i)}function cxe(t,e,r,n){let s=-1;for(let i=e,o=!1;i!=t.dom;){let a=t.docView.nearestDesc(i,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>n.left||l.top>n.top?s=a.posBefore:(!o&&l.right<n.left||l.bottom<n.top)&&(s=a.posAfter),o=!0),!a.contentDOM&&s<0&&!a.node.isText))return(a.node.isBlock?n.top<(l.top+l.bottom)/2:n.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;i=a.dom.parentNode}return s>-1?s:t.docView.posFromDOM(e,r,-1)}function Kse(t,e,r){let n=t.childNodes.length;if(n&&r.top<r.bottom)for(let s=Math.max(0,Math.min(n-1,Math.floor(n*(e.top-r.top)/(r.bottom-r.top))-2)),i=s;;){let o=t.childNodes[i];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let u=a[l];if(AA(e,u))return Kse(o,e,u)}}if((i=(i+1)%n)==s)break}return t}function uxe(t,e){let r=t.dom.ownerDocument,n,s=0,i=Zbe(r,e.left,e.top);i&&({node:n,offset:s}=i);let o=(t.root.elementFromPoint?t.root:r).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let u=t.dom.getBoundingClientRect();if(!AA(e,u)||(o=Kse(t.dom,e,u),!o))return null}if(jn)for(let u=o;n&&u;u=dh(u))u.draggable&&(n=void 0);if(o=axe(o,e),n){if(Js&&n.nodeType==1&&(s=Math.min(s,n.childNodes.length),s<n.childNodes.length)){let d=n.childNodes[s],h;d.nodeName=="IMG"&&(h=d.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&s++}let u;zm&&s&&n.nodeType==1&&(u=n.childNodes[s-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&s--,n==t.dom&&s==n.childNodes.length-1&&n.lastChild.nodeType==1&&e.top>n.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(s==0||n.nodeType!=1||n.childNodes[s-1].nodeName!="BR")&&(a=cxe(t,n,s,e))}a==null&&(a=lxe(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function A3(t){return t.top<t.bottom||t.left<t.right}function xa(t,e){let r=t.getClientRects();if(r.length){let n=r[e<0?0:r.length-1];if(A3(n))return n}return Array.prototype.find.call(r,A3)||t.getBoundingClientRect()}const dxe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Gse(t,e,r){let{node:n,offset:s,atom:i}=t.docView.domFromPos(e,r<0?-1:1),o=zm||Js;if(n.nodeType==3)if(o&&(dxe.test(n.nodeValue)||(r<0?!s:s==n.nodeValue.length))){let l=xa(No(n,s,s),r);if(Js&&s&&/\s/.test(n.nodeValue[s-1])&&s<n.nodeValue.length){let u=xa(No(n,s-1,s-1),-1);if(u.top==l.top){let d=xa(No(n,s,s+1),-1);if(d.top!=l.top)return Pf(d,d.left<u.left)}}return l}else{let l=s,u=s,d=r<0?1:-1;return r<0&&!s?(u++,d=-1):r>=0&&s==n.nodeValue.length?(l--,d=1):r<0?l--:u++,Pf(xa(No(n,l,u),d),d<0)}if(!t.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&s&&(r<0||s==Ks(n))){let l=n.childNodes[s-1];if(l.nodeType==1)return j1(l.getBoundingClientRect(),!1)}if(i==null&&s<Ks(n)){let l=n.childNodes[s];if(l.nodeType==1)return j1(l.getBoundingClientRect(),!0)}return j1(n.getBoundingClientRect(),r>=0)}if(i==null&&s&&(r<0||s==Ks(n))){let l=n.childNodes[s-1],u=l.nodeType==3?No(l,Ks(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(u)return Pf(xa(u,1),!1)}if(i==null&&s<Ks(n)){let l=n.childNodes[s];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let u=l?l.nodeType==3?No(l,0,o?0:1):l.nodeType==1?l:null:null;if(u)return Pf(xa(u,-1),!0)}return Pf(xa(n.nodeType==3?No(n):n,-r),r>=0)}function Pf(t,e){if(t.width==0)return t;let r=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:r,right:r}}function j1(t,e){if(t.height==0)return t;let r=e?t.top:t.bottom;return{top:r,bottom:r,left:t.left,right:t.right}}function Yse(t,e,r){let n=t.state,s=t.root.activeElement;n!=e&&t.updateState(e),s!=t.dom&&t.focus();try{return r()}finally{n!=e&&t.updateState(n),s!=t.dom&&s&&s.focus()}}function hxe(t,e,r){let n=e.selection,s=r=="up"?n.$from:n.$to;return Yse(t,e,()=>{let{node:i}=t.docView.domFromPos(s.pos,r=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(i,!0);if(!a)break;if(a.node.isBlock){i=a.contentDOM||a.dom;break}i=a.dom.parentNode}let o=Gse(t,s.pos,1);for(let a=i.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=No(a,0,a.nodeValue.length).getClientRects();else continue;for(let u=0;u<l.length;u++){let d=l[u];if(d.bottom>d.top+1&&(r=="up"?o.top-d.top>(d.bottom-o.top)*2:d.bottom-o.bottom>(o.bottom-d.top)*2))return!1}}return!0})}const fxe=/[\u0590-\u08ac]/;function pxe(t,e,r){let{$head:n}=e.selection;if(!n.parent.isTextblock)return!1;let s=n.parentOffset,i=!s,o=s==n.parent.content.size,a=t.domSelection();return a?!fxe.test(n.parent.textContent)||!a.modify?r=="left"||r=="backward"?i:o:Yse(t,e,()=>{let{focusNode:l,focusOffset:u,anchorNode:d,anchorOffset:h}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",r,"character");let p=n.depth?t.docView.domAfterPos(n.before()):t.dom,{focusNode:m,focusOffset:g}=t.domSelectionRange(),y=m&&!p.contains(m.nodeType==1?m:m.parentNode)||l==m&&u==g;try{a.collapse(d,h),l&&(l!=d||u!=h)&&a.extend&&a.extend(l,u)}catch{}return f!=null&&(a.caretBidiLevel=f),y}):n.pos==n.start()||n.pos==n.end()}let D3=null,$3=null,F3=!1;function mxe(t,e,r){return D3==e&&$3==r?F3:(D3=e,$3=r,F3=r=="up"||r=="down"?hxe(t,e,r):pxe(t,e,r))}const Zs=0,q3=1,oc=2,no=3;class Wm{constructor(e,r,n,s){this.parent=e,this.children=r,this.dom=n,this.contentDOM=s,this.dirty=Zs,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,r,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let r=0;r<this.children.length;r++)e+=this.children[r].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let r=0,n=this.posAtStart;;r++){let s=this.children[r];if(s==e)return n;n+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,r,n){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(n<0){let i,o;if(e==this.contentDOM)i=e.childNodes[r-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(o)+o.size:this.posAtStart}else{let i,o;if(e==this.contentDOM)i=e.childNodes[r];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(o):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=r>un(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(r==0)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!1;break}if(i.previousSibling)break}if(s==null&&r==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!0;break}if(i.nextSibling)break}}return s??n>0?this.posAtEnd:this.posAtStart}nearestDesc(e,r=!1){for(let n=!0,s=e;s;s=s.parentNode){let i=this.getDesc(s),o;if(i&&(!r||i.node))if(n&&(o=i.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))n=!1;else return i}}getDesc(e){let r=e.pmViewDesc;for(let n=r;n;n=n.parent)if(n==this)return r}posFromDOM(e,r,n){for(let s=e;s;s=s.parentNode){let i=this.getDesc(s);if(i)return i.localPosFromDOM(e,r,n)}return-1}descAt(e){for(let r=0,n=0;r<this.children.length;r++){let s=this.children[r],i=n+s.size;if(n==e&&i!=n){for(;!s.border&&s.children.length;)for(let o=0;o<s.children.length;o++){let a=s.children[o];if(a.size){s=a;break}}return s}if(e<i)return s.descAt(e-n-s.border);n=i}}domFromPos(e,r){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,s=0;for(let i=0;n<this.children.length;n++){let o=this.children[n],a=i+o.size;if(a>e||o instanceof Xse){s=e-i;break}i=a}if(s)return this.children[n].domFromPos(s-this.children[n].border,r);for(let i;n&&!(i=this.children[n-1]).size&&i instanceof Qse&&i.side>=0;n--);if(r<=0){let i,o=!0;for(;i=n?this.children[n-1]:null,!(!i||i.dom.parentNode==this.contentDOM);n--,o=!1);return i&&r&&o&&!i.border&&!i.domAtom?i.domFromPos(i.size,r):{node:this.contentDOM,offset:i?un(i.dom)+1:0}}else{let i,o=!0;for(;i=n<this.children.length?this.children[n]:null,!(!i||i.dom.parentNode==this.contentDOM);n++,o=!1);return i&&o&&!i.border&&!i.domAtom?i.domFromPos(0,r):{node:this.contentDOM,offset:i?un(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,r,n=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:r,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,i=-1;for(let o=n,a=0;;a++){let l=this.children[a],u=o+l.size;if(s==-1&&e<=u){let d=o+l.border;if(e>=d&&r<=u-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,r,d);e=o;for(let h=a;h>0;h--){let f=this.children[h-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){s=un(f.dom)+1;break}e-=f.size}s==-1&&(s=0)}if(s>-1&&(u>r||a==this.children.length-1)){r=u;for(let d=a+1;d<this.children.length;d++){let h=this.children[d];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){i=un(h.dom);break}r+=h.size}i==-1&&(i=this.contentDOM.childNodes.length);break}o=u}return{node:this.contentDOM,from:e,to:r,fromOffset:s,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let r=this.children[e<0?0:this.children.length-1];return r.size==0||r.emptyChildAt(e)}domAfterPos(e){let{node:r,offset:n}=this.domFromPos(e,0);if(r.nodeType!=1||n==r.childNodes.length)throw new RangeError("No node after pos "+e);return r.childNodes[n]}setSelection(e,r,n,s=!1){let i=Math.min(e,r),o=Math.max(e,r);for(let p=0,m=0;p<this.children.length;p++){let g=this.children[p],y=m+g.size;if(i>m&&o<y)return g.setSelection(e-m-g.border,r-m-g.border,n,s);m=y}let a=this.domFromPos(e,e?-1:1),l=r==e?a:this.domFromPos(r,r?-1:1),u=n.root.getSelection(),d=n.domSelectionRange(),h=!1;if((Js||jn)&&e==r){let{node:p,offset:m}=a;if(p.nodeType==3){if(h=!!(m&&p.nodeValue[m-1]==`
`),h&&m==p.nodeValue.length)for(let g=p,y;g;g=g.parentNode){if(y=g.nextSibling){y.nodeName=="BR"&&(a=l={node:y.parentNode,offset:un(y)+1});break}let v=g.pmViewDesc;if(v&&v.node&&v.node.isBlock)break}}else{let g=p.childNodes[m-1];h=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(Js&&d.focusNode&&d.focusNode!=l.node&&d.focusNode.nodeType==1){let p=d.focusNode.childNodes[d.focusOffset];p&&p.contentEditable=="false"&&(s=!0)}if(!(s||h&&jn)&&Jc(a.node,a.offset,d.anchorNode,d.anchorOffset)&&Jc(l.node,l.offset,d.focusNode,d.focusOffset))return;let f=!1;if((u.extend||e==r)&&!(h&&Js)){u.collapse(a.node,a.offset);try{e!=r&&u.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>r){let m=a;a=l,l=m}let p=document.createRange();p.setEnd(l.node,l.offset),p.setStart(a.node,a.offset),u.removeAllRanges(),u.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,r){for(let n=0,s=0;s<this.children.length;s++){let i=this.children[s],o=n+i.size;if(n==o?e<=o&&r>=n:e<o&&r>n){let a=n+i.border,l=o-i.border;if(e>=a&&r<=l){this.dirty=e==n||r==o?oc:q3,e==a&&r==l&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=no:i.markDirty(e-a,r-a);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?oc:no}n=o}this.dirty=oc}markParentsDirty(){let e=1;for(let r=this.parent;r;r=r.parent,e++){let n=e==1?oc:q3;r.dirty<n&&(r.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class Qse extends Wm{constructor(e,r,n,s){let i,o=r.type.toDOM;if(typeof o=="function"&&(o=o(n,()=>{if(!i)return s;if(i.parent)return i.parent.posBeforeChild(i)})),!r.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=r,this.widget=r,i=this}matchesWidget(e){return this.dirty==Zs&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let r=this.widget.spec.stopEvent;return r?r(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class gxe extends Wm{constructor(e,r,n,s){super(e,[],r,null),this.textDOM=n,this.text=s}get size(){return this.text.length}localPosFromDOM(e,r){return e!=this.textDOM?this.posAtStart+(r?this.size:0):this.posAtStart+r}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Zc extends Wm{constructor(e,r,n,s,i){super(e,[],n,s),this.mark=r,this.spec=i}static create(e,r,n,s){let i=s.nodeViews[r.type.name],o=i&&i(r,s,n);return(!o||!o.dom)&&(o=fu.renderSpec(document,r.type.spec.toDOM(r,n),null,r.attrs)),new Zc(e,r,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&no||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=no&&this.mark.eq(e)}markDirty(e,r){if(super.markDirty(e,r),this.dirty!=Zs){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=Zs}}slice(e,r,n){let s=Zc.create(this.parent,this.mark,!0,n),i=this.children,o=this.size;r<o&&(i=hR(i,r,o,n)),e>0&&(i=hR(i,0,e,n));for(let a=0;a<i.length;a++)i[a].parent=s;return s.children=i,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class dl extends Wm{constructor(e,r,n,s,i,o,a,l,u){super(e,[],i,o),this.node=r,this.outerDeco=n,this.innerDeco=s,this.nodeDOM=a}static create(e,r,n,s,i,o){let a=i.nodeViews[r.type.name],l,u=a&&a(r,i,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},n,s),d=u&&u.dom,h=u&&u.contentDOM;if(r.isText){if(!d)d=document.createTextNode(r.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:h}=fu.renderSpec(document,r.type.spec.toDOM(r),null,r.attrs));!h&&!r.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),r.type.spec.draggable&&(d.draggable=!0));let f=d;return d=eie(d,n,r),u?l=new yxe(e,r,n,s,d,h||null,f,u,i,o+1):r.isText?new Tb(e,r,n,s,d,f,i):new dl(e,r,n,s,d,h||null,f,i,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let r=this.children.length-1;r>=0;r--){let n=this.children[r];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>J.empty)}return e}matchesNode(e,r,n){return this.dirty==Zs&&e.eq(this.node)&&Wv(r,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,r){let n=this.node.inlineContent,s=r,i=e.composing?this.localCompositionInfo(e,r):null,o=i&&i.pos>-1?i:null,a=i&&i.pos<0,l=new bxe(this,o&&o.node,e);Sxe(this.node,this.innerDeco,(u,d,h)=>{u.spec.marks?l.syncToMarks(u.spec.marks,n,e):u.type.side>=0&&!h&&l.syncToMarks(d==this.node.childCount?Rt.none:this.node.child(d).marks,n,e),l.placeWidget(u,e,s)},(u,d,h,f)=>{l.syncToMarks(u.marks,n,e);let p;l.findNodeMatch(u,d,h,f)||a&&e.state.selection.from>s&&e.state.selection.to<s+u.nodeSize&&(p=l.findIndexWithChild(i.node))>-1&&l.updateNodeAt(u,d,h,p,e)||l.updateNextNode(u,d,h,e,f,s)||l.addNode(u,d,h,e,s),s+=u.nodeSize}),l.syncToMarks([],n,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==oc)&&(o&&this.protectLocalComposition(e,o),Jse(this.contentDOM,this.children,e),hh&&Exe(this.dom))}localCompositionInfo(e,r){let{from:n,to:s}=e.state.selection;if(!(e.state.selection instanceof We)||n<r||s>r+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let o=i.nodeValue,a=_xe(this.node.content,o,n-r,s-r);return a<0?null:{node:i,pos:a,text:o}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:r,pos:n,text:s}){if(this.getDesc(r))return;let i=r;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let o=new gxe(this,i,r,s);e.input.compositionNodes.push(o),this.children=hR(this.children,n,n+s.length,e,o)}update(e,r,n,s){return this.dirty==no||!e.sameMarkup(this.node)?!1:(this.updateInner(e,r,n,s),!0)}updateInner(e,r,n,s){this.updateOuterDeco(r),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=Zs}updateOuterDeco(e){if(Wv(e,this.outerDeco))return;let r=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=Zse(this.dom,this.nodeDOM,dR(this.outerDeco,this.node,r),dR(e,this.node,r)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function L3(t,e,r,n,s){eie(n,e,t);let i=new dl(void 0,t,e,r,n,n,n,s,0);return i.contentDOM&&i.updateChildren(s,0),i}class Tb extends dl{constructor(e,r,n,s,i,o,a){super(e,r,n,s,i,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,r,n,s){return this.dirty==no||this.dirty!=Zs&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(r),(this.dirty!=Zs||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=Zs,!0)}inParent(){let e=this.parent.contentDOM;for(let r=this.nodeDOM;r;r=r.parentNode)if(r==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,r,n){return e==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):super.localPosFromDOM(e,r,n)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,r,n){let s=this.node.cut(e,r),i=document.createTextNode(s.text);return new Tb(this.parent,s,this.outerDeco,this.innerDeco,i,i,n)}markDirty(e,r){super.markDirty(e,r),this.dom!=this.nodeDOM&&(e==0||r==this.nodeDOM.nodeValue.length)&&(this.dirty=no)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Xse extends Wm{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Zs&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class yxe extends dl{constructor(e,r,n,s,i,o,a,l,u,d){super(e,r,n,s,i,o,a,u,d),this.spec=l}update(e,r,n,s){if(this.dirty==no)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,r,n);return i&&this.updateInner(e,r,n,s),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,r,n,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,r,n,s){this.spec.setSelection?this.spec.setSelection(e,r,n.root):super.setSelection(e,r,n,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Jse(t,e,r){let n=t.firstChild,s=!1;for(let i=0;i<e.length;i++){let o=e[i],a=o.dom;if(a.parentNode==t){for(;a!=n;)n=B3(n),s=!0;n=n.nextSibling}else s=!0,t.insertBefore(a,n);if(o instanceof Zc){let l=n?n.previousSibling:t.lastChild;Jse(o.contentDOM,o.children,r),n=l?l.nextSibling:t.firstChild}}for(;n;)n=B3(n),s=!0;s&&r.trackWrites==t&&(r.trackWrites=null)}const up=function(t){t&&(this.nodeName=t)};up.prototype=Object.create(null);const ac=[new up];function dR(t,e,r){if(t.length==0)return ac;let n=r?ac[0]:new up,s=[n];for(let i=0;i<t.length;i++){let o=t[i].type.attrs;if(o){o.nodeName&&s.push(n=new up(o.nodeName));for(let a in o){let l=o[a];l!=null&&(r&&s.length==1&&s.push(n=new up(e.isInline?"span":"div")),a=="class"?n.class=(n.class?n.class+" ":"")+l:a=="style"?n.style=(n.style?n.style+";":"")+l:a!="nodeName"&&(n[a]=l))}}}return s}function Zse(t,e,r,n){if(r==ac&&n==ac)return e;let s=e;for(let i=0;i<n.length;i++){let o=n[i],a=r[i];if(i){let l;a&&a.nodeName==o.nodeName&&s!=t&&(l=s.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(s),a=ac[0]),s=l}vxe(s,a||ac[0],o)}return s}function vxe(t,e,r){for(let n in e)n!="class"&&n!="style"&&n!="nodeName"&&!(n in r)&&t.removeAttribute(n);for(let n in r)n!="class"&&n!="style"&&n!="nodeName"&&r[n]!=e[n]&&t.setAttribute(n,r[n]);if(e.class!=r.class){let n=e.class?e.class.split(" ").filter(Boolean):[],s=r.class?r.class.split(" ").filter(Boolean):[];for(let i=0;i<n.length;i++)s.indexOf(n[i])==-1&&t.classList.remove(n[i]);for(let i=0;i<s.length;i++)n.indexOf(s[i])==-1&&t.classList.add(s[i]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=r.style){if(e.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=n.exec(e.style);)t.style.removeProperty(s[1])}r.style&&(t.style.cssText+=r.style)}}function eie(t,e,r){return Zse(t,t,ac,dR(e,r,t.nodeType!=1))}function Wv(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].type.eq(e[r].type))return!1;return!0}function B3(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class bxe{constructor(e,r,n){this.lock=r,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=xxe(e.node.content,e)}destroyBetween(e,r){if(e!=r){for(let n=e;n<r;n++)this.top.children[n].destroy();this.top.children.splice(e,r-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,r,n){let s=0,i=this.stack.length>>1,o=Math.min(i,e.length);for(;s<o&&(s==i-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<i;)this.destroyRest(),this.top.dirty=Zs,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let u=this.top.children[l];if(u.matchesMark(e[i])&&!this.isLocked(u.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Zc.create(this.top,e[i],r,n);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,i++}}findNodeMatch(e,r,n,s){let i=-1,o;if(s>=this.preMatch.index&&(o=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&o.matchesNode(e,r,n))i=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let u=this.top.children[a];if(u.matchesNode(e,r,n)&&!this.preMatch.matched.has(u)){i=a;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,r,n,s,i){let o=this.top.children[s];return o.dirty==no&&o.dom==o.contentDOM&&(o.dirty=oc),o.update(e,r,n,i)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let r=e.parentNode;if(!r)return-1;if(r==this.top.contentDOM){let n=e.pmViewDesc;if(n){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==n)return s}return-1}e=r}}updateNextNode(e,r,n,s,i,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof dl){let u=this.preMatch.matched.get(l);if(u!=null&&u!=i)return!1;let d=l.dom,h,f=this.isLocked(d)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=no&&Wv(r,l.outerDeco));if(!f&&l.update(e,r,n,s))return this.destroyBetween(this.index,a),l.dom!=d&&(this.changed=!0),this.index++,!0;if(!f&&(h=this.recreateWrapper(l,e,r,n,s,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=h,h.contentDOM&&(h.dirty=oc,h.updateChildren(s,o+1),h.dirty=Zs),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,r,n,s,i,o){if(e.dirty||r.isAtom||!e.children.length||!e.node.content.eq(r.content)||!Wv(n,e.outerDeco)||!s.eq(e.innerDeco))return null;let a=dl.create(this.top,r,n,s,i,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,r,n,s,i){let o=dl.create(this.top,e,r,n,s,i);o.contentDOM&&o.updateChildren(s,i+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,r,n){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let i=new Qse(this.top,e,r,n);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],r=this.top;for(;e instanceof Zc;)r=e,e=r.children[r.children.length-1];(!e||!(e instanceof Tb)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((jn||Kr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",r),this.addHackNode("BR",this.top))}addHackNode(e,r){if(r==this.top&&this.index<r.children.length&&r.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);e=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),e=="BR"&&(n.className="ProseMirror-trailingBreak");let s=new Xse(this.top,[],n,null);r!=this.top?r.children.push(s):r.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function xxe(t,e){let r=e,n=r.children.length,s=t.childCount,i=new Map,o=[];e:for(;s>0;){let a;for(;;)if(n){let u=r.children[n-1];if(u instanceof Zc)r=u,n=u.children.length;else{a=u,n--;break}}else{if(r==e)break e;n=r.parent.children.indexOf(r),r=r.parent}let l=a.node;if(l){if(l!=t.child(s-1))break;--s,i.set(a,s),o.push(a)}}return{index:s,matched:i,matches:o.reverse()}}function wxe(t,e){return t.type.side-e.type.side}function Sxe(t,e,r,n){let s=e.locals(t),i=0;if(s.length==0){for(let u=0;u<t.childCount;u++){let d=t.child(u);n(d,s,e.forChild(i,d),u),i+=d.nodeSize}return}let o=0,a=[],l=null;for(let u=0;;){let d,h;for(;o<s.length&&s[o].to==i;){let y=s[o++];y.widget&&(d?(h||(h=[d])).push(y):d=y)}if(d)if(h){h.sort(wxe);for(let y=0;y<h.length;y++)r(h[y],u,!!l)}else r(d,u,!!l);let f,p;if(l)p=-1,f=l,l=null;else if(u<t.childCount)p=u,f=t.child(u++);else break;for(let y=0;y<a.length;y++)a[y].to<=i&&a.splice(y--,1);for(;o<s.length&&s[o].from<=i&&s[o].to>i;)a.push(s[o++]);let m=i+f.nodeSize;if(f.isText){let y=m;o<s.length&&s[o].from<y&&(y=s[o].from);for(let v=0;v<a.length;v++)a[v].to<y&&(y=a[v].to);y<m&&(l=f.cut(y-i),f=f.cut(0,y-i),m=y,p=-1)}else for(;o<s.length&&s[o].to<m;)o++;let g=f.isInline&&!f.isLeaf?a.filter(y=>!y.inline):a.slice();n(f,g,e.forChild(i,f),p),i=m}}function Exe(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function _xe(t,e,r,n){for(let s=0,i=0;s<t.childCount&&i<=n;){let o=t.child(s++),a=i;if(i+=o.nodeSize,!o.isText)continue;let l=o.text;for(;s<t.childCount;){let u=t.child(s++);if(i+=u.nodeSize,!u.isText)break;l+=u.text}if(i>=r){if(i>=n&&l.slice(n-e.length-a,n-a)==e)return n-e.length;let u=a<n?l.lastIndexOf(e,n-a-1):-1;if(u>=0&&u+e.length+a>=r)return a+u;if(r==n&&l.length>=n+e.length-a&&l.slice(n-a,n-a+e.length)==e)return n}}return-1}function hR(t,e,r,n,s){let i=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],u=a,d=a+=l.size;u>=r||d<=e?i.push(l):(u<e&&i.push(l.slice(0,e-u,n)),s&&(i.push(s),s=void 0),d>r&&i.push(l.slice(r-u,l.size,n)))}return i}function DA(t,e=null){let r=t.domSelectionRange(),n=t.state.doc;if(!r.focusNode)return null;let s=t.docView.nearestDesc(r.focusNode),i=s&&s.size==0,o=t.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(o<0)return null;let a=n.resolve(o),l,u;if(jb(r)){for(l=o;s&&!s.node;)s=s.parent;let h=s.node;if(s&&h.isAtom&&Ae.isSelectable(h)&&s.parent&&!(h.isInline&&Xbe(r.focusNode,r.focusOffset,s.dom))){let f=s.posBefore;u=new Ae(o==f?a:n.resolve(f))}}else{if(r instanceof t.dom.ownerDocument.defaultView.Selection&&r.rangeCount>1){let h=o,f=o;for(let p=0;p<r.rangeCount;p++){let m=r.getRangeAt(p);h=Math.min(h,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(h<0)return null;[l,o]=f==t.state.selection.anchor?[f,h]:[h,f],a=n.resolve(o)}else l=t.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(l<0)return null}let d=n.resolve(l);if(!u){let h=e=="pointer"||t.state.selection.head<a.pos&&!i?1:-1;u=$A(t,d,a,h)}return u}function tie(t){return t.editable?t.hasFocus():nie(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function qo(t,e=!1){let r=t.state.selection;if(rie(t,r),!!tie(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Kr){let n=t.domSelectionRange(),s=t.domObserver.currentSelection;if(n.anchorNode&&s.anchorNode&&Jc(n.anchorNode,n.anchorOffset,s.anchorNode,s.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)Cxe(t);else{let{anchor:n,head:s}=r,i,o;z3&&!(r instanceof We)&&(r.$from.parent.inlineContent||(i=W3(t,r.from)),!r.empty&&!r.$from.parent.inlineContent&&(o=W3(t,r.to))),t.docView.setSelection(n,s,t,e),z3&&(i&&V3(i),o&&V3(o)),r.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Nxe(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const z3=jn||Kr&&zse<63;function W3(t,e){let{node:r,offset:n}=t.docView.domFromPos(e,0),s=n<r.childNodes.length?r.childNodes[n]:null,i=n?r.childNodes[n-1]:null;if(jn&&s&&s.contentEditable=="false")return T1(s);if((!s||s.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(s)return T1(s);if(i)return T1(i)}}function T1(t){return t.contentEditable="true",jn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function V3(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function Nxe(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let r=t.domSelectionRange(),n=r.anchorNode,s=r.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(r.anchorNode!=n||r.anchorOffset!=s)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!tie(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function Cxe(t){let e=t.domSelection();if(!e)return;let r=t.cursorWrapper.dom,n=r.nodeName=="IMG";n?e.collapse(r.parentNode,un(r)+1):e.collapse(r,0),!n&&!t.state.selection.visible&&fs&&ul<=11&&(r.disabled=!0,r.disabled=!1)}function rie(t,e){if(e instanceof Ae){let r=t.docView.descAt(e.from);r!=t.lastSelectedViewDesc&&(U3(t),r&&r.selectNode(),t.lastSelectedViewDesc=r)}else U3(t)}function U3(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function $A(t,e,r,n){return t.someProp("createSelectionBetween",s=>s(t,e,r))||We.between(e,r,n)}function H3(t){return t.editable&&!t.hasFocus()?!1:nie(t)}function nie(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function kxe(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),r=t.domSelectionRange();return Jc(e.node,e.offset,r.anchorNode,r.anchorOffset)}function fR(t,e){let{$anchor:r,$head:n}=t.selection,s=e>0?r.max(n):r.min(n),i=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return i&&Ze.findFrom(i,e)}function Na(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function K3(t,e,r){let n=t.state.selection;if(n instanceof We)if(r.indexOf("s")>-1){let{$head:s}=n,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let o=t.state.doc.resolve(s.pos+i.nodeSize*(e<0?-1:1));return Na(t,new We(n.$anchor,o))}else if(n.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let s=fR(t.state,e);return s&&s instanceof Ae?Na(t,s):!1}else if(!(zs&&r.indexOf("m")>-1)){let s=n.$head,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,o;if(!i||i.isText)return!1;let a=e<0?s.pos-i.nodeSize:s.pos;return i.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?Ae.isSelectable(i)?Na(t,new Ae(e<0?t.state.doc.resolve(s.pos-i.nodeSize):s)):zm?Na(t,new We(t.state.doc.resolve(e<0?a:a+i.nodeSize))):!1:!1}}else return!1;else{if(n instanceof Ae&&n.node.isInline)return Na(t,new We(e>0?n.$to:n.$from));{let s=fR(t.state,e);return s?Na(t,s):!1}}}function Vv(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function dp(t,e){let r=t.pmViewDesc;return r&&r.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Vu(t,e){return e<0?jxe(t):Txe(t)}function jxe(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let s,i,o=!1;for(Js&&r.nodeType==1&&n<Vv(r)&&dp(r.childNodes[n],-1)&&(o=!0);;)if(n>0){if(r.nodeType!=1)break;{let a=r.childNodes[n-1];if(dp(a,-1))s=r,i=--n;else if(a.nodeType==3)r=a,n=r.nodeValue.length;else break}}else{if(sie(r))break;{let a=r.previousSibling;for(;a&&dp(a,-1);)s=r.parentNode,i=un(a),a=a.previousSibling;if(a)r=a,n=Vv(r);else{if(r=r.parentNode,r==t.dom)break;n=0}}}o?pR(t,r,n):s&&pR(t,s,i)}function Txe(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let s=Vv(r),i,o;for(;;)if(n<s){if(r.nodeType!=1)break;let a=r.childNodes[n];if(dp(a,1))i=r,o=++n;else break}else{if(sie(r))break;{let a=r.nextSibling;for(;a&&dp(a,1);)i=a.parentNode,o=un(a)+1,a=a.nextSibling;if(a)r=a,n=0,s=Vv(r);else{if(r=r.parentNode,r==t.dom)break;n=s=0}}}i&&pR(t,i,o)}function sie(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Oxe(t,e){for(;t&&e==t.childNodes.length&&!Bm(t);)e=un(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let r=t.childNodes[e];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=0}}function Pxe(t,e){for(;t&&!e&&!Bm(t);)e=un(t),t=t.parentNode;for(;t&&e;){let r=t.childNodes[e-1];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=t.childNodes.length}}function pR(t,e,r){if(e.nodeType!=3){let i,o;(o=Oxe(e,r))?(e=o,r=0):(i=Pxe(e,r))&&(e=i,r=i.nodeValue.length)}let n=t.domSelection();if(!n)return;if(jb(n)){let i=document.createRange();i.setEnd(e,r),i.setStart(e,r),n.removeAllRanges(),n.addRange(i)}else n.extend&&n.extend(e,r);t.domObserver.setCurSelection();let{state:s}=t;setTimeout(()=>{t.state==s&&qo(t)},50)}function G3(t,e){let r=t.state.doc.resolve(e);if(!(Kr||Wse)&&r.parent.inlineContent){let s=t.coordsAtPos(e);if(e>r.start()){let i=t.coordsAtPos(e-1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left<s.left?"ltr":"rtl"}if(e<r.end()){let i=t.coordsAtPos(e+1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left>s.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function Y3(t,e,r){let n=t.state.selection;if(n instanceof We&&!n.empty||r.indexOf("s")>-1||zs&&r.indexOf("m")>-1)return!1;let{$from:s,$to:i}=n;if(!s.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=fR(t.state,e);if(o&&o instanceof Ae)return Na(t,o)}if(!s.parent.inlineContent){let o=e<0?s:i,a=n instanceof ks?Ze.near(o,e):Ze.findFrom(o,e);return a?Na(t,a):!1}return!1}function Q3(t,e){if(!(t.state.selection instanceof We))return!0;let{$head:r,$anchor:n,empty:s}=t.state.selection;if(!r.sameParent(n))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!r.textOffset&&(e<0?r.nodeBefore:r.nodeAfter);if(i&&!i.isText){let o=t.state.tr;return e<0?o.delete(r.pos-i.nodeSize,r.pos):o.delete(r.pos,r.pos+i.nodeSize),t.dispatch(o),!0}return!1}function X3(t,e,r){t.domObserver.stop(),e.contentEditable=r,t.domObserver.start()}function Ixe(t){if(!jn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(e&&e.nodeType==1&&r==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let n=e.firstChild;X3(t,n,"true"),setTimeout(()=>X3(t,n,"false"),20)}return!1}function Rxe(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function Mxe(t,e){let r=e.keyCode,n=Rxe(e);if(r==8||zs&&r==72&&n=="c")return Q3(t,-1)||Vu(t,-1);if(r==46&&!e.shiftKey||zs&&r==68&&n=="c")return Q3(t,1)||Vu(t,1);if(r==13||r==27)return!0;if(r==37||zs&&r==66&&n=="c"){let s=r==37?G3(t,t.state.selection.from)=="ltr"?-1:1:-1;return K3(t,s,n)||Vu(t,s)}else if(r==39||zs&&r==70&&n=="c"){let s=r==39?G3(t,t.state.selection.from)=="ltr"?1:-1:1;return K3(t,s,n)||Vu(t,s)}else{if(r==38||zs&&r==80&&n=="c")return Y3(t,-1,n)||Vu(t,-1);if(r==40||zs&&r==78&&n=="c")return Ixe(t)||Y3(t,1,n)||Vu(t,1);if(n==(zs?"m":"c")&&(r==66||r==73||r==89||r==90))return!0}return!1}function FA(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let r=[],{content:n,openStart:s,openEnd:i}=e;for(;s>1&&i>1&&n.childCount==1&&n.firstChild.childCount==1;){s--,i--;let p=n.firstChild;r.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),n=p.content}let o=t.someProp("clipboardSerializer")||fu.fromSchema(t.state.schema),a=uie(),l=a.createElement("div");l.appendChild(o.serializeFragment(n,{document:a}));let u=l.firstChild,d,h=0;for(;u&&u.nodeType==1&&(d=cie[u.nodeName.toLowerCase()]);){for(let p=d.length-1;p>=0;p--){let m=a.createElement(d[p]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),h++}u=l.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${s} ${i}${h?` -${h}`:""} ${JSON.stringify(r)}`);let f=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f,slice:e}}function iie(t,e,r,n,s){let i=s.parent.type.spec.code,o,a;if(!r&&!e)return null;let l=!!e&&(n||i||!r);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,i||n,t)}),i)return a=new we(J.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",f=>{a=f(a,t,!0)}),a;let h=t.someProp("clipboardTextParser",f=>f(e,s,n,t));if(h)a=h;else{let f=s.marks(),{schema:p}=t.state,m=fu.fromSchema(p);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let y=o.appendChild(document.createElement("p"));g&&y.appendChild(m.serializeNode(p.text(g,f)))})}}else t.someProp("transformPastedHTML",h=>{r=h(r,t)}),o=Fxe(r),zm&&qxe(o);let u=o&&o.querySelector("[data-pm-slice]"),d=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let h=+d[3];h>0;h--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||cl.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||d),context:s,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!Axe.test(f.parentNode.nodeName)?{ignore:!0}:null}})),d)a=Lxe(J3(a,+d[1],+d[2]),d[4]);else if(a=we.maxOpen(Dxe(a.content,s),!0),a.openStart||a.openEnd){let h=0,f=0;for(let p=a.content.firstChild;h<a.openStart&&!p.type.spec.isolating;h++,p=p.firstChild);for(let p=a.content.lastChild;f<a.openEnd&&!p.type.spec.isolating;f++,p=p.lastChild);a=J3(a,h,f)}return t.someProp("transformPasted",h=>{a=h(a,t,l)}),a}const Axe=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Dxe(t,e){if(t.childCount<2)return t;for(let r=e.depth;r>=0;r--){let s=e.node(r).contentMatchAt(e.index(r)),i,o=[];if(t.forEach(a=>{if(!o)return;let l=s.findWrapping(a.type),u;if(!l)return o=null;if(u=o.length&&i.length&&aie(l,i,a,o[o.length-1],0))o[o.length-1]=u;else{o.length&&(o[o.length-1]=lie(o[o.length-1],i.length));let d=oie(a,l);o.push(d),s=s.matchType(d.type),i=l}}),o)return J.from(o)}return t}function oie(t,e,r=0){for(let n=e.length-1;n>=r;n--)t=e[n].create(null,J.from(t));return t}function aie(t,e,r,n,s){if(s<t.length&&s<e.length&&t[s]==e[s]){let i=aie(t,e,r,n.lastChild,s+1);if(i)return n.copy(n.content.replaceChild(n.childCount-1,i));if(n.contentMatchAt(n.childCount).matchType(s==t.length-1?r.type:t[s+1]))return n.copy(n.content.append(J.from(oie(r,t,s+1))))}}function lie(t,e){if(e==0)return t;let r=t.content.replaceChild(t.childCount-1,lie(t.lastChild,e-1)),n=t.contentMatchAt(t.childCount).fillBefore(J.empty,!0);return t.copy(r.append(n))}function mR(t,e,r,n,s,i){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(i=0),s<n-1&&(a=mR(a,e,r,n,s+1,i)),s>=r&&(a=e<0?o.contentMatchAt(0).fillBefore(a,i<=s).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(J.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function J3(t,e,r){return e<t.openStart&&(t=new we(mR(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),r<t.openEnd&&(t=new we(mR(t.content,1,r,t.openEnd,0,0),t.openStart,r)),t}const cie={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Z3=null;function uie(){return Z3||(Z3=document.implementation.createHTMLDocument("title"))}let O1=null;function $xe(t){let e=window.trustedTypes;return e?(O1||(O1=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:r=>r})),O1.createHTML(t)):t}function Fxe(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let r=uie().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(t),s;if((s=n&&cie[n[1].toLowerCase()])&&(t=s.map(i=>"<"+i+">").join("")+t+s.map(i=>"</"+i+">").reverse().join("")),r.innerHTML=$xe(t),s)for(let i=0;i<s.length;i++)r=r.querySelector(s[i])||r;return r}function qxe(t){let e=t.querySelectorAll(Kr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<e.length;r++){let n=e[r];n.childNodes.length==1&&n.textContent==""&&n.parentNode&&n.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),n)}}function Lxe(t,e){if(!t.size)return t;let r=t.content.firstChild.type.schema,n;try{n=JSON.parse(e)}catch{return t}let{content:s,openStart:i,openEnd:o}=t;for(let a=n.length-2;a>=0;a-=2){let l=r.nodes[n[a]];if(!l||l.hasRequiredAttrs())break;s=J.from(l.create(n[a+1],s)),i++,o++}return new we(s,i,o)}const zn={},Wn={},Bxe={touchstart:!0,touchmove:!0};class zxe{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Wxe(t){for(let e in zn){let r=zn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=n=>{Uxe(t,n)&&!qA(t,n)&&(t.editable||!(n.type in Wn))&&r(t,n)},Bxe[e]?{passive:!0}:void 0)}jn&&t.dom.addEventListener("input",()=>null),gR(t)}function Qa(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Vxe(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function gR(t){t.someProp("handleDOMEvents",e=>{for(let r in e)t.input.eventHandlers[r]||t.dom.addEventListener(r,t.input.eventHandlers[r]=n=>qA(t,n))})}function qA(t,e){return t.someProp("handleDOMEvents",r=>{let n=r[e.type];return n?n(t,e)||e.defaultPrevented:!1})}function Uxe(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r=e.target;r!=t.dom;r=r.parentNode)if(!r||r.nodeType==11||r.pmViewDesc&&r.pmViewDesc.stopEvent(e))return!1;return!0}function Hxe(t,e){!qA(t,e)&&zn[e.type]&&(t.editable||!(e.type in Wn))&&zn[e.type](t,e)}Wn.keydown=(t,e)=>{let r=e;if(t.input.shiftKey=r.keyCode==16||r.shiftKey,!hie(t,r)&&(t.input.lastKeyCode=r.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Mo&&Kr&&r.keyCode==13)))if(r.keyCode!=229&&t.domObserver.forceFlush(),hh&&r.keyCode==13&&!r.ctrlKey&&!r.altKey&&!r.metaKey){let n=Date.now();t.input.lastIOSEnter=n,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==n&&(t.someProp("handleKeyDown",s=>s(t,Jl(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",n=>n(t,r))||Mxe(t,r)?r.preventDefault():Qa(t,"key")};Wn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Wn.keypress=(t,e)=>{let r=e;if(hie(t,r)||!r.charCode||r.ctrlKey&&!r.altKey||zs&&r.metaKey)return;if(t.someProp("handleKeyPress",s=>s(t,r))){r.preventDefault();return}let n=t.state.selection;if(!(n instanceof We)||!n.$from.sameParent(n.$to)){let s=String.fromCharCode(r.charCode),i=()=>t.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!t.someProp("handleTextInput",o=>o(t,n.$from.pos,n.$to.pos,s,i))&&t.dispatch(i()),r.preventDefault()}};function Ob(t){return{left:t.clientX,top:t.clientY}}function Kxe(t,e){let r=e.x-t.clientX,n=e.y-t.clientY;return r*r+n*n<100}function LA(t,e,r,n,s){if(n==-1)return!1;let i=t.state.doc.resolve(n);for(let o=i.depth+1;o>0;o--)if(t.someProp(e,a=>o>i.depth?a(t,r,i.nodeAfter,i.before(o),s,!0):a(t,r,i.node(o),i.before(o),s,!1)))return!0;return!1}function Pd(t,e,r){if(t.focused||t.focus(),t.state.selection.eq(e))return;let n=t.state.tr.setSelection(e);n.setMeta("pointer",!0),t.dispatch(n)}function Gxe(t,e){if(e==-1)return!1;let r=t.state.doc.resolve(e),n=r.nodeAfter;return n&&n.isAtom&&Ae.isSelectable(n)?(Pd(t,new Ae(r)),!0):!1}function Yxe(t,e){if(e==-1)return!1;let r=t.state.selection,n,s;r instanceof Ae&&(n=r.node);let i=t.state.doc.resolve(e);for(let o=i.depth+1;o>0;o--){let a=o>i.depth?i.nodeAfter:i.node(o);if(Ae.isSelectable(a)){n&&r.$from.depth>0&&o>=r.$from.depth&&i.before(r.$from.depth+1)==r.$from.pos?s=i.before(r.$from.depth):s=i.before(o);break}}return s!=null?(Pd(t,Ae.create(t.state.doc,s)),!0):!1}function Qxe(t,e,r,n,s){return LA(t,"handleClickOn",e,r,n)||t.someProp("handleClick",i=>i(t,e,n))||(s?Yxe(t,r):Gxe(t,r))}function Xxe(t,e,r,n){return LA(t,"handleDoubleClickOn",e,r,n)||t.someProp("handleDoubleClick",s=>s(t,e,n))}function Jxe(t,e,r,n){return LA(t,"handleTripleClickOn",e,r,n)||t.someProp("handleTripleClick",s=>s(t,e,n))||Zxe(t,r,n)}function Zxe(t,e,r){if(r.button!=0)return!1;let n=t.state.doc;if(e==-1)return n.inlineContent?(Pd(t,We.create(n,0,n.content.size)),!0):!1;let s=n.resolve(e);for(let i=s.depth+1;i>0;i--){let o=i>s.depth?s.nodeAfter:s.node(i),a=s.before(i);if(o.inlineContent)Pd(t,We.create(n,a+1,a+1+o.content.size));else if(Ae.isSelectable(o))Pd(t,Ae.create(n,a));else continue;return!0}}function BA(t){return Uv(t)}const die=zs?"metaKey":"ctrlKey";zn.mousedown=(t,e)=>{let r=e;t.input.shiftKey=r.shiftKey;let n=BA(t),s=Date.now(),i="singleClick";s-t.input.lastClick.time<500&&Kxe(r,t.input.lastClick)&&!r[die]&&t.input.lastClick.button==r.button&&(t.input.lastClick.type=="singleClick"?i="doubleClick":t.input.lastClick.type=="doubleClick"&&(i="tripleClick")),t.input.lastClick={time:s,x:r.clientX,y:r.clientY,type:i,button:r.button};let o=t.posAtCoords(Ob(r));o&&(i=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new e1e(t,o,r,!!n)):(i=="doubleClick"?Xxe:Jxe)(t,o.pos,o.inside,r)?r.preventDefault():Qa(t,"pointer"))};class e1e{constructor(e,r,n,s){this.view=e,this.pos=r,this.event=n,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[die],this.allowDefault=n.shiftKey;let i,o;if(r.inside>-1)i=e.state.doc.nodeAt(r.inside),o=r.inside;else{let d=e.state.doc.resolve(r.pos);i=d.parent,o=d.depth?d.before():0}const a=s?null:n.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:u}=e.state;(n.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||u instanceof Ae&&u.from<=o&&u.to>o)&&(this.mightDrag={node:i,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Js&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Qa(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>qo(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let r=this.pos;this.view.state.doc!=this.startDoc&&(r=this.view.posAtCoords(Ob(e))),this.updateAllowDefault(e),this.allowDefault||!r?Qa(this.view,"pointer"):Qxe(this.view,r.pos,r.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||jn&&this.mightDrag&&!this.mightDrag.node.isAtom||Kr&&!this.view.state.selection.visible&&Math.min(Math.abs(r.pos-this.view.state.selection.from),Math.abs(r.pos-this.view.state.selection.to))<=2)?(Pd(this.view,Ze.near(this.view.state.doc.resolve(r.pos))),e.preventDefault()):Qa(this.view,"pointer")}move(e){this.updateAllowDefault(e),Qa(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}zn.touchstart=t=>{t.input.lastTouch=Date.now(),BA(t),Qa(t,"pointer")};zn.touchmove=t=>{t.input.lastTouch=Date.now(),Qa(t,"pointer")};zn.contextmenu=t=>BA(t);function hie(t,e){return t.composing?!0:jn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const t1e=Mo?5e3:-1;Wn.compositionstart=Wn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,r=e.selection.$to;if(e.selection instanceof We&&(e.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)||Kr&&Wse&&r1e(t)))t.markCursor=t.state.storedMarks||r.marks(),Uv(t,!0),t.markCursor=null;else if(Uv(t,!e.selection.empty),Js&&e.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let n=t.domSelectionRange();for(let s=n.focusNode,i=n.focusOffset;s&&s.nodeType==1&&i!=0;){let o=i<0?s.lastChild:s.childNodes[i-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else s=o,i=-1}}t.input.composing=!0}fie(t,t1e)};function r1e(t){let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(!e||e.nodeType!=1||r>=e.childNodes.length)return!1;let n=e.childNodes[r];return n.nodeType==1&&n.contentEditable=="false"}Wn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,fie(t,20))};function fie(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Uv(t),e))}function pie(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=s1e());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function n1e(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let r=Ybe(e.focusNode,e.focusOffset),n=Qbe(e.focusNode,e.focusOffset);if(r&&n&&r!=n){let s=n.pmViewDesc,i=t.domObserver.lastChangedTextNode;if(r==i||n==i)return i;if(!s||!s.isText(n.nodeValue))return n;if(t.input.compositionNode==n){let o=r.pmViewDesc;if(!(!o||!o.isText(r.nodeValue)))return n}}return r||n}function s1e(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Uv(t,e=!1){if(!(Mo&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),pie(t),e||t.docView&&t.docView.dirty){let r=DA(t),n=t.state.selection;return r&&!r.eq(n)?t.dispatch(t.state.tr.setSelection(r)):(t.markCursor||e)&&!n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function i1e(t,e){if(!t.dom.parentNode)return;let r=t.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(e),r.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),s=document.createRange();s.selectNodeContents(e),t.dom.blur(),n.removeAllRanges(),n.addRange(s),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),t.focus()},50)}const Zp=fs&&ul<15||hh&&exe<604;zn.copy=Wn.cut=(t,e)=>{let r=e,n=t.state.selection,s=r.type=="cut";if(n.empty)return;let i=Zp?null:r.clipboardData,o=n.content(),{dom:a,text:l}=FA(t,o);i?(r.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",l)):i1e(t,a),s&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function o1e(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function a1e(t,e){if(!t.dom.parentNode)return;let r=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,n=t.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let s=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),n.parentNode&&n.parentNode.removeChild(n),r?em(t,n.value,null,s,e):em(t,n.textContent,n.innerHTML,s,e)},50)}function em(t,e,r,n,s){let i=iie(t,e,r,n,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,s,i||we.empty)))return!0;if(!i)return!1;let o=o1e(i),a=o?t.state.tr.replaceSelectionWith(o,n):t.state.tr.replaceSelection(i);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function mie(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let r=t.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}Wn.paste=(t,e)=>{let r=e;if(t.composing&&!Mo)return;let n=Zp?null:r.clipboardData,s=t.input.shiftKey&&t.input.lastKeyCode!=45;n&&em(t,mie(n),n.getData("text/html"),s,r)?r.preventDefault():a1e(t,r)};class gie{constructor(e,r,n){this.slice=e,this.move=r,this.node=n}}const l1e=zs?"altKey":"ctrlKey";function yie(t,e){let r=t.someProp("dragCopies",n=>!n(e));return r??!e[l1e]}zn.dragstart=(t,e)=>{let r=e,n=t.input.mouseDown;if(n&&n.done(),!r.dataTransfer)return;let s=t.state.selection,i=s.empty?null:t.posAtCoords(Ob(r)),o;if(!(i&&i.pos>=s.from&&i.pos<=(s instanceof Ae?s.to-1:s.to))){if(n&&n.mightDrag)o=Ae.create(t.state.doc,n.mightDrag.pos);else if(r.target&&r.target.nodeType==1){let h=t.docView.nearestDesc(r.target,!0);h&&h.node.type.spec.draggable&&h!=t.docView&&(o=Ae.create(t.state.doc,h.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:u,slice:d}=FA(t,a);(!r.dataTransfer.files.length||!Kr||zse>120)&&r.dataTransfer.clearData(),r.dataTransfer.setData(Zp?"Text":"text/html",l.innerHTML),r.dataTransfer.effectAllowed="copyMove",Zp||r.dataTransfer.setData("text/plain",u),t.dragging=new gie(d,yie(t,r),o)};zn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Wn.dragover=Wn.dragenter=(t,e)=>e.preventDefault();Wn.drop=(t,e)=>{try{c1e(t,e,t.dragging)}finally{t.dragging=null}};function c1e(t,e,r){if(!e.dataTransfer)return;let n=t.posAtCoords(Ob(e));if(!n)return;let s=t.state.doc.resolve(n.pos),i=r&&r.slice;i?t.someProp("transformPasted",p=>{i=p(i,t,!1)}):i=iie(t,mie(e.dataTransfer),Zp?null:e.dataTransfer.getData("text/html"),!1,s);let o=!!(r&&yie(t,e));if(t.someProp("handleDrop",p=>p(t,e,i||we.empty,o))){e.preventDefault();return}if(!i)return;e.preventDefault();let a=i?wse(t.state.doc,s.pos,i):s.pos;a==null&&(a=s.pos);let l=t.state.tr;if(o){let{node:p}=r;p?p.replace(l):l.deleteSelection()}let u=l.mapping.map(a),d=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,h=l.doc;if(d?l.replaceRangeWith(u,u,i.content.firstChild):l.replaceRange(u,u,i),l.doc.eq(h))return;let f=l.doc.resolve(u);if(d&&Ae.isSelectable(i.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(i.content.firstChild))l.setSelection(new Ae(f));else{let p=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((m,g,y,v)=>p=v),l.setSelection($A(t,f,l.doc.resolve(p)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}zn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&qo(t)},20))};zn.blur=(t,e)=>{let r=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),r.relatedTarget&&t.dom.contains(r.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};zn.beforeinput=(t,e)=>{if(Kr&&Mo&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:n}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=n||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",i=>i(t,Jl(8,"Backspace")))))return;let{$cursor:s}=t.state.selection;s&&s.pos>0&&t.dispatch(t.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let t in Wn)zn[t]=Wn[t];function tm(t,e){if(t==e)return!0;for(let r in t)if(t[r]!==e[r])return!1;for(let r in e)if(!(r in t))return!1;return!0}class Hv{constructor(e,r){this.toDOM=e,this.spec=r||jc,this.side=this.spec.side||0}map(e,r,n,s){let{pos:i,deleted:o}=e.mapResult(r.from+s,this.side<0?-1:1);return o?null:new Ln(i-n,i-n,this)}valid(){return!0}eq(e){return this==e||e instanceof Hv&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&tm(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class hl{constructor(e,r){this.attrs=e,this.spec=r||jc}map(e,r,n,s){let i=e.map(r.from+s,this.spec.inclusiveStart?-1:1)-n,o=e.map(r.to+s,this.spec.inclusiveEnd?1:-1)-n;return i>=o?null:new Ln(i,o,this)}valid(e,r){return r.from<r.to}eq(e){return this==e||e instanceof hl&&tm(this.attrs,e.attrs)&&tm(this.spec,e.spec)}static is(e){return e.type instanceof hl}destroy(){}}class zA{constructor(e,r){this.attrs=e,this.spec=r||jc}map(e,r,n,s){let i=e.mapResult(r.from+s,1);if(i.deleted)return null;let o=e.mapResult(r.to+s,-1);return o.deleted||o.pos<=i.pos?null:new Ln(i.pos-n,o.pos-n,this)}valid(e,r){let{index:n,offset:s}=e.content.findIndex(r.from),i;return s==r.from&&!(i=e.child(n)).isText&&s+i.nodeSize==r.to}eq(e){return this==e||e instanceof zA&&tm(this.attrs,e.attrs)&&tm(this.spec,e.spec)}destroy(){}}class Ln{constructor(e,r,n){this.from=e,this.to=r,this.type=n}copy(e,r){return new Ln(e,r,this.type)}eq(e,r=0){return this.type.eq(e.type)&&this.from+r==e.from&&this.to+r==e.to}map(e,r,n){return this.type.map(e,this,r,n)}static widget(e,r,n){return new Ln(e,e,new Hv(r,n))}static inline(e,r,n,s){return new Ln(e,r,new hl(n,s))}static node(e,r,n,s){return new Ln(e,r,new zA(n,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof hl}get widget(){return this.type instanceof Hv}}const Ju=[],jc={};class Qt{constructor(e,r){this.local=e.length?e:Ju,this.children=r.length?r:Ju}static create(e,r){return r.length?Kv(r,e,0,jc):Sn}find(e,r,n){let s=[];return this.findInner(e??0,r??1e9,s,0,n),s}findInner(e,r,n,s,i){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=r&&a.to>=e&&(!i||i(a.spec))&&n.push(a.copy(a.from+s,a.to+s))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<r&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,r-a,n,s+a,i)}}map(e,r,n){return this==Sn||e.maps.length==0?this:this.mapInner(e,r,0,0,n||jc)}mapInner(e,r,n,s,i){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,n,s);l&&l.type.valid(r,l)?(o||(o=[])).push(l):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?u1e(this.children,o||[],e,r,n,s,i):o?new Qt(o.sort(Tc),Ju):Sn}add(e,r){return r.length?this==Sn?Qt.create(e,r):this.addInner(e,r,0):this}addInner(e,r,n){let s,i=0;e.forEach((a,l)=>{let u=l+n,d;if(d=bie(r,a,u)){for(s||(s=this.children.slice());i<s.length&&s[i]<l;)i+=3;s[i]==l?s[i+2]=s[i+2].addInner(a,d,u+1):s.splice(i,0,l,l+a.nodeSize,Kv(d,a,u+1,jc)),i+=3}});let o=vie(i?xie(r):r,-n);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new Qt(o.length?this.local.concat(o).sort(Tc):this.local,s||this.children)}remove(e){return e.length==0||this==Sn?this:this.removeInner(e,0)}removeInner(e,r){let n=this.children,s=this.local;for(let i=0;i<n.length;i+=3){let o,a=n[i]+r,l=n[i+1]+r;for(let d=0,h;d<e.length;d++)(h=e[d])&&h.from>a&&h.to<l&&(e[d]=null,(o||(o=[])).push(h));if(!o)continue;n==this.children&&(n=this.children.slice());let u=n[i+2].removeInner(o,a+1);u!=Sn?n[i+2]=u:(n.splice(i,3),i-=3)}if(s.length){for(let i=0,o;i<e.length;i++)if(o=e[i])for(let a=0;a<s.length;a++)s[a].eq(o,r)&&(s==this.local&&(s=this.local.slice()),s.splice(a--,1))}return n==this.children&&s==this.local?this:s.length||n.length?new Qt(s,n):Sn}forChild(e,r){if(this==Sn)return this;if(r.isLeaf)return Qt.empty;let n,s;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(n=this.children[a+2]);break}let i=e+1,o=i+r.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>i&&l.type instanceof hl){let u=Math.max(i,l.from)-i,d=Math.min(o,l.to)-i;u<d&&(s||(s=[])).push(l.copy(u,d))}}if(s){let a=new Qt(s.sort(Tc),Ju);return n?new Ia([a,n]):a}return n||Sn}eq(e){if(this==e)return!0;if(!(e instanceof Qt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let r=0;r<this.local.length;r++)if(!this.local[r].eq(e.local[r]))return!1;for(let r=0;r<this.children.length;r+=3)if(this.children[r]!=e.children[r]||this.children[r+1]!=e.children[r+1]||!this.children[r+2].eq(e.children[r+2]))return!1;return!0}locals(e){return WA(this.localsInner(e))}localsInner(e){if(this==Sn)return Ju;if(e.inlineContent||!this.local.some(hl.is))return this.local;let r=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof hl||r.push(this.local[n]);return r}forEachSet(e){e(this)}}Qt.empty=new Qt([],[]);Qt.removeOverlap=WA;const Sn=Qt.empty;class Ia{constructor(e){this.members=e}map(e,r){const n=this.members.map(s=>s.map(e,r,jc));return Ia.from(n)}forChild(e,r){if(r.isLeaf)return Qt.empty;let n=[];for(let s=0;s<this.members.length;s++){let i=this.members[s].forChild(e,r);i!=Sn&&(i instanceof Ia?n=n.concat(i.members):n.push(i))}return Ia.from(n)}eq(e){if(!(e instanceof Ia)||e.members.length!=this.members.length)return!1;for(let r=0;r<this.members.length;r++)if(!this.members[r].eq(e.members[r]))return!1;return!0}locals(e){let r,n=!0;for(let s=0;s<this.members.length;s++){let i=this.members[s].localsInner(e);if(i.length)if(!r)r=i;else{n&&(r=r.slice(),n=!1);for(let o=0;o<i.length;o++)r.push(i[o])}}return r?WA(n?r:r.sort(Tc)):Ju}static from(e){switch(e.length){case 0:return Sn;case 1:return e[0];default:return new Ia(e.every(r=>r instanceof Qt)?e:e.reduce((r,n)=>r.concat(n instanceof Qt?n:n.members),[]))}}forEachSet(e){for(let r=0;r<this.members.length;r++)this.members[r].forEachSet(e)}}function u1e(t,e,r,n,s,i,o){let a=t.slice();for(let u=0,d=i;u<r.maps.length;u++){let h=0;r.maps[u].forEach((f,p,m,g)=>{let y=g-m-(p-f);for(let v=0;v<a.length;v+=3){let b=a[v+1];if(b<0||f>b+d-h)continue;let w=a[v]+d-h;p>=w?a[v+1]=f<=w?-2:-1:f>=d&&y&&(a[v]+=y,a[v+1]+=y)}h+=y}),d=r.maps[u].map(d,-1)}let l=!1;for(let u=0;u<a.length;u+=3)if(a[u+1]<0){if(a[u+1]==-2){l=!0,a[u+1]=-1;continue}let d=r.map(t[u]+i),h=d-s;if(h<0||h>=n.content.size){l=!0;continue}let f=r.map(t[u+1]+i,-1),p=f-s,{index:m,offset:g}=n.content.findIndex(h),y=n.maybeChild(m);if(y&&g==h&&g+y.nodeSize==p){let v=a[u+2].mapInner(r,y,d+1,t[u]+i+1,o);v!=Sn?(a[u]=h,a[u+1]=p,a[u+2]=v):(a[u+1]=-2,l=!0)}else l=!0}if(l){let u=d1e(a,t,e,r,s,i,o),d=Kv(u,n,0,o);e=d.local;for(let h=0;h<a.length;h+=3)a[h+1]<0&&(a.splice(h,3),h-=3);for(let h=0,f=0;h<d.children.length;h+=3){let p=d.children[h];for(;f<a.length&&a[f]<p;)f+=3;a.splice(f,0,d.children[h],d.children[h+1],d.children[h+2])}}return new Qt(e.sort(Tc),a)}function vie(t,e){if(!e||!t.length)return t;let r=[];for(let n=0;n<t.length;n++){let s=t[n];r.push(new Ln(s.from+e,s.to+e,s.type))}return r}function d1e(t,e,r,n,s,i,o){function a(l,u){for(let d=0;d<l.local.length;d++){let h=l.local[d].map(n,s,u);h?r.push(h):o.onRemove&&o.onRemove(l.local[d].spec)}for(let d=0;d<l.children.length;d+=3)a(l.children[d+2],l.children[d]+u+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+i+1);return r}function bie(t,e,r){if(e.isLeaf)return null;let n=r+e.nodeSize,s=null;for(let i=0,o;i<t.length;i++)(o=t[i])&&o.from>r&&o.to<n&&((s||(s=[])).push(o),t[i]=null);return s}function xie(t){let e=[];for(let r=0;r<t.length;r++)t[r]!=null&&e.push(t[r]);return e}function Kv(t,e,r,n){let s=[],i=!1;e.forEach((a,l)=>{let u=bie(t,a,l+r);if(u){i=!0;let d=Kv(u,a,r+l+1,n);d!=Sn&&s.push(l,l+a.nodeSize,d)}});let o=vie(i?xie(t):t,-r).sort(Tc);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(n.onRemove&&n.onRemove(o[a].spec),o.splice(a--,1));return o.length||s.length?new Qt(o,s):Sn}function Tc(t,e){return t.from-e.from||t.to-e.to}function WA(t){let e=t;for(let r=0;r<e.length-1;r++){let n=e[r];if(n.from!=n.to)for(let s=r+1;s<e.length;s++){let i=e[s];if(i.from==n.from){i.to!=n.to&&(e==t&&(e=t.slice()),e[s]=i.copy(i.from,n.to),eF(e,s+1,i.copy(n.to,i.to)));continue}else{i.from<n.to&&(e==t&&(e=t.slice()),e[r]=n.copy(n.from,i.from),eF(e,s,n.copy(i.from,n.to)));break}}}return e}function eF(t,e,r){for(;e<t.length&&Tc(r,t[e])>0;)e++;t.splice(e,0,r)}function P1(t){let e=[];return t.someProp("decorations",r=>{let n=r(t.state);n&&n!=Sn&&e.push(n)}),t.cursorWrapper&&e.push(Qt.create(t.state.doc,[t.cursorWrapper.deco])),Ia.from(e)}const h1e={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},f1e=fs&&ul<=11;class p1e{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class m1e{constructor(e,r){this.view=e,this.handleDOMChange=r,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new p1e,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let s=0;s<n.length;s++)this.queue.push(n[s]);fs&&ul<=11&&n.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),f1e&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,h1e)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let r=0;r<e.length;r++)this.queue.push(e[r]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(H3(this.view)){if(this.suppressingSelectionUpdates)return qo(this.view);if(fs&&ul<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Jc(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let r=new Set,n;for(let i=e.focusNode;i;i=dh(i))r.add(i);for(let i=e.anchorNode;i;i=dh(i))if(r.has(i)){n=i;break}let s=n&&this.view.docView.nearestDesc(n);if(s&&s.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let r=this.pendingRecords();r.length&&(this.queue=[]);let n=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&H3(e)&&!this.ignoreSelectionChange(n),i=-1,o=-1,a=!1,l=[];if(e.editable)for(let d=0;d<r.length;d++){let h=this.registerMutation(r[d],l);h&&(i=i<0?h.from:Math.min(h.from,i),o=o<0?h.to:Math.max(h.to,o),h.typeOver&&(a=!0))}if(Js&&l.length){let d=l.filter(h=>h.nodeName=="BR");if(d.length==2){let[h,f]=d;h.parentNode&&h.parentNode.parentNode==f.parentNode?f.remove():h.remove()}else{let{focusNode:h}=this.currentSelection;for(let f of d){let p=f.parentNode;p&&p.nodeName=="LI"&&(!h||v1e(e,h)!=p)&&f.remove()}}}else if((Kr||jn)&&l.some(d=>d.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let d of l)if(d.nodeName=="BR"&&d.parentNode){let h=d.nextSibling;h&&h.nodeType==1&&h.contentEditable=="false"&&d.parentNode.removeChild(d)}}let u=null;i<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&jb(n)&&(u=DA(e))&&u.eq(Ze.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,qo(e),this.currentSelection.set(n),e.scrollToSelection()):(i>-1||s)&&(i>-1&&(e.docView.markDirty(i,o),g1e(e)),this.handleDOMChange(i,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||qo(e),this.currentSelection.set(n))}registerMutation(e,r){if(r.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(n==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let h=e.addedNodes[d];r.push(h),h.nodeType==3&&(this.lastChangedTextNode=h)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let s=e.previousSibling,i=e.nextSibling;if(fs&&ul<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:h,nextSibling:f}=e.addedNodes[d];(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(s=h),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f)}let o=s&&s.parentNode==e.target?un(s)+1:0,a=n.localPosFromDOM(e.target,o,-1),l=i&&i.parentNode==e.target?un(i):e.target.childNodes.length,u=n.localPosFromDOM(e.target,l,1);return{from:a,to:u}}else return e.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let tF=new WeakMap,rF=!1;function g1e(t){if(!tF.has(t)&&(tF.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Js,rF)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),rF=!0}}function nF(t,e){let r=e.startContainer,n=e.startOffset,s=e.endContainer,i=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return Jc(o.node,o.offset,s,i)&&([r,n,s,i]=[s,i,r,n]),{anchorNode:r,anchorOffset:n,focusNode:s,focusOffset:i}}function y1e(t,e){if(e.getComposedRanges){let s=e.getComposedRanges(t.root)[0];if(s)return nF(t,s)}let r;function n(s){s.preventDefault(),s.stopImmediatePropagation(),r=s.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0),r?nF(t,r):null}function v1e(t,e){for(let r=e.parentNode;r&&r!=t.dom;r=r.parentNode){let n=t.docView.nearestDesc(r,!0);if(n&&n.node.isBlock)return r}return null}function b1e(t,e,r){let{node:n,fromOffset:s,toOffset:i,from:o,to:a}=t.docView.parseRange(e,r),l=t.domSelectionRange(),u,d=l.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(u=[{node:d,offset:l.anchorOffset}],jb(l)||u.push({node:l.focusNode,offset:l.focusOffset})),Kr&&t.input.lastKeyCode===8)for(let y=i;y>s;y--){let v=n.childNodes[y-1],b=v.pmViewDesc;if(v.nodeName=="BR"&&!b){i=y;break}if(!b||b.size)break}let h=t.state.doc,f=t.someProp("domParser")||cl.fromSchema(t.state.schema),p=h.resolve(o),m=null,g=f.parse(n,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:s,to:i,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:x1e,context:p});if(u&&u[0].pos!=null){let y=u[0].pos,v=u[1]&&u[1].pos;v==null&&(v=y),m={anchor:y+o,head:v+o}}return{doc:g,sel:m,from:o,to:a}}function x1e(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(jn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}else if(t.parentNode.lastChild==t||jn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const w1e=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function S1e(t,e,r,n,s){let i=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let N=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,_=DA(t,N);if(_&&!t.state.selection.eq(_)){if(Kr&&Mo&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",j=>j(t,Jl(13,"Enter"))))return;let k=t.state.tr.setSelection(_);N=="pointer"?k.setMeta("pointer",!0):N=="key"&&k.scrollIntoView(),i&&k.setMeta("composition",i),t.dispatch(k)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(r);e=o.before(a+1),r=t.state.doc.resolve(r).after(a+1);let l=t.state.selection,u=b1e(t,e,r),d=t.state.doc,h=d.slice(u.from,u.to),f,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,p="end"):(f=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let m=N1e(h.content,u.doc.content,u.from,f,p);if(m&&t.input.domChangeCount++,(hh&&t.input.lastIOSEnter>Date.now()-225||Mo)&&s.some(N=>N.nodeType==1&&!w1e.test(N.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",N=>N(t,Jl(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(n&&l instanceof We&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))m={start:l.from,endA:l.to,endB:l.to};else{if(u.sel){let N=sF(t,t.state.doc,u.sel);if(N&&!N.eq(t.state.selection)){let _=t.state.tr.setSelection(N);i&&_.setMeta("composition",i),t.dispatch(_)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof We&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=u.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=u.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),fs&&ul<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>u.from&&u.doc.textBetween(m.start-u.from-1,m.start-u.from+1)==" "&&(m.start--,m.endA--,m.endB--);let g=u.doc.resolveNoCache(m.start-u.from),y=u.doc.resolveNoCache(m.endB-u.from),v=d.resolve(m.start),b=g.sameParent(y)&&g.parent.inlineContent&&v.end()>=m.endA;if((hh&&t.input.lastIOSEnter>Date.now()-225&&(!b||s.some(N=>N.nodeName=="DIV"||N.nodeName=="P"))||!b&&g.pos<u.doc.content.size&&(!g.sameParent(y)||!g.parent.inlineContent)&&g.pos<y.pos&&!/\S/.test(u.doc.textBetween(g.pos,y.pos,"","")))&&t.someProp("handleKeyDown",N=>N(t,Jl(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&_1e(d,m.start,m.endA,g,y)&&t.someProp("handleKeyDown",N=>N(t,Jl(8,"Backspace")))){Mo&&Kr&&t.domObserver.suppressSelectionUpdates();return}Kr&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),Mo&&!b&&g.start()!=y.start()&&y.parentOffset==0&&g.depth==y.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==m.endA&&(m.endB-=2,y=u.doc.resolveNoCache(m.endB-u.from),setTimeout(()=>{t.someProp("handleKeyDown",function(N){return N(t,Jl(13,"Enter"))})},20));let w=m.start,x=m.endA,S=N=>{let _=N||t.state.tr.replace(w,x,u.doc.slice(m.start-u.from,m.endB-u.from));if(u.sel){let k=sF(t,_.doc,u.sel);k&&!(Kr&&t.composing&&k.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(k.head==w||k.head==_.mapping.map(x)-1)||fs&&k.empty&&k.head==w)&&_.setSelection(k)}return i&&_.setMeta("composition",i),_.scrollIntoView()},E;if(b)if(g.pos==y.pos){fs&&ul<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>qo(t),20));let N=S(t.state.tr.delete(w,x)),_=d.resolve(m.start).marksAcross(d.resolve(m.endA));_&&N.ensureMarks(_),t.dispatch(N)}else if(m.endA==m.endB&&(E=E1e(g.parent.content.cut(g.parentOffset,y.parentOffset),v.parent.content.cut(v.parentOffset,m.endA-v.start())))){let N=S(t.state.tr);E.type=="add"?N.addMark(w,x,E.mark):N.removeMark(w,x,E.mark),t.dispatch(N)}else if(g.parent.child(g.index()).isText&&g.index()==y.index()-(y.textOffset?0:1)){let N=g.parent.textBetween(g.parentOffset,y.parentOffset),_=()=>S(t.state.tr.insertText(N,w,x));t.someProp("handleTextInput",k=>k(t,w,x,N,_))||t.dispatch(_())}else t.dispatch(S());else t.dispatch(S())}function sF(t,e,r){return Math.max(r.anchor,r.head)>e.content.size?null:$A(t,e.resolve(r.anchor),e.resolve(r.head))}function E1e(t,e){let r=t.firstChild.marks,n=e.firstChild.marks,s=r,i=n,o,a,l;for(let d=0;d<n.length;d++)s=n[d].removeFromSet(s);for(let d=0;d<r.length;d++)i=r[d].removeFromSet(i);if(s.length==1&&i.length==0)a=s[0],o="add",l=d=>d.mark(a.addToSet(d.marks));else if(s.length==0&&i.length==1)a=i[0],o="remove",l=d=>d.mark(a.removeFromSet(d.marks));else return null;let u=[];for(let d=0;d<e.childCount;d++)u.push(l(e.child(d)));if(J.from(u).eq(t))return{mark:a,type:o}}function _1e(t,e,r,n,s){if(r-e<=s.pos-n.pos||I1(n,!0,!1)<s.pos)return!1;let i=t.resolve(e);if(!n.parent.isTextblock){let a=i.nodeAfter;return a!=null&&r==e+a.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let o=t.resolve(I1(i,!0,!0));return!o.parent.isTextblock||o.pos>r||I1(o,!0,!1)<r?!1:n.parent.content.cut(n.parentOffset).eq(o.parent.content)}function I1(t,e,r){let n=t.depth,s=e?t.end():t.pos;for(;n>0&&(e||t.indexAfter(n)==t.node(n).childCount);)n--,s++,e=!1;if(r){let i=t.node(n).maybeChild(t.indexAfter(n));for(;i&&!i.isLeaf;)i=i.firstChild,s++}return s}function N1e(t,e,r,n,s){let i=t.findDiffStart(e,r);if(i==null)return null;let{a:o,b:a}=t.findDiffEnd(e,r+t.size,r+e.size);if(s=="end"){let l=Math.max(0,i-Math.min(o,a));n-=o+l-i}if(o<i&&t.size<e.size){let l=n<=i&&n>=o?i-n:0;i-=l,i&&i<e.size&&iF(e.textBetween(i-1,i+1))&&(i+=l?1:-1),a=i+(a-o),o=i}else if(a<i){let l=n<=i&&n>=a?i-n:0;i-=l,i&&i<t.size&&iF(t.textBetween(i-1,i+1))&&(i+=l?1:-1),o=i+(o-a),a=i}return{start:i,endA:o,endB:a}}function iF(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),r=t.charCodeAt(1);return e>=56320&&e<=57343&&r>=55296&&r<=56319}class wie{constructor(e,r){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new zxe,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=r,this.state=r.state,this.directPlugins=r.plugins||[],this.directPlugins.forEach(uF),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=lF(this),aF(this),this.nodeViews=cF(this),this.docView=L3(this.state.doc,oF(this),P1(this),this.dom,this),this.domObserver=new m1e(this,(n,s,i,o)=>S1e(this,n,s,i,o)),this.domObserver.start(),Wxe(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let r in e)this._props[r]=e[r];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&gR(this);let r=this._props;this._props=e,e.plugins&&(e.plugins.forEach(uF),this.directPlugins=e.plugins),this.updateStateInner(e.state,r)}setProps(e){let r={};for(let n in this._props)r[n]=this._props[n];r.state=this.state;for(let n in e)r[n]=e[n];this.update(r)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,r){var n;let s=this.state,i=!1,o=!1;e.storedMarks&&this.composing&&(pie(this),o=!0),this.state=e;let a=s.plugins!=e.plugins||this._props.plugins!=r.plugins;if(a||this._props.plugins!=r.plugins||this._props.nodeViews!=r.nodeViews){let p=cF(this);k1e(p,this.nodeViews)&&(this.nodeViews=p,i=!0)}(a||r.handleDOMEvents!=this._props.handleDOMEvents)&&gR(this),this.editable=lF(this),aF(this);let l=P1(this),u=oF(this),d=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",h=i||!this.docView.matchesNode(e.doc,u,l);(h||!e.selection.eq(s.selection))&&(o=!0);let f=d=="preserve"&&o&&this.dom.style.overflowAnchor==null&&nxe(this);if(o){this.domObserver.stop();let p=h&&(fs||Kr)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&C1e(s.selection,e.selection);if(h){let m=Kr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=n1e(this)),(i||!this.docView.update(e.doc,u,l,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=L3(e.doc,u,l,this.dom,this)),m&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&kxe(this))?qo(this,p):(rie(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((n=this.dragging)===null||n===void 0)&&n.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():f&&sxe(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",r=>r(this)))if(this.state.selection instanceof Ae){let r=this.docView.domAfterPos(this.state.selection.from);r.nodeType==1&&M3(this,r.getBoundingClientRect(),e)}else M3(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let r=0;r<this.directPlugins.length;r++){let n=this.directPlugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let r=0;r<this.state.plugins.length;r++){let n=this.state.plugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let r=0;r<this.pluginViews.length;r++){let n=this.pluginViews[r];n.update&&n.update(this,e)}}updateDraggedNode(e,r){let n=e.node,s=-1;if(this.state.doc.nodeAt(n.from)==n.node)s=n.from;else{let i=n.from+(this.state.doc.content.size-r.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==n.node&&(s=i)}this.dragging=new gie(e.slice,e.move,s<0?void 0:Ae.create(this.state.doc,s))}someProp(e,r){let n=this._props&&this._props[e],s;if(n!=null&&(s=r?r(n):n))return s;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(s=r?r(a):a))return s}let i=this.state.plugins;if(i)for(let o=0;o<i.length;o++){let a=i[o].props[e];if(a!=null&&(s=r?r(a):a))return s}}hasFocus(){if(fs){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&ixe(this.dom),qo(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let r=this.dom.parentNode;r;r=r.parentNode)if(r.nodeType==9||r.nodeType==11&&r.host)return r.getSelection||(Object.getPrototypeOf(r).getSelection=()=>r.ownerDocument.getSelection()),this._root=r}return e||document}updateRoot(){this._root=null}posAtCoords(e){return uxe(this,e)}coordsAtPos(e,r=1){return Gse(this,e,r)}domAtPos(e,r=0){return this.docView.domFromPos(e,r)}nodeDOM(e){let r=this.docView.descAt(e);return r?r.nodeDOM:null}posAtDOM(e,r,n=-1){let s=this.docView.posFromDOM(e,r,n);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,r){return mxe(this,r||this.state,e)}pasteHTML(e,r){return em(this,"",e,!1,r||new ClipboardEvent("paste"))}pasteText(e,r){return em(this,e,null,!0,r||new ClipboardEvent("paste"))}serializeForClipboard(e){return FA(this,e)}destroy(){this.docView&&(Vxe(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],P1(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Kbe())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Hxe(this,e)}domSelectionRange(){let e=this.domSelection();return e?jn&&this.root.nodeType===11&&Jbe(this.dom.ownerDocument)==this.dom&&y1e(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}wie.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function oF(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",r=>{if(typeof r=="function"&&(r=r(t.state)),r)for(let n in r)n=="class"?e.class+=" "+r[n]:n=="style"?e.style=(e.style?e.style+";":"")+r[n]:!e[n]&&n!="contenteditable"&&n!="nodeName"&&(e[n]=String(r[n]))}),e.translate||(e.translate="no"),[Ln.node(0,t.state.doc.content.size,e)]}function aF(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Ln.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function lF(t){return!t.someProp("editable",e=>e(t.state)===!1)}function C1e(t,e){let r=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(r)!=e.$anchor.start(r)}function cF(t){let e=Object.create(null);function r(n){for(let s in n)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=n[s])}return t.someProp("nodeViews",r),t.someProp("markViews",r),e}function k1e(t,e){let r=0,n=0;for(let s in t){if(t[s]!=e[s])return!0;r++}for(let s in e)n++;return r!=n}function uF(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var _l={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Gv={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},j1e=typeof navigator<"u"&&/Mac/.test(navigator.platform),T1e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var dn=0;dn<10;dn++)_l[48+dn]=_l[96+dn]=String(dn);for(var dn=1;dn<=24;dn++)_l[dn+111]="F"+dn;for(var dn=65;dn<=90;dn++)_l[dn]=String.fromCharCode(dn+32),Gv[dn]=String.fromCharCode(dn);for(var R1 in _l)Gv.hasOwnProperty(R1)||(Gv[R1]=_l[R1]);function O1e(t){var e=j1e&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||T1e&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",r=!e&&t.key||(t.shiftKey?Gv:_l)[t.keyCode]||t.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}const P1e=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),I1e=typeof navigator<"u"&&/Win/.test(navigator.platform);function R1e(t){let e=t.split(/-(?!$)/),r=e[e.length-1];r=="Space"&&(r=" ");let n,s,i,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))P1e?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+l)}return n&&(r="Alt-"+r),s&&(r="Ctrl-"+r),o&&(r="Meta-"+r),i&&(r="Shift-"+r),r}function M1e(t){let e=Object.create(null);for(let r in t)e[R1e(r)]=t[r];return e}function M1(t,e,r=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),r&&e.shiftKey&&(t="Shift-"+t),t}function A1e(t){return new er({props:{handleKeyDown:Sie(t)}})}function Sie(t){let e=M1e(t);return function(r,n){let s=O1e(n),i,o=e[M1(s,n)];if(o&&o(r.state,r.dispatch,r))return!0;if(s.length==1&&s!=" "){if(n.shiftKey){let a=e[M1(s,n,!1)];if(a&&a(r.state,r.dispatch,r))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(I1e&&n.ctrlKey&&n.altKey)&&(i=_l[n.keyCode])&&i!=s){let a=e[M1(i,n)];if(a&&a(r.state,r.dispatch,r))return!0}}return!1}}var D1e=Object.defineProperty,VA=(t,e)=>{for(var r in e)D1e(t,r,{get:e[r],enumerable:!0})};function Pb(t){const{state:e,transaction:r}=t;let{selection:n}=r,{doc:s}=r,{storedMarks:i}=r;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return n},get doc(){return s},get tr(){return n=r.selection,s=r.doc,i=r.storedMarks,r}}}var Ib=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:r}=this,{view:n}=e,{tr:s}=r,i=this.buildProps(s);return Object.fromEntries(Object.entries(t).map(([o,a])=>[o,(...u)=>{const d=a(...u)(i);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&n.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:r,editor:n,state:s}=this,{view:i}=n,o=[],a=!!t,l=t||s.tr,u=()=>(!a&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(l),o.every(h=>h===!0)),d={...Object.fromEntries(Object.entries(r).map(([h,f])=>[h,(...m)=>{const g=this.buildProps(l,e),y=f(...m)(g);return o.push(y),d}])),run:u};return d}createCan(t){const{rawCommands:e,state:r}=this,n=!1,s=t||r.tr,i=this.buildProps(s,n);return{...Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>l(...u)({...i,dispatch:void 0})])),chain:()=>this.createChain(s,n)}}buildProps(t,e=!0){const{rawCommands:r,editor:n,state:s}=this,{view:i}=n,o={tr:t,editor:n,view:i,state:Pb({state:s,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(r).map(([a,l])=>[a,(...u)=>l(...u)(o)]))}};return o}},Eie={};VA(Eie,{blur:()=>$1e,clearContent:()=>F1e,clearNodes:()=>q1e,command:()=>L1e,createParagraphNear:()=>B1e,cut:()=>z1e,deleteCurrentNode:()=>W1e,deleteNode:()=>V1e,deleteRange:()=>U1e,deleteSelection:()=>H1e,enter:()=>K1e,exitCode:()=>G1e,extendMarkRange:()=>Y1e,first:()=>Q1e,focus:()=>J1e,forEach:()=>Z1e,insertContent:()=>ewe,insertContentAt:()=>nwe,joinBackward:()=>owe,joinDown:()=>iwe,joinForward:()=>awe,joinItemBackward:()=>lwe,joinItemForward:()=>cwe,joinTextblockBackward:()=>uwe,joinTextblockForward:()=>dwe,joinUp:()=>swe,keyboardShortcut:()=>fwe,lift:()=>pwe,liftEmptyBlock:()=>mwe,liftListItem:()=>gwe,newlineInCode:()=>ywe,resetAttributes:()=>vwe,scrollIntoView:()=>bwe,selectAll:()=>xwe,selectNodeBackward:()=>wwe,selectNodeForward:()=>Swe,selectParentNode:()=>Ewe,selectTextblockEnd:()=>_we,selectTextblockStart:()=>Nwe,setContent:()=>Cwe,setMark:()=>Hwe,setMeta:()=>Kwe,setNode:()=>Gwe,setNodeSelection:()=>Ywe,setTextDirection:()=>Qwe,setTextSelection:()=>Xwe,sinkListItem:()=>Jwe,splitBlock:()=>Zwe,splitListItem:()=>eSe,toggleList:()=>tSe,toggleMark:()=>rSe,toggleNode:()=>nSe,toggleWrap:()=>sSe,undoInputRule:()=>iSe,unsetAllMarks:()=>oSe,unsetMark:()=>aSe,unsetTextDirection:()=>lSe,updateAttributes:()=>cSe,wrapIn:()=>uSe,wrapInList:()=>dSe});var $1e=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var r;t.isDestroyed||(e.dom.blur(),(r=window==null?void 0:window.getSelection())==null||r.removeAllRanges())}),!0),F1e=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),q1e=()=>({state:t,tr:e,dispatch:r})=>{const{selection:n}=e,{ranges:s}=n;return r&&s.forEach(({$from:i,$to:o})=>{t.doc.nodesBetween(i.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:u,mapping:d}=e,h=u.resolve(d.map(l)),f=u.resolve(d.map(l+a.nodeSize)),p=h.blockRange(f);if(!p)return;const m=$h(p);if(a.type.isTextblock){const{defaultType:g}=h.parent.contentMatchAt(h.index());e.setNodeMarkup(p.start,g)}(m||m===0)&&e.lift(p,m)})}),!0},L1e=t=>e=>t(e),B1e=()=>({state:t,dispatch:e})=>$se(t,e),z1e=(t,e)=>({editor:r,tr:n})=>{const{state:s}=r,i=s.doc.slice(t.from,t.to);n.deleteRange(t.from,t.to);const o=n.mapping.map(e);return n.insert(o,i.content),n.setSelection(new We(n.doc.resolve(Math.max(o-1,0)))),!0},W1e=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,n=r.$anchor.node();if(n.content.size>0)return!1;const s=t.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===n.type){if(e){const a=s.before(i),l=s.after(i);t.delete(a,l).scrollIntoView()}return!0}return!1};function Or(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var V1e=t=>({tr:e,state:r,dispatch:n})=>{const s=Or(t,r.schema),i=e.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===s){if(n){const l=i.before(o),u=i.after(o);e.delete(l,u).scrollIntoView()}return!0}return!1},U1e=t=>({tr:e,dispatch:r})=>{const{from:n,to:s}=t;return r&&e.delete(n,s),!0},H1e=()=>({state:t,dispatch:e})=>OA(t,e),K1e=()=>({commands:t})=>t.keyboardShortcut("Enter"),G1e=()=>({state:t,dispatch:e})=>Ibe(t,e);function UA(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Yv(t,e,r={strict:!0}){const n=Object.keys(e);return n.length?n.every(s=>r.strict?e[s]===t[s]:UA(e[s])?e[s].test(t[s]):e[s]===t[s]):!0}function _ie(t,e,r={}){return t.find(n=>n.type===e&&Yv(Object.fromEntries(Object.keys(r).map(s=>[s,n.attrs[s]])),r))}function dF(t,e,r={}){return!!_ie(t,e,r)}function HA(t,e,r){var n;if(!t||!e)return;let s=t.parent.childAfter(t.parentOffset);if((!s.node||!s.node.marks.some(d=>d.type===e))&&(s=t.parent.childBefore(t.parentOffset)),!s.node||!s.node.marks.some(d=>d.type===e)||(r=r||((n=s.node.marks[0])==null?void 0:n.attrs),!_ie([...s.node.marks],e,r)))return;let o=s.index,a=t.start()+s.offset,l=o+1,u=a+s.node.nodeSize;for(;o>0&&dF([...t.parent.child(o-1).marks],e,r);)o-=1,a-=t.parent.child(o).nodeSize;for(;l<t.parent.childCount&&dF([...t.parent.child(l).marks],e,r);)u+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:u}}function oa(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var Y1e=(t,e={})=>({tr:r,state:n,dispatch:s})=>{const i=oa(t,n.schema),{doc:o,selection:a}=r,{$from:l,from:u,to:d}=a;if(s){const h=HA(l,i,e);if(h&&h.from<=u&&h.to>=d){const f=We.create(o,h.from,h.to);r.setSelection(f)}}return!0},Q1e=t=>e=>{const r=typeof t=="function"?t(e):t;for(let n=0;n<r.length;n+=1)if(r[n](e))return!0;return!1};function Nie(t){return t instanceof We}function lc(t=0,e=0,r=0){return Math.min(Math.max(t,e),r)}function Cie(t,e=null){if(!e)return null;const r=Ze.atStart(t),n=Ze.atEnd(t);if(e==="start"||e===!0)return r;if(e==="end")return n;const s=r.from,i=n.to;return e==="all"?We.create(t,lc(0,s,i),lc(t.content.size,s,i)):We.create(t,lc(e,s,i),lc(e,s,i))}function hF(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Qv(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function X1e(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var J1e=(t=null,e={})=>({editor:r,view:n,tr:s,dispatch:i})=>{e={scrollIntoView:!0,...e};const o=()=>{(Qv()||hF())&&n.dom.focus(),X1e()&&!Qv()&&!hF()&&n.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{r.isDestroyed||(n.focus(),e!=null&&e.scrollIntoView&&r.commands.scrollIntoView())})};if(n.hasFocus()&&t===null||t===!1)return!0;if(i&&t===null&&!Nie(r.state.selection))return o(),!0;const a=Cie(s.doc,t)||r.state.selection,l=r.state.selection.eq(a);return i&&(l||s.setSelection(a),l&&s.storedMarks&&s.setStoredMarks(s.storedMarks),o()),!0},Z1e=(t,e)=>r=>t.every((n,s)=>e(n,{...r,index:s})),ewe=(t,e)=>({tr:r,commands:n})=>n.insertContentAt({from:r.selection.from,to:r.selection.to},t,e),kie=t=>{const e=t.childNodes;for(let r=e.length-1;r>=0;r-=1){const n=e[r];n.nodeType===3&&n.nodeValue&&/^(\n\s\s|\n)$/.test(n.nodeValue)?t.removeChild(n):n.nodeType===1&&kie(n)}return t};function oy(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,r=new window.DOMParser().parseFromString(e,"text/html").body;return kie(r)}function rm(t,e,r){if(t instanceof ll||t instanceof J)return t;r={slice:!0,parseOptions:{},...r};const n=typeof t=="object"&&t!==null,s=typeof t=="string";if(n)try{if(Array.isArray(t)&&t.length>0)return J.fromArray(t.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(t);return r.errorOnInvalidContent&&o.check(),o}catch(i){if(r.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",i),rm("",e,r)}if(s){if(r.errorOnInvalidContent){let o=!1,a="";const l=new use({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(o=!0,a=typeof u=="string"?u:u.outerHTML,null)}]}})});if(r.slice?cl.fromSchema(l).parseSlice(oy(t),r.parseOptions):cl.fromSchema(l).parse(oy(t),r.parseOptions),r.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const i=cl.fromSchema(e);return r.slice?i.parseSlice(oy(t),r.parseOptions).content:i.parse(oy(t),r.parseOptions)}return rm("",e,r)}function twe(t,e,r){const n=t.steps.length-1;if(n<e)return;const s=t.steps[n];if(!(s instanceof Hr||s instanceof Yr))return;const i=t.mapping.maps[n];let o=0;i.forEach((a,l,u,d)=>{o===0&&(o=d)}),t.setSelection(Ze.near(t.doc.resolve(o),r))}var rwe=t=>!("type"in t),nwe=(t,e,r)=>({tr:n,dispatch:s,editor:i})=>{var o;if(s){r={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...r};let a;const l=y=>{i.emit("contentError",{editor:i,error:y,disableCollaboration:()=>{"collaboration"in i.storage&&typeof i.storage.collaboration=="object"&&i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}})},u={preserveWhitespace:"full",...r.parseOptions};if(!r.errorOnInvalidContent&&!i.options.enableContentCheck&&i.options.emitContentError)try{rm(e,i.schema,{parseOptions:u,errorOnInvalidContent:!0})}catch(y){l(y)}try{a=rm(e,i.schema,{parseOptions:u,errorOnInvalidContent:(o=r.errorOnInvalidContent)!=null?o:i.options.enableContentCheck})}catch(y){return l(y),!1}let{from:d,to:h}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},f=!0,p=!0;if((rwe(a)?a:[a]).forEach(y=>{y.check(),f=f?y.isText&&y.marks.length===0:!1,p=p?y.isBlock:!1}),d===h&&p){const{parent:y}=n.doc.resolve(d);y.isTextblock&&!y.type.spec.code&&!y.childCount&&(d-=1,h+=1)}let g;if(f){if(Array.isArray(e))g=e.map(y=>y.text||"").join("");else if(e instanceof J){let y="";e.forEach(v=>{v.text&&(y+=v.text)}),g=y}else typeof e=="object"&&e&&e.text?g=e.text:g=e;n.insertText(g,d,h)}else{g=a;const y=n.doc.resolve(d),v=y.node(),b=y.parentOffset===0,w=v.isText||v.isTextblock,x=v.content.size>0;b&&w&&x&&(d=Math.max(0,d-1)),n.replaceWith(d,h,g)}r.updateSelection&&twe(n,n.steps.length-1,-1),r.applyInputRules&&n.setMeta("applyInputRules",{from:d,text:g}),r.applyPasteRules&&n.setMeta("applyPasteRules",{from:d,text:g})}return!0},swe=()=>({state:t,dispatch:e})=>Tbe(t,e),iwe=()=>({state:t,dispatch:e})=>Obe(t,e),owe=()=>({state:t,dispatch:e})=>Ose(t,e),awe=()=>({state:t,dispatch:e})=>Mse(t,e),lwe=()=>({state:t,dispatch:e,tr:r})=>{try{const n=Nb(t.doc,t.selection.$from.pos,-1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},cwe=()=>({state:t,dispatch:e,tr:r})=>{try{const n=Nb(t.doc,t.selection.$from.pos,1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},uwe=()=>({state:t,dispatch:e})=>kbe(t,e),dwe=()=>({state:t,dispatch:e})=>jbe(t,e);function jie(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function hwe(t){const e=t.split(/-(?!$)/);let r=e[e.length-1];r==="Space"&&(r=" ");let n,s,i,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))Qv()||jie()?o=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return n&&(r=`Alt-${r}`),s&&(r=`Ctrl-${r}`),o&&(r=`Meta-${r}`),i&&(r=`Shift-${r}`),r}var fwe=t=>({editor:e,view:r,tr:n,dispatch:s})=>{const i=hwe(t).split(/-(?!$)/),o=i.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{r.someProp("handleKeyDown",u=>u(r,a))});return l==null||l.steps.forEach(u=>{const d=u.map(n.mapping);d&&s&&n.maybeStep(d)}),!0};function Nl(t,e,r={}){const{from:n,to:s,empty:i}=t.selection,o=e?Or(e,t.schema):null,a=[];t.doc.nodesBetween(n,s,(h,f)=>{if(h.isText)return;const p=Math.max(n,f),m=Math.min(s,f+h.nodeSize);a.push({node:h,from:p,to:m})});const l=s-n,u=a.filter(h=>o?o.name===h.node.type.name:!0).filter(h=>Yv(h.node.attrs,r,{strict:!1}));return i?!!u.length:u.reduce((h,f)=>h+f.to-f.from,0)>=l}var pwe=(t,e={})=>({state:r,dispatch:n})=>{const s=Or(t,r.schema);return Nl(r,s,e)?Pbe(r,n):!1},mwe=()=>({state:t,dispatch:e})=>Fse(t,e),gwe=t=>({state:e,dispatch:r})=>{const n=Or(t,e.schema);return Wbe(n)(e,r)},ywe=()=>({state:t,dispatch:e})=>Dse(t,e);function Rb(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function fF(t,e){const r=typeof e=="string"?[e]:e;return Object.keys(t).reduce((n,s)=>(r.includes(s)||(n[s]=t[s]),n),{})}var vwe=(t,e)=>({tr:r,state:n,dispatch:s})=>{let i=null,o=null;const a=Rb(typeof t=="string"?t:t.name,n.schema);if(!a)return!1;a==="node"&&(i=Or(t,n.schema)),a==="mark"&&(o=oa(t,n.schema));let l=!1;return r.selection.ranges.forEach(u=>{n.doc.nodesBetween(u.$from.pos,u.$to.pos,(d,h)=>{i&&i===d.type&&(l=!0,s&&r.setNodeMarkup(h,void 0,fF(d.attrs,e))),o&&d.marks.length&&d.marks.forEach(f=>{o===f.type&&(l=!0,s&&r.addMark(h,h+d.nodeSize,o.create(fF(f.attrs,e))))})})}),l},bwe=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),xwe=()=>({tr:t,dispatch:e})=>{if(e){const r=new ks(t.doc);t.setSelection(r)}return!0},wwe=()=>({state:t,dispatch:e})=>Ise(t,e),Swe=()=>({state:t,dispatch:e})=>Ase(t,e),Ewe=()=>({state:t,dispatch:e})=>Abe(t,e),_we=()=>({state:t,dispatch:e})=>Fbe(t,e),Nwe=()=>({state:t,dispatch:e})=>$be(t,e);function yR(t,e,r={},n={}){return rm(t,e,{slice:!1,parseOptions:r,errorOnInvalidContent:n.errorOnInvalidContent})}var Cwe=(t,{errorOnInvalidContent:e,emitUpdate:r=!0,parseOptions:n={}}={})=>({editor:s,tr:i,dispatch:o,commands:a})=>{const{doc:l}=i;if(n.preserveWhitespace!=="full"){const u=yR(t,s.schema,n,{errorOnInvalidContent:e??s.options.enableContentCheck});return o&&i.replaceWith(0,l.content.size,u).setMeta("preventUpdate",!r),!0}return o&&i.setMeta("preventUpdate",!r),a.insertContentAt({from:0,to:l.content.size},t,{parseOptions:n,errorOnInvalidContent:e??s.options.enableContentCheck})};function Tie(t,e){const r=oa(e,t.schema),{from:n,to:s,empty:i}=t.selection,o=[];i?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(n,s,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===r.name);return a?{...a.attrs}:{}}function Oie(t,e){const r=new Cse(t);return e.forEach(n=>{n.steps.forEach(s=>{r.step(s)})}),r}function kwe(t){for(let e=0;e<t.edgeCount;e+=1){const{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function jwe(t,e,r){const n=[];return t.nodesBetween(e.from,e.to,(s,i)=>{r(s)&&n.push({node:s,pos:i})}),n}function Twe(t,e){for(let r=t.depth;r>0;r-=1){const n=t.node(r);if(e(n))return{pos:r>0?t.before(r):0,start:t.start(r),depth:r,node:n}}}function Mb(t){return e=>Twe(e.$from,t)}function Re(t,e,r){return t.config[e]===void 0&&t.parent?Re(t.parent,e,r):typeof t.config[e]=="function"?t.config[e].bind({...r,parent:t.parent?Re(t.parent,e,r):null}):t.config[e]}function KA(t){return t.map(e=>{const r={name:e.name,options:e.options,storage:e.storage},n=Re(e,"addExtensions",r);return n?[e,...KA(n())]:e}).flat(10)}function GA(t,e){const r=fu.fromSchema(e).serializeFragment(t),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(r),s.innerHTML}function Pie(t){return typeof t=="function"}function Et(t,e=void 0,...r){return Pie(t)?e?t.bind(e)(...r):t(...r):t}function Owe(t={}){return Object.keys(t).length===0&&t.constructor===Object}function fh(t){const e=t.filter(s=>s.type==="extension"),r=t.filter(s=>s.type==="node"),n=t.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:r,markExtensions:n}}function Iie(t){const e=[],{nodeExtensions:r,markExtensions:n}=fh(t),s=[...r,...n],i={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:s},l=Re(o,"addGlobalAttributes",a);if(!l)return;l().forEach(d=>{d.types.forEach(h=>{Object.entries(d.attributes).forEach(([f,p])=>{e.push({type:h,name:f,attribute:{...i,...p}})})})})}),s.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=Re(o,"addAttributes",a);if(!l)return;const u=l();Object.entries(u).forEach(([d,h])=>{const f={...i,...h};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:o.name,name:d,attribute:f})})}),e}function Pr(...t){return t.filter(e=>!!e).reduce((e,r)=>{const n={...e};return Object.entries(r).forEach(([s,i])=>{if(!n[s]){n[s]=i;return}if(s==="class"){const a=i?String(i).split(" "):[],l=n[s]?n[s].split(" "):[],u=a.filter(d=>!l.includes(d));n[s]=[...l,...u].join(" ")}else if(s==="style"){const a=i?i.split(";").map(d=>d.trim()).filter(Boolean):[],l=n[s]?n[s].split(";").map(d=>d.trim()).filter(Boolean):[],u=new Map;l.forEach(d=>{const[h,f]=d.split(":").map(p=>p.trim());u.set(h,f)}),a.forEach(d=>{const[h,f]=d.split(":").map(p=>p.trim());u.set(h,f)}),n[s]=Array.from(u.entries()).map(([d,h])=>`${d}: ${h}`).join("; ")}else n[s]=i}),n},{})}function nm(t,e){return e.filter(r=>r.type===t.type.name).filter(r=>r.attribute.rendered).map(r=>r.attribute.renderHTML?r.attribute.renderHTML(t.attrs)||{}:{[r.name]:t.attrs[r.name]}).reduce((r,n)=>Pr(r,n),{})}function Pwe(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function pF(t,e){return"style"in t?t:{...t,getAttrs:r=>{const n=t.getAttrs?t.getAttrs(r):t.attrs;if(n===!1)return!1;const s=e.reduce((i,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(r):Pwe(r.getAttribute(o.name));return a==null?i:{...i,[o.name]:a}},{});return{...n,...s}}}}function mF(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>e==="attrs"&&Owe(r)?!1:r!=null))}function gF(t){var e,r;const n={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&"default"in((t==null?void 0:t.attribute)||{})&&(n.default=t.attribute.default),((r=t==null?void 0:t.attribute)==null?void 0:r.validate)!==void 0&&(n.validate=t.attribute.validate),[t.name,n]}function Iwe(t,e){var r;const n=Iie(t),{nodeExtensions:s,markExtensions:i}=fh(t),o=(r=s.find(u=>Re(u,"topNode")))==null?void 0:r.name,a=Object.fromEntries(s.map(u=>{const d=n.filter(v=>v.type===u.name),h={name:u.name,options:u.options,storage:u.storage,editor:e},f=t.reduce((v,b)=>{const w=Re(b,"extendNodeSchema",h);return{...v,...w?w(u):{}}},{}),p=mF({...f,content:Et(Re(u,"content",h)),marks:Et(Re(u,"marks",h)),group:Et(Re(u,"group",h)),inline:Et(Re(u,"inline",h)),atom:Et(Re(u,"atom",h)),selectable:Et(Re(u,"selectable",h)),draggable:Et(Re(u,"draggable",h)),code:Et(Re(u,"code",h)),whitespace:Et(Re(u,"whitespace",h)),linebreakReplacement:Et(Re(u,"linebreakReplacement",h)),defining:Et(Re(u,"defining",h)),isolating:Et(Re(u,"isolating",h)),attrs:Object.fromEntries(d.map(gF))}),m=Et(Re(u,"parseHTML",h));m&&(p.parseDOM=m.map(v=>pF(v,d)));const g=Re(u,"renderHTML",h);g&&(p.toDOM=v=>g({node:v,HTMLAttributes:nm(v,d)}));const y=Re(u,"renderText",h);return y&&(p.toText=y),[u.name,p]})),l=Object.fromEntries(i.map(u=>{const d=n.filter(y=>y.type===u.name),h={name:u.name,options:u.options,storage:u.storage,editor:e},f=t.reduce((y,v)=>{const b=Re(v,"extendMarkSchema",h);return{...y,...b?b(u):{}}},{}),p=mF({...f,inclusive:Et(Re(u,"inclusive",h)),excludes:Et(Re(u,"excludes",h)),group:Et(Re(u,"group",h)),spanning:Et(Re(u,"spanning",h)),code:Et(Re(u,"code",h)),attrs:Object.fromEntries(d.map(gF))}),m=Et(Re(u,"parseHTML",h));m&&(p.parseDOM=m.map(y=>pF(y,d)));const g=Re(u,"renderHTML",h);return g&&(p.toDOM=y=>g({mark:y,HTMLAttributes:nm(y,d)})),[u.name,p]}));return new use({topNode:o,nodes:a,marks:l})}function Rwe(t){const e=t.filter((r,n)=>t.indexOf(r)!==n);return Array.from(new Set(e))}function Xv(t){return t.sort((r,n)=>{const s=Re(r,"priority")||100,i=Re(n,"priority")||100;return s>i?-1:s<i?1:0})}function Rie(t){const e=Xv(KA(t)),r=Rwe(e.map(n=>n.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(n=>`'${n}'`).join(", ")}]. This can lead to issues.`),e}function Mie(t,e,r){const{from:n,to:s}=e,{blockSeparator:i=`

`,textSerializers:o={}}=r||{};let a="";return t.nodesBetween(n,s,(l,u,d,h)=>{var f;l.isBlock&&u>n&&(a+=i);const p=o==null?void 0:o[l.type.name];if(p)return d&&(a+=p({node:l,pos:u,parent:d,index:h,range:e})),!1;l.isText&&(a+=(f=l==null?void 0:l.text)==null?void 0:f.slice(Math.max(n,u)-u,s-u))}),a}function Mwe(t,e){const r={from:0,to:t.content.size};return Mie(t,r,e)}function Aie(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,r])=>[e,r.spec.toText]))}function Awe(t,e){const r=Or(e,t.schema),{from:n,to:s}=t.selection,i=[];t.doc.nodesBetween(n,s,a=>{i.push(a)});const o=i.reverse().find(a=>a.type.name===r.name);return o?{...o.attrs}:{}}function Die(t,e){const r=Rb(typeof e=="string"?e:e.name,t.schema);return r==="node"?Awe(t,e):r==="mark"?Tie(t,e):{}}function Dwe(t,e=JSON.stringify){const r={};return t.filter(n=>{const s=e(n);return Object.prototype.hasOwnProperty.call(r,s)?!1:r[s]=!0})}function $we(t){const e=Dwe(t);return e.length===1?e:e.filter((r,n)=>!e.filter((i,o)=>o!==n).some(i=>r.oldRange.from>=i.oldRange.from&&r.oldRange.to<=i.oldRange.to&&r.newRange.from>=i.newRange.from&&r.newRange.to<=i.newRange.to))}function $ie(t){const{mapping:e,steps:r}=t,n=[];return e.maps.forEach((s,i)=>{const o=[];if(s.ranges.length)s.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=r[i];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const u=e.slice(i).map(a,-1),d=e.slice(i).map(l),h=e.invert().map(u,-1),f=e.invert().map(d);n.push({oldRange:{from:h,to:f},newRange:{from:u,to:d}})})}),$we(n)}function YA(t,e,r){const n=[];return t===e?r.resolve(t).marks().forEach(s=>{const i=r.resolve(t),o=HA(i,s.type);o&&n.push({mark:s,...o})}):r.nodesBetween(t,e,(s,i)=>{!s||(s==null?void 0:s.nodeSize)===void 0||n.push(...s.marks.map(o=>({from:i,to:i+s.nodeSize,mark:o})))}),n}var Fwe=(t,e,r,n=20)=>{const s=t.doc.resolve(r);let i=n,o=null;for(;i>0&&o===null;){const a=s.node(i);(a==null?void 0:a.type.name)===e?o=a:i-=1}return[o,i]};function ay(t,e){return e.nodes[t]||e.marks[t]||null}function Uy(t,e,r){return Object.fromEntries(Object.entries(r).filter(([n])=>{const s=t.find(i=>i.type===e&&i.name===n);return s?s.attribute.keepOnSplit:!1}))}var qwe=(t,e=500)=>{let r="";const n=t.parentOffset;return t.parent.nodesBetween(Math.max(0,n-e),n,(s,i,o,a)=>{var l,u;const d=((u=(l=s.type.spec).toText)==null?void 0:u.call(l,{node:s,pos:i,parent:o,index:a}))||s.textContent||"%leaf%";r+=s.isAtom&&!s.isText?d:d.slice(0,Math.max(0,n-i))}),r};function vR(t,e,r={}){const{empty:n,ranges:s}=t.selection,i=e?oa(e,t.schema):null;if(n)return!!(t.storedMarks||t.selection.$from.marks()).filter(h=>i?i.name===h.type.name:!0).find(h=>Yv(h.attrs,r,{strict:!1}));let o=0;const a=[];if(s.forEach(({$from:h,$to:f})=>{const p=h.pos,m=f.pos;t.doc.nodesBetween(p,m,(g,y)=>{if(!g.isText&&!g.marks.length)return;const v=Math.max(p,y),b=Math.min(m,y+g.nodeSize),w=b-v;o+=w,a.push(...g.marks.map(x=>({mark:x,from:v,to:b})))})}),o===0)return!1;const l=a.filter(h=>i?i.name===h.mark.type.name:!0).filter(h=>Yv(h.mark.attrs,r,{strict:!1})).reduce((h,f)=>h+f.to-f.from,0),u=a.filter(h=>i?h.mark.type!==i&&h.mark.type.excludes(i):!0).reduce((h,f)=>h+f.to-f.from,0);return(l>0?l+u:l)>=o}function Lwe(t,e,r={}){if(!e)return Nl(t,null,r)||vR(t,null,r);const n=Rb(e,t.schema);return n==="node"?Nl(t,e,r):n==="mark"?vR(t,e,r):!1}var Bwe=(t,e)=>{const{$from:r,$to:n,$anchor:s}=t.selection;if(e){const i=Mb(a=>a.type.name===e)(t.selection);if(!i)return!1;const o=t.doc.resolve(i.pos+1);return s.pos+1===o.end()}return!(n.parentOffset<n.parent.nodeSize-2||r.pos!==n.pos)},zwe=t=>{const{$from:e,$to:r}=t.selection;return!(e.parentOffset>0||e.pos!==r.pos)};function yF(t,e){return Array.isArray(e)?e.some(r=>(typeof r=="string"?r:r.name)===t.name):e}function vF(t,e){const{nodeExtensions:r}=fh(e),n=r.find(o=>o.name===t);if(!n)return!1;const s={name:n.name,options:n.options,storage:n.storage},i=Et(Re(n,"group",s));return typeof i!="string"?!1:i.split(" ").includes("list")}function Ab(t,{checkChildren:e=!0,ignoreWhitespace:r=!1}={}){var n;if(r){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((n=t.text)!=null?n:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let s=!0;return t.content.forEach(i=>{s!==!1&&(Ab(i,{ignoreWhitespace:r,checkChildren:e})||(s=!1))}),s}return!1}function Fie(t){return t instanceof Ae}var qie=class Lie{constructor(e){this.position=e}static fromJSON(e){return new Lie(e.position)}toJSON(){return{position:this.position}}};function Wwe(t,e){const r=e.mapping.mapResult(t.position);return{position:new qie(r.pos),mapResult:r}}function Vwe(t){return new qie(t)}function Uwe(t,e,r){var n;const{selection:s}=e;let i=null;if(Nie(s)&&(i=s.$cursor),i){const a=(n=t.storedMarks)!=null?n:i.marks();return i.parent.type.allowsMarkType(r)&&(!!r.isInSet(a)||!a.some(u=>u.type.excludes(r)))}const{ranges:o}=s;return o.some(({$from:a,$to:l})=>{let u=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(r):!1;return t.doc.nodesBetween(a.pos,l.pos,(d,h,f)=>{if(u)return!1;if(d.isInline){const p=!f||f.type.allowsMarkType(r),m=!!r.isInSet(d.marks)||!d.marks.some(g=>g.type.excludes(r));u=p&&m}return!u}),u})}var Hwe=(t,e={})=>({tr:r,state:n,dispatch:s})=>{const{selection:i}=r,{empty:o,ranges:a}=i,l=oa(t,n.schema);if(s)if(o){const u=Tie(n,l);r.addStoredMark(l.create({...u,...e}))}else a.forEach(u=>{const d=u.$from.pos,h=u.$to.pos;n.doc.nodesBetween(d,h,(f,p)=>{const m=Math.max(p,d),g=Math.min(p+f.nodeSize,h);f.marks.find(v=>v.type===l)?f.marks.forEach(v=>{l===v.type&&r.addMark(m,g,l.create({...v.attrs,...e}))}):r.addMark(m,g,l.create(e))})});return Uwe(n,r,l)},Kwe=(t,e)=>({tr:r})=>(r.setMeta(t,e),!0),Gwe=(t,e={})=>({state:r,dispatch:n,chain:s})=>{const i=Or(t,r.schema);let o;return r.selection.$anchor.sameParent(r.selection.$head)&&(o=r.selection.$anchor.parent.attrs),i.isTextblock?s().command(({commands:a})=>P3(i,{...o,...e})(r)?!0:a.clearNodes()).command(({state:a})=>P3(i,{...o,...e})(a,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Ywe=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,s=lc(t,0,n.content.size),i=Ae.create(n,s);e.setSelection(i)}return!0},Qwe=(t,e)=>({tr:r,state:n,dispatch:s})=>{const{selection:i}=n;let o,a;return typeof e=="number"?(o=e,a=e):e&&"from"in e&&"to"in e?(o=e.from,a=e.to):(o=i.from,a=i.to),s&&r.doc.nodesBetween(o,a,(l,u)=>{l.isText||r.setNodeMarkup(u,void 0,{...l.attrs,dir:t})}),!0},Xwe=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,{from:s,to:i}=typeof t=="number"?{from:t,to:t}:t,o=We.atStart(n).from,a=We.atEnd(n).to,l=lc(s,o,a),u=lc(i,o,a),d=We.create(n,l,u);e.setSelection(d)}return!0},Jwe=t=>({state:e,dispatch:r})=>{const n=Or(t,e.schema);return Hbe(n)(e,r)};function bF(t,e){const r=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(r){const n=r.filter(s=>e==null?void 0:e.includes(s.type.name));t.tr.ensureMarks(n)}}var Zwe=({keepMarks:t=!0}={})=>({tr:e,state:r,dispatch:n,editor:s})=>{const{selection:i,doc:o}=e,{$from:a,$to:l}=i,u=s.extensionManager.attributes,d=Uy(u,a.node().type.name,a.node().attrs);if(i instanceof Ae&&i.node.isBlock)return!a.parentOffset||!Fo(o,a.pos)?!1:(n&&(t&&bF(r,s.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const h=l.parentOffset===l.parent.content.size,f=a.depth===0?void 0:kwe(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=h&&f?[{type:f,attrs:d}]:void 0,m=Fo(e.doc,e.mapping.map(a.pos),1,p);if(!p&&!m&&Fo(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(m=!0,p=f?[{type:f,attrs:d}]:void 0),n){if(m&&(i instanceof We&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,p),f&&!h&&!a.parentOffset&&a.parent.type!==f)){const g=e.mapping.map(a.before()),y=e.doc.resolve(g);a.node(-1).canReplaceWith(y.index(),y.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}t&&bF(r,s.extensionManager.splittableMarks),e.scrollIntoView()}return m},eSe=(t,e={})=>({tr:r,state:n,dispatch:s,editor:i})=>{var o;const a=Or(t,n.schema),{$from:l,$to:u}=n.selection,d=n.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(u))return!1;const h=l.node(-1);if(h.type!==a)return!1;const f=i.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(s){let v=J.empty;const b=l.index(-1)?1:l.index(-2)?2:3;for(let _=l.depth-b;_>=l.depth-3;_-=1)v=J.from(l.node(_).copy(v));const w=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,x={...Uy(f,l.node().type.name,l.node().attrs),...e},S=((o=a.contentMatch.defaultType)==null?void 0:o.createAndFill(x))||void 0;v=v.append(J.from(a.createAndFill(null,S)||void 0));const E=l.before(l.depth-(b-1));r.replace(E,l.after(-w),new we(v,4-b,0));let N=-1;r.doc.nodesBetween(E,r.doc.content.size,(_,k)=>{if(N>-1)return!1;_.isTextblock&&_.content.size===0&&(N=k+1)}),N>-1&&r.setSelection(We.near(r.doc.resolve(N))),r.scrollIntoView()}return!0}const p=u.pos===l.end()?h.contentMatchAt(0).defaultType:null,m={...Uy(f,h.type.name,h.attrs),...e},g={...Uy(f,l.node().type.name,l.node().attrs),...e};r.delete(l.pos,u.pos);const y=p?[{type:a,attrs:m},{type:p,attrs:g}]:[{type:a,attrs:m}];if(!Fo(r.doc,l.pos,2))return!1;if(s){const{selection:v,storedMarks:b}=n,{splittableMarks:w}=i.extensionManager,x=b||v.$to.parentOffset&&v.$from.marks();if(r.split(l.pos,2,y).scrollIntoView(),!x||!s)return!0;const S=x.filter(E=>w.includes(E.type.name));r.ensureMarks(S)}return!0},A1=(t,e)=>{const r=Mb(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(Math.max(0,r.pos-1)).before(r.depth);if(n===void 0)return!0;const s=t.doc.nodeAt(n);return r.node.type===(s==null?void 0:s.type)&&Il(t.doc,r.pos)&&t.join(r.pos),!0},D1=(t,e)=>{const r=Mb(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(r.start).after(r.depth);if(n===void 0)return!0;const s=t.doc.nodeAt(n);return r.node.type===(s==null?void 0:s.type)&&Il(t.doc,n)&&t.join(n),!0},tSe=(t,e,r,n={})=>({editor:s,tr:i,state:o,dispatch:a,chain:l,commands:u,can:d})=>{const{extensions:h,splittableMarks:f}=s.extensionManager,p=Or(t,o.schema),m=Or(e,o.schema),{selection:g,storedMarks:y}=o,{$from:v,$to:b}=g,w=v.blockRange(b),x=y||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;const S=Mb(E=>vF(E.type.name,h))(g);if(w.depth>=1&&S&&w.depth-S.depth<=1){if(S.node.type===p)return u.liftListItem(m);if(vF(S.node.type.name,h)&&p.validContent(S.node.content)&&a)return l().command(()=>(i.setNodeMarkup(S.pos,p),!0)).command(()=>A1(i,p)).command(()=>D1(i,p)).run()}return!r||!x||!a?l().command(()=>d().wrapInList(p,n)?!0:u.clearNodes()).wrapInList(p,n).command(()=>A1(i,p)).command(()=>D1(i,p)).run():l().command(()=>{const E=d().wrapInList(p,n),N=x.filter(_=>f.includes(_.type.name));return i.ensureMarks(N),E?!0:u.clearNodes()}).wrapInList(p,n).command(()=>A1(i,p)).command(()=>D1(i,p)).run()},rSe=(t,e={},r={})=>({state:n,commands:s})=>{const{extendEmptyMarkRange:i=!1}=r,o=oa(t,n.schema);return vR(n,o,e)?s.unsetMark(o,{extendEmptyMarkRange:i}):s.setMark(o,e)},nSe=(t,e,r={})=>({state:n,commands:s})=>{const i=Or(t,n.schema),o=Or(e,n.schema),a=Nl(n,i,r);let l;return n.selection.$anchor.sameParent(n.selection.$head)&&(l=n.selection.$anchor.parent.attrs),a?s.setNode(o,l):s.setNode(i,{...l,...r})},sSe=(t,e={})=>({state:r,commands:n})=>{const s=Or(t,r.schema);return Nl(r,s,e)?n.lift(s):n.wrapIn(s,e)},iSe=()=>({state:t,dispatch:e})=>{const r=t.plugins;for(let n=0;n<r.length;n+=1){const s=r[n];let i;if(s.spec.isInputRules&&(i=s.getState(t))){if(e){const o=t.tr,a=i.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(i.text){const l=o.doc.resolve(i.from).marks();o.replaceWith(i.from,i.to,t.schema.text(i.text,l))}else o.delete(i.from,i.to)}return!0}}return!1},oSe=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,{empty:n,ranges:s}=r;return n||e&&s.forEach(i=>{t.removeMark(i.$from.pos,i.$to.pos)}),!0},aSe=(t,e={})=>({tr:r,state:n,dispatch:s})=>{var i;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=r,l=oa(t,n.schema),{$from:u,empty:d,ranges:h}=a;if(!s)return!0;if(d&&o){let{from:f,to:p}=a;const m=(i=u.marks().find(y=>y.type===l))==null?void 0:i.attrs,g=HA(u,l,m);g&&(f=g.from,p=g.to),r.removeMark(f,p,l)}else h.forEach(f=>{r.removeMark(f.$from.pos,f.$to.pos,l)});return r.removeStoredMark(l),!0},lSe=t=>({tr:e,state:r,dispatch:n})=>{const{selection:s}=r;let i,o;return typeof t=="number"?(i=t,o=t):t&&"from"in t&&"to"in t?(i=t.from,o=t.to):(i=s.from,o=s.to),n&&e.doc.nodesBetween(i,o,(a,l)=>{if(a.isText)return;const u={...a.attrs};delete u.dir,e.setNodeMarkup(l,void 0,u)}),!0},cSe=(t,e={})=>({tr:r,state:n,dispatch:s})=>{let i=null,o=null;const a=Rb(typeof t=="string"?t:t.name,n.schema);if(!a)return!1;a==="node"&&(i=Or(t,n.schema)),a==="mark"&&(o=oa(t,n.schema));let l=!1;return r.selection.ranges.forEach(u=>{const d=u.$from.pos,h=u.$to.pos;let f,p,m,g;r.selection.empty?n.doc.nodesBetween(d,h,(y,v)=>{i&&i===y.type&&(l=!0,m=Math.max(v,d),g=Math.min(v+y.nodeSize,h),f=v,p=y)}):n.doc.nodesBetween(d,h,(y,v)=>{v<d&&i&&i===y.type&&(l=!0,m=Math.max(v,d),g=Math.min(v+y.nodeSize,h),f=v,p=y),v>=d&&v<=h&&(i&&i===y.type&&(l=!0,s&&r.setNodeMarkup(v,void 0,{...y.attrs,...e})),o&&y.marks.length&&y.marks.forEach(b=>{if(o===b.type&&(l=!0,s)){const w=Math.max(v,d),x=Math.min(v+y.nodeSize,h);r.addMark(w,x,o.create({...b.attrs,...e}))}}))}),p&&(f!==void 0&&s&&r.setNodeMarkup(f,void 0,{...p.attrs,...e}),o&&p.marks.length&&p.marks.forEach(y=>{o===y.type&&s&&r.addMark(m,g,o.create({...y.attrs,...e}))}))}),l},uSe=(t,e={})=>({state:r,dispatch:n})=>{const s=Or(t,r.schema);return qbe(s,e)(r,n)},dSe=(t,e={})=>({state:r,dispatch:n})=>{const s=Or(t,r.schema);return Lbe(s,e)(r,n)},hSe=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const r=this.callbacks[t];return r&&r.forEach(n=>n.apply(this,e)),this}off(t,e){const r=this.callbacks[t];return r&&(e?this.callbacks[t]=r.filter(n=>n!==e):delete this.callbacks[t]),this}once(t,e){const r=(...n)=>{this.off(t,r),e.apply(this,n)};return this.on(t,r)}removeAllListeners(){this.callbacks={}}},Db=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},fSe=(t,e)=>{if(UA(e))return e.exec(t);const r=e(t);if(!r)return null;const n=[r.text];return n.index=r.index,n.input=t,n.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(r.replaceWith)),n};function ly(t){var e;const{editor:r,from:n,to:s,text:i,rules:o,plugin:a}=t,{view:l}=r;if(l.composing)return!1;const u=l.state.doc.resolve(n);if(u.parent.type.spec.code||(e=u.nodeBefore||u.nodeAfter)!=null&&e.marks.find(f=>f.type.spec.code))return!1;let d=!1;const h=qwe(u)+i;return o.forEach(f=>{if(d)return;const p=fSe(h,f.find);if(!p)return;const m=l.state.tr,g=Pb({state:l.state,transaction:m}),y={from:n-(p[0].length-i.length),to:s},{commands:v,chain:b,can:w}=new Ib({editor:r,state:g});f.handler({state:g,range:y,match:p,commands:v,chain:b,can:w})===null||!m.steps.length||(f.undoable&&m.setMeta(a,{transform:m,from:n,to:s,text:i}),l.dispatch(m),d=!0)}),d}function pSe(t){const{editor:e,rules:r}=t,n=new er({state:{init(){return null},apply(s,i,o){const a=s.getMeta(n);if(a)return a;const l=s.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:d}=l;typeof d=="string"?d=d:d=GA(J.from(d),o.schema);const{from:h}=l,f=h+d.length;ly({editor:e,from:h,to:f,text:d,rules:r,plugin:n})}),s.selectionSet||s.docChanged?null:i}},props:{handleTextInput(s,i,o,a){return ly({editor:e,from:i,to:o,text:a,rules:r,plugin:n})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:i}=s.state.selection;i&&ly({editor:e,from:i.pos,to:i.pos,text:"",rules:r,plugin:n})}),!1)},handleKeyDown(s,i){if(i.key!=="Enter")return!1;const{$cursor:o}=s.state.selection;return o?ly({editor:e,from:o.pos,to:o.pos,text:`
`,rules:r,plugin:n}):!1}},isInputRules:!0});return n}function mSe(t){return Object.prototype.toString.call(t).slice(8,-1)}function cy(t){return mSe(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Bie(t,e){const r={...t};return cy(t)&&cy(e)&&Object.keys(e).forEach(n=>{cy(e[n])&&cy(t[n])?r[n]=Bie(t[n],e[n]):r[n]=e[n]}),r}var QA=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...Et(Re(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Et(Re(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>Bie(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},pu=class zie extends QA{constructor(){super(...arguments),this.type="mark"}static create(e={}){const r=typeof e=="function"?e():e;return new zie(r)}static handleExit({editor:e,mark:r}){const{tr:n}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const o=s.marks();if(!!!o.find(u=>(u==null?void 0:u.type.name)===r.name))return!1;const l=o.find(u=>(u==null?void 0:u.type.name)===r.name);return l&&n.removeStoredMark(l),n.insertText(" ",s.pos),e.view.dispatch(n),!0}return!1}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function gSe(t){return typeof t=="number"}var ySe=class{constructor(t){this.find=t.find,this.handler=t.handler}},vSe=(t,e,r)=>{if(UA(e))return[...t.matchAll(e)];const n=e(t,r);return n?n.map(s=>{const i=[s.text];return i.index=s.index,i.input=t,i.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(s.replaceWith)),i}):[]};function bSe(t){const{editor:e,state:r,from:n,to:s,rule:i,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:u,can:d}=new Ib({editor:e,state:r}),h=[];return r.doc.nodesBetween(n,s,(p,m)=>{var g,y,v,b,w;if((y=(g=p.type)==null?void 0:g.spec)!=null&&y.code||!(p.isText||p.isTextblock||p.isInline))return;const x=(w=(b=(v=p.content)==null?void 0:v.size)!=null?b:p.nodeSize)!=null?w:0,S=Math.max(n,m),E=Math.min(s,m+x);if(S>=E)return;const N=p.isText?p.text||"":p.textBetween(S-m,E-m,void 0,"");vSe(N,i.find,o).forEach(k=>{if(k.index===void 0)return;const j=S+k.index+1,T=j+k[0].length,P={from:r.tr.mapping.map(j),to:r.tr.mapping.map(T)},O=i.handler({state:r,range:P,match:k,commands:l,chain:u,can:d,pasteEvent:o,dropEvent:a});h.push(O)})}),h.every(p=>p!==null)}var uy=null,xSe=t=>{var e;const r=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=r.clipboardData)==null||e.setData("text/html",t),r};function wSe(t){const{editor:e,rules:r}=t;let n=null,s=!1,i=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:d,from:h,to:f,rule:p,pasteEvt:m})=>{const g=d.tr,y=Pb({state:d,transaction:g});if(!(!bSe({editor:e,state:y,from:Math.max(h-1,0),to:f.b-1,rule:p,pasteEvent:m,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return r.map(d=>new er({view(h){const f=m=>{var g;n=(g=h.dom.parentElement)!=null&&g.contains(m.target)?h.dom.parentElement:null,n&&(uy=e)},p=()=>{uy&&(uy=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(h,f)=>{if(i=n===h.dom.parentElement,a=f,!i){const p=uy;p!=null&&p.isEditable&&setTimeout(()=>{const m=p.state.selection;m&&p.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(h,f)=>{var p;const m=(p=f.clipboardData)==null?void 0:p.getData("text/html");return o=f,s=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(h,f,p)=>{const m=h[0],g=m.getMeta("uiEvent")==="paste"&&!s,y=m.getMeta("uiEvent")==="drop"&&!i,v=m.getMeta("applyPasteRules"),b=!!v;if(!g&&!y&&!b)return;if(b){let{text:S}=v;typeof S=="string"?S=S:S=GA(J.from(S),p.schema);const{from:E}=v,N=E+S.length,_=xSe(S);return l({rule:d,state:p,from:E,to:{b:N},pasteEvt:_})}const w=f.doc.content.findDiffStart(p.doc.content),x=f.doc.content.findDiffEnd(p.doc.content);if(!(!gSe(w)||!x||w===x.b))return l({rule:d,state:p,from:w,to:x,pasteEvt:o})}}))}var $b=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=Rie(t),this.schema=Iwe(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:ay(e.name,this.schema)},n=Re(e,"addCommands",r);return n?{...t,...n()}:t},{})}get plugins(){const{editor:t}=this;return Xv([...this.extensions].reverse()).flatMap(n=>{const s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:ay(n.name,this.schema)},i=[],o=Re(n,"addKeyboardShortcuts",s);let a={};if(n.type==="mark"&&Re(n,"exitable",s)&&(a.ArrowRight=()=>pu.handleExit({editor:t,mark:n})),o){const f=Object.fromEntries(Object.entries(o()).map(([p,m])=>[p,()=>m({editor:t})]));a={...a,...f}}const l=A1e(a);i.push(l);const u=Re(n,"addInputRules",s);if(yF(n,t.options.enableInputRules)&&u){const f=u();if(f&&f.length){const p=pSe({editor:t,rules:f}),m=Array.isArray(p)?p:[p];i.push(...m)}}const d=Re(n,"addPasteRules",s);if(yF(n,t.options.enablePasteRules)&&d){const f=d();if(f&&f.length){const p=wSe({editor:t,rules:f});i.push(...p)}}const h=Re(n,"addProseMirrorPlugins",s);if(h){const f=h();i.push(...f)}return i})}get attributes(){return Iie(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=fh(this.extensions);return Object.fromEntries(e.filter(r=>!!Re(r,"addNodeView")).map(r=>{const n=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:Or(r.name,this.schema)},i=Re(r,"addNodeView",s);if(!i)return[];const o=i();if(!o)return[];const a=(l,u,d,h,f)=>{const p=nm(l,n);return o({node:l,view:u,getPos:d,decorations:h,innerDecorations:f,editor:t,extension:r,HTMLAttributes:p})};return[r.name,a]}))}dispatchTransaction(t){const{editor:e}=this;return Xv([...this.extensions].reverse()).reduceRight((n,s)=>{const i={name:s.name,options:s.options,storage:this.editor.extensionStorage[s.name],editor:e,type:ay(s.name,this.schema)},o=Re(s,"dispatchTransaction",i);return o?a=>{o.call(i,{transaction:a,next:n})}:n},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=fh(this.extensions);return Object.fromEntries(e.filter(r=>!!Re(r,"addMarkView")).map(r=>{const n=this.attributes.filter(a=>a.type===r.name),s={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:oa(r.name,this.schema)},i=Re(r,"addMarkView",s);if(!i)return[];const o=(a,l,u)=>{const d=nm(a,n);return i()({mark:a,view:l,inline:u,editor:t,extension:r,HTMLAttributes:d,updateAttributes:h=>{ASe(a,t,h)}})};return[r.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var r;const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:ay(e.name,this.schema)};e.type==="mark"&&((r=Et(Re(e,"keepOnSplit",n)))==null||r)&&this.splittableMarks.push(e.name);const s=Re(e,"onBeforeCreate",n),i=Re(e,"onCreate",n),o=Re(e,"onUpdate",n),a=Re(e,"onSelectionUpdate",n),l=Re(e,"onTransaction",n),u=Re(e,"onFocus",n),d=Re(e,"onBlur",n),h=Re(e,"onDestroy",n);s&&this.editor.on("beforeCreate",s),i&&this.editor.on("create",i),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),u&&this.editor.on("focus",u),d&&this.editor.on("blur",d),h&&this.editor.on("destroy",h)})}};$b.resolve=Rie;$b.sort=Xv;$b.flatten=KA;var SSe={};VA(SSe,{ClipboardTextSerializer:()=>Vie,Commands:()=>Uie,Delete:()=>Hie,Drop:()=>Kie,Editable:()=>Gie,FocusEvents:()=>Qie,Keymap:()=>Xie,Paste:()=>Jie,Tabindex:()=>Zie,TextDirection:()=>eoe,focusEventsPluginKey:()=>Yie});var xr=class Wie extends QA{constructor(){super(...arguments),this.type="extension"}static create(e={}){const r=typeof e=="function"?e():e;return new Wie(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}},Vie=xr.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new er({key:new Lr("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:r}=t,{doc:n,selection:s}=e,{ranges:i}=s,o=Math.min(...i.map(d=>d.$from.pos)),a=Math.max(...i.map(d=>d.$to.pos)),l=Aie(r);return Mie(n,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),Uie=xr.create({name:"commands",addCommands(){return{...Eie}}}),Hie=xr.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var r,n,s;const i=()=>{var o,a,l,u;if((u=(l=(a=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,t))!=null?u:t.getMeta("y-sync$"))return;const d=Oie(t.before,[t,...e]);$ie(d).forEach(p=>{d.mapping.mapResult(p.oldRange.from).deletedAfter&&d.mapping.mapResult(p.oldRange.to).deletedBefore&&d.before.nodesBetween(p.oldRange.from,p.oldRange.to,(m,g)=>{const y=g+m.nodeSize-2,v=p.oldRange.from<=g&&y<=p.oldRange.to;this.editor.emit("delete",{type:"node",node:m,from:g,to:y,newFrom:d.mapping.map(g),newTo:d.mapping.map(y),deletedRange:p.oldRange,newRange:p.newRange,partial:!v,editor:this.editor,transaction:t,combinedTransform:d})})});const f=d.mapping;d.steps.forEach((p,m)=>{var g,y;if(p instanceof Si){const v=f.slice(m).map(p.from,-1),b=f.slice(m).map(p.to),w=f.invert().map(v,-1),x=f.invert().map(b),S=(g=d.doc.nodeAt(v-1))==null?void 0:g.marks.some(N=>N.eq(p.mark)),E=(y=d.doc.nodeAt(b))==null?void 0:y.marks.some(N=>N.eq(p.mark));this.editor.emit("delete",{type:"mark",mark:p.mark,from:p.from,to:p.to,deletedRange:{from:w,to:x},newRange:{from:v,to:b},partial:!!(E||S),editor:this.editor,transaction:t,combinedTransform:d})}})};(s=(n=(r=this.editor.options.coreExtensionOptions)==null?void 0:r.delete)==null?void 0:n.async)==null||s?setTimeout(i,0):i()}}),Kie=xr.create({name:"drop",addProseMirrorPlugins(){return[new er({key:new Lr("tiptapDrop"),props:{handleDrop:(t,e,r,n)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:r,moved:n})}}})]}}),Gie=xr.create({name:"editable",addProseMirrorPlugins(){return[new er({key:new Lr("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Yie=new Lr("focusEvents"),Qie=xr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new er({key:Yie,props:{handleDOMEvents:{focus:(e,r)=>{t.isFocused=!0;const n=t.state.tr.setMeta("focus",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1},blur:(e,r)=>{t.isFocused=!1;const n=t.state.tr.setMeta("blur",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1}}}})]}}),Xie=xr.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:u}=a,{empty:d,$anchor:h}=l,{pos:f,parent:p}=h,m=h.parent.isTextblock&&f>0?a.doc.resolve(f-1):h,g=m.parent.type.spec.isolating,y=h.pos-h.parentOffset,v=g&&m.parent.childCount===1?y===h.pos:Ze.atStart(u).from===f;return!d||!p.type.isTextblock||p.textContent.length||!v||v&&h.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...n},i={...n,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Qv()||jie()?i:s},addProseMirrorPlugins(){return[new er({key:new Lr("clearDocument"),appendTransaction:(t,e,r)=>{if(t.some(g=>g.getMeta("composition")))return;const n=t.some(g=>g.docChanged)&&!e.doc.eq(r.doc),s=t.some(g=>g.getMeta("preventClearDocument"));if(!n||s)return;const{empty:i,from:o,to:a}=e.selection,l=Ze.atStart(e.doc).from,u=Ze.atEnd(e.doc).to;if(i||!(o===l&&a===u)||!Ab(r.doc))return;const f=r.tr,p=Pb({state:r,transaction:f}),{commands:m}=new Ib({editor:this.editor,state:p});if(m.clearNodes(),!!f.steps.length)return f}})]}}),Jie=xr.create({name:"paste",addProseMirrorPlugins(){return[new er({key:new Lr("tiptapPaste"),props:{handlePaste:(t,e,r)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:r})}}})]}}),Zie=xr.create({name:"tabindex",addProseMirrorPlugins(){return[new er({key:new Lr("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),eoe=xr.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=fh(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const r=e.getAttribute("dir");return r&&(r==="ltr"||r==="rtl"||r==="auto")?r:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new er({key:new Lr("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),ESe=class Zu{constructor(e,r,n=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=r,this.currentNode=s}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let r=this.from,n=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}r=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:r,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),r=this.resolvedPos.doc.resolve(e);return new Zu(r,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Zu(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Zu(e,this.editor)}get children(){const e=[];return this.node.content.forEach((r,n)=>{const s=r.isBlock&&!r.isTextblock,i=r.isAtom&&!r.isText,o=this.pos+n+(i?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(o);if(!s&&a.depth<=this.depth)return;const l=new Zu(a,this.editor,s,s?r:null);s&&(l.actualDepth=this.depth+1),e.push(new Zu(a,this.editor,s,s?r:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,r={}){let n=null,s=this.parent;for(;s&&!n;){if(s.node.type.name===e)if(Object.keys(r).length>0){const i=s.node.attrs,o=Object.keys(r);for(let a=0;a<o.length;a+=1){const l=o[a];if(i[l]!==r[l])break}}else n=s;s=s.parent}return n}querySelector(e,r={}){return this.querySelectorAll(e,r,!0)[0]||null}querySelectorAll(e,r={},n=!1){let s=[];if(!this.children||this.children.length===0)return s;const i=Object.keys(r);return this.children.forEach(o=>{n&&s.length>0||(o.node.type.name===e&&i.every(l=>r[l]===o.node.attrs[l])&&s.push(o),!(n&&s.length>0)&&(s=s.concat(o.querySelectorAll(e,r,n))))}),s}setAttribute(e){const{tr:r}=this.editor.state;r.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(r)}},_Se=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function NSe(t,e,r){const n=document.querySelector("style[data-tiptap-style]");if(n!==null)return n;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(s),s}var CSe=class extends hSe{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:Wwe,createMappablePosition:Vwe},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:s,moved:i})=>this.options.onDrop(n,s,i)),this.on("paste",({event:n,slice:s})=>this.options.onPaste(n,s)),this.on("delete",this.options.onDelete);const e=this.createDoc(),r=Cie(e,this.options.autofocus);this.editorState=pd.create({doc:e,schema:this.schema,selection:r||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=NSe(_Se,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const r=Pie(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let r=e;if([].concat(t).forEach(s=>{const i=typeof s=="string"?`${s}$`:s.key;r=r.filter(o=>!o.key.startsWith(i))}),e.length===r.length)return;const n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}createExtensionManager(){var t,e;const n=[...this.options.enableCoreExtensions?[Gie,Vie.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),Uie,Qie,Xie,Zie,Kie,Jie,Hie,eoe.configure({direction:this.options.textDirection})].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new $b(n,this)}createCommandManager(){this.commandManager=new Ib({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=yR(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(r=>r.name!=="collaboration"),this.createExtensionManager()}}),t=yR(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:r}=this.options,n=e.dispatchTransaction||this.dispatchTransaction.bind(this),s=r?this.extensionManager.dispatchTransaction(n):n;this.editorView=new wie(t,{...e,attributes:{role:"textbox",...e==null?void 0:e.attributes},dispatchTransaction:s,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.prependClass(),this.injectCSS();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(u=>{var d;return(d=this.capturedTransaction)==null?void 0:d.step(u)});return}const{state:e,transactions:r}=this.state.applyTransaction(t),n=!this.state.selection.eq(e.selection),s=r.includes(t),i=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!s)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:r.slice(1)}),n&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=r.findLast(u=>u.getMeta("focus")||u.getMeta("blur")),a=o==null?void 0:o.getMeta("focus"),l=o==null?void 0:o.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:o}),l&&this.emit("blur",{editor:this,event:l.event,transaction:o}),!(t.getMeta("preventUpdate")||!r.some(u=>u.docChanged)||i.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:r.slice(1)})}getAttributes(t){return Die(this.state,t)}isActive(t,e){const r=typeof t=="string"?t:null,n=typeof t=="string"?e:t;return Lwe(this.state,r,n)}getJSON(){return this.state.doc.toJSON()}getHTML(){return GA(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:r={}}=t||{};return Mwe(this.state.doc,{blockSeparator:e,textSerializers:{...Aie(this.schema),...r}})}get isEmpty(){return Ab(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelector(t,e))||null}$nodes(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new ESe(e,this)}get $doc(){return this.$pos(0)}};function ph(t){return new Db({find:t.find,handler:({state:e,range:r,match:n})=>{const s=Et(t.getAttributes,void 0,n);if(s===!1||s===null)return null;const{tr:i}=e,o=n[n.length-1],a=n[0];if(o){const l=a.search(/\S/),u=r.from+a.indexOf(o),d=u+o.length;if(YA(r.from,r.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===t.type&&g!==p.mark.type)).filter(p=>p.to>u).length)return null;d<r.to&&i.delete(d,r.to),u>r.from&&i.delete(r.from+l,u);const f=r.from+l+o.length;i.addMark(r.from+l,f,t.type.create(s||{})),i.removeStoredMark(t.type)}},undoable:t.undoable})}function kSe(t){return new Db({find:t.find,handler:({state:e,range:r,match:n})=>{const s=Et(t.getAttributes,void 0,n)||{},{tr:i}=e,o=r.from;let a=r.to;const l=t.type.create(s);if(n[1]){const u=n[0].lastIndexOf(n[1]);let d=o+u;d>a?d=a:a=d+n[1].length;const h=n[0][n[0].length-1];i.insertText(h,o+n[0].length-1),i.replaceWith(d,a,l)}else if(n[0]){const u=t.type.isInline?o:o-1;i.insert(u,t.type.create(s)).delete(i.mapping.map(o),i.mapping.map(a))}i.scrollIntoView()},undoable:t.undoable})}function bR(t){return new Db({find:t.find,handler:({state:e,range:r,match:n})=>{const s=e.doc.resolve(r.from),i=Et(t.getAttributes,void 0,n)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t.type))return null;e.tr.delete(r.from,r.to).setBlockType(r.from,r.from,t.type,i)},undoable:t.undoable})}function mh(t){return new Db({find:t.find,handler:({state:e,range:r,match:n,chain:s})=>{const i=Et(t.getAttributes,void 0,n)||{},o=e.tr.delete(r.from,r.to),l=o.doc.resolve(r.from).blockRange(),u=l&&jA(l,t.type,i);if(!u)return null;if(o.wrap(l,u),t.keepMarks&&t.editor){const{selection:h,storedMarks:f}=e,{splittableMarks:p}=t.editor.extensionManager,m=f||h.$to.parentOffset&&h.$from.marks();if(m){const g=m.filter(y=>p.includes(y.type.name));o.ensureMarks(g)}}if(t.keepAttributes){const h=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(h,i).run()}const d=o.doc.resolve(r.from-1).nodeBefore;d&&d.type===t.type&&Il(o.doc,r.from-1)&&(!t.joinPredicate||t.joinPredicate(n,d))&&o.join(r.from-1)},undoable:t.undoable})}function jSe(t,e){const{selection:r}=t,{$from:n}=r;if(r instanceof Ae){const i=n.index();return n.parent.canReplaceWith(i,i+1,e)}let s=n.depth;for(;s>=0;){const i=n.index(s);if(n.node(s).contentMatchAt(i).matchType(e))return!0;s-=1}return!1}var TSe={};VA(TSe,{createAtomBlockMarkdownSpec:()=>OSe,createBlockMarkdownSpec:()=>PSe,createInlineMarkdownSpec:()=>MSe,parseAttributes:()=>XA,parseIndentedBlocks:()=>xR,renderNestedMarkdownContent:()=>ZA,serializeAttributes:()=>JA});function XA(t){if(!(t!=null&&t.trim()))return{};const e={},r=[],n=t.replace(/["']([^"']*)["']/g,u=>(r.push(u),`__QUOTED_${r.length-1}__`)),s=n.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(s){const u=s.map(d=>d.trim().slice(1));e.class=u.join(" ")}const i=n.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);i&&(e.id=i[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(n.matchAll(o)).forEach(([,u,d])=>{var h;const f=parseInt(((h=d.match(/__QUOTED_(\d+)__/))==null?void 0:h[1])||"0",10),p=r[f];p&&(e[u]=p.slice(1,-1))});const l=n.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(d=>{d.match(/^[a-zA-Z][\w-]*$/)&&(e[d]=!0)}),e}function JA(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(n=>e.push(`.${n}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([r,n])=>{r==="class"||r==="id"||(n===!0?e.push(r):n!==!1&&n!=null&&e.push(`${r}="${String(n)}"`))}),e.join(" ")}function OSe(t){const{nodeName:e,name:r,parseAttributes:n=XA,serializeAttributes:s=JA,defaultAttributes:i={},requiredAttributes:o=[],allowedAttributes:a}=t,l=r||e,u=d=>{if(!a)return d;const h={};return a.forEach(f=>{f in d&&(h[f]=d[f])}),h};return{parseMarkdown:(d,h)=>{const f={...i,...d.attributes};return h.createNode(e,f,[])},markdownTokenizer:{name:e,level:"block",start(d){var h;const f=new RegExp(`^:::${l}(?:\\s|$)`,"m"),p=(h=d.match(f))==null?void 0:h.index;return p!==void 0?p:-1},tokenize(d,h,f){const p=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),m=d.match(p);if(!m)return;const g=m[1]||"",y=n(g);if(!o.find(b=>!(b in y)))return{type:e,raw:m[0],attributes:y}}},renderMarkdown:d=>{const h=u(d.attrs||{}),f=s(h),p=f?` {${f}}`:"";return`:::${l}${p} :::`}}}function PSe(t){const{nodeName:e,name:r,getContent:n,parseAttributes:s=XA,serializeAttributes:i=JA,defaultAttributes:o={},content:a="block",allowedAttributes:l}=t,u=r||e,d=h=>{if(!l)return h;const f={};return l.forEach(p=>{p in h&&(f[p]=h[p])}),f};return{parseMarkdown:(h,f)=>{let p;if(n){const g=n(h);p=typeof g=="string"?[{type:"text",text:g}]:g}else a==="block"?p=f.parseChildren(h.tokens||[]):p=f.parseInline(h.tokens||[]);const m={...o,...h.attributes};return f.createNode(e,m,p)},markdownTokenizer:{name:e,level:"block",start(h){var f;const p=new RegExp(`^:::${u}`,"m"),m=(f=h.match(p))==null?void 0:f.index;return m!==void 0?m:-1},tokenize(h,f,p){var m;const g=new RegExp(`^:::${u}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),y=h.match(g);if(!y)return;const[v,b=""]=y,w=s(b);let x=1;const S=v.length;let E="";const N=/^:::([\w-]*)(\s.*)?/gm,_=h.slice(S);for(N.lastIndex=0;;){const k=N.exec(_);if(k===null)break;const j=k.index,T=k[1];if(!((m=k[2])!=null&&m.endsWith(":::"))){if(T)x+=1;else if(x-=1,x===0){const P=_.slice(0,j);E=P.trim();const O=h.slice(0,S+j+k[0].length);let D=[];if(E)if(a==="block")for(D=p.blockTokens(P),D.forEach(F=>{F.text&&(!F.tokens||F.tokens.length===0)&&(F.tokens=p.inlineTokens(F.text))});D.length>0;){const F=D[D.length-1];if(F.type==="paragraph"&&(!F.text||F.text.trim()===""))D.pop();else break}else D=p.inlineTokens(E);return{type:e,raw:O,attributes:w,content:E,tokens:D}}}}}},renderMarkdown:(h,f)=>{const p=d(h.attrs||{}),m=i(p),g=m?` {${m}}`:"",y=f.renderChildren(h.content||[],`

`);return`:::${u}${g}

${y}

:::`}}}function ISe(t){if(!t.trim())return{};const e={},r=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let n=r.exec(t);for(;n!==null;){const[,s,i,o]=n;e[s]=i||o,n=r.exec(t)}return e}function RSe(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,r])=>`${e}="${r}"`).join(" ")}function MSe(t){const{nodeName:e,name:r,getContent:n,parseAttributes:s=ISe,serializeAttributes:i=RSe,defaultAttributes:o={},selfClosing:a=!1,allowedAttributes:l}=t,u=r||e,d=f=>{if(!l)return f;const p={};return l.forEach(m=>{const g=typeof m=="string"?m:m.name,y=typeof m=="string"?void 0:m.skipIfDefault;if(g in f){const v=f[g];if(y!==void 0&&v===y)return;p[g]=v}}),p},h=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(f,p)=>{const m={...o,...f.attributes};if(a)return p.createNode(e,m);const g=n?n(f):f.content||"";return g?p.createNode(e,m,[p.createTextNode(g)]):p.createNode(e,m,[])},markdownTokenizer:{name:e,level:"inline",start(f){const p=a?new RegExp(`\\[${h}\\s*[^\\]]*\\]`):new RegExp(`\\[${h}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${h}\\]`),m=f.match(p),g=m==null?void 0:m.index;return g!==void 0?g:-1},tokenize(f,p,m){const g=a?new RegExp(`^\\[${h}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${h}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${h}\\]`),y=f.match(g);if(!y)return;let v="",b="";if(a){const[,x]=y;b=x}else{const[,x,S]=y;b=x,v=S||""}const w=s(b.trim());return{type:e,raw:y[0],content:v.trim(),attributes:w}}},renderMarkdown:f=>{let p="";n?p=n(f):f.content&&f.content.length>0&&(p=f.content.filter(v=>v.type==="text").map(v=>v.text).join(""));const m=d(f.attrs||{}),g=i(m),y=g?` ${g}`:"";return a?`[${u}${y}]`:`[${u}${y}]${p}[/${u}]`}}}function xR(t,e,r){var n,s,i,o;const a=t.split(`
`),l=[];let u="",d=0;const h=e.baseIndentSize||2;for(;d<a.length;){const f=a[d],p=f.match(e.itemPattern);if(!p){if(l.length>0)break;if(f.trim()===""){d+=1,u=`${u}${f}
`;continue}else return}const m=e.extractItemData(p),{indentLevel:g,mainContent:y}=m;u=`${u}${f}
`;const v=[y];for(d+=1;d<a.length;){const S=a[d];if(S.trim()===""){const N=a.slice(d+1).findIndex(j=>j.trim()!=="");if(N===-1)break;if((((s=(n=a[d+1+N].match(/^(\s*)/))==null?void 0:n[1])==null?void 0:s.length)||0)>g){v.push(S),u=`${u}${S}
`,d+=1;continue}else break}if((((o=(i=S.match(/^(\s*)/))==null?void 0:i[1])==null?void 0:o.length)||0)>g)v.push(S),u=`${u}${S}
`,d+=1;else break}let b;const w=v.slice(1);if(w.length>0){const S=w.map(E=>E.slice(g+h)).join(`
`);S.trim()&&(e.customNestedParser?b=e.customNestedParser(S):b=r.blockTokens(S))}const x=e.createToken(m,b);l.push(x)}if(l.length!==0)return{items:l,raw:u}}function ZA(t,e,r,n){if(!t||!Array.isArray(t.content))return"";const s=typeof r=="function"?r(n):r,[i,...o]=t.content,a=e.renderChildren([i]),l=[`${s}${a}`];return o&&o.length>0&&o.forEach(u=>{const d=e.renderChildren([u]);if(d){const h=d.split(`
`).map(f=>f?e.indent(f):"").join(`
`);l.push(h)}}),l.join(`
`)}function ASe(t,e,r={}){const{state:n}=e,{doc:s,tr:i}=n,o=t;s.descendants((a,l)=>{const u=i.mapping.map(l),d=i.mapping.map(l)+a.nodeSize;let h=null;if(a.marks.forEach(p=>{if(p!==o)return!1;h=p}),!h)return;let f=!1;if(Object.keys(r).forEach(p=>{r[p]!==h.attrs[p]&&(f=!0)}),f){const p=t.type.create({...t.attrs,...r});i.removeMark(u,d,t.type),i.addMark(u,d,p)}}),i.docChanged&&e.view.dispatch(i)}var Ps=class toe extends QA{constructor(){super(...arguments),this.type="node"}static create(e={}){const r=typeof e=="function"?e():e;return new toe(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function eu(t){return new ySe({find:t.find,handler:({state:e,range:r,match:n,pasteEvent:s})=>{const i=Et(t.getAttributes,void 0,n,s);if(i===!1||i===null)return null;const{tr:o}=e,a=n[n.length-1],l=n[0];let u=r.to;if(a){const d=l.search(/\S/),h=r.from+l.indexOf(a),f=h+a.length;if(YA(r.from,r.to,e.doc).filter(m=>m.mark.type.excluded.find(y=>y===t.type&&y!==m.mark.type)).filter(m=>m.to>h).length)return null;f<r.to&&o.delete(f,r.to),h>r.from&&o.delete(r.from+d,h),u=r.from+d+a.length,o.addMark(r.from+d,u,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:DSe,getOwnPropertySymbols:$Se}=Object,{hasOwnProperty:FSe}=Object.prototype;function $1(t,e){return function(n,s,i){return t(n,s,i)&&e(n,s,i)}}function dy(t){return function(r,n,s){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,s);const{cache:i}=s,o=i.get(r),a=i.get(n);if(o&&a)return o===n&&a===r;i.set(r,n),i.set(n,r);const l=t(r,n,s);return i.delete(r),i.delete(n),l}}function qSe(t){return t!=null?t[Symbol.toStringTag]:void 0}function xF(t){return DSe(t).concat($Se(t))}const LSe=Object.hasOwn||((t,e)=>FSe.call(t,e));function mu(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const BSe="__v",zSe="__o",WSe="_owner",{getOwnPropertyDescriptor:wF,keys:SF}=Object;function VSe(t,e){return t.byteLength===e.byteLength&&Jv(new Uint8Array(t),new Uint8Array(e))}function USe(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function HSe(t,e){return t.byteLength===e.byteLength&&Jv(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function KSe(t,e){return mu(t.getTime(),e.getTime())}function GSe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function YSe(t,e){return t===e}function EF(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const s=new Array(n),i=t.entries();let o,a,l=0;for(;(o=i.next())&&!o.done;){const u=e.entries();let d=!1,h=0;for(;(a=u.next())&&!a.done;){if(s[h]){h++;continue}const f=o.value,p=a.value;if(r.equals(f[0],p[0],l,h,t,e,r)&&r.equals(f[1],p[1],f[0],p[0],t,e,r)){d=s[h]=!0;break}h++}if(!d)return!1;l++}return!0}const QSe=mu;function XSe(t,e,r){const n=SF(t);let s=n.length;if(SF(e).length!==s)return!1;for(;s-- >0;)if(!roe(t,e,r,n[s]))return!1;return!0}function If(t,e,r){const n=xF(t);let s=n.length;if(xF(e).length!==s)return!1;let i,o,a;for(;s-- >0;)if(i=n[s],!roe(t,e,r,i)||(o=wF(t,i),a=wF(e,i),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function JSe(t,e){return mu(t.valueOf(),e.valueOf())}function ZSe(t,e){return t.source===e.source&&t.flags===e.flags}function _F(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const s=new Array(n),i=t.values();let o,a;for(;(o=i.next())&&!o.done;){const l=e.values();let u=!1,d=0;for(;(a=l.next())&&!a.done;){if(!s[d]&&r.equals(o.value,a.value,o.value,a.value,t,e,r)){u=s[d]=!0;break}d++}if(!u)return!1}return!0}function Jv(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function eEe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function roe(t,e,r,n){return(n===WSe||n===zSe||n===BSe)&&(t.$$typeof||e.$$typeof)?!0:LSe(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const tEe="[object ArrayBuffer]",rEe="[object Arguments]",nEe="[object Boolean]",sEe="[object DataView]",iEe="[object Date]",oEe="[object Error]",aEe="[object Map]",lEe="[object Number]",cEe="[object Object]",uEe="[object RegExp]",dEe="[object Set]",hEe="[object String]",fEe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},pEe="[object URL]",mEe=Object.prototype.toString;function gEe({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:a,areObjectsEqual:l,arePrimitiveWrappersEqual:u,areRegExpsEqual:d,areSetsEqual:h,areTypedArraysEqual:f,areUrlsEqual:p,unknownTagComparators:m}){return function(y,v,b){if(y===v)return!0;if(y==null||v==null)return!1;const w=typeof y;if(w!==typeof v)return!1;if(w!=="object")return w==="number"?a(y,v,b):w==="function"?i(y,v,b):!1;const x=y.constructor;if(x!==v.constructor)return!1;if(x===Object)return l(y,v,b);if(Array.isArray(y))return e(y,v,b);if(x===Date)return n(y,v,b);if(x===RegExp)return d(y,v,b);if(x===Map)return o(y,v,b);if(x===Set)return h(y,v,b);const S=mEe.call(y);if(S===iEe)return n(y,v,b);if(S===uEe)return d(y,v,b);if(S===aEe)return o(y,v,b);if(S===dEe)return h(y,v,b);if(S===cEe)return typeof y.then!="function"&&typeof v.then!="function"&&l(y,v,b);if(S===pEe)return p(y,v,b);if(S===oEe)return s(y,v,b);if(S===rEe)return l(y,v,b);if(fEe[S])return f(y,v,b);if(S===tEe)return t(y,v,b);if(S===sEe)return r(y,v,b);if(S===nEe||S===lEe||S===hEe)return u(y,v,b);if(m){let E=m[S];if(!E){const N=qSe(y);N&&(E=m[N])}if(E)return E(y,v,b)}return!1}}function yEe({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:VSe,areArraysEqual:r?If:USe,areDataViewsEqual:HSe,areDatesEqual:KSe,areErrorsEqual:GSe,areFunctionsEqual:YSe,areMapsEqual:r?$1(EF,If):EF,areNumbersEqual:QSe,areObjectsEqual:r?If:XSe,arePrimitiveWrappersEqual:JSe,areRegExpsEqual:ZSe,areSetsEqual:r?$1(_F,If):_F,areTypedArraysEqual:r?$1(Jv,If):Jv,areUrlsEqual:eEe,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const s=dy(n.areArraysEqual),i=dy(n.areMapsEqual),o=dy(n.areObjectsEqual),a=dy(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:a})}return n}function vEe(t){return function(e,r,n,s,i,o,a){return t(e,r,a)}}function bEe({circular:t,comparator:e,createState:r,equals:n,strict:s}){if(r)return function(a,l){const{cache:u=t?new WeakMap:void 0,meta:d}=r();return e(a,l,{cache:u,equals:n,meta:d,strict:s})};if(t)return function(a,l){return e(a,l,{cache:new WeakMap,equals:n,meta:void 0,strict:s})};const i={cache:void 0,equals:n,meta:void 0,strict:s};return function(a,l){return e(a,l,i)}}const xEe=Ml();Ml({strict:!0});Ml({circular:!0});Ml({circular:!0,strict:!0});Ml({createInternalComparator:()=>mu});Ml({strict:!0,createInternalComparator:()=>mu});Ml({circular:!0,createInternalComparator:()=>mu});Ml({circular:!0,createInternalComparator:()=>mu,strict:!0});function Ml(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:s=!1}=t,i=yEe(t),o=gEe(i),a=r?r(o):vEe(o);return bEe({circular:e,comparator:o,createState:n,equals:a,strict:s})}var noe={exports:{}},soe={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fb=C,wEe=NA;function SEe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var EEe=typeof Object.is=="function"?Object.is:SEe,_Ee=wEe.useSyncExternalStore,NEe=Fb.useRef,CEe=Fb.useEffect,kEe=Fb.useMemo,jEe=Fb.useDebugValue;soe.useSyncExternalStoreWithSelector=function(t,e,r,n,s){var i=NEe(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=kEe(function(){function l(p){if(!u){if(u=!0,d=p,p=n(p),s!==void 0&&o.hasValue){var m=o.value;if(s(m,p))return h=m}return h=p}if(m=h,EEe(d,p))return m;var g=n(p);return s!==void 0&&s(m,g)?(d=p,m):(d=p,h=g)}var u=!1,d,h,f=r===void 0?null:r;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,r,n,s]);var a=_Ee(t,i[0],i[1]);return CEe(function(){o.hasValue=!0,o.value=a},[a]),jEe(a),a};noe.exports=soe;var TEe=noe.exports,OEe=(...t)=>e=>{t.forEach(r=>{typeof r=="function"?r(e):r&&(r.current=e)})},PEe=({contentComponent:t})=>{const e=NA.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return c.jsx(c.Fragment,{children:Object.values(e)})};function IEe(){const t=new Set;let e={};return{subscribe(r){return t.add(r),()=>{t.delete(r)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(r,n){e={...e,[r]:Kte.createPortal(n.reactElement,n.element,r)},t.forEach(s=>s())},removeRenderer(r){const n={...e};delete n[r],e=n,t.forEach(s=>s())}}}var REe=class extends te.Component{constructor(t){var e;super(t),this.editorContentRef=te.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const r=this.editorContentRef.current;r.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:r}),e.contentComponent=IEe(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const r=document.createElement("div");r.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:r})}catch{}}}render(){const{editor:t,innerRef:e,...r}=this.props;return c.jsxs(c.Fragment,{children:[c.jsx("div",{ref:OEe(e,this.editorContentRef),...r}),(t==null?void 0:t.contentComponent)&&c.jsx(PEe,{contentComponent:t.contentComponent})]})}},MEe=C.forwardRef((t,e)=>{const r=te.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return te.createElement(REe,{key:r,innerRef:e,...t})}),AEe=te.memo(MEe),DEe=typeof window<"u"?C.useLayoutEffect:C.useEffect,$Ee=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(n=>n())},r=this.editor;return r.on("transaction",e),()=>{r.off("transaction",e)}}}};function FEe(t){var e;const[r]=C.useState(()=>new $Ee(t.editor)),n=TEe.useSyncExternalStoreWithSelector(r.subscribe,r.getSnapshot,r.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:xEe);return DEe(()=>r.watch(t.editor),[t.editor,r]),C.useDebugValue(n),n}var qEe=!1,wR=typeof window>"u",LEe=wR||!!(typeof window<"u"&&window.next),BEe=class ioe{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(r=>r())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?wR||LEe?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...n)=>{var s,i;return(i=(s=this.options.current).onBeforeCreate)==null?void 0:i.call(s,...n)},onBlur:(...n)=>{var s,i;return(i=(s=this.options.current).onBlur)==null?void 0:i.call(s,...n)},onCreate:(...n)=>{var s,i;return(i=(s=this.options.current).onCreate)==null?void 0:i.call(s,...n)},onDestroy:(...n)=>{var s,i;return(i=(s=this.options.current).onDestroy)==null?void 0:i.call(s,...n)},onFocus:(...n)=>{var s,i;return(i=(s=this.options.current).onFocus)==null?void 0:i.call(s,...n)},onSelectionUpdate:(...n)=>{var s,i;return(i=(s=this.options.current).onSelectionUpdate)==null?void 0:i.call(s,...n)},onTransaction:(...n)=>{var s,i;return(i=(s=this.options.current).onTransaction)==null?void 0:i.call(s,...n)},onUpdate:(...n)=>{var s,i;return(i=(s=this.options.current).onUpdate)==null?void 0:i.call(s,...n)},onContentError:(...n)=>{var s,i;return(i=(s=this.options.current).onContentError)==null?void 0:i.call(s,...n)},onDrop:(...n)=>{var s,i;return(i=(s=this.options.current).onDrop)==null?void 0:i.call(s,...n)},onPaste:(...n)=>{var s,i;return(i=(s=this.options.current).onPaste)==null?void 0:i.call(s,...n)},onDelete:(...n)=>{var s,i;return(i=(s=this.options.current).onDelete)==null?void 0:i.call(s,...n)}};return new CSe(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,r){return Object.keys(e).every(n=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)?!0:n==="extensions"&&e.extensions&&r.extensions?e.extensions.length!==r.extensions.length?!1:e.extensions.every((s,i)=>{var o;return s===((o=r.extensions)==null?void 0:o[i])}):e[n]===r[n])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?ioe.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((n,s)=>n===e[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,r=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){r&&r.setOptions(this.options.current);return}r&&!r.isDestroyed&&(r.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function zEe(t={},e=[]){const r=C.useRef(t);r.current=t;const[n]=C.useState(()=>new BEe(r)),s=NA.useSyncExternalStore(n.subscribe,n.getEditor,n.getServerSnapshot);return C.useDebugValue(s),C.useEffect(n.onRender(e)),FEe({editor:s,selector:({transactionNumber:i})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&i===0?0:i+1}),s}var WEe=C.createContext({editor:null});WEe.Consumer;var VEe=C.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),UEe=()=>C.useContext(VEe);te.forwardRef((t,e)=>{const{onDragStart:r}=UEe(),n=t.as||"div";return c.jsx(n,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:r,style:{whiteSpace:"normal",...t.style}})});te.createContext({markViewContentRef:()=>{}});var Zv=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:r,...n}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,n,r]},HEe=/^\s*>\s$/,KEe=Ps.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return Zv("blockquote",{...Pr(this.options.HTMLAttributes,t),children:Zv("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const r=">",n=[];return t.content.forEach(s=>{const a=e.renderChildren([s]).split(`
`).map(l=>l.trim()===""?r:`${r} ${l}`);n.push(a.join(`
`))}),n.join(`
${r}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[mh({find:HEe,type:this.type})]}}),GEe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,YEe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,QEe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,XEe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,JEe=pu.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return Zv("strong",{...Pr(this.options.HTMLAttributes,t),children:Zv("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[ph({find:GEe,type:this.type}),ph({find:QEe,type:this.type})]},addPasteRules(){return[eu({find:YEe,type:this.type}),eu({find:XEe,type:this.type})]}}),ZEe=/(^|[^`])`([^`]+)`(?!`)$/,e2e=/(^|[^`])`([^`]+)`(?!`)/g,t2e=pu.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Pr(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[ph({find:ZEe,type:this.type})]},addPasteRules(){return[eu({find:e2e,type:this.type})]}}),F1=4,r2e=/^```([a-z]+)?[\s\n]$/,n2e=/^~~~([a-z]+)?[\s\n]$/,s2e=Ps.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:F1,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:r}=this.options;if(!r)return null;const i=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(r)).map(o=>o.replace(r,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Pr(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var r;return((r=t.raw)==null?void 0:r.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var r;let n="";const s=((r=t.attrs)==null?void 0:r.language)||"";return t.content?n=[`\`\`\`${s}`,e.renderChildren(t.content),"```"].join(`
`):n=`\`\`\`${s}

\`\`\``,n},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,r=e.pos===1;return!t||e.parent.type.name!==this.name?!1:r||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const r=(e=this.options.tabSize)!=null?e:F1,{state:n}=t,{selection:s}=n,{$from:i,empty:o}=s;if(i.parent.type!==this.type)return!1;const a=" ".repeat(r);return o?t.commands.insertContent(a):t.commands.command(({tr:l})=>{const{from:u,to:d}=s,p=n.doc.textBetween(u,d,`
`,`
`).split(`
`).map(m=>a+m).join(`
`);return l.replaceWith(u,d,n.schema.text(p)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const r=(e=this.options.tabSize)!=null?e:F1,{state:n}=t,{selection:s}=n,{$from:i,empty:o}=s;return i.parent.type!==this.type?!1:o?t.commands.command(({tr:a})=>{var l;const{pos:u}=i,d=i.start(),h=i.end(),p=n.doc.textBetween(d,h,`
`,`
`).split(`
`);let m=0,g=0;const y=u-d;for(let E=0;E<p.length;E+=1){if(g+p[E].length>=y){m=E;break}g+=p[E].length+1}const b=((l=p[m].match(/^ */))==null?void 0:l[0])||"",w=Math.min(b.length,r);if(w===0)return!0;let x=d;for(let E=0;E<m;E+=1)x+=p[E].length+1;return a.delete(x,x+w),u-x<=w&&a.setSelection(We.create(a.doc,x)),!0}):t.commands.command(({tr:a})=>{const{from:l,to:u}=s,f=n.doc.textBetween(l,u,`
`,`
`).split(`
`).map(p=>{var m;const g=((m=p.match(/^ */))==null?void 0:m[0])||"",y=Math.min(g.length,r);return p.slice(y)}).join(`
`);return a.replaceWith(l,u,n.schema.text(f)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:r}=e,{$from:n,empty:s}=r;if(!s||n.parent.type!==this.type)return!1;const i=n.parentOffset===n.parent.nodeSize-2,o=n.parent.textContent.endsWith(`

`);return!i||!o?!1:t.chain().command(({tr:a})=>(a.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:r,doc:n}=e,{$from:s,empty:i}=r;if(!i||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const a=s.after();return a===void 0?!1:n.nodeAt(a)?t.commands.command(({tr:u})=>(u.setSelection(Ze.near(n.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[bR({find:r2e,type:this.type,getAttributes:t=>({language:t[1]})}),bR({find:n2e,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new er({key:new Lr("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const r=e.clipboardData.getData("text/plain"),n=e.clipboardData.getData("vscode-editor-data"),s=n?JSON.parse(n):void 0,i=s==null?void 0:s.mode;if(!r||!i)return!1;const{tr:o,schema:a}=t.state,l=a.text(r.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:i},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(We.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),i2e=Ps.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),o2e=Ps.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Pr(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:r,editor:n})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:s,storedMarks:i}=r;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=n.extensionManager,l=i||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:d})=>{if(d&&l&&o){const h=l.filter(f=>a.includes(f.type.name));u.ensureMarks(h)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),a2e=Ps.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Pr(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var r;const n=(r=t.attrs)!=null&&r.level?parseInt(t.attrs.level,10):1,s="#".repeat(n);return t.content?`${s} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>bR({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),l2e=Ps.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Pr(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!jSe(e,e.schema.nodes[this.name]))return!1;const{selection:r}=e,{$to:n}=r,s=t();return Fie(r)?s.insertContentAt(n.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({state:i,tr:o,dispatch:a})=>{if(a){const{$to:l}=o.selection,u=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?o.setSelection(We.create(o.doc,l.pos+1)):l.nodeAfter.isBlock?o.setSelection(Ae.create(o.doc,l.pos)):o.setSelection(We.create(o.doc,l.pos));else{const d=i.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,h=d==null?void 0:d.create();h&&(o.insert(u,h),o.setSelection(We.create(o.doc,u+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[kSe({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),c2e=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,u2e=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,d2e=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,h2e=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,f2e=pu.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Pr(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[ph({find:c2e,type:this.type}),ph({find:d2e,type:this.type})]},addPasteRules(){return[eu({find:u2e,type:this.type}),eu({find:h2e,type:this.type})]}});const p2e="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",m2e="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",SR="numeric",ER="ascii",_R="alpha",hp="asciinumeric",Gf="alphanumeric",NR="domain",ooe="emoji",g2e="scheme",y2e="slashscheme",q1="whitespace";function v2e(t,e){return t in e||(e[t]=[]),e[t]}function cc(t,e,r){e[SR]&&(e[hp]=!0,e[Gf]=!0),e[ER]&&(e[hp]=!0,e[_R]=!0),e[hp]&&(e[Gf]=!0),e[_R]&&(e[Gf]=!0),e[Gf]&&(e[NR]=!0),e[ooe]&&(e[NR]=!0);for(const n in e){const s=v2e(n,r);s.indexOf(t)<0&&s.push(t)}}function b2e(t,e){const r={};for(const n in e)e[n].indexOf(t)>=0&&(r[n]=!0);return r}function ns(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}ns.groups={};ns.prototype={accepts(){return!!this.t},go(t){const e=this,r=e.j[t];if(r)return r;for(let n=0;n<e.jr.length;n++){const s=e.jr[n][0],i=e.jr[n][1];if(i&&s.test(t))return i}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,r,n){for(let s=0;s<t.length;s++)this.tt(t[s],e,r,n)},tr(t,e,r,n){n=n||ns.groups;let s;return e&&e.j?s=e:(s=new ns(e),r&&n&&cc(e,r,n)),this.jr.push([t,s]),s},ts(t,e,r,n){let s=this;const i=t.length;if(!i)return s;for(let o=0;o<i-1;o++)s=s.tt(t[o]);return s.tt(t[i-1],e,r,n)},tt(t,e,r,n){n=n||ns.groups;const s=this;if(e&&e.j)return s.j[t]=e,e;const i=e;let o,a=s.go(t);if(a?(o=new ns,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new ns,i){if(n)if(o.t&&typeof o.t=="string"){const l=Object.assign(b2e(o.t,n),r);cc(i,l,n)}else r&&cc(i,r,n);o.t=i}return s.j[t]=o,o}};const Xe=(t,e,r,n,s)=>t.ta(e,r,n,s),nr=(t,e,r,n,s)=>t.tr(e,r,n,s),NF=(t,e,r,n,s)=>t.ts(e,r,n,s),ne=(t,e,r,n,s)=>t.tt(e,r,n,s),Eo="WORD",CR="UWORD",aoe="ASCIINUMERICAL",loe="ALPHANUMERICAL",sm="LOCALHOST",kR="TLD",jR="UTLD",Hy="SCHEME",ed="SLASH_SCHEME",eD="NUM",TR="WS",tD="NL",fp="OPENBRACE",pp="CLOSEBRACE",e0="OPENBRACKET",t0="CLOSEBRACKET",r0="OPENPAREN",n0="CLOSEPAREN",s0="OPENANGLEBRACKET",i0="CLOSEANGLEBRACKET",o0="FULLWIDTHLEFTPAREN",a0="FULLWIDTHRIGHTPAREN",l0="LEFTCORNERBRACKET",c0="RIGHTCORNERBRACKET",u0="LEFTWHITECORNERBRACKET",d0="RIGHTWHITECORNERBRACKET",h0="FULLWIDTHLESSTHAN",f0="FULLWIDTHGREATERTHAN",p0="AMPERSAND",m0="APOSTROPHE",g0="ASTERISK",Ca="AT",y0="BACKSLASH",v0="BACKTICK",b0="CARET",Ra="COLON",rD="COMMA",x0="DOLLAR",$i="DOT",w0="EQUALS",nD="EXCLAMATION",Fs="HYPHEN",mp="PERCENT",S0="PIPE",E0="PLUS",_0="POUND",gp="QUERY",sD="QUOTE",coe="FULLWIDTHMIDDLEDOT",iD="SEMI",Fi="SLASH",yp="TILDE",N0="UNDERSCORE",uoe="EMOJI",C0="SYM";var doe=Object.freeze({__proto__:null,ALPHANUMERICAL:loe,AMPERSAND:p0,APOSTROPHE:m0,ASCIINUMERICAL:aoe,ASTERISK:g0,AT:Ca,BACKSLASH:y0,BACKTICK:v0,CARET:b0,CLOSEANGLEBRACKET:i0,CLOSEBRACE:pp,CLOSEBRACKET:t0,CLOSEPAREN:n0,COLON:Ra,COMMA:rD,DOLLAR:x0,DOT:$i,EMOJI:uoe,EQUALS:w0,EXCLAMATION:nD,FULLWIDTHGREATERTHAN:f0,FULLWIDTHLEFTPAREN:o0,FULLWIDTHLESSTHAN:h0,FULLWIDTHMIDDLEDOT:coe,FULLWIDTHRIGHTPAREN:a0,HYPHEN:Fs,LEFTCORNERBRACKET:l0,LEFTWHITECORNERBRACKET:u0,LOCALHOST:sm,NL:tD,NUM:eD,OPENANGLEBRACKET:s0,OPENBRACE:fp,OPENBRACKET:e0,OPENPAREN:r0,PERCENT:mp,PIPE:S0,PLUS:E0,POUND:_0,QUERY:gp,QUOTE:sD,RIGHTCORNERBRACKET:c0,RIGHTWHITECORNERBRACKET:d0,SCHEME:Hy,SEMI:iD,SLASH:Fi,SLASH_SCHEME:ed,SYM:C0,TILDE:yp,TLD:kR,UNDERSCORE:N0,UTLD:jR,UWORD:CR,WORD:Eo,WS:TR});const bo=/[a-z]/,Rf=new RegExp("\\p{L}","u"),L1=new RegExp("\\p{Emoji}","u"),xo=/\d/,B1=/\s/,CF="\r",z1=`
`,x2e="",w2e="",W1="";let hy=null,fy=null;function S2e(t=[]){const e={};ns.groups=e;const r=new ns;hy==null&&(hy=kF(p2e)),fy==null&&(fy=kF(m2e)),ne(r,"'",m0),ne(r,"{",fp),ne(r,"}",pp),ne(r,"[",e0),ne(r,"]",t0),ne(r,"(",r0),ne(r,")",n0),ne(r,"<",s0),ne(r,">",i0),ne(r,"",o0),ne(r,"",a0),ne(r,"",l0),ne(r,"",c0),ne(r,"",u0),ne(r,"",d0),ne(r,"",h0),ne(r,"",f0),ne(r,"&",p0),ne(r,"*",g0),ne(r,"@",Ca),ne(r,"`",v0),ne(r,"^",b0),ne(r,":",Ra),ne(r,",",rD),ne(r,"$",x0),ne(r,".",$i),ne(r,"=",w0),ne(r,"!",nD),ne(r,"-",Fs),ne(r,"%",mp),ne(r,"|",S0),ne(r,"+",E0),ne(r,"#",_0),ne(r,"?",gp),ne(r,'"',sD),ne(r,"/",Fi),ne(r,";",iD),ne(r,"~",yp),ne(r,"_",N0),ne(r,"\\",y0),ne(r,"",coe);const n=nr(r,xo,eD,{[SR]:!0});nr(n,xo,n);const s=nr(n,bo,aoe,{[hp]:!0}),i=nr(n,Rf,loe,{[Gf]:!0}),o=nr(r,bo,Eo,{[ER]:!0});nr(o,xo,s),nr(o,bo,o),nr(s,xo,s),nr(s,bo,s);const a=nr(r,Rf,CR,{[_R]:!0});nr(a,bo),nr(a,xo,i),nr(a,Rf,a),nr(i,xo,i),nr(i,bo),nr(i,Rf,i);const l=ne(r,z1,tD,{[q1]:!0}),u=ne(r,CF,TR,{[q1]:!0}),d=nr(r,B1,TR,{[q1]:!0});ne(r,W1,d),ne(u,z1,l),ne(u,W1,d),nr(u,B1,d),ne(d,CF),ne(d,z1),nr(d,B1,d),ne(d,W1,d);const h=nr(r,L1,uoe,{[ooe]:!0});ne(h,"#"),nr(h,L1,h),ne(h,x2e,h);const f=ne(h,w2e);ne(f,"#"),nr(f,L1,h);const p=[[bo,o],[xo,s]],m=[[bo,null],[Rf,a],[xo,i]];for(let g=0;g<hy.length;g++)ga(r,hy[g],kR,Eo,p);for(let g=0;g<fy.length;g++)ga(r,fy[g],jR,CR,m);cc(kR,{tld:!0,ascii:!0},e),cc(jR,{utld:!0,alpha:!0},e),ga(r,"file",Hy,Eo,p),ga(r,"mailto",Hy,Eo,p),ga(r,"http",ed,Eo,p),ga(r,"https",ed,Eo,p),ga(r,"ftp",ed,Eo,p),ga(r,"ftps",ed,Eo,p),cc(Hy,{scheme:!0,ascii:!0},e),cc(ed,{slashscheme:!0,ascii:!0},e),t=t.sort((g,y)=>g[0]>y[0]?1:-1);for(let g=0;g<t.length;g++){const y=t[g][0],b=t[g][1]?{[g2e]:!0}:{[y2e]:!0};y.indexOf("-")>=0?b[NR]=!0:bo.test(y)?xo.test(y)?b[hp]=!0:b[ER]=!0:b[SR]=!0,NF(r,y,y,b)}return NF(r,"localhost",sm,{ascii:!0}),r.jd=new ns(C0),{start:r,tokens:Object.assign({groups:e},doe)}}function hoe(t,e){const r=E2e(e.replace(/[A-Z]/g,a=>a.toLowerCase())),n=r.length,s=[];let i=0,o=0;for(;o<n;){let a=t,l=null,u=0,d=null,h=-1,f=-1;for(;o<n&&(l=a.go(r[o]));)a=l,a.accepts()?(h=0,f=0,d=a):h>=0&&(h+=r[o].length,f++),u+=r[o].length,i+=r[o].length,o++;i-=h,o-=f,u-=h,s.push({t:d.t,v:e.slice(i-u,i),s:i-u,e:i})}return s}function E2e(t){const e=[],r=t.length;let n=0;for(;n<r;){let s=t.charCodeAt(n),i,o=s<55296||s>56319||n+1===r||(i=t.charCodeAt(n+1))<56320||i>57343?t[n]:t.slice(n,n+2);e.push(o),n+=o.length}return e}function ga(t,e,r,n,s){let i;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];t.j[l]?i=t.j[l]:(i=new ns(n),i.jr=s.slice(),t.j[l]=i),t=i}return i=new ns(r),i.jr=s.slice(),t.j[e[o-1]]=i,i}function kF(t){const e=[],r=[];let n=0,s="0123456789";for(;n<t.length;){let i=0;for(;s.indexOf(t[n+i])>=0;)i++;if(i>0){e.push(r.join(""));for(let o=parseInt(t.substring(n,n+i),10);o>0;o--)r.pop();n+=i}else r.push(t[n]),n++}return e}const im={defaultProtocol:"http",events:null,format:jF,formatHref:jF,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function oD(t,e=null){let r=Object.assign({},im);t&&(r=Object.assign(r,t instanceof oD?t.o:t));const n=r.ignoreTags,s=[];for(let i=0;i<n.length;i++)s.push(n[i].toUpperCase());this.o=r,e&&(this.defaultRender=e),this.ignoreTags=s}oD.prototype={o:im,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,r){const n=e!=null;let s=this.o[t];return s&&(typeof s=="object"?(s=r.t in s?s[r.t]:im[t],typeof s=="function"&&n&&(s=s(e,r))):typeof s=="function"&&n&&(s=s(e,r.t,r)),s)},getObj(t,e,r){let n=this.o[t];return typeof n=="function"&&e!=null&&(n=n(e,r.t,r)),n},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function jF(t){return t}function foe(t,e){this.t="token",this.v=t,this.tk=e}foe.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),r=t.get("truncate",e,this),n=t.get("format",e,this);return r&&n.length>r?n.substring(0,r)+"":n},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=im.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,r=this.toHref(t.get("defaultProtocol")),n=t.get("formatHref",r,this),s=t.get("tagName",r,e),i=this.toFormattedString(t),o={},a=t.get("className",r,e),l=t.get("target",r,e),u=t.get("rel",r,e),d=t.getObj("attributes",r,e),h=t.getObj("events",r,e);return o.href=n,a&&(o.class=a),l&&(o.target=l),u&&(o.rel=u),d&&Object.assign(o,d),{tagName:s,attributes:o,content:i,eventListeners:h}}};function qb(t,e){class r extends foe{constructor(s,i){super(s,i),this.t=t}}for(const n in e)r.prototype[n]=e[n];return r.t=t,r}const TF=qb("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),OF=qb("text"),_2e=qb("nl"),py=qb("url",{isLink:!0,toHref(t=im.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==sm&&t[1].t===Ra}}),$s=t=>new ns(t);function N2e({groups:t}){const e=t.domain.concat([p0,g0,Ca,y0,v0,b0,x0,w0,Fs,eD,mp,S0,E0,_0,Fi,C0,yp,N0]),r=[m0,Ra,rD,$i,nD,mp,gp,sD,iD,s0,i0,fp,pp,t0,e0,r0,n0,o0,a0,l0,c0,u0,d0,h0,f0],n=[p0,m0,g0,y0,v0,b0,x0,w0,Fs,fp,pp,mp,S0,E0,_0,gp,Fi,C0,yp,N0],s=$s(),i=ne(s,yp);Xe(i,n,i),Xe(i,t.domain,i);const o=$s(),a=$s(),l=$s();Xe(s,t.domain,o),Xe(s,t.scheme,a),Xe(s,t.slashscheme,l),Xe(o,n,i),Xe(o,t.domain,o);const u=ne(o,Ca);ne(i,Ca,u),ne(a,Ca,u),ne(l,Ca,u);const d=ne(i,$i);Xe(d,n,i),Xe(d,t.domain,i);const h=$s();Xe(u,t.domain,h),Xe(h,t.domain,h);const f=ne(h,$i);Xe(f,t.domain,h);const p=$s(TF);Xe(f,t.tld,p),Xe(f,t.utld,p),ne(u,sm,p);const m=ne(h,Fs);ne(m,Fs,m),Xe(m,t.domain,h),Xe(p,t.domain,h),ne(p,$i,f),ne(p,Fs,m);const g=ne(p,Ra);Xe(g,t.numeric,TF);const y=ne(o,Fs),v=ne(o,$i);ne(y,Fs,y),Xe(y,t.domain,o),Xe(v,n,i),Xe(v,t.domain,o);const b=$s(py);Xe(v,t.tld,b),Xe(v,t.utld,b),Xe(b,t.domain,o),Xe(b,n,i),ne(b,$i,v),ne(b,Fs,y),ne(b,Ca,u);const w=ne(b,Ra),x=$s(py);Xe(w,t.numeric,x);const S=$s(py),E=$s();Xe(S,e,S),Xe(S,r,E),Xe(E,e,S),Xe(E,r,E),ne(b,Fi,S),ne(x,Fi,S);const N=ne(a,Ra),_=ne(l,Ra),k=ne(_,Fi),j=ne(k,Fi);Xe(a,t.domain,o),ne(a,$i,v),ne(a,Fs,y),Xe(l,t.domain,o),ne(l,$i,v),ne(l,Fs,y),Xe(N,t.domain,S),ne(N,Fi,S),ne(N,gp,S),Xe(j,t.domain,S),Xe(j,e,S),ne(j,Fi,S);const T=[[fp,pp],[e0,t0],[r0,n0],[s0,i0],[o0,a0],[l0,c0],[u0,d0],[h0,f0]];for(let P=0;P<T.length;P++){const[O,D]=T[P],F=ne(S,O);ne(E,O,F),ne(F,D,S);const $=$s(py);Xe(F,e,$);const q=$s();Xe(F,r),Xe($,e,$),Xe($,r,q),Xe(q,e,$),Xe(q,r,q),ne($,D,S),ne(q,D,S)}return ne(s,sm,b),ne(s,tD,_2e),{start:s,tokens:doe}}function C2e(t,e,r){let n=r.length,s=0,i=[],o=[];for(;s<n;){let a=t,l=null,u=null,d=0,h=null,f=-1;for(;s<n&&!(l=a.go(r[s].t));)o.push(r[s++]);for(;s<n&&(u=l||a.go(r[s].t));)l=null,a=u,a.accepts()?(f=0,h=a):f>=0&&f++,s++,d++;if(f<0)s-=d,s<n&&(o.push(r[s]),s++);else{o.length>0&&(i.push(V1(OF,e,o)),o=[]),s-=f,d-=f;const p=h.t,m=r.slice(s-d,s);i.push(V1(p,e,m))}}return o.length>0&&i.push(V1(OF,e,o)),i}function V1(t,e,r){const n=r[0].s,s=r[r.length-1].e,i=e.slice(n,s);return new t(i,r)}const k2e=typeof console<"u"&&console&&console.warn||(()=>{}),j2e="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Wt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function T2e(){return ns.groups={},Wt.scanner=null,Wt.parser=null,Wt.tokenQueue=[],Wt.pluginQueue=[],Wt.customSchemes=[],Wt.initialized=!1,Wt}function PF(t,e=!1){if(Wt.initialized&&k2e(`linkifyjs: already initialized - will not register custom scheme "${t}" ${j2e}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Wt.customSchemes.push([t,e])}function O2e(){Wt.scanner=S2e(Wt.customSchemes);for(let t=0;t<Wt.tokenQueue.length;t++)Wt.tokenQueue[t][1]({scanner:Wt.scanner});Wt.parser=N2e(Wt.scanner.tokens);for(let t=0;t<Wt.pluginQueue.length;t++)Wt.pluginQueue[t][1]({scanner:Wt.scanner,parser:Wt.parser});return Wt.initialized=!0,Wt}function aD(t){return Wt.initialized||O2e(),C2e(Wt.parser.start,t,hoe(Wt.scanner.start,t))}aD.scan=hoe;function poe(t,e=null,r=null){if(e&&typeof e=="object"){if(r)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);r=e,e=null}const n=new oD(r),s=aD(t),i=[];for(let o=0;o<s.length;o++){const a=s[o];a.isLink&&(!e||a.t===e)&&n.check(a)&&i.push(a.toFormattedObject(n))}return i}var lD="[\0- -\u2029]",P2e=new RegExp(lD),I2e=new RegExp(`${lD}$`),R2e=new RegExp(lD,"g");function M2e(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function A2e(t){return new er({key:new Lr("autolink"),appendTransaction:(e,r,n)=>{const s=e.some(u=>u.docChanged)&&!r.doc.eq(n.doc),i=e.some(u=>u.getMeta("preventAutolink"));if(!s||i)return;const{tr:o}=n,a=Oie(r.doc,[...e]);if($ie(a).forEach(({newRange:u})=>{const d=jwe(n.doc,u,p=>p.isTextblock);let h,f;if(d.length>1)h=d[0],f=n.doc.textBetween(h.pos,h.pos+h.node.nodeSize,void 0," ");else if(d.length){const p=n.doc.textBetween(u.from,u.to," "," ");if(!I2e.test(p))return;h=d[0],f=n.doc.textBetween(h.pos,u.to,void 0," ")}if(h&&f){const p=f.split(P2e).filter(Boolean);if(p.length<=0)return!1;const m=p[p.length-1],g=h.pos+f.lastIndexOf(m);if(!m)return!1;const y=aD(m).map(v=>v.toObject(t.defaultProtocol));if(!M2e(y))return!1;y.filter(v=>v.isLink).map(v=>({...v,from:g+v.start+1,to:g+v.end+1})).filter(v=>n.schema.marks.code?!n.doc.rangeHasMark(v.from,v.to,n.schema.marks.code):!0).filter(v=>t.validate(v.value)).filter(v=>t.shouldAutoLink(v.value)).forEach(v=>{YA(v.from,v.to,n.doc).some(b=>b.mark.type===t.type)||o.addMark(v.from,v.to,t.type.create({href:v.href}))})}}),!!o.steps.length)return o}})}function D2e(t){return new er({key:new Lr("handleClickLink"),props:{handleClick:(e,r,n)=>{var s,i;if(n.button!==0||!e.editable)return!1;let o=!1;if(t.enableClickSelection&&(o=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){let a=null;if(n.target instanceof HTMLAnchorElement)a=n.target;else{let h=n.target;const f=[];for(;h.nodeName!=="DIV";)f.push(h),h=h.parentNode;a=f.find(p=>p.nodeName==="A")}if(!a)return o;const l=Die(e.state,t.type.name),u=(s=a==null?void 0:a.href)!=null?s:l.href,d=(i=a==null?void 0:a.target)!=null?i:l.target;a&&u&&(window.open(u,d),o=!0)}return o}}})}function $2e(t){return new er({key:new Lr("handlePasteLink"),props:{handlePaste:(e,r,n)=>{const{shouldAutoLink:s}=t,{state:i}=e,{selection:o}=i,{empty:a}=o;if(a)return!1;let l="";n.content.forEach(d=>{l+=d.textContent});const u=poe(l,{defaultProtocol:t.defaultProtocol}).find(d=>d.isLink&&d.value===l);return!l||!u||s!==void 0&&!s(u.value)?!1:t.editor.commands.setMark(t.type,{href:u.href})}}})}function Hl(t,e){const r=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(n=>{const s=typeof n=="string"?n:n.scheme;s&&r.push(s)}),!t||t.replace(R2e,"").match(new RegExp(`^(?:(?:${r.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var moe=pu.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){PF(t);return}PF(t.scheme,t.optionalSlashes)})},onDestroy(){T2e()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Hl(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),r=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||r&&!t.includes("@"))return!0;const s=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(s)||!/\./.test(s))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:r=>!!Hl(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Hl(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Pr(this.options.HTMLAttributes,t),0]:["a",Pr(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var r;const n=((r=t.attrs)==null?void 0:r.href)||"";return`[${e.renderChildren(t)}](${n})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:r}=t;return this.options.isAllowedUri(r,{defaultValidate:n=>!!Hl(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:r}=t||{};return r&&!this.options.isAllowedUri(r,{defaultValidate:n=>!!Hl(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[eu({find:t=>{const e=[];if(t){const{protocols:r,defaultProtocol:n}=this.options,s=poe(t).filter(i=>i.isLink&&this.options.isAllowedUri(i.value,{defaultValidate:o=>!!Hl(o,r),protocols:r,defaultProtocol:n}));s.length&&s.forEach(i=>{this.options.shouldAutoLink(i.value)&&e.push({text:i.value,data:{href:i.href},index:i.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:r}=this.options;return this.options.autolink&&t.push(A2e({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:n=>this.options.isAllowedUri(n,{defaultValidate:s=>!!Hl(s,e),protocols:e,defaultProtocol:r}),shouldAutoLink:this.options.shouldAutoLink})),t.push(D2e({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push($2e({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),F2e=moe,q2e=Object.defineProperty,L2e=(t,e)=>{for(var r in e)q2e(t,r,{get:e[r],enumerable:!0})},B2e="listItem",IF="textStyle",RF=/^\s*([-+*])\s$/,goe=Ps.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Pr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(B2e,this.editor.getAttributes(IF)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=mh({find:RF,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=mh({find:RF,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(IF),editor:this.editor})),[t]}}),yoe=Ps.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Pr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let r=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(s=>s.type==="paragraph"))r=e.parseChildren(t.tokens);else{const s=t.tokens[0];if(s&&s.type==="text"&&s.tokens&&s.tokens.length>0){if(r=[{type:"paragraph",content:e.parseInline(s.tokens)}],t.tokens.length>1){const o=t.tokens.slice(1),a=e.parseChildren(o);r.push(...a)}}else r=e.parseChildren(t.tokens)}return r.length===0&&(r=[{type:"paragraph",content:[]}]),{type:"listItem",content:r}},renderMarkdown:(t,e,r)=>ZA(t,e,n=>n.parentType==="bulletList"?"- ":n.parentType==="orderedList"?`${n.index+1}. `:"- ",r),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),z2e={};L2e(z2e,{findListItemPos:()=>Vm,getNextListDepth:()=>cD,handleBackspace:()=>OR,handleDelete:()=>PR,hasListBefore:()=>voe,hasListItemAfter:()=>W2e,hasListItemBefore:()=>boe,listItemHasSubList:()=>xoe,nextListIsDeeper:()=>woe,nextListIsHigher:()=>Soe});var Vm=(t,e)=>{const{$from:r}=e.selection,n=Or(t,e.schema);let s=null,i=r.depth,o=r.pos,a=null;for(;i>0&&a===null;)s=r.node(i),s.type===n?a=i:(i-=1,o-=1);return a===null?null:{$pos:e.doc.resolve(o),depth:a}},cD=(t,e)=>{const r=Vm(t,e);if(!r)return!1;const[,n]=Fwe(e,t,r.$pos.pos+4);return n},voe=(t,e,r)=>{const{$anchor:n}=t.selection,s=Math.max(0,n.pos-2),i=t.doc.resolve(s).node();return!(!i||!r.includes(i.type.name))},boe=(t,e)=>{var r;const{$anchor:n}=e.selection,s=e.doc.resolve(n.pos-2);return!(s.index()===0||((r=s.nodeBefore)==null?void 0:r.type.name)!==t)},xoe=(t,e,r)=>{if(!r)return!1;const n=Or(t,e.schema);let s=!1;return r.descendants(i=>{i.type===n&&(s=!0)}),s},OR=(t,e,r)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!Nl(t.state,e)&&voe(t.state,e,r)){const{$anchor:a}=t.state.selection,l=t.state.doc.resolve(a.before()-1),u=[];l.node().descendants((f,p)=>{f.type.name===e&&u.push({node:f,pos:p})});const d=u.at(-1);if(!d)return!1;const h=t.state.doc.resolve(l.start()+d.pos+1);return t.chain().cut({from:a.start()-1,to:a.end()+1},h.end()).joinForward().run()}if(!Nl(t.state,e)||!zwe(t.state))return!1;const n=Vm(e,t.state);if(!n)return!1;const i=t.state.doc.resolve(n.$pos.pos-2).node(n.depth),o=xoe(e,t.state,i);return boe(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},woe=(t,e)=>{const r=cD(t,e),n=Vm(t,e);return!n||!r?!1:r>n.depth},Soe=(t,e)=>{const r=cD(t,e),n=Vm(t,e);return!n||!r?!1:r<n.depth},PR=(t,e)=>{if(!Nl(t.state,e)||!Bwe(t.state,e))return!1;const{selection:r}=t.state,{$from:n,$to:s}=r;return!r.empty&&n.sameParent(s)?!1:woe(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():Soe(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},W2e=(t,e)=>{var r;const{$anchor:n}=e.selection,s=e.doc.resolve(n.pos-n.parentOffset-2);return!(s.index()===s.parent.childCount-1||((r=s.nodeAfter)==null?void 0:r.type.name)!==t)},Eoe=xr.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&PR(t,r)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&PR(t,r)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&OR(t,r,n)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&OR(t,r,n)&&(e=!0)}),e}}}}),MF=/^(\s*)(\d+)\.\s+(.*)$/,V2e=/^\s/;function U2e(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r],i=s.match(MF);if(!i)break;const[,o,a,l]=i,u=o.length;let d=l,h=r+1;const f=[s];for(;h<t.length;){const p=t[h];if(p.match(MF))break;if(p.trim()==="")f.push(p),d+=`
`,h+=1;else if(p.match(V2e))f.push(p),d+=`
${p.slice(u+2)}`,h+=1;else break}e.push({indent:u,number:parseInt(a,10),content:d.trim(),raw:f.join(`
`)}),n=h,r=h}return[e,n]}function _oe(t,e,r){var n;const s=[];let i=0;for(;i<t.length;){const o=t[i];if(o.indent===e){const a=o.content.split(`
`),l=((n=a[0])==null?void 0:n.trim())||"",u=[];l&&u.push({type:"paragraph",raw:l,tokens:r.inlineTokens(l)});const d=a.slice(1).join(`
`).trim();if(d){const p=r.blockTokens(d);u.push(...p)}let h=i+1;const f=[];for(;h<t.length&&t[h].indent>e;)f.push(t[h]),h+=1;if(f.length>0){const p=Math.min(...f.map(g=>g.indent)),m=_oe(f,p,r);u.push({type:"list",ordered:!0,start:f[0].number,items:m,raw:f.map(g=>g.raw).join(`
`)})}s.push({type:"list_item",raw:o.raw,tokens:u}),i=h}else i+=1}return s}function H2e(t,e){return t.map(r=>{if(r.type!=="list_item")return e.parseChildren([r])[0];const n=[];return r.tokens&&r.tokens.length>0&&r.tokens.forEach(s=>{if(s.type==="paragraph"||s.type==="list"||s.type==="blockquote"||s.type==="code")n.push(...e.parseChildren([s]));else if(s.type==="text"&&s.tokens){const i=e.parseChildren([s]);n.push({type:"paragraph",content:i})}else{const i=e.parseChildren([s]);i.length>0&&n.push(...i)}}),{type:"listItem",content:n}})}var K2e="listItem",AF="textStyle",DF=/^(\d+)\.\s$/,Noe=Ps.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...r}=t;return e===1?["ol",Pr(this.options.HTMLAttributes,r),0]:["ol",Pr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const r=t.start||1,n=t.items?H2e(t.items,e):[];return r!==1?{type:"orderedList",attrs:{start:r},content:n}:{type:"orderedList",content:n}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),r=e==null?void 0:e.index;return r!==void 0?r:-1},tokenize:(t,e,r)=>{var n;const s=t.split(`
`),[i,o]=U2e(s);if(i.length===0)return;const a=_oe(i,0,r);return a.length===0?void 0:{type:"list",ordered:!0,start:((n=i[0])==null?void 0:n.number)||1,items:a,raw:s.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(K2e,this.editor.getAttributes(AF)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=mh({find:DF,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=mh({find:DF,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(AF)}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1],editor:this.editor})),[t]}}),G2e=/^\s*(\[([( |x])?\])\s$/,Y2e=Ps.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Pr(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const r=[];if(t.tokens&&t.tokens.length>0?r.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?r.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):r.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const n=e.parseChildren(t.nestedTokens);r.push(...n)}return e.createNode("taskItem",{checked:t.checked||!1},r)},renderMarkdown:(t,e)=>{var r;const s=`- [${(r=t.attrs)!=null&&r.checked?"x":" "}] `;return ZA(t,e,s)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:r,editor:n})=>{const s=document.createElement("li"),i=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),u=h=>{var f,p;a.ariaLabel=((p=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:p.call(f,h,a.checked))||`Task item checkbox for ${h.textContent||"empty task item"}`};u(t),i.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",h=>h.preventDefault()),a.addEventListener("change",h=>{if(!n.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:f}=h.target;n.isEditable&&typeof r=="function"&&n.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:p})=>{const m=r();if(typeof m!="number")return!1;const g=p.doc.nodeAt(m);return p.setNodeMarkup(m,void 0,{...g==null?void 0:g.attrs,checked:f}),!0}).run(),!n.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,f)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([h,f])=>{s.setAttribute(h,f)}),s.dataset.checked=t.attrs.checked,a.checked=t.attrs.checked,i.append(a,o),s.append(i,l),Object.entries(e).forEach(([h,f])=>{s.setAttribute(h,f)});let d=new Set(Object.keys(e));return{dom:s,contentDOM:l,update:h=>{if(h.type!==this.type)return!1;s.dataset.checked=h.attrs.checked,a.checked=h.attrs.checked,u(h);const f=n.extensionManager.attributes,p=nm(h,f),m=new Set(Object.keys(p)),g=this.options.HTMLAttributes;return d.forEach(y=>{m.has(y)||(y in g?s.setAttribute(y,g[y]):s.removeAttribute(y))}),Object.entries(p).forEach(([y,v])=>{v==null?y in g?s.setAttribute(y,g[y]):s.removeAttribute(y):s.setAttribute(y,v)}),d=m,!0}}}},addInputRules(){return[mh({find:G2e,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),Q2e=Ps.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Pr(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const r=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return r!==void 0?r:-1},tokenize(t,e,r){const n=i=>{const o=xR(i,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:r.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:n},r);return o?[{type:"taskList",raw:o.raw,items:o.items}]:r.blockTokens(i)},s=xR(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:i=>({indentLevel:i[1].length,mainContent:i[4],checked:i[3].toLowerCase()==="x"}),createToken:(i,o)=>({type:"taskItem",raw:"",mainContent:i.mainContent,indentLevel:i.indentLevel,checked:i.checked,text:i.mainContent,tokens:r.inlineTokens(i.mainContent),nestedTokens:o}),customNestedParser:n},r);if(s)return{type:"taskList",raw:s.raw,items:s.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});xr.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(goe.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(yoe.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(Eoe.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(Noe.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(Y2e.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(Q2e.configure(this.options.taskList)),t}});var X2e=Ps.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Pr(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const r=t.tokens||[];return r.length===1&&r[0].type==="image"?e.parseChildren([r[0]]):e.createNode("paragraph",void 0,e.parseInline(r))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),J2e=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Z2e=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,e_e=pu.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Pr(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[ph({find:J2e,type:this.type})]},addPasteRules(){return[eu({find:Z2e,type:this.type})]}}),t_e=Ps.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),r_e=pu.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Pr(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,r){const s=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!s)return;const i=s[2].trim();return{type:"underline",raw:s[0],text:i,tokens:r.inlineTokens(i)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function n_e(t={}){return new er({view(e){return new s_e(e,t)}})}class s_e{constructor(e,r){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(n=r.width)!==null&&n!==void 0?n:1,this.color=r.color===!1?void 0:r.color||"black",this.class=r.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let i=o=>{this[s](o)};return e.dom.addEventListener(s,i),{name:s,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:r})=>this.editorView.dom.removeEventListener(e,r))}update(e,r){this.cursorPos!=null&&r.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),r=!e.parent.inlineContent,n,s=this.editorView.dom,i=s.getBoundingClientRect(),o=i.width/s.offsetWidth,a=i.height/s.offsetHeight;if(r){let h=e.nodeBefore,f=e.nodeAfter;if(h||f){let p=this.editorView.nodeDOM(this.cursorPos-(h?h.nodeSize:0));if(p){let m=p.getBoundingClientRect(),g=h?m.bottom:m.top;h&&f&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let y=this.width/2*a;n={left:m.left,right:m.right,top:g-y,bottom:g+y}}}}if(!n){let h=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*o;n={left:h.left-f,right:h.left+f,top:h.top,bottom:h.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",r),this.element.classList.toggle("prosemirror-dropcursor-inline",!r);let u,d;if(!l||l==document.body&&getComputedStyle(l).position=="static")u=-pageXOffset,d=-pageYOffset;else{let h=l.getBoundingClientRect(),f=h.width/l.offsetWidth,p=h.height/l.offsetHeight;u=h.left-l.scrollLeft*f,d=h.top-l.scrollTop*p}this.element.style.left=(n.left-u)/o+"px",this.element.style.top=(n.top-d)/a+"px",this.element.style.width=(n.right-n.left)/o+"px",this.element.style.height=(n.bottom-n.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let r=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=r&&r.inside>=0&&this.editorView.state.doc.nodeAt(r.inside),s=n&&n.type.spec.disableDropCursor,i=typeof s=="function"?s(this.editorView,r,e):s;if(r&&!i){let o=r.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=wse(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class cr extends Ze{constructor(e){super(e,e)}map(e,r){let n=e.resolve(r.map(this.head));return cr.valid(n)?new cr(n):Ze.near(n)}content(){return we.empty}eq(e){return e instanceof cr&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new cr(e.resolve(r.pos))}getBookmark(){return new uD(this.anchor)}static valid(e){let r=e.parent;if(r.isTextblock||!i_e(e)||!o_e(e))return!1;let n=r.type.spec.allowGapCursor;if(n!=null)return n;let s=r.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,r,n=!1){e:for(;;){if(!n&&cr.valid(e))return e;let s=e.pos,i=null;for(let o=e.depth;;o--){let a=e.node(o);if(r>0?e.indexAfter(o)<a.childCount:e.index(o)>0){i=a.child(r>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;s+=r;let l=e.doc.resolve(s);if(cr.valid(l))return l}for(;;){let o=r>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!Ae.isSelectable(i)){e=e.doc.resolve(s+i.nodeSize*r),n=!1;continue e}break}i=o,s+=r;let a=e.doc.resolve(s);if(cr.valid(a))return a}return null}}}cr.prototype.visible=!1;cr.findFrom=cr.findGapCursorFrom;Ze.jsonID("gapcursor",cr);class uD{constructor(e){this.pos=e}map(e){return new uD(e.map(this.pos))}resolve(e){let r=e.resolve(this.pos);return cr.valid(r)?new cr(r):Ze.near(r)}}function Coe(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function i_e(t){for(let e=t.depth;e>=0;e--){let r=t.index(e),n=t.node(e);if(r==0){if(n.type.spec.isolating)return!0;continue}for(let s=n.child(r-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||Coe(s.type))return!0;if(s.inlineContent)return!1}}return!0}function o_e(t){for(let e=t.depth;e>=0;e--){let r=t.indexAfter(e),n=t.node(e);if(r==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let s=n.child(r);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||Coe(s.type))return!0;if(s.inlineContent)return!1}}return!0}function a_e(){return new er({props:{decorations:d_e,createSelectionBetween(t,e,r){return e.pos==r.pos&&cr.valid(r)?new cr(r):null},handleClick:c_e,handleKeyDown:l_e,handleDOMEvents:{beforeinput:u_e}}})}const l_e=Sie({ArrowLeft:my("horiz",-1),ArrowRight:my("horiz",1),ArrowUp:my("vert",-1),ArrowDown:my("vert",1)});function my(t,e){const r=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(n,s,i){let o=n.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof We){if(!i.endOfTextblock(r)||a.depth==0)return!1;l=!1,a=n.doc.resolve(e>0?a.after():a.before())}let u=cr.findGapCursorFrom(a,e,l);return u?(s&&s(n.tr.setSelection(new cr(u))),!0):!1}}function c_e(t,e,r){if(!t||!t.editable)return!1;let n=t.state.doc.resolve(e);if(!cr.valid(n))return!1;let s=t.posAtCoords({left:r.clientX,top:r.clientY});return s&&s.inside>-1&&Ae.isSelectable(t.state.doc.nodeAt(s.inside))?!1:(t.dispatch(t.state.tr.setSelection(new cr(n))),!0)}function u_e(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof cr))return!1;let{$from:r}=t.state.selection,n=r.parent.contentMatchAt(r.index()).findWrapping(t.state.schema.nodes.text);if(!n)return!1;let s=J.empty;for(let o=n.length-1;o>=0;o--)s=J.from(n[o].createAndFill(null,s));let i=t.state.tr.replace(r.pos,r.pos,new we(s,0,0));return i.setSelection(We.near(i.doc.resolve(r.pos+1))),t.dispatch(i),!1}function d_e(t){if(!(t.selection instanceof cr))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Qt.create(t.doc,[Ln.widget(t.selection.head,e,{key:"gapcursor"})])}var k0=200,Qr=function(){};Qr.prototype.append=function(e){return e.length?(e=Qr.from(e),!this.length&&e||e.length<k0&&this.leafAppend(e)||this.length<k0&&e.leafPrepend(this)||this.appendInner(e)):this};Qr.prototype.prepend=function(e){return e.length?Qr.from(e).append(this):this};Qr.prototype.appendInner=function(e){return new h_e(this,e)};Qr.prototype.slice=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=this.length),e>=r?Qr.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,r))};Qr.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Qr.prototype.forEach=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length),r<=n?this.forEachInner(e,r,n,0):this.forEachInvertedInner(e,r,n,0)};Qr.prototype.map=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length);var s=[];return this.forEach(function(i,o){return s.push(e(i,o))},r,n),s};Qr.from=function(e){return e instanceof Qr?e:e&&e.length?new koe(e):Qr.empty};var koe=function(t){function e(n){t.call(this),this.values=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,i){return s==0&&i==this.length?this:new e(this.values.slice(s,i))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,i,o,a){for(var l=i;l<o;l++)if(s(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(s,i,o,a){for(var l=i-1;l>=o;l--)if(s(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=k0)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=k0)return new e(s.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(e.prototype,r),e}(Qr);Qr.empty=new koe([]);var h_e=function(t){function e(r,n){t.call(this),this.left=r,this.right=n,this.length=r.length+n.length,this.depth=Math.max(r.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,s,i,o){var a=this.left.length;if(s<a&&this.left.forEachInner(n,s,Math.min(i,a),o)===!1||i>a&&this.right.forEachInner(n,Math.max(s-a,0),Math.min(this.length,i)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(n,s,i,o){var a=this.left.length;if(s>a&&this.right.forEachInvertedInner(n,s-a,Math.max(i,a)-a,o+a)===!1||i<a&&this.left.forEachInvertedInner(n,Math.min(s,a),i,o)===!1)return!1},e.prototype.sliceInner=function(n,s){if(n==0&&s==this.length)return this;var i=this.left.length;return s<=i?this.left.slice(n,s):n>=i?this.right.slice(n-i,s-i):this.left.slice(n,i).append(this.right.slice(0,s-i))},e.prototype.leafAppend=function(n){var s=this.right.leafAppend(n);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(n){var s=this.left.leafPrepend(n);if(s)return new e(s,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e}(Qr);const f_e=500;class wi{constructor(e,r){this.items=e,this.eventCount=r}popEvent(e,r){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let s,i;r&&(s=this.remapping(n,this.items.length),i=s.maps.length);let o=e.tr,a,l,u=[],d=[];return this.items.forEach((h,f)=>{if(!h.step){s||(s=this.remapping(n,f+1),i=s.maps.length),i--,d.push(h);return}if(s){d.push(new qi(h.map));let p=h.step.map(s.slice(i)),m;p&&o.maybeStep(p).doc&&(m=o.mapping.maps[o.mapping.maps.length-1],u.push(new qi(m,void 0,void 0,u.length+d.length))),i--,m&&s.appendMap(m,i)}else o.maybeStep(h.step);if(h.selection)return a=s?h.selection.map(s.slice(i)):h.selection,l=new wi(this.items.slice(0,n).append(d.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,r,n,s){let i=[],o=this.eventCount,a=this.items,l=!s&&a.length?a.get(a.length-1):null;for(let d=0;d<e.steps.length;d++){let h=e.steps[d].invert(e.docs[d]),f=new qi(e.mapping.maps[d],h,r),p;(p=l&&l.merge(f))&&(f=p,d?i.pop():a=a.slice(0,a.length-1)),i.push(f),r&&(o++,r=void 0),s||(l=f)}let u=o-n.depth;return u>m_e&&(a=p_e(a,u),o-=u),new wi(a.append(i),o)}remapping(e,r){let n=new Xp;return this.items.forEach((s,i)=>{let o=s.mirrorOffset!=null&&i-s.mirrorOffset>=e?n.maps.length-s.mirrorOffset:void 0;n.appendMap(s.map,o)},e,r),n}addMaps(e){return this.eventCount==0?this:new wi(this.items.append(e.map(r=>new qi(r))),this.eventCount)}rebased(e,r){if(!this.eventCount)return this;let n=[],s=Math.max(0,this.items.length-r),i=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},s);let l=r;this.items.forEach(f=>{let p=i.getMirror(--l);if(p==null)return;o=Math.min(o,p);let m=i.maps[p];if(f.step){let g=e.steps[p].invert(e.docs[p]),y=f.selection&&f.selection.map(i.slice(l+1,p));y&&a++,n.push(new qi(m,g,y))}else n.push(new qi(m))},s);let u=[];for(let f=r;f<o;f++)u.push(new qi(i.maps[f]));let d=this.items.slice(0,s).append(u).append(n),h=new wi(d,a);return h.emptyItemCount()>f_e&&(h=h.compress(this.items.length-n.length)),h}emptyItemCount(){let e=0;return this.items.forEach(r=>{r.step||e++}),e}compress(e=this.items.length){let r=this.remapping(0,e),n=r.maps.length,s=[],i=0;return this.items.forEach((o,a)=>{if(a>=e)s.push(o),o.selection&&i++;else if(o.step){let l=o.step.map(r.slice(n)),u=l&&l.getMap();if(n--,u&&r.appendMap(u,n),l){let d=o.selection&&o.selection.map(r.slice(n));d&&i++;let h=new qi(u.invert(),l,d),f,p=s.length-1;(f=s.length&&s[p].merge(h))?s[p]=f:s.push(h)}}else o.map&&n--},this.items.length,0),new wi(Qr.from(s.reverse()),i)}}wi.empty=new wi(Qr.empty,0);function p_e(t,e){let r;return t.forEach((n,s)=>{if(n.selection&&e--==0)return r=s,!1}),t.slice(r)}class qi{constructor(e,r,n,s){this.map=e,this.step=r,this.selection=n,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let r=e.step.merge(this.step);if(r)return new qi(r.getMap().invert(),r,this.selection)}}}class ka{constructor(e,r,n,s,i){this.done=e,this.undone=r,this.prevRanges=n,this.prevTime=s,this.prevComposition=i}}const m_e=20;function g_e(t,e,r,n){let s=r.getMeta(Oc),i;if(s)return s.historyState;r.getMeta(b_e)&&(t=new ka(t.done,t.undone,null,0,-1));let o=r.getMeta("appendedTransaction");if(r.steps.length==0)return t;if(o&&o.getMeta(Oc))return o.getMeta(Oc).redo?new ka(t.done.addTransform(r,void 0,n,Ky(e)),t.undone,$F(r.mapping.maps),t.prevTime,t.prevComposition):new ka(t.done,t.undone.addTransform(r,void 0,n,Ky(e)),null,t.prevTime,t.prevComposition);if(r.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=r.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(r.time||0)-n.newGroupDelay||!y_e(r,t.prevRanges)),u=o?U1(t.prevRanges,r.mapping):$F(r.mapping.maps);return new ka(t.done.addTransform(r,l?e.selection.getBookmark():void 0,n,Ky(e)),wi.empty,u,r.time,a??t.prevComposition)}else return(i=r.getMeta("rebased"))?new ka(t.done.rebased(r,i),t.undone.rebased(r,i),U1(t.prevRanges,r.mapping),t.prevTime,t.prevComposition):new ka(t.done.addMaps(r.mapping.maps),t.undone.addMaps(r.mapping.maps),U1(t.prevRanges,r.mapping),t.prevTime,t.prevComposition)}function y_e(t,e){if(!e)return!1;if(!t.docChanged)return!0;let r=!1;return t.mapping.maps[0].forEach((n,s)=>{for(let i=0;i<e.length;i+=2)n<=e[i+1]&&s>=e[i]&&(r=!0)}),r}function $F(t){let e=[];for(let r=t.length-1;r>=0&&e.length==0;r--)t[r].forEach((n,s,i,o)=>e.push(i,o));return e}function U1(t,e){if(!t)return null;let r=[];for(let n=0;n<t.length;n+=2){let s=e.map(t[n],1),i=e.map(t[n+1],-1);s<=i&&r.push(s,i)}return r}function v_e(t,e,r){let n=Ky(e),s=Oc.get(e).spec.config,i=(r?t.undone:t.done).popEvent(e,n);if(!i)return null;let o=i.selection.resolve(i.transform.doc),a=(r?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),s,n),l=new ka(r?a:i.remaining,r?i.remaining:a,null,0,-1);return i.transform.setSelection(o).setMeta(Oc,{redo:r,historyState:l})}let H1=!1,FF=null;function Ky(t){let e=t.plugins;if(FF!=e){H1=!1,FF=e;for(let r=0;r<e.length;r++)if(e[r].spec.historyPreserveItems){H1=!0;break}}return H1}const Oc=new Lr("history"),b_e=new Lr("closeHistory");function x_e(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new er({key:Oc,state:{init(){return new ka(wi.empty,wi.empty,null,0,-1)},apply(e,r,n){return g_e(r,n,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,r){let n=r.inputType,s=n=="historyUndo"?Toe:n=="historyRedo"?Ooe:null;return!s||!e.editable?!1:(r.preventDefault(),s(e.state,e.dispatch))}}}})}function joe(t,e){return(r,n)=>{let s=Oc.getState(r);if(!s||(t?s.undone:s.done).eventCount==0)return!1;if(n){let i=v_e(s,r,t);i&&n(e?i.scrollIntoView():i)}return!0}}const Toe=joe(!1,!0),Ooe=joe(!0,!0);xr.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const n=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(n)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,r=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(r)}},addProseMirrorPlugins(){let t=!1;return[new er({key:new Lr("characterCount"),appendTransaction:(e,r,n)=>{if(t)return;const s=this.options.limit;if(s==null||s===0){t=!0;return}const i=this.storage.characters({node:n.doc});if(i>s){const o=i-s,a=0,l=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${s} characters. Content was automatically trimmed.`);const u=n.tr.deleteRange(a,l);return t=!0,u}t=!0},filterTransaction:(e,r)=>{const n=this.options.limit;if(!e.docChanged||n===0||n===null||n===void 0)return!0;const s=this.storage.characters({node:r.doc}),i=this.storage.characters({node:e.doc});if(i<=n||s>n&&i>n&&i<=s)return!0;if(s>n&&i>n&&i>s||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,l=i-n,u=a-l,d=a;return e.deleteRange(u,d),!(this.storage.characters({node:e.doc})>n)}})]}});var w_e=xr.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[n_e(this.options)]}});xr.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new er({key:new Lr("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:r,isFocused:n}=this.editor,{anchor:s}=e,i=[];if(!r||!n)return Qt.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((l,u)=>{if(l.isText)return;if(!(s>=u&&s<=u+l.nodeSize-1))return!1;o+=1});let a=0;return t.descendants((l,u)=>{if(l.isText||!(s>=u&&s<=u+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&o-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";i.push(Ln.node(u,u+l.nodeSize,{class:this.options.className}))}),Qt.create(t,i)}}})]}});var S_e=xr.create({name:"gapCursor",addProseMirrorPlugins(){return[a_e()]},extendNodeSchema(t){var e;const r={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Et(Re(t,"allowGapCursor",r)))!=null?e:null}}}),E_e=xr.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new er({key:new Lr("placeholder"),props:{decorations:({doc:t,selection:e})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:n}=e,s=[];if(!r)return null;const i=this.editor.isEmpty;return t.descendants((o,a)=>{const l=n>=a&&n<=a+o.nodeSize,u=!o.isLeaf&&Ab(o);if((l||!this.options.showOnlyCurrent)&&u){const d=[this.options.emptyNodeClass];i&&d.push(this.options.emptyEditorClass);const h=Ln.node(a,a+o.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:a,hasAnchor:l}):this.options.placeholder});s.push(h)}return this.options.includeChildren}),Qt.create(t,s)}}})]}});xr.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new er({key:new Lr("selection"),props:{decorations(r){return r.selection.empty||t.isFocused||!t.isEditable||Fie(r.selection)||t.view.dragging?null:Qt.create(r.doc,[Ln.inline(r.selection.from,r.selection.to,{class:e.className})])}}})]}});function qF({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var __e=xr.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new Lr(this.name),r=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",n=Object.entries(this.editor.schema.nodes).map(([,s])=>s).filter(s=>(this.options.notAfter||[]).concat(r).includes(s.name));return[new er({key:e,appendTransaction:(s,i,o)=>{const{doc:a,tr:l,schema:u}=o,d=e.getState(o),h=a.content.size,f=u.nodes[r];if(d)return l.insert(h,f.create())},state:{init:(s,i)=>{const o=i.tr.doc.lastChild;return!qF({node:o,types:n})},apply:(s,i)=>{if(!s.docChanged||s.getMeta("__uniqueIDTransaction"))return i;const o=s.doc.lastChild;return!qF({node:o,types:n})}}})]}}),N_e=xr.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>Toe(t,e),redo:()=>({state:t,dispatch:e})=>Ooe(t,e)}},addProseMirrorPlugins(){return[x_e(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),C_e=xr.create({name:"starterKit",addExtensions(){var t,e,r,n;const s=[];return this.options.bold!==!1&&s.push(JEe.configure(this.options.bold)),this.options.blockquote!==!1&&s.push(KEe.configure(this.options.blockquote)),this.options.bulletList!==!1&&s.push(goe.configure(this.options.bulletList)),this.options.code!==!1&&s.push(t2e.configure(this.options.code)),this.options.codeBlock!==!1&&s.push(s2e.configure(this.options.codeBlock)),this.options.document!==!1&&s.push(i2e.configure(this.options.document)),this.options.dropcursor!==!1&&s.push(w_e.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&s.push(S_e.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&s.push(o2e.configure(this.options.hardBreak)),this.options.heading!==!1&&s.push(a2e.configure(this.options.heading)),this.options.undoRedo!==!1&&s.push(N_e.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&s.push(l2e.configure(this.options.horizontalRule)),this.options.italic!==!1&&s.push(f2e.configure(this.options.italic)),this.options.listItem!==!1&&s.push(yoe.configure(this.options.listItem)),this.options.listKeymap!==!1&&s.push(Eoe.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&s.push(moe.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&s.push(Noe.configure(this.options.orderedList)),this.options.paragraph!==!1&&s.push(X2e.configure(this.options.paragraph)),this.options.strike!==!1&&s.push(e_e.configure(this.options.strike)),this.options.text!==!1&&s.push(t_e.configure(this.options.text)),this.options.underline!==!1&&s.push(r_e.configure((r=this.options)==null?void 0:r.underline)),this.options.trailingNode!==!1&&s.push(__e.configure((n=this.options)==null?void 0:n.trailingNode)),s}}),k_e=C_e,j_e=E_e;const ya=({onClick:t,isActive:e,disabled:r,children:n,title:s})=>c.jsx("button",{type:"button",onClick:t,disabled:r,title:s,className:`p-1.5 rounded hover:bg-gray-100 transition-colors ${e?"bg-gray-200 text-primary-600":"text-gray-600"} ${r?"opacity-50 cursor-not-allowed":""}`,children:n}),T_e=({editor:t})=>{if(!t)return null;const e=()=>{const r=t.getAttributes("link").href,n=window.prompt("Enter URL:",r);if(n===null)return;if(n===""){t.chain().focus().extendMarkRange("link").unsetLink().run();return}const s=n.match(/^https?:\/\//)?n:`https://${n}`;t.chain().focus().extendMarkRange("link").setLink({href:s}).run()};return c.jsxs("div",{className:"flex items-center gap-0.5 p-1.5 border-b border-gray-200 bg-gray-50 rounded-t-md",children:[c.jsx(ya,{onClick:()=>t.chain().focus().toggleBold().run(),isActive:t.isActive("bold"),title:"Bold (Cmd+B)",children:c.jsx(fge,{className:"w-4 h-4"})}),c.jsx(ya,{onClick:()=>t.chain().focus().toggleItalic().run(),isActive:t.isActive("italic"),title:"Italic (Cmd+I)",children:c.jsx(xge,{className:"w-4 h-4"})}),c.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),c.jsx(ya,{onClick:()=>t.chain().focus().toggleBulletList().run(),isActive:t.isActive("bulletList"),title:"Bullet list",children:c.jsx(nne,{className:"w-4 h-4"})}),c.jsx(ya,{onClick:()=>t.chain().focus().toggleOrderedList().run(),isActive:t.isActive("orderedList"),title:"Numbered list",children:c.jsx(Sge,{className:"w-4 h-4"})}),c.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),c.jsx(ya,{onClick:e,isActive:t.isActive("link"),title:"Add link",children:c.jsx(uA,{className:"w-4 h-4"})}),t.isActive("link")&&c.jsx(ya,{onClick:()=>t.chain().focus().unsetLink().run(),title:"Remove link",children:c.jsx(Ige,{className:"w-4 h-4"})}),c.jsx("div",{className:"flex-1"}),c.jsx(ya,{onClick:()=>t.chain().focus().undo().run(),disabled:!t.can().undo(),title:"Undo (Cmd+Z)",children:c.jsx(Pge,{className:"w-4 h-4"})}),c.jsx(ya,{onClick:()=>t.chain().focus().redo().run(),disabled:!t.can().redo(),title:"Redo (Cmd+Shift+Z)",children:c.jsx(Tge,{className:"w-4 h-4"})})]})};function Poe({value:t="",onChange:e,placeholder:r="Write something...",disabled:n=!1,minHeight:s="120px",autoFocus:i=!1}){const o=zEe({extensions:[k_e.configure({heading:!1,codeBlock:!1,blockquote:!1}),j_e.configure({placeholder:r}),F2e.configure({openOnClick:!1,HTMLAttributes:{class:"text-primary-600 hover:text-primary-700 underline"}})],content:t,editable:!n,autofocus:i,onUpdate:({editor:a})=>{const l=a.getHTML();e(l==="<p></p>"||l===""?"":l)}});if(o&&t!==o.getHTML()&&t!==""){const a=o.getHTML();t&&(a==="<p></p>"||a===""||t!==a)&&o.commands.setContent(t,!1)}return c.jsxs("div",{className:`border border-gray-300 rounded-md overflow-hidden focus-within:ring-2 focus-within:ring-primary-500 focus-within:border-transparent ${n?"bg-gray-100 opacity-60":"bg-white"}`,children:[c.jsx(T_e,{editor:o}),c.jsx(AEe,{editor:o,className:"prose prose-sm max-w-none",style:{minHeight:s}}),c.jsx("style",{children:`
        .ProseMirror {
          padding: 0.75rem;
          min-height: ${s};
          outline: none;
        }
        .ProseMirror p.is-editor-empty:first-child::before {
          content: attr(data-placeholder);
          float: left;
          color: #9ca3af;
          pointer-events: none;
          height: 0;
        }
        .ProseMirror ul,
        .ProseMirror ol {
          padding-left: 1.5rem;
        }
        .ProseMirror ul {
          list-style-type: disc;
        }
        .ProseMirror ol {
          list-style-type: decimal;
        }
        .ProseMirror li {
          margin-bottom: 0.25rem;
        }
        .ProseMirror p {
          margin-bottom: 0.5rem;
        }
        .ProseMirror p:last-child {
          margin-bottom: 0;
        }
      `})]})}function IR(t){if(!t)return!0;const e=t.trim();return e===""||e==="<p></p>"||e==="<p><br></p>"}const K1=[{id:"call",label:"Phone call",icon:dA},{id:"email",label:"Email",icon:mb},{id:"chat",label:"Chat",icon:gb},{id:"meeting",label:"Meeting",icon:qr},{id:"coffee",label:"Coffee",icon:Jre},{id:"lunch",label:"Lunch",icon:une},{id:"note",label:"Other",icon:pb}];function dD({isOpen:t,onClose:e,onSubmit:r,isLoading:n,personId:s,initialData:i=null,activity:o=null}){const[a,l]=C.useState("call"),[u,d]=C.useState(""),[h,f]=C.useState(""),[p,m]=C.useState(""),[g,y]=C.useState([]),[v,b]=C.useState(!1),[w,x]=C.useState(""),{data:S}=hu(),E=!!o;if(C.useEffect(()=>{if(t){const $=new Date,q=$.toISOString().split("T")[0],M=$.toTimeString().slice(0,5);o?(d(o.activity_date||q),f(o.activity_time||""),m(o.content||""),y(o.participants||[]),l(o.activity_type||"note")):i?(d(i.activity_date||q),f(i.activity_time||M),m(i.content||""),y(i.participants||[]),l(i.activity_type||"note")):(d(q),f(M),m(""),y([]),l("call"))}},[t,i,o]),!t)return null;const N=(S||[]).filter($=>$.id.toString()!==(s==null?void 0:s.toString())),_=N.filter($=>{var q;return(q=$.name)==null?void 0:q.toLowerCase().includes(w.toLowerCase())}),k=$=>{$.preventDefault(),!IR(p)&&(r({activity_type:a,activity_date:u||null,activity_time:h||null,content:p,participants:g}),m(""),y([]),d(new Date().toISOString().split("T")[0]),f(new Date().toTimeString().slice(0,5)))},j=()=>{m(""),y([]),d(""),f(""),b(!1),x(""),e()},T=$=>{y(q=>q.includes($)?q.filter(M=>M!==$):[...q,$])},P=$=>{y(q=>q.filter(M=>M!==$))},O=()=>N.filter($=>g.includes($.id)),D=$=>{if(!$)return"";try{return new Date($).toISOString().split("T")[0]}catch{return""}};return(K1.find($=>$.id===a)||K1[0]).icon,c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b sticky top-0 bg-white z-10",children:[c.jsx("h2",{className:"text-lg font-semibold",children:E?"Edit activity":"Add activity"}),c.jsx("button",{onClick:j,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(ot,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:k,className:"p-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"space-y-4 md:col-span-1",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Activity type"}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:K1.map($=>{const q=$.icon,M=a===$.id;return c.jsxs("button",{type:"button",onClick:()=>l($.id),className:`flex flex-col items-center justify-center p-3 border-2 rounded-lg transition-colors ${M?"border-primary-600 bg-primary-50 text-primary-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,disabled:n,children:[c.jsx(q,{className:"w-5 h-5 mb-1"}),c.jsx("span",{className:"text-xs",children:$.label})]},$.id)})})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"activity-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),c.jsx("input",{id:"activity-date",type:"date",value:D(u),onChange:$=>d($.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"activity-time",className:"block text-sm font-medium text-gray-700 mb-2",children:"Time"}),c.jsx("input",{id:"activity-time",type:"time",value:h,onChange:$=>f($.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Participants (optional)"}),O().length>0&&c.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:O().map($=>c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-700 rounded-full text-sm",children:[$.name,c.jsx("button",{type:"button",onClick:()=>P($.id),className:"hover:text-primary-900",disabled:n,children:c.jsx(ot,{className:"w-3 h-3"})})]},$.id))}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{type:"button",onClick:()=>b(!v),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-left text-sm text-gray-500 hover:border-gray-400",disabled:n,children:g.length===0?"Add participants...":"Add more participants..."}),v&&c.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[c.jsx("div",{className:"p-2 border-b",children:c.jsx("input",{type:"text",placeholder:"Search people...",value:w,onChange:$=>x($.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded",autoFocus:!0})}),c.jsx("div",{className:"max-h-48 overflow-y-auto",children:_.length===0?c.jsx("div",{className:"p-3 text-sm text-gray-500 text-center",children:"No people found"}):_.map($=>{var M;const q=g.includes($.id);return c.jsxs("button",{type:"button",onClick:()=>T($.id),className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2 ${q?"bg-primary-50":""}`,children:[c.jsx("input",{type:"checkbox",checked:q,onChange:()=>{},className:"mr-1"}),$.thumbnail?c.jsx("img",{src:$.thumbnail,alt:$.name,className:"w-6 h-6 rounded-full"}):c.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-xs text-gray-500",children:((M=$.first_name)==null?void 0:M[0])||"?"})}),c.jsx("span",{children:$.name})]},$.id)})})]})]})]})]}),c.jsxs("div",{className:"flex flex-col md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),c.jsx("div",{className:"flex-1",children:c.jsx(Poe,{value:p,onChange:m,placeholder:"What happened? Add your call notes, chat summary, meeting notes...",disabled:n,minHeight:"280px"})})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 mt-6 pt-4 border-t",children:[c.jsx("button",{type:"button",onClick:j,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n||IR(p),children:n?E?"Saving...":"Adding...":E?"Save":"Add activity"})]})]})]})})}function va({title:t,value:e,icon:r,href:n}){return c.jsx(ze,{to:n,className:"card p-6 hover:shadow-md transition-shadow",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-500",children:t}),c.jsx("p",{className:"mt-1 text-3xl font-semibold",children:e})]}),c.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:c.jsx(r,{className:"w-6 h-6 text-primary-600"})})]})})}function G1({person:t,hideStar:e=!1}){var r,n;return c.jsxs(ze,{to:`/people/${t.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[t.thumbnail?c.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-10 h-10 rounded-full object-cover"}):c.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-sm font-medium text-gray-500",children:((r=t.first_name)==null?void 0:r[0])||"?"})}),c.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.name}),((n=t.labels)==null?void 0:n.length)>0&&c.jsx("p",{className:"text-xs text-gray-500 truncate",children:t.labels.join(", ")})]}),t.is_favorite&&!e&&c.jsx(Hc,{className:"w-4 h-4 text-yellow-400 fill-current"})]})}function O_e({reminder:t}){var o,a,l;const e=t.days_until;let r="bg-gray-100 text-gray-700";e===0?r="bg-green-100 text-green-700":e<=3?r="bg-orange-100 text-orange-700":e<=7&&(r="bg-yellow-100 text-yellow-700");const n=(a=(o=t.related_people)==null?void 0:o[0])==null?void 0:a.id,s=((l=t.related_people)==null?void 0:l.length)>0,i=c.jsxs(c.Fragment,{children:[c.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${r}`,children:e===0?"Today":`${e}d`}),c.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.title}),c.jsx("p",{className:"text-xs text-gray-500",children:Dn(new Date(t.next_occurrence),"MMMM d, yyyy")})]}),s&&c.jsx("div",{className:"flex -space-x-2 ml-3 flex-shrink-0",children:t.related_people.slice(0,3).map(u=>{var d;return u.thumbnail?c.jsx("img",{src:u.thumbnail,alt:u.name,loading:"lazy",className:"w-10 h-10 rounded-full border-2 border-white object-cover"},u.id):c.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full border-2 border-white flex items-center justify-center",children:c.jsx("span",{className:"text-sm",children:(d=u.name)==null?void 0:d[0]})},u.id)})})]});return s&&n?c.jsx(ze,{to:`/people/${n}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:i}):c.jsx("div",{className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:i})}function P_e({todo:t,onToggle:e}){var n;const r=Lm(t);return c.jsxs(ze,{to:`/people/${t.person_id}`,className:"flex items-start p-3 rounded-lg hover:bg-gray-50 transition-colors group",children:[c.jsx("button",{onClick:s=>{s.preventDefault(),s.stopPropagation(),e(t)},className:"mt-0.5 mr-3 flex-shrink-0",title:t.is_completed?"Mark as incomplete":"Mark as complete",children:t.is_completed?c.jsx(Xs,{className:"w-5 h-5 text-primary-600"}):c.jsx(Sl,{className:`w-5 h-5 ${r?"text-red-600":"text-gray-400"}`})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:`text-sm font-medium ${t.is_completed?"line-through text-gray-400":r?"text-red-600":"text-gray-900"}`,children:t.content}),c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.person_thumbnail?c.jsx("img",{src:t.person_thumbnail,alt:t.person_name,loading:"lazy",className:"w-5 h-5 rounded-full object-cover"}):c.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-xs text-gray-500",children:(n=t.person_name)==null?void 0:n[0]})}),c.jsx("span",{className:"text-xs text-gray-500 truncate",children:t.person_name})]})]}),t.due_date&&c.jsxs("div",{className:`ml-3 text-xs text-right flex-shrink-0 ${r&&!t.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:[c.jsx("div",{children:Dn(new Date(t.due_date),"MMM d")}),r&&!t.is_completed&&c.jsx("div",{className:"text-red-600",children:"overdue"})]})]})}function I_e(){return c.jsxs("div",{className:"card p-12 text-center",children:[c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx("div",{className:"p-4 bg-primary-50 rounded-full",children:c.jsx(ane,{className:"w-12 h-12 text-primary-600"})})}),c.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:["Welcome to ",Gc,"!"]}),c.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"Get started by adding your first contact, organization, or important date. Your dashboard will populate as you add more information."}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[c.jsxs(ze,{to:"/people/new",className:"inline-flex items-center px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[c.jsx(dr,{className:"w-5 h-5 mr-2"}),"Add Your First Person"]}),c.jsxs(ze,{to:"/companies/new",className:"inline-flex items-center px-6 py-3 bg-white text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[c.jsx(dr,{className:"w-5 h-5 mr-2"}),"Add Your First Organization"]})]})]})}function R_e(){var j,T,P;const{data:t,isLoading:e,error:r}=Qge(),{data:n}=vne(!1),s=bne(),i=gA(),[o,a]=C.useState(null),[l,u]=C.useState(!1),[d,h]=C.useState(!1),[f,p]=C.useState(null),m=O=>{if(!O.is_completed){a(O),u(!0);return}s.mutate({todoId:O.id,data:{content:O.content,due_date:O.due_date,is_completed:!1}})},g=()=>{o&&(s.mutate({todoId:o.id,data:{content:o.content,due_date:o.due_date,is_completed:!0}}),u(!1),a(null))},y=()=>{if(!o)return;const O=new Date().toISOString().split("T")[0];p({content:o.content,activity_date:O,activity_type:"note",participants:[]}),u(!1),h(!0)},v=async O=>{if(o)try{await i.mutateAsync({personId:o.person_id,data:O}),await s.mutateAsync({todoId:o.id,data:{content:o.content,due_date:o.due_date,is_completed:!0}}),h(!1),a(null),p(null)}catch{alert("Failed to create activity. Please try again.")}};if(e)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(r){const O=((j=r==null?void 0:r.response)==null?void 0:j.status)>=500||!(r!=null&&r.response);return c.jsx("div",{className:"card p-8 text-center",children:c.jsx("div",{className:"text-red-600 mb-2",children:O?c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"font-medium mb-1",children:"Failed to load dashboard data"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Please check your connection and try refreshing the page."})]}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"font-medium mb-1",children:"Unable to load dashboard"}),c.jsx("p",{className:"text-sm text-gray-600",children:((P=(T=r==null?void 0:r.response)==null?void 0:T.data)==null?void 0:P.message)||"An error occurred while loading your data."})]})})})}const{stats:b,recent_people:w,upcoming_reminders:x,favorites:S,recently_contacted:E}=t||{};if(((b==null?void 0:b.total_people)||0)+((b==null?void 0:b.total_companies)||0)+((b==null?void 0:b.total_dates)||0)===0)return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsx(va,{title:"Total people",value:0,icon:qr,href:"/people"}),c.jsx(va,{title:"Organizations",value:0,icon:yr,href:"/companies"}),c.jsx(va,{title:"Events",value:0,icon:Ji,href:"/dates"}),c.jsx(va,{title:"Open todos",value:0,icon:Xs,href:"/todos"})]}),c.jsx(I_e,{})]});const k=(n==null?void 0:n.slice(0,5))||[];return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsx(va,{title:"Total people",value:(b==null?void 0:b.total_people)||0,icon:qr,href:"/people"}),c.jsx(va,{title:"Organizations",value:(b==null?void 0:b.total_companies)||0,icon:yr,href:"/companies"}),c.jsx(va,{title:"Events",value:(b==null?void 0:b.total_dates)||0,icon:Ji,href:"/dates"}),c.jsx(va,{title:"Open todos",value:(b==null?void 0:b.open_todos_count)||0,icon:Xs,href:"/todos"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"card",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx(Ji,{className:"w-5 h-5 mr-2 text-gray-500"}),"Upcoming reminders"]}),c.jsxs(ze,{to:"/dates",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all reminders",c.jsx(o1,{className:"w-4 h-4 ml-1"})]})]}),c.jsx("div",{className:"divide-y divide-gray-100",children:(x==null?void 0:x.length)>0?x.map(O=>c.jsx(O_e,{reminder:O},O.id)):c.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No upcoming reminders"})})]}),c.jsxs("div",{className:"card",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx(Xs,{className:"w-5 h-5 mr-2 text-gray-500"}),"Open todos"]}),c.jsxs(ze,{to:"/todos",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all todos",c.jsx(o1,{className:"w-4 h-4 ml-1"})]})]}),c.jsx("div",{className:"divide-y divide-gray-100",children:k.length>0?k.map(O=>c.jsx(P_e,{todo:O,onToggle:m},O.id)):c.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No open todos"})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx(Hc,{className:"w-5 h-5 mr-2 text-yellow-500 fill-current"}),"Favorites"]})}),(S==null?void 0:S.length)>0?c.jsx("div",{className:"divide-y divide-gray-100",children:S.slice(0,5).map(O=>c.jsx(G1,{person:O,hideStar:!0},O.id))}):c.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No favorites yet"})]}),c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx(gb,{className:"w-5 h-5 mr-2 text-gray-500"}),"Recently contacted"]})}),(E==null?void 0:E.length)>0?c.jsx("div",{className:"divide-y divide-gray-100",children:E.map(O=>c.jsx(G1,{person:O},O.id))}):c.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No recent activities yet"})]}),c.jsxs("div",{className:"card",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx(qr,{className:"w-5 h-5 mr-2 text-gray-500"}),"Recently edited"]}),c.jsxs(ze,{to:"/people",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all",c.jsx(o1,{className:"w-4 h-4 ml-1"})]})]}),c.jsx("div",{className:"divide-y divide-gray-100",children:(w==null?void 0:w.length)>0?w.map(O=>c.jsx(G1,{person:O},O.id)):c.jsxs("p",{className:"p-4 text-sm text-gray-500 text-center",children:["No people yet. ",c.jsx(ze,{to:"/people/new",className:"text-primary-600",children:"Add someone"})]})})]})]}),c.jsx(_A,{isOpen:l,onClose:()=>{u(!1),a(null)},todo:o,onComplete:g,onCompleteAsActivity:y}),c.jsx(dD,{isOpen:d,onClose:()=>{h(!1),a(null),p(null)},onSubmit:v,isLoading:i.isPending,personId:o==null?void 0:o.person_id,initialData:f})]})}function LF(t){var s;const e=((s=t.acf)==null?void 0:s.work_history)||[];if(e.length===0)return null;const r=e.find(i=>i.is_current&&i.company);if(r)return r.company;const n=e.filter(i=>i.company).sort((i,o)=>{const a=i.start_date?new Date(i.start_date):new Date(0);return(o.start_date?new Date(o.start_date):new Date(0))-a});return n.length>0?n[0].company:null}function M_e({person:t,companyName:e,isDeceased:r}){var n,s;return c.jsx(ze,{to:`/people/${t.id}`,className:"card p-4 hover:shadow-md transition-shadow",children:c.jsxs("div",{className:"flex items-start",children:[t.thumbnail?c.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-12 h-12 rounded-full object-cover"}):c.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-lg font-medium text-gray-500",children:((n=t.first_name)==null?void 0:n[0])||"?"})}),c.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsxs("h3",{className:"text-sm font-medium text-gray-900 truncate",children:[t.name,r&&c.jsx("span",{className:"ml-1 text-gray-500",children:""})]}),t.is_favorite&&c.jsx(Hc,{className:"w-4 h-4 ml-1 text-yellow-400 fill-current flex-shrink-0"})]}),e&&c.jsx("p",{className:"text-xs text-gray-500 mt-0.5 truncate",children:e}),((s=t.labels)==null?void 0:s.length)>0&&c.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.labels.slice(0,3).map(i=>c.jsx("span",{className:"inline-flex px-2 py-0.5 text-xs rounded-full bg-gray-100 text-gray-600",children:i},i))})]})]})})}function A_e({person:t,companyName:e,workspaces:r,isSelected:n,onToggleSelection:s,isOdd:i}){var l,u;const a=(((l=t.acf)==null?void 0:l._assigned_workspaces)||[]).map(d=>{const h=typeof d=="string"?parseInt(d,10):d,f=r.find(p=>p.id===h);return f==null?void 0:f.title}).filter(Boolean).join(", ");return c.jsxs("tr",{className:`hover:bg-gray-100 ${i?"bg-gray-50":"bg-white"}`,children:[c.jsx("td",{className:"pl-4 pr-2 py-3 w-10",children:c.jsx("button",{onClick:d=>{d.preventDefault(),s(t.id)},className:"text-gray-400 hover:text-gray-600",children:n?c.jsx(Xs,{className:"w-5 h-5 text-primary-600"}):c.jsx(Sl,{className:"w-5 h-5"})})}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:c.jsxs(ze,{to:`/people/${t.id}`,className:"flex items-center",children:[t.thumbnail?c.jsx("img",{src:t.thumbnail,alt:"",className:"w-8 h-8 rounded-full object-cover"}):c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-sm font-medium text-gray-500",children:((u=t.first_name)==null?void 0:u[0])||"?"})}),c.jsx("div",{className:"ml-3",children:c.jsxs("div",{className:"flex items-center",children:[c.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[t.first_name||"",t.is_deceased&&c.jsx("span",{className:"ml-1 text-gray-500",children:""})]}),t.is_favorite&&c.jsx(Hc,{className:"w-4 h-4 ml-1 text-yellow-400 fill-current"})]})})]})}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:t.last_name||"-"}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:e||"-"}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:a||"-"}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:t.labels&&t.labels.length>0?c.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.labels.slice(0,3).map(d=>c.jsx("span",{className:"inline-flex px-2 py-0.5 text-xs rounded-full bg-gray-100 text-gray-600",children:d},d)),t.labels.length>3&&c.jsxs("span",{className:"text-xs text-gray-400",children:["+",t.labels.length-3," more"]})]}):"-"})]})}function Mf({field:t,label:e,currentSortField:r,currentSortOrder:n,onSort:s}){const i=r===t;return c.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50",children:c.jsxs("button",{onClick:()=>s(t),className:"flex items-center gap-1 hover:text-gray-700 cursor-pointer",children:[e,i&&(n==="asc"?c.jsx(Gre,{className:"w-3 h-3"}):c.jsx(Kre,{className:"w-3 h-3"}))]})})}function D_e({people:t,companyMap:e,workspaces:r,selectedIds:n,onToggleSelection:s,onToggleSelectAll:i,isAllSelected:o,isSomeSelected:a,sortField:l,sortOrder:u,onSort:d}){return c.jsx("div",{className:"card overflow-x-auto max-h-[calc(100vh-12rem)] overflow-y-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:c.jsxs("tr",{className:"shadow-sm",children:[c.jsx("th",{scope:"col",className:"pl-4 pr-2 py-3 w-10 bg-gray-50",children:c.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600",title:o?"Deselect all":"Select all",children:o?c.jsx(Xs,{className:"w-5 h-5 text-primary-600"}):a?c.jsx(Cge,{className:"w-5 h-5 text-primary-600"}):c.jsx(Sl,{className:"w-5 h-5"})})}),c.jsx(Mf,{field:"first_name",label:"First Name",currentSortField:l,currentSortOrder:u,onSort:d}),c.jsx(Mf,{field:"last_name",label:"Last Name",currentSortField:l,currentSortOrder:u,onSort:d}),c.jsx(Mf,{field:"organization",label:"Organization",currentSortField:l,currentSortOrder:u,onSort:d}),c.jsx(Mf,{field:"workspace",label:"Workspace",currentSortField:l,currentSortOrder:u,onSort:d}),c.jsx(Mf,{field:"labels",label:"Labels",currentSortField:l,currentSortOrder:u,onSort:d})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map((h,f)=>c.jsx(A_e,{person:h,companyName:e[h.id],workspaces:r,isSelected:n.has(h.id),onToggleSelection:s,isOdd:f%2===1},h.id))})]})})}function $_e({isOpen:t,onClose:e,selectedCount:r,onSubmit:n,isLoading:s}){const[i,o]=C.useState("private");if(C.useEffect(()=>{t&&o("private")},[t]),!t)return null;const a=[{value:"private",label:"Private",description:"Only you can see these contacts",icon:$m},{value:"workspace",label:"Workspace",description:"Share with workspace members",icon:qr}];return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Change Visibility"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:s,children:c.jsx(ot,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsxs("p",{className:"text-sm text-gray-600",children:["Select visibility for ",r," ",r===1?"person":"people",":"]}),c.jsx("div",{className:"space-y-2",children:a.map(l=>{const u=l.icon,d=i===l.value;return c.jsxs("button",{type:"button",onClick:()=>o(l.value),disabled:s,className:`w-full flex items-start gap-3 p-3 rounded-lg border-2 text-left transition-colors ${d?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:[c.jsx(u,{className:`w-5 h-5 mt-0.5 ${d?"text-primary-600":"text-gray-400"}`}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:`text-sm font-medium ${d?"text-primary-900":"text-gray-900"}`,children:l.label}),c.jsx("div",{className:"text-xs text-gray-500",children:l.description})]}),d&&c.jsx(to,{className:"w-5 h-5 text-primary-600 mt-0.5"})]},l.value)})})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:s,children:"Cancel"}),c.jsx("button",{type:"button",onClick:()=>n(i),className:"btn-primary",disabled:s,children:s?"Applying...":`Apply to ${r} ${r===1?"person":"people"}`})]})]})})}function F_e({isOpen:t,onClose:e,selectedCount:r,workspaces:n,onSubmit:s,isLoading:i}){const[o,a]=C.useState([]);if(C.useEffect(()=>{t&&a([])},[t]),!t)return null;const l=u=>{a(d=>d.includes(u)?d.filter(h=>h!==u):[...d,u])};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Assign to Workspace"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:i,children:c.jsx(ot,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsxs("p",{className:"text-sm text-gray-600",children:["Select workspaces for ",r," ",r===1?"person":"people",":"]}),n.length===0?c.jsxs("div",{className:"text-center py-6 text-gray-500",children:[c.jsx(qr,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),c.jsx("p",{className:"text-sm",children:"No workspaces available."}),c.jsx("p",{className:"text-xs",children:"Create a workspace first to use this feature."})]}):c.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:n.map(u=>{const d=o.includes(u.id);return c.jsxs("button",{type:"button",onClick:()=>l(u.id),disabled:i,className:`w-full flex items-center gap-3 p-3 rounded-lg border-2 text-left transition-colors ${d?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:[c.jsx("div",{className:`flex items-center justify-center w-5 h-5 border-2 rounded ${d?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:d&&c.jsx(to,{className:"w-3 h-3 text-white"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:u.title}),c.jsxs("div",{className:"text-xs text-gray-500",children:[u.member_count," members"]})]})]},u.id)})})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:i,children:"Cancel"}),c.jsx("button",{type:"button",onClick:()=>s(o),className:"btn-primary",disabled:i||n.length===0,children:i?"Assigning...":`Assign to ${r} ${r===1?"person":"people"}`})]})]})})}function q_e({isOpen:t,onClose:e,selectedCount:r,companies:n,onSubmit:s,isLoading:i}){const[o,a]=C.useState(null),[l,u]=C.useState("");if(C.useEffect(()=>{t&&(a(null),u(""))},[t]),!t)return null;const d=(n||[]).filter(h=>h.name.toLowerCase().includes(l.toLowerCase()));return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Set Organization"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:i,children:c.jsx(ot,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsxs("p",{className:"text-sm text-gray-600",children:["Set current organization for ",r," ",r===1?"person":"people",":"]}),c.jsx("input",{type:"text",placeholder:"Search organizations...",value:l,onChange:h=>u(h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-primary-500 focus:border-primary-500"}),c.jsxs("button",{type:"button",onClick:()=>a("clear"),disabled:i,className:`w-full flex items-center gap-3 p-3 rounded-lg border-2 text-left transition-colors ${o==="clear"?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:[c.jsx(ot,{className:`w-5 h-5 ${o==="clear"?"text-primary-600":"text-gray-400"}`}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Clear organization"}),c.jsx("div",{className:"text-xs text-gray-500",children:"Remove current organization from selected people"})]}),o==="clear"&&c.jsx(to,{className:"w-5 h-5 text-primary-600"})]}),c.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:d.length===0?c.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:l?"No organizations match your search":"No organizations found"}):d.map(h=>{const f=o===h.id;return c.jsxs("button",{type:"button",onClick:()=>a(h.id),disabled:i,className:`w-full flex items-center gap-3 p-3 rounded-lg border-2 text-left transition-colors ${f?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:[c.jsx(yr,{className:`w-5 h-5 ${f?"text-primary-600":"text-gray-400"}`}),c.jsx("div",{className:"flex-1",children:c.jsx("div",{className:"text-sm font-medium text-gray-900",children:h.name})}),f&&c.jsx(to,{className:"w-5 h-5 text-primary-600"})]},h.id)})})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:i,children:"Cancel"}),c.jsx("button",{type:"button",onClick:()=>s(o==="clear"?null:o),className:"btn-primary",disabled:i||o===null,children:i?"Applying...":`Apply to ${r} ${r===1?"person":"people"}`})]})]})})}function L_e({isOpen:t,onClose:e,selectedCount:r,labels:n,onSubmit:s,isLoading:i}){const[o,a]=C.useState("add"),[l,u]=C.useState([]);if(C.useEffect(()=>{t&&(a("add"),u([]))},[t]),!t)return null;const d=h=>{u(f=>f.includes(h)?f.filter(p=>p!==h):[...f,h])};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Manage Labels"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:i,children:c.jsx(ot,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsxs("p",{className:"text-sm text-gray-600",children:[o==="add"?"Add":"Remove"," labels for ",r," ",r===1?"person":"people",":"]}),c.jsxs("div",{className:"flex rounded-lg border border-gray-200 p-1",children:[c.jsx("button",{type:"button",onClick:()=>{a("add"),u([])},className:`flex-1 px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${o==="add"?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-50"}`,children:"Add Labels"}),c.jsx("button",{type:"button",onClick:()=>{a("remove"),u([])},className:`flex-1 px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${o==="remove"?"bg-red-100 text-red-700":"text-gray-600 hover:bg-gray-50"}`,children:"Remove Labels"})]}),!n||n.length===0?c.jsxs("div",{className:"text-center py-6 text-gray-500",children:[c.jsx(cne,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),c.jsx("p",{className:"text-sm",children:"No labels available."}),c.jsx("p",{className:"text-xs",children:"Create labels first to use this feature."})]}):c.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:n.map(h=>{const f=l.includes(h.id);return c.jsxs("button",{type:"button",onClick:()=>d(h.id),disabled:i,className:`w-full flex items-center gap-3 p-3 rounded-lg border-2 text-left transition-colors ${f?o==="add"?"border-primary-500 bg-primary-50":"border-red-500 bg-red-50":"border-gray-200 hover:border-gray-300"}`,children:[c.jsx("div",{className:`flex items-center justify-center w-5 h-5 border-2 rounded ${f?o==="add"?"bg-primary-600 border-primary-600":"bg-red-600 border-red-600":"border-gray-300"}`,children:f&&c.jsx(to,{className:"w-3 h-3 text-white"})}),c.jsx("span",{className:"text-sm font-medium text-gray-900",children:h.name})]},h.id)})})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:i,children:"Cancel"}),c.jsx("button",{type:"button",onClick:()=>s(o,l),className:o==="add"?"btn-primary":"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 disabled:opacity-50",disabled:i||l.length===0,children:i?o==="add"?"Adding...":"Removing...":`${o==="add"?"Add":"Remove"} ${l.length} ${l.length===1?"label":"labels"}`})]})]})})}function B_e(){var ge,je;const[t,e]=C.useState(!1),[r,n]=C.useState(!1),[s,i]=C.useState([]),[o,a]=C.useState(""),[l,u]=C.useState(""),[d,h]=C.useState("all"),[f,p]=C.useState(""),[m,g]=C.useState("first_name"),[y,v]=C.useState("asc"),[b,w]=C.useState(()=>localStorage.getItem("peopleViewMode")||"card"),[x,S]=C.useState(new Set),[E,N]=C.useState(!1),[_,k]=C.useState(!1),[j,T]=C.useState(!1),[P,O]=C.useState(!1),[D,F]=C.useState(!1),[$,q]=C.useState(!1),[M,z]=C.useState(!1),[Y,H]=C.useState(!1),me=C.useRef(null),G=C.useRef(null),oe=C.useRef(null),Ie=Gn(),{data:ce,isLoading:De,error:Oe}=hu(),{data:pt=[]}=Sb(),wt=Bge(),St=(ge=window.prmConfig)==null?void 0:ge.userId,fr=fne({onSuccess:B=>{N(!1),Ie(`/people/${B.id}`)}}),Tt=async B=>{k(!0);try{await fr.mutateAsync(B)}finally{k(!1)}},{data:Sr}=it({queryKey:["person-labels"],queryFn:async()=>(await Je.getPersonLabels()).data}),nn=(Sr==null?void 0:Sr.map(B=>B.name))||[],zr=Sr||[],{data:lt}=it({queryKey:["companies","all"],queryFn:async()=>(await Je.getCompanies({per_page:100})).data.map(fe=>({id:fe.id,name:ar(fe)})).sort((fe,xe)=>fe.name.localeCompare(xe.name))}),pr=C.useMemo(()=>{if(!ce)return[];const B=ce.map(fe=>fe.birth_year).filter(fe=>fe!=null);return[...new Set(B)].sort((fe,xe)=>xe-fe)},[ce]);C.useEffect(()=>{localStorage.setItem("peopleViewMode",b)},[b]),C.useEffect(()=>{const B=fe=>{G.current&&!G.current.contains(fe.target)&&me.current&&!me.current.contains(fe.target)&&e(!1),oe.current&&!oe.current.contains(fe.target)&&T(!1)};return document.addEventListener("mousedown",B),()=>{document.removeEventListener("mousedown",B)}},[]);const Gt=C.useMemo(()=>{if(!ce)return[];let B=[...ce];if(r&&(B=B.filter(fe=>fe.is_favorite)),s.length>0&&(B=B.filter(fe=>{const xe=fe.labels||[];return s.some(Qe=>xe.includes(Qe))})),o){const fe=parseInt(o,10);B=B.filter(xe=>xe.birth_year===fe)}if(l){const fe=new Date;let xe;switch(l){case"7":xe=new Date(fe.setDate(fe.getDate()-7));break;case"30":xe=new Date(fe.setDate(fe.getDate()-30));break;case"90":xe=new Date(fe.setDate(fe.getDate()-90));break;case"365":xe=new Date(fe.setDate(fe.getDate()-365));break;default:xe=null}xe&&(B=B.filter(Qe=>Qe.modified?new Date(Qe.modified)>=xe:!1))}return d==="mine"?B=B.filter(fe=>fe.author===St):d==="shared"&&(B=B.filter(fe=>fe.author!==St)),f&&(B=B.filter(fe=>{var Qe;return(((Qe=fe.acf)==null?void 0:Qe._assigned_workspaces)||[]).includes(parseInt(f))})),B},[ce,r,s,o,l,d,f,St]),Er=r||s.length>0||o||l||d!=="all"||f,A=B=>{i(fe=>fe.includes(B)?fe.filter(xe=>xe!==B):[...fe,B])},L=()=>{n(!1),i([]),a(""),u(""),h("all"),p("")},V=B=>{S(fe=>{const xe=new Set(fe);return xe.has(B)?xe.delete(B):xe.add(B),xe})},le=()=>{x.size===Gt.length?S(new Set):S(new Set(Gt.map(B=>B.id)))},Z=()=>S(new Set),ee=Gt.length>0&&x.size===Gt.length,be=x.size>0&&x.size<Gt.length;C.useEffect(()=>{S(new Set)},[r,s,o,l,d,f,ce]);const Be=C.useMemo(()=>{if(!Gt)return[];const B=Gt.map(fe=>LF(fe)).filter(Boolean);return[...new Set(B)]},[Gt]),{data:Ue}=it({queryKey:["companies","batch",Be.sort().join(",")],queryFn:async()=>Be.length===0?[]:(await Je.getCompanies({per_page:100,include:Be.join(",")})).data,enabled:Be.length>0}),Ot=C.useMemo(()=>{const B={};return Ue&&Ue.forEach(fe=>{B[fe.id]=ar(fe)}),B},[Ue]),Se=C.useMemo(()=>{const B={};return Gt.forEach(fe=>{const xe=LF(fe);xe&&Ot[xe]&&(B[fe.id]=Ot[xe])}),B},[Gt,Ot]),re=B=>{var xe;return(((xe=B.acf)==null?void 0:xe._assigned_workspaces)||[]).map(Qe=>{const bs=typeof Qe=="string"?parseInt(Qe,10):Qe,Pi=pt.find(As=>As.id===bs);return Pi==null?void 0:Pi.title}).filter(Boolean).join(", ")},ue=C.useMemo(()=>Gt?[...Gt].sort((B,fe)=>{var Pi,As,Wl,Ii,yn,Ri,Au,lo,Du,co;let xe,Qe;if(m==="modified"){xe=B.modified?new Date(B.modified).getTime():0,Qe=fe.modified?new Date(fe.modified).getTime():0;const sn=xe-Qe;return y==="asc"?sn:-sn}if(m==="organization"){if(xe=(Se[B.id]||"").toLowerCase(),Qe=(Se[fe.id]||"").toLowerCase(),!xe&&Qe)return y==="asc"?1:-1;if(xe&&!Qe)return y==="asc"?-1:1;if(!xe&&!Qe)return 0;const sn=xe.localeCompare(Qe);return y==="asc"?sn:-sn}if(m==="workspace"){if(xe=re(B).toLowerCase(),Qe=re(fe).toLowerCase(),!xe&&Qe)return y==="asc"?1:-1;if(xe&&!Qe)return y==="asc"?-1:1;if(!xe&&!Qe)return 0;const sn=xe.localeCompare(Qe);return y==="asc"?sn:-sn}if(m==="labels"){if(xe=(((Pi=B.labels)==null?void 0:Pi[0])||"").toLowerCase(),Qe=(((As=fe.labels)==null?void 0:As[0])||"").toLowerCase(),!xe&&Qe)return y==="asc"?1:-1;if(xe&&!Qe)return y==="asc"?-1:1;if(!xe&&!Qe)return 0;const sn=xe.localeCompare(Qe);return y==="asc"?sn:-sn}if(m==="first_name"?(xe=(((Wl=B.acf)==null?void 0:Wl.first_name)||B.first_name||"").toLowerCase(),Qe=(((Ii=fe.acf)==null?void 0:Ii.first_name)||fe.first_name||"").toLowerCase()):(xe=(((yn=B.acf)==null?void 0:yn.last_name)||B.last_name||"").toLowerCase(),Qe=(((Ri=fe.acf)==null?void 0:Ri.last_name)||fe.last_name||"").toLowerCase()),xe===Qe){const sn=m==="first_name"?(((Au=B.acf)==null?void 0:Au.last_name)||B.last_name||"").toLowerCase():(((lo=B.acf)==null?void 0:lo.first_name)||B.first_name||"").toLowerCase(),$u=m==="first_name"?(((Du=fe.acf)==null?void 0:Du.last_name)||fe.last_name||"").toLowerCase():(((co=fe.acf)==null?void 0:co.first_name)||fe.first_name||"").toLowerCase(),Fu=sn.localeCompare($u);return y==="asc"?Fu:-Fu}const bs=xe.localeCompare(Qe);return y==="asc"?bs:-bs}):[],[Gt,m,y,Se,pt]);return c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsxs("div",{className:"flex items-center gap-2 border border-gray-200 rounded-lg p-1",children:[c.jsxs("select",{value:m,onChange:B=>g(B.target.value),className:"text-sm border-0 bg-transparent focus:ring-0 focus:outline-none cursor-pointer",children:[c.jsx("option",{value:"first_name",children:"First name"}),c.jsx("option",{value:"last_name",children:"Last name"}),c.jsx("option",{value:"modified",children:"Last modified"}),c.jsx("option",{value:"organization",children:"Organization"}),c.jsx("option",{value:"workspace",children:"Workspace"}),c.jsx("option",{value:"labels",children:"Labels"})]}),c.jsx("div",{className:"h-4 w-px bg-gray-300"}),c.jsx("button",{onClick:()=>v(y==="asc"?"desc":"asc"),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:`Sort ${y==="asc"?"descending":"ascending"}`,children:y==="asc"?c.jsx(Gre,{className:"w-4 h-4 text-gray-600"}):c.jsx(Kre,{className:"w-4 h-4 text-gray-600"})})]}),c.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg p-1",children:[c.jsx("button",{onClick:()=>w("card"),className:`p-1.5 rounded transition-colors ${b==="card"?"bg-gray-100":"hover:bg-gray-50"}`,title:"Card view",children:c.jsx(wge,{className:`w-4 h-4 ${b==="card"?"text-primary-600":"text-gray-600"}`})}),c.jsx("button",{onClick:()=>w("list"),className:`p-1.5 rounded transition-colors ${b==="list"?"bg-gray-100":"hover:bg-gray-50"}`,title:"List view",children:c.jsx(nne,{className:`w-4 h-4 ${b==="list"?"text-primary-600":"text-gray-600"}`})})]}),c.jsxs("div",{className:"relative",ref:me,children:[c.jsxs("button",{onClick:()=>e(!t),className:`btn-secondary ${Er?"bg-primary-50 text-primary-700 border-primary-200":""}`,children:[c.jsx(Kp,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Filter"}),Er&&c.jsx("span",{className:"ml-2 px-1.5 py-0.5 bg-primary-600 text-white text-xs rounded-full",children:s.length+(r?1:0)+(o?1:0)+(l?1:0)})]}),t&&c.jsx("div",{ref:G,className:"absolute top-full left-0 mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsx("div",{children:c.jsxs("label",{className:"flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:r,onChange:B=>n(B.target.checked),className:"sr-only"}),c.jsx("div",{className:`flex items-center justify-center w-5 h-5 border-2 rounded mr-3 ${r?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:r&&c.jsx(to,{className:"w-3 h-3 text-white"})}),c.jsxs("div",{className:"flex items-center",children:[c.jsx(Hc,{className:"w-4 h-4 mr-2 text-yellow-400 fill-current"}),c.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Favorites only"})]})]})}),nn.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Labels"}),c.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:nn.map(B=>c.jsxs("label",{className:"flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded",children:[c.jsx("input",{type:"checkbox",checked:s.includes(B),onChange:()=>A(B),className:"sr-only"}),c.jsx("div",{className:`flex items-center justify-center w-5 h-5 border-2 rounded mr-3 ${s.includes(B)?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:s.includes(B)&&c.jsx(to,{className:"w-3 h-3 text-white"})}),c.jsx("span",{className:"text-sm text-gray-700",children:B})]},B))})]}),pr.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Birth year"}),c.jsxs("select",{value:o,onChange:B=>a(B.target.value),className:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[c.jsx("option",{value:"",children:"All years"}),pr.map(B=>c.jsx("option",{value:B,children:B},B))]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Last modified"}),c.jsxs("select",{value:l,onChange:B=>u(B.target.value),className:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[c.jsx("option",{value:"",children:"Any time"}),c.jsx("option",{value:"7",children:"Last 7 days"}),c.jsx("option",{value:"30",children:"Last 30 days"}),c.jsx("option",{value:"90",children:"Last 90 days"}),c.jsx("option",{value:"365",children:"Last year"})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Ownership"}),c.jsx("div",{className:"space-y-1",children:[{value:"all",label:"All Contacts"},{value:"mine",label:"My Contacts"},{value:"shared",label:"Shared with Me"}].map(B=>c.jsxs("label",{className:"flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded",children:[c.jsx("input",{type:"radio",name:"ownership",value:B.value,checked:d===B.value,onChange:fe=>h(fe.target.value),className:"sr-only"}),c.jsx("div",{className:`flex items-center justify-center w-4 h-4 border-2 rounded-full mr-3 ${d===B.value?"border-primary-600":"border-gray-300"}`,children:d===B.value&&c.jsx("div",{className:"w-2 h-2 bg-primary-600 rounded-full"})}),c.jsx("span",{className:"text-sm text-gray-700",children:B.label})]},B.value))})]}),pt.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Workspace"}),c.jsxs("select",{value:f,onChange:B=>p(B.target.value),className:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[c.jsx("option",{value:"",children:"All Workspaces"}),pt.map(B=>c.jsx("option",{value:B.id,children:B.title},B.id))]})]}),Er&&c.jsx("button",{onClick:L,className:"w-full text-sm text-primary-600 hover:text-primary-700 font-medium pt-2 border-t border-gray-200",children:"Clear all filters"})]})})]}),Er&&c.jsxs("div",{className:"flex flex-wrap gap-2",children:[r&&c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-800 rounded-full text-xs",children:[c.jsx(Hc,{className:"w-3 h-3"}),"Favorites",c.jsx("button",{onClick:()=>n(!1),className:"hover:text-primary-600",children:c.jsx(ot,{className:"w-3 h-3"})})]}),s.map(B=>c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:[B,c.jsx("button",{onClick:()=>A(B),className:"hover:text-gray-600",children:c.jsx(ot,{className:"w-3 h-3"})})]},B)),o&&c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:["Born ",o,c.jsx("button",{onClick:()=>a(""),className:"hover:text-gray-600",children:c.jsx(ot,{className:"w-3 h-3"})})]}),l&&c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:["Modified: ",l==="7"?"Last 7 days":l==="30"?"Last 30 days":l==="90"?"Last 90 days":"Last year",c.jsx("button",{onClick:()=>u(""),className:"hover:text-gray-600",children:c.jsx(ot,{className:"w-3 h-3"})})]}),d!=="all"&&c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-800 rounded-full text-xs",children:[d==="mine"?"My Contacts":"Shared with Me",c.jsx("button",{onClick:()=>h("all"),className:"hover:text-primary-600",children:c.jsx(ot,{className:"w-3 h-3"})})]}),f&&c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:[((je=pt.find(B=>B.id===parseInt(f)))==null?void 0:je.title)||"Workspace",c.jsx("button",{onClick:()=>p(""),className:"hover:text-blue-600",children:c.jsx(ot,{className:"w-3 h-3"})})]})]}),c.jsxs("button",{onClick:()=>N(!0),className:"btn-primary",children:[c.jsx(dr,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Add person"})]})]})}),De&&c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),Oe&&c.jsx("div",{className:"card p-6 text-center",children:c.jsx("p",{className:"text-red-600",children:"Failed to load people."})}),!De&&!Oe&&(ce==null?void 0:ce.length)===0&&c.jsxs("div",{className:"card p-12 text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(dr,{className:"w-6 h-6 text-gray-400"})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No people found"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by adding your first person."}),c.jsxs("button",{onClick:()=>N(!0),className:"btn-primary",children:[c.jsx(dr,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Add person"})]})]}),!De&&!Oe&&(ue==null?void 0:ue.length)>0&&b==="card"&&c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:ue.map(B=>c.jsx(M_e,{person:B,companyName:Se[B.id],isDeceased:B.is_deceased},B.id))}),b==="list"&&x.size>0&&c.jsxs("div",{className:"sticky top-0 z-20 flex items-center justify-between bg-primary-50 border border-primary-200 rounded-lg px-4 py-2 shadow-sm",children:[c.jsxs("span",{className:"text-sm text-primary-800 font-medium",children:[x.size," ",x.size===1?"person":"people"," selected"]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"relative",ref:oe,children:[c.jsxs("button",{onClick:()=>T(!j),className:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-primary-700 bg-white border border-primary-300 rounded-md hover:bg-primary-50",children:["Actions",c.jsx(ah,{className:`w-4 h-4 transition-transform ${j?"rotate-180":""}`})]}),j&&c.jsx("div",{className:"absolute right-0 mt-1 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:c.jsxs("div",{className:"py-1",children:[c.jsxs("button",{onClick:()=>{T(!1),O(!0)},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[c.jsx($m,{className:"w-4 h-4"}),"Change visibility..."]}),c.jsxs("button",{onClick:()=>{T(!1),F(!0)},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[c.jsx(qr,{className:"w-4 h-4"}),"Assign to workspace..."]}),c.jsxs("button",{onClick:()=>{T(!1),q(!0)},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[c.jsx(yr,{className:"w-4 h-4"}),"Set organization..."]}),c.jsxs("button",{onClick:()=>{T(!1),z(!0)},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[c.jsx(cne,{className:"w-4 h-4"}),"Manage labels..."]})]})})]}),c.jsx("button",{onClick:Z,className:"text-sm text-primary-600 hover:text-primary-800 font-medium",children:"Clear selection"})]})]}),!De&&!Oe&&(ue==null?void 0:ue.length)>0&&b==="list"&&c.jsx(D_e,{people:ue,companyMap:Se,workspaces:pt,selectedIds:x,onToggleSelection:V,onToggleSelectAll:le,isAllSelected:ee,isSomeSelected:be,sortField:m,sortOrder:y,onSort:B=>{B===m?v(y==="asc"?"desc":"asc"):(g(B),v("asc"))}}),!De&&!Oe&&(ce==null?void 0:ce.length)>0&&(ue==null?void 0:ue.length)===0&&c.jsxs("div",{className:"card p-12 text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(Kp,{className:"w-6 h-6 text-gray-400"})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No people match your filters"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Try adjusting your filters to see more results."}),c.jsx("button",{onClick:L,className:"btn-secondary",children:"Clear filters"})]}),c.jsx(wA,{isOpen:E,onClose:()=>N(!1),onSubmit:Tt,isLoading:_}),c.jsx($_e,{isOpen:P,onClose:()=>O(!1),selectedCount:x.size,onSubmit:async B=>{H(!0);try{await wt.mutateAsync({ids:Array.from(x),updates:{visibility:B}}),Z(),O(!1)}finally{H(!1)}},isLoading:Y}),c.jsx(F_e,{isOpen:D,onClose:()=>F(!1),selectedCount:x.size,workspaces:pt,onSubmit:async B=>{H(!0);try{await wt.mutateAsync({ids:Array.from(x),updates:{assigned_workspaces:B}}),Z(),F(!1)}finally{H(!1)}},isLoading:Y}),c.jsx(q_e,{isOpen:$,onClose:()=>q(!1),selectedCount:x.size,companies:lt||[],onSubmit:async B=>{H(!0);try{await wt.mutateAsync({ids:Array.from(x),updates:{organization_id:B}}),Z(),q(!1)}finally{H(!1)}},isLoading:Y}),c.jsx(L_e,{isOpen:M,onClose:()=>z(!1),selectedCount:x.size,labels:zr,onSubmit:async(B,fe)=>{H(!0);try{const xe=B==="add"?{labels_add:fe}:{labels_remove:fe};await wt.mutateAsync({ids:Array.from(x),updates:xe}),Z(),z(!1)}finally{H(!1)}},isLoading:Y})]})}const z_e="#0285FF",W_e=C.forwardRef(function({title:e="Bluesky",color:r="currentColor",size:n=24,...s},i){return r==="default"&&(r=z_e),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:i,...s,children:[c.jsx("title",{children:e}),c.jsx("path",{d:"M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479.815 2.736 3.713 3.66 6.383 3.364.136-.02.275-.039.415-.056-.138.022-.276.04-.415.056-3.912.58-7.387 2.005-2.83 7.078 5.013 5.19 6.87-1.113 7.823-4.308.953 3.195 2.05 9.271 7.733 4.308 4.267-4.308 1.172-6.498-2.74-7.078a8.741 8.741 0 0 1-.415-.056c.14.017.279.036.415.056 2.67.297 5.568-.628 6.383-3.364.246-.828.624-5.79.624-6.478 0-.69-.139-1.861-.902-2.206-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8Z"})]})}),V_e="#0866FF",U_e=C.forwardRef(function({title:e="Facebook",color:r="currentColor",size:n=24,...s},i){return r==="default"&&(r=V_e),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:i,...s,children:[c.jsx("title",{children:e}),c.jsx("path",{d:"M9.101 23.691v-7.98H6.627v-3.667h2.474v-1.58c0-4.085 1.848-5.978 5.858-5.978.401 0 .955.042 1.468.103a8.68 8.68 0 0 1 1.141.195v3.325a8.623 8.623 0 0 0-.653-.036 26.805 26.805 0 0 0-.733-.009c-.707 0-1.259.096-1.675.309a1.686 1.686 0 0 0-.679.622c-.258.42-.374.995-.374 1.752v1.297h3.919l-.386 2.103-.287 1.564h-3.246v8.245C19.396 23.238 24 18.179 24 12.044c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.628 3.874 10.35 9.101 11.647Z"})]})}),H_e="#FF0069",K_e=C.forwardRef(function({title:e="Instagram",color:r="currentColor",size:n=24,...s},i){return r==="default"&&(r=H_e),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:i,...s,children:[c.jsx("title",{children:e}),c.jsx("path",{d:"M7.0301.084c-1.2768.0602-2.1487.264-2.911.5634-.7888.3075-1.4575.72-2.1228 1.3877-.6652.6677-1.075 1.3368-1.3802 2.127-.2954.7638-.4956 1.6365-.552 2.914-.0564 1.2775-.0689 1.6882-.0626 4.947.0062 3.2586.0206 3.6671.0825 4.9473.061 1.2765.264 2.1482.5635 2.9107.308.7889.72 1.4573 1.388 2.1228.6679.6655 1.3365 1.0743 2.1285 1.38.7632.295 1.6361.4961 2.9134.552 1.2773.056 1.6884.069 4.9462.0627 3.2578-.0062 3.668-.0207 4.9478-.0814 1.28-.0607 2.147-.2652 2.9098-.5633.7889-.3086 1.4578-.72 2.1228-1.3881.665-.6682 1.0745-1.3378 1.3795-2.1284.2957-.7632.4966-1.636.552-2.9124.056-1.2809.0692-1.6898.063-4.948-.0063-3.2583-.021-3.6668-.0817-4.9465-.0607-1.2797-.264-2.1487-.5633-2.9117-.3084-.7889-.72-1.4568-1.3876-2.1228C21.2982 1.33 20.628.9208 19.8378.6165 19.074.321 18.2017.1197 16.9244.0645 15.6471.0093 15.236-.005 11.977.0014 8.718.0076 8.31.0215 7.0301.0839m.1402 21.6932c-1.17-.0509-1.8053-.2453-2.2287-.408-.5606-.216-.96-.4771-1.3819-.895-.422-.4178-.6811-.8186-.9-1.378-.1644-.4234-.3624-1.058-.4171-2.228-.0595-1.2645-.072-1.6442-.079-4.848-.007-3.2037.0053-3.583.0607-4.848.05-1.169.2456-1.805.408-2.2282.216-.5613.4762-.96.895-1.3816.4188-.4217.8184-.6814 1.3783-.9003.423-.1651 1.0575-.3614 2.227-.4171 1.2655-.06 1.6447-.072 4.848-.079 3.2033-.007 3.5835.005 4.8495.0608 1.169.0508 1.8053.2445 2.228.408.5608.216.96.4754 1.3816.895.4217.4194.6816.8176.9005 1.3787.1653.4217.3617 1.056.4169 2.2263.0602 1.2655.0739 1.645.0796 4.848.0058 3.203-.0055 3.5834-.061 4.848-.051 1.17-.245 1.8055-.408 2.2294-.216.5604-.4763.96-.8954 1.3814-.419.4215-.8181.6811-1.3783.9-.4224.1649-1.0577.3617-2.2262.4174-1.2656.0595-1.6448.072-4.8493.079-3.2045.007-3.5825-.006-4.848-.0608M16.953 5.5864A1.44 1.44 0 1 0 18.39 4.144a1.44 1.44 0 0 0-1.437 1.4424M5.8385 12.012c.0067 3.4032 2.7706 6.1557 6.173 6.1493 3.4026-.0065 6.157-2.7701 6.1506-6.1733-.0065-3.4032-2.771-6.1565-6.174-6.1498-3.403.0067-6.156 2.771-6.1496 6.1738M8 12.0077a4 4 0 1 1 4.008 3.9921A3.9996 3.9996 0 0 1 8 12.0077"})]})}),G_e="#4A154B",Y_e=C.forwardRef(function({title:e="Slack",color:r="currentColor",size:n=24,...s},i){return r==="default"&&(r=G_e),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:i,...s,children:[c.jsx("title",{children:e}),c.jsx("path",{d:"M5.042 15.165a2.528 2.528 0 0 1-2.52 2.523A2.528 2.528 0 0 1 0 15.165a2.527 2.527 0 0 1 2.522-2.52h2.52v2.52zM6.313 15.165a2.527 2.527 0 0 1 2.521-2.52 2.527 2.527 0 0 1 2.521 2.52v6.313A2.528 2.528 0 0 1 8.834 24a2.528 2.528 0 0 1-2.521-2.522v-6.313zM8.834 5.042a2.528 2.528 0 0 1-2.521-2.52A2.528 2.528 0 0 1 8.834 0a2.528 2.528 0 0 1 2.521 2.522v2.52H8.834zM8.834 6.313a2.528 2.528 0 0 1 2.521 2.521 2.528 2.528 0 0 1-2.521 2.521H2.522A2.528 2.528 0 0 1 0 8.834a2.528 2.528 0 0 1 2.522-2.521h6.312zM18.956 8.834a2.528 2.528 0 0 1 2.522-2.521A2.528 2.528 0 0 1 24 8.834a2.528 2.528 0 0 1-2.522 2.521h-2.522V8.834zM17.688 8.834a2.528 2.528 0 0 1-2.523 2.521 2.527 2.527 0 0 1-2.52-2.521V2.522A2.527 2.527 0 0 1 15.165 0a2.528 2.528 0 0 1 2.523 2.522v6.312zM15.165 18.956a2.528 2.528 0 0 1 2.523 2.522A2.528 2.528 0 0 1 15.165 24a2.527 2.527 0 0 1-2.52-2.522v-2.522h2.52zM15.165 17.688a2.527 2.527 0 0 1-2.52-2.523 2.526 2.526 0 0 1 2.52-2.52h6.313A2.527 2.527 0 0 1 24 15.165a2.528 2.528 0 0 1-2.522 2.523h-6.313z"})]})}),Q_e="#000000",X_e=C.forwardRef(function({title:e="Threads",color:r="currentColor",size:n=24,...s},i){return r==="default"&&(r=Q_e),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:i,...s,children:[c.jsx("title",{children:e}),c.jsx("path",{d:"M12.186 24h-.007c-3.581-.024-6.334-1.205-8.184-3.509C2.35 18.44 1.5 15.586 1.472 12.01v-.017c.03-3.579.879-6.43 2.525-8.482C5.845 1.205 8.6.024 12.18 0h.014c2.746.02 5.043.725 6.826 2.098 1.677 1.29 2.858 3.13 3.509 5.467l-2.04.569c-1.104-3.96-3.898-5.984-8.304-6.015-2.91.022-5.11.936-6.54 2.717C4.307 6.504 3.616 8.914 3.589 12c.027 3.086.718 5.496 2.057 7.164 1.43 1.783 3.631 2.698 6.54 2.717 2.623-.02 4.358-.631 5.8-2.045 1.647-1.613 1.618-3.593 1.09-4.798-.31-.71-.873-1.3-1.634-1.75-.192 1.352-.622 2.446-1.284 3.272-.886 1.102-2.14 1.704-3.73 1.79-1.202.065-2.361-.218-3.259-.801-1.063-.689-1.685-1.74-1.752-2.964-.065-1.19.408-2.285 1.33-3.082.88-.76 2.119-1.207 3.583-1.291a13.853 13.853 0 0 1 3.02.142c-.126-.742-.375-1.332-.75-1.757-.513-.586-1.308-.883-2.359-.89h-.029c-.844 0-1.992.232-2.721 1.32L7.734 7.847c.98-1.454 2.568-2.256 4.478-2.256h.044c3.194.02 5.097 1.975 5.287 5.388.108.046.216.094.321.142 1.49.7 2.58 1.761 3.154 3.07.797 1.82.871 4.79-1.548 7.158-1.85 1.81-4.094 2.628-7.277 2.65Zm1.003-11.69c-.242 0-.487.007-.739.021-1.836.103-2.98.946-2.916 2.143.067 1.256 1.452 1.839 2.784 1.767 1.224-.065 2.818-.543 3.086-3.71a10.5 10.5 0 0 0-2.215-.221z"})]})}),J_e="#25D366",Z_e=C.forwardRef(function({title:e="WhatsApp",color:r="currentColor",size:n=24,...s},i){return r==="default"&&(r=J_e),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:i,...s,children:[c.jsx("title",{children:e}),c.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})]})}),eNe="#000000",tNe=C.forwardRef(function({title:e="X",color:r="currentColor",size:n=24,...s},i){return r==="default"&&(r=eNe),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:i,...s,children:[c.jsx("title",{children:e}),c.jsx("path",{d:"M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"})]})}),rNe={Phone:dA,Mail:mb,Users:qr,Coffee:Jre,Utensils:une,FileText:pb,Circle:KI,MessageCircle:gb};function nNe({timeline:t,onEdit:e,onDelete:r,onToggleTodo:n,personId:s,allPeople:i=[]}){const o=C.useMemo(()=>v0e(t||[]),[t]),a=f=>i.find(p=>p.id.toString()===f.toString()),l=f=>{if(f.type==="todo")return f.is_completed?HI:Sl;if(f.type==="activity"&&f.activity_type){const p=x0e(f.activity_type);return rNe[p]||KI}return f.type==="note"?pb:KI},u=f=>{var S;const p=l(f),m=f.type==="todo",g=f.type==="activity",y=f.type==="note";let v=f.activity_date||f.created;f.activity_date&&f.activity_time&&(v=`${f.activity_date}T${f.activity_time}`);const b=b0e(v),w=S0e(f),x=m&&Lm(f);return c.jsxs("div",{className:`relative ${m?"pl-0":"pl-8"} pb-6 group`,children:[!m&&c.jsx("div",{className:"absolute left-0 top-1",children:c.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${g?"bg-blue-500 border-blue-500":"bg-gray-400 border-gray-400"}`})}),c.jsx("div",{className:`${w} ${y&&f.visibility==="shared"?"border-l-2 border-blue-200 pl-2":""}`,children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[!m&&c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx(p,{className:`w-4 h-4 flex-shrink-0 ${g?"text-blue-600":"text-gray-500"}`}),g&&f.activity_type&&c.jsx("span",{className:"text-xs font-medium text-gray-600",children:w0e(f.activity_type)}),c.jsx("span",{className:"text-xs text-gray-400",children:""}),c.jsx("span",{className:"text-xs text-gray-500",children:b}),y&&c.jsx("span",{className:"ml-1",title:f.visibility==="shared"?"Shared note":"Private note - only you can see this",children:f.visibility==="shared"?c.jsx(ap,{className:"w-3 h-3 text-blue-500"}):c.jsx($m,{className:"w-3 h-3 text-gray-400"})})]}),c.jsxs("div",{className:"flex items-start gap-2",children:[m&&c.jsx("button",{onClick:()=>n&&n(f),className:"mt-0.5 flex-shrink-0",title:f.is_completed?"Mark as incomplete":"Mark as complete",children:f.is_completed?c.jsx(HI,{className:`w-5 h-5 ${x?"text-red-600":"text-primary-600"}`}):c.jsx(Sl,{className:`w-5 h-5 ${x?"text-red-600":"text-gray-400"}`})}),(y||g)&&((S=f.content)!=null&&S.includes("<"))?c.jsx("div",{className:`text-sm flex-1 timeline-content ${f.is_completed?"line-through opacity-60":""}`,dangerouslySetInnerHTML:{__html:f.content}}):c.jsx("p",{className:`text-sm flex-1 ${f.is_completed?"line-through opacity-60":""}`,children:f.content})]}),g&&f.participants&&f.participants.length>0&&c.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[c.jsx("span",{className:"text-xs text-gray-500",children:"With:"}),f.participants.map(E=>{const N=a(E);return N?c.jsxs(ze,{to:`/people/${E}`,className:"inline-flex items-center gap-1 text-xs text-primary-600 hover:text-primary-700 hover:underline",children:[c.jsx(uA,{className:"w-3 h-3"}),N.name]},E):null})]}),m&&f.due_date&&c.jsx("div",{className:"mt-2",children:c.jsxs("span",{className:`text-xs ${x?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",Dn(new Date(f.due_date),"MMM d, yyyy"),x&&" (overdue)"]})})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[e&&c.jsx("button",{onClick:()=>e(f),className:"p-1 hover:bg-gray-100 rounded",title:"Edit",children:c.jsx(_a,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),r&&c.jsx("button",{onClick:()=>r(f),className:"p-1 hover:bg-red-50 rounded",title:"Delete",children:c.jsx(Nn,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})})]},f.id)},d=(f,p)=>!p||p.length===0?null:c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3 uppercase tracking-wide",children:f}),c.jsx("div",{className:"relative pl-4 border-l-2 border-gray-200",children:p.map(u)})]});return o.today.length>0||o.yesterday.length>0||o.thisWeek.length>0||o.older.length>0?c.jsxs("div",{className:"space-y-6",children:[d("Today",o.today),d("Yesterday",o.yesterday),d("This week",o.thisWeek),d("Older",o.older)]}):c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-sm text-gray-500",children:"No timeline items yet."})})}function sNe(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}function iNe(t){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Array.from(t)}function oNe(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function j0(t){return sNe(t)||iNe(t)||oNe()}function ei(){return ei=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ei.apply(this,arguments)}function aNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lNe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function cNe(t,e,r){return e&&lNe(t.prototype,e),t}function nt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RR(t,e){return RR=Object.setPrototypeOf||function(n,s){return n.__proto__=s,n},RR(t,e)}function uNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&RR(t,e)}function Id(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Id=function(r){return typeof r}:Id=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Id(t)}function Gy(t){return typeof Symbol=="function"&&Id(Symbol.iterator)==="symbol"?Gy=function(r){return Id(r)}:Gy=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":Id(r)},Gy(t)}function dNe(t,e){return e&&(Gy(e)==="object"||typeof e=="function")?e:nt(t)}function T0(t){return T0=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},T0(t)}function tt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var hNe=function(t,e,r,n,s,i,o,a){if(!t){var l;if(e===void 0)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,n,s,i,o,a],d=0;l=new Error(e.replace(/%s/g,function(){return u[d++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}},fNe=hNe;const gh=Ch(fNe);function pNe(t){if(Array.isArray(t))return t}function mNe(t,e){var r=[],n=!0,s=!1,i=void 0;try{for(var o=t[Symbol.iterator](),a;!(n=(a=o.next()).done)&&(r.push(a.value),!(e&&r.length===e));n=!0);}catch(l){s=!0,i=l}finally{try{!n&&o.return!=null&&o.return()}finally{if(s)throw i}}return r}function gNe(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function O0(t,e){return pNe(t)||mNe(t,e)||gNe()}function yNe(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function vNe(t,e){if(t==null)return{};var r=yNe(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function bNe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var xNe=bNe;const om=Ch(xNe);function wNe(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}var SNe=wNe;function ENe(t){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Array.from(t)}var _Ne=ENe;function NNe(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var CNe=NNe,kNe=SNe,jNe=_Ne,TNe=CNe;function ONe(t){return kNe(t)||jNe(t)||TNe()}var PNe=ONe;const Po=Ch(PNe);var Fh=function(e){return e===Object(e)?Object.keys(e):[]},Ioe=function(e){return e===Object(e)?Object.values(e):[]};function Roe(t,e){var r=Object.assign({},t);return Yy(t)&&Yy(e)&&Fh(e).forEach(function(n){Yy(e[n])?n in t?r[n]=Roe(t[n],e[n]):Object.assign(r,om({},n,e[n])):Object.assign(r,om({},n,e[n]))}),r}var MR=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return n.reduce(function(i,o){return Roe(i,o)},e)},INe=function(e,r){var n=Object.assign({},e);if(r)for(var s=0;s<r.length;s++)delete n[r[s]];return n},Yy=function(e){return e===Object(e)&&!(e instanceof Date)&&!Array.isArray(e)},RNe=function(e){return(e||[]).filter(Boolean)},hD=function(e){return e[0]==="&"},MNe=function(e){return!hD(e)},BF=function(e){return e.replace(/-(\w)/g,function(r,n){return n.toUpperCase()})},ANe=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=Fh(e),s={},i=0,o=n.length;i<o;i+=1){var a=n[i],l=Object.prototype.toString.call(e[a])!=="[object Object]"||a[0]===":"||a[0]==="@"||r.indexOf(a)>=0;l&&(s[a]=e[a])}return s},Moe=function(e,r){for(var n=r.map(BF),s=Fh(e),i={},o=0,a=s.length;o<a;o+=1){var l=s[o];(r.indexOf(l)>=0||n.indexOf(BF(l))>=0)&&(i[l]=e[l])}return i},DNe=function t(e,r){for(var n=MR.apply(void 0,[{},INe(e,r)].concat(Po(Ioe(Moe(e,r))))),s=Fh(n).filter(hD),i=0,o=s.length;i<o;i+=1){var a=s[i],l=t(n[a],r);r.indexOf(a)>=0?(delete n[a],n=MR({},n,l)):n[a]=l}return n};function zF(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function WF(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zF(Object(r),!0).forEach(function(n){om(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zF(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var $Ne=["animationName"],Aoe=function(e){var r=e.style,n=e.className;return WF(WF({},r?{style:ANe(r,$Ne)}:{}),n?{className:n}:{})},Doe=C.createContext(Aoe);Doe.Provider;var $oe=function(e){if(e){if(typeof e=="string")return[e];if(!Array.isArray(e)){var r=e;return Fh(e).reduce(function(n,s){return n.concat(r[s]?[s]:[])},[])}}else return[];return e},FNe={},qNe=function(e){return function(r,n){var s=n||FNe;e.memoize=e.memoize||new WeakMap;var i;e.memoize.has(s)?i=e.memoize.get(s):(i={},e.memoize.set(s,i));var o=$oe(r).join(" ");return o in i?i[o]:i[o]=e(r||[],n)}};function VF(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Uu(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VF(Object(r),!0).forEach(function(n){om(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VF(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var LNe=function(e){var r=e&&Fh(e)[0];return r&&r.split("__")[0].split("--")[0]},BNe=function(e,r,n){if(e){var s=e.split(" ")[0],i=[].concat(Po(r.length===0?n.map(function(o){return"".concat(s,"--").concat(o.substring(1))}):[]),Po(r.map(function(o){return"".concat(s,"__").concat(o)})));return r.length===0?[e].concat(Po(i)):i}};function Foe(t){var e=t.style,r=t.className,n=t.classNames,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Aoe,i=r||LNe(n)||(e==null?void 0:e.className),o=typeof e=="function"?e:qNe(function(h,f){var p=$oe(h);gh(Array.isArray(p),"First parameter must be a string, an array of strings, a plain object with boolean values, or a falsy value."),gh(!f||Yy(f),"Optional second parameter must be a plain object.");var m=p.filter(hD),g=p.filter(MNe),y=g.length>0?function(w){return Ioe(Moe(w,g))}:function(w){return[w]},v=function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return y(DNe(x,m))},b=BNe(i,g,m);return Foe(Uu(Uu(Uu({},(e||f)&&{style:MR.apply(void 0,[{}].concat(Po(v(f)),Po(v(e))))}),b&&{className:b.join(" ")}),n&&{classNames:n}),s)}),a=Uu({},typeof e=="function"?e:{style:e}),l=Po(new Set([].concat(Po(a.className?a.className.split(" "):[]),Po(i?i.split(" "):[])))),u=n?RNe(l.map(function(h){return n[h]})):l,d=s(Uu(Uu({},a),u.length>0?{className:u.join(" ")}:{}));return Object.assign(o,d),o}function UF(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Af(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?UF(Object(r),!0).forEach(function(n){om(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UF(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var zNe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.reduce(function(s,i){return Af(Af(Af({},s),typeof i=="function"?i:{}),{},{style:Af(Af({},s.style),typeof i=="function"?i.style:i)})},{})},fD=function(e,r,n){var s=r.style,i=r.className,o=r.classNames,a=C.useContext(Doe),l=C.useMemo(function(){return Foe({style:s,className:i,classNames:o},a)},[s,i,o,a]);return l(n,e)},qoe={exports:{}},WNe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",VNe=WNe,UNe=VNe;function Loe(){}function Boe(){}Boe.resetWarningCache=Loe;var HNe=function(){function t(n,s,i,o,a,l){if(l!==UNe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Boe,resetWarningCache:Loe};return r.PropTypes=r,r};qoe.exports=HNe();var KNe=qoe.exports;const ve=Ch(KNe);var Qy=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},Vi={id:"__id__",display:"__display__"},HF=function(e,r){gh(r==="id"||r==="display",'Second arg must be either "id" or "display", got: "'.concat(r,'"'));var n=e.indexOf(Vi.display),s=e.indexOf(Vi.id);return n<0&&(n=null),s<0&&(s=null),gh(n!==null||s!==null,"The markup '".concat(e,"' does not contain either of the placeholders '__id__' or '__display__'")),n!==null&&s!==null?r==="id"&&s<=n||r==="display"&&n<=s?0:1:0},GNe=function(e){var r=/^\/(.+)\/(\w+)?$/;return new RegExp(e.map(function(n){var s=r.exec(n.toString()),i=O0(s,3),o=i[1],a=i[2];return gh(!a,"RegExp flags are not supported. Change /".concat(o,"/").concat(a," into /").concat(o,"/")),"(".concat(o,")")}).join("|"),"g")},zoe=function(e){var r=0;return e.indexOf("__id__")>=0&&r++,e.indexOf("__display__")>=0&&r++,r},YNe=function(){},Um=function(e,r,n){for(var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:YNe,i=GNe(r.map(function(S){return S.regex})),o=2,a=r.map(function(S){var E=S.markup,N=o;return o+=zoe(E)+1,N}),l,u=0,d=0;(l=i.exec(e))!==null;){var h=a.find(function(S){return!!l[S]}),f=a.indexOf(h),p=r[f],m=p.markup,g=p.displayTransform,y=h+HF(m,"id"),v=h+HF(m,"display"),b=l[y],w=g(b,l[v]),x=e.substring(u,l.index);s(x,u,d),d+=x.length,n(l[0],l.index,d,b,w,f,u),d+=w.length,u=i.lastIndex}u<e.length&&s(e.substring(u),u,d)},Zl=function(e,r){var n="";return Um(e,r,function(s,i,o,a,l){n+=l},function(s){n+=s}),n},Rn=function(e,r,n){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"START";if(typeof n!="number")return n;var i,o=function(u,d,h){i===void 0&&h+u.length>=n&&(i=d+n-h)},a=function(u,d,h,f,p,m,g){i===void 0&&h+p.length>n&&(s==="NULL"?i=null:i=d+(s==="END"?u.length:0))};return Um(e,r,a,o),i===void 0?e.length:i},vp=function(e,r,n,s){return e.substring(0,r)+s+e.substring(n)},QNe=function(e,r,n,s){var i=n.selectionStartBefore,o=n.selectionEndBefore,a=n.selectionEndAfter,l=Zl(e,s),u=l.length-r.length;i==="undefined"&&(i=a+u),o==="undefined"&&(o=i),i===o&&o===a&&l.length===r.length&&(i=i-1);var d=r.slice(i,a),h=Math.min(i,a),f=o;i===a&&(f=Math.max(o,i+u));var p=Rn(e,s,h,"START"),m=Rn(e,s,f,"END"),g=Rn(e,s,h,"NULL"),y=Rn(e,s,f,"NULL"),v=g===null||y===null,b=vp(e,p,m,d);if(!v){var w=Zl(b,s);if(w!==r){for(h=0;r[h]===w[h];)h++;d=r.slice(h,a),f=l.lastIndexOf(r.substring(a)),p=Rn(e,s,h,"START"),m=Rn(e,s,f,"END"),b=vp(e,p,m,d)}}return b},KF=function(e,r,n){var s=n,i=!1,o=function(l,u,d,h,f,p,m){d<=n&&d+f.length>n&&(s=d,i=!0)};if(Um(e,r,o),i)return s},Yf=function(e,r){var n=[];return Um(e,r,function(s,i,o,a,l,u,d){n.push({id:a,display:l,childIndex:u,index:i,plainTextIndex:o})}),n},Woe=function(e,r){return"".concat(e,"-").concat(r)},gy=function(e){return Object.values(e).reduce(function(r,n){var s=n.results;return r+s.length},0)},XNe=function(e,r){var n=Yf(e,r),s=n[n.length-1];return s?s.plainTextIndex+s.display.length:0},JNe=function(e){var r=Qy(e),n=e[e.indexOf(Vi.display)+Vi.display.length],s=e[e.indexOf(Vi.id)+Vi.id.length];return new RegExp(r.replace(Vi.display,"([^".concat(Qy(n||""),"]+?)")).replace(Vi.id,"([^".concat(Qy(s||""),"]+?)")))},wa=function(e){return C.Children.toArray(e).map(function(r){var n=r.props,s=n.markup,i=n.regex,o=n.displayTransform;return{markup:s,regex:i?ZNe(i,s):JNe(s),displayTransform:o||function(a,l){return l||a}}})},ZNe=function(e,r){var n=new RegExp(e.toString()+"|").exec("").length-1,s=zoe(r);return gh(n===s,"Number of capturing groups in RegExp ".concat(e.toString()," (").concat(n,") does not match the number of placeholders in the markup '").concat(r,"' (").concat(s,")")),e},eCe=function(e,r,n){return e.replace(Vi.id,r).replace(Vi.display,n)},tCe=[{base:"A",letters:/(&#65;|&#9398;|&#65313;|&#192;|&#193;|&#194;|&#7846;|&#7844;|&#7850;|&#7848;|&#195;|&#256;|&#258;|&#7856;|&#7854;|&#7860;|&#7858;|&#550;|&#480;|&#196;|&#478;|&#7842;|&#197;|&#506;|&#461;|&#512;|&#514;|&#7840;|&#7852;|&#7862;|&#7680;|&#260;|&#570;|&#11375;|[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F])/g},{base:"AA",letters:/(&#42802;|[\uA732])/g},{base:"AE",letters:/(&#198;|&#508;|&#482;|[\u00C6\u01FC\u01E2])/g},{base:"AO",letters:/(&#42804;|[\uA734])/g},{base:"AU",letters:/(&#42806;|[\uA736])/g},{base:"AV",letters:/(&#42808;|&#42810;|[\uA738\uA73A])/g},{base:"AY",letters:/(&#42812;|[\uA73C])/g},{base:"B",letters:/(&#66;|&#9399;|&#65314;|&#7682;|&#7684;|&#7686;|&#579;|&#386;|&#385;|[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181])/g},{base:"C",letters:/(&#67;|&#9400;|&#65315;|&#262;|&#264;|&#266;|&#268;|&#199;|&#7688;|&#391;|&#571;|&#42814;|[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E])/g},{base:"D",letters:/(&#68;|&#9401;|&#65316;|&#7690;|&#270;|&#7692;|&#7696;|&#7698;|&#7694;|&#272;|&#395;|&#394;|&#393;|&#42873;|&#208;|[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779\u00D0])/g},{base:"DZ",letters:/(&#497;|&#452;|[\u01F1\u01C4])/g},{base:"Dz",letters:/(&#498;|&#453;|[\u01F2\u01C5])/g},{base:"E",letters:/(&#69;|&#9402;|&#65317;|&#200;|&#201;|&#202;|&#7872;|&#7870;|&#7876;|&#7874;|&#7868;|&#274;|&#7700;|&#7702;|&#276;|&#278;|&#203;|&#7866;|&#282;|&#516;|&#518;|&#7864;|&#7878;|&#552;|&#7708;|&#280;|&#7704;|&#7706;|&#400;|&#398;|[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E])/g},{base:"F",letters:/(&#70;|&#9403;|&#65318;|&#7710;|&#401;|&#42875;|[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B])/g},{base:"G",letters:/(&#71;|&#9404;|&#65319;|&#500;|&#284;|&#7712;|&#286;|&#288;|&#486;|&#290;|&#484;|&#403;|&#42912;|&#42877;|&#42878;|[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E])/g},{base:"H",letters:/(&#72;|&#9405;|&#65320;|&#292;|&#7714;|&#7718;|&#542;|&#7716;|&#7720;|&#7722;|&#294;|&#11367;|&#11381;|&#42893;|[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D])/g},{base:"I",letters:/(&#73;|&#9406;|&#65321;|&#204;|&#205;|&#206;|&#296;|&#298;|&#300;|&#304;|&#207;|&#7726;|&#7880;|&#463;|&#520;|&#522;|&#7882;|&#302;|&#7724;|&#407;|[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197])/g},{base:"J",letters:/(&#74;|&#9407;|&#65322;|&#308;|&#584;|[\u004A\u24BF\uFF2A\u0134\u0248])/g},{base:"K",letters:/(&#75;|&#9408;|&#65323;|&#7728;|&#488;|&#7730;|&#310;|&#7732;|&#408;|&#11369;|&#42816;|&#42818;|&#42820;|&#42914;|[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2])/g},{base:"L",letters:/(&#76;|&#9409;|&#65324;|&#319;|&#313;|&#317;|&#7734;|&#7736;|&#315;|&#7740;|&#7738;|&#321;|&#573;|&#11362;|&#11360;|&#42824;|&#42822;|&#42880;|[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780])/g},{base:"LJ",letters:/(&#455;|[\u01C7])/g},{base:"Lj",letters:/(&#456;|[\u01C8])/g},{base:"M",letters:/(&#77;|&#9410;|&#65325;|&#7742;|&#7744;|&#7746;|&#11374;|&#412;|[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C])/g},{base:"N",letters:/(&#78;|&#9411;|&#65326;|&#504;|&#323;|&#209;|&#7748;|&#327;|&#7750;|&#325;|&#7754;|&#7752;|&#544;|&#413;|&#42896;|&#42916;|&#330;|[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4\u014A])/g},{base:"NJ",letters:/(&#458;|[\u01CA])/g},{base:"Nj",letters:/(&#459;|[\u01CB])/g},{base:"O",letters:/(&#79;|&#9412;|&#65327;|&#210;|&#211;|&#212;|&#7890;|&#7888;|&#7894;|&#7892;|&#213;|&#7756;|&#556;|&#7758;|&#332;|&#7760;|&#7762;|&#334;|&#558;|&#560;|&#214;|&#554;|&#7886;|&#336;|&#465;|&#524;|&#526;|&#416;|&#7900;|&#7898;|&#7904;|&#7902;|&#7906;|&#7884;|&#7896;|&#490;|&#492;|&#216;|&#510;|&#390;|&#415;|&#42826;|&#42828;|[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C])/g},{base:"OE",letters:/(&#338;|[\u0152])/g},{base:"OI",letters:/(&#418;|[\u01A2])/g},{base:"OO",letters:/(&#42830;|[\uA74E])/g},{base:"OU",letters:/(&#546;|[\u0222])/g},{base:"P",letters:/(&#80;|&#9413;|&#65328;|&#7764;|&#7766;|&#420;|&#11363;|&#42832;|&#42834;|&#42836;|[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754])/g},{base:"Q",letters:/(&#81;|&#9414;|&#65329;|&#42838;|&#42840;|&#586;|[\u0051\u24C6\uFF31\uA756\uA758\u024A])/g},{base:"R",letters:/(&#82;|&#9415;|&#65330;|&#340;|&#7768;|&#344;|&#528;|&#530;|&#7770;|&#7772;|&#342;|&#7774;|&#588;|&#11364;|&#42842;|&#42918;|&#42882;|[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782])/g},{base:"S",letters:/(&#83;|&#9416;|&#65331;|&#7838;|&#346;|&#7780;|&#348;|&#7776;|&#352;|&#7782;|&#7778;|&#7784;|&#536;|&#350;|&#11390;|&#42920;|&#42884;|[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784])/g},{base:"T",letters:/(&#84;|&#9417;|&#65332;|&#7786;|&#356;|&#7788;|&#538;|&#354;|&#7792;|&#7790;|&#358;|&#428;|&#430;|&#574;|&#42886;|[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786])/g},{base:"TH",letters:/(&#222;|[\u00DE])/g},{base:"TZ",letters:/(&#42792;|[\uA728])/g},{base:"U",letters:/(&#85;|&#9418;|&#65333;|&#217;|&#218;|&#219;|&#360;|&#7800;|&#362;|&#7802;|&#364;|&#220;|&#475;|&#471;|&#469;|&#473;|&#7910;|&#366;|&#368;|&#467;|&#532;|&#534;|&#431;|&#7914;|&#7912;|&#7918;|&#7916;|&#7920;|&#7908;|&#7794;|&#370;|&#7798;|&#7796;|&#580;|[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244])/g},{base:"V",letters:/(&#86;|&#9419;|&#65334;|&#7804;|&#7806;|&#434;|&#42846;|&#581;|[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245])/g},{base:"VY",letters:/(&#42848;|[\uA760])/g},{base:"W",letters:/(&#87;|&#9420;|&#65335;|&#7808;|&#7810;|&#372;|&#7814;|&#7812;|&#7816;|&#11378;|[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72])/g},{base:"X",letters:/(&#88;|&#9421;|&#65336;|&#7818;|&#7820;|[\u0058\u24CD\uFF38\u1E8A\u1E8C])/g},{base:"Y",letters:/(&#89;|&#9422;|&#65337;|&#7922;|&#221;|&#374;|&#7928;|&#562;|&#7822;|&#376;|&#7926;|&#7924;|&#435;|&#590;|&#7934;|[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE])/g},{base:"Z",letters:/(&#90;|&#9423;|&#65338;|&#377;|&#7824;|&#379;|&#381;|&#7826;|&#7828;|&#437;|&#548;|&#11391;|&#11371;|&#42850;|[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762])/g},{base:"a",letters:/(&#97;|&#9424;|&#65345;|&#7834;|&#224;|&#225;|&#226;|&#7847;|&#7845;|&#7851;|&#7849;|&#227;|&#257;|&#259;|&#7857;|&#7855;|&#7861;|&#7859;|&#551;|&#481;|&#228;|&#479;|&#7843;|&#229;|&#507;|&#462;|&#513;|&#515;|&#7841;|&#7853;|&#7863;|&#7681;|&#261;|&#11365;|&#592;|[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250])/g},{base:"aa",letters:/(&#42803;|[\uA733])/g},{base:"ae",letters:/(&#230;|&#509;|&#483;|[\u00E6\u01FD\u01E3])/g},{base:"ao",letters:/(&#42805;|[\uA735])/g},{base:"au",letters:/(&#42807;|[\uA737])/g},{base:"av",letters:/(&#42809;|&#42811;|[\uA739\uA73B])/g},{base:"ay",letters:/(&#42813;|[\uA73D])/g},{base:"b",letters:/(&#98;|&#9425;|&#65346;|&#7683;|&#7685;|&#7687;|&#384;|&#387;|&#595;|[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253])/g},{base:"c",letters:/(&#99;|&#9426;|&#65347;|&#263;|&#265;|&#267;|&#269;|&#231;|&#7689;|&#392;|&#572;|&#42815;|&#8580;|[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184])/g},{base:"d",letters:/(&#100;|&#9427;|&#65348;|&#7691;|&#271;|&#7693;|&#7697;|&#7699;|&#7695;|&#273;|&#396;|&#598;|&#599;|&#42874;|&#240;|[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A\u00F0])/g},{base:"dz",letters:/(&#499;|&#454;|[\u01F3\u01C6])/g},{base:"e",letters:/(&#101;|&#9428;|&#65349;|&#232;|&#233;|&#234;|&#7873;|&#7871;|&#7877;|&#7875;|&#7869;|&#275;|&#7701;|&#7703;|&#277;|&#279;|&#235;|&#7867;|&#283;|&#517;|&#519;|&#7865;|&#7879;|&#553;|&#7709;|&#281;|&#7705;|&#7707;|&#583;|&#603;|&#477;|[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD])/g},{base:"f",letters:/(&#102;|&#9429;|&#65350;|&#7711;|&#402;|&#42876;|[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C])/g},{base:"g",letters:/(&#103;|&#9430;|&#65351;|&#501;|&#285;|&#7713;|&#287;|&#289;|&#487;|&#291;|&#485;|&#608;|&#42913;|&#7545;|&#42879;|[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F])/g},{base:"h",letters:/(&#104;|&#9431;|&#65352;|&#293;|&#7715;|&#7719;|&#543;|&#7717;|&#7721;|&#7723;|&#7830;|&#295;|&#11368;|&#11382;|&#613;|[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265])/g},{base:"hv",letters:/(&#405;|[\u0195])/g},{base:"i",letters:/(&#105;|&#9432;|&#65353;|&#236;|&#237;|&#238;|&#297;|&#299;|&#301;|&#239;|&#7727;|&#7881;|&#464;|&#521;|&#523;|&#7883;|&#303;|&#7725;|&#616;|&#305;|[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131])/g},{base:"ij",letters:/(&#307;|[\u0133])/g},{base:"j",letters:/(&#106;|&#9433;|&#65354;|&#309;|&#496;|&#585;|[\u006A\u24D9\uFF4A\u0135\u01F0\u0249])/g},{base:"k",letters:/(&#107;|&#9434;|&#65355;|&#7729;|&#489;|&#7731;|&#311;|&#7733;|&#409;|&#11370;|&#42817;|&#42819;|&#42821;|&#42915;|[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3])/g},{base:"l",letters:/(&#108;|&#9435;|&#65356;|&#320;|&#314;|&#318;|&#7735;|&#7737;|&#316;|&#7741;|&#7739;|&#322;|&#410;|&#619;|&#11361;|&#42825;|&#42881;|&#42823;|[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u0142\u019A\u026B\u2C61\uA749\uA781\uA747])/g},{base:"lj",letters:/(&#457;|[\u01C9])/g},{base:"m",letters:/(&#109;|&#9436;|&#65357;|&#7743;|&#7745;|&#7747;|&#625;|&#623;|[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F])/g},{base:"n",letters:/(&#110;|&#9437;|&#65358;|&#505;|&#324;|&#241;|&#7749;|&#328;|&#7751;|&#326;|&#7755;|&#7753;|&#414;|&#626;|&#329;|&#42897;|&#42917;|&#331;|[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5\u014B])/g},{base:"nj",letters:/(&#460;|[\u01CC])/g},{base:"o",letters:/(&#111;|&#9438;|&#65359;|&#242;|&#243;|&#244;|&#7891;|&#7889;|&#7895;|&#7893;|&#245;|&#7757;|&#557;|&#7759;|&#333;|&#7761;|&#7763;|&#335;|&#559;|&#561;|&#246;|&#555;|&#7887;|&#337;|&#466;|&#525;|&#527;|&#417;|&#7901;|&#7899;|&#7905;|&#7903;|&#7907;|&#7885;|&#7897;|&#491;|&#493;|&#248;|&#511;|&#596;|&#42827;|&#42829;|&#629;|[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275])/g},{base:"oe",letters:/(&#339;|[\u0153])/g},{base:"oi",letters:/(&#419;|[\u01A3])/g},{base:"ou",letters:/(&#547;|[\u0223])/g},{base:"oo",letters:/(&#42831;|[\uA74F])/g},{base:"p",letters:/(&#112;|&#9439;|&#65360;|&#7765;|&#7767;|&#421;|&#7549;|&#42833;|&#42835;|&#42837;|[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755])/g},{base:"q",letters:/(&#113;|&#9440;|&#65361;|&#587;|&#42839;|&#42841;|[\u0071\u24E0\uFF51\u024B\uA757\uA759])/g},{base:"r",letters:/(&#114;|&#9441;|&#65362;|&#341;|&#7769;|&#345;|&#529;|&#531;|&#7771;|&#7773;|&#343;|&#7775;|&#589;|&#637;|&#42843;|&#42919;|&#42883;|[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783])/g},{base:"s",letters:/(&#115;|&#9442;|&#65363;|&#347;|&#7781;|&#349;|&#7777;|&#353;|&#7783;|&#7779;|&#7785;|&#537;|&#351;|&#575;|&#42921;|&#42885;|&#7835;|&#383;|[\u0073\u24E2\uFF53\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B\u017F])/g},{base:"ss",letters:/(&#223;|[\u00DF])/g},{base:"t",letters:/(&#116;|&#9443;|&#65364;|&#7787;|&#7831;|&#357;|&#7789;|&#539;|&#355;|&#7793;|&#7791;|&#359;|&#429;|&#648;|&#11366;|&#42887;|[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787])/g},{base:"th",letters:/(&#254;|[\u00FE])/g},{base:"tz",letters:/(&#42793;|[\uA729])/g},{base:"u",letters:/(&#117;|&#9444;|&#65365;|&#249;|&#250;|&#251;|&#361;|&#7801;|&#363;|&#7803;|&#365;|&#252;|&#476;|&#472;|&#470;|&#474;|&#7911;|&#367;|&#369;|&#468;|&#533;|&#535;|&#432;|&#7915;|&#7913;|&#7919;|&#7917;|&#7921;|&#7909;|&#7795;|&#371;|&#7799;|&#7797;|&#649;|[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289])/g},{base:"v",letters:/(&#118;|&#9445;|&#65366;|&#7805;|&#7807;|&#651;|&#42847;|&#652;|[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C])/g},{base:"vy",letters:/(&#42849;|[\uA761])/g},{base:"w",letters:/(&#119;|&#9446;|&#65367;|&#7809;|&#7811;|&#373;|&#7815;|&#7813;|&#7832;|&#7817;|&#11379;|[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73])/g},{base:"x",letters:/(&#120;|&#9447;|&#65368;|&#7819;|&#7821;|[\u0078\u24E7\uFF58\u1E8B\u1E8D])/g},{base:"y",letters:/(&#121;|&#9448;|&#65369;|&#7923;|&#253;|&#375;|&#7929;|&#563;|&#7823;|&#255;|&#7927;|&#7833;|&#7925;|&#436;|&#591;|&#7935;|[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF])/g},{base:"z",letters:/(&#122;|&#9449;|&#65370;|&#378;|&#7825;|&#380;|&#382;|&#7827;|&#7829;|&#438;|&#549;|&#576;|&#11372;|&#42851;|[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763])/g}],rCe=function(e){var r=e;return tCe.forEach(function(n){r=r.replace(n.letters,n.base)}),r},GF=function(e){return rCe(e).toLowerCase()},Voe=function(e,r,n){return n?GF(e).indexOf(GF(r)):e.toLowerCase().indexOf(r.toLowerCase())},nCe=function(){return!!document.documentMode},AR=function(e){return typeof e=="number"},sCe=function(e){return e===Object(e)?Object.keys(e):[]},iCe=function(e){for(var r,n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];var o=(r=[]).concat.apply(r,s);return Object.keys(e).reduce(function(a,l){return e.hasOwnProperty(l)&&!o.includes(l)&&e[l]!==void 0&&(a[l]=e[l]),a},{})},oCe=["style","className","classNames"];function YF(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function QF(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YF(Object(r),!0).forEach(function(n){tt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YF(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Lb(t,e){var r=function(s){var i=function(l){var u=l.style,d=l.className,h=l.classNames,f=vNe(l,oCe),p=e?e(f):void 0,m=fD(t,{style:u,className:d,classNames:h},p);return te.createElement(s,ei({},f,{style:m}))},o=s.displayName||s.name||"Component";return i.displayName="defaultStyle(".concat(o,")"),te.forwardRef(function(a,l){return i(QF(QF({},a),{},{ref:l}))})};return r}var aCe=function(e,r){return e.hasOwnProperty(r)?e[r]++:e[r]=0,r+"_"+e[r]};function Uoe(t){var e=t.selectionStart,r=t.selectionEnd,n=t.value,s=n===void 0?"":n,i=t.onCaretPositionChange,o=t.containerRef,a=t.children;t.singleLine;var l=t.style,u=C.useState({left:void 0,top:void 0}),d=O0(u,2),h=d[0],f=d[1],p=C.useState(),m=O0(p,2),g=m[0],y=m[1];C.useEffect(function(){v()});var v=function(){if(g){var D=g.offsetLeft,F=g.offsetTop;if(!(h.left===D&&h.top===F)){var $={left:D,top:F};f($),i($)}}},b=wa(a),w;r===e&&(w=Rn(s,b,e,"START"));var x=[],S={},E=x,N=0,_=function(D,F,$){if(AR(w)&&w>=F&&w<=F+D.length){var q=w-F;E.push(j(D.substring(0,q),N)),E=[j(D.substring(q),N)]}else E.push(j(D,N));N++},k=function(D,F,$,q,M,z,Y){var H=aCe(S,q);E.push(T(q,M,z,H))},j=function(D,F){return te.createElement("span",ei({},l("substring"),{key:F}),D)},T=function(D,F,$,q){var M={id:D,display:F,key:q},z=C.Children.toArray(a)[$];return te.cloneElement(z,M)},P=function(D){return te.createElement("span",ei({},l("caret"),{ref:y,key:"caret"}),D)};return Um(s,b,k,_),E.push(" "),E!==x&&x.push(P(E)),te.createElement("div",ei({},l,{ref:o}),x)}Uoe.propTypes={selectionStart:ve.number,selectionEnd:ve.number,value:ve.string.isRequired,onCaretPositionChange:ve.func.isRequired,containerRef:ve.oneOfType([ve.func,ve.shape({current:typeof Element>"u"?ve.any:ve.instanceOf(Element)})]),children:ve.oneOfType([ve.element,ve.arrayOf(ve.element)]).isRequired};var lCe=Lb({position:"relative",boxSizing:"border-box",width:"100%",color:"transparent",overflow:"hidden",whiteSpace:"pre-wrap",wordWrap:"break-word",border:"1px solid transparent",textAlign:"start","&singleLine":{whiteSpace:"pre",wordWrap:null},substring:{visibility:"hidden"}},function(t){return{"&singleLine":t.singleLine}}),cCe=lCe(Uoe);function Hoe(t){var e=t.id,r=t.focused,n=t.ignoreAccents,s=t.index,i=t.onClick,o=t.onMouseEnter,a=t.query,l=t.renderSuggestion,u=t.suggestion,d=t.style;t.className,t.classNames;var h={onClick:i,onMouseEnter:o},f=function(){var y=p(),v=m(y);return l?l(u,a,v,s,r):v},p=function(){if(typeof u=="string")return u;var y=u.id,v=u.display;return y===void 0||!v?y:v},m=function(y){var v=Voe(y,a,n);return v===-1?te.createElement("span",d("display"),y):te.createElement("span",d("display"),y.substring(0,v),te.createElement("b",d("highlight"),y.substring(v,v+a.length)),y.substring(v+a.length))};return te.createElement("li",ei({id:e,role:"option","aria-selected":r},h,d),f())}Hoe.propTypes={id:ve.string.isRequired,query:ve.string.isRequired,index:ve.number.isRequired,ignoreAccents:ve.bool,suggestion:ve.oneOfType([ve.string,ve.shape({id:ve.oneOfType([ve.string,ve.number]).isRequired,display:ve.string})]).isRequired,renderSuggestion:ve.func,focused:ve.bool};var uCe=Lb({cursor:"pointer"},function(t){return{"&focused":t.focused}}),dCe=uCe(Hoe);function hCe(t){var e=t.style,r=t.className,n=t.classNames,s=fD(fCe,{style:e,className:r,classNames:n}),i=s("spinner");return te.createElement("div",s,te.createElement("div",i,te.createElement("div",i(["element","element1"])),te.createElement("div",i(["element","element2"])),te.createElement("div",i(["element","element3"])),te.createElement("div",i(["element","element4"])),te.createElement("div",i(["element","element5"]))))}var fCe={};function Koe(t){var e=t.id,r=t.suggestions,n=r===void 0?{}:r,s=t.a11ySuggestionsListLabel,i=t.focusIndex,o=t.position,a=t.left,l=t.right,u=t.top,d=t.scrollFocusedIntoView,h=t.isLoading,f=t.isOpened,p=t.onSelect,m=p===void 0?function(){return null}:p,g=t.ignoreAccents,y=t.containerRef,v=t.children,b=t.style,w=t.customSuggestionsContainer,x=t.onMouseDown,S=t.onMouseEnter,E=C.useState(void 0),N=O0(E,2),_=N[0],k=N[1];C.useEffect(function(){if(!(!_||_.offsetHeight>=_.scrollHeight||!d)){var $=_.scrollTop,q=_.children[i].getBoundingClientRect(),M=q.top,z=q.bottom,Y=_.getBoundingClientRect(),H=Y.top;M=M-H+$,z=z-H+$,M<$?_.scrollTop=M:z>_.offsetHeight&&(_.scrollTop=z-_.offsetHeight)}},[i,d,_]);var j=function(){var q=te.createElement("ul",ei({ref:k,id:e,role:"listbox","aria-label":s},b("list")),Object.values(n).reduce(function(M,z){var Y=z.results,H=z.queryInfo;return[].concat(j0(M),j0(Y.map(function(me,G){return T(me,H,M.length+G)})))},[]));return w?w(q):q},T=function(q,M,z){var Y=z===i,H=M.childIndex,me=M.query,G=C.Children.toArray(v)[H].props.renderSuggestion;return te.createElement(dCe,{style:b("item"),key:"".concat(H,"-").concat(F(q)),id:Woe(e,z),query:me,index:z,ignoreAccents:g,renderSuggestion:G,suggestion:q,focused:Y,onClick:function(){return D(q,M)},onMouseEnter:function(){return O(z)}})},P=function(){if(h)return te.createElement(hCe,{style:b("loadingIndicator")})},O=function(q,M){S&&S(q)},D=function(q,M){m(q,M)},F=function(q){return typeof q=="string"?q:q.id};return f?te.createElement("div",ei({},zNe({position:o||"absolute",left:a,right:l,top:u},b),{onMouseDown:x,ref:y}),j(),P()):null}Koe.propTypes={id:ve.string.isRequired,suggestions:ve.object.isRequired,a11ySuggestionsListLabel:ve.string,focusIndex:ve.number,position:ve.string,left:ve.number,right:ve.number,top:ve.number,scrollFocusedIntoView:ve.bool,isLoading:ve.bool,isOpened:ve.bool.isRequired,onSelect:ve.func,ignoreAccents:ve.bool,customSuggestionsContainer:ve.func,containerRef:ve.oneOfType([ve.func,ve.shape({current:typeof Element>"u"?ve.any:ve.instanceOf(Element)})])};var pCe=Lb({zIndex:1,backgroundColor:"white",marginTop:14,minWidth:100,list:{margin:0,padding:0,listStyleType:"none"}}),mCe=pCe(Koe);function XF(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function hi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?XF(Object(r),!0).forEach(function(n){tt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):XF(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gCe(t){var e=yCe();return function(){var n=T0(t),s;if(e){var i=T0(this).constructor;s=Reflect.construct(n,arguments,i)}else s=n.apply(this,arguments);return dNe(this,s)}}function yCe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var vCe=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e instanceof RegExp)return e;var n=r.allowSpaceInQuery,s=Qy(e);return new RegExp("(?:^|\\s)(".concat(s,"([^").concat(n?"":"\\s").concat(s,"]*))$"))},bCe=function(e,r){return e instanceof Array?function(n,s){for(var i=[],o=0,a=e.length;o<a;++o){var l=e[o].display||e[o].id;Voe(l,n,r)>=0&&i.push(e[o])}return i}:e},Hu={TAB:9,RETURN:13,ESC:27,UP:38,DOWN:40},yy=!1,Goe={singleLine:ve.bool,allowSpaceInQuery:ve.bool,allowSuggestionsAboveCursor:ve.bool,forceSuggestionsAboveCursor:ve.bool,ignoreAccents:ve.bool,a11ySuggestionsListLabel:ve.string,value:ve.string,onKeyDown:ve.func,customSuggestionsContainer:ve.func,onSelect:ve.func,onBlur:ve.func,onChange:ve.func,suggestionsPortalHost:typeof Element>"u"?ve.any:ve.PropTypes.instanceOf(Element),inputRef:ve.oneOfType([ve.func,ve.shape({current:typeof Element>"u"?ve.any:ve.instanceOf(Element)})]),children:ve.oneOfType([ve.element,ve.arrayOf(ve.element)]).isRequired},pD=function(t){uNe(r,t);var e=gCe(r);function r(n){var s;return aNe(this,r),s=e.call(this,n),tt(nt(s),"setContainerElement",function(i){s.containerElement=i}),tt(nt(s),"getInputProps",function(){var i=s.props,o=i.readOnly,a=i.disabled,l=i.style,u=iCe(s.props,["style","classNames","className"],sCe(Goe));return hi(hi(hi(hi({},u),l("input")),{},{value:s.getPlainText(),onScroll:s.updateHighlighterScroll},!o&&!a&&{onChange:s.handleChange,onSelect:s.handleSelect,onKeyDown:s.handleKeyDown,onBlur:s.handleBlur,onCompositionStart:s.handleCompositionStart,onCompositionEnd:s.handleCompositionEnd}),s.isOpened()&&{role:"combobox","aria-controls":s.uuidSuggestionsOverlay,"aria-expanded":!0,"aria-autocomplete":"list","aria-haspopup":"listbox","aria-activedescendant":Woe(s.uuidSuggestionsOverlay,s.state.focusIndex)})}),tt(nt(s),"renderControl",function(){var i=s.props,o=i.singleLine,a=i.style,l=s.getInputProps();return te.createElement("div",a("control"),s.renderHighlighter(),o?s.renderInput(l):s.renderTextarea(l))}),tt(nt(s),"renderInput",function(i){return te.createElement("input",ei({type:"text",ref:s.setInputRef},i))}),tt(nt(s),"renderTextarea",function(i){return te.createElement("textarea",ei({ref:s.setInputRef},i))}),tt(nt(s),"setInputRef",function(i){s.inputElement=i;var o=s.props.inputRef;typeof o=="function"?o(i):o&&(o.current=i)}),tt(nt(s),"setSuggestionsElement",function(i){s.suggestionsElement=i}),tt(nt(s),"renderSuggestionsOverlay",function(){if(!AR(s.state.selectionStart))return null;var i=s.state.suggestionsPosition,o=i.position,a=i.left,l=i.top,u=i.right,d=te.createElement(mCe,{id:s.uuidSuggestionsOverlay,style:s.props.style("suggestions"),position:o,left:a,top:l,right:u,focusIndex:s.state.focusIndex,scrollFocusedIntoView:s.state.scrollFocusedIntoView,containerRef:s.setSuggestionsElement,suggestions:s.state.suggestions,customSuggestionsContainer:s.props.customSuggestionsContainer,onSelect:s.addMention,onMouseDown:s.handleSuggestionsMouseDown,onMouseEnter:s.handleSuggestionsMouseEnter,isLoading:s.isLoading(),isOpened:s.isOpened(),ignoreAccents:s.props.ignoreAccents,a11ySuggestionsListLabel:s.props.a11ySuggestionsListLabel},s.props.children);return s.props.suggestionsPortalHost?Kte.createPortal(d,s.props.suggestionsPortalHost):d}),tt(nt(s),"renderHighlighter",function(){var i=s.state,o=i.selectionStart,a=i.selectionEnd,l=s.props,u=l.singleLine,d=l.children,h=l.value,f=l.style;return te.createElement(cCe,{containerRef:s.setHighlighterElement,style:f("highlighter"),value:h,singleLine:u,selectionStart:o,selectionEnd:a,onCaretPositionChange:s.handleCaretPositionChange},d)}),tt(nt(s),"setHighlighterElement",function(i){s.highlighterElement=i}),tt(nt(s),"handleCaretPositionChange",function(i){s.setState({caretPosition:i})}),tt(nt(s),"getPlainText",function(){return Zl(s.props.value||"",wa(s.props.children))}),tt(nt(s),"executeOnChange",function(i){for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];if(s.props.onChange){var u;return(u=s.props).onChange.apply(u,[i].concat(a))}if(s.props.valueLink){var d;return(d=s.props.valueLink).requestChange.apply(d,[i.target.value].concat(a))}}),tt(nt(s),"handleChange",function(i){if(yy=!1,nCe()){var o=document.activeElement&&document.activeElement.contentDocument||document;if(o.activeElement!==i.target)return}var a=s.props.value||"",l=wa(s.props.children),u=i.target.value,d=s.state.selectionStart;d==null&&(d=i.target.selectionStart);var h=s.state.selectionEnd;h==null&&(h=i.target.selectionEnd);var f=QNe(a,u,{selectionStartBefore:d,selectionEndBefore:h,selectionEndAfter:i.target.selectionEnd},l);u=Zl(f,l);var p=i.target.selectionStart,m=i.target.selectionEnd,g=!1,y=KF(a,l,p);y!==void 0&&s.state.selectionEnd>y&&(p=y+(i.nativeEvent.data?i.nativeEvent.data.length:0),m=p,g=!0),s.setState({selectionStart:p,selectionEnd:m,setSelectionAfterMentionChange:g});var v=Yf(f,l);i.nativeEvent.isComposing&&p===m&&s.updateMentionsQueries(s.inputElement.value,p);var b={target:{value:f}};s.executeOnChange(b,f,u,v)}),tt(nt(s),"handleSelect",function(i){if(s.setState({selectionStart:i.target.selectionStart,selectionEnd:i.target.selectionEnd}),!yy){var o=s.inputElement;i.target.selectionStart===i.target.selectionEnd?s.updateMentionsQueries(o.value,i.target.selectionStart):s.clearSuggestions(),s.updateHighlighterScroll(),s.props.onSelect(i)}}),tt(nt(s),"handleKeyDown",function(i){var o=gy(s.state.suggestions);if(o===0||!s.suggestionsElement){s.props.onKeyDown(i);return}switch(Object.values(Hu).indexOf(i.keyCode)>=0&&(i.preventDefault(),i.stopPropagation()),i.keyCode){case Hu.ESC:{s.clearSuggestions();return}case Hu.DOWN:{s.shiftFocus(1);return}case Hu.UP:{s.shiftFocus(-1);return}case Hu.RETURN:{s.selectFocused();return}case Hu.TAB:{s.selectFocused();return}default:return}}),tt(nt(s),"shiftFocus",function(i){var o=gy(s.state.suggestions);s.setState({focusIndex:(o+s.state.focusIndex+i)%o,scrollFocusedIntoView:!0})}),tt(nt(s),"selectFocused",function(){var i=s.state,o=i.suggestions,a=i.focusIndex,l=Object.values(o).reduce(function(h,f){var p=f.results,m=f.queryInfo;return[].concat(j0(h),j0(p.map(function(g){return{result:g,queryInfo:m}})))},[])[a],u=l.result,d=l.queryInfo;s.addMention(u,d),s.setState({focusIndex:0})}),tt(nt(s),"handleBlur",function(i){var o=s._suggestionsMouseDown;s._suggestionsMouseDown=!1,o||s.setState({selectionStart:null,selectionEnd:null}),window.setTimeout(function(){s.updateHighlighterScroll()},1),s.props.onBlur(i,o)}),tt(nt(s),"handleSuggestionsMouseDown",function(i){s._suggestionsMouseDown=!0}),tt(nt(s),"handleSuggestionsMouseEnter",function(i){s.setState({focusIndex:i,scrollFocusedIntoView:!1})}),tt(nt(s),"updateSuggestionsPosition",function(){var i=s.state.caretPosition,o=s.props,a=o.suggestionsPortalHost,l=o.allowSuggestionsAboveCursor,u=o.forceSuggestionsAboveCursor;if(!(!i||!s.suggestionsElement)){var d=s.suggestionsElement,h=s.highlighterElement,f=h.getBoundingClientRect(),p=Y1(h,"font-size"),m={left:f.left+i.left,top:f.top+i.top+p},g=Math.max(document.documentElement.clientHeight,window.innerHeight||0);if(d){var y={};if(a){y.position="fixed";var v=m.left,b=m.top;v-=Y1(d,"margin-left"),b-=Y1(d,"margin-top"),v-=h.scrollLeft,b-=h.scrollTop;var w=Math.max(document.documentElement.clientWidth,window.innerWidth||0);v+d.offsetWidth>w?y.left=Math.max(0,w-d.offsetWidth):y.left=v,l&&b+d.offsetHeight>g&&d.offsetHeight<b-p||u?y.top=Math.max(0,b-d.offsetHeight-p):y.top=b}else{var x=i.left-h.scrollLeft,S=i.top-h.scrollTop;x+d.offsetWidth>s.containerElement.offsetWidth?y.right=0:y.left=x,l&&m.top-h.scrollTop+d.offsetHeight>g&&d.offsetHeight<f.top-p-h.scrollTop||u?y.top=S-d.offsetHeight-p:y.top=S}y.left===s.state.suggestionsPosition.left&&y.top===s.state.suggestionsPosition.top&&y.position===s.state.suggestionsPosition.position||s.setState({suggestionsPosition:y})}}}),tt(nt(s),"updateHighlighterScroll",function(){var i=s.inputElement,o=s.highlighterElement;!i||!o||(o.scrollLeft=i.scrollLeft,o.scrollTop=i.scrollTop,o.height=i.height)}),tt(nt(s),"handleCompositionStart",function(){yy=!0}),tt(nt(s),"handleCompositionEnd",function(){yy=!1}),tt(nt(s),"setSelection",function(i,o){if(!(i===null||o===null)){var a=s.inputElement;if(a.setSelectionRange)a.setSelectionRange(i,o);else if(a.createTextRange){var l=a.createTextRange();l.collapse(!0),l.moveEnd("character",o),l.moveStart("character",i),l.select()}}}),tt(nt(s),"updateMentionsQueries",function(i,o){s._queryId++,s.suggestions={},s.setState({suggestions:{}});var a=s.props.value||"",l=s.props.children,u=wa(l),d=Rn(a,u,o,"NULL");if(d!==null){var h=XNe(a.substring(0,d),u),f=i.substring(h,o);te.Children.forEach(l,function(p,m){if(p){var g=vCe(p.props.trigger,s.props),y=f.match(g);if(y){var v=h+f.indexOf(y[1],y.index);s.queryData(y[2],m,v,v+y[1].length,i)}}})}}),tt(nt(s),"clearSuggestions",function(){s._queryId++,s.suggestions={},s.setState({suggestions:{},focusIndex:0})}),tt(nt(s),"queryData",function(i,o,a,l,u){var d=s.props,h=d.children,f=d.ignoreAccents,p=C.Children.toArray(h)[o],m=bCe(p.props.data,f),g=m(i,s.updateSuggestions.bind(null,s._queryId,o,i,a,l,u));g instanceof Array&&s.updateSuggestions(s._queryId,o,i,a,l,u,g)}),tt(nt(s),"updateSuggestions",function(i,o,a,l,u,d,h){if(i===s._queryId){s.suggestions=hi(hi({},s.suggestions),{},tt({},o,{queryInfo:{childIndex:o,query:a,querySequenceStart:l,querySequenceEnd:u,plainTextValue:d},results:h}));var f=s.state.focusIndex,p=gy(s.suggestions);s.setState({suggestions:s.suggestions,focusIndex:f>=p?Math.max(p-1,0):f})}}),tt(nt(s),"addMention",function(i,o){var a=i.id,l=i.display,u=o.childIndex,d=o.querySequenceStart,h=o.querySequenceEnd,f=o.plainTextValue,p=s.props.value||"",m=wa(s.props.children),g=C.Children.toArray(s.props.children)[u],y=g.props,v=y.markup,b=y.displayTransform,w=y.appendSpaceOnAdd,x=y.onAdd,S=Rn(p,m,d,"START"),E=S+h-d,N=eCe(v,a,l);w&&(N+=" ");var _=vp(p,S,E,N);s.inputElement.focus();var k=b(a,l);w&&(k+=" ");var j=d+k.length;s.setState({selectionStart:j,selectionEnd:j,setSelectionAfterMentionChange:!0});var T={target:{value:_}},P=Yf(_,m),O=vp(f,d,h,k);s.executeOnChange(T,_,O,P),x&&x(a,l,S,E),s.clearSuggestions()}),tt(nt(s),"isLoading",function(){var i=!1;return te.Children.forEach(s.props.children,function(o){i=i||o&&o.props.isLoading}),i}),tt(nt(s),"isOpened",function(){return AR(s.state.selectionStart)&&(gy(s.state.suggestions)!==0||s.isLoading())}),tt(nt(s),"_queryId",0),s.suggestions={},s.uuidSuggestionsOverlay=Math.random().toString(16).substring(2),s.handleCopy=s.handleCopy.bind(nt(s)),s.handleCut=s.handleCut.bind(nt(s)),s.handlePaste=s.handlePaste.bind(nt(s)),s.state={focusIndex:0,selectionStart:null,selectionEnd:null,suggestions:{},caretPosition:null,suggestionsPosition:{},setSelectionAfterHandlePaste:!1},s}return cNe(r,[{key:"componentDidMount",value:function(){document.addEventListener("copy",this.handleCopy),document.addEventListener("cut",this.handleCut),document.addEventListener("paste",this.handlePaste),this.updateSuggestionsPosition()}},{key:"componentDidUpdate",value:function(s,i){i.suggestionsPosition===this.state.suggestionsPosition&&this.updateSuggestionsPosition(),this.state.setSelectionAfterMentionChange&&(this.setState({setSelectionAfterMentionChange:!1}),this.setSelection(this.state.selectionStart,this.state.selectionEnd)),this.state.setSelectionAfterHandlePaste&&(this.setState({setSelectionAfterHandlePaste:!1}),this.setSelection(this.state.selectionStart,this.state.selectionEnd))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("copy",this.handleCopy),document.removeEventListener("cut",this.handleCut),document.removeEventListener("paste",this.handlePaste)}},{key:"render",value:function(){return te.createElement("div",ei({ref:this.setContainerElement},this.props.style),this.renderControl(),this.renderSuggestionsOverlay())}},{key:"handlePaste",value:function(s){if(s.target===this.inputElement&&this.supportsClipboardActions(s)){s.preventDefault();var i=this.state,o=i.selectionStart,a=i.selectionEnd,l=this.props,u=l.value,d=l.children,h=wa(d),f=Rn(u,h,o,"START"),p=Rn(u,h,a,"END"),m=s.clipboardData.getData("text/react-mentions"),g=s.clipboardData.getData("text/plain"),y=vp(u,f,p,m||g).replace(/\r/g,""),v=Zl(y,h),b={target:hi(hi({},s.target),{},{value:y})};this.executeOnChange(b,y,v,Yf(y,h));var w=KF(u,h,o),x=(w||o)+Zl(m||g,h).length;this.setState({selectionStart:x,selectionEnd:x,setSelectionAfterHandlePaste:!0})}}},{key:"saveSelectionToClipboard",value:function(s){var i=this.inputElement.selectionStart,o=this.inputElement.selectionEnd,a=this.props,l=a.children,u=a.value,d=wa(l),h=Rn(u,d,i,"START"),f=Rn(u,d,o,"END");s.clipboardData.setData("text/plain",s.target.value.slice(i,o)),s.clipboardData.setData("text/react-mentions",u.slice(h,f))}},{key:"supportsClipboardActions",value:function(s){return!!s.clipboardData}},{key:"handleCopy",value:function(s){s.target===this.inputElement&&this.supportsClipboardActions(s)&&(s.preventDefault(),this.saveSelectionToClipboard(s))}},{key:"handleCut",value:function(s){if(s.target===this.inputElement&&this.supportsClipboardActions(s)){s.preventDefault(),this.saveSelectionToClipboard(s);var i=this.state,o=i.selectionStart,a=i.selectionEnd,l=this.props,u=l.children,d=l.value,h=wa(u),f=Rn(d,h,o,"START"),p=Rn(d,h,a,"END"),m=[d.slice(0,f),d.slice(p)].join(""),g=Zl(m,h),y={target:hi(hi({},s.target),{},{value:g})};this.executeOnChange(y,m,g,Yf(d,h))}}}]),r}(te.Component);tt(pD,"propTypes",Goe);tt(pD,"defaultProps",{ignoreAccents:!1,singleLine:!1,allowSuggestionsAboveCursor:!1,onKeyDown:function(){return null},onSelect:function(){return null},onBlur:function(){return null}});var Y1=function(e,r){var n=parseFloat(window.getComputedStyle(e,null).getPropertyValue(r));return isFinite(n)?n:0},xCe=typeof navigator<"u"&&/iPhone|iPad|iPod/i.test(navigator.userAgent),wCe=Lb({position:"relative",overflowY:"visible",input:{display:"block",width:"100%",position:"absolute",margin:0,top:0,left:0,boxSizing:"border-box",backgroundColor:"transparent",fontFamily:"inherit",fontSize:"inherit",letterSpacing:"inherit"},"&multiLine":{input:hi({height:"100%",bottom:0,overflow:"hidden",resize:"none"},xCe?{marginTop:1,marginLeft:-3}:null)}},function(t){var e=t.singleLine;return{"&singleLine":e,"&multiLine":!e}}),SCe=wCe(pD),ECe={fontWeight:"inherit"},mD=function(e){var r=e.display,n=e.style,s=e.className,i=e.classNames,o=fD(ECe,{style:n,className:s,classNames:i});return te.createElement("strong",o,r)};mD.propTypes={onAdd:ve.func,onRemove:ve.func,renderSuggestion:ve.func,trigger:ve.oneOfType([ve.string,ve.instanceOf(RegExp)]),markup:ve.string,displayTransform:ve.func,allowSpaceInQuery:ve.bool,isLoading:ve.bool};mD.defaultProps={trigger:"@",markup:"@[__display__](__id__)",displayTransform:function(e,r){return r||e},onAdd:function(){return null},onRemove:function(){return null},renderSuggestion:null,isLoading:!1,appendSpaceOnAdd:!1};const _Ce={backgroundColor:"#e0f2fe",borderRadius:"2px",padding:"1px 2px"},NCe={control:{minHeight:80},input:{padding:9,border:"1px solid #d1d5db",borderRadius:"0.375rem"},suggestions:{list:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"0.375rem",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},item:{padding:"8px 12px","&focused":{backgroundColor:"#f3f4f6"}}}};function CCe({value:t,onChange:e,placeholder:r,workspaceIds:n=[]}){const s=async(i,o)=>{if(!i||n.length===0){o([]);return}try{const a=await Ee.searchWorkspaceMembers(n,i);o(a.map(l=>({id:l.id,display:l.name})))}catch{o([])}};return c.jsx(SCe,{value:t,onChange:(i,o)=>e(o),placeholder:r||"Add a note... Use @ to mention someone",style:NCe,children:c.jsx(mD,{trigger:"@",data:s,markup:"@[__display__](__id__)",style:_Ce,appendSpaceOnAdd:!0})})}function kCe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,initialContent:s="",isContactShared:i=!1,workspaceIds:o=[]}){const[a,l]=C.useState(""),[u,d]=C.useState("private");if(C.useEffect(()=>{t&&(l(s||""),d("private"))},[t,s]),!t)return null;const h=o.length>0?!a||a.trim()==="":IR(a),f=m=>{m.preventDefault(),!h&&(r(a,u),l(""),d("private"))},p=()=>{l(""),d("private"),e()};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Add note"}),c.jsx("button",{onClick:p,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(ot,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:f,className:"p-4",children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Note"}),o.length>0?c.jsx(CCe,{value:a,onChange:l,placeholder:"Add a note... Use @ to mention someone",workspaceIds:o}):c.jsx(Poe,{value:a,onChange:l,placeholder:"Enter your note...",disabled:n,autoFocus:!0,minHeight:"150px"})]}),i&&c.jsx("div",{className:"mb-4",children:c.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:u==="shared",onChange:m=>d(m.target.checked?"shared":"private"),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),c.jsxs("span",{className:"flex items-center gap-1.5",children:[u==="shared"?c.jsx(qr,{className:"w-4 h-4 text-blue-500"}):c.jsx($m,{className:"w-4 h-4 text-gray-400"}),"Share this note with others who can see this contact"]})]})}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx("button",{type:"button",onClick:p,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n||h,children:n?"Adding...":"Add note"})]})]})]})})}function Yoe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,todo:s=null}){const[i,o]=C.useState(""),[a,l]=C.useState(""),[u,d]=C.useState(!1),h=()=>new Date().toISOString().split("T")[0];if(C.useEffect(()=>{s?(o(s.content||""),l(s.due_date||""),d(s.is_completed||!1)):(o(""),l(h()),d(!1))},[s,t]),!t)return null;const f=g=>{g.preventDefault(),i.trim()&&(r({content:i.trim(),due_date:a||null,is_completed:u}),s||(o(""),l(h()),d(!1)))},p=()=>{s||(o(""),l(h()),d(!1)),e()},m=g=>{if(!g)return"";try{return new Date(g).toISOString().split("T")[0]}catch{return""}};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:s?"Edit todo":"Add todo"}),c.jsx("button",{onClick:p,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(ot,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:f,className:"p-4",children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"todo-content",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),c.jsx("textarea",{id:"todo-content",value:i,onChange:g=>o(g.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"What needs to be done?",disabled:n,autoFocus:!0})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"todo-due-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Due date (optional)"}),c.jsx("input",{id:"todo-due-date",type:"date",value:m(a),onChange:g=>l(g.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),s&&c.jsx("div",{className:"mb-4",children:c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:u,onChange:g=>d(g.target.checked),className:"mr-2",disabled:n}),c.jsx("span",{className:"text-sm text-gray-700",children:"Completed"})]})}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx("button",{type:"button",onClick:p,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n||!i.trim(),children:n?s?"Saving...":"Adding...":s?"Save":"Add todo"})]})]})]})})}const jCe=[{value:"email",label:"Email"},{value:"phone",label:"Phone"},{value:"mobile",label:"Mobile"},{value:"website",label:"Website"},{value:"calendar",label:"Calendar link"},{value:"linkedin",label:"LinkedIn"},{value:"twitter",label:"Twitter"},{value:"bluesky",label:"Bluesky"},{value:"threads",label:"Threads"},{value:"instagram",label:"Instagram"},{value:"facebook",label:"Facebook"},{value:"slack",label:"Slack"},{value:"other",label:"Other"}];function TCe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,contactInfo:s=[]}){const{register:i,control:o,handleSubmit:a,reset:l,formState:{errors:u}}=so({defaultValues:{contacts:s.length>0?s.map(g=>({contact_type:g.contact_type||"",contact_label:g.contact_label||"",contact_value:g.contact_value||""})):[]}}),{fields:d,append:h,remove:f}=xye({control:o,name:"contacts"});if(C.useEffect(()=>{t&&l({contacts:s.length>0?s.map(g=>({contact_type:g.contact_type||"",contact_label:g.contact_label||"",contact_value:g.contact_value||""})):[]})},[t,s,l]),!t)return null;const p=g=>{const y=g.contacts.filter(v=>v.contact_type&&v.contact_value);r(y)},m=()=>{h({contact_type:"",contact_label:"",contact_value:""})};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Edit contact details"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(ot,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:a(p),className:"flex flex-col flex-1 overflow-hidden",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[d.length===0?c.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:'No contact details yet. Click "Add contact detail" to add one.'}):c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"hidden md:grid md:grid-cols-12 gap-2 text-xs font-medium text-gray-500 px-1",children:[c.jsx("div",{className:"col-span-3",children:"Type"}),c.jsx("div",{className:"col-span-3",children:"Label"}),c.jsx("div",{className:"col-span-5",children:"Value"}),c.jsx("div",{className:"col-span-1"})]}),d.map((g,y)=>c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-2 p-3 md:p-2 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"md:hidden text-xs font-medium text-gray-500 mb-1 block",children:"Type"}),c.jsxs("select",{...i(`contacts.${y}.contact_type`,{required:!0}),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n,children:[c.jsx("option",{value:"",children:"Select type..."}),jCe.map(v=>c.jsx("option",{value:v.value,children:v.label},v.value))]})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"md:hidden text-xs font-medium text-gray-500 mb-1 block",children:"Label"}),c.jsx("input",{...i(`contacts.${y}.contact_label`),placeholder:"e.g., Work",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),c.jsxs("div",{className:"md:col-span-5",children:[c.jsx("label",{className:"md:hidden text-xs font-medium text-gray-500 mb-1 block",children:"Value"}),c.jsx("input",{...i(`contacts.${y}.contact_value`,{required:!0}),placeholder:"e.g., john@example.com",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),c.jsx("div",{className:"md:col-span-1 flex items-center justify-end md:justify-center",children:c.jsx("button",{type:"button",onClick:()=>f(y),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove",disabled:n,children:c.jsx(Nn,{className:"w-4 h-4"})})})]},g.id))]}),c.jsxs("button",{type:"button",onClick:m,className:"mt-4 w-full py-2 px-4 border-2 border-dashed border-gray-300 rounded-lg text-sm text-gray-600 hover:border-gray-400 hover:text-gray-700 transition-colors flex items-center justify-center gap-2",disabled:n,children:[c.jsx(dr,{className:"w-4 h-4"}),"Add contact detail"]})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":"Save changes"})]})]})]})})}function OCe({value:t,onChange:e,people:r,isLoading:n,excludePersonId:s}){const[i,o]=C.useState(""),[a,l]=C.useState(!1),u=C.useRef(null),d=C.useRef(null),h=C.useMemo(()=>r.filter(b=>b.id!==s).sort((b,w)=>{var E,N;const x=(b.first_name||((E=b.acf)==null?void 0:E.first_name)||"").toLowerCase(),S=(w.first_name||((N=w.acf)==null?void 0:N.first_name)||"").toLowerCase();return x<S?-1:x>S?1:0}),[r,s]),f=C.useMemo(()=>{if(!i)return h.slice(0,10);const v=i.toLowerCase();return h.filter(b=>{var E,N;const w=kd(b).toLowerCase(),x=(b.first_name||((E=b.acf)==null?void 0:E.first_name)||"").toLowerCase(),S=(b.last_name||((N=b.acf)==null?void 0:N.last_name)||"").toLowerCase();return w.includes(v)||x.includes(v)||S.includes(v)}).slice(0,10)},[h,i]),p=C.useMemo(()=>h.find(v=>v.id===t),[h,t]);C.useEffect(()=>{const v=b=>{d.current&&!d.current.contains(b.target)&&u.current&&!u.current.contains(b.target)&&l(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const m=v=>{e(v),o(""),l(!1)},g=()=>{e(null),o(""),l(!1)},y=p?kd(p):"";return c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"relative",children:p&&!a?c.jsxs("div",{className:"flex items-center justify-between input pr-8 cursor-text",onClick:()=>l(!0),children:[c.jsx("span",{children:y}),c.jsx("button",{type:"button",onClick:v=>{v.stopPropagation(),g()},className:"absolute right-2 text-gray-400 hover:text-gray-600",children:c.jsx(ot,{className:"w-4 h-4"})})]}):c.jsx("input",{ref:u,type:"text",value:i,onChange:v=>{o(v.target.value),l(!0)},onFocus:()=>l(!0),placeholder:"Search for a person...",className:"input",disabled:n})}),a&&(i||!p)&&c.jsx("div",{ref:d,className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:f.length>0?f.map(v=>c.jsx("button",{type:"button",onClick:()=>m(v.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t===v.id?"bg-primary-50":""}`,children:kd(v)},v.id)):c.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No people found"})})]})}function PCe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,relationship:s=null,personId:i,allPeople:o=[],isPeopleLoading:a=!1,onCreatePerson:l}){const u=!!s,{data:d=[],isLoading:h}=it({queryKey:["relationship-types"],queryFn:async()=>(await Je.getRelationshipTypes()).data}),{register:f,handleSubmit:p,reset:m,control:g,formState:{errors:y}}=so({defaultValues:{related_person:null,relationship_type:"",relationship_label:""}});if(C.useEffect(()=>{t&&m(s?{related_person:s.related_person||null,relationship_type:s.relationship_type?String(s.relationship_type):"",relationship_label:s.relationship_label||""}:{related_person:null,relationship_type:"",relationship_label:""})},[t,s,m]),!t)return null;const v=b=>{r({related_person:b.related_person||null,relationship_type:b.relationship_type?parseInt(b.relationship_type,10):null,relationship_label:b.relationship_label||""})};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:u?"Edit relationship":"Add relationship"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(ot,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:p(v),className:"flex flex-col flex-1 overflow-hidden",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Related person *"}),c.jsx(Iv,{name:"related_person",control:g,rules:{required:"Please select a person"},render:({field:b})=>c.jsx(OCe,{value:b.value,onChange:b.onChange,people:o,isLoading:a,excludePersonId:parseInt(i,10)})}),y.related_person&&c.jsx("p",{className:"text-sm text-red-600 mt-1",children:y.related_person.message}),!u&&l&&c.jsx("div",{className:"mt-2",children:c.jsxs("button",{type:"button",onClick:l,className:"inline-flex items-center gap-1 text-sm text-primary-600 hover:text-primary-700",children:[c.jsx(dr,{className:"w-4 h-4"}),"Add new person"]})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Relationship type"}),c.jsxs("select",{...f("relationship_type"),className:"input",disabled:h||n,children:[c.jsx("option",{value:"",children:"Select a type..."}),d.map(b=>c.jsx("option",{value:b.id,children:b.name},b.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Custom label"}),c.jsx("input",{...f("relationship_label"),className:"input",placeholder:"e.g., Brother-in-law",disabled:n}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Override the relationship type with a custom label"})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":u?"Save changes":"Add relationship"})]})]})]})})}function ICe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,address:s=null}){const i=!!s,{register:o,handleSubmit:a,reset:l,formState:{errors:u}}=so({defaultValues:{address_label:"",street:"",postal_code:"",city:"",state:"",country:""}});if(C.useEffect(()=>{t&&l(s?{address_label:s.address_label||"",street:s.street||"",postal_code:s.postal_code||"",city:s.city||"",state:s.state||"",country:s.country||""}:{address_label:"",street:"",postal_code:"",city:"",state:"",country:""})},[t,s,l]),!t)return null;const d=h=>{r({address_label:h.address_label||"",street:h.street||"",postal_code:h.postal_code||"",city:h.city||"",state:h.state||"",country:h.country||""})};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:i?"Edit address":"Add address"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(ot,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:a(d),className:"flex flex-col flex-1 overflow-hidden",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Label"}),c.jsx("input",{...o("address_label"),className:"input",placeholder:"e.g., Home, Work",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Street"}),c.jsx("input",{...o("street"),className:"input",placeholder:"e.g., 123 Main Street",disabled:n})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Postal code"}),c.jsx("input",{...o("postal_code"),className:"input",placeholder:"e.g., 12345",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"City"}),c.jsx("input",{...o("city"),className:"input",placeholder:"e.g., Amsterdam",disabled:n})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"State/Province"}),c.jsx("input",{...o("state"),className:"input",placeholder:"e.g., North Holland",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Country"}),c.jsx("input",{...o("country"),className:"input",placeholder:"e.g., Netherlands",disabled:n})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":i?"Save changes":"Add address"})]})]})]})})}function RCe({value:t,onChange:e,companies:r,isLoading:n}){return c.jsxs("select",{value:t||"",onChange:s=>e(s.target.value?parseInt(s.target.value,10):null),className:"input",disabled:n,children:[c.jsx("option",{value:"",children:"Select an organization..."}),r.map(s=>{var i;return c.jsx("option",{value:s.id,children:((i=s.title)==null?void 0:i.rendered)||s.title},s.id)})]})}function MCe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,workHistoryItem:s=null}){const i=!!s,{data:o=[],isLoading:a}=it({queryKey:["companies","all"],queryFn:async()=>(await Je.getCompanies({per_page:100})).data}),l=C.useMemo(()=>[...o].sort((y,v)=>{var x,S;const b=(((x=y.title)==null?void 0:x.rendered)||y.title||"").toLowerCase(),w=(((S=v.title)==null?void 0:S.rendered)||v.title||"").toLowerCase();return b.localeCompare(w)}),[o]),{register:u,handleSubmit:d,reset:h,watch:f,control:p,formState:{errors:m}}=so({defaultValues:{company:null,job_title:"",description:"",start_date:"",end_date:"",is_current:!1}});if(f("is_current"),C.useEffect(()=>{t&&h(s?{company:s.company||null,job_title:s.job_title||"",description:s.description||"",start_date:s.start_date||"",end_date:s.end_date||"",is_current:s.is_current||!1}:{company:null,job_title:"",description:"",start_date:"",end_date:"",is_current:!1})},[t,s,h]),!t)return null;const g=y=>{r({company:y.company||null,job_title:y.job_title||"",description:y.description||"",start_date:y.start_date||"",end_date:y.end_date||"",is_current:y.is_current||!1})};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:i?"Edit work history":"Add work history"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(ot,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:d(g),className:"flex flex-col flex-1 overflow-hidden",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Organization"}),c.jsx(Iv,{name:"company",control:p,render:({field:y})=>c.jsx(RCe,{value:y.value,onChange:y.onChange,companies:l,isLoading:a||n})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Job title"}),c.jsx("input",{...u("job_title"),className:"input",placeholder:"e.g., Software Engineer",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Description"}),c.jsx("textarea",{...u("description"),className:"input",rows:3,placeholder:"Job description, responsibilities, achievements...",disabled:n})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Start date"}),c.jsx("input",{type:"date",...u("start_date"),className:"input",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"End date"}),c.jsx("input",{type:"date",...u("end_date"),className:"input",disabled:n})]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"is_current",...u("is_current"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),c.jsx("label",{htmlFor:"is_current",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Currently works here"})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":i?"Save changes":"Add work history"})]})]})]})})}function ACe(t,e){return it({queryKey:["shares",t,e],queryFn:async()=>(await Ee.getPostShares(e,t)).data,enabled:!!e})}function DCe(){const t=rt();return Ke({mutationFn:async({postType:e,postId:r,userId:n,permission:s})=>(await Ee.sharePost(r,e,{user_id:n,permission:s})).data,onSuccess:(e,{postType:r,postId:n})=>{t.invalidateQueries({queryKey:["shares",r,n]})}})}function $Ce(){const t=rt();return Ke({mutationFn:async({postType:e,postId:r,userId:n})=>{await Ee.unsharePost(r,e,n)},onSuccess:(e,{postType:r,postId:n})=>{t.invalidateQueries({queryKey:["shares",r,n]})}})}function FCe(t){return it({queryKey:["users","search",t],queryFn:async()=>(await Ee.searchUsers(t)).data,enabled:(t==null?void 0:t.length)>=2})}function Qoe({isOpen:t,onClose:e,postType:r,postId:n,postTitle:s}){const[i,o]=C.useState(""),[a,l]=C.useState("view"),u=C.useRef(null),{data:d=[],isLoading:h}=ACe(r,n),{data:f=[],isLoading:p}=FCe(i),m=DCe(),g=$Ce();C.useEffect(()=>{t&&(o(""),setTimeout(()=>{var w;return(w=u.current)==null?void 0:w.focus()},100))},[t]);const y=f.filter(w=>!d.some(x=>x.user_id===w.id)),v=async w=>{await m.mutateAsync({postType:r,postId:n,userId:w.id,permission:a}),o("")},b=async w=>{await g.mutateAsync({postType:r,postId:n,userId:w})};return t?c.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:e}),c.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:c.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-lg shadow-xl",children:[c.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Share"}),c.jsx("p",{className:"text-sm text-gray-500 truncate max-w-xs",children:s})]}),c.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:c.jsx(ot,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"px-6 py-4",children:[c.jsxs("div",{className:"relative mb-4",children:[c.jsx(wl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),c.jsx("input",{ref:u,type:"text",value:i,onChange:w=>o(w.target.value),placeholder:"Search users by name or email...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Permission:"}),c.jsxs("select",{value:a,onChange:w=>l(w.target.value),className:"text-sm border border-gray-300 rounded-md px-2 py-1 focus:ring-primary-500 focus:border-primary-500",children:[c.jsx("option",{value:"view",children:"Can view"}),c.jsx("option",{value:"edit",children:"Can edit"})]})]}),i.length>=2&&c.jsx("div",{className:"mb-4",children:p?c.jsx("div",{className:"py-3 text-center text-sm text-gray-500",children:"Searching..."}):y.length===0?c.jsx("div",{className:"py-3 text-center text-sm text-gray-500",children:f.length===0?"No users found":"All matching users already have access"}):c.jsx("div",{className:"border border-gray-200 rounded-lg divide-y divide-gray-100",children:y.map(w=>c.jsxs("div",{className:"flex items-center gap-3 p-3 hover:bg-gray-50",children:[c.jsx("img",{src:w.avatar_url,alt:w.display_name,className:"w-8 h-8 rounded-full"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:w.display_name}),c.jsx("div",{className:"text-xs text-gray-500 truncate",children:w.email})]}),c.jsx("button",{onClick:()=>v(w),disabled:m.isPending,className:"p-2 text-primary-600 hover:bg-primary-50 rounded-full",children:c.jsx(yb,{className:"w-4 h-4"})})]},w.id))})}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Shared with (",d.length,")"]}),h?c.jsx("div",{className:"py-3 text-center text-sm text-gray-500",children:"Loading..."}):d.length===0?c.jsx("div",{className:"py-6 text-center text-sm text-gray-500",children:"Not shared with anyone yet"}):c.jsx("div",{className:"border border-gray-200 rounded-lg divide-y divide-gray-100",children:d.map(w=>c.jsxs("div",{className:"flex items-center gap-3 p-3",children:[c.jsx("img",{src:w.avatar_url,alt:w.display_name,className:"w-8 h-8 rounded-full"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:w.display_name}),c.jsxs("div",{className:"text-xs text-gray-500",children:["Can ",w.permission]})]}),c.jsx("button",{onClick:()=>b(w.user_id),disabled:g.isPending,className:"p-2 text-red-600 hover:bg-red-50 rounded-full",children:c.jsx(Nn,{className:"w-4 h-4"})})]},w.user_id))})]})]}),c.jsx("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end",children:c.jsx("button",{onClick:e,className:"btn-secondary",children:"Done"})})]})})]}):null}function Xn(t){return t?String(t).replace(/\\/g,"\\\\").replace(/;/g,"\\;").replace(/,/g,"\\,").replace(/\n/g,"\\n"):""}function qCe(t){return t?t.replace(/[^\d+]/g,""):""}function JF(t){if(!t)return"";const e=new Date(t);if(isNaN(e.getTime()))return"";const r=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${r}${n}${s}`}function LCe(t,e={}){if(!t||!Array.isArray(t))return{title:"",org:""};const r=t.find(s=>s.is_current);if(r){const s=r.company&&e[r.company]?e[r.company].name||e[r.company]:"";return{title:r.job_title||"",org:s}}const n=[...t].filter(s=>s.start_date).sort((s,i)=>new Date(i.start_date)-new Date(s.start_date));if(n.length>0){const s=n[0].company&&e[n[0].company]?e[n[0].company].name||e[n[0].company]:"";return{title:n[0].job_title||"",org:s}}return{title:"",org:""}}function BCe(t,e={}){if(!t)throw new Error("Person data is required");const{companyMap:r={},personDates:n=[]}=e,s=t.acf||{},i=[];i.push("BEGIN:VCARD"),i.push("VERSION:3.0");const o=s.first_name||"",a=s.last_name||"",l=t.name||`${o} ${a}`.trim()||"Unknown";i.push(`FN:${Xn(l)}`),i.push(`N:${Xn(a)};${Xn(o)};;;`),s.nickname&&i.push(`NICKNAME:${Xn(s.nickname)}`),s.contact_info&&Array.isArray(s.contact_info)&&s.contact_info.forEach(h=>{if(!h.contact_value)return;const f=Xn(h.contact_value),p=h.contact_label?Xn(h.contact_label):"";switch(h.contact_type){case"email":const m=p?`EMAIL;TYPE=INTERNET,${p.toUpperCase()}`:"EMAIL;TYPE=INTERNET";i.push(`${m}:${f}`);break;case"phone":case"mobile":const g=h.contact_type==="mobile"?"CELL":"VOICE",y=p?`TEL;TYPE=${g},${p.toUpperCase()}`:`TEL;TYPE=${g}`,v=qCe(h.contact_value);v&&i.push(`${y}:${v}`);break;case"website":case"linkedin":case"twitter":case"instagram":case"facebook":let b=h.contact_value;b.match(/^https?:\/\//i)||(b=`https://${b}`);const w=h.contact_type==="linkedin"?"PROFILE":"WORK",x=p?`URL;TYPE=${w},${p.toUpperCase()}`:`URL;TYPE=${w}`;i.push(`${x}:${Xn(b)}`);break}}),s.addresses&&Array.isArray(s.addresses)&&s.addresses.forEach(h=>{const f=h.address_label?`ADR;TYPE=${h.address_label.toUpperCase()}`:"ADR;TYPE=HOME",p=Xn(h.street||""),m=Xn(h.city||""),g=Xn(h.state||""),y=Xn(h.postal_code||""),v=Xn(h.country||"");(p||m||g||y||v)&&i.push(`${f}:;;${p};${m};${g};${y};${v}`)});const{title:u,org:d}=LCe(s.work_history,r);if(d&&i.push(`ORG:${Xn(d)}`),u&&i.push(`TITLE:${Xn(u)}`),n&&Array.isArray(n)){const h=n.find(f=>{const p=Array.isArray(f.date_type)?f.date_type[0]:f.date_type;return(p==null?void 0:p.toLowerCase())==="birthday"});if(h!=null&&h.date_value){const f=JF(h.date_value);f&&i.push(`BDAY:${f}`)}}if(t.thumbnail,t.modified){const h=JF(t.modified);h&&i.push(`REV:${h}T000000Z`)}return i.push("END:VCARD"),i.join(`\r
`)}function zCe(t,e={}){const{filename:r,...n}=e,s=BCe(t,n),i=new Blob([s],{type:"text/vcard;charset=utf-8"}),o=URL.createObjectURL(i),a=document.createElement("a");a.href=o,a.download=r||`${t.name||"contact"}.vcf`.replace(/[^a-z0-9.-]/gi,"_"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)}const WCe=({className:t})=>c.jsx("svg",{className:t,viewBox:"0 0 382 382",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",children:c.jsx("path",{d:`M347.445,0H34.555C15.471,0,0,15.471,0,34.555v312.889C0,366.529,15.471,382,34.555,382h312.889
      C366.529,382,382,366.529,382,347.444V34.555C382,15.471,366.529,0,347.445,0z M118.207,329.844c0,5.554-4.502,10.056-10.056,10.056
      H65.345c-5.554,0-10.056-4.502-10.056-10.056V150.403c0-5.554,4.502-10.056,10.056-10.056h42.806
      c5.554,0,10.056,4.502,10.056,10.056V329.844z M86.748,123.432c-22.459,0-40.666-18.207-40.666-40.666S64.289,42.1,86.748,42.1
      s40.666,18.207,40.666,40.666S109.208,123.432,86.748,123.432z M341.91,330.654c0,5.106-4.14,9.246-9.246,9.246H286.73
      c-5.106,0-9.246-4.14-9.246-9.246v-84.168c0-12.556,3.683-55.021-32.813-55.021c-28.309,0-34.051,29.066-35.204,42.11v97.079
      c0,5.106-4.139,9.246-9.246,9.246h-44.426c-5.106,0-9.246-4.14-9.246-9.246V149.593c0-5.106,4.14-9.246,9.246-9.246h44.426
      c5.106,0,9.246,4.14,9.246,9.246v15.655c10.497-15.753,26.097-27.912,59.312-27.912c73.552,0,73.131,68.716,73.131,106.472
      L341.91,330.654L341.91,330.654z`})});function wo(t){if(!t)return null;switch(t){case"male":return"";case"female":return"";case"non_binary":case"other":case"prefer_not_to_say":return"";default:return null}}function VCe(){var O$,P$,I$,R$,M$,A$,D$,$$,F$,q$,L$,B$,z$,W$,V$,U$,H$,K$,G$,Y$,Q$,X$;const{id:t}=Ih(),e=Gn(),r=rt(),{data:n,isLoading:s,error:i}=hne(t),{data:o}=$ge(t),{data:a}=Fge(t),l=Lge(),u=Wge(),d=Gge(),h=qge(),f=zge(),p=gA(),m=Vge(),g=pne(),y=Hge(),v=Uge(),b=Kge(),{data:w,isLoading:x}=hu(),{data:S=[]}=it({queryKey:["investments",t],queryFn:async()=>(await Ee.getInvestments(t)).data,enabled:!!t}),[E,N]=C.useState("profile"),[_,k]=C.useState(!1),[j,T]=C.useState(""),[P,O]=C.useState(!1),D=C.useRef(null),[F,$]=C.useState(!1),[q,M]=C.useState(!1),[z,Y]=C.useState(!1),[H,me]=C.useState(!1),[G,oe]=C.useState(!1),[Ie,ce]=C.useState(!1),[De,Oe]=C.useState(!1),[pt,wt]=C.useState(!1),[St,fr]=C.useState(!1),[Tt,Sr]=C.useState(!1),[nn,zr]=C.useState(!1),[lt,pr]=C.useState(!1),[Gt,Er]=C.useState(!1),[A,L]=C.useState(!1),[V,le]=C.useState(!1),[Z,ee]=C.useState(!1),[be,Be]=C.useState(null),[Ue,Ot]=C.useState(null),[Se,re]=C.useState(null),[ue,ge]=C.useState(null),[je,B]=C.useState(null),[fe,xe]=C.useState(null),[Qe,bs]=C.useState(null),[Pi,As]=C.useState(null),[Wl,Ii]=C.useState(null),[yn,Ri]=C.useState(null),[Au,lo]=C.useState(!1),[Du,co]=C.useState(null),{data:sn}=it({queryKey:["person-labels"],queryFn:async()=>(await Je.getPersonLabels()).data}),$u=sn||[],Fu=(n==null?void 0:n.labels)||[],jg=((R$=(I$=(P$=(O$=n==null?void 0:n._embedded)==null?void 0:O$["wp:term"])==null?void 0:P$.flat())==null?void 0:I$.filter(I=>(I==null?void 0:I.taxonomy)==="person_label"))==null?void 0:R$.map(I=>I.id))||[],ff=$u.filter(I=>!Fu.includes(I.name));Dh((n==null?void 0:n.name)||((M$=n==null?void 0:n.title)==null?void 0:M$.rendered)||(n==null?void 0:n.title)||"Person");const _e=a==null?void 0:a.find(I=>{const K=Array.isArray(I.date_type)?I.date_type[0]:I.date_type;return(K==null?void 0:K.toLowerCase())==="birthday"}),$e=_e!=null&&_e.date_value?new Date(_e.date_value):null,He=(_e==null?void 0:_e.year_unknown)??!1,bt=a==null?void 0:a.find(I=>{const K=Array.isArray(I.date_type)?I.date_type[0]:I.date_type;return(K==null?void 0:K.toLowerCase())==="died"}),vn=bt!=null&&bt.date_value?new Date(bt.date_value):null,Sx=(bt==null?void 0:bt.year_unknown)??!1,uo=!!vn,ho=$e&&!He?g1(uo?vn:new Date,$e):null,pf=a?[...a].sort((I,K)=>{const Q=I.date_value?new Date(I.date_value):new Date(0),Ne=K.date_value?new Date(K.date_value):new Date(0);return Q-Ne}):[],Ex=async()=>{if(window.confirm("Are you sure you want to delete this person?"))try{await l.mutateAsync(t),e("/people")}catch{alert("Failed to delete person. Please try again.")}},_x=I=>{if(!I)return"";let K=I.replace(/[\u200B-\u200D\uFEFF\u200E\u200F\u202A-\u202E]/g,"");const Q=K.startsWith("+");return K=K.replace(/\D/g,""),Q?`+${K}`:K},Yce=async I=>{zr(!0);try{const K=go(n.acf,{contact_info:I});await h.mutateAsync({id:t,data:{acf:K}}),me(!1)}catch{alert("Failed to save contacts. Please try again.")}finally{zr(!1)}},Qce=async I=>{pr(!0);try{Se?await Je.updateDate(Se.id,{title:I.title,date_type:I.date_type,acf:{date_value:I.date_value,related_people:I.related_people,is_recurring:I.is_recurring,year_unknown:I.year_unknown}}):await Je.createDate({title:I.title,status:"publish",date_type:I.date_type,acf:{date_value:I.date_value,related_people:I.related_people,is_recurring:I.is_recurring,year_unknown:I.year_unknown,_visibility:"private"}}),r.invalidateQueries({queryKey:["person-dates",t]}),r.invalidateQueries({queryKey:["reminders"]}),oe(!1),re(null)}catch{alert("Failed to save date. Please try again.")}finally{pr(!1)}},Xce=async I=>{var K;Er(!0);try{const Q=[...((K=n.acf)==null?void 0:K.relationships)||[]],Ne={related_person:I.related_person||null,relationship_type:I.relationship_type||null,relationship_label:I.relationship_label||""};je!==null?Q[je]=Ne:Q.push(Ne);const Fe=go(n.acf,{relationships:Q});await h.mutateAsync({id:t,data:{acf:Fe}}),r.invalidateQueries({queryKey:["person",t]}),ce(!1),ge(null),B(null)}catch{alert("Failed to save relationship. Please try again.")}finally{Er(!1)}},Jce=async I=>{var K;L(!0);try{const Q=[...((K=n.acf)==null?void 0:K.addresses)||[]],Ne={address_label:I.address_label||"",street:I.street||"",postal_code:I.postal_code||"",city:I.city||"",state:I.state||"",country:I.country||""};Qe!==null?Q[Qe]=Ne:Q.push(Ne);const Fe=go(n.acf,{addresses:Q});await h.mutateAsync({id:t,data:{acf:Fe}}),Oe(!1),xe(null),bs(null)}catch{alert("Failed to save address. Please try again.")}finally{L(!1)}},Zce=async I=>{var K;le(!0);try{const Q=[...((K=n.acf)==null?void 0:K.work_history)||[]],Ne={company:I.company||null,job_title:I.job_title||"",description:I.description||"",start_date:I.start_date||"",end_date:I.end_date||"",is_current:I.is_current||!1};Wl!==null?Q[Wl]=Ne:Q.push(Ne);const Fe=go(n.acf,{work_history:Q});await h.mutateAsync({id:t,data:{acf:Fe}}),wt(!1),As(null),Ii(null)}catch{alert("Failed to save work history. Please try again.")}finally{le(!1)}},eue=async I=>{ee(!0);try{const K=go(n.acf,{first_name:I.first_name,last_name:I.last_name,nickname:I.nickname,gender:I.gender||null,pronouns:I.pronouns||null,how_we_met:I.how_we_met,is_favorite:I.is_favorite,_visibility:I.visibility||"private",_assigned_workspaces:I.assigned_workspaces||[]});await h.mutateAsync({id:t,data:{title:`${I.first_name} ${I.last_name}`.trim(),acf:K}}),fr(!1)}catch{alert("Failed to save person. Please try again.")}finally{ee(!1)}},tue=async I=>{var Ne;if(!window.confirm("Are you sure you want to delete this address?"))return;const K=[...((Ne=n.acf)==null?void 0:Ne.addresses)||[]];K.splice(I,1);const Q=go(n.acf,{addresses:K});await h.mutateAsync({id:t,data:{acf:Q}})},rue=async I=>{var Qn,po,mf,Rg,J$,Z$;if(!window.confirm("Are you sure you want to delete this relationship?"))return;const K=(po=(Qn=n.acf)==null?void 0:Qn.relationships)==null?void 0:po[I];if(!K)return;const Q=K.related_person,Ne=K.relationship_type;let Fe=!0;Q&&Ne&&(Fe=window.confirm("Do you also want to delete the inverse relationship from the other person?"));let ct=null;if(!Fe&&Q&&Ne)try{const[qu,Mg]=await Promise.all([Je.getPerson(Q,{_embed:!0}),Je.getRelationshipTypes()]),jx={};Mg.data.forEach(gf=>{jx[gf.id]=gf});const Ds=jx[Ne],Ul=(mf=Ds==null?void 0:Ds.acf)==null?void 0:mf.inverse_relationship_type;if(Ul){const yf=(((Rg=qu.data.acf)==null?void 0:Rg.relationships)||[]).find(mo=>{var e4,t4;const Nue=typeof mo.related_person=="object"?(e4=mo.related_person)==null?void 0:e4.ID:mo.related_person,Cue=typeof mo.relationship_type=="object"?(t4=mo.relationship_type)==null?void 0:t4.term_id:mo.relationship_type;return Nue===parseInt(t)&&Cue===Ul});yf&&(ct={related_person:parseInt(t),relationship_type:Ul,relationship_label:yf.relationship_label||""})}}catch{}const vt=[...((J$=n.acf)==null?void 0:J$.relationships)||[]];vt.splice(I,1);const fo=go(n.acf,{relationships:vt});if(await h.mutateAsync({id:t,data:{acf:fo}}),!Fe&&ct&&Q){await new Promise(qu=>setTimeout(qu,500));try{const qu=await Je.getPerson(Q,{_embed:!0}),Mg=((Z$=qu.data.acf)==null?void 0:Z$.relationships)||[];if(!Mg.some(Ds=>{var yf,mo;const Ul=typeof Ds.related_person=="object"?(yf=Ds.related_person)==null?void 0:yf.ID:Ds.related_person,gf=typeof Ds.relationship_type=="object"?(mo=Ds.relationship_type)==null?void 0:mo.term_id:Ds.relationship_type;return Ul===ct.related_person&&gf===ct.relationship_type})){const Ds=[...Mg,ct],Ul=go(qu.data.acf,{relationships:Ds});await Je.updatePerson(Q,{acf:Ul})}}catch{}}r.invalidateQueries({queryKey:["person",t]}),Q&&r.invalidateQueries({queryKey:["person",Q]}),r.invalidateQueries({queryKey:["people"]})},nue=async I=>{window.confirm("Are you sure you want to delete this important date?")&&await d.mutateAsync({dateId:I,personId:t})},sue=async I=>{window.confirm("Are you sure you want to delete this note?")&&await u.mutateAsync({noteId:I,personId:t})},iue=async(I,K="private")=>{try{await f.mutateAsync({personId:t,content:I,visibility:K}),$(!1)}catch{alert("Failed to create note. Please try again.")}},oue=async I=>{try{Ue?(await m.mutateAsync({activityId:Ue.id,data:I,personId:t}),Ot(null)):(await p.mutateAsync({personId:t,data:I}),yn&&(await y.mutateAsync({todoId:yn.id,data:{content:yn.content,due_date:yn.due_date,is_completed:!0},personId:t}),Ri(null),co(null))),M(!1)}catch{alert("Failed to save activity. Please try again.")}},aue=async I=>{try{await g.mutateAsync({personId:t,data:I}),Y(!1),Be(null)}catch{alert("Failed to create todo. Please try again.")}},lue=async I=>{if(be)try{await y.mutateAsync({todoId:be.id,data:I,personId:t}),Y(!1),Be(null)}catch{alert("Failed to update todo. Please try again.")}},S$=async I=>{if(!I.is_completed){Ri(I),lo(!0);return}try{await y.mutateAsync({todoId:I.id,data:{content:I.content,due_date:I.due_date,is_completed:!1},personId:t})}catch{alert("Failed to update todo. Please try again.")}},cue=async()=>{if(yn)try{await y.mutateAsync({todoId:yn.id,data:{content:yn.content,due_date:yn.due_date,is_completed:!0},personId:t}),lo(!1),Ri(null)}catch{alert("Failed to complete todo. Please try again.")}},uue=()=>{if(!yn)return;const I=new Date().toISOString().split("T")[0];co({content:yn.content,activity_date:I,activity_type:"note",participants:[]}),lo(!1),M(!0)},due=async I=>{window.confirm("Are you sure you want to delete this activity?")&&await v.mutateAsync({activityId:I,personId:t})},E$=async I=>{window.confirm("Are you sure you want to delete this todo?")&&await b.mutateAsync({todoId:I,personId:t})},hue=I=>{I.type==="todo"?(Be(I),Y(!0)):I.type==="activity"&&(Ot(I),M(!0))},fue=I=>{I.type==="note"?sue(I.id):I.type==="activity"?due(I.id):I.type==="todo"&&E$(I.id)},pue=async I=>{var Ne;if(!window.confirm("Are you sure you want to delete this work history item?"))return;const K=[...((Ne=n.acf)==null?void 0:Ne.work_history)||[]];K.splice(I,1);const Q=go(n.acf,{work_history:K});await h.mutateAsync({id:t,data:{acf:Q}})},mue=async I=>{var Ne,Fe,ct;const K=(ct=(Fe=(Ne=n==null?void 0:n._embedded)==null?void 0:Ne["wp:term"])==null?void 0:Fe.flat())==null?void 0:ct.find(vt=>(vt==null?void 0:vt.taxonomy)==="person_label"&&(vt==null?void 0:vt.name)===I);if(!K)return;const Q=jg.filter(vt=>vt!==K.id);await h.mutateAsync({id:t,data:{person_label:Q}})},gue=async()=>{if(!j)return;const I=$u.find(Q=>Q.id.toString()===j);if(!I)return;const K=[...jg,I.id];await h.mutateAsync({id:t,data:{person_label:K}}),T(""),k(!1)},yue=async I=>{var Q;const K=(Q=I.target.files)==null?void 0:Q[0];if(K){if(!K.type.startsWith("image/")){alert("Please select an image file");return}if(K.size>5*1024*1024){alert("Image size must be less than 5MB");return}O(!0);try{await Ee.uploadPersonPhoto(t,K),r.invalidateQueries({queryKey:["person",t]}),r.invalidateQueries({queryKey:["people"]})}catch{alert("Failed to upload photo. Please try again.")}finally{O(!1),D.current&&(D.current.value="")}}},vue=()=>{if(n)try{zCe(n,{companyMap:Cx,personDates:a||[]})}catch{alert("Failed to export vCard. Please try again.")}},_$=((D$=(A$=n==null?void 0:n.acf)==null?void 0:A$.work_history)==null?void 0:D$.map(I=>I.company).filter(Boolean))||[],bue=qy({queries:_$.map(I=>({queryKey:["company",I],queryFn:async()=>(await Je.getCompany(I,{_embed:!0})).data,enabled:!!I}))}),xue=C.useMemo(()=>{var I;return(I=n==null?void 0:n.acf)!=null&&I.work_history?n.acf.work_history.filter(K=>!K.end_date&&K.company).map(K=>K.company):[]},[($$=n==null?void 0:n.acf)==null?void 0:$$.work_history]),N$=qy({queries:xue.map(I=>({queryKey:["company-people",I],queryFn:async()=>{const K=await Ee.getCompanyPeople(I);return{companyId:I,...K.data}},enabled:!!I}))}),Tg=C.useMemo(()=>{const I=new Map;return N$.forEach(K=>{var Q;(Q=K.data)!=null&&Q.current&&K.data.current.forEach(Ne=>{if(Ne.id!==parseInt(t))if(I.has(Ne.id)){const Fe=I.get(Ne.id);Fe.companies.includes(K.data.companyId)||Fe.companies.push(K.data.companyId)}else I.set(Ne.id,{...Ne,companies:[K.data.companyId]})})}),Array.from(I.values()).sort((K,Q)=>(K.name||"").localeCompare(Q.name||""))},[N$,t]),Vl=((q$=(F$=n==null?void 0:n.acf)==null?void 0:F$.relationships)==null?void 0:q$.map(I=>I.related_person).filter(Boolean))||[],Og=qy({queries:Vl.map(I=>({queryKey:["person-dates",I],queryFn:async()=>(await Ee.getPersonDates(I)).data,enabled:!!I}))}),Nx=C.useMemo(()=>{const I={};return Og.forEach((K,Q)=>{if(K.data&&Vl[Q]){const Ne=Vl[Q],Fe=K.data.find(ct=>{const vt=Array.isArray(ct.date_type)?ct.date_type[0]:ct.date_type;return(vt==null?void 0:vt.toLowerCase())==="birthday"});if(Fe!=null&&Fe.date_value){const ct=new Date(Fe.date_value);I[Ne]=g1(new Date,ct)}else I[Ne]=-1}}),I},[Og,Vl]),wue=C.useMemo(()=>{const I={};return Og.forEach((K,Q)=>{if(K.data&&Vl[Q]){const Ne=Vl[Q],Fe=K.data.some(ct=>{const vt=Array.isArray(ct.date_type)?ct.date_type[0]:ct.date_type;return(vt==null?void 0:vt.toLowerCase())==="died"});I[Ne]=Fe}}),I},[Og,Vl]),Pg=C.useMemo(()=>{var I;return(I=n==null?void 0:n.acf)!=null&&I.relationships?[...n.acf.relationships].sort((K,Q)=>{const Ne=Nx[K.related_person]??-1,Fe=Nx[Q.related_person]??-1;return Ne===-1&&Fe===-1?0:Ne===-1?1:Fe===-1?-1:Fe-Ne}):[]},[(L$=n==null?void 0:n.acf)==null?void 0:L$.relationships,Nx]),Cx={};bue.forEach((I,K)=>{var Q,Ne,Fe,ct,vt,fo,Qn,po,mf;if(I.data){const Rg=_$[K];Cx[Rg]={name:ar(I.data),logo:((Fe=(Ne=(Q=I.data._embedded)==null?void 0:Q["wp:featuredmedia"])==null?void 0:Ne[0])==null?void 0:Fe.source_url)||((mf=(po=(Qn=(fo=(vt=(ct=I.data._embedded)==null?void 0:ct["wp:featuredmedia"])==null?void 0:vt[0])==null?void 0:fo.media_details)==null?void 0:Qn.sizes)==null?void 0:po.thumbnail)==null?void 0:mf.source_url)||null}}});const Ig=C.useMemo(()=>{var I;return(I=n==null?void 0:n.acf)!=null&&I.work_history?[...n.acf.work_history].map((K,Q)=>({...K,originalIndex:Q})).sort((K,Q)=>{if(K.is_current&&!Q.is_current)return-1;if(!K.is_current&&Q.is_current)return 1;const Ne=K.start_date?new Date(K.start_date):new Date(0);return(Q.start_date?new Date(Q.start_date):new Date(0))-Ne}):[]},[(B$=n==null?void 0:n.acf)==null?void 0:B$.work_history]),C$=C.useMemo(()=>o?o.filter(K=>K.type==="todo").sort((K,Q)=>{if(K.is_completed&&!Q.is_completed)return 1;if(!K.is_completed&&Q.is_completed)return-1;if(!K.is_completed&&!Q.is_completed){if(K.due_date&&Q.due_date)return new Date(K.due_date)-new Date(Q.due_date);if(K.due_date&&!Q.due_date)return-1;if(!K.due_date&&Q.due_date)return 1}return new Date(Q.created)-new Date(K.created)}):[],[o]);if(C.useEffect(()=>{(n==null?void 0:n.status)==="trash"&&e("/people",{replace:!0})},[n,e]),s)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(i||!n)return c.jsxs("div",{className:"card p-6 text-center",children:[c.jsx("p",{className:"text-red-600",children:"Failed to load person."}),c.jsx(ze,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]});if(n.status==="trash")return null;const gt=n.acf||{},kx=["facebook","linkedin","instagram","twitter","bluesky","threads","website"],Sue=((z$=gt.contact_info)==null?void 0:z$.filter(I=>kx.includes(I.contact_type)))||[],k$=(W$=gt.contact_info)==null?void 0:W$.find(I=>I.contact_type==="mobile"),j$={linkedin:1,twitter:2,bluesky:3,threads:4,instagram:5,facebook:6,whatsapp:7,website:8},T$=(()=>{const I=[...Sue];return k$&&I.push({contact_type:"whatsapp",contact_value:`https://wa.me/${k$.contact_value.replace(/[^0-9+]/g,"")}`}),I.sort((K,Q)=>{const Ne=j$[K.contact_type]||99,Fe=j$[Q.contact_type]||99;return Ne-Fe})})(),Eue=I=>{switch(I){case"facebook":return U_e;case"linkedin":return WCe;case"instagram":return K_e;case"twitter":return tNe;case"bluesky":return W_e;case"threads":return X_e;case"whatsapp":return Z_e;case"website":return ap;default:return ap}},_ue=I=>{switch(I){case"facebook":return"text-[#1877F2]";case"linkedin":return"text-[#0077B7]";case"instagram":return"text-[#E4405F]";case"twitter":return"text-[#1DA1F2]";case"bluesky":return"text-[#00A8E8]";case"threads":return"text-[#000000]";case"whatsapp":return"text-[#25D366]";case"website":return"text-gray-600";default:return"text-gray-600"}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs(ze,{to:"/people",className:"flex items-center text-gray-600 hover:text-gray-900",children:[c.jsx(Ah,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Back to people"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:vue,className:"btn-secondary",children:[c.jsx(GI,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Export vCard"})]}),c.jsxs("button",{onClick:()=>Sr(!0),className:"btn-secondary",title:"Share",children:[c.jsx(fA,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Share"})]}),c.jsxs("button",{onClick:()=>fr(!0),className:"btn-secondary",children:[c.jsx(lne,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Edit"})]}),c.jsxs("button",{onClick:Ex,className:"btn-danger",children:[c.jsx(Nn,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Delete"})]})]})]}),c.jsx("div",{className:"card p-6",children:c.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[c.jsxs("div",{className:"relative group",children:[n.thumbnail?c.jsx("img",{src:n.thumbnail,alt:n.name,className:"w-28 h-28 rounded-full object-cover"}):c.jsx("div",{className:"w-28 h-28 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-3xl font-medium text-gray-500",children:((V$=n.first_name)==null?void 0:V$[0])||"?"})}),c.jsx("div",{className:"absolute inset-0 rounded-full bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var I;return(I=D.current)==null?void 0:I.click()},children:P?c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):c.jsx(Qre,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),c.jsx("input",{ref:D,type:"file",accept:"image/*",onChange:yue,className:"hidden",disabled:P})]}),c.jsxs("div",{className:"flex-1 space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("h1",{className:"text-2xl font-bold",children:[n.name,uo&&c.jsx("span",{className:"ml-1 text-gray-500",children:""})]}),n.is_favorite&&c.jsx(Hc,{className:"w-5 h-5 text-yellow-400 fill-current"})]}),gt.nickname&&c.jsxs("p",{className:"text-gray-500",children:['"',gt.nickname,'"']}),uo&&vn&&c.jsxs("p",{className:"text-gray-500 text-sm inline-flex items-center flex-wrap",children:[wo(gt.gender)&&c.jsx("span",{children:wo(gt.gender)}),wo(gt.gender)&&gt.pronouns&&c.jsx("span",{children:""}),gt.pronouns&&c.jsx("span",{children:gt.pronouns}),(wo(gt.gender)||gt.pronouns)&&c.jsx("span",{children:""}),c.jsxs("span",{children:["Died ",Dn(vn,Sx?"MMMM d":"MMMM d, yyyy"),ho!==null&&` at age ${ho}`]})]}),!uo&&(wo(gt.gender)||gt.pronouns||ho!==null)&&c.jsxs("p",{className:"text-gray-500 text-sm inline-flex items-center flex-wrap",children:[wo(gt.gender)&&c.jsx("span",{children:wo(gt.gender)}),wo(gt.gender)&&gt.pronouns&&c.jsx("span",{children:""}),gt.pronouns&&c.jsx("span",{children:gt.pronouns}),(wo(gt.gender)||gt.pronouns)&&ho!==null&&c.jsx("span",{children:""}),ho!==null&&c.jsxs("span",{children:[ho," years old"]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[n.labels&&n.labels.length>0&&n.labels.map((I,K)=>c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 group/label",children:[I,c.jsx("button",{onClick:()=>mue(I),className:"opacity-0 group-hover/label:opacity-100 transition-opacity hover:bg-gray-200 rounded-full p-0.5",title:"Remove label",children:c.jsx(ot,{className:"w-3 h-3"})})]},K)),_?c.jsxs("div",{className:"inline-flex items-center gap-2",children:[c.jsxs("select",{value:j,onChange:I=>T(I.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1",autoFocus:!0,disabled:ff.length===0,children:[c.jsx("option",{value:"",children:"Select a label..."}),ff.map(I=>c.jsx("option",{value:I.id,children:I.name},I.id))]}),c.jsx("button",{onClick:gue,disabled:!j,className:"text-xs px-2 py-1 bg-primary-600 text-white rounded hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"}),c.jsx("button",{onClick:()=>{k(!1),T("")},className:"text-xs px-2 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Cancel"})]}):ff.length>0&&c.jsxs("button",{onClick:()=>k(!0),className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",children:[c.jsx(dr,{className:"w-3 h-3 mr-1"}),"Add label"]})]}),T$.length>0&&c.jsx("div",{className:"flex items-center gap-3 mt-4",children:T$.map((I,K)=>{const Q=Eue(I.contact_type),Ne=_ue(I.contact_type);let Fe=I.contact_value;return Fe.match(/^https?:\/\//i)||(Fe=`https://${Fe}`),c.jsx("a",{href:Fe,target:"_blank",rel:"noopener noreferrer",className:`flex-shrink-0 hover:opacity-80 transition-opacity ${Ne}`,title:`${I.contact_type.charAt(0).toUpperCase()+I.contact_type.slice(1)}: ${I.contact_value}`,children:c.jsx(Q,{className:"w-5 h-5"})},K)})})]})]})]})}),c.jsx("div",{className:"border-b border-gray-200",children:c.jsxs("nav",{className:"flex gap-8",children:[c.jsx("button",{onClick:()=>N("profile"),className:`pb-3 text-sm font-medium border-b-2 transition-colors ${E==="profile"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Profile"}),c.jsx("button",{onClick:()=>N("timeline"),className:`pb-3 text-sm font-medium border-b-2 transition-colors ${E==="timeline"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Timeline"}),c.jsx("button",{onClick:()=>N("work"),className:`pb-3 text-sm font-medium border-b-2 transition-colors ${E==="work"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Work"})]})}),c.jsxs("div",{className:"space-y-6",children:[E==="profile"&&c.jsxs("div",{className:"columns-1 md:columns-2 gap-6",children:[!uo&&c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"font-semibold",children:"Contact information"}),c.jsxs("button",{onClick:()=>me(!0),className:"btn-secondary text-sm",children:[c.jsx(_a,{className:"w-4 h-4 md:mr-1"}),c.jsx("span",{className:"hidden md:inline",children:"Edit"})]})]}),((U$=gt.contact_info)==null?void 0:U$.filter(I=>!kx.includes(I.contact_type)).length)>0?c.jsx("div",{className:"space-y-2",children:(()=>{const I={email:1,phone:2,mobile:2,slack:3,calendar:4,other:5};return gt.contact_info.filter(Q=>!kx.includes(Q.contact_type)).map((Q,Ne)=>({...Q,originalIndex:Ne})).sort((Q,Ne)=>{const Fe=I[Q.contact_type]||99,ct=I[Ne.contact_type]||99;return Fe!==ct?Fe-ct:Q.originalIndex-Ne.originalIndex}).map(Q=>{const Ne=Q.contact_type==="email"?mb:Q.contact_type==="phone"||Q.contact_type==="mobile"?dA:Q.contact_type==="slack"?Y_e:Q.contact_type==="calendar"?Ji:ap,Fe=Q.contact_type==="email",ct=Q.contact_type==="phone"||Q.contact_type==="mobile",vt=Q.contact_type==="slack",fo=Q.contact_type==="calendar";let Qn=null,po=null;return Fe?Qn=`mailto:${Q.contact_value}`:ct?Qn=`tel:${_x(Q.contact_value)}`:(vt||fo)&&(Qn=Q.contact_value,po="_blank"),c.jsx("div",{children:c.jsxs("div",{className:"flex items-center rounded-md -mx-2 px-2 py-1.5",children:[c.jsx(Ne,{className:"w-4 h-4 text-gray-400 mr-3 flex-shrink-0"}),c.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[c.jsxs("span",{className:"text-sm text-gray-500",children:[Q.contact_label||Q.contact_type,": "]}),Qn?c.jsx("a",{href:Qn,target:po||void 0,rel:po==="_blank"?"noopener noreferrer":void 0,className:"text-primary-600 hover:text-primary-700 hover:underline",children:Q.contact_value}):c.jsx("span",{children:Q.contact_value})]})]})},Q.originalIndex)})})()}):c.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No contact information yet. ",c.jsx("button",{onClick:()=>me(!0),className:"text-primary-600 hover:underline",children:"Add some"})]})]}),c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"font-semibold",children:"Important dates"}),c.jsx("button",{onClick:()=>{re(null),oe(!0)},className:"btn-secondary text-sm",title:"Add important date",children:c.jsx(dr,{className:"w-4 h-4"})})]}),pf.length>0?c.jsx("div",{className:"space-y-3",children:pf.map(I=>{const K=Array.isArray(I.date_type)?I.date_type[0]:I.date_type,Q=(K==null?void 0:K.toLowerCase())||"",Ne=Q.includes("died"),Fe=Q.includes("wedding")||Q.includes("marriage")?yge:Q.includes("birthday")?gge:Ji,ct=I.year_unknown?"MMMM d":"MMMM d, yyyy";return c.jsxs("div",{className:"flex items-start group",children:[c.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center mr-3",children:Ne?c.jsx("span",{className:"text-gray-500 text-lg font-semibold",children:""}):c.jsx(Fe,{className:"w-4 h-4 text-gray-500"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium",children:I.title}),c.jsx("p",{className:"text-xs text-gray-500",children:I.date_value&&Dn(new Date(I.date_value),ct)}),K&&c.jsx("p",{className:"text-xs text-gray-400 capitalize",children:K})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>{re(I),oe(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit date",children:c.jsx(_a,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),c.jsx("button",{onClick:()=>nue(I.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete date",children:c.jsx(Nn,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},I.id)})}):c.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No important dates yet. ",c.jsx("button",{onClick:()=>{re(null),oe(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]}),!uo&&c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"font-semibold",children:"Addresses"}),c.jsx("button",{onClick:()=>{xe(null),bs(null),Oe(!0)},className:"btn-secondary text-sm",title:"Add address",children:c.jsx(dr,{className:"w-4 h-4"})})]}),((H$=gt.addresses)==null?void 0:H$.length)>0?c.jsx("div",{className:"space-y-3",children:gt.addresses.map((I,K)=>{const Q=[I.street,[I.city,I.state,I.postal_code].filter(Boolean).join(", "),I.country].filter(Boolean),Ne=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(Q.join(", "))}`;return c.jsxs("div",{className:"flex items-start group",children:[c.jsx(_ge,{className:"w-4 h-4 text-gray-400 mt-1 mr-3 flex-shrink-0"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[I.address_label&&c.jsx("p",{className:"text-xs text-gray-500 mb-1",children:I.address_label}),c.jsx("a",{href:Ne,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-700 hover:underline text-sm",children:Q.map((Fe,ct)=>c.jsx("span",{className:"block",children:Fe},ct))})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[c.jsx("button",{onClick:()=>{xe(I),bs(K),Oe(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit address",children:c.jsx(_a,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),c.jsx("button",{onClick:()=>tue(K),className:"p-1 hover:bg-red-50 rounded",title:"Delete address",children:c.jsx(Nn,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},K)})}):c.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No addresses yet. ",c.jsx("button",{onClick:()=>{xe(null),bs(null),Oe(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]}),(gt.how_we_met||gt.met_date)&&c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsx("h2",{className:"font-semibold mb-3",children:"How we met"}),gt.met_date&&c.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[c.jsx(Ji,{className:"w-4 h-4 inline mr-1"}),Dn(new Date(gt.met_date),"MMMM d, yyyy")]}),gt.how_we_met&&c.jsx("p",{className:"text-sm",children:gt.how_we_met})]}),c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h2",{className:"font-semibold",children:"Relationships"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(ze,{to:`/people/${t}/family-tree`,className:"btn-secondary text-sm",children:"View family tree"}),c.jsx("button",{onClick:()=>{ge(null),B(null),ce(!0)},className:"btn-secondary text-sm",title:"Add relationship",children:c.jsx(dr,{className:"w-4 h-4"})})]})]}),(Pg==null?void 0:Pg.length)>0?c.jsx("div",{className:"space-y-2",children:Pg.map((I,K)=>{var Ne,Fe,ct;const Q=((Fe=(Ne=n==null?void 0:n.acf)==null?void 0:Ne.relationships)==null?void 0:Fe.findIndex(vt=>vt.related_person===I.related_person&&vt.relationship_type===I.relationship_type))??K;return c.jsxs("div",{className:"flex items-center p-2 rounded hover:bg-gray-50 group",children:[c.jsxs(ze,{to:`/people/${I.related_person}`,className:"flex items-center flex-1 min-w-0",children:[I.person_thumbnail?c.jsx("img",{src:I.person_thumbnail,alt:qn(I.person_name)||"",className:"w-8 h-8 rounded-full object-cover mr-2"}):c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full mr-2 flex items-center justify-center",children:c.jsx("span",{className:"text-xs font-medium text-gray-500",children:((ct=qn(I.person_name))==null?void 0:ct[0])||"?"})}),c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm font-medium",children:[qn(I.person_name)||`Person #${I.related_person}`,wue[I.related_person]&&c.jsx("span",{className:"text-gray-400 ml-1",title:"Deceased",children:""})]}),c.jsx("p",{className:"text-xs text-gray-500",children:qn(I.relationship_name||I.relationship_label)})]})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[c.jsx("button",{onClick:()=>{var fo,Qn;const vt=(Qn=(fo=n==null?void 0:n.acf)==null?void 0:fo.relationships)==null?void 0:Qn[Q];ge(vt),B(Q),ce(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit relationship",children:c.jsx(_a,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),c.jsx("button",{onClick:()=>rue(Q),className:"p-1 hover:bg-red-50 rounded",title:"Delete relationship",children:c.jsx(Nn,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},K)})}):c.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No relationships yet. ",c.jsx("button",{onClick:()=>{ge(null),B(null),ce(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]})]}),E==="timeline"&&c.jsxs("div",{className:"columns-1 md:columns-2 gap-6",children:[c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h2",{className:"font-semibold",children:"Todos"}),c.jsx("button",{onClick:()=>{Be(null),Y(!0)},className:"btn-secondary text-sm",title:"Add todo",children:c.jsx(dr,{className:"w-4 h-4"})})]}),C$.length>0?c.jsx("div",{className:"space-y-2",children:C$.map(I=>{const K=Lm(I);return c.jsxs("div",{className:"flex items-start p-2 rounded hover:bg-gray-50 group",children:[c.jsx("button",{onClick:()=>S$(I),className:"mt-0.5 mr-2 flex-shrink-0",title:I.is_completed?"Mark as incomplete":"Mark as complete",children:I.is_completed?c.jsx(HI,{className:"w-5 h-5 text-primary-600"}):c.jsx(Sl,{className:`w-5 h-5 ${K?"text-red-600":"text-gray-400"}`})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:`text-sm ${I.is_completed?"line-through text-gray-400":K?"text-red-600":""}`,children:I.content}),I.due_date&&c.jsxs("p",{className:`text-xs mt-0.5 ${K&&!I.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",Dn(new Date(I.due_date),"MMM d, yyyy"),K&&!I.is_completed&&" (overdue)"]})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[c.jsx("button",{onClick:()=>{Be(I),Y(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit todo",children:c.jsx(_a,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),c.jsx("button",{onClick:()=>E$(I.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete todo",children:c.jsx(Nn,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},I.id)})}):c.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No todos yet."})]}),c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"font-semibold",children:"Timeline"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>$(!0),className:"btn-secondary text-sm",title:"Add note",children:[c.jsx(mA,{className:"w-4 h-4 md:mr-1"}),c.jsx("span",{className:"hidden md:inline",children:"Note"})]}),c.jsxs("button",{onClick:()=>M(!0),className:"btn-secondary text-sm",title:"Add activity",children:[c.jsx(gb,{className:"w-4 h-4 md:mr-1"}),c.jsx("span",{className:"hidden md:inline",children:"Activity"})]})]})]}),c.jsx(nNe,{timeline:o||[],onEdit:hue,onDelete:fue,onToggleTodo:S$,personId:t,allPeople:w||[]})]})]}),E==="work"&&c.jsxs("div",{className:"columns-1 md:columns-2 gap-6",children:[c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"font-semibold",children:"Work history"}),c.jsx("button",{onClick:()=>{As(null),Ii(null),wt(!0)},className:"btn-secondary text-sm",title:"Add work history",children:c.jsx(dr,{className:"w-4 h-4"})})]}),(Ig==null?void 0:Ig.length)>0?c.jsx("div",{className:"space-y-4",children:Ig.map((I,K)=>{const Q=I.company?Cx[I.company]:null,Ne=I.originalIndex;return c.jsxs("div",{className:"flex items-start group",children:[Q!=null&&Q.logo?c.jsx("img",{src:Q.logo,alt:Q.name,className:"w-20 h-20 rounded-lg object-contain bg-white mr-3 flex-shrink-0"}):c.jsx("div",{className:"w-20 h-20 bg-white rounded-lg flex items-center justify-center mr-3 flex-shrink-0 border border-gray-200",children:c.jsx(yr,{className:"w-10 h-10 text-gray-500"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"font-medium",children:I.job_title}),I.company&&Q&&c.jsx(ze,{to:`/companies/${I.company}`,className:"text-sm text-primary-600 hover:underline",children:Q.name}),c.jsxs("p",{className:"text-sm text-gray-500",children:[I.start_date&&Dn(new Date(I.start_date),"MMM yyyy")," - ",I.is_current?"Present":I.end_date?Dn(new Date(I.end_date),"MMM yyyy"):""]}),I.description&&c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:I.description})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[c.jsx("button",{onClick:()=>{var ct,vt;const Fe=(vt=(ct=n==null?void 0:n.acf)==null?void 0:ct.work_history)==null?void 0:vt[Ne];As(Fe),Ii(Ne),wt(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit work history",children:c.jsx(_a,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),c.jsx("button",{onClick:()=>pue(Ne),className:"p-1 hover:bg-red-50 rounded",title:"Delete work history",children:c.jsx(Nn,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},Ne)})}):c.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No work history yet. ",c.jsx("button",{onClick:()=>{As(null),Ii(null),wt(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]}),S.length>0&&c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[c.jsx(Ov,{className:"w-5 h-5 mr-2"}),"Investments"]}),c.jsx("div",{className:"space-y-3",children:S.map(I=>c.jsxs(ze,{to:`/companies/${I.id}`,className:"flex items-center p-2 rounded-lg hover:bg-gray-50 transition-colors group",children:[I.thumbnail?c.jsx("img",{src:I.thumbnail,alt:I.name,className:"w-12 h-12 rounded-lg object-contain bg-white border border-gray-200"}):c.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:c.jsx(yr,{className:"w-6 h-6 text-gray-400"})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("p",{className:"text-sm font-medium group-hover:text-primary-600",children:I.name}),I.industry&&c.jsx("p",{className:"text-xs text-gray-500",children:I.industry})]})]},I.id))})]}),Tg.length>0&&c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h2",{className:"font-semibold",children:"Colleagues"}),c.jsxs("span",{className:"text-xs text-gray-500",children:[Tg.length," ",Tg.length===1?"colleague":"colleagues"]})]}),c.jsx("div",{className:"space-y-2",children:Tg.map(I=>{var K;return c.jsxs(ze,{to:`/people/${I.id}`,className:"flex items-center p-2 rounded hover:bg-gray-50",children:[I.thumbnail?c.jsx("img",{src:I.thumbnail,alt:I.name||"",className:"w-8 h-8 rounded-full object-cover mr-2"}):c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full mr-2 flex items-center justify-center",children:c.jsx("span",{className:"text-xs font-medium text-gray-500",children:((K=I.name)==null?void 0:K[0])||"?"})}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"text-sm font-medium truncate",children:I.name}),I.job_title&&c.jsx("p",{className:"text-xs text-gray-500 truncate",children:I.job_title})]})]},I.id)})})]})]})]}),c.jsx(kCe,{isOpen:F,onClose:()=>$(!1),onSubmit:iue,isLoading:f.isPending,isContactShared:((K$=n==null?void 0:n.acf)==null?void 0:K$._visibility)==="workspace"||((G$=n==null?void 0:n.acf)==null?void 0:G$._visibility)==="shared",workspaceIds:((Y$=n==null?void 0:n.acf)==null?void 0:Y$._visibility)==="workspace"?((Q$=n==null?void 0:n.acf)==null?void 0:Q$._assigned_workspaces)||[]:[]}),c.jsx(dD,{isOpen:q,onClose:()=>{M(!1),Ot(null),Ri(null),co(null)},onSubmit:oue,isLoading:Ue?m.isPending:p.isPending,personId:t,initialData:Du,activity:Ue}),c.jsx(_A,{isOpen:Au,onClose:()=>{lo(!1),Ri(null)},todo:yn,onComplete:cue,onCompleteAsActivity:uue}),c.jsx(Yoe,{isOpen:z,onClose:()=>{Y(!1),Be(null)},onSubmit:be?lue:aue,isLoading:be?y.isPending:g.isPending,todo:be}),c.jsx(TCe,{isOpen:H,onClose:()=>me(!1),onSubmit:Yce,isLoading:nn,contactInfo:gt.contact_info||[]}),c.jsx(EA,{isOpen:G,onClose:()=>{oe(!1),re(null)},onSubmit:Qce,isLoading:lt,dateItem:Se,personId:t,allPeople:w||[],isPeopleLoading:x}),c.jsx(PCe,{isOpen:Ie,onClose:()=>{ce(!1),ge(null),B(null)},onSubmit:Xce,isLoading:Gt,relationship:ue,personId:t,allPeople:w||[],isPeopleLoading:x}),c.jsx(ICe,{isOpen:De,onClose:()=>{Oe(!1),xe(null),bs(null)},onSubmit:Jce,isLoading:A,address:fe}),c.jsx(MCe,{isOpen:pt,onClose:()=>{wt(!1),As(null),Ii(null)},onSubmit:Zce,isLoading:V,workHistoryItem:Pi}),c.jsx(wA,{isOpen:St,onClose:()=>fr(!1),onSubmit:eue,isLoading:Z,person:n}),c.jsx(Qoe,{isOpen:Tt,onClose:()=>Sr(!1),postType:"people",postId:n.id,postTitle:n.name||((X$=n.title)==null?void 0:X$.rendered)})]})}function UCe({company:t}){var e,r,n,s,i;return c.jsx(ze,{to:`/companies/${t.id}`,className:"card p-4 hover:shadow-md transition-shadow",children:c.jsxs("div",{className:"flex items-start",children:[(n=(r=(e=t._embedded)==null?void 0:e["wp:featuredmedia"])==null?void 0:r[0])!=null&&n.source_url?c.jsx("img",{src:t._embedded["wp:featuredmedia"][0].source_url,alt:ar(t),className:"w-12 h-12 rounded-lg object-contain bg-white"}):c.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:c.jsx(yr,{className:"w-6 h-6 text-gray-400"})}),c.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:ar(t)}),((s=t.acf)==null?void 0:s.industry)&&c.jsx("p",{className:"text-sm text-gray-500",children:t.acf.industry}),((i=t.acf)==null?void 0:i.website)&&c.jsx("p",{className:"text-xs text-primary-600 truncate",children:t.acf.website})]})]})})}function HCe(){var k,j;const[t,e]=C.useState(""),[r,n]=C.useState(!1),[s,i]=C.useState("all"),[o,a]=C.useState(""),[l,u]=C.useState(!1),[d,h]=C.useState(!1),f=C.useRef(null),p=C.useRef(null),m=Gn(),{data:g=[]}=Sb(),y=(k=window.prmConfig)==null?void 0:k.userId,{data:v,isLoading:b,error:w}=it({queryKey:["companies",t],queryFn:async()=>(await Je.getCompanies({search:t,per_page:100,_embed:!0})).data}),x=gne({onSuccess:T=>{u(!1),m(`/companies/${T.id}`)}}),S=async T=>{h(!0);try{await x.mutateAsync(T)}finally{h(!1)}};C.useEffect(()=>{const T=P=>{p.current&&!p.current.contains(P.target)&&f.current&&!f.current.contains(P.target)&&n(!1)};return document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[]);const E=s!=="all"||o,N=()=>{i("all"),a("")},_=C.useMemo(()=>{if(!v)return[];let T=[...v];return s==="mine"?T=T.filter(P=>P.author===y):s==="shared"&&(T=T.filter(P=>P.author!==y)),o&&(T=T.filter(P=>{var D;return(((D=P.acf)==null?void 0:D._assigned_workspaces)||[]).includes(parseInt(o))})),T.sort((P,O)=>{var $,q;const D=((($=P.title)==null?void 0:$.rendered)||P.title||"").toLowerCase(),F=(((q=O.title)==null?void 0:q.rendered)||O.title||"").toLowerCase();return D.localeCompare(F)})},[v,s,o,y]);return c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsxs("div",{className:"relative flex-1 min-w-48 max-w-md",children:[c.jsx(wl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),c.jsx("input",{type:"search",placeholder:"Search organizations...",value:t,onChange:T=>e(T.target.value),className:"input pl-9"})]}),c.jsxs("div",{className:"relative",ref:f,children:[c.jsxs("button",{onClick:()=>n(!r),className:`btn-secondary ${E?"bg-primary-50 text-primary-700 border-primary-200":""}`,children:[c.jsx(Kp,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Filter"}),E&&c.jsx("span",{className:"ml-2 px-1.5 py-0.5 bg-primary-600 text-white text-xs rounded-full",children:(s!=="all"?1:0)+(o?1:0)})]}),r&&c.jsx("div",{ref:p,className:"absolute top-full left-0 mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Ownership"}),c.jsx("div",{className:"space-y-1",children:[{value:"all",label:"All Organizations"},{value:"mine",label:"My Organizations"},{value:"shared",label:"Shared with Me"}].map(T=>c.jsxs("label",{className:"flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded",children:[c.jsx("input",{type:"radio",name:"ownership",value:T.value,checked:s===T.value,onChange:P=>i(P.target.value),className:"sr-only"}),c.jsx("div",{className:`flex items-center justify-center w-4 h-4 border-2 rounded-full mr-3 ${s===T.value?"border-primary-600":"border-gray-300"}`,children:s===T.value&&c.jsx("div",{className:"w-2 h-2 bg-primary-600 rounded-full"})}),c.jsx("span",{className:"text-sm text-gray-700",children:T.label})]},T.value))})]}),g.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Workspace"}),c.jsxs("select",{value:o,onChange:T=>a(T.target.value),className:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[c.jsx("option",{value:"",children:"All Workspaces"}),g.map(T=>c.jsx("option",{value:T.id,children:T.title},T.id))]})]}),E&&c.jsx("button",{onClick:N,className:"w-full text-sm text-primary-600 hover:text-primary-700 font-medium pt-2 border-t border-gray-200",children:"Clear all filters"})]})})]}),E&&c.jsxs("div",{className:"flex flex-wrap gap-2",children:[s!=="all"&&c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-800 rounded-full text-xs",children:[s==="mine"?"My Organizations":"Shared with Me",c.jsx("button",{onClick:()=>i("all"),className:"hover:text-primary-600",children:c.jsx(ot,{className:"w-3 h-3"})})]}),o&&c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:[((j=g.find(T=>T.id===parseInt(o)))==null?void 0:j.title)||"Workspace",c.jsx("button",{onClick:()=>a(""),className:"hover:text-blue-600",children:c.jsx(ot,{className:"w-3 h-3"})})]})]}),c.jsxs("button",{onClick:()=>u(!0),className:"btn-primary",children:[c.jsx(dr,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Add organization"})]})]})}),b&&c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),w&&c.jsx("div",{className:"card p-6 text-center",children:c.jsx("p",{className:"text-red-600",children:"Failed to load organizations."})}),!b&&!w&&(v==null?void 0:v.length)===0&&c.jsxs("div",{className:"card p-12 text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(yr,{className:"w-6 h-6 text-gray-400"})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No organizations found"}),c.jsx("p",{className:"text-gray-500 mb-4",children:t?"Try a different search.":"Add your first organization."}),!t&&c.jsxs("button",{onClick:()=>u(!0),className:"btn-primary",children:[c.jsx(dr,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Add organization"})]})]}),!b&&!w&&(v==null?void 0:v.length)>0&&(_==null?void 0:_.length)===0&&c.jsxs("div",{className:"card p-12 text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(Kp,{className:"w-6 h-6 text-gray-400"})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No organizations match your filters"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Try adjusting your filters to see more results."}),c.jsx("button",{onClick:N,className:"btn-secondary",children:"Clear filters"})]}),!b&&!w&&(_==null?void 0:_.length)>0&&c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:_.map(T=>c.jsx(UCe,{company:T},T.id))}),c.jsx(SA,{isOpen:l,onClose:()=>u(!1),onSubmit:S,isLoading:d})]})}function KCe(){var T,P,O,D,F,$,q;const{id:t}=Ih(),e=Gn(),r=rt(),n=C.useRef(null),[s,i]=C.useState(!1),[o,a]=C.useState(!1),[l,u]=C.useState(!1),[d,h]=C.useState(!1),{data:f,isLoading:p,error:m}=it({queryKey:["company",t],queryFn:async()=>(await Je.getCompany(t,{_embed:!0})).data}),{data:g}=it({queryKey:["company-people",t],queryFn:async()=>(await Ee.getCompanyPeople(t)).data}),{data:y}=it({queryKey:["company",f==null?void 0:f.parent],queryFn:async()=>(await Je.getCompany(f.parent,{_embed:!0})).data,enabled:!!(f!=null&&f.parent)}),{data:v=[]}=it({queryKey:["company-children",t],queryFn:async()=>(await Je.getCompanies({parent:t,per_page:100,_embed:!0})).data}),b=((T=f==null?void 0:f.acf)==null?void 0:T.investors)||[],{data:w=[]}=it({queryKey:["company-investors",t,b],queryFn:async()=>{if(!b.length)return[];const[M,z]=await Promise.all([Je.getPeople({per_page:100,include:b.join(","),_embed:!0}),Je.getCompanies({per_page:100,include:b.join(","),_embed:!0})]),Y=(M.data||[]).map(G=>{var oe,Ie,ce,De;return{id:G.id,type:"person",name:qn(((oe=G.title)==null?void 0:oe.rendered)||""),thumbnail:(De=(ce=(Ie=G._embedded)==null?void 0:Ie["wp:featuredmedia"])==null?void 0:ce[0])==null?void 0:De.source_url}}),H=(z.data||[]).map(G=>{var oe,Ie,ce;return{id:G.id,type:"company",name:ar(G),thumbnail:(ce=(Ie=(oe=G._embedded)==null?void 0:oe["wp:featuredmedia"])==null?void 0:Ie[0])==null?void 0:ce.source_url}}),me=[...Y,...H];return b.map(G=>me.find(oe=>oe.id===G)).filter(Boolean)},enabled:b.length>0}),{data:x=[]}=it({queryKey:["investments",t],queryFn:async()=>(await Ee.getInvestments(t)).data,enabled:!!t}),S=Ke({mutationFn:()=>Je.deleteCompany(t,{force:!0}),onSuccess:()=>{r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["dashboard"]}),e("/companies")}}),E=Ke({mutationFn:M=>Je.updateCompany(t,M),onSuccess:()=>{r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["company-investors",t]}),r.invalidateQueries({queryKey:["dashboard"]})}});Dh(ar(f)||"Organization"),C.useEffect(()=>{(f==null?void 0:f.status)==="trash"&&e("/companies",{replace:!0})},[f,e]);const N=async()=>{if(window.confirm("Are you sure you want to delete this organization?"))try{await S.mutateAsync()}catch{alert("Failed to delete organization. Please try again.")}},_=async M=>{var z,Y;h(!0);try{const H={title:M.title,parent:M.parentId||0,acf:{website:M.website,industry:M.industry,investors:M.investors||[],_visibility:((z=f.acf)==null?void 0:z._visibility)||"private",_assigned_workspaces:((Y=f.acf)==null?void 0:Y._assigned_workspaces)||[]}};await E.mutateAsync(H),a(!1)}catch{alert("Failed to save organization. Please try again.")}finally{h(!1)}},k=async M=>{var Y;const z=(Y=M.target.files)==null?void 0:Y[0];if(z){if(!z.type.startsWith("image/")){alert("Please select an image file");return}if(z.size>5*1024*1024){alert("Image size must be less than 5MB");return}i(!0);try{await Ee.uploadCompanyLogo(t,z),r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]})}catch{alert("Failed to upload logo. Please try again.")}finally{i(!1),n.current&&(n.current.value="")}}};if(p)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(m||!f)return c.jsxs("div",{className:"card p-6 text-center",children:[c.jsx("p",{className:"text-red-600",children:"Failed to load organization."}),c.jsx(ze,{to:"/companies",className:"btn-secondary mt-4",children:"Back to organizations"})]});if(f.status==="trash")return null;const j=f.acf||{};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs(ze,{to:"/companies",className:"flex items-center text-gray-600 hover:text-gray-900",children:[c.jsx(Ah,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Back to organizations"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>u(!0),className:"btn-secondary",title:"Share",children:[c.jsx(fA,{className:"w-4 h-4 mr-2"}),"Share"]}),c.jsxs("button",{onClick:()=>a(!0),className:"btn-secondary",children:[c.jsx(lne,{className:"w-4 h-4 mr-2"}),"Edit"]}),c.jsxs("button",{onClick:N,className:"btn-danger",children:[c.jsx(Nn,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]}),c.jsx("div",{className:"card p-6",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"relative group",children:[(D=(O=(P=f._embedded)==null?void 0:P["wp:featuredmedia"])==null?void 0:O[0])!=null&&D.source_url?c.jsx("img",{src:f._embedded["wp:featuredmedia"][0].source_url,alt:ar(f),className:"w-24 h-24 rounded-lg object-contain bg-white"}):c.jsx("div",{className:"w-24 h-24 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:c.jsx(yr,{className:"w-12 h-12 text-gray-400"})}),c.jsx("div",{className:"absolute inset-0 rounded-lg bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var M;return(M=n.current)==null?void 0:M.click()},children:s?c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):c.jsx(Qre,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),c.jsx("input",{ref:n,type:"file",accept:"image/*",onChange:k,className:"hidden",disabled:s})]}),c.jsxs("div",{children:[y&&c.jsxs(ze,{to:`/companies/${y.id}`,className:"text-sm text-primary-600 hover:underline flex items-center mb-1",children:[c.jsx(Y5,{className:"w-3 h-3 mr-1"}),"Subsidiary of ",ar(y)]}),c.jsx("h1",{className:"text-2xl font-bold",children:ar(f)}),j.industry&&c.jsx("p",{className:"text-gray-500",children:j.industry}),j.website&&c.jsxs("a",{href:j.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline flex items-center mt-1",children:[c.jsx(ap,{className:"w-4 h-4 mr-1"}),j.website]})]})]})}),v.length>0&&c.jsxs("div",{className:"card p-6",children:[c.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[c.jsx(Y5,{className:"w-5 h-5 mr-2"}),"Subsidiaries"]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:v.map(M=>{var z,Y,H,me;return c.jsxs(ze,{to:`/companies/${M.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[(H=(Y=(z=M._embedded)==null?void 0:z["wp:featuredmedia"])==null?void 0:Y[0])!=null&&H.source_url?c.jsx("img",{src:M._embedded["wp:featuredmedia"][0].source_url,alt:ar(M),className:"w-10 h-10 rounded object-contain bg-white"}):c.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded flex items-center justify-center",children:c.jsx(yr,{className:"w-5 h-5 text-gray-400"})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("p",{className:"text-sm font-medium",children:ar(M)}),((me=M.acf)==null?void 0:me.industry)&&c.jsx("p",{className:"text-xs text-gray-500",children:M.acf.industry})]})]},M.id)})})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"card p-6",children:[c.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[c.jsx(qr,{className:"w-5 h-5 mr-2"}),"Current employees"]}),((F=g==null?void 0:g.current)==null?void 0:F.length)>0?c.jsx("div",{className:"space-y-2",children:g.current.map(M=>{var z;return c.jsxs(ze,{to:`/people/${M.id}`,className:"flex items-center p-2 rounded hover:bg-gray-50",children:[M.thumbnail?c.jsx("img",{src:M.thumbnail,alt:"",loading:"lazy",className:"w-8 h-8 rounded-full"}):c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-xs text-gray-500",children:((z=M.name)==null?void 0:z[0])||"?"})}),c.jsxs("div",{className:"ml-2",children:[c.jsx("p",{className:"text-sm font-medium",children:M.name}),M.job_title&&c.jsx("p",{className:"text-xs text-gray-500",children:M.job_title})]})]},M.id)})}):c.jsx("p",{className:"text-sm text-gray-500",children:"No current employees."})]}),c.jsxs("div",{className:"card p-6",children:[c.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[c.jsx(qr,{className:"w-5 h-5 mr-2"}),"Former employees"]}),(($=g==null?void 0:g.former)==null?void 0:$.length)>0?c.jsx("div",{className:"space-y-2",children:g.former.map(M=>{var z;return c.jsxs(ze,{to:`/people/${M.id}`,className:"flex items-center p-2 rounded hover:bg-gray-50",children:[M.thumbnail?c.jsx("img",{src:M.thumbnail,alt:"",loading:"lazy",className:"w-8 h-8 rounded-full opacity-75"}):c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center opacity-75",children:c.jsx("span",{className:"text-xs text-gray-500",children:((z=M.name)==null?void 0:z[0])||"?"})}),c.jsxs("div",{className:"ml-2",children:[c.jsx("p",{className:"text-sm font-medium text-gray-700",children:M.name}),M.job_title&&c.jsx("p",{className:"text-xs text-gray-500",children:M.job_title})]})]},M.id)})}):c.jsx("p",{className:"text-sm text-gray-500",children:"No former employees."})]})]}),w.length>0&&c.jsxs("div",{className:"card p-6",children:[c.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[c.jsx(Ov,{className:"w-5 h-5 mr-2"}),"Investors"]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:w.map(M=>{const z=M.type==="person",Y=z?`/people/${M.id}`:`/companies/${M.id}`;return c.jsxs(ze,{to:Y,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[M.thumbnail?c.jsx("img",{src:M.thumbnail,alt:M.name,loading:"lazy",className:`w-10 h-10 object-cover ${z?"rounded-full":"rounded"}`}):c.jsx("div",{className:`w-10 h-10 bg-gray-100 flex items-center justify-center ${z?"rounded-full":"rounded"}`,children:z?c.jsx(El,{className:"w-5 h-5 text-gray-400"}):c.jsx(yr,{className:"w-5 h-5 text-gray-400"})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("p",{className:"text-sm font-medium",children:M.name}),c.jsx("p",{className:"text-xs text-gray-500",children:z?"Person":"Organization"})]})]},`${M.type}-${M.id}`)})})]}),x.length>0&&c.jsxs("div",{className:"card p-6",children:[c.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[c.jsx(Ov,{className:"w-5 h-5 mr-2"}),"Invested in"]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:x.map(M=>c.jsxs(ze,{to:`/companies/${M.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[M.thumbnail?c.jsx("img",{src:M.thumbnail,alt:M.name,loading:"lazy",className:"w-10 h-10 object-contain rounded"}):c.jsx("div",{className:"w-10 h-10 bg-gray-100 flex items-center justify-center rounded",children:c.jsx(yr,{className:"w-5 h-5 text-gray-400"})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("p",{className:"text-sm font-medium",children:M.name}),M.industry&&c.jsx("p",{className:"text-xs text-gray-500",children:M.industry})]})]},M.id))})]}),((q=j.contact_info)==null?void 0:q.length)>0&&c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"font-semibold mb-4",children:"Contact information"}),c.jsx("div",{className:"space-y-3",children:j.contact_info.map((M,z)=>c.jsxs("div",{children:[c.jsxs("span",{className:"text-sm text-gray-500",children:[M.contact_label||M.contact_type,":"]}),c.jsx("span",{className:"ml-2",children:M.contact_value})]},z))})]}),c.jsx(SA,{isOpen:o,onClose:()=>a(!1),onSubmit:_,isLoading:d,company:f}),c.jsx(Qoe,{isOpen:l,onClose:()=>u(!1),postType:"companies",postId:f.id,postTitle:ar(f)})]})}function GCe({person:t,dateType:e}){var r;return c.jsx("div",{className:"flex items-center gap-3 py-2",children:c.jsxs(ze,{to:`/people/${t.id}`,className:"flex items-center gap-3 flex-1 min-w-0 hover:opacity-80",children:[t.thumbnail?c.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}):c.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:c.jsx("span",{className:"text-sm font-medium text-gray-500",children:(r=t.name)==null?void 0:r[0]})}),c.jsx("span",{className:"font-medium truncate",children:t.name}),c.jsx("span",{className:"text-sm text-gray-500 capitalize flex-shrink-0",children:e})]})})}function YCe({dates:t}){const e=t[0],n=e.days_until===0?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600",s=[];return t.forEach(i=>{var a,l;const o=((a=i.date_type)==null?void 0:a[0])||"Date";((l=i.related_people)==null?void 0:l.length)>0?i.related_people.forEach(u=>{s.push({person:u,dateType:o})}):s.push({person:{id:null,name:i.title,thumbnail:null},dateType:o})}),c.jsx("div",{className:"card p-4 break-inside-avoid mb-4",children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:`w-14 h-14 rounded-lg ${n} flex items-center justify-center flex-shrink-0`,children:c.jsx("span",{className:"text-2xl font-bold leading-none",children:Dn(new Date(e.next_occurrence),"d")})}),c.jsx("div",{className:"flex-1 min-w-0 divide-y divide-gray-100",children:s.map(({person:i,dateType:o},a)=>c.jsx(GCe,{person:i,dateType:o},i.id?`${i.id}-${o}`:`${a}-${o}`))})]})})}function QCe(){const[t,e]=C.useState(!1),[r,n]=C.useState(!1),{data:s,isLoading:i,error:o}=Xge(365),{data:a=[],isLoading:l}=hu(),u=mne({onSuccess:()=>e(!1)}),d=async p=>{n(!0);try{await u.mutateAsync(p)}finally{n(!1)}},h=(s==null?void 0:s.reduce((p,m)=>{const g=Dn(new Date(m.next_occurrence),"yyyy-MM-dd");return p[g]||(p[g]=[]),p[g].push(m),p},{}))||{},f=Object.entries(h).reduce((p,[m,g])=>{const y=Dn(new Date(m),"MMMM yyyy");return p[y]||(p[y]=[]),p[y].push(g),p},{});return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("p",{className:"text-gray-600",children:[(s==null?void 0:s.length)||0," upcoming dates"]}),c.jsxs("button",{onClick:()=>e(!0),className:"btn-primary",children:[c.jsx(dr,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Add date"})]})]}),i&&c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),o&&c.jsx("div",{className:"card p-6 text-center",children:c.jsx("p",{className:"text-red-600",children:"Failed to load dates."})}),!i&&!o&&(s==null?void 0:s.length)===0&&c.jsxs("div",{className:"card p-12 text-center",children:[c.jsx(Ji,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium mb-1",children:"No important dates"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Add birthdays, anniversaries, and more."}),c.jsxs("button",{onClick:()=>e(!0),className:"btn-primary",children:[c.jsx(dr,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Add date"})]})]}),Object.entries(f).map(([p,m])=>c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:p}),c.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 gap-4",children:m.map(g=>c.jsx(YCe,{dates:g},g[0].next_occurrence))})]},p)),c.jsx(EA,{isOpen:t,onClose:()=>e(!1),onSubmit:d,isLoading:r,allPeople:a,isPeopleLoading:l})]})}function XCe(){Dh("Todos");const[t,e]=C.useState(!1),[r,n]=C.useState(null),[s,i]=C.useState(!1),[o,a]=C.useState(!1),[l,u]=C.useState(null),[d,h]=C.useState(!1),[f,p]=C.useState(!1),[m,g]=C.useState(null),{data:y,isLoading:v}=vne(!0),b=bne(),w=Jge(),x=gA(),S=C.useMemo(()=>Vne(new Date,3),[]),{incompleteTodos:E,recentlyCompletedTodos:N,olderCompletedTodos:_}=C.useMemo(()=>{if(!y)return{incompleteTodos:[],recentlyCompletedTodos:[],olderCompletedTodos:[]};const $=[],q=[],M=[];return y.forEach(z=>{if(!z.is_completed)$.push(z);else try{const Y=Gp(z.created);e0e(Y,S)?q.push(z):M.push(z)}catch{M.push(z)}}),{incompleteTodos:$,recentlyCompletedTodos:q,olderCompletedTodos:M}},[y,S]),k=$=>{if(!$.is_completed){u($),h(!0);return}b.mutate({todoId:$.id,data:{content:$.content,due_date:$.due_date,is_completed:!1}})},j=()=>{l&&(b.mutate({todoId:l.id,data:{content:l.content,due_date:l.due_date,is_completed:!0}}),h(!1),u(null))},T=()=>{if(!l)return;const $=new Date().toISOString().split("T")[0];g({content:l.content,activity_date:$,activity_type:"note",participants:[]}),h(!1),p(!0)},P=async $=>{if(l)try{await x.mutateAsync({personId:l.person_id,data:$}),await b.mutateAsync({todoId:l.id,data:{content:l.content,due_date:l.due_date,is_completed:!0}}),p(!1),u(null),g(null)}catch{alert("Failed to create activity. Please try again.")}},O=async $=>{r&&(await b.mutateAsync({todoId:r.id,data:$}),i(!1),n(null))},D=async $=>{window.confirm("Are you sure you want to delete this todo?")&&await w.mutateAsync($)};if(v)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});const F=[...N,..._];return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsx("h1",{className:"text-2xl font-bold",children:"Todos"}),c.jsxs("div",{className:"flex items-center gap-2",children:[_.length>0&&c.jsxs("button",{onClick:()=>e(!t),className:`btn-secondary text-sm flex items-center gap-2 ${t?"bg-primary-50 border-primary-300":""}`,children:[c.jsx(Kp,{className:"w-4 h-4"}),t?"Hide older":"Show all completed"]}),c.jsxs("button",{onClick:()=>a(!0),className:"btn-primary text-sm flex items-center gap-2",children:[c.jsx(dr,{className:"w-4 h-4"}),"Add todo"]})]})]}),c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"p-4 border-b border-gray-200",children:c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx(Sl,{className:"w-5 h-5 mr-2 text-gray-500"}),"Open todos (",E.length,")"]})}),E.length>0?c.jsx("div",{className:"divide-y divide-gray-100",children:E.map($=>c.jsx(Q1,{todo:$,onToggle:k,onEdit:q=>{n(q),i(!0)},onDelete:D},$.id))}):c.jsxs("div",{className:"p-8 text-center",children:[c.jsx(Xs,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),c.jsx("p",{className:"text-gray-500",children:"No open todos"}),c.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Create todos from a person's detail page"})]})]}),N.length>0&&!t&&c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"p-4 border-b border-gray-200",children:c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx(Xre,{className:"w-5 h-5 mr-2 text-primary-600"}),"Recently completed (",N.length,")"]})}),c.jsx("div",{className:"divide-y divide-gray-100",children:N.map($=>c.jsx(Q1,{todo:$,onToggle:k,onEdit:q=>{n(q),i(!0)},onDelete:D},$.id))})]}),t&&F.length>0&&c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"p-4 border-b border-gray-200",children:c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx(Xs,{className:"w-5 h-5 mr-2 text-primary-600"}),"All completed todos (",F.length,")"]})}),c.jsx("div",{className:"divide-y divide-gray-100",children:F.map($=>c.jsx(Q1,{todo:$,onToggle:k,onEdit:q=>{n(q),i(!0)},onDelete:D},$.id))})]}),c.jsx(Yoe,{isOpen:s,onClose:()=>{i(!1),n(null)},onSubmit:O,isLoading:b.isPending,todo:r}),c.jsx(xne,{isOpen:o,onClose:()=>a(!1)}),c.jsx(_A,{isOpen:d,onClose:()=>{h(!1),u(null)},todo:l,onComplete:j,onCompleteAsActivity:T}),c.jsx(dD,{isOpen:f,onClose:()=>{p(!1),u(null),g(null)},onSubmit:P,isLoading:x.isPending,personId:l==null?void 0:l.person_id,initialData:m})]})}function Q1({todo:t,onToggle:e,onEdit:r,onDelete:n}){var i;const s=Lm(t);return c.jsxs("div",{className:"flex items-start p-4 hover:bg-gray-50 transition-colors group",children:[c.jsx("button",{onClick:()=>e(t),className:"mt-0.5 mr-3 flex-shrink-0",title:t.is_completed?"Mark as incomplete":"Mark as complete",children:t.is_completed?c.jsx(Xs,{className:"w-5 h-5 text-primary-600"}):c.jsx(Sl,{className:`w-5 h-5 ${s?"text-red-600":"text-gray-400"}`})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:`text-sm ${t.is_completed?"line-through text-gray-400":s?"text-red-600 font-medium":"text-gray-900"}`,children:t.content}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-2",children:[c.jsxs(ze,{to:`/people/${t.person_id}`,className:"flex items-center gap-2 text-xs text-primary-600 hover:text-primary-700 hover:underline",children:[t.person_thumbnail?c.jsx("img",{src:t.person_thumbnail,alt:t.person_name,className:"w-5 h-5 rounded-full object-cover"}):c.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-xs text-gray-500",children:(i=t.person_name)==null?void 0:i[0]})}),t.person_name]}),t.due_date&&c.jsxs("span",{className:`text-xs ${s&&!t.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",Dn(new Date(t.due_date),"MMM d, yyyy"),s&&!t.is_completed&&" (overdue)"]})]})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[c.jsx("button",{onClick:()=>r(t),className:"p-1 hover:bg-gray-100 rounded",title:"Edit todo",children:c.jsx(_a,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),c.jsx("button",{onClick:()=>n(t.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete todo",children:c.jsx(Nn,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})}function JCe(){var v,b,w;const[t,e]=C.useState(null),[r,n]=C.useState(""),[s,i]=C.useState(!1),[o,a]=C.useState(null),l=rt(),u=Ke({mutationFn:async x=>{const S=new FormData;return S.append("file",x),(await X.post("/prm/v1/import/monica/validate",S,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:x=>{a(x)},onError:x=>{var S,E;a({valid:!1,error:((E=(S=x.response)==null?void 0:S.data)==null?void 0:E.message)||"Failed to validate file"})}}),d=Ke({mutationFn:async({file:x,monicaUrl:S})=>{const E=new FormData;return E.append("file",x),E.append("monica_url",S),(await X.post("/prm/v1/import/monica",E,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{l.invalidateQueries({queryKey:["people"]}),l.invalidateQueries({queryKey:["companies"]}),l.invalidateQueries({queryKey:["dates"]}),l.invalidateQueries({queryKey:["dashboard"]})}}),h=C.useCallback(x=>{x.preventDefault(),x.stopPropagation(),x.type==="dragenter"||x.type==="dragover"?i(!0):x.type==="dragleave"&&i(!1)},[]),f=C.useCallback(x=>{x.preventDefault(),x.stopPropagation(),i(!1),x.dataTransfer.files&&x.dataTransfer.files[0]&&m(x.dataTransfer.files[0])},[]),p=x=>{x.target.files&&x.target.files[0]&&m(x.target.files[0])},m=x=>{if(!x.name.endsWith(".sql")){a({valid:!1,error:"Please select a SQL file"});return}e(x),a(null),d.reset(),u.mutate(x)},g=()=>{if(!r.trim()){a(x=>({...x,urlError:"Please enter your Monica instance URL"}));return}t&&(o!=null&&o.valid)&&d.mutate({file:t,monicaUrl:r.trim()})},y=()=>{e(null),n(""),a(null),u.reset(),d.reset()};return c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Import from Monica"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts, relationships, notes, and photos from a Monica CRM SQL export file. Reimporting the same file will update existing contacts instead of creating duplicates."}),d.isSuccess?c.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Uc,{className:"h-5 w-5 text-green-600 mt-0.5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),c.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[c.jsxs("p",{children:["Contacts imported: ",d.data.stats.contacts_imported]}),c.jsxs("p",{children:["Contacts updated: ",d.data.stats.contacts_updated]}),c.jsxs("p",{children:["Contacts skipped (partial): ",d.data.stats.contacts_skipped]}),c.jsxs("p",{children:["Photos imported: ",d.data.stats.photos_imported]}),c.jsxs("p",{children:["Organizations created: ",d.data.stats.companies_created]}),c.jsxs("p",{children:["Relationships created: ",d.data.stats.relationships_created]}),c.jsxs("p",{children:["Important dates created: ",d.data.stats.dates_created]}),c.jsxs("p",{children:["Notes created: ",d.data.stats.notes_created]}),((v=d.data.stats.errors)==null?void 0:v.length)>0&&c.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[c.jsx("p",{className:"font-medium",children:"Errors:"}),c.jsx("ul",{className:"list-disc list-inside",children:d.data.stats.errors.map((x,S)=>c.jsx("li",{children:x},S))})]})]}),c.jsx("button",{onClick:y,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${s?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:f,children:[c.jsx("input",{type:"file",accept:".sql",onChange:p,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),u.isPending?c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(ea,{className:"h-8 w-8 text-primary-600 animate-spin"}),c.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(Dm,{className:"h-8 w-8 text-green-600"}),c.jsx("p",{className:"font-medium text-gray-900",children:t.name}),c.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024/1024).toFixed(2)," MB"]})]}):c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(Kc,{className:"h-8 w-8 text-gray-400"}),c.jsx("p",{className:"text-gray-600",children:"Drag and drop your Monica SQL export file here, or click to browse"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Supports SQL export files"})]})]}),o&&c.jsx("div",{className:`rounded-lg border p-4 ${o.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:o.valid?c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Uc,{className:"h-5 w-5 text-green-600 mt-0.5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),c.jsxs("div",{className:"mt-2 text-sm text-green-800",children:[c.jsxs("p",{children:["Export format: ",o.version]}),c.jsxs("p",{children:["Contacts to import: ",o.summary.contacts]}),c.jsxs("p",{children:["Relationships: ",o.summary.relationships]}),c.jsxs("p",{children:["Notes: ",o.summary.notes]}),c.jsxs("p",{children:["Dates: ",o.summary.reminders]}),c.jsxs("p",{children:["Photos: ",o.summary.photos]}),c.jsxs("p",{children:["Organizations: ",o.summary.companies_count]})]})]})]}):c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Zo,{className:"h-5 w-5 text-red-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),c.jsx("p",{className:"text-sm text-red-700 mt-1",children:o.error})]})]})}),(o==null?void 0:o.valid)&&c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"monica-url",className:"block text-sm font-medium text-gray-700",children:"Monica Instance URL"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(uA,{className:"h-4 w-4 text-gray-400"})}),c.jsx("input",{type:"url",id:"monica-url",value:r,onChange:x=>n(x.target.value),placeholder:"https://your-monica-instance.com",className:`block w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ${o.urlError?"border-red-300":"border-gray-300"}`})]}),o.urlError&&c.jsx("p",{className:"text-sm text-red-600",children:o.urlError}),c.jsx("p",{className:"text-xs text-gray-500",children:"Enter the URL of your Monica instance to import photos. Photos will be downloaded from this URL."})]}),(o==null?void 0:o.valid)&&c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:g,disabled:d.isPending,className:"btn-primary flex items-center gap-2",children:d.isPending?c.jsxs(c.Fragment,{children:[c.jsx(ea,{className:"h-4 w-4 animate-spin"}),c.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(Kc,{className:"h-4 w-4"}),c.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),c.jsx("button",{onClick:y,disabled:d.isPending,className:"btn-secondary",children:"Cancel"})]}),d.isError&&c.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Zo,{className:"h-5 w-5 text-red-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),c.jsx("p",{className:"text-sm text-red-700 mt-1",children:((w=(b=d.error.response)==null?void 0:b.data)==null?void 0:w.message)||"An error occurred during import"})]})]})})]})]})}function ZCe(){var g,y,v;const[t,e]=C.useState(null),[r,n]=C.useState(!1),[s,i]=C.useState(null),o=rt(),a=Ke({mutationFn:async b=>{const w=new FormData;return w.append("file",b),(await X.post("/prm/v1/import/vcard/validate",w,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:b=>{i(b)},onError:b=>{var w,x;i({valid:!1,error:((x=(w=b.response)==null?void 0:w.data)==null?void 0:x.message)||"Failed to validate file"})}}),l=Ke({mutationFn:async b=>{const w=new FormData;return w.append("file",b),(await X.post("/prm/v1/import/vcard",w,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{o.invalidateQueries({queryKey:["people"]}),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["dates"]}),o.invalidateQueries({queryKey:["dashboard"]})}}),u=C.useCallback(b=>{b.preventDefault(),b.stopPropagation(),b.type==="dragenter"||b.type==="dragover"?n(!0):b.type==="dragleave"&&n(!1)},[]),d=C.useCallback(b=>{b.preventDefault(),b.stopPropagation(),n(!1),b.dataTransfer.files&&b.dataTransfer.files[0]&&f(b.dataTransfer.files[0])},[]),h=b=>{b.target.files&&b.target.files[0]&&f(b.target.files[0])},f=b=>{const w=b.name.split(".").pop().toLowerCase();if(w!=="vcf"&&w!=="vcard"){i({valid:!1,error:"Please select a vCard file (.vcf)"});return}e(b),i(null),l.reset(),a.mutate(b)},p=()=>{t&&(s!=null&&s.valid)&&l.mutate(t)},m=()=>{e(null),i(null),a.reset(),l.reset()};return c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Import from vCard"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts from a vCard (.vcf) file. vCard is a standard format supported by most contact apps including Apple Contacts, Outlook, and Android. Files can contain one or multiple contacts."}),l.isSuccess?c.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Uc,{className:"h-5 w-5 text-green-600 mt-0.5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),c.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[c.jsxs("p",{children:["Contacts imported: ",l.data.stats.contacts_imported]}),c.jsxs("p",{children:["Contacts updated: ",l.data.stats.contacts_updated]}),c.jsxs("p",{children:["Contacts skipped: ",l.data.stats.contacts_skipped]}),c.jsxs("p",{children:["Photos imported: ",l.data.stats.photos_imported]}),c.jsxs("p",{children:["Organizations created: ",l.data.stats.companies_created]}),c.jsxs("p",{children:["Birthdays created: ",l.data.stats.dates_created]}),c.jsxs("p",{children:["Notes created: ",l.data.stats.notes_created]}),((g=l.data.stats.errors)==null?void 0:g.length)>0&&c.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[c.jsx("p",{className:"font-medium",children:"Errors:"}),c.jsx("ul",{className:"list-disc list-inside",children:l.data.stats.errors.map((b,w)=>c.jsx("li",{children:b},w))})]})]}),c.jsx("button",{onClick:m,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${r?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:u,onDragLeave:u,onDragOver:u,onDrop:d,children:[c.jsx("input",{type:"file",accept:".vcf,.vcard",onChange:h,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),a.isPending?c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(ea,{className:"h-8 w-8 text-primary-600 animate-spin"}),c.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(Dm,{className:"h-8 w-8 text-green-600"}),c.jsx("p",{className:"font-medium text-gray-900",children:t.name}),c.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024).toFixed(2)," KB"]})]}):c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(Kc,{className:"h-8 w-8 text-gray-400"}),c.jsx("p",{className:"text-gray-600",children:"Drag and drop your vCard file here, or click to browse"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Supports .vcf and .vcard files"})]})]}),s&&c.jsx("div",{className:`rounded-lg border p-4 ${s.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:s.valid?c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Uc,{className:"h-5 w-5 text-green-600 mt-0.5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),c.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-3 gap-3",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(qr,{className:"h-4 w-4"}),c.jsxs("span",{children:[s.summary.contacts," contacts"]})]}),s.summary.companies_count>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(yr,{className:"h-4 w-4"}),c.jsxs("span",{children:[s.summary.companies_count," organizations"]})]}),s.summary.birthdays>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(Yre,{className:"h-4 w-4"}),c.jsxs("span",{children:[s.summary.birthdays," birthdays"]})]}),s.summary.photos>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(rne,{className:"h-4 w-4"}),c.jsxs("span",{children:[s.summary.photos," photos"]})]}),s.summary.notes>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(mA,{className:"h-4 w-4"}),c.jsxs("span",{children:[s.summary.notes," notes"]})]})]})]})]}):c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Zo,{className:"h-5 w-5 text-red-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),c.jsx("p",{className:"text-sm text-red-700 mt-1",children:s.error})]})]})}),(s==null?void 0:s.valid)&&c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:p,disabled:l.isPending,className:"btn-primary flex items-center gap-2",children:l.isPending?c.jsxs(c.Fragment,{children:[c.jsx(ea,{className:"h-4 w-4 animate-spin"}),c.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(Kc,{className:"h-4 w-4"}),c.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),c.jsx("button",{onClick:m,disabled:l.isPending,className:"btn-secondary",children:"Cancel"})]}),l.isError&&c.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Zo,{className:"h-5 w-5 text-red-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),c.jsx("p",{className:"text-sm text-red-700 mt-1",children:((v=(y=l.error.response)==null?void 0:y.data)==null?void 0:v.message)||"An error occurred during import"})]})]})})]})]})}function eke(){var x,S,E;const[t,e]=C.useState(null),[r,n]=C.useState(!1),[s,i]=C.useState(null),[o,a]=C.useState({}),l=rt(),u=Ke({mutationFn:async N=>{const _=new FormData;return _.append("file",N),(await X.post("/prm/v1/import/google-contacts/validate",_,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:N=>{var _;if(i(N),((_=N.duplicates)==null?void 0:_.length)>0){const k={};N.duplicates.forEach(j=>{k[j.index]="merge"}),a(k)}},onError:N=>{var _,k;i({valid:!1,error:((k=(_=N.response)==null?void 0:_.data)==null?void 0:k.message)||"Failed to validate file"})}}),d=Ke({mutationFn:async({file:N,decisions:_})=>{const k=new FormData;return k.append("file",N),k.append("decisions",JSON.stringify(_)),(await X.post("/prm/v1/import/google-contacts",k,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{l.invalidateQueries({queryKey:["people"]}),l.invalidateQueries({queryKey:["companies"]}),l.invalidateQueries({queryKey:["dates"]}),l.invalidateQueries({queryKey:["dashboard"]})}}),h=C.useCallback(N=>{N.preventDefault(),N.stopPropagation(),N.type==="dragenter"||N.type==="dragover"?n(!0):N.type==="dragleave"&&n(!1)},[]),f=C.useCallback(N=>{N.preventDefault(),N.stopPropagation(),n(!1),N.dataTransfer.files&&N.dataTransfer.files[0]&&m(N.dataTransfer.files[0])},[]),p=N=>{N.target.files&&N.target.files[0]&&m(N.target.files[0])},m=N=>{if(!N.name.endsWith(".csv")){i({valid:!1,error:"Please select a CSV file"});return}e(N),i(null),a({}),d.reset(),u.mutate(N)},g=(N,_)=>{a(k=>({...k,[N]:_}))},y=()=>{t&&(s!=null&&s.valid)&&d.mutate({file:t,decisions:o})},v=()=>{e(null),i(null),a({}),u.reset(),d.reset()},b=(s==null?void 0:s.duplicates)||[],w=b.length>0;return c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Import from Google Contacts"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts from a Google Contacts CSV export. To export from Google:"}),c.jsxs("ol",{className:"text-sm text-gray-600 list-decimal list-inside space-y-1 ml-2",children:[c.jsxs("li",{children:["Go to ",c.jsx("a",{href:"https://contacts.google.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline",children:"contacts.google.com"})]}),c.jsx("li",{children:'Click "Export" in the left sidebar'}),c.jsx("li",{children:'Select "Google CSV" format and click "Export"'})]}),d.isSuccess?c.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Uc,{className:"h-5 w-5 text-green-600 mt-0.5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),c.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[c.jsxs("p",{children:["Contacts imported: ",d.data.stats.contacts_imported]}),c.jsxs("p",{children:["Contacts updated: ",d.data.stats.contacts_updated]}),c.jsxs("p",{children:["Contacts skipped: ",d.data.stats.contacts_skipped]}),c.jsxs("p",{children:["Organizations created: ",d.data.stats.companies_created]}),c.jsxs("p",{children:["Birthdays created: ",d.data.stats.dates_created]}),c.jsxs("p",{children:["Notes created: ",d.data.stats.notes_created]}),c.jsxs("p",{children:["Photos imported: ",d.data.stats.photos_imported]}),((x=d.data.stats.errors)==null?void 0:x.length)>0&&c.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[c.jsx("p",{className:"font-medium",children:"Errors:"}),c.jsx("ul",{className:"list-disc list-inside",children:d.data.stats.errors.map((N,_)=>c.jsx("li",{children:N},_))})]})]}),c.jsx("button",{onClick:v,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${r?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:f,children:[c.jsx("input",{type:"file",accept:".csv",onChange:p,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),u.isPending?c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(ea,{className:"h-8 w-8 text-primary-600 animate-spin"}),c.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(cA,{className:"h-8 w-8 text-green-600"}),c.jsx("p",{className:"font-medium text-gray-900",children:t.name}),c.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024).toFixed(2)," KB"]})]}):c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(Kc,{className:"h-8 w-8 text-gray-400"}),c.jsx("p",{className:"text-gray-600",children:"Drag and drop your Google Contacts CSV here, or click to browse"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Supports Google CSV format"})]})]}),s&&c.jsx("div",{className:`rounded-lg border p-4 ${s.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:s.valid?c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Uc,{className:"h-5 w-5 text-green-600 mt-0.5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),c.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-3 gap-3",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(qr,{className:"h-4 w-4"}),c.jsxs("span",{children:[s.summary.contacts," contacts"]})]}),s.summary.companies_count>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(yr,{className:"h-4 w-4"}),c.jsxs("span",{children:[s.summary.companies_count," organizations"]})]}),s.summary.birthdays>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(Yre,{className:"h-4 w-4"}),c.jsxs("span",{children:[s.summary.birthdays," birthdays"]})]}),s.summary.notes>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(mA,{className:"h-4 w-4"}),c.jsxs("span",{children:[s.summary.notes," notes"]})]}),s.summary.photos>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(rne,{className:"h-4 w-4"}),c.jsxs("span",{children:[s.summary.photos," photos"]})]})]})]})]}):c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Zo,{className:"h-5 w-5 text-red-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),c.jsx("p",{className:"text-sm text-red-700 mt-1",children:s.error})]})]})}),(s==null?void 0:s.valid)&&w&&c.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Hre,{className:"h-5 w-5 text-amber-600 mt-0.5 flex-shrink-0"}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("h3",{className:"font-medium text-amber-900",children:[b.length," contact",b.length>1?"s":""," may already exist"]}),c.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"Choose how to handle each potential duplicate:"}),c.jsx("div",{className:"mt-4 space-y-4",children:b.map(N=>c.jsx(tke,{duplicate:N,decision:o[N.index]||"merge",onDecision:_=>g(N.index,_)},N.index))})]})]})}),(s==null?void 0:s.valid)&&c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:y,disabled:d.isPending,className:"btn-primary flex items-center gap-2",children:d.isPending?c.jsxs(c.Fragment,{children:[c.jsx(ea,{className:"h-4 w-4 animate-spin"}),c.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(Kc,{className:"h-4 w-4"}),c.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),c.jsx("button",{onClick:v,disabled:d.isPending,className:"btn-secondary",children:"Cancel"})]}),d.isError&&c.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Zo,{className:"h-5 w-5 text-red-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),c.jsx("p",{className:"text-sm text-red-700 mt-1",children:((E=(S=d.error.response)==null?void 0:S.data)==null?void 0:E.message)||"An error occurred during import"})]})]})})]})]})}function tke({duplicate:t,decision:e,onDecision:r}){var n,s;return c.jsxs("div",{className:"bg-white rounded-lg border border-amber-200 p-4",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"From CSV"}),c.jsx("p",{className:"font-medium text-gray-900 truncate",children:t.csv_name}),t.csv_org&&c.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.csv_org}),t.csv_email&&c.jsx("p",{className:"text-sm text-gray-500 truncate",children:t.csv_email})]}),c.jsx("div",{className:"hidden sm:flex items-center text-gray-400",children:c.jsx("span",{className:"text-lg",children:""})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Existing Contact"}),c.jsxs("div",{className:"flex items-start gap-3",children:[t.existing_photo?c.jsx("img",{src:t.existing_photo,alt:"",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}):c.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:c.jsx("span",{className:"text-gray-500 text-sm font-medium",children:((s=(n=t.existing_name)==null?void 0:n.charAt(0))==null?void 0:s.toUpperCase())||"?"})}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"font-medium text-gray-900 truncate",children:t.existing_name}),t.existing_org&&c.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.existing_org}),t.existing_email&&c.jsx("p",{className:"text-sm text-gray-500 truncate",children:t.existing_email})]})]})]})]}),c.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[c.jsxs("button",{type:"button",onClick:()=>r("merge"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="merge"?"bg-primary-100 text-primary-800 ring-2 ring-primary-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[c.jsx(sne,{className:"h-4 w-4"}),"Update existing"]}),c.jsxs("button",{type:"button",onClick:()=>r("new"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="new"?"bg-green-100 text-green-800 ring-2 ring-green-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[c.jsx(yb,{className:"h-4 w-4"}),"Create new"]}),c.jsxs("button",{type:"button",onClick:()=>r("skip"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="skip"?"bg-gray-200 text-gray-800 ring-2 ring-gray-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[c.jsx(Oge,{className:"h-4 w-4"}),"Skip"]})]})]})}const rke=[{id:"sync",label:"Sync",icon:fA},{id:"notifications",label:"Notifications",icon:hge},{id:"data",label:"Data",icon:ene},{id:"admin",label:"Admin",icon:pA,adminOnly:!0},{id:"about",label:"About",icon:bge}];function nke(){const[t,e]=npe(),r=window.prmConfig||{},n=r.isAdmin||!1,s=r.userId,i=t.get("tab")||"sync",o=_e=>{e({tab:_e})},a=rke.filter(_e=>!_e.adminOnly||n),[l,u]=C.useState(""),[d,h]=C.useState(""),[f,p]=C.useState(!0),[m,g]=C.useState(!1),[y,v]=C.useState(!1),[b,w]=C.useState([]),[x,S]=C.useState(!0),[E,N]=C.useState(""),[_,k]=C.useState(!1),[j,T]=C.useState(null),[P,O]=C.useState(!1),[D,F]=C.useState(null),[$,q]=C.useState([]),[M,z]=C.useState(""),[Y,H]=C.useState(!1),[me,G]=C.useState(""),[oe,Ie]=C.useState("09:00"),[ce,De]=C.useState("digest"),[Oe,pt]=C.useState(!0),[wt,St]=C.useState(!1),[fr,Tt]=C.useState(!1),[Sr,nn]=C.useState(!1),[zr,lt]=C.useState(""),[pr,Gt]=C.useState(!1),[Er,A]=C.useState([]),[L,V]=C.useState([]),[le,Z]=C.useState([]),[ee,be]=C.useState(!1),[Be,Ue]=C.useState(!1),[Ot,Se]=C.useState(!1),[re,ue]=C.useState(""),[ge,je]=C.useState(!1),[B,fe]=C.useState("");C.useEffect(()=>{(async()=>{try{const $e=await X.get("/prm/v1/user/ical-url");u($e.data.url),h($e.data.webcal_url)}catch{}finally{p(!1)}})()},[]),C.useEffect(()=>{s&&(async()=>{try{const[$e,He]=await Promise.all([Ee.getAppPasswords(s),Ee.getCardDAVUrls()]);w($e.data||[]),F(He.data)}catch{}finally{S(!1)}})()},[s]);const xe=async()=>{be(!0);try{const[_e,$e]=await Promise.all([Ee.getSlackChannels(),Ee.getSlackTargets()]);A(_e.data.channels||[]),V(_e.data.users||[]),Z($e.data.targets||[])}catch{lt("Failed to load Slack channels and users. Please try refreshing the page.")}finally{be(!1)}};C.useEffect(()=>{(async()=>{try{const $e=await Ee.getNotificationChannels();q($e.data.channels||["email"]),z($e.data.slack_webhook||""),Ie($e.data.notification_time||"09:00"),De($e.data.mention_notifications||"digest");const He=await Ee.getSlackStatus(),bt=He.data.connected||!1;H(bt),G(He.data.workspace_name||""),bt&&await xe()}catch{}finally{pt(!1)}})()},[]),C.useEffect(()=>{Y&&xe()},[Y]),C.useEffect(()=>{const _e=new URLSearchParams(window.location.search),$e=_e.get("slack_connected"),He=_e.get("slack_error");$e==="1"?(lt("Slack connected successfully!"),o("notifications"),Ee.getSlackStatus().then(bt=>{H(bt.data.connected||!1),G(bt.data.workspace_name||"")}),e({tab:"notifications"})):He&&(lt(`Slack connection failed: ${He}`),o("notifications"),e({tab:"notifications"}))},[]);const Qe=async()=>{var _e,$e;try{const He=await X.get("/prm/v1/slack/oauth/authorize");window.location.href=He.data.oauth_url}catch(He){alert((($e=(_e=He.response)==null?void 0:_e.data)==null?void 0:$e.message)||"Failed to connect Slack")}},bs=async()=>{var _e,$e;if(confirm("Are you sure you want to disconnect Slack? You will stop receiving Slack notifications.")){Gt(!0);try{await Ee.disconnectSlack(),H(!1),G(""),A([]),V([]),Z([]),lt("Slack disconnected successfully"),$.includes("slack")&&await co("slack")}catch(He){alert((($e=(_e=He.response)==null?void 0:_e.data)==null?void 0:$e.message)||"Failed to disconnect Slack")}finally{Gt(!1)}}},Pi=_e=>{const $e=le.includes(_e)?le.filter(He=>He!==_e):[...le,_e];Z($e)},As=async()=>{var _e,$e;Ue(!0);try{await Ee.updateSlackTargets(le),lt("Notification targets saved successfully"),setTimeout(()=>lt(""),3e3)}catch(He){alert((($e=(_e=He.response)==null?void 0:_e.data)==null?void 0:$e.message)||"Failed to save notification targets")}finally{Ue(!1)}},Wl=async()=>{try{await navigator.clipboard.writeText(l),g(!0),setTimeout(()=>g(!1),2e3)}catch{}},Ii=async _e=>{var $e,He;if(_e.preventDefault(),!!E.trim()){k(!0);try{const bt=await Ee.createAppPassword(s,E.trim());T(bt.data.password),w([...b,bt.data]),N("")}catch(bt){alert(((He=($e=bt.response)==null?void 0:$e.data)==null?void 0:He.message)||"Failed to create app password")}finally{k(!1)}}},yn=async(_e,$e)=>{var He,bt;if(confirm(`Are you sure you want to revoke the app password "${$e}"? Any devices using this password will no longer be able to sync.`))try{await Ee.deleteAppPassword(s,_e),w(b.filter(vn=>vn.uuid!==_e))}catch(vn){alert(((bt=(He=vn.response)==null?void 0:He.data)==null?void 0:bt.message)||"Failed to revoke app password")}},Ri=async()=>{try{await navigator.clipboard.writeText(j),O(!0),setTimeout(()=>O(!1),2e3)}catch{}},Au=async _e=>{try{await navigator.clipboard.writeText(_e)}catch{}},lo=_e=>{if(!_e)return"Never";const $e=new Date(_e);return $e.toLocaleDateString("en-US",{month:"short",day:"numeric",year:$e.getFullYear()!==new Date().getFullYear()?"numeric":void 0})},Du=async()=>{if(confirm("Are you sure you want to regenerate your calendar URL? Any existing calendar subscriptions will stop working until you update them with the new URL.")){v(!0);try{const _e=await X.post("/prm/v1/user/regenerate-ical-token");u(_e.data.url),h(_e.data.webcal_url)}catch{}finally{v(!1)}}},co=async _e=>{var He,bt;const $e=$.includes(_e)?$.filter(vn=>vn!==_e):[...$,_e];St(!0);try{await Ee.updateNotificationChannels($e),q($e)}catch(vn){alert(((bt=(He=vn.response)==null?void 0:He.data)==null?void 0:bt.message)||"Failed to update notification channels")}finally{St(!1)}},sn=async _e=>{var ho,pf;const[$e,He]=_e.split(":").map(Number),bt=Math.round(He/5)*5,vn=bt===60?($e+1)%24:$e,Sx=bt===60?0:bt,uo=`${String(vn).padStart(2,"0")}:${String(Sx).padStart(2,"0")}`;Ie(uo),Tt(!0);try{await Ee.updateNotificationTime(uo)}catch(Ex){alert(((pf=(ho=Ex.response)==null?void 0:ho.data)==null?void 0:pf.message)||"Failed to update notification time");const _x=await Ee.getNotificationChannels();Ie(_x.data.notification_time||"09:00")}finally{Tt(!1)}},$u=async _e=>{var He,bt;nn(!0);const $e=ce;De(_e);try{await Ee.updateMentionNotifications(_e)}catch(vn){alert(((bt=(He=vn.response)==null?void 0:He.data)==null?void 0:bt.message)||"Failed to update mention notification preference"),De($e)}finally{nn(!1)}},Fu=async()=>{var _e,$e;if(confirm("This will send reminder emails for all reminders due today. Continue?")){Se(!0),ue("");try{const He=await Ee.triggerReminders();ue(He.data.message||"Reminders triggered successfully.")}catch(He){ue((($e=(_e=He.response)==null?void 0:_e.data)==null?void 0:$e.message)||"Failed to trigger reminders. Please check server logs.")}finally{Se(!1)}}},jg=async()=>{var _e,$e;if(confirm("This will reschedule all user reminder cron jobs based on their notification time preferences. Continue?")){je(!0),fe("");try{const He=await Ee.rescheduleCronJobs();fe(He.data.message||"Cron jobs rescheduled successfully.")}catch(He){fe((($e=(_e=He.response)==null?void 0:_e.data)==null?void 0:$e.message)||"Failed to reschedule cron jobs. Please check server logs.")}finally{je(!1)}}},ff=()=>{switch(i){case"sync":return c.jsx(ske,{icalUrl:l,webcalUrl:d,icalLoading:f,icalCopied:m,copyIcalUrl:Wl,regenerateIcalToken:Du,regenerating:y,appPasswords:b,appPasswordsLoading:x,carddavUrls:D,config:r,newPasswordName:E,setNewPasswordName:N,handleCreateAppPassword:Ii,creatingPassword:_,newPassword:j,setNewPassword:T,copyNewPassword:Ri,passwordCopied:P,handleDeleteAppPassword:yn,formatDate:lo,copyCarddavUrl:Au});case"notifications":return c.jsx(ike,{notificationsLoading:Oe,notificationChannels:$,toggleChannel:co,savingChannels:wt,slackConnected:Y,slackWorkspaceName:me,handleConnectSlack:Qe,handleDisconnectSlack:bs,disconnectingSlack:pr,webhookTestMessage:zr,slackChannels:Er,slackUsers:L,slackTargets:le,loadingSlackData:ee,handleToggleSlackTarget:Pi,handleSaveSlackTargets:As,savingSlackTargets:Be,slackWebhook:M,notificationTime:oe,handleNotificationTimeChange:sn,savingTime:fr,mentionNotifications:ce,handleMentionNotificationsChange:$u,savingMentionPref:Sr});case"data":return c.jsx(oke,{});case"admin":return n?c.jsx(ake,{handleTriggerReminders:Fu,triggeringReminders:Ot,reminderMessage:re,handleRescheduleCron:jg,reschedulingCron:ge,cronMessage:B}):null;case"about":return c.jsx(lke,{config:r});default:return null}};return c.jsxs("div",{className:"max-w-3xl mx-auto",children:[c.jsx("div",{className:"border-b border-gray-200 mb-6",children:c.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:a.map(_e=>{const $e=_e.icon,He=i===_e.id;return c.jsxs("button",{onClick:()=>o(_e.id),className:`
                  flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap
                  ${He?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                `,children:[c.jsx($e,{className:"w-4 h-4"}),_e.label]},_e.id)})})}),c.jsx("div",{className:"space-y-6",children:ff()})]})}function ske({icalUrl:t,webcalUrl:e,icalLoading:r,icalCopied:n,copyIcalUrl:s,regenerateIcalToken:i,regenerating:o,appPasswords:a,appPasswordsLoading:l,carddavUrls:u,config:d,newPasswordName:h,setNewPasswordName:f,handleCreateAppPassword:p,creatingPassword:m,newPassword:g,setNewPassword:y,copyNewPassword:v,passwordCopied:b,handleDeleteAppPassword:w,formatDate:x,copyCarddavUrl:S}){return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Calendar subscription"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Subscribe to your important dates in any calendar app (Apple Calendar, Google Calendar, Outlook, etc.)"}),r?c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),c.jsx("div",{className:"h-9 bg-gray-200 rounded w-24"})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label mb-1",children:"Your calendar feed URL"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",readOnly:!0,value:t,className:"input flex-1 text-sm font-mono bg-gray-50",onClick:E=>E.target.select()}),c.jsx("button",{onClick:s,className:"btn-secondary whitespace-nowrap",title:"Copy URL",children:n?c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied"]}):c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),"Copy"]})})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("a",{href:e,className:"btn-primary",children:c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Subscribe in calendar app"]})}),c.jsx("button",{onClick:i,disabled:o,className:"btn-secondary",children:o?"Regenerating...":"Regenerate URL"})]}),c.jsx("p",{className:"text-xs text-gray-500",children:'Keep this URL private. Anyone with access to it can see your important dates. If you think it has been compromised, click "Regenerate URL" to get a new one.'})]})]}),c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"CardDAV sync"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Sync your contacts with apps like Apple Contacts, Android Contacts, or Thunderbird using CardDAV."}),l?c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),c.jsx("div",{className:"h-24 bg-gray-200 rounded"})]}):c.jsxs("div",{className:"space-y-4",children:[u&&c.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-3",children:[c.jsx("h3",{className:"font-medium text-sm",children:"Connection details"}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-gray-500",children:"Server URL (for most apps)"}),c.jsxs("div",{className:"flex gap-2 mt-1",children:[c.jsx("input",{type:"text",readOnly:!0,value:u.addressbook,className:"input flex-1 text-xs font-mono bg-white",onClick:E=>E.target.select()}),c.jsx("button",{onClick:()=>S(u.addressbook),className:"btn-secondary text-xs px-2",title:"Copy URL",children:"Copy"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-gray-500",children:"Username"}),c.jsxs("div",{className:"flex gap-2 mt-1",children:[c.jsx("input",{type:"text",readOnly:!0,value:d.userLogin||"",className:"input flex-1 text-xs font-mono bg-white",onClick:E=>E.target.select()}),c.jsx("button",{onClick:()=>S(d.userLogin),className:"btn-secondary text-xs px-2",title:"Copy username",children:"Copy"})]})]}),c.jsx("p",{className:"text-xs text-gray-500",children:"Use one of the app passwords below instead of your regular password."})]}),c.jsxs("form",{onSubmit:p,className:"flex gap-2",children:[c.jsx("input",{type:"text",value:h,onChange:E=>f(E.target.value),placeholder:"Password name (e.g., iPhone Contacts)",className:"input flex-1",disabled:m}),c.jsx("button",{type:"submit",disabled:m||!h.trim(),className:"btn-primary whitespace-nowrap",children:m?"Creating...":"Create password"})]}),g&&c.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[c.jsx("p",{className:"text-sm text-green-800 font-medium mb-2",children:"Your new app password (copy it now, it won't be shown again):"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",readOnly:!0,value:g,className:"input flex-1 font-mono text-sm bg-white",onClick:E=>E.target.select()}),c.jsx("button",{onClick:v,className:"btn-primary whitespace-nowrap",children:b?"Copied!":"Copy"})]}),c.jsx("button",{onClick:()=>y(null),className:"text-xs text-green-700 mt-2 hover:underline",children:"I've saved this password, hide it"})]}),a.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium mb-2",children:"Your app passwords"}),c.jsx("div",{className:"space-y-2",children:a.map(E=>c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-sm",children:E.name}),c.jsxs("p",{className:"text-xs text-gray-500",children:["Created ",x(E.created),"  Last used ",x(E.last_used)]})]}),c.jsx("button",{onClick:()=>w(E.uuid,E.name),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Revoke"})]},E.uuid))})]}),a.length===0&&!g&&c.jsx("p",{className:"text-sm text-gray-500",children:"No app passwords yet. Create one to start syncing your contacts."})]})]})]})}function ike({notificationsLoading:t,notificationChannels:e,toggleChannel:r,savingChannels:n,slackConnected:s,slackWorkspaceName:i,handleConnectSlack:o,handleDisconnectSlack:a,disconnectingSlack:l,webhookTestMessage:u,slackChannels:d,slackUsers:h,slackTargets:f,loadingSlackData:p,handleToggleSlackTarget:m,handleSaveSlackTargets:g,savingSlackTargets:y,slackWebhook:v,notificationTime:b,handleNotificationTimeChange:w,savingTime:x,mentionNotifications:S,handleMentionNotificationsChange:E,savingMentionPref:N}){return c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Notifications"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose how you want to receive daily reminders about your important dates."}),t?c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),c.jsx("div",{className:"h-10 bg-gray-200 rounded"})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:"Email"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Receive daily digest emails"})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:e.includes("email"),onChange:()=>r("email"),disabled:n,className:"sr-only peer"}),c.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:"Slack"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Receive notifications in Slack"})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:e.includes("slack"),onChange:()=>r("slack"),disabled:n||!s,className:"sr-only peer"}),c.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),c.jsx("div",{children:s?c.jsxs("div",{className:"space-y-3",children:[c.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-green-900",children:"Connected to Slack"}),i&&c.jsxs("p",{className:"text-sm text-green-700",children:["Workspace: ",i]})]}),c.jsx("button",{onClick:a,disabled:l,className:"btn-secondary text-sm",children:l?"Disconnecting...":"Disconnect"})]})}),u&&c.jsx("p",{className:`text-sm ${u.includes("successfully")||u.includes("disconnected")?"text-green-600":"text-red-600"}`,children:u}),e.includes("slack")&&c.jsxs("div",{className:"mt-4 p-4 border border-gray-200 rounded-lg",children:[c.jsx("h3",{className:"font-medium mb-3",children:"Notification targets"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose where to send Slack notifications. You can select multiple channels and users."}),p?c.jsx("p",{className:"text-sm text-gray-500",children:"Loading channels and users..."}):c.jsxs(c.Fragment,{children:[d.length>0&&c.jsxs("div",{className:"mb-4",children:[c.jsx("h4",{className:"text-sm font-medium mb-2",children:"Channels"}),c.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:d.map(_=>c.jsxs("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:f.includes(_.id),onChange:()=>m(_.id),className:"mr-2 cursor-pointer"}),c.jsx("span",{className:"text-sm",children:_.name})]},_.id))})]}),h.length>0&&c.jsxs("div",{className:"mb-4",children:[c.jsx("h4",{className:"text-sm font-medium mb-2",children:"Direct messages"}),c.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:h.map(_=>c.jsxs("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:f.includes(_.id),onChange:()=>m(_.id),className:"mr-2 cursor-pointer"}),c.jsxs("span",{className:"text-sm",children:[_.name,_.is_me&&c.jsx("span",{className:"text-gray-500 ml-1",children:"(you)"})]})]},_.id))})]}),d.length===0&&h.length===0&&!p&&c.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"No channels or users found. Make sure the Slack app has the necessary permissions."}),c.jsx("button",{onClick:g,disabled:y,className:"btn-primary text-sm mt-4",children:y?"Saving...":"Save targets"})]})]})]}):c.jsxs("div",{className:"space-y-3",children:[c.jsx("button",{onClick:o,className:"btn-primary w-full",disabled:l,children:"Connect Slack"}),u&&c.jsx("p",{className:`text-sm ${u.includes("successfully")?"text-green-600":"text-red-600"}`,children:u}),c.jsx("p",{className:"text-xs text-gray-500",children:"Connect your Slack workspace to receive daily reminder notifications. You'll be able to message channels or receive direct messages."})]})}),v&&!s&&c.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:c.jsxs("p",{className:"text-sm text-yellow-800",children:[c.jsx("strong",{children:"Legacy webhook detected."})," Please connect via OAuth for better functionality. Your webhook will continue to work until you connect via OAuth."]})}),c.jsxs("div",{children:[c.jsx("label",{className:"label mb-1",children:"Notification time (UTC)"}),c.jsx("input",{type:"time",value:b,onChange:_=>w(_.target.value),className:"input",disabled:x,step:"300"}),b&&c.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm",children:[c.jsxs("p",{className:"text-gray-700",children:[c.jsx("span",{className:"font-medium",children:"UTC:"})," ",b]}),c.jsxs("p",{className:"text-gray-700 mt-1",children:[c.jsxs("span",{className:"font-medium",children:["Your time (",Intl.DateTimeFormat().resolvedOptions().timeZone,"):"]})," ",(()=>{try{const[_,k]=b.split(":"),j=new Date;return j.setUTCHours(parseInt(_),parseInt(k),0,0),j.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}catch{return b}})()]})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose the UTC time when you want to receive your daily reminder digest. Reminders are sent within a 1-hour window of your selected time."})]}),c.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mention notifications"}),c.jsxs("select",{value:S,onChange:_=>E(_.target.value),className:"input",disabled:N,children:[c.jsx("option",{value:"digest",children:"Include in daily digest (default)"}),c.jsx("option",{value:"immediate",children:"Send immediately"}),c.jsx("option",{value:"never",children:"Don't notify me"})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose when to receive notifications when someone @mentions you in a note."})]})]})]})}const ZF=[{id:"vcard",name:"vCard",description:"Apple Contacts, Outlook, Android",icon:Dm,component:ZCe},{id:"google",name:"Google Contacts",description:"CSV export from Google",icon:cA,component:eke},{id:"monica",name:"Monica CRM",description:"SQL export from Monica",icon:ene,component:JCe}];function oke(){var s;const[t,e]=C.useState("vcard"),r=i=>{i==="vcard"?window.location.href="/wp-json/prm/v1/export/vcard":i==="google-csv"&&(window.location.href="/wp-json/prm/v1/export/google-csv")},n=(s=ZF.find(i=>i.id===t))==null?void 0:s.component;return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Import data"}),c.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Import your contacts from various sources. Existing contacts with matching names will be updated instead of duplicated."}),c.jsx("div",{className:"border-b border-gray-200 mb-6",children:c.jsx("nav",{className:"-mb-px flex space-x-6","aria-label":"Import types",children:ZF.map(i=>{const o=i.icon,a=t===i.id;return c.jsxs("button",{onClick:()=>e(i.id),className:`group inline-flex items-center py-3 px-1 border-b-2 font-medium text-sm transition-colors ${a?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[c.jsx(o,{className:`mr-2 h-5 w-5 ${a?"text-primary-500":"text-gray-400 group-hover:text-gray-500"}`}),c.jsxs("div",{className:"text-left",children:[c.jsx("span",{className:"block",children:i.name}),c.jsx("span",{className:`block text-xs font-normal ${a?"text-primary-400":"text-gray-400"}`,children:i.description})]})]},i.id)})})}),n&&c.jsx(n,{})]}),c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Export data"}),c.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Export all your contacts in a format compatible with other contact management systems."}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("button",{onClick:()=>r("vcard"),className:"w-full p-4 rounded-lg border border-gray-200 hover:bg-gray-50 text-left flex items-center gap-4",children:[c.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:c.jsx(Dm,{className:"w-6 h-6 text-primary-600"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium",children:"Export as vCard (.vcf)"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Compatible with Apple Contacts, Outlook, Android, and most contact apps"})]}),c.jsx(GI,{className:"w-5 h-5 text-gray-400"})]}),c.jsxs("button",{onClick:()=>r("google-csv"),className:"w-full p-4 rounded-lg border border-gray-200 hover:bg-gray-50 text-left flex items-center gap-4",children:[c.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:c.jsx(cA,{className:"w-6 h-6 text-primary-600"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium",children:"Export as Google Contacts CSV"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Import directly into Google Contacts or other CSV-compatible systems"})]}),c.jsx(GI,{className:"w-5 h-5 text-gray-400"})]})]})]})]})}function ake({handleTriggerReminders:t,triggeringReminders:e,reminderMessage:r,handleRescheduleCron:n,reschedulingCron:s,cronMessage:i}){return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"User management"}),c.jsx("div",{className:"space-y-3",children:c.jsxs(ze,{to:"/settings/user-approval",className:"block p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors",children:[c.jsx("p",{className:"font-medium",children:"User approval"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Approve or deny access for new users"})]})})]}),c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Configuration"}),c.jsx("div",{className:"space-y-3",children:c.jsxs(ze,{to:"/settings/relationship-types",className:"block p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors",children:[c.jsx("p",{className:"font-medium",children:"Relationship types"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Manage relationship types and their inverse mappings"})]})})]}),c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"System actions"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("button",{onClick:t,disabled:e,className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx("p",{className:"font-medium",children:"Trigger reminders"}),c.jsx("p",{className:"text-sm text-gray-500",children:e?"Sending...":"Manually send reminders for today"}),r&&c.jsx("p",{className:"text-sm text-green-600 mt-1",children:r})]}),c.jsxs("button",{onClick:n,disabled:s,className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx("p",{className:"font-medium",children:"Reschedule cron jobs"}),c.jsx("p",{className:"text-sm text-gray-500",children:s?"Rescheduling...":"Reschedule all user reminder cron jobs"}),i&&c.jsx("p",{className:"text-sm text-green-600 mt-1",children:i})]})]})]})]})}function lke({config:t}){return c.jsxs("div",{className:"card p-6",children:[c.jsxs("h2",{className:"text-lg font-semibold mb-4",children:["About ",Gc]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{children:c.jsxs("p",{className:"text-sm text-gray-600",children:["Version ",t.version||"1.0.0"]})}),c.jsx("div",{className:"pt-4 border-t border-gray-200",children:c.jsxs("p",{className:"text-sm text-gray-600",children:[Gc," is a personal CRM system that helps you manage your contacts, track important dates, and maintain meaningful relationships."]})}),c.jsx("div",{className:"pt-4 border-t border-gray-200",children:c.jsx("p",{className:"text-sm text-gray-500",children:"Built with WordPress, React, and Tailwind CSS."})})]})]})}function eq({value:t,onChange:e,relationshipTypes:r,currentTypeId:n=null}){const[s,i]=C.useState(""),[o,a]=C.useState(!1),l=C.useRef(null),u=C.useRef(null),d=C.useMemo(()=>r.sort((y,v)=>{const b=(y.name||"").toLowerCase(),w=(v.name||"").toLowerCase();return b<w?-1:b>w?1:0}),[r]),h=C.useMemo(()=>{if(!s)return d.slice(0,10);const y=s.toLowerCase();return d.filter(v=>(v.name||"").toLowerCase().includes(y)).slice(0,10)},[d,s]),f=C.useMemo(()=>d.find(y=>y.id===parseInt(t,10)),[d,t]);C.useEffect(()=>{const y=v=>{u.current&&!u.current.contains(v.target)&&l.current&&!l.current.contains(v.target)&&a(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const p=y=>{e(y?y.toString():""),i(""),a(!1)},m=()=>{e(""),i(""),a(!1)},g=f?f.name:"";return c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"relative",children:f&&!o?c.jsxs("div",{className:"flex items-center justify-between input pr-8 cursor-text",onClick:()=>a(!0),children:[c.jsx("span",{children:g}),c.jsx("button",{type:"button",onClick:y=>{y.stopPropagation(),m()},className:"absolute right-2 text-gray-400 hover:text-gray-600",children:c.jsx(ot,{className:"w-4 h-4"})})]}):c.jsx("input",{ref:l,type:"text",value:s,onChange:y=>{i(y.target.value),a(!0)},onFocus:()=>a(!0),placeholder:"Search for a relationship type...",className:"input"})}),o&&(s||!f)&&c.jsx("div",{ref:u,className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:h.length>0?c.jsxs(c.Fragment,{children:[c.jsx("button",{type:"button",onClick:()=>p(null),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t?"":"bg-primary-50"}`,children:c.jsx("span",{className:"text-gray-500 italic",children:"None (no inverse)"})}),h.map(y=>c.jsx("button",{type:"button",onClick:()=>p(y.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t===y.id.toString()?"bg-primary-50":""}`,children:y.name},y.id))]}):c.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No relationship types found"})})]})}function cke(){Dh("Relationship Types - Settings");const t=rt();if(!((window.prmConfig||{}).isAdmin||!1))return c.jsx("div",{className:"max-w-2xl mx-auto",children:c.jsxs("div",{className:"card p-8 text-center",children:[c.jsx(one,{className:"w-16 h-16 mx-auto text-amber-500 mb-4"}),c.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to manage relationship types. This feature is only available to administrators."}),c.jsx(ze,{to:"/settings",className:"btn-primary",children:"Back to Settings"})]})});const{data:n=[],isLoading:s}=it({queryKey:["relationship-types"],queryFn:async()=>(await Je.getRelationshipTypes()).data}),[i,o]=C.useState(null),[a,l]=C.useState(""),[u,d]=C.useState(""),[h,f]=C.useState(""),[p,m]=C.useState(""),[g,y]=C.useState(!1),v=Ke({mutationFn:async({id:T,name:P,inverseId:O})=>{const D={name:P};return O&&(D.acf={inverse_relationship_type:parseInt(O,10)}),Je.updateRelationshipType(T,D)},onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),o(null),l(""),d("")}}),b=Ke({mutationFn:async({name:T,inverseId:P})=>{const O={name:T};return P&&(O.acf={inverse_relationship_type:parseInt(P,10)}),Je.createRelationshipType(O)},onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),f(""),m(""),y(!1)}}),w=Ke({mutationFn:T=>Je.deleteRelationshipType(T),onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]})}}),x=Ke({mutationFn:()=>Je.restoreRelationshipTypeDefaults(),onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),alert("Default relationship type configurations have been restored.")},onError:()=>{alert("Failed to restore defaults. Please try again.")}});function S(){return c.jsxs("button",{onClick:()=>{window.confirm("This will restore all default inverse mappings and gender-dependent settings. Continue?")&&x.mutate()},disabled:x.isPending,className:"btn-secondary flex items-center gap-2",title:"Restore default inverse mappings and gender-dependent settings",children:[x.isPending?c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600"}):c.jsx(ine,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden md:inline",children:"Restore Defaults"})]})}const E=T=>{var O;o(T.id),l(T.name);const P=(O=T.acf)==null?void 0:O.inverse_relationship_type;d(P?P.toString():"")},N=()=>{o(null),l(""),d("")},_=()=>{if(!a.trim()){alert("Name is required");return}v.mutate({id:i,name:a.trim(),inverseId:u||null})},k=()=>{if(!h.trim()){alert("Name is required");return}b.mutate({name:h.trim(),inverseId:p||null})},j=(T,P)=>{window.confirm(`Are you sure you want to delete "${P}"? This cannot be undone.`)&&w.mutate(T)};return s?c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):c.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:c.jsxs("div",{className:"card p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h1",{className:"text-2xl font-bold",children:"Relationship Types"}),c.jsx("div",{className:"flex gap-2",children:!g&&c.jsxs(c.Fragment,{children:[c.jsx(S,{}),c.jsxs("button",{onClick:()=>y(!0),className:"btn-primary flex items-center gap-2",children:[c.jsx(dr,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden md:inline",children:"Add Relationship Type"})]})]})})]}),g&&c.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[c.jsx("h3",{className:"font-semibold mb-4",children:"Add New Relationship Type"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Name *"}),c.jsx("input",{type:"text",value:h,onChange:T=>f(T.target.value),className:"input",placeholder:"e.g., Parent, Spouse, Colleague"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Inverse Relationship Type"}),c.jsx(eq,{value:p,onChange:m,relationshipTypes:n}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Select the inverse relationship type. For example, if this is "Parent", select "Child". If this is "Spouse" or "Acquaintance", select the same type (e.g., "Spouse"  "Spouse").'})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:k,disabled:b.isPending,className:"btn-primary flex items-center gap-2",children:[b.isPending?c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):c.jsx(Q5,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden md:inline",children:"Save"})]}),c.jsx("button",{onClick:()=>{y(!1),f(""),m("")},className:"btn-secondary",children:"Cancel"})]})]})]}),c.jsx("div",{className:"space-y-2",children:n.length===0?c.jsx("p",{className:"text-gray-500 text-center py-8",children:"No relationship types found."}):n.map(T=>{var $,q;const P=i===T.id,O=($=T.acf)==null?void 0:$.inverse_relationship_type,D=typeof O=="object"&&(O!=null&&O.ID)?O.ID:typeof O=="object"&&(O!=null&&O.id)?O.id:O,F=D?n.find(M=>M.id===D):null;return c.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:P?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Name *"}),c.jsx("input",{type:"text",value:a,onChange:M=>l(M.target.value),className:"input"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Inverse Relationship Type"}),c.jsx(eq,{value:u,onChange:d,relationshipTypes:n,currentTypeId:T.id}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Select the inverse relationship type. For example, if this is "Parent", select "Child". If this is "Spouse" or "Acquaintance", select the same type (e.g., "Spouse"  "Spouse").'})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:_,disabled:v.isPending,className:"btn-primary flex items-center gap-2",children:[v.isPending?c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):c.jsx(Q5,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden md:inline",children:"Save"})]}),c.jsxs("button",{onClick:N,className:"btn-secondary flex items-center gap-2",children:[c.jsx(ot,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden md:inline",children:"Cancel"})]})]})]}):c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-medium",children:T.name}),F&&c.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Inverse: ",c.jsx("span",{className:"font-medium",children:F.name})]}),!F&&((q=T.acf)==null?void 0:q.inverse_relationship_type)===null&&c.jsx("div",{className:"text-sm text-gray-400 mt-1 italic",children:"No inverse relationship"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>E(T),className:"p-2 text-gray-600 hover:text-primary-600 hover:bg-primary-50 rounded",title:"Edit",children:c.jsx(jge,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>j(T.id,T.name),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded",title:"Delete",children:c.jsx(Nn,{className:"w-4 h-4"})})]})]})},T.id)})})]})})}function uke(){Dh("User Approval - Settings");const t=rt();if(!((window.prmConfig||{}).isAdmin||!1))return c.jsx("div",{className:"max-w-2xl mx-auto",children:c.jsxs("div",{className:"card p-8 text-center",children:[c.jsx(one,{className:"w-16 h-16 mx-auto text-amber-500 mb-4"}),c.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to manage user approvals. This feature is only available to administrators."}),c.jsx(ze,{to:"/settings",className:"btn-primary",children:"Back to Settings"})]})});const{data:n=[],isLoading:s}=it({queryKey:["users"],queryFn:async()=>(await Ee.getUsers()).data}),i=Ke({mutationFn:p=>Ee.approveUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),o=Ke({mutationFn:p=>Ee.denyUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),a=Ke({mutationFn:p=>Ee.deleteUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),l=p=>{window.confirm("Are you sure you want to approve this user?")&&i.mutate(p)},u=p=>{window.confirm("Are you sure you want to deny this user? They will not be able to access the system.")&&o.mutate(p)},d=(p,m)=>{window.confirm(`Are you sure you want to delete ${m}? This will permanently delete their account and all their related data (people, organizations, dates). This action cannot be undone.`)&&a.mutate(p)};if(s)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx(ea,{className:"w-8 h-8 animate-spin text-primary-600"})});const h=n.filter(p=>!p.is_approved),f=n.filter(p=>p.is_approved);return c.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs(ze,{to:"/settings",className:"btn-secondary flex items-center gap-2",children:[c.jsx(Ah,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden md:inline",children:"Back to Settings"})]}),c.jsx("h1",{className:"text-2xl font-semibold",children:"User Approval"})]}),c.jsxs("div",{className:"space-y-6",children:[h.length>0&&c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Pending Approval"}),c.jsx("div",{className:"space-y-3",children:h.map(p=>c.jsxs("div",{className:"card p-4 flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:p.name}),c.jsx("p",{className:"text-sm text-gray-500",children:p.email}),c.jsxs("p",{className:"text-xs text-gray-400",children:["Registered: ",new Date(p.registered).toLocaleDateString()]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>l(p.id),disabled:i.isPending||a.isPending,className:"btn-primary flex items-center gap-2",children:[c.jsx(G5,{className:"w-4 h-4"}),"Approve"]}),c.jsxs("button",{onClick:()=>u(p.id),disabled:o.isPending||a.isPending,className:"btn-secondary flex items-center gap-2",children:[c.jsx(YI,{className:"w-4 h-4"}),"Deny"]}),c.jsxs("button",{onClick:()=>d(p.id,p.name),disabled:i.isPending||o.isPending||a.isPending,className:"btn-danger flex items-center gap-2",children:[c.jsx(Nn,{className:"w-4 h-4"}),"Delete"]})]})]},p.id))})]}),f.length>0&&c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Approved Users"}),c.jsx("div",{className:"space-y-3",children:f.map(p=>c.jsxs("div",{className:"card p-4 flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-medium flex items-center gap-2",children:[p.name,c.jsx(G5,{className:"w-4 h-4 text-green-600"})]}),c.jsx("p",{className:"text-sm text-gray-500",children:p.email})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>u(p.id),disabled:o.isPending||a.isPending,className:"btn-secondary flex items-center gap-2",children:[c.jsx(YI,{className:"w-4 h-4"}),"Revoke Access"]}),c.jsxs("button",{onClick:()=>d(p.id,p.name),disabled:o.isPending||a.isPending,className:"btn-danger flex items-center gap-2",children:[c.jsx(Nn,{className:"w-4 h-4"}),"Delete"]})]})]},p.id))})]}),n.length===0&&c.jsx("div",{className:"card p-8 text-center",children:c.jsx("p",{className:"text-gray-600",children:"No Caelis users found."})})]})]})}/**
 * vis-data
 * http://visjs.org/
 *
 * Manage unstructured data using DataSet. Add, update, and remove data, and listen for changes in the data.
 *
 * @version 8.0.3
 * @date    2025-09-10T16:22:00.613Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var tq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ut(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var X1={exports:{}},rq={},Df,nq;function Ir(){if(nq)return Df;nq=1;var t=function(e){return e&&e.Math===Math&&e};return Df=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof tq=="object"&&tq)||t(typeof Df=="object"&&Df)||function(){return this}()||Function("return this")(),Df}var J1,sq;function kt(){return sq||(sq=1,J1=function(t){try{return!!t()}catch{return!0}}),J1}var Z1,iq;function Hm(){if(iq)return Z1;iq=1;var t=kt();return Z1=!t(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),Z1}var ew,oq;function Bb(){if(oq)return ew;oq=1;var t=Hm(),e=Function.prototype,r=e.apply,n=e.call;return ew=typeof Reflect=="object"&&Reflect.apply||(t?n.bind(r):function(){return n.apply(r,arguments)}),ew}var tw,aq;function At(){if(aq)return tw;aq=1;var t=Hm(),e=Function.prototype,r=e.call,n=t&&e.bind.bind(r,r);return tw=t?n:function(s){return function(){return r.apply(s,arguments)}},tw}var rw,lq;function aa(){if(lq)return rw;lq=1;var t=At(),e=t({}.toString),r=t("".slice);return rw=function(n){return r(e(n),8,-1)},rw}var nw,cq;function Xoe(){if(cq)return nw;cq=1;var t=aa(),e=At();return nw=function(r){if(t(r)==="Function")return e(r)},nw}var sw,uq;function Xr(){if(uq)return sw;uq=1;var t=typeof document=="object"&&document.all;return sw=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"},sw}var iw={},ow,dq;function Rr(){if(dq)return ow;dq=1;var t=kt();return ow=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),ow}var aw,hq;function gs(){if(hq)return aw;hq=1;var t=Hm(),e=Function.prototype.call;return aw=t?e.bind(e):function(){return e.apply(e,arguments)},aw}var lw={},fq;function gD(){if(fq)return lw;fq=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,r=e&&!t.call({1:2},1);return lw.f=r?function(s){var i=e(this,s);return!!i&&i.enumerable}:t,lw}var cw,pq;function Km(){return pq||(pq=1,cw=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}),cw}var uw,mq;function zb(){if(mq)return uw;mq=1;var t=At(),e=kt(),r=aa(),n=Object,s=t("".split);return uw=e(function(){return!n("z").propertyIsEnumerable(0)})?function(i){return r(i)==="String"?s(i,""):n(i)}:n,uw}var dw,gq;function Gm(){return gq||(gq=1,dw=function(t){return t==null}),dw}var hw,yq;function gu(){if(yq)return hw;yq=1;var t=Gm(),e=TypeError;return hw=function(r){if(t(r))throw new e("Can't call method on "+r);return r},hw}var fw,vq;function io(){if(vq)return fw;vq=1;var t=zb(),e=gu();return fw=function(r){return t(e(r))},fw}var pw,bq;function Yn(){if(bq)return pw;bq=1;var t=Xr();return pw=function(e){return typeof e=="object"?e!==null:t(e)},pw}var mw,xq;function Br(){return xq||(xq=1,mw={}),mw}var gw,wq;function Is(){if(wq)return gw;wq=1;var t=Br(),e=Ir(),r=Xr(),n=function(s){return r(s)?s:void 0};return gw=function(s,i){return arguments.length<2?n(t[s])||n(e[s]):t[s]&&t[s][i]||e[s]&&e[s][i]},gw}var yw,Sq;function Jr(){if(Sq)return yw;Sq=1;var t=At();return yw=t({}.isPrototypeOf),yw}var vw,Eq;function qh(){if(Eq)return vw;Eq=1;var t=Ir(),e=t.navigator,r=e&&e.userAgent;return vw=r?String(r):"",vw}var bw,_q;function Ym(){if(_q)return bw;_q=1;var t=Ir(),e=qh(),r=t.process,n=t.Deno,s=r&&r.versions||n&&n.version,i=s&&s.v8,o,a;return i&&(o=i.split("."),a=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!a&&e&&(o=e.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=e.match(/Chrome\/(\d+)/),o&&(a=+o[1]))),bw=a,bw}var xw,Nq;function Lh(){if(Nq)return xw;Nq=1;var t=Ym(),e=kt(),r=Ir(),n=r.String;return xw=!!Object.getOwnPropertySymbols&&!e(function(){var s=Symbol("symbol detection");return!n(s)||!(Object(s)instanceof Symbol)||!Symbol.sham&&t&&t<41}),xw}var ww,Cq;function Joe(){if(Cq)return ww;Cq=1;var t=Lh();return ww=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol",ww}var Sw,kq;function Qm(){if(kq)return Sw;kq=1;var t=Is(),e=Xr(),r=Jr(),n=Joe(),s=Object;return Sw=n?function(i){return typeof i=="symbol"}:function(i){var o=t("Symbol");return e(o)&&r(o.prototype,s(i))},Sw}var Ew,jq;function Bh(){if(jq)return Ew;jq=1;var t=String;return Ew=function(e){try{return t(e)}catch{return"Object"}},Ew}var _w,Tq;function la(){if(Tq)return _w;Tq=1;var t=Xr(),e=Bh(),r=TypeError;return _w=function(n){if(t(n))return n;throw new r(e(n)+" is not a function")},_w}var Nw,Oq;function yD(){if(Oq)return Nw;Oq=1;var t=la(),e=Gm();return Nw=function(r,n){var s=r[n];return e(s)?void 0:t(s)},Nw}var Cw,Pq;function dke(){if(Pq)return Cw;Pq=1;var t=gs(),e=Xr(),r=Yn(),n=TypeError;return Cw=function(s,i){var o,a;if(i==="string"&&e(o=s.toString)&&!r(a=t(o,s))||e(o=s.valueOf)&&!r(a=t(o,s))||i!=="string"&&e(o=s.toString)&&!r(a=t(o,s)))return a;throw new n("Can't convert object to primitive value")},Cw}var kw={exports:{}},jw,Iq;function zh(){return Iq||(Iq=1,jw=!0),jw}var Tw,Rq;function hke(){if(Rq)return Tw;Rq=1;var t=Ir(),e=Object.defineProperty;return Tw=function(r,n){try{e(t,r,{value:n,configurable:!0,writable:!0})}catch{t[r]=n}return n},Tw}var Mq;function vD(){if(Mq)return kw.exports;Mq=1;var t=zh(),e=Ir(),r=hke(),n="__core-js_shared__",s=kw.exports=e[n]||r(n,{});return(s.versions||(s.versions=[])).push({version:"3.44.0",mode:t?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),kw.exports}var Ow,Aq;function Wh(){if(Aq)return Ow;Aq=1;var t=vD();return Ow=function(e,r){return t[e]||(t[e]=r||{})},Ow}var Pw,Dq;function Ti(){if(Dq)return Pw;Dq=1;var t=gu(),e=Object;return Pw=function(r){return e(t(r))},Pw}var Iw,$q;function Zr(){if($q)return Iw;$q=1;var t=At(),e=Ti(),r=t({}.hasOwnProperty);return Iw=Object.hasOwn||function(s,i){return r(e(s),i)},Iw}var Rw,Fq;function Wb(){if(Fq)return Rw;Fq=1;var t=At(),e=0,r=Math.random(),n=t(1.1.toString);return Rw=function(s){return"Symbol("+(s===void 0?"":s)+")_"+n(++e+r,36)},Rw}var Mw,qq;function en(){if(qq)return Mw;qq=1;var t=Ir(),e=Wh(),r=Zr(),n=Wb(),s=Lh(),i=Joe(),o=t.Symbol,a=e("wks"),l=i?o.for||o:o&&o.withoutSetter||n;return Mw=function(u){return r(a,u)||(a[u]=s&&r(o,u)?o[u]:l("Symbol."+u)),a[u]},Mw}var Aw,Lq;function Zoe(){if(Lq)return Aw;Lq=1;var t=gs(),e=Yn(),r=Qm(),n=yD(),s=dke(),i=en(),o=TypeError,a=i("toPrimitive");return Aw=function(l,u){if(!e(l)||r(l))return l;var d=n(l,a),h;if(d){if(u===void 0&&(u="default"),h=t(d,l,u),!e(h)||r(h))return h;throw new o("Can't convert object to primitive value")}return u===void 0&&(u="number"),s(l,u)},Aw}var Dw,Bq;function bD(){if(Bq)return Dw;Bq=1;var t=Zoe(),e=Qm();return Dw=function(r){var n=t(r,"string");return e(n)?n:n+""},Dw}var $w,zq;function eae(){if(zq)return $w;zq=1;var t=Ir(),e=Yn(),r=t.document,n=e(r)&&e(r.createElement);return $w=function(s){return n?r.createElement(s):{}},$w}var Fw,Wq;function tae(){if(Wq)return Fw;Wq=1;var t=Rr(),e=kt(),r=eae();return Fw=!t&&!e(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7}),Fw}var Vq;function Vb(){if(Vq)return iw;Vq=1;var t=Rr(),e=gs(),r=gD(),n=Km(),s=io(),i=bD(),o=Zr(),a=tae(),l=Object.getOwnPropertyDescriptor;return iw.f=t?l:function(d,h){if(d=s(d),h=i(h),a)try{return l(d,h)}catch{}if(o(d,h))return n(!e(r.f,d,h),d[h])},iw}var qw,Uq;function fke(){if(Uq)return qw;Uq=1;var t=kt(),e=Xr(),r=/#|\.prototype\./,n=function(l,u){var d=i[s(l)];return d===a?!0:d===o?!1:e(u)?t(u):!!u},s=n.normalize=function(l){return String(l).replace(r,".").toLowerCase()},i=n.data={},o=n.NATIVE="N",a=n.POLYFILL="P";return qw=n,qw}var Lw,Hq;function Ub(){if(Hq)return Lw;Hq=1;var t=Xoe(),e=la(),r=Hm(),n=t(t.bind);return Lw=function(s,i){return e(s),i===void 0?s:r?n(s,i):function(){return s.apply(i,arguments)}},Lw}var Bw={},zw,Kq;function rae(){if(Kq)return zw;Kq=1;var t=Rr(),e=kt();return zw=t&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),zw}var Ww,Gq;function ca(){if(Gq)return Ww;Gq=1;var t=Yn(),e=String,r=TypeError;return Ww=function(n){if(t(n))return n;throw new r(e(n)+" is not an object")},Ww}var Yq;function ii(){if(Yq)return Bw;Yq=1;var t=Rr(),e=tae(),r=rae(),n=ca(),s=bD(),i=TypeError,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l="enumerable",u="configurable",d="writable";return Bw.f=t?r?function(f,p,m){if(n(f),p=s(p),n(m),typeof f=="function"&&p==="prototype"&&"value"in m&&d in m&&!m[d]){var g=a(f,p);g&&g[d]&&(f[p]=m.value,m={configurable:u in m?m[u]:g[u],enumerable:l in m?m[l]:g[l],writable:!1})}return o(f,p,m)}:o:function(f,p,m){if(n(f),p=s(p),n(m),e)try{return o(f,p,m)}catch{}if("get"in m||"set"in m)throw new i("Accessors not supported");return"value"in m&&(f[p]=m.value),f},Bw}var Vw,Qq;function Vh(){if(Qq)return Vw;Qq=1;var t=Rr(),e=ii(),r=Km();return Vw=t?function(n,s,i){return e.f(n,s,r(1,i))}:function(n,s,i){return n[s]=i,n},Vw}var Uw,Xq;function Ge(){if(Xq)return Uw;Xq=1;var t=Ir(),e=Bb(),r=Xoe(),n=Xr(),s=Vb().f,i=fke(),o=Br(),a=Ub(),l=Vh(),u=Zr(),d=function(h){var f=function(p,m,g){if(this instanceof f){switch(arguments.length){case 0:return new h;case 1:return new h(p);case 2:return new h(p,m)}return new h(p,m,g)}return e(h,this,arguments)};return f.prototype=h.prototype,f};return Uw=function(h,f){var p=h.target,m=h.global,g=h.stat,y=h.proto,v=m?t:g?t[p]:t[p]&&t[p].prototype,b=m?o:o[p]||l(o,p,{})[p],w=b.prototype,x,S,E,N,_,k,j,T,P;for(N in f)x=i(m?N:p+(g?".":"#")+N,h.forced),S=!x&&v&&u(v,N),k=b[N],S&&(h.dontCallGetSet?(P=s(v,N),j=P&&P.value):j=v[N]),_=S&&j?j:f[N],!(!x&&!y&&typeof k==typeof _)&&(h.bind&&S?T=a(_,t):h.wrap&&S?T=d(_):y&&n(_)?T=r(_):T=_,(h.sham||_&&_.sham||k&&k.sham)&&l(T,"sham",!0),l(b,N,T),y&&(E=p+"Prototype",u(o,E)||l(o,E,{}),l(o[E],N,_),h.real&&w&&(x||!w[N])&&l(w,N,_)))},Uw}var Jq;function pke(){if(Jq)return rq;Jq=1;var t=Ge(),e=Rr(),r=ii().f;return t({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!e},{defineProperty:r}),rq}var Zq;function mke(){if(Zq)return X1.exports;Zq=1,pke();var t=Br(),e=t.Object,r=X1.exports=function(s,i,o){return e.defineProperty(s,i,o)};return e.defineProperty.sham&&(r.sham=!0),X1.exports}var Hw,eL;function nae(){if(eL)return Hw;eL=1;var t=mke();return Hw=t,Hw}var Kw,tL;function gke(){if(tL)return Kw;tL=1;var t=nae();return Kw=t,Kw}var Gw,rL;function yke(){if(rL)return Gw;rL=1;var t=gke();return Gw=t,Gw}var Yw,nL;function vke(){return nL||(nL=1,Yw=yke()),Yw}var bke=vke(),xke=ut(bke),sL={},Qw,iL;function yu(){if(iL)return Qw;iL=1;var t=aa();return Qw=Array.isArray||function(r){return t(r)==="Array"},Qw}var Xw,oL;function wke(){if(oL)return Xw;oL=1;var t=Math.ceil,e=Math.floor;return Xw=Math.trunc||function(n){var s=+n;return(s>0?e:t)(s)},Xw}var Jw,aL;function Uh(){if(aL)return Jw;aL=1;var t=wke();return Jw=function(e){var r=+e;return r!==r||r===0?0:t(r)},Jw}var Zw,lL;function sae(){if(lL)return Zw;lL=1;var t=Uh(),e=Math.min;return Zw=function(r){var n=t(r);return n>0?e(n,9007199254740991):0},Zw}var eS,cL;function Al(){if(cL)return eS;cL=1;var t=sae();return eS=function(e){return t(e.length)},eS}var tS,uL;function iae(){if(uL)return tS;uL=1;var t=TypeError,e=9007199254740991;return tS=function(r){if(r>e)throw t("Maximum allowed index exceeded");return r},tS}var rS,dL;function Hb(){if(dL)return rS;dL=1;var t=Rr(),e=ii(),r=Km();return rS=function(n,s,i){t?e.f(n,s,r(0,i)):n[s]=i},rS}var nS,hL;function xD(){if(hL)return nS;hL=1;var t=en(),e=t("toStringTag"),r={};return r[e]="z",nS=String(r)==="[object z]",nS}var sS,fL;function Dl(){if(fL)return sS;fL=1;var t=xD(),e=Xr(),r=aa(),n=en(),s=n("toStringTag"),i=Object,o=r(function(){return arguments}())==="Arguments",a=function(l,u){try{return l[u]}catch{}};return sS=t?r:function(l){var u,d,h;return l===void 0?"Undefined":l===null?"Null":typeof(d=a(u=i(l),s))=="string"?d:o?r(u):(h=r(u))==="Object"&&e(u.callee)?"Arguments":h},sS}var iS,pL;function Ske(){if(pL)return iS;pL=1;var t=At(),e=Xr(),r=vD(),n=t(Function.toString);return e(r.inspectSource)||(r.inspectSource=function(s){return n(s)}),iS=r.inspectSource,iS}var oS,mL;function oae(){if(mL)return oS;mL=1;var t=At(),e=kt(),r=Xr(),n=Dl(),s=Is(),i=Ske(),o=function(){},a=s("Reflect","construct"),l=/^\s*(?:class|function)\b/,u=t(l.exec),d=!l.test(o),h=function(m){if(!r(m))return!1;try{return a(o,[],m),!0}catch{return!1}},f=function(m){if(!r(m))return!1;switch(n(m)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!u(l,i(m))}catch{return!0}};return f.sham=!0,oS=!a||e(function(){var p;return h(h.call)||!h(Object)||!h(function(){p=!0})||p})?f:h,oS}var aS,gL;function Eke(){if(gL)return aS;gL=1;var t=yu(),e=oae(),r=Yn(),n=en(),s=n("species"),i=Array;return aS=function(o){var a;return t(o)&&(a=o.constructor,e(a)&&(a===i||t(a.prototype))?a=void 0:r(a)&&(a=a[s],a===null&&(a=void 0))),a===void 0?i:a},aS}var lS,yL;function wD(){if(yL)return lS;yL=1;var t=Eke();return lS=function(e,r){return new(t(e))(r===0?0:r)},lS}var cS,vL;function Xm(){if(vL)return cS;vL=1;var t=kt(),e=en(),r=Ym(),n=e("species");return cS=function(s){return r>=51||!t(function(){var i=[],o=i.constructor={};return o[n]=function(){return{foo:1}},i[s](Boolean).foo!==1})},cS}var bL;function aae(){if(bL)return sL;bL=1;var t=Ge(),e=kt(),r=yu(),n=Yn(),s=Ti(),i=Al(),o=iae(),a=Hb(),l=wD(),u=Xm(),d=en(),h=Ym(),f=d("isConcatSpreadable"),p=h>=51||!e(function(){var y=[];return y[f]=!1,y.concat()[0]!==y}),m=function(y){if(!n(y))return!1;var v=y[f];return v!==void 0?!!v:r(y)},g=!p||!u("concat");return t({target:"Array",proto:!0,arity:1,forced:g},{concat:function(v){var b=s(this),w=l(b,0),x=0,S,E,N,_,k;for(S=-1,N=arguments.length;S<N;S++)if(k=S===-1?b:arguments[S],m(k))for(_=i(k),o(x+_),E=0;E<_;E++,x++)E in k&&a(w,x,k[E]);else o(x+1),a(w,x++,k);return w.length=x,w}}),sL}var xL={},wL={},uS,SL;function $l(){if(SL)return uS;SL=1;var t=Dl(),e=String;return uS=function(r){if(t(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(r)},uS}var dS={},hS,EL;function SD(){if(EL)return hS;EL=1;var t=Uh(),e=Math.max,r=Math.min;return hS=function(n,s){var i=t(n);return i<0?e(i+s,0):r(i,s)},hS}var fS,_L;function _ke(){if(_L)return fS;_L=1;var t=io(),e=SD(),r=Al(),n=function(s){return function(i,o,a){var l=t(i),u=r(l);if(u===0)return!s&&-1;var d=e(a,u),h;if(s&&o!==o){for(;u>d;)if(h=l[d++],h!==h)return!0}else for(;u>d;d++)if((s||d in l)&&l[d]===o)return s||d||0;return!s&&-1}};return fS={includes:n(!0),indexOf:n(!1)},fS}var pS,NL;function Jm(){return NL||(NL=1,pS={}),pS}var mS,CL;function lae(){if(CL)return mS;CL=1;var t=At(),e=Zr(),r=io(),n=_ke().indexOf,s=Jm(),i=t([].push);return mS=function(o,a){var l=r(o),u=0,d=[],h;for(h in l)!e(s,h)&&e(l,h)&&i(d,h);for(;a.length>u;)e(l,h=a[u++])&&(~n(d,h)||i(d,h));return d},mS}var gS,kL;function ED(){return kL||(kL=1,gS=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),gS}var yS,jL;function Kb(){if(jL)return yS;jL=1;var t=lae(),e=ED();return yS=Object.keys||function(n){return t(n,e)},yS}var TL;function _D(){if(TL)return dS;TL=1;var t=Rr(),e=rae(),r=ii(),n=ca(),s=io(),i=Kb();return dS.f=t&&!e?Object.defineProperties:function(a,l){n(a);for(var u=s(l),d=i(l),h=d.length,f=0,p;h>f;)r.f(a,p=d[f++],u[p]);return a},dS}var vS,OL;function Nke(){if(OL)return vS;OL=1;var t=Is();return vS=t("document","documentElement"),vS}var bS,PL;function Gb(){if(PL)return bS;PL=1;var t=Wh(),e=Wb(),r=t("keys");return bS=function(n){return r[n]||(r[n]=e(n))},bS}var xS,IL;function Zm(){if(IL)return xS;IL=1;var t=ca(),e=_D(),r=ED(),n=Jm(),s=Nke(),i=eae(),o=Gb(),a=">",l="<",u="prototype",d="script",h=o("IE_PROTO"),f=function(){},p=function(b){return l+d+a+b+l+"/"+d+a},m=function(b){b.write(p("")),b.close();var w=b.parentWindow.Object;return b=null,w},g=function(){var b=i("iframe"),w="java"+d+":",x;return b.style.display="none",s.appendChild(b),b.src=String(w),x=b.contentWindow.document,x.open(),x.write(p("document.F=Object")),x.close(),x.F},y,v=function(){try{y=new ActiveXObject("htmlfile")}catch{}v=typeof document<"u"?document.domain&&y?m(y):g():m(y);for(var b=r.length;b--;)delete v[u][r[b]];return v()};return n[h]=!0,xS=Object.create||function(w,x){var S;return w!==null?(f[u]=t(w),S=new f,f[u]=null,S[h]=w):S=v(),x===void 0?S:e.f(S,x)},xS}var wS={},RL;function Yb(){if(RL)return wS;RL=1;var t=lae(),e=ED(),r=e.concat("length","prototype");return wS.f=Object.getOwnPropertyNames||function(s){return t(s,r)},wS}var SS={},ES,ML;function Hh(){if(ML)return ES;ML=1;var t=At();return ES=t([].slice),ES}var AL;function cae(){if(AL)return SS;AL=1;var t=aa(),e=io(),r=Yb().f,n=Hh(),s=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],i=function(o){try{return r(o)}catch{return n(s)}};return SS.f=function(a){return s&&t(a)==="Window"?i(a):r(e(a))},SS}var _S={},DL;function Qb(){return DL||(DL=1,_S.f=Object.getOwnPropertySymbols),_S}var NS,$L;function eg(){if($L)return NS;$L=1;var t=Vh();return NS=function(e,r,n,s){return s&&s.enumerable?e[r]=n:t(e,r,n),e},NS}var CS,FL;function ND(){if(FL)return CS;FL=1;var t=ii();return CS=function(e,r,n){return t.f(e,r,n)},CS}var kS={},qL;function Xb(){if(qL)return kS;qL=1;var t=en();return kS.f=t,kS}var jS,LL;function tr(){if(LL)return jS;LL=1;var t=Br(),e=Zr(),r=Xb(),n=ii().f;return jS=function(s){var i=t.Symbol||(t.Symbol={});e(i,s)||n(i,s,{value:r.f(s)})},jS}var TS,BL;function uae(){if(BL)return TS;BL=1;var t=gs(),e=Is(),r=en(),n=eg();return TS=function(){var s=e("Symbol"),i=s&&s.prototype,o=i&&i.valueOf,a=r("toPrimitive");i&&!i[a]&&n(i,a,function(l){return t(o,this)},{arity:1})},TS}var OS,zL;function Cke(){if(zL)return OS;zL=1;var t=xD(),e=Dl();return OS=t?{}.toString:function(){return"[object "+e(this)+"]"},OS}var PS,WL;function vu(){if(WL)return PS;WL=1;var t=xD(),e=ii().f,r=Vh(),n=Zr(),s=Cke(),i=en(),o=i("toStringTag");return PS=function(a,l,u,d){var h=u?a:a&&a.prototype;h&&(n(h,o)||e(h,o,{configurable:!0,value:l}),d&&!t&&r(h,"toString",s))},PS}var IS,VL;function kke(){if(VL)return IS;VL=1;var t=Ir(),e=Xr(),r=t.WeakMap;return IS=e(r)&&/native code/.test(String(r)),IS}var RS,UL;function tg(){if(UL)return RS;UL=1;var t=kke(),e=Ir(),r=Yn(),n=Vh(),s=Zr(),i=vD(),o=Gb(),a=Jm(),l="Object already initialized",u=e.TypeError,d=e.WeakMap,h,f,p,m=function(b){return p(b)?f(b):h(b,{})},g=function(b){return function(w){var x;if(!r(w)||(x=f(w)).type!==b)throw new u("Incompatible receiver, "+b+" required");return x}};if(t||i.state){var y=i.state||(i.state=new d);y.get=y.get,y.has=y.has,y.set=y.set,h=function(b,w){if(y.has(b))throw new u(l);return w.facade=b,y.set(b,w),w},f=function(b){return y.get(b)||{}},p=function(b){return y.has(b)}}else{var v=o("state");a[v]=!0,h=function(b,w){if(s(b,v))throw new u(l);return w.facade=b,n(b,v,w),w},f=function(b){return s(b,v)?b[v]:{}},p=function(b){return s(b,v)}}return RS={set:h,get:f,has:p,enforce:m,getterFor:g},RS}var MS,HL;function Kh(){if(HL)return MS;HL=1;var t=Ub(),e=At(),r=zb(),n=Ti(),s=Al(),i=wD(),o=e([].push),a=function(l){var u=l===1,d=l===2,h=l===3,f=l===4,p=l===6,m=l===7,g=l===5||p;return function(y,v,b,w){for(var x=n(y),S=r(x),E=s(S),N=t(v,b),_=0,k=w||i,j=u?k(y,E):d||m?k(y,0):void 0,T,P;E>_;_++)if((g||_ in S)&&(T=S[_],P=N(T,_,x),l))if(u)j[_]=P;else if(P)switch(l){case 3:return!0;case 5:return T;case 6:return _;case 2:o(j,T)}else switch(l){case 4:return!1;case 7:o(j,T)}return p?-1:h||f?f:j}};return MS={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterReject:a(7)},MS}var KL;function jke(){if(KL)return wL;KL=1;var t=Ge(),e=Ir(),r=gs(),n=At(),s=zh(),i=Rr(),o=Lh(),a=kt(),l=Zr(),u=Jr(),d=ca(),h=io(),f=bD(),p=$l(),m=Km(),g=Zm(),y=Kb(),v=Yb(),b=cae(),w=Qb(),x=Vb(),S=ii(),E=_D(),N=gD(),_=eg(),k=ND(),j=Wh(),T=Gb(),P=Jm(),O=Wb(),D=en(),F=Xb(),$=tr(),q=uae(),M=vu(),z=tg(),Y=Kh().forEach,H=T("hidden"),me="Symbol",G="prototype",oe=z.set,Ie=z.getterFor(me),ce=Object[G],De=e.Symbol,Oe=De&&De[G],pt=e.RangeError,wt=e.TypeError,St=e.QObject,fr=x.f,Tt=S.f,Sr=b.f,nn=N.f,zr=n([].push),lt=j("symbols"),pr=j("op-symbols"),Gt=j("wks"),Er=!St||!St[G]||!St[G].findChild,A=function(Se,re,ue){var ge=fr(ce,re);ge&&delete ce[re],Tt(Se,re,ue),ge&&Se!==ce&&Tt(ce,re,ge)},L=i&&a(function(){return g(Tt({},"a",{get:function(){return Tt(this,"a",{value:7}).a}})).a!==7})?A:Tt,V=function(Se,re){var ue=lt[Se]=g(Oe);return oe(ue,{type:me,tag:Se,description:re}),i||(ue.description=re),ue},le=function(re,ue,ge){re===ce&&le(pr,ue,ge),d(re);var je=f(ue);return d(ge),l(lt,je)?(ge.enumerable?(l(re,H)&&re[H][je]&&(re[H][je]=!1),ge=g(ge,{enumerable:m(0,!1)})):(l(re,H)||Tt(re,H,m(1,g(null))),re[H][je]=!0),L(re,je,ge)):Tt(re,je,ge)},Z=function(re,ue){d(re);var ge=h(ue),je=y(ge).concat(Ot(ge));return Y(je,function(B){(!i||r(be,ge,B))&&le(re,B,ge[B])}),re},ee=function(re,ue){return ue===void 0?g(re):Z(g(re),ue)},be=function(re){var ue=f(re),ge=r(nn,this,ue);return this===ce&&l(lt,ue)&&!l(pr,ue)?!1:ge||!l(this,ue)||!l(lt,ue)||l(this,H)&&this[H][ue]?ge:!0},Be=function(re,ue){var ge=h(re),je=f(ue);if(!(ge===ce&&l(lt,je)&&!l(pr,je))){var B=fr(ge,je);return B&&l(lt,je)&&!(l(ge,H)&&ge[H][je])&&(B.enumerable=!0),B}},Ue=function(re){var ue=Sr(h(re)),ge=[];return Y(ue,function(je){!l(lt,je)&&!l(P,je)&&zr(ge,je)}),ge},Ot=function(Se){var re=Se===ce,ue=Sr(re?pr:h(Se)),ge=[];return Y(ue,function(je){l(lt,je)&&(!re||l(ce,je))&&zr(ge,lt[je])}),ge};return o||(De=function(){if(u(Oe,this))throw new wt("Symbol is not a constructor");var re=!arguments.length||arguments[0]===void 0?void 0:p(arguments[0]),ue=O(re),ge=function(je){var B=this===void 0?e:this;B===ce&&r(ge,pr,je),l(B,H)&&l(B[H],ue)&&(B[H][ue]=!1);var fe=m(1,je);try{L(B,ue,fe)}catch(xe){if(!(xe instanceof pt))throw xe;A(B,ue,fe)}};return i&&Er&&L(ce,ue,{configurable:!0,set:ge}),V(ue,re)},Oe=De[G],_(Oe,"toString",function(){return Ie(this).tag}),_(De,"withoutSetter",function(Se){return V(O(Se),Se)}),N.f=be,S.f=le,E.f=Z,x.f=Be,v.f=b.f=Ue,w.f=Ot,F.f=function(Se){return V(D(Se),Se)},i&&(k(Oe,"description",{configurable:!0,get:function(){return Ie(this).description}}),s||_(ce,"propertyIsEnumerable",be,{unsafe:!0}))),t({global:!0,constructor:!0,wrap:!0,forced:!o,sham:!o},{Symbol:De}),Y(y(Gt),function(Se){$(Se)}),t({target:me,stat:!0,forced:!o},{useSetter:function(){Er=!0},useSimple:function(){Er=!1}}),t({target:"Object",stat:!0,forced:!o,sham:!i},{create:ee,defineProperty:le,defineProperties:Z,getOwnPropertyDescriptor:Be}),t({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:Ue}),q(),M(De,me),P[H]=!0,wL}var GL={},AS,YL;function dae(){if(YL)return AS;YL=1;var t=Lh();return AS=t&&!!Symbol.for&&!!Symbol.keyFor,AS}var QL;function Tke(){if(QL)return GL;QL=1;var t=Ge(),e=Is(),r=Zr(),n=$l(),s=Wh(),i=dae(),o=s("string-to-symbol-registry"),a=s("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!i},{for:function(l){var u=n(l);if(r(o,u))return o[u];var d=e("Symbol")(u);return o[u]=d,a[d]=u,d}}),GL}var XL={},JL;function Oke(){if(JL)return XL;JL=1;var t=Ge(),e=Zr(),r=Qm(),n=Bh(),s=Wh(),i=dae(),o=s("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!i},{keyFor:function(l){if(!r(l))throw new TypeError(n(l)+" is not a symbol");if(e(o,l))return o[l]}}),XL}var ZL={},DS,e6;function Pke(){if(e6)return DS;e6=1;var t=At(),e=yu(),r=Xr(),n=aa(),s=$l(),i=t([].push);return DS=function(o){if(r(o))return o;if(e(o)){for(var a=o.length,l=[],u=0;u<a;u++){var d=o[u];typeof d=="string"?i(l,d):(typeof d=="number"||n(d)==="Number"||n(d)==="String")&&i(l,s(d))}var h=l.length,f=!0;return function(p,m){if(f)return f=!1,m;if(e(this))return m;for(var g=0;g<h;g++)if(l[g]===p)return m}}},DS}var t6;function hae(){if(t6)return ZL;t6=1;var t=Ge(),e=Is(),r=Bb(),n=gs(),s=At(),i=kt(),o=Xr(),a=Qm(),l=Hh(),u=Pke(),d=Lh(),h=String,f=e("JSON","stringify"),p=s(/./.exec),m=s("".charAt),g=s("".charCodeAt),y=s("".replace),v=s(1.1.toString),b=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,x=/^[\uDC00-\uDFFF]$/,S=!d||i(function(){var k=e("Symbol")("stringify detection");return f([k])!=="[null]"||f({a:k})!=="{}"||f(Object(k))!=="{}"}),E=i(function(){return f("\uDF06\uD834")!=='"\\udf06\\ud834"'||f("\uDEAD")!=='"\\udead"'}),N=function(k,j){var T=l(arguments),P=u(j);if(!(!o(P)&&(k===void 0||a(k))))return T[1]=function(O,D){if(o(P)&&(D=n(P,this,h(O),D)),!a(D))return D},r(f,null,T)},_=function(k,j,T){var P=m(T,j-1),O=m(T,j+1);return p(w,k)&&!p(x,O)||p(x,k)&&!p(w,P)?"\\u"+v(g(k,0),16):k};return f&&t({target:"JSON",stat:!0,arity:3,forced:S||E},{stringify:function(j,T,P){var O=l(arguments),D=r(S?N:f,null,O);return E&&typeof D=="string"?y(D,b,_):D}}),ZL}var r6={},n6;function Ike(){if(n6)return r6;n6=1;var t=Ge(),e=Lh(),r=kt(),n=Qb(),s=Ti(),i=!e||r(function(){n.f(1)});return t({target:"Object",stat:!0,forced:i},{getOwnPropertySymbols:function(a){var l=n.f;return l?l(s(a)):[]}}),r6}var s6;function fae(){return s6||(s6=1,jke(),Tke(),Oke(),hae(),Ike()),xL}var i6={},o6;function pae(){if(o6)return i6;o6=1;var t=tr();return t("asyncDispose"),i6}var a6={},l6;function Rke(){if(l6)return a6;l6=1;var t=tr();return t("asyncIterator"),a6}var c6={},u6;function mae(){if(u6)return c6;u6=1;var t=tr();return t("dispose"),c6}var d6={},h6;function Mke(){if(h6)return d6;h6=1;var t=tr();return t("hasInstance"),d6}var f6={},p6;function Ake(){if(p6)return f6;p6=1;var t=tr();return t("isConcatSpreadable"),f6}var m6={},g6;function gae(){if(g6)return m6;g6=1;var t=tr();return t("iterator"),m6}var y6={},v6;function Dke(){if(v6)return y6;v6=1;var t=tr();return t("match"),y6}var b6={},x6;function $ke(){if(x6)return b6;x6=1;var t=tr();return t("matchAll"),b6}var w6={},S6;function Fke(){if(S6)return w6;S6=1;var t=tr();return t("replace"),w6}var E6={},_6;function qke(){if(_6)return E6;_6=1;var t=tr();return t("search"),E6}var N6={},C6;function Lke(){if(C6)return N6;C6=1;var t=tr();return t("species"),N6}var k6={},j6;function Bke(){if(j6)return k6;j6=1;var t=tr();return t("split"),k6}var T6={},O6;function yae(){if(O6)return T6;O6=1;var t=tr(),e=uae();return t("toPrimitive"),e(),T6}var P6={},I6;function zke(){if(I6)return P6;I6=1;var t=Is(),e=tr(),r=vu();return e("toStringTag"),r(t("Symbol"),"Symbol"),P6}var R6={},M6;function Wke(){if(M6)return R6;M6=1;var t=tr();return t("unscopables"),R6}var A6={},D6;function Vke(){if(D6)return A6;D6=1;var t=Ir(),e=vu();return e(t.JSON,"JSON",!0),A6}var $S,$6;function Uke(){if($6)return $S;$6=1,aae(),fae(),pae(),Rke(),mae(),Mke(),Ake(),gae(),Dke(),$ke(),Fke(),qke(),Lke(),Bke(),yae(),zke(),Wke(),Vke();var t=Br();return $S=t.Symbol,$S}var F6={},FS,q6;function Hke(){return q6||(q6=1,FS=function(){}),FS}var qS,L6;function Gh(){return L6||(L6=1,qS={}),qS}var LS,B6;function Kke(){if(B6)return LS;B6=1;var t=Rr(),e=Zr(),r=Function.prototype,n=t&&Object.getOwnPropertyDescriptor,s=e(r,"name"),i=s&&(function(){}).name==="something",o=s&&(!t||t&&n(r,"name").configurable);return LS={EXISTS:s,PROPER:i,CONFIGURABLE:o},LS}var BS,z6;function Gke(){if(z6)return BS;z6=1;var t=kt();return BS=!t(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),BS}var zS,W6;function vae(){if(W6)return zS;W6=1;var t=Zr(),e=Xr(),r=Ti(),n=Gb(),s=Gke(),i=n("IE_PROTO"),o=Object,a=o.prototype;return zS=s?o.getPrototypeOf:function(l){var u=r(l);if(t(u,i))return u[i];var d=u.constructor;return e(d)&&u instanceof d?d.prototype:u instanceof o?a:null},zS}var WS,V6;function bae(){if(V6)return WS;V6=1;var t=kt(),e=Xr(),r=Yn(),n=Zm(),s=vae(),i=eg(),o=en(),a=zh(),l=o("iterator"),u=!1,d,h,f;[].keys&&(f=[].keys(),"next"in f?(h=s(s(f)),h!==Object.prototype&&(d=h)):u=!0);var p=!r(d)||t(function(){var m={};return d[l].call(m)!==m});return p?d={}:a&&(d=n(d)),e(d[l])||i(d,l,function(){return this}),WS={IteratorPrototype:d,BUGGY_SAFARI_ITERATORS:u},WS}var VS,U6;function Yke(){if(U6)return VS;U6=1;var t=bae().IteratorPrototype,e=Zm(),r=Km(),n=vu(),s=Gh(),i=function(){return this};return VS=function(o,a,l,u){var d=a+" Iterator";return o.prototype=e(t,{next:r(+!u,l)}),n(o,d,!1,!0),s[d]=i,o},VS}var US,H6;function Qke(){if(H6)return US;H6=1;var t=At(),e=la();return US=function(r,n,s){try{return t(e(Object.getOwnPropertyDescriptor(r,n)[s]))}catch{}},US}var HS,K6;function Xke(){if(K6)return HS;K6=1;var t=Yn();return HS=function(e){return t(e)||e===null},HS}var KS,G6;function Jke(){if(G6)return KS;G6=1;var t=Xke(),e=String,r=TypeError;return KS=function(n){if(t(n))return n;throw new r("Can't set "+e(n)+" as a prototype")},KS}var GS,Y6;function Zke(){if(Y6)return GS;Y6=1;var t=Qke(),e=Yn(),r=gu(),n=Jke();return GS=Object.setPrototypeOf||("__proto__"in{}?function(){var s=!1,i={},o;try{o=t(Object.prototype,"__proto__","set"),o(i,[]),s=i instanceof Array}catch{}return function(l,u){return r(l),n(u),e(l)&&(s?o(l,u):l.__proto__=u),l}}():void 0),GS}var YS,Q6;function CD(){if(Q6)return YS;Q6=1;var t=Ge(),e=gs(),r=zh(),n=Kke(),s=Xr(),i=Yke(),o=vae(),a=Zke(),l=vu(),u=Vh(),d=eg(),h=en(),f=Gh(),p=bae(),m=n.PROPER,g=n.CONFIGURABLE,y=p.IteratorPrototype,v=p.BUGGY_SAFARI_ITERATORS,b=h("iterator"),w="keys",x="values",S="entries",E=function(){return this};return YS=function(N,_,k,j,T,P,O){i(k,_,j);var D=function(oe){if(oe===T&&z)return z;if(!v&&oe&&oe in q)return q[oe];switch(oe){case w:return function(){return new k(this,oe)};case x:return function(){return new k(this,oe)};case S:return function(){return new k(this,oe)}}return function(){return new k(this)}},F=_+" Iterator",$=!1,q=N.prototype,M=q[b]||q["@@iterator"]||T&&q[T],z=!v&&M||D(T),Y=_==="Array"&&q.entries||M,H,me,G;if(Y&&(H=o(Y.call(new N)),H!==Object.prototype&&H.next&&(!r&&o(H)!==y&&(a?a(H,y):s(H[b])||d(H,b,E)),l(H,F,!0,!0),r&&(f[F]=E))),m&&T===x&&M&&M.name!==x&&(!r&&g?u(q,"name",x):($=!0,z=function(){return e(M,this)})),T)if(me={values:D(x),keys:P?z:D(w),entries:D(S)},O)for(G in me)(v||$||!(G in q))&&d(q,G,me[G]);else t({target:_,proto:!0,forced:v||$},me);return(!r||O)&&q[b]!==z&&d(q,b,z,{name:T}),f[_]=z,me},YS}var QS,X6;function kD(){return X6||(X6=1,QS=function(t,e){return{value:t,done:e}}),QS}var XS,J6;function Fl(){if(J6)return XS;J6=1;var t=io(),e=Hke(),r=Gh(),n=tg(),s=ii().f,i=CD(),o=kD(),a=zh(),l=Rr(),u="Array Iterator",d=n.set,h=n.getterFor(u);XS=i(Array,"Array",function(p,m){d(this,{type:u,target:t(p),index:0,kind:m})},function(){var p=h(this),m=p.target,g=p.index++;if(!m||g>=m.length)return p.target=null,o(void 0,!0);switch(p.kind){case"keys":return o(g,!1);case"values":return o(m[g],!1)}return o([g,m[g]],!1)},"values");var f=r.Arguments=r.Array;if(e("keys"),e("values"),e("entries"),!a&&l&&f.name!=="values")try{s(f,"name",{value:"values"})}catch{}return XS}var JS,Z6;function eje(){return Z6||(Z6=1,JS={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),JS}var eB;function ql(){if(eB)return F6;eB=1,Fl();var t=eje(),e=Ir(),r=vu(),n=Gh();for(var s in t)r(e[s],s),n[s]=n.Array;return F6}var ZS,tB;function xae(){if(tB)return ZS;tB=1;var t=Uke();return ql(),ZS=t,ZS}var rB={},nB;function tje(){if(nB)return rB;nB=1;var t=en(),e=ii().f,r=t("metadata"),n=Function.prototype;return n[r]===void 0&&e(n,r,{value:null}),rB}var sB={},iB;function rje(){return iB||(iB=1,pae()),sB}var oB={},aB;function nje(){return aB||(aB=1,mae()),oB}var lB={},cB;function sje(){if(cB)return lB;cB=1;var t=tr();return t("metadata"),lB}var eE,uB;function ije(){if(uB)return eE;uB=1;var t=xae();return tje(),rje(),nje(),sje(),eE=t,eE}var dB={},tE,hB;function wae(){if(hB)return tE;hB=1;var t=Is(),e=At(),r=t("Symbol"),n=r.keyFor,s=e(r.prototype.valueOf);return tE=r.isRegisteredSymbol||function(o){try{return n(s(o))!==void 0}catch{return!1}},tE}var fB;function oje(){if(fB)return dB;fB=1;var t=Ge(),e=wae();return t({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),dB}var pB={},rE,mB;function Sae(){if(mB)return rE;mB=1;for(var t=Wh(),e=Is(),r=At(),n=Qm(),s=en(),i=e("Symbol"),o=i.isWellKnownSymbol,a=e("Object","getOwnPropertyNames"),l=r(i.prototype.valueOf),u=t("wks"),d=0,h=a(i),f=h.length;d<f;d++)try{var p=h[d];n(i[p])&&s(p)}catch{}return rE=function(g){if(o&&o(g))return!0;try{for(var y=l(g),v=0,b=a(u),w=b.length;v<w;v++)if(u[b[v]]==y)return!0}catch{}return!1},rE}var gB;function aje(){if(gB)return pB;gB=1;var t=Ge(),e=Sae();return t({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),pB}var yB={},vB;function lje(){if(vB)return yB;vB=1;var t=tr();return t("customMatcher"),yB}var bB={},xB;function cje(){if(xB)return bB;xB=1;var t=tr();return t("observable"),bB}var wB={},SB;function uje(){if(SB)return wB;SB=1;var t=Ge(),e=wae();return t({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),wB}var EB={},_B;function dje(){if(_B)return EB;_B=1;var t=Ge(),e=Sae();return t({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),EB}var NB={},CB;function hje(){if(CB)return NB;CB=1;var t=tr();return t("matcher"),NB}var kB={},jB;function fje(){if(jB)return kB;jB=1;var t=tr();return t("metadataKey"),kB}var TB={},OB;function pje(){if(OB)return TB;OB=1;var t=tr();return t("patternMatch"),TB}var PB={},IB;function mje(){if(IB)return PB;IB=1;var t=tr();return t("replaceAll"),PB}var nE,RB;function gje(){if(RB)return nE;RB=1;var t=ije();return oje(),aje(),lje(),cje(),uje(),dje(),hje(),fje(),pje(),mje(),nE=t,nE}var sE,MB;function yje(){return MB||(MB=1,sE=gje()),sE}var vje=yje(),vy=ut(vje),AB={},iE,DB;function bje(){if(DB)return iE;DB=1;var t=At(),e=Uh(),r=$l(),n=gu(),s=t("".charAt),i=t("".charCodeAt),o=t("".slice),a=function(l){return function(u,d){var h=r(n(u)),f=e(d),p=h.length,m,g;return f<0||f>=p?l?"":void 0:(m=i(h,f),m<55296||m>56319||f+1===p||(g=i(h,f+1))<56320||g>57343?l?s(h,f):m:l?o(h,f,f+2):(m-55296<<10)+(g-56320)+65536)}};return iE={codeAt:a(!1),charAt:a(!0)},iE}var $B;function Jb(){if($B)return AB;$B=1;var t=bje().charAt,e=$l(),r=tg(),n=CD(),s=kD(),i="String Iterator",o=r.set,a=r.getterFor(i);return n(String,"String",function(l){o(this,{type:i,string:e(l),index:0})},function(){var u=a(this),d=u.string,h=u.index,f;return h>=d.length?s(void 0,!0):(f=t(d,h),u.index+=f.length,s(f,!1))}),AB}var oE,FB;function xje(){if(FB)return oE;FB=1,Fl(),Jb(),gae();var t=Xb();return oE=t.f("iterator"),oE}var aE,qB;function Eae(){if(qB)return aE;qB=1;var t=xje();return ql(),aE=t,aE}var lE,LB;function wje(){if(LB)return lE;LB=1;var t=Eae();return lE=t,lE}var cE,BB;function Sje(){if(BB)return cE;BB=1;var t=wje();return cE=t,cE}var uE,zB;function Eje(){return zB||(zB=1,uE=Sje()),uE}var _je=Eje(),Nje=ut(_je);function am(t){"@babel/helpers - typeof";return am=typeof vy=="function"&&typeof Nje=="symbol"?function(e){return typeof e}:function(e){return e&&typeof vy=="function"&&e.constructor===vy&&e!==vy.prototype?"symbol":typeof e},am(t)}var dE,WB;function Cje(){if(WB)return dE;WB=1,yae();var t=Xb();return dE=t.f("toPrimitive"),dE}var hE,VB;function kje(){if(VB)return hE;VB=1;var t=Cje();return hE=t,hE}var fE,UB;function jje(){if(UB)return fE;UB=1;var t=kje();return fE=t,fE}var pE,HB;function Tje(){if(HB)return pE;HB=1;var t=jje();return pE=t,pE}var mE,KB;function Oje(){return KB||(KB=1,mE=Tje()),mE}var Pje=Oje(),Ije=ut(Pje);function Rje(t,e){if(am(t)!="object"||!t)return t;var r=t[Ije];if(r!==void 0){var n=r.call(t,e);if(am(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mje(t){var e=Rje(t,"string");return am(e)=="symbol"?e:e+""}function fl(t,e,r){return(e=Mje(e))in t?xke(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var GB={},gE,YB;function Aje(){if(YB)return gE;YB=1;var t=At(),e=la(),r=Yn(),n=Zr(),s=Hh(),i=Hm(),o=Function,a=t([].concat),l=t([].join),u={},d=function(h,f,p){if(!n(u,f)){for(var m=[],g=0;g<f;g++)m[g]="a["+g+"]";u[f]=o("C,a","return new C("+l(m,",")+")")}return u[f](h,p)};return gE=i?o.bind:function(f){var p=e(this),m=p.prototype,g=s(arguments,1),y=function(){var b=a(g,s(arguments));return this instanceof y?d(p,b.length,b):p.apply(f,b)};return r(m)&&(y.prototype=m),y},gE}var QB;function Dje(){if(QB)return GB;QB=1;var t=Ge(),e=Aje();return t({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),GB}var yE,XB;function ys(){if(XB)return yE;XB=1;var t=Ir(),e=Br();return yE=function(r,n){var s=e[r+"Prototype"],i=s&&s[n];if(i)return i;var o=t[r],a=o&&o.prototype;return a&&a[n]},yE}var vE,JB;function $je(){if(JB)return vE;JB=1,Dje();var t=ys();return vE=t("Function","bind"),vE}var bE,ZB;function Fje(){if(ZB)return bE;ZB=1;var t=Jr(),e=$je(),r=Function.prototype;return bE=function(n){var s=n.bind;return n===r||t(r,n)&&s===r.bind?e:s},bE}var xE,e8;function qje(){if(e8)return xE;e8=1;var t=Fje();return xE=t,xE}var wE,t8;function Lje(){return t8||(t8=1,wE=qje()),wE}var Bje=Lje(),_ae=ut(Bje),r8={},SE,n8;function zje(){if(n8)return SE;n8=1;var t=la(),e=Ti(),r=zb(),n=Al(),s=TypeError,i="Reduce of empty array with no initial value",o=function(a){return function(l,u,d,h){var f=e(l),p=r(f),m=n(f);if(t(u),m===0&&d<2)throw new s(i);var g=a?m-1:0,y=a?-1:1;if(d<2)for(;;){if(g in p){h=p[g],g+=y;break}if(g+=y,a?g<0:m<=g)throw new s(i)}for(;a?g>=0:m>g;g+=y)g in p&&(h=u(h,p[g],g,f));return h}};return SE={left:o(!1),right:o(!0)},SE}var EE,s8;function Zb(){if(s8)return EE;s8=1;var t=kt();return EE=function(e,r){var n=[][e];return!!n&&t(function(){n.call(null,r||function(){return 1},1)})},EE}var _E,i8;function Nae(){if(i8)return _E;i8=1;var t=Ir(),e=qh(),r=aa(),n=function(s){return e.slice(0,s.length)===s};return _E=function(){return n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":t.Bun&&typeof Bun.version=="string"?"BUN":t.Deno&&typeof Deno.version=="object"?"DENO":r(t.process)==="process"?"NODE":t.window&&t.document?"BROWSER":"REST"}(),_E}var NE,o8;function Wje(){if(o8)return NE;o8=1;var t=Nae();return NE=t==="NODE",NE}var a8;function Vje(){if(a8)return r8;a8=1;var t=Ge(),e=zje().left,r=Zb(),n=Ym(),s=Wje(),i=!s&&n>79&&n<83,o=i||!r("reduce");return t({target:"Array",proto:!0,forced:o},{reduce:function(l){var u=arguments.length;return e(this,l,u,u>1?arguments[1]:void 0)}}),r8}var CE,l8;function Uje(){if(l8)return CE;l8=1,Vje();var t=ys();return CE=t("Array","reduce"),CE}var kE,c8;function Hje(){if(c8)return kE;c8=1;var t=Jr(),e=Uje(),r=Array.prototype;return kE=function(n){var s=n.reduce;return n===r||t(r,n)&&s===r.reduce?e:s},kE}var jE,u8;function Kje(){if(u8)return jE;u8=1;var t=Hje();return jE=t,jE}var TE,d8;function Gje(){return d8||(d8=1,TE=Kje()),TE}var Yje=Gje(),Qje=ut(Yje),h8={},f8;function Xje(){if(f8)return h8;f8=1;var t=Ge(),e=Kh().filter,r=Xm(),n=r("filter");return t({target:"Array",proto:!0,forced:!n},{filter:function(i){return e(this,i,arguments.length>1?arguments[1]:void 0)}}),h8}var OE,p8;function Jje(){if(p8)return OE;p8=1,Xje();var t=ys();return OE=t("Array","filter"),OE}var PE,m8;function Zje(){if(m8)return PE;m8=1;var t=Jr(),e=Jje(),r=Array.prototype;return PE=function(n){var s=n.filter;return n===r||t(r,n)&&s===r.filter?e:s},PE}var IE,g8;function eTe(){if(g8)return IE;g8=1;var t=Zje();return IE=t,IE}var RE,y8;function tTe(){return y8||(y8=1,RE=eTe()),RE}var rTe=tTe(),md=ut(rTe),v8={},b8;function nTe(){if(b8)return v8;b8=1;var t=Ge(),e=Kh().map,r=Xm(),n=r("map");return t({target:"Array",proto:!0,forced:!n},{map:function(i){return e(this,i,arguments.length>1?arguments[1]:void 0)}}),v8}var ME,x8;function sTe(){if(x8)return ME;x8=1,nTe();var t=ys();return ME=t("Array","map"),ME}var AE,w8;function iTe(){if(w8)return AE;w8=1;var t=Jr(),e=sTe(),r=Array.prototype;return AE=function(n){var s=n.map;return n===r||t(r,n)&&s===r.map?e:s},AE}var DE,S8;function oTe(){if(S8)return DE;S8=1;var t=iTe();return DE=t,DE}var $E,E8;function aTe(){return E8||(E8=1,$E=oTe()),$E}var lTe=aTe(),vi=ut(lTe),FE,_8;function cTe(){return _8||(_8=1,FE=xae()),FE}var uTe=cTe(),dTe=ut(uTe),N8={},C8;function hTe(){if(C8)return N8;C8=1;var t=Ge(),e=yu(),r=oae(),n=Yn(),s=SD(),i=Al(),o=io(),a=Hb(),l=en(),u=Xm(),d=Hh(),h=u("slice"),f=l("species"),p=Array,m=Math.max;return t({target:"Array",proto:!0,forced:!h},{slice:function(y,v){var b=o(this),w=i(b),x=s(y,w),S=s(v===void 0?w:v,w),E,N,_;if(e(b)&&(E=b.constructor,r(E)&&(E===p||e(E.prototype))?E=void 0:n(E)&&(E=E[f],E===null&&(E=void 0)),E===p||E===void 0))return d(b,x,S);for(N=new(E===void 0?p:E)(m(S-x,0)),_=0;x<S;x++,_++)x in b&&a(N,_,b[x]);return N.length=_,N}}),N8}var qE,k8;function fTe(){if(k8)return qE;k8=1,hTe();var t=ys();return qE=t("Array","slice"),qE}var LE,j8;function pTe(){if(j8)return LE;j8=1;var t=Jr(),e=fTe(),r=Array.prototype;return LE=function(n){var s=n.slice;return n===r||t(r,n)&&s===r.slice?e:s},LE}var BE,T8;function mTe(){if(T8)return BE;T8=1;var t=pTe();return BE=t,BE}var zE,O8;function gTe(){return O8||(O8=1,zE=mTe()),zE}var yTe=gTe(),vTe=ut(yTe),P8={},WE,I8;function Cae(){if(I8)return WE;I8=1;var t=Is(),e=At(),r=Yb(),n=Qb(),s=ca(),i=e([].concat);return WE=t("Reflect","ownKeys")||function(a){var l=r.f(s(a)),u=n.f;return u?i(l,u(a)):l},WE}var R8;function bTe(){if(R8)return P8;R8=1;var t=Ge(),e=Cae();return t({target:"Reflect",stat:!0},{ownKeys:e}),P8}var VE,M8;function xTe(){if(M8)return VE;M8=1,bTe();var t=Br();return VE=t.Reflect.ownKeys,VE}var UE,A8;function wTe(){if(A8)return UE;A8=1;var t=xTe();return UE=t,UE}var HE,D8;function STe(){return D8||(D8=1,HE=wTe()),HE}var ETe=STe(),_Te=ut(ETe),$8={},F8;function NTe(){if(F8)return $8;F8=1;var t=Ge(),e=yu();return t({target:"Array",stat:!0},{isArray:e}),$8}var KE,q8;function CTe(){if(q8)return KE;q8=1,NTe();var t=Br();return KE=t.Array.isArray,KE}var GE,L8;function kTe(){if(L8)return GE;L8=1;var t=CTe();return GE=t,GE}var YE,B8;function jTe(){return B8||(B8=1,YE=kTe()),YE}var TTe=jTe(),Li=ut(TTe),z8={},W8;function OTe(){if(W8)return z8;W8=1;var t=Ge(),e=Ti(),r=Kb(),n=kt(),s=n(function(){r(1)});return t({target:"Object",stat:!0,forced:s},{keys:function(o){return r(e(o))}}),z8}var QE,V8;function PTe(){if(V8)return QE;V8=1,OTe();var t=Br();return QE=t.Object.keys,QE}var XE,U8;function ITe(){if(U8)return XE;U8=1;var t=PTe();return XE=t,XE}var JE,H8;function RTe(){return H8||(H8=1,JE=ITe()),JE}var MTe=RTe(),jD=ut(MTe),K8={},ZE,G8;function ATe(){if(G8)return ZE;G8=1;var t=Kh().forEach,e=Zb(),r=e("forEach");return ZE=r?[].forEach:function(s){return t(this,s,arguments.length>1?arguments[1]:void 0)},ZE}var Y8;function DTe(){if(Y8)return K8;Y8=1;var t=Ge(),e=ATe();return t({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),K8}var e2,Q8;function $Te(){if(Q8)return e2;Q8=1,DTe();var t=ys();return e2=t("Array","forEach"),e2}var t2,X8;function FTe(){if(X8)return t2;X8=1;var t=$Te();return t2=t,t2}var r2,J8;function qTe(){if(J8)return r2;J8=1;var t=Dl(),e=Zr(),r=Jr(),n=FTe(),s=Array.prototype,i={DOMTokenList:!0,NodeList:!0};return r2=function(o){var a=o.forEach;return o===s||r(s,o)&&a===s.forEach||e(i,t(o))?n:a},r2}var n2,Z8;function LTe(){return Z8||(Z8=1,n2=qTe()),n2}var BTe=LTe(),tu=ut(BTe),e7={},t7;function zTe(){if(t7)return e7;t7=1;var t=Ge(),e=At(),r=yu(),n=e([].reverse),s=[1,2];return t({target:"Array",proto:!0,forced:String(s)===String(s.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),n(this)}}),e7}var s2,r7;function WTe(){if(r7)return s2;r7=1,zTe();var t=ys();return s2=t("Array","reverse"),s2}var i2,n7;function VTe(){if(n7)return i2;n7=1;var t=Jr(),e=WTe(),r=Array.prototype;return i2=function(n){var s=n.reverse;return n===r||t(r,n)&&s===r.reverse?e:s},i2}var o2,s7;function UTe(){if(s7)return o2;s7=1;var t=VTe();return o2=t,o2}var a2,i7;function HTe(){return i7||(i7=1,a2=UTe()),a2}var KTe=HTe(),GTe=ut(KTe),o7={},l2,a7;function YTe(){if(a7)return l2;a7=1;var t=Rr(),e=yu(),r=TypeError,n=Object.getOwnPropertyDescriptor,s=t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(i){return i instanceof TypeError}}();return l2=s?function(i,o){if(e(i)&&!n(i,"length").writable)throw new r("Cannot set read only .length");return i.length=o}:function(i,o){return i.length=o},l2}var c2,l7;function kae(){if(l7)return c2;l7=1;var t=Bh(),e=TypeError;return c2=function(r,n){if(!delete r[n])throw new e("Cannot delete property "+t(n)+" of "+t(r))},c2}var c7;function QTe(){if(c7)return o7;c7=1;var t=Ge(),e=Ti(),r=SD(),n=Uh(),s=Al(),i=YTe(),o=iae(),a=wD(),l=Hb(),u=kae(),d=Xm(),h=d("splice"),f=Math.max,p=Math.min;return t({target:"Array",proto:!0,forced:!h},{splice:function(g,y){var v=e(this),b=s(v),w=r(g,b),x=arguments.length,S,E,N,_,k,j;for(x===0?S=E=0:x===1?(S=0,E=b-w):(S=x-2,E=p(f(n(y),0),b-w)),o(b+S-E),N=a(v,E),_=0;_<E;_++)k=w+_,k in v&&l(N,_,v[k]);if(N.length=E,S<E){for(_=w;_<b-E;_++)k=_+E,j=_+S,k in v?v[j]=v[k]:u(v,j);for(_=b;_>b-E+S;_--)u(v,_-1)}else if(S>E)for(_=b-E;_>w;_--)k=_+E-1,j=_+S-1,k in v?v[j]=v[k]:u(v,j);for(_=0;_<S;_++)v[_+w]=arguments[_+2];return i(v,b-E+S),N}}),o7}var u2,u7;function XTe(){if(u7)return u2;u7=1,QTe();var t=ys();return u2=t("Array","splice"),u2}var d2,d7;function JTe(){if(d7)return d2;d7=1;var t=Jr(),e=XTe(),r=Array.prototype;return d2=function(n){var s=n.splice;return n===r||t(r,n)&&s===r.splice?e:s},d2}var h2,h7;function ZTe(){if(h7)return h2;h7=1;var t=JTe();return h2=t,h2}var f2,f7;function eOe(){return f7||(f7=1,f2=ZTe()),f2}var tOe=eOe(),jae=ut(tOe),p7={},p2,m7;function rOe(){if(m7)return p2;m7=1;var t=Rr(),e=At(),r=gs(),n=kt(),s=Kb(),i=Qb(),o=gD(),a=Ti(),l=zb(),u=Object.assign,d=Object.defineProperty,h=e([].concat);return p2=!u||n(function(){if(t&&u({b:1},u(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},p={},m=Symbol("assign detection"),g="abcdefghijklmnopqrst";return f[m]=7,g.split("").forEach(function(y){p[y]=y}),u({},f)[m]!==7||s(u({},p)).join("")!==g})?function(p,m){for(var g=a(p),y=arguments.length,v=1,b=i.f,w=o.f;y>v;)for(var x=l(arguments[v++]),S=b?h(s(x),b(x)):s(x),E=S.length,N=0,_;E>N;)_=S[N++],(!t||r(w,x,_))&&(g[_]=x[_]);return g}:u,p2}var g7;function nOe(){if(g7)return p7;g7=1;var t=Ge(),e=rOe();return t({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),p7}var m2,y7;function sOe(){if(y7)return m2;y7=1,nOe();var t=Br();return m2=t.Object.assign,m2}var g2,v7;function iOe(){if(v7)return g2;v7=1;var t=sOe();return g2=t,g2}var y2,b7;function oOe(){return b7||(b7=1,y2=iOe()),y2}var aOe=oOe(),lOe=ut(aOe),v2,x7;function cOe(){if(x7)return v2;x7=1,aae();var t=ys();return v2=t("Array","concat"),v2}var b2,w7;function uOe(){if(w7)return b2;w7=1;var t=Jr(),e=cOe(),r=Array.prototype;return b2=function(n){var s=n.concat;return n===r||t(r,n)&&s===r.concat?e:s},b2}var x2,S7;function dOe(){if(S7)return x2;S7=1;var t=uOe();return x2=t,x2}var w2,E7;function hOe(){return E7||(E7=1,w2=dOe()),w2}var fOe=hOe(),pOe=ut(fOe),_7={},N7;function mOe(){if(N7)return _7;N7=1;var t=Ge(),e=Rr(),r=Zm();return t({target:"Object",stat:!0,sham:!e},{create:r}),_7}var S2,C7;function gOe(){if(C7)return S2;C7=1,mOe();var t=Br(),e=t.Object;return S2=function(n,s){return e.create(n,s)},S2}var E2,k7;function yOe(){if(k7)return E2;k7=1;var t=gOe();return E2=t,E2}var _2,j7;function vOe(){return j7||(j7=1,_2=yOe()),_2}var bOe=vOe(),xOe=ut(bOe),T7={},N2,O7;function wOe(){if(O7)return N2;O7=1;var t=Uh(),e=$l(),r=gu(),n=RangeError;return N2=function(i){var o=e(r(this)),a="",l=t(i);if(l<0||l===1/0)throw new n("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(o+=o))l&1&&(a+=o);return a},N2}var C2,P7;function SOe(){if(P7)return C2;P7=1;var t=At(),e=sae(),r=$l(),n=wOe(),s=gu(),i=t(n),o=t("".slice),a=Math.ceil,l=function(u){return function(d,h,f){var p=r(s(d)),m=e(h),g=p.length,y=f===void 0?" ":r(f),v,b;return m<=g||y===""?p:(v=m-g,b=i(y,a(v/y.length)),b.length>v&&(b=o(b,0,v)),u?p+b:b+p)}};return C2={start:l(!1),end:l(!0)},C2}var k2,I7;function EOe(){if(I7)return k2;I7=1;var t=At(),e=kt(),r=SOe().start,n=RangeError,s=isFinite,i=Math.abs,o=Date.prototype,a=o.toISOString,l=t(o.getTime),u=t(o.getUTCDate),d=t(o.getUTCFullYear),h=t(o.getUTCHours),f=t(o.getUTCMilliseconds),p=t(o.getUTCMinutes),m=t(o.getUTCMonth),g=t(o.getUTCSeconds);return k2=e(function(){return a.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){a.call(new Date(NaN))})?function(){if(!s(l(this)))throw new n("Invalid time value");var v=this,b=d(v),w=f(v),x=b<0?"-":b>9999?"+":"";return x+r(i(b),x?6:4,0)+"-"+r(m(v)+1,2,0)+"-"+r(u(v),2,0)+"T"+r(h(v),2,0)+":"+r(p(v),2,0)+":"+r(g(v),2,0)+"."+r(w,3,0)+"Z"}:a,k2}var R7;function _Oe(){if(R7)return T7;R7=1;var t=Ge(),e=gs(),r=Ti(),n=Zoe(),s=EOe(),i=aa(),o=kt(),a=o(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return t({target:"Date",proto:!0,forced:a},{toJSON:function(u){var d=r(this),h=n(d,"number");return typeof h=="number"&&!isFinite(h)?null:!("toISOString"in d)&&i(d)==="Date"?e(s,d):d.toISOString()}}),T7}var j2,M7;function NOe(){if(M7)return j2;M7=1,_Oe(),hae();var t=Br(),e=Bb();return t.JSON||(t.JSON={stringify:JSON.stringify}),j2=function(n,s,i){return e(t.JSON.stringify,null,arguments)},j2}var T2,A7;function COe(){if(A7)return T2;A7=1;var t=NOe();return T2=t,T2}var O2,D7;function kOe(){return D7||(D7=1,O2=COe()),O2}var jOe=kOe(),TOe=ut(jOe),$7={},F7={},P2,q7;function OOe(){if(q7)return P2;q7=1;var t=TypeError;return P2=function(e,r){if(e<r)throw new t("Not enough arguments");return e},P2}var I2,L7;function Tae(){if(L7)return I2;L7=1;var t=Ir(),e=Bb(),r=Xr(),n=Nae(),s=qh(),i=Hh(),o=OOe(),a=t.Function,l=/MSIE .\./.test(s)||n==="BUN"&&function(){var u=t.Bun.version.split(".");return u.length<3||u[0]==="0"&&(u[1]<3||u[1]==="3"&&u[2]==="0")}();return I2=function(u,d){var h=d?2:1;return l?function(f,p){var m=o(arguments.length,1)>h,g=r(f)?f:a(f),y=m?i(arguments,h):[],v=m?function(){e(g,this,y)}:g;return d?u(v,p):u(v)}:u},I2}var B7;function POe(){if(B7)return F7;B7=1;var t=Ge(),e=Ir(),r=Tae(),n=r(e.setInterval,!0);return t({global:!0,bind:!0,forced:e.setInterval!==n},{setInterval:n}),F7}var z7={},W7;function IOe(){if(W7)return z7;W7=1;var t=Ge(),e=Ir(),r=Tae(),n=r(e.setTimeout,!0);return t({global:!0,bind:!0,forced:e.setTimeout!==n},{setTimeout:n}),z7}var V7;function ROe(){return V7||(V7=1,POe(),IOe()),$7}var R2,U7;function MOe(){if(U7)return R2;U7=1,ROe();var t=Br();return R2=t.setTimeout,R2}var M2,H7;function AOe(){return H7||(H7=1,M2=MOe()),M2}var DOe=AOe(),$Oe=ut(DOe),A2={exports:{}},K7;function FOe(){return K7||(K7=1,function(t){function e(n){if(n)return r(n);this._callbacks=new Map}function r(n){return Object.assign(n,e.prototype),n._callbacks=new Map,n}e.prototype.on=function(n,s){const i=this._callbacks.get(n)??[];return i.push(s),this._callbacks.set(n,i),this},e.prototype.once=function(n,s){const i=(...o)=>{this.off(n,i),s.apply(this,o)};return i.fn=s,this.on(n,i),this},e.prototype.off=function(n,s){if(n===void 0&&s===void 0)return this._callbacks.clear(),this;if(s===void 0)return this._callbacks.delete(n),this;const i=this._callbacks.get(n);if(i){for(const[o,a]of i.entries())if(a===s||a.fn===s){i.splice(o,1);break}i.length===0?this._callbacks.delete(n):this._callbacks.set(n,i)}return this},e.prototype.emit=function(n,...s){const i=this._callbacks.get(n);if(i){const o=[...i];for(const a of o)a.apply(this,s)}return this},e.prototype.listeners=function(n){return this._callbacks.get(n)??[]},e.prototype.listenerCount=function(n){if(n)return this.listeners(n).length;let s=0;for(const i of this._callbacks.values())s+=i.length;return s},e.prototype.hasListeners=function(n){return this.listenerCount(n)>0},e.prototype.addEventListener=e.prototype.on,e.prototype.removeListener=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,t.exports=e}(A2)),A2.exports}var qOe=FOe(),LOe=ut(qOe);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function Ci(){return Ci=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ci.apply(this,arguments)}function oi(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function by(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var DR;typeof Object.assign!="function"?DR=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var s=arguments[n];if(s!=null)for(var i in s)s.hasOwnProperty(i)&&(r[i]=s[i])}return r}:DR=Object.assign;var ru=DR,G7=["","webkit","Moz","MS","ms","o"],BOe=typeof document>"u"?{style:{}}:document.createElement("div"),zOe="function",gd=Math.round,nu=Math.abs,TD=Date.now;function ex(t,e){for(var r,n,s=e[0].toUpperCase()+e.slice(1),i=0;i<G7.length;){if(r=G7[i],n=r?r+s:e,n in t)return n;i++}}var Lo;typeof window>"u"?Lo={}:Lo=window;var Oae=ex(BOe.style,"touchAction"),Pae=Oae!==void 0;function WOe(){if(!Pae)return!1;var t={},e=Lo.CSS&&Lo.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){return t[r]=e?Lo.CSS.supports("touch-action",r):!0}),t}var Iae="compute",Rae="auto",$R="manipulation",Pc="none",lm="pan-x",cm="pan-y",xy=WOe(),VOe=/mobile|tablet|ip(ad|hone|od)|android/i,Mae="ontouchstart"in Lo,UOe=ex(Lo,"PointerEvent")!==void 0,HOe=Mae&&VOe.test(navigator.userAgent),rg="touch",KOe="pen",OD="mouse",GOe="kinect",YOe=25,Vn=1,bu=2,kr=4,ps=8,P0=1,ng=2,sg=4,ig=8,yh=16,Zi=ng|sg,Ic=ig|yh,Aae=Zi|Ic,Dae=["x","y"],I0=["clientX","clientY"];function Bo(t,e,r){var n;if(t)if(t.forEach)t.forEach(e,r);else if(t.length!==void 0)for(n=0;n<t.length;)e.call(r,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t)}function tx(t,e){return typeof t===zOe?t.apply(e&&e[0]||void 0,e):t}function uc(t,e){return t.indexOf(e)>-1}function QOe(t){if(uc(t,Pc))return Pc;var e=uc(t,lm),r=uc(t,cm);return e&&r?Pc:e||r?e?lm:cm:uc(t,$R)?$R:Rae}var $ae=function(){function t(r,n){this.manager=r,this.set(n)}var e=t.prototype;return e.set=function(n){n===Iae&&(n=this.compute()),Pae&&this.manager.element.style&&xy[n]&&(this.manager.element.style[Oae]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return Bo(this.manager.recognizers,function(s){tx(s.options.enable,[s])&&(n=n.concat(s.getTouchAction()))}),QOe(n.join(" "))},e.preventDefaults=function(n){var s=n.srcEvent,i=n.offsetDirection;if(this.manager.session.prevented){s.preventDefault();return}var o=this.actions,a=uc(o,Pc)&&!xy[Pc],l=uc(o,cm)&&!xy[cm],u=uc(o,lm)&&!xy[lm];if(a){var d=n.pointers.length===1,h=n.distance<2,f=n.deltaTime<250;if(d&&h&&f)return}if(!(u&&l)&&(a||l&&i&Zi||u&&i&Ic))return this.preventSrc(s)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},t}();function PD(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function Fae(t){var e=t.length;if(e===1)return{x:gd(t[0].clientX),y:gd(t[0].clientY)};for(var r=0,n=0,s=0;s<e;)r+=t[s].clientX,n+=t[s].clientY,s++;return{x:gd(r/e),y:gd(n/e)}}function Y7(t){for(var e=[],r=0;r<t.pointers.length;)e[r]={clientX:gd(t.pointers[r].clientX),clientY:gd(t.pointers[r].clientY)},r++;return{timeStamp:TD(),pointers:e,center:Fae(e),deltaX:t.deltaX,deltaY:t.deltaY}}function R0(t,e,r){r||(r=Dae);var n=e[r[0]]-t[r[0]],s=e[r[1]]-t[r[1]];return Math.sqrt(n*n+s*s)}function FR(t,e,r){r||(r=Dae);var n=e[r[0]]-t[r[0]],s=e[r[1]]-t[r[1]];return Math.atan2(s,n)*180/Math.PI}function qae(t,e){return t===e?P0:nu(t)>=nu(e)?t<0?ng:sg:e<0?ig:yh}function XOe(t,e){var r=e.center,n=t.offsetDelta||{},s=t.prevDelta||{},i=t.prevInput||{};(e.eventType===Vn||i.eventType===kr)&&(s=t.prevDelta={x:i.deltaX||0,y:i.deltaY||0},n=t.offsetDelta={x:r.x,y:r.y}),e.deltaX=s.x+(r.x-n.x),e.deltaY=s.y+(r.y-n.y)}function Lae(t,e,r){return{x:e/t||0,y:r/t||0}}function JOe(t,e){return R0(e[0],e[1],I0)/R0(t[0],t[1],I0)}function ZOe(t,e){return FR(e[1],e[0],I0)+FR(t[1],t[0],I0)}function ePe(t,e){var r=t.lastInterval||e,n=e.timeStamp-r.timeStamp,s,i,o,a;if(e.eventType!==ps&&(n>YOe||r.velocity===void 0)){var l=e.deltaX-r.deltaX,u=e.deltaY-r.deltaY,d=Lae(n,l,u);i=d.x,o=d.y,s=nu(d.x)>nu(d.y)?d.x:d.y,a=qae(l,u),t.lastInterval=e}else s=r.velocity,i=r.velocityX,o=r.velocityY,a=r.direction;e.velocity=s,e.velocityX=i,e.velocityY=o,e.direction=a}function tPe(t,e){var r=t.session,n=e.pointers,s=n.length;r.firstInput||(r.firstInput=Y7(e)),s>1&&!r.firstMultiple?r.firstMultiple=Y7(e):s===1&&(r.firstMultiple=!1);var i=r.firstInput,o=r.firstMultiple,a=o?o.center:i.center,l=e.center=Fae(n);e.timeStamp=TD(),e.deltaTime=e.timeStamp-i.timeStamp,e.angle=FR(a,l),e.distance=R0(a,l),XOe(r,e),e.offsetDirection=qae(e.deltaX,e.deltaY);var u=Lae(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=nu(u.x)>nu(u.y)?u.x:u.y,e.scale=o?JOe(o.pointers,n):1,e.rotation=o?ZOe(o.pointers,n):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,ePe(r,e);var d=t.element,h=e.srcEvent,f;h.composedPath?f=h.composedPath()[0]:h.path?f=h.path[0]:f=h.target,PD(f,d)&&(d=f),e.target=d}function rPe(t,e,r){var n=r.pointers.length,s=r.changedPointers.length,i=e&Vn&&n-s===0,o=e&(kr|ps)&&n-s===0;r.isFirst=!!i,r.isFinal=!!o,i&&(t.session={}),r.eventType=e,tPe(t,r),t.emit("hammer.input",r),t.recognize(r),t.session.prevInput=r}function um(t){return t.trim().split(/\s+/g)}function bp(t,e,r){Bo(um(e),function(n){t.addEventListener(n,r,!1)})}function xp(t,e,r){Bo(um(e),function(n){t.removeEventListener(n,r,!1)})}function Q7(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var Yh=function(){function t(r,n){var s=this;this.manager=r,this.callback=n,this.element=r.element,this.target=r.options.inputTarget,this.domHandler=function(i){tx(r.options.enable,[r])&&s.handler(i)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&bp(this.element,this.evEl,this.domHandler),this.evTarget&&bp(this.target,this.evTarget,this.domHandler),this.evWin&&bp(Q7(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&xp(this.element,this.evEl,this.domHandler),this.evTarget&&xp(this.target,this.evTarget,this.domHandler),this.evWin&&xp(Q7(this.element),this.evWin,this.domHandler)},t}();function su(t,e,r){if(t.indexOf&&!r)return t.indexOf(e);for(var n=0;n<t.length;){if(r&&t[n][r]==e||!r&&t[n]===e)return n;n++}return-1}var nPe={pointerdown:Vn,pointermove:bu,pointerup:kr,pointercancel:ps,pointerout:ps},sPe={2:rg,3:KOe,4:OD,5:GOe},Bae="pointerdown",zae="pointermove pointerup pointercancel";Lo.MSPointerEvent&&!Lo.PointerEvent&&(Bae="MSPointerDown",zae="MSPointerMove MSPointerUp MSPointerCancel");var Wae=function(t){oi(e,t);function e(){var n,s=e.prototype;return s.evEl=Bae,s.evWin=zae,n=t.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var r=e.prototype;return r.handler=function(s){var i=this.store,o=!1,a=s.type.toLowerCase().replace("ms",""),l=nPe[a],u=sPe[s.pointerType]||s.pointerType,d=u===rg,h=su(i,s.pointerId,"pointerId");l&Vn&&(s.button===0||d)?h<0&&(i.push(s),h=i.length-1):l&(kr|ps)&&(o=!0),!(h<0)&&(i[h]=s,this.callback(this.manager,l,{pointers:i,changedPointers:[s],pointerType:u,srcEvent:s}),o&&i.splice(h,1))},e}(Yh);function dm(t){return Array.prototype.slice.call(t,0)}function ID(t,e,r){for(var n=[],s=[],i=0;i<t.length;){var o=e?t[i][e]:t[i];su(s,o)<0&&n.push(t[i]),s[i]=o,i++}return r&&(e?n=n.sort(function(a,l){return a[e]>l[e]}):n=n.sort()),n}var iPe={touchstart:Vn,touchmove:bu,touchend:kr,touchcancel:ps},oPe="touchstart touchmove touchend touchcancel",RD=function(t){oi(e,t);function e(){var n;return e.prototype.evTarget=oPe,n=t.apply(this,arguments)||this,n.targetIds={},n}var r=e.prototype;return r.handler=function(s){var i=iPe[s.type],o=aPe.call(this,s,i);o&&this.callback(this.manager,i,{pointers:o[0],changedPointers:o[1],pointerType:rg,srcEvent:s})},e}(Yh);function aPe(t,e){var r=dm(t.touches),n=this.targetIds;if(e&(Vn|bu)&&r.length===1)return n[r[0].identifier]=!0,[r,r];var s,i,o=dm(t.changedTouches),a=[],l=this.target;if(i=r.filter(function(u){return PD(u.target,l)}),e===Vn)for(s=0;s<i.length;)n[i[s].identifier]=!0,s++;for(s=0;s<o.length;)n[o[s].identifier]&&a.push(o[s]),e&(kr|ps)&&delete n[o[s].identifier],s++;if(a.length)return[ID(i.concat(a),"identifier",!0),a]}var lPe={mousedown:Vn,mousemove:bu,mouseup:kr},cPe="mousedown",uPe="mousemove mouseup",MD=function(t){oi(e,t);function e(){var n,s=e.prototype;return s.evEl=cPe,s.evWin=uPe,n=t.apply(this,arguments)||this,n.pressed=!1,n}var r=e.prototype;return r.handler=function(s){var i=lPe[s.type];i&Vn&&s.button===0&&(this.pressed=!0),i&bu&&s.which!==1&&(i=kr),this.pressed&&(i&kr&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[s],changedPointers:[s],pointerType:OD,srcEvent:s}))},e}(Yh),dPe=2500,X7=25;function J7(t){var e=t.changedPointers,r=e[0];if(r.identifier===this.primaryTouch){var n={x:r.clientX,y:r.clientY},s=this.lastTouches;this.lastTouches.push(n);var i=function(){var a=s.indexOf(n);a>-1&&s.splice(a,1)};setTimeout(i,dPe)}}function hPe(t,e){t&Vn?(this.primaryTouch=e.changedPointers[0].identifier,J7.call(this,e)):t&(kr|ps)&&J7.call(this,e)}function fPe(t){for(var e=t.srcEvent.clientX,r=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var s=this.lastTouches[n],i=Math.abs(e-s.x),o=Math.abs(r-s.y);if(i<=X7&&o<=X7)return!0}return!1}var Vae=function(){var t=function(e){oi(r,e);function r(s,i){var o;return o=e.call(this,s,i)||this,o.handler=function(a,l,u){var d=u.pointerType===rg,h=u.pointerType===OD;if(!(h&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(d)hPe.call(by(by(o)),l,u);else if(h&&fPe.call(by(by(o)),u))return;o.callback(a,l,u)}},o.touch=new RD(o.manager,o.handler),o.mouse=new MD(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=r.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},r}(Yh);return t}();function pPe(t){var e,r=t.options.inputClass;return r?e=r:UOe?e=Wae:HOe?e=RD:Mae?e=Vae:e=MD,new e(t,rPe)}function yd(t,e,r){return Array.isArray(t)?(Bo(t,r[e],r),!0):!1}var Xy=1,ti=2,vh=4,pl=8,zo=pl,hm=16,Ki=32,mPe=1;function gPe(){return mPe++}function wy(t,e){var r=e.manager;return r?r.get(t):t}function Z7(t){return t&hm?"cancel":t&pl?"end":t&vh?"move":t&ti?"start":""}var og=function(){function t(r){r===void 0&&(r={}),this.options=Ci({enable:!0},r),this.id=gPe(),this.manager=null,this.state=Xy,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(n){return ru(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(yd(n,"recognizeWith",this))return this;var s=this.simultaneous;return n=wy(n,this),s[n.id]||(s[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return yd(n,"dropRecognizeWith",this)?this:(n=wy(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(yd(n,"requireFailure",this))return this;var s=this.requireFail;return n=wy(n,this),su(s,n)===-1&&(s.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(yd(n,"dropRequireFailure",this))return this;n=wy(n,this);var s=su(this.requireFail,n);return s>-1&&this.requireFail.splice(s,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var s=this,i=this.state;function o(a){s.manager.emit(a,n)}i<pl&&o(s.options.event+Z7(i)),o(s.options.event),n.additionalEvent&&o(n.additionalEvent),i>=pl&&o(s.options.event+Z7(i))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=Ki},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(Ki|Xy)))return!1;n++}return!0},e.recognize=function(n){var s=ru({},n);if(!tx(this.options.enable,[this,s])){this.reset(),this.state=Ki;return}this.state&(zo|hm|Ki)&&(this.state=Xy),this.state=this.process(s),this.state&(ti|vh|pl|hm)&&this.tryEmit(s)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},t}(),qR=function(t){oi(e,t);function e(n){var s;return n===void 0&&(n={}),s=t.call(this,Ci({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,s.pTime=!1,s.pCenter=!1,s._timer=null,s._input=null,s.count=0,s}var r=e.prototype;return r.getTouchAction=function(){return[$R]},r.process=function(s){var i=this,o=this.options,a=s.pointers.length===o.pointers,l=s.distance<o.threshold,u=s.deltaTime<o.time;if(this.reset(),s.eventType&Vn&&this.count===0)return this.failTimeout();if(l&&u&&a){if(s.eventType!==kr)return this.failTimeout();var d=this.pTime?s.timeStamp-this.pTime<o.interval:!0,h=!this.pCenter||R0(this.pCenter,s.center)<o.posThreshold;this.pTime=s.timeStamp,this.pCenter=s.center,!h||!d?this.count=1:this.count+=1,this._input=s;var f=this.count%o.taps;if(f===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){i.state=zo,i.tryEmit()},o.interval),ti):zo}return Ki},r.failTimeout=function(){var s=this;return this._timer=setTimeout(function(){s.state=Ki},this.options.interval),Ki},r.reset=function(){clearTimeout(this._timer)},r.emit=function(){this.state===zo&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(og),bh=function(t){oi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,Ci({pointers:1},n))||this}var r=e.prototype;return r.attrTest=function(s){var i=this.options.pointers;return i===0||s.pointers.length===i},r.process=function(s){var i=this.state,o=s.eventType,a=i&(ti|vh),l=this.attrTest(s);return a&&(o&ps||!l)?i|hm:a||l?o&kr?i|pl:i&ti?i|vh:ti:Ki},e}(og);function Uae(t){return t===yh?"down":t===ig?"up":t===ng?"left":t===sg?"right":""}var AD=function(t){oi(e,t);function e(n){var s;return n===void 0&&(n={}),s=t.call(this,Ci({event:"pan",threshold:10,pointers:1,direction:Aae},n))||this,s.pX=null,s.pY=null,s}var r=e.prototype;return r.getTouchAction=function(){var s=this.options.direction,i=[];return s&Zi&&i.push(cm),s&Ic&&i.push(lm),i},r.directionTest=function(s){var i=this.options,o=!0,a=s.distance,l=s.direction,u=s.deltaX,d=s.deltaY;return l&i.direction||(i.direction&Zi?(l=u===0?P0:u<0?ng:sg,o=u!==this.pX,a=Math.abs(s.deltaX)):(l=d===0?P0:d<0?ig:yh,o=d!==this.pY,a=Math.abs(s.deltaY))),s.direction=l,o&&a>i.threshold&&l&i.direction},r.attrTest=function(s){return bh.prototype.attrTest.call(this,s)&&(this.state&ti||!(this.state&ti)&&this.directionTest(s))},r.emit=function(s){this.pX=s.deltaX,this.pY=s.deltaY;var i=Uae(s.direction);i&&(s.additionalEvent=this.options.event+i),t.prototype.emit.call(this,s)},e}(bh),Hae=function(t){oi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,Ci({event:"swipe",threshold:10,velocity:.3,direction:Zi|Ic,pointers:1},n))||this}var r=e.prototype;return r.getTouchAction=function(){return AD.prototype.getTouchAction.call(this)},r.attrTest=function(s){var i=this.options.direction,o;return i&(Zi|Ic)?o=s.overallVelocity:i&Zi?o=s.overallVelocityX:i&Ic&&(o=s.overallVelocityY),t.prototype.attrTest.call(this,s)&&i&s.offsetDirection&&s.distance>this.options.threshold&&s.maxPointers===this.options.pointers&&nu(o)>this.options.velocity&&s.eventType&kr},r.emit=function(s){var i=Uae(s.offsetDirection);i&&this.manager.emit(this.options.event+i,s),this.manager.emit(this.options.event,s)},e}(bh),Kae=function(t){oi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,Ci({event:"pinch",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[Pc]},r.attrTest=function(s){return t.prototype.attrTest.call(this,s)&&(Math.abs(s.scale-1)>this.options.threshold||this.state&ti)},r.emit=function(s){if(s.scale!==1){var i=s.scale<1?"in":"out";s.additionalEvent=this.options.event+i}t.prototype.emit.call(this,s)},e}(bh),Gae=function(t){oi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,Ci({event:"rotate",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[Pc]},r.attrTest=function(s){return t.prototype.attrTest.call(this,s)&&(Math.abs(s.rotation)>this.options.threshold||this.state&ti)},e}(bh),Yae=function(t){oi(e,t);function e(n){var s;return n===void 0&&(n={}),s=t.call(this,Ci({event:"press",pointers:1,time:251,threshold:9},n))||this,s._timer=null,s._input=null,s}var r=e.prototype;return r.getTouchAction=function(){return[Rae]},r.process=function(s){var i=this,o=this.options,a=s.pointers.length===o.pointers,l=s.distance<o.threshold,u=s.deltaTime>o.time;if(this._input=s,!l||!a||s.eventType&(kr|ps)&&!u)this.reset();else if(s.eventType&Vn)this.reset(),this._timer=setTimeout(function(){i.state=zo,i.tryEmit()},o.time);else if(s.eventType&kr)return zo;return Ki},r.reset=function(){clearTimeout(this._timer)},r.emit=function(s){this.state===zo&&(s&&s.eventType&kr?this.manager.emit(this.options.event+"up",s):(this._input.timeStamp=TD(),this.manager.emit(this.options.event,this._input)))},e}(og),Qae={domEvents:!1,touchAction:Iae,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},ez=[[Gae,{enable:!1}],[Kae,{enable:!1},["rotate"]],[Hae,{direction:Zi}],[AD,{direction:Zi},["swipe"]],[qR],[qR,{event:"doubletap",taps:2},["tap"]],[Yae]],yPe=1,tz=2;function rz(t,e){var r=t.element;if(r.style){var n;Bo(t.options.cssProps,function(s,i){n=ex(r.style,i),e?(t.oldCssProps[n]=r.style[n],r.style[n]=s):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function vPe(t,e){var r=document.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}var nz=function(){function t(r,n){var s=this;this.options=ru({},Qae,n||{}),this.options.inputTarget=this.options.inputTarget||r,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=r,this.input=pPe(this),this.touchAction=new $ae(this,this.options.touchAction),rz(this,!0),Bo(this.options.recognizers,function(i){var o=s.add(new i[0](i[1]));i[2]&&o.recognizeWith(i[2]),i[3]&&o.requireFailure(i[3])},this)}var e=t.prototype;return e.set=function(n){return ru(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?tz:yPe},e.recognize=function(n){var s=this.session;if(!s.stopped){this.touchAction.preventDefaults(n);var i,o=this.recognizers,a=s.curRecognizer;(!a||a&&a.state&zo)&&(s.curRecognizer=null,a=null);for(var l=0;l<o.length;)i=o[l],s.stopped!==tz&&(!a||i===a||i.canRecognizeWith(a))?i.recognize(n):i.reset(),!a&&i.state&(ti|vh|pl)&&(s.curRecognizer=i,a=i),l++}},e.get=function(n){if(n instanceof og)return n;for(var s=this.recognizers,i=0;i<s.length;i++)if(s[i].options.event===n)return s[i];return null},e.add=function(n){if(yd(n,"add",this))return this;var s=this.get(n.options.event);return s&&this.remove(s),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(yd(n,"remove",this))return this;var s=this.get(n);if(n){var i=this.recognizers,o=su(i,s);o!==-1&&(i.splice(o,1),this.touchAction.update())}return this},e.on=function(n,s){if(n===void 0||s===void 0)return this;var i=this.handlers;return Bo(um(n),function(o){i[o]=i[o]||[],i[o].push(s)}),this},e.off=function(n,s){if(n===void 0)return this;var i=this.handlers;return Bo(um(n),function(o){s?i[o]&&i[o].splice(su(i[o],s),1):delete i[o]}),this},e.emit=function(n,s){this.options.domEvents&&vPe(n,s);var i=this.handlers[n]&&this.handlers[n].slice();if(!(!i||!i.length)){s.type=n,s.preventDefault=function(){s.srcEvent.preventDefault()};for(var o=0;o<i.length;)i[o](s),o++}},e.destroy=function(){this.element&&rz(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),bPe={touchstart:Vn,touchmove:bu,touchend:kr,touchcancel:ps},xPe="touchstart",wPe="touchstart touchmove touchend touchcancel",SPe=function(t){oi(e,t);function e(){var n,s=e.prototype;return s.evTarget=xPe,s.evWin=wPe,n=t.apply(this,arguments)||this,n.started=!1,n}var r=e.prototype;return r.handler=function(s){var i=bPe[s.type];if(i===Vn&&(this.started=!0),!!this.started){var o=EPe.call(this,s,i);i&(kr|ps)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,i,{pointers:o[0],changedPointers:o[1],pointerType:rg,srcEvent:s})}},e}(Yh);function EPe(t,e){var r=dm(t.touches),n=dm(t.changedTouches);return e&(kr|ps)&&(r=ID(r.concat(n),"identifier",!0)),[r,n]}function Xae(t,e,r){var n="DEPRECATED METHOD: "+e+`
`+r+` AT 
`;return function(){var s=new Error("get-stack-trace"),i=s&&s.stack?s.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,i),t.apply(this,arguments)}}var Jae=Xae(function(t,e,r){for(var n=Object.keys(e),s=0;s<n.length;)(!r||r&&t[n[s]]===void 0)&&(t[n[s]]=e[n[s]]),s++;return t},"extend","Use `assign`."),_Pe=Xae(function(t,e){return Jae(t,e,!0)},"merge","Use `assign`.");function NPe(t,e,r){var n=e.prototype,s;s=t.prototype=Object.create(n),s.constructor=t,s._super=n,r&&ru(s,r)}function sz(t,e){return function(){return t.apply(e,arguments)}}var CPe=function(){var t=function(r,n){return n===void 0&&(n={}),new nz(r,Ci({recognizers:ez.concat()},n))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=Aae,t.DIRECTION_DOWN=yh,t.DIRECTION_LEFT=ng,t.DIRECTION_RIGHT=sg,t.DIRECTION_UP=ig,t.DIRECTION_HORIZONTAL=Zi,t.DIRECTION_VERTICAL=Ic,t.DIRECTION_NONE=P0,t.DIRECTION_DOWN=yh,t.INPUT_START=Vn,t.INPUT_MOVE=bu,t.INPUT_END=kr,t.INPUT_CANCEL=ps,t.STATE_POSSIBLE=Xy,t.STATE_BEGAN=ti,t.STATE_CHANGED=vh,t.STATE_ENDED=pl,t.STATE_RECOGNIZED=zo,t.STATE_CANCELLED=hm,t.STATE_FAILED=Ki,t.Manager=nz,t.Input=Yh,t.TouchAction=$ae,t.TouchInput=RD,t.MouseInput=MD,t.PointerEventInput=Wae,t.TouchMouseInput=Vae,t.SingleTouchInput=SPe,t.Recognizer=og,t.AttrRecognizer=bh,t.Tap=qR,t.Pan=AD,t.Swipe=Hae,t.Pinch=Kae,t.Rotate=Gae,t.Press=Yae,t.on=bp,t.off=xp,t.each=Bo,t.merge=_Pe,t.extend=Jae,t.bindFn=sz,t.assign=ru,t.inherit=NPe,t.bindFn=sz,t.prefixed=ex,t.toArray=dm,t.inArray=su,t.uniqueArray=ID,t.splitStr=um,t.boolOrFn=tx,t.hasParent=PD,t.addEventListeners=bp,t.removeEventListeners=xp,t.defaults=ru({},Qae,{preset:ez}),t}();const Zae=dTe("DELETE");function kPe(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return ele({},t,...r)}function ele(){const t=M0(...arguments);return rle(t),t}function M0(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(e.length<2)return e[0];if(e.length>2)return M0(ele(e[0],e[1]),...vTe(e).call(e,2));const n=e[0],s=e[1];if(n instanceof Date&&s instanceof Date)return n.setTime(s.getTime()),n;for(const i of _Te(s))Object.prototype.propertyIsEnumerable.call(s,i)&&(s[i]===Zae?delete n[i]:n[i]!==null&&s[i]!==null&&typeof n[i]=="object"&&typeof s[i]=="object"&&!Li(n[i])&&!Li(s[i])?n[i]=M0(n[i],s[i]):n[i]=tle(s[i]));return n}function tle(t){return Li(t)?vi(t).call(t,e=>tle(e)):typeof t=="object"&&t!==null?t instanceof Date?new Date(t.getTime()):M0({},t):t}function rle(t){for(const e of jD(t))t[e]===Zae?delete t[e]:typeof t[e]=="object"&&t[e]!==null&&rle(t[e])}function jPe(){const t=()=>{};return{on:t,off:t,destroy:t,emit:t,get(){return{set:t}}}}const TPe=typeof window<"u"?window.Hammer||CPe:function(){return jPe()};function Ao(t){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const r=TPe(this._dom.overlay);r.on("tap",_ae(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{r.destroy()});const n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];tu(n).call(n,s=>{r.on(s,i=>{i.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=s=>{OPe(s.target,t)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=s=>{("key"in s?s.key==="Escape":s.keyCode===27)&&this.deactivate()}}LOe(Ao.prototype);Ao.current=null;Ao.prototype.destroy=function(){this.deactivate();for(const r of GTe(t=jae(e=this._cleanupQueue).call(e,0)).call(t)){var t,e;r()}};Ao.prototype.activate=function(){Ao.current&&Ao.current.deactivate(),Ao.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};Ao.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};Ao.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};function OPe(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}var D2,iz;function PPe(){if(iz)return D2;iz=1,fae();var t=Br();return D2=t.Object.getOwnPropertySymbols,D2}var $2,oz;function IPe(){if(oz)return $2;oz=1;var t=PPe();return $2=t,$2}var F2,az;function RPe(){return az||(az=1,F2=IPe()),F2}var MPe=RPe(),lz=ut(MPe),q2={exports:{}},cz={},uz;function APe(){if(uz)return cz;uz=1;var t=Ge(),e=kt(),r=io(),n=Vb().f,s=Rr(),i=!s||e(function(){n(1)});return t({target:"Object",stat:!0,forced:i,sham:!s},{getOwnPropertyDescriptor:function(a,l){return n(r(a),l)}}),cz}var dz;function DPe(){if(dz)return q2.exports;dz=1,APe();var t=Br(),e=t.Object,r=q2.exports=function(s,i){return e.getOwnPropertyDescriptor(s,i)};return e.getOwnPropertyDescriptor.sham&&(r.sham=!0),q2.exports}var L2,hz;function $Pe(){if(hz)return L2;hz=1;var t=DPe();return L2=t,L2}var B2,fz;function FPe(){return fz||(fz=1,B2=$Pe()),B2}var qPe=FPe(),nle=ut(qPe),pz={},mz;function LPe(){if(mz)return pz;mz=1;var t=Ge(),e=Rr(),r=Cae(),n=io(),s=Vb(),i=Hb();return t({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(a){for(var l=n(a),u=s.f,d=r(l),h={},f=0,p,m;d.length>f;)m=u(l,p=d[f++]),m!==void 0&&i(h,p,m);return h}}),pz}var z2,gz;function BPe(){if(gz)return z2;gz=1,LPe();var t=Br();return z2=t.Object.getOwnPropertyDescriptors,z2}var W2,yz;function zPe(){if(yz)return W2;yz=1;var t=BPe();return W2=t,W2}var V2,vz;function WPe(){return vz||(vz=1,V2=zPe()),V2}var VPe=WPe(),bz=ut(VPe),U2={exports:{}},xz={},wz;function UPe(){if(wz)return xz;wz=1;var t=Ge(),e=Rr(),r=_D().f;return t({target:"Object",stat:!0,forced:Object.defineProperties!==r,sham:!e},{defineProperties:r}),xz}var Sz;function HPe(){if(Sz)return U2.exports;Sz=1,UPe();var t=Br(),e=t.Object,r=U2.exports=function(s,i){return e.defineProperties(s,i)};return e.defineProperties.sham&&(r.sham=!0),U2.exports}var H2,Ez;function KPe(){if(Ez)return H2;Ez=1;var t=HPe();return H2=t,H2}var K2,_z;function GPe(){return _z||(_z=1,K2=KPe()),K2}var YPe=GPe(),QPe=ut(YPe),G2,Nz;function XPe(){return Nz||(Nz=1,G2=nae()),G2}var JPe=XPe(),ZPe=ut(JPe),Cz={},kz={},Y2={exports:{}},Q2,jz;function eIe(){if(jz)return Q2;jz=1;var t=kt();return Q2=t(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),Q2}var X2,Tz;function tIe(){if(Tz)return X2;Tz=1;var t=kt(),e=Yn(),r=aa(),n=eIe(),s=Object.isExtensible,i=t(function(){});return X2=i||n?function(a){return!e(a)||n&&r(a)==="ArrayBuffer"?!1:s?s(a):!0}:s,X2}var J2,Oz;function rIe(){if(Oz)return J2;Oz=1;var t=kt();return J2=!t(function(){return Object.isExtensible(Object.preventExtensions({}))}),J2}var Pz;function sle(){if(Pz)return Y2.exports;Pz=1;var t=Ge(),e=At(),r=Jm(),n=Yn(),s=Zr(),i=ii().f,o=Yb(),a=cae(),l=tIe(),u=Wb(),d=rIe(),h=!1,f=u("meta"),p=0,m=function(x){i(x,f,{value:{objectID:"O"+p++,weakData:{}}})},g=function(x,S){if(!n(x))return typeof x=="symbol"?x:(typeof x=="string"?"S":"P")+x;if(!s(x,f)){if(!l(x))return"F";if(!S)return"E";m(x)}return x[f].objectID},y=function(x,S){if(!s(x,f)){if(!l(x))return!0;if(!S)return!1;m(x)}return x[f].weakData},v=function(x){return d&&h&&l(x)&&!s(x,f)&&m(x),x},b=function(){w.enable=function(){},h=!0;var x=o.f,S=e([].splice),E={};E[f]=1,x(E).length&&(o.f=function(N){for(var _=x(N),k=0,j=_.length;k<j;k++)if(_[k]===f){S(_,k,1);break}return _},t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:a.f}))},w=Y2.exports={enable:b,fastKey:g,getWeakData:y,onFreeze:v};return r[f]=!0,Y2.exports}var Z2,Iz;function nIe(){if(Iz)return Z2;Iz=1;var t=en(),e=Gh(),r=t("iterator"),n=Array.prototype;return Z2=function(s){return s!==void 0&&(e.Array===s||n[r]===s)},Z2}var e_,Rz;function ile(){if(Rz)return e_;Rz=1;var t=Dl(),e=yD(),r=Gm(),n=Gh(),s=en(),i=s("iterator");return e_=function(o){if(!r(o))return e(o,i)||e(o,"@@iterator")||n[t(o)]},e_}var t_,Mz;function ole(){if(Mz)return t_;Mz=1;var t=gs(),e=la(),r=ca(),n=Bh(),s=ile(),i=TypeError;return t_=function(o,a){var l=arguments.length<2?s(o):a;if(e(l))return r(t(l,o));throw new i(n(o)+" is not iterable")},t_}var r_,Az;function DD(){if(Az)return r_;Az=1;var t=gs(),e=ca(),r=yD();return r_=function(n,s,i){var o,a;e(n);try{if(o=r(n,"return"),!o){if(s==="throw")throw i;return i}o=t(o,n)}catch(l){a=!0,o=l}if(s==="throw")throw i;if(a)throw o;return e(o),i},r_}var n_,Dz;function $D(){if(Dz)return n_;Dz=1;var t=Ub(),e=gs(),r=ca(),n=Bh(),s=nIe(),i=Al(),o=Jr(),a=ole(),l=ile(),u=DD(),d=TypeError,h=function(p,m){this.stopped=p,this.result=m},f=h.prototype;return n_=function(p,m,g){var y=g&&g.that,v=!!(g&&g.AS_ENTRIES),b=!!(g&&g.IS_RECORD),w=!!(g&&g.IS_ITERATOR),x=!!(g&&g.INTERRUPTED),S=t(m,y),E,N,_,k,j,T,P,O=function(F){return E&&u(E,"normal"),new h(!0,F)},D=function(F){return v?(r(F),x?S(F[0],F[1],O):S(F[0],F[1])):x?S(F,O):S(F)};if(b)E=p.iterator;else if(w)E=p;else{if(N=l(p),!N)throw new d(n(p)+" is not iterable");if(s(N)){for(_=0,k=i(p);k>_;_++)if(j=D(p[_]),j&&o(f,j))return j;return new h(!1)}E=a(p,N)}for(T=b?p.next:E.next;!(P=e(T,E)).done;){try{j=D(P.value)}catch(F){u(E,"throw",F)}if(typeof j=="object"&&j&&o(f,j))return j}return new h(!1)},n_}var s_,$z;function ale(){if($z)return s_;$z=1;var t=Jr(),e=TypeError;return s_=function(r,n){if(t(n,r))return r;throw new e("Incorrect invocation")},s_}var i_,Fz;function lle(){if(Fz)return i_;Fz=1;var t=Ge(),e=Ir(),r=sle(),n=kt(),s=Vh(),i=$D(),o=ale(),a=Xr(),l=Yn(),u=Gm(),d=vu(),h=ii().f,f=Kh().forEach,p=Rr(),m=tg(),g=m.set,y=m.getterFor;return i_=function(v,b,w){var x=v.indexOf("Map")!==-1,S=v.indexOf("Weak")!==-1,E=x?"set":"add",N=e[v],_=N&&N.prototype,k={},j;if(!p||!a(N)||!(S||_.forEach&&!n(function(){new N().entries().next()})))j=w.getConstructor(b,v,x,E),r.enable();else{j=b(function(O,D){g(o(O,T),{type:v,collection:new N}),u(D)||i(D,O[E],{that:O,AS_ENTRIES:x})});var T=j.prototype,P=y(v);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(O){var D=O==="add"||O==="set";O in _&&!(S&&O==="clear")&&s(T,O,function(F,$){var q=P(this).collection;if(!D&&S&&!l(F))return O==="get"?void 0:!1;var M=q[O](F===0?0:F,$);return D?this:M})}),S||h(T,"size",{configurable:!0,get:function(){return P(this).collection.size}})}return d(j,v,!1,!0),k[v]=j,t({global:!0,forced:!0},k),S||w.setStrong(j,v,x),j},i_}var o_,qz;function sIe(){if(qz)return o_;qz=1;var t=eg();return o_=function(e,r,n){for(var s in r)n&&n.unsafe&&e[s]?e[s]=r[s]:t(e,s,r[s],n);return e},o_}var a_,Lz;function iIe(){if(Lz)return a_;Lz=1;var t=Is(),e=ND(),r=en(),n=Rr(),s=r("species");return a_=function(i){var o=t(i);n&&o&&!o[s]&&e(o,s,{configurable:!0,get:function(){return this}})},a_}var l_,Bz;function cle(){if(Bz)return l_;Bz=1;var t=Zm(),e=ND(),r=sIe(),n=Ub(),s=ale(),i=Gm(),o=$D(),a=CD(),l=kD(),u=iIe(),d=Rr(),h=sle().fastKey,f=tg(),p=f.set,m=f.getterFor;return l_={getConstructor:function(g,y,v,b){var w=g(function(_,k){s(_,x),p(_,{type:y,index:t(null),first:null,last:null,size:0}),d||(_.size=0),i(k)||o(k,_[b],{that:_,AS_ENTRIES:v})}),x=w.prototype,S=m(y),E=function(_,k,j){var T=S(_),P=N(_,k),O,D;return P?P.value=j:(T.last=P={index:D=h(k,!0),key:k,value:j,previous:O=T.last,next:null,removed:!1},T.first||(T.first=P),O&&(O.next=P),d?T.size++:_.size++,D!=="F"&&(T.index[D]=P)),_},N=function(_,k){var j=S(_),T=h(k),P;if(T!=="F")return j.index[T];for(P=j.first;P;P=P.next)if(P.key===k)return P};return r(x,{clear:function(){for(var k=this,j=S(k),T=j.first;T;)T.removed=!0,T.previous&&(T.previous=T.previous.next=null),T=T.next;j.first=j.last=null,j.index=t(null),d?j.size=0:k.size=0},delete:function(_){var k=this,j=S(k),T=N(k,_);if(T){var P=T.next,O=T.previous;delete j.index[T.index],T.removed=!0,O&&(O.next=P),P&&(P.previous=O),j.first===T&&(j.first=P),j.last===T&&(j.last=O),d?j.size--:k.size--}return!!T},forEach:function(k){for(var j=S(this),T=n(k,arguments.length>1?arguments[1]:void 0),P;P=P?P.next:j.first;)for(T(P.value,P.key,this);P&&P.removed;)P=P.previous},has:function(k){return!!N(this,k)}}),r(x,v?{get:function(k){var j=N(this,k);return j&&j.value},set:function(k,j){return E(this,k===0?0:k,j)}}:{add:function(k){return E(this,k=k===0?0:k,k)}}),d&&e(x,"size",{configurable:!0,get:function(){return S(this).size}}),w},setStrong:function(g,y,v){var b=y+" Iterator",w=m(y),x=m(b);a(g,y,function(S,E){p(this,{type:b,target:S,state:w(S),kind:E,last:null})},function(){for(var S=x(this),E=S.kind,N=S.last;N&&N.removed;)N=N.previous;return!S.target||!(S.last=N=N?N.next:S.state.first)?(S.target=null,l(void 0,!0)):l(E==="keys"?N.key:E==="values"?N.value:[N.key,N.value],!1)},v?"entries":"values",!v,!0),u(y)}},l_}var zz;function oIe(){if(zz)return kz;zz=1;var t=lle(),e=cle();return t("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),kz}var Wz;function aIe(){return Wz||(Wz=1,oIe()),Cz}var Vz={},c_,Uz;function ule(){return Uz||(Uz=1,c_=function(t,e){return e===1?function(r,n){return r[t](n)}:function(r,n,s){return r[t](n,s)}}),c_}var u_,Hz;function lIe(){if(Hz)return u_;Hz=1;var t=Is(),e=ule(),r=t("Map");return u_={Map:r,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:r.prototype},u_}var Kz;function cIe(){if(Kz)return Vz;Kz=1;var t=Ge(),e=At(),r=la(),n=gu(),s=$D(),i=lIe(),o=zh(),a=kt(),l=i.Map,u=i.has,d=i.get,h=i.set,f=e([].push),p=o||a(function(){return l.groupBy("ab",function(m){return m}).get("a").length!==1});return t({target:"Map",stat:!0,forced:o||p},{groupBy:function(g,y){n(g),r(y);var v=new l,b=0;return s(g,function(w){var x=y(w,b++);u(v,x)?f(d(v,x),w):h(v,x,[w])}),v}}),Vz}var d_,Gz;function uIe(){if(Gz)return d_;Gz=1,Fl(),aIe(),cIe(),Jb();var t=Br();return d_=t.Map,d_}var h_,Yz;function dIe(){if(Yz)return h_;Yz=1;var t=uIe();return ql(),h_=t,h_}var f_,Qz;function hIe(){return Qz||(Qz=1,f_=dIe()),f_}var fIe=hIe(),dle=ut(fIe),Xz={},Jz;function pIe(){if(Jz)return Xz;Jz=1;var t=Ge(),e=Kh().some,r=Zb(),n=r("some");return t({target:"Array",proto:!0,forced:!n},{some:function(i){return e(this,i,arguments.length>1?arguments[1]:void 0)}}),Xz}var p_,Zz;function mIe(){if(Zz)return p_;Zz=1,pIe();var t=ys();return p_=t("Array","some"),p_}var m_,e9;function gIe(){if(e9)return m_;e9=1;var t=Jr(),e=mIe(),r=Array.prototype;return m_=function(n){var s=n.some;return n===r||t(r,n)&&s===r.some?e:s},m_}var g_,t9;function yIe(){if(t9)return g_;t9=1;var t=gIe();return g_=t,g_}var y_,r9;function vIe(){return r9||(r9=1,y_=yIe()),y_}var bIe=vIe(),xIe=ut(bIe),v_,n9;function wIe(){if(n9)return v_;n9=1,Fl();var t=ys();return v_=t("Array","keys"),v_}var b_,s9;function SIe(){if(s9)return b_;s9=1;var t=wIe();return b_=t,b_}var x_,i9;function EIe(){if(i9)return x_;i9=1,ql();var t=Dl(),e=Zr(),r=Jr(),n=SIe(),s=Array.prototype,i={DOMTokenList:!0,NodeList:!0};return x_=function(o){var a=o.keys;return o===s||r(s,o)&&a===s.keys||e(i,t(o))?n:a},x_}var w_,o9;function _Ie(){return o9||(o9=1,w_=EIe()),w_}var NIe=_Ie(),Ku=ut(NIe),a9={},S_,l9;function CIe(){if(l9)return S_;l9=1;var t=Hh(),e=Math.floor,r=function(n,s){var i=n.length;if(i<8)for(var o=1,a,l;o<i;){for(l=o,a=n[o];l&&s(n[l-1],a)>0;)n[l]=n[--l];l!==o++&&(n[l]=a)}else for(var u=e(i/2),d=r(t(n,0,u),s),h=r(t(n,u),s),f=d.length,p=h.length,m=0,g=0;m<f||g<p;)n[m+g]=m<f&&g<p?s(d[m],h[g])<=0?d[m++]:h[g++]:m<f?d[m++]:h[g++];return n};return S_=r,S_}var E_,c9;function kIe(){if(c9)return E_;c9=1;var t=qh(),e=t.match(/firefox\/(\d+)/i);return E_=!!e&&+e[1],E_}var __,u9;function jIe(){if(u9)return __;u9=1;var t=qh();return __=/MSIE|Trident/.test(t),__}var N_,d9;function TIe(){if(d9)return N_;d9=1;var t=qh(),e=t.match(/AppleWebKit\/(\d+)\./);return N_=!!e&&+e[1],N_}var h9;function OIe(){if(h9)return a9;h9=1;var t=Ge(),e=At(),r=la(),n=Ti(),s=Al(),i=kae(),o=$l(),a=kt(),l=CIe(),u=Zb(),d=kIe(),h=jIe(),f=Ym(),p=TIe(),m=[],g=e(m.sort),y=e(m.push),v=a(function(){m.sort(void 0)}),b=a(function(){m.sort(null)}),w=u("sort"),x=!a(function(){if(f)return f<70;if(!(d&&d>3)){if(h)return!0;if(p)return p<603;var N="",_,k,j,T;for(_=65;_<76;_++){switch(k=String.fromCharCode(_),_){case 66:case 69:case 70:case 72:j=3;break;case 68:case 71:j=4;break;default:j=2}for(T=0;T<47;T++)m.push({k:k+T,v:j})}for(m.sort(function(P,O){return O.v-P.v}),T=0;T<m.length;T++)k=m[T].k.charAt(0),N.charAt(N.length-1)!==k&&(N+=k);return N!=="DGBEFHACIJK"}}),S=v||!b||!w||!x,E=function(N){return function(_,k){return k===void 0?-1:_===void 0?1:N!==void 0?+N(_,k)||0:o(_)>o(k)?1:-1}};return t({target:"Array",proto:!0,forced:S},{sort:function(_){_!==void 0&&r(_);var k=n(this);if(x)return _===void 0?g(k):g(k,_);var j=[],T=s(k),P,O;for(O=0;O<T;O++)O in k&&y(j,k[O]);for(l(j,E(_)),P=s(j),O=0;O<P;)k[O]=j[O++];for(;O<T;)i(k,O++);return k}}),a9}var C_,f9;function PIe(){if(f9)return C_;f9=1,OIe();var t=ys();return C_=t("Array","sort"),C_}var k_,p9;function IIe(){if(p9)return k_;p9=1;var t=Jr(),e=PIe(),r=Array.prototype;return k_=function(n){var s=n.sort;return n===r||t(r,n)&&s===r.sort?e:s},k_}var j_,m9;function RIe(){if(m9)return j_;m9=1;var t=IIe();return j_=t,j_}var T_,g9;function MIe(){return g9||(g9=1,T_=RIe()),T_}var AIe=MIe(),LR=ut(AIe),O_,y9;function DIe(){if(y9)return O_;y9=1,Fl();var t=ys();return O_=t("Array","values"),O_}var P_,v9;function $Ie(){if(v9)return P_;v9=1;var t=DIe();return P_=t,P_}var I_,b9;function FIe(){if(b9)return I_;b9=1,ql();var t=Dl(),e=Zr(),r=Jr(),n=$Ie(),s=Array.prototype,i={DOMTokenList:!0,NodeList:!0};return I_=function(o){var a=o.values;return o===s||r(s,o)&&a===s.values||e(i,t(o))?n:a},I_}var R_,x9;function qIe(){return x9||(x9=1,R_=FIe()),R_}var LIe=qIe(),w9=ut(LIe),M_,S9;function BIe(){return S9||(S9=1,M_=Eae()),M_}var zIe=BIe(),vd=ut(zIe),A_,E9;function WIe(){if(E9)return A_;E9=1,Fl();var t=ys();return A_=t("Array","entries"),A_}var D_,_9;function VIe(){if(_9)return D_;_9=1;var t=WIe();return D_=t,D_}var $_,N9;function UIe(){if(N9)return $_;N9=1,ql();var t=Dl(),e=Zr(),r=Jr(),n=VIe(),s=Array.prototype,i={DOMTokenList:!0,NodeList:!0};return $_=function(o){var a=o.entries;return o===s||r(s,o)&&a===s.entries||e(i,t(o))?n:a},$_}var F_,C9;function HIe(){return C9||(C9=1,F_=UIe()),F_}var KIe=HIe(),GIe=ut(KIe);const on=[];for(let t=0;t<256;++t)on.push((t+256).toString(16).slice(1));function YIe(t,e=0){return(on[t[e+0]]+on[t[e+1]]+on[t[e+2]]+on[t[e+3]]+"-"+on[t[e+4]]+on[t[e+5]]+"-"+on[t[e+6]]+on[t[e+7]]+"-"+on[t[e+8]]+on[t[e+9]]+"-"+on[t[e+10]]+on[t[e+11]]+on[t[e+12]]+on[t[e+13]]+on[t[e+14]]+on[t[e+15]]).toLowerCase()}let q_;const QIe=new Uint8Array(16);function XIe(){if(!q_){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");q_=crypto.getRandomValues.bind(crypto)}return q_(QIe)}const JIe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var k9={randomUUID:JIe};function ZIe(t,e,r){var s;t=t||{};const n=t.random??((s=t.rng)==null?void 0:s.call(t))??XIe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,YIe(n)}function eRe(t,e,r){return k9.randomUUID&&!t?k9.randomUUID():ZIe(t)}function j9(t){return typeof t=="string"||typeof t=="number"}class FD{constructor(e){fl(this,"_queue",[]),fl(this,"_timeout",null),fl(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(e)}setOptions(e){e&&typeof e.delay<"u"&&(this.delay=e.delay),e&&typeof e.max<"u"&&(this.max=e.max),this._flushIfNeeded()}static extend(e,r){const n=new FD(r);if(e.flush!==void 0)throw new Error("Target object already has a property flush");e.flush=()=>{n.flush()};const s=[{name:"flush",original:void 0}];if(r&&r.replace)for(let i=0;i<r.replace.length;i++){const o=r.replace[i];s.push({name:o,original:e[o]}),n.replace(e,o)}return n._extended={object:e,methods:s},n}destroy(){if(this.flush(),this._extended){const e=this._extended.object,r=this._extended.methods;for(let n=0;n<r.length;n++){const s=r[n];s.original?e[s.name]=s.original:delete e[s.name]}this._extended=null}}replace(e,r){const n=this,s=e[r];if(!s)throw new Error("Method "+r+" undefined");e[r]=function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];n.queue({args:o,fn:s,context:this})}}queue(e){typeof e=="function"?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()}_flushIfNeeded(){this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=$Oe(()=>{this.flush()},this.delay))}flush(){var e,r;tu(e=jae(r=this._queue).call(r,0)).call(e,n=>{n.fn.apply(n.context||n.fn,n.args||[])})}}class A0{constructor(){fl(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),fl(this,"subscribe",A0.prototype.on),fl(this,"unsubscribe",A0.prototype.off)}_trigger(e,r,n){var s;if(e==="*")throw new Error("Cannot trigger event *");tu(s=[...this._subscribers[e],...this._subscribers["*"]]).call(s,i=>{i(e,r,n??null)})}on(e,r){typeof r=="function"&&this._subscribers[e].push(r)}off(e,r){var n;this._subscribers[e]=md(n=this._subscribers[e]).call(n,s=>s!==r)}}var T9={},O9={},P9;function tRe(){if(P9)return O9;P9=1;var t=lle(),e=cle();return t("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),O9}var I9;function rRe(){return I9||(I9=1,tRe()),T9}var R9={},L_,M9;function xu(){if(M9)return L_;M9=1;var t=Bh(),e=TypeError;return L_=function(r){if(typeof r=="object"&&"size"in r&&"has"in r&&"add"in r&&"delete"in r&&"keys"in r)return r;throw new e(t(r)+" is not a set")},L_}var B_,A9;function wu(){if(A9)return B_;A9=1;var t=Is(),e=ule(),r=t("Set"),n=r.prototype;return B_={Set:r,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:n},B_}var z_,D9;function Su(){if(D9)return z_;D9=1;var t=gs();return z_=function(e,r,n){for(var s=n?e:e.iterator,i=e.next,o,a;!(o=t(i,s)).done;)if(a=r(o.value),a!==void 0)return a},z_}var W_,$9;function ag(){if($9)return W_;$9=1;var t=Su();return W_=function(e,r,n){return n?t(e.keys(),r,!0):e.forEach(r)},W_}var V_,F9;function qD(){if(F9)return V_;F9=1;var t=wu(),e=ag(),r=t.Set,n=t.add;return V_=function(s){var i=new r;return e(s,function(o){n(i,o)}),i},V_}var U_,q9;function lg(){return q9||(q9=1,U_=function(t){return t.size}),U_}var H_,L9;function nRe(){return L9||(L9=1,H_=function(t){return{iterator:t,next:t.next,done:!1}}),H_}var K_,B9;function Eu(){if(B9)return K_;B9=1;var t=la(),e=ca(),r=gs(),n=Uh(),s=nRe(),i="Invalid size",o=RangeError,a=TypeError,l=Math.max,u=function(d,h){this.set=d,this.size=l(h,0),this.has=t(d.has),this.keys=t(d.keys)};return u.prototype={getIterator:function(){return s(e(r(this.keys,this.set)))},includes:function(d){return r(this.has,this.set,d)}},K_=function(d){e(d);var h=+d.size;if(h!==h)throw new a(i);var f=n(h);if(f<0)throw new o(i);return new u(d,f)},K_}var G_,z9;function sRe(){if(z9)return G_;z9=1;var t=xu(),e=wu(),r=qD(),n=lg(),s=Eu(),i=ag(),o=Su(),a=e.has,l=e.remove;return G_=function(d){var h=t(this),f=s(d),p=r(h);return n(h)<=f.size?i(h,function(m){f.includes(m)&&l(p,m)}):o(f.getIterator(),function(m){a(p,m)&&l(p,m)}),p},G_}var Y_,W9;function _u(){return W9||(W9=1,Y_=function(){return!1}),Y_}var V9;function iRe(){if(V9)return R9;V9=1;var t=Ge(),e=sRe(),r=kt(),n=_u(),s=!n("difference",function(o){return o.size===0}),i=s||r(function(){var o={size:1,has:function(){return!0},keys:function(){var l=0;return{next:function(){var u=l++>1;return a.has(1)&&a.clear(),{done:u,value:2}}}}},a=new Set([1,2,3,4]);return a.difference(o).size!==3});return t({target:"Set",proto:!0,real:!0,forced:i},{difference:e}),R9}var U9={},Q_,H9;function oRe(){if(H9)return Q_;H9=1;var t=xu(),e=wu(),r=lg(),n=Eu(),s=ag(),i=Su(),o=e.Set,a=e.add,l=e.has;return Q_=function(d){var h=t(this),f=n(d),p=new o;return r(h)>f.size?i(f.getIterator(),function(m){l(h,m)&&a(p,m)}):s(h,function(m){f.includes(m)&&a(p,m)}),p},Q_}var K9;function aRe(){if(K9)return U9;K9=1;var t=Ge(),e=kt(),r=oRe(),n=_u(),s=!n("intersection",function(i){return i.size===2&&i.has(1)&&i.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return t({target:"Set",proto:!0,real:!0,forced:s},{intersection:r}),U9}var G9={},X_,Y9;function lRe(){if(Y9)return X_;Y9=1;var t=xu(),e=wu().has,r=lg(),n=Eu(),s=ag(),i=Su(),o=DD();return X_=function(l){var u=t(this),d=n(l);if(r(u)<=d.size)return s(u,function(f){if(d.includes(f))return!1},!0)!==!1;var h=d.getIterator();return i(h,function(f){if(e(u,f))return o(h,"normal",!1)})!==!1},X_}var Q9;function cRe(){if(Q9)return G9;Q9=1;var t=Ge(),e=lRe(),r=_u(),n=!r("isDisjointFrom",function(s){return!s});return t({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:e}),G9}var X9={},J_,J9;function uRe(){if(J9)return J_;J9=1;var t=xu(),e=lg(),r=ag(),n=Eu();return J_=function(i){var o=t(this),a=n(i);return e(o)>a.size?!1:r(o,function(l){if(!a.includes(l))return!1},!0)!==!1},J_}var Z9;function dRe(){if(Z9)return X9;Z9=1;var t=Ge(),e=uRe(),r=_u(),n=!r("isSubsetOf",function(s){return s});return t({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:e}),X9}var eW={},Z_,tW;function hRe(){if(tW)return Z_;tW=1;var t=xu(),e=wu().has,r=lg(),n=Eu(),s=Su(),i=DD();return Z_=function(a){var l=t(this),u=n(a);if(r(l)<u.size)return!1;var d=u.getIterator();return s(d,function(h){if(!e(l,h))return i(d,"normal",!1)})!==!1},Z_}var rW;function fRe(){if(rW)return eW;rW=1;var t=Ge(),e=hRe(),r=_u(),n=!r("isSupersetOf",function(s){return!s});return t({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:e}),eW}var nW={},eN,sW;function pRe(){if(sW)return eN;sW=1;var t=xu(),e=wu(),r=qD(),n=Eu(),s=Su(),i=e.add,o=e.has,a=e.remove;return eN=function(u){var d=t(this),h=n(u).getIterator(),f=r(d);return s(h,function(p){o(d,p)?a(f,p):i(f,p)}),f},eN}var tN,iW;function hle(){return iW||(iW=1,tN=function(t){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[t](r);return n.size===1&&n.values().next().value===4}catch{return!1}}),tN}var oW;function mRe(){if(oW)return nW;oW=1;var t=Ge(),e=pRe(),r=hle(),n=_u(),s=!n("symmetricDifference")||!r("symmetricDifference");return t({target:"Set",proto:!0,real:!0,forced:s},{symmetricDifference:e}),nW}var aW={},rN,lW;function gRe(){if(lW)return rN;lW=1;var t=xu(),e=wu().add,r=qD(),n=Eu(),s=Su();return rN=function(o){var a=t(this),l=n(o).getIterator(),u=r(a);return s(l,function(d){e(u,d)}),u},rN}var cW;function yRe(){if(cW)return aW;cW=1;var t=Ge(),e=gRe(),r=hle(),n=_u(),s=!n("union")||!r("union");return t({target:"Set",proto:!0,real:!0,forced:s},{union:e}),aW}var nN,uW;function vRe(){if(uW)return nN;uW=1,Fl(),rRe(),iRe(),aRe(),cRe(),dRe(),fRe(),mRe(),yRe(),Jb();var t=Br();return nN=t.Set,nN}var sN,dW;function bRe(){if(dW)return sN;dW=1;var t=vRe();return ql(),sN=t,sN}var iN,hW;function xRe(){return hW||(hW=1,iN=bRe()),iN}var wRe=xRe(),oN=ut(wRe),aN,fW;function SRe(){if(fW)return aN;fW=1,Fl(),Jb();var t=ole();return aN=t,aN}var lN,pW;function ERe(){if(pW)return lN;pW=1;var t=SRe();return ql(),lN=t,lN}var cN,mW;function _Re(){if(mW)return cN;mW=1;var t=ERe();return cN=t,cN}var uN,gW;function NRe(){if(gW)return uN;gW=1;var t=_Re();return uN=t,uN}var dN,yW;function CRe(){return yW||(yW=1,dN=NRe()),dN}var hN,vW;function kRe(){return vW||(vW=1,hN=CRe()),hN}var jRe=kRe(),fN=ut(jRe);class dc{constructor(e){this._pairs=e}*[vd](){for(const[e,r]of this._pairs)yield[e,r]}*entries(){for(const[e,r]of this._pairs)yield[e,r]}*keys(){for(const[e]of this._pairs)yield e}*values(){for(const[,e]of this._pairs)yield e}toIdArray(){var e;return vi(e=[...this._pairs]).call(e,r=>r[0])}toItemArray(){var e;return vi(e=[...this._pairs]).call(e,r=>r[1])}toEntryArray(){return[...this._pairs]}toObjectMap(){const e=xOe(null);for(const[r,n]of this._pairs)e[r]=n;return e}toMap(){return new dle(this._pairs)}toIdSet(){return new oN(this.toIdArray())}toItemSet(){return new oN(this.toItemArray())}cache(){return new dc([...this._pairs])}distinct(e){const r=new oN;for(const[n,s]of this._pairs)r.add(e(s,n));return r}filter(e){const r=this._pairs;return new dc({*[vd](){for(const[n,s]of r)e(s,n)&&(yield[n,s])}})}forEach(e){for(const[r,n]of this._pairs)e(n,r)}map(e){const r=this._pairs;return new dc({*[vd](){for(const[n,s]of r)yield[n,e(s,n)]}})}max(e){const r=fN(this._pairs);let n=r.next();if(n.done)return null;let s=n.value[1],i=e(n.value[1],n.value[0]);for(;!(n=r.next()).done;){const[o,a]=n.value,l=e(a,o);l>i&&(i=l,s=a)}return s}min(e){const r=fN(this._pairs);let n=r.next();if(n.done)return null;let s=n.value[1],i=e(n.value[1],n.value[0]);for(;!(n=r.next()).done;){const[o,a]=n.value,l=e(a,o);l<i&&(i=l,s=a)}return s}reduce(e,r){for(const[n,s]of this._pairs)r=e(r,s,n);return r}sort(e){return new dc({[vd]:()=>{var r;return fN(LR(r=[...this._pairs]).call(r,(n,s)=>{let[i,o]=n,[a,l]=s;return e(o,l,i,a)}))}})}}function bW(t,e){var r=jD(t);if(lz){var n=lz(t);e&&(n=md(n).call(n,function(s){return nle(t,s).enumerable})),r.push.apply(r,n)}return r}function xW(t){for(var e=1;e<arguments.length;e++){var r,n,s=arguments[e]!=null?arguments[e]:{};e%2?tu(r=bW(Object(s),!0)).call(r,function(i){fl(t,i,s[i])}):bz?QPe(t,bz(s)):tu(n=bW(Object(s))).call(n,function(i){ZPe(t,i,nle(s,i))})}return t}function TRe(t,e){return t[e]==null&&(t[e]=eRe()),t}class xh extends A0{get idProp(){return this._idProp}constructor(e,r){super(),fl(this,"_queue",null),e&&!Li(e)&&(r=e,e=[]),this._options=r||{},this._data=new dle,this.length=0,this._idProp=this._options.fieldId||"id",e&&e.length&&this.add(e),this.setOptions(r)}setOptions(e){e&&e.queue!==void 0&&(e.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=FD.extend(this,{replace:["add","update","remove"]})),e.queue&&typeof e.queue=="object"&&this._queue.setOptions(e.queue)))}add(e,r){const n=[];let s;if(Li(e)){const i=vi(e).call(e,o=>o[this._idProp]);if(xIe(i).call(i,o=>this._data.has(o)))throw new Error("A duplicate id was found in the parameter array.");for(let o=0,a=e.length;o<a;o++)s=this._addItem(e[o]),n.push(s)}else if(e&&typeof e=="object")s=this._addItem(e),n.push(s);else throw new Error("Unknown dataType");return n.length&&this._trigger("add",{items:n},r),n}update(e,r){const n=[],s=[],i=[],o=[],a=this._idProp,l=u=>{const d=u[a];if(d!=null&&this._data.has(d)){const h=u,f=lOe({},this._data.get(d)),p=this._updateItem(h);s.push(p),o.push(h),i.push(f)}else{const h=this._addItem(u);n.push(h)}};if(Li(e))for(let u=0,d=e.length;u<d;u++)e[u]&&typeof e[u]=="object"?l(e[u]):console.warn("Ignoring input item, which is not an object at index "+u);else if(e&&typeof e=="object")l(e);else throw new Error("Unknown dataType");if(n.length&&this._trigger("add",{items:n},r),s.length){const u={items:s,oldData:i,data:o};this._trigger("update",u,r)}return pOe(n).call(n,s)}updateOnly(e,r){var n;Li(e)||(e=[e]);const s=vi(n=vi(e).call(e,i=>{const o=this._data.get(i[this._idProp]);if(o==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:o,update:i}})).call(n,i=>{let{oldData:o,update:a}=i;const l=o[this._idProp],u=kPe(o,a);return this._data.set(l,u),{id:l,oldData:o,updatedData:u}});if(s.length){const i={items:vi(s).call(s,o=>o.id),oldData:vi(s).call(s,o=>o.oldData),data:vi(s).call(s,o=>o.updatedData)};return this._trigger("update",i,r),i.items}else return[]}get(e,r){let n,s,i;j9(e)?(n=e,i=r):Li(e)?(s=e,i=r):i=e;const o=i&&i.returnType==="Object"?"Object":"Array",a=i&&md(i),l=[];let u,d,h;if(n!=null)u=this._data.get(n),u&&a&&!a(u)&&(u=void 0);else if(s!=null)for(let p=0,m=s.length;p<m;p++)u=this._data.get(s[p]),u!=null&&(!a||a(u))&&l.push(u);else{var f;d=[...Ku(f=this._data).call(f)];for(let p=0,m=d.length;p<m;p++)h=d[p],u=this._data.get(h),u!=null&&(!a||a(u))&&l.push(u)}if(i&&i.order&&n==null&&this._sort(l,i.order),i&&i.fields){const p=i.fields;if(n!=null&&u!=null)u=this._filterFields(u,p);else for(let m=0,g=l.length;m<g;m++)l[m]=this._filterFields(l[m],p)}if(o=="Object"){const p={};for(let m=0,g=l.length;m<g;m++){const y=l[m],v=y[this._idProp];p[v]=y}return p}else return n!=null?u??null:l}getIds(e){const r=this._data,n=e&&md(e),s=e&&e.order,i=[...Ku(r).call(r)],o=[];if(n)if(s){const a=[];for(let l=0,u=i.length;l<u;l++){const d=i[l],h=this._data.get(d);h!=null&&n(h)&&a.push(h)}this._sort(a,s);for(let l=0,u=a.length;l<u;l++)o.push(a[l][this._idProp])}else for(let a=0,l=i.length;a<l;a++){const u=i[a],d=this._data.get(u);d!=null&&n(d)&&o.push(d[this._idProp])}else if(s){const a=[];for(let l=0,u=i.length;l<u;l++){const d=i[l];a.push(r.get(d))}this._sort(a,s);for(let l=0,u=a.length;l<u;l++)o.push(a[l][this._idProp])}else for(let a=0,l=i.length;a<l;a++){const u=i[a],d=r.get(u);d!=null&&o.push(d[this._idProp])}return o}getDataSet(){return this}forEach(e,r){const n=r&&md(r),s=this._data,i=[...Ku(s).call(s)];if(r&&r.order){const o=this.get(r);for(let a=0,l=o.length;a<l;a++){const u=o[a],d=u[this._idProp];e(u,d)}}else for(let o=0,a=i.length;o<a;o++){const l=i[o],u=this._data.get(l);u!=null&&(!n||n(u))&&e(u,l)}}map(e,r){const n=r&&md(r),s=[],i=this._data,o=[...Ku(i).call(i)];for(let a=0,l=o.length;a<l;a++){const u=o[a],d=this._data.get(u);d!=null&&(!n||n(d))&&s.push(e(d,u))}return r&&r.order&&this._sort(s,r.order),s}_filterFields(e,r){var n;return e&&Qje(n=Li(r)?r:jD(r)).call(n,(s,i)=>(s[i]=e[i],s),{})}_sort(e,r){if(typeof r=="string"){const n=r;LR(e).call(e,(s,i)=>{const o=s[n],a=i[n];return o>a?1:o<a?-1:0})}else if(typeof r=="function")LR(e).call(e,r);else throw new TypeError("Order must be a function or a string")}remove(e,r){const n=[],s=[],i=Li(e)?e:[e];for(let o=0,a=i.length;o<a;o++){const l=this._remove(i[o]);if(l){const u=l[this._idProp];u!=null&&(n.push(u),s.push(l))}}return n.length&&this._trigger("remove",{items:n,oldData:s},r),n}_remove(e){let r;if(j9(e)?r=e:e&&typeof e=="object"&&(r=e[this._idProp]),r!=null&&this._data.has(r)){const n=this._data.get(r)||null;return this._data.delete(r),--this.length,n}return null}clear(e){var r;const n=[...Ku(r=this._data).call(r)],s=[];for(let i=0,o=n.length;i<o;i++)s.push(this._data.get(n[i]));return this._data.clear(),this.length=0,this._trigger("remove",{items:n,oldData:s},e),n}max(e){let r=null,n=null;for(const i of w9(s=this._data).call(s)){var s;const o=i[e];typeof o=="number"&&(n==null||o>n)&&(r=i,n=o)}return r||null}min(e){let r=null,n=null;for(const i of w9(s=this._data).call(s)){var s;const o=i[e];typeof o=="number"&&(n==null||o<n)&&(r=i,n=o)}return r||null}distinct(e){const r=this._data,n=[...Ku(r).call(r)],s=[];let i=0;for(let o=0,a=n.length;o<a;o++){const l=n[o],d=r.get(l)[e];let h=!1;for(let f=0;f<i;f++)if(s[f]==d){h=!0;break}!h&&d!==void 0&&(s[i]=d,i++)}return s}_addItem(e){const r=TRe(e,this._idProp),n=r[this._idProp];if(this._data.has(n))throw new Error("Cannot add item: item with id "+n+" already exists");return this._data.set(n,r),++this.length,n}_updateItem(e){const r=e[this._idProp];if(r==null)throw new Error("Cannot update item: item has no id (item: "+TOe(e)+")");const n=this._data.get(r);if(!n)throw new Error("Cannot update item: no item with id "+r+" found");return this._data.set(r,xW(xW({},n),e)),r}stream(e){if(e){const n=this._data;return new dc({*[vd](){for(const s of e){const i=n.get(s);i!=null&&(yield[s,i])}}})}else{var r;return new dc({[vd]:_ae(r=GIe(this._data)).call(r,this._data)})}}}function ORe(t,e){return typeof e=="object"&&e!==null&&t===e.idProp&&typeof e.add=="function"&&typeof e.clear=="function"&&typeof e.distinct=="function"&&typeof tu(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof vi(e)=="function"&&typeof e.max=="function"&&typeof e.min=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.remove=="function"&&typeof e.setOptions=="function"&&typeof e.stream=="function"&&typeof e.update=="function"&&typeof e.updateOnly=="function"}function fle(t,e){return typeof e=="object"&&e!==null&&t===e.idProp&&typeof tu(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof vi(e)=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.stream=="function"&&ORe(t,e.getDataSet())}/**
 * vis-network
 * https://visjs.github.io/vis-network/
 *
 * A dynamic, browser-based visualization library.
 *
 * @version 10.0.2
 * @date    2025-09-15T17:48:13.838Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var wW=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ve(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var SW={},$f,EW;function Kt(){if(EW)return $f;EW=1;var t=function(e){return e&&e.Math===Math&&e};return $f=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof wW=="object"&&wW)||t(typeof $f=="object"&&$f)||function(){return this}()||Function("return this")(),$f}var pN,_W;function dt(){return _W||(_W=1,pN=function(t){try{return!!t()}catch{return!0}}),pN}var mN,NW;function cg(){if(NW)return mN;NW=1;var t=dt();return mN=!t(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),mN}var gN,CW;function rx(){if(CW)return gN;CW=1;var t=cg(),e=Function.prototype,r=e.apply,n=e.call;return gN=typeof Reflect=="object"&&Reflect.apply||(t?n.bind(r):function(){return n.apply(r,arguments)}),gN}var yN,kW;function ft(){if(kW)return yN;kW=1;var t=cg(),e=Function.prototype,r=e.call,n=t&&e.bind.bind(r,r);return yN=t?n:function(s){return function(){return r.apply(s,arguments)}},yN}var vN,jW;function oo(){if(jW)return vN;jW=1;var t=ft(),e=t({}.toString),r=t("".slice);return vN=function(n){return r(e(n),8,-1)},vN}var bN,TW;function LD(){if(TW)return bN;TW=1;var t=oo(),e=ft();return bN=function(r){if(t(r)==="Function")return e(r)},bN}var xN,OW;function tn(){if(OW)return xN;OW=1;var t=typeof document=="object"&&document.all;return xN=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"},xN}var wN={},SN,PW;function wr(){if(PW)return SN;PW=1;var t=dt();return SN=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),SN}var EN,IW;function vs(){if(IW)return EN;IW=1;var t=cg(),e=Function.prototype.call;return EN=t?e.bind(e):function(){return e.apply(e,arguments)},EN}var _N={},RW;function nx(){if(RW)return _N;RW=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,r=e&&!t.call({1:2},1);return _N.f=r?function(s){var i=e(this,s);return!!i&&i.enumerable}:t,_N}var NN,MW;function ug(){return MW||(MW=1,NN=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}),NN}var CN,AW;function sx(){if(AW)return CN;AW=1;var t=ft(),e=dt(),r=oo(),n=Object,s=t("".split);return CN=e(function(){return!n("z").propertyIsEnumerable(0)})?function(i){return r(i)==="String"?s(i,""):n(i)}:n,CN}var kN,DW;function Qh(){return DW||(DW=1,kN=function(t){return t==null}),kN}var jN,$W;function ua(){if($W)return jN;$W=1;var t=Qh(),e=TypeError;return jN=function(r){if(t(r))throw new e("Can't call method on "+r);return r},jN}var TN,FW;function Oi(){if(FW)return TN;FW=1;var t=sx(),e=ua();return TN=function(r){return t(e(r))},TN}var ON,qW;function rn(){if(qW)return ON;qW=1;var t=tn();return ON=function(e){return typeof e=="object"?e!==null:t(e)},ON}var PN,LW;function jt(){return LW||(LW=1,PN={}),PN}var IN,BW;function Rs(){if(BW)return IN;BW=1;var t=jt(),e=Kt(),r=tn(),n=function(s){return r(s)?s:void 0};return IN=function(s,i){return arguments.length<2?n(t[s])||n(e[s]):t[s]&&t[s][i]||e[s]&&e[s][i]},IN}var RN,zW;function Mr(){if(zW)return RN;zW=1;var t=ft();return RN=t({}.isPrototypeOf),RN}var MN,WW;function Xh(){if(WW)return MN;WW=1;var t=Kt(),e=t.navigator,r=e&&e.userAgent;return MN=r?String(r):"",MN}var AN,VW;function dg(){if(VW)return AN;VW=1;var t=Kt(),e=Xh(),r=t.process,n=t.Deno,s=r&&r.versions||n&&n.version,i=s&&s.v8,o,a;return i&&(o=i.split("."),a=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!a&&e&&(o=e.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=e.match(/Chrome\/(\d+)/),o&&(a=+o[1]))),AN=a,AN}var DN,UW;function Jh(){if(UW)return DN;UW=1;var t=dg(),e=dt(),r=Kt(),n=r.String;return DN=!!Object.getOwnPropertySymbols&&!e(function(){var s=Symbol("symbol detection");return!n(s)||!(Object(s)instanceof Symbol)||!Symbol.sham&&t&&t<41}),DN}var $N,HW;function ple(){if(HW)return $N;HW=1;var t=Jh();return $N=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol",$N}var FN,KW;function hg(){if(KW)return FN;KW=1;var t=Rs(),e=tn(),r=Mr(),n=ple(),s=Object;return FN=n?function(i){return typeof i=="symbol"}:function(i){var o=t("Symbol");return e(o)&&r(o.prototype,s(i))},FN}var qN,GW;function Zh(){if(GW)return qN;GW=1;var t=String;return qN=function(e){try{return t(e)}catch{return"Object"}},qN}var LN,YW;function da(){if(YW)return LN;YW=1;var t=tn(),e=Zh(),r=TypeError;return LN=function(n){if(t(n))return n;throw new r(e(n)+" is not a function")},LN}var BN,QW;function BD(){if(QW)return BN;QW=1;var t=da(),e=Qh();return BN=function(r,n){var s=r[n];return e(s)?void 0:t(s)},BN}var zN,XW;function PRe(){if(XW)return zN;XW=1;var t=vs(),e=tn(),r=rn(),n=TypeError;return zN=function(s,i){var o,a;if(i==="string"&&e(o=s.toString)&&!r(a=t(o,s))||e(o=s.valueOf)&&!r(a=t(o,s))||i!=="string"&&e(o=s.toString)&&!r(a=t(o,s)))return a;throw new n("Can't convert object to primitive value")},zN}var WN={exports:{}},VN,JW;function ef(){return JW||(JW=1,VN=!0),VN}var UN,ZW;function IRe(){if(ZW)return UN;ZW=1;var t=Kt(),e=Object.defineProperty;return UN=function(r,n){try{e(t,r,{value:n,configurable:!0,writable:!0})}catch{t[r]=n}return n},UN}var eV;function zD(){if(eV)return WN.exports;eV=1;var t=ef(),e=Kt(),r=IRe(),n="__core-js_shared__",s=WN.exports=e[n]||r(n,{});return(s.versions||(s.versions=[])).push({version:"3.44.0",mode:t?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),WN.exports}var HN,tV;function tf(){if(tV)return HN;tV=1;var t=zD();return HN=function(e,r){return t[e]||(t[e]=r||{})},HN}var KN,rV;function Ms(){if(rV)return KN;rV=1;var t=ua(),e=Object;return KN=function(r){return e(t(r))},KN}var GN,nV;function mn(){if(nV)return GN;nV=1;var t=ft(),e=Ms(),r=t({}.hasOwnProperty);return GN=Object.hasOwn||function(s,i){return r(e(s),i)},GN}var YN,sV;function ix(){if(sV)return YN;sV=1;var t=ft(),e=0,r=Math.random(),n=t(1.1.toString);return YN=function(s){return"Symbol("+(s===void 0?"":s)+")_"+n(++e+r,36)},YN}var QN,iV;function Ar(){if(iV)return QN;iV=1;var t=Kt(),e=tf(),r=mn(),n=ix(),s=Jh(),i=ple(),o=t.Symbol,a=e("wks"),l=i?o.for||o:o&&o.withoutSetter||n;return QN=function(u){return r(a,u)||(a[u]=s&&r(o,u)?o[u]:l("Symbol."+u)),a[u]},QN}var XN,oV;function mle(){if(oV)return XN;oV=1;var t=vs(),e=rn(),r=hg(),n=BD(),s=PRe(),i=Ar(),o=TypeError,a=i("toPrimitive");return XN=function(l,u){if(!e(l)||r(l))return l;var d=n(l,a),h;if(d){if(u===void 0&&(u="default"),h=t(d,l,u),!e(h)||r(h))return h;throw new o("Can't convert object to primitive value")}return u===void 0&&(u="number"),s(l,u)},XN}var JN,aV;function WD(){if(aV)return JN;aV=1;var t=mle(),e=hg();return JN=function(r){var n=t(r,"string");return e(n)?n:n+""},JN}var ZN,lV;function gle(){if(lV)return ZN;lV=1;var t=Kt(),e=rn(),r=t.document,n=e(r)&&e(r.createElement);return ZN=function(s){return n?r.createElement(s):{}},ZN}var eC,cV;function yle(){if(cV)return eC;cV=1;var t=wr(),e=dt(),r=gle();return eC=!t&&!e(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7}),eC}var uV;function ox(){if(uV)return wN;uV=1;var t=wr(),e=vs(),r=nx(),n=ug(),s=Oi(),i=WD(),o=mn(),a=yle(),l=Object.getOwnPropertyDescriptor;return wN.f=t?l:function(d,h){if(d=s(d),h=i(h),a)try{return l(d,h)}catch{}if(o(d,h))return n(!e(r.f,d,h),d[h])},wN}var tC,dV;function RRe(){if(dV)return tC;dV=1;var t=dt(),e=tn(),r=/#|\.prototype\./,n=function(l,u){var d=i[s(l)];return d===a?!0:d===o?!1:e(u)?t(u):!!u},s=n.normalize=function(l){return String(l).replace(r,".").toLowerCase()},i=n.data={},o=n.NATIVE="N",a=n.POLYFILL="P";return tC=n,tC}var rC,hV;function ax(){if(hV)return rC;hV=1;var t=LD(),e=da(),r=cg(),n=t(t.bind);return rC=function(s,i){return e(s),i===void 0?s:r?n(s,i):function(){return s.apply(i,arguments)}},rC}var nC={},sC,fV;function vle(){if(fV)return sC;fV=1;var t=wr(),e=dt();return sC=t&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),sC}var iC,pV;function ao(){if(pV)return iC;pV=1;var t=rn(),e=String,r=TypeError;return iC=function(n){if(t(n))return n;throw new r(e(n)+" is not an object")},iC}var mV;function ai(){if(mV)return nC;mV=1;var t=wr(),e=yle(),r=vle(),n=ao(),s=WD(),i=TypeError,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l="enumerable",u="configurable",d="writable";return nC.f=t?r?function(f,p,m){if(n(f),p=s(p),n(m),typeof f=="function"&&p==="prototype"&&"value"in m&&d in m&&!m[d]){var g=a(f,p);g&&g[d]&&(f[p]=m.value,m={configurable:u in m?m[u]:g[u],enumerable:l in m?m[l]:g[l],writable:!1})}return o(f,p,m)}:o:function(f,p,m){if(n(f),p=s(p),n(m),e)try{return o(f,p,m)}catch{}if("get"in m||"set"in m)throw new i("Accessors not supported");return"value"in m&&(f[p]=m.value),f},nC}var oC,gV;function rf(){if(gV)return oC;gV=1;var t=wr(),e=ai(),r=ug();return oC=t?function(n,s,i){return e.f(n,s,r(1,i))}:function(n,s,i){return n[s]=i,n},oC}var aC,yV;function Me(){if(yV)return aC;yV=1;var t=Kt(),e=rx(),r=LD(),n=tn(),s=ox().f,i=RRe(),o=jt(),a=ax(),l=rf(),u=mn(),d=function(h){var f=function(p,m,g){if(this instanceof f){switch(arguments.length){case 0:return new h;case 1:return new h(p);case 2:return new h(p,m)}return new h(p,m,g)}return e(h,this,arguments)};return f.prototype=h.prototype,f};return aC=function(h,f){var p=h.target,m=h.global,g=h.stat,y=h.proto,v=m?t:g?t[p]:t[p]&&t[p].prototype,b=m?o:o[p]||l(o,p,{})[p],w=b.prototype,x,S,E,N,_,k,j,T,P;for(N in f)x=i(m?N:p+(g?".":"#")+N,h.forced),S=!x&&v&&u(v,N),k=b[N],S&&(h.dontCallGetSet?(P=s(v,N),j=P&&P.value):j=v[N]),_=S&&j?j:f[N],!(!x&&!y&&typeof k==typeof _)&&(h.bind&&S?T=a(_,t):h.wrap&&S?T=d(_):y&&n(_)?T=r(_):T=_,(h.sham||_&&_.sham||k&&k.sham)&&l(T,"sham",!0),l(b,N,T),y&&(E=p+"Prototype",u(o,E)||l(o,E,{}),l(o[E],N,_),h.real&&w&&(x||!w[N])&&l(w,N,_)))},aC}var lC,vV;function MRe(){if(vV)return lC;vV=1;var t=Math.ceil,e=Math.floor;return lC=Math.trunc||function(n){var s=+n;return(s>0?e:t)(s)},lC}var cC,bV;function nf(){if(bV)return cC;bV=1;var t=MRe();return cC=function(e){var r=+e;return r!==r||r===0?0:t(r)},cC}var uC,xV;function lx(){if(xV)return uC;xV=1;var t=nf(),e=Math.max,r=Math.min;return uC=function(n,s){var i=t(n);return i<0?e(i+s,0):r(i,s)},uC}var dC,wV;function ble(){if(wV)return dC;wV=1;var t=nf(),e=Math.min;return dC=function(r){var n=t(r);return n>0?e(n,9007199254740991):0},dC}var hC,SV;function ha(){if(SV)return hC;SV=1;var t=ble();return hC=function(e){return t(e.length)},hC}var fC,EV;function VD(){if(EV)return fC;EV=1;var t=Oi(),e=lx(),r=ha(),n=function(s){return function(i,o,a){var l=t(i),u=r(l);if(u===0)return!s&&-1;var d=e(a,u),h;if(s&&o!==o){for(;u>d;)if(h=l[d++],h!==h)return!0}else for(;u>d;d++)if((s||d in l)&&l[d]===o)return s||d||0;return!s&&-1}};return fC={includes:n(!0),indexOf:n(!1)},fC}var pC,_V;function fg(){return _V||(_V=1,pC={}),pC}var mC,NV;function xle(){if(NV)return mC;NV=1;var t=ft(),e=mn(),r=Oi(),n=VD().indexOf,s=fg(),i=t([].push);return mC=function(o,a){var l=r(o),u=0,d=[],h;for(h in l)!e(s,h)&&e(l,h)&&i(d,h);for(;a.length>u;)e(l,h=a[u++])&&(~n(d,h)||i(d,h));return d},mC}var gC,CV;function UD(){return CV||(CV=1,gC=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),gC}var yC,kV;function pg(){if(kV)return yC;kV=1;var t=xle(),e=UD();return yC=Object.keys||function(n){return t(n,e)},yC}var vC={},jV;function cx(){return jV||(jV=1,vC.f=Object.getOwnPropertySymbols),vC}var bC,TV;function ARe(){if(TV)return bC;TV=1;var t=wr(),e=ft(),r=vs(),n=dt(),s=pg(),i=cx(),o=nx(),a=Ms(),l=sx(),u=Object.assign,d=Object.defineProperty,h=e([].concat);return bC=!u||n(function(){if(t&&u({b:1},u(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},p={},m=Symbol("assign detection"),g="abcdefghijklmnopqrst";return f[m]=7,g.split("").forEach(function(y){p[y]=y}),u({},f)[m]!==7||s(u({},p)).join("")!==g})?function(p,m){for(var g=a(p),y=arguments.length,v=1,b=i.f,w=o.f;y>v;)for(var x=l(arguments[v++]),S=b?h(s(x),b(x)):s(x),E=S.length,N=0,_;E>N;)_=S[N++],(!t||r(w,x,_))&&(g[_]=x[_]);return g}:u,bC}var OV;function DRe(){if(OV)return SW;OV=1;var t=Me(),e=ARe();return t({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),SW}var xC,PV;function $Re(){if(PV)return xC;PV=1,DRe();var t=jt();return xC=t.Object.assign,xC}var wC,IV;function FRe(){if(IV)return wC;IV=1;var t=$Re();return wC=t,wC}var SC,RV;function qRe(){return RV||(RV=1,SC=FRe()),SC}var LRe=qRe(),jr=Ve(LRe),MV={},EC,AV;function sf(){if(AV)return EC;AV=1;var t=ft();return EC=t([].slice),EC}var _C,DV;function BRe(){if(DV)return _C;DV=1;var t=ft(),e=da(),r=rn(),n=mn(),s=sf(),i=cg(),o=Function,a=t([].concat),l=t([].join),u={},d=function(h,f,p){if(!n(u,f)){for(var m=[],g=0;g<f;g++)m[g]="a["+g+"]";u[f]=o("C,a","return new C("+l(m,",")+")")}return u[f](h,p)};return _C=i?o.bind:function(f){var p=e(this),m=p.prototype,g=s(arguments,1),y=function(){var b=a(g,s(arguments));return this instanceof y?d(p,b.length,b):p.apply(f,b)};return r(m)&&(y.prototype=m),y},_C}var $V;function zRe(){if($V)return MV;$V=1;var t=Me(),e=BRe();return t({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),MV}var NC,FV;function gn(){if(FV)return NC;FV=1;var t=Kt(),e=jt();return NC=function(r,n){var s=e[r+"Prototype"],i=s&&s[n];if(i)return i;var o=t[r],a=o&&o.prototype;return a&&a[n]},NC}var CC,qV;function WRe(){if(qV)return CC;qV=1,zRe();var t=gn();return CC=t("Function","bind"),CC}var kC,LV;function VRe(){if(LV)return kC;LV=1;var t=Mr(),e=WRe(),r=Function.prototype;return kC=function(n){var s=n.bind;return n===r||t(r,n)&&s===r.bind?e:s},kC}var jC,BV;function URe(){if(BV)return jC;BV=1;var t=VRe();return jC=t,jC}var TC,zV;function HRe(){return zV||(zV=1,TC=URe()),TC}var KRe=HRe(),ae=Ve(KRe);function HD(t,e,r,n){t.beginPath(),t.arc(e,r,n,0,2*Math.PI,!1),t.closePath()}function GRe(t,e,r,n){t.beginPath(),t.rect(e-n,r-n,n*2,n*2),t.closePath()}function YRe(t,e,r,n){t.beginPath(),n*=1.15,r+=.275*n;const s=n*2,i=s/2,o=Math.sqrt(3)/6*s,a=Math.sqrt(s*s-i*i);t.moveTo(e,r-(a-o)),t.lineTo(e+i,r+o),t.lineTo(e-i,r+o),t.lineTo(e,r-(a-o)),t.closePath()}function QRe(t,e,r,n){t.beginPath(),n*=1.15,r-=.275*n;const s=n*2,i=s/2,o=Math.sqrt(3)/6*s,a=Math.sqrt(s*s-i*i);t.moveTo(e,r+(a-o)),t.lineTo(e+i,r-o),t.lineTo(e-i,r-o),t.lineTo(e,r+(a-o)),t.closePath()}function XRe(t,e,r,n){t.beginPath(),n*=.82,r+=.1*n;for(let s=0;s<10;s++){const i=s%2===0?n*1.3:n*.5;t.lineTo(e+i*Math.sin(s*2*Math.PI/10),r-i*Math.cos(s*2*Math.PI/10))}t.closePath()}function JRe(t,e,r,n){t.beginPath(),t.lineTo(e,r+n),t.lineTo(e+n,r),t.lineTo(e,r-n),t.lineTo(e-n,r),t.closePath()}function wle(t,e,r,n,s,i){const o=Math.PI/180;n-2*i<0&&(i=n/2),s-2*i<0&&(i=s/2),t.beginPath(),t.moveTo(e+i,r),t.lineTo(e+n-i,r),t.arc(e+n-i,r+i,i,o*270,o*360,!1),t.lineTo(e+n,r+s-i),t.arc(e+n-i,r+s-i,i,0,o*90,!1),t.lineTo(e+i,r+s),t.arc(e+i,r+s-i,i,o*90,o*180,!1),t.lineTo(e,r+i),t.arc(e+i,r+i,i,o*180,o*270,!1),t.closePath()}function BR(t,e,r,n,s){const i=.5522848,o=n/2*i,a=s/2*i,l=e+n,u=r+s,d=e+n/2,h=r+s/2;t.beginPath(),t.moveTo(e,h),t.bezierCurveTo(e,h-a,d-o,r,d,r),t.bezierCurveTo(d+o,r,l,h-a,l,h),t.bezierCurveTo(l,h+a,d+o,u,d,u),t.bezierCurveTo(d-o,u,e,h+a,e,h),t.closePath()}function Sle(t,e,r,n,s){const i=.3333333333333333,o=n,a=s*i,l=.5522848,u=o/2*l,d=a/2*l,h=e+o,f=r+a,p=e+o/2,m=r+a/2,g=r+(s-a/2),y=r+s;t.beginPath(),t.moveTo(h,m),t.bezierCurveTo(h,m+d,p+u,f,p,f),t.bezierCurveTo(p-u,f,e,m+d,e,m),t.bezierCurveTo(e,m-d,p-u,r,p,r),t.bezierCurveTo(p+u,r,h,m-d,h,m),t.lineTo(h,g),t.bezierCurveTo(h,g+d,p+u,y,p,y),t.bezierCurveTo(p-u,y,e,g+d,e,g),t.lineTo(e,m)}function Ele(t,e,r,n,s,i){t.beginPath(),t.moveTo(e,r);const o=i.length,a=n-e,l=s-r,u=l/a;let d=Math.sqrt(a*a+l*l),h=0,f=!0,p=0,m=+i[0];for(;d>=.1;)m=+i[h++%o],m>d&&(m=d),p=Math.sqrt(m*m/(1+u*u)),p=a<0?-p:p,e+=p,r+=u*p,f===!0?t.lineTo(e,r):t.moveTo(e,r),d-=m,f=!f}function ZRe(t,e,r,n){t.beginPath();const s=6,i=Math.PI*2/s;t.moveTo(e+n,r);for(let o=1;o<s;o++)t.lineTo(e+n*Math.cos(i*o),r+n*Math.sin(i*o));t.closePath()}const WV={circle:HD,dashedLine:Ele,database:Sle,diamond:JRe,ellipse:BR,ellipse_vis:BR,hexagon:ZRe,roundRect:wle,square:GRe,star:XRe,triangle:YRe,triangleDown:QRe};function eMe(t){return Object.prototype.hasOwnProperty.call(WV,t)?WV[t]:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];CanvasRenderingContext2D.prototype[t].call(e,n)}}var OC={exports:{}},VV;function tMe(){return VV||(VV=1,function(t){t.exports=e;function e(n){if(n)return r(n)}function r(n){for(var s in e.prototype)n[s]=e.prototype[s];return n}e.prototype.on=e.prototype.addEventListener=function(n,s){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(s),this},e.prototype.once=function(n,s){function i(){this.off(n,i),s.apply(this,arguments)}return i.fn=s,this.on(n,i),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(n,s){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var i=this._callbacks["$"+n];if(!i)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var o,a=0;a<i.length;a++)if(o=i[a],o===s||o.fn===s){i.splice(a,1);break}return i.length===0&&delete this._callbacks["$"+n],this},e.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var s=new Array(arguments.length-1),i=this._callbacks["$"+n],o=1;o<arguments.length;o++)s[o-1]=arguments[o];if(i){i=i.slice(0);for(var o=0,a=i.length;o<a;++o)i[o].apply(this,s)}return this},e.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},e.prototype.hasListeners=function(n){return!!this.listeners(n).length}}(OC)),OC.exports}var rMe=tMe(),_le=Ve(rMe),UV={},PC,HV;function Nu(){if(HV)return PC;HV=1;var t=oo();return PC=Array.isArray||function(r){return t(r)==="Array"},PC}var IC,KV;function Nle(){if(KV)return IC;KV=1;var t=TypeError,e=9007199254740991;return IC=function(r){if(r>e)throw t("Maximum allowed index exceeded");return r},IC}var RC,GV;function ux(){if(GV)return RC;GV=1;var t=wr(),e=ai(),r=ug();return RC=function(n,s,i){t?e.f(n,s,r(0,i)):n[s]=i},RC}var MC,YV;function KD(){if(YV)return MC;YV=1;var t=Ar(),e=t("toStringTag"),r={};return r[e]="z",MC=String(r)==="[object z]",MC}var AC,QV;function of(){if(QV)return AC;QV=1;var t=KD(),e=tn(),r=oo(),n=Ar(),s=n("toStringTag"),i=Object,o=r(function(){return arguments}())==="Arguments",a=function(l,u){try{return l[u]}catch{}};return AC=t?r:function(l){var u,d,h;return l===void 0?"Undefined":l===null?"Null":typeof(d=a(u=i(l),s))=="string"?d:o?r(u):(h=r(u))==="Object"&&e(u.callee)?"Arguments":h},AC}var DC,XV;function nMe(){if(XV)return DC;XV=1;var t=ft(),e=tn(),r=zD(),n=t(Function.toString);return e(r.inspectSource)||(r.inspectSource=function(s){return n(s)}),DC=r.inspectSource,DC}var $C,JV;function Cle(){if(JV)return $C;JV=1;var t=ft(),e=dt(),r=tn(),n=of(),s=Rs(),i=nMe(),o=function(){},a=s("Reflect","construct"),l=/^\s*(?:class|function)\b/,u=t(l.exec),d=!l.test(o),h=function(m){if(!r(m))return!1;try{return a(o,[],m),!0}catch{return!1}},f=function(m){if(!r(m))return!1;switch(n(m)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!u(l,i(m))}catch{return!0}};return f.sham=!0,$C=!a||e(function(){var p;return h(h.call)||!h(Object)||!h(function(){p=!0})||p})?f:h,$C}var FC,ZV;function sMe(){if(ZV)return FC;ZV=1;var t=Nu(),e=Cle(),r=rn(),n=Ar(),s=n("species"),i=Array;return FC=function(o){var a;return t(o)&&(a=o.constructor,e(a)&&(a===i||t(a.prototype))?a=void 0:r(a)&&(a=a[s],a===null&&(a=void 0))),a===void 0?i:a},FC}var qC,eU;function GD(){if(eU)return qC;eU=1;var t=sMe();return qC=function(e,r){return new(t(e))(r===0?0:r)},qC}var LC,tU;function mg(){if(tU)return LC;tU=1;var t=dt(),e=Ar(),r=dg(),n=e("species");return LC=function(s){return r>=51||!t(function(){var i=[],o=i.constructor={};return o[n]=function(){return{foo:1}},i[s](Boolean).foo!==1})},LC}var rU;function kle(){if(rU)return UV;rU=1;var t=Me(),e=dt(),r=Nu(),n=rn(),s=Ms(),i=ha(),o=Nle(),a=ux(),l=GD(),u=mg(),d=Ar(),h=dg(),f=d("isConcatSpreadable"),p=h>=51||!e(function(){var y=[];return y[f]=!1,y.concat()[0]!==y}),m=function(y){if(!n(y))return!1;var v=y[f];return v!==void 0?!!v:r(y)},g=!p||!u("concat");return t({target:"Array",proto:!0,arity:1,forced:g},{concat:function(v){var b=s(this),w=l(b,0),x=0,S,E,N,_,k;for(S=-1,N=arguments.length;S<N;S++)if(k=S===-1?b:arguments[S],m(k))for(_=i(k),o(x+_),E=0;E<_;E++,x++)E in k&&a(w,x,k[E]);else o(x+1),a(w,x++,k);return w.length=x,w}}),UV}var nU={},sU={},BC,iU;function li(){if(iU)return BC;iU=1;var t=of(),e=String;return BC=function(r){if(t(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(r)},BC}var zC={},oU;function YD(){if(oU)return zC;oU=1;var t=wr(),e=vle(),r=ai(),n=ao(),s=Oi(),i=pg();return zC.f=t&&!e?Object.defineProperties:function(a,l){n(a);for(var u=s(l),d=i(l),h=d.length,f=0,p;h>f;)r.f(a,p=d[f++],u[p]);return a},zC}var WC,aU;function iMe(){if(aU)return WC;aU=1;var t=Rs();return WC=t("document","documentElement"),WC}var VC,lU;function dx(){if(lU)return VC;lU=1;var t=tf(),e=ix(),r=t("keys");return VC=function(n){return r[n]||(r[n]=e(n))},VC}var UC,cU;function gg(){if(cU)return UC;cU=1;var t=ao(),e=YD(),r=UD(),n=fg(),s=iMe(),i=gle(),o=dx(),a=">",l="<",u="prototype",d="script",h=o("IE_PROTO"),f=function(){},p=function(b){return l+d+a+b+l+"/"+d+a},m=function(b){b.write(p("")),b.close();var w=b.parentWindow.Object;return b=null,w},g=function(){var b=i("iframe"),w="java"+d+":",x;return b.style.display="none",s.appendChild(b),b.src=String(w),x=b.contentWindow.document,x.open(),x.write(p("document.F=Object")),x.close(),x.F},y,v=function(){try{y=new ActiveXObject("htmlfile")}catch{}v=typeof document<"u"?document.domain&&y?m(y):g():m(y);for(var b=r.length;b--;)delete v[u][r[b]];return v()};return n[h]=!0,UC=Object.create||function(w,x){var S;return w!==null?(f[u]=t(w),S=new f,f[u]=null,S[h]=w):S=v(),x===void 0?S:e.f(S,x)},UC}var HC={},uU;function hx(){if(uU)return HC;uU=1;var t=xle(),e=UD(),r=e.concat("length","prototype");return HC.f=Object.getOwnPropertyNames||function(s){return t(s,r)},HC}var KC={},dU;function QD(){if(dU)return KC;dU=1;var t=oo(),e=Oi(),r=hx().f,n=sf(),s=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],i=function(o){try{return r(o)}catch{return n(s)}};return KC.f=function(a){return s&&t(a)==="Window"?i(a):r(e(a))},KC}var GC,hU;function yg(){if(hU)return GC;hU=1;var t=rf();return GC=function(e,r,n,s){return s&&s.enumerable?e[r]=n:t(e,r,n),e},GC}var YC,fU;function XD(){if(fU)return YC;fU=1;var t=ai();return YC=function(e,r,n){return t.f(e,r,n)},YC}var QC={},pU;function fx(){if(pU)return QC;pU=1;var t=Ar();return QC.f=t,QC}var XC,mU;function rr(){if(mU)return XC;mU=1;var t=jt(),e=mn(),r=fx(),n=ai().f;return XC=function(s){var i=t.Symbol||(t.Symbol={});e(i,s)||n(i,s,{value:r.f(s)})},XC}var JC,gU;function jle(){if(gU)return JC;gU=1;var t=vs(),e=Rs(),r=Ar(),n=yg();return JC=function(){var s=e("Symbol"),i=s&&s.prototype,o=i&&i.valueOf,a=r("toPrimitive");i&&!i[a]&&n(i,a,function(l){return t(o,this)},{arity:1})},JC}var ZC,yU;function oMe(){if(yU)return ZC;yU=1;var t=KD(),e=of();return ZC=t?{}.toString:function(){return"[object "+e(this)+"]"},ZC}var ek,vU;function Cu(){if(vU)return ek;vU=1;var t=KD(),e=ai().f,r=rf(),n=mn(),s=oMe(),i=Ar(),o=i("toStringTag");return ek=function(a,l,u,d){var h=u?a:a&&a.prototype;h&&(n(h,o)||e(h,o,{configurable:!0,value:l}),d&&!t&&r(h,"toString",s))},ek}var tk,bU;function Tle(){if(bU)return tk;bU=1;var t=Kt(),e=tn(),r=t.WeakMap;return tk=e(r)&&/native code/.test(String(r)),tk}var rk,xU;function ku(){if(xU)return rk;xU=1;var t=Tle(),e=Kt(),r=rn(),n=rf(),s=mn(),i=zD(),o=dx(),a=fg(),l="Object already initialized",u=e.TypeError,d=e.WeakMap,h,f,p,m=function(b){return p(b)?f(b):h(b,{})},g=function(b){return function(w){var x;if(!r(w)||(x=f(w)).type!==b)throw new u("Incompatible receiver, "+b+" required");return x}};if(t||i.state){var y=i.state||(i.state=new d);y.get=y.get,y.has=y.has,y.set=y.set,h=function(b,w){if(y.has(b))throw new u(l);return w.facade=b,y.set(b,w),w},f=function(b){return y.get(b)||{}},p=function(b){return y.has(b)}}else{var v=o("state");a[v]=!0,h=function(b,w){if(s(b,v))throw new u(l);return w.facade=b,n(b,v,w),w},f=function(b){return s(b,v)?b[v]:{}},p=function(b){return s(b,v)}}return rk={set:h,get:f,has:p,enforce:m,getterFor:g},rk}var nk,wU;function Ll(){if(wU)return nk;wU=1;var t=ax(),e=ft(),r=sx(),n=Ms(),s=ha(),i=GD(),o=e([].push),a=function(l){var u=l===1,d=l===2,h=l===3,f=l===4,p=l===6,m=l===7,g=l===5||p;return function(y,v,b,w){for(var x=n(y),S=r(x),E=s(S),N=t(v,b),_=0,k=w||i,j=u?k(y,E):d||m?k(y,0):void 0,T,P;E>_;_++)if((g||_ in S)&&(T=S[_],P=N(T,_,x),l))if(u)j[_]=P;else if(P)switch(l){case 3:return!0;case 5:return T;case 6:return _;case 2:o(j,T)}else switch(l){case 4:return!1;case 7:o(j,T)}return p?-1:h||f?f:j}};return nk={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterReject:a(7)},nk}var SU;function aMe(){if(SU)return sU;SU=1;var t=Me(),e=Kt(),r=vs(),n=ft(),s=ef(),i=wr(),o=Jh(),a=dt(),l=mn(),u=Mr(),d=ao(),h=Oi(),f=WD(),p=li(),m=ug(),g=gg(),y=pg(),v=hx(),b=QD(),w=cx(),x=ox(),S=ai(),E=YD(),N=nx(),_=yg(),k=XD(),j=tf(),T=dx(),P=fg(),O=ix(),D=Ar(),F=fx(),$=rr(),q=jle(),M=Cu(),z=ku(),Y=Ll().forEach,H=T("hidden"),me="Symbol",G="prototype",oe=z.set,Ie=z.getterFor(me),ce=Object[G],De=e.Symbol,Oe=De&&De[G],pt=e.RangeError,wt=e.TypeError,St=e.QObject,fr=x.f,Tt=S.f,Sr=b.f,nn=N.f,zr=n([].push),lt=j("symbols"),pr=j("op-symbols"),Gt=j("wks"),Er=!St||!St[G]||!St[G].findChild,A=function(Se,re,ue){var ge=fr(ce,re);ge&&delete ce[re],Tt(Se,re,ue),ge&&Se!==ce&&Tt(ce,re,ge)},L=i&&a(function(){return g(Tt({},"a",{get:function(){return Tt(this,"a",{value:7}).a}})).a!==7})?A:Tt,V=function(Se,re){var ue=lt[Se]=g(Oe);return oe(ue,{type:me,tag:Se,description:re}),i||(ue.description=re),ue},le=function(re,ue,ge){re===ce&&le(pr,ue,ge),d(re);var je=f(ue);return d(ge),l(lt,je)?(ge.enumerable?(l(re,H)&&re[H][je]&&(re[H][je]=!1),ge=g(ge,{enumerable:m(0,!1)})):(l(re,H)||Tt(re,H,m(1,g(null))),re[H][je]=!0),L(re,je,ge)):Tt(re,je,ge)},Z=function(re,ue){d(re);var ge=h(ue),je=y(ge).concat(Ot(ge));return Y(je,function(B){(!i||r(be,ge,B))&&le(re,B,ge[B])}),re},ee=function(re,ue){return ue===void 0?g(re):Z(g(re),ue)},be=function(re){var ue=f(re),ge=r(nn,this,ue);return this===ce&&l(lt,ue)&&!l(pr,ue)?!1:ge||!l(this,ue)||!l(lt,ue)||l(this,H)&&this[H][ue]?ge:!0},Be=function(re,ue){var ge=h(re),je=f(ue);if(!(ge===ce&&l(lt,je)&&!l(pr,je))){var B=fr(ge,je);return B&&l(lt,je)&&!(l(ge,H)&&ge[H][je])&&(B.enumerable=!0),B}},Ue=function(re){var ue=Sr(h(re)),ge=[];return Y(ue,function(je){!l(lt,je)&&!l(P,je)&&zr(ge,je)}),ge},Ot=function(Se){var re=Se===ce,ue=Sr(re?pr:h(Se)),ge=[];return Y(ue,function(je){l(lt,je)&&(!re||l(ce,je))&&zr(ge,lt[je])}),ge};return o||(De=function(){if(u(Oe,this))throw new wt("Symbol is not a constructor");var re=!arguments.length||arguments[0]===void 0?void 0:p(arguments[0]),ue=O(re),ge=function(je){var B=this===void 0?e:this;B===ce&&r(ge,pr,je),l(B,H)&&l(B[H],ue)&&(B[H][ue]=!1);var fe=m(1,je);try{L(B,ue,fe)}catch(xe){if(!(xe instanceof pt))throw xe;A(B,ue,fe)}};return i&&Er&&L(ce,ue,{configurable:!0,set:ge}),V(ue,re)},Oe=De[G],_(Oe,"toString",function(){return Ie(this).tag}),_(De,"withoutSetter",function(Se){return V(O(Se),Se)}),N.f=be,S.f=le,E.f=Z,x.f=Be,v.f=b.f=Ue,w.f=Ot,F.f=function(Se){return V(D(Se),Se)},i&&(k(Oe,"description",{configurable:!0,get:function(){return Ie(this).description}}),s||_(ce,"propertyIsEnumerable",be,{unsafe:!0}))),t({global:!0,constructor:!0,wrap:!0,forced:!o,sham:!o},{Symbol:De}),Y(y(Gt),function(Se){$(Se)}),t({target:me,stat:!0,forced:!o},{useSetter:function(){Er=!0},useSimple:function(){Er=!1}}),t({target:"Object",stat:!0,forced:!o,sham:!i},{create:ee,defineProperty:le,defineProperties:Z,getOwnPropertyDescriptor:Be}),t({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:Ue}),q(),M(De,me),P[H]=!0,sU}var EU={},sk,_U;function Ole(){if(_U)return sk;_U=1;var t=Jh();return sk=t&&!!Symbol.for&&!!Symbol.keyFor,sk}var NU;function lMe(){if(NU)return EU;NU=1;var t=Me(),e=Rs(),r=mn(),n=li(),s=tf(),i=Ole(),o=s("string-to-symbol-registry"),a=s("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!i},{for:function(l){var u=n(l);if(r(o,u))return o[u];var d=e("Symbol")(u);return o[u]=d,a[d]=u,d}}),EU}var CU={},kU;function cMe(){if(kU)return CU;kU=1;var t=Me(),e=mn(),r=hg(),n=Zh(),s=tf(),i=Ole(),o=s("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!i},{keyFor:function(l){if(!r(l))throw new TypeError(n(l)+" is not a symbol");if(e(o,l))return o[l]}}),CU}var jU={},ik,TU;function uMe(){if(TU)return ik;TU=1;var t=ft(),e=Nu(),r=tn(),n=oo(),s=li(),i=t([].push);return ik=function(o){if(r(o))return o;if(e(o)){for(var a=o.length,l=[],u=0;u<a;u++){var d=o[u];typeof d=="string"?i(l,d):(typeof d=="number"||n(d)==="Number"||n(d)==="String")&&i(l,s(d))}var h=l.length,f=!0;return function(p,m){if(f)return f=!1,m;if(e(this))return m;for(var g=0;g<h;g++)if(l[g]===p)return m}}},ik}var OU;function Ple(){if(OU)return jU;OU=1;var t=Me(),e=Rs(),r=rx(),n=vs(),s=ft(),i=dt(),o=tn(),a=hg(),l=sf(),u=uMe(),d=Jh(),h=String,f=e("JSON","stringify"),p=s(/./.exec),m=s("".charAt),g=s("".charCodeAt),y=s("".replace),v=s(1.1.toString),b=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,x=/^[\uDC00-\uDFFF]$/,S=!d||i(function(){var k=e("Symbol")("stringify detection");return f([k])!=="[null]"||f({a:k})!=="{}"||f(Object(k))!=="{}"}),E=i(function(){return f("\uDF06\uD834")!=='"\\udf06\\ud834"'||f("\uDEAD")!=='"\\udead"'}),N=function(k,j){var T=l(arguments),P=u(j);if(!(!o(P)&&(k===void 0||a(k))))return T[1]=function(O,D){if(o(P)&&(D=n(P,this,h(O),D)),!a(D))return D},r(f,null,T)},_=function(k,j,T){var P=m(T,j-1),O=m(T,j+1);return p(w,k)&&!p(x,O)||p(x,k)&&!p(w,P)?"\\u"+v(g(k,0),16):k};return f&&t({target:"JSON",stat:!0,arity:3,forced:S||E},{stringify:function(j,T,P){var O=l(arguments),D=r(S?N:f,null,O);return E&&typeof D=="string"?y(D,b,_):D}}),jU}var PU={},IU;function dMe(){if(IU)return PU;IU=1;var t=Me(),e=Jh(),r=dt(),n=cx(),s=Ms(),i=!e||r(function(){n.f(1)});return t({target:"Object",stat:!0,forced:i},{getOwnPropertySymbols:function(a){var l=n.f;return l?l(s(a)):[]}}),PU}var RU;function Ile(){return RU||(RU=1,aMe(),lMe(),cMe(),Ple(),dMe()),nU}var MU={},AU;function Rle(){if(AU)return MU;AU=1;var t=rr();return t("asyncDispose"),MU}var DU={},$U;function hMe(){if($U)return DU;$U=1;var t=rr();return t("asyncIterator"),DU}var FU={},qU;function Mle(){if(qU)return FU;qU=1;var t=rr();return t("dispose"),FU}var LU={},BU;function fMe(){if(BU)return LU;BU=1;var t=rr();return t("hasInstance"),LU}var zU={},WU;function pMe(){if(WU)return zU;WU=1;var t=rr();return t("isConcatSpreadable"),zU}var VU={},UU;function Ale(){if(UU)return VU;UU=1;var t=rr();return t("iterator"),VU}var HU={},KU;function mMe(){if(KU)return HU;KU=1;var t=rr();return t("match"),HU}var GU={},YU;function gMe(){if(YU)return GU;YU=1;var t=rr();return t("matchAll"),GU}var QU={},XU;function yMe(){if(XU)return QU;XU=1;var t=rr();return t("replace"),QU}var JU={},ZU;function vMe(){if(ZU)return JU;ZU=1;var t=rr();return t("search"),JU}var eH={},tH;function bMe(){if(tH)return eH;tH=1;var t=rr();return t("species"),eH}var rH={},nH;function xMe(){if(nH)return rH;nH=1;var t=rr();return t("split"),rH}var sH={},iH;function Dle(){if(iH)return sH;iH=1;var t=rr(),e=jle();return t("toPrimitive"),e(),sH}var oH={},aH;function wMe(){if(aH)return oH;aH=1;var t=Rs(),e=rr(),r=Cu();return e("toStringTag"),r(t("Symbol"),"Symbol"),oH}var lH={},cH;function SMe(){if(cH)return lH;cH=1;var t=rr();return t("unscopables"),lH}var uH={},dH;function EMe(){if(dH)return uH;dH=1;var t=Kt(),e=Cu();return e(t.JSON,"JSON",!0),uH}var ok,hH;function _Me(){if(hH)return ok;hH=1,kle(),Ile(),Rle(),hMe(),Mle(),fMe(),pMe(),Ale(),mMe(),gMe(),yMe(),vMe(),bMe(),xMe(),Dle(),wMe(),SMe(),EMe();var t=jt();return ok=t.Symbol,ok}var fH={},ak,pH;function JD(){return pH||(pH=1,ak=function(){}),ak}var lk,mH;function af(){return mH||(mH=1,lk={}),lk}var ck,gH;function NMe(){if(gH)return ck;gH=1;var t=wr(),e=mn(),r=Function.prototype,n=t&&Object.getOwnPropertyDescriptor,s=e(r,"name"),i=s&&(function(){}).name==="something",o=s&&(!t||t&&n(r,"name").configurable);return ck={EXISTS:s,PROPER:i,CONFIGURABLE:o},ck}var uk,yH;function $le(){if(yH)return uk;yH=1;var t=dt();return uk=!t(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),uk}var dk,vH;function px(){if(vH)return dk;vH=1;var t=mn(),e=tn(),r=Ms(),n=dx(),s=$le(),i=n("IE_PROTO"),o=Object,a=o.prototype;return dk=s?o.getPrototypeOf:function(l){var u=r(l);if(t(u,i))return u[i];var d=u.constructor;return e(d)&&u instanceof d?d.prototype:u instanceof o?a:null},dk}var hk,bH;function Fle(){if(bH)return hk;bH=1;var t=dt(),e=tn(),r=rn(),n=gg(),s=px(),i=yg(),o=Ar(),a=ef(),l=o("iterator"),u=!1,d,h,f;[].keys&&(f=[].keys(),"next"in f?(h=s(s(f)),h!==Object.prototype&&(d=h)):u=!0);var p=!r(d)||t(function(){var m={};return d[l].call(m)!==m});return p?d={}:a&&(d=n(d)),e(d[l])||i(d,l,function(){return this}),hk={IteratorPrototype:d,BUGGY_SAFARI_ITERATORS:u},hk}var fk,xH;function CMe(){if(xH)return fk;xH=1;var t=Fle().IteratorPrototype,e=gg(),r=ug(),n=Cu(),s=af(),i=function(){return this};return fk=function(o,a,l,u){var d=a+" Iterator";return o.prototype=e(t,{next:r(+!u,l)}),n(o,d,!1,!0),s[d]=i,o},fk}var pk,wH;function kMe(){if(wH)return pk;wH=1;var t=ft(),e=da();return pk=function(r,n,s){try{return t(e(Object.getOwnPropertyDescriptor(r,n)[s]))}catch{}},pk}var mk,SH;function jMe(){if(SH)return mk;SH=1;var t=rn();return mk=function(e){return t(e)||e===null},mk}var gk,EH;function TMe(){if(EH)return gk;EH=1;var t=jMe(),e=String,r=TypeError;return gk=function(n){if(t(n))return n;throw new r("Can't set "+e(n)+" as a prototype")},gk}var yk,_H;function OMe(){if(_H)return yk;_H=1;var t=kMe(),e=rn(),r=ua(),n=TMe();return yk=Object.setPrototypeOf||("__proto__"in{}?function(){var s=!1,i={},o;try{o=t(Object.prototype,"__proto__","set"),o(i,[]),s=i instanceof Array}catch{}return function(l,u){return r(l),n(u),e(l)&&(s?o(l,u):l.__proto__=u),l}}():void 0),yk}var vk,NH;function ZD(){if(NH)return vk;NH=1;var t=Me(),e=vs(),r=ef(),n=NMe(),s=tn(),i=CMe(),o=px(),a=OMe(),l=Cu(),u=rf(),d=yg(),h=Ar(),f=af(),p=Fle(),m=n.PROPER,g=n.CONFIGURABLE,y=p.IteratorPrototype,v=p.BUGGY_SAFARI_ITERATORS,b=h("iterator"),w="keys",x="values",S="entries",E=function(){return this};return vk=function(N,_,k,j,T,P,O){i(k,_,j);var D=function(oe){if(oe===T&&z)return z;if(!v&&oe&&oe in q)return q[oe];switch(oe){case w:return function(){return new k(this,oe)};case x:return function(){return new k(this,oe)};case S:return function(){return new k(this,oe)}}return function(){return new k(this)}},F=_+" Iterator",$=!1,q=N.prototype,M=q[b]||q["@@iterator"]||T&&q[T],z=!v&&M||D(T),Y=_==="Array"&&q.entries||M,H,me,G;if(Y&&(H=o(Y.call(new N)),H!==Object.prototype&&H.next&&(!r&&o(H)!==y&&(a?a(H,y):s(H[b])||d(H,b,E)),l(H,F,!0,!0),r&&(f[F]=E))),m&&T===x&&M&&M.name!==x&&(!r&&g?u(q,"name",x):($=!0,z=function(){return e(M,this)})),T)if(me={values:D(x),keys:P?z:D(w),entries:D(S)},O)for(G in me)(v||$||!(G in q))&&d(q,G,me[G]);else t({target:_,proto:!0,forced:v||$},me);return(!r||O)&&q[b]!==z&&d(q,b,z,{name:T}),f[_]=z,me},vk}var bk,CH;function e$(){return CH||(CH=1,bk=function(t,e){return{value:t,done:e}}),bk}var xk,kH;function lf(){if(kH)return xk;kH=1;var t=Oi(),e=JD(),r=af(),n=ku(),s=ai().f,i=ZD(),o=e$(),a=ef(),l=wr(),u="Array Iterator",d=n.set,h=n.getterFor(u);xk=i(Array,"Array",function(p,m){d(this,{type:u,target:t(p),index:0,kind:m})},function(){var p=h(this),m=p.target,g=p.index++;if(!m||g>=m.length)return p.target=null,o(void 0,!0);switch(p.kind){case"keys":return o(g,!1);case"values":return o(m[g],!1)}return o([g,m[g]],!1)},"values");var f=r.Arguments=r.Array;if(e("keys"),e("values"),e("entries"),!a&&l&&f.name!=="values")try{s(f,"name",{value:"values"})}catch{}return xk}var wk,jH;function PMe(){return jH||(jH=1,wk={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),wk}var TH;function cf(){if(TH)return fH;TH=1,lf();var t=PMe(),e=Kt(),r=Cu(),n=af();for(var s in t)r(e[s],s),n[s]=n.Array;return fH}var Sk,OH;function qle(){if(OH)return Sk;OH=1;var t=_Me();return cf(),Sk=t,Sk}var Ek,PH;function IMe(){return PH||(PH=1,Ek=qle()),Ek}var RMe=IMe(),MMe=Ve(RMe),IH={},RH;function AMe(){if(RH)return IH;RH=1;var t=Me(),e=Nu(),r=Cle(),n=rn(),s=lx(),i=ha(),o=Oi(),a=ux(),l=Ar(),u=mg(),d=sf(),h=u("slice"),f=l("species"),p=Array,m=Math.max;return t({target:"Array",proto:!0,forced:!h},{slice:function(y,v){var b=o(this),w=i(b),x=s(y,w),S=s(v===void 0?w:v,w),E,N,_;if(e(b)&&(E=b.constructor,r(E)&&(E===p||e(E.prototype))?E=void 0:n(E)&&(E=E[f],E===null&&(E=void 0)),E===p||E===void 0))return d(b,x,S);for(N=new(E===void 0?p:E)(m(S-x,0)),_=0;x<S;x++,_++)x in b&&a(N,_,b[x]);return N.length=_,N}}),IH}var _k,MH;function DMe(){if(MH)return _k;MH=1,AMe();var t=gn();return _k=t("Array","slice"),_k}var Nk,AH;function $Me(){if(AH)return Nk;AH=1;var t=Mr(),e=DMe(),r=Array.prototype;return Nk=function(n){var s=n.slice;return n===r||t(r,n)&&s===r.slice?e:s},Nk}var Ck,DH;function FMe(){if(DH)return Ck;DH=1;var t=$Me();return Ck=t,Ck}var kk,$H;function qMe(){return $H||($H=1,kk=FMe()),kk}var LMe=qMe(),Hi=Ve(LMe),jk,FH;function BMe(){if(FH)return jk;FH=1;var t=Rs(),e=ft(),r=hx(),n=cx(),s=ao(),i=e([].concat);return jk=t("Reflect","ownKeys")||function(a){var l=r.f(s(a)),u=n.f;return u?i(l,u(a)):l},jk}var qH={},LH;function zMe(){if(LH)return qH;LH=1;var t=Me(),e=Nu();return t({target:"Array",stat:!0},{isArray:e}),qH}var Tk,BH;function WMe(){if(BH)return Tk;BH=1,zMe();var t=jt();return Tk=t.Array.isArray,Tk}var Ok,zH;function VMe(){if(zH)return Ok;zH=1;var t=WMe();return Ok=t,Ok}var Pk,WH;function UMe(){return WH||(WH=1,Pk=VMe()),Pk}var HMe=UMe(),hr=Ve(HMe),VH={},UH;function KMe(){if(UH)return VH;UH=1;var t=Me(),e=Ll().map,r=mg(),n=r("map");return t({target:"Array",proto:!0,forced:!n},{map:function(i){return e(this,i,arguments.length>1?arguments[1]:void 0)}}),VH}var Ik,HH;function GMe(){if(HH)return Ik;HH=1,KMe();var t=gn();return Ik=t("Array","map"),Ik}var Rk,KH;function YMe(){if(KH)return Rk;KH=1;var t=Mr(),e=GMe(),r=Array.prototype;return Rk=function(n){var s=n.map;return n===r||t(r,n)&&s===r.map?e:s},Rk}var Mk,GH;function QMe(){if(GH)return Mk;GH=1;var t=YMe();return Mk=t,Mk}var Ak,YH;function XMe(){return YH||(YH=1,Ak=QMe()),Ak}var JMe=XMe(),wh=Ve(JMe),QH={},XH;function ZMe(){if(XH)return QH;XH=1;var t=Me(),e=Ms(),r=pg(),n=dt(),s=n(function(){r(1)});return t({target:"Object",stat:!0,forced:s},{keys:function(o){return r(e(o))}}),QH}var Dk,JH;function eAe(){if(JH)return Dk;JH=1,ZMe();var t=jt();return Dk=t.Object.keys,Dk}var $k,ZH;function tAe(){if(ZH)return $k;ZH=1;var t=eAe();return $k=t,$k}var Fk,eK;function rAe(){return eK||(eK=1,Fk=tAe()),Fk}var nAe=rAe(),lr=Ve(nAe),tK={},rK;function sAe(){if(rK)return tK;rK=1;var t=Me(),e=ft(),r=Date,n=e(r.prototype.getTime);return t({target:"Date",stat:!0},{now:function(){return n(new r)}}),tK}var qk,nK;function iAe(){if(nK)return qk;nK=1,sAe();var t=jt();return qk=t.Date.now,qk}var Lk,sK;function oAe(){if(sK)return Lk;sK=1;var t=iAe();return Lk=t,Lk}var Bk,iK;function aAe(){return iK||(iK=1,Bk=oAe()),Bk}var lAe=aAe(),D0=Ve(lAe),oK={},zk,aK;function uf(){if(aK)return zk;aK=1;var t=dt();return zk=function(e,r){var n=[][e];return!!n&&t(function(){n.call(null,r||function(){return 1},1)})},zk}var Wk,lK;function cAe(){if(lK)return Wk;lK=1;var t=Ll().forEach,e=uf(),r=e("forEach");return Wk=r?[].forEach:function(s){return t(this,s,arguments.length>1?arguments[1]:void 0)},Wk}var cK;function uAe(){if(cK)return oK;cK=1;var t=Me(),e=cAe();return t({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),oK}var Vk,uK;function dAe(){if(uK)return Vk;uK=1,uAe();var t=gn();return Vk=t("Array","forEach"),Vk}var Uk,dK;function hAe(){if(dK)return Uk;dK=1;var t=dAe();return Uk=t,Uk}var Hk,hK;function fAe(){if(hK)return Hk;hK=1;var t=of(),e=mn(),r=Mr(),n=hAe(),s=Array.prototype,i={DOMTokenList:!0,NodeList:!0};return Hk=function(o){var a=o.forEach;return o===s||r(s,o)&&a===s.forEach||e(i,t(o))?n:a},Hk}var Kk,fK;function pAe(){return fK||(fK=1,Kk=fAe()),Kk}var mAe=pAe(),Mt=Ve(mAe),pK={},mK;function gAe(){if(mK)return pK;mK=1;var t=Me(),e=ft(),r=Nu(),n=e([].reverse),s=[1,2];return t({target:"Array",proto:!0,forced:String(s)===String(s.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),n(this)}}),pK}var Gk,gK;function yAe(){if(gK)return Gk;gK=1,gAe();var t=gn();return Gk=t("Array","reverse"),Gk}var Yk,yK;function vAe(){if(yK)return Yk;yK=1;var t=Mr(),e=yAe(),r=Array.prototype;return Yk=function(n){var s=n.reverse;return n===r||t(r,n)&&s===r.reverse?e:s},Yk}var Qk,vK;function bAe(){if(vK)return Qk;vK=1;var t=vAe();return Qk=t,Qk}var Xk,bK;function xAe(){return bK||(bK=1,Xk=bAe()),Xk}var wAe=xAe(),Rc=Ve(wAe),xK={},Jk,wK;function SAe(){if(wK)return Jk;wK=1;var t=wr(),e=Nu(),r=TypeError,n=Object.getOwnPropertyDescriptor,s=t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(i){return i instanceof TypeError}}();return Jk=s?function(i,o){if(e(i)&&!n(i,"length").writable)throw new r("Cannot set read only .length");return i.length=o}:function(i,o){return i.length=o},Jk}var Zk,SK;function Lle(){if(SK)return Zk;SK=1;var t=Zh(),e=TypeError;return Zk=function(r,n){if(!delete r[n])throw new e("Cannot delete property "+t(n)+" of "+t(r))},Zk}var EK;function EAe(){if(EK)return xK;EK=1;var t=Me(),e=Ms(),r=lx(),n=nf(),s=ha(),i=SAe(),o=Nle(),a=GD(),l=ux(),u=Lle(),d=mg(),h=d("splice"),f=Math.max,p=Math.min;return t({target:"Array",proto:!0,forced:!h},{splice:function(g,y){var v=e(this),b=s(v),w=r(g,b),x=arguments.length,S,E,N,_,k,j;for(x===0?S=E=0:x===1?(S=0,E=b-w):(S=x-2,E=p(f(n(y),0),b-w)),o(b+S-E),N=a(v,E),_=0;_<E;_++)k=w+_,k in v&&l(N,_,v[k]);if(N.length=E,S<E){for(_=w;_<b-E;_++)k=_+E,j=_+S,k in v?v[j]=v[k]:u(v,j);for(_=b;_>b-E+S;_--)u(v,_-1)}else if(S>E)for(_=b-E;_>w;_--)k=_+E-1,j=_+S-1,k in v?v[j]=v[k]:u(v,j);for(_=0;_<S;_++)v[_+w]=arguments[_+2];return i(v,b-E+S),N}}),xK}var ej,_K;function _Ae(){if(_K)return ej;_K=1,EAe();var t=gn();return ej=t("Array","splice"),ej}var tj,NK;function NAe(){if(NK)return tj;NK=1;var t=Mr(),e=_Ae(),r=Array.prototype;return tj=function(n){var s=n.splice;return n===r||t(r,n)&&s===r.splice?e:s},tj}var rj,CK;function CAe(){if(CK)return rj;CK=1;var t=NAe();return rj=t,rj}var nj,kK;function kAe(){return kK||(kK=1,nj=CAe()),nj}var jAe=kAe(),Wo=Ve(jAe),jK={},TK;function TAe(){if(TK)return jK;TK=1;var t=Me(),e=VD().includes,r=dt(),n=JD(),s=r(function(){return!Array(1).includes()});return t({target:"Array",proto:!0,forced:s},{includes:function(o){return e(this,o,arguments.length>1?arguments[1]:void 0)}}),n("includes"),jK}var sj,OK;function OAe(){if(OK)return sj;OK=1,TAe();var t=gn();return sj=t("Array","includes"),sj}var PK={},ij,IK;function PAe(){if(IK)return ij;IK=1;var t=rn(),e=oo(),r=Ar(),n=r("match");return ij=function(s){var i;return t(s)&&((i=s[n])!==void 0?!!i:e(s)==="RegExp")},ij}var oj,RK;function IAe(){if(RK)return oj;RK=1;var t=PAe(),e=TypeError;return oj=function(r){if(t(r))throw new e("The method doesn't accept regular expressions");return r},oj}var aj,MK;function RAe(){if(MK)return aj;MK=1;var t=Ar(),e=t("match");return aj=function(r){var n=/./;try{"/./"[r](n)}catch{try{return n[e]=!1,"/./"[r](n)}catch{}}return!1},aj}var AK;function MAe(){if(AK)return PK;AK=1;var t=Me(),e=ft(),r=IAe(),n=ua(),s=li(),i=RAe(),o=e("".indexOf);return t({target:"String",proto:!0,forced:!i("includes")},{includes:function(l){return!!~o(s(n(this)),s(r(l)),arguments.length>1?arguments[1]:void 0)}}),PK}var lj,DK;function AAe(){if(DK)return lj;DK=1,MAe();var t=gn();return lj=t("String","includes"),lj}var cj,$K;function DAe(){if($K)return cj;$K=1;var t=Mr(),e=OAe(),r=AAe(),n=Array.prototype,s=String.prototype;return cj=function(i){var o=i.includes;return i===n||t(n,i)&&o===n.includes?e:typeof i=="string"||i===s||t(s,i)&&o===s.includes?r:o},cj}var uj,FK;function $Ae(){if(FK)return uj;FK=1;var t=DAe();return uj=t,uj}var dj,qK;function FAe(){return qK||(qK=1,dj=$Ae()),dj}var qAe=FAe(),ml=Ve(qAe),LK={},BK;function LAe(){if(BK)return LK;BK=1;var t=Me(),e=dt(),r=Ms(),n=px(),s=$le(),i=e(function(){n(1)});return t({target:"Object",stat:!0,forced:i,sham:!s},{getPrototypeOf:function(a){return n(r(a))}}),LK}var hj,zK;function BAe(){if(zK)return hj;zK=1,LAe();var t=jt();return hj=t.Object.getPrototypeOf,hj}var fj,WK;function zAe(){if(WK)return fj;WK=1;var t=BAe();return fj=t,fj}var pj,VK;function WAe(){return VK||(VK=1,pj=zAe()),pj}var VAe=WAe(),UK=Ve(VAe),mj,HK;function UAe(){if(HK)return mj;HK=1,kle();var t=gn();return mj=t("Array","concat"),mj}var gj,KK;function HAe(){if(KK)return gj;KK=1;var t=Mr(),e=UAe(),r=Array.prototype;return gj=function(n){var s=n.concat;return n===r||t(r,n)&&s===r.concat?e:s},gj}var yj,GK;function KAe(){if(GK)return yj;GK=1;var t=HAe();return yj=t,yj}var vj,YK;function GAe(){return YK||(YK=1,vj=KAe()),vj}var YAe=GAe(),QAe=Ve(YAe),QK={},XK;function XAe(){if(XK)return QK;XK=1;var t=Me(),e=Ll().filter,r=mg(),n=r("filter");return t({target:"Array",proto:!0,forced:!n},{filter:function(i){return e(this,i,arguments.length>1?arguments[1]:void 0)}}),QK}var bj,JK;function JAe(){if(JK)return bj;JK=1,XAe();var t=gn();return bj=t("Array","filter"),bj}var xj,ZK;function ZAe(){if(ZK)return xj;ZK=1;var t=Mr(),e=JAe(),r=Array.prototype;return xj=function(n){var s=n.filter;return n===r||t(r,n)&&s===r.filter?e:s},xj}var wj,eG;function eDe(){if(eG)return wj;eG=1;var t=ZAe();return wj=t,wj}var Sj,tG;function tDe(){return tG||(tG=1,Sj=eDe()),Sj}var rDe=tDe(),ss=Ve(rDe),rG={},Ej,nG;function nDe(){if(nG)return Ej;nG=1;var t=wr(),e=dt(),r=ft(),n=px(),s=pg(),i=Oi(),o=nx().f,a=r(o),l=r([].push),u=t&&e(function(){var h=Object.create(null);return h[2]=2,!a(h,2)}),d=function(h){return function(f){for(var p=i(f),m=s(p),g=u&&n(p)===null,y=m.length,v=0,b=[],w;y>v;)w=m[v++],(!t||(g?w in p:a(p,w)))&&l(b,h?[w,p[w]]:p[w]);return b}};return Ej={entries:d(!0),values:d(!1)},Ej}var sG;function sDe(){if(sG)return rG;sG=1;var t=Me(),e=nDe().values;return t({target:"Object",stat:!0},{values:function(n){return e(n)}}),rG}var _j,iG;function iDe(){if(iG)return _j;iG=1,sDe();var t=jt();return _j=t.Object.values,_j}var Nj,oG;function oDe(){if(oG)return Nj;oG=1;var t=iDe();return Nj=t,Nj}var Cj,aG;function aDe(){return aG||(aG=1,Cj=oDe()),Cj}var lDe=aDe(),cDe=Ve(lDe),lG={},kj,cG;function t$(){return cG||(cG=1,kj=`	
\v\f\r \u2028\u2029\uFEFF`),kj}var jj,uG;function Ble(){if(uG)return jj;uG=1;var t=ft(),e=ua(),r=li(),n=t$(),s=t("".replace),i=RegExp("^["+n+"]+"),o=RegExp("(^|[^"+n+"])["+n+"]+$"),a=function(l){return function(u){var d=r(e(u));return l&1&&(d=s(d,i,"")),l&2&&(d=s(d,o,"$1")),d}};return jj={start:a(1),end:a(2),trim:a(3)},jj}var Tj,dG;function uDe(){if(dG)return Tj;dG=1;var t=Kt(),e=dt(),r=ft(),n=li(),s=Ble().trim,i=t$(),o=t.parseInt,a=t.Symbol,l=a&&a.iterator,u=/^[+-]?0x/i,d=r(u.exec),h=o(i+"08")!==8||o(i+"0x16")!==22||l&&!e(function(){o(Object(l))});return Tj=h?function(p,m){var g=s(n(p));return o(g,m>>>0||(d(u,g)?16:10))}:o,Tj}var hG;function dDe(){if(hG)return lG;hG=1;var t=Me(),e=uDe();return t({global:!0,forced:parseInt!==e},{parseInt:e}),lG}var Oj,fG;function hDe(){if(fG)return Oj;fG=1,dDe();var t=jt();return Oj=t.parseInt,Oj}var Pj,pG;function fDe(){if(pG)return Pj;pG=1;var t=hDe();return Pj=t,Pj}var Ij,mG;function pDe(){return mG||(mG=1,Ij=fDe()),Ij}var mDe=pDe(),bi=Ve(mDe),gG={},yG;function gDe(){if(yG)return gG;yG=1;var t=Me(),e=LD(),r=VD().indexOf,n=uf(),s=e([].indexOf),i=!!s&&1/s([1],1,-0)<0,o=i||!n("indexOf");return t({target:"Array",proto:!0,forced:o},{indexOf:function(l){var u=arguments.length>1?arguments[1]:void 0;return i?s(this,l,u)||0:r(this,l,u)}}),gG}var Rj,vG;function yDe(){if(vG)return Rj;vG=1,gDe();var t=gn();return Rj=t("Array","indexOf"),Rj}var Mj,bG;function vDe(){if(bG)return Mj;bG=1;var t=Mr(),e=yDe(),r=Array.prototype;return Mj=function(n){var s=n.indexOf;return n===r||t(r,n)&&s===r.indexOf?e:s},Mj}var Aj,xG;function bDe(){if(xG)return Aj;xG=1;var t=vDe();return Aj=t,Aj}var Dj,wG;function xDe(){return wG||(wG=1,Dj=bDe()),Dj}var wDe=xDe(),Nt=Ve(wDe),SG={},EG;function SDe(){if(EG)return SG;EG=1;var t=Me(),e=wr(),r=gg();return t({target:"Object",stat:!0,sham:!e},{create:r}),SG}var $j,_G;function EDe(){if(_G)return $j;_G=1,SDe();var t=jt(),e=t.Object;return $j=function(n,s){return e.create(n,s)},$j}var Fj,NG;function _De(){if(NG)return Fj;NG=1;var t=EDe();return Fj=t,Fj}var qj,CG;function NDe(){return CG||(CG=1,qj=_De()),qj}var CDe=NDe(),Mc=Ve(CDe),kG={},Lj,jG;function kDe(){if(jG)return Lj;jG=1;var t=nf(),e=li(),r=ua(),n=RangeError;return Lj=function(i){var o=e(r(this)),a="",l=t(i);if(l<0||l===1/0)throw new n("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(o+=o))l&1&&(a+=o);return a},Lj}var Bj,TG;function jDe(){if(TG)return Bj;TG=1;var t=ft(),e=ble(),r=li(),n=kDe(),s=ua(),i=t(n),o=t("".slice),a=Math.ceil,l=function(u){return function(d,h,f){var p=r(s(d)),m=e(h),g=p.length,y=f===void 0?" ":r(f),v,b;return m<=g||y===""?p:(v=m-g,b=i(y,a(v/y.length)),b.length>v&&(b=o(b,0,v)),u?p+b:b+p)}};return Bj={start:l(!1),end:l(!0)},Bj}var zj,OG;function TDe(){if(OG)return zj;OG=1;var t=ft(),e=dt(),r=jDe().start,n=RangeError,s=isFinite,i=Math.abs,o=Date.prototype,a=o.toISOString,l=t(o.getTime),u=t(o.getUTCDate),d=t(o.getUTCFullYear),h=t(o.getUTCHours),f=t(o.getUTCMilliseconds),p=t(o.getUTCMinutes),m=t(o.getUTCMonth),g=t(o.getUTCSeconds);return zj=e(function(){return a.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){a.call(new Date(NaN))})?function(){if(!s(l(this)))throw new n("Invalid time value");var v=this,b=d(v),w=f(v),x=b<0?"-":b>9999?"+":"";return x+r(i(b),x?6:4,0)+"-"+r(m(v)+1,2,0)+"-"+r(u(v),2,0)+"T"+r(h(v),2,0)+":"+r(p(v),2,0)+":"+r(g(v),2,0)+"."+r(w,3,0)+"Z"}:a,zj}var PG;function ODe(){if(PG)return kG;PG=1;var t=Me(),e=vs(),r=Ms(),n=mle(),s=TDe(),i=oo(),o=dt(),a=o(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return t({target:"Date",proto:!0,forced:a},{toJSON:function(u){var d=r(this),h=n(d,"number");return typeof h=="number"&&!isFinite(h)?null:!("toISOString"in d)&&i(d)==="Date"?e(s,d):d.toISOString()}}),kG}var Wj,IG;function PDe(){if(IG)return Wj;IG=1,ODe(),Ple();var t=jt(),e=rx();return t.JSON||(t.JSON={stringify:JSON.stringify}),Wj=function(n,s,i){return e(t.JSON.stringify,null,arguments)},Wj}var Vj,RG;function IDe(){if(RG)return Vj;RG=1;var t=PDe();return Vj=t,Vj}var Uj,MG;function RDe(){return MG||(MG=1,Uj=IDe()),Uj}var MDe=RDe(),vg=Ve(MDe),AG={},DG={},Hj,$G;function zle(){if($G)return Hj;$G=1;var t=Kt(),e=Xh(),r=oo(),n=function(s){return e.slice(0,s.length)===s};return Hj=function(){return n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":t.Bun&&typeof Bun.version=="string"?"BUN":t.Deno&&typeof Deno.version=="object"?"DENO":r(t.process)==="process"?"NODE":t.window&&t.document?"BROWSER":"REST"}(),Hj}var Kj,FG;function ADe(){if(FG)return Kj;FG=1;var t=TypeError;return Kj=function(e,r){if(e<r)throw new t("Not enough arguments");return e},Kj}var Gj,qG;function Wle(){if(qG)return Gj;qG=1;var t=Kt(),e=rx(),r=tn(),n=zle(),s=Xh(),i=sf(),o=ADe(),a=t.Function,l=/MSIE .\./.test(s)||n==="BUN"&&function(){var u=t.Bun.version.split(".");return u.length<3||u[0]==="0"&&(u[1]<3||u[1]==="3"&&u[2]==="0")}();return Gj=function(u,d){var h=d?2:1;return l?function(f,p){var m=o(arguments.length,1)>h,g=r(f)?f:a(f),y=m?i(arguments,h):[],v=m?function(){e(g,this,y)}:g;return d?u(v,p):u(v)}:u},Gj}var LG;function DDe(){if(LG)return DG;LG=1;var t=Me(),e=Kt(),r=Wle(),n=r(e.setInterval,!0);return t({global:!0,bind:!0,forced:e.setInterval!==n},{setInterval:n}),DG}var BG={},zG;function $De(){if(zG)return BG;zG=1;var t=Me(),e=Kt(),r=Wle(),n=r(e.setTimeout,!0);return t({global:!0,bind:!0,forced:e.setTimeout!==n},{setTimeout:n}),BG}var WG;function Vle(){return WG||(WG=1,DDe(),$De()),AG}var Yj,VG;function FDe(){if(VG)return Yj;VG=1,Vle();var t=jt();return Yj=t.setTimeout,Yj}var Qj,UG;function qDe(){return UG||(UG=1,Qj=FDe()),Qj}var LDe=qDe(),Vo=Ve(LDe),HG={},Xj,KG;function BDe(){if(KG)return Xj;KG=1;var t=Ms(),e=lx(),r=ha();return Xj=function(s){for(var i=t(this),o=r(i),a=arguments.length,l=e(a>1?arguments[1]:void 0,o),u=a>2?arguments[2]:void 0,d=u===void 0?o:e(u,o);d>l;)i[l++]=s;return i},Xj}var GG;function zDe(){if(GG)return HG;GG=1;var t=Me(),e=BDe(),r=JD();return t({target:"Array",proto:!0},{fill:e}),r("fill"),HG}var Jj,YG;function WDe(){if(YG)return Jj;YG=1,zDe();var t=gn();return Jj=t("Array","fill"),Jj}var Zj,QG;function VDe(){if(QG)return Zj;QG=1;var t=Mr(),e=WDe(),r=Array.prototype;return Zj=function(n){var s=n.fill;return n===r||t(r,n)&&s===r.fill?e:s},Zj}var eT,XG;function UDe(){if(XG)return eT;XG=1;var t=VDe();return eT=t,eT}var tT,JG;function HDe(){return JG||(JG=1,tT=UDe()),tT}var KDe=HDe(),bg=Ve(KDe);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function ki(){return ki=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ki.apply(this,arguments)}function ci(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Sy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var zR;typeof Object.assign!="function"?zR=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var s=arguments[n];if(s!=null)for(var i in s)s.hasOwnProperty(i)&&(r[i]=s[i])}return r}:zR=Object.assign;var iu=zR,ZG=["","webkit","Moz","MS","ms","o"],GDe=typeof document>"u"?{style:{}}:document.createElement("div"),YDe="function",bd=Math.round,ou=Math.abs,r$=Date.now;function mx(t,e){for(var r,n,s=e[0].toUpperCase()+e.slice(1),i=0;i<ZG.length;){if(r=ZG[i],n=r?r+s:e,n in t)return n;i++}}var Uo;typeof window>"u"?Uo={}:Uo=window;var Ule=mx(GDe.style,"touchAction"),Hle=Ule!==void 0;function QDe(){if(!Hle)return!1;var t={},e=Uo.CSS&&Uo.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){return t[r]=e?Uo.CSS.supports("touch-action",r):!0}),t}var Kle="compute",Gle="auto",WR="manipulation",Ac="none",fm="pan-x",pm="pan-y",Ey=QDe(),XDe=/mobile|tablet|ip(ad|hone|od)|android/i,Yle="ontouchstart"in Uo,JDe=mx(Uo,"PointerEvent")!==void 0,ZDe=Yle&&XDe.test(navigator.userAgent),xg="touch",e$e="pen",n$="mouse",t$e="kinect",r$e=25,Un=1,ju=2,Tr=4,ms=8,$0=1,wg=2,Sg=4,Eg=8,Sh=16,eo=wg|Sg,Dc=Eg|Sh,Qle=eo|Dc,Xle=["x","y"],F0=["clientX","clientY"];function Ho(t,e,r){var n;if(t)if(t.forEach)t.forEach(e,r);else if(t.length!==void 0)for(n=0;n<t.length;)e.call(r,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t)}function gx(t,e){return typeof t===YDe?t.apply(e&&e[0]||void 0,e):t}function hc(t,e){return t.indexOf(e)>-1}function n$e(t){if(hc(t,Ac))return Ac;var e=hc(t,fm),r=hc(t,pm);return e&&r?Ac:e||r?e?fm:pm:hc(t,WR)?WR:Gle}var Jle=function(){function t(r,n){this.manager=r,this.set(n)}var e=t.prototype;return e.set=function(n){n===Kle&&(n=this.compute()),Hle&&this.manager.element.style&&Ey[n]&&(this.manager.element.style[Ule]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return Ho(this.manager.recognizers,function(s){gx(s.options.enable,[s])&&(n=n.concat(s.getTouchAction()))}),n$e(n.join(" "))},e.preventDefaults=function(n){var s=n.srcEvent,i=n.offsetDirection;if(this.manager.session.prevented){s.preventDefault();return}var o=this.actions,a=hc(o,Ac)&&!Ey[Ac],l=hc(o,pm)&&!Ey[pm],u=hc(o,fm)&&!Ey[fm];if(a){var d=n.pointers.length===1,h=n.distance<2,f=n.deltaTime<250;if(d&&h&&f)return}if(!(u&&l)&&(a||l&&i&eo||u&&i&Dc))return this.preventSrc(s)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},t}();function s$(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function Zle(t){var e=t.length;if(e===1)return{x:bd(t[0].clientX),y:bd(t[0].clientY)};for(var r=0,n=0,s=0;s<e;)r+=t[s].clientX,n+=t[s].clientY,s++;return{x:bd(r/e),y:bd(n/e)}}function eY(t){for(var e=[],r=0;r<t.pointers.length;)e[r]={clientX:bd(t.pointers[r].clientX),clientY:bd(t.pointers[r].clientY)},r++;return{timeStamp:r$(),pointers:e,center:Zle(e),deltaX:t.deltaX,deltaY:t.deltaY}}function q0(t,e,r){r||(r=Xle);var n=e[r[0]]-t[r[0]],s=e[r[1]]-t[r[1]];return Math.sqrt(n*n+s*s)}function VR(t,e,r){r||(r=Xle);var n=e[r[0]]-t[r[0]],s=e[r[1]]-t[r[1]];return Math.atan2(s,n)*180/Math.PI}function ece(t,e){return t===e?$0:ou(t)>=ou(e)?t<0?wg:Sg:e<0?Eg:Sh}function s$e(t,e){var r=e.center,n=t.offsetDelta||{},s=t.prevDelta||{},i=t.prevInput||{};(e.eventType===Un||i.eventType===Tr)&&(s=t.prevDelta={x:i.deltaX||0,y:i.deltaY||0},n=t.offsetDelta={x:r.x,y:r.y}),e.deltaX=s.x+(r.x-n.x),e.deltaY=s.y+(r.y-n.y)}function tce(t,e,r){return{x:e/t||0,y:r/t||0}}function i$e(t,e){return q0(e[0],e[1],F0)/q0(t[0],t[1],F0)}function o$e(t,e){return VR(e[1],e[0],F0)+VR(t[1],t[0],F0)}function a$e(t,e){var r=t.lastInterval||e,n=e.timeStamp-r.timeStamp,s,i,o,a;if(e.eventType!==ms&&(n>r$e||r.velocity===void 0)){var l=e.deltaX-r.deltaX,u=e.deltaY-r.deltaY,d=tce(n,l,u);i=d.x,o=d.y,s=ou(d.x)>ou(d.y)?d.x:d.y,a=ece(l,u),t.lastInterval=e}else s=r.velocity,i=r.velocityX,o=r.velocityY,a=r.direction;e.velocity=s,e.velocityX=i,e.velocityY=o,e.direction=a}function l$e(t,e){var r=t.session,n=e.pointers,s=n.length;r.firstInput||(r.firstInput=eY(e)),s>1&&!r.firstMultiple?r.firstMultiple=eY(e):s===1&&(r.firstMultiple=!1);var i=r.firstInput,o=r.firstMultiple,a=o?o.center:i.center,l=e.center=Zle(n);e.timeStamp=r$(),e.deltaTime=e.timeStamp-i.timeStamp,e.angle=VR(a,l),e.distance=q0(a,l),s$e(r,e),e.offsetDirection=ece(e.deltaX,e.deltaY);var u=tce(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=ou(u.x)>ou(u.y)?u.x:u.y,e.scale=o?i$e(o.pointers,n):1,e.rotation=o?o$e(o.pointers,n):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,a$e(r,e);var d=t.element,h=e.srcEvent,f;h.composedPath?f=h.composedPath()[0]:h.path?f=h.path[0]:f=h.target,s$(f,d)&&(d=f),e.target=d}function c$e(t,e,r){var n=r.pointers.length,s=r.changedPointers.length,i=e&Un&&n-s===0,o=e&(Tr|ms)&&n-s===0;r.isFirst=!!i,r.isFinal=!!o,i&&(t.session={}),r.eventType=e,l$e(t,r),t.emit("hammer.input",r),t.recognize(r),t.session.prevInput=r}function mm(t){return t.trim().split(/\s+/g)}function wp(t,e,r){Ho(mm(e),function(n){t.addEventListener(n,r,!1)})}function Sp(t,e,r){Ho(mm(e),function(n){t.removeEventListener(n,r,!1)})}function tY(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var df=function(){function t(r,n){var s=this;this.manager=r,this.callback=n,this.element=r.element,this.target=r.options.inputTarget,this.domHandler=function(i){gx(r.options.enable,[r])&&s.handler(i)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&wp(this.element,this.evEl,this.domHandler),this.evTarget&&wp(this.target,this.evTarget,this.domHandler),this.evWin&&wp(tY(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Sp(this.element,this.evEl,this.domHandler),this.evTarget&&Sp(this.target,this.evTarget,this.domHandler),this.evWin&&Sp(tY(this.element),this.evWin,this.domHandler)},t}();function au(t,e,r){if(t.indexOf&&!r)return t.indexOf(e);for(var n=0;n<t.length;){if(r&&t[n][r]==e||!r&&t[n]===e)return n;n++}return-1}var u$e={pointerdown:Un,pointermove:ju,pointerup:Tr,pointercancel:ms,pointerout:ms},d$e={2:xg,3:e$e,4:n$,5:t$e},rce="pointerdown",nce="pointermove pointerup pointercancel";Uo.MSPointerEvent&&!Uo.PointerEvent&&(rce="MSPointerDown",nce="MSPointerMove MSPointerUp MSPointerCancel");var sce=function(t){ci(e,t);function e(){var n,s=e.prototype;return s.evEl=rce,s.evWin=nce,n=t.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var r=e.prototype;return r.handler=function(s){var i=this.store,o=!1,a=s.type.toLowerCase().replace("ms",""),l=u$e[a],u=d$e[s.pointerType]||s.pointerType,d=u===xg,h=au(i,s.pointerId,"pointerId");l&Un&&(s.button===0||d)?h<0&&(i.push(s),h=i.length-1):l&(Tr|ms)&&(o=!0),!(h<0)&&(i[h]=s,this.callback(this.manager,l,{pointers:i,changedPointers:[s],pointerType:u,srcEvent:s}),o&&i.splice(h,1))},e}(df);function gm(t){return Array.prototype.slice.call(t,0)}function i$(t,e,r){for(var n=[],s=[],i=0;i<t.length;){var o=e?t[i][e]:t[i];au(s,o)<0&&n.push(t[i]),s[i]=o,i++}return r&&(e?n=n.sort(function(a,l){return a[e]>l[e]}):n=n.sort()),n}var h$e={touchstart:Un,touchmove:ju,touchend:Tr,touchcancel:ms},f$e="touchstart touchmove touchend touchcancel",o$=function(t){ci(e,t);function e(){var n;return e.prototype.evTarget=f$e,n=t.apply(this,arguments)||this,n.targetIds={},n}var r=e.prototype;return r.handler=function(s){var i=h$e[s.type],o=p$e.call(this,s,i);o&&this.callback(this.manager,i,{pointers:o[0],changedPointers:o[1],pointerType:xg,srcEvent:s})},e}(df);function p$e(t,e){var r=gm(t.touches),n=this.targetIds;if(e&(Un|ju)&&r.length===1)return n[r[0].identifier]=!0,[r,r];var s,i,o=gm(t.changedTouches),a=[],l=this.target;if(i=r.filter(function(u){return s$(u.target,l)}),e===Un)for(s=0;s<i.length;)n[i[s].identifier]=!0,s++;for(s=0;s<o.length;)n[o[s].identifier]&&a.push(o[s]),e&(Tr|ms)&&delete n[o[s].identifier],s++;if(a.length)return[i$(i.concat(a),"identifier",!0),a]}var m$e={mousedown:Un,mousemove:ju,mouseup:Tr},g$e="mousedown",y$e="mousemove mouseup",a$=function(t){ci(e,t);function e(){var n,s=e.prototype;return s.evEl=g$e,s.evWin=y$e,n=t.apply(this,arguments)||this,n.pressed=!1,n}var r=e.prototype;return r.handler=function(s){var i=m$e[s.type];i&Un&&s.button===0&&(this.pressed=!0),i&ju&&s.which!==1&&(i=Tr),this.pressed&&(i&Tr&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[s],changedPointers:[s],pointerType:n$,srcEvent:s}))},e}(df),v$e=2500,rY=25;function nY(t){var e=t.changedPointers,r=e[0];if(r.identifier===this.primaryTouch){var n={x:r.clientX,y:r.clientY},s=this.lastTouches;this.lastTouches.push(n);var i=function(){var a=s.indexOf(n);a>-1&&s.splice(a,1)};setTimeout(i,v$e)}}function b$e(t,e){t&Un?(this.primaryTouch=e.changedPointers[0].identifier,nY.call(this,e)):t&(Tr|ms)&&nY.call(this,e)}function x$e(t){for(var e=t.srcEvent.clientX,r=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var s=this.lastTouches[n],i=Math.abs(e-s.x),o=Math.abs(r-s.y);if(i<=rY&&o<=rY)return!0}return!1}var ice=function(){var t=function(e){ci(r,e);function r(s,i){var o;return o=e.call(this,s,i)||this,o.handler=function(a,l,u){var d=u.pointerType===xg,h=u.pointerType===n$;if(!(h&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(d)b$e.call(Sy(Sy(o)),l,u);else if(h&&x$e.call(Sy(Sy(o)),u))return;o.callback(a,l,u)}},o.touch=new o$(o.manager,o.handler),o.mouse=new a$(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=r.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},r}(df);return t}();function w$e(t){var e,r=t.options.inputClass;return r?e=r:JDe?e=sce:ZDe?e=o$:Yle?e=ice:e=a$,new e(t,c$e)}function xd(t,e,r){return Array.isArray(t)?(Ho(t,r[e],r),!0):!1}var Jy=1,ri=2,Eh=4,gl=8,Ko=gl,ym=16,Gi=32,S$e=1;function E$e(){return S$e++}function _y(t,e){var r=e.manager;return r?r.get(t):t}function sY(t){return t&ym?"cancel":t&gl?"end":t&Eh?"move":t&ri?"start":""}var _g=function(){function t(r){r===void 0&&(r={}),this.options=ki({enable:!0},r),this.id=E$e(),this.manager=null,this.state=Jy,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(n){return iu(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(xd(n,"recognizeWith",this))return this;var s=this.simultaneous;return n=_y(n,this),s[n.id]||(s[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return xd(n,"dropRecognizeWith",this)?this:(n=_y(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(xd(n,"requireFailure",this))return this;var s=this.requireFail;return n=_y(n,this),au(s,n)===-1&&(s.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(xd(n,"dropRequireFailure",this))return this;n=_y(n,this);var s=au(this.requireFail,n);return s>-1&&this.requireFail.splice(s,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var s=this,i=this.state;function o(a){s.manager.emit(a,n)}i<gl&&o(s.options.event+sY(i)),o(s.options.event),n.additionalEvent&&o(n.additionalEvent),i>=gl&&o(s.options.event+sY(i))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=Gi},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(Gi|Jy)))return!1;n++}return!0},e.recognize=function(n){var s=iu({},n);if(!gx(this.options.enable,[this,s])){this.reset(),this.state=Gi;return}this.state&(Ko|ym|Gi)&&(this.state=Jy),this.state=this.process(s),this.state&(ri|Eh|gl|ym)&&this.tryEmit(s)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},t}(),UR=function(t){ci(e,t);function e(n){var s;return n===void 0&&(n={}),s=t.call(this,ki({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,s.pTime=!1,s.pCenter=!1,s._timer=null,s._input=null,s.count=0,s}var r=e.prototype;return r.getTouchAction=function(){return[WR]},r.process=function(s){var i=this,o=this.options,a=s.pointers.length===o.pointers,l=s.distance<o.threshold,u=s.deltaTime<o.time;if(this.reset(),s.eventType&Un&&this.count===0)return this.failTimeout();if(l&&u&&a){if(s.eventType!==Tr)return this.failTimeout();var d=this.pTime?s.timeStamp-this.pTime<o.interval:!0,h=!this.pCenter||q0(this.pCenter,s.center)<o.posThreshold;this.pTime=s.timeStamp,this.pCenter=s.center,!h||!d?this.count=1:this.count+=1,this._input=s;var f=this.count%o.taps;if(f===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){i.state=Ko,i.tryEmit()},o.interval),ri):Ko}return Gi},r.failTimeout=function(){var s=this;return this._timer=setTimeout(function(){s.state=Gi},this.options.interval),Gi},r.reset=function(){clearTimeout(this._timer)},r.emit=function(){this.state===Ko&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(_g),_h=function(t){ci(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ki({pointers:1},n))||this}var r=e.prototype;return r.attrTest=function(s){var i=this.options.pointers;return i===0||s.pointers.length===i},r.process=function(s){var i=this.state,o=s.eventType,a=i&(ri|Eh),l=this.attrTest(s);return a&&(o&ms||!l)?i|ym:a||l?o&Tr?i|gl:i&ri?i|Eh:ri:Gi},e}(_g);function oce(t){return t===Sh?"down":t===Eg?"up":t===wg?"left":t===Sg?"right":""}var l$=function(t){ci(e,t);function e(n){var s;return n===void 0&&(n={}),s=t.call(this,ki({event:"pan",threshold:10,pointers:1,direction:Qle},n))||this,s.pX=null,s.pY=null,s}var r=e.prototype;return r.getTouchAction=function(){var s=this.options.direction,i=[];return s&eo&&i.push(pm),s&Dc&&i.push(fm),i},r.directionTest=function(s){var i=this.options,o=!0,a=s.distance,l=s.direction,u=s.deltaX,d=s.deltaY;return l&i.direction||(i.direction&eo?(l=u===0?$0:u<0?wg:Sg,o=u!==this.pX,a=Math.abs(s.deltaX)):(l=d===0?$0:d<0?Eg:Sh,o=d!==this.pY,a=Math.abs(s.deltaY))),s.direction=l,o&&a>i.threshold&&l&i.direction},r.attrTest=function(s){return _h.prototype.attrTest.call(this,s)&&(this.state&ri||!(this.state&ri)&&this.directionTest(s))},r.emit=function(s){this.pX=s.deltaX,this.pY=s.deltaY;var i=oce(s.direction);i&&(s.additionalEvent=this.options.event+i),t.prototype.emit.call(this,s)},e}(_h),ace=function(t){ci(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ki({event:"swipe",threshold:10,velocity:.3,direction:eo|Dc,pointers:1},n))||this}var r=e.prototype;return r.getTouchAction=function(){return l$.prototype.getTouchAction.call(this)},r.attrTest=function(s){var i=this.options.direction,o;return i&(eo|Dc)?o=s.overallVelocity:i&eo?o=s.overallVelocityX:i&Dc&&(o=s.overallVelocityY),t.prototype.attrTest.call(this,s)&&i&s.offsetDirection&&s.distance>this.options.threshold&&s.maxPointers===this.options.pointers&&ou(o)>this.options.velocity&&s.eventType&Tr},r.emit=function(s){var i=oce(s.offsetDirection);i&&this.manager.emit(this.options.event+i,s),this.manager.emit(this.options.event,s)},e}(_h),lce=function(t){ci(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ki({event:"pinch",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[Ac]},r.attrTest=function(s){return t.prototype.attrTest.call(this,s)&&(Math.abs(s.scale-1)>this.options.threshold||this.state&ri)},r.emit=function(s){if(s.scale!==1){var i=s.scale<1?"in":"out";s.additionalEvent=this.options.event+i}t.prototype.emit.call(this,s)},e}(_h),cce=function(t){ci(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ki({event:"rotate",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[Ac]},r.attrTest=function(s){return t.prototype.attrTest.call(this,s)&&(Math.abs(s.rotation)>this.options.threshold||this.state&ri)},e}(_h),uce=function(t){ci(e,t);function e(n){var s;return n===void 0&&(n={}),s=t.call(this,ki({event:"press",pointers:1,time:251,threshold:9},n))||this,s._timer=null,s._input=null,s}var r=e.prototype;return r.getTouchAction=function(){return[Gle]},r.process=function(s){var i=this,o=this.options,a=s.pointers.length===o.pointers,l=s.distance<o.threshold,u=s.deltaTime>o.time;if(this._input=s,!l||!a||s.eventType&(Tr|ms)&&!u)this.reset();else if(s.eventType&Un)this.reset(),this._timer=setTimeout(function(){i.state=Ko,i.tryEmit()},o.time);else if(s.eventType&Tr)return Ko;return Gi},r.reset=function(){clearTimeout(this._timer)},r.emit=function(s){this.state===Ko&&(s&&s.eventType&Tr?this.manager.emit(this.options.event+"up",s):(this._input.timeStamp=r$(),this.manager.emit(this.options.event,this._input)))},e}(_g),dce={domEvents:!1,touchAction:Kle,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},iY=[[cce,{enable:!1}],[lce,{enable:!1},["rotate"]],[ace,{direction:eo}],[l$,{direction:eo},["swipe"]],[UR],[UR,{event:"doubletap",taps:2},["tap"]],[uce]],_$e=1,oY=2;function aY(t,e){var r=t.element;if(r.style){var n;Ho(t.options.cssProps,function(s,i){n=mx(r.style,i),e?(t.oldCssProps[n]=r.style[n],r.style[n]=s):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function N$e(t,e){var r=document.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}var lY=function(){function t(r,n){var s=this;this.options=iu({},dce,n||{}),this.options.inputTarget=this.options.inputTarget||r,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=r,this.input=w$e(this),this.touchAction=new Jle(this,this.options.touchAction),aY(this,!0),Ho(this.options.recognizers,function(i){var o=s.add(new i[0](i[1]));i[2]&&o.recognizeWith(i[2]),i[3]&&o.requireFailure(i[3])},this)}var e=t.prototype;return e.set=function(n){return iu(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?oY:_$e},e.recognize=function(n){var s=this.session;if(!s.stopped){this.touchAction.preventDefaults(n);var i,o=this.recognizers,a=s.curRecognizer;(!a||a&&a.state&Ko)&&(s.curRecognizer=null,a=null);for(var l=0;l<o.length;)i=o[l],s.stopped!==oY&&(!a||i===a||i.canRecognizeWith(a))?i.recognize(n):i.reset(),!a&&i.state&(ri|Eh|gl)&&(s.curRecognizer=i,a=i),l++}},e.get=function(n){if(n instanceof _g)return n;for(var s=this.recognizers,i=0;i<s.length;i++)if(s[i].options.event===n)return s[i];return null},e.add=function(n){if(xd(n,"add",this))return this;var s=this.get(n.options.event);return s&&this.remove(s),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(xd(n,"remove",this))return this;var s=this.get(n);if(n){var i=this.recognizers,o=au(i,s);o!==-1&&(i.splice(o,1),this.touchAction.update())}return this},e.on=function(n,s){if(n===void 0||s===void 0)return this;var i=this.handlers;return Ho(mm(n),function(o){i[o]=i[o]||[],i[o].push(s)}),this},e.off=function(n,s){if(n===void 0)return this;var i=this.handlers;return Ho(mm(n),function(o){s?i[o]&&i[o].splice(au(i[o],s),1):delete i[o]}),this},e.emit=function(n,s){this.options.domEvents&&N$e(n,s);var i=this.handlers[n]&&this.handlers[n].slice();if(!(!i||!i.length)){s.type=n,s.preventDefault=function(){s.srcEvent.preventDefault()};for(var o=0;o<i.length;)i[o](s),o++}},e.destroy=function(){this.element&&aY(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),C$e={touchstart:Un,touchmove:ju,touchend:Tr,touchcancel:ms},k$e="touchstart",j$e="touchstart touchmove touchend touchcancel",T$e=function(t){ci(e,t);function e(){var n,s=e.prototype;return s.evTarget=k$e,s.evWin=j$e,n=t.apply(this,arguments)||this,n.started=!1,n}var r=e.prototype;return r.handler=function(s){var i=C$e[s.type];if(i===Un&&(this.started=!0),!!this.started){var o=O$e.call(this,s,i);i&(Tr|ms)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,i,{pointers:o[0],changedPointers:o[1],pointerType:xg,srcEvent:s})}},e}(df);function O$e(t,e){var r=gm(t.touches),n=gm(t.changedTouches);return e&(Tr|ms)&&(r=i$(r.concat(n),"identifier",!0)),[r,n]}function hce(t,e,r){var n="DEPRECATED METHOD: "+e+`
`+r+` AT 
`;return function(){var s=new Error("get-stack-trace"),i=s&&s.stack?s.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,i),t.apply(this,arguments)}}var fce=hce(function(t,e,r){for(var n=Object.keys(e),s=0;s<n.length;)(!r||r&&t[n[s]]===void 0)&&(t[n[s]]=e[n[s]]),s++;return t},"extend","Use `assign`."),P$e=hce(function(t,e){return fce(t,e,!0)},"merge","Use `assign`.");function I$e(t,e,r){var n=e.prototype,s;s=t.prototype=Object.create(n),s.constructor=t,s._super=n,r&&iu(s,r)}function cY(t,e){return function(){return t.apply(e,arguments)}}var pce=function(){var t=function(r,n){return n===void 0&&(n={}),new lY(r,ki({recognizers:iY.concat()},n))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=Qle,t.DIRECTION_DOWN=Sh,t.DIRECTION_LEFT=wg,t.DIRECTION_RIGHT=Sg,t.DIRECTION_UP=Eg,t.DIRECTION_HORIZONTAL=eo,t.DIRECTION_VERTICAL=Dc,t.DIRECTION_NONE=$0,t.DIRECTION_DOWN=Sh,t.INPUT_START=Un,t.INPUT_MOVE=ju,t.INPUT_END=Tr,t.INPUT_CANCEL=ms,t.STATE_POSSIBLE=Jy,t.STATE_BEGAN=ri,t.STATE_CHANGED=Eh,t.STATE_ENDED=gl,t.STATE_RECOGNIZED=Ko,t.STATE_CANCELLED=ym,t.STATE_FAILED=Gi,t.Manager=lY,t.Input=df,t.TouchAction=Jle,t.TouchInput=o$,t.MouseInput=a$,t.PointerEventInput=sce,t.TouchMouseInput=ice,t.SingleTouchInput=T$e,t.Recognizer=_g,t.AttrRecognizer=_h,t.Tap=UR,t.Pan=l$,t.Swipe=ace,t.Pinch=lce,t.Rotate=cce,t.Press=uce,t.on=wp,t.off=Sp,t.each=Ho,t.merge=P$e,t.extend=fce,t.bindFn=cY,t.assign=iu,t.inherit=I$e,t.bindFn=cY,t.prefixed=mx,t.toArray=gm,t.inArray=au,t.uniqueArray=i$,t.splitStr=mm,t.boolOrFn=gx,t.hasParent=s$,t.addEventListeners=wp,t.removeEventListeners=Sp,t.defaults=iu({},dce,{preset:iY}),t}();pce.defaults;MMe("DELETE");function yx(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return R$e(e.length?e:[D0()])}function R$e(t){let[e,r,n]=M$e(t),s=1;const i=()=>{const o=2091639*e+s*23283064365386963e-26;return e=r,r=n,n=o-(s=o|0)};return i.uint32=()=>i()*4294967296,i.fract53=()=>i()+(i()*2097152|0)*11102230246251565e-32,i.algorithm="Alea",i.seed=t,i.version="0.9",i}function M$e(){const t=A$e();let e=t(" "),r=t(" "),n=t(" ");for(let s=0;s<arguments.length;s++)e-=t(s<0||arguments.length<=s?void 0:arguments[s]),e<0&&(e+=1),r-=t(s<0||arguments.length<=s?void 0:arguments[s]),r<0&&(r+=1),n-=t(s<0||arguments.length<=s?void 0:arguments[s]),n<0&&(n+=1);return[e,r,n]}function A$e(){let t=4022871197;return function(e){const r=e.toString();for(let n=0;n<r.length;n++){t+=r.charCodeAt(n);let s=.02519603282416938*t;t=s>>>0,s-=t,s*=t,t=s>>>0,s-=t,t+=s*4294967296}return(t>>>0)*23283064365386963e-26}}function D$e(){const t=()=>{};return{on:t,off:t,destroy:t,emit:t,get(){return{set:t}}}}const c$=typeof window<"u"?window.Hammer||pce:function(){return D$e()};function Yi(t){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const r=c$(this._dom.overlay);r.on("tap",ae(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{r.destroy()});const n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Mt(n).call(n,s=>{r.on(s,i=>{i.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=s=>{$$e(s.target,t)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=s=>{("key"in s?s.key==="Escape":s.keyCode===27)&&this.deactivate()}}_le(Yi.prototype);Yi.current=null;Yi.prototype.destroy=function(){this.deactivate();for(const r of Rc(t=Wo(e=this._cleanupQueue).call(e,0)).call(t)){var t,e;r()}};Yi.prototype.activate=function(){Yi.current&&Yi.current.deactivate(),Yi.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};Yi.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};Yi.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};function $$e(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}const F$e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,q$e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,L$e=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,B$e=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function ja(t){if(t)for(;t.hasChildNodes()===!0;){const e=t.firstChild;e&&(ja(e),t.removeChild(e))}}function Rd(t){return t instanceof String||typeof t=="string"}function uY(t){return typeof t=="object"&&t!==null}function lu(t,e,r,n){let s=!1;n===!0&&(s=e[r]===null&&t[r]!==void 0),s?delete t[r]:t[r]=e[r]}function mce(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;for(const n in t)if(e[n]!==void 0)if(e[n]===null||typeof e[n]!="object")lu(t,e,n,r);else{const s=t[n],i=e[n];uY(s)&&uY(i)&&mce(s,i,r)}}function hf(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(hr(r))throw new TypeError("Arrays are not supported by deepExtend");for(let s=0;s<t.length;s++){const i=t[s];if(Object.prototype.hasOwnProperty.call(r,i))if(r[i]&&r[i].constructor===Object)e[i]===void 0&&(e[i]={}),e[i].constructor===Object?$t(e[i],r[i],!1,n):lu(e,r,i,n);else{if(hr(r[i]))throw new TypeError("Arrays are not supported by deepExtend");lu(e,r,i,n)}}return e}function L0(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(hr(r))throw new TypeError("Arrays are not supported by deepExtend");for(const s in r)if(Object.prototype.hasOwnProperty.call(r,s)&&!ml(t).call(t,s))if(r[s]&&r[s].constructor===Object)e[s]===void 0&&(e[s]={}),e[s].constructor===Object?$t(e[s],r[s]):lu(e,r,s,n);else if(hr(r[s])){e[s]=[];for(let i=0;i<r[s].length;i++)e[s].push(r[s][i])}else lu(e,r,s,n);return e}function $t(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)||r===!0)if(typeof e[i]=="object"&&e[i]!==null&&UK(e[i])===Object.prototype)t[i]===void 0?t[i]=$t({},e[i],r):typeof t[i]=="object"&&t[i]!==null&&UK(t[i])===Object.prototype?$t(t[i],e[i],r):lu(t,e,i,n);else if(hr(e[i])){var s;t[i]=Hi(s=e[i]).call(s)}else lu(t,e,i,n);return t}function B0(t,e){return[...t,e]}function z$e(t){return Hi(t).call(t)}function W$e(t){return t.getBoundingClientRect().left}function V$e(t){return t.getBoundingClientRect().top}function st(t,e){if(hr(t)){const r=t.length;for(let n=0;n<r;n++)e(t[n],n,t)}else for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(t[r],r,t)}function u$(t){let e;switch(t.length){case 3:case 4:return e=q$e.exec(t),e?{r:bi(e[1]+e[1],16),g:bi(e[2]+e[2],16),b:bi(e[3]+e[3],16)}:null;case 6:case 7:return e=F$e.exec(t),e?{r:bi(e[1],16),g:bi(e[2],16),b:bi(e[3],16)}:null;default:return null}}function Gs(t,e){if(ml(t).call(t,"rgba"))return t;if(ml(t).call(t,"rgb")){const r=t.substr(Nt(t).call(t,"(")+1).replace(")","").split(",");return"rgba("+r[0]+","+r[1]+","+r[2]+","+e+")"}else{const r=u$(t);return r==null?t:"rgba("+r.r+","+r.g+","+r.b+","+e+")"}}function gce(t,e,r){var n;return"#"+Hi(n=((1<<24)+(t<<16)+(e<<8)+r).toString(16)).call(n,1)}function HR(t,e){if(Rd(t)){let n=t;if(vce(n)){var r;const s=wh(r=n.substr(4).substr(0,n.length-5).split(",")).call(r,function(i){return bi(i)});n=gce(s[0],s[1],s[2])}if(yce(n)===!0){const s=U$e(n),i={h:s.h,s:s.s*.8,v:Math.min(1,s.v*1.02)},o={h:s.h,s:Math.min(1,s.s*1.25),v:s.v*.8},a=KR(o.h,o.s,o.v),l=KR(i.h,i.s,i.v);return{background:n,border:a,highlight:{background:l,border:a},hover:{background:l,border:a}}}else return{background:n,border:n,highlight:{background:n,border:n},hover:{background:n,border:n}}}else return{background:t.background||void 0,border:t.border||void 0,highlight:Rd(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||void 0,border:t.highlight&&t.highlight.border||void 0},hover:Rd(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||void 0,background:t.hover&&t.hover.background||void 0}}}function Qf(t,e,r){t=t/255,e=e/255,r=r/255;const n=Math.min(t,Math.min(e,r)),s=Math.max(t,Math.max(e,r));if(n===s)return{h:0,s:0,v:n};const i=t===n?e-r:r===n?t-e:r-t,a=60*((t===n?3:r===n?1:5)-i/(s-n))/360,l=(s-n)/s;return{h:a,s:l,v:s}}function Zy(t,e,r){let n,s,i;const o=Math.floor(t*6),a=t*6-o,l=r*(1-e),u=r*(1-a*e),d=r*(1-(1-a)*e);switch(o%6){case 0:n=r,s=d,i=l;break;case 1:n=u,s=r,i=l;break;case 2:n=l,s=r,i=d;break;case 3:n=l,s=u,i=r;break;case 4:n=d,s=l,i=r;break;case 5:n=r,s=l,i=u;break}return{r:Math.floor(n*255),g:Math.floor(s*255),b:Math.floor(i*255)}}function KR(t,e,r){const n=Zy(t,e,r);return gce(n.r,n.g,n.b)}function U$e(t){const e=u$(t);if(!e)throw new TypeError("'".concat(t,"' is not a valid color."));return Qf(e.r,e.g,e.b)}function yce(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)}function vce(t){return L$e.test(t)}function H$e(t){return B$e.test(t)}function yl(t){if(t===null||typeof t!="object")return null;if(t instanceof Element)return t;const e=Mc(t);for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&typeof t[r]=="object"&&(e[r]=yl(t[r]));return e}function Ws(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=function(p){return p!=null},i=function(p){return p!==null&&typeof p=="object"},o=function(p){for(const m in p)if(Object.prototype.hasOwnProperty.call(p,m))return!1;return!0};if(!i(t))throw new Error("Parameter mergeTarget must be an object");if(!i(e))throw new Error("Parameter options must be an object");if(!s(r))throw new Error("Parameter option must have a value");if(!i(n))throw new Error("Parameter globalOptions must be an object");const a=function(p,m,g){i(p[g])||(p[g]={});const y=m[g],v=p[g];for(const b in y)Object.prototype.hasOwnProperty.call(y,b)&&(v[b]=y[b])},l=e[r],d=i(n)&&!o(n)?n[r]:void 0,h=d?d.enabled:void 0;if(l===void 0)return;if(typeof l=="boolean"){i(t[r])||(t[r]={}),t[r].enabled=l;return}if(l===null&&!i(t[r]))if(s(d))t[r]=Mc(d);else return;if(!i(l))return;let f=!0;l.enabled!==void 0?f=l.enabled:h!==void 0&&(f=d.enabled),a(t,e,r),t[r].enabled=f}const K$e={linear(t){return t},easeInQuad(t){return t*t},easeOutQuad(t){return t*(2-t)},easeInOutQuad(t){return t<.5?2*t*t:-1+(4-2*t)*t},easeInCubic(t){return t*t*t},easeOutCubic(t){return--t*t*t+1},easeInOutCubic(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart(t){return t*t*t*t},easeOutQuart(t){return 1- --t*t*t*t},easeInOutQuart(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint(t){return t*t*t*t*t},easeOutQuint(t){return 1+--t*t*t*t*t},easeInOutQuint(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}};function Ta(t,e){let r;hr(e)||(e=[e]);for(const n of t)if(n){r=n[e[0]];for(let s=1;s<e.length;s++)r&&(r=r[e[s]]);if(typeof r<"u")break}return r}const G$e={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};let Y$e=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}setCloseCallback(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}_isColorString(e){if(typeof e=="string")return G$e[e]}setColor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e==="none")return;let n;const s=this._isColorString(e);if(s!==void 0&&(e=s),Rd(e)===!0){if(vce(e)===!0){const i=e.substr(4).substr(0,e.length-5).split(",");n={r:i[0],g:i[1],b:i[2],a:1}}else if(H$e(e)===!0){const i=e.substr(5).substr(0,e.length-6).split(",");n={r:i[0],g:i[1],b:i[2],a:i[3]}}else if(yce(e)===!0){const i=u$(e);n={r:i.r,g:i.g,b:i.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){const i=e.a!==void 0?e.a:"1.0";n={r:e.r,g:e.g,b:e.b,a:i}}if(n===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+vg(e));this._setColor(n,r)}show(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0&&(this.previousColor=jr({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",Vo(()=>{this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0)},0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)===!0&&(this.initialColor=jr({},e)),this.color=e;const n=Qf(e.r,e.g,e.b),s=2*Math.PI,i=this.r*n.s,o=this.centerCoordinates.x+i*Math.sin(s*n.h),a=this.centerCoordinates.y+i*Math.cos(s*n.h);this.colorPickerSelector.style.left=o-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=a-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}_setOpacity(e){this.color.a=e/100,this._updatePicker(this.color)}_setBrightness(e){const r=Qf(this.color.r,this.color.g,this.color.b);r.v=e/100;const n=Zy(r.h,r.s,r.v);n.a=this.color.a,this.color=n,this._updatePicker()}_updatePicker(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color;const r=Qf(e.r,e.g,e.b),n=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const s=this.colorPickerCanvas.clientWidth,i=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,s,i),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-r.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),bg(n).call(n),this.brightnessRange.value=100*r.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){var e,r,n,s;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){const o=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{const o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);const i=this;this.opacityRange.onchange=function(){i._setOpacity(this.value)},this.opacityRange.oninput=function(){i._setOpacity(this.value)},this.brightnessRange.onchange=function(){i._setBrightness(this.value)},this.brightnessRange.oninput=function(){i._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=ae(e=this._hide).call(e,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=ae(r=this._apply).call(r,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=ae(n=this._save).call(n,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=ae(s=this._loadLast).call(s,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new c$(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",e=>{e.isFirst&&this._moveSelector(e)}),this.hammer.on("tap",e=>{this._moveSelector(e)}),this.hammer.on("panstart",e=>{this._moveSelector(e)}),this.hammer.on("panmove",e=>{this._moveSelector(e)}),this.hammer.on("panend",e=>{this._moveSelector(e)})}_generateHueCircle(){if(this.generated===!1){const e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const r=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,r,n);let s,i,o,a;this.centerCoordinates={x:r*.5,y:n*.5},this.r=.49*r;const l=2*Math.PI/360,u=1/360,d=1/this.r;let h;for(o=0;o<360;o++)for(a=0;a<this.r;a++)s=this.centerCoordinates.x+a*Math.sin(l*o),i=this.centerCoordinates.y+a*Math.cos(l*o),h=Zy(o*u,a*d,1),e.fillStyle="rgb("+h.r+","+h.g+","+h.b+")",e.fillRect(s-.5,i-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,r,n)}this.generated=!0}_moveSelector(e){const r=this.colorPickerDiv.getBoundingClientRect(),n=e.center.x-r.left,s=e.center.y-r.top,i=.5*this.colorPickerDiv.clientHeight,o=.5*this.colorPickerDiv.clientWidth,a=n-o,l=s-i,u=Math.atan2(a,l),d=.98*Math.min(Math.sqrt(a*a+l*l),o),h=Math.cos(u)*d+i,f=Math.sin(u)*d+o;this.colorPickerSelector.style.top=h-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=f-.5*this.colorPickerSelector.clientWidth+"px";let p=u/(2*Math.PI);p=p<0?p+1:p;const m=d/this.r,g=Qf(this.color.r,this.color.g,this.color.b);g.h=p,g.s=m;const y=Zy(g.h,g.s,g.v);y.a=this.color.a,this.color=y,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}};function GR(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(e.length<1)throw new TypeError("Invalid arguments.");if(e.length===1)return document.createTextNode(e[0]);{const n=document.createElement(e[0]);return n.appendChild(GR(...Hi(e).call(e,1))),n}}let Q$e=class{constructor(e,r,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:()=>!1;this.parent=e,this.changedOptions=[],this.container=r,this.allowCreation=!1,this.hideOption=i,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},jr(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new Y$e(s),this.wrapper=void 0}setOptions(e){if(e!==void 0){this.popupHistory={},this._removePopup();let r=!0;if(typeof e=="string")this.options.filter=e;else if(hr(e))this.options.filter=e.join();else if(typeof e=="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),ss(e)!==void 0&&(this.options.filter=ss(e)),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(r=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,r=e):typeof e=="function"&&(this.options.filter=e,r=!0);ss(this.options)===!1&&(r=!1),this.options.enabled=r}this._clean()}setModuleOptions(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];const e=ss(this.options);let r=0,n=!1;for(const s in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,s)&&(this.allowCreation=!1,n=!1,typeof e=="function"?(n=e(s,[]),n=n||this._handleObject(this.configureOptions[s],[s],!0)):(e===!0||Nt(e).call(e,s)!==-1)&&(n=!0),n!==!1&&(this.allowCreation=!0,r>0&&this._makeItem([]),this._makeHeader(s),this._handleObject(this.configureOptions[s],[s])),r++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(let e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}_clean(){for(let e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(e){let r=this.moduleOptions;for(let n=0;n<e.length;n++)if(r[e[n]]!==void 0)r=r[e[n]];else{r=void 0;break}return r}_makeItem(e){if(this.allowCreation===!0){const i=document.createElement("div");i.className="vis-configuration vis-config-item vis-config-s"+e.length;for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return Mt(n).call(n,o=>{i.appendChild(o)}),this.domElements.push(i),this.domElements.length}return 0}_makeHeader(e){const r=document.createElement("div");r.className="vis-configuration vis-config-header",r.innerText=e,this._makeItem([],r)}_makeLabel(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const s=document.createElement("div");if(s.className="vis-configuration vis-config-label vis-config-s"+r.length,n===!0){for(;s.firstChild;)s.removeChild(s.firstChild);s.appendChild(GR("i","b",e))}else s.innerText=e+":";return s}_makeDropdown(e,r,n){const s=document.createElement("select");s.className="vis-configuration vis-config-select";let i=0;r!==void 0&&Nt(e).call(e,r)!==-1&&(i=Nt(e).call(e,r));for(let l=0;l<e.length;l++){const u=document.createElement("option");u.value=e[l],l===i&&(u.selected="selected"),u.innerText=e[l],s.appendChild(u)}const o=this;s.onchange=function(){o._update(this.value,n)};const a=this._makeLabel(n[n.length-1],n);this._makeItem(n,a,s)}_makeRange(e,r,n){const s=e[0],i=e[1],o=e[2],a=e[3],l=document.createElement("input");l.className="vis-configuration vis-config-range";try{l.type="range",l.min=i,l.max=o}catch{}l.step=a;let u="",d=0;r!==void 0?(r<0&&r*1.2<i?(l.min=Math.ceil(r*1.2),d=l.min,u="range increased"):r/1.2<i&&(l.min=Math.ceil(r/1.2),d=l.min,u="range increased"),r*1.2>o&&o!==1&&(l.max=Math.ceil(r*1.2),d=l.max,u="range increased"),l.value=r):l.value=s;const h=document.createElement("input");h.className="vis-configuration vis-config-rangeinput",h.value=l.value;const f=this;l.onchange=function(){h.value=this.value,f._update(Number(this.value),n)},l.oninput=function(){h.value=this.value};const p=this._makeLabel(n[n.length-1],n),m=this._makeItem(n,p,l,h);u!==""&&this.popupHistory[m]!==d&&(this.popupHistory[m]=d,this._setupPopup(u,m))}_makeButton(){if(this.options.showButton===!0){const e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerText="generate options",e.onclick=()=>{this._printOptions()},e.onmouseover=()=>{e.className="vis-configuration vis-config-button hover"},e.onmouseout=()=>{e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}_setupPopup(e,r){if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){const n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerText=e,n.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:r}}}_removePopup(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(this.popupDiv.html!==void 0){const r=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=r.left+"px",this.popupDiv.html.style.top=r.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=Vo(()=>{this.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=Vo(()=>{this._removePopup()},1800)}}_makeCheckbox(e,r,n){const s=document.createElement("input");s.type="checkbox",s.className="vis-configuration vis-config-checkbox",s.checked=e,r!==void 0&&(s.checked=r,r!==e&&(typeof e=="object"?r!==e.enabled&&this.changedOptions.push({path:n,value:r}):this.changedOptions.push({path:n,value:r})));const i=this;s.onchange=function(){i._update(this.checked,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,s)}_makeTextInput(e,r,n){const s=document.createElement("input");s.type="text",s.className="vis-configuration vis-config-text",s.value=r,r!==e&&this.changedOptions.push({path:n,value:r});const i=this;s.onchange=function(){i._update(this.value,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,s)}_makeColorField(e,r,n){const s=e[1],i=document.createElement("div");r=r===void 0?s:r,r!=="none"?(i.className="vis-configuration vis-config-colorBlock",i.style.backgroundColor=r):i.className="vis-configuration vis-config-colorBlock none",r=r===void 0?s:r,i.onclick=()=>{this._showColorPicker(r,i,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}_showColorPicker(e,r,n){r.onclick=function(){},this.colorPicker.insertTo(r),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(s=>{const i="rgba("+s.r+","+s.g+","+s.b+","+s.a+")";r.style.backgroundColor=i,this._update(i,n)}),this.colorPicker.setCloseCallback(()=>{r.onclick=()=>{this._showColorPicker(e,r,n)}})}_handleObject(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=!1;const i=ss(this.options);let o=!1;for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)){s=!0;const l=e[a],u=B0(r,a);if(typeof i=="function"&&(s=i(a,r),s===!1&&!hr(l)&&typeof l!="string"&&typeof l!="boolean"&&l instanceof Object&&(this.allowCreation=!1,s=this._handleObject(l,u,!0),this.allowCreation=n===!1)),s!==!1){o=!0;const d=this._getValue(u);if(hr(l))this._handleArray(l,d,u);else if(typeof l=="string")this._makeTextInput(l,d,u);else if(typeof l=="boolean")this._makeCheckbox(l,d,u);else if(l instanceof Object){if(!this.hideOption(r,a,this.moduleOptions))if(l.enabled!==void 0){const h=B0(u,"enabled"),f=this._getValue(h);if(f===!0){const p=this._makeLabel(a,u,!0);this._makeItem(u,p),o=this._handleObject(l,u)||o}else this._makeCheckbox(l,f,u)}else{const h=this._makeLabel(a,u,!0);this._makeItem(u,h),o=this._handleObject(l,u)||o}}else console.error("dont know how to handle",l,a,u)}}return o}_handleArray(e,r,n){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,r,n),e[1]!==r&&this.changedOptions.push({path:n,value:r})):typeof e[0]=="string"?(this._makeDropdown(e,r,n),e[0]!==r&&this.changedOptions.push({path:n,value:r})):typeof e[0]=="number"&&(this._makeRange(e,r,n),e[0]!==r&&this.changedOptions.push({path:n,value:Number(r)}))}_update(e,r){const n=this._constructOptions(e,r);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",n),this.initialized=!0,this.parent.setOptions(n)}_constructOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=n;e=e==="true"?!0:e,e=e==="false"?!1:e;for(let i=0;i<r.length;i++)r[i]!=="global"&&(s[r[i]]===void 0&&(s[r[i]]={}),i!==r.length-1?s=s[r[i]]:s[r[i]]=e);return n}_printOptions(){const e=this.getOptions();for(;this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(GR("pre","const options = "+vg(e,null,2)))}getOptions(){const e={};for(let r=0;r<this.changedOptions.length;r++)this._constructOptions(this.changedOptions[r].value,this.changedOptions[r].path,e);return e}},X$e=class{constructor(e,r){this.container=e,this.overflowMethod=r||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(e,r){this.x=bi(e),this.y=bi(r)}setText(e){if(e instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(e)}else this.frame.innerText=e}show(e){if(e===void 0&&(e=!0),e===!0){const r=this.frame.clientHeight,n=this.frame.clientWidth,s=this.frame.parentNode.clientHeight,i=this.frame.parentNode.clientWidth;let o=0,a=0;if(this.overflowMethod=="flip"){let l=!1,u=!0;this.y-r<this.padding&&(u=!1),this.x+n>i-this.padding&&(l=!0),l?o=this.x-n:o=this.x,u?a=this.y-r:a=this.y}else a=this.y-r,a+r+this.padding>s&&(a=s-r-this.padding),a<this.padding&&(a=this.padding),o=this.x,o+n+this.padding>i&&(o=i-n-this.padding),o<this.padding&&(o=this.padding);this.frame.style.left=o+"px",this.frame.style.top=a+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}},Ff=!1,dY;const YR="background: #FFeeee; color: #dd0000";let J$e=class sr{static validate(e,r,n){Ff=!1,dY=r;let s=r;return n!==void 0&&(s=r[n]),sr.parse(e,s,[]),Ff}static parse(e,r,n){for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&sr.check(s,e,r,n)}static check(e,r,n,s){if(n[e]===void 0&&n.__any__===void 0){sr.getSuggestion(e,n,s);return}let i=e,o=!0;n[e]===void 0&&n.__any__!==void 0&&(i="__any__",o=sr.getType(r[e])==="object");let a=n[i];o&&a.__type__!==void 0&&(a=a.__type__),sr.checkFields(e,r,n,i,a,s)}static checkFields(e,r,n,s,i,o){const a=function(d){console.error("%c"+d+sr.printLocation(o,e),YR)},l=sr.getType(r[e]),u=i[l];u!==void 0?sr.getType(u)==="array"&&Nt(u).call(u,r[e])===-1?(a('Invalid option detected in "'+e+'". Allowed values are:'+sr.print(u)+' not "'+r[e]+'". '),Ff=!0):l==="object"&&s!=="__any__"&&(o=B0(o,e),sr.parse(r[e],n[s],o)):i.any===void 0&&(a('Invalid type received for "'+e+'". Expected: '+sr.print(lr(i))+". Received ["+l+'] "'+r[e]+'"'),Ff=!0)}static getType(e){const r=typeof e;return r==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":hr(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":r==="number"?"number":r==="boolean"?"boolean":r==="string"?"string":r===void 0?"undefined":r}static getSuggestion(e,r,n){const s=sr.findInOptions(e,r,n,!1),i=sr.findInOptions(e,dY,[],!0),o=8,a=4;let l;s.indexMatch!==void 0?l=" in "+sr.printLocation(s.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+s.indexMatch+`"?

`:i.distance<=a&&s.distance>i.distance?l=" in "+sr.printLocation(s.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+sr.printLocation(i.path,i.closestMatch,""):s.distance<=o?l='. Did you mean "'+s.closestMatch+'"?'+sr.printLocation(s.path,e):l=". Did you mean one of these: "+sr.print(lr(r))+sr.printLocation(n,e),console.error('%cUnknown option detected: "'+e+'"'+l,YR),Ff=!0}static findInOptions(e,r,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,i=1e9,o="",a=[];const l=e.toLowerCase();let u;for(const h in r){let f;if(r[h].__type__!==void 0&&s===!0){const p=sr.findInOptions(e,r[h],B0(n,h));i>p.distance&&(o=p.closestMatch,a=p.path,i=p.distance,u=p.indexMatch)}else{var d;Nt(d=h.toLowerCase()).call(d,l)!==-1&&(u=h),f=sr.levenshteinDistance(e,h),i>f&&(o=h,a=z$e(n),i=f)}}return{closestMatch:o,path:a,distance:i,indexMatch:u}}static printLocation(e,r){let s=`

`+(arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`)+`options = {
`;for(let i=0;i<e.length;i++){for(let o=0;o<i+1;o++)s+="  ";s+=e[i]+`: {
`}for(let i=0;i<e.length+1;i++)s+="  ";s+=r+`
`;for(let i=0;i<e.length+1;i++){for(let o=0;o<e.length-i;o++)s+="  ";s+=`}
`}return s+`

`}static print(e){return vg(e).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}static levenshteinDistance(e,r){if(e.length===0)return r.length;if(r.length===0)return e.length;const n=[];let s;for(s=0;s<=r.length;s++)n[s]=[s];let i;for(i=0;i<=e.length;i++)n[0][i]=i;for(s=1;s<=r.length;s++)for(i=1;i<=e.length;i++)r.charAt(s-1)==e.charAt(i-1)?n[s][i]=n[s-1][i-1]:n[s][i]=Math.min(n[s-1][i-1]+1,Math.min(n[s][i-1]+1,n[s-1][i]+1));return n[r.length][e.length]}};const Z$e=Yi,e4e=Q$e,Md=c$,t4e=X$e,bce=YR,r4e=J$e;function n4e(t){return Xa=t,a4e()}var xce={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},d$=Mc(xce);d$.color="color.color";d$.style="dashes";var Mn={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},hY={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},Xa="",Nh=0,et="",qe="",ts=Mn.NULL;function s4e(){Nh=0,et=Xa.charAt(0)}function Wr(){Nh++,et=Xa.charAt(Nh)}function Gu(){return Xa.charAt(Nh+1)}function fY(t){var e=t.charCodeAt(0);return e<47?e===35||e===46:e<59?e>47:e<91?e>64:e<96?e===95:e<123?e>96:!1}function Cl(t,e){if(t||(t={}),e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function i4e(t,e,r){for(var n=e.split("."),s=t;n.length;){var i=n.shift();n.length?(s[i]||(s[i]={}),s=s[i]):s[i]=r}}function wce(t,e){for(var r,n,s=null,i=[t],o=t;o.parent;)i.push(o.parent),o=o.parent;if(o.nodes){for(r=0,n=o.nodes.length;r<n;r++)if(e.id===o.nodes[r].id){s=o.nodes[r];break}}for(s||(s={id:e.id},t.node&&(s.attr=Cl(s.attr,t.node))),r=i.length-1;r>=0;r--){var a,l=i[r];l.nodes||(l.nodes=[]),Nt(a=l.nodes).call(a,s)===-1&&l.nodes.push(s)}e.attr&&(s.attr=Cl(s.attr,e.attr))}function o4e(t,e){if(t.edges||(t.edges=[]),t.edges.push(e),t.edge){var r=Cl({},t.edge);e.attr=Cl(r,e.attr)}}function Sce(t,e,r,n,s){var i={from:e,to:r,type:n};return t.edge&&(i.attr=Cl({},t.edge)),i.attr=Cl(i.attr||{},s),s!=null&&s.hasOwnProperty("arrows")&&s.arrows!=null&&(i.arrows={to:{enabled:!0,type:s.arrows.type}},s.arrows=null),i}function qt(){for(ts=Mn.NULL,qe="";et===" "||et==="	"||et===`
`||et==="\r";)Wr();do{var t=!1;if(et==="#"){for(var e=Nh-1;Xa.charAt(e)===" "||Xa.charAt(e)==="	";)e--;if(Xa.charAt(e)===`
`||Xa.charAt(e)===""){for(;et!=""&&et!=`
`;)Wr();t=!0}}if(et==="/"&&Gu()==="/"){for(;et!=""&&et!=`
`;)Wr();t=!0}if(et==="/"&&Gu()==="*"){for(;et!="";)if(et==="*"&&Gu()==="/"){Wr(),Wr();break}else Wr();t=!0}for(;et===" "||et==="	"||et===`
`||et==="\r";)Wr()}while(t);if(et===""){ts=Mn.DELIMITER;return}var r=et+Gu();if(hY[r]){ts=Mn.DELIMITER,qe=r,Wr(),Wr();return}if(hY[et]){ts=Mn.DELIMITER,qe=et,Wr();return}if(fY(et)||et==="-"){for(qe+=et,Wr();fY(et);)qe+=et,Wr();qe==="false"?qe=!1:qe==="true"?qe=!0:isNaN(Number(qe))||(qe=Number(qe)),ts=Mn.IDENTIFIER;return}if(et==='"'){for(Wr();et!=""&&(et!='"'||et==='"'&&Gu()==='"');)et==='"'?(qe+=et,Wr()):et==="\\"&&Gu()==="n"?(qe+=`
`,Wr()):qe+=et,Wr();if(et!='"')throw An('End of string " expected');Wr(),ts=Mn.IDENTIFIER;return}for(ts=Mn.UNKNOWN;et!="";)qe+=et,Wr();throw new SyntaxError('Syntax error in part "'+Cce(qe,30)+'"')}function a4e(){var t={};if(s4e(),qt(),qe==="strict"&&(t.strict=!0,qt()),(qe==="graph"||qe==="digraph")&&(t.type=qe,qt()),ts===Mn.IDENTIFIER&&(t.id=qe,qt()),qe!="{")throw An("Angle bracket { expected");if(qt(),Ece(t),qe!="}")throw An("Angle bracket } expected");if(qt(),qe!=="")throw An("End of file expected");return qt(),delete t.node,delete t.edge,delete t.graph,t}function Ece(t){for(;qe!==""&&qe!="}";)l4e(t),qe===";"&&qt()}function l4e(t){var e=_ce(t);if(e){Nce(t,e);return}var r=c4e(t);if(!r){if(ts!=Mn.IDENTIFIER)throw An("Identifier expected");var n=qe;if(qt(),qe==="="){if(qt(),ts!=Mn.IDENTIFIER)throw An("Identifier expected");t[n]=qe,qt()}else u4e(t,n)}}function _ce(t){var e=null;if(qe==="subgraph"&&(e={},e.type="subgraph",qt(),ts===Mn.IDENTIFIER&&(e.id=qe,qt())),qe==="{"){if(qt(),e||(e={}),e.parent=t,e.node=t.node,e.edge=t.edge,e.graph=t.graph,Ece(e),qe!="}")throw An("Angle bracket } expected");qt(),delete e.node,delete e.edge,delete e.graph,delete e.parent,t.subgraphs||(t.subgraphs=[]),t.subgraphs.push(e)}return e}function c4e(t){return qe==="node"?(qt(),t.node=Ep(),"node"):qe==="edge"?(qt(),t.edge=Ep(),"edge"):qe==="graph"?(qt(),t.graph=Ep(),"graph"):null}function u4e(t,e){var r={id:e},n=Ep();n&&(r.attr=n),wce(t,r),Nce(t,e)}function Nce(t,e){for(;qe==="->"||qe==="--";){var r,n=qe;qt();var s=_ce(t);if(s)r=s;else{if(ts!=Mn.IDENTIFIER)throw An("Identifier or subgraph expected");r=qe,wce(t,{id:r}),qt()}var i=Ep(),o=Sce(t,e,r,n,i);o4e(t,o),e=r}}function Ep(){for(var t,e=null,r={dashed:!0,solid:!1,dotted:[1,5]},n={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},s=new Array,i=new Array;qe==="[";){for(qt(),e={};qe!==""&&qe!="]";){if(ts!=Mn.IDENTIFIER)throw An("Attribute name expected");var o=qe;if(qt(),qe!="=")throw An("Equal sign = expected");if(qt(),ts!=Mn.IDENTIFIER)throw An("Attribute value expected");var a=qe;o==="style"&&(a=r[a]);var l;o==="arrowhead"&&(l=n[a],o="arrows",a={to:{enabled:!0,type:l}}),o==="arrowtail"&&(l=n[a],o="arrows",a={from:{enabled:!0,type:l}}),s.push({attr:e,name:o,value:a}),i.push(o),qt(),qe==","&&qt()}if(qe!="]")throw An("Bracket ] expected");qt()}if(ml(i).call(i,"dir")){var u={};for(u.arrows={},t=0;t<s.length;t++)if(s[t].name==="arrows")if(s[t].value.to!=null)u.arrows.to=t;else if(s[t].value.from!=null)u.arrows.from=t;else throw An("Invalid value of arrows");else s[t].name==="dir"&&(u.dir=t);var d=s[u.dir].value;if(!ml(i).call(i,"arrows"))if(d==="both")s.push({attr:s[u.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),u.arrows.to=s.length-1,s.push({attr:s[u.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),u.arrows.from=s.length-1;else if(d==="forward")s.push({attr:s[u.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),u.arrows.to=s.length-1;else if(d==="back")s.push({attr:s[u.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),u.arrows.from=s.length-1;else if(d==="none")s.push({attr:s[u.dir].attr,name:"arrows",value:""}),u.arrows.to=s.length-1;else throw An('Invalid dir type "'+d+'"');var h,f;if(d==="both")u.arrows.to&&u.arrows.from?(f=s[u.arrows.to].value.to.type,h=s[u.arrows.from].value.from.type,s[u.arrows.to]={attr:s[u.arrows.to].attr,name:s[u.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}},Wo(s).call(s,u.arrows.from,1)):u.arrows.to?(f=s[u.arrows.to].value.to.type,h="arrow",s[u.arrows.to]={attr:s[u.arrows.to].attr,name:s[u.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):u.arrows.from&&(f="arrow",h=s[u.arrows.from].value.from.type,s[u.arrows.from]={attr:s[u.arrows.from].attr,name:s[u.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}});else if(d==="back")u.arrows.to&&u.arrows.from?(f="",h=s[u.arrows.from].value.from.type,s[u.arrows.from]={attr:s[u.arrows.from].attr,name:s[u.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):u.arrows.to?(f="",h="arrow",u.arrows.from=u.arrows.to,s[u.arrows.from]={attr:s[u.arrows.from].attr,name:s[u.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):u.arrows.from&&(f="",h=s[u.arrows.from].value.from.type,s[u.arrows.to]={attr:s[u.arrows.from].attr,name:s[u.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}),s[u.arrows.from]={attr:s[u.arrows.from].attr,name:s[u.arrows.from].name,value:{from:{enabled:!0,type:s[u.arrows.from].value.from.type}}};else if(d==="none"){var p;u.arrows.to?p=u.arrows.to:p=u.arrows.from,s[p]={attr:s[p].attr,name:s[p].name,value:""}}else if(d==="forward")u.arrows.to&&u.arrows.from?(f=s[u.arrows.to].value.to.type,h="",s[u.arrows.to]={attr:s[u.arrows.to].attr,name:s[u.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):u.arrows.to?(f=s[u.arrows.to].value.to.type,h="",s[u.arrows.to]={attr:s[u.arrows.to].attr,name:s[u.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):u.arrows.from&&(f="arrow",h="",u.arrows.to=u.arrows.from,s[u.arrows.to]={attr:s[u.arrows.to].attr,name:s[u.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}),s[u.arrows.to]={attr:s[u.arrows.to].attr,name:s[u.arrows.to].name,value:{to:{enabled:!0,type:s[u.arrows.to].value.to.type}}};else throw An('Invalid dir type "'+d+'"');Wo(s).call(s,u.dir,1)}var m;if(ml(i).call(i,"penwidth")){var g=[];for(m=s.length,t=0;t<m;t++)s[t].name!=="width"&&(s[t].name==="penwidth"&&(s[t].name="width"),g.push(s[t]));s=g}for(m=s.length,t=0;t<m;t++)i4e(s[t].attr,s[t].name,s[t].value);return e}function An(t){return new SyntaxError(t+', got "'+Cce(qe,30)+'" (char '+Nh+")")}function Cce(t,e){return t.length<=e?t:t.substr(0,27)+"..."}function d4e(t,e,r){hr(t)?Mt(t).call(t,function(n){hr(e)?Mt(e).call(e,function(s){r(n,s)}):r(n,e)}):hr(e)?Mt(e).call(e,function(n){r(t,n)}):r(t,e)}function rT(t,e,r){for(var n=e.split("."),s=n.pop(),i=t,o=0;o<n.length;o++){var a=n[o];a in i||(i[a]={}),i=i[a]}return i[s]=r,t}function pY(t,e){var r={};for(var n in t)if(t.hasOwnProperty(n)){var s=e[n];hr(s)?Mt(s).call(s,function(i){rT(r,i,t[n])}):typeof s=="string"?rT(r,s,t[n]):rT(r,n,t[n])}return r}function h4e(t){var e=n4e(t),r={nodes:[],edges:[],options:{}};if(e.nodes){var n;Mt(n=e.nodes).call(n,function(o){var a={id:o.id,label:String(o.label||o.id)};Cl(a,pY(o.attr,xce)),a.image&&(a.shape="image"),r.nodes.push(a)})}if(e.edges){var s,i=function(o){var a={from:o.from,to:o.to};return Cl(a,pY(o.attr,d$)),a.arrows==null&&o.type==="->"&&(a.arrows="to"),a};Mt(s=e.edges).call(s,function(o){var a,l;if(o.from instanceof Object?a=o.from.nodes:a={id:o.from},o.to instanceof Object?l=o.to.nodes:l={id:o.to},o.from instanceof Object&&o.from.edges){var u;Mt(u=o.from.edges).call(u,function(h){var f=i(h);r.edges.push(f)})}if(d4e(a,l,function(h,f){var p=Sce(r,h.id,f.id,o.type,o.attr),m=i(p);r.edges.push(m)}),o.to instanceof Object&&o.to.edges){var d;Mt(d=o.to.edges).call(d,function(h){var f=i(h);r.edges.push(f)})}})}return e.attr&&(r.options=e.attr),r}function f4e(t,e){var r;const n={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};e!=null&&(e.fixed!=null&&(n.nodes.fixed=e.fixed),e.parseColor!=null&&(n.nodes.parseColor=e.parseColor),e.inheritColor!=null&&(n.edges.inheritColor=e.inheritColor));const s=t.edges,i=wh(s).call(s,a=>{const l={from:a.source,id:a.id,to:a.target};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.type==="Directed"&&(l.arrows="to"),a.color&&n.edges.inheritColor===!1&&(l.color=a.color),l});return{nodes:wh(r=t.nodes).call(r,a=>{const l={id:a.id,fixed:n.nodes.fixed&&a.x!=null&&a.y!=null};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.size!=null&&(l.size=a.size),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.title!=null&&(l.title=a.title),a.x!=null&&(l.x=a.x),a.y!=null&&(l.y=a.y),a.color!=null&&(n.nodes.parseColor===!0?l.color=a.color:l.color={background:a.color,border:a.color,highlight:{background:a.color,border:a.color},hover:{background:a.color,border:a.color}}),l}),edges:i}}const p4e={addDescription:"Click in an empty space to place a new node.",addEdge:"Add Edge",addNode:"Add Node",back:"Back",close:"Close",createEdgeError:"Cannot link edges to a cluster.",del:"Delete selected",deleteClusterError:"Clusters cannot be deleted.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",edit:"Edit",editClusterError:"Clusters cannot be edited.",editEdge:"Edit Edge",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",editNode:"Edit Node"},m4e={addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",addEdge:"Kante hinzufgen",addNode:"Knoten hinzufgen",back:"Zurck",close:"Schlieen",createEdgeError:"Es ist nicht mglich, Kanten mit Clustern zu verbinden.",del:"Lsche Auswahl",deleteClusterError:"Cluster knnen nicht gelscht werden.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",edit:"Editieren",editClusterError:"Cluster knnen nicht editiert werden.",editEdge:"Kante editieren",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",editNode:"Knoten editieren"},g4e={addDescription:"Haga clic en un lugar vaco para colocar un nuevo nodo.",addEdge:"Aadir arista",addNode:"Aadir nodo",back:"Atrs",close:"Cerrar",createEdgeError:"No se puede conectar una arista a un grupo.",del:"Eliminar seleccin",deleteClusterError:"No es posible eliminar grupos.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",edit:"Editar",editClusterError:"No es posible editar grupos.",editEdge:"Editar arista",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",editNode:"Editar nodo"},y4e={addDescription:"Clicca per aggiungere un nuovo nodo",addEdge:"Aggiungi un vertice",addNode:"Aggiungi un nodo",back:"Indietro",close:"Chiudere",createEdgeError:"Non si possono collegare vertici ad un cluster",del:"Cancella la selezione",deleteClusterError:"I cluster non possono essere cancellati",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",edit:"Modifica",editClusterError:"I clusters non possono essere modificati.",editEdge:"Modifica il vertice",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",editNode:"Modifica il nodo"},v4e={addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",addEdge:"Link toevoegen",addNode:"Node toevoegen",back:"Terug",close:"Sluiten",createEdgeError:"Kan geen link maken naar een cluster.",del:"Selectie verwijderen",deleteClusterError:"Clusters kunnen niet worden verwijderd.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",edit:"Wijzigen",editClusterError:"Clusters kunnen niet worden aangepast.",editEdge:"Link wijzigen",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",editNode:"Node wijzigen"},b4e={addDescription:"Clique em um espao em branco para adicionar um novo n",addEdge:"Adicionar aresta",addNode:"Adicionar n",back:"Voltar",close:"Fechar",createEdgeError:"No foi possvel linkar arestas a um cluster.",del:"Remover selecionado",deleteClusterError:"Clusters no puderam ser removidos.",edgeDescription:"Clique em um n e arraste a aresta at outro n para conect-los",edit:"Editar",editClusterError:"Clusters no puderam ser editados.",editEdge:"Editar aresta",editEdgeDescription:"Clique nos pontos de controle e os arraste para um n para conect-los",editNode:"Editar n"},x4e={addDescription:"   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"    .",del:" ",deleteClusterError:"    ",edgeDescription:"        ,   .",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},w4e={addDescription:"",addEdge:"",addNode:"",back:"",close:"",createEdgeError:"",del:"",deleteClusterError:"",edgeDescription:"",edit:"",editClusterError:"",editEdge:"",editEdgeDescription:"",editNode:""},S4e={addDescription:"K   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"  '   .",del:" ",deleteClusterError:"    .",edgeDescription:"        ,   '.",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},E4e={addDescription:"Cliquez dans un endroit vide pour placer un nud.",addEdge:"Ajouter un lien",addNode:"Ajouter un nud",back:"Retour",close:"Fermer",createEdgeError:"Impossible de crer un lien vers un cluster.",del:"Effacer la slection",deleteClusterError:"Les clusters ne peuvent pas tre effacs.",edgeDescription:"Cliquez sur un nud et glissez le lien vers un autre nud pour les connecter.",edit:"diter",editClusterError:"Les clusters ne peuvent pas tre dits.",editEdge:"diter le lien",editEdgeDescription:"Cliquez sur les points de contrle et glissez-les pour connecter un nud.",editNode:"diter le nud"},_4e={addDescription:"Kluknutm do przdnho prostoru mete pidat nov vrchol.",addEdge:"Pidat hranu",addNode:"Pidat vrchol",back:"Zpt",close:"Zavt",createEdgeError:"Nelze pipojit hranu ke shluku.",del:"Smazat vbr",deleteClusterError:"Nelze mazat shluky.",edgeDescription:"Petaenm z jednoho vrcholu do druhho mete spojit tyto vrcholy novou hranou.",edit:"Upravit",editClusterError:"Nelze upravovat shluky.",editEdge:"Upravit hranu",editEdgeDescription:"Petaenm kontrolnho vrcholu hrany ji mete pipojit k jinmu vrcholu.",editNode:"Upravit vrchol"};var N4e=Object.freeze({__proto__:null,cn:w4e,cs:_4e,de:m4e,en:p4e,es:g4e,fr:E4e,it:y4e,nl:v4e,pt:b4e,ru:x4e,uk:S4e});function C4e(t,e){try{const[n,s]=e.split(/[-_ /]/,2),i=n!=null?n.toLowerCase():null,o=s!=null?s.toUpperCase():null;if(i&&o){const a=i+"-"+o;if(Object.prototype.hasOwnProperty.call(t,a))return a;var r;console.warn(QAe(r="Unknown variant ".concat(o," of language ")).call(r,i,"."))}if(i){const a=i;if(Object.prototype.hasOwnProperty.call(t,a))return a;console.warn("Unknown language ".concat(i))}return console.warn("Unknown locale ".concat(e,", falling back to English.")),"en"}catch(n){return console.error(n),console.warn("Unexpected error while normalizing locale ".concat(e,", falling back to English.")),"en"}}class k4e{constructor(){this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}init(){if(this.initialized())return;this.src=this.image.src;const e=this.image.width,r=this.image.height;this.width=e,this.height=r;const n=Math.floor(r/2),s=Math.floor(r/4),i=Math.floor(r/8),o=Math.floor(r/16),a=Math.floor(e/2),l=Math.floor(e/4),u=Math.floor(e/8),d=Math.floor(e/16);this.canvas.width=3*l,this.canvas.height=n,this.coordinates=[[0,0,a,n],[a,0,l,s],[a,s,u,i],[5*u,s,d,o]],this._fillMipMap()}initialized(){return this.coordinates!==void 0}_fillMipMap(){const e=this.canvas.getContext("2d"),r=this.coordinates[0];e.drawImage(this.image,r[0],r[1],r[2],r[3]);for(let n=1;n<this.NUM_ITERATIONS;n++){const s=this.coordinates[n-1],i=this.coordinates[n];e.drawImage(this.canvas,s[0],s[1],s[2],s[3],i[0],i[1],i[2],i[3])}}drawImageAtPosition(e,r,n,s,i,o){if(this.initialized())if(r>2){r*=.5;let a=0;for(;r>2&&a<this.NUM_ITERATIONS;)r*=.5,a+=1;a>=this.NUM_ITERATIONS&&(a=this.NUM_ITERATIONS-1);const l=this.coordinates[a];e.drawImage(this.canvas,l[0],l[1],l[2],l[3],n,s,i,o)}else e.drawImage(this.image,n,s,i,o)}}class j4e{constructor(e){this.images={},this.imageBroken={},this.callback=e}_tryloadBrokenUrl(e,r,n){if(!(e===void 0||n===void 0)){if(r===void 0){console.warn("No broken url image defined");return}n.image.onerror=()=>{console.error("Could not load brokenImage:",r)},n.image.src=r}}_redrawWithImage(e){this.callback&&this.callback(e)}load(e,r){const n=this.images[e];if(n)return n;const s=new k4e;return this.images[e]=s,s.image.onload=()=>{this._fixImageCoordinates(s.image),s.init(),this._redrawWithImage(s)},s.image.onerror=()=>{console.error("Could not load image:",e),this._tryloadBrokenUrl(e,r,s)},s.image.src=e,s}_fixImageCoordinates(e){e.width===0&&(document.body.appendChild(e),e.width=e.offsetWidth,e.height=e.offsetHeight,document.body.removeChild(e))}}var mY={},gY={},nT={exports:{}},sT,yY;function T4e(){if(yY)return sT;yY=1;var t=dt();return sT=t(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),sT}var iT,vY;function O4e(){if(vY)return iT;vY=1;var t=dt(),e=rn(),r=oo(),n=T4e(),s=Object.isExtensible,i=t(function(){});return iT=i||n?function(a){return!e(a)||n&&r(a)==="ArrayBuffer"?!1:s?s(a):!0}:s,iT}var oT,bY;function kce(){if(bY)return oT;bY=1;var t=dt();return oT=!t(function(){return Object.isExtensible(Object.preventExtensions({}))}),oT}var xY;function vx(){if(xY)return nT.exports;xY=1;var t=Me(),e=ft(),r=fg(),n=rn(),s=mn(),i=ai().f,o=hx(),a=QD(),l=O4e(),u=ix(),d=kce(),h=!1,f=u("meta"),p=0,m=function(x){i(x,f,{value:{objectID:"O"+p++,weakData:{}}})},g=function(x,S){if(!n(x))return typeof x=="symbol"?x:(typeof x=="string"?"S":"P")+x;if(!s(x,f)){if(!l(x))return"F";if(!S)return"E";m(x)}return x[f].objectID},y=function(x,S){if(!s(x,f)){if(!l(x))return!0;if(!S)return!1;m(x)}return x[f].weakData},v=function(x){return d&&h&&l(x)&&!s(x,f)&&m(x),x},b=function(){w.enable=function(){},h=!0;var x=o.f,S=e([].splice),E={};E[f]=1,x(E).length&&(o.f=function(N){for(var _=x(N),k=0,j=_.length;k<j;k++)if(_[k]===f){S(_,k,1);break}return _},t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:a.f}))},w=nT.exports={enable:b,fastKey:g,getWeakData:y,onFreeze:v};return r[f]=!0,nT.exports}var aT,wY;function P4e(){if(wY)return aT;wY=1;var t=Ar(),e=af(),r=t("iterator"),n=Array.prototype;return aT=function(s){return s!==void 0&&(e.Array===s||n[r]===s)},aT}var lT,SY;function jce(){if(SY)return lT;SY=1;var t=of(),e=BD(),r=Qh(),n=af(),s=Ar(),i=s("iterator");return lT=function(o){if(!r(o))return e(o,i)||e(o,"@@iterator")||n[t(o)]},lT}var cT,EY;function I4e(){if(EY)return cT;EY=1;var t=vs(),e=da(),r=ao(),n=Zh(),s=jce(),i=TypeError;return cT=function(o,a){var l=arguments.length<2?s(o):a;if(e(l))return r(t(l,o));throw new i(n(o)+" is not iterable")},cT}var uT,_Y;function h$(){if(_Y)return uT;_Y=1;var t=vs(),e=ao(),r=BD();return uT=function(n,s,i){var o,a;e(n);try{if(o=r(n,"return"),!o){if(s==="throw")throw i;return i}o=t(o,n)}catch(l){a=!0,o=l}if(s==="throw")throw i;if(a)throw o;return e(o),i},uT}var dT,NY;function bx(){if(NY)return dT;NY=1;var t=ax(),e=vs(),r=ao(),n=Zh(),s=P4e(),i=ha(),o=Mr(),a=I4e(),l=jce(),u=h$(),d=TypeError,h=function(p,m){this.stopped=p,this.result=m},f=h.prototype;return dT=function(p,m,g){var y=g&&g.that,v=!!(g&&g.AS_ENTRIES),b=!!(g&&g.IS_RECORD),w=!!(g&&g.IS_ITERATOR),x=!!(g&&g.INTERRUPTED),S=t(m,y),E,N,_,k,j,T,P,O=function(F){return E&&u(E,"normal"),new h(!0,F)},D=function(F){return v?(r(F),x?S(F[0],F[1],O):S(F[0],F[1])):x?S(F,O):S(F)};if(b)E=p.iterator;else if(w)E=p;else{if(N=l(p),!N)throw new d(n(p)+" is not iterable");if(s(N)){for(_=0,k=i(p);k>_;_++)if(j=D(p[_]),j&&o(f,j))return j;return new h(!1)}E=a(p,N)}for(T=b?p.next:E.next;!(P=e(T,E)).done;){try{j=D(P.value)}catch(F){u(E,"throw",F)}if(typeof j=="object"&&j&&o(f,j))return j}return new h(!1)},dT}var hT,CY;function f$(){if(CY)return hT;CY=1;var t=Mr(),e=TypeError;return hT=function(r,n){if(t(n,r))return r;throw new e("Incorrect invocation")},hT}var fT,kY;function p$(){if(kY)return fT;kY=1;var t=Me(),e=Kt(),r=vx(),n=dt(),s=rf(),i=bx(),o=f$(),a=tn(),l=rn(),u=Qh(),d=Cu(),h=ai().f,f=Ll().forEach,p=wr(),m=ku(),g=m.set,y=m.getterFor;return fT=function(v,b,w){var x=v.indexOf("Map")!==-1,S=v.indexOf("Weak")!==-1,E=x?"set":"add",N=e[v],_=N&&N.prototype,k={},j;if(!p||!a(N)||!(S||_.forEach&&!n(function(){new N().entries().next()})))j=w.getConstructor(b,v,x,E),r.enable();else{j=b(function(O,D){g(o(O,T),{type:v,collection:new N}),u(D)||i(D,O[E],{that:O,AS_ENTRIES:x})});var T=j.prototype,P=y(v);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(O){var D=O==="add"||O==="set";O in _&&!(S&&O==="clear")&&s(T,O,function(F,$){var q=P(this).collection;if(!D&&S&&!l(F))return O==="get"?void 0:!1;var M=q[O](F===0?0:F,$);return D?this:M})}),S||h(T,"size",{configurable:!0,get:function(){return P(this).collection.size}})}return d(j,v,!1,!0),k[v]=j,t({global:!0,forced:!0},k),S||w.setStrong(j,v,x),j},fT}var pT,jY;function m$(){if(jY)return pT;jY=1;var t=yg();return pT=function(e,r,n){for(var s in r)n&&n.unsafe&&e[s]?e[s]=r[s]:t(e,s,r[s],n);return e},pT}var mT,TY;function R4e(){if(TY)return mT;TY=1;var t=Rs(),e=XD(),r=Ar(),n=wr(),s=r("species");return mT=function(i){var o=t(i);n&&o&&!o[s]&&e(o,s,{configurable:!0,get:function(){return this}})},mT}var gT,OY;function Tce(){if(OY)return gT;OY=1;var t=gg(),e=XD(),r=m$(),n=ax(),s=f$(),i=Qh(),o=bx(),a=ZD(),l=e$(),u=R4e(),d=wr(),h=vx().fastKey,f=ku(),p=f.set,m=f.getterFor;return gT={getConstructor:function(g,y,v,b){var w=g(function(_,k){s(_,x),p(_,{type:y,index:t(null),first:null,last:null,size:0}),d||(_.size=0),i(k)||o(k,_[b],{that:_,AS_ENTRIES:v})}),x=w.prototype,S=m(y),E=function(_,k,j){var T=S(_),P=N(_,k),O,D;return P?P.value=j:(T.last=P={index:D=h(k,!0),key:k,value:j,previous:O=T.last,next:null,removed:!1},T.first||(T.first=P),O&&(O.next=P),d?T.size++:_.size++,D!=="F"&&(T.index[D]=P)),_},N=function(_,k){var j=S(_),T=h(k),P;if(T!=="F")return j.index[T];for(P=j.first;P;P=P.next)if(P.key===k)return P};return r(x,{clear:function(){for(var k=this,j=S(k),T=j.first;T;)T.removed=!0,T.previous&&(T.previous=T.previous.next=null),T=T.next;j.first=j.last=null,j.index=t(null),d?j.size=0:k.size=0},delete:function(_){var k=this,j=S(k),T=N(k,_);if(T){var P=T.next,O=T.previous;delete j.index[T.index],T.removed=!0,O&&(O.next=P),P&&(P.previous=O),j.first===T&&(j.first=P),j.last===T&&(j.last=O),d?j.size--:k.size--}return!!T},forEach:function(k){for(var j=S(this),T=n(k,arguments.length>1?arguments[1]:void 0),P;P=P?P.next:j.first;)for(T(P.value,P.key,this);P&&P.removed;)P=P.previous},has:function(k){return!!N(this,k)}}),r(x,v?{get:function(k){var j=N(this,k);return j&&j.value},set:function(k,j){return E(this,k===0?0:k,j)}}:{add:function(k){return E(this,k=k===0?0:k,k)}}),d&&e(x,"size",{configurable:!0,get:function(){return S(this).size}}),w},setStrong:function(g,y,v){var b=y+" Iterator",w=m(y),x=m(b);a(g,y,function(S,E){p(this,{type:b,target:S,state:w(S),kind:E,last:null})},function(){for(var S=x(this),E=S.kind,N=S.last;N&&N.removed;)N=N.previous;return!S.target||!(S.last=N=N?N.next:S.state.first)?(S.target=null,l(void 0,!0)):l(E==="keys"?N.key:E==="values"?N.value:[N.key,N.value],!1)},v?"entries":"values",!v,!0),u(y)}},gT}var PY;function M4e(){if(PY)return gY;PY=1;var t=p$(),e=Tce();return t("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),gY}var IY;function A4e(){return IY||(IY=1,M4e()),mY}var RY={},yT,MY;function Oce(){return MY||(MY=1,yT=function(t,e){return e===1?function(r,n){return r[t](n)}:function(r,n,s){return r[t](n,s)}}),yT}var vT,AY;function D4e(){if(AY)return vT;AY=1;var t=Rs(),e=Oce(),r=t("Map");return vT={Map:r,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:r.prototype},vT}var DY;function $4e(){if(DY)return RY;DY=1;var t=Me(),e=ft(),r=da(),n=ua(),s=bx(),i=D4e(),o=ef(),a=dt(),l=i.Map,u=i.has,d=i.get,h=i.set,f=e([].push),p=o||a(function(){return l.groupBy("ab",function(m){return m}).get("a").length!==1});return t({target:"Map",stat:!0,forced:o||p},{groupBy:function(g,y){n(g),r(y);var v=new l,b=0;return s(g,function(w){var x=y(w,b++);u(v,x)?f(d(v,x),w):h(v,x,[w])}),v}}),RY}var $Y={},bT,FY;function F4e(){if(FY)return bT;FY=1;var t=ft(),e=nf(),r=li(),n=ua(),s=t("".charAt),i=t("".charCodeAt),o=t("".slice),a=function(l){return function(u,d){var h=r(n(u)),f=e(d),p=h.length,m,g;return f<0||f>=p?l?"":void 0:(m=i(h,f),m<55296||m>56319||f+1===p||(g=i(h,f+1))<56320||g>57343?l?s(h,f):m:l?o(h,f,f+2):(m-55296<<10)+(g-56320)+65536)}};return bT={codeAt:a(!1),charAt:a(!0)},bT}var qY;function g$(){if(qY)return $Y;qY=1;var t=F4e().charAt,e=li(),r=ku(),n=ZD(),s=e$(),i="String Iterator",o=r.set,a=r.getterFor(i);return n(String,"String",function(l){o(this,{type:i,string:e(l),index:0})},function(){var u=a(this),d=u.string,h=u.index,f;return h>=d.length?s(void 0,!0):(f=t(d,h),u.index+=f.length,s(f,!1))}),$Y}var xT,LY;function q4e(){if(LY)return xT;LY=1,lf(),A4e(),$4e(),g$();var t=jt();return xT=t.Map,xT}var wT,BY;function L4e(){if(BY)return wT;BY=1;var t=q4e();return cf(),wT=t,wT}var ST,zY;function B4e(){return zY||(zY=1,ST=L4e()),ST}var z4e=B4e(),y$=Ve(z4e);class W4e{constructor(){this.clear(),this._defaultIndex=0,this._groupIndex=0,this._defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},jr(this.options,this.defaultOptions)}setOptions(e){const r=["useDefaultGroups"];if(e!==void 0){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Nt(r).call(r,n)===-1){const s=e[n];this.add(n,s)}}}clear(){this._groups=new y$,this._groupNames=[]}get(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this._groups.get(e);if(n===void 0&&r)if(this.options.useDefaultGroups===!1&&this._groupNames.length>0){const s=this._groupIndex%this._groupNames.length;++this._groupIndex,n={},n.color=this._groups.get(this._groupNames[s]),this._groups.set(e,n)}else{const s=this._defaultIndex%this._defaultGroups.length;this._defaultIndex++,n={},n.color=this._defaultGroups[s],this._groups.set(e,n)}return n}add(e,r){return this._groups.has(e)||this._groupNames.push(e),this._groups.set(e,r),r}}var WY={},VY;function V4e(){if(VY)return WY;VY=1;var t=Me();return t({target:"Number",stat:!0},{isNaN:function(r){return r!==r}}),WY}var ET,UY;function U4e(){if(UY)return ET;UY=1,V4e();var t=jt();return ET=t.Number.isNaN,ET}var _T,HY;function H4e(){if(HY)return _T;HY=1;var t=U4e();return _T=t,_T}var NT,KY;function K4e(){return KY||(KY=1,NT=H4e()),NT}var G4e=K4e(),QR=Ve(G4e),GY={},CT,YY;function Y4e(){if(YY)return CT;YY=1;var t=Kt(),e=t.isFinite;return CT=Number.isFinite||function(n){return typeof n=="number"&&e(n)},CT}var QY;function Q4e(){if(QY)return GY;QY=1;var t=Me(),e=Y4e();return t({target:"Number",stat:!0},{isFinite:e}),GY}var kT,XY;function X4e(){if(XY)return kT;XY=1,Q4e();var t=jt();return kT=t.Number.isFinite,kT}var jT,JY;function J4e(){if(JY)return jT;JY=1;var t=X4e();return jT=t,jT}var TT,ZY;function Z4e(){return ZY||(ZY=1,TT=J4e()),TT}var e5e=Z4e(),fc=Ve(e5e),eQ={},tQ;function t5e(){if(tQ)return eQ;tQ=1;var t=Me(),e=Ll().some,r=uf(),n=r("some");return t({target:"Array",proto:!0,forced:!n},{some:function(i){return e(this,i,arguments.length>1?arguments[1]:void 0)}}),eQ}var OT,rQ;function r5e(){if(rQ)return OT;rQ=1,t5e();var t=gn();return OT=t("Array","some"),OT}var PT,nQ;function n5e(){if(nQ)return PT;nQ=1;var t=Mr(),e=r5e(),r=Array.prototype;return PT=function(n){var s=n.some;return n===r||t(r,n)&&s===r.some?e:s},PT}var IT,sQ;function s5e(){if(sQ)return IT;sQ=1;var t=n5e();return IT=t,IT}var RT,iQ;function i5e(){return iQ||(iQ=1,RT=s5e()),RT}var o5e=i5e(),a5e=Ve(o5e),MT={exports:{}},oQ={},aQ;function l5e(){if(aQ)return oQ;aQ=1;var t=Me(),e=wr(),r=ai().f;return t({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!e},{defineProperty:r}),oQ}var lQ;function c5e(){if(lQ)return MT.exports;lQ=1,l5e();var t=jt(),e=t.Object,r=MT.exports=function(s,i,o){return e.defineProperty(s,i,o)};return e.defineProperty.sham&&(r.sham=!0),MT.exports}var AT,cQ;function Pce(){if(cQ)return AT;cQ=1;var t=c5e();return AT=t,AT}var DT,uQ;function u5e(){if(uQ)return DT;uQ=1;var t=Pce();return DT=t,DT}var $T,dQ;function d5e(){if(dQ)return $T;dQ=1;var t=u5e();return $T=t,$T}var FT,hQ;function h5e(){return hQ||(hQ=1,FT=d5e()),FT}var f5e=h5e(),p5e=Ve(f5e),fQ={},pQ;function m5e(){if(pQ)return fQ;pQ=1;var t=Ar(),e=ai().f,r=t("metadata"),n=Function.prototype;return n[r]===void 0&&e(n,r,{value:null}),fQ}var mQ={},gQ;function g5e(){return gQ||(gQ=1,Rle()),mQ}var yQ={},vQ;function y5e(){return vQ||(vQ=1,Mle()),yQ}var bQ={},xQ;function v5e(){if(xQ)return bQ;xQ=1;var t=rr();return t("metadata"),bQ}var qT,wQ;function b5e(){if(wQ)return qT;wQ=1;var t=qle();return m5e(),g5e(),y5e(),v5e(),qT=t,qT}var SQ={},LT,EQ;function Ice(){if(EQ)return LT;EQ=1;var t=Rs(),e=ft(),r=t("Symbol"),n=r.keyFor,s=e(r.prototype.valueOf);return LT=r.isRegisteredSymbol||function(o){try{return n(s(o))!==void 0}catch{return!1}},LT}var _Q;function x5e(){if(_Q)return SQ;_Q=1;var t=Me(),e=Ice();return t({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),SQ}var NQ={},BT,CQ;function Rce(){if(CQ)return BT;CQ=1;for(var t=tf(),e=Rs(),r=ft(),n=hg(),s=Ar(),i=e("Symbol"),o=i.isWellKnownSymbol,a=e("Object","getOwnPropertyNames"),l=r(i.prototype.valueOf),u=t("wks"),d=0,h=a(i),f=h.length;d<f;d++)try{var p=h[d];n(i[p])&&s(p)}catch{}return BT=function(g){if(o&&o(g))return!0;try{for(var y=l(g),v=0,b=a(u),w=b.length;v<w;v++)if(u[b[v]]==y)return!0}catch{}return!1},BT}var kQ;function w5e(){if(kQ)return NQ;kQ=1;var t=Me(),e=Rce();return t({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),NQ}var jQ={},TQ;function S5e(){if(TQ)return jQ;TQ=1;var t=rr();return t("customMatcher"),jQ}var OQ={},PQ;function E5e(){if(PQ)return OQ;PQ=1;var t=rr();return t("observable"),OQ}var IQ={},RQ;function _5e(){if(RQ)return IQ;RQ=1;var t=Me(),e=Ice();return t({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),IQ}var MQ={},AQ;function N5e(){if(AQ)return MQ;AQ=1;var t=Me(),e=Rce();return t({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),MQ}var DQ={},$Q;function C5e(){if($Q)return DQ;$Q=1;var t=rr();return t("matcher"),DQ}var FQ={},qQ;function k5e(){if(qQ)return FQ;qQ=1;var t=rr();return t("metadataKey"),FQ}var LQ={},BQ;function j5e(){if(BQ)return LQ;BQ=1;var t=rr();return t("patternMatch"),LQ}var zQ={},WQ;function T5e(){if(WQ)return zQ;WQ=1;var t=rr();return t("replaceAll"),zQ}var zT,VQ;function O5e(){if(VQ)return zT;VQ=1;var t=b5e();return x5e(),w5e(),S5e(),E5e(),_5e(),N5e(),C5e(),k5e(),j5e(),T5e(),zT=t,zT}var WT,UQ;function P5e(){return UQ||(UQ=1,WT=O5e()),WT}var I5e=P5e(),Ny=Ve(I5e),VT,HQ;function R5e(){if(HQ)return VT;HQ=1,lf(),g$(),Ale();var t=fx();return VT=t.f("iterator"),VT}var UT,KQ;function M5e(){if(KQ)return UT;KQ=1;var t=R5e();return cf(),UT=t,UT}var HT,GQ;function A5e(){if(GQ)return HT;GQ=1;var t=M5e();return HT=t,HT}var KT,YQ;function D5e(){if(YQ)return KT;YQ=1;var t=A5e();return KT=t,KT}var GT,QQ;function $5e(){return QQ||(QQ=1,GT=D5e()),GT}var F5e=$5e(),q5e=Ve(F5e);function vm(t){"@babel/helpers - typeof";return vm=typeof Ny=="function"&&typeof q5e=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Ny=="function"&&e.constructor===Ny&&e!==Ny.prototype?"symbol":typeof e},vm(t)}var YT,XQ;function L5e(){if(XQ)return YT;XQ=1,Dle();var t=fx();return YT=t.f("toPrimitive"),YT}var QT,JQ;function B5e(){if(JQ)return QT;JQ=1;var t=L5e();return QT=t,QT}var XT,ZQ;function z5e(){if(ZQ)return XT;ZQ=1;var t=B5e();return XT=t,XT}var JT,eX;function W5e(){if(eX)return JT;eX=1;var t=z5e();return JT=t,JT}var ZT,tX;function V5e(){return tX||(tX=1,ZT=W5e()),ZT}var U5e=V5e(),H5e=Ve(U5e);function K5e(t,e){if(vm(t)!="object"||!t)return t;var r=t[H5e];if(r!==void 0){var n=r.call(t,e);if(vm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function G5e(t){var e=K5e(t,"string");return vm(e)=="symbol"?e:e+""}function Do(t,e,r){return(e=G5e(e))in t?p5e(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var rX={},eO,nX;function Y5e(){if(nX)return eO;nX=1;var t=Kt(),e=dt(),r=ft(),n=li(),s=Ble().trim,i=t$(),o=r("".charAt),a=t.parseFloat,l=t.Symbol,u=l&&l.iterator,d=1/a(i+"-0")!==-1/0||u&&!e(function(){a(Object(u))});return eO=d?function(f){var p=s(n(f)),m=a(p);return m===0&&o(p,0)==="-"?-0:m}:a,eO}var sX;function Q5e(){if(sX)return rX;sX=1;var t=Me(),e=Y5e();return t({global:!0,forced:parseFloat!==e},{parseFloat:e}),rX}var tO,iX;function X5e(){if(iX)return tO;iX=1,Q5e();var t=jt();return tO=t.parseFloat,tO}var rO,oX;function J5e(){if(oX)return rO;oX=1;var t=X5e();return rO=t,rO}var nO,aX;function Z5e(){return aX||(aX=1,nO=J5e()),nO}var e3e=Z5e(),Mce=Ve(e3e),lX={},cX;function t3e(){if(cX)return lX;cX=1;var t=Me(),e=dt(),r=QD().f,n=e(function(){return!Object.getOwnPropertyNames(1)});return t({target:"Object",stat:!0,forced:n},{getOwnPropertyNames:r}),lX}var sO,uX;function r3e(){if(uX)return sO;uX=1,t3e();var t=jt(),e=t.Object;return sO=function(n){return e.getOwnPropertyNames(n)},sO}var iO,dX;function n3e(){if(dX)return iO;dX=1;var t=r3e();return iO=t,iO}var oO,hX;function s3e(){return hX||(hX=1,oO=n3e()),oO}var i3e=s3e(),o3e=Ve(i3e),aO,fX;function a3e(){if(fX)return aO;fX=1,Ile();var t=jt();return aO=t.Object.getOwnPropertySymbols,aO}var lO,pX;function l3e(){if(pX)return lO;pX=1;var t=a3e();return lO=t,lO}var cO,mX;function c3e(){return mX||(mX=1,cO=l3e()),cO}var u3e=c3e(),kl=Ve(u3e),uO={exports:{}},gX={},yX;function d3e(){if(yX)return gX;yX=1;var t=Me(),e=dt(),r=Oi(),n=ox().f,s=wr(),i=!s||e(function(){n(1)});return t({target:"Object",stat:!0,forced:i,sham:!s},{getOwnPropertyDescriptor:function(a,l){return n(r(a),l)}}),gX}var vX;function h3e(){if(vX)return uO.exports;vX=1,d3e();var t=jt(),e=t.Object,r=uO.exports=function(s,i){return e.getOwnPropertyDescriptor(s,i)};return e.getOwnPropertyDescriptor.sham&&(r.sham=!0),uO.exports}var dO,bX;function f3e(){if(bX)return dO;bX=1;var t=h3e();return dO=t,dO}var hO,xX;function p3e(){return xX||(xX=1,hO=f3e()),hO}var m3e=p3e(),Bl=Ve(m3e),wX={},SX;function g3e(){if(SX)return wX;SX=1;var t=Me(),e=wr(),r=BMe(),n=Oi(),s=ox(),i=ux();return t({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(a){for(var l=n(a),u=s.f,d=r(l),h={},f=0,p,m;d.length>f;)m=u(l,p=d[f++]),m!==void 0&&i(h,p,m);return h}}),wX}var fO,EX;function y3e(){if(EX)return fO;EX=1,g3e();var t=jt();return fO=t.Object.getOwnPropertyDescriptors,fO}var pO,_X;function v3e(){if(_X)return pO;_X=1;var t=y3e();return pO=t,pO}var mO,NX;function b3e(){return NX||(NX=1,mO=v3e()),mO}var x3e=b3e(),jl=Ve(x3e),gO={exports:{}},CX={},kX;function w3e(){if(kX)return CX;kX=1;var t=Me(),e=wr(),r=YD().f;return t({target:"Object",stat:!0,forced:Object.defineProperties!==r,sham:!e},{defineProperties:r}),CX}var jX;function S3e(){if(jX)return gO.exports;jX=1,w3e();var t=jt(),e=t.Object,r=gO.exports=function(s,i){return e.defineProperties(s,i)};return e.defineProperties.sham&&(r.sham=!0),gO.exports}var yO,TX;function E3e(){if(TX)return yO;TX=1;var t=S3e();return yO=t,yO}var vO,OX;function _3e(){return OX||(OX=1,vO=E3e()),vO}var N3e=_3e(),xx=Ve(N3e),bO,PX;function C3e(){return PX||(PX=1,bO=Pce()),bO}var k3e=C3e(),wx=Ve(k3e);function v$(t,e){const r=["node","edge","label"];let n=!0;const s=Ta(e,"chosen");if(typeof s=="boolean")n=s;else if(typeof s=="object"){if(Nt(r).call(r,t)===-1)throw new Error("choosify: subOption '"+t+"' should be one of '"+r.join("', '")+"'");const i=Ta(e,["chosen",t]);(typeof i=="boolean"||typeof i=="function")&&(n=i)}return n}function XR(t,e,r){if(t.width<=0||t.height<=0)return!1;if(r!==void 0){const i={x:e.x-r.x,y:e.y-r.y};if(r.angle!==0){const o=-r.angle;e={x:Math.cos(o)*i.x-Math.sin(o)*i.y,y:Math.sin(o)*i.x+Math.cos(o)*i.y}}else e=i}const n=t.x+t.width,s=t.y+t.width;return t.left<e.x&&n>e.x&&t.top<e.y&&s>e.y}function z0(t){return typeof t=="string"&&t!==""}function Ace(t,e,r,n){let s=n.x,i=n.y;if(typeof n.distanceToBorder=="function"){const o=n.distanceToBorder(t,e),a=Math.sin(e)*o,l=Math.cos(e)*o;l===o?(s+=o,i=n.y):a===o?(s=n.x,i-=o):(s+=l,i-=a)}else n.shape.width>n.shape.height?(s=n.x+n.shape.width*.5,i=n.y-r):(s=n.x+r,i=n.y-n.shape.height*.5);return{x:s,y:i}}var xO,IX;function j3e(){if(IX)return xO;IX=1,lf();var t=gn();return xO=t("Array","values"),xO}var wO,RX;function T3e(){if(RX)return wO;RX=1;var t=j3e();return wO=t,wO}var SO,MX;function O3e(){if(MX)return SO;MX=1,cf();var t=of(),e=mn(),r=Mr(),n=T3e(),s=Array.prototype,i={DOMTokenList:!0,NodeList:!0};return SO=function(o){var a=o.values;return o===s||r(s,o)&&a===s.values||e(i,t(o))?n:a},SO}var EO,AX;function P3e(){return AX||(AX=1,EO=O3e()),EO}var I3e=P3e(),Dce=Ve(I3e);class R3e{constructor(e){this.measureText=e,this.current=0,this.width=0,this.height=0,this.lines=[]}_add(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"normal";this.lines[e]===void 0&&(this.lines[e]={width:0,height:0,blocks:[]});let s=r;(r===void 0||r==="")&&(s=" ");const i=this.measureText(s,n),o=jr({},Dce(i));o.text=r,o.width=i.width,o.mod=n,(r===void 0||r==="")&&(o.width=0),this.lines[e].blocks.push(o),this.lines[e].width+=o.width}curWidth(){const e=this.lines[this.current];return e===void 0?0:e.width}append(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,r)}newLine(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,r),this.current++}determineLineHeights(){for(let e=0;e<this.lines.length;e++){const r=this.lines[e];let n=0;if(r.blocks!==void 0)for(let s=0;s<r.blocks.length;s++){const i=r.blocks[s];n<i.height&&(n=i.height)}r.height=n}}determineLabelSize(){let e=0,r=0;for(let n=0;n<this.lines.length;n++){const s=this.lines[n];s.width>e&&(e=s.width),r+=s.height}this.width=e,this.height=r}removeEmptyBlocks(){const e=[];for(let r=0;r<this.lines.length;r++){const n=this.lines[r];if(n.blocks.length===0||r===this.lines.length-1&&n.width===0)continue;const s={};jr(s,n),s.blocks=[];let i;const o=[];for(let a=0;a<n.blocks.length;a++){const l=n.blocks[a];l.width!==0?o.push(l):i===void 0&&(i=l)}o.length===0&&i!==void 0&&o.push(i),s.blocks=o,e.push(s)}return e}finalize(){this.determineLineHeights(),this.determineLabelSize();const e=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:e}}}const M3e={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/_/,"`":/`/,afterBold:/[^*]/,afterItal:/[^_]/,afterMono:/[^`]/};class DX{constructor(e){this.text=e,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}mod(){return this.modStack.length===0?"normal":this.modStack[0]}modName(){if(this.modStack.length===0)return"normal";if(this.modStack[0]==="mono")return"mono";if(this.bold&&this.ital)return"boldital";if(this.bold)return"bold";if(this.ital)return"ital"}emitBlock(){this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}add(e){e===" "&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1),e!=" "&&(this.buffer+=e)}parseWS(e){return/[ \t]/.test(e)?(this.mono?this.add(e):this.spacing=!0,!0):!1}setTag(e){this.emitBlock(),this[e]=!0,this.modStack.unshift(e)}unsetTag(e){this.emitBlock(),this[e]=!1,this.modStack.shift()}parseStartTag(e,r){return!this.mono&&!this[e]&&this.match(r)?(this.setTag(e),!0):!1}match(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const[n,s]=this.prepareRegExp(e),i=n.test(this.text.substr(this.position,s));return i&&r&&(this.position+=s-1),i}parseEndTag(e,r,n){let s=this.mod()===e;return e==="mono"?s=s&&this.mono:s=s&&!this.mono,s&&this.match(r)?(n!==void 0?(this.position===this.text.length-1||this.match(n,!1))&&this.unsetTag(e):this.unsetTag(e),!0):!1}replace(e,r){return this.match(e)?(this.add(r),this.position+=length-1,!0):!1}prepareRegExp(e){let r,n;if(e instanceof RegExp)n=e,r=1;else{const s=M3e[e];s!==void 0?n=s:n=new RegExp(e),r=e.length}return[n,r]}}class A3e{constructor(e,r,n,s){this.ctx=e,this.parent=r,this.selected=n,this.hover=s;const i=(o,a)=>{if(o===void 0)return 0;const l=this.parent.getFormattingValues(e,n,s,a);let u=0;return o!==""&&(u=this.ctx.measureText(o).width),{width:u,values:l}};this.lines=new R3e(i)}process(e){if(!z0(e))return this.lines.finalize();const r=this.parent.fontOptions;e=e.replace(/\r\n/g,`
`),e=e.replace(/\r/g,`
`);const n=String(e).split(`
`),s=n.length;if(r.multi)for(let i=0;i<s;i++){const o=this.splitBlocks(n[i],r.multi);if(o!==void 0){if(o.length===0){this.lines.newLine("");continue}if(r.maxWdt>0)for(let a=0;a<o.length;a++){const l=o[a].mod,u=o[a].text;this.splitStringIntoLines(u,l,!0)}else for(let a=0;a<o.length;a++){const l=o[a].mod,u=o[a].text;this.lines.append(u,l)}this.lines.newLine()}}else if(r.maxWdt>0)for(let i=0;i<s;i++)this.splitStringIntoLines(n[i]);else for(let i=0;i<s;i++)this.lines.newLine(n[i]);return this.lines.finalize()}decodeMarkupSystem(e){let r="none";return e==="markdown"||e==="md"?r="markdown":(e===!0||e==="html")&&(r="html"),r}splitHtmlBlocks(e){const r=new DX(e),n=s=>/&/.test(s)?(r.replace(r.text,"&lt;","<")||r.replace(r.text,"&amp;","&")||r.add("&"),!0):!1;for(;r.position<r.text.length;){const s=r.text.charAt(r.position);r.parseWS(s)||/</.test(s)&&(r.parseStartTag("bold","<b>")||r.parseStartTag("ital","<i>")||r.parseStartTag("mono","<code>")||r.parseEndTag("bold","</b>")||r.parseEndTag("ital","</i>")||r.parseEndTag("mono","</code>"))||n(s)||r.add(s),r.position++}return r.emitBlock(),r.blocks}splitMarkdownBlocks(e){const r=new DX(e);let n=!0;const s=i=>/\\/.test(i)?(r.position<this.text.length+1&&(r.position++,i=this.text.charAt(r.position),/ \t/.test(i)?r.spacing=!0:(r.add(i),n=!1)),!0):!1;for(;r.position<r.text.length;){const i=r.text.charAt(r.position);r.parseWS(i)||s(i)||(n||r.spacing)&&(r.parseStartTag("bold","*")||r.parseStartTag("ital","_")||r.parseStartTag("mono","`"))||r.parseEndTag("bold","*","afterBold")||r.parseEndTag("ital","_","afterItal")||r.parseEndTag("mono","`","afterMono")||(r.add(i),n=!1),r.position++}return r.emitBlock(),r.blocks}splitBlocks(e,r){const n=this.decodeMarkupSystem(r);if(n==="none")return[{text:e,mod:"normal"}];if(n==="markdown")return this.splitMarkdownBlocks(e);if(n==="html")return this.splitHtmlBlocks(e)}overMaxWidth(e){const r=this.ctx.measureText(e).width;return this.lines.curWidth()+r>this.parent.fontOptions.maxWdt}getLongestFit(e){let r="",n=0;for(;n<e.length;){const i=r+(r===""?"":" ")+e[n];if(this.overMaxWidth(i))break;r=i,n++}return n}getLongestFitWord(e){let r=0;for(;r<e.length&&!this.overMaxWidth(Hi(e).call(e,0,r));)r++;return r}splitStringIntoLines(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.parent.getFormattingValues(this.ctx,this.selected,this.hover,r),e=e.replace(/^( +)/g,"$1\r"),e=e.replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r");let s=e.split("\r");for(;s.length>0;){let i=this.getLongestFit(s);if(i===0){const o=s[0],a=this.getLongestFitWord(o);this.lines.newLine(Hi(o).call(o,0,a),r),s[0]=Hi(o).call(o,a)}else{let o=i;s[i-1]===" "?i--:s[o]===" "&&o++;const a=Hi(s).call(s,0,i).join("");i==s.length&&n?this.lines.append(a,r):this.lines.newLine(a,r),s=Hi(s).call(s,o)}}}}const qf=["bold","ital","boldital","mono"];class Ad{constructor(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.body=e,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(r),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=n}setOptions(e){if(this.elementOptions=e,this.initFontOptions(e.font),z0(e.label)?this.labelDirty=!0:e.label=void 0,e.font!==void 0&&e.font!==null){if(typeof e.font=="string")this.baseSize=this.fontOptions.size;else if(typeof e.font=="object"){const r=e.font.size;r!==void 0&&(this.baseSize=r)}}}initFontOptions(e){if(st(qf,r=>{this.fontOptions[r]={}}),Ad.parseFontString(this.fontOptions,e)){this.fontOptions.vadjust=0;return}st(e,(r,n)=>{r!=null&&typeof r!="object"&&(this.fontOptions[n]=r)})}static parseFontString(e,r){if(!r||typeof r!="string")return!1;const n=r.split(" ");return e.size=+n[0].replace("px",""),e.face=n[1],e.color=n[2],!0}constrain(e){const r={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},n=Ta(e,"widthConstraint");if(typeof n=="number")r.maxWdt=Number(n),r.minWdt=Number(n);else if(typeof n=="object"){const i=Ta(e,["widthConstraint","maximum"]);typeof i=="number"&&(r.maxWdt=Number(i));const o=Ta(e,["widthConstraint","minimum"]);typeof o=="number"&&(r.minWdt=Number(o))}const s=Ta(e,"heightConstraint");if(typeof s=="number")r.minHgt=Number(s);else if(typeof s=="object"){const i=Ta(e,["heightConstraint","minimum"]);typeof i=="number"&&(r.minHgt=Number(i));const o=Ta(e,["heightConstraint","valign"]);typeof o=="string"&&(o==="top"||o==="bottom")&&(r.valign=o)}return r}update(e,r){this.setOptions(e,!0),this.propagateFonts(r),$t(this.fontOptions,this.constrain(r)),this.fontOptions.chooser=v$("label",r)}adjustSizes(e){const r=e?e.right+e.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=r,this.fontOptions.minWdt-=r);const n=e?e.top+e.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=n)}addFontOptionsToPile(e,r){for(let n=0;n<r.length;++n)this.addFontToPile(e,r[n])}addFontToPile(e,r){if(r===void 0||r.font===void 0||r.font===null)return;const n=r.font;e.push(n)}getBasicOptions(e){const r={};for(let n=0;n<e.length;++n){let s=e[n];const i={};Ad.parseFontString(i,s)&&(s=i),st(s,(o,a)=>{o!==void 0&&(Object.prototype.hasOwnProperty.call(r,a)||(Nt(qf).call(qf,a)!==-1?r[a]={}:r[a]=o))})}return r}getFontOption(e,r,n){let s;for(let i=0;i<e.length;++i){const o=e[i];if(Object.prototype.hasOwnProperty.call(o,r)){if(s=o[r],s==null)continue;const a={};if(Ad.parseFontString(a,s)&&(s=a),Object.prototype.hasOwnProperty.call(s,n))return s[n]}}if(Object.prototype.hasOwnProperty.call(this.fontOptions,n))return this.fontOptions[n];throw new Error("Did not find value for multi-font for property: '"+n+"'")}getFontOptions(e,r){const n={},s=["color","size","face","mod","vadjust"];for(let i=0;i<s.length;++i){const o=s[i];n[o]=this.getFontOption(e,r,o)}return n}propagateFonts(e){const r=[];this.addFontOptionsToPile(r,e),this.fontOptions=this.getBasicOptions(r);for(let n=0;n<qf.length;++n){const s=qf[n],i=this.fontOptions[s],o=this.getFontOptions(r,s);st(o,(a,l)=>{i[l]=a}),i.size=Number(i.size),i.vadjust=Number(i.vadjust)}}draw(e,r,n,s,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";if(this.elementOptions.label===void 0)return;let a=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&a<this.elementOptions.scaling.label.drawThreshold-1||(a>=this.elementOptions.scaling.label.maxVisible&&(a=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(e,s,i,r,n,o),this._drawBackground(e),this._drawText(e,r,this.size.yLine,o,a))}_drawBackground(e){if(this.fontOptions.background!==void 0&&this.fontOptions.background!=="none"){e.fillStyle=this.fontOptions.background;const r=this.getSize();e.fillRect(r.left,r.top,r.width,r.height)}}_drawText(e,r,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"middle",i=arguments.length>4?arguments[4]:void 0;[r,n]=this._setAlignment(e,r,n,s),e.textAlign="left",r=r-this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&(this.fontOptions.valign==="top"&&(n-=(this.size.height-this.size.labelHeight)/2),this.fontOptions.valign==="bottom"&&(n+=(this.size.height-this.size.labelHeight)/2));for(let o=0;o<this.lineCount;o++){const a=this.lines[o];if(a&&a.blocks){let l=0;this.isEdgeLabel||this.fontOptions.align==="center"?l+=(this.size.width-a.width)/2:this.fontOptions.align==="right"&&(l+=this.size.width-a.width);for(let u=0;u<a.blocks.length;u++){const d=a.blocks[u];e.font=d.font;const[h,f]=this._getColor(d.color,i,d.strokeColor);d.strokeWidth>0&&(e.lineWidth=d.strokeWidth,e.strokeStyle=f,e.lineJoin="round"),e.fillStyle=h,d.strokeWidth>0&&e.strokeText(d.text,r+l,n+d.vadjust),e.fillText(d.text,r+l,n+d.vadjust),l+=d.width}n+=a.height}}}_setAlignment(e,r,n,s){if(this.isEdgeLabel&&this.fontOptions.align!=="horizontal"&&this.pointToSelf===!1){r=0,n=0;const i=2;this.fontOptions.align==="top"?(e.textBaseline="alphabetic",n-=2*i):this.fontOptions.align==="bottom"?(e.textBaseline="hanging",n+=2*i):e.textBaseline="middle"}else e.textBaseline=s;return[r,n]}_getColor(e,r,n){let s=e||"#000000",i=n||"#ffffff";if(r<=this.elementOptions.scaling.label.drawThreshold){const o=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-r)));s=Gs(s,o),i=Gs(i,o)}return[s,i]}getTextSize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this._processLabel(e,r,n),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}getSize(){let r=this.size.left,n=this.size.top-.5*2;if(this.isEdgeLabel){const i=-this.size.width*.5;switch(this.fontOptions.align){case"middle":r=i,n=-this.size.height*.5;break;case"top":r=i,n=-(this.size.height+2);break;case"bottom":r=i,n=2;break}}return{left:r,top:n,width:this.size.width,height:this.size.height}}calculateLabelSize(e,r,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";this._processLabel(e,r,n),this.size.left=s-this.size.width*.5,this.size.top=i-this.size.height*.5,this.size.yLine=i+(1-this.lineCount)*.5*this.fontOptions.size,o==="hanging"&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}getFormattingValues(e,r,n,s){const i=function(l,u,d){return u==="normal"?d==="mod"?"":l[d]:l[u][d]!==void 0?l[u][d]:l[d]},o={color:i(this.fontOptions,s,"color"),size:i(this.fontOptions,s,"size"),face:i(this.fontOptions,s,"face"),mod:i(this.fontOptions,s,"mod"),vadjust:i(this.fontOptions,s,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(r||n)&&(s==="normal"&&this.fontOptions.chooser===!0&&this.elementOptions.labelHighlightBold?o.mod="bold":typeof this.fontOptions.chooser=="function"&&this.fontOptions.chooser(o,this.elementOptions.id,r,n));let a="";return o.mod!==void 0&&o.mod!==""&&(a+=o.mod+" "),a+=o.size+"px "+o.face,e.font=a.replace(/"/g,""),o.font=e.font,o.height=o.size,o}differentState(e,r){return e!==this.selectedState||r!==this.hoverState}_processLabelText(e,r,n,s){return new A3e(e,this,r,n).process(s)}_processLabel(e,r,n){if(this.labelDirty===!1&&!this.differentState(r,n))return;const s=this._processLabelText(e,r,n,this.elementOptions.label);this.fontOptions.minWdt>0&&s.width<this.fontOptions.minWdt&&(s.width=this.fontOptions.minWdt),this.size.labelHeight=s.height,this.fontOptions.minHgt>0&&s.height<this.fontOptions.minHgt&&(s.height=this.fontOptions.minHgt),this.lines=s.lines,this.lineCount=s.lines.length,this.size.width=s.width,this.size.height=s.height,this.selectedState=r,this.hoverState=n,this.labelDirty=!1}visible(){return!(this.size.width===0||this.size.height===0||this.elementOptions.label===void 0||this.fontOptions.size*this.body.view.scale<this.elementOptions.scaling.label.drawThreshold-1)}}class Tu{constructor(e,r,n){this.body=r,this.labelModule=n,this.setOptions(e),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}setOptions(e){this.options=e}_setMargins(e){this.margin={},this.options.margin&&(typeof this.options.margin=="object"?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),e.adjustSizes(this.margin)}_distanceToBorder(e,r){const n=this.options.borderWidth;return e&&this.resize(e),Math.min(Math.abs(this.width/2/Math.cos(r)),Math.abs(this.height/2/Math.sin(r)))+n}enableShadow(e,r){r.shadow&&(e.shadowColor=r.shadowColor,e.shadowBlur=r.shadowSize,e.shadowOffsetX=r.shadowX,e.shadowOffsetY=r.shadowY)}disableShadow(e,r){r.shadow&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}enableBorderDashes(e,r){if(r.borderDashes!==!1)if(e.setLineDash!==void 0){let n=r.borderDashes;n===!0&&(n=[5,15]),e.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,r.borderDashes=!1}disableBorderDashes(e,r){r.borderDashes!==!1&&(e.setLineDash!==void 0?e.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,r.borderDashes=!1))}needsRefresh(e,r){return this.refreshNeeded===!0?(this.refreshNeeded=!1,!0):this.width===void 0||this.labelModule.differentState(e,r)}initContextForDraw(e,r){const n=r.borderWidth/this.body.view.scale;e.lineWidth=Math.min(this.width,n),e.strokeStyle=r.borderColor,e.fillStyle=r.color}performStroke(e,r){const n=r.borderWidth/this.body.view.scale;e.save(),n>0&&(this.enableBorderDashes(e,r),e.stroke(),this.disableBorderDashes(e,r)),e.restore()}performFill(e,r){e.save(),e.fillStyle=r.color,this.enableShadow(e,r),bg(e).call(e),this.disableShadow(e,r),e.restore(),this.performStroke(e,r)}_addBoundingBoxMargin(e){this.boundingBox.left-=e,this.boundingBox.top-=e,this.boundingBox.bottom+=e,this.boundingBox.right+=e}_updateBoundingBox(e,r,n,s,i){n!==void 0&&this.resize(n,s,i),this.left=e-this.width/2,this.top=r-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}updateBoundingBox(e,r,n,s,i){this._updateBoundingBox(e,r,n,s,i)}getDimensionsFromLabel(e,r,n){this.textSize=this.labelModule.getTextSize(e,r,n);let s=this.textSize.width,i=this.textSize.height;const o=14;return s===0&&(s=o,i=o),{width:s,height:i}}}let D3e=class extends Tu{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const s=this.getDimensionsFromLabel(e,r,n);this.width=s.width+this.margin.right+this.margin.left,this.height=s.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}draw(e,r,n,s,i,o){this.resize(e,s,i),this.left=r-this.width/2,this.top=n-this.height/2,this.initContextForDraw(e,o),wle(e,this.left,this.top,this.width,this.height,o.borderRadius),this.performFill(e,o),this.updateBoundingBox(r,n,e,s,i),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,s,i)}updateBoundingBox(e,r,n,s,i){this._updateBoundingBox(e,r,n,s,i);const o=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(o)}distanceToBorder(e,r){e&&this.resize(e);const n=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(r)),Math.abs(this.height/2/Math.sin(r)))+n}};class b$ extends Tu{constructor(e,r,n){super(e,r,n),this.labelOffset=0,this.selected=!1}setOptions(e,r,n){this.options=e,r===void 0&&n===void 0||this.setImages(r,n)}setImages(e,r){r&&this.selected?(this.imageObj=r,this.imageObjAlt=e):(this.imageObj=e,this.imageObjAlt=r)}switchImages(e){const r=e&&!this.selected||!e&&this.selected;if(this.selected=e,this.imageObjAlt!==void 0&&r){const n=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=n}}_getImagePadding(){const e={top:0,right:0,bottom:0,left:0};if(this.options.imagePadding){const r=this.options.imagePadding;typeof r=="object"?(e.top=r.top,e.right=r.right,e.bottom=r.bottom,e.left=r.left):(e.top=r,e.right=r,e.bottom=r,e.left=r)}return e}_resizeImage(){let e,r;if(this.options.shapeProperties.useImageSize===!1){let n=1,s=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?n=this.imageObj.width/this.imageObj.height:s=this.imageObj.height/this.imageObj.width),e=this.options.size*2*n,r=this.options.size*2*s}else{const n=this._getImagePadding();e=this.imageObj.width+n.left+n.right,r=this.imageObj.height+n.top+n.bottom}this.width=e,this.height=r,this.radius=.5*this.width}_drawRawCircle(e,r,n,s){this.initContextForDraw(e,s),HD(e,r,n,s.size),this.performFill(e,s)}_drawImageAtPosition(e,r){if(this.imageObj.width!=0){e.globalAlpha=r.opacity!==void 0?r.opacity:1,this.enableShadow(e,r);let n=1;this.options.shapeProperties.interpolation===!0&&(n=this.imageObj.width/this.width/this.body.view.scale);const s=this._getImagePadding(),i=this.left+s.left,o=this.top+s.top,a=this.width-s.left-s.right,l=this.height-s.top-s.bottom;this.imageObj.drawImageAtPosition(e,n,i,o,a,l),this.disableShadow(e,r)}}_drawImageLabel(e,r,n,s,i){let o=0;if(this.height!==void 0){o=this.height*.5;const l=this.labelModule.getTextSize(e,s,i);l.lineCount>=1&&(o+=l.height/2)}const a=n+o;this.options.label&&(this.labelOffset=o),this.labelModule.draw(e,r,a,s,i,"hanging")}}let $3e=class extends b${constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const s=this.getDimensionsFromLabel(e,r,n),i=Math.max(s.width+this.margin.right+this.margin.left,s.height+this.margin.top+this.margin.bottom);this.options.size=i/2,this.width=i,this.height=i,this.radius=this.width/2}}draw(e,r,n,s,i,o){this.resize(e,s,i),this.left=r-this.width/2,this.top=n-this.height/2,this._drawRawCircle(e,r,n,o),this.updateBoundingBox(r,n),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,n,s,i)}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size}distanceToBorder(e){return e&&this.resize(e),this.width*.5}};class F3e extends b${constructor(e,r,n,s,i){super(e,r,n),this.setImages(s,i)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0){const i=this.options.size*2;this.width=i,this.height=i,this.radius=.5*this.width;return}this.needsRefresh(r,n)&&this._resizeImage()}draw(e,r,n,s,i,o){this.switchImages(s),this.resize();let a=r,l=n;this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=r,this.top=n,a+=this.width/2,l+=this.height/2):(this.left=r-this.width/2,this.top=n-this.height/2),this._drawRawCircle(e,a,l,o),e.save(),e.clip(),this._drawImageAtPosition(e,o),e.restore(),this._drawImageLabel(e,a,l,s,i),this.updateBoundingBox(r,n)}updateBoundingBox(e,r){this.options.shapeProperties.coordinateOrigin==="top-left"?(this.boundingBox.top=r,this.boundingBox.left=e,this.boundingBox.right=e+this.options.size*2,this.boundingBox.bottom=r+this.options.size*2):(this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size),this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}distanceToBorder(e){return e&&this.resize(e),this.width*.5}}class zl extends Tu{constructor(e,r,n){super(e,r,n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{size:this.options.size};if(this.needsRefresh(r,n)){var i,o;this.labelModule.getTextSize(e,r,n);const a=2*s.size;this.width=(i=this.customSizeWidth)!==null&&i!==void 0?i:a,this.height=(o=this.customSizeHeight)!==null&&o!==void 0?o:a,this.radius=.5*this.width}}_drawShape(e,r,n,s,i,o,a,l){return this.resize(e,o,a,l),this.left=s-this.width/2,this.top=i-this.height/2,this.initContextForDraw(e,l),eMe(r)(e,s,i,l.size),this.performFill(e,l),this.options.icon!==void 0&&this.options.icon.code!==void 0&&(e.font=(o?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",e.fillText(this.options.icon.code,s,i)),{drawExternalLabel:()=>{if(this.options.label!==void 0){this.labelModule.calculateLabelSize(e,o,a,s,i,"hanging");const u=i+.5*this.height+.5*this.labelModule.size.height;this.labelModule.draw(e,s,u,o,a,"hanging")}this.updateBoundingBox(s,i)}}}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}function $X(t,e){var r=lr(t);if(kl){var n=kl(t);e&&(n=ss(n).call(n,function(s){return Bl(t,s).enumerable})),r.push.apply(r,n)}return r}function q3e(t){for(var e=1;e<arguments.length;e++){var r,n,s=arguments[e]!=null?arguments[e]:{};e%2?Mt(r=$X(Object(s),!0)).call(r,function(i){Do(t,i,s[i])}):jl?xx(t,jl(s)):Mt(n=$X(Object(s))).call(n,function(i){wx(t,i,Bl(s,i))})}return t}class L3e extends zl{constructor(e,r,n,s){super(e,r,n,s),this.ctxRenderer=s}draw(e,r,n,s,i,o){this.resize(e,s,i,o),this.left=r-this.width/2,this.top=n-this.height/2,e.save();const a=this.ctxRenderer({ctx:e,id:this.options.id,x:r,y:n,state:{selected:s,hover:i},style:q3e({},o),label:this.options.label});if(a.drawNode!=null&&a.drawNode(),e.restore(),a.drawExternalLabel){const l=a.drawExternalLabel;a.drawExternalLabel=()=>{e.save(),l(),e.restore()}}return a.nodeDimensions&&(this.customSizeWidth=a.nodeDimensions.width,this.customSizeHeight=a.nodeDimensions.height),a}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class B3e extends Tu{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n).width+this.margin.right+this.margin.left;this.width=i,this.height=i,this.radius=this.width/2}}draw(e,r,n,s,i,o){this.resize(e,s,i),this.left=r-this.width/2,this.top=n-this.height/2,this.initContextForDraw(e,o),Sle(e,r-this.width/2,n-this.height/2,this.width,this.height),this.performFill(e,o),this.updateBoundingBox(r,n,e,s,i),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,s,i)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let z3e=class extends zl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,s,i,o){return this._drawShape(e,"diamond",4,r,n,s,i,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class W3e extends zl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,s,i,o){return this._drawShape(e,"circle",2,r,n,s,i,o)}distanceToBorder(e){return e&&this.resize(e),this.options.size}}class FX extends Tu{constructor(e,r,n){super(e,r,n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const s=this.getDimensionsFromLabel(e,r,n);this.height=s.height*2,this.width=s.width+s.height,this.radius=.5*this.width}}draw(e,r,n,s,i,o){this.resize(e,s,i),this.left=r-this.width*.5,this.top=n-this.height*.5,this.initContextForDraw(e,o),BR(e,this.left,this.top,this.width,this.height),this.performFill(e,o),this.updateBoundingBox(r,n,e,s,i),this.labelModule.draw(e,r,n,s,i)}distanceToBorder(e,r){e&&this.resize(e);const n=this.width*.5,s=this.height*.5,i=Math.sin(r)*n,o=Math.cos(r)*s;return n*s/Math.sqrt(i*i+o*o)}}class V3e extends Tu{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){this.needsRefresh(r,n)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}draw(e,r,n,s,i,o){return this.resize(e,s,i),this.options.icon.size=this.options.icon.size||50,this.left=r-this.width/2,this.top=n-this.height/2,this._icon(e,r,n,s,i,o),{drawExternalLabel:()=>{this.options.label!==void 0&&this.labelModule.draw(e,this.left+this.iconSize.width/2+this.margin.left,n+this.height/2+5,s),this.updateBoundingBox(r,n)}}}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.icon.size*.5,this.boundingBox.left=e-this.options.icon.size*.5,this.boundingBox.right=e+this.options.icon.size*.5,this.boundingBox.bottom=r+this.options.icon.size*.5,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+5))}_icon(e,r,n,s,i,o){const a=Number(this.options.icon.size);this.options.icon.code!==void 0?(e.font=[this.options.icon.weight!=null?this.options.icon.weight:s?"bold":"",(this.options.icon.weight!=null&&s?5:0)+a+"px",this.options.icon.face].join(" "),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",this.enableShadow(e,o),e.fillText(this.options.icon.code,r,n),this.disableShadow(e,o)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let U3e=class extends b${constructor(e,r,n,s,i){super(e,r,n),this.setImages(s,i)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0){const i=this.options.size*2;this.width=i,this.height=i;return}this.needsRefresh(r,n)&&this._resizeImage()}draw(e,r,n,s,i,o){e.save(),this.switchImages(s),this.resize();let a=r,l=n;if(this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=r,this.top=n,a+=this.width/2,l+=this.height/2):(this.left=r-this.width/2,this.top=n-this.height/2),this.options.shapeProperties.useBorderWithImage===!0){const u=this.options.borderWidth,d=this.options.borderWidthSelected||2*this.options.borderWidth,h=(s?d:u)/this.body.view.scale;e.lineWidth=Math.min(this.width,h),e.beginPath();let f=s?this.options.color.highlight.border:i?this.options.color.hover.border:this.options.color.border,p=s?this.options.color.highlight.background:i?this.options.color.hover.background:this.options.color.background;o.opacity!==void 0&&(f=Gs(f,o.opacity),p=Gs(p,o.opacity)),e.strokeStyle=f,e.fillStyle=p,e.rect(this.left-.5*e.lineWidth,this.top-.5*e.lineWidth,this.width+e.lineWidth,this.height+e.lineWidth),bg(e).call(e),this.performStroke(e,o),e.closePath()}this._drawImageAtPosition(e,o),this._drawImageLabel(e,a,l,s,i),this.updateBoundingBox(r,n),e.restore()}updateBoundingBox(e,r){this.resize(),this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=e,this.top=r):(this.left=e-this.width/2,this.top=r-this.height/2),this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class H3e extends zl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,s,i,o){return this._drawShape(e,"square",2,r,n,s,i,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class K3e extends zl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,s,i,o){return this._drawShape(e,"hexagon",4,r,n,s,i,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class G3e extends zl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,s,i,o){return this._drawShape(e,"star",4,r,n,s,i,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class Y3e extends Tu{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){this.needsRefresh(r,n)&&(this.textSize=this.labelModule.getTextSize(e,r,n),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}draw(e,r,n,s,i,o){this.resize(e,s,i),this.left=r-this.width/2,this.top=n-this.height/2,this.enableShadow(e,o),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,s,i),this.disableShadow(e,o),this.updateBoundingBox(r,n,e,s,i)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let Q3e=class extends zl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,s,i,o){return this._drawShape(e,"triangle",3,r,n,s,i,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class X3e extends zl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,s,i,o){return this._drawShape(e,"triangleDown",3,r,n,s,i,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}function qX(t,e){var r=lr(t);if(kl){var n=kl(t);e&&(n=ss(n).call(n,function(s){return Bl(t,s).enumerable})),r.push.apply(r,n)}return r}function LX(t){for(var e=1;e<arguments.length;e++){var r,n,s=arguments[e]!=null?arguments[e]:{};e%2?Mt(r=qX(Object(s),!0)).call(r,function(i){Do(t,i,s[i])}):jl?xx(t,jl(s)):Mt(n=qX(Object(s))).call(n,function(i){wx(t,i,Bl(s,i))})}return t}class Ut{constructor(e,r,n,s,i,o){this.options=yl(i),this.globalOptions=i,this.defaultOptions=o,this.body=r,this.edges=[],this.id=void 0,this.imagelist=n,this.grouplist=s,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new Ad(this.body,this.options,!1),this.setOptions(e)}attachEdge(e){var r;Nt(r=this.edges).call(r,e)===-1&&this.edges.push(e)}detachEdge(e){var r;const n=Nt(r=this.edges).call(r,e);if(n!=-1){var s;Wo(s=this.edges).call(s,n,1)}}setOptions(e){const r=this.options.shape;if(!e)return;if(typeof e.color<"u"&&(this._localColor=e.color),e.id!==void 0&&(this.id=e.id),this.id===void 0)throw new Error("Node must have an id");Ut.checkMass(e,this.id),e.x!==void 0&&(e.x===null?(this.x=void 0,this.predefinedPosition=!1):(this.x=bi(e.x),this.predefinedPosition=!0)),e.y!==void 0&&(e.y===null?(this.y=void 0,this.predefinedPosition=!1):(this.y=bi(e.y),this.predefinedPosition=!0)),e.size!==void 0&&(this.baseSize=e.size),e.value!==void 0&&(e.value=Mce(e.value)),Ut.parseOptions(this.options,e,!0,this.globalOptions,this.grouplist);const n=[e,this.options,this.defaultOptions];return this.chooser=v$("node",n),this._load_images(),this.updateLabelModule(e),e.opacity!==void 0&&Ut.checkOpacity(e.opacity)&&(this.options.opacity=e.opacity),this.updateShape(r),e.hidden!==void 0||e.physics!==void 0}_load_images(){if((this.options.shape==="circularImage"||this.options.shape==="image")&&this.options.image===void 0)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(this.options.image!==void 0){if(this.imagelist===void 0)throw new Error("Internal Error: No images provided");if(typeof this.options.image=="string")this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(this.options.image.unselected===void 0)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),this.options.image.selected!==void 0?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}static checkOpacity(e){return 0<=e&&e<=1}static checkCoordinateOrigin(e){return e===void 0||e==="center"||e==="top-left"}static updateGroupOptions(e,r,n){var s;if(n===void 0)return;const i=e.group;if(r!==void 0&&r.group!==void 0&&i!==r.group)throw new Error("updateGroupOptions: group values in options don't match.");if(!(typeof i=="number"||typeof i=="string"&&i!=""))return;const a=n.get(i);a.opacity!==void 0&&r.opacity===void 0&&(Ut.checkOpacity(a.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+a.opacity),a.opacity=void 0));const l=ss(s=o3e(r)).call(s,u=>r[u]!=null);l.push("font"),L0(l,e,a),e.color=HR(e.color)}static parseOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0;if(L0(["color","fixed","shadow"],e,r,n),Ut.checkMass(r),e.opacity!==void 0&&(Ut.checkOpacity(e.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity),e.opacity=void 0)),r.opacity!==void 0&&(Ut.checkOpacity(r.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+r.opacity),r.opacity=void 0)),r.shapeProperties&&!Ut.checkCoordinateOrigin(r.shapeProperties.coordinateOrigin)&&console.error("Invalid option for node coordinateOrigin, found: "+r.shapeProperties.coordinateOrigin),Ws(e,r,"shadow",s),r.color!==void 0&&r.color!==null){const a=HR(r.color);mce(e.color,a)}else n===!0&&r.color===null&&(e.color=yl(s.color));r.fixed!==void 0&&r.fixed!==null&&(typeof r.fixed=="boolean"?(e.fixed.x=r.fixed,e.fixed.y=r.fixed):(r.fixed.x!==void 0&&typeof r.fixed.x=="boolean"&&(e.fixed.x=r.fixed.x),r.fixed.y!==void 0&&typeof r.fixed.y=="boolean"&&(e.fixed.y=r.fixed.y))),n===!0&&r.font===null&&(e.font=yl(s.font)),Ut.updateGroupOptions(e,r,i),r.scaling!==void 0&&Ws(e.scaling,r.scaling,"label",s.scaling)}getFormattingValues(){const e={color:this.options.color.background,opacity:this.options.opacity,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};if(this.selected||this.hover?this.chooser===!0?this.selected?(this.options.borderWidthSelected!=null?e.borderWidth=this.options.borderWidthSelected:e.borderWidth*=2,e.color=this.options.color.highlight.background,e.borderColor=this.options.color.highlight.border,e.shadow=this.options.shadow.enabled):this.hover&&(e.color=this.options.color.hover.background,e.borderColor=this.options.color.hover.border,e.shadow=this.options.shadow.enabled):typeof this.chooser=="function"&&(this.chooser(e,this.options.id,this.selected,this.hover),e.shadow===!1&&(e.shadowColor!==this.options.shadow.color||e.shadowSize!==this.options.shadow.size||e.shadowX!==this.options.shadow.x||e.shadowY!==this.options.shadow.y)&&(e.shadow=!0)):e.shadow=this.options.shadow.enabled,this.options.opacity!==void 0){const r=this.options.opacity;e.borderColor=Gs(e.borderColor,r),e.color=Gs(e.color,r),e.shadowColor=Gs(e.shadowColor,r)}return e}updateLabelModule(e){(this.options.label===void 0||this.options.label===null)&&(this.options.label=""),Ut.updateGroupOptions(this.options,LX(LX({},e),{},{color:e&&e.color||this._localColor||void 0}),this.grouplist);const r=this.grouplist.get(this.options.group,!1),n=[e,this.options,r,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,n),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}updateShape(e){if(e===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new D3e(this.options,this.body,this.labelModule);break;case"circle":this.shape=new $3e(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new F3e(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"custom":this.shape=new L3e(this.options,this.body,this.labelModule,this.options.ctxRenderer);break;case"database":this.shape=new B3e(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new z3e(this.options,this.body,this.labelModule);break;case"dot":this.shape=new W3e(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new FX(this.options,this.body,this.labelModule);break;case"icon":this.shape=new V3e(this.options,this.body,this.labelModule);break;case"image":this.shape=new U3e(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new H3e(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new K3e(this.options,this.body,this.labelModule);break;case"star":this.shape=new G3e(this.options,this.body,this.labelModule);break;case"text":this.shape=new Y3e(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new Q3e(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new X3e(this.options,this.body,this.labelModule);break;default:this.shape=new FX(this.options,this.body,this.labelModule);break}this.needsRefresh()}select(){this.selected=!0,this.needsRefresh()}unselect(){this.selected=!1,this.needsRefresh()}needsRefresh(){this.shape.refreshNeeded=!0}getTitle(){return this.options.title}distanceToBorder(e,r){return this.shape.distanceToBorder(e,r)}isFixed(){return this.options.fixed.x&&this.options.fixed.y}isSelected(){return this.selected}getValue(){return this.options.value}getLabelSize(){return this.labelModule.size()}setValueRange(e,r,n){if(this.options.value!==void 0){const s=this.options.scaling.customScalingFunction(e,r,n,this.options.value),i=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){const o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+s*o}this.options.size=this.options.scaling.min+s*i}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}draw(e){const r=this.getFormattingValues();return this.shape.draw(e,this.x,this.y,this.selected,this.hover,r)||{}}updateBoundingBox(e){this.shape.updateBoundingBox(this.x,this.y,e)}resize(e){const r=this.getFormattingValues();this.shape.resize(e,this.selected,this.hover,r)}getItemsOnPoint(e){const r=[];return this.labelModule.visible()&&XR(this.labelModule.getSize(),e)&&r.push({nodeId:this.id,labelId:0}),XR(this.shape.boundingBox,e)&&r.push({nodeId:this.id}),r}isOverlappingWith(e){return this.shape.left<e.right&&this.shape.left+this.shape.width>e.left&&this.shape.top<e.bottom&&this.shape.top+this.shape.height>e.top}isBoundingBoxOverlappingWith(e){return this.shape.boundingBox.left<e.right&&this.shape.boundingBox.right>e.left&&this.shape.boundingBox.top<e.bottom&&this.shape.boundingBox.bottom>e.top}static checkMass(e,r){if(e.mass!==void 0&&e.mass<=0){let n="";r!==void 0&&(n=" in node id: "+r),console.error("%cNegative or zero mass disallowed"+n+", setting mass to 1.",bce),e.mass=1}}}class J3e{constructor(e,r,n,s){var i;if(this.body=e,this.images=r,this.groups=n,this.layoutEngine=s,this.body.functions.createNode=ae(i=this.create).call(i,this),this.nodesListeners={add:(o,a)=>{this.add(a.items)},update:(o,a)=>{this.update(a.items,a.data,a.oldData)},remove:(o,a)=>{this.remove(a.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:void 0,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},opacity:void 0,fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(o,a,l,u){if(a===o)return .5;{const d=1/(a-o);return Math.max(0,(u-o)*d)}}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1,coordinateOrigin:"center"},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=yl(this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e,r;this.body.emitter.on("refreshNodes",ae(e=this.refresh).call(e,this)),this.body.emitter.on("refresh",ae(r=this.refresh).call(r,this)),this.body.emitter.on("destroy",()=>{st(this.nodesListeners,(n,s)=>{this.body.data.nodes&&this.body.data.nodes.off(s,n)}),delete this.body.functions.createNode,delete this.nodesListeners.add,delete this.nodesListeners.update,delete this.nodesListeners.remove,delete this.nodesListeners})}setOptions(e){if(e!==void 0){if(Ut.parseOptions(this.options,e),e.opacity!==void 0&&(QR(e.opacity)||!fc(e.opacity)||e.opacity<0||e.opacity>1?console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity):this.options.opacity=e.opacity),e.shape!==void 0)for(const r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&this.body.nodes[r].updateShape();if(typeof e.font<"u"||typeof e.widthConstraint<"u"||typeof e.heightConstraint<"u")for(const r of lr(this.body.nodes))this.body.nodes[r].updateLabelModule(),this.body.nodes[r].needsRefresh();if(e.size!==void 0)for(const r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&this.body.nodes[r].needsRefresh();(e.hidden!==void 0||e.physics!==void 0)&&this.body.emitter.emit("_dataChanged")}}setData(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.data.nodes;if(fle("id",e))this.body.data.nodes=e;else if(hr(e))this.body.data.nodes=new xh,this.body.data.nodes.add(e);else if(!e)this.body.data.nodes=new xh;else throw new TypeError("Array or DataSet expected");if(n&&st(this.nodesListeners,function(s,i){n.off(i,s)}),this.body.nodes={},this.body.data.nodes){const s=this;st(this.nodesListeners,function(o,a){s.body.data.nodes.on(a,o)});const i=this.body.data.nodes.getIds();this.add(i,!0)}r===!1&&this.body.emitter.emit("_dataChanged")}add(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n;const s=[];for(let i=0;i<e.length;i++){n=e[i];const o=this.body.data.nodes.get(n),a=this.create(o);s.push(a),this.body.nodes[n]=a}this.layoutEngine.positionInitially(s),r===!1&&this.body.emitter.emit("_dataChanged")}update(e,r,n){const s=this.body.nodes;let i=!1;for(let o=0;o<e.length;o++){const a=e[o];let l=s[a];const u=r[o];l!==void 0?l.setOptions(u)&&(i=!0):(i=!0,l=this.create(u),s[a]=l)}!i&&n!==void 0&&(i=a5e(r).call(r,function(o,a){const l=n[a];return l&&l.level!==o.level})),i===!0?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}remove(e){const r=this.body.nodes;for(let n=0;n<e.length;n++){const s=e[n];delete r[s]}this.body.emitter.emit("_dataChanged")}create(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ut;return new r(e,this.body,this.images,this.groups,this.options,this.defaultOptions)}refresh(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;st(this.body.nodes,(r,n)=>{const s=this.body.data.nodes.get(n);s!==void 0&&(e===!0&&r.setOptions({x:null,y:null}),r.setOptions({fixed:!1}),r.setOptions(s))})}getPositions(e){const r={};if(e!==void 0){if(hr(e)===!0){for(let n=0;n<e.length;n++)if(this.body.nodes[e[n]]!==void 0){const s=this.body.nodes[e[n]];r[e[n]]={x:Math.round(s.x),y:Math.round(s.y)}}}else if(this.body.nodes[e]!==void 0){const n=this.body.nodes[e];r[e]={x:Math.round(n.x),y:Math.round(n.y)}}}else for(let n=0;n<this.body.nodeIndices.length;n++){const s=this.body.nodes[this.body.nodeIndices[n]];r[this.body.nodeIndices[n]]={x:Math.round(s.x),y:Math.round(s.y)}}return r}getPosition(e){if(e==null)throw new TypeError("No id was specified for getPosition method.");if(this.body.nodes[e]==null)throw new ReferenceError("NodeId provided for getPosition does not exist. Provided: ".concat(e));return{x:Math.round(this.body.nodes[e].x),y:Math.round(this.body.nodes[e].y)}}storePositions(){const e=[],r=this.body.data.nodes.getDataSet();for(const n of r.get()){const s=n.id,i=this.body.nodes[s],o=Math.round(i.x),a=Math.round(i.y);(n.x!==o||n.y!==a)&&e.push({id:s,x:o,y:a})}r.update(e)}getBoundingBox(e){if(this.body.nodes[e]!==void 0)return this.body.nodes[e].shape.boundingBox}getConnectedNodes(e,r){const n=[];if(this.body.nodes[e]!==void 0){const s=this.body.nodes[e],i={};for(let o=0;o<s.edges.length;o++){const a=s.edges[o];r!=="to"&&a.toId==s.id?i[a.fromId]===void 0&&(n.push(a.fromId),i[a.fromId]=!0):r!=="from"&&a.fromId==s.id&&i[a.toId]===void 0&&(n.push(a.toId),i[a.toId]=!0)}}return n}getConnectedEdges(e){const r=[];if(this.body.nodes[e]!==void 0){const n=this.body.nodes[e];for(let s=0;s<n.edges.length;s++)r.push(n.edges[s].id)}else console.error("NodeId provided for getConnectedEdges does not exist. Provided: ",e);return r}moveNode(e,r,n){this.body.nodes[e]!==void 0?(this.body.nodes[e].x=Number(r),this.body.nodes[e].y=Number(n),Vo(()=>{this.body.emitter.emit("startSimulation")},0)):console.error("Node id supplied to moveNode does not exist. Provided: ",e)}}var BX={},zX;function Z3e(){if(zX)return BX;zX=1;var t=Me(),e=Math.hypot,r=Math.abs,n=Math.sqrt,s=!!e&&e(1/0,NaN)!==1/0;return t({target:"Math",stat:!0,arity:2,forced:s},{hypot:function(o,a){for(var l=0,u=0,d=arguments.length,h=0,f,p;u<d;)f=r(arguments[u++]),h<f?(p=h/f,l=l*p*p+1,h=f):f>0?(p=f/h,l+=p*p):l+=f;return h===1/0?1/0:h*n(l)}}),BX}var _O,WX;function eFe(){if(WX)return _O;WX=1,Z3e();var t=jt();return _O=t.Math.hypot,_O}var NO,VX;function tFe(){if(VX)return NO;VX=1;var t=eFe();return NO=t,NO}var CO,UX;function rFe(){return UX||(UX=1,CO=tFe()),CO}var nFe=rFe(),sFe=Ve(nFe);class vr{static transform(e,r){hr(e)||(e=[e]);const n=r.point.x,s=r.point.y,i=r.angle,o=r.length;for(let a=0;a<e.length;++a){const l=e[a],u=l.x*Math.cos(i)-l.y*Math.sin(i),d=l.x*Math.sin(i)+l.y*Math.cos(i);l.x=n+o*u,l.y=s+o*d}}static drawPath(e,r){e.beginPath(),e.moveTo(r[0].x,r[0].y);for(let n=1;n<r.length;++n)e.lineTo(r[n].x,r[n].y);e.closePath()}}let iFe=class extends vr{static draw(e,r){if(r.image){e.save(),e.translate(r.point.x,r.point.y),e.rotate(Math.PI/2+r.angle);const n=r.imageWidth!=null?r.imageWidth:r.image.width,s=r.imageHeight!=null?r.imageHeight:r.image.height;r.image.drawImageAtPosition(e,1,-n/2,0,n,s),e.restore()}return!1}};class oFe extends vr{static draw(e,r){const n=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];return vr.transform(n,r),vr.drawPath(e,n),!0}}class aFe{static draw(e,r){const n=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];return vr.transform(n,r),vr.drawPath(e,n),!0}}class lFe{static draw(e,r){const n={x:-.4,y:0};vr.transform(n,r),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";const s=Math.PI,i=r.angle-s/2,o=r.angle+s/2;return e.beginPath(),e.arc(n.x,n.y,r.length*.4,i,o,!1),e.stroke(),!0}}class cFe{static draw(e,r){const n={x:-.3,y:0};vr.transform(n,r),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";const s=Math.PI,i=r.angle+s/2,o=r.angle+3*s/2;return e.beginPath(),e.arc(n.x,n.y,r.length*.4,i,o,!1),e.stroke(),!0}}class uFe{static draw(e,r){const n=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];return vr.transform(n,r),vr.drawPath(e,n),!0}}class dFe{static draw(e,r){const n=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];return vr.transform(n,r),vr.drawPath(e,n),!0}}class hFe{static draw(e,r){const n={x:-.4,y:0};return vr.transform(n,r),HD(e,n.x,n.y,r.length*.4),!0}}class fFe{static draw(e,r){const n=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];return vr.transform(n,r),vr.drawPath(e,n),!0}}class pFe{static draw(e,r){const n=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];return vr.transform(n,r),vr.drawPath(e,n),!0}}class mFe{static draw(e,r){const n=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];return vr.transform(n,r),vr.drawPath(e,n),!0}}class gFe{static draw(e,r){const n=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];return vr.transform(n,r),vr.drawPath(e,n),!0}}class $ce{static draw(e,r){let n;switch(r.type&&(n=r.type.toLowerCase()),n){case"image":return iFe.draw(e,r);case"circle":return hFe.draw(e,r);case"box":return pFe.draw(e,r);case"crow":return aFe.draw(e,r);case"curve":return lFe.draw(e,r);case"diamond":return mFe.draw(e,r);case"inv_curve":return cFe.draw(e,r);case"triangle":return uFe.draw(e,r);case"inv_triangle":return dFe.draw(e,r);case"bar":return fFe.draw(e,r);case"vee":return gFe.draw(e,r);case"arrow":default:return oFe.draw(e,r)}}}function HX(t,e){var r=lr(t);if(kl){var n=kl(t);e&&(n=ss(n).call(n,function(s){return Bl(t,s).enumerable})),r.push.apply(r,n)}return r}function KX(t){for(var e=1;e<arguments.length;e++){var r,n,s=arguments[e]!=null?arguments[e]:{};e%2?Mt(r=HX(Object(s),!0)).call(r,function(i){Do(t,i,s[i])}):jl?xx(t,jl(s)):Mt(n=HX(Object(s))).call(n,function(i){wx(t,i,Bl(s,i))})}return t}class Fce{constructor(e,r,n){Do(this,"color",{}),Do(this,"colorDirty",!0),Do(this,"hoverWidth",1.5),Do(this,"selectionWidth",2),this._body=r,this._labelModule=n,this.setOptions(e),this.fromPoint=this.from,this.toPoint=this.to}connect(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to]}cleanup(){return!1}setOptions(e){this.options=e,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.id=this.options.id}drawLine(e,r,n,s){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.getViaNode();e.strokeStyle=this.getColor(e,r),e.lineWidth=r.width,r.dashes!==!1?this._drawDashedLine(e,r,i):this._drawLine(e,r,i)}_drawLine(e,r,n,s,i){if(this.from!=this.to)this._line(e,r,n,s,i);else{const[o,a,l]=this._getCircleData(e);this._circle(e,r,o,a,l)}}_drawDashedLine(e,r,n,s,i){e.lineCap="round";const o=hr(r.dashes)?r.dashes:[5,5];if(e.setLineDash!==void 0){if(e.save(),e.setLineDash(o),e.lineDashOffset=0,this.from!=this.to)this._line(e,r,n);else{const[a,l,u]=this._getCircleData(e);this._circle(e,r,a,l,u)}e.setLineDash([0]),e.lineDashOffset=0,e.restore()}else{if(this.from!=this.to)Ele(e,this.from.x,this.from.y,this.to.x,this.to.y,o);else{const[a,l,u]=this._getCircleData(e);this._circle(e,r,a,l,u)}this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}}findBorderPosition(e,r,n){return this.from!=this.to?this._findBorderPosition(e,r,n):this._findBorderPositionCircle(e,r,n)}findBorderPositions(e){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,e),to:this._findBorderPosition(this.to,e)};{var r;const[n,s]=Hi(r=this._getCircleData(e)).call(r,0,2);return{from:this._findBorderPositionCircle(this.from,e,{x:n,y:s,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,e,{x:n,y:s,low:.6,high:.8,direction:1})}}}_getCircleData(e){const r=this.options.selfReference.size;e!==void 0&&this.from.shape.width===void 0&&this.from.shape.resize(e);const n=Ace(e,this.options.selfReference.angle,r,this.from);return[n.x,n.y,r]}_pointOnCircle(e,r,n,s){const i=s*2*Math.PI;return{x:e+n*Math.cos(i),y:r-n*Math.sin(i)}}_findBorderPositionCircle(e,r,n){const s=n.x,i=n.y;let o=n.low,a=n.high;const l=n.direction,u=10,d=this.options.selfReference.size,h=.05;let f,p=(o+a)*.5,m=0;this.options.arrowStrikethrough===!0&&(l===-1?m=this.options.endPointOffset.from:l===1&&(m=this.options.endPointOffset.to));let g=0;do{p=(o+a)*.5,f=this._pointOnCircle(s,i,d,p);const y=Math.atan2(e.y-f.y,e.x-f.x),v=e.distanceToBorder(r,y)+m,b=Math.sqrt(Math.pow(f.x-e.x,2)+Math.pow(f.y-e.y,2)),w=v-b;if(Math.abs(w)<h)break;w>0?l>0?o=p:a=p:l>0?a=p:o=p,++g}while(o<=a&&g<u);return KX(KX({},f),{},{t:p})}getLineWidth(e,r){return e===!0?Math.max(this.selectionWidth,.3/this._body.view.scale):r===!0?Math.max(this.hoverWidth,.3/this._body.view.scale):Math.max(this.options.width,.3/this._body.view.scale)}getColor(e,r){if(r.inheritsColor!==!1){if(r.inheritsColor==="both"&&this.from.id!==this.to.id){const n=e.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y);let s=this.from.options.color.highlight.border,i=this.to.options.color.highlight.border;return this.from.selected===!1&&this.to.selected===!1?(s=Gs(this.from.options.color.border,r.opacity),i=Gs(this.to.options.color.border,r.opacity)):this.from.selected===!0&&this.to.selected===!1?i=this.to.options.color.border:this.from.selected===!1&&this.to.selected===!0&&(s=this.from.options.color.border),n.addColorStop(0,s),n.addColorStop(1,i),n}return r.inheritsColor==="to"?Gs(this.to.options.color.border,r.opacity):Gs(this.from.options.color.border,r.opacity)}else return Gs(r.color,r.opacity)}_circle(e,r,n,s,i){this.enableShadow(e,r);let o=0,a=Math.PI*2;if(!this.options.selfReference.renderBehindTheNode){const l=this.options.selfReference.angle,u=this.options.selfReference.angle+Math.PI,d=this._findBorderPositionCircle(this.from,e,{x:n,y:s,low:l,high:u,direction:-1}),h=this._findBorderPositionCircle(this.from,e,{x:n,y:s,low:l,high:u,direction:1});o=Math.atan2(d.y-s,d.x-n),a=Math.atan2(h.y-s,h.x-n)}e.beginPath(),e.arc(n,s,i,o,a,!1),e.stroke(),this.disableShadow(e,r)}getDistanceToEdge(e,r,n,s,i,o){if(this.from!=this.to)return this._getDistanceToEdge(e,r,n,s,i,o);{const[a,l,u]=this._getCircleData(void 0),d=a-i,h=l-o;return Math.abs(Math.sqrt(d*d+h*h)-u)}}_getDistanceToLine(e,r,n,s,i,o){const a=n-e,l=s-r,u=a*a+l*l;let d=((i-e)*a+(o-r)*l)/u;d>1?d=1:d<0&&(d=0);const h=e+d*a,f=r+d*l,p=h-i,m=f-o;return Math.sqrt(p*p+m*m)}getArrowData(e,r,n,s,i,o){let a,l,u,d,h,f,p;const m=o.width;r==="from"?(u=this.from,d=this.to,h=o.fromArrowScale<0,f=Math.abs(o.fromArrowScale),p=o.fromArrowType):r==="to"?(u=this.to,d=this.from,h=o.toArrowScale<0,f=Math.abs(o.toArrowScale),p=o.toArrowType):(u=this.to,d=this.from,h=o.middleArrowScale<0,f=Math.abs(o.middleArrowScale),p=o.middleArrowType);const g=15*f+3*m;if(u!=d){const w=sFe(u.x-d.x,u.y-d.y),x=g/w;if(r!=="middle")if(this.options.smooth.enabled===!0){const S=this._findBorderPosition(u,e,{via:n}),E=this.getPoint(S.t+x*(r==="from"?1:-1),n);a=Math.atan2(S.y-E.y,S.x-E.x),l=S}else a=Math.atan2(u.y-d.y,u.x-d.x),l=this._findBorderPosition(u,e);else{const S=(h?-x:x)/2,E=this.getPoint(.5+S,n),N=this.getPoint(.5-S,n);a=Math.atan2(E.y-N.y,E.x-N.x),l=this.getPoint(.5,n)}}else{const[w,x,S]=this._getCircleData(e);if(r==="from"){const E=this.options.selfReference.angle,N=this.options.selfReference.angle+Math.PI,_=this._findBorderPositionCircle(this.from,e,{x:w,y:x,low:E,high:N,direction:-1});a=_.t*-2*Math.PI+1.5*Math.PI+.1*Math.PI,l=_}else if(r==="to"){const E=this.options.selfReference.angle,N=this.options.selfReference.angle+Math.PI,_=this._findBorderPositionCircle(this.from,e,{x:w,y:x,low:E,high:N,direction:1});a=_.t*-2*Math.PI+1.5*Math.PI-1.1*Math.PI,l=_}else{const E=this.options.selfReference.angle/(2*Math.PI);l=this._pointOnCircle(w,x,S,E),a=E*-2*Math.PI+1.5*Math.PI+.1*Math.PI}}const y=l.x-g*.9*Math.cos(a),v=l.y-g*.9*Math.sin(a);return{point:l,core:{x:y,y:v},angle:a,length:g,type:p}}drawArrowHead(e,r,n,s,i){e.strokeStyle=this.getColor(e,r),e.fillStyle=e.strokeStyle,e.lineWidth=r.width,$ce.draw(e,i)&&(this.enableShadow(e,r),bg(e).call(e),this.disableShadow(e,r))}enableShadow(e,r){r.shadow===!0&&(e.shadowColor=r.shadowColor,e.shadowBlur=r.shadowSize,e.shadowOffsetX=r.shadowX,e.shadowOffsetY=r.shadowY)}disableShadow(e,r){r.shadow===!0&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}drawBackground(e,r){if(r.background!==!1){const n={strokeStyle:e.strokeStyle,lineWidth:e.lineWidth,dashes:e.dashes};e.strokeStyle=r.backgroundColor,e.lineWidth=r.backgroundSize,this.setStrokeDashed(e,r.backgroundDashes),e.stroke(),e.strokeStyle=n.strokeStyle,e.lineWidth=n.lineWidth,e.dashes=n.dashes,this.setStrokeDashed(e,r.dashes)}}setStrokeDashed(e,r){if(r!==!1)if(e.setLineDash!==void 0){const n=hr(r)?r:[5,5];e.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.");else e.setLineDash!==void 0?e.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}function GX(t,e){var r=lr(t);if(kl){var n=kl(t);e&&(n=ss(n).call(n,function(s){return Bl(t,s).enumerable})),r.push.apply(r,n)}return r}function YX(t){for(var e=1;e<arguments.length;e++){var r,n,s=arguments[e]!=null?arguments[e]:{};e%2?Mt(r=GX(Object(s),!0)).call(r,function(i){Do(t,i,s[i])}):jl?xx(t,jl(s)):Mt(n=GX(Object(s))).call(n,function(i){wx(t,i,Bl(s,i))})}return t}class x$ extends Fce{constructor(e,r,n){super(e,r,n)}_findBorderPositionBezier(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this._getViaCoordinates();const s=10,i=.2;let o=!1,a=1,l=0,u=this.to,d,h,f=this.options.endPointOffset?this.options.endPointOffset.to:0;e.id===this.from.id&&(u=this.from,o=!0,f=this.options.endPointOffset?this.options.endPointOffset.from:0),this.options.arrowStrikethrough===!1&&(f=0);let p=0;do{h=(l+a)*.5,d=this.getPoint(h,n);const m=Math.atan2(u.y-d.y,u.x-d.x),g=u.distanceToBorder(r,m)+f,y=Math.sqrt(Math.pow(d.x-u.x,2)+Math.pow(d.y-u.y,2)),v=g-y;if(Math.abs(v)<i)break;v<0?o===!1?l=h:a=h:o===!1?a=h:l=h,++p}while(l<=a&&p<s);return YX(YX({},d),{},{t:h})}_getDistanceToBezierEdge(e,r,n,s,i,o,a){let l=1e9,u,d,h,f,p,m=e,g=r;for(d=1;d<10;d++)h=.1*d,f=Math.pow(1-h,2)*e+2*h*(1-h)*a.x+Math.pow(h,2)*n,p=Math.pow(1-h,2)*r+2*h*(1-h)*a.y+Math.pow(h,2)*s,d>0&&(u=this._getDistanceToLine(m,g,f,p,i,o),l=u<l?u:l),m=f,g=p;return l}_bezierCurve(e,r,n,s){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),n!=null&&n.x!=null?s!=null&&s.x!=null?e.bezierCurveTo(n.x,n.y,s.x,s.y,this.toPoint.x,this.toPoint.y):e.quadraticCurveTo(n.x,n.y,this.toPoint.x,this.toPoint.y):e.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(e,r),this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}getViaNode(){return this._getViaCoordinates()}}class QX extends x${constructor(e,r,n){super(e,r,n),Do(this,"via",this.via),this._boundFunction=()=>{this.positionBezierNode()},this._body.emitter.on("_repositionBezierNodes",this._boundFunction)}setOptions(e){super.setOptions(e);let r=!1;this.options.physics!==e.physics&&(r=!0),this.options=e,this.id=this.options.id,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.setupSupportNode(),this.connect(),r===!0&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}connect(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.from===void 0||this.to===void 0||this.options.physics===!1?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}cleanup(){return this._body.emitter.off("_repositionBezierNodes",this._boundFunction),this.via!==void 0?(delete this._body.nodes[this.via.id],this.via=void 0,!0):!1}setupSupportNode(){if(this.via===void 0){const e="edgeId:"+this.id,r=this._body.functions.createNode({id:e,shape:"circle",physics:!0,hidden:!0});this._body.nodes[e]=r,this.via=r,this.via.parentEdgeId=this.id,this.positionBezierNode()}}positionBezierNode(){this.via!==void 0&&this.from!==void 0&&this.to!==void 0?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):this.via!==void 0&&(this.via.x=0,this.via.y=0)}_line(e,r,n){this._bezierCurve(e,r,n)}_getViaCoordinates(){return this.via}getViaNode(){return this.via}getPoint(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.via;if(this.from===this.to){const[n,s,i]=this._getCircleData(),o=2*Math.PI*(1-e);return{x:n+i*Math.sin(o),y:s+i-i*(1-Math.cos(o))}}else return{x:Math.pow(1-e,2)*this.fromPoint.x+2*e*(1-e)*r.x+Math.pow(e,2)*this.toPoint.x,y:Math.pow(1-e,2)*this.fromPoint.y+2*e*(1-e)*r.y+Math.pow(e,2)*this.toPoint.y}}_findBorderPosition(e,r){return this._findBorderPositionBezier(e,r,this.via)}_getDistanceToEdge(e,r,n,s,i,o){return this._getDistanceToBezierEdge(e,r,n,s,i,o,this.via)}}class XX extends x${constructor(e,r,n){super(e,r,n)}_line(e,r,n){this._bezierCurve(e,r,n)}getViaNode(){return this._getViaCoordinates()}_getViaCoordinates(){const e=this.options.smooth.roundness,r=this.options.smooth.type;let n=Math.abs(this.from.x-this.to.x),s=Math.abs(this.from.y-this.to.y);if(r==="discrete"||r==="diagonalCross"){let i,o;n<=s?i=o=e*s:i=o=e*n,this.from.x>this.to.x&&(i=-i),this.from.y>=this.to.y&&(o=-o);let a=this.from.x+i,l=this.from.y+o;return r==="discrete"&&(n<=s?a=n<e*s?this.from.x:a:l=s<e*n?this.from.y:l),{x:a,y:l}}else if(r==="straightCross"){let i=(1-e)*n,o=(1-e)*s;return n<=s?(i=0,this.from.y<this.to.y&&(o=-o)):(this.from.x<this.to.x&&(i=-i),o=0),{x:this.to.x+i,y:this.to.y+o}}else if(r==="horizontal"){let i=(1-e)*n;return this.from.x<this.to.x&&(i=-i),{x:this.to.x+i,y:this.from.y}}else if(r==="vertical"){let i=(1-e)*s;return this.from.y<this.to.y&&(i=-i),{x:this.from.x,y:this.to.y+i}}else if(r==="curvedCW"){n=this.to.x-this.from.x,s=this.from.y-this.to.y;const i=Math.sqrt(n*n+s*s),o=Math.PI,l=(Math.atan2(s,n)+(e*.5+.5)*o)%(2*o);return{x:this.from.x+(e*.5+.5)*i*Math.sin(l),y:this.from.y+(e*.5+.5)*i*Math.cos(l)}}else if(r==="curvedCCW"){n=this.to.x-this.from.x,s=this.from.y-this.to.y;const i=Math.sqrt(n*n+s*s),o=Math.PI,l=(Math.atan2(s,n)+(-e*.5+.5)*o)%(2*o);return{x:this.from.x+(e*.5+.5)*i*Math.sin(l),y:this.from.y+(e*.5+.5)*i*Math.cos(l)}}else{let i,o;n<=s?i=o=e*s:i=o=e*n,this.from.x>this.to.x&&(i=-i),this.from.y>=this.to.y&&(o=-o);let a=this.from.x+i,l=this.from.y+o;return n<=s?this.from.x<=this.to.x?a=this.to.x<a?this.to.x:a:a=this.to.x>a?this.to.x:a:this.from.y>=this.to.y?l=this.to.y>l?this.to.y:l:l=this.to.y<l?this.to.y:l,{x:a,y:l}}}_findBorderPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._findBorderPositionBezier(e,r,n.via)}_getDistanceToEdge(e,r,n,s,i,o){let a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(e,r,n,s,i,o,a)}getPoint(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates();const n=e,s=Math.pow(1-n,2)*this.fromPoint.x+2*n*(1-n)*r.x+Math.pow(n,2)*this.toPoint.x,i=Math.pow(1-n,2)*this.fromPoint.y+2*n*(1-n)*r.y+Math.pow(n,2)*this.toPoint.y;return{x:s,y:i}}}class yFe extends x${constructor(e,r,n){super(e,r,n)}_getDistanceToBezierEdge2(e,r,n,s,i,o,a,l){let u=1e9,d=e,h=r;const f=[0,0,0,0];for(let p=1;p<10;p++){const m=.1*p;f[0]=Math.pow(1-m,3),f[1]=3*m*Math.pow(1-m,2),f[2]=3*Math.pow(m,2)*(1-m),f[3]=Math.pow(m,3);const g=f[0]*e+f[1]*a.x+f[2]*l.x+f[3]*n,y=f[0]*r+f[1]*a.y+f[2]*l.y+f[3]*s;if(p>0){const v=this._getDistanceToLine(d,h,g,y,i,o);u=v<u?v:u}d=g,h=y}return u}}class JX extends yFe{constructor(e,r,n){super(e,r,n)}_line(e,r,n){const s=n[0],i=n[1];this._bezierCurve(e,r,s,i)}_getViaCoordinates(){const e=this.from.x-this.to.x,r=this.from.y-this.to.y;let n,s,i,o;const a=this.options.smooth.roundness;return(Math.abs(e)>Math.abs(r)||this.options.smooth.forceDirection===!0||this.options.smooth.forceDirection==="horizontal")&&this.options.smooth.forceDirection!=="vertical"?(s=this.from.y,o=this.to.y,n=this.from.x-a*e,i=this.to.x+a*e):(s=this.from.y-a*r,o=this.to.y+a*r,n=this.from.x,i=this.to.x),[{x:n,y:s},{x:i,y:o}]}getViaNode(){return this._getViaCoordinates()}_findBorderPosition(e,r){return this._findBorderPositionBezier(e,r)}_getDistanceToEdge(e,r,n,s,i,o){let[a,l]=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge2(e,r,n,s,i,o,a,l)}getPoint(e){let[r,n]=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates();const s=e,i=[Math.pow(1-s,3),3*s*Math.pow(1-s,2),3*Math.pow(s,2)*(1-s),Math.pow(s,3)],o=i[0]*this.fromPoint.x+i[1]*r.x+i[2]*n.x+i[3]*this.toPoint.x,a=i[0]*this.fromPoint.y+i[1]*r.y+i[2]*n.y+i[3]*this.toPoint.y;return{x:o,y:a}}}class ZX extends Fce{constructor(e,r,n){super(e,r,n)}_line(e,r){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),e.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}getViaNode(){}getPoint(e){return{x:(1-e)*this.fromPoint.x+e*this.toPoint.x,y:(1-e)*this.fromPoint.y+e*this.toPoint.y}}_findBorderPosition(e,r){let n=this.to,s=this.from;e.id===this.from.id&&(n=this.from,s=this.to);const i=Math.atan2(n.y-s.y,n.x-s.x),o=n.x-s.x,a=n.y-s.y,l=Math.sqrt(o*o+a*a),u=e.distanceToBorder(r,i),d=(l-u)/l;return{x:(1-d)*s.x+d*n.x,y:(1-d)*s.y+d*n.y,t:0}}_getDistanceToEdge(e,r,n,s,i,o){return this._getDistanceToLine(e,r,n,s,i,o)}}class vl{constructor(e,r,n,s,i){if(r===void 0)throw new Error("No body provided");this.options=yl(s),this.globalOptions=s,this.defaultOptions=i,this.body=r,this.imagelist=n,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new Ad(this.body,this.options,!0),this.setOptions(e)}setOptions(e){if(!e)return;let r=typeof e.physics<"u"&&this.options.physics!==e.physics||typeof e.hidden<"u"&&(this.options.hidden||!1)!==(e.hidden||!1)||typeof e.from<"u"&&this.options.from!==e.from||typeof e.to<"u"&&this.options.to!==e.to;vl.parseOptions(this.options,e,!0,this.globalOptions),e.id!==void 0&&(this.id=e.id),e.from!==void 0&&(this.fromId=e.from),e.to!==void 0&&(this.toId=e.to),e.title!==void 0&&(this.title=e.title),e.value!==void 0&&(e.value=Mce(e.value));const n=[e,this.options,this.defaultOptions];return this.chooser=v$("edge",n),this.updateLabelModule(e),r=this.updateEdgeType()||r,this._setInteractionWidths(),this.connect(),r}static parseOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(hf(["endPointOffset","arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","selfReference","to","title","value","width","font","chosen","widthConstraint"],e,r,n),r.endPointOffset!==void 0&&r.endPointOffset.from!==void 0&&(fc(r.endPointOffset.from)?e.endPointOffset.from=r.endPointOffset.from:(e.endPointOffset.from=s.endPointOffset.from!==void 0?s.endPointOffset.from:0,console.error("endPointOffset.from is not a valid number"))),r.endPointOffset!==void 0&&r.endPointOffset.to!==void 0&&(fc(r.endPointOffset.to)?e.endPointOffset.to=r.endPointOffset.to:(e.endPointOffset.to=s.endPointOffset.to!==void 0?s.endPointOffset.to:0,console.error("endPointOffset.to is not a valid number"))),z0(r.label)?e.label=r.label:z0(e.label)||(e.label=void 0),Ws(e,r,"smooth",s),Ws(e,r,"shadow",s),Ws(e,r,"background",s),r.dashes!==void 0&&r.dashes!==null?e.dashes=r.dashes:n===!0&&r.dashes===null&&(e.dashes=Mc(s.dashes)),r.scaling!==void 0&&r.scaling!==null?(r.scaling.min!==void 0&&(e.scaling.min=r.scaling.min),r.scaling.max!==void 0&&(e.scaling.max=r.scaling.max),Ws(e.scaling,r.scaling,"label",s.scaling)):n===!0&&r.scaling===null&&(e.scaling=Mc(s.scaling)),r.arrows!==void 0&&r.arrows!==null)if(typeof r.arrows=="string"){const a=r.arrows.toLowerCase();e.arrows.to.enabled=Nt(a).call(a,"to")!=-1,e.arrows.middle.enabled=Nt(a).call(a,"middle")!=-1,e.arrows.from.enabled=Nt(a).call(a,"from")!=-1}else if(typeof r.arrows=="object")Ws(e.arrows,r.arrows,"to",s.arrows),Ws(e.arrows,r.arrows,"middle",s.arrows),Ws(e.arrows,r.arrows,"from",s.arrows);else throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+vg(r.arrows));else n===!0&&r.arrows===null&&(e.arrows=Mc(s.arrows));if(r.color!==void 0&&r.color!==null){const a=Rd(r.color)?{color:r.color,highlight:r.color,hover:r.color,inherit:!1,opacity:1}:r.color,l=e.color;if(i)$t(l,s.color,!1,n);else for(const u in l)Object.prototype.hasOwnProperty.call(l,u)&&delete l[u];if(Rd(l))l.color=l,l.highlight=l,l.hover=l,l.inherit=!1,a.opacity===void 0&&(l.opacity=1);else{let u=!1;a.color!==void 0&&(l.color=a.color,u=!0),a.highlight!==void 0&&(l.highlight=a.highlight,u=!0),a.hover!==void 0&&(l.hover=a.hover,u=!0),a.inherit!==void 0&&(l.inherit=a.inherit),a.opacity!==void 0&&(l.opacity=Math.min(1,Math.max(0,a.opacity))),u===!0?l.inherit=!1:l.inherit===void 0&&(l.inherit="from")}}else n===!0&&r.color===null&&(e.color=yl(s.color));n===!0&&r.font===null&&(e.font=yl(s.font)),Object.prototype.hasOwnProperty.call(r,"selfReferenceSize")&&(console.warn("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),e.selfReference.size=r.selfReferenceSize)}getFormattingValues(){const e=this.options.arrows.to===!0||this.options.arrows.to.enabled===!0,r=this.options.arrows.from===!0||this.options.arrows.from.enabled===!0,n=this.options.arrows.middle===!0||this.options.arrows.middle.enabled===!0,s=this.options.color.inherit,i={toArrow:e,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,toArrowSrc:this.options.arrows.to.src,toArrowImageWidth:this.options.arrows.to.imageWidth,toArrowImageHeight:this.options.arrows.to.imageHeight,middleArrow:n,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,middleArrowSrc:this.options.arrows.middle.src,middleArrowImageWidth:this.options.arrows.middle.imageWidth,middleArrowImageHeight:this.options.arrows.middle.imageHeight,fromArrow:r,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,fromArrowSrc:this.options.arrows.from.src,fromArrowImageWidth:this.options.arrows.from.imageWidth,fromArrowImageHeight:this.options.arrows.from.imageHeight,arrowStrikethrough:this.options.arrowStrikethrough,color:s?void 0:this.options.color.color,inheritsColor:s,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover)if(this.chooser===!0){if(this.selected){const o=this.options.selectionWidth;typeof o=="function"?i.width=o(i.width):typeof o=="number"&&(i.width+=o),i.width=Math.max(i.width,.3/this.body.view.scale),i.color=this.options.color.highlight,i.shadow=this.options.shadow.enabled}else if(this.hover){const o=this.options.hoverWidth;typeof o=="function"?i.width=o(i.width):typeof o=="number"&&(i.width+=o),i.width=Math.max(i.width,.3/this.body.view.scale),i.color=this.options.color.hover,i.shadow=this.options.shadow.enabled}}else typeof this.chooser=="function"&&(this.chooser(i,this.options.id,this.selected,this.hover),i.color!==void 0&&(i.inheritsColor=!1),i.shadow===!1&&(i.shadowColor!==this.options.shadow.color||i.shadowSize!==this.options.shadow.size||i.shadowX!==this.options.shadow.x||i.shadowY!==this.options.shadow.y)&&(i.shadow=!0));else i.shadow=this.options.shadow.enabled,i.width=Math.max(i.width,.3/this.body.view.scale);return i}updateLabelModule(e){const r=[e,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,r),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}updateEdgeType(){const e=this.options.smooth;let r=!1,n=!0;return this.edgeType!==void 0&&((this.edgeType instanceof QX&&e.enabled===!0&&e.type==="dynamic"||this.edgeType instanceof JX&&e.enabled===!0&&e.type==="cubicBezier"||this.edgeType instanceof XX&&e.enabled===!0&&e.type!=="dynamic"&&e.type!=="cubicBezier"||this.edgeType instanceof ZX&&e.type.enabled===!1)&&(n=!1),n===!0&&(r=this.cleanup())),n===!0?e.enabled===!0?e.type==="dynamic"?(r=!0,this.edgeType=new QX(this.options,this.body,this.labelModule)):e.type==="cubicBezier"?this.edgeType=new JX(this.options,this.body,this.labelModule):this.edgeType=new XX(this.options,this.body,this.labelModule):this.edgeType=new ZX(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),r}connect(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=this.from!==void 0&&this.to!==void 0,this.connected===!0?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}disconnect(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}getTitle(){return this.title}isSelected(){return this.selected}getValue(){return this.options.value}setValueRange(e,r,n){if(this.options.value!==void 0){const s=this.options.scaling.customScalingFunction(e,r,n,this.options.value),i=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){const o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+s*o}this.options.width=this.options.scaling.min+s*i}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}_setInteractionWidths(){typeof this.options.hoverWidth=="function"?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,typeof this.options.selectionWidth=="function"?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}draw(e){const r=this.getFormattingValues();if(r.hidden)return;const n=this.edgeType.getViaNode();this.edgeType.drawLine(e,r,this.selected,this.hover,n),this.drawLabel(e,n)}drawArrows(e){const r=this.getFormattingValues();if(r.hidden)return;const n=this.edgeType.getViaNode(),s={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,r.fromArrow&&(s.from=this.edgeType.getArrowData(e,"from",n,this.selected,this.hover,r),r.arrowStrikethrough===!1&&(this.edgeType.fromPoint=s.from.core),r.fromArrowSrc&&(s.from.image=this.imagelist.load(r.fromArrowSrc)),r.fromArrowImageWidth&&(s.from.imageWidth=r.fromArrowImageWidth),r.fromArrowImageHeight&&(s.from.imageHeight=r.fromArrowImageHeight)),r.toArrow&&(s.to=this.edgeType.getArrowData(e,"to",n,this.selected,this.hover,r),r.arrowStrikethrough===!1&&(this.edgeType.toPoint=s.to.core),r.toArrowSrc&&(s.to.image=this.imagelist.load(r.toArrowSrc)),r.toArrowImageWidth&&(s.to.imageWidth=r.toArrowImageWidth),r.toArrowImageHeight&&(s.to.imageHeight=r.toArrowImageHeight)),r.middleArrow&&(s.middle=this.edgeType.getArrowData(e,"middle",n,this.selected,this.hover,r),r.middleArrowSrc&&(s.middle.image=this.imagelist.load(r.middleArrowSrc)),r.middleArrowImageWidth&&(s.middle.imageWidth=r.middleArrowImageWidth),r.middleArrowImageHeight&&(s.middle.imageHeight=r.middleArrowImageHeight)),r.fromArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,s.from),r.middleArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,s.middle),r.toArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,s.to)}drawLabel(e,r){if(this.options.label!==void 0){const n=this.from,s=this.to;this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(e,this.selected,this.hover);let i;if(n.id!=s.id){this.labelModule.pointToSelf=!1,i=this.edgeType.getPoint(.5,r),e.save();const o=this._getRotation(e);o.angle!=0&&(e.translate(o.x,o.y),e.rotate(o.angle)),this.labelModule.draw(e,i.x,i.y,this.selected,this.hover),e.restore()}else{this.labelModule.pointToSelf=!0;const o=Ace(e,this.options.selfReference.angle,this.options.selfReference.size,n);i=this._pointOnCircle(o.x,o.y,this.options.selfReference.size,this.options.selfReference.angle),this.labelModule.draw(e,i.x,i.y,this.selected,this.hover)}}}getItemsOnPoint(e){const r=[];if(this.labelModule.visible()){const s=this._getRotation();XR(this.labelModule.getSize(),e,s)&&r.push({edgeId:this.id,labelId:0})}const n={left:e.x,top:e.y};return this.isOverlappingWith(n)&&r.push({edgeId:this.id}),r}isOverlappingWith(e){if(this.connected){const n=this.from.x,s=this.from.y,i=this.to.x,o=this.to.y,a=e.left,l=e.top;return this.edgeType.getDistanceToEdge(n,s,i,o,a,l)<10}else return!1}_getRotation(e){const r=this.edgeType.getViaNode(),n=this.edgeType.getPoint(.5,r);e!==void 0&&this.labelModule.calculateLabelSize(e,this.selected,this.hover,n.x,n.y);const s={x:n.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible()||this.options.font.align==="horizontal")return s;const i=this.from.y-this.to.y,o=this.from.x-this.to.x;let a=Math.atan2(i,o);return(a<-1&&o<0||a>0&&o<0)&&(a+=Math.PI),s.angle=a,s}_pointOnCircle(e,r,n,s){return{x:e+n*Math.cos(s),y:r-n*Math.sin(s)}}select(){this.selected=!0}unselect(){this.selected=!1}cleanup(){return this.edgeType.cleanup()}remove(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}endPointsValid(){return this.body.nodes[this.fromId]!==void 0&&this.body.nodes[this.toId]!==void 0}}class vFe{constructor(e,r,n){var s;this.body=e,this.images=r,this.groups=n,this.body.functions.createEdge=ae(s=this.create).call(s,this),this.edgesListeners={add:(i,o)=>{this.add(o.items)},update:(i,o)=>{this.update(o.items)},remove:(i,o)=>{this.remove(o.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},endPointOffset:{from:0,to:0},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(i,o,a,l){if(o===i)return .5;{const u=1/(o-i);return Math.max(0,(l-i)*u)}}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},$t(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e=this,r,n;this.body.emitter.on("_forceDisableDynamicCurves",function(s){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;s==="dynamic"&&(s="continuous");let o=!1;for(const a in e.body.edges)if(Object.prototype.hasOwnProperty.call(e.body.edges,a)){const l=e.body.edges[a],u=e.body.data.edges.get(a);if(u!=null){const d=u.smooth;d!==void 0&&d.enabled===!0&&d.type==="dynamic"&&(s===void 0?l.setOptions({smooth:!1}):l.setOptions({smooth:{type:s}}),o=!0)}}i===!0&&o===!0&&e.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",()=>{this.reconnectEdges()}),this.body.emitter.on("refreshEdges",ae(r=this.refresh).call(r,this)),this.body.emitter.on("refresh",ae(n=this.refresh).call(n,this)),this.body.emitter.on("destroy",()=>{st(this.edgesListeners,(s,i)=>{this.body.data.edges&&this.body.data.edges.off(i,s)}),delete this.body.functions.createEdge,delete this.edgesListeners.add,delete this.edgesListeners.update,delete this.edgesListeners.remove,delete this.edgesListeners})}setOptions(e){if(e!==void 0){vl.parseOptions(this.options,e,!0,this.defaultOptions,!0);let r=!1;if(e.smooth!==void 0)for(const n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&(r=this.body.edges[n].updateEdgeType()||r);if(e.font!==void 0)for(const n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&this.body.edges[n].updateLabelModule();(e.hidden!==void 0||e.physics!==void 0||r===!0)&&this.body.emitter.emit("_dataChanged")}}setData(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.data.edges;if(fle("id",e))this.body.data.edges=e;else if(hr(e))this.body.data.edges=new xh,this.body.data.edges.add(e);else if(!e)this.body.data.edges=new xh;else throw new TypeError("Array or DataSet expected");if(n&&st(this.edgesListeners,(s,i)=>{n.off(i,s)}),this.body.edges={},this.body.data.edges){st(this.edgesListeners,(i,o)=>{this.body.data.edges.on(o,i)});const s=this.body.data.edges.getIds();this.add(s,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),r===!1&&this.body.emitter.emit("_dataChanged")}add(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.edges,s=this.body.data.edges;for(let i=0;i<e.length;i++){const o=e[i],a=n[o];a&&a.disconnect();const l=s.get(o,{showInternalIds:!0});n[o]=this.create(l)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),r===!1&&this.body.emitter.emit("_dataChanged")}update(e){const r=this.body.edges,n=this.body.data.edges;let s=!1;for(let i=0;i<e.length;i++){const o=e[i],a=n.get(o),l=r[o];l!==void 0?(l.disconnect(),s=l.setOptions(a)||s,l.connect()):(this.body.edges[o]=this.create(a),s=!0)}s===!0?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}remove(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.length===0)return;const n=this.body.edges;st(e,s=>{const i=n[s];i!==void 0&&i.remove()}),r&&this.body.emitter.emit("_dataChanged")}refresh(){st(this.body.edges,(e,r)=>{const n=this.body.data.edges.get(r);n!==void 0&&e.setOptions(n)})}create(e){return new vl(e,this.body,this.images,this.options,this.defaultOptions)}reconnectEdges(){let e;const r=this.body.nodes,n=this.body.edges;for(e in r)Object.prototype.hasOwnProperty.call(r,e)&&(r[e].edges=[]);for(e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const s=n[e];s.from=null,s.to=null,s.connect()}}getConnectedNodes(e){const r=[];if(this.body.edges[e]!==void 0){const n=this.body.edges[e];n.fromId!==void 0&&r.push(n.fromId),n.toId!==void 0&&r.push(n.toId)}return r}_updateState(){this._addMissingEdges(),this._removeInvalidEdges()}_removeInvalidEdges(){const e=[];st(this.body.edges,(r,n)=>{const s=this.body.nodes[r.toId],i=this.body.nodes[r.fromId];s!==void 0&&s.isCluster===!0||i!==void 0&&i.isCluster===!0||(s===void 0||i===void 0)&&e.push(n)}),this.remove(e,!1)}_addMissingEdges(){const e=this.body.data.edges;if(e==null)return;const r=this.body.edges,n=[];Mt(e).call(e,(s,i)=>{r[i]===void 0&&n.push(i)}),this.add(n,!0)}}class qce{constructor(e,r,n){this.body=e,this.physicsBody=r,this.barnesHutTree,this.setOptions(n),this._rng=yx("BARNES HUT SOLVER")}setOptions(e){this.options=e,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}solve(){if(this.options.gravitationalConstant!==0&&this.physicsBody.physicsNodeIndices.length>0){let e;const r=this.body.nodes,n=this.physicsBody.physicsNodeIndices,s=n.length,i=this._formBarnesHutTree(r,n);this.barnesHutTree=i;for(let o=0;o<s;o++)e=r[n[o]],e.options.mass>0&&this._getForceContributions(i.root,e)}}_getForceContributions(e,r){this._getForceContribution(e.children.NW,r),this._getForceContribution(e.children.NE,r),this._getForceContribution(e.children.SW,r),this._getForceContribution(e.children.SE,r)}_getForceContribution(e,r){if(e.childrenCount>0){const n=e.centerOfMass.x-r.x,s=e.centerOfMass.y-r.y,i=Math.sqrt(n*n+s*s);i*e.calcSize>this.thetaInversed?this._calculateForces(i,n,s,r,e):e.childrenCount===4?this._getForceContributions(e,r):e.children.data.id!=r.id&&this._calculateForces(i,n,s,r,e)}}_calculateForces(e,r,n,s,i){e===0&&(e=.1,r=e),this.overlapAvoidanceFactor<1&&s.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*s.shape.radius,e-s.shape.radius));const o=this.options.gravitationalConstant*i.mass*s.options.mass/Math.pow(e,3),a=r*o,l=n*o;this.physicsBody.forces[s.id].x+=a,this.physicsBody.forces[s.id].y+=l}_formBarnesHutTree(e,r){let n;const s=r.length;let i=e[r[0]].x,o=e[r[0]].y,a=e[r[0]].x,l=e[r[0]].y;for(let y=1;y<s;y++){const v=e[r[y]],b=v.x,w=v.y;v.options.mass>0&&(b<i&&(i=b),b>a&&(a=b),w<o&&(o=w),w>l&&(l=w))}const u=Math.abs(a-i)-Math.abs(l-o);u>0?(o-=.5*u,l+=.5*u):(i+=.5*u,a-=.5*u);const h=Math.max(1e-5,Math.abs(a-i)),f=.5*h,p=.5*(i+a),m=.5*(o+l),g={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:p-f,maxX:p+f,minY:m-f,maxY:m+f},size:h,calcSize:1/h,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(g.root);for(let y=0;y<s;y++)n=e[r[y]],n.options.mass>0&&this._placeInTree(g.root,n);return g}_updateBranchMass(e,r){const n=e.centerOfMass,s=e.mass+r.options.mass,i=1/s;n.x=n.x*e.mass+r.x*r.options.mass,n.x*=i,n.y=n.y*e.mass+r.y*r.options.mass,n.y*=i,e.mass=s;const o=Math.max(Math.max(r.height,r.radius),r.width);e.maxWidth=e.maxWidth<o?o:e.maxWidth}_placeInTree(e,r,n){(n!=!0||n===void 0)&&this._updateBranchMass(e,r);const s=e.children.NW.range;let i;s.maxX>r.x?s.maxY>r.y?i="NW":i="SW":s.maxY>r.y?i="NE":i="SE",this._placeInRegion(e,r,i)}_placeInRegion(e,r,n){const s=e.children[n];switch(s.childrenCount){case 0:s.children.data=r,s.childrenCount=1,this._updateBranchMass(s,r);break;case 1:s.children.data.x===r.x&&s.children.data.y===r.y?(r.x+=this._rng(),r.y+=this._rng()):(this._splitBranch(s),this._placeInTree(s,r));break;case 4:this._placeInTree(s,r);break}}_splitBranch(e){let r=null;e.childrenCount===1&&(r=e.children.data,e.mass=0,e.centerOfMass.x=0,e.centerOfMass.y=0),e.childrenCount=4,e.children.data=null,this._insertRegion(e,"NW"),this._insertRegion(e,"NE"),this._insertRegion(e,"SW"),this._insertRegion(e,"SE"),r!=null&&this._placeInTree(e,r)}_insertRegion(e,r){let n,s,i,o;const a=.5*e.size;switch(r){case"NW":n=e.range.minX,s=e.range.minX+a,i=e.range.minY,o=e.range.minY+a;break;case"NE":n=e.range.minX+a,s=e.range.maxX,i=e.range.minY,o=e.range.minY+a;break;case"SW":n=e.range.minX,s=e.range.minX+a,i=e.range.minY+a,o=e.range.maxY;break;case"SE":n=e.range.minX+a,s=e.range.maxX,i=e.range.minY+a,o=e.range.maxY;break}e.children[r]={centerOfMass:{x:0,y:0},mass:0,range:{minX:n,maxX:s,minY:i,maxY:o},size:.5*e.size,calcSize:2*e.calcSize,children:{data:null},maxWidth:0,level:e.level+1,childrenCount:0}}_debug(e,r){this.barnesHutTree!==void 0&&(e.lineWidth=1,this._drawBranch(this.barnesHutTree.root,e,r))}_drawBranch(e,r,n){n===void 0&&(n="#FF0000"),e.childrenCount===4&&(this._drawBranch(e.children.NW,r),this._drawBranch(e.children.NE,r),this._drawBranch(e.children.SE,r),this._drawBranch(e.children.SW,r)),r.strokeStyle=n,r.beginPath(),r.moveTo(e.range.minX,e.range.minY),r.lineTo(e.range.maxX,e.range.minY),r.stroke(),r.beginPath(),r.moveTo(e.range.maxX,e.range.minY),r.lineTo(e.range.maxX,e.range.maxY),r.stroke(),r.beginPath(),r.moveTo(e.range.maxX,e.range.maxY),r.lineTo(e.range.minX,e.range.maxY),r.stroke(),r.beginPath(),r.moveTo(e.range.minX,e.range.maxY),r.lineTo(e.range.minX,e.range.minY),r.stroke()}}class bFe{constructor(e,r,n){this._rng=yx("REPULSION SOLVER"),this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,s,i,o,a,l;const u=this.body.nodes,d=this.physicsBody.physicsNodeIndices,h=this.physicsBody.forces,f=this.options.nodeDistance,p=-2/3/f,m=4/3;for(let g=0;g<d.length-1;g++){a=u[d[g]];for(let y=g+1;y<d.length;y++)l=u[d[y]],e=l.x-a.x,r=l.y-a.y,n=Math.sqrt(e*e+r*r),n===0&&(n=.1*this._rng(),e=n),n<2*f&&(n<.5*f?o=1:o=p*n+m,o=o/n,s=e*o,i=r*o,h[a.id].x-=s,h[a.id].y-=i,h[l.id].x+=s,h[l.id].y+=i)}}}class xFe{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e,this.overlapAvoidanceFactor=Math.max(0,Math.min(1,this.options.avoidOverlap||0))}solve(){const e=this.body.nodes,r=this.physicsBody.physicsNodeIndices,n=this.physicsBody.forces,s=this.options.nodeDistance;for(let i=0;i<r.length-1;i++){const o=e[r[i]];for(let a=i+1;a<r.length;a++){const l=e[r[a]];if(o.level===l.level){const u=s+this.overlapAvoidanceFactor*((o.shape.radius||0)/2+(l.shape.radius||0)/2),d=l.x-o.x,h=l.y-o.y,f=Math.sqrt(d*d+h*h),p=.05;let m;f<u?m=-Math.pow(p*f,2)+Math.pow(p*u,2):m=0,f!==0&&(m=m/f);const g=d*m,y=h*m;n[o.id].x-=g,n[o.id].y-=y,n[l.id].x+=g,n[l.id].y+=y}}}}}class kO{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r;const n=this.physicsBody.physicsEdgeIndices,s=this.body.edges;let i,o,a;for(let l=0;l<n.length;l++)r=s[n[l]],r.connected===!0&&r.toId!==r.fromId&&this.body.nodes[r.toId]!==void 0&&this.body.nodes[r.fromId]!==void 0&&(r.edgeType.via!==void 0?(e=r.options.length===void 0?this.options.springLength:r.options.length,i=r.to,o=r.edgeType.via,a=r.from,this._calculateSpringForce(i,o,.5*e),this._calculateSpringForce(o,a,.5*e)):(e=r.options.length===void 0?this.options.springLength*1.5:r.options.length,this._calculateSpringForce(r.from,r.to,e)))}_calculateSpringForce(e,r,n){const s=e.x-r.x,i=e.y-r.y,o=Math.max(Math.sqrt(s*s+i*i),.01),a=this.options.springConstant*(n-o)/o,l=s*a,u=i*a;this.physicsBody.forces[e.id]!==void 0&&(this.physicsBody.forces[e.id].x+=l,this.physicsBody.forces[e.id].y+=u),this.physicsBody.forces[r.id]!==void 0&&(this.physicsBody.forces[r.id].x-=l,this.physicsBody.forces[r.id].y-=u)}}class wFe{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,s,i,o,a,l;const u=this.body.edges,d=.5,h=this.physicsBody.physicsEdgeIndices,f=this.physicsBody.physicsNodeIndices,p=this.physicsBody.forces;for(let x=0;x<f.length;x++){const S=f[x];p[S].springFx=0,p[S].springFy=0}for(let x=0;x<h.length;x++)r=u[h[x]],r.connected===!0&&(e=r.options.length===void 0?this.options.springLength:r.options.length,n=r.from.x-r.to.x,s=r.from.y-r.to.y,l=Math.sqrt(n*n+s*s),l=l===0?.01:l,a=this.options.springConstant*(e-l)/l,i=n*a,o=s*a,r.to.level!=r.from.level?(p[r.toId]!==void 0&&(p[r.toId].springFx-=i,p[r.toId].springFy-=o),p[r.fromId]!==void 0&&(p[r.fromId].springFx+=i,p[r.fromId].springFy+=o)):(p[r.toId]!==void 0&&(p[r.toId].x-=d*i,p[r.toId].y-=d*o),p[r.fromId]!==void 0&&(p[r.fromId].x+=d*i,p[r.fromId].y+=d*o)));a=1;let m,g;for(let x=0;x<f.length;x++){const S=f[x];m=Math.min(a,Math.max(-a,p[S].springFx)),g=Math.min(a,Math.max(-a,p[S].springFy)),p[S].x+=m,p[S].y+=g}let y=0,v=0;for(let x=0;x<f.length;x++){const S=f[x];y+=p[S].x,v+=p[S].y}const b=y/f.length,w=v/f.length;for(let x=0;x<f.length;x++){const S=f[x];p[S].x-=b,p[S].y-=w}}}class ev{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,s;const i=this.body.nodes,o=this.physicsBody.physicsNodeIndices,a=this.physicsBody.forces;for(let l=0;l<o.length;l++){const u=o[l];s=i[u],e=-s.x,r=-s.y,n=Math.sqrt(e*e+r*r),this._calculateForces(n,e,r,a,s)}}_calculateForces(e,r,n,s,i){const o=e===0?0:this.options.centralGravity/e;s[i.id].x=r*o,s[i.id].y=n*o}}class SFe extends qce{constructor(e,r,n){super(e,r,n),this._rng=yx("FORCE ATLAS 2 BASED REPULSION SOLVER")}_calculateForces(e,r,n,s,i){e===0&&(e=.1*this._rng(),r=e),this.overlapAvoidanceFactor<1&&s.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*s.shape.radius,e-s.shape.radius));const o=s.edges.length+1,a=this.options.gravitationalConstant*i.mass*s.options.mass*o/Math.pow(e,2),l=r*a,u=n*a;this.physicsBody.forces[s.id].x+=l,this.physicsBody.forces[s.id].y+=u}}class EFe extends ev{constructor(e,r,n){super(e,r,n)}_calculateForces(e,r,n,s,i){if(e>0){const o=i.edges.length+1,a=this.options.centralGravity*o*i.options.mass;s[i.id].x=r*a,s[i.id].y=n*a}}}class _Fe{constructor(e){this.body=e,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}},jr(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("initPhysics",()=>{this.initPhysics()}),this.body.emitter.on("_layoutFailed",()=>{this.layoutFailed=!0}),this.body.emitter.on("resetPhysics",()=>{this.stopSimulation(),this.ready=!1}),this.body.emitter.on("disablePhysics",()=>{this.physicsEnabled=!1,this.stopSimulation()}),this.body.emitter.on("restorePhysics",()=>{this.setOptions(this.options),this.ready===!0&&this.startSimulation()}),this.body.emitter.on("startSimulation",()=>{this.ready===!0&&this.startSimulation()}),this.body.emitter.on("stopSimulation",()=>{this.stopSimulation()}),this.body.emitter.on("destroy",()=>{this.stopSimulation(!1),this.body.emitter.off()}),this.body.emitter.on("_dataChanged",()=>{this.updatePhysicsData()})}setOptions(e){if(e!==void 0)if(e===!1)this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation();else if(e===!0)this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation();else{this.physicsEnabled=!0,L0(["stabilization"],this.options,e),Ws(this.options,e,"stabilization"),e.enabled===void 0&&(this.options.enabled=!0),this.options.enabled===!1&&(this.physicsEnabled=!1,this.stopSimulation());const r=this.options.wind;r&&((typeof r.x!="number"||QR(r.x))&&(r.x=0),(typeof r.y!="number"||QR(r.y))&&(r.y=0)),this.timestep=this.options.timestep}this.init()}init(){let e;this.options.solver==="forceAtlas2Based"?(e=this.options.forceAtlas2Based,this.nodesSolver=new SFe(this.body,this.physicsBody,e),this.edgesSolver=new kO(this.body,this.physicsBody,e),this.gravitySolver=new EFe(this.body,this.physicsBody,e)):this.options.solver==="repulsion"?(e=this.options.repulsion,this.nodesSolver=new bFe(this.body,this.physicsBody,e),this.edgesSolver=new kO(this.body,this.physicsBody,e),this.gravitySolver=new ev(this.body,this.physicsBody,e)):this.options.solver==="hierarchicalRepulsion"?(e=this.options.hierarchicalRepulsion,this.nodesSolver=new xFe(this.body,this.physicsBody,e),this.edgesSolver=new wFe(this.body,this.physicsBody,e),this.gravitySolver=new ev(this.body,this.physicsBody,e)):(e=this.options.barnesHut,this.nodesSolver=new qce(this.body,this.physicsBody,e),this.edgesSolver=new kO(this.body,this.physicsBody,e),this.gravitySolver=new ev(this.body,this.physicsBody,e)),this.modelOptions=e}initPhysics(){this.physicsEnabled===!0&&this.options.enabled===!0?this.options.stabilization.enabled===!0?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}startSimulation(){if(this.physicsEnabled===!0&&this.options.enabled===!0){if(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),this.viewFunction===void 0){var e;this.viewFunction=ae(e=this.simulationStep).call(e,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}else this.body.emitter.emit("_redraw")}stopSimulation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.stabilized=!0,e===!0&&this._emitStabilized(),this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,e===!0&&this.body.emitter.emit("_stopRendering"))}simulationStep(){const e=D0();this.physicsTick(),(D0()-e<.4*this.simulationInterval||this.runDoubleSpeed===!0)&&this.stabilized===!1&&(this.physicsTick(),this.runDoubleSpeed=!0),this.stabilized===!0&&this.stopSimulation()}_emitStabilized(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.stabilizationIterations;(this.stabilizationIterations>1||this.startedStabilization===!0)&&Vo(()=>{this.body.emitter.emit("stabilized",{iterations:e}),this.startedStabilization=!1,this.stabilizationIterations=0},0)}physicsStep(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}adjustTimeStep(){this._evaluateStepQuality()===!0?this.timestep=1.2*this.timestep:this.timestep/1.2<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/1.2))}physicsTick(){this._startStabilizing(),this.stabilized!==!0&&(this.adaptiveTimestep===!0&&this.adaptiveTimestepEnabled===!0?(this.adaptiveCounter%this.adaptiveInterval===0?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1):(this.timestep=this.options.timestep,this.physicsStep()),this.stabilized===!0&&this.revert(),this.stabilizationIterations++)}updatePhysicsData(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];const e=this.body.nodes,r=this.body.edges;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&e[n].options.physics===!0&&this.physicsBody.physicsNodeIndices.push(e[n].id);for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&r[n].options.physics===!0&&this.physicsBody.physicsEdgeIndices.push(r[n].id);for(let n=0;n<this.physicsBody.physicsNodeIndices.length;n++){const s=this.physicsBody.physicsNodeIndices[n];this.physicsBody.forces[s]={x:0,y:0},this.physicsBody.velocities[s]===void 0&&(this.physicsBody.velocities[s]={x:0,y:0})}for(const n in this.physicsBody.velocities)e[n]===void 0&&delete this.physicsBody.velocities[n]}revert(){const e=lr(this.previousStates),r=this.body.nodes,n=this.physicsBody.velocities;this.referenceState={};for(let s=0;s<e.length;s++){const i=e[s];r[i]!==void 0?r[i].options.physics===!0&&(this.referenceState[i]={positions:{x:r[i].x,y:r[i].y}},n[i].x=this.previousStates[i].vx,n[i].y=this.previousStates[i].vy,r[i].x=this.previousStates[i].x,r[i].y=this.previousStates[i].y):delete this.previousStates[i]}}_evaluateStepQuality(){let e,r,n;const s=this.body.nodes,i=this.referenceState,o=.3;for(const a in this.referenceState)if(Object.prototype.hasOwnProperty.call(this.referenceState,a)&&s[a]!==void 0&&(e=s[a].x-i[a].positions.x,r=s[a].y-i[a].positions.y,n=Math.sqrt(Math.pow(e,2)+Math.pow(r,2)),n>o))return!1;return!0}moveNodes(){const e=this.physicsBody.physicsNodeIndices;let r=0,n=0;const s=5;for(let i=0;i<e.length;i++){const o=e[i],a=this._performStep(o);r=Math.max(r,a),n+=a}this.adaptiveTimestepEnabled=n/e.length<s,this.stabilized=r<this.options.minVelocity}calculateComponentVelocity(e,r,n){const s=this.modelOptions.damping*e,i=(r-s)/n;e+=i*this.timestep;const o=this.options.maxVelocity||1e9;return Math.abs(e)>o&&(e=e>0?o:-o),e}_performStep(e){const r=this.body.nodes[e],n=this.physicsBody.forces[e];this.options.wind&&(n.x+=this.options.wind.x,n.y+=this.options.wind.y);const s=this.physicsBody.velocities[e];return this.previousStates[e]={x:r.x,y:r.y,vx:s.x,vy:s.y},r.options.fixed.x===!1?(s.x=this.calculateComponentVelocity(s.x,n.x,r.options.mass),r.x+=s.x*this.timestep):(n.x=0,s.x=0),r.options.fixed.y===!1?(s.y=this.calculateComponentVelocity(s.y,n.y,r.options.mass),r.y+=s.y*this.timestep):(n.y=0,s.y=0),Math.sqrt(Math.pow(s.x,2)+Math.pow(s.y,2))}_freezeNodes(){const e=this.body.nodes;for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&e[r].x&&e[r].y){const n=e[r].options.fixed;this.freezeCache[r]={x:n.x,y:n.y},n.x=!0,n.y=!0}}_restoreFrozenNodes(){const e=this.body.nodes;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&this.freezeCache[r]!==void 0&&(e[r].options.fixed.x=this.freezeCache[r].x,e[r].options.fixed.y=this.freezeCache[r].y);this.freezeCache={}}stabilize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.stabilization.iterations;if(typeof e!="number"&&(e=this.options.stabilization.iterations,console.error("The stabilize method needs a numeric amount of iterations. Switching to default: ",e)),this.physicsBody.physicsNodeIndices.length===0){this.ready=!0;return}this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=e,this.options.stabilization.onlyDynamicEdges===!0&&this._freezeNodes(),this.stabilizationIterations=0,Vo(()=>this._stabilizationBatch(),0)}_startStabilizing(){return this.startedStabilization===!0?!1:(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}_stabilizationBatch(){const e=()=>this.stabilized===!1&&this.stabilizationIterations<this.targetIterations,r=()=>{this.body.emitter.emit("stabilizationProgress",{iterations:this.stabilizationIterations,total:this.targetIterations})};this._startStabilizing()&&r();let n=0;for(;e()&&n<this.options.stabilization.updateInterval;)this.physicsTick(),n++;if(r(),e()){var s;Vo(ae(s=this._stabilizationBatch).call(s,this),0)}else this._finalizeStabilization()}_finalizeStabilization(){this.body.emitter.emit("_allowRedraw"),this.options.stabilization.fit===!0&&this.body.emitter.emit("fit"),this.options.stabilization.onlyDynamicEdges===!0&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),this.stabilized===!0?this._emitStabilized():this.startSimulation(),this.ready=!0}_drawForces(e){for(let r=0;r<this.physicsBody.physicsNodeIndices.length;r++){const n=this.physicsBody.physicsNodeIndices[r],s=this.body.nodes[n],i=this.physicsBody.forces[n],o=20,a=.03,l=Math.sqrt(Math.pow(i.x,2)+Math.pow(i.x,2)),u=Math.min(Math.max(5,l),15),d=3*u,h=KR((180-Math.min(1,Math.max(0,a*l))*180)/360,1,1),f={x:s.x+o*i.x,y:s.y+o*i.y};e.lineWidth=u,e.strokeStyle=h,e.beginPath(),e.moveTo(s.x,s.y),e.lineTo(f.x,f.y),e.stroke();const p=Math.atan2(i.y,i.x);e.fillStyle=h,$ce.draw(e,{type:"arrow",point:f,angle:p,length:d}),bg(e).call(e)}}}const an=[];for(let t=0;t<256;++t)an.push((t+256).toString(16).slice(1));function NFe(t,e=0){return(an[t[e+0]]+an[t[e+1]]+an[t[e+2]]+an[t[e+3]]+"-"+an[t[e+4]]+an[t[e+5]]+"-"+an[t[e+6]]+an[t[e+7]]+"-"+an[t[e+8]]+an[t[e+9]]+"-"+an[t[e+10]]+an[t[e+11]]+an[t[e+12]]+an[t[e+13]]+an[t[e+14]]+an[t[e+15]]).toLowerCase()}let jO;const CFe=new Uint8Array(16);function kFe(){if(!jO){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");jO=crypto.getRandomValues.bind(crypto)}return jO(CFe)}const jFe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var eJ={randomUUID:jFe};function TFe(t,e,r){var s;t=t||{};const n=t.random??((s=t.rng)==null?void 0:s.call(t))??kFe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,NFe(n)}function _p(t,e,r){return eJ.randomUUID&&!t?eJ.randomUUID():TFe(t)}class $n{constructor(){}static getRange(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=1e9,s=-1e9,i=1e9,o=-1e9,a;if(r.length>0)for(let l=0;l<r.length;l++)a=e[r[l]],i>a.shape.boundingBox.left&&(i=a.shape.boundingBox.left),o<a.shape.boundingBox.right&&(o=a.shape.boundingBox.right),n>a.shape.boundingBox.top&&(n=a.shape.boundingBox.top),s<a.shape.boundingBox.bottom&&(s=a.shape.boundingBox.bottom);return i===1e9&&o===-1e9&&n===1e9&&s===-1e9&&(n=0,s=0,i=0,o=0),{minX:i,maxX:o,minY:n,maxY:s}}static getRangeCore(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=1e9,s=-1e9,i=1e9,o=-1e9,a;if(r.length>0)for(let l=0;l<r.length;l++)a=e[r[l]],i>a.x&&(i=a.x),o<a.x&&(o=a.x),n>a.y&&(n=a.y),s<a.y&&(s=a.y);return i===1e9&&o===-1e9&&n===1e9&&s===-1e9&&(n=0,s=0,i=0,o=0),{minX:i,maxX:o,minY:n,maxY:s}}static findCenter(e){return{x:.5*(e.maxX+e.minX),y:.5*(e.maxY+e.minY)}}static cloneOptions(e,r){const n={};return r===void 0||r==="node"?($t(n,e.options,!0),n.x=e.x,n.y=e.y,n.amountOfConnections=e.edges.length):$t(n,e.options,!0),n}}class OFe extends Ut{constructor(e,r,n,s,i,o){super(e,r,n,s,i,o),this.isCluster=!0,this.containedNodes={},this.containedEdges={}}_openChildCluster(e){const r=this.body.nodes[e];if(this.containedNodes[e]===void 0)throw new Error("node with id: "+e+" not in current cluster");if(!r.isCluster)throw new Error("node with id: "+e+" is not a cluster");delete this.containedNodes[e],st(r.edges,n=>{delete this.containedEdges[n.id]}),st(r.containedNodes,(n,s)=>{this.containedNodes[s]=n}),r.containedNodes={},st(r.containedEdges,(n,s)=>{this.containedEdges[s]=n}),r.containedEdges={},st(r.edges,n=>{st(this.edges,s=>{var i,o;const a=Nt(i=s.clusteringEdgeReplacingIds).call(i,n.id);a!==-1&&(st(n.clusteringEdgeReplacingIds,l=>{s.clusteringEdgeReplacingIds.push(l),this.body.edges[l].edgeReplacedById=s.id}),Wo(o=s.clusteringEdgeReplacingIds).call(o,a,1))})}),r.edges=[]}}class PFe{constructor(e){this.body=e,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},jr(this.options,this.defaultOptions),this.body.emitter.on("_resetData",()=>{this.clusteredNodes={},this.clusteredEdges={}})}clusterByHubsize(e,r){e===void 0?e=this._getHubSize():typeof e=="object"&&(r=this._checkOptions(e),e=this._getHubSize());const n=[];for(let s=0;s<this.body.nodeIndices.length;s++){const i=this.body.nodes[this.body.nodeIndices[s]];i.edges.length>=e&&n.push(i.id)}for(let s=0;s<n.length;s++)this.clusterByConnection(n[s],r,!0);this.body.emitter.emit("_dataChanged")}cluster(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.joinCondition===void 0)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");e=this._checkOptions(e);const n={},s={};st(this.body.nodes,(i,o)=>{i.options&&e.joinCondition(i.options)===!0&&(n[o]=i,st(i.edges,a=>{this.clusteredEdges[a.id]===void 0&&(s[a.id]=a)}))}),this._cluster(n,s,e,r)}clusterByEdgeCount(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;r=this._checkOptions(r);const s=[],i={};let o,a,l;for(let u=0;u<this.body.nodeIndices.length;u++){const d={},h={},f=this.body.nodeIndices[u],p=this.body.nodes[f];if(i[f]===void 0){l=0,a=[];for(let m=0;m<p.edges.length;m++)o=p.edges[m],this.clusteredEdges[o.id]===void 0&&(o.toId!==o.fromId&&l++,a.push(o));if(l===e){const m=function(y){if(r.joinCondition===void 0||r.joinCondition===null)return!0;const v=$n.cloneOptions(y);return r.joinCondition(v)};let g=!0;for(let y=0;y<a.length;y++){o=a[y];const v=this._getConnectedId(o,f);if(m(p))h[o.id]=o,d[f]=p,d[v]=this.body.nodes[v],i[f]=!0;else{g=!1;break}}if(lr(d).length>0&&lr(h).length>0&&g===!0){const v=function(){for(let b=0;b<s.length;++b)for(const w in d)if(s[b].nodes[w]!==void 0)return s[b]}();if(v!==void 0){for(const b in d)v.nodes[b]===void 0&&(v.nodes[b]=d[b]);for(const b in h)v.edges[b]===void 0&&(v.edges[b]=h[b])}else s.push({nodes:d,edges:h})}}}}for(let u=0;u<s.length;u++)this._cluster(s[u].nodes,s[u].edges,r,!1);n===!0&&this.body.emitter.emit("_dataChanged")}clusterOutliers(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(1,e,r)}clusterBridges(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(2,e,r)}clusterByConnection(e,r){var n;let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0)throw new Error("No nodeId supplied to clusterByConnection!");if(this.body.nodes[e]===void 0)throw new Error("The nodeId given to clusterByConnection does not exist!");const i=this.body.nodes[e];r=this._checkOptions(r,i),r.clusterNodeProperties.x===void 0&&(r.clusterNodeProperties.x=i.x),r.clusterNodeProperties.y===void 0&&(r.clusterNodeProperties.y=i.y),r.clusterNodeProperties.fixed===void 0&&(r.clusterNodeProperties.fixed={},r.clusterNodeProperties.fixed.x=i.options.fixed.x,r.clusterNodeProperties.fixed.y=i.options.fixed.y);const o={},a={},l=i.id,u=$n.cloneOptions(i);o[l]=i;for(let h=0;h<i.edges.length;h++){const f=i.edges[h];if(this.clusteredEdges[f.id]===void 0){const p=this._getConnectedId(f,l);if(this.clusteredNodes[p]===void 0)if(p!==l)if(r.joinCondition===void 0)a[f.id]=f,o[p]=this.body.nodes[p];else{const m=$n.cloneOptions(this.body.nodes[p]);r.joinCondition(u,m)===!0&&(a[f.id]=f,o[p]=this.body.nodes[p])}else a[f.id]=f}}const d=wh(n=lr(o)).call(n,function(h){return o[h].id});for(const h in o){if(!Object.prototype.hasOwnProperty.call(o,h))continue;const f=o[h];for(let p=0;p<f.edges.length;p++){const m=f.edges[p];Nt(d).call(d,this._getConnectedId(m,f.id))>-1&&(a[m.id]=m)}}this._cluster(o,a,r,s)}_createClusterEdges(e,r,n,s){let i,o,a,l,u,d;const h=lr(e),f=[];for(let g=0;g<h.length;g++){o=h[g],a=e[o];for(let y=0;y<a.edges.length;y++)i=a.edges[y],this.clusteredEdges[i.id]===void 0&&(i.toId==i.fromId?r[i.id]=i:i.toId==o?(l=n.id,u=i.fromId,d=u):(l=i.toId,u=n.id,d=l),e[d]===void 0&&f.push({edge:i,fromId:u,toId:l}))}const p=[],m=function(g){for(let y=0;y<p.length;y++){const v=p[y],b=g.fromId===v.fromId&&g.toId===v.toId,w=g.fromId===v.toId&&g.toId===v.fromId;if(b||w)return v}return null};for(let g=0;g<f.length;g++){const y=f[g],v=y.edge;let b=m(y);b===null?(b=this._createClusteredEdge(y.fromId,y.toId,v,s),p.push(b)):b.clusteringEdgeReplacingIds.push(v.id),this.body.edges[v.id].edgeReplacedById=b.id,this._backupEdgeOptions(v),v.setOptions({physics:!1})}}_checkOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.clusterEdgeProperties===void 0&&(e.clusterEdgeProperties={}),e.clusterNodeProperties===void 0&&(e.clusterNodeProperties={}),e}_cluster(e,r,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;const i=[];for(const d in e)Object.prototype.hasOwnProperty.call(e,d)&&this.clusteredNodes[d]!==void 0&&i.push(d);for(let d=0;d<i.length;++d)delete e[i[d]];if(lr(e).length==0||lr(e).length==1&&n.clusterNodeProperties.allowSingleNodeCluster!=!0)return;let o=$t({},n.clusterNodeProperties);if(n.processProperties!==void 0){const d=[];for(const f in e)if(Object.prototype.hasOwnProperty.call(e,f)){const p=$n.cloneOptions(e[f]);d.push(p)}const h=[];for(const f in r)if(Object.prototype.hasOwnProperty.call(r,f)&&f.substr(0,12)!=="clusterEdge:"){const p=$n.cloneOptions(r[f],"edge");h.push(p)}if(o=n.processProperties(o,d,h),!o)throw new Error("The processProperties function does not return properties!")}o.id===void 0&&(o.id="cluster:"+_p());const a=o.id;o.label===void 0&&(o.label="cluster");let l;o.x===void 0&&(l=this._getClusterPosition(e),o.x=l.x),o.y===void 0&&(l===void 0&&(l=this._getClusterPosition(e)),o.y=l.y),o.id=a;const u=this.body.functions.createNode(o,OFe);u.containedNodes=e,u.containedEdges=r,u.clusterEdgeProperties=n.clusterEdgeProperties,this.body.nodes[o.id]=u,this._clusterEdges(e,r,o,n.clusterEdgeProperties),o.id=void 0,s===!0&&this.body.emitter.emit("_dataChanged")}_backupEdgeOptions(e){this.clusteredEdges[e.id]===void 0&&(this.clusteredEdges[e.id]={physics:e.options.physics})}_restoreEdge(e){const r=this.clusteredEdges[e.id];r!==void 0&&(e.setOptions({physics:r.physics}),delete this.clusteredEdges[e.id])}isCluster(e){return this.body.nodes[e]!==void 0?this.body.nodes[e].isCluster===!0:(console.error("Node does not exist."),!1)}_getClusterPosition(e){const r=lr(e);let n=e[r[0]].x,s=e[r[0]].x,i=e[r[0]].y,o=e[r[0]].y,a;for(let l=1;l<r.length;l++)a=e[r[l]],n=a.x<n?a.x:n,s=a.x>s?a.x:s,i=a.y<i?a.y:i,o=a.y>o?a.y:o;return{x:.5*(n+s),y:.5*(i+o)}}openCluster(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0)throw new Error("No clusterNodeId supplied to openCluster.");const s=this.body.nodes[e];if(s===void 0)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(s.isCluster!==!0||s.containedNodes===void 0||s.containedEdges===void 0)throw new Error("The node:"+e+" is not a valid cluster.");const i=this.findNode(e),o=Nt(i).call(i,e)-1;if(o>=0){const d=i[o];this.body.nodes[d]._openChildCluster(e),delete this.body.nodes[e],n===!0&&this.body.emitter.emit("_dataChanged");return}const a=s.containedNodes,l=s.containedEdges;if(r!==void 0&&r.releaseFunction!==void 0&&typeof r.releaseFunction=="function"){const d={},h={x:s.x,y:s.y};for(const p in a)if(Object.prototype.hasOwnProperty.call(a,p)){const m=this.body.nodes[p];d[p]={x:m.x,y:m.y}}const f=r.releaseFunction(h,d);for(const p in a)if(Object.prototype.hasOwnProperty.call(a,p)){const m=this.body.nodes[p];f[p]!==void 0&&(m.x=f[p].x===void 0?s.x:f[p].x,m.y=f[p].y===void 0?s.y:f[p].y)}}else st(a,function(d){d.options.fixed.x===!1&&(d.x=s.x),d.options.fixed.y===!1&&(d.y=s.y)});for(const d in a)if(Object.prototype.hasOwnProperty.call(a,d)){const h=this.body.nodes[d];h.vx=s.vx,h.vy=s.vy,h.setOptions({physics:!0}),delete this.clusteredNodes[d]}const u=[];for(let d=0;d<s.edges.length;d++)u.push(s.edges[d]);for(let d=0;d<u.length;d++){const h=u[d],f=this._getConnectedId(h,e),p=this.clusteredNodes[f];for(let m=0;m<h.clusteringEdgeReplacingIds.length;m++){const g=h.clusteringEdgeReplacingIds[m],y=this.body.edges[g];if(y!==void 0)if(p!==void 0){const v=this.body.nodes[p.clusterId];v.containedEdges[y.id]=y,delete l[y.id];let b=y.fromId,w=y.toId;y.toId==f?w=p.clusterId:b=p.clusterId,this._createClusteredEdge(b,w,y,v.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(y)}h.remove()}for(const d in l)Object.prototype.hasOwnProperty.call(l,d)&&this._restoreEdge(l[d]);delete this.body.nodes[e],n===!0&&this.body.emitter.emit("_dataChanged")}getNodesInCluster(e){const r=[];if(this.isCluster(e)===!0){const n=this.body.nodes[e].containedNodes;for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&r.push(this.body.nodes[s].id)}return r}findNode(e){const r=[];let s=0,i;for(;this.clusteredNodes[e]!==void 0&&s<100;){if(i=this.body.nodes[e],i===void 0)return[];r.push(i.id),e=this.clusteredNodes[e].clusterId,s++}return i=this.body.nodes[e],i===void 0?[]:(r.push(i.id),Rc(r).call(r),r)}updateClusteredNode(e,r){if(e===void 0)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(r===void 0)throw new Error("No newOptions supplied to updateClusteredNode.");if(this.body.nodes[e]===void 0)throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[e].setOptions(r),this.body.emitter.emit("_dataChanged")}updateEdge(e,r){if(e===void 0)throw new Error("No startEdgeId supplied to updateEdge.");if(r===void 0)throw new Error("No newOptions supplied to updateEdge.");if(this.body.edges[e]===void 0)throw new Error("The startEdgeId supplied to updateEdge does not exist.");const n=this.getClusteredEdges(e);for(let s=0;s<n.length;s++)this.body.edges[n[s]].setOptions(r);this.body.emitter.emit("_dataChanged")}getClusteredEdges(e){const r=[];let s=0;for(;e!==void 0&&this.body.edges[e]!==void 0&&s<100;)r.push(this.body.edges[e].id),e=this.body.edges[e].edgeReplacedById,s++;return Rc(r).call(r),r}getBaseEdge(e){return this.getBaseEdges(e)[0]}getBaseEdges(e){const r=[e],n=[],s=[],i=100;let o=0;for(;r.length>0&&o<i;){const a=r.pop();if(a===void 0)continue;const l=this.body.edges[a];if(l===void 0)continue;o++;const u=l.clusteringEdgeReplacingIds;if(u===void 0)s.push(a);else for(let d=0;d<u.length;++d){const h=u[d];Nt(r).call(r,u)!==-1||Nt(n).call(n,u)!==-1||r.push(h)}n.push(a)}return s}_getConnectedId(e,r){return e.toId!=r?e.toId:(e.fromId!=r,e.fromId)}_getHubSize(){let e=0,r=0,n=0,s=0;for(let l=0;l<this.body.nodeIndices.length;l++){const u=this.body.nodes[this.body.nodeIndices[l]];u.edges.length>s&&(s=u.edges.length),e+=u.edges.length,r+=Math.pow(u.edges.length,2),n+=1}e=e/n,r=r/n;const i=r-Math.pow(e,2),o=Math.sqrt(i);let a=Math.floor(e+2*o);return a>s&&(a=s),a}_createClusteredEdge(e,r,n,s,i){const o=$n.cloneOptions(n,"edge");$t(o,s),o.from=e,o.to=r,o.id="clusterEdge:"+_p(),i!==void 0&&$t(o,i);const a=this.body.functions.createEdge(o);return a.clusteringEdgeReplacingIds=[n.id],a.connect(),this.body.edges[a.id]=a,a}_clusterEdges(e,r,n,s){if(r instanceof vl){const i=r,o={};o[i.id]=i,r=o}if(e instanceof Ut){const i=e,o={};o[i.id]=i,e=o}if(n==null)throw new Error("_clusterEdges: parameter clusterNode required");s===void 0&&(s=n.clusterEdgeProperties),this._createClusterEdges(e,r,n,s);for(const i in r)if(Object.prototype.hasOwnProperty.call(r,i)&&this.body.edges[i]!==void 0){const o=this.body.edges[i];this._backupEdgeOptions(o),o.setOptions({physics:!1})}for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(this.clusteredNodes[i]={clusterId:n.id,node:this.body.nodes[i]},this.body.nodes[i].setOptions({physics:!1}))}_getClusterNodeForNode(e){if(e===void 0)return;const r=this.clusteredNodes[e];if(r===void 0)return;const n=r.clusterId;if(n!==void 0)return this.body.nodes[n]}_filter(e,r){const n=[];return st(e,s=>{r(s)&&n.push(s)}),n}_updateState(){let e;const r=[],n={},s=l=>{st(this.body.nodes,u=>{u.isCluster===!0&&l(u)})};for(e in this.clusteredNodes){if(!Object.prototype.hasOwnProperty.call(this.clusteredNodes,e))continue;this.body.nodes[e]===void 0&&r.push(e)}s(function(l){for(let u=0;u<r.length;u++)delete l.containedNodes[r[u]]});for(let l=0;l<r.length;l++)delete this.clusteredNodes[r[l]];st(this.clusteredEdges,l=>{const u=this.body.edges[l];(u===void 0||!u.endPointsValid())&&(n[l]=l)}),s(function(l){st(l.containedEdges,(u,d)=>{!u.endPointsValid()&&!n[d]&&(n[d]=d)})}),st(this.body.edges,(l,u)=>{let d=!0;const h=l.clusteringEdgeReplacingIds;if(h!==void 0){let f=0;st(h,p=>{const m=this.body.edges[p];m!==void 0&&m.endPointsValid()&&(f+=1)}),d=f>0}(!l.endPointsValid()||!d)&&(n[u]=u)}),s(l=>{st(n,u=>{delete l.containedEdges[u],st(l.edges,(d,h)=>{if(d.id===u){l.edges[h]=null;return}d.clusteringEdgeReplacingIds=this._filter(d.clusteringEdgeReplacingIds,function(f){return!n[f]})}),l.edges=this._filter(l.edges,function(d){return d!==null})})}),st(n,l=>{delete this.clusteredEdges[l]}),st(n,l=>{delete this.body.edges[l]});const i=lr(this.body.edges);st(i,l=>{const u=this.body.edges[l],d=this._isClusteredNode(u.fromId)||this._isClusteredNode(u.toId);if(d!==this._isClusteredEdge(u.id))if(d){const h=this._getClusterNodeForNode(u.fromId);h!==void 0&&this._clusterEdges(this.body.nodes[u.fromId],u,h);const f=this._getClusterNodeForNode(u.toId);f!==void 0&&this._clusterEdges(this.body.nodes[u.toId],u,f)}else delete this._clusterEdges[l],this._restoreEdge(u)});let o=!1,a=!0;for(;a;){const l=[];s(function(u){const d=lr(u.containedNodes).length,h=u.options.allowSingleNodeCluster===!0;(h&&d<1||!h&&d<2)&&l.push(u.id)});for(let u=0;u<l.length;++u)this.openCluster(l[u],{},!1);a=l.length>0,o=o||a}o&&this._updateState()}_isClusteredNode(e){return this.clusteredNodes[e]!==void 0}_isClusteredEdge(e){return this.clusteredEdges[e]!==void 0}}class IFe{constructor(e,r){this.body=e,this.canvas=r,this.redrawRequested=!1,this.requestAnimationFrameRequestId=void 0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},jr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e;this.body.emitter.on("dragStart",()=>{this.dragging=!0}),this.body.emitter.on("dragEnd",()=>{this.dragging=!1}),this.body.emitter.on("zoom",()=>{this.zooming=!0,window.clearTimeout(this.zoomTimeoutId),this.zoomTimeoutId=Vo(()=>{var r;this.zooming=!1,ae(r=this._requestRedraw).call(r,this)()},250)}),this.body.emitter.on("_resizeNodes",()=>{this._resizeNodes()}),this.body.emitter.on("_redraw",()=>{this.renderingActive===!1&&this._redraw()}),this.body.emitter.on("_blockRedraw",()=>{this.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",()=>{this.allowRedraw=!0,this.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",ae(e=this._requestRedraw).call(e,this)),this.body.emitter.on("_startRendering",()=>{this.renderRequests+=1,this.renderingActive=!0,this._startRendering()}),this.body.emitter.on("_stopRendering",()=>{this.renderRequests-=1,this.renderingActive=this.renderRequests>0,this.requestAnimationFrameRequestId=void 0}),this.body.emitter.on("destroy",()=>{this.renderRequests=0,this.allowRedraw=!1,this.renderingActive=!1,window.cancelAnimationFrame(this.requestAnimationFrameRequestId),this.body.emitter.off()})}setOptions(e){e!==void 0&&hf(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"],this.options,e)}_startRendering(){if(this.renderingActive===!0&&this.requestAnimationFrameRequestId===void 0){var e;this.requestAnimationFrameRequestId=window.requestAnimationFrame(ae(e=this._renderStep).call(e,this),this.simulationInterval)}}_renderStep(){this.renderingActive===!0&&(this.requestAnimationFrameRequestId=void 0,this._startRendering(),this._redraw())}redraw(){this.body.emitter.emit("setSize"),this._redraw()}_requestRedraw(){this.redrawRequested!==!0&&this.renderingActive===!1&&this.allowRedraw===!0&&(this.redrawRequested=!0,window.requestAnimationFrame(()=>{this._redraw(!1)}))}_redraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.allowRedraw===!0){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;const r={drawExternalLabels:null};(this.canvas.frame.canvas.width===0||this.canvas.frame.canvas.height===0)&&this.canvas.setSize(),this.canvas.setTransform();const n=this.canvas.getContext(),s=this.canvas.frame.canvas.clientWidth,i=this.canvas.frame.canvas.clientHeight;if(n.clearRect(0,0,s,i),this.canvas.frame.clientWidth===0)return;if(n.save(),n.translate(this.body.view.translation.x,this.body.view.translation.y),n.scale(this.body.view.scale,this.body.view.scale),n.beginPath(),this.body.emitter.emit("beforeDrawing",n),n.closePath(),e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawEdges(n),this.dragging===!1||this.dragging===!0&&this.options.hideNodesOnDrag===!1){const{drawExternalLabels:o}=this._drawNodes(n,e);r.drawExternalLabels=o}e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawArrows(n),r.drawExternalLabels!=null&&r.drawExternalLabels(),e===!1&&this._drawSelectionBox(n),n.beginPath(),this.body.emitter.emit("afterDrawing",n),n.closePath(),n.restore(),e===!0&&n.clearRect(0,0,s,i)}}_resizeNodes(){this.canvas.setTransform();const e=this.canvas.getContext();e.save(),e.translate(this.body.view.translation.x,this.body.view.translation.y),e.scale(this.body.view.scale,this.body.view.scale);const r=this.body.nodes;let n;for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n=r[s],n.resize(e),n.updateBoundingBox(e,n.selected));e.restore()}_drawNodes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.nodes,s=this.body.nodeIndices;let i;const o=[],a=[],l=20,u=this.canvas.DOMtoCanvas({x:-l,y:-l}),d=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+l,y:this.canvas.frame.canvas.clientHeight+l}),h={top:u.y,left:u.x,bottom:d.y,right:d.x},f=[];for(let y=0;y<s.length;y++)if(i=n[s[y]],i.hover)a.push(s[y]);else if(i.isSelected())o.push(s[y]);else if(r===!0){const v=i.draw(e);v.drawExternalLabel!=null&&f.push(v.drawExternalLabel)}else if(i.isBoundingBoxOverlappingWith(h)===!0){const v=i.draw(e);v.drawExternalLabel!=null&&f.push(v.drawExternalLabel)}else i.updateBoundingBox(e,i.selected);let p;const m=o.length,g=a.length;for(p=0;p<m;p++){i=n[o[p]];const y=i.draw(e);y.drawExternalLabel!=null&&f.push(y.drawExternalLabel)}for(p=0;p<g;p++){i=n[a[p]];const y=i.draw(e);y.drawExternalLabel!=null&&f.push(y.drawExternalLabel)}return{drawExternalLabels:()=>{for(const y of f)y()}}}_drawEdges(e){const r=this.body.edges,n=this.body.edgeIndices;for(let s=0;s<n.length;s++){const i=r[n[s]];i.connected===!0&&i.draw(e)}}_drawArrows(e){const r=this.body.edges,n=this.body.edgeIndices;for(let s=0;s<n.length;s++){const i=r[n[s]];i.connected===!0&&i.drawArrows(e)}}_drawSelectionBox(e){if(this.body.selectionBox.show){e.beginPath();const r=this.body.selectionBox.position.end.x-this.body.selectionBox.position.start.x,n=this.body.selectionBox.position.end.y-this.body.selectionBox.position.start.y;e.rect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,r,n),e.fillStyle="rgba(151, 194, 252, 0.2)",e.fillRect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,r,n),e.strokeStyle="rgba(151, 194, 252, 1)",e.stroke()}else e.closePath()}}var TO,tJ;function RFe(){if(tJ)return TO;tJ=1,Vle();var t=jt();return TO=t.setInterval,TO}var OO,rJ;function MFe(){return rJ||(rJ=1,OO=RFe()),OO}var AFe=MFe(),DFe=Ve(AFe);function W0(t,e){e.inputHandler=function(r){r.isFirst&&e(r)},t.on("hammer.input",e.inputHandler)}function Lce(t,e){return e.inputHandler=function(r){r.isFinal&&e(r)},t.on("hammer.input",e.inputHandler)}class $Fe{constructor(e){this.body=e,this.pixelRatio=1,this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this._cleanupCallbacks=[],this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},jr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e;this.body.emitter.once("resize",r=>{r.width!==0&&(this.body.view.translation.x=r.width*.5),r.height!==0&&(this.body.view.translation.y=r.height*.5)}),this.body.emitter.on("setSize",ae(e=this.setSize).call(e,this)),this.body.emitter.on("destroy",()=>{this.hammerFrame.destroy(),this.hammer.destroy(),this._cleanUp()})}setOptions(e){if(e!==void 0&&hf(["width","height","autoResize"],this.options,e),this._cleanUp(),this.options.autoResize===!0){var r;if(window.ResizeObserver){const s=new ResizeObserver(()=>{this.setSize()===!0&&this.body.emitter.emit("_requestRedraw")}),{frame:i}=this;s.observe(i),this._cleanupCallbacks.push(()=>{s.unobserve(i)})}else{const s=DFe(()=>{this.setSize()===!0&&this.body.emitter.emit("_requestRedraw")},1e3);this._cleanupCallbacks.push(()=>{clearInterval(s)})}const n=ae(r=this._onResize).call(r,this);window.addEventListener("resize",n),this._cleanupCallbacks.push(()=>{window.removeEventListener("resize",n)})}}_cleanUp(){var e,r,n;Mt(e=Rc(r=Wo(n=this._cleanupCallbacks).call(n,0)).call(r)).call(e,s=>{try{s()}catch(i){console.error(i)}})}_onResize(){this.setSize(),this.body.emitter.emit("_redraw")}_getCameraState(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.pixelRatio;this.initialized===!0&&(this.cameraState.previousWidth=this.frame.canvas.width/e,this.cameraState.previousHeight=this.frame.canvas.height/e,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/e,y:.5*this.frame.canvas.height/e}))}_setCameraState(){if(this.cameraState.scale!==void 0&&this.frame.canvas.clientWidth!==0&&this.frame.canvas.clientHeight!==0&&this.pixelRatio!==0&&this.cameraState.previousWidth>0&&this.cameraState.previousHeight>0){const e=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,r=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight;let n=this.cameraState.scale;e!=1&&r!=1?n=this.cameraState.scale*.5*(e+r):e!=1?n=this.cameraState.scale*e:r!=1&&(n=this.cameraState.scale*r),this.body.view.scale=n;const s=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),i={x:s.x-this.cameraState.position.x,y:s.y-this.cameraState.position.y};this.body.view.translation.x+=i.x*this.body.view.scale,this.body.view.translation.y+=i.y*this.body.view.scale}}_prepareValue(e){if(typeof e=="number")return e+"px";if(typeof e=="string"){if(Nt(e).call(e,"%")!==-1||Nt(e).call(e,"px")!==-1)return e;if(Nt(e).call(e,"%")===-1)return e+"px"}throw new Error("Could not use the value supplied for width or height:"+e)}_create(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=0,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{const e=document.createElement("DIV");e.style.color="red",e.style.fontWeight="bold",e.style.padding="10px",e.innerText="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(e)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}_bindHammer(){this.hammer!==void 0&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new Md(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:Md.DIRECTION_ALL}),W0(this.hammer,e=>{this.body.eventListeners.onTouch(e)}),this.hammer.on("tap",e=>{this.body.eventListeners.onTap(e)}),this.hammer.on("doubletap",e=>{this.body.eventListeners.onDoubleTap(e)}),this.hammer.on("press",e=>{this.body.eventListeners.onHold(e)}),this.hammer.on("panstart",e=>{this.body.eventListeners.onDragStart(e)}),this.hammer.on("panmove",e=>{this.body.eventListeners.onDrag(e)}),this.hammer.on("panend",e=>{this.body.eventListeners.onDragEnd(e)}),this.hammer.on("pinch",e=>{this.body.eventListeners.onPinch(e)}),this.frame.canvas.addEventListener("wheel",e=>{this.body.eventListeners.onMouseWheel(e)}),this.frame.canvas.addEventListener("mousemove",e=>{this.body.eventListeners.onMouseMove(e)}),this.frame.canvas.addEventListener("contextmenu",e=>{this.body.eventListeners.onContext(e)}),this.hammerFrame=new Md(this.frame),Lce(this.hammerFrame,e=>{this.body.eventListeners.onRelease(e)})}setSize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.width,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.height;e=this._prepareValue(e),r=this._prepareValue(r);let n=!1;const s=this.frame.canvas.width,i=this.frame.canvas.height,o=this.pixelRatio;if(this._setPixelRatio(),e!=this.options.width||r!=this.options.height||this.frame.style.width!=e||this.frame.style.height!=r)this._getCameraState(o),this.frame.style.width=e,this.frame.style.height=r,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=e,this.options.height=r,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},n=!0;else{const a=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),l=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);(this.frame.canvas.width!==a||this.frame.canvas.height!==l)&&this._getCameraState(o),this.frame.canvas.width!==a&&(this.frame.canvas.width=a,n=!0),this.frame.canvas.height!==l&&(this.frame.canvas.height=l,n=!0)}return n===!0&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(s/this.pixelRatio),oldHeight:Math.round(i/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,n}getContext(){return this.frame.canvas.getContext("2d")}_determinePixelRatio(){const e=this.getContext();if(e===void 0)throw new Error("Could not get canvax context");let r=1;typeof window<"u"&&(r=window.devicePixelRatio||1);const n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return r/n}_setPixelRatio(){this.pixelRatio=this._determinePixelRatio()}setTransform(){const e=this.getContext();if(e===void 0)throw new Error("Could not get canvax context");e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}_XconvertDOMtoCanvas(e){return(e-this.body.view.translation.x)/this.body.view.scale}_XconvertCanvasToDOM(e){return e*this.body.view.scale+this.body.view.translation.x}_YconvertDOMtoCanvas(e){return(e-this.body.view.translation.y)/this.body.view.scale}_YconvertCanvasToDOM(e){return e*this.body.view.scale+this.body.view.translation.y}canvasToDOM(e){return{x:this._XconvertCanvasToDOM(e.x),y:this._YconvertCanvasToDOM(e.y)}}DOMtoCanvas(e){return{x:this._XconvertDOMtoCanvas(e.x),y:this._YconvertDOMtoCanvas(e.y)}}}function FFe(t,e){const r=jr({nodes:e,minZoomLevel:Number.MIN_VALUE,maxZoomLevel:1},t??{});if(!hr(r.nodes))throw new TypeError("Nodes has to be an array of ids.");if(r.nodes.length===0&&(r.nodes=e),!(typeof r.minZoomLevel=="number"&&r.minZoomLevel>0))throw new TypeError("Min zoom level has to be a number higher than zero.");if(!(typeof r.maxZoomLevel=="number"&&r.minZoomLevel<=r.maxZoomLevel))throw new TypeError("Max zoom level has to be a number higher than min zoom level.");return r}class qFe{constructor(e,r){var n,s;this.body=e,this.canvas=r,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",ae(n=this.fit).call(n,this)),this.body.emitter.on("animationFinished",()=>{this.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",ae(s=this.releaseNode).call(s,this))}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.options=e}fit(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;e=FFe(e,this.body.nodeIndices);const n=this.canvas.frame.canvas.clientWidth,s=this.canvas.frame.canvas.clientHeight;let i,o;if(n===0||s===0)o=1,i=$n.getRange(this.body.nodes,e.nodes);else if(r===!0){let u=0;for(const f in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,f)&&this.body.nodes[f].predefinedPosition===!0&&(u+=1);if(u>.5*this.body.nodeIndices.length){this.fit(e,!1);return}i=$n.getRange(this.body.nodes,e.nodes),o=12.662/(this.body.nodeIndices.length+7.4147)+.0964822;const h=Math.min(n/600,s/600);o*=h}else{this.body.emitter.emit("_resizeNodes"),i=$n.getRange(this.body.nodes,e.nodes);const u=Math.abs(i.maxX-i.minX)*1.1,d=Math.abs(i.maxY-i.minY)*1.1,h=n/u,f=s/d;o=h<=f?h:f}o>e.maxZoomLevel?o=e.maxZoomLevel:o<e.minZoomLevel&&(o=e.minZoomLevel);const l={position:$n.findCenter(i),scale:o,animation:e.animation};this.moveTo(l)}focus(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.body.nodes[e]!==void 0){const n={x:this.body.nodes[e].x,y:this.body.nodes[e].y};r.position=n,r.lockedOnNode=e,this.moveTo(r)}else console.error("Node: "+e+" cannot be found.")}moveTo(e){if(e===void 0){e={};return}if(e.offset!=null){if(e.offset.x!=null){if(e.offset.x=+e.offset.x,!fc(e.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.')}else e.offset.x=0;if(e.offset.y!=null){if(e.offset.y=+e.offset.y,!fc(e.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else e.offset.x=0}else e.offset={x:0,y:0};if(e.position!=null){if(e.position.x!=null){if(e.position.x=+e.position.x,!fc(e.position.x))throw new TypeError('The option "position.x" has to be a finite number.')}else e.position.x=0;if(e.position.y!=null){if(e.position.y=+e.position.y,!fc(e.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else e.position.x=0}else e.position=this.getViewPosition();if(e.scale!=null){if(e.scale=+e.scale,!(e.scale>0))throw new TypeError('The option "scale" has to be a number greater than zero.')}else e.scale=this.body.view.scale;e.animation===void 0&&(e.animation={duration:0}),e.animation===!1&&(e.animation={duration:0}),e.animation===!0&&(e.animation={}),e.animation.duration===void 0&&(e.animation.duration=1e3),e.animation.easingFunction===void 0&&(e.animation.easingFunction="easeInOutQuad"),this.animateView(e)}animateView(e){if(e===void 0)return;this.animationEasingFunction=e.animation.easingFunction,this.releaseNode(),e.locked===!0&&(this.lockedOnNodeId=e.lockedOnNode,this.lockedOnNodeOffset=e.offset),this.easingTime!=0&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=e.scale,this.body.view.scale=this.targetScale;const r=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n={x:r.x-e.position.x,y:r.y-e.position.y};if(this.targetTranslation={x:this.sourceTranslation.x+n.x*this.targetScale+e.offset.x,y:this.sourceTranslation.y+n.y*this.targetScale+e.offset.y},e.animation.duration===0)if(this.lockedOnNodeId!=null){var s;this.viewFunction=ae(s=this._lockedRedraw).call(s,this),this.body.emitter.on("initRedraw",this.viewFunction)}else this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw");else{var i;this.animationSpeed=1/(60*e.animation.duration*.001)||1/60,this.animationEasingFunction=e.animation.easingFunction,this.viewFunction=ae(i=this._transitionRedraw).call(i,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}_lockedRedraw(){const e={x:this.body.nodes[this.lockedOnNodeId].x,y:this.body.nodes[this.lockedOnNodeId].y},r=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n={x:r.x-e.x,y:r.y-e.y},s=this.body.view.translation,i={x:s.x+n.x*this.body.view.scale+this.lockedOnNodeOffset.x,y:s.y+n.y*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=i}releaseNode(){this.lockedOnNodeId!==void 0&&this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}_transitionRedraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.easingTime+=this.animationSpeed,this.easingTime=e===!0?1:this.easingTime;const r=K$e[this.animationEasingFunction](this.easingTime);if(this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*r,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*r,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*r},this.easingTime>=1){if(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,this.lockedOnNodeId!=null){var n;this.viewFunction=ae(n=this._lockedRedraw).call(n,this),this.body.emitter.on("initRedraw",this.viewFunction)}this.body.emitter.emit("animationFinished")}}getScale(){return this.body.view.scale}getViewPosition(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}function nJ(t){var e=t&&t.preventDefault||!1,r=t&&t.container||window,n={},s={keydown:{},keyup:{}},i={},o;for(o=97;o<=122;o++)i[String.fromCharCode(o)]={code:65+(o-97),shift:!1};for(o=65;o<=90;o++)i[String.fromCharCode(o)]={code:o,shift:!0};for(o=0;o<=9;o++)i[""+o]={code:48+o,shift:!1};for(o=1;o<=12;o++)i["F"+o]={code:111+o,shift:!1};for(o=0;o<=9;o++)i["num"+o]={code:96+o,shift:!1};i["num*"]={code:106,shift:!1},i["num+"]={code:107,shift:!1},i["num-"]={code:109,shift:!1},i["num/"]={code:111,shift:!1},i["num."]={code:110,shift:!1},i.left={code:37,shift:!1},i.up={code:38,shift:!1},i.right={code:39,shift:!1},i.down={code:40,shift:!1},i.space={code:32,shift:!1},i.enter={code:13,shift:!1},i.shift={code:16,shift:void 0},i.esc={code:27,shift:!1},i.backspace={code:8,shift:!1},i.tab={code:9,shift:!1},i.ctrl={code:17,shift:!1},i.alt={code:18,shift:!1},i.delete={code:46,shift:!1},i.pageup={code:33,shift:!1},i.pagedown={code:34,shift:!1},i["="]={code:187,shift:!1},i["-"]={code:189,shift:!1},i["]"]={code:221,shift:!1},i["["]={code:219,shift:!1};var a=function(d){u(d,"keydown")},l=function(d){u(d,"keyup")},u=function(d,h){if(s[h][d.keyCode]!==void 0){for(var f=s[h][d.keyCode],p=0;p<f.length;p++)(f[p].shift===void 0||f[p].shift==!0&&d.shiftKey==!0||f[p].shift==!1&&d.shiftKey==!1)&&f[p].fn(d);e==!0&&d.preventDefault()}};return n.bind=function(d,h,f){if(f===void 0&&(f="keydown"),i[d]===void 0)throw new Error("unsupported key: "+d);s[f][i[d].code]===void 0&&(s[f][i[d].code]=[]),s[f][i[d].code].push({fn:h,shift:i[d].shift})},n.bindAll=function(d,h){h===void 0&&(h="keydown");for(var f in i)i.hasOwnProperty(f)&&n.bind(f,d,h)},n.getKey=function(d){for(var h in i)if(i.hasOwnProperty(h)){if(d.shiftKey==!0&&i[h].shift==!0&&d.keyCode==i[h].code)return h;if(d.shiftKey==!1&&i[h].shift==!1&&d.keyCode==i[h].code)return h;if(d.keyCode==i[h].code&&h=="shift")return h}return"unknown key, currently not supported"},n.unbind=function(d,h,f){if(f===void 0&&(f="keydown"),i[d]===void 0)throw new Error("unsupported key: "+d);if(h!==void 0){var p=[],m=s[f][i[d].code];if(m!==void 0)for(var g=0;g<m.length;g++)m[g].fn==h&&m[g].shift==i[d].shift||p.push(s[f][i[d].code][g]);s[f][i[d].code]=p}else s[f][i[d].code]=[]},n.reset=function(){s={keydown:{},keyup:{}}},n.destroy=function(){s={keydown:{},keyup:{}},r.removeEventListener("keydown",a,!0),r.removeEventListener("keyup",l,!0)},r.addEventListener("keydown",a,!0),r.addEventListener("keyup",l,!0),n}class LFe{constructor(e,r){this.body=e,this.canvas=r,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",()=>{this.activated=!0,this.configureKeyboardBindings()}),this.body.emitter.on("deactivate",()=>{this.activated=!1,this.configureKeyboardBindings()}),this.body.emitter.on("destroy",()=>{this.keycharm!==void 0&&this.keycharm.destroy()}),this.options={}}setOptions(e){e!==void 0&&(this.options=e,this.create())}create(){this.options.navigationButtons===!0?this.iconsCreated===!1&&this.loadNavigationElements():this.iconsCreated===!0&&this.cleanNavigation(),this.configureKeyboardBindings()}cleanNavigation(){if(this.navigationHammers.length!=0){for(let e=0;e<this.navigationHammers.length;e++)this.navigationHammers[e].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}loadNavigationElements(){this.cleanNavigation(),this.navigationDOM={};const e=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],r=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(let o=0;o<e.length;o++){this.navigationDOM[e[o]]=document.createElement("div"),this.navigationDOM[e[o]].className="vis-button vis-"+e[o],this.navigationDOM.wrapper.appendChild(this.navigationDOM[e[o]]);const a=new Md(this.navigationDOM[e[o]]);if(r[o]==="_fit"){var n;W0(a,ae(n=this._fit).call(n,this))}else{var s;W0(a,ae(s=this.bindToRedraw).call(s,this,r[o]))}this.navigationHammers.push(a)}const i=new Md(this.canvas.frame);Lce(i,()=>{this._stopMovement()}),this.navigationHammers.push(i),this.iconsCreated=!0}bindToRedraw(e){if(this.boundFunctions[e]===void 0){var r;this.boundFunctions[e]=ae(r=this[e]).call(r,this),this.body.emitter.on("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_startRendering")}}unbindFromRedraw(e){this.boundFunctions[e]!==void 0&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[e])}_fit(){new Date().valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=new Date().valueOf())}_stopMovement(){for(const e in this.boundFunctions)Object.prototype.hasOwnProperty.call(this.boundFunctions,e)&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}_moveUp(){this.body.view.translation.y+=this.options.keyboard.speed.y}_moveDown(){this.body.view.translation.y-=this.options.keyboard.speed.y}_moveLeft(){this.body.view.translation.x+=this.options.keyboard.speed.x}_moveRight(){this.body.view.translation.x-=this.options.keyboard.speed.x}_zoomIn(){const e=this.body.view.scale,r=this.body.view.scale*(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,s=r/e,i=(1-s)*this.canvas.canvasViewCenter.x+n.x*s,o=(1-s)*this.canvas.canvasViewCenter.y+n.y*s;this.body.view.scale=r,this.body.view.translation={x:i,y:o},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}_zoomOut(){const e=this.body.view.scale,r=this.body.view.scale/(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,s=r/e,i=(1-s)*this.canvas.canvasViewCenter.x+n.x*s,o=(1-s)*this.canvas.canvasViewCenter.y+n.y*s;this.body.view.scale=r,this.body.view.translation={x:i,y:o},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}configureKeyboardBindings(){if(this.keycharm!==void 0&&this.keycharm.destroy(),this.options.keyboard.enabled===!0&&(this.options.keyboard.bindToWindow===!0?this.keycharm=nJ({container:window,preventDefault:!0}):this.keycharm=nJ({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),this.activated===!0)){var e,r,n,s,i,o,a,l,u,d,h,f,p,m,g,y,v,b,w,x,S,E,N,_;ae(e=this.keycharm).call(e,"up",()=>{this.bindToRedraw("_moveUp")},"keydown"),ae(r=this.keycharm).call(r,"down",()=>{this.bindToRedraw("_moveDown")},"keydown"),ae(n=this.keycharm).call(n,"left",()=>{this.bindToRedraw("_moveLeft")},"keydown"),ae(s=this.keycharm).call(s,"right",()=>{this.bindToRedraw("_moveRight")},"keydown"),ae(i=this.keycharm).call(i,"=",()=>{this.bindToRedraw("_zoomIn")},"keydown"),ae(o=this.keycharm).call(o,"num+",()=>{this.bindToRedraw("_zoomIn")},"keydown"),ae(a=this.keycharm).call(a,"num-",()=>{this.bindToRedraw("_zoomOut")},"keydown"),ae(l=this.keycharm).call(l,"-",()=>{this.bindToRedraw("_zoomOut")},"keydown"),ae(u=this.keycharm).call(u,"[",()=>{this.bindToRedraw("_zoomOut")},"keydown"),ae(d=this.keycharm).call(d,"]",()=>{this.bindToRedraw("_zoomIn")},"keydown"),ae(h=this.keycharm).call(h,"pageup",()=>{this.bindToRedraw("_zoomIn")},"keydown"),ae(f=this.keycharm).call(f,"pagedown",()=>{this.bindToRedraw("_zoomOut")},"keydown"),ae(p=this.keycharm).call(p,"up",()=>{this.unbindFromRedraw("_moveUp")},"keyup"),ae(m=this.keycharm).call(m,"down",()=>{this.unbindFromRedraw("_moveDown")},"keyup"),ae(g=this.keycharm).call(g,"left",()=>{this.unbindFromRedraw("_moveLeft")},"keyup"),ae(y=this.keycharm).call(y,"right",()=>{this.unbindFromRedraw("_moveRight")},"keyup"),ae(v=this.keycharm).call(v,"=",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),ae(b=this.keycharm).call(b,"num+",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),ae(w=this.keycharm).call(w,"num-",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),ae(x=this.keycharm).call(x,"-",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),ae(S=this.keycharm).call(S,"[",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),ae(E=this.keycharm).call(E,"]",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),ae(N=this.keycharm).call(N,"pageup",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),ae(_=this.keycharm).call(_,"pagedown",()=>{this.unbindFromRedraw("_zoomOut")},"keyup")}}}class BFe{constructor(e,r,n){var s,i,o,a,l,u,d,h,f,p,m,g,y;this.body=e,this.canvas=r,this.selectionHandler=n,this.navigationHandler=new LFe(e,r),this.body.eventListeners.onTap=ae(s=this.onTap).call(s,this),this.body.eventListeners.onTouch=ae(i=this.onTouch).call(i,this),this.body.eventListeners.onDoubleTap=ae(o=this.onDoubleTap).call(o,this),this.body.eventListeners.onHold=ae(a=this.onHold).call(a,this),this.body.eventListeners.onDragStart=ae(l=this.onDragStart).call(l,this),this.body.eventListeners.onDrag=ae(u=this.onDrag).call(u,this),this.body.eventListeners.onDragEnd=ae(d=this.onDragEnd).call(d,this),this.body.eventListeners.onMouseWheel=ae(h=this.onMouseWheel).call(h,this),this.body.eventListeners.onPinch=ae(f=this.onPinch).call(f,this),this.body.eventListeners.onMouseMove=ae(p=this.onMouseMove).call(p,this),this.body.eventListeners.onRelease=ae(m=this.onRelease).call(m,this),this.body.eventListeners.onContext=ae(g=this.onContext).call(g,this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=ae(y=this.getPointer).call(y,this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0,autoFocus:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},jr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("destroy",()=>{clearTimeout(this.popupTimer),delete this.body.functions.getPointer})}setOptions(e){e!==void 0&&(L0(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"],this.options,e),Ws(this.options,e,"keyboard"),e.tooltip&&(jr(this.options.tooltip,e.tooltip),e.tooltip.color&&(this.options.tooltip.color=HR(e.tooltip.color)))),this.navigationHandler.setOptions(this.options)}getPointer(e){return{x:e.x-W$e(this.canvas.frame.canvas),y:e.y-V$e(this.canvas.frame.canvas)}}onTouch(e){new Date().valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(e.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=new Date().valueOf())}onTap(e){const r=this.getPointer(e.center),n=this.selectionHandler.options.multiselect&&(e.changedPointers[0].ctrlKey||e.changedPointers[0].metaKey);this.checkSelectionChanges(r,n),this.selectionHandler.commitAndEmit(r,e),this.selectionHandler.generateClickEvent("click",e,r)}onDoubleTap(e){const r=this.getPointer(e.center);this.selectionHandler.generateClickEvent("doubleClick",e,r)}onHold(e){const r=this.getPointer(e.center),n=this.selectionHandler.options.multiselect;this.checkSelectionChanges(r,n),this.selectionHandler.commitAndEmit(r,e),this.selectionHandler.generateClickEvent("click",e,r),this.selectionHandler.generateClickEvent("hold",e,r)}onRelease(e){if(new Date().valueOf()-this.touchTime>10){const r=this.getPointer(e.center);this.selectionHandler.generateClickEvent("release",e,r),this.touchTime=new Date().valueOf()}}onContext(e){const r=this.getPointer({x:e.clientX,y:e.clientY});this.selectionHandler.generateClickEvent("oncontext",e,r)}checkSelectionChanges(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)===!0?this.selectionHandler.selectAdditionalOnPoint(e):this.selectionHandler.selectOnPoint(e)}_determineDifference(e,r){const n=function(s,i){const o=[];for(let a=0;a<s.length;a++){const l=s[a];Nt(i).call(i,l)===-1&&o.push(l)}return o};return{nodes:n(e.nodes,r.nodes),edges:n(e.edges,r.edges)}}onDragStart(e){if(this.drag.dragging)return;this.drag.pointer===void 0&&this.onTouch(e);const r=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=jr({},this.body.view.translation),this.drag.nodeId=void 0,e.srcEvent.shiftKey){this.body.selectionBox.show=!0;const n=this.getPointer(e.center);this.body.selectionBox.position.start={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)},this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)}}else if(r!==void 0&&this.options.dragNodes===!0){this.drag.nodeId=r.id,r.isSelected()===!1&&this.selectionHandler.setSelection({nodes:[r.id]}),this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer);for(const n of this.selectionHandler.getSelectedNodes()){const s={id:n.id,node:n,x:n.x,y:n.y,xFixed:n.options.fixed.x,yFixed:n.options.fixed.y};n.options.fixed.x=!0,n.options.fixed.y=!0,this.drag.selection.push(s)}}else this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer,void 0,!0)}onDrag(e){if(this.drag.pinched===!0)return;this.body.emitter.emit("unlockNode");const r=this.getPointer(e.center),n=this.drag.selection;if(n&&n.length&&this.options.dragNodes===!0){this.selectionHandler.generateClickEvent("dragging",e,r);const s=r.x-this.drag.pointer.x,i=r.y-this.drag.pointer.y;Mt(n).call(n,o=>{const a=o.node;o.xFixed===!1&&(a.x=this.canvas._XconvertDOMtoCanvas(this.canvas._XconvertCanvasToDOM(o.x)+s)),o.yFixed===!1&&(a.y=this.canvas._YconvertDOMtoCanvas(this.canvas._YconvertCanvasToDOM(o.y)+i))}),this.body.emitter.emit("startSimulation")}else{if(e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,r,void 0,!0),this.drag.pointer===void 0){this.onDragStart(e);return}this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(r.x),y:this.canvas._YconvertDOMtoCanvas(r.y)},this.body.emitter.emit("_requestRedraw")}if(this.options.dragView===!0&&!e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,r,void 0,!0),this.drag.pointer===void 0){this.onDragStart(e);return}const s=r.x-this.drag.pointer.x,i=r.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+s,y:this.drag.translation.y+i},this.body.emitter.emit("_requestRedraw")}}}onDragEnd(e){if(this.drag.dragging=!1,this.body.selectionBox.show){var r;this.body.selectionBox.show=!1;const n=this.body.selectionBox.position,s={minX:Math.min(n.start.x,n.end.x),minY:Math.min(n.start.y,n.end.y),maxX:Math.max(n.start.x,n.end.x),maxY:Math.max(n.start.y,n.end.y)},i=ss(r=this.body.nodeIndices).call(r,a=>{const l=this.body.nodes[a];return l.x>=s.minX&&l.x<=s.maxX&&l.y>=s.minY&&l.y<=s.maxY});Mt(i).call(i,a=>this.selectionHandler.selectObject(this.body.nodes[a]));const o=this.getPointer(e.center);this.selectionHandler.commitAndEmit(o,e),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw")}else{const n=this.drag.selection;n&&n.length?(Mt(n).call(n,function(s){s.node.options.fixed.x=s.xFixed,s.node.options.fixed.y=s.yFixed}),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}}onPinch(e){const r=this.getPointer(e.center);this.drag.pinched=!0,this.pinch.scale===void 0&&(this.pinch.scale=1);const n=this.pinch.scale*e.scale;this.zoom(n,r)}zoom(e,r){if(this.options.zoomView===!0){const n=this.body.view.scale;e<1e-5&&(e=1e-5),e>10&&(e=10);let s;this.drag!==void 0&&this.drag.dragging===!0&&(s=this.canvas.DOMtoCanvas(this.drag.pointer));const i=this.body.view.translation,o=e/n,a=(1-o)*r.x+i.x*o,l=(1-o)*r.y+i.y*o;if(this.body.view.scale=e,this.body.view.translation={x:a,y:l},s!=null){const u=this.canvas.canvasToDOM(s);this.drag.pointer.x=u.x,this.drag.pointer.y=u.y}this.body.emitter.emit("_requestRedraw"),n<e?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:r}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:r})}}onMouseWheel(e){if(this.options.zoomView===!0){if(e.deltaY!==0){let r=this.body.view.scale;r*=1+(e.deltaY<0?1:-1)*(this.options.zoomSpeed*.1);const n=this.getPointer({x:e.clientX,y:e.clientY});this.zoom(r,n)}e.preventDefault()}}onMouseMove(e){const r=this.getPointer({x:e.clientX,y:e.clientY});let n=!1;this.popup!==void 0&&(this.popup.hidden===!1&&this._checkHidePopup(r),this.popup.hidden===!1&&(n=!0,this.popup.setPosition(r.x+3,r.y-5),this.popup.show())),this.options.keyboard.autoFocus&&this.options.keyboard.bindToWindow===!1&&this.options.keyboard.enabled===!0&&this.canvas.frame.focus(),n===!1&&(this.popupTimer!==void 0&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=Vo(()=>this._checkShowPopup(r),this.options.tooltipDelay))),this.options.hover===!0&&this.selectionHandler.hoverObject(e,r)}_checkShowPopup(e){const r=this.canvas._XconvertDOMtoCanvas(e.x),n=this.canvas._YconvertDOMtoCanvas(e.y),s={left:r,top:n,right:r,bottom:n},i=this.popupObj===void 0?void 0:this.popupObj.id;let o=!1,a="node";if(this.popupObj===void 0){const l=this.body.nodeIndices,u=this.body.nodes;let d;const h=[];for(let f=0;f<l.length;f++)d=u[l[f]],d.isOverlappingWith(s)===!0&&(o=!0,d.getTitle()!==void 0&&h.push(l[f]));h.length>0&&(this.popupObj=u[h[h.length-1]],o=!0)}if(this.popupObj===void 0&&o===!1){const l=this.body.edgeIndices,u=this.body.edges;let d;const h=[];for(let f=0;f<l.length;f++)d=u[l[f]],d.isOverlappingWith(s)===!0&&d.connected===!0&&d.getTitle()!==void 0&&h.push(l[f]);h.length>0&&(this.popupObj=u[h[h.length-1]],a="edge")}this.popupObj!==void 0?this.popupObj.id!==i&&(this.popup===void 0&&(this.popup=new t4e(this.canvas.frame)),this.popup.popupTargetType=a,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(e.x+3,e.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):this.popup!==void 0&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}_checkHidePopup(e){const r=this.selectionHandler._pointerToPositionObject(e);let n=!1;if(this.popup.popupTargetType==="node"){if(this.body.nodes[this.popup.popupTargetId]!==void 0&&(n=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(r),n===!0)){const s=this.selectionHandler.getNodeAt(e);n=s===void 0?!1:s.id===this.popup.popupTargetId}}else this.selectionHandler.getNodeAt(e)===void 0&&this.body.edges[this.popup.popupTargetId]!==void 0&&(n=this.body.edges[this.popup.popupTargetId].isOverlappingWith(r));n===!1&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}var sJ={},iJ={},oJ;function zFe(){if(oJ)return iJ;oJ=1;var t=p$(),e=Tce();return t("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),iJ}var aJ;function WFe(){return aJ||(aJ=1,zFe()),sJ}var lJ={},PO,cJ;function Ou(){if(cJ)return PO;cJ=1;var t=Zh(),e=TypeError;return PO=function(r){if(typeof r=="object"&&"size"in r&&"has"in r&&"add"in r&&"delete"in r&&"keys"in r)return r;throw new e(t(r)+" is not a set")},PO}var IO,uJ;function Pu(){if(uJ)return IO;uJ=1;var t=Rs(),e=Oce(),r=t("Set"),n=r.prototype;return IO={Set:r,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:n},IO}var RO,dJ;function Iu(){if(dJ)return RO;dJ=1;var t=vs();return RO=function(e,r,n){for(var s=n?e:e.iterator,i=e.next,o,a;!(o=t(i,s)).done;)if(a=r(o.value),a!==void 0)return a},RO}var MO,hJ;function Ng(){if(hJ)return MO;hJ=1;var t=Iu();return MO=function(e,r,n){return n?t(e.keys(),r,!0):e.forEach(r)},MO}var AO,fJ;function w$(){if(fJ)return AO;fJ=1;var t=Pu(),e=Ng(),r=t.Set,n=t.add;return AO=function(s){var i=new r;return e(s,function(o){n(i,o)}),i},AO}var DO,pJ;function Cg(){return pJ||(pJ=1,DO=function(t){return t.size}),DO}var $O,mJ;function VFe(){return mJ||(mJ=1,$O=function(t){return{iterator:t,next:t.next,done:!1}}),$O}var FO,gJ;function Ru(){if(gJ)return FO;gJ=1;var t=da(),e=ao(),r=vs(),n=nf(),s=VFe(),i="Invalid size",o=RangeError,a=TypeError,l=Math.max,u=function(d,h){this.set=d,this.size=l(h,0),this.has=t(d.has),this.keys=t(d.keys)};return u.prototype={getIterator:function(){return s(e(r(this.keys,this.set)))},includes:function(d){return r(this.has,this.set,d)}},FO=function(d){e(d);var h=+d.size;if(h!==h)throw new a(i);var f=n(h);if(f<0)throw new o(i);return new u(d,f)},FO}var qO,yJ;function UFe(){if(yJ)return qO;yJ=1;var t=Ou(),e=Pu(),r=w$(),n=Cg(),s=Ru(),i=Ng(),o=Iu(),a=e.has,l=e.remove;return qO=function(d){var h=t(this),f=s(d),p=r(h);return n(h)<=f.size?i(h,function(m){f.includes(m)&&l(p,m)}):o(f.getIterator(),function(m){a(p,m)&&l(p,m)}),p},qO}var LO,vJ;function Mu(){return vJ||(vJ=1,LO=function(){return!1}),LO}var bJ;function HFe(){if(bJ)return lJ;bJ=1;var t=Me(),e=UFe(),r=dt(),n=Mu(),s=!n("difference",function(o){return o.size===0}),i=s||r(function(){var o={size:1,has:function(){return!0},keys:function(){var l=0;return{next:function(){var u=l++>1;return a.has(1)&&a.clear(),{done:u,value:2}}}}},a=new Set([1,2,3,4]);return a.difference(o).size!==3});return t({target:"Set",proto:!0,real:!0,forced:i},{difference:e}),lJ}var xJ={},BO,wJ;function KFe(){if(wJ)return BO;wJ=1;var t=Ou(),e=Pu(),r=Cg(),n=Ru(),s=Ng(),i=Iu(),o=e.Set,a=e.add,l=e.has;return BO=function(d){var h=t(this),f=n(d),p=new o;return r(h)>f.size?i(f.getIterator(),function(m){l(h,m)&&a(p,m)}):s(h,function(m){f.includes(m)&&a(p,m)}),p},BO}var SJ;function GFe(){if(SJ)return xJ;SJ=1;var t=Me(),e=dt(),r=KFe(),n=Mu(),s=!n("intersection",function(i){return i.size===2&&i.has(1)&&i.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return t({target:"Set",proto:!0,real:!0,forced:s},{intersection:r}),xJ}var EJ={},zO,_J;function YFe(){if(_J)return zO;_J=1;var t=Ou(),e=Pu().has,r=Cg(),n=Ru(),s=Ng(),i=Iu(),o=h$();return zO=function(l){var u=t(this),d=n(l);if(r(u)<=d.size)return s(u,function(f){if(d.includes(f))return!1},!0)!==!1;var h=d.getIterator();return i(h,function(f){if(e(u,f))return o(h,"normal",!1)})!==!1},zO}var NJ;function QFe(){if(NJ)return EJ;NJ=1;var t=Me(),e=YFe(),r=Mu(),n=!r("isDisjointFrom",function(s){return!s});return t({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:e}),EJ}var CJ={},WO,kJ;function XFe(){if(kJ)return WO;kJ=1;var t=Ou(),e=Cg(),r=Ng(),n=Ru();return WO=function(i){var o=t(this),a=n(i);return e(o)>a.size?!1:r(o,function(l){if(!a.includes(l))return!1},!0)!==!1},WO}var jJ;function JFe(){if(jJ)return CJ;jJ=1;var t=Me(),e=XFe(),r=Mu(),n=!r("isSubsetOf",function(s){return s});return t({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:e}),CJ}var TJ={},VO,OJ;function ZFe(){if(OJ)return VO;OJ=1;var t=Ou(),e=Pu().has,r=Cg(),n=Ru(),s=Iu(),i=h$();return VO=function(a){var l=t(this),u=n(a);if(r(l)<u.size)return!1;var d=u.getIterator();return s(d,function(h){if(!e(l,h))return i(d,"normal",!1)})!==!1},VO}var PJ;function eqe(){if(PJ)return TJ;PJ=1;var t=Me(),e=ZFe(),r=Mu(),n=!r("isSupersetOf",function(s){return!s});return t({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:e}),TJ}var IJ={},UO,RJ;function tqe(){if(RJ)return UO;RJ=1;var t=Ou(),e=Pu(),r=w$(),n=Ru(),s=Iu(),i=e.add,o=e.has,a=e.remove;return UO=function(u){var d=t(this),h=n(u).getIterator(),f=r(d);return s(h,function(p){o(d,p)?a(f,p):i(f,p)}),f},UO}var HO,MJ;function Bce(){return MJ||(MJ=1,HO=function(t){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[t](r);return n.size===1&&n.values().next().value===4}catch{return!1}}),HO}var AJ;function rqe(){if(AJ)return IJ;AJ=1;var t=Me(),e=tqe(),r=Bce(),n=Mu(),s=!n("symmetricDifference")||!r("symmetricDifference");return t({target:"Set",proto:!0,real:!0,forced:s},{symmetricDifference:e}),IJ}var DJ={},KO,$J;function nqe(){if($J)return KO;$J=1;var t=Ou(),e=Pu().add,r=w$(),n=Ru(),s=Iu();return KO=function(o){var a=t(this),l=n(o).getIterator(),u=r(a);return s(l,function(d){e(u,d)}),u},KO}var FJ;function sqe(){if(FJ)return DJ;FJ=1;var t=Me(),e=nqe(),r=Bce(),n=Mu(),s=!n("union")||!r("union");return t({target:"Set",proto:!0,real:!0,forced:s},{union:e}),DJ}var GO,qJ;function iqe(){if(qJ)return GO;qJ=1,lf(),WFe(),HFe(),GFe(),QFe(),JFe(),eqe(),rqe(),sqe(),g$();var t=jt();return GO=t.Set,GO}var YO,LJ;function oqe(){if(LJ)return YO;LJ=1;var t=iqe();return cf(),YO=t,YO}var QO,BJ;function aqe(){return BJ||(BJ=1,QO=oqe()),QO}var lqe=aqe(),Ma=Ve(lqe),zJ={},WJ={},XO,VJ;function cqe(){if(VJ)return XO;VJ=1;var t=ft(),e=m$(),r=vx().getWeakData,n=f$(),s=ao(),i=Qh(),o=rn(),a=bx(),l=Ll(),u=mn(),d=ku(),h=d.set,f=d.getterFor,p=l.find,m=l.findIndex,g=t([].splice),y=0,v=function(x){return x.frozen||(x.frozen=new b)},b=function(){this.entries=[]},w=function(x,S){return p(x.entries,function(E){return E[0]===S})};return b.prototype={get:function(x){var S=w(this,x);if(S)return S[1]},has:function(x){return!!w(this,x)},set:function(x,S){var E=w(this,x);E?E[1]=S:this.entries.push([x,S])},delete:function(x){var S=m(this.entries,function(E){return E[0]===x});return~S&&g(this.entries,S,1),!!~S}},XO={getConstructor:function(x,S,E,N){var _=x(function(P,O){n(P,k),h(P,{type:S,id:y++,frozen:null}),i(O)||a(O,P[N],{that:P,AS_ENTRIES:E})}),k=_.prototype,j=f(S),T=function(P,O,D){var F=j(P),$=r(s(O),!0);return $===!0?v(F).set(O,D):$[F.id]=D,P};return e(k,{delete:function(P){var O=j(this);if(!o(P))return!1;var D=r(P);return D===!0?v(O).delete(P):D&&u(D,O.id)&&delete D[O.id]},has:function(O){var D=j(this);if(!o(O))return!1;var F=r(O);return F===!0?v(D).has(O):F&&u(F,D.id)}}),e(k,E?{get:function(O){var D=j(this);if(o(O)){var F=r(O);if(F===!0)return v(D).get(O);if(F)return F[D.id]}},set:function(O,D){return T(this,O,D)}}:{add:function(O){return T(this,O,!0)}}),_}},XO}var UJ;function uqe(){if(UJ)return WJ;UJ=1;var t=kce(),e=Kt(),r=ft(),n=m$(),s=vx(),i=p$(),o=cqe(),a=rn(),l=ku().enforce,u=dt(),d=Tle(),h=Object,f=Array.isArray,p=h.isExtensible,m=h.isFrozen,g=h.isSealed,y=h.freeze,v=h.seal,b=!e.ActiveXObject&&"ActiveXObject"in e,w,x=function(P){return function(){return P(this,arguments.length?arguments[0]:void 0)}},S=i("WeakMap",x,o),E=S.prototype,N=r(E.set),_=function(){return t&&u(function(){var P=y([]);return N(new S,P,1),!m(P)})};if(d)if(b){w=o.getConstructor(x,"WeakMap",!0),s.enable();var k=r(E.delete),j=r(E.has),T=r(E.get);n(E,{delete:function(P){if(a(P)&&!p(P)){var O=l(this);return O.frozen||(O.frozen=new w),k(this,P)||O.frozen.delete(P)}return k(this,P)},has:function(O){if(a(O)&&!p(O)){var D=l(this);return D.frozen||(D.frozen=new w),j(this,O)||D.frozen.has(O)}return j(this,O)},get:function(O){if(a(O)&&!p(O)){var D=l(this);return D.frozen||(D.frozen=new w),j(this,O)?T(this,O):D.frozen.get(O)}return T(this,O)},set:function(O,D){if(a(O)&&!p(O)){var F=l(this);F.frozen||(F.frozen=new w),j(this,O)?N(this,O,D):F.frozen.set(O,D)}else N(this,O,D);return this}})}else _()&&n(E,{set:function(O,D){var F;return f(O)&&(m(O)?F=y:g(O)&&(F=v)),N(this,O,D),F&&F(O),this}});return WJ}var HJ;function dqe(){return HJ||(HJ=1,uqe()),zJ}var JO,KJ;function hqe(){if(KJ)return JO;KJ=1,lf(),dqe();var t=jt();return JO=t.WeakMap,JO}var ZO,GJ;function fqe(){if(GJ)return ZO;GJ=1;var t=hqe();return cf(),ZO=t,ZO}var eP,YJ;function pqe(){return YJ||(YJ=1,eP=fqe()),eP}var mqe=pqe(),kg=Ve(mqe);function Np(t,e,r){gqe(t,e),e.set(t,r)}function gqe(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function JR(t,e,r){return t.set(zce(t,e),r),r}function Dt(t,e){return t.get(zce(t,e))}function zce(t,e,r){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function QJ(t,e){const r=new Ma;for(const n of e)t.has(n)||r.add(n);return r}var Yu=new kg,di=new kg;class XJ{constructor(){Np(this,Yu,new Ma),Np(this,di,new Ma)}get size(){return Dt(di,this).size}add(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(const s of r)Dt(di,this).add(s)}delete(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(const s of r)Dt(di,this).delete(s)}clear(){Dt(di,this).clear()}getSelection(){return[...Dt(di,this)]}getChanges(){return{added:[...QJ(Dt(Yu,this),Dt(di,this))],deleted:[...QJ(Dt(di,this),Dt(Yu,this))],previous:[...new Ma(Dt(Yu,this))],current:[...new Ma(Dt(di,this))]}}commit(){const e=this.getChanges();JR(Yu,this,Dt(di,this)),JR(di,this,new Ma(Dt(Yu,this)));for(const r of e.added)r.select();for(const r of e.deleted)r.unselect();return e}}var Kl=new kg,Gl=new kg,tP=new kg;class yqe{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:()=>{};Np(this,Kl,new XJ),Np(this,Gl,new XJ),Np(this,tP,void 0),JR(tP,this,e)}get sizeNodes(){return Dt(Kl,this).size}get sizeEdges(){return Dt(Gl,this).size}getNodes(){return Dt(Kl,this).getSelection()}getEdges(){return Dt(Gl,this).getSelection()}addNodes(){Dt(Kl,this).add(...arguments)}addEdges(){Dt(Gl,this).add(...arguments)}deleteNodes(e){Dt(Kl,this).delete(e)}deleteEdges(e){Dt(Gl,this).delete(e)}clear(){Dt(Kl,this).clear(),Dt(Gl,this).clear()}commit(){const e={nodes:Dt(Kl,this).commit(),edges:Dt(Gl,this).commit()};for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return Dt(tP,this).call(this,e,...n),e}}class vqe{constructor(e,r){this.body=e,this.canvas=r,this._selectionAccumulator=new yqe,this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},jr(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",()=>{this.updateSelection()})}setOptions(e){e!==void 0&&hf(["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"],this.options,e)}selectOnPoint(e){let r=!1;if(this.options.selectable===!0){const n=this.getNodeAt(e)||this.getEdgeAt(e);this.unselectAll(),n!==void 0&&(r=this.selectObject(n)),this.body.emitter.emit("_requestRedraw")}return r}selectAdditionalOnPoint(e){let r=!1;if(this.options.selectable===!0){const n=this.getNodeAt(e)||this.getEdgeAt(e);n!==void 0&&(r=!0,n.isSelected()===!0?this.deselectObject(n):this.selectObject(n),this.body.emitter.emit("_requestRedraw"))}return r}_initBaseEvent(e,r){const n={};return n.pointer={DOM:{x:r.x,y:r.y},canvas:this.canvas.DOMtoCanvas(r)},n.event=e,n}generateClickEvent(e,r,n,s){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;const o=this._initBaseEvent(r,n);if(i===!0)o.nodes=[],o.edges=[];else{const a=this.getSelection();o.nodes=a.nodes,o.edges=a.edges}s!==void 0&&(o.previousSelection=s),e=="click"&&(o.items=this.getClickedItems(n)),r.controlEdge!==void 0&&(o.controlEdge=r.controlEdge),this.body.emitter.emit(e,o)}selectObject(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.selectConnectedEdges;return e!==void 0?(e instanceof Ut?(r===!0&&this._selectionAccumulator.addEdges(...e.edges),this._selectionAccumulator.addNodes(e)):this._selectionAccumulator.addEdges(e),!0):!1}deselectObject(e){e.isSelected()===!0&&(e.selected=!1,this._removeFromSelection(e))}_getAllNodesOverlappingWith(e){const r=[],n=this.body.nodes;for(let s=0;s<this.body.nodeIndices.length;s++){const i=this.body.nodeIndices[s];n[i].isOverlappingWith(e)&&r.push(i)}return r}_pointerToPositionObject(e){const r=this.canvas.DOMtoCanvas(e);return{left:r.x-1,top:r.y+1,right:r.x+1,bottom:r.y-1}}getNodeAt(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=this._pointerToPositionObject(e),s=this._getAllNodesOverlappingWith(n);if(s.length>0)return r===!0?this.body.nodes[s[s.length-1]]:s[s.length-1]}_getEdgesOverlappingWith(e,r){const n=this.body.edges;for(let s=0;s<this.body.edgeIndices.length;s++){const i=this.body.edgeIndices[s];n[i].isOverlappingWith(e)&&r.push(i)}}_getAllEdgesOverlappingWith(e){const r=[];return this._getEdgesOverlappingWith(e,r),r}getEdgeAt(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=this.canvas.DOMtoCanvas(e);let s=10,i=null;const o=this.body.edges;for(let a=0;a<this.body.edgeIndices.length;a++){const l=this.body.edgeIndices[a],u=o[l];if(u.connected){const d=u.from.x,h=u.from.y,f=u.to.x,p=u.to.y,m=u.edgeType.getDistanceToEdge(d,h,f,p,n.x,n.y);m<s&&(i=l,s=m)}}if(i!==null)return r===!0?this.body.edges[i]:i}_addToHover(e){e instanceof Ut?this.hoverObj.nodes[e.id]=e:this.hoverObj.edges[e.id]=e}_removeFromSelection(e){e instanceof Ut?(this._selectionAccumulator.deleteNodes(e),this._selectionAccumulator.deleteEdges(...e.edges)):this._selectionAccumulator.deleteEdges(e)}unselectAll(){this._selectionAccumulator.clear()}getSelectedNodeCount(){return this._selectionAccumulator.sizeNodes}getSelectedEdgeCount(){return this._selectionAccumulator.sizeEdges}_hoverConnectedEdges(e){for(let r=0;r<e.edges.length;r++){const n=e.edges[r];n.hover=!0,this._addToHover(n)}}emitBlurEvent(e,r,n){const s=this._initBaseEvent(e,r);n.hover===!0&&(n.hover=!1,n instanceof Ut?(s.node=n.id,this.body.emitter.emit("blurNode",s)):(s.edge=n.id,this.body.emitter.emit("blurEdge",s)))}emitHoverEvent(e,r,n){const s=this._initBaseEvent(e,r);let i=!1;return n.hover===!1&&(n.hover=!0,this._addToHover(n),i=!0,n instanceof Ut?(s.node=n.id,this.body.emitter.emit("hoverNode",s)):(s.edge=n.id,this.body.emitter.emit("hoverEdge",s))),i}hoverObject(e,r){let n=this.getNodeAt(r);n===void 0&&(n=this.getEdgeAt(r));let s=!1;for(const i in this.hoverObj.nodes)Object.prototype.hasOwnProperty.call(this.hoverObj.nodes,i)&&(n===void 0||n instanceof Ut&&n.id!=i||n instanceof vl)&&(this.emitBlurEvent(e,r,this.hoverObj.nodes[i]),delete this.hoverObj.nodes[i],s=!0);for(const i in this.hoverObj.edges)Object.prototype.hasOwnProperty.call(this.hoverObj.edges,i)&&(s===!0?(this.hoverObj.edges[i].hover=!1,delete this.hoverObj.edges[i]):(n===void 0||n instanceof vl&&n.id!=i||n instanceof Ut&&!n.hover)&&(this.emitBlurEvent(e,r,this.hoverObj.edges[i]),delete this.hoverObj.edges[i],s=!0));if(n!==void 0){const i=lr(this.hoverObj.edges).length,o=lr(this.hoverObj.nodes).length,a=n instanceof vl&&i===0&&o===0,l=n instanceof Ut&&i===0&&o===0;(s||a||l)&&(s=this.emitHoverEvent(e,r,n)),n instanceof Ut&&this.options.hoverConnectedEdges===!0&&this._hoverConnectedEdges(n)}s===!0&&this.body.emitter.emit("_requestRedraw")}commitWithoutEmitting(){this._selectionAccumulator.commit()}commitAndEmit(e,r){let n=!1;const s=this._selectionAccumulator.commit(),i={nodes:s.nodes.previous,edges:s.edges.previous};s.edges.deleted.length>0&&(this.generateClickEvent("deselectEdge",r,e,i),n=!0),s.nodes.deleted.length>0&&(this.generateClickEvent("deselectNode",r,e,i),n=!0),s.nodes.added.length>0&&(this.generateClickEvent("selectNode",r,e),n=!0),s.edges.added.length>0&&(this.generateClickEvent("selectEdge",r,e),n=!0),n===!0&&this.generateClickEvent("select",r,e)}getSelection(){return{nodes:this.getSelectedNodeIds(),edges:this.getSelectedEdgeIds()}}getSelectedNodes(){return this._selectionAccumulator.getNodes()}getSelectedEdges(){return this._selectionAccumulator.getEdges()}getSelectedNodeIds(){var e;return wh(e=this._selectionAccumulator.getNodes()).call(e,r=>r.id)}getSelectedEdgeIds(){var e;return wh(e=this._selectionAccumulator.getEdges()).call(e,r=>r.id)}setSelection(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e||!e.nodes&&!e.edges)throw new TypeError("Selection must be an object with nodes and/or edges properties");if((r.unselectAll||r.unselectAll===void 0)&&this.unselectAll(),e.nodes)for(const n of e.nodes){const s=this.body.nodes[n];if(!s)throw new RangeError('Node with id "'+n+'" not found');this.selectObject(s,r.highlightEdges)}if(e.edges)for(const n of e.edges){const s=this.body.edges[n];if(!s)throw new RangeError('Edge with id "'+n+'" not found');this.selectObject(s)}this.body.emitter.emit("_requestRedraw"),this._selectionAccumulator.commit()}selectNodes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({nodes:e},{highlightEdges:r})}selectEdges(e){if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({edges:e})}updateSelection(){for(const e in this._selectionAccumulator.getNodes())Object.prototype.hasOwnProperty.call(this.body.nodes,e.id)||this._selectionAccumulator.deleteNodes(e);for(const e in this._selectionAccumulator.getEdges())Object.prototype.hasOwnProperty.call(this.body.edges,e.id)||this._selectionAccumulator.deleteEdges(e)}getClickedItems(e){const r=this.canvas.DOMtoCanvas(e),n=[],s=this.body.nodeIndices,i=this.body.nodes;for(let l=s.length-1;l>=0;l--){const d=i[s[l]].getItemsOnPoint(r);n.push.apply(n,d)}const o=this.body.edgeIndices,a=this.body.edges;for(let l=o.length-1;l>=0;l--){const d=a[o[l]].getItemsOnPoint(r);n.push.apply(n,d)}return n}}var JJ={},rP,ZJ;function bqe(){if(ZJ)return rP;ZJ=1;var t=sf(),e=Math.floor,r=function(n,s){var i=n.length;if(i<8)for(var o=1,a,l;o<i;){for(l=o,a=n[o];l&&s(n[l-1],a)>0;)n[l]=n[--l];l!==o++&&(n[l]=a)}else for(var u=e(i/2),d=r(t(n,0,u),s),h=r(t(n,u),s),f=d.length,p=h.length,m=0,g=0;m<f||g<p;)n[m+g]=m<f&&g<p?s(d[m],h[g])<=0?d[m++]:h[g++]:m<f?d[m++]:h[g++];return n};return rP=r,rP}var nP,eZ;function xqe(){if(eZ)return nP;eZ=1;var t=Xh(),e=t.match(/firefox\/(\d+)/i);return nP=!!e&&+e[1],nP}var sP,tZ;function wqe(){if(tZ)return sP;tZ=1;var t=Xh();return sP=/MSIE|Trident/.test(t),sP}var iP,rZ;function Sqe(){if(rZ)return iP;rZ=1;var t=Xh(),e=t.match(/AppleWebKit\/(\d+)\./);return iP=!!e&&+e[1],iP}var nZ;function Eqe(){if(nZ)return JJ;nZ=1;var t=Me(),e=ft(),r=da(),n=Ms(),s=ha(),i=Lle(),o=li(),a=dt(),l=bqe(),u=uf(),d=xqe(),h=wqe(),f=dg(),p=Sqe(),m=[],g=e(m.sort),y=e(m.push),v=a(function(){m.sort(void 0)}),b=a(function(){m.sort(null)}),w=u("sort"),x=!a(function(){if(f)return f<70;if(!(d&&d>3)){if(h)return!0;if(p)return p<603;var N="",_,k,j,T;for(_=65;_<76;_++){switch(k=String.fromCharCode(_),_){case 66:case 69:case 70:case 72:j=3;break;case 68:case 71:j=4;break;default:j=2}for(T=0;T<47;T++)m.push({k:k+T,v:j})}for(m.sort(function(P,O){return O.v-P.v}),T=0;T<m.length;T++)k=m[T].k.charAt(0),N.charAt(N.length-1)!==k&&(N+=k);return N!=="DGBEFHACIJK"}}),S=v||!b||!w||!x,E=function(N){return function(_,k){return k===void 0?-1:_===void 0?1:N!==void 0?+N(_,k)||0:o(_)>o(k)?1:-1}};return t({target:"Array",proto:!0,forced:S},{sort:function(_){_!==void 0&&r(_);var k=n(this);if(x)return _===void 0?g(k):g(k,_);var j=[],T=s(k),P,O;for(O=0;O<T;O++)O in k&&y(j,k[O]);for(l(j,E(_)),P=s(j),O=0;O<P;)k[O]=j[O++];for(;O<T;)i(k,O++);return k}}),JJ}var oP,sZ;function _qe(){if(sZ)return oP;sZ=1,Eqe();var t=gn();return oP=t("Array","sort"),oP}var aP,iZ;function Nqe(){if(iZ)return aP;iZ=1;var t=Mr(),e=_qe(),r=Array.prototype;return aP=function(n){var s=n.sort;return n===r||t(r,n)&&s===r.sort?e:s},aP}var lP,oZ;function Cqe(){if(oZ)return lP;oZ=1;var t=Nqe();return lP=t,lP}var cP,aZ;function kqe(){return aZ||(aZ=1,cP=Cqe()),cP}var jqe=kqe(),Dd=Ve(jqe),lZ={},uP,cZ;function Tqe(){if(cZ)return uP;cZ=1;var t=da(),e=Ms(),r=sx(),n=ha(),s=TypeError,i="Reduce of empty array with no initial value",o=function(a){return function(l,u,d,h){var f=e(l),p=r(f),m=n(f);if(t(u),m===0&&d<2)throw new s(i);var g=a?m-1:0,y=a?-1:1;if(d<2)for(;;){if(g in p){h=p[g],g+=y;break}if(g+=y,a?g<0:m<=g)throw new s(i)}for(;a?g>=0:m>g;g+=y)g in p&&(h=u(h,p[g],g,f));return h}};return uP={left:o(!1),right:o(!0)},uP}var dP,uZ;function Oqe(){if(uZ)return dP;uZ=1;var t=zle();return dP=t==="NODE",dP}var dZ;function Pqe(){if(dZ)return lZ;dZ=1;var t=Me(),e=Tqe().left,r=uf(),n=dg(),s=Oqe(),i=!s&&n>79&&n<83,o=i||!r("reduce");return t({target:"Array",proto:!0,forced:o},{reduce:function(l){var u=arguments.length;return e(this,l,u,u>1?arguments[1]:void 0)}}),lZ}var hP,hZ;function Iqe(){if(hZ)return hP;hZ=1,Pqe();var t=gn();return hP=t("Array","reduce"),hP}var fP,fZ;function Rqe(){if(fZ)return fP;fZ=1;var t=Mr(),e=Iqe(),r=Array.prototype;return fP=function(n){var s=n.reduce;return n===r||t(r,n)&&s===r.reduce?e:s},fP}var pP,pZ;function Mqe(){if(pZ)return pP;pZ=1;var t=Rqe();return pP=t,pP}var mP,mZ;function Aqe(){return mZ||(mZ=1,mP=Mqe()),mP}var Dqe=Aqe(),Wce=Ve(Dqe);class Vce{abstract(){throw new Error("Can't instantiate abstract class!")}fake_use(){}curveType(){return this.abstract()}getPosition(e){return this.fake_use(e),this.abstract()}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;this.fake_use(e,r,n),this.abstract()}getTreeSize(e){return this.fake_use(e),this.abstract()}sort(e){this.fake_use(e),this.abstract()}fix(e,r){this.fake_use(e,r),this.abstract()}shift(e,r){this.fake_use(e,r),this.abstract()}}class $qe extends Vce{constructor(e){super(),this.layout=e}curveType(){return"horizontal"}getPosition(e){return e.x}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;n!==void 0&&this.layout.hierarchical.addToOrdering(e,n),e.x=r}getTreeSize(e){const r=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:r.min_x,max:r.max_x}}sort(e){Dd(e).call(e,function(r,n){return r.x-n.x})}fix(e,r){e.y=this.layout.options.hierarchical.levelSeparation*r,e.options.fixed.y=!0}shift(e,r){this.layout.body.nodes[e].x+=r}}class Fqe extends Vce{constructor(e){super(),this.layout=e}curveType(){return"vertical"}getPosition(e){return e.y}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;n!==void 0&&this.layout.hierarchical.addToOrdering(e,n),e.y=r}getTreeSize(e){const r=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:r.min_y,max:r.max_y}}sort(e){Dd(e).call(e,function(r,n){return r.y-n.y})}fix(e,r){e.x=this.layout.options.hierarchical.levelSeparation*r,e.options.fixed.x=!0}shift(e,r){this.layout.body.nodes[e].y+=r}}var gZ={},yZ;function qqe(){if(yZ)return gZ;yZ=1;var t=Me(),e=Ll().every,r=uf(),n=r("every");return t({target:"Array",proto:!0,forced:!n},{every:function(i){return e(this,i,arguments.length>1?arguments[1]:void 0)}}),gZ}var gP,vZ;function Lqe(){if(vZ)return gP;vZ=1,qqe();var t=gn();return gP=t("Array","every"),gP}var yP,bZ;function Bqe(){if(bZ)return yP;bZ=1;var t=Mr(),e=Lqe(),r=Array.prototype;return yP=function(n){var s=n.every;return n===r||t(r,n)&&s===r.every?e:s},yP}var vP,xZ;function zqe(){if(xZ)return vP;xZ=1;var t=Bqe();return vP=t,vP}var bP,wZ;function Wqe(){return wZ||(wZ=1,bP=zqe()),bP}var Vqe=Wqe(),Uce=Ve(Vqe);function Uqe(t,e){const r=new Ma;return Mt(t).call(t,n=>{var s;Mt(s=n.edges).call(s,i=>{i.connected&&r.add(i)})}),Mt(r).call(r,n=>{const s=n.from.id,i=n.to.id;e[s]==null&&(e[s]=0),(e[i]==null||e[s]>=e[i])&&(e[i]=e[s]+1)}),e}function Hqe(t){return Hce(e=>{var r,n;return Uce(r=ss(n=e.edges).call(n,s=>t.has(s.toId))).call(r,s=>s.to===e)},(e,r)=>r>e,"from",t)}function Kqe(t){return Hce(e=>{var r,n;return Uce(r=ss(n=e.edges).call(n,s=>t.has(s.toId))).call(r,s=>s.from===e)},(e,r)=>r<e,"to",t)}function Hce(t,e,r,n){var s;const i=Mc(null),o=Wce(s=[...Dce(n).call(n)]).call(s,(h,f)=>h+1+f.edges.length,0),a=r+"Id",l=r==="to"?1:-1;for(const[h,f]of n){if(!n.has(h)||!t(f))continue;i[h]=0;const p=[f];let m=0,g;for(;g=p.pop();){var u,d;if(!n.has(h))continue;const y=i[g.id]+l;if(Mt(u=ss(d=g.edges).call(d,v=>v.connected&&v.to!==v.from&&v[r]!==g&&n.has(v.toId)&&n.has(v.fromId))).call(u,v=>{const b=v[a],w=i[b];(w==null||e(y,w))&&(i[b]=y,p.push(v[r]))}),m>o)return Uqe(n,i);++m}}return i}class Gqe{constructor(){this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}addRelation(e,r){this.childrenReference[e]===void 0&&(this.childrenReference[e]=[]),this.childrenReference[e].push(r),this.parentReference[r]===void 0&&(this.parentReference[r]=[]),this.parentReference[r].push(e)}checkIfTree(){for(const e in this.parentReference)if(this.parentReference[e].length>1){this.isTree=!1;return}this.isTree=!0}numTrees(){return this.treeIndex+1}setTreeIndex(e,r){r!==void 0&&this.trees[e.id]===void 0&&(this.trees[e.id]=r,this.treeIndex=Math.max(r,this.treeIndex))}ensureLevel(e){this.levels[e]===void 0&&(this.levels[e]=0)}getMaxLevel(e){const r={},n=s=>{if(r[s]!==void 0)return r[s];let i=this.levels[s];if(this.childrenReference[s]){const o=this.childrenReference[s];if(o.length>0)for(let a=0;a<o.length;a++)i=Math.max(i,n(o[a]))}return r[s]=i,i};return n(e)}levelDownstream(e,r){this.levels[r.id]===void 0&&(this.levels[e.id]===void 0&&(this.levels[e.id]=0),this.levels[r.id]=this.levels[e.id]+1)}setMinLevelToZero(){var e;const r=new y$;let n=0;const s=Dd(e=[...new Ma(cDe(this.levels))]).call(e,(i,o)=>i-o);for(const i of s)r.set(i,n++);for(const i in this.levels)Object.prototype.hasOwnProperty.call(this.levels,i)&&(this.levels[i]=r.get(this.levels[i]))}getTreeSize(e,r){let n=1e9,s=-1e9,i=1e9,o=-1e9;for(const a in this.trees)if(Object.prototype.hasOwnProperty.call(this.trees,a)&&this.trees[a]===r){const l=e[a];n=Math.min(l.x,n),s=Math.max(l.x,s),i=Math.min(l.y,i),o=Math.max(l.y,o)}return{min_x:n,max_x:s,min_y:i,max_y:o}}hasSameParent(e,r){const n=this.parentReference[e.id],s=this.parentReference[r.id];if(n===void 0||s===void 0)return!1;for(let i=0;i<n.length;i++)for(let o=0;o<s.length;o++)if(n[i]==s[o])return!0;return!1}inSameSubNetwork(e,r){return this.trees[e.id]===this.trees[r.id]}getLevels(){return lr(this.distributionOrdering)}addToOrdering(e,r){this.distributionOrdering[r]===void 0&&(this.distributionOrdering[r]=[]);let n=!1;const s=this.distributionOrdering[r];for(const i in s)if(s[i]===e){n=!0;break}n||(this.distributionOrdering[r].push(e),this.distributionIndex[e.id]=this.distributionOrdering[r].length-1)}}class Yqe{constructor(e){this.body=e,this._resetRNG(Math.random()+":"+D0()),this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},jr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("_dataChanged",()=>{this.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",()=>{this.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",()=>{this.setupHierarchicalLayout()}),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",()=>{if(this.options.hierarchical.enabled!==!0)return;const e=this.direction.curveType();this.body.emitter.emit("_forceDisableDynamicCurves",e,!1)})}setOptions(e,r){if(e!==void 0){const n=this.options.hierarchical,s=n.enabled;if(hf(["randomSeed","improvedLayout","clusterThreshold"],this.options,e),Ws(this.options,e,"hierarchical"),e.randomSeed!==void 0&&this._resetRNG(e.randomSeed),n.enabled===!0)return s===!0&&this.body.emitter.emit("refresh",!0),n.direction==="RL"||n.direction==="DU"?n.levelSeparation>0&&(n.levelSeparation*=-1):n.levelSeparation<0&&(n.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(r);if(s===!0)return this.body.emitter.emit("refresh"),$t(r,this.optionsBackup)}return r}_resetRNG(e){this.initialRandomSeed=e,this._rng=yx(this.initialRandomSeed)}adaptAllOptionsForHierarchicalLayout(e){if(this.options.hierarchical.enabled===!0){const r=this.optionsBackup.physics;e.physics===void 0||e.physics===!0?(e.physics={enabled:r.enabled===void 0?!0:r.enabled,solver:"hierarchicalRepulsion"},r.enabled=r.enabled===void 0?!0:r.enabled,r.solver=r.solver||"barnesHut"):typeof e.physics=="object"?(r.enabled=e.physics.enabled===void 0?!0:e.physics.enabled,r.solver=e.physics.solver||"barnesHut",e.physics.solver="hierarchicalRepulsion"):e.physics!==!1&&(r.solver="barnesHut",e.physics={solver:"hierarchicalRepulsion"});let n=this.direction.curveType();if(e.edges===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges={smooth:!1};else if(e.edges.smooth===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges.smooth=!1;else if(typeof e.edges.smooth=="boolean")this.optionsBackup.edges={smooth:e.edges.smooth},e.edges.smooth={enabled:e.edges.smooth,type:n};else{const s=e.edges.smooth;s.type!==void 0&&s.type!=="dynamic"&&(n=s.type),this.optionsBackup.edges={smooth:{enabled:s.enabled===void 0?!0:s.enabled,type:s.type===void 0?"dynamic":s.type,roundness:s.roundness===void 0?.5:s.roundness,forceDirection:s.forceDirection===void 0?!1:s.forceDirection}},e.edges.smooth={enabled:s.enabled===void 0?!0:s.enabled,type:n,roundness:s.roundness===void 0?.5:s.roundness,forceDirection:s.forceDirection===void 0?!1:s.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",n)}return e}positionInitially(e){if(this.options.hierarchical.enabled!==!0){this._resetRNG(this.initialRandomSeed);const r=e.length+50;for(let n=0;n<e.length;n++){const s=e[n],i=2*Math.PI*this._rng();s.x===void 0&&(s.x=r*Math.cos(i)),s.y===void 0&&(s.y=r*Math.sin(i))}}}layoutNetwork(){if(this.options.hierarchical.enabled!==!0&&this.options.improvedLayout===!0){const e=this.body.nodeIndices;let r=0;for(let n=0;n<e.length;n++)this.body.nodes[e[n]].predefinedPosition===!0&&(r+=1);if(r<.5*e.length){let s=0;const i=this.options.clusterThreshold,o={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(e.length>i){const l=e.length;for(;e.length>i&&s<=10;){s+=1;const u=e.length;s%3===0?this.body.modules.clustering.clusterBridges(o):this.body.modules.clustering.clusterOutliers(o);const d=e.length;if(u==d&&s%3!==0){this._declusterAll(),this.body.emitter.emit("_layoutFailed"),console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.");return}}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*l)})}s>10&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(e,this.body.edgeIndices,!0),this._shiftToCenter();const a=70;for(let l=0;l<e.length;l++){const u=this.body.nodes[e[l]];u.predefinedPosition===!1&&(u.x+=(.5-this._rng())*a,u.y+=(.5-this._rng())*a)}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}_shiftToCenter(){const e=$n.getRangeCore(this.body.nodes,this.body.nodeIndices),r=$n.findCenter(e);for(let n=0;n<this.body.nodeIndices.length;n++){const s=this.body.nodes[this.body.nodeIndices[n]];s.x-=r.x,s.y-=r.y}}_declusterAll(){let e=!0;for(;e===!0;){e=!1;for(let r=0;r<this.body.nodeIndices.length;r++)this.body.nodes[this.body.nodeIndices[r]].isCluster===!0&&(e=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[r],{},!1));e===!0&&this.body.emitter.emit("_dataChanged")}}getSeed(){return this.initialRandomSeed}setupHierarchicalLayout(){if(this.options.hierarchical.enabled===!0&&this.body.nodeIndices.length>0){let e,r,n=!1,s=!1;this.lastNodeOnLevel={},this.hierarchical=new Gqe;for(r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&(e=this.body.nodes[r],e.options.level!==void 0?(n=!0,this.hierarchical.levels[r]=e.options.level):s=!0);if(s===!0&&n===!0)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");{if(s===!0){const o=this.options.hierarchical.sortMethod;o==="hubsize"?this._determineLevelsByHubsize():o==="directed"?this._determineLevelsDirected():o==="custom"&&this._determineLevelsCustomCallback()}for(const o in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,o)&&this.hierarchical.ensureLevel(o);const i=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(i),this._condenseHierarchy(),this._shiftToCenter()}}}_condenseHierarchy(){var e=this;let r=!1;const n={},s=()=>{const v=o();let b=0;for(let w=0;w<v.length-1;w++){const x=v[w].max-v[w+1].min;b+=x+this.options.hierarchical.treeSpacing,i(w+1,b)}},i=(v,b)=>{const w=this.hierarchical.trees;for(const x in w)Object.prototype.hasOwnProperty.call(w,x)&&w[x]===v&&this.direction.shift(x,b)},o=()=>{const v=[];for(let b=0;b<this.hierarchical.numTrees();b++)v.push(this.direction.getTreeSize(b));return v},a=(v,b)=>{if(!b[v.id]&&(b[v.id]=!0,this.hierarchical.childrenReference[v.id])){const w=this.hierarchical.childrenReference[v.id];if(w.length>0)for(let x=0;x<w.length;x++)a(this.body.nodes[w[x]],b)}},l=function(v){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e9,w=1e9,x=1e9,S=1e9,E=-1e9;for(const N in v)if(Object.prototype.hasOwnProperty.call(v,N)){const _=e.body.nodes[N],k=e.hierarchical.levels[_.id],j=e.direction.getPosition(_),[T,P]=e._getSpaceAroundNode(_,v);w=Math.min(T,w),x=Math.min(P,x),k<=b&&(S=Math.min(j,S),E=Math.max(j,E))}return[S,E,w,x]},u=(v,b)=>{const w=this.hierarchical.getMaxLevel(v.id),x=this.hierarchical.getMaxLevel(b.id);return Math.min(w,x)},d=(v,b,w)=>{const x=this.hierarchical;for(let S=0;S<b.length;S++){const E=b[S],N=x.distributionOrdering[E];if(N.length>1)for(let _=0;_<N.length-1;_++){const k=N[_],j=N[_+1];x.hasSameParent(k,j)&&x.inSameSubNetwork(k,j)&&v(k,j,w)}}},h=function(v,b){let w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const x=e.direction.getPosition(v),S=e.direction.getPosition(b),E=Math.abs(S-x),N=e.options.hierarchical.nodeSpacing;if(E>N){const _={},k={};a(v,_),a(b,k);const j=u(v,b),T=l(_,j),P=l(k,j),O=T[1],D=P[0],F=P[2];if(Math.abs(O-D)>N){let q=O-D+N;q<-F+N&&(q=-F+N),q<0&&(e._shiftBlock(b.id,q),r=!0,w===!0&&e._centerParent(b))}}},f=(v,b)=>{const w=b.id,x=b.edges,S=this.hierarchical.levels[b.id],E=this.options.hierarchical.levelSeparation*this.options.hierarchical.levelSeparation,N={},_=[];for(let F=0;F<x.length;F++){const $=x[F];if($.toId!=$.fromId){const q=$.toId==w?$.from:$.to;N[x[F].id]=q,this.hierarchical.levels[q.id]<S&&_.push($)}}const k=(F,$)=>{let q=0;for(let M=0;M<$.length;M++)if(N[$[M].id]!==void 0){const z=this.direction.getPosition(N[$[M].id])-F;q+=z/Math.sqrt(z*z+E)}return q},j=(F,$)=>{let q=0;for(let M=0;M<$.length;M++)if(N[$[M].id]!==void 0){const z=this.direction.getPosition(N[$[M].id])-F;q-=E*Math.pow(z*z+E,-1.5)}return q},T=(F,$)=>{let q=this.direction.getPosition(b);const M={};for(let z=0;z<F;z++){const Y=k(q,$),H=j(q,$),me=40,G=Math.max(-me,Math.min(me,Math.round(Y/H)));if(q=q-G,M[q]!==void 0)break;M[q]=z}return q},P=F=>{const $=this.direction.getPosition(b);if(n[b.id]===void 0){const me={};a(b,me),n[b.id]=me}const q=l(n[b.id]),M=q[2],z=q[3],Y=F-$;let H=0;Y>0?H=Math.min(Y,z-this.options.hierarchical.nodeSpacing):Y<0&&(H=-Math.min(-Y,M-this.options.hierarchical.nodeSpacing)),H!=0&&(this._shiftBlock(b.id,H),r=!0)},O=F=>{const $=this.direction.getPosition(b),[q,M]=this._getSpaceAroundNode(b),z=F-$;let Y=$;z>0?Y=Math.min($+(M-this.options.hierarchical.nodeSpacing),F):z<0&&(Y=Math.max($-(q-this.options.hierarchical.nodeSpacing),F)),Y!==$&&(this.direction.setPosition(b,Y),r=!0)};let D=T(v,_);P(D),D=T(v,x),O(D)},p=v=>{let b=this.hierarchical.getLevels();b=Rc(b).call(b);for(let w=0;w<v;w++){r=!1;for(let x=0;x<b.length;x++){const S=b[x],E=this.hierarchical.distributionOrdering[S];for(let N=0;N<E.length;N++)f(1e3,E[N])}if(r!==!0)break}},m=v=>{let b=this.hierarchical.getLevels();b=Rc(b).call(b);for(let w=0;w<v&&(r=!1,d(h,b,!0),r===!0);w++);},g=()=>{for(const v in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,v)&&this._centerParent(this.body.nodes[v])},y=()=>{let v=this.hierarchical.getLevels();v=Rc(v).call(v);for(let b=0;b<v.length;b++){const w=v[b],x=this.hierarchical.distributionOrdering[w];for(let S=0;S<x.length;S++)this._centerParent(x[S])}};this.options.hierarchical.blockShifting===!0&&(m(5),g()),this.options.hierarchical.edgeMinimization===!0&&p(20),this.options.hierarchical.parentCentralization===!0&&y(),s()}_getSpaceAroundNode(e,r){let n=!0;r===void 0&&(n=!1);const s=this.hierarchical.levels[e.id];if(s!==void 0){const i=this.hierarchical.distributionIndex[e.id],o=this.direction.getPosition(e),a=this.hierarchical.distributionOrdering[s];let l=1e9,u=1e9;if(i!==0){const d=a[i-1];if(n===!0&&r[d.id]===void 0||n===!1){const h=this.direction.getPosition(d);l=o-h}}if(i!=a.length-1){const d=a[i+1];if(n===!0&&r[d.id]===void 0||n===!1){const h=this.direction.getPosition(d);u=Math.min(u,h-o)}}return[l,u]}else return[0,0]}_centerParent(e){if(this.hierarchical.parentReference[e.id]){const r=this.hierarchical.parentReference[e.id];for(let n=0;n<r.length;n++){const s=r[n],i=this.body.nodes[s],o=this.hierarchical.childrenReference[s];if(o!==void 0){const a=this._getCenterPosition(o),l=this.direction.getPosition(i),[u,d]=this._getSpaceAroundNode(i),h=l-a;(h<0&&Math.abs(h)<d-this.options.hierarchical.nodeSpacing||h>0&&Math.abs(h)<u-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(i,a)}}}}_placeNodesByHierarchy(e){this.positionedNodes={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r;let s=lr(e[n]);s=this._indexArrayToNodes(s),Dd(r=this.direction).call(r,s);let i=0;for(let o=0;o<s.length;o++){const a=s[o];if(this.positionedNodes[a.id]===void 0){const l=this.options.hierarchical.nodeSpacing;let u=l*i;i>0&&(u=this.direction.getPosition(s[o-1])+l),this.direction.setPosition(a,u,n),this._validatePositionAndContinue(a,n,u),i++}}}}_placeBranchNodes(e,r){var n;const s=this.hierarchical.childrenReference[e];if(s===void 0)return;const i=[];for(let a=0;a<s.length;a++)i.push(this.body.nodes[s[a]]);Dd(n=this.direction).call(n,i);for(let a=0;a<i.length;a++){const l=i[a],u=this.hierarchical.levels[l.id];if(u>r&&this.positionedNodes[l.id]===void 0){const d=this.options.hierarchical.nodeSpacing;let h;a===0?h=this.direction.getPosition(this.body.nodes[e]):h=this.direction.getPosition(i[a-1])+d,this.direction.setPosition(l,h,u),this._validatePositionAndContinue(l,u,h)}else return}const o=this._getCenterPosition(i);this.direction.setPosition(this.body.nodes[e],o,r)}_validatePositionAndContinue(e,r,n){if(this.hierarchical.isTree){if(this.lastNodeOnLevel[r]!==void 0){const s=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[r]]);if(n-s<this.options.hierarchical.nodeSpacing){const i=s+this.options.hierarchical.nodeSpacing-n,o=this._findCommonParent(this.lastNodeOnLevel[r],e.id);this._shiftBlock(o.withChild,i)}}this.lastNodeOnLevel[r]=e.id,this.positionedNodes[e.id]=!0,this._placeBranchNodes(e.id,r)}}_indexArrayToNodes(e){const r=[];for(let n=0;n<e.length;n++)r.push(this.body.nodes[e[n]]);return r}_getDistribution(){const e={};let r,n;for(r in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,r)){n=this.body.nodes[r];const s=this.hierarchical.levels[r]===void 0?0:this.hierarchical.levels[r];this.direction.fix(n,s),e[s]===void 0&&(e[s]={}),e[s][r]=n}return e}_getActiveEdges(e){const r=[];return st(e.edges,n=>{var s;Nt(s=this.body.edgeIndices).call(s,n.id)!==-1&&r.push(n)}),r}_getHubSizes(){const e={},r=this.body.nodeIndices;st(r,s=>{const i=this.body.nodes[s],o=this._getActiveEdges(i).length;e[o]=!0});const n=[];return st(e,s=>{n.push(Number(s))}),Dd(n).call(n,function(s,i){return i-s}),n}_determineLevelsByHubsize(){const e=(n,s)=>{this.hierarchical.levelDownstream(n,s)},r=this._getHubSizes();for(let n=0;n<r.length;++n){const s=r[n];if(s===0)break;st(this.body.nodeIndices,i=>{const o=this.body.nodes[i];s===this._getActiveEdges(o).length&&this._crawlNetwork(e,i)})}}_determineLevelsCustomCallback(){const r=function(s,i,o){},n=(s,i,o)=>{let a=this.hierarchical.levels[s.id];a===void 0&&(a=this.hierarchical.levels[s.id]=1e5);const l=r($n.cloneOptions(s,"node"),$n.cloneOptions(i,"node"),$n.cloneOptions(o,"edge"));this.hierarchical.levels[i.id]=a+l};this._crawlNetwork(n),this.hierarchical.setMinLevelToZero()}_determineLevelsDirected(){var e;const r=Wce(e=this.body.nodeIndices).call(e,(n,s)=>(n.set(s,this.body.nodes[s]),n),new y$);this.options.hierarchical.shakeTowards==="roots"?this.hierarchical.levels=Kqe(r):this.hierarchical.levels=Hqe(r),this.hierarchical.setMinLevelToZero()}_generateMap(){const e=(r,n)=>{this.hierarchical.levels[n.id]>this.hierarchical.levels[r.id]&&this.hierarchical.addRelation(r.id,n.id)};this._crawlNetwork(e),this.hierarchical.checkIfTree()}_crawlNetwork(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},r=arguments.length>1?arguments[1]:void 0;const n={},s=(i,o)=>{if(n[i.id]===void 0){this.hierarchical.setTreeIndex(i,o),n[i.id]=!0;let a;const l=this._getActiveEdges(i);for(let u=0;u<l.length;u++){const d=l[u];d.connected===!0&&(d.toId==i.id?a=d.from:a=d.to,i.id!=a.id&&(e(i,a,d),s(a,o)))}}};if(r===void 0){let i=0;for(let o=0;o<this.body.nodeIndices.length;o++){const a=this.body.nodeIndices[o];if(n[a]===void 0){const l=this.body.nodes[a];s(l,i),i+=1}}}else{const i=this.body.nodes[r];if(i===void 0){console.error("Node not found:",r);return}s(i)}}_shiftBlock(e,r){const n={},s=i=>{if(n[i])return;n[i]=!0,this.direction.shift(i,r);const o=this.hierarchical.childrenReference[i];if(o!==void 0)for(let a=0;a<o.length;a++)s(o[a])};s(e)}_findCommonParent(e,r){const n={},s=(o,a)=>{const l=this.hierarchical.parentReference[a];if(l!==void 0)for(let u=0;u<l.length;u++){const d=l[u];o[d]=!0,s(o,d)}},i=(o,a)=>{const l=this.hierarchical.parentReference[a];if(l!==void 0)for(let u=0;u<l.length;u++){const d=l[u];if(o[d]!==void 0)return{foundParent:d,withChild:a};const h=i(o,d);if(h.foundParent!==null)return h}return{foundParent:null,withChild:a}};return s(n,e),i(n,r)}setDirectionStrategy(){this.options.hierarchical.direction==="UD"||this.options.hierarchical.direction==="DU"?this.direction=new $qe(this):this.direction=new Fqe(this)}_getCenterPosition(e){let r=1e9,n=-1e9;for(let s=0;s<e.length;s++){let i;if(e[s].id!==void 0)i=e[s];else{const a=e[s];i=this.body.nodes[a]}const o=this.direction.getPosition(i);r=Math.min(r,o),n=Math.max(n,o)}return .5*(r+n)}}class Qqe{constructor(e,r,n,s){var i,o;this.body=e,this.canvas=r,this.selectionHandler=n,this.interactionHandler=s,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this._domEventListenerCleanupQueue=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},jr(this.options,this.defaultOptions),this.body.emitter.on("destroy",()=>{this._clean()}),this.body.emitter.on("_dataChanged",ae(i=this._restore).call(i,this)),this.body.emitter.on("_resetData",ae(o=this._restore).call(o,this))}_restore(){this.inMode!==!1&&(this.options.initiallyActive===!0?this.enableEditMode():this.disableEditMode())}setOptions(e,r,n){r!==void 0&&(r.locale!==void 0?this.options.locale=r.locale:this.options.locale=n.locale,r.locales!==void 0?this.options.locales=r.locales:this.options.locales=n.locales),e!==void 0&&(typeof e=="boolean"?this.options.enabled=e:(this.options.enabled=!0,$t(this.options,e)),this.options.initiallyActive===!0&&(this.editMode=!0),this._setup())}toggleEditMode(){this.editMode===!0?this.disableEditMode():this.enableEditMode()}enableEditMode(){this.editMode=!0,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}disableEditMode(){this.editMode=!1,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}showManipulatorToolbar(){if(this._clean(),this.manipulationDOM={},this.guiEnabled===!0){var e,r;this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";const n=this.selectionHandler.getSelectedNodeCount(),s=this.selectionHandler.getSelectedEdgeCount(),i=n+s,o=this.options.locales[this.options.locale];let a=!1;this.options.addNode!==!1&&(this._createAddNodeButton(o),a=!0),this.options.addEdge!==!1&&(a===!0?this._createSeperator(1):a=!0,this._createAddEdgeButton(o)),n===1&&typeof this.options.editNode=="function"?(a===!0?this._createSeperator(2):a=!0,this._createEditNodeButton(o)):s===1&&n===0&&this.options.editEdge!==!1&&(a===!0?this._createSeperator(3):a=!0,this._createEditEdgeButton(o)),i!==0&&(n>0&&this.options.deleteNode!==!1?(a===!0&&this._createSeperator(4),this._createDeleteButton(o)):n===0&&this.options.deleteEdge!==!1&&(a===!0&&this._createSeperator(4),this._createDeleteButton(o))),this._bindElementEvents(this.closeDiv,ae(e=this.toggleEditMode).call(e,this)),this._temporaryBindEvent("select",ae(r=this.showManipulatorToolbar).call(r,this))}this.body.emitter.emit("_redraw")}addNodeMode(){var e;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addNode",this.guiEnabled===!0){var r;const n=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(n),this._createSeperator(),this._createDescription(n.addDescription||this.options.locales.en.addDescription),this._bindElementEvents(this.closeDiv,ae(r=this.toggleEditMode).call(r,this))}this._temporaryBindEvent("click",ae(e=this._performAddNode).call(e,this))}editNode(){this.editMode!==!0&&this.enableEditMode(),this._clean();const e=this.selectionHandler.getSelectedNodes()[0];if(e!==void 0)if(this.inMode="editNode",typeof this.options.editNode=="function")if(e.isCluster!==!0){const r=$t({},e.options,!1);if(r.x=e.x,r.y=e.y,this.options.editNode.length===2)this.options.editNode(r,n=>{n!=null&&this.inMode==="editNode"&&this.body.data.nodes.getDataSet().update(n),this.showManipulatorToolbar()});else throw new Error("The function for edit does not support two arguments (data, callback)")}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError);else throw new Error("No function has been configured to handle the editing of nodes.");else this.showManipulatorToolbar()}addEdgeMode(){var e,r,n,s,i;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addEdge",this.guiEnabled===!0){var o;const a=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(a),this._createSeperator(),this._createDescription(a.edgeDescription||this.options.locales.en.edgeDescription),this._bindElementEvents(this.closeDiv,ae(o=this.toggleEditMode).call(o,this))}this._temporaryBindUI("onTouch",ae(e=this._handleConnect).call(e,this)),this._temporaryBindUI("onDragEnd",ae(r=this._finishConnect).call(r,this)),this._temporaryBindUI("onDrag",ae(n=this._dragControlNode).call(n,this)),this._temporaryBindUI("onRelease",ae(s=this._finishConnect).call(s,this)),this._temporaryBindUI("onDragStart",ae(i=this._dragStartEdge).call(i,this)),this._temporaryBindUI("onHold",()=>{})}editEdgeMode(){if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="editEdge",typeof this.options.editEdge=="object"&&typeof this.options.editEdge.editWithoutDrag=="function"&&(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0)){const o=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(o.from.id,o.to.id);return}if(this.guiEnabled===!0){var e;const o=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(o),this._createSeperator(),this._createDescription(o.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindElementEvents(this.closeDiv,ae(e=this.toggleEditMode).call(e,this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0){var r,n,s,i;const o=this.body.edges[this.edgeBeingEditedId],a=this._getNewTargetNode(o.from.x,o.from.y),l=this._getNewTargetNode(o.to.x,o.to.y);this.temporaryIds.nodes.push(a.id),this.temporaryIds.nodes.push(l.id),this.body.nodes[a.id]=a,this.body.nodeIndices.push(a.id),this.body.nodes[l.id]=l,this.body.nodeIndices.push(l.id),this._temporaryBindUI("onTouch",ae(r=this._controlNodeTouch).call(r,this)),this._temporaryBindUI("onTap",()=>{}),this._temporaryBindUI("onHold",()=>{}),this._temporaryBindUI("onDragStart",ae(n=this._controlNodeDragStart).call(n,this)),this._temporaryBindUI("onDrag",ae(s=this._controlNodeDrag).call(s,this)),this._temporaryBindUI("onDragEnd",ae(i=this._controlNodeDragEnd).call(i,this)),this._temporaryBindUI("onMouseMove",()=>{}),this._temporaryBindEvent("beforeDrawing",u=>{const d=o.edgeType.findBorderPositions(u);a.selected===!1&&(a.x=d.from.x,a.y=d.from.y),l.selected===!1&&(l.x=d.to.x,l.y=d.to.y)}),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}deleteSelected(){this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="delete";const e=this.selectionHandler.getSelectedNodeIds(),r=this.selectionHandler.getSelectedEdgeIds();let n;if(e.length>0){for(let s=0;s<e.length;s++)if(this.body.nodes[e[s]].isCluster===!0){alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);return}typeof this.options.deleteNode=="function"&&(n=this.options.deleteNode)}else r.length>0&&typeof this.options.deleteEdge=="function"&&(n=this.options.deleteEdge);if(typeof n=="function"){const s={nodes:e,edges:r};if(n.length===2)n(s,i=>{i!=null&&this.inMode==="delete"?(this.body.data.edges.getDataSet().remove(i.edges),this.body.data.nodes.getDataSet().remove(i.nodes),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()):(this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar())});else throw new Error("The function for delete does not support two arguments (data, callback)")}else this.body.data.edges.getDataSet().remove(r),this.body.data.nodes.getDataSet().remove(e),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}_setup(){this.options.enabled===!0?(this.guiEnabled=!0,this._createWrappers(),this.editMode===!1?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}_createWrappers(){if(this.manipulationDiv===void 0&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",this.editMode===!0?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),this.editModeDiv===void 0&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",this.editMode===!0?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),this.closeDiv===void 0){var e,r;this.closeDiv=document.createElement("button"),this.closeDiv.className="vis-close",this.closeDiv.setAttribute("aria-label",(e=(r=this.options.locales[this.options.locale])===null||r===void 0?void 0:r.close)!==null&&e!==void 0?e:this.options.locales.en.close),this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv)}}_getNewTargetNode(e,r){const n=$t({},this.options.controlNodeStyle);n.id="targetNode"+_p(),n.hidden=!1,n.physics=!1,n.x=e,n.y=r;const s=this.body.functions.createNode(n);return s.shape.boundingBox={left:e,right:e,top:r,bottom:r},s}_createEditButton(){var e;this._clean(),this.manipulationDOM={},ja(this.editModeDiv);const r=this.options.locales[this.options.locale],n=this._createButton("editMode","vis-edit vis-edit-mode",r.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(n),this._bindElementEvents(n,ae(e=this.toggleEditMode).call(e,this))}_clean(){this.inMode=!1,this.guiEnabled===!0&&(ja(this.editModeDiv),ja(this.manipulationDiv),this._cleanupDOMEventListeners()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}_cleanupDOMEventListeners(){for(const r of Wo(e=this._domEventListenerCleanupQueue).call(e,0)){var e;r()}}_removeManipulationDOM(){this._clean(),ja(this.manipulationDiv),ja(this.editModeDiv),ja(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}_createSeperator(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+e]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+e].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+e])}_createAddNodeButton(e){var r;const n=this._createButton("addNode","vis-add",e.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ae(r=this.addNodeMode).call(r,this))}_createAddEdgeButton(e){var r;const n=this._createButton("addEdge","vis-connect",e.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ae(r=this.addEdgeMode).call(r,this))}_createEditNodeButton(e){var r;const n=this._createButton("editNode","vis-edit",e.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ae(r=this.editNode).call(r,this))}_createEditEdgeButton(e){var r;const n=this._createButton("editEdge","vis-edit",e.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ae(r=this.editEdgeMode).call(r,this))}_createDeleteButton(e){var r;let n;this.options.rtl?n="vis-delete-rtl":n="vis-delete";const s=this._createButton("delete",n,e.del||this.options.locales.en.del);this.manipulationDiv.appendChild(s),this._bindElementEvents(s,ae(r=this.deleteSelected).call(r,this))}_createBackButton(e){var r;const n=this._createButton("back","vis-back",e.back||this.options.locales.en.back);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ae(r=this.showManipulatorToolbar).call(r,this))}_createButton(e,r,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"vis-label";return this.manipulationDOM[e+"Div"]=document.createElement("button"),this.manipulationDOM[e+"Div"].className="vis-button "+r,this.manipulationDOM[e+"Label"]=document.createElement("div"),this.manipulationDOM[e+"Label"].className=s,this.manipulationDOM[e+"Label"].innerText=n,this.manipulationDOM[e+"Div"].appendChild(this.manipulationDOM[e+"Label"]),this.manipulationDOM[e+"Div"]}_createDescription(e){this.manipulationDOM.descriptionLabel=document.createElement("div"),this.manipulationDOM.descriptionLabel.className="vis-none",this.manipulationDOM.descriptionLabel.innerText=e,this.manipulationDiv.appendChild(this.manipulationDOM.descriptionLabel)}_temporaryBindEvent(e,r){this.temporaryEventFunctions.push({event:e,boundFunction:r}),this.body.emitter.on(e,r)}_temporaryBindUI(e,r){if(this.body.eventListeners[e]!==void 0)this.temporaryUIFunctions[e]=this.body.eventListeners[e],this.body.eventListeners[e]=r;else throw new Error("This UI function does not exist. Typo? You tried: "+e+" possible are: "+vg(lr(this.body.eventListeners)))}_unbindTemporaryUIs(){for(const e in this.temporaryUIFunctions)Object.prototype.hasOwnProperty.call(this.temporaryUIFunctions,e)&&(this.body.eventListeners[e]=this.temporaryUIFunctions[e],delete this.temporaryUIFunctions[e]);this.temporaryUIFunctions={}}_unbindTemporaryEvents(){for(let e=0;e<this.temporaryEventFunctions.length;e++){const r=this.temporaryEventFunctions[e].event,n=this.temporaryEventFunctions[e].boundFunction;this.body.emitter.off(r,n)}this.temporaryEventFunctions=[]}_bindElementEvents(e,r){const n=new Md(e,{});W0(n,r),this._domEventListenerCleanupQueue.push(()=>{n.destroy()});const s=i=>{let{keyCode:o,key:a}=i;(a==="Enter"||a===" "||o===13||o===32)&&r()};e.addEventListener("keyup",s,!1),this._domEventListenerCleanupQueue.push(()=>{e.removeEventListener("keyup",s,!1)})}_cleanupTemporaryNodesAndEdges(){for(let i=0;i<this.temporaryIds.edges.length;i++){var e;this.body.edges[this.temporaryIds.edges[i]].disconnect(),delete this.body.edges[this.temporaryIds.edges[i]];const o=Nt(e=this.body.edgeIndices).call(e,this.temporaryIds.edges[i]);if(o!==-1){var r;Wo(r=this.body.edgeIndices).call(r,o,1)}}for(let i=0;i<this.temporaryIds.nodes.length;i++){var n;delete this.body.nodes[this.temporaryIds.nodes[i]];const o=Nt(n=this.body.nodeIndices).call(n,this.temporaryIds.nodes[i]);if(o!==-1){var s;Wo(s=this.body.nodeIndices).call(s,o,1)}}this.temporaryIds={nodes:[],edges:[]}}_controlNodeTouch(e){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=jr({},this.body.view.translation)}_controlNodeDragStart(){const e=this.lastTouch,r=this.selectionHandler._pointerToPositionObject(e),n=this.body.nodes[this.temporaryIds.nodes[0]],s=this.body.nodes[this.temporaryIds.nodes[1]],i=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;const o=n.isOverlappingWith(r),a=s.isOverlappingWith(r);o===!0?(this.selectedControlNode=n,i.edgeType.from=n):a===!0&&(this.selectedControlNode=s,i.edgeType.to=s),this.selectedControlNode!==void 0&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}_controlNodeDrag(e){this.body.emitter.emit("disablePhysics");const r=this.body.functions.getPointer(e.center),n=this.canvas.DOMtoCanvas(r);this.selectedControlNode!==void 0?(this.selectedControlNode.x=n.x,this.selectedControlNode.y=n.y):this.interactionHandler.onDrag(e),this.body.emitter.emit("_redraw")}_controlNodeDragEnd(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r),s=this.body.edges[this.edgeBeingEditedId];if(this.selectedControlNode===void 0)return;this.selectionHandler.unselectAll();const i=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let a=i.length-1;a>=0;a--)if(i[a]!==this.selectedControlNode.id){o=this.body.nodes[i[a]];break}if(o!==void 0&&this.selectedControlNode!==void 0)if(o.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{const a=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===a.id?this._performEditEdge(o.id,s.to.id):this._performEditEdge(s.from.id,o.id)}else s.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}_handleConnect(e){if(new Date().valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=jr({},this.body.view.translation),this.interactionHandler.drag.pointer=this.lastTouch,this.interactionHandler.drag.translation=this.lastTouch.translation;const r=this.lastTouch,n=this.selectionHandler.getNodeAt(r);if(n!==void 0)if(n.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{const s=this._getNewTargetNode(n.x,n.y);this.body.nodes[s.id]=s,this.body.nodeIndices.push(s.id);const i=this.body.functions.createEdge({id:"connectionEdge"+_p(),from:n.id,to:s.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[i.id]=i,this.body.edgeIndices.push(i.id),this.temporaryIds.nodes.push(s.id),this.temporaryIds.edges.push(i.id)}this.touchTime=new Date().valueOf()}}_dragControlNode(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r);let s;this.temporaryIds.edges[0]!==void 0&&(s=this.body.edges[this.temporaryIds.edges[0]].fromId);const i=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let l=i.length-1;l>=0;l--){var a;if(Nt(a=this.temporaryIds.nodes).call(a,i[l])===-1){o=this.body.nodes[i[l]];break}}if(e.controlEdge={from:s,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragging",e,r),this.temporaryIds.nodes[0]!==void 0){const l=this.body.nodes[this.temporaryIds.nodes[0]];l.x=this.canvas._XconvertDOMtoCanvas(r.x),l.y=this.canvas._YconvertDOMtoCanvas(r.y),this.body.emitter.emit("_redraw")}else this.interactionHandler.onDrag(e)}_finishConnect(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r);let s;this.temporaryIds.edges[0]!==void 0&&(s=this.body.edges[this.temporaryIds.edges[0]].fromId);const i=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let l=i.length-1;l>=0;l--){var a;if(Nt(a=this.temporaryIds.nodes).call(a,i[l])===-1){o=this.body.nodes[i[l]];break}}this._cleanupTemporaryNodesAndEdges(),o!==void 0&&(o.isCluster===!0?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):this.body.nodes[s]!==void 0&&this.body.nodes[o.id]!==void 0&&this._performAddEdge(s,o.id)),e.controlEdge={from:s,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragEnd",e,r),this.body.emitter.emit("_redraw")}_dragStartEdge(e){const r=this.lastTouch;this.selectionHandler.generateClickEvent("dragStart",e,r,void 0,!0)}_performAddNode(e){const r={id:_p(),x:e.pointer.canvas.x,y:e.pointer.canvas.y,label:"new"};if(typeof this.options.addNode=="function")if(this.options.addNode.length===2)this.options.addNode(r,n=>{n!=null&&this.inMode==="addNode"&&this.body.data.nodes.getDataSet().add(n),this.showManipulatorToolbar()});else throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");else this.body.data.nodes.getDataSet().add(r),this.showManipulatorToolbar()}_performAddEdge(e,r){const n={from:e,to:r};if(typeof this.options.addEdge=="function")if(this.options.addEdge.length===2)this.options.addEdge(n,s=>{s!=null&&this.inMode==="addEdge"&&(this.body.data.edges.getDataSet().add(s),this.selectionHandler.unselectAll(),this.showManipulatorToolbar())});else throw new Error("The function for connect does not support two arguments (data,callback)");else this.body.data.edges.getDataSet().add(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}_performEditEdge(e,r){const n={id:this.edgeBeingEditedId,from:e,to:r,label:this.body.data.edges.get(this.edgeBeingEditedId).label};let s=this.options.editEdge;if(typeof s=="object"&&(s=s.editWithoutDrag),typeof s=="function")if(s.length===2)s(n,i=>{i==null||this.inMode!=="editEdge"?(this.body.edges[n.id].updateEdgeType(),this.body.emitter.emit("_redraw"),this.showManipulatorToolbar()):(this.body.data.edges.getDataSet().update(i),this.selectionHandler.unselectAll(),this.showManipulatorToolbar())});else throw new Error("The function for edit does not support two arguments (data, callback)");else this.body.data.edges.getDataSet().update(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}const pe="string",ie="boolean",U="number",Xf="array",Pe="object",Kce="dom",Xqe="any",xP=["arrow","bar","box","circle","crow","curve","diamond","image","inv_curve","inv_triangle","triangle","vee"],wP={borderWidth:{number:U},borderWidthSelected:{number:U,undefined:"undefined"},brokenImage:{string:pe,undefined:"undefined"},chosen:{label:{boolean:ie,function:"function"},node:{boolean:ie,function:"function"},__type__:{object:Pe,boolean:ie}},color:{border:{string:pe},background:{string:pe},highlight:{border:{string:pe},background:{string:pe},__type__:{object:Pe,string:pe}},hover:{border:{string:pe},background:{string:pe},__type__:{object:Pe,string:pe}},__type__:{object:Pe,string:pe}},opacity:{number:U,undefined:"undefined"},fixed:{x:{boolean:ie},y:{boolean:ie},__type__:{object:Pe,boolean:ie}},font:{align:{string:pe},color:{string:pe},size:{number:U},face:{string:pe},background:{string:pe},strokeWidth:{number:U},strokeColor:{string:pe},vadjust:{number:U},multi:{boolean:ie,string:pe},bold:{color:{string:pe},size:{number:U},face:{string:pe},mod:{string:pe},vadjust:{number:U},__type__:{object:Pe,string:pe}},boldital:{color:{string:pe},size:{number:U},face:{string:pe},mod:{string:pe},vadjust:{number:U},__type__:{object:Pe,string:pe}},ital:{color:{string:pe},size:{number:U},face:{string:pe},mod:{string:pe},vadjust:{number:U},__type__:{object:Pe,string:pe}},mono:{color:{string:pe},size:{number:U},face:{string:pe},mod:{string:pe},vadjust:{number:U},__type__:{object:Pe,string:pe}},__type__:{object:Pe,string:pe}},group:{string:pe,number:U,undefined:"undefined"},heightConstraint:{minimum:{number:U},valign:{string:pe},__type__:{object:Pe,boolean:ie,number:U}},hidden:{boolean:ie},icon:{face:{string:pe},code:{string:pe},size:{number:U},color:{string:pe},weight:{string:pe,number:U},__type__:{object:Pe}},id:{string:pe,number:U},image:{selected:{string:pe,undefined:"undefined"},unselected:{string:pe,undefined:"undefined"},__type__:{object:Pe,string:pe}},imagePadding:{top:{number:U},right:{number:U},bottom:{number:U},left:{number:U},__type__:{object:Pe,number:U}},label:{string:pe,undefined:"undefined"},labelHighlightBold:{boolean:ie},level:{number:U,undefined:"undefined"},margin:{top:{number:U},right:{number:U},bottom:{number:U},left:{number:U},__type__:{object:Pe,number:U}},mass:{number:U},physics:{boolean:ie},scaling:{min:{number:U},max:{number:U},label:{enabled:{boolean:ie},min:{number:U},max:{number:U},maxVisible:{number:U},drawThreshold:{number:U},__type__:{object:Pe,boolean:ie}},customScalingFunction:{function:"function"},__type__:{object:Pe}},shadow:{enabled:{boolean:ie},color:{string:pe},size:{number:U},x:{number:U},y:{number:U},__type__:{object:Pe,boolean:ie}},shape:{string:["custom","ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},ctxRenderer:{function:"function"},shapeProperties:{borderDashes:{boolean:ie,array:Xf},borderRadius:{number:U},interpolation:{boolean:ie},useImageSize:{boolean:ie},useBorderWithImage:{boolean:ie},coordinateOrigin:{string:["center","top-left"]},__type__:{object:Pe}},size:{number:U},title:{string:pe,dom:Kce,undefined:"undefined"},value:{number:U,undefined:"undefined"},widthConstraint:{minimum:{number:U},maximum:{number:U},__type__:{object:Pe,boolean:ie,number:U}},x:{number:U},y:{number:U},__type__:{object:Pe}},Jqe={configure:{enabled:{boolean:ie},filter:{boolean:ie,string:pe,array:Xf,function:"function"},container:{dom:Kce},showButton:{boolean:ie},__type__:{object:Pe,boolean:ie,string:pe,array:Xf,function:"function"}},edges:{arrows:{to:{enabled:{boolean:ie},scaleFactor:{number:U},type:{string:xP},imageHeight:{number:U},imageWidth:{number:U},src:{string:pe},__type__:{object:Pe,boolean:ie}},middle:{enabled:{boolean:ie},scaleFactor:{number:U},type:{string:xP},imageWidth:{number:U},imageHeight:{number:U},src:{string:pe},__type__:{object:Pe,boolean:ie}},from:{enabled:{boolean:ie},scaleFactor:{number:U},type:{string:xP},imageWidth:{number:U},imageHeight:{number:U},src:{string:pe},__type__:{object:Pe,boolean:ie}},__type__:{string:["from","to","middle"],object:Pe}},endPointOffset:{from:{number:U},to:{number:U},__type__:{object:Pe,number:U}},arrowStrikethrough:{boolean:ie},background:{enabled:{boolean:ie},color:{string:pe},size:{number:U},dashes:{boolean:ie,array:Xf},__type__:{object:Pe,boolean:ie}},chosen:{label:{boolean:ie,function:"function"},edge:{boolean:ie,function:"function"},__type__:{object:Pe,boolean:ie}},color:{color:{string:pe},highlight:{string:pe},hover:{string:pe},inherit:{string:["from","to","both"],boolean:ie},opacity:{number:U},__type__:{object:Pe,string:pe}},dashes:{boolean:ie,array:Xf},font:{color:{string:pe},size:{number:U},face:{string:pe},background:{string:pe},strokeWidth:{number:U},strokeColor:{string:pe},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:U},multi:{boolean:ie,string:pe},bold:{color:{string:pe},size:{number:U},face:{string:pe},mod:{string:pe},vadjust:{number:U},__type__:{object:Pe,string:pe}},boldital:{color:{string:pe},size:{number:U},face:{string:pe},mod:{string:pe},vadjust:{number:U},__type__:{object:Pe,string:pe}},ital:{color:{string:pe},size:{number:U},face:{string:pe},mod:{string:pe},vadjust:{number:U},__type__:{object:Pe,string:pe}},mono:{color:{string:pe},size:{number:U},face:{string:pe},mod:{string:pe},vadjust:{number:U},__type__:{object:Pe,string:pe}},__type__:{object:Pe,string:pe}},hidden:{boolean:ie},hoverWidth:{function:"function",number:U},label:{string:pe,undefined:"undefined"},labelHighlightBold:{boolean:ie},length:{number:U,undefined:"undefined"},physics:{boolean:ie},scaling:{min:{number:U},max:{number:U},label:{enabled:{boolean:ie},min:{number:U},max:{number:U},maxVisible:{number:U},drawThreshold:{number:U},__type__:{object:Pe,boolean:ie}},customScalingFunction:{function:"function"},__type__:{object:Pe}},selectionWidth:{function:"function",number:U},selfReferenceSize:{number:U},selfReference:{size:{number:U},angle:{number:U},renderBehindTheNode:{boolean:ie},__type__:{object:Pe}},shadow:{enabled:{boolean:ie},color:{string:pe},size:{number:U},x:{number:U},y:{number:U},__type__:{object:Pe,boolean:ie}},smooth:{enabled:{boolean:ie},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:U},forceDirection:{string:["horizontal","vertical","none"],boolean:ie},__type__:{object:Pe,boolean:ie}},title:{string:pe,undefined:"undefined"},width:{number:U},widthConstraint:{maximum:{number:U},__type__:{object:Pe,boolean:ie,number:U}},value:{number:U,undefined:"undefined"},__type__:{object:Pe}},groups:{useDefaultGroups:{boolean:ie},__any__:wP,__type__:{object:Pe}},interaction:{dragNodes:{boolean:ie},dragView:{boolean:ie},hideEdgesOnDrag:{boolean:ie},hideEdgesOnZoom:{boolean:ie},hideNodesOnDrag:{boolean:ie},hover:{boolean:ie},keyboard:{enabled:{boolean:ie},speed:{x:{number:U},y:{number:U},zoom:{number:U},__type__:{object:Pe}},bindToWindow:{boolean:ie},autoFocus:{boolean:ie},__type__:{object:Pe,boolean:ie}},multiselect:{boolean:ie},navigationButtons:{boolean:ie},selectable:{boolean:ie},selectConnectedEdges:{boolean:ie},hoverConnectedEdges:{boolean:ie},tooltipDelay:{number:U},zoomView:{boolean:ie},zoomSpeed:{number:U},__type__:{object:Pe}},layout:{randomSeed:{undefined:"undefined",number:U,string:pe},improvedLayout:{boolean:ie},clusterThreshold:{number:U},hierarchical:{enabled:{boolean:ie},levelSeparation:{number:U},nodeSpacing:{number:U},treeSpacing:{number:U},blockShifting:{boolean:ie},edgeMinimization:{boolean:ie},parentCentralization:{boolean:ie},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:Pe,boolean:ie}},__type__:{object:Pe}},manipulation:{enabled:{boolean:ie},initiallyActive:{boolean:ie},addNode:{boolean:ie,function:"function"},addEdge:{boolean:ie,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:Pe,boolean:ie,function:"function"}},deleteNode:{boolean:ie,function:"function"},deleteEdge:{boolean:ie,function:"function"},controlNodeStyle:wP,__type__:{object:Pe,boolean:ie}},nodes:wP,physics:{enabled:{boolean:ie},barnesHut:{theta:{number:U},gravitationalConstant:{number:U},centralGravity:{number:U},springLength:{number:U},springConstant:{number:U},damping:{number:U},avoidOverlap:{number:U},__type__:{object:Pe}},forceAtlas2Based:{theta:{number:U},gravitationalConstant:{number:U},centralGravity:{number:U},springLength:{number:U},springConstant:{number:U},damping:{number:U},avoidOverlap:{number:U},__type__:{object:Pe}},repulsion:{centralGravity:{number:U},springLength:{number:U},springConstant:{number:U},nodeDistance:{number:U},damping:{number:U},__type__:{object:Pe}},hierarchicalRepulsion:{centralGravity:{number:U},springLength:{number:U},springConstant:{number:U},nodeDistance:{number:U},damping:{number:U},avoidOverlap:{number:U},__type__:{object:Pe}},maxVelocity:{number:U},minVelocity:{number:U},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:ie},iterations:{number:U},updateInterval:{number:U},onlyDynamicEdges:{boolean:ie},fit:{boolean:ie},__type__:{object:Pe,boolean:ie}},timestep:{number:U},adaptiveTimestep:{boolean:ie},wind:{x:{number:U},y:{number:U},__type__:{object:Pe}},__type__:{object:Pe,boolean:ie}},autoResize:{boolean:ie},clickToUse:{boolean:ie},locale:{string:pe},locales:{__any__:{any:Xqe},__type__:{object:Pe}},height:{string:pe},width:{string:pe},__type__:{object:Pe}},Gce={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},opacity:[0,0,1,.1],fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},endPointOffset:{from:[0,-10,10,1],to:[0,-10,10,1]},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0,autoFocus:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},Zqe=(t,e,r)=>{var n;return!!(ml(t).call(t,"physics")&&ml(n=Gce.physics.solver).call(n,e)&&r.physics.solver!==e&&e!=="wind")};class eLe{constructor(){}getDistances(e,r,n){const s={},i=e.edges;for(let a=0;a<r.length;a++){const l=r[a],u={};s[l]=u;for(let d=0;d<r.length;d++)u[r[d]]=a==d?0:1e9}for(let a=0;a<n.length;a++){const l=i[n[a]];l.connected===!0&&s[l.fromId]!==void 0&&s[l.toId]!==void 0&&(s[l.fromId][l.toId]=1,s[l.toId][l.fromId]=1)}const o=r.length;for(let a=0;a<o;a++){const l=r[a],u=s[l];for(let d=0;d<o-1;d++){const h=r[d],f=s[h];for(let p=d+1;p<o;p++){const m=r[p],g=s[m],y=Math.min(f[m],f[l]+u[m]);f[m]=y,g[h]=y}}}return s}}class tLe{constructor(e,r,n){this.body=e,this.springLength=r,this.springConstant=n,this.distanceSolver=new eLe}setOptions(e){e&&(e.springLength&&(this.springLength=e.springLength),e.springConstant&&(this.springConstant=e.springConstant))}solve(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const s=this.distanceSolver.getDistances(this.body,e,r);this._createL_matrix(s),this._createK_matrix(s),this._createE_matrix();const i=.01,o=1;let a=0;const l=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),u=5;let d=1e9,h=0,f=0,p=0,m=0,g=0;for(;d>i&&a<l;)for(a+=1,[h,d,f,p]=this._getHighestEnergyNode(n),m=d,g=0;m>o&&g<u;)g+=1,this._moveNode(h,f,p),[m,f,p]=this._getEnergy(h)}_getHighestEnergyNode(e){const r=this.body.nodeIndices,n=this.body.nodes;let s=0,i=r[0],o=0,a=0;for(let l=0;l<r.length;l++){const u=r[l];if(n[u].predefinedPosition!==!0||n[u].isCluster===!0&&e===!0||n[u].options.fixed.x!==!0||n[u].options.fixed.y!==!0){const[d,h,f]=this._getEnergy(u);s<d&&(s=d,i=u,o=h,a=f)}}return[i,s,o,a]}_getEnergy(e){const[r,n]=this.E_sums[e];return[Math.sqrt(r**2+n**2),r,n]}_moveNode(e,r,n){const s=this.body.nodeIndices,i=this.body.nodes;let o=0,a=0,l=0;const u=i[e].x,d=i[e].y,h=this.K_matrix[e],f=this.L_matrix[e];for(let x=0;x<s.length;x++){const S=s[x];if(S!==e){const E=i[S].x,N=i[S].y,_=h[S],k=f[S],j=1/((u-E)**2+(d-N)**2)**1.5;o+=_*(1-k*(d-N)**2*j),a+=_*(k*(u-E)*(d-N)*j),l+=_*(1-k*(u-E)**2*j)}}const p=o,m=a,g=r,y=l,v=n,b=(g/p+v/m)/(m/p-y/m),w=-(m*b+g)/p;i[e].x+=w,i[e].y+=b,this._updateE_matrix(e)}_createL_matrix(e){const r=this.body.nodeIndices,n=this.springLength;this.L_matrix=[];for(let s=0;s<r.length;s++){this.L_matrix[r[s]]={};for(let i=0;i<r.length;i++)this.L_matrix[r[s]][r[i]]=n*e[r[s]][r[i]]}}_createK_matrix(e){const r=this.body.nodeIndices,n=this.springConstant;this.K_matrix=[];for(let s=0;s<r.length;s++){this.K_matrix[r[s]]={};for(let i=0;i<r.length;i++)this.K_matrix[r[s]][r[i]]=n*e[r[s]][r[i]]**-2}}_createE_matrix(){const e=this.body.nodeIndices,r=this.body.nodes;this.E_matrix={},this.E_sums={};for(let n=0;n<e.length;n++)this.E_matrix[e[n]]=[];for(let n=0;n<e.length;n++){const s=e[n],i=r[s].x,o=r[s].y;let a=0,l=0;for(let u=n;u<e.length;u++){const d=e[u];if(d!==s){const h=r[d].x,f=r[d].y,p=1/Math.sqrt((i-h)**2+(o-f)**2);this.E_matrix[s][u]=[this.K_matrix[s][d]*(i-h-this.L_matrix[s][d]*(i-h)*p),this.K_matrix[s][d]*(o-f-this.L_matrix[s][d]*(o-f)*p)],this.E_matrix[d][n]=this.E_matrix[s][u],a+=this.E_matrix[s][u][0],l+=this.E_matrix[s][u][1]}}this.E_sums[s]=[a,l]}}_updateE_matrix(e){const r=this.body.nodeIndices,n=this.body.nodes,s=this.E_matrix[e],i=this.K_matrix[e],o=this.L_matrix[e],a=n[e].x,l=n[e].y;let u=0,d=0;for(let h=0;h<r.length;h++){const f=r[h];if(f!==e){const p=s[h],m=p[0],g=p[1],y=n[f].x,v=n[f].y,b=1/Math.sqrt((a-y)**2+(l-v)**2),w=i[f]*(a-y-o[f]*(a-y)*b),x=i[f]*(l-v-o[f]*(l-v)*b);s[h]=[w,x],u+=w,d+=x;const S=this.E_sums[f];S[0]+=w-m,S[1]+=x-g}}this.E_sums[e]=[u,d]}}function Te(t,e,r){var n,s,i,o;if(!(this instanceof Te))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:N4e,clickToUse:!1},jr(this.options,this.defaultOptions),this.body={container:t,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:ae(n=this.on).call(n,this),off:ae(s=this.off).call(s,this),emit:ae(i=this.emit).call(i,this),once:ae(o=this.once).call(o,this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}},selectionBox:{show:!1,position:{start:{x:0,y:0},end:{x:0,y:0}}}},this.bindEventListeners(),this.images=new j4e(()=>this.body.emitter.emit("_requestRedraw")),this.groups=new W4e,this.canvas=new $Fe(this.body),this.selectionHandler=new vqe(this.body,this.canvas),this.interactionHandler=new BFe(this.body,this.canvas,this.selectionHandler),this.view=new qFe(this.body,this.canvas),this.renderer=new IFe(this.body,this.canvas),this.physics=new _Fe(this.body),this.layoutEngine=new Yqe(this.body),this.clustering=new PFe(this.body),this.manipulation=new Qqe(this.body,this.canvas,this.selectionHandler,this.interactionHandler),this.nodesHandler=new J3e(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new vFe(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new tLe(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(r),this.setData(e)}_le(Te.prototype);Te.prototype.setOptions=function(t){if(t===null&&(t=void 0),t!==void 0){if(r4e.validate(t,Jqe)===!0&&console.error("%cErrors have been found in the supplied options object.",bce),hf(["locale","locales","clickToUse"],this.options,t),t.locale!==void 0&&(t.locale=C4e(t.locales||this.options.locales,t.locale)),t=this.layoutEngine.setOptions(t.layout,t),this.canvas.setOptions(t),this.groups.setOptions(t.groups),this.nodesHandler.setOptions(t.nodes),this.edgesHandler.setOptions(t.edges),this.physics.setOptions(t.physics),this.manipulation.setOptions(t.manipulation,t,this.options),this.interactionHandler.setOptions(t.interaction),this.renderer.setOptions(t.interaction),this.selectionHandler.setOptions(t.interaction),t.groups!==void 0&&this.body.emitter.emit("refreshNodes"),"configure"in t&&(this.configurator||(this.configurator=new e4e(this,this.body.container,Gce,this.canvas.pixelRatio,Zqe)),this.configurator.setOptions(t.configure)),this.configurator&&this.configurator.options.enabled===!0){const n={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};$t(n.nodes,this.nodesHandler.options),$t(n.edges,this.edgesHandler.options),$t(n.layout,this.layoutEngine.options),$t(n.interaction,this.selectionHandler.options),$t(n.interaction,this.renderer.options),$t(n.interaction,this.interactionHandler.options),$t(n.manipulation,this.manipulation.options),$t(n.physics,this.physics.options),$t(n.global,this.canvas.options),$t(n.global,this.options),this.configurator.setModuleOptions(n)}t.clickToUse!==void 0?t.clickToUse===!0?this.activator===void 0&&(this.activator=new Z$e(this.canvas.frame),this.activator.on("change",()=>{this.body.emitter.emit("activate")})):(this.activator!==void 0&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}};Te.prototype._updateVisibleIndices=function(){const t=this.body.nodes,e=this.body.edges;this.body.nodeIndices=[],this.body.edgeIndices=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&!this.clustering._isClusteredNode(r)&&t[r].options.hidden===!1&&this.body.nodeIndices.push(t[r].id);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const n=e[r],s=t[n.fromId],i=t[n.toId],o=s!==void 0&&i!==void 0;!this.clustering._isClusteredEdge(r)&&n.options.hidden===!1&&o&&s.options.hidden===!1&&i.options.hidden===!1&&this.body.edgeIndices.push(n.id)}};Te.prototype.bindEventListeners=function(){this.body.emitter.on("_dataChanged",()=>{this.edgesHandler._updateState(),this.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",()=>{this.clustering._updateState(),this._updateVisibleIndices(),this._updateValueRange(this.body.nodes),this._updateValueRange(this.body.edges),this.body.emitter.emit("startSimulation"),this.body.emitter.emit("_requestRedraw")})};Te.prototype.setData=function(t){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),t&&t.dot&&(t.nodes||t.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(t&&t.options),t&&t.dot){console.warn("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");const e=h4e(t.dot);this.setData(e);return}else if(t&&t.gephi){console.warn("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");const e=f4e(t.gephi);this.setData(e);return}else this.nodesHandler.setData(t&&t.nodes,!0),this.edgesHandler.setData(t&&t.edges,!0);this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")};Te.prototype.destroy=function(){this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images;for(const t in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,t)&&delete this.body.nodes[t];for(const t in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,t)&&delete this.body.edges[t];ja(this.body.container)};Te.prototype._updateValueRange=function(t){let e,r,n,s=0;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const i=t[e].getValue();i!==void 0&&(r=r===void 0?i:Math.min(i,r),n=n===void 0?i:Math.max(i,n),s+=i)}if(r!==void 0&&n!==void 0)for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&t[e].setValueRange(r,n,s)};Te.prototype.isActive=function(){return!this.activator||this.activator.active};Te.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)};Te.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)};Te.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)};Te.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)};Te.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)};Te.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)};Te.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)};Te.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)};Te.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)};Te.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)};Te.prototype.updateClusteredNode=function(){return this.clustering.updateClusteredNode.apply(this.clustering,arguments)};Te.prototype.getClusteredEdges=function(){return this.clustering.getClusteredEdges.apply(this.clustering,arguments)};Te.prototype.getBaseEdge=function(){return this.clustering.getBaseEdge.apply(this.clustering,arguments)};Te.prototype.getBaseEdges=function(){return this.clustering.getBaseEdges.apply(this.clustering,arguments)};Te.prototype.updateEdge=function(){return this.clustering.updateEdge.apply(this.clustering,arguments)};Te.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)};Te.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)};Te.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)};Te.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)};Te.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)};Te.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)};Te.prototype.editNodeMode=function(){return console.warn("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)};Te.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)};Te.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)};Te.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)};Te.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)};Te.prototype.getPosition=function(){return this.nodesHandler.getPosition.apply(this.nodesHandler,arguments)};Te.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)};Te.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)};Te.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)};Te.prototype.getConnectedNodes=function(t){return this.body.nodes[t]!==void 0?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)};Te.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)};Te.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)};Te.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)};Te.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)};Te.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)};Te.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)};Te.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodeIds.apply(this.selectionHandler,arguments)};Te.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdgeIds.apply(this.selectionHandler,arguments)};Te.prototype.getNodeAt=function(){const t=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return t!==void 0&&t.id!==void 0?t.id:t};Te.prototype.getEdgeAt=function(){const t=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return t!==void 0&&t.id!==void 0?t.id:t};Te.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)};Te.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)};Te.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.selectionHandler.commitWithoutEmitting.apply(this.selectionHandler),this.redraw()};Te.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)};Te.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)};Te.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)};Te.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)};Te.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)};Te.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)};Te.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)};Te.prototype.getOptionsFromConfigurator=function(){let t={};return this.configurator&&(t=this.configurator.getOptions.apply(this.configurator)),t};function rLe({graphData:t,startPersonId:e,onNodeClick:r}){const n=C.useRef(null),s=C.useRef(null),i=Gn(),o=C.useCallback(d=>{r?r(d):i(`/people/${d}`)},[r,i]);C.useEffect(()=>{if(!n.current||!t||!t.nodes||t.nodes.length===0)return;const d=new xh(t.nodes),h=new xh(t.edges),f={layout:{hierarchical:{enabled:!0,direction:"UD",sortMethod:"directed",levelSeparation:180,nodeSpacing:200,treeSpacing:250,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0}},nodes:{shape:"box",margin:10,font:{size:14,face:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',color:"#1f2937"},color:{border:"#d1d5db",background:"#ffffff",highlight:{border:"#f59e0b",background:"#fef3c7"},hover:{border:"#9ca3af",background:"#f9fafb"}},borderWidth:2,borderWidthSelected:3,shadow:{enabled:!0,color:"rgba(0,0,0,0.1)",size:5,x:0,y:2}},edges:{color:{color:"#9ca3af",highlight:"#6b7280",hover:"#6b7280"},width:2,smooth:{enabled:!0,type:"cubicBezier",forceDirection:"vertical",roundness:.4},arrows:{to:{enabled:!1}}},physics:{enabled:!1},interaction:{hover:!0,tooltipDelay:200,zoomView:!0,dragView:!0,dragNodes:!1,navigationButtons:!1,keyboard:{enabled:!0,bindToWindow:!1}}},p=new Te(n.current,{nodes:d,edges:h},f);return s.current=p,p.on("click",m=>{if(m.nodes.length>0){const g=m.nodes[0];o(g)}}),p.on("doubleClick",m=>{m.nodes.length>0&&p.focus(m.nodes[0],{scale:1,animation:{duration:500,easingFunction:"easeInOutQuad"}})}),p.once("stabilized",()=>{const m=t.edges.filter(g=>g.dashes).map(g=>[g.from,g.to]);if(m.length>0){const g=p.getPositions(),y={},v=new Set;m.forEach(([b,w])=>{if(v.has(b)||v.has(w))return;const x=g[b],S=g[w];if(!x||!S)return;const E=(x.x+S.x)/2;y[b]={x:E-60,y:x.y},y[w]={x:E+60,y:S.y},v.add(b),v.add(w)}),Object.entries(y).forEach(([b,w])=>{p.moveNode(b,w.x,w.y)})}setTimeout(()=>{p.fit({animation:{duration:500,easingFunction:"easeInOutQuad"}})},50)}),setTimeout(()=>{e&&p&&p.focus(e,{scale:.8,animation:{duration:500,easingFunction:"easeInOutQuad"}})},100),()=>{p&&p.destroy()}},[t,e,o]);const a=()=>{if(s.current){const d=s.current.getScale();s.current.moveTo({scale:d*1.3,animation:{duration:300,easingFunction:"easeInOutQuad"}})}},l=()=>{if(s.current){const d=s.current.getScale();s.current.moveTo({scale:d/1.3,animation:{duration:300,easingFunction:"easeInOutQuad"}})}},u=()=>{s.current&&s.current.fit({animation:{duration:500,easingFunction:"easeInOutQuad"}})};return!t||!t.nodes||t.nodes.length===0?c.jsx("div",{className:"flex items-center justify-center h-96",children:c.jsx("p",{className:"text-gray-500",children:"No family tree data available"})}):c.jsxs("div",{className:"relative w-full h-full",children:[c.jsxs("div",{className:"absolute top-4 right-4 z-10 flex gap-2 bg-white rounded-lg shadow-lg p-2",children:[c.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded",title:"Zoom In",children:c.jsx(Age,{className:"w-4 h-4"})}),c.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 rounded",title:"Zoom Out",children:c.jsx(Dge,{className:"w-4 h-4"})}),c.jsx("button",{onClick:u,className:"p-2 hover:bg-gray-100 rounded",title:"Fit All",children:c.jsx(ine,{className:"w-4 h-4"})})]}),c.jsx("div",{className:"absolute bottom-4 left-4 z-10 text-xs text-gray-500 bg-white/80 px-2 py-1 rounded",children:"Click a person to view details  Double-click to center  Scroll to zoom"}),c.jsx("div",{ref:n,className:"w-full h-full min-h-[600px]",style:{background:"#fafafa"}})]})}const nLe=["parent","child","spouse","lover","partner"];function sLe(t){return nLe.includes(t==null?void 0:t.toLowerCase())}function iLe(t){return(t==null?void 0:t.toLowerCase())==="parent"}function oLe(t){return(t==null?void 0:t.toLowerCase())==="child"}function aLe(t){const e=t==null?void 0:t.toLowerCase();return e==="spouse"||e==="lover"||e==="partner"}function lLe(t,e,r){var d;const n=new Map,s=[],i=new Set,o=new Map;e.forEach(h=>o.set(h.id,h));const a=[{personId:t,depth:0}];i.add(t);function l(h,f){var w,x,S,E;const p=h.name||((w=h.title)==null?void 0:w.rendered)||h.title||`Person ${f}`,m=qn(p);let g=null,y=((x=h.acf)==null?void 0:x.birth_date)||null;if(y){const N=new Date(y);isNaN(N.getTime())||(g=Math.floor((new Date-N)/(365.25*24*60*60*1e3)))}let v="";switch((S=h.acf)==null?void 0:S.gender){case"male":v="";break;case"female":v="";break;case"non_binary":case"other":case"prefer_not_to_say":v="";break}let b="";if(y)try{const N=new Date(y);if(!isNaN(N.getTime())){const _=String(N.getDate()).padStart(2,"0"),k=String(N.getMonth()+1).padStart(2,"0"),j=N.getFullYear();b=`${_}-${k}-${j}`}}catch{}return{id:f,name:m,gender:((E=h.acf)==null?void 0:E.gender)||"",genderSymbol:v,photo:h.thumbnail||null,age:g,birthDate:y,formattedBirthDate:b}}const u=o.get(t);for(u&&n.set(t,l(u,t));a.length>0;){const{personId:h,depth:f}=a.shift(),p=r.get(h)||[];for(const m of p){if(m.relationship_type_slug&&!sLe(m.relationship_type_slug))continue;const g=m.related_person;if(!g||!o.has(g))continue;if(!n.has(g)){const w=o.get(g);n.set(g,l(w,g))}const y=`${h}-${g}`,v=`${g}-${h}`;if(!s.some(w=>`${w.from}-${w.to}`===y||`${w.from}-${w.to}`===v)){const w=(d=m.relationship_type_slug)==null?void 0:d.toLowerCase();if(iLe(w))s.push({from:g,to:h,type:"parent-child"});else if(oLe(w))s.push({from:h,to:g,type:"parent-child"});else if(aLe(w)){const[x,S]=h<g?[h,g]:[g,h];s.push({from:x,to:S,type:"spouse"})}}i.has(g)||(i.add(g),a.push({personId:g,depth:f+1}))}}return{nodes:Array.from(n.values()),edges:s}}function cLe(t,e,r={}){const{nodes:n,edges:s}=t;if(n.length===0)return{nodes:[],edges:[]};const i=new Map,o=new Map,a=new Map;n.forEach(y=>{i.set(y.id,[]),o.set(y.id,[]),a.set(y.id,[])}),s.forEach(y=>{var v,b,w,x;y.type==="parent-child"?((v=i.get(y.to))==null||v.push(y.from),(b=o.get(y.from))==null||b.push(y.to)):y.type==="spouse"&&((w=a.get(y.from))==null||w.push(y.to),(x=a.get(y.to))==null||x.push(y.from))});const l=new Map,u=new Set,d=[{id:e,generation:0}];for(l.set(e,0),u.add(e);d.length>0;){const{id:y,generation:v}=d.shift(),b=i.get(y)||[];for(const S of b)u.has(S)||(u.add(S),l.set(S,v-1),d.push({id:S,generation:v-1}));const w=o.get(y)||[];for(const S of w)u.has(S)||(u.add(S),l.set(S,v+1),d.push({id:S,generation:v+1}));const x=a.get(y)||[];for(const S of x)u.has(S)||(u.add(S),l.set(S,v),d.push({id:S,generation:v}))}n.forEach(y=>{l.has(y.id)||l.set(y.id,0)});const h=Math.min(...l.values()),f=new Map;l.forEach((y,v)=>{f.set(v,y-h)});function p(y,v,b=!1){const w=y?y.split(" ").map(N=>N[0]).join("").toUpperCase().slice(0,2):"?";let x,S;b?(x="%23d1d5db",S="%236b7280"):v?(x="%23fef3c7",S="%23b45309"):(x="%23e5e7eb",S="%23374151");const E=`<svg xmlns="http://www.w3.org/2000/svg" width="90" height="90" viewBox="0 0 90 90">
      <circle cx="45" cy="45" r="45" fill="${x}"/>
      <text x="45" y="55" text-anchor="middle" font-family="system-ui, sans-serif" font-size="28" font-weight="500" fill="${S}">${w}</text>
    </svg>`;return"data:image/svg+xml,"+encodeURIComponent(E)}const m=n.map(y=>{const v=f.get(y.id)||0,b=y.id===e,w=r[y.id]||!1;let x=y.name;w&&(x=y.name+" ");let S=[x],E="";y.genderSymbol&&(E+=y.genderSymbol+" "),y.age!==null&&(E+=y.age+" "),y.formattedBirthDate&&(E+=y.formattedBirthDate),E.trim()&&S.push(E.trim());const N=y.photo||p(y.name,b,w);let _="#d1d5db";return b?_="#f59e0b":w&&(_="#9ca3af"),{id:y.id,label:S.join(`
`),level:v,shape:"circularImage",image:N,size:45,font:{size:14,face:"system-ui, -apple-system, sans-serif",vadjust:8,color:w?"#6b7280":"#1f2937"},color:{border:_,background:"#ffffff",highlight:{border:"#f59e0b",background:"#fef3c7"}},borderWidth:b?3:2,data:{...y,isDeceased:w}}}),g=s.map((y,v)=>{const b=y.type==="spouse";return{id:`edge-${v}`,from:y.from,to:y.to,arrows:{to:{enabled:!1}},color:{color:b?"#ec4899":"#9ca3af",highlight:b?"#db2777":"#6b7280"},width:2,dashes:b?[5,5]:!1,smooth:!1,length:b?50:300}});return{nodes:m,edges:g}}function uLe(t){const e=new Map;return t.forEach(r=>{var i;const s=(((i=r.acf)==null?void 0:i.relationships)||[]).map(o=>{var u,d,h,f,p,m;let a="";o.relationship_slug?a=o.relationship_slug.toLowerCase():typeof o.relationship_type=="object"?a=((u=o.relationship_type)==null?void 0:u.slug)||((h=(d=o.relationship_type)==null?void 0:d.name)==null?void 0:h.toLowerCase())||"":typeof o.relationship_type=="string"&&(a=o.relationship_type.toLowerCase());let l=null;return typeof o.related_person=="object"?l=((f=o.related_person)==null?void 0:f.ID)||((p=o.related_person)==null?void 0:p.id)||((m=o.related_person)==null?void 0:m.term_id):(typeof o.related_person=="number"||typeof o.related_person=="string")&&(l=parseInt(o.related_person,10)),{related_person:l,relationship_type:o.relationship_type,relationship_type_slug:a,relationship_name:o.relationship_name||"",relationship_label:o.relationship_label||""}}).filter(o=>o.related_person);e.set(r.id,s)}),e}function dLe(t,e){const r=new Map;e.forEach(n=>{var s;r.set(n.id,n.slug||((s=n.name)==null?void 0:s.toLowerCase()))}),t.forEach(n=>{n.forEach(s=>{if(!s.relationship_type_slug&&s.relationship_type){const i=typeof s.relationship_type=="object"?s.relationship_type.term_id||s.relationship_type.id:s.relationship_type;s.relationship_type_slug=r.get(i)||""}})})}function hLe(){var p,m;const{id:t}=Ih(),e=Gn(),r=parseInt(t,10),{data:n,isLoading:s}=hne(t),{data:i=[],isLoading:o}=hu(),{data:a=[]}=it({queryKey:["relationship-types"],queryFn:async()=>(await Je.getRelationshipTypes()).data}),l=C.useMemo(()=>i.map(g=>g.id).filter(Boolean),[i]),u=qy({queries:l.map(g=>({queryKey:["person-dates",g],queryFn:async()=>(await Ee.getPersonDates(g)).data,enabled:!!g,staleTime:5*60*1e3}))}),d=C.useMemo(()=>{const g={};return u.forEach((y,v)=>{if(y.data&&l[v]){const b=l[v],w=y.data.some(x=>{const S=Array.isArray(x.date_type)?x.date_type[0]:x.date_type;return(S==null?void 0:S.toLowerCase())==="died"});g[b]=w}}),g},[u,l]);Dh(n?`Family Tree - ${n.name||((p=n.title)==null?void 0:p.rendered)||n.title||"Person"}`:"Family Tree");const h=C.useMemo(()=>{if(!n||!i.length)return null;try{const g=uLe(i);a.length>0&&dLe(g,a);const y=lLe(r,i,g);return!y||y.nodes.length===0?null:cLe(y,r,d)}catch{return null}},[n,i,a,r,d]),f=g=>{e(`/people/${g}`)};return s||o?c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):n?c.jsxs("div",{className:"max-w-full mx-auto space-y-6",children:[c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs(ze,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[c.jsx(Ah,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Back to Person"})]}),c.jsxs("h1",{className:"text-2xl font-bold",children:["Family Tree: ",n.name||((m=n.title)==null?void 0:m.rendered)||n.title||`Person ${t}`]})]})}),c.jsx("div",{className:"card p-6",children:c.jsx("div",{className:"w-full",style:{height:"800px"},children:h&&h.nodes&&h.nodes.length>0?c.jsx(rLe,{graphData:h,startPersonId:r,onNodeClick:f}):c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-500 mb-2",children:"No family relationships found."}),c.jsx("p",{className:"text-sm text-gray-400",children:"Add parent or child relationships to see the family tree."})]})})})})]}):c.jsxs("div",{className:"card p-6 text-center",children:[c.jsx("p",{className:"text-red-600 mb-4",children:"Failed to load person."}),c.jsx(ze,{to:"/people",className:"btn-secondary",children:"Back to People"})]})}function fLe({isOpen:t,onClose:e}){const r=Gn(),n=wye(),{register:s,handleSubmit:i,reset:o,formState:{errors:a}}=so({defaultValues:{title:"",description:""}});C.useEffect(()=>{t&&o({title:"",description:""})},[t,o]);const l=async u=>{const d=await n.mutateAsync({title:u.title,content:u.description,status:"publish"});e(),r(`/workspaces/${d.id}`)};return t?c.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:e}),c.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:c.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-lg shadow-xl",children:[c.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Create Workspace"}),c.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:c.jsx(ot,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:i(l),children:[c.jsxs("div",{className:"px-6 py-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Workspace Name *"}),c.jsx("input",{type:"text",...s("title",{required:"Name is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., Sales Team"}),a.title&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.title.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),c.jsx("textarea",{...s("description"),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"What's this workspace for?"})]})]}),c.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:n.isPending,className:"btn-primary",children:n.isPending?"Creating...":"Create Workspace"})]})]})]})})]}):null}function pLe({role:t,isOwner:e}){if(e)return c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:[c.jsx(Zre,{className:"w-3 h-3"}),"Owner"]});const r={admin:{icon:pA,bg:"bg-purple-100",text:"text-purple-800",label:"Admin"},member:{icon:qr,bg:"bg-blue-100",text:"text-blue-800",label:"Member"},viewer:{icon:tne,bg:"bg-gray-100",text:"text-gray-800",label:"Viewer"}},n=r[t]||r.member,s=n.icon;return c.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 ${n.bg} ${n.text} text-xs rounded-full`,children:[c.jsx(s,{className:"w-3 h-3"}),n.label]})}function mLe({workspace:t}){return c.jsx(ze,{to:`/workspaces/${t.id}`,className:"card p-4 hover:shadow-md transition-shadow",children:c.jsx("div",{className:"flex items-start justify-between",children:c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h3",{className:"text-base font-medium text-gray-900 truncate",children:t.title}),t.description&&c.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:t.description}),c.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[c.jsx(pLe,{role:t.role,isOwner:t.is_owner}),c.jsxs("span",{className:"text-sm text-gray-500",children:[t.member_count," member",t.member_count!==1?"s":""]})]})]})})})}function gLe(){const[t,e]=C.useState(!1),{data:r,isLoading:n,error:s}=Sb();return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Workspaces"}),c.jsxs("button",{onClick:()=>e(!0),className:"btn-primary",children:[c.jsx(dr,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Create Workspace"})]})]}),n&&c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),s&&c.jsx("div",{className:"card p-6 text-center",children:c.jsx("p",{className:"text-red-600",children:"Failed to load workspaces."})}),!n&&!s&&(r==null?void 0:r.length)===0&&c.jsxs("div",{className:"card p-12 text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(qr,{className:"w-6 h-6 text-gray-400"})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No workspaces yet"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Create a workspace to start collaborating with others."}),c.jsxs("button",{onClick:()=>e(!0),className:"btn-primary",children:[c.jsx(dr,{className:"w-4 h-4 mr-2"}),"Create Workspace"]})]}),!n&&!s&&(r==null?void 0:r.length)>0&&c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(i=>c.jsx(mLe,{workspace:i},i.id))}),c.jsx(fLe,{isOpen:t,onClose:()=>e(!1)})]})}function yLe({isOpen:t,onClose:e,workspaceId:r,workspaceName:n}){var d,h,f;const s=kye(),{register:i,handleSubmit:o,reset:a,formState:{errors:l}}=so({defaultValues:{email:"",role:"member"}});C.useEffect(()=>{t&&a({email:"",role:"member"})},[t,a]);const u=async p=>{await s.mutateAsync({workspaceId:r,email:p.email,role:p.role}),e()};return t?c.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:e}),c.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:c.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-lg shadow-xl",children:[c.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Invite to Workspace"}),c.jsx("p",{className:"text-sm text-gray-500",children:n})]}),c.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:c.jsx(ot,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:o(u),children:[c.jsxs("div",{className:"px-6 py-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),c.jsxs("div",{className:"relative",children:[c.jsx(mb,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),c.jsx("input",{type:"email",...i("email",{required:"Email is required",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Invalid email address"}}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"colleague@example.com"})]}),l.email&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.email.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),c.jsxs("select",{...i("role"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[c.jsx("option",{value:"admin",children:"Admin - Can manage members and settings"}),c.jsx("option",{value:"member",children:"Member - Can view and edit contacts"}),c.jsx("option",{value:"viewer",children:"Viewer - Can only view contacts"})]})]}),s.isError&&c.jsx("p",{className:"text-sm text-red-600",children:((f=(h=(d=s.error)==null?void 0:d.response)==null?void 0:h.data)==null?void 0:f.message)||"Failed to send invitation"})]}),c.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:s.isPending,className:"btn-primary",children:s.isPending?"Sending...":"Send Invitation"})]})]})]})})]}):null}function vLe({role:t,isOwner:e,small:r=!1}){if(e)return c.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 bg-yellow-100 text-yellow-800 rounded-full ${r?"text-xs":"text-sm"}`,children:[c.jsx(Zre,{className:r?"w-3 h-3":"w-4 h-4"}),"Owner"]});const n={admin:{icon:pA,bg:"bg-purple-100",text:"text-purple-800",label:"Admin"},member:{icon:qr,bg:"bg-blue-100",text:"text-blue-800",label:"Member"},viewer:{icon:tne,bg:"bg-gray-100",text:"text-gray-600",label:"Viewer"}},s=n[t]||n.member,i=s.icon;return c.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 ${s.bg} ${s.text} rounded-full ${r?"text-xs":"text-sm"}`,children:[c.jsx(i,{className:r?"w-3 h-3":"w-4 h-4"}),s.label]})}function bLe({member:t,currentUserRole:e,onRemove:r,onChangeRole:n}){const[s,i]=C.useState(!1),o=e==="admin"||e==="owner",a=t.is_owner;return c.jsxs("div",{className:"flex items-center gap-3 p-3 hover:bg-gray-50",children:[c.jsx("img",{src:t.avatar_url,alt:t.display_name,className:"w-10 h-10 rounded-full"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.display_name}),c.jsx("div",{className:"text-xs text-gray-500",children:t.email})]}),c.jsx(vLe,{role:t.role,isOwner:t.is_owner,small:!0}),o&&!a&&c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>i(!s),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:c.jsx(kge,{className:"w-4 h-4"})}),s&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0",onClick:()=>i(!1)}),c.jsx("div",{className:"absolute right-0 mt-1 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-10",children:c.jsxs("div",{className:"py-1",children:[c.jsx("button",{onClick:()=>{n(t.user_id,"admin"),i(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50",children:"Make Admin"}),c.jsx("button",{onClick:()=>{n(t.user_id,"member"),i(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50",children:"Make Member"}),c.jsx("button",{onClick:()=>{n(t.user_id,"viewer"),i(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50",children:"Make Viewer"}),c.jsx("hr",{className:"my-1"}),c.jsxs("button",{onClick:()=>{r(t.user_id),i(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[c.jsx(Rge,{className:"w-4 h-4"}),"Remove"]})]})})]})]})]})}function xLe({invite:t,onRevoke:e}){return c.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center",children:c.jsx(yb,{className:"w-5 h-5 text-gray-400"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.email}),c.jsxs("div",{className:"text-xs text-gray-500",children:["Invited as ",t.role,"  Expires ",new Date(t.expires_at).toLocaleDateString()]})]}),c.jsx("span",{className:"px-2 py-0.5 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:"Pending"}),c.jsx("button",{onClick:()=>e(t.id),className:"p-2 text-gray-400 hover:text-red-600 rounded-full hover:bg-red-50",title:"Revoke invite",children:c.jsx(Nn,{className:"w-4 h-4"})})]})}function wLe(){var N,_,k,j;const{id:t}=Ih(),e=Gn(),[r,n]=C.useState(!1),[s,i]=C.useState(null),[o,a]=C.useState(!1),{data:l,isLoading:u,error:d}=Rne(t),{data:h=[]}=Cye(t),f=_ye(),p=Nye(),m=jye();C.useEffect(()=>{(async()=>{try{const P=await Ee.getIcalUrl();i(P.data.token)}catch{}})()},[]);const g=s&&l?`${window.location.origin}/workspace/${l.id}/calendar/${s}.ics`:null,y=()=>{g&&(navigator.clipboard.writeText(g),a(!0),setTimeout(()=>a(!1),2e3))},v=async T=>{confirm("Remove this member from the workspace?")&&await f.mutateAsync({workspaceId:parseInt(t),userId:T})},b=async(T,P)=>{await p.mutateAsync({workspaceId:parseInt(t),userId:T,role:P})},w=async T=>{await m.mutateAsync({workspaceId:parseInt(t),inviteId:T})};if(u)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(d||!l)return c.jsxs("div",{className:"card p-6 text-center",children:[c.jsx("p",{className:"text-red-600",children:"Failed to load workspace."}),c.jsx(ze,{to:"/workspaces",className:"text-primary-600 hover:underline mt-2 inline-block",children:"Back to Workspaces"})]});const x=(N=l.current_user)!=null&&N.is_owner?"owner":(_=l.current_user)==null?void 0:_.role,S=x==="admin"||x==="owner",E=(k=l.current_user)==null?void 0:k.is_owner;return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{children:[c.jsxs("button",{onClick:()=>e("/workspaces"),className:"flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700 mb-2",children:[c.jsx(Ah,{className:"w-4 h-4"}),"Back to Workspaces"]}),c.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:l.title}),l.description&&c.jsx("p",{className:"text-gray-500 mt-1",children:l.description})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[S&&c.jsxs("button",{onClick:()=>n(!0),className:"btn-primary",children:[c.jsx(yb,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Invite"})]}),E&&c.jsxs(ze,{to:`/workspaces/${t}/settings`,className:"btn-secondary",children:[c.jsx(hA,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Settings"})]})]})]}),c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:c.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Members (",l.member_count,")"]})}),c.jsx("div",{className:"divide-y divide-gray-100",children:(j=l.members)==null?void 0:j.map(T=>c.jsx(bLe,{member:T,currentUserRole:x,onRemove:v,onChangeRole:b},T.user_id))})]}),S&&h.length>0&&c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:c.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Pending Invites (",h.length,")"]})}),c.jsx("div",{className:"divide-y divide-gray-100",children:h.map(T=>c.jsx(xLe,{invite:T,onRevoke:w},T.id))})]}),c.jsxs("div",{className:"card p-4",children:[c.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[c.jsx(Ji,{className:"w-4 h-4"}),"Calendar Subscription"]}),c.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Subscribe to important dates for all contacts in this workspace."}),s?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",value:g||"",readOnly:!0,className:"flex-1 text-xs px-2 py-1.5 bg-gray-50 border border-gray-300 rounded font-mono",onClick:T=>T.target.select()}),c.jsxs("button",{onClick:y,className:"px-3 py-1.5 text-xs bg-primary-600 text-white rounded hover:bg-primary-700 flex items-center gap-1",children:[o?c.jsx(to,{className:"w-3 h-3"}):c.jsx(mge,{className:"w-3 h-3"}),o?"Copied!":"Copy"]})]}):c.jsx("p",{className:"text-xs text-gray-500",children:"Enable iCal feed in Settings to subscribe to workspace calendars."})]}),c.jsx(yLe,{isOpen:r,onClose:()=>n(!1),workspaceId:parseInt(t),workspaceName:l.title})]})}function SLe(){var w;const{id:t}=Ih(),e=Gn(),[r,n]=C.useState(!1),[s,i]=C.useState(""),{data:o,isLoading:a,error:l}=Rne(t),u=Sye(),d=Eye(),{register:h,handleSubmit:f,reset:p,formState:{errors:m,isDirty:g}}=so();C.useEffect(()=>{o&&p({title:o.title,description:o.description||""})},[o,p]);const y=async x=>{await u.mutateAsync({id:parseInt(t),data:{title:x.title,content:x.description}})},v=async()=>{s===o.title&&(await d.mutateAsync(parseInt(t)),e("/workspaces"))};return a?c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):l||!o?c.jsxs("div",{className:"card p-6 text-center",children:[c.jsx("p",{className:"text-red-600",children:"Failed to load workspace."}),c.jsx(ze,{to:"/workspaces",className:"text-primary-600 hover:underline mt-2 inline-block",children:"Back to Workspaces"})]}):((w=o.current_user)==null?void 0:w.is_owner)?c.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[c.jsxs("div",{children:[c.jsxs("button",{onClick:()=>e(`/workspaces/${t}`),className:"flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700 mb-2",children:[c.jsx(Ah,{className:"w-4 h-4"}),"Back to Workspace"]}),c.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Workspace Settings"}),c.jsx("p",{className:"text-gray-500 mt-1",children:o.title})]}),c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:c.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"General"})}),c.jsxs("form",{onSubmit:f(y),className:"p-6 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Workspace Name *"}),c.jsx("input",{type:"text",...h("title",{required:"Name is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),m.title&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.title.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),c.jsx("textarea",{...h("description"),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{type:"submit",disabled:!g||u.isPending,className:"btn-primary disabled:opacity-50",children:u.isPending?"Saving...":"Save Changes"})})]})]}),c.jsxs("div",{className:"card border-red-200",children:[c.jsx("div",{className:"px-6 py-4 border-b border-red-200 bg-red-50",children:c.jsxs("h2",{className:"text-lg font-medium text-red-900 flex items-center gap-2",children:[c.jsx(Hre,{className:"w-5 h-5"}),"Danger Zone"]})}),c.jsx("div",{className:"p-6",children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx(Nn,{className:"w-6 h-6 text-red-600 flex-shrink-0"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-base font-medium text-gray-900",children:"Delete Workspace"}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"This will permanently delete the workspace and remove all member access. Contacts will remain but will no longer be shared via this workspace."}),r?c.jsxs("div",{className:"mt-4 p-4 bg-red-50 rounded-lg",children:[c.jsxs("p",{className:"text-sm text-red-800 mb-3",children:["Type ",c.jsx("strong",{children:o.title})," to confirm deletion:"]}),c.jsx("input",{type:"text",value:s,onChange:x=>i(x.target.value),className:"w-full px-3 py-2 border border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 mb-3",placeholder:"Type workspace name..."}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>{n(!1),i("")},className:"btn-secondary",children:"Cancel"}),c.jsx("button",{onClick:v,disabled:s!==o.title||d.isPending,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:d.isPending?"Deleting...":"Delete Forever"})]})]}):c.jsx("button",{onClick:()=>n(!0),className:"mt-4 px-4 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50",children:"Delete Workspace"})]})]})})]})]}):c.jsxs("div",{className:"card p-6 text-center",children:[c.jsx("p",{className:"text-gray-600",children:"Only workspace owners can access settings."}),c.jsx(ze,{to:`/workspaces/${t}`,className:"text-primary-600 hover:underline mt-2 inline-block",children:"Back to Workspace"})]})}function ELe(){var a,l,u,d,h;const{token:t}=Ih(),e=Gn(),{data:r,isLoading:n,error:s}=Tye(t),i=Oye(),o=async()=>{try{const f=await i.mutateAsync(t);e(`/workspaces/${f.workspace_id}`)}catch{}};if(n)return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"card p-8 max-w-md w-full mx-4 text-center",children:[c.jsx(ea,{className:"w-8 h-8 text-primary-600 animate-spin mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Validating invitation..."})]})});if(s||!r){const f=((l=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:l.message)||"This invitation is invalid or has expired.";return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"card p-8 max-w-md w-full mx-4 text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(YI,{className:"w-8 h-8 text-red-600"})}),c.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Invalid Invitation"}),c.jsx("p",{className:"text-gray-600 mb-6",children:f}),c.jsx(ze,{to:"/workspaces",className:"btn-primary inline-block",children:"Go to Workspaces"})]})})}return r.status==="accepted"?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"card p-8 max-w-md w-full mx-4 text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(Uc,{className:"w-8 h-8 text-green-600"})}),c.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Already Accepted"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"This invitation has already been accepted."}),c.jsx(ze,{to:`/workspaces/${r.workspace_id}`,className:"btn-primary inline-block",children:"Go to Workspace"})]})}):c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"card p-8 max-w-md w-full mx-4",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(qr,{className:"w-8 h-8 text-primary-600"})}),c.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Workspace Invitation"})]}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"You have been invited to join"}),c.jsx("p",{className:"text-lg font-semibold text-gray-900",children:r.workspace_name})]}),c.jsx("hr",{className:"my-4 border-gray-200"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-500",children:"Invited by"}),c.jsx("p",{className:"font-medium text-gray-900",children:r.invited_by})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-500",children:"Your role"}),c.jsx("p",{className:"font-medium text-gray-900 capitalize",children:r.role})]})]}),c.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-sm text-gray-500",children:[c.jsx(Xre,{className:"w-4 h-4"}),"Expires ",new Date(r.expires_at).toLocaleDateString()]})]}),i.error&&c.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm text-red-600",children:((h=(d=(u=i.error)==null?void 0:u.response)==null?void 0:d.data)==null?void 0:h.message)||"Failed to accept invitation"})}),c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsx("button",{onClick:o,disabled:i.isPending,className:"btn-primary w-full justify-center",children:i.isPending?c.jsxs(c.Fragment,{children:[c.jsx(ea,{className:"w-4 h-4 animate-spin mr-2"}),"Joining..."]}):"Accept Invitation"}),c.jsx(ze,{to:"/workspaces",className:"btn-secondary w-full justify-center text-center",children:"Decline"})]}),c.jsxs("p",{className:"text-xs text-gray-500 text-center mt-4",children:["This invitation was sent to ",r.email]})]})})}function _Le(){const{loginUrl:t,isLoggedIn:e}=sA();return yne(),C.useEffect(()=>{e||(window.location.href=t)},[e,t]),c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Redirecting to login..."})]})})}function NLe({children:t}){const{data:e,isLoading:r,error:n}=it({queryKey:["current-user"],queryFn:async()=>(await Ee.getCurrentUser()).data,retry:!1});return r?c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):n||!e?c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:c.jsx("div",{className:"max-w-md w-full mx-4",children:c.jsxs("div",{className:"card p-8 text-center",children:[c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:c.jsx(Zo,{className:"w-8 h-8 text-yellow-600"})})}),c.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Account Pending Approval"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Your account is pending approval by an administrator. You will receive an email notification once your account has been approved."}),c.jsx("p",{className:"text-sm text-gray-500",children:"If you have any questions, please contact your administrator."})]})})}):e!=null&&e.is_admin||e.is_approved?t:c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:c.jsx("div",{className:"max-w-md w-full mx-4",children:c.jsxs("div",{className:"card p-8 text-center",children:[c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:c.jsx(Zo,{className:"w-8 h-8 text-yellow-600"})})}),c.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Account Pending Approval"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Your account is pending approval by an administrator. You will receive an email notification once your account has been approved."}),c.jsx("p",{className:"text-sm text-gray-500",children:"If you have any questions, please contact your administrator."})]})})})}function CLe({children:t}){const{isLoggedIn:e,isLoading:r}=sA();return r?c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e?c.jsx(NLe,{children:t}):c.jsx(nre,{to:"/login",replace:!0})}function kLe(){const{hasUpdate:t,latestVersion:e,reload:r}=cge();return t?c.jsx("div",{className:"fixed top-0 left-0 right-0 z-[100] bg-primary-600 text-white py-2 px-4 shadow-lg",children:c.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-center gap-4 text-sm",children:[c.jsxs("span",{children:["A new version (",e,") is available."]}),c.jsxs("button",{onClick:r,className:"inline-flex items-center gap-2 px-3 py-1 bg-white text-primary-600 rounded-md font-medium hover:bg-primary-50 transition-colors",children:[c.jsx(sne,{className:"w-4 h-4"}),"Reload"]})]})}):null}function jLe(){return c.jsxs(c.Fragment,{children:[c.jsx(kLe,{}),c.jsxs(v5,{children:[c.jsx(Dr,{path:"/login",element:c.jsx(_Le,{})}),c.jsx(Dr,{path:"/*",element:c.jsx(CLe,{children:c.jsx($ye,{children:c.jsxs(v5,{children:[c.jsx(Dr,{path:"/",element:c.jsx(R_e,{})}),c.jsx(Dr,{path:"/people",element:c.jsx(B_e,{})}),c.jsx(Dr,{path:"/people/:id/family-tree",element:c.jsx(hLe,{})}),c.jsx(Dr,{path:"/people/:id",element:c.jsx(VCe,{})}),c.jsx(Dr,{path:"/companies",element:c.jsx(HCe,{})}),c.jsx(Dr,{path:"/companies/:id",element:c.jsx(KCe,{})}),c.jsx(Dr,{path:"/dates",element:c.jsx(QCe,{})}),c.jsx(Dr,{path:"/todos",element:c.jsx(XCe,{})}),c.jsx(Dr,{path:"/settings",element:c.jsx(nke,{})}),c.jsx(Dr,{path:"/settings/relationship-types",element:c.jsx(cke,{})}),c.jsx(Dr,{path:"/settings/user-approval",element:c.jsx(uke,{})}),c.jsx(Dr,{path:"/workspaces",element:c.jsx(gLe,{})}),c.jsx(Dr,{path:"/workspaces/:id",element:c.jsx(wLe,{})}),c.jsx(Dr,{path:"/workspaces/:id/settings",element:c.jsx(SLe,{})}),c.jsx(Dr,{path:"/workspace-invite/:token",element:c.jsx(ELe,{})}),c.jsx(Dr,{path:"*",element:c.jsx(nre,{to:"/",replace:!0})})]})})})})]})]})}const TLe=new Tpe({defaultOptions:{queries:{staleTime:5*60*1e3,retry:1}}}),SP=document.getElementById("root");if(SP)try{EP.createRoot(SP).render(c.jsx(te.StrictMode,{children:c.jsx(Ope,{client:TLe,children:c.jsx(Xfe,{children:c.jsx(jLe,{})})})}))}catch{SP.innerHTML='<div style="padding: 20px; color: red;"><h1>Error Loading Application</h1><p>Please check the browser console for details.</p></div>'}
