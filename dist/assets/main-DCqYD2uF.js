var D$=t=>{throw TypeError(t)};var Db=(t,e,r)=>e.has(t)||D$("Cannot "+r);var R=(t,e,r)=>(Db(t,e,"read from private field"),r?r.call(t):e.get(t)),xe=(t,e,r)=>e.has(t)?D$("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),oe=(t,e,r,n)=>(Db(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),De=(t,e,r)=>(Db(t,e,"access private method"),r);var Gm=(t,e,r,n)=>({set _(i){oe(t,e,i,r)},get _(){return R(t,e,n)}});function Jae(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}function dJ(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hJ={exports:{}},Jv={},fJ={exports:{}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vp=Symbol.for("react.element"),Zae=Symbol.for("react.portal"),ele=Symbol.for("react.fragment"),tle=Symbol.for("react.strict_mode"),rle=Symbol.for("react.profiler"),nle=Symbol.for("react.provider"),ile=Symbol.for("react.context"),sle=Symbol.for("react.forward_ref"),ole=Symbol.for("react.suspense"),ale=Symbol.for("react.memo"),lle=Symbol.for("react.lazy"),F$=Symbol.iterator;function cle(t){return t===null||typeof t!="object"?null:(t=F$&&t[F$]||t["@@iterator"],typeof t=="function"?t:null)}var pJ={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mJ=Object.assign,gJ={};function Jd(t,e,r){this.props=t,this.context=e,this.refs=gJ,this.updater=r||pJ}Jd.prototype.isReactComponent={};Jd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Jd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function yJ(){}yJ.prototype=Jd.prototype;function iR(t,e,r){this.props=t,this.context=e,this.refs=gJ,this.updater=r||pJ}var sR=iR.prototype=new yJ;sR.constructor=iR;mJ(sR,Jd.prototype);sR.isPureReactComponent=!0;var q$=Array.isArray,vJ=Object.prototype.hasOwnProperty,oR={current:null},bJ={key:!0,ref:!0,__self:!0,__source:!0};function xJ(t,e,r){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)vJ.call(e,n)&&!bJ.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:Vp,type:t,key:s,ref:o,props:i,_owner:oR.current}}function ule(t,e){return{$$typeof:Vp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function aR(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vp}function dle(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var L$=/\/+/g;function Fb(t,e){return typeof t=="object"&&t!==null&&t.key!=null?dle(""+t.key):e.toString(36)}function Fg(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Vp:case Zae:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+Fb(o,0):n,q$(i)?(r="",t!=null&&(r=t.replace(L$,"$&/")+"/"),Fg(i,e,r,"",function(c){return c})):i!=null&&(aR(i)&&(i=ule(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(L$,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",q$(t))for(var a=0;a<t.length;a++){s=t[a];var l=n+Fb(s,a);o+=Fg(s,e,r,l,i)}else if(l=cle(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=n+Fb(s,a++),o+=Fg(s,e,r,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ym(t,e,r){if(t==null)return t;var n=[],i=0;return Fg(t,n,"","",function(s){return e.call(r,s,i++)}),n}function hle(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Mn={current:null},qg={transition:null},fle={ReactCurrentDispatcher:Mn,ReactCurrentBatchConfig:qg,ReactCurrentOwner:oR};function wJ(){throw Error("act(...) is not supported in production builds of React.")}tt.Children={map:Ym,forEach:function(t,e,r){Ym(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Ym(t,function(){e++}),e},toArray:function(t){return Ym(t,function(e){return e})||[]},only:function(t){if(!aR(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};tt.Component=Jd;tt.Fragment=ele;tt.Profiler=rle;tt.PureComponent=iR;tt.StrictMode=tle;tt.Suspense=ole;tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fle;tt.act=wJ;tt.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=mJ({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=oR.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)vJ.call(e,l)&&!bJ.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:Vp,type:t.type,key:i,ref:s,props:n,_owner:o}};tt.createContext=function(t){return t={$$typeof:ile,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:nle,_context:t},t.Consumer=t};tt.createElement=xJ;tt.createFactory=function(t){var e=xJ.bind(null,t);return e.type=t,e};tt.createRef=function(){return{current:null}};tt.forwardRef=function(t){return{$$typeof:sle,render:t}};tt.isValidElement=aR;tt.lazy=function(t){return{$$typeof:lle,_payload:{_status:-1,_result:t},_init:hle}};tt.memo=function(t,e){return{$$typeof:ale,type:t,compare:e===void 0?null:e}};tt.startTransition=function(t){var e=qg.transition;qg.transition={};try{t()}finally{qg.transition=e}};tt.unstable_act=wJ;tt.useCallback=function(t,e){return Mn.current.useCallback(t,e)};tt.useContext=function(t){return Mn.current.useContext(t)};tt.useDebugValue=function(){};tt.useDeferredValue=function(t){return Mn.current.useDeferredValue(t)};tt.useEffect=function(t,e){return Mn.current.useEffect(t,e)};tt.useId=function(){return Mn.current.useId()};tt.useImperativeHandle=function(t,e,r){return Mn.current.useImperativeHandle(t,e,r)};tt.useInsertionEffect=function(t,e){return Mn.current.useInsertionEffect(t,e)};tt.useLayoutEffect=function(t,e){return Mn.current.useLayoutEffect(t,e)};tt.useMemo=function(t,e){return Mn.current.useMemo(t,e)};tt.useReducer=function(t,e,r){return Mn.current.useReducer(t,e,r)};tt.useRef=function(t){return Mn.current.useRef(t)};tt.useState=function(t){return Mn.current.useState(t)};tt.useSyncExternalStore=function(t,e,r){return Mn.current.useSyncExternalStore(t,e,r)};tt.useTransition=function(){return Mn.current.useTransition()};tt.version="18.3.1";fJ.exports=tt;var T=fJ.exports;const Se=dJ(T),ple=Jae({__proto__:null,default:Se},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mle=T,gle=Symbol.for("react.element"),yle=Symbol.for("react.fragment"),vle=Object.prototype.hasOwnProperty,ble=mle.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xle={key:!0,ref:!0,__self:!0,__source:!0};function SJ(t,e,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)vle.call(e,n)&&!xle.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:gle,type:t,key:s,ref:o,props:i,_owner:ble.current}}Jv.Fragment=yle;Jv.jsx=SJ;Jv.jsxs=SJ;hJ.exports=Jv;var u=hJ.exports,jj={},_J={exports:{}},vi={},EJ={exports:{}},NJ={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,W){var V=F.length;F.push(W);e:for(;0<V;){var H=V-1>>>1,K=F[H];if(0<i(K,W))F[H]=W,F[V]=K,V=H;else break e}}function r(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var W=F[0],V=F.pop();if(V!==W){F[0]=V;e:for(var H=0,K=F.length,de=K>>>1;H<de;){var be=2*(H+1)-1,Fe=F[be],pe=be+1,Oe=F[pe];if(0>i(Fe,V))pe<K&&0>i(Oe,Fe)?(F[H]=Oe,F[pe]=V,H=pe):(F[H]=Fe,F[be]=V,H=be);else if(pe<K&&0>i(Oe,V))F[H]=Oe,F[pe]=V,H=pe;else break e}}return W}function i(F,W){var V=F.sortIndex-W.sortIndex;return V!==0?V:F.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(F){for(var W=r(c);W!==null;){if(W.callback===null)n(c);else if(W.startTime<=F)n(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=r(c)}}function x(F){if(g=!1,w(F),!m)if(r(l)!==null)m=!0,I(S);else{var W=r(c);W!==null&&L(x,W.startTime-F)}}function S(F,W){m=!1,g&&(g=!1,y(N),N=-1),p=!0;var V=f;try{for(w(W),h=r(l);h!==null&&(!(h.expirationTime>W)||F&&!O());){var H=h.callback;if(typeof H=="function"){h.callback=null,f=h.priorityLevel;var K=H(h.expirationTime<=W);W=t.unstable_now(),typeof K=="function"?h.callback=K:h===r(l)&&n(l),w(W)}else n(l);h=r(l)}if(h!==null)var de=!0;else{var be=r(c);be!==null&&L(x,be.startTime-W),de=!1}return de}finally{h=null,f=V,p=!1}}var _=!1,E=null,N=-1,k=5,C=-1;function O(){return!(t.unstable_now()-C<k)}function P(){if(E!==null){var F=t.unstable_now();C=F;var W=!0;try{W=E(!0,F)}finally{W?j():(_=!1,E=null)}}else _=!1}var j;if(typeof b=="function")j=function(){b(P)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,D=A.port2;A.port1.onmessage=P,j=function(){D.postMessage(null)}}else j=function(){v(P,0)};function I(F){E=F,_||(_=!0,j())}function L(F,W){N=v(function(){F(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,I(S))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(F){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var V=f;f=W;try{return F()}finally{f=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,W){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var V=f;f=F;try{return W()}finally{f=V}},t.unstable_scheduleCallback=function(F,W,V){var H=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?H+V:H):V=H,F){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=V+K,F={id:d++,callback:W,priorityLevel:F,startTime:V,expirationTime:K,sortIndex:-1},V>H?(F.sortIndex=V,e(c,F),r(l)===null&&F===r(c)&&(g?(y(N),N=-1):g=!0,L(x,V-H))):(F.sortIndex=K,e(l,F),m||p||(m=!0,I(S))),F},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(F){var W=f;return function(){var V=f;f=W;try{return F.apply(this,arguments)}finally{f=V}}}})(NJ);EJ.exports=NJ;var wle=EJ.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sle=T,yi=wle;function te(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var CJ=new Set,Uf={};function Lc(t,e){_d(t,e),_d(t+"Capture",e)}function _d(t,e){for(Uf[t]=e,t=0;t<e.length;t++)CJ.add(e[t])}var ko=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pj=Object.prototype.hasOwnProperty,_le=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,B$={},z$={};function Ele(t){return Pj.call(z$,t)?!0:Pj.call(B$,t)?!1:_le.test(t)?z$[t]=!0:(B$[t]=!0,!1)}function Nle(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Cle(t,e,r,n){if(e===null||typeof e>"u"||Nle(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function An(t,e,r,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var sn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){sn[t]=new An(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];sn[e]=new An(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){sn[t]=new An(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){sn[t]=new An(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){sn[t]=new An(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){sn[t]=new An(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){sn[t]=new An(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){sn[t]=new An(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){sn[t]=new An(t,5,!1,t.toLowerCase(),null,!1,!1)});var lR=/[\-:]([a-z])/g;function cR(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(lR,cR);sn[e]=new An(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(lR,cR);sn[e]=new An(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(lR,cR);sn[e]=new An(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){sn[t]=new An(t,1,!1,t.toLowerCase(),null,!1,!1)});sn.xlinkHref=new An("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){sn[t]=new An(t,1,!1,t.toLowerCase(),null,!0,!0)});function uR(t,e,r,n){var i=sn.hasOwnProperty(e)?sn[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Cle(e,r,i,n)&&(r=null),n||i===null?Ele(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Ro=Sle.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qm=Symbol.for("react.element"),Tu=Symbol.for("react.portal"),Ou=Symbol.for("react.fragment"),dR=Symbol.for("react.strict_mode"),Ij=Symbol.for("react.profiler"),kJ=Symbol.for("react.provider"),TJ=Symbol.for("react.context"),hR=Symbol.for("react.forward_ref"),Rj=Symbol.for("react.suspense"),Mj=Symbol.for("react.suspense_list"),fR=Symbol.for("react.memo"),ea=Symbol.for("react.lazy"),OJ=Symbol.for("react.offscreen"),V$=Symbol.iterator;function qh(t){return t===null||typeof t!="object"?null:(t=V$&&t[V$]||t["@@iterator"],typeof t=="function"?t:null)}var Qt=Object.assign,qb;function of(t){if(qb===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);qb=e&&e[1]||""}return`
`+qb+t}var Lb=!1;function Bb(t,e){if(!t||Lb)return"";Lb=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Lb=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?of(t):""}function kle(t){switch(t.tag){case 5:return of(t.type);case 16:return of("Lazy");case 13:return of("Suspense");case 19:return of("SuspenseList");case 0:case 2:case 15:return t=Bb(t.type,!1),t;case 11:return t=Bb(t.type.render,!1),t;case 1:return t=Bb(t.type,!0),t;default:return""}}function Aj(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ou:return"Fragment";case Tu:return"Portal";case Ij:return"Profiler";case dR:return"StrictMode";case Rj:return"Suspense";case Mj:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case TJ:return(t.displayName||"Context")+".Consumer";case kJ:return(t._context.displayName||"Context")+".Provider";case hR:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case fR:return e=t.displayName||null,e!==null?e:Aj(t.type)||"Memo";case ea:e=t._payload,t=t._init;try{return Aj(t(e))}catch{}}return null}function Tle(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Aj(e);case 8:return e===dR?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ja(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jJ(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ole(t){var e=jJ(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Xm(t){t._valueTracker||(t._valueTracker=Ole(t))}function PJ(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=jJ(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function uy(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function $j(t,e){var r=e.checked;return Qt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function U$(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Ja(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function IJ(t,e){e=e.checked,e!=null&&uR(t,"checked",e,!1)}function Dj(t,e){IJ(t,e);var r=Ja(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Fj(t,e.type,r):e.hasOwnProperty("defaultValue")&&Fj(t,e.type,Ja(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function H$(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Fj(t,e,r){(e!=="number"||uy(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var af=Array.isArray;function Gu(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Ja(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function qj(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(te(91));return Qt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function W$(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(te(92));if(af(r)){if(1<r.length)throw Error(te(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Ja(r)}}function RJ(t,e){var r=Ja(e.value),n=Ja(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function K$(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function MJ(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lj(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?MJ(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Jm,AJ=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Jm=Jm||document.createElement("div"),Jm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Jm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Hf(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var yf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jle=["Webkit","ms","Moz","O"];Object.keys(yf).forEach(function(t){jle.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),yf[e]=yf[t]})});function $J(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||yf.hasOwnProperty(t)&&yf[t]?(""+e).trim():e+"px"}function DJ(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=$J(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var Ple=Qt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bj(t,e){if(e){if(Ple[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(te(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(te(62))}}function zj(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vj=null;function pR(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Uj=null,Yu=null,Qu=null;function G$(t){if(t=Wp(t)){if(typeof Uj!="function")throw Error(te(280));var e=t.stateNode;e&&(e=n0(e),Uj(t.stateNode,t.type,e))}}function FJ(t){Yu?Qu?Qu.push(t):Qu=[t]:Yu=t}function qJ(){if(Yu){var t=Yu,e=Qu;if(Qu=Yu=null,G$(t),e)for(t=0;t<e.length;t++)G$(e[t])}}function LJ(t,e){return t(e)}function BJ(){}var zb=!1;function zJ(t,e,r){if(zb)return t(e,r);zb=!0;try{return LJ(t,e,r)}finally{zb=!1,(Yu!==null||Qu!==null)&&(BJ(),qJ())}}function Wf(t,e){var r=t.stateNode;if(r===null)return null;var n=n0(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(te(231,e,typeof r));return r}var Hj=!1;if(ko)try{var Lh={};Object.defineProperty(Lh,"passive",{get:function(){Hj=!0}}),window.addEventListener("test",Lh,Lh),window.removeEventListener("test",Lh,Lh)}catch{Hj=!1}function Ile(t,e,r,n,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var vf=!1,dy=null,hy=!1,Wj=null,Rle={onError:function(t){vf=!0,dy=t}};function Mle(t,e,r,n,i,s,o,a,l){vf=!1,dy=null,Ile.apply(Rle,arguments)}function Ale(t,e,r,n,i,s,o,a,l){if(Mle.apply(this,arguments),vf){if(vf){var c=dy;vf=!1,dy=null}else throw Error(te(198));hy||(hy=!0,Wj=c)}}function Bc(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function VJ(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Y$(t){if(Bc(t)!==t)throw Error(te(188))}function $le(t){var e=t.alternate;if(!e){if(e=Bc(t),e===null)throw Error(te(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return Y$(i),t;if(s===n)return Y$(i),e;s=s.sibling}throw Error(te(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(te(189))}}if(r.alternate!==n)throw Error(te(190))}if(r.tag!==3)throw Error(te(188));return r.stateNode.current===r?t:e}function UJ(t){return t=$le(t),t!==null?HJ(t):null}function HJ(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=HJ(t);if(e!==null)return e;t=t.sibling}return null}var WJ=yi.unstable_scheduleCallback,Q$=yi.unstable_cancelCallback,Dle=yi.unstable_shouldYield,Fle=yi.unstable_requestPaint,pr=yi.unstable_now,qle=yi.unstable_getCurrentPriorityLevel,mR=yi.unstable_ImmediatePriority,KJ=yi.unstable_UserBlockingPriority,fy=yi.unstable_NormalPriority,Lle=yi.unstable_LowPriority,GJ=yi.unstable_IdlePriority,Zv=null,$s=null;function Ble(t){if($s&&typeof $s.onCommitFiberRoot=="function")try{$s.onCommitFiberRoot(Zv,t,void 0,(t.current.flags&128)===128)}catch{}}var ds=Math.clz32?Math.clz32:Ule,zle=Math.log,Vle=Math.LN2;function Ule(t){return t>>>=0,t===0?32:31-(zle(t)/Vle|0)|0}var Zm=64,eg=4194304;function lf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function py(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=lf(a):(s&=o,s!==0&&(n=lf(s)))}else o=r&~i,o!==0?n=lf(o):s!==0&&(n=lf(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-ds(e),i=1<<r,n|=t[r],e&=~i;return n}function Hle(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wle(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ds(s),a=1<<o,l=i[o];l===-1?(!(a&r)||a&n)&&(i[o]=Hle(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Kj(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function YJ(){var t=Zm;return Zm<<=1,!(Zm&4194240)&&(Zm=64),t}function Vb(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Up(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ds(e),t[e]=r}function Kle(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-ds(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function gR(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-ds(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var St=0;function QJ(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var XJ,yR,JJ,ZJ,eZ,Gj=!1,tg=[],Pa=null,Ia=null,Ra=null,Kf=new Map,Gf=new Map,la=[],Gle="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function X$(t,e){switch(t){case"focusin":case"focusout":Pa=null;break;case"dragenter":case"dragleave":Ia=null;break;case"mouseover":case"mouseout":Ra=null;break;case"pointerover":case"pointerout":Kf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gf.delete(e.pointerId)}}function Bh(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Wp(e),e!==null&&yR(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Yle(t,e,r,n,i){switch(e){case"focusin":return Pa=Bh(Pa,t,e,r,n,i),!0;case"dragenter":return Ia=Bh(Ia,t,e,r,n,i),!0;case"mouseover":return Ra=Bh(Ra,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Kf.set(s,Bh(Kf.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Gf.set(s,Bh(Gf.get(s)||null,t,e,r,n,i)),!0}return!1}function tZ(t){var e=jl(t.target);if(e!==null){var r=Bc(e);if(r!==null){if(e=r.tag,e===13){if(e=VJ(r),e!==null){t.blockedOn=e,eZ(t.priority,function(){JJ(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Yj(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Vj=n,r.target.dispatchEvent(n),Vj=null}else return e=Wp(r),e!==null&&yR(e),t.blockedOn=r,!1;e.shift()}return!0}function J$(t,e,r){Lg(t)&&r.delete(e)}function Qle(){Gj=!1,Pa!==null&&Lg(Pa)&&(Pa=null),Ia!==null&&Lg(Ia)&&(Ia=null),Ra!==null&&Lg(Ra)&&(Ra=null),Kf.forEach(J$),Gf.forEach(J$)}function zh(t,e){t.blockedOn===e&&(t.blockedOn=null,Gj||(Gj=!0,yi.unstable_scheduleCallback(yi.unstable_NormalPriority,Qle)))}function Yf(t){function e(i){return zh(i,t)}if(0<tg.length){zh(tg[0],t);for(var r=1;r<tg.length;r++){var n=tg[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Pa!==null&&zh(Pa,t),Ia!==null&&zh(Ia,t),Ra!==null&&zh(Ra,t),Kf.forEach(e),Gf.forEach(e),r=0;r<la.length;r++)n=la[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<la.length&&(r=la[0],r.blockedOn===null);)tZ(r),r.blockedOn===null&&la.shift()}var Xu=Ro.ReactCurrentBatchConfig,my=!0;function Xle(t,e,r,n){var i=St,s=Xu.transition;Xu.transition=null;try{St=1,vR(t,e,r,n)}finally{St=i,Xu.transition=s}}function Jle(t,e,r,n){var i=St,s=Xu.transition;Xu.transition=null;try{St=4,vR(t,e,r,n)}finally{St=i,Xu.transition=s}}function vR(t,e,r,n){if(my){var i=Yj(t,e,r,n);if(i===null)Zb(t,e,n,gy,r),X$(t,n);else if(Yle(i,t,e,r,n))n.stopPropagation();else if(X$(t,n),e&4&&-1<Gle.indexOf(t)){for(;i!==null;){var s=Wp(i);if(s!==null&&XJ(s),s=Yj(t,e,r,n),s===null&&Zb(t,e,n,gy,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else Zb(t,e,n,null,r)}}var gy=null;function Yj(t,e,r,n){if(gy=null,t=pR(n),t=jl(t),t!==null)if(e=Bc(t),e===null)t=null;else if(r=e.tag,r===13){if(t=VJ(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return gy=t,null}function rZ(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qle()){case mR:return 1;case KJ:return 4;case fy:case Lle:return 16;case GJ:return 536870912;default:return 16}default:return 16}}var Ea=null,bR=null,Bg=null;function nZ(){if(Bg)return Bg;var t,e=bR,r=e.length,n,i="value"in Ea?Ea.value:Ea.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[s-n];n++);return Bg=i.slice(t,1<n?1-n:void 0)}function zg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function rg(){return!0}function Z$(){return!1}function bi(t){function e(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?rg:Z$,this.isPropagationStopped=Z$,this}return Qt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=rg)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=rg)},persist:function(){},isPersistent:rg}),e}var Zd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xR=bi(Zd),Hp=Qt({},Zd,{view:0,detail:0}),Zle=bi(Hp),Ub,Hb,Vh,e0=Qt({},Hp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wR,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vh&&(Vh&&t.type==="mousemove"?(Ub=t.screenX-Vh.screenX,Hb=t.screenY-Vh.screenY):Hb=Ub=0,Vh=t),Ub)},movementY:function(t){return"movementY"in t?t.movementY:Hb}}),eD=bi(e0),ece=Qt({},e0,{dataTransfer:0}),tce=bi(ece),rce=Qt({},Hp,{relatedTarget:0}),Wb=bi(rce),nce=Qt({},Zd,{animationName:0,elapsedTime:0,pseudoElement:0}),ice=bi(nce),sce=Qt({},Zd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),oce=bi(sce),ace=Qt({},Zd,{data:0}),tD=bi(ace),lce={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cce={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uce={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dce(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=uce[t])?!!e[t]:!1}function wR(){return dce}var hce=Qt({},Hp,{key:function(t){if(t.key){var e=lce[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=zg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cce[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wR,charCode:function(t){return t.type==="keypress"?zg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fce=bi(hce),pce=Qt({},e0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rD=bi(pce),mce=Qt({},Hp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wR}),gce=bi(mce),yce=Qt({},Zd,{propertyName:0,elapsedTime:0,pseudoElement:0}),vce=bi(yce),bce=Qt({},e0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xce=bi(bce),wce=[9,13,27,32],SR=ko&&"CompositionEvent"in window,bf=null;ko&&"documentMode"in document&&(bf=document.documentMode);var Sce=ko&&"TextEvent"in window&&!bf,iZ=ko&&(!SR||bf&&8<bf&&11>=bf),nD=" ",iD=!1;function sZ(t,e){switch(t){case"keyup":return wce.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oZ(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ju=!1;function _ce(t,e){switch(t){case"compositionend":return oZ(e);case"keypress":return e.which!==32?null:(iD=!0,nD);case"textInput":return t=e.data,t===nD&&iD?null:t;default:return null}}function Ece(t,e){if(ju)return t==="compositionend"||!SR&&sZ(t,e)?(t=nZ(),Bg=bR=Ea=null,ju=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return iZ&&e.locale!=="ko"?null:e.data;default:return null}}var Nce={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sD(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Nce[t.type]:e==="textarea"}function aZ(t,e,r,n){FJ(n),e=yy(e,"onChange"),0<e.length&&(r=new xR("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var xf=null,Qf=null;function Cce(t){vZ(t,0)}function t0(t){var e=Ru(t);if(PJ(e))return t}function kce(t,e){if(t==="change")return e}var lZ=!1;if(ko){var Kb;if(ko){var Gb="oninput"in document;if(!Gb){var oD=document.createElement("div");oD.setAttribute("oninput","return;"),Gb=typeof oD.oninput=="function"}Kb=Gb}else Kb=!1;lZ=Kb&&(!document.documentMode||9<document.documentMode)}function aD(){xf&&(xf.detachEvent("onpropertychange",cZ),Qf=xf=null)}function cZ(t){if(t.propertyName==="value"&&t0(Qf)){var e=[];aZ(e,Qf,t,pR(t)),zJ(Cce,e)}}function Tce(t,e,r){t==="focusin"?(aD(),xf=e,Qf=r,xf.attachEvent("onpropertychange",cZ)):t==="focusout"&&aD()}function Oce(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return t0(Qf)}function jce(t,e){if(t==="click")return t0(e)}function Pce(t,e){if(t==="input"||t==="change")return t0(e)}function Ice(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fs=typeof Object.is=="function"?Object.is:Ice;function Xf(t,e){if(fs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Pj.call(e,i)||!fs(t[i],e[i]))return!1}return!0}function lD(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cD(t,e){var r=lD(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lD(r)}}function uZ(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?uZ(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function dZ(){for(var t=window,e=uy();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=uy(t.document)}return e}function _R(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Rce(t){var e=dZ(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&uZ(r.ownerDocument.documentElement,r)){if(n!==null&&_R(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=cD(r,s);var o=cD(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Mce=ko&&"documentMode"in document&&11>=document.documentMode,Pu=null,Qj=null,wf=null,Xj=!1;function uD(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Xj||Pu==null||Pu!==uy(n)||(n=Pu,"selectionStart"in n&&_R(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),wf&&Xf(wf,n)||(wf=n,n=yy(Qj,"onSelect"),0<n.length&&(e=new xR("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Pu)))}function ng(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Iu={animationend:ng("Animation","AnimationEnd"),animationiteration:ng("Animation","AnimationIteration"),animationstart:ng("Animation","AnimationStart"),transitionend:ng("Transition","TransitionEnd")},Yb={},hZ={};ko&&(hZ=document.createElement("div").style,"AnimationEvent"in window||(delete Iu.animationend.animation,delete Iu.animationiteration.animation,delete Iu.animationstart.animation),"TransitionEvent"in window||delete Iu.transitionend.transition);function r0(t){if(Yb[t])return Yb[t];if(!Iu[t])return t;var e=Iu[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in hZ)return Yb[t]=e[r];return t}var fZ=r0("animationend"),pZ=r0("animationiteration"),mZ=r0("animationstart"),gZ=r0("transitionend"),yZ=new Map,dD="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function al(t,e){yZ.set(t,e),Lc(e,[t])}for(var Qb=0;Qb<dD.length;Qb++){var Xb=dD[Qb],Ace=Xb.toLowerCase(),$ce=Xb[0].toUpperCase()+Xb.slice(1);al(Ace,"on"+$ce)}al(fZ,"onAnimationEnd");al(pZ,"onAnimationIteration");al(mZ,"onAnimationStart");al("dblclick","onDoubleClick");al("focusin","onFocus");al("focusout","onBlur");al(gZ,"onTransitionEnd");_d("onMouseEnter",["mouseout","mouseover"]);_d("onMouseLeave",["mouseout","mouseover"]);_d("onPointerEnter",["pointerout","pointerover"]);_d("onPointerLeave",["pointerout","pointerover"]);Lc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Lc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Lc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Lc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Lc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Lc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dce=new Set("cancel close invalid load scroll toggle".split(" ").concat(cf));function hD(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Ale(n,e,void 0,t),t.currentTarget=null}function vZ(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;hD(i,a,c),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;hD(i,a,c),s=l}}}if(hy)throw t=Wj,hy=!1,Wj=null,t}function Dt(t,e){var r=e[rP];r===void 0&&(r=e[rP]=new Set);var n=t+"__bubble";r.has(n)||(bZ(e,t,2,!1),r.add(n))}function Jb(t,e,r){var n=0;e&&(n|=4),bZ(r,t,n,e)}var ig="_reactListening"+Math.random().toString(36).slice(2);function Jf(t){if(!t[ig]){t[ig]=!0,CJ.forEach(function(r){r!=="selectionchange"&&(Dce.has(r)||Jb(r,!1,t),Jb(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ig]||(e[ig]=!0,Jb("selectionchange",!1,e))}}function bZ(t,e,r,n){switch(rZ(e)){case 1:var i=Xle;break;case 4:i=Jle;break;default:i=vR}r=i.bind(null,e,r,t),i=void 0,!Hj||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Zb(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=jl(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue e}a=a.parentNode}}n=n.return}zJ(function(){var c=s,d=pR(r),h=[];e:{var f=yZ.get(t);if(f!==void 0){var p=xR,m=t;switch(t){case"keypress":if(zg(r)===0)break e;case"keydown":case"keyup":p=fce;break;case"focusin":m="focus",p=Wb;break;case"focusout":m="blur",p=Wb;break;case"beforeblur":case"afterblur":p=Wb;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=eD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=tce;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=gce;break;case fZ:case pZ:case mZ:p=ice;break;case gZ:p=vce;break;case"scroll":p=Zle;break;case"wheel":p=xce;break;case"copy":case"cut":case"paste":p=oce;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=rD}var g=(e&4)!==0,v=!g&&t==="scroll",y=g?f!==null?f+"Capture":null:f;g=[];for(var b=c,w;b!==null;){w=b;var x=w.stateNode;if(w.tag===5&&x!==null&&(w=x,y!==null&&(x=Wf(b,y),x!=null&&g.push(Zf(b,x,w)))),v)break;b=b.return}0<g.length&&(f=new p(f,m,null,r,d),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&r!==Vj&&(m=r.relatedTarget||r.fromElement)&&(jl(m)||m[To]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=c,m=m?jl(m):null,m!==null&&(v=Bc(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(g=eD,x="onMouseLeave",y="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=rD,x="onPointerLeave",y="onPointerEnter",b="pointer"),v=p==null?f:Ru(p),w=m==null?f:Ru(m),f=new g(x,b+"leave",p,r,d),f.target=v,f.relatedTarget=w,x=null,jl(d)===c&&(g=new g(y,b+"enter",m,r,d),g.target=w,g.relatedTarget=v,x=g),v=x,p&&m)t:{for(g=p,y=m,b=0,w=g;w;w=mu(w))b++;for(w=0,x=y;x;x=mu(x))w++;for(;0<b-w;)g=mu(g),b--;for(;0<w-b;)y=mu(y),w--;for(;b--;){if(g===y||y!==null&&g===y.alternate)break t;g=mu(g),y=mu(y)}g=null}else g=null;p!==null&&fD(h,f,p,g,!1),m!==null&&v!==null&&fD(h,v,m,g,!0)}}e:{if(f=c?Ru(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var S=kce;else if(sD(f))if(lZ)S=Pce;else{S=Oce;var _=Tce}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=jce);if(S&&(S=S(t,c))){aZ(h,S,r,d);break e}_&&_(t,f,c),t==="focusout"&&(_=f._wrapperState)&&_.controlled&&f.type==="number"&&Fj(f,"number",f.value)}switch(_=c?Ru(c):window,t){case"focusin":(sD(_)||_.contentEditable==="true")&&(Pu=_,Qj=c,wf=null);break;case"focusout":wf=Qj=Pu=null;break;case"mousedown":Xj=!0;break;case"contextmenu":case"mouseup":case"dragend":Xj=!1,uD(h,r,d);break;case"selectionchange":if(Mce)break;case"keydown":case"keyup":uD(h,r,d)}var E;if(SR)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else ju?sZ(t,r)&&(N="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(N="onCompositionStart");N&&(iZ&&r.locale!=="ko"&&(ju||N!=="onCompositionStart"?N==="onCompositionEnd"&&ju&&(E=nZ()):(Ea=d,bR="value"in Ea?Ea.value:Ea.textContent,ju=!0)),_=yy(c,N),0<_.length&&(N=new tD(N,t,null,r,d),h.push({event:N,listeners:_}),E?N.data=E:(E=oZ(r),E!==null&&(N.data=E)))),(E=Sce?_ce(t,r):Ece(t,r))&&(c=yy(c,"onBeforeInput"),0<c.length&&(d=new tD("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:c}),d.data=E))}vZ(h,e)})}function Zf(t,e,r){return{instance:t,listener:e,currentTarget:r}}function yy(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Wf(t,r),s!=null&&n.unshift(Zf(t,s,i)),s=Wf(t,e),s!=null&&n.push(Zf(t,s,i))),t=t.return}return n}function mu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function fD(t,e,r,n,i){for(var s=e._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,i?(l=Wf(r,s),l!=null&&o.unshift(Zf(r,l,a))):i||(l=Wf(r,s),l!=null&&o.push(Zf(r,l,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var Fce=/\r\n?/g,qce=/\u0000|\uFFFD/g;function pD(t){return(typeof t=="string"?t:""+t).replace(Fce,`
`).replace(qce,"")}function sg(t,e,r){if(e=pD(e),pD(t)!==e&&r)throw Error(te(425))}function vy(){}var Jj=null,Zj=null;function eP(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tP=typeof setTimeout=="function"?setTimeout:void 0,Lce=typeof clearTimeout=="function"?clearTimeout:void 0,mD=typeof Promise=="function"?Promise:void 0,Bce=typeof queueMicrotask=="function"?queueMicrotask:typeof mD<"u"?function(t){return mD.resolve(null).then(t).catch(zce)}:tP;function zce(t){setTimeout(function(){throw t})}function e1(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Yf(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Yf(e)}function Ma(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function gD(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var eh=Math.random().toString(36).slice(2),Ps="__reactFiber$"+eh,ep="__reactProps$"+eh,To="__reactContainer$"+eh,rP="__reactEvents$"+eh,Vce="__reactListeners$"+eh,Uce="__reactHandles$"+eh;function jl(t){var e=t[Ps];if(e)return e;for(var r=t.parentNode;r;){if(e=r[To]||r[Ps]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=gD(t);t!==null;){if(r=t[Ps])return r;t=gD(t)}return e}t=r,r=t.parentNode}return null}function Wp(t){return t=t[Ps]||t[To],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ru(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(te(33))}function n0(t){return t[ep]||null}var nP=[],Mu=-1;function ll(t){return{current:t}}function Lt(t){0>Mu||(t.current=nP[Mu],nP[Mu]=null,Mu--)}function $t(t,e){Mu++,nP[Mu]=t.current,t.current=e}var Za={},yn=ll(Za),Yn=ll(!1),pc=Za;function Ed(t,e){var r=t.type.contextTypes;if(!r)return Za;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Qn(t){return t=t.childContextTypes,t!=null}function by(){Lt(Yn),Lt(yn)}function yD(t,e,r){if(yn.current!==Za)throw Error(te(168));$t(yn,e),$t(Yn,r)}function xZ(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(te(108,Tle(t)||"Unknown",i));return Qt({},r,n)}function xy(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Za,pc=yn.current,$t(yn,t),$t(Yn,Yn.current),!0}function vD(t,e,r){var n=t.stateNode;if(!n)throw Error(te(169));r?(t=xZ(t,e,pc),n.__reactInternalMemoizedMergedChildContext=t,Lt(Yn),Lt(yn),$t(yn,t)):Lt(Yn),$t(Yn,r)}var no=null,i0=!1,t1=!1;function wZ(t){no===null?no=[t]:no.push(t)}function Hce(t){i0=!0,wZ(t)}function cl(){if(!t1&&no!==null){t1=!0;var t=0,e=St;try{var r=no;for(St=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}no=null,i0=!1}catch(i){throw no!==null&&(no=no.slice(t+1)),WJ(mR,cl),i}finally{St=e,t1=!1}}return null}var Au=[],$u=0,wy=null,Sy=0,Ii=[],Ri=0,mc=null,lo=1,co="";function Cl(t,e){Au[$u++]=Sy,Au[$u++]=wy,wy=t,Sy=e}function SZ(t,e,r){Ii[Ri++]=lo,Ii[Ri++]=co,Ii[Ri++]=mc,mc=t;var n=lo;t=co;var i=32-ds(n)-1;n&=~(1<<i),r+=1;var s=32-ds(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,lo=1<<32-ds(e)+i|r<<i|n,co=s+t}else lo=1<<s|r<<i|n,co=t}function ER(t){t.return!==null&&(Cl(t,1),SZ(t,1,0))}function NR(t){for(;t===wy;)wy=Au[--$u],Au[$u]=null,Sy=Au[--$u],Au[$u]=null;for(;t===mc;)mc=Ii[--Ri],Ii[Ri]=null,co=Ii[--Ri],Ii[Ri]=null,lo=Ii[--Ri],Ii[Ri]=null}var mi=null,pi=null,Vt=!1,is=null;function _Z(t,e){var r=Di(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function bD(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mi=t,pi=Ma(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mi=t,pi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=mc!==null?{id:lo,overflow:co}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Di(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,mi=t,pi=null,!0):!1;default:return!1}}function iP(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sP(t){if(Vt){var e=pi;if(e){var r=e;if(!bD(t,e)){if(iP(t))throw Error(te(418));e=Ma(r.nextSibling);var n=mi;e&&bD(t,e)?_Z(n,r):(t.flags=t.flags&-4097|2,Vt=!1,mi=t)}}else{if(iP(t))throw Error(te(418));t.flags=t.flags&-4097|2,Vt=!1,mi=t}}}function xD(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mi=t}function og(t){if(t!==mi)return!1;if(!Vt)return xD(t),Vt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!eP(t.type,t.memoizedProps)),e&&(e=pi)){if(iP(t))throw EZ(),Error(te(418));for(;e;)_Z(t,e),e=Ma(e.nextSibling)}if(xD(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(te(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){pi=Ma(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}pi=null}}else pi=mi?Ma(t.stateNode.nextSibling):null;return!0}function EZ(){for(var t=pi;t;)t=Ma(t.nextSibling)}function Nd(){pi=mi=null,Vt=!1}function CR(t){is===null?is=[t]:is.push(t)}var Wce=Ro.ReactCurrentBatchConfig;function Uh(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(te(309));var n=r.stateNode}if(!n)throw Error(te(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(te(284));if(!r._owner)throw Error(te(290,t))}return t}function ag(t,e){throw t=Object.prototype.toString.call(e),Error(te(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function wD(t){var e=t._init;return e(t._payload)}function NZ(t){function e(y,b){if(t){var w=y.deletions;w===null?(y.deletions=[b],y.flags|=16):w.push(b)}}function r(y,b){if(!t)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function n(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function i(y,b){return y=Fa(y,b),y.index=0,y.sibling=null,y}function s(y,b,w){return y.index=w,t?(w=y.alternate,w!==null?(w=w.index,w<b?(y.flags|=2,b):w):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,b,w,x){return b===null||b.tag!==6?(b=l1(w,y.mode,x),b.return=y,b):(b=i(b,w),b.return=y,b)}function l(y,b,w,x){var S=w.type;return S===Ou?d(y,b,w.props.children,x,w.key):b!==null&&(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ea&&wD(S)===b.type)?(x=i(b,w.props),x.ref=Uh(y,b,w),x.return=y,x):(x=Yg(w.type,w.key,w.props,null,y.mode,x),x.ref=Uh(y,b,w),x.return=y,x)}function c(y,b,w,x){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=c1(w,y.mode,x),b.return=y,b):(b=i(b,w.children||[]),b.return=y,b)}function d(y,b,w,x,S){return b===null||b.tag!==7?(b=ec(w,y.mode,x,S),b.return=y,b):(b=i(b,w),b.return=y,b)}function h(y,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=l1(""+b,y.mode,w),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Qm:return w=Yg(b.type,b.key,b.props,null,y.mode,w),w.ref=Uh(y,null,b),w.return=y,w;case Tu:return b=c1(b,y.mode,w),b.return=y,b;case ea:var x=b._init;return h(y,x(b._payload),w)}if(af(b)||qh(b))return b=ec(b,y.mode,w,null),b.return=y,b;ag(y,b)}return null}function f(y,b,w,x){var S=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(y,b,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Qm:return w.key===S?l(y,b,w,x):null;case Tu:return w.key===S?c(y,b,w,x):null;case ea:return S=w._init,f(y,b,S(w._payload),x)}if(af(w)||qh(w))return S!==null?null:d(y,b,w,x,null);ag(y,w)}return null}function p(y,b,w,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(w)||null,a(b,y,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Qm:return y=y.get(x.key===null?w:x.key)||null,l(b,y,x,S);case Tu:return y=y.get(x.key===null?w:x.key)||null,c(b,y,x,S);case ea:var _=x._init;return p(y,b,w,_(x._payload),S)}if(af(x)||qh(x))return y=y.get(w)||null,d(b,y,x,S,null);ag(b,x)}return null}function m(y,b,w,x){for(var S=null,_=null,E=b,N=b=0,k=null;E!==null&&N<w.length;N++){E.index>N?(k=E,E=null):k=E.sibling;var C=f(y,E,w[N],x);if(C===null){E===null&&(E=k);break}t&&E&&C.alternate===null&&e(y,E),b=s(C,b,N),_===null?S=C:_.sibling=C,_=C,E=k}if(N===w.length)return r(y,E),Vt&&Cl(y,N),S;if(E===null){for(;N<w.length;N++)E=h(y,w[N],x),E!==null&&(b=s(E,b,N),_===null?S=E:_.sibling=E,_=E);return Vt&&Cl(y,N),S}for(E=n(y,E);N<w.length;N++)k=p(E,y,N,w[N],x),k!==null&&(t&&k.alternate!==null&&E.delete(k.key===null?N:k.key),b=s(k,b,N),_===null?S=k:_.sibling=k,_=k);return t&&E.forEach(function(O){return e(y,O)}),Vt&&Cl(y,N),S}function g(y,b,w,x){var S=qh(w);if(typeof S!="function")throw Error(te(150));if(w=S.call(w),w==null)throw Error(te(151));for(var _=S=null,E=b,N=b=0,k=null,C=w.next();E!==null&&!C.done;N++,C=w.next()){E.index>N?(k=E,E=null):k=E.sibling;var O=f(y,E,C.value,x);if(O===null){E===null&&(E=k);break}t&&E&&O.alternate===null&&e(y,E),b=s(O,b,N),_===null?S=O:_.sibling=O,_=O,E=k}if(C.done)return r(y,E),Vt&&Cl(y,N),S;if(E===null){for(;!C.done;N++,C=w.next())C=h(y,C.value,x),C!==null&&(b=s(C,b,N),_===null?S=C:_.sibling=C,_=C);return Vt&&Cl(y,N),S}for(E=n(y,E);!C.done;N++,C=w.next())C=p(E,y,N,C.value,x),C!==null&&(t&&C.alternate!==null&&E.delete(C.key===null?N:C.key),b=s(C,b,N),_===null?S=C:_.sibling=C,_=C);return t&&E.forEach(function(P){return e(y,P)}),Vt&&Cl(y,N),S}function v(y,b,w,x){if(typeof w=="object"&&w!==null&&w.type===Ou&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Qm:e:{for(var S=w.key,_=b;_!==null;){if(_.key===S){if(S=w.type,S===Ou){if(_.tag===7){r(y,_.sibling),b=i(_,w.props.children),b.return=y,y=b;break e}}else if(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ea&&wD(S)===_.type){r(y,_.sibling),b=i(_,w.props),b.ref=Uh(y,_,w),b.return=y,y=b;break e}r(y,_);break}else e(y,_);_=_.sibling}w.type===Ou?(b=ec(w.props.children,y.mode,x,w.key),b.return=y,y=b):(x=Yg(w.type,w.key,w.props,null,y.mode,x),x.ref=Uh(y,b,w),x.return=y,y=x)}return o(y);case Tu:e:{for(_=w.key;b!==null;){if(b.key===_)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){r(y,b.sibling),b=i(b,w.children||[]),b.return=y,y=b;break e}else{r(y,b);break}else e(y,b);b=b.sibling}b=c1(w,y.mode,x),b.return=y,y=b}return o(y);case ea:return _=w._init,v(y,b,_(w._payload),x)}if(af(w))return m(y,b,w,x);if(qh(w))return g(y,b,w,x);ag(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(r(y,b.sibling),b=i(b,w),b.return=y,y=b):(r(y,b),b=l1(w,y.mode,x),b.return=y,y=b),o(y)):r(y,b)}return v}var Cd=NZ(!0),CZ=NZ(!1),_y=ll(null),Ey=null,Du=null,kR=null;function TR(){kR=Du=Ey=null}function OR(t){var e=_y.current;Lt(_y),t._currentValue=e}function oP(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Ju(t,e){Ey=t,kR=Du=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Wn=!0),t.firstContext=null)}function Vi(t){var e=t._currentValue;if(kR!==t)if(t={context:t,memoizedValue:e,next:null},Du===null){if(Ey===null)throw Error(te(308));Du=t,Ey.dependencies={lanes:0,firstContext:t}}else Du=Du.next=t;return e}var Pl=null;function jR(t){Pl===null?Pl=[t]:Pl.push(t)}function kZ(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,jR(e)):(r.next=i.next,i.next=r),e.interleaved=r,Oo(t,n)}function Oo(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ta=!1;function PR(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function TZ(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function po(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Aa(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,pt&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Oo(t,r)}return i=n.interleaved,i===null?(e.next=e,jR(n)):(e.next=i.next,i.next=e),n.interleaved=e,Oo(t,r)}function Vg(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,gR(t,r)}}function SD(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Ny(t,e,r,n){var i=t.updateQueue;ta=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=c=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,g=a;switch(f=e,p=r,g.tag){case 1:if(m=g.payload,typeof m=="function"){h=m.call(p,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(p,h,f):m,f==null)break e;h=Qt({},h,f);break e;case 2:ta=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,l=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);yc|=o,t.lanes=o,t.memoizedState=h}}function _D(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(te(191,i));i.call(n)}}}var Kp={},Ds=ll(Kp),tp=ll(Kp),rp=ll(Kp);function Il(t){if(t===Kp)throw Error(te(174));return t}function IR(t,e){switch($t(rp,e),$t(tp,t),$t(Ds,Kp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Lj(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Lj(e,t)}Lt(Ds),$t(Ds,e)}function kd(){Lt(Ds),Lt(tp),Lt(rp)}function OZ(t){Il(rp.current);var e=Il(Ds.current),r=Lj(e,t.type);e!==r&&($t(tp,t),$t(Ds,r))}function RR(t){tp.current===t&&(Lt(Ds),Lt(tp))}var Wt=ll(0);function Cy(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var r1=[];function MR(){for(var t=0;t<r1.length;t++)r1[t]._workInProgressVersionPrimary=null;r1.length=0}var Ug=Ro.ReactCurrentDispatcher,n1=Ro.ReactCurrentBatchConfig,gc=0,Gt=null,Pr=null,qr=null,ky=!1,Sf=!1,np=0,Kce=0;function un(){throw Error(te(321))}function AR(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!fs(t[r],e[r]))return!1;return!0}function $R(t,e,r,n,i,s){if(gc=s,Gt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ug.current=t===null||t.memoizedState===null?Xce:Jce,t=r(n,i),Sf){s=0;do{if(Sf=!1,np=0,25<=s)throw Error(te(301));s+=1,qr=Pr=null,e.updateQueue=null,Ug.current=Zce,t=r(n,i)}while(Sf)}if(Ug.current=Ty,e=Pr!==null&&Pr.next!==null,gc=0,qr=Pr=Gt=null,ky=!1,e)throw Error(te(300));return t}function DR(){var t=np!==0;return np=0,t}function _s(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qr===null?Gt.memoizedState=qr=t:qr=qr.next=t,qr}function Ui(){if(Pr===null){var t=Gt.alternate;t=t!==null?t.memoizedState:null}else t=Pr.next;var e=qr===null?Gt.memoizedState:qr.next;if(e!==null)qr=e,Pr=t;else{if(t===null)throw Error(te(310));Pr=t,t={memoizedState:Pr.memoizedState,baseState:Pr.baseState,baseQueue:Pr.baseQueue,queue:Pr.queue,next:null},qr===null?Gt.memoizedState=qr=t:qr=qr.next=t}return qr}function ip(t,e){return typeof e=="function"?e(t):e}function i1(t){var e=Ui(),r=e.queue;if(r===null)throw Error(te(311));r.lastRenderedReducer=t;var n=Pr,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((gc&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=n):l=l.next=h,Gt.lanes|=d,yc|=d}c=c.next}while(c!==null&&c!==s);l===null?o=n:l.next=a,fs(n,e.memoizedState)||(Wn=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,Gt.lanes|=s,yc|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function s1(t){var e=Ui(),r=e.queue;if(r===null)throw Error(te(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);fs(s,e.memoizedState)||(Wn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function jZ(){}function PZ(t,e){var r=Gt,n=Ui(),i=e(),s=!fs(n.memoizedState,i);if(s&&(n.memoizedState=i,Wn=!0),n=n.queue,FR(MZ.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||qr!==null&&qr.memoizedState.tag&1){if(r.flags|=2048,sp(9,RZ.bind(null,r,n,i,e),void 0,null),zr===null)throw Error(te(349));gc&30||IZ(r,e,i)}return i}function IZ(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Gt.updateQueue,e===null?(e={lastEffect:null,stores:null},Gt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function RZ(t,e,r,n){e.value=r,e.getSnapshot=n,AZ(e)&&$Z(t)}function MZ(t,e,r){return r(function(){AZ(e)&&$Z(t)})}function AZ(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!fs(t,r)}catch{return!0}}function $Z(t){var e=Oo(t,1);e!==null&&hs(e,t,1,-1)}function ED(t){var e=_s();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ip,lastRenderedState:t},e.queue=t,t=t.dispatch=Qce.bind(null,Gt,t),[e.memoizedState,t]}function sp(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Gt.updateQueue,e===null?(e={lastEffect:null,stores:null},Gt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function DZ(){return Ui().memoizedState}function Hg(t,e,r,n){var i=_s();Gt.flags|=t,i.memoizedState=sp(1|e,r,void 0,n===void 0?null:n)}function s0(t,e,r,n){var i=Ui();n=n===void 0?null:n;var s=void 0;if(Pr!==null){var o=Pr.memoizedState;if(s=o.destroy,n!==null&&AR(n,o.deps)){i.memoizedState=sp(e,r,s,n);return}}Gt.flags|=t,i.memoizedState=sp(1|e,r,s,n)}function ND(t,e){return Hg(8390656,8,t,e)}function FR(t,e){return s0(2048,8,t,e)}function FZ(t,e){return s0(4,2,t,e)}function qZ(t,e){return s0(4,4,t,e)}function LZ(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function BZ(t,e,r){return r=r!=null?r.concat([t]):null,s0(4,4,LZ.bind(null,e,t),r)}function qR(){}function zZ(t,e){var r=Ui();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&AR(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function VZ(t,e){var r=Ui();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&AR(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function UZ(t,e,r){return gc&21?(fs(r,e)||(r=YJ(),Gt.lanes|=r,yc|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Wn=!0),t.memoizedState=r)}function Gce(t,e){var r=St;St=r!==0&&4>r?r:4,t(!0);var n=n1.transition;n1.transition={};try{t(!1),e()}finally{St=r,n1.transition=n}}function HZ(){return Ui().memoizedState}function Yce(t,e,r){var n=Da(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},WZ(t))KZ(e,r);else if(r=kZ(t,e,r,n),r!==null){var i=On();hs(r,t,n,i),GZ(r,e,n)}}function Qce(t,e,r){var n=Da(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(WZ(t))KZ(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,fs(a,o)){var l=e.interleaved;l===null?(i.next=i,jR(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=kZ(t,e,i,n),r!==null&&(i=On(),hs(r,t,n,i),GZ(r,e,n))}}function WZ(t){var e=t.alternate;return t===Gt||e!==null&&e===Gt}function KZ(t,e){Sf=ky=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function GZ(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,gR(t,r)}}var Ty={readContext:Vi,useCallback:un,useContext:un,useEffect:un,useImperativeHandle:un,useInsertionEffect:un,useLayoutEffect:un,useMemo:un,useReducer:un,useRef:un,useState:un,useDebugValue:un,useDeferredValue:un,useTransition:un,useMutableSource:un,useSyncExternalStore:un,useId:un,unstable_isNewReconciler:!1},Xce={readContext:Vi,useCallback:function(t,e){return _s().memoizedState=[t,e===void 0?null:e],t},useContext:Vi,useEffect:ND,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Hg(4194308,4,LZ.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Hg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Hg(4,2,t,e)},useMemo:function(t,e){var r=_s();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=_s();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Yce.bind(null,Gt,t),[n.memoizedState,t]},useRef:function(t){var e=_s();return t={current:t},e.memoizedState=t},useState:ED,useDebugValue:qR,useDeferredValue:function(t){return _s().memoizedState=t},useTransition:function(){var t=ED(!1),e=t[0];return t=Gce.bind(null,t[1]),_s().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Gt,i=_s();if(Vt){if(r===void 0)throw Error(te(407));r=r()}else{if(r=e(),zr===null)throw Error(te(349));gc&30||IZ(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,ND(MZ.bind(null,n,s,t),[t]),n.flags|=2048,sp(9,RZ.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=_s(),e=zr.identifierPrefix;if(Vt){var r=co,n=lo;r=(n&~(1<<32-ds(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=np++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Kce++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Jce={readContext:Vi,useCallback:zZ,useContext:Vi,useEffect:FR,useImperativeHandle:BZ,useInsertionEffect:FZ,useLayoutEffect:qZ,useMemo:VZ,useReducer:i1,useRef:DZ,useState:function(){return i1(ip)},useDebugValue:qR,useDeferredValue:function(t){var e=Ui();return UZ(e,Pr.memoizedState,t)},useTransition:function(){var t=i1(ip)[0],e=Ui().memoizedState;return[t,e]},useMutableSource:jZ,useSyncExternalStore:PZ,useId:HZ,unstable_isNewReconciler:!1},Zce={readContext:Vi,useCallback:zZ,useContext:Vi,useEffect:FR,useImperativeHandle:BZ,useInsertionEffect:FZ,useLayoutEffect:qZ,useMemo:VZ,useReducer:s1,useRef:DZ,useState:function(){return s1(ip)},useDebugValue:qR,useDeferredValue:function(t){var e=Ui();return Pr===null?e.memoizedState=t:UZ(e,Pr.memoizedState,t)},useTransition:function(){var t=s1(ip)[0],e=Ui().memoizedState;return[t,e]},useMutableSource:jZ,useSyncExternalStore:PZ,useId:HZ,unstable_isNewReconciler:!1};function es(t,e){if(t&&t.defaultProps){e=Qt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function aP(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Qt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var o0={isMounted:function(t){return(t=t._reactInternals)?Bc(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=On(),i=Da(t),s=po(n,i);s.payload=e,r!=null&&(s.callback=r),e=Aa(t,s,i),e!==null&&(hs(e,t,i,n),Vg(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=On(),i=Da(t),s=po(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=Aa(t,s,i),e!==null&&(hs(e,t,i,n),Vg(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=On(),n=Da(t),i=po(r,n);i.tag=2,e!=null&&(i.callback=e),e=Aa(t,i,n),e!==null&&(hs(e,t,n,r),Vg(e,t,n))}};function CD(t,e,r,n,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!Xf(r,n)||!Xf(i,s):!0}function YZ(t,e,r){var n=!1,i=Za,s=e.contextType;return typeof s=="object"&&s!==null?s=Vi(s):(i=Qn(e)?pc:yn.current,n=e.contextTypes,s=(n=n!=null)?Ed(t,i):Za),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=o0,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function kD(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&o0.enqueueReplaceState(e,e.state,null)}function lP(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},PR(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Vi(s):(s=Qn(e)?pc:yn.current,i.context=Ed(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(aP(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&o0.enqueueReplaceState(i,i.state,null),Ny(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Td(t,e){try{var r="",n=e;do r+=kle(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function o1(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function cP(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var eue=typeof WeakMap=="function"?WeakMap:Map;function QZ(t,e,r){r=po(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){jy||(jy=!0,bP=n),cP(t,e)},r}function XZ(t,e,r){r=po(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){cP(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){cP(t,e),typeof n!="function"&&($a===null?$a=new Set([this]):$a.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function TD(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new eue;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=pue.bind(null,t,e,r),e.then(t,t))}function OD(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jD(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=po(-1,1),e.tag=2,Aa(r,e,1))),r.lanes|=1),t)}var tue=Ro.ReactCurrentOwner,Wn=!1;function Sn(t,e,r,n){e.child=t===null?CZ(e,null,r,n):Cd(e,t.child,r,n)}function PD(t,e,r,n,i){r=r.render;var s=e.ref;return Ju(e,i),n=$R(t,e,r,n,s,i),r=DR(),t!==null&&!Wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,jo(t,e,i)):(Vt&&r&&ER(e),e.flags|=1,Sn(t,e,n,i),e.child)}function ID(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!KR(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,JZ(t,e,s,n,i)):(t=Yg(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Xf,r(o,n)&&t.ref===e.ref)return jo(t,e,i)}return e.flags|=1,t=Fa(s,n),t.ref=e.ref,t.return=e,e.child=t}function JZ(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(Xf(s,n)&&t.ref===e.ref)if(Wn=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(Wn=!0);else return e.lanes=t.lanes,jo(t,e,i)}return uP(t,e,r,n,i)}function ZZ(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$t(qu,ci),ci|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$t(qu,ci),ci|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,$t(qu,ci),ci|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,$t(qu,ci),ci|=n;return Sn(t,e,i,r),e.child}function eee(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function uP(t,e,r,n,i){var s=Qn(r)?pc:yn.current;return s=Ed(e,s),Ju(e,i),r=$R(t,e,r,n,s,i),n=DR(),t!==null&&!Wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,jo(t,e,i)):(Vt&&n&&ER(e),e.flags|=1,Sn(t,e,r,i),e.child)}function RD(t,e,r,n,i){if(Qn(r)){var s=!0;xy(e)}else s=!1;if(Ju(e,i),e.stateNode===null)Wg(t,e),YZ(e,r,n),lP(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=Vi(c):(c=Qn(r)?pc:yn.current,c=Ed(e,c));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==c)&&kD(e,o,n,c),ta=!1;var f=e.memoizedState;o.state=f,Ny(e,n,o,i),l=e.memoizedState,a!==n||f!==l||Yn.current||ta?(typeof d=="function"&&(aP(e,r,d,n),l=e.memoizedState),(a=ta||CD(e,r,a,n,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=c,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,TZ(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:es(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Vi(l):(l=Qn(r)?pc:yn.current,l=Ed(e,l));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&kD(e,o,n,l),ta=!1,f=e.memoizedState,o.state=f,Ny(e,n,o,i);var m=e.memoizedState;a!==h||f!==m||Yn.current||ta?(typeof p=="function"&&(aP(e,r,p,n),m=e.memoizedState),(c=ta||CD(e,r,c,n,f,m,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return dP(t,e,r,n,s,i)}function dP(t,e,r,n,i,s){eee(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&vD(e,r,!1),jo(t,e,s);n=e.stateNode,tue.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Cd(e,t.child,null,s),e.child=Cd(e,null,a,s)):Sn(t,e,a,s),e.memoizedState=n.state,i&&vD(e,r,!0),e.child}function tee(t){var e=t.stateNode;e.pendingContext?yD(t,e.pendingContext,e.pendingContext!==e.context):e.context&&yD(t,e.context,!1),IR(t,e.containerInfo)}function MD(t,e,r,n,i){return Nd(),CR(i),e.flags|=256,Sn(t,e,r,n),e.child}var hP={dehydrated:null,treeContext:null,retryLane:0};function fP(t){return{baseLanes:t,cachePool:null,transitions:null}}function ree(t,e,r){var n=e.pendingProps,i=Wt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),$t(Wt,i&1),t===null)return sP(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=c0(o,n,0,null),t=ec(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=fP(r),e.memoizedState=hP,t):LR(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return rue(t,e,o,n,a,i,r);if(s){s=n.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Fa(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Fa(a,s):(s=ec(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?fP(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=hP,n}return s=t.child,t=s.sibling,n=Fa(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function LR(t,e){return e=c0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function lg(t,e,r,n){return n!==null&&CR(n),Cd(e,t.child,null,r),t=LR(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rue(t,e,r,n,i,s,o){if(r)return e.flags&256?(e.flags&=-257,n=o1(Error(te(422))),lg(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=c0({mode:"visible",children:n.children},i,0,null),s=ec(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Cd(e,t.child,null,o),e.child.memoizedState=fP(o),e.memoizedState=hP,s);if(!(e.mode&1))return lg(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(te(419)),n=o1(s,n,void 0),lg(t,e,o,n)}if(a=(o&t.childLanes)!==0,Wn||a){if(n=zr,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Oo(t,i),hs(n,t,i,-1))}return WR(),n=o1(Error(te(421))),lg(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=mue.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,pi=Ma(i.nextSibling),mi=e,Vt=!0,is=null,t!==null&&(Ii[Ri++]=lo,Ii[Ri++]=co,Ii[Ri++]=mc,lo=t.id,co=t.overflow,mc=e),e=LR(e,n.children),e.flags|=4096,e)}function AD(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),oP(t.return,e,r)}function a1(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function nee(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Sn(t,e,n.children,r),n=Wt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&AD(t,r,e);else if(t.tag===19)AD(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if($t(Wt,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Cy(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),a1(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Cy(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}a1(e,!0,r,null,s);break;case"together":a1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function jo(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),yc|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(te(153));if(e.child!==null){for(t=e.child,r=Fa(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Fa(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function nue(t,e,r){switch(e.tag){case 3:tee(e),Nd();break;case 5:OZ(e);break;case 1:Qn(e.type)&&xy(e);break;case 4:IR(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;$t(_y,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?($t(Wt,Wt.current&1),e.flags|=128,null):r&e.child.childLanes?ree(t,e,r):($t(Wt,Wt.current&1),t=jo(t,e,r),t!==null?t.sibling:null);$t(Wt,Wt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return nee(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),$t(Wt,Wt.current),n)break;return null;case 22:case 23:return e.lanes=0,ZZ(t,e,r)}return jo(t,e,r)}var iee,pP,see,oee;iee=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};pP=function(){};see=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Il(Ds.current);var s=null;switch(r){case"input":i=$j(t,i),n=$j(t,n),s=[];break;case"select":i=Qt({},i,{value:void 0}),n=Qt({},n,{value:void 0}),s=[];break;case"textarea":i=qj(t,i),n=qj(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=vy)}Bj(r,n);var o;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Uf.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in n){var l=n[c];if(a=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Uf.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Dt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}r&&(s=s||[]).push("style",r);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};oee=function(t,e,r,n){r!==n&&(e.flags|=4)};function Hh(t,e){if(!Vt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function dn(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function iue(t,e,r){var n=e.pendingProps;switch(NR(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dn(e),null;case 1:return Qn(e.type)&&by(),dn(e),null;case 3:return n=e.stateNode,kd(),Lt(Yn),Lt(yn),MR(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(og(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,is!==null&&(SP(is),is=null))),pP(t,e),dn(e),null;case 5:RR(e);var i=Il(rp.current);if(r=e.type,t!==null&&e.stateNode!=null)see(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(te(166));return dn(e),null}if(t=Il(Ds.current),og(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Ps]=e,n[ep]=s,t=(e.mode&1)!==0,r){case"dialog":Dt("cancel",n),Dt("close",n);break;case"iframe":case"object":case"embed":Dt("load",n);break;case"video":case"audio":for(i=0;i<cf.length;i++)Dt(cf[i],n);break;case"source":Dt("error",n);break;case"img":case"image":case"link":Dt("error",n),Dt("load",n);break;case"details":Dt("toggle",n);break;case"input":U$(n,s),Dt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Dt("invalid",n);break;case"textarea":W$(n,s),Dt("invalid",n)}Bj(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&sg(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&sg(n.textContent,a,t),i=["children",""+a]):Uf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Dt("scroll",n)}switch(r){case"input":Xm(n),H$(n,s,!0);break;case"textarea":Xm(n),K$(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=vy)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=MJ(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Ps]=e,t[ep]=n,iee(t,e,!1,!1),e.stateNode=t;e:{switch(o=zj(r,n),r){case"dialog":Dt("cancel",t),Dt("close",t),i=n;break;case"iframe":case"object":case"embed":Dt("load",t),i=n;break;case"video":case"audio":for(i=0;i<cf.length;i++)Dt(cf[i],t);i=n;break;case"source":Dt("error",t),i=n;break;case"img":case"image":case"link":Dt("error",t),Dt("load",t),i=n;break;case"details":Dt("toggle",t),i=n;break;case"input":U$(t,n),i=$j(t,n),Dt("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Qt({},n,{value:void 0}),Dt("invalid",t);break;case"textarea":W$(t,n),i=qj(t,n),Dt("invalid",t);break;default:i=n}Bj(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?DJ(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&AJ(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Hf(t,l):typeof l=="number"&&Hf(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Uf.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Dt("scroll",t):l!=null&&uR(t,s,l,o))}switch(r){case"input":Xm(t),H$(t,n,!1);break;case"textarea":Xm(t),K$(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Ja(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Gu(t,!!n.multiple,s,!1):n.defaultValue!=null&&Gu(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=vy)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return dn(e),null;case 6:if(t&&e.stateNode!=null)oee(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(te(166));if(r=Il(rp.current),Il(Ds.current),og(e)){if(n=e.stateNode,r=e.memoizedProps,n[Ps]=e,(s=n.nodeValue!==r)&&(t=mi,t!==null))switch(t.tag){case 3:sg(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&sg(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ps]=e,e.stateNode=n}return dn(e),null;case 13:if(Lt(Wt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Vt&&pi!==null&&e.mode&1&&!(e.flags&128))EZ(),Nd(),e.flags|=98560,s=!1;else if(s=og(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(te(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(te(317));s[Ps]=e}else Nd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;dn(e),s=!1}else is!==null&&(SP(is),is=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Wt.current&1?Ir===0&&(Ir=3):WR())),e.updateQueue!==null&&(e.flags|=4),dn(e),null);case 4:return kd(),pP(t,e),t===null&&Jf(e.stateNode.containerInfo),dn(e),null;case 10:return OR(e.type._context),dn(e),null;case 17:return Qn(e.type)&&by(),dn(e),null;case 19:if(Lt(Wt),s=e.memoizedState,s===null)return dn(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)Hh(s,!1);else{if(Ir!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Cy(t),o!==null){for(e.flags|=128,Hh(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return $t(Wt,Wt.current&1|2),e.child}t=t.sibling}s.tail!==null&&pr()>Od&&(e.flags|=128,n=!0,Hh(s,!1),e.lanes=4194304)}else{if(!n)if(t=Cy(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Hh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Vt)return dn(e),null}else 2*pr()-s.renderingStartTime>Od&&r!==1073741824&&(e.flags|=128,n=!0,Hh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=pr(),e.sibling=null,r=Wt.current,$t(Wt,n?r&1|2:r&1),e):(dn(e),null);case 22:case 23:return HR(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?ci&1073741824&&(dn(e),e.subtreeFlags&6&&(e.flags|=8192)):dn(e),null;case 24:return null;case 25:return null}throw Error(te(156,e.tag))}function sue(t,e){switch(NR(e),e.tag){case 1:return Qn(e.type)&&by(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return kd(),Lt(Yn),Lt(yn),MR(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return RR(e),null;case 13:if(Lt(Wt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(te(340));Nd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Lt(Wt),null;case 4:return kd(),null;case 10:return OR(e.type._context),null;case 22:case 23:return HR(),null;case 24:return null;default:return null}}var cg=!1,mn=!1,oue=typeof WeakSet=="function"?WeakSet:Set,we=null;function Fu(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){or(t,e,n)}else r.current=null}function mP(t,e,r){try{r()}catch(n){or(t,e,n)}}var $D=!1;function aue(t,e){if(Jj=my,t=dZ(),_R(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==r||i!==0&&h.nodeType!==3||(a=o+i),h!==s||n!==0&&h.nodeType!==3||(l=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===r&&++c===i&&(a=o),f===s&&++d===n&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Zj={focusedElem:t,selectionRange:r},my=!1,we=e;we!==null;)if(e=we,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,we=t;else for(;we!==null;){e=we;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,v=m.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:es(e.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(x){or(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,we=t;break}we=e.return}return m=$D,$D=!1,m}function _f(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&mP(e,r,s)}i=i.next}while(i!==n)}}function a0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function gP(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function aee(t){var e=t.alternate;e!==null&&(t.alternate=null,aee(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ps],delete e[ep],delete e[rP],delete e[Vce],delete e[Uce])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function lee(t){return t.tag===5||t.tag===3||t.tag===4}function DD(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||lee(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yP(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=vy));else if(n!==4&&(t=t.child,t!==null))for(yP(t,e,r),t=t.sibling;t!==null;)yP(t,e,r),t=t.sibling}function vP(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(vP(t,e,r),t=t.sibling;t!==null;)vP(t,e,r),t=t.sibling}var Zr=null,ns=!1;function Wo(t,e,r){for(r=r.child;r!==null;)cee(t,e,r),r=r.sibling}function cee(t,e,r){if($s&&typeof $s.onCommitFiberUnmount=="function")try{$s.onCommitFiberUnmount(Zv,r)}catch{}switch(r.tag){case 5:mn||Fu(r,e);case 6:var n=Zr,i=ns;Zr=null,Wo(t,e,r),Zr=n,ns=i,Zr!==null&&(ns?(t=Zr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Zr.removeChild(r.stateNode));break;case 18:Zr!==null&&(ns?(t=Zr,r=r.stateNode,t.nodeType===8?e1(t.parentNode,r):t.nodeType===1&&e1(t,r),Yf(t)):e1(Zr,r.stateNode));break;case 4:n=Zr,i=ns,Zr=r.stateNode.containerInfo,ns=!0,Wo(t,e,r),Zr=n,ns=i;break;case 0:case 11:case 14:case 15:if(!mn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&mP(r,e,o),i=i.next}while(i!==n)}Wo(t,e,r);break;case 1:if(!mn&&(Fu(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){or(r,e,a)}Wo(t,e,r);break;case 21:Wo(t,e,r);break;case 22:r.mode&1?(mn=(n=mn)||r.memoizedState!==null,Wo(t,e,r),mn=n):Wo(t,e,r);break;default:Wo(t,e,r)}}function FD(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new oue),e.forEach(function(n){var i=gue.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Ji(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Zr=a.stateNode,ns=!1;break e;case 3:Zr=a.stateNode.containerInfo,ns=!0;break e;case 4:Zr=a.stateNode.containerInfo,ns=!0;break e}a=a.return}if(Zr===null)throw Error(te(160));cee(s,o,i),Zr=null,ns=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){or(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)uee(e,t),e=e.sibling}function uee(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ji(e,t),ws(t),n&4){try{_f(3,t,t.return),a0(3,t)}catch(g){or(t,t.return,g)}try{_f(5,t,t.return)}catch(g){or(t,t.return,g)}}break;case 1:Ji(e,t),ws(t),n&512&&r!==null&&Fu(r,r.return);break;case 5:if(Ji(e,t),ws(t),n&512&&r!==null&&Fu(r,r.return),t.flags&32){var i=t.stateNode;try{Hf(i,"")}catch(g){or(t,t.return,g)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&IJ(i,s),zj(a,o);var c=zj(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?DJ(i,h):d==="dangerouslySetInnerHTML"?AJ(i,h):d==="children"?Hf(i,h):uR(i,d,h,c)}switch(a){case"input":Dj(i,s);break;case"textarea":RJ(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Gu(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Gu(i,!!s.multiple,s.defaultValue,!0):Gu(i,!!s.multiple,s.multiple?[]:"",!1))}i[ep]=s}catch(g){or(t,t.return,g)}}break;case 6:if(Ji(e,t),ws(t),n&4){if(t.stateNode===null)throw Error(te(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){or(t,t.return,g)}}break;case 3:if(Ji(e,t),ws(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Yf(e.containerInfo)}catch(g){or(t,t.return,g)}break;case 4:Ji(e,t),ws(t);break;case 13:Ji(e,t),ws(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(VR=pr())),n&4&&FD(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(mn=(c=mn)||d,Ji(e,t),mn=c):Ji(e,t),ws(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(we=t,d=t.child;d!==null;){for(h=we=d;we!==null;){switch(f=we,p=f.child,f.tag){case 0:case 11:case 14:case 15:_f(4,f,f.return);break;case 1:Fu(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){or(n,r,g)}}break;case 5:Fu(f,f.return);break;case 22:if(f.memoizedState!==null){LD(h);continue}}p!==null?(p.return=f,we=p):LD(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=$J("display",o))}catch(g){or(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){or(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ji(e,t),ws(t),n&4&&FD(t);break;case 21:break;default:Ji(e,t),ws(t)}}function ws(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(lee(r)){var n=r;break e}r=r.return}throw Error(te(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Hf(i,""),n.flags&=-33);var s=DD(t);vP(t,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=DD(t);yP(t,a,o);break;default:throw Error(te(161))}}catch(l){or(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function lue(t,e,r){we=t,dee(t)}function dee(t,e,r){for(var n=(t.mode&1)!==0;we!==null;){var i=we,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||cg;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||mn;a=cg;var c=mn;if(cg=o,(mn=l)&&!c)for(we=i;we!==null;)o=we,l=o.child,o.tag===22&&o.memoizedState!==null?BD(i):l!==null?(l.return=o,we=l):BD(i);for(;s!==null;)we=s,dee(s),s=s.sibling;we=i,cg=a,mn=c}qD(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,we=s):qD(t)}}function qD(t){for(;we!==null;){var e=we;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:mn||a0(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!mn)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:es(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&_D(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}_D(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Yf(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}mn||e.flags&512&&gP(e)}catch(f){or(e,e.return,f)}}if(e===t){we=null;break}if(r=e.sibling,r!==null){r.return=e.return,we=r;break}we=e.return}}function LD(t){for(;we!==null;){var e=we;if(e===t){we=null;break}var r=e.sibling;if(r!==null){r.return=e.return,we=r;break}we=e.return}}function BD(t){for(;we!==null;){var e=we;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{a0(4,e)}catch(l){or(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){or(e,i,l)}}var s=e.return;try{gP(e)}catch(l){or(e,s,l)}break;case 5:var o=e.return;try{gP(e)}catch(l){or(e,o,l)}}}catch(l){or(e,e.return,l)}if(e===t){we=null;break}var a=e.sibling;if(a!==null){a.return=e.return,we=a;break}we=e.return}}var cue=Math.ceil,Oy=Ro.ReactCurrentDispatcher,BR=Ro.ReactCurrentOwner,Fi=Ro.ReactCurrentBatchConfig,pt=0,zr=null,br=null,nn=0,ci=0,qu=ll(0),Ir=0,op=null,yc=0,l0=0,zR=0,Ef=null,Vn=null,VR=0,Od=1/0,to=null,jy=!1,bP=null,$a=null,ug=!1,Na=null,Py=0,Nf=0,xP=null,Kg=-1,Gg=0;function On(){return pt&6?pr():Kg!==-1?Kg:Kg=pr()}function Da(t){return t.mode&1?pt&2&&nn!==0?nn&-nn:Wce.transition!==null?(Gg===0&&(Gg=YJ()),Gg):(t=St,t!==0||(t=window.event,t=t===void 0?16:rZ(t.type)),t):1}function hs(t,e,r,n){if(50<Nf)throw Nf=0,xP=null,Error(te(185));Up(t,r,n),(!(pt&2)||t!==zr)&&(t===zr&&(!(pt&2)&&(l0|=r),Ir===4&&ca(t,nn)),Xn(t,n),r===1&&pt===0&&!(e.mode&1)&&(Od=pr()+500,i0&&cl()))}function Xn(t,e){var r=t.callbackNode;Wle(t,e);var n=py(t,t===zr?nn:0);if(n===0)r!==null&&Q$(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Q$(r),e===1)t.tag===0?Hce(zD.bind(null,t)):wZ(zD.bind(null,t)),Bce(function(){!(pt&6)&&cl()}),r=null;else{switch(QJ(n)){case 1:r=mR;break;case 4:r=KJ;break;case 16:r=fy;break;case 536870912:r=GJ;break;default:r=fy}r=bee(r,hee.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function hee(t,e){if(Kg=-1,Gg=0,pt&6)throw Error(te(327));var r=t.callbackNode;if(Zu()&&t.callbackNode!==r)return null;var n=py(t,t===zr?nn:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Iy(t,n);else{e=n;var i=pt;pt|=2;var s=pee();(zr!==t||nn!==e)&&(to=null,Od=pr()+500,Zl(t,e));do try{hue();break}catch(a){fee(t,a)}while(!0);TR(),Oy.current=s,pt=i,br!==null?e=0:(zr=null,nn=0,e=Ir)}if(e!==0){if(e===2&&(i=Kj(t),i!==0&&(n=i,e=wP(t,i))),e===1)throw r=op,Zl(t,0),ca(t,n),Xn(t,pr()),r;if(e===6)ca(t,n);else{if(i=t.current.alternate,!(n&30)&&!uue(i)&&(e=Iy(t,n),e===2&&(s=Kj(t),s!==0&&(n=s,e=wP(t,s))),e===1))throw r=op,Zl(t,0),ca(t,n),Xn(t,pr()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(te(345));case 2:kl(t,Vn,to);break;case 3:if(ca(t,n),(n&130023424)===n&&(e=VR+500-pr(),10<e)){if(py(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){On(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=tP(kl.bind(null,t,Vn,to),e);break}kl(t,Vn,to);break;case 4:if(ca(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-ds(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=pr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*cue(n/1960))-n,10<n){t.timeoutHandle=tP(kl.bind(null,t,Vn,to),n);break}kl(t,Vn,to);break;case 5:kl(t,Vn,to);break;default:throw Error(te(329))}}}return Xn(t,pr()),t.callbackNode===r?hee.bind(null,t):null}function wP(t,e){var r=Ef;return t.current.memoizedState.isDehydrated&&(Zl(t,e).flags|=256),t=Iy(t,e),t!==2&&(e=Vn,Vn=r,e!==null&&SP(e)),t}function SP(t){Vn===null?Vn=t:Vn.push.apply(Vn,t)}function uue(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!fs(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ca(t,e){for(e&=~zR,e&=~l0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-ds(e),n=1<<r;t[r]=-1,e&=~n}}function zD(t){if(pt&6)throw Error(te(327));Zu();var e=py(t,0);if(!(e&1))return Xn(t,pr()),null;var r=Iy(t,e);if(t.tag!==0&&r===2){var n=Kj(t);n!==0&&(e=n,r=wP(t,n))}if(r===1)throw r=op,Zl(t,0),ca(t,e),Xn(t,pr()),r;if(r===6)throw Error(te(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,kl(t,Vn,to),Xn(t,pr()),null}function UR(t,e){var r=pt;pt|=1;try{return t(e)}finally{pt=r,pt===0&&(Od=pr()+500,i0&&cl())}}function vc(t){Na!==null&&Na.tag===0&&!(pt&6)&&Zu();var e=pt;pt|=1;var r=Fi.transition,n=St;try{if(Fi.transition=null,St=1,t)return t()}finally{St=n,Fi.transition=r,pt=e,!(pt&6)&&cl()}}function HR(){ci=qu.current,Lt(qu)}function Zl(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Lce(r)),br!==null)for(r=br.return;r!==null;){var n=r;switch(NR(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&by();break;case 3:kd(),Lt(Yn),Lt(yn),MR();break;case 5:RR(n);break;case 4:kd();break;case 13:Lt(Wt);break;case 19:Lt(Wt);break;case 10:OR(n.type._context);break;case 22:case 23:HR()}r=r.return}if(zr=t,br=t=Fa(t.current,null),nn=ci=e,Ir=0,op=null,zR=l0=yc=0,Vn=Ef=null,Pl!==null){for(e=0;e<Pl.length;e++)if(r=Pl[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}Pl=null}return t}function fee(t,e){do{var r=br;try{if(TR(),Ug.current=Ty,ky){for(var n=Gt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ky=!1}if(gc=0,qr=Pr=Gt=null,Sf=!1,np=0,BR.current=null,r===null||r.return===null){Ir=1,op=e,br=null;break}e:{var s=t,o=r.return,a=r,l=e;if(e=nn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=OD(o);if(p!==null){p.flags&=-257,jD(p,o,a,s,e),p.mode&1&&TD(s,c,e),e=p,l=c;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){TD(s,c,e),WR();break e}l=Error(te(426))}}else if(Vt&&a.mode&1){var v=OD(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),jD(v,o,a,s,e),CR(Td(l,a));break e}}s=l=Td(l,a),Ir!==4&&(Ir=2),Ef===null?Ef=[s]:Ef.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=QZ(s,l,e);SD(s,y);break e;case 1:a=l;var b=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&($a===null||!$a.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=XZ(s,a,e);SD(s,x);break e}}s=s.return}while(s!==null)}gee(r)}catch(S){e=S,br===r&&r!==null&&(br=r=r.return);continue}break}while(!0)}function pee(){var t=Oy.current;return Oy.current=Ty,t===null?Ty:t}function WR(){(Ir===0||Ir===3||Ir===2)&&(Ir=4),zr===null||!(yc&268435455)&&!(l0&268435455)||ca(zr,nn)}function Iy(t,e){var r=pt;pt|=2;var n=pee();(zr!==t||nn!==e)&&(to=null,Zl(t,e));do try{due();break}catch(i){fee(t,i)}while(!0);if(TR(),pt=r,Oy.current=n,br!==null)throw Error(te(261));return zr=null,nn=0,Ir}function due(){for(;br!==null;)mee(br)}function hue(){for(;br!==null&&!Dle();)mee(br)}function mee(t){var e=vee(t.alternate,t,ci);t.memoizedProps=t.pendingProps,e===null?gee(t):br=e,BR.current=null}function gee(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=sue(r,e),r!==null){r.flags&=32767,br=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ir=6,br=null;return}}else if(r=iue(r,e,ci),r!==null){br=r;return}if(e=e.sibling,e!==null){br=e;return}br=e=t}while(e!==null);Ir===0&&(Ir=5)}function kl(t,e,r){var n=St,i=Fi.transition;try{Fi.transition=null,St=1,fue(t,e,r,n)}finally{Fi.transition=i,St=n}return null}function fue(t,e,r,n){do Zu();while(Na!==null);if(pt&6)throw Error(te(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(te(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(Kle(t,s),t===zr&&(br=zr=null,nn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ug||(ug=!0,bee(fy,function(){return Zu(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Fi.transition,Fi.transition=null;var o=St;St=1;var a=pt;pt|=4,BR.current=null,aue(t,r),uee(r,t),Rce(Zj),my=!!Jj,Zj=Jj=null,t.current=r,lue(r),Fle(),pt=a,St=o,Fi.transition=s}else t.current=r;if(ug&&(ug=!1,Na=t,Py=i),s=t.pendingLanes,s===0&&($a=null),Ble(r.stateNode),Xn(t,pr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(jy)throw jy=!1,t=bP,bP=null,t;return Py&1&&t.tag!==0&&Zu(),s=t.pendingLanes,s&1?t===xP?Nf++:(Nf=0,xP=t):Nf=0,cl(),null}function Zu(){if(Na!==null){var t=QJ(Py),e=Fi.transition,r=St;try{if(Fi.transition=null,St=16>t?16:t,Na===null)var n=!1;else{if(t=Na,Na=null,Py=0,pt&6)throw Error(te(331));var i=pt;for(pt|=4,we=t.current;we!==null;){var s=we,o=s.child;if(we.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(we=c;we!==null;){var d=we;switch(d.tag){case 0:case 11:case 15:_f(8,d,s)}var h=d.child;if(h!==null)h.return=d,we=h;else for(;we!==null;){d=we;var f=d.sibling,p=d.return;if(aee(d),d===c){we=null;break}if(f!==null){f.return=p,we=f;break}we=p}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}we=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,we=o;else e:for(;we!==null;){if(s=we,s.flags&2048)switch(s.tag){case 0:case 11:case 15:_f(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,we=y;break e}we=s.return}}var b=t.current;for(we=b;we!==null;){o=we;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,we=w;else e:for(o=b;we!==null;){if(a=we,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:a0(9,a)}}catch(S){or(a,a.return,S)}if(a===o){we=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,we=x;break e}we=a.return}}if(pt=i,cl(),$s&&typeof $s.onPostCommitFiberRoot=="function")try{$s.onPostCommitFiberRoot(Zv,t)}catch{}n=!0}return n}finally{St=r,Fi.transition=e}}return!1}function VD(t,e,r){e=Td(r,e),e=QZ(t,e,1),t=Aa(t,e,1),e=On(),t!==null&&(Up(t,1,e),Xn(t,e))}function or(t,e,r){if(t.tag===3)VD(t,t,r);else for(;e!==null;){if(e.tag===3){VD(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&($a===null||!$a.has(n))){t=Td(r,t),t=XZ(e,t,1),e=Aa(e,t,1),t=On(),e!==null&&(Up(e,1,t),Xn(e,t));break}}e=e.return}}function pue(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=On(),t.pingedLanes|=t.suspendedLanes&r,zr===t&&(nn&r)===r&&(Ir===4||Ir===3&&(nn&130023424)===nn&&500>pr()-VR?Zl(t,0):zR|=r),Xn(t,e)}function yee(t,e){e===0&&(t.mode&1?(e=eg,eg<<=1,!(eg&130023424)&&(eg=4194304)):e=1);var r=On();t=Oo(t,e),t!==null&&(Up(t,e,r),Xn(t,r))}function mue(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),yee(t,r)}function gue(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(te(314))}n!==null&&n.delete(e),yee(t,r)}var vee;vee=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Yn.current)Wn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Wn=!1,nue(t,e,r);Wn=!!(t.flags&131072)}else Wn=!1,Vt&&e.flags&1048576&&SZ(e,Sy,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Wg(t,e),t=e.pendingProps;var i=Ed(e,yn.current);Ju(e,r),i=$R(null,e,n,t,i,r);var s=DR();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Qn(n)?(s=!0,xy(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,PR(e),i.updater=o0,e.stateNode=i,i._reactInternals=e,lP(e,n,t,r),e=dP(null,e,n,!0,s,r)):(e.tag=0,Vt&&s&&ER(e),Sn(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Wg(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=vue(n),t=es(n,t),i){case 0:e=uP(null,e,n,t,r);break e;case 1:e=RD(null,e,n,t,r);break e;case 11:e=PD(null,e,n,t,r);break e;case 14:e=ID(null,e,n,es(n.type,t),r);break e}throw Error(te(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:es(n,i),uP(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:es(n,i),RD(t,e,n,i,r);case 3:e:{if(tee(e),t===null)throw Error(te(387));n=e.pendingProps,s=e.memoizedState,i=s.element,TZ(t,e),Ny(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Td(Error(te(423)),e),e=MD(t,e,n,r,i);break e}else if(n!==i){i=Td(Error(te(424)),e),e=MD(t,e,n,r,i);break e}else for(pi=Ma(e.stateNode.containerInfo.firstChild),mi=e,Vt=!0,is=null,r=CZ(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Nd(),n===i){e=jo(t,e,r);break e}Sn(t,e,n,r)}e=e.child}return e;case 5:return OZ(e),t===null&&sP(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,eP(n,i)?o=null:s!==null&&eP(n,s)&&(e.flags|=32),eee(t,e),Sn(t,e,o,r),e.child;case 6:return t===null&&sP(e),null;case 13:return ree(t,e,r);case 4:return IR(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Cd(e,null,n,r):Sn(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:es(n,i),PD(t,e,n,i,r);case 7:return Sn(t,e,e.pendingProps,r),e.child;case 8:return Sn(t,e,e.pendingProps.children,r),e.child;case 12:return Sn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,$t(_y,n._currentValue),n._currentValue=o,s!==null)if(fs(s.value,o)){if(s.children===i.children&&!Yn.current){e=jo(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=po(-1,r&-r),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),oP(s.return,r,e),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(te(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),oP(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Sn(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Ju(e,r),i=Vi(i),n=n(i),e.flags|=1,Sn(t,e,n,r),e.child;case 14:return n=e.type,i=es(n,e.pendingProps),i=es(n.type,i),ID(t,e,n,i,r);case 15:return JZ(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:es(n,i),Wg(t,e),e.tag=1,Qn(n)?(t=!0,xy(e)):t=!1,Ju(e,r),YZ(e,n,i),lP(e,n,i,r),dP(null,e,n,!0,t,r);case 19:return nee(t,e,r);case 22:return ZZ(t,e,r)}throw Error(te(156,e.tag))};function bee(t,e){return WJ(t,e)}function yue(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Di(t,e,r,n){return new yue(t,e,r,n)}function KR(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vue(t){if(typeof t=="function")return KR(t)?1:0;if(t!=null){if(t=t.$$typeof,t===hR)return 11;if(t===fR)return 14}return 2}function Fa(t,e){var r=t.alternate;return r===null?(r=Di(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Yg(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")KR(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ou:return ec(r.children,i,s,e);case dR:o=8,i|=8;break;case Ij:return t=Di(12,r,e,i|2),t.elementType=Ij,t.lanes=s,t;case Rj:return t=Di(13,r,e,i),t.elementType=Rj,t.lanes=s,t;case Mj:return t=Di(19,r,e,i),t.elementType=Mj,t.lanes=s,t;case OJ:return c0(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case kJ:o=10;break e;case TJ:o=9;break e;case hR:o=11;break e;case fR:o=14;break e;case ea:o=16,n=null;break e}throw Error(te(130,t==null?t:typeof t,""))}return e=Di(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function ec(t,e,r,n){return t=Di(7,t,n,e),t.lanes=r,t}function c0(t,e,r,n){return t=Di(22,t,n,e),t.elementType=OJ,t.lanes=r,t.stateNode={isHidden:!1},t}function l1(t,e,r){return t=Di(6,t,null,e),t.lanes=r,t}function c1(t,e,r){return e=Di(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bue(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vb(0),this.expirationTimes=Vb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vb(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function GR(t,e,r,n,i,s,o,a,l){return t=new bue(t,e,r,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Di(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},PR(s),t}function xue(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tu,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function xee(t){if(!t)return Za;t=t._reactInternals;e:{if(Bc(t)!==t||t.tag!==1)throw Error(te(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Qn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(te(171))}if(t.tag===1){var r=t.type;if(Qn(r))return xZ(t,r,e)}return e}function wee(t,e,r,n,i,s,o,a,l){return t=GR(r,n,!0,t,i,s,o,a,l),t.context=xee(null),r=t.current,n=On(),i=Da(r),s=po(n,i),s.callback=e??null,Aa(r,s,i),t.current.lanes=i,Up(t,i,n),Xn(t,n),t}function u0(t,e,r,n){var i=e.current,s=On(),o=Da(i);return r=xee(r),e.context===null?e.context=r:e.pendingContext=r,e=po(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Aa(i,e,o),t!==null&&(hs(t,i,o,s),Vg(t,i,o)),o}function Ry(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function UD(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function YR(t,e){UD(t,e),(t=t.alternate)&&UD(t,e)}function wue(){return null}var See=typeof reportError=="function"?reportError:function(t){console.error(t)};function QR(t){this._internalRoot=t}d0.prototype.render=QR.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(te(409));u0(t,e,null,null)};d0.prototype.unmount=QR.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;vc(function(){u0(null,t,null,null)}),e[To]=null}};function d0(t){this._internalRoot=t}d0.prototype.unstable_scheduleHydration=function(t){if(t){var e=ZJ();t={blockedOn:null,target:t,priority:e};for(var r=0;r<la.length&&e!==0&&e<la[r].priority;r++);la.splice(r,0,t),r===0&&tZ(t)}};function XR(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function h0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function HD(){}function Sue(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var c=Ry(o);s.call(c)}}var o=wee(e,n,t,0,null,!1,!1,"",HD);return t._reactRootContainer=o,t[To]=o.current,Jf(t.nodeType===8?t.parentNode:t),vc(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var c=Ry(l);a.call(c)}}var l=GR(t,0,!1,null,null,!1,!1,"",HD);return t._reactRootContainer=l,t[To]=l.current,Jf(t.nodeType===8?t.parentNode:t),vc(function(){u0(e,l,r,n)}),l}function f0(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Ry(o);a.call(l)}}u0(e,o,t,i)}else o=Sue(r,e,t,i,n);return Ry(o)}XJ=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=lf(e.pendingLanes);r!==0&&(gR(e,r|1),Xn(e,pr()),!(pt&6)&&(Od=pr()+500,cl()))}break;case 13:vc(function(){var n=Oo(t,1);if(n!==null){var i=On();hs(n,t,1,i)}}),YR(t,1)}};yR=function(t){if(t.tag===13){var e=Oo(t,134217728);if(e!==null){var r=On();hs(e,t,134217728,r)}YR(t,134217728)}};JJ=function(t){if(t.tag===13){var e=Da(t),r=Oo(t,e);if(r!==null){var n=On();hs(r,t,e,n)}YR(t,e)}};ZJ=function(){return St};eZ=function(t,e){var r=St;try{return St=t,e()}finally{St=r}};Uj=function(t,e,r){switch(e){case"input":if(Dj(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=n0(n);if(!i)throw Error(te(90));PJ(n),Dj(n,i)}}}break;case"textarea":RJ(t,r);break;case"select":e=r.value,e!=null&&Gu(t,!!r.multiple,e,!1)}};LJ=UR;BJ=vc;var _ue={usingClientEntryPoint:!1,Events:[Wp,Ru,n0,FJ,qJ,UR]},Wh={findFiberByHostInstance:jl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Eue={bundleType:Wh.bundleType,version:Wh.version,rendererPackageName:Wh.rendererPackageName,rendererConfig:Wh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ro.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=UJ(t),t===null?null:t.stateNode},findFiberByHostInstance:Wh.findFiberByHostInstance||wue,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dg.isDisabled&&dg.supportsFiber)try{Zv=dg.inject(Eue),$s=dg}catch{}}vi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_ue;vi.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!XR(e))throw Error(te(200));return xue(t,e,null,r)};vi.createRoot=function(t,e){if(!XR(t))throw Error(te(299));var r=!1,n="",i=See;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=GR(t,1,!1,null,null,r,!1,n,i),t[To]=e.current,Jf(t.nodeType===8?t.parentNode:t),new QR(e)};vi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(te(188)):(t=Object.keys(t).join(","),Error(te(268,t)));return t=UJ(e),t=t===null?null:t.stateNode,t};vi.flushSync=function(t){return vc(t)};vi.hydrate=function(t,e,r){if(!h0(e))throw Error(te(200));return f0(null,t,e,!0,r)};vi.hydrateRoot=function(t,e,r){if(!XR(t))throw Error(te(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=See;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=wee(e,null,t,1,r??null,i,!1,s,o),t[To]=e.current,Jf(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new d0(e)};vi.render=function(t,e,r){if(!h0(e))throw Error(te(200));return f0(null,t,e,!1,r)};vi.unmountComponentAtNode=function(t){if(!h0(t))throw Error(te(40));return t._reactRootContainer?(vc(function(){f0(null,null,t,!1,function(){t._reactRootContainer=null,t[To]=null})}),!0):!1};vi.unstable_batchedUpdates=UR;vi.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!h0(r))throw Error(te(200));if(t==null||t._reactInternals===void 0)throw Error(te(38));return f0(t,e,r,!1,n)};vi.version="18.3.1-next-f1338f8080-20240426";function _ee(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_ee)}catch(t){console.error(t)}}_ee(),_J.exports=vi;var Eee=_J.exports;const Nue=dJ(Eee);var WD=Eee;jj.createRoot=WD.createRoot,jj.hydrateRoot=WD.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ap(){return ap=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ap.apply(this,arguments)}var Ca;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ca||(Ca={}));const KD="popstate";function Cue(t){t===void 0&&(t={});function e(n,i){let{pathname:s,search:o,hash:a}=n.location;return _P("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:My(i)}return Tue(e,r,null,t)}function Yt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function JR(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function kue(){return Math.random().toString(36).substr(2,8)}function GD(t,e){return{usr:t.state,key:t.key,idx:e}}function _P(t,e,r,n){return r===void 0&&(r=null),ap({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?th(e):e,{state:r,key:e&&e.key||n||kue()})}function My(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function th(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function Tue(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,a=Ca.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(ap({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Ca.Pop;let v=d(),y=v==null?null:v-c;c=v,l&&l({action:a,location:g.location,delta:y})}function f(v,y){a=Ca.Push;let b=_P(g.location,v,y);c=d()+1;let w=GD(b,c),x=g.createHref(b);try{o.pushState(w,"",x)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(x)}s&&l&&l({action:a,location:g.location,delta:1})}function p(v,y){a=Ca.Replace;let b=_P(g.location,v,y);c=d();let w=GD(b,c),x=g.createHref(b);o.replaceState(w,"",x),s&&l&&l({action:a,location:g.location,delta:0})}function m(v){let y=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof v=="string"?v:My(v);return b=b.replace(/ $/,"%20"),Yt(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let g={get action(){return a},get location(){return t(i,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(KD,h),l=v,()=>{i.removeEventListener(KD,h),l=null}},createHref(v){return e(i,v)},createURL:m,encodeLocation(v){let y=m(v);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:p,go(v){return o.go(v)}};return g}var YD;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(YD||(YD={}));function Oue(t,e,r){return r===void 0&&(r="/"),jue(t,e,r)}function jue(t,e,r,n){let i=typeof e=="string"?th(e):e,s=jd(i.pathname||"/",r);if(s==null)return null;let o=Nee(t);Pue(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=zue(s);a=Lue(o[l],c)}return a}function Nee(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Yt(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=qa([n,l.relativePath]),d=r.concat(l);s.children&&s.children.length>0&&(Yt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Nee(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:Fue(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of Cee(s.path))i(s,o,l)}),e}function Cee(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let o=Cee(n.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Pue(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:que(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Iue=/^:[\w-]+$/,Rue=3,Mue=2,Aue=1,$ue=10,Due=-2,QD=t=>t==="*";function Fue(t,e){let r=t.split("/"),n=r.length;return r.some(QD)&&(n+=Due),e&&(n+=Mue),r.filter(i=>!QD(i)).reduce((i,s)=>i+(Iue.test(s)?Rue:s===""?Aue:$ue),n)}function que(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function Lue(t,e,r){let{routesMeta:n}=t,i={},s="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],c=a===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=EP({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:qa([s,h.pathname]),pathnameBase:Kue(qa([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=qa([s,h.pathnameBase]))}return o}function EP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Bue(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((c,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let g=a[h]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const m=a[h];return p&&!m?c[f]=void 0:c[f]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function Bue(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),JR(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function zue(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return JR(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function jd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const Vue=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Uue=t=>Vue.test(t);function Hue(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?th(t):t,s;if(r)if(Uue(r))s=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),JR(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?s=XD(r.substring(1),"/"):s=XD(r,e)}else s=e;return{pathname:s,search:Gue(n),hash:Yue(i)}}function XD(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function u1(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Wue(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function ZR(t,e){let r=Wue(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function eM(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=th(t):(i=ap({},t),Yt(!i.pathname||!i.pathname.includes("?"),u1("?","pathname","search",i)),Yt(!i.pathname||!i.pathname.includes("#"),u1("#","pathname","hash",i)),Yt(!i.search||!i.search.includes("#"),u1("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=r;else{let h=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=Hue(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const qa=t=>t.join("/").replace(/\/\/+/g,"/"),Kue=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Gue=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Yue=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Que(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const kee=["post","put","patch","delete"];new Set(kee);const Xue=["get",...kee];new Set(Xue);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lp(){return lp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lp.apply(this,arguments)}const p0=T.createContext(null),Tee=T.createContext(null),Mo=T.createContext(null),m0=T.createContext(null),Ao=T.createContext({outlet:null,matches:[],isDataRoute:!1}),Oee=T.createContext(null);function Jue(t,e){let{relative:r}=e===void 0?{}:e;rh()||Yt(!1);let{basename:n,navigator:i}=T.useContext(Mo),{hash:s,pathname:o,search:a}=g0(t,{relative:r}),l=o;return n!=="/"&&(l=o==="/"?n:qa([n,o])),i.createHref({pathname:l,search:a,hash:s})}function rh(){return T.useContext(m0)!=null}function $o(){return rh()||Yt(!1),T.useContext(m0).location}function jee(t){T.useContext(Mo).static||T.useLayoutEffect(t)}function $n(){let{isDataRoute:t}=T.useContext(Ao);return t?dde():Zue()}function Zue(){rh()||Yt(!1);let t=T.useContext(p0),{basename:e,future:r,navigator:n}=T.useContext(Mo),{matches:i}=T.useContext(Ao),{pathname:s}=$o(),o=JSON.stringify(ZR(i,r.v7_relativeSplatPath)),a=T.useRef(!1);return jee(()=>{a.current=!0}),T.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){n.go(c);return}let h=eM(c,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:qa([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,o,s,t])}function Do(){let{matches:t}=T.useContext(Ao),e=t[t.length-1];return e?e.params:{}}function g0(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=T.useContext(Mo),{matches:i}=T.useContext(Ao),{pathname:s}=$o(),o=JSON.stringify(ZR(i,n.v7_relativeSplatPath));return T.useMemo(()=>eM(t,JSON.parse(o),s,r==="path"),[t,o,s,r])}function ede(t,e){return tde(t,e)}function tde(t,e,r,n){rh()||Yt(!1);let{navigator:i}=T.useContext(Mo),{matches:s}=T.useContext(Ao),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=$o(),d;if(e){var h;let v=typeof e=="string"?th(e):e;l==="/"||(h=v.pathname)!=null&&h.startsWith(l)||Yt(!1),d=v}else d=c;let f=d.pathname||"/",p=f;if(l!=="/"){let v=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let m=Oue(t,{pathname:p}),g=ode(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:qa([l,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:qa([l,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,r,n);return e&&g?T.createElement(m0.Provider,{value:{location:lp({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ca.Pop}},g):g}function rde(){let t=ude(),e=Que(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),r?T.createElement("pre",{style:i},r):null,null)}const nde=T.createElement(rde,null);class ide extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?T.createElement(Ao.Provider,{value:this.props.routeContext},T.createElement(Oee.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function sde(t){let{routeContext:e,match:r,children:n}=t,i=T.useContext(p0);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),T.createElement(Ao.Provider,{value:e},n)}function ode(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if(!r)return null;if(r.errors)t=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,a=(i=r)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Yt(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:p}=r,m=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||m){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,m=!1,g=null,v=null;r&&(p=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||nde,l&&(c<0&&f===0?(hde("route-fallback"),m=!0,v=null):c===f&&(m=!0,v=h.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,f+1)),b=()=>{let w;return p?w=g:m?w=v:h.route.Component?w=T.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,T.createElement(sde,{match:h,routeContext:{outlet:d,matches:y,isDataRoute:r!=null},children:w})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?T.createElement(ide,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var Pee=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Pee||{}),Iee=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Iee||{});function ade(t){let e=T.useContext(p0);return e||Yt(!1),e}function lde(t){let e=T.useContext(Tee);return e||Yt(!1),e}function cde(t){let e=T.useContext(Ao);return e||Yt(!1),e}function Ree(t){let e=cde(),r=e.matches[e.matches.length-1];return r.route.id||Yt(!1),r.route.id}function ude(){var t;let e=T.useContext(Oee),r=lde(),n=Ree();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function dde(){let{router:t}=ade(Pee.UseNavigateStable),e=Ree(Iee.UseNavigateStable),r=T.useRef(!1);return jee(()=>{r.current=!0}),T.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,lp({fromRouteId:e},s)))},[t,e])}const JD={};function hde(t,e,r){JD[t]||(JD[t]=!0)}function fde(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Mee(t){let{to:e,replace:r,state:n,relative:i}=t;rh()||Yt(!1);let{future:s,static:o}=T.useContext(Mo),{matches:a}=T.useContext(Ao),{pathname:l}=$o(),c=$n(),d=eM(e,ZR(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(d);return T.useEffect(()=>c(JSON.parse(h),{replace:r,state:n,relative:i}),[c,h,i,r,n]),null}function kt(t){Yt(!1)}function pde(t){let{basename:e="/",children:r=null,location:n,navigationType:i=Ca.Pop,navigator:s,static:o=!1,future:a}=t;rh()&&Yt(!1);let l=e.replace(/^\/*/,"/"),c=T.useMemo(()=>({basename:l,navigator:s,static:o,future:lp({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof n=="string"&&(n=th(n));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:m="default"}=n,g=T.useMemo(()=>{let v=jd(d,l);return v==null?null:{location:{pathname:v,search:h,hash:f,state:p,key:m},navigationType:i}},[l,d,h,f,p,m,i]);return g==null?null:T.createElement(Mo.Provider,{value:c},T.createElement(m0.Provider,{children:r,value:g}))}function ZD(t){let{children:e,location:r}=t;return ede(NP(e),r)}new Promise(()=>{});function NP(t,e){e===void 0&&(e=[]);let r=[];return T.Children.forEach(t,(n,i)=>{if(!T.isValidElement(n))return;let s=[...e,i];if(n.type===T.Fragment){r.push.apply(r,NP(n.props.children,s));return}n.type!==kt&&Yt(!1),!n.props.index||!n.props.children||Yt(!1);let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=NP(n.props.children,s)),r.push(o)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ay(){return Ay=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ay.apply(this,arguments)}function Aee(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function mde(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function gde(t,e){return t.button===0&&(!e||e==="_self")&&!mde(t)}function CP(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function yde(t,e){let r=CP(t);return e&&e.forEach((n,i)=>{r.has(i)||e.getAll(i).forEach(s=>{r.append(i,s)})}),r}const vde=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],bde=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],xde="6";try{window.__reactRouterVersion=xde}catch{}const wde=T.createContext({isTransitioning:!1}),Sde="startTransition",eF=ple[Sde];function _de(t){let{basename:e,children:r,future:n,window:i}=t,s=T.useRef();s.current==null&&(s.current=Cue({window:i,v5Compat:!0}));let o=s.current,[a,l]=T.useState({action:o.action,location:o.location}),{v7_startTransition:c}=n||{},d=T.useCallback(h=>{c&&eF?eF(()=>l(h)):l(h)},[l,c]);return T.useLayoutEffect(()=>o.listen(d),[o,d]),T.useEffect(()=>fde(n),[n]),T.createElement(pde,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:o,future:n})}const Ede=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Nde=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ge=T.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,f=Aee(e,vde),{basename:p}=T.useContext(Mo),m,g=!1;if(typeof c=="string"&&Nde.test(c)&&(m=c,Ede))try{let w=new URL(window.location.href),x=c.startsWith("//")?new URL(w.protocol+c):new URL(c),S=jd(x.pathname,p);x.origin===w.origin&&S!=null?c=S+x.search+x.hash:g=!0}catch{}let v=Jue(c,{relative:i}),y=Tde(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:h});function b(w){n&&n(w),w.defaultPrevented||y(w)}return T.createElement("a",Ay({},f,{href:m||v,onClick:g||s?n:b,ref:r,target:l}))}),Cde=T.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:d}=e,h=Aee(e,bde),f=g0(l,{relative:h.relative}),p=$o(),m=T.useContext(Tee),{navigator:g,basename:v}=T.useContext(Mo),y=m!=null&&Ode(f)&&c===!0,b=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,w=p.pathname,x=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;i||(w=w.toLowerCase(),x=x?x.toLowerCase():null,b=b.toLowerCase()),x&&v&&(x=jd(x,v)||x);const S=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let _=w===b||!o&&w.startsWith(b)&&w.charAt(S)==="/",E=x!=null&&(x===b||!o&&x.startsWith(b)&&x.charAt(b.length)==="/"),N={isActive:_,isPending:E,isTransitioning:y},k=_?n:void 0,C;typeof s=="function"?C=s(N):C=[s,_?"active":null,E?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let O=typeof a=="function"?a(N):a;return T.createElement(ge,Ay({},h,{"aria-current":k,className:C,ref:r,style:O,to:l,viewTransition:c}),typeof d=="function"?d(N):d)});var kP;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(kP||(kP={}));var tF;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(tF||(tF={}));function kde(t){let e=T.useContext(p0);return e||Yt(!1),e}function Tde(t,e){let{target:r,replace:n,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=$n(),c=$o(),d=g0(t,{relative:o});return T.useCallback(h=>{if(gde(h,r)){h.preventDefault();let f=n!==void 0?n:My(c)===My(d);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,d,n,i,r,t,s,o,a])}function y0(t){let e=T.useRef(CP(t)),r=T.useRef(!1),n=$o(),i=T.useMemo(()=>yde(n.search,r.current?null:e.current),[n.search]),s=$n(),o=T.useCallback((a,l)=>{const c=CP(typeof a=="function"?a(i):a);r.current=!0,s("?"+c,l)},[s,i]);return[i,o]}function Ode(t,e){e===void 0&&(e={});let r=T.useContext(wde);r==null&&Yt(!1);let{basename:n}=kde(kP.useViewTransitionState),i=g0(t,{relative:e.relative});if(!r.isTransitioning)return!1;let s=jd(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=jd(r.nextLocation.pathname,n)||r.nextLocation.pathname;return EP(i.pathname,o)!=null||EP(i.pathname,s)!=null}var zc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},jde={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},pa,nR,ZX,Pde=(ZX=class{constructor(){xe(this,pa,jde);xe(this,nR,!1)}setTimeoutProvider(t){oe(this,pa,t)}setTimeout(t,e){return R(this,pa).setTimeout(t,e)}clearTimeout(t){R(this,pa).clearTimeout(t)}setInterval(t,e){return R(this,pa).setInterval(t,e)}clearInterval(t){R(this,pa).clearInterval(t)}},pa=new WeakMap,nR=new WeakMap,ZX),Rl=new Pde;function Ide(t){setTimeout(t,0)}var bc=typeof window>"u"||"Deno"in globalThis;function pn(){}function Rde(t,e){return typeof t=="function"?t(e):t}function TP(t){return typeof t=="number"&&t>=0&&t!==1/0}function $ee(t,e){return Math.max(t+(e||0)-Date.now(),0)}function La(t,e){return typeof t=="function"?t(e):t}function Oi(t,e){return typeof t=="function"?t(e):t}function rF(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(n){if(e.queryHash!==tM(o,e.options))return!1}else if(!cp(e.queryKey,o))return!1}if(r!=="all"){const l=e.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function nF(t,e){const{exact:r,status:n,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(r){if(xc(e.options.mutationKey)!==xc(s))return!1}else if(!cp(e.options.mutationKey,s))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function tM(t,e){return((e==null?void 0:e.queryKeyHashFn)||xc)(t)}function xc(t){return JSON.stringify(t,(e,r)=>OP(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function cp(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>cp(t[r],e[r])):!1}var Mde=Object.prototype.hasOwnProperty;function rM(t,e){if(t===e)return t;const r=iF(t)&&iF(e);if(!r&&!(OP(t)&&OP(e)))return e;const i=(r?t:Object.keys(t)).length,s=r?e:Object.keys(e),o=s.length,a=r?new Array(o):{};let l=0;for(let c=0;c<o;c++){const d=r?c:s[c],h=t[d],f=e[d];if(h===f){a[d]=h,(r?c<i:Mde.call(t,d))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[d]=f;continue}const p=rM(h,f);a[d]=p,p===h&&l++}return i===o&&l===i?t:a}function up(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function iF(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function OP(t){if(!sF(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!sF(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function sF(t){return Object.prototype.toString.call(t)==="[object Object]"}function Ade(t){return new Promise(e=>{Rl.setTimeout(e,t)})}function jP(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?rM(t,e):e}function $de(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function Dde(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var nM=Symbol();function Dee(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===nM?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function iM(t,e){return typeof t=="function"?t(...e):!!t}function Fde(t,e,r){let n=!1,i;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(i??(i=e()),n||(n=!0,i.aborted?r():i.addEventListener("abort",r,{once:!0})),i)}),t}var Ul,ma,ld,eJ,qde=(eJ=class extends zc{constructor(){super();xe(this,Ul);xe(this,ma);xe(this,ld);oe(this,ld,e=>{if(!bc&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){R(this,ma)||this.setEventListener(R(this,ld))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,ma))==null||e.call(this),oe(this,ma,void 0))}setEventListener(e){var r;oe(this,ld,e),(r=R(this,ma))==null||r.call(this),oe(this,ma,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){R(this,Ul)!==e&&(oe(this,Ul,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof R(this,Ul)=="boolean"?R(this,Ul):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ul=new WeakMap,ma=new WeakMap,ld=new WeakMap,eJ),sM=new qde;function PP(){let t,e;const r=new Promise((i,s)=>{t=i,e=s});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),t(i)},r.reject=i=>{n({status:"rejected",reason:i}),e(i)},r}var Lde=Ide;function Bde(){let t=[],e=0,r=a=>{a()},n=a=>{a()},i=Lde;const s=a=>{e?t.push(a):i(()=>{r(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{n(()=>{a.forEach(l=>{r(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{r=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{i=a}}}var ur=Bde(),cd,ga,ud,tJ,zde=(tJ=class extends zc{constructor(){super();xe(this,cd,!0);xe(this,ga);xe(this,ud);oe(this,ud,e=>{if(!bc&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){R(this,ga)||this.setEventListener(R(this,ud))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,ga))==null||e.call(this),oe(this,ga,void 0))}setEventListener(e){var r;oe(this,ud,e),(r=R(this,ga))==null||r.call(this),oe(this,ga,e(this.setOnline.bind(this)))}setOnline(e){R(this,cd)!==e&&(oe(this,cd,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return R(this,cd)}},cd=new WeakMap,ga=new WeakMap,ud=new WeakMap,tJ),$y=new zde;function Vde(t){return Math.min(1e3*2**t,3e4)}function Fee(t){return(t??"online")==="online"?$y.isOnline():!0}var IP=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function qee(t){let e=!1,r=0,n;const i=PP(),s=()=>i.status!=="pending",o=g=>{var v;if(!s()){const y=new IP(g);f(y),(v=t.onCancel)==null||v.call(t,y)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>sM.isFocused()&&(t.networkMode==="always"||$y.isOnline())&&t.canRun(),d=()=>Fee(t.networkMode)&&t.canRun(),h=g=>{s()||(n==null||n(),i.resolve(g))},f=g=>{s()||(n==null||n(),i.reject(g))},p=()=>new Promise(g=>{var v;n=y=>{(s()||c())&&g(y)},(v=t.onPause)==null||v.call(t)}).then(()=>{var g;n=void 0,s()||(g=t.onContinue)==null||g.call(t)}),m=()=>{if(s())return;let g;const v=r===0?t.initialPromise:void 0;try{g=v??t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(h).catch(y=>{var _;if(s())return;const b=t.retry??(bc?0:3),w=t.retryDelay??Vde,x=typeof w=="function"?w(r,y):w,S=b===!0||typeof b=="number"&&r<b||typeof b=="function"&&b(r,y);if(e||!S){f(y);return}r++,(_=t.onFail)==null||_.call(t,r,y),Ade(x).then(()=>c()?void 0:p()).then(()=>{e?f(y):m()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(n==null||n(),i),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?m():p().then(m),i)}}var Hl,rJ,Lee=(rJ=class{constructor(){xe(this,Hl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),TP(this.gcTime)&&oe(this,Hl,Rl.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(bc?1/0:5*60*1e3))}clearGcTimeout(){R(this,Hl)&&(Rl.clearTimeout(R(this,Hl)),oe(this,Hl,void 0))}},Hl=new WeakMap,rJ),Wl,dd,ki,Kl,Fr,Ap,Gl,ts,Zs,nJ,Ude=(nJ=class extends Lee{constructor(e){super();xe(this,ts);xe(this,Wl);xe(this,dd);xe(this,ki);xe(this,Kl);xe(this,Fr);xe(this,Ap);xe(this,Gl);oe(this,Gl,!1),oe(this,Ap,e.defaultOptions),this.setOptions(e.options),this.observers=[],oe(this,Kl,e.client),oe(this,ki,R(this,Kl).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,oe(this,Wl,aF(this.options)),this.state=e.state??R(this,Wl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=R(this,Fr))==null?void 0:e.promise}setOptions(e){if(this.options={...R(this,Ap),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=aF(this.options);r.data!==void 0&&(this.setState(oF(r.data,r.dataUpdatedAt)),oe(this,Wl,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&R(this,ki).remove(this)}setData(e,r){const n=jP(this.state.data,e,this.options);return De(this,ts,Zs).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){De(this,ts,Zs).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,i;const r=(n=R(this,Fr))==null?void 0:n.promise;return(i=R(this,Fr))==null||i.cancel(e),r?r.then(pn).catch(pn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(R(this,Wl))}isActive(){return this.observers.some(e=>Oi(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===nM||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>La(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!$ee(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=R(this,Fr))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=R(this,Fr))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),R(this,ki).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(R(this,Fr)&&(R(this,Gl)?R(this,Fr).cancel({revert:!0}):R(this,Fr).cancelRetry()),this.scheduleGc()),R(this,ki).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||De(this,ts,Zs).call(this,{type:"invalidate"})}async fetch(e,r){var l,c,d,h,f,p,m,g,v,y,b,w;if(this.state.fetchStatus!=="idle"&&((l=R(this,Fr))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(R(this,Fr))return R(this,Fr).continueRetry(),R(this,Fr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const x=this.observers.find(S=>S.options.queryFn);x&&this.setOptions(x.options)}const n=new AbortController,i=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(oe(this,Gl,!0),n.signal)})},s=()=>{const x=Dee(this.options,r),_=(()=>{const E={client:R(this,Kl),queryKey:this.queryKey,meta:this.meta};return i(E),E})();return oe(this,Gl,!1),this.options.persister?this.options.persister(x,_,this):x(_)},a=(()=>{const x={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:R(this,Kl),state:this.state,fetchFn:s};return i(x),x})();(c=this.options.behavior)==null||c.onFetch(a,this),oe(this,dd,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&De(this,ts,Zs).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta}),oe(this,Fr,qee({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,onCancel:x=>{x instanceof IP&&x.revert&&this.setState({...R(this,dd),fetchStatus:"idle"}),n.abort()},onFail:(x,S)=>{De(this,ts,Zs).call(this,{type:"failed",failureCount:x,error:S})},onPause:()=>{De(this,ts,Zs).call(this,{type:"pause"})},onContinue:()=>{De(this,ts,Zs).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const x=await R(this,Fr).start();if(x===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(x),(p=(f=R(this,ki).config).onSuccess)==null||p.call(f,x,this),(g=(m=R(this,ki).config).onSettled)==null||g.call(m,x,this.state.error,this),x}catch(x){if(x instanceof IP){if(x.silent)return R(this,Fr).promise;if(x.revert){if(this.state.data===void 0)throw x;return this.state.data}}throw De(this,ts,Zs).call(this,{type:"error",error:x}),(y=(v=R(this,ki).config).onError)==null||y.call(v,x,this),(w=(b=R(this,ki).config).onSettled)==null||w.call(b,this.state.data,x,this),x}finally{this.scheduleGc()}}},Wl=new WeakMap,dd=new WeakMap,ki=new WeakMap,Kl=new WeakMap,Fr=new WeakMap,Ap=new WeakMap,Gl=new WeakMap,ts=new WeakSet,Zs=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Bee(n.data,this.options),fetchMeta:e.meta??null};case"success":const i={...n,...oF(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return oe(this,dd,e.manual?i:void 0),i;case"error":const s=e.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),ur.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),R(this,ki).notify({query:this,type:"updated",action:e})})},nJ);function Bee(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Fee(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function oF(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function aF(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var qn,at,$p,xn,Yl,hd,io,ya,Dp,fd,pd,Ql,Xl,va,md,yt,uf,RP,MP,AP,$P,DP,FP,qP,zee,iJ,oM=(iJ=class extends zc{constructor(e,r){super();xe(this,yt);xe(this,qn);xe(this,at);xe(this,$p);xe(this,xn);xe(this,Yl);xe(this,hd);xe(this,io);xe(this,ya);xe(this,Dp);xe(this,fd);xe(this,pd);xe(this,Ql);xe(this,Xl);xe(this,va);xe(this,md,new Set);this.options=r,oe(this,qn,e),oe(this,ya,null),oe(this,io,PP()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(R(this,at).addObserver(this),lF(R(this,at),this.options)?De(this,yt,uf).call(this):this.updateResult(),De(this,yt,$P).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return LP(R(this,at),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return LP(R(this,at),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,De(this,yt,DP).call(this),De(this,yt,FP).call(this),R(this,at).removeObserver(this)}setOptions(e){const r=this.options,n=R(this,at);if(this.options=R(this,qn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Oi(this.options.enabled,R(this,at))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");De(this,yt,qP).call(this),R(this,at).setOptions(this.options),r._defaulted&&!up(this.options,r)&&R(this,qn).getQueryCache().notify({type:"observerOptionsUpdated",query:R(this,at),observer:this});const i=this.hasListeners();i&&cF(R(this,at),n,this.options,r)&&De(this,yt,uf).call(this),this.updateResult(),i&&(R(this,at)!==n||Oi(this.options.enabled,R(this,at))!==Oi(r.enabled,R(this,at))||La(this.options.staleTime,R(this,at))!==La(r.staleTime,R(this,at)))&&De(this,yt,RP).call(this);const s=De(this,yt,MP).call(this);i&&(R(this,at)!==n||Oi(this.options.enabled,R(this,at))!==Oi(r.enabled,R(this,at))||s!==R(this,va))&&De(this,yt,AP).call(this,s)}getOptimisticResult(e){const r=R(this,qn).getQueryCache().build(R(this,qn),e),n=this.createResult(r,e);return Wde(this,n)&&(oe(this,xn,n),oe(this,hd,this.options),oe(this,Yl,R(this,at).state)),n}getCurrentResult(){return R(this,xn)}trackResult(e,r){return new Proxy(e,{get:(n,i)=>(this.trackProp(i),r==null||r(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&R(this,io).status==="pending"&&R(this,io).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,i))})}trackProp(e){R(this,md).add(e)}getCurrentQuery(){return R(this,at)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=R(this,qn).defaultQueryOptions(e),n=R(this,qn).getQueryCache().build(R(this,qn),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(e){return De(this,yt,uf).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),R(this,xn)))}createResult(e,r){var k;const n=R(this,at),i=this.options,s=R(this,xn),o=R(this,Yl),a=R(this,hd),c=e!==n?e.state:R(this,$p),{state:d}=e;let h={...d},f=!1,p;if(r._optimisticResults){const C=this.hasListeners(),O=!C&&lF(e,r),P=C&&cF(e,n,r,i);(O||P)&&(h={...h,...Bee(d.data,e.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:m,errorUpdatedAt:g,status:v}=h;p=h.data;let y=!1;if(r.placeholderData!==void 0&&p===void 0&&v==="pending"){let C;s!=null&&s.isPlaceholderData&&r.placeholderData===(a==null?void 0:a.placeholderData)?(C=s.data,y=!0):C=typeof r.placeholderData=="function"?r.placeholderData((k=R(this,pd))==null?void 0:k.state.data,R(this,pd)):r.placeholderData,C!==void 0&&(v="success",p=jP(s==null?void 0:s.data,C,r),f=!0)}if(r.select&&p!==void 0&&!y)if(s&&p===(o==null?void 0:o.data)&&r.select===R(this,Dp))p=R(this,fd);else try{oe(this,Dp,r.select),p=r.select(p),p=jP(s==null?void 0:s.data,p,r),oe(this,fd,p),oe(this,ya,null)}catch(C){oe(this,ya,C)}R(this,ya)&&(m=R(this,ya),p=R(this,fd),g=Date.now(),v="error");const b=h.fetchStatus==="fetching",w=v==="pending",x=v==="error",S=w&&b,_=p!==void 0,N={status:v,fetchStatus:h.fetchStatus,isPending:w,isSuccess:v==="success",isError:x,isInitialLoading:S,isLoading:S,data:p,dataUpdatedAt:h.dataUpdatedAt,error:m,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:b,isRefetching:b&&!w,isLoadingError:x&&!_,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:x&&_,isStale:aM(e,r),refetch:this.refetch,promise:R(this,io),isEnabled:Oi(r.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const C=j=>{N.status==="error"?j.reject(N.error):N.data!==void 0&&j.resolve(N.data)},O=()=>{const j=oe(this,io,N.promise=PP());C(j)},P=R(this,io);switch(P.status){case"pending":e.queryHash===n.queryHash&&C(P);break;case"fulfilled":(N.status==="error"||N.data!==P.value)&&O();break;case"rejected":(N.status!=="error"||N.error!==P.reason)&&O();break}}return N}updateResult(){const e=R(this,xn),r=this.createResult(R(this,at),this.options);if(oe(this,Yl,R(this,at).state),oe(this,hd,this.options),R(this,Yl).data!==void 0&&oe(this,pd,R(this,at)),up(r,e))return;oe(this,xn,r);const n=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!R(this,md).size)return!0;const o=new Set(s??R(this,md));return this.options.throwOnError&&o.add("error"),Object.keys(R(this,xn)).some(a=>{const l=a;return R(this,xn)[l]!==e[l]&&o.has(l)})};De(this,yt,zee).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&De(this,yt,$P).call(this)}},qn=new WeakMap,at=new WeakMap,$p=new WeakMap,xn=new WeakMap,Yl=new WeakMap,hd=new WeakMap,io=new WeakMap,ya=new WeakMap,Dp=new WeakMap,fd=new WeakMap,pd=new WeakMap,Ql=new WeakMap,Xl=new WeakMap,va=new WeakMap,md=new WeakMap,yt=new WeakSet,uf=function(e){De(this,yt,qP).call(this);let r=R(this,at).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(pn)),r},RP=function(){De(this,yt,DP).call(this);const e=La(this.options.staleTime,R(this,at));if(bc||R(this,xn).isStale||!TP(e))return;const n=$ee(R(this,xn).dataUpdatedAt,e)+1;oe(this,Ql,Rl.setTimeout(()=>{R(this,xn).isStale||this.updateResult()},n))},MP=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(R(this,at)):this.options.refetchInterval)??!1},AP=function(e){De(this,yt,FP).call(this),oe(this,va,e),!(bc||Oi(this.options.enabled,R(this,at))===!1||!TP(R(this,va))||R(this,va)===0)&&oe(this,Xl,Rl.setInterval(()=>{(this.options.refetchIntervalInBackground||sM.isFocused())&&De(this,yt,uf).call(this)},R(this,va)))},$P=function(){De(this,yt,RP).call(this),De(this,yt,AP).call(this,De(this,yt,MP).call(this))},DP=function(){R(this,Ql)&&(Rl.clearTimeout(R(this,Ql)),oe(this,Ql,void 0))},FP=function(){R(this,Xl)&&(Rl.clearInterval(R(this,Xl)),oe(this,Xl,void 0))},qP=function(){const e=R(this,qn).getQueryCache().build(R(this,qn),this.options);if(e===R(this,at))return;const r=R(this,at);oe(this,at,e),oe(this,$p,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},zee=function(e){ur.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(R(this,xn))}),R(this,qn).getQueryCache().notify({query:R(this,at),type:"observerResultsUpdated"})})},iJ);function Hde(t,e){return Oi(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function lF(t,e){return Hde(t,e)||t.state.data!==void 0&&LP(t,e,e.refetchOnMount)}function LP(t,e,r){if(Oi(e.enabled,t)!==!1&&La(e.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&aM(t,e)}return!1}function cF(t,e,r,n){return(t!==e||Oi(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&aM(t,r)}function aM(t,e){return Oi(e.enabled,t)!==!1&&t.isStaleByTime(La(e.staleTime,t))}function Wde(t,e){return!up(t.getCurrentResult(),e)}function uF(t){return{onFetch:(e,r)=>{var d,h,f,p,m;const n=e.options,i=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,s=((p=e.state.data)==null?void 0:p.pages)||[],o=((m=e.state.data)==null?void 0:m.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let g=!1;const v=w=>{Fde(w,()=>e.signal,()=>g=!0)},y=Dee(e.options,e.fetchOptions),b=async(w,x,S)=>{if(g)return Promise.reject();if(x==null&&w.pages.length)return Promise.resolve(w);const E=(()=>{const O={client:e.client,queryKey:e.queryKey,pageParam:x,direction:S?"backward":"forward",meta:e.options.meta};return v(O),O})(),N=await y(E),{maxPages:k}=e.options,C=S?Dde:$de;return{pages:C(w.pages,N,k),pageParams:C(w.pageParams,x,k)}};if(i&&s.length){const w=i==="backward",x=w?Kde:dF,S={pages:s,pageParams:o},_=x(n,S);a=await b(S,_,w)}else{const w=t??s.length;do{const x=l===0?o[0]??n.initialPageParam:dF(n,a);if(l>0&&x==null)break;a=await b(a,x),l++}while(l<w)}return a};e.options.persister?e.fetchFn=()=>{var g,v;return(v=(g=e.options).persister)==null?void 0:v.call(g,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=c}}}function dF(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function Kde(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var Fp,Ts,wn,Jl,Os,Jo,sJ,Gde=(sJ=class extends Lee{constructor(e){super();xe(this,Os);xe(this,Fp);xe(this,Ts);xe(this,wn);xe(this,Jl);oe(this,Fp,e.client),this.mutationId=e.mutationId,oe(this,wn,e.mutationCache),oe(this,Ts,[]),this.state=e.state||Vee(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){R(this,Ts).includes(e)||(R(this,Ts).push(e),this.clearGcTimeout(),R(this,wn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){oe(this,Ts,R(this,Ts).filter(r=>r!==e)),this.scheduleGc(),R(this,wn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){R(this,Ts).length||(this.state.status==="pending"?this.scheduleGc():R(this,wn).remove(this))}continue(){var e;return((e=R(this,Jl))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,l,c,d,h,f,p,m,g,v,y,b,w,x,S,_,E,N,k;const r=()=>{De(this,Os,Jo).call(this,{type:"continue"})},n={client:R(this,Fp),meta:this.options.meta,mutationKey:this.options.mutationKey};oe(this,Jl,qee({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(C,O)=>{De(this,Os,Jo).call(this,{type:"failed",failureCount:C,error:O})},onPause:()=>{De(this,Os,Jo).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>R(this,wn).canRun(this)}));const i=this.state.status==="pending",s=!R(this,Jl).canStart();try{if(i)r();else{De(this,Os,Jo).call(this,{type:"pending",variables:e,isPaused:s}),await((a=(o=R(this,wn).config).onMutate)==null?void 0:a.call(o,e,this,n));const O=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e,n));O!==this.state.context&&De(this,Os,Jo).call(this,{type:"pending",context:O,variables:e,isPaused:s})}const C=await R(this,Jl).start();return await((h=(d=R(this,wn).config).onSuccess)==null?void 0:h.call(d,C,e,this.state.context,this,n)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,C,e,this.state.context,n)),await((g=(m=R(this,wn).config).onSettled)==null?void 0:g.call(m,C,null,this.state.variables,this.state.context,this,n)),await((y=(v=this.options).onSettled)==null?void 0:y.call(v,C,null,e,this.state.context,n)),De(this,Os,Jo).call(this,{type:"success",data:C}),C}catch(C){try{await((w=(b=R(this,wn).config).onError)==null?void 0:w.call(b,C,e,this.state.context,this,n))}catch(O){Promise.reject(O)}try{await((S=(x=this.options).onError)==null?void 0:S.call(x,C,e,this.state.context,n))}catch(O){Promise.reject(O)}try{await((E=(_=R(this,wn).config).onSettled)==null?void 0:E.call(_,void 0,C,this.state.variables,this.state.context,this,n))}catch(O){Promise.reject(O)}try{await((k=(N=this.options).onSettled)==null?void 0:k.call(N,void 0,C,e,this.state.context,n))}catch(O){Promise.reject(O)}throw De(this,Os,Jo).call(this,{type:"error",error:C}),C}finally{R(this,wn).runNext(this)}}},Fp=new WeakMap,Ts=new WeakMap,wn=new WeakMap,Jl=new WeakMap,Os=new WeakSet,Jo=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),ur.batch(()=>{R(this,Ts).forEach(n=>{n.onMutationUpdate(e)}),R(this,wn).notify({mutation:this,type:"updated",action:e})})},sJ);function Vee(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var so,rs,qp,oJ,Yde=(oJ=class extends zc{constructor(e={}){super();xe(this,so);xe(this,rs);xe(this,qp);this.config=e,oe(this,so,new Set),oe(this,rs,new Map),oe(this,qp,0)}build(e,r,n){const i=new Gde({client:e,mutationCache:this,mutationId:++Gm(this,qp)._,options:e.defaultMutationOptions(r),state:n});return this.add(i),i}add(e){R(this,so).add(e);const r=hg(e);if(typeof r=="string"){const n=R(this,rs).get(r);n?n.push(e):R(this,rs).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(R(this,so).delete(e)){const r=hg(e);if(typeof r=="string"){const n=R(this,rs).get(r);if(n)if(n.length>1){const i=n.indexOf(e);i!==-1&&n.splice(i,1)}else n[0]===e&&R(this,rs).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=hg(e);if(typeof r=="string"){const n=R(this,rs).get(r),i=n==null?void 0:n.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var n;const r=hg(e);if(typeof r=="string"){const i=(n=R(this,rs).get(r))==null?void 0:n.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ur.batch(()=>{R(this,so).forEach(e=>{this.notify({type:"removed",mutation:e})}),R(this,so).clear(),R(this,rs).clear()})}getAll(){return Array.from(R(this,so))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>nF(r,n))}findAll(e={}){return this.getAll().filter(r=>nF(e,r))}notify(e){ur.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return ur.batch(()=>Promise.all(e.map(r=>r.continue().catch(pn))))}},so=new WeakMap,rs=new WeakMap,qp=new WeakMap,oJ);function hg(t){var e;return(e=t.options.scope)==null?void 0:e.id}var oo,ba,Ln,ao,Co,Qg,BP,aJ,Qde=(aJ=class extends zc{constructor(e,r){super();xe(this,Co);xe(this,oo);xe(this,ba);xe(this,Ln);xe(this,ao);oe(this,oo,e),this.setOptions(r),this.bindMethods(),De(this,Co,Qg).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var n;const r=this.options;this.options=R(this,oo).defaultMutationOptions(e),up(this.options,r)||R(this,oo).getMutationCache().notify({type:"observerOptionsUpdated",mutation:R(this,Ln),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&xc(r.mutationKey)!==xc(this.options.mutationKey)?this.reset():((n=R(this,Ln))==null?void 0:n.state.status)==="pending"&&R(this,Ln).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=R(this,Ln))==null||e.removeObserver(this)}onMutationUpdate(e){De(this,Co,Qg).call(this),De(this,Co,BP).call(this,e)}getCurrentResult(){return R(this,ba)}reset(){var e;(e=R(this,Ln))==null||e.removeObserver(this),oe(this,Ln,void 0),De(this,Co,Qg).call(this),De(this,Co,BP).call(this)}mutate(e,r){var n;return oe(this,ao,r),(n=R(this,Ln))==null||n.removeObserver(this),oe(this,Ln,R(this,oo).getMutationCache().build(R(this,oo),this.options)),R(this,Ln).addObserver(this),R(this,Ln).execute(e)}},oo=new WeakMap,ba=new WeakMap,Ln=new WeakMap,ao=new WeakMap,Co=new WeakSet,Qg=function(){var r;const e=((r=R(this,Ln))==null?void 0:r.state)??Vee();oe(this,ba,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},BP=function(e){ur.batch(()=>{var r,n,i,s,o,a,l,c;if(R(this,ao)&&this.hasListeners()){const d=R(this,ba).variables,h=R(this,ba).context,f={client:R(this,oo),meta:this.options.meta,mutationKey:this.options.mutationKey};if((e==null?void 0:e.type)==="success"){try{(n=(r=R(this,ao)).onSuccess)==null||n.call(r,e.data,d,h,f)}catch(p){Promise.reject(p)}try{(s=(i=R(this,ao)).onSettled)==null||s.call(i,e.data,null,d,h,f)}catch(p){Promise.reject(p)}}else if((e==null?void 0:e.type)==="error"){try{(a=(o=R(this,ao)).onError)==null||a.call(o,e.error,d,h,f)}catch(p){Promise.reject(p)}try{(c=(l=R(this,ao)).onSettled)==null||c.call(l,void 0,e.error,d,h,f)}catch(p){Promise.reject(p)}}}this.listeners.forEach(d=>{d(R(this,ba))})})},aJ);function hF(t,e){const r=new Set(e);return t.filter(n=>!r.has(n))}function Xde(t,e,r){const n=t.slice(0);return n[e]=r,n}var gd,li,yd,vd,Ti,xa,Lp,Bp,zp,on,zP,VP,UP,HP,WP,lJ,Jde=(lJ=class extends zc{constructor(e,r,n){super();xe(this,on);xe(this,gd);xe(this,li);xe(this,yd);xe(this,vd);xe(this,Ti);xe(this,xa);xe(this,Lp);xe(this,Bp);xe(this,zp,[]);oe(this,gd,e),oe(this,vd,n),oe(this,yd,[]),oe(this,Ti,[]),oe(this,li,[]),this.setQueries(r)}onSubscribe(){this.listeners.size===1&&R(this,Ti).forEach(e=>{e.subscribe(r=>{De(this,on,HP).call(this,e,r)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,R(this,Ti).forEach(e=>{e.destroy()})}setQueries(e,r){oe(this,yd,e),oe(this,vd,r),ur.batch(()=>{const n=R(this,Ti),i=De(this,on,UP).call(this,R(this,yd));i.forEach(h=>h.observer.setOptions(h.defaultedQueryOptions));const s=i.map(h=>h.observer),o=s.map(h=>h.getCurrentResult()),a=n.length!==s.length,l=s.some((h,f)=>h!==n[f]),c=a||l,d=c?!0:o.some((h,f)=>{const p=R(this,li)[f];return!p||!up(h,p)});!c&&!d||(c&&(oe(this,zp,i),oe(this,Ti,s)),oe(this,li,o),this.hasListeners()&&(c&&(hF(n,s).forEach(h=>{h.destroy()}),hF(s,n).forEach(h=>{h.subscribe(f=>{De(this,on,HP).call(this,h,f)})})),De(this,on,WP).call(this)))})}getCurrentResult(){return R(this,li)}getQueries(){return R(this,Ti).map(e=>e.getCurrentQuery())}getObservers(){return R(this,Ti)}getOptimisticResult(e,r){const n=De(this,on,UP).call(this,e),i=n.map(s=>s.observer.getOptimisticResult(s.defaultedQueryOptions));return[i,s=>De(this,on,VP).call(this,s??i,r),()=>De(this,on,zP).call(this,i,n)]}},gd=new WeakMap,li=new WeakMap,yd=new WeakMap,vd=new WeakMap,Ti=new WeakMap,xa=new WeakMap,Lp=new WeakMap,Bp=new WeakMap,zp=new WeakMap,on=new WeakSet,zP=function(e,r){return r.map((n,i)=>{const s=e[i];return n.defaultedQueryOptions.notifyOnChangeProps?s:n.observer.trackResult(s,o=>{r.forEach(a=>{a.observer.trackProp(o)})})})},VP=function(e,r){return r?((!R(this,xa)||R(this,li)!==R(this,Bp)||r!==R(this,Lp))&&(oe(this,Lp,r),oe(this,Bp,R(this,li)),oe(this,xa,rM(R(this,xa),r(e)))),R(this,xa)):e},UP=function(e){const r=new Map;R(this,Ti).forEach(i=>{const s=i.options.queryHash;if(!s)return;const o=r.get(s);o?o.push(i):r.set(s,[i])});const n=[];return e.forEach(i=>{var l;const s=R(this,gd).defaultQueryOptions(i),a=((l=r.get(s.queryHash))==null?void 0:l.shift())??new oM(R(this,gd),s);n.push({defaultedQueryOptions:s,observer:a})}),n},HP=function(e,r){const n=R(this,Ti).indexOf(e);n!==-1&&(oe(this,li,Xde(R(this,li),n,r)),De(this,on,WP).call(this))},WP=function(){var e;if(this.hasListeners()){const r=R(this,xa),n=De(this,on,zP).call(this,R(this,li),R(this,zp)),i=De(this,on,VP).call(this,n,(e=R(this,vd))==null?void 0:e.combine);r!==i&&ur.batch(()=>{this.listeners.forEach(s=>{s(R(this,li))})})}},lJ),js,cJ,Zde=(cJ=class extends zc{constructor(e={}){super();xe(this,js);this.config=e,oe(this,js,new Map)}build(e,r,n){const i=r.queryKey,s=r.queryHash??tM(i,r);let o=this.get(s);return o||(o=new Ude({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){R(this,js).has(e.queryHash)||(R(this,js).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=R(this,js).get(e.queryHash);r&&(e.destroy(),r===e&&R(this,js).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ur.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return R(this,js).get(e)}getAll(){return[...R(this,js).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>rF(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>rF(e,n)):r}notify(e){ur.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){ur.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ur.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},js=new WeakMap,cJ),ir,wa,Sa,bd,xd,_a,wd,Sd,uJ,ehe=(uJ=class{constructor(t={}){xe(this,ir);xe(this,wa);xe(this,Sa);xe(this,bd);xe(this,xd);xe(this,_a);xe(this,wd);xe(this,Sd);oe(this,ir,t.queryCache||new Zde),oe(this,wa,t.mutationCache||new Yde),oe(this,Sa,t.defaultOptions||{}),oe(this,bd,new Map),oe(this,xd,new Map),oe(this,_a,0)}mount(){Gm(this,_a)._++,R(this,_a)===1&&(oe(this,wd,sM.subscribe(async t=>{t&&(await this.resumePausedMutations(),R(this,ir).onFocus())})),oe(this,Sd,$y.subscribe(async t=>{t&&(await this.resumePausedMutations(),R(this,ir).onOnline())})))}unmount(){var t,e;Gm(this,_a)._--,R(this,_a)===0&&((t=R(this,wd))==null||t.call(this),oe(this,wd,void 0),(e=R(this,Sd))==null||e.call(this),oe(this,Sd,void 0))}isFetching(t){return R(this,ir).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return R(this,wa).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=R(this,ir).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=R(this,ir).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(La(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return R(this,ir).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),i=R(this,ir).get(n.queryHash),s=i==null?void 0:i.state.data,o=Rde(e,s);if(o!==void 0)return R(this,ir).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(t,e,r){return ur.batch(()=>R(this,ir).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=R(this,ir).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=R(this,ir);ur.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=R(this,ir);return ur.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=ur.batch(()=>R(this,ir).findAll(t).map(i=>i.cancel(r)));return Promise.all(n).then(pn).catch(pn)}invalidateQueries(t,e={}){return ur.batch(()=>(R(this,ir).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=ur.batch(()=>R(this,ir).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,r);return r.throwOnError||(s=s.catch(pn)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(pn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=R(this,ir).build(this,e);return r.isStaleByTime(La(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(pn).catch(pn)}fetchInfiniteQuery(t){return t.behavior=uF(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(pn).catch(pn)}ensureInfiniteQueryData(t){return t.behavior=uF(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return $y.isOnline()?R(this,wa).resumePausedMutations():Promise.resolve()}getQueryCache(){return R(this,ir)}getMutationCache(){return R(this,wa)}getDefaultOptions(){return R(this,Sa)}setDefaultOptions(t){oe(this,Sa,t)}setQueryDefaults(t,e){R(this,bd).set(xc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...R(this,bd).values()],r={};return e.forEach(n=>{cp(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){R(this,xd).set(xc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...R(this,xd).values()],r={};return e.forEach(n=>{cp(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...R(this,Sa).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=tM(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===nM&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...R(this,Sa).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){R(this,ir).clear(),R(this,wa).clear()}},ir=new WeakMap,wa=new WeakMap,Sa=new WeakMap,bd=new WeakMap,xd=new WeakMap,_a=new WeakMap,wd=new WeakMap,Sd=new WeakMap,uJ),Uee=T.createContext(void 0),_t=t=>{const e=T.useContext(Uee);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},the=({client:t,children:e})=>(T.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),u.jsx(Uee.Provider,{value:t,children:e})),Hee=T.createContext(!1),Wee=()=>T.useContext(Hee);Hee.Provider;function rhe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var nhe=T.createContext(rhe()),Kee=()=>T.useContext(nhe),Gee=(t,e,r)=>{const n=r!=null&&r.state.error&&typeof t.throwOnError=="function"?iM(t.throwOnError,[r.state.error,r]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||n)&&(e.isReset()||(t.retryOnMount=!1))},Yee=t=>{T.useEffect(()=>{t.clearReset()},[t])},Qee=({result:t,errorResetBoundary:e,throwOnError:r,query:n,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&(i&&t.data===void 0||iM(r,[t.error,n])),Xee=t=>{if(t.suspense){const r=i=>i==="static"?i:Math.max(i??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...i)=>r(n(...i)):r(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Jee=(t,e)=>t.isLoading&&t.isFetching&&!e,KP=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Dy=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function GP({queries:t,...e},r){const n=_t(),i=Wee(),s=Kee(),o=T.useMemo(()=>t.map(g=>{const v=n.defaultQueryOptions(g);return v._optimisticResults=i?"isRestoring":"optimistic",v}),[t,n,i]);o.forEach(g=>{Xee(g);const v=n.getQueryCache().get(g.queryHash);Gee(g,s,v)}),Yee(s);const[a]=T.useState(()=>new Jde(n,o,e)),[l,c,d]=a.getOptimisticResult(o,e.combine),h=!i&&e.subscribed!==!1;T.useSyncExternalStore(T.useCallback(g=>h?a.subscribe(ur.batchCalls(g)):pn,[a,h]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),T.useEffect(()=>{a.setQueries(o,e)},[o,e,a]);const p=l.some((g,v)=>KP(o[v],g))?l.flatMap((g,v)=>{const y=o[v];if(y){const b=new oM(n,y);if(KP(y,g))return Dy(y,b,s);Jee(g,i)&&Dy(y,b,s)}return[]}):[];if(p.length>0)throw Promise.all(p);const m=l.find((g,v)=>{const y=o[v];return y&&Qee({result:g,errorResetBoundary:s,throwOnError:y.throwOnError,query:n.getQueryCache().get(y.queryHash),suspense:y.suspense})});if(m!=null&&m.error)throw m.error;return c(d())}function ihe(t,e,r){var f,p,m,g;const n=Wee(),i=Kee(),s=_t(),o=s.defaultQueryOptions(t);(p=(f=s.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||p.call(f,o);const a=s.getQueryCache().get(o.queryHash);o._optimisticResults=n?"isRestoring":"optimistic",Xee(o),Gee(o,i,a),Yee(i);const l=!s.getQueryCache().get(o.queryHash),[c]=T.useState(()=>new e(s,o)),d=c.getOptimisticResult(o),h=!n&&t.subscribed!==!1;if(T.useSyncExternalStore(T.useCallback(v=>{const y=h?c.subscribe(ur.batchCalls(v)):pn;return c.updateResult(),y},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),T.useEffect(()=>{c.setOptions(o)},[o,c]),KP(o,d))throw Dy(o,c,i);if(Qee({result:d,errorResetBoundary:i,throwOnError:o.throwOnError,query:a,suspense:o.suspense}))throw d.error;if((g=(m=s.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||g.call(m,o,d),o.experimental_prefetchInRender&&!bc&&Jee(d,n)){const v=l?Dy(o,c,i):a==null?void 0:a.promise;v==null||v.catch(pn).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function ft(t,e){return ihe(t,oM)}function mt(t,e){const r=_t(),[n]=T.useState(()=>new Qde(r,t));T.useEffect(()=>{n.setOptions(t)},[n,t]);const i=T.useSyncExternalStore(T.useCallback(o=>n.subscribe(ur.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),s=T.useCallback((o,a)=>{n.mutate(o,a).catch(pn)},[n]);if(i.error&&iM(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}function lM(){const t=window.prmConfig||{};return T.useMemo(()=>({isLoggedIn:t.isLoggedIn||!1,userId:t.userId||null,loginUrl:t.loginUrl||"/wp-login.php",logoutUrl:t.logoutUrl||"/wp-login.php?action=logout",isLoading:!1}),[t.isLoggedIn,t.userId,t.loginUrl,t.logoutUrl])}function Zee(t,e){return function(){return t.apply(e,arguments)}}const{toString:she}=Object.prototype,{getPrototypeOf:cM}=Object,{iterator:v0,toStringTag:ete}=Symbol,b0=(t=>e=>{const r=she.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ys=t=>(t=t.toLowerCase(),e=>b0(e)===t),x0=t=>e=>typeof e===t,{isArray:nh}=Array,Pd=x0("undefined");function Gp(t){return t!==null&&!Pd(t)&&t.constructor!==null&&!Pd(t.constructor)&&Jn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const tte=ys("ArrayBuffer");function ohe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&tte(t.buffer),e}const ahe=x0("string"),Jn=x0("function"),rte=x0("number"),Yp=t=>t!==null&&typeof t=="object",lhe=t=>t===!0||t===!1,Xg=t=>{if(b0(t)!=="object")return!1;const e=cM(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(ete in t)&&!(v0 in t)},che=t=>{if(!Yp(t)||Gp(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},uhe=ys("Date"),dhe=ys("File"),hhe=ys("Blob"),fhe=ys("FileList"),phe=t=>Yp(t)&&Jn(t.pipe),mhe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Jn(t.append)&&((e=b0(t))==="formdata"||e==="object"&&Jn(t.toString)&&t.toString()==="[object FormData]"))},ghe=ys("URLSearchParams"),[yhe,vhe,bhe,xhe]=["ReadableStream","Request","Response","Headers"].map(ys),whe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Qp(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),nh(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{if(Gp(t))return;const s=r?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(n=0;n<o;n++)a=s[n],e.call(null,t[a],a,t)}}function nte(t,e){if(Gp(t))return null;e=e.toLowerCase();const r=Object.keys(t);let n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}const Ml=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ite=t=>!Pd(t)&&t!==Ml;function YP(){const{caseless:t,skipUndefined:e}=ite(this)&&this||{},r={},n=(i,s)=>{const o=t&&nte(r,s)||s;Xg(r[o])&&Xg(i)?r[o]=YP(r[o],i):Xg(i)?r[o]=YP({},i):nh(i)?r[o]=i.slice():(!e||!Pd(i))&&(r[o]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Qp(arguments[i],n);return r}const She=(t,e,r,{allOwnKeys:n}={})=>(Qp(e,(i,s)=>{r&&Jn(i)?t[s]=Zee(i,r):t[s]=i},{allOwnKeys:n}),t),_he=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Ehe=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},Nhe=(t,e,r,n)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!n||n(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=r!==!1&&cM(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},Che=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},khe=t=>{if(!t)return null;if(nh(t))return t;let e=t.length;if(!rte(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},The=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&cM(Uint8Array)),Ohe=(t,e)=>{const n=(t&&t[v0]).call(t);let i;for(;(i=n.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},jhe=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},Phe=ys("HTMLFormElement"),Ihe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),fF=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),Rhe=ys("RegExp"),ste=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};Qp(r,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(n[s]=o||i)}),Object.defineProperties(t,n)},Mhe=t=>{ste(t,(e,r)=>{if(Jn(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(Jn(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Ahe=(t,e)=>{const r={},n=i=>{i.forEach(s=>{r[s]=!0})};return nh(t)?n(t):n(String(t).split(e)),r},$he=()=>{},Dhe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Fhe(t){return!!(t&&Jn(t.append)&&t[ete]==="FormData"&&t[v0])}const qhe=t=>{const e=new Array(10),r=(n,i)=>{if(Yp(n)){if(e.indexOf(n)>=0)return;if(Gp(n))return n;if(!("toJSON"in n)){e[i]=n;const s=nh(n)?[]:{};return Qp(n,(o,a)=>{const l=r(o,i+1);!Pd(l)&&(s[a]=l)}),e[i]=void 0,s}}return n};return r(t,0)},Lhe=ys("AsyncFunction"),Bhe=t=>t&&(Yp(t)||Jn(t))&&Jn(t.then)&&Jn(t.catch),ote=((t,e)=>t?setImmediate:e?((r,n)=>(Ml.addEventListener("message",({source:i,data:s})=>{i===Ml&&s===r&&n.length&&n.shift()()},!1),i=>{n.push(i),Ml.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Jn(Ml.postMessage)),zhe=typeof queueMicrotask<"u"?queueMicrotask.bind(Ml):typeof process<"u"&&process.nextTick||ote,Vhe=t=>t!=null&&Jn(t[v0]),z={isArray:nh,isArrayBuffer:tte,isBuffer:Gp,isFormData:mhe,isArrayBufferView:ohe,isString:ahe,isNumber:rte,isBoolean:lhe,isObject:Yp,isPlainObject:Xg,isEmptyObject:che,isReadableStream:yhe,isRequest:vhe,isResponse:bhe,isHeaders:xhe,isUndefined:Pd,isDate:uhe,isFile:dhe,isBlob:hhe,isRegExp:Rhe,isFunction:Jn,isStream:phe,isURLSearchParams:ghe,isTypedArray:The,isFileList:fhe,forEach:Qp,merge:YP,extend:She,trim:whe,stripBOM:_he,inherits:Ehe,toFlatObject:Nhe,kindOf:b0,kindOfTest:ys,endsWith:Che,toArray:khe,forEachEntry:Ohe,matchAll:jhe,isHTMLForm:Phe,hasOwnProperty:fF,hasOwnProp:fF,reduceDescriptors:ste,freezeMethods:Mhe,toObjectSet:Ahe,toCamelCase:Ihe,noop:$he,toFiniteNumber:Dhe,findKey:nte,global:Ml,isContextDefined:ite,isSpecCompliantForm:Fhe,toJSONObject:qhe,isAsyncFn:Lhe,isThenable:Bhe,setImmediate:ote,asap:zhe,isIterable:Vhe};function Ue(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}z.inherits(Ue,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:z.toJSONObject(this.config),code:this.code,status:this.status}}});const ate=Ue.prototype,lte={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{lte[t]={value:t}});Object.defineProperties(Ue,lte);Object.defineProperty(ate,"isAxiosError",{value:!0});Ue.from=(t,e,r,n,i,s)=>{const o=Object.create(ate);z.toFlatObject(t,o,function(d){return d!==Error.prototype},c=>c!=="isAxiosError");const a=t&&t.message?t.message:"Error",l=e==null&&t?t.code:e;return Ue.call(o,a,l,r,n,i),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",s&&Object.assign(o,s),o};const Uhe=null;function QP(t){return z.isPlainObject(t)||z.isArray(t)}function cte(t){return z.endsWith(t,"[]")?t.slice(0,-2):t}function pF(t,e,r){return t?t.concat(e).map(function(i,s){return i=cte(i),!r&&s?"["+i+"]":i}).join(r?".":""):e}function Hhe(t){return z.isArray(t)&&!t.some(QP)}const Whe=z.toFlatObject(z,{},null,function(e){return/^is[A-Z]/.test(e)});function w0(t,e,r){if(!z.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=z.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,v){return!z.isUndefined(v[g])});const n=r.metaTokens,i=r.visitor||d,s=r.dots,o=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&z.isSpecCompliantForm(e);if(!z.isFunction(i))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(z.isDate(m))return m.toISOString();if(z.isBoolean(m))return m.toString();if(!l&&z.isBlob(m))throw new Ue("Blob is not supported. Use a Buffer instead.");return z.isArrayBuffer(m)||z.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,g,v){let y=m;if(m&&!v&&typeof m=="object"){if(z.endsWith(g,"{}"))g=n?g:g.slice(0,-2),m=JSON.stringify(m);else if(z.isArray(m)&&Hhe(m)||(z.isFileList(m)||z.endsWith(g,"[]"))&&(y=z.toArray(m)))return g=cte(g),y.forEach(function(w,x){!(z.isUndefined(w)||w===null)&&e.append(o===!0?pF([g],x,s):o===null?g:g+"[]",c(w))}),!1}return QP(m)?!0:(e.append(pF(v,g,s),c(m)),!1)}const h=[],f=Object.assign(Whe,{defaultVisitor:d,convertValue:c,isVisitable:QP});function p(m,g){if(!z.isUndefined(m)){if(h.indexOf(m)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(m),z.forEach(m,function(y,b){(!(z.isUndefined(y)||y===null)&&i.call(e,y,z.isString(b)?b.trim():b,g,f))===!0&&p(y,g?g.concat(b):[b])}),h.pop()}}if(!z.isObject(t))throw new TypeError("data must be an object");return p(t),e}function mF(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function uM(t,e){this._pairs=[],t&&w0(t,this,e)}const ute=uM.prototype;ute.append=function(e,r){this._pairs.push([e,r])};ute.toString=function(e){const r=e?function(n){return e.call(this,n,mF)}:mF;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function Khe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function dte(t,e,r){if(!e)return t;const n=r&&r.encode||Khe;z.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let s;if(i?s=i(e,r):s=z.isURLSearchParams(e)?e.toString():new uM(e,r).toString(n),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class gF{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){z.forEach(this.handlers,function(n){n!==null&&e(n)})}}const hte={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ghe=typeof URLSearchParams<"u"?URLSearchParams:uM,Yhe=typeof FormData<"u"?FormData:null,Qhe=typeof Blob<"u"?Blob:null,Xhe={isBrowser:!0,classes:{URLSearchParams:Ghe,FormData:Yhe,Blob:Qhe},protocols:["http","https","file","blob","url","data"]},dM=typeof window<"u"&&typeof document<"u",XP=typeof navigator=="object"&&navigator||void 0,Jhe=dM&&(!XP||["ReactNative","NativeScript","NS"].indexOf(XP.product)<0),Zhe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",efe=dM&&window.location.href||"http://localhost",tfe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:dM,hasStandardBrowserEnv:Jhe,hasStandardBrowserWebWorkerEnv:Zhe,navigator:XP,origin:efe},Symbol.toStringTag,{value:"Module"})),gn={...tfe,...Xhe};function rfe(t,e){return w0(t,new gn.classes.URLSearchParams,{visitor:function(r,n,i,s){return gn.isNode&&z.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function nfe(t){return z.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function ife(t){const e={},r=Object.keys(t);let n;const i=r.length;let s;for(n=0;n<i;n++)s=r[n],e[s]=t[s];return e}function fte(t){function e(r,n,i,s){let o=r[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=r.length;return o=!o&&z.isArray(i)?i.length:o,l?(z.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!a):((!i[o]||!z.isObject(i[o]))&&(i[o]=[]),e(r,n,i[o],s)&&z.isArray(i[o])&&(i[o]=ife(i[o])),!a)}if(z.isFormData(t)&&z.isFunction(t.entries)){const r={};return z.forEachEntry(t,(n,i)=>{e(nfe(n),i,r,0)}),r}return null}function sfe(t,e,r){if(z.isString(t))try{return(e||JSON.parse)(t),z.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const Xp={transitional:hte,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,s=z.isObject(e);if(s&&z.isHTMLForm(e)&&(e=new FormData(e)),z.isFormData(e))return i?JSON.stringify(fte(e)):e;if(z.isArrayBuffer(e)||z.isBuffer(e)||z.isStream(e)||z.isFile(e)||z.isBlob(e)||z.isReadableStream(e))return e;if(z.isArrayBufferView(e))return e.buffer;if(z.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return rfe(e,this.formSerializer).toString();if((a=z.isFileList(e))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return w0(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(r.setContentType("application/json",!1),sfe(e)):e}],transformResponse:[function(e){const r=this.transitional||Xp.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(z.isResponse(e)||z.isReadableStream(e))return e;if(e&&z.isString(e)&&(n&&!this.responseType||i)){const o=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?Ue.from(a,Ue.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:gn.classes.FormData,Blob:gn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};z.forEach(["delete","get","head","post","put","patch"],t=>{Xp.headers[t]={}});const ofe=z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),afe=t=>{const e={};let r,n,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),r=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!r||e[r]&&ofe[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},yF=Symbol("internals");function Kh(t){return t&&String(t).trim().toLowerCase()}function Jg(t){return t===!1||t==null?t:z.isArray(t)?t.map(Jg):String(t)}function lfe(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const cfe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function d1(t,e,r,n,i){if(z.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!z.isString(e)){if(z.isString(n))return e.indexOf(n)!==-1;if(z.isRegExp(n))return n.test(e)}}function ufe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function dfe(t,e){const r=z.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,s,o){return this[n].call(this,e,i,s,o)},configurable:!0})})}let Zn=class{constructor(e){e&&this.set(e)}set(e,r,n){const i=this;function s(a,l,c){const d=Kh(l);if(!d)throw new Error("header name must be a non-empty string");const h=z.findKey(i,d);(!h||i[h]===void 0||c===!0||c===void 0&&i[h]!==!1)&&(i[h||l]=Jg(a))}const o=(a,l)=>z.forEach(a,(c,d)=>s(c,d,l));if(z.isPlainObject(e)||e instanceof this.constructor)o(e,r);else if(z.isString(e)&&(e=e.trim())&&!cfe(e))o(afe(e),r);else if(z.isObject(e)&&z.isIterable(e)){let a={},l,c;for(const d of e){if(!z.isArray(d))throw TypeError("Object iterator must return a key-value pair");a[c=d[0]]=(l=a[c])?z.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}o(a,r)}else e!=null&&s(r,e,n);return this}get(e,r){if(e=Kh(e),e){const n=z.findKey(this,e);if(n){const i=this[n];if(!r)return i;if(r===!0)return lfe(i);if(z.isFunction(r))return r.call(this,i,n);if(z.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=Kh(e),e){const n=z.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||d1(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let i=!1;function s(o){if(o=Kh(o),o){const a=z.findKey(n,o);a&&(!r||d1(n,n[a],a,r))&&(delete n[a],i=!0)}}return z.isArray(e)?e.forEach(s):s(e),i}clear(e){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const s=r[n];(!e||d1(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const r=this,n={};return z.forEach(this,(i,s)=>{const o=z.findKey(n,s);if(o){r[o]=Jg(i),delete r[s];return}const a=e?ufe(s):String(s).trim();a!==s&&delete r[s],r[a]=Jg(i),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return z.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&z.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[yF]=this[yF]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Kh(o);n[a]||(dfe(i,o),n[a]=!0)}return z.isArray(e)?e.forEach(s):s(e),this}};Zn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);z.reduceDescriptors(Zn.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});z.freezeMethods(Zn);function h1(t,e){const r=this||Xp,n=e||r,i=Zn.from(n.headers);let s=n.data;return z.forEach(t,function(a){s=a.call(r,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function pte(t){return!!(t&&t.__CANCEL__)}function ih(t,e,r){Ue.call(this,t??"canceled",Ue.ERR_CANCELED,e,r),this.name="CanceledError"}z.inherits(ih,Ue,{__CANCEL__:!0});function mte(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new Ue("Request failed with status code "+r.status,[Ue.ERR_BAD_REQUEST,Ue.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function hfe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function ffe(t,e){t=t||10;const r=new Array(t),n=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=n[s];o||(o=c),r[i]=l,n[i]=c;let h=s,f=0;for(;h!==i;)f+=r[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const p=d&&c-d;return p?Math.round(f*1e3/p):void 0}}function pfe(t,e){let r=0,n=1e3/e,i,s;const o=(c,d=Date.now())=>{r=d,i=null,s&&(clearTimeout(s),s=null),t(...c)};return[(...c)=>{const d=Date.now(),h=d-r;h>=n?o(c,d):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},n-h)))},()=>i&&o(i)]}const Fy=(t,e,r=3)=>{let n=0;const i=ffe(50,250);return pfe(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-n,c=i(l),d=o<=a;n=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&d?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},r)},vF=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},bF=t=>(...e)=>z.asap(()=>t(...e)),mfe=gn.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,gn.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(gn.origin),gn.navigator&&/(msie|trident)/i.test(gn.navigator.userAgent)):()=>!0,gfe=gn.hasStandardBrowserEnv?{write(t,e,r,n,i,s,o){if(typeof document>"u")return;const a=[`${t}=${encodeURIComponent(e)}`];z.isNumber(r)&&a.push(`expires=${new Date(r).toUTCString()}`),z.isString(n)&&a.push(`path=${n}`),z.isString(i)&&a.push(`domain=${i}`),s===!0&&a.push("secure"),z.isString(o)&&a.push(`SameSite=${o}`),document.cookie=a.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function yfe(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function vfe(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function gte(t,e,r){let n=!yfe(e);return t&&(n||r==!1)?vfe(t,e):e}const xF=t=>t instanceof Zn?{...t}:t;function wc(t,e){e=e||{};const r={};function n(c,d,h,f){return z.isPlainObject(c)&&z.isPlainObject(d)?z.merge.call({caseless:f},c,d):z.isPlainObject(d)?z.merge({},d):z.isArray(d)?d.slice():d}function i(c,d,h,f){if(z.isUndefined(d)){if(!z.isUndefined(c))return n(void 0,c,h,f)}else return n(c,d,h,f)}function s(c,d){if(!z.isUndefined(d))return n(void 0,d)}function o(c,d){if(z.isUndefined(d)){if(!z.isUndefined(c))return n(void 0,c)}else return n(void 0,d)}function a(c,d,h){if(h in e)return n(c,d);if(h in t)return n(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d,h)=>i(xF(c),xF(d),h,!0)};return z.forEach(Object.keys({...t,...e}),function(d){const h=l[d]||i,f=h(t[d],e[d],d);z.isUndefined(f)&&h!==a||(r[d]=f)}),r}const yte=t=>{const e=wc({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;if(e.headers=o=Zn.from(o),e.url=dte(gte(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),z.isFormData(r)){if(gn.hasStandardBrowserEnv||gn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(z.isFunction(r.getHeaders)){const l=r.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([d,h])=>{c.includes(d.toLowerCase())&&o.set(d,h)})}}if(gn.hasStandardBrowserEnv&&(n&&z.isFunction(n)&&(n=n(e)),n||n!==!1&&mfe(e.url))){const l=i&&s&&gfe.read(s);l&&o.set(i,l)}return e},bfe=typeof XMLHttpRequest<"u",xfe=bfe&&function(t){return new Promise(function(r,n){const i=yte(t);let s=i.data;const o=Zn.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,d,h,f,p,m;function g(){p&&p(),m&&m(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let v=new XMLHttpRequest;v.open(i.method.toUpperCase(),i.url,!0),v.timeout=i.timeout;function y(){if(!v)return;const w=Zn.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),S={data:!a||a==="text"||a==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:w,config:t,request:v};mte(function(E){r(E),g()},function(E){n(E),g()},S),v=null}"onloadend"in v?v.onloadend=y:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(y)},v.onabort=function(){v&&(n(new Ue("Request aborted",Ue.ECONNABORTED,t,v)),v=null)},v.onerror=function(x){const S=x&&x.message?x.message:"Network Error",_=new Ue(S,Ue.ERR_NETWORK,t,v);_.event=x||null,n(_),v=null},v.ontimeout=function(){let x=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const S=i.transitional||hte;i.timeoutErrorMessage&&(x=i.timeoutErrorMessage),n(new Ue(x,S.clarifyTimeoutError?Ue.ETIMEDOUT:Ue.ECONNABORTED,t,v)),v=null},s===void 0&&o.setContentType(null),"setRequestHeader"in v&&z.forEach(o.toJSON(),function(x,S){v.setRequestHeader(S,x)}),z.isUndefined(i.withCredentials)||(v.withCredentials=!!i.withCredentials),a&&a!=="json"&&(v.responseType=i.responseType),c&&([f,m]=Fy(c,!0),v.addEventListener("progress",f)),l&&v.upload&&([h,p]=Fy(l),v.upload.addEventListener("progress",h),v.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(d=w=>{v&&(n(!w||w.type?new ih(null,t,v):w),v.abort(),v=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const b=hfe(i.url);if(b&&gn.protocols.indexOf(b)===-1){n(new Ue("Unsupported protocol "+b+":",Ue.ERR_BAD_REQUEST,t));return}v.send(s||null)})},wfe=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,i;const s=function(c){if(!i){i=!0,a();const d=c instanceof Error?c:this.reason;n.abort(d instanceof Ue?d:new ih(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,s(new Ue(`timeout ${e} of ms exceeded`,Ue.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:l}=n;return l.unsubscribe=()=>z.asap(a),l}},Sfe=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,i;for(;n<r;)i=n+e,yield t.slice(n,i),n=i},_fe=async function*(t,e){for await(const r of Efe(t))yield*Sfe(r,e)},Efe=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},wF=(t,e,r,n)=>{const i=_fe(t,e);let s=0,o,a=l=>{o||(o=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:d}=await i.next();if(c){a(),l.close();return}let h=d.byteLength;if(r){let f=s+=h;r(f)}l.enqueue(new Uint8Array(d))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},SF=64*1024,{isFunction:fg}=z,Nfe=(({Request:t,Response:e})=>({Request:t,Response:e}))(z.global),{ReadableStream:_F,TextEncoder:EF}=z.global,NF=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Cfe=t=>{t=z.merge.call({skipUndefined:!0},Nfe,t);const{fetch:e,Request:r,Response:n}=t,i=e?fg(e):typeof fetch=="function",s=fg(r),o=fg(n);if(!i)return!1;const a=i&&fg(_F),l=i&&(typeof EF=="function"?(m=>g=>m.encode(g))(new EF):async m=>new Uint8Array(await new r(m).arrayBuffer())),c=s&&a&&NF(()=>{let m=!1;const g=new r(gn.origin,{body:new _F,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!g}),d=o&&a&&NF(()=>z.isReadableStream(new n("").body)),h={stream:d&&(m=>m.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!h[m]&&(h[m]=(g,v)=>{let y=g&&g[m];if(y)return y.call(g);throw new Ue(`Response type '${m}' is not supported`,Ue.ERR_NOT_SUPPORT,v)})});const f=async m=>{if(m==null)return 0;if(z.isBlob(m))return m.size;if(z.isSpecCompliantForm(m))return(await new r(gn.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(z.isArrayBufferView(m)||z.isArrayBuffer(m))return m.byteLength;if(z.isURLSearchParams(m)&&(m=m+""),z.isString(m))return(await l(m)).byteLength},p=async(m,g)=>{const v=z.toFiniteNumber(m.getContentLength());return v??f(g)};return async m=>{let{url:g,method:v,data:y,signal:b,cancelToken:w,timeout:x,onDownloadProgress:S,onUploadProgress:_,responseType:E,headers:N,withCredentials:k="same-origin",fetchOptions:C}=yte(m),O=e||fetch;E=E?(E+"").toLowerCase():"text";let P=wfe([b,w&&w.toAbortSignal()],x),j=null;const A=P&&P.unsubscribe&&(()=>{P.unsubscribe()});let D;try{if(_&&c&&v!=="get"&&v!=="head"&&(D=await p(N,y))!==0){let H=new r(g,{method:"POST",body:y,duplex:"half"}),K;if(z.isFormData(y)&&(K=H.headers.get("content-type"))&&N.setContentType(K),H.body){const[de,be]=vF(D,Fy(bF(_)));y=wF(H.body,SF,de,be)}}z.isString(k)||(k=k?"include":"omit");const I=s&&"credentials"in r.prototype,L={...C,signal:P,method:v.toUpperCase(),headers:N.normalize().toJSON(),body:y,duplex:"half",credentials:I?k:void 0};j=s&&new r(g,L);let F=await(s?O(j,C):O(g,L));const W=d&&(E==="stream"||E==="response");if(d&&(S||W&&A)){const H={};["status","statusText","headers"].forEach(Fe=>{H[Fe]=F[Fe]});const K=z.toFiniteNumber(F.headers.get("content-length")),[de,be]=S&&vF(K,Fy(bF(S),!0))||[];F=new n(wF(F.body,SF,de,()=>{be&&be(),A&&A()}),H)}E=E||"text";let V=await h[z.findKey(h,E)||"text"](F,m);return!W&&A&&A(),await new Promise((H,K)=>{mte(H,K,{data:V,headers:Zn.from(F.headers),status:F.status,statusText:F.statusText,config:m,request:j})})}catch(I){throw A&&A(),I&&I.name==="TypeError"&&/Load failed|fetch/i.test(I.message)?Object.assign(new Ue("Network Error",Ue.ERR_NETWORK,m,j),{cause:I.cause||I}):Ue.from(I,I&&I.code,m,j)}}},kfe=new Map,vte=t=>{let e=t&&t.env||{};const{fetch:r,Request:n,Response:i}=e,s=[n,i,r];let o=s.length,a=o,l,c,d=kfe;for(;a--;)l=s[a],c=d.get(l),c===void 0&&d.set(l,c=a?new Map:Cfe(e)),d=c;return c};vte();const hM={http:Uhe,xhr:xfe,fetch:{get:vte}};z.forEach(hM,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const CF=t=>`- ${t}`,Tfe=t=>z.isFunction(t)||t===null||t===!1;function Ofe(t,e){t=z.isArray(t)?t:[t];const{length:r}=t;let n,i;const s={};for(let o=0;o<r;o++){n=t[o];let a;if(i=n,!Tfe(n)&&(i=hM[(a=String(n)).toLowerCase()],i===void 0))throw new Ue(`Unknown adapter '${a}'`);if(i&&(z.isFunction(i)||(i=i.get(e))))break;s[a||"#"+o]=i}if(!i){const o=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=r?o.length>1?`since :
`+o.map(CF).join(`
`):" "+CF(o[0]):"as no adapter specified";throw new Ue("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i}const bte={getAdapter:Ofe,adapters:hM};function f1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ih(null,t)}function kF(t){return f1(t),t.headers=Zn.from(t.headers),t.data=h1.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),bte.getAdapter(t.adapter||Xp.adapter,t)(t).then(function(n){return f1(t),n.data=h1.call(t,t.transformResponse,n),n.headers=Zn.from(n.headers),n},function(n){return pte(n)||(f1(t),n&&n.response&&(n.response.data=h1.call(t,t.transformResponse,n.response),n.response.headers=Zn.from(n.response.headers))),Promise.reject(n)})}const xte="1.13.2",S0={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{S0[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const TF={};S0.transitional=function(e,r,n){function i(s,o){return"[Axios v"+xte+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return(s,o,a)=>{if(e===!1)throw new Ue(i(o," has been removed"+(r?" in "+r:"")),Ue.ERR_DEPRECATED);return r&&!TF[o]&&(TF[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};S0.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function jfe(t,e,r){if(typeof t!="object")throw new Ue("options must be an object",Ue.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const s=n[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new Ue("option "+s+" must be "+l,Ue.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ue("Unknown option "+s,Ue.ERR_BAD_OPTION)}}const Zg={assertOptions:jfe,validators:S0},Ss=Zg.validators;let tc=class{constructor(e){this.defaults=e||{},this.interceptors={request:new gF,response:new gF}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=wc(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:s}=r;n!==void 0&&Zg.assertOptions(n,{silentJSONParsing:Ss.transitional(Ss.boolean),forcedJSONParsing:Ss.transitional(Ss.boolean),clarifyTimeoutError:Ss.transitional(Ss.boolean)},!1),i!=null&&(z.isFunction(i)?r.paramsSerializer={serialize:i}:Zg.assertOptions(i,{encode:Ss.function,serialize:Ss.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Zg.assertOptions(r,{baseUrl:Ss.spelling("baseURL"),withXsrfToken:Ss.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=s&&z.merge(s.common,s[r.method]);s&&z.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),r.headers=Zn.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let d,h=0,f;if(!l){const m=[kF.bind(this),void 0];for(m.unshift(...a),m.push(...c),f=m.length,d=Promise.resolve(r);h<f;)d=d.then(m[h++],m[h++]);return d}f=a.length;let p=r;for(;h<f;){const m=a[h++],g=a[h++];try{p=m(p)}catch(v){g.call(this,v);break}}try{d=kF.call(this,p)}catch(m){return Promise.reject(m)}for(h=0,f=c.length;h<f;)d=d.then(c[h++],c[h++]);return d}getUri(e){e=wc(this.defaults,e);const r=gte(e.baseURL,e.url,e.allowAbsoluteUrls);return dte(r,e.params,e.paramsSerializer)}};z.forEach(["delete","get","head","options"],function(e){tc.prototype[e]=function(r,n){return this.request(wc(n||{},{method:e,url:r,data:(n||{}).data}))}});z.forEach(["post","put","patch"],function(e){function r(n){return function(s,o,a){return this.request(wc(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}tc.prototype[e]=r(),tc.prototype[e+"Form"]=r(!0)});let Pfe=class wte{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{n.subscribe(a),s=a}).then(i);return o.cancel=function(){n.unsubscribe(s)},o},e(function(s,o,a){n.reason||(n.reason=new ih(s,o,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new wte(function(i){e=i}),cancel:e}}};function Ife(t){return function(r){return t.apply(null,r)}}function Rfe(t){return z.isObject(t)&&t.isAxiosError===!0}const JP={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(JP).forEach(([t,e])=>{JP[e]=t});function Ste(t){const e=new tc(t),r=Zee(tc.prototype.request,e);return z.extend(r,tc.prototype,e,{allOwnKeys:!0}),z.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return Ste(wc(t,i))},r}const gr=Ste(Xp);gr.Axios=tc;gr.CanceledError=ih;gr.CancelToken=Pfe;gr.isCancel=pte;gr.VERSION=xte;gr.toFormData=w0;gr.AxiosError=Ue;gr.Cancel=gr.CanceledError;gr.all=function(e){return Promise.all(e)};gr.spread=Ife;gr.isAxiosError=Rfe;gr.mergeConfig=wc;gr.AxiosHeaders=Zn;gr.formToJSON=t=>fte(z.isHTMLForm(t)?new FormData(t):t);gr.getAdapter=bte.getAdapter;gr.HttpStatusCode=JP;gr.default=gr;const{Axios:ZFe,AxiosError:e4e,CanceledError:t4e,isCancel:r4e,CancelToken:n4e,VERSION:i4e,all:s4e,Cancel:o4e,isAxiosError:a4e,spread:l4e,toFormData:c4e,AxiosHeaders:u4e,HttpStatusCode:d4e,formToJSON:h4e,getAdapter:f4e,mergeConfig:p4e}=gr,ZP=window.prmConfig||{},ce=gr.create({baseURL:ZP.apiUrl||"/wp-json",headers:{"Content-Type":"application/json","X-WP-Nonce":ZP.nonce||""}});ce.interceptors.request.use(t=>{var e;return(e=window.prmConfig)!=null&&e.nonce&&(t.headers["X-WP-Nonce"]=window.prmConfig.nonce),t});ce.interceptors.response.use(t=>t,t=>{var e,r;return((e=t.response)==null?void 0:e.status)===401&&(window.location.href=ZP.loginUrl||"/wp-login.php"),((r=t.response)==null?void 0:r.status)===403&&console.error("Access denied:",t.response.data),Promise.reject(t)});const He={getPeople:t=>ce.get("/wp/v2/people",{params:t}),getPerson:(t,e={})=>ce.get(`/wp/v2/people/${t}`,{params:e}),createPerson:t=>ce.post("/wp/v2/people",t),updatePerson:(t,e)=>ce.put(`/wp/v2/people/${t}`,e),deletePerson:(t,e={})=>ce.delete(`/wp/v2/people/${t}`,{params:e}),getCompanies:t=>ce.get("/wp/v2/companies",{params:t}),getCompany:(t,e={})=>ce.get(`/wp/v2/companies/${t}`,{params:e}),createCompany:t=>ce.post("/wp/v2/companies",t),updateCompany:(t,e)=>ce.put(`/wp/v2/companies/${t}`,e),deleteCompany:(t,e={})=>ce.delete(`/wp/v2/companies/${t}`,{params:e}),getDates:t=>ce.get("/wp/v2/important-dates",{params:t}),getDate:t=>ce.get(`/wp/v2/important-dates/${t}`),createDate:t=>ce.post("/wp/v2/important-dates",t),updateDate:(t,e)=>ce.put(`/wp/v2/important-dates/${t}`,e),deleteDate:t=>ce.delete(`/wp/v2/important-dates/${t}`),getPersonLabels:()=>ce.get("/wp/v2/person_label"),getCompanyLabels:()=>ce.get("/wp/v2/company_label"),getRelationshipTypes:()=>ce.get("/wp/v2/relationship_type",{params:{per_page:100,_fields:"id,name,slug,acf"}}),createRelationshipType:t=>ce.post("/wp/v2/relationship_type",t),updateRelationshipType:(t,e)=>ce.post(`/wp/v2/relationship_type/${t}`,e),deleteRelationshipType:t=>ce.delete(`/wp/v2/relationship_type/${t}?force=true`),restoreRelationshipTypeDefaults:()=>ce.post("/prm/v1/relationship-types/restore-defaults"),getDateTypes:()=>ce.get("/wp/v2/date_type",{params:{per_page:100}}),uploadMedia:t=>{const e=new FormData;return e.append("file",t),ce.post("/wp/v2/media",e,{headers:{"Content-Type":"multipart/form-data"}})}},Le={getDashboard:()=>ce.get("/prm/v1/dashboard"),sideloadGravatar:(t,e)=>ce.post(`/prm/v1/people/${t}/gravatar`,{email:e}),getCurrentUser:()=>ce.get("/prm/v1/user/me"),getUsers:()=>ce.get("/prm/v1/users"),approveUser:t=>ce.post(`/prm/v1/users/${t}/approve`),denyUser:t=>ce.post(`/prm/v1/users/${t}/deny`),deleteUser:t=>ce.delete(`/prm/v1/users/${t}`),search:t=>ce.get("/prm/v1/search",{params:{q:t}}),getReminders:(t=30)=>ce.get("/prm/v1/reminders",{params:{days_ahead:t}}),triggerReminders:()=>ce.post("/prm/v1/reminders/trigger"),rescheduleCronJobs:()=>ce.post("/prm/v1/reminders/reschedule-cron"),getNotificationChannels:()=>ce.get("/prm/v1/user/notification-channels"),updateNotificationChannels:t=>ce.post("/prm/v1/user/notification-channels",{channels:t}),updateSlackWebhook:t=>ce.post("/prm/v1/user/slack-webhook",{webhook:t}),updateNotificationTime:t=>ce.post("/prm/v1/user/notification-time",{time:t}),getSlackStatus:()=>ce.get("/prm/v1/user/slack-status"),disconnectSlack:()=>ce.post("/prm/v1/slack/disconnect"),getSlackChannels:()=>ce.get("/prm/v1/slack/channels"),getSlackTargets:()=>ce.get("/prm/v1/slack/targets"),updateSlackTargets:t=>ce.post("/prm/v1/slack/targets",{targets:t}),getPersonDates:t=>ce.get(`/prm/v1/people/${t}/dates`),getPersonTimeline:t=>ce.get(`/prm/v1/people/${t}/timeline`),getPersonNotes:t=>ce.get(`/prm/v1/people/${t}/notes`),createNote:(t,e)=>ce.post(`/prm/v1/people/${t}/notes`,{content:e}),updateNote:(t,e)=>ce.put(`/prm/v1/notes/${t}`,{content:e}),deleteNote:t=>ce.delete(`/prm/v1/notes/${t}`),getPersonActivities:t=>ce.get(`/prm/v1/people/${t}/activities`),createActivity:(t,e)=>ce.post(`/prm/v1/people/${t}/activities`,e),updateActivity:(t,e)=>ce.put(`/prm/v1/activities/${t}`,e),deleteActivity:t=>ce.delete(`/prm/v1/activities/${t}`),getAllTodos:(t=!1)=>ce.get("/prm/v1/todos",{params:{completed:t}}),getInvestments:t=>ce.get(`/prm/v1/investments/${t}`),getPersonTodos:t=>ce.get(`/prm/v1/people/${t}/todos`),createTodo:(t,e)=>ce.post(`/prm/v1/people/${t}/todos`,e),updateTodo:(t,e)=>ce.put(`/prm/v1/todos/${t}`,e),deleteTodo:t=>ce.delete(`/prm/v1/todos/${t}`),getCompanyPeople:t=>ce.get(`/prm/v1/companies/${t}/people`),setCompanyLogo:(t,e)=>ce.post(`/prm/v1/companies/${t}/logo`,{media_id:e}),uploadPersonPhoto:(t,e)=>{const r=new FormData;return r.append("file",e),ce.post(`/prm/v1/people/${t}/photo`,r,{headers:{"Content-Type":"multipart/form-data"}})},uploadCompanyLogo:(t,e)=>{const r=new FormData;return r.append("file",e),ce.post(`/prm/v1/companies/${t}/logo/upload`,r,{headers:{"Content-Type":"multipart/form-data"}})},getCardDAVUrls:()=>ce.get("/prm/v1/carddav/urls"),getAppPasswords:t=>ce.get(`/wp/v2/users/${t}/application-passwords`),createAppPassword:(t,e)=>ce.post(`/wp/v2/users/${t}/application-passwords`,{name:e}),deleteAppPassword:(t,e)=>ce.delete(`/wp/v2/users/${t}/application-passwords/${e}`)};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Mfe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Afe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ue=(t,e)=>{const r=T.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...c},d)=>T.createElement("svg",{ref:d,...Mfe,width:i,height:i,stroke:n,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${Afe(t)}`,a].join(" "),...c},[...e.map(([h,f])=>T.createElement(h,f)),...Array.isArray(l)?l:[l]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=ue("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $fe=ue("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dfe=ue("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=ue("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=ue("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ffe=ue("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qfe=ue("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lfe=ue("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=ue("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _te=ue("Cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h0.01",key:"hsw7lv"}],["path",{d:"M12 4h0.01",key:"1e3d8f"}],["path",{d:"M17 4h0.01",key:"p7cxgy"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=ue("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cf=ue("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=ue("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=ue("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eI=ue("CheckSquare2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=ue("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=ue("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tI=ue("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bfe=ue("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ete=ue("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zfe=ue("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nte=ue("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rI=ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=ue("FileCode",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m10 13-2 2 2 2",key:"17smn8"}],["path",{d:"m14 17 2-2-2-2",key:"14mezr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=ue("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=ue("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=ue("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vfe=ue("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=ue("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=ue("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ufe=ue("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hfe=ue("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cte=ue("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wfe=ue("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kfe=ue("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=ue("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gfe=ue("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yfe=ue("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=ue("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qfe=ue("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=ue("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xfe=ue("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jfe=ue("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=ue("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zfe=ue("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=ue("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=ue("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const epe=ue("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tpe=ue("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kte=ue("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=ue("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tte=ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rpe=ue("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ote=ue("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const npe=ue("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ipe=ue("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jte=ue("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pte=ue("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=ue("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=ue("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ite=ue("StickyNote",[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M15 3v6h6",key:"edgan2"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=ue("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const spe=ue("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ope=ue("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=ue("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ape=ue("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tl=ue("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=ue("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rte=ue("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=ue("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lpe=ue("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cpe=ue("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Nc="Caelis";function Hi(t){T.useEffect(()=>{var e;if(t){const r=((e=window.prmConfig)==null?void 0:e.siteName)||Nc;document.title=`${t} - ${r}`}},[t])}function upe(t){const e=t.match(/\/(?:people|companies|dates)\/(\d+)/);return e?e[1]:null}function Mte(t=null){const e=$o();T.useEffect(()=>{var i;let r=t;if(!r){const s=e.pathname,o=upe(s);s==="/"?r="Dashboard":s==="/login"?r="Login":s.startsWith("/people")?s==="/people"||s==="/people/"?r="People":s==="/people/new"?r="New person":s.endsWith("/edit")?r="Edit person":o?r="Person":r="People":s.startsWith("/companies")?s==="/companies"||s==="/companies/"?r="Organizations":s==="/companies/new"?r="New organization":s.endsWith("/edit")?r="Edit organization":o?r="Organization":r="Organizations":s.startsWith("/dates")?s==="/dates"||s==="/dates/"?r="Events":s==="/dates/new"?r="New date":s.endsWith("/edit")?r="Edit date":r="Events":s.startsWith("/settings")?r="Settings":r=Nc}const n=((i=window.prmConfig)==null?void 0:i.siteName)||Nc;document.title=`${r} - ${n}`},[e.pathname,t])}function dpe(){return ft({queryKey:["dashboard"],queryFn:async()=>(await Le.getDashboard()).data})}function hpe(t=30){return ft({queryKey:["reminders",t],queryFn:async()=>(await Le.getReminders(t)).data})}function Ate(t=!1){return ft({queryKey:["todos",t],queryFn:async()=>(await Le.getAllTodos(t)).data})}function $te(){const t=_t();return mt({mutationFn:({todoId:e,data:r})=>Le.updateTodo(e,r),onSuccess:()=>{t.invalidateQueries({queryKey:["todos"]}),t.invalidateQueries({queryKey:["dashboard"]})}})}function fpe(){const t=_t();return mt({mutationFn:e=>Le.deleteTodo(e),onSuccess:()=>{t.invalidateQueries({queryKey:["todos"]}),t.invalidateQueries({queryKey:["dashboard"]})}})}function ppe(t){const e=typeof t=="string"?t:"",r=e.length>=2;return ft({queryKey:["search",e],queryFn:async()=>r?(await Le.search(e)).data:{people:[],companies:[]},enabled:r})}function Kn(t){if(!t)return"";const e=document.createElement("textarea");return e.innerHTML=t,e.value}function sr(t){var r;if(!t)return"";const e=((r=t.title)==null?void 0:r.rendered)||t.title||t.name||"";return Kn(e)}function rc(t){var r,n;if(!t)return"";if(t.name&&typeof t.name=="string"&&!((r=t.title)!=null&&r.rendered))return Kn(t.name);const e=((n=t.title)==null?void 0:n.rendered)||t.title||t.name||"";return Kn(e)}function ua(t,e={}){const r=["gender"],n=["contact_info","addresses","work_history","relationships","photo_gallery"],i={...t};return r.forEach(s=>{i[s]===""&&(i[s]=null)}),n.forEach(s=>{Array.isArray(i[s])||(i[s]=[])}),Object.assign(i,e),i}const At={all:["people"],lists:()=>[...At.all,"list"],list:t=>[...At.lists(),t],details:()=>[...At.all,"detail"],detail:t=>[...At.details(),t],timeline:t=>[...At.detail(t),"timeline"],dates:t=>[...At.detail(t),"dates"]};function Dte(t){var i,s,o,a,l,c,d,h,f,p,m,g,v,y,b,w,x;const e=((o=(s=(i=t._embedded)==null?void 0:i["wp:featuredmedia"])==null?void 0:s[0])==null?void 0:o.source_url)||((f=(h=(d=(c=(l=(a=t._embedded)==null?void 0:a["wp:featuredmedia"])==null?void 0:l[0])==null?void 0:c.media_details)==null?void 0:d.sizes)==null?void 0:h.thumbnail)==null?void 0:f.source_url)||null,r=((v=(g=(m=(p=t._embedded)==null?void 0:p["wp:term"])==null?void 0:m.flat())==null?void 0:g.filter(S=>(S==null?void 0:S.taxonomy)==="person_label"))==null?void 0:v.map(S=>S.name))||[],n=Kn(((y=t.title)==null?void 0:y.rendered)||"");return{...t,id:t.id,name:n,first_name:((b=t.acf)==null?void 0:b.first_name)||"",last_name:((w=t.acf)==null?void 0:w.last_name)||"",is_favorite:((x=t.acf)==null?void 0:x.is_favorite)||!1,is_deceased:t.is_deceased||!1,birth_year:t.birth_year||null,modified:t.modified||null,thumbnail:e,labels:r}}function Vc(t={}){return ft({queryKey:At.list(t),queryFn:async()=>{const e=[];let r=1;const n=100;for(;;){const i=await He.getPeople({per_page:n,page:r,_embed:!0,...t}),s=i.data.map(Dte);if(e.push(...s),s.length<n)break;const o=parseInt(i.headers["x-wp-totalpages"]||i.headers["X-WP-TotalPages"]||"0",10);if(o>0&&r>=o)break;r++}return e}})}function sh(t){return ft({queryKey:At.detail(t),queryFn:async()=>{const e=await He.getPerson(t,{_embed:!0});return Dte(e.data)},enabled:!!t})}function mpe(t){return ft({queryKey:At.timeline(t),queryFn:async()=>(await Le.getPersonTimeline(t)).data,enabled:!!t})}function gpe(t){return ft({queryKey:At.dates(t),queryFn:async()=>(await Le.getPersonDates(t)).data,enabled:!!t})}function ype(){const t=_t();return mt({mutationFn:e=>He.createPerson(e),onSuccess:()=>{t.invalidateQueries({queryKey:At.lists()}),t.invalidateQueries({queryKey:["dashboard"]})}})}function Zp(){const t=_t();return mt({mutationFn:({id:e,data:r})=>He.updatePerson(e,r),onSuccess:(e,{id:r,data:n})=>{var i;t.invalidateQueries({queryKey:At.detail(r)}),t.invalidateQueries({queryKey:At.lists()}),t.invalidateQueries({queryKey:["dashboard"]}),(i=n==null?void 0:n.acf)!=null&&i.relationships&&(Array.isArray(n.acf.relationships)?n.acf.relationships:[]).forEach(o=>{const a=o.related_person;a&&t.invalidateQueries({queryKey:At.detail(a)})})}})}function vpe(){const t=_t();return mt({mutationFn:e=>He.deletePerson(e,{force:!0}),onSuccess:()=>{t.invalidateQueries({queryKey:At.lists()}),t.invalidateQueries({queryKey:At.details()}),t.invalidateQueries({queryKey:["dashboard"]})}})}function bpe(){const t=_t();return mt({mutationFn:({personId:e,content:r})=>Le.createNote(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:At.timeline(r)})}})}function xpe(){const t=_t();return mt({mutationFn:({noteId:e,personId:r})=>Le.deleteNote(e),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:At.timeline(r)})}})}function yM(){const t=_t();return mt({mutationFn:({personId:e,data:r})=>Le.createActivity(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:At.timeline(r)})}})}function wpe(){const t=_t();return mt({mutationFn:({activityId:e,data:r,personId:n})=>Le.updateActivity(e,r),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:At.timeline(r)})}})}function Spe(){const t=_t();return mt({mutationFn:({activityId:e,personId:r})=>Le.deleteActivity(e),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:At.timeline(r)})}})}function Fte(){const t=_t();return mt({mutationFn:({personId:e,data:r})=>Le.createTodo(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:At.timeline(r)})}})}function _pe(){const t=_t();return mt({mutationFn:({todoId:e,data:r,personId:n})=>Le.updateTodo(e,r),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:At.timeline(r)})}})}function Epe(){const t=_t();return mt({mutationFn:({todoId:e,personId:r})=>Le.deleteTodo(e),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:At.timeline(r)})}})}function Npe(){const t=_t();return mt({mutationFn:({dateId:e,personId:r})=>He.deleteDate(e),onSuccess:(e,{personId:r})=>{r&&(t.invalidateQueries({queryKey:At.dates(r)}),t.invalidateQueries({queryKey:At.detail(r)})),t.invalidateQueries({queryKey:["reminders"]})}})}function qte({isOpen:t,onClose:e}){const[r,n]=T.useState(""),[i,s]=T.useState(""),[o,a]=T.useState(""),[l,c]=T.useState(!1),[d,h]=T.useState(""),{data:f=[],isLoading:p}=Vc(),m=Fte(),g=_t(),v=T.useMemo(()=>{const _=d.toLowerCase().trim();let E=f;return _&&(E=f.filter(N=>{var k,C,O;return((k=N.name)==null?void 0:k.toLowerCase().includes(_))||((C=N.first_name)==null?void 0:C.toLowerCase().includes(_))||((O=N.last_name)==null?void 0:O.toLowerCase().includes(_))})),[...E].sort((N,k)=>(N.name||"").localeCompare(k.name||""))},[f,d]),y=T.useMemo(()=>f.find(_=>_.id===parseInt(o)),[f,o]),b=()=>new Date().toISOString().split("T")[0];if(T.useEffect(()=>{t&&(n(""),s(b()),a(""),h(""),c(!1))},[t]),!t)return null;const w=async _=>{if(_.preventDefault(),!(!r.trim()||!o))try{await m.mutateAsync({personId:parseInt(o),data:{content:r.trim(),due_date:i||null,is_completed:!1}}),g.invalidateQueries({queryKey:["todos"]}),e()}catch(E){console.error("Failed to create todo:",E)}},x=()=>{e()},S=_=>{if(!_)return"";try{return new Date(_).toISOString().split("T")[0]}catch{return""}};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Add todo"}),u.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600",disabled:m.isPending,children:u.jsx(Mr,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:w,className:"p-4",children:[u.jsxs("div",{className:"mb-4",children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Person ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("div",{className:"relative",children:[u.jsxs("button",{type:"button",onClick:()=>c(!l),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:m.isPending,children:[y?u.jsxs("div",{className:"flex items-center gap-2",children:[y.thumbnail?u.jsx("img",{src:y.thumbnail,alt:y.name,className:"w-6 h-6 rounded-full object-cover"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx(tl,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-gray-900",children:y.name})]}):u.jsx("span",{className:"text-gray-400",children:"Select a person..."}),u.jsx(qy,{className:`w-4 h-4 text-gray-400 transition-transform ${l?"rotate-180":""}`})]}),l&&u.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[u.jsx("div",{className:"p-2 border-b border-gray-100",children:u.jsxs("div",{className:"relative",children:[u.jsx(_c,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{type:"text",value:d,onChange:_=>h(_.target.value),placeholder:"Search people...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),u.jsx("div",{className:"overflow-y-auto max-h-48",children:p?u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):v.length>0?v.map(_=>u.jsxs("button",{type:"button",onClick:()=>{a(String(_.id)),c(!1),h("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${o===String(_.id)?"bg-primary-50":""}`,children:[_.thumbnail?u.jsx("img",{src:_.thumbnail,alt:_.name,className:"w-6 h-6 rounded-full object-cover"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx(tl,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-sm text-gray-900 truncate",children:_.name})]},_.id)):u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"No people found"})})]})]})]}),u.jsxs("div",{className:"mb-4",children:[u.jsxs("label",{htmlFor:"todo-content",className:"block text-sm font-medium text-gray-700 mb-2",children:["Description ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("textarea",{id:"todo-content",value:r,onChange:_=>n(_.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"What needs to be done?",disabled:m.isPending})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"todo-due-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Due date (optional)"}),u.jsx("input",{id:"todo-due-date",type:"date",value:S(i),onChange:_=>s(_.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:m.isPending})]}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:x,className:"btn-secondary",disabled:m.isPending,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:m.isPending||!r.trim()||!o,children:m.isPending?"Adding...":"Add todo"})]})]})]})})}const Cpe=[{name:"Dashboard",href:"/",icon:Hfe},{name:"People",href:"/people",icon:qs},{name:"Organizations",href:"/companies",icon:Rr},{name:"Dates",href:"/dates",icon:mo},{name:"Todos",href:"/todos",icon:Fs},{name:"Settings",href:"/settings",icon:Tte}];function RF({mobile:t=!1,onClose:e}){const{logoutUrl:r}=lM();return u.jsxs("div",{className:"flex flex-col h-full bg-white border-r border-gray-200",children:[u.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[u.jsxs(ge,{to:"/",className:"flex items-center gap-2 text-xl font-bold text-primary-600",children:[u.jsx(jte,{className:"w-5 h-5"}),Nc]}),t&&u.jsx("button",{onClick:e,className:"p-2 -mr-2",children:u.jsx(Mr,{className:"w-5 h-5"})})]}),u.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1 overflow-y-auto",children:Cpe.map(n=>u.jsxs(Cde,{to:n.href,onClick:t?e:void 0,className:({isActive:i})=>`flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${i?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-50"}`,children:[u.jsx(n.icon,{className:"w-5 h-5 mr-3"}),n.name]},n.name))}),u.jsx("div",{className:"p-4 border-t border-gray-200",children:u.jsxs("a",{href:r,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[u.jsx(Qfe,{className:"w-5 h-5 mr-3"}),"Log Out"]})})]})}function kpe(){var o;const[t,e]=T.useState(!1),r=T.useRef(null),{data:n,isLoading:i}=ft({queryKey:["current-user"],queryFn:async()=>(await Le.getCurrentUser()).data});if(T.useEffect(()=>{const a=l=>{r.current&&!r.current.contains(l.target)&&e(!1)};if(t)return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[t]),i||!n)return u.jsx("div",{className:"flex items-center ml-auto",children:u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full animate-pulse"})});const s=((o=n.name)==null?void 0:o.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2))||"?";return u.jsxs("div",{className:"relative ml-auto",ref:r,children:[u.jsxs("button",{onClick:()=>e(!t),className:"flex items-center gap-2 p-1 rounded-full hover:bg-gray-100 transition-colors","aria-label":"User menu",children:[n.avatar_url?u.jsx("img",{src:n.avatar_url,alt:n.name,className:"w-8 h-8 rounded-full object-cover"}):u.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-sm font-medium text-primary-700",children:s})}),u.jsx(qy,{className:`w-4 h-4 text-gray-500 transition-transform ${t?"rotate-180":""}`})]}),t&&u.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:u.jsxs("div",{className:"py-1",children:[u.jsxs("a",{href:n.profile_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>e(!1),children:[u.jsx(tl,{className:"w-4 h-4 mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Edit profile"})]}),n.is_admin&&u.jsxs("a",{href:n.admin_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>e(!1),children:[u.jsx(Tte,{className:"w-4 h-4 mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"WordPress admin"})]})]})})]})}function Tpe({isOpen:t,onClose:e}){const[r,n]=T.useState(""),[i,s]=T.useState(0),o=$n(),a=T.useRef(null),l=r.trim(),{data:c,isLoading:d}=ppe(l),h=c||{people:[],companies:[]},f=[...(h.people||[]).map(y=>({...y,type:"person"})),...(h.companies||[]).map(y=>({...y,type:"company"}))],p=f.length>0,m=r.trim().length>=2;T.useEffect(()=>{t&&(n(""),s(0),setTimeout(()=>{var y;return(y=a.current)==null?void 0:y.focus()},50))},[t]),T.useEffect(()=>{s(0)},[c]);const g=y=>{if(y.key==="Escape"){e();return}if(!(!m||!p)){if(y.key==="ArrowDown")y.preventDefault(),s(b=>Math.min(b+1,f.length-1));else if(y.key==="ArrowUp")y.preventDefault(),s(b=>Math.max(b-1,0));else if(y.key==="Enter"){y.preventDefault();const b=f[i];b&&v(b.type,b.id)}}},v=(y,b)=>{e(),y==="person"?o(`/people/${b}`):y==="company"&&o(`/companies/${b}`)};return t?u.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:e}),u.jsx("div",{className:"relative min-h-screen flex items-start justify-center pt-[15vh] px-4",children:u.jsxs("div",{className:"relative w-full max-w-xl bg-white rounded-xl shadow-2xl overflow-hidden",children:[u.jsxs("div",{className:"flex items-center px-4 border-b border-gray-200",children:[u.jsx(_c,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),u.jsx("input",{ref:a,type:"text",value:r,onChange:y=>n(y.target.value),onKeyDown:g,placeholder:"Search people & organizations...",className:"flex-1 px-4 py-4 text-lg outline-none placeholder:text-gray-400",autoComplete:"off"}),u.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[u.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-gray-500 font-mono",children:"esc"}),u.jsx("span",{children:"to close"})]})]}),u.jsx("div",{className:"max-h-96 overflow-y-auto",children:m?d?u.jsxs("div",{className:"px-4 py-8 text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),u.jsx("p",{className:"mt-3 text-sm text-gray-500",children:"Searching..."})]}):p?u.jsxs("div",{className:"py-2",children:[h.people&&h.people.length>0&&u.jsxs("div",{className:"px-2",children:[u.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"People"}),h.people.map((y,b)=>{const x=i===b;return u.jsxs("button",{onClick:()=>v("person",y.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors text-left ${x?"bg-primary-50 text-primary-900":"hover:bg-gray-50"}`,children:[y.thumbnail?u.jsx("img",{src:y.thumbnail,alt:y.name,className:"w-8 h-8 rounded-full object-cover"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx(tl,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-sm font-medium flex-1 truncate",children:y.name}),x&&u.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:""})]},y.id)})]}),h.companies&&h.companies.length>0&&u.jsxs("div",{className:"px-2 mt-2",children:[u.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Organizations"}),h.companies.map((y,b)=>{var S;const w=(((S=h.people)==null?void 0:S.length)||0)+b,x=i===w;return u.jsxs("button",{onClick:()=>v("company",y.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors text-left ${x?"bg-primary-50 text-primary-900":"hover:bg-gray-50"}`,children:[y.thumbnail?u.jsx("img",{src:y.thumbnail,alt:y.name,className:"w-8 h-8 rounded object-contain bg-white"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded flex items-center justify-center",children:u.jsx(Rr,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-sm font-medium flex-1 truncate",children:y.name}),x&&u.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:""})]},y.id)})]})]}):u.jsx("div",{className:"px-4 py-8 text-center text-gray-500",children:u.jsxs("p",{className:"text-sm",children:['No results found for "',r,'"']})}):u.jsxs("div",{className:"px-4 py-8 text-center text-gray-500",children:[u.jsx(_c,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),u.jsx("p",{className:"text-sm",children:"Type at least 2 characters to search"})]})}),u.jsx("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-xs text-gray-500",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),u.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),u.jsx("span",{children:"to navigate"})]}),u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),u.jsx("span",{children:"to select"})]})]})})]})})]}):null}function Ope({onAddTodo:t}){const[e,r]=T.useState(!1),n=T.useRef(null),i=$n();T.useEffect(()=>{const a=l=>{n.current&&!n.current.contains(l.target)&&r(!1)};if(e)return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[e]);const s=a=>{r(!1),i(a)},o=()=>{r(!1),t()};return u.jsxs("div",{className:"relative",ref:n,children:[u.jsx("button",{onClick:()=>r(!e),className:"flex items-center justify-center w-9 h-9 rounded-lg bg-primary-600 hover:bg-primary-700 text-white transition-colors","aria-label":"Quick add",title:"Quick add",children:u.jsx(lr,{className:"w-5 h-5"})}),e&&u.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:u.jsxs("div",{className:"py-1",children:[u.jsxs("button",{onClick:()=>s("/people/new"),className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[u.jsx(tl,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Person"]}),u.jsxs("button",{onClick:()=>s("/companies/new"),className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[u.jsx(Rr,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Organization"]}),u.jsxs("button",{onClick:o,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[u.jsx(Fs,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Todo"]}),u.jsxs("button",{onClick:()=>s("/dates/new"),className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[u.jsx(mo,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Date"]})]})})]})}function jpe({onMenuClick:t,onAddTodo:e,onOpenSearch:r}){const n=$o(),i=()=>{const s=n.pathname;return s==="/"?"Dashboard":s.startsWith("/people")?"People":s.startsWith("/companies")?"Organizations":s.startsWith("/dates")?"Important Dates":s.startsWith("/todos")?"Todos":s.startsWith("/settings")?"Settings":""};return u.jsxs("header",{className:"sticky top-0 z-10 flex items-center h-16 px-4 bg-white border-b border-gray-200 lg:px-6",children:[u.jsx("button",{onClick:t,className:"p-2 -ml-2 lg:hidden",children:u.jsx(Jfe,{className:"w-5 h-5"})}),u.jsx("h1",{className:"ml-2 text-lg font-semibold lg:ml-0",children:i()}),u.jsx("div",{className:"flex-1"}),u.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg border border-gray-200 hover:bg-gray-50 text-gray-500 transition-colors","aria-label":"Search",title:"Search (K)",children:[u.jsx(_c,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden sm:inline text-sm",children:"Search..."}),u.jsxs("kbd",{className:"hidden sm:flex items-center gap-0.5 px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:[u.jsx(zfe,{className:"w-3 h-3"}),"K"]})]}),u.jsx("div",{className:"ml-2",children:u.jsx(Ope,{onAddTodo:e})}),u.jsx("div",{className:"ml-2",children:u.jsx(kpe,{})})]})}function Ppe({children:t}){const[e,r]=T.useState(!1),[n,i]=T.useState(!1),[s,o]=T.useState(!1);return Mte(),T.useEffect(()=>{const a=l=>{(l.metaKey||l.ctrlKey)&&l.key==="k"&&(l.preventDefault(),o(!0))};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[]),u.jsxs("div",{className:"flex h-screen bg-gray-50",children:[u.jsx("div",{className:"hidden lg:flex lg:w-64 lg:flex-col",children:u.jsx(RF,{})}),e&&u.jsxs("div",{className:"fixed inset-0 z-40 lg:hidden",children:[u.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>r(!1)}),u.jsx("div",{className:"fixed inset-y-0 left-0 flex flex-col w-64 bg-white",children:u.jsx(RF,{mobile:!0,onClose:()=>r(!1)})})]}),u.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[u.jsx(jpe,{onMenuClick:()=>r(!0),onAddTodo:()=>i(!0),onOpenSearch:()=>o(!0)}),u.jsx("main",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:t})]}),u.jsx(Tpe,{isOpen:s,onClose:()=>o(!1)}),u.jsx(qte,{isOpen:n,onClose:()=>i(!1)})]})}function ct(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Io(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Ipe(t,e){const r=ct(t);return isNaN(e)?Io(t,NaN):(e&&r.setDate(r.getDate()+e),r)}const Lte=6048e5,Rpe=864e5,Bte=6e4,zte=36e5,pg=43200,MF=1440;let Mpe={};function em(){return Mpe}function Cc(t,e){var a,l,c,d;const r=em(),n=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((d=(c=r.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,i=ct(t),s=i.getDay(),o=(s<n?7:0)+s-n;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function By(t){return Cc(t,{weekStartsOn:1})}function Vte(t){const e=ct(t),r=e.getFullYear(),n=Io(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=By(n),s=Io(t,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=By(s);return e.getTime()>=i.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function zy(t){const e=ct(t);return e.setHours(0,0,0,0),e}function Vy(t){const e=ct(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function Ape(t,e){const r=zy(t),n=zy(e),i=+r-Vy(r),s=+n-Vy(n);return Math.round((i-s)/Rpe)}function $pe(t){const e=Vte(t),r=Io(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),By(r)}function ed(t,e){const r=ct(t),n=ct(e),i=r.getTime()-n.getTime();return i<0?-1:i>0?1:i}function N0(t){return Io(t,Date.now())}function Ute(t,e){const r=zy(t),n=zy(e);return+r==+n}function Dpe(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Fpe(t){if(!Dpe(t)&&typeof t!="number")return!1;const e=ct(t);return!isNaN(Number(e))}function qpe(t,e){const r=ct(t),n=ct(e),i=r.getFullYear()-n.getFullYear(),s=r.getMonth()-n.getMonth();return i*12+s}function Lpe(t,e){const r=ct(t),n=ct(e);return r.getFullYear()-n.getFullYear()}function Bpe(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function zpe(t,e){return+ct(t)-+ct(e)}function Vpe(t){const e=ct(t);return e.setHours(23,59,59,999),e}function Upe(t){const e=ct(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function Hpe(t){const e=ct(t);return+Vpe(e)==+Upe(e)}function Wpe(t,e){const r=ct(t),n=ct(e),i=ed(r,n),s=Math.abs(qpe(r,n));let o;if(s<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*s);let a=ed(r,n)===-i;Hpe(ct(t))&&s===1&&ed(t,n)===1&&(a=!1),o=i*(s-Number(a))}return o===0?0:o}function Kpe(t,e,r){const n=zpe(t,e)/1e3;return Bpe(r==null?void 0:r.roundingMethod)(n)}function m1(t,e){const r=ct(t),n=ct(e),i=ed(r,n),s=Math.abs(Lpe(r,n));r.setFullYear(1584),n.setFullYear(1584);const o=ed(r,n)===-i,a=i*(s-+o);return a===0?0:a}function Gpe(t){const e=ct(t),r=Io(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Ype={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Qpe=(t,e,r)=>{let n;const i=Ype[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function g1(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const Xpe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Jpe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Zpe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},eme={date:g1({formats:Xpe,defaultWidth:"full"}),time:g1({formats:Jpe,defaultWidth:"full"}),dateTime:g1({formats:Zpe,defaultWidth:"full"})},tme={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},rme=(t,e,r,n)=>tme[t];function Gh(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let i;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=r!=null&&r.width?String(r.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=r!=null&&r.width?String(r.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const nme={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ime={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},sme={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ome={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ame={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},lme={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},cme=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},ume={ordinalNumber:cme,era:Gh({values:nme,defaultWidth:"wide"}),quarter:Gh({values:ime,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Gh({values:sme,defaultWidth:"wide"}),day:Gh({values:ome,defaultWidth:"wide"}),dayPeriod:Gh({values:ame,defaultWidth:"wide",formattingValues:lme,defaultFormattingWidth:"wide"})};function Yh(t){return(e,r={})=>{const n=r.width,i=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?hme(a,h=>h.test(o)):dme(a,h=>h.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c;const d=e.slice(o.length);return{value:c,rest:d}}}function dme(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function hme(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function fme(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const i=n[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const pme=/^(\d+)(th|st|nd|rd)?/i,mme=/\d+/i,gme={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},yme={any:[/^b/i,/^(a|c)/i]},vme={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},bme={any:[/1/i,/2/i,/3/i,/4/i]},xme={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},wme={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Sme={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},_me={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Eme={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Nme={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Cme={ordinalNumber:fme({matchPattern:pme,parsePattern:mme,valueCallback:t=>parseInt(t,10)}),era:Yh({matchPatterns:gme,defaultMatchWidth:"wide",parsePatterns:yme,defaultParseWidth:"any"}),quarter:Yh({matchPatterns:vme,defaultMatchWidth:"wide",parsePatterns:bme,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Yh({matchPatterns:xme,defaultMatchWidth:"wide",parsePatterns:wme,defaultParseWidth:"any"}),day:Yh({matchPatterns:Sme,defaultMatchWidth:"wide",parsePatterns:_me,defaultParseWidth:"any"}),dayPeriod:Yh({matchPatterns:Eme,defaultMatchWidth:"any",parsePatterns:Nme,defaultParseWidth:"any"})},Hte={code:"en-US",formatDistance:Qpe,formatLong:eme,formatRelative:rme,localize:ume,match:Cme,options:{weekStartsOn:0,firstWeekContainsDate:1}};function kme(t){const e=ct(t);return Ape(e,Gpe(e))+1}function Tme(t){const e=ct(t),r=+By(e)-+$pe(e);return Math.round(r/Lte)+1}function Wte(t,e){var d,h,f,p;const r=ct(t),n=r.getFullYear(),i=em(),s=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(f=i.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=Io(t,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const a=Cc(o,e),l=Io(t,0);l.setFullYear(n,0,s),l.setHours(0,0,0,0);const c=Cc(l,e);return r.getTime()>=a.getTime()?n+1:r.getTime()>=c.getTime()?n:n-1}function Ome(t,e){var a,l,c,d;const r=em(),n=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(c=r.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,i=Wte(t,e),s=Io(t,0);return s.setFullYear(i,0,n),s.setHours(0,0,0,0),Cc(s,e)}function jme(t,e){const r=ct(t),n=+Cc(r,e)-+Ome(r,e);return Math.round(n/Lte)+1}function xt(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const Ko={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return xt(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):xt(r+1,2)},d(t,e){return xt(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return xt(t.getHours()%12||12,e.length)},H(t,e){return xt(t.getHours(),e.length)},m(t,e){return xt(t.getMinutes(),e.length)},s(t,e){return xt(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return xt(i,e.length)}},gu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},AF={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return Ko.y(t,e)},Y:function(t,e,r,n){const i=Wte(t,n),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return xt(o,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):xt(s,e.length)},R:function(t,e){const r=Vte(t);return xt(r,e.length)},u:function(t,e){const r=t.getFullYear();return xt(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return xt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return xt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return Ko.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return xt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const i=jme(t,n);return e==="wo"?r.ordinalNumber(i,{unit:"week"}):xt(i,e.length)},I:function(t,e,r){const n=Tme(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):xt(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):Ko.d(t,e)},D:function(t,e,r){const n=kme(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):xt(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return xt(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return xt(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return xt(i,e.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let i;switch(n===12?i=gu.noon:n===0?i=gu.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let i;switch(n>=17?i=gu.evening:n>=12?i=gu.afternoon:n>=4?i=gu.morning:i=gu.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Ko.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):Ko.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):xt(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):xt(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ko.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):Ko.s(t,e)},S:function(t,e){return Ko.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return DF(n);case"XXXX":case"XX":return Tl(n);case"XXXXX":case"XXX":default:return Tl(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return DF(n);case"xxxx":case"xx":return Tl(n);case"xxxxx":case"xxx":default:return Tl(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+$F(n,":");case"OOOO":default:return"GMT"+Tl(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+$F(n,":");case"zzzz":default:return"GMT"+Tl(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return xt(n,e.length)},T:function(t,e,r){const n=t.getTime();return xt(n,e.length)}};function $F(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Math.trunc(n/60),s=n%60;return s===0?r+String(i):r+String(i)+e+xt(s,2)}function DF(t,e){return t%60===0?(t>0?"-":"+")+xt(Math.abs(t)/60,2):Tl(t,e)}function Tl(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=xt(Math.trunc(n/60),2),s=xt(n%60,2);return r+i+e+s}const FF=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Kte=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Pme=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return FF(t,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",FF(n,e)).replace("{{time}}",Kte(i,e))},Ime={p:Kte,P:Pme},Rme=/^D+$/,Mme=/^Y+$/,Ame=["D","DD","YY","YYYY"];function $me(t){return Rme.test(t)}function Dme(t){return Mme.test(t)}function Fme(t,e,r){const n=qme(t,e,r);if(console.warn(n),Ame.includes(t))throw new RangeError(n)}function qme(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Lme=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Bme=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,zme=/^'([^]*?)'?$/,Vme=/''/g,Ume=/[a-zA-Z]/;function Nn(t,e,r){var d,h,f,p;const n=em(),i=n.locale??Hte,s=n.firstWeekContainsDate??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,o=n.weekStartsOn??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,a=ct(t);if(!Fpe(a))throw new RangeError("Invalid time value");let l=e.match(Bme).map(m=>{const g=m[0];if(g==="p"||g==="P"){const v=Ime[g];return v(m,i.formatLong)}return m}).join("").match(Lme).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const g=m[0];if(g==="'")return{isToken:!1,value:Hme(m)};if(AF[g])return{isToken:!0,value:m};if(g.match(Ume))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:m}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(m=>{if(!m.isToken)return m.value;const g=m.value;(Dme(g)||$me(g))&&Fme(g,e,String(t));const v=AF[g[0]];return v(a,g,i.localize,c)}).join("")}function Hme(t){const e=t.match(zme);return e?e[1].replace(Vme,"'"):t}function Wme(t,e,r){const n=em(),i=(r==null?void 0:r.locale)??n.locale??Hte,s=2520,o=ed(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const a=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let l,c;o>0?(l=ct(e),c=ct(t)):(l=ct(t),c=ct(e));const d=Kpe(c,l),h=(Vy(c)-Vy(l))/1e3,f=Math.round((d-h)/60);let p;if(f<2)return r!=null&&r.includeSeconds?d<5?i.formatDistance("lessThanXSeconds",5,a):d<10?i.formatDistance("lessThanXSeconds",10,a):d<20?i.formatDistance("lessThanXSeconds",20,a):d<40?i.formatDistance("halfAMinute",0,a):d<60?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",1,a):f===0?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",f,a);if(f<45)return i.formatDistance("xMinutes",f,a);if(f<90)return i.formatDistance("aboutXHours",1,a);if(f<MF){const m=Math.round(f/60);return i.formatDistance("aboutXHours",m,a)}else{if(f<s)return i.formatDistance("xDays",1,a);if(f<pg){const m=Math.round(f/MF);return i.formatDistance("xDays",m,a)}else if(f<pg*2)return p=Math.round(f/pg),i.formatDistance("aboutXMonths",p,a)}if(p=Wpe(c,l),p<12){const m=Math.round(f/pg);return i.formatDistance("xMonths",m,a)}else{const m=p%12,g=Math.trunc(p/12);return m<3?i.formatDistance("aboutXYears",g,a):m<9?i.formatDistance("overXYears",g,a):i.formatDistance("almostXYears",g+1,a)}}function Kme(t,e){return Wme(t,N0(t),e)}function Gme(t,e){const r=ct(t),n=ct(e);return r.getTime()>n.getTime()}function Yme(t,e,r){const n=Cc(t,r),i=Cc(e,r);return+n==+i}function Qme(t,e){return Yme(t,N0(t),e)}function Gte(t){return Ute(t,N0(t))}function Yte(t,e){return Ipe(t,-e)}function Qte(t){return Ute(t,Yte(N0(t),1))}function dp(t,e){const n=ege(t);let i;if(n.date){const l=tge(n.date,2);i=rge(l.restDateString,l.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const s=i.getTime();let o=0,a;if(n.time&&(o=nge(n.time),isNaN(o)))return new Date(NaN);if(n.timezone){if(a=ige(n.timezone),isNaN(a))return new Date(NaN)}else{const l=new Date(s+o),c=new Date(0);return c.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),c.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),c}return new Date(s+o+a)}const mg={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Xme=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Jme=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Zme=/^([+-])(\d{2})(?::?(\d{2}))?$/;function ege(t){const e={},r=t.split(mg.dateTimeDelimiter);let n;if(r.length>2)return e;if(/:/.test(r[0])?n=r[0]:(e.date=r[0],n=r[1],mg.timeZoneDelimiter.test(e.date)&&(e.date=t.split(mg.timeZoneDelimiter)[0],n=t.substr(e.date.length,t.length))),n){const i=mg.timezone.exec(n);i?(e.time=n.replace(i[1],""),e.timezone=i[1]):e.time=n}return e}function tge(t,e){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=t.match(r);if(!n)return{year:NaN,restDateString:""};const i=n[1]?parseInt(n[1]):null,s=n[2]?parseInt(n[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((n[1]||n[2]).length)}}function rge(t,e){if(e===null)return new Date(NaN);const r=t.match(Xme);if(!r)return new Date(NaN);const n=!!r[4],i=Qh(r[1]),s=Qh(r[2])-1,o=Qh(r[3]),a=Qh(r[4]),l=Qh(r[5])-1;if(n)return cge(e,a,l)?sge(e,a,l):new Date(NaN);{const c=new Date(0);return!age(e,s,o)||!lge(e,i)?new Date(NaN):(c.setUTCFullYear(e,s,Math.max(i,o)),c)}}function Qh(t){return t?parseInt(t):1}function nge(t){const e=t.match(Jme);if(!e)return NaN;const r=y1(e[1]),n=y1(e[2]),i=y1(e[3]);return uge(r,n,i)?r*zte+n*Bte+i*1e3:NaN}function y1(t){return t&&parseFloat(t.replace(",","."))||0}function ige(t){if(t==="Z")return 0;const e=t.match(Zme);if(!e)return 0;const r=e[1]==="+"?-1:1,n=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return dge(n,i)?r*(n*zte+i*Bte):NaN}function sge(t,e,r){const n=new Date(0);n.setUTCFullYear(t,0,4);const i=n.getUTCDay()||7,s=(e-1)*7+r+1-i;return n.setUTCDate(n.getUTCDate()+s),n}const oge=[31,null,31,30,31,30,31,31,30,31,30,31];function Xte(t){return t%400===0||t%4===0&&t%100!==0}function age(t,e,r){return e>=0&&e<=11&&r>=1&&r<=(oge[e]||(Xte(t)?29:28))}function lge(t,e){return e>=1&&e<=(Xte(t)?366:365)}function cge(t,e,r){return e>=1&&e<=53&&r>=0&&r<=6}function uge(t,e,r){return t===24?e===0&&r===0:r>=0&&r<60&&e>=0&&e<60&&t>=0&&t<25}function dge(t,e){return e>=0&&e<=59}function hge(t){if(!t||t.length===0)return{todos:[],today:[],yesterday:[],thisWeek:[],older:[]};const e={todos:[],today:[],yesterday:[],thisWeek:[],older:[]};return t.forEach(r=>{if(r.type==="todo"){e.todos.push(r);return}dp(r.created);let n=r.activity_date||r.created;r.activity_date&&r.activity_time&&(n=`${r.activity_date}T${r.activity_time}`);const i=dp(n);Gte(i)?e.today.push(r):Qte(i)?e.yesterday.push(r):Qme(i)?e.thisWeek.push(r):e.older.push(r)}),e.todos.sort((r,n)=>{if(r.is_completed&&!n.is_completed)return 1;if(!r.is_completed&&n.is_completed)return-1;if(!r.is_completed&&!n.is_completed){if(r.due_date&&n.due_date)return new Date(r.due_date)-new Date(n.due_date);if(r.due_date&&!n.due_date)return-1;if(!r.due_date&&n.due_date)return 1}return new Date(n.created)-new Date(r.created)}),e}function fge(t){if(!t)return"";try{const e=dp(t),r=t.includes("T")&&t.length>10,n=r?" at HH:mm":"";return Gte(e)?Kme(e,{addSuffix:!0}):Qte(e)?r?Nn(e,"'Yesterday' 'at' HH:mm"):"Yesterday":Nn(e,r?"MMM d, yyyy 'at' HH:mm":"MMM d, yyyy")}catch{return t}}function pge(t){return{call:"Phone",email:"Mail",chat:"MessageCircle",meeting:"Users",coffee:"Coffee",lunch:"Utensils",note:"FileText"}[t]||"Circle"}function mge(t){return{call:"Phone call",email:"Email",chat:"Chat",meeting:"Meeting",coffee:"Coffee",lunch:"Lunch",note:"Note"}[t]||t||"Activity"}function tm(t){if(!t.due_date||t.is_completed)return!1;try{const e=dp(t.due_date),r=new Date;return r.setHours(0,0,0,0),e.setHours(0,0,0,0),e<r}catch{return!1}}function gge(t){const e=[];return t.is_completed?e.push("opacity-60","line-through"):tm(t)&&e.push("text-red-600","font-medium"),e.join(" ")}function vM({isOpen:t,onClose:e,todo:r,onComplete:n,onCompleteAsActivity:i}){return!t||!r?null:u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Complete todo"}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:u.jsx(Mr,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"p-4",children:[u.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:['"',r.content,'"']}),u.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"How would you like to complete this todo?"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("button",{onClick:n,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-colors text-left",children:[u.jsx(Fs,{className:"w-5 h-5 text-primary-600 flex-shrink-0"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium text-gray-900",children:"Just complete"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Mark the todo as done"})]})]}),u.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors text-left",children:[u.jsx(_0,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium text-gray-900",children:"Complete & log activity"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Record this as an activity on the timeline"})]})]})]})]}),u.jsx("div",{className:"flex justify-end p-4 border-t bg-gray-50 rounded-b-lg",children:u.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancel"})})]})})}var Jte={exports:{}},Zte={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ad=T;function yge(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vge=typeof Object.is=="function"?Object.is:yge,bge=Ad.useState,xge=Ad.useEffect,wge=Ad.useLayoutEffect,Sge=Ad.useDebugValue;function _ge(t,e){var r=e(),n=bge({inst:{value:r,getSnapshot:e}}),i=n[0].inst,s=n[1];return wge(function(){i.value=r,i.getSnapshot=e,v1(i)&&s({inst:i})},[t,r,e]),xge(function(){return v1(i)&&s({inst:i}),t(function(){v1(i)&&s({inst:i})})},[t]),Sge(r),r}function v1(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!vge(t,r)}catch{return!0}}function Ege(t,e){return e()}var Nge=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Ege:_ge;Zte.useSyncExternalStore=Ad.useSyncExternalStore!==void 0?Ad.useSyncExternalStore:Nge;Jte.exports=Zte;var bM=Jte.exports;function en(t){this.content=t}en.prototype={constructor:en,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,r){var n=r&&r!=t?this.remove(r):this,i=n.find(t),s=n.content.slice();return i==-1?s.push(r||t,e):(s[i+1]=e,r&&(s[i]=r)),new en(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var r=this.content.slice();return r.splice(e,2),new en(r)},addToStart:function(t,e){return new en([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var r=this.remove(t).content.slice();return r.push(t,e),new en(r)},addBefore:function(t,e,r){var n=this.remove(e),i=n.content.slice(),s=n.find(t);return i.splice(s==-1?i.length:s,0,e,r),new en(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=en.from(t),t.size?new en(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=en.from(t),t.size?new en(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=en.from(t);for(var r=0;r<t.content.length;r+=2)e=e.remove(t.content[r]);return e},toObject:function(){var t={};return this.forEach(function(e,r){t[e]=r}),t},get size(){return this.content.length>>1}};en.from=function(t){if(t instanceof en)return t;var e=[];if(t)for(var r in t)e.push(r,t[r]);return new en(e)};function ere(t,e,r){for(let n=0;;n++){if(n==t.childCount||n==e.childCount)return t.childCount==e.childCount?null:r;let i=t.child(n),s=e.child(n);if(i==s){r+=i.nodeSize;continue}if(!i.sameMarkup(s))return r;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)r++;return r}if(i.content.size||s.content.size){let o=ere(i.content,s.content,r+1);if(o!=null)return o}r+=i.nodeSize}}function tre(t,e,r,n){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:r,b:n};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){r-=l,n-=l;continue}if(!o.sameMarkup(a))return{a:r,b:n};if(o.isText&&o.text!=a.text){let c=0,d=Math.min(o.text.length,a.text.length);for(;c<d&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,r--,n--;return{a:r,b:n}}if(o.content.size||a.content.size){let c=tre(o.content,a.content,r-1,n-1);if(c)return c}r-=l,n-=l}}class Q{constructor(e,r){if(this.content=e,this.size=r||0,r==null)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,r,n,i=0,s){for(let o=0,a=0;a<r;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&n(l,i+a,s||null,o)!==!1&&l.content.size){let d=a+1;l.nodesBetween(Math.max(0,e-d),Math.min(l.content.size,r-d),n,i+d)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,r,n,i){let s="",o=!0;return this.nodesBetween(e,r,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,r-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&n&&(o?o=!1:s+=n),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let r=this.lastChild,n=e.firstChild,i=this.content.slice(),s=0;for(r.isText&&r.sameMarkup(n)&&(i[i.length-1]=r.withText(r.text+n.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new Q(i,this.size+e.size)}cut(e,r=this.size){if(e==0&&r==this.size)return this;let n=[],i=0;if(r>e)for(let s=0,o=0;o<r;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>r)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,r-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,r-o-1))),n.push(a),i+=a.nodeSize),o=l}return new Q(n,i)}cutByIndex(e,r){return e==r?Q.empty:e==0&&r==this.content.length?this:new Q(this.content.slice(e,r))}replaceChild(e,r){let n=this.content[e];if(n==r)return this;let i=this.content.slice(),s=this.size+r.nodeSize-n.nodeSize;return i[e]=r,new Q(i,s)}addToStart(e){return new Q([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Q(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let r=0;r<this.content.length;r++)if(!this.content[r].eq(e.content[r]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let r=this.content[e];if(!r)throw new RangeError("Index "+e+" out of range for "+this);return r}maybeChild(e){return this.content[e]||null}forEach(e){for(let r=0,n=0;r<this.content.length;r++){let i=this.content[r];e(i,n,r),n+=i.nodeSize}}findDiffStart(e,r=0){return ere(this,e,r)}findDiffEnd(e,r=this.size,n=e.size){return tre(this,e,r,n)}findIndex(e){if(e==0)return gg(0,e);if(e==this.size)return gg(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,n=0;;r++){let i=this.child(r),s=n+i.nodeSize;if(s>=e)return s==e?gg(r+1,s):gg(r,n);n=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,r){if(!r)return Q.empty;if(!Array.isArray(r))throw new RangeError("Invalid input for Fragment.fromJSON");return new Q(r.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Q.empty;let r,n=0;for(let i=0;i<e.length;i++){let s=e[i];n+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(r||(r=e.slice(0,i)),r[r.length-1]=s.withText(r[r.length-1].text+s.text)):r&&r.push(s)}return new Q(r||e,n)}static from(e){if(!e)return Q.empty;if(e instanceof Q)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Q([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Q.empty=new Q([],0);const b1={index:0,offset:0};function gg(t,e){return b1.index=t,b1.offset=e,b1}function Uy(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let r=Array.isArray(t);if(Array.isArray(e)!=r)return!1;if(r){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!Uy(t[n],e[n]))return!1}else{for(let n in t)if(!(n in e)||!Uy(t[n],e[n]))return!1;for(let n in e)if(!(n in t))return!1}return!0}let Tt=class iI{constructor(e,r){this.type=e,this.attrs=r}addToSet(e){let r,n=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))r||(r=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!n&&s.type.rank>this.type.rank&&(r||(r=e.slice(0,i)),r.push(this),n=!0),r&&r.push(s)}}return r||(r=e.slice()),n||r.push(this),r}removeFromSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return e.slice(0,r).concat(e.slice(r+1));return e}isInSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Uy(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[r.type];if(!n)throw new RangeError(`There is no mark type ${r.type} in this schema`);let i=n.create(r.attrs);return n.checkAttrs(i.attrs),i}static sameSet(e,r){if(e==r)return!0;if(e.length!=r.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(r[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return iI.none;if(e instanceof iI)return[e];let r=e.slice();return r.sort((n,i)=>n.type.rank-i.type.rank),r}};Tt.none=[];class Hy extends Error{}class ye{constructor(e,r,n){this.content=e,this.openStart=r,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,r){let n=nre(this.content,e+this.openStart,r);return n&&new ye(n,this.openStart,this.openEnd)}removeBetween(e,r){return new ye(rre(this.content,e+this.openStart,r+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,r){if(!r)return ye.empty;let n=r.openStart||0,i=r.openEnd||0;if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ye(Q.fromJSON(e,r.content),n,i)}static maxOpen(e,r=!0){let n=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(r||!s.type.spec.isolating);s=s.firstChild)n++;for(let s=e.lastChild;s&&!s.isLeaf&&(r||!s.type.spec.isolating);s=s.lastChild)i++;return new ye(e,n,i)}}ye.empty=new ye(Q.empty,0,0);function rre(t,e,r){let{index:n,offset:i}=t.findIndex(e),s=t.maybeChild(n),{index:o,offset:a}=t.findIndex(r);if(i==e||s.isText){if(a!=r&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(r))}if(n!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(n,s.copy(rre(s.content,e-i-1,r-i-1)))}function nre(t,e,r,n){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return n&&!n.canReplace(i,i,r)?null:t.cut(0,e).append(r).append(t.cut(e));let a=nre(o.content,e-s-1,r,o);return a&&t.replaceChild(i,o.copy(a))}function Cge(t,e,r){if(r.openStart>t.depth)throw new Hy("Inserted content deeper than insertion position");if(t.depth-r.openStart!=e.depth-r.openEnd)throw new Hy("Inconsistent open depths");return ire(t,e,r,0)}function ire(t,e,r,n){let i=t.index(n),s=t.node(n);if(i==e.index(n)&&n<t.depth-r.openStart){let o=ire(t,e,r,n+1);return s.copy(s.content.replaceChild(i,o))}else if(r.content.size)if(!r.openStart&&!r.openEnd&&t.depth==n&&e.depth==n){let o=t.parent,a=o.content;return ic(o,a.cut(0,t.parentOffset).append(r.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=kge(r,t);return ic(s,ore(t,o,a,e,n))}else return ic(s,Wy(t,e,n))}function sre(t,e){if(!e.type.compatibleContent(t.type))throw new Hy("Cannot join "+e.type.name+" onto "+t.type.name)}function sI(t,e,r){let n=t.node(r);return sre(n,e.node(r)),n}function nc(t,e){let r=e.length-1;r>=0&&t.isText&&t.sameMarkup(e[r])?e[r]=t.withText(e[r].text+t.text):e.push(t)}function kf(t,e,r,n){let i=(e||t).node(r),s=0,o=e?e.index(r):i.childCount;t&&(s=t.index(r),t.depth>r?s++:t.textOffset&&(nc(t.nodeAfter,n),s++));for(let a=s;a<o;a++)nc(i.child(a),n);e&&e.depth==r&&e.textOffset&&nc(e.nodeBefore,n)}function ic(t,e){return t.type.checkContent(e),t.copy(e)}function ore(t,e,r,n,i){let s=t.depth>i&&sI(t,e,i+1),o=n.depth>i&&sI(r,n,i+1),a=[];return kf(null,t,i,a),s&&o&&e.index(i)==r.index(i)?(sre(s,o),nc(ic(s,ore(t,e,r,n,i+1)),a)):(s&&nc(ic(s,Wy(t,e,i+1)),a),kf(e,r,i,a),o&&nc(ic(o,Wy(r,n,i+1)),a)),kf(n,null,i,a),new Q(a)}function Wy(t,e,r){let n=[];if(kf(null,t,r,n),t.depth>r){let i=sI(t,e,r+1);nc(ic(i,Wy(t,e,r+1)),n)}return kf(e,null,r,n),new Q(n)}function kge(t,e){let r=e.depth-t.openStart,i=e.node(r).copy(t.content);for(let s=r-1;s>=0;s--)i=e.node(s).copy(Q.from(i));return{start:i.resolveNoCache(t.openStart+r),end:i.resolveNoCache(i.content.size-t.openEnd-r)}}class hp{constructor(e,r,n){this.pos=e,this.path=r,this.parentOffset=n,this.depth=r.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,r=this.index(this.depth);if(r==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],i=e.child(r);return n?e.child(r).cut(n):i}get nodeBefore(){let e=this.index(this.depth),r=this.pos-this.path[this.path.length-1];return r?this.parent.child(e).cut(0,r):e==0?null:this.parent.child(e-1)}posAtIndex(e,r){r=this.resolveDepth(r);let n=this.path[r*3],i=r==0?0:this.path[r*3-1]+1;for(let s=0;s<e;s++)i+=n.child(s).nodeSize;return i}marks(){let e=this.parent,r=this.index();if(e.content.size==0)return Tt.none;if(this.textOffset)return e.child(r).marks;let n=e.maybeChild(r-1),i=e.maybeChild(r);if(!n){let a=n;n=i,i=a}let s=n.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let r=this.parent.maybeChild(this.index());if(!r||!r.isInline)return null;let n=r.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<n.length;s++)n[s].type.spec.inclusive===!1&&(!i||!n[s].isInSet(i.marks))&&(n=n[s--].removeFromSet(n));return n}sharedDepth(e){for(let r=this.depth;r>0;r--)if(this.start(r)<=e&&this.end(r)>=e)return r;return 0}blockRange(e=this,r){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!r||r(this.node(n))))return new Ky(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let r=1;r<=this.depth;r++)e+=(e?"/":"")+this.node(r).type.name+"_"+this.index(r-1);return e+":"+this.parentOffset}static resolve(e,r){if(!(r>=0&&r<=e.content.size))throw new RangeError("Position "+r+" out of range");let n=[],i=0,s=r;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(n.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new hp(r,n,s)}static resolveCached(e,r){let n=qF.get(e);if(n)for(let s=0;s<n.elts.length;s++){let o=n.elts[s];if(o.pos==r)return o}else qF.set(e,n=new Tge);let i=n.elts[n.i]=hp.resolve(e,r);return n.i=(n.i+1)%Oge,i}}class Tge{constructor(){this.elts=[],this.i=0}}const Oge=12,qF=new WeakMap;class Ky{constructor(e,r,n){this.$from=e,this.$to=r,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const jge=Object.create(null);let Ba=class oI{constructor(e,r,n,i=Tt.none){this.type=e,this.attrs=r,this.marks=i,this.content=n||Q.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,r,n,i=0){this.content.nodesBetween(e,r,n,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,r,n,i){return this.content.textBetween(e,r,n,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,r,n){return this.type==e&&Uy(this.attrs,r||e.defaultAttrs||jge)&&Tt.sameSet(this.marks,n||Tt.none)}copy(e=null){return e==this.content?this:new oI(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new oI(this.type,this.attrs,this.content,e)}cut(e,r=this.content.size){return e==0&&r==this.content.size?this:this.copy(this.content.cut(e,r))}slice(e,r=this.content.size,n=!1){if(e==r)return ye.empty;let i=this.resolve(e),s=this.resolve(r),o=n?0:i.sharedDepth(r),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new ye(c,i.depth-o,s.depth-o)}replace(e,r,n){return Cge(this.resolve(e),this.resolve(r),n)}nodeAt(e){for(let r=this;;){let{index:n,offset:i}=r.content.findIndex(e);if(r=r.maybeChild(n),!r)return null;if(i==e||r.isText)return r;e-=i+1}}childAfter(e){let{index:r,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(r),index:r,offset:n}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:r,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(r),index:r,offset:n};let i=this.content.child(r-1);return{node:i,index:r-1,offset:n-i.nodeSize}}resolve(e){return hp.resolveCached(this,e)}resolveNoCache(e){return hp.resolve(this,e)}rangeHasMark(e,r,n){let i=!1;return r>e&&this.nodesBetween(e,r,s=>(n.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),are(this.marks,e)}contentMatchAt(e){let r=this.type.contentMatch.matchFragment(this.content,0,e);if(!r)throw new Error("Called contentMatchAt on a node with invalid content");return r}canReplace(e,r,n=Q.empty,i=0,s=n.childCount){let o=this.contentMatchAt(e).matchFragment(n,i,s),a=o&&o.matchFragment(this.content,r);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(n.child(l).marks))return!1;return!0}canReplaceWith(e,r,n,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(n),o=s&&s.matchFragment(this.content,r);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Tt.none;for(let r=0;r<this.marks.length;r++){let n=this.marks[r];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!Tt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(r=>r.type.name)}`);this.content.forEach(r=>r.check())}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(r=>r.toJSON())),e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Node.fromJSON");let n;if(r.marks){if(!Array.isArray(r.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=r.marks.map(e.markFromJSON)}if(r.type=="text"){if(typeof r.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(r.text,n)}let i=Q.fromJSON(e,r.content),s=e.nodeType(r.type).create(r.attrs,i,n);return s.type.checkAttrs(s.attrs),s}};Ba.prototype.text=void 0;class Gy extends Ba{constructor(e,r,n,i){if(super(e,r,null,i),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):are(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,r){return this.text.slice(e,r)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Gy(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Gy(this.type,this.attrs,e,this.marks)}cut(e=0,r=this.text.length){return e==0&&r==this.text.length?this:this.withText(this.text.slice(e,r))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function are(t,e){for(let r=t.length-1;r>=0;r--)e=t[r].type.name+"("+e+")";return e}class kc{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,r){let n=new Pge(e,r);if(n.next==null)return kc.empty;let i=lre(n);n.next&&n.err("Unexpected trailing text");let s=Fge(Dge(i));return qge(s,n),s}matchType(e){for(let r=0;r<this.next.length;r++)if(this.next[r].type==e)return this.next[r].next;return null}matchFragment(e,r=0,n=e.childCount){let i=this;for(let s=r;i&&s<n;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:r}=this.next[e];if(!(r.isText||r.hasRequiredAttrs()))return r}return null}compatible(e){for(let r=0;r<this.next.length;r++)for(let n=0;n<e.next.length;n++)if(this.next[r].type==e.next[n].type)return!0;return!1}fillBefore(e,r=!1,n=0){let i=[this];function s(o,a){let l=o.matchFragment(e,n);if(l&&(!r||l.validEnd))return Q.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:d,next:h}=o.next[c];if(!(d.isText||d.hasRequiredAttrs())&&i.indexOf(h)==-1){i.push(h);let f=s(h,a.concat(d));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let r=this.computeWrapping(e);return this.wrapCache.push(e,r),r}computeWrapping(e){let r=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let i=n.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in r)&&(!i.type||l.validEnd)&&(n.push({match:a.contentMatch,type:a,via:i}),r[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function r(n){e.push(n);for(let i=0;i<n.next.length;i++)e.indexOf(n.next[i].next)==-1&&r(n.next[i].next)}return r(this),e.map((n,i)=>{let s=i+(n.validEnd?"*":" ")+" ";for(let o=0;o<n.next.length;o++)s+=(o?", ":"")+n.next[o].type.name+"->"+e.indexOf(n.next[o].next);return s}).join(`
`)}}kc.empty=new kc(!0);class Pge{constructor(e,r){this.string=e,this.nodeTypes=r,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function lre(t){let e=[];do e.push(Ige(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Ige(t){let e=[];do e.push(Rge(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Rge(t){let e=$ge(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=Mge(t,e);else break;return e}function LF(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function Mge(t,e){let r=LF(t),n=r;return t.eat(",")&&(t.next!="}"?n=LF(t):n=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:r,max:n,expr:e}}function Age(t,e){let r=t.nodeTypes,n=r[e];if(n)return[n];let i=[];for(let s in r){let o=r[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function $ge(t){if(t.eat("(")){let e=lre(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Age(t,t.next).map(r=>(t.inline==null?t.inline=r.isInline:t.inline!=r.isInline&&t.err("Mixing inline and block content"),{type:"name",value:r}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Dge(t){let e=[[]];return i(s(t,0),r()),e;function r(){return e.push([])-1}function n(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=r())}else if(o.type=="star"){let l=r();return n(a,l),i(s(o.expr,l),l),[n(l)]}else if(o.type=="plus"){let l=r();return i(s(o.expr,a),l),i(s(o.expr,l),l),[n(l)]}else{if(o.type=="opt")return[n(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let d=r();i(s(o.expr,l),d),l=d}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let d=r();n(l,d),i(s(o.expr,l),d),l=d}return[n(l)]}else{if(o.type=="name")return[n(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function cre(t,e){return e-t}function BF(t,e){let r=[];return n(e),r.sort(cre);function n(i){let s=t[i];if(s.length==1&&!s[0].term)return n(s[0].to);r.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&r.indexOf(l)==-1&&n(l)}}}function Fge(t){let e=Object.create(null);return r(BF(t,0));function r(n){let i=[];n.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let d=0;d<i.length;d++)i[d][0]==a&&(c=i[d][1]);BF(t,l).forEach(d=>{c||i.push([a,c=[]]),c.indexOf(d)==-1&&c.push(d)})})});let s=e[n.join(",")]=new kc(n.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(cre);s.next.push({type:i[o][0],next:e[a.join(",")]||r(a)})}return s}}function qge(t,e){for(let r=0,n=[t];r<n.length;r++){let i=n[r],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),n.indexOf(c)==-1&&n.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function ure(t){let e=Object.create(null);for(let r in t){let n=t[r];if(!n.hasDefault)return null;e[r]=n.default}return e}function dre(t,e){let r=Object.create(null);for(let n in t){let i=e&&e[n];if(i===void 0){let s=t[n];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+n)}r[n]=i}return r}function hre(t,e,r,n){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${r} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function fre(t,e){let r=Object.create(null);if(e)for(let n in e)r[n]=new Bge(t,n,e[n]);return r}let zF=class pre{constructor(e,r,n){this.name=e,this.schema=r,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=fre(e,n.attrs),this.defaultAttrs=ure(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==kc.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:dre(this.attrs,e)}create(e=null,r,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ba(this,this.computeAttrs(e),Q.from(r),Tt.setFrom(n))}createChecked(e=null,r,n){return r=Q.from(r),this.checkContent(r),new Ba(this,this.computeAttrs(e),r,Tt.setFrom(n))}createAndFill(e=null,r,n){if(e=this.computeAttrs(e),r=Q.from(r),r.size){let o=this.contentMatch.fillBefore(r);if(!o)return null;r=o.append(r)}let i=this.contentMatch.matchFragment(r),s=i&&i.fillBefore(Q.empty,!0);return s?new Ba(this,e,r.append(s),Tt.setFrom(n)):null}validContent(e){let r=this.contentMatch.matchFragment(e);if(!r||!r.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){hre(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let r=0;r<e.length;r++)if(!this.allowsMarkType(e[r].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let r;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?r&&r.push(e[n]):r||(r=e.slice(0,n));return r?r.length?r:Tt.none:e}static compile(e,r){let n=Object.create(null);e.forEach((s,o)=>n[s]=new pre(s,r,o));let i=r.spec.topNode||"doc";if(!n[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let s in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function Lge(t,e,r){let n=r.split("|");return i=>{let s=i===null?"null":typeof i;if(n.indexOf(s)<0)throw new RangeError(`Expected value of type ${n} for attribute ${e} on type ${t}, got ${s}`)}}class Bge{constructor(e,r,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?Lge(e,r,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class C0{constructor(e,r,n,i){this.name=e,this.rank=r,this.schema=n,this.spec=i,this.attrs=fre(e,i.attrs),this.excluded=null;let s=ure(this.attrs);this.instance=s?new Tt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Tt(this,dre(this.attrs,e))}static compile(e,r){let n=Object.create(null),i=0;return e.forEach((s,o)=>n[s]=new C0(s,i++,r,o)),n}removeFromSet(e){for(var r=0;r<e.length;r++)e[r].type==this&&(e=e.slice(0,r).concat(e.slice(r+1)),r--);return e}isInSet(e){for(let r=0;r<e.length;r++)if(e[r].type==this)return e[r]}checkAttrs(e){hre(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class mre{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let r=this.spec={};for(let i in e)r[i]=e[i];r.nodes=en.from(e.nodes),r.marks=en.from(e.marks||{}),this.nodes=zF.compile(this.spec.nodes,this),this.marks=C0.compile(this.spec.marks,this);let n=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=n[o]||(n[o]=kc.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?VF(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:VF(this,o.split(" "))}this.nodeFromJSON=i=>Ba.fromJSON(this,i),this.markFromJSON=i=>Tt.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,r=null,n,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof zF){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(r,n,i)}text(e,r){let n=this.nodes.text;return new Gy(n,n.defaultAttrs,e,Tt.setFrom(r))}mark(e,r){return typeof e=="string"&&(e=this.marks[e]),e.create(r)}nodeType(e){let r=this.nodes[e];if(!r)throw new RangeError("Unknown node type: "+e);return r}}function VF(t,e){let r=[];for(let n=0;n<e.length;n++){let i=e[n],s=t.marks[i],o=s;if(s)r.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&r.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return r}function zge(t){return t.tag!=null}function Vge(t){return t.style!=null}class za{constructor(e,r){this.schema=e,this.rules=r,this.tags=[],this.styles=[];let n=this.matchedStyles=[];r.forEach(i=>{if(zge(i))this.tags.push(i);else if(Vge(i)){let s=/[^=]*/.exec(i.style)[0];n.indexOf(s)<0&&n.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,r={}){let n=new HF(this,r,!1);return n.addAll(e,Tt.none,r.from,r.to),n.finish()}parseSlice(e,r={}){let n=new HF(this,r,!0);return n.addAll(e,Tt.none,r.from,r.to),ye.maxOpen(n.finish())}matchTag(e,r,n){for(let i=n?this.tags.indexOf(n)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(Wge(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||r.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,r,n,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!n.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=r))){if(o.getAttrs){let l=o.getAttrs(r);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let r=[];function n(i){let s=i.priority==null?50:i.priority,o=0;for(;o<r.length;o++){let a=r[o];if((a.priority==null?50:a.priority)<s)break}r.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{n(o=WF(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{n(o=WF(o)),o.node||o.ignore||o.mark||(o.node=i)})}return r}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new za(e,za.schemaRules(e)))}}const gre={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Uge={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},yre={ol:!0,ul:!0},fp=1,aI=2,Tf=4;function UF(t,e,r){return e!=null?(e?fp:0)|(e==="full"?aI:0):t&&t.whitespace=="pre"?fp|aI:r&~Tf}class yg{constructor(e,r,n,i,s,o){this.type=e,this.attrs=r,this.marks=n,this.solid=i,this.options=o,this.content=[],this.activeMarks=Tt.none,this.match=s||(o&Tf?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let r=this.type.contentMatch.fillBefore(Q.from(e));if(r)this.match=this.type.contentMatch.matchFragment(r);else{let n=this.type.contentMatch,i;return(i=n.findWrapping(e.type))?(this.match=n,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&fp)){let n=this.content[this.content.length-1],i;if(n&&n.isText&&(i=/[ \t\r\n\u000c]+$/.exec(n.text))){let s=n;n.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let r=Q.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(Q.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!gre.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class HF{constructor(e,r,n){this.parser=e,this.options=r,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let i=r.topNode,s,o=UF(null,r.preserveWhitespace,0)|(n?Tf:0);i?s=new yg(i.type,i.attrs,Tt.none,!0,r.topMatch||i.type.contentMatch,o):n?s=new yg(null,null,Tt.none,!0,null,o):s=new yg(e.schema.topNodeType,null,Tt.none,!0,null,o),this.nodes=[s],this.find=r.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,r){e.nodeType==3?this.addTextNode(e,r):e.nodeType==1&&this.addElement(e,r)}addTextNode(e,r){let n=e.nodeValue,i=this.top,s=i.options&aI?"full":this.localPreserveWS||(i.options&fp)>0,{schema:o}=this.parser;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(s)if(s==="full")n=n.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(n)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=n.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),r,!0),a[l]&&this.insertNode(o.text(a[l]),r,!/\S/.test(a[l]));n=""}else n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],l=e.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(n=n.slice(1))}n&&this.insertNode(o.text(n),r,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,r,n){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;yre.hasOwnProperty(o)&&this.parser.normalizeLists&&Hge(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,n));e:if(l?l.ignore:Uge.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,r);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,d=this.needsBlock;if(gre.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,r);break e}let h=l&&l.skip?r:this.readStyles(e,r);h&&this.addAll(e,h),c&&this.sync(s),this.needsBlock=d}else{let c=this.readStyles(e,r);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,r){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),r)}ignoreFallback(e,r){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),r,!0)}readStyles(e,r){let n=e.style;if(n&&n.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=n.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?r=r.filter(c=>!l.clearMark(c)):r=r.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return r}addElementByRule(e,r,n,i){let s,o;if(r.node)if(o=this.parser.schema.nodes[r.node],o.isLeaf)this.insertNode(o.create(r.attrs),n,e.nodeName=="BR")||this.leafFallback(e,n);else{let l=this.enter(o,r.attrs||null,n,r.preserveWhitespace);l&&(s=!0,n=l)}else{let l=this.parser.schema.marks[r.mark];n=n.concat(l.create(r.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,n,i);else if(r.getContent)this.findInside(e),r.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,n,!1));else{let l=e;typeof r.contentElement=="string"?l=e.querySelector(r.contentElement):typeof r.contentElement=="function"?l=r.contentElement(e):r.contentElement&&(l=r.contentElement),this.findAround(e,l,!0),this.addAll(l,n),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,r,n,i){let s=n||0;for(let o=n?e.childNodes[n]:e.firstChild,a=i==null?null:e.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,r);this.findAtPoint(e,s)}findPlace(e,r,n){let i,s;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],c=l.findWrapping(e);if(c&&(!i||i.length>c.length+a)&&(i=c,s=l,!c.length))break;if(l.solid){if(n)break;a+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)r=this.enterInner(i[o],null,r,!1);return r}insertNode(e,r,n){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(r=this.enterInner(s,null,r))}let i=this.findPlace(e,r,n);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=Tt.none;for(let a of i.concat(e.marks))(s.type?s.type.allowsMarkType(a.type):KF(a.type,e.type))&&(o=a.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,r,n,i){let s=this.findPlace(e.create(r),n,!1);return s&&(s=this.enterInner(e,r,n,!0,i)),s}enterInner(e,r,n,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=UF(e,s,o.options);o.options&Tf&&o.content.length==0&&(a|=Tf);let l=Tt.none;return n=n.filter(c=>(o.type?o.type.allowsMarkType(c.type):KF(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new yg(e,r,l,i,null,a)),this.open++,n}closeExtra(e=!1){let r=this.nodes.length-1;if(r>this.open){for(;r>this.open;r--)this.nodes[r-1].content.push(this.nodes[r].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let r=this.open;r>=0;r--){if(this.nodes[r]==e)return this.open=r,!0;this.localPreserveWS&&(this.nodes[r].options|=fp)}return!1}get currentPos(){this.closeExtra();let e=0;for(let r=this.open;r>=0;r--){let n=this.nodes[r].content;for(let i=n.length-1;i>=0;i--)e+=n[i].nodeSize;r&&e++}return e}findAtPoint(e,r){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==r&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)&&(this.find[r].pos=this.currentPos)}findAround(e,r,n){if(e!=r&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&r.compareDocumentPosition(this.find[i].node)&(n?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&(this.find[r].pos=this.currentPos-(e.nodeValue.length-this.find[r].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let r=e.split("/"),n=this.options.context,i=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),s=-(n?n.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=r[a];if(c==""){if(a==r.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let d=l>0||l==0&&i?this.nodes[l].type:n&&l>=s?n.node(l-s).type:null;if(!d||d.name!=c&&!d.isInGroup(c))return!1;l--}}return!0};return o(r.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let r=e.depth;r>=0;r--){let n=e.node(r).contentMatchAt(e.indexAfter(r)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let r in this.parser.schema.nodes){let n=this.parser.schema.nodes[r];if(n.isTextblock&&n.defaultAttrs)return n}}}function Hge(t){for(let e=t.firstChild,r=null;e;e=e.nextSibling){let n=e.nodeType==1?e.nodeName.toLowerCase():null;n&&yre.hasOwnProperty(n)&&r?(r.appendChild(e),e=r):n=="li"?r=e:n&&(r=null)}}function Wge(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function WF(t){let e={};for(let r in t)e[r]=t[r];return e}function KF(t,e){let r=e.schema.nodes;for(let n in r){let i=r[n];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:d}=a.edge(l);if(c==e||s.indexOf(d)<0&&o(d))return!0}};if(o(i.contentMatch))return!0}}class Uc{constructor(e,r){this.nodes=e,this.marks=r}serializeFragment(e,r={},n){n||(n=x1(r).createDocumentFragment());let i=n,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],d=this.serializeMark(c,o.isInline,r);d&&(s.push([c,i]),i.appendChild(d.dom),i=d.contentDOM||d.dom)}}i.appendChild(this.serializeNodeInner(o,r))}),n}serializeNodeInner(e,r){let{dom:n,contentDOM:i}=ty(x1(r),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,r,i)}return n}serializeNode(e,r={}){let n=this.serializeNodeInner(e,r);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,r);s&&((s.contentDOM||s.dom).appendChild(n),n=s.dom)}return n}serializeMark(e,r,n={}){let i=this.marks[e.type.name];return i&&ty(x1(n),i(e,r),null,e.attrs)}static renderSpec(e,r,n=null,i){return ty(e,r,n,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Uc(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let r=GF(e.nodes);return r.text||(r.text=n=>n.text),r}static marksFromSchema(e){return GF(e.marks)}}function GF(t){let e={};for(let r in t){let n=t[r].spec.toDOM;n&&(e[r]=n)}return e}function x1(t){return t.document||window.document}const YF=new WeakMap;function Kge(t){let e=YF.get(t);return e===void 0&&YF.set(t,e=Gge(t)),e}function Gge(t){let e=null;function r(n){if(n&&typeof n=="object")if(Array.isArray(n))if(typeof n[0]=="string")e||(e=[]),e.push(n);else for(let i=0;i<n.length;i++)r(n[i]);else for(let i in n)r(n[i])}return r(t),e}function ty(t,e,r,n){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(n&&(s=Kge(n))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(r=i.slice(0,o),i=i.slice(o+1));let a,l=r?t.createElementNS(r,i):t.createElement(i),c=e[1],d=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){d=2;for(let h in c)if(c[h]!=null){let f=h.indexOf(" ");f>0?l.setAttributeNS(h.slice(0,f),h.slice(f+1),c[h]):h=="style"&&l.style?l.style.cssText=c[h]:l.setAttribute(h,c[h])}}for(let h=d;h<e.length;h++){let f=e[h];if(f===0){if(h<e.length-1||h>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:p,contentDOM:m}=ty(t,f,r,n);if(l.appendChild(p),m){if(a)throw new RangeError("Multiple content holes");a=m}}}return{dom:l,contentDOM:a}}const vre=65535,bre=Math.pow(2,16);function Yge(t,e){return t+e*bre}function QF(t){return t&vre}function Qge(t){return(t-(t&vre))/bre}const xre=1,wre=2,ry=4,Sre=8;class lI{constructor(e,r,n){this.pos=e,this.delInfo=r,this.recover=n}get deleted(){return(this.delInfo&Sre)>0}get deletedBefore(){return(this.delInfo&(xre|ry))>0}get deletedAfter(){return(this.delInfo&(wre|ry))>0}get deletedAcross(){return(this.delInfo&ry)>0}}class hi{constructor(e,r=!1){if(this.ranges=e,this.inverted=r,!e.length&&hi.empty)return hi.empty}recover(e){let r=0,n=QF(e);if(!this.inverted)for(let i=0;i<n;i++)r+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[n*3]+r+Qge(e)}mapResult(e,r=1){return this._map(e,r,!1)}map(e,r=1){return this._map(e,r,!0)}_map(e,r,n){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],d=this.ranges[a+o],h=l+c;if(e<=h){let f=c?e==l?-1:e==h?1:r:r,p=l+i+(f<0?0:d);if(n)return p;let m=e==(r<0?l:h)?null:Yge(a/3,e-l),g=e==l?wre:e==h?xre:ry;return(r<0?e!=l:e!=h)&&(g|=Sre),new lI(p,g,m)}i+=d-c}return n?e+i:new lI(e+i,0,null)}touches(e,r){let n=0,i=QF(r),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?n:0);if(l>e)break;let c=this.ranges[a+s],d=l+c;if(e<=d&&a==i*3)return!0;n+=this.ranges[a+o]-c}return!1}forEach(e){let r=this.inverted?2:1,n=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+r],d=this.ranges[i+n];e(a,a+c,l,l+d),s+=d-c}}invert(){return new hi(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?hi.empty:new hi(e<0?[0,-e,0]:[0,0,e])}}hi.empty=new hi([]);class pp{constructor(e,r,n=0,i=e?e.length:0){this.mirror=r,this.from=n,this.to=i,this._maps=e||[],this.ownData=!(e||r)}get maps(){return this._maps}slice(e=0,r=this.maps.length){return new pp(this._maps,this.mirror,e,r)}appendMap(e,r){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),r!=null&&this.setMirror(this._maps.length-1,r)}appendMapping(e){for(let r=0,n=this._maps.length;r<e._maps.length;r++){let i=e.getMirror(r);this.appendMap(e._maps[r],i!=null&&i<r?n+i:void 0)}}getMirror(e){if(this.mirror){for(let r=0;r<this.mirror.length;r++)if(this.mirror[r]==e)return this.mirror[r+(r%2?-1:1)]}}setMirror(e,r){this.mirror||(this.mirror=[]),this.mirror.push(e,r)}appendMappingInverted(e){for(let r=e.maps.length-1,n=this._maps.length+e._maps.length;r>=0;r--){let i=e.getMirror(r);this.appendMap(e._maps[r].invert(),i!=null&&i>r?n-i-1:void 0)}}invert(){let e=new pp;return e.appendMappingInverted(this),e}map(e,r=1){if(this.mirror)return this._map(e,r,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,r);return e}mapResult(e,r=1){return this._map(e,r,!1)}_map(e,r,n){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(e,r);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return n?e:new lI(e,i,null)}}const w1=Object.create(null);class bn{getMap(){return hi.empty}merge(e){return null}static fromJSON(e,r){if(!r||!r.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=w1[r.stepType];if(!n)throw new RangeError(`No step type ${r.stepType} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in w1)throw new RangeError("Duplicate use of step JSON ID "+e);return w1[e]=r,r.prototype.jsonID=e,r}}class xr{constructor(e,r){this.doc=e,this.failed=r}static ok(e){return new xr(e,null)}static fail(e){return new xr(null,e)}static fromReplace(e,r,n,i){try{return xr.ok(e.replace(r,n,i))}catch(s){if(s instanceof Hy)return xr.fail(s.message);throw s}}}function xM(t,e,r){let n=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(xM(s.content,e,s))),s.isInline&&(s=e(s,r,i)),n.push(s)}return Q.fromArray(n)}class ka extends bn{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=e.resolve(this.from),i=n.node(n.sharedDepth(this.to)),s=new ye(xM(r.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),r.openStart,r.openEnd);return xr.fromReplace(e,this.from,this.to,s)}invert(){return new us(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new ka(r.pos,n.pos,this.mark)}merge(e){return e instanceof ka&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ka(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new ka(r.from,r.to,e.markFromJSON(r.mark))}}bn.jsonID("addMark",ka);class us extends bn{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=new ye(xM(r.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),r.openStart,r.openEnd);return xr.fromReplace(e,this.from,this.to,n)}invert(){return new ka(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new us(r.pos,n.pos,this.mark)}merge(e){return e instanceof us&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new us(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new us(r.from,r.to,e.markFromJSON(r.mark))}}bn.jsonID("removeMark",us);class Ta extends bn{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return xr.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.addToSet(r.marks));return xr.fromReplace(e,this.pos,this.pos+1,new ye(Q.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);if(r){let n=this.mark.addToSet(r.marks);if(n.length==r.marks.length){for(let i=0;i<r.marks.length;i++)if(!r.marks[i].isInSet(n))return new Ta(this.pos,r.marks[i]);return new Ta(this.pos,this.mark)}}return new Tc(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Ta(r.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ta(r.pos,e.markFromJSON(r.mark))}}bn.jsonID("addNodeMark",Ta);class Tc extends bn{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return xr.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.removeFromSet(r.marks));return xr.fromReplace(e,this.pos,this.pos+1,new ye(Q.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);return!r||!this.mark.isInSet(r.marks)?this:new Ta(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Tc(r.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Tc(r.pos,e.markFromJSON(r.mark))}}bn.jsonID("removeNodeMark",Tc);class Lr extends bn{constructor(e,r,n,i=!1){super(),this.from=e,this.to=r,this.slice=n,this.structure=i}apply(e){return this.structure&&cI(e,this.from,this.to)?xr.fail("Structure replace would overwrite content"):xr.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new hi([this.from,this.to-this.from,this.slice.size])}invert(e){return new Lr(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deletedAcross&&n.deletedAcross?null:new Lr(r.pos,Math.max(r.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Lr)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let r=this.slice.size+e.slice.size==0?ye.empty:new ye(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Lr(this.from,this.to+(e.to-e.from),r,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let r=this.slice.size+e.slice.size==0?ye.empty:new ye(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Lr(e.from,this.to,r,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Lr(r.from,r.to,ye.fromJSON(e,r.slice),!!r.structure)}}bn.jsonID("replace",Lr);class Vr extends bn{constructor(e,r,n,i,s,o,a=!1){super(),this.from=e,this.to=r,this.gapFrom=n,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(cI(e,this.from,this.gapFrom)||cI(e,this.gapTo,this.to)))return xr.fail("Structure gap-replace would overwrite content");let r=e.slice(this.gapFrom,this.gapTo);if(r.openStart||r.openEnd)return xr.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,r.content);return n?xr.fromReplace(e,this.from,this.to,n):xr.fail("Content does not fit in gap")}getMap(){return new hi([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let r=this.gapTo-this.gapFrom;return new Vr(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),i=this.from==this.gapFrom?r.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return r.deletedAcross&&n.deletedAcross||i<r.pos||s>n.pos?null:new Vr(r.pos,n.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number"||typeof r.gapFrom!="number"||typeof r.gapTo!="number"||typeof r.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Vr(r.from,r.to,r.gapFrom,r.gapTo,ye.fromJSON(e,r.slice),r.insert,!!r.structure)}}bn.jsonID("replaceAround",Vr);function cI(t,e,r){let n=t.resolve(e),i=r-e,s=n.depth;for(;i>0&&s>0&&n.indexAfter(s)==n.node(s).childCount;)s--,i--;if(i>0){let o=n.node(s).maybeChild(n.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function Xge(t,e,r,n){let i=[],s=[],o,a;t.doc.nodesBetween(e,r,(l,c,d)=>{if(!l.isInline)return;let h=l.marks;if(!n.isInSet(h)&&d.type.allowsMarkType(n.type)){let f=Math.max(c,e),p=Math.min(c+l.nodeSize,r),m=n.addToSet(h);for(let g=0;g<h.length;g++)h[g].isInSet(m)||(o&&o.to==f&&o.mark.eq(h[g])?o.to=p:i.push(o=new us(f,p,h[g])));a&&a.to==f?a.to=p:s.push(a=new ka(f,p,n))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function Jge(t,e,r,n){let i=[],s=0;t.doc.nodesBetween(e,r,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(n instanceof C0){let c=o.marks,d;for(;d=n.isInSet(c);)(l||(l=[])).push(d),c=d.removeFromSet(c)}else n?n.isInSet(o.marks)&&(l=[n]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,r);for(let d=0;d<l.length;d++){let h=l[d],f;for(let p=0;p<i.length;p++){let m=i[p];m.step==s-1&&h.eq(i[p].style)&&(f=m)}f?(f.to=c,f.step=s):i.push({style:h,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>t.step(new us(o.from,o.to,o.style)))}function wM(t,e,r,n=r.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),d=a+c.nodeSize,h=n.matchType(c.type);if(!h)o.push(new Lr(a,d,ye.empty));else{n=h;for(let f=0;f<c.marks.length;f++)r.allowsMarkType(c.marks[f].type)||t.step(new us(a,d,c.marks[f]));if(i&&c.isText&&r.whitespace!="pre"){let f,p=/\r?\n|\r/g,m;for(;f=p.exec(c.text);)m||(m=new ye(Q.from(r.schema.text(" ",r.allowedMarks(c.marks))),0,0)),o.push(new Lr(a+f.index,a+f.index+f[0].length,m))}}a=d}if(!n.validEnd){let l=n.fillBefore(Q.empty,!0);t.replace(a,a,new ye(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function Zge(t,e,r){return(e==0||t.canReplace(e,t.childCount))&&(r==t.childCount||t.canReplace(0,r))}function oh(t){let r=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let n=t.depth,i=0,s=0;;--n){let o=t.$from.node(n),a=t.$from.index(n)+i,l=t.$to.indexAfter(n)-s;if(n<t.depth&&o.canReplace(a,l,r))return n;if(n==0||o.type.spec.isolating||!Zge(o,a,l))break;a&&(i=1),l<o.childCount&&(s=1)}return null}function eye(t,e,r){let{$from:n,$to:i,depth:s}=e,o=n.before(s+1),a=i.after(s+1),l=o,c=a,d=Q.empty,h=0;for(let m=s,g=!1;m>r;m--)g||n.index(m)>0?(g=!0,d=Q.from(n.node(m).copy(d)),h++):l--;let f=Q.empty,p=0;for(let m=s,g=!1;m>r;m--)g||i.after(m+1)<i.end(m)?(g=!0,f=Q.from(i.node(m).copy(f)),p++):c++;t.step(new Vr(l,c,o,a,new ye(d.append(f),h,p),d.size-h,!0))}function SM(t,e,r=null,n=t){let i=tye(t,e),s=i&&rye(n,e);return s?i.map(XF).concat({type:e,attrs:r}).concat(s.map(XF)):null}function XF(t){return{type:t,attrs:null}}function tye(t,e){let{parent:r,startIndex:n,endIndex:i}=t,s=r.contentMatchAt(n).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return r.canReplaceWith(n,i,o)?s:null}function rye(t,e){let{parent:r,startIndex:n,endIndex:i}=t,s=r.child(n),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=n;l&&c<i;c++)l=l.matchType(r.child(c).type);return!l||!l.validEnd?null:o}function nye(t,e,r){let n=Q.empty;for(let o=r.length-1;o>=0;o--){if(n.size){let a=r[o].type.contentMatch.matchFragment(n);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=Q.from(r[o].type.create(r[o].attrs,n))}let i=e.start,s=e.end;t.step(new Vr(i,s,i,s,new ye(n,0,0),r.length,!0))}function iye(t,e,r,n,i){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,r,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(n,l)&&sye(t.doc,t.mapping.slice(s).map(a),n)){let c=null;if(n.schema.linebreakReplacement){let p=n.whitespace=="pre",m=!!n.contentMatch.matchType(n.schema.linebreakReplacement);p&&!m?c=!1:!p&&m&&(c=!0)}c===!1&&Ere(t,o,a,s),wM(t,t.mapping.slice(s).map(a,1),n,void 0,c===null);let d=t.mapping.slice(s),h=d.map(a,1),f=d.map(a+o.nodeSize,1);return t.step(new Vr(h,f,h+1,f-1,new ye(Q.from(n.create(l,null,o.marks)),0,0),1,!0)),c===!0&&_re(t,o,a,s),!1}})}function _re(t,e,r,n){e.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=t.mapping.slice(n).map(r+1+s+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function Ere(t,e,r,n){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(n).map(r+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function sye(t,e,r){let n=t.resolve(e),i=n.index();return n.parent.canReplaceWith(i,i+1,r)}function oye(t,e,r,n,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");r||(r=s.type);let o=r.create(n,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!r.validContent(s.content))throw new RangeError("Invalid content for node type "+r.name);t.step(new Vr(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new ye(Q.from(o),0,0),1,!0))}function go(t,e,r=1,n){let i=t.resolve(e),s=i.depth-r,o=n&&n[n.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,d=r-2;c>s;c--,d--){let h=i.node(c),f=i.index(c);if(h.type.spec.isolating)return!1;let p=h.content.cutByIndex(f,h.childCount),m=n&&n[d+1];m&&(p=p.replaceChild(0,m.type.create(m.attrs)));let g=n&&n[d]||h;if(!h.canReplace(f+1,h.childCount)||!g.type.validContent(p))return!1}let a=i.indexAfter(s),l=n&&n[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function aye(t,e,r=1,n){let i=t.doc.resolve(e),s=Q.empty,o=Q.empty;for(let a=i.depth,l=i.depth-r,c=r-1;a>l;a--,c--){s=Q.from(i.node(a).copy(s));let d=n&&n[c];o=Q.from(d?d.type.create(d.attrs,o):i.node(a).copy(o))}t.step(new Lr(e,e,new ye(s.append(o),r,r),!0))}function ul(t,e){let r=t.resolve(e),n=r.index();return Nre(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function lye(t,e){e.content.size||t.type.compatibleContent(e.type);let r=t.contentMatchAt(t.childCount),{linebreakReplacement:n}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==n?t.type.schema.nodes.text:s.type;if(r=r.matchType(o),!r||!t.type.allowsMarks(s.marks))return!1}return r.validEnd}function Nre(t,e){return!!(t&&e&&!t.isLeaf&&lye(t,e))}function k0(t,e,r=-1){let n=t.resolve(e);for(let i=n.depth;;i--){let s,o,a=n.index(i);if(i==n.depth?(s=n.nodeBefore,o=n.nodeAfter):r>0?(s=n.node(i+1),a++,o=n.node(i).maybeChild(a)):(s=n.node(i).maybeChild(a-1),o=n.node(i+1)),s&&!s.isTextblock&&Nre(s,o)&&n.node(i).canReplace(a,a+1))return e;if(i==0)break;e=r<0?n.before(i):n.after(i)}}function cye(t,e,r){let n=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-r),o=s.node().type;if(i&&o.inlineContent){let d=o.whitespace=="pre",h=!!o.contentMatch.matchType(i);d&&!h?n=!1:!d&&h&&(n=!0)}let a=t.steps.length;if(n===!1){let d=t.doc.resolve(e+r);Ere(t,d.node(),d.before(),a)}o.inlineContent&&wM(t,e+r-1,o,s.node().contentMatchAt(s.index()),n==null);let l=t.mapping.slice(a),c=l.map(e-r);if(t.step(new Lr(c,l.map(e+r,-1),ye.empty,!0)),n===!0){let d=t.doc.resolve(c);_re(t,d.node(),d.before(),t.steps.length)}return t}function uye(t,e,r){let n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),r))return e;if(n.parentOffset==0)for(let i=n.depth-1;i>=0;i--){let s=n.index(i);if(n.node(i).canReplaceWith(s,s,r))return n.before(i+1);if(s>0)return null}if(n.parentOffset==n.parent.content.size)for(let i=n.depth-1;i>=0;i--){let s=n.indexAfter(i);if(n.node(i).canReplaceWith(s,s,r))return n.after(i+1);if(s<n.node(i).childCount)return null}return null}function Cre(t,e,r){let n=t.resolve(e);if(!r.content.size)return e;let i=r.content;for(let s=0;s<r.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(r.openStart==0&&r.size?2:1);s++)for(let o=n.depth;o>=0;o--){let a=o==n.depth?0:n.pos<=(n.start(o+1)+n.end(o+1))/2?-1:1,l=n.index(o)+(a>0?1:0),c=n.node(o),d=!1;if(s==1)d=c.canReplace(l,l,i);else{let h=c.contentMatchAt(l).findWrapping(i.firstChild.type);d=h&&c.canReplaceWith(l,l,h[0])}if(d)return a==0?n.pos:a<0?n.before(o+1):n.after(o+1)}return null}function T0(t,e,r=e,n=ye.empty){if(e==r&&!n.size)return null;let i=t.resolve(e),s=t.resolve(r);return kre(i,s,n)?new Lr(e,r,n):new dye(i,s,n).fit()}function kre(t,e,r){return!r.openStart&&!r.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),r.content)}class dye{constructor(e,r,n){this.$from=e,this.$to=r,this.unplaced=n,this.frontier=[],this.placed=Q.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=Q.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(e<0?this.$to:n.doc.resolve(e));if(!i)return null;let s=this.placed,o=n.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new ye(s,o,a);return e>-1?new Vr(n.pos,e,this.$to.pos,this.$to.end(),l,r):l.size||n.pos!=this.$to.pos?new Lr(n.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let r=this.unplaced.content,n=0,i=this.unplaced.openEnd;n<e;n++){let s=r.firstChild;if(r.childCount>1&&(i=0),s.type.spec.isolating&&i<=n){e=n;break}r=s.content}for(let r=1;r<=2;r++)for(let n=r==1?e:this.unplaced.openStart;n>=0;n--){let i,s=null;n?(s=S1(this.unplaced.content,n-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],d,h=null;if(r==1&&(o?c.matchType(o.type)||(h=c.fillBefore(Q.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:n,frontierDepth:a,parent:s,inject:h};if(r==2&&o&&(d=c.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:a,parent:s,wrap:d};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:r,openEnd:n}=this.unplaced,i=S1(e,r);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new ye(e,r+1,Math.max(n,i.size+r>=e.size-n?r+1:0)),!0)}dropNode(){let{content:e,openStart:r,openEnd:n}=this.unplaced,i=S1(e,r);if(i.childCount<=1&&r>0){let s=e.size-r<=r+i.size;this.unplaced=new ye(df(e,r-1,1),r-1,s?r-1:n)}else this.unplaced=new ye(df(e,r,1),r,n)}placeNodes({sliceDepth:e,frontierDepth:r,parent:n,inject:i,wrap:s}){for(;this.depth>r;)this.closeFrontierNode();if(s)for(let g=0;g<s.length;g++)this.openFrontierNode(s[g]);let o=this.unplaced,a=n?n.content:o.content,l=o.openStart-e,c=0,d=[],{match:h,type:f}=this.frontier[r];if(i){for(let g=0;g<i.childCount;g++)d.push(i.child(g));h=h.matchFragment(i)}let p=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let g=a.child(c),v=h.matchType(g.type);if(!v)break;c++,(c>1||l==0||g.content.size)&&(h=v,d.push(Tre(g.mark(f.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?p:-1)))}let m=c==a.childCount;m||(p=-1),this.placed=hf(this.placed,r,Q.from(d)),this.frontier[r].match=h,m&&p<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,v=a;g<p;g++){let y=v.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),v=y.content}this.unplaced=m?e==0?ye.empty:new ye(df(o.content,e-1,1),e-1,p<0?o.openEnd:e-1):new ye(df(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],r;if(!e.type.isTextblock||!_1(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(r=this.findCloseLevel(this.$to))&&r.depth==this.depth)return-1;let{depth:n}=this.$to,i=this.$to.after(n);for(;n>1&&i==this.$to.end(--n);)++i;return i}findCloseLevel(e){e:for(let r=Math.min(this.depth,e.depth);r>=0;r--){let{match:n,type:i}=this.frontier[r],s=r<e.depth&&e.end(r+1)==e.pos+(e.depth-(r+1)),o=_1(e,r,i,n,s);if(o){for(let a=r-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],d=_1(e,a,c,l,!0);if(!d||d.childCount)continue e}return{depth:r,fit:o,move:s?e.doc.resolve(e.after(r+1)):e}}}}close(e){let r=this.findCloseLevel(e);if(!r)return null;for(;this.depth>r.depth;)this.closeFrontierNode();r.fit.childCount&&(this.placed=hf(this.placed,r.depth,r.fit)),e=r.move;for(let n=r.depth+1;n<=e.depth;n++){let i=e.node(n),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(n));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,r=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=hf(this.placed,this.depth,Q.from(e.create(r,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let r=this.frontier.pop().match.fillBefore(Q.empty,!0);r.childCount&&(this.placed=hf(this.placed,this.frontier.length,r))}}function df(t,e,r){return e==0?t.cutByIndex(r,t.childCount):t.replaceChild(0,t.firstChild.copy(df(t.firstChild.content,e-1,r)))}function hf(t,e,r){return e==0?t.append(r):t.replaceChild(t.childCount-1,t.lastChild.copy(hf(t.lastChild.content,e-1,r)))}function S1(t,e){for(let r=0;r<e;r++)t=t.firstChild.content;return t}function Tre(t,e,r){if(e<=0)return t;let n=t.content;return e>1&&(n=n.replaceChild(0,Tre(n.firstChild,e-1,n.childCount==1?r-1:0))),e>0&&(n=t.type.contentMatch.fillBefore(n).append(n),r<=0&&(n=n.append(t.type.contentMatch.matchFragment(n).fillBefore(Q.empty,!0)))),t.copy(n)}function _1(t,e,r,n,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!r.compatibleContent(s.type))return null;let a=n.fillBefore(s.content,!0,o);return a&&!hye(r,s.content,o)?a:null}function hye(t,e,r){for(let n=r;n<e.childCount;n++)if(!t.allowsMarks(e.child(n).marks))return!0;return!1}function fye(t){return t.spec.defining||t.spec.definingForContent}function pye(t,e,r,n){if(!n.size)return t.deleteRange(e,r);let i=t.doc.resolve(e),s=t.doc.resolve(r);if(kre(i,s,n))return t.step(new Lr(e,r,n));let o=jre(i,s);o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let f=i.depth,p=i.pos-1;f>0;f--,p--){let m=i.node(f).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;o.indexOf(f)>-1?a=f:i.before(f)==p&&o.splice(1,0,-f)}let l=o.indexOf(a),c=[],d=n.openStart;for(let f=n.content,p=0;;p++){let m=f.firstChild;if(c.push(m),p==n.openStart)break;f=m.content}for(let f=d-1;f>=0;f--){let p=c[f],m=fye(p.type);if(m&&!p.sameMarkup(i.node(Math.abs(a)-1)))d=f;else if(m||!p.type.isTextblock)break}for(let f=n.openStart;f>=0;f--){let p=(f+d+1)%(n.openStart+1),m=c[p];if(m)for(let g=0;g<o.length;g++){let v=o[(g+l)%o.length],y=!0;v<0&&(y=!1,v=-v);let b=i.node(v-1),w=i.index(v-1);if(b.canReplaceWith(w,w,m.type,m.marks))return t.replace(i.before(v),y?s.after(v):r,new ye(Ore(n.content,0,n.openStart,p),p,n.openEnd))}}let h=t.steps.length;for(let f=o.length-1;f>=0&&(t.replace(e,r,n),!(t.steps.length>h));f--){let p=o[f];p<0||(e=i.before(p),r=s.after(p))}}function Ore(t,e,r,n,i){if(e<r){let s=t.firstChild;t=t.replaceChild(0,s.copy(Ore(s.content,e+1,r,n,s)))}if(e>n){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(Q.empty,!0))}return t}function mye(t,e,r,n){if(!n.isInline&&e==r&&t.doc.resolve(e).parent.content.size){let i=uye(t.doc,e,n.type);i!=null&&(e=r=i)}t.replaceRange(e,r,new ye(Q.from(n),0,0))}function gye(t,e,r){let n=t.doc.resolve(e),i=t.doc.resolve(r),s=jre(n,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||n.node(a).type.contentMatch.validEnd)return t.delete(n.start(a),i.end(a));if(a>0&&(l||n.node(a-1).canReplace(n.index(a-1),i.indexAfter(a-1))))return t.delete(n.before(a),i.after(a))}for(let o=1;o<=n.depth&&o<=i.depth;o++)if(e-n.start(o)==n.depth-o&&r>n.end(o)&&i.end(o)-r!=i.depth-o&&n.start(o-1)==i.start(o-1)&&n.node(o-1).canReplace(n.index(o-1),i.index(o-1)))return t.delete(n.before(o),r);t.delete(e,r)}function jre(t,e){let r=[],n=Math.min(t.depth,e.depth);for(let i=n;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&r.push(i)}return r}class td extends bn{constructor(e,r,n){super(),this.pos=e,this.attr=r,this.value=n}apply(e){let r=e.nodeAt(this.pos);if(!r)return xr.fail("No node at attribute step's position");let n=Object.create(null);for(let s in r.attrs)n[s]=r.attrs[s];n[this.attr]=this.value;let i=r.type.create(n,null,r.marks);return xr.fromReplace(e,this.pos,this.pos+1,new ye(Q.from(i),0,r.isLeaf?0:1))}getMap(){return hi.empty}invert(e){return new td(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new td(r.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.pos!="number"||typeof r.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new td(r.pos,r.attr,r.value)}}bn.jsonID("attr",td);class mp extends bn{constructor(e,r){super(),this.attr=e,this.value=r}apply(e){let r=Object.create(null);for(let i in e.attrs)r[i]=e.attrs[i];r[this.attr]=this.value;let n=e.type.create(r,e.content,e.marks);return xr.ok(n)}getMap(){return hi.empty}invert(e){return new mp(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new mp(r.attr,r.value)}}bn.jsonID("docAttr",mp);let $d=class extends Error{};$d=function t(e){let r=Error.call(this,e);return r.__proto__=t.prototype,r};$d.prototype=Object.create(Error.prototype);$d.prototype.constructor=$d;$d.prototype.name="TransformError";class Pre{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new pp}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let r=this.maybeStep(e);if(r.failed)throw new $d(r.failed);return this}maybeStep(e){let r=e.apply(this.doc);return r.failed||this.addStep(e,r.doc),r}get docChanged(){return this.steps.length>0}addStep(e,r){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=r}replace(e,r=e,n=ye.empty){let i=T0(this.doc,e,r,n);return i&&this.step(i),this}replaceWith(e,r,n){return this.replace(e,r,new ye(Q.from(n),0,0))}delete(e,r){return this.replace(e,r,ye.empty)}insert(e,r){return this.replaceWith(e,e,r)}replaceRange(e,r,n){return pye(this,e,r,n),this}replaceRangeWith(e,r,n){return mye(this,e,r,n),this}deleteRange(e,r){return gye(this,e,r),this}lift(e,r){return eye(this,e,r),this}join(e,r=1){return cye(this,e,r),this}wrap(e,r){return nye(this,e,r),this}setBlockType(e,r=e,n,i=null){return iye(this,e,r,n,i),this}setNodeMarkup(e,r,n=null,i){return oye(this,e,r,n,i),this}setNodeAttribute(e,r,n){return this.step(new td(e,r,n)),this}setDocAttribute(e,r){return this.step(new mp(e,r)),this}addNodeMark(e,r){return this.step(new Ta(e,r)),this}removeNodeMark(e,r){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(r instanceof Tt)r.isInSet(n.marks)&&this.step(new Tc(e,r));else{let i=n.marks,s,o=[];for(;s=r.isInSet(i);)o.push(new Tc(e,s)),i=s.removeFromSet(i);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,r=1,n){return aye(this,e,r,n),this}addMark(e,r,n){return Xge(this,e,r,n),this}removeMark(e,r,n){return Jge(this,e,r,n),this}clearIncompatible(e,r,n){return wM(this,e,r,n),this}}const E1=Object.create(null);class Ke{constructor(e,r,n){this.$anchor=e,this.$head=r,this.ranges=n||[new yye(e.min(r),e.max(r))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let r=0;r<e.length;r++)if(e[r].$from.pos!=e[r].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,r=ye.empty){let n=r.content.lastChild,i=null;for(let a=0;a<r.openEnd;a++)i=n,n=n.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],d=e.mapping.slice(s);e.replaceRange(d.map(l.pos),d.map(c.pos),a?ye.empty:r),a==0&&e4(e,s,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,r){let n=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(n),c=l.map(o.pos),d=l.map(a.pos);s?e.deleteRange(c,d):(e.replaceRangeWith(c,d,r),e4(e,n,r.isInline?-1:1))}}static findFrom(e,r,n=!1){let i=e.parent.inlineContent?new Be(e):_u(e.node(0),e.parent,e.pos,e.index(),r,n);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=r<0?_u(e.node(0),e.node(s),e.before(s+1),e.index(s),r,n):_u(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,r,n);if(o)return o}return null}static near(e,r=1){return this.findFrom(e,r)||this.findFrom(e,-r)||new gi(e.node(0))}static atStart(e){return _u(e,e,0,0,1)||new gi(e)}static atEnd(e){return _u(e,e,e.content.size,e.childCount,-1)||new gi(e)}static fromJSON(e,r){if(!r||!r.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=E1[r.type];if(!n)throw new RangeError(`No selection type ${r.type} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in E1)throw new RangeError("Duplicate use of selection JSON ID "+e);return E1[e]=r,r.prototype.jsonID=e,r}getBookmark(){return Be.between(this.$anchor,this.$head).getBookmark()}}Ke.prototype.visible=!0;class yye{constructor(e,r){this.$from=e,this.$to=r}}let JF=!1;function ZF(t){!JF&&!t.parent.inlineContent&&(JF=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Be extends Ke{constructor(e,r=e){ZF(e),ZF(r),super(e,r)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,r){let n=e.resolve(r.map(this.head));if(!n.parent.inlineContent)return Ke.near(n);let i=e.resolve(r.map(this.anchor));return new Be(i.parent.inlineContent?i:n,n)}replace(e,r=ye.empty){if(super.replace(e,r),r==ye.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof Be&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new O0(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,r){if(typeof r.anchor!="number"||typeof r.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Be(e.resolve(r.anchor),e.resolve(r.head))}static create(e,r,n=r){let i=e.resolve(r);return new this(i,n==r?i:e.resolve(n))}static between(e,r,n){let i=e.pos-r.pos;if((!n||i)&&(n=i>=0?1:-1),!r.parent.inlineContent){let s=Ke.findFrom(r,n,!0)||Ke.findFrom(r,-n,!0);if(s)r=s.$head;else return Ke.near(r,n)}return e.parent.inlineContent||(i==0?e=r:(e=(Ke.findFrom(e,-n,!0)||Ke.findFrom(e,n,!0)).$anchor,e.pos<r.pos!=i<0&&(e=r))),new Be(e,r)}}Ke.jsonID("text",Be);class O0{constructor(e,r){this.anchor=e,this.head=r}map(e){return new O0(e.map(this.anchor),e.map(this.head))}resolve(e){return Be.between(e.resolve(this.anchor),e.resolve(this.head))}}class Re extends Ke{constructor(e){let r=e.nodeAfter,n=e.node(0).resolve(e.pos+r.nodeSize);super(e,n),this.node=r}map(e,r){let{deleted:n,pos:i}=r.mapResult(this.anchor),s=e.resolve(i);return n?Ke.near(s):new Re(s)}content(){return new ye(Q.from(this.node),0,0)}eq(e){return e instanceof Re&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new _M(this.anchor)}static fromJSON(e,r){if(typeof r.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Re(e.resolve(r.anchor))}static create(e,r){return new Re(e.resolve(r))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Re.prototype.visible=!1;Ke.jsonID("node",Re);class _M{constructor(e){this.anchor=e}map(e){let{deleted:r,pos:n}=e.mapResult(this.anchor);return r?new O0(n,n):new _M(n)}resolve(e){let r=e.resolve(this.anchor),n=r.nodeAfter;return n&&Re.isSelectable(n)?new Re(r):Ke.near(r)}}class gi extends Ke{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,r=ye.empty){if(r==ye.empty){e.delete(0,e.doc.content.size);let n=Ke.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,r)}toJSON(){return{type:"all"}}static fromJSON(e){return new gi(e)}map(e){return new gi(e)}eq(e){return e instanceof gi}getBookmark(){return vye}}Ke.jsonID("all",gi);const vye={map(){return this},resolve(t){return new gi(t)}};function _u(t,e,r,n,i,s=!1){if(e.inlineContent)return Be.create(t,r);for(let o=n-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&Re.isSelectable(a))return Re.create(t,r-(i<0?a.nodeSize:0))}else{let l=_u(t,a,r+i,i<0?a.childCount:0,i,s);if(l)return l}r+=a.nodeSize*i}return null}function e4(t,e,r){let n=t.steps.length-1;if(n<e)return;let i=t.steps[n];if(!(i instanceof Lr||i instanceof Vr))return;let s=t.mapping.maps[n],o;s.forEach((a,l,c,d)=>{o==null&&(o=d)}),t.setSelection(Ke.near(t.doc.resolve(o),r))}const t4=1,vg=2,r4=4;class bye extends Pre{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|t4)&~vg,this.storedMarks=null,this}get selectionSet(){return(this.updated&t4)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=vg,this}ensureMarks(e){return Tt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&vg)>0}addStep(e,r){super.addStep(e,r),this.updated=this.updated&~vg,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,r=!0){let n=this.selection;return r&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||Tt.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,r,n){let i=this.doc.type.schema;if(r==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(n==null&&(n=r),!e)return this.deleteRange(r,n);let s=this.storedMarks;if(!s){let o=this.doc.resolve(r);s=n==r?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(r,n,i.text(e,s)),!this.selection.empty&&this.selection.to==r+e.length&&this.setSelection(Ke.near(this.selection.$to)),this}}setMeta(e,r){return this.meta[typeof e=="string"?e:e.key]=r,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=r4,this}get scrolledIntoView(){return(this.updated&r4)>0}}function n4(t,e){return!e||!t?t:t.bind(e)}class ff{constructor(e,r,n){this.name=e,this.init=n4(r.init,n),this.apply=n4(r.apply,n)}}const xye=[new ff("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new ff("selection",{init(t,e){return t.selection||Ke.atStart(e.doc)},apply(t){return t.selection}}),new ff("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,r,n){return n.selection.$cursor?t.storedMarks:null}}),new ff("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class N1{constructor(e,r){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=xye.slice(),r&&r.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new ff(n.key,n.spec.state,n))})}}class Lu{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,r=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=r){let i=this.config.plugins[n];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let r=[e],n=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,d=l<r.length&&a.spec.appendTransaction.call(a,l?r.slice(l):r,c,n);if(d&&n.filterTransaction(d,o)){if(d.setMeta("appendedTransaction",e),!i){i=[];for(let h=0;h<this.config.plugins.length;h++)i.push(h<o?{state:n,n:r.length}:{state:this,n:0})}r.push(d),n=n.applyInner(d),s=!0}i&&(i[o]={state:n,n:r.length})}}if(!s)return{state:n,transactions:r}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let r=new Lu(this.config),n=this.config.fields;for(let i=0;i<n.length;i++){let s=n[i];r[s.name]=s.apply(e,this[s.name],this,r)}return r}get tr(){return new bye(this)}static create(e){let r=new N1(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new Lu(r);for(let i=0;i<r.fields.length;i++)n[r.fields[i].name]=r.fields[i].init(e,n);return n}reconfigure(e){let r=new N1(this.schema,e.plugins),n=r.fields,i=new Lu(r);for(let s=0;s<n.length;s++){let o=n[s].name;i[o]=this.hasOwnProperty(o)?this[o]:n[s].init(e,i)}return i}toJSON(e){let r={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(r.storedMarks=this.storedMarks.map(n=>n.toJSON())),e&&typeof e=="object")for(let n in e){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[n],s=i.spec.state;s&&s.toJSON&&(r[n]=s.toJSON.call(i,this[i.key]))}return r}static fromJSON(e,r,n){if(!r)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new N1(e.schema,e.plugins),s=new Lu(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Ba.fromJSON(e.schema,r.doc);else if(o.name=="selection")s.selection=Ke.fromJSON(s.doc,r.selection);else if(o.name=="storedMarks")r.storedMarks&&(s.storedMarks=r.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let a in n){let l=n[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(r,a)){s[o.name]=c.fromJSON.call(l,e,r[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function Ire(t,e,r){for(let n in t){let i=t[n];i instanceof Function?i=i.bind(e):n=="handleDOMEvents"&&(i=Ire(i,e,{})),r[n]=i}return r}class Xt{constructor(e){this.spec=e,this.props={},e.props&&Ire(e.props,this,this.props),this.key=e.key?e.key.key:Rre("plugin")}getState(e){return e[this.key]}}const C1=Object.create(null);function Rre(t){return t in C1?t+"$"+ ++C1[t]:(C1[t]=0,t+"$")}class Ar{constructor(e="key"){this.key=Rre(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const EM=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function Mre(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("backward",t):r.parentOffset>0)?null:r}const Are=(t,e,r)=>{let n=Mre(t,r);if(!n)return!1;let i=NM(n);if(!i){let o=n.blockRange(),a=o&&oh(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(Ure(t,i,e,-1))return!0;if(n.parent.content.size==0&&(Dd(s,"end")||Re.isSelectable(s)))for(let o=n.depth;;o--){let a=T0(t.doc,n.before(o),n.after(o),ye.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(Dd(s,"end")?Ke.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):Re.create(l.doc,i.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||n.node(o-1).childCount>1)break}return s.isAtom&&i.depth==n.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},wye=(t,e,r)=>{let n=Mre(t,r);if(!n)return!1;let i=NM(n);return i?$re(t,i,e):!1},Sye=(t,e,r)=>{let n=Fre(t,r);if(!n)return!1;let i=CM(n);return i?$re(t,i,e):!1};function $re(t,e,r){let n=e.nodeBefore,i=n,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let d=i.lastChild;if(!d)return!1;i=d}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let d=a.firstChild;if(!d)return!1;a=d}let c=T0(t.doc,s,l,ye.empty);if(!c||c.from!=s||c instanceof Lr&&c.slice.size>=l-s)return!1;if(r){let d=t.tr.step(c);d.setSelection(Be.create(d.doc,s)),r(d.scrollIntoView())}return!0}function Dd(t,e,r=!1){for(let n=t;n;n=e=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(r&&n.childCount!=1)return!1}return!1}const Dre=(t,e,r)=>{let{$head:n,empty:i}=t.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("backward",t):n.parentOffset>0)return!1;s=NM(n)}let o=s&&s.nodeBefore;return!o||!Re.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Re.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function NM(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Fre(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)?null:r}const qre=(t,e,r)=>{let n=Fre(t,r);if(!n)return!1;let i=CM(n);if(!i)return!1;let s=i.nodeAfter;if(Ure(t,i,e,1))return!0;if(n.parent.content.size==0&&(Dd(s,"start")||Re.isSelectable(s))){let o=T0(t.doc,n.before(),n.after(),ye.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Dd(s,"start")?Ke.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):Re.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==n.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},Lre=(t,e,r)=>{let{$head:n,empty:i}=t.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)return!1;s=CM(n)}let o=s&&s.nodeAfter;return!o||!Re.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Re.create(t.doc,s.pos)).scrollIntoView()),!0)};function CM(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let r=t.node(e);if(t.index(e)+1<r.childCount)return t.doc.resolve(t.after(e+1));if(r.type.spec.isolating)break}return null}const _ye=(t,e)=>{let r=t.selection,n=r instanceof Re,i;if(n){if(r.node.isTextblock||!ul(t.doc,r.from))return!1;i=r.from}else if(i=k0(t.doc,r.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);n&&s.setSelection(Re.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},Eye=(t,e)=>{let r=t.selection,n;if(r instanceof Re){if(r.node.isTextblock||!ul(t.doc,r.to))return!1;n=r.to}else if(n=k0(t.doc,r.to,1),n==null)return!1;return e&&e(t.tr.join(n).scrollIntoView()),!0},Nye=(t,e)=>{let{$from:r,$to:n}=t.selection,i=r.blockRange(n),s=i&&oh(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},Bre=(t,e)=>{let{$head:r,$anchor:n}=t.selection;return!r.parent.type.spec.code||!r.sameParent(n)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function kM(t){for(let e=0;e<t.edgeCount;e++){let{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}const Cye=(t,e)=>{let{$head:r,$anchor:n}=t.selection;if(!r.parent.type.spec.code||!r.sameParent(n))return!1;let i=r.node(-1),s=r.indexAfter(-1),o=kM(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=r.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(Ke.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},zre=(t,e)=>{let r=t.selection,{$from:n,$to:i}=r;if(r instanceof gi||n.parent.inlineContent||i.parent.inlineContent)return!1;let s=kM(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!n.parentOffset&&i.index()<i.parent.childCount?n:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(Be.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},Vre=(t,e)=>{let{$cursor:r}=t.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let s=r.before();if(go(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let n=r.blockRange(),i=n&&oh(n);return i==null?!1:(e&&e(t.tr.lift(n,i).scrollIntoView()),!0)};function kye(t){return(e,r)=>{let{$from:n,$to:i}=e.selection;if(e.selection instanceof Re&&e.selection.node.isBlock)return!n.parentOffset||!go(e.doc,n.pos)?!1:(r&&r(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let s=[],o,a,l=!1,c=!1;for(let p=n.depth;;p--)if(n.node(p).isBlock){l=n.end(p)==n.pos+(n.depth-p),c=n.start(p)==n.pos-(n.depth-p),a=kM(n.node(p-1).contentMatchAt(n.indexAfter(p-1))),s.unshift(l&&a?{type:a}:null),o=p;break}else{if(p==1)return!1;s.unshift(null)}let d=e.tr;(e.selection instanceof Be||e.selection instanceof gi)&&d.deleteSelection();let h=d.mapping.map(n.pos),f=go(d.doc,h,s.length,s);if(f||(s[0]=a?{type:a}:null,f=go(d.doc,h,s.length,s)),!f)return!1;if(d.split(h,s.length,s),!l&&c&&n.node(o).type!=a){let p=d.mapping.map(n.before(o)),m=d.doc.resolve(p);a&&n.node(o-1).canReplaceWith(m.index(),m.index()+1,a)&&d.setNodeMarkup(d.mapping.map(n.before(o)),a)}return r&&r(d.scrollIntoView()),!0}}const Tye=kye(),Oye=(t,e)=>{let{$from:r,to:n}=t.selection,i,s=r.sharedDepth(n);return s==0?!1:(i=r.before(s),e&&e(t.tr.setSelection(Re.create(t.doc,i))),!0)};function jye(t,e,r){let n=e.nodeBefore,i=e.nodeAfter,s=e.index();return!n||!i||!n.type.compatibleContent(i.type)?!1:!n.content.size&&e.parent.canReplace(s-1,s)?(r&&r(t.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||ul(t.doc,e.pos))?!1:(r&&r(t.tr.join(e.pos).scrollIntoView()),!0)}function Ure(t,e,r,n){let i=e.nodeBefore,s=e.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&jye(t,e,r))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(r){let p=e.pos+s.nodeSize,m=Q.empty;for(let y=o.length-1;y>=0;y--)m=Q.from(o[y].create(null,m));m=Q.from(i.copy(m));let g=t.tr.step(new Vr(e.pos-1,p,e.pos,p,new ye(m,1,0),o.length,!0)),v=g.doc.resolve(p+2*o.length);v.nodeAfter&&v.nodeAfter.type==i.type&&ul(g.doc,v.pos)&&g.join(v.pos),r(g.scrollIntoView())}return!0}let d=s.type.spec.isolating||n>0&&l?null:Ke.findFrom(e,1),h=d&&d.$from.blockRange(d.$to),f=h&&oh(h);if(f!=null&&f>=e.depth)return r&&r(t.tr.lift(h,f).scrollIntoView()),!0;if(c&&Dd(s,"start",!0)&&Dd(i,"end")){let p=i,m=[];for(;m.push(p),!p.isTextblock;)p=p.lastChild;let g=s,v=1;for(;!g.isTextblock;g=g.firstChild)v++;if(p.canReplace(p.childCount,p.childCount,g.content)){if(r){let y=Q.empty;for(let w=m.length-1;w>=0;w--)y=Q.from(m[w].copy(y));let b=t.tr.step(new Vr(e.pos-m.length,e.pos+s.nodeSize,e.pos+v,e.pos+s.nodeSize-v,new ye(y,m.length,0),0,!0));r(b.scrollIntoView())}return!0}}return!1}function Hre(t){return function(e,r){let n=e.selection,i=t<0?n.$from:n.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(r&&r(e.tr.setSelection(Be.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const Pye=Hre(-1),Iye=Hre(1);function Rye(t,e=null){return function(r,n){let{$from:i,$to:s}=r.selection,o=i.blockRange(s),a=o&&SM(o,t,e);return a?(n&&n(r.tr.wrap(o,a).scrollIntoView()),!0):!1}}function i4(t,e=null){return function(r,n){let i=!1;for(let s=0;s<r.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=r.selection.ranges[s];r.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let d=r.doc.resolve(c),h=d.index();i=d.parent.canReplaceWith(h,h+1,t)}})}if(!i)return!1;if(n){let s=r.tr;for(let o=0;o<r.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=r.selection.ranges[o];s.setBlockType(a,l,t,e)}n(s.scrollIntoView())}return!0}}function TM(...t){return function(e,r,n){for(let i=0;i<t.length;i++)if(t[i](e,r,n))return!0;return!1}}TM(EM,Are,Dre);TM(EM,qre,Lre);TM(Bre,zre,Vre,Tye);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Mye(t,e=null){return function(r,n){let{$from:i,$to:s}=r.selection,o=i.blockRange(s);if(!o)return!1;let a=n?r.tr:null;return Aye(a,o,t,e)?(n&&n(a.scrollIntoView()),!0):!1}}function Aye(t,e,r,n=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(r)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);s=new Ky(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new Ky(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=SM(s,r,n,e);return a?(t&&$ye(t,e,a,i,r),!0):!1}function $ye(t,e,r,n,i){let s=Q.empty;for(let d=r.length-1;d>=0;d--)s=Q.from(r[d].type.create(r[d].attrs,s));t.step(new Vr(e.start-(n?2:0),e.end,e.start,e.end,new ye(s,0,0),r.length,!0));let o=0;for(let d=0;d<r.length;d++)r[d].type==i&&(o=d+1);let a=r.length-o,l=e.start+r.length-(n?2:0),c=e.parent;for(let d=e.startIndex,h=e.endIndex,f=!0;d<h;d++,f=!1)!f&&go(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(d).nodeSize;return t}function Dye(t){return function(e,r){let{$from:n,$to:i}=e.selection,s=n.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?r?n.node(s.depth-1).type==t?Fye(e,r,t,s):qye(e,r,s):!0:!1}}function Fye(t,e,r,n){let i=t.tr,s=n.end,o=n.$to.end(n.depth);s<o&&(i.step(new Vr(s-1,o,s,o,new ye(Q.from(r.create(null,n.parent.copy())),1,0),1,!0)),n=new Ky(i.doc.resolve(n.$from.pos),i.doc.resolve(o),n.depth));const a=oh(n);if(a==null)return!1;i.lift(n,a);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return ul(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function qye(t,e,r){let n=t.tr,i=r.parent;for(let p=r.end,m=r.endIndex-1,g=r.startIndex;m>g;m--)p-=i.child(m).nodeSize,n.delete(p-1,p+1);let s=n.doc.resolve(r.start),o=s.nodeAfter;if(n.mapping.map(r.end)!=r.start+s.nodeAfter.nodeSize)return!1;let a=r.startIndex==0,l=r.endIndex==i.childCount,c=s.node(-1),d=s.index(-1);if(!c.canReplace(d+(a?0:1),d+1,o.content.append(l?Q.empty:Q.from(i))))return!1;let h=s.pos,f=h+o.nodeSize;return n.step(new Vr(h-(a?1:0),f+(l?1:0),h+1,f-1,new ye((a?Q.empty:Q.from(i.copy(Q.empty))).append(l?Q.empty:Q.from(i.copy(Q.empty))),a?0:1,l?0:1),a?0:1)),e(n.scrollIntoView()),!0}function Lye(t){return function(e,r){let{$from:n,$to:i}=e.selection,s=n.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(r){let c=l.lastChild&&l.lastChild.type==a.type,d=Q.from(c?t.create():null),h=new ye(Q.from(t.create(null,Q.from(a.type.create(null,d)))),c?3:1,0),f=s.start,p=s.end;r(e.tr.step(new Vr(f-(c?3:1),p,f,p,h,1,!0)).scrollIntoView())}return!0}}const tn=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Fd=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let uI=null;const ro=function(t,e,r){let n=uI||(uI=document.createRange());return n.setEnd(t,r??t.nodeValue.length),n.setStart(t,e||0),n},Bye=function(){uI=null},Oc=function(t,e,r,n){return r&&(s4(t,e,r,n,-1)||s4(t,e,r,n,1))},zye=/^(img|br|input|textarea|hr)$/i;function s4(t,e,r,n,i){for(var s;;){if(t==r&&e==n)return!0;if(e==(i<0?0:Mi(t))){let o=t.parentNode;if(!o||o.nodeType!=1||rm(t)||zye.test(t.nodeName)||t.contentEditable=="false")return!1;e=tn(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?Mi(t):0}else return!1}}function Mi(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Vye(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Mi(t)}else if(t.parentNode&&!rm(t))e=tn(t),t=t.parentNode;else return null}}function Uye(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!rm(t))e=tn(t)+1,t=t.parentNode;else return null}}function Hye(t,e,r){for(let n=e==0,i=e==Mi(t);n||i;){if(t==r)return!0;let s=tn(t);if(t=t.parentNode,!t)return!1;n=n&&s==0,i=i&&s==Mi(t)}}function rm(t){let e;for(let r=t;r&&!(e=r.pmViewDesc);r=r.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const j0=function(t){return t.focusNode&&Oc(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Ol(t,e){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=t,r.key=r.code=e,r}function Wye(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Kye(t,e,r){if(t.caretPositionFromPoint)try{let n=t.caretPositionFromPoint(e,r);if(n)return{node:n.offsetNode,offset:Math.min(Mi(n.offsetNode),n.offset)}}catch{}if(t.caretRangeFromPoint){let n=t.caretRangeFromPoint(e,r);if(n)return{node:n.startContainer,offset:Math.min(Mi(n.startContainer),n.startOffset)}}}const zs=typeof navigator<"u"?navigator:null,o4=typeof document<"u"?document:null,dl=zs&&zs.userAgent||"",dI=/Edge\/(\d+)/.exec(dl),Wre=/MSIE \d/.exec(dl),hI=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(dl),ei=!!(Wre||hI||dI),Va=Wre?document.documentMode:hI?+hI[1]:dI?+dI[1]:0,qi=!ei&&/gecko\/(\d+)/i.test(dl);qi&&+(/Firefox\/(\d+)/.exec(dl)||[0,0])[1];const fI=!ei&&/Chrome\/(\d+)/.exec(dl),Br=!!fI,Kre=fI?+fI[1]:0,vn=!ei&&!!zs&&/Apple Computer/.test(zs.vendor),qd=vn&&(/Mobile\/\w+/.test(dl)||!!zs&&zs.maxTouchPoints>2),ji=qd||(zs?/Mac/.test(zs.platform):!1),Gre=zs?/Win/.test(zs.platform):!1,uo=/Android \d/.test(dl),nm=!!o4&&"webkitFontSmoothing"in o4.documentElement.style,Gye=nm?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Yye(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Ys(t,e){return typeof t=="number"?t:t[e]}function Qye(t){let e=t.getBoundingClientRect(),r=e.width/t.offsetWidth||1,n=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*r,top:e.top,bottom:e.top+t.clientHeight*n}}function a4(t,e,r){let n=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=r||t.dom;o;){if(o.nodeType!=1){o=Fd(o);continue}let a=o,l=a==s.body,c=l?Yye(s):Qye(a),d=0,h=0;if(e.top<c.top+Ys(n,"top")?h=-(c.top-e.top+Ys(i,"top")):e.bottom>c.bottom-Ys(n,"bottom")&&(h=e.bottom-e.top>c.bottom-c.top?e.top+Ys(i,"top")-c.top:e.bottom-c.bottom+Ys(i,"bottom")),e.left<c.left+Ys(n,"left")?d=-(c.left-e.left+Ys(i,"left")):e.right>c.right-Ys(n,"right")&&(d=e.right-c.right+Ys(i,"right")),d||h)if(l)s.defaultView.scrollBy(d,h);else{let p=a.scrollLeft,m=a.scrollTop;h&&(a.scrollTop+=h),d&&(a.scrollLeft+=d);let g=a.scrollLeft-p,v=a.scrollTop-m;e={left:e.left-g,top:e.top-v,right:e.right-g,bottom:e.bottom-v}}let f=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(f))break;o=f=="absolute"?o.offsetParent:Fd(o)}}function Xye(t){let e=t.dom.getBoundingClientRect(),r=Math.max(0,e.top),n,i;for(let s=(e.left+e.right)/2,o=r+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=r-20){n=a,i=l.top;break}}return{refDOM:n,refTop:i,stack:Yre(t.dom)}}function Yre(t){let e=[],r=t.ownerDocument;for(let n=t;n&&(e.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),t!=r);n=Fd(n));return e}function Jye({refDOM:t,refTop:e,stack:r}){let n=t?t.getBoundingClientRect().top:0;Qre(r,n==0?0:n-e)}function Qre(t,e){for(let r=0;r<t.length;r++){let{dom:n,top:i,left:s}=t[r];n.scrollTop!=i+e&&(n.scrollTop=i+e),n.scrollLeft!=s&&(n.scrollLeft=s)}}let yu=null;function Zye(t){if(t.setActive)return t.setActive();if(yu)return t.focus(yu);let e=Yre(t);t.focus(yu==null?{get preventScroll(){return yu={preventScroll:!0},!0}}:void 0),yu||(yu=!1,Qre(e,0))}function Xre(t,e){let r,n=2e8,i,s=0,o=e.top,a=e.top,l,c;for(let d=t.firstChild,h=0;d;d=d.nextSibling,h++){let f;if(d.nodeType==1)f=d.getClientRects();else if(d.nodeType==3)f=ro(d).getClientRects();else continue;for(let p=0;p<f.length;p++){let m=f[p];if(m.top<=o&&m.bottom>=a){o=Math.max(m.bottom,o),a=Math.min(m.top,a);let g=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(g<n){r=d,n=g,i=g&&r.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,d.nodeType==1&&g&&(s=h+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!l&&m.left<=e.left&&m.right>=e.left&&(l=d,c={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!r&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(s=h+1)}}return!r&&l&&(r=l,i=c,n=0),r&&r.nodeType==3?eve(r,i):!r||n&&r.nodeType==1?{node:t,offset:s}:Xre(r,i)}function eve(t,e){let r=t.nodeValue.length,n=document.createRange(),i;for(let s=0;s<r;s++){n.setEnd(t,s+1),n.setStart(t,s);let o=Zo(n,1);if(o.top!=o.bottom&&OM(e,o)){i={node:t,offset:s+(e.left>=(o.left+o.right)/2?1:0)};break}}return n.detach(),i||{node:t,offset:0}}function OM(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function tve(t,e){let r=t.parentNode;return r&&/^li$/i.test(r.nodeName)&&e.left<t.getBoundingClientRect().left?r:t}function rve(t,e,r){let{node:n,offset:i}=Xre(e,r),s=-1;if(n.nodeType==1&&!n.firstChild){let o=n.getBoundingClientRect();s=o.left!=o.right&&r.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(n,i,s)}function nve(t,e,r,n){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>n.left||l.top>n.top?i=a.posBefore:(!o&&l.right<n.left||l.bottom<n.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?n.top<(l.top+l.bottom)/2:n.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,r,-1)}function Jre(t,e,r){let n=t.childNodes.length;if(n&&r.top<r.bottom)for(let i=Math.max(0,Math.min(n-1,Math.floor(n*(e.top-r.top)/(r.bottom-r.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(OM(e,c))return Jre(o,e,c)}}if((s=(s+1)%n)==i)break}return t}function ive(t,e){let r=t.dom.ownerDocument,n,i=0,s=Kye(r,e.left,e.top);s&&({node:n,offset:i}=s);let o=(t.root.elementFromPoint?t.root:r).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!OM(e,c)||(o=Jre(t.dom,e,c),!o))return null}if(vn)for(let c=o;n&&c;c=Fd(c))c.draggable&&(n=void 0);if(o=tve(o,e),n){if(qi&&n.nodeType==1&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){let d=n.childNodes[i],h;d.nodeName=="IMG"&&(h=d.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&i++}let c;nm&&i&&n.nodeType==1&&(c=n.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,n==t.dom&&i==n.childNodes.length-1&&n.lastChild.nodeType==1&&e.top>n.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||n.nodeType!=1||n.childNodes[i-1].nodeName!="BR")&&(a=nve(t,n,i,e))}a==null&&(a=rve(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function l4(t){return t.top<t.bottom||t.left<t.right}function Zo(t,e){let r=t.getClientRects();if(r.length){let n=r[e<0?0:r.length-1];if(l4(n))return n}return Array.prototype.find.call(r,l4)||t.getBoundingClientRect()}const sve=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Zre(t,e,r){let{node:n,offset:i,atom:s}=t.docView.domFromPos(e,r<0?-1:1),o=nm||qi;if(n.nodeType==3)if(o&&(sve.test(n.nodeValue)||(r<0?!i:i==n.nodeValue.length))){let l=Zo(ro(n,i,i),r);if(qi&&i&&/\s/.test(n.nodeValue[i-1])&&i<n.nodeValue.length){let c=Zo(ro(n,i-1,i-1),-1);if(c.top==l.top){let d=Zo(ro(n,i,i+1),-1);if(d.top!=l.top)return Xh(d,d.left<c.left)}}return l}else{let l=i,c=i,d=r<0?1:-1;return r<0&&!i?(c++,d=-1):r>=0&&i==n.nodeValue.length?(l--,d=1):r<0?l--:c++,Xh(Zo(ro(n,l,c),d),d<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(r<0||i==Mi(n))){let l=n.childNodes[i-1];if(l.nodeType==1)return k1(l.getBoundingClientRect(),!1)}if(s==null&&i<Mi(n)){let l=n.childNodes[i];if(l.nodeType==1)return k1(l.getBoundingClientRect(),!0)}return k1(n.getBoundingClientRect(),r>=0)}if(s==null&&i&&(r<0||i==Mi(n))){let l=n.childNodes[i-1],c=l.nodeType==3?ro(l,Mi(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Xh(Zo(c,1),!1)}if(s==null&&i<Mi(n)){let l=n.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?ro(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return Xh(Zo(c,-1),!0)}return Xh(Zo(n.nodeType==3?ro(n):n,-r),r>=0)}function Xh(t,e){if(t.width==0)return t;let r=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:r,right:r}}function k1(t,e){if(t.height==0)return t;let r=e?t.top:t.bottom;return{top:r,bottom:r,left:t.left,right:t.right}}function ene(t,e,r){let n=t.state,i=t.root.activeElement;n!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return r()}finally{n!=e&&t.updateState(n),i!=t.dom&&i&&i.focus()}}function ove(t,e,r){let n=e.selection,i=r=="up"?n.$from:n.$to;return ene(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,r=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=Zre(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=ro(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let d=l[c];if(d.bottom>d.top+1&&(r=="up"?o.top-d.top>(d.bottom-o.top)*2:d.bottom-o.bottom>(o.bottom-d.top)*2))return!1}}return!0})}const ave=/[\u0590-\u08ac]/;function lve(t,e,r){let{$head:n}=e.selection;if(!n.parent.isTextblock)return!1;let i=n.parentOffset,s=!i,o=i==n.parent.content.size,a=t.domSelection();return a?!ave.test(n.parent.textContent)||!a.modify?r=="left"||r=="backward"?s:o:ene(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:d,anchorOffset:h}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",r,"character");let p=n.depth?t.docView.domAfterPos(n.before()):t.dom,{focusNode:m,focusOffset:g}=t.domSelectionRange(),v=m&&!p.contains(m.nodeType==1?m:m.parentNode)||l==m&&c==g;try{a.collapse(d,h),l&&(l!=d||c!=h)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),v}):n.pos==n.start()||n.pos==n.end()}let c4=null,u4=null,d4=!1;function cve(t,e,r){return c4==e&&u4==r?d4:(c4=e,u4=r,d4=r=="up"||r=="down"?ove(t,e,r):lve(t,e,r))}const Li=0,h4=1,Al=2,Vs=3;class im{constructor(e,r,n,i){this.parent=e,this.children=r,this.dom=n,this.contentDOM=i,this.dirty=Li,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,r,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let r=0;r<this.children.length;r++)e+=this.children[r].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let r=0,n=this.posAtStart;;r++){let i=this.children[r];if(i==e)return n;n+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,r,n){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(n<0){let s,o;if(e==this.contentDOM)s=e.childNodes[r-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[r];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=r>tn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(r==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&r==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??n>0?this.posAtEnd:this.posAtStart}nearestDesc(e,r=!1){for(let n=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!r||s.node))if(n&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))n=!1;else return s}}getDesc(e){let r=e.pmViewDesc;for(let n=r;n;n=n.parent)if(n==this)return r}posFromDOM(e,r,n){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,r,n)}return-1}descAt(e){for(let r=0,n=0;r<this.children.length;r++){let i=this.children[r],s=n+i.size;if(n==e&&s!=n){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(e<s)return i.descAt(e-n-i.border);n=s}}domFromPos(e,r){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,i=0;for(let s=0;n<this.children.length;n++){let o=this.children[n],a=s+o.size;if(a>e||o instanceof rne){i=e-s;break}s=a}if(i)return this.children[n].domFromPos(i-this.children[n].border,r);for(let s;n&&!(s=this.children[n-1]).size&&s instanceof tne&&s.side>=0;n--);if(r<=0){let s,o=!0;for(;s=n?this.children[n-1]:null,!(!s||s.dom.parentNode==this.contentDOM);n--,o=!1);return s&&r&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,r):{node:this.contentDOM,offset:s?tn(s.dom)+1:0}}else{let s,o=!0;for(;s=n<this.children.length?this.children[n]:null,!(!s||s.dom.parentNode==this.contentDOM);n++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,r):{node:this.contentDOM,offset:s?tn(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,r,n=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:r,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=n,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let d=o+l.border;if(e>=d&&r<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,r,d);e=o;for(let h=a;h>0;h--){let f=this.children[h-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=tn(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(c>r||a==this.children.length-1)){r=c;for(let d=a+1;d<this.children.length;d++){let h=this.children[d];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){s=tn(h.dom);break}r+=h.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:r,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let r=this.children[e<0?0:this.children.length-1];return r.size==0||r.emptyChildAt(e)}domAfterPos(e){let{node:r,offset:n}=this.domFromPos(e,0);if(r.nodeType!=1||n==r.childNodes.length)throw new RangeError("No node after pos "+e);return r.childNodes[n]}setSelection(e,r,n,i=!1){let s=Math.min(e,r),o=Math.max(e,r);for(let p=0,m=0;p<this.children.length;p++){let g=this.children[p],v=m+g.size;if(s>m&&o<v)return g.setSelection(e-m-g.border,r-m-g.border,n,i);m=v}let a=this.domFromPos(e,e?-1:1),l=r==e?a:this.domFromPos(r,r?-1:1),c=n.root.getSelection(),d=n.domSelectionRange(),h=!1;if((qi||vn)&&e==r){let{node:p,offset:m}=a;if(p.nodeType==3){if(h=!!(m&&p.nodeValue[m-1]==`
`),h&&m==p.nodeValue.length)for(let g=p,v;g;g=g.parentNode){if(v=g.nextSibling){v.nodeName=="BR"&&(a=l={node:v.parentNode,offset:tn(v)+1});break}let y=g.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let g=p.childNodes[m-1];h=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(qi&&d.focusNode&&d.focusNode!=l.node&&d.focusNode.nodeType==1){let p=d.focusNode.childNodes[d.focusOffset];p&&p.contentEditable=="false"&&(i=!0)}if(!(i||h&&vn)&&Oc(a.node,a.offset,d.anchorNode,d.anchorOffset)&&Oc(l.node,l.offset,d.focusNode,d.focusOffset))return;let f=!1;if((c.extend||e==r)&&!(h&&qi)){c.collapse(a.node,a.offset);try{e!=r&&c.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>r){let m=a;a=l,l=m}let p=document.createRange();p.setEnd(l.node,l.offset),p.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,r){for(let n=0,i=0;i<this.children.length;i++){let s=this.children[i],o=n+s.size;if(n==o?e<=o&&r>=n:e<o&&r>n){let a=n+s.border,l=o-s.border;if(e>=a&&r<=l){this.dirty=e==n||r==o?Al:h4,e==a&&r==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Vs:s.markDirty(e-a,r-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Al:Vs}n=o}this.dirty=Al}markParentsDirty(){let e=1;for(let r=this.parent;r;r=r.parent,e++){let n=e==1?Al:h4;r.dirty<n&&(r.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class tne extends im{constructor(e,r,n,i){let s,o=r.type.toDOM;if(typeof o=="function"&&(o=o(n,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!r.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=r,this.widget=r,s=this}matchesWidget(e){return this.dirty==Li&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let r=this.widget.spec.stopEvent;return r?r(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class uve extends im{constructor(e,r,n,i){super(e,[],r,null),this.textDOM=n,this.text=i}get size(){return this.text.length}localPosFromDOM(e,r){return e!=this.textDOM?this.posAtStart+(r?this.size:0):this.posAtStart+r}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class jc extends im{constructor(e,r,n,i,s){super(e,[],n,i),this.mark=r,this.spec=s}static create(e,r,n,i){let s=i.nodeViews[r.type.name],o=s&&s(r,i,n);return(!o||!o.dom)&&(o=Uc.renderSpec(document,r.type.spec.toDOM(r,n),null,r.attrs)),new jc(e,r,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Vs||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Vs&&this.mark.eq(e)}markDirty(e,r){if(super.markDirty(e,r),this.dirty!=Li){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=Li}}slice(e,r,n){let i=jc.create(this.parent,this.mark,!0,n),s=this.children,o=this.size;r<o&&(s=mI(s,r,o,n)),e>0&&(s=mI(s,0,e,n));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Ua extends im{constructor(e,r,n,i,s,o,a,l,c){super(e,[],s,o),this.node=r,this.outerDeco=n,this.innerDeco=i,this.nodeDOM=a}static create(e,r,n,i,s,o){let a=s.nodeViews[r.type.name],l,c=a&&a(r,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},n,i),d=c&&c.dom,h=c&&c.contentDOM;if(r.isText){if(!d)d=document.createTextNode(r.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:h}=Uc.renderSpec(document,r.type.spec.toDOM(r),null,r.attrs));!h&&!r.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),r.type.spec.draggable&&(d.draggable=!0));let f=d;return d=sne(d,n,r),c?l=new dve(e,r,n,i,d,h||null,f,c,s,o+1):r.isText?new P0(e,r,n,i,d,f,s):new Ua(e,r,n,i,d,h||null,f,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let r=this.children.length-1;r>=0;r--){let n=this.children[r];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Q.empty)}return e}matchesNode(e,r,n){return this.dirty==Li&&e.eq(this.node)&&Yy(r,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,r){let n=this.node.inlineContent,i=r,s=e.composing?this.localCompositionInfo(e,r):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new fve(this,o&&o.node,e);gve(this.node,this.innerDeco,(c,d,h)=>{c.spec.marks?l.syncToMarks(c.spec.marks,n,e):c.type.side>=0&&!h&&l.syncToMarks(d==this.node.childCount?Tt.none:this.node.child(d).marks,n,e),l.placeWidget(c,e,i)},(c,d,h,f)=>{l.syncToMarks(c.marks,n,e);let p;l.findNodeMatch(c,d,h,f)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(p=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,d,h,p,e)||l.updateNextNode(c,d,h,e,f,i)||l.addNode(c,d,h,e,i),i+=c.nodeSize}),l.syncToMarks([],n,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Al)&&(o&&this.protectLocalComposition(e,o),nne(this.contentDOM,this.children,e),qd&&yve(this.dom))}localCompositionInfo(e,r){let{from:n,to:i}=e.state.selection;if(!(e.state.selection instanceof Be)||n<r||i>r+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=vve(this.node.content,o,n-r,i-r);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:r,pos:n,text:i}){if(this.getDesc(r))return;let s=r;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new uve(this,s,r,i);e.input.compositionNodes.push(o),this.children=mI(this.children,n,n+i.length,e,o)}update(e,r,n,i){return this.dirty==Vs||!e.sameMarkup(this.node)?!1:(this.updateInner(e,r,n,i),!0)}updateInner(e,r,n,i){this.updateOuterDeco(r),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Li}updateOuterDeco(e){if(Yy(e,this.outerDeco))return;let r=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=ine(this.dom,this.nodeDOM,pI(this.outerDeco,this.node,r),pI(e,this.node,r)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function f4(t,e,r,n,i){sne(n,e,t);let s=new Ua(void 0,t,e,r,n,n,n,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class P0 extends Ua{constructor(e,r,n,i,s,o,a){super(e,r,n,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,r,n,i){return this.dirty==Vs||this.dirty!=Li&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(r),(this.dirty!=Li||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Li,!0)}inParent(){let e=this.parent.contentDOM;for(let r=this.nodeDOM;r;r=r.parentNode)if(r==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,r,n){return e==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):super.localPosFromDOM(e,r,n)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,r,n){let i=this.node.cut(e,r),s=document.createTextNode(i.text);return new P0(this.parent,i,this.outerDeco,this.innerDeco,s,s,n)}markDirty(e,r){super.markDirty(e,r),this.dom!=this.nodeDOM&&(e==0||r==this.nodeDOM.nodeValue.length)&&(this.dirty=Vs)}get domAtom(){return!1}isText(e){return this.node.text==e}}class rne extends im{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Li&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class dve extends Ua{constructor(e,r,n,i,s,o,a,l,c,d){super(e,r,n,i,s,o,a,c,d),this.spec=l}update(e,r,n,i){if(this.dirty==Vs)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,r,n);return s&&this.updateInner(e,r,n,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,r,n,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,r,n,i){this.spec.setSelection?this.spec.setSelection(e,r,n.root):super.setSelection(e,r,n,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function nne(t,e,r){let n=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=n;)n=p4(n),i=!0;n=n.nextSibling}else i=!0,t.insertBefore(a,n);if(o instanceof jc){let l=n?n.previousSibling:t.lastChild;nne(o.contentDOM,o.children,r),n=l?l.nextSibling:t.firstChild}}for(;n;)n=p4(n),i=!0;i&&r.trackWrites==t&&(r.trackWrites=null)}const Of=function(t){t&&(this.nodeName=t)};Of.prototype=Object.create(null);const $l=[new Of];function pI(t,e,r){if(t.length==0)return $l;let n=r?$l[0]:new Of,i=[n];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(n=new Of(o.nodeName));for(let a in o){let l=o[a];l!=null&&(r&&i.length==1&&i.push(n=new Of(e.isInline?"span":"div")),a=="class"?n.class=(n.class?n.class+" ":"")+l:a=="style"?n.style=(n.style?n.style+";":"")+l:a!="nodeName"&&(n[a]=l))}}}return i}function ine(t,e,r,n){if(r==$l&&n==$l)return e;let i=e;for(let s=0;s<n.length;s++){let o=n[s],a=r[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=$l[0]),i=l}hve(i,a||$l[0],o)}return i}function hve(t,e,r){for(let n in e)n!="class"&&n!="style"&&n!="nodeName"&&!(n in r)&&t.removeAttribute(n);for(let n in r)n!="class"&&n!="style"&&n!="nodeName"&&r[n]!=e[n]&&t.setAttribute(n,r[n]);if(e.class!=r.class){let n=e.class?e.class.split(" ").filter(Boolean):[],i=r.class?r.class.split(" ").filter(Boolean):[];for(let s=0;s<n.length;s++)i.indexOf(n[s])==-1&&t.classList.remove(n[s]);for(let s=0;s<i.length;s++)n.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=r.style){if(e.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=n.exec(e.style);)t.style.removeProperty(i[1])}r.style&&(t.style.cssText+=r.style)}}function sne(t,e,r){return ine(t,t,$l,pI(e,r,t.nodeType!=1))}function Yy(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].type.eq(e[r].type))return!1;return!0}function p4(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class fve{constructor(e,r,n){this.lock=r,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=pve(e.node.content,e)}destroyBetween(e,r){if(e!=r){for(let n=e;n<r;n++)this.top.children[n].destroy();this.top.children.splice(e,r-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,r,n){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Li,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=jc.create(this.top,e[s],r,n);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,r,n,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,r,n))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,r,n)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,r,n,i,s){let o=this.top.children[i];return o.dirty==Vs&&o.dom==o.contentDOM&&(o.dirty=Al),o.update(e,r,n,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let r=e.parentNode;if(!r)return-1;if(r==this.top.contentDOM){let n=e.pmViewDesc;if(n){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==n)return i}return-1}e=r}}updateNextNode(e,r,n,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Ua){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let d=l.dom,h,f=this.isLocked(d)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Vs&&Yy(r,l.outerDeco));if(!f&&l.update(e,r,n,i))return this.destroyBetween(this.index,a),l.dom!=d&&(this.changed=!0),this.index++,!0;if(!f&&(h=this.recreateWrapper(l,e,r,n,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=h,h.contentDOM&&(h.dirty=Al,h.updateChildren(i,o+1),h.dirty=Li),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,r,n,i,s,o){if(e.dirty||r.isAtom||!e.children.length||!e.node.content.eq(r.content)||!Yy(n,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=Ua.create(this.top,r,n,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,r,n,i,s){let o=Ua.create(this.top,e,r,n,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,r,n){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new tne(this.top,e,r,n);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],r=this.top;for(;e instanceof jc;)r=e,e=r.children[r.children.length-1];(!e||!(e instanceof P0)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((vn||Br)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",r),this.addHackNode("BR",this.top))}addHackNode(e,r){if(r==this.top&&this.index<r.children.length&&r.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);e=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),e=="BR"&&(n.className="ProseMirror-trailingBreak");let i=new rne(this.top,[],n,null);r!=this.top?r.children.push(i):r.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function pve(t,e){let r=e,n=r.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(n){let c=r.children[n-1];if(c instanceof jc)r=c,n=c.children.length;else{a=c,n--;break}}else{if(r==e)break e;n=r.parent.children.indexOf(r),r=r.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function mve(t,e){return t.type.side-e.type.side}function gve(t,e,r,n){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let d=t.child(c);n(d,i,e.forChild(s,d),c),s+=d.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let d,h;for(;o<i.length&&i[o].to==s;){let v=i[o++];v.widget&&(d?(h||(h=[d])).push(v):d=v)}if(d)if(h){h.sort(mve);for(let v=0;v<h.length;v++)r(h[v],c,!!l)}else r(d,c,!!l);let f,p;if(l)p=-1,f=l,l=null;else if(c<t.childCount)p=c,f=t.child(c++);else break;for(let v=0;v<a.length;v++)a[v].to<=s&&a.splice(v--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let m=s+f.nodeSize;if(f.isText){let v=m;o<i.length&&i[o].from<v&&(v=i[o].from);for(let y=0;y<a.length;y++)a[y].to<v&&(v=a[y].to);v<m&&(l=f.cut(v-s),f=f.cut(0,v-s),m=v,p=-1)}else for(;o<i.length&&i[o].to<m;)o++;let g=f.isInline&&!f.isLeaf?a.filter(v=>!v.inline):a.slice();n(f,g,e.forChild(s,f),p),s=m}}function yve(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function vve(t,e,r,n){for(let i=0,s=0;i<t.childCount&&s<=n;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=r){if(s>=n&&l.slice(n-e.length-a,n-a)==e)return n-e.length;let c=a<n?l.lastIndexOf(e,n-a-1):-1;if(c>=0&&c+e.length+a>=r)return a+c;if(r==n&&l.length>=n+e.length-a&&l.slice(n-a,n-a+e.length)==e)return n}}return-1}function mI(t,e,r,n,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,d=a+=l.size;c>=r||d<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,n)),i&&(s.push(i),i=void 0),d>r&&s.push(l.slice(r-c,l.size,n)))}return s}function jM(t,e=null){let r=t.domSelectionRange(),n=t.state.doc;if(!r.focusNode)return null;let i=t.docView.nearestDesc(r.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(o<0)return null;let a=n.resolve(o),l,c;if(j0(r)){for(l=o;i&&!i.node;)i=i.parent;let h=i.node;if(i&&h.isAtom&&Re.isSelectable(h)&&i.parent&&!(h.isInline&&Hye(r.focusNode,r.focusOffset,i.dom))){let f=i.posBefore;c=new Re(o==f?a:n.resolve(f))}}else{if(r instanceof t.dom.ownerDocument.defaultView.Selection&&r.rangeCount>1){let h=o,f=o;for(let p=0;p<r.rangeCount;p++){let m=r.getRangeAt(p);h=Math.min(h,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(h<0)return null;[l,o]=f==t.state.selection.anchor?[f,h]:[h,f],a=n.resolve(o)}else l=t.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(l<0)return null}let d=n.resolve(l);if(!c){let h=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=PM(t,d,a,h)}return c}function one(t){return t.editable?t.hasFocus():lne(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function yo(t,e=!1){let r=t.state.selection;if(ane(t,r),!!one(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Br){let n=t.domSelectionRange(),i=t.domObserver.currentSelection;if(n.anchorNode&&i.anchorNode&&Oc(n.anchorNode,n.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)xve(t);else{let{anchor:n,head:i}=r,s,o;m4&&!(r instanceof Be)&&(r.$from.parent.inlineContent||(s=g4(t,r.from)),!r.empty&&!r.$from.parent.inlineContent&&(o=g4(t,r.to))),t.docView.setSelection(n,i,t,e),m4&&(s&&y4(s),o&&y4(o)),r.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&bve(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const m4=vn||Br&&Kre<63;function g4(t,e){let{node:r,offset:n}=t.docView.domFromPos(e,0),i=n<r.childNodes.length?r.childNodes[n]:null,s=n?r.childNodes[n-1]:null;if(vn&&i&&i.contentEditable=="false")return T1(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return T1(i);if(s)return T1(s)}}function T1(t){return t.contentEditable="true",vn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function y4(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function bve(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let r=t.domSelectionRange(),n=r.anchorNode,i=r.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(r.anchorNode!=n||r.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!one(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function xve(t){let e=t.domSelection();if(!e)return;let r=t.cursorWrapper.dom,n=r.nodeName=="IMG";n?e.collapse(r.parentNode,tn(r)+1):e.collapse(r,0),!n&&!t.state.selection.visible&&ei&&Va<=11&&(r.disabled=!0,r.disabled=!1)}function ane(t,e){if(e instanceof Re){let r=t.docView.descAt(e.from);r!=t.lastSelectedViewDesc&&(v4(t),r&&r.selectNode(),t.lastSelectedViewDesc=r)}else v4(t)}function v4(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function PM(t,e,r,n){return t.someProp("createSelectionBetween",i=>i(t,e,r))||Be.between(e,r,n)}function b4(t){return t.editable&&!t.hasFocus()?!1:lne(t)}function lne(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function wve(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),r=t.domSelectionRange();return Oc(e.node,e.offset,r.anchorNode,r.anchorOffset)}function gI(t,e){let{$anchor:r,$head:n}=t.selection,i=e>0?r.max(n):r.min(n),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&Ke.findFrom(s,e)}function na(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function x4(t,e,r){let n=t.state.selection;if(n instanceof Be)if(r.indexOf("s")>-1){let{$head:i}=n,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return na(t,new Be(n.$anchor,o))}else if(n.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=gI(t.state,e);return i&&i instanceof Re?na(t,i):!1}else if(!(ji&&r.indexOf("m")>-1)){let i=n.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?Re.isSelectable(s)?na(t,new Re(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):nm?na(t,new Be(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(n instanceof Re&&n.node.isInline)return na(t,new Be(e>0?n.$to:n.$from));{let i=gI(t.state,e);return i?na(t,i):!1}}}function Qy(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function jf(t,e){let r=t.pmViewDesc;return r&&r.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function vu(t,e){return e<0?Sve(t):_ve(t)}function Sve(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let i,s,o=!1;for(qi&&r.nodeType==1&&n<Qy(r)&&jf(r.childNodes[n],-1)&&(o=!0);;)if(n>0){if(r.nodeType!=1)break;{let a=r.childNodes[n-1];if(jf(a,-1))i=r,s=--n;else if(a.nodeType==3)r=a,n=r.nodeValue.length;else break}}else{if(cne(r))break;{let a=r.previousSibling;for(;a&&jf(a,-1);)i=r.parentNode,s=tn(a),a=a.previousSibling;if(a)r=a,n=Qy(r);else{if(r=r.parentNode,r==t.dom)break;n=0}}}o?yI(t,r,n):i&&yI(t,i,s)}function _ve(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let i=Qy(r),s,o;for(;;)if(n<i){if(r.nodeType!=1)break;let a=r.childNodes[n];if(jf(a,1))s=r,o=++n;else break}else{if(cne(r))break;{let a=r.nextSibling;for(;a&&jf(a,1);)s=a.parentNode,o=tn(a)+1,a=a.nextSibling;if(a)r=a,n=0,i=Qy(r);else{if(r=r.parentNode,r==t.dom)break;n=i=0}}}s&&yI(t,s,o)}function cne(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Eve(t,e){for(;t&&e==t.childNodes.length&&!rm(t);)e=tn(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let r=t.childNodes[e];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=0}}function Nve(t,e){for(;t&&!e&&!rm(t);)e=tn(t),t=t.parentNode;for(;t&&e;){let r=t.childNodes[e-1];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=t.childNodes.length}}function yI(t,e,r){if(e.nodeType!=3){let s,o;(o=Eve(e,r))?(e=o,r=0):(s=Nve(e,r))&&(e=s,r=s.nodeValue.length)}let n=t.domSelection();if(!n)return;if(j0(n)){let s=document.createRange();s.setEnd(e,r),s.setStart(e,r),n.removeAllRanges(),n.addRange(s)}else n.extend&&n.extend(e,r);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&yo(t)},50)}function w4(t,e){let r=t.state.doc.resolve(e);if(!(Br||Gre)&&r.parent.inlineContent){let i=t.coordsAtPos(e);if(e>r.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<r.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function S4(t,e,r){let n=t.state.selection;if(n instanceof Be&&!n.empty||r.indexOf("s")>-1||ji&&r.indexOf("m")>-1)return!1;let{$from:i,$to:s}=n;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=gI(t.state,e);if(o&&o instanceof Re)return na(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=n instanceof gi?Ke.near(o,e):Ke.findFrom(o,e);return a?na(t,a):!1}return!1}function _4(t,e){if(!(t.state.selection instanceof Be))return!0;let{$head:r,$anchor:n,empty:i}=t.state.selection;if(!r.sameParent(n))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!r.textOffset&&(e<0?r.nodeBefore:r.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(r.pos-s.nodeSize,r.pos):o.delete(r.pos,r.pos+s.nodeSize),t.dispatch(o),!0}return!1}function E4(t,e,r){t.domObserver.stop(),e.contentEditable=r,t.domObserver.start()}function Cve(t){if(!vn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(e&&e.nodeType==1&&r==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let n=e.firstChild;E4(t,n,"true"),setTimeout(()=>E4(t,n,"false"),20)}return!1}function kve(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function Tve(t,e){let r=e.keyCode,n=kve(e);if(r==8||ji&&r==72&&n=="c")return _4(t,-1)||vu(t,-1);if(r==46&&!e.shiftKey||ji&&r==68&&n=="c")return _4(t,1)||vu(t,1);if(r==13||r==27)return!0;if(r==37||ji&&r==66&&n=="c"){let i=r==37?w4(t,t.state.selection.from)=="ltr"?-1:1:-1;return x4(t,i,n)||vu(t,i)}else if(r==39||ji&&r==70&&n=="c"){let i=r==39?w4(t,t.state.selection.from)=="ltr"?1:-1:1;return x4(t,i,n)||vu(t,i)}else{if(r==38||ji&&r==80&&n=="c")return S4(t,-1,n)||vu(t,-1);if(r==40||ji&&r==78&&n=="c")return Cve(t)||S4(t,1,n)||vu(t,1);if(n==(ji?"m":"c")&&(r==66||r==73||r==89||r==90))return!0}return!1}function IM(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let r=[],{content:n,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&n.childCount==1&&n.firstChild.childCount==1;){i--,s--;let p=n.firstChild;r.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),n=p.content}let o=t.someProp("clipboardSerializer")||Uc.fromSchema(t.state.schema),a=mne(),l=a.createElement("div");l.appendChild(o.serializeFragment(n,{document:a}));let c=l.firstChild,d,h=0;for(;c&&c.nodeType==1&&(d=pne[c.nodeName.toLowerCase()]);){for(let p=d.length-1;p>=0;p--){let m=a.createElement(d[p]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),h++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${h?` -${h}`:""} ${JSON.stringify(r)}`);let f=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f,slice:e}}function une(t,e,r,n,i){let s=i.parent.type.spec.code,o,a;if(!r&&!e)return null;let l=!!e&&(n||s||!r);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,s||n,t)}),s)return a=new ye(Q.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",f=>{a=f(a,t,!0)}),a;let h=t.someProp("clipboardTextParser",f=>f(e,i,n,t));if(h)a=h;else{let f=i.marks(),{schema:p}=t.state,m=Uc.fromSchema(p);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let v=o.appendChild(document.createElement("p"));g&&v.appendChild(m.serializeNode(p.text(g,f)))})}}else t.someProp("transformPastedHTML",h=>{r=h(r,t)}),o=Ive(r),nm&&Rve(o);let c=o&&o.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let h=+d[3];h>0;h--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||za.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||d),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!Ove.test(f.parentNode.nodeName)?{ignore:!0}:null}})),d)a=Mve(N4(a,+d[1],+d[2]),d[4]);else if(a=ye.maxOpen(jve(a.content,i),!0),a.openStart||a.openEnd){let h=0,f=0;for(let p=a.content.firstChild;h<a.openStart&&!p.type.spec.isolating;h++,p=p.firstChild);for(let p=a.content.lastChild;f<a.openEnd&&!p.type.spec.isolating;f++,p=p.lastChild);a=N4(a,h,f)}return t.someProp("transformPasted",h=>{a=h(a,t,l)}),a}const Ove=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function jve(t,e){if(t.childCount<2)return t;for(let r=e.depth;r>=0;r--){let i=e.node(r).contentMatchAt(e.index(r)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&hne(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=fne(o[o.length-1],s.length));let d=dne(a,l);o.push(d),i=i.matchType(d.type),s=l}}),o)return Q.from(o)}return t}function dne(t,e,r=0){for(let n=e.length-1;n>=r;n--)t=e[n].create(null,Q.from(t));return t}function hne(t,e,r,n,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=hne(t,e,r,n.lastChild,i+1);if(s)return n.copy(n.content.replaceChild(n.childCount-1,s));if(n.contentMatchAt(n.childCount).matchType(i==t.length-1?r.type:t[i+1]))return n.copy(n.content.append(Q.from(dne(r,t,i+1))))}}function fne(t,e){if(e==0)return t;let r=t.content.replaceChild(t.childCount-1,fne(t.lastChild,e-1)),n=t.contentMatchAt(t.childCount).fillBefore(Q.empty,!0);return t.copy(r.append(n))}function vI(t,e,r,n,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<n-1&&(a=vI(a,e,r,n,i+1,s)),i>=r&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(Q.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function N4(t,e,r){return e<t.openStart&&(t=new ye(vI(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),r<t.openEnd&&(t=new ye(vI(t.content,1,r,t.openEnd,0,0),t.openStart,r)),t}const pne={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let C4=null;function mne(){return C4||(C4=document.implementation.createHTMLDocument("title"))}let O1=null;function Pve(t){let e=window.trustedTypes;return e?(O1||(O1=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:r=>r})),O1.createHTML(t)):t}function Ive(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let r=mne().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(t),i;if((i=n&&pne[n[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),r.innerHTML=Pve(t),i)for(let s=0;s<i.length;s++)r=r.querySelector(i[s])||r;return r}function Rve(t){let e=t.querySelectorAll(Br?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<e.length;r++){let n=e[r];n.childNodes.length==1&&n.textContent==""&&n.parentNode&&n.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),n)}}function Mve(t,e){if(!t.size)return t;let r=t.content.firstChild.type.schema,n;try{n=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=n.length-2;a>=0;a-=2){let l=r.nodes[n[a]];if(!l||l.hasRequiredAttrs())break;i=Q.from(l.create(n[a+1],i)),s++,o++}return new ye(i,s,o)}const jn={},Pn={},Ave={touchstart:!0,touchmove:!0};class $ve{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Dve(t){for(let e in jn){let r=jn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=n=>{qve(t,n)&&!RM(t,n)&&(t.editable||!(n.type in Pn))&&r(t,n)},Ave[e]?{passive:!0}:void 0)}vn&&t.dom.addEventListener("input",()=>null),bI(t)}function Oa(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Fve(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function bI(t){t.someProp("handleDOMEvents",e=>{for(let r in e)t.input.eventHandlers[r]||t.dom.addEventListener(r,t.input.eventHandlers[r]=n=>RM(t,n))})}function RM(t,e){return t.someProp("handleDOMEvents",r=>{let n=r[e.type];return n?n(t,e)||e.defaultPrevented:!1})}function qve(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r=e.target;r!=t.dom;r=r.parentNode)if(!r||r.nodeType==11||r.pmViewDesc&&r.pmViewDesc.stopEvent(e))return!1;return!0}function Lve(t,e){!RM(t,e)&&jn[e.type]&&(t.editable||!(e.type in Pn))&&jn[e.type](t,e)}Pn.keydown=(t,e)=>{let r=e;if(t.input.shiftKey=r.keyCode==16||r.shiftKey,!yne(t,r)&&(t.input.lastKeyCode=r.keyCode,t.input.lastKeyCodeTime=Date.now(),!(uo&&Br&&r.keyCode==13)))if(r.keyCode!=229&&t.domObserver.forceFlush(),qd&&r.keyCode==13&&!r.ctrlKey&&!r.altKey&&!r.metaKey){let n=Date.now();t.input.lastIOSEnter=n,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==n&&(t.someProp("handleKeyDown",i=>i(t,Ol(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",n=>n(t,r))||Tve(t,r)?r.preventDefault():Oa(t,"key")};Pn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Pn.keypress=(t,e)=>{let r=e;if(yne(t,r)||!r.charCode||r.ctrlKey&&!r.altKey||ji&&r.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,r))){r.preventDefault();return}let n=t.state.selection;if(!(n instanceof Be)||!n.$from.sameParent(n.$to)){let i=String.fromCharCode(r.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,n.$from.pos,n.$to.pos,i,s))&&t.dispatch(s()),r.preventDefault()}};function I0(t){return{left:t.clientX,top:t.clientY}}function Bve(t,e){let r=e.x-t.clientX,n=e.y-t.clientY;return r*r+n*n<100}function MM(t,e,r,n,i){if(n==-1)return!1;let s=t.state.doc.resolve(n);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,r,s.nodeAfter,s.before(o),i,!0):a(t,r,s.node(o),s.before(o),i,!1)))return!0;return!1}function rd(t,e,r){if(t.focused||t.focus(),t.state.selection.eq(e))return;let n=t.state.tr.setSelection(e);n.setMeta("pointer",!0),t.dispatch(n)}function zve(t,e){if(e==-1)return!1;let r=t.state.doc.resolve(e),n=r.nodeAfter;return n&&n.isAtom&&Re.isSelectable(n)?(rd(t,new Re(r)),!0):!1}function Vve(t,e){if(e==-1)return!1;let r=t.state.selection,n,i;r instanceof Re&&(n=r.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(Re.isSelectable(a)){n&&r.$from.depth>0&&o>=r.$from.depth&&s.before(r.$from.depth+1)==r.$from.pos?i=s.before(r.$from.depth):i=s.before(o);break}}return i!=null?(rd(t,Re.create(t.state.doc,i)),!0):!1}function Uve(t,e,r,n,i){return MM(t,"handleClickOn",e,r,n)||t.someProp("handleClick",s=>s(t,e,n))||(i?Vve(t,r):zve(t,r))}function Hve(t,e,r,n){return MM(t,"handleDoubleClickOn",e,r,n)||t.someProp("handleDoubleClick",i=>i(t,e,n))}function Wve(t,e,r,n){return MM(t,"handleTripleClickOn",e,r,n)||t.someProp("handleTripleClick",i=>i(t,e,n))||Kve(t,r,n)}function Kve(t,e,r){if(r.button!=0)return!1;let n=t.state.doc;if(e==-1)return n.inlineContent?(rd(t,Be.create(n,0,n.content.size)),!0):!1;let i=n.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)rd(t,Be.create(n,a+1,a+1+o.content.size));else if(Re.isSelectable(o))rd(t,Re.create(n,a));else continue;return!0}}function AM(t){return Xy(t)}const gne=ji?"metaKey":"ctrlKey";jn.mousedown=(t,e)=>{let r=e;t.input.shiftKey=r.shiftKey;let n=AM(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&Bve(r,t.input.lastClick)&&!r[gne]&&t.input.lastClick.button==r.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:r.clientX,y:r.clientY,type:s,button:r.button};let o=t.posAtCoords(I0(r));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Gve(t,o,r,!!n)):(s=="doubleClick"?Hve:Wve)(t,o.pos,o.inside,r)?r.preventDefault():Oa(t,"pointer"))};class Gve{constructor(e,r,n,i){this.view=e,this.pos=r,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[gne],this.allowDefault=n.shiftKey;let s,o;if(r.inside>-1)s=e.state.doc.nodeAt(r.inside),o=r.inside;else{let d=e.state.doc.resolve(r.pos);s=d.parent,o=d.depth?d.before():0}const a=i?null:n.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=e.state;(n.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof Re&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&qi&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Oa(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>yo(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let r=this.pos;this.view.state.doc!=this.startDoc&&(r=this.view.posAtCoords(I0(e))),this.updateAllowDefault(e),this.allowDefault||!r?Oa(this.view,"pointer"):Uve(this.view,r.pos,r.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||vn&&this.mightDrag&&!this.mightDrag.node.isAtom||Br&&!this.view.state.selection.visible&&Math.min(Math.abs(r.pos-this.view.state.selection.from),Math.abs(r.pos-this.view.state.selection.to))<=2)?(rd(this.view,Ke.near(this.view.state.doc.resolve(r.pos))),e.preventDefault()):Oa(this.view,"pointer")}move(e){this.updateAllowDefault(e),Oa(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}jn.touchstart=t=>{t.input.lastTouch=Date.now(),AM(t),Oa(t,"pointer")};jn.touchmove=t=>{t.input.lastTouch=Date.now(),Oa(t,"pointer")};jn.contextmenu=t=>AM(t);function yne(t,e){return t.composing?!0:vn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const Yve=uo?5e3:-1;Pn.compositionstart=Pn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,r=e.selection.$to;if(e.selection instanceof Be&&(e.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)||Br&&Gre&&Qve(t)))t.markCursor=t.state.storedMarks||r.marks(),Xy(t,!0),t.markCursor=null;else if(Xy(t,!e.selection.empty),qi&&e.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let n=t.domSelectionRange();for(let i=n.focusNode,s=n.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}vne(t,Yve)};function Qve(t){let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(!e||e.nodeType!=1||r>=e.childNodes.length)return!1;let n=e.childNodes[r];return n.nodeType==1&&n.contentEditable=="false"}Pn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,vne(t,20))};function vne(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Xy(t),e))}function bne(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=Jve());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function Xve(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let r=Vye(e.focusNode,e.focusOffset),n=Uye(e.focusNode,e.focusOffset);if(r&&n&&r!=n){let i=n.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(r==s||n==s)return s;if(!i||!i.isText(n.nodeValue))return n;if(t.input.compositionNode==n){let o=r.pmViewDesc;if(!(!o||!o.isText(r.nodeValue)))return n}}return r||n}function Jve(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Xy(t,e=!1){if(!(uo&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),bne(t),e||t.docView&&t.docView.dirty){let r=jM(t),n=t.state.selection;return r&&!r.eq(n)?t.dispatch(t.state.tr.setSelection(r)):(t.markCursor||e)&&!n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function Zve(t,e){if(!t.dom.parentNode)return;let r=t.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(e),r.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),n.removeAllRanges(),n.addRange(i),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),t.focus()},50)}const gp=ei&&Va<15||qd&&Gye<604;jn.copy=Pn.cut=(t,e)=>{let r=e,n=t.state.selection,i=r.type=="cut";if(n.empty)return;let s=gp?null:r.clipboardData,o=n.content(),{dom:a,text:l}=IM(t,o);s?(r.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):Zve(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function e0e(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function t0e(t,e){if(!t.dom.parentNode)return;let r=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,n=t.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),n.parentNode&&n.parentNode.removeChild(n),r?yp(t,n.value,null,i,e):yp(t,n.textContent,n.innerHTML,i,e)},50)}function yp(t,e,r,n,i){let s=une(t,e,r,n,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||ye.empty)))return!0;if(!s)return!1;let o=e0e(s),a=o?t.state.tr.replaceSelectionWith(o,n):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function xne(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let r=t.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}Pn.paste=(t,e)=>{let r=e;if(t.composing&&!uo)return;let n=gp?null:r.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;n&&yp(t,xne(n),n.getData("text/html"),i,r)?r.preventDefault():t0e(t,r)};class wne{constructor(e,r,n){this.slice=e,this.move=r,this.node=n}}const r0e=ji?"altKey":"ctrlKey";function Sne(t,e){let r=t.someProp("dragCopies",n=>!n(e));return r??!e[r0e]}jn.dragstart=(t,e)=>{let r=e,n=t.input.mouseDown;if(n&&n.done(),!r.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(I0(r)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Re?i.to-1:i.to))){if(n&&n.mightDrag)o=Re.create(t.state.doc,n.mightDrag.pos);else if(r.target&&r.target.nodeType==1){let h=t.docView.nearestDesc(r.target,!0);h&&h.node.type.spec.draggable&&h!=t.docView&&(o=Re.create(t.state.doc,h.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c,slice:d}=IM(t,a);(!r.dataTransfer.files.length||!Br||Kre>120)&&r.dataTransfer.clearData(),r.dataTransfer.setData(gp?"Text":"text/html",l.innerHTML),r.dataTransfer.effectAllowed="copyMove",gp||r.dataTransfer.setData("text/plain",c),t.dragging=new wne(d,Sne(t,r),o)};jn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Pn.dragover=Pn.dragenter=(t,e)=>e.preventDefault();Pn.drop=(t,e)=>{try{n0e(t,e,t.dragging)}finally{t.dragging=null}};function n0e(t,e,r){if(!e.dataTransfer)return;let n=t.posAtCoords(I0(e));if(!n)return;let i=t.state.doc.resolve(n.pos),s=r&&r.slice;s?t.someProp("transformPasted",p=>{s=p(s,t,!1)}):s=une(t,xne(e.dataTransfer),gp?null:e.dataTransfer.getData("text/html"),!1,i);let o=!!(r&&Sne(t,e));if(t.someProp("handleDrop",p=>p(t,e,s||ye.empty,o))){e.preventDefault();return}if(!s)return;e.preventDefault();let a=s?Cre(t.state.doc,i.pos,s):i.pos;a==null&&(a=i.pos);let l=t.state.tr;if(o){let{node:p}=r;p?p.replace(l):l.deleteSelection()}let c=l.mapping.map(a),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,h=l.doc;if(d?l.replaceRangeWith(c,c,s.content.firstChild):l.replaceRange(c,c,s),l.doc.eq(h))return;let f=l.doc.resolve(c);if(d&&Re.isSelectable(s.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(s.content.firstChild))l.setSelection(new Re(f));else{let p=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((m,g,v,y)=>p=y),l.setSelection(PM(t,f,l.doc.resolve(p)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}jn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&yo(t)},20))};jn.blur=(t,e)=>{let r=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),r.relatedTarget&&t.dom.contains(r.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};jn.beforeinput=(t,e)=>{if(Br&&uo&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:n}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=n||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Ol(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Pn)jn[t]=Pn[t];function vp(t,e){if(t==e)return!0;for(let r in t)if(t[r]!==e[r])return!1;for(let r in e)if(!(r in t))return!1;return!0}class Jy{constructor(e,r){this.toDOM=e,this.spec=r||sc,this.side=this.spec.side||0}map(e,r,n,i){let{pos:s,deleted:o}=e.mapResult(r.from+i,this.side<0?-1:1);return o?null:new Tn(s-n,s-n,this)}valid(){return!0}eq(e){return this==e||e instanceof Jy&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&vp(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Ha{constructor(e,r){this.attrs=e,this.spec=r||sc}map(e,r,n,i){let s=e.map(r.from+i,this.spec.inclusiveStart?-1:1)-n,o=e.map(r.to+i,this.spec.inclusiveEnd?1:-1)-n;return s>=o?null:new Tn(s,o,this)}valid(e,r){return r.from<r.to}eq(e){return this==e||e instanceof Ha&&vp(this.attrs,e.attrs)&&vp(this.spec,e.spec)}static is(e){return e.type instanceof Ha}destroy(){}}class $M{constructor(e,r){this.attrs=e,this.spec=r||sc}map(e,r,n,i){let s=e.mapResult(r.from+i,1);if(s.deleted)return null;let o=e.mapResult(r.to+i,-1);return o.deleted||o.pos<=s.pos?null:new Tn(s.pos-n,o.pos-n,this)}valid(e,r){let{index:n,offset:i}=e.content.findIndex(r.from),s;return i==r.from&&!(s=e.child(n)).isText&&i+s.nodeSize==r.to}eq(e){return this==e||e instanceof $M&&vp(this.attrs,e.attrs)&&vp(this.spec,e.spec)}destroy(){}}class Tn{constructor(e,r,n){this.from=e,this.to=r,this.type=n}copy(e,r){return new Tn(e,r,this.type)}eq(e,r=0){return this.type.eq(e.type)&&this.from+r==e.from&&this.to+r==e.to}map(e,r,n){return this.type.map(e,this,r,n)}static widget(e,r,n){return new Tn(e,e,new Jy(r,n))}static inline(e,r,n,i){return new Tn(e,r,new Ha(n,i))}static node(e,r,n,i){return new Tn(e,r,new $M(n,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ha}get widget(){return this.type instanceof Jy}}const Eu=[],sc={};class Kt{constructor(e,r){this.local=e.length?e:Eu,this.children=r.length?r:Eu}static create(e,r){return r.length?Zy(r,e,0,sc):fn}find(e,r,n){let i=[];return this.findInner(e??0,r??1e9,i,0,n),i}findInner(e,r,n,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=r&&a.to>=e&&(!s||s(a.spec))&&n.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<r&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,r-a,n,i+a,s)}}map(e,r,n){return this==fn||e.maps.length==0?this:this.mapInner(e,r,0,0,n||sc)}mapInner(e,r,n,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,n,i);l&&l.type.valid(r,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?i0e(this.children,o||[],e,r,n,i,s):o?new Kt(o.sort(oc),Eu):fn}add(e,r){return r.length?this==fn?Kt.create(e,r):this.addInner(e,r,0):this}addInner(e,r,n){let i,s=0;e.forEach((a,l)=>{let c=l+n,d;if(d=Ene(r,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,d,c+1):i.splice(s,0,l,l+a.nodeSize,Zy(d,a,c+1,sc)),s+=3}});let o=_ne(s?Nne(r):r,-n);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new Kt(o.length?this.local.concat(o).sort(oc):this.local,i||this.children)}remove(e){return e.length==0||this==fn?this:this.removeInner(e,0)}removeInner(e,r){let n=this.children,i=this.local;for(let s=0;s<n.length;s+=3){let o,a=n[s]+r,l=n[s+1]+r;for(let d=0,h;d<e.length;d++)(h=e[d])&&h.from>a&&h.to<l&&(e[d]=null,(o||(o=[])).push(h));if(!o)continue;n==this.children&&(n=this.children.slice());let c=n[s+2].removeInner(o,a+1);c!=fn?n[s+2]=c:(n.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,r)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return n==this.children&&i==this.local?this:i.length||n.length?new Kt(i,n):fn}forChild(e,r){if(this==fn)return this;if(r.isLeaf)return Kt.empty;let n,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(n=this.children[a+2]);break}let s=e+1,o=s+r.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Ha){let c=Math.max(s,l.from)-s,d=Math.min(o,l.to)-s;c<d&&(i||(i=[])).push(l.copy(c,d))}}if(i){let a=new Kt(i.sort(oc),Eu);return n?new da([a,n]):a}return n||fn}eq(e){if(this==e)return!0;if(!(e instanceof Kt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let r=0;r<this.local.length;r++)if(!this.local[r].eq(e.local[r]))return!1;for(let r=0;r<this.children.length;r+=3)if(this.children[r]!=e.children[r]||this.children[r+1]!=e.children[r+1]||!this.children[r+2].eq(e.children[r+2]))return!1;return!0}locals(e){return DM(this.localsInner(e))}localsInner(e){if(this==fn)return Eu;if(e.inlineContent||!this.local.some(Ha.is))return this.local;let r=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof Ha||r.push(this.local[n]);return r}forEachSet(e){e(this)}}Kt.empty=new Kt([],[]);Kt.removeOverlap=DM;const fn=Kt.empty;class da{constructor(e){this.members=e}map(e,r){const n=this.members.map(i=>i.map(e,r,sc));return da.from(n)}forChild(e,r){if(r.isLeaf)return Kt.empty;let n=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,r);s!=fn&&(s instanceof da?n=n.concat(s.members):n.push(s))}return da.from(n)}eq(e){if(!(e instanceof da)||e.members.length!=this.members.length)return!1;for(let r=0;r<this.members.length;r++)if(!this.members[r].eq(e.members[r]))return!1;return!0}locals(e){let r,n=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!r)r=s;else{n&&(r=r.slice(),n=!1);for(let o=0;o<s.length;o++)r.push(s[o])}}return r?DM(n?r:r.sort(oc)):Eu}static from(e){switch(e.length){case 0:return fn;case 1:return e[0];default:return new da(e.every(r=>r instanceof Kt)?e:e.reduce((r,n)=>r.concat(n instanceof Kt?n:n.members),[]))}}forEachSet(e){for(let r=0;r<this.members.length;r++)this.members[r].forEachSet(e)}}function i0e(t,e,r,n,i,s,o){let a=t.slice();for(let c=0,d=s;c<r.maps.length;c++){let h=0;r.maps[c].forEach((f,p,m,g)=>{let v=g-m-(p-f);for(let y=0;y<a.length;y+=3){let b=a[y+1];if(b<0||f>b+d-h)continue;let w=a[y]+d-h;p>=w?a[y+1]=f<=w?-2:-1:f>=d&&v&&(a[y]+=v,a[y+1]+=v)}h+=v}),d=r.maps[c].map(d,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let d=r.map(t[c]+s),h=d-i;if(h<0||h>=n.content.size){l=!0;continue}let f=r.map(t[c+1]+s,-1),p=f-i,{index:m,offset:g}=n.content.findIndex(h),v=n.maybeChild(m);if(v&&g==h&&g+v.nodeSize==p){let y=a[c+2].mapInner(r,v,d+1,t[c]+s+1,o);y!=fn?(a[c]=h,a[c+1]=p,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=s0e(a,t,e,r,i,s,o),d=Zy(c,n,0,o);e=d.local;for(let h=0;h<a.length;h+=3)a[h+1]<0&&(a.splice(h,3),h-=3);for(let h=0,f=0;h<d.children.length;h+=3){let p=d.children[h];for(;f<a.length&&a[f]<p;)f+=3;a.splice(f,0,d.children[h],d.children[h+1],d.children[h+2])}}return new Kt(e.sort(oc),a)}function _ne(t,e){if(!e||!t.length)return t;let r=[];for(let n=0;n<t.length;n++){let i=t[n];r.push(new Tn(i.from+e,i.to+e,i.type))}return r}function s0e(t,e,r,n,i,s,o){function a(l,c){for(let d=0;d<l.local.length;d++){let h=l.local[d].map(n,i,c);h?r.push(h):o.onRemove&&o.onRemove(l.local[d].spec)}for(let d=0;d<l.children.length;d+=3)a(l.children[d+2],l.children[d]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return r}function Ene(t,e,r){if(e.isLeaf)return null;let n=r+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>r&&o.to<n&&((i||(i=[])).push(o),t[s]=null);return i}function Nne(t){let e=[];for(let r=0;r<t.length;r++)t[r]!=null&&e.push(t[r]);return e}function Zy(t,e,r,n){let i=[],s=!1;e.forEach((a,l)=>{let c=Ene(t,a,l+r);if(c){s=!0;let d=Zy(c,a,r+l+1,n);d!=fn&&i.push(l,l+a.nodeSize,d)}});let o=_ne(s?Nne(t):t,-r).sort(oc);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(n.onRemove&&n.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new Kt(o,i):fn}function oc(t,e){return t.from-e.from||t.to-e.to}function DM(t){let e=t;for(let r=0;r<e.length-1;r++){let n=e[r];if(n.from!=n.to)for(let i=r+1;i<e.length;i++){let s=e[i];if(s.from==n.from){s.to!=n.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,n.to),k4(e,i+1,s.copy(n.to,s.to)));continue}else{s.from<n.to&&(e==t&&(e=t.slice()),e[r]=n.copy(n.from,s.from),k4(e,i,n.copy(s.from,n.to)));break}}}return e}function k4(t,e,r){for(;e<t.length&&oc(r,t[e])>0;)e++;t.splice(e,0,r)}function j1(t){let e=[];return t.someProp("decorations",r=>{let n=r(t.state);n&&n!=fn&&e.push(n)}),t.cursorWrapper&&e.push(Kt.create(t.state.doc,[t.cursorWrapper.deco])),da.from(e)}const o0e={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},a0e=ei&&Va<=11;class l0e{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class c0e{constructor(e,r){this.view=e,this.handleDOMChange=r,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new l0e,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let i=0;i<n.length;i++)this.queue.push(n[i]);ei&&Va<=11&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),a0e&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,o0e)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let r=0;r<e.length;r++)this.queue.push(e[r]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(b4(this.view)){if(this.suppressingSelectionUpdates)return yo(this.view);if(ei&&Va<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Oc(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let r=new Set,n;for(let s=e.focusNode;s;s=Fd(s))r.add(s);for(let s=e.anchorNode;s;s=Fd(s))if(r.has(s)){n=s;break}let i=n&&this.view.docView.nearestDesc(n);if(i&&i.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let r=this.pendingRecords();r.length&&(this.queue=[]);let n=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&b4(e)&&!this.ignoreSelectionChange(n),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let d=0;d<r.length;d++){let h=this.registerMutation(r[d],l);h&&(s=s<0?h.from:Math.min(h.from,s),o=o<0?h.to:Math.max(h.to,o),h.typeOver&&(a=!0))}if(qi&&l.length){let d=l.filter(h=>h.nodeName=="BR");if(d.length==2){let[h,f]=d;h.parentNode&&h.parentNode.parentNode==f.parentNode?f.remove():h.remove()}else{let{focusNode:h}=this.currentSelection;for(let f of d){let p=f.parentNode;p&&p.nodeName=="LI"&&(!h||h0e(e,h)!=p)&&f.remove()}}}else if((Br||vn)&&l.some(d=>d.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let d of l)if(d.nodeName=="BR"&&d.parentNode){let h=d.nextSibling;h&&h.nodeType==1&&h.contentEditable=="false"&&d.parentNode.removeChild(d)}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&j0(n)&&(c=jM(e))&&c.eq(Ke.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,yo(e),this.currentSelection.set(n),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),u0e(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||yo(e),this.currentSelection.set(n))}registerMutation(e,r){if(r.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(n==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let h=e.addedNodes[d];r.push(h),h.nodeType==3&&(this.lastChangedTextNode=h)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let i=e.previousSibling,s=e.nextSibling;if(ei&&Va<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:h,nextSibling:f}=e.addedNodes[d];(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}let o=i&&i.parentNode==e.target?tn(i)+1:0,a=n.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?tn(s):e.target.childNodes.length,c=n.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let T4=new WeakMap,O4=!1;function u0e(t){if(!T4.has(t)&&(T4.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=qi,O4)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),O4=!0}}function j4(t,e){let r=e.startContainer,n=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return Oc(o.node,o.offset,i,s)&&([r,n,i,s]=[i,s,r,n]),{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:s}}function d0e(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return j4(t,i)}let r;function n(i){i.preventDefault(),i.stopImmediatePropagation(),r=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0),r?j4(t,r):null}function h0e(t,e){for(let r=e.parentNode;r&&r!=t.dom;r=r.parentNode){let n=t.docView.nearestDesc(r,!0);if(n&&n.node.isBlock)return r}return null}function f0e(t,e,r){let{node:n,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,r),l=t.domSelectionRange(),c,d=l.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(c=[{node:d,offset:l.anchorOffset}],j0(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Br&&t.input.lastKeyCode===8)for(let v=s;v>i;v--){let y=n.childNodes[v-1],b=y.pmViewDesc;if(y.nodeName=="BR"&&!b){s=v;break}if(!b||b.size)break}let h=t.state.doc,f=t.someProp("domParser")||za.fromSchema(t.state.schema),p=h.resolve(o),m=null,g=f.parse(n,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:s,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:p0e,context:p});if(c&&c[0].pos!=null){let v=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=v),m={anchor:v+o,head:y+o}}return{doc:g,sel:m,from:o,to:a}}function p0e(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(vn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}else if(t.parentNode.lastChild==t||vn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const m0e=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function g0e(t,e,r,n,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let E=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,N=jM(t,E);if(N&&!t.state.selection.eq(N)){if(Br&&uo&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",C=>C(t,Ol(13,"Enter"))))return;let k=t.state.tr.setSelection(N);E=="pointer"?k.setMeta("pointer",!0):E=="key"&&k.scrollIntoView(),s&&k.setMeta("composition",s),t.dispatch(k)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(r);e=o.before(a+1),r=t.state.doc.resolve(r).after(a+1);let l=t.state.selection,c=f0e(t,e,r),d=t.state.doc,h=d.slice(c.from,c.to),f,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,p="end"):(f=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let m=b0e(h.content,c.doc.content,c.from,f,p);if(m&&t.input.domChangeCount++,(qd&&t.input.lastIOSEnter>Date.now()-225||uo)&&i.some(E=>E.nodeType==1&&!m0e.test(E.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",E=>E(t,Ol(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(n&&l instanceof Be&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))m={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let E=P4(t,t.state.doc,c.sel);if(E&&!E.eq(t.state.selection)){let N=t.state.tr.setSelection(E);s&&N.setMeta("composition",s),t.dispatch(N)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof Be&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),ei&&Va<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>c.from&&c.doc.textBetween(m.start-c.from-1,m.start-c.from+1)==" "&&(m.start--,m.endA--,m.endB--);let g=c.doc.resolveNoCache(m.start-c.from),v=c.doc.resolveNoCache(m.endB-c.from),y=d.resolve(m.start),b=g.sameParent(v)&&g.parent.inlineContent&&y.end()>=m.endA;if((qd&&t.input.lastIOSEnter>Date.now()-225&&(!b||i.some(E=>E.nodeName=="DIV"||E.nodeName=="P"))||!b&&g.pos<c.doc.content.size&&(!g.sameParent(v)||!g.parent.inlineContent)&&g.pos<v.pos&&!/\S/.test(c.doc.textBetween(g.pos,v.pos,"","")))&&t.someProp("handleKeyDown",E=>E(t,Ol(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&v0e(d,m.start,m.endA,g,v)&&t.someProp("handleKeyDown",E=>E(t,Ol(8,"Backspace")))){uo&&Br&&t.domObserver.suppressSelectionUpdates();return}Br&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),uo&&!b&&g.start()!=v.start()&&v.parentOffset==0&&g.depth==v.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==m.endA&&(m.endB-=2,v=c.doc.resolveNoCache(m.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(E){return E(t,Ol(13,"Enter"))})},20));let w=m.start,x=m.endA,S=E=>{let N=E||t.state.tr.replace(w,x,c.doc.slice(m.start-c.from,m.endB-c.from));if(c.sel){let k=P4(t,N.doc,c.sel);k&&!(Br&&t.composing&&k.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(k.head==w||k.head==N.mapping.map(x)-1)||ei&&k.empty&&k.head==w)&&N.setSelection(k)}return s&&N.setMeta("composition",s),N.scrollIntoView()},_;if(b)if(g.pos==v.pos){ei&&Va<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>yo(t),20));let E=S(t.state.tr.delete(w,x)),N=d.resolve(m.start).marksAcross(d.resolve(m.endA));N&&E.ensureMarks(N),t.dispatch(E)}else if(m.endA==m.endB&&(_=y0e(g.parent.content.cut(g.parentOffset,v.parentOffset),y.parent.content.cut(y.parentOffset,m.endA-y.start())))){let E=S(t.state.tr);_.type=="add"?E.addMark(w,x,_.mark):E.removeMark(w,x,_.mark),t.dispatch(E)}else if(g.parent.child(g.index()).isText&&g.index()==v.index()-(v.textOffset?0:1)){let E=g.parent.textBetween(g.parentOffset,v.parentOffset),N=()=>S(t.state.tr.insertText(E,w,x));t.someProp("handleTextInput",k=>k(t,w,x,E,N))||t.dispatch(N())}else t.dispatch(S());else t.dispatch(S())}function P4(t,e,r){return Math.max(r.anchor,r.head)>e.content.size?null:PM(t,e.resolve(r.anchor),e.resolve(r.head))}function y0e(t,e){let r=t.firstChild.marks,n=e.firstChild.marks,i=r,s=n,o,a,l;for(let d=0;d<n.length;d++)i=n[d].removeFromSet(i);for(let d=0;d<r.length;d++)s=r[d].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=d=>d.mark(a.addToSet(d.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=d=>d.mark(a.removeFromSet(d.marks));else return null;let c=[];for(let d=0;d<e.childCount;d++)c.push(l(e.child(d)));if(Q.from(c).eq(t))return{mark:a,type:o}}function v0e(t,e,r,n,i){if(r-e<=i.pos-n.pos||P1(n,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!n.parent.isTextblock){let a=s.nodeAfter;return a!=null&&r==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(P1(s,!0,!0));return!o.parent.isTextblock||o.pos>r||P1(o,!0,!1)<r?!1:n.parent.content.cut(n.parentOffset).eq(o.parent.content)}function P1(t,e,r){let n=t.depth,i=e?t.end():t.pos;for(;n>0&&(e||t.indexAfter(n)==t.node(n).childCount);)n--,i++,e=!1;if(r){let s=t.node(n).maybeChild(t.indexAfter(n));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function b0e(t,e,r,n,i){let s=t.findDiffStart(e,r);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,r+t.size,r+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.size<e.size){let l=n<=s&&n>=o?s-n:0;s-=l,s&&s<e.size&&I4(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,s&&s<t.size&&I4(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function I4(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),r=t.charCodeAt(1);return e>=56320&&e<=57343&&r>=55296&&r<=56319}class Cne{constructor(e,r){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new $ve,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=r,this.state=r.state,this.directPlugins=r.plugins||[],this.directPlugins.forEach(D4),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=A4(this),M4(this),this.nodeViews=$4(this),this.docView=f4(this.state.doc,R4(this),j1(this),this.dom,this),this.domObserver=new c0e(this,(n,i,s,o)=>g0e(this,n,i,s,o)),this.domObserver.start(),Dve(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let r in e)this._props[r]=e[r];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&bI(this);let r=this._props;this._props=e,e.plugins&&(e.plugins.forEach(D4),this.directPlugins=e.plugins),this.updateStateInner(e.state,r)}setProps(e){let r={};for(let n in this._props)r[n]=this._props[n];r.state=this.state;for(let n in e)r[n]=e[n];this.update(r)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,r){var n;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(bne(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=r.plugins;if(a||this._props.plugins!=r.plugins||this._props.nodeViews!=r.nodeViews){let p=$4(this);w0e(p,this.nodeViews)&&(this.nodeViews=p,s=!0)}(a||r.handleDOMEvents!=this._props.handleDOMEvents)&&bI(this),this.editable=A4(this),M4(this);let l=j1(this),c=R4(this),d=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",h=s||!this.docView.matchesNode(e.doc,c,l);(h||!e.selection.eq(i.selection))&&(o=!0);let f=d=="preserve"&&o&&this.dom.style.overflowAnchor==null&&Xye(this);if(o){this.domObserver.stop();let p=h&&(ei||Br)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&x0e(i.selection,e.selection);if(h){let m=Br?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Xve(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=f4(e.doc,c,l,this.dom,this)),m&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&wve(this))?yo(this,p):(ane(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((n=this.dragging)===null||n===void 0)&&n.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():f&&Jye(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",r=>r(this)))if(this.state.selection instanceof Re){let r=this.docView.domAfterPos(this.state.selection.from);r.nodeType==1&&a4(this,r.getBoundingClientRect(),e)}else a4(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let r=0;r<this.directPlugins.length;r++){let n=this.directPlugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let r=0;r<this.state.plugins.length;r++){let n=this.state.plugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let r=0;r<this.pluginViews.length;r++){let n=this.pluginViews[r];n.update&&n.update(this,e)}}updateDraggedNode(e,r){let n=e.node,i=-1;if(this.state.doc.nodeAt(n.from)==n.node)i=n.from;else{let s=n.from+(this.state.doc.content.size-r.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==n.node&&(i=s)}this.dragging=new wne(e.slice,e.move,i<0?void 0:Re.create(this.state.doc,i))}someProp(e,r){let n=this._props&&this._props[e],i;if(n!=null&&(i=r?r(n):n))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=r?r(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=r?r(a):a))return i}}hasFocus(){if(ei){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Zye(this.dom),yo(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let r=this.dom.parentNode;r;r=r.parentNode)if(r.nodeType==9||r.nodeType==11&&r.host)return r.getSelection||(Object.getPrototypeOf(r).getSelection=()=>r.ownerDocument.getSelection()),this._root=r}return e||document}updateRoot(){this._root=null}posAtCoords(e){return ive(this,e)}coordsAtPos(e,r=1){return Zre(this,e,r)}domAtPos(e,r=0){return this.docView.domFromPos(e,r)}nodeDOM(e){let r=this.docView.descAt(e);return r?r.nodeDOM:null}posAtDOM(e,r,n=-1){let i=this.docView.posFromDOM(e,r,n);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,r){return cve(this,r||this.state,e)}pasteHTML(e,r){return yp(this,"",e,!1,r||new ClipboardEvent("paste"))}pasteText(e,r){return yp(this,e,null,!0,r||new ClipboardEvent("paste"))}serializeForClipboard(e){return IM(this,e)}destroy(){this.docView&&(Fve(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],j1(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Bye())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Lve(this,e)}domSelectionRange(){let e=this.domSelection();return e?vn&&this.root.nodeType===11&&Wye(this.dom.ownerDocument)==this.dom&&d0e(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}Cne.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function R4(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",r=>{if(typeof r=="function"&&(r=r(t.state)),r)for(let n in r)n=="class"?e.class+=" "+r[n]:n=="style"?e.style=(e.style?e.style+";":"")+r[n]:!e[n]&&n!="contenteditable"&&n!="nodeName"&&(e[n]=String(r[n]))}),e.translate||(e.translate="no"),[Tn.node(0,t.state.doc.content.size,e)]}function M4(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Tn.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function A4(t){return!t.someProp("editable",e=>e(t.state)===!1)}function x0e(t,e){let r=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(r)!=e.$anchor.start(r)}function $4(t){let e=Object.create(null);function r(n){for(let i in n)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=n[i])}return t.someProp("nodeViews",r),t.someProp("markViews",r),e}function w0e(t,e){let r=0,n=0;for(let i in t){if(t[i]!=e[i])return!0;r++}for(let i in e)n++;return r!=n}function D4(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var rl={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ev={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},S0e=typeof navigator<"u"&&/Mac/.test(navigator.platform),_0e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var rn=0;rn<10;rn++)rl[48+rn]=rl[96+rn]=String(rn);for(var rn=1;rn<=24;rn++)rl[rn+111]="F"+rn;for(var rn=65;rn<=90;rn++)rl[rn]=String.fromCharCode(rn+32),ev[rn]=String.fromCharCode(rn);for(var I1 in rl)ev.hasOwnProperty(I1)||(ev[I1]=rl[I1]);function E0e(t){var e=S0e&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||_0e&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",r=!e&&t.key||(t.shiftKey?ev:rl)[t.keyCode]||t.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}const N0e=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),C0e=typeof navigator<"u"&&/Win/.test(navigator.platform);function k0e(t){let e=t.split(/-(?!$)/),r=e[e.length-1];r=="Space"&&(r=" ");let n,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))N0e?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return n&&(r="Alt-"+r),i&&(r="Ctrl-"+r),o&&(r="Meta-"+r),s&&(r="Shift-"+r),r}function T0e(t){let e=Object.create(null);for(let r in t)e[k0e(r)]=t[r];return e}function R1(t,e,r=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),r&&e.shiftKey&&(t="Shift-"+t),t}function O0e(t){return new Xt({props:{handleKeyDown:kne(t)}})}function kne(t){let e=T0e(t);return function(r,n){let i=E0e(n),s,o=e[R1(i,n)];if(o&&o(r.state,r.dispatch,r))return!0;if(i.length==1&&i!=" "){if(n.shiftKey){let a=e[R1(i,n,!1)];if(a&&a(r.state,r.dispatch,r))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(C0e&&n.ctrlKey&&n.altKey)&&(s=rl[n.keyCode])&&s!=i){let a=e[R1(s,n)];if(a&&a(r.state,r.dispatch,r))return!0}}return!1}}var j0e=Object.defineProperty,FM=(t,e)=>{for(var r in e)j0e(t,r,{get:e[r],enumerable:!0})};function R0(t){const{state:e,transaction:r}=t;let{selection:n}=r,{doc:i}=r,{storedMarks:s}=r;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return n},get doc(){return i},get tr(){return n=r.selection,i=r.doc,s=r.storedMarks,r}}}var M0=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:r}=this,{view:n}=e,{tr:i}=r,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([o,a])=>[o,(...c)=>{const d=a(...c)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&n.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:r,editor:n,state:i}=this,{view:s}=n,o=[],a=!!t,l=t||i.tr,c=()=>(!a&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(l),o.every(h=>h===!0)),d={...Object.fromEntries(Object.entries(r).map(([h,f])=>[h,(...m)=>{const g=this.buildProps(l,e),v=f(...m)(g);return o.push(v),d}])),run:c};return d}createCan(t){const{rawCommands:e,state:r}=this,n=!1,i=t||r.tr,s=this.buildProps(i,n);return{...Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...c)=>l(...c)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,n)}}buildProps(t,e=!0){const{rawCommands:r,editor:n,state:i}=this,{view:s}=n,o={tr:t,editor:n,view:s,state:R0({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(r).map(([a,l])=>[a,(...c)=>l(...c)(o)]))}};return o}},Tne={};FM(Tne,{blur:()=>P0e,clearContent:()=>I0e,clearNodes:()=>R0e,command:()=>M0e,createParagraphNear:()=>A0e,cut:()=>$0e,deleteCurrentNode:()=>D0e,deleteNode:()=>F0e,deleteRange:()=>q0e,deleteSelection:()=>L0e,enter:()=>B0e,exitCode:()=>z0e,extendMarkRange:()=>V0e,first:()=>U0e,focus:()=>W0e,forEach:()=>K0e,insertContent:()=>G0e,insertContentAt:()=>X0e,joinBackward:()=>ebe,joinDown:()=>Z0e,joinForward:()=>tbe,joinItemBackward:()=>rbe,joinItemForward:()=>nbe,joinTextblockBackward:()=>ibe,joinTextblockForward:()=>sbe,joinUp:()=>J0e,keyboardShortcut:()=>abe,lift:()=>lbe,liftEmptyBlock:()=>cbe,liftListItem:()=>ube,newlineInCode:()=>dbe,resetAttributes:()=>hbe,scrollIntoView:()=>fbe,selectAll:()=>pbe,selectNodeBackward:()=>mbe,selectNodeForward:()=>gbe,selectParentNode:()=>ybe,selectTextblockEnd:()=>vbe,selectTextblockStart:()=>bbe,setContent:()=>xbe,setMark:()=>Lbe,setMeta:()=>Bbe,setNode:()=>zbe,setNodeSelection:()=>Vbe,setTextDirection:()=>Ube,setTextSelection:()=>Hbe,sinkListItem:()=>Wbe,splitBlock:()=>Kbe,splitListItem:()=>Gbe,toggleList:()=>Ybe,toggleMark:()=>Qbe,toggleNode:()=>Xbe,toggleWrap:()=>Jbe,undoInputRule:()=>Zbe,unsetAllMarks:()=>e1e,unsetMark:()=>t1e,unsetTextDirection:()=>r1e,updateAttributes:()=>n1e,wrapIn:()=>i1e,wrapInList:()=>s1e});var P0e=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var r;t.isDestroyed||(e.dom.blur(),(r=window==null?void 0:window.getSelection())==null||r.removeAllRanges())}),!0),I0e=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),R0e=()=>({state:t,tr:e,dispatch:r})=>{const{selection:n}=e,{ranges:i}=n;return r&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:d}=e,h=c.resolve(d.map(l)),f=c.resolve(d.map(l+a.nodeSize)),p=h.blockRange(f);if(!p)return;const m=oh(p);if(a.type.isTextblock){const{defaultType:g}=h.parent.contentMatchAt(h.index());e.setNodeMarkup(p.start,g)}(m||m===0)&&e.lift(p,m)})}),!0},M0e=t=>e=>t(e),A0e=()=>({state:t,dispatch:e})=>zre(t,e),$0e=(t,e)=>({editor:r,tr:n})=>{const{state:i}=r,s=i.doc.slice(t.from,t.to);n.deleteRange(t.from,t.to);const o=n.mapping.map(e);return n.insert(o,s.content),n.setSelection(new Be(n.doc.resolve(Math.max(o-1,0)))),!0},D0e=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,n=r.$anchor.node();if(n.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===n.type){if(e){const a=i.before(s),l=i.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1};function Nr(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var F0e=t=>({tr:e,state:r,dispatch:n})=>{const i=Nr(t,r.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(n){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},q0e=t=>({tr:e,dispatch:r})=>{const{from:n,to:i}=t;return r&&e.delete(n,i),!0},L0e=()=>({state:t,dispatch:e})=>EM(t,e),B0e=()=>({commands:t})=>t.keyboardShortcut("Enter"),z0e=()=>({state:t,dispatch:e})=>Cye(t,e);function qM(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function tv(t,e,r={strict:!0}){const n=Object.keys(e);return n.length?n.every(i=>r.strict?e[i]===t[i]:qM(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function One(t,e,r={}){return t.find(n=>n.type===e&&tv(Object.fromEntries(Object.keys(r).map(i=>[i,n.attrs[i]])),r))}function F4(t,e,r={}){return!!One(t,e,r)}function LM(t,e,r){var n;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(d=>d.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(d=>d.type===e)||(r=r||((n=i.node.marks[0])==null?void 0:n.attrs),!One([...i.node.marks],e,r)))return;let o=i.index,a=t.start()+i.offset,l=o+1,c=a+i.node.nodeSize;for(;o>0&&F4([...t.parent.child(o-1).marks],e,r);)o-=1,a-=t.parent.child(o).nodeSize;for(;l<t.parent.childCount&&F4([...t.parent.child(l).marks],e,r);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function Fo(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var V0e=(t,e={})=>({tr:r,state:n,dispatch:i})=>{const s=Fo(t,n.schema),{doc:o,selection:a}=r,{$from:l,from:c,to:d}=a;if(i){const h=LM(l,s,e);if(h&&h.from<=c&&h.to>=d){const f=Be.create(o,h.from,h.to);r.setSelection(f)}}return!0},U0e=t=>e=>{const r=typeof t=="function"?t(e):t;for(let n=0;n<r.length;n+=1)if(r[n](e))return!0;return!1};function jne(t){return t instanceof Be}function Dl(t=0,e=0,r=0){return Math.min(Math.max(t,e),r)}function Pne(t,e=null){if(!e)return null;const r=Ke.atStart(t),n=Ke.atEnd(t);if(e==="start"||e===!0)return r;if(e==="end")return n;const i=r.from,s=n.to;return e==="all"?Be.create(t,Dl(0,i,s),Dl(t.content.size,i,s)):Be.create(t,Dl(e,i,s),Dl(e,i,s))}function q4(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function rv(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function H0e(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var W0e=(t=null,e={})=>({editor:r,view:n,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(rv()||q4())&&n.dom.focus(),H0e()&&!rv()&&!q4()&&n.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{r.isDestroyed||(n.focus(),e!=null&&e.scrollIntoView&&r.commands.scrollIntoView())})};if(n.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!jne(r.state.selection))return o(),!0;const a=Pne(i.doc,t)||r.state.selection,l=r.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},K0e=(t,e)=>r=>t.every((n,i)=>e(n,{...r,index:i})),G0e=(t,e)=>({tr:r,commands:n})=>n.insertContentAt({from:r.selection.from,to:r.selection.to},t,e),Ine=t=>{const e=t.childNodes;for(let r=e.length-1;r>=0;r-=1){const n=e[r];n.nodeType===3&&n.nodeValue&&/^(\n\s\s|\n)$/.test(n.nodeValue)?t.removeChild(n):n.nodeType===1&&Ine(n)}return t};function bg(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,r=new window.DOMParser().parseFromString(e,"text/html").body;return Ine(r)}function bp(t,e,r){if(t instanceof Ba||t instanceof Q)return t;r={slice:!0,parseOptions:{},...r};const n=typeof t=="object"&&t!==null,i=typeof t=="string";if(n)try{if(Array.isArray(t)&&t.length>0)return Q.fromArray(t.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(t);return r.errorOnInvalidContent&&o.check(),o}catch(s){if(r.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),bp("",e,r)}if(i){if(r.errorOnInvalidContent){let o=!1,a="";const l=new mre({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(r.slice?za.fromSchema(l).parseSlice(bg(t),r.parseOptions):za.fromSchema(l).parse(bg(t),r.parseOptions),r.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=za.fromSchema(e);return r.slice?s.parseSlice(bg(t),r.parseOptions).content:s.parse(bg(t),r.parseOptions)}return bp("",e,r)}function Y0e(t,e,r){const n=t.steps.length-1;if(n<e)return;const i=t.steps[n];if(!(i instanceof Lr||i instanceof Vr))return;const s=t.mapping.maps[n];let o=0;s.forEach((a,l,c,d)=>{o===0&&(o=d)}),t.setSelection(Ke.near(t.doc.resolve(o),r))}var Q0e=t=>!("type"in t),X0e=(t,e,r)=>({tr:n,dispatch:i,editor:s})=>{var o;if(i){r={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...r};let a;const l=v=>{s.emit("contentError",{editor:s,error:v,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...r.parseOptions};if(!r.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{bp(e,s.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(v){l(v)}try{a=bp(e,s.schema,{parseOptions:c,errorOnInvalidContent:(o=r.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(v){return l(v),!1}let{from:d,to:h}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},f=!0,p=!0;if((Q0e(a)?a:[a]).forEach(v=>{v.check(),f=f?v.isText&&v.marks.length===0:!1,p=p?v.isBlock:!1}),d===h&&p){const{parent:v}=n.doc.resolve(d);v.isTextblock&&!v.type.spec.code&&!v.childCount&&(d-=1,h+=1)}let g;if(f){if(Array.isArray(e))g=e.map(v=>v.text||"").join("");else if(e instanceof Q){let v="";e.forEach(y=>{y.text&&(v+=y.text)}),g=v}else typeof e=="object"&&e&&e.text?g=e.text:g=e;n.insertText(g,d,h)}else{g=a;const v=n.doc.resolve(d),y=v.node(),b=v.parentOffset===0,w=y.isText||y.isTextblock,x=y.content.size>0;b&&w&&x&&(d=Math.max(0,d-1)),n.replaceWith(d,h,g)}r.updateSelection&&Y0e(n,n.steps.length-1,-1),r.applyInputRules&&n.setMeta("applyInputRules",{from:d,text:g}),r.applyPasteRules&&n.setMeta("applyPasteRules",{from:d,text:g})}return!0},J0e=()=>({state:t,dispatch:e})=>_ye(t,e),Z0e=()=>({state:t,dispatch:e})=>Eye(t,e),ebe=()=>({state:t,dispatch:e})=>Are(t,e),tbe=()=>({state:t,dispatch:e})=>qre(t,e),rbe=()=>({state:t,dispatch:e,tr:r})=>{try{const n=k0(t.doc,t.selection.$from.pos,-1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},nbe=()=>({state:t,dispatch:e,tr:r})=>{try{const n=k0(t.doc,t.selection.$from.pos,1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},ibe=()=>({state:t,dispatch:e})=>wye(t,e),sbe=()=>({state:t,dispatch:e})=>Sye(t,e);function Rne(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function obe(t){const e=t.split(/-(?!$)/);let r=e[e.length-1];r==="Space"&&(r=" ");let n,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))rv()||Rne()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return n&&(r=`Alt-${r}`),i&&(r=`Ctrl-${r}`),o&&(r=`Meta-${r}`),s&&(r=`Shift-${r}`),r}var abe=t=>({editor:e,view:r,tr:n,dispatch:i})=>{const s=obe(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{r.someProp("handleKeyDown",c=>c(r,a))});return l==null||l.steps.forEach(c=>{const d=c.map(n.mapping);d&&i&&n.maybeStep(d)}),!0};function nl(t,e,r={}){const{from:n,to:i,empty:s}=t.selection,o=e?Nr(e,t.schema):null,a=[];t.doc.nodesBetween(n,i,(h,f)=>{if(h.isText)return;const p=Math.max(n,f),m=Math.min(i,f+h.nodeSize);a.push({node:h,from:p,to:m})});const l=i-n,c=a.filter(h=>o?o.name===h.node.type.name:!0).filter(h=>tv(h.node.attrs,r,{strict:!1}));return s?!!c.length:c.reduce((h,f)=>h+f.to-f.from,0)>=l}var lbe=(t,e={})=>({state:r,dispatch:n})=>{const i=Nr(t,r.schema);return nl(r,i,e)?Nye(r,n):!1},cbe=()=>({state:t,dispatch:e})=>Vre(t,e),ube=t=>({state:e,dispatch:r})=>{const n=Nr(t,e.schema);return Dye(n)(e,r)},dbe=()=>({state:t,dispatch:e})=>Bre(t,e);function A0(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function L4(t,e){const r=typeof e=="string"?[e]:e;return Object.keys(t).reduce((n,i)=>(r.includes(i)||(n[i]=t[i]),n),{})}var hbe=(t,e)=>({tr:r,state:n,dispatch:i})=>{let s=null,o=null;const a=A0(typeof t=="string"?t:t.name,n.schema);if(!a)return!1;a==="node"&&(s=Nr(t,n.schema)),a==="mark"&&(o=Fo(t,n.schema));let l=!1;return r.selection.ranges.forEach(c=>{n.doc.nodesBetween(c.$from.pos,c.$to.pos,(d,h)=>{s&&s===d.type&&(l=!0,i&&r.setNodeMarkup(h,void 0,L4(d.attrs,e))),o&&d.marks.length&&d.marks.forEach(f=>{o===f.type&&(l=!0,i&&r.addMark(h,h+d.nodeSize,o.create(L4(f.attrs,e))))})})}),l},fbe=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),pbe=()=>({tr:t,dispatch:e})=>{if(e){const r=new gi(t.doc);t.setSelection(r)}return!0},mbe=()=>({state:t,dispatch:e})=>Dre(t,e),gbe=()=>({state:t,dispatch:e})=>Lre(t,e),ybe=()=>({state:t,dispatch:e})=>Oye(t,e),vbe=()=>({state:t,dispatch:e})=>Iye(t,e),bbe=()=>({state:t,dispatch:e})=>Pye(t,e);function xI(t,e,r={},n={}){return bp(t,e,{slice:!1,parseOptions:r,errorOnInvalidContent:n.errorOnInvalidContent})}var xbe=(t,{errorOnInvalidContent:e,emitUpdate:r=!0,parseOptions:n={}}={})=>({editor:i,tr:s,dispatch:o,commands:a})=>{const{doc:l}=s;if(n.preserveWhitespace!=="full"){const c=xI(t,i.schema,n,{errorOnInvalidContent:e??i.options.enableContentCheck});return o&&s.replaceWith(0,l.content.size,c).setMeta("preventUpdate",!r),!0}return o&&s.setMeta("preventUpdate",!r),a.insertContentAt({from:0,to:l.content.size},t,{parseOptions:n,errorOnInvalidContent:e??i.options.enableContentCheck})};function Mne(t,e){const r=Fo(e,t.schema),{from:n,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(n,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===r.name);return a?{...a.attrs}:{}}function Ane(t,e){const r=new Pre(t);return e.forEach(n=>{n.steps.forEach(i=>{r.step(i)})}),r}function wbe(t){for(let e=0;e<t.edgeCount;e+=1){const{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function Sbe(t,e,r){const n=[];return t.nodesBetween(e.from,e.to,(i,s)=>{r(i)&&n.push({node:i,pos:s})}),n}function _be(t,e){for(let r=t.depth;r>0;r-=1){const n=t.node(r);if(e(n))return{pos:r>0?t.before(r):0,start:t.start(r),depth:r,node:n}}}function $0(t){return e=>_be(e.$from,t)}function Pe(t,e,r){return t.config[e]===void 0&&t.parent?Pe(t.parent,e,r):typeof t.config[e]=="function"?t.config[e].bind({...r,parent:t.parent?Pe(t.parent,e,r):null}):t.config[e]}function BM(t){return t.map(e=>{const r={name:e.name,options:e.options,storage:e.storage},n=Pe(e,"addExtensions",r);return n?[e,...BM(n())]:e}).flat(10)}function zM(t,e){const r=Uc.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(r),i.innerHTML}function $ne(t){return typeof t=="function"}function bt(t,e=void 0,...r){return $ne(t)?e?t.bind(e)(...r):t(...r):t}function Ebe(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Ld(t){const e=t.filter(i=>i.type==="extension"),r=t.filter(i=>i.type==="node"),n=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:r,markExtensions:n}}function Dne(t){const e=[],{nodeExtensions:r,markExtensions:n}=Ld(t),i=[...r,...n],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:i},l=Pe(o,"addGlobalAttributes",a);if(!l)return;l().forEach(d=>{d.types.forEach(h=>{Object.entries(d.attributes).forEach(([f,p])=>{e.push({type:h,name:f,attribute:{...s,...p}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=Pe(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([d,h])=>{const f={...s,...h};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:o.name,name:d,attribute:f})})}),e}function Cr(...t){return t.filter(e=>!!e).reduce((e,r)=>{const n={...e};return Object.entries(r).forEach(([i,s])=>{if(!n[i]){n[i]=s;return}if(i==="class"){const a=s?String(s).split(" "):[],l=n[i]?n[i].split(" "):[],c=a.filter(d=>!l.includes(d));n[i]=[...l,...c].join(" ")}else if(i==="style"){const a=s?s.split(";").map(d=>d.trim()).filter(Boolean):[],l=n[i]?n[i].split(";").map(d=>d.trim()).filter(Boolean):[],c=new Map;l.forEach(d=>{const[h,f]=d.split(":").map(p=>p.trim());c.set(h,f)}),a.forEach(d=>{const[h,f]=d.split(":").map(p=>p.trim());c.set(h,f)}),n[i]=Array.from(c.entries()).map(([d,h])=>`${d}: ${h}`).join("; ")}else n[i]=s}),n},{})}function xp(t,e){return e.filter(r=>r.type===t.type.name).filter(r=>r.attribute.rendered).map(r=>r.attribute.renderHTML?r.attribute.renderHTML(t.attrs)||{}:{[r.name]:t.attrs[r.name]}).reduce((r,n)=>Cr(r,n),{})}function Nbe(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function B4(t,e){return"style"in t?t:{...t,getAttrs:r=>{const n=t.getAttrs?t.getAttrs(r):t.attrs;if(n===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(r):Nbe(r.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...n,...i}}}}function z4(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>e==="attrs"&&Ebe(r)?!1:r!=null))}function V4(t){var e,r;const n={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&"default"in((t==null?void 0:t.attribute)||{})&&(n.default=t.attribute.default),((r=t==null?void 0:t.attribute)==null?void 0:r.validate)!==void 0&&(n.validate=t.attribute.validate),[t.name,n]}function Cbe(t,e){var r;const n=Dne(t),{nodeExtensions:i,markExtensions:s}=Ld(t),o=(r=i.find(c=>Pe(c,"topNode")))==null?void 0:r.name,a=Object.fromEntries(i.map(c=>{const d=n.filter(y=>y.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((y,b)=>{const w=Pe(b,"extendNodeSchema",h);return{...y,...w?w(c):{}}},{}),p=z4({...f,content:bt(Pe(c,"content",h)),marks:bt(Pe(c,"marks",h)),group:bt(Pe(c,"group",h)),inline:bt(Pe(c,"inline",h)),atom:bt(Pe(c,"atom",h)),selectable:bt(Pe(c,"selectable",h)),draggable:bt(Pe(c,"draggable",h)),code:bt(Pe(c,"code",h)),whitespace:bt(Pe(c,"whitespace",h)),linebreakReplacement:bt(Pe(c,"linebreakReplacement",h)),defining:bt(Pe(c,"defining",h)),isolating:bt(Pe(c,"isolating",h)),attrs:Object.fromEntries(d.map(V4))}),m=bt(Pe(c,"parseHTML",h));m&&(p.parseDOM=m.map(y=>B4(y,d)));const g=Pe(c,"renderHTML",h);g&&(p.toDOM=y=>g({node:y,HTMLAttributes:xp(y,d)}));const v=Pe(c,"renderText",h);return v&&(p.toText=v),[c.name,p]})),l=Object.fromEntries(s.map(c=>{const d=n.filter(v=>v.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((v,y)=>{const b=Pe(y,"extendMarkSchema",h);return{...v,...b?b(c):{}}},{}),p=z4({...f,inclusive:bt(Pe(c,"inclusive",h)),excludes:bt(Pe(c,"excludes",h)),group:bt(Pe(c,"group",h)),spanning:bt(Pe(c,"spanning",h)),code:bt(Pe(c,"code",h)),attrs:Object.fromEntries(d.map(V4))}),m=bt(Pe(c,"parseHTML",h));m&&(p.parseDOM=m.map(v=>B4(v,d)));const g=Pe(c,"renderHTML",h);return g&&(p.toDOM=v=>g({mark:v,HTMLAttributes:xp(v,d)})),[c.name,p]}));return new mre({topNode:o,nodes:a,marks:l})}function kbe(t){const e=t.filter((r,n)=>t.indexOf(r)!==n);return Array.from(new Set(e))}function nv(t){return t.sort((r,n)=>{const i=Pe(r,"priority")||100,s=Pe(n,"priority")||100;return i>s?-1:i<s?1:0})}function Fne(t){const e=nv(BM(t)),r=kbe(e.map(n=>n.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(n=>`'${n}'`).join(", ")}]. This can lead to issues.`),e}function qne(t,e,r){const{from:n,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=r||{};let a="";return t.nodesBetween(n,i,(l,c,d,h)=>{var f;l.isBlock&&c>n&&(a+=s);const p=o==null?void 0:o[l.type.name];if(p)return d&&(a+=p({node:l,pos:c,parent:d,index:h,range:e})),!1;l.isText&&(a+=(f=l==null?void 0:l.text)==null?void 0:f.slice(Math.max(n,c)-c,i-c))}),a}function Tbe(t,e){const r={from:0,to:t.content.size};return qne(t,r,e)}function Lne(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,r])=>[e,r.spec.toText]))}function Obe(t,e){const r=Nr(e,t.schema),{from:n,to:i}=t.selection,s=[];t.doc.nodesBetween(n,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===r.name);return o?{...o.attrs}:{}}function Bne(t,e){const r=A0(typeof e=="string"?e:e.name,t.schema);return r==="node"?Obe(t,e):r==="mark"?Mne(t,e):{}}function jbe(t,e=JSON.stringify){const r={};return t.filter(n=>{const i=e(n);return Object.prototype.hasOwnProperty.call(r,i)?!1:r[i]=!0})}function Pbe(t){const e=jbe(t);return e.length===1?e:e.filter((r,n)=>!e.filter((s,o)=>o!==n).some(s=>r.oldRange.from>=s.oldRange.from&&r.oldRange.to<=s.oldRange.to&&r.newRange.from>=s.newRange.from&&r.newRange.to<=s.newRange.to))}function zne(t){const{mapping:e,steps:r}=t,n=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=r[s];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const c=e.slice(s).map(a,-1),d=e.slice(s).map(l),h=e.invert().map(c,-1),f=e.invert().map(d);n.push({oldRange:{from:h,to:f},newRange:{from:c,to:d}})})}),Pbe(n)}function VM(t,e,r){const n=[];return t===e?r.resolve(t).marks().forEach(i=>{const s=r.resolve(t),o=LM(s,i.type);o&&n.push({mark:i,...o})}):r.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||n.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),n}var Ibe=(t,e,r,n=20)=>{const i=t.doc.resolve(r);let s=n,o=null;for(;s>0&&o===null;){const a=i.node(s);(a==null?void 0:a.type.name)===e?o=a:s-=1}return[o,s]};function xg(t,e){return e.nodes[t]||e.marks[t]||null}function ny(t,e,r){return Object.fromEntries(Object.entries(r).filter(([n])=>{const i=t.find(s=>s.type===e&&s.name===n);return i?i.attribute.keepOnSplit:!1}))}var Rbe=(t,e=500)=>{let r="";const n=t.parentOffset;return t.parent.nodesBetween(Math.max(0,n-e),n,(i,s,o,a)=>{var l,c;const d=((c=(l=i.type.spec).toText)==null?void 0:c.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";r+=i.isAtom&&!i.isText?d:d.slice(0,Math.max(0,n-s))}),r};function wI(t,e,r={}){const{empty:n,ranges:i}=t.selection,s=e?Fo(e,t.schema):null;if(n)return!!(t.storedMarks||t.selection.$from.marks()).filter(h=>s?s.name===h.type.name:!0).find(h=>tv(h.attrs,r,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:h,$to:f})=>{const p=h.pos,m=f.pos;t.doc.nodesBetween(p,m,(g,v)=>{if(!g.isText&&!g.marks.length)return;const y=Math.max(p,v),b=Math.min(m,v+g.nodeSize),w=b-y;o+=w,a.push(...g.marks.map(x=>({mark:x,from:y,to:b})))})}),o===0)return!1;const l=a.filter(h=>s?s.name===h.mark.type.name:!0).filter(h=>tv(h.mark.attrs,r,{strict:!1})).reduce((h,f)=>h+f.to-f.from,0),c=a.filter(h=>s?h.mark.type!==s&&h.mark.type.excludes(s):!0).reduce((h,f)=>h+f.to-f.from,0);return(l>0?l+c:l)>=o}function Mbe(t,e,r={}){if(!e)return nl(t,null,r)||wI(t,null,r);const n=A0(e,t.schema);return n==="node"?nl(t,e,r):n==="mark"?wI(t,e,r):!1}var Abe=(t,e)=>{const{$from:r,$to:n,$anchor:i}=t.selection;if(e){const s=$0(a=>a.type.name===e)(t.selection);if(!s)return!1;const o=t.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(n.parentOffset<n.parent.nodeSize-2||r.pos!==n.pos)},$be=t=>{const{$from:e,$to:r}=t.selection;return!(e.parentOffset>0||e.pos!==r.pos)};function U4(t,e){return Array.isArray(e)?e.some(r=>(typeof r=="string"?r:r.name)===t.name):e}function H4(t,e){const{nodeExtensions:r}=Ld(e),n=r.find(o=>o.name===t);if(!n)return!1;const i={name:n.name,options:n.options,storage:n.storage},s=bt(Pe(n,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function D0(t,{checkChildren:e=!0,ignoreWhitespace:r=!1}={}){var n;if(r){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((n=t.text)!=null?n:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(D0(s,{ignoreWhitespace:r,checkChildren:e})||(i=!1))}),i}return!1}function Vne(t){return t instanceof Re}var Une=class Hne{constructor(e){this.position=e}static fromJSON(e){return new Hne(e.position)}toJSON(){return{position:this.position}}};function Dbe(t,e){const r=e.mapping.mapResult(t.position);return{position:new Une(r.pos),mapResult:r}}function Fbe(t){return new Une(t)}function qbe(t,e,r){var n;const{selection:i}=e;let s=null;if(jne(i)&&(s=i.$cursor),s){const a=(n=t.storedMarks)!=null?n:s.marks();return s.parent.type.allowsMarkType(r)&&(!!r.isInSet(a)||!a.some(c=>c.type.excludes(r)))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(r):!1;return t.doc.nodesBetween(a.pos,l.pos,(d,h,f)=>{if(c)return!1;if(d.isInline){const p=!f||f.type.allowsMarkType(r),m=!!r.isInSet(d.marks)||!d.marks.some(g=>g.type.excludes(r));c=p&&m}return!c}),c})}var Lbe=(t,e={})=>({tr:r,state:n,dispatch:i})=>{const{selection:s}=r,{empty:o,ranges:a}=s,l=Fo(t,n.schema);if(i)if(o){const c=Mne(n,l);r.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const d=c.$from.pos,h=c.$to.pos;n.doc.nodesBetween(d,h,(f,p)=>{const m=Math.max(p,d),g=Math.min(p+f.nodeSize,h);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&r.addMark(m,g,l.create({...y.attrs,...e}))}):r.addMark(m,g,l.create(e))})});return qbe(n,r,l)},Bbe=(t,e)=>({tr:r})=>(r.setMeta(t,e),!0),zbe=(t,e={})=>({state:r,dispatch:n,chain:i})=>{const s=Nr(t,r.schema);let o;return r.selection.$anchor.sameParent(r.selection.$head)&&(o=r.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:a})=>i4(s,{...o,...e})(r)?!0:a.clearNodes()).command(({state:a})=>i4(s,{...o,...e})(a,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Vbe=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,i=Dl(t,0,n.content.size),s=Re.create(n,i);e.setSelection(s)}return!0},Ube=(t,e)=>({tr:r,state:n,dispatch:i})=>{const{selection:s}=n;let o,a;return typeof e=="number"?(o=e,a=e):e&&"from"in e&&"to"in e?(o=e.from,a=e.to):(o=s.from,a=s.to),i&&r.doc.nodesBetween(o,a,(l,c)=>{l.isText||r.setNodeMarkup(c,void 0,{...l.attrs,dir:t})}),!0},Hbe=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=Be.atStart(n).from,a=Be.atEnd(n).to,l=Dl(i,o,a),c=Dl(s,o,a),d=Be.create(n,l,c);e.setSelection(d)}return!0},Wbe=t=>({state:e,dispatch:r})=>{const n=Nr(t,e.schema);return Lye(n)(e,r)};function W4(t,e){const r=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(r){const n=r.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(n)}}var Kbe=({keepMarks:t=!0}={})=>({tr:e,state:r,dispatch:n,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,d=ny(c,a.node().type.name,a.node().attrs);if(s instanceof Re&&s.node.isBlock)return!a.parentOffset||!go(o,a.pos)?!1:(n&&(t&&W4(r,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const h=l.parentOffset===l.parent.content.size,f=a.depth===0?void 0:wbe(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=h&&f?[{type:f,attrs:d}]:void 0,m=go(e.doc,e.mapping.map(a.pos),1,p);if(!p&&!m&&go(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(m=!0,p=f?[{type:f,attrs:d}]:void 0),n){if(m&&(s instanceof Be&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,p),f&&!h&&!a.parentOffset&&a.parent.type!==f)){const g=e.mapping.map(a.before()),v=e.doc.resolve(g);a.node(-1).canReplaceWith(v.index(),v.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}t&&W4(r,i.extensionManager.splittableMarks),e.scrollIntoView()}return m},Gbe=(t,e={})=>({tr:r,state:n,dispatch:i,editor:s})=>{var o;const a=Nr(t,n.schema),{$from:l,$to:c}=n.selection,d=n.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(c))return!1;const h=l.node(-1);if(h.type!==a)return!1;const f=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let y=Q.empty;const b=l.index(-1)?1:l.index(-2)?2:3;for(let N=l.depth-b;N>=l.depth-3;N-=1)y=Q.from(l.node(N).copy(y));const w=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,x={...ny(f,l.node().type.name,l.node().attrs),...e},S=((o=a.contentMatch.defaultType)==null?void 0:o.createAndFill(x))||void 0;y=y.append(Q.from(a.createAndFill(null,S)||void 0));const _=l.before(l.depth-(b-1));r.replace(_,l.after(-w),new ye(y,4-b,0));let E=-1;r.doc.nodesBetween(_,r.doc.content.size,(N,k)=>{if(E>-1)return!1;N.isTextblock&&N.content.size===0&&(E=k+1)}),E>-1&&r.setSelection(Be.near(r.doc.resolve(E))),r.scrollIntoView()}return!0}const p=c.pos===l.end()?h.contentMatchAt(0).defaultType:null,m={...ny(f,h.type.name,h.attrs),...e},g={...ny(f,l.node().type.name,l.node().attrs),...e};r.delete(l.pos,c.pos);const v=p?[{type:a,attrs:m},{type:p,attrs:g}]:[{type:a,attrs:m}];if(!go(r.doc,l.pos,2))return!1;if(i){const{selection:y,storedMarks:b}=n,{splittableMarks:w}=s.extensionManager,x=b||y.$to.parentOffset&&y.$from.marks();if(r.split(l.pos,2,v).scrollIntoView(),!x||!i)return!0;const S=x.filter(_=>w.includes(_.type.name));r.ensureMarks(S)}return!0},M1=(t,e)=>{const r=$0(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(Math.max(0,r.pos-1)).before(r.depth);if(n===void 0)return!0;const i=t.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&ul(t.doc,r.pos)&&t.join(r.pos),!0},A1=(t,e)=>{const r=$0(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(r.start).after(r.depth);if(n===void 0)return!0;const i=t.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&ul(t.doc,n)&&t.join(n),!0},Ybe=(t,e,r,n={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:d})=>{const{extensions:h,splittableMarks:f}=i.extensionManager,p=Nr(t,o.schema),m=Nr(e,o.schema),{selection:g,storedMarks:v}=o,{$from:y,$to:b}=g,w=y.blockRange(b),x=v||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;const S=$0(_=>H4(_.type.name,h))(g);if(w.depth>=1&&S&&w.depth-S.depth<=1){if(S.node.type===p)return c.liftListItem(m);if(H4(S.node.type.name,h)&&p.validContent(S.node.content)&&a)return l().command(()=>(s.setNodeMarkup(S.pos,p),!0)).command(()=>M1(s,p)).command(()=>A1(s,p)).run()}return!r||!x||!a?l().command(()=>d().wrapInList(p,n)?!0:c.clearNodes()).wrapInList(p,n).command(()=>M1(s,p)).command(()=>A1(s,p)).run():l().command(()=>{const _=d().wrapInList(p,n),E=x.filter(N=>f.includes(N.type.name));return s.ensureMarks(E),_?!0:c.clearNodes()}).wrapInList(p,n).command(()=>M1(s,p)).command(()=>A1(s,p)).run()},Qbe=(t,e={},r={})=>({state:n,commands:i})=>{const{extendEmptyMarkRange:s=!1}=r,o=Fo(t,n.schema);return wI(n,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},Xbe=(t,e,r={})=>({state:n,commands:i})=>{const s=Nr(t,n.schema),o=Nr(e,n.schema),a=nl(n,s,r);let l;return n.selection.$anchor.sameParent(n.selection.$head)&&(l=n.selection.$anchor.parent.attrs),a?i.setNode(o,l):i.setNode(s,{...l,...r})},Jbe=(t,e={})=>({state:r,commands:n})=>{const i=Nr(t,r.schema);return nl(r,i,e)?n.lift(i):n.wrapIn(i,e)},Zbe=()=>({state:t,dispatch:e})=>{const r=t.plugins;for(let n=0;n<r.length;n+=1){const i=r[n];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},e1e=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,{empty:n,ranges:i}=r;return n||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},t1e=(t,e={})=>({tr:r,state:n,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=r,l=Fo(t,n.schema),{$from:c,empty:d,ranges:h}=a;if(!i)return!0;if(d&&o){let{from:f,to:p}=a;const m=(s=c.marks().find(v=>v.type===l))==null?void 0:s.attrs,g=LM(c,l,m);g&&(f=g.from,p=g.to),r.removeMark(f,p,l)}else h.forEach(f=>{r.removeMark(f.$from.pos,f.$to.pos,l)});return r.removeStoredMark(l),!0},r1e=t=>({tr:e,state:r,dispatch:n})=>{const{selection:i}=r;let s,o;return typeof t=="number"?(s=t,o=t):t&&"from"in t&&"to"in t?(s=t.from,o=t.to):(s=i.from,o=i.to),n&&e.doc.nodesBetween(s,o,(a,l)=>{if(a.isText)return;const c={...a.attrs};delete c.dir,e.setNodeMarkup(l,void 0,c)}),!0},n1e=(t,e={})=>({tr:r,state:n,dispatch:i})=>{let s=null,o=null;const a=A0(typeof t=="string"?t:t.name,n.schema);if(!a)return!1;a==="node"&&(s=Nr(t,n.schema)),a==="mark"&&(o=Fo(t,n.schema));let l=!1;return r.selection.ranges.forEach(c=>{const d=c.$from.pos,h=c.$to.pos;let f,p,m,g;r.selection.empty?n.doc.nodesBetween(d,h,(v,y)=>{s&&s===v.type&&(l=!0,m=Math.max(y,d),g=Math.min(y+v.nodeSize,h),f=y,p=v)}):n.doc.nodesBetween(d,h,(v,y)=>{y<d&&s&&s===v.type&&(l=!0,m=Math.max(y,d),g=Math.min(y+v.nodeSize,h),f=y,p=v),y>=d&&y<=h&&(s&&s===v.type&&(l=!0,i&&r.setNodeMarkup(y,void 0,{...v.attrs,...e})),o&&v.marks.length&&v.marks.forEach(b=>{if(o===b.type&&(l=!0,i)){const w=Math.max(y,d),x=Math.min(y+v.nodeSize,h);r.addMark(w,x,o.create({...b.attrs,...e}))}}))}),p&&(f!==void 0&&i&&r.setNodeMarkup(f,void 0,{...p.attrs,...e}),o&&p.marks.length&&p.marks.forEach(v=>{o===v.type&&i&&r.addMark(m,g,o.create({...v.attrs,...e}))}))}),l},i1e=(t,e={})=>({state:r,dispatch:n})=>{const i=Nr(t,r.schema);return Rye(i,e)(r,n)},s1e=(t,e={})=>({state:r,dispatch:n})=>{const i=Nr(t,r.schema);return Mye(i,e)(r,n)},o1e=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const r=this.callbacks[t];return r&&r.forEach(n=>n.apply(this,e)),this}off(t,e){const r=this.callbacks[t];return r&&(e?this.callbacks[t]=r.filter(n=>n!==e):delete this.callbacks[t]),this}once(t,e){const r=(...n)=>{this.off(t,r),e.apply(this,n)};return this.on(t,r)}removeAllListeners(){this.callbacks={}}},F0=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},a1e=(t,e)=>{if(qM(e))return e.exec(t);const r=e(t);if(!r)return null;const n=[r.text];return n.index=r.index,n.input=t,n.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(r.replaceWith)),n};function wg(t){var e;const{editor:r,from:n,to:i,text:s,rules:o,plugin:a}=t,{view:l}=r;if(l.composing)return!1;const c=l.state.doc.resolve(n);if(c.parent.type.spec.code||(e=c.nodeBefore||c.nodeAfter)!=null&&e.marks.find(f=>f.type.spec.code))return!1;let d=!1;const h=Rbe(c)+s;return o.forEach(f=>{if(d)return;const p=a1e(h,f.find);if(!p)return;const m=l.state.tr,g=R0({state:l.state,transaction:m}),v={from:n-(p[0].length-s.length),to:i},{commands:y,chain:b,can:w}=new M0({editor:r,state:g});f.handler({state:g,range:v,match:p,commands:y,chain:b,can:w})===null||!m.steps.length||(f.undoable&&m.setMeta(a,{transform:m,from:n,to:i,text:s}),l.dispatch(m),d=!0)}),d}function l1e(t){const{editor:e,rules:r}=t,n=new Xt({state:{init(){return null},apply(i,s,o){const a=i.getMeta(n);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:d}=l;typeof d=="string"?d=d:d=zM(Q.from(d),o.schema);const{from:h}=l,f=h+d.length;wg({editor:e,from:h,to:f,text:d,rules:r,plugin:n})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return wg({editor:e,from:s,to:o,text:a,rules:r,plugin:n})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&wg({editor:e,from:s.pos,to:s.pos,text:"",rules:r,plugin:n})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?wg({editor:e,from:o.pos,to:o.pos,text:`
`,rules:r,plugin:n}):!1}},isInputRules:!0});return n}function c1e(t){return Object.prototype.toString.call(t).slice(8,-1)}function Sg(t){return c1e(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Wne(t,e){const r={...t};return Sg(t)&&Sg(e)&&Object.keys(e).forEach(n=>{Sg(e[n])&&Sg(t[n])?r[n]=Wne(t[n],e[n]):r[n]=e[n]}),r}var UM=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...bt(Pe(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...bt(Pe(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>Wne(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},Hc=class Kne extends UM{constructor(){super(...arguments),this.type="mark"}static create(e={}){const r=typeof e=="function"?e():e;return new Kne(r)}static handleExit({editor:e,mark:r}){const{tr:n}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===r.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===r.name);return l&&n.removeStoredMark(l),n.insertText(" ",i.pos),e.view.dispatch(n),!0}return!1}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function u1e(t){return typeof t=="number"}var d1e=class{constructor(t){this.find=t.find,this.handler=t.handler}},h1e=(t,e,r)=>{if(qM(e))return[...t.matchAll(e)];const n=e(t,r);return n?n.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function f1e(t){const{editor:e,state:r,from:n,to:i,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:c,can:d}=new M0({editor:e,state:r}),h=[];return r.doc.nodesBetween(n,i,(p,m)=>{var g,v,y,b,w;if((v=(g=p.type)==null?void 0:g.spec)!=null&&v.code||!(p.isText||p.isTextblock||p.isInline))return;const x=(w=(b=(y=p.content)==null?void 0:y.size)!=null?b:p.nodeSize)!=null?w:0,S=Math.max(n,m),_=Math.min(i,m+x);if(S>=_)return;const E=p.isText?p.text||"":p.textBetween(S-m,_-m,void 0,"");h1e(E,s.find,o).forEach(k=>{if(k.index===void 0)return;const C=S+k.index+1,O=C+k[0].length,P={from:r.tr.mapping.map(C),to:r.tr.mapping.map(O)},j=s.handler({state:r,range:P,match:k,commands:l,chain:c,can:d,pasteEvent:o,dropEvent:a});h.push(j)})}),h.every(p=>p!==null)}var _g=null,p1e=t=>{var e;const r=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=r.clipboardData)==null||e.setData("text/html",t),r};function m1e(t){const{editor:e,rules:r}=t;let n=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:d,from:h,to:f,rule:p,pasteEvt:m})=>{const g=d.tr,v=R0({state:d,transaction:g});if(!(!f1e({editor:e,state:v,from:Math.max(h-1,0),to:f.b-1,rule:p,pasteEvent:m,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return r.map(d=>new Xt({view(h){const f=m=>{var g;n=(g=h.dom.parentElement)!=null&&g.contains(m.target)?h.dom.parentElement:null,n&&(_g=e)},p=()=>{_g&&(_g=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(h,f)=>{if(s=n===h.dom.parentElement,a=f,!s){const p=_g;p!=null&&p.isEditable&&setTimeout(()=>{const m=p.state.selection;m&&p.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(h,f)=>{var p;const m=(p=f.clipboardData)==null?void 0:p.getData("text/html");return o=f,i=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(h,f,p)=>{const m=h[0],g=m.getMeta("uiEvent")==="paste"&&!i,v=m.getMeta("uiEvent")==="drop"&&!s,y=m.getMeta("applyPasteRules"),b=!!y;if(!g&&!v&&!b)return;if(b){let{text:S}=y;typeof S=="string"?S=S:S=zM(Q.from(S),p.schema);const{from:_}=y,E=_+S.length,N=p1e(S);return l({rule:d,state:p,from:_,to:{b:E},pasteEvt:N})}const w=f.doc.content.findDiffStart(p.doc.content),x=f.doc.content.findDiffEnd(p.doc.content);if(!(!u1e(w)||!x||w===x.b))return l({rule:d,state:p,from:w,to:x,pasteEvt:o})}}))}var q0=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=Fne(t),this.schema=Cbe(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:xg(e.name,this.schema)},n=Pe(e,"addCommands",r);return n?{...t,...n()}:t},{})}get plugins(){const{editor:t}=this;return nv([...this.extensions].reverse()).flatMap(n=>{const i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:xg(n.name,this.schema)},s=[],o=Pe(n,"addKeyboardShortcuts",i);let a={};if(n.type==="mark"&&Pe(n,"exitable",i)&&(a.ArrowRight=()=>Hc.handleExit({editor:t,mark:n})),o){const f=Object.fromEntries(Object.entries(o()).map(([p,m])=>[p,()=>m({editor:t})]));a={...a,...f}}const l=O0e(a);s.push(l);const c=Pe(n,"addInputRules",i);if(U4(n,t.options.enableInputRules)&&c){const f=c();if(f&&f.length){const p=l1e({editor:t,rules:f}),m=Array.isArray(p)?p:[p];s.push(...m)}}const d=Pe(n,"addPasteRules",i);if(U4(n,t.options.enablePasteRules)&&d){const f=d();if(f&&f.length){const p=m1e({editor:t,rules:f});s.push(...p)}}const h=Pe(n,"addProseMirrorPlugins",i);if(h){const f=h();s.push(...f)}return s})}get attributes(){return Dne(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Ld(this.extensions);return Object.fromEntries(e.filter(r=>!!Pe(r,"addNodeView")).map(r=>{const n=this.attributes.filter(l=>l.type===r.name),i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:Nr(r.name,this.schema)},s=Pe(r,"addNodeView",i);if(!s)return[];const o=s();if(!o)return[];const a=(l,c,d,h,f)=>{const p=xp(l,n);return o({node:l,view:c,getPos:d,decorations:h,innerDecorations:f,editor:t,extension:r,HTMLAttributes:p})};return[r.name,a]}))}dispatchTransaction(t){const{editor:e}=this;return nv([...this.extensions].reverse()).reduceRight((n,i)=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:e,type:xg(i.name,this.schema)},o=Pe(i,"dispatchTransaction",s);return o?a=>{o.call(s,{transaction:a,next:n})}:n},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=Ld(this.extensions);return Object.fromEntries(e.filter(r=>!!Pe(r,"addMarkView")).map(r=>{const n=this.attributes.filter(a=>a.type===r.name),i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:Fo(r.name,this.schema)},s=Pe(r,"addMarkView",i);if(!s)return[];const o=(a,l,c)=>{const d=xp(a,n);return s()({mark:a,view:l,inline:c,editor:t,extension:r,HTMLAttributes:d,updateAttributes:h=>{O1e(a,t,h)}})};return[r.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var r;const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:xg(e.name,this.schema)};e.type==="mark"&&((r=bt(Pe(e,"keepOnSplit",n)))==null||r)&&this.splittableMarks.push(e.name);const i=Pe(e,"onBeforeCreate",n),s=Pe(e,"onCreate",n),o=Pe(e,"onUpdate",n),a=Pe(e,"onSelectionUpdate",n),l=Pe(e,"onTransaction",n),c=Pe(e,"onFocus",n),d=Pe(e,"onBlur",n),h=Pe(e,"onDestroy",n);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),d&&this.editor.on("blur",d),h&&this.editor.on("destroy",h)})}};q0.resolve=Fne;q0.sort=nv;q0.flatten=BM;var g1e={};FM(g1e,{ClipboardTextSerializer:()=>Yne,Commands:()=>Qne,Delete:()=>Xne,Drop:()=>Jne,Editable:()=>Zne,FocusEvents:()=>tie,Keymap:()=>rie,Paste:()=>nie,Tabindex:()=>iie,TextDirection:()=>sie,focusEventsPluginKey:()=>eie});var yr=class Gne extends UM{constructor(){super(...arguments),this.type="extension"}static create(e={}){const r=typeof e=="function"?e():e;return new Gne(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}},Yne=yr.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Xt({key:new Ar("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:r}=t,{doc:n,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(d=>d.$from.pos)),a=Math.max(...s.map(d=>d.$to.pos)),l=Lne(r);return qne(n,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),Qne=yr.create({name:"commands",addCommands(){return{...Tne}}}),Xne=yr.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var r,n,i;const s=()=>{var o,a,l,c;if((c=(l=(a=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,t))!=null?c:t.getMeta("y-sync$"))return;const d=Ane(t.before,[t,...e]);zne(d).forEach(p=>{d.mapping.mapResult(p.oldRange.from).deletedAfter&&d.mapping.mapResult(p.oldRange.to).deletedBefore&&d.before.nodesBetween(p.oldRange.from,p.oldRange.to,(m,g)=>{const v=g+m.nodeSize-2,y=p.oldRange.from<=g&&v<=p.oldRange.to;this.editor.emit("delete",{type:"node",node:m,from:g,to:v,newFrom:d.mapping.map(g),newTo:d.mapping.map(v),deletedRange:p.oldRange,newRange:p.newRange,partial:!y,editor:this.editor,transaction:t,combinedTransform:d})})});const f=d.mapping;d.steps.forEach((p,m)=>{var g,v;if(p instanceof us){const y=f.slice(m).map(p.from,-1),b=f.slice(m).map(p.to),w=f.invert().map(y,-1),x=f.invert().map(b),S=(g=d.doc.nodeAt(y-1))==null?void 0:g.marks.some(E=>E.eq(p.mark)),_=(v=d.doc.nodeAt(b))==null?void 0:v.marks.some(E=>E.eq(p.mark));this.editor.emit("delete",{type:"mark",mark:p.mark,from:p.from,to:p.to,deletedRange:{from:w,to:x},newRange:{from:y,to:b},partial:!!(_||S),editor:this.editor,transaction:t,combinedTransform:d})}})};(i=(n=(r=this.editor.options.coreExtensionOptions)==null?void 0:r.delete)==null?void 0:n.async)==null||i?setTimeout(s,0):s()}}),Jne=yr.create({name:"drop",addProseMirrorPlugins(){return[new Xt({key:new Ar("tiptapDrop"),props:{handleDrop:(t,e,r,n)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:r,moved:n})}}})]}}),Zne=yr.create({name:"editable",addProseMirrorPlugins(){return[new Xt({key:new Ar("editable"),props:{editable:()=>this.editor.options.editable}})]}}),eie=new Ar("focusEvents"),tie=yr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Xt({key:eie,props:{handleDOMEvents:{focus:(e,r)=>{t.isFocused=!0;const n=t.state.tr.setMeta("focus",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1},blur:(e,r)=>{t.isFocused=!1;const n=t.state.tr.setMeta("blur",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1}}}})]}}),rie=yr.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:d,$anchor:h}=l,{pos:f,parent:p}=h,m=h.parent.isTextblock&&f>0?a.doc.resolve(f-1):h,g=m.parent.type.spec.isolating,v=h.pos-h.parentOffset,y=g&&m.parent.childCount===1?v===h.pos:Ke.atStart(c).from===f;return!d||!p.type.isTextblock||p.textContent.length||!y||y&&h.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...n},s={...n,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return rv()||Rne()?s:i},addProseMirrorPlugins(){return[new Xt({key:new Ar("clearDocument"),appendTransaction:(t,e,r)=>{if(t.some(g=>g.getMeta("composition")))return;const n=t.some(g=>g.docChanged)&&!e.doc.eq(r.doc),i=t.some(g=>g.getMeta("preventClearDocument"));if(!n||i)return;const{empty:s,from:o,to:a}=e.selection,l=Ke.atStart(e.doc).from,c=Ke.atEnd(e.doc).to;if(s||!(o===l&&a===c)||!D0(r.doc))return;const f=r.tr,p=R0({state:r,transaction:f}),{commands:m}=new M0({editor:this.editor,state:p});if(m.clearNodes(),!!f.steps.length)return f}})]}}),nie=yr.create({name:"paste",addProseMirrorPlugins(){return[new Xt({key:new Ar("tiptapPaste"),props:{handlePaste:(t,e,r)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:r})}}})]}}),iie=yr.create({name:"tabindex",addProseMirrorPlugins(){return[new Xt({key:new Ar("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),sie=yr.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=Ld(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const r=e.getAttribute("dir");return r&&(r==="ltr"||r==="rtl"||r==="auto")?r:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new Xt({key:new Ar("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),y1e=class Nu{constructor(e,r,n=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=r,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let r=this.from,n=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}r=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:r,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),r=this.resolvedPos.doc.resolve(e);return new Nu(r,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Nu(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Nu(e,this.editor)}get children(){const e=[];return this.node.content.forEach((r,n)=>{const i=r.isBlock&&!r.isTextblock,s=r.isAtom&&!r.isText,o=this.pos+n+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(o);if(!i&&a.depth<=this.depth)return;const l=new Nu(a,this.editor,i,i?r:null);i&&(l.actualDepth=this.depth+1),e.push(new Nu(a,this.editor,i,i?r:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,r={}){let n=null,i=this.parent;for(;i&&!n;){if(i.node.type.name===e)if(Object.keys(r).length>0){const s=i.node.attrs,o=Object.keys(r);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==r[l])break}}else n=i;i=i.parent}return n}querySelector(e,r={}){return this.querySelectorAll(e,r,!0)[0]||null}querySelectorAll(e,r={},n=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(r);return this.children.forEach(o=>{n&&i.length>0||(o.node.type.name===e&&s.every(l=>r[l]===o.node.attrs[l])&&i.push(o),!(n&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,r,n))))}),i}setAttribute(e){const{tr:r}=this.editor.state;r.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(r)}},v1e=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function b1e(t,e,r){const n=document.querySelector("style[data-tiptap-style]");if(n!==null)return n;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var x1e=class extends o1e{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:Dbe,createMappablePosition:Fbe},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:i,moved:s})=>this.options.onDrop(n,i,s)),this.on("paste",({event:n,slice:i})=>this.options.onPaste(n,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),r=Pne(e,this.options.autofocus);this.editorState=Lu.create({doc:e,schema:this.schema,selection:r||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=b1e(v1e,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const r=$ne(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let r=e;if([].concat(t).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;r=r.filter(o=>!o.key.startsWith(s))}),e.length===r.length)return;const n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}createExtensionManager(){var t,e;const n=[...this.options.enableCoreExtensions?[Zne,Yne.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),Qne,tie,rie,iie,Jne,nie,Xne,sie.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new q0(n,this)}createCommandManager(){this.commandManager=new M0({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=xI(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(r=>r.name!=="collaboration"),this.createExtensionManager()}}),t=xI(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:r}=this.options,n=e.dispatchTransaction||this.dispatchTransaction.bind(this),i=r?this.extensionManager.dispatchTransaction(n):n;this.editorView=new Cne(t,{...e,attributes:{role:"textbox",...e==null?void 0:e.attributes},dispatchTransaction:i,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.prependClass(),this.injectCSS();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(c=>{var d;return(d=this.capturedTransaction)==null?void 0:d.step(c)});return}const{state:e,transactions:r}=this.state.applyTransaction(t),n=!this.state.selection.eq(e.selection),i=r.includes(t),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:r.slice(1)}),n&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=r.findLast(c=>c.getMeta("focus")||c.getMeta("blur")),a=o==null?void 0:o.getMeta("focus"),l=o==null?void 0:o.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:o}),l&&this.emit("blur",{editor:this,event:l.event,transaction:o}),!(t.getMeta("preventUpdate")||!r.some(c=>c.docChanged)||s.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:r.slice(1)})}getAttributes(t){return Bne(this.state,t)}isActive(t,e){const r=typeof t=="string"?t:null,n=typeof t=="string"?e:t;return Mbe(this.state,r,n)}getJSON(){return this.state.doc.toJSON()}getHTML(){return zM(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:r={}}=t||{};return Tbe(this.state.doc,{blockSeparator:e,textSerializers:{...Lne(this.schema),...r}})}get isEmpty(){return D0(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelector(t,e))||null}$nodes(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new y1e(e,this)}get $doc(){return this.$pos(0)}};function Bd(t){return new F0({find:t.find,handler:({state:e,range:r,match:n})=>{const i=bt(t.getAttributes,void 0,n);if(i===!1||i===null)return null;const{tr:s}=e,o=n[n.length-1],a=n[0];if(o){const l=a.search(/\S/),c=r.from+a.indexOf(o),d=c+o.length;if(VM(r.from,r.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===t.type&&g!==p.mark.type)).filter(p=>p.to>c).length)return null;d<r.to&&s.delete(d,r.to),c>r.from&&s.delete(r.from+l,c);const f=r.from+l+o.length;s.addMark(r.from+l,f,t.type.create(i||{})),s.removeStoredMark(t.type)}},undoable:t.undoable})}function w1e(t){return new F0({find:t.find,handler:({state:e,range:r,match:n})=>{const i=bt(t.getAttributes,void 0,n)||{},{tr:s}=e,o=r.from;let a=r.to;const l=t.type.create(i);if(n[1]){const c=n[0].lastIndexOf(n[1]);let d=o+c;d>a?d=a:a=d+n[1].length;const h=n[0][n[0].length-1];s.insertText(h,o+n[0].length-1),s.replaceWith(d,a,l)}else if(n[0]){const c=t.type.isInline?o:o-1;s.insert(c,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()},undoable:t.undoable})}function SI(t){return new F0({find:t.find,handler:({state:e,range:r,match:n})=>{const i=e.doc.resolve(r.from),s=bt(t.getAttributes,void 0,n)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(r.from,r.to).setBlockType(r.from,r.from,t.type,s)},undoable:t.undoable})}function zd(t){return new F0({find:t.find,handler:({state:e,range:r,match:n,chain:i})=>{const s=bt(t.getAttributes,void 0,n)||{},o=e.tr.delete(r.from,r.to),l=o.doc.resolve(r.from).blockRange(),c=l&&SM(l,t.type,s);if(!c)return null;if(o.wrap(l,c),t.keepMarks&&t.editor){const{selection:h,storedMarks:f}=e,{splittableMarks:p}=t.editor.extensionManager,m=f||h.$to.parentOffset&&h.$from.marks();if(m){const g=m.filter(v=>p.includes(v.type.name));o.ensureMarks(g)}}if(t.keepAttributes){const h=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(h,s).run()}const d=o.doc.resolve(r.from-1).nodeBefore;d&&d.type===t.type&&ul(o.doc,r.from-1)&&(!t.joinPredicate||t.joinPredicate(n,d))&&o.join(r.from-1)},undoable:t.undoable})}function S1e(t,e){const{selection:r}=t,{$from:n}=r;if(r instanceof Re){const s=n.index();return n.parent.canReplaceWith(s,s+1,e)}let i=n.depth;for(;i>=0;){const s=n.index(i);if(n.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}var _1e={};FM(_1e,{createAtomBlockMarkdownSpec:()=>E1e,createBlockMarkdownSpec:()=>N1e,createInlineMarkdownSpec:()=>T1e,parseAttributes:()=>HM,parseIndentedBlocks:()=>_I,renderNestedMarkdownContent:()=>KM,serializeAttributes:()=>WM});function HM(t){if(!(t!=null&&t.trim()))return{};const e={},r=[],n=t.replace(/["']([^"']*)["']/g,c=>(r.push(c),`__QUOTED_${r.length-1}__`)),i=n.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const c=i.map(d=>d.trim().slice(1));e.class=c.join(" ")}const s=n.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(e.id=s[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(n.matchAll(o)).forEach(([,c,d])=>{var h;const f=parseInt(((h=d.match(/__QUOTED_(\d+)__/))==null?void 0:h[1])||"0",10),p=r[f];p&&(e[c]=p.slice(1,-1))});const l=n.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(d=>{d.match(/^[a-zA-Z][\w-]*$/)&&(e[d]=!0)}),e}function WM(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(n=>e.push(`.${n}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([r,n])=>{r==="class"||r==="id"||(n===!0?e.push(r):n!==!1&&n!=null&&e.push(`${r}="${String(n)}"`))}),e.join(" ")}function E1e(t){const{nodeName:e,name:r,parseAttributes:n=HM,serializeAttributes:i=WM,defaultAttributes:s={},requiredAttributes:o=[],allowedAttributes:a}=t,l=r||e,c=d=>{if(!a)return d;const h={};return a.forEach(f=>{f in d&&(h[f]=d[f])}),h};return{parseMarkdown:(d,h)=>{const f={...s,...d.attributes};return h.createNode(e,f,[])},markdownTokenizer:{name:e,level:"block",start(d){var h;const f=new RegExp(`^:::${l}(?:\\s|$)`,"m"),p=(h=d.match(f))==null?void 0:h.index;return p!==void 0?p:-1},tokenize(d,h,f){const p=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),m=d.match(p);if(!m)return;const g=m[1]||"",v=n(g);if(!o.find(b=>!(b in v)))return{type:e,raw:m[0],attributes:v}}},renderMarkdown:d=>{const h=c(d.attrs||{}),f=i(h),p=f?` {${f}}`:"";return`:::${l}${p} :::`}}}function N1e(t){const{nodeName:e,name:r,getContent:n,parseAttributes:i=HM,serializeAttributes:s=WM,defaultAttributes:o={},content:a="block",allowedAttributes:l}=t,c=r||e,d=h=>{if(!l)return h;const f={};return l.forEach(p=>{p in h&&(f[p]=h[p])}),f};return{parseMarkdown:(h,f)=>{let p;if(n){const g=n(h);p=typeof g=="string"?[{type:"text",text:g}]:g}else a==="block"?p=f.parseChildren(h.tokens||[]):p=f.parseInline(h.tokens||[]);const m={...o,...h.attributes};return f.createNode(e,m,p)},markdownTokenizer:{name:e,level:"block",start(h){var f;const p=new RegExp(`^:::${c}`,"m"),m=(f=h.match(p))==null?void 0:f.index;return m!==void 0?m:-1},tokenize(h,f,p){var m;const g=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),v=h.match(g);if(!v)return;const[y,b=""]=v,w=i(b);let x=1;const S=y.length;let _="";const E=/^:::([\w-]*)(\s.*)?/gm,N=h.slice(S);for(E.lastIndex=0;;){const k=E.exec(N);if(k===null)break;const C=k.index,O=k[1];if(!((m=k[2])!=null&&m.endsWith(":::"))){if(O)x+=1;else if(x-=1,x===0){const P=N.slice(0,C);_=P.trim();const j=h.slice(0,S+C+k[0].length);let A=[];if(_)if(a==="block")for(A=p.blockTokens(P),A.forEach(D=>{D.text&&(!D.tokens||D.tokens.length===0)&&(D.tokens=p.inlineTokens(D.text))});A.length>0;){const D=A[A.length-1];if(D.type==="paragraph"&&(!D.text||D.text.trim()===""))A.pop();else break}else A=p.inlineTokens(_);return{type:e,raw:j,attributes:w,content:_,tokens:A}}}}}},renderMarkdown:(h,f)=>{const p=d(h.attrs||{}),m=s(p),g=m?` {${m}}`:"",v=f.renderChildren(h.content||[],`

`);return`:::${c}${g}

${v}

:::`}}}function C1e(t){if(!t.trim())return{};const e={},r=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let n=r.exec(t);for(;n!==null;){const[,i,s,o]=n;e[i]=s||o,n=r.exec(t)}return e}function k1e(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,r])=>`${e}="${r}"`).join(" ")}function T1e(t){const{nodeName:e,name:r,getContent:n,parseAttributes:i=C1e,serializeAttributes:s=k1e,defaultAttributes:o={},selfClosing:a=!1,allowedAttributes:l}=t,c=r||e,d=f=>{if(!l)return f;const p={};return l.forEach(m=>{const g=typeof m=="string"?m:m.name,v=typeof m=="string"?void 0:m.skipIfDefault;if(g in f){const y=f[g];if(v!==void 0&&y===v)return;p[g]=y}}),p},h=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(f,p)=>{const m={...o,...f.attributes};if(a)return p.createNode(e,m);const g=n?n(f):f.content||"";return g?p.createNode(e,m,[p.createTextNode(g)]):p.createNode(e,m,[])},markdownTokenizer:{name:e,level:"inline",start(f){const p=a?new RegExp(`\\[${h}\\s*[^\\]]*\\]`):new RegExp(`\\[${h}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${h}\\]`),m=f.match(p),g=m==null?void 0:m.index;return g!==void 0?g:-1},tokenize(f,p,m){const g=a?new RegExp(`^\\[${h}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${h}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${h}\\]`),v=f.match(g);if(!v)return;let y="",b="";if(a){const[,x]=v;b=x}else{const[,x,S]=v;b=x,y=S||""}const w=i(b.trim());return{type:e,raw:v[0],content:y.trim(),attributes:w}}},renderMarkdown:f=>{let p="";n?p=n(f):f.content&&f.content.length>0&&(p=f.content.filter(y=>y.type==="text").map(y=>y.text).join(""));const m=d(f.attrs||{}),g=s(m),v=g?` ${g}`:"";return a?`[${c}${v}]`:`[${c}${v}]${p}[/${c}]`}}}function _I(t,e,r){var n,i,s,o;const a=t.split(`
`),l=[];let c="",d=0;const h=e.baseIndentSize||2;for(;d<a.length;){const f=a[d],p=f.match(e.itemPattern);if(!p){if(l.length>0)break;if(f.trim()===""){d+=1,c=`${c}${f}
`;continue}else return}const m=e.extractItemData(p),{indentLevel:g,mainContent:v}=m;c=`${c}${f}
`;const y=[v];for(d+=1;d<a.length;){const S=a[d];if(S.trim()===""){const E=a.slice(d+1).findIndex(C=>C.trim()!=="");if(E===-1)break;if((((i=(n=a[d+1+E].match(/^(\s*)/))==null?void 0:n[1])==null?void 0:i.length)||0)>g){y.push(S),c=`${c}${S}
`,d+=1;continue}else break}if((((o=(s=S.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:o.length)||0)>g)y.push(S),c=`${c}${S}
`,d+=1;else break}let b;const w=y.slice(1);if(w.length>0){const S=w.map(_=>_.slice(g+h)).join(`
`);S.trim()&&(e.customNestedParser?b=e.customNestedParser(S):b=r.blockTokens(S))}const x=e.createToken(m,b);l.push(x)}if(l.length!==0)return{items:l,raw:c}}function KM(t,e,r,n){if(!t||!Array.isArray(t.content))return"";const i=typeof r=="function"?r(n):r,[s,...o]=t.content,a=e.renderChildren([s]),l=[`${i}${a}`];return o&&o.length>0&&o.forEach(c=>{const d=e.renderChildren([c]);if(d){const h=d.split(`
`).map(f=>f?e.indent(f):"").join(`
`);l.push(h)}}),l.join(`
`)}function O1e(t,e,r={}){const{state:n}=e,{doc:i,tr:s}=n,o=t;i.descendants((a,l)=>{const c=s.mapping.map(l),d=s.mapping.map(l)+a.nodeSize;let h=null;if(a.marks.forEach(p=>{if(p!==o)return!1;h=p}),!h)return;let f=!1;if(Object.keys(r).forEach(p=>{r[p]!==h.attrs[p]&&(f=!0)}),f){const p=t.type.create({...t.attrs,...r});s.removeMark(c,d,t.type),s.addMark(c,d,p)}}),s.docChanged&&e.view.dispatch(s)}var xi=class oie extends UM{constructor(){super(...arguments),this.type="node"}static create(e={}){const r=typeof e=="function"?e():e;return new oie(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function Pc(t){return new d1e({find:t.find,handler:({state:e,range:r,match:n,pasteEvent:i})=>{const s=bt(t.getAttributes,void 0,n,i);if(s===!1||s===null)return null;const{tr:o}=e,a=n[n.length-1],l=n[0];let c=r.to;if(a){const d=l.search(/\S/),h=r.from+l.indexOf(a),f=h+a.length;if(VM(r.from,r.to,e.doc).filter(m=>m.mark.type.excluded.find(v=>v===t.type&&v!==m.mark.type)).filter(m=>m.to>h).length)return null;f<r.to&&o.delete(f,r.to),h>r.from&&o.delete(r.from+d,h),c=r.from+d+a.length,o.addMark(r.from+d,c,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:j1e,getOwnPropertySymbols:P1e}=Object,{hasOwnProperty:I1e}=Object.prototype;function $1(t,e){return function(n,i,s){return t(n,i,s)&&e(n,i,s)}}function Eg(t){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,i);const{cache:s}=i,o=s.get(r),a=s.get(n);if(o&&a)return o===n&&a===r;s.set(r,n),s.set(n,r);const l=t(r,n,i);return s.delete(r),s.delete(n),l}}function R1e(t){return t!=null?t[Symbol.toStringTag]:void 0}function K4(t){return j1e(t).concat(P1e(t))}const M1e=Object.hasOwn||((t,e)=>I1e.call(t,e));function Wc(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const A1e="__v",$1e="__o",D1e="_owner",{getOwnPropertyDescriptor:G4,keys:Y4}=Object;function F1e(t,e){return t.byteLength===e.byteLength&&iv(new Uint8Array(t),new Uint8Array(e))}function q1e(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function L1e(t,e){return t.byteLength===e.byteLength&&iv(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function B1e(t,e){return Wc(t.getTime(),e.getTime())}function z1e(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function V1e(t,e){return t===e}function Q4(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),s=t.entries();let o,a,l=0;for(;(o=s.next())&&!o.done;){const c=e.entries();let d=!1,h=0;for(;(a=c.next())&&!a.done;){if(i[h]){h++;continue}const f=o.value,p=a.value;if(r.equals(f[0],p[0],l,h,t,e,r)&&r.equals(f[1],p[1],f[0],p[0],t,e,r)){d=i[h]=!0;break}h++}if(!d)return!1;l++}return!0}const U1e=Wc;function H1e(t,e,r){const n=Y4(t);let i=n.length;if(Y4(e).length!==i)return!1;for(;i-- >0;)if(!aie(t,e,r,n[i]))return!1;return!0}function Jh(t,e,r){const n=K4(t);let i=n.length;if(K4(e).length!==i)return!1;let s,o,a;for(;i-- >0;)if(s=n[i],!aie(t,e,r,s)||(o=G4(t,s),a=G4(e,s),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function W1e(t,e){return Wc(t.valueOf(),e.valueOf())}function K1e(t,e){return t.source===e.source&&t.flags===e.flags}function X4(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),s=t.values();let o,a;for(;(o=s.next())&&!o.done;){const l=e.values();let c=!1,d=0;for(;(a=l.next())&&!a.done;){if(!i[d]&&r.equals(o.value,a.value,o.value,a.value,t,e,r)){c=i[d]=!0;break}d++}if(!c)return!1}return!0}function iv(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function G1e(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function aie(t,e,r,n){return(n===D1e||n===$1e||n===A1e)&&(t.$$typeof||e.$$typeof)?!0:M1e(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const Y1e="[object ArrayBuffer]",Q1e="[object Arguments]",X1e="[object Boolean]",J1e="[object DataView]",Z1e="[object Date]",exe="[object Error]",txe="[object Map]",rxe="[object Number]",nxe="[object Object]",ixe="[object RegExp]",sxe="[object Set]",oxe="[object String]",axe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},lxe="[object URL]",cxe=Object.prototype.toString;function uxe({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:o,areNumbersEqual:a,areObjectsEqual:l,arePrimitiveWrappersEqual:c,areRegExpsEqual:d,areSetsEqual:h,areTypedArraysEqual:f,areUrlsEqual:p,unknownTagComparators:m}){return function(v,y,b){if(v===y)return!0;if(v==null||y==null)return!1;const w=typeof v;if(w!==typeof y)return!1;if(w!=="object")return w==="number"?a(v,y,b):w==="function"?s(v,y,b):!1;const x=v.constructor;if(x!==y.constructor)return!1;if(x===Object)return l(v,y,b);if(Array.isArray(v))return e(v,y,b);if(x===Date)return n(v,y,b);if(x===RegExp)return d(v,y,b);if(x===Map)return o(v,y,b);if(x===Set)return h(v,y,b);const S=cxe.call(v);if(S===Z1e)return n(v,y,b);if(S===ixe)return d(v,y,b);if(S===txe)return o(v,y,b);if(S===sxe)return h(v,y,b);if(S===nxe)return typeof v.then!="function"&&typeof y.then!="function"&&l(v,y,b);if(S===lxe)return p(v,y,b);if(S===exe)return i(v,y,b);if(S===Q1e)return l(v,y,b);if(axe[S])return f(v,y,b);if(S===Y1e)return t(v,y,b);if(S===J1e)return r(v,y,b);if(S===X1e||S===rxe||S===oxe)return c(v,y,b);if(m){let _=m[S];if(!_){const E=R1e(v);E&&(_=m[E])}if(_)return _(v,y,b)}return!1}}function dxe({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:F1e,areArraysEqual:r?Jh:q1e,areDataViewsEqual:L1e,areDatesEqual:B1e,areErrorsEqual:z1e,areFunctionsEqual:V1e,areMapsEqual:r?$1(Q4,Jh):Q4,areNumbersEqual:U1e,areObjectsEqual:r?Jh:H1e,arePrimitiveWrappersEqual:W1e,areRegExpsEqual:K1e,areSetsEqual:r?$1(X4,Jh):X4,areTypedArraysEqual:r?$1(iv,Jh):iv,areUrlsEqual:G1e,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const i=Eg(n.areArraysEqual),s=Eg(n.areMapsEqual),o=Eg(n.areObjectsEqual),a=Eg(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:a})}return n}function hxe(t){return function(e,r,n,i,s,o,a){return t(e,r,a)}}function fxe({circular:t,comparator:e,createState:r,equals:n,strict:i}){if(r)return function(a,l){const{cache:c=t?new WeakMap:void 0,meta:d}=r();return e(a,l,{cache:c,equals:n,meta:d,strict:i})};if(t)return function(a,l){return e(a,l,{cache:new WeakMap,equals:n,meta:void 0,strict:i})};const s={cache:void 0,equals:n,meta:void 0,strict:i};return function(a,l){return e(a,l,s)}}const pxe=hl();hl({strict:!0});hl({circular:!0});hl({circular:!0,strict:!0});hl({createInternalComparator:()=>Wc});hl({strict:!0,createInternalComparator:()=>Wc});hl({circular:!0,createInternalComparator:()=>Wc});hl({circular:!0,createInternalComparator:()=>Wc,strict:!0});function hl(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:i=!1}=t,s=dxe(t),o=uxe(s),a=r?r(o):hxe(o);return fxe({circular:e,comparator:o,createState:n,equals:a,strict:i})}var lie={exports:{}},cie={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L0=T,mxe=bM;function gxe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yxe=typeof Object.is=="function"?Object.is:gxe,vxe=mxe.useSyncExternalStore,bxe=L0.useRef,xxe=L0.useEffect,wxe=L0.useMemo,Sxe=L0.useDebugValue;cie.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var s=bxe(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=wxe(function(){function l(p){if(!c){if(c=!0,d=p,p=n(p),i!==void 0&&o.hasValue){var m=o.value;if(i(m,p))return h=m}return h=p}if(m=h,yxe(d,p))return m;var g=n(p);return i!==void 0&&i(m,g)?(d=p,m):(d=p,h=g)}var c=!1,d,h,f=r===void 0?null:r;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,r,n,i]);var a=vxe(t,s[0],s[1]);return xxe(function(){o.hasValue=!0,o.value=a},[a]),Sxe(a),a};lie.exports=cie;var _xe=lie.exports,Exe=(...t)=>e=>{t.forEach(r=>{typeof r=="function"?r(e):r&&(r.current=e)})},Nxe=({contentComponent:t})=>{const e=bM.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return u.jsx(u.Fragment,{children:Object.values(e)})};function Cxe(){const t=new Set;let e={};return{subscribe(r){return t.add(r),()=>{t.delete(r)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(r,n){e={...e,[r]:Nue.createPortal(n.reactElement,n.element,r)},t.forEach(i=>i())},removeRenderer(r){const n={...e};delete n[r],e=n,t.forEach(i=>i())}}}var kxe=class extends Se.Component{constructor(t){var e;super(t),this.editorContentRef=Se.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const r=this.editorContentRef.current;r.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:r}),e.contentComponent=Cxe(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const r=document.createElement("div");r.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:r})}catch{}}}render(){const{editor:t,innerRef:e,...r}=this.props;return u.jsxs(u.Fragment,{children:[u.jsx("div",{ref:Exe(e,this.editorContentRef),...r}),(t==null?void 0:t.contentComponent)&&u.jsx(Nxe,{contentComponent:t.contentComponent})]})}},Txe=T.forwardRef((t,e)=>{const r=Se.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Se.createElement(kxe,{key:r,innerRef:e,...t})}),Oxe=Se.memo(Txe),jxe=typeof window<"u"?T.useLayoutEffect:T.useEffect,Pxe=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(n=>n())},r=this.editor;return r.on("transaction",e),()=>{r.off("transaction",e)}}}};function Ixe(t){var e;const[r]=T.useState(()=>new Pxe(t.editor)),n=_xe.useSyncExternalStoreWithSelector(r.subscribe,r.getSnapshot,r.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:pxe);return jxe(()=>r.watch(t.editor),[t.editor,r]),T.useDebugValue(n),n}var Rxe=!1,EI=typeof window>"u",Mxe=EI||!!(typeof window<"u"&&window.next),Axe=class uie{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(r=>r())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?EI||Mxe?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...n)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...n)},onBlur:(...n)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...n)},onCreate:(...n)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...n)},onDestroy:(...n)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...n)},onFocus:(...n)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...n)},onSelectionUpdate:(...n)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...n)},onTransaction:(...n)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...n)},onUpdate:(...n)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...n)},onContentError:(...n)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...n)},onDrop:(...n)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...n)},onPaste:(...n)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...n)},onDelete:(...n)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...n)}};return new x1e(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,r){return Object.keys(e).every(n=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)?!0:n==="extensions"&&e.extensions&&r.extensions?e.extensions.length!==r.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=r.extensions)==null?void 0:o[s])}):e[n]===r[n])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?uie.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((n,i)=>n===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,r=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){r&&r.setOptions(this.options.current);return}r&&!r.isDestroyed&&(r.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function $xe(t={},e=[]){const r=T.useRef(t);r.current=t;const[n]=T.useState(()=>new Axe(r)),i=bM.useSyncExternalStore(n.subscribe,n.getEditor,n.getServerSnapshot);return T.useDebugValue(i),T.useEffect(n.onRender(e)),Ixe({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&s===0?0:s+1}),i}var Dxe=T.createContext({editor:null});Dxe.Consumer;var Fxe=T.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),qxe=()=>T.useContext(Fxe);Se.forwardRef((t,e)=>{const{onDragStart:r}=qxe(),n=t.as||"div";return u.jsx(n,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:r,style:{whiteSpace:"normal",...t.style}})});Se.createContext({markViewContentRef:()=>{}});var sv=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:r,...n}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,n,r]},Lxe=/^\s*>\s$/,Bxe=xi.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return sv("blockquote",{...Cr(this.options.HTMLAttributes,t),children:sv("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const r=">",n=[];return t.content.forEach(i=>{const a=e.renderChildren([i]).split(`
`).map(l=>l.trim()===""?r:`${r} ${l}`);n.push(a.join(`
`))}),n.join(`
${r}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[zd({find:Lxe,type:this.type})]}}),zxe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Vxe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Uxe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Hxe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Wxe=Hc.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return sv("strong",{...Cr(this.options.HTMLAttributes,t),children:sv("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Bd({find:zxe,type:this.type}),Bd({find:Uxe,type:this.type})]},addPasteRules(){return[Pc({find:Vxe,type:this.type}),Pc({find:Hxe,type:this.type})]}}),Kxe=/(^|[^`])`([^`]+)`(?!`)$/,Gxe=/(^|[^`])`([^`]+)`(?!`)/g,Yxe=Hc.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Cr(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Bd({find:Kxe,type:this.type})]},addPasteRules(){return[Pc({find:Gxe,type:this.type})]}}),D1=4,Qxe=/^```([a-z]+)?[\s\n]$/,Xxe=/^~~~([a-z]+)?[\s\n]$/,Jxe=xi.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:D1,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:r}=this.options;if(!r)return null;const s=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(r)).map(o=>o.replace(r,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Cr(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var r;return((r=t.raw)==null?void 0:r.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var r;let n="";const i=((r=t.attrs)==null?void 0:r.language)||"";return t.content?n=[`\`\`\`${i}`,e.renderChildren(t.content),"```"].join(`
`):n=`\`\`\`${i}

\`\`\``,n},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,r=e.pos===1;return!t||e.parent.type.name!==this.name?!1:r||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const r=(e=this.options.tabSize)!=null?e:D1,{state:n}=t,{selection:i}=n,{$from:s,empty:o}=i;if(s.parent.type!==this.type)return!1;const a=" ".repeat(r);return o?t.commands.insertContent(a):t.commands.command(({tr:l})=>{const{from:c,to:d}=i,p=n.doc.textBetween(c,d,`
`,`
`).split(`
`).map(m=>a+m).join(`
`);return l.replaceWith(c,d,n.schema.text(p)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const r=(e=this.options.tabSize)!=null?e:D1,{state:n}=t,{selection:i}=n,{$from:s,empty:o}=i;return s.parent.type!==this.type?!1:o?t.commands.command(({tr:a})=>{var l;const{pos:c}=s,d=s.start(),h=s.end(),p=n.doc.textBetween(d,h,`
`,`
`).split(`
`);let m=0,g=0;const v=c-d;for(let _=0;_<p.length;_+=1){if(g+p[_].length>=v){m=_;break}g+=p[_].length+1}const b=((l=p[m].match(/^ */))==null?void 0:l[0])||"",w=Math.min(b.length,r);if(w===0)return!0;let x=d;for(let _=0;_<m;_+=1)x+=p[_].length+1;return a.delete(x,x+w),c-x<=w&&a.setSelection(Be.create(a.doc,x)),!0}):t.commands.command(({tr:a})=>{const{from:l,to:c}=i,f=n.doc.textBetween(l,c,`
`,`
`).split(`
`).map(p=>{var m;const g=((m=p.match(/^ */))==null?void 0:m[0])||"",v=Math.min(g.length,r);return p.slice(v)}).join(`
`);return a.replaceWith(l,c,n.schema.text(f)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:r}=e,{$from:n,empty:i}=r;if(!i||n.parent.type!==this.type)return!1;const s=n.parentOffset===n.parent.nodeSize-2,o=n.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:a})=>(a.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:r,doc:n}=e,{$from:i,empty:s}=r;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:n.nodeAt(a)?t.commands.command(({tr:c})=>(c.setSelection(Ke.near(n.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[SI({find:Qxe,type:this.type,getAttributes:t=>({language:t[1]})}),SI({find:Xxe,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Xt({key:new Ar("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const r=e.clipboardData.getData("text/plain"),n=e.clipboardData.getData("vscode-editor-data"),i=n?JSON.parse(n):void 0,s=i==null?void 0:i.mode;if(!r||!s)return!1;const{tr:o,schema:a}=t.state,l=a.text(r.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(Be.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),Zxe=xi.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),ewe=xi.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Cr(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:r,editor:n})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=r;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=n.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:d})=>{if(d&&l&&o){const h=l.filter(f=>a.includes(f.type.name));c.ensureMarks(h)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),twe=xi.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Cr(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var r;const n=(r=t.attrs)!=null&&r.level?parseInt(t.attrs.level,10):1,i="#".repeat(n);return t.content?`${i} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>SI({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),rwe=xi.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Cr(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!S1e(e,e.schema.nodes[this.name]))return!1;const{selection:r}=e,{$to:n}=r,i=t();return Vne(r)?i.insertContentAt(n.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:s,tr:o,dispatch:a})=>{if(a){const{$to:l}=o.selection,c=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?o.setSelection(Be.create(o.doc,l.pos+1)):l.nodeAfter.isBlock?o.setSelection(Re.create(o.doc,l.pos)):o.setSelection(Be.create(o.doc,l.pos));else{const d=s.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,h=d==null?void 0:d.create();h&&(o.insert(c,h),o.setSelection(Be.create(o.doc,c+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[w1e({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),nwe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,iwe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,swe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,owe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,awe=Hc.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Cr(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Bd({find:nwe,type:this.type}),Bd({find:swe,type:this.type})]},addPasteRules(){return[Pc({find:iwe,type:this.type}),Pc({find:owe,type:this.type})]}});const lwe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",cwe="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",NI="numeric",CI="ascii",kI="alpha",Pf="asciinumeric",pf="alphanumeric",TI="domain",die="emoji",uwe="scheme",dwe="slashscheme",F1="whitespace";function hwe(t,e){return t in e||(e[t]=[]),e[t]}function Fl(t,e,r){e[NI]&&(e[Pf]=!0,e[pf]=!0),e[CI]&&(e[Pf]=!0,e[kI]=!0),e[Pf]&&(e[pf]=!0),e[kI]&&(e[pf]=!0),e[pf]&&(e[TI]=!0),e[die]&&(e[TI]=!0);for(const n in e){const i=hwe(n,r);i.indexOf(t)<0&&i.push(t)}}function fwe(t,e){const r={};for(const n in e)e[n].indexOf(t)>=0&&(r[n]=!0);return r}function Un(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Un.groups={};Un.prototype={accepts(){return!!this.t},go(t){const e=this,r=e.j[t];if(r)return r;for(let n=0;n<e.jr.length;n++){const i=e.jr[n][0],s=e.jr[n][1];if(s&&i.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,r,n){for(let i=0;i<t.length;i++)this.tt(t[i],e,r,n)},tr(t,e,r,n){n=n||Un.groups;let i;return e&&e.j?i=e:(i=new Un(e),r&&n&&Fl(e,r,n)),this.jr.push([t,i]),i},ts(t,e,r,n){let i=this;const s=t.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(t[o]);return i.tt(t[s-1],e,r,n)},tt(t,e,r,n){n=n||Un.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const s=e;let o,a=i.go(t);if(a?(o=new Un,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new Un,s){if(n)if(o.t&&typeof o.t=="string"){const l=Object.assign(fwe(o.t,n),r);Fl(s,l,n)}else r&&Fl(s,r,n);o.t=s}return i.j[t]=o,o}};const We=(t,e,r,n,i)=>t.ta(e,r,n,i),rr=(t,e,r,n,i)=>t.tr(e,r,n,i),J4=(t,e,r,n,i)=>t.ts(e,r,n,i),ee=(t,e,r,n,i)=>t.tt(e,r,n,i),eo="WORD",OI="UWORD",hie="ASCIINUMERICAL",fie="ALPHANUMERICAL",wp="LOCALHOST",jI="TLD",PI="UTLD",iy="SCHEME",Cu="SLASH_SCHEME",GM="NUM",II="WS",YM="NL",If="OPENBRACE",Rf="CLOSEBRACE",ov="OPENBRACKET",av="CLOSEBRACKET",lv="OPENPAREN",cv="CLOSEPAREN",uv="OPENANGLEBRACKET",dv="CLOSEANGLEBRACKET",hv="FULLWIDTHLEFTPAREN",fv="FULLWIDTHRIGHTPAREN",pv="LEFTCORNERBRACKET",mv="RIGHTCORNERBRACKET",gv="LEFTWHITECORNERBRACKET",yv="RIGHTWHITECORNERBRACKET",vv="FULLWIDTHLESSTHAN",bv="FULLWIDTHGREATERTHAN",xv="AMPERSAND",wv="APOSTROPHE",Sv="ASTERISK",ia="AT",_v="BACKSLASH",Ev="BACKTICK",Nv="CARET",ha="COLON",QM="COMMA",Cv="DOLLAR",Es="DOT",kv="EQUALS",XM="EXCLAMATION",Ci="HYPHEN",Mf="PERCENT",Tv="PIPE",Ov="PLUS",jv="POUND",Af="QUERY",JM="QUOTE",pie="FULLWIDTHMIDDLEDOT",ZM="SEMI",Ns="SLASH",$f="TILDE",Pv="UNDERSCORE",mie="EMOJI",Iv="SYM";var gie=Object.freeze({__proto__:null,ALPHANUMERICAL:fie,AMPERSAND:xv,APOSTROPHE:wv,ASCIINUMERICAL:hie,ASTERISK:Sv,AT:ia,BACKSLASH:_v,BACKTICK:Ev,CARET:Nv,CLOSEANGLEBRACKET:dv,CLOSEBRACE:Rf,CLOSEBRACKET:av,CLOSEPAREN:cv,COLON:ha,COMMA:QM,DOLLAR:Cv,DOT:Es,EMOJI:mie,EQUALS:kv,EXCLAMATION:XM,FULLWIDTHGREATERTHAN:bv,FULLWIDTHLEFTPAREN:hv,FULLWIDTHLESSTHAN:vv,FULLWIDTHMIDDLEDOT:pie,FULLWIDTHRIGHTPAREN:fv,HYPHEN:Ci,LEFTCORNERBRACKET:pv,LEFTWHITECORNERBRACKET:gv,LOCALHOST:wp,NL:YM,NUM:GM,OPENANGLEBRACKET:uv,OPENBRACE:If,OPENBRACKET:ov,OPENPAREN:lv,PERCENT:Mf,PIPE:Tv,PLUS:Ov,POUND:jv,QUERY:Af,QUOTE:JM,RIGHTCORNERBRACKET:mv,RIGHTWHITECORNERBRACKET:yv,SCHEME:iy,SEMI:ZM,SLASH:Ns,SLASH_SCHEME:Cu,SYM:Iv,TILDE:$f,TLD:jI,UNDERSCORE:Pv,UTLD:PI,UWORD:OI,WORD:eo,WS:II});const Qs=/[a-z]/,Zh=new RegExp("\\p{L}","u"),q1=new RegExp("\\p{Emoji}","u"),Xs=/\d/,L1=/\s/,Z4="\r",B1=`
`,pwe="",mwe="",z1="";let Ng=null,Cg=null;function gwe(t=[]){const e={};Un.groups=e;const r=new Un;Ng==null&&(Ng=eq(lwe)),Cg==null&&(Cg=eq(cwe)),ee(r,"'",wv),ee(r,"{",If),ee(r,"}",Rf),ee(r,"[",ov),ee(r,"]",av),ee(r,"(",lv),ee(r,")",cv),ee(r,"<",uv),ee(r,">",dv),ee(r,"",hv),ee(r,"",fv),ee(r,"",pv),ee(r,"",mv),ee(r,"",gv),ee(r,"",yv),ee(r,"",vv),ee(r,"",bv),ee(r,"&",xv),ee(r,"*",Sv),ee(r,"@",ia),ee(r,"`",Ev),ee(r,"^",Nv),ee(r,":",ha),ee(r,",",QM),ee(r,"$",Cv),ee(r,".",Es),ee(r,"=",kv),ee(r,"!",XM),ee(r,"-",Ci),ee(r,"%",Mf),ee(r,"|",Tv),ee(r,"+",Ov),ee(r,"#",jv),ee(r,"?",Af),ee(r,'"',JM),ee(r,"/",Ns),ee(r,";",ZM),ee(r,"~",$f),ee(r,"_",Pv),ee(r,"\\",_v),ee(r,"",pie);const n=rr(r,Xs,GM,{[NI]:!0});rr(n,Xs,n);const i=rr(n,Qs,hie,{[Pf]:!0}),s=rr(n,Zh,fie,{[pf]:!0}),o=rr(r,Qs,eo,{[CI]:!0});rr(o,Xs,i),rr(o,Qs,o),rr(i,Xs,i),rr(i,Qs,i);const a=rr(r,Zh,OI,{[kI]:!0});rr(a,Qs),rr(a,Xs,s),rr(a,Zh,a),rr(s,Xs,s),rr(s,Qs),rr(s,Zh,s);const l=ee(r,B1,YM,{[F1]:!0}),c=ee(r,Z4,II,{[F1]:!0}),d=rr(r,L1,II,{[F1]:!0});ee(r,z1,d),ee(c,B1,l),ee(c,z1,d),rr(c,L1,d),ee(d,Z4),ee(d,B1),rr(d,L1,d),ee(d,z1,d);const h=rr(r,q1,mie,{[die]:!0});ee(h,"#"),rr(h,q1,h),ee(h,pwe,h);const f=ee(h,mwe);ee(f,"#"),rr(f,q1,h);const p=[[Qs,o],[Xs,i]],m=[[Qs,null],[Zh,a],[Xs,s]];for(let g=0;g<Ng.length;g++)Go(r,Ng[g],jI,eo,p);for(let g=0;g<Cg.length;g++)Go(r,Cg[g],PI,OI,m);Fl(jI,{tld:!0,ascii:!0},e),Fl(PI,{utld:!0,alpha:!0},e),Go(r,"file",iy,eo,p),Go(r,"mailto",iy,eo,p),Go(r,"http",Cu,eo,p),Go(r,"https",Cu,eo,p),Go(r,"ftp",Cu,eo,p),Go(r,"ftps",Cu,eo,p),Fl(iy,{scheme:!0,ascii:!0},e),Fl(Cu,{slashscheme:!0,ascii:!0},e),t=t.sort((g,v)=>g[0]>v[0]?1:-1);for(let g=0;g<t.length;g++){const v=t[g][0],b=t[g][1]?{[uwe]:!0}:{[dwe]:!0};v.indexOf("-")>=0?b[TI]=!0:Qs.test(v)?Xs.test(v)?b[Pf]=!0:b[CI]=!0:b[NI]=!0,J4(r,v,v,b)}return J4(r,"localhost",wp,{ascii:!0}),r.jd=new Un(Iv),{start:r,tokens:Object.assign({groups:e},gie)}}function yie(t,e){const r=ywe(e.replace(/[A-Z]/g,a=>a.toLowerCase())),n=r.length,i=[];let s=0,o=0;for(;o<n;){let a=t,l=null,c=0,d=null,h=-1,f=-1;for(;o<n&&(l=a.go(r[o]));)a=l,a.accepts()?(h=0,f=0,d=a):h>=0&&(h+=r[o].length,f++),c+=r[o].length,s+=r[o].length,o++;s-=h,o-=f,c-=h,i.push({t:d.t,v:e.slice(s-c,s),s:s-c,e:s})}return i}function ywe(t){const e=[],r=t.length;let n=0;for(;n<r;){let i=t.charCodeAt(n),s,o=i<55296||i>56319||n+1===r||(s=t.charCodeAt(n+1))<56320||s>57343?t[n]:t.slice(n,n+2);e.push(o),n+=o.length}return e}function Go(t,e,r,n,i){let s;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];t.j[l]?s=t.j[l]:(s=new Un(n),s.jr=i.slice(),t.j[l]=s),t=s}return s=new Un(r),s.jr=i.slice(),t.j[e[o-1]]=s,s}function eq(t){const e=[],r=[];let n=0,i="0123456789";for(;n<t.length;){let s=0;for(;i.indexOf(t[n+s])>=0;)s++;if(s>0){e.push(r.join(""));for(let o=parseInt(t.substring(n,n+s),10);o>0;o--)r.pop();n+=s}else r.push(t[n]),n++}return e}const Sp={defaultProtocol:"http",events:null,format:tq,formatHref:tq,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function eA(t,e=null){let r=Object.assign({},Sp);t&&(r=Object.assign(r,t instanceof eA?t.o:t));const n=r.ignoreTags,i=[];for(let s=0;s<n.length;s++)i.push(n[s].toUpperCase());this.o=r,e&&(this.defaultRender=e),this.ignoreTags=i}eA.prototype={o:Sp,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,r){const n=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=r.t in i?i[r.t]:Sp[t],typeof i=="function"&&n&&(i=i(e,r))):typeof i=="function"&&n&&(i=i(e,r.t,r)),i)},getObj(t,e,r){let n=this.o[t];return typeof n=="function"&&e!=null&&(n=n(e,r.t,r)),n},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function tq(t){return t}function vie(t,e){this.t="token",this.v=t,this.tk=e}vie.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),r=t.get("truncate",e,this),n=t.get("format",e,this);return r&&n.length>r?n.substring(0,r)+"":n},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Sp.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,r=this.toHref(t.get("defaultProtocol")),n=t.get("formatHref",r,this),i=t.get("tagName",r,e),s=this.toFormattedString(t),o={},a=t.get("className",r,e),l=t.get("target",r,e),c=t.get("rel",r,e),d=t.getObj("attributes",r,e),h=t.getObj("events",r,e);return o.href=n,a&&(o.class=a),l&&(o.target=l),c&&(o.rel=c),d&&Object.assign(o,d),{tagName:i,attributes:o,content:s,eventListeners:h}}};function B0(t,e){class r extends vie{constructor(i,s){super(i,s),this.t=t}}for(const n in e)r.prototype[n]=e[n];return r.t=t,r}const rq=B0("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),nq=B0("text"),vwe=B0("nl"),kg=B0("url",{isLink:!0,toHref(t=Sp.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==wp&&t[1].t===ha}}),Ni=t=>new Un(t);function bwe({groups:t}){const e=t.domain.concat([xv,Sv,ia,_v,Ev,Nv,Cv,kv,Ci,GM,Mf,Tv,Ov,jv,Ns,Iv,$f,Pv]),r=[wv,ha,QM,Es,XM,Mf,Af,JM,ZM,uv,dv,If,Rf,av,ov,lv,cv,hv,fv,pv,mv,gv,yv,vv,bv],n=[xv,wv,Sv,_v,Ev,Nv,Cv,kv,Ci,If,Rf,Mf,Tv,Ov,jv,Af,Ns,Iv,$f,Pv],i=Ni(),s=ee(i,$f);We(s,n,s),We(s,t.domain,s);const o=Ni(),a=Ni(),l=Ni();We(i,t.domain,o),We(i,t.scheme,a),We(i,t.slashscheme,l),We(o,n,s),We(o,t.domain,o);const c=ee(o,ia);ee(s,ia,c),ee(a,ia,c),ee(l,ia,c);const d=ee(s,Es);We(d,n,s),We(d,t.domain,s);const h=Ni();We(c,t.domain,h),We(h,t.domain,h);const f=ee(h,Es);We(f,t.domain,h);const p=Ni(rq);We(f,t.tld,p),We(f,t.utld,p),ee(c,wp,p);const m=ee(h,Ci);ee(m,Ci,m),We(m,t.domain,h),We(p,t.domain,h),ee(p,Es,f),ee(p,Ci,m);const g=ee(p,ha);We(g,t.numeric,rq);const v=ee(o,Ci),y=ee(o,Es);ee(v,Ci,v),We(v,t.domain,o),We(y,n,s),We(y,t.domain,o);const b=Ni(kg);We(y,t.tld,b),We(y,t.utld,b),We(b,t.domain,o),We(b,n,s),ee(b,Es,y),ee(b,Ci,v),ee(b,ia,c);const w=ee(b,ha),x=Ni(kg);We(w,t.numeric,x);const S=Ni(kg),_=Ni();We(S,e,S),We(S,r,_),We(_,e,S),We(_,r,_),ee(b,Ns,S),ee(x,Ns,S);const E=ee(a,ha),N=ee(l,ha),k=ee(N,Ns),C=ee(k,Ns);We(a,t.domain,o),ee(a,Es,y),ee(a,Ci,v),We(l,t.domain,o),ee(l,Es,y),ee(l,Ci,v),We(E,t.domain,S),ee(E,Ns,S),ee(E,Af,S),We(C,t.domain,S),We(C,e,S),ee(C,Ns,S);const O=[[If,Rf],[ov,av],[lv,cv],[uv,dv],[hv,fv],[pv,mv],[gv,yv],[vv,bv]];for(let P=0;P<O.length;P++){const[j,A]=O[P],D=ee(S,j);ee(_,j,D),ee(D,A,S);const I=Ni(kg);We(D,e,I);const L=Ni();We(D,r),We(I,e,I),We(I,r,L),We(L,e,I),We(L,r,L),ee(I,A,S),ee(L,A,S)}return ee(i,wp,b),ee(i,YM,vwe),{start:i,tokens:gie}}function xwe(t,e,r){let n=r.length,i=0,s=[],o=[];for(;i<n;){let a=t,l=null,c=null,d=0,h=null,f=-1;for(;i<n&&!(l=a.go(r[i].t));)o.push(r[i++]);for(;i<n&&(c=l||a.go(r[i].t));)l=null,a=c,a.accepts()?(f=0,h=a):f>=0&&f++,i++,d++;if(f<0)i-=d,i<n&&(o.push(r[i]),i++);else{o.length>0&&(s.push(V1(nq,e,o)),o=[]),i-=f,d-=f;const p=h.t,m=r.slice(i-d,i);s.push(V1(p,e,m))}}return o.length>0&&s.push(V1(nq,e,o)),s}function V1(t,e,r){const n=r[0].s,i=r[r.length-1].e,s=e.slice(n,i);return new t(s,r)}const wwe=typeof console<"u"&&console&&console.warn||(()=>{}),Swe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",qt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function _we(){return Un.groups={},qt.scanner=null,qt.parser=null,qt.tokenQueue=[],qt.pluginQueue=[],qt.customSchemes=[],qt.initialized=!1,qt}function iq(t,e=!1){if(qt.initialized&&wwe(`linkifyjs: already initialized - will not register custom scheme "${t}" ${Swe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);qt.customSchemes.push([t,e])}function Ewe(){qt.scanner=gwe(qt.customSchemes);for(let t=0;t<qt.tokenQueue.length;t++)qt.tokenQueue[t][1]({scanner:qt.scanner});qt.parser=bwe(qt.scanner.tokens);for(let t=0;t<qt.pluginQueue.length;t++)qt.pluginQueue[t][1]({scanner:qt.scanner,parser:qt.parser});return qt.initialized=!0,qt}function tA(t){return qt.initialized||Ewe(),xwe(qt.parser.start,t,yie(qt.scanner.start,t))}tA.scan=yie;function bie(t,e=null,r=null){if(e&&typeof e=="object"){if(r)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);r=e,e=null}const n=new eA(r),i=tA(t),s=[];for(let o=0;o<i.length;o++){const a=i[o];a.isLink&&(!e||a.t===e)&&n.check(a)&&s.push(a.toFormattedObject(n))}return s}var rA="[\0- -\u2029]",Nwe=new RegExp(rA),Cwe=new RegExp(`${rA}$`),kwe=new RegExp(rA,"g");function Twe(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function Owe(t){return new Xt({key:new Ar("autolink"),appendTransaction:(e,r,n)=>{const i=e.some(c=>c.docChanged)&&!r.doc.eq(n.doc),s=e.some(c=>c.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=n,a=Ane(r.doc,[...e]);if(zne(a).forEach(({newRange:c})=>{const d=Sbe(n.doc,c,p=>p.isTextblock);let h,f;if(d.length>1)h=d[0],f=n.doc.textBetween(h.pos,h.pos+h.node.nodeSize,void 0," ");else if(d.length){const p=n.doc.textBetween(c.from,c.to," "," ");if(!Cwe.test(p))return;h=d[0],f=n.doc.textBetween(h.pos,c.to,void 0," ")}if(h&&f){const p=f.split(Nwe).filter(Boolean);if(p.length<=0)return!1;const m=p[p.length-1],g=h.pos+f.lastIndexOf(m);if(!m)return!1;const v=tA(m).map(y=>y.toObject(t.defaultProtocol));if(!Twe(v))return!1;v.filter(y=>y.isLink).map(y=>({...y,from:g+y.start+1,to:g+y.end+1})).filter(y=>n.schema.marks.code?!n.doc.rangeHasMark(y.from,y.to,n.schema.marks.code):!0).filter(y=>t.validate(y.value)).filter(y=>t.shouldAutoLink(y.value)).forEach(y=>{VM(y.from,y.to,n.doc).some(b=>b.mark.type===t.type)||o.addMark(y.from,y.to,t.type.create({href:y.href}))})}}),!!o.steps.length)return o}})}function jwe(t){return new Xt({key:new Ar("handleClickLink"),props:{handleClick:(e,r,n)=>{var i,s;if(n.button!==0||!e.editable)return!1;let o=!1;if(t.enableClickSelection&&(o=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){let a=null;if(n.target instanceof HTMLAnchorElement)a=n.target;else{let h=n.target;const f=[];for(;h.nodeName!=="DIV";)f.push(h),h=h.parentNode;a=f.find(p=>p.nodeName==="A")}if(!a)return o;const l=Bne(e.state,t.type.name),c=(i=a==null?void 0:a.href)!=null?i:l.href,d=(s=a==null?void 0:a.target)!=null?s:l.target;a&&c&&(window.open(c,d),o=!0)}return o}}})}function Pwe(t){return new Xt({key:new Ar("handlePasteLink"),props:{handlePaste:(e,r,n)=>{const{shouldAutoLink:i}=t,{state:s}=e,{selection:o}=s,{empty:a}=o;if(a)return!1;let l="";n.content.forEach(d=>{l+=d.textContent});const c=bie(l,{defaultProtocol:t.defaultProtocol}).find(d=>d.isLink&&d.value===l);return!l||!c||i!==void 0&&!i(c.value)?!1:t.editor.commands.setMark(t.type,{href:c.href})}}})}function _l(t,e){const r=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(n=>{const i=typeof n=="string"?n:n.scheme;i&&r.push(i)}),!t||t.replace(kwe,"").match(new RegExp(`^(?:(?:${r.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var xie=Hc.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){iq(t);return}iq(t.scheme,t.optionalSlashes)})},onDestroy(){_we()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!_l(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),r=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||r&&!t.includes("@"))return!0;const i=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(i)||!/\./.test(i))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:r=>!!_l(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!_l(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Cr(this.options.HTMLAttributes,t),0]:["a",Cr(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var r;const n=((r=t.attrs)==null?void 0:r.href)||"";return`[${e.renderChildren(t)}](${n})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:r}=t;return this.options.isAllowedUri(r,{defaultValidate:n=>!!_l(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:r}=t||{};return r&&!this.options.isAllowedUri(r,{defaultValidate:n=>!!_l(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Pc({find:t=>{const e=[];if(t){const{protocols:r,defaultProtocol:n}=this.options,i=bie(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!_l(o,r),protocols:r,defaultProtocol:n}));i.length&&i.forEach(s=>{this.options.shouldAutoLink(s.value)&&e.push({text:s.value,data:{href:s.href},index:s.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:r}=this.options;return this.options.autolink&&t.push(Owe({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:n=>this.options.isAllowedUri(n,{defaultValidate:i=>!!_l(i,e),protocols:e,defaultProtocol:r}),shouldAutoLink:this.options.shouldAutoLink})),t.push(jwe({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(Pwe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),Iwe=xie,Rwe=Object.defineProperty,Mwe=(t,e)=>{for(var r in e)Rwe(t,r,{get:e[r],enumerable:!0})},Awe="listItem",sq="textStyle",oq=/^\s*([-+*])\s$/,wie=xi.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Cr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Awe,this.editor.getAttributes(sq)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=zd({find:oq,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=zd({find:oq,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(sq),editor:this.editor})),[t]}}),Sie=xi.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Cr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let r=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(i=>i.type==="paragraph"))r=e.parseChildren(t.tokens);else{const i=t.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(r=[{type:"paragraph",content:e.parseInline(i.tokens)}],t.tokens.length>1){const o=t.tokens.slice(1),a=e.parseChildren(o);r.push(...a)}}else r=e.parseChildren(t.tokens)}return r.length===0&&(r=[{type:"paragraph",content:[]}]),{type:"listItem",content:r}},renderMarkdown:(t,e,r)=>KM(t,e,n=>n.parentType==="bulletList"?"- ":n.parentType==="orderedList"?`${n.index+1}. `:"- ",r),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),$we={};Mwe($we,{findListItemPos:()=>sm,getNextListDepth:()=>nA,handleBackspace:()=>RI,handleDelete:()=>MI,hasListBefore:()=>_ie,hasListItemAfter:()=>Dwe,hasListItemBefore:()=>Eie,listItemHasSubList:()=>Nie,nextListIsDeeper:()=>Cie,nextListIsHigher:()=>kie});var sm=(t,e)=>{const{$from:r}=e.selection,n=Nr(t,e.schema);let i=null,s=r.depth,o=r.pos,a=null;for(;s>0&&a===null;)i=r.node(s),i.type===n?a=s:(s-=1,o-=1);return a===null?null:{$pos:e.doc.resolve(o),depth:a}},nA=(t,e)=>{const r=sm(t,e);if(!r)return!1;const[,n]=Ibe(e,t,r.$pos.pos+4);return n},_ie=(t,e,r)=>{const{$anchor:n}=t.selection,i=Math.max(0,n.pos-2),s=t.doc.resolve(i).node();return!(!s||!r.includes(s.type.name))},Eie=(t,e)=>{var r;const{$anchor:n}=e.selection,i=e.doc.resolve(n.pos-2);return!(i.index()===0||((r=i.nodeBefore)==null?void 0:r.type.name)!==t)},Nie=(t,e,r)=>{if(!r)return!1;const n=Nr(t,e.schema);let i=!1;return r.descendants(s=>{s.type===n&&(i=!0)}),i},RI=(t,e,r)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!nl(t.state,e)&&_ie(t.state,e,r)){const{$anchor:a}=t.state.selection,l=t.state.doc.resolve(a.before()-1),c=[];l.node().descendants((f,p)=>{f.type.name===e&&c.push({node:f,pos:p})});const d=c.at(-1);if(!d)return!1;const h=t.state.doc.resolve(l.start()+d.pos+1);return t.chain().cut({from:a.start()-1,to:a.end()+1},h.end()).joinForward().run()}if(!nl(t.state,e)||!$be(t.state))return!1;const n=sm(e,t.state);if(!n)return!1;const s=t.state.doc.resolve(n.$pos.pos-2).node(n.depth),o=Nie(e,t.state,s);return Eie(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},Cie=(t,e)=>{const r=nA(t,e),n=sm(t,e);return!n||!r?!1:r>n.depth},kie=(t,e)=>{const r=nA(t,e),n=sm(t,e);return!n||!r?!1:r<n.depth},MI=(t,e)=>{if(!nl(t.state,e)||!Abe(t.state,e))return!1;const{selection:r}=t.state,{$from:n,$to:i}=r;return!r.empty&&n.sameParent(i)?!1:Cie(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():kie(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},Dwe=(t,e)=>{var r;const{$anchor:n}=e.selection,i=e.doc.resolve(n.pos-n.parentOffset-2);return!(i.index()===i.parent.childCount-1||((r=i.nodeAfter)==null?void 0:r.type.name)!==t)},Tie=yr.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&MI(t,r)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&MI(t,r)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&RI(t,r,n)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&RI(t,r,n)&&(e=!0)}),e}}}}),aq=/^(\s*)(\d+)\.\s+(.*)$/,Fwe=/^\s/;function qwe(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r],s=i.match(aq);if(!s)break;const[,o,a,l]=s,c=o.length;let d=l,h=r+1;const f=[i];for(;h<t.length;){const p=t[h];if(p.match(aq))break;if(p.trim()==="")f.push(p),d+=`
`,h+=1;else if(p.match(Fwe))f.push(p),d+=`
${p.slice(c+2)}`,h+=1;else break}e.push({indent:c,number:parseInt(a,10),content:d.trim(),raw:f.join(`
`)}),n=h,r=h}return[e,n]}function Oie(t,e,r){var n;const i=[];let s=0;for(;s<t.length;){const o=t[s];if(o.indent===e){const a=o.content.split(`
`),l=((n=a[0])==null?void 0:n.trim())||"",c=[];l&&c.push({type:"paragraph",raw:l,tokens:r.inlineTokens(l)});const d=a.slice(1).join(`
`).trim();if(d){const p=r.blockTokens(d);c.push(...p)}let h=s+1;const f=[];for(;h<t.length&&t[h].indent>e;)f.push(t[h]),h+=1;if(f.length>0){const p=Math.min(...f.map(g=>g.indent)),m=Oie(f,p,r);c.push({type:"list",ordered:!0,start:f[0].number,items:m,raw:f.map(g=>g.raw).join(`
`)})}i.push({type:"list_item",raw:o.raw,tokens:c}),s=h}else s+=1}return i}function Lwe(t,e){return t.map(r=>{if(r.type!=="list_item")return e.parseChildren([r])[0];const n=[];return r.tokens&&r.tokens.length>0&&r.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")n.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const s=e.parseChildren([i]);n.push({type:"paragraph",content:s})}else{const s=e.parseChildren([i]);s.length>0&&n.push(...s)}}),{type:"listItem",content:n}})}var Bwe="listItem",lq="textStyle",cq=/^(\d+)\.\s$/,jie=xi.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...r}=t;return e===1?["ol",Cr(this.options.HTMLAttributes,r),0]:["ol",Cr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const r=t.start||1,n=t.items?Lwe(t.items,e):[];return r!==1?{type:"orderedList",attrs:{start:r},content:n}:{type:"orderedList",content:n}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),r=e==null?void 0:e.index;return r!==void 0?r:-1},tokenize:(t,e,r)=>{var n;const i=t.split(`
`),[s,o]=qwe(i);if(s.length===0)return;const a=Oie(s,0,r);return a.length===0?void 0:{type:"list",ordered:!0,start:((n=s[0])==null?void 0:n.number)||1,items:a,raw:i.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Bwe,this.editor.getAttributes(lq)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=zd({find:cq,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=zd({find:cq,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(lq)}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1],editor:this.editor})),[t]}}),zwe=/^\s*(\[([( |x])?\])\s$/,Vwe=xi.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Cr(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const r=[];if(t.tokens&&t.tokens.length>0?r.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?r.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):r.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const n=e.parseChildren(t.nestedTokens);r.push(...n)}return e.createNode("taskItem",{checked:t.checked||!1},r)},renderMarkdown:(t,e)=>{var r;const i=`- [${(r=t.attrs)!=null&&r.checked?"x":" "}] `;return KM(t,e,i)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:r,editor:n})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),c=h=>{var f,p;a.ariaLabel=((p=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:p.call(f,h,a.checked))||`Task item checkbox for ${h.textContent||"empty task item"}`};c(t),s.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",h=>h.preventDefault()),a.addEventListener("change",h=>{if(!n.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:f}=h.target;n.isEditable&&typeof r=="function"&&n.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:p})=>{const m=r();if(typeof m!="number")return!1;const g=p.doc.nodeAt(m);return p.setNodeMarkup(m,void 0,{...g==null?void 0:g.attrs,checked:f}),!0}).run(),!n.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,f)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([h,f])=>{i.setAttribute(h,f)}),i.dataset.checked=t.attrs.checked,a.checked=t.attrs.checked,s.append(a,o),i.append(s,l),Object.entries(e).forEach(([h,f])=>{i.setAttribute(h,f)});let d=new Set(Object.keys(e));return{dom:i,contentDOM:l,update:h=>{if(h.type!==this.type)return!1;i.dataset.checked=h.attrs.checked,a.checked=h.attrs.checked,c(h);const f=n.extensionManager.attributes,p=xp(h,f),m=new Set(Object.keys(p)),g=this.options.HTMLAttributes;return d.forEach(v=>{m.has(v)||(v in g?i.setAttribute(v,g[v]):i.removeAttribute(v))}),Object.entries(p).forEach(([v,y])=>{y==null?v in g?i.setAttribute(v,g[v]):i.removeAttribute(v):i.setAttribute(v,y)}),d=m,!0}}}},addInputRules(){return[zd({find:zwe,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),Uwe=xi.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Cr(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const r=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return r!==void 0?r:-1},tokenize(t,e,r){const n=s=>{const o=_I(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:r.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:n},r);return o?[{type:"taskList",raw:o.raw,items:o.items}]:r.blockTokens(s)},i=_I(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,o)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:r.inlineTokens(s.mainContent),nestedTokens:o}),customNestedParser:n},r);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});yr.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(wie.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(Sie.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(Tie.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(jie.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(Vwe.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(Uwe.configure(this.options.taskList)),t}});var Hwe=xi.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Cr(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const r=t.tokens||[];return r.length===1&&r[0].type==="image"?e.parseChildren([r[0]]):e.createNode("paragraph",void 0,e.parseInline(r))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Wwe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Kwe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Gwe=Hc.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Cr(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Bd({find:Wwe,type:this.type})]},addPasteRules(){return[Pc({find:Kwe,type:this.type})]}}),Ywe=xi.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),Qwe=Hc.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Cr(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,r){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!i)return;const s=i[2].trim();return{type:"underline",raw:i[0],text:s,tokens:r.inlineTokens(s)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function Xwe(t={}){return new Xt({view(e){return new Jwe(e,t)}})}class Jwe{constructor(e,r){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(n=r.width)!==null&&n!==void 0?n:1,this.color=r.color===!1?void 0:r.color||"black",this.class=r.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:r})=>this.editorView.dom.removeEventListener(e,r))}update(e,r){this.cursorPos!=null&&r.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),r=!e.parent.inlineContent,n,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,a=s.height/i.offsetHeight;if(r){let h=e.nodeBefore,f=e.nodeAfter;if(h||f){let p=this.editorView.nodeDOM(this.cursorPos-(h?h.nodeSize:0));if(p){let m=p.getBoundingClientRect(),g=h?m.bottom:m.top;h&&f&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let v=this.width/2*a;n={left:m.left,right:m.right,top:g-v,bottom:g+v}}}}if(!n){let h=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*o;n={left:h.left-f,right:h.left+f,top:h.top,bottom:h.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",r),this.element.classList.toggle("prosemirror-dropcursor-inline",!r);let c,d;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,d=-pageYOffset;else{let h=l.getBoundingClientRect(),f=h.width/l.offsetWidth,p=h.height/l.offsetHeight;c=h.left-l.scrollLeft*f,d=h.top-l.scrollTop*p}this.element.style.left=(n.left-c)/o+"px",this.element.style.top=(n.top-d)/a+"px",this.element.style.width=(n.right-n.left)/o+"px",this.element.style.height=(n.bottom-n.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let r=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=r&&r.inside>=0&&this.editorView.state.doc.nodeAt(r.inside),i=n&&n.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,r,e):i;if(r&&!s){let o=r.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=Cre(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class cr extends Ke{constructor(e){super(e,e)}map(e,r){let n=e.resolve(r.map(this.head));return cr.valid(n)?new cr(n):Ke.near(n)}content(){return ye.empty}eq(e){return e instanceof cr&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new cr(e.resolve(r.pos))}getBookmark(){return new iA(this.anchor)}static valid(e){let r=e.parent;if(r.isTextblock||!Zwe(e)||!eSe(e))return!1;let n=r.type.spec.allowGapCursor;if(n!=null)return n;let i=r.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,r,n=!1){e:for(;;){if(!n&&cr.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(r>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(r>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=r;let l=e.doc.resolve(i);if(cr.valid(l))return l}for(;;){let o=r>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Re.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*r),n=!1;continue e}break}s=o,i+=r;let a=e.doc.resolve(i);if(cr.valid(a))return a}return null}}}cr.prototype.visible=!1;cr.findFrom=cr.findGapCursorFrom;Ke.jsonID("gapcursor",cr);class iA{constructor(e){this.pos=e}map(e){return new iA(e.map(this.pos))}resolve(e){let r=e.resolve(this.pos);return cr.valid(r)?new cr(r):Ke.near(r)}}function Pie(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function Zwe(t){for(let e=t.depth;e>=0;e--){let r=t.index(e),n=t.node(e);if(r==0){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||Pie(i.type))return!0;if(i.inlineContent)return!1}}return!0}function eSe(t){for(let e=t.depth;e>=0;e--){let r=t.indexAfter(e),n=t.node(e);if(r==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||Pie(i.type))return!0;if(i.inlineContent)return!1}}return!0}function tSe(){return new Xt({props:{decorations:sSe,createSelectionBetween(t,e,r){return e.pos==r.pos&&cr.valid(r)?new cr(r):null},handleClick:nSe,handleKeyDown:rSe,handleDOMEvents:{beforeinput:iSe}}})}const rSe=kne({ArrowLeft:Tg("horiz",-1),ArrowRight:Tg("horiz",1),ArrowUp:Tg("vert",-1),ArrowDown:Tg("vert",1)});function Tg(t,e){const r=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(n,i,s){let o=n.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof Be){if(!s.endOfTextblock(r)||a.depth==0)return!1;l=!1,a=n.doc.resolve(e>0?a.after():a.before())}let c=cr.findGapCursorFrom(a,e,l);return c?(i&&i(n.tr.setSelection(new cr(c))),!0):!1}}function nSe(t,e,r){if(!t||!t.editable)return!1;let n=t.state.doc.resolve(e);if(!cr.valid(n))return!1;let i=t.posAtCoords({left:r.clientX,top:r.clientY});return i&&i.inside>-1&&Re.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new cr(n))),!0)}function iSe(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof cr))return!1;let{$from:r}=t.state.selection,n=r.parent.contentMatchAt(r.index()).findWrapping(t.state.schema.nodes.text);if(!n)return!1;let i=Q.empty;for(let o=n.length-1;o>=0;o--)i=Q.from(n[o].createAndFill(null,i));let s=t.state.tr.replace(r.pos,r.pos,new ye(i,0,0));return s.setSelection(Be.near(s.doc.resolve(r.pos+1))),t.dispatch(s),!1}function sSe(t){if(!(t.selection instanceof cr))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Kt.create(t.doc,[Tn.widget(t.selection.head,e,{key:"gapcursor"})])}var Rv=200,Ur=function(){};Ur.prototype.append=function(e){return e.length?(e=Ur.from(e),!this.length&&e||e.length<Rv&&this.leafAppend(e)||this.length<Rv&&e.leafPrepend(this)||this.appendInner(e)):this};Ur.prototype.prepend=function(e){return e.length?Ur.from(e).append(this):this};Ur.prototype.appendInner=function(e){return new oSe(this,e)};Ur.prototype.slice=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=this.length),e>=r?Ur.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,r))};Ur.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Ur.prototype.forEach=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length),r<=n?this.forEachInner(e,r,n,0):this.forEachInvertedInner(e,r,n,0)};Ur.prototype.map=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},r,n),i};Ur.from=function(e){return e instanceof Ur?e:e&&e.length?new Iie(e):Ur.empty};var Iie=function(t){function e(n){t.call(this),this.values=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Rv)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Rv)return new e(i.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(e.prototype,r),e}(Ur);Ur.empty=new Iie([]);var oSe=function(t){function e(r,n){t.call(this),this.left=r,this.right=n,this.length=r.length+n.length,this.depth=Math.max(r.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(n,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(n,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(n,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(n,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(n,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(n,i){if(n==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(n,i):n>=s?this.right.slice(n-s,i-s):this.left.slice(n,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(n){var i=this.right.leafAppend(n);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(n){var i=this.left.leafPrepend(n);if(i)return new e(i,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e}(Ur);const aSe=500;class ls{constructor(e,r){this.items=e,this.eventCount=r}popEvent(e,r){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let i,s;r&&(i=this.remapping(n,this.items.length),s=i.maps.length);let o=e.tr,a,l,c=[],d=[];return this.items.forEach((h,f)=>{if(!h.step){i||(i=this.remapping(n,f+1),s=i.maps.length),s--,d.push(h);return}if(i){d.push(new Cs(h.map));let p=h.step.map(i.slice(s)),m;p&&o.maybeStep(p).doc&&(m=o.mapping.maps[o.mapping.maps.length-1],c.push(new Cs(m,void 0,void 0,c.length+d.length))),s--,m&&i.appendMap(m,s)}else o.maybeStep(h.step);if(h.selection)return a=i?h.selection.map(i.slice(s)):h.selection,l=new ls(this.items.slice(0,n).append(d.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,r,n,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let d=0;d<e.steps.length;d++){let h=e.steps[d].invert(e.docs[d]),f=new Cs(e.mapping.maps[d],h,r),p;(p=l&&l.merge(f))&&(f=p,d?s.pop():a=a.slice(0,a.length-1)),s.push(f),r&&(o++,r=void 0),i||(l=f)}let c=o-n.depth;return c>cSe&&(a=lSe(a,c),o-=c),new ls(a.append(s),o)}remapping(e,r){let n=new pp;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?n.maps.length-i.mirrorOffset:void 0;n.appendMap(i.map,o)},e,r),n}addMaps(e){return this.eventCount==0?this:new ls(this.items.append(e.map(r=>new Cs(r))),this.eventCount)}rebased(e,r){if(!this.eventCount)return this;let n=[],i=Math.max(0,this.items.length-r),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},i);let l=r;this.items.forEach(f=>{let p=s.getMirror(--l);if(p==null)return;o=Math.min(o,p);let m=s.maps[p];if(f.step){let g=e.steps[p].invert(e.docs[p]),v=f.selection&&f.selection.map(s.slice(l+1,p));v&&a++,n.push(new Cs(m,g,v))}else n.push(new Cs(m))},i);let c=[];for(let f=r;f<o;f++)c.push(new Cs(s.maps[f]));let d=this.items.slice(0,i).append(c).append(n),h=new ls(d,a);return h.emptyItemCount()>aSe&&(h=h.compress(this.items.length-n.length)),h}emptyItemCount(){let e=0;return this.items.forEach(r=>{r.step||e++}),e}compress(e=this.items.length){let r=this.remapping(0,e),n=r.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(r.slice(n)),c=l&&l.getMap();if(n--,c&&r.appendMap(c,n),l){let d=o.selection&&o.selection.map(r.slice(n));d&&s++;let h=new Cs(c.invert(),l,d),f,p=i.length-1;(f=i.length&&i[p].merge(h))?i[p]=f:i.push(h)}}else o.map&&n--},this.items.length,0),new ls(Ur.from(i.reverse()),s)}}ls.empty=new ls(Ur.empty,0);function lSe(t,e){let r;return t.forEach((n,i)=>{if(n.selection&&e--==0)return r=i,!1}),t.slice(r)}class Cs{constructor(e,r,n,i){this.map=e,this.step=r,this.selection=n,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let r=e.step.merge(this.step);if(r)return new Cs(r.getMap().invert(),r,this.selection)}}}class sa{constructor(e,r,n,i,s){this.done=e,this.undone=r,this.prevRanges=n,this.prevTime=i,this.prevComposition=s}}const cSe=20;function uSe(t,e,r,n){let i=r.getMeta(ac),s;if(i)return i.historyState;r.getMeta(fSe)&&(t=new sa(t.done,t.undone,null,0,-1));let o=r.getMeta("appendedTransaction");if(r.steps.length==0)return t;if(o&&o.getMeta(ac))return o.getMeta(ac).redo?new sa(t.done.addTransform(r,void 0,n,sy(e)),t.undone,uq(r.mapping.maps),t.prevTime,t.prevComposition):new sa(t.done,t.undone.addTransform(r,void 0,n,sy(e)),null,t.prevTime,t.prevComposition);if(r.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=r.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(r.time||0)-n.newGroupDelay||!dSe(r,t.prevRanges)),c=o?U1(t.prevRanges,r.mapping):uq(r.mapping.maps);return new sa(t.done.addTransform(r,l?e.selection.getBookmark():void 0,n,sy(e)),ls.empty,c,r.time,a??t.prevComposition)}else return(s=r.getMeta("rebased"))?new sa(t.done.rebased(r,s),t.undone.rebased(r,s),U1(t.prevRanges,r.mapping),t.prevTime,t.prevComposition):new sa(t.done.addMaps(r.mapping.maps),t.undone.addMaps(r.mapping.maps),U1(t.prevRanges,r.mapping),t.prevTime,t.prevComposition)}function dSe(t,e){if(!e)return!1;if(!t.docChanged)return!0;let r=!1;return t.mapping.maps[0].forEach((n,i)=>{for(let s=0;s<e.length;s+=2)n<=e[s+1]&&i>=e[s]&&(r=!0)}),r}function uq(t){let e=[];for(let r=t.length-1;r>=0&&e.length==0;r--)t[r].forEach((n,i,s,o)=>e.push(s,o));return e}function U1(t,e){if(!t)return null;let r=[];for(let n=0;n<t.length;n+=2){let i=e.map(t[n],1),s=e.map(t[n+1],-1);i<=s&&r.push(i,s)}return r}function hSe(t,e,r){let n=sy(e),i=ac.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,n);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,n),l=new sa(r?a:s.remaining,r?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(ac,{redo:r,historyState:l})}let H1=!1,dq=null;function sy(t){let e=t.plugins;if(dq!=e){H1=!1,dq=e;for(let r=0;r<e.length;r++)if(e[r].spec.historyPreserveItems){H1=!0;break}}return H1}const ac=new Ar("history"),fSe=new Ar("closeHistory");function pSe(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Xt({key:ac,state:{init(){return new sa(ls.empty,ls.empty,null,0,-1)},apply(e,r,n){return uSe(r,n,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,r){let n=r.inputType,i=n=="historyUndo"?Mie:n=="historyRedo"?Aie:null;return!i||!e.editable?!1:(r.preventDefault(),i(e.state,e.dispatch))}}}})}function Rie(t,e){return(r,n)=>{let i=ac.getState(r);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(n){let s=hSe(i,r,t);s&&n(e?s.scrollIntoView():s)}return!0}}const Mie=Rie(!1,!0),Aie=Rie(!0,!0);yr.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const n=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(n)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,r=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(r)}},addProseMirrorPlugins(){let t=!1;return[new Xt({key:new Ar("characterCount"),appendTransaction:(e,r,n)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const s=this.storage.characters({node:n.doc});if(s>i){const o=s-i,a=0,l=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const c=n.tr.deleteRange(a,l);return t=!0,c}t=!0},filterTransaction:(e,r)=>{const n=this.options.limit;if(!e.docChanged||n===0||n===null||n===void 0)return!0;const i=this.storage.characters({node:r.doc}),s=this.storage.characters({node:e.doc});if(s<=n||i>n&&s>n&&s<=i)return!0;if(i>n&&s>n&&s>i||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,l=s-n,c=a-l,d=a;return e.deleteRange(c,d),!(this.storage.characters({node:e.doc})>n)}})]}});var mSe=yr.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Xwe(this.options)]}});yr.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Xt({key:new Ar("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:r,isFocused:n}=this.editor,{anchor:i}=e,s=[];if(!r||!n)return Kt.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((l,c)=>{if(l.isText)return;if(!(i>=c&&i<=c+l.nodeSize-1))return!1;o+=1});let a=0;return t.descendants((l,c)=>{if(l.isText||!(i>=c&&i<=c+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&o-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";s.push(Tn.node(c,c+l.nodeSize,{class:this.options.className}))}),Kt.create(t,s)}}})]}});var gSe=yr.create({name:"gapCursor",addProseMirrorPlugins(){return[tSe()]},extendNodeSchema(t){var e;const r={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=bt(Pe(t,"allowGapCursor",r)))!=null?e:null}}}),ySe=yr.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Xt({key:new Ar("placeholder"),props:{decorations:({doc:t,selection:e})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:n}=e,i=[];if(!r)return null;const s=this.editor.isEmpty;return t.descendants((o,a)=>{const l=n>=a&&n<=a+o.nodeSize,c=!o.isLeaf&&D0(o);if((l||!this.options.showOnlyCurrent)&&c){const d=[this.options.emptyNodeClass];s&&d.push(this.options.emptyEditorClass);const h=Tn.node(a,a+o.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:a,hasAnchor:l}):this.options.placeholder});i.push(h)}return this.options.includeChildren}),Kt.create(t,i)}}})]}});yr.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new Xt({key:new Ar("selection"),props:{decorations(r){return r.selection.empty||t.isFocused||!t.isEditable||Vne(r.selection)||t.view.dragging?null:Kt.create(r.doc,[Tn.inline(r.selection.from,r.selection.to,{class:e.className})])}}})]}});function hq({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var vSe=yr.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new Ar(this.name),r=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",n=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(r).includes(i.name));return[new Xt({key:e,appendTransaction:(i,s,o)=>{const{doc:a,tr:l,schema:c}=o,d=e.getState(o),h=a.content.size,f=c.nodes[r];if(d)return l.insert(h,f.create())},state:{init:(i,s)=>{const o=s.tr.doc.lastChild;return!hq({node:o,types:n})},apply:(i,s)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return s;const o=i.doc.lastChild;return!hq({node:o,types:n})}}})]}}),bSe=yr.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>Mie(t,e),redo:()=>({state:t,dispatch:e})=>Aie(t,e)}},addProseMirrorPlugins(){return[pSe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),xSe=yr.create({name:"starterKit",addExtensions(){var t,e,r,n;const i=[];return this.options.bold!==!1&&i.push(Wxe.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(Bxe.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(wie.configure(this.options.bulletList)),this.options.code!==!1&&i.push(Yxe.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(Jxe.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(Zxe.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(mSe.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(gSe.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(ewe.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(twe.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(bSe.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(rwe.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(awe.configure(this.options.italic)),this.options.listItem!==!1&&i.push(Sie.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(Tie.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(xie.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(jie.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(Hwe.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(Gwe.configure(this.options.strike)),this.options.text!==!1&&i.push(Ywe.configure(this.options.text)),this.options.underline!==!1&&i.push(Qwe.configure((r=this.options)==null?void 0:r.underline)),this.options.trailingNode!==!1&&i.push(vSe.configure((n=this.options)==null?void 0:n.trailingNode)),i}}),wSe=xSe,SSe=ySe;const Yo=({onClick:t,isActive:e,disabled:r,children:n,title:i})=>u.jsx("button",{type:"button",onClick:t,disabled:r,title:i,className:`p-1.5 rounded hover:bg-gray-100 transition-colors ${e?"bg-gray-200 text-primary-600":"text-gray-600"} ${r?"opacity-50 cursor-not-allowed":""}`,children:n}),_Se=({editor:t})=>{if(!t)return null;const e=()=>{const r=t.getAttributes("link").href,n=window.prompt("Enter URL:",r);if(n===null)return;if(n===""){t.chain().focus().extendMarkRange("link").unsetLink().run();return}const i=n.match(/^https?:\/\//)?n:`https://${n}`;t.chain().focus().extendMarkRange("link").setLink({href:i}).run()};return u.jsxs("div",{className:"flex items-center gap-0.5 p-1.5 border-b border-gray-200 bg-gray-50 rounded-t-md",children:[u.jsx(Yo,{onClick:()=>t.chain().focus().toggleBold().run(),isActive:t.isActive("bold"),title:"Bold (Cmd+B)",children:u.jsx(Lfe,{className:"w-4 h-4"})}),u.jsx(Yo,{onClick:()=>t.chain().focus().toggleItalic().run(),isActive:t.isActive("italic"),title:"Italic (Cmd+I)",children:u.jsx(Kfe,{className:"w-4 h-4"})}),u.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),u.jsx(Yo,{onClick:()=>t.chain().focus().toggleBulletList().run(),isActive:t.isActive("bulletList"),title:"Bullet list",children:u.jsx(Yfe,{className:"w-4 h-4"})}),u.jsx(Yo,{onClick:()=>t.chain().focus().toggleOrderedList().run(),isActive:t.isActive("orderedList"),title:"Numbered list",children:u.jsx(Gfe,{className:"w-4 h-4"})}),u.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),u.jsx(Yo,{onClick:e,isActive:t.isActive("link"),title:"Add link",children:u.jsx(pM,{className:"w-4 h-4"})}),t.isActive("link")&&u.jsx(Yo,{onClick:()=>t.chain().focus().unsetLink().run(),title:"Remove link",children:u.jsx(ope,{className:"w-4 h-4"})}),u.jsx("div",{className:"flex-1"}),u.jsx(Yo,{onClick:()=>t.chain().focus().undo().run(),disabled:!t.can().undo(),title:"Undo (Cmd+Z)",children:u.jsx(spe,{className:"w-4 h-4"})}),u.jsx(Yo,{onClick:()=>t.chain().focus().redo().run(),disabled:!t.can().redo(),title:"Redo (Cmd+Shift+Z)",children:u.jsx(epe,{className:"w-4 h-4"})})]})};function $ie({value:t="",onChange:e,placeholder:r="Write something...",disabled:n=!1,minHeight:i="120px",autoFocus:s=!1}){const o=$xe({extensions:[wSe.configure({heading:!1,codeBlock:!1,blockquote:!1}),SSe.configure({placeholder:r}),Iwe.configure({openOnClick:!1,HTMLAttributes:{class:"text-primary-600 hover:text-primary-700 underline"}})],content:t,editable:!n,autofocus:s,onUpdate:({editor:a})=>{const l=a.getHTML();e(l==="<p></p>"||l===""?"":l)}});if(o&&t!==o.getHTML()&&t!==""){const a=o.getHTML();t&&(a==="<p></p>"||a===""||t!==a)&&o.commands.setContent(t,!1)}return u.jsxs("div",{className:`border border-gray-300 rounded-md overflow-hidden focus-within:ring-2 focus-within:ring-primary-500 focus-within:border-transparent ${n?"bg-gray-100 opacity-60":"bg-white"}`,children:[u.jsx(_Se,{editor:o}),u.jsx(Oxe,{editor:o,className:"prose prose-sm max-w-none",style:{minHeight:i}}),u.jsx("style",{children:`
        .ProseMirror {
          padding: 0.75rem;
          min-height: ${i};
          outline: none;
        }
        .ProseMirror p.is-editor-empty:first-child::before {
          content: attr(data-placeholder);
          float: left;
          color: #9ca3af;
          pointer-events: none;
          height: 0;
        }
        .ProseMirror ul,
        .ProseMirror ol {
          padding-left: 1.5rem;
        }
        .ProseMirror ul {
          list-style-type: disc;
        }
        .ProseMirror ol {
          list-style-type: decimal;
        }
        .ProseMirror li {
          margin-bottom: 0.25rem;
        }
        .ProseMirror p {
          margin-bottom: 0.5rem;
        }
        .ProseMirror p:last-child {
          margin-bottom: 0;
        }
      `})]})}function Mv(t){if(!t)return!0;const e=t.trim();return e===""||e==="<p></p>"||e==="<p><br></p>"}const W1=[{id:"call",label:"Phone call",icon:gM},{id:"email",label:"Email",icon:mM},{id:"chat",label:"Chat",icon:E0},{id:"meeting",label:"Meeting",icon:qs},{id:"coffee",label:"Coffee",icon:Ete},{id:"lunch",label:"Lunch",icon:Rte},{id:"note",label:"Other",icon:_0}];function sA({isOpen:t,onClose:e,onSubmit:r,isLoading:n,personId:i,initialData:s=null,activity:o=null}){const[a,l]=T.useState("call"),[c,d]=T.useState(""),[h,f]=T.useState(""),[p,m]=T.useState(""),[g,v]=T.useState([]),[y,b]=T.useState(!1),[w,x]=T.useState(""),{data:S}=Vc(),_=!!o;if(T.useEffect(()=>{if(t){const I=new Date,L=I.toISOString().split("T")[0],F=I.toTimeString().slice(0,5);o?(d(o.activity_date||L),f(o.activity_time||""),m(o.content||""),v(o.participants||[]),l(o.activity_type||"note")):s?(d(s.activity_date||L),f(s.activity_time||F),m(s.content||""),v(s.participants||[]),l(s.activity_type||"note")):(d(L),f(F),m(""),v([]),l("call"))}},[t,s,o]),!t)return null;const E=(S||[]).filter(I=>I.id.toString()!==(i==null?void 0:i.toString())),N=E.filter(I=>{var L;return(L=I.name)==null?void 0:L.toLowerCase().includes(w.toLowerCase())}),k=I=>{I.preventDefault(),!Mv(p)&&(r({activity_type:a,activity_date:c||null,activity_time:h||null,content:p,participants:g}),m(""),v([]),d(new Date().toISOString().split("T")[0]),f(new Date().toTimeString().slice(0,5)))},C=()=>{m(""),v([]),d(""),f(""),b(!1),x(""),e()},O=I=>{v(L=>L.includes(I)?L.filter(F=>F!==I):[...L,I])},P=I=>{v(L=>L.filter(F=>F!==I))},j=()=>E.filter(I=>g.includes(I.id)),A=I=>{if(!I)return"";try{return new Date(I).toISOString().split("T")[0]}catch{return""}};return(W1.find(I=>I.id===a)||W1[0]).icon,u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b sticky top-0 bg-white z-10",children:[u.jsx("h2",{className:"text-lg font-semibold",children:_?"Edit activity":"Add activity"}),u.jsx("button",{onClick:C,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Mr,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:k,className:"p-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"space-y-4 md:col-span-1",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Activity type"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:W1.map(I=>{const L=I.icon,F=a===I.id;return u.jsxs("button",{type:"button",onClick:()=>l(I.id),className:`flex flex-col items-center justify-center p-3 border-2 rounded-lg transition-colors ${F?"border-primary-600 bg-primary-50 text-primary-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,disabled:n,children:[u.jsx(L,{className:"w-5 h-5 mb-1"}),u.jsx("span",{className:"text-xs",children:I.label})]},I.id)})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"activity-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),u.jsx("input",{id:"activity-date",type:"date",value:A(c),onChange:I=>d(I.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"activity-time",className:"block text-sm font-medium text-gray-700 mb-2",children:"Time"}),u.jsx("input",{id:"activity-time",type:"time",value:h,onChange:I=>f(I.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Participants (optional)"}),j().length>0&&u.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:j().map(I=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-700 rounded-full text-sm",children:[I.name,u.jsx("button",{type:"button",onClick:()=>P(I.id),className:"hover:text-primary-900",disabled:n,children:u.jsx(Mr,{className:"w-3 h-3"})})]},I.id))}),u.jsxs("div",{className:"relative",children:[u.jsx("button",{type:"button",onClick:()=>b(!y),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-left text-sm text-gray-500 hover:border-gray-400",disabled:n,children:g.length===0?"Add participants...":"Add more participants..."}),y&&u.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[u.jsx("div",{className:"p-2 border-b",children:u.jsx("input",{type:"text",placeholder:"Search people...",value:w,onChange:I=>x(I.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded",autoFocus:!0})}),u.jsx("div",{className:"max-h-48 overflow-y-auto",children:N.length===0?u.jsx("div",{className:"p-3 text-sm text-gray-500 text-center",children:"No people found"}):N.map(I=>{var F;const L=g.includes(I.id);return u.jsxs("button",{type:"button",onClick:()=>O(I.id),className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2 ${L?"bg-primary-50":""}`,children:[u.jsx("input",{type:"checkbox",checked:L,onChange:()=>{},className:"mr-1"}),I.thumbnail?u.jsx("img",{src:I.thumbnail,alt:I.name,className:"w-6 h-6 rounded-full"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-gray-500",children:((F=I.first_name)==null?void 0:F[0])||"?"})}),u.jsx("span",{children:I.name})]},I.id)})})]})]})]})]}),u.jsxs("div",{className:"flex flex-col md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),u.jsx("div",{className:"flex-1",children:u.jsx($ie,{value:p,onChange:m,placeholder:"What happened? Add your call notes, chat summary, meeting notes...",disabled:n,minHeight:"280px"})})]})]}),u.jsxs("div",{className:"flex justify-end gap-2 mt-6 pt-4 border-t",children:[u.jsx("button",{type:"button",onClick:C,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n||Mv(p),children:n?_?"Saving...":"Adding...":_?"Save":"Add activity"})]})]})]})})}function Qo({title:t,value:e,icon:r,href:n}){return u.jsx(ge,{to:n,className:"card p-6 hover:shadow-md transition-shadow",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-500",children:t}),u.jsx("p",{className:"mt-1 text-3xl font-semibold",children:e})]}),u.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:u.jsx(r,{className:"w-6 h-6 text-primary-600"})})]})})}function K1({person:t,hideStar:e=!1}){var r,n;return u.jsxs(ge,{to:`/people/${t.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[t.thumbnail?u.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-10 h-10 rounded-full object-cover"}):u.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-sm font-medium text-gray-500",children:((r=t.first_name)==null?void 0:r[0])||"?"})}),u.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.name}),((n=t.labels)==null?void 0:n.length)>0&&u.jsx("p",{className:"text-xs text-gray-500 truncate",children:t.labels.join(", ")})]}),t.is_favorite&&!e&&u.jsx(Md,{className:"w-4 h-4 text-yellow-400 fill-current"})]})}function ESe({reminder:t}){var o,a,l;const e=t.days_until;let r="bg-gray-100 text-gray-700";e===0?r="bg-green-100 text-green-700":e<=3?r="bg-orange-100 text-orange-700":e<=7&&(r="bg-yellow-100 text-yellow-700");const n=(a=(o=t.related_people)==null?void 0:o[0])==null?void 0:a.id,i=((l=t.related_people)==null?void 0:l.length)>0,s=u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${r}`,children:e===0?"Today":`${e}d`}),u.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.title}),u.jsx("p",{className:"text-xs text-gray-500",children:Nn(new Date(t.next_occurrence),"MMMM d, yyyy")})]}),i&&u.jsx("div",{className:"flex -space-x-2 ml-3 flex-shrink-0",children:t.related_people.slice(0,3).map(c=>{var d;return c.thumbnail?u.jsx("img",{src:c.thumbnail,alt:c.name,loading:"lazy",className:"w-10 h-10 rounded-full border-2 border-white object-cover"},c.id):u.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full border-2 border-white flex items-center justify-center",children:u.jsx("span",{className:"text-sm",children:(d=c.name)==null?void 0:d[0]})},c.id)})})]});return i&&n?u.jsx(ge,{to:`/people/${n}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:s}):u.jsx("div",{className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:s})}function NSe({todo:t,onToggle:e}){var n;const r=tm(t);return u.jsxs(ge,{to:`/people/${t.person_id}`,className:"flex items-start p-3 rounded-lg hover:bg-gray-50 transition-colors group",children:[u.jsx("button",{onClick:i=>{i.preventDefault(),i.stopPropagation(),e(t)},className:"mt-0.5 mr-3 flex-shrink-0",title:t.is_completed?"Mark as incomplete":"Mark as complete",children:t.is_completed?u.jsx(Fs,{className:"w-5 h-5 text-primary-600"}):u.jsx(Rd,{className:`w-5 h-5 ${r?"text-red-600":"text-gray-400"}`})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:`text-sm font-medium ${t.is_completed?"line-through text-gray-400":r?"text-red-600":"text-gray-900"}`,children:t.content}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.person_thumbnail?u.jsx("img",{src:t.person_thumbnail,alt:t.person_name,loading:"lazy",className:"w-5 h-5 rounded-full object-cover"}):u.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-gray-500",children:(n=t.person_name)==null?void 0:n[0]})}),u.jsx("span",{className:"text-xs text-gray-500 truncate",children:t.person_name})]})]}),t.due_date&&u.jsxs("div",{className:`ml-3 text-xs text-right flex-shrink-0 ${r&&!t.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:[u.jsx("div",{children:Nn(new Date(t.due_date),"MMM d")}),r&&!t.is_completed&&u.jsx("div",{className:"text-red-600",children:"overdue"})]})]})}function CSe(){return u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{className:"p-4 bg-primary-50 rounded-full",children:u.jsx(jte,{className:"w-12 h-12 text-primary-600"})})}),u.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:["Welcome to ",Nc,"!"]}),u.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"Get started by adding your first contact, organization, or important date. Your dashboard will populate as you add more information."}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[u.jsxs(ge,{to:"/people/new",className:"inline-flex items-center px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[u.jsx(lr,{className:"w-5 h-5 mr-2"}),"Add Your First Person"]}),u.jsxs(ge,{to:"/companies/new",className:"inline-flex items-center px-6 py-3 bg-white text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[u.jsx(lr,{className:"w-5 h-5 mr-2"}),"Add Your First Organization"]})]})]})}function kSe(){var C,O,P;const{data:t,isLoading:e,error:r}=dpe(),{data:n}=Ate(!1),i=$te(),s=yM(),[o,a]=T.useState(null),[l,c]=T.useState(!1),[d,h]=T.useState(!1),[f,p]=T.useState(null),m=j=>{if(!j.is_completed){a(j),c(!0);return}i.mutate({todoId:j.id,data:{content:j.content,due_date:j.due_date,is_completed:!1}})},g=()=>{o&&(i.mutate({todoId:o.id,data:{content:o.content,due_date:o.due_date,is_completed:!0}}),c(!1),a(null))},v=()=>{if(!o)return;const j=new Date().toISOString().split("T")[0];p({content:o.content,activity_date:j,activity_type:"note",participants:[]}),c(!1),h(!0)},y=async j=>{if(o)try{await s.mutateAsync({personId:o.person_id,data:j}),await i.mutateAsync({todoId:o.id,data:{content:o.content,due_date:o.due_date,is_completed:!0}}),h(!1),a(null),p(null)}catch(A){console.error("Failed to create activity:",A),alert("Failed to create activity. Please try again.")}};if(e)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(r){const j=((C=r==null?void 0:r.response)==null?void 0:C.status)>=500||!(r!=null&&r.response);return u.jsx("div",{className:"card p-8 text-center",children:u.jsx("div",{className:"text-red-600 mb-2",children:j?u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"font-medium mb-1",children:"Failed to load dashboard data"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Please check your connection and try refreshing the page."})]}):u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"font-medium mb-1",children:"Unable to load dashboard"}),u.jsx("p",{className:"text-sm text-gray-600",children:((P=(O=r==null?void 0:r.response)==null?void 0:O.data)==null?void 0:P.message)||"An error occurred while loading your data."})]})})})}const{stats:b,recent_people:w,upcoming_reminders:x,favorites:S,recently_contacted:_}=t||{};if(((b==null?void 0:b.total_people)||0)+((b==null?void 0:b.total_companies)||0)+((b==null?void 0:b.total_dates)||0)===0)return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsx(Qo,{title:"Total people",value:0,icon:qs,href:"/people"}),u.jsx(Qo,{title:"Organizations",value:0,icon:Rr,href:"/companies"}),u.jsx(Qo,{title:"Events",value:0,icon:mo,href:"/dates"}),u.jsx(Qo,{title:"Open todos",value:0,icon:Fs,href:"/todos"})]}),u.jsx(CSe,{})]});const k=(n==null?void 0:n.slice(0,5))||[];return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsx(Qo,{title:"Total people",value:(b==null?void 0:b.total_people)||0,icon:qs,href:"/people"}),u.jsx(Qo,{title:"Organizations",value:(b==null?void 0:b.total_companies)||0,icon:Rr,href:"/companies"}),u.jsx(Qo,{title:"Events",value:(b==null?void 0:b.total_dates)||0,icon:mo,href:"/dates"}),u.jsx(Qo,{title:"Open todos",value:(b==null?void 0:b.open_todos_count)||0,icon:Fs,href:"/todos"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(mo,{className:"w-5 h-5 mr-2 text-gray-500"}),"Upcoming reminders"]}),u.jsxs(ge,{to:"/dates",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all reminders",u.jsx(p1,{className:"w-4 h-4 ml-1"})]})]}),u.jsx("div",{className:"divide-y divide-gray-100",children:(x==null?void 0:x.length)>0?x.map(j=>u.jsx(ESe,{reminder:j},j.id)):u.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No upcoming reminders"})})]}),u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(Fs,{className:"w-5 h-5 mr-2 text-gray-500"}),"Open todos"]}),u.jsxs(ge,{to:"/todos",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all todos",u.jsx(p1,{className:"w-4 h-4 ml-1"})]})]}),u.jsx("div",{className:"divide-y divide-gray-100",children:k.length>0?k.map(j=>u.jsx(NSe,{todo:j,onToggle:m},j.id)):u.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No open todos"})})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(Md,{className:"w-5 h-5 mr-2 text-yellow-500 fill-current"}),"Favorites"]})}),(S==null?void 0:S.length)>0?u.jsx("div",{className:"divide-y divide-gray-100",children:S.slice(0,5).map(j=>u.jsx(K1,{person:j,hideStar:!0},j.id))}):u.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No favorites yet"})]}),u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(E0,{className:"w-5 h-5 mr-2 text-gray-500"}),"Recently contacted"]})}),(_==null?void 0:_.length)>0?u.jsx("div",{className:"divide-y divide-gray-100",children:_.map(j=>u.jsx(K1,{person:j},j.id))}):u.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No recent activities yet"})]}),u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(qs,{className:"w-5 h-5 mr-2 text-gray-500"}),"Recently edited"]}),u.jsxs(ge,{to:"/people",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all",u.jsx(p1,{className:"w-4 h-4 ml-1"})]})]}),u.jsx("div",{className:"divide-y divide-gray-100",children:(w==null?void 0:w.length)>0?w.map(j=>u.jsx(K1,{person:j},j.id)):u.jsxs("p",{className:"p-4 text-sm text-gray-500 text-center",children:["No people yet. ",u.jsx(ge,{to:"/people/new",className:"text-primary-600",children:"Add someone"})]})})]})]}),u.jsx(vM,{isOpen:l,onClose:()=>{c(!1),a(null)},todo:o,onComplete:g,onCompleteAsActivity:v}),u.jsx(sA,{isOpen:d,onClose:()=>{h(!1),a(null),p(null)},onSubmit:y,isLoading:s.isPending,personId:o==null?void 0:o.person_id,initialData:f})]})}function fq(t){var i;const e=((i=t.acf)==null?void 0:i.work_history)||[];if(e.length===0)return null;const r=e.find(s=>s.is_current&&s.company);if(r)return r.company;const n=e.filter(s=>s.company).sort((s,o)=>{const a=s.start_date?new Date(s.start_date):new Date(0);return(o.start_date?new Date(o.start_date):new Date(0))-a});return n.length>0?n[0].company:null}function TSe({person:t,companyName:e,isDeceased:r}){var n,i;return u.jsx(ge,{to:`/people/${t.id}`,className:"card p-4 hover:shadow-md transition-shadow",children:u.jsxs("div",{className:"flex items-start",children:[t.thumbnail?u.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-12 h-12 rounded-full object-cover"}):u.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-lg font-medium text-gray-500",children:((n=t.first_name)==null?void 0:n[0])||"?"})}),u.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsxs("h3",{className:"text-sm font-medium text-gray-900 truncate",children:[t.name,r&&u.jsx("span",{className:"ml-1 text-gray-500",children:""})]}),t.is_favorite&&u.jsx(Md,{className:"w-4 h-4 ml-1 text-yellow-400 fill-current flex-shrink-0"})]}),e&&u.jsx("p",{className:"text-xs text-gray-500 mt-0.5 truncate",children:e}),((i=t.labels)==null?void 0:i.length)>0&&u.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.labels.slice(0,3).map(s=>u.jsx("span",{className:"inline-flex px-2 py-0.5 text-xs rounded-full bg-gray-100 text-gray-600",children:s},s))})]})]})})}function OSe(){const[t,e]=T.useState(!1),[r,n]=T.useState(!1),[i,s]=T.useState([]),[o,a]=T.useState(""),[l,c]=T.useState(""),[d,h]=T.useState("first_name"),[f,p]=T.useState("asc"),m=T.useRef(null),g=T.useRef(null),{data:v,isLoading:y,error:b}=Vc(),{data:w}=ft({queryKey:["person-labels"],queryFn:async()=>(await He.getPersonLabels()).data}),x=(w==null?void 0:w.map(A=>A.name))||[],S=T.useMemo(()=>{if(!v)return[];const A=v.map(D=>D.birth_year).filter(D=>D!=null);return[...new Set(A)].sort((D,I)=>I-D)},[v]);T.useEffect(()=>{const A=D=>{g.current&&!g.current.contains(D.target)&&m.current&&!m.current.contains(D.target)&&e(!1)};return document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}},[]);const _=T.useMemo(()=>{if(!v)return[];let A=[...v];if(r&&(A=A.filter(D=>D.is_favorite)),i.length>0&&(A=A.filter(D=>{const I=D.labels||[];return i.some(L=>I.includes(L))})),o){const D=parseInt(o,10);A=A.filter(I=>I.birth_year===D)}if(l){const D=new Date;let I;switch(l){case"7":I=new Date(D.setDate(D.getDate()-7));break;case"30":I=new Date(D.setDate(D.getDate()-30));break;case"90":I=new Date(D.setDate(D.getDate()-90));break;case"365":I=new Date(D.setDate(D.getDate()-365));break;default:I=null}I&&(A=A.filter(L=>L.modified?new Date(L.modified)>=I:!1))}return A.sort((D,I)=>{var V,H,K,de,be,Fe,pe,Oe;let L,F;if(d==="modified"){L=D.modified?new Date(D.modified).getTime():0,F=I.modified?new Date(I.modified).getTime():0;const $e=L-F;return f==="asc"?$e:-$e}if(d==="first_name"?(L=(((V=D.acf)==null?void 0:V.first_name)||D.first_name||"").toLowerCase(),F=(((H=I.acf)==null?void 0:H.first_name)||I.first_name||"").toLowerCase()):(L=(((K=D.acf)==null?void 0:K.last_name)||D.last_name||"").toLowerCase(),F=(((de=I.acf)==null?void 0:de.last_name)||I.last_name||"").toLowerCase()),L===F){const $e=d==="first_name"?(((be=D.acf)==null?void 0:be.last_name)||D.last_name||"").toLowerCase():(((Fe=D.acf)==null?void 0:Fe.first_name)||D.first_name||"").toLowerCase(),ut=d==="first_name"?(((pe=I.acf)==null?void 0:pe.last_name)||I.last_name||"").toLowerCase():(((Oe=I.acf)==null?void 0:Oe.first_name)||I.first_name||"").toLowerCase(),it=$e.localeCompare(ut);return f==="asc"?it:-it}const W=L.localeCompare(F);return f==="asc"?W:-W})},[v,r,i,o,l,d,f]),E=r||i.length>0||o||l,N=A=>{s(D=>D.includes(A)?D.filter(I=>I!==A):[...D,A])},k=()=>{n(!1),s([]),a(""),c("")},C=T.useMemo(()=>{if(!_)return[];const A=_.map(D=>fq(D)).filter(Boolean);return[...new Set(A)]},[_]),{data:O}=ft({queryKey:["companies","batch",C.sort().join(",")],queryFn:async()=>C.length===0?[]:(await He.getCompanies({per_page:100,include:C.join(",")})).data,enabled:C.length>0}),P=T.useMemo(()=>{const A={};return O&&O.forEach(D=>{A[D.id]=sr(D)}),A},[O]),j=T.useMemo(()=>{const A={};return _.forEach(D=>{const I=fq(D);I&&P[I]&&(A[D.id]=P[I])}),A},[_,P]);return u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:u.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[u.jsxs("div",{className:"flex items-center gap-2 border border-gray-200 rounded-lg p-1",children:[u.jsxs("select",{value:d,onChange:A=>h(A.target.value),className:"text-sm border-0 bg-transparent focus:ring-0 focus:outline-none cursor-pointer",children:[u.jsx("option",{value:"first_name",children:"First name"}),u.jsx("option",{value:"last_name",children:"Last name"}),u.jsx("option",{value:"modified",children:"Last modified"})]}),u.jsx("div",{className:"h-4 w-px bg-gray-300"}),u.jsx("button",{onClick:()=>p(f==="asc"?"desc":"asc"),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:`Sort ${f==="asc"?"descending":"ascending"}`,children:f==="asc"?u.jsx(Ffe,{className:"w-4 h-4 text-gray-600"}):u.jsx(Dfe,{className:"w-4 h-4 text-gray-600"})})]}),u.jsxs("div",{className:"relative",ref:m,children:[u.jsxs("button",{onClick:()=>e(!t),className:`btn-secondary ${E?"bg-primary-50 text-primary-700 border-primary-200":""}`,children:[u.jsx(nI,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Filter"}),E&&u.jsx("span",{className:"ml-2 px-1.5 py-0.5 bg-primary-600 text-white text-xs rounded-full",children:i.length+(r?1:0)+(o?1:0)+(l?1:0)})]}),t&&u.jsx("div",{ref:g,className:"absolute top-full left-0 mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:u.jsxs("div",{className:"p-4 space-y-4",children:[u.jsx("div",{children:u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:r,onChange:A=>n(A.target.checked),className:"sr-only"}),u.jsx("div",{className:`flex items-center justify-center w-5 h-5 border-2 rounded mr-3 ${r?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:r&&u.jsx(jF,{className:"w-3 h-3 text-white"})}),u.jsxs("div",{className:"flex items-center",children:[u.jsx(Md,{className:"w-4 h-4 mr-2 text-yellow-400 fill-current"}),u.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Favorites only"})]})]})}),x.length>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Labels"}),u.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:x.map(A=>u.jsxs("label",{className:"flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded",children:[u.jsx("input",{type:"checkbox",checked:i.includes(A),onChange:()=>N(A),className:"sr-only"}),u.jsx("div",{className:`flex items-center justify-center w-5 h-5 border-2 rounded mr-3 ${i.includes(A)?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:i.includes(A)&&u.jsx(jF,{className:"w-3 h-3 text-white"})}),u.jsx("span",{className:"text-sm text-gray-700",children:A})]},A))})]}),S.length>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Birth year"}),u.jsxs("select",{value:o,onChange:A=>a(A.target.value),className:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[u.jsx("option",{value:"",children:"All years"}),S.map(A=>u.jsx("option",{value:A,children:A},A))]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Last modified"}),u.jsxs("select",{value:l,onChange:A=>c(A.target.value),className:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[u.jsx("option",{value:"",children:"Any time"}),u.jsx("option",{value:"7",children:"Last 7 days"}),u.jsx("option",{value:"30",children:"Last 30 days"}),u.jsx("option",{value:"90",children:"Last 90 days"}),u.jsx("option",{value:"365",children:"Last year"})]})]}),E&&u.jsx("button",{onClick:k,className:"w-full text-sm text-primary-600 hover:text-primary-700 font-medium pt-2 border-t border-gray-200",children:"Clear all filters"})]})})]}),E&&u.jsxs("div",{className:"flex flex-wrap gap-2",children:[r&&u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-800 rounded-full text-xs",children:[u.jsx(Md,{className:"w-3 h-3"}),"Favorites",u.jsx("button",{onClick:()=>n(!1),className:"hover:text-primary-600",children:u.jsx(Mr,{className:"w-3 h-3"})})]}),i.map(A=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:[A,u.jsx("button",{onClick:()=>N(A),className:"hover:text-gray-600",children:u.jsx(Mr,{className:"w-3 h-3"})})]},A)),o&&u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:["Born ",o,u.jsx("button",{onClick:()=>a(""),className:"hover:text-gray-600",children:u.jsx(Mr,{className:"w-3 h-3"})})]}),l&&u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:["Modified: ",l==="7"?"Last 7 days":l==="30"?"Last 30 days":l==="90"?"Last 90 days":"Last year",u.jsx("button",{onClick:()=>c(""),className:"hover:text-gray-600",children:u.jsx(Mr,{className:"w-3 h-3"})})]})]}),u.jsxs(ge,{to:"/people/new",className:"btn-primary",children:[u.jsx(lr,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add person"})]})]})}),y&&u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),b&&u.jsx("div",{className:"card p-6 text-center",children:u.jsx("p",{className:"text-red-600",children:"Failed to load people."})}),!y&&!b&&(v==null?void 0:v.length)===0&&u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(lr,{className:"w-6 h-6 text-gray-400"})}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No people found"}),u.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by adding your first person."}),u.jsxs(ge,{to:"/people/new",className:"btn-primary",children:[u.jsx(lr,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add person"})]})]}),!y&&!b&&(_==null?void 0:_.length)>0&&u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:_.map(A=>u.jsx(TSe,{person:A,companyName:j[A.id],isDeceased:A.is_deceased},A.id))}),!y&&!b&&(v==null?void 0:v.length)>0&&(_==null?void 0:_.length)===0&&u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(nI,{className:"w-6 h-6 text-gray-400"})}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No people match your filters"}),u.jsx("p",{className:"text-gray-500 mb-4",children:"Try adjusting your filters to see more results."}),u.jsx("button",{onClick:k,className:"btn-secondary",children:"Clear filters"})]})]})}const jSe="#0285FF",PSe=T.forwardRef(function({title:e="Bluesky",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=jSe),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479.815 2.736 3.713 3.66 6.383 3.364.136-.02.275-.039.415-.056-.138.022-.276.04-.415.056-3.912.58-7.387 2.005-2.83 7.078 5.013 5.19 6.87-1.113 7.823-4.308.953 3.195 2.05 9.271 7.733 4.308 4.267-4.308 1.172-6.498-2.74-7.078a8.741 8.741 0 0 1-.415-.056c.14.017.279.036.415.056 2.67.297 5.568-.628 6.383-3.364.246-.828.624-5.79.624-6.478 0-.69-.139-1.861-.902-2.206-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8Z"})]})}),ISe="#0866FF",RSe=T.forwardRef(function({title:e="Facebook",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=ISe),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M9.101 23.691v-7.98H6.627v-3.667h2.474v-1.58c0-4.085 1.848-5.978 5.858-5.978.401 0 .955.042 1.468.103a8.68 8.68 0 0 1 1.141.195v3.325a8.623 8.623 0 0 0-.653-.036 26.805 26.805 0 0 0-.733-.009c-.707 0-1.259.096-1.675.309a1.686 1.686 0 0 0-.679.622c-.258.42-.374.995-.374 1.752v1.297h3.919l-.386 2.103-.287 1.564h-3.246v8.245C19.396 23.238 24 18.179 24 12.044c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.628 3.874 10.35 9.101 11.647Z"})]})}),MSe="#FF0069",ASe=T.forwardRef(function({title:e="Instagram",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=MSe),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M7.0301.084c-1.2768.0602-2.1487.264-2.911.5634-.7888.3075-1.4575.72-2.1228 1.3877-.6652.6677-1.075 1.3368-1.3802 2.127-.2954.7638-.4956 1.6365-.552 2.914-.0564 1.2775-.0689 1.6882-.0626 4.947.0062 3.2586.0206 3.6671.0825 4.9473.061 1.2765.264 2.1482.5635 2.9107.308.7889.72 1.4573 1.388 2.1228.6679.6655 1.3365 1.0743 2.1285 1.38.7632.295 1.6361.4961 2.9134.552 1.2773.056 1.6884.069 4.9462.0627 3.2578-.0062 3.668-.0207 4.9478-.0814 1.28-.0607 2.147-.2652 2.9098-.5633.7889-.3086 1.4578-.72 2.1228-1.3881.665-.6682 1.0745-1.3378 1.3795-2.1284.2957-.7632.4966-1.636.552-2.9124.056-1.2809.0692-1.6898.063-4.948-.0063-3.2583-.021-3.6668-.0817-4.9465-.0607-1.2797-.264-2.1487-.5633-2.9117-.3084-.7889-.72-1.4568-1.3876-2.1228C21.2982 1.33 20.628.9208 19.8378.6165 19.074.321 18.2017.1197 16.9244.0645 15.6471.0093 15.236-.005 11.977.0014 8.718.0076 8.31.0215 7.0301.0839m.1402 21.6932c-1.17-.0509-1.8053-.2453-2.2287-.408-.5606-.216-.96-.4771-1.3819-.895-.422-.4178-.6811-.8186-.9-1.378-.1644-.4234-.3624-1.058-.4171-2.228-.0595-1.2645-.072-1.6442-.079-4.848-.007-3.2037.0053-3.583.0607-4.848.05-1.169.2456-1.805.408-2.2282.216-.5613.4762-.96.895-1.3816.4188-.4217.8184-.6814 1.3783-.9003.423-.1651 1.0575-.3614 2.227-.4171 1.2655-.06 1.6447-.072 4.848-.079 3.2033-.007 3.5835.005 4.8495.0608 1.169.0508 1.8053.2445 2.228.408.5608.216.96.4754 1.3816.895.4217.4194.6816.8176.9005 1.3787.1653.4217.3617 1.056.4169 2.2263.0602 1.2655.0739 1.645.0796 4.848.0058 3.203-.0055 3.5834-.061 4.848-.051 1.17-.245 1.8055-.408 2.2294-.216.5604-.4763.96-.8954 1.3814-.419.4215-.8181.6811-1.3783.9-.4224.1649-1.0577.3617-2.2262.4174-1.2656.0595-1.6448.072-4.8493.079-3.2045.007-3.5825-.006-4.848-.0608M16.953 5.5864A1.44 1.44 0 1 0 18.39 4.144a1.44 1.44 0 0 0-1.437 1.4424M5.8385 12.012c.0067 3.4032 2.7706 6.1557 6.173 6.1493 3.4026-.0065 6.157-2.7701 6.1506-6.1733-.0065-3.4032-2.771-6.1565-6.174-6.1498-3.403.0067-6.156 2.771-6.1496 6.1738M8 12.0077a4 4 0 1 1 4.008 3.9921A3.9996 3.9996 0 0 1 8 12.0077"})]})}),$Se="#4A154B",DSe=T.forwardRef(function({title:e="Slack",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=$Se),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M5.042 15.165a2.528 2.528 0 0 1-2.52 2.523A2.528 2.528 0 0 1 0 15.165a2.527 2.527 0 0 1 2.522-2.52h2.52v2.52zM6.313 15.165a2.527 2.527 0 0 1 2.521-2.52 2.527 2.527 0 0 1 2.521 2.52v6.313A2.528 2.528 0 0 1 8.834 24a2.528 2.528 0 0 1-2.521-2.522v-6.313zM8.834 5.042a2.528 2.528 0 0 1-2.521-2.52A2.528 2.528 0 0 1 8.834 0a2.528 2.528 0 0 1 2.521 2.522v2.52H8.834zM8.834 6.313a2.528 2.528 0 0 1 2.521 2.521 2.528 2.528 0 0 1-2.521 2.521H2.522A2.528 2.528 0 0 1 0 8.834a2.528 2.528 0 0 1 2.522-2.521h6.312zM18.956 8.834a2.528 2.528 0 0 1 2.522-2.521A2.528 2.528 0 0 1 24 8.834a2.528 2.528 0 0 1-2.522 2.521h-2.522V8.834zM17.688 8.834a2.528 2.528 0 0 1-2.523 2.521 2.527 2.527 0 0 1-2.52-2.521V2.522A2.527 2.527 0 0 1 15.165 0a2.528 2.528 0 0 1 2.523 2.522v6.312zM15.165 18.956a2.528 2.528 0 0 1 2.523 2.522A2.528 2.528 0 0 1 15.165 24a2.527 2.527 0 0 1-2.52-2.522v-2.522h2.52zM15.165 17.688a2.527 2.527 0 0 1-2.52-2.523 2.526 2.526 0 0 1 2.52-2.52h6.313A2.527 2.527 0 0 1 24 15.165a2.528 2.528 0 0 1-2.522 2.523h-6.313z"})]})}),FSe="#000000",qSe=T.forwardRef(function({title:e="Threads",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=FSe),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M12.186 24h-.007c-3.581-.024-6.334-1.205-8.184-3.509C2.35 18.44 1.5 15.586 1.472 12.01v-.017c.03-3.579.879-6.43 2.525-8.482C5.845 1.205 8.6.024 12.18 0h.014c2.746.02 5.043.725 6.826 2.098 1.677 1.29 2.858 3.13 3.509 5.467l-2.04.569c-1.104-3.96-3.898-5.984-8.304-6.015-2.91.022-5.11.936-6.54 2.717C4.307 6.504 3.616 8.914 3.589 12c.027 3.086.718 5.496 2.057 7.164 1.43 1.783 3.631 2.698 6.54 2.717 2.623-.02 4.358-.631 5.8-2.045 1.647-1.613 1.618-3.593 1.09-4.798-.31-.71-.873-1.3-1.634-1.75-.192 1.352-.622 2.446-1.284 3.272-.886 1.102-2.14 1.704-3.73 1.79-1.202.065-2.361-.218-3.259-.801-1.063-.689-1.685-1.74-1.752-2.964-.065-1.19.408-2.285 1.33-3.082.88-.76 2.119-1.207 3.583-1.291a13.853 13.853 0 0 1 3.02.142c-.126-.742-.375-1.332-.75-1.757-.513-.586-1.308-.883-2.359-.89h-.029c-.844 0-1.992.232-2.721 1.32L7.734 7.847c.98-1.454 2.568-2.256 4.478-2.256h.044c3.194.02 5.097 1.975 5.287 5.388.108.046.216.094.321.142 1.49.7 2.58 1.761 3.154 3.07.797 1.82.871 4.79-1.548 7.158-1.85 1.81-4.094 2.628-7.277 2.65Zm1.003-11.69c-.242 0-.487.007-.739.021-1.836.103-2.98.946-2.916 2.143.067 1.256 1.452 1.839 2.784 1.767 1.224-.065 2.818-.543 3.086-3.71a10.5 10.5 0 0 0-2.215-.221z"})]})}),LSe="#000000",BSe=T.forwardRef(function({title:e="X",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=LSe),u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[u.jsx("title",{children:e}),u.jsx("path",{d:"M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"})]})}),zSe={Phone:gM,Mail:mM,Users:qs,Coffee:Ete,Utensils:Rte,FileText:_0,Circle:tI,MessageCircle:E0};function VSe({timeline:t,onEdit:e,onDelete:r,onToggleTodo:n,personId:i,allPeople:s=[]}){const o=T.useMemo(()=>hge(t||[]),[t]),a=f=>s.find(p=>p.id.toString()===f.toString()),l=f=>{if(f.type==="todo")return f.is_completed?eI:Rd;if(f.type==="activity"&&f.activity_type){const p=pge(f.activity_type);return zSe[p]||tI}return f.type==="note"?_0:tI},c=f=>{var S;const p=l(f),m=f.type==="todo",g=f.type==="activity",v=f.type==="note";let y=f.activity_date||f.created;f.activity_date&&f.activity_time&&(y=`${f.activity_date}T${f.activity_time}`);const b=fge(y),w=gge(f),x=m&&tm(f);return u.jsxs("div",{className:`relative ${m?"pl-0":"pl-8"} pb-6 group`,children:[!m&&u.jsx("div",{className:"absolute left-0 top-1",children:u.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${g?"bg-blue-500 border-blue-500":"bg-gray-400 border-gray-400"}`})}),u.jsx("div",{className:`${w}`,children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[!m&&u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx(p,{className:`w-4 h-4 flex-shrink-0 ${g?"text-blue-600":"text-gray-500"}`}),g&&f.activity_type&&u.jsx("span",{className:"text-xs font-medium text-gray-600",children:mge(f.activity_type)}),u.jsx("span",{className:"text-xs text-gray-400",children:""}),u.jsx("span",{className:"text-xs text-gray-500",children:b})]}),u.jsxs("div",{className:"flex items-start gap-2",children:[m&&u.jsx("button",{onClick:()=>n&&n(f),className:"mt-0.5 flex-shrink-0",title:f.is_completed?"Mark as incomplete":"Mark as complete",children:f.is_completed?u.jsx(eI,{className:`w-5 h-5 ${x?"text-red-600":"text-primary-600"}`}):u.jsx(Rd,{className:`w-5 h-5 ${x?"text-red-600":"text-gray-400"}`})}),(v||g)&&((S=f.content)!=null&&S.includes("<"))?u.jsx("div",{className:`text-sm flex-1 prose prose-sm max-w-none ${f.is_completed?"line-through opacity-60":""}`,dangerouslySetInnerHTML:{__html:f.content}}):u.jsx("p",{className:`text-sm flex-1 ${f.is_completed?"line-through opacity-60":""}`,children:f.content})]}),g&&f.participants&&f.participants.length>0&&u.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[u.jsx("span",{className:"text-xs text-gray-500",children:"With:"}),f.participants.map(_=>{const E=a(_);return E?u.jsxs(ge,{to:`/people/${_}`,className:"inline-flex items-center gap-1 text-xs text-primary-600 hover:text-primary-700 hover:underline",children:[u.jsx(pM,{className:"w-3 h-3"}),E.name]},_):null})]}),m&&f.due_date&&u.jsx("div",{className:"mt-2",children:u.jsxs("span",{className:`text-xs ${x?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",Nn(new Date(f.due_date),"MMM d, yyyy"),x&&" (overdue)"]})})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[e&&u.jsx("button",{onClick:()=>e(f),className:"p-1 hover:bg-gray-100 rounded",title:"Edit",children:u.jsx(ra,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),r&&u.jsx("button",{onClick:()=>r(f),className:"p-1 hover:bg-red-50 rounded",title:"Delete",children:u.jsx(di,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})})]},f.id)},d=(f,p)=>!p||p.length===0?null:u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3 uppercase tracking-wide",children:f}),u.jsx("div",{className:"relative pl-4 border-l-2 border-gray-200",children:p.map(c)})]});return o.today.length>0||o.yesterday.length>0||o.thisWeek.length>0||o.older.length>0?u.jsxs("div",{className:"space-y-6",children:[d("Today",o.today),d("Yesterday",o.yesterday),d("This week",o.thisWeek),d("Older",o.older)]}):u.jsx("div",{className:"text-center py-8",children:u.jsx("p",{className:"text-sm text-gray-500",children:"No timeline items yet."})})}function USe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,initialContent:i=""}){const[s,o]=T.useState("");if(T.useEffect(()=>{t&&o(i||"")},[t,i]),!t)return null;const a=c=>{c.preventDefault(),!Mv(s)&&(r(s),o(""))},l=()=>{o(""),e()};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Add note"}),u.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Mr,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:a,className:"p-4",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Note"}),u.jsx($ie,{value:s,onChange:o,placeholder:"Enter your note...",disabled:n,autoFocus:!0,minHeight:"150px"})]}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:l,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n||Mv(s),children:n?"Adding...":"Add note"})]})]})]})})}function Die({isOpen:t,onClose:e,onSubmit:r,isLoading:n,todo:i=null}){const[s,o]=T.useState(""),[a,l]=T.useState(""),[c,d]=T.useState(!1),h=()=>new Date().toISOString().split("T")[0];if(T.useEffect(()=>{i?(o(i.content||""),l(i.due_date||""),d(i.is_completed||!1)):(o(""),l(h()),d(!1))},[i,t]),!t)return null;const f=g=>{g.preventDefault(),s.trim()&&(r({content:s.trim(),due_date:a||null,is_completed:c}),i||(o(""),l(h()),d(!1)))},p=()=>{i||(o(""),l(h()),d(!1)),e()},m=g=>{if(!g)return"";try{return new Date(g).toISOString().split("T")[0]}catch{return""}};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:i?"Edit todo":"Add todo"}),u.jsx("button",{onClick:p,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Mr,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:f,className:"p-4",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"todo-content",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),u.jsx("textarea",{id:"todo-content",value:s,onChange:g=>o(g.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"What needs to be done?",disabled:n,autoFocus:!0})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"todo-due-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Due date (optional)"}),u.jsx("input",{id:"todo-due-date",type:"date",value:m(a),onChange:g=>l(g.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),i&&u.jsx("div",{className:"mb-4",children:u.jsxs("label",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",checked:c,onChange:g=>d(g.target.checked),className:"mr-2",disabled:n}),u.jsx("span",{className:"text-sm text-gray-700",children:"Completed"})]})}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:p,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n||!s.trim(),children:n?i?"Saving...":"Adding...":i?"Save":"Add todo"})]})]})]})})}var om=t=>t.type==="checkbox",ql=t=>t instanceof Date,Bn=t=>t==null;const Fie=t=>typeof t=="object";var wr=t=>!Bn(t)&&!Array.isArray(t)&&Fie(t)&&!ql(t),qie=t=>wr(t)&&t.target?om(t.target)?t.target.checked:t.target.value:t,HSe=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Lie=(t,e)=>t.has(HSe(e)),WSe=t=>{const e=t.constructor&&t.constructor.prototype;return wr(e)&&e.hasOwnProperty("isPrototypeOf")},oA=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ft(t){if(t instanceof Date)return new Date(t);const e=typeof FileList<"u"&&t instanceof FileList;if(oA&&(t instanceof Blob||e))return t;const r=Array.isArray(t);if(!r&&!(wr(t)&&WSe(t)))return t;const n=r?[]:Object.create(Object.getPrototypeOf(t));for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=Ft(t[i]));return n}var z0=t=>/^\w*$/.test(t),Rt=t=>t===void 0,V0=t=>Array.isArray(t)?t.filter(Boolean):[],aA=t=>V0(t.replace(/["|']|\]/g,"").split(/\.|\[/)),le=(t,e,r)=>{if(!e||!wr(t))return r;const n=(z0(e)?[e]:aA(e)).reduce((i,s)=>Bn(i)?i:i[s],t);return Rt(n)||n===t?Rt(t[e])?r:t[e]:n},ui=t=>typeof t=="boolean",kn=t=>typeof t=="function",Ct=(t,e,r)=>{let n=-1;const i=z0(e)?[e]:aA(e),s=i.length,o=s-1;for(;++n<s;){const a=i[n];let l=r;if(n!==o){const c=t[a];l=wr(c)||Array.isArray(c)?c:isNaN(+i[n+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=l,t=t[a]}};const Av={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ai={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Js={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Bie=Se.createContext(null);Bie.displayName="HookFormContext";const U0=()=>Se.useContext(Bie);var zie=(t,e,r,n=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==Ai.all&&(e._proxyFormState[o]=!n||Ai.all),r&&(r[o]=!0),t[o]}});return i};const H0=typeof window<"u"?Se.useLayoutEffect:Se.useEffect;function KSe(t){const e=U0(),{control:r=e.control,disabled:n,name:i,exact:s}=t||{},[o,a]=Se.useState(r._formState),l=Se.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return H0(()=>r._subscribe({name:i,formState:l.current,exact:s,callback:c=>{!n&&a({...r._formState,...c})}}),[i,n,s]),Se.useEffect(()=>{l.current.isValid&&r._setValid(!0)},[r]),Se.useMemo(()=>zie(o,r,l.current,!1),[o,r])}var fi=t=>typeof t=="string",AI=(t,e,r,n,i)=>fi(t)?(n&&e.watch.add(t),le(r,t,i)):Array.isArray(t)?t.map(s=>(n&&e.watch.add(s),le(r,s))):(n&&(e.watchAll=!0),r),$I=t=>Bn(t)||!Fie(t);function cs(t,e,r=new WeakSet){if($I(t)||$I(e))return Object.is(t,e);if(ql(t)&&ql(e))return t.getTime()===e.getTime();const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;if(r.has(t)||r.has(e))return!0;r.add(t),r.add(e);for(const s of n){const o=t[s];if(!i.includes(s))return!1;if(s!=="ref"){const a=e[s];if(ql(o)&&ql(a)||wr(o)&&wr(a)||Array.isArray(o)&&Array.isArray(a)?!cs(o,a,r):!Object.is(o,a))return!1}}return!0}function GSe(t){const e=U0(),{control:r=e.control,name:n,defaultValue:i,disabled:s,exact:o,compute:a}=t||{},l=Se.useRef(i),c=Se.useRef(a),d=Se.useRef(void 0),h=Se.useRef(r),f=Se.useRef(n);c.current=a;const[p,m]=Se.useState(()=>{const x=r._getWatch(n,l.current);return c.current?c.current(x):x}),g=Se.useCallback(x=>{const S=AI(n,r._names,x||r._formValues,!1,l.current);return c.current?c.current(S):S},[r._formValues,r._names,n]),v=Se.useCallback(x=>{if(!s){const S=AI(n,r._names,x||r._formValues,!1,l.current);if(c.current){const _=c.current(S);cs(_,d.current)||(m(_),d.current=_)}else m(S)}},[r._formValues,r._names,s,n]);H0(()=>((h.current!==r||!cs(f.current,n))&&(h.current=r,f.current=n,v()),r._subscribe({name:n,formState:{values:!0},exact:o,callback:x=>{v(x.values)}})),[r,o,n,v]),Se.useEffect(()=>r._removeUnmounted());const y=h.current!==r,b=f.current,w=Se.useMemo(()=>{if(s)return null;const x=!y&&!cs(b,n);return y||x?g():null},[s,y,n,b,g]);return w!==null?w:p}function YSe(t){const e=U0(),{name:r,disabled:n,control:i=e.control,shouldUnregister:s,defaultValue:o,exact:a=!0}=t,l=Lie(i._names.array,r),c=Se.useMemo(()=>le(i._formValues,r,le(i._defaultValues,r,o)),[i,r,o]),d=GSe({control:i,name:r,defaultValue:c,exact:a}),h=KSe({control:i,name:r,exact:a}),f=Se.useRef(t),p=Se.useRef(void 0),m=Se.useRef(i.register(r,{...t.rules,value:d,...ui(t.disabled)?{disabled:t.disabled}:{}}));f.current=t;const g=Se.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!le(h.errors,r)},isDirty:{enumerable:!0,get:()=>!!le(h.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!le(h.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!le(h.validatingFields,r)},error:{enumerable:!0,get:()=>le(h.errors,r)}}),[h,r]),v=Se.useCallback(x=>m.current.onChange({target:{value:qie(x),name:r},type:Av.CHANGE}),[r]),y=Se.useCallback(()=>m.current.onBlur({target:{value:le(i._formValues,r),name:r},type:Av.BLUR}),[r,i._formValues]),b=Se.useCallback(x=>{const S=le(i._fields,r);S&&S._f&&x&&(S._f.ref={focus:()=>kn(x.focus)&&x.focus(),select:()=>kn(x.select)&&x.select(),setCustomValidity:_=>kn(x.setCustomValidity)&&x.setCustomValidity(_),reportValidity:()=>kn(x.reportValidity)&&x.reportValidity()})},[i._fields,r]),w=Se.useMemo(()=>({name:r,value:d,...ui(n)||h.disabled?{disabled:h.disabled||n}:{},onChange:v,onBlur:y,ref:b}),[r,n,h.disabled,v,y,b,d]);return Se.useEffect(()=>{const x=i._options.shouldUnregister||s,S=p.current;S&&S!==r&&!l&&i.unregister(S),i.register(r,{...f.current.rules,...ui(f.current.disabled)?{disabled:f.current.disabled}:{}});const _=(E,N)=>{const k=le(i._fields,E);k&&k._f&&(k._f.mount=N)};if(_(r,!0),x){const E=Ft(le(i._options.defaultValues,r,f.current.defaultValue));Ct(i._defaultValues,r,E),Rt(le(i._formValues,r))&&Ct(i._formValues,r,E)}return!l&&i.register(r),p.current=r,()=>{(l?x&&!i._state.action:x)?i.unregister(r):_(r,!1)}},[r,i,l,s]),Se.useEffect(()=>{i._setDisabledField({disabled:n,name:r})},[n,r,i]),Se.useMemo(()=>({field:w,formState:h,fieldState:g}),[w,h,g])}const $v=t=>t.render(YSe(t));var QSe=(t,e,r,n,i)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:i||!0}}:{},Gn=t=>Array.isArray(t)?t:[t],pq=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}};function Vie(t,e){const r={};for(const n in t)if(t.hasOwnProperty(n)){const i=t[n],s=e[n];if(i&&wr(i)&&s){const o=Vie(i,s);wr(o)&&(r[n]=o)}else t[n]&&(r[n]=s)}return r}var hn=t=>wr(t)&&!Object.keys(t).length,lA=t=>t.type==="file",Dv=t=>{if(!oA)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Uie=t=>t.type==="select-multiple",cA=t=>t.type==="radio",XSe=t=>cA(t)||om(t),G1=t=>Dv(t)&&t.isConnected;function JSe(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=Rt(t)?n++:t[e[n++]];return t}function ZSe(t){for(const e in t)if(t.hasOwnProperty(e)&&!Rt(t[e]))return!1;return!0}function fr(t,e){const r=Array.isArray(e)?e:z0(e)?[e]:aA(e),n=r.length===1?t:JSe(t,r),i=r.length-1,s=r[i];return n&&delete n[s],i!==0&&(wr(n)&&hn(n)||Array.isArray(n)&&ZSe(n))&&fr(t,r.slice(0,-1)),t}var e_e=t=>{for(const e in t)if(kn(t[e]))return!0;return!1};function Hie(t){return Array.isArray(t)||wr(t)&&!e_e(t)}function DI(t,e={}){for(const r in t){const n=t[r];Hie(n)?(e[r]=Array.isArray(n)?[]:{},DI(n,e[r])):Rt(n)||(e[r]=!0)}return e}function ku(t,e,r){r||(r=DI(e));for(const n in t){const i=t[n];if(Hie(i))Rt(e)||$I(r[n])?r[n]=DI(i,Array.isArray(i)?[]:{}):ku(i,Bn(e)?{}:e[n],r[n]);else{const s=e[n];r[n]=!cs(i,s)}}return r}const mq={value:!1,isValid:!1},gq={value:!0,isValid:!0};var Wie=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Rt(t[0].attributes.value)?Rt(t[0].value)||t[0].value===""?gq:{value:t[0].value,isValid:!0}:gq:mq}return mq},Kie=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>Rt(t)?t:e?t===""?NaN:t&&+t:r&&fi(t)?new Date(t):n?n(t):t;const yq={isValid:!1,value:null};var Gie=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,yq):yq;function vq(t){const e=t.ref;return lA(e)?e.files:cA(e)?Gie(t.refs).value:Uie(e)?[...e.selectedOptions].map(({value:r})=>r):om(e)?Wie(t.refs).value:Kie(Rt(e.value)?t.ref.value:e.value,t)}var t_e=(t,e,r,n)=>{const i={};for(const s of t){const o=le(e,s);o&&Ct(i,s,o._f)}return{criteriaMode:r,names:[...t],fields:i,shouldUseNativeValidation:n}},Fv=t=>t instanceof RegExp,ef=t=>Rt(t)?t:Fv(t)?t.source:wr(t)?Fv(t.value)?t.value.source:t.value:t,Bu=t=>({isOnSubmit:!t||t===Ai.onSubmit,isOnBlur:t===Ai.onBlur,isOnChange:t===Ai.onChange,isOnAll:t===Ai.all,isOnTouch:t===Ai.onTouched});const bq="AsyncFunction";var r_e=t=>!!t&&!!t.validate&&!!(kn(t.validate)&&t.validate.constructor.name===bq||wr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===bq)),n_e=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),FI=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const nd=(t,e,r,n)=>{for(const i of r||Object.keys(t)){const s=le(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!n)return!0;if(o.ref&&e(o.ref,o.name)&&!n)return!0;if(nd(a,e))break}else if(wr(a)&&nd(a,e))break}}};function xq(t,e,r){const n=le(t,r);if(n||z0(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const s=i.join("."),o=le(e,s),a=le(t,s);if(o&&!Array.isArray(o)&&r!==s)return{name:r};if(a&&a.type)return{name:s,error:a};if(a&&a.root&&a.root.type)return{name:`${s}.root`,error:a.root};i.pop()}return{name:r}}var i_e=(t,e,r,n)=>{r(t);const{name:i,...s}=t;return hn(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!n||Ai.all))},s_e=(t,e,r)=>!t||!e||t===e||Gn(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n))),o_e=(t,e,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(e||t):(r?n.isOnBlur:i.isOnBlur)?!t:(r?n.isOnChange:i.isOnChange)?t:!0,a_e=(t,e)=>!V0(le(t,e)).length&&fr(t,e),Yie=(t,e,r)=>{const n=Gn(le(t,r));return Ct(n,"root",e[r]),Ct(t,r,n),t};function wq(t,e,r="validate"){if(fi(t)||Array.isArray(t)&&t.every(fi)||ui(t)&&!t)return{type:r,message:fi(t)?t:"",ref:e}}var bu=t=>wr(t)&&!Fv(t)?t:{value:t,message:""},qI=async(t,e,r,n,i,s)=>{const{ref:o,refs:a,required:l,maxLength:c,minLength:d,min:h,max:f,pattern:p,validate:m,name:g,valueAsNumber:v,mount:y}=t._f,b=le(r,g);if(!y||e.has(g))return{};const w=a?a[0]:o,x=P=>{i&&w.reportValidity&&(w.setCustomValidity(ui(P)?"":P||""),w.reportValidity())},S={},_=cA(o),E=om(o),N=_||E,k=(v||lA(o))&&Rt(o.value)&&Rt(b)||Dv(o)&&o.value===""||b===""||Array.isArray(b)&&!b.length,C=QSe.bind(null,g,n,S),O=(P,j,A,D=Js.maxLength,I=Js.minLength)=>{const L=P?j:A;S[g]={type:P?D:I,message:L,ref:o,...C(P?D:I,L)}};if(s?!Array.isArray(b)||!b.length:l&&(!N&&(k||Bn(b))||ui(b)&&!b||E&&!Wie(a).isValid||_&&!Gie(a).isValid)){const{value:P,message:j}=fi(l)?{value:!!l,message:l}:bu(l);if(P&&(S[g]={type:Js.required,message:j,ref:w,...C(Js.required,j)},!n))return x(j),S}if(!k&&(!Bn(h)||!Bn(f))){let P,j;const A=bu(f),D=bu(h);if(!Bn(b)&&!isNaN(b)){const I=o.valueAsNumber||b&&+b;Bn(A.value)||(P=I>A.value),Bn(D.value)||(j=I<D.value)}else{const I=o.valueAsDate||new Date(b),L=V=>new Date(new Date().toDateString()+" "+V),F=o.type=="time",W=o.type=="week";fi(A.value)&&b&&(P=F?L(b)>L(A.value):W?b>A.value:I>new Date(A.value)),fi(D.value)&&b&&(j=F?L(b)<L(D.value):W?b<D.value:I<new Date(D.value))}if((P||j)&&(O(!!P,A.message,D.message,Js.max,Js.min),!n))return x(S[g].message),S}if((c||d)&&!k&&(fi(b)||s&&Array.isArray(b))){const P=bu(c),j=bu(d),A=!Bn(P.value)&&b.length>+P.value,D=!Bn(j.value)&&b.length<+j.value;if((A||D)&&(O(A,P.message,j.message),!n))return x(S[g].message),S}if(p&&!k&&fi(b)){const{value:P,message:j}=bu(p);if(Fv(P)&&!b.match(P)&&(S[g]={type:Js.pattern,message:j,ref:o,...C(Js.pattern,j)},!n))return x(j),S}if(m){if(kn(m)){const P=await m(b,r),j=wq(P,w);if(j&&(S[g]={...j,...C(Js.validate,j.message)},!n))return x(j.message),S}else if(wr(m)){let P={};for(const j in m){if(!hn(P)&&!n)break;const A=wq(await m[j](b,r),w,j);A&&(P={...A,...C(j,A.message)},x(A.message),n&&(S[g]=P))}if(!hn(P)&&(S[g]={ref:w,...P},!n))return S}}return x(!0),S};const l_e={mode:Ai.onSubmit,reValidateMode:Ai.onChange,shouldFocusError:!0};function c_e(t={}){let e={...l_e,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:kn(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},n={},i=wr(e.defaultValues)||wr(e.values)?Ft(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:Ft(i),o={action:!1,mount:!1,watch:!1,keepIsValid:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={...d};let f={...h};const p={array:pq(),state:pq()},m=e.criteriaMode===Ai.all,g=M=>q=>{clearTimeout(c),c=setTimeout(M,q)},v=async M=>{if(!o.keepIsValid&&!e.disabled&&(h.isValid||f.isValid||M)){let q;e.resolver?(q=hn((await N()).errors),y()):q=await C(n,!0),q!==r.isValid&&p.state.next({isValid:q})}},y=(M,q)=>{!e.disabled&&(h.isValidating||h.validatingFields||f.isValidating||f.validatingFields)&&((M||Array.from(a.mount)).forEach(B=>{B&&(q?Ct(r.validatingFields,B,q):fr(r.validatingFields,B))}),p.state.next({validatingFields:r.validatingFields,isValidating:!hn(r.validatingFields)}))},b=(M,q=[],B,ie,Z=!0,X=!0)=>{if(ie&&B&&!e.disabled){if(o.action=!0,X&&Array.isArray(le(n,M))){const ve=B(le(n,M),ie.argA,ie.argB);Z&&Ct(n,M,ve)}if(X&&Array.isArray(le(r.errors,M))){const ve=B(le(r.errors,M),ie.argA,ie.argB);Z&&Ct(r.errors,M,ve),a_e(r.errors,M)}if((h.touchedFields||f.touchedFields)&&X&&Array.isArray(le(r.touchedFields,M))){const ve=B(le(r.touchedFields,M),ie.argA,ie.argB);Z&&Ct(r.touchedFields,M,ve)}(h.dirtyFields||f.dirtyFields)&&(r.dirtyFields=ku(i,s)),p.state.next({name:M,isDirty:P(M,q),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Ct(s,M,q)},w=(M,q)=>{Ct(r.errors,M,q),p.state.next({errors:r.errors})},x=M=>{r.errors=M,p.state.next({errors:r.errors,isValid:!1})},S=(M,q,B,ie)=>{const Z=le(n,M);if(Z){const X=le(s,M,Rt(B)?le(i,M):B);Rt(X)||ie&&ie.defaultChecked||q?Ct(s,M,q?X:vq(Z._f)):D(M,X),o.mount&&!o.action&&v()}},_=(M,q,B,ie,Z)=>{let X=!1,ve=!1;const Ye={name:M};if(!e.disabled){if(!B||ie){(h.isDirty||f.isDirty)&&(ve=r.isDirty,r.isDirty=Ye.isDirty=P(),X=ve!==Ye.isDirty);const Ze=cs(le(i,M),q);ve=!!le(r.dirtyFields,M),Ze?fr(r.dirtyFields,M):Ct(r.dirtyFields,M,!0),Ye.dirtyFields=r.dirtyFields,X=X||(h.dirtyFields||f.dirtyFields)&&ve!==!Ze}if(B){const Ze=le(r.touchedFields,M);Ze||(Ct(r.touchedFields,M,B),Ye.touchedFields=r.touchedFields,X=X||(h.touchedFields||f.touchedFields)&&Ze!==B)}X&&Z&&p.state.next(Ye)}return X?Ye:{}},E=(M,q,B,ie)=>{const Z=le(r.errors,M),X=(h.isValid||f.isValid)&&ui(q)&&r.isValid!==q;if(e.delayError&&B?(l=g(()=>w(M,B)),l(e.delayError)):(clearTimeout(c),l=null,B?Ct(r.errors,M,B):fr(r.errors,M)),(B?!cs(Z,B):Z)||!hn(ie)||X){const ve={...ie,...X&&ui(q)?{isValid:q}:{},errors:r.errors,name:M};r={...r,...ve},p.state.next(ve)}},N=async M=>(y(M,!0),await e.resolver(s,e.context,t_e(M||a.mount,n,e.criteriaMode,e.shouldUseNativeValidation))),k=async M=>{const{errors:q}=await N(M);if(y(M),M)for(const B of M){const ie=le(q,B);ie?Ct(r.errors,B,ie):fr(r.errors,B)}else r.errors=q;return q},C=async(M,q,B={valid:!0})=>{for(const ie in M){const Z=M[ie];if(Z){const{_f:X,...ve}=Z;if(X){const Ye=a.array.has(X.name),Ze=Z._f&&r_e(Z._f);Ze&&h.validatingFields&&y([X.name],!0);const tr=await qI(Z,a.disabled,s,m,e.shouldUseNativeValidation&&!q,Ye);if(Ze&&h.validatingFields&&y([X.name]),tr[X.name]&&(B.valid=!1,q))break;!q&&(le(tr,X.name)?Ye?Yie(r.errors,tr,X.name):Ct(r.errors,X.name,tr[X.name]):fr(r.errors,X.name))}!hn(ve)&&await C(ve,q,B)}}return B.valid},O=()=>{for(const M of a.unMount){const q=le(n,M);q&&(q._f.refs?q._f.refs.every(B=>!G1(B)):!G1(q._f.ref))&&$e(M)}a.unMount=new Set},P=(M,q)=>!e.disabled&&(M&&q&&Ct(s,M,q),!cs(H(),i)),j=(M,q,B)=>AI(M,a,{...o.mount?s:Rt(q)?i:fi(M)?{[M]:q}:q},B,q),A=M=>V0(le(o.mount?s:i,M,e.shouldUnregister?le(i,M,[]):[])),D=(M,q,B={})=>{const ie=le(n,M);let Z=q;if(ie){const X=ie._f;X&&(!X.disabled&&Ct(s,M,Kie(q,X)),Z=Dv(X.ref)&&Bn(q)?"":q,Uie(X.ref)?[...X.ref.options].forEach(ve=>ve.selected=Z.includes(ve.value)):X.refs?om(X.ref)?X.refs.forEach(ve=>{(!ve.defaultChecked||!ve.disabled)&&(Array.isArray(Z)?ve.checked=!!Z.find(Ye=>Ye===ve.value):ve.checked=Z===ve.value||!!Z)}):X.refs.forEach(ve=>ve.checked=ve.value===Z):lA(X.ref)?X.ref.value="":(X.ref.value=Z,X.ref.type||p.state.next({name:M,values:Ft(s)})))}(B.shouldDirty||B.shouldTouch)&&_(M,Z,B.shouldTouch,B.shouldDirty,!0),B.shouldValidate&&V(M)},I=(M,q,B)=>{for(const ie in q){if(!q.hasOwnProperty(ie))return;const Z=q[ie],X=M+"."+ie,ve=le(n,X);(a.array.has(M)||wr(Z)||ve&&!ve._f)&&!ql(Z)?I(X,Z,B):D(X,Z,B)}},L=(M,q,B={})=>{const ie=le(n,M),Z=a.array.has(M),X=Ft(q);Ct(s,M,X),Z?(p.array.next({name:M,values:Ft(s)}),(h.isDirty||h.dirtyFields||f.isDirty||f.dirtyFields)&&B.shouldDirty&&p.state.next({name:M,dirtyFields:ku(i,s),isDirty:P(M,X)})):ie&&!ie._f&&!Bn(X)?I(M,X,B):D(M,X,B),FI(M,a)&&p.state.next({...r,name:M}),p.state.next({name:o.mount?M:void 0,values:Ft(s)})},F=async M=>{o.mount=!0;const q=M.target;let B=q.name,ie=!0;const Z=le(n,B),X=Ze=>{ie=Number.isNaN(Ze)||ql(Ze)&&isNaN(Ze.getTime())||cs(Ze,le(s,B,Ze))},ve=Bu(e.mode),Ye=Bu(e.reValidateMode);if(Z){let Ze,tr;const Ne=q.type?vq(Z._f):qie(M),se=M.type===Av.BLUR||M.type===Av.FOCUS_OUT,fe=!n_e(Z._f)&&!e.resolver&&!le(r.errors,B)&&!Z._f.deps||o_e(se,le(r.touchedFields,B),r.isSubmitted,Ye,ve),he=FI(B,a,se);Ct(s,B,Ne),se?(!q||!q.readOnly)&&(Z._f.onBlur&&Z._f.onBlur(M),l&&l(0)):Z._f.onChange&&Z._f.onChange(M);const ke=_(B,Ne,se),ot=!hn(ke)||he;if(!se&&p.state.next({name:B,type:M.type,values:Ft(s)}),fe)return(h.isValid||f.isValid)&&(e.mode==="onBlur"?se&&v():se||v()),ot&&p.state.next({name:B,...he?{}:ke});if(!se&&he&&p.state.next({...r}),e.resolver){const{errors:oi}=await N([B]);if(y([B]),X(Ne),ie){const Xi=xq(r.errors,n,B),fu=xq(oi,n,Xi.name||B);Ze=fu.error,B=fu.name,tr=hn(oi)}}else y([B],!0),Ze=(await qI(Z,a.disabled,s,m,e.shouldUseNativeValidation))[B],y([B]),X(Ne),ie&&(Ze?tr=!1:(h.isValid||f.isValid)&&(tr=await C(n,!0)));ie&&(Z._f.deps&&(!Array.isArray(Z._f.deps)||Z._f.deps.length>0)&&V(Z._f.deps),E(B,tr,Ze,ke))}},W=(M,q)=>{if(le(r.errors,q)&&M.focus)return M.focus(),1},V=async(M,q={})=>{let B,ie;const Z=Gn(M);if(e.resolver){const X=await k(Rt(M)?M:Z);B=hn(X),ie=M?!Z.some(ve=>le(X,ve)):B}else M?(ie=(await Promise.all(Z.map(async X=>{const ve=le(n,X);return await C(ve&&ve._f?{[X]:ve}:ve)}))).every(Boolean),!(!ie&&!r.isValid)&&v()):ie=B=await C(n);return p.state.next({...!fi(M)||(h.isValid||f.isValid)&&B!==r.isValid?{}:{name:M},...e.resolver||!M?{isValid:B}:{},errors:r.errors}),q.shouldFocus&&!ie&&nd(n,W,M?Z:a.mount),ie},H=(M,q)=>{let B={...o.mount?s:i};return q&&(B=Vie(q.dirtyFields?r.dirtyFields:r.touchedFields,B)),Rt(M)?B:fi(M)?le(B,M):M.map(ie=>le(B,ie))},K=(M,q)=>({invalid:!!le((q||r).errors,M),isDirty:!!le((q||r).dirtyFields,M),error:le((q||r).errors,M),isValidating:!!le(r.validatingFields,M),isTouched:!!le((q||r).touchedFields,M)}),de=M=>{M&&Gn(M).forEach(q=>fr(r.errors,q)),p.state.next({errors:M?r.errors:{}})},be=(M,q,B)=>{const ie=(le(n,M,{_f:{}})._f||{}).ref,Z=le(r.errors,M)||{},{ref:X,message:ve,type:Ye,...Ze}=Z;Ct(r.errors,M,{...Ze,...q,ref:ie}),p.state.next({name:M,errors:r.errors,isValid:!1}),B&&B.shouldFocus&&ie&&ie.focus&&ie.focus()},Fe=(M,q)=>kn(M)?p.state.subscribe({next:B=>"values"in B&&M(j(void 0,q),B)}):j(M,q,!0),pe=M=>p.state.subscribe({next:q=>{s_e(M.name,q.name,M.exact)&&i_e(q,M.formState||h,Je,M.reRenderRoot)&&M.callback({values:{...s},...r,...q,defaultValues:i})}}).unsubscribe,Oe=M=>(o.mount=!0,f={...f,...M.formState},pe({...M,formState:{...d,...M.formState}})),$e=(M,q={})=>{for(const B of M?Gn(M):a.mount)a.mount.delete(B),a.array.delete(B),q.keepValue||(fr(n,B),fr(s,B)),!q.keepError&&fr(r.errors,B),!q.keepDirty&&fr(r.dirtyFields,B),!q.keepTouched&&fr(r.touchedFields,B),!q.keepIsValidating&&fr(r.validatingFields,B),!e.shouldUnregister&&!q.keepDefaultValue&&fr(i,B);p.state.next({values:Ft(s)}),p.state.next({...r,...q.keepDirty?{isDirty:P()}:{}}),!q.keepIsValid&&v()},ut=({disabled:M,name:q})=>{(ui(M)&&o.mount||M||a.disabled.has(q))&&(M?a.disabled.add(q):a.disabled.delete(q))},it=(M,q={})=>{let B=le(n,M);const ie=ui(q.disabled)||ui(e.disabled);return Ct(n,M,{...B||{},_f:{...B&&B._f?B._f:{ref:{name:M}},name:M,mount:!0,...q}}),a.mount.add(M),B?ut({disabled:ui(q.disabled)?q.disabled:e.disabled,name:M}):S(M,!0,q.value),{...ie?{disabled:q.disabled||e.disabled}:{},...e.progressive?{required:!!q.required,min:ef(q.min),max:ef(q.max),minLength:ef(q.minLength),maxLength:ef(q.maxLength),pattern:ef(q.pattern)}:{},name:M,onChange:F,onBlur:F,ref:Z=>{if(Z){it(M,q),B=le(n,M);const X=Rt(Z.value)&&Z.querySelectorAll&&Z.querySelectorAll("input,select,textarea")[0]||Z,ve=XSe(X),Ye=B._f.refs||[];if(ve?Ye.find(Ze=>Ze===X):X===B._f.ref)return;Ct(n,M,{_f:{...B._f,...ve?{refs:[...Ye.filter(G1),X,...Array.isArray(le(i,M))?[{}]:[]],ref:{type:X.type,name:M}}:{ref:X}}}),S(M,!1,void 0,X)}else B=le(n,M,{}),B._f&&(B._f.mount=!1),(e.shouldUnregister||q.shouldUnregister)&&!(Lie(a.array,M)&&o.action)&&a.unMount.add(M)}}},gt=()=>e.shouldFocusError&&nd(n,W,a.mount),J=M=>{ui(M)&&(p.state.next({disabled:M}),nd(n,(q,B)=>{const ie=le(n,B);ie&&(q.disabled=ie._f.disabled||M,Array.isArray(ie._f.refs)&&ie._f.refs.forEach(Z=>{Z.disabled=ie._f.disabled||M}))},0,!1))},Ee=(M,q)=>async B=>{let ie;B&&(B.preventDefault&&B.preventDefault(),B.persist&&B.persist());let Z=Ft(s);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:X,values:ve}=await N();y(),r.errors=X,Z=Ft(ve)}else await C(n);if(a.disabled.size)for(const X of a.disabled)fr(Z,X);if(fr(r.errors,"root"),hn(r.errors)){p.state.next({errors:{}});try{await M(Z,B)}catch(X){ie=X}}else q&&await q({...r.errors},B),gt(),setTimeout(gt);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:hn(r.errors)&&!ie,submitCount:r.submitCount+1,errors:r.errors}),ie)throw ie},Ge=(M,q={})=>{le(n,M)&&(Rt(q.defaultValue)?L(M,Ft(le(i,M))):(L(M,q.defaultValue),Ct(i,M,Ft(q.defaultValue))),q.keepTouched||fr(r.touchedFields,M),q.keepDirty||(fr(r.dirtyFields,M),r.isDirty=q.defaultValue?P(M,Ft(le(i,M))):P()),q.keepError||(fr(r.errors,M),h.isValid&&v()),p.state.next({...r}))},st=(M,q={})=>{const B=M?Ft(M):i,ie=Ft(B),Z=hn(M),X=Z?i:ie;if(q.keepDefaultValues||(i=B),!q.keepValues){if(q.keepDirtyValues){const ve=new Set([...a.mount,...Object.keys(ku(i,s))]);for(const Ye of Array.from(ve))le(r.dirtyFields,Ye)?Ct(X,Ye,le(s,Ye)):L(Ye,le(X,Ye))}else{if(oA&&Rt(M))for(const ve of a.mount){const Ye=le(n,ve);if(Ye&&Ye._f){const Ze=Array.isArray(Ye._f.refs)?Ye._f.refs[0]:Ye._f.ref;if(Dv(Ze)){const tr=Ze.closest("form");if(tr){tr.reset();break}}}}if(q.keepFieldsRef)for(const ve of a.mount)L(ve,le(X,ve));else n={}}s=e.shouldUnregister?q.keepDefaultValues?Ft(i):{}:Ft(X),p.array.next({values:{...X}}),p.state.next({values:{...X}})}a={mount:q.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!q.keepIsValid||!!q.keepDirtyValues||!e.shouldUnregister&&!hn(X),o.watch=!!e.shouldUnregister,o.keepIsValid=!!q.keepIsValid,o.action=!1,q.keepErrors||(r.errors={}),p.state.next({submitCount:q.keepSubmitCount?r.submitCount:0,isDirty:Z?!1:q.keepDirty?r.isDirty:!!(q.keepDefaultValues&&!cs(M,i)),isSubmitted:q.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Z?{}:q.keepDirtyValues?q.keepDefaultValues&&s?ku(i,s):r.dirtyFields:q.keepDefaultValues&&M?ku(i,M):q.keepDirty?r.dirtyFields:{},touchedFields:q.keepTouched?r.touchedFields:{},errors:q.keepErrors?r.errors:{},isSubmitSuccessful:q.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},er=(M,q)=>st(kn(M)?M(s):M,{...e.resetOptions,...q}),Ce=(M,q={})=>{const B=le(n,M),ie=B&&B._f;if(ie){const Z=ie.refs?ie.refs[0]:ie.ref;Z.focus&&setTimeout(()=>{Z.focus(),q.shouldSelect&&kn(Z.select)&&Z.select()})}},Je=M=>{r={...r,...M}},dt={control:{register:it,unregister:$e,getFieldState:K,handleSubmit:Ee,setError:be,_subscribe:pe,_runSchema:N,_updateIsValidating:y,_focusError:gt,_getWatch:j,_getDirty:P,_setValid:v,_setFieldArray:b,_setDisabledField:ut,_setErrors:x,_getFieldArray:A,_reset:st,_resetDefaultValues:()=>kn(e.defaultValues)&&e.defaultValues().then(M=>{er(M,e.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:O,_disableForm:J,_subjects:p,_proxyFormState:h,get _fields(){return n},get _formValues(){return s},get _state(){return o},set _state(M){o=M},get _defaultValues(){return i},get _names(){return a},set _names(M){a=M},get _formState(){return r},get _options(){return e},set _options(M){e={...e,...M}}},subscribe:Oe,trigger:V,register:it,handleSubmit:Ee,watch:Fe,setValue:L,getValues:H,reset:er,resetField:Ge,clearErrors:de,unregister:$e,setError:be,setFocus:Ce,getFieldState:K};return{...dt,formControl:dt}}var Xo=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const t=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const r=(Math.random()*16+t)%16|0;return(e=="x"?r:r&3|8).toString(16)})},Y1=(t,e,r={})=>r.shouldFocus||Rt(r.shouldFocus)?r.focusName||`${t}.${Rt(r.focusIndex)?e:r.focusIndex}.`:"",Q1=(t,e)=>[...t,...Gn(e)],X1=t=>Array.isArray(t)?t.map(()=>{}):void 0;function J1(t,e,r){return[...t.slice(0,e),...Gn(r),...t.slice(e)]}var Z1=(t,e,r)=>Array.isArray(t)?(Rt(t[r])&&(t[r]=void 0),t.splice(r,0,t.splice(e,1)[0]),t):[],ex=(t,e)=>[...Gn(e),...Gn(t)];function u_e(t,e){let r=0;const n=[...t];for(const i of e)n.splice(i-r,1),r++;return V0(n).length?n:[]}var tx=(t,e)=>Rt(e)?[]:u_e(t,Gn(e).sort((r,n)=>r-n)),rx=(t,e,r)=>{[t[e],t[r]]=[t[r],t[e]]},Sq=(t,e,r)=>(t[e]=r,t);function d_e(t){const e=U0(),{control:r=e.control,name:n,keyName:i="id",shouldUnregister:s,rules:o}=t,[a,l]=Se.useState(r._getFieldArray(n)),c=Se.useRef(r._getFieldArray(n).map(Xo)),d=Se.useRef(!1);r._names.array.add(n),Se.useMemo(()=>o&&a.length>=0&&r.register(n,o),[r,n,a.length,o]),H0(()=>r._subjects.array.subscribe({next:({values:x,name:S})=>{if(S===n||!S){const _=le(x,n);Array.isArray(_)&&(l(_),c.current=_.map(Xo))}}}).unsubscribe,[r,n]);const h=Se.useCallback(x=>{d.current=!0,r._setFieldArray(n,x)},[r,n]),f=(x,S)=>{const _=Gn(Ft(x)),E=Q1(r._getFieldArray(n),_);r._names.focus=Y1(n,E.length-1,S),c.current=Q1(c.current,_.map(Xo)),h(E),l(E),r._setFieldArray(n,E,Q1,{argA:X1(x)})},p=(x,S)=>{const _=Gn(Ft(x)),E=ex(r._getFieldArray(n),_);r._names.focus=Y1(n,0,S),c.current=ex(c.current,_.map(Xo)),h(E),l(E),r._setFieldArray(n,E,ex,{argA:X1(x)})},m=x=>{const S=tx(r._getFieldArray(n),x);c.current=tx(c.current,x),h(S),l(S),!Array.isArray(le(r._fields,n))&&Ct(r._fields,n,void 0),r._setFieldArray(n,S,tx,{argA:x})},g=(x,S,_)=>{const E=Gn(Ft(S)),N=J1(r._getFieldArray(n),x,E);r._names.focus=Y1(n,x,_),c.current=J1(c.current,x,E.map(Xo)),h(N),l(N),r._setFieldArray(n,N,J1,{argA:x,argB:X1(S)})},v=(x,S)=>{const _=r._getFieldArray(n);rx(_,x,S),rx(c.current,x,S),h(_),l(_),r._setFieldArray(n,_,rx,{argA:x,argB:S},!1)},y=(x,S)=>{const _=r._getFieldArray(n);Z1(_,x,S),Z1(c.current,x,S),h(_),l(_),r._setFieldArray(n,_,Z1,{argA:x,argB:S},!1)},b=(x,S)=>{const _=Ft(S),E=Sq(r._getFieldArray(n),x,_);c.current=[...E].map((N,k)=>!N||k===x?Xo():c.current[k]),h(E),l([...E]),r._setFieldArray(n,E,Sq,{argA:x,argB:_},!0,!1)},w=x=>{const S=Gn(Ft(x));c.current=S.map(Xo),h([...S]),l([...S]),r._setFieldArray(n,[...S],_=>_,{},!0,!1)};return Se.useEffect(()=>{if(r._state.action=!1,FI(n,r._names)&&r._subjects.state.next({...r._formState}),d.current&&(!Bu(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!Bu(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(x=>{r._updateIsValidating([n]);const S=le(x.errors,n),_=le(r._formState.errors,n);(_?!S&&_.type||S&&(_.type!==S.type||_.message!==S.message):S&&S.type)&&(S?Ct(r._formState.errors,n,S):fr(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const x=le(r._fields,n);x&&x._f&&!(Bu(r._options.reValidateMode).isOnSubmit&&Bu(r._options.mode).isOnSubmit)&&qI(x,r._names.disabled,r._formValues,r._options.criteriaMode===Ai.all,r._options.shouldUseNativeValidation,!0).then(S=>!hn(S)&&r._subjects.state.next({errors:Yie(r._formState.errors,S,n)}))}r._subjects.state.next({name:n,values:Ft(r._formValues)}),r._names.focus&&nd(r._fields,(x,S)=>{if(r._names.focus&&S.startsWith(r._names.focus)&&x.focus)return x.focus(),1}),r._names.focus="",r._setValid(),d.current=!1},[a,n,r]),Se.useEffect(()=>(!le(r._formValues,n)&&r._setFieldArray(n),()=>{const x=(S,_)=>{const E=le(r._fields,S);E&&E._f&&(E._f.mount=_)};r._options.shouldUnregister||s?r.unregister(n):x(n,!1)}),[n,r,i,s]),{swap:Se.useCallback(v,[h,n,r]),move:Se.useCallback(y,[h,n,r]),prepend:Se.useCallback(p,[h,n,r]),append:Se.useCallback(f,[h,n,r]),remove:Se.useCallback(m,[h,n,r]),insert:Se.useCallback(g,[h,n,r]),update:Se.useCallback(b,[h,n,r]),replace:Se.useCallback(w,[h,n,r]),fields:Se.useMemo(()=>a.map((x,S)=>({...x,[i]:c.current[S]||Xo()})),[a,i])}}function Kc(t={}){const e=Se.useRef(void 0),r=Se.useRef(void 0),[n,i]=Se.useState({isDirty:!1,isValidating:!1,isLoading:kn(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:kn(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:n},t.defaultValues&&!kn(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...a}=c_e(t);e.current={...a,formState:n}}const s=e.current.control;return s._options=t,H0(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(a=>({...a,isReady:!0})),s._formState.isReady=!0,o},[s]),Se.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),Se.useEffect(()=>{t.mode&&(s._options.mode=t.mode),t.reValidateMode&&(s._options.reValidateMode=t.reValidateMode)},[s,t.mode,t.reValidateMode]),Se.useEffect(()=>{t.errors&&(s._setErrors(t.errors),s._focusError())},[s,t.errors]),Se.useEffect(()=>{t.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,t.shouldUnregister]),Se.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==n.isDirty&&s._subjects.state.next({isDirty:o})}},[s,n.isDirty]),Se.useEffect(()=>{var o;t.values&&!cs(t.values,r.current)?(s._reset(t.values,{keepFieldsRef:!0,...s._options.resetOptions}),!((o=s._options.resetOptions)===null||o===void 0)&&o.keepIsValid||s._setValid(),r.current=t.values,i(a=>({...a}))):s._resetDefaultValues()},[s,t.values]),Se.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=zie(n,s),e.current}const h_e=[{value:"email",label:"Email"},{value:"phone",label:"Phone"},{value:"mobile",label:"Mobile"},{value:"website",label:"Website"},{value:"calendar",label:"Calendar link"},{value:"linkedin",label:"LinkedIn"},{value:"twitter",label:"Twitter"},{value:"bluesky",label:"Bluesky"},{value:"threads",label:"Threads"},{value:"instagram",label:"Instagram"},{value:"facebook",label:"Facebook"},{value:"slack",label:"Slack"},{value:"other",label:"Other"}];function f_e({isOpen:t,onClose:e,onSubmit:r,isLoading:n,contactInfo:i=[]}){const{register:s,control:o,handleSubmit:a,reset:l,formState:{errors:c}}=Kc({defaultValues:{contacts:i.length>0?i.map(g=>({contact_type:g.contact_type||"",contact_label:g.contact_label||"",contact_value:g.contact_value||""})):[]}}),{fields:d,append:h,remove:f}=d_e({control:o,name:"contacts"});if(T.useEffect(()=>{t&&l({contacts:i.length>0?i.map(g=>({contact_type:g.contact_type||"",contact_label:g.contact_label||"",contact_value:g.contact_value||""})):[]})},[t,i,l]),!t)return null;const p=g=>{const v=g.contacts.filter(y=>y.contact_type&&y.contact_value);r(v)},m=()=>{h({contact_type:"",contact_label:"",contact_value:""})};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Edit contact details"}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:u.jsx(Mr,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:a(p),className:"flex flex-col flex-1 overflow-hidden",children:[u.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[d.length===0?u.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:'No contact details yet. Click "Add contact detail" to add one.'}):u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"hidden md:grid md:grid-cols-12 gap-2 text-xs font-medium text-gray-500 px-1",children:[u.jsx("div",{className:"col-span-3",children:"Type"}),u.jsx("div",{className:"col-span-3",children:"Label"}),u.jsx("div",{className:"col-span-5",children:"Value"}),u.jsx("div",{className:"col-span-1"})]}),d.map((g,v)=>u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-2 p-3 md:p-2 bg-gray-50 rounded-lg",children:[u.jsxs("div",{className:"md:col-span-3",children:[u.jsx("label",{className:"md:hidden text-xs font-medium text-gray-500 mb-1 block",children:"Type"}),u.jsxs("select",{...s(`contacts.${v}.contact_type`,{required:!0}),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n,children:[u.jsx("option",{value:"",children:"Select type..."}),h_e.map(y=>u.jsx("option",{value:y.value,children:y.label},y.value))]})]}),u.jsxs("div",{className:"md:col-span-3",children:[u.jsx("label",{className:"md:hidden text-xs font-medium text-gray-500 mb-1 block",children:"Label"}),u.jsx("input",{...s(`contacts.${v}.contact_label`),placeholder:"e.g., Work",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),u.jsxs("div",{className:"md:col-span-5",children:[u.jsx("label",{className:"md:hidden text-xs font-medium text-gray-500 mb-1 block",children:"Value"}),u.jsx("input",{...s(`contacts.${v}.contact_value`,{required:!0}),placeholder:"e.g., john@example.com",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),u.jsx("div",{className:"md:col-span-1 flex items-center justify-end md:justify-center",children:u.jsx("button",{type:"button",onClick:()=>f(v),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove",disabled:n,children:u.jsx(di,{className:"w-4 h-4"})})})]},g.id))]}),u.jsxs("button",{type:"button",onClick:m,className:"mt-4 w-full py-2 px-4 border-2 border-dashed border-gray-300 rounded-lg text-sm text-gray-600 hover:border-gray-400 hover:text-gray-700 transition-colors flex items-center justify-center gap-2",disabled:n,children:[u.jsx(lr,{className:"w-4 h-4"}),"Add contact detail"]})]}),u.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[u.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":"Save changes"})]})]})]})})}function Fn(t){return t?String(t).replace(/\\/g,"\\\\").replace(/;/g,"\\;").replace(/,/g,"\\,").replace(/\n/g,"\\n"):""}function p_e(t){return t?t.replace(/[^\d+]/g,""):""}function _q(t){if(!t)return"";const e=new Date(t);if(isNaN(e.getTime()))return"";const r=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${r}${n}${i}`}function m_e(t,e={}){if(!t||!Array.isArray(t))return{title:"",org:""};const r=t.find(i=>i.is_current);if(r){const i=r.company&&e[r.company]?e[r.company].name||e[r.company]:"";return{title:r.job_title||"",org:i}}const n=[...t].filter(i=>i.start_date).sort((i,s)=>new Date(s.start_date)-new Date(i.start_date));if(n.length>0){const i=n[0].company&&e[n[0].company]?e[n[0].company].name||e[n[0].company]:"";return{title:n[0].job_title||"",org:i}}return{title:"",org:""}}function g_e(t,e={}){if(!t)throw new Error("Person data is required");const{companyMap:r={},personDates:n=[]}=e,i=t.acf||{},s=[];s.push("BEGIN:VCARD"),s.push("VERSION:3.0");const o=i.first_name||"",a=i.last_name||"",l=t.name||`${o} ${a}`.trim()||"Unknown";s.push(`FN:${Fn(l)}`),s.push(`N:${Fn(a)};${Fn(o)};;;`),i.nickname&&s.push(`NICKNAME:${Fn(i.nickname)}`),i.contact_info&&Array.isArray(i.contact_info)&&i.contact_info.forEach(h=>{if(!h.contact_value)return;const f=Fn(h.contact_value),p=h.contact_label?Fn(h.contact_label):"";switch(h.contact_type){case"email":const m=p?`EMAIL;TYPE=INTERNET,${p.toUpperCase()}`:"EMAIL;TYPE=INTERNET";s.push(`${m}:${f}`);break;case"phone":case"mobile":const g=h.contact_type==="mobile"?"CELL":"VOICE",v=p?`TEL;TYPE=${g},${p.toUpperCase()}`:`TEL;TYPE=${g}`,y=p_e(h.contact_value);y&&s.push(`${v}:${y}`);break;case"website":case"linkedin":case"twitter":case"instagram":case"facebook":let b=h.contact_value;b.match(/^https?:\/\//i)||(b=`https://${b}`);const w=h.contact_type==="linkedin"?"PROFILE":"WORK",x=p?`URL;TYPE=${w},${p.toUpperCase()}`:`URL;TYPE=${w}`;s.push(`${x}:${Fn(b)}`);break}}),i.addresses&&Array.isArray(i.addresses)&&i.addresses.forEach(h=>{const f=h.address_label?`ADR;TYPE=${h.address_label.toUpperCase()}`:"ADR;TYPE=HOME",p=Fn(h.street||""),m=Fn(h.city||""),g=Fn(h.state||""),v=Fn(h.postal_code||""),y=Fn(h.country||"");(p||m||g||v||y)&&s.push(`${f}:;;${p};${m};${g};${v};${y}`)});const{title:c,org:d}=m_e(i.work_history,r);if(d&&s.push(`ORG:${Fn(d)}`),c&&s.push(`TITLE:${Fn(c)}`),n&&Array.isArray(n)){const h=n.find(f=>{const p=Array.isArray(f.date_type)?f.date_type[0]:f.date_type;return(p==null?void 0:p.toLowerCase())==="birthday"});if(h!=null&&h.date_value){const f=_q(h.date_value);f&&s.push(`BDAY:${f}`)}}if(t.thumbnail,t.modified){const h=_q(t.modified);h&&s.push(`REV:${h}T000000Z`)}return s.push("END:VCARD"),s.join(`\r
`)}function y_e(t,e={}){const{filename:r,...n}=e,i=g_e(t,n),s=new Blob([i],{type:"text/vcard;charset=utf-8"}),o=URL.createObjectURL(s),a=document.createElement("a");a.href=o,a.download=r||`${t.name||"contact"}.vcf`.replace(/[^a-z0-9.-]/gi,"_"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)}const v_e=({className:t})=>u.jsx("svg",{className:t,viewBox:"0 0 382 382",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",children:u.jsx("path",{d:`M347.445,0H34.555C15.471,0,0,15.471,0,34.555v312.889C0,366.529,15.471,382,34.555,382h312.889
      C366.529,382,382,366.529,382,347.444V34.555C382,15.471,366.529,0,347.445,0z M118.207,329.844c0,5.554-4.502,10.056-10.056,10.056
      H65.345c-5.554,0-10.056-4.502-10.056-10.056V150.403c0-5.554,4.502-10.056,10.056-10.056h42.806
      c5.554,0,10.056,4.502,10.056,10.056V329.844z M86.748,123.432c-22.459,0-40.666-18.207-40.666-40.666S64.289,42.1,86.748,42.1
      s40.666,18.207,40.666,40.666S109.208,123.432,86.748,123.432z M341.91,330.654c0,5.106-4.14,9.246-9.246,9.246H286.73
      c-5.106,0-9.246-4.14-9.246-9.246v-84.168c0-12.556,3.683-55.021-32.813-55.021c-28.309,0-34.051,29.066-35.204,42.11v97.079
      c0,5.106-4.139,9.246-9.246,9.246h-44.426c-5.106,0-9.246-4.14-9.246-9.246V149.593c0-5.106,4.14-9.246,9.246-9.246h44.426
      c5.106,0,9.246,4.14,9.246,9.246v15.655c10.497-15.753,26.097-27.912,59.312-27.912c73.552,0,73.131,68.716,73.131,106.472
      L341.91,330.654L341.91,330.654z`})});function Og(t){if(!t)return null;switch(t){case"male":return"";case"female":return"";case"non_binary":case"other":case"prefer_not_to_say":return"";default:return null}}function b_e(){var v$,b$,x$,w$,S$,_$,E$,N$,C$,k$,T$,O$,j$,P$,I$;const{id:t}=Do(),e=$n(),r=_t(),{data:n,isLoading:i,error:s}=sh(t),{data:o}=mpe(t),{data:a}=gpe(t),l=vpe(),c=xpe(),d=Npe(),h=Zp(),f=bpe(),p=yM(),m=wpe(),g=Fte(),v=_pe(),y=Spe(),b=Epe(),{data:w}=Vc(),{data:x=[]}=ft({queryKey:["investments",t],queryFn:async()=>(await Le.getInvestments(t)).data,enabled:!!t}),[S,_]=T.useState(!1),[E,N]=T.useState(""),[k,C]=T.useState(!1),O=T.useRef(null),[P,j]=T.useState(!1),[A,D]=T.useState(!1),[I,L]=T.useState(!1),[F,W]=T.useState(!1),[V,H]=T.useState(!1),[K,de]=T.useState(null),[be,Fe]=T.useState(null),[pe,Oe]=T.useState(null),[$e,ut]=T.useState(!1),[it,gt]=T.useState(null),{data:J}=ft({queryKey:["person-labels"],queryFn:async()=>(await He.getPersonLabels()).data}),Ee=J||[],Ge=(n==null?void 0:n.labels)||[],st=((w$=(x$=(b$=(v$=n==null?void 0:n._embedded)==null?void 0:v$["wp:term"])==null?void 0:b$.flat())==null?void 0:x$.filter($=>($==null?void 0:$.taxonomy)==="person_label"))==null?void 0:w$.map($=>$.id))||[],er=Ee.filter($=>!Ge.includes($.name));Hi((n==null?void 0:n.name)||((S$=n==null?void 0:n.title)==null?void 0:S$.rendered)||(n==null?void 0:n.title)||"Person");const Ce=a==null?void 0:a.find($=>{const G=Array.isArray($.date_type)?$.date_type[0]:$.date_type;return(G==null?void 0:G.toLowerCase())==="birthday"}),Je=Ce!=null&&Ce.date_value?new Date(Ce.date_value):null,Bt=(Ce==null?void 0:Ce.year_unknown)??!1,dt=a==null?void 0:a.find($=>{const G=Array.isArray($.date_type)?$.date_type[0]:$.date_type;return(G==null?void 0:G.toLowerCase())==="died"}),M=dt!=null&&dt.date_value?new Date(dt.date_value):null,q=(dt==null?void 0:dt.year_unknown)??!1,B=!!M,ie=Je&&!Bt?m1(B?M:new Date,Je):null,Z=a?[...a].sort(($,G)=>{const Y=$.date_value?new Date($.date_value):new Date(0),Me=G.date_value?new Date(G.date_value):new Date(0);return Y-Me}):[],X=async()=>{if(window.confirm("Are you sure you want to delete this person?"))try{await l.mutateAsync(t),e("/people")}catch($){console.error("Failed to delete person:",$),alert("Failed to delete person. Please try again.")}},ve=$=>{if(!$)return"";let G=$.replace(/[\u200B-\u200D\uFEFF\u200E\u200F\u202A-\u202E]/g,"");const Y=G.startsWith("+");return G=G.replace(/\D/g,""),Y?`+${G}`:G},Ye=async $=>{H(!0);try{const G=ua(n.acf,{contact_info:$});await h.mutateAsync({id:t,data:{acf:G}}),W(!1)}catch(G){console.error("Failed to save contacts:",G),alert("Failed to save contacts. Please try again.")}finally{H(!1)}},Ze=async $=>{var Me;if(!window.confirm("Are you sure you want to delete this address?"))return;const G=[...((Me=n.acf)==null?void 0:Me.addresses)||[]];G.splice($,1);const Y=ua(n.acf,{addresses:G});await h.mutateAsync({id:t,data:{acf:Y}})},tr=async $=>{var ai,Ks,$h,Wm,R$,M$;if(!window.confirm("Are you sure you want to delete this relationship?"))return;const G=(Ks=(ai=n.acf)==null?void 0:ai.relationships)==null?void 0:Ks[$];if(!G)return;const Y=G.related_person,Me=G.relationship_type;let Qe=!0;Y&&Me&&(Qe=window.confirm("Do you also want to delete the inverse relationship from the other person?"));let ht=null;if(!Qe&&Y&&Me)try{const[xs,Km]=await Promise.all([He.getPerson(Y,{_embed:!0}),He.getRelationshipTypes()]),$b={};Km.data.forEach(Dh=>{$b[Dh.id]=Dh});const Ei=$b[Me],Sl=($h=Ei==null?void 0:Ei.acf)==null?void 0:$h.inverse_relationship_type;if(Sl){const Fh=(((Wm=xs.data.acf)==null?void 0:Wm.relationships)||[]).find(Gs=>{var A$,$$;const Qae=typeof Gs.related_person=="object"?(A$=Gs.related_person)==null?void 0:A$.ID:Gs.related_person,Xae=typeof Gs.relationship_type=="object"?($$=Gs.relationship_type)==null?void 0:$$.term_id:Gs.relationship_type;return Qae===parseInt(t)&&Xae===Sl});Fh&&(ht={related_person:parseInt(t),relationship_type:Sl,relationship_label:Fh.relationship_label||""})}}catch(xs){console.error("Failed to fetch inverse relationship:",xs)}const vt=[...((R$=n.acf)==null?void 0:R$.relationships)||[]];vt.splice($,1);const Ho=ua(n.acf,{relationships:vt});if(await h.mutateAsync({id:t,data:{acf:Ho}}),!Qe&&ht&&Y){await new Promise(xs=>setTimeout(xs,500));try{const xs=await He.getPerson(Y,{_embed:!0}),Km=((M$=xs.data.acf)==null?void 0:M$.relationships)||[];if(!Km.some(Ei=>{var Fh,Gs;const Sl=typeof Ei.related_person=="object"?(Fh=Ei.related_person)==null?void 0:Fh.ID:Ei.related_person,Dh=typeof Ei.relationship_type=="object"?(Gs=Ei.relationship_type)==null?void 0:Gs.term_id:Ei.relationship_type;return Sl===ht.related_person&&Dh===ht.relationship_type})){const Ei=[...Km,ht],Sl=ua(xs.data.acf,{relationships:Ei});await He.updatePerson(Y,{acf:Sl})}}catch(xs){console.error("Failed to restore inverse relationship:",xs)}}r.invalidateQueries({queryKey:["person",t]}),Y&&r.invalidateQueries({queryKey:["person",Y]}),r.invalidateQueries({queryKey:["people"]})},Ne=async $=>{window.confirm("Are you sure you want to delete this important date?")&&await d.mutateAsync({dateId:$,personId:t})},se=async $=>{window.confirm("Are you sure you want to delete this note?")&&await c.mutateAsync({noteId:$,personId:t})},fe=async $=>{try{await f.mutateAsync({personId:t,content:$}),j(!1)}catch(G){console.error("Failed to create note:",G),alert("Failed to create note. Please try again.")}},he=async $=>{try{be?(await m.mutateAsync({activityId:be.id,data:$,personId:t}),Fe(null)):(await p.mutateAsync({personId:t,data:$}),pe&&(await v.mutateAsync({todoId:pe.id,data:{content:pe.content,due_date:pe.due_date,is_completed:!0},personId:t}),Oe(null),gt(null))),D(!1)}catch(G){console.error("Failed to save activity:",G),alert("Failed to save activity. Please try again.")}},ke=async $=>{try{await g.mutateAsync({personId:t,data:$}),L(!1),de(null)}catch(G){console.error("Failed to create todo:",G),alert("Failed to create todo. Please try again.")}},ot=async $=>{if(K)try{await v.mutateAsync({todoId:K.id,data:$,personId:t}),L(!1),de(null)}catch(G){console.error("Failed to update todo:",G),alert("Failed to update todo. Please try again.")}},oi=async $=>{if(!$.is_completed){Oe($),ut(!0);return}try{await v.mutateAsync({todoId:$.id,data:{content:$.content,due_date:$.due_date,is_completed:!1},personId:t})}catch(G){console.error("Failed to toggle todo:",G),alert("Failed to update todo. Please try again.")}},Xi=async()=>{if(pe)try{await v.mutateAsync({todoId:pe.id,data:{content:pe.content,due_date:pe.due_date,is_completed:!0},personId:t}),ut(!1),Oe(null)}catch($){console.error("Failed to complete todo:",$),alert("Failed to complete todo. Please try again.")}},fu=()=>{if(!pe)return;const $=new Date().toISOString().split("T")[0];gt({content:pe.content,activity_date:$,activity_type:"note",participants:[]}),ut(!1),D(!0)},kb=async $=>{window.confirm("Are you sure you want to delete this activity?")&&await y.mutateAsync({activityId:$,personId:t})},Vm=async $=>{window.confirm("Are you sure you want to delete this todo?")&&await b.mutateAsync({todoId:$,personId:t})},Tb=$=>{$.type==="todo"?(de($),L(!0)):$.type==="activity"&&(Fe($),D(!0))},Ob=$=>{$.type==="note"?se($.id):$.type==="activity"?kb($.id):$.type==="todo"&&Vm($.id)},jb=async $=>{var Me;if(!window.confirm("Are you sure you want to delete this work history item?"))return;const G=[...((Me=n.acf)==null?void 0:Me.work_history)||[]];G.splice($,1);const Y=ua(n.acf,{work_history:G});await h.mutateAsync({id:t,data:{acf:Y}})},Pb=async $=>{var Me,Qe,ht;const G=(ht=(Qe=(Me=n==null?void 0:n._embedded)==null?void 0:Me["wp:term"])==null?void 0:Qe.flat())==null?void 0:ht.find(vt=>(vt==null?void 0:vt.taxonomy)==="person_label"&&(vt==null?void 0:vt.name)===$);if(!G)return;const Y=st.filter(vt=>vt!==G.id);await h.mutateAsync({id:t,data:{person_label:Y}})},Um=async()=>{if(!E)return;const $=Ee.find(Y=>Y.id.toString()===E);if(!$)return;const G=[...st,$.id];await h.mutateAsync({id:t,data:{person_label:G}}),N(""),_(!1)},Ib=async $=>{var Y;const G=(Y=$.target.files)==null?void 0:Y[0];if(G){if(!G.type.startsWith("image/")){alert("Please select an image file");return}if(G.size>5*1024*1024){alert("Image size must be less than 5MB");return}C(!0);try{await Le.uploadPersonPhoto(t,G),r.invalidateQueries({queryKey:["person",t]}),r.invalidateQueries({queryKey:["people"]})}catch(Me){console.error("Failed to upload photo:",Me),alert("Failed to upload photo. Please try again.")}finally{C(!1),O.current&&(O.current.value="")}}},Rb=()=>{if(n)try{y_e(n,{companyMap:Mh,personDates:a||[]})}catch($){console.error("Failed to export vCard:",$),alert("Failed to export vCard. Please try again.")}},Hm=((E$=(_$=n==null?void 0:n.acf)==null?void 0:_$.work_history)==null?void 0:E$.map($=>$.company).filter(Boolean))||[],Mb=GP({queries:Hm.map($=>({queryKey:["company",$],queryFn:async()=>(await He.getCompany($,{_embed:!0})).data,enabled:!!$}))}),me=((C$=(N$=n==null?void 0:n.acf)==null?void 0:N$.relationships)==null?void 0:C$.map($=>$.related_person).filter(Boolean))||[],je=GP({queries:me.map($=>({queryKey:["person-dates",$],queryFn:async()=>(await Le.getPersonDates($)).data,enabled:!!$}))}),qe=T.useMemo(()=>{const $={};return je.forEach((G,Y)=>{if(G.data&&me[Y]){const Me=me[Y],Qe=G.data.find(ht=>{const vt=Array.isArray(ht.date_type)?ht.date_type[0]:ht.date_type;return(vt==null?void 0:vt.toLowerCase())==="birthday"});if(Qe!=null&&Qe.date_value){const ht=new Date(Qe.date_value);$[Me]=m1(new Date,ht)}else $[Me]=-1}}),$},[je,me]),Ht=T.useMemo(()=>{const $={};return je.forEach((G,Y)=>{if(G.data&&me[Y]){const Me=me[Y],Qe=G.data.some(ht=>{const vt=Array.isArray(ht.date_type)?ht.date_type[0]:ht.date_type;return(vt==null?void 0:vt.toLowerCase())==="died"});$[Me]=Qe}}),$},[je,me]),cn=T.useMemo(()=>{var $;return($=n==null?void 0:n.acf)!=null&&$.relationships?[...n.acf.relationships].sort((G,Y)=>{const Me=qe[G.related_person]??-1,Qe=qe[Y.related_person]??-1;return Me===-1&&Qe===-1?0:Me===-1?1:Qe===-1?-1:Qe-Me}):[]},[(k$=n==null?void 0:n.acf)==null?void 0:k$.relationships,qe]),Mh={};Mb.forEach(($,G)=>{var Y,Me,Qe,ht,vt,Ho,ai,Ks,$h;if($.data){const Wm=Hm[G];Mh[Wm]={name:sr($.data),logo:((Qe=(Me=(Y=$.data._embedded)==null?void 0:Y["wp:featuredmedia"])==null?void 0:Me[0])==null?void 0:Qe.source_url)||(($h=(Ks=(ai=(Ho=(vt=(ht=$.data._embedded)==null?void 0:ht["wp:featuredmedia"])==null?void 0:vt[0])==null?void 0:Ho.media_details)==null?void 0:ai.sizes)==null?void 0:Ks.thumbnail)==null?void 0:$h.source_url)||null}}});const wl=T.useMemo(()=>{var $;return($=n==null?void 0:n.acf)!=null&&$.work_history?[...n.acf.work_history].map((G,Y)=>({...G,originalIndex:Y})).sort((G,Y)=>{if(G.is_current&&!Y.is_current)return-1;if(!G.is_current&&Y.is_current)return 1;const Me=G.start_date?new Date(G.start_date):new Date(0);return(Y.start_date?new Date(Y.start_date):new Date(0))-Me}):[]},[(T$=n==null?void 0:n.acf)==null?void 0:T$.work_history]),Ah=T.useMemo(()=>o?o.filter(G=>G.type==="todo").sort((G,Y)=>{if(G.is_completed&&!Y.is_completed)return 1;if(!G.is_completed&&Y.is_completed)return-1;if(!G.is_completed&&!Y.is_completed){if(G.due_date&&Y.due_date)return new Date(G.due_date)-new Date(Y.due_date);if(G.due_date&&!Y.due_date)return-1;if(!G.due_date&&Y.due_date)return 1}return new Date(Y.created)-new Date(G.created)}):[],[o]);if(T.useEffect(()=>{(n==null?void 0:n.status)==="trash"&&e("/people",{replace:!0})},[n,e]),i)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(s||!n)return u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600",children:"Failed to load person."}),u.jsx(ge,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]});if(n.status==="trash")return null;const hr=n.acf||{},pu=["facebook","linkedin","instagram","twitter","bluesky","threads","slack","website"],Ab=((O$=hr.contact_info)==null?void 0:O$.filter($=>pu.includes($.contact_type)))||[],g$={linkedin:1,twitter:2,bluesky:3,threads:4,instagram:5,facebook:6,slack:7,website:8},y$=[...Ab].sort(($,G)=>{const Y=g$[$.contact_type]||99,Me=g$[G.contact_type]||99;return Y-Me}),Gae=$=>{switch($){case"facebook":return RSe;case"linkedin":return v_e;case"instagram":return ASe;case"twitter":return BSe;case"bluesky":return PSe;case"threads":return qSe;case"slack":return DSe;case"website":return ey;default:return ey}},Yae=$=>{switch($){case"facebook":return"text-[#1877F2]";case"linkedin":return"text-[#0077B7]";case"instagram":return"text-[#E4405F]";case"twitter":return"text-[#1DA1F2]";case"bluesky":return"text-[#00A8E8]";case"threads":return"text-[#000000]";case"slack":return"text-[#4A154B]";case"website":return"text-gray-600";default:return"text-gray-600"}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(ge,{to:"/people",className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(ps,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to people"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:Rb,className:"btn-secondary",children:[u.jsx(rI,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Export vCard"})]}),u.jsxs(ge,{to:`/people/${t}/edit`,className:"btn-secondary",children:[u.jsx(Pte,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Edit"})]}),u.jsxs("button",{onClick:X,className:"btn-danger",children:[u.jsx(di,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Delete"})]})]})]}),u.jsxs("div",{className:"card p-6 relative",children:[u.jsx("div",{className:"absolute top-4 right-4",children:u.jsx(ge,{to:`/people/${t}/family-tree`,className:"btn-secondary text-sm",children:"View family tree"})}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[u.jsxs("div",{className:"relative group",children:[n.thumbnail?u.jsx("img",{src:n.thumbnail,alt:n.name,className:"w-28 h-28 rounded-full object-cover"}):u.jsx("div",{className:"w-28 h-28 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-3xl font-medium text-gray-500",children:((j$=n.first_name)==null?void 0:j$[0])||"?"})}),u.jsx("div",{className:"absolute inset-0 rounded-full bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var $;return($=O.current)==null?void 0:$.click()},children:k?u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):u.jsx(Cf,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),u.jsx("input",{ref:O,type:"file",accept:"image/*",onChange:Ib,className:"hidden",disabled:k})]}),u.jsxs("div",{className:"flex-1 space-y-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("h1",{className:"text-2xl font-bold",children:[n.name,B&&u.jsx("span",{className:"ml-1 text-gray-500",children:""})]}),n.is_favorite&&u.jsx(Md,{className:"w-5 h-5 text-yellow-400 fill-current"})]}),hr.nickname&&u.jsxs("p",{className:"text-gray-500",children:['"',hr.nickname,'"']}),B&&M&&u.jsxs("p",{className:"text-gray-500 text-sm",children:[Og(hr.gender)&&u.jsx("span",{className:"mr-1",children:Og(hr.gender)}),"Died ",Nn(M,q?"MMMM d":"MMMM d, yyyy"),ie!==null&&` at age ${ie}`]}),!B&&ie!==null&&u.jsxs("p",{className:"text-gray-500 text-sm",children:[Og(hr.gender)&&u.jsx("span",{className:"mr-1",children:Og(hr.gender)}),ie," years old"]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[n.labels&&n.labels.length>0&&n.labels.map(($,G)=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 group/label",children:[$,u.jsx("button",{onClick:()=>Pb($),className:"opacity-0 group-hover/label:opacity-100 transition-opacity hover:bg-gray-200 rounded-full p-0.5",title:"Remove label",children:u.jsx(Mr,{className:"w-3 h-3"})})]},G)),S?u.jsxs("div",{className:"inline-flex items-center gap-2",children:[u.jsxs("select",{value:E,onChange:$=>N($.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1",autoFocus:!0,disabled:er.length===0,children:[u.jsx("option",{value:"",children:"Select a label..."}),er.map($=>u.jsx("option",{value:$.id,children:$.name},$.id))]}),u.jsx("button",{onClick:Um,disabled:!E,className:"text-xs px-2 py-1 bg-primary-600 text-white rounded hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"}),u.jsx("button",{onClick:()=>{_(!1),N("")},className:"text-xs px-2 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Cancel"})]}):er.length>0&&u.jsxs("button",{onClick:()=>_(!0),className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",children:[u.jsx(lr,{className:"w-3 h-3 mr-1"}),"Add label"]})]}),y$.length>0&&u.jsx("div",{className:"flex items-center gap-3 mt-4",children:y$.map(($,G)=>{const Y=Gae($.contact_type),Me=Yae($.contact_type);let Qe=$.contact_value;return Qe.match(/^https?:\/\//i)||(Qe=`https://${Qe}`),u.jsx("a",{href:Qe,target:"_blank",rel:"noopener noreferrer",className:`flex-shrink-0 hover:opacity-80 transition-opacity ${Me}`,title:`${$.contact_type.charAt(0).toUpperCase()+$.contact_type.slice(1)}: ${$.contact_value}`,children:u.jsx(Y,{className:"w-5 h-5"})},G)})})]})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[!B&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Contact information"}),u.jsxs("button",{onClick:()=>W(!0),className:"btn-secondary text-sm",children:[u.jsx(ra,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Edit"})]})]}),((P$=hr.contact_info)==null?void 0:P$.filter($=>!pu.includes($.contact_type)).length)>0?u.jsx("div",{className:"space-y-2",children:(()=>{const $={email:1,phone:2,mobile:2,calendar:3,other:4};return hr.contact_info.filter(Y=>!pu.includes(Y.contact_type)).map((Y,Me)=>({...Y,originalIndex:Me})).sort((Y,Me)=>{const Qe=$[Y.contact_type]||99,ht=$[Me.contact_type]||99;return Qe!==ht?Qe-ht:Y.originalIndex-Me.originalIndex}).map(Y=>{const Me=Y.contact_type==="email"?mM:Y.contact_type==="phone"||Y.contact_type==="mobile"?gM:Y.contact_type==="calendar"?mo:ey,Qe=Y.contact_type==="email",ht=Y.contact_type==="phone"||Y.contact_type==="mobile",vt=Y.contact_type==="mobile",Ho=Y.contact_type==="calendar";let ai=null,Ks=null;return Qe?ai=`mailto:${Y.contact_value}`:ht?ai=`tel:${ve(Y.contact_value)}`:Ho&&(ai=Y.contact_value,Ks="_blank"),u.jsx("div",{children:u.jsxs("div",{className:"flex items-center rounded-md -mx-2 px-2 py-1.5",children:[u.jsx(Me,{className:"w-4 h-4 text-gray-400 mr-3 flex-shrink-0"}),u.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[u.jsxs("span",{className:"text-sm text-gray-500",children:[Y.contact_label||Y.contact_type,": "]}),ai?u.jsx("a",{href:ai,target:Ks||void 0,rel:Ks==="_blank"?"noopener noreferrer":void 0,className:"text-primary-600 hover:text-primary-700 hover:underline",children:Y.contact_value}):u.jsx("span",{children:Y.contact_value}),vt&&u.jsx("a",{href:`https://wa.me/${ve(Y.contact_value)}`,target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0 hover:opacity-80 transition-opacity",title:"Open WhatsApp",children:u.jsx(E0,{className:"w-4 h-4 text-[#25D366]"})})]})]})},Y.originalIndex)})})()}):u.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No contact information yet. ",u.jsx("button",{onClick:()=>W(!0),className:"text-primary-600 hover:underline",children:"Add some"})]})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Events"}),u.jsxs(ge,{to:`/dates/new?person=${t}`,className:"btn-secondary text-sm",children:[u.jsx(lr,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add Important Date"})]})]}),Z.length>0?u.jsx("div",{className:"space-y-3",children:Z.map($=>{const G=Array.isArray($.date_type)?$.date_type[0]:$.date_type,Y=(G==null?void 0:G.toLowerCase())||"",Me=Y.includes("died"),Qe=Y.includes("wedding")||Y.includes("marriage")?Ufe:Y.includes("birthday")?Vfe:mo,ht=$.year_unknown?"MMMM d":"MMMM d, yyyy";return u.jsxs("div",{className:"flex items-start group",children:[u.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center mr-3",children:Me?u.jsx("span",{className:"text-gray-500 text-lg font-semibold",children:""}):u.jsx(Qe,{className:"w-4 h-4 text-gray-500"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm font-medium",children:$.title}),u.jsx("p",{className:"text-xs text-gray-500",children:$.date_value&&Nn(new Date($.date_value),ht)}),G&&u.jsx("p",{className:"text-xs text-gray-400 capitalize",children:G})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[u.jsx(ge,{to:`/dates/${$.id}/edit`,className:"p-1 hover:bg-gray-100 rounded",title:"Edit date",children:u.jsx(ra,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>Ne($.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete date",children:u.jsx(di,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},$.id)})}):u.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No important dates yet."})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Timeline"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>j(!0),className:"btn-secondary text-sm",children:[u.jsx(lr,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Note"})]}),u.jsxs("button",{onClick:()=>D(!0),className:"btn-secondary text-sm",children:[u.jsx(lr,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Activity"})]})]})]}),u.jsx(VSe,{timeline:o||[],onEdit:Tb,onDelete:Ob,onToggleTodo:oi,personId:t,allPeople:w||[]})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Work history"}),u.jsxs(ge,{to:`/people/${t}/work-history/new`,className:"btn-secondary text-sm",children:[u.jsx(lr,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add work history"})]})]}),(wl==null?void 0:wl.length)>0?u.jsx("div",{className:"space-y-4",children:wl.map(($,G)=>{const Y=$.company?Mh[$.company]:null,Me=$.originalIndex;return u.jsxs("div",{className:"flex items-start group",children:[Y!=null&&Y.logo?u.jsx("img",{src:Y.logo,alt:Y.name,className:"w-20 h-20 rounded-lg object-contain bg-white mr-3 flex-shrink-0"}):u.jsx("div",{className:"w-20 h-20 bg-white rounded-lg flex items-center justify-center mr-3 flex-shrink-0 border border-gray-200",children:u.jsx(Rr,{className:"w-10 h-10 text-gray-500"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-medium",children:$.job_title}),$.company&&Y&&u.jsx(ge,{to:`/companies/${$.company}`,className:"text-sm text-primary-600 hover:underline",children:Y.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:[$.start_date&&Nn(new Date($.start_date),"MMM yyyy")," - ",$.is_current?"Present":$.end_date?Nn(new Date($.end_date),"MMM yyyy"):""]}),$.description&&u.jsx("p",{className:"text-sm text-gray-600 mt-1",children:$.description})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx(ge,{to:`/people/${t}/work-history/${Me}/edit`,className:"p-1 hover:bg-gray-100 rounded",title:"Edit work history",children:u.jsx(ra,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>jb(Me),className:"p-1 hover:bg-red-50 rounded",title:"Delete work history",children:u.jsx(di,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},Me)})}):u.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No work history yet."})]}),x.length>0&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(Ly,{className:"w-5 h-5 mr-2"}),"Investments"]}),u.jsx("div",{className:"space-y-3",children:x.map($=>u.jsxs(ge,{to:`/companies/${$.id}`,className:"flex items-center p-2 rounded-lg hover:bg-gray-50 transition-colors group",children:[$.thumbnail?u.jsx("img",{src:$.thumbnail,alt:$.name,className:"w-12 h-12 rounded-lg object-contain bg-white border border-gray-200"}):u.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:u.jsx(Rr,{className:"w-6 h-6 text-gray-400"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-sm font-medium group-hover:text-primary-600",children:$.name}),$.industry&&u.jsx("p",{className:"text-xs text-gray-500",children:$.industry})]})]},$.id))})]}),u.jsx(USe,{isOpen:P,onClose:()=>j(!1),onSubmit:fe,isLoading:f.isPending}),u.jsx(sA,{isOpen:A,onClose:()=>{D(!1),Fe(null),Oe(null),gt(null)},onSubmit:he,isLoading:be?m.isPending:p.isPending,personId:t,initialData:it,activity:be}),u.jsx(vM,{isOpen:$e,onClose:()=>{ut(!1),Oe(null)},todo:pe,onComplete:Xi,onCompleteAsActivity:fu}),u.jsx(Die,{isOpen:I,onClose:()=>{L(!1),de(null)},onSubmit:K?ot:ke,isLoading:K?v.isPending:g.isPending,todo:K}),u.jsx(f_e,{isOpen:F,onClose:()=>W(!1),onSubmit:Ye,isLoading:V,contactInfo:hr.contact_info||[]})]}),u.jsxs("div",{className:"space-y-6",children:[(hr.how_we_met||hr.met_date)&&u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"font-semibold mb-3",children:"How we met"}),hr.met_date&&u.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[u.jsx(mo,{className:"w-4 h-4 inline mr-1"}),Nn(new Date(hr.met_date),"MMMM d, yyyy")]}),hr.how_we_met&&u.jsx("p",{className:"text-sm",children:hr.how_we_met})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("h2",{className:"font-semibold",children:"Todos"}),u.jsxs("button",{onClick:()=>{de(null),L(!0)},className:"btn-secondary text-sm",children:[u.jsx(lr,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add todo"})]})]}),Ah.length>0?u.jsx("div",{className:"space-y-2",children:Ah.map($=>{const G=tm($);return u.jsxs("div",{className:"flex items-start p-2 rounded hover:bg-gray-50 group",children:[u.jsx("button",{onClick:()=>oi($),className:"mt-0.5 mr-2 flex-shrink-0",title:$.is_completed?"Mark as incomplete":"Mark as complete",children:$.is_completed?u.jsx(eI,{className:"w-5 h-5 text-primary-600"}):u.jsx(Rd,{className:`w-5 h-5 ${G?"text-red-600":"text-gray-400"}`})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:`text-sm ${$.is_completed?"line-through text-gray-400":G?"text-red-600":""}`,children:$.content}),$.due_date&&u.jsxs("p",{className:`text-xs mt-0.5 ${G&&!$.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",Nn(new Date($.due_date),"MMM d, yyyy"),G&&!$.is_completed&&" (overdue)"]})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx("button",{onClick:()=>{de($),L(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit todo",children:u.jsx(ra,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>Vm($.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete todo",children:u.jsx(di,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},$.id)})}):u.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No todos yet."})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("h2",{className:"font-semibold",children:"Relationships"}),u.jsxs(ge,{to:`/people/${t}/relationship/new`,className:"btn-secondary text-sm",children:[u.jsx(lr,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add relationship"})]})]}),(cn==null?void 0:cn.length)>0?u.jsx("div",{className:"space-y-2",children:cn.map(($,G)=>{var Me,Qe,ht;const Y=((Qe=(Me=n==null?void 0:n.acf)==null?void 0:Me.relationships)==null?void 0:Qe.findIndex(vt=>vt.related_person===$.related_person&&vt.relationship_type===$.relationship_type))??G;return u.jsxs("div",{className:"flex items-center p-2 rounded hover:bg-gray-50 group",children:[u.jsxs(ge,{to:`/people/${$.related_person}`,className:"flex items-center flex-1 min-w-0",children:[$.person_thumbnail?u.jsx("img",{src:$.person_thumbnail,alt:Kn($.person_name)||"",className:"w-8 h-8 rounded-full object-cover mr-2"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full mr-2 flex items-center justify-center",children:u.jsx("span",{className:"text-xs font-medium text-gray-500",children:((ht=Kn($.person_name))==null?void 0:ht[0])||"?"})}),u.jsxs("div",{children:[u.jsxs("p",{className:"text-sm font-medium",children:[Kn($.person_name)||`Person #${$.related_person}`,Ht[$.related_person]&&u.jsx("span",{className:"text-gray-400 ml-1",title:"Deceased",children:""})]}),u.jsx("p",{className:"text-xs text-gray-500",children:Kn($.relationship_name||$.relationship_label)})]})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx(ge,{to:`/people/${t}/relationship/${Y}/edit`,className:"p-1 hover:bg-gray-100 rounded",title:"Edit relationship",children:u.jsx(ra,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>tr(Y),className:"p-1 hover:bg-red-50 rounded",title:"Delete relationship",children:u.jsx(di,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},G)})}):u.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No relationships yet."})]}),!B&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-semibold",children:"Addresses"}),u.jsxs(ge,{to:`/people/${t}/address/new`,className:"btn-secondary text-sm",children:[u.jsx(lr,{className:"w-4 h-4 md:mr-1"}),u.jsx("span",{className:"hidden md:inline",children:"Add address"})]})]}),((I$=hr.addresses)==null?void 0:I$.length)>0?u.jsx("div",{className:"space-y-4",children:hr.addresses.map(($,G)=>{const Y=[];$.street&&Y.push($.street);const Me=[$.postal_code,$.city].filter(Boolean).join(" ");Me&&Y.push(Me);const Qe=[$.state,$.country].filter(Boolean).join(", ");Qe&&Y.push(Qe);const ht=[$.street,$.postal_code,$.city,$.state,$.country].filter(Boolean).join(", "),vt=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(ht)}`;return u.jsx("div",{className:"group",children:u.jsxs("div",{className:"flex items-start rounded-md -mx-2 px-2 py-1.5 group-hover:bg-gray-50 transition-colors",children:[u.jsx(Xfe,{className:"w-4 h-4 text-gray-400 mr-3 mt-0.5 flex-shrink-0"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[$.address_label&&u.jsx("span",{className:"text-sm text-gray-500 block mb-1",children:$.address_label}),u.jsx("a",{href:vt,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-700 hover:underline text-sm",children:Y.map((Ho,ai)=>u.jsx("span",{className:"block",children:Ho},ai))})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx(ge,{to:`/people/${t}/address/${G}/edit`,className:"p-1 hover:bg-gray-100 rounded",title:"Edit address",children:u.jsx(ra,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>Ze(G),className:"p-1 hover:bg-red-50 rounded",title:"Delete address",children:u.jsx(di,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})},G)})}):u.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No addresses yet."})]})]})]})]})}function Eq(){var D;const{id:t}=Do(),e=$n(),[r]=y0(),n=!!t,i=r.get("returnTo"),s=r.get("sourcePersonId"),{data:o,isLoading:a}=sh(t),l=ype(),c=Zp(),{data:d=[]}=ft({queryKey:["date-types"],queryFn:async()=>(await He.getDateTypes()).data}),h=d.find(I=>I.slug==="birthday"||I.name.toLowerCase()==="birthday"),[f,p]=T.useState(!1),[m,g]=T.useState(null),[v,y]=T.useState(null),b=mt({mutationFn:async I=>{const L=new FormData;return L.append("file",I),(await ce.post("/prm/v1/import/vcard/parse",L,{headers:{"Content-Type":"multipart/form-data"}})).data}}),{register:w,handleSubmit:x,reset:S,watch:_,formState:{errors:E,isSubmitting:N}}=Kc({defaultValues:{first_name:"",last_name:"",nickname:"",gender:"",email:"",phone:"",phone_type:"mobile",how_we_met:"",is_favorite:!1,birthday:""}});_("phone"),T.useEffect(()=>{var I,L,F,W,V,H,K,de,be,Fe;if(o){const pe=(L=(I=o.acf)==null?void 0:I.contact_info)==null?void 0:L.find(gt=>gt.contact_type==="email"),Oe=(pe==null?void 0:pe.contact_value)||"",$e=(W=(F=o.acf)==null?void 0:F.contact_info)==null?void 0:W.find(gt=>gt.contact_type==="phone"||gt.contact_type==="mobile"),ut=($e==null?void 0:$e.contact_value)||"",it=($e==null?void 0:$e.contact_type)||"mobile";S({first_name:((V=o.acf)==null?void 0:V.first_name)||"",last_name:((H=o.acf)==null?void 0:H.last_name)||"",nickname:((K=o.acf)==null?void 0:K.nickname)||"",gender:((de=o.acf)==null?void 0:de.gender)||"",email:Oe,phone:ut,phone_type:it,how_we_met:((be=o.acf)==null?void 0:be.how_we_met)||"",is_favorite:((Fe=o.acf)==null?void 0:Fe.is_favorite)||!1,birthday:""})}},[o,S]),Hi(n&&o?`Edit ${((D=o.title)==null?void 0:D.rendered)||o.title||"person"}`:"New person");const k=T.useCallback(I=>{I.preventDefault(),I.stopPropagation(),I.type==="dragenter"||I.type==="dragover"?p(!0):I.type==="dragleave"&&p(!1)},[]),C=T.useCallback(I=>{I.preventDefault(),I.stopPropagation(),p(!1),y(null),I.dataTransfer.files&&I.dataTransfer.files[0]&&O(I.dataTransfer.files[0])},[]),O=I=>{const L=I.name.split(".").pop().toLowerCase();if(L!=="vcf"&&L!=="vcard"){y("Please select a vCard file (.vcf)");return}g(I),b.mutate(I,{onSuccess:F=>{S({first_name:F.first_name||"",last_name:F.last_name||"",nickname:F.nickname||"",gender:"",email:F.email||"",phone:F.phone||"",phone_type:F.phone_type||"mobile",how_we_met:F.note||"",is_favorite:!1,birthday:F.birthday||""}),F.contact_count>1&&y(`Note: File contains ${F.contact_count} contacts. Only the first contact was loaded.`)},onError:F=>{var W,V;y(((V=(W=F.response)==null?void 0:W.data)==null?void 0:V.message)||"Failed to parse vCard file"),g(null)}})},P=I=>{y(null),I.target.files&&I.target.files[0]&&O(I.target.files[0])},j=()=>{g(null),y(null),b.reset()},A=async I=>{try{const F=`${I.first_name||""} ${I.last_name||""}`.trim()||"Unnamed Person",W={title:F,status:"publish",acf:{first_name:I.first_name,last_name:I.last_name,nickname:I.nickname,gender:I.gender||null,how_we_met:I.how_we_met,is_favorite:I.is_favorite}};if(!n&&(I.email||I.phone)){const V=[];I.email&&V.push({contact_type:"email",contact_value:I.email,contact_label:""}),I.phone&&V.push({contact_type:I.phone_type||"mobile",contact_value:I.phone,contact_label:""}),W.acf.contact_info=V}if(n)W.title=F,await c.mutateAsync({id:t,data:W}),e(`/people/${t}`);else{const H=(await l.mutateAsync(W)).data.id;if(I.email)try{await Le.sideloadGravatar(H,I.email)}catch(K){console.error("Failed to load Gravatar:",K)}if(I.birthday&&h)try{const K=I.first_name||"Person";await He.createDate({title:`${K}'s Birthday`,status:"publish",date_type:[h.id],acf:{date_value:I.birthday,is_recurring:!0,related_people:[H],reminder_days_before:7}})}catch(K){console.error("Failed to create birthday:",K)}e(i==="relationship"&&s?`/people/${s}/relationship/new?newPersonId=${H}`:`/people/${H}`)}}catch(L){console.error("Failed to save person:",L)}};return n&&a?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:i==="relationship"&&s?u.jsxs(ge,{to:`/people/${s}/relationship/new`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(ps,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to add relationship"})]}):u.jsxs(ge,{to:"/people",className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(ps,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to people"})]})}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h1",{className:"text-xl font-bold mb-6",children:n?"Edit person":"Add new person"}),!n&&u.jsxs("div",{className:"mb-6",children:[u.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-4 text-center transition-colors ${f?"border-primary-500 bg-primary-50":m&&!v?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:k,onDragLeave:k,onDragOver:k,onDrop:C,children:[u.jsx("input",{type:"file",accept:".vcf,.vcard",onChange:P,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),b.isPending?u.jsxs("div",{className:"flex items-center justify-center gap-2 py-2",children:[u.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-primary-600"}),u.jsx("span",{className:"text-sm text-gray-600",children:"Parsing vCard..."})]}):m&&!v?u.jsxs("div",{className:"flex items-center justify-center gap-2 py-2",children:[u.jsx(Jp,{className:"h-5 w-5 text-green-600"}),u.jsxs("span",{className:"text-sm text-green-700",children:["Loaded from ",m.name]}),u.jsx("button",{type:"button",onClick:I=>{I.preventDefault(),I.stopPropagation(),j()},className:"ml-2 p-1 hover:bg-green-100 rounded",children:u.jsx(Mr,{className:"h-4 w-4 text-green-600"})})]}):u.jsxs("div",{className:"flex items-center justify-center gap-2 py-2",children:[u.jsx(Ec,{className:"h-5 w-5 text-gray-400"}),u.jsxs("span",{className:"text-sm text-gray-600",children:["Drop a vCard file here to import, or ",u.jsx("span",{className:"text-primary-600",children:"browse"})]})]})]}),v&&u.jsxs("div",{className:"mt-2 flex items-start gap-2 text-sm text-amber-700 bg-amber-50 rounded-lg p-2",children:[u.jsx(Po,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),u.jsx("span",{children:v})]})]}),u.jsxs("form",{onSubmit:x(A),className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"First name *"}),u.jsx("input",{...w("first_name",{required:"First name is required"}),className:"input",placeholder:"John"}),E.first_name&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:E.first_name.message})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Last name"}),u.jsx("input",{...w("last_name"),className:"input",placeholder:"Doe"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Nickname"}),u.jsx("input",{...w("nickname"),className:"input",placeholder:"Johnny"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Gender"}),u.jsxs("select",{...w("gender"),className:"input",children:[u.jsx("option",{value:"",children:"Select gender..."}),u.jsx("option",{value:"male",children:"Male"}),u.jsx("option",{value:"female",children:"Female"}),u.jsx("option",{value:"non_binary",children:"Non-binary"}),u.jsx("option",{value:"other",children:"Other"}),u.jsx("option",{value:"prefer_not_to_say",children:"Prefer not to say"})]})]}),!n&&u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Email"}),u.jsx("input",{type:"email",...w("email"),className:"input",placeholder:"john@example.com"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: If a Gravatar is associated with this email, it will be automatically set as the profile photo"})]}),!n&&u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Phone"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("select",{...w("phone_type"),className:"input w-28",children:[u.jsx("option",{value:"mobile",children:"Mobile"}),u.jsx("option",{value:"phone",children:"Phone"})]}),u.jsx("input",{type:"tel",...w("phone"),className:"input flex-1",placeholder:"+1 555 123 4567"})]})]}),!n&&u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Birthday"}),u.jsx("input",{type:"date",...w("birthday"),className:"input"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Set their birthday when creating a new person"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"How we met"}),u.jsx("textarea",{...w("how_we_met"),className:"input",rows:4,placeholder:"We met at..."})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:"is_favorite",...w("is_favorite"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),u.jsx("label",{htmlFor:"is_favorite",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Mark as favorite"})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i==="relationship"&&s?u.jsx(ge,{to:`/people/${s}/relationship/new`,className:"btn-secondary",children:"Cancel"}):u.jsx(ge,{to:"/people",className:"btn-secondary",children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary",disabled:N,children:[N?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):u.jsx(el,{className:"w-4 h-4 mr-2"}),n?"Save changes":"Create person"]})]})]})]})]})}function x_e({value:t,onChange:e,companies:r,isLoading:n}){return u.jsxs("select",{value:t||"",onChange:i=>e(i.target.value?parseInt(i.target.value,10):null),className:"input",disabled:n,children:[u.jsx("option",{value:"",children:"Select an organization..."}),r.map(i=>{var s;return u.jsx("option",{value:i.id,children:((s=i.title)==null?void 0:s.rendered)||i.title},i.id)})]})}function Nq(){var w,x;const{personId:t,index:e}=Do(),r=$n();_t();const n=parseInt(e,10),i=!isNaN(n),{data:s,isLoading:o}=sh(t),a=Zp(),{data:l=[],isLoading:c}=ft({queryKey:["companies","all"],queryFn:async()=>(await He.getCompanies({per_page:100})).data}),d=T.useMemo(()=>[...l].sort((S,_)=>{var k,C;const E=(((k=S.title)==null?void 0:k.rendered)||S.title||"").toLowerCase(),N=(((C=_.title)==null?void 0:C.rendered)||_.title||"").toLowerCase();return E.localeCompare(N)}),[l]),{register:h,handleSubmit:f,reset:p,watch:m,control:g,formState:{errors:v,isSubmitting:y}}=Kc({defaultValues:{company:null,job_title:"",description:"",start_date:"",end_date:"",is_current:!1}});T.useEffect(()=>{var S;if(s&&i){const E=(((S=s.acf)==null?void 0:S.work_history)||[])[n];E&&p({company:E.company||null,job_title:E.job_title||"",description:E.description||"",start_date:E.start_date||"",end_date:E.end_date||"",is_current:E.is_current||!1})}},[s,n,i,p]),Hi(i?`Edit work history - ${((w=s==null?void 0:s.title)==null?void 0:w.rendered)||(s==null?void 0:s.title)||"person"}`:`Add work history - ${((x=s==null?void 0:s.title)==null?void 0:x.rendered)||(s==null?void 0:s.title)||"person"}`);const b=async S=>{var _;try{const E=[...((_=s.acf)==null?void 0:_.work_history)||[]],N={company:S.company||null,job_title:S.job_title||"",description:S.description||"",start_date:S.start_date||"",end_date:S.end_date||"",is_current:S.is_current||!1};i?E[n]=N:E.push(N);const k=ua(s.acf,{work_history:E});await a.mutateAsync({id:t,data:{acf:k}}),r(`/people/${t}`)}catch(E){console.error("Failed to save work history:",E)}};return m("is_current"),o?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):s?u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs(ge,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(ps,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to person"})]})}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h1",{className:"text-xl font-bold mb-6",children:i?"Edit work history":"Add work history"}),u.jsxs("form",{onSubmit:f(b),className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Organization"}),u.jsx($v,{name:"company",control:g,render:({field:S})=>u.jsx(x_e,{value:S.value,onChange:S.onChange,companies:d,isLoading:c})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Job title"}),u.jsx("input",{...h("job_title"),className:"input",placeholder:"e.g., Software Engineer"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Description"}),u.jsx("textarea",{...h("description"),className:"input",rows:4,placeholder:"Job description, responsibilities, achievements..."})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Start date"}),u.jsx("input",{type:"date",...h("start_date"),className:"input"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"End date"}),u.jsx("input",{type:"date",...h("end_date"),className:"input"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Set a future end date to automatically mark as former when it passes"})]})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:"is_current",...h("is_current"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),u.jsx("label",{htmlFor:"is_current",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Currently works here"})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[u.jsx(ge,{to:`/people/${t}`,className:"btn-secondary",children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary",disabled:y,children:[y?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):u.jsx(el,{className:"w-4 h-4 mr-2"}),i?"Save changes":"Add work history"]})]})]})]})]}):u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600",children:"Failed to load person."}),u.jsx(ge,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]})}function w_e({value:t,onChange:e,people:r,isLoading:n,excludePersonId:i}){const[s,o]=T.useState(""),[a,l]=T.useState(!1),c=T.useRef(null),d=T.useRef(null),h=T.useMemo(()=>r.filter(b=>b.id!==i).sort((b,w)=>{var _,E;const x=(b.first_name||((_=b.acf)==null?void 0:_.first_name)||"").toLowerCase(),S=(w.first_name||((E=w.acf)==null?void 0:E.first_name)||"").toLowerCase();return x<S?-1:x>S?1:0}),[r,i]),f=T.useMemo(()=>{if(!s)return h.slice(0,10);const y=s.toLowerCase();return h.filter(b=>{var _,E;const w=rc(b).toLowerCase(),x=(b.first_name||((_=b.acf)==null?void 0:_.first_name)||"").toLowerCase(),S=(b.last_name||((E=b.acf)==null?void 0:E.last_name)||"").toLowerCase();return w.includes(y)||x.includes(y)||S.includes(y)}).slice(0,10)},[h,s]),p=T.useMemo(()=>h.find(y=>y.id===t),[h,t]);T.useEffect(()=>{const y=b=>{d.current&&!d.current.contains(b.target)&&c.current&&!c.current.contains(b.target)&&l(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const m=y=>{e(y),o(""),l(!1)},g=()=>{e(null),o(""),l(!1)},v=p?rc(p):"";return u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"relative",children:p&&!a?u.jsxs("div",{className:"flex items-center justify-between input pr-8 cursor-text",onClick:()=>l(!0),children:[u.jsx("span",{children:v}),u.jsx("button",{type:"button",onClick:y=>{y.stopPropagation(),g()},className:"absolute right-2 text-gray-400 hover:text-gray-600",children:u.jsx(Mr,{className:"w-4 h-4"})})]}):u.jsx("input",{ref:c,type:"text",value:s,onChange:y=>{o(y.target.value),l(!0)},onFocus:()=>l(!0),placeholder:"Search for a person...",className:"input",disabled:n})}),a&&(s||!p)&&u.jsx("div",{ref:d,className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:f.length>0?f.map(y=>u.jsx("button",{type:"button",onClick:()=>m(y.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t===y.id?"bg-primary-50":""}`,children:rc(y)},y.id)):u.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No people found"})})]})}function Cq(){var _,E;const{personId:t,index:e}=Do(),r=$n(),[n]=y0(),i=_t(),s=parseInt(e,10),o=!isNaN(s),{data:a,isLoading:l}=sh(t),c=Zp(),{data:d=[],isLoading:h}=Vc(),{data:f=[],isLoading:p}=ft({queryKey:["relationship-types"],queryFn:async()=>(await He.getRelationshipTypes()).data}),{register:m,handleSubmit:g,reset:v,control:y,setValue:b,formState:{errors:w,isSubmitting:x}}=Kc({defaultValues:{related_person:null,relationship_type:"",relationship_label:""}});T.useEffect(()=>{const N=n.get("newPersonId");if(N&&!o&&!h){const k=parseInt(N,10);if(!isNaN(k))if(d.some(O=>O.id===k)){b("related_person",k);const O=new URLSearchParams(n);O.delete("newPersonId"),r({search:O.toString()},{replace:!0})}else(async()=>{try{await i.invalidateQueries({queryKey:["people"]});const{data:P=[]}=await i.refetchQueries({queryKey:["people"]});P.some(D=>D.id===k)&&b("related_person",k);const A=new URLSearchParams(n);A.delete("newPersonId"),r({search:A.toString()},{replace:!0})}catch(P){console.error("Failed to load new person:",P);const j=new URLSearchParams(n);j.delete("newPersonId"),r({search:j.toString()},{replace:!0})}})()}},[n,o,h,d,b,r,i]),T.useEffect(()=>{var N;if(a&&o){const C=(((N=a.acf)==null?void 0:N.relationships)||[])[s];C&&v({related_person:C.related_person||null,relationship_type:C.relationship_type?String(C.relationship_type):"",relationship_label:C.relationship_label||""})}},[a,s,o,v]),Hi(o?`Edit relationship - ${((_=a==null?void 0:a.title)==null?void 0:_.rendered)||(a==null?void 0:a.title)||"person"}`:`Add relationship - ${((E=a==null?void 0:a.title)==null?void 0:E.rendered)||(a==null?void 0:a.title)||"person"}`);const S=async N=>{var k;try{const C=[...((k=a.acf)==null?void 0:k.relationships)||[]],O={related_person:N.related_person||null,relationship_type:N.relationship_type||null,relationship_label:N.relationship_label||""};o?C[s]=O:C.push(O);const P=ua(a.acf,{relationships:C});await c.mutateAsync({id:t,data:{acf:P}}),r(`/people/${t}`)}catch(C){console.error("Failed to save relationship:",C)}};return l?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):a?u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs(ge,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(ps,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to person"})]})}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h1",{className:"text-xl font-bold mb-6",children:o?"Edit relationship":"Add relationship"}),u.jsxs("form",{onSubmit:g(S),className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Related person *"}),u.jsx($v,{name:"related_person",control:y,rules:{required:"Please select a person"},render:({field:N})=>u.jsx(w_e,{value:N.value,onChange:N.onChange,people:d,isLoading:h,excludePersonId:parseInt(t,10)})}),w.related_person&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:w.related_person.message}),!o&&u.jsx("div",{className:"mt-2",children:u.jsxs(ge,{to:`/people/new?returnTo=relationship&sourcePersonId=${t}`,className:"inline-flex items-center gap-1 text-sm text-primary-600 hover:text-primary-700",children:[u.jsx(lr,{className:"w-4 h-4"}),"Add new person"]})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Relationship type"}),u.jsxs("select",{...m("relationship_type",{setValueAs:N=>N?parseInt(N,10):null}),className:"input",disabled:p,children:[u.jsx("option",{value:"",children:"Select a type..."}),f.map(N=>u.jsx("option",{value:N.id,children:N.name},N.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Custom label"}),u.jsx("input",{...m("relationship_label"),className:"input",placeholder:"e.g., Brother-in-law"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Override the relationship type with a custom label"})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[u.jsx(ge,{to:`/people/${t}`,className:"btn-secondary",children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary",disabled:x,children:[x?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):u.jsx(el,{className:"w-4 h-4 mr-2"}),o?"Save changes":"Add relationship"]})]})]})]})]}):u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600",children:"Failed to load person."}),u.jsx(ge,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]})}function kq(){var m,g;const{personId:t,index:e}=Do(),r=$n(),n=parseInt(e,10),i=!isNaN(n),{data:s,isLoading:o}=sh(t),a=Zp(),{register:l,handleSubmit:c,reset:d,formState:{errors:h,isSubmitting:f}}=Kc({defaultValues:{address_label:"",street:"",postal_code:"",city:"",state:"",country:""}});T.useEffect(()=>{var v;if(s&&i){const b=(((v=s.acf)==null?void 0:v.addresses)||[])[n];b&&d({address_label:b.address_label||"",street:b.street||"",postal_code:b.postal_code||"",city:b.city||"",state:b.state||"",country:b.country||""})}},[s,n,i,d]),Hi(i?`Edit address - ${((m=s==null?void 0:s.title)==null?void 0:m.rendered)||(s==null?void 0:s.title)||"person"}`:`Add address - ${((g=s==null?void 0:s.title)==null?void 0:g.rendered)||(s==null?void 0:s.title)||"person"}`);const p=async v=>{var y;try{const b=[...((y=s.acf)==null?void 0:y.addresses)||[]],w={address_label:v.address_label||"",street:v.street||"",postal_code:v.postal_code||"",city:v.city||"",state:v.state||"",country:v.country||""};i?b[n]=w:b.push(w);const x=ua(s.acf,{addresses:b});await a.mutateAsync({id:t,data:{acf:x}}),r(`/people/${t}`)}catch(b){console.error("Failed to save address:",b)}};return o?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):s?u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs(ge,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(ps,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to person"})]})}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h1",{className:"text-xl font-bold mb-6",children:i?"Edit address":"Add address"}),u.jsxs("form",{onSubmit:c(p),className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Label"}),u.jsx("input",{...l("address_label"),className:"input",placeholder:"e.g., Home, Work"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Street"}),u.jsx("input",{...l("street"),className:"input",placeholder:"e.g., 123 Main Street"})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Postal code"}),u.jsx("input",{...l("postal_code"),className:"input",placeholder:"e.g., 12345"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"City"}),u.jsx("input",{...l("city"),className:"input",placeholder:"e.g., Amsterdam"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"State/Province"}),u.jsx("input",{...l("state"),className:"input",placeholder:"e.g., North Holland"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Country"}),u.jsx("input",{...l("country"),className:"input",placeholder:"e.g., Netherlands"})]})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[u.jsx(ge,{to:`/people/${t}`,className:"btn-secondary",children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary",disabled:f,children:[f?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):u.jsx(el,{className:"w-4 h-4 mr-2"}),i?"Save changes":"Add address"]})]})]})]})]}):u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600",children:"Failed to load person."}),u.jsx(ge,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]})}function S_e({company:t}){var e,r,n,i,s;return u.jsx(ge,{to:`/companies/${t.id}`,className:"card p-4 hover:shadow-md transition-shadow",children:u.jsxs("div",{className:"flex items-start",children:[(n=(r=(e=t._embedded)==null?void 0:e["wp:featuredmedia"])==null?void 0:r[0])!=null&&n.source_url?u.jsx("img",{src:t._embedded["wp:featuredmedia"][0].source_url,alt:sr(t),className:"w-12 h-12 rounded-lg object-contain bg-white"}):u.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:u.jsx(Rr,{className:"w-6 h-6 text-gray-400"})}),u.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[u.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:sr(t)}),((i=t.acf)==null?void 0:i.industry)&&u.jsx("p",{className:"text-sm text-gray-500",children:t.acf.industry}),((s=t.acf)==null?void 0:s.website)&&u.jsx("p",{className:"text-xs text-primary-600 truncate",children:t.acf.website})]})]})})}function __e(){const[t,e]=T.useState(""),{data:r,isLoading:n,error:i}=ft({queryKey:["companies",t],queryFn:async()=>(await He.getCompanies({search:t,per_page:100,_embed:!0})).data}),s=T.useMemo(()=>r?[...r].sort((o,a)=>{var d,h;const l=(((d=o.title)==null?void 0:d.rendered)||o.title||"").toLowerCase(),c=(((h=a.title)==null?void 0:h.rendered)||a.title||"").toLowerCase();return l.localeCompare(c)}):[],[r]);return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"relative flex-1 max-w-md",children:[u.jsx(_c,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{type:"search",placeholder:"Search organizations...",value:t,onChange:o=>e(o.target.value),className:"input pl-9"})]}),u.jsxs(ge,{to:"/companies/new",className:"btn-primary",children:[u.jsx(lr,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add organization"})]})]}),n&&u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),i&&u.jsx("div",{className:"card p-6 text-center",children:u.jsx("p",{className:"text-red-600",children:"Failed to load organizations."})}),!n&&!i&&(s==null?void 0:s.length)===0&&u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(Rr,{className:"w-6 h-6 text-gray-400"})}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No organizations found"}),u.jsx("p",{className:"text-gray-500 mb-4",children:t?"Try a different search.":"Add your first organization."}),!t&&u.jsxs(ge,{to:"/companies/new",className:"btn-primary",children:[u.jsx(lr,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add organization"})]})]}),!n&&!i&&(s==null?void 0:s.length)>0&&u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(o=>u.jsx(S_e,{company:o},o.id))})]})}function E_e(){var w,x,S,_,E,N,k;const{id:t}=Do(),e=$n(),r=_t(),n=T.useRef(null),[i,s]=T.useState(!1),{data:o,isLoading:a,error:l}=ft({queryKey:["company",t],queryFn:async()=>(await He.getCompany(t,{_embed:!0})).data}),{data:c}=ft({queryKey:["company-people",t],queryFn:async()=>(await Le.getCompanyPeople(t)).data}),{data:d}=ft({queryKey:["company",o==null?void 0:o.parent],queryFn:async()=>(await He.getCompany(o.parent,{_embed:!0})).data,enabled:!!(o!=null&&o.parent)}),{data:h=[]}=ft({queryKey:["company-children",t],queryFn:async()=>(await He.getCompanies({parent:t,per_page:100,_embed:!0})).data}),f=((w=o==null?void 0:o.acf)==null?void 0:w.investors)||[],{data:p=[]}=ft({queryKey:["company-investors",t,f],queryFn:async()=>{if(!f.length)return[];const[C,O]=await Promise.all([He.getPeople({per_page:100,include:f.join(","),_embed:!0}),He.getCompanies({per_page:100,include:f.join(","),_embed:!0})]),P=(C.data||[]).map(D=>{var I,L,F,W;return{id:D.id,type:"person",name:Kn(((I=D.title)==null?void 0:I.rendered)||""),thumbnail:(W=(F=(L=D._embedded)==null?void 0:L["wp:featuredmedia"])==null?void 0:F[0])==null?void 0:W.source_url}}),j=(O.data||[]).map(D=>{var I,L,F;return{id:D.id,type:"company",name:sr(D),thumbnail:(F=(L=(I=D._embedded)==null?void 0:I["wp:featuredmedia"])==null?void 0:L[0])==null?void 0:F.source_url}}),A=[...P,...j];return f.map(D=>A.find(I=>I.id===D)).filter(Boolean)},enabled:f.length>0}),{data:m=[]}=ft({queryKey:["investments",t],queryFn:async()=>(await Le.getInvestments(t)).data,enabled:!!t}),g=mt({mutationFn:()=>He.deleteCompany(t,{force:!0}),onSuccess:()=>{r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["dashboard"]}),e("/companies")}});Hi(sr(o)||"Organization"),T.useEffect(()=>{(o==null?void 0:o.status)==="trash"&&e("/companies",{replace:!0})},[o,e]);const v=async()=>{if(window.confirm("Are you sure you want to delete this organization?"))try{await g.mutateAsync()}catch(C){console.error("Failed to delete company:",C),alert("Failed to delete organization. Please try again.")}},y=async C=>{var P;const O=(P=C.target.files)==null?void 0:P[0];if(O){if(!O.type.startsWith("image/")){alert("Please select an image file");return}if(O.size>5*1024*1024){alert("Image size must be less than 5MB");return}s(!0);try{await Le.uploadCompanyLogo(t,O),r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]})}catch(j){console.error("Failed to upload logo:",j),alert("Failed to upload logo. Please try again.")}finally{s(!1),n.current&&(n.current.value="")}}};if(a)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(l||!o)return u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600",children:"Failed to load organization."}),u.jsx(ge,{to:"/companies",className:"btn-secondary mt-4",children:"Back to organizations"})]});if(o.status==="trash")return null;const b=o.acf||{};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(ge,{to:"/companies",className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(ps,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to organizations"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs(ge,{to:`/companies/${t}/edit`,className:"btn-secondary",children:[u.jsx(Pte,{className:"w-4 h-4 mr-2"}),"Edit"]}),u.jsxs("button",{onClick:v,className:"btn-danger",children:[u.jsx(di,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]}),u.jsx("div",{className:"card p-6",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"relative group",children:[(_=(S=(x=o._embedded)==null?void 0:x["wp:featuredmedia"])==null?void 0:S[0])!=null&&_.source_url?u.jsx("img",{src:o._embedded["wp:featuredmedia"][0].source_url,alt:sr(o),className:"w-24 h-24 rounded-lg object-contain bg-white"}):u.jsx("div",{className:"w-24 h-24 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:u.jsx(Rr,{className:"w-12 h-12 text-gray-400"})}),u.jsx("div",{className:"absolute inset-0 rounded-lg bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var C;return(C=n.current)==null?void 0:C.click()},children:i?u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):u.jsx(Cf,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),u.jsx("input",{ref:n,type:"file",accept:"image/*",onChange:y,className:"hidden",disabled:i})]}),u.jsxs("div",{children:[d&&u.jsxs(ge,{to:`/companies/${d.id}`,className:"text-sm text-primary-600 hover:underline flex items-center mb-1",children:[u.jsx(PF,{className:"w-3 h-3 mr-1"}),"Subsidiary of ",sr(d)]}),u.jsx("h1",{className:"text-2xl font-bold",children:sr(o)}),b.industry&&u.jsx("p",{className:"text-gray-500",children:b.industry}),b.website&&u.jsxs("a",{href:b.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline flex items-center mt-1",children:[u.jsx(ey,{className:"w-4 h-4 mr-1"}),b.website]})]})]})}),h.length>0&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(PF,{className:"w-5 h-5 mr-2"}),"Subsidiaries"]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:h.map(C=>{var O,P,j,A;return u.jsxs(ge,{to:`/companies/${C.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[(j=(P=(O=C._embedded)==null?void 0:O["wp:featuredmedia"])==null?void 0:P[0])!=null&&j.source_url?u.jsx("img",{src:C._embedded["wp:featuredmedia"][0].source_url,alt:sr(C),className:"w-10 h-10 rounded object-contain bg-white"}):u.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded flex items-center justify-center",children:u.jsx(Rr,{className:"w-5 h-5 text-gray-400"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-sm font-medium",children:sr(C)}),((A=C.acf)==null?void 0:A.industry)&&u.jsx("p",{className:"text-xs text-gray-500",children:C.acf.industry})]})]},C.id)})})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(qs,{className:"w-5 h-5 mr-2"}),"Current employees"]}),((E=c==null?void 0:c.current)==null?void 0:E.length)>0?u.jsx("div",{className:"space-y-2",children:c.current.map(C=>{var O;return u.jsxs(ge,{to:`/people/${C.id}`,className:"flex items-center p-2 rounded hover:bg-gray-50",children:[C.thumbnail?u.jsx("img",{src:C.thumbnail,alt:"",loading:"lazy",className:"w-8 h-8 rounded-full"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-gray-500",children:((O=C.name)==null?void 0:O[0])||"?"})}),u.jsxs("div",{className:"ml-2",children:[u.jsx("p",{className:"text-sm font-medium",children:C.name}),C.job_title&&u.jsx("p",{className:"text-xs text-gray-500",children:C.job_title})]})]},C.id)})}):u.jsx("p",{className:"text-sm text-gray-500",children:"No current employees."})]}),u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(qs,{className:"w-5 h-5 mr-2"}),"Former employees"]}),((N=c==null?void 0:c.former)==null?void 0:N.length)>0?u.jsx("div",{className:"space-y-2",children:c.former.map(C=>{var O;return u.jsxs(ge,{to:`/people/${C.id}`,className:"flex items-center p-2 rounded hover:bg-gray-50",children:[C.thumbnail?u.jsx("img",{src:C.thumbnail,alt:"",loading:"lazy",className:"w-8 h-8 rounded-full opacity-75"}):u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center opacity-75",children:u.jsx("span",{className:"text-xs text-gray-500",children:((O=C.name)==null?void 0:O[0])||"?"})}),u.jsxs("div",{className:"ml-2",children:[u.jsx("p",{className:"text-sm font-medium text-gray-700",children:C.name}),C.job_title&&u.jsx("p",{className:"text-xs text-gray-500",children:C.job_title})]})]},C.id)})}):u.jsx("p",{className:"text-sm text-gray-500",children:"No former employees."})]})]}),p.length>0&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(Ly,{className:"w-5 h-5 mr-2"}),"Investors"]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:p.map(C=>{const O=C.type==="person",P=O?`/people/${C.id}`:`/companies/${C.id}`;return u.jsxs(ge,{to:P,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[C.thumbnail?u.jsx("img",{src:C.thumbnail,alt:C.name,loading:"lazy",className:`w-10 h-10 object-cover ${O?"rounded-full":"rounded"}`}):u.jsx("div",{className:`w-10 h-10 bg-gray-100 flex items-center justify-center ${O?"rounded-full":"rounded"}`,children:O?u.jsx(tl,{className:"w-5 h-5 text-gray-400"}):u.jsx(Rr,{className:"w-5 h-5 text-gray-400"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-sm font-medium",children:C.name}),u.jsx("p",{className:"text-xs text-gray-500",children:O?"Person":"Organization"})]})]},`${C.type}-${C.id}`)})})]}),m.length>0&&u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[u.jsx(Ly,{className:"w-5 h-5 mr-2"}),"Invested in"]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:m.map(C=>u.jsxs(ge,{to:`/companies/${C.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[C.thumbnail?u.jsx("img",{src:C.thumbnail,alt:C.name,loading:"lazy",className:"w-10 h-10 object-contain rounded"}):u.jsx("div",{className:"w-10 h-10 bg-gray-100 flex items-center justify-center rounded",children:u.jsx(Rr,{className:"w-5 h-5 text-gray-400"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-sm font-medium",children:C.name}),C.industry&&u.jsx("p",{className:"text-xs text-gray-500",children:C.industry})]})]},C.id))})]}),((k=b.contact_info)==null?void 0:k.length)>0&&u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"font-semibold mb-4",children:"Contact information"}),u.jsx("div",{className:"space-y-3",children:b.contact_info.map((C,O)=>u.jsxs("div",{children:[u.jsxs("span",{className:"text-sm text-gray-500",children:[C.contact_label||C.contact_type,":"]}),u.jsx("span",{className:"ml-2",children:C.contact_value})]},O))})]})]})}function Tq(){var de,be,Fe,pe,Oe,$e,ut,it,gt;const{id:t}=Do(),e=$n(),r=_t(),n=!!t,{data:i,isLoading:s}=ft({queryKey:["company",t],queryFn:async()=>(await He.getCompany(t,{_embed:!0})).data,enabled:n}),{data:o=[],isLoading:a}=ft({queryKey:["companies","all"],queryFn:async()=>(await He.getCompanies({per_page:100,_embed:!0})).data}),{data:l=[],isLoading:c}=ft({queryKey:["people","all"],queryFn:async()=>(await He.getPeople({per_page:100,_embed:!0})).data}),[d,h]=T.useState(!1),[f,p]=T.useState(!1),[m,g]=T.useState(""),[v,y]=T.useState(""),[b,w]=T.useState(!1),[x,S]=T.useState(""),[_,E]=T.useState([]),N=T.useRef(null),k=T.useRef(null),C=T.useRef(null),O=T.useMemo(()=>{const J=m.toLowerCase().trim();let Ee=o.filter(Ge=>!(n&&Ge.id===parseInt(t)||n&&Ge.parent===parseInt(t)));return J&&(Ee=Ee.filter(Ge=>{var st;return(st=sr(Ge))==null?void 0:st.toLowerCase().includes(J)})),[...Ee].sort((Ge,st)=>(sr(Ge)||"").localeCompare(sr(st)||""))},[o,m,t,n]),P=T.useMemo(()=>o.find(J=>J.id===parseInt(v)),[o,v]),j=T.useMemo(()=>{const J=x.toLowerCase().trim(),Ee=l.map(Ce=>{var Je,Bt,dt,M;return{id:Ce.id,type:"person",name:Kn(((Je=Ce.title)==null?void 0:Je.rendered)||""),thumbnail:(M=(dt=(Bt=Ce._embedded)==null?void 0:Bt["wp:featuredmedia"])==null?void 0:dt[0])==null?void 0:M.source_url}}),Ge=o.filter(Ce=>!n||Ce.id!==parseInt(t)).map(Ce=>{var Je,Bt,dt;return{id:Ce.id,type:"company",name:sr(Ce),thumbnail:(dt=(Bt=(Je=Ce._embedded)==null?void 0:Je["wp:featuredmedia"])==null?void 0:Bt[0])==null?void 0:dt.source_url}});let st=[...Ee,...Ge];J&&(st=st.filter(Ce=>{var Je;return(Je=Ce.name)==null?void 0:Je.toLowerCase().includes(J)}));const er=_.map(Ce=>`${Ce.type}-${Ce.id}`);return st=st.filter(Ce=>!er.includes(`${Ce.type}-${Ce.id}`)),st.sort((Ce,Je)=>(Ce.name||"").localeCompare(Je.name||""))},[l,o,x,_,t,n]);T.useEffect(()=>{const J=Ee=>{k.current&&!k.current.contains(Ee.target)&&p(!1)};if(f)return document.addEventListener("mousedown",J),()=>document.removeEventListener("mousedown",J)},[f]),T.useEffect(()=>{const J=Ee=>{C.current&&!C.current.contains(Ee.target)&&w(!1)};if(b)return document.addEventListener("mousedown",J),()=>document.removeEventListener("mousedown",J)},[b]);const A=mt({mutationFn:J=>He.createCompany(J),onSuccess:J=>{r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["dashboard"]}),e(`/companies/${J.data.id}`)}}),D=mt({mutationFn:J=>He.updateCompany(t,J),onSuccess:()=>{r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["people"]}),r.invalidateQueries({queryKey:["dashboard"]}),e(`/companies/${t}`)}}),I=async J=>{var Ge;const Ee=(Ge=J.target.files)==null?void 0:Ge[0];if(Ee){if(!Ee.type.startsWith("image/")){alert("Please select an image file");return}if(Ee.size>5*1024*1024){alert("Image size must be less than 5MB");return}h(!0);try{await Le.uploadCompanyLogo(t,Ee),r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["people"]}),r.refetchQueries({queryKey:["company",t]}),r.refetchQueries({queryKey:["companies"]}),r.refetchQueries({queryKey:["people"]})}catch(st){console.error("Failed to upload logo:",st),alert("Failed to upload logo. Please try again.")}finally{h(!1),N.current&&(N.current.value="")}}},{register:L,handleSubmit:F,reset:W,formState:{errors:V,isSubmitting:H}}=Kc();T.useEffect(()=>{var J,Ee,Ge;i&&(W({title:Kn(((J=i.title)==null?void 0:J.rendered)||""),website:((Ee=i.acf)==null?void 0:Ee.website)||"",industry:((Ge=i.acf)==null?void 0:Ge.industry)||""}),i.parent&&y(String(i.parent)))},[i,W]),T.useEffect(()=>{var J,Ee;if(((Ee=(J=i==null?void 0:i.acf)==null?void 0:J.investors)==null?void 0:Ee.length)>0&&l.length>0&&o.length>0){const st=i.acf.investors.map(er=>{var Bt,dt,M,q,B,ie,Z;const Ce=l.find(X=>X.id===er);if(Ce)return{id:Ce.id,type:"person",name:Kn(((Bt=Ce.title)==null?void 0:Bt.rendered)||""),thumbnail:(q=(M=(dt=Ce._embedded)==null?void 0:dt["wp:featuredmedia"])==null?void 0:M[0])==null?void 0:q.source_url};const Je=o.find(X=>X.id===er);return Je?{id:Je.id,type:"company",name:sr(Je),thumbnail:(Z=(ie=(B=Je._embedded)==null?void 0:B["wp:featuredmedia"])==null?void 0:ie[0])==null?void 0:Z.source_url}:null}).filter(Boolean);E(st)}},[i,l,o]),Hi(n&&i?`Edit ${sr(i)||"organization"}`:"New organization");const K=async J=>{const Ee=_.map(st=>st.id),Ge={title:J.title,status:"publish",parent:v?parseInt(v):0,acf:{website:J.website,industry:J.industry,investors:Ee}};n?D.mutate(Ge):A.mutate(Ge)};return n&&s?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs(ge,{to:"/companies",className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(ps,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to organizations"})]})}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h1",{className:"text-xl font-bold mb-6",children:n?"Edit organization":"Add new organization"}),u.jsxs("form",{onSubmit:F(K),className:"space-y-6",children:[n&&u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Logo"}),u.jsxs("div",{className:"flex items-center gap-4",children:[(Fe=(be=(de=i==null?void 0:i._embedded)==null?void 0:de["wp:featuredmedia"])==null?void 0:be[0])!=null&&Fe.source_url?u.jsxs("div",{className:"relative group",children:[u.jsx("img",{src:i._embedded["wp:featuredmedia"][0].source_url,alt:sr(i)||"Organization logo",className:"w-20 h-20 rounded-lg object-contain bg-white"}),u.jsx("div",{className:"absolute inset-0 rounded-lg bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var J;return(J=N.current)==null?void 0:J.click()},children:d?u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):u.jsx(Cf,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}):u.jsxs("div",{className:"relative group",children:[u.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-lg flex items-center justify-center",children:u.jsx(Cf,{className:"w-8 h-8 text-gray-400"})}),u.jsx("div",{className:"absolute inset-0 rounded-lg bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var J;return(J=N.current)==null?void 0:J.click()},children:d?u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):u.jsx(Cf,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),u.jsxs("div",{children:[u.jsx("button",{type:"button",onClick:()=>{var J;return(J=N.current)==null?void 0:J.click()},className:"btn-secondary text-sm",disabled:d,children:($e=(Oe=(pe=i==null?void 0:i._embedded)==null?void 0:pe["wp:featuredmedia"])==null?void 0:Oe[0])!=null&&$e.source_url?"Change logo":"Upload logo"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Click the logo or button to upload a new logo"})]}),u.jsx("input",{ref:N,type:"file",accept:"image/*",onChange:I,className:"hidden",disabled:d})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Organization name *"}),u.jsx("input",{...L("title",{required:"Organization name is required"}),className:"input",placeholder:"Acme Inc."}),V.title&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:V.title.message})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Website"}),u.jsx("input",{...L("website"),type:"url",className:"input",placeholder:"https://example.com"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Industry"}),u.jsx("input",{...L("industry"),className:"input",placeholder:"Technology"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Parent organization"}),u.jsxs("div",{className:"relative",ref:k,children:[u.jsxs("button",{type:"button",onClick:()=>p(!f),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:a,children:[P?u.jsxs("div",{className:"flex items-center gap-2",children:[(gt=(it=(ut=P._embedded)==null?void 0:ut["wp:featuredmedia"])==null?void 0:it[0])!=null&&gt.source_url?u.jsx("img",{src:P._embedded["wp:featuredmedia"][0].source_url,alt:sr(P),className:"w-6 h-6 rounded object-contain bg-white"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center",children:u.jsx(Rr,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-gray-900",children:sr(P)})]}):u.jsx("span",{className:"text-gray-400",children:"No parent organization"}),u.jsx(qy,{className:`w-4 h-4 text-gray-400 transition-transform ${f?"rotate-180":""}`})]}),f&&u.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[u.jsx("div",{className:"p-2 border-b border-gray-100",children:u.jsxs("div",{className:"relative",children:[u.jsx(_c,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{type:"text",value:m,onChange:J=>g(J.target.value),placeholder:"Search organizations...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),u.jsxs("div",{className:"overflow-y-auto max-h-48",children:[u.jsx("button",{type:"button",onClick:()=>{y(""),p(!1),g("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${v?"":"bg-primary-50"}`,children:u.jsx("span",{className:"text-sm text-gray-500 italic",children:"No parent organization"})}),a?u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):O.length>0?O.map(J=>{var Ee,Ge,st;return u.jsxs("button",{type:"button",onClick:()=>{y(String(J.id)),p(!1),g("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${v===String(J.id)?"bg-primary-50":""}`,children:[(st=(Ge=(Ee=J._embedded)==null?void 0:Ee["wp:featuredmedia"])==null?void 0:Ge[0])!=null&&st.source_url?u.jsx("img",{src:J._embedded["wp:featuredmedia"][0].source_url,alt:sr(J),className:"w-6 h-6 rounded object-contain bg-white"}):u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center",children:u.jsx(Rr,{className:"w-4 h-4 text-gray-500"})}),u.jsx("span",{className:"text-sm text-gray-900 truncate",children:sr(J)})]},J.id)}):u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"No organizations found"})]})]})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select if this organization is a subsidiary or division of another"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"label flex items-center",children:[u.jsx(Ly,{className:"w-4 h-4 mr-2"}),"Investors"]}),_.length>0&&u.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:_.map(J=>u.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-100 rounded-full pl-1 pr-2 py-1",children:[J.thumbnail?u.jsx("img",{src:J.thumbnail,alt:J.name,className:`w-5 h-5 object-cover ${J.type==="person"?"rounded-full":"rounded"}`}):u.jsx("div",{className:`w-5 h-5 bg-gray-300 flex items-center justify-center ${J.type==="person"?"rounded-full":"rounded"}`,children:J.type==="person"?u.jsx(tl,{className:"w-3 h-3 text-gray-500"}):u.jsx(Rr,{className:"w-3 h-3 text-gray-500"})}),u.jsx("span",{className:"text-sm text-gray-700",children:J.name}),u.jsx("button",{type:"button",onClick:()=>E(Ee=>Ee.filter(Ge=>!(Ge.id===J.id&&Ge.type===J.type))),className:"ml-1 text-gray-400 hover:text-gray-600",children:u.jsx(Mr,{className:"w-3.5 h-3.5"})})]},`${J.type}-${J.id}`))}),u.jsxs("div",{className:"relative",ref:C,children:[u.jsxs("button",{type:"button",onClick:()=>w(!b),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:a||c,children:[u.jsx("span",{className:"text-gray-400",children:"Add investor..."}),u.jsx(qy,{className:`w-4 h-4 text-gray-400 transition-transform ${b?"rotate-180":""}`})]}),b&&u.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[u.jsx("div",{className:"p-2 border-b border-gray-100",children:u.jsxs("div",{className:"relative",children:[u.jsx(_c,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{type:"text",value:x,onChange:J=>S(J.target.value),placeholder:"Search people and organizations...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),u.jsx("div",{className:"overflow-y-auto max-h-48",children:a||c?u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):j.length>0?j.map(J=>u.jsxs("button",{type:"button",onClick:()=>{E(Ee=>[...Ee,J]),S("")},className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors",children:[J.thumbnail?u.jsx("img",{src:J.thumbnail,alt:J.name,className:`w-6 h-6 object-cover ${J.type==="person"?"rounded-full":"rounded"}`}):u.jsx("div",{className:`w-6 h-6 bg-gray-200 flex items-center justify-center ${J.type==="person"?"rounded-full":"rounded"}`,children:J.type==="person"?u.jsx(tl,{className:"w-4 h-4 text-gray-500"}):u.jsx(Rr,{className:"w-4 h-4 text-gray-500"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("span",{className:"text-sm text-gray-900 truncate block",children:J.name}),u.jsx("span",{className:"text-xs text-gray-500",children:J.type==="person"?"Person":"Organization"})]})]},`${J.type}-${J.id}`)):u.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:x?"No results found":"No people or organizations available"})})]})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select people or organizations that have invested in this company"})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[u.jsx(ge,{to:"/companies",className:"btn-secondary",children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary",disabled:H,children:[u.jsx(el,{className:"w-4 h-4 mr-2"}),n?"Save changes":"Create organization"]})]})]})]})]})}function N_e({person:t,dateType:e}){var r;return u.jsx("div",{className:"flex items-center gap-3 py-2",children:u.jsxs(ge,{to:`/people/${t.id}`,className:"flex items-center gap-3 flex-1 min-w-0 hover:opacity-80",children:[t.thumbnail?u.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}):u.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:u.jsx("span",{className:"text-sm font-medium text-gray-500",children:(r=t.name)==null?void 0:r[0]})}),u.jsx("span",{className:"font-medium truncate",children:t.name}),u.jsx("span",{className:"text-sm text-gray-500 capitalize flex-shrink-0",children:e})]})})}function C_e({dates:t}){const e=t[0],n=e.days_until===0?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600",i=[];return t.forEach(s=>{var a,l;const o=((a=s.date_type)==null?void 0:a[0])||"Date";((l=s.related_people)==null?void 0:l.length)>0?s.related_people.forEach(c=>{i.push({person:c,dateType:o})}):i.push({person:{id:null,name:s.title,thumbnail:null},dateType:o})}),u.jsx("div",{className:"card p-4 break-inside-avoid mb-4",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:`w-14 h-14 rounded-lg ${n} flex items-center justify-center flex-shrink-0`,children:u.jsx("span",{className:"text-2xl font-bold leading-none",children:Nn(new Date(e.next_occurrence),"d")})}),u.jsx("div",{className:"flex-1 min-w-0 divide-y divide-gray-100",children:i.map(({person:s,dateType:o},a)=>u.jsx(N_e,{person:s,dateType:o},s.id?`${s.id}-${o}`:`${a}-${o}`))})]})})}function k_e(){const{data:t,isLoading:e,error:r}=hpe(365),n=(t==null?void 0:t.reduce((s,o)=>{const a=Nn(new Date(o.next_occurrence),"yyyy-MM-dd");return s[a]||(s[a]=[]),s[a].push(o),s},{}))||{},i=Object.entries(n).reduce((s,[o,a])=>{const l=Nn(new Date(o),"MMMM yyyy");return s[l]||(s[l]=[]),s[l].push(a),s},{});return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("p",{className:"text-gray-600",children:[(t==null?void 0:t.length)||0," upcoming dates"]}),u.jsxs(ge,{to:"/dates/new",className:"btn-primary",children:[u.jsx(lr,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add date"})]})]}),e&&u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),r&&u.jsx("div",{className:"card p-6 text-center",children:u.jsx("p",{className:"text-red-600",children:"Failed to load dates."})}),!e&&!r&&(t==null?void 0:t.length)===0&&u.jsxs("div",{className:"card p-12 text-center",children:[u.jsx(mo,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-medium mb-1",children:"No important dates"}),u.jsx("p",{className:"text-gray-500 mb-4",children:"Add birthdays, anniversaries, and more."}),u.jsxs(ge,{to:"/dates/new",className:"btn-primary",children:[u.jsx(lr,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Add date"})]})]}),Object.entries(i).map(([s,o])=>u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:s}),u.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 gap-4",children:o.map(a=>u.jsx(C_e,{dates:a},a[0].next_occurrence))})]},s))]})}function T_e({value:t=[],onChange:e,people:r=[],isLoading:n}){const[i,s]=T.useState(""),o=T.useMemo(()=>{if(!i)return r.slice(0,10);const d=i.toLowerCase();return r.filter(h=>rc(h).toLowerCase().includes(d)).slice(0,10)},[r,i]),a=T.useMemo(()=>t.map(d=>r.find(h=>h.id===d)).filter(Boolean),[t,r]),l=d=>{t.includes(d)||e([...t,d]),s("")},c=d=>{e(t.filter(h=>h!==d))};return u.jsxs("div",{className:"space-y-2",children:[a.length>0&&u.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(d=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-primary-100 text-primary-800 rounded-full text-sm",children:[rc(d),u.jsx("button",{type:"button",onClick:()=>c(d.id),className:"hover:text-primary-600",children:u.jsx(Mr,{className:"w-3 h-3"})})]},d.id))}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",value:i,onChange:d=>s(d.target.value),placeholder:"Search for people...",className:"input",disabled:n}),i&&u.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:o.length>0?o.map(d=>u.jsx("button",{type:"button",onClick:()=>l(d.id),disabled:t.includes(d.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t.includes(d.id)?"opacity-50 cursor-not-allowed":""}`,children:rc(d)},d.id)):u.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No people found"})})]})]})}function Oq(){var W;const{id:t}=Do(),[e]=y0(),r=$n(),n=_t(),i=!!t,s=e.get("person"),o=e.get("type"),{data:a,isLoading:l}=ft({queryKey:["important-date",t],queryFn:async()=>(await He.getDate(t)).data,enabled:i}),c=T.useMemo(()=>{var H;if(!((H=a==null?void 0:a.acf)!=null&&H.related_people))return[];const V=a.acf.related_people;return Array.isArray(V)?V.map(K=>parseInt(typeof K=="object"&&K!==null?K.ID||K.id||K.post_id:K,10)).filter(K=>!isNaN(K)&&K>0):[]},[a]),{data:d=[],isLoading:h}=Vc({orderby:"title",order:"asc"}),{data:f=[]}=ft({queryKey:["people","specific",c],queryFn:async()=>{const V=c.map(K=>He.getPerson(K,{_embed:!0}).then(de=>de.data).catch(()=>null));return(await Promise.all(V)).filter(Boolean)},enabled:c.length>0}),p=T.useMemo(()=>{const V=new Map;return d.forEach(H=>V.set(H.id,H)),f.forEach(H=>{var de,be,Fe,pe,Oe,$e,ut,it,gt,J,Ee,Ge,st,er,Ce,Je;const K={...H,id:H.id,name:rc(H),first_name:((de=H.acf)==null?void 0:de.first_name)||"",last_name:((be=H.acf)==null?void 0:be.last_name)||"",is_favorite:((Fe=H.acf)==null?void 0:Fe.is_favorite)||!1,thumbnail:(($e=(Oe=(pe=H._embedded)==null?void 0:pe["wp:featuredmedia"])==null?void 0:Oe[0])==null?void 0:$e.source_url)||((Ge=(Ee=(J=(gt=(it=(ut=H._embedded)==null?void 0:ut["wp:featuredmedia"])==null?void 0:it[0])==null?void 0:gt.media_details)==null?void 0:J.sizes)==null?void 0:Ee.thumbnail)==null?void 0:Ge.source_url)||null,labels:((Je=(Ce=(er=(st=H._embedded)==null?void 0:st["wp:term"])==null?void 0:er.flat())==null?void 0:Ce.filter(Bt=>(Bt==null?void 0:Bt.taxonomy)==="person_label"))==null?void 0:Je.map(Bt=>Bt.name))||[]};V.set(K.id,K)}),Array.from(V.values())},[d,f]),{data:m=[]}=ft({queryKey:["date-types"],queryFn:async()=>((await He.getDateTypes()).data||[]).sort((K,de)=>{const be=K.name||"",Fe=de.name||"";return be.localeCompare(Fe)})}),g=mt({mutationFn:V=>He.createDate(V),onSuccess:()=>{n.invalidateQueries({queryKey:["reminders"]}),r(s?`/people/${s}`:"/dates")}}),v=mt({mutationFn:V=>He.updateDate(t,V),onSuccess:()=>{n.invalidateQueries({queryKey:["reminders"]}),n.invalidateQueries({queryKey:["important-date",t]}),n.invalidateQueries({queryKey:["people"]});const V=x("related_people");(V==null?void 0:V.length)>0?r(`/people/${V[0]}`):r("/dates")}}),{register:y,handleSubmit:b,reset:w,watch:x,setValue:S,control:_,formState:{errors:E,isSubmitting:N}}=Kc({defaultValues:{title:"",date_value:"",date_type:"",related_people:[],is_recurring:!0,year_unknown:!1}}),k=x("related_people"),C=x("date_type"),O=x("title");T.useEffect(()=>{var K;if((!O||["'s Birthday","Wedding of "].some(de=>O.endsWith(de)||O.startsWith(de)))&&(k==null?void 0:k.length)>0&&C){const de=m.find(Oe=>Oe.id===parseInt(C)),be=(de==null?void 0:de.name)||"",Fe=((K=de==null?void 0:de.slug)==null?void 0:K.toLowerCase())||be.toLowerCase(),pe=k.map(Oe=>{var ut,it,gt;const $e=p.find(J=>J.id===Oe);return $e?Kn(((ut=$e.acf)==null?void 0:ut.first_name)||((gt=(it=$e.title)==null?void 0:it.rendered)==null?void 0:gt.split(" ")[0])||""):null}).filter(Boolean);if(pe.length>0&&be){let Oe;Fe==="wedding"?pe.length>=2?Oe=`Wedding of ${pe[0]} & ${pe[1]}`:Oe=`Wedding of ${pe[0]}`:Oe=`${pe[0]}'s ${be}`,S("title",Oe)}}},[k,C,p,m,S,O]);const[P,j]=T.useState(!1);T.useEffect(()=>{var H,K,de,be,Fe,pe;if(P&&!i)return;const V=c.length===0||f.length>0;if(a&&p.length>0&&V){let Oe=[];const $e=(H=a.acf)==null?void 0:H.related_people;$e&&(Array.isArray($e)?Oe=$e.map(it=>parseInt(typeof it=="object"&&it!==null?it.ID||it.id||it.post_id:it,10)).filter(it=>!isNaN(it)&&it>0):typeof $e=="number"&&(Oe=[$e]));let ut="";((K=a.date_type)==null?void 0:K.length)>0&&(ut=a.date_type[0].toString()),w({title:Kn(((de=a.title)==null?void 0:de.rendered)||""),date_value:((be=a.acf)==null?void 0:be.date_value)||"",date_type:ut,related_people:Oe,is_recurring:((Fe=a.acf)==null?void 0:Fe.is_recurring)??!0,year_unknown:((pe=a.acf)==null?void 0:pe.year_unknown)??!1}),j(!0)}else if(!i&&p.length>0&&m.length>0){const Oe={title:"",date_value:"",date_type:"",related_people:[],is_recurring:!0,year_unknown:!1};if(s&&(Oe.related_people=[parseInt(s)]),o){const $e=m.find(ut=>ut.slug===o||ut.name.toLowerCase()===o.toLowerCase());$e&&(Oe.date_type=$e.id.toString())}w(Oe),j(!0)}},[a,w,i,s,o,m,p,c,f,P]),Hi(i&&a?`Edit ${((W=a.title)==null?void 0:W.rendered)||a.title||"date"}`:"New date");const A=async V=>{const H={title:V.title,status:"publish",date_type:V.date_type?[parseInt(V.date_type)]:[],acf:{date_value:V.date_value,related_people:V.related_people,is_recurring:V.is_recurring,year_unknown:V.year_unknown}};i?v.mutate(H):g.mutate(H)};if(i&&l)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});const D=x("related_people"),I=i&&(D==null?void 0:D.length)>0?D[0]:s,L=I?`/people/${I}`:"/dates",F=I?"Back to person":"Back to dates";return u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs(ge,{to:L,className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(ps,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:F})]})}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h1",{className:"text-xl font-bold mb-6",children:i?"Edit date":"Add new date"}),u.jsxs("form",{onSubmit:b(A),className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Related people"}),u.jsx($v,{name:"related_people",control:_,render:({field:V})=>u.jsx(T_e,{value:V.value,onChange:V.onChange,people:p,isLoading:h})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Date type *"}),u.jsx($v,{name:"date_type",control:_,rules:{required:"Please select a date type"},render:({field:V})=>{const H=V.value?String(V.value):"";return u.jsxs("select",{value:H,onChange:K=>{const de=K.target.value;V.onChange(de)},onBlur:V.onBlur,name:V.name,ref:V.ref,className:"input",children:[u.jsx("option",{value:"",children:"Select a type..."}),m.map(K=>u.jsx("option",{value:String(K.id),children:K.name},K.id))]})}}),E.date_type&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:E.date_type.message})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Label"}),u.jsx("input",{...y("title"),className:"input",placeholder:"e.g., Mom's Birthday, Wedding Anniversary"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-generated from person and date type. You can customize it."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Date *"}),u.jsx("input",{...y("date_value",{required:"Date is required"}),type:"date",className:"input"}),E.date_value&&u.jsx("p",{className:"text-sm text-red-600 mt-1",children:E.date_value.message})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:"year_unknown",...y("year_unknown"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),u.jsx("label",{htmlFor:"year_unknown",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Year unknown"})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:"is_recurring",...y("is_recurring"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),u.jsx("label",{htmlFor:"is_recurring",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Repeats every year"})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[u.jsx(ge,{to:L,className:"btn-secondary",children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary",disabled:N,children:[u.jsx(el,{className:"w-4 h-4 mr-2"}),i?"Save changes":"Create date"]})]})]})]})]})}function O_e(){Hi("Todos");const[t,e]=T.useState(!1),[r,n]=T.useState(null),[i,s]=T.useState(!1),[o,a]=T.useState(!1),[l,c]=T.useState(null),[d,h]=T.useState(!1),[f,p]=T.useState(!1),[m,g]=T.useState(null),{data:v,isLoading:y}=Ate(!0),b=$te(),w=fpe(),x=yM(),S=T.useMemo(()=>Yte(new Date,3),[]),{incompleteTodos:_,recentlyCompletedTodos:E,olderCompletedTodos:N}=T.useMemo(()=>{if(!v)return{incompleteTodos:[],recentlyCompletedTodos:[],olderCompletedTodos:[]};const I=[],L=[],F=[];return v.forEach(W=>{if(!W.is_completed)I.push(W);else try{const V=dp(W.created);Gme(V,S)?L.push(W):F.push(W)}catch{F.push(W)}}),{incompleteTodos:I,recentlyCompletedTodos:L,olderCompletedTodos:F}},[v,S]),k=I=>{if(!I.is_completed){c(I),h(!0);return}b.mutate({todoId:I.id,data:{content:I.content,due_date:I.due_date,is_completed:!1}})},C=()=>{l&&(b.mutate({todoId:l.id,data:{content:l.content,due_date:l.due_date,is_completed:!0}}),h(!1),c(null))},O=()=>{if(!l)return;const I=new Date().toISOString().split("T")[0];g({content:l.content,activity_date:I,activity_type:"note",participants:[]}),h(!1),p(!0)},P=async I=>{if(l)try{await x.mutateAsync({personId:l.person_id,data:I}),await b.mutateAsync({todoId:l.id,data:{content:l.content,due_date:l.due_date,is_completed:!0}}),p(!1),c(null),g(null)}catch(L){console.error("Failed to create activity:",L),alert("Failed to create activity. Please try again.")}},j=async I=>{r&&(await b.mutateAsync({todoId:r.id,data:I}),s(!1),n(null))},A=async I=>{window.confirm("Are you sure you want to delete this todo?")&&await w.mutateAsync(I)};if(y)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});const D=[...E,...N];return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsx("h1",{className:"text-2xl font-bold",children:"Todos"}),u.jsxs("div",{className:"flex items-center gap-2",children:[N.length>0&&u.jsxs("button",{onClick:()=>e(!t),className:`btn-secondary text-sm flex items-center gap-2 ${t?"bg-primary-50 border-primary-300":""}`,children:[u.jsx(nI,{className:"w-4 h-4"}),t?"Hide older":"Show all completed"]}),u.jsxs("button",{onClick:()=>a(!0),className:"btn-primary text-sm flex items-center gap-2",children:[u.jsx(lr,{className:"w-4 h-4"}),"Add todo"]})]})]}),u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(Rd,{className:"w-5 h-5 mr-2 text-gray-500"}),"Open todos (",_.length,")"]})}),_.length>0?u.jsx("div",{className:"divide-y divide-gray-100",children:_.map(I=>u.jsx(nx,{todo:I,onToggle:k,onEdit:L=>{n(L),s(!0)},onDelete:A},I.id))}):u.jsxs("div",{className:"p-8 text-center",children:[u.jsx(Fs,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),u.jsx("p",{className:"text-gray-500",children:"No open todos"}),u.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Create todos from a person's detail page"})]})]}),E.length>0&&!t&&u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(Bfe,{className:"w-5 h-5 mr-2 text-primary-600"}),"Recently completed (",E.length,")"]})}),u.jsx("div",{className:"divide-y divide-gray-100",children:E.map(I=>u.jsx(nx,{todo:I,onToggle:k,onEdit:L=>{n(L),s(!0)},onDelete:A},I.id))})]}),t&&D.length>0&&u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"p-4 border-b border-gray-200",children:u.jsxs("h2",{className:"font-semibold flex items-center",children:[u.jsx(Fs,{className:"w-5 h-5 mr-2 text-primary-600"}),"All completed todos (",D.length,")"]})}),u.jsx("div",{className:"divide-y divide-gray-100",children:D.map(I=>u.jsx(nx,{todo:I,onToggle:k,onEdit:L=>{n(L),s(!0)},onDelete:A},I.id))})]}),u.jsx(Die,{isOpen:i,onClose:()=>{s(!1),n(null)},onSubmit:j,isLoading:b.isPending,todo:r}),u.jsx(qte,{isOpen:o,onClose:()=>a(!1)}),u.jsx(vM,{isOpen:d,onClose:()=>{h(!1),c(null)},todo:l,onComplete:C,onCompleteAsActivity:O}),u.jsx(sA,{isOpen:f,onClose:()=>{p(!1),c(null),g(null)},onSubmit:P,isLoading:x.isPending,personId:l==null?void 0:l.person_id,initialData:m})]})}function nx({todo:t,onToggle:e,onEdit:r,onDelete:n}){var s;const i=tm(t);return u.jsxs("div",{className:"flex items-start p-4 hover:bg-gray-50 transition-colors group",children:[u.jsx("button",{onClick:()=>e(t),className:"mt-0.5 mr-3 flex-shrink-0",title:t.is_completed?"Mark as incomplete":"Mark as complete",children:t.is_completed?u.jsx(Fs,{className:"w-5 h-5 text-primary-600"}):u.jsx(Rd,{className:`w-5 h-5 ${i?"text-red-600":"text-gray-400"}`})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:`text-sm ${t.is_completed?"line-through text-gray-400":i?"text-red-600 font-medium":"text-gray-900"}`,children:t.content}),u.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-2",children:[u.jsxs(ge,{to:`/people/${t.person_id}`,className:"flex items-center gap-2 text-xs text-primary-600 hover:text-primary-700 hover:underline",children:[t.person_thumbnail?u.jsx("img",{src:t.person_thumbnail,alt:t.person_name,className:"w-5 h-5 rounded-full object-cover"}):u.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-gray-500",children:(s=t.person_name)==null?void 0:s[0]})}),t.person_name]}),t.due_date&&u.jsxs("span",{className:`text-xs ${i&&!t.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",Nn(new Date(t.due_date),"MMM d, yyyy"),i&&!t.is_completed&&" (overdue)"]})]})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[u.jsx("button",{onClick:()=>r(t),className:"p-1 hover:bg-gray-100 rounded",title:"Edit todo",children:u.jsx(ra,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),u.jsx("button",{onClick:()=>n(t.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete todo",children:u.jsx(di,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})}function j_e(){var y,b,w;const[t,e]=T.useState(null),[r,n]=T.useState(""),[i,s]=T.useState(!1),[o,a]=T.useState(null),l=_t(),c=mt({mutationFn:async x=>{const S=new FormData;return S.append("file",x),(await ce.post("/prm/v1/import/monica/validate",S,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:x=>{a(x)},onError:x=>{var S,_;a({valid:!1,error:((_=(S=x.response)==null?void 0:S.data)==null?void 0:_.message)||"Failed to validate file"})}}),d=mt({mutationFn:async({file:x,monicaUrl:S})=>{const _=new FormData;return _.append("file",x),_.append("monica_url",S),(await ce.post("/prm/v1/import/monica",_,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{l.invalidateQueries({queryKey:["people"]}),l.invalidateQueries({queryKey:["companies"]}),l.invalidateQueries({queryKey:["dates"]}),l.invalidateQueries({queryKey:["dashboard"]})}}),h=T.useCallback(x=>{x.preventDefault(),x.stopPropagation(),x.type==="dragenter"||x.type==="dragover"?s(!0):x.type==="dragleave"&&s(!1)},[]),f=T.useCallback(x=>{x.preventDefault(),x.stopPropagation(),s(!1),x.dataTransfer.files&&x.dataTransfer.files[0]&&m(x.dataTransfer.files[0])},[]),p=x=>{x.target.files&&x.target.files[0]&&m(x.target.files[0])},m=x=>{if(!x.name.endsWith(".sql")){a({valid:!1,error:"Please select a SQL file"});return}e(x),a(null),d.reset(),c.mutate(x)},g=()=>{if(!r.trim()){a(x=>({...x,urlError:"Please enter your Monica instance URL"}));return}t&&(o!=null&&o.valid)&&d.mutate({file:t,monicaUrl:r.trim()})},v=()=>{e(null),n(""),a(null),c.reset(),d.reset()};return u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Import from Monica"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts, relationships, notes, and photos from a Monica CRM SQL export file. Reimporting the same file will update existing contacts instead of creating duplicates."}),d.isSuccess?u.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Id,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),u.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[u.jsxs("p",{children:["Contacts imported: ",d.data.stats.contacts_imported]}),u.jsxs("p",{children:["Contacts updated: ",d.data.stats.contacts_updated]}),u.jsxs("p",{children:["Contacts skipped (partial): ",d.data.stats.contacts_skipped]}),u.jsxs("p",{children:["Photos imported: ",d.data.stats.photos_imported]}),u.jsxs("p",{children:["Organizations created: ",d.data.stats.companies_created]}),u.jsxs("p",{children:["Relationships created: ",d.data.stats.relationships_created]}),u.jsxs("p",{children:["Important dates created: ",d.data.stats.dates_created]}),u.jsxs("p",{children:["Notes created: ",d.data.stats.notes_created]}),((y=d.data.stats.errors)==null?void 0:y.length)>0&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[u.jsx("p",{className:"font-medium",children:"Errors:"}),u.jsx("ul",{className:"list-disc list-inside",children:d.data.stats.errors.map((x,S)=>u.jsx("li",{children:x},S))})]})]}),u.jsx("button",{onClick:v,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${i?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:f,children:[u.jsx("input",{type:"file",accept:".sql",onChange:p,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),c.isPending?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(Sc,{className:"h-8 w-8 text-primary-600 animate-spin"}),u.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(Jp,{className:"h-8 w-8 text-green-600"}),u.jsx("p",{className:"font-medium text-gray-900",children:t.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024/1024).toFixed(2)," MB"]})]}):u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(Ec,{className:"h-8 w-8 text-gray-400"}),u.jsx("p",{className:"text-gray-600",children:"Drag and drop your Monica SQL export file here, or click to browse"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Supports SQL export files"})]})]}),o&&u.jsx("div",{className:`rounded-lg border p-4 ${o.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:o.valid?u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Id,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),u.jsxs("div",{className:"mt-2 text-sm text-green-800",children:[u.jsxs("p",{children:["Export format: ",o.version]}),u.jsxs("p",{children:["Contacts to import: ",o.summary.contacts]}),u.jsxs("p",{children:["Relationships: ",o.summary.relationships]}),u.jsxs("p",{children:["Notes: ",o.summary.notes]}),u.jsxs("p",{children:["Dates: ",o.summary.reminders]}),u.jsxs("p",{children:["Photos: ",o.summary.photos]}),u.jsxs("p",{children:["Organizations: ",o.summary.companies_count]})]})]})]}):u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Po,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:o.error})]})]})}),(o==null?void 0:o.valid)&&u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{htmlFor:"monica-url",className:"block text-sm font-medium text-gray-700",children:"Monica Instance URL"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(pM,{className:"h-4 w-4 text-gray-400"})}),u.jsx("input",{type:"url",id:"monica-url",value:r,onChange:x=>n(x.target.value),placeholder:"https://your-monica-instance.com",className:`block w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ${o.urlError?"border-red-300":"border-gray-300"}`})]}),o.urlError&&u.jsx("p",{className:"text-sm text-red-600",children:o.urlError}),u.jsx("p",{className:"text-xs text-gray-500",children:"Enter the URL of your Monica instance to import photos. Photos will be downloaded from this URL."})]}),(o==null?void 0:o.valid)&&u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:g,disabled:d.isPending,className:"btn-primary flex items-center gap-2",children:d.isPending?u.jsxs(u.Fragment,{children:[u.jsx(Sc,{className:"h-4 w-4 animate-spin"}),u.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(Ec,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),u.jsx("button",{onClick:v,disabled:d.isPending,className:"btn-secondary",children:"Cancel"})]}),d.isError&&u.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Po,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:((w=(b=d.error.response)==null?void 0:b.data)==null?void 0:w.message)||"An error occurred during import"})]})]})})]})]})}function P_e(){var g,v,y;const[t,e]=T.useState(null),[r,n]=T.useState(!1),[i,s]=T.useState(null),o=_t(),a=mt({mutationFn:async b=>{const w=new FormData;return w.append("file",b),(await ce.post("/prm/v1/import/vcard/validate",w,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:b=>{s(b)},onError:b=>{var w,x;s({valid:!1,error:((x=(w=b.response)==null?void 0:w.data)==null?void 0:x.message)||"Failed to validate file"})}}),l=mt({mutationFn:async b=>{const w=new FormData;return w.append("file",b),(await ce.post("/prm/v1/import/vcard",w,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{o.invalidateQueries({queryKey:["people"]}),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["dates"]}),o.invalidateQueries({queryKey:["dashboard"]})}}),c=T.useCallback(b=>{b.preventDefault(),b.stopPropagation(),b.type==="dragenter"||b.type==="dragover"?n(!0):b.type==="dragleave"&&n(!1)},[]),d=T.useCallback(b=>{b.preventDefault(),b.stopPropagation(),n(!1),b.dataTransfer.files&&b.dataTransfer.files[0]&&f(b.dataTransfer.files[0])},[]),h=b=>{b.target.files&&b.target.files[0]&&f(b.target.files[0])},f=b=>{const w=b.name.split(".").pop().toLowerCase();if(w!=="vcf"&&w!=="vcard"){s({valid:!1,error:"Please select a vCard file (.vcf)"});return}e(b),s(null),l.reset(),a.mutate(b)},p=()=>{t&&(i!=null&&i.valid)&&l.mutate(t)},m=()=>{e(null),s(null),a.reset(),l.reset()};return u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Import from vCard"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts from a vCard (.vcf) file. vCard is a standard format supported by most contact apps including Apple Contacts, Outlook, and Android. Files can contain one or multiple contacts."}),l.isSuccess?u.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Id,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),u.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[u.jsxs("p",{children:["Contacts imported: ",l.data.stats.contacts_imported]}),u.jsxs("p",{children:["Contacts updated: ",l.data.stats.contacts_updated]}),u.jsxs("p",{children:["Contacts skipped: ",l.data.stats.contacts_skipped]}),u.jsxs("p",{children:["Photos imported: ",l.data.stats.photos_imported]}),u.jsxs("p",{children:["Organizations created: ",l.data.stats.companies_created]}),u.jsxs("p",{children:["Birthdays created: ",l.data.stats.dates_created]}),u.jsxs("p",{children:["Notes created: ",l.data.stats.notes_created]}),((g=l.data.stats.errors)==null?void 0:g.length)>0&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[u.jsx("p",{className:"font-medium",children:"Errors:"}),u.jsx("ul",{className:"list-disc list-inside",children:l.data.stats.errors.map((b,w)=>u.jsx("li",{children:b},w))})]})]}),u.jsx("button",{onClick:m,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${r?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:c,onDragLeave:c,onDragOver:c,onDrop:d,children:[u.jsx("input",{type:"file",accept:".vcf,.vcard",onChange:h,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),a.isPending?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(Sc,{className:"h-8 w-8 text-primary-600 animate-spin"}),u.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(Jp,{className:"h-8 w-8 text-green-600"}),u.jsx("p",{className:"font-medium text-gray-900",children:t.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024).toFixed(2)," KB"]})]}):u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(Ec,{className:"h-8 w-8 text-gray-400"}),u.jsx("p",{className:"text-gray-600",children:"Drag and drop your vCard file here, or click to browse"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Supports .vcf and .vcard files"})]})]}),i&&u.jsx("div",{className:`rounded-lg border p-4 ${i.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:i.valid?u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Id,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),u.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-3 gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(qs,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.contacts," contacts"]})]}),i.summary.companies_count>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Rr,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.companies_count," organizations"]})]}),i.summary.birthdays>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(_te,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.birthdays," birthdays"]})]}),i.summary.photos>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Cte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.photos," photos"]})]}),i.summary.notes>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Ite,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.notes," notes"]})]})]})]})]}):u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Po,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:i.error})]})]})}),(i==null?void 0:i.valid)&&u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:p,disabled:l.isPending,className:"btn-primary flex items-center gap-2",children:l.isPending?u.jsxs(u.Fragment,{children:[u.jsx(Sc,{className:"h-4 w-4 animate-spin"}),u.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(Ec,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),u.jsx("button",{onClick:m,disabled:l.isPending,className:"btn-secondary",children:"Cancel"})]}),l.isError&&u.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Po,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:((y=(v=l.error.response)==null?void 0:v.data)==null?void 0:y.message)||"An error occurred during import"})]})]})})]})]})}function I_e(){var x,S,_;const[t,e]=T.useState(null),[r,n]=T.useState(!1),[i,s]=T.useState(null),[o,a]=T.useState({}),l=_t(),c=mt({mutationFn:async E=>{const N=new FormData;return N.append("file",E),(await ce.post("/prm/v1/import/google-contacts/validate",N,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:E=>{var N;if(s(E),((N=E.duplicates)==null?void 0:N.length)>0){const k={};E.duplicates.forEach(C=>{k[C.index]="merge"}),a(k)}},onError:E=>{var N,k;s({valid:!1,error:((k=(N=E.response)==null?void 0:N.data)==null?void 0:k.message)||"Failed to validate file"})}}),d=mt({mutationFn:async({file:E,decisions:N})=>{const k=new FormData;return k.append("file",E),k.append("decisions",JSON.stringify(N)),(await ce.post("/prm/v1/import/google-contacts",k,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{l.invalidateQueries({queryKey:["people"]}),l.invalidateQueries({queryKey:["companies"]}),l.invalidateQueries({queryKey:["dates"]}),l.invalidateQueries({queryKey:["dashboard"]})}}),h=T.useCallback(E=>{E.preventDefault(),E.stopPropagation(),E.type==="dragenter"||E.type==="dragover"?n(!0):E.type==="dragleave"&&n(!1)},[]),f=T.useCallback(E=>{E.preventDefault(),E.stopPropagation(),n(!1),E.dataTransfer.files&&E.dataTransfer.files[0]&&m(E.dataTransfer.files[0])},[]),p=E=>{E.target.files&&E.target.files[0]&&m(E.target.files[0])},m=E=>{if(!E.name.endsWith(".csv")){s({valid:!1,error:"Please select a CSV file"});return}e(E),s(null),a({}),d.reset(),c.mutate(E)},g=(E,N)=>{a(k=>({...k,[E]:N}))},v=()=>{t&&(i!=null&&i.valid)&&d.mutate({file:t,decisions:o})},y=()=>{e(null),s(null),a({}),c.reset(),d.reset()},b=(i==null?void 0:i.duplicates)||[],w=b.length>0;return u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Import from Google Contacts"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts from a Google Contacts CSV export. To export from Google:"}),u.jsxs("ol",{className:"text-sm text-gray-600 list-decimal list-inside space-y-1 ml-2",children:[u.jsxs("li",{children:["Go to ",u.jsx("a",{href:"https://contacts.google.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline",children:"contacts.google.com"})]}),u.jsx("li",{children:'Click "Export" in the left sidebar'}),u.jsx("li",{children:'Select "Google CSV" format and click "Export"'})]}),d.isSuccess?u.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Id,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),u.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[u.jsxs("p",{children:["Contacts imported: ",d.data.stats.contacts_imported]}),u.jsxs("p",{children:["Contacts updated: ",d.data.stats.contacts_updated]}),u.jsxs("p",{children:["Contacts skipped: ",d.data.stats.contacts_skipped]}),u.jsxs("p",{children:["Organizations created: ",d.data.stats.companies_created]}),u.jsxs("p",{children:["Birthdays created: ",d.data.stats.dates_created]}),u.jsxs("p",{children:["Notes created: ",d.data.stats.notes_created]}),u.jsxs("p",{children:["Photos imported: ",d.data.stats.photos_imported]}),((x=d.data.stats.errors)==null?void 0:x.length)>0&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[u.jsx("p",{className:"font-medium",children:"Errors:"}),u.jsx("ul",{className:"list-disc list-inside",children:d.data.stats.errors.map((E,N)=>u.jsx("li",{children:E},N))})]})]}),u.jsx("button",{onClick:y,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${r?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:f,children:[u.jsx("input",{type:"file",accept:".csv",onChange:p,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),c.isPending?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(Sc,{className:"h-8 w-8 text-primary-600 animate-spin"}),u.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(fM,{className:"h-8 w-8 text-green-600"}),u.jsx("p",{className:"font-medium text-gray-900",children:t.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024).toFixed(2)," KB"]})]}):u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(Ec,{className:"h-8 w-8 text-gray-400"}),u.jsx("p",{className:"text-gray-600",children:"Drag and drop your Google Contacts CSV here, or click to browse"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Supports Google CSV format"})]})]}),i&&u.jsx("div",{className:`rounded-lg border p-4 ${i.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:i.valid?u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Id,{className:"h-5 w-5 text-green-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),u.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-3 gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(qs,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.contacts," contacts"]})]}),i.summary.companies_count>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Rr,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.companies_count," organizations"]})]}),i.summary.birthdays>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(_te,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.birthdays," birthdays"]})]}),i.summary.notes>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Ite,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.notes," notes"]})]}),i.summary.photos>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[u.jsx(Cte,{className:"h-4 w-4"}),u.jsxs("span",{children:[i.summary.photos," photos"]})]})]})]})]}):u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Po,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:i.error})]})]})}),(i==null?void 0:i.valid)&&w&&u.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx($fe,{className:"h-5 w-5 text-amber-600 mt-0.5 flex-shrink-0"}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("h3",{className:"font-medium text-amber-900",children:[b.length," contact",b.length>1?"s":""," may already exist"]}),u.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"Choose how to handle each potential duplicate:"}),u.jsx("div",{className:"mt-4 space-y-4",children:b.map(E=>u.jsx(R_e,{duplicate:E,decision:o[E.index]||"merge",onDecision:N=>g(E.index,N)},E.index))})]})]})}),(i==null?void 0:i.valid)&&u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:v,disabled:d.isPending,className:"btn-primary flex items-center gap-2",children:d.isPending?u.jsxs(u.Fragment,{children:[u.jsx(Sc,{className:"h-4 w-4 animate-spin"}),u.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(Ec,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),u.jsx("button",{onClick:y,disabled:d.isPending,className:"btn-secondary",children:"Cancel"})]}),d.isError&&u.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Po,{className:"h-5 w-5 text-red-600 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),u.jsx("p",{className:"text-sm text-red-700 mt-1",children:((_=(S=d.error.response)==null?void 0:S.data)==null?void 0:_.message)||"An error occurred during import"})]})]})})]})]})}function R_e({duplicate:t,decision:e,onDecision:r}){var n,i;return u.jsxs("div",{className:"bg-white rounded-lg border border-amber-200 p-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"From CSV"}),u.jsx("p",{className:"font-medium text-gray-900 truncate",children:t.csv_name}),t.csv_org&&u.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.csv_org}),t.csv_email&&u.jsx("p",{className:"text-sm text-gray-500 truncate",children:t.csv_email})]}),u.jsx("div",{className:"hidden sm:flex items-center text-gray-400",children:u.jsx("span",{className:"text-lg",children:""})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Existing Contact"}),u.jsxs("div",{className:"flex items-start gap-3",children:[t.existing_photo?u.jsx("img",{src:t.existing_photo,alt:"",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}):u.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:u.jsx("span",{className:"text-gray-500 text-sm font-medium",children:((i=(n=t.existing_name)==null?void 0:n.charAt(0))==null?void 0:i.toUpperCase())||"?"})}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("p",{className:"font-medium text-gray-900 truncate",children:t.existing_name}),t.existing_org&&u.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.existing_org}),t.existing_email&&u.jsx("p",{className:"text-sm text-gray-500 truncate",children:t.existing_email})]})]})]})]}),u.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[u.jsxs("button",{type:"button",onClick:()=>r("merge"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="merge"?"bg-primary-100 text-primary-800 ring-2 ring-primary-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[u.jsx(tpe,{className:"h-4 w-4"}),"Update existing"]}),u.jsxs("button",{type:"button",onClick:()=>r("new"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="new"?"bg-green-100 text-green-800 ring-2 ring-green-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[u.jsx(ape,{className:"h-4 w-4"}),"Create new"]}),u.jsxs("button",{type:"button",onClick:()=>r("skip"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="skip"?"bg-gray-200 text-gray-800 ring-2 ring-gray-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[u.jsx(ipe,{className:"h-4 w-4"}),"Skip"]})]})]})}const M_e=[{id:"sync",label:"Sync",icon:rpe},{id:"notifications",label:"Notifications",icon:qfe},{id:"data",label:"Data",icon:Nte},{id:"admin",label:"Admin",icon:npe,adminOnly:!0},{id:"about",label:"About",icon:Wfe}];function A_e(){const[t,e]=y0(),r=window.prmConfig||{},n=r.isAdmin||!1,i=r.userId,s=t.get("tab")||"sync",o=me=>{e({tab:me})},a=M_e.filter(me=>!me.adminOnly||n),[l,c]=T.useState(""),[d,h]=T.useState(""),[f,p]=T.useState(!0),[m,g]=T.useState(!1),[v,y]=T.useState(!1),[b,w]=T.useState([]),[x,S]=T.useState(!0),[_,E]=T.useState(""),[N,k]=T.useState(!1),[C,O]=T.useState(null),[P,j]=T.useState(!1),[A,D]=T.useState(null),[I,L]=T.useState([]),[F,W]=T.useState(""),[V,H]=T.useState(!1),[K,de]=T.useState(""),[be,Fe]=T.useState("09:00"),[pe,Oe]=T.useState(!0),[$e,ut]=T.useState(!1),[it,gt]=T.useState(!1),[J,Ee]=T.useState(""),[Ge,st]=T.useState(!1),[er,Ce]=T.useState([]),[Je,Bt]=T.useState([]),[dt,M]=T.useState([]),[q,B]=T.useState(!1),[ie,Z]=T.useState(!1),[X,ve]=T.useState(!1),[Ye,Ze]=T.useState(""),[tr,Ne]=T.useState(!1),[se,fe]=T.useState("");T.useEffect(()=>{(async()=>{try{const je=await ce.get("/prm/v1/user/ical-url");c(je.data.url),h(je.data.webcal_url)}catch(je){console.error("Failed to fetch iCal URL:",je)}finally{p(!1)}})()},[]),T.useEffect(()=>{i&&(async()=>{try{const[je,qe]=await Promise.all([Le.getAppPasswords(i),Le.getCardDAVUrls()]);w(je.data||[]),D(qe.data)}catch(je){console.error("Failed to fetch app passwords:",je)}finally{S(!1)}})()},[i]);const he=async()=>{B(!0);try{const[me,je]=await Promise.all([Le.getSlackChannels(),Le.getSlackTargets()]);Ce(me.data.channels||[]),Bt(me.data.users||[]),M(je.data.targets||[])}catch(me){console.error("Failed to fetch Slack data:",me),Ee("Failed to load Slack channels and users. Please try refreshing the page.")}finally{B(!1)}};T.useEffect(()=>{(async()=>{try{const je=await Le.getNotificationChannels();L(je.data.channels||["email"]),W(je.data.slack_webhook||""),Fe(je.data.notification_time||"09:00");const qe=await Le.getSlackStatus(),Ht=qe.data.connected||!1;H(Ht),de(qe.data.workspace_name||""),Ht&&await he()}catch(je){console.error("Failed to fetch notification channels:",je)}finally{Oe(!1)}})()},[]),T.useEffect(()=>{V&&he()},[V]),T.useEffect(()=>{const me=new URLSearchParams(window.location.search),je=me.get("slack_connected"),qe=me.get("slack_error");je==="1"?(Ee("Slack connected successfully!"),o("notifications"),Le.getSlackStatus().then(Ht=>{H(Ht.data.connected||!1),de(Ht.data.workspace_name||"")}),e({tab:"notifications"})):qe&&(Ee(`Slack connection failed: ${qe}`),o("notifications"),e({tab:"notifications"}))},[]);const ke=async()=>{var me,je;try{const qe=await ce.get("/prm/v1/slack/oauth/authorize");window.location.href=qe.data.oauth_url}catch(qe){console.error("Failed to get Slack OAuth URL:",qe),alert(((je=(me=qe.response)==null?void 0:me.data)==null?void 0:je.message)||"Failed to connect Slack")}},ot=async()=>{var me,je;if(confirm("Are you sure you want to disconnect Slack? You will stop receiving Slack notifications.")){st(!0);try{await Le.disconnectSlack(),H(!1),de(""),Ce([]),Bt([]),M([]),Ee("Slack disconnected successfully"),I.includes("slack")&&await Um("slack")}catch(qe){console.error("Failed to disconnect Slack:",qe),alert(((je=(me=qe.response)==null?void 0:me.data)==null?void 0:je.message)||"Failed to disconnect Slack")}finally{st(!1)}}},oi=me=>{const je=dt.includes(me)?dt.filter(qe=>qe!==me):[...dt,me];M(je)},Xi=async()=>{var me,je;Z(!0);try{await Le.updateSlackTargets(dt),Ee("Notification targets saved successfully"),setTimeout(()=>Ee(""),3e3)}catch(qe){console.error("Failed to save Slack targets:",qe),alert(((je=(me=qe.response)==null?void 0:me.data)==null?void 0:je.message)||"Failed to save notification targets")}finally{Z(!1)}},fu=async()=>{try{await navigator.clipboard.writeText(l),g(!0),setTimeout(()=>g(!1),2e3)}catch(me){console.error("Failed to copy:",me)}},kb=async me=>{var je,qe;if(me.preventDefault(),!!_.trim()){k(!0);try{const Ht=await Le.createAppPassword(i,_.trim());O(Ht.data.password),w([...b,Ht.data]),E("")}catch(Ht){console.error("Failed to create app password:",Ht),alert(((qe=(je=Ht.response)==null?void 0:je.data)==null?void 0:qe.message)||"Failed to create app password")}finally{k(!1)}}},Vm=async(me,je)=>{var qe,Ht;if(confirm(`Are you sure you want to revoke the app password "${je}"? Any devices using this password will no longer be able to sync.`))try{await Le.deleteAppPassword(i,me),w(b.filter(cn=>cn.uuid!==me))}catch(cn){console.error("Failed to delete app password:",cn),alert(((Ht=(qe=cn.response)==null?void 0:qe.data)==null?void 0:Ht.message)||"Failed to revoke app password")}},Tb=async()=>{try{await navigator.clipboard.writeText(C),j(!0),setTimeout(()=>j(!1),2e3)}catch(me){console.error("Failed to copy:",me)}},Ob=async me=>{try{await navigator.clipboard.writeText(me)}catch(je){console.error("Failed to copy:",je)}},jb=me=>{if(!me)return"Never";const je=new Date(me);return je.toLocaleDateString("en-US",{month:"short",day:"numeric",year:je.getFullYear()!==new Date().getFullYear()?"numeric":void 0})},Pb=async()=>{if(confirm("Are you sure you want to regenerate your calendar URL? Any existing calendar subscriptions will stop working until you update them with the new URL.")){y(!0);try{const me=await ce.post("/prm/v1/user/regenerate-ical-token");c(me.data.url),h(me.data.webcal_url)}catch(me){console.error("Failed to regenerate token:",me)}finally{y(!1)}}},Um=async me=>{var qe,Ht;const je=I.includes(me)?I.filter(cn=>cn!==me):[...I,me];ut(!0);try{await Le.updateNotificationChannels(je),L(je)}catch(cn){console.error("Failed to update notification channels:",cn),alert(((Ht=(qe=cn.response)==null?void 0:qe.data)==null?void 0:Ht.message)||"Failed to update notification channels")}finally{ut(!1)}},Ib=async me=>{var Ah,hr;const[je,qe]=me.split(":").map(Number),Ht=Math.round(qe/5)*5,cn=Ht===60?(je+1)%24:je,Mh=Ht===60?0:Ht,wl=`${String(cn).padStart(2,"0")}:${String(Mh).padStart(2,"0")}`;Fe(wl),gt(!0);try{await Le.updateNotificationTime(wl)}catch(pu){console.error("Failed to update notification time:",pu),alert(((hr=(Ah=pu.response)==null?void 0:Ah.data)==null?void 0:hr.message)||"Failed to update notification time");const Ab=await Le.getNotificationChannels();Fe(Ab.data.notification_time||"09:00")}finally{gt(!1)}},Rb=async()=>{var me,je;if(confirm("This will send reminder emails for all reminders due today. Continue?")){ve(!0),Ze("");try{const qe=await Le.triggerReminders();Ze(qe.data.message||"Reminders triggered successfully.")}catch(qe){console.error("Failed to trigger reminders:",qe),Ze(((je=(me=qe.response)==null?void 0:me.data)==null?void 0:je.message)||"Failed to trigger reminders. Please check server logs.")}finally{ve(!1)}}},Hm=async()=>{var me,je;if(confirm("This will reschedule all user reminder cron jobs based on their notification time preferences. Continue?")){Ne(!0),fe("");try{const qe=await Le.rescheduleCronJobs();fe(qe.data.message||"Cron jobs rescheduled successfully.")}catch(qe){console.error("Failed to reschedule cron jobs:",qe),fe(((je=(me=qe.response)==null?void 0:me.data)==null?void 0:je.message)||"Failed to reschedule cron jobs. Please check server logs.")}finally{Ne(!1)}}},Mb=()=>{switch(s){case"sync":return u.jsx($_e,{icalUrl:l,webcalUrl:d,icalLoading:f,icalCopied:m,copyIcalUrl:fu,regenerateIcalToken:Pb,regenerating:v,appPasswords:b,appPasswordsLoading:x,carddavUrls:A,config:r,newPasswordName:_,setNewPasswordName:E,handleCreateAppPassword:kb,creatingPassword:N,newPassword:C,setNewPassword:O,copyNewPassword:Tb,passwordCopied:P,handleDeleteAppPassword:Vm,formatDate:jb,copyCarddavUrl:Ob});case"notifications":return u.jsx(D_e,{notificationsLoading:pe,notificationChannels:I,toggleChannel:Um,savingChannels:$e,slackConnected:V,slackWorkspaceName:K,handleConnectSlack:ke,handleDisconnectSlack:ot,disconnectingSlack:Ge,webhookTestMessage:J,slackChannels:er,slackUsers:Je,slackTargets:dt,loadingSlackData:q,handleToggleSlackTarget:oi,handleSaveSlackTargets:Xi,savingSlackTargets:ie,slackWebhook:F,notificationTime:be,handleNotificationTimeChange:Ib,savingTime:it});case"data":return u.jsx(F_e,{});case"admin":return n?u.jsx(q_e,{handleTriggerReminders:Rb,triggeringReminders:X,reminderMessage:Ye,handleRescheduleCron:Hm,reschedulingCron:tr,cronMessage:se}):null;case"about":return u.jsx(L_e,{config:r});default:return null}};return u.jsxs("div",{className:"max-w-3xl mx-auto",children:[u.jsx("div",{className:"border-b border-gray-200 mb-6",children:u.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:a.map(me=>{const je=me.icon,qe=s===me.id;return u.jsxs("button",{onClick:()=>o(me.id),className:`
                  flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap
                  ${qe?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                `,children:[u.jsx(je,{className:"w-4 h-4"}),me.label]},me.id)})})}),u.jsx("div",{className:"space-y-6",children:Mb()})]})}function $_e({icalUrl:t,webcalUrl:e,icalLoading:r,icalCopied:n,copyIcalUrl:i,regenerateIcalToken:s,regenerating:o,appPasswords:a,appPasswordsLoading:l,carddavUrls:c,config:d,newPasswordName:h,setNewPasswordName:f,handleCreateAppPassword:p,creatingPassword:m,newPassword:g,setNewPassword:v,copyNewPassword:y,passwordCopied:b,handleDeleteAppPassword:w,formatDate:x,copyCarddavUrl:S}){return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Calendar subscription"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Subscribe to your important dates in any calendar app (Apple Calendar, Google Calendar, Outlook, etc.)"}),r?u.jsxs("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),u.jsx("div",{className:"h-9 bg-gray-200 rounded w-24"})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label mb-1",children:"Your calendar feed URL"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",readOnly:!0,value:t,className:"input flex-1 text-sm font-mono bg-gray-50",onClick:_=>_.target.select()}),u.jsx("button",{onClick:i,className:"btn-secondary whitespace-nowrap",title:"Copy URL",children:n?u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied"]}):u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),"Copy"]})})]})]}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[u.jsx("a",{href:e,className:"btn-primary",children:u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Subscribe in calendar app"]})}),u.jsx("button",{onClick:s,disabled:o,className:"btn-secondary",children:o?"Regenerating...":"Regenerate URL"})]}),u.jsx("p",{className:"text-xs text-gray-500",children:'Keep this URL private. Anyone with access to it can see your important dates. If you think it has been compromised, click "Regenerate URL" to get a new one.'})]})]}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"CardDAV sync"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Sync your contacts with apps like Apple Contacts, Android Contacts, or Thunderbird using CardDAV."}),l?u.jsxs("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),u.jsx("div",{className:"h-24 bg-gray-200 rounded"})]}):u.jsxs("div",{className:"space-y-4",children:[c&&u.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-3",children:[u.jsx("h3",{className:"font-medium text-sm",children:"Connection details"}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-gray-500",children:"Server URL (for most apps)"}),u.jsxs("div",{className:"flex gap-2 mt-1",children:[u.jsx("input",{type:"text",readOnly:!0,value:c.addressbook,className:"input flex-1 text-xs font-mono bg-white",onClick:_=>_.target.select()}),u.jsx("button",{onClick:()=>S(c.addressbook),className:"btn-secondary text-xs px-2",title:"Copy URL",children:"Copy"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-gray-500",children:"Username"}),u.jsxs("div",{className:"flex gap-2 mt-1",children:[u.jsx("input",{type:"text",readOnly:!0,value:d.userLogin||"",className:"input flex-1 text-xs font-mono bg-white",onClick:_=>_.target.select()}),u.jsx("button",{onClick:()=>S(d.userLogin),className:"btn-secondary text-xs px-2",title:"Copy username",children:"Copy"})]})]}),u.jsx("p",{className:"text-xs text-gray-500",children:"Use one of the app passwords below instead of your regular password."})]}),u.jsxs("form",{onSubmit:p,className:"flex gap-2",children:[u.jsx("input",{type:"text",value:h,onChange:_=>f(_.target.value),placeholder:"Password name (e.g., iPhone Contacts)",className:"input flex-1",disabled:m}),u.jsx("button",{type:"submit",disabled:m||!h.trim(),className:"btn-primary whitespace-nowrap",children:m?"Creating...":"Create password"})]}),g&&u.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[u.jsx("p",{className:"text-sm text-green-800 font-medium mb-2",children:"Your new app password (copy it now, it won't be shown again):"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",readOnly:!0,value:g,className:"input flex-1 font-mono text-sm bg-white",onClick:_=>_.target.select()}),u.jsx("button",{onClick:y,className:"btn-primary whitespace-nowrap",children:b?"Copied!":"Copy"})]}),u.jsx("button",{onClick:()=>v(null),className:"text-xs text-green-700 mt-2 hover:underline",children:"I've saved this password, hide it"})]}),a.length>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-medium mb-2",children:"Your app passwords"}),u.jsx("div",{className:"space-y-2",children:a.map(_=>u.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-sm",children:_.name}),u.jsxs("p",{className:"text-xs text-gray-500",children:["Created ",x(_.created),"  Last used ",x(_.last_used)]})]}),u.jsx("button",{onClick:()=>w(_.uuid,_.name),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Revoke"})]},_.uuid))})]}),a.length===0&&!g&&u.jsx("p",{className:"text-sm text-gray-500",children:"No app passwords yet. Create one to start syncing your contacts."})]})]})]})}function D_e({notificationsLoading:t,notificationChannels:e,toggleChannel:r,savingChannels:n,slackConnected:i,slackWorkspaceName:s,handleConnectSlack:o,handleDisconnectSlack:a,disconnectingSlack:l,webhookTestMessage:c,slackChannels:d,slackUsers:h,slackTargets:f,loadingSlackData:p,handleToggleSlackTarget:m,handleSaveSlackTargets:g,savingSlackTargets:v,slackWebhook:y,notificationTime:b,handleNotificationTimeChange:w,savingTime:x}){return u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Notifications"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose how you want to receive daily reminders about your important dates."}),t?u.jsxs("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),u.jsx("div",{className:"h-10 bg-gray-200 rounded"})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:"Email"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Receive daily digest emails"})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:e.includes("email"),onChange:()=>r("email"),disabled:n,className:"sr-only peer"}),u.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:"Slack"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Receive notifications in Slack"})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:e.includes("slack"),onChange:()=>r("slack"),disabled:n||!i,className:"sr-only peer"}),u.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),u.jsx("div",{children:i?u.jsxs("div",{className:"space-y-3",children:[u.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-green-900",children:"Connected to Slack"}),s&&u.jsxs("p",{className:"text-sm text-green-700",children:["Workspace: ",s]})]}),u.jsx("button",{onClick:a,disabled:l,className:"btn-secondary text-sm",children:l?"Disconnecting...":"Disconnect"})]})}),c&&u.jsx("p",{className:`text-sm ${c.includes("successfully")||c.includes("disconnected")?"text-green-600":"text-red-600"}`,children:c}),e.includes("slack")&&u.jsxs("div",{className:"mt-4 p-4 border border-gray-200 rounded-lg",children:[u.jsx("h3",{className:"font-medium mb-3",children:"Notification targets"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose where to send Slack notifications. You can select multiple channels and users."}),p?u.jsx("p",{className:"text-sm text-gray-500",children:"Loading channels and users..."}):u.jsxs(u.Fragment,{children:[d.length>0&&u.jsxs("div",{className:"mb-4",children:[u.jsx("h4",{className:"text-sm font-medium mb-2",children:"Channels"}),u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:d.map(S=>u.jsxs("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:f.includes(S.id),onChange:()=>m(S.id),className:"mr-2 cursor-pointer"}),u.jsx("span",{className:"text-sm",children:S.name})]},S.id))})]}),h.length>0&&u.jsxs("div",{className:"mb-4",children:[u.jsx("h4",{className:"text-sm font-medium mb-2",children:"Direct messages"}),u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:h.map(S=>u.jsxs("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:f.includes(S.id),onChange:()=>m(S.id),className:"mr-2 cursor-pointer"}),u.jsxs("span",{className:"text-sm",children:[S.name,S.is_me&&u.jsx("span",{className:"text-gray-500 ml-1",children:"(you)"})]})]},S.id))})]}),d.length===0&&h.length===0&&!p&&u.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"No channels or users found. Make sure the Slack app has the necessary permissions."}),u.jsx("button",{onClick:g,disabled:v,className:"btn-primary text-sm mt-4",children:v?"Saving...":"Save targets"})]})]})]}):u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:o,className:"btn-primary w-full",disabled:l,children:"Connect Slack"}),c&&u.jsx("p",{className:`text-sm ${c.includes("successfully")?"text-green-600":"text-red-600"}`,children:c}),u.jsx("p",{className:"text-xs text-gray-500",children:"Connect your Slack workspace to receive daily reminder notifications. You'll be able to message channels or receive direct messages."})]})}),y&&!i&&u.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:u.jsxs("p",{className:"text-sm text-yellow-800",children:[u.jsx("strong",{children:"Legacy webhook detected."})," Please connect via OAuth for better functionality. Your webhook will continue to work until you connect via OAuth."]})}),u.jsxs("div",{children:[u.jsx("label",{className:"label mb-1",children:"Notification time (UTC)"}),u.jsx("input",{type:"time",value:b,onChange:S=>w(S.target.value),className:"input",disabled:x,step:"300"}),b&&u.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm",children:[u.jsxs("p",{className:"text-gray-700",children:[u.jsx("span",{className:"font-medium",children:"UTC:"})," ",b]}),u.jsxs("p",{className:"text-gray-700 mt-1",children:[u.jsxs("span",{className:"font-medium",children:["Your time (",Intl.DateTimeFormat().resolvedOptions().timeZone,"):"]})," ",(()=>{try{const[S,_]=b.split(":"),E=new Date;return E.setUTCHours(parseInt(S),parseInt(_),0,0),E.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}catch{return b}})()]})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose the UTC time when you want to receive your daily reminder digest. Reminders are sent within a 1-hour window of your selected time."})]})]})]})}const jq=[{id:"vcard",name:"vCard",description:"Apple Contacts, Outlook, Android",icon:Jp,component:P_e},{id:"google",name:"Google Contacts",description:"CSV export from Google",icon:fM,component:I_e},{id:"monica",name:"Monica CRM",description:"SQL export from Monica",icon:Nte,component:j_e}];function F_e(){var i;const[t,e]=T.useState("vcard"),r=s=>{s==="vcard"?window.location.href="/wp-json/prm/v1/export/vcard":s==="google-csv"&&(window.location.href="/wp-json/prm/v1/export/google-csv")},n=(i=jq.find(s=>s.id===t))==null?void 0:i.component;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Import data"}),u.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Import your contacts from various sources. Existing contacts with matching names will be updated instead of duplicated."}),u.jsx("div",{className:"border-b border-gray-200 mb-6",children:u.jsx("nav",{className:"-mb-px flex space-x-6","aria-label":"Import types",children:jq.map(s=>{const o=s.icon,a=t===s.id;return u.jsxs("button",{onClick:()=>e(s.id),className:`group inline-flex items-center py-3 px-1 border-b-2 font-medium text-sm transition-colors ${a?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[u.jsx(o,{className:`mr-2 h-5 w-5 ${a?"text-primary-500":"text-gray-400 group-hover:text-gray-500"}`}),u.jsxs("div",{className:"text-left",children:[u.jsx("span",{className:"block",children:s.name}),u.jsx("span",{className:`block text-xs font-normal ${a?"text-primary-400":"text-gray-400"}`,children:s.description})]})]},s.id)})})}),n&&u.jsx(n,{})]}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Export data"}),u.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Export all your contacts in a format compatible with other contact management systems."}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("button",{onClick:()=>r("vcard"),className:"w-full p-4 rounded-lg border border-gray-200 hover:bg-gray-50 text-left flex items-center gap-4",children:[u.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:u.jsx(Jp,{className:"w-6 h-6 text-primary-600"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium",children:"Export as vCard (.vcf)"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Compatible with Apple Contacts, Outlook, Android, and most contact apps"})]}),u.jsx(rI,{className:"w-5 h-5 text-gray-400"})]}),u.jsxs("button",{onClick:()=>r("google-csv"),className:"w-full p-4 rounded-lg border border-gray-200 hover:bg-gray-50 text-left flex items-center gap-4",children:[u.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:u.jsx(fM,{className:"w-6 h-6 text-primary-600"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium",children:"Export as Google Contacts CSV"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Import directly into Google Contacts or other CSV-compatible systems"})]}),u.jsx(rI,{className:"w-5 h-5 text-gray-400"})]})]})]})]})}function q_e({handleTriggerReminders:t,triggeringReminders:e,reminderMessage:r,handleRescheduleCron:n,reschedulingCron:i,cronMessage:s}){return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"User management"}),u.jsx("div",{className:"space-y-3",children:u.jsxs(ge,{to:"/settings/user-approval",className:"block p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors",children:[u.jsx("p",{className:"font-medium",children:"User approval"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Approve or deny access for new users"})]})})]}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Configuration"}),u.jsx("div",{className:"space-y-3",children:u.jsxs(ge,{to:"/settings/relationship-types",className:"block p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors",children:[u.jsx("p",{className:"font-medium",children:"Relationship types"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Manage relationship types and their inverse mappings"})]})})]}),u.jsxs("div",{className:"card p-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"System actions"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("button",{onClick:t,disabled:e,className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx("p",{className:"font-medium",children:"Trigger reminders"}),u.jsx("p",{className:"text-sm text-gray-500",children:e?"Sending...":"Manually send reminders for today"}),r&&u.jsx("p",{className:"text-sm text-green-600 mt-1",children:r})]}),u.jsxs("button",{onClick:n,disabled:i,className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx("p",{className:"font-medium",children:"Reschedule cron jobs"}),u.jsx("p",{className:"text-sm text-gray-500",children:i?"Rescheduling...":"Reschedule all user reminder cron jobs"}),s&&u.jsx("p",{className:"text-sm text-green-600 mt-1",children:s})]})]})]})]})}function L_e({config:t}){return u.jsxs("div",{className:"card p-6",children:[u.jsxs("h2",{className:"text-lg font-semibold mb-4",children:["About ",Nc]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{children:u.jsxs("p",{className:"text-sm text-gray-600",children:["Version ",t.version||"1.0.0"]})}),u.jsx("div",{className:"pt-4 border-t border-gray-200",children:u.jsxs("p",{className:"text-sm text-gray-600",children:[Nc," is a personal CRM system that helps you manage your contacts, track important dates, and maintain meaningful relationships."]})}),u.jsx("div",{className:"pt-4 border-t border-gray-200",children:u.jsx("p",{className:"text-sm text-gray-500",children:"Built with WordPress, React, and Tailwind CSS."})})]})]})}function Pq({value:t,onChange:e,relationshipTypes:r,currentTypeId:n=null}){const[i,s]=T.useState(""),[o,a]=T.useState(!1),l=T.useRef(null),c=T.useRef(null),d=T.useMemo(()=>r.sort((v,y)=>{const b=(v.name||"").toLowerCase(),w=(y.name||"").toLowerCase();return b<w?-1:b>w?1:0}),[r]),h=T.useMemo(()=>{if(!i)return d.slice(0,10);const v=i.toLowerCase();return d.filter(y=>(y.name||"").toLowerCase().includes(v)).slice(0,10)},[d,i]),f=T.useMemo(()=>d.find(v=>v.id===parseInt(t,10)),[d,t]);T.useEffect(()=>{const v=y=>{c.current&&!c.current.contains(y.target)&&l.current&&!l.current.contains(y.target)&&a(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const p=v=>{e(v?v.toString():""),s(""),a(!1)},m=()=>{e(""),s(""),a(!1)},g=f?f.name:"";return u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"relative",children:f&&!o?u.jsxs("div",{className:"flex items-center justify-between input pr-8 cursor-text",onClick:()=>a(!0),children:[u.jsx("span",{children:g}),u.jsx("button",{type:"button",onClick:v=>{v.stopPropagation(),m()},className:"absolute right-2 text-gray-400 hover:text-gray-600",children:u.jsx(Mr,{className:"w-4 h-4"})})]}):u.jsx("input",{ref:l,type:"text",value:i,onChange:v=>{s(v.target.value),a(!0)},onFocus:()=>a(!0),placeholder:"Search for a relationship type...",className:"input"})}),o&&(i||!f)&&u.jsx("div",{ref:c,className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:h.length>0?u.jsxs(u.Fragment,{children:[u.jsx("button",{type:"button",onClick:()=>p(null),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t?"":"bg-primary-50"}`,children:u.jsx("span",{className:"text-gray-500 italic",children:"None (no inverse)"})}),h.map(v=>u.jsx("button",{type:"button",onClick:()=>p(v.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t===v.id.toString()?"bg-primary-50":""}`,children:v.name},v.id))]}):u.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No relationship types found"})})]})}function B_e(){Hi("Relationship Types - Settings");const t=_t();if(!((window.prmConfig||{}).isAdmin||!1))return u.jsx("div",{className:"max-w-2xl mx-auto",children:u.jsxs("div",{className:"card p-8 text-center",children:[u.jsx(Ote,{className:"w-16 h-16 mx-auto text-amber-500 mb-4"}),u.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to manage relationship types. This feature is only available to administrators."}),u.jsx(ge,{to:"/settings",className:"btn-primary",children:"Back to Settings"})]})});const{data:n=[],isLoading:i}=ft({queryKey:["relationship-types"],queryFn:async()=>(await He.getRelationshipTypes()).data}),[s,o]=T.useState(null),[a,l]=T.useState(""),[c,d]=T.useState(""),[h,f]=T.useState(""),[p,m]=T.useState(""),[g,v]=T.useState(!1),y=mt({mutationFn:async({id:O,name:P,inverseId:j})=>{const A={name:P};return j&&(A.acf={inverse_relationship_type:parseInt(j,10)}),He.updateRelationshipType(O,A)},onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),o(null),l(""),d("")}}),b=mt({mutationFn:async({name:O,inverseId:P})=>{const j={name:O};return P&&(j.acf={inverse_relationship_type:parseInt(P,10)}),He.createRelationshipType(j)},onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),f(""),m(""),v(!1)}}),w=mt({mutationFn:O=>He.deleteRelationshipType(O),onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]})}}),x=mt({mutationFn:()=>He.restoreRelationshipTypeDefaults(),onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),alert("Default relationship type configurations have been restored.")},onError:()=>{alert("Failed to restore defaults. Please try again.")}});function S(){return u.jsxs("button",{onClick:()=>{window.confirm("This will restore all default inverse mappings and gender-dependent settings. Continue?")&&x.mutate()},disabled:x.isPending,className:"btn-secondary flex items-center gap-2",title:"Restore default inverse mappings and gender-dependent settings",children:[x.isPending?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600"}):u.jsx(kte,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Restore Defaults"})]})}const _=O=>{var j;o(O.id),l(O.name);const P=(j=O.acf)==null?void 0:j.inverse_relationship_type;d(P?P.toString():"")},E=()=>{o(null),l(""),d("")},N=()=>{if(!a.trim()){alert("Name is required");return}y.mutate({id:s,name:a.trim(),inverseId:c||null})},k=()=>{if(!h.trim()){alert("Name is required");return}b.mutate({name:h.trim(),inverseId:p||null})},C=(O,P)=>{window.confirm(`Are you sure you want to delete "${P}"? This cannot be undone.`)&&w.mutate(O)};return i?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):u.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:u.jsxs("div",{className:"card p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h1",{className:"text-2xl font-bold",children:"Relationship Types"}),u.jsx("div",{className:"flex gap-2",children:!g&&u.jsxs(u.Fragment,{children:[u.jsx(S,{}),u.jsxs("button",{onClick:()=>v(!0),className:"btn-primary flex items-center gap-2",children:[u.jsx(lr,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Add Relationship Type"})]})]})})]}),g&&u.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[u.jsx("h3",{className:"font-semibold mb-4",children:"Add New Relationship Type"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Name *"}),u.jsx("input",{type:"text",value:h,onChange:O=>f(O.target.value),className:"input",placeholder:"e.g., Parent, Spouse, Colleague"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Inverse Relationship Type"}),u.jsx(Pq,{value:p,onChange:m,relationshipTypes:n}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Select the inverse relationship type. For example, if this is "Parent", select "Child". If this is "Spouse" or "Acquaintance", select the same type (e.g., "Spouse"  "Spouse").'})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:k,disabled:b.isPending,className:"btn-primary flex items-center gap-2",children:[b.isPending?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):u.jsx(el,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Save"})]}),u.jsx("button",{onClick:()=>{v(!1),f(""),m("")},className:"btn-secondary",children:"Cancel"})]})]})]}),u.jsx("div",{className:"space-y-2",children:n.length===0?u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No relationship types found."}):n.map(O=>{var I,L;const P=s===O.id,j=(I=O.acf)==null?void 0:I.inverse_relationship_type,A=typeof j=="object"&&(j!=null&&j.ID)?j.ID:typeof j=="object"&&(j!=null&&j.id)?j.id:j,D=A?n.find(F=>F.id===A):null;return u.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:P?u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Name *"}),u.jsx("input",{type:"text",value:a,onChange:F=>l(F.target.value),className:"input"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:"Inverse Relationship Type"}),u.jsx(Pq,{value:c,onChange:d,relationshipTypes:n,currentTypeId:O.id}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Select the inverse relationship type. For example, if this is "Parent", select "Child". If this is "Spouse" or "Acquaintance", select the same type (e.g., "Spouse"  "Spouse").'})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:N,disabled:y.isPending,className:"btn-primary flex items-center gap-2",children:[y.isPending?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):u.jsx(el,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Save"})]}),u.jsxs("button",{onClick:E,className:"btn-secondary flex items-center gap-2",children:[u.jsx(Mr,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Cancel"})]})]})]}):u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"font-medium",children:O.name}),D&&u.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Inverse: ",u.jsx("span",{className:"font-medium",children:D.name})]}),!D&&((L=O.acf)==null?void 0:L.inverse_relationship_type)===null&&u.jsx("div",{className:"text-sm text-gray-400 mt-1 italic",children:"No inverse relationship"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>_(O),className:"p-2 text-gray-600 hover:text-primary-600 hover:bg-primary-50 rounded",title:"Edit",children:u.jsx(Zfe,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>C(O.id,O.name),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded",title:"Delete",children:u.jsx(di,{className:"w-4 h-4"})})]})]})},O.id)})})]})})}function z_e(){Hi("User Approval - Settings");const t=_t();if(!((window.prmConfig||{}).isAdmin||!1))return u.jsx("div",{className:"max-w-2xl mx-auto",children:u.jsxs("div",{className:"card p-8 text-center",children:[u.jsx(Ote,{className:"w-16 h-16 mx-auto text-amber-500 mb-4"}),u.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to manage user approvals. This feature is only available to administrators."}),u.jsx(ge,{to:"/settings",className:"btn-primary",children:"Back to Settings"})]})});const{data:n=[],isLoading:i}=ft({queryKey:["users"],queryFn:async()=>(await Le.getUsers()).data}),s=mt({mutationFn:p=>Le.approveUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),o=mt({mutationFn:p=>Le.denyUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),a=mt({mutationFn:p=>Le.deleteUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),l=p=>{window.confirm("Are you sure you want to approve this user?")&&s.mutate(p)},c=p=>{window.confirm("Are you sure you want to deny this user? They will not be able to access the system.")&&o.mutate(p)},d=(p,m)=>{window.confirm(`Are you sure you want to delete ${m}? This will permanently delete their account and all their related data (people, organizations, dates). This action cannot be undone.`)&&a.mutate(p)};if(i)return u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx(Sc,{className:"w-8 h-8 animate-spin text-primary-600"})});const h=n.filter(p=>!p.is_approved),f=n.filter(p=>p.is_approved);return u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs(ge,{to:"/settings",className:"btn-secondary flex items-center gap-2",children:[u.jsx(ps,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Back to Settings"})]}),u.jsx("h1",{className:"text-2xl font-semibold",children:"User Approval"})]}),u.jsxs("div",{className:"space-y-6",children:[h.length>0&&u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Pending Approval"}),u.jsx("div",{className:"space-y-3",children:h.map(p=>u.jsxs("div",{className:"card p-4 flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:p.name}),u.jsx("p",{className:"text-sm text-gray-500",children:p.email}),u.jsxs("p",{className:"text-xs text-gray-400",children:["Registered: ",new Date(p.registered).toLocaleDateString()]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>l(p.id),disabled:s.isPending||a.isPending,className:"btn-primary flex items-center gap-2",children:[u.jsx(OF,{className:"w-4 h-4"}),"Approve"]}),u.jsxs("button",{onClick:()=>c(p.id),disabled:o.isPending||a.isPending,className:"btn-secondary flex items-center gap-2",children:[u.jsx(IF,{className:"w-4 h-4"}),"Deny"]}),u.jsxs("button",{onClick:()=>d(p.id,p.name),disabled:s.isPending||o.isPending||a.isPending,className:"btn-danger flex items-center gap-2",children:[u.jsx(di,{className:"w-4 h-4"}),"Delete"]})]})]},p.id))})]}),f.length>0&&u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Approved Users"}),u.jsx("div",{className:"space-y-3",children:f.map(p=>u.jsxs("div",{className:"card p-4 flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-medium flex items-center gap-2",children:[p.name,u.jsx(OF,{className:"w-4 h-4 text-green-600"})]}),u.jsx("p",{className:"text-sm text-gray-500",children:p.email})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>c(p.id),disabled:o.isPending||a.isPending,className:"btn-secondary flex items-center gap-2",children:[u.jsx(IF,{className:"w-4 h-4"}),"Revoke Access"]}),u.jsxs("button",{onClick:()=>d(p.id,p.name),disabled:o.isPending||a.isPending,className:"btn-danger flex items-center gap-2",children:[u.jsx(di,{className:"w-4 h-4"}),"Delete"]})]})]},p.id))})]}),n.length===0&&u.jsx("div",{className:"card p-8 text-center",children:u.jsx("p",{className:"text-gray-600",children:"No Caelis users found."})})]})]})}/**
 * vis-data
 * http://visjs.org/
 *
 * Manage unstructured data using DataSet. Add, update, and remove data, and listen for changes in the data.
 *
 * @version 8.0.3
 * @date    2025-09-10T16:22:00.613Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var Iq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ix={exports:{}},Rq={},tf,Mq;function kr(){if(Mq)return tf;Mq=1;var t=function(e){return e&&e.Math===Math&&e};return tf=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof Iq=="object"&&Iq)||t(typeof tf=="object"&&tf)||function(){return this}()||Function("return this")(),tf}var sx,Aq;function Et(){return Aq||(Aq=1,sx=function(t){try{return!!t()}catch{return!0}}),sx}var ox,$q;function am(){if($q)return ox;$q=1;var t=Et();return ox=!t(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),ox}var ax,Dq;function W0(){if(Dq)return ax;Dq=1;var t=am(),e=Function.prototype,r=e.apply,n=e.call;return ax=typeof Reflect=="object"&&Reflect.apply||(t?n.bind(r):function(){return n.apply(r,arguments)}),ax}var lx,Fq;function jt(){if(Fq)return lx;Fq=1;var t=am(),e=Function.prototype,r=e.call,n=t&&e.bind.bind(r,r);return lx=t?n:function(i){return function(){return r.apply(i,arguments)}},lx}var cx,qq;function qo(){if(qq)return cx;qq=1;var t=jt(),e=t({}.toString),r=t("".slice);return cx=function(n){return r(e(n),8,-1)},cx}var ux,Lq;function Qie(){if(Lq)return ux;Lq=1;var t=qo(),e=jt();return ux=function(r){if(t(r)==="Function")return e(r)},ux}var dx,Bq;function Hr(){if(Bq)return dx;Bq=1;var t=typeof document=="object"&&document.all;return dx=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"},dx}var hx={},fx,zq;function Tr(){if(zq)return fx;zq=1;var t=Et();return fx=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),fx}var px,Vq;function ni(){if(Vq)return px;Vq=1;var t=am(),e=Function.prototype.call;return px=t?e.bind(e):function(){return e.apply(e,arguments)},px}var mx={},Uq;function uA(){if(Uq)return mx;Uq=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,r=e&&!t.call({1:2},1);return mx.f=r?function(i){var s=e(this,i);return!!s&&s.enumerable}:t,mx}var gx,Hq;function lm(){return Hq||(Hq=1,gx=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}),gx}var yx,Wq;function K0(){if(Wq)return yx;Wq=1;var t=jt(),e=Et(),r=qo(),n=Object,i=t("".split);return yx=e(function(){return!n("z").propertyIsEnumerable(0)})?function(s){return r(s)==="String"?i(s,""):n(s)}:n,yx}var vx,Kq;function cm(){return Kq||(Kq=1,vx=function(t){return t==null}),vx}var bx,Gq;function Gc(){if(Gq)return bx;Gq=1;var t=cm(),e=TypeError;return bx=function(r){if(t(r))throw new e("Can't call method on "+r);return r},bx}var xx,Yq;function Us(){if(Yq)return xx;Yq=1;var t=K0(),e=Gc();return xx=function(r){return t(e(r))},xx}var wx,Qq;function Dn(){if(Qq)return wx;Qq=1;var t=Hr();return wx=function(e){return typeof e=="object"?e!==null:t(e)},wx}var Sx,Xq;function $r(){return Xq||(Xq=1,Sx={}),Sx}var _x,Jq;function wi(){if(Jq)return _x;Jq=1;var t=$r(),e=kr(),r=Hr(),n=function(i){return r(i)?i:void 0};return _x=function(i,s){return arguments.length<2?n(t[i])||n(e[i]):t[i]&&t[i][s]||e[i]&&e[i][s]},_x}var Ex,Zq;function Wr(){if(Zq)return Ex;Zq=1;var t=jt();return Ex=t({}.isPrototypeOf),Ex}var Nx,e5;function ah(){if(e5)return Nx;e5=1;var t=kr(),e=t.navigator,r=e&&e.userAgent;return Nx=r?String(r):"",Nx}var Cx,t5;function um(){if(t5)return Cx;t5=1;var t=kr(),e=ah(),r=t.process,n=t.Deno,i=r&&r.versions||n&&n.version,s=i&&i.v8,o,a;return s&&(o=s.split("."),a=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!a&&e&&(o=e.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=e.match(/Chrome\/(\d+)/),o&&(a=+o[1]))),Cx=a,Cx}var kx,r5;function lh(){if(r5)return kx;r5=1;var t=um(),e=Et(),r=kr(),n=r.String;return kx=!!Object.getOwnPropertySymbols&&!e(function(){var i=Symbol("symbol detection");return!n(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&t&&t<41}),kx}var Tx,n5;function Xie(){if(n5)return Tx;n5=1;var t=lh();return Tx=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Tx}var Ox,i5;function dm(){if(i5)return Ox;i5=1;var t=wi(),e=Hr(),r=Wr(),n=Xie(),i=Object;return Ox=n?function(s){return typeof s=="symbol"}:function(s){var o=t("Symbol");return e(o)&&r(o.prototype,i(s))},Ox}var jx,s5;function ch(){if(s5)return jx;s5=1;var t=String;return jx=function(e){try{return t(e)}catch{return"Object"}},jx}var Px,o5;function Lo(){if(o5)return Px;o5=1;var t=Hr(),e=ch(),r=TypeError;return Px=function(n){if(t(n))return n;throw new r(e(n)+" is not a function")},Px}var Ix,a5;function dA(){if(a5)return Ix;a5=1;var t=Lo(),e=cm();return Ix=function(r,n){var i=r[n];return e(i)?void 0:t(i)},Ix}var Rx,l5;function V_e(){if(l5)return Rx;l5=1;var t=ni(),e=Hr(),r=Dn(),n=TypeError;return Rx=function(i,s){var o,a;if(s==="string"&&e(o=i.toString)&&!r(a=t(o,i))||e(o=i.valueOf)&&!r(a=t(o,i))||s!=="string"&&e(o=i.toString)&&!r(a=t(o,i)))return a;throw new n("Can't convert object to primitive value")},Rx}var Mx={exports:{}},Ax,c5;function uh(){return c5||(c5=1,Ax=!0),Ax}var $x,u5;function U_e(){if(u5)return $x;u5=1;var t=kr(),e=Object.defineProperty;return $x=function(r,n){try{e(t,r,{value:n,configurable:!0,writable:!0})}catch{t[r]=n}return n},$x}var d5;function hA(){if(d5)return Mx.exports;d5=1;var t=uh(),e=kr(),r=U_e(),n="__core-js_shared__",i=Mx.exports=e[n]||r(n,{});return(i.versions||(i.versions=[])).push({version:"3.44.0",mode:t?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),Mx.exports}var Dx,h5;function dh(){if(h5)return Dx;h5=1;var t=hA();return Dx=function(e,r){return t[e]||(t[e]=r||{})},Dx}var Fx,f5;function vs(){if(f5)return Fx;f5=1;var t=Gc(),e=Object;return Fx=function(r){return e(t(r))},Fx}var qx,p5;function Kr(){if(p5)return qx;p5=1;var t=jt(),e=vs(),r=t({}.hasOwnProperty);return qx=Object.hasOwn||function(i,s){return r(e(i),s)},qx}var Lx,m5;function G0(){if(m5)return Lx;m5=1;var t=jt(),e=0,r=Math.random(),n=t(1.1.toString);return Lx=function(i){return"Symbol("+(i===void 0?"":i)+")_"+n(++e+r,36)},Lx}var Bx,g5;function Gr(){if(g5)return Bx;g5=1;var t=kr(),e=dh(),r=Kr(),n=G0(),i=lh(),s=Xie(),o=t.Symbol,a=e("wks"),l=s?o.for||o:o&&o.withoutSetter||n;return Bx=function(c){return r(a,c)||(a[c]=i&&r(o,c)?o[c]:l("Symbol."+c)),a[c]},Bx}var zx,y5;function Jie(){if(y5)return zx;y5=1;var t=ni(),e=Dn(),r=dm(),n=dA(),i=V_e(),s=Gr(),o=TypeError,a=s("toPrimitive");return zx=function(l,c){if(!e(l)||r(l))return l;var d=n(l,a),h;if(d){if(c===void 0&&(c="default"),h=t(d,l,c),!e(h)||r(h))return h;throw new o("Can't convert object to primitive value")}return c===void 0&&(c="number"),i(l,c)},zx}var Vx,v5;function fA(){if(v5)return Vx;v5=1;var t=Jie(),e=dm();return Vx=function(r){var n=t(r,"string");return e(n)?n:n+""},Vx}var Ux,b5;function Zie(){if(b5)return Ux;b5=1;var t=kr(),e=Dn(),r=t.document,n=e(r)&&e(r.createElement);return Ux=function(i){return n?r.createElement(i):{}},Ux}var Hx,x5;function ese(){if(x5)return Hx;x5=1;var t=Tr(),e=Et(),r=Zie();return Hx=!t&&!e(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7}),Hx}var w5;function Y0(){if(w5)return hx;w5=1;var t=Tr(),e=ni(),r=uA(),n=lm(),i=Us(),s=fA(),o=Kr(),a=ese(),l=Object.getOwnPropertyDescriptor;return hx.f=t?l:function(d,h){if(d=i(d),h=s(h),a)try{return l(d,h)}catch{}if(o(d,h))return n(!e(r.f,d,h),d[h])},hx}var Wx,S5;function H_e(){if(S5)return Wx;S5=1;var t=Et(),e=Hr(),r=/#|\.prototype\./,n=function(l,c){var d=s[i(l)];return d===a?!0:d===o?!1:e(c)?t(c):!!c},i=n.normalize=function(l){return String(l).replace(r,".").toLowerCase()},s=n.data={},o=n.NATIVE="N",a=n.POLYFILL="P";return Wx=n,Wx}var Kx,_5;function Q0(){if(_5)return Kx;_5=1;var t=Qie(),e=Lo(),r=am(),n=t(t.bind);return Kx=function(i,s){return e(i),s===void 0?i:r?n(i,s):function(){return i.apply(s,arguments)}},Kx}var Gx={},Yx,E5;function tse(){if(E5)return Yx;E5=1;var t=Tr(),e=Et();return Yx=t&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),Yx}var Qx,N5;function Bo(){if(N5)return Qx;N5=1;var t=Dn(),e=String,r=TypeError;return Qx=function(n){if(t(n))return n;throw new r(e(n)+" is not an object")},Qx}var C5;function Wi(){if(C5)return Gx;C5=1;var t=Tr(),e=ese(),r=tse(),n=Bo(),i=fA(),s=TypeError,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l="enumerable",c="configurable",d="writable";return Gx.f=t?r?function(f,p,m){if(n(f),p=i(p),n(m),typeof f=="function"&&p==="prototype"&&"value"in m&&d in m&&!m[d]){var g=a(f,p);g&&g[d]&&(f[p]=m.value,m={configurable:c in m?m[c]:g[c],enumerable:l in m?m[l]:g[l],writable:!1})}return o(f,p,m)}:o:function(f,p,m){if(n(f),p=i(p),n(m),e)try{return o(f,p,m)}catch{}if("get"in m||"set"in m)throw new s("Accessors not supported");return"value"in m&&(f[p]=m.value),f},Gx}var Xx,k5;function hh(){if(k5)return Xx;k5=1;var t=Tr(),e=Wi(),r=lm();return Xx=t?function(n,i,s){return e.f(n,i,r(1,s))}:function(n,i,s){return n[i]=s,n},Xx}var Jx,T5;function Ve(){if(T5)return Jx;T5=1;var t=kr(),e=W0(),r=Qie(),n=Hr(),i=Y0().f,s=H_e(),o=$r(),a=Q0(),l=hh(),c=Kr(),d=function(h){var f=function(p,m,g){if(this instanceof f){switch(arguments.length){case 0:return new h;case 1:return new h(p);case 2:return new h(p,m)}return new h(p,m,g)}return e(h,this,arguments)};return f.prototype=h.prototype,f};return Jx=function(h,f){var p=h.target,m=h.global,g=h.stat,v=h.proto,y=m?t:g?t[p]:t[p]&&t[p].prototype,b=m?o:o[p]||l(o,p,{})[p],w=b.prototype,x,S,_,E,N,k,C,O,P;for(E in f)x=s(m?E:p+(g?".":"#")+E,h.forced),S=!x&&y&&c(y,E),k=b[E],S&&(h.dontCallGetSet?(P=i(y,E),C=P&&P.value):C=y[E]),N=S&&C?C:f[E],!(!x&&!v&&typeof k==typeof N)&&(h.bind&&S?O=a(N,t):h.wrap&&S?O=d(N):v&&n(N)?O=r(N):O=N,(h.sham||N&&N.sham||k&&k.sham)&&l(O,"sham",!0),l(b,E,O),v&&(_=p+"Prototype",c(o,_)||l(o,_,{}),l(o[_],E,N),h.real&&w&&(x||!w[E])&&l(w,E,N)))},Jx}var O5;function W_e(){if(O5)return Rq;O5=1;var t=Ve(),e=Tr(),r=Wi().f;return t({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!e},{defineProperty:r}),Rq}var j5;function K_e(){if(j5)return ix.exports;j5=1,W_e();var t=$r(),e=t.Object,r=ix.exports=function(i,s,o){return e.defineProperty(i,s,o)};return e.defineProperty.sham&&(r.sham=!0),ix.exports}var Zx,P5;function rse(){if(P5)return Zx;P5=1;var t=K_e();return Zx=t,Zx}var ew,I5;function G_e(){if(I5)return ew;I5=1;var t=rse();return ew=t,ew}var tw,R5;function Y_e(){if(R5)return tw;R5=1;var t=G_e();return tw=t,tw}var rw,M5;function Q_e(){return M5||(M5=1,rw=Y_e()),rw}var X_e=Q_e(),J_e=rt(X_e),A5={},nw,$5;function Yc(){if($5)return nw;$5=1;var t=qo();return nw=Array.isArray||function(r){return t(r)==="Array"},nw}var iw,D5;function Z_e(){if(D5)return iw;D5=1;var t=Math.ceil,e=Math.floor;return iw=Math.trunc||function(n){var i=+n;return(i>0?e:t)(i)},iw}var sw,F5;function fh(){if(F5)return sw;F5=1;var t=Z_e();return sw=function(e){var r=+e;return r!==r||r===0?0:t(r)},sw}var ow,q5;function nse(){if(q5)return ow;q5=1;var t=fh(),e=Math.min;return ow=function(r){var n=t(r);return n>0?e(n,9007199254740991):0},ow}var aw,L5;function fl(){if(L5)return aw;L5=1;var t=nse();return aw=function(e){return t(e.length)},aw}var lw,B5;function ise(){if(B5)return lw;B5=1;var t=TypeError,e=9007199254740991;return lw=function(r){if(r>e)throw t("Maximum allowed index exceeded");return r},lw}var cw,z5;function X0(){if(z5)return cw;z5=1;var t=Tr(),e=Wi(),r=lm();return cw=function(n,i,s){t?e.f(n,i,r(0,s)):n[i]=s},cw}var uw,V5;function pA(){if(V5)return uw;V5=1;var t=Gr(),e=t("toStringTag"),r={};return r[e]="z",uw=String(r)==="[object z]",uw}var dw,U5;function pl(){if(U5)return dw;U5=1;var t=pA(),e=Hr(),r=qo(),n=Gr(),i=n("toStringTag"),s=Object,o=r(function(){return arguments}())==="Arguments",a=function(l,c){try{return l[c]}catch{}};return dw=t?r:function(l){var c,d,h;return l===void 0?"Undefined":l===null?"Null":typeof(d=a(c=s(l),i))=="string"?d:o?r(c):(h=r(c))==="Object"&&e(c.callee)?"Arguments":h},dw}var hw,H5;function eEe(){if(H5)return hw;H5=1;var t=jt(),e=Hr(),r=hA(),n=t(Function.toString);return e(r.inspectSource)||(r.inspectSource=function(i){return n(i)}),hw=r.inspectSource,hw}var fw,W5;function sse(){if(W5)return fw;W5=1;var t=jt(),e=Et(),r=Hr(),n=pl(),i=wi(),s=eEe(),o=function(){},a=i("Reflect","construct"),l=/^\s*(?:class|function)\b/,c=t(l.exec),d=!l.test(o),h=function(m){if(!r(m))return!1;try{return a(o,[],m),!0}catch{return!1}},f=function(m){if(!r(m))return!1;switch(n(m)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!c(l,s(m))}catch{return!0}};return f.sham=!0,fw=!a||e(function(){var p;return h(h.call)||!h(Object)||!h(function(){p=!0})||p})?f:h,fw}var pw,K5;function tEe(){if(K5)return pw;K5=1;var t=Yc(),e=sse(),r=Dn(),n=Gr(),i=n("species"),s=Array;return pw=function(o){var a;return t(o)&&(a=o.constructor,e(a)&&(a===s||t(a.prototype))?a=void 0:r(a)&&(a=a[i],a===null&&(a=void 0))),a===void 0?s:a},pw}var mw,G5;function mA(){if(G5)return mw;G5=1;var t=tEe();return mw=function(e,r){return new(t(e))(r===0?0:r)},mw}var gw,Y5;function hm(){if(Y5)return gw;Y5=1;var t=Et(),e=Gr(),r=um(),n=e("species");return gw=function(i){return r>=51||!t(function(){var s=[],o=s.constructor={};return o[n]=function(){return{foo:1}},s[i](Boolean).foo!==1})},gw}var Q5;function ose(){if(Q5)return A5;Q5=1;var t=Ve(),e=Et(),r=Yc(),n=Dn(),i=vs(),s=fl(),o=ise(),a=X0(),l=mA(),c=hm(),d=Gr(),h=um(),f=d("isConcatSpreadable"),p=h>=51||!e(function(){var v=[];return v[f]=!1,v.concat()[0]!==v}),m=function(v){if(!n(v))return!1;var y=v[f];return y!==void 0?!!y:r(v)},g=!p||!c("concat");return t({target:"Array",proto:!0,arity:1,forced:g},{concat:function(y){var b=i(this),w=l(b,0),x=0,S,_,E,N,k;for(S=-1,E=arguments.length;S<E;S++)if(k=S===-1?b:arguments[S],m(k))for(N=s(k),o(x+N),_=0;_<N;_++,x++)_ in k&&a(w,x,k[_]);else o(x+1),a(w,x++,k);return w.length=x,w}}),A5}var X5={},J5={},yw,Z5;function ml(){if(Z5)return yw;Z5=1;var t=pl(),e=String;return yw=function(r){if(t(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(r)},yw}var vw={},bw,e3;function gA(){if(e3)return bw;e3=1;var t=fh(),e=Math.max,r=Math.min;return bw=function(n,i){var s=t(n);return s<0?e(s+i,0):r(s,i)},bw}var xw,t3;function rEe(){if(t3)return xw;t3=1;var t=Us(),e=gA(),r=fl(),n=function(i){return function(s,o,a){var l=t(s),c=r(l);if(c===0)return!i&&-1;var d=e(a,c),h;if(i&&o!==o){for(;c>d;)if(h=l[d++],h!==h)return!0}else for(;c>d;d++)if((i||d in l)&&l[d]===o)return i||d||0;return!i&&-1}};return xw={includes:n(!0),indexOf:n(!1)},xw}var ww,r3;function fm(){return r3||(r3=1,ww={}),ww}var Sw,n3;function ase(){if(n3)return Sw;n3=1;var t=jt(),e=Kr(),r=Us(),n=rEe().indexOf,i=fm(),s=t([].push);return Sw=function(o,a){var l=r(o),c=0,d=[],h;for(h in l)!e(i,h)&&e(l,h)&&s(d,h);for(;a.length>c;)e(l,h=a[c++])&&(~n(d,h)||s(d,h));return d},Sw}var _w,i3;function yA(){return i3||(i3=1,_w=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),_w}var Ew,s3;function J0(){if(s3)return Ew;s3=1;var t=ase(),e=yA();return Ew=Object.keys||function(n){return t(n,e)},Ew}var o3;function vA(){if(o3)return vw;o3=1;var t=Tr(),e=tse(),r=Wi(),n=Bo(),i=Us(),s=J0();return vw.f=t&&!e?Object.defineProperties:function(a,l){n(a);for(var c=i(l),d=s(l),h=d.length,f=0,p;h>f;)r.f(a,p=d[f++],c[p]);return a},vw}var Nw,a3;function nEe(){if(a3)return Nw;a3=1;var t=wi();return Nw=t("document","documentElement"),Nw}var Cw,l3;function Z0(){if(l3)return Cw;l3=1;var t=dh(),e=G0(),r=t("keys");return Cw=function(n){return r[n]||(r[n]=e(n))},Cw}var kw,c3;function pm(){if(c3)return kw;c3=1;var t=Bo(),e=vA(),r=yA(),n=fm(),i=nEe(),s=Zie(),o=Z0(),a=">",l="<",c="prototype",d="script",h=o("IE_PROTO"),f=function(){},p=function(b){return l+d+a+b+l+"/"+d+a},m=function(b){b.write(p("")),b.close();var w=b.parentWindow.Object;return b=null,w},g=function(){var b=s("iframe"),w="java"+d+":",x;return b.style.display="none",i.appendChild(b),b.src=String(w),x=b.contentWindow.document,x.open(),x.write(p("document.F=Object")),x.close(),x.F},v,y=function(){try{v=new ActiveXObject("htmlfile")}catch{}y=typeof document<"u"?document.domain&&v?m(v):g():m(v);for(var b=r.length;b--;)delete y[c][r[b]];return y()};return n[h]=!0,kw=Object.create||function(w,x){var S;return w!==null?(f[c]=t(w),S=new f,f[c]=null,S[h]=w):S=y(),x===void 0?S:e.f(S,x)},kw}var Tw={},u3;function eb(){if(u3)return Tw;u3=1;var t=ase(),e=yA(),r=e.concat("length","prototype");return Tw.f=Object.getOwnPropertyNames||function(i){return t(i,r)},Tw}var Ow={},jw,d3;function ph(){if(d3)return jw;d3=1;var t=jt();return jw=t([].slice),jw}var h3;function lse(){if(h3)return Ow;h3=1;var t=qo(),e=Us(),r=eb().f,n=ph(),i=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(o){try{return r(o)}catch{return n(i)}};return Ow.f=function(a){return i&&t(a)==="Window"?s(a):r(e(a))},Ow}var Pw={},f3;function tb(){return f3||(f3=1,Pw.f=Object.getOwnPropertySymbols),Pw}var Iw,p3;function mm(){if(p3)return Iw;p3=1;var t=hh();return Iw=function(e,r,n,i){return i&&i.enumerable?e[r]=n:t(e,r,n),e},Iw}var Rw,m3;function bA(){if(m3)return Rw;m3=1;var t=Wi();return Rw=function(e,r,n){return t.f(e,r,n)},Rw}var Mw={},g3;function rb(){if(g3)return Mw;g3=1;var t=Gr();return Mw.f=t,Mw}var Aw,y3;function Jt(){if(y3)return Aw;y3=1;var t=$r(),e=Kr(),r=rb(),n=Wi().f;return Aw=function(i){var s=t.Symbol||(t.Symbol={});e(s,i)||n(s,i,{value:r.f(i)})},Aw}var $w,v3;function cse(){if(v3)return $w;v3=1;var t=ni(),e=wi(),r=Gr(),n=mm();return $w=function(){var i=e("Symbol"),s=i&&i.prototype,o=s&&s.valueOf,a=r("toPrimitive");s&&!s[a]&&n(s,a,function(l){return t(o,this)},{arity:1})},$w}var Dw,b3;function iEe(){if(b3)return Dw;b3=1;var t=pA(),e=pl();return Dw=t?{}.toString:function(){return"[object "+e(this)+"]"},Dw}var Fw,x3;function Qc(){if(x3)return Fw;x3=1;var t=pA(),e=Wi().f,r=hh(),n=Kr(),i=iEe(),s=Gr(),o=s("toStringTag");return Fw=function(a,l,c,d){var h=c?a:a&&a.prototype;h&&(n(h,o)||e(h,o,{configurable:!0,value:l}),d&&!t&&r(h,"toString",i))},Fw}var qw,w3;function sEe(){if(w3)return qw;w3=1;var t=kr(),e=Hr(),r=t.WeakMap;return qw=e(r)&&/native code/.test(String(r)),qw}var Lw,S3;function gm(){if(S3)return Lw;S3=1;var t=sEe(),e=kr(),r=Dn(),n=hh(),i=Kr(),s=hA(),o=Z0(),a=fm(),l="Object already initialized",c=e.TypeError,d=e.WeakMap,h,f,p,m=function(b){return p(b)?f(b):h(b,{})},g=function(b){return function(w){var x;if(!r(w)||(x=f(w)).type!==b)throw new c("Incompatible receiver, "+b+" required");return x}};if(t||s.state){var v=s.state||(s.state=new d);v.get=v.get,v.has=v.has,v.set=v.set,h=function(b,w){if(v.has(b))throw new c(l);return w.facade=b,v.set(b,w),w},f=function(b){return v.get(b)||{}},p=function(b){return v.has(b)}}else{var y=o("state");a[y]=!0,h=function(b,w){if(i(b,y))throw new c(l);return w.facade=b,n(b,y,w),w},f=function(b){return i(b,y)?b[y]:{}},p=function(b){return i(b,y)}}return Lw={set:h,get:f,has:p,enforce:m,getterFor:g},Lw}var Bw,_3;function mh(){if(_3)return Bw;_3=1;var t=Q0(),e=jt(),r=K0(),n=vs(),i=fl(),s=mA(),o=e([].push),a=function(l){var c=l===1,d=l===2,h=l===3,f=l===4,p=l===6,m=l===7,g=l===5||p;return function(v,y,b,w){for(var x=n(v),S=r(x),_=i(S),E=t(y,b),N=0,k=w||s,C=c?k(v,_):d||m?k(v,0):void 0,O,P;_>N;N++)if((g||N in S)&&(O=S[N],P=E(O,N,x),l))if(c)C[N]=P;else if(P)switch(l){case 3:return!0;case 5:return O;case 6:return N;case 2:o(C,O)}else switch(l){case 4:return!1;case 7:o(C,O)}return p?-1:h||f?f:C}};return Bw={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterReject:a(7)},Bw}var E3;function oEe(){if(E3)return J5;E3=1;var t=Ve(),e=kr(),r=ni(),n=jt(),i=uh(),s=Tr(),o=lh(),a=Et(),l=Kr(),c=Wr(),d=Bo(),h=Us(),f=fA(),p=ml(),m=lm(),g=pm(),v=J0(),y=eb(),b=lse(),w=tb(),x=Y0(),S=Wi(),_=vA(),E=uA(),N=mm(),k=bA(),C=dh(),O=Z0(),P=fm(),j=G0(),A=Gr(),D=rb(),I=Jt(),L=cse(),F=Qc(),W=gm(),V=mh().forEach,H=O("hidden"),K="Symbol",de="prototype",be=W.set,Fe=W.getterFor(K),pe=Object[de],Oe=e.Symbol,$e=Oe&&Oe[de],ut=e.RangeError,it=e.TypeError,gt=e.QObject,J=x.f,Ee=S.f,Ge=b.f,st=E.f,er=n([].push),Ce=C("symbols"),Je=C("op-symbols"),Bt=C("wks"),dt=!gt||!gt[de]||!gt[de].findChild,M=function(Ne,se,fe){var he=J(pe,se);he&&delete pe[se],Ee(Ne,se,fe),he&&Ne!==pe&&Ee(pe,se,he)},q=s&&a(function(){return g(Ee({},"a",{get:function(){return Ee(this,"a",{value:7}).a}})).a!==7})?M:Ee,B=function(Ne,se){var fe=Ce[Ne]=g($e);return be(fe,{type:K,tag:Ne,description:se}),s||(fe.description=se),fe},ie=function(se,fe,he){se===pe&&ie(Je,fe,he),d(se);var ke=f(fe);return d(he),l(Ce,ke)?(he.enumerable?(l(se,H)&&se[H][ke]&&(se[H][ke]=!1),he=g(he,{enumerable:m(0,!1)})):(l(se,H)||Ee(se,H,m(1,g(null))),se[H][ke]=!0),q(se,ke,he)):Ee(se,ke,he)},Z=function(se,fe){d(se);var he=h(fe),ke=v(he).concat(tr(he));return V(ke,function(ot){(!s||r(ve,he,ot))&&ie(se,ot,he[ot])}),se},X=function(se,fe){return fe===void 0?g(se):Z(g(se),fe)},ve=function(se){var fe=f(se),he=r(st,this,fe);return this===pe&&l(Ce,fe)&&!l(Je,fe)?!1:he||!l(this,fe)||!l(Ce,fe)||l(this,H)&&this[H][fe]?he:!0},Ye=function(se,fe){var he=h(se),ke=f(fe);if(!(he===pe&&l(Ce,ke)&&!l(Je,ke))){var ot=J(he,ke);return ot&&l(Ce,ke)&&!(l(he,H)&&he[H][ke])&&(ot.enumerable=!0),ot}},Ze=function(se){var fe=Ge(h(se)),he=[];return V(fe,function(ke){!l(Ce,ke)&&!l(P,ke)&&er(he,ke)}),he},tr=function(Ne){var se=Ne===pe,fe=Ge(se?Je:h(Ne)),he=[];return V(fe,function(ke){l(Ce,ke)&&(!se||l(pe,ke))&&er(he,Ce[ke])}),he};return o||(Oe=function(){if(c($e,this))throw new it("Symbol is not a constructor");var se=!arguments.length||arguments[0]===void 0?void 0:p(arguments[0]),fe=j(se),he=function(ke){var ot=this===void 0?e:this;ot===pe&&r(he,Je,ke),l(ot,H)&&l(ot[H],fe)&&(ot[H][fe]=!1);var oi=m(1,ke);try{q(ot,fe,oi)}catch(Xi){if(!(Xi instanceof ut))throw Xi;M(ot,fe,oi)}};return s&&dt&&q(pe,fe,{configurable:!0,set:he}),B(fe,se)},$e=Oe[de],N($e,"toString",function(){return Fe(this).tag}),N(Oe,"withoutSetter",function(Ne){return B(j(Ne),Ne)}),E.f=ve,S.f=ie,_.f=Z,x.f=Ye,y.f=b.f=Ze,w.f=tr,D.f=function(Ne){return B(A(Ne),Ne)},s&&(k($e,"description",{configurable:!0,get:function(){return Fe(this).description}}),i||N(pe,"propertyIsEnumerable",ve,{unsafe:!0}))),t({global:!0,constructor:!0,wrap:!0,forced:!o,sham:!o},{Symbol:Oe}),V(v(Bt),function(Ne){I(Ne)}),t({target:K,stat:!0,forced:!o},{useSetter:function(){dt=!0},useSimple:function(){dt=!1}}),t({target:"Object",stat:!0,forced:!o,sham:!s},{create:X,defineProperty:ie,defineProperties:Z,getOwnPropertyDescriptor:Ye}),t({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:Ze}),L(),F(Oe,K),P[H]=!0,J5}var N3={},zw,C3;function use(){if(C3)return zw;C3=1;var t=lh();return zw=t&&!!Symbol.for&&!!Symbol.keyFor,zw}var k3;function aEe(){if(k3)return N3;k3=1;var t=Ve(),e=wi(),r=Kr(),n=ml(),i=dh(),s=use(),o=i("string-to-symbol-registry"),a=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{for:function(l){var c=n(l);if(r(o,c))return o[c];var d=e("Symbol")(c);return o[c]=d,a[d]=c,d}}),N3}var T3={},O3;function lEe(){if(O3)return T3;O3=1;var t=Ve(),e=Kr(),r=dm(),n=ch(),i=dh(),s=use(),o=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{keyFor:function(l){if(!r(l))throw new TypeError(n(l)+" is not a symbol");if(e(o,l))return o[l]}}),T3}var j3={},Vw,P3;function cEe(){if(P3)return Vw;P3=1;var t=jt(),e=Yc(),r=Hr(),n=qo(),i=ml(),s=t([].push);return Vw=function(o){if(r(o))return o;if(e(o)){for(var a=o.length,l=[],c=0;c<a;c++){var d=o[c];typeof d=="string"?s(l,d):(typeof d=="number"||n(d)==="Number"||n(d)==="String")&&s(l,i(d))}var h=l.length,f=!0;return function(p,m){if(f)return f=!1,m;if(e(this))return m;for(var g=0;g<h;g++)if(l[g]===p)return m}}},Vw}var I3;function dse(){if(I3)return j3;I3=1;var t=Ve(),e=wi(),r=W0(),n=ni(),i=jt(),s=Et(),o=Hr(),a=dm(),l=ph(),c=cEe(),d=lh(),h=String,f=e("JSON","stringify"),p=i(/./.exec),m=i("".charAt),g=i("".charCodeAt),v=i("".replace),y=i(1.1.toString),b=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,x=/^[\uDC00-\uDFFF]$/,S=!d||s(function(){var k=e("Symbol")("stringify detection");return f([k])!=="[null]"||f({a:k})!=="{}"||f(Object(k))!=="{}"}),_=s(function(){return f("\uDF06\uD834")!=='"\\udf06\\ud834"'||f("\uDEAD")!=='"\\udead"'}),E=function(k,C){var O=l(arguments),P=c(C);if(!(!o(P)&&(k===void 0||a(k))))return O[1]=function(j,A){if(o(P)&&(A=n(P,this,h(j),A)),!a(A))return A},r(f,null,O)},N=function(k,C,O){var P=m(O,C-1),j=m(O,C+1);return p(w,k)&&!p(x,j)||p(x,k)&&!p(w,P)?"\\u"+y(g(k,0),16):k};return f&&t({target:"JSON",stat:!0,arity:3,forced:S||_},{stringify:function(C,O,P){var j=l(arguments),A=r(S?E:f,null,j);return _&&typeof A=="string"?v(A,b,N):A}}),j3}var R3={},M3;function uEe(){if(M3)return R3;M3=1;var t=Ve(),e=lh(),r=Et(),n=tb(),i=vs(),s=!e||r(function(){n.f(1)});return t({target:"Object",stat:!0,forced:s},{getOwnPropertySymbols:function(a){var l=n.f;return l?l(i(a)):[]}}),R3}var A3;function hse(){return A3||(A3=1,oEe(),aEe(),lEe(),dse(),uEe()),X5}var $3={},D3;function fse(){if(D3)return $3;D3=1;var t=Jt();return t("asyncDispose"),$3}var F3={},q3;function dEe(){if(q3)return F3;q3=1;var t=Jt();return t("asyncIterator"),F3}var L3={},B3;function pse(){if(B3)return L3;B3=1;var t=Jt();return t("dispose"),L3}var z3={},V3;function hEe(){if(V3)return z3;V3=1;var t=Jt();return t("hasInstance"),z3}var U3={},H3;function fEe(){if(H3)return U3;H3=1;var t=Jt();return t("isConcatSpreadable"),U3}var W3={},K3;function mse(){if(K3)return W3;K3=1;var t=Jt();return t("iterator"),W3}var G3={},Y3;function pEe(){if(Y3)return G3;Y3=1;var t=Jt();return t("match"),G3}var Q3={},X3;function mEe(){if(X3)return Q3;X3=1;var t=Jt();return t("matchAll"),Q3}var J3={},Z3;function gEe(){if(Z3)return J3;Z3=1;var t=Jt();return t("replace"),J3}var eL={},tL;function yEe(){if(tL)return eL;tL=1;var t=Jt();return t("search"),eL}var rL={},nL;function vEe(){if(nL)return rL;nL=1;var t=Jt();return t("species"),rL}var iL={},sL;function bEe(){if(sL)return iL;sL=1;var t=Jt();return t("split"),iL}var oL={},aL;function gse(){if(aL)return oL;aL=1;var t=Jt(),e=cse();return t("toPrimitive"),e(),oL}var lL={},cL;function xEe(){if(cL)return lL;cL=1;var t=wi(),e=Jt(),r=Qc();return e("toStringTag"),r(t("Symbol"),"Symbol"),lL}var uL={},dL;function wEe(){if(dL)return uL;dL=1;var t=Jt();return t("unscopables"),uL}var hL={},fL;function SEe(){if(fL)return hL;fL=1;var t=kr(),e=Qc();return e(t.JSON,"JSON",!0),hL}var Uw,pL;function _Ee(){if(pL)return Uw;pL=1,ose(),hse(),fse(),dEe(),pse(),hEe(),fEe(),mse(),pEe(),mEe(),gEe(),yEe(),vEe(),bEe(),gse(),xEe(),wEe(),SEe();var t=$r();return Uw=t.Symbol,Uw}var mL={},Hw,gL;function EEe(){return gL||(gL=1,Hw=function(){}),Hw}var Ww,yL;function gh(){return yL||(yL=1,Ww={}),Ww}var Kw,vL;function NEe(){if(vL)return Kw;vL=1;var t=Tr(),e=Kr(),r=Function.prototype,n=t&&Object.getOwnPropertyDescriptor,i=e(r,"name"),s=i&&(function(){}).name==="something",o=i&&(!t||t&&n(r,"name").configurable);return Kw={EXISTS:i,PROPER:s,CONFIGURABLE:o},Kw}var Gw,bL;function CEe(){if(bL)return Gw;bL=1;var t=Et();return Gw=!t(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),Gw}var Yw,xL;function yse(){if(xL)return Yw;xL=1;var t=Kr(),e=Hr(),r=vs(),n=Z0(),i=CEe(),s=n("IE_PROTO"),o=Object,a=o.prototype;return Yw=i?o.getPrototypeOf:function(l){var c=r(l);if(t(c,s))return c[s];var d=c.constructor;return e(d)&&c instanceof d?d.prototype:c instanceof o?a:null},Yw}var Qw,wL;function vse(){if(wL)return Qw;wL=1;var t=Et(),e=Hr(),r=Dn(),n=pm(),i=yse(),s=mm(),o=Gr(),a=uh(),l=o("iterator"),c=!1,d,h,f;[].keys&&(f=[].keys(),"next"in f?(h=i(i(f)),h!==Object.prototype&&(d=h)):c=!0);var p=!r(d)||t(function(){var m={};return d[l].call(m)!==m});return p?d={}:a&&(d=n(d)),e(d[l])||s(d,l,function(){return this}),Qw={IteratorPrototype:d,BUGGY_SAFARI_ITERATORS:c},Qw}var Xw,SL;function kEe(){if(SL)return Xw;SL=1;var t=vse().IteratorPrototype,e=pm(),r=lm(),n=Qc(),i=gh(),s=function(){return this};return Xw=function(o,a,l,c){var d=a+" Iterator";return o.prototype=e(t,{next:r(+!c,l)}),n(o,d,!1,!0),i[d]=s,o},Xw}var Jw,_L;function TEe(){if(_L)return Jw;_L=1;var t=jt(),e=Lo();return Jw=function(r,n,i){try{return t(e(Object.getOwnPropertyDescriptor(r,n)[i]))}catch{}},Jw}var Zw,EL;function OEe(){if(EL)return Zw;EL=1;var t=Dn();return Zw=function(e){return t(e)||e===null},Zw}var eS,NL;function jEe(){if(NL)return eS;NL=1;var t=OEe(),e=String,r=TypeError;return eS=function(n){if(t(n))return n;throw new r("Can't set "+e(n)+" as a prototype")},eS}var tS,CL;function PEe(){if(CL)return tS;CL=1;var t=TEe(),e=Dn(),r=Gc(),n=jEe();return tS=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,s={},o;try{o=t(Object.prototype,"__proto__","set"),o(s,[]),i=s instanceof Array}catch{}return function(l,c){return r(l),n(c),e(l)&&(i?o(l,c):l.__proto__=c),l}}():void 0),tS}var rS,kL;function xA(){if(kL)return rS;kL=1;var t=Ve(),e=ni(),r=uh(),n=NEe(),i=Hr(),s=kEe(),o=yse(),a=PEe(),l=Qc(),c=hh(),d=mm(),h=Gr(),f=gh(),p=vse(),m=n.PROPER,g=n.CONFIGURABLE,v=p.IteratorPrototype,y=p.BUGGY_SAFARI_ITERATORS,b=h("iterator"),w="keys",x="values",S="entries",_=function(){return this};return rS=function(E,N,k,C,O,P,j){s(k,N,C);var A=function(be){if(be===O&&W)return W;if(!y&&be&&be in L)return L[be];switch(be){case w:return function(){return new k(this,be)};case x:return function(){return new k(this,be)};case S:return function(){return new k(this,be)}}return function(){return new k(this)}},D=N+" Iterator",I=!1,L=E.prototype,F=L[b]||L["@@iterator"]||O&&L[O],W=!y&&F||A(O),V=N==="Array"&&L.entries||F,H,K,de;if(V&&(H=o(V.call(new E)),H!==Object.prototype&&H.next&&(!r&&o(H)!==v&&(a?a(H,v):i(H[b])||d(H,b,_)),l(H,D,!0,!0),r&&(f[D]=_))),m&&O===x&&F&&F.name!==x&&(!r&&g?c(L,"name",x):(I=!0,W=function(){return e(F,this)})),O)if(K={values:A(x),keys:P?W:A(w),entries:A(S)},j)for(de in K)(y||I||!(de in L))&&d(L,de,K[de]);else t({target:N,proto:!0,forced:y||I},K);return(!r||j)&&L[b]!==W&&d(L,b,W,{name:O}),f[N]=W,K},rS}var nS,TL;function wA(){return TL||(TL=1,nS=function(t,e){return{value:t,done:e}}),nS}var iS,OL;function gl(){if(OL)return iS;OL=1;var t=Us(),e=EEe(),r=gh(),n=gm(),i=Wi().f,s=xA(),o=wA(),a=uh(),l=Tr(),c="Array Iterator",d=n.set,h=n.getterFor(c);iS=s(Array,"Array",function(p,m){d(this,{type:c,target:t(p),index:0,kind:m})},function(){var p=h(this),m=p.target,g=p.index++;if(!m||g>=m.length)return p.target=null,o(void 0,!0);switch(p.kind){case"keys":return o(g,!1);case"values":return o(m[g],!1)}return o([g,m[g]],!1)},"values");var f=r.Arguments=r.Array;if(e("keys"),e("values"),e("entries"),!a&&l&&f.name!=="values")try{i(f,"name",{value:"values"})}catch{}return iS}var sS,jL;function IEe(){return jL||(jL=1,sS={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),sS}var PL;function yl(){if(PL)return mL;PL=1,gl();var t=IEe(),e=kr(),r=Qc(),n=gh();for(var i in t)r(e[i],i),n[i]=n.Array;return mL}var oS,IL;function bse(){if(IL)return oS;IL=1;var t=_Ee();return yl(),oS=t,oS}var RL={},ML;function REe(){if(ML)return RL;ML=1;var t=Gr(),e=Wi().f,r=t("metadata"),n=Function.prototype;return n[r]===void 0&&e(n,r,{value:null}),RL}var AL={},$L;function MEe(){return $L||($L=1,fse()),AL}var DL={},FL;function AEe(){return FL||(FL=1,pse()),DL}var qL={},LL;function $Ee(){if(LL)return qL;LL=1;var t=Jt();return t("metadata"),qL}var aS,BL;function DEe(){if(BL)return aS;BL=1;var t=bse();return REe(),MEe(),AEe(),$Ee(),aS=t,aS}var zL={},lS,VL;function xse(){if(VL)return lS;VL=1;var t=wi(),e=jt(),r=t("Symbol"),n=r.keyFor,i=e(r.prototype.valueOf);return lS=r.isRegisteredSymbol||function(o){try{return n(i(o))!==void 0}catch{return!1}},lS}var UL;function FEe(){if(UL)return zL;UL=1;var t=Ve(),e=xse();return t({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),zL}var HL={},cS,WL;function wse(){if(WL)return cS;WL=1;for(var t=dh(),e=wi(),r=jt(),n=dm(),i=Gr(),s=e("Symbol"),o=s.isWellKnownSymbol,a=e("Object","getOwnPropertyNames"),l=r(s.prototype.valueOf),c=t("wks"),d=0,h=a(s),f=h.length;d<f;d++)try{var p=h[d];n(s[p])&&i(p)}catch{}return cS=function(g){if(o&&o(g))return!0;try{for(var v=l(g),y=0,b=a(c),w=b.length;y<w;y++)if(c[b[y]]==v)return!0}catch{}return!1},cS}var KL;function qEe(){if(KL)return HL;KL=1;var t=Ve(),e=wse();return t({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),HL}var GL={},YL;function LEe(){if(YL)return GL;YL=1;var t=Jt();return t("customMatcher"),GL}var QL={},XL;function BEe(){if(XL)return QL;XL=1;var t=Jt();return t("observable"),QL}var JL={},ZL;function zEe(){if(ZL)return JL;ZL=1;var t=Ve(),e=xse();return t({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),JL}var eB={},tB;function VEe(){if(tB)return eB;tB=1;var t=Ve(),e=wse();return t({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),eB}var rB={},nB;function UEe(){if(nB)return rB;nB=1;var t=Jt();return t("matcher"),rB}var iB={},sB;function HEe(){if(sB)return iB;sB=1;var t=Jt();return t("metadataKey"),iB}var oB={},aB;function WEe(){if(aB)return oB;aB=1;var t=Jt();return t("patternMatch"),oB}var lB={},cB;function KEe(){if(cB)return lB;cB=1;var t=Jt();return t("replaceAll"),lB}var uS,uB;function GEe(){if(uB)return uS;uB=1;var t=DEe();return FEe(),qEe(),LEe(),BEe(),zEe(),VEe(),UEe(),HEe(),WEe(),KEe(),uS=t,uS}var dS,dB;function YEe(){return dB||(dB=1,dS=GEe()),dS}var QEe=YEe(),jg=rt(QEe),hB={},hS,fB;function XEe(){if(fB)return hS;fB=1;var t=jt(),e=fh(),r=ml(),n=Gc(),i=t("".charAt),s=t("".charCodeAt),o=t("".slice),a=function(l){return function(c,d){var h=r(n(c)),f=e(d),p=h.length,m,g;return f<0||f>=p?l?"":void 0:(m=s(h,f),m<55296||m>56319||f+1===p||(g=s(h,f+1))<56320||g>57343?l?i(h,f):m:l?o(h,f,f+2):(m-55296<<10)+(g-56320)+65536)}};return hS={codeAt:a(!1),charAt:a(!0)},hS}var pB;function nb(){if(pB)return hB;pB=1;var t=XEe().charAt,e=ml(),r=gm(),n=xA(),i=wA(),s="String Iterator",o=r.set,a=r.getterFor(s);return n(String,"String",function(l){o(this,{type:s,string:e(l),index:0})},function(){var c=a(this),d=c.string,h=c.index,f;return h>=d.length?i(void 0,!0):(f=t(d,h),c.index+=f.length,i(f,!1))}),hB}var fS,mB;function JEe(){if(mB)return fS;mB=1,gl(),nb(),mse();var t=rb();return fS=t.f("iterator"),fS}var pS,gB;function Sse(){if(gB)return pS;gB=1;var t=JEe();return yl(),pS=t,pS}var mS,yB;function ZEe(){if(yB)return mS;yB=1;var t=Sse();return mS=t,mS}var gS,vB;function eNe(){if(vB)return gS;vB=1;var t=ZEe();return gS=t,gS}var yS,bB;function tNe(){return bB||(bB=1,yS=eNe()),yS}var rNe=tNe(),nNe=rt(rNe);function _p(t){"@babel/helpers - typeof";return _p=typeof jg=="function"&&typeof nNe=="symbol"?function(e){return typeof e}:function(e){return e&&typeof jg=="function"&&e.constructor===jg&&e!==jg.prototype?"symbol":typeof e},_p(t)}var vS,xB;function iNe(){if(xB)return vS;xB=1,gse();var t=rb();return vS=t.f("toPrimitive"),vS}var bS,wB;function sNe(){if(wB)return bS;wB=1;var t=iNe();return bS=t,bS}var xS,SB;function oNe(){if(SB)return xS;SB=1;var t=sNe();return xS=t,xS}var wS,_B;function aNe(){if(_B)return wS;_B=1;var t=oNe();return wS=t,wS}var SS,EB;function lNe(){return EB||(EB=1,SS=aNe()),SS}var cNe=lNe(),uNe=rt(cNe);function dNe(t,e){if(_p(t)!="object"||!t)return t;var r=t[uNe];if(r!==void 0){var n=r.call(t,e);if(_p(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hNe(t){var e=dNe(t,"string");return _p(e)=="symbol"?e:e+""}function Wa(t,e,r){return(e=hNe(e))in t?J_e(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var NB={},_S,CB;function fNe(){if(CB)return _S;CB=1;var t=jt(),e=Lo(),r=Dn(),n=Kr(),i=ph(),s=am(),o=Function,a=t([].concat),l=t([].join),c={},d=function(h,f,p){if(!n(c,f)){for(var m=[],g=0;g<f;g++)m[g]="a["+g+"]";c[f]=o("C,a","return new C("+l(m,",")+")")}return c[f](h,p)};return _S=s?o.bind:function(f){var p=e(this),m=p.prototype,g=i(arguments,1),v=function(){var b=a(g,i(arguments));return this instanceof v?d(p,b.length,b):p.apply(f,b)};return r(m)&&(v.prototype=m),v},_S}var kB;function pNe(){if(kB)return NB;kB=1;var t=Ve(),e=fNe();return t({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),NB}var ES,TB;function ii(){if(TB)return ES;TB=1;var t=kr(),e=$r();return ES=function(r,n){var i=e[r+"Prototype"],s=i&&i[n];if(s)return s;var o=t[r],a=o&&o.prototype;return a&&a[n]},ES}var NS,OB;function mNe(){if(OB)return NS;OB=1,pNe();var t=ii();return NS=t("Function","bind"),NS}var CS,jB;function gNe(){if(jB)return CS;jB=1;var t=Wr(),e=mNe(),r=Function.prototype;return CS=function(n){var i=n.bind;return n===r||t(r,n)&&i===r.bind?e:i},CS}var kS,PB;function yNe(){if(PB)return kS;PB=1;var t=gNe();return kS=t,kS}var TS,IB;function vNe(){return IB||(IB=1,TS=yNe()),TS}var bNe=vNe(),_se=rt(bNe),RB={},OS,MB;function xNe(){if(MB)return OS;MB=1;var t=Lo(),e=vs(),r=K0(),n=fl(),i=TypeError,s="Reduce of empty array with no initial value",o=function(a){return function(l,c,d,h){var f=e(l),p=r(f),m=n(f);if(t(c),m===0&&d<2)throw new i(s);var g=a?m-1:0,v=a?-1:1;if(d<2)for(;;){if(g in p){h=p[g],g+=v;break}if(g+=v,a?g<0:m<=g)throw new i(s)}for(;a?g>=0:m>g;g+=v)g in p&&(h=c(h,p[g],g,f));return h}};return OS={left:o(!1),right:o(!0)},OS}var jS,AB;function ib(){if(AB)return jS;AB=1;var t=Et();return jS=function(e,r){var n=[][e];return!!n&&t(function(){n.call(null,r||function(){return 1},1)})},jS}var PS,$B;function Ese(){if($B)return PS;$B=1;var t=kr(),e=ah(),r=qo(),n=function(i){return e.slice(0,i.length)===i};return PS=function(){return n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":t.Bun&&typeof Bun.version=="string"?"BUN":t.Deno&&typeof Deno.version=="object"?"DENO":r(t.process)==="process"?"NODE":t.window&&t.document?"BROWSER":"REST"}(),PS}var IS,DB;function wNe(){if(DB)return IS;DB=1;var t=Ese();return IS=t==="NODE",IS}var FB;function SNe(){if(FB)return RB;FB=1;var t=Ve(),e=xNe().left,r=ib(),n=um(),i=wNe(),s=!i&&n>79&&n<83,o=s||!r("reduce");return t({target:"Array",proto:!0,forced:o},{reduce:function(l){var c=arguments.length;return e(this,l,c,c>1?arguments[1]:void 0)}}),RB}var RS,qB;function _Ne(){if(qB)return RS;qB=1,SNe();var t=ii();return RS=t("Array","reduce"),RS}var MS,LB;function ENe(){if(LB)return MS;LB=1;var t=Wr(),e=_Ne(),r=Array.prototype;return MS=function(n){var i=n.reduce;return n===r||t(r,n)&&i===r.reduce?e:i},MS}var AS,BB;function NNe(){if(BB)return AS;BB=1;var t=ENe();return AS=t,AS}var $S,zB;function CNe(){return zB||(zB=1,$S=NNe()),$S}var kNe=CNe(),TNe=rt(kNe),VB={},UB;function ONe(){if(UB)return VB;UB=1;var t=Ve(),e=mh().filter,r=hm(),n=r("filter");return t({target:"Array",proto:!0,forced:!n},{filter:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),VB}var DS,HB;function jNe(){if(HB)return DS;HB=1,ONe();var t=ii();return DS=t("Array","filter"),DS}var FS,WB;function PNe(){if(WB)return FS;WB=1;var t=Wr(),e=jNe(),r=Array.prototype;return FS=function(n){var i=n.filter;return n===r||t(r,n)&&i===r.filter?e:i},FS}var qS,KB;function INe(){if(KB)return qS;KB=1;var t=PNe();return qS=t,qS}var LS,GB;function RNe(){return GB||(GB=1,LS=INe()),LS}var MNe=RNe(),zu=rt(MNe),YB={},QB;function ANe(){if(QB)return YB;QB=1;var t=Ve(),e=mh().map,r=hm(),n=r("map");return t({target:"Array",proto:!0,forced:!n},{map:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),YB}var BS,XB;function $Ne(){if(XB)return BS;XB=1,ANe();var t=ii();return BS=t("Array","map"),BS}var zS,JB;function DNe(){if(JB)return zS;JB=1;var t=Wr(),e=$Ne(),r=Array.prototype;return zS=function(n){var i=n.map;return n===r||t(r,n)&&i===r.map?e:i},zS}var VS,ZB;function FNe(){if(ZB)return VS;ZB=1;var t=DNe();return VS=t,VS}var US,ez;function qNe(){return ez||(ez=1,US=FNe()),US}var LNe=qNe(),ss=rt(LNe),HS,tz;function BNe(){return tz||(tz=1,HS=bse()),HS}var zNe=BNe(),VNe=rt(zNe),rz={},nz;function UNe(){if(nz)return rz;nz=1;var t=Ve(),e=Yc(),r=sse(),n=Dn(),i=gA(),s=fl(),o=Us(),a=X0(),l=Gr(),c=hm(),d=ph(),h=c("slice"),f=l("species"),p=Array,m=Math.max;return t({target:"Array",proto:!0,forced:!h},{slice:function(v,y){var b=o(this),w=s(b),x=i(v,w),S=i(y===void 0?w:y,w),_,E,N;if(e(b)&&(_=b.constructor,r(_)&&(_===p||e(_.prototype))?_=void 0:n(_)&&(_=_[f],_===null&&(_=void 0)),_===p||_===void 0))return d(b,x,S);for(E=new(_===void 0?p:_)(m(S-x,0)),N=0;x<S;x++,N++)x in b&&a(E,N,b[x]);return E.length=N,E}}),rz}var WS,iz;function HNe(){if(iz)return WS;iz=1,UNe();var t=ii();return WS=t("Array","slice"),WS}var KS,sz;function WNe(){if(sz)return KS;sz=1;var t=Wr(),e=HNe(),r=Array.prototype;return KS=function(n){var i=n.slice;return n===r||t(r,n)&&i===r.slice?e:i},KS}var GS,oz;function KNe(){if(oz)return GS;oz=1;var t=WNe();return GS=t,GS}var YS,az;function GNe(){return az||(az=1,YS=KNe()),YS}var YNe=GNe(),QNe=rt(YNe),lz={},QS,cz;function Nse(){if(cz)return QS;cz=1;var t=wi(),e=jt(),r=eb(),n=tb(),i=Bo(),s=e([].concat);return QS=t("Reflect","ownKeys")||function(a){var l=r.f(i(a)),c=n.f;return c?s(l,c(a)):l},QS}var uz;function XNe(){if(uz)return lz;uz=1;var t=Ve(),e=Nse();return t({target:"Reflect",stat:!0},{ownKeys:e}),lz}var XS,dz;function JNe(){if(dz)return XS;dz=1,XNe();var t=$r();return XS=t.Reflect.ownKeys,XS}var JS,hz;function ZNe(){if(hz)return JS;hz=1;var t=JNe();return JS=t,JS}var ZS,fz;function eCe(){return fz||(fz=1,ZS=ZNe()),ZS}var tCe=eCe(),rCe=rt(tCe),pz={},mz;function nCe(){if(mz)return pz;mz=1;var t=Ve(),e=Yc();return t({target:"Array",stat:!0},{isArray:e}),pz}var e_,gz;function iCe(){if(gz)return e_;gz=1,nCe();var t=$r();return e_=t.Array.isArray,e_}var t_,yz;function sCe(){if(yz)return t_;yz=1;var t=iCe();return t_=t,t_}var r_,vz;function oCe(){return vz||(vz=1,r_=sCe()),r_}var aCe=oCe(),ks=rt(aCe),bz={},xz;function lCe(){if(xz)return bz;xz=1;var t=Ve(),e=vs(),r=J0(),n=Et(),i=n(function(){r(1)});return t({target:"Object",stat:!0,forced:i},{keys:function(o){return r(e(o))}}),bz}var n_,wz;function cCe(){if(wz)return n_;wz=1,lCe();var t=$r();return n_=t.Object.keys,n_}var i_,Sz;function uCe(){if(Sz)return i_;Sz=1;var t=cCe();return i_=t,i_}var s_,_z;function dCe(){return _z||(_z=1,s_=uCe()),s_}var hCe=dCe(),SA=rt(hCe),Ez={},o_,Nz;function fCe(){if(Nz)return o_;Nz=1;var t=mh().forEach,e=ib(),r=e("forEach");return o_=r?[].forEach:function(i){return t(this,i,arguments.length>1?arguments[1]:void 0)},o_}var Cz;function pCe(){if(Cz)return Ez;Cz=1;var t=Ve(),e=fCe();return t({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),Ez}var a_,kz;function mCe(){if(kz)return a_;kz=1,pCe();var t=ii();return a_=t("Array","forEach"),a_}var l_,Tz;function gCe(){if(Tz)return l_;Tz=1;var t=mCe();return l_=t,l_}var c_,Oz;function yCe(){if(Oz)return c_;Oz=1;var t=pl(),e=Kr(),r=Wr(),n=gCe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return c_=function(o){var a=o.forEach;return o===i||r(i,o)&&a===i.forEach||e(s,t(o))?n:a},c_}var u_,jz;function vCe(){return jz||(jz=1,u_=yCe()),u_}var bCe=vCe(),Ic=rt(bCe),Pz={},Iz;function xCe(){if(Iz)return Pz;Iz=1;var t=Ve(),e=jt(),r=Yc(),n=e([].reverse),i=[1,2];return t({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),n(this)}}),Pz}var d_,Rz;function wCe(){if(Rz)return d_;Rz=1,xCe();var t=ii();return d_=t("Array","reverse"),d_}var h_,Mz;function SCe(){if(Mz)return h_;Mz=1;var t=Wr(),e=wCe(),r=Array.prototype;return h_=function(n){var i=n.reverse;return n===r||t(r,n)&&i===r.reverse?e:i},h_}var f_,Az;function _Ce(){if(Az)return f_;Az=1;var t=SCe();return f_=t,f_}var p_,$z;function ECe(){return $z||($z=1,p_=_Ce()),p_}var NCe=ECe(),CCe=rt(NCe),Dz={},m_,Fz;function kCe(){if(Fz)return m_;Fz=1;var t=Tr(),e=Yc(),r=TypeError,n=Object.getOwnPropertyDescriptor,i=t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(s){return s instanceof TypeError}}();return m_=i?function(s,o){if(e(s)&&!n(s,"length").writable)throw new r("Cannot set read only .length");return s.length=o}:function(s,o){return s.length=o},m_}var g_,qz;function Cse(){if(qz)return g_;qz=1;var t=ch(),e=TypeError;return g_=function(r,n){if(!delete r[n])throw new e("Cannot delete property "+t(n)+" of "+t(r))},g_}var Lz;function TCe(){if(Lz)return Dz;Lz=1;var t=Ve(),e=vs(),r=gA(),n=fh(),i=fl(),s=kCe(),o=ise(),a=mA(),l=X0(),c=Cse(),d=hm(),h=d("splice"),f=Math.max,p=Math.min;return t({target:"Array",proto:!0,forced:!h},{splice:function(g,v){var y=e(this),b=i(y),w=r(g,b),x=arguments.length,S,_,E,N,k,C;for(x===0?S=_=0:x===1?(S=0,_=b-w):(S=x-2,_=p(f(n(v),0),b-w)),o(b+S-_),E=a(y,_),N=0;N<_;N++)k=w+N,k in y&&l(E,N,y[k]);if(E.length=_,S<_){for(N=w;N<b-_;N++)k=N+_,C=N+S,k in y?y[C]=y[k]:c(y,C);for(N=b;N>b-_+S;N--)c(y,N-1)}else if(S>_)for(N=b-_;N>w;N--)k=N+_-1,C=N+S-1,k in y?y[C]=y[k]:c(y,C);for(N=0;N<S;N++)y[N+w]=arguments[N+2];return s(y,b-_+S),E}}),Dz}var y_,Bz;function OCe(){if(Bz)return y_;Bz=1,TCe();var t=ii();return y_=t("Array","splice"),y_}var v_,zz;function jCe(){if(zz)return v_;zz=1;var t=Wr(),e=OCe(),r=Array.prototype;return v_=function(n){var i=n.splice;return n===r||t(r,n)&&i===r.splice?e:i},v_}var b_,Vz;function PCe(){if(Vz)return b_;Vz=1;var t=jCe();return b_=t,b_}var x_,Uz;function ICe(){return Uz||(Uz=1,x_=PCe()),x_}var RCe=ICe(),kse=rt(RCe),Hz={},w_,Wz;function MCe(){if(Wz)return w_;Wz=1;var t=Tr(),e=jt(),r=ni(),n=Et(),i=J0(),s=tb(),o=uA(),a=vs(),l=K0(),c=Object.assign,d=Object.defineProperty,h=e([].concat);return w_=!c||n(function(){if(t&&c({b:1},c(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},p={},m=Symbol("assign detection"),g="abcdefghijklmnopqrst";return f[m]=7,g.split("").forEach(function(v){p[v]=v}),c({},f)[m]!==7||i(c({},p)).join("")!==g})?function(p,m){for(var g=a(p),v=arguments.length,y=1,b=s.f,w=o.f;v>y;)for(var x=l(arguments[y++]),S=b?h(i(x),b(x)):i(x),_=S.length,E=0,N;_>E;)N=S[E++],(!t||r(w,x,N))&&(g[N]=x[N]);return g}:c,w_}var Kz;function ACe(){if(Kz)return Hz;Kz=1;var t=Ve(),e=MCe();return t({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),Hz}var S_,Gz;function $Ce(){if(Gz)return S_;Gz=1,ACe();var t=$r();return S_=t.Object.assign,S_}var __,Yz;function DCe(){if(Yz)return __;Yz=1;var t=$Ce();return __=t,__}var E_,Qz;function FCe(){return Qz||(Qz=1,E_=DCe()),E_}var qCe=FCe(),LCe=rt(qCe),N_,Xz;function BCe(){if(Xz)return N_;Xz=1,ose();var t=ii();return N_=t("Array","concat"),N_}var C_,Jz;function zCe(){if(Jz)return C_;Jz=1;var t=Wr(),e=BCe(),r=Array.prototype;return C_=function(n){var i=n.concat;return n===r||t(r,n)&&i===r.concat?e:i},C_}var k_,Zz;function VCe(){if(Zz)return k_;Zz=1;var t=zCe();return k_=t,k_}var T_,e6;function UCe(){return e6||(e6=1,T_=VCe()),T_}var HCe=UCe(),WCe=rt(HCe),t6={},r6;function KCe(){if(r6)return t6;r6=1;var t=Ve(),e=Tr(),r=pm();return t({target:"Object",stat:!0,sham:!e},{create:r}),t6}var O_,n6;function GCe(){if(n6)return O_;n6=1,KCe();var t=$r(),e=t.Object;return O_=function(n,i){return e.create(n,i)},O_}var j_,i6;function YCe(){if(i6)return j_;i6=1;var t=GCe();return j_=t,j_}var P_,s6;function QCe(){return s6||(s6=1,P_=YCe()),P_}var XCe=QCe(),JCe=rt(XCe),o6={},I_,a6;function ZCe(){if(a6)return I_;a6=1;var t=fh(),e=ml(),r=Gc(),n=RangeError;return I_=function(s){var o=e(r(this)),a="",l=t(s);if(l<0||l===1/0)throw new n("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(o+=o))l&1&&(a+=o);return a},I_}var R_,l6;function eke(){if(l6)return R_;l6=1;var t=jt(),e=nse(),r=ml(),n=ZCe(),i=Gc(),s=t(n),o=t("".slice),a=Math.ceil,l=function(c){return function(d,h,f){var p=r(i(d)),m=e(h),g=p.length,v=f===void 0?" ":r(f),y,b;return m<=g||v===""?p:(y=m-g,b=s(v,a(y/v.length)),b.length>y&&(b=o(b,0,y)),c?p+b:b+p)}};return R_={start:l(!1),end:l(!0)},R_}var M_,c6;function tke(){if(c6)return M_;c6=1;var t=jt(),e=Et(),r=eke().start,n=RangeError,i=isFinite,s=Math.abs,o=Date.prototype,a=o.toISOString,l=t(o.getTime),c=t(o.getUTCDate),d=t(o.getUTCFullYear),h=t(o.getUTCHours),f=t(o.getUTCMilliseconds),p=t(o.getUTCMinutes),m=t(o.getUTCMonth),g=t(o.getUTCSeconds);return M_=e(function(){return a.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){a.call(new Date(NaN))})?function(){if(!i(l(this)))throw new n("Invalid time value");var y=this,b=d(y),w=f(y),x=b<0?"-":b>9999?"+":"";return x+r(s(b),x?6:4,0)+"-"+r(m(y)+1,2,0)+"-"+r(c(y),2,0)+"T"+r(h(y),2,0)+":"+r(p(y),2,0)+":"+r(g(y),2,0)+"."+r(w,3,0)+"Z"}:a,M_}var u6;function rke(){if(u6)return o6;u6=1;var t=Ve(),e=ni(),r=vs(),n=Jie(),i=tke(),s=qo(),o=Et(),a=o(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return t({target:"Date",proto:!0,forced:a},{toJSON:function(c){var d=r(this),h=n(d,"number");return typeof h=="number"&&!isFinite(h)?null:!("toISOString"in d)&&s(d)==="Date"?e(i,d):d.toISOString()}}),o6}var A_,d6;function nke(){if(d6)return A_;d6=1,rke(),dse();var t=$r(),e=W0();return t.JSON||(t.JSON={stringify:JSON.stringify}),A_=function(n,i,s){return e(t.JSON.stringify,null,arguments)},A_}var $_,h6;function ike(){if(h6)return $_;h6=1;var t=nke();return $_=t,$_}var D_,f6;function ske(){return f6||(f6=1,D_=ike()),D_}var oke=ske(),ake=rt(oke),p6={},m6={},F_,g6;function lke(){if(g6)return F_;g6=1;var t=TypeError;return F_=function(e,r){if(e<r)throw new t("Not enough arguments");return e},F_}var q_,y6;function Tse(){if(y6)return q_;y6=1;var t=kr(),e=W0(),r=Hr(),n=Ese(),i=ah(),s=ph(),o=lke(),a=t.Function,l=/MSIE .\./.test(i)||n==="BUN"&&function(){var c=t.Bun.version.split(".");return c.length<3||c[0]==="0"&&(c[1]<3||c[1]==="3"&&c[2]==="0")}();return q_=function(c,d){var h=d?2:1;return l?function(f,p){var m=o(arguments.length,1)>h,g=r(f)?f:a(f),v=m?s(arguments,h):[],y=m?function(){e(g,this,v)}:g;return d?c(y,p):c(y)}:c},q_}var v6;function cke(){if(v6)return m6;v6=1;var t=Ve(),e=kr(),r=Tse(),n=r(e.setInterval,!0);return t({global:!0,bind:!0,forced:e.setInterval!==n},{setInterval:n}),m6}var b6={},x6;function uke(){if(x6)return b6;x6=1;var t=Ve(),e=kr(),r=Tse(),n=r(e.setTimeout,!0);return t({global:!0,bind:!0,forced:e.setTimeout!==n},{setTimeout:n}),b6}var w6;function dke(){return w6||(w6=1,cke(),uke()),p6}var L_,S6;function hke(){if(S6)return L_;S6=1,dke();var t=$r();return L_=t.setTimeout,L_}var B_,_6;function fke(){return _6||(_6=1,B_=hke()),B_}var pke=fke(),mke=rt(pke),z_={exports:{}},E6;function gke(){return E6||(E6=1,function(t){function e(n){if(n)return r(n);this._callbacks=new Map}function r(n){return Object.assign(n,e.prototype),n._callbacks=new Map,n}e.prototype.on=function(n,i){const s=this._callbacks.get(n)??[];return s.push(i),this._callbacks.set(n,s),this},e.prototype.once=function(n,i){const s=(...o)=>{this.off(n,s),i.apply(this,o)};return s.fn=i,this.on(n,s),this},e.prototype.off=function(n,i){if(n===void 0&&i===void 0)return this._callbacks.clear(),this;if(i===void 0)return this._callbacks.delete(n),this;const s=this._callbacks.get(n);if(s){for(const[o,a]of s.entries())if(a===i||a.fn===i){s.splice(o,1);break}s.length===0?this._callbacks.delete(n):this._callbacks.set(n,s)}return this},e.prototype.emit=function(n,...i){const s=this._callbacks.get(n);if(s){const o=[...s];for(const a of o)a.apply(this,i)}return this},e.prototype.listeners=function(n){return this._callbacks.get(n)??[]},e.prototype.listenerCount=function(n){if(n)return this.listeners(n).length;let i=0;for(const s of this._callbacks.values())i+=s.length;return i},e.prototype.hasListeners=function(n){return this.listenerCount(n)>0},e.prototype.addEventListener=e.prototype.on,e.prototype.removeListener=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,t.exports=e}(z_)),z_.exports}var yke=gke(),vke=rt(yke);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function ms(){return ms=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ms.apply(this,arguments)}function Ki(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Pg(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var LI;typeof Object.assign!="function"?LI=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])}return r}:LI=Object.assign;var Rc=LI,N6=["","webkit","Moz","MS","ms","o"],bke=typeof document>"u"?{style:{}}:document.createElement("div"),xke="function",Vu=Math.round,Mc=Math.abs,_A=Date.now;function sb(t,e){for(var r,n,i=e[0].toUpperCase()+e.slice(1),s=0;s<N6.length;){if(r=N6[s],n=r?r+i:e,n in t)return n;s++}}var vo;typeof window>"u"?vo={}:vo=window;var Ose=sb(bke.style,"touchAction"),jse=Ose!==void 0;function wke(){if(!jse)return!1;var t={},e=vo.CSS&&vo.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){return t[r]=e?vo.CSS.supports("touch-action",r):!0}),t}var Pse="compute",Ise="auto",BI="manipulation",lc="none",Ep="pan-x",Np="pan-y",Ig=wke(),Ske=/mobile|tablet|ip(ad|hone|od)|android/i,Rse="ontouchstart"in vo,_ke=sb(vo,"PointerEvent")!==void 0,Eke=Rse&&Ske.test(navigator.userAgent),ym="touch",Nke="pen",EA="mouse",Cke="kinect",kke=25,In=1,Xc=2,Sr=4,ti=8,qv=1,vm=2,bm=4,xm=8,Vd=16,Ls=vm|bm,cc=xm|Vd,Mse=Ls|cc,Ase=["x","y"],Lv=["clientX","clientY"];function bo(t,e,r){var n;if(t)if(t.forEach)t.forEach(e,r);else if(t.length!==void 0)for(n=0;n<t.length;)e.call(r,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t)}function ob(t,e){return typeof t===xke?t.apply(e&&e[0]||void 0,e):t}function Ll(t,e){return t.indexOf(e)>-1}function Tke(t){if(Ll(t,lc))return lc;var e=Ll(t,Ep),r=Ll(t,Np);return e&&r?lc:e||r?e?Ep:Np:Ll(t,BI)?BI:Ise}var $se=function(){function t(r,n){this.manager=r,this.set(n)}var e=t.prototype;return e.set=function(n){n===Pse&&(n=this.compute()),jse&&this.manager.element.style&&Ig[n]&&(this.manager.element.style[Ose]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return bo(this.manager.recognizers,function(i){ob(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),Tke(n.join(" "))},e.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=Ll(o,lc)&&!Ig[lc],l=Ll(o,Np)&&!Ig[Np],c=Ll(o,Ep)&&!Ig[Ep];if(a){var d=n.pointers.length===1,h=n.distance<2,f=n.deltaTime<250;if(d&&h&&f)return}if(!(c&&l)&&(a||l&&s&Ls||c&&s&cc))return this.preventSrc(i)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},t}();function NA(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function Dse(t){var e=t.length;if(e===1)return{x:Vu(t[0].clientX),y:Vu(t[0].clientY)};for(var r=0,n=0,i=0;i<e;)r+=t[i].clientX,n+=t[i].clientY,i++;return{x:Vu(r/e),y:Vu(n/e)}}function C6(t){for(var e=[],r=0;r<t.pointers.length;)e[r]={clientX:Vu(t.pointers[r].clientX),clientY:Vu(t.pointers[r].clientY)},r++;return{timeStamp:_A(),pointers:e,center:Dse(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Bv(t,e,r){r||(r=Ase);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.sqrt(n*n+i*i)}function zI(t,e,r){r||(r=Ase);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.atan2(i,n)*180/Math.PI}function Fse(t,e){return t===e?qv:Mc(t)>=Mc(e)?t<0?vm:bm:e<0?xm:Vd}function Oke(t,e){var r=e.center,n=t.offsetDelta||{},i=t.prevDelta||{},s=t.prevInput||{};(e.eventType===In||s.eventType===Sr)&&(i=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:r.x,y:r.y}),e.deltaX=i.x+(r.x-n.x),e.deltaY=i.y+(r.y-n.y)}function qse(t,e,r){return{x:e/t||0,y:r/t||0}}function jke(t,e){return Bv(e[0],e[1],Lv)/Bv(t[0],t[1],Lv)}function Pke(t,e){return zI(e[1],e[0],Lv)+zI(t[1],t[0],Lv)}function Ike(t,e){var r=t.lastInterval||e,n=e.timeStamp-r.timeStamp,i,s,o,a;if(e.eventType!==ti&&(n>kke||r.velocity===void 0)){var l=e.deltaX-r.deltaX,c=e.deltaY-r.deltaY,d=qse(n,l,c);s=d.x,o=d.y,i=Mc(d.x)>Mc(d.y)?d.x:d.y,a=Fse(l,c),t.lastInterval=e}else i=r.velocity,s=r.velocityX,o=r.velocityY,a=r.direction;e.velocity=i,e.velocityX=s,e.velocityY=o,e.direction=a}function Rke(t,e){var r=t.session,n=e.pointers,i=n.length;r.firstInput||(r.firstInput=C6(e)),i>1&&!r.firstMultiple?r.firstMultiple=C6(e):i===1&&(r.firstMultiple=!1);var s=r.firstInput,o=r.firstMultiple,a=o?o.center:s.center,l=e.center=Dse(n);e.timeStamp=_A(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=zI(a,l),e.distance=Bv(a,l),Oke(r,e),e.offsetDirection=Fse(e.deltaX,e.deltaY);var c=qse(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=Mc(c.x)>Mc(c.y)?c.x:c.y,e.scale=o?jke(o.pointers,n):1,e.rotation=o?Pke(o.pointers,n):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,Ike(r,e);var d=t.element,h=e.srcEvent,f;h.composedPath?f=h.composedPath()[0]:h.path?f=h.path[0]:f=h.target,NA(f,d)&&(d=f),e.target=d}function Mke(t,e,r){var n=r.pointers.length,i=r.changedPointers.length,s=e&In&&n-i===0,o=e&(Sr|ti)&&n-i===0;r.isFirst=!!s,r.isFinal=!!o,s&&(t.session={}),r.eventType=e,Rke(t,r),t.emit("hammer.input",r),t.recognize(r),t.session.prevInput=r}function Cp(t){return t.trim().split(/\s+/g)}function Df(t,e,r){bo(Cp(e),function(n){t.addEventListener(n,r,!1)})}function Ff(t,e,r){bo(Cp(e),function(n){t.removeEventListener(n,r,!1)})}function k6(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var yh=function(){function t(r,n){var i=this;this.manager=r,this.callback=n,this.element=r.element,this.target=r.options.inputTarget,this.domHandler=function(s){ob(r.options.enable,[r])&&i.handler(s)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&Df(this.element,this.evEl,this.domHandler),this.evTarget&&Df(this.target,this.evTarget,this.domHandler),this.evWin&&Df(k6(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Ff(this.element,this.evEl,this.domHandler),this.evTarget&&Ff(this.target,this.evTarget,this.domHandler),this.evWin&&Ff(k6(this.element),this.evWin,this.domHandler)},t}();function Ac(t,e,r){if(t.indexOf&&!r)return t.indexOf(e);for(var n=0;n<t.length;){if(r&&t[n][r]==e||!r&&t[n]===e)return n;n++}return-1}var Ake={pointerdown:In,pointermove:Xc,pointerup:Sr,pointercancel:ti,pointerout:ti},$ke={2:ym,3:Nke,4:EA,5:Cke},Lse="pointerdown",Bse="pointermove pointerup pointercancel";vo.MSPointerEvent&&!vo.PointerEvent&&(Lse="MSPointerDown",Bse="MSPointerMove MSPointerUp MSPointerCancel");var zse=function(t){Ki(e,t);function e(){var n,i=e.prototype;return i.evEl=Lse,i.evWin=Bse,n=t.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var r=e.prototype;return r.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=Ake[a],c=$ke[i.pointerType]||i.pointerType,d=c===ym,h=Ac(s,i.pointerId,"pointerId");l&In&&(i.button===0||d)?h<0&&(s.push(i),h=s.length-1):l&(Sr|ti)&&(o=!0),!(h<0)&&(s[h]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:c,srcEvent:i}),o&&s.splice(h,1))},e}(yh);function kp(t){return Array.prototype.slice.call(t,0)}function CA(t,e,r){for(var n=[],i=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];Ac(i,o)<0&&n.push(t[s]),i[s]=o,s++}return r&&(e?n=n.sort(function(a,l){return a[e]>l[e]}):n=n.sort()),n}var Dke={touchstart:In,touchmove:Xc,touchend:Sr,touchcancel:ti},Fke="touchstart touchmove touchend touchcancel",kA=function(t){Ki(e,t);function e(){var n;return e.prototype.evTarget=Fke,n=t.apply(this,arguments)||this,n.targetIds={},n}var r=e.prototype;return r.handler=function(i){var s=Dke[i.type],o=qke.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:ym,srcEvent:i})},e}(yh);function qke(t,e){var r=kp(t.touches),n=this.targetIds;if(e&(In|Xc)&&r.length===1)return n[r[0].identifier]=!0,[r,r];var i,s,o=kp(t.changedTouches),a=[],l=this.target;if(s=r.filter(function(c){return NA(c.target,l)}),e===In)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),e&(Sr|ti)&&delete n[o[i].identifier],i++;if(a.length)return[CA(s.concat(a),"identifier",!0),a]}var Lke={mousedown:In,mousemove:Xc,mouseup:Sr},Bke="mousedown",zke="mousemove mouseup",TA=function(t){Ki(e,t);function e(){var n,i=e.prototype;return i.evEl=Bke,i.evWin=zke,n=t.apply(this,arguments)||this,n.pressed=!1,n}var r=e.prototype;return r.handler=function(i){var s=Lke[i.type];s&In&&i.button===0&&(this.pressed=!0),s&Xc&&i.which!==1&&(s=Sr),this.pressed&&(s&Sr&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:EA,srcEvent:i}))},e}(yh),Vke=2500,T6=25;function O6(t){var e=t.changedPointers,r=e[0];if(r.identifier===this.primaryTouch){var n={x:r.clientX,y:r.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,Vke)}}function Uke(t,e){t&In?(this.primaryTouch=e.changedPointers[0].identifier,O6.call(this,e)):t&(Sr|ti)&&O6.call(this,e)}function Hke(t){for(var e=t.srcEvent.clientX,r=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(e-i.x),o=Math.abs(r-i.y);if(s<=T6&&o<=T6)return!0}return!1}var Vse=function(){var t=function(e){Ki(r,e);function r(i,s){var o;return o=e.call(this,i,s)||this,o.handler=function(a,l,c){var d=c.pointerType===ym,h=c.pointerType===EA;if(!(h&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)Uke.call(Pg(Pg(o)),l,c);else if(h&&Hke.call(Pg(Pg(o)),c))return;o.callback(a,l,c)}},o.touch=new kA(o.manager,o.handler),o.mouse=new TA(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=r.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},r}(yh);return t}();function Wke(t){var e,r=t.options.inputClass;return r?e=r:_ke?e=zse:Eke?e=kA:Rse?e=Vse:e=TA,new e(t,Mke)}function Uu(t,e,r){return Array.isArray(t)?(bo(t,r[e],r),!0):!1}var oy=1,Bi=2,Ud=4,Ka=8,xo=Ka,Tp=16,Rs=32,Kke=1;function Gke(){return Kke++}function Rg(t,e){var r=e.manager;return r?r.get(t):t}function j6(t){return t&Tp?"cancel":t&Ka?"end":t&Ud?"move":t&Bi?"start":""}var wm=function(){function t(r){r===void 0&&(r={}),this.options=ms({enable:!0},r),this.id=Gke(),this.manager=null,this.state=oy,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(n){return Rc(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(Uu(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=Rg(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return Uu(n,"dropRecognizeWith",this)?this:(n=Rg(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(Uu(n,"requireFailure",this))return this;var i=this.requireFail;return n=Rg(n,this),Ac(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(Uu(n,"dropRequireFailure",this))return this;n=Rg(n,this);var i=Ac(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<Ka&&o(i.options.event+j6(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=Ka&&o(i.options.event+j6(s))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=Rs},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(Rs|oy)))return!1;n++}return!0},e.recognize=function(n){var i=Rc({},n);if(!ob(this.options.enable,[this,i])){this.reset(),this.state=Rs;return}this.state&(xo|Tp|Rs)&&(this.state=oy),this.state=this.process(i),this.state&(Bi|Ud|Ka|Tp)&&this.tryEmit(i)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},t}(),VI=function(t){Ki(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,ms({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var r=e.prototype;return r.getTouchAction=function(){return[BI]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime<o.time;if(this.reset(),i.eventType&In&&this.count===0)return this.failTimeout();if(l&&c&&a){if(i.eventType!==Sr)return this.failTimeout();var d=this.pTime?i.timeStamp-this.pTime<o.interval:!0,h=!this.pCenter||Bv(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!h||!d?this.count=1:this.count+=1,this._input=i;var f=this.count%o.taps;if(f===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=xo,s.tryEmit()},o.interval),Bi):xo}return Rs},r.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=Rs},this.options.interval),Rs},r.reset=function(){clearTimeout(this._timer)},r.emit=function(){this.state===xo&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(wm),Hd=function(t){Ki(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ms({pointers:1},n))||this}var r=e.prototype;return r.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},r.process=function(i){var s=this.state,o=i.eventType,a=s&(Bi|Ud),l=this.attrTest(i);return a&&(o&ti||!l)?s|Tp:a||l?o&Sr?s|Ka:s&Bi?s|Ud:Bi:Rs},e}(wm);function Use(t){return t===Vd?"down":t===xm?"up":t===vm?"left":t===bm?"right":""}var OA=function(t){Ki(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,ms({event:"pan",threshold:10,pointers:1,direction:Mse},n))||this,i.pX=null,i.pY=null,i}var r=e.prototype;return r.getTouchAction=function(){var i=this.options.direction,s=[];return i&Ls&&s.push(Np),i&cc&&s.push(Ep),s},r.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,c=i.deltaX,d=i.deltaY;return l&s.direction||(s.direction&Ls?(l=c===0?qv:c<0?vm:bm,o=c!==this.pX,a=Math.abs(i.deltaX)):(l=d===0?qv:d<0?xm:Vd,o=d!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},r.attrTest=function(i){return Hd.prototype.attrTest.call(this,i)&&(this.state&Bi||!(this.state&Bi)&&this.directionTest(i))},r.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=Use(i.direction);s&&(i.additionalEvent=this.options.event+s),t.prototype.emit.call(this,i)},e}(Hd),Hse=function(t){Ki(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ms({event:"swipe",threshold:10,velocity:.3,direction:Ls|cc,pointers:1},n))||this}var r=e.prototype;return r.getTouchAction=function(){return OA.prototype.getTouchAction.call(this)},r.attrTest=function(i){var s=this.options.direction,o;return s&(Ls|cc)?o=i.overallVelocity:s&Ls?o=i.overallVelocityX:s&cc&&(o=i.overallVelocityY),t.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&Mc(o)>this.options.velocity&&i.eventType&Sr},r.emit=function(i){var s=Use(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},e}(Hd),Wse=function(t){Ki(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ms({event:"pinch",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[lc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&Bi)},r.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}t.prototype.emit.call(this,i)},e}(Hd),Kse=function(t){Ki(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ms({event:"rotate",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[lc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&Bi)},e}(Hd),Gse=function(t){Ki(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,ms({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var r=e.prototype;return r.getTouchAction=function(){return[Ise]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(Sr|ti)&&!c)this.reset();else if(i.eventType&In)this.reset(),this._timer=setTimeout(function(){s.state=xo,s.tryEmit()},o.time);else if(i.eventType&Sr)return xo;return Rs},r.reset=function(){clearTimeout(this._timer)},r.emit=function(i){this.state===xo&&(i&&i.eventType&Sr?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=_A(),this.manager.emit(this.options.event,this._input)))},e}(wm),Yse={domEvents:!1,touchAction:Pse,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},P6=[[Kse,{enable:!1}],[Wse,{enable:!1},["rotate"]],[Hse,{direction:Ls}],[OA,{direction:Ls},["swipe"]],[VI],[VI,{event:"doubletap",taps:2},["tap"]],[Gse]],Yke=1,I6=2;function R6(t,e){var r=t.element;if(r.style){var n;bo(t.options.cssProps,function(i,s){n=sb(r.style,s),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function Qke(t,e){var r=document.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}var M6=function(){function t(r,n){var i=this;this.options=Rc({},Yse,n||{}),this.options.inputTarget=this.options.inputTarget||r,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=r,this.input=Wke(this),this.touchAction=new $se(this,this.options.touchAction),R6(this,!0),bo(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var e=t.prototype;return e.set=function(n){return Rc(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?I6:Yke},e.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&xo)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==I6&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(Bi|Ud|Ka)&&(i.curRecognizer=s,a=s),l++}},e.get=function(n){if(n instanceof wm)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},e.add=function(n){if(Uu(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(Uu(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=Ac(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},e.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return bo(Cp(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},e.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return bo(Cp(n),function(o){i?s[o]&&s[o].splice(Ac(s[o],i),1):delete s[o]}),this},e.emit=function(n,i){this.options.domEvents&&Qke(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},e.destroy=function(){this.element&&R6(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),Xke={touchstart:In,touchmove:Xc,touchend:Sr,touchcancel:ti},Jke="touchstart",Zke="touchstart touchmove touchend touchcancel",e2e=function(t){Ki(e,t);function e(){var n,i=e.prototype;return i.evTarget=Jke,i.evWin=Zke,n=t.apply(this,arguments)||this,n.started=!1,n}var r=e.prototype;return r.handler=function(i){var s=Xke[i.type];if(s===In&&(this.started=!0),!!this.started){var o=t2e.call(this,i,s);s&(Sr|ti)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:ym,srcEvent:i})}},e}(yh);function t2e(t,e){var r=kp(t.touches),n=kp(t.changedTouches);return e&(Sr|ti)&&(r=CA(r.concat(n),"identifier",!0)),[r,n]}function Qse(t,e,r){var n="DEPRECATED METHOD: "+e+`
`+r+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),t.apply(this,arguments)}}var Xse=Qse(function(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;)(!r||r&&t[n[i]]===void 0)&&(t[n[i]]=e[n[i]]),i++;return t},"extend","Use `assign`."),r2e=Qse(function(t,e){return Xse(t,e,!0)},"merge","Use `assign`.");function n2e(t,e,r){var n=e.prototype,i;i=t.prototype=Object.create(n),i.constructor=t,i._super=n,r&&Rc(i,r)}function A6(t,e){return function(){return t.apply(e,arguments)}}var i2e=function(){var t=function(r,n){return n===void 0&&(n={}),new M6(r,ms({recognizers:P6.concat()},n))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=Mse,t.DIRECTION_DOWN=Vd,t.DIRECTION_LEFT=vm,t.DIRECTION_RIGHT=bm,t.DIRECTION_UP=xm,t.DIRECTION_HORIZONTAL=Ls,t.DIRECTION_VERTICAL=cc,t.DIRECTION_NONE=qv,t.DIRECTION_DOWN=Vd,t.INPUT_START=In,t.INPUT_MOVE=Xc,t.INPUT_END=Sr,t.INPUT_CANCEL=ti,t.STATE_POSSIBLE=oy,t.STATE_BEGAN=Bi,t.STATE_CHANGED=Ud,t.STATE_ENDED=Ka,t.STATE_RECOGNIZED=xo,t.STATE_CANCELLED=Tp,t.STATE_FAILED=Rs,t.Manager=M6,t.Input=yh,t.TouchAction=$se,t.TouchInput=kA,t.MouseInput=TA,t.PointerEventInput=zse,t.TouchMouseInput=Vse,t.SingleTouchInput=e2e,t.Recognizer=wm,t.AttrRecognizer=Hd,t.Tap=VI,t.Pan=OA,t.Swipe=Hse,t.Pinch=Wse,t.Rotate=Kse,t.Press=Gse,t.on=Df,t.off=Ff,t.each=bo,t.merge=r2e,t.extend=Xse,t.bindFn=A6,t.assign=Rc,t.inherit=n2e,t.bindFn=A6,t.prefixed=sb,t.toArray=kp,t.inArray=Ac,t.uniqueArray=CA,t.splitStr=Cp,t.boolOrFn=ob,t.hasParent=NA,t.addEventListeners=Df,t.removeEventListeners=Ff,t.defaults=Rc({},Yse,{preset:P6}),t}();const Jse=VNe("DELETE");function s2e(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return Zse({},t,...r)}function Zse(){const t=zv(...arguments);return toe(t),t}function zv(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(e.length<2)return e[0];if(e.length>2)return zv(Zse(e[0],e[1]),...QNe(e).call(e,2));const n=e[0],i=e[1];if(n instanceof Date&&i instanceof Date)return n.setTime(i.getTime()),n;for(const s of rCe(i))Object.prototype.propertyIsEnumerable.call(i,s)&&(i[s]===Jse?delete n[s]:n[s]!==null&&i[s]!==null&&typeof n[s]=="object"&&typeof i[s]=="object"&&!ks(n[s])&&!ks(i[s])?n[s]=zv(n[s],i[s]):n[s]=eoe(i[s]));return n}function eoe(t){return ks(t)?ss(t).call(t,e=>eoe(e)):typeof t=="object"&&t!==null?t instanceof Date?new Date(t.getTime()):zv({},t):t}function toe(t){for(const e of SA(t))t[e]===Jse?delete t[e]:typeof t[e]=="object"&&t[e]!==null&&toe(t[e])}function o2e(){const t=()=>{};return{on:t,off:t,destroy:t,emit:t,get(){return{set:t}}}}const a2e=typeof window<"u"?window.Hammer||i2e:function(){return o2e()};function ho(t){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const r=a2e(this._dom.overlay);r.on("tap",_se(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{r.destroy()});const n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Ic(n).call(n,i=>{r.on(i,s=>{s.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=i=>{l2e(i.target,t)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=i=>{("key"in i?i.key==="Escape":i.keyCode===27)&&this.deactivate()}}vke(ho.prototype);ho.current=null;ho.prototype.destroy=function(){this.deactivate();for(const r of CCe(t=kse(e=this._cleanupQueue).call(e,0)).call(t)){var t,e;r()}};ho.prototype.activate=function(){ho.current&&ho.current.deactivate(),ho.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};ho.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};ho.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};function l2e(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}var V_,$6;function c2e(){if($6)return V_;$6=1,hse();var t=$r();return V_=t.Object.getOwnPropertySymbols,V_}var U_,D6;function u2e(){if(D6)return U_;D6=1;var t=c2e();return U_=t,U_}var H_,F6;function d2e(){return F6||(F6=1,H_=u2e()),H_}var h2e=d2e(),q6=rt(h2e),W_={exports:{}},L6={},B6;function f2e(){if(B6)return L6;B6=1;var t=Ve(),e=Et(),r=Us(),n=Y0().f,i=Tr(),s=!i||e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getOwnPropertyDescriptor:function(a,l){return n(r(a),l)}}),L6}var z6;function p2e(){if(z6)return W_.exports;z6=1,f2e();var t=$r(),e=t.Object,r=W_.exports=function(i,s){return e.getOwnPropertyDescriptor(i,s)};return e.getOwnPropertyDescriptor.sham&&(r.sham=!0),W_.exports}var K_,V6;function m2e(){if(V6)return K_;V6=1;var t=p2e();return K_=t,K_}var G_,U6;function g2e(){return U6||(U6=1,G_=m2e()),G_}var y2e=g2e(),roe=rt(y2e),H6={},W6;function v2e(){if(W6)return H6;W6=1;var t=Ve(),e=Tr(),r=Nse(),n=Us(),i=Y0(),s=X0();return t({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(a){for(var l=n(a),c=i.f,d=r(l),h={},f=0,p,m;d.length>f;)m=c(l,p=d[f++]),m!==void 0&&s(h,p,m);return h}}),H6}var Y_,K6;function b2e(){if(K6)return Y_;K6=1,v2e();var t=$r();return Y_=t.Object.getOwnPropertyDescriptors,Y_}var Q_,G6;function x2e(){if(G6)return Q_;G6=1;var t=b2e();return Q_=t,Q_}var X_,Y6;function w2e(){return Y6||(Y6=1,X_=x2e()),X_}var S2e=w2e(),Q6=rt(S2e),J_={exports:{}},X6={},J6;function _2e(){if(J6)return X6;J6=1;var t=Ve(),e=Tr(),r=vA().f;return t({target:"Object",stat:!0,forced:Object.defineProperties!==r,sham:!e},{defineProperties:r}),X6}var Z6;function E2e(){if(Z6)return J_.exports;Z6=1,_2e();var t=$r(),e=t.Object,r=J_.exports=function(i,s){return e.defineProperties(i,s)};return e.defineProperties.sham&&(r.sham=!0),J_.exports}var Z_,e8;function N2e(){if(e8)return Z_;e8=1;var t=E2e();return Z_=t,Z_}var eE,t8;function C2e(){return t8||(t8=1,eE=N2e()),eE}var k2e=C2e(),T2e=rt(k2e),tE,r8;function O2e(){return r8||(r8=1,tE=rse()),tE}var j2e=O2e(),P2e=rt(j2e),n8={},i8={},rE={exports:{}},nE,s8;function I2e(){if(s8)return nE;s8=1;var t=Et();return nE=t(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),nE}var iE,o8;function R2e(){if(o8)return iE;o8=1;var t=Et(),e=Dn(),r=qo(),n=I2e(),i=Object.isExtensible,s=t(function(){});return iE=s||n?function(a){return!e(a)||n&&r(a)==="ArrayBuffer"?!1:i?i(a):!0}:i,iE}var sE,a8;function M2e(){if(a8)return sE;a8=1;var t=Et();return sE=!t(function(){return Object.isExtensible(Object.preventExtensions({}))}),sE}var l8;function noe(){if(l8)return rE.exports;l8=1;var t=Ve(),e=jt(),r=fm(),n=Dn(),i=Kr(),s=Wi().f,o=eb(),a=lse(),l=R2e(),c=G0(),d=M2e(),h=!1,f=c("meta"),p=0,m=function(x){s(x,f,{value:{objectID:"O"+p++,weakData:{}}})},g=function(x,S){if(!n(x))return typeof x=="symbol"?x:(typeof x=="string"?"S":"P")+x;if(!i(x,f)){if(!l(x))return"F";if(!S)return"E";m(x)}return x[f].objectID},v=function(x,S){if(!i(x,f)){if(!l(x))return!0;if(!S)return!1;m(x)}return x[f].weakData},y=function(x){return d&&h&&l(x)&&!i(x,f)&&m(x),x},b=function(){w.enable=function(){},h=!0;var x=o.f,S=e([].splice),_={};_[f]=1,x(_).length&&(o.f=function(E){for(var N=x(E),k=0,C=N.length;k<C;k++)if(N[k]===f){S(N,k,1);break}return N},t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:a.f}))},w=rE.exports={enable:b,fastKey:g,getWeakData:v,onFreeze:y};return r[f]=!0,rE.exports}var oE,c8;function A2e(){if(c8)return oE;c8=1;var t=Gr(),e=gh(),r=t("iterator"),n=Array.prototype;return oE=function(i){return i!==void 0&&(e.Array===i||n[r]===i)},oE}var aE,u8;function ioe(){if(u8)return aE;u8=1;var t=pl(),e=dA(),r=cm(),n=gh(),i=Gr(),s=i("iterator");return aE=function(o){if(!r(o))return e(o,s)||e(o,"@@iterator")||n[t(o)]},aE}var lE,d8;function soe(){if(d8)return lE;d8=1;var t=ni(),e=Lo(),r=Bo(),n=ch(),i=ioe(),s=TypeError;return lE=function(o,a){var l=arguments.length<2?i(o):a;if(e(l))return r(t(l,o));throw new s(n(o)+" is not iterable")},lE}var cE,h8;function jA(){if(h8)return cE;h8=1;var t=ni(),e=Bo(),r=dA();return cE=function(n,i,s){var o,a;e(n);try{if(o=r(n,"return"),!o){if(i==="throw")throw s;return s}o=t(o,n)}catch(l){a=!0,o=l}if(i==="throw")throw s;if(a)throw o;return e(o),s},cE}var uE,f8;function PA(){if(f8)return uE;f8=1;var t=Q0(),e=ni(),r=Bo(),n=ch(),i=A2e(),s=fl(),o=Wr(),a=soe(),l=ioe(),c=jA(),d=TypeError,h=function(p,m){this.stopped=p,this.result=m},f=h.prototype;return uE=function(p,m,g){var v=g&&g.that,y=!!(g&&g.AS_ENTRIES),b=!!(g&&g.IS_RECORD),w=!!(g&&g.IS_ITERATOR),x=!!(g&&g.INTERRUPTED),S=t(m,v),_,E,N,k,C,O,P,j=function(D){return _&&c(_,"normal"),new h(!0,D)},A=function(D){return y?(r(D),x?S(D[0],D[1],j):S(D[0],D[1])):x?S(D,j):S(D)};if(b)_=p.iterator;else if(w)_=p;else{if(E=l(p),!E)throw new d(n(p)+" is not iterable");if(i(E)){for(N=0,k=s(p);k>N;N++)if(C=A(p[N]),C&&o(f,C))return C;return new h(!1)}_=a(p,E)}for(O=b?p.next:_.next;!(P=e(O,_)).done;){try{C=A(P.value)}catch(D){c(_,"throw",D)}if(typeof C=="object"&&C&&o(f,C))return C}return new h(!1)},uE}var dE,p8;function ooe(){if(p8)return dE;p8=1;var t=Wr(),e=TypeError;return dE=function(r,n){if(t(n,r))return r;throw new e("Incorrect invocation")},dE}var hE,m8;function aoe(){if(m8)return hE;m8=1;var t=Ve(),e=kr(),r=noe(),n=Et(),i=hh(),s=PA(),o=ooe(),a=Hr(),l=Dn(),c=cm(),d=Qc(),h=Wi().f,f=mh().forEach,p=Tr(),m=gm(),g=m.set,v=m.getterFor;return hE=function(y,b,w){var x=y.indexOf("Map")!==-1,S=y.indexOf("Weak")!==-1,_=x?"set":"add",E=e[y],N=E&&E.prototype,k={},C;if(!p||!a(E)||!(S||N.forEach&&!n(function(){new E().entries().next()})))C=w.getConstructor(b,y,x,_),r.enable();else{C=b(function(j,A){g(o(j,O),{type:y,collection:new E}),c(A)||s(A,j[_],{that:j,AS_ENTRIES:x})});var O=C.prototype,P=v(y);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(j){var A=j==="add"||j==="set";j in N&&!(S&&j==="clear")&&i(O,j,function(D,I){var L=P(this).collection;if(!A&&S&&!l(D))return j==="get"?void 0:!1;var F=L[j](D===0?0:D,I);return A?this:F})}),S||h(O,"size",{configurable:!0,get:function(){return P(this).collection.size}})}return d(C,y,!1,!0),k[y]=C,t({global:!0,forced:!0},k),S||w.setStrong(C,y,x),C},hE}var fE,g8;function $2e(){if(g8)return fE;g8=1;var t=mm();return fE=function(e,r,n){for(var i in r)n&&n.unsafe&&e[i]?e[i]=r[i]:t(e,i,r[i],n);return e},fE}var pE,y8;function D2e(){if(y8)return pE;y8=1;var t=wi(),e=bA(),r=Gr(),n=Tr(),i=r("species");return pE=function(s){var o=t(s);n&&o&&!o[i]&&e(o,i,{configurable:!0,get:function(){return this}})},pE}var mE,v8;function loe(){if(v8)return mE;v8=1;var t=pm(),e=bA(),r=$2e(),n=Q0(),i=ooe(),s=cm(),o=PA(),a=xA(),l=wA(),c=D2e(),d=Tr(),h=noe().fastKey,f=gm(),p=f.set,m=f.getterFor;return mE={getConstructor:function(g,v,y,b){var w=g(function(N,k){i(N,x),p(N,{type:v,index:t(null),first:null,last:null,size:0}),d||(N.size=0),s(k)||o(k,N[b],{that:N,AS_ENTRIES:y})}),x=w.prototype,S=m(v),_=function(N,k,C){var O=S(N),P=E(N,k),j,A;return P?P.value=C:(O.last=P={index:A=h(k,!0),key:k,value:C,previous:j=O.last,next:null,removed:!1},O.first||(O.first=P),j&&(j.next=P),d?O.size++:N.size++,A!=="F"&&(O.index[A]=P)),N},E=function(N,k){var C=S(N),O=h(k),P;if(O!=="F")return C.index[O];for(P=C.first;P;P=P.next)if(P.key===k)return P};return r(x,{clear:function(){for(var k=this,C=S(k),O=C.first;O;)O.removed=!0,O.previous&&(O.previous=O.previous.next=null),O=O.next;C.first=C.last=null,C.index=t(null),d?C.size=0:k.size=0},delete:function(N){var k=this,C=S(k),O=E(k,N);if(O){var P=O.next,j=O.previous;delete C.index[O.index],O.removed=!0,j&&(j.next=P),P&&(P.previous=j),C.first===O&&(C.first=P),C.last===O&&(C.last=j),d?C.size--:k.size--}return!!O},forEach:function(k){for(var C=S(this),O=n(k,arguments.length>1?arguments[1]:void 0),P;P=P?P.next:C.first;)for(O(P.value,P.key,this);P&&P.removed;)P=P.previous},has:function(k){return!!E(this,k)}}),r(x,y?{get:function(k){var C=E(this,k);return C&&C.value},set:function(k,C){return _(this,k===0?0:k,C)}}:{add:function(k){return _(this,k=k===0?0:k,k)}}),d&&e(x,"size",{configurable:!0,get:function(){return S(this).size}}),w},setStrong:function(g,v,y){var b=v+" Iterator",w=m(v),x=m(b);a(g,v,function(S,_){p(this,{type:b,target:S,state:w(S),kind:_,last:null})},function(){for(var S=x(this),_=S.kind,E=S.last;E&&E.removed;)E=E.previous;return!S.target||!(S.last=E=E?E.next:S.state.first)?(S.target=null,l(void 0,!0)):l(_==="keys"?E.key:_==="values"?E.value:[E.key,E.value],!1)},y?"entries":"values",!y,!0),c(v)}},mE}var b8;function F2e(){if(b8)return i8;b8=1;var t=aoe(),e=loe();return t("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),i8}var x8;function q2e(){return x8||(x8=1,F2e()),n8}var w8={},gE,S8;function coe(){return S8||(S8=1,gE=function(t,e){return e===1?function(r,n){return r[t](n)}:function(r,n,i){return r[t](n,i)}}),gE}var yE,_8;function L2e(){if(_8)return yE;_8=1;var t=wi(),e=coe(),r=t("Map");return yE={Map:r,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:r.prototype},yE}var E8;function B2e(){if(E8)return w8;E8=1;var t=Ve(),e=jt(),r=Lo(),n=Gc(),i=PA(),s=L2e(),o=uh(),a=Et(),l=s.Map,c=s.has,d=s.get,h=s.set,f=e([].push),p=o||a(function(){return l.groupBy("ab",function(m){return m}).get("a").length!==1});return t({target:"Map",stat:!0,forced:o||p},{groupBy:function(g,v){n(g),r(v);var y=new l,b=0;return i(g,function(w){var x=v(w,b++);c(y,x)?f(d(y,x),w):h(y,x,[w])}),y}}),w8}var vE,N8;function z2e(){if(N8)return vE;N8=1,gl(),q2e(),B2e(),nb();var t=$r();return vE=t.Map,vE}var bE,C8;function V2e(){if(C8)return bE;C8=1;var t=z2e();return yl(),bE=t,bE}var xE,k8;function U2e(){return k8||(k8=1,xE=V2e()),xE}var H2e=U2e(),uoe=rt(H2e),T8={},O8;function W2e(){if(O8)return T8;O8=1;var t=Ve(),e=mh().some,r=ib(),n=r("some");return t({target:"Array",proto:!0,forced:!n},{some:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),T8}var wE,j8;function K2e(){if(j8)return wE;j8=1,W2e();var t=ii();return wE=t("Array","some"),wE}var SE,P8;function G2e(){if(P8)return SE;P8=1;var t=Wr(),e=K2e(),r=Array.prototype;return SE=function(n){var i=n.some;return n===r||t(r,n)&&i===r.some?e:i},SE}var _E,I8;function Y2e(){if(I8)return _E;I8=1;var t=G2e();return _E=t,_E}var EE,R8;function Q2e(){return R8||(R8=1,EE=Y2e()),EE}var X2e=Q2e(),J2e=rt(X2e),NE,M8;function Z2e(){if(M8)return NE;M8=1,gl();var t=ii();return NE=t("Array","keys"),NE}var CE,A8;function eTe(){if(A8)return CE;A8=1;var t=Z2e();return CE=t,CE}var kE,$8;function tTe(){if($8)return kE;$8=1,yl();var t=pl(),e=Kr(),r=Wr(),n=eTe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return kE=function(o){var a=o.keys;return o===i||r(i,o)&&a===i.keys||e(s,t(o))?n:a},kE}var TE,D8;function rTe(){return D8||(D8=1,TE=tTe()),TE}var nTe=rTe(),xu=rt(nTe),F8={},OE,q8;function iTe(){if(q8)return OE;q8=1;var t=ph(),e=Math.floor,r=function(n,i){var s=n.length;if(s<8)for(var o=1,a,l;o<s;){for(l=o,a=n[o];l&&i(n[l-1],a)>0;)n[l]=n[--l];l!==o++&&(n[l]=a)}else for(var c=e(s/2),d=r(t(n,0,c),i),h=r(t(n,c),i),f=d.length,p=h.length,m=0,g=0;m<f||g<p;)n[m+g]=m<f&&g<p?i(d[m],h[g])<=0?d[m++]:h[g++]:m<f?d[m++]:h[g++];return n};return OE=r,OE}var jE,L8;function sTe(){if(L8)return jE;L8=1;var t=ah(),e=t.match(/firefox\/(\d+)/i);return jE=!!e&&+e[1],jE}var PE,B8;function oTe(){if(B8)return PE;B8=1;var t=ah();return PE=/MSIE|Trident/.test(t),PE}var IE,z8;function aTe(){if(z8)return IE;z8=1;var t=ah(),e=t.match(/AppleWebKit\/(\d+)\./);return IE=!!e&&+e[1],IE}var V8;function lTe(){if(V8)return F8;V8=1;var t=Ve(),e=jt(),r=Lo(),n=vs(),i=fl(),s=Cse(),o=ml(),a=Et(),l=iTe(),c=ib(),d=sTe(),h=oTe(),f=um(),p=aTe(),m=[],g=e(m.sort),v=e(m.push),y=a(function(){m.sort(void 0)}),b=a(function(){m.sort(null)}),w=c("sort"),x=!a(function(){if(f)return f<70;if(!(d&&d>3)){if(h)return!0;if(p)return p<603;var E="",N,k,C,O;for(N=65;N<76;N++){switch(k=String.fromCharCode(N),N){case 66:case 69:case 70:case 72:C=3;break;case 68:case 71:C=4;break;default:C=2}for(O=0;O<47;O++)m.push({k:k+O,v:C})}for(m.sort(function(P,j){return j.v-P.v}),O=0;O<m.length;O++)k=m[O].k.charAt(0),E.charAt(E.length-1)!==k&&(E+=k);return E!=="DGBEFHACIJK"}}),S=y||!b||!w||!x,_=function(E){return function(N,k){return k===void 0?-1:N===void 0?1:E!==void 0?+E(N,k)||0:o(N)>o(k)?1:-1}};return t({target:"Array",proto:!0,forced:S},{sort:function(N){N!==void 0&&r(N);var k=n(this);if(x)return N===void 0?g(k):g(k,N);var C=[],O=i(k),P,j;for(j=0;j<O;j++)j in k&&v(C,k[j]);for(l(C,_(N)),P=i(C),j=0;j<P;)k[j]=C[j++];for(;j<O;)s(k,j++);return k}}),F8}var RE,U8;function cTe(){if(U8)return RE;U8=1,lTe();var t=ii();return RE=t("Array","sort"),RE}var ME,H8;function uTe(){if(H8)return ME;H8=1;var t=Wr(),e=cTe(),r=Array.prototype;return ME=function(n){var i=n.sort;return n===r||t(r,n)&&i===r.sort?e:i},ME}var AE,W8;function dTe(){if(W8)return AE;W8=1;var t=uTe();return AE=t,AE}var $E,K8;function hTe(){return K8||(K8=1,$E=dTe()),$E}var fTe=hTe(),UI=rt(fTe),DE,G8;function pTe(){if(G8)return DE;G8=1,gl();var t=ii();return DE=t("Array","values"),DE}var FE,Y8;function mTe(){if(Y8)return FE;Y8=1;var t=pTe();return FE=t,FE}var qE,Q8;function gTe(){if(Q8)return qE;Q8=1,yl();var t=pl(),e=Kr(),r=Wr(),n=mTe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return qE=function(o){var a=o.values;return o===i||r(i,o)&&a===i.values||e(s,t(o))?n:a},qE}var LE,X8;function yTe(){return X8||(X8=1,LE=gTe()),LE}var vTe=yTe(),J8=rt(vTe),BE,Z8;function bTe(){return Z8||(Z8=1,BE=Sse()),BE}var xTe=bTe(),Hu=rt(xTe),zE,eV;function wTe(){if(eV)return zE;eV=1,gl();var t=ii();return zE=t("Array","entries"),zE}var VE,tV;function STe(){if(tV)return VE;tV=1;var t=wTe();return VE=t,VE}var UE,rV;function _Te(){if(rV)return UE;rV=1,yl();var t=pl(),e=Kr(),r=Wr(),n=STe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return UE=function(o){var a=o.entries;return o===i||r(i,o)&&a===i.entries||e(s,t(o))?n:a},UE}var HE,nV;function ETe(){return nV||(nV=1,HE=_Te()),HE}var NTe=ETe(),CTe=rt(NTe);const Xr=[];for(let t=0;t<256;++t)Xr.push((t+256).toString(16).slice(1));function kTe(t,e=0){return(Xr[t[e+0]]+Xr[t[e+1]]+Xr[t[e+2]]+Xr[t[e+3]]+"-"+Xr[t[e+4]]+Xr[t[e+5]]+"-"+Xr[t[e+6]]+Xr[t[e+7]]+"-"+Xr[t[e+8]]+Xr[t[e+9]]+"-"+Xr[t[e+10]]+Xr[t[e+11]]+Xr[t[e+12]]+Xr[t[e+13]]+Xr[t[e+14]]+Xr[t[e+15]]).toLowerCase()}let WE;const TTe=new Uint8Array(16);function OTe(){if(!WE){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");WE=crypto.getRandomValues.bind(crypto)}return WE(TTe)}const jTe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var iV={randomUUID:jTe};function PTe(t,e,r){var i;t=t||{};const n=t.random??((i=t.rng)==null?void 0:i.call(t))??OTe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,kTe(n)}function ITe(t,e,r){return iV.randomUUID&&!t?iV.randomUUID():PTe(t)}function sV(t){return typeof t=="string"||typeof t=="number"}class IA{constructor(e){Wa(this,"_queue",[]),Wa(this,"_timeout",null),Wa(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(e)}setOptions(e){e&&typeof e.delay<"u"&&(this.delay=e.delay),e&&typeof e.max<"u"&&(this.max=e.max),this._flushIfNeeded()}static extend(e,r){const n=new IA(r);if(e.flush!==void 0)throw new Error("Target object already has a property flush");e.flush=()=>{n.flush()};const i=[{name:"flush",original:void 0}];if(r&&r.replace)for(let s=0;s<r.replace.length;s++){const o=r.replace[s];i.push({name:o,original:e[o]}),n.replace(e,o)}return n._extended={object:e,methods:i},n}destroy(){if(this.flush(),this._extended){const e=this._extended.object,r=this._extended.methods;for(let n=0;n<r.length;n++){const i=r[n];i.original?e[i.name]=i.original:delete e[i.name]}this._extended=null}}replace(e,r){const n=this,i=e[r];if(!i)throw new Error("Method "+r+" undefined");e[r]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];n.queue({args:o,fn:i,context:this})}}queue(e){typeof e=="function"?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()}_flushIfNeeded(){this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=mke(()=>{this.flush()},this.delay))}flush(){var e,r;Ic(e=kse(r=this._queue).call(r,0)).call(e,n=>{n.fn.apply(n.context||n.fn,n.args||[])})}}class Vv{constructor(){Wa(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),Wa(this,"subscribe",Vv.prototype.on),Wa(this,"unsubscribe",Vv.prototype.off)}_trigger(e,r,n){var i;if(e==="*")throw new Error("Cannot trigger event *");Ic(i=[...this._subscribers[e],...this._subscribers["*"]]).call(i,s=>{s(e,r,n??null)})}on(e,r){typeof r=="function"&&this._subscribers[e].push(r)}off(e,r){var n;this._subscribers[e]=zu(n=this._subscribers[e]).call(n,i=>i!==r)}}var oV={},aV={},lV;function RTe(){if(lV)return aV;lV=1;var t=aoe(),e=loe();return t("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),aV}var cV;function MTe(){return cV||(cV=1,RTe()),oV}var uV={},KE,dV;function Jc(){if(dV)return KE;dV=1;var t=ch(),e=TypeError;return KE=function(r){if(typeof r=="object"&&"size"in r&&"has"in r&&"add"in r&&"delete"in r&&"keys"in r)return r;throw new e(t(r)+" is not a set")},KE}var GE,hV;function Zc(){if(hV)return GE;hV=1;var t=wi(),e=coe(),r=t("Set"),n=r.prototype;return GE={Set:r,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:n},GE}var YE,fV;function eu(){if(fV)return YE;fV=1;var t=ni();return YE=function(e,r,n){for(var i=n?e:e.iterator,s=e.next,o,a;!(o=t(s,i)).done;)if(a=r(o.value),a!==void 0)return a},YE}var QE,pV;function Sm(){if(pV)return QE;pV=1;var t=eu();return QE=function(e,r,n){return n?t(e.keys(),r,!0):e.forEach(r)},QE}var XE,mV;function RA(){if(mV)return XE;mV=1;var t=Zc(),e=Sm(),r=t.Set,n=t.add;return XE=function(i){var s=new r;return e(i,function(o){n(s,o)}),s},XE}var JE,gV;function _m(){return gV||(gV=1,JE=function(t){return t.size}),JE}var ZE,yV;function ATe(){return yV||(yV=1,ZE=function(t){return{iterator:t,next:t.next,done:!1}}),ZE}var eN,vV;function tu(){if(vV)return eN;vV=1;var t=Lo(),e=Bo(),r=ni(),n=fh(),i=ATe(),s="Invalid size",o=RangeError,a=TypeError,l=Math.max,c=function(d,h){this.set=d,this.size=l(h,0),this.has=t(d.has),this.keys=t(d.keys)};return c.prototype={getIterator:function(){return i(e(r(this.keys,this.set)))},includes:function(d){return r(this.has,this.set,d)}},eN=function(d){e(d);var h=+d.size;if(h!==h)throw new a(s);var f=n(h);if(f<0)throw new o(s);return new c(d,f)},eN}var tN,bV;function $Te(){if(bV)return tN;bV=1;var t=Jc(),e=Zc(),r=RA(),n=_m(),i=tu(),s=Sm(),o=eu(),a=e.has,l=e.remove;return tN=function(d){var h=t(this),f=i(d),p=r(h);return n(h)<=f.size?s(h,function(m){f.includes(m)&&l(p,m)}):o(f.getIterator(),function(m){a(p,m)&&l(p,m)}),p},tN}var rN,xV;function ru(){return xV||(xV=1,rN=function(){return!1}),rN}var wV;function DTe(){if(wV)return uV;wV=1;var t=Ve(),e=$Te(),r=Et(),n=ru(),i=!n("difference",function(o){return o.size===0}),s=i||r(function(){var o={size:1,has:function(){return!0},keys:function(){var l=0;return{next:function(){var c=l++>1;return a.has(1)&&a.clear(),{done:c,value:2}}}}},a=new Set([1,2,3,4]);return a.difference(o).size!==3});return t({target:"Set",proto:!0,real:!0,forced:s},{difference:e}),uV}var SV={},nN,_V;function FTe(){if(_V)return nN;_V=1;var t=Jc(),e=Zc(),r=_m(),n=tu(),i=Sm(),s=eu(),o=e.Set,a=e.add,l=e.has;return nN=function(d){var h=t(this),f=n(d),p=new o;return r(h)>f.size?s(f.getIterator(),function(m){l(h,m)&&a(p,m)}):i(h,function(m){f.includes(m)&&a(p,m)}),p},nN}var EV;function qTe(){if(EV)return SV;EV=1;var t=Ve(),e=Et(),r=FTe(),n=ru(),i=!n("intersection",function(s){return s.size===2&&s.has(1)&&s.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return t({target:"Set",proto:!0,real:!0,forced:i},{intersection:r}),SV}var NV={},iN,CV;function LTe(){if(CV)return iN;CV=1;var t=Jc(),e=Zc().has,r=_m(),n=tu(),i=Sm(),s=eu(),o=jA();return iN=function(l){var c=t(this),d=n(l);if(r(c)<=d.size)return i(c,function(f){if(d.includes(f))return!1},!0)!==!1;var h=d.getIterator();return s(h,function(f){if(e(c,f))return o(h,"normal",!1)})!==!1},iN}var kV;function BTe(){if(kV)return NV;kV=1;var t=Ve(),e=LTe(),r=ru(),n=!r("isDisjointFrom",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:e}),NV}var TV={},sN,OV;function zTe(){if(OV)return sN;OV=1;var t=Jc(),e=_m(),r=Sm(),n=tu();return sN=function(s){var o=t(this),a=n(s);return e(o)>a.size?!1:r(o,function(l){if(!a.includes(l))return!1},!0)!==!1},sN}var jV;function VTe(){if(jV)return TV;jV=1;var t=Ve(),e=zTe(),r=ru(),n=!r("isSubsetOf",function(i){return i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:e}),TV}var PV={},oN,IV;function UTe(){if(IV)return oN;IV=1;var t=Jc(),e=Zc().has,r=_m(),n=tu(),i=eu(),s=jA();return oN=function(a){var l=t(this),c=n(a);if(r(l)<c.size)return!1;var d=c.getIterator();return i(d,function(h){if(!e(l,h))return s(d,"normal",!1)})!==!1},oN}var RV;function HTe(){if(RV)return PV;RV=1;var t=Ve(),e=UTe(),r=ru(),n=!r("isSupersetOf",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:e}),PV}var MV={},aN,AV;function WTe(){if(AV)return aN;AV=1;var t=Jc(),e=Zc(),r=RA(),n=tu(),i=eu(),s=e.add,o=e.has,a=e.remove;return aN=function(c){var d=t(this),h=n(c).getIterator(),f=r(d);return i(h,function(p){o(d,p)?a(f,p):s(f,p)}),f},aN}var lN,$V;function doe(){return $V||($V=1,lN=function(t){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[t](r);return n.size===1&&n.values().next().value===4}catch{return!1}}),lN}var DV;function KTe(){if(DV)return MV;DV=1;var t=Ve(),e=WTe(),r=doe(),n=ru(),i=!n("symmetricDifference")||!r("symmetricDifference");return t({target:"Set",proto:!0,real:!0,forced:i},{symmetricDifference:e}),MV}var FV={},cN,qV;function GTe(){if(qV)return cN;qV=1;var t=Jc(),e=Zc().add,r=RA(),n=tu(),i=eu();return cN=function(o){var a=t(this),l=n(o).getIterator(),c=r(a);return i(l,function(d){e(c,d)}),c},cN}var LV;function YTe(){if(LV)return FV;LV=1;var t=Ve(),e=GTe(),r=doe(),n=ru(),i=!n("union")||!r("union");return t({target:"Set",proto:!0,real:!0,forced:i},{union:e}),FV}var uN,BV;function QTe(){if(BV)return uN;BV=1,gl(),MTe(),DTe(),qTe(),BTe(),VTe(),HTe(),KTe(),YTe(),nb();var t=$r();return uN=t.Set,uN}var dN,zV;function XTe(){if(zV)return dN;zV=1;var t=QTe();return yl(),dN=t,dN}var hN,VV;function JTe(){return VV||(VV=1,hN=XTe()),hN}var ZTe=JTe(),fN=rt(ZTe),pN,UV;function eOe(){if(UV)return pN;UV=1,gl(),nb();var t=soe();return pN=t,pN}var mN,HV;function tOe(){if(HV)return mN;HV=1;var t=eOe();return yl(),mN=t,mN}var gN,WV;function rOe(){if(WV)return gN;WV=1;var t=tOe();return gN=t,gN}var yN,KV;function nOe(){if(KV)return yN;KV=1;var t=rOe();return yN=t,yN}var vN,GV;function iOe(){return GV||(GV=1,vN=nOe()),vN}var bN,YV;function sOe(){return YV||(YV=1,bN=iOe()),bN}var oOe=sOe(),xN=rt(oOe);class Bl{constructor(e){this._pairs=e}*[Hu](){for(const[e,r]of this._pairs)yield[e,r]}*entries(){for(const[e,r]of this._pairs)yield[e,r]}*keys(){for(const[e]of this._pairs)yield e}*values(){for(const[,e]of this._pairs)yield e}toIdArray(){var e;return ss(e=[...this._pairs]).call(e,r=>r[0])}toItemArray(){var e;return ss(e=[...this._pairs]).call(e,r=>r[1])}toEntryArray(){return[...this._pairs]}toObjectMap(){const e=JCe(null);for(const[r,n]of this._pairs)e[r]=n;return e}toMap(){return new uoe(this._pairs)}toIdSet(){return new fN(this.toIdArray())}toItemSet(){return new fN(this.toItemArray())}cache(){return new Bl([...this._pairs])}distinct(e){const r=new fN;for(const[n,i]of this._pairs)r.add(e(i,n));return r}filter(e){const r=this._pairs;return new Bl({*[Hu](){for(const[n,i]of r)e(i,n)&&(yield[n,i])}})}forEach(e){for(const[r,n]of this._pairs)e(n,r)}map(e){const r=this._pairs;return new Bl({*[Hu](){for(const[n,i]of r)yield[n,e(i,n)]}})}max(e){const r=xN(this._pairs);let n=r.next();if(n.done)return null;let i=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=r.next()).done;){const[o,a]=n.value,l=e(a,o);l>s&&(s=l,i=a)}return i}min(e){const r=xN(this._pairs);let n=r.next();if(n.done)return null;let i=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=r.next()).done;){const[o,a]=n.value,l=e(a,o);l<s&&(s=l,i=a)}return i}reduce(e,r){for(const[n,i]of this._pairs)r=e(r,i,n);return r}sort(e){return new Bl({[Hu]:()=>{var r;return xN(UI(r=[...this._pairs]).call(r,(n,i)=>{let[s,o]=n,[a,l]=i;return e(o,l,s,a)}))}})}}function QV(t,e){var r=SA(t);if(q6){var n=q6(t);e&&(n=zu(n).call(n,function(i){return roe(t,i).enumerable})),r.push.apply(r,n)}return r}function XV(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?Ic(r=QV(Object(i),!0)).call(r,function(s){Wa(t,s,i[s])}):Q6?T2e(t,Q6(i)):Ic(n=QV(Object(i))).call(n,function(s){P2e(t,s,roe(i,s))})}return t}function aOe(t,e){return t[e]==null&&(t[e]=ITe()),t}class Wd extends Vv{get idProp(){return this._idProp}constructor(e,r){super(),Wa(this,"_queue",null),e&&!ks(e)&&(r=e,e=[]),this._options=r||{},this._data=new uoe,this.length=0,this._idProp=this._options.fieldId||"id",e&&e.length&&this.add(e),this.setOptions(r)}setOptions(e){e&&e.queue!==void 0&&(e.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=IA.extend(this,{replace:["add","update","remove"]})),e.queue&&typeof e.queue=="object"&&this._queue.setOptions(e.queue)))}add(e,r){const n=[];let i;if(ks(e)){const s=ss(e).call(e,o=>o[this._idProp]);if(J2e(s).call(s,o=>this._data.has(o)))throw new Error("A duplicate id was found in the parameter array.");for(let o=0,a=e.length;o<a;o++)i=this._addItem(e[o]),n.push(i)}else if(e&&typeof e=="object")i=this._addItem(e),n.push(i);else throw new Error("Unknown dataType");return n.length&&this._trigger("add",{items:n},r),n}update(e,r){const n=[],i=[],s=[],o=[],a=this._idProp,l=c=>{const d=c[a];if(d!=null&&this._data.has(d)){const h=c,f=LCe({},this._data.get(d)),p=this._updateItem(h);i.push(p),o.push(h),s.push(f)}else{const h=this._addItem(c);n.push(h)}};if(ks(e))for(let c=0,d=e.length;c<d;c++)e[c]&&typeof e[c]=="object"?l(e[c]):console.warn("Ignoring input item, which is not an object at index "+c);else if(e&&typeof e=="object")l(e);else throw new Error("Unknown dataType");if(n.length&&this._trigger("add",{items:n},r),i.length){const c={items:i,oldData:s,data:o};this._trigger("update",c,r)}return WCe(n).call(n,i)}updateOnly(e,r){var n;ks(e)||(e=[e]);const i=ss(n=ss(e).call(e,s=>{const o=this._data.get(s[this._idProp]);if(o==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:o,update:s}})).call(n,s=>{let{oldData:o,update:a}=s;const l=o[this._idProp],c=s2e(o,a);return this._data.set(l,c),{id:l,oldData:o,updatedData:c}});if(i.length){const s={items:ss(i).call(i,o=>o.id),oldData:ss(i).call(i,o=>o.oldData),data:ss(i).call(i,o=>o.updatedData)};return this._trigger("update",s,r),s.items}else return[]}get(e,r){let n,i,s;sV(e)?(n=e,s=r):ks(e)?(i=e,s=r):s=e;const o=s&&s.returnType==="Object"?"Object":"Array",a=s&&zu(s),l=[];let c,d,h;if(n!=null)c=this._data.get(n),c&&a&&!a(c)&&(c=void 0);else if(i!=null)for(let p=0,m=i.length;p<m;p++)c=this._data.get(i[p]),c!=null&&(!a||a(c))&&l.push(c);else{var f;d=[...xu(f=this._data).call(f)];for(let p=0,m=d.length;p<m;p++)h=d[p],c=this._data.get(h),c!=null&&(!a||a(c))&&l.push(c)}if(s&&s.order&&n==null&&this._sort(l,s.order),s&&s.fields){const p=s.fields;if(n!=null&&c!=null)c=this._filterFields(c,p);else for(let m=0,g=l.length;m<g;m++)l[m]=this._filterFields(l[m],p)}if(o=="Object"){const p={};for(let m=0,g=l.length;m<g;m++){const v=l[m],y=v[this._idProp];p[y]=v}return p}else return n!=null?c??null:l}getIds(e){const r=this._data,n=e&&zu(e),i=e&&e.order,s=[...xu(r).call(r)],o=[];if(n)if(i){const a=[];for(let l=0,c=s.length;l<c;l++){const d=s[l],h=this._data.get(d);h!=null&&n(h)&&a.push(h)}this._sort(a,i);for(let l=0,c=a.length;l<c;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const c=s[a],d=this._data.get(c);d!=null&&n(d)&&o.push(d[this._idProp])}else if(i){const a=[];for(let l=0,c=s.length;l<c;l++){const d=s[l];a.push(r.get(d))}this._sort(a,i);for(let l=0,c=a.length;l<c;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const c=s[a],d=r.get(c);d!=null&&o.push(d[this._idProp])}return o}getDataSet(){return this}forEach(e,r){const n=r&&zu(r),i=this._data,s=[...xu(i).call(i)];if(r&&r.order){const o=this.get(r);for(let a=0,l=o.length;a<l;a++){const c=o[a],d=c[this._idProp];e(c,d)}}else for(let o=0,a=s.length;o<a;o++){const l=s[o],c=this._data.get(l);c!=null&&(!n||n(c))&&e(c,l)}}map(e,r){const n=r&&zu(r),i=[],s=this._data,o=[...xu(s).call(s)];for(let a=0,l=o.length;a<l;a++){const c=o[a],d=this._data.get(c);d!=null&&(!n||n(d))&&i.push(e(d,c))}return r&&r.order&&this._sort(i,r.order),i}_filterFields(e,r){var n;return e&&TNe(n=ks(r)?r:SA(r)).call(n,(i,s)=>(i[s]=e[s],i),{})}_sort(e,r){if(typeof r=="string"){const n=r;UI(e).call(e,(i,s)=>{const o=i[n],a=s[n];return o>a?1:o<a?-1:0})}else if(typeof r=="function")UI(e).call(e,r);else throw new TypeError("Order must be a function or a string")}remove(e,r){const n=[],i=[],s=ks(e)?e:[e];for(let o=0,a=s.length;o<a;o++){const l=this._remove(s[o]);if(l){const c=l[this._idProp];c!=null&&(n.push(c),i.push(l))}}return n.length&&this._trigger("remove",{items:n,oldData:i},r),n}_remove(e){let r;if(sV(e)?r=e:e&&typeof e=="object"&&(r=e[this._idProp]),r!=null&&this._data.has(r)){const n=this._data.get(r)||null;return this._data.delete(r),--this.length,n}return null}clear(e){var r;const n=[...xu(r=this._data).call(r)],i=[];for(let s=0,o=n.length;s<o;s++)i.push(this._data.get(n[s]));return this._data.clear(),this.length=0,this._trigger("remove",{items:n,oldData:i},e),n}max(e){let r=null,n=null;for(const s of J8(i=this._data).call(i)){var i;const o=s[e];typeof o=="number"&&(n==null||o>n)&&(r=s,n=o)}return r||null}min(e){let r=null,n=null;for(const s of J8(i=this._data).call(i)){var i;const o=s[e];typeof o=="number"&&(n==null||o<n)&&(r=s,n=o)}return r||null}distinct(e){const r=this._data,n=[...xu(r).call(r)],i=[];let s=0;for(let o=0,a=n.length;o<a;o++){const l=n[o],d=r.get(l)[e];let h=!1;for(let f=0;f<s;f++)if(i[f]==d){h=!0;break}!h&&d!==void 0&&(i[s]=d,s++)}return i}_addItem(e){const r=aOe(e,this._idProp),n=r[this._idProp];if(this._data.has(n))throw new Error("Cannot add item: item with id "+n+" already exists");return this._data.set(n,r),++this.length,n}_updateItem(e){const r=e[this._idProp];if(r==null)throw new Error("Cannot update item: item has no id (item: "+ake(e)+")");const n=this._data.get(r);if(!n)throw new Error("Cannot update item: no item with id "+r+" found");return this._data.set(r,XV(XV({},n),e)),r}stream(e){if(e){const n=this._data;return new Bl({*[Hu](){for(const i of e){const s=n.get(i);s!=null&&(yield[i,s])}}})}else{var r;return new Bl({[Hu]:_se(r=CTe(this._data)).call(r,this._data)})}}}function lOe(t,e){return typeof e=="object"&&e!==null&&t===e.idProp&&typeof e.add=="function"&&typeof e.clear=="function"&&typeof e.distinct=="function"&&typeof Ic(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof ss(e)=="function"&&typeof e.max=="function"&&typeof e.min=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.remove=="function"&&typeof e.setOptions=="function"&&typeof e.stream=="function"&&typeof e.update=="function"&&typeof e.updateOnly=="function"}function hoe(t,e){return typeof e=="object"&&e!==null&&t===e.idProp&&typeof Ic(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof ss(e)=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.stream=="function"&&lOe(t,e.getDataSet())}/**
 * vis-network
 * https://visjs.github.io/vis-network/
 *
 * A dynamic, browser-based visualization library.
 *
 * @version 10.0.2
 * @date    2025-09-15T17:48:13.838Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var JV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ze(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ZV={},rf,eU;function Ut(){if(eU)return rf;eU=1;var t=function(e){return e&&e.Math===Math&&e};return rf=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof JV=="object"&&JV)||t(typeof rf=="object"&&rf)||function(){return this}()||Function("return this")(),rf}var wN,tU;function nt(){return tU||(tU=1,wN=function(t){try{return!!t()}catch{return!0}}),wN}var SN,rU;function Em(){if(rU)return SN;rU=1;var t=nt();return SN=!t(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),SN}var _N,nU;function ab(){if(nU)return _N;nU=1;var t=Em(),e=Function.prototype,r=e.apply,n=e.call;return _N=typeof Reflect=="object"&&Reflect.apply||(t?n.bind(r):function(){return n.apply(r,arguments)}),_N}var EN,iU;function lt(){if(iU)return EN;iU=1;var t=Em(),e=Function.prototype,r=e.call,n=t&&e.bind.bind(r,r);return EN=t?n:function(i){return function(){return r.apply(i,arguments)}},EN}var NN,sU;function Hs(){if(sU)return NN;sU=1;var t=lt(),e=t({}.toString),r=t("".slice);return NN=function(n){return r(e(n),8,-1)},NN}var CN,oU;function MA(){if(oU)return CN;oU=1;var t=Hs(),e=lt();return CN=function(r){if(t(r)==="Function")return e(r)},CN}var kN,aU;function Yr(){if(aU)return kN;aU=1;var t=typeof document=="object"&&document.all;return kN=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"},kN}var TN={},ON,lU;function vr(){if(lU)return ON;lU=1;var t=nt();return ON=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),ON}var jN,cU;function si(){if(cU)return jN;cU=1;var t=Em(),e=Function.prototype.call;return jN=t?e.bind(e):function(){return e.apply(e,arguments)},jN}var PN={},uU;function lb(){if(uU)return PN;uU=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,r=e&&!t.call({1:2},1);return PN.f=r?function(i){var s=e(this,i);return!!s&&s.enumerable}:t,PN}var IN,dU;function Nm(){return dU||(dU=1,IN=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}),IN}var RN,hU;function cb(){if(hU)return RN;hU=1;var t=lt(),e=nt(),r=Hs(),n=Object,i=t("".split);return RN=e(function(){return!n("z").propertyIsEnumerable(0)})?function(s){return r(s)==="String"?i(s,""):n(s)}:n,RN}var MN,fU;function vh(){return fU||(fU=1,MN=function(t){return t==null}),MN}var AN,pU;function zo(){if(pU)return AN;pU=1;var t=vh(),e=TypeError;return AN=function(r){if(t(r))throw new e("Can't call method on "+r);return r},AN}var $N,mU;function bs(){if(mU)return $N;mU=1;var t=cb(),e=zo();return $N=function(r){return t(e(r))},$N}var DN,gU;function Qr(){if(gU)return DN;gU=1;var t=Yr();return DN=function(e){return typeof e=="object"?e!==null:t(e)},DN}var FN,yU;function Nt(){return yU||(yU=1,FN={}),FN}var qN,vU;function Si(){if(vU)return qN;vU=1;var t=Nt(),e=Ut(),r=Yr(),n=function(i){return r(i)?i:void 0};return qN=function(i,s){return arguments.length<2?n(t[i])||n(e[i]):t[i]&&t[i][s]||e[i]&&e[i][s]},qN}var LN,bU;function Or(){if(bU)return LN;bU=1;var t=lt();return LN=t({}.isPrototypeOf),LN}var BN,xU;function bh(){if(xU)return BN;xU=1;var t=Ut(),e=t.navigator,r=e&&e.userAgent;return BN=r?String(r):"",BN}var zN,wU;function Cm(){if(wU)return zN;wU=1;var t=Ut(),e=bh(),r=t.process,n=t.Deno,i=r&&r.versions||n&&n.version,s=i&&i.v8,o,a;return s&&(o=s.split("."),a=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!a&&e&&(o=e.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=e.match(/Chrome\/(\d+)/),o&&(a=+o[1]))),zN=a,zN}var VN,SU;function xh(){if(SU)return VN;SU=1;var t=Cm(),e=nt(),r=Ut(),n=r.String;return VN=!!Object.getOwnPropertySymbols&&!e(function(){var i=Symbol("symbol detection");return!n(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&t&&t<41}),VN}var UN,_U;function foe(){if(_U)return UN;_U=1;var t=xh();return UN=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol",UN}var HN,EU;function km(){if(EU)return HN;EU=1;var t=Si(),e=Yr(),r=Or(),n=foe(),i=Object;return HN=n?function(s){return typeof s=="symbol"}:function(s){var o=t("Symbol");return e(o)&&r(o.prototype,i(s))},HN}var WN,NU;function wh(){if(NU)return WN;NU=1;var t=String;return WN=function(e){try{return t(e)}catch{return"Object"}},WN}var KN,CU;function Vo(){if(CU)return KN;CU=1;var t=Yr(),e=wh(),r=TypeError;return KN=function(n){if(t(n))return n;throw new r(e(n)+" is not a function")},KN}var GN,kU;function AA(){if(kU)return GN;kU=1;var t=Vo(),e=vh();return GN=function(r,n){var i=r[n];return e(i)?void 0:t(i)},GN}var YN,TU;function cOe(){if(TU)return YN;TU=1;var t=si(),e=Yr(),r=Qr(),n=TypeError;return YN=function(i,s){var o,a;if(s==="string"&&e(o=i.toString)&&!r(a=t(o,i))||e(o=i.valueOf)&&!r(a=t(o,i))||s!=="string"&&e(o=i.toString)&&!r(a=t(o,i)))return a;throw new n("Can't convert object to primitive value")},YN}var QN={exports:{}},XN,OU;function Sh(){return OU||(OU=1,XN=!0),XN}var JN,jU;function uOe(){if(jU)return JN;jU=1;var t=Ut(),e=Object.defineProperty;return JN=function(r,n){try{e(t,r,{value:n,configurable:!0,writable:!0})}catch{t[r]=n}return n},JN}var PU;function $A(){if(PU)return QN.exports;PU=1;var t=Sh(),e=Ut(),r=uOe(),n="__core-js_shared__",i=QN.exports=e[n]||r(n,{});return(i.versions||(i.versions=[])).push({version:"3.44.0",mode:t?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),QN.exports}var ZN,IU;function _h(){if(IU)return ZN;IU=1;var t=$A();return ZN=function(e,r){return t[e]||(t[e]=r||{})},ZN}var eC,RU;function _i(){if(RU)return eC;RU=1;var t=zo(),e=Object;return eC=function(r){return e(t(r))},eC}var tC,MU;function an(){if(MU)return tC;MU=1;var t=lt(),e=_i(),r=t({}.hasOwnProperty);return tC=Object.hasOwn||function(i,s){return r(e(i),s)},tC}var rC,AU;function ub(){if(AU)return rC;AU=1;var t=lt(),e=0,r=Math.random(),n=t(1.1.toString);return rC=function(i){return"Symbol("+(i===void 0?"":i)+")_"+n(++e+r,36)},rC}var nC,$U;function jr(){if($U)return nC;$U=1;var t=Ut(),e=_h(),r=an(),n=ub(),i=xh(),s=foe(),o=t.Symbol,a=e("wks"),l=s?o.for||o:o&&o.withoutSetter||n;return nC=function(c){return r(a,c)||(a[c]=i&&r(o,c)?o[c]:l("Symbol."+c)),a[c]},nC}var iC,DU;function poe(){if(DU)return iC;DU=1;var t=si(),e=Qr(),r=km(),n=AA(),i=cOe(),s=jr(),o=TypeError,a=s("toPrimitive");return iC=function(l,c){if(!e(l)||r(l))return l;var d=n(l,a),h;if(d){if(c===void 0&&(c="default"),h=t(d,l,c),!e(h)||r(h))return h;throw new o("Can't convert object to primitive value")}return c===void 0&&(c="number"),i(l,c)},iC}var sC,FU;function DA(){if(FU)return sC;FU=1;var t=poe(),e=km();return sC=function(r){var n=t(r,"string");return e(n)?n:n+""},sC}var oC,qU;function moe(){if(qU)return oC;qU=1;var t=Ut(),e=Qr(),r=t.document,n=e(r)&&e(r.createElement);return oC=function(i){return n?r.createElement(i):{}},oC}var aC,LU;function goe(){if(LU)return aC;LU=1;var t=vr(),e=nt(),r=moe();return aC=!t&&!e(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7}),aC}var BU;function db(){if(BU)return TN;BU=1;var t=vr(),e=si(),r=lb(),n=Nm(),i=bs(),s=DA(),o=an(),a=goe(),l=Object.getOwnPropertyDescriptor;return TN.f=t?l:function(d,h){if(d=i(d),h=s(h),a)try{return l(d,h)}catch{}if(o(d,h))return n(!e(r.f,d,h),d[h])},TN}var lC,zU;function dOe(){if(zU)return lC;zU=1;var t=nt(),e=Yr(),r=/#|\.prototype\./,n=function(l,c){var d=s[i(l)];return d===a?!0:d===o?!1:e(c)?t(c):!!c},i=n.normalize=function(l){return String(l).replace(r,".").toLowerCase()},s=n.data={},o=n.NATIVE="N",a=n.POLYFILL="P";return lC=n,lC}var cC,VU;function hb(){if(VU)return cC;VU=1;var t=MA(),e=Vo(),r=Em(),n=t(t.bind);return cC=function(i,s){return e(i),s===void 0?i:r?n(i,s):function(){return i.apply(s,arguments)}},cC}var uC={},dC,UU;function yoe(){if(UU)return dC;UU=1;var t=vr(),e=nt();return dC=t&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),dC}var hC,HU;function Ws(){if(HU)return hC;HU=1;var t=Qr(),e=String,r=TypeError;return hC=function(n){if(t(n))return n;throw new r(e(n)+" is not an object")},hC}var WU;function Gi(){if(WU)return uC;WU=1;var t=vr(),e=goe(),r=yoe(),n=Ws(),i=DA(),s=TypeError,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l="enumerable",c="configurable",d="writable";return uC.f=t?r?function(f,p,m){if(n(f),p=i(p),n(m),typeof f=="function"&&p==="prototype"&&"value"in m&&d in m&&!m[d]){var g=a(f,p);g&&g[d]&&(f[p]=m.value,m={configurable:c in m?m[c]:g[c],enumerable:l in m?m[l]:g[l],writable:!1})}return o(f,p,m)}:o:function(f,p,m){if(n(f),p=i(p),n(m),e)try{return o(f,p,m)}catch{}if("get"in m||"set"in m)throw new s("Accessors not supported");return"value"in m&&(f[p]=m.value),f},uC}var fC,KU;function Eh(){if(KU)return fC;KU=1;var t=vr(),e=Gi(),r=Nm();return fC=t?function(n,i,s){return e.f(n,i,r(1,s))}:function(n,i,s){return n[i]=s,n},fC}var pC,GU;function Ie(){if(GU)return pC;GU=1;var t=Ut(),e=ab(),r=MA(),n=Yr(),i=db().f,s=dOe(),o=Nt(),a=hb(),l=Eh(),c=an(),d=function(h){var f=function(p,m,g){if(this instanceof f){switch(arguments.length){case 0:return new h;case 1:return new h(p);case 2:return new h(p,m)}return new h(p,m,g)}return e(h,this,arguments)};return f.prototype=h.prototype,f};return pC=function(h,f){var p=h.target,m=h.global,g=h.stat,v=h.proto,y=m?t:g?t[p]:t[p]&&t[p].prototype,b=m?o:o[p]||l(o,p,{})[p],w=b.prototype,x,S,_,E,N,k,C,O,P;for(E in f)x=s(m?E:p+(g?".":"#")+E,h.forced),S=!x&&y&&c(y,E),k=b[E],S&&(h.dontCallGetSet?(P=i(y,E),C=P&&P.value):C=y[E]),N=S&&C?C:f[E],!(!x&&!v&&typeof k==typeof N)&&(h.bind&&S?O=a(N,t):h.wrap&&S?O=d(N):v&&n(N)?O=r(N):O=N,(h.sham||N&&N.sham||k&&k.sham)&&l(O,"sham",!0),l(b,E,O),v&&(_=p+"Prototype",c(o,_)||l(o,_,{}),l(o[_],E,N),h.real&&w&&(x||!w[E])&&l(w,E,N)))},pC}var mC,YU;function hOe(){if(YU)return mC;YU=1;var t=Math.ceil,e=Math.floor;return mC=Math.trunc||function(n){var i=+n;return(i>0?e:t)(i)},mC}var gC,QU;function Nh(){if(QU)return gC;QU=1;var t=hOe();return gC=function(e){var r=+e;return r!==r||r===0?0:t(r)},gC}var yC,XU;function fb(){if(XU)return yC;XU=1;var t=Nh(),e=Math.max,r=Math.min;return yC=function(n,i){var s=t(n);return s<0?e(s+i,0):r(s,i)},yC}var vC,JU;function voe(){if(JU)return vC;JU=1;var t=Nh(),e=Math.min;return vC=function(r){var n=t(r);return n>0?e(n,9007199254740991):0},vC}var bC,ZU;function Uo(){if(ZU)return bC;ZU=1;var t=voe();return bC=function(e){return t(e.length)},bC}var xC,eH;function FA(){if(eH)return xC;eH=1;var t=bs(),e=fb(),r=Uo(),n=function(i){return function(s,o,a){var l=t(s),c=r(l);if(c===0)return!i&&-1;var d=e(a,c),h;if(i&&o!==o){for(;c>d;)if(h=l[d++],h!==h)return!0}else for(;c>d;d++)if((i||d in l)&&l[d]===o)return i||d||0;return!i&&-1}};return xC={includes:n(!0),indexOf:n(!1)},xC}var wC,tH;function Tm(){return tH||(tH=1,wC={}),wC}var SC,rH;function boe(){if(rH)return SC;rH=1;var t=lt(),e=an(),r=bs(),n=FA().indexOf,i=Tm(),s=t([].push);return SC=function(o,a){var l=r(o),c=0,d=[],h;for(h in l)!e(i,h)&&e(l,h)&&s(d,h);for(;a.length>c;)e(l,h=a[c++])&&(~n(d,h)||s(d,h));return d},SC}var _C,nH;function qA(){return nH||(nH=1,_C=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),_C}var EC,iH;function Om(){if(iH)return EC;iH=1;var t=boe(),e=qA();return EC=Object.keys||function(n){return t(n,e)},EC}var NC={},sH;function pb(){return sH||(sH=1,NC.f=Object.getOwnPropertySymbols),NC}var CC,oH;function fOe(){if(oH)return CC;oH=1;var t=vr(),e=lt(),r=si(),n=nt(),i=Om(),s=pb(),o=lb(),a=_i(),l=cb(),c=Object.assign,d=Object.defineProperty,h=e([].concat);return CC=!c||n(function(){if(t&&c({b:1},c(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},p={},m=Symbol("assign detection"),g="abcdefghijklmnopqrst";return f[m]=7,g.split("").forEach(function(v){p[v]=v}),c({},f)[m]!==7||i(c({},p)).join("")!==g})?function(p,m){for(var g=a(p),v=arguments.length,y=1,b=s.f,w=o.f;v>y;)for(var x=l(arguments[y++]),S=b?h(i(x),b(x)):i(x),_=S.length,E=0,N;_>E;)N=S[E++],(!t||r(w,x,N))&&(g[N]=x[N]);return g}:c,CC}var aH;function pOe(){if(aH)return ZV;aH=1;var t=Ie(),e=fOe();return t({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),ZV}var kC,lH;function mOe(){if(lH)return kC;lH=1,pOe();var t=Nt();return kC=t.Object.assign,kC}var TC,cH;function gOe(){if(cH)return TC;cH=1;var t=mOe();return TC=t,TC}var OC,uH;function yOe(){return uH||(uH=1,OC=gOe()),OC}var vOe=yOe(),_r=ze(vOe),dH={},jC,hH;function Ch(){if(hH)return jC;hH=1;var t=lt();return jC=t([].slice),jC}var PC,fH;function bOe(){if(fH)return PC;fH=1;var t=lt(),e=Vo(),r=Qr(),n=an(),i=Ch(),s=Em(),o=Function,a=t([].concat),l=t([].join),c={},d=function(h,f,p){if(!n(c,f)){for(var m=[],g=0;g<f;g++)m[g]="a["+g+"]";c[f]=o("C,a","return new C("+l(m,",")+")")}return c[f](h,p)};return PC=s?o.bind:function(f){var p=e(this),m=p.prototype,g=i(arguments,1),v=function(){var b=a(g,i(arguments));return this instanceof v?d(p,b.length,b):p.apply(f,b)};return r(m)&&(v.prototype=m),v},PC}var pH;function xOe(){if(pH)return dH;pH=1;var t=Ie(),e=bOe();return t({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),dH}var IC,mH;function ln(){if(mH)return IC;mH=1;var t=Ut(),e=Nt();return IC=function(r,n){var i=e[r+"Prototype"],s=i&&i[n];if(s)return s;var o=t[r],a=o&&o.prototype;return a&&a[n]},IC}var RC,gH;function wOe(){if(gH)return RC;gH=1,xOe();var t=ln();return RC=t("Function","bind"),RC}var MC,yH;function SOe(){if(yH)return MC;yH=1;var t=Or(),e=wOe(),r=Function.prototype;return MC=function(n){var i=n.bind;return n===r||t(r,n)&&i===r.bind?e:i},MC}var AC,vH;function _Oe(){if(vH)return AC;vH=1;var t=SOe();return AC=t,AC}var $C,bH;function EOe(){return bH||(bH=1,$C=_Oe()),$C}var NOe=EOe(),ne=ze(NOe);function LA(t,e,r,n){t.beginPath(),t.arc(e,r,n,0,2*Math.PI,!1),t.closePath()}function COe(t,e,r,n){t.beginPath(),t.rect(e-n,r-n,n*2,n*2),t.closePath()}function kOe(t,e,r,n){t.beginPath(),n*=1.15,r+=.275*n;const i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);t.moveTo(e,r-(a-o)),t.lineTo(e+s,r+o),t.lineTo(e-s,r+o),t.lineTo(e,r-(a-o)),t.closePath()}function TOe(t,e,r,n){t.beginPath(),n*=1.15,r-=.275*n;const i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);t.moveTo(e,r+(a-o)),t.lineTo(e+s,r-o),t.lineTo(e-s,r-o),t.lineTo(e,r+(a-o)),t.closePath()}function OOe(t,e,r,n){t.beginPath(),n*=.82,r+=.1*n;for(let i=0;i<10;i++){const s=i%2===0?n*1.3:n*.5;t.lineTo(e+s*Math.sin(i*2*Math.PI/10),r-s*Math.cos(i*2*Math.PI/10))}t.closePath()}function jOe(t,e,r,n){t.beginPath(),t.lineTo(e,r+n),t.lineTo(e+n,r),t.lineTo(e,r-n),t.lineTo(e-n,r),t.closePath()}function xoe(t,e,r,n,i,s){const o=Math.PI/180;n-2*s<0&&(s=n/2),i-2*s<0&&(s=i/2),t.beginPath(),t.moveTo(e+s,r),t.lineTo(e+n-s,r),t.arc(e+n-s,r+s,s,o*270,o*360,!1),t.lineTo(e+n,r+i-s),t.arc(e+n-s,r+i-s,s,0,o*90,!1),t.lineTo(e+s,r+i),t.arc(e+s,r+i-s,s,o*90,o*180,!1),t.lineTo(e,r+s),t.arc(e+s,r+s,s,o*180,o*270,!1),t.closePath()}function HI(t,e,r,n,i){const s=.5522848,o=n/2*s,a=i/2*s,l=e+n,c=r+i,d=e+n/2,h=r+i/2;t.beginPath(),t.moveTo(e,h),t.bezierCurveTo(e,h-a,d-o,r,d,r),t.bezierCurveTo(d+o,r,l,h-a,l,h),t.bezierCurveTo(l,h+a,d+o,c,d,c),t.bezierCurveTo(d-o,c,e,h+a,e,h),t.closePath()}function woe(t,e,r,n,i){const s=.3333333333333333,o=n,a=i*s,l=.5522848,c=o/2*l,d=a/2*l,h=e+o,f=r+a,p=e+o/2,m=r+a/2,g=r+(i-a/2),v=r+i;t.beginPath(),t.moveTo(h,m),t.bezierCurveTo(h,m+d,p+c,f,p,f),t.bezierCurveTo(p-c,f,e,m+d,e,m),t.bezierCurveTo(e,m-d,p-c,r,p,r),t.bezierCurveTo(p+c,r,h,m-d,h,m),t.lineTo(h,g),t.bezierCurveTo(h,g+d,p+c,v,p,v),t.bezierCurveTo(p-c,v,e,g+d,e,g),t.lineTo(e,m)}function Soe(t,e,r,n,i,s){t.beginPath(),t.moveTo(e,r);const o=s.length,a=n-e,l=i-r,c=l/a;let d=Math.sqrt(a*a+l*l),h=0,f=!0,p=0,m=+s[0];for(;d>=.1;)m=+s[h++%o],m>d&&(m=d),p=Math.sqrt(m*m/(1+c*c)),p=a<0?-p:p,e+=p,r+=c*p,f===!0?t.lineTo(e,r):t.moveTo(e,r),d-=m,f=!f}function POe(t,e,r,n){t.beginPath();const i=6,s=Math.PI*2/i;t.moveTo(e+n,r);for(let o=1;o<i;o++)t.lineTo(e+n*Math.cos(s*o),r+n*Math.sin(s*o));t.closePath()}const xH={circle:LA,dashedLine:Soe,database:woe,diamond:jOe,ellipse:HI,ellipse_vis:HI,hexagon:POe,roundRect:xoe,square:COe,star:OOe,triangle:kOe,triangleDown:TOe};function IOe(t){return Object.prototype.hasOwnProperty.call(xH,t)?xH[t]:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];CanvasRenderingContext2D.prototype[t].call(e,n)}}var DC={exports:{}},wH;function ROe(){return wH||(wH=1,function(t){t.exports=e;function e(n){if(n)return r(n)}function r(n){for(var i in e.prototype)n[i]=e.prototype[i];return n}e.prototype.on=e.prototype.addEventListener=function(n,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(i),this},e.prototype.once=function(n,i){function s(){this.off(n,s),i.apply(this,arguments)}return s.fn=i,this.on(n,s),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(n,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+n];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var o,a=0;a<s.length;a++)if(o=s[a],o===i||o.fn===i){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+n],this},e.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),s=this._callbacks["$"+n],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(s){s=s.slice(0);for(var o=0,a=s.length;o<a;++o)s[o].apply(this,i)}return this},e.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},e.prototype.hasListeners=function(n){return!!this.listeners(n).length}}(DC)),DC.exports}var MOe=ROe(),_oe=ze(MOe),SH={},FC,_H;function nu(){if(_H)return FC;_H=1;var t=Hs();return FC=Array.isArray||function(r){return t(r)==="Array"},FC}var qC,EH;function Eoe(){if(EH)return qC;EH=1;var t=TypeError,e=9007199254740991;return qC=function(r){if(r>e)throw t("Maximum allowed index exceeded");return r},qC}var LC,NH;function mb(){if(NH)return LC;NH=1;var t=vr(),e=Gi(),r=Nm();return LC=function(n,i,s){t?e.f(n,i,r(0,s)):n[i]=s},LC}var BC,CH;function BA(){if(CH)return BC;CH=1;var t=jr(),e=t("toStringTag"),r={};return r[e]="z",BC=String(r)==="[object z]",BC}var zC,kH;function kh(){if(kH)return zC;kH=1;var t=BA(),e=Yr(),r=Hs(),n=jr(),i=n("toStringTag"),s=Object,o=r(function(){return arguments}())==="Arguments",a=function(l,c){try{return l[c]}catch{}};return zC=t?r:function(l){var c,d,h;return l===void 0?"Undefined":l===null?"Null":typeof(d=a(c=s(l),i))=="string"?d:o?r(c):(h=r(c))==="Object"&&e(c.callee)?"Arguments":h},zC}var VC,TH;function AOe(){if(TH)return VC;TH=1;var t=lt(),e=Yr(),r=$A(),n=t(Function.toString);return e(r.inspectSource)||(r.inspectSource=function(i){return n(i)}),VC=r.inspectSource,VC}var UC,OH;function Noe(){if(OH)return UC;OH=1;var t=lt(),e=nt(),r=Yr(),n=kh(),i=Si(),s=AOe(),o=function(){},a=i("Reflect","construct"),l=/^\s*(?:class|function)\b/,c=t(l.exec),d=!l.test(o),h=function(m){if(!r(m))return!1;try{return a(o,[],m),!0}catch{return!1}},f=function(m){if(!r(m))return!1;switch(n(m)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!c(l,s(m))}catch{return!0}};return f.sham=!0,UC=!a||e(function(){var p;return h(h.call)||!h(Object)||!h(function(){p=!0})||p})?f:h,UC}var HC,jH;function $Oe(){if(jH)return HC;jH=1;var t=nu(),e=Noe(),r=Qr(),n=jr(),i=n("species"),s=Array;return HC=function(o){var a;return t(o)&&(a=o.constructor,e(a)&&(a===s||t(a.prototype))?a=void 0:r(a)&&(a=a[i],a===null&&(a=void 0))),a===void 0?s:a},HC}var WC,PH;function zA(){if(PH)return WC;PH=1;var t=$Oe();return WC=function(e,r){return new(t(e))(r===0?0:r)},WC}var KC,IH;function jm(){if(IH)return KC;IH=1;var t=nt(),e=jr(),r=Cm(),n=e("species");return KC=function(i){return r>=51||!t(function(){var s=[],o=s.constructor={};return o[n]=function(){return{foo:1}},s[i](Boolean).foo!==1})},KC}var RH;function Coe(){if(RH)return SH;RH=1;var t=Ie(),e=nt(),r=nu(),n=Qr(),i=_i(),s=Uo(),o=Eoe(),a=mb(),l=zA(),c=jm(),d=jr(),h=Cm(),f=d("isConcatSpreadable"),p=h>=51||!e(function(){var v=[];return v[f]=!1,v.concat()[0]!==v}),m=function(v){if(!n(v))return!1;var y=v[f];return y!==void 0?!!y:r(v)},g=!p||!c("concat");return t({target:"Array",proto:!0,arity:1,forced:g},{concat:function(y){var b=i(this),w=l(b,0),x=0,S,_,E,N,k;for(S=-1,E=arguments.length;S<E;S++)if(k=S===-1?b:arguments[S],m(k))for(N=s(k),o(x+N),_=0;_<N;_++,x++)_ in k&&a(w,x,k[_]);else o(x+1),a(w,x++,k);return w.length=x,w}}),SH}var MH={},AH={},GC,$H;function Yi(){if($H)return GC;$H=1;var t=kh(),e=String;return GC=function(r){if(t(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(r)},GC}var YC={},DH;function VA(){if(DH)return YC;DH=1;var t=vr(),e=yoe(),r=Gi(),n=Ws(),i=bs(),s=Om();return YC.f=t&&!e?Object.defineProperties:function(a,l){n(a);for(var c=i(l),d=s(l),h=d.length,f=0,p;h>f;)r.f(a,p=d[f++],c[p]);return a},YC}var QC,FH;function DOe(){if(FH)return QC;FH=1;var t=Si();return QC=t("document","documentElement"),QC}var XC,qH;function gb(){if(qH)return XC;qH=1;var t=_h(),e=ub(),r=t("keys");return XC=function(n){return r[n]||(r[n]=e(n))},XC}var JC,LH;function Pm(){if(LH)return JC;LH=1;var t=Ws(),e=VA(),r=qA(),n=Tm(),i=DOe(),s=moe(),o=gb(),a=">",l="<",c="prototype",d="script",h=o("IE_PROTO"),f=function(){},p=function(b){return l+d+a+b+l+"/"+d+a},m=function(b){b.write(p("")),b.close();var w=b.parentWindow.Object;return b=null,w},g=function(){var b=s("iframe"),w="java"+d+":",x;return b.style.display="none",i.appendChild(b),b.src=String(w),x=b.contentWindow.document,x.open(),x.write(p("document.F=Object")),x.close(),x.F},v,y=function(){try{v=new ActiveXObject("htmlfile")}catch{}y=typeof document<"u"?document.domain&&v?m(v):g():m(v);for(var b=r.length;b--;)delete y[c][r[b]];return y()};return n[h]=!0,JC=Object.create||function(w,x){var S;return w!==null?(f[c]=t(w),S=new f,f[c]=null,S[h]=w):S=y(),x===void 0?S:e.f(S,x)},JC}var ZC={},BH;function yb(){if(BH)return ZC;BH=1;var t=boe(),e=qA(),r=e.concat("length","prototype");return ZC.f=Object.getOwnPropertyNames||function(i){return t(i,r)},ZC}var ek={},zH;function UA(){if(zH)return ek;zH=1;var t=Hs(),e=bs(),r=yb().f,n=Ch(),i=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(o){try{return r(o)}catch{return n(i)}};return ek.f=function(a){return i&&t(a)==="Window"?s(a):r(e(a))},ek}var tk,VH;function Im(){if(VH)return tk;VH=1;var t=Eh();return tk=function(e,r,n,i){return i&&i.enumerable?e[r]=n:t(e,r,n),e},tk}var rk,UH;function HA(){if(UH)return rk;UH=1;var t=Gi();return rk=function(e,r,n){return t.f(e,r,n)},rk}var nk={},HH;function vb(){if(HH)return nk;HH=1;var t=jr();return nk.f=t,nk}var ik,WH;function Zt(){if(WH)return ik;WH=1;var t=Nt(),e=an(),r=vb(),n=Gi().f;return ik=function(i){var s=t.Symbol||(t.Symbol={});e(s,i)||n(s,i,{value:r.f(i)})},ik}var sk,KH;function koe(){if(KH)return sk;KH=1;var t=si(),e=Si(),r=jr(),n=Im();return sk=function(){var i=e("Symbol"),s=i&&i.prototype,o=s&&s.valueOf,a=r("toPrimitive");s&&!s[a]&&n(s,a,function(l){return t(o,this)},{arity:1})},sk}var ok,GH;function FOe(){if(GH)return ok;GH=1;var t=BA(),e=kh();return ok=t?{}.toString:function(){return"[object "+e(this)+"]"},ok}var ak,YH;function iu(){if(YH)return ak;YH=1;var t=BA(),e=Gi().f,r=Eh(),n=an(),i=FOe(),s=jr(),o=s("toStringTag");return ak=function(a,l,c,d){var h=c?a:a&&a.prototype;h&&(n(h,o)||e(h,o,{configurable:!0,value:l}),d&&!t&&r(h,"toString",i))},ak}var lk,QH;function Toe(){if(QH)return lk;QH=1;var t=Ut(),e=Yr(),r=t.WeakMap;return lk=e(r)&&/native code/.test(String(r)),lk}var ck,XH;function su(){if(XH)return ck;XH=1;var t=Toe(),e=Ut(),r=Qr(),n=Eh(),i=an(),s=$A(),o=gb(),a=Tm(),l="Object already initialized",c=e.TypeError,d=e.WeakMap,h,f,p,m=function(b){return p(b)?f(b):h(b,{})},g=function(b){return function(w){var x;if(!r(w)||(x=f(w)).type!==b)throw new c("Incompatible receiver, "+b+" required");return x}};if(t||s.state){var v=s.state||(s.state=new d);v.get=v.get,v.has=v.has,v.set=v.set,h=function(b,w){if(v.has(b))throw new c(l);return w.facade=b,v.set(b,w),w},f=function(b){return v.get(b)||{}},p=function(b){return v.has(b)}}else{var y=o("state");a[y]=!0,h=function(b,w){if(i(b,y))throw new c(l);return w.facade=b,n(b,y,w),w},f=function(b){return i(b,y)?b[y]:{}},p=function(b){return i(b,y)}}return ck={set:h,get:f,has:p,enforce:m,getterFor:g},ck}var uk,JH;function vl(){if(JH)return uk;JH=1;var t=hb(),e=lt(),r=cb(),n=_i(),i=Uo(),s=zA(),o=e([].push),a=function(l){var c=l===1,d=l===2,h=l===3,f=l===4,p=l===6,m=l===7,g=l===5||p;return function(v,y,b,w){for(var x=n(v),S=r(x),_=i(S),E=t(y,b),N=0,k=w||s,C=c?k(v,_):d||m?k(v,0):void 0,O,P;_>N;N++)if((g||N in S)&&(O=S[N],P=E(O,N,x),l))if(c)C[N]=P;else if(P)switch(l){case 3:return!0;case 5:return O;case 6:return N;case 2:o(C,O)}else switch(l){case 4:return!1;case 7:o(C,O)}return p?-1:h||f?f:C}};return uk={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterReject:a(7)},uk}var ZH;function qOe(){if(ZH)return AH;ZH=1;var t=Ie(),e=Ut(),r=si(),n=lt(),i=Sh(),s=vr(),o=xh(),a=nt(),l=an(),c=Or(),d=Ws(),h=bs(),f=DA(),p=Yi(),m=Nm(),g=Pm(),v=Om(),y=yb(),b=UA(),w=pb(),x=db(),S=Gi(),_=VA(),E=lb(),N=Im(),k=HA(),C=_h(),O=gb(),P=Tm(),j=ub(),A=jr(),D=vb(),I=Zt(),L=koe(),F=iu(),W=su(),V=vl().forEach,H=O("hidden"),K="Symbol",de="prototype",be=W.set,Fe=W.getterFor(K),pe=Object[de],Oe=e.Symbol,$e=Oe&&Oe[de],ut=e.RangeError,it=e.TypeError,gt=e.QObject,J=x.f,Ee=S.f,Ge=b.f,st=E.f,er=n([].push),Ce=C("symbols"),Je=C("op-symbols"),Bt=C("wks"),dt=!gt||!gt[de]||!gt[de].findChild,M=function(Ne,se,fe){var he=J(pe,se);he&&delete pe[se],Ee(Ne,se,fe),he&&Ne!==pe&&Ee(pe,se,he)},q=s&&a(function(){return g(Ee({},"a",{get:function(){return Ee(this,"a",{value:7}).a}})).a!==7})?M:Ee,B=function(Ne,se){var fe=Ce[Ne]=g($e);return be(fe,{type:K,tag:Ne,description:se}),s||(fe.description=se),fe},ie=function(se,fe,he){se===pe&&ie(Je,fe,he),d(se);var ke=f(fe);return d(he),l(Ce,ke)?(he.enumerable?(l(se,H)&&se[H][ke]&&(se[H][ke]=!1),he=g(he,{enumerable:m(0,!1)})):(l(se,H)||Ee(se,H,m(1,g(null))),se[H][ke]=!0),q(se,ke,he)):Ee(se,ke,he)},Z=function(se,fe){d(se);var he=h(fe),ke=v(he).concat(tr(he));return V(ke,function(ot){(!s||r(ve,he,ot))&&ie(se,ot,he[ot])}),se},X=function(se,fe){return fe===void 0?g(se):Z(g(se),fe)},ve=function(se){var fe=f(se),he=r(st,this,fe);return this===pe&&l(Ce,fe)&&!l(Je,fe)?!1:he||!l(this,fe)||!l(Ce,fe)||l(this,H)&&this[H][fe]?he:!0},Ye=function(se,fe){var he=h(se),ke=f(fe);if(!(he===pe&&l(Ce,ke)&&!l(Je,ke))){var ot=J(he,ke);return ot&&l(Ce,ke)&&!(l(he,H)&&he[H][ke])&&(ot.enumerable=!0),ot}},Ze=function(se){var fe=Ge(h(se)),he=[];return V(fe,function(ke){!l(Ce,ke)&&!l(P,ke)&&er(he,ke)}),he},tr=function(Ne){var se=Ne===pe,fe=Ge(se?Je:h(Ne)),he=[];return V(fe,function(ke){l(Ce,ke)&&(!se||l(pe,ke))&&er(he,Ce[ke])}),he};return o||(Oe=function(){if(c($e,this))throw new it("Symbol is not a constructor");var se=!arguments.length||arguments[0]===void 0?void 0:p(arguments[0]),fe=j(se),he=function(ke){var ot=this===void 0?e:this;ot===pe&&r(he,Je,ke),l(ot,H)&&l(ot[H],fe)&&(ot[H][fe]=!1);var oi=m(1,ke);try{q(ot,fe,oi)}catch(Xi){if(!(Xi instanceof ut))throw Xi;M(ot,fe,oi)}};return s&&dt&&q(pe,fe,{configurable:!0,set:he}),B(fe,se)},$e=Oe[de],N($e,"toString",function(){return Fe(this).tag}),N(Oe,"withoutSetter",function(Ne){return B(j(Ne),Ne)}),E.f=ve,S.f=ie,_.f=Z,x.f=Ye,y.f=b.f=Ze,w.f=tr,D.f=function(Ne){return B(A(Ne),Ne)},s&&(k($e,"description",{configurable:!0,get:function(){return Fe(this).description}}),i||N(pe,"propertyIsEnumerable",ve,{unsafe:!0}))),t({global:!0,constructor:!0,wrap:!0,forced:!o,sham:!o},{Symbol:Oe}),V(v(Bt),function(Ne){I(Ne)}),t({target:K,stat:!0,forced:!o},{useSetter:function(){dt=!0},useSimple:function(){dt=!1}}),t({target:"Object",stat:!0,forced:!o,sham:!s},{create:X,defineProperty:ie,defineProperties:Z,getOwnPropertyDescriptor:Ye}),t({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:Ze}),L(),F(Oe,K),P[H]=!0,AH}var e7={},dk,t7;function Ooe(){if(t7)return dk;t7=1;var t=xh();return dk=t&&!!Symbol.for&&!!Symbol.keyFor,dk}var r7;function LOe(){if(r7)return e7;r7=1;var t=Ie(),e=Si(),r=an(),n=Yi(),i=_h(),s=Ooe(),o=i("string-to-symbol-registry"),a=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{for:function(l){var c=n(l);if(r(o,c))return o[c];var d=e("Symbol")(c);return o[c]=d,a[d]=c,d}}),e7}var n7={},i7;function BOe(){if(i7)return n7;i7=1;var t=Ie(),e=an(),r=km(),n=wh(),i=_h(),s=Ooe(),o=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{keyFor:function(l){if(!r(l))throw new TypeError(n(l)+" is not a symbol");if(e(o,l))return o[l]}}),n7}var s7={},hk,o7;function zOe(){if(o7)return hk;o7=1;var t=lt(),e=nu(),r=Yr(),n=Hs(),i=Yi(),s=t([].push);return hk=function(o){if(r(o))return o;if(e(o)){for(var a=o.length,l=[],c=0;c<a;c++){var d=o[c];typeof d=="string"?s(l,d):(typeof d=="number"||n(d)==="Number"||n(d)==="String")&&s(l,i(d))}var h=l.length,f=!0;return function(p,m){if(f)return f=!1,m;if(e(this))return m;for(var g=0;g<h;g++)if(l[g]===p)return m}}},hk}var a7;function joe(){if(a7)return s7;a7=1;var t=Ie(),e=Si(),r=ab(),n=si(),i=lt(),s=nt(),o=Yr(),a=km(),l=Ch(),c=zOe(),d=xh(),h=String,f=e("JSON","stringify"),p=i(/./.exec),m=i("".charAt),g=i("".charCodeAt),v=i("".replace),y=i(1.1.toString),b=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,x=/^[\uDC00-\uDFFF]$/,S=!d||s(function(){var k=e("Symbol")("stringify detection");return f([k])!=="[null]"||f({a:k})!=="{}"||f(Object(k))!=="{}"}),_=s(function(){return f("\uDF06\uD834")!=='"\\udf06\\ud834"'||f("\uDEAD")!=='"\\udead"'}),E=function(k,C){var O=l(arguments),P=c(C);if(!(!o(P)&&(k===void 0||a(k))))return O[1]=function(j,A){if(o(P)&&(A=n(P,this,h(j),A)),!a(A))return A},r(f,null,O)},N=function(k,C,O){var P=m(O,C-1),j=m(O,C+1);return p(w,k)&&!p(x,j)||p(x,k)&&!p(w,P)?"\\u"+y(g(k,0),16):k};return f&&t({target:"JSON",stat:!0,arity:3,forced:S||_},{stringify:function(C,O,P){var j=l(arguments),A=r(S?E:f,null,j);return _&&typeof A=="string"?v(A,b,N):A}}),s7}var l7={},c7;function VOe(){if(c7)return l7;c7=1;var t=Ie(),e=xh(),r=nt(),n=pb(),i=_i(),s=!e||r(function(){n.f(1)});return t({target:"Object",stat:!0,forced:s},{getOwnPropertySymbols:function(a){var l=n.f;return l?l(i(a)):[]}}),l7}var u7;function Poe(){return u7||(u7=1,qOe(),LOe(),BOe(),joe(),VOe()),MH}var d7={},h7;function Ioe(){if(h7)return d7;h7=1;var t=Zt();return t("asyncDispose"),d7}var f7={},p7;function UOe(){if(p7)return f7;p7=1;var t=Zt();return t("asyncIterator"),f7}var m7={},g7;function Roe(){if(g7)return m7;g7=1;var t=Zt();return t("dispose"),m7}var y7={},v7;function HOe(){if(v7)return y7;v7=1;var t=Zt();return t("hasInstance"),y7}var b7={},x7;function WOe(){if(x7)return b7;x7=1;var t=Zt();return t("isConcatSpreadable"),b7}var w7={},S7;function Moe(){if(S7)return w7;S7=1;var t=Zt();return t("iterator"),w7}var _7={},E7;function KOe(){if(E7)return _7;E7=1;var t=Zt();return t("match"),_7}var N7={},C7;function GOe(){if(C7)return N7;C7=1;var t=Zt();return t("matchAll"),N7}var k7={},T7;function YOe(){if(T7)return k7;T7=1;var t=Zt();return t("replace"),k7}var O7={},j7;function QOe(){if(j7)return O7;j7=1;var t=Zt();return t("search"),O7}var P7={},I7;function XOe(){if(I7)return P7;I7=1;var t=Zt();return t("species"),P7}var R7={},M7;function JOe(){if(M7)return R7;M7=1;var t=Zt();return t("split"),R7}var A7={},$7;function Aoe(){if($7)return A7;$7=1;var t=Zt(),e=koe();return t("toPrimitive"),e(),A7}var D7={},F7;function ZOe(){if(F7)return D7;F7=1;var t=Si(),e=Zt(),r=iu();return e("toStringTag"),r(t("Symbol"),"Symbol"),D7}var q7={},L7;function eje(){if(L7)return q7;L7=1;var t=Zt();return t("unscopables"),q7}var B7={},z7;function tje(){if(z7)return B7;z7=1;var t=Ut(),e=iu();return e(t.JSON,"JSON",!0),B7}var fk,V7;function rje(){if(V7)return fk;V7=1,Coe(),Poe(),Ioe(),UOe(),Roe(),HOe(),WOe(),Moe(),KOe(),GOe(),YOe(),QOe(),XOe(),JOe(),Aoe(),ZOe(),eje(),tje();var t=Nt();return fk=t.Symbol,fk}var U7={},pk,H7;function WA(){return H7||(H7=1,pk=function(){}),pk}var mk,W7;function Th(){return W7||(W7=1,mk={}),mk}var gk,K7;function nje(){if(K7)return gk;K7=1;var t=vr(),e=an(),r=Function.prototype,n=t&&Object.getOwnPropertyDescriptor,i=e(r,"name"),s=i&&(function(){}).name==="something",o=i&&(!t||t&&n(r,"name").configurable);return gk={EXISTS:i,PROPER:s,CONFIGURABLE:o},gk}var yk,G7;function $oe(){if(G7)return yk;G7=1;var t=nt();return yk=!t(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),yk}var vk,Y7;function bb(){if(Y7)return vk;Y7=1;var t=an(),e=Yr(),r=_i(),n=gb(),i=$oe(),s=n("IE_PROTO"),o=Object,a=o.prototype;return vk=i?o.getPrototypeOf:function(l){var c=r(l);if(t(c,s))return c[s];var d=c.constructor;return e(d)&&c instanceof d?d.prototype:c instanceof o?a:null},vk}var bk,Q7;function Doe(){if(Q7)return bk;Q7=1;var t=nt(),e=Yr(),r=Qr(),n=Pm(),i=bb(),s=Im(),o=jr(),a=Sh(),l=o("iterator"),c=!1,d,h,f;[].keys&&(f=[].keys(),"next"in f?(h=i(i(f)),h!==Object.prototype&&(d=h)):c=!0);var p=!r(d)||t(function(){var m={};return d[l].call(m)!==m});return p?d={}:a&&(d=n(d)),e(d[l])||s(d,l,function(){return this}),bk={IteratorPrototype:d,BUGGY_SAFARI_ITERATORS:c},bk}var xk,X7;function ije(){if(X7)return xk;X7=1;var t=Doe().IteratorPrototype,e=Pm(),r=Nm(),n=iu(),i=Th(),s=function(){return this};return xk=function(o,a,l,c){var d=a+" Iterator";return o.prototype=e(t,{next:r(+!c,l)}),n(o,d,!1,!0),i[d]=s,o},xk}var wk,J7;function sje(){if(J7)return wk;J7=1;var t=lt(),e=Vo();return wk=function(r,n,i){try{return t(e(Object.getOwnPropertyDescriptor(r,n)[i]))}catch{}},wk}var Sk,Z7;function oje(){if(Z7)return Sk;Z7=1;var t=Qr();return Sk=function(e){return t(e)||e===null},Sk}var _k,eW;function aje(){if(eW)return _k;eW=1;var t=oje(),e=String,r=TypeError;return _k=function(n){if(t(n))return n;throw new r("Can't set "+e(n)+" as a prototype")},_k}var Ek,tW;function lje(){if(tW)return Ek;tW=1;var t=sje(),e=Qr(),r=zo(),n=aje();return Ek=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,s={},o;try{o=t(Object.prototype,"__proto__","set"),o(s,[]),i=s instanceof Array}catch{}return function(l,c){return r(l),n(c),e(l)&&(i?o(l,c):l.__proto__=c),l}}():void 0),Ek}var Nk,rW;function KA(){if(rW)return Nk;rW=1;var t=Ie(),e=si(),r=Sh(),n=nje(),i=Yr(),s=ije(),o=bb(),a=lje(),l=iu(),c=Eh(),d=Im(),h=jr(),f=Th(),p=Doe(),m=n.PROPER,g=n.CONFIGURABLE,v=p.IteratorPrototype,y=p.BUGGY_SAFARI_ITERATORS,b=h("iterator"),w="keys",x="values",S="entries",_=function(){return this};return Nk=function(E,N,k,C,O,P,j){s(k,N,C);var A=function(be){if(be===O&&W)return W;if(!y&&be&&be in L)return L[be];switch(be){case w:return function(){return new k(this,be)};case x:return function(){return new k(this,be)};case S:return function(){return new k(this,be)}}return function(){return new k(this)}},D=N+" Iterator",I=!1,L=E.prototype,F=L[b]||L["@@iterator"]||O&&L[O],W=!y&&F||A(O),V=N==="Array"&&L.entries||F,H,K,de;if(V&&(H=o(V.call(new E)),H!==Object.prototype&&H.next&&(!r&&o(H)!==v&&(a?a(H,v):i(H[b])||d(H,b,_)),l(H,D,!0,!0),r&&(f[D]=_))),m&&O===x&&F&&F.name!==x&&(!r&&g?c(L,"name",x):(I=!0,W=function(){return e(F,this)})),O)if(K={values:A(x),keys:P?W:A(w),entries:A(S)},j)for(de in K)(y||I||!(de in L))&&d(L,de,K[de]);else t({target:N,proto:!0,forced:y||I},K);return(!r||j)&&L[b]!==W&&d(L,b,W,{name:O}),f[N]=W,K},Nk}var Ck,nW;function GA(){return nW||(nW=1,Ck=function(t,e){return{value:t,done:e}}),Ck}var kk,iW;function Oh(){if(iW)return kk;iW=1;var t=bs(),e=WA(),r=Th(),n=su(),i=Gi().f,s=KA(),o=GA(),a=Sh(),l=vr(),c="Array Iterator",d=n.set,h=n.getterFor(c);kk=s(Array,"Array",function(p,m){d(this,{type:c,target:t(p),index:0,kind:m})},function(){var p=h(this),m=p.target,g=p.index++;if(!m||g>=m.length)return p.target=null,o(void 0,!0);switch(p.kind){case"keys":return o(g,!1);case"values":return o(m[g],!1)}return o([g,m[g]],!1)},"values");var f=r.Arguments=r.Array;if(e("keys"),e("values"),e("entries"),!a&&l&&f.name!=="values")try{i(f,"name",{value:"values"})}catch{}return kk}var Tk,sW;function cje(){return sW||(sW=1,Tk={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),Tk}var oW;function jh(){if(oW)return U7;oW=1,Oh();var t=cje(),e=Ut(),r=iu(),n=Th();for(var i in t)r(e[i],i),n[i]=n.Array;return U7}var Ok,aW;function Foe(){if(aW)return Ok;aW=1;var t=rje();return jh(),Ok=t,Ok}var jk,lW;function uje(){return lW||(lW=1,jk=Foe()),jk}var dje=uje(),hje=ze(dje),cW={},uW;function fje(){if(uW)return cW;uW=1;var t=Ie(),e=nu(),r=Noe(),n=Qr(),i=fb(),s=Uo(),o=bs(),a=mb(),l=jr(),c=jm(),d=Ch(),h=c("slice"),f=l("species"),p=Array,m=Math.max;return t({target:"Array",proto:!0,forced:!h},{slice:function(v,y){var b=o(this),w=s(b),x=i(v,w),S=i(y===void 0?w:y,w),_,E,N;if(e(b)&&(_=b.constructor,r(_)&&(_===p||e(_.prototype))?_=void 0:n(_)&&(_=_[f],_===null&&(_=void 0)),_===p||_===void 0))return d(b,x,S);for(E=new(_===void 0?p:_)(m(S-x,0)),N=0;x<S;x++,N++)x in b&&a(E,N,b[x]);return E.length=N,E}}),cW}var Pk,dW;function pje(){if(dW)return Pk;dW=1,fje();var t=ln();return Pk=t("Array","slice"),Pk}var Ik,hW;function mje(){if(hW)return Ik;hW=1;var t=Or(),e=pje(),r=Array.prototype;return Ik=function(n){var i=n.slice;return n===r||t(r,n)&&i===r.slice?e:i},Ik}var Rk,fW;function gje(){if(fW)return Rk;fW=1;var t=mje();return Rk=t,Rk}var Mk,pW;function yje(){return pW||(pW=1,Mk=gje()),Mk}var vje=yje(),Is=ze(vje),Ak,mW;function bje(){if(mW)return Ak;mW=1;var t=Si(),e=lt(),r=yb(),n=pb(),i=Ws(),s=e([].concat);return Ak=t("Reflect","ownKeys")||function(a){var l=r.f(i(a)),c=n.f;return c?s(l,c(a)):l},Ak}var gW={},yW;function xje(){if(yW)return gW;yW=1;var t=Ie(),e=nu();return t({target:"Array",stat:!0},{isArray:e}),gW}var $k,vW;function wje(){if(vW)return $k;vW=1,xje();var t=Nt();return $k=t.Array.isArray,$k}var Dk,bW;function Sje(){if(bW)return Dk;bW=1;var t=wje();return Dk=t,Dk}var Fk,xW;function _je(){return xW||(xW=1,Fk=Sje()),Fk}var Eje=_je(),dr=ze(Eje),wW={},SW;function Nje(){if(SW)return wW;SW=1;var t=Ie(),e=vl().map,r=jm(),n=r("map");return t({target:"Array",proto:!0,forced:!n},{map:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),wW}var qk,_W;function Cje(){if(_W)return qk;_W=1,Nje();var t=ln();return qk=t("Array","map"),qk}var Lk,EW;function kje(){if(EW)return Lk;EW=1;var t=Or(),e=Cje(),r=Array.prototype;return Lk=function(n){var i=n.map;return n===r||t(r,n)&&i===r.map?e:i},Lk}var Bk,NW;function Tje(){if(NW)return Bk;NW=1;var t=kje();return Bk=t,Bk}var zk,CW;function Oje(){return CW||(CW=1,zk=Tje()),zk}var jje=Oje(),Kd=ze(jje),kW={},TW;function Pje(){if(TW)return kW;TW=1;var t=Ie(),e=_i(),r=Om(),n=nt(),i=n(function(){r(1)});return t({target:"Object",stat:!0,forced:i},{keys:function(o){return r(e(o))}}),kW}var Vk,OW;function Ije(){if(OW)return Vk;OW=1,Pje();var t=Nt();return Vk=t.Object.keys,Vk}var Uk,jW;function Rje(){if(jW)return Uk;jW=1;var t=Ije();return Uk=t,Uk}var Hk,PW;function Mje(){return PW||(PW=1,Hk=Rje()),Hk}var Aje=Mje(),ar=ze(Aje),IW={},RW;function $je(){if(RW)return IW;RW=1;var t=Ie(),e=lt(),r=Date,n=e(r.prototype.getTime);return t({target:"Date",stat:!0},{now:function(){return n(new r)}}),IW}var Wk,MW;function Dje(){if(MW)return Wk;MW=1,$je();var t=Nt();return Wk=t.Date.now,Wk}var Kk,AW;function Fje(){if(AW)return Kk;AW=1;var t=Dje();return Kk=t,Kk}var Gk,$W;function qje(){return $W||($W=1,Gk=Fje()),Gk}var Lje=qje(),Uv=ze(Lje),DW={},Yk,FW;function Ph(){if(FW)return Yk;FW=1;var t=nt();return Yk=function(e,r){var n=[][e];return!!n&&t(function(){n.call(null,r||function(){return 1},1)})},Yk}var Qk,qW;function Bje(){if(qW)return Qk;qW=1;var t=vl().forEach,e=Ph(),r=e("forEach");return Qk=r?[].forEach:function(i){return t(this,i,arguments.length>1?arguments[1]:void 0)},Qk}var LW;function zje(){if(LW)return DW;LW=1;var t=Ie(),e=Bje();return t({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),DW}var Xk,BW;function Vje(){if(BW)return Xk;BW=1,zje();var t=ln();return Xk=t("Array","forEach"),Xk}var Jk,zW;function Uje(){if(zW)return Jk;zW=1;var t=Vje();return Jk=t,Jk}var Zk,VW;function Hje(){if(VW)return Zk;VW=1;var t=kh(),e=an(),r=Or(),n=Uje(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return Zk=function(o){var a=o.forEach;return o===i||r(i,o)&&a===i.forEach||e(s,t(o))?n:a},Zk}var e2,UW;function Wje(){return UW||(UW=1,e2=Hje()),e2}var Kje=Wje(),Ot=ze(Kje),HW={},WW;function Gje(){if(WW)return HW;WW=1;var t=Ie(),e=lt(),r=nu(),n=e([].reverse),i=[1,2];return t({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),n(this)}}),HW}var t2,KW;function Yje(){if(KW)return t2;KW=1,Gje();var t=ln();return t2=t("Array","reverse"),t2}var r2,GW;function Qje(){if(GW)return r2;GW=1;var t=Or(),e=Yje(),r=Array.prototype;return r2=function(n){var i=n.reverse;return n===r||t(r,n)&&i===r.reverse?e:i},r2}var n2,YW;function Xje(){if(YW)return n2;YW=1;var t=Qje();return n2=t,n2}var i2,QW;function Jje(){return QW||(QW=1,i2=Xje()),i2}var Zje=Jje(),uc=ze(Zje),XW={},s2,JW;function ePe(){if(JW)return s2;JW=1;var t=vr(),e=nu(),r=TypeError,n=Object.getOwnPropertyDescriptor,i=t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(s){return s instanceof TypeError}}();return s2=i?function(s,o){if(e(s)&&!n(s,"length").writable)throw new r("Cannot set read only .length");return s.length=o}:function(s,o){return s.length=o},s2}var o2,ZW;function qoe(){if(ZW)return o2;ZW=1;var t=wh(),e=TypeError;return o2=function(r,n){if(!delete r[n])throw new e("Cannot delete property "+t(n)+" of "+t(r))},o2}var e9;function tPe(){if(e9)return XW;e9=1;var t=Ie(),e=_i(),r=fb(),n=Nh(),i=Uo(),s=ePe(),o=Eoe(),a=zA(),l=mb(),c=qoe(),d=jm(),h=d("splice"),f=Math.max,p=Math.min;return t({target:"Array",proto:!0,forced:!h},{splice:function(g,v){var y=e(this),b=i(y),w=r(g,b),x=arguments.length,S,_,E,N,k,C;for(x===0?S=_=0:x===1?(S=0,_=b-w):(S=x-2,_=p(f(n(v),0),b-w)),o(b+S-_),E=a(y,_),N=0;N<_;N++)k=w+N,k in y&&l(E,N,y[k]);if(E.length=_,S<_){for(N=w;N<b-_;N++)k=N+_,C=N+S,k in y?y[C]=y[k]:c(y,C);for(N=b;N>b-_+S;N--)c(y,N-1)}else if(S>_)for(N=b-_;N>w;N--)k=N+_-1,C=N+S-1,k in y?y[C]=y[k]:c(y,C);for(N=0;N<S;N++)y[N+w]=arguments[N+2];return s(y,b-_+S),E}}),XW}var a2,t9;function rPe(){if(t9)return a2;t9=1,tPe();var t=ln();return a2=t("Array","splice"),a2}var l2,r9;function nPe(){if(r9)return l2;r9=1;var t=Or(),e=rPe(),r=Array.prototype;return l2=function(n){var i=n.splice;return n===r||t(r,n)&&i===r.splice?e:i},l2}var c2,n9;function iPe(){if(n9)return c2;n9=1;var t=nPe();return c2=t,c2}var u2,i9;function sPe(){return i9||(i9=1,u2=iPe()),u2}var oPe=sPe(),wo=ze(oPe),s9={},o9;function aPe(){if(o9)return s9;o9=1;var t=Ie(),e=FA().includes,r=nt(),n=WA(),i=r(function(){return!Array(1).includes()});return t({target:"Array",proto:!0,forced:i},{includes:function(o){return e(this,o,arguments.length>1?arguments[1]:void 0)}}),n("includes"),s9}var d2,a9;function lPe(){if(a9)return d2;a9=1,aPe();var t=ln();return d2=t("Array","includes"),d2}var l9={},h2,c9;function cPe(){if(c9)return h2;c9=1;var t=Qr(),e=Hs(),r=jr(),n=r("match");return h2=function(i){var s;return t(i)&&((s=i[n])!==void 0?!!s:e(i)==="RegExp")},h2}var f2,u9;function uPe(){if(u9)return f2;u9=1;var t=cPe(),e=TypeError;return f2=function(r){if(t(r))throw new e("The method doesn't accept regular expressions");return r},f2}var p2,d9;function dPe(){if(d9)return p2;d9=1;var t=jr(),e=t("match");return p2=function(r){var n=/./;try{"/./"[r](n)}catch{try{return n[e]=!1,"/./"[r](n)}catch{}}return!1},p2}var h9;function hPe(){if(h9)return l9;h9=1;var t=Ie(),e=lt(),r=uPe(),n=zo(),i=Yi(),s=dPe(),o=e("".indexOf);return t({target:"String",proto:!0,forced:!s("includes")},{includes:function(l){return!!~o(i(n(this)),i(r(l)),arguments.length>1?arguments[1]:void 0)}}),l9}var m2,f9;function fPe(){if(f9)return m2;f9=1,hPe();var t=ln();return m2=t("String","includes"),m2}var g2,p9;function pPe(){if(p9)return g2;p9=1;var t=Or(),e=lPe(),r=fPe(),n=Array.prototype,i=String.prototype;return g2=function(s){var o=s.includes;return s===n||t(n,s)&&o===n.includes?e:typeof s=="string"||s===i||t(i,s)&&o===i.includes?r:o},g2}var y2,m9;function mPe(){if(m9)return y2;m9=1;var t=pPe();return y2=t,y2}var v2,g9;function gPe(){return g9||(g9=1,v2=mPe()),v2}var yPe=gPe(),Ga=ze(yPe),y9={},v9;function vPe(){if(v9)return y9;v9=1;var t=Ie(),e=nt(),r=_i(),n=bb(),i=$oe(),s=e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getPrototypeOf:function(a){return n(r(a))}}),y9}var b2,b9;function bPe(){if(b9)return b2;b9=1,vPe();var t=Nt();return b2=t.Object.getPrototypeOf,b2}var x2,x9;function xPe(){if(x9)return x2;x9=1;var t=bPe();return x2=t,x2}var w2,w9;function wPe(){return w9||(w9=1,w2=xPe()),w2}var SPe=wPe(),S9=ze(SPe),S2,_9;function _Pe(){if(_9)return S2;_9=1,Coe();var t=ln();return S2=t("Array","concat"),S2}var _2,E9;function EPe(){if(E9)return _2;E9=1;var t=Or(),e=_Pe(),r=Array.prototype;return _2=function(n){var i=n.concat;return n===r||t(r,n)&&i===r.concat?e:i},_2}var E2,N9;function NPe(){if(N9)return E2;N9=1;var t=EPe();return E2=t,E2}var N2,C9;function CPe(){return C9||(C9=1,N2=NPe()),N2}var kPe=CPe(),TPe=ze(kPe),k9={},T9;function OPe(){if(T9)return k9;T9=1;var t=Ie(),e=vl().filter,r=jm(),n=r("filter");return t({target:"Array",proto:!0,forced:!n},{filter:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),k9}var C2,O9;function jPe(){if(O9)return C2;O9=1,OPe();var t=ln();return C2=t("Array","filter"),C2}var k2,j9;function PPe(){if(j9)return k2;j9=1;var t=Or(),e=jPe(),r=Array.prototype;return k2=function(n){var i=n.filter;return n===r||t(r,n)&&i===r.filter?e:i},k2}var T2,P9;function IPe(){if(P9)return T2;P9=1;var t=PPe();return T2=t,T2}var O2,I9;function RPe(){return I9||(I9=1,O2=IPe()),O2}var MPe=RPe(),Hn=ze(MPe),R9={},j2,M9;function APe(){if(M9)return j2;M9=1;var t=vr(),e=nt(),r=lt(),n=bb(),i=Om(),s=bs(),o=lb().f,a=r(o),l=r([].push),c=t&&e(function(){var h=Object.create(null);return h[2]=2,!a(h,2)}),d=function(h){return function(f){for(var p=s(f),m=i(p),g=c&&n(p)===null,v=m.length,y=0,b=[],w;v>y;)w=m[y++],(!t||(g?w in p:a(p,w)))&&l(b,h?[w,p[w]]:p[w]);return b}};return j2={entries:d(!0),values:d(!1)},j2}var A9;function $Pe(){if(A9)return R9;A9=1;var t=Ie(),e=APe().values;return t({target:"Object",stat:!0},{values:function(n){return e(n)}}),R9}var P2,$9;function DPe(){if($9)return P2;$9=1,$Pe();var t=Nt();return P2=t.Object.values,P2}var I2,D9;function FPe(){if(D9)return I2;D9=1;var t=DPe();return I2=t,I2}var R2,F9;function qPe(){return F9||(F9=1,R2=FPe()),R2}var LPe=qPe(),BPe=ze(LPe),q9={},M2,L9;function YA(){return L9||(L9=1,M2=`	
\v\f\r \u2028\u2029\uFEFF`),M2}var A2,B9;function Loe(){if(B9)return A2;B9=1;var t=lt(),e=zo(),r=Yi(),n=YA(),i=t("".replace),s=RegExp("^["+n+"]+"),o=RegExp("(^|[^"+n+"])["+n+"]+$"),a=function(l){return function(c){var d=r(e(c));return l&1&&(d=i(d,s,"")),l&2&&(d=i(d,o,"$1")),d}};return A2={start:a(1),end:a(2),trim:a(3)},A2}var $2,z9;function zPe(){if(z9)return $2;z9=1;var t=Ut(),e=nt(),r=lt(),n=Yi(),i=Loe().trim,s=YA(),o=t.parseInt,a=t.Symbol,l=a&&a.iterator,c=/^[+-]?0x/i,d=r(c.exec),h=o(s+"08")!==8||o(s+"0x16")!==22||l&&!e(function(){o(Object(l))});return $2=h?function(p,m){var g=i(n(p));return o(g,m>>>0||(d(c,g)?16:10))}:o,$2}var V9;function VPe(){if(V9)return q9;V9=1;var t=Ie(),e=zPe();return t({global:!0,forced:parseInt!==e},{parseInt:e}),q9}var D2,U9;function UPe(){if(U9)return D2;U9=1,VPe();var t=Nt();return D2=t.parseInt,D2}var F2,H9;function HPe(){if(H9)return F2;H9=1;var t=UPe();return F2=t,F2}var q2,W9;function WPe(){return W9||(W9=1,q2=HPe()),q2}var KPe=WPe(),as=ze(KPe),K9={},G9;function GPe(){if(G9)return K9;G9=1;var t=Ie(),e=MA(),r=FA().indexOf,n=Ph(),i=e([].indexOf),s=!!i&&1/i([1],1,-0)<0,o=s||!n("indexOf");return t({target:"Array",proto:!0,forced:o},{indexOf:function(l){var c=arguments.length>1?arguments[1]:void 0;return s?i(this,l,c)||0:r(this,l,c)}}),K9}var L2,Y9;function YPe(){if(Y9)return L2;Y9=1,GPe();var t=ln();return L2=t("Array","indexOf"),L2}var B2,Q9;function QPe(){if(Q9)return B2;Q9=1;var t=Or(),e=YPe(),r=Array.prototype;return B2=function(n){var i=n.indexOf;return n===r||t(r,n)&&i===r.indexOf?e:i},B2}var z2,X9;function XPe(){if(X9)return z2;X9=1;var t=QPe();return z2=t,z2}var V2,J9;function JPe(){return J9||(J9=1,V2=XPe()),V2}var ZPe=JPe(),wt=ze(ZPe),Z9={},eK;function eIe(){if(eK)return Z9;eK=1;var t=Ie(),e=vr(),r=Pm();return t({target:"Object",stat:!0,sham:!e},{create:r}),Z9}var U2,tK;function tIe(){if(tK)return U2;tK=1,eIe();var t=Nt(),e=t.Object;return U2=function(n,i){return e.create(n,i)},U2}var H2,rK;function rIe(){if(rK)return H2;rK=1;var t=tIe();return H2=t,H2}var W2,nK;function nIe(){return nK||(nK=1,W2=rIe()),W2}var iIe=nIe(),dc=ze(iIe),iK={},K2,sK;function sIe(){if(sK)return K2;sK=1;var t=Nh(),e=Yi(),r=zo(),n=RangeError;return K2=function(s){var o=e(r(this)),a="",l=t(s);if(l<0||l===1/0)throw new n("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(o+=o))l&1&&(a+=o);return a},K2}var G2,oK;function oIe(){if(oK)return G2;oK=1;var t=lt(),e=voe(),r=Yi(),n=sIe(),i=zo(),s=t(n),o=t("".slice),a=Math.ceil,l=function(c){return function(d,h,f){var p=r(i(d)),m=e(h),g=p.length,v=f===void 0?" ":r(f),y,b;return m<=g||v===""?p:(y=m-g,b=s(v,a(y/v.length)),b.length>y&&(b=o(b,0,y)),c?p+b:b+p)}};return G2={start:l(!1),end:l(!0)},G2}var Y2,aK;function aIe(){if(aK)return Y2;aK=1;var t=lt(),e=nt(),r=oIe().start,n=RangeError,i=isFinite,s=Math.abs,o=Date.prototype,a=o.toISOString,l=t(o.getTime),c=t(o.getUTCDate),d=t(o.getUTCFullYear),h=t(o.getUTCHours),f=t(o.getUTCMilliseconds),p=t(o.getUTCMinutes),m=t(o.getUTCMonth),g=t(o.getUTCSeconds);return Y2=e(function(){return a.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){a.call(new Date(NaN))})?function(){if(!i(l(this)))throw new n("Invalid time value");var y=this,b=d(y),w=f(y),x=b<0?"-":b>9999?"+":"";return x+r(s(b),x?6:4,0)+"-"+r(m(y)+1,2,0)+"-"+r(c(y),2,0)+"T"+r(h(y),2,0)+":"+r(p(y),2,0)+":"+r(g(y),2,0)+"."+r(w,3,0)+"Z"}:a,Y2}var lK;function lIe(){if(lK)return iK;lK=1;var t=Ie(),e=si(),r=_i(),n=poe(),i=aIe(),s=Hs(),o=nt(),a=o(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return t({target:"Date",proto:!0,forced:a},{toJSON:function(c){var d=r(this),h=n(d,"number");return typeof h=="number"&&!isFinite(h)?null:!("toISOString"in d)&&s(d)==="Date"?e(i,d):d.toISOString()}}),iK}var Q2,cK;function cIe(){if(cK)return Q2;cK=1,lIe(),joe();var t=Nt(),e=ab();return t.JSON||(t.JSON={stringify:JSON.stringify}),Q2=function(n,i,s){return e(t.JSON.stringify,null,arguments)},Q2}var X2,uK;function uIe(){if(uK)return X2;uK=1;var t=cIe();return X2=t,X2}var J2,dK;function dIe(){return dK||(dK=1,J2=uIe()),J2}var hIe=dIe(),Rm=ze(hIe),hK={},fK={},Z2,pK;function Boe(){if(pK)return Z2;pK=1;var t=Ut(),e=bh(),r=Hs(),n=function(i){return e.slice(0,i.length)===i};return Z2=function(){return n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":t.Bun&&typeof Bun.version=="string"?"BUN":t.Deno&&typeof Deno.version=="object"?"DENO":r(t.process)==="process"?"NODE":t.window&&t.document?"BROWSER":"REST"}(),Z2}var eT,mK;function fIe(){if(mK)return eT;mK=1;var t=TypeError;return eT=function(e,r){if(e<r)throw new t("Not enough arguments");return e},eT}var tT,gK;function zoe(){if(gK)return tT;gK=1;var t=Ut(),e=ab(),r=Yr(),n=Boe(),i=bh(),s=Ch(),o=fIe(),a=t.Function,l=/MSIE .\./.test(i)||n==="BUN"&&function(){var c=t.Bun.version.split(".");return c.length<3||c[0]==="0"&&(c[1]<3||c[1]==="3"&&c[2]==="0")}();return tT=function(c,d){var h=d?2:1;return l?function(f,p){var m=o(arguments.length,1)>h,g=r(f)?f:a(f),v=m?s(arguments,h):[],y=m?function(){e(g,this,v)}:g;return d?c(y,p):c(y)}:c},tT}var yK;function pIe(){if(yK)return fK;yK=1;var t=Ie(),e=Ut(),r=zoe(),n=r(e.setInterval,!0);return t({global:!0,bind:!0,forced:e.setInterval!==n},{setInterval:n}),fK}var vK={},bK;function mIe(){if(bK)return vK;bK=1;var t=Ie(),e=Ut(),r=zoe(),n=r(e.setTimeout,!0);return t({global:!0,bind:!0,forced:e.setTimeout!==n},{setTimeout:n}),vK}var xK;function Voe(){return xK||(xK=1,pIe(),mIe()),hK}var rT,wK;function gIe(){if(wK)return rT;wK=1,Voe();var t=Nt();return rT=t.setTimeout,rT}var nT,SK;function yIe(){return SK||(SK=1,nT=gIe()),nT}var vIe=yIe(),So=ze(vIe),_K={},iT,EK;function bIe(){if(EK)return iT;EK=1;var t=_i(),e=fb(),r=Uo();return iT=function(i){for(var s=t(this),o=r(s),a=arguments.length,l=e(a>1?arguments[1]:void 0,o),c=a>2?arguments[2]:void 0,d=c===void 0?o:e(c,o);d>l;)s[l++]=i;return s},iT}var NK;function xIe(){if(NK)return _K;NK=1;var t=Ie(),e=bIe(),r=WA();return t({target:"Array",proto:!0},{fill:e}),r("fill"),_K}var sT,CK;function wIe(){if(CK)return sT;CK=1,xIe();var t=ln();return sT=t("Array","fill"),sT}var oT,kK;function SIe(){if(kK)return oT;kK=1;var t=Or(),e=wIe(),r=Array.prototype;return oT=function(n){var i=n.fill;return n===r||t(r,n)&&i===r.fill?e:i},oT}var aT,TK;function _Ie(){if(TK)return aT;TK=1;var t=SIe();return aT=t,aT}var lT,OK;function EIe(){return OK||(OK=1,lT=_Ie()),lT}var NIe=EIe(),Mm=ze(NIe);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function gs(){return gs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gs.apply(this,arguments)}function Qi(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Mg(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var WI;typeof Object.assign!="function"?WI=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])}return r}:WI=Object.assign;var $c=WI,jK=["","webkit","Moz","MS","ms","o"],CIe=typeof document>"u"?{style:{}}:document.createElement("div"),kIe="function",Wu=Math.round,Dc=Math.abs,QA=Date.now;function xb(t,e){for(var r,n,i=e[0].toUpperCase()+e.slice(1),s=0;s<jK.length;){if(r=jK[s],n=r?r+i:e,n in t)return n;s++}}var _o;typeof window>"u"?_o={}:_o=window;var Uoe=xb(CIe.style,"touchAction"),Hoe=Uoe!==void 0;function TIe(){if(!Hoe)return!1;var t={},e=_o.CSS&&_o.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){return t[r]=e?_o.CSS.supports("touch-action",r):!0}),t}var Woe="compute",Koe="auto",KI="manipulation",hc="none",Op="pan-x",jp="pan-y",Ag=TIe(),OIe=/mobile|tablet|ip(ad|hone|od)|android/i,Goe="ontouchstart"in _o,jIe=xb(_o,"PointerEvent")!==void 0,PIe=Goe&&OIe.test(navigator.userAgent),Am="touch",IIe="pen",XA="mouse",RIe="kinect",MIe=25,Rn=1,ou=2,Er=4,ri=8,Hv=1,$m=2,Dm=4,Fm=8,Gd=16,Bs=$m|Dm,fc=Fm|Gd,Yoe=Bs|fc,Qoe=["x","y"],Wv=["clientX","clientY"];function Eo(t,e,r){var n;if(t)if(t.forEach)t.forEach(e,r);else if(t.length!==void 0)for(n=0;n<t.length;)e.call(r,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t)}function wb(t,e){return typeof t===kIe?t.apply(e&&e[0]||void 0,e):t}function zl(t,e){return t.indexOf(e)>-1}function AIe(t){if(zl(t,hc))return hc;var e=zl(t,Op),r=zl(t,jp);return e&&r?hc:e||r?e?Op:jp:zl(t,KI)?KI:Koe}var Xoe=function(){function t(r,n){this.manager=r,this.set(n)}var e=t.prototype;return e.set=function(n){n===Woe&&(n=this.compute()),Hoe&&this.manager.element.style&&Ag[n]&&(this.manager.element.style[Uoe]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return Eo(this.manager.recognizers,function(i){wb(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),AIe(n.join(" "))},e.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=zl(o,hc)&&!Ag[hc],l=zl(o,jp)&&!Ag[jp],c=zl(o,Op)&&!Ag[Op];if(a){var d=n.pointers.length===1,h=n.distance<2,f=n.deltaTime<250;if(d&&h&&f)return}if(!(c&&l)&&(a||l&&s&Bs||c&&s&fc))return this.preventSrc(i)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},t}();function JA(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function Joe(t){var e=t.length;if(e===1)return{x:Wu(t[0].clientX),y:Wu(t[0].clientY)};for(var r=0,n=0,i=0;i<e;)r+=t[i].clientX,n+=t[i].clientY,i++;return{x:Wu(r/e),y:Wu(n/e)}}function PK(t){for(var e=[],r=0;r<t.pointers.length;)e[r]={clientX:Wu(t.pointers[r].clientX),clientY:Wu(t.pointers[r].clientY)},r++;return{timeStamp:QA(),pointers:e,center:Joe(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Kv(t,e,r){r||(r=Qoe);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.sqrt(n*n+i*i)}function GI(t,e,r){r||(r=Qoe);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.atan2(i,n)*180/Math.PI}function Zoe(t,e){return t===e?Hv:Dc(t)>=Dc(e)?t<0?$m:Dm:e<0?Fm:Gd}function $Ie(t,e){var r=e.center,n=t.offsetDelta||{},i=t.prevDelta||{},s=t.prevInput||{};(e.eventType===Rn||s.eventType===Er)&&(i=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:r.x,y:r.y}),e.deltaX=i.x+(r.x-n.x),e.deltaY=i.y+(r.y-n.y)}function eae(t,e,r){return{x:e/t||0,y:r/t||0}}function DIe(t,e){return Kv(e[0],e[1],Wv)/Kv(t[0],t[1],Wv)}function FIe(t,e){return GI(e[1],e[0],Wv)+GI(t[1],t[0],Wv)}function qIe(t,e){var r=t.lastInterval||e,n=e.timeStamp-r.timeStamp,i,s,o,a;if(e.eventType!==ri&&(n>MIe||r.velocity===void 0)){var l=e.deltaX-r.deltaX,c=e.deltaY-r.deltaY,d=eae(n,l,c);s=d.x,o=d.y,i=Dc(d.x)>Dc(d.y)?d.x:d.y,a=Zoe(l,c),t.lastInterval=e}else i=r.velocity,s=r.velocityX,o=r.velocityY,a=r.direction;e.velocity=i,e.velocityX=s,e.velocityY=o,e.direction=a}function LIe(t,e){var r=t.session,n=e.pointers,i=n.length;r.firstInput||(r.firstInput=PK(e)),i>1&&!r.firstMultiple?r.firstMultiple=PK(e):i===1&&(r.firstMultiple=!1);var s=r.firstInput,o=r.firstMultiple,a=o?o.center:s.center,l=e.center=Joe(n);e.timeStamp=QA(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=GI(a,l),e.distance=Kv(a,l),$Ie(r,e),e.offsetDirection=Zoe(e.deltaX,e.deltaY);var c=eae(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=Dc(c.x)>Dc(c.y)?c.x:c.y,e.scale=o?DIe(o.pointers,n):1,e.rotation=o?FIe(o.pointers,n):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,qIe(r,e);var d=t.element,h=e.srcEvent,f;h.composedPath?f=h.composedPath()[0]:h.path?f=h.path[0]:f=h.target,JA(f,d)&&(d=f),e.target=d}function BIe(t,e,r){var n=r.pointers.length,i=r.changedPointers.length,s=e&Rn&&n-i===0,o=e&(Er|ri)&&n-i===0;r.isFirst=!!s,r.isFinal=!!o,s&&(t.session={}),r.eventType=e,LIe(t,r),t.emit("hammer.input",r),t.recognize(r),t.session.prevInput=r}function Pp(t){return t.trim().split(/\s+/g)}function qf(t,e,r){Eo(Pp(e),function(n){t.addEventListener(n,r,!1)})}function Lf(t,e,r){Eo(Pp(e),function(n){t.removeEventListener(n,r,!1)})}function IK(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var Ih=function(){function t(r,n){var i=this;this.manager=r,this.callback=n,this.element=r.element,this.target=r.options.inputTarget,this.domHandler=function(s){wb(r.options.enable,[r])&&i.handler(s)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&qf(this.element,this.evEl,this.domHandler),this.evTarget&&qf(this.target,this.evTarget,this.domHandler),this.evWin&&qf(IK(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Lf(this.element,this.evEl,this.domHandler),this.evTarget&&Lf(this.target,this.evTarget,this.domHandler),this.evWin&&Lf(IK(this.element),this.evWin,this.domHandler)},t}();function Fc(t,e,r){if(t.indexOf&&!r)return t.indexOf(e);for(var n=0;n<t.length;){if(r&&t[n][r]==e||!r&&t[n]===e)return n;n++}return-1}var zIe={pointerdown:Rn,pointermove:ou,pointerup:Er,pointercancel:ri,pointerout:ri},VIe={2:Am,3:IIe,4:XA,5:RIe},tae="pointerdown",rae="pointermove pointerup pointercancel";_o.MSPointerEvent&&!_o.PointerEvent&&(tae="MSPointerDown",rae="MSPointerMove MSPointerUp MSPointerCancel");var nae=function(t){Qi(e,t);function e(){var n,i=e.prototype;return i.evEl=tae,i.evWin=rae,n=t.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var r=e.prototype;return r.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=zIe[a],c=VIe[i.pointerType]||i.pointerType,d=c===Am,h=Fc(s,i.pointerId,"pointerId");l&Rn&&(i.button===0||d)?h<0&&(s.push(i),h=s.length-1):l&(Er|ri)&&(o=!0),!(h<0)&&(s[h]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:c,srcEvent:i}),o&&s.splice(h,1))},e}(Ih);function Ip(t){return Array.prototype.slice.call(t,0)}function ZA(t,e,r){for(var n=[],i=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];Fc(i,o)<0&&n.push(t[s]),i[s]=o,s++}return r&&(e?n=n.sort(function(a,l){return a[e]>l[e]}):n=n.sort()),n}var UIe={touchstart:Rn,touchmove:ou,touchend:Er,touchcancel:ri},HIe="touchstart touchmove touchend touchcancel",e$=function(t){Qi(e,t);function e(){var n;return e.prototype.evTarget=HIe,n=t.apply(this,arguments)||this,n.targetIds={},n}var r=e.prototype;return r.handler=function(i){var s=UIe[i.type],o=WIe.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Am,srcEvent:i})},e}(Ih);function WIe(t,e){var r=Ip(t.touches),n=this.targetIds;if(e&(Rn|ou)&&r.length===1)return n[r[0].identifier]=!0,[r,r];var i,s,o=Ip(t.changedTouches),a=[],l=this.target;if(s=r.filter(function(c){return JA(c.target,l)}),e===Rn)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),e&(Er|ri)&&delete n[o[i].identifier],i++;if(a.length)return[ZA(s.concat(a),"identifier",!0),a]}var KIe={mousedown:Rn,mousemove:ou,mouseup:Er},GIe="mousedown",YIe="mousemove mouseup",t$=function(t){Qi(e,t);function e(){var n,i=e.prototype;return i.evEl=GIe,i.evWin=YIe,n=t.apply(this,arguments)||this,n.pressed=!1,n}var r=e.prototype;return r.handler=function(i){var s=KIe[i.type];s&Rn&&i.button===0&&(this.pressed=!0),s&ou&&i.which!==1&&(s=Er),this.pressed&&(s&Er&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:XA,srcEvent:i}))},e}(Ih),QIe=2500,RK=25;function MK(t){var e=t.changedPointers,r=e[0];if(r.identifier===this.primaryTouch){var n={x:r.clientX,y:r.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,QIe)}}function XIe(t,e){t&Rn?(this.primaryTouch=e.changedPointers[0].identifier,MK.call(this,e)):t&(Er|ri)&&MK.call(this,e)}function JIe(t){for(var e=t.srcEvent.clientX,r=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(e-i.x),o=Math.abs(r-i.y);if(s<=RK&&o<=RK)return!0}return!1}var iae=function(){var t=function(e){Qi(r,e);function r(i,s){var o;return o=e.call(this,i,s)||this,o.handler=function(a,l,c){var d=c.pointerType===Am,h=c.pointerType===XA;if(!(h&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)XIe.call(Mg(Mg(o)),l,c);else if(h&&JIe.call(Mg(Mg(o)),c))return;o.callback(a,l,c)}},o.touch=new e$(o.manager,o.handler),o.mouse=new t$(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=r.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},r}(Ih);return t}();function ZIe(t){var e,r=t.options.inputClass;return r?e=r:jIe?e=nae:PIe?e=e$:Goe?e=iae:e=t$,new e(t,BIe)}function Ku(t,e,r){return Array.isArray(t)?(Eo(t,r[e],r),!0):!1}var ay=1,zi=2,Yd=4,Ya=8,No=Ya,Rp=16,Ms=32,eRe=1;function tRe(){return eRe++}function $g(t,e){var r=e.manager;return r?r.get(t):t}function AK(t){return t&Rp?"cancel":t&Ya?"end":t&Yd?"move":t&zi?"start":""}var qm=function(){function t(r){r===void 0&&(r={}),this.options=gs({enable:!0},r),this.id=tRe(),this.manager=null,this.state=ay,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(n){return $c(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(Ku(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=$g(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return Ku(n,"dropRecognizeWith",this)?this:(n=$g(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(Ku(n,"requireFailure",this))return this;var i=this.requireFail;return n=$g(n,this),Fc(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(Ku(n,"dropRequireFailure",this))return this;n=$g(n,this);var i=Fc(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<Ya&&o(i.options.event+AK(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=Ya&&o(i.options.event+AK(s))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=Ms},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(Ms|ay)))return!1;n++}return!0},e.recognize=function(n){var i=$c({},n);if(!wb(this.options.enable,[this,i])){this.reset(),this.state=Ms;return}this.state&(No|Rp|Ms)&&(this.state=ay),this.state=this.process(i),this.state&(zi|Yd|Ya|Rp)&&this.tryEmit(i)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},t}(),YI=function(t){Qi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,gs({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var r=e.prototype;return r.getTouchAction=function(){return[KI]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime<o.time;if(this.reset(),i.eventType&Rn&&this.count===0)return this.failTimeout();if(l&&c&&a){if(i.eventType!==Er)return this.failTimeout();var d=this.pTime?i.timeStamp-this.pTime<o.interval:!0,h=!this.pCenter||Kv(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!h||!d?this.count=1:this.count+=1,this._input=i;var f=this.count%o.taps;if(f===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=No,s.tryEmit()},o.interval),zi):No}return Ms},r.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=Ms},this.options.interval),Ms},r.reset=function(){clearTimeout(this._timer)},r.emit=function(){this.state===No&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(qm),Qd=function(t){Qi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,gs({pointers:1},n))||this}var r=e.prototype;return r.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},r.process=function(i){var s=this.state,o=i.eventType,a=s&(zi|Yd),l=this.attrTest(i);return a&&(o&ri||!l)?s|Rp:a||l?o&Er?s|Ya:s&zi?s|Yd:zi:Ms},e}(qm);function sae(t){return t===Gd?"down":t===Fm?"up":t===$m?"left":t===Dm?"right":""}var r$=function(t){Qi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,gs({event:"pan",threshold:10,pointers:1,direction:Yoe},n))||this,i.pX=null,i.pY=null,i}var r=e.prototype;return r.getTouchAction=function(){var i=this.options.direction,s=[];return i&Bs&&s.push(jp),i&fc&&s.push(Op),s},r.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,c=i.deltaX,d=i.deltaY;return l&s.direction||(s.direction&Bs?(l=c===0?Hv:c<0?$m:Dm,o=c!==this.pX,a=Math.abs(i.deltaX)):(l=d===0?Hv:d<0?Fm:Gd,o=d!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},r.attrTest=function(i){return Qd.prototype.attrTest.call(this,i)&&(this.state&zi||!(this.state&zi)&&this.directionTest(i))},r.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=sae(i.direction);s&&(i.additionalEvent=this.options.event+s),t.prototype.emit.call(this,i)},e}(Qd),oae=function(t){Qi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,gs({event:"swipe",threshold:10,velocity:.3,direction:Bs|fc,pointers:1},n))||this}var r=e.prototype;return r.getTouchAction=function(){return r$.prototype.getTouchAction.call(this)},r.attrTest=function(i){var s=this.options.direction,o;return s&(Bs|fc)?o=i.overallVelocity:s&Bs?o=i.overallVelocityX:s&fc&&(o=i.overallVelocityY),t.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&Dc(o)>this.options.velocity&&i.eventType&Er},r.emit=function(i){var s=sae(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},e}(Qd),aae=function(t){Qi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,gs({event:"pinch",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[hc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&zi)},r.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}t.prototype.emit.call(this,i)},e}(Qd),lae=function(t){Qi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,gs({event:"rotate",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[hc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&zi)},e}(Qd),cae=function(t){Qi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,gs({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var r=e.prototype;return r.getTouchAction=function(){return[Koe]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(Er|ri)&&!c)this.reset();else if(i.eventType&Rn)this.reset(),this._timer=setTimeout(function(){s.state=No,s.tryEmit()},o.time);else if(i.eventType&Er)return No;return Ms},r.reset=function(){clearTimeout(this._timer)},r.emit=function(i){this.state===No&&(i&&i.eventType&Er?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=QA(),this.manager.emit(this.options.event,this._input)))},e}(qm),uae={domEvents:!1,touchAction:Woe,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},$K=[[lae,{enable:!1}],[aae,{enable:!1},["rotate"]],[oae,{direction:Bs}],[r$,{direction:Bs},["swipe"]],[YI],[YI,{event:"doubletap",taps:2},["tap"]],[cae]],rRe=1,DK=2;function FK(t,e){var r=t.element;if(r.style){var n;Eo(t.options.cssProps,function(i,s){n=xb(r.style,s),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function nRe(t,e){var r=document.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}var qK=function(){function t(r,n){var i=this;this.options=$c({},uae,n||{}),this.options.inputTarget=this.options.inputTarget||r,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=r,this.input=ZIe(this),this.touchAction=new Xoe(this,this.options.touchAction),FK(this,!0),Eo(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var e=t.prototype;return e.set=function(n){return $c(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?DK:rRe},e.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&No)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==DK&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(zi|Yd|Ya)&&(i.curRecognizer=s,a=s),l++}},e.get=function(n){if(n instanceof qm)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},e.add=function(n){if(Ku(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(Ku(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=Fc(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},e.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return Eo(Pp(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},e.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return Eo(Pp(n),function(o){i?s[o]&&s[o].splice(Fc(s[o],i),1):delete s[o]}),this},e.emit=function(n,i){this.options.domEvents&&nRe(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},e.destroy=function(){this.element&&FK(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),iRe={touchstart:Rn,touchmove:ou,touchend:Er,touchcancel:ri},sRe="touchstart",oRe="touchstart touchmove touchend touchcancel",aRe=function(t){Qi(e,t);function e(){var n,i=e.prototype;return i.evTarget=sRe,i.evWin=oRe,n=t.apply(this,arguments)||this,n.started=!1,n}var r=e.prototype;return r.handler=function(i){var s=iRe[i.type];if(s===Rn&&(this.started=!0),!!this.started){var o=lRe.call(this,i,s);s&(Er|ri)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Am,srcEvent:i})}},e}(Ih);function lRe(t,e){var r=Ip(t.touches),n=Ip(t.changedTouches);return e&(Er|ri)&&(r=ZA(r.concat(n),"identifier",!0)),[r,n]}function dae(t,e,r){var n="DEPRECATED METHOD: "+e+`
`+r+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),t.apply(this,arguments)}}var hae=dae(function(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;)(!r||r&&t[n[i]]===void 0)&&(t[n[i]]=e[n[i]]),i++;return t},"extend","Use `assign`."),cRe=dae(function(t,e){return hae(t,e,!0)},"merge","Use `assign`.");function uRe(t,e,r){var n=e.prototype,i;i=t.prototype=Object.create(n),i.constructor=t,i._super=n,r&&$c(i,r)}function LK(t,e){return function(){return t.apply(e,arguments)}}var fae=function(){var t=function(r,n){return n===void 0&&(n={}),new qK(r,gs({recognizers:$K.concat()},n))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=Yoe,t.DIRECTION_DOWN=Gd,t.DIRECTION_LEFT=$m,t.DIRECTION_RIGHT=Dm,t.DIRECTION_UP=Fm,t.DIRECTION_HORIZONTAL=Bs,t.DIRECTION_VERTICAL=fc,t.DIRECTION_NONE=Hv,t.DIRECTION_DOWN=Gd,t.INPUT_START=Rn,t.INPUT_MOVE=ou,t.INPUT_END=Er,t.INPUT_CANCEL=ri,t.STATE_POSSIBLE=ay,t.STATE_BEGAN=zi,t.STATE_CHANGED=Yd,t.STATE_ENDED=Ya,t.STATE_RECOGNIZED=No,t.STATE_CANCELLED=Rp,t.STATE_FAILED=Ms,t.Manager=qK,t.Input=Ih,t.TouchAction=Xoe,t.TouchInput=e$,t.MouseInput=t$,t.PointerEventInput=nae,t.TouchMouseInput=iae,t.SingleTouchInput=aRe,t.Recognizer=qm,t.AttrRecognizer=Qd,t.Tap=YI,t.Pan=r$,t.Swipe=oae,t.Pinch=aae,t.Rotate=lae,t.Press=cae,t.on=qf,t.off=Lf,t.each=Eo,t.merge=cRe,t.extend=hae,t.bindFn=LK,t.assign=$c,t.inherit=uRe,t.bindFn=LK,t.prefixed=xb,t.toArray=Ip,t.inArray=Fc,t.uniqueArray=ZA,t.splitStr=Pp,t.boolOrFn=wb,t.hasParent=JA,t.addEventListeners=qf,t.removeEventListeners=Lf,t.defaults=$c({},uae,{preset:$K}),t}();fae.defaults;hje("DELETE");function Sb(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return dRe(e.length?e:[Uv()])}function dRe(t){let[e,r,n]=hRe(t),i=1;const s=()=>{const o=2091639*e+i*23283064365386963e-26;return e=r,r=n,n=o-(i=o|0)};return s.uint32=()=>s()*4294967296,s.fract53=()=>s()+(s()*2097152|0)*11102230246251565e-32,s.algorithm="Alea",s.seed=t,s.version="0.9",s}function hRe(){const t=fRe();let e=t(" "),r=t(" "),n=t(" ");for(let i=0;i<arguments.length;i++)e-=t(i<0||arguments.length<=i?void 0:arguments[i]),e<0&&(e+=1),r-=t(i<0||arguments.length<=i?void 0:arguments[i]),r<0&&(r+=1),n-=t(i<0||arguments.length<=i?void 0:arguments[i]),n<0&&(n+=1);return[e,r,n]}function fRe(){let t=4022871197;return function(e){const r=e.toString();for(let n=0;n<r.length;n++){t+=r.charCodeAt(n);let i=.02519603282416938*t;t=i>>>0,i-=t,i*=t,t=i>>>0,i-=t,t+=i*4294967296}return(t>>>0)*23283064365386963e-26}}function pRe(){const t=()=>{};return{on:t,off:t,destroy:t,emit:t,get(){return{set:t}}}}const n$=typeof window<"u"?window.Hammer||fae:function(){return pRe()};function As(t){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const r=n$(this._dom.overlay);r.on("tap",ne(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{r.destroy()});const n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Ot(n).call(n,i=>{r.on(i,s=>{s.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=i=>{mRe(i.target,t)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=i=>{("key"in i?i.key==="Escape":i.keyCode===27)&&this.deactivate()}}_oe(As.prototype);As.current=null;As.prototype.destroy=function(){this.deactivate();for(const r of uc(t=wo(e=this._cleanupQueue).call(e,0)).call(t)){var t,e;r()}};As.prototype.activate=function(){As.current&&As.current.deactivate(),As.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};As.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};As.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};function mRe(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}const gRe=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,yRe=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,vRe=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,bRe=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function oa(t){if(t)for(;t.hasChildNodes()===!0;){const e=t.firstChild;e&&(oa(e),t.removeChild(e))}}function id(t){return t instanceof String||typeof t=="string"}function BK(t){return typeof t=="object"&&t!==null}function qc(t,e,r,n){let i=!1;n===!0&&(i=e[r]===null&&t[r]!==void 0),i?delete t[r]:t[r]=e[r]}function pae(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;for(const n in t)if(e[n]!==void 0)if(e[n]===null||typeof e[n]!="object")qc(t,e,n,r);else{const i=t[n],s=e[n];BK(i)&&BK(s)&&pae(i,s,r)}}function Rh(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(dr(r))throw new TypeError("Arrays are not supported by deepExtend");for(let i=0;i<t.length;i++){const s=t[i];if(Object.prototype.hasOwnProperty.call(r,s))if(r[s]&&r[s].constructor===Object)e[s]===void 0&&(e[s]={}),e[s].constructor===Object?It(e[s],r[s],!1,n):qc(e,r,s,n);else{if(dr(r[s]))throw new TypeError("Arrays are not supported by deepExtend");qc(e,r,s,n)}}return e}function Gv(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(dr(r))throw new TypeError("Arrays are not supported by deepExtend");for(const i in r)if(Object.prototype.hasOwnProperty.call(r,i)&&!Ga(t).call(t,i))if(r[i]&&r[i].constructor===Object)e[i]===void 0&&(e[i]={}),e[i].constructor===Object?It(e[i],r[i]):qc(e,r,i,n);else if(dr(r[i])){e[i]=[];for(let s=0;s<r[i].length;s++)e[i].push(r[i][s])}else qc(e,r,i,n);return e}function It(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)||r===!0)if(typeof e[s]=="object"&&e[s]!==null&&S9(e[s])===Object.prototype)t[s]===void 0?t[s]=It({},e[s],r):typeof t[s]=="object"&&t[s]!==null&&S9(t[s])===Object.prototype?It(t[s],e[s],r):qc(t,e,s,n);else if(dr(e[s])){var i;t[s]=Is(i=e[s]).call(i)}else qc(t,e,s,n);return t}function Yv(t,e){return[...t,e]}function xRe(t){return Is(t).call(t)}function wRe(t){return t.getBoundingClientRect().left}function SRe(t){return t.getBoundingClientRect().top}function et(t,e){if(dr(t)){const r=t.length;for(let n=0;n<r;n++)e(t[n],n,t)}else for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(t[r],r,t)}function i$(t){let e;switch(t.length){case 3:case 4:return e=yRe.exec(t),e?{r:as(e[1]+e[1],16),g:as(e[2]+e[2],16),b:as(e[3]+e[3],16)}:null;case 6:case 7:return e=gRe.exec(t),e?{r:as(e[1],16),g:as(e[2],16),b:as(e[3],16)}:null;default:return null}}function $i(t,e){if(Ga(t).call(t,"rgba"))return t;if(Ga(t).call(t,"rgb")){const r=t.substr(wt(t).call(t,"(")+1).replace(")","").split(",");return"rgba("+r[0]+","+r[1]+","+r[2]+","+e+")"}else{const r=i$(t);return r==null?t:"rgba("+r.r+","+r.g+","+r.b+","+e+")"}}function mae(t,e,r){var n;return"#"+Is(n=((1<<24)+(t<<16)+(e<<8)+r).toString(16)).call(n,1)}function QI(t,e){if(id(t)){let n=t;if(yae(n)){var r;const i=Kd(r=n.substr(4).substr(0,n.length-5).split(",")).call(r,function(s){return as(s)});n=mae(i[0],i[1],i[2])}if(gae(n)===!0){const i=_Re(n),s={h:i.h,s:i.s*.8,v:Math.min(1,i.v*1.02)},o={h:i.h,s:Math.min(1,i.s*1.25),v:i.v*.8},a=XI(o.h,o.s,o.v),l=XI(s.h,s.s,s.v);return{background:n,border:a,highlight:{background:l,border:a},hover:{background:l,border:a}}}else return{background:n,border:n,highlight:{background:n,border:n},hover:{background:n,border:n}}}else return{background:t.background||void 0,border:t.border||void 0,highlight:id(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||void 0,border:t.highlight&&t.highlight.border||void 0},hover:id(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||void 0,background:t.hover&&t.hover.background||void 0}}}function mf(t,e,r){t=t/255,e=e/255,r=r/255;const n=Math.min(t,Math.min(e,r)),i=Math.max(t,Math.max(e,r));if(n===i)return{h:0,s:0,v:n};const s=t===n?e-r:r===n?t-e:r-t,a=60*((t===n?3:r===n?1:5)-s/(i-n))/360,l=(i-n)/i;return{h:a,s:l,v:i}}function ly(t,e,r){let n,i,s;const o=Math.floor(t*6),a=t*6-o,l=r*(1-e),c=r*(1-a*e),d=r*(1-(1-a)*e);switch(o%6){case 0:n=r,i=d,s=l;break;case 1:n=c,i=r,s=l;break;case 2:n=l,i=r,s=d;break;case 3:n=l,i=c,s=r;break;case 4:n=d,i=l,s=r;break;case 5:n=r,i=l,s=c;break}return{r:Math.floor(n*255),g:Math.floor(i*255),b:Math.floor(s*255)}}function XI(t,e,r){const n=ly(t,e,r);return mae(n.r,n.g,n.b)}function _Re(t){const e=i$(t);if(!e)throw new TypeError("'".concat(t,"' is not a valid color."));return mf(e.r,e.g,e.b)}function gae(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)}function yae(t){return vRe.test(t)}function ERe(t){return bRe.test(t)}function Qa(t){if(t===null||typeof t!="object")return null;if(t instanceof Element)return t;const e=dc(t);for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&typeof t[r]=="object"&&(e[r]=Qa(t[r]));return e}function Pi(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=function(p){return p!=null},s=function(p){return p!==null&&typeof p=="object"},o=function(p){for(const m in p)if(Object.prototype.hasOwnProperty.call(p,m))return!1;return!0};if(!s(t))throw new Error("Parameter mergeTarget must be an object");if(!s(e))throw new Error("Parameter options must be an object");if(!i(r))throw new Error("Parameter option must have a value");if(!s(n))throw new Error("Parameter globalOptions must be an object");const a=function(p,m,g){s(p[g])||(p[g]={});const v=m[g],y=p[g];for(const b in v)Object.prototype.hasOwnProperty.call(v,b)&&(y[b]=v[b])},l=e[r],d=s(n)&&!o(n)?n[r]:void 0,h=d?d.enabled:void 0;if(l===void 0)return;if(typeof l=="boolean"){s(t[r])||(t[r]={}),t[r].enabled=l;return}if(l===null&&!s(t[r]))if(i(d))t[r]=dc(d);else return;if(!s(l))return;let f=!0;l.enabled!==void 0?f=l.enabled:h!==void 0&&(f=d.enabled),a(t,e,r),t[r].enabled=f}const NRe={linear(t){return t},easeInQuad(t){return t*t},easeOutQuad(t){return t*(2-t)},easeInOutQuad(t){return t<.5?2*t*t:-1+(4-2*t)*t},easeInCubic(t){return t*t*t},easeOutCubic(t){return--t*t*t+1},easeInOutCubic(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart(t){return t*t*t*t},easeOutQuart(t){return 1- --t*t*t*t},easeInOutQuart(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint(t){return t*t*t*t*t},easeOutQuint(t){return 1+--t*t*t*t*t},easeInOutQuint(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}};function aa(t,e){let r;dr(e)||(e=[e]);for(const n of t)if(n){r=n[e[0]];for(let i=1;i<e.length;i++)r&&(r=r[e[i]]);if(typeof r<"u")break}return r}const CRe={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};let kRe=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}setCloseCallback(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}_isColorString(e){if(typeof e=="string")return CRe[e]}setColor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e==="none")return;let n;const i=this._isColorString(e);if(i!==void 0&&(e=i),id(e)===!0){if(yae(e)===!0){const s=e.substr(4).substr(0,e.length-5).split(",");n={r:s[0],g:s[1],b:s[2],a:1}}else if(ERe(e)===!0){const s=e.substr(5).substr(0,e.length-6).split(",");n={r:s[0],g:s[1],b:s[2],a:s[3]}}else if(gae(e)===!0){const s=i$(e);n={r:s.r,g:s.g,b:s.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){const s=e.a!==void 0?e.a:"1.0";n={r:e.r,g:e.g,b:e.b,a:s}}if(n===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+Rm(e));this._setColor(n,r)}show(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0&&(this.previousColor=_r({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",So(()=>{this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0)},0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)===!0&&(this.initialColor=_r({},e)),this.color=e;const n=mf(e.r,e.g,e.b),i=2*Math.PI,s=this.r*n.s,o=this.centerCoordinates.x+s*Math.sin(i*n.h),a=this.centerCoordinates.y+s*Math.cos(i*n.h);this.colorPickerSelector.style.left=o-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=a-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}_setOpacity(e){this.color.a=e/100,this._updatePicker(this.color)}_setBrightness(e){const r=mf(this.color.r,this.color.g,this.color.b);r.v=e/100;const n=ly(r.h,r.s,r.v);n.a=this.color.a,this.color=n,this._updatePicker()}_updatePicker(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color;const r=mf(e.r,e.g,e.b),n=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const i=this.colorPickerCanvas.clientWidth,s=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,i,s),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-r.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),Mm(n).call(n),this.brightnessRange.value=100*r.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){var e,r,n,i;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){const o=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{const o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);const s=this;this.opacityRange.onchange=function(){s._setOpacity(this.value)},this.opacityRange.oninput=function(){s._setOpacity(this.value)},this.brightnessRange.onchange=function(){s._setBrightness(this.value)},this.brightnessRange.oninput=function(){s._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=ne(e=this._hide).call(e,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=ne(r=this._apply).call(r,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=ne(n=this._save).call(n,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=ne(i=this._loadLast).call(i,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new n$(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",e=>{e.isFirst&&this._moveSelector(e)}),this.hammer.on("tap",e=>{this._moveSelector(e)}),this.hammer.on("panstart",e=>{this._moveSelector(e)}),this.hammer.on("panmove",e=>{this._moveSelector(e)}),this.hammer.on("panend",e=>{this._moveSelector(e)})}_generateHueCircle(){if(this.generated===!1){const e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const r=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,r,n);let i,s,o,a;this.centerCoordinates={x:r*.5,y:n*.5},this.r=.49*r;const l=2*Math.PI/360,c=1/360,d=1/this.r;let h;for(o=0;o<360;o++)for(a=0;a<this.r;a++)i=this.centerCoordinates.x+a*Math.sin(l*o),s=this.centerCoordinates.y+a*Math.cos(l*o),h=ly(o*c,a*d,1),e.fillStyle="rgb("+h.r+","+h.g+","+h.b+")",e.fillRect(i-.5,s-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,r,n)}this.generated=!0}_moveSelector(e){const r=this.colorPickerDiv.getBoundingClientRect(),n=e.center.x-r.left,i=e.center.y-r.top,s=.5*this.colorPickerDiv.clientHeight,o=.5*this.colorPickerDiv.clientWidth,a=n-o,l=i-s,c=Math.atan2(a,l),d=.98*Math.min(Math.sqrt(a*a+l*l),o),h=Math.cos(c)*d+s,f=Math.sin(c)*d+o;this.colorPickerSelector.style.top=h-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=f-.5*this.colorPickerSelector.clientWidth+"px";let p=c/(2*Math.PI);p=p<0?p+1:p;const m=d/this.r,g=mf(this.color.r,this.color.g,this.color.b);g.h=p,g.s=m;const v=ly(g.h,g.s,g.v);v.a=this.color.a,this.color=v,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}};function JI(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(e.length<1)throw new TypeError("Invalid arguments.");if(e.length===1)return document.createTextNode(e[0]);{const n=document.createElement(e[0]);return n.appendChild(JI(...Is(e).call(e,1))),n}}let TRe=class{constructor(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:()=>!1;this.parent=e,this.changedOptions=[],this.container=r,this.allowCreation=!1,this.hideOption=s,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},_r(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new kRe(i),this.wrapper=void 0}setOptions(e){if(e!==void 0){this.popupHistory={},this._removePopup();let r=!0;if(typeof e=="string")this.options.filter=e;else if(dr(e))this.options.filter=e.join();else if(typeof e=="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),Hn(e)!==void 0&&(this.options.filter=Hn(e)),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(r=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,r=e):typeof e=="function"&&(this.options.filter=e,r=!0);Hn(this.options)===!1&&(r=!1),this.options.enabled=r}this._clean()}setModuleOptions(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];const e=Hn(this.options);let r=0,n=!1;for(const i in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,i)&&(this.allowCreation=!1,n=!1,typeof e=="function"?(n=e(i,[]),n=n||this._handleObject(this.configureOptions[i],[i],!0)):(e===!0||wt(e).call(e,i)!==-1)&&(n=!0),n!==!1&&(this.allowCreation=!0,r>0&&this._makeItem([]),this._makeHeader(i),this._handleObject(this.configureOptions[i],[i])),r++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(let e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}_clean(){for(let e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(e){let r=this.moduleOptions;for(let n=0;n<e.length;n++)if(r[e[n]]!==void 0)r=r[e[n]];else{r=void 0;break}return r}_makeItem(e){if(this.allowCreation===!0){const s=document.createElement("div");s.className="vis-configuration vis-config-item vis-config-s"+e.length;for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return Ot(n).call(n,o=>{s.appendChild(o)}),this.domElements.push(s),this.domElements.length}return 0}_makeHeader(e){const r=document.createElement("div");r.className="vis-configuration vis-config-header",r.innerText=e,this._makeItem([],r)}_makeLabel(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=document.createElement("div");if(i.className="vis-configuration vis-config-label vis-config-s"+r.length,n===!0){for(;i.firstChild;)i.removeChild(i.firstChild);i.appendChild(JI("i","b",e))}else i.innerText=e+":";return i}_makeDropdown(e,r,n){const i=document.createElement("select");i.className="vis-configuration vis-config-select";let s=0;r!==void 0&&wt(e).call(e,r)!==-1&&(s=wt(e).call(e,r));for(let l=0;l<e.length;l++){const c=document.createElement("option");c.value=e[l],l===s&&(c.selected="selected"),c.innerText=e[l],i.appendChild(c)}const o=this;i.onchange=function(){o._update(this.value,n)};const a=this._makeLabel(n[n.length-1],n);this._makeItem(n,a,i)}_makeRange(e,r,n){const i=e[0],s=e[1],o=e[2],a=e[3],l=document.createElement("input");l.className="vis-configuration vis-config-range";try{l.type="range",l.min=s,l.max=o}catch{}l.step=a;let c="",d=0;r!==void 0?(r<0&&r*1.2<s?(l.min=Math.ceil(r*1.2),d=l.min,c="range increased"):r/1.2<s&&(l.min=Math.ceil(r/1.2),d=l.min,c="range increased"),r*1.2>o&&o!==1&&(l.max=Math.ceil(r*1.2),d=l.max,c="range increased"),l.value=r):l.value=i;const h=document.createElement("input");h.className="vis-configuration vis-config-rangeinput",h.value=l.value;const f=this;l.onchange=function(){h.value=this.value,f._update(Number(this.value),n)},l.oninput=function(){h.value=this.value};const p=this._makeLabel(n[n.length-1],n),m=this._makeItem(n,p,l,h);c!==""&&this.popupHistory[m]!==d&&(this.popupHistory[m]=d,this._setupPopup(c,m))}_makeButton(){if(this.options.showButton===!0){const e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerText="generate options",e.onclick=()=>{this._printOptions()},e.onmouseover=()=>{e.className="vis-configuration vis-config-button hover"},e.onmouseout=()=>{e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}_setupPopup(e,r){if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){const n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerText=e,n.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:r}}}_removePopup(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(this.popupDiv.html!==void 0){const r=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=r.left+"px",this.popupDiv.html.style.top=r.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=So(()=>{this.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=So(()=>{this._removePopup()},1800)}}_makeCheckbox(e,r,n){const i=document.createElement("input");i.type="checkbox",i.className="vis-configuration vis-config-checkbox",i.checked=e,r!==void 0&&(i.checked=r,r!==e&&(typeof e=="object"?r!==e.enabled&&this.changedOptions.push({path:n,value:r}):this.changedOptions.push({path:n,value:r})));const s=this;i.onchange=function(){s._update(this.checked,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}_makeTextInput(e,r,n){const i=document.createElement("input");i.type="text",i.className="vis-configuration vis-config-text",i.value=r,r!==e&&this.changedOptions.push({path:n,value:r});const s=this;i.onchange=function(){s._update(this.value,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}_makeColorField(e,r,n){const i=e[1],s=document.createElement("div");r=r===void 0?i:r,r!=="none"?(s.className="vis-configuration vis-config-colorBlock",s.style.backgroundColor=r):s.className="vis-configuration vis-config-colorBlock none",r=r===void 0?i:r,s.onclick=()=>{this._showColorPicker(r,s,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,s)}_showColorPicker(e,r,n){r.onclick=function(){},this.colorPicker.insertTo(r),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(i=>{const s="rgba("+i.r+","+i.g+","+i.b+","+i.a+")";r.style.backgroundColor=s,this._update(s,n)}),this.colorPicker.setCloseCallback(()=>{r.onclick=()=>{this._showColorPicker(e,r,n)}})}_handleObject(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=!1;const s=Hn(this.options);let o=!1;for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)){i=!0;const l=e[a],c=Yv(r,a);if(typeof s=="function"&&(i=s(a,r),i===!1&&!dr(l)&&typeof l!="string"&&typeof l!="boolean"&&l instanceof Object&&(this.allowCreation=!1,i=this._handleObject(l,c,!0),this.allowCreation=n===!1)),i!==!1){o=!0;const d=this._getValue(c);if(dr(l))this._handleArray(l,d,c);else if(typeof l=="string")this._makeTextInput(l,d,c);else if(typeof l=="boolean")this._makeCheckbox(l,d,c);else if(l instanceof Object){if(!this.hideOption(r,a,this.moduleOptions))if(l.enabled!==void 0){const h=Yv(c,"enabled"),f=this._getValue(h);if(f===!0){const p=this._makeLabel(a,c,!0);this._makeItem(c,p),o=this._handleObject(l,c)||o}else this._makeCheckbox(l,f,c)}else{const h=this._makeLabel(a,c,!0);this._makeItem(c,h),o=this._handleObject(l,c)||o}}else console.error("dont know how to handle",l,a,c)}}return o}_handleArray(e,r,n){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,r,n),e[1]!==r&&this.changedOptions.push({path:n,value:r})):typeof e[0]=="string"?(this._makeDropdown(e,r,n),e[0]!==r&&this.changedOptions.push({path:n,value:r})):typeof e[0]=="number"&&(this._makeRange(e,r,n),e[0]!==r&&this.changedOptions.push({path:n,value:Number(r)}))}_update(e,r){const n=this._constructOptions(e,r);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",n),this.initialized=!0,this.parent.setOptions(n)}_constructOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n;e=e==="true"?!0:e,e=e==="false"?!1:e;for(let s=0;s<r.length;s++)r[s]!=="global"&&(i[r[s]]===void 0&&(i[r[s]]={}),s!==r.length-1?i=i[r[s]]:i[r[s]]=e);return n}_printOptions(){const e=this.getOptions();for(;this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(JI("pre","const options = "+Rm(e,null,2)))}getOptions(){const e={};for(let r=0;r<this.changedOptions.length;r++)this._constructOptions(this.changedOptions[r].value,this.changedOptions[r].path,e);return e}},ORe=class{constructor(e,r){this.container=e,this.overflowMethod=r||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(e,r){this.x=as(e),this.y=as(r)}setText(e){if(e instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(e)}else this.frame.innerText=e}show(e){if(e===void 0&&(e=!0),e===!0){const r=this.frame.clientHeight,n=this.frame.clientWidth,i=this.frame.parentNode.clientHeight,s=this.frame.parentNode.clientWidth;let o=0,a=0;if(this.overflowMethod=="flip"){let l=!1,c=!0;this.y-r<this.padding&&(c=!1),this.x+n>s-this.padding&&(l=!0),l?o=this.x-n:o=this.x,c?a=this.y-r:a=this.y}else a=this.y-r,a+r+this.padding>i&&(a=i-r-this.padding),a<this.padding&&(a=this.padding),o=this.x,o+n+this.padding>s&&(o=s-n-this.padding),o<this.padding&&(o=this.padding);this.frame.style.left=o+"px",this.frame.style.top=a+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}},nf=!1,zK;const ZI="background: #FFeeee; color: #dd0000";let jRe=class nr{static validate(e,r,n){nf=!1,zK=r;let i=r;return n!==void 0&&(i=r[n]),nr.parse(e,i,[]),nf}static parse(e,r,n){for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&nr.check(i,e,r,n)}static check(e,r,n,i){if(n[e]===void 0&&n.__any__===void 0){nr.getSuggestion(e,n,i);return}let s=e,o=!0;n[e]===void 0&&n.__any__!==void 0&&(s="__any__",o=nr.getType(r[e])==="object");let a=n[s];o&&a.__type__!==void 0&&(a=a.__type__),nr.checkFields(e,r,n,s,a,i)}static checkFields(e,r,n,i,s,o){const a=function(d){console.error("%c"+d+nr.printLocation(o,e),ZI)},l=nr.getType(r[e]),c=s[l];c!==void 0?nr.getType(c)==="array"&&wt(c).call(c,r[e])===-1?(a('Invalid option detected in "'+e+'". Allowed values are:'+nr.print(c)+' not "'+r[e]+'". '),nf=!0):l==="object"&&i!=="__any__"&&(o=Yv(o,e),nr.parse(r[e],n[i],o)):s.any===void 0&&(a('Invalid type received for "'+e+'". Expected: '+nr.print(ar(s))+". Received ["+l+'] "'+r[e]+'"'),nf=!0)}static getType(e){const r=typeof e;return r==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":dr(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":r==="number"?"number":r==="boolean"?"boolean":r==="string"?"string":r===void 0?"undefined":r}static getSuggestion(e,r,n){const i=nr.findInOptions(e,r,n,!1),s=nr.findInOptions(e,zK,[],!0),o=8,a=4;let l;i.indexMatch!==void 0?l=" in "+nr.printLocation(i.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+i.indexMatch+`"?

`:s.distance<=a&&i.distance>s.distance?l=" in "+nr.printLocation(i.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+nr.printLocation(s.path,s.closestMatch,""):i.distance<=o?l='. Did you mean "'+i.closestMatch+'"?'+nr.printLocation(i.path,e):l=". Did you mean one of these: "+nr.print(ar(r))+nr.printLocation(n,e),console.error('%cUnknown option detected: "'+e+'"'+l,ZI),nf=!0}static findInOptions(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=1e9,o="",a=[];const l=e.toLowerCase();let c;for(const h in r){let f;if(r[h].__type__!==void 0&&i===!0){const p=nr.findInOptions(e,r[h],Yv(n,h));s>p.distance&&(o=p.closestMatch,a=p.path,s=p.distance,c=p.indexMatch)}else{var d;wt(d=h.toLowerCase()).call(d,l)!==-1&&(c=h),f=nr.levenshteinDistance(e,h),s>f&&(o=h,a=xRe(n),s=f)}}return{closestMatch:o,path:a,distance:s,indexMatch:c}}static printLocation(e,r){let i=`

`+(arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`)+`options = {
`;for(let s=0;s<e.length;s++){for(let o=0;o<s+1;o++)i+="  ";i+=e[s]+`: {
`}for(let s=0;s<e.length+1;s++)i+="  ";i+=r+`
`;for(let s=0;s<e.length+1;s++){for(let o=0;o<e.length-s;o++)i+="  ";i+=`}
`}return i+`

`}static print(e){return Rm(e).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}static levenshteinDistance(e,r){if(e.length===0)return r.length;if(r.length===0)return e.length;const n=[];let i;for(i=0;i<=r.length;i++)n[i]=[i];let s;for(s=0;s<=e.length;s++)n[0][s]=s;for(i=1;i<=r.length;i++)for(s=1;s<=e.length;s++)r.charAt(i-1)==e.charAt(s-1)?n[i][s]=n[i-1][s-1]:n[i][s]=Math.min(n[i-1][s-1]+1,Math.min(n[i][s-1]+1,n[i-1][s]+1));return n[r.length][e.length]}};const PRe=As,IRe=TRe,sd=n$,RRe=ORe,vae=ZI,MRe=jRe;function ARe(t){return ja=t,qRe()}var bae={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},s$=dc(bae);s$.color="color.color";s$.style="dashes";var _n={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},VK={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},ja="",Xd=0,Xe="",Ae="",zn=_n.NULL;function $Re(){Xd=0,Xe=ja.charAt(0)}function Dr(){Xd++,Xe=ja.charAt(Xd)}function wu(){return ja.charAt(Xd+1)}function UK(t){var e=t.charCodeAt(0);return e<47?e===35||e===46:e<59?e>47:e<91?e>64:e<96?e===95:e<123?e>96:!1}function il(t,e){if(t||(t={}),e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function DRe(t,e,r){for(var n=e.split("."),i=t;n.length;){var s=n.shift();n.length?(i[s]||(i[s]={}),i=i[s]):i[s]=r}}function xae(t,e){for(var r,n,i=null,s=[t],o=t;o.parent;)s.push(o.parent),o=o.parent;if(o.nodes){for(r=0,n=o.nodes.length;r<n;r++)if(e.id===o.nodes[r].id){i=o.nodes[r];break}}for(i||(i={id:e.id},t.node&&(i.attr=il(i.attr,t.node))),r=s.length-1;r>=0;r--){var a,l=s[r];l.nodes||(l.nodes=[]),wt(a=l.nodes).call(a,i)===-1&&l.nodes.push(i)}e.attr&&(i.attr=il(i.attr,e.attr))}function FRe(t,e){if(t.edges||(t.edges=[]),t.edges.push(e),t.edge){var r=il({},t.edge);e.attr=il(r,e.attr)}}function wae(t,e,r,n,i){var s={from:e,to:r,type:n};return t.edge&&(s.attr=il({},t.edge)),s.attr=il(s.attr||{},i),i!=null&&i.hasOwnProperty("arrows")&&i.arrows!=null&&(s.arrows={to:{enabled:!0,type:i.arrows.type}},i.arrows=null),s}function Mt(){for(zn=_n.NULL,Ae="";Xe===" "||Xe==="	"||Xe===`
`||Xe==="\r";)Dr();do{var t=!1;if(Xe==="#"){for(var e=Xd-1;ja.charAt(e)===" "||ja.charAt(e)==="	";)e--;if(ja.charAt(e)===`
`||ja.charAt(e)===""){for(;Xe!=""&&Xe!=`
`;)Dr();t=!0}}if(Xe==="/"&&wu()==="/"){for(;Xe!=""&&Xe!=`
`;)Dr();t=!0}if(Xe==="/"&&wu()==="*"){for(;Xe!="";)if(Xe==="*"&&wu()==="/"){Dr(),Dr();break}else Dr();t=!0}for(;Xe===" "||Xe==="	"||Xe===`
`||Xe==="\r";)Dr()}while(t);if(Xe===""){zn=_n.DELIMITER;return}var r=Xe+wu();if(VK[r]){zn=_n.DELIMITER,Ae=r,Dr(),Dr();return}if(VK[Xe]){zn=_n.DELIMITER,Ae=Xe,Dr();return}if(UK(Xe)||Xe==="-"){for(Ae+=Xe,Dr();UK(Xe);)Ae+=Xe,Dr();Ae==="false"?Ae=!1:Ae==="true"?Ae=!0:isNaN(Number(Ae))||(Ae=Number(Ae)),zn=_n.IDENTIFIER;return}if(Xe==='"'){for(Dr();Xe!=""&&(Xe!='"'||Xe==='"'&&wu()==='"');)Xe==='"'?(Ae+=Xe,Dr()):Xe==="\\"&&wu()==="n"?(Ae+=`
`,Dr()):Ae+=Xe,Dr();if(Xe!='"')throw En('End of string " expected');Dr(),zn=_n.IDENTIFIER;return}for(zn=_n.UNKNOWN;Xe!="";)Ae+=Xe,Dr();throw new SyntaxError('Syntax error in part "'+Nae(Ae,30)+'"')}function qRe(){var t={};if($Re(),Mt(),Ae==="strict"&&(t.strict=!0,Mt()),(Ae==="graph"||Ae==="digraph")&&(t.type=Ae,Mt()),zn===_n.IDENTIFIER&&(t.id=Ae,Mt()),Ae!="{")throw En("Angle bracket { expected");if(Mt(),Sae(t),Ae!="}")throw En("Angle bracket } expected");if(Mt(),Ae!=="")throw En("End of file expected");return Mt(),delete t.node,delete t.edge,delete t.graph,t}function Sae(t){for(;Ae!==""&&Ae!="}";)LRe(t),Ae===";"&&Mt()}function LRe(t){var e=_ae(t);if(e){Eae(t,e);return}var r=BRe(t);if(!r){if(zn!=_n.IDENTIFIER)throw En("Identifier expected");var n=Ae;if(Mt(),Ae==="="){if(Mt(),zn!=_n.IDENTIFIER)throw En("Identifier expected");t[n]=Ae,Mt()}else zRe(t,n)}}function _ae(t){var e=null;if(Ae==="subgraph"&&(e={},e.type="subgraph",Mt(),zn===_n.IDENTIFIER&&(e.id=Ae,Mt())),Ae==="{"){if(Mt(),e||(e={}),e.parent=t,e.node=t.node,e.edge=t.edge,e.graph=t.graph,Sae(e),Ae!="}")throw En("Angle bracket } expected");Mt(),delete e.node,delete e.edge,delete e.graph,delete e.parent,t.subgraphs||(t.subgraphs=[]),t.subgraphs.push(e)}return e}function BRe(t){return Ae==="node"?(Mt(),t.node=Bf(),"node"):Ae==="edge"?(Mt(),t.edge=Bf(),"edge"):Ae==="graph"?(Mt(),t.graph=Bf(),"graph"):null}function zRe(t,e){var r={id:e},n=Bf();n&&(r.attr=n),xae(t,r),Eae(t,e)}function Eae(t,e){for(;Ae==="->"||Ae==="--";){var r,n=Ae;Mt();var i=_ae(t);if(i)r=i;else{if(zn!=_n.IDENTIFIER)throw En("Identifier or subgraph expected");r=Ae,xae(t,{id:r}),Mt()}var s=Bf(),o=wae(t,e,r,n,s);FRe(t,o),e=r}}function Bf(){for(var t,e=null,r={dashed:!0,solid:!1,dotted:[1,5]},n={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},i=new Array,s=new Array;Ae==="[";){for(Mt(),e={};Ae!==""&&Ae!="]";){if(zn!=_n.IDENTIFIER)throw En("Attribute name expected");var o=Ae;if(Mt(),Ae!="=")throw En("Equal sign = expected");if(Mt(),zn!=_n.IDENTIFIER)throw En("Attribute value expected");var a=Ae;o==="style"&&(a=r[a]);var l;o==="arrowhead"&&(l=n[a],o="arrows",a={to:{enabled:!0,type:l}}),o==="arrowtail"&&(l=n[a],o="arrows",a={from:{enabled:!0,type:l}}),i.push({attr:e,name:o,value:a}),s.push(o),Mt(),Ae==","&&Mt()}if(Ae!="]")throw En("Bracket ] expected");Mt()}if(Ga(s).call(s,"dir")){var c={};for(c.arrows={},t=0;t<i.length;t++)if(i[t].name==="arrows")if(i[t].value.to!=null)c.arrows.to=t;else if(i[t].value.from!=null)c.arrows.from=t;else throw En("Invalid value of arrows");else i[t].name==="dir"&&(c.dir=t);var d=i[c.dir].value;if(!Ga(s).call(s,"arrows"))if(d==="both")i.push({attr:i[c.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),c.arrows.to=i.length-1,i.push({attr:i[c.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),c.arrows.from=i.length-1;else if(d==="forward")i.push({attr:i[c.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),c.arrows.to=i.length-1;else if(d==="back")i.push({attr:i[c.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),c.arrows.from=i.length-1;else if(d==="none")i.push({attr:i[c.dir].attr,name:"arrows",value:""}),c.arrows.to=i.length-1;else throw En('Invalid dir type "'+d+'"');var h,f;if(d==="both")c.arrows.to&&c.arrows.from?(f=i[c.arrows.to].value.to.type,h=i[c.arrows.from].value.from.type,i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}},wo(i).call(i,c.arrows.from,1)):c.arrows.to?(f=i[c.arrows.to].value.to.type,h="arrow",i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.from&&(f="arrow",h=i[c.arrows.from].value.from.type,i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}});else if(d==="back")c.arrows.to&&c.arrows.from?(f="",h=i[c.arrows.from].value.from.type,i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.to?(f="",h="arrow",c.arrows.from=c.arrows.to,i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.from&&(f="",h=i[c.arrows.from].value.from.type,i[c.arrows.to]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}),i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{from:{enabled:!0,type:i[c.arrows.from].value.from.type}}};else if(d==="none"){var p;c.arrows.to?p=c.arrows.to:p=c.arrows.from,i[p]={attr:i[p].attr,name:i[p].name,value:""}}else if(d==="forward")c.arrows.to&&c.arrows.from?(f=i[c.arrows.to].value.to.type,h="",i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.to?(f=i[c.arrows.to].value.to.type,h="",i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.from&&(f="arrow",h="",c.arrows.to=c.arrows.from,i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}),i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:i[c.arrows.to].value.to.type}}};else throw En('Invalid dir type "'+d+'"');wo(i).call(i,c.dir,1)}var m;if(Ga(s).call(s,"penwidth")){var g=[];for(m=i.length,t=0;t<m;t++)i[t].name!=="width"&&(i[t].name==="penwidth"&&(i[t].name="width"),g.push(i[t]));i=g}for(m=i.length,t=0;t<m;t++)DRe(i[t].attr,i[t].name,i[t].value);return e}function En(t){return new SyntaxError(t+', got "'+Nae(Ae,30)+'" (char '+Xd+")")}function Nae(t,e){return t.length<=e?t:t.substr(0,27)+"..."}function VRe(t,e,r){dr(t)?Ot(t).call(t,function(n){dr(e)?Ot(e).call(e,function(i){r(n,i)}):r(n,e)}):dr(e)?Ot(e).call(e,function(n){r(t,n)}):r(t,e)}function cT(t,e,r){for(var n=e.split("."),i=n.pop(),s=t,o=0;o<n.length;o++){var a=n[o];a in s||(s[a]={}),s=s[a]}return s[i]=r,t}function HK(t,e){var r={};for(var n in t)if(t.hasOwnProperty(n)){var i=e[n];dr(i)?Ot(i).call(i,function(s){cT(r,s,t[n])}):typeof i=="string"?cT(r,i,t[n]):cT(r,n,t[n])}return r}function URe(t){var e=ARe(t),r={nodes:[],edges:[],options:{}};if(e.nodes){var n;Ot(n=e.nodes).call(n,function(o){var a={id:o.id,label:String(o.label||o.id)};il(a,HK(o.attr,bae)),a.image&&(a.shape="image"),r.nodes.push(a)})}if(e.edges){var i,s=function(o){var a={from:o.from,to:o.to};return il(a,HK(o.attr,s$)),a.arrows==null&&o.type==="->"&&(a.arrows="to"),a};Ot(i=e.edges).call(i,function(o){var a,l;if(o.from instanceof Object?a=o.from.nodes:a={id:o.from},o.to instanceof Object?l=o.to.nodes:l={id:o.to},o.from instanceof Object&&o.from.edges){var c;Ot(c=o.from.edges).call(c,function(h){var f=s(h);r.edges.push(f)})}if(VRe(a,l,function(h,f){var p=wae(r,h.id,f.id,o.type,o.attr),m=s(p);r.edges.push(m)}),o.to instanceof Object&&o.to.edges){var d;Ot(d=o.to.edges).call(d,function(h){var f=s(h);r.edges.push(f)})}})}return e.attr&&(r.options=e.attr),r}function HRe(t,e){var r;const n={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};e!=null&&(e.fixed!=null&&(n.nodes.fixed=e.fixed),e.parseColor!=null&&(n.nodes.parseColor=e.parseColor),e.inheritColor!=null&&(n.edges.inheritColor=e.inheritColor));const i=t.edges,s=Kd(i).call(i,a=>{const l={from:a.source,id:a.id,to:a.target};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.type==="Directed"&&(l.arrows="to"),a.color&&n.edges.inheritColor===!1&&(l.color=a.color),l});return{nodes:Kd(r=t.nodes).call(r,a=>{const l={id:a.id,fixed:n.nodes.fixed&&a.x!=null&&a.y!=null};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.size!=null&&(l.size=a.size),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.title!=null&&(l.title=a.title),a.x!=null&&(l.x=a.x),a.y!=null&&(l.y=a.y),a.color!=null&&(n.nodes.parseColor===!0?l.color=a.color:l.color={background:a.color,border:a.color,highlight:{background:a.color,border:a.color},hover:{background:a.color,border:a.color}}),l}),edges:s}}const WRe={addDescription:"Click in an empty space to place a new node.",addEdge:"Add Edge",addNode:"Add Node",back:"Back",close:"Close",createEdgeError:"Cannot link edges to a cluster.",del:"Delete selected",deleteClusterError:"Clusters cannot be deleted.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",edit:"Edit",editClusterError:"Clusters cannot be edited.",editEdge:"Edit Edge",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",editNode:"Edit Node"},KRe={addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",addEdge:"Kante hinzufgen",addNode:"Knoten hinzufgen",back:"Zurck",close:"Schlieen",createEdgeError:"Es ist nicht mglich, Kanten mit Clustern zu verbinden.",del:"Lsche Auswahl",deleteClusterError:"Cluster knnen nicht gelscht werden.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",edit:"Editieren",editClusterError:"Cluster knnen nicht editiert werden.",editEdge:"Kante editieren",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",editNode:"Knoten editieren"},GRe={addDescription:"Haga clic en un lugar vaco para colocar un nuevo nodo.",addEdge:"Aadir arista",addNode:"Aadir nodo",back:"Atrs",close:"Cerrar",createEdgeError:"No se puede conectar una arista a un grupo.",del:"Eliminar seleccin",deleteClusterError:"No es posible eliminar grupos.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",edit:"Editar",editClusterError:"No es posible editar grupos.",editEdge:"Editar arista",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",editNode:"Editar nodo"},YRe={addDescription:"Clicca per aggiungere un nuovo nodo",addEdge:"Aggiungi un vertice",addNode:"Aggiungi un nodo",back:"Indietro",close:"Chiudere",createEdgeError:"Non si possono collegare vertici ad un cluster",del:"Cancella la selezione",deleteClusterError:"I cluster non possono essere cancellati",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",edit:"Modifica",editClusterError:"I clusters non possono essere modificati.",editEdge:"Modifica il vertice",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",editNode:"Modifica il nodo"},QRe={addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",addEdge:"Link toevoegen",addNode:"Node toevoegen",back:"Terug",close:"Sluiten",createEdgeError:"Kan geen link maken naar een cluster.",del:"Selectie verwijderen",deleteClusterError:"Clusters kunnen niet worden verwijderd.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",edit:"Wijzigen",editClusterError:"Clusters kunnen niet worden aangepast.",editEdge:"Link wijzigen",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",editNode:"Node wijzigen"},XRe={addDescription:"Clique em um espao em branco para adicionar um novo n",addEdge:"Adicionar aresta",addNode:"Adicionar n",back:"Voltar",close:"Fechar",createEdgeError:"No foi possvel linkar arestas a um cluster.",del:"Remover selecionado",deleteClusterError:"Clusters no puderam ser removidos.",edgeDescription:"Clique em um n e arraste a aresta at outro n para conect-los",edit:"Editar",editClusterError:"Clusters no puderam ser editados.",editEdge:"Editar aresta",editEdgeDescription:"Clique nos pontos de controle e os arraste para um n para conect-los",editNode:"Editar n"},JRe={addDescription:"   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"    .",del:" ",deleteClusterError:"    ",edgeDescription:"        ,   .",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},ZRe={addDescription:"",addEdge:"",addNode:"",back:"",close:"",createEdgeError:"",del:"",deleteClusterError:"",edgeDescription:"",edit:"",editClusterError:"",editEdge:"",editEdgeDescription:"",editNode:""},eMe={addDescription:"K   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"  '   .",del:" ",deleteClusterError:"    .",edgeDescription:"        ,   '.",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},tMe={addDescription:"Cliquez dans un endroit vide pour placer un nud.",addEdge:"Ajouter un lien",addNode:"Ajouter un nud",back:"Retour",close:"Fermer",createEdgeError:"Impossible de crer un lien vers un cluster.",del:"Effacer la slection",deleteClusterError:"Les clusters ne peuvent pas tre effacs.",edgeDescription:"Cliquez sur un nud et glissez le lien vers un autre nud pour les connecter.",edit:"diter",editClusterError:"Les clusters ne peuvent pas tre dits.",editEdge:"diter le lien",editEdgeDescription:"Cliquez sur les points de contrle et glissez-les pour connecter un nud.",editNode:"diter le nud"},rMe={addDescription:"Kluknutm do przdnho prostoru mete pidat nov vrchol.",addEdge:"Pidat hranu",addNode:"Pidat vrchol",back:"Zpt",close:"Zavt",createEdgeError:"Nelze pipojit hranu ke shluku.",del:"Smazat vbr",deleteClusterError:"Nelze mazat shluky.",edgeDescription:"Petaenm z jednoho vrcholu do druhho mete spojit tyto vrcholy novou hranou.",edit:"Upravit",editClusterError:"Nelze upravovat shluky.",editEdge:"Upravit hranu",editEdgeDescription:"Petaenm kontrolnho vrcholu hrany ji mete pipojit k jinmu vrcholu.",editNode:"Upravit vrchol"};var nMe=Object.freeze({__proto__:null,cn:ZRe,cs:rMe,de:KRe,en:WRe,es:GRe,fr:tMe,it:YRe,nl:QRe,pt:XRe,ru:JRe,uk:eMe});function iMe(t,e){try{const[n,i]=e.split(/[-_ /]/,2),s=n!=null?n.toLowerCase():null,o=i!=null?i.toUpperCase():null;if(s&&o){const a=s+"-"+o;if(Object.prototype.hasOwnProperty.call(t,a))return a;var r;console.warn(TPe(r="Unknown variant ".concat(o," of language ")).call(r,s,"."))}if(s){const a=s;if(Object.prototype.hasOwnProperty.call(t,a))return a;console.warn("Unknown language ".concat(s))}return console.warn("Unknown locale ".concat(e,", falling back to English.")),"en"}catch(n){return console.error(n),console.warn("Unexpected error while normalizing locale ".concat(e,", falling back to English.")),"en"}}class sMe{constructor(){this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}init(){if(this.initialized())return;this.src=this.image.src;const e=this.image.width,r=this.image.height;this.width=e,this.height=r;const n=Math.floor(r/2),i=Math.floor(r/4),s=Math.floor(r/8),o=Math.floor(r/16),a=Math.floor(e/2),l=Math.floor(e/4),c=Math.floor(e/8),d=Math.floor(e/16);this.canvas.width=3*l,this.canvas.height=n,this.coordinates=[[0,0,a,n],[a,0,l,i],[a,i,c,s],[5*c,i,d,o]],this._fillMipMap()}initialized(){return this.coordinates!==void 0}_fillMipMap(){const e=this.canvas.getContext("2d"),r=this.coordinates[0];e.drawImage(this.image,r[0],r[1],r[2],r[3]);for(let n=1;n<this.NUM_ITERATIONS;n++){const i=this.coordinates[n-1],s=this.coordinates[n];e.drawImage(this.canvas,i[0],i[1],i[2],i[3],s[0],s[1],s[2],s[3])}}drawImageAtPosition(e,r,n,i,s,o){if(this.initialized())if(r>2){r*=.5;let a=0;for(;r>2&&a<this.NUM_ITERATIONS;)r*=.5,a+=1;a>=this.NUM_ITERATIONS&&(a=this.NUM_ITERATIONS-1);const l=this.coordinates[a];e.drawImage(this.canvas,l[0],l[1],l[2],l[3],n,i,s,o)}else e.drawImage(this.image,n,i,s,o)}}class oMe{constructor(e){this.images={},this.imageBroken={},this.callback=e}_tryloadBrokenUrl(e,r,n){if(!(e===void 0||n===void 0)){if(r===void 0){console.warn("No broken url image defined");return}n.image.onerror=()=>{console.error("Could not load brokenImage:",r)},n.image.src=r}}_redrawWithImage(e){this.callback&&this.callback(e)}load(e,r){const n=this.images[e];if(n)return n;const i=new sMe;return this.images[e]=i,i.image.onload=()=>{this._fixImageCoordinates(i.image),i.init(),this._redrawWithImage(i)},i.image.onerror=()=>{console.error("Could not load image:",e),this._tryloadBrokenUrl(e,r,i)},i.image.src=e,i}_fixImageCoordinates(e){e.width===0&&(document.body.appendChild(e),e.width=e.offsetWidth,e.height=e.offsetHeight,document.body.removeChild(e))}}var WK={},KK={},uT={exports:{}},dT,GK;function aMe(){if(GK)return dT;GK=1;var t=nt();return dT=t(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),dT}var hT,YK;function lMe(){if(YK)return hT;YK=1;var t=nt(),e=Qr(),r=Hs(),n=aMe(),i=Object.isExtensible,s=t(function(){});return hT=s||n?function(a){return!e(a)||n&&r(a)==="ArrayBuffer"?!1:i?i(a):!0}:i,hT}var fT,QK;function Cae(){if(QK)return fT;QK=1;var t=nt();return fT=!t(function(){return Object.isExtensible(Object.preventExtensions({}))}),fT}var XK;function _b(){if(XK)return uT.exports;XK=1;var t=Ie(),e=lt(),r=Tm(),n=Qr(),i=an(),s=Gi().f,o=yb(),a=UA(),l=lMe(),c=ub(),d=Cae(),h=!1,f=c("meta"),p=0,m=function(x){s(x,f,{value:{objectID:"O"+p++,weakData:{}}})},g=function(x,S){if(!n(x))return typeof x=="symbol"?x:(typeof x=="string"?"S":"P")+x;if(!i(x,f)){if(!l(x))return"F";if(!S)return"E";m(x)}return x[f].objectID},v=function(x,S){if(!i(x,f)){if(!l(x))return!0;if(!S)return!1;m(x)}return x[f].weakData},y=function(x){return d&&h&&l(x)&&!i(x,f)&&m(x),x},b=function(){w.enable=function(){},h=!0;var x=o.f,S=e([].splice),_={};_[f]=1,x(_).length&&(o.f=function(E){for(var N=x(E),k=0,C=N.length;k<C;k++)if(N[k]===f){S(N,k,1);break}return N},t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:a.f}))},w=uT.exports={enable:b,fastKey:g,getWeakData:v,onFreeze:y};return r[f]=!0,uT.exports}var pT,JK;function cMe(){if(JK)return pT;JK=1;var t=jr(),e=Th(),r=t("iterator"),n=Array.prototype;return pT=function(i){return i!==void 0&&(e.Array===i||n[r]===i)},pT}var mT,ZK;function kae(){if(ZK)return mT;ZK=1;var t=kh(),e=AA(),r=vh(),n=Th(),i=jr(),s=i("iterator");return mT=function(o){if(!r(o))return e(o,s)||e(o,"@@iterator")||n[t(o)]},mT}var gT,eG;function uMe(){if(eG)return gT;eG=1;var t=si(),e=Vo(),r=Ws(),n=wh(),i=kae(),s=TypeError;return gT=function(o,a){var l=arguments.length<2?i(o):a;if(e(l))return r(t(l,o));throw new s(n(o)+" is not iterable")},gT}var yT,tG;function o$(){if(tG)return yT;tG=1;var t=si(),e=Ws(),r=AA();return yT=function(n,i,s){var o,a;e(n);try{if(o=r(n,"return"),!o){if(i==="throw")throw s;return s}o=t(o,n)}catch(l){a=!0,o=l}if(i==="throw")throw s;if(a)throw o;return e(o),s},yT}var vT,rG;function Eb(){if(rG)return vT;rG=1;var t=hb(),e=si(),r=Ws(),n=wh(),i=cMe(),s=Uo(),o=Or(),a=uMe(),l=kae(),c=o$(),d=TypeError,h=function(p,m){this.stopped=p,this.result=m},f=h.prototype;return vT=function(p,m,g){var v=g&&g.that,y=!!(g&&g.AS_ENTRIES),b=!!(g&&g.IS_RECORD),w=!!(g&&g.IS_ITERATOR),x=!!(g&&g.INTERRUPTED),S=t(m,v),_,E,N,k,C,O,P,j=function(D){return _&&c(_,"normal"),new h(!0,D)},A=function(D){return y?(r(D),x?S(D[0],D[1],j):S(D[0],D[1])):x?S(D,j):S(D)};if(b)_=p.iterator;else if(w)_=p;else{if(E=l(p),!E)throw new d(n(p)+" is not iterable");if(i(E)){for(N=0,k=s(p);k>N;N++)if(C=A(p[N]),C&&o(f,C))return C;return new h(!1)}_=a(p,E)}for(O=b?p.next:_.next;!(P=e(O,_)).done;){try{C=A(P.value)}catch(D){c(_,"throw",D)}if(typeof C=="object"&&C&&o(f,C))return C}return new h(!1)},vT}var bT,nG;function a$(){if(nG)return bT;nG=1;var t=Or(),e=TypeError;return bT=function(r,n){if(t(n,r))return r;throw new e("Incorrect invocation")},bT}var xT,iG;function l$(){if(iG)return xT;iG=1;var t=Ie(),e=Ut(),r=_b(),n=nt(),i=Eh(),s=Eb(),o=a$(),a=Yr(),l=Qr(),c=vh(),d=iu(),h=Gi().f,f=vl().forEach,p=vr(),m=su(),g=m.set,v=m.getterFor;return xT=function(y,b,w){var x=y.indexOf("Map")!==-1,S=y.indexOf("Weak")!==-1,_=x?"set":"add",E=e[y],N=E&&E.prototype,k={},C;if(!p||!a(E)||!(S||N.forEach&&!n(function(){new E().entries().next()})))C=w.getConstructor(b,y,x,_),r.enable();else{C=b(function(j,A){g(o(j,O),{type:y,collection:new E}),c(A)||s(A,j[_],{that:j,AS_ENTRIES:x})});var O=C.prototype,P=v(y);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(j){var A=j==="add"||j==="set";j in N&&!(S&&j==="clear")&&i(O,j,function(D,I){var L=P(this).collection;if(!A&&S&&!l(D))return j==="get"?void 0:!1;var F=L[j](D===0?0:D,I);return A?this:F})}),S||h(O,"size",{configurable:!0,get:function(){return P(this).collection.size}})}return d(C,y,!1,!0),k[y]=C,t({global:!0,forced:!0},k),S||w.setStrong(C,y,x),C},xT}var wT,sG;function c$(){if(sG)return wT;sG=1;var t=Im();return wT=function(e,r,n){for(var i in r)n&&n.unsafe&&e[i]?e[i]=r[i]:t(e,i,r[i],n);return e},wT}var ST,oG;function dMe(){if(oG)return ST;oG=1;var t=Si(),e=HA(),r=jr(),n=vr(),i=r("species");return ST=function(s){var o=t(s);n&&o&&!o[i]&&e(o,i,{configurable:!0,get:function(){return this}})},ST}var _T,aG;function Tae(){if(aG)return _T;aG=1;var t=Pm(),e=HA(),r=c$(),n=hb(),i=a$(),s=vh(),o=Eb(),a=KA(),l=GA(),c=dMe(),d=vr(),h=_b().fastKey,f=su(),p=f.set,m=f.getterFor;return _T={getConstructor:function(g,v,y,b){var w=g(function(N,k){i(N,x),p(N,{type:v,index:t(null),first:null,last:null,size:0}),d||(N.size=0),s(k)||o(k,N[b],{that:N,AS_ENTRIES:y})}),x=w.prototype,S=m(v),_=function(N,k,C){var O=S(N),P=E(N,k),j,A;return P?P.value=C:(O.last=P={index:A=h(k,!0),key:k,value:C,previous:j=O.last,next:null,removed:!1},O.first||(O.first=P),j&&(j.next=P),d?O.size++:N.size++,A!=="F"&&(O.index[A]=P)),N},E=function(N,k){var C=S(N),O=h(k),P;if(O!=="F")return C.index[O];for(P=C.first;P;P=P.next)if(P.key===k)return P};return r(x,{clear:function(){for(var k=this,C=S(k),O=C.first;O;)O.removed=!0,O.previous&&(O.previous=O.previous.next=null),O=O.next;C.first=C.last=null,C.index=t(null),d?C.size=0:k.size=0},delete:function(N){var k=this,C=S(k),O=E(k,N);if(O){var P=O.next,j=O.previous;delete C.index[O.index],O.removed=!0,j&&(j.next=P),P&&(P.previous=j),C.first===O&&(C.first=P),C.last===O&&(C.last=j),d?C.size--:k.size--}return!!O},forEach:function(k){for(var C=S(this),O=n(k,arguments.length>1?arguments[1]:void 0),P;P=P?P.next:C.first;)for(O(P.value,P.key,this);P&&P.removed;)P=P.previous},has:function(k){return!!E(this,k)}}),r(x,y?{get:function(k){var C=E(this,k);return C&&C.value},set:function(k,C){return _(this,k===0?0:k,C)}}:{add:function(k){return _(this,k=k===0?0:k,k)}}),d&&e(x,"size",{configurable:!0,get:function(){return S(this).size}}),w},setStrong:function(g,v,y){var b=v+" Iterator",w=m(v),x=m(b);a(g,v,function(S,_){p(this,{type:b,target:S,state:w(S),kind:_,last:null})},function(){for(var S=x(this),_=S.kind,E=S.last;E&&E.removed;)E=E.previous;return!S.target||!(S.last=E=E?E.next:S.state.first)?(S.target=null,l(void 0,!0)):l(_==="keys"?E.key:_==="values"?E.value:[E.key,E.value],!1)},y?"entries":"values",!y,!0),c(v)}},_T}var lG;function hMe(){if(lG)return KK;lG=1;var t=l$(),e=Tae();return t("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),KK}var cG;function fMe(){return cG||(cG=1,hMe()),WK}var uG={},ET,dG;function Oae(){return dG||(dG=1,ET=function(t,e){return e===1?function(r,n){return r[t](n)}:function(r,n,i){return r[t](n,i)}}),ET}var NT,hG;function pMe(){if(hG)return NT;hG=1;var t=Si(),e=Oae(),r=t("Map");return NT={Map:r,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:r.prototype},NT}var fG;function mMe(){if(fG)return uG;fG=1;var t=Ie(),e=lt(),r=Vo(),n=zo(),i=Eb(),s=pMe(),o=Sh(),a=nt(),l=s.Map,c=s.has,d=s.get,h=s.set,f=e([].push),p=o||a(function(){return l.groupBy("ab",function(m){return m}).get("a").length!==1});return t({target:"Map",stat:!0,forced:o||p},{groupBy:function(g,v){n(g),r(v);var y=new l,b=0;return i(g,function(w){var x=v(w,b++);c(y,x)?f(d(y,x),w):h(y,x,[w])}),y}}),uG}var pG={},CT,mG;function gMe(){if(mG)return CT;mG=1;var t=lt(),e=Nh(),r=Yi(),n=zo(),i=t("".charAt),s=t("".charCodeAt),o=t("".slice),a=function(l){return function(c,d){var h=r(n(c)),f=e(d),p=h.length,m,g;return f<0||f>=p?l?"":void 0:(m=s(h,f),m<55296||m>56319||f+1===p||(g=s(h,f+1))<56320||g>57343?l?i(h,f):m:l?o(h,f,f+2):(m-55296<<10)+(g-56320)+65536)}};return CT={codeAt:a(!1),charAt:a(!0)},CT}var gG;function u$(){if(gG)return pG;gG=1;var t=gMe().charAt,e=Yi(),r=su(),n=KA(),i=GA(),s="String Iterator",o=r.set,a=r.getterFor(s);return n(String,"String",function(l){o(this,{type:s,string:e(l),index:0})},function(){var c=a(this),d=c.string,h=c.index,f;return h>=d.length?i(void 0,!0):(f=t(d,h),c.index+=f.length,i(f,!1))}),pG}var kT,yG;function yMe(){if(yG)return kT;yG=1,Oh(),fMe(),mMe(),u$();var t=Nt();return kT=t.Map,kT}var TT,vG;function vMe(){if(vG)return TT;vG=1;var t=yMe();return jh(),TT=t,TT}var OT,bG;function bMe(){return bG||(bG=1,OT=vMe()),OT}var xMe=bMe(),d$=ze(xMe);class wMe{constructor(){this.clear(),this._defaultIndex=0,this._groupIndex=0,this._defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},_r(this.options,this.defaultOptions)}setOptions(e){const r=["useDefaultGroups"];if(e!==void 0){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&wt(r).call(r,n)===-1){const i=e[n];this.add(n,i)}}}clear(){this._groups=new d$,this._groupNames=[]}get(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this._groups.get(e);if(n===void 0&&r)if(this.options.useDefaultGroups===!1&&this._groupNames.length>0){const i=this._groupIndex%this._groupNames.length;++this._groupIndex,n={},n.color=this._groups.get(this._groupNames[i]),this._groups.set(e,n)}else{const i=this._defaultIndex%this._defaultGroups.length;this._defaultIndex++,n={},n.color=this._defaultGroups[i],this._groups.set(e,n)}return n}add(e,r){return this._groups.has(e)||this._groupNames.push(e),this._groups.set(e,r),r}}var xG={},wG;function SMe(){if(wG)return xG;wG=1;var t=Ie();return t({target:"Number",stat:!0},{isNaN:function(r){return r!==r}}),xG}var jT,SG;function _Me(){if(SG)return jT;SG=1,SMe();var t=Nt();return jT=t.Number.isNaN,jT}var PT,_G;function EMe(){if(_G)return PT;_G=1;var t=_Me();return PT=t,PT}var IT,EG;function NMe(){return EG||(EG=1,IT=EMe()),IT}var CMe=NMe(),eR=ze(CMe),NG={},RT,CG;function kMe(){if(CG)return RT;CG=1;var t=Ut(),e=t.isFinite;return RT=Number.isFinite||function(n){return typeof n=="number"&&e(n)},RT}var kG;function TMe(){if(kG)return NG;kG=1;var t=Ie(),e=kMe();return t({target:"Number",stat:!0},{isFinite:e}),NG}var MT,TG;function OMe(){if(TG)return MT;TG=1,TMe();var t=Nt();return MT=t.Number.isFinite,MT}var AT,OG;function jMe(){if(OG)return AT;OG=1;var t=OMe();return AT=t,AT}var $T,jG;function PMe(){return jG||(jG=1,$T=jMe()),$T}var IMe=PMe(),Vl=ze(IMe),PG={},IG;function RMe(){if(IG)return PG;IG=1;var t=Ie(),e=vl().some,r=Ph(),n=r("some");return t({target:"Array",proto:!0,forced:!n},{some:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),PG}var DT,RG;function MMe(){if(RG)return DT;RG=1,RMe();var t=ln();return DT=t("Array","some"),DT}var FT,MG;function AMe(){if(MG)return FT;MG=1;var t=Or(),e=MMe(),r=Array.prototype;return FT=function(n){var i=n.some;return n===r||t(r,n)&&i===r.some?e:i},FT}var qT,AG;function $Me(){if(AG)return qT;AG=1;var t=AMe();return qT=t,qT}var LT,$G;function DMe(){return $G||($G=1,LT=$Me()),LT}var FMe=DMe(),qMe=ze(FMe),BT={exports:{}},DG={},FG;function LMe(){if(FG)return DG;FG=1;var t=Ie(),e=vr(),r=Gi().f;return t({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!e},{defineProperty:r}),DG}var qG;function BMe(){if(qG)return BT.exports;qG=1,LMe();var t=Nt(),e=t.Object,r=BT.exports=function(i,s,o){return e.defineProperty(i,s,o)};return e.defineProperty.sham&&(r.sham=!0),BT.exports}var zT,LG;function jae(){if(LG)return zT;LG=1;var t=BMe();return zT=t,zT}var VT,BG;function zMe(){if(BG)return VT;BG=1;var t=jae();return VT=t,VT}var UT,zG;function VMe(){if(zG)return UT;zG=1;var t=zMe();return UT=t,UT}var HT,VG;function UMe(){return VG||(VG=1,HT=VMe()),HT}var HMe=UMe(),WMe=ze(HMe),UG={},HG;function KMe(){if(HG)return UG;HG=1;var t=jr(),e=Gi().f,r=t("metadata"),n=Function.prototype;return n[r]===void 0&&e(n,r,{value:null}),UG}var WG={},KG;function GMe(){return KG||(KG=1,Ioe()),WG}var GG={},YG;function YMe(){return YG||(YG=1,Roe()),GG}var QG={},XG;function QMe(){if(XG)return QG;XG=1;var t=Zt();return t("metadata"),QG}var WT,JG;function XMe(){if(JG)return WT;JG=1;var t=Foe();return KMe(),GMe(),YMe(),QMe(),WT=t,WT}var ZG={},KT,eY;function Pae(){if(eY)return KT;eY=1;var t=Si(),e=lt(),r=t("Symbol"),n=r.keyFor,i=e(r.prototype.valueOf);return KT=r.isRegisteredSymbol||function(o){try{return n(i(o))!==void 0}catch{return!1}},KT}var tY;function JMe(){if(tY)return ZG;tY=1;var t=Ie(),e=Pae();return t({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),ZG}var rY={},GT,nY;function Iae(){if(nY)return GT;nY=1;for(var t=_h(),e=Si(),r=lt(),n=km(),i=jr(),s=e("Symbol"),o=s.isWellKnownSymbol,a=e("Object","getOwnPropertyNames"),l=r(s.prototype.valueOf),c=t("wks"),d=0,h=a(s),f=h.length;d<f;d++)try{var p=h[d];n(s[p])&&i(p)}catch{}return GT=function(g){if(o&&o(g))return!0;try{for(var v=l(g),y=0,b=a(c),w=b.length;y<w;y++)if(c[b[y]]==v)return!0}catch{}return!1},GT}var iY;function ZMe(){if(iY)return rY;iY=1;var t=Ie(),e=Iae();return t({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),rY}var sY={},oY;function eAe(){if(oY)return sY;oY=1;var t=Zt();return t("customMatcher"),sY}var aY={},lY;function tAe(){if(lY)return aY;lY=1;var t=Zt();return t("observable"),aY}var cY={},uY;function rAe(){if(uY)return cY;uY=1;var t=Ie(),e=Pae();return t({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),cY}var dY={},hY;function nAe(){if(hY)return dY;hY=1;var t=Ie(),e=Iae();return t({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),dY}var fY={},pY;function iAe(){if(pY)return fY;pY=1;var t=Zt();return t("matcher"),fY}var mY={},gY;function sAe(){if(gY)return mY;gY=1;var t=Zt();return t("metadataKey"),mY}var yY={},vY;function oAe(){if(vY)return yY;vY=1;var t=Zt();return t("patternMatch"),yY}var bY={},xY;function aAe(){if(xY)return bY;xY=1;var t=Zt();return t("replaceAll"),bY}var YT,wY;function lAe(){if(wY)return YT;wY=1;var t=XMe();return JMe(),ZMe(),eAe(),tAe(),rAe(),nAe(),iAe(),sAe(),oAe(),aAe(),YT=t,YT}var QT,SY;function cAe(){return SY||(SY=1,QT=lAe()),QT}var uAe=cAe(),Dg=ze(uAe),XT,_Y;function dAe(){if(_Y)return XT;_Y=1,Oh(),u$(),Moe();var t=vb();return XT=t.f("iterator"),XT}var JT,EY;function hAe(){if(EY)return JT;EY=1;var t=dAe();return jh(),JT=t,JT}var ZT,NY;function fAe(){if(NY)return ZT;NY=1;var t=hAe();return ZT=t,ZT}var eO,CY;function pAe(){if(CY)return eO;CY=1;var t=fAe();return eO=t,eO}var tO,kY;function mAe(){return kY||(kY=1,tO=pAe()),tO}var gAe=mAe(),yAe=ze(gAe);function Mp(t){"@babel/helpers - typeof";return Mp=typeof Dg=="function"&&typeof yAe=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Dg=="function"&&e.constructor===Dg&&e!==Dg.prototype?"symbol":typeof e},Mp(t)}var rO,TY;function vAe(){if(TY)return rO;TY=1,Aoe();var t=vb();return rO=t.f("toPrimitive"),rO}var nO,OY;function bAe(){if(OY)return nO;OY=1;var t=vAe();return nO=t,nO}var iO,jY;function xAe(){if(jY)return iO;jY=1;var t=bAe();return iO=t,iO}var sO,PY;function wAe(){if(PY)return sO;PY=1;var t=xAe();return sO=t,sO}var oO,IY;function SAe(){return IY||(IY=1,oO=wAe()),oO}var _Ae=SAe(),EAe=ze(_Ae);function NAe(t,e){if(Mp(t)!="object"||!t)return t;var r=t[EAe];if(r!==void 0){var n=r.call(t,e);if(Mp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function CAe(t){var e=NAe(t,"string");return Mp(e)=="symbol"?e:e+""}function fo(t,e,r){return(e=CAe(e))in t?WMe(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var RY={},aO,MY;function kAe(){if(MY)return aO;MY=1;var t=Ut(),e=nt(),r=lt(),n=Yi(),i=Loe().trim,s=YA(),o=r("".charAt),a=t.parseFloat,l=t.Symbol,c=l&&l.iterator,d=1/a(s+"-0")!==-1/0||c&&!e(function(){a(Object(c))});return aO=d?function(f){var p=i(n(f)),m=a(p);return m===0&&o(p,0)==="-"?-0:m}:a,aO}var AY;function TAe(){if(AY)return RY;AY=1;var t=Ie(),e=kAe();return t({global:!0,forced:parseFloat!==e},{parseFloat:e}),RY}var lO,$Y;function OAe(){if($Y)return lO;$Y=1,TAe();var t=Nt();return lO=t.parseFloat,lO}var cO,DY;function jAe(){if(DY)return cO;DY=1;var t=OAe();return cO=t,cO}var uO,FY;function PAe(){return FY||(FY=1,uO=jAe()),uO}var IAe=PAe(),Rae=ze(IAe),qY={},LY;function RAe(){if(LY)return qY;LY=1;var t=Ie(),e=nt(),r=UA().f,n=e(function(){return!Object.getOwnPropertyNames(1)});return t({target:"Object",stat:!0,forced:n},{getOwnPropertyNames:r}),qY}var dO,BY;function MAe(){if(BY)return dO;BY=1,RAe();var t=Nt(),e=t.Object;return dO=function(n){return e.getOwnPropertyNames(n)},dO}var hO,zY;function AAe(){if(zY)return hO;zY=1;var t=MAe();return hO=t,hO}var fO,VY;function $Ae(){return VY||(VY=1,fO=AAe()),fO}var DAe=$Ae(),FAe=ze(DAe),pO,UY;function qAe(){if(UY)return pO;UY=1,Poe();var t=Nt();return pO=t.Object.getOwnPropertySymbols,pO}var mO,HY;function LAe(){if(HY)return mO;HY=1;var t=qAe();return mO=t,mO}var gO,WY;function BAe(){return WY||(WY=1,gO=LAe()),gO}var zAe=BAe(),sl=ze(zAe),yO={exports:{}},KY={},GY;function VAe(){if(GY)return KY;GY=1;var t=Ie(),e=nt(),r=bs(),n=db().f,i=vr(),s=!i||e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getOwnPropertyDescriptor:function(a,l){return n(r(a),l)}}),KY}var YY;function UAe(){if(YY)return yO.exports;YY=1,VAe();var t=Nt(),e=t.Object,r=yO.exports=function(i,s){return e.getOwnPropertyDescriptor(i,s)};return e.getOwnPropertyDescriptor.sham&&(r.sham=!0),yO.exports}var vO,QY;function HAe(){if(QY)return vO;QY=1;var t=UAe();return vO=t,vO}var bO,XY;function WAe(){return XY||(XY=1,bO=HAe()),bO}var KAe=WAe(),bl=ze(KAe),JY={},ZY;function GAe(){if(ZY)return JY;ZY=1;var t=Ie(),e=vr(),r=bje(),n=bs(),i=db(),s=mb();return t({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(a){for(var l=n(a),c=i.f,d=r(l),h={},f=0,p,m;d.length>f;)m=c(l,p=d[f++]),m!==void 0&&s(h,p,m);return h}}),JY}var xO,eQ;function YAe(){if(eQ)return xO;eQ=1,GAe();var t=Nt();return xO=t.Object.getOwnPropertyDescriptors,xO}var wO,tQ;function QAe(){if(tQ)return wO;tQ=1;var t=YAe();return wO=t,wO}var SO,rQ;function XAe(){return rQ||(rQ=1,SO=QAe()),SO}var JAe=XAe(),ol=ze(JAe),_O={exports:{}},nQ={},iQ;function ZAe(){if(iQ)return nQ;iQ=1;var t=Ie(),e=vr(),r=VA().f;return t({target:"Object",stat:!0,forced:Object.defineProperties!==r,sham:!e},{defineProperties:r}),nQ}var sQ;function e$e(){if(sQ)return _O.exports;sQ=1,ZAe();var t=Nt(),e=t.Object,r=_O.exports=function(i,s){return e.defineProperties(i,s)};return e.defineProperties.sham&&(r.sham=!0),_O.exports}var EO,oQ;function t$e(){if(oQ)return EO;oQ=1;var t=e$e();return EO=t,EO}var NO,aQ;function r$e(){return aQ||(aQ=1,NO=t$e()),NO}var n$e=r$e(),Nb=ze(n$e),CO,lQ;function i$e(){return lQ||(lQ=1,CO=jae()),CO}var s$e=i$e(),Cb=ze(s$e);function h$(t,e){const r=["node","edge","label"];let n=!0;const i=aa(e,"chosen");if(typeof i=="boolean")n=i;else if(typeof i=="object"){if(wt(r).call(r,t)===-1)throw new Error("choosify: subOption '"+t+"' should be one of '"+r.join("', '")+"'");const s=aa(e,["chosen",t]);(typeof s=="boolean"||typeof s=="function")&&(n=s)}return n}function tR(t,e,r){if(t.width<=0||t.height<=0)return!1;if(r!==void 0){const s={x:e.x-r.x,y:e.y-r.y};if(r.angle!==0){const o=-r.angle;e={x:Math.cos(o)*s.x-Math.sin(o)*s.y,y:Math.sin(o)*s.x+Math.cos(o)*s.y}}else e=s}const n=t.x+t.width,i=t.y+t.width;return t.left<e.x&&n>e.x&&t.top<e.y&&i>e.y}function Qv(t){return typeof t=="string"&&t!==""}function Mae(t,e,r,n){let i=n.x,s=n.y;if(typeof n.distanceToBorder=="function"){const o=n.distanceToBorder(t,e),a=Math.sin(e)*o,l=Math.cos(e)*o;l===o?(i+=o,s=n.y):a===o?(i=n.x,s-=o):(i+=l,s-=a)}else n.shape.width>n.shape.height?(i=n.x+n.shape.width*.5,s=n.y-r):(i=n.x+r,s=n.y-n.shape.height*.5);return{x:i,y:s}}var kO,cQ;function o$e(){if(cQ)return kO;cQ=1,Oh();var t=ln();return kO=t("Array","values"),kO}var TO,uQ;function a$e(){if(uQ)return TO;uQ=1;var t=o$e();return TO=t,TO}var OO,dQ;function l$e(){if(dQ)return OO;dQ=1,jh();var t=kh(),e=an(),r=Or(),n=a$e(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return OO=function(o){var a=o.values;return o===i||r(i,o)&&a===i.values||e(s,t(o))?n:a},OO}var jO,hQ;function c$e(){return hQ||(hQ=1,jO=l$e()),jO}var u$e=c$e(),Aae=ze(u$e);class d$e{constructor(e){this.measureText=e,this.current=0,this.width=0,this.height=0,this.lines=[]}_add(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"normal";this.lines[e]===void 0&&(this.lines[e]={width:0,height:0,blocks:[]});let i=r;(r===void 0||r==="")&&(i=" ");const s=this.measureText(i,n),o=_r({},Aae(s));o.text=r,o.width=s.width,o.mod=n,(r===void 0||r==="")&&(o.width=0),this.lines[e].blocks.push(o),this.lines[e].width+=o.width}curWidth(){const e=this.lines[this.current];return e===void 0?0:e.width}append(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,r)}newLine(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,r),this.current++}determineLineHeights(){for(let e=0;e<this.lines.length;e++){const r=this.lines[e];let n=0;if(r.blocks!==void 0)for(let i=0;i<r.blocks.length;i++){const s=r.blocks[i];n<s.height&&(n=s.height)}r.height=n}}determineLabelSize(){let e=0,r=0;for(let n=0;n<this.lines.length;n++){const i=this.lines[n];i.width>e&&(e=i.width),r+=i.height}this.width=e,this.height=r}removeEmptyBlocks(){const e=[];for(let r=0;r<this.lines.length;r++){const n=this.lines[r];if(n.blocks.length===0||r===this.lines.length-1&&n.width===0)continue;const i={};_r(i,n),i.blocks=[];let s;const o=[];for(let a=0;a<n.blocks.length;a++){const l=n.blocks[a];l.width!==0?o.push(l):s===void 0&&(s=l)}o.length===0&&s!==void 0&&o.push(s),i.blocks=o,e.push(i)}return e}finalize(){this.determineLineHeights(),this.determineLabelSize();const e=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:e}}}const h$e={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/_/,"`":/`/,afterBold:/[^*]/,afterItal:/[^_]/,afterMono:/[^`]/};class fQ{constructor(e){this.text=e,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}mod(){return this.modStack.length===0?"normal":this.modStack[0]}modName(){if(this.modStack.length===0)return"normal";if(this.modStack[0]==="mono")return"mono";if(this.bold&&this.ital)return"boldital";if(this.bold)return"bold";if(this.ital)return"ital"}emitBlock(){this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}add(e){e===" "&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1),e!=" "&&(this.buffer+=e)}parseWS(e){return/[ \t]/.test(e)?(this.mono?this.add(e):this.spacing=!0,!0):!1}setTag(e){this.emitBlock(),this[e]=!0,this.modStack.unshift(e)}unsetTag(e){this.emitBlock(),this[e]=!1,this.modStack.shift()}parseStartTag(e,r){return!this.mono&&!this[e]&&this.match(r)?(this.setTag(e),!0):!1}match(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const[n,i]=this.prepareRegExp(e),s=n.test(this.text.substr(this.position,i));return s&&r&&(this.position+=i-1),s}parseEndTag(e,r,n){let i=this.mod()===e;return e==="mono"?i=i&&this.mono:i=i&&!this.mono,i&&this.match(r)?(n!==void 0?(this.position===this.text.length-1||this.match(n,!1))&&this.unsetTag(e):this.unsetTag(e),!0):!1}replace(e,r){return this.match(e)?(this.add(r),this.position+=length-1,!0):!1}prepareRegExp(e){let r,n;if(e instanceof RegExp)n=e,r=1;else{const i=h$e[e];i!==void 0?n=i:n=new RegExp(e),r=e.length}return[n,r]}}class f$e{constructor(e,r,n,i){this.ctx=e,this.parent=r,this.selected=n,this.hover=i;const s=(o,a)=>{if(o===void 0)return 0;const l=this.parent.getFormattingValues(e,n,i,a);let c=0;return o!==""&&(c=this.ctx.measureText(o).width),{width:c,values:l}};this.lines=new d$e(s)}process(e){if(!Qv(e))return this.lines.finalize();const r=this.parent.fontOptions;e=e.replace(/\r\n/g,`
`),e=e.replace(/\r/g,`
`);const n=String(e).split(`
`),i=n.length;if(r.multi)for(let s=0;s<i;s++){const o=this.splitBlocks(n[s],r.multi);if(o!==void 0){if(o.length===0){this.lines.newLine("");continue}if(r.maxWdt>0)for(let a=0;a<o.length;a++){const l=o[a].mod,c=o[a].text;this.splitStringIntoLines(c,l,!0)}else for(let a=0;a<o.length;a++){const l=o[a].mod,c=o[a].text;this.lines.append(c,l)}this.lines.newLine()}}else if(r.maxWdt>0)for(let s=0;s<i;s++)this.splitStringIntoLines(n[s]);else for(let s=0;s<i;s++)this.lines.newLine(n[s]);return this.lines.finalize()}decodeMarkupSystem(e){let r="none";return e==="markdown"||e==="md"?r="markdown":(e===!0||e==="html")&&(r="html"),r}splitHtmlBlocks(e){const r=new fQ(e),n=i=>/&/.test(i)?(r.replace(r.text,"&lt;","<")||r.replace(r.text,"&amp;","&")||r.add("&"),!0):!1;for(;r.position<r.text.length;){const i=r.text.charAt(r.position);r.parseWS(i)||/</.test(i)&&(r.parseStartTag("bold","<b>")||r.parseStartTag("ital","<i>")||r.parseStartTag("mono","<code>")||r.parseEndTag("bold","</b>")||r.parseEndTag("ital","</i>")||r.parseEndTag("mono","</code>"))||n(i)||r.add(i),r.position++}return r.emitBlock(),r.blocks}splitMarkdownBlocks(e){const r=new fQ(e);let n=!0;const i=s=>/\\/.test(s)?(r.position<this.text.length+1&&(r.position++,s=this.text.charAt(r.position),/ \t/.test(s)?r.spacing=!0:(r.add(s),n=!1)),!0):!1;for(;r.position<r.text.length;){const s=r.text.charAt(r.position);r.parseWS(s)||i(s)||(n||r.spacing)&&(r.parseStartTag("bold","*")||r.parseStartTag("ital","_")||r.parseStartTag("mono","`"))||r.parseEndTag("bold","*","afterBold")||r.parseEndTag("ital","_","afterItal")||r.parseEndTag("mono","`","afterMono")||(r.add(s),n=!1),r.position++}return r.emitBlock(),r.blocks}splitBlocks(e,r){const n=this.decodeMarkupSystem(r);if(n==="none")return[{text:e,mod:"normal"}];if(n==="markdown")return this.splitMarkdownBlocks(e);if(n==="html")return this.splitHtmlBlocks(e)}overMaxWidth(e){const r=this.ctx.measureText(e).width;return this.lines.curWidth()+r>this.parent.fontOptions.maxWdt}getLongestFit(e){let r="",n=0;for(;n<e.length;){const s=r+(r===""?"":" ")+e[n];if(this.overMaxWidth(s))break;r=s,n++}return n}getLongestFitWord(e){let r=0;for(;r<e.length&&!this.overMaxWidth(Is(e).call(e,0,r));)r++;return r}splitStringIntoLines(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.parent.getFormattingValues(this.ctx,this.selected,this.hover,r),e=e.replace(/^( +)/g,"$1\r"),e=e.replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r");let i=e.split("\r");for(;i.length>0;){let s=this.getLongestFit(i);if(s===0){const o=i[0],a=this.getLongestFitWord(o);this.lines.newLine(Is(o).call(o,0,a),r),i[0]=Is(o).call(o,a)}else{let o=s;i[s-1]===" "?s--:i[o]===" "&&o++;const a=Is(i).call(i,0,s).join("");s==i.length&&n?this.lines.append(a,r):this.lines.newLine(a,r),i=Is(i).call(i,o)}}}}const sf=["bold","ital","boldital","mono"];class od{constructor(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.body=e,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(r),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=n}setOptions(e){if(this.elementOptions=e,this.initFontOptions(e.font),Qv(e.label)?this.labelDirty=!0:e.label=void 0,e.font!==void 0&&e.font!==null){if(typeof e.font=="string")this.baseSize=this.fontOptions.size;else if(typeof e.font=="object"){const r=e.font.size;r!==void 0&&(this.baseSize=r)}}}initFontOptions(e){if(et(sf,r=>{this.fontOptions[r]={}}),od.parseFontString(this.fontOptions,e)){this.fontOptions.vadjust=0;return}et(e,(r,n)=>{r!=null&&typeof r!="object"&&(this.fontOptions[n]=r)})}static parseFontString(e,r){if(!r||typeof r!="string")return!1;const n=r.split(" ");return e.size=+n[0].replace("px",""),e.face=n[1],e.color=n[2],!0}constrain(e){const r={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},n=aa(e,"widthConstraint");if(typeof n=="number")r.maxWdt=Number(n),r.minWdt=Number(n);else if(typeof n=="object"){const s=aa(e,["widthConstraint","maximum"]);typeof s=="number"&&(r.maxWdt=Number(s));const o=aa(e,["widthConstraint","minimum"]);typeof o=="number"&&(r.minWdt=Number(o))}const i=aa(e,"heightConstraint");if(typeof i=="number")r.minHgt=Number(i);else if(typeof i=="object"){const s=aa(e,["heightConstraint","minimum"]);typeof s=="number"&&(r.minHgt=Number(s));const o=aa(e,["heightConstraint","valign"]);typeof o=="string"&&(o==="top"||o==="bottom")&&(r.valign=o)}return r}update(e,r){this.setOptions(e,!0),this.propagateFonts(r),It(this.fontOptions,this.constrain(r)),this.fontOptions.chooser=h$("label",r)}adjustSizes(e){const r=e?e.right+e.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=r,this.fontOptions.minWdt-=r);const n=e?e.top+e.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=n)}addFontOptionsToPile(e,r){for(let n=0;n<r.length;++n)this.addFontToPile(e,r[n])}addFontToPile(e,r){if(r===void 0||r.font===void 0||r.font===null)return;const n=r.font;e.push(n)}getBasicOptions(e){const r={};for(let n=0;n<e.length;++n){let i=e[n];const s={};od.parseFontString(s,i)&&(i=s),et(i,(o,a)=>{o!==void 0&&(Object.prototype.hasOwnProperty.call(r,a)||(wt(sf).call(sf,a)!==-1?r[a]={}:r[a]=o))})}return r}getFontOption(e,r,n){let i;for(let s=0;s<e.length;++s){const o=e[s];if(Object.prototype.hasOwnProperty.call(o,r)){if(i=o[r],i==null)continue;const a={};if(od.parseFontString(a,i)&&(i=a),Object.prototype.hasOwnProperty.call(i,n))return i[n]}}if(Object.prototype.hasOwnProperty.call(this.fontOptions,n))return this.fontOptions[n];throw new Error("Did not find value for multi-font for property: '"+n+"'")}getFontOptions(e,r){const n={},i=["color","size","face","mod","vadjust"];for(let s=0;s<i.length;++s){const o=i[s];n[o]=this.getFontOption(e,r,o)}return n}propagateFonts(e){const r=[];this.addFontOptionsToPile(r,e),this.fontOptions=this.getBasicOptions(r);for(let n=0;n<sf.length;++n){const i=sf[n],s=this.fontOptions[i],o=this.getFontOptions(r,i);et(o,(a,l)=>{s[l]=a}),s.size=Number(s.size),s.vadjust=Number(s.vadjust)}}draw(e,r,n,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";if(this.elementOptions.label===void 0)return;let a=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&a<this.elementOptions.scaling.label.drawThreshold-1||(a>=this.elementOptions.scaling.label.maxVisible&&(a=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(e,i,s,r,n,o),this._drawBackground(e),this._drawText(e,r,this.size.yLine,o,a))}_drawBackground(e){if(this.fontOptions.background!==void 0&&this.fontOptions.background!=="none"){e.fillStyle=this.fontOptions.background;const r=this.getSize();e.fillRect(r.left,r.top,r.width,r.height)}}_drawText(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"middle",s=arguments.length>4?arguments[4]:void 0;[r,n]=this._setAlignment(e,r,n,i),e.textAlign="left",r=r-this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&(this.fontOptions.valign==="top"&&(n-=(this.size.height-this.size.labelHeight)/2),this.fontOptions.valign==="bottom"&&(n+=(this.size.height-this.size.labelHeight)/2));for(let o=0;o<this.lineCount;o++){const a=this.lines[o];if(a&&a.blocks){let l=0;this.isEdgeLabel||this.fontOptions.align==="center"?l+=(this.size.width-a.width)/2:this.fontOptions.align==="right"&&(l+=this.size.width-a.width);for(let c=0;c<a.blocks.length;c++){const d=a.blocks[c];e.font=d.font;const[h,f]=this._getColor(d.color,s,d.strokeColor);d.strokeWidth>0&&(e.lineWidth=d.strokeWidth,e.strokeStyle=f,e.lineJoin="round"),e.fillStyle=h,d.strokeWidth>0&&e.strokeText(d.text,r+l,n+d.vadjust),e.fillText(d.text,r+l,n+d.vadjust),l+=d.width}n+=a.height}}}_setAlignment(e,r,n,i){if(this.isEdgeLabel&&this.fontOptions.align!=="horizontal"&&this.pointToSelf===!1){r=0,n=0;const s=2;this.fontOptions.align==="top"?(e.textBaseline="alphabetic",n-=2*s):this.fontOptions.align==="bottom"?(e.textBaseline="hanging",n+=2*s):e.textBaseline="middle"}else e.textBaseline=i;return[r,n]}_getColor(e,r,n){let i=e||"#000000",s=n||"#ffffff";if(r<=this.elementOptions.scaling.label.drawThreshold){const o=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-r)));i=$i(i,o),s=$i(s,o)}return[i,s]}getTextSize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this._processLabel(e,r,n),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}getSize(){let r=this.size.left,n=this.size.top-.5*2;if(this.isEdgeLabel){const s=-this.size.width*.5;switch(this.fontOptions.align){case"middle":r=s,n=-this.size.height*.5;break;case"top":r=s,n=-(this.size.height+2);break;case"bottom":r=s,n=2;break}}return{left:r,top:n,width:this.size.width,height:this.size.height}}calculateLabelSize(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";this._processLabel(e,r,n),this.size.left=i-this.size.width*.5,this.size.top=s-this.size.height*.5,this.size.yLine=s+(1-this.lineCount)*.5*this.fontOptions.size,o==="hanging"&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}getFormattingValues(e,r,n,i){const s=function(l,c,d){return c==="normal"?d==="mod"?"":l[d]:l[c][d]!==void 0?l[c][d]:l[d]},o={color:s(this.fontOptions,i,"color"),size:s(this.fontOptions,i,"size"),face:s(this.fontOptions,i,"face"),mod:s(this.fontOptions,i,"mod"),vadjust:s(this.fontOptions,i,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(r||n)&&(i==="normal"&&this.fontOptions.chooser===!0&&this.elementOptions.labelHighlightBold?o.mod="bold":typeof this.fontOptions.chooser=="function"&&this.fontOptions.chooser(o,this.elementOptions.id,r,n));let a="";return o.mod!==void 0&&o.mod!==""&&(a+=o.mod+" "),a+=o.size+"px "+o.face,e.font=a.replace(/"/g,""),o.font=e.font,o.height=o.size,o}differentState(e,r){return e!==this.selectedState||r!==this.hoverState}_processLabelText(e,r,n,i){return new f$e(e,this,r,n).process(i)}_processLabel(e,r,n){if(this.labelDirty===!1&&!this.differentState(r,n))return;const i=this._processLabelText(e,r,n,this.elementOptions.label);this.fontOptions.minWdt>0&&i.width<this.fontOptions.minWdt&&(i.width=this.fontOptions.minWdt),this.size.labelHeight=i.height,this.fontOptions.minHgt>0&&i.height<this.fontOptions.minHgt&&(i.height=this.fontOptions.minHgt),this.lines=i.lines,this.lineCount=i.lines.length,this.size.width=i.width,this.size.height=i.height,this.selectedState=r,this.hoverState=n,this.labelDirty=!1}visible(){return!(this.size.width===0||this.size.height===0||this.elementOptions.label===void 0||this.fontOptions.size*this.body.view.scale<this.elementOptions.scaling.label.drawThreshold-1)}}class au{constructor(e,r,n){this.body=r,this.labelModule=n,this.setOptions(e),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}setOptions(e){this.options=e}_setMargins(e){this.margin={},this.options.margin&&(typeof this.options.margin=="object"?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),e.adjustSizes(this.margin)}_distanceToBorder(e,r){const n=this.options.borderWidth;return e&&this.resize(e),Math.min(Math.abs(this.width/2/Math.cos(r)),Math.abs(this.height/2/Math.sin(r)))+n}enableShadow(e,r){r.shadow&&(e.shadowColor=r.shadowColor,e.shadowBlur=r.shadowSize,e.shadowOffsetX=r.shadowX,e.shadowOffsetY=r.shadowY)}disableShadow(e,r){r.shadow&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}enableBorderDashes(e,r){if(r.borderDashes!==!1)if(e.setLineDash!==void 0){let n=r.borderDashes;n===!0&&(n=[5,15]),e.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,r.borderDashes=!1}disableBorderDashes(e,r){r.borderDashes!==!1&&(e.setLineDash!==void 0?e.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,r.borderDashes=!1))}needsRefresh(e,r){return this.refreshNeeded===!0?(this.refreshNeeded=!1,!0):this.width===void 0||this.labelModule.differentState(e,r)}initContextForDraw(e,r){const n=r.borderWidth/this.body.view.scale;e.lineWidth=Math.min(this.width,n),e.strokeStyle=r.borderColor,e.fillStyle=r.color}performStroke(e,r){const n=r.borderWidth/this.body.view.scale;e.save(),n>0&&(this.enableBorderDashes(e,r),e.stroke(),this.disableBorderDashes(e,r)),e.restore()}performFill(e,r){e.save(),e.fillStyle=r.color,this.enableShadow(e,r),Mm(e).call(e),this.disableShadow(e,r),e.restore(),this.performStroke(e,r)}_addBoundingBoxMargin(e){this.boundingBox.left-=e,this.boundingBox.top-=e,this.boundingBox.bottom+=e,this.boundingBox.right+=e}_updateBoundingBox(e,r,n,i,s){n!==void 0&&this.resize(n,i,s),this.left=e-this.width/2,this.top=r-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}updateBoundingBox(e,r,n,i,s){this._updateBoundingBox(e,r,n,i,s)}getDimensionsFromLabel(e,r,n){this.textSize=this.labelModule.getTextSize(e,r,n);let i=this.textSize.width,s=this.textSize.height;const o=14;return i===0&&(i=o,s=o),{width:i,height:s}}}let p$e=class extends au{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n);this.width=i.width+this.margin.right+this.margin.left,this.height=i.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.initContextForDraw(e,o),xoe(e,this.left,this.top,this.width,this.height,o.borderRadius),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s)}updateBoundingBox(e,r,n,i,s){this._updateBoundingBox(e,r,n,i,s);const o=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(o)}distanceToBorder(e,r){e&&this.resize(e);const n=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(r)),Math.abs(this.height/2/Math.sin(r)))+n}};class f$ extends au{constructor(e,r,n){super(e,r,n),this.labelOffset=0,this.selected=!1}setOptions(e,r,n){this.options=e,r===void 0&&n===void 0||this.setImages(r,n)}setImages(e,r){r&&this.selected?(this.imageObj=r,this.imageObjAlt=e):(this.imageObj=e,this.imageObjAlt=r)}switchImages(e){const r=e&&!this.selected||!e&&this.selected;if(this.selected=e,this.imageObjAlt!==void 0&&r){const n=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=n}}_getImagePadding(){const e={top:0,right:0,bottom:0,left:0};if(this.options.imagePadding){const r=this.options.imagePadding;typeof r=="object"?(e.top=r.top,e.right=r.right,e.bottom=r.bottom,e.left=r.left):(e.top=r,e.right=r,e.bottom=r,e.left=r)}return e}_resizeImage(){let e,r;if(this.options.shapeProperties.useImageSize===!1){let n=1,i=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?n=this.imageObj.width/this.imageObj.height:i=this.imageObj.height/this.imageObj.width),e=this.options.size*2*n,r=this.options.size*2*i}else{const n=this._getImagePadding();e=this.imageObj.width+n.left+n.right,r=this.imageObj.height+n.top+n.bottom}this.width=e,this.height=r,this.radius=.5*this.width}_drawRawCircle(e,r,n,i){this.initContextForDraw(e,i),LA(e,r,n,i.size),this.performFill(e,i)}_drawImageAtPosition(e,r){if(this.imageObj.width!=0){e.globalAlpha=r.opacity!==void 0?r.opacity:1,this.enableShadow(e,r);let n=1;this.options.shapeProperties.interpolation===!0&&(n=this.imageObj.width/this.width/this.body.view.scale);const i=this._getImagePadding(),s=this.left+i.left,o=this.top+i.top,a=this.width-i.left-i.right,l=this.height-i.top-i.bottom;this.imageObj.drawImageAtPosition(e,n,s,o,a,l),this.disableShadow(e,r)}}_drawImageLabel(e,r,n,i,s){let o=0;if(this.height!==void 0){o=this.height*.5;const l=this.labelModule.getTextSize(e,i,s);l.lineCount>=1&&(o+=l.height/2)}const a=n+o;this.options.label&&(this.labelOffset=o),this.labelModule.draw(e,r,a,i,s,"hanging")}}let m$e=class extends f${constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n),s=Math.max(i.width+this.margin.right+this.margin.left,i.height+this.margin.top+this.margin.bottom);this.options.size=s/2,this.width=s,this.height=s,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this._drawRawCircle(e,r,n,o),this.updateBoundingBox(r,n),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,n,i,s)}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size}distanceToBorder(e){return e&&this.resize(e),this.width*.5}};class g$e extends f${constructor(e,r,n,i,s){super(e,r,n),this.setImages(i,s)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0){const s=this.options.size*2;this.width=s,this.height=s,this.radius=.5*this.width;return}this.needsRefresh(r,n)&&this._resizeImage()}draw(e,r,n,i,s,o){this.switchImages(i),this.resize();let a=r,l=n;this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=r,this.top=n,a+=this.width/2,l+=this.height/2):(this.left=r-this.width/2,this.top=n-this.height/2),this._drawRawCircle(e,a,l,o),e.save(),e.clip(),this._drawImageAtPosition(e,o),e.restore(),this._drawImageLabel(e,a,l,i,s),this.updateBoundingBox(r,n)}updateBoundingBox(e,r){this.options.shapeProperties.coordinateOrigin==="top-left"?(this.boundingBox.top=r,this.boundingBox.left=e,this.boundingBox.right=e+this.options.size*2,this.boundingBox.bottom=r+this.options.size*2):(this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size),this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}distanceToBorder(e){return e&&this.resize(e),this.width*.5}}class xl extends au{constructor(e,r,n){super(e,r,n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{size:this.options.size};if(this.needsRefresh(r,n)){var s,o;this.labelModule.getTextSize(e,r,n);const a=2*i.size;this.width=(s=this.customSizeWidth)!==null&&s!==void 0?s:a,this.height=(o=this.customSizeHeight)!==null&&o!==void 0?o:a,this.radius=.5*this.width}}_drawShape(e,r,n,i,s,o,a,l){return this.resize(e,o,a,l),this.left=i-this.width/2,this.top=s-this.height/2,this.initContextForDraw(e,l),IOe(r)(e,i,s,l.size),this.performFill(e,l),this.options.icon!==void 0&&this.options.icon.code!==void 0&&(e.font=(o?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",e.fillText(this.options.icon.code,i,s)),{drawExternalLabel:()=>{if(this.options.label!==void 0){this.labelModule.calculateLabelSize(e,o,a,i,s,"hanging");const c=s+.5*this.height+.5*this.labelModule.size.height;this.labelModule.draw(e,i,c,o,a,"hanging")}this.updateBoundingBox(i,s)}}}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}function pQ(t,e){var r=ar(t);if(sl){var n=sl(t);e&&(n=Hn(n).call(n,function(i){return bl(t,i).enumerable})),r.push.apply(r,n)}return r}function y$e(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?Ot(r=pQ(Object(i),!0)).call(r,function(s){fo(t,s,i[s])}):ol?Nb(t,ol(i)):Ot(n=pQ(Object(i))).call(n,function(s){Cb(t,s,bl(i,s))})}return t}class v$e extends xl{constructor(e,r,n,i){super(e,r,n,i),this.ctxRenderer=i}draw(e,r,n,i,s,o){this.resize(e,i,s,o),this.left=r-this.width/2,this.top=n-this.height/2,e.save();const a=this.ctxRenderer({ctx:e,id:this.options.id,x:r,y:n,state:{selected:i,hover:s},style:y$e({},o),label:this.options.label});if(a.drawNode!=null&&a.drawNode(),e.restore(),a.drawExternalLabel){const l=a.drawExternalLabel;a.drawExternalLabel=()=>{e.save(),l(),e.restore()}}return a.nodeDimensions&&(this.customSizeWidth=a.nodeDimensions.width,this.customSizeHeight=a.nodeDimensions.height),a}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class b$e extends au{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){if(this.needsRefresh(r,n)){const s=this.getDimensionsFromLabel(e,r,n).width+this.margin.right+this.margin.left;this.width=s,this.height=s,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.initContextForDraw(e,o),woe(e,r-this.width/2,n-this.height/2,this.width,this.height),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let x$e=class extends xl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"diamond",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class w$e extends xl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"circle",2,r,n,i,s,o)}distanceToBorder(e){return e&&this.resize(e),this.options.size}}class mQ extends au{constructor(e,r,n){super(e,r,n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n);this.height=i.height*2,this.width=i.width+i.height,this.radius=.5*this.width}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width*.5,this.top=n-this.height*.5,this.initContextForDraw(e,o),HI(e,this.left,this.top,this.width,this.height),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,r,n,i,s)}distanceToBorder(e,r){e&&this.resize(e);const n=this.width*.5,i=this.height*.5,s=Math.sin(r)*n,o=Math.cos(r)*i;return n*i/Math.sqrt(s*s+o*o)}}class S$e extends au{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){this.needsRefresh(r,n)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}draw(e,r,n,i,s,o){return this.resize(e,i,s),this.options.icon.size=this.options.icon.size||50,this.left=r-this.width/2,this.top=n-this.height/2,this._icon(e,r,n,i,s,o),{drawExternalLabel:()=>{this.options.label!==void 0&&this.labelModule.draw(e,this.left+this.iconSize.width/2+this.margin.left,n+this.height/2+5,i),this.updateBoundingBox(r,n)}}}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.icon.size*.5,this.boundingBox.left=e-this.options.icon.size*.5,this.boundingBox.right=e+this.options.icon.size*.5,this.boundingBox.bottom=r+this.options.icon.size*.5,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+5))}_icon(e,r,n,i,s,o){const a=Number(this.options.icon.size);this.options.icon.code!==void 0?(e.font=[this.options.icon.weight!=null?this.options.icon.weight:i?"bold":"",(this.options.icon.weight!=null&&i?5:0)+a+"px",this.options.icon.face].join(" "),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",this.enableShadow(e,o),e.fillText(this.options.icon.code,r,n),this.disableShadow(e,o)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let _$e=class extends f${constructor(e,r,n,i,s){super(e,r,n),this.setImages(i,s)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0){const s=this.options.size*2;this.width=s,this.height=s;return}this.needsRefresh(r,n)&&this._resizeImage()}draw(e,r,n,i,s,o){e.save(),this.switchImages(i),this.resize();let a=r,l=n;if(this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=r,this.top=n,a+=this.width/2,l+=this.height/2):(this.left=r-this.width/2,this.top=n-this.height/2),this.options.shapeProperties.useBorderWithImage===!0){const c=this.options.borderWidth,d=this.options.borderWidthSelected||2*this.options.borderWidth,h=(i?d:c)/this.body.view.scale;e.lineWidth=Math.min(this.width,h),e.beginPath();let f=i?this.options.color.highlight.border:s?this.options.color.hover.border:this.options.color.border,p=i?this.options.color.highlight.background:s?this.options.color.hover.background:this.options.color.background;o.opacity!==void 0&&(f=$i(f,o.opacity),p=$i(p,o.opacity)),e.strokeStyle=f,e.fillStyle=p,e.rect(this.left-.5*e.lineWidth,this.top-.5*e.lineWidth,this.width+e.lineWidth,this.height+e.lineWidth),Mm(e).call(e),this.performStroke(e,o),e.closePath()}this._drawImageAtPosition(e,o),this._drawImageLabel(e,a,l,i,s),this.updateBoundingBox(r,n),e.restore()}updateBoundingBox(e,r){this.resize(),this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=e,this.top=r):(this.left=e-this.width/2,this.top=r-this.height/2),this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class E$e extends xl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"square",2,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class N$e extends xl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"hexagon",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class C$e extends xl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"star",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class k$e extends au{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){this.needsRefresh(r,n)&&(this.textSize=this.labelModule.getTextSize(e,r,n),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.enableShadow(e,o),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s),this.disableShadow(e,o),this.updateBoundingBox(r,n,e,i,s)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let T$e=class extends xl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"triangle",3,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class O$e extends xl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"triangleDown",3,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}function gQ(t,e){var r=ar(t);if(sl){var n=sl(t);e&&(n=Hn(n).call(n,function(i){return bl(t,i).enumerable})),r.push.apply(r,n)}return r}function yQ(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?Ot(r=gQ(Object(i),!0)).call(r,function(s){fo(t,s,i[s])}):ol?Nb(t,ol(i)):Ot(n=gQ(Object(i))).call(n,function(s){Cb(t,s,bl(i,s))})}return t}class zt{constructor(e,r,n,i,s,o){this.options=Qa(s),this.globalOptions=s,this.defaultOptions=o,this.body=r,this.edges=[],this.id=void 0,this.imagelist=n,this.grouplist=i,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new od(this.body,this.options,!1),this.setOptions(e)}attachEdge(e){var r;wt(r=this.edges).call(r,e)===-1&&this.edges.push(e)}detachEdge(e){var r;const n=wt(r=this.edges).call(r,e);if(n!=-1){var i;wo(i=this.edges).call(i,n,1)}}setOptions(e){const r=this.options.shape;if(!e)return;if(typeof e.color<"u"&&(this._localColor=e.color),e.id!==void 0&&(this.id=e.id),this.id===void 0)throw new Error("Node must have an id");zt.checkMass(e,this.id),e.x!==void 0&&(e.x===null?(this.x=void 0,this.predefinedPosition=!1):(this.x=as(e.x),this.predefinedPosition=!0)),e.y!==void 0&&(e.y===null?(this.y=void 0,this.predefinedPosition=!1):(this.y=as(e.y),this.predefinedPosition=!0)),e.size!==void 0&&(this.baseSize=e.size),e.value!==void 0&&(e.value=Rae(e.value)),zt.parseOptions(this.options,e,!0,this.globalOptions,this.grouplist);const n=[e,this.options,this.defaultOptions];return this.chooser=h$("node",n),this._load_images(),this.updateLabelModule(e),e.opacity!==void 0&&zt.checkOpacity(e.opacity)&&(this.options.opacity=e.opacity),this.updateShape(r),e.hidden!==void 0||e.physics!==void 0}_load_images(){if((this.options.shape==="circularImage"||this.options.shape==="image")&&this.options.image===void 0)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(this.options.image!==void 0){if(this.imagelist===void 0)throw new Error("Internal Error: No images provided");if(typeof this.options.image=="string")this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(this.options.image.unselected===void 0)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),this.options.image.selected!==void 0?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}static checkOpacity(e){return 0<=e&&e<=1}static checkCoordinateOrigin(e){return e===void 0||e==="center"||e==="top-left"}static updateGroupOptions(e,r,n){var i;if(n===void 0)return;const s=e.group;if(r!==void 0&&r.group!==void 0&&s!==r.group)throw new Error("updateGroupOptions: group values in options don't match.");if(!(typeof s=="number"||typeof s=="string"&&s!=""))return;const a=n.get(s);a.opacity!==void 0&&r.opacity===void 0&&(zt.checkOpacity(a.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+a.opacity),a.opacity=void 0));const l=Hn(i=FAe(r)).call(i,c=>r[c]!=null);l.push("font"),Gv(l,e,a),e.color=QI(e.color)}static parseOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4?arguments[4]:void 0;if(Gv(["color","fixed","shadow"],e,r,n),zt.checkMass(r),e.opacity!==void 0&&(zt.checkOpacity(e.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity),e.opacity=void 0)),r.opacity!==void 0&&(zt.checkOpacity(r.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+r.opacity),r.opacity=void 0)),r.shapeProperties&&!zt.checkCoordinateOrigin(r.shapeProperties.coordinateOrigin)&&console.error("Invalid option for node coordinateOrigin, found: "+r.shapeProperties.coordinateOrigin),Pi(e,r,"shadow",i),r.color!==void 0&&r.color!==null){const a=QI(r.color);pae(e.color,a)}else n===!0&&r.color===null&&(e.color=Qa(i.color));r.fixed!==void 0&&r.fixed!==null&&(typeof r.fixed=="boolean"?(e.fixed.x=r.fixed,e.fixed.y=r.fixed):(r.fixed.x!==void 0&&typeof r.fixed.x=="boolean"&&(e.fixed.x=r.fixed.x),r.fixed.y!==void 0&&typeof r.fixed.y=="boolean"&&(e.fixed.y=r.fixed.y))),n===!0&&r.font===null&&(e.font=Qa(i.font)),zt.updateGroupOptions(e,r,s),r.scaling!==void 0&&Pi(e.scaling,r.scaling,"label",i.scaling)}getFormattingValues(){const e={color:this.options.color.background,opacity:this.options.opacity,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};if(this.selected||this.hover?this.chooser===!0?this.selected?(this.options.borderWidthSelected!=null?e.borderWidth=this.options.borderWidthSelected:e.borderWidth*=2,e.color=this.options.color.highlight.background,e.borderColor=this.options.color.highlight.border,e.shadow=this.options.shadow.enabled):this.hover&&(e.color=this.options.color.hover.background,e.borderColor=this.options.color.hover.border,e.shadow=this.options.shadow.enabled):typeof this.chooser=="function"&&(this.chooser(e,this.options.id,this.selected,this.hover),e.shadow===!1&&(e.shadowColor!==this.options.shadow.color||e.shadowSize!==this.options.shadow.size||e.shadowX!==this.options.shadow.x||e.shadowY!==this.options.shadow.y)&&(e.shadow=!0)):e.shadow=this.options.shadow.enabled,this.options.opacity!==void 0){const r=this.options.opacity;e.borderColor=$i(e.borderColor,r),e.color=$i(e.color,r),e.shadowColor=$i(e.shadowColor,r)}return e}updateLabelModule(e){(this.options.label===void 0||this.options.label===null)&&(this.options.label=""),zt.updateGroupOptions(this.options,yQ(yQ({},e),{},{color:e&&e.color||this._localColor||void 0}),this.grouplist);const r=this.grouplist.get(this.options.group,!1),n=[e,this.options,r,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,n),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}updateShape(e){if(e===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new p$e(this.options,this.body,this.labelModule);break;case"circle":this.shape=new m$e(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new g$e(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"custom":this.shape=new v$e(this.options,this.body,this.labelModule,this.options.ctxRenderer);break;case"database":this.shape=new b$e(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new x$e(this.options,this.body,this.labelModule);break;case"dot":this.shape=new w$e(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new mQ(this.options,this.body,this.labelModule);break;case"icon":this.shape=new S$e(this.options,this.body,this.labelModule);break;case"image":this.shape=new _$e(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new E$e(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new N$e(this.options,this.body,this.labelModule);break;case"star":this.shape=new C$e(this.options,this.body,this.labelModule);break;case"text":this.shape=new k$e(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new T$e(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new O$e(this.options,this.body,this.labelModule);break;default:this.shape=new mQ(this.options,this.body,this.labelModule);break}this.needsRefresh()}select(){this.selected=!0,this.needsRefresh()}unselect(){this.selected=!1,this.needsRefresh()}needsRefresh(){this.shape.refreshNeeded=!0}getTitle(){return this.options.title}distanceToBorder(e,r){return this.shape.distanceToBorder(e,r)}isFixed(){return this.options.fixed.x&&this.options.fixed.y}isSelected(){return this.selected}getValue(){return this.options.value}getLabelSize(){return this.labelModule.size()}setValueRange(e,r,n){if(this.options.value!==void 0){const i=this.options.scaling.customScalingFunction(e,r,n,this.options.value),s=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){const o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*o}this.options.size=this.options.scaling.min+i*s}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}draw(e){const r=this.getFormattingValues();return this.shape.draw(e,this.x,this.y,this.selected,this.hover,r)||{}}updateBoundingBox(e){this.shape.updateBoundingBox(this.x,this.y,e)}resize(e){const r=this.getFormattingValues();this.shape.resize(e,this.selected,this.hover,r)}getItemsOnPoint(e){const r=[];return this.labelModule.visible()&&tR(this.labelModule.getSize(),e)&&r.push({nodeId:this.id,labelId:0}),tR(this.shape.boundingBox,e)&&r.push({nodeId:this.id}),r}isOverlappingWith(e){return this.shape.left<e.right&&this.shape.left+this.shape.width>e.left&&this.shape.top<e.bottom&&this.shape.top+this.shape.height>e.top}isBoundingBoxOverlappingWith(e){return this.shape.boundingBox.left<e.right&&this.shape.boundingBox.right>e.left&&this.shape.boundingBox.top<e.bottom&&this.shape.boundingBox.bottom>e.top}static checkMass(e,r){if(e.mass!==void 0&&e.mass<=0){let n="";r!==void 0&&(n=" in node id: "+r),console.error("%cNegative or zero mass disallowed"+n+", setting mass to 1.",vae),e.mass=1}}}class j$e{constructor(e,r,n,i){var s;if(this.body=e,this.images=r,this.groups=n,this.layoutEngine=i,this.body.functions.createNode=ne(s=this.create).call(s,this),this.nodesListeners={add:(o,a)=>{this.add(a.items)},update:(o,a)=>{this.update(a.items,a.data,a.oldData)},remove:(o,a)=>{this.remove(a.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:void 0,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},opacity:void 0,fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(o,a,l,c){if(a===o)return .5;{const d=1/(a-o);return Math.max(0,(c-o)*d)}}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1,coordinateOrigin:"center"},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=Qa(this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e,r;this.body.emitter.on("refreshNodes",ne(e=this.refresh).call(e,this)),this.body.emitter.on("refresh",ne(r=this.refresh).call(r,this)),this.body.emitter.on("destroy",()=>{et(this.nodesListeners,(n,i)=>{this.body.data.nodes&&this.body.data.nodes.off(i,n)}),delete this.body.functions.createNode,delete this.nodesListeners.add,delete this.nodesListeners.update,delete this.nodesListeners.remove,delete this.nodesListeners})}setOptions(e){if(e!==void 0){if(zt.parseOptions(this.options,e),e.opacity!==void 0&&(eR(e.opacity)||!Vl(e.opacity)||e.opacity<0||e.opacity>1?console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity):this.options.opacity=e.opacity),e.shape!==void 0)for(const r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&this.body.nodes[r].updateShape();if(typeof e.font<"u"||typeof e.widthConstraint<"u"||typeof e.heightConstraint<"u")for(const r of ar(this.body.nodes))this.body.nodes[r].updateLabelModule(),this.body.nodes[r].needsRefresh();if(e.size!==void 0)for(const r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&this.body.nodes[r].needsRefresh();(e.hidden!==void 0||e.physics!==void 0)&&this.body.emitter.emit("_dataChanged")}}setData(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.data.nodes;if(hoe("id",e))this.body.data.nodes=e;else if(dr(e))this.body.data.nodes=new Wd,this.body.data.nodes.add(e);else if(!e)this.body.data.nodes=new Wd;else throw new TypeError("Array or DataSet expected");if(n&&et(this.nodesListeners,function(i,s){n.off(s,i)}),this.body.nodes={},this.body.data.nodes){const i=this;et(this.nodesListeners,function(o,a){i.body.data.nodes.on(a,o)});const s=this.body.data.nodes.getIds();this.add(s,!0)}r===!1&&this.body.emitter.emit("_dataChanged")}add(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n;const i=[];for(let s=0;s<e.length;s++){n=e[s];const o=this.body.data.nodes.get(n),a=this.create(o);i.push(a),this.body.nodes[n]=a}this.layoutEngine.positionInitially(i),r===!1&&this.body.emitter.emit("_dataChanged")}update(e,r,n){const i=this.body.nodes;let s=!1;for(let o=0;o<e.length;o++){const a=e[o];let l=i[a];const c=r[o];l!==void 0?l.setOptions(c)&&(s=!0):(s=!0,l=this.create(c),i[a]=l)}!s&&n!==void 0&&(s=qMe(r).call(r,function(o,a){const l=n[a];return l&&l.level!==o.level})),s===!0?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}remove(e){const r=this.body.nodes;for(let n=0;n<e.length;n++){const i=e[n];delete r[i]}this.body.emitter.emit("_dataChanged")}create(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zt;return new r(e,this.body,this.images,this.groups,this.options,this.defaultOptions)}refresh(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;et(this.body.nodes,(r,n)=>{const i=this.body.data.nodes.get(n);i!==void 0&&(e===!0&&r.setOptions({x:null,y:null}),r.setOptions({fixed:!1}),r.setOptions(i))})}getPositions(e){const r={};if(e!==void 0){if(dr(e)===!0){for(let n=0;n<e.length;n++)if(this.body.nodes[e[n]]!==void 0){const i=this.body.nodes[e[n]];r[e[n]]={x:Math.round(i.x),y:Math.round(i.y)}}}else if(this.body.nodes[e]!==void 0){const n=this.body.nodes[e];r[e]={x:Math.round(n.x),y:Math.round(n.y)}}}else for(let n=0;n<this.body.nodeIndices.length;n++){const i=this.body.nodes[this.body.nodeIndices[n]];r[this.body.nodeIndices[n]]={x:Math.round(i.x),y:Math.round(i.y)}}return r}getPosition(e){if(e==null)throw new TypeError("No id was specified for getPosition method.");if(this.body.nodes[e]==null)throw new ReferenceError("NodeId provided for getPosition does not exist. Provided: ".concat(e));return{x:Math.round(this.body.nodes[e].x),y:Math.round(this.body.nodes[e].y)}}storePositions(){const e=[],r=this.body.data.nodes.getDataSet();for(const n of r.get()){const i=n.id,s=this.body.nodes[i],o=Math.round(s.x),a=Math.round(s.y);(n.x!==o||n.y!==a)&&e.push({id:i,x:o,y:a})}r.update(e)}getBoundingBox(e){if(this.body.nodes[e]!==void 0)return this.body.nodes[e].shape.boundingBox}getConnectedNodes(e,r){const n=[];if(this.body.nodes[e]!==void 0){const i=this.body.nodes[e],s={};for(let o=0;o<i.edges.length;o++){const a=i.edges[o];r!=="to"&&a.toId==i.id?s[a.fromId]===void 0&&(n.push(a.fromId),s[a.fromId]=!0):r!=="from"&&a.fromId==i.id&&s[a.toId]===void 0&&(n.push(a.toId),s[a.toId]=!0)}}return n}getConnectedEdges(e){const r=[];if(this.body.nodes[e]!==void 0){const n=this.body.nodes[e];for(let i=0;i<n.edges.length;i++)r.push(n.edges[i].id)}else console.error("NodeId provided for getConnectedEdges does not exist. Provided: ",e);return r}moveNode(e,r,n){this.body.nodes[e]!==void 0?(this.body.nodes[e].x=Number(r),this.body.nodes[e].y=Number(n),So(()=>{this.body.emitter.emit("startSimulation")},0)):console.error("Node id supplied to moveNode does not exist. Provided: ",e)}}var vQ={},bQ;function P$e(){if(bQ)return vQ;bQ=1;var t=Ie(),e=Math.hypot,r=Math.abs,n=Math.sqrt,i=!!e&&e(1/0,NaN)!==1/0;return t({target:"Math",stat:!0,arity:2,forced:i},{hypot:function(o,a){for(var l=0,c=0,d=arguments.length,h=0,f,p;c<d;)f=r(arguments[c++]),h<f?(p=h/f,l=l*p*p+1,h=f):f>0?(p=f/h,l+=p*p):l+=f;return h===1/0?1/0:h*n(l)}}),vQ}var PO,xQ;function I$e(){if(xQ)return PO;xQ=1,P$e();var t=Nt();return PO=t.Math.hypot,PO}var IO,wQ;function R$e(){if(wQ)return IO;wQ=1;var t=I$e();return IO=t,IO}var RO,SQ;function M$e(){return SQ||(SQ=1,RO=R$e()),RO}var A$e=M$e(),$$e=ze(A$e);class mr{static transform(e,r){dr(e)||(e=[e]);const n=r.point.x,i=r.point.y,s=r.angle,o=r.length;for(let a=0;a<e.length;++a){const l=e[a],c=l.x*Math.cos(s)-l.y*Math.sin(s),d=l.x*Math.sin(s)+l.y*Math.cos(s);l.x=n+o*c,l.y=i+o*d}}static drawPath(e,r){e.beginPath(),e.moveTo(r[0].x,r[0].y);for(let n=1;n<r.length;++n)e.lineTo(r[n].x,r[n].y);e.closePath()}}let D$e=class extends mr{static draw(e,r){if(r.image){e.save(),e.translate(r.point.x,r.point.y),e.rotate(Math.PI/2+r.angle);const n=r.imageWidth!=null?r.imageWidth:r.image.width,i=r.imageHeight!=null?r.imageHeight:r.image.height;r.image.drawImageAtPosition(e,1,-n/2,0,n,i),e.restore()}return!1}};class F$e extends mr{static draw(e,r){const n=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];return mr.transform(n,r),mr.drawPath(e,n),!0}}class q$e{static draw(e,r){const n=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];return mr.transform(n,r),mr.drawPath(e,n),!0}}class L$e{static draw(e,r){const n={x:-.4,y:0};mr.transform(n,r),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";const i=Math.PI,s=r.angle-i/2,o=r.angle+i/2;return e.beginPath(),e.arc(n.x,n.y,r.length*.4,s,o,!1),e.stroke(),!0}}class B$e{static draw(e,r){const n={x:-.3,y:0};mr.transform(n,r),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";const i=Math.PI,s=r.angle+i/2,o=r.angle+3*i/2;return e.beginPath(),e.arc(n.x,n.y,r.length*.4,s,o,!1),e.stroke(),!0}}class z$e{static draw(e,r){const n=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];return mr.transform(n,r),mr.drawPath(e,n),!0}}class V$e{static draw(e,r){const n=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];return mr.transform(n,r),mr.drawPath(e,n),!0}}class U$e{static draw(e,r){const n={x:-.4,y:0};return mr.transform(n,r),LA(e,n.x,n.y,r.length*.4),!0}}class H$e{static draw(e,r){const n=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];return mr.transform(n,r),mr.drawPath(e,n),!0}}class W$e{static draw(e,r){const n=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];return mr.transform(n,r),mr.drawPath(e,n),!0}}class K$e{static draw(e,r){const n=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];return mr.transform(n,r),mr.drawPath(e,n),!0}}class G$e{static draw(e,r){const n=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];return mr.transform(n,r),mr.drawPath(e,n),!0}}class $ae{static draw(e,r){let n;switch(r.type&&(n=r.type.toLowerCase()),n){case"image":return D$e.draw(e,r);case"circle":return U$e.draw(e,r);case"box":return W$e.draw(e,r);case"crow":return q$e.draw(e,r);case"curve":return L$e.draw(e,r);case"diamond":return K$e.draw(e,r);case"inv_curve":return B$e.draw(e,r);case"triangle":return z$e.draw(e,r);case"inv_triangle":return V$e.draw(e,r);case"bar":return H$e.draw(e,r);case"vee":return G$e.draw(e,r);case"arrow":default:return F$e.draw(e,r)}}}function _Q(t,e){var r=ar(t);if(sl){var n=sl(t);e&&(n=Hn(n).call(n,function(i){return bl(t,i).enumerable})),r.push.apply(r,n)}return r}function EQ(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?Ot(r=_Q(Object(i),!0)).call(r,function(s){fo(t,s,i[s])}):ol?Nb(t,ol(i)):Ot(n=_Q(Object(i))).call(n,function(s){Cb(t,s,bl(i,s))})}return t}class Dae{constructor(e,r,n){fo(this,"color",{}),fo(this,"colorDirty",!0),fo(this,"hoverWidth",1.5),fo(this,"selectionWidth",2),this._body=r,this._labelModule=n,this.setOptions(e),this.fromPoint=this.from,this.toPoint=this.to}connect(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to]}cleanup(){return!1}setOptions(e){this.options=e,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.id=this.options.id}drawLine(e,r,n,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.getViaNode();e.strokeStyle=this.getColor(e,r),e.lineWidth=r.width,r.dashes!==!1?this._drawDashedLine(e,r,s):this._drawLine(e,r,s)}_drawLine(e,r,n,i,s){if(this.from!=this.to)this._line(e,r,n,i,s);else{const[o,a,l]=this._getCircleData(e);this._circle(e,r,o,a,l)}}_drawDashedLine(e,r,n,i,s){e.lineCap="round";const o=dr(r.dashes)?r.dashes:[5,5];if(e.setLineDash!==void 0){if(e.save(),e.setLineDash(o),e.lineDashOffset=0,this.from!=this.to)this._line(e,r,n);else{const[a,l,c]=this._getCircleData(e);this._circle(e,r,a,l,c)}e.setLineDash([0]),e.lineDashOffset=0,e.restore()}else{if(this.from!=this.to)Soe(e,this.from.x,this.from.y,this.to.x,this.to.y,o);else{const[a,l,c]=this._getCircleData(e);this._circle(e,r,a,l,c)}this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}}findBorderPosition(e,r,n){return this.from!=this.to?this._findBorderPosition(e,r,n):this._findBorderPositionCircle(e,r,n)}findBorderPositions(e){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,e),to:this._findBorderPosition(this.to,e)};{var r;const[n,i]=Is(r=this._getCircleData(e)).call(r,0,2);return{from:this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:.6,high:.8,direction:1})}}}_getCircleData(e){const r=this.options.selfReference.size;e!==void 0&&this.from.shape.width===void 0&&this.from.shape.resize(e);const n=Mae(e,this.options.selfReference.angle,r,this.from);return[n.x,n.y,r]}_pointOnCircle(e,r,n,i){const s=i*2*Math.PI;return{x:e+n*Math.cos(s),y:r-n*Math.sin(s)}}_findBorderPositionCircle(e,r,n){const i=n.x,s=n.y;let o=n.low,a=n.high;const l=n.direction,c=10,d=this.options.selfReference.size,h=.05;let f,p=(o+a)*.5,m=0;this.options.arrowStrikethrough===!0&&(l===-1?m=this.options.endPointOffset.from:l===1&&(m=this.options.endPointOffset.to));let g=0;do{p=(o+a)*.5,f=this._pointOnCircle(i,s,d,p);const v=Math.atan2(e.y-f.y,e.x-f.x),y=e.distanceToBorder(r,v)+m,b=Math.sqrt(Math.pow(f.x-e.x,2)+Math.pow(f.y-e.y,2)),w=y-b;if(Math.abs(w)<h)break;w>0?l>0?o=p:a=p:l>0?a=p:o=p,++g}while(o<=a&&g<c);return EQ(EQ({},f),{},{t:p})}getLineWidth(e,r){return e===!0?Math.max(this.selectionWidth,.3/this._body.view.scale):r===!0?Math.max(this.hoverWidth,.3/this._body.view.scale):Math.max(this.options.width,.3/this._body.view.scale)}getColor(e,r){if(r.inheritsColor!==!1){if(r.inheritsColor==="both"&&this.from.id!==this.to.id){const n=e.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y);let i=this.from.options.color.highlight.border,s=this.to.options.color.highlight.border;return this.from.selected===!1&&this.to.selected===!1?(i=$i(this.from.options.color.border,r.opacity),s=$i(this.to.options.color.border,r.opacity)):this.from.selected===!0&&this.to.selected===!1?s=this.to.options.color.border:this.from.selected===!1&&this.to.selected===!0&&(i=this.from.options.color.border),n.addColorStop(0,i),n.addColorStop(1,s),n}return r.inheritsColor==="to"?$i(this.to.options.color.border,r.opacity):$i(this.from.options.color.border,r.opacity)}else return $i(r.color,r.opacity)}_circle(e,r,n,i,s){this.enableShadow(e,r);let o=0,a=Math.PI*2;if(!this.options.selfReference.renderBehindTheNode){const l=this.options.selfReference.angle,c=this.options.selfReference.angle+Math.PI,d=this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:l,high:c,direction:-1}),h=this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:l,high:c,direction:1});o=Math.atan2(d.y-i,d.x-n),a=Math.atan2(h.y-i,h.x-n)}e.beginPath(),e.arc(n,i,s,o,a,!1),e.stroke(),this.disableShadow(e,r)}getDistanceToEdge(e,r,n,i,s,o){if(this.from!=this.to)return this._getDistanceToEdge(e,r,n,i,s,o);{const[a,l,c]=this._getCircleData(void 0),d=a-s,h=l-o;return Math.abs(Math.sqrt(d*d+h*h)-c)}}_getDistanceToLine(e,r,n,i,s,o){const a=n-e,l=i-r,c=a*a+l*l;let d=((s-e)*a+(o-r)*l)/c;d>1?d=1:d<0&&(d=0);const h=e+d*a,f=r+d*l,p=h-s,m=f-o;return Math.sqrt(p*p+m*m)}getArrowData(e,r,n,i,s,o){let a,l,c,d,h,f,p;const m=o.width;r==="from"?(c=this.from,d=this.to,h=o.fromArrowScale<0,f=Math.abs(o.fromArrowScale),p=o.fromArrowType):r==="to"?(c=this.to,d=this.from,h=o.toArrowScale<0,f=Math.abs(o.toArrowScale),p=o.toArrowType):(c=this.to,d=this.from,h=o.middleArrowScale<0,f=Math.abs(o.middleArrowScale),p=o.middleArrowType);const g=15*f+3*m;if(c!=d){const w=$$e(c.x-d.x,c.y-d.y),x=g/w;if(r!=="middle")if(this.options.smooth.enabled===!0){const S=this._findBorderPosition(c,e,{via:n}),_=this.getPoint(S.t+x*(r==="from"?1:-1),n);a=Math.atan2(S.y-_.y,S.x-_.x),l=S}else a=Math.atan2(c.y-d.y,c.x-d.x),l=this._findBorderPosition(c,e);else{const S=(h?-x:x)/2,_=this.getPoint(.5+S,n),E=this.getPoint(.5-S,n);a=Math.atan2(_.y-E.y,_.x-E.x),l=this.getPoint(.5,n)}}else{const[w,x,S]=this._getCircleData(e);if(r==="from"){const _=this.options.selfReference.angle,E=this.options.selfReference.angle+Math.PI,N=this._findBorderPositionCircle(this.from,e,{x:w,y:x,low:_,high:E,direction:-1});a=N.t*-2*Math.PI+1.5*Math.PI+.1*Math.PI,l=N}else if(r==="to"){const _=this.options.selfReference.angle,E=this.options.selfReference.angle+Math.PI,N=this._findBorderPositionCircle(this.from,e,{x:w,y:x,low:_,high:E,direction:1});a=N.t*-2*Math.PI+1.5*Math.PI-1.1*Math.PI,l=N}else{const _=this.options.selfReference.angle/(2*Math.PI);l=this._pointOnCircle(w,x,S,_),a=_*-2*Math.PI+1.5*Math.PI+.1*Math.PI}}const v=l.x-g*.9*Math.cos(a),y=l.y-g*.9*Math.sin(a);return{point:l,core:{x:v,y},angle:a,length:g,type:p}}drawArrowHead(e,r,n,i,s){e.strokeStyle=this.getColor(e,r),e.fillStyle=e.strokeStyle,e.lineWidth=r.width,$ae.draw(e,s)&&(this.enableShadow(e,r),Mm(e).call(e),this.disableShadow(e,r))}enableShadow(e,r){r.shadow===!0&&(e.shadowColor=r.shadowColor,e.shadowBlur=r.shadowSize,e.shadowOffsetX=r.shadowX,e.shadowOffsetY=r.shadowY)}disableShadow(e,r){r.shadow===!0&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}drawBackground(e,r){if(r.background!==!1){const n={strokeStyle:e.strokeStyle,lineWidth:e.lineWidth,dashes:e.dashes};e.strokeStyle=r.backgroundColor,e.lineWidth=r.backgroundSize,this.setStrokeDashed(e,r.backgroundDashes),e.stroke(),e.strokeStyle=n.strokeStyle,e.lineWidth=n.lineWidth,e.dashes=n.dashes,this.setStrokeDashed(e,r.dashes)}}setStrokeDashed(e,r){if(r!==!1)if(e.setLineDash!==void 0){const n=dr(r)?r:[5,5];e.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.");else e.setLineDash!==void 0?e.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}function NQ(t,e){var r=ar(t);if(sl){var n=sl(t);e&&(n=Hn(n).call(n,function(i){return bl(t,i).enumerable})),r.push.apply(r,n)}return r}function CQ(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?Ot(r=NQ(Object(i),!0)).call(r,function(s){fo(t,s,i[s])}):ol?Nb(t,ol(i)):Ot(n=NQ(Object(i))).call(n,function(s){Cb(t,s,bl(i,s))})}return t}class p$ extends Dae{constructor(e,r,n){super(e,r,n)}_findBorderPositionBezier(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this._getViaCoordinates();const i=10,s=.2;let o=!1,a=1,l=0,c=this.to,d,h,f=this.options.endPointOffset?this.options.endPointOffset.to:0;e.id===this.from.id&&(c=this.from,o=!0,f=this.options.endPointOffset?this.options.endPointOffset.from:0),this.options.arrowStrikethrough===!1&&(f=0);let p=0;do{h=(l+a)*.5,d=this.getPoint(h,n);const m=Math.atan2(c.y-d.y,c.x-d.x),g=c.distanceToBorder(r,m)+f,v=Math.sqrt(Math.pow(d.x-c.x,2)+Math.pow(d.y-c.y,2)),y=g-v;if(Math.abs(y)<s)break;y<0?o===!1?l=h:a=h:o===!1?a=h:l=h,++p}while(l<=a&&p<i);return CQ(CQ({},d),{},{t:h})}_getDistanceToBezierEdge(e,r,n,i,s,o,a){let l=1e9,c,d,h,f,p,m=e,g=r;for(d=1;d<10;d++)h=.1*d,f=Math.pow(1-h,2)*e+2*h*(1-h)*a.x+Math.pow(h,2)*n,p=Math.pow(1-h,2)*r+2*h*(1-h)*a.y+Math.pow(h,2)*i,d>0&&(c=this._getDistanceToLine(m,g,f,p,s,o),l=c<l?c:l),m=f,g=p;return l}_bezierCurve(e,r,n,i){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),n!=null&&n.x!=null?i!=null&&i.x!=null?e.bezierCurveTo(n.x,n.y,i.x,i.y,this.toPoint.x,this.toPoint.y):e.quadraticCurveTo(n.x,n.y,this.toPoint.x,this.toPoint.y):e.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(e,r),this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}getViaNode(){return this._getViaCoordinates()}}class kQ extends p${constructor(e,r,n){super(e,r,n),fo(this,"via",this.via),this._boundFunction=()=>{this.positionBezierNode()},this._body.emitter.on("_repositionBezierNodes",this._boundFunction)}setOptions(e){super.setOptions(e);let r=!1;this.options.physics!==e.physics&&(r=!0),this.options=e,this.id=this.options.id,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.setupSupportNode(),this.connect(),r===!0&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}connect(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.from===void 0||this.to===void 0||this.options.physics===!1?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}cleanup(){return this._body.emitter.off("_repositionBezierNodes",this._boundFunction),this.via!==void 0?(delete this._body.nodes[this.via.id],this.via=void 0,!0):!1}setupSupportNode(){if(this.via===void 0){const e="edgeId:"+this.id,r=this._body.functions.createNode({id:e,shape:"circle",physics:!0,hidden:!0});this._body.nodes[e]=r,this.via=r,this.via.parentEdgeId=this.id,this.positionBezierNode()}}positionBezierNode(){this.via!==void 0&&this.from!==void 0&&this.to!==void 0?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):this.via!==void 0&&(this.via.x=0,this.via.y=0)}_line(e,r,n){this._bezierCurve(e,r,n)}_getViaCoordinates(){return this.via}getViaNode(){return this.via}getPoint(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.via;if(this.from===this.to){const[n,i,s]=this._getCircleData(),o=2*Math.PI*(1-e);return{x:n+s*Math.sin(o),y:i+s-s*(1-Math.cos(o))}}else return{x:Math.pow(1-e,2)*this.fromPoint.x+2*e*(1-e)*r.x+Math.pow(e,2)*this.toPoint.x,y:Math.pow(1-e,2)*this.fromPoint.y+2*e*(1-e)*r.y+Math.pow(e,2)*this.toPoint.y}}_findBorderPosition(e,r){return this._findBorderPositionBezier(e,r,this.via)}_getDistanceToEdge(e,r,n,i,s,o){return this._getDistanceToBezierEdge(e,r,n,i,s,o,this.via)}}class TQ extends p${constructor(e,r,n){super(e,r,n)}_line(e,r,n){this._bezierCurve(e,r,n)}getViaNode(){return this._getViaCoordinates()}_getViaCoordinates(){const e=this.options.smooth.roundness,r=this.options.smooth.type;let n=Math.abs(this.from.x-this.to.x),i=Math.abs(this.from.y-this.to.y);if(r==="discrete"||r==="diagonalCross"){let s,o;n<=i?s=o=e*i:s=o=e*n,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(o=-o);let a=this.from.x+s,l=this.from.y+o;return r==="discrete"&&(n<=i?a=n<e*i?this.from.x:a:l=i<e*n?this.from.y:l),{x:a,y:l}}else if(r==="straightCross"){let s=(1-e)*n,o=(1-e)*i;return n<=i?(s=0,this.from.y<this.to.y&&(o=-o)):(this.from.x<this.to.x&&(s=-s),o=0),{x:this.to.x+s,y:this.to.y+o}}else if(r==="horizontal"){let s=(1-e)*n;return this.from.x<this.to.x&&(s=-s),{x:this.to.x+s,y:this.from.y}}else if(r==="vertical"){let s=(1-e)*i;return this.from.y<this.to.y&&(s=-s),{x:this.from.x,y:this.to.y+s}}else if(r==="curvedCW"){n=this.to.x-this.from.x,i=this.from.y-this.to.y;const s=Math.sqrt(n*n+i*i),o=Math.PI,l=(Math.atan2(i,n)+(e*.5+.5)*o)%(2*o);return{x:this.from.x+(e*.5+.5)*s*Math.sin(l),y:this.from.y+(e*.5+.5)*s*Math.cos(l)}}else if(r==="curvedCCW"){n=this.to.x-this.from.x,i=this.from.y-this.to.y;const s=Math.sqrt(n*n+i*i),o=Math.PI,l=(Math.atan2(i,n)+(-e*.5+.5)*o)%(2*o);return{x:this.from.x+(e*.5+.5)*s*Math.sin(l),y:this.from.y+(e*.5+.5)*s*Math.cos(l)}}else{let s,o;n<=i?s=o=e*i:s=o=e*n,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(o=-o);let a=this.from.x+s,l=this.from.y+o;return n<=i?this.from.x<=this.to.x?a=this.to.x<a?this.to.x:a:a=this.to.x>a?this.to.x:a:this.from.y>=this.to.y?l=this.to.y>l?this.to.y:l:l=this.to.y<l?this.to.y:l,{x:a,y:l}}}_findBorderPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._findBorderPositionBezier(e,r,n.via)}_getDistanceToEdge(e,r,n,i,s,o){let a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(e,r,n,i,s,o,a)}getPoint(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates();const n=e,i=Math.pow(1-n,2)*this.fromPoint.x+2*n*(1-n)*r.x+Math.pow(n,2)*this.toPoint.x,s=Math.pow(1-n,2)*this.fromPoint.y+2*n*(1-n)*r.y+Math.pow(n,2)*this.toPoint.y;return{x:i,y:s}}}class Y$e extends p${constructor(e,r,n){super(e,r,n)}_getDistanceToBezierEdge2(e,r,n,i,s,o,a,l){let c=1e9,d=e,h=r;const f=[0,0,0,0];for(let p=1;p<10;p++){const m=.1*p;f[0]=Math.pow(1-m,3),f[1]=3*m*Math.pow(1-m,2),f[2]=3*Math.pow(m,2)*(1-m),f[3]=Math.pow(m,3);const g=f[0]*e+f[1]*a.x+f[2]*l.x+f[3]*n,v=f[0]*r+f[1]*a.y+f[2]*l.y+f[3]*i;if(p>0){const y=this._getDistanceToLine(d,h,g,v,s,o);c=y<c?y:c}d=g,h=v}return c}}class OQ extends Y$e{constructor(e,r,n){super(e,r,n)}_line(e,r,n){const i=n[0],s=n[1];this._bezierCurve(e,r,i,s)}_getViaCoordinates(){const e=this.from.x-this.to.x,r=this.from.y-this.to.y;let n,i,s,o;const a=this.options.smooth.roundness;return(Math.abs(e)>Math.abs(r)||this.options.smooth.forceDirection===!0||this.options.smooth.forceDirection==="horizontal")&&this.options.smooth.forceDirection!=="vertical"?(i=this.from.y,o=this.to.y,n=this.from.x-a*e,s=this.to.x+a*e):(i=this.from.y-a*r,o=this.to.y+a*r,n=this.from.x,s=this.to.x),[{x:n,y:i},{x:s,y:o}]}getViaNode(){return this._getViaCoordinates()}_findBorderPosition(e,r){return this._findBorderPositionBezier(e,r)}_getDistanceToEdge(e,r,n,i,s,o){let[a,l]=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge2(e,r,n,i,s,o,a,l)}getPoint(e){let[r,n]=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates();const i=e,s=[Math.pow(1-i,3),3*i*Math.pow(1-i,2),3*Math.pow(i,2)*(1-i),Math.pow(i,3)],o=s[0]*this.fromPoint.x+s[1]*r.x+s[2]*n.x+s[3]*this.toPoint.x,a=s[0]*this.fromPoint.y+s[1]*r.y+s[2]*n.y+s[3]*this.toPoint.y;return{x:o,y:a}}}class jQ extends Dae{constructor(e,r,n){super(e,r,n)}_line(e,r){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),e.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}getViaNode(){}getPoint(e){return{x:(1-e)*this.fromPoint.x+e*this.toPoint.x,y:(1-e)*this.fromPoint.y+e*this.toPoint.y}}_findBorderPosition(e,r){let n=this.to,i=this.from;e.id===this.from.id&&(n=this.from,i=this.to);const s=Math.atan2(n.y-i.y,n.x-i.x),o=n.x-i.x,a=n.y-i.y,l=Math.sqrt(o*o+a*a),c=e.distanceToBorder(r,s),d=(l-c)/l;return{x:(1-d)*i.x+d*n.x,y:(1-d)*i.y+d*n.y,t:0}}_getDistanceToEdge(e,r,n,i,s,o){return this._getDistanceToLine(e,r,n,i,s,o)}}class Xa{constructor(e,r,n,i,s){if(r===void 0)throw new Error("No body provided");this.options=Qa(i),this.globalOptions=i,this.defaultOptions=s,this.body=r,this.imagelist=n,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new od(this.body,this.options,!0),this.setOptions(e)}setOptions(e){if(!e)return;let r=typeof e.physics<"u"&&this.options.physics!==e.physics||typeof e.hidden<"u"&&(this.options.hidden||!1)!==(e.hidden||!1)||typeof e.from<"u"&&this.options.from!==e.from||typeof e.to<"u"&&this.options.to!==e.to;Xa.parseOptions(this.options,e,!0,this.globalOptions),e.id!==void 0&&(this.id=e.id),e.from!==void 0&&(this.fromId=e.from),e.to!==void 0&&(this.toId=e.to),e.title!==void 0&&(this.title=e.title),e.value!==void 0&&(e.value=Rae(e.value));const n=[e,this.options,this.defaultOptions];return this.chooser=h$("edge",n),this.updateLabelModule(e),r=this.updateEdgeType()||r,this._setInteractionWidths(),this.connect(),r}static parseOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Rh(["endPointOffset","arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","selfReference","to","title","value","width","font","chosen","widthConstraint"],e,r,n),r.endPointOffset!==void 0&&r.endPointOffset.from!==void 0&&(Vl(r.endPointOffset.from)?e.endPointOffset.from=r.endPointOffset.from:(e.endPointOffset.from=i.endPointOffset.from!==void 0?i.endPointOffset.from:0,console.error("endPointOffset.from is not a valid number"))),r.endPointOffset!==void 0&&r.endPointOffset.to!==void 0&&(Vl(r.endPointOffset.to)?e.endPointOffset.to=r.endPointOffset.to:(e.endPointOffset.to=i.endPointOffset.to!==void 0?i.endPointOffset.to:0,console.error("endPointOffset.to is not a valid number"))),Qv(r.label)?e.label=r.label:Qv(e.label)||(e.label=void 0),Pi(e,r,"smooth",i),Pi(e,r,"shadow",i),Pi(e,r,"background",i),r.dashes!==void 0&&r.dashes!==null?e.dashes=r.dashes:n===!0&&r.dashes===null&&(e.dashes=dc(i.dashes)),r.scaling!==void 0&&r.scaling!==null?(r.scaling.min!==void 0&&(e.scaling.min=r.scaling.min),r.scaling.max!==void 0&&(e.scaling.max=r.scaling.max),Pi(e.scaling,r.scaling,"label",i.scaling)):n===!0&&r.scaling===null&&(e.scaling=dc(i.scaling)),r.arrows!==void 0&&r.arrows!==null)if(typeof r.arrows=="string"){const a=r.arrows.toLowerCase();e.arrows.to.enabled=wt(a).call(a,"to")!=-1,e.arrows.middle.enabled=wt(a).call(a,"middle")!=-1,e.arrows.from.enabled=wt(a).call(a,"from")!=-1}else if(typeof r.arrows=="object")Pi(e.arrows,r.arrows,"to",i.arrows),Pi(e.arrows,r.arrows,"middle",i.arrows),Pi(e.arrows,r.arrows,"from",i.arrows);else throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+Rm(r.arrows));else n===!0&&r.arrows===null&&(e.arrows=dc(i.arrows));if(r.color!==void 0&&r.color!==null){const a=id(r.color)?{color:r.color,highlight:r.color,hover:r.color,inherit:!1,opacity:1}:r.color,l=e.color;if(s)It(l,i.color,!1,n);else for(const c in l)Object.prototype.hasOwnProperty.call(l,c)&&delete l[c];if(id(l))l.color=l,l.highlight=l,l.hover=l,l.inherit=!1,a.opacity===void 0&&(l.opacity=1);else{let c=!1;a.color!==void 0&&(l.color=a.color,c=!0),a.highlight!==void 0&&(l.highlight=a.highlight,c=!0),a.hover!==void 0&&(l.hover=a.hover,c=!0),a.inherit!==void 0&&(l.inherit=a.inherit),a.opacity!==void 0&&(l.opacity=Math.min(1,Math.max(0,a.opacity))),c===!0?l.inherit=!1:l.inherit===void 0&&(l.inherit="from")}}else n===!0&&r.color===null&&(e.color=Qa(i.color));n===!0&&r.font===null&&(e.font=Qa(i.font)),Object.prototype.hasOwnProperty.call(r,"selfReferenceSize")&&(console.warn("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),e.selfReference.size=r.selfReferenceSize)}getFormattingValues(){const e=this.options.arrows.to===!0||this.options.arrows.to.enabled===!0,r=this.options.arrows.from===!0||this.options.arrows.from.enabled===!0,n=this.options.arrows.middle===!0||this.options.arrows.middle.enabled===!0,i=this.options.color.inherit,s={toArrow:e,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,toArrowSrc:this.options.arrows.to.src,toArrowImageWidth:this.options.arrows.to.imageWidth,toArrowImageHeight:this.options.arrows.to.imageHeight,middleArrow:n,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,middleArrowSrc:this.options.arrows.middle.src,middleArrowImageWidth:this.options.arrows.middle.imageWidth,middleArrowImageHeight:this.options.arrows.middle.imageHeight,fromArrow:r,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,fromArrowSrc:this.options.arrows.from.src,fromArrowImageWidth:this.options.arrows.from.imageWidth,fromArrowImageHeight:this.options.arrows.from.imageHeight,arrowStrikethrough:this.options.arrowStrikethrough,color:i?void 0:this.options.color.color,inheritsColor:i,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover)if(this.chooser===!0){if(this.selected){const o=this.options.selectionWidth;typeof o=="function"?s.width=o(s.width):typeof o=="number"&&(s.width+=o),s.width=Math.max(s.width,.3/this.body.view.scale),s.color=this.options.color.highlight,s.shadow=this.options.shadow.enabled}else if(this.hover){const o=this.options.hoverWidth;typeof o=="function"?s.width=o(s.width):typeof o=="number"&&(s.width+=o),s.width=Math.max(s.width,.3/this.body.view.scale),s.color=this.options.color.hover,s.shadow=this.options.shadow.enabled}}else typeof this.chooser=="function"&&(this.chooser(s,this.options.id,this.selected,this.hover),s.color!==void 0&&(s.inheritsColor=!1),s.shadow===!1&&(s.shadowColor!==this.options.shadow.color||s.shadowSize!==this.options.shadow.size||s.shadowX!==this.options.shadow.x||s.shadowY!==this.options.shadow.y)&&(s.shadow=!0));else s.shadow=this.options.shadow.enabled,s.width=Math.max(s.width,.3/this.body.view.scale);return s}updateLabelModule(e){const r=[e,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,r),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}updateEdgeType(){const e=this.options.smooth;let r=!1,n=!0;return this.edgeType!==void 0&&((this.edgeType instanceof kQ&&e.enabled===!0&&e.type==="dynamic"||this.edgeType instanceof OQ&&e.enabled===!0&&e.type==="cubicBezier"||this.edgeType instanceof TQ&&e.enabled===!0&&e.type!=="dynamic"&&e.type!=="cubicBezier"||this.edgeType instanceof jQ&&e.type.enabled===!1)&&(n=!1),n===!0&&(r=this.cleanup())),n===!0?e.enabled===!0?e.type==="dynamic"?(r=!0,this.edgeType=new kQ(this.options,this.body,this.labelModule)):e.type==="cubicBezier"?this.edgeType=new OQ(this.options,this.body,this.labelModule):this.edgeType=new TQ(this.options,this.body,this.labelModule):this.edgeType=new jQ(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),r}connect(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=this.from!==void 0&&this.to!==void 0,this.connected===!0?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}disconnect(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}getTitle(){return this.title}isSelected(){return this.selected}getValue(){return this.options.value}setValueRange(e,r,n){if(this.options.value!==void 0){const i=this.options.scaling.customScalingFunction(e,r,n,this.options.value),s=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){const o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*o}this.options.width=this.options.scaling.min+i*s}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}_setInteractionWidths(){typeof this.options.hoverWidth=="function"?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,typeof this.options.selectionWidth=="function"?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}draw(e){const r=this.getFormattingValues();if(r.hidden)return;const n=this.edgeType.getViaNode();this.edgeType.drawLine(e,r,this.selected,this.hover,n),this.drawLabel(e,n)}drawArrows(e){const r=this.getFormattingValues();if(r.hidden)return;const n=this.edgeType.getViaNode(),i={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,r.fromArrow&&(i.from=this.edgeType.getArrowData(e,"from",n,this.selected,this.hover,r),r.arrowStrikethrough===!1&&(this.edgeType.fromPoint=i.from.core),r.fromArrowSrc&&(i.from.image=this.imagelist.load(r.fromArrowSrc)),r.fromArrowImageWidth&&(i.from.imageWidth=r.fromArrowImageWidth),r.fromArrowImageHeight&&(i.from.imageHeight=r.fromArrowImageHeight)),r.toArrow&&(i.to=this.edgeType.getArrowData(e,"to",n,this.selected,this.hover,r),r.arrowStrikethrough===!1&&(this.edgeType.toPoint=i.to.core),r.toArrowSrc&&(i.to.image=this.imagelist.load(r.toArrowSrc)),r.toArrowImageWidth&&(i.to.imageWidth=r.toArrowImageWidth),r.toArrowImageHeight&&(i.to.imageHeight=r.toArrowImageHeight)),r.middleArrow&&(i.middle=this.edgeType.getArrowData(e,"middle",n,this.selected,this.hover,r),r.middleArrowSrc&&(i.middle.image=this.imagelist.load(r.middleArrowSrc)),r.middleArrowImageWidth&&(i.middle.imageWidth=r.middleArrowImageWidth),r.middleArrowImageHeight&&(i.middle.imageHeight=r.middleArrowImageHeight)),r.fromArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.from),r.middleArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.middle),r.toArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.to)}drawLabel(e,r){if(this.options.label!==void 0){const n=this.from,i=this.to;this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(e,this.selected,this.hover);let s;if(n.id!=i.id){this.labelModule.pointToSelf=!1,s=this.edgeType.getPoint(.5,r),e.save();const o=this._getRotation(e);o.angle!=0&&(e.translate(o.x,o.y),e.rotate(o.angle)),this.labelModule.draw(e,s.x,s.y,this.selected,this.hover),e.restore()}else{this.labelModule.pointToSelf=!0;const o=Mae(e,this.options.selfReference.angle,this.options.selfReference.size,n);s=this._pointOnCircle(o.x,o.y,this.options.selfReference.size,this.options.selfReference.angle),this.labelModule.draw(e,s.x,s.y,this.selected,this.hover)}}}getItemsOnPoint(e){const r=[];if(this.labelModule.visible()){const i=this._getRotation();tR(this.labelModule.getSize(),e,i)&&r.push({edgeId:this.id,labelId:0})}const n={left:e.x,top:e.y};return this.isOverlappingWith(n)&&r.push({edgeId:this.id}),r}isOverlappingWith(e){if(this.connected){const n=this.from.x,i=this.from.y,s=this.to.x,o=this.to.y,a=e.left,l=e.top;return this.edgeType.getDistanceToEdge(n,i,s,o,a,l)<10}else return!1}_getRotation(e){const r=this.edgeType.getViaNode(),n=this.edgeType.getPoint(.5,r);e!==void 0&&this.labelModule.calculateLabelSize(e,this.selected,this.hover,n.x,n.y);const i={x:n.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible()||this.options.font.align==="horizontal")return i;const s=this.from.y-this.to.y,o=this.from.x-this.to.x;let a=Math.atan2(s,o);return(a<-1&&o<0||a>0&&o<0)&&(a+=Math.PI),i.angle=a,i}_pointOnCircle(e,r,n,i){return{x:e+n*Math.cos(i),y:r-n*Math.sin(i)}}select(){this.selected=!0}unselect(){this.selected=!1}cleanup(){return this.edgeType.cleanup()}remove(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}endPointsValid(){return this.body.nodes[this.fromId]!==void 0&&this.body.nodes[this.toId]!==void 0}}class Q$e{constructor(e,r,n){var i;this.body=e,this.images=r,this.groups=n,this.body.functions.createEdge=ne(i=this.create).call(i,this),this.edgesListeners={add:(s,o)=>{this.add(o.items)},update:(s,o)=>{this.update(o.items)},remove:(s,o)=>{this.remove(o.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},endPointOffset:{from:0,to:0},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(s,o,a,l){if(o===s)return .5;{const c=1/(o-s);return Math.max(0,(l-s)*c)}}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},It(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e=this,r,n;this.body.emitter.on("_forceDisableDynamicCurves",function(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i==="dynamic"&&(i="continuous");let o=!1;for(const a in e.body.edges)if(Object.prototype.hasOwnProperty.call(e.body.edges,a)){const l=e.body.edges[a],c=e.body.data.edges.get(a);if(c!=null){const d=c.smooth;d!==void 0&&d.enabled===!0&&d.type==="dynamic"&&(i===void 0?l.setOptions({smooth:!1}):l.setOptions({smooth:{type:i}}),o=!0)}}s===!0&&o===!0&&e.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",()=>{this.reconnectEdges()}),this.body.emitter.on("refreshEdges",ne(r=this.refresh).call(r,this)),this.body.emitter.on("refresh",ne(n=this.refresh).call(n,this)),this.body.emitter.on("destroy",()=>{et(this.edgesListeners,(i,s)=>{this.body.data.edges&&this.body.data.edges.off(s,i)}),delete this.body.functions.createEdge,delete this.edgesListeners.add,delete this.edgesListeners.update,delete this.edgesListeners.remove,delete this.edgesListeners})}setOptions(e){if(e!==void 0){Xa.parseOptions(this.options,e,!0,this.defaultOptions,!0);let r=!1;if(e.smooth!==void 0)for(const n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&(r=this.body.edges[n].updateEdgeType()||r);if(e.font!==void 0)for(const n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&this.body.edges[n].updateLabelModule();(e.hidden!==void 0||e.physics!==void 0||r===!0)&&this.body.emitter.emit("_dataChanged")}}setData(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.data.edges;if(hoe("id",e))this.body.data.edges=e;else if(dr(e))this.body.data.edges=new Wd,this.body.data.edges.add(e);else if(!e)this.body.data.edges=new Wd;else throw new TypeError("Array or DataSet expected");if(n&&et(this.edgesListeners,(i,s)=>{n.off(s,i)}),this.body.edges={},this.body.data.edges){et(this.edgesListeners,(s,o)=>{this.body.data.edges.on(o,s)});const i=this.body.data.edges.getIds();this.add(i,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),r===!1&&this.body.emitter.emit("_dataChanged")}add(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.edges,i=this.body.data.edges;for(let s=0;s<e.length;s++){const o=e[s],a=n[o];a&&a.disconnect();const l=i.get(o,{showInternalIds:!0});n[o]=this.create(l)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),r===!1&&this.body.emitter.emit("_dataChanged")}update(e){const r=this.body.edges,n=this.body.data.edges;let i=!1;for(let s=0;s<e.length;s++){const o=e[s],a=n.get(o),l=r[o];l!==void 0?(l.disconnect(),i=l.setOptions(a)||i,l.connect()):(this.body.edges[o]=this.create(a),i=!0)}i===!0?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}remove(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.length===0)return;const n=this.body.edges;et(e,i=>{const s=n[i];s!==void 0&&s.remove()}),r&&this.body.emitter.emit("_dataChanged")}refresh(){et(this.body.edges,(e,r)=>{const n=this.body.data.edges.get(r);n!==void 0&&e.setOptions(n)})}create(e){return new Xa(e,this.body,this.images,this.options,this.defaultOptions)}reconnectEdges(){let e;const r=this.body.nodes,n=this.body.edges;for(e in r)Object.prototype.hasOwnProperty.call(r,e)&&(r[e].edges=[]);for(e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=n[e];i.from=null,i.to=null,i.connect()}}getConnectedNodes(e){const r=[];if(this.body.edges[e]!==void 0){const n=this.body.edges[e];n.fromId!==void 0&&r.push(n.fromId),n.toId!==void 0&&r.push(n.toId)}return r}_updateState(){this._addMissingEdges(),this._removeInvalidEdges()}_removeInvalidEdges(){const e=[];et(this.body.edges,(r,n)=>{const i=this.body.nodes[r.toId],s=this.body.nodes[r.fromId];i!==void 0&&i.isCluster===!0||s!==void 0&&s.isCluster===!0||(i===void 0||s===void 0)&&e.push(n)}),this.remove(e,!1)}_addMissingEdges(){const e=this.body.data.edges;if(e==null)return;const r=this.body.edges,n=[];Ot(e).call(e,(i,s)=>{r[s]===void 0&&n.push(s)}),this.add(n,!0)}}class Fae{constructor(e,r,n){this.body=e,this.physicsBody=r,this.barnesHutTree,this.setOptions(n),this._rng=Sb("BARNES HUT SOLVER")}setOptions(e){this.options=e,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}solve(){if(this.options.gravitationalConstant!==0&&this.physicsBody.physicsNodeIndices.length>0){let e;const r=this.body.nodes,n=this.physicsBody.physicsNodeIndices,i=n.length,s=this._formBarnesHutTree(r,n);this.barnesHutTree=s;for(let o=0;o<i;o++)e=r[n[o]],e.options.mass>0&&this._getForceContributions(s.root,e)}}_getForceContributions(e,r){this._getForceContribution(e.children.NW,r),this._getForceContribution(e.children.NE,r),this._getForceContribution(e.children.SW,r),this._getForceContribution(e.children.SE,r)}_getForceContribution(e,r){if(e.childrenCount>0){const n=e.centerOfMass.x-r.x,i=e.centerOfMass.y-r.y,s=Math.sqrt(n*n+i*i);s*e.calcSize>this.thetaInversed?this._calculateForces(s,n,i,r,e):e.childrenCount===4?this._getForceContributions(e,r):e.children.data.id!=r.id&&this._calculateForces(s,n,i,r,e)}}_calculateForces(e,r,n,i,s){e===0&&(e=.1,r=e),this.overlapAvoidanceFactor<1&&i.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,e-i.shape.radius));const o=this.options.gravitationalConstant*s.mass*i.options.mass/Math.pow(e,3),a=r*o,l=n*o;this.physicsBody.forces[i.id].x+=a,this.physicsBody.forces[i.id].y+=l}_formBarnesHutTree(e,r){let n;const i=r.length;let s=e[r[0]].x,o=e[r[0]].y,a=e[r[0]].x,l=e[r[0]].y;for(let v=1;v<i;v++){const y=e[r[v]],b=y.x,w=y.y;y.options.mass>0&&(b<s&&(s=b),b>a&&(a=b),w<o&&(o=w),w>l&&(l=w))}const c=Math.abs(a-s)-Math.abs(l-o);c>0?(o-=.5*c,l+=.5*c):(s+=.5*c,a-=.5*c);const h=Math.max(1e-5,Math.abs(a-s)),f=.5*h,p=.5*(s+a),m=.5*(o+l),g={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:p-f,maxX:p+f,minY:m-f,maxY:m+f},size:h,calcSize:1/h,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(g.root);for(let v=0;v<i;v++)n=e[r[v]],n.options.mass>0&&this._placeInTree(g.root,n);return g}_updateBranchMass(e,r){const n=e.centerOfMass,i=e.mass+r.options.mass,s=1/i;n.x=n.x*e.mass+r.x*r.options.mass,n.x*=s,n.y=n.y*e.mass+r.y*r.options.mass,n.y*=s,e.mass=i;const o=Math.max(Math.max(r.height,r.radius),r.width);e.maxWidth=e.maxWidth<o?o:e.maxWidth}_placeInTree(e,r,n){(n!=!0||n===void 0)&&this._updateBranchMass(e,r);const i=e.children.NW.range;let s;i.maxX>r.x?i.maxY>r.y?s="NW":s="SW":i.maxY>r.y?s="NE":s="SE",this._placeInRegion(e,r,s)}_placeInRegion(e,r,n){const i=e.children[n];switch(i.childrenCount){case 0:i.children.data=r,i.childrenCount=1,this._updateBranchMass(i,r);break;case 1:i.children.data.x===r.x&&i.children.data.y===r.y?(r.x+=this._rng(),r.y+=this._rng()):(this._splitBranch(i),this._placeInTree(i,r));break;case 4:this._placeInTree(i,r);break}}_splitBranch(e){let r=null;e.childrenCount===1&&(r=e.children.data,e.mass=0,e.centerOfMass.x=0,e.centerOfMass.y=0),e.childrenCount=4,e.children.data=null,this._insertRegion(e,"NW"),this._insertRegion(e,"NE"),this._insertRegion(e,"SW"),this._insertRegion(e,"SE"),r!=null&&this._placeInTree(e,r)}_insertRegion(e,r){let n,i,s,o;const a=.5*e.size;switch(r){case"NW":n=e.range.minX,i=e.range.minX+a,s=e.range.minY,o=e.range.minY+a;break;case"NE":n=e.range.minX+a,i=e.range.maxX,s=e.range.minY,o=e.range.minY+a;break;case"SW":n=e.range.minX,i=e.range.minX+a,s=e.range.minY+a,o=e.range.maxY;break;case"SE":n=e.range.minX+a,i=e.range.maxX,s=e.range.minY+a,o=e.range.maxY;break}e.children[r]={centerOfMass:{x:0,y:0},mass:0,range:{minX:n,maxX:i,minY:s,maxY:o},size:.5*e.size,calcSize:2*e.calcSize,children:{data:null},maxWidth:0,level:e.level+1,childrenCount:0}}_debug(e,r){this.barnesHutTree!==void 0&&(e.lineWidth=1,this._drawBranch(this.barnesHutTree.root,e,r))}_drawBranch(e,r,n){n===void 0&&(n="#FF0000"),e.childrenCount===4&&(this._drawBranch(e.children.NW,r),this._drawBranch(e.children.NE,r),this._drawBranch(e.children.SE,r),this._drawBranch(e.children.SW,r)),r.strokeStyle=n,r.beginPath(),r.moveTo(e.range.minX,e.range.minY),r.lineTo(e.range.maxX,e.range.minY),r.stroke(),r.beginPath(),r.moveTo(e.range.maxX,e.range.minY),r.lineTo(e.range.maxX,e.range.maxY),r.stroke(),r.beginPath(),r.moveTo(e.range.maxX,e.range.maxY),r.lineTo(e.range.minX,e.range.maxY),r.stroke(),r.beginPath(),r.moveTo(e.range.minX,e.range.maxY),r.lineTo(e.range.minX,e.range.minY),r.stroke()}}class X$e{constructor(e,r,n){this._rng=Sb("REPULSION SOLVER"),this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i,s,o,a,l;const c=this.body.nodes,d=this.physicsBody.physicsNodeIndices,h=this.physicsBody.forces,f=this.options.nodeDistance,p=-2/3/f,m=4/3;for(let g=0;g<d.length-1;g++){a=c[d[g]];for(let v=g+1;v<d.length;v++)l=c[d[v]],e=l.x-a.x,r=l.y-a.y,n=Math.sqrt(e*e+r*r),n===0&&(n=.1*this._rng(),e=n),n<2*f&&(n<.5*f?o=1:o=p*n+m,o=o/n,i=e*o,s=r*o,h[a.id].x-=i,h[a.id].y-=s,h[l.id].x+=i,h[l.id].y+=s)}}}class J$e{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e,this.overlapAvoidanceFactor=Math.max(0,Math.min(1,this.options.avoidOverlap||0))}solve(){const e=this.body.nodes,r=this.physicsBody.physicsNodeIndices,n=this.physicsBody.forces,i=this.options.nodeDistance;for(let s=0;s<r.length-1;s++){const o=e[r[s]];for(let a=s+1;a<r.length;a++){const l=e[r[a]];if(o.level===l.level){const c=i+this.overlapAvoidanceFactor*((o.shape.radius||0)/2+(l.shape.radius||0)/2),d=l.x-o.x,h=l.y-o.y,f=Math.sqrt(d*d+h*h),p=.05;let m;f<c?m=-Math.pow(p*f,2)+Math.pow(p*c,2):m=0,f!==0&&(m=m/f);const g=d*m,v=h*m;n[o.id].x-=g,n[o.id].y-=v,n[l.id].x+=g,n[l.id].y+=v}}}}}class MO{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r;const n=this.physicsBody.physicsEdgeIndices,i=this.body.edges;let s,o,a;for(let l=0;l<n.length;l++)r=i[n[l]],r.connected===!0&&r.toId!==r.fromId&&this.body.nodes[r.toId]!==void 0&&this.body.nodes[r.fromId]!==void 0&&(r.edgeType.via!==void 0?(e=r.options.length===void 0?this.options.springLength:r.options.length,s=r.to,o=r.edgeType.via,a=r.from,this._calculateSpringForce(s,o,.5*e),this._calculateSpringForce(o,a,.5*e)):(e=r.options.length===void 0?this.options.springLength*1.5:r.options.length,this._calculateSpringForce(r.from,r.to,e)))}_calculateSpringForce(e,r,n){const i=e.x-r.x,s=e.y-r.y,o=Math.max(Math.sqrt(i*i+s*s),.01),a=this.options.springConstant*(n-o)/o,l=i*a,c=s*a;this.physicsBody.forces[e.id]!==void 0&&(this.physicsBody.forces[e.id].x+=l,this.physicsBody.forces[e.id].y+=c),this.physicsBody.forces[r.id]!==void 0&&(this.physicsBody.forces[r.id].x-=l,this.physicsBody.forces[r.id].y-=c)}}class Z$e{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i,s,o,a,l;const c=this.body.edges,d=.5,h=this.physicsBody.physicsEdgeIndices,f=this.physicsBody.physicsNodeIndices,p=this.physicsBody.forces;for(let x=0;x<f.length;x++){const S=f[x];p[S].springFx=0,p[S].springFy=0}for(let x=0;x<h.length;x++)r=c[h[x]],r.connected===!0&&(e=r.options.length===void 0?this.options.springLength:r.options.length,n=r.from.x-r.to.x,i=r.from.y-r.to.y,l=Math.sqrt(n*n+i*i),l=l===0?.01:l,a=this.options.springConstant*(e-l)/l,s=n*a,o=i*a,r.to.level!=r.from.level?(p[r.toId]!==void 0&&(p[r.toId].springFx-=s,p[r.toId].springFy-=o),p[r.fromId]!==void 0&&(p[r.fromId].springFx+=s,p[r.fromId].springFy+=o)):(p[r.toId]!==void 0&&(p[r.toId].x-=d*s,p[r.toId].y-=d*o),p[r.fromId]!==void 0&&(p[r.fromId].x+=d*s,p[r.fromId].y+=d*o)));a=1;let m,g;for(let x=0;x<f.length;x++){const S=f[x];m=Math.min(a,Math.max(-a,p[S].springFx)),g=Math.min(a,Math.max(-a,p[S].springFy)),p[S].x+=m,p[S].y+=g}let v=0,y=0;for(let x=0;x<f.length;x++){const S=f[x];v+=p[S].x,y+=p[S].y}const b=v/f.length,w=y/f.length;for(let x=0;x<f.length;x++){const S=f[x];p[S].x-=b,p[S].y-=w}}}class cy{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i;const s=this.body.nodes,o=this.physicsBody.physicsNodeIndices,a=this.physicsBody.forces;for(let l=0;l<o.length;l++){const c=o[l];i=s[c],e=-i.x,r=-i.y,n=Math.sqrt(e*e+r*r),this._calculateForces(n,e,r,a,i)}}_calculateForces(e,r,n,i,s){const o=e===0?0:this.options.centralGravity/e;i[s.id].x=r*o,i[s.id].y=n*o}}class eDe extends Fae{constructor(e,r,n){super(e,r,n),this._rng=Sb("FORCE ATLAS 2 BASED REPULSION SOLVER")}_calculateForces(e,r,n,i,s){e===0&&(e=.1*this._rng(),r=e),this.overlapAvoidanceFactor<1&&i.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,e-i.shape.radius));const o=i.edges.length+1,a=this.options.gravitationalConstant*s.mass*i.options.mass*o/Math.pow(e,2),l=r*a,c=n*a;this.physicsBody.forces[i.id].x+=l,this.physicsBody.forces[i.id].y+=c}}class tDe extends cy{constructor(e,r,n){super(e,r,n)}_calculateForces(e,r,n,i,s){if(e>0){const o=s.edges.length+1,a=this.options.centralGravity*o*s.options.mass;i[s.id].x=r*a,i[s.id].y=n*a}}}class rDe{constructor(e){this.body=e,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}},_r(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("initPhysics",()=>{this.initPhysics()}),this.body.emitter.on("_layoutFailed",()=>{this.layoutFailed=!0}),this.body.emitter.on("resetPhysics",()=>{this.stopSimulation(),this.ready=!1}),this.body.emitter.on("disablePhysics",()=>{this.physicsEnabled=!1,this.stopSimulation()}),this.body.emitter.on("restorePhysics",()=>{this.setOptions(this.options),this.ready===!0&&this.startSimulation()}),this.body.emitter.on("startSimulation",()=>{this.ready===!0&&this.startSimulation()}),this.body.emitter.on("stopSimulation",()=>{this.stopSimulation()}),this.body.emitter.on("destroy",()=>{this.stopSimulation(!1),this.body.emitter.off()}),this.body.emitter.on("_dataChanged",()=>{this.updatePhysicsData()})}setOptions(e){if(e!==void 0)if(e===!1)this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation();else if(e===!0)this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation();else{this.physicsEnabled=!0,Gv(["stabilization"],this.options,e),Pi(this.options,e,"stabilization"),e.enabled===void 0&&(this.options.enabled=!0),this.options.enabled===!1&&(this.physicsEnabled=!1,this.stopSimulation());const r=this.options.wind;r&&((typeof r.x!="number"||eR(r.x))&&(r.x=0),(typeof r.y!="number"||eR(r.y))&&(r.y=0)),this.timestep=this.options.timestep}this.init()}init(){let e;this.options.solver==="forceAtlas2Based"?(e=this.options.forceAtlas2Based,this.nodesSolver=new eDe(this.body,this.physicsBody,e),this.edgesSolver=new MO(this.body,this.physicsBody,e),this.gravitySolver=new tDe(this.body,this.physicsBody,e)):this.options.solver==="repulsion"?(e=this.options.repulsion,this.nodesSolver=new X$e(this.body,this.physicsBody,e),this.edgesSolver=new MO(this.body,this.physicsBody,e),this.gravitySolver=new cy(this.body,this.physicsBody,e)):this.options.solver==="hierarchicalRepulsion"?(e=this.options.hierarchicalRepulsion,this.nodesSolver=new J$e(this.body,this.physicsBody,e),this.edgesSolver=new Z$e(this.body,this.physicsBody,e),this.gravitySolver=new cy(this.body,this.physicsBody,e)):(e=this.options.barnesHut,this.nodesSolver=new Fae(this.body,this.physicsBody,e),this.edgesSolver=new MO(this.body,this.physicsBody,e),this.gravitySolver=new cy(this.body,this.physicsBody,e)),this.modelOptions=e}initPhysics(){this.physicsEnabled===!0&&this.options.enabled===!0?this.options.stabilization.enabled===!0?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}startSimulation(){if(this.physicsEnabled===!0&&this.options.enabled===!0){if(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),this.viewFunction===void 0){var e;this.viewFunction=ne(e=this.simulationStep).call(e,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}else this.body.emitter.emit("_redraw")}stopSimulation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.stabilized=!0,e===!0&&this._emitStabilized(),this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,e===!0&&this.body.emitter.emit("_stopRendering"))}simulationStep(){const e=Uv();this.physicsTick(),(Uv()-e<.4*this.simulationInterval||this.runDoubleSpeed===!0)&&this.stabilized===!1&&(this.physicsTick(),this.runDoubleSpeed=!0),this.stabilized===!0&&this.stopSimulation()}_emitStabilized(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.stabilizationIterations;(this.stabilizationIterations>1||this.startedStabilization===!0)&&So(()=>{this.body.emitter.emit("stabilized",{iterations:e}),this.startedStabilization=!1,this.stabilizationIterations=0},0)}physicsStep(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}adjustTimeStep(){this._evaluateStepQuality()===!0?this.timestep=1.2*this.timestep:this.timestep/1.2<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/1.2))}physicsTick(){this._startStabilizing(),this.stabilized!==!0&&(this.adaptiveTimestep===!0&&this.adaptiveTimestepEnabled===!0?(this.adaptiveCounter%this.adaptiveInterval===0?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1):(this.timestep=this.options.timestep,this.physicsStep()),this.stabilized===!0&&this.revert(),this.stabilizationIterations++)}updatePhysicsData(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];const e=this.body.nodes,r=this.body.edges;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&e[n].options.physics===!0&&this.physicsBody.physicsNodeIndices.push(e[n].id);for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&r[n].options.physics===!0&&this.physicsBody.physicsEdgeIndices.push(r[n].id);for(let n=0;n<this.physicsBody.physicsNodeIndices.length;n++){const i=this.physicsBody.physicsNodeIndices[n];this.physicsBody.forces[i]={x:0,y:0},this.physicsBody.velocities[i]===void 0&&(this.physicsBody.velocities[i]={x:0,y:0})}for(const n in this.physicsBody.velocities)e[n]===void 0&&delete this.physicsBody.velocities[n]}revert(){const e=ar(this.previousStates),r=this.body.nodes,n=this.physicsBody.velocities;this.referenceState={};for(let i=0;i<e.length;i++){const s=e[i];r[s]!==void 0?r[s].options.physics===!0&&(this.referenceState[s]={positions:{x:r[s].x,y:r[s].y}},n[s].x=this.previousStates[s].vx,n[s].y=this.previousStates[s].vy,r[s].x=this.previousStates[s].x,r[s].y=this.previousStates[s].y):delete this.previousStates[s]}}_evaluateStepQuality(){let e,r,n;const i=this.body.nodes,s=this.referenceState,o=.3;for(const a in this.referenceState)if(Object.prototype.hasOwnProperty.call(this.referenceState,a)&&i[a]!==void 0&&(e=i[a].x-s[a].positions.x,r=i[a].y-s[a].positions.y,n=Math.sqrt(Math.pow(e,2)+Math.pow(r,2)),n>o))return!1;return!0}moveNodes(){const e=this.physicsBody.physicsNodeIndices;let r=0,n=0;const i=5;for(let s=0;s<e.length;s++){const o=e[s],a=this._performStep(o);r=Math.max(r,a),n+=a}this.adaptiveTimestepEnabled=n/e.length<i,this.stabilized=r<this.options.minVelocity}calculateComponentVelocity(e,r,n){const i=this.modelOptions.damping*e,s=(r-i)/n;e+=s*this.timestep;const o=this.options.maxVelocity||1e9;return Math.abs(e)>o&&(e=e>0?o:-o),e}_performStep(e){const r=this.body.nodes[e],n=this.physicsBody.forces[e];this.options.wind&&(n.x+=this.options.wind.x,n.y+=this.options.wind.y);const i=this.physicsBody.velocities[e];return this.previousStates[e]={x:r.x,y:r.y,vx:i.x,vy:i.y},r.options.fixed.x===!1?(i.x=this.calculateComponentVelocity(i.x,n.x,r.options.mass),r.x+=i.x*this.timestep):(n.x=0,i.x=0),r.options.fixed.y===!1?(i.y=this.calculateComponentVelocity(i.y,n.y,r.options.mass),r.y+=i.y*this.timestep):(n.y=0,i.y=0),Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2))}_freezeNodes(){const e=this.body.nodes;for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&e[r].x&&e[r].y){const n=e[r].options.fixed;this.freezeCache[r]={x:n.x,y:n.y},n.x=!0,n.y=!0}}_restoreFrozenNodes(){const e=this.body.nodes;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&this.freezeCache[r]!==void 0&&(e[r].options.fixed.x=this.freezeCache[r].x,e[r].options.fixed.y=this.freezeCache[r].y);this.freezeCache={}}stabilize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.stabilization.iterations;if(typeof e!="number"&&(e=this.options.stabilization.iterations,console.error("The stabilize method needs a numeric amount of iterations. Switching to default: ",e)),this.physicsBody.physicsNodeIndices.length===0){this.ready=!0;return}this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=e,this.options.stabilization.onlyDynamicEdges===!0&&this._freezeNodes(),this.stabilizationIterations=0,So(()=>this._stabilizationBatch(),0)}_startStabilizing(){return this.startedStabilization===!0?!1:(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}_stabilizationBatch(){const e=()=>this.stabilized===!1&&this.stabilizationIterations<this.targetIterations,r=()=>{this.body.emitter.emit("stabilizationProgress",{iterations:this.stabilizationIterations,total:this.targetIterations})};this._startStabilizing()&&r();let n=0;for(;e()&&n<this.options.stabilization.updateInterval;)this.physicsTick(),n++;if(r(),e()){var i;So(ne(i=this._stabilizationBatch).call(i,this),0)}else this._finalizeStabilization()}_finalizeStabilization(){this.body.emitter.emit("_allowRedraw"),this.options.stabilization.fit===!0&&this.body.emitter.emit("fit"),this.options.stabilization.onlyDynamicEdges===!0&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),this.stabilized===!0?this._emitStabilized():this.startSimulation(),this.ready=!0}_drawForces(e){for(let r=0;r<this.physicsBody.physicsNodeIndices.length;r++){const n=this.physicsBody.physicsNodeIndices[r],i=this.body.nodes[n],s=this.physicsBody.forces[n],o=20,a=.03,l=Math.sqrt(Math.pow(s.x,2)+Math.pow(s.x,2)),c=Math.min(Math.max(5,l),15),d=3*c,h=XI((180-Math.min(1,Math.max(0,a*l))*180)/360,1,1),f={x:i.x+o*s.x,y:i.y+o*s.y};e.lineWidth=c,e.strokeStyle=h,e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(f.x,f.y),e.stroke();const p=Math.atan2(s.y,s.x);e.fillStyle=h,$ae.draw(e,{type:"arrow",point:f,angle:p,length:d}),Mm(e).call(e)}}}const Jr=[];for(let t=0;t<256;++t)Jr.push((t+256).toString(16).slice(1));function nDe(t,e=0){return(Jr[t[e+0]]+Jr[t[e+1]]+Jr[t[e+2]]+Jr[t[e+3]]+"-"+Jr[t[e+4]]+Jr[t[e+5]]+"-"+Jr[t[e+6]]+Jr[t[e+7]]+"-"+Jr[t[e+8]]+Jr[t[e+9]]+"-"+Jr[t[e+10]]+Jr[t[e+11]]+Jr[t[e+12]]+Jr[t[e+13]]+Jr[t[e+14]]+Jr[t[e+15]]).toLowerCase()}let AO;const iDe=new Uint8Array(16);function sDe(){if(!AO){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");AO=crypto.getRandomValues.bind(crypto)}return AO(iDe)}const oDe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var PQ={randomUUID:oDe};function aDe(t,e,r){var i;t=t||{};const n=t.random??((i=t.rng)==null?void 0:i.call(t))??sDe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,nDe(n)}function zf(t,e,r){return PQ.randomUUID&&!t?PQ.randomUUID():aDe(t)}class Cn{constructor(){}static getRange(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=1e9,i=-1e9,s=1e9,o=-1e9,a;if(r.length>0)for(let l=0;l<r.length;l++)a=e[r[l]],s>a.shape.boundingBox.left&&(s=a.shape.boundingBox.left),o<a.shape.boundingBox.right&&(o=a.shape.boundingBox.right),n>a.shape.boundingBox.top&&(n=a.shape.boundingBox.top),i<a.shape.boundingBox.bottom&&(i=a.shape.boundingBox.bottom);return s===1e9&&o===-1e9&&n===1e9&&i===-1e9&&(n=0,i=0,s=0,o=0),{minX:s,maxX:o,minY:n,maxY:i}}static getRangeCore(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=1e9,i=-1e9,s=1e9,o=-1e9,a;if(r.length>0)for(let l=0;l<r.length;l++)a=e[r[l]],s>a.x&&(s=a.x),o<a.x&&(o=a.x),n>a.y&&(n=a.y),i<a.y&&(i=a.y);return s===1e9&&o===-1e9&&n===1e9&&i===-1e9&&(n=0,i=0,s=0,o=0),{minX:s,maxX:o,minY:n,maxY:i}}static findCenter(e){return{x:.5*(e.maxX+e.minX),y:.5*(e.maxY+e.minY)}}static cloneOptions(e,r){const n={};return r===void 0||r==="node"?(It(n,e.options,!0),n.x=e.x,n.y=e.y,n.amountOfConnections=e.edges.length):It(n,e.options,!0),n}}class lDe extends zt{constructor(e,r,n,i,s,o){super(e,r,n,i,s,o),this.isCluster=!0,this.containedNodes={},this.containedEdges={}}_openChildCluster(e){const r=this.body.nodes[e];if(this.containedNodes[e]===void 0)throw new Error("node with id: "+e+" not in current cluster");if(!r.isCluster)throw new Error("node with id: "+e+" is not a cluster");delete this.containedNodes[e],et(r.edges,n=>{delete this.containedEdges[n.id]}),et(r.containedNodes,(n,i)=>{this.containedNodes[i]=n}),r.containedNodes={},et(r.containedEdges,(n,i)=>{this.containedEdges[i]=n}),r.containedEdges={},et(r.edges,n=>{et(this.edges,i=>{var s,o;const a=wt(s=i.clusteringEdgeReplacingIds).call(s,n.id);a!==-1&&(et(n.clusteringEdgeReplacingIds,l=>{i.clusteringEdgeReplacingIds.push(l),this.body.edges[l].edgeReplacedById=i.id}),wo(o=i.clusteringEdgeReplacingIds).call(o,a,1))})}),r.edges=[]}}class cDe{constructor(e){this.body=e,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},_r(this.options,this.defaultOptions),this.body.emitter.on("_resetData",()=>{this.clusteredNodes={},this.clusteredEdges={}})}clusterByHubsize(e,r){e===void 0?e=this._getHubSize():typeof e=="object"&&(r=this._checkOptions(e),e=this._getHubSize());const n=[];for(let i=0;i<this.body.nodeIndices.length;i++){const s=this.body.nodes[this.body.nodeIndices[i]];s.edges.length>=e&&n.push(s.id)}for(let i=0;i<n.length;i++)this.clusterByConnection(n[i],r,!0);this.body.emitter.emit("_dataChanged")}cluster(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.joinCondition===void 0)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");e=this._checkOptions(e);const n={},i={};et(this.body.nodes,(s,o)=>{s.options&&e.joinCondition(s.options)===!0&&(n[o]=s,et(s.edges,a=>{this.clusteredEdges[a.id]===void 0&&(i[a.id]=a)}))}),this._cluster(n,i,e,r)}clusterByEdgeCount(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;r=this._checkOptions(r);const i=[],s={};let o,a,l;for(let c=0;c<this.body.nodeIndices.length;c++){const d={},h={},f=this.body.nodeIndices[c],p=this.body.nodes[f];if(s[f]===void 0){l=0,a=[];for(let m=0;m<p.edges.length;m++)o=p.edges[m],this.clusteredEdges[o.id]===void 0&&(o.toId!==o.fromId&&l++,a.push(o));if(l===e){const m=function(v){if(r.joinCondition===void 0||r.joinCondition===null)return!0;const y=Cn.cloneOptions(v);return r.joinCondition(y)};let g=!0;for(let v=0;v<a.length;v++){o=a[v];const y=this._getConnectedId(o,f);if(m(p))h[o.id]=o,d[f]=p,d[y]=this.body.nodes[y],s[f]=!0;else{g=!1;break}}if(ar(d).length>0&&ar(h).length>0&&g===!0){const y=function(){for(let b=0;b<i.length;++b)for(const w in d)if(i[b].nodes[w]!==void 0)return i[b]}();if(y!==void 0){for(const b in d)y.nodes[b]===void 0&&(y.nodes[b]=d[b]);for(const b in h)y.edges[b]===void 0&&(y.edges[b]=h[b])}else i.push({nodes:d,edges:h})}}}}for(let c=0;c<i.length;c++)this._cluster(i[c].nodes,i[c].edges,r,!1);n===!0&&this.body.emitter.emit("_dataChanged")}clusterOutliers(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(1,e,r)}clusterBridges(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(2,e,r)}clusterByConnection(e,r){var n;let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0)throw new Error("No nodeId supplied to clusterByConnection!");if(this.body.nodes[e]===void 0)throw new Error("The nodeId given to clusterByConnection does not exist!");const s=this.body.nodes[e];r=this._checkOptions(r,s),r.clusterNodeProperties.x===void 0&&(r.clusterNodeProperties.x=s.x),r.clusterNodeProperties.y===void 0&&(r.clusterNodeProperties.y=s.y),r.clusterNodeProperties.fixed===void 0&&(r.clusterNodeProperties.fixed={},r.clusterNodeProperties.fixed.x=s.options.fixed.x,r.clusterNodeProperties.fixed.y=s.options.fixed.y);const o={},a={},l=s.id,c=Cn.cloneOptions(s);o[l]=s;for(let h=0;h<s.edges.length;h++){const f=s.edges[h];if(this.clusteredEdges[f.id]===void 0){const p=this._getConnectedId(f,l);if(this.clusteredNodes[p]===void 0)if(p!==l)if(r.joinCondition===void 0)a[f.id]=f,o[p]=this.body.nodes[p];else{const m=Cn.cloneOptions(this.body.nodes[p]);r.joinCondition(c,m)===!0&&(a[f.id]=f,o[p]=this.body.nodes[p])}else a[f.id]=f}}const d=Kd(n=ar(o)).call(n,function(h){return o[h].id});for(const h in o){if(!Object.prototype.hasOwnProperty.call(o,h))continue;const f=o[h];for(let p=0;p<f.edges.length;p++){const m=f.edges[p];wt(d).call(d,this._getConnectedId(m,f.id))>-1&&(a[m.id]=m)}}this._cluster(o,a,r,i)}_createClusterEdges(e,r,n,i){let s,o,a,l,c,d;const h=ar(e),f=[];for(let g=0;g<h.length;g++){o=h[g],a=e[o];for(let v=0;v<a.edges.length;v++)s=a.edges[v],this.clusteredEdges[s.id]===void 0&&(s.toId==s.fromId?r[s.id]=s:s.toId==o?(l=n.id,c=s.fromId,d=c):(l=s.toId,c=n.id,d=l),e[d]===void 0&&f.push({edge:s,fromId:c,toId:l}))}const p=[],m=function(g){for(let v=0;v<p.length;v++){const y=p[v],b=g.fromId===y.fromId&&g.toId===y.toId,w=g.fromId===y.toId&&g.toId===y.fromId;if(b||w)return y}return null};for(let g=0;g<f.length;g++){const v=f[g],y=v.edge;let b=m(v);b===null?(b=this._createClusteredEdge(v.fromId,v.toId,y,i),p.push(b)):b.clusteringEdgeReplacingIds.push(y.id),this.body.edges[y.id].edgeReplacedById=b.id,this._backupEdgeOptions(y),y.setOptions({physics:!1})}}_checkOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.clusterEdgeProperties===void 0&&(e.clusterEdgeProperties={}),e.clusterNodeProperties===void 0&&(e.clusterNodeProperties={}),e}_cluster(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;const s=[];for(const d in e)Object.prototype.hasOwnProperty.call(e,d)&&this.clusteredNodes[d]!==void 0&&s.push(d);for(let d=0;d<s.length;++d)delete e[s[d]];if(ar(e).length==0||ar(e).length==1&&n.clusterNodeProperties.allowSingleNodeCluster!=!0)return;let o=It({},n.clusterNodeProperties);if(n.processProperties!==void 0){const d=[];for(const f in e)if(Object.prototype.hasOwnProperty.call(e,f)){const p=Cn.cloneOptions(e[f]);d.push(p)}const h=[];for(const f in r)if(Object.prototype.hasOwnProperty.call(r,f)&&f.substr(0,12)!=="clusterEdge:"){const p=Cn.cloneOptions(r[f],"edge");h.push(p)}if(o=n.processProperties(o,d,h),!o)throw new Error("The processProperties function does not return properties!")}o.id===void 0&&(o.id="cluster:"+zf());const a=o.id;o.label===void 0&&(o.label="cluster");let l;o.x===void 0&&(l=this._getClusterPosition(e),o.x=l.x),o.y===void 0&&(l===void 0&&(l=this._getClusterPosition(e)),o.y=l.y),o.id=a;const c=this.body.functions.createNode(o,lDe);c.containedNodes=e,c.containedEdges=r,c.clusterEdgeProperties=n.clusterEdgeProperties,this.body.nodes[o.id]=c,this._clusterEdges(e,r,o,n.clusterEdgeProperties),o.id=void 0,i===!0&&this.body.emitter.emit("_dataChanged")}_backupEdgeOptions(e){this.clusteredEdges[e.id]===void 0&&(this.clusteredEdges[e.id]={physics:e.options.physics})}_restoreEdge(e){const r=this.clusteredEdges[e.id];r!==void 0&&(e.setOptions({physics:r.physics}),delete this.clusteredEdges[e.id])}isCluster(e){return this.body.nodes[e]!==void 0?this.body.nodes[e].isCluster===!0:(console.error("Node does not exist."),!1)}_getClusterPosition(e){const r=ar(e);let n=e[r[0]].x,i=e[r[0]].x,s=e[r[0]].y,o=e[r[0]].y,a;for(let l=1;l<r.length;l++)a=e[r[l]],n=a.x<n?a.x:n,i=a.x>i?a.x:i,s=a.y<s?a.y:s,o=a.y>o?a.y:o;return{x:.5*(n+i),y:.5*(s+o)}}openCluster(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0)throw new Error("No clusterNodeId supplied to openCluster.");const i=this.body.nodes[e];if(i===void 0)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(i.isCluster!==!0||i.containedNodes===void 0||i.containedEdges===void 0)throw new Error("The node:"+e+" is not a valid cluster.");const s=this.findNode(e),o=wt(s).call(s,e)-1;if(o>=0){const d=s[o];this.body.nodes[d]._openChildCluster(e),delete this.body.nodes[e],n===!0&&this.body.emitter.emit("_dataChanged");return}const a=i.containedNodes,l=i.containedEdges;if(r!==void 0&&r.releaseFunction!==void 0&&typeof r.releaseFunction=="function"){const d={},h={x:i.x,y:i.y};for(const p in a)if(Object.prototype.hasOwnProperty.call(a,p)){const m=this.body.nodes[p];d[p]={x:m.x,y:m.y}}const f=r.releaseFunction(h,d);for(const p in a)if(Object.prototype.hasOwnProperty.call(a,p)){const m=this.body.nodes[p];f[p]!==void 0&&(m.x=f[p].x===void 0?i.x:f[p].x,m.y=f[p].y===void 0?i.y:f[p].y)}}else et(a,function(d){d.options.fixed.x===!1&&(d.x=i.x),d.options.fixed.y===!1&&(d.y=i.y)});for(const d in a)if(Object.prototype.hasOwnProperty.call(a,d)){const h=this.body.nodes[d];h.vx=i.vx,h.vy=i.vy,h.setOptions({physics:!0}),delete this.clusteredNodes[d]}const c=[];for(let d=0;d<i.edges.length;d++)c.push(i.edges[d]);for(let d=0;d<c.length;d++){const h=c[d],f=this._getConnectedId(h,e),p=this.clusteredNodes[f];for(let m=0;m<h.clusteringEdgeReplacingIds.length;m++){const g=h.clusteringEdgeReplacingIds[m],v=this.body.edges[g];if(v!==void 0)if(p!==void 0){const y=this.body.nodes[p.clusterId];y.containedEdges[v.id]=v,delete l[v.id];let b=v.fromId,w=v.toId;v.toId==f?w=p.clusterId:b=p.clusterId,this._createClusteredEdge(b,w,v,y.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(v)}h.remove()}for(const d in l)Object.prototype.hasOwnProperty.call(l,d)&&this._restoreEdge(l[d]);delete this.body.nodes[e],n===!0&&this.body.emitter.emit("_dataChanged")}getNodesInCluster(e){const r=[];if(this.isCluster(e)===!0){const n=this.body.nodes[e].containedNodes;for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&r.push(this.body.nodes[i].id)}return r}findNode(e){const r=[];let i=0,s;for(;this.clusteredNodes[e]!==void 0&&i<100;){if(s=this.body.nodes[e],s===void 0)return[];r.push(s.id),e=this.clusteredNodes[e].clusterId,i++}return s=this.body.nodes[e],s===void 0?[]:(r.push(s.id),uc(r).call(r),r)}updateClusteredNode(e,r){if(e===void 0)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(r===void 0)throw new Error("No newOptions supplied to updateClusteredNode.");if(this.body.nodes[e]===void 0)throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[e].setOptions(r),this.body.emitter.emit("_dataChanged")}updateEdge(e,r){if(e===void 0)throw new Error("No startEdgeId supplied to updateEdge.");if(r===void 0)throw new Error("No newOptions supplied to updateEdge.");if(this.body.edges[e]===void 0)throw new Error("The startEdgeId supplied to updateEdge does not exist.");const n=this.getClusteredEdges(e);for(let i=0;i<n.length;i++)this.body.edges[n[i]].setOptions(r);this.body.emitter.emit("_dataChanged")}getClusteredEdges(e){const r=[];let i=0;for(;e!==void 0&&this.body.edges[e]!==void 0&&i<100;)r.push(this.body.edges[e].id),e=this.body.edges[e].edgeReplacedById,i++;return uc(r).call(r),r}getBaseEdge(e){return this.getBaseEdges(e)[0]}getBaseEdges(e){const r=[e],n=[],i=[],s=100;let o=0;for(;r.length>0&&o<s;){const a=r.pop();if(a===void 0)continue;const l=this.body.edges[a];if(l===void 0)continue;o++;const c=l.clusteringEdgeReplacingIds;if(c===void 0)i.push(a);else for(let d=0;d<c.length;++d){const h=c[d];wt(r).call(r,c)!==-1||wt(n).call(n,c)!==-1||r.push(h)}n.push(a)}return i}_getConnectedId(e,r){return e.toId!=r?e.toId:(e.fromId!=r,e.fromId)}_getHubSize(){let e=0,r=0,n=0,i=0;for(let l=0;l<this.body.nodeIndices.length;l++){const c=this.body.nodes[this.body.nodeIndices[l]];c.edges.length>i&&(i=c.edges.length),e+=c.edges.length,r+=Math.pow(c.edges.length,2),n+=1}e=e/n,r=r/n;const s=r-Math.pow(e,2),o=Math.sqrt(s);let a=Math.floor(e+2*o);return a>i&&(a=i),a}_createClusteredEdge(e,r,n,i,s){const o=Cn.cloneOptions(n,"edge");It(o,i),o.from=e,o.to=r,o.id="clusterEdge:"+zf(),s!==void 0&&It(o,s);const a=this.body.functions.createEdge(o);return a.clusteringEdgeReplacingIds=[n.id],a.connect(),this.body.edges[a.id]=a,a}_clusterEdges(e,r,n,i){if(r instanceof Xa){const s=r,o={};o[s.id]=s,r=o}if(e instanceof zt){const s=e,o={};o[s.id]=s,e=o}if(n==null)throw new Error("_clusterEdges: parameter clusterNode required");i===void 0&&(i=n.clusterEdgeProperties),this._createClusterEdges(e,r,n,i);for(const s in r)if(Object.prototype.hasOwnProperty.call(r,s)&&this.body.edges[s]!==void 0){const o=this.body.edges[s];this._backupEdgeOptions(o),o.setOptions({physics:!1})}for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(this.clusteredNodes[s]={clusterId:n.id,node:this.body.nodes[s]},this.body.nodes[s].setOptions({physics:!1}))}_getClusterNodeForNode(e){if(e===void 0)return;const r=this.clusteredNodes[e];if(r===void 0)return;const n=r.clusterId;if(n!==void 0)return this.body.nodes[n]}_filter(e,r){const n=[];return et(e,i=>{r(i)&&n.push(i)}),n}_updateState(){let e;const r=[],n={},i=l=>{et(this.body.nodes,c=>{c.isCluster===!0&&l(c)})};for(e in this.clusteredNodes){if(!Object.prototype.hasOwnProperty.call(this.clusteredNodes,e))continue;this.body.nodes[e]===void 0&&r.push(e)}i(function(l){for(let c=0;c<r.length;c++)delete l.containedNodes[r[c]]});for(let l=0;l<r.length;l++)delete this.clusteredNodes[r[l]];et(this.clusteredEdges,l=>{const c=this.body.edges[l];(c===void 0||!c.endPointsValid())&&(n[l]=l)}),i(function(l){et(l.containedEdges,(c,d)=>{!c.endPointsValid()&&!n[d]&&(n[d]=d)})}),et(this.body.edges,(l,c)=>{let d=!0;const h=l.clusteringEdgeReplacingIds;if(h!==void 0){let f=0;et(h,p=>{const m=this.body.edges[p];m!==void 0&&m.endPointsValid()&&(f+=1)}),d=f>0}(!l.endPointsValid()||!d)&&(n[c]=c)}),i(l=>{et(n,c=>{delete l.containedEdges[c],et(l.edges,(d,h)=>{if(d.id===c){l.edges[h]=null;return}d.clusteringEdgeReplacingIds=this._filter(d.clusteringEdgeReplacingIds,function(f){return!n[f]})}),l.edges=this._filter(l.edges,function(d){return d!==null})})}),et(n,l=>{delete this.clusteredEdges[l]}),et(n,l=>{delete this.body.edges[l]});const s=ar(this.body.edges);et(s,l=>{const c=this.body.edges[l],d=this._isClusteredNode(c.fromId)||this._isClusteredNode(c.toId);if(d!==this._isClusteredEdge(c.id))if(d){const h=this._getClusterNodeForNode(c.fromId);h!==void 0&&this._clusterEdges(this.body.nodes[c.fromId],c,h);const f=this._getClusterNodeForNode(c.toId);f!==void 0&&this._clusterEdges(this.body.nodes[c.toId],c,f)}else delete this._clusterEdges[l],this._restoreEdge(c)});let o=!1,a=!0;for(;a;){const l=[];i(function(c){const d=ar(c.containedNodes).length,h=c.options.allowSingleNodeCluster===!0;(h&&d<1||!h&&d<2)&&l.push(c.id)});for(let c=0;c<l.length;++c)this.openCluster(l[c],{},!1);a=l.length>0,o=o||a}o&&this._updateState()}_isClusteredNode(e){return this.clusteredNodes[e]!==void 0}_isClusteredEdge(e){return this.clusteredEdges[e]!==void 0}}class uDe{constructor(e,r){this.body=e,this.canvas=r,this.redrawRequested=!1,this.requestAnimationFrameRequestId=void 0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},_r(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e;this.body.emitter.on("dragStart",()=>{this.dragging=!0}),this.body.emitter.on("dragEnd",()=>{this.dragging=!1}),this.body.emitter.on("zoom",()=>{this.zooming=!0,window.clearTimeout(this.zoomTimeoutId),this.zoomTimeoutId=So(()=>{var r;this.zooming=!1,ne(r=this._requestRedraw).call(r,this)()},250)}),this.body.emitter.on("_resizeNodes",()=>{this._resizeNodes()}),this.body.emitter.on("_redraw",()=>{this.renderingActive===!1&&this._redraw()}),this.body.emitter.on("_blockRedraw",()=>{this.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",()=>{this.allowRedraw=!0,this.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",ne(e=this._requestRedraw).call(e,this)),this.body.emitter.on("_startRendering",()=>{this.renderRequests+=1,this.renderingActive=!0,this._startRendering()}),this.body.emitter.on("_stopRendering",()=>{this.renderRequests-=1,this.renderingActive=this.renderRequests>0,this.requestAnimationFrameRequestId=void 0}),this.body.emitter.on("destroy",()=>{this.renderRequests=0,this.allowRedraw=!1,this.renderingActive=!1,window.cancelAnimationFrame(this.requestAnimationFrameRequestId),this.body.emitter.off()})}setOptions(e){e!==void 0&&Rh(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"],this.options,e)}_startRendering(){if(this.renderingActive===!0&&this.requestAnimationFrameRequestId===void 0){var e;this.requestAnimationFrameRequestId=window.requestAnimationFrame(ne(e=this._renderStep).call(e,this),this.simulationInterval)}}_renderStep(){this.renderingActive===!0&&(this.requestAnimationFrameRequestId=void 0,this._startRendering(),this._redraw())}redraw(){this.body.emitter.emit("setSize"),this._redraw()}_requestRedraw(){this.redrawRequested!==!0&&this.renderingActive===!1&&this.allowRedraw===!0&&(this.redrawRequested=!0,window.requestAnimationFrame(()=>{this._redraw(!1)}))}_redraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.allowRedraw===!0){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;const r={drawExternalLabels:null};(this.canvas.frame.canvas.width===0||this.canvas.frame.canvas.height===0)&&this.canvas.setSize(),this.canvas.setTransform();const n=this.canvas.getContext(),i=this.canvas.frame.canvas.clientWidth,s=this.canvas.frame.canvas.clientHeight;if(n.clearRect(0,0,i,s),this.canvas.frame.clientWidth===0)return;if(n.save(),n.translate(this.body.view.translation.x,this.body.view.translation.y),n.scale(this.body.view.scale,this.body.view.scale),n.beginPath(),this.body.emitter.emit("beforeDrawing",n),n.closePath(),e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawEdges(n),this.dragging===!1||this.dragging===!0&&this.options.hideNodesOnDrag===!1){const{drawExternalLabels:o}=this._drawNodes(n,e);r.drawExternalLabels=o}e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawArrows(n),r.drawExternalLabels!=null&&r.drawExternalLabels(),e===!1&&this._drawSelectionBox(n),n.beginPath(),this.body.emitter.emit("afterDrawing",n),n.closePath(),n.restore(),e===!0&&n.clearRect(0,0,i,s)}}_resizeNodes(){this.canvas.setTransform();const e=this.canvas.getContext();e.save(),e.translate(this.body.view.translation.x,this.body.view.translation.y),e.scale(this.body.view.scale,this.body.view.scale);const r=this.body.nodes;let n;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n=r[i],n.resize(e),n.updateBoundingBox(e,n.selected));e.restore()}_drawNodes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.nodes,i=this.body.nodeIndices;let s;const o=[],a=[],l=20,c=this.canvas.DOMtoCanvas({x:-l,y:-l}),d=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+l,y:this.canvas.frame.canvas.clientHeight+l}),h={top:c.y,left:c.x,bottom:d.y,right:d.x},f=[];for(let v=0;v<i.length;v++)if(s=n[i[v]],s.hover)a.push(i[v]);else if(s.isSelected())o.push(i[v]);else if(r===!0){const y=s.draw(e);y.drawExternalLabel!=null&&f.push(y.drawExternalLabel)}else if(s.isBoundingBoxOverlappingWith(h)===!0){const y=s.draw(e);y.drawExternalLabel!=null&&f.push(y.drawExternalLabel)}else s.updateBoundingBox(e,s.selected);let p;const m=o.length,g=a.length;for(p=0;p<m;p++){s=n[o[p]];const v=s.draw(e);v.drawExternalLabel!=null&&f.push(v.drawExternalLabel)}for(p=0;p<g;p++){s=n[a[p]];const v=s.draw(e);v.drawExternalLabel!=null&&f.push(v.drawExternalLabel)}return{drawExternalLabels:()=>{for(const v of f)v()}}}_drawEdges(e){const r=this.body.edges,n=this.body.edgeIndices;for(let i=0;i<n.length;i++){const s=r[n[i]];s.connected===!0&&s.draw(e)}}_drawArrows(e){const r=this.body.edges,n=this.body.edgeIndices;for(let i=0;i<n.length;i++){const s=r[n[i]];s.connected===!0&&s.drawArrows(e)}}_drawSelectionBox(e){if(this.body.selectionBox.show){e.beginPath();const r=this.body.selectionBox.position.end.x-this.body.selectionBox.position.start.x,n=this.body.selectionBox.position.end.y-this.body.selectionBox.position.start.y;e.rect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,r,n),e.fillStyle="rgba(151, 194, 252, 0.2)",e.fillRect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,r,n),e.strokeStyle="rgba(151, 194, 252, 1)",e.stroke()}else e.closePath()}}var $O,IQ;function dDe(){if(IQ)return $O;IQ=1,Voe();var t=Nt();return $O=t.setInterval,$O}var DO,RQ;function hDe(){return RQ||(RQ=1,DO=dDe()),DO}var fDe=hDe(),pDe=ze(fDe);function Xv(t,e){e.inputHandler=function(r){r.isFirst&&e(r)},t.on("hammer.input",e.inputHandler)}function qae(t,e){return e.inputHandler=function(r){r.isFinal&&e(r)},t.on("hammer.input",e.inputHandler)}class mDe{constructor(e){this.body=e,this.pixelRatio=1,this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this._cleanupCallbacks=[],this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},_r(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e;this.body.emitter.once("resize",r=>{r.width!==0&&(this.body.view.translation.x=r.width*.5),r.height!==0&&(this.body.view.translation.y=r.height*.5)}),this.body.emitter.on("setSize",ne(e=this.setSize).call(e,this)),this.body.emitter.on("destroy",()=>{this.hammerFrame.destroy(),this.hammer.destroy(),this._cleanUp()})}setOptions(e){if(e!==void 0&&Rh(["width","height","autoResize"],this.options,e),this._cleanUp(),this.options.autoResize===!0){var r;if(window.ResizeObserver){const i=new ResizeObserver(()=>{this.setSize()===!0&&this.body.emitter.emit("_requestRedraw")}),{frame:s}=this;i.observe(s),this._cleanupCallbacks.push(()=>{i.unobserve(s)})}else{const i=pDe(()=>{this.setSize()===!0&&this.body.emitter.emit("_requestRedraw")},1e3);this._cleanupCallbacks.push(()=>{clearInterval(i)})}const n=ne(r=this._onResize).call(r,this);window.addEventListener("resize",n),this._cleanupCallbacks.push(()=>{window.removeEventListener("resize",n)})}}_cleanUp(){var e,r,n;Ot(e=uc(r=wo(n=this._cleanupCallbacks).call(n,0)).call(r)).call(e,i=>{try{i()}catch(s){console.error(s)}})}_onResize(){this.setSize(),this.body.emitter.emit("_redraw")}_getCameraState(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.pixelRatio;this.initialized===!0&&(this.cameraState.previousWidth=this.frame.canvas.width/e,this.cameraState.previousHeight=this.frame.canvas.height/e,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/e,y:.5*this.frame.canvas.height/e}))}_setCameraState(){if(this.cameraState.scale!==void 0&&this.frame.canvas.clientWidth!==0&&this.frame.canvas.clientHeight!==0&&this.pixelRatio!==0&&this.cameraState.previousWidth>0&&this.cameraState.previousHeight>0){const e=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,r=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight;let n=this.cameraState.scale;e!=1&&r!=1?n=this.cameraState.scale*.5*(e+r):e!=1?n=this.cameraState.scale*e:r!=1&&(n=this.cameraState.scale*r),this.body.view.scale=n;const i=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),s={x:i.x-this.cameraState.position.x,y:i.y-this.cameraState.position.y};this.body.view.translation.x+=s.x*this.body.view.scale,this.body.view.translation.y+=s.y*this.body.view.scale}}_prepareValue(e){if(typeof e=="number")return e+"px";if(typeof e=="string"){if(wt(e).call(e,"%")!==-1||wt(e).call(e,"px")!==-1)return e;if(wt(e).call(e,"%")===-1)return e+"px"}throw new Error("Could not use the value supplied for width or height:"+e)}_create(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=0,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{const e=document.createElement("DIV");e.style.color="red",e.style.fontWeight="bold",e.style.padding="10px",e.innerText="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(e)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}_bindHammer(){this.hammer!==void 0&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new sd(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:sd.DIRECTION_ALL}),Xv(this.hammer,e=>{this.body.eventListeners.onTouch(e)}),this.hammer.on("tap",e=>{this.body.eventListeners.onTap(e)}),this.hammer.on("doubletap",e=>{this.body.eventListeners.onDoubleTap(e)}),this.hammer.on("press",e=>{this.body.eventListeners.onHold(e)}),this.hammer.on("panstart",e=>{this.body.eventListeners.onDragStart(e)}),this.hammer.on("panmove",e=>{this.body.eventListeners.onDrag(e)}),this.hammer.on("panend",e=>{this.body.eventListeners.onDragEnd(e)}),this.hammer.on("pinch",e=>{this.body.eventListeners.onPinch(e)}),this.frame.canvas.addEventListener("wheel",e=>{this.body.eventListeners.onMouseWheel(e)}),this.frame.canvas.addEventListener("mousemove",e=>{this.body.eventListeners.onMouseMove(e)}),this.frame.canvas.addEventListener("contextmenu",e=>{this.body.eventListeners.onContext(e)}),this.hammerFrame=new sd(this.frame),qae(this.hammerFrame,e=>{this.body.eventListeners.onRelease(e)})}setSize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.width,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.height;e=this._prepareValue(e),r=this._prepareValue(r);let n=!1;const i=this.frame.canvas.width,s=this.frame.canvas.height,o=this.pixelRatio;if(this._setPixelRatio(),e!=this.options.width||r!=this.options.height||this.frame.style.width!=e||this.frame.style.height!=r)this._getCameraState(o),this.frame.style.width=e,this.frame.style.height=r,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=e,this.options.height=r,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},n=!0;else{const a=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),l=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);(this.frame.canvas.width!==a||this.frame.canvas.height!==l)&&this._getCameraState(o),this.frame.canvas.width!==a&&(this.frame.canvas.width=a,n=!0),this.frame.canvas.height!==l&&(this.frame.canvas.height=l,n=!0)}return n===!0&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(i/this.pixelRatio),oldHeight:Math.round(s/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,n}getContext(){return this.frame.canvas.getContext("2d")}_determinePixelRatio(){const e=this.getContext();if(e===void 0)throw new Error("Could not get canvax context");let r=1;typeof window<"u"&&(r=window.devicePixelRatio||1);const n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return r/n}_setPixelRatio(){this.pixelRatio=this._determinePixelRatio()}setTransform(){const e=this.getContext();if(e===void 0)throw new Error("Could not get canvax context");e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}_XconvertDOMtoCanvas(e){return(e-this.body.view.translation.x)/this.body.view.scale}_XconvertCanvasToDOM(e){return e*this.body.view.scale+this.body.view.translation.x}_YconvertDOMtoCanvas(e){return(e-this.body.view.translation.y)/this.body.view.scale}_YconvertCanvasToDOM(e){return e*this.body.view.scale+this.body.view.translation.y}canvasToDOM(e){return{x:this._XconvertCanvasToDOM(e.x),y:this._YconvertCanvasToDOM(e.y)}}DOMtoCanvas(e){return{x:this._XconvertDOMtoCanvas(e.x),y:this._YconvertDOMtoCanvas(e.y)}}}function gDe(t,e){const r=_r({nodes:e,minZoomLevel:Number.MIN_VALUE,maxZoomLevel:1},t??{});if(!dr(r.nodes))throw new TypeError("Nodes has to be an array of ids.");if(r.nodes.length===0&&(r.nodes=e),!(typeof r.minZoomLevel=="number"&&r.minZoomLevel>0))throw new TypeError("Min zoom level has to be a number higher than zero.");if(!(typeof r.maxZoomLevel=="number"&&r.minZoomLevel<=r.maxZoomLevel))throw new TypeError("Max zoom level has to be a number higher than min zoom level.");return r}class yDe{constructor(e,r){var n,i;this.body=e,this.canvas=r,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",ne(n=this.fit).call(n,this)),this.body.emitter.on("animationFinished",()=>{this.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",ne(i=this.releaseNode).call(i,this))}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.options=e}fit(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;e=gDe(e,this.body.nodeIndices);const n=this.canvas.frame.canvas.clientWidth,i=this.canvas.frame.canvas.clientHeight;let s,o;if(n===0||i===0)o=1,s=Cn.getRange(this.body.nodes,e.nodes);else if(r===!0){let c=0;for(const f in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,f)&&this.body.nodes[f].predefinedPosition===!0&&(c+=1);if(c>.5*this.body.nodeIndices.length){this.fit(e,!1);return}s=Cn.getRange(this.body.nodes,e.nodes),o=12.662/(this.body.nodeIndices.length+7.4147)+.0964822;const h=Math.min(n/600,i/600);o*=h}else{this.body.emitter.emit("_resizeNodes"),s=Cn.getRange(this.body.nodes,e.nodes);const c=Math.abs(s.maxX-s.minX)*1.1,d=Math.abs(s.maxY-s.minY)*1.1,h=n/c,f=i/d;o=h<=f?h:f}o>e.maxZoomLevel?o=e.maxZoomLevel:o<e.minZoomLevel&&(o=e.minZoomLevel);const l={position:Cn.findCenter(s),scale:o,animation:e.animation};this.moveTo(l)}focus(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.body.nodes[e]!==void 0){const n={x:this.body.nodes[e].x,y:this.body.nodes[e].y};r.position=n,r.lockedOnNode=e,this.moveTo(r)}else console.error("Node: "+e+" cannot be found.")}moveTo(e){if(e===void 0){e={};return}if(e.offset!=null){if(e.offset.x!=null){if(e.offset.x=+e.offset.x,!Vl(e.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.')}else e.offset.x=0;if(e.offset.y!=null){if(e.offset.y=+e.offset.y,!Vl(e.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else e.offset.x=0}else e.offset={x:0,y:0};if(e.position!=null){if(e.position.x!=null){if(e.position.x=+e.position.x,!Vl(e.position.x))throw new TypeError('The option "position.x" has to be a finite number.')}else e.position.x=0;if(e.position.y!=null){if(e.position.y=+e.position.y,!Vl(e.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else e.position.x=0}else e.position=this.getViewPosition();if(e.scale!=null){if(e.scale=+e.scale,!(e.scale>0))throw new TypeError('The option "scale" has to be a number greater than zero.')}else e.scale=this.body.view.scale;e.animation===void 0&&(e.animation={duration:0}),e.animation===!1&&(e.animation={duration:0}),e.animation===!0&&(e.animation={}),e.animation.duration===void 0&&(e.animation.duration=1e3),e.animation.easingFunction===void 0&&(e.animation.easingFunction="easeInOutQuad"),this.animateView(e)}animateView(e){if(e===void 0)return;this.animationEasingFunction=e.animation.easingFunction,this.releaseNode(),e.locked===!0&&(this.lockedOnNodeId=e.lockedOnNode,this.lockedOnNodeOffset=e.offset),this.easingTime!=0&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=e.scale,this.body.view.scale=this.targetScale;const r=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n={x:r.x-e.position.x,y:r.y-e.position.y};if(this.targetTranslation={x:this.sourceTranslation.x+n.x*this.targetScale+e.offset.x,y:this.sourceTranslation.y+n.y*this.targetScale+e.offset.y},e.animation.duration===0)if(this.lockedOnNodeId!=null){var i;this.viewFunction=ne(i=this._lockedRedraw).call(i,this),this.body.emitter.on("initRedraw",this.viewFunction)}else this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw");else{var s;this.animationSpeed=1/(60*e.animation.duration*.001)||1/60,this.animationEasingFunction=e.animation.easingFunction,this.viewFunction=ne(s=this._transitionRedraw).call(s,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}_lockedRedraw(){const e={x:this.body.nodes[this.lockedOnNodeId].x,y:this.body.nodes[this.lockedOnNodeId].y},r=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n={x:r.x-e.x,y:r.y-e.y},i=this.body.view.translation,s={x:i.x+n.x*this.body.view.scale+this.lockedOnNodeOffset.x,y:i.y+n.y*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=s}releaseNode(){this.lockedOnNodeId!==void 0&&this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}_transitionRedraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.easingTime+=this.animationSpeed,this.easingTime=e===!0?1:this.easingTime;const r=NRe[this.animationEasingFunction](this.easingTime);if(this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*r,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*r,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*r},this.easingTime>=1){if(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,this.lockedOnNodeId!=null){var n;this.viewFunction=ne(n=this._lockedRedraw).call(n,this),this.body.emitter.on("initRedraw",this.viewFunction)}this.body.emitter.emit("animationFinished")}}getScale(){return this.body.view.scale}getViewPosition(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}function MQ(t){var e=t&&t.preventDefault||!1,r=t&&t.container||window,n={},i={keydown:{},keyup:{}},s={},o;for(o=97;o<=122;o++)s[String.fromCharCode(o)]={code:65+(o-97),shift:!1};for(o=65;o<=90;o++)s[String.fromCharCode(o)]={code:o,shift:!0};for(o=0;o<=9;o++)s[""+o]={code:48+o,shift:!1};for(o=1;o<=12;o++)s["F"+o]={code:111+o,shift:!1};for(o=0;o<=9;o++)s["num"+o]={code:96+o,shift:!1};s["num*"]={code:106,shift:!1},s["num+"]={code:107,shift:!1},s["num-"]={code:109,shift:!1},s["num/"]={code:111,shift:!1},s["num."]={code:110,shift:!1},s.left={code:37,shift:!1},s.up={code:38,shift:!1},s.right={code:39,shift:!1},s.down={code:40,shift:!1},s.space={code:32,shift:!1},s.enter={code:13,shift:!1},s.shift={code:16,shift:void 0},s.esc={code:27,shift:!1},s.backspace={code:8,shift:!1},s.tab={code:9,shift:!1},s.ctrl={code:17,shift:!1},s.alt={code:18,shift:!1},s.delete={code:46,shift:!1},s.pageup={code:33,shift:!1},s.pagedown={code:34,shift:!1},s["="]={code:187,shift:!1},s["-"]={code:189,shift:!1},s["]"]={code:221,shift:!1},s["["]={code:219,shift:!1};var a=function(d){c(d,"keydown")},l=function(d){c(d,"keyup")},c=function(d,h){if(i[h][d.keyCode]!==void 0){for(var f=i[h][d.keyCode],p=0;p<f.length;p++)(f[p].shift===void 0||f[p].shift==!0&&d.shiftKey==!0||f[p].shift==!1&&d.shiftKey==!1)&&f[p].fn(d);e==!0&&d.preventDefault()}};return n.bind=function(d,h,f){if(f===void 0&&(f="keydown"),s[d]===void 0)throw new Error("unsupported key: "+d);i[f][s[d].code]===void 0&&(i[f][s[d].code]=[]),i[f][s[d].code].push({fn:h,shift:s[d].shift})},n.bindAll=function(d,h){h===void 0&&(h="keydown");for(var f in s)s.hasOwnProperty(f)&&n.bind(f,d,h)},n.getKey=function(d){for(var h in s)if(s.hasOwnProperty(h)){if(d.shiftKey==!0&&s[h].shift==!0&&d.keyCode==s[h].code)return h;if(d.shiftKey==!1&&s[h].shift==!1&&d.keyCode==s[h].code)return h;if(d.keyCode==s[h].code&&h=="shift")return h}return"unknown key, currently not supported"},n.unbind=function(d,h,f){if(f===void 0&&(f="keydown"),s[d]===void 0)throw new Error("unsupported key: "+d);if(h!==void 0){var p=[],m=i[f][s[d].code];if(m!==void 0)for(var g=0;g<m.length;g++)m[g].fn==h&&m[g].shift==s[d].shift||p.push(i[f][s[d].code][g]);i[f][s[d].code]=p}else i[f][s[d].code]=[]},n.reset=function(){i={keydown:{},keyup:{}}},n.destroy=function(){i={keydown:{},keyup:{}},r.removeEventListener("keydown",a,!0),r.removeEventListener("keyup",l,!0)},r.addEventListener("keydown",a,!0),r.addEventListener("keyup",l,!0),n}class vDe{constructor(e,r){this.body=e,this.canvas=r,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",()=>{this.activated=!0,this.configureKeyboardBindings()}),this.body.emitter.on("deactivate",()=>{this.activated=!1,this.configureKeyboardBindings()}),this.body.emitter.on("destroy",()=>{this.keycharm!==void 0&&this.keycharm.destroy()}),this.options={}}setOptions(e){e!==void 0&&(this.options=e,this.create())}create(){this.options.navigationButtons===!0?this.iconsCreated===!1&&this.loadNavigationElements():this.iconsCreated===!0&&this.cleanNavigation(),this.configureKeyboardBindings()}cleanNavigation(){if(this.navigationHammers.length!=0){for(let e=0;e<this.navigationHammers.length;e++)this.navigationHammers[e].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}loadNavigationElements(){this.cleanNavigation(),this.navigationDOM={};const e=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],r=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(let o=0;o<e.length;o++){this.navigationDOM[e[o]]=document.createElement("div"),this.navigationDOM[e[o]].className="vis-button vis-"+e[o],this.navigationDOM.wrapper.appendChild(this.navigationDOM[e[o]]);const a=new sd(this.navigationDOM[e[o]]);if(r[o]==="_fit"){var n;Xv(a,ne(n=this._fit).call(n,this))}else{var i;Xv(a,ne(i=this.bindToRedraw).call(i,this,r[o]))}this.navigationHammers.push(a)}const s=new sd(this.canvas.frame);qae(s,()=>{this._stopMovement()}),this.navigationHammers.push(s),this.iconsCreated=!0}bindToRedraw(e){if(this.boundFunctions[e]===void 0){var r;this.boundFunctions[e]=ne(r=this[e]).call(r,this),this.body.emitter.on("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_startRendering")}}unbindFromRedraw(e){this.boundFunctions[e]!==void 0&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[e])}_fit(){new Date().valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=new Date().valueOf())}_stopMovement(){for(const e in this.boundFunctions)Object.prototype.hasOwnProperty.call(this.boundFunctions,e)&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}_moveUp(){this.body.view.translation.y+=this.options.keyboard.speed.y}_moveDown(){this.body.view.translation.y-=this.options.keyboard.speed.y}_moveLeft(){this.body.view.translation.x+=this.options.keyboard.speed.x}_moveRight(){this.body.view.translation.x-=this.options.keyboard.speed.x}_zoomIn(){const e=this.body.view.scale,r=this.body.view.scale*(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=r/e,s=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,o=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=r,this.body.view.translation={x:s,y:o},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}_zoomOut(){const e=this.body.view.scale,r=this.body.view.scale/(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=r/e,s=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,o=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=r,this.body.view.translation={x:s,y:o},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}configureKeyboardBindings(){if(this.keycharm!==void 0&&this.keycharm.destroy(),this.options.keyboard.enabled===!0&&(this.options.keyboard.bindToWindow===!0?this.keycharm=MQ({container:window,preventDefault:!0}):this.keycharm=MQ({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),this.activated===!0)){var e,r,n,i,s,o,a,l,c,d,h,f,p,m,g,v,y,b,w,x,S,_,E,N;ne(e=this.keycharm).call(e,"up",()=>{this.bindToRedraw("_moveUp")},"keydown"),ne(r=this.keycharm).call(r,"down",()=>{this.bindToRedraw("_moveDown")},"keydown"),ne(n=this.keycharm).call(n,"left",()=>{this.bindToRedraw("_moveLeft")},"keydown"),ne(i=this.keycharm).call(i,"right",()=>{this.bindToRedraw("_moveRight")},"keydown"),ne(s=this.keycharm).call(s,"=",()=>{this.bindToRedraw("_zoomIn")},"keydown"),ne(o=this.keycharm).call(o,"num+",()=>{this.bindToRedraw("_zoomIn")},"keydown"),ne(a=this.keycharm).call(a,"num-",()=>{this.bindToRedraw("_zoomOut")},"keydown"),ne(l=this.keycharm).call(l,"-",()=>{this.bindToRedraw("_zoomOut")},"keydown"),ne(c=this.keycharm).call(c,"[",()=>{this.bindToRedraw("_zoomOut")},"keydown"),ne(d=this.keycharm).call(d,"]",()=>{this.bindToRedraw("_zoomIn")},"keydown"),ne(h=this.keycharm).call(h,"pageup",()=>{this.bindToRedraw("_zoomIn")},"keydown"),ne(f=this.keycharm).call(f,"pagedown",()=>{this.bindToRedraw("_zoomOut")},"keydown"),ne(p=this.keycharm).call(p,"up",()=>{this.unbindFromRedraw("_moveUp")},"keyup"),ne(m=this.keycharm).call(m,"down",()=>{this.unbindFromRedraw("_moveDown")},"keyup"),ne(g=this.keycharm).call(g,"left",()=>{this.unbindFromRedraw("_moveLeft")},"keyup"),ne(v=this.keycharm).call(v,"right",()=>{this.unbindFromRedraw("_moveRight")},"keyup"),ne(y=this.keycharm).call(y,"=",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),ne(b=this.keycharm).call(b,"num+",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),ne(w=this.keycharm).call(w,"num-",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),ne(x=this.keycharm).call(x,"-",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),ne(S=this.keycharm).call(S,"[",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),ne(_=this.keycharm).call(_,"]",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),ne(E=this.keycharm).call(E,"pageup",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),ne(N=this.keycharm).call(N,"pagedown",()=>{this.unbindFromRedraw("_zoomOut")},"keyup")}}}class bDe{constructor(e,r,n){var i,s,o,a,l,c,d,h,f,p,m,g,v;this.body=e,this.canvas=r,this.selectionHandler=n,this.navigationHandler=new vDe(e,r),this.body.eventListeners.onTap=ne(i=this.onTap).call(i,this),this.body.eventListeners.onTouch=ne(s=this.onTouch).call(s,this),this.body.eventListeners.onDoubleTap=ne(o=this.onDoubleTap).call(o,this),this.body.eventListeners.onHold=ne(a=this.onHold).call(a,this),this.body.eventListeners.onDragStart=ne(l=this.onDragStart).call(l,this),this.body.eventListeners.onDrag=ne(c=this.onDrag).call(c,this),this.body.eventListeners.onDragEnd=ne(d=this.onDragEnd).call(d,this),this.body.eventListeners.onMouseWheel=ne(h=this.onMouseWheel).call(h,this),this.body.eventListeners.onPinch=ne(f=this.onPinch).call(f,this),this.body.eventListeners.onMouseMove=ne(p=this.onMouseMove).call(p,this),this.body.eventListeners.onRelease=ne(m=this.onRelease).call(m,this),this.body.eventListeners.onContext=ne(g=this.onContext).call(g,this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=ne(v=this.getPointer).call(v,this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0,autoFocus:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},_r(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("destroy",()=>{clearTimeout(this.popupTimer),delete this.body.functions.getPointer})}setOptions(e){e!==void 0&&(Gv(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"],this.options,e),Pi(this.options,e,"keyboard"),e.tooltip&&(_r(this.options.tooltip,e.tooltip),e.tooltip.color&&(this.options.tooltip.color=QI(e.tooltip.color)))),this.navigationHandler.setOptions(this.options)}getPointer(e){return{x:e.x-wRe(this.canvas.frame.canvas),y:e.y-SRe(this.canvas.frame.canvas)}}onTouch(e){new Date().valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(e.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=new Date().valueOf())}onTap(e){const r=this.getPointer(e.center),n=this.selectionHandler.options.multiselect&&(e.changedPointers[0].ctrlKey||e.changedPointers[0].metaKey);this.checkSelectionChanges(r,n),this.selectionHandler.commitAndEmit(r,e),this.selectionHandler.generateClickEvent("click",e,r)}onDoubleTap(e){const r=this.getPointer(e.center);this.selectionHandler.generateClickEvent("doubleClick",e,r)}onHold(e){const r=this.getPointer(e.center),n=this.selectionHandler.options.multiselect;this.checkSelectionChanges(r,n),this.selectionHandler.commitAndEmit(r,e),this.selectionHandler.generateClickEvent("click",e,r),this.selectionHandler.generateClickEvent("hold",e,r)}onRelease(e){if(new Date().valueOf()-this.touchTime>10){const r=this.getPointer(e.center);this.selectionHandler.generateClickEvent("release",e,r),this.touchTime=new Date().valueOf()}}onContext(e){const r=this.getPointer({x:e.clientX,y:e.clientY});this.selectionHandler.generateClickEvent("oncontext",e,r)}checkSelectionChanges(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)===!0?this.selectionHandler.selectAdditionalOnPoint(e):this.selectionHandler.selectOnPoint(e)}_determineDifference(e,r){const n=function(i,s){const o=[];for(let a=0;a<i.length;a++){const l=i[a];wt(s).call(s,l)===-1&&o.push(l)}return o};return{nodes:n(e.nodes,r.nodes),edges:n(e.edges,r.edges)}}onDragStart(e){if(this.drag.dragging)return;this.drag.pointer===void 0&&this.onTouch(e);const r=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=_r({},this.body.view.translation),this.drag.nodeId=void 0,e.srcEvent.shiftKey){this.body.selectionBox.show=!0;const n=this.getPointer(e.center);this.body.selectionBox.position.start={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)},this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)}}else if(r!==void 0&&this.options.dragNodes===!0){this.drag.nodeId=r.id,r.isSelected()===!1&&this.selectionHandler.setSelection({nodes:[r.id]}),this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer);for(const n of this.selectionHandler.getSelectedNodes()){const i={id:n.id,node:n,x:n.x,y:n.y,xFixed:n.options.fixed.x,yFixed:n.options.fixed.y};n.options.fixed.x=!0,n.options.fixed.y=!0,this.drag.selection.push(i)}}else this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer,void 0,!0)}onDrag(e){if(this.drag.pinched===!0)return;this.body.emitter.emit("unlockNode");const r=this.getPointer(e.center),n=this.drag.selection;if(n&&n.length&&this.options.dragNodes===!0){this.selectionHandler.generateClickEvent("dragging",e,r);const i=r.x-this.drag.pointer.x,s=r.y-this.drag.pointer.y;Ot(n).call(n,o=>{const a=o.node;o.xFixed===!1&&(a.x=this.canvas._XconvertDOMtoCanvas(this.canvas._XconvertCanvasToDOM(o.x)+i)),o.yFixed===!1&&(a.y=this.canvas._YconvertDOMtoCanvas(this.canvas._YconvertCanvasToDOM(o.y)+s))}),this.body.emitter.emit("startSimulation")}else{if(e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,r,void 0,!0),this.drag.pointer===void 0){this.onDragStart(e);return}this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(r.x),y:this.canvas._YconvertDOMtoCanvas(r.y)},this.body.emitter.emit("_requestRedraw")}if(this.options.dragView===!0&&!e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,r,void 0,!0),this.drag.pointer===void 0){this.onDragStart(e);return}const i=r.x-this.drag.pointer.x,s=r.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+i,y:this.drag.translation.y+s},this.body.emitter.emit("_requestRedraw")}}}onDragEnd(e){if(this.drag.dragging=!1,this.body.selectionBox.show){var r;this.body.selectionBox.show=!1;const n=this.body.selectionBox.position,i={minX:Math.min(n.start.x,n.end.x),minY:Math.min(n.start.y,n.end.y),maxX:Math.max(n.start.x,n.end.x),maxY:Math.max(n.start.y,n.end.y)},s=Hn(r=this.body.nodeIndices).call(r,a=>{const l=this.body.nodes[a];return l.x>=i.minX&&l.x<=i.maxX&&l.y>=i.minY&&l.y<=i.maxY});Ot(s).call(s,a=>this.selectionHandler.selectObject(this.body.nodes[a]));const o=this.getPointer(e.center);this.selectionHandler.commitAndEmit(o,e),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw")}else{const n=this.drag.selection;n&&n.length?(Ot(n).call(n,function(i){i.node.options.fixed.x=i.xFixed,i.node.options.fixed.y=i.yFixed}),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}}onPinch(e){const r=this.getPointer(e.center);this.drag.pinched=!0,this.pinch.scale===void 0&&(this.pinch.scale=1);const n=this.pinch.scale*e.scale;this.zoom(n,r)}zoom(e,r){if(this.options.zoomView===!0){const n=this.body.view.scale;e<1e-5&&(e=1e-5),e>10&&(e=10);let i;this.drag!==void 0&&this.drag.dragging===!0&&(i=this.canvas.DOMtoCanvas(this.drag.pointer));const s=this.body.view.translation,o=e/n,a=(1-o)*r.x+s.x*o,l=(1-o)*r.y+s.y*o;if(this.body.view.scale=e,this.body.view.translation={x:a,y:l},i!=null){const c=this.canvas.canvasToDOM(i);this.drag.pointer.x=c.x,this.drag.pointer.y=c.y}this.body.emitter.emit("_requestRedraw"),n<e?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:r}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:r})}}onMouseWheel(e){if(this.options.zoomView===!0){if(e.deltaY!==0){let r=this.body.view.scale;r*=1+(e.deltaY<0?1:-1)*(this.options.zoomSpeed*.1);const n=this.getPointer({x:e.clientX,y:e.clientY});this.zoom(r,n)}e.preventDefault()}}onMouseMove(e){const r=this.getPointer({x:e.clientX,y:e.clientY});let n=!1;this.popup!==void 0&&(this.popup.hidden===!1&&this._checkHidePopup(r),this.popup.hidden===!1&&(n=!0,this.popup.setPosition(r.x+3,r.y-5),this.popup.show())),this.options.keyboard.autoFocus&&this.options.keyboard.bindToWindow===!1&&this.options.keyboard.enabled===!0&&this.canvas.frame.focus(),n===!1&&(this.popupTimer!==void 0&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=So(()=>this._checkShowPopup(r),this.options.tooltipDelay))),this.options.hover===!0&&this.selectionHandler.hoverObject(e,r)}_checkShowPopup(e){const r=this.canvas._XconvertDOMtoCanvas(e.x),n=this.canvas._YconvertDOMtoCanvas(e.y),i={left:r,top:n,right:r,bottom:n},s=this.popupObj===void 0?void 0:this.popupObj.id;let o=!1,a="node";if(this.popupObj===void 0){const l=this.body.nodeIndices,c=this.body.nodes;let d;const h=[];for(let f=0;f<l.length;f++)d=c[l[f]],d.isOverlappingWith(i)===!0&&(o=!0,d.getTitle()!==void 0&&h.push(l[f]));h.length>0&&(this.popupObj=c[h[h.length-1]],o=!0)}if(this.popupObj===void 0&&o===!1){const l=this.body.edgeIndices,c=this.body.edges;let d;const h=[];for(let f=0;f<l.length;f++)d=c[l[f]],d.isOverlappingWith(i)===!0&&d.connected===!0&&d.getTitle()!==void 0&&h.push(l[f]);h.length>0&&(this.popupObj=c[h[h.length-1]],a="edge")}this.popupObj!==void 0?this.popupObj.id!==s&&(this.popup===void 0&&(this.popup=new RRe(this.canvas.frame)),this.popup.popupTargetType=a,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(e.x+3,e.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):this.popup!==void 0&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}_checkHidePopup(e){const r=this.selectionHandler._pointerToPositionObject(e);let n=!1;if(this.popup.popupTargetType==="node"){if(this.body.nodes[this.popup.popupTargetId]!==void 0&&(n=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(r),n===!0)){const i=this.selectionHandler.getNodeAt(e);n=i===void 0?!1:i.id===this.popup.popupTargetId}}else this.selectionHandler.getNodeAt(e)===void 0&&this.body.edges[this.popup.popupTargetId]!==void 0&&(n=this.body.edges[this.popup.popupTargetId].isOverlappingWith(r));n===!1&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}var AQ={},$Q={},DQ;function xDe(){if(DQ)return $Q;DQ=1;var t=l$(),e=Tae();return t("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),$Q}var FQ;function wDe(){return FQ||(FQ=1,xDe()),AQ}var qQ={},FO,LQ;function lu(){if(LQ)return FO;LQ=1;var t=wh(),e=TypeError;return FO=function(r){if(typeof r=="object"&&"size"in r&&"has"in r&&"add"in r&&"delete"in r&&"keys"in r)return r;throw new e(t(r)+" is not a set")},FO}var qO,BQ;function cu(){if(BQ)return qO;BQ=1;var t=Si(),e=Oae(),r=t("Set"),n=r.prototype;return qO={Set:r,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:n},qO}var LO,zQ;function uu(){if(zQ)return LO;zQ=1;var t=si();return LO=function(e,r,n){for(var i=n?e:e.iterator,s=e.next,o,a;!(o=t(s,i)).done;)if(a=r(o.value),a!==void 0)return a},LO}var BO,VQ;function Lm(){if(VQ)return BO;VQ=1;var t=uu();return BO=function(e,r,n){return n?t(e.keys(),r,!0):e.forEach(r)},BO}var zO,UQ;function m$(){if(UQ)return zO;UQ=1;var t=cu(),e=Lm(),r=t.Set,n=t.add;return zO=function(i){var s=new r;return e(i,function(o){n(s,o)}),s},zO}var VO,HQ;function Bm(){return HQ||(HQ=1,VO=function(t){return t.size}),VO}var UO,WQ;function SDe(){return WQ||(WQ=1,UO=function(t){return{iterator:t,next:t.next,done:!1}}),UO}var HO,KQ;function du(){if(KQ)return HO;KQ=1;var t=Vo(),e=Ws(),r=si(),n=Nh(),i=SDe(),s="Invalid size",o=RangeError,a=TypeError,l=Math.max,c=function(d,h){this.set=d,this.size=l(h,0),this.has=t(d.has),this.keys=t(d.keys)};return c.prototype={getIterator:function(){return i(e(r(this.keys,this.set)))},includes:function(d){return r(this.has,this.set,d)}},HO=function(d){e(d);var h=+d.size;if(h!==h)throw new a(s);var f=n(h);if(f<0)throw new o(s);return new c(d,f)},HO}var WO,GQ;function _De(){if(GQ)return WO;GQ=1;var t=lu(),e=cu(),r=m$(),n=Bm(),i=du(),s=Lm(),o=uu(),a=e.has,l=e.remove;return WO=function(d){var h=t(this),f=i(d),p=r(h);return n(h)<=f.size?s(h,function(m){f.includes(m)&&l(p,m)}):o(f.getIterator(),function(m){a(p,m)&&l(p,m)}),p},WO}var KO,YQ;function hu(){return YQ||(YQ=1,KO=function(){return!1}),KO}var QQ;function EDe(){if(QQ)return qQ;QQ=1;var t=Ie(),e=_De(),r=nt(),n=hu(),i=!n("difference",function(o){return o.size===0}),s=i||r(function(){var o={size:1,has:function(){return!0},keys:function(){var l=0;return{next:function(){var c=l++>1;return a.has(1)&&a.clear(),{done:c,value:2}}}}},a=new Set([1,2,3,4]);return a.difference(o).size!==3});return t({target:"Set",proto:!0,real:!0,forced:s},{difference:e}),qQ}var XQ={},GO,JQ;function NDe(){if(JQ)return GO;JQ=1;var t=lu(),e=cu(),r=Bm(),n=du(),i=Lm(),s=uu(),o=e.Set,a=e.add,l=e.has;return GO=function(d){var h=t(this),f=n(d),p=new o;return r(h)>f.size?s(f.getIterator(),function(m){l(h,m)&&a(p,m)}):i(h,function(m){f.includes(m)&&a(p,m)}),p},GO}var ZQ;function CDe(){if(ZQ)return XQ;ZQ=1;var t=Ie(),e=nt(),r=NDe(),n=hu(),i=!n("intersection",function(s){return s.size===2&&s.has(1)&&s.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return t({target:"Set",proto:!0,real:!0,forced:i},{intersection:r}),XQ}var eX={},YO,tX;function kDe(){if(tX)return YO;tX=1;var t=lu(),e=cu().has,r=Bm(),n=du(),i=Lm(),s=uu(),o=o$();return YO=function(l){var c=t(this),d=n(l);if(r(c)<=d.size)return i(c,function(f){if(d.includes(f))return!1},!0)!==!1;var h=d.getIterator();return s(h,function(f){if(e(c,f))return o(h,"normal",!1)})!==!1},YO}var rX;function TDe(){if(rX)return eX;rX=1;var t=Ie(),e=kDe(),r=hu(),n=!r("isDisjointFrom",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:e}),eX}var nX={},QO,iX;function ODe(){if(iX)return QO;iX=1;var t=lu(),e=Bm(),r=Lm(),n=du();return QO=function(s){var o=t(this),a=n(s);return e(o)>a.size?!1:r(o,function(l){if(!a.includes(l))return!1},!0)!==!1},QO}var sX;function jDe(){if(sX)return nX;sX=1;var t=Ie(),e=ODe(),r=hu(),n=!r("isSubsetOf",function(i){return i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:e}),nX}var oX={},XO,aX;function PDe(){if(aX)return XO;aX=1;var t=lu(),e=cu().has,r=Bm(),n=du(),i=uu(),s=o$();return XO=function(a){var l=t(this),c=n(a);if(r(l)<c.size)return!1;var d=c.getIterator();return i(d,function(h){if(!e(l,h))return s(d,"normal",!1)})!==!1},XO}var lX;function IDe(){if(lX)return oX;lX=1;var t=Ie(),e=PDe(),r=hu(),n=!r("isSupersetOf",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:e}),oX}var cX={},JO,uX;function RDe(){if(uX)return JO;uX=1;var t=lu(),e=cu(),r=m$(),n=du(),i=uu(),s=e.add,o=e.has,a=e.remove;return JO=function(c){var d=t(this),h=n(c).getIterator(),f=r(d);return i(h,function(p){o(d,p)?a(f,p):s(f,p)}),f},JO}var ZO,dX;function Lae(){return dX||(dX=1,ZO=function(t){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[t](r);return n.size===1&&n.values().next().value===4}catch{return!1}}),ZO}var hX;function MDe(){if(hX)return cX;hX=1;var t=Ie(),e=RDe(),r=Lae(),n=hu(),i=!n("symmetricDifference")||!r("symmetricDifference");return t({target:"Set",proto:!0,real:!0,forced:i},{symmetricDifference:e}),cX}var fX={},ej,pX;function ADe(){if(pX)return ej;pX=1;var t=lu(),e=cu().add,r=m$(),n=du(),i=uu();return ej=function(o){var a=t(this),l=n(o).getIterator(),c=r(a);return i(l,function(d){e(c,d)}),c},ej}var mX;function $De(){if(mX)return fX;mX=1;var t=Ie(),e=ADe(),r=Lae(),n=hu(),i=!n("union")||!r("union");return t({target:"Set",proto:!0,real:!0,forced:i},{union:e}),fX}var tj,gX;function DDe(){if(gX)return tj;gX=1,Oh(),wDe(),EDe(),CDe(),TDe(),jDe(),IDe(),MDe(),$De(),u$();var t=Nt();return tj=t.Set,tj}var rj,yX;function FDe(){if(yX)return rj;yX=1;var t=DDe();return jh(),rj=t,rj}var nj,vX;function qDe(){return vX||(vX=1,nj=FDe()),nj}var LDe=qDe(),fa=ze(LDe),bX={},xX={},ij,wX;function BDe(){if(wX)return ij;wX=1;var t=lt(),e=c$(),r=_b().getWeakData,n=a$(),i=Ws(),s=vh(),o=Qr(),a=Eb(),l=vl(),c=an(),d=su(),h=d.set,f=d.getterFor,p=l.find,m=l.findIndex,g=t([].splice),v=0,y=function(x){return x.frozen||(x.frozen=new b)},b=function(){this.entries=[]},w=function(x,S){return p(x.entries,function(_){return _[0]===S})};return b.prototype={get:function(x){var S=w(this,x);if(S)return S[1]},has:function(x){return!!w(this,x)},set:function(x,S){var _=w(this,x);_?_[1]=S:this.entries.push([x,S])},delete:function(x){var S=m(this.entries,function(_){return _[0]===x});return~S&&g(this.entries,S,1),!!~S}},ij={getConstructor:function(x,S,_,E){var N=x(function(P,j){n(P,k),h(P,{type:S,id:v++,frozen:null}),s(j)||a(j,P[E],{that:P,AS_ENTRIES:_})}),k=N.prototype,C=f(S),O=function(P,j,A){var D=C(P),I=r(i(j),!0);return I===!0?y(D).set(j,A):I[D.id]=A,P};return e(k,{delete:function(P){var j=C(this);if(!o(P))return!1;var A=r(P);return A===!0?y(j).delete(P):A&&c(A,j.id)&&delete A[j.id]},has:function(j){var A=C(this);if(!o(j))return!1;var D=r(j);return D===!0?y(A).has(j):D&&c(D,A.id)}}),e(k,_?{get:function(j){var A=C(this);if(o(j)){var D=r(j);if(D===!0)return y(A).get(j);if(D)return D[A.id]}},set:function(j,A){return O(this,j,A)}}:{add:function(j){return O(this,j,!0)}}),N}},ij}var SX;function zDe(){if(SX)return xX;SX=1;var t=Cae(),e=Ut(),r=lt(),n=c$(),i=_b(),s=l$(),o=BDe(),a=Qr(),l=su().enforce,c=nt(),d=Toe(),h=Object,f=Array.isArray,p=h.isExtensible,m=h.isFrozen,g=h.isSealed,v=h.freeze,y=h.seal,b=!e.ActiveXObject&&"ActiveXObject"in e,w,x=function(P){return function(){return P(this,arguments.length?arguments[0]:void 0)}},S=s("WeakMap",x,o),_=S.prototype,E=r(_.set),N=function(){return t&&c(function(){var P=v([]);return E(new S,P,1),!m(P)})};if(d)if(b){w=o.getConstructor(x,"WeakMap",!0),i.enable();var k=r(_.delete),C=r(_.has),O=r(_.get);n(_,{delete:function(P){if(a(P)&&!p(P)){var j=l(this);return j.frozen||(j.frozen=new w),k(this,P)||j.frozen.delete(P)}return k(this,P)},has:function(j){if(a(j)&&!p(j)){var A=l(this);return A.frozen||(A.frozen=new w),C(this,j)||A.frozen.has(j)}return C(this,j)},get:function(j){if(a(j)&&!p(j)){var A=l(this);return A.frozen||(A.frozen=new w),C(this,j)?O(this,j):A.frozen.get(j)}return O(this,j)},set:function(j,A){if(a(j)&&!p(j)){var D=l(this);D.frozen||(D.frozen=new w),C(this,j)?E(this,j,A):D.frozen.set(j,A)}else E(this,j,A);return this}})}else N()&&n(_,{set:function(j,A){var D;return f(j)&&(m(j)?D=v:g(j)&&(D=y)),E(this,j,A),D&&D(j),this}});return xX}var _X;function VDe(){return _X||(_X=1,zDe()),bX}var sj,EX;function UDe(){if(EX)return sj;EX=1,Oh(),VDe();var t=Nt();return sj=t.WeakMap,sj}var oj,NX;function HDe(){if(NX)return oj;NX=1;var t=UDe();return jh(),oj=t,oj}var aj,CX;function WDe(){return CX||(CX=1,aj=HDe()),aj}var KDe=WDe(),zm=ze(KDe);function Vf(t,e,r){GDe(t,e),e.set(t,r)}function GDe(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function rR(t,e,r){return t.set(Bae(t,e),r),r}function Pt(t,e){return t.get(Bae(t,e))}function Bae(t,e,r){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function kX(t,e){const r=new fa;for(const n of e)t.has(n)||r.add(n);return r}var Su=new zm,Zi=new zm;class TX{constructor(){Vf(this,Su,new fa),Vf(this,Zi,new fa)}get size(){return Pt(Zi,this).size}add(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(const i of r)Pt(Zi,this).add(i)}delete(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(const i of r)Pt(Zi,this).delete(i)}clear(){Pt(Zi,this).clear()}getSelection(){return[...Pt(Zi,this)]}getChanges(){return{added:[...kX(Pt(Su,this),Pt(Zi,this))],deleted:[...kX(Pt(Zi,this),Pt(Su,this))],previous:[...new fa(Pt(Su,this))],current:[...new fa(Pt(Zi,this))]}}commit(){const e=this.getChanges();rR(Su,this,Pt(Zi,this)),rR(Zi,this,new fa(Pt(Su,this)));for(const r of e.added)r.select();for(const r of e.deleted)r.unselect();return e}}var El=new zm,Nl=new zm,lj=new zm;class YDe{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:()=>{};Vf(this,El,new TX),Vf(this,Nl,new TX),Vf(this,lj,void 0),rR(lj,this,e)}get sizeNodes(){return Pt(El,this).size}get sizeEdges(){return Pt(Nl,this).size}getNodes(){return Pt(El,this).getSelection()}getEdges(){return Pt(Nl,this).getSelection()}addNodes(){Pt(El,this).add(...arguments)}addEdges(){Pt(Nl,this).add(...arguments)}deleteNodes(e){Pt(El,this).delete(e)}deleteEdges(e){Pt(Nl,this).delete(e)}clear(){Pt(El,this).clear(),Pt(Nl,this).clear()}commit(){const e={nodes:Pt(El,this).commit(),edges:Pt(Nl,this).commit()};for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return Pt(lj,this).call(this,e,...n),e}}class QDe{constructor(e,r){this.body=e,this.canvas=r,this._selectionAccumulator=new YDe,this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},_r(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",()=>{this.updateSelection()})}setOptions(e){e!==void 0&&Rh(["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"],this.options,e)}selectOnPoint(e){let r=!1;if(this.options.selectable===!0){const n=this.getNodeAt(e)||this.getEdgeAt(e);this.unselectAll(),n!==void 0&&(r=this.selectObject(n)),this.body.emitter.emit("_requestRedraw")}return r}selectAdditionalOnPoint(e){let r=!1;if(this.options.selectable===!0){const n=this.getNodeAt(e)||this.getEdgeAt(e);n!==void 0&&(r=!0,n.isSelected()===!0?this.deselectObject(n):this.selectObject(n),this.body.emitter.emit("_requestRedraw"))}return r}_initBaseEvent(e,r){const n={};return n.pointer={DOM:{x:r.x,y:r.y},canvas:this.canvas.DOMtoCanvas(r)},n.event=e,n}generateClickEvent(e,r,n,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;const o=this._initBaseEvent(r,n);if(s===!0)o.nodes=[],o.edges=[];else{const a=this.getSelection();o.nodes=a.nodes,o.edges=a.edges}i!==void 0&&(o.previousSelection=i),e=="click"&&(o.items=this.getClickedItems(n)),r.controlEdge!==void 0&&(o.controlEdge=r.controlEdge),this.body.emitter.emit(e,o)}selectObject(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.selectConnectedEdges;return e!==void 0?(e instanceof zt?(r===!0&&this._selectionAccumulator.addEdges(...e.edges),this._selectionAccumulator.addNodes(e)):this._selectionAccumulator.addEdges(e),!0):!1}deselectObject(e){e.isSelected()===!0&&(e.selected=!1,this._removeFromSelection(e))}_getAllNodesOverlappingWith(e){const r=[],n=this.body.nodes;for(let i=0;i<this.body.nodeIndices.length;i++){const s=this.body.nodeIndices[i];n[s].isOverlappingWith(e)&&r.push(s)}return r}_pointerToPositionObject(e){const r=this.canvas.DOMtoCanvas(e);return{left:r.x-1,top:r.y+1,right:r.x+1,bottom:r.y-1}}getNodeAt(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=this._pointerToPositionObject(e),i=this._getAllNodesOverlappingWith(n);if(i.length>0)return r===!0?this.body.nodes[i[i.length-1]]:i[i.length-1]}_getEdgesOverlappingWith(e,r){const n=this.body.edges;for(let i=0;i<this.body.edgeIndices.length;i++){const s=this.body.edgeIndices[i];n[s].isOverlappingWith(e)&&r.push(s)}}_getAllEdgesOverlappingWith(e){const r=[];return this._getEdgesOverlappingWith(e,r),r}getEdgeAt(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=this.canvas.DOMtoCanvas(e);let i=10,s=null;const o=this.body.edges;for(let a=0;a<this.body.edgeIndices.length;a++){const l=this.body.edgeIndices[a],c=o[l];if(c.connected){const d=c.from.x,h=c.from.y,f=c.to.x,p=c.to.y,m=c.edgeType.getDistanceToEdge(d,h,f,p,n.x,n.y);m<i&&(s=l,i=m)}}if(s!==null)return r===!0?this.body.edges[s]:s}_addToHover(e){e instanceof zt?this.hoverObj.nodes[e.id]=e:this.hoverObj.edges[e.id]=e}_removeFromSelection(e){e instanceof zt?(this._selectionAccumulator.deleteNodes(e),this._selectionAccumulator.deleteEdges(...e.edges)):this._selectionAccumulator.deleteEdges(e)}unselectAll(){this._selectionAccumulator.clear()}getSelectedNodeCount(){return this._selectionAccumulator.sizeNodes}getSelectedEdgeCount(){return this._selectionAccumulator.sizeEdges}_hoverConnectedEdges(e){for(let r=0;r<e.edges.length;r++){const n=e.edges[r];n.hover=!0,this._addToHover(n)}}emitBlurEvent(e,r,n){const i=this._initBaseEvent(e,r);n.hover===!0&&(n.hover=!1,n instanceof zt?(i.node=n.id,this.body.emitter.emit("blurNode",i)):(i.edge=n.id,this.body.emitter.emit("blurEdge",i)))}emitHoverEvent(e,r,n){const i=this._initBaseEvent(e,r);let s=!1;return n.hover===!1&&(n.hover=!0,this._addToHover(n),s=!0,n instanceof zt?(i.node=n.id,this.body.emitter.emit("hoverNode",i)):(i.edge=n.id,this.body.emitter.emit("hoverEdge",i))),s}hoverObject(e,r){let n=this.getNodeAt(r);n===void 0&&(n=this.getEdgeAt(r));let i=!1;for(const s in this.hoverObj.nodes)Object.prototype.hasOwnProperty.call(this.hoverObj.nodes,s)&&(n===void 0||n instanceof zt&&n.id!=s||n instanceof Xa)&&(this.emitBlurEvent(e,r,this.hoverObj.nodes[s]),delete this.hoverObj.nodes[s],i=!0);for(const s in this.hoverObj.edges)Object.prototype.hasOwnProperty.call(this.hoverObj.edges,s)&&(i===!0?(this.hoverObj.edges[s].hover=!1,delete this.hoverObj.edges[s]):(n===void 0||n instanceof Xa&&n.id!=s||n instanceof zt&&!n.hover)&&(this.emitBlurEvent(e,r,this.hoverObj.edges[s]),delete this.hoverObj.edges[s],i=!0));if(n!==void 0){const s=ar(this.hoverObj.edges).length,o=ar(this.hoverObj.nodes).length,a=n instanceof Xa&&s===0&&o===0,l=n instanceof zt&&s===0&&o===0;(i||a||l)&&(i=this.emitHoverEvent(e,r,n)),n instanceof zt&&this.options.hoverConnectedEdges===!0&&this._hoverConnectedEdges(n)}i===!0&&this.body.emitter.emit("_requestRedraw")}commitWithoutEmitting(){this._selectionAccumulator.commit()}commitAndEmit(e,r){let n=!1;const i=this._selectionAccumulator.commit(),s={nodes:i.nodes.previous,edges:i.edges.previous};i.edges.deleted.length>0&&(this.generateClickEvent("deselectEdge",r,e,s),n=!0),i.nodes.deleted.length>0&&(this.generateClickEvent("deselectNode",r,e,s),n=!0),i.nodes.added.length>0&&(this.generateClickEvent("selectNode",r,e),n=!0),i.edges.added.length>0&&(this.generateClickEvent("selectEdge",r,e),n=!0),n===!0&&this.generateClickEvent("select",r,e)}getSelection(){return{nodes:this.getSelectedNodeIds(),edges:this.getSelectedEdgeIds()}}getSelectedNodes(){return this._selectionAccumulator.getNodes()}getSelectedEdges(){return this._selectionAccumulator.getEdges()}getSelectedNodeIds(){var e;return Kd(e=this._selectionAccumulator.getNodes()).call(e,r=>r.id)}getSelectedEdgeIds(){var e;return Kd(e=this._selectionAccumulator.getEdges()).call(e,r=>r.id)}setSelection(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e||!e.nodes&&!e.edges)throw new TypeError("Selection must be an object with nodes and/or edges properties");if((r.unselectAll||r.unselectAll===void 0)&&this.unselectAll(),e.nodes)for(const n of e.nodes){const i=this.body.nodes[n];if(!i)throw new RangeError('Node with id "'+n+'" not found');this.selectObject(i,r.highlightEdges)}if(e.edges)for(const n of e.edges){const i=this.body.edges[n];if(!i)throw new RangeError('Edge with id "'+n+'" not found');this.selectObject(i)}this.body.emitter.emit("_requestRedraw"),this._selectionAccumulator.commit()}selectNodes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({nodes:e},{highlightEdges:r})}selectEdges(e){if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({edges:e})}updateSelection(){for(const e in this._selectionAccumulator.getNodes())Object.prototype.hasOwnProperty.call(this.body.nodes,e.id)||this._selectionAccumulator.deleteNodes(e);for(const e in this._selectionAccumulator.getEdges())Object.prototype.hasOwnProperty.call(this.body.edges,e.id)||this._selectionAccumulator.deleteEdges(e)}getClickedItems(e){const r=this.canvas.DOMtoCanvas(e),n=[],i=this.body.nodeIndices,s=this.body.nodes;for(let l=i.length-1;l>=0;l--){const d=s[i[l]].getItemsOnPoint(r);n.push.apply(n,d)}const o=this.body.edgeIndices,a=this.body.edges;for(let l=o.length-1;l>=0;l--){const d=a[o[l]].getItemsOnPoint(r);n.push.apply(n,d)}return n}}var OX={},cj,jX;function XDe(){if(jX)return cj;jX=1;var t=Ch(),e=Math.floor,r=function(n,i){var s=n.length;if(s<8)for(var o=1,a,l;o<s;){for(l=o,a=n[o];l&&i(n[l-1],a)>0;)n[l]=n[--l];l!==o++&&(n[l]=a)}else for(var c=e(s/2),d=r(t(n,0,c),i),h=r(t(n,c),i),f=d.length,p=h.length,m=0,g=0;m<f||g<p;)n[m+g]=m<f&&g<p?i(d[m],h[g])<=0?d[m++]:h[g++]:m<f?d[m++]:h[g++];return n};return cj=r,cj}var uj,PX;function JDe(){if(PX)return uj;PX=1;var t=bh(),e=t.match(/firefox\/(\d+)/i);return uj=!!e&&+e[1],uj}var dj,IX;function ZDe(){if(IX)return dj;IX=1;var t=bh();return dj=/MSIE|Trident/.test(t),dj}var hj,RX;function eFe(){if(RX)return hj;RX=1;var t=bh(),e=t.match(/AppleWebKit\/(\d+)\./);return hj=!!e&&+e[1],hj}var MX;function tFe(){if(MX)return OX;MX=1;var t=Ie(),e=lt(),r=Vo(),n=_i(),i=Uo(),s=qoe(),o=Yi(),a=nt(),l=XDe(),c=Ph(),d=JDe(),h=ZDe(),f=Cm(),p=eFe(),m=[],g=e(m.sort),v=e(m.push),y=a(function(){m.sort(void 0)}),b=a(function(){m.sort(null)}),w=c("sort"),x=!a(function(){if(f)return f<70;if(!(d&&d>3)){if(h)return!0;if(p)return p<603;var E="",N,k,C,O;for(N=65;N<76;N++){switch(k=String.fromCharCode(N),N){case 66:case 69:case 70:case 72:C=3;break;case 68:case 71:C=4;break;default:C=2}for(O=0;O<47;O++)m.push({k:k+O,v:C})}for(m.sort(function(P,j){return j.v-P.v}),O=0;O<m.length;O++)k=m[O].k.charAt(0),E.charAt(E.length-1)!==k&&(E+=k);return E!=="DGBEFHACIJK"}}),S=y||!b||!w||!x,_=function(E){return function(N,k){return k===void 0?-1:N===void 0?1:E!==void 0?+E(N,k)||0:o(N)>o(k)?1:-1}};return t({target:"Array",proto:!0,forced:S},{sort:function(N){N!==void 0&&r(N);var k=n(this);if(x)return N===void 0?g(k):g(k,N);var C=[],O=i(k),P,j;for(j=0;j<O;j++)j in k&&v(C,k[j]);for(l(C,_(N)),P=i(C),j=0;j<P;)k[j]=C[j++];for(;j<O;)s(k,j++);return k}}),OX}var fj,AX;function rFe(){if(AX)return fj;AX=1,tFe();var t=ln();return fj=t("Array","sort"),fj}var pj,$X;function nFe(){if($X)return pj;$X=1;var t=Or(),e=rFe(),r=Array.prototype;return pj=function(n){var i=n.sort;return n===r||t(r,n)&&i===r.sort?e:i},pj}var mj,DX;function iFe(){if(DX)return mj;DX=1;var t=nFe();return mj=t,mj}var gj,FX;function sFe(){return FX||(FX=1,gj=iFe()),gj}var oFe=sFe(),ad=ze(oFe),qX={},yj,LX;function aFe(){if(LX)return yj;LX=1;var t=Vo(),e=_i(),r=cb(),n=Uo(),i=TypeError,s="Reduce of empty array with no initial value",o=function(a){return function(l,c,d,h){var f=e(l),p=r(f),m=n(f);if(t(c),m===0&&d<2)throw new i(s);var g=a?m-1:0,v=a?-1:1;if(d<2)for(;;){if(g in p){h=p[g],g+=v;break}if(g+=v,a?g<0:m<=g)throw new i(s)}for(;a?g>=0:m>g;g+=v)g in p&&(h=c(h,p[g],g,f));return h}};return yj={left:o(!1),right:o(!0)},yj}var vj,BX;function lFe(){if(BX)return vj;BX=1;var t=Boe();return vj=t==="NODE",vj}var zX;function cFe(){if(zX)return qX;zX=1;var t=Ie(),e=aFe().left,r=Ph(),n=Cm(),i=lFe(),s=!i&&n>79&&n<83,o=s||!r("reduce");return t({target:"Array",proto:!0,forced:o},{reduce:function(l){var c=arguments.length;return e(this,l,c,c>1?arguments[1]:void 0)}}),qX}var bj,VX;function uFe(){if(VX)return bj;VX=1,cFe();var t=ln();return bj=t("Array","reduce"),bj}var xj,UX;function dFe(){if(UX)return xj;UX=1;var t=Or(),e=uFe(),r=Array.prototype;return xj=function(n){var i=n.reduce;return n===r||t(r,n)&&i===r.reduce?e:i},xj}var wj,HX;function hFe(){if(HX)return wj;HX=1;var t=dFe();return wj=t,wj}var Sj,WX;function fFe(){return WX||(WX=1,Sj=hFe()),Sj}var pFe=fFe(),zae=ze(pFe);class Vae{abstract(){throw new Error("Can't instantiate abstract class!")}fake_use(){}curveType(){return this.abstract()}getPosition(e){return this.fake_use(e),this.abstract()}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;this.fake_use(e,r,n),this.abstract()}getTreeSize(e){return this.fake_use(e),this.abstract()}sort(e){this.fake_use(e),this.abstract()}fix(e,r){this.fake_use(e,r),this.abstract()}shift(e,r){this.fake_use(e,r),this.abstract()}}class mFe extends Vae{constructor(e){super(),this.layout=e}curveType(){return"horizontal"}getPosition(e){return e.x}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;n!==void 0&&this.layout.hierarchical.addToOrdering(e,n),e.x=r}getTreeSize(e){const r=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:r.min_x,max:r.max_x}}sort(e){ad(e).call(e,function(r,n){return r.x-n.x})}fix(e,r){e.y=this.layout.options.hierarchical.levelSeparation*r,e.options.fixed.y=!0}shift(e,r){this.layout.body.nodes[e].x+=r}}class gFe extends Vae{constructor(e){super(),this.layout=e}curveType(){return"vertical"}getPosition(e){return e.y}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;n!==void 0&&this.layout.hierarchical.addToOrdering(e,n),e.y=r}getTreeSize(e){const r=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:r.min_y,max:r.max_y}}sort(e){ad(e).call(e,function(r,n){return r.y-n.y})}fix(e,r){e.x=this.layout.options.hierarchical.levelSeparation*r,e.options.fixed.x=!0}shift(e,r){this.layout.body.nodes[e].y+=r}}var KX={},GX;function yFe(){if(GX)return KX;GX=1;var t=Ie(),e=vl().every,r=Ph(),n=r("every");return t({target:"Array",proto:!0,forced:!n},{every:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),KX}var _j,YX;function vFe(){if(YX)return _j;YX=1,yFe();var t=ln();return _j=t("Array","every"),_j}var Ej,QX;function bFe(){if(QX)return Ej;QX=1;var t=Or(),e=vFe(),r=Array.prototype;return Ej=function(n){var i=n.every;return n===r||t(r,n)&&i===r.every?e:i},Ej}var Nj,XX;function xFe(){if(XX)return Nj;XX=1;var t=bFe();return Nj=t,Nj}var Cj,JX;function wFe(){return JX||(JX=1,Cj=xFe()),Cj}var SFe=wFe(),Uae=ze(SFe);function _Fe(t,e){const r=new fa;return Ot(t).call(t,n=>{var i;Ot(i=n.edges).call(i,s=>{s.connected&&r.add(s)})}),Ot(r).call(r,n=>{const i=n.from.id,s=n.to.id;e[i]==null&&(e[i]=0),(e[s]==null||e[i]>=e[s])&&(e[s]=e[i]+1)}),e}function EFe(t){return Hae(e=>{var r,n;return Uae(r=Hn(n=e.edges).call(n,i=>t.has(i.toId))).call(r,i=>i.to===e)},(e,r)=>r>e,"from",t)}function NFe(t){return Hae(e=>{var r,n;return Uae(r=Hn(n=e.edges).call(n,i=>t.has(i.toId))).call(r,i=>i.from===e)},(e,r)=>r<e,"to",t)}function Hae(t,e,r,n){var i;const s=dc(null),o=zae(i=[...Aae(n).call(n)]).call(i,(h,f)=>h+1+f.edges.length,0),a=r+"Id",l=r==="to"?1:-1;for(const[h,f]of n){if(!n.has(h)||!t(f))continue;s[h]=0;const p=[f];let m=0,g;for(;g=p.pop();){var c,d;if(!n.has(h))continue;const v=s[g.id]+l;if(Ot(c=Hn(d=g.edges).call(d,y=>y.connected&&y.to!==y.from&&y[r]!==g&&n.has(y.toId)&&n.has(y.fromId))).call(c,y=>{const b=y[a],w=s[b];(w==null||e(v,w))&&(s[b]=v,p.push(y[r]))}),m>o)return _Fe(n,s);++m}}return s}class CFe{constructor(){this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}addRelation(e,r){this.childrenReference[e]===void 0&&(this.childrenReference[e]=[]),this.childrenReference[e].push(r),this.parentReference[r]===void 0&&(this.parentReference[r]=[]),this.parentReference[r].push(e)}checkIfTree(){for(const e in this.parentReference)if(this.parentReference[e].length>1){this.isTree=!1;return}this.isTree=!0}numTrees(){return this.treeIndex+1}setTreeIndex(e,r){r!==void 0&&this.trees[e.id]===void 0&&(this.trees[e.id]=r,this.treeIndex=Math.max(r,this.treeIndex))}ensureLevel(e){this.levels[e]===void 0&&(this.levels[e]=0)}getMaxLevel(e){const r={},n=i=>{if(r[i]!==void 0)return r[i];let s=this.levels[i];if(this.childrenReference[i]){const o=this.childrenReference[i];if(o.length>0)for(let a=0;a<o.length;a++)s=Math.max(s,n(o[a]))}return r[i]=s,s};return n(e)}levelDownstream(e,r){this.levels[r.id]===void 0&&(this.levels[e.id]===void 0&&(this.levels[e.id]=0),this.levels[r.id]=this.levels[e.id]+1)}setMinLevelToZero(){var e;const r=new d$;let n=0;const i=ad(e=[...new fa(BPe(this.levels))]).call(e,(s,o)=>s-o);for(const s of i)r.set(s,n++);for(const s in this.levels)Object.prototype.hasOwnProperty.call(this.levels,s)&&(this.levels[s]=r.get(this.levels[s]))}getTreeSize(e,r){let n=1e9,i=-1e9,s=1e9,o=-1e9;for(const a in this.trees)if(Object.prototype.hasOwnProperty.call(this.trees,a)&&this.trees[a]===r){const l=e[a];n=Math.min(l.x,n),i=Math.max(l.x,i),s=Math.min(l.y,s),o=Math.max(l.y,o)}return{min_x:n,max_x:i,min_y:s,max_y:o}}hasSameParent(e,r){const n=this.parentReference[e.id],i=this.parentReference[r.id];if(n===void 0||i===void 0)return!1;for(let s=0;s<n.length;s++)for(let o=0;o<i.length;o++)if(n[s]==i[o])return!0;return!1}inSameSubNetwork(e,r){return this.trees[e.id]===this.trees[r.id]}getLevels(){return ar(this.distributionOrdering)}addToOrdering(e,r){this.distributionOrdering[r]===void 0&&(this.distributionOrdering[r]=[]);let n=!1;const i=this.distributionOrdering[r];for(const s in i)if(i[s]===e){n=!0;break}n||(this.distributionOrdering[r].push(e),this.distributionIndex[e.id]=this.distributionOrdering[r].length-1)}}class kFe{constructor(e){this.body=e,this._resetRNG(Math.random()+":"+Uv()),this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},_r(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("_dataChanged",()=>{this.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",()=>{this.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",()=>{this.setupHierarchicalLayout()}),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",()=>{if(this.options.hierarchical.enabled!==!0)return;const e=this.direction.curveType();this.body.emitter.emit("_forceDisableDynamicCurves",e,!1)})}setOptions(e,r){if(e!==void 0){const n=this.options.hierarchical,i=n.enabled;if(Rh(["randomSeed","improvedLayout","clusterThreshold"],this.options,e),Pi(this.options,e,"hierarchical"),e.randomSeed!==void 0&&this._resetRNG(e.randomSeed),n.enabled===!0)return i===!0&&this.body.emitter.emit("refresh",!0),n.direction==="RL"||n.direction==="DU"?n.levelSeparation>0&&(n.levelSeparation*=-1):n.levelSeparation<0&&(n.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(r);if(i===!0)return this.body.emitter.emit("refresh"),It(r,this.optionsBackup)}return r}_resetRNG(e){this.initialRandomSeed=e,this._rng=Sb(this.initialRandomSeed)}adaptAllOptionsForHierarchicalLayout(e){if(this.options.hierarchical.enabled===!0){const r=this.optionsBackup.physics;e.physics===void 0||e.physics===!0?(e.physics={enabled:r.enabled===void 0?!0:r.enabled,solver:"hierarchicalRepulsion"},r.enabled=r.enabled===void 0?!0:r.enabled,r.solver=r.solver||"barnesHut"):typeof e.physics=="object"?(r.enabled=e.physics.enabled===void 0?!0:e.physics.enabled,r.solver=e.physics.solver||"barnesHut",e.physics.solver="hierarchicalRepulsion"):e.physics!==!1&&(r.solver="barnesHut",e.physics={solver:"hierarchicalRepulsion"});let n=this.direction.curveType();if(e.edges===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges={smooth:!1};else if(e.edges.smooth===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges.smooth=!1;else if(typeof e.edges.smooth=="boolean")this.optionsBackup.edges={smooth:e.edges.smooth},e.edges.smooth={enabled:e.edges.smooth,type:n};else{const i=e.edges.smooth;i.type!==void 0&&i.type!=="dynamic"&&(n=i.type),this.optionsBackup.edges={smooth:{enabled:i.enabled===void 0?!0:i.enabled,type:i.type===void 0?"dynamic":i.type,roundness:i.roundness===void 0?.5:i.roundness,forceDirection:i.forceDirection===void 0?!1:i.forceDirection}},e.edges.smooth={enabled:i.enabled===void 0?!0:i.enabled,type:n,roundness:i.roundness===void 0?.5:i.roundness,forceDirection:i.forceDirection===void 0?!1:i.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",n)}return e}positionInitially(e){if(this.options.hierarchical.enabled!==!0){this._resetRNG(this.initialRandomSeed);const r=e.length+50;for(let n=0;n<e.length;n++){const i=e[n],s=2*Math.PI*this._rng();i.x===void 0&&(i.x=r*Math.cos(s)),i.y===void 0&&(i.y=r*Math.sin(s))}}}layoutNetwork(){if(this.options.hierarchical.enabled!==!0&&this.options.improvedLayout===!0){const e=this.body.nodeIndices;let r=0;for(let n=0;n<e.length;n++)this.body.nodes[e[n]].predefinedPosition===!0&&(r+=1);if(r<.5*e.length){let i=0;const s=this.options.clusterThreshold,o={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(e.length>s){const l=e.length;for(;e.length>s&&i<=10;){i+=1;const c=e.length;i%3===0?this.body.modules.clustering.clusterBridges(o):this.body.modules.clustering.clusterOutliers(o);const d=e.length;if(c==d&&i%3!==0){this._declusterAll(),this.body.emitter.emit("_layoutFailed"),console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.");return}}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*l)})}i>10&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(e,this.body.edgeIndices,!0),this._shiftToCenter();const a=70;for(let l=0;l<e.length;l++){const c=this.body.nodes[e[l]];c.predefinedPosition===!1&&(c.x+=(.5-this._rng())*a,c.y+=(.5-this._rng())*a)}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}_shiftToCenter(){const e=Cn.getRangeCore(this.body.nodes,this.body.nodeIndices),r=Cn.findCenter(e);for(let n=0;n<this.body.nodeIndices.length;n++){const i=this.body.nodes[this.body.nodeIndices[n]];i.x-=r.x,i.y-=r.y}}_declusterAll(){let e=!0;for(;e===!0;){e=!1;for(let r=0;r<this.body.nodeIndices.length;r++)this.body.nodes[this.body.nodeIndices[r]].isCluster===!0&&(e=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[r],{},!1));e===!0&&this.body.emitter.emit("_dataChanged")}}getSeed(){return this.initialRandomSeed}setupHierarchicalLayout(){if(this.options.hierarchical.enabled===!0&&this.body.nodeIndices.length>0){let e,r,n=!1,i=!1;this.lastNodeOnLevel={},this.hierarchical=new CFe;for(r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&(e=this.body.nodes[r],e.options.level!==void 0?(n=!0,this.hierarchical.levels[r]=e.options.level):i=!0);if(i===!0&&n===!0)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");{if(i===!0){const o=this.options.hierarchical.sortMethod;o==="hubsize"?this._determineLevelsByHubsize():o==="directed"?this._determineLevelsDirected():o==="custom"&&this._determineLevelsCustomCallback()}for(const o in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,o)&&this.hierarchical.ensureLevel(o);const s=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(s),this._condenseHierarchy(),this._shiftToCenter()}}}_condenseHierarchy(){var e=this;let r=!1;const n={},i=()=>{const y=o();let b=0;for(let w=0;w<y.length-1;w++){const x=y[w].max-y[w+1].min;b+=x+this.options.hierarchical.treeSpacing,s(w+1,b)}},s=(y,b)=>{const w=this.hierarchical.trees;for(const x in w)Object.prototype.hasOwnProperty.call(w,x)&&w[x]===y&&this.direction.shift(x,b)},o=()=>{const y=[];for(let b=0;b<this.hierarchical.numTrees();b++)y.push(this.direction.getTreeSize(b));return y},a=(y,b)=>{if(!b[y.id]&&(b[y.id]=!0,this.hierarchical.childrenReference[y.id])){const w=this.hierarchical.childrenReference[y.id];if(w.length>0)for(let x=0;x<w.length;x++)a(this.body.nodes[w[x]],b)}},l=function(y){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e9,w=1e9,x=1e9,S=1e9,_=-1e9;for(const E in y)if(Object.prototype.hasOwnProperty.call(y,E)){const N=e.body.nodes[E],k=e.hierarchical.levels[N.id],C=e.direction.getPosition(N),[O,P]=e._getSpaceAroundNode(N,y);w=Math.min(O,w),x=Math.min(P,x),k<=b&&(S=Math.min(C,S),_=Math.max(C,_))}return[S,_,w,x]},c=(y,b)=>{const w=this.hierarchical.getMaxLevel(y.id),x=this.hierarchical.getMaxLevel(b.id);return Math.min(w,x)},d=(y,b,w)=>{const x=this.hierarchical;for(let S=0;S<b.length;S++){const _=b[S],E=x.distributionOrdering[_];if(E.length>1)for(let N=0;N<E.length-1;N++){const k=E[N],C=E[N+1];x.hasSameParent(k,C)&&x.inSameSubNetwork(k,C)&&y(k,C,w)}}},h=function(y,b){let w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const x=e.direction.getPosition(y),S=e.direction.getPosition(b),_=Math.abs(S-x),E=e.options.hierarchical.nodeSpacing;if(_>E){const N={},k={};a(y,N),a(b,k);const C=c(y,b),O=l(N,C),P=l(k,C),j=O[1],A=P[0],D=P[2];if(Math.abs(j-A)>E){let L=j-A+E;L<-D+E&&(L=-D+E),L<0&&(e._shiftBlock(b.id,L),r=!0,w===!0&&e._centerParent(b))}}},f=(y,b)=>{const w=b.id,x=b.edges,S=this.hierarchical.levels[b.id],_=this.options.hierarchical.levelSeparation*this.options.hierarchical.levelSeparation,E={},N=[];for(let D=0;D<x.length;D++){const I=x[D];if(I.toId!=I.fromId){const L=I.toId==w?I.from:I.to;E[x[D].id]=L,this.hierarchical.levels[L.id]<S&&N.push(I)}}const k=(D,I)=>{let L=0;for(let F=0;F<I.length;F++)if(E[I[F].id]!==void 0){const W=this.direction.getPosition(E[I[F].id])-D;L+=W/Math.sqrt(W*W+_)}return L},C=(D,I)=>{let L=0;for(let F=0;F<I.length;F++)if(E[I[F].id]!==void 0){const W=this.direction.getPosition(E[I[F].id])-D;L-=_*Math.pow(W*W+_,-1.5)}return L},O=(D,I)=>{let L=this.direction.getPosition(b);const F={};for(let W=0;W<D;W++){const V=k(L,I),H=C(L,I),K=40,de=Math.max(-K,Math.min(K,Math.round(V/H)));if(L=L-de,F[L]!==void 0)break;F[L]=W}return L},P=D=>{const I=this.direction.getPosition(b);if(n[b.id]===void 0){const K={};a(b,K),n[b.id]=K}const L=l(n[b.id]),F=L[2],W=L[3],V=D-I;let H=0;V>0?H=Math.min(V,W-this.options.hierarchical.nodeSpacing):V<0&&(H=-Math.min(-V,F-this.options.hierarchical.nodeSpacing)),H!=0&&(this._shiftBlock(b.id,H),r=!0)},j=D=>{const I=this.direction.getPosition(b),[L,F]=this._getSpaceAroundNode(b),W=D-I;let V=I;W>0?V=Math.min(I+(F-this.options.hierarchical.nodeSpacing),D):W<0&&(V=Math.max(I-(L-this.options.hierarchical.nodeSpacing),D)),V!==I&&(this.direction.setPosition(b,V),r=!0)};let A=O(y,N);P(A),A=O(y,x),j(A)},p=y=>{let b=this.hierarchical.getLevels();b=uc(b).call(b);for(let w=0;w<y;w++){r=!1;for(let x=0;x<b.length;x++){const S=b[x],_=this.hierarchical.distributionOrdering[S];for(let E=0;E<_.length;E++)f(1e3,_[E])}if(r!==!0)break}},m=y=>{let b=this.hierarchical.getLevels();b=uc(b).call(b);for(let w=0;w<y&&(r=!1,d(h,b,!0),r===!0);w++);},g=()=>{for(const y in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,y)&&this._centerParent(this.body.nodes[y])},v=()=>{let y=this.hierarchical.getLevels();y=uc(y).call(y);for(let b=0;b<y.length;b++){const w=y[b],x=this.hierarchical.distributionOrdering[w];for(let S=0;S<x.length;S++)this._centerParent(x[S])}};this.options.hierarchical.blockShifting===!0&&(m(5),g()),this.options.hierarchical.edgeMinimization===!0&&p(20),this.options.hierarchical.parentCentralization===!0&&v(),i()}_getSpaceAroundNode(e,r){let n=!0;r===void 0&&(n=!1);const i=this.hierarchical.levels[e.id];if(i!==void 0){const s=this.hierarchical.distributionIndex[e.id],o=this.direction.getPosition(e),a=this.hierarchical.distributionOrdering[i];let l=1e9,c=1e9;if(s!==0){const d=a[s-1];if(n===!0&&r[d.id]===void 0||n===!1){const h=this.direction.getPosition(d);l=o-h}}if(s!=a.length-1){const d=a[s+1];if(n===!0&&r[d.id]===void 0||n===!1){const h=this.direction.getPosition(d);c=Math.min(c,h-o)}}return[l,c]}else return[0,0]}_centerParent(e){if(this.hierarchical.parentReference[e.id]){const r=this.hierarchical.parentReference[e.id];for(let n=0;n<r.length;n++){const i=r[n],s=this.body.nodes[i],o=this.hierarchical.childrenReference[i];if(o!==void 0){const a=this._getCenterPosition(o),l=this.direction.getPosition(s),[c,d]=this._getSpaceAroundNode(s),h=l-a;(h<0&&Math.abs(h)<d-this.options.hierarchical.nodeSpacing||h>0&&Math.abs(h)<c-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(s,a)}}}}_placeNodesByHierarchy(e){this.positionedNodes={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r;let i=ar(e[n]);i=this._indexArrayToNodes(i),ad(r=this.direction).call(r,i);let s=0;for(let o=0;o<i.length;o++){const a=i[o];if(this.positionedNodes[a.id]===void 0){const l=this.options.hierarchical.nodeSpacing;let c=l*s;s>0&&(c=this.direction.getPosition(i[o-1])+l),this.direction.setPosition(a,c,n),this._validatePositionAndContinue(a,n,c),s++}}}}_placeBranchNodes(e,r){var n;const i=this.hierarchical.childrenReference[e];if(i===void 0)return;const s=[];for(let a=0;a<i.length;a++)s.push(this.body.nodes[i[a]]);ad(n=this.direction).call(n,s);for(let a=0;a<s.length;a++){const l=s[a],c=this.hierarchical.levels[l.id];if(c>r&&this.positionedNodes[l.id]===void 0){const d=this.options.hierarchical.nodeSpacing;let h;a===0?h=this.direction.getPosition(this.body.nodes[e]):h=this.direction.getPosition(s[a-1])+d,this.direction.setPosition(l,h,c),this._validatePositionAndContinue(l,c,h)}else return}const o=this._getCenterPosition(s);this.direction.setPosition(this.body.nodes[e],o,r)}_validatePositionAndContinue(e,r,n){if(this.hierarchical.isTree){if(this.lastNodeOnLevel[r]!==void 0){const i=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[r]]);if(n-i<this.options.hierarchical.nodeSpacing){const s=i+this.options.hierarchical.nodeSpacing-n,o=this._findCommonParent(this.lastNodeOnLevel[r],e.id);this._shiftBlock(o.withChild,s)}}this.lastNodeOnLevel[r]=e.id,this.positionedNodes[e.id]=!0,this._placeBranchNodes(e.id,r)}}_indexArrayToNodes(e){const r=[];for(let n=0;n<e.length;n++)r.push(this.body.nodes[e[n]]);return r}_getDistribution(){const e={};let r,n;for(r in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,r)){n=this.body.nodes[r];const i=this.hierarchical.levels[r]===void 0?0:this.hierarchical.levels[r];this.direction.fix(n,i),e[i]===void 0&&(e[i]={}),e[i][r]=n}return e}_getActiveEdges(e){const r=[];return et(e.edges,n=>{var i;wt(i=this.body.edgeIndices).call(i,n.id)!==-1&&r.push(n)}),r}_getHubSizes(){const e={},r=this.body.nodeIndices;et(r,i=>{const s=this.body.nodes[i],o=this._getActiveEdges(s).length;e[o]=!0});const n=[];return et(e,i=>{n.push(Number(i))}),ad(n).call(n,function(i,s){return s-i}),n}_determineLevelsByHubsize(){const e=(n,i)=>{this.hierarchical.levelDownstream(n,i)},r=this._getHubSizes();for(let n=0;n<r.length;++n){const i=r[n];if(i===0)break;et(this.body.nodeIndices,s=>{const o=this.body.nodes[s];i===this._getActiveEdges(o).length&&this._crawlNetwork(e,s)})}}_determineLevelsCustomCallback(){const r=function(i,s,o){},n=(i,s,o)=>{let a=this.hierarchical.levels[i.id];a===void 0&&(a=this.hierarchical.levels[i.id]=1e5);const l=r(Cn.cloneOptions(i,"node"),Cn.cloneOptions(s,"node"),Cn.cloneOptions(o,"edge"));this.hierarchical.levels[s.id]=a+l};this._crawlNetwork(n),this.hierarchical.setMinLevelToZero()}_determineLevelsDirected(){var e;const r=zae(e=this.body.nodeIndices).call(e,(n,i)=>(n.set(i,this.body.nodes[i]),n),new d$);this.options.hierarchical.shakeTowards==="roots"?this.hierarchical.levels=NFe(r):this.hierarchical.levels=EFe(r),this.hierarchical.setMinLevelToZero()}_generateMap(){const e=(r,n)=>{this.hierarchical.levels[n.id]>this.hierarchical.levels[r.id]&&this.hierarchical.addRelation(r.id,n.id)};this._crawlNetwork(e),this.hierarchical.checkIfTree()}_crawlNetwork(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},r=arguments.length>1?arguments[1]:void 0;const n={},i=(s,o)=>{if(n[s.id]===void 0){this.hierarchical.setTreeIndex(s,o),n[s.id]=!0;let a;const l=this._getActiveEdges(s);for(let c=0;c<l.length;c++){const d=l[c];d.connected===!0&&(d.toId==s.id?a=d.from:a=d.to,s.id!=a.id&&(e(s,a,d),i(a,o)))}}};if(r===void 0){let s=0;for(let o=0;o<this.body.nodeIndices.length;o++){const a=this.body.nodeIndices[o];if(n[a]===void 0){const l=this.body.nodes[a];i(l,s),s+=1}}}else{const s=this.body.nodes[r];if(s===void 0){console.error("Node not found:",r);return}i(s)}}_shiftBlock(e,r){const n={},i=s=>{if(n[s])return;n[s]=!0,this.direction.shift(s,r);const o=this.hierarchical.childrenReference[s];if(o!==void 0)for(let a=0;a<o.length;a++)i(o[a])};i(e)}_findCommonParent(e,r){const n={},i=(o,a)=>{const l=this.hierarchical.parentReference[a];if(l!==void 0)for(let c=0;c<l.length;c++){const d=l[c];o[d]=!0,i(o,d)}},s=(o,a)=>{const l=this.hierarchical.parentReference[a];if(l!==void 0)for(let c=0;c<l.length;c++){const d=l[c];if(o[d]!==void 0)return{foundParent:d,withChild:a};const h=s(o,d);if(h.foundParent!==null)return h}return{foundParent:null,withChild:a}};return i(n,e),s(n,r)}setDirectionStrategy(){this.options.hierarchical.direction==="UD"||this.options.hierarchical.direction==="DU"?this.direction=new mFe(this):this.direction=new gFe(this)}_getCenterPosition(e){let r=1e9,n=-1e9;for(let i=0;i<e.length;i++){let s;if(e[i].id!==void 0)s=e[i];else{const a=e[i];s=this.body.nodes[a]}const o=this.direction.getPosition(s);r=Math.min(r,o),n=Math.max(n,o)}return .5*(r+n)}}class TFe{constructor(e,r,n,i){var s,o;this.body=e,this.canvas=r,this.selectionHandler=n,this.interactionHandler=i,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this._domEventListenerCleanupQueue=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},_r(this.options,this.defaultOptions),this.body.emitter.on("destroy",()=>{this._clean()}),this.body.emitter.on("_dataChanged",ne(s=this._restore).call(s,this)),this.body.emitter.on("_resetData",ne(o=this._restore).call(o,this))}_restore(){this.inMode!==!1&&(this.options.initiallyActive===!0?this.enableEditMode():this.disableEditMode())}setOptions(e,r,n){r!==void 0&&(r.locale!==void 0?this.options.locale=r.locale:this.options.locale=n.locale,r.locales!==void 0?this.options.locales=r.locales:this.options.locales=n.locales),e!==void 0&&(typeof e=="boolean"?this.options.enabled=e:(this.options.enabled=!0,It(this.options,e)),this.options.initiallyActive===!0&&(this.editMode=!0),this._setup())}toggleEditMode(){this.editMode===!0?this.disableEditMode():this.enableEditMode()}enableEditMode(){this.editMode=!0,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}disableEditMode(){this.editMode=!1,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}showManipulatorToolbar(){if(this._clean(),this.manipulationDOM={},this.guiEnabled===!0){var e,r;this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";const n=this.selectionHandler.getSelectedNodeCount(),i=this.selectionHandler.getSelectedEdgeCount(),s=n+i,o=this.options.locales[this.options.locale];let a=!1;this.options.addNode!==!1&&(this._createAddNodeButton(o),a=!0),this.options.addEdge!==!1&&(a===!0?this._createSeperator(1):a=!0,this._createAddEdgeButton(o)),n===1&&typeof this.options.editNode=="function"?(a===!0?this._createSeperator(2):a=!0,this._createEditNodeButton(o)):i===1&&n===0&&this.options.editEdge!==!1&&(a===!0?this._createSeperator(3):a=!0,this._createEditEdgeButton(o)),s!==0&&(n>0&&this.options.deleteNode!==!1?(a===!0&&this._createSeperator(4),this._createDeleteButton(o)):n===0&&this.options.deleteEdge!==!1&&(a===!0&&this._createSeperator(4),this._createDeleteButton(o))),this._bindElementEvents(this.closeDiv,ne(e=this.toggleEditMode).call(e,this)),this._temporaryBindEvent("select",ne(r=this.showManipulatorToolbar).call(r,this))}this.body.emitter.emit("_redraw")}addNodeMode(){var e;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addNode",this.guiEnabled===!0){var r;const n=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(n),this._createSeperator(),this._createDescription(n.addDescription||this.options.locales.en.addDescription),this._bindElementEvents(this.closeDiv,ne(r=this.toggleEditMode).call(r,this))}this._temporaryBindEvent("click",ne(e=this._performAddNode).call(e,this))}editNode(){this.editMode!==!0&&this.enableEditMode(),this._clean();const e=this.selectionHandler.getSelectedNodes()[0];if(e!==void 0)if(this.inMode="editNode",typeof this.options.editNode=="function")if(e.isCluster!==!0){const r=It({},e.options,!1);if(r.x=e.x,r.y=e.y,this.options.editNode.length===2)this.options.editNode(r,n=>{n!=null&&this.inMode==="editNode"&&this.body.data.nodes.getDataSet().update(n),this.showManipulatorToolbar()});else throw new Error("The function for edit does not support two arguments (data, callback)")}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError);else throw new Error("No function has been configured to handle the editing of nodes.");else this.showManipulatorToolbar()}addEdgeMode(){var e,r,n,i,s;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addEdge",this.guiEnabled===!0){var o;const a=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(a),this._createSeperator(),this._createDescription(a.edgeDescription||this.options.locales.en.edgeDescription),this._bindElementEvents(this.closeDiv,ne(o=this.toggleEditMode).call(o,this))}this._temporaryBindUI("onTouch",ne(e=this._handleConnect).call(e,this)),this._temporaryBindUI("onDragEnd",ne(r=this._finishConnect).call(r,this)),this._temporaryBindUI("onDrag",ne(n=this._dragControlNode).call(n,this)),this._temporaryBindUI("onRelease",ne(i=this._finishConnect).call(i,this)),this._temporaryBindUI("onDragStart",ne(s=this._dragStartEdge).call(s,this)),this._temporaryBindUI("onHold",()=>{})}editEdgeMode(){if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="editEdge",typeof this.options.editEdge=="object"&&typeof this.options.editEdge.editWithoutDrag=="function"&&(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0)){const o=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(o.from.id,o.to.id);return}if(this.guiEnabled===!0){var e;const o=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(o),this._createSeperator(),this._createDescription(o.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindElementEvents(this.closeDiv,ne(e=this.toggleEditMode).call(e,this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0){var r,n,i,s;const o=this.body.edges[this.edgeBeingEditedId],a=this._getNewTargetNode(o.from.x,o.from.y),l=this._getNewTargetNode(o.to.x,o.to.y);this.temporaryIds.nodes.push(a.id),this.temporaryIds.nodes.push(l.id),this.body.nodes[a.id]=a,this.body.nodeIndices.push(a.id),this.body.nodes[l.id]=l,this.body.nodeIndices.push(l.id),this._temporaryBindUI("onTouch",ne(r=this._controlNodeTouch).call(r,this)),this._temporaryBindUI("onTap",()=>{}),this._temporaryBindUI("onHold",()=>{}),this._temporaryBindUI("onDragStart",ne(n=this._controlNodeDragStart).call(n,this)),this._temporaryBindUI("onDrag",ne(i=this._controlNodeDrag).call(i,this)),this._temporaryBindUI("onDragEnd",ne(s=this._controlNodeDragEnd).call(s,this)),this._temporaryBindUI("onMouseMove",()=>{}),this._temporaryBindEvent("beforeDrawing",c=>{const d=o.edgeType.findBorderPositions(c);a.selected===!1&&(a.x=d.from.x,a.y=d.from.y),l.selected===!1&&(l.x=d.to.x,l.y=d.to.y)}),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}deleteSelected(){this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="delete";const e=this.selectionHandler.getSelectedNodeIds(),r=this.selectionHandler.getSelectedEdgeIds();let n;if(e.length>0){for(let i=0;i<e.length;i++)if(this.body.nodes[e[i]].isCluster===!0){alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);return}typeof this.options.deleteNode=="function"&&(n=this.options.deleteNode)}else r.length>0&&typeof this.options.deleteEdge=="function"&&(n=this.options.deleteEdge);if(typeof n=="function"){const i={nodes:e,edges:r};if(n.length===2)n(i,s=>{s!=null&&this.inMode==="delete"?(this.body.data.edges.getDataSet().remove(s.edges),this.body.data.nodes.getDataSet().remove(s.nodes),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()):(this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar())});else throw new Error("The function for delete does not support two arguments (data, callback)")}else this.body.data.edges.getDataSet().remove(r),this.body.data.nodes.getDataSet().remove(e),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}_setup(){this.options.enabled===!0?(this.guiEnabled=!0,this._createWrappers(),this.editMode===!1?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}_createWrappers(){if(this.manipulationDiv===void 0&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",this.editMode===!0?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),this.editModeDiv===void 0&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",this.editMode===!0?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),this.closeDiv===void 0){var e,r;this.closeDiv=document.createElement("button"),this.closeDiv.className="vis-close",this.closeDiv.setAttribute("aria-label",(e=(r=this.options.locales[this.options.locale])===null||r===void 0?void 0:r.close)!==null&&e!==void 0?e:this.options.locales.en.close),this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv)}}_getNewTargetNode(e,r){const n=It({},this.options.controlNodeStyle);n.id="targetNode"+zf(),n.hidden=!1,n.physics=!1,n.x=e,n.y=r;const i=this.body.functions.createNode(n);return i.shape.boundingBox={left:e,right:e,top:r,bottom:r},i}_createEditButton(){var e;this._clean(),this.manipulationDOM={},oa(this.editModeDiv);const r=this.options.locales[this.options.locale],n=this._createButton("editMode","vis-edit vis-edit-mode",r.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(n),this._bindElementEvents(n,ne(e=this.toggleEditMode).call(e,this))}_clean(){this.inMode=!1,this.guiEnabled===!0&&(oa(this.editModeDiv),oa(this.manipulationDiv),this._cleanupDOMEventListeners()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}_cleanupDOMEventListeners(){for(const r of wo(e=this._domEventListenerCleanupQueue).call(e,0)){var e;r()}}_removeManipulationDOM(){this._clean(),oa(this.manipulationDiv),oa(this.editModeDiv),oa(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}_createSeperator(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+e]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+e].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+e])}_createAddNodeButton(e){var r;const n=this._createButton("addNode","vis-add",e.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ne(r=this.addNodeMode).call(r,this))}_createAddEdgeButton(e){var r;const n=this._createButton("addEdge","vis-connect",e.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ne(r=this.addEdgeMode).call(r,this))}_createEditNodeButton(e){var r;const n=this._createButton("editNode","vis-edit",e.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ne(r=this.editNode).call(r,this))}_createEditEdgeButton(e){var r;const n=this._createButton("editEdge","vis-edit",e.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ne(r=this.editEdgeMode).call(r,this))}_createDeleteButton(e){var r;let n;this.options.rtl?n="vis-delete-rtl":n="vis-delete";const i=this._createButton("delete",n,e.del||this.options.locales.en.del);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,ne(r=this.deleteSelected).call(r,this))}_createBackButton(e){var r;const n=this._createButton("back","vis-back",e.back||this.options.locales.en.back);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ne(r=this.showManipulatorToolbar).call(r,this))}_createButton(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"vis-label";return this.manipulationDOM[e+"Div"]=document.createElement("button"),this.manipulationDOM[e+"Div"].className="vis-button "+r,this.manipulationDOM[e+"Label"]=document.createElement("div"),this.manipulationDOM[e+"Label"].className=i,this.manipulationDOM[e+"Label"].innerText=n,this.manipulationDOM[e+"Div"].appendChild(this.manipulationDOM[e+"Label"]),this.manipulationDOM[e+"Div"]}_createDescription(e){this.manipulationDOM.descriptionLabel=document.createElement("div"),this.manipulationDOM.descriptionLabel.className="vis-none",this.manipulationDOM.descriptionLabel.innerText=e,this.manipulationDiv.appendChild(this.manipulationDOM.descriptionLabel)}_temporaryBindEvent(e,r){this.temporaryEventFunctions.push({event:e,boundFunction:r}),this.body.emitter.on(e,r)}_temporaryBindUI(e,r){if(this.body.eventListeners[e]!==void 0)this.temporaryUIFunctions[e]=this.body.eventListeners[e],this.body.eventListeners[e]=r;else throw new Error("This UI function does not exist. Typo? You tried: "+e+" possible are: "+Rm(ar(this.body.eventListeners)))}_unbindTemporaryUIs(){for(const e in this.temporaryUIFunctions)Object.prototype.hasOwnProperty.call(this.temporaryUIFunctions,e)&&(this.body.eventListeners[e]=this.temporaryUIFunctions[e],delete this.temporaryUIFunctions[e]);this.temporaryUIFunctions={}}_unbindTemporaryEvents(){for(let e=0;e<this.temporaryEventFunctions.length;e++){const r=this.temporaryEventFunctions[e].event,n=this.temporaryEventFunctions[e].boundFunction;this.body.emitter.off(r,n)}this.temporaryEventFunctions=[]}_bindElementEvents(e,r){const n=new sd(e,{});Xv(n,r),this._domEventListenerCleanupQueue.push(()=>{n.destroy()});const i=s=>{let{keyCode:o,key:a}=s;(a==="Enter"||a===" "||o===13||o===32)&&r()};e.addEventListener("keyup",i,!1),this._domEventListenerCleanupQueue.push(()=>{e.removeEventListener("keyup",i,!1)})}_cleanupTemporaryNodesAndEdges(){for(let s=0;s<this.temporaryIds.edges.length;s++){var e;this.body.edges[this.temporaryIds.edges[s]].disconnect(),delete this.body.edges[this.temporaryIds.edges[s]];const o=wt(e=this.body.edgeIndices).call(e,this.temporaryIds.edges[s]);if(o!==-1){var r;wo(r=this.body.edgeIndices).call(r,o,1)}}for(let s=0;s<this.temporaryIds.nodes.length;s++){var n;delete this.body.nodes[this.temporaryIds.nodes[s]];const o=wt(n=this.body.nodeIndices).call(n,this.temporaryIds.nodes[s]);if(o!==-1){var i;wo(i=this.body.nodeIndices).call(i,o,1)}}this.temporaryIds={nodes:[],edges:[]}}_controlNodeTouch(e){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=_r({},this.body.view.translation)}_controlNodeDragStart(){const e=this.lastTouch,r=this.selectionHandler._pointerToPositionObject(e),n=this.body.nodes[this.temporaryIds.nodes[0]],i=this.body.nodes[this.temporaryIds.nodes[1]],s=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;const o=n.isOverlappingWith(r),a=i.isOverlappingWith(r);o===!0?(this.selectedControlNode=n,s.edgeType.from=n):a===!0&&(this.selectedControlNode=i,s.edgeType.to=i),this.selectedControlNode!==void 0&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}_controlNodeDrag(e){this.body.emitter.emit("disablePhysics");const r=this.body.functions.getPointer(e.center),n=this.canvas.DOMtoCanvas(r);this.selectedControlNode!==void 0?(this.selectedControlNode.x=n.x,this.selectedControlNode.y=n.y):this.interactionHandler.onDrag(e),this.body.emitter.emit("_redraw")}_controlNodeDragEnd(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r),i=this.body.edges[this.edgeBeingEditedId];if(this.selectedControlNode===void 0)return;this.selectionHandler.unselectAll();const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let a=s.length-1;a>=0;a--)if(s[a]!==this.selectedControlNode.id){o=this.body.nodes[s[a]];break}if(o!==void 0&&this.selectedControlNode!==void 0)if(o.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{const a=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===a.id?this._performEditEdge(o.id,i.to.id):this._performEditEdge(i.from.id,o.id)}else i.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}_handleConnect(e){if(new Date().valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=_r({},this.body.view.translation),this.interactionHandler.drag.pointer=this.lastTouch,this.interactionHandler.drag.translation=this.lastTouch.translation;const r=this.lastTouch,n=this.selectionHandler.getNodeAt(r);if(n!==void 0)if(n.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{const i=this._getNewTargetNode(n.x,n.y);this.body.nodes[i.id]=i,this.body.nodeIndices.push(i.id);const s=this.body.functions.createEdge({id:"connectionEdge"+zf(),from:n.id,to:i.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[s.id]=s,this.body.edgeIndices.push(s.id),this.temporaryIds.nodes.push(i.id),this.temporaryIds.edges.push(s.id)}this.touchTime=new Date().valueOf()}}_dragControlNode(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r);let i;this.temporaryIds.edges[0]!==void 0&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let l=s.length-1;l>=0;l--){var a;if(wt(a=this.temporaryIds.nodes).call(a,s[l])===-1){o=this.body.nodes[s[l]];break}}if(e.controlEdge={from:i,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragging",e,r),this.temporaryIds.nodes[0]!==void 0){const l=this.body.nodes[this.temporaryIds.nodes[0]];l.x=this.canvas._XconvertDOMtoCanvas(r.x),l.y=this.canvas._YconvertDOMtoCanvas(r.y),this.body.emitter.emit("_redraw")}else this.interactionHandler.onDrag(e)}_finishConnect(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r);let i;this.temporaryIds.edges[0]!==void 0&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let l=s.length-1;l>=0;l--){var a;if(wt(a=this.temporaryIds.nodes).call(a,s[l])===-1){o=this.body.nodes[s[l]];break}}this._cleanupTemporaryNodesAndEdges(),o!==void 0&&(o.isCluster===!0?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):this.body.nodes[i]!==void 0&&this.body.nodes[o.id]!==void 0&&this._performAddEdge(i,o.id)),e.controlEdge={from:i,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragEnd",e,r),this.body.emitter.emit("_redraw")}_dragStartEdge(e){const r=this.lastTouch;this.selectionHandler.generateClickEvent("dragStart",e,r,void 0,!0)}_performAddNode(e){const r={id:zf(),x:e.pointer.canvas.x,y:e.pointer.canvas.y,label:"new"};if(typeof this.options.addNode=="function")if(this.options.addNode.length===2)this.options.addNode(r,n=>{n!=null&&this.inMode==="addNode"&&this.body.data.nodes.getDataSet().add(n),this.showManipulatorToolbar()});else throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");else this.body.data.nodes.getDataSet().add(r),this.showManipulatorToolbar()}_performAddEdge(e,r){const n={from:e,to:r};if(typeof this.options.addEdge=="function")if(this.options.addEdge.length===2)this.options.addEdge(n,i=>{i!=null&&this.inMode==="addEdge"&&(this.body.data.edges.getDataSet().add(i),this.selectionHandler.unselectAll(),this.showManipulatorToolbar())});else throw new Error("The function for connect does not support two arguments (data,callback)");else this.body.data.edges.getDataSet().add(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}_performEditEdge(e,r){const n={id:this.edgeBeingEditedId,from:e,to:r,label:this.body.data.edges.get(this.edgeBeingEditedId).label};let i=this.options.editEdge;if(typeof i=="object"&&(i=i.editWithoutDrag),typeof i=="function")if(i.length===2)i(n,s=>{s==null||this.inMode!=="editEdge"?(this.body.edges[n.id].updateEdgeType(),this.body.emitter.emit("_redraw"),this.showManipulatorToolbar()):(this.body.data.edges.getDataSet().update(s),this.selectionHandler.unselectAll(),this.showManipulatorToolbar())});else throw new Error("The function for edit does not support two arguments (data, callback)");else this.body.data.edges.getDataSet().update(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}const ae="string",re="boolean",U="number",gf="array",Te="object",Wae="dom",OFe="any",kj=["arrow","bar","box","circle","crow","curve","diamond","image","inv_curve","inv_triangle","triangle","vee"],Tj={borderWidth:{number:U},borderWidthSelected:{number:U,undefined:"undefined"},brokenImage:{string:ae,undefined:"undefined"},chosen:{label:{boolean:re,function:"function"},node:{boolean:re,function:"function"},__type__:{object:Te,boolean:re}},color:{border:{string:ae},background:{string:ae},highlight:{border:{string:ae},background:{string:ae},__type__:{object:Te,string:ae}},hover:{border:{string:ae},background:{string:ae},__type__:{object:Te,string:ae}},__type__:{object:Te,string:ae}},opacity:{number:U,undefined:"undefined"},fixed:{x:{boolean:re},y:{boolean:re},__type__:{object:Te,boolean:re}},font:{align:{string:ae},color:{string:ae},size:{number:U},face:{string:ae},background:{string:ae},strokeWidth:{number:U},strokeColor:{string:ae},vadjust:{number:U},multi:{boolean:re,string:ae},bold:{color:{string:ae},size:{number:U},face:{string:ae},mod:{string:ae},vadjust:{number:U},__type__:{object:Te,string:ae}},boldital:{color:{string:ae},size:{number:U},face:{string:ae},mod:{string:ae},vadjust:{number:U},__type__:{object:Te,string:ae}},ital:{color:{string:ae},size:{number:U},face:{string:ae},mod:{string:ae},vadjust:{number:U},__type__:{object:Te,string:ae}},mono:{color:{string:ae},size:{number:U},face:{string:ae},mod:{string:ae},vadjust:{number:U},__type__:{object:Te,string:ae}},__type__:{object:Te,string:ae}},group:{string:ae,number:U,undefined:"undefined"},heightConstraint:{minimum:{number:U},valign:{string:ae},__type__:{object:Te,boolean:re,number:U}},hidden:{boolean:re},icon:{face:{string:ae},code:{string:ae},size:{number:U},color:{string:ae},weight:{string:ae,number:U},__type__:{object:Te}},id:{string:ae,number:U},image:{selected:{string:ae,undefined:"undefined"},unselected:{string:ae,undefined:"undefined"},__type__:{object:Te,string:ae}},imagePadding:{top:{number:U},right:{number:U},bottom:{number:U},left:{number:U},__type__:{object:Te,number:U}},label:{string:ae,undefined:"undefined"},labelHighlightBold:{boolean:re},level:{number:U,undefined:"undefined"},margin:{top:{number:U},right:{number:U},bottom:{number:U},left:{number:U},__type__:{object:Te,number:U}},mass:{number:U},physics:{boolean:re},scaling:{min:{number:U},max:{number:U},label:{enabled:{boolean:re},min:{number:U},max:{number:U},maxVisible:{number:U},drawThreshold:{number:U},__type__:{object:Te,boolean:re}},customScalingFunction:{function:"function"},__type__:{object:Te}},shadow:{enabled:{boolean:re},color:{string:ae},size:{number:U},x:{number:U},y:{number:U},__type__:{object:Te,boolean:re}},shape:{string:["custom","ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},ctxRenderer:{function:"function"},shapeProperties:{borderDashes:{boolean:re,array:gf},borderRadius:{number:U},interpolation:{boolean:re},useImageSize:{boolean:re},useBorderWithImage:{boolean:re},coordinateOrigin:{string:["center","top-left"]},__type__:{object:Te}},size:{number:U},title:{string:ae,dom:Wae,undefined:"undefined"},value:{number:U,undefined:"undefined"},widthConstraint:{minimum:{number:U},maximum:{number:U},__type__:{object:Te,boolean:re,number:U}},x:{number:U},y:{number:U},__type__:{object:Te}},jFe={configure:{enabled:{boolean:re},filter:{boolean:re,string:ae,array:gf,function:"function"},container:{dom:Wae},showButton:{boolean:re},__type__:{object:Te,boolean:re,string:ae,array:gf,function:"function"}},edges:{arrows:{to:{enabled:{boolean:re},scaleFactor:{number:U},type:{string:kj},imageHeight:{number:U},imageWidth:{number:U},src:{string:ae},__type__:{object:Te,boolean:re}},middle:{enabled:{boolean:re},scaleFactor:{number:U},type:{string:kj},imageWidth:{number:U},imageHeight:{number:U},src:{string:ae},__type__:{object:Te,boolean:re}},from:{enabled:{boolean:re},scaleFactor:{number:U},type:{string:kj},imageWidth:{number:U},imageHeight:{number:U},src:{string:ae},__type__:{object:Te,boolean:re}},__type__:{string:["from","to","middle"],object:Te}},endPointOffset:{from:{number:U},to:{number:U},__type__:{object:Te,number:U}},arrowStrikethrough:{boolean:re},background:{enabled:{boolean:re},color:{string:ae},size:{number:U},dashes:{boolean:re,array:gf},__type__:{object:Te,boolean:re}},chosen:{label:{boolean:re,function:"function"},edge:{boolean:re,function:"function"},__type__:{object:Te,boolean:re}},color:{color:{string:ae},highlight:{string:ae},hover:{string:ae},inherit:{string:["from","to","both"],boolean:re},opacity:{number:U},__type__:{object:Te,string:ae}},dashes:{boolean:re,array:gf},font:{color:{string:ae},size:{number:U},face:{string:ae},background:{string:ae},strokeWidth:{number:U},strokeColor:{string:ae},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:U},multi:{boolean:re,string:ae},bold:{color:{string:ae},size:{number:U},face:{string:ae},mod:{string:ae},vadjust:{number:U},__type__:{object:Te,string:ae}},boldital:{color:{string:ae},size:{number:U},face:{string:ae},mod:{string:ae},vadjust:{number:U},__type__:{object:Te,string:ae}},ital:{color:{string:ae},size:{number:U},face:{string:ae},mod:{string:ae},vadjust:{number:U},__type__:{object:Te,string:ae}},mono:{color:{string:ae},size:{number:U},face:{string:ae},mod:{string:ae},vadjust:{number:U},__type__:{object:Te,string:ae}},__type__:{object:Te,string:ae}},hidden:{boolean:re},hoverWidth:{function:"function",number:U},label:{string:ae,undefined:"undefined"},labelHighlightBold:{boolean:re},length:{number:U,undefined:"undefined"},physics:{boolean:re},scaling:{min:{number:U},max:{number:U},label:{enabled:{boolean:re},min:{number:U},max:{number:U},maxVisible:{number:U},drawThreshold:{number:U},__type__:{object:Te,boolean:re}},customScalingFunction:{function:"function"},__type__:{object:Te}},selectionWidth:{function:"function",number:U},selfReferenceSize:{number:U},selfReference:{size:{number:U},angle:{number:U},renderBehindTheNode:{boolean:re},__type__:{object:Te}},shadow:{enabled:{boolean:re},color:{string:ae},size:{number:U},x:{number:U},y:{number:U},__type__:{object:Te,boolean:re}},smooth:{enabled:{boolean:re},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:U},forceDirection:{string:["horizontal","vertical","none"],boolean:re},__type__:{object:Te,boolean:re}},title:{string:ae,undefined:"undefined"},width:{number:U},widthConstraint:{maximum:{number:U},__type__:{object:Te,boolean:re,number:U}},value:{number:U,undefined:"undefined"},__type__:{object:Te}},groups:{useDefaultGroups:{boolean:re},__any__:Tj,__type__:{object:Te}},interaction:{dragNodes:{boolean:re},dragView:{boolean:re},hideEdgesOnDrag:{boolean:re},hideEdgesOnZoom:{boolean:re},hideNodesOnDrag:{boolean:re},hover:{boolean:re},keyboard:{enabled:{boolean:re},speed:{x:{number:U},y:{number:U},zoom:{number:U},__type__:{object:Te}},bindToWindow:{boolean:re},autoFocus:{boolean:re},__type__:{object:Te,boolean:re}},multiselect:{boolean:re},navigationButtons:{boolean:re},selectable:{boolean:re},selectConnectedEdges:{boolean:re},hoverConnectedEdges:{boolean:re},tooltipDelay:{number:U},zoomView:{boolean:re},zoomSpeed:{number:U},__type__:{object:Te}},layout:{randomSeed:{undefined:"undefined",number:U,string:ae},improvedLayout:{boolean:re},clusterThreshold:{number:U},hierarchical:{enabled:{boolean:re},levelSeparation:{number:U},nodeSpacing:{number:U},treeSpacing:{number:U},blockShifting:{boolean:re},edgeMinimization:{boolean:re},parentCentralization:{boolean:re},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:Te,boolean:re}},__type__:{object:Te}},manipulation:{enabled:{boolean:re},initiallyActive:{boolean:re},addNode:{boolean:re,function:"function"},addEdge:{boolean:re,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:Te,boolean:re,function:"function"}},deleteNode:{boolean:re,function:"function"},deleteEdge:{boolean:re,function:"function"},controlNodeStyle:Tj,__type__:{object:Te,boolean:re}},nodes:Tj,physics:{enabled:{boolean:re},barnesHut:{theta:{number:U},gravitationalConstant:{number:U},centralGravity:{number:U},springLength:{number:U},springConstant:{number:U},damping:{number:U},avoidOverlap:{number:U},__type__:{object:Te}},forceAtlas2Based:{theta:{number:U},gravitationalConstant:{number:U},centralGravity:{number:U},springLength:{number:U},springConstant:{number:U},damping:{number:U},avoidOverlap:{number:U},__type__:{object:Te}},repulsion:{centralGravity:{number:U},springLength:{number:U},springConstant:{number:U},nodeDistance:{number:U},damping:{number:U},__type__:{object:Te}},hierarchicalRepulsion:{centralGravity:{number:U},springLength:{number:U},springConstant:{number:U},nodeDistance:{number:U},damping:{number:U},avoidOverlap:{number:U},__type__:{object:Te}},maxVelocity:{number:U},minVelocity:{number:U},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:re},iterations:{number:U},updateInterval:{number:U},onlyDynamicEdges:{boolean:re},fit:{boolean:re},__type__:{object:Te,boolean:re}},timestep:{number:U},adaptiveTimestep:{boolean:re},wind:{x:{number:U},y:{number:U},__type__:{object:Te}},__type__:{object:Te,boolean:re}},autoResize:{boolean:re},clickToUse:{boolean:re},locale:{string:ae},locales:{__any__:{any:OFe},__type__:{object:Te}},height:{string:ae},width:{string:ae},__type__:{object:Te}},Kae={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},opacity:[0,0,1,.1],fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},endPointOffset:{from:[0,-10,10,1],to:[0,-10,10,1]},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0,autoFocus:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},PFe=(t,e,r)=>{var n;return!!(Ga(t).call(t,"physics")&&Ga(n=Kae.physics.solver).call(n,e)&&r.physics.solver!==e&&e!=="wind")};class IFe{constructor(){}getDistances(e,r,n){const i={},s=e.edges;for(let a=0;a<r.length;a++){const l=r[a],c={};i[l]=c;for(let d=0;d<r.length;d++)c[r[d]]=a==d?0:1e9}for(let a=0;a<n.length;a++){const l=s[n[a]];l.connected===!0&&i[l.fromId]!==void 0&&i[l.toId]!==void 0&&(i[l.fromId][l.toId]=1,i[l.toId][l.fromId]=1)}const o=r.length;for(let a=0;a<o;a++){const l=r[a],c=i[l];for(let d=0;d<o-1;d++){const h=r[d],f=i[h];for(let p=d+1;p<o;p++){const m=r[p],g=i[m],v=Math.min(f[m],f[l]+c[m]);f[m]=v,g[h]=v}}}return i}}class RFe{constructor(e,r,n){this.body=e,this.springLength=r,this.springConstant=n,this.distanceSolver=new IFe}setOptions(e){e&&(e.springLength&&(this.springLength=e.springLength),e.springConstant&&(this.springConstant=e.springConstant))}solve(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=this.distanceSolver.getDistances(this.body,e,r);this._createL_matrix(i),this._createK_matrix(i),this._createE_matrix();const s=.01,o=1;let a=0;const l=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),c=5;let d=1e9,h=0,f=0,p=0,m=0,g=0;for(;d>s&&a<l;)for(a+=1,[h,d,f,p]=this._getHighestEnergyNode(n),m=d,g=0;m>o&&g<c;)g+=1,this._moveNode(h,f,p),[m,f,p]=this._getEnergy(h)}_getHighestEnergyNode(e){const r=this.body.nodeIndices,n=this.body.nodes;let i=0,s=r[0],o=0,a=0;for(let l=0;l<r.length;l++){const c=r[l];if(n[c].predefinedPosition!==!0||n[c].isCluster===!0&&e===!0||n[c].options.fixed.x!==!0||n[c].options.fixed.y!==!0){const[d,h,f]=this._getEnergy(c);i<d&&(i=d,s=c,o=h,a=f)}}return[s,i,o,a]}_getEnergy(e){const[r,n]=this.E_sums[e];return[Math.sqrt(r**2+n**2),r,n]}_moveNode(e,r,n){const i=this.body.nodeIndices,s=this.body.nodes;let o=0,a=0,l=0;const c=s[e].x,d=s[e].y,h=this.K_matrix[e],f=this.L_matrix[e];for(let x=0;x<i.length;x++){const S=i[x];if(S!==e){const _=s[S].x,E=s[S].y,N=h[S],k=f[S],C=1/((c-_)**2+(d-E)**2)**1.5;o+=N*(1-k*(d-E)**2*C),a+=N*(k*(c-_)*(d-E)*C),l+=N*(1-k*(c-_)**2*C)}}const p=o,m=a,g=r,v=l,y=n,b=(g/p+y/m)/(m/p-v/m),w=-(m*b+g)/p;s[e].x+=w,s[e].y+=b,this._updateE_matrix(e)}_createL_matrix(e){const r=this.body.nodeIndices,n=this.springLength;this.L_matrix=[];for(let i=0;i<r.length;i++){this.L_matrix[r[i]]={};for(let s=0;s<r.length;s++)this.L_matrix[r[i]][r[s]]=n*e[r[i]][r[s]]}}_createK_matrix(e){const r=this.body.nodeIndices,n=this.springConstant;this.K_matrix=[];for(let i=0;i<r.length;i++){this.K_matrix[r[i]]={};for(let s=0;s<r.length;s++)this.K_matrix[r[i]][r[s]]=n*e[r[i]][r[s]]**-2}}_createE_matrix(){const e=this.body.nodeIndices,r=this.body.nodes;this.E_matrix={},this.E_sums={};for(let n=0;n<e.length;n++)this.E_matrix[e[n]]=[];for(let n=0;n<e.length;n++){const i=e[n],s=r[i].x,o=r[i].y;let a=0,l=0;for(let c=n;c<e.length;c++){const d=e[c];if(d!==i){const h=r[d].x,f=r[d].y,p=1/Math.sqrt((s-h)**2+(o-f)**2);this.E_matrix[i][c]=[this.K_matrix[i][d]*(s-h-this.L_matrix[i][d]*(s-h)*p),this.K_matrix[i][d]*(o-f-this.L_matrix[i][d]*(o-f)*p)],this.E_matrix[d][n]=this.E_matrix[i][c],a+=this.E_matrix[i][c][0],l+=this.E_matrix[i][c][1]}}this.E_sums[i]=[a,l]}}_updateE_matrix(e){const r=this.body.nodeIndices,n=this.body.nodes,i=this.E_matrix[e],s=this.K_matrix[e],o=this.L_matrix[e],a=n[e].x,l=n[e].y;let c=0,d=0;for(let h=0;h<r.length;h++){const f=r[h];if(f!==e){const p=i[h],m=p[0],g=p[1],v=n[f].x,y=n[f].y,b=1/Math.sqrt((a-v)**2+(l-y)**2),w=s[f]*(a-v-o[f]*(a-v)*b),x=s[f]*(l-y-o[f]*(l-y)*b);i[h]=[w,x],c+=w,d+=x;const S=this.E_sums[f];S[0]+=w-m,S[1]+=x-g}}this.E_sums[e]=[c,d]}}function _e(t,e,r){var n,i,s,o;if(!(this instanceof _e))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:nMe,clickToUse:!1},_r(this.options,this.defaultOptions),this.body={container:t,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:ne(n=this.on).call(n,this),off:ne(i=this.off).call(i,this),emit:ne(s=this.emit).call(s,this),once:ne(o=this.once).call(o,this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}},selectionBox:{show:!1,position:{start:{x:0,y:0},end:{x:0,y:0}}}},this.bindEventListeners(),this.images=new oMe(()=>this.body.emitter.emit("_requestRedraw")),this.groups=new wMe,this.canvas=new mDe(this.body),this.selectionHandler=new QDe(this.body,this.canvas),this.interactionHandler=new bDe(this.body,this.canvas,this.selectionHandler),this.view=new yDe(this.body,this.canvas),this.renderer=new uDe(this.body,this.canvas),this.physics=new rDe(this.body),this.layoutEngine=new kFe(this.body),this.clustering=new cDe(this.body),this.manipulation=new TFe(this.body,this.canvas,this.selectionHandler,this.interactionHandler),this.nodesHandler=new j$e(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new Q$e(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new RFe(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(r),this.setData(e)}_oe(_e.prototype);_e.prototype.setOptions=function(t){if(t===null&&(t=void 0),t!==void 0){if(MRe.validate(t,jFe)===!0&&console.error("%cErrors have been found in the supplied options object.",vae),Rh(["locale","locales","clickToUse"],this.options,t),t.locale!==void 0&&(t.locale=iMe(t.locales||this.options.locales,t.locale)),t=this.layoutEngine.setOptions(t.layout,t),this.canvas.setOptions(t),this.groups.setOptions(t.groups),this.nodesHandler.setOptions(t.nodes),this.edgesHandler.setOptions(t.edges),this.physics.setOptions(t.physics),this.manipulation.setOptions(t.manipulation,t,this.options),this.interactionHandler.setOptions(t.interaction),this.renderer.setOptions(t.interaction),this.selectionHandler.setOptions(t.interaction),t.groups!==void 0&&this.body.emitter.emit("refreshNodes"),"configure"in t&&(this.configurator||(this.configurator=new IRe(this,this.body.container,Kae,this.canvas.pixelRatio,PFe)),this.configurator.setOptions(t.configure)),this.configurator&&this.configurator.options.enabled===!0){const n={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};It(n.nodes,this.nodesHandler.options),It(n.edges,this.edgesHandler.options),It(n.layout,this.layoutEngine.options),It(n.interaction,this.selectionHandler.options),It(n.interaction,this.renderer.options),It(n.interaction,this.interactionHandler.options),It(n.manipulation,this.manipulation.options),It(n.physics,this.physics.options),It(n.global,this.canvas.options),It(n.global,this.options),this.configurator.setModuleOptions(n)}t.clickToUse!==void 0?t.clickToUse===!0?this.activator===void 0&&(this.activator=new PRe(this.canvas.frame),this.activator.on("change",()=>{this.body.emitter.emit("activate")})):(this.activator!==void 0&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}};_e.prototype._updateVisibleIndices=function(){const t=this.body.nodes,e=this.body.edges;this.body.nodeIndices=[],this.body.edgeIndices=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&!this.clustering._isClusteredNode(r)&&t[r].options.hidden===!1&&this.body.nodeIndices.push(t[r].id);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const n=e[r],i=t[n.fromId],s=t[n.toId],o=i!==void 0&&s!==void 0;!this.clustering._isClusteredEdge(r)&&n.options.hidden===!1&&o&&i.options.hidden===!1&&s.options.hidden===!1&&this.body.edgeIndices.push(n.id)}};_e.prototype.bindEventListeners=function(){this.body.emitter.on("_dataChanged",()=>{this.edgesHandler._updateState(),this.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",()=>{this.clustering._updateState(),this._updateVisibleIndices(),this._updateValueRange(this.body.nodes),this._updateValueRange(this.body.edges),this.body.emitter.emit("startSimulation"),this.body.emitter.emit("_requestRedraw")})};_e.prototype.setData=function(t){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),t&&t.dot&&(t.nodes||t.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(t&&t.options),t&&t.dot){console.warn("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");const e=URe(t.dot);this.setData(e);return}else if(t&&t.gephi){console.warn("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");const e=HRe(t.gephi);this.setData(e);return}else this.nodesHandler.setData(t&&t.nodes,!0),this.edgesHandler.setData(t&&t.edges,!0);this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")};_e.prototype.destroy=function(){this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images;for(const t in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,t)&&delete this.body.nodes[t];for(const t in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,t)&&delete this.body.edges[t];oa(this.body.container)};_e.prototype._updateValueRange=function(t){let e,r,n,i=0;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const s=t[e].getValue();s!==void 0&&(r=r===void 0?s:Math.min(s,r),n=n===void 0?s:Math.max(s,n),i+=s)}if(r!==void 0&&n!==void 0)for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&t[e].setValueRange(r,n,i)};_e.prototype.isActive=function(){return!this.activator||this.activator.active};_e.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)};_e.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)};_e.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)};_e.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)};_e.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)};_e.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)};_e.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)};_e.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)};_e.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)};_e.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)};_e.prototype.updateClusteredNode=function(){return this.clustering.updateClusteredNode.apply(this.clustering,arguments)};_e.prototype.getClusteredEdges=function(){return this.clustering.getClusteredEdges.apply(this.clustering,arguments)};_e.prototype.getBaseEdge=function(){return this.clustering.getBaseEdge.apply(this.clustering,arguments)};_e.prototype.getBaseEdges=function(){return this.clustering.getBaseEdges.apply(this.clustering,arguments)};_e.prototype.updateEdge=function(){return this.clustering.updateEdge.apply(this.clustering,arguments)};_e.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)};_e.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)};_e.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)};_e.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)};_e.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)};_e.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)};_e.prototype.editNodeMode=function(){return console.warn("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)};_e.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)};_e.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)};_e.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)};_e.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)};_e.prototype.getPosition=function(){return this.nodesHandler.getPosition.apply(this.nodesHandler,arguments)};_e.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)};_e.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)};_e.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)};_e.prototype.getConnectedNodes=function(t){return this.body.nodes[t]!==void 0?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)};_e.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)};_e.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)};_e.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)};_e.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)};_e.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)};_e.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)};_e.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodeIds.apply(this.selectionHandler,arguments)};_e.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdgeIds.apply(this.selectionHandler,arguments)};_e.prototype.getNodeAt=function(){const t=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return t!==void 0&&t.id!==void 0?t.id:t};_e.prototype.getEdgeAt=function(){const t=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return t!==void 0&&t.id!==void 0?t.id:t};_e.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)};_e.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)};_e.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.selectionHandler.commitWithoutEmitting.apply(this.selectionHandler),this.redraw()};_e.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)};_e.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)};_e.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)};_e.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)};_e.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)};_e.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)};_e.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)};_e.prototype.getOptionsFromConfigurator=function(){let t={};return this.configurator&&(t=this.configurator.getOptions.apply(this.configurator)),t};function MFe({graphData:t,startPersonId:e,onNodeClick:r}){const n=T.useRef(null),i=T.useRef(null),s=$n(),o=T.useCallback(d=>{r?r(d):s(`/people/${d}`)},[r,s]);T.useEffect(()=>{if(!n.current||!t||!t.nodes||t.nodes.length===0)return;const d=new Wd(t.nodes),h=new Wd(t.edges),f={layout:{hierarchical:{enabled:!0,direction:"UD",sortMethod:"directed",levelSeparation:180,nodeSpacing:200,treeSpacing:250,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0}},nodes:{shape:"box",margin:10,font:{size:14,face:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',color:"#1f2937"},color:{border:"#d1d5db",background:"#ffffff",highlight:{border:"#f59e0b",background:"#fef3c7"},hover:{border:"#9ca3af",background:"#f9fafb"}},borderWidth:2,borderWidthSelected:3,shadow:{enabled:!0,color:"rgba(0,0,0,0.1)",size:5,x:0,y:2}},edges:{color:{color:"#9ca3af",highlight:"#6b7280",hover:"#6b7280"},width:2,smooth:{enabled:!0,type:"cubicBezier",forceDirection:"vertical",roundness:.4},arrows:{to:{enabled:!1}}},physics:{enabled:!1},interaction:{hover:!0,tooltipDelay:200,zoomView:!0,dragView:!0,dragNodes:!1,navigationButtons:!1,keyboard:{enabled:!0,bindToWindow:!1}}},p=new _e(n.current,{nodes:d,edges:h},f);return i.current=p,p.on("click",m=>{if(m.nodes.length>0){const g=m.nodes[0];o(g)}}),p.on("doubleClick",m=>{m.nodes.length>0&&p.focus(m.nodes[0],{scale:1,animation:{duration:500,easingFunction:"easeInOutQuad"}})}),p.once("stabilized",()=>{const m=t.edges.filter(g=>g.dashes).map(g=>[g.from,g.to]);if(m.length>0){const g=p.getPositions(),v={},y=new Set;m.forEach(([b,w])=>{if(y.has(b)||y.has(w))return;const x=g[b],S=g[w];if(!x||!S)return;const _=(x.x+S.x)/2;v[b]={x:_-60,y:x.y},v[w]={x:_+60,y:S.y},y.add(b),y.add(w)}),Object.entries(v).forEach(([b,w])=>{p.moveNode(b,w.x,w.y)})}setTimeout(()=>{p.fit({animation:{duration:500,easingFunction:"easeInOutQuad"}})},50)}),setTimeout(()=>{e&&p&&p.focus(e,{scale:.8,animation:{duration:500,easingFunction:"easeInOutQuad"}})},100),()=>{p&&p.destroy()}},[t,e,o]);const a=()=>{if(i.current){const d=i.current.getScale();i.current.moveTo({scale:d*1.3,animation:{duration:300,easingFunction:"easeInOutQuad"}})}},l=()=>{if(i.current){const d=i.current.getScale();i.current.moveTo({scale:d/1.3,animation:{duration:300,easingFunction:"easeInOutQuad"}})}},c=()=>{i.current&&i.current.fit({animation:{duration:500,easingFunction:"easeInOutQuad"}})};return!t||!t.nodes||t.nodes.length===0?u.jsx("div",{className:"flex items-center justify-center h-96",children:u.jsx("p",{className:"text-gray-500",children:"No family tree data available"})}):u.jsxs("div",{className:"relative w-full h-full",children:[u.jsxs("div",{className:"absolute top-4 right-4 z-10 flex gap-2 bg-white rounded-lg shadow-lg p-2",children:[u.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded",title:"Zoom In",children:u.jsx(lpe,{className:"w-4 h-4"})}),u.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 rounded",title:"Zoom Out",children:u.jsx(cpe,{className:"w-4 h-4"})}),u.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 rounded",title:"Fit All",children:u.jsx(kte,{className:"w-4 h-4"})})]}),u.jsx("div",{className:"absolute bottom-4 left-4 z-10 text-xs text-gray-500 bg-white/80 px-2 py-1 rounded",children:"Click a person to view details  Double-click to center  Scroll to zoom"}),u.jsx("div",{ref:n,className:"w-full h-full min-h-[600px]",style:{background:"#fafafa"}})]})}const AFe=["parent","child","spouse","lover","partner"];function $Fe(t){return AFe.includes(t==null?void 0:t.toLowerCase())}function DFe(t){return(t==null?void 0:t.toLowerCase())==="parent"}function FFe(t){return(t==null?void 0:t.toLowerCase())==="child"}function qFe(t){const e=t==null?void 0:t.toLowerCase();return e==="spouse"||e==="lover"||e==="partner"}function LFe(t,e,r){var d;const n=new Map,i=[],s=new Set,o=new Map;e.forEach(h=>o.set(h.id,h));const a=[{personId:t,depth:0}];s.add(t);function l(h,f){var b,w,x,S;let p=h.name||((b=h.title)==null?void 0:b.rendered)||h.title||`Person ${f}`;if(p&&typeof p=="string"&&typeof document<"u"){const _=document.createElement("textarea");_.innerHTML=p,p=_.value}let m=null,g=((w=h.acf)==null?void 0:w.birth_date)||null;if(g){const _=new Date(g);isNaN(_.getTime())||(m=Math.floor((new Date-_)/(365.25*24*60*60*1e3)))}let v="";switch((x=h.acf)==null?void 0:x.gender){case"male":v="";break;case"female":v="";break;case"non_binary":case"other":case"prefer_not_to_say":v="";break}let y="";if(g)try{const _=new Date(g);if(!isNaN(_.getTime())){const E=String(_.getDate()).padStart(2,"0"),N=String(_.getMonth()+1).padStart(2,"0"),k=_.getFullYear();y=`${E}-${N}-${k}`}}catch{}return{id:f,name:p,gender:((S=h.acf)==null?void 0:S.gender)||"",genderSymbol:v,photo:h.thumbnail||null,age:m,birthDate:g,formattedBirthDate:y}}const c=o.get(t);for(c&&n.set(t,l(c,t));a.length>0;){const{personId:h,depth:f}=a.shift(),p=r.get(h)||[];for(const m of p){if(m.relationship_type_slug&&!$Fe(m.relationship_type_slug))continue;const g=m.related_person;if(!g||!o.has(g))continue;if(!n.has(g)){const w=o.get(g);n.set(g,l(w,g))}const v=`${h}-${g}`,y=`${g}-${h}`;if(!i.some(w=>`${w.from}-${w.to}`===v||`${w.from}-${w.to}`===y)){const w=(d=m.relationship_type_slug)==null?void 0:d.toLowerCase();if(DFe(w))i.push({from:g,to:h,type:"parent-child"});else if(FFe(w))i.push({from:h,to:g,type:"parent-child"});else if(qFe(w)){const[x,S]=h<g?[h,g]:[g,h];i.push({from:x,to:S,type:"spouse"})}}s.has(g)||(s.add(g),a.push({personId:g,depth:f+1}))}}return{nodes:Array.from(n.values()),edges:i}}function BFe(t,e,r={}){const{nodes:n,edges:i}=t;if(n.length===0)return{nodes:[],edges:[]};const s=new Map,o=new Map,a=new Map;n.forEach(v=>{s.set(v.id,[]),o.set(v.id,[]),a.set(v.id,[])}),i.forEach(v=>{var y,b,w,x;v.type==="parent-child"?((y=s.get(v.to))==null||y.push(v.from),(b=o.get(v.from))==null||b.push(v.to)):v.type==="spouse"&&((w=a.get(v.from))==null||w.push(v.to),(x=a.get(v.to))==null||x.push(v.from))});const l=new Map,c=new Set,d=[{id:e,generation:0}];for(l.set(e,0),c.add(e);d.length>0;){const{id:v,generation:y}=d.shift(),b=s.get(v)||[];for(const S of b)c.has(S)||(c.add(S),l.set(S,y-1),d.push({id:S,generation:y-1}));const w=o.get(v)||[];for(const S of w)c.has(S)||(c.add(S),l.set(S,y+1),d.push({id:S,generation:y+1}));const x=a.get(v)||[];for(const S of x)c.has(S)||(c.add(S),l.set(S,y),d.push({id:S,generation:y}))}n.forEach(v=>{l.has(v.id)||l.set(v.id,0)});const h=Math.min(...l.values()),f=new Map;l.forEach((v,y)=>{f.set(y,v-h)});function p(v,y,b=!1){const w=v?v.split(" ").map(E=>E[0]).join("").toUpperCase().slice(0,2):"?";let x,S;b?(x="%23d1d5db",S="%236b7280"):y?(x="%23fef3c7",S="%23b45309"):(x="%23e5e7eb",S="%23374151");const _=`<svg xmlns="http://www.w3.org/2000/svg" width="90" height="90" viewBox="0 0 90 90">
      <circle cx="45" cy="45" r="45" fill="${x}"/>
      <text x="45" y="55" text-anchor="middle" font-family="system-ui, sans-serif" font-size="28" font-weight="500" fill="${S}">${w}</text>
    </svg>`;return"data:image/svg+xml,"+encodeURIComponent(_)}const m=n.map(v=>{const y=f.get(v.id)||0,b=v.id===e,w=r[v.id]||!1;let x=v.name;w&&(x=v.name+" ");let S=[x],_="";v.genderSymbol&&(_+=v.genderSymbol+" "),v.age!==null&&(_+=v.age+" "),v.formattedBirthDate&&(_+=v.formattedBirthDate),_.trim()&&S.push(_.trim());const E=v.photo||p(v.name,b,w);let N="#d1d5db";return b?N="#f59e0b":w&&(N="#9ca3af"),{id:v.id,label:S.join(`
`),level:y,shape:"circularImage",image:E,size:45,font:{size:14,face:"system-ui, -apple-system, sans-serif",vadjust:8,color:w?"#6b7280":"#1f2937"},color:{border:N,background:"#ffffff",highlight:{border:"#f59e0b",background:"#fef3c7"}},borderWidth:b?3:2,data:{...v,isDeceased:w}}}),g=i.map((v,y)=>{const b=v.type==="spouse";return{id:`edge-${y}`,from:v.from,to:v.to,arrows:{to:{enabled:!1}},color:{color:b?"#ec4899":"#9ca3af",highlight:b?"#db2777":"#6b7280"},width:2,dashes:b?[5,5]:!1,smooth:!1,length:b?50:300}});return{nodes:m,edges:g}}function zFe(t){const e=new Map;return t.forEach(r=>{var s;const i=(((s=r.acf)==null?void 0:s.relationships)||[]).map(o=>{var c,d,h,f,p,m;let a="";o.relationship_slug?a=o.relationship_slug.toLowerCase():typeof o.relationship_type=="object"?a=((c=o.relationship_type)==null?void 0:c.slug)||((h=(d=o.relationship_type)==null?void 0:d.name)==null?void 0:h.toLowerCase())||"":typeof o.relationship_type=="string"&&(a=o.relationship_type.toLowerCase());let l=null;return typeof o.related_person=="object"?l=((f=o.related_person)==null?void 0:f.ID)||((p=o.related_person)==null?void 0:p.id)||((m=o.related_person)==null?void 0:m.term_id):(typeof o.related_person=="number"||typeof o.related_person=="string")&&(l=parseInt(o.related_person,10)),{related_person:l,relationship_type:o.relationship_type,relationship_type_slug:a,relationship_name:o.relationship_name||"",relationship_label:o.relationship_label||""}}).filter(o=>o.related_person);e.set(r.id,i)}),e}function VFe(t,e){const r=new Map;e.forEach(n=>{var i;r.set(n.id,n.slug||((i=n.name)==null?void 0:i.toLowerCase()))}),t.forEach(n=>{n.forEach(i=>{if(!i.relationship_type_slug&&i.relationship_type){const s=typeof i.relationship_type=="object"?i.relationship_type.term_id||i.relationship_type.id:i.relationship_type;i.relationship_type_slug=r.get(s)||""}})})}function UFe(){var p,m;const{id:t}=Do(),e=$n(),r=parseInt(t,10),{data:n,isLoading:i}=sh(t),{data:s=[],isLoading:o}=Vc(),{data:a=[]}=ft({queryKey:["relationship-types"],queryFn:async()=>(await He.getRelationshipTypes()).data}),l=T.useMemo(()=>s.map(g=>g.id).filter(Boolean),[s]),c=GP({queries:l.map(g=>({queryKey:["person-dates",g],queryFn:async()=>(await Le.getPersonDates(g)).data,enabled:!!g,staleTime:5*60*1e3}))}),d=T.useMemo(()=>{const g={};return c.forEach((v,y)=>{if(v.data&&l[y]){const b=l[y],w=v.data.some(x=>{const S=Array.isArray(x.date_type)?x.date_type[0]:x.date_type;return(S==null?void 0:S.toLowerCase())==="died"});g[b]=w}}),g},[c,l]);Hi(n?`Family Tree - ${n.name||((p=n.title)==null?void 0:p.rendered)||n.title||"Person"}`:"Family Tree");const h=T.useMemo(()=>{if(!n||!s.length)return null;try{const g=zFe(s);a.length>0&&VFe(g,a);const v=LFe(r,s,g);return!v||v.nodes.length===0?null:BFe(v,r,d)}catch(g){return console.error("Error building family tree:",g),null}},[n,s,a,r,d]),f=g=>{e(`/people/${g}`)};return i||o?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):n?u.jsxs("div",{className:"max-w-full mx-auto space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs(ge,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(ps,{className:"w-4 h-4 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"Back to Person"})]}),u.jsxs("h1",{className:"text-2xl font-bold",children:["Family Tree: ",n.name||((m=n.title)==null?void 0:m.rendered)||n.title||`Person ${t}`]})]})}),u.jsx("div",{className:"card p-6",children:u.jsx("div",{className:"w-full",style:{height:"800px"},children:h&&h.nodes&&h.nodes.length>0?u.jsx(MFe,{graphData:h,startPersonId:r,onNodeClick:f}):u.jsx("div",{className:"flex items-center justify-center h-full",children:u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-gray-500 mb-2",children:"No family relationships found."}),u.jsx("p",{className:"text-sm text-gray-400",children:"Add parent or child relationships to see the family tree."})]})})})})]}):u.jsxs("div",{className:"card p-6 text-center",children:[u.jsx("p",{className:"text-red-600 mb-4",children:"Failed to load person."}),u.jsx(ge,{to:"/people",className:"btn-secondary",children:"Back to People"})]})}function HFe(){const{loginUrl:t,isLoggedIn:e}=lM();return Mte(),T.useEffect(()=>{e||(window.location.href=t)},[e,t]),u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Redirecting to login..."})]})})}function WFe({children:t}){const{data:e,isLoading:r,error:n}=ft({queryKey:["current-user"],queryFn:async()=>(await Le.getCurrentUser()).data,retry:!1});return r?u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):n||!e?u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:u.jsx("div",{className:"max-w-md w-full mx-4",children:u.jsxs("div",{className:"card p-8 text-center",children:[u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:u.jsx(Po,{className:"w-8 h-8 text-yellow-600"})})}),u.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Account Pending Approval"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Your account is pending approval by an administrator. You will receive an email notification once your account has been approved."}),u.jsx("p",{className:"text-sm text-gray-500",children:"If you have any questions, please contact your administrator."})]})})}):e!=null&&e.is_admin||e.is_approved?t:u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:u.jsx("div",{className:"max-w-md w-full mx-4",children:u.jsxs("div",{className:"card p-8 text-center",children:[u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:u.jsx(Po,{className:"w-8 h-8 text-yellow-600"})})}),u.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Account Pending Approval"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Your account is pending approval by an administrator. You will receive an email notification once your account has been approved."}),u.jsx("p",{className:"text-sm text-gray-500",children:"If you have any questions, please contact your administrator."})]})})})}function KFe({children:t}){const{isLoggedIn:e,isLoading:r}=lM();return r?u.jsx("div",{className:"flex items-center justify-center min-h-screen",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e?u.jsx(WFe,{children:t}):u.jsx(Mee,{to:"/login",replace:!0})}function GFe(){return u.jsxs(ZD,{children:[u.jsx(kt,{path:"/login",element:u.jsx(HFe,{})}),u.jsx(kt,{path:"/*",element:u.jsx(KFe,{children:u.jsx(Ppe,{children:u.jsxs(ZD,{children:[u.jsx(kt,{path:"/",element:u.jsx(kSe,{})}),u.jsx(kt,{path:"/people",element:u.jsx(OSe,{})}),u.jsx(kt,{path:"/people/new",element:u.jsx(Eq,{})}),u.jsx(kt,{path:"/people/:personId/address/new",element:u.jsx(kq,{})}),u.jsx(kt,{path:"/people/:personId/address/:index/edit",element:u.jsx(kq,{})}),u.jsx(kt,{path:"/people/:personId/work-history/new",element:u.jsx(Nq,{})}),u.jsx(kt,{path:"/people/:personId/work-history/:index/edit",element:u.jsx(Nq,{})}),u.jsx(kt,{path:"/people/:personId/relationship/new",element:u.jsx(Cq,{})}),u.jsx(kt,{path:"/people/:personId/relationship/:index/edit",element:u.jsx(Cq,{})}),u.jsx(kt,{path:"/people/:id/family-tree",element:u.jsx(UFe,{})}),u.jsx(kt,{path:"/people/:id/edit",element:u.jsx(Eq,{})}),u.jsx(kt,{path:"/people/:id",element:u.jsx(b_e,{})}),u.jsx(kt,{path:"/companies",element:u.jsx(__e,{})}),u.jsx(kt,{path:"/companies/new",element:u.jsx(Tq,{})}),u.jsx(kt,{path:"/companies/:id",element:u.jsx(E_e,{})}),u.jsx(kt,{path:"/companies/:id/edit",element:u.jsx(Tq,{})}),u.jsx(kt,{path:"/dates",element:u.jsx(k_e,{})}),u.jsx(kt,{path:"/dates/new",element:u.jsx(Oq,{})}),u.jsx(kt,{path:"/dates/:id/edit",element:u.jsx(Oq,{})}),u.jsx(kt,{path:"/todos",element:u.jsx(O_e,{})}),u.jsx(kt,{path:"/settings",element:u.jsx(A_e,{})}),u.jsx(kt,{path:"/settings/relationship-types",element:u.jsx(B_e,{})}),u.jsx(kt,{path:"/settings/user-approval",element:u.jsx(z_e,{})}),u.jsx(kt,{path:"*",element:u.jsx(Mee,{to:"/",replace:!0})})]})})})})]})}const YFe=new ehe({defaultOptions:{queries:{staleTime:5*60*1e3,retry:1}}}),Oj=document.getElementById("root");if(!Oj)console.error('Root element not found! Make sure there is a <div id="root"></div> in your HTML.');else try{jj.createRoot(Oj).render(u.jsx(Se.StrictMode,{children:u.jsx(the,{client:YFe,children:u.jsx(_de,{children:u.jsx(GFe,{})})})}))}catch(t){console.error("Error mounting React app:",t),Oj.innerHTML='<div style="padding: 20px; color: red;"><h1>Error Loading Application</h1><p>Please check the browser console for details.</p></div>'}
