var r4=t=>{throw TypeError(t)};var T1=(t,e,r)=>e.has(t)||r4("Cannot "+r);var R=(t,e,r)=>(T1(t,e,"read from private field"),r?r.call(t):e.get(t)),Ne=(t,e,r)=>e.has(t)?r4("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),he=(t,e,r,n)=>(T1(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Fe=(t,e,r)=>(T1(t,e,"access private method"),r);var Ig=(t,e,r,n)=>({set _(i){he(t,e,i,r)},get _(){return R(t,e,n)}});function Cue(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}function Sh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var MZ={exports:{}},B0={},AZ={exports:{}},it={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Em=Symbol.for("react.element"),kue=Symbol.for("react.portal"),jue=Symbol.for("react.fragment"),Tue=Symbol.for("react.strict_mode"),Oue=Symbol.for("react.profiler"),Pue=Symbol.for("react.provider"),Iue=Symbol.for("react.context"),Rue=Symbol.for("react.forward_ref"),Mue=Symbol.for("react.suspense"),Aue=Symbol.for("react.memo"),Due=Symbol.for("react.lazy"),n4=Symbol.iterator;function $ue(t){return t===null||typeof t!="object"?null:(t=n4&&t[n4]||t["@@iterator"],typeof t=="function"?t:null)}var DZ={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$Z=Object.assign,FZ={};function Eh(t,e,r){this.props=t,this.context=e,this.refs=FZ,this.updater=r||DZ}Eh.prototype.isReactComponent={};Eh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Eh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function qZ(){}qZ.prototype=Eh.prototype;function eM(t,e,r){this.props=t,this.context=e,this.refs=FZ,this.updater=r||DZ}var tM=eM.prototype=new qZ;tM.constructor=eM;$Z(tM,Eh.prototype);tM.isPureReactComponent=!0;var i4=Array.isArray,LZ=Object.prototype.hasOwnProperty,rM={current:null},BZ={key:!0,ref:!0,__self:!0,__source:!0};function zZ(t,e,r){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)LZ.call(e,n)&&!BZ.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:Em,type:t,key:s,ref:o,props:i,_owner:rM.current}}function Fue(t,e){return{$$typeof:Em,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function nM(t){return typeof t=="object"&&t!==null&&t.$$typeof===Em}function que(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var s4=/\/+/g;function O1(t,e){return typeof t=="object"&&t!==null&&t.key!=null?que(""+t.key):e.toString(36)}function Ey(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Em:case kue:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+O1(o,0):n,i4(i)?(r="",t!=null&&(r=t.replace(s4,"$&/")+"/"),Ey(i,e,r,"",function(u){return u})):i!=null&&(nM(i)&&(i=Fue(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(s4,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",i4(t))for(var a=0;a<t.length;a++){s=t[a];var l=n+O1(s,a);o+=Ey(s,e,r,l,i)}else if(l=$ue(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=n+O1(s,a++),o+=Ey(s,e,r,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Rg(t,e,r){if(t==null)return t;var n=[],i=0;return Ey(t,n,"","",function(s){return e.call(r,s,i++)}),n}function Lue(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Wn={current:null},_y={transition:null},Bue={ReactCurrentDispatcher:Wn,ReactCurrentBatchConfig:_y,ReactCurrentOwner:rM};function WZ(){throw Error("act(...) is not supported in production builds of React.")}it.Children={map:Rg,forEach:function(t,e,r){Rg(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Rg(t,function(){e++}),e},toArray:function(t){return Rg(t,function(e){return e})||[]},only:function(t){if(!nM(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};it.Component=Eh;it.Fragment=jue;it.Profiler=Oue;it.PureComponent=eM;it.StrictMode=Tue;it.Suspense=Mue;it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bue;it.act=WZ;it.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=$Z({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=rM.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)LZ.call(e,l)&&!BZ.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:Em,type:t.type,key:i,ref:s,props:n,_owner:o}};it.createContext=function(t){return t={$$typeof:Iue,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Pue,_context:t},t.Consumer=t};it.createElement=zZ;it.createFactory=function(t){var e=zZ.bind(null,t);return e.type=t,e};it.createRef=function(){return{current:null}};it.forwardRef=function(t){return{$$typeof:Rue,render:t}};it.isValidElement=nM;it.lazy=function(t){return{$$typeof:Due,_payload:{_status:-1,_result:t},_init:Lue}};it.memo=function(t,e){return{$$typeof:Aue,type:t,compare:e===void 0?null:e}};it.startTransition=function(t){var e=_y.transition;_y.transition={};try{t()}finally{_y.transition=e}};it.unstable_act=WZ;it.useCallback=function(t,e){return Wn.current.useCallback(t,e)};it.useContext=function(t){return Wn.current.useContext(t)};it.useDebugValue=function(){};it.useDeferredValue=function(t){return Wn.current.useDeferredValue(t)};it.useEffect=function(t,e){return Wn.current.useEffect(t,e)};it.useId=function(){return Wn.current.useId()};it.useImperativeHandle=function(t,e,r){return Wn.current.useImperativeHandle(t,e,r)};it.useInsertionEffect=function(t,e){return Wn.current.useInsertionEffect(t,e)};it.useLayoutEffect=function(t,e){return Wn.current.useLayoutEffect(t,e)};it.useMemo=function(t,e){return Wn.current.useMemo(t,e)};it.useReducer=function(t,e,r){return Wn.current.useReducer(t,e,r)};it.useRef=function(t){return Wn.current.useRef(t)};it.useState=function(t){return Wn.current.useState(t)};it.useSyncExternalStore=function(t,e,r){return Wn.current.useSyncExternalStore(t,e,r)};it.useTransition=function(){return Wn.current.useTransition()};it.version="18.3.1";AZ.exports=it;var C=AZ.exports;const ie=Sh(C),zue=Cue({__proto__:null,default:ie},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wue=C,Vue=Symbol.for("react.element"),Uue=Symbol.for("react.fragment"),Hue=Object.prototype.hasOwnProperty,Kue=Wue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Gue={key:!0,ref:!0,__self:!0,__source:!0};function VZ(t,e,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Hue.call(e,n)&&!Gue.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:Vue,type:t,key:s,ref:o,props:i,_owner:Kue.current}}B0.Fragment=Uue;B0.jsx=VZ;B0.jsxs=VZ;MZ.exports=B0;var c=MZ.exports,EP={},UZ={exports:{}},Ni={},HZ={exports:{}},KZ={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,B){var X=M.length;M.push(B);e:for(;0<X;){var Q=X-1>>>1,le=M[Q];if(0<i(le,B))M[Q]=B,M[X]=le,X=Q;else break e}}function r(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var B=M[0],X=M.pop();if(X!==B){M[0]=X;e:for(var Q=0,le=M.length,G=le>>>1;Q<G;){var se=2*(Q+1)-1,ke=M[se],be=se+1,$e=M[be];if(0>i(ke,X))be<le&&0>i($e,ke)?(M[Q]=$e,M[be]=X,Q=be):(M[Q]=ke,M[se]=X,Q=se);else if(be<le&&0>i($e,X))M[Q]=$e,M[be]=X,Q=be;else break e}}return B}function i(M,B){var X=M.sortIndex-B.sortIndex;return X!==0?X:M.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(M){for(var B=r(u);B!==null;){if(B.callback===null)n(u);else if(B.startTime<=M)n(u),B.sortIndex=B.expirationTime,e(l,B);else break;B=r(u)}}function x(M){if(g=!1,w(M),!m)if(r(l)!==null)m=!0,$(S);else{var B=r(u);B!==null&&q(x,B.startTime-M)}}function S(M,B){m=!1,g&&(g=!1,v(_),_=-1),p=!0;var X=f;try{for(w(B),h=r(l);h!==null&&(!(h.expirationTime>B)||M&&!T());){var Q=h.callback;if(typeof Q=="function"){h.callback=null,f=h.priorityLevel;var le=Q(h.expirationTime<=B);B=t.unstable_now(),typeof le=="function"?h.callback=le:h===r(l)&&n(l),w(B)}else n(l);h=r(l)}if(h!==null)var G=!0;else{var se=r(u);se!==null&&q(x,se.startTime-B),G=!1}return G}finally{h=null,f=X,p=!1}}var E=!1,N=null,_=-1,k=5,j=-1;function T(){return!(t.unstable_now()-j<k)}function P(){if(N!==null){var M=t.unstable_now();j=M;var B=!0;try{B=N(!0,M)}finally{B?O():(E=!1,N=null)}}else E=!1}var O;if(typeof b=="function")O=function(){b(P)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,F=D.port2;D.port1.onmessage=P,O=function(){F.postMessage(null)}}else O=function(){y(P,0)};function $(M){N=M,E||(E=!0,O())}function q(M,B){_=y(function(){M(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,$(S))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(M){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var X=f;f=B;try{return M()}finally{f=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,B){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var X=f;f=M;try{return B()}finally{f=X}},t.unstable_scheduleCallback=function(M,B,X){var Q=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Q+X:Q):X=Q,M){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=X+le,M={id:d++,callback:B,priorityLevel:M,startTime:X,expirationTime:le,sortIndex:-1},X>Q?(M.sortIndex=X,e(u,M),r(l)===null&&M===r(u)&&(g?(v(_),_=-1):g=!0,q(x,X-Q))):(M.sortIndex=le,e(l,M),m||p||(m=!0,$(S))),M},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(M){var B=f;return function(){var X=f;f=B;try{return M.apply(this,arguments)}finally{f=X}}}})(KZ);HZ.exports=KZ;var Yue=HZ.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Que=C,_i=Yue;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var GZ=new Set,Sp={};function su(t,e){Gd(t,e),Gd(t+"Capture",e)}function Gd(t,e){for(Sp[t]=e,t=0;t<e.length;t++)GZ.add(e[t])}var Vo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_P=Object.prototype.hasOwnProperty,Xue=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,o4={},a4={};function Jue(t){return _P.call(a4,t)?!0:_P.call(o4,t)?!1:Xue.test(t)?a4[t]=!0:(o4[t]=!0,!1)}function Zue(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ede(t,e,r,n){if(e===null||typeof e>"u"||Zue(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Vn(t,e,r,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var dn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){dn[t]=new Vn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];dn[e]=new Vn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){dn[t]=new Vn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){dn[t]=new Vn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){dn[t]=new Vn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){dn[t]=new Vn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){dn[t]=new Vn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){dn[t]=new Vn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){dn[t]=new Vn(t,5,!1,t.toLowerCase(),null,!1,!1)});var iM=/[\-:]([a-z])/g;function sM(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(iM,sM);dn[e]=new Vn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(iM,sM);dn[e]=new Vn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(iM,sM);dn[e]=new Vn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){dn[t]=new Vn(t,1,!1,t.toLowerCase(),null,!1,!1)});dn.xlinkHref=new Vn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){dn[t]=new Vn(t,1,!1,t.toLowerCase(),null,!0,!0)});function oM(t,e,r,n){var i=dn.hasOwnProperty(e)?dn[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ede(e,r,i,n)&&(r=null),n||i===null?Jue(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Xo=Que.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mg=Symbol.for("react.element"),Xu=Symbol.for("react.portal"),Ju=Symbol.for("react.fragment"),aM=Symbol.for("react.strict_mode"),NP=Symbol.for("react.profiler"),YZ=Symbol.for("react.provider"),QZ=Symbol.for("react.context"),lM=Symbol.for("react.forward_ref"),CP=Symbol.for("react.suspense"),kP=Symbol.for("react.suspense_list"),cM=Symbol.for("react.memo"),ya=Symbol.for("react.lazy"),XZ=Symbol.for("react.offscreen"),l4=Symbol.iterator;function pf(t){return t===null||typeof t!="object"?null:(t=l4&&t[l4]||t["@@iterator"],typeof t=="function"?t:null)}var Qt=Object.assign,P1;function Df(t){if(P1===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);P1=e&&e[1]||""}return`
`+P1+t}var I1=!1;function R1(t,e){if(!t||I1)return"";I1=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{I1=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Df(t):""}function tde(t){switch(t.tag){case 5:return Df(t.type);case 16:return Df("Lazy");case 13:return Df("Suspense");case 19:return Df("SuspenseList");case 0:case 2:case 15:return t=R1(t.type,!1),t;case 11:return t=R1(t.type.render,!1),t;case 1:return t=R1(t.type,!0),t;default:return""}}function jP(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ju:return"Fragment";case Xu:return"Portal";case NP:return"Profiler";case aM:return"StrictMode";case CP:return"Suspense";case kP:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case QZ:return(t.displayName||"Context")+".Consumer";case YZ:return(t._context.displayName||"Context")+".Provider";case lM:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case cM:return e=t.displayName||null,e!==null?e:jP(t.type)||"Memo";case ya:e=t._payload,t=t._init;try{return jP(t(e))}catch{}}return null}function rde(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jP(e);case 8:return e===aM?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function pl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function JZ(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function nde(t){var e=JZ(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ag(t){t._valueTracker||(t._valueTracker=nde(t))}function ZZ(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=JZ(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Jy(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function TP(t,e){var r=e.checked;return Qt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function c4(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=pl(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function eee(t,e){e=e.checked,e!=null&&oM(t,"checked",e,!1)}function OP(t,e){eee(t,e);var r=pl(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?PP(t,e.type,r):e.hasOwnProperty("defaultValue")&&PP(t,e.type,pl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function u4(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function PP(t,e,r){(e!=="number"||Jy(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var $f=Array.isArray;function yd(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+pl(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function IP(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return Qt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function d4(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ae(92));if($f(r)){if(1<r.length)throw Error(ae(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:pl(r)}}function tee(t,e){var r=pl(e.value),n=pl(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function h4(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ree(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function RP(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ree(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Dg,nee=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Dg=Dg||document.createElement("div"),Dg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Dg.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ep(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Gf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ide=["Webkit","ms","Moz","O"];Object.keys(Gf).forEach(function(t){ide.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gf[e]=Gf[t]})});function iee(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Gf.hasOwnProperty(t)&&Gf[t]?(""+e).trim():e+"px"}function see(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=iee(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var sde=Qt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function MP(t,e){if(e){if(sde[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function AP(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var DP=null;function uM(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $P=null,vd=null,bd=null;function f4(t){if(t=Cm(t)){if(typeof $P!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=H0(e),$P(t.stateNode,t.type,e))}}function oee(t){vd?bd?bd.push(t):bd=[t]:vd=t}function aee(){if(vd){var t=vd,e=bd;if(bd=vd=null,f4(t),e)for(t=0;t<e.length;t++)f4(e[t])}}function lee(t,e){return t(e)}function cee(){}var M1=!1;function uee(t,e,r){if(M1)return t(e,r);M1=!0;try{return lee(t,e,r)}finally{M1=!1,(vd!==null||bd!==null)&&(cee(),aee())}}function _p(t,e){var r=t.stateNode;if(r===null)return null;var n=H0(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ae(231,e,typeof r));return r}var FP=!1;if(Vo)try{var mf={};Object.defineProperty(mf,"passive",{get:function(){FP=!0}}),window.addEventListener("test",mf,mf),window.removeEventListener("test",mf,mf)}catch{FP=!1}function ode(t,e,r,n,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var Yf=!1,Zy=null,ev=!1,qP=null,ade={onError:function(t){Yf=!0,Zy=t}};function lde(t,e,r,n,i,s,o,a,l){Yf=!1,Zy=null,ode.apply(ade,arguments)}function cde(t,e,r,n,i,s,o,a,l){if(lde.apply(this,arguments),Yf){if(Yf){var u=Zy;Yf=!1,Zy=null}else throw Error(ae(198));ev||(ev=!0,qP=u)}}function ou(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function dee(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function p4(t){if(ou(t)!==t)throw Error(ae(188))}function ude(t){var e=t.alternate;if(!e){if(e=ou(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return p4(i),t;if(s===n)return p4(i),e;s=s.sibling}throw Error(ae(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(ae(189))}}if(r.alternate!==n)throw Error(ae(190))}if(r.tag!==3)throw Error(ae(188));return r.stateNode.current===r?t:e}function hee(t){return t=ude(t),t!==null?fee(t):null}function fee(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=fee(t);if(e!==null)return e;t=t.sibling}return null}var pee=_i.unstable_scheduleCallback,m4=_i.unstable_cancelCallback,dde=_i.unstable_shouldYield,hde=_i.unstable_requestPaint,hr=_i.unstable_now,fde=_i.unstable_getCurrentPriorityLevel,dM=_i.unstable_ImmediatePriority,mee=_i.unstable_UserBlockingPriority,tv=_i.unstable_NormalPriority,pde=_i.unstable_LowPriority,gee=_i.unstable_IdlePriority,z0=null,Ks=null;function mde(t){if(Ks&&typeof Ks.onCommitFiberRoot=="function")try{Ks.onCommitFiberRoot(z0,t,void 0,(t.current.flags&128)===128)}catch{}}var bs=Math.clz32?Math.clz32:vde,gde=Math.log,yde=Math.LN2;function vde(t){return t>>>=0,t===0?32:31-(gde(t)/yde|0)|0}var $g=64,Fg=4194304;function Ff(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function rv(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=Ff(a):(s&=o,s!==0&&(n=Ff(s)))}else o=r&~i,o!==0?n=Ff(o):s!==0&&(n=Ff(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-bs(e),i=1<<r,n|=t[r],e&=~i;return n}function bde(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xde(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-bs(s),a=1<<o,l=i[o];l===-1?(!(a&r)||a&n)&&(i[o]=bde(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function LP(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function yee(){var t=$g;return $g<<=1,!($g&4194240)&&($g=64),t}function A1(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function _m(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-bs(e),t[e]=r}function wde(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-bs(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function hM(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-bs(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var St=0;function vee(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bee,fM,xee,wee,See,BP=!1,qg=[],Ka=null,Ga=null,Ya=null,Np=new Map,Cp=new Map,Na=[],Sde="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function g4(t,e){switch(t){case"focusin":case"focusout":Ka=null;break;case"dragenter":case"dragleave":Ga=null;break;case"mouseover":case"mouseout":Ya=null;break;case"pointerover":case"pointerout":Np.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cp.delete(e.pointerId)}}function gf(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Cm(e),e!==null&&fM(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Ede(t,e,r,n,i){switch(e){case"focusin":return Ka=gf(Ka,t,e,r,n,i),!0;case"dragenter":return Ga=gf(Ga,t,e,r,n,i),!0;case"mouseover":return Ya=gf(Ya,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Np.set(s,gf(Np.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Cp.set(s,gf(Cp.get(s)||null,t,e,r,n,i)),!0}return!1}function Eee(t){var e=Yl(t.target);if(e!==null){var r=ou(e);if(r!==null){if(e=r.tag,e===13){if(e=dee(r),e!==null){t.blockedOn=e,See(t.priority,function(){xee(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ny(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=zP(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);DP=n,r.target.dispatchEvent(n),DP=null}else return e=Cm(r),e!==null&&fM(e),t.blockedOn=r,!1;e.shift()}return!0}function y4(t,e,r){Ny(t)&&r.delete(e)}function _de(){BP=!1,Ka!==null&&Ny(Ka)&&(Ka=null),Ga!==null&&Ny(Ga)&&(Ga=null),Ya!==null&&Ny(Ya)&&(Ya=null),Np.forEach(y4),Cp.forEach(y4)}function yf(t,e){t.blockedOn===e&&(t.blockedOn=null,BP||(BP=!0,_i.unstable_scheduleCallback(_i.unstable_NormalPriority,_de)))}function kp(t){function e(i){return yf(i,t)}if(0<qg.length){yf(qg[0],t);for(var r=1;r<qg.length;r++){var n=qg[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Ka!==null&&yf(Ka,t),Ga!==null&&yf(Ga,t),Ya!==null&&yf(Ya,t),Np.forEach(e),Cp.forEach(e),r=0;r<Na.length;r++)n=Na[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Na.length&&(r=Na[0],r.blockedOn===null);)Eee(r),r.blockedOn===null&&Na.shift()}var xd=Xo.ReactCurrentBatchConfig,nv=!0;function Nde(t,e,r,n){var i=St,s=xd.transition;xd.transition=null;try{St=1,pM(t,e,r,n)}finally{St=i,xd.transition=s}}function Cde(t,e,r,n){var i=St,s=xd.transition;xd.transition=null;try{St=4,pM(t,e,r,n)}finally{St=i,xd.transition=s}}function pM(t,e,r,n){if(nv){var i=zP(t,e,r,n);if(i===null)U1(t,e,n,iv,r),g4(t,n);else if(Ede(i,t,e,r,n))n.stopPropagation();else if(g4(t,n),e&4&&-1<Sde.indexOf(t)){for(;i!==null;){var s=Cm(i);if(s!==null&&bee(s),s=zP(t,e,r,n),s===null&&U1(t,e,n,iv,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else U1(t,e,n,null,r)}}var iv=null;function zP(t,e,r,n){if(iv=null,t=uM(n),t=Yl(t),t!==null)if(e=ou(t),e===null)t=null;else if(r=e.tag,r===13){if(t=dee(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return iv=t,null}function _ee(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fde()){case dM:return 1;case mee:return 4;case tv:case pde:return 16;case gee:return 536870912;default:return 16}default:return 16}}var La=null,mM=null,Cy=null;function Nee(){if(Cy)return Cy;var t,e=mM,r=e.length,n,i="value"in La?La.value:La.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[s-n];n++);return Cy=i.slice(t,1<n?1-n:void 0)}function ky(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Lg(){return!0}function v4(){return!1}function Ci(t){function e(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Lg:v4,this.isPropagationStopped=v4,this}return Qt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Lg)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Lg)},persist:function(){},isPersistent:Lg}),e}var _h={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gM=Ci(_h),Nm=Qt({},_h,{view:0,detail:0}),kde=Ci(Nm),D1,$1,vf,W0=Qt({},Nm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yM,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==vf&&(vf&&t.type==="mousemove"?(D1=t.screenX-vf.screenX,$1=t.screenY-vf.screenY):$1=D1=0,vf=t),D1)},movementY:function(t){return"movementY"in t?t.movementY:$1}}),b4=Ci(W0),jde=Qt({},W0,{dataTransfer:0}),Tde=Ci(jde),Ode=Qt({},Nm,{relatedTarget:0}),F1=Ci(Ode),Pde=Qt({},_h,{animationName:0,elapsedTime:0,pseudoElement:0}),Ide=Ci(Pde),Rde=Qt({},_h,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Mde=Ci(Rde),Ade=Qt({},_h,{data:0}),x4=Ci(Ade),Dde={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$de={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fde={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qde(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Fde[t])?!!e[t]:!1}function yM(){return qde}var Lde=Qt({},Nm,{key:function(t){if(t.key){var e=Dde[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ky(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$de[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yM,charCode:function(t){return t.type==="keypress"?ky(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ky(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Bde=Ci(Lde),zde=Qt({},W0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w4=Ci(zde),Wde=Qt({},Nm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yM}),Vde=Ci(Wde),Ude=Qt({},_h,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hde=Ci(Ude),Kde=Qt({},W0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Gde=Ci(Kde),Yde=[9,13,27,32],vM=Vo&&"CompositionEvent"in window,Qf=null;Vo&&"documentMode"in document&&(Qf=document.documentMode);var Qde=Vo&&"TextEvent"in window&&!Qf,Cee=Vo&&(!vM||Qf&&8<Qf&&11>=Qf),S4=" ",E4=!1;function kee(t,e){switch(t){case"keyup":return Yde.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jee(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zu=!1;function Xde(t,e){switch(t){case"compositionend":return jee(e);case"keypress":return e.which!==32?null:(E4=!0,S4);case"textInput":return t=e.data,t===S4&&E4?null:t;default:return null}}function Jde(t,e){if(Zu)return t==="compositionend"||!vM&&kee(t,e)?(t=Nee(),Cy=mM=La=null,Zu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Cee&&e.locale!=="ko"?null:e.data;default:return null}}var Zde={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _4(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Zde[t.type]:e==="textarea"}function Tee(t,e,r,n){oee(n),e=sv(e,"onChange"),0<e.length&&(r=new gM("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Xf=null,jp=null;function ehe(t){Lee(t,0)}function V0(t){var e=rd(t);if(ZZ(e))return t}function the(t,e){if(t==="change")return e}var Oee=!1;if(Vo){var q1;if(Vo){var L1="oninput"in document;if(!L1){var N4=document.createElement("div");N4.setAttribute("oninput","return;"),L1=typeof N4.oninput=="function"}q1=L1}else q1=!1;Oee=q1&&(!document.documentMode||9<document.documentMode)}function C4(){Xf&&(Xf.detachEvent("onpropertychange",Pee),jp=Xf=null)}function Pee(t){if(t.propertyName==="value"&&V0(jp)){var e=[];Tee(e,jp,t,uM(t)),uee(ehe,e)}}function rhe(t,e,r){t==="focusin"?(C4(),Xf=e,jp=r,Xf.attachEvent("onpropertychange",Pee)):t==="focusout"&&C4()}function nhe(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return V0(jp)}function ihe(t,e){if(t==="click")return V0(e)}function she(t,e){if(t==="input"||t==="change")return V0(e)}function ohe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ws=typeof Object.is=="function"?Object.is:ohe;function Tp(t,e){if(ws(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!_P.call(e,i)||!ws(t[i],e[i]))return!1}return!0}function k4(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function j4(t,e){var r=k4(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=k4(r)}}function Iee(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Iee(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ree(){for(var t=window,e=Jy();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Jy(t.document)}return e}function bM(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ahe(t){var e=Ree(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Iee(r.ownerDocument.documentElement,r)){if(n!==null&&bM(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=j4(r,s);var o=j4(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var lhe=Vo&&"documentMode"in document&&11>=document.documentMode,ed=null,WP=null,Jf=null,VP=!1;function T4(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;VP||ed==null||ed!==Jy(n)||(n=ed,"selectionStart"in n&&bM(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Jf&&Tp(Jf,n)||(Jf=n,n=sv(WP,"onSelect"),0<n.length&&(e=new gM("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=ed)))}function Bg(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var td={animationend:Bg("Animation","AnimationEnd"),animationiteration:Bg("Animation","AnimationIteration"),animationstart:Bg("Animation","AnimationStart"),transitionend:Bg("Transition","TransitionEnd")},B1={},Mee={};Vo&&(Mee=document.createElement("div").style,"AnimationEvent"in window||(delete td.animationend.animation,delete td.animationiteration.animation,delete td.animationstart.animation),"TransitionEvent"in window||delete td.transitionend.transition);function U0(t){if(B1[t])return B1[t];if(!td[t])return t;var e=td[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Mee)return B1[t]=e[r];return t}var Aee=U0("animationend"),Dee=U0("animationiteration"),$ee=U0("animationstart"),Fee=U0("transitionend"),qee=new Map,O4="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _l(t,e){qee.set(t,e),su(e,[t])}for(var z1=0;z1<O4.length;z1++){var W1=O4[z1],che=W1.toLowerCase(),uhe=W1[0].toUpperCase()+W1.slice(1);_l(che,"on"+uhe)}_l(Aee,"onAnimationEnd");_l(Dee,"onAnimationIteration");_l($ee,"onAnimationStart");_l("dblclick","onDoubleClick");_l("focusin","onFocus");_l("focusout","onBlur");_l(Fee,"onTransitionEnd");Gd("onMouseEnter",["mouseout","mouseover"]);Gd("onMouseLeave",["mouseout","mouseover"]);Gd("onPointerEnter",["pointerout","pointerover"]);Gd("onPointerLeave",["pointerout","pointerover"]);su("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));su("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));su("onBeforeInput",["compositionend","keypress","textInput","paste"]);su("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));su("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));su("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dhe=new Set("cancel close invalid load scroll toggle".split(" ").concat(qf));function P4(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,cde(n,e,void 0,t),t.currentTarget=null}function Lee(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;P4(i,a,u),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;P4(i,a,u),s=l}}}if(ev)throw t=qP,ev=!1,qP=null,t}function qt(t,e){var r=e[YP];r===void 0&&(r=e[YP]=new Set);var n=t+"__bubble";r.has(n)||(Bee(e,t,2,!1),r.add(n))}function V1(t,e,r){var n=0;e&&(n|=4),Bee(r,t,n,e)}var zg="_reactListening"+Math.random().toString(36).slice(2);function Op(t){if(!t[zg]){t[zg]=!0,GZ.forEach(function(r){r!=="selectionchange"&&(dhe.has(r)||V1(r,!1,t),V1(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[zg]||(e[zg]=!0,V1("selectionchange",!1,e))}}function Bee(t,e,r,n){switch(_ee(e)){case 1:var i=Nde;break;case 4:i=Cde;break;default:i=pM}r=i.bind(null,e,r,t),i=void 0,!FP||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function U1(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Yl(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue e}a=a.parentNode}}n=n.return}uee(function(){var u=s,d=uM(r),h=[];e:{var f=qee.get(t);if(f!==void 0){var p=gM,m=t;switch(t){case"keypress":if(ky(r)===0)break e;case"keydown":case"keyup":p=Bde;break;case"focusin":m="focus",p=F1;break;case"focusout":m="blur",p=F1;break;case"beforeblur":case"afterblur":p=F1;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=b4;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Tde;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Vde;break;case Aee:case Dee:case $ee:p=Ide;break;case Fee:p=Hde;break;case"scroll":p=kde;break;case"wheel":p=Gde;break;case"copy":case"cut":case"paste":p=Mde;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=w4}var g=(e&4)!==0,y=!g&&t==="scroll",v=g?f!==null?f+"Capture":null:f;g=[];for(var b=u,w;b!==null;){w=b;var x=w.stateNode;if(w.tag===5&&x!==null&&(w=x,v!==null&&(x=_p(b,v),x!=null&&g.push(Pp(b,x,w)))),y)break;b=b.return}0<g.length&&(f=new p(f,m,null,r,d),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&r!==DP&&(m=r.relatedTarget||r.fromElement)&&(Yl(m)||m[Uo]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=u,m=m?Yl(m):null,m!==null&&(y=ou(m),m!==y||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(g=b4,x="onMouseLeave",v="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=w4,x="onPointerLeave",v="onPointerEnter",b="pointer"),y=p==null?f:rd(p),w=m==null?f:rd(m),f=new g(x,b+"leave",p,r,d),f.target=y,f.relatedTarget=w,x=null,Yl(d)===u&&(g=new g(v,b+"enter",m,r,d),g.target=w,g.relatedTarget=y,x=g),y=x,p&&m)t:{for(g=p,v=m,b=0,w=g;w;w=Du(w))b++;for(w=0,x=v;x;x=Du(x))w++;for(;0<b-w;)g=Du(g),b--;for(;0<w-b;)v=Du(v),w--;for(;b--;){if(g===v||v!==null&&g===v.alternate)break t;g=Du(g),v=Du(v)}g=null}else g=null;p!==null&&I4(h,f,p,g,!1),m!==null&&y!==null&&I4(h,y,m,g,!0)}}e:{if(f=u?rd(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var S=the;else if(_4(f))if(Oee)S=she;else{S=nhe;var E=rhe}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=ihe);if(S&&(S=S(t,u))){Tee(h,S,r,d);break e}E&&E(t,f,u),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&PP(f,"number",f.value)}switch(E=u?rd(u):window,t){case"focusin":(_4(E)||E.contentEditable==="true")&&(ed=E,WP=u,Jf=null);break;case"focusout":Jf=WP=ed=null;break;case"mousedown":VP=!0;break;case"contextmenu":case"mouseup":case"dragend":VP=!1,T4(h,r,d);break;case"selectionchange":if(lhe)break;case"keydown":case"keyup":T4(h,r,d)}var N;if(vM)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Zu?kee(t,r)&&(_="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(Cee&&r.locale!=="ko"&&(Zu||_!=="onCompositionStart"?_==="onCompositionEnd"&&Zu&&(N=Nee()):(La=d,mM="value"in La?La.value:La.textContent,Zu=!0)),E=sv(u,_),0<E.length&&(_=new x4(_,t,null,r,d),h.push({event:_,listeners:E}),N?_.data=N:(N=jee(r),N!==null&&(_.data=N)))),(N=Qde?Xde(t,r):Jde(t,r))&&(u=sv(u,"onBeforeInput"),0<u.length&&(d=new x4("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=N))}Lee(h,e)})}function Pp(t,e,r){return{instance:t,listener:e,currentTarget:r}}function sv(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=_p(t,r),s!=null&&n.unshift(Pp(t,s,i)),s=_p(t,e),s!=null&&n.push(Pp(t,s,i))),t=t.return}return n}function Du(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function I4(t,e,r,n,i){for(var s=e._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,u=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&u!==null&&(a=u,i?(l=_p(r,s),l!=null&&o.unshift(Pp(r,l,a))):i||(l=_p(r,s),l!=null&&o.push(Pp(r,l,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var hhe=/\r\n?/g,fhe=/\u0000|\uFFFD/g;function R4(t){return(typeof t=="string"?t:""+t).replace(hhe,`
`).replace(fhe,"")}function Wg(t,e,r){if(e=R4(e),R4(t)!==e&&r)throw Error(ae(425))}function ov(){}var UP=null,HP=null;function KP(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var GP=typeof setTimeout=="function"?setTimeout:void 0,phe=typeof clearTimeout=="function"?clearTimeout:void 0,M4=typeof Promise=="function"?Promise:void 0,mhe=typeof queueMicrotask=="function"?queueMicrotask:typeof M4<"u"?function(t){return M4.resolve(null).then(t).catch(ghe)}:GP;function ghe(t){setTimeout(function(){throw t})}function H1(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),kp(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);kp(e)}function Qa(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function A4(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Nh=Math.random().toString(36).slice(2),zs="__reactFiber$"+Nh,Ip="__reactProps$"+Nh,Uo="__reactContainer$"+Nh,YP="__reactEvents$"+Nh,yhe="__reactListeners$"+Nh,vhe="__reactHandles$"+Nh;function Yl(t){var e=t[zs];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Uo]||r[zs]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=A4(t);t!==null;){if(r=t[zs])return r;t=A4(t)}return e}t=r,r=t.parentNode}return null}function Cm(t){return t=t[zs]||t[Uo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function rd(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function H0(t){return t[Ip]||null}var QP=[],nd=-1;function Nl(t){return{current:t}}function zt(t){0>nd||(t.current=QP[nd],QP[nd]=null,nd--)}function Ft(t,e){nd++,QP[nd]=t.current,t.current=e}var ml={},_n=Nl(ml),ii=Nl(!1),Ic=ml;function Yd(t,e){var r=t.type.contextTypes;if(!r)return ml;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function si(t){return t=t.childContextTypes,t!=null}function av(){zt(ii),zt(_n)}function D4(t,e,r){if(_n.current!==ml)throw Error(ae(168));Ft(_n,e),Ft(ii,r)}function zee(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(ae(108,rde(t)||"Unknown",i));return Qt({},r,n)}function lv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ml,Ic=_n.current,Ft(_n,t),Ft(ii,ii.current),!0}function $4(t,e,r){var n=t.stateNode;if(!n)throw Error(ae(169));r?(t=zee(t,e,Ic),n.__reactInternalMemoizedMergedChildContext=t,zt(ii),zt(_n),Ft(_n,t)):zt(ii),Ft(ii,r)}var wo=null,K0=!1,K1=!1;function Wee(t){wo===null?wo=[t]:wo.push(t)}function bhe(t){K0=!0,Wee(t)}function Cl(){if(!K1&&wo!==null){K1=!0;var t=0,e=St;try{var r=wo;for(St=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}wo=null,K0=!1}catch(i){throw wo!==null&&(wo=wo.slice(t+1)),pee(dM,Cl),i}finally{St=e,K1=!1}}return null}var id=[],sd=0,cv=null,uv=0,qi=[],Li=0,Rc=null,ko=1,jo="";function Vl(t,e){id[sd++]=uv,id[sd++]=cv,cv=t,uv=e}function Vee(t,e,r){qi[Li++]=ko,qi[Li++]=jo,qi[Li++]=Rc,Rc=t;var n=ko;t=jo;var i=32-bs(n)-1;n&=~(1<<i),r+=1;var s=32-bs(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,ko=1<<32-bs(e)+i|r<<i|n,jo=s+t}else ko=1<<s|r<<i|n,jo=t}function xM(t){t.return!==null&&(Vl(t,1),Vee(t,1,0))}function wM(t){for(;t===cv;)cv=id[--sd],id[sd]=null,uv=id[--sd],id[sd]=null;for(;t===Rc;)Rc=qi[--Li],qi[Li]=null,jo=qi[--Li],qi[Li]=null,ko=qi[--Li],qi[Li]=null}var Si=null,wi=null,Vt=!1,fs=null;function Uee(t,e){var r=Vi(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function F4(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Si=t,wi=Qa(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Si=t,wi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Rc!==null?{id:ko,overflow:jo}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Vi(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Si=t,wi=null,!0):!1;default:return!1}}function XP(t){return(t.mode&1)!==0&&(t.flags&128)===0}function JP(t){if(Vt){var e=wi;if(e){var r=e;if(!F4(t,e)){if(XP(t))throw Error(ae(418));e=Qa(r.nextSibling);var n=Si;e&&F4(t,e)?Uee(n,r):(t.flags=t.flags&-4097|2,Vt=!1,Si=t)}}else{if(XP(t))throw Error(ae(418));t.flags=t.flags&-4097|2,Vt=!1,Si=t}}}function q4(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Si=t}function Vg(t){if(t!==Si)return!1;if(!Vt)return q4(t),Vt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!KP(t.type,t.memoizedProps)),e&&(e=wi)){if(XP(t))throw Hee(),Error(ae(418));for(;e;)Uee(t,e),e=Qa(e.nextSibling)}if(q4(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){wi=Qa(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}wi=null}}else wi=Si?Qa(t.stateNode.nextSibling):null;return!0}function Hee(){for(var t=wi;t;)t=Qa(t.nextSibling)}function Qd(){wi=Si=null,Vt=!1}function SM(t){fs===null?fs=[t]:fs.push(t)}var xhe=Xo.ReactCurrentBatchConfig;function bf(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ae(309));var n=r.stateNode}if(!n)throw Error(ae(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ae(284));if(!r._owner)throw Error(ae(290,t))}return t}function Ug(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function L4(t){var e=t._init;return e(t._payload)}function Kee(t){function e(v,b){if(t){var w=v.deletions;w===null?(v.deletions=[b],v.flags|=16):w.push(b)}}function r(v,b){if(!t)return null;for(;b!==null;)e(v,b),b=b.sibling;return null}function n(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function i(v,b){return v=el(v,b),v.index=0,v.sibling=null,v}function s(v,b,w){return v.index=w,t?(w=v.alternate,w!==null?(w=w.index,w<b?(v.flags|=2,b):w):(v.flags|=2,b)):(v.flags|=1048576,b)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,b,w,x){return b===null||b.tag!==6?(b=ex(w,v.mode,x),b.return=v,b):(b=i(b,w),b.return=v,b)}function l(v,b,w,x){var S=w.type;return S===Ju?d(v,b,w.props.children,x,w.key):b!==null&&(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ya&&L4(S)===b.type)?(x=i(b,w.props),x.ref=bf(v,b,w),x.return=v,x):(x=My(w.type,w.key,w.props,null,v.mode,x),x.ref=bf(v,b,w),x.return=v,x)}function u(v,b,w,x){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=tx(w,v.mode,x),b.return=v,b):(b=i(b,w.children||[]),b.return=v,b)}function d(v,b,w,x,S){return b===null||b.tag!==7?(b=bc(w,v.mode,x,S),b.return=v,b):(b=i(b,w),b.return=v,b)}function h(v,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=ex(""+b,v.mode,w),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Mg:return w=My(b.type,b.key,b.props,null,v.mode,w),w.ref=bf(v,null,b),w.return=v,w;case Xu:return b=tx(b,v.mode,w),b.return=v,b;case ya:var x=b._init;return h(v,x(b._payload),w)}if($f(b)||pf(b))return b=bc(b,v.mode,w,null),b.return=v,b;Ug(v,b)}return null}function f(v,b,w,x){var S=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(v,b,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Mg:return w.key===S?l(v,b,w,x):null;case Xu:return w.key===S?u(v,b,w,x):null;case ya:return S=w._init,f(v,b,S(w._payload),x)}if($f(w)||pf(w))return S!==null?null:d(v,b,w,x,null);Ug(v,w)}return null}function p(v,b,w,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return v=v.get(w)||null,a(b,v,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Mg:return v=v.get(x.key===null?w:x.key)||null,l(b,v,x,S);case Xu:return v=v.get(x.key===null?w:x.key)||null,u(b,v,x,S);case ya:var E=x._init;return p(v,b,w,E(x._payload),S)}if($f(x)||pf(x))return v=v.get(w)||null,d(b,v,x,S,null);Ug(b,x)}return null}function m(v,b,w,x){for(var S=null,E=null,N=b,_=b=0,k=null;N!==null&&_<w.length;_++){N.index>_?(k=N,N=null):k=N.sibling;var j=f(v,N,w[_],x);if(j===null){N===null&&(N=k);break}t&&N&&j.alternate===null&&e(v,N),b=s(j,b,_),E===null?S=j:E.sibling=j,E=j,N=k}if(_===w.length)return r(v,N),Vt&&Vl(v,_),S;if(N===null){for(;_<w.length;_++)N=h(v,w[_],x),N!==null&&(b=s(N,b,_),E===null?S=N:E.sibling=N,E=N);return Vt&&Vl(v,_),S}for(N=n(v,N);_<w.length;_++)k=p(N,v,_,w[_],x),k!==null&&(t&&k.alternate!==null&&N.delete(k.key===null?_:k.key),b=s(k,b,_),E===null?S=k:E.sibling=k,E=k);return t&&N.forEach(function(T){return e(v,T)}),Vt&&Vl(v,_),S}function g(v,b,w,x){var S=pf(w);if(typeof S!="function")throw Error(ae(150));if(w=S.call(w),w==null)throw Error(ae(151));for(var E=S=null,N=b,_=b=0,k=null,j=w.next();N!==null&&!j.done;_++,j=w.next()){N.index>_?(k=N,N=null):k=N.sibling;var T=f(v,N,j.value,x);if(T===null){N===null&&(N=k);break}t&&N&&T.alternate===null&&e(v,N),b=s(T,b,_),E===null?S=T:E.sibling=T,E=T,N=k}if(j.done)return r(v,N),Vt&&Vl(v,_),S;if(N===null){for(;!j.done;_++,j=w.next())j=h(v,j.value,x),j!==null&&(b=s(j,b,_),E===null?S=j:E.sibling=j,E=j);return Vt&&Vl(v,_),S}for(N=n(v,N);!j.done;_++,j=w.next())j=p(N,v,_,j.value,x),j!==null&&(t&&j.alternate!==null&&N.delete(j.key===null?_:j.key),b=s(j,b,_),E===null?S=j:E.sibling=j,E=j);return t&&N.forEach(function(P){return e(v,P)}),Vt&&Vl(v,_),S}function y(v,b,w,x){if(typeof w=="object"&&w!==null&&w.type===Ju&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Mg:e:{for(var S=w.key,E=b;E!==null;){if(E.key===S){if(S=w.type,S===Ju){if(E.tag===7){r(v,E.sibling),b=i(E,w.props.children),b.return=v,v=b;break e}}else if(E.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ya&&L4(S)===E.type){r(v,E.sibling),b=i(E,w.props),b.ref=bf(v,E,w),b.return=v,v=b;break e}r(v,E);break}else e(v,E);E=E.sibling}w.type===Ju?(b=bc(w.props.children,v.mode,x,w.key),b.return=v,v=b):(x=My(w.type,w.key,w.props,null,v.mode,x),x.ref=bf(v,b,w),x.return=v,v=x)}return o(v);case Xu:e:{for(E=w.key;b!==null;){if(b.key===E)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){r(v,b.sibling),b=i(b,w.children||[]),b.return=v,v=b;break e}else{r(v,b);break}else e(v,b);b=b.sibling}b=tx(w,v.mode,x),b.return=v,v=b}return o(v);case ya:return E=w._init,y(v,b,E(w._payload),x)}if($f(w))return m(v,b,w,x);if(pf(w))return g(v,b,w,x);Ug(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(r(v,b.sibling),b=i(b,w),b.return=v,v=b):(r(v,b),b=ex(w,v.mode,x),b.return=v,v=b),o(v)):r(v,b)}return y}var Xd=Kee(!0),Gee=Kee(!1),dv=Nl(null),hv=null,od=null,EM=null;function _M(){EM=od=hv=null}function NM(t){var e=dv.current;zt(dv),t._currentValue=e}function ZP(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function wd(t,e){hv=t,EM=od=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ri=!0),t.firstContext=null)}function Ji(t){var e=t._currentValue;if(EM!==t)if(t={context:t,memoizedValue:e,next:null},od===null){if(hv===null)throw Error(ae(308));od=t,hv.dependencies={lanes:0,firstContext:t}}else od=od.next=t;return e}var Ql=null;function CM(t){Ql===null?Ql=[t]:Ql.push(t)}function Yee(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,CM(e)):(r.next=i.next,i.next=r),e.interleaved=r,Ho(t,n)}function Ho(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var va=!1;function kM(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qee(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Io(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Xa(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,mt&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Ho(t,r)}return i=n.interleaved,i===null?(e.next=e,CM(n)):(e.next=i.next,i.next=e),n.interleaved=e,Ho(t,r)}function jy(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,hM(t,r)}}function B4(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function fv(t,e,r,n){var i=t.updateQueue;va=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=u=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,g=a;switch(f=e,p=r,g.tag){case 1:if(m=g.payload,typeof m=="function"){h=m.call(p,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(p,h,f):m,f==null)break e;h=Qt({},h,f);break e;case 2:va=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=p,l=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ac|=o,t.lanes=o,t.memoizedState=h}}function z4(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(ae(191,i));i.call(n)}}}var km={},Gs=Nl(km),Rp=Nl(km),Mp=Nl(km);function Xl(t){if(t===km)throw Error(ae(174));return t}function jM(t,e){switch(Ft(Mp,e),Ft(Rp,t),Ft(Gs,km),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:RP(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=RP(e,t)}zt(Gs),Ft(Gs,e)}function Jd(){zt(Gs),zt(Rp),zt(Mp)}function Xee(t){Xl(Mp.current);var e=Xl(Gs.current),r=RP(e,t.type);e!==r&&(Ft(Rp,t),Ft(Gs,r))}function TM(t){Rp.current===t&&(zt(Gs),zt(Rp))}var Ht=Nl(0);function pv(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var G1=[];function OM(){for(var t=0;t<G1.length;t++)G1[t]._workInProgressVersionPrimary=null;G1.length=0}var Ty=Xo.ReactCurrentDispatcher,Y1=Xo.ReactCurrentBatchConfig,Mc=0,Gt=null,Mr=null,zr=null,mv=!1,Zf=!1,Ap=0,whe=0;function gn(){throw Error(ae(321))}function PM(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!ws(t[r],e[r]))return!1;return!0}function IM(t,e,r,n,i,s){if(Mc=s,Gt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ty.current=t===null||t.memoizedState===null?Nhe:Che,t=r(n,i),Zf){s=0;do{if(Zf=!1,Ap=0,25<=s)throw Error(ae(301));s+=1,zr=Mr=null,e.updateQueue=null,Ty.current=khe,t=r(n,i)}while(Zf)}if(Ty.current=gv,e=Mr!==null&&Mr.next!==null,Mc=0,zr=Mr=Gt=null,mv=!1,e)throw Error(ae(300));return t}function RM(){var t=Ap!==0;return Ap=0,t}function Rs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zr===null?Gt.memoizedState=zr=t:zr=zr.next=t,zr}function Zi(){if(Mr===null){var t=Gt.alternate;t=t!==null?t.memoizedState:null}else t=Mr.next;var e=zr===null?Gt.memoizedState:zr.next;if(e!==null)zr=e,Mr=t;else{if(t===null)throw Error(ae(310));Mr=t,t={memoizedState:Mr.memoizedState,baseState:Mr.baseState,baseQueue:Mr.baseQueue,queue:Mr.queue,next:null},zr===null?Gt.memoizedState=zr=t:zr=zr.next=t}return zr}function Dp(t,e){return typeof e=="function"?e(t):e}function Q1(t){var e=Zi(),r=e.queue;if(r===null)throw Error(ae(311));r.lastRenderedReducer=t;var n=Mr,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,l=null,u=s;do{var d=u.lane;if((Mc&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=n):l=l.next=h,Gt.lanes|=d,Ac|=d}u=u.next}while(u!==null&&u!==s);l===null?o=n:l.next=a,ws(n,e.memoizedState)||(ri=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,Gt.lanes|=s,Ac|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function X1(t){var e=Zi(),r=e.queue;if(r===null)throw Error(ae(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ws(s,e.memoizedState)||(ri=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function Jee(){}function Zee(t,e){var r=Gt,n=Zi(),i=e(),s=!ws(n.memoizedState,i);if(s&&(n.memoizedState=i,ri=!0),n=n.queue,MM(rte.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||zr!==null&&zr.memoizedState.tag&1){if(r.flags|=2048,$p(9,tte.bind(null,r,n,i,e),void 0,null),Ur===null)throw Error(ae(349));Mc&30||ete(r,e,i)}return i}function ete(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Gt.updateQueue,e===null?(e={lastEffect:null,stores:null},Gt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function tte(t,e,r,n){e.value=r,e.getSnapshot=n,nte(e)&&ite(t)}function rte(t,e,r){return r(function(){nte(e)&&ite(t)})}function nte(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!ws(t,r)}catch{return!0}}function ite(t){var e=Ho(t,1);e!==null&&xs(e,t,1,-1)}function W4(t){var e=Rs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dp,lastRenderedState:t},e.queue=t,t=t.dispatch=_he.bind(null,Gt,t),[e.memoizedState,t]}function $p(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Gt.updateQueue,e===null?(e={lastEffect:null,stores:null},Gt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function ste(){return Zi().memoizedState}function Oy(t,e,r,n){var i=Rs();Gt.flags|=t,i.memoizedState=$p(1|e,r,void 0,n===void 0?null:n)}function G0(t,e,r,n){var i=Zi();n=n===void 0?null:n;var s=void 0;if(Mr!==null){var o=Mr.memoizedState;if(s=o.destroy,n!==null&&PM(n,o.deps)){i.memoizedState=$p(e,r,s,n);return}}Gt.flags|=t,i.memoizedState=$p(1|e,r,s,n)}function V4(t,e){return Oy(8390656,8,t,e)}function MM(t,e){return G0(2048,8,t,e)}function ote(t,e){return G0(4,2,t,e)}function ate(t,e){return G0(4,4,t,e)}function lte(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function cte(t,e,r){return r=r!=null?r.concat([t]):null,G0(4,4,lte.bind(null,e,t),r)}function AM(){}function ute(t,e){var r=Zi();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&PM(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function dte(t,e){var r=Zi();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&PM(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function hte(t,e,r){return Mc&21?(ws(r,e)||(r=yee(),Gt.lanes|=r,Ac|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ri=!0),t.memoizedState=r)}function She(t,e){var r=St;St=r!==0&&4>r?r:4,t(!0);var n=Y1.transition;Y1.transition={};try{t(!1),e()}finally{St=r,Y1.transition=n}}function fte(){return Zi().memoizedState}function Ehe(t,e,r){var n=Za(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},pte(t))mte(e,r);else if(r=Yee(t,e,r,n),r!==null){var i=Fn();xs(r,t,n,i),gte(r,e,n)}}function _he(t,e,r){var n=Za(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(pte(t))mte(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,ws(a,o)){var l=e.interleaved;l===null?(i.next=i,CM(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=Yee(t,e,i,n),r!==null&&(i=Fn(),xs(r,t,n,i),gte(r,e,n))}}function pte(t){var e=t.alternate;return t===Gt||e!==null&&e===Gt}function mte(t,e){Zf=mv=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function gte(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,hM(t,r)}}var gv={readContext:Ji,useCallback:gn,useContext:gn,useEffect:gn,useImperativeHandle:gn,useInsertionEffect:gn,useLayoutEffect:gn,useMemo:gn,useReducer:gn,useRef:gn,useState:gn,useDebugValue:gn,useDeferredValue:gn,useTransition:gn,useMutableSource:gn,useSyncExternalStore:gn,useId:gn,unstable_isNewReconciler:!1},Nhe={readContext:Ji,useCallback:function(t,e){return Rs().memoizedState=[t,e===void 0?null:e],t},useContext:Ji,useEffect:V4,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Oy(4194308,4,lte.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Oy(4194308,4,t,e)},useInsertionEffect:function(t,e){return Oy(4,2,t,e)},useMemo:function(t,e){var r=Rs();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Rs();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Ehe.bind(null,Gt,t),[n.memoizedState,t]},useRef:function(t){var e=Rs();return t={current:t},e.memoizedState=t},useState:W4,useDebugValue:AM,useDeferredValue:function(t){return Rs().memoizedState=t},useTransition:function(){var t=W4(!1),e=t[0];return t=She.bind(null,t[1]),Rs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Gt,i=Rs();if(Vt){if(r===void 0)throw Error(ae(407));r=r()}else{if(r=e(),Ur===null)throw Error(ae(349));Mc&30||ete(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,V4(rte.bind(null,n,s,t),[t]),n.flags|=2048,$p(9,tte.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Rs(),e=Ur.identifierPrefix;if(Vt){var r=jo,n=ko;r=(n&~(1<<32-bs(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Ap++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=whe++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Che={readContext:Ji,useCallback:ute,useContext:Ji,useEffect:MM,useImperativeHandle:cte,useInsertionEffect:ote,useLayoutEffect:ate,useMemo:dte,useReducer:Q1,useRef:ste,useState:function(){return Q1(Dp)},useDebugValue:AM,useDeferredValue:function(t){var e=Zi();return hte(e,Mr.memoizedState,t)},useTransition:function(){var t=Q1(Dp)[0],e=Zi().memoizedState;return[t,e]},useMutableSource:Jee,useSyncExternalStore:Zee,useId:fte,unstable_isNewReconciler:!1},khe={readContext:Ji,useCallback:ute,useContext:Ji,useEffect:MM,useImperativeHandle:cte,useInsertionEffect:ote,useLayoutEffect:ate,useMemo:dte,useReducer:X1,useRef:ste,useState:function(){return X1(Dp)},useDebugValue:AM,useDeferredValue:function(t){var e=Zi();return Mr===null?e.memoizedState=t:hte(e,Mr.memoizedState,t)},useTransition:function(){var t=X1(Dp)[0],e=Zi().memoizedState;return[t,e]},useMutableSource:Jee,useSyncExternalStore:Zee,useId:fte,unstable_isNewReconciler:!1};function cs(t,e){if(t&&t.defaultProps){e=Qt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function eI(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Qt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Y0={isMounted:function(t){return(t=t._reactInternals)?ou(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Fn(),i=Za(t),s=Io(n,i);s.payload=e,r!=null&&(s.callback=r),e=Xa(t,s,i),e!==null&&(xs(e,t,i,n),jy(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Fn(),i=Za(t),s=Io(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=Xa(t,s,i),e!==null&&(xs(e,t,i,n),jy(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Fn(),n=Za(t),i=Io(r,n);i.tag=2,e!=null&&(i.callback=e),e=Xa(t,i,n),e!==null&&(xs(e,t,n,r),jy(e,t,n))}};function U4(t,e,r,n,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!Tp(r,n)||!Tp(i,s):!0}function yte(t,e,r){var n=!1,i=ml,s=e.contextType;return typeof s=="object"&&s!==null?s=Ji(s):(i=si(e)?Ic:_n.current,n=e.contextTypes,s=(n=n!=null)?Yd(t,i):ml),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Y0,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function H4(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Y0.enqueueReplaceState(e,e.state,null)}function tI(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},kM(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ji(s):(s=si(e)?Ic:_n.current,i.context=Yd(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(eI(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Y0.enqueueReplaceState(i,i.state,null),fv(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Zd(t,e){try{var r="",n=e;do r+=tde(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function J1(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function rI(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var jhe=typeof WeakMap=="function"?WeakMap:Map;function vte(t,e,r){r=Io(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){vv||(vv=!0,hI=n),rI(t,e)},r}function bte(t,e,r){r=Io(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){rI(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){rI(t,e),typeof n!="function"&&(Ja===null?Ja=new Set([this]):Ja.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function K4(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new jhe;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=zhe.bind(null,t,e,r),e.then(t,t))}function G4(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Y4(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Io(-1,1),e.tag=2,Xa(r,e,1))),r.lanes|=1),t)}var The=Xo.ReactCurrentOwner,ri=!1;function Tn(t,e,r,n){e.child=t===null?Gee(e,null,r,n):Xd(e,t.child,r,n)}function Q4(t,e,r,n,i){r=r.render;var s=e.ref;return wd(e,i),n=IM(t,e,r,n,s,i),r=RM(),t!==null&&!ri?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ko(t,e,i)):(Vt&&r&&xM(e),e.flags|=1,Tn(t,e,n,i),e.child)}function X4(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!WM(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,xte(t,e,s,n,i)):(t=My(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Tp,r(o,n)&&t.ref===e.ref)return Ko(t,e,i)}return e.flags|=1,t=el(s,n),t.ref=e.ref,t.return=e,e.child=t}function xte(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(Tp(s,n)&&t.ref===e.ref)if(ri=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(ri=!0);else return e.lanes=t.lanes,Ko(t,e,i)}return nI(t,e,r,n,i)}function wte(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ft(ld,yi),yi|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ft(ld,yi),yi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Ft(ld,yi),yi|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Ft(ld,yi),yi|=n;return Tn(t,e,i,r),e.child}function Ste(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function nI(t,e,r,n,i){var s=si(r)?Ic:_n.current;return s=Yd(e,s),wd(e,i),r=IM(t,e,r,n,s,i),n=RM(),t!==null&&!ri?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ko(t,e,i)):(Vt&&n&&xM(e),e.flags|=1,Tn(t,e,r,i),e.child)}function J4(t,e,r,n,i){if(si(r)){var s=!0;lv(e)}else s=!1;if(wd(e,i),e.stateNode===null)Py(t,e),yte(e,r,n),tI(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Ji(u):(u=si(r)?Ic:_n.current,u=Yd(e,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==u)&&H4(e,o,n,u),va=!1;var f=e.memoizedState;o.state=f,fv(e,n,o,i),l=e.memoizedState,a!==n||f!==l||ii.current||va?(typeof d=="function"&&(eI(e,r,d,n),l=e.memoizedState),(a=va||U4(e,r,a,n,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=u,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,Qee(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:cs(e.type,a),o.props=u,h=e.pendingProps,f=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Ji(l):(l=si(r)?Ic:_n.current,l=Yd(e,l));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&H4(e,o,n,l),va=!1,f=e.memoizedState,o.state=f,fv(e,n,o,i);var m=e.memoizedState;a!==h||f!==m||ii.current||va?(typeof p=="function"&&(eI(e,r,p,n),m=e.memoizedState),(u=va||U4(e,r,u,n,f,m,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return iI(t,e,r,n,s,i)}function iI(t,e,r,n,i,s){Ste(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&$4(e,r,!1),Ko(t,e,s);n=e.stateNode,The.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Xd(e,t.child,null,s),e.child=Xd(e,null,a,s)):Tn(t,e,a,s),e.memoizedState=n.state,i&&$4(e,r,!0),e.child}function Ete(t){var e=t.stateNode;e.pendingContext?D4(t,e.pendingContext,e.pendingContext!==e.context):e.context&&D4(t,e.context,!1),jM(t,e.containerInfo)}function Z4(t,e,r,n,i){return Qd(),SM(i),e.flags|=256,Tn(t,e,r,n),e.child}var sI={dehydrated:null,treeContext:null,retryLane:0};function oI(t){return{baseLanes:t,cachePool:null,transitions:null}}function _te(t,e,r){var n=e.pendingProps,i=Ht.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ft(Ht,i&1),t===null)return JP(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=J0(o,n,0,null),t=bc(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=oI(r),e.memoizedState=sI,t):DM(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Ohe(t,e,o,n,a,i,r);if(s){s=n.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=el(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=el(a,s):(s=bc(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?oI(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=sI,n}return s=t.child,t=s.sibling,n=el(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function DM(t,e){return e=J0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Hg(t,e,r,n){return n!==null&&SM(n),Xd(e,t.child,null,r),t=DM(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ohe(t,e,r,n,i,s,o){if(r)return e.flags&256?(e.flags&=-257,n=J1(Error(ae(422))),Hg(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=J0({mode:"visible",children:n.children},i,0,null),s=bc(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Xd(e,t.child,null,o),e.child.memoizedState=oI(o),e.memoizedState=sI,s);if(!(e.mode&1))return Hg(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(ae(419)),n=J1(s,n,void 0),Hg(t,e,o,n)}if(a=(o&t.childLanes)!==0,ri||a){if(n=Ur,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ho(t,i),xs(n,t,i,-1))}return zM(),n=J1(Error(ae(421))),Hg(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Whe.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,wi=Qa(i.nextSibling),Si=e,Vt=!0,fs=null,t!==null&&(qi[Li++]=ko,qi[Li++]=jo,qi[Li++]=Rc,ko=t.id,jo=t.overflow,Rc=e),e=DM(e,n.children),e.flags|=4096,e)}function e5(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),ZP(t.return,e,r)}function Z1(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function Nte(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Tn(t,e,n.children,r),n=Ht.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&e5(t,r,e);else if(t.tag===19)e5(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ft(Ht,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&pv(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Z1(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&pv(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Z1(e,!0,r,null,s);break;case"together":Z1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Py(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ko(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Ac|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,r=el(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=el(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Phe(t,e,r){switch(e.tag){case 3:Ete(e),Qd();break;case 5:Xee(e);break;case 1:si(e.type)&&lv(e);break;case 4:jM(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Ft(dv,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ft(Ht,Ht.current&1),e.flags|=128,null):r&e.child.childLanes?_te(t,e,r):(Ft(Ht,Ht.current&1),t=Ko(t,e,r),t!==null?t.sibling:null);Ft(Ht,Ht.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Nte(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ft(Ht,Ht.current),n)break;return null;case 22:case 23:return e.lanes=0,wte(t,e,r)}return Ko(t,e,r)}var Cte,aI,kte,jte;Cte=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};aI=function(){};kte=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Xl(Gs.current);var s=null;switch(r){case"input":i=TP(t,i),n=TP(t,n),s=[];break;case"select":i=Qt({},i,{value:void 0}),n=Qt({},n,{value:void 0}),s=[];break;case"textarea":i=IP(t,i),n=IP(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=ov)}MP(r,n);var o;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Sp.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var l=n[u];if(a=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Sp.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&qt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};jte=function(t,e,r,n){r!==n&&(e.flags|=4)};function xf(t,e){if(!Vt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function yn(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Ihe(t,e,r){var n=e.pendingProps;switch(wM(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yn(e),null;case 1:return si(e.type)&&av(),yn(e),null;case 3:return n=e.stateNode,Jd(),zt(ii),zt(_n),OM(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Vg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fs!==null&&(mI(fs),fs=null))),aI(t,e),yn(e),null;case 5:TM(e);var i=Xl(Mp.current);if(r=e.type,t!==null&&e.stateNode!=null)kte(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ae(166));return yn(e),null}if(t=Xl(Gs.current),Vg(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[zs]=e,n[Ip]=s,t=(e.mode&1)!==0,r){case"dialog":qt("cancel",n),qt("close",n);break;case"iframe":case"object":case"embed":qt("load",n);break;case"video":case"audio":for(i=0;i<qf.length;i++)qt(qf[i],n);break;case"source":qt("error",n);break;case"img":case"image":case"link":qt("error",n),qt("load",n);break;case"details":qt("toggle",n);break;case"input":c4(n,s),qt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},qt("invalid",n);break;case"textarea":d4(n,s),qt("invalid",n)}MP(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&Wg(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Wg(n.textContent,a,t),i=["children",""+a]):Sp.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&qt("scroll",n)}switch(r){case"input":Ag(n),u4(n,s,!0);break;case"textarea":Ag(n),h4(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=ov)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ree(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[zs]=e,t[Ip]=n,Cte(t,e,!1,!1),e.stateNode=t;e:{switch(o=AP(r,n),r){case"dialog":qt("cancel",t),qt("close",t),i=n;break;case"iframe":case"object":case"embed":qt("load",t),i=n;break;case"video":case"audio":for(i=0;i<qf.length;i++)qt(qf[i],t);i=n;break;case"source":qt("error",t),i=n;break;case"img":case"image":case"link":qt("error",t),qt("load",t),i=n;break;case"details":qt("toggle",t),i=n;break;case"input":c4(t,n),i=TP(t,n),qt("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Qt({},n,{value:void 0}),qt("invalid",t);break;case"textarea":d4(t,n),i=IP(t,n),qt("invalid",t);break;default:i=n}MP(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?see(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&nee(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Ep(t,l):typeof l=="number"&&Ep(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Sp.hasOwnProperty(s)?l!=null&&s==="onScroll"&&qt("scroll",t):l!=null&&oM(t,s,l,o))}switch(r){case"input":Ag(t),u4(t,n,!1);break;case"textarea":Ag(t),h4(t);break;case"option":n.value!=null&&t.setAttribute("value",""+pl(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?yd(t,!!n.multiple,s,!1):n.defaultValue!=null&&yd(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ov)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yn(e),null;case 6:if(t&&e.stateNode!=null)jte(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ae(166));if(r=Xl(Mp.current),Xl(Gs.current),Vg(e)){if(n=e.stateNode,r=e.memoizedProps,n[zs]=e,(s=n.nodeValue!==r)&&(t=Si,t!==null))switch(t.tag){case 3:Wg(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wg(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[zs]=e,e.stateNode=n}return yn(e),null;case 13:if(zt(Ht),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Vt&&wi!==null&&e.mode&1&&!(e.flags&128))Hee(),Qd(),e.flags|=98560,s=!1;else if(s=Vg(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(ae(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ae(317));s[zs]=e}else Qd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yn(e),s=!1}else fs!==null&&(mI(fs),fs=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Ht.current&1?Ar===0&&(Ar=3):zM())),e.updateQueue!==null&&(e.flags|=4),yn(e),null);case 4:return Jd(),aI(t,e),t===null&&Op(e.stateNode.containerInfo),yn(e),null;case 10:return NM(e.type._context),yn(e),null;case 17:return si(e.type)&&av(),yn(e),null;case 19:if(zt(Ht),s=e.memoizedState,s===null)return yn(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)xf(s,!1);else{if(Ar!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=pv(t),o!==null){for(e.flags|=128,xf(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ft(Ht,Ht.current&1|2),e.child}t=t.sibling}s.tail!==null&&hr()>eh&&(e.flags|=128,n=!0,xf(s,!1),e.lanes=4194304)}else{if(!n)if(t=pv(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),xf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Vt)return yn(e),null}else 2*hr()-s.renderingStartTime>eh&&r!==1073741824&&(e.flags|=128,n=!0,xf(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=hr(),e.sibling=null,r=Ht.current,Ft(Ht,n?r&1|2:r&1),e):(yn(e),null);case 22:case 23:return BM(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?yi&1073741824&&(yn(e),e.subtreeFlags&6&&(e.flags|=8192)):yn(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function Rhe(t,e){switch(wM(e),e.tag){case 1:return si(e.type)&&av(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Jd(),zt(ii),zt(_n),OM(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return TM(e),null;case 13:if(zt(Ht),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));Qd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return zt(Ht),null;case 4:return Jd(),null;case 10:return NM(e.type._context),null;case 22:case 23:return BM(),null;case 24:return null;default:return null}}var Kg=!1,wn=!1,Mhe=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function ad(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ir(t,e,n)}else r.current=null}function lI(t,e,r){try{r()}catch(n){ir(t,e,n)}}var t5=!1;function Ahe(t,e){if(UP=nv,t=Ree(),bM(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==r||i!==0&&h.nodeType!==3||(a=o+i),h!==s||n!==0&&h.nodeType!==3||(l=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===r&&++u===i&&(a=o),f===s&&++d===n&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(HP={focusedElem:t,selectionRange:r},nv=!1,Ce=e;Ce!==null;)if(e=Ce,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ce=t;else for(;Ce!==null;){e=Ce;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,y=m.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:cs(e.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(x){ir(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,Ce=t;break}Ce=e.return}return m=t5,t5=!1,m}function ep(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&lI(e,r,s)}i=i.next}while(i!==n)}}function Q0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function cI(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Tte(t){var e=t.alternate;e!==null&&(t.alternate=null,Tte(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[zs],delete e[Ip],delete e[YP],delete e[yhe],delete e[vhe])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ote(t){return t.tag===5||t.tag===3||t.tag===4}function r5(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ote(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function uI(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=ov));else if(n!==4&&(t=t.child,t!==null))for(uI(t,e,r),t=t.sibling;t!==null;)uI(t,e,r),t=t.sibling}function dI(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(dI(t,e,r),t=t.sibling;t!==null;)dI(t,e,r),t=t.sibling}var on=null,hs=!1;function la(t,e,r){for(r=r.child;r!==null;)Pte(t,e,r),r=r.sibling}function Pte(t,e,r){if(Ks&&typeof Ks.onCommitFiberUnmount=="function")try{Ks.onCommitFiberUnmount(z0,r)}catch{}switch(r.tag){case 5:wn||ad(r,e);case 6:var n=on,i=hs;on=null,la(t,e,r),on=n,hs=i,on!==null&&(hs?(t=on,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):on.removeChild(r.stateNode));break;case 18:on!==null&&(hs?(t=on,r=r.stateNode,t.nodeType===8?H1(t.parentNode,r):t.nodeType===1&&H1(t,r),kp(t)):H1(on,r.stateNode));break;case 4:n=on,i=hs,on=r.stateNode.containerInfo,hs=!0,la(t,e,r),on=n,hs=i;break;case 0:case 11:case 14:case 15:if(!wn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&lI(r,e,o),i=i.next}while(i!==n)}la(t,e,r);break;case 1:if(!wn&&(ad(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){ir(r,e,a)}la(t,e,r);break;case 21:la(t,e,r);break;case 22:r.mode&1?(wn=(n=wn)||r.memoizedState!==null,la(t,e,r),wn=n):la(t,e,r);break;default:la(t,e,r)}}function n5(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Mhe),e.forEach(function(n){var i=Vhe.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function ss(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:on=a.stateNode,hs=!1;break e;case 3:on=a.stateNode.containerInfo,hs=!0;break e;case 4:on=a.stateNode.containerInfo,hs=!0;break e}a=a.return}if(on===null)throw Error(ae(160));Pte(s,o,i),on=null,hs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){ir(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ite(e,t),e=e.sibling}function Ite(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ss(e,t),Ps(t),n&4){try{ep(3,t,t.return),Q0(3,t)}catch(g){ir(t,t.return,g)}try{ep(5,t,t.return)}catch(g){ir(t,t.return,g)}}break;case 1:ss(e,t),Ps(t),n&512&&r!==null&&ad(r,r.return);break;case 5:if(ss(e,t),Ps(t),n&512&&r!==null&&ad(r,r.return),t.flags&32){var i=t.stateNode;try{Ep(i,"")}catch(g){ir(t,t.return,g)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&eee(i,s),AP(a,o);var u=AP(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?see(i,h):d==="dangerouslySetInnerHTML"?nee(i,h):d==="children"?Ep(i,h):oM(i,d,h,u)}switch(a){case"input":OP(i,s);break;case"textarea":tee(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?yd(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?yd(i,!!s.multiple,s.defaultValue,!0):yd(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ip]=s}catch(g){ir(t,t.return,g)}}break;case 6:if(ss(e,t),Ps(t),n&4){if(t.stateNode===null)throw Error(ae(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){ir(t,t.return,g)}}break;case 3:if(ss(e,t),Ps(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{kp(e.containerInfo)}catch(g){ir(t,t.return,g)}break;case 4:ss(e,t),Ps(t);break;case 13:ss(e,t),Ps(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(qM=hr())),n&4&&n5(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(wn=(u=wn)||d,ss(e,t),wn=u):ss(e,t),Ps(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Ce=t,d=t.child;d!==null;){for(h=Ce=d;Ce!==null;){switch(f=Ce,p=f.child,f.tag){case 0:case 11:case 14:case 15:ep(4,f,f.return);break;case 1:ad(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){ir(n,r,g)}}break;case 5:ad(f,f.return);break;case 22:if(f.memoizedState!==null){s5(h);continue}}p!==null?(p.return=f,Ce=p):s5(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=iee("display",o))}catch(g){ir(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){ir(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ss(e,t),Ps(t),n&4&&n5(t);break;case 21:break;default:ss(e,t),Ps(t)}}function Ps(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Ote(r)){var n=r;break e}r=r.return}throw Error(ae(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Ep(i,""),n.flags&=-33);var s=r5(t);dI(t,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=r5(t);uI(t,a,o);break;default:throw Error(ae(161))}}catch(l){ir(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Dhe(t,e,r){Ce=t,Rte(t)}function Rte(t,e,r){for(var n=(t.mode&1)!==0;Ce!==null;){var i=Ce,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||Kg;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||wn;a=Kg;var u=wn;if(Kg=o,(wn=l)&&!u)for(Ce=i;Ce!==null;)o=Ce,l=o.child,o.tag===22&&o.memoizedState!==null?o5(i):l!==null?(l.return=o,Ce=l):o5(i);for(;s!==null;)Ce=s,Rte(s),s=s.sibling;Ce=i,Kg=a,wn=u}i5(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ce=s):i5(t)}}function i5(t){for(;Ce!==null;){var e=Ce;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:wn||Q0(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!wn)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:cs(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&z4(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}z4(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&kp(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}wn||e.flags&512&&cI(e)}catch(f){ir(e,e.return,f)}}if(e===t){Ce=null;break}if(r=e.sibling,r!==null){r.return=e.return,Ce=r;break}Ce=e.return}}function s5(t){for(;Ce!==null;){var e=Ce;if(e===t){Ce=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Ce=r;break}Ce=e.return}}function o5(t){for(;Ce!==null;){var e=Ce;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Q0(4,e)}catch(l){ir(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){ir(e,i,l)}}var s=e.return;try{cI(e)}catch(l){ir(e,s,l)}break;case 5:var o=e.return;try{cI(e)}catch(l){ir(e,o,l)}}}catch(l){ir(e,e.return,l)}if(e===t){Ce=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ce=a;break}Ce=e.return}}var $he=Math.ceil,yv=Xo.ReactCurrentDispatcher,$M=Xo.ReactCurrentOwner,Ui=Xo.ReactCurrentBatchConfig,mt=0,Ur=null,br=null,un=0,yi=0,ld=Nl(0),Ar=0,Fp=null,Ac=0,X0=0,FM=0,tp=null,Zn=null,qM=0,eh=1/0,bo=null,vv=!1,hI=null,Ja=null,Gg=!1,Ba=null,bv=0,rp=0,fI=null,Iy=-1,Ry=0;function Fn(){return mt&6?hr():Iy!==-1?Iy:Iy=hr()}function Za(t){return t.mode&1?mt&2&&un!==0?un&-un:xhe.transition!==null?(Ry===0&&(Ry=yee()),Ry):(t=St,t!==0||(t=window.event,t=t===void 0?16:_ee(t.type)),t):1}function xs(t,e,r,n){if(50<rp)throw rp=0,fI=null,Error(ae(185));_m(t,r,n),(!(mt&2)||t!==Ur)&&(t===Ur&&(!(mt&2)&&(X0|=r),Ar===4&&Ca(t,un)),oi(t,n),r===1&&mt===0&&!(e.mode&1)&&(eh=hr()+500,K0&&Cl()))}function oi(t,e){var r=t.callbackNode;xde(t,e);var n=rv(t,t===Ur?un:0);if(n===0)r!==null&&m4(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&m4(r),e===1)t.tag===0?bhe(a5.bind(null,t)):Wee(a5.bind(null,t)),mhe(function(){!(mt&6)&&Cl()}),r=null;else{switch(vee(n)){case 1:r=dM;break;case 4:r=mee;break;case 16:r=tv;break;case 536870912:r=gee;break;default:r=tv}r=Bte(r,Mte.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Mte(t,e){if(Iy=-1,Ry=0,mt&6)throw Error(ae(327));var r=t.callbackNode;if(Sd()&&t.callbackNode!==r)return null;var n=rv(t,t===Ur?un:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=xv(t,n);else{e=n;var i=mt;mt|=2;var s=Dte();(Ur!==t||un!==e)&&(bo=null,eh=hr()+500,vc(t,e));do try{Lhe();break}catch(a){Ate(t,a)}while(!0);_M(),yv.current=s,mt=i,br!==null?e=0:(Ur=null,un=0,e=Ar)}if(e!==0){if(e===2&&(i=LP(t),i!==0&&(n=i,e=pI(t,i))),e===1)throw r=Fp,vc(t,0),Ca(t,n),oi(t,hr()),r;if(e===6)Ca(t,n);else{if(i=t.current.alternate,!(n&30)&&!Fhe(i)&&(e=xv(t,n),e===2&&(s=LP(t),s!==0&&(n=s,e=pI(t,s))),e===1))throw r=Fp,vc(t,0),Ca(t,n),oi(t,hr()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(ae(345));case 2:Ul(t,Zn,bo);break;case 3:if(Ca(t,n),(n&130023424)===n&&(e=qM+500-hr(),10<e)){if(rv(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Fn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=GP(Ul.bind(null,t,Zn,bo),e);break}Ul(t,Zn,bo);break;case 4:if(Ca(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-bs(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=hr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*$he(n/1960))-n,10<n){t.timeoutHandle=GP(Ul.bind(null,t,Zn,bo),n);break}Ul(t,Zn,bo);break;case 5:Ul(t,Zn,bo);break;default:throw Error(ae(329))}}}return oi(t,hr()),t.callbackNode===r?Mte.bind(null,t):null}function pI(t,e){var r=tp;return t.current.memoizedState.isDehydrated&&(vc(t,e).flags|=256),t=xv(t,e),t!==2&&(e=Zn,Zn=r,e!==null&&mI(e)),t}function mI(t){Zn===null?Zn=t:Zn.push.apply(Zn,t)}function Fhe(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!ws(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ca(t,e){for(e&=~FM,e&=~X0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-bs(e),n=1<<r;t[r]=-1,e&=~n}}function a5(t){if(mt&6)throw Error(ae(327));Sd();var e=rv(t,0);if(!(e&1))return oi(t,hr()),null;var r=xv(t,e);if(t.tag!==0&&r===2){var n=LP(t);n!==0&&(e=n,r=pI(t,n))}if(r===1)throw r=Fp,vc(t,0),Ca(t,e),oi(t,hr()),r;if(r===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ul(t,Zn,bo),oi(t,hr()),null}function LM(t,e){var r=mt;mt|=1;try{return t(e)}finally{mt=r,mt===0&&(eh=hr()+500,K0&&Cl())}}function Dc(t){Ba!==null&&Ba.tag===0&&!(mt&6)&&Sd();var e=mt;mt|=1;var r=Ui.transition,n=St;try{if(Ui.transition=null,St=1,t)return t()}finally{St=n,Ui.transition=r,mt=e,!(mt&6)&&Cl()}}function BM(){yi=ld.current,zt(ld)}function vc(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,phe(r)),br!==null)for(r=br.return;r!==null;){var n=r;switch(wM(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&av();break;case 3:Jd(),zt(ii),zt(_n),OM();break;case 5:TM(n);break;case 4:Jd();break;case 13:zt(Ht);break;case 19:zt(Ht);break;case 10:NM(n.type._context);break;case 22:case 23:BM()}r=r.return}if(Ur=t,br=t=el(t.current,null),un=yi=e,Ar=0,Fp=null,FM=X0=Ac=0,Zn=tp=null,Ql!==null){for(e=0;e<Ql.length;e++)if(r=Ql[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}Ql=null}return t}function Ate(t,e){do{var r=br;try{if(_M(),Ty.current=gv,mv){for(var n=Gt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}mv=!1}if(Mc=0,zr=Mr=Gt=null,Zf=!1,Ap=0,$M.current=null,r===null||r.return===null){Ar=1,Fp=e,br=null;break}e:{var s=t,o=r.return,a=r,l=e;if(e=un,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=G4(o);if(p!==null){p.flags&=-257,Y4(p,o,a,s,e),p.mode&1&&K4(s,u,e),e=p,l=u;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){K4(s,u,e),zM();break e}l=Error(ae(426))}}else if(Vt&&a.mode&1){var y=G4(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Y4(y,o,a,s,e),SM(Zd(l,a));break e}}s=l=Zd(l,a),Ar!==4&&(Ar=2),tp===null?tp=[s]:tp.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=vte(s,l,e);B4(s,v);break e;case 1:a=l;var b=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ja===null||!Ja.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=bte(s,a,e);B4(s,x);break e}}s=s.return}while(s!==null)}Fte(r)}catch(S){e=S,br===r&&r!==null&&(br=r=r.return);continue}break}while(!0)}function Dte(){var t=yv.current;return yv.current=gv,t===null?gv:t}function zM(){(Ar===0||Ar===3||Ar===2)&&(Ar=4),Ur===null||!(Ac&268435455)&&!(X0&268435455)||Ca(Ur,un)}function xv(t,e){var r=mt;mt|=2;var n=Dte();(Ur!==t||un!==e)&&(bo=null,vc(t,e));do try{qhe();break}catch(i){Ate(t,i)}while(!0);if(_M(),mt=r,yv.current=n,br!==null)throw Error(ae(261));return Ur=null,un=0,Ar}function qhe(){for(;br!==null;)$te(br)}function Lhe(){for(;br!==null&&!dde();)$te(br)}function $te(t){var e=Lte(t.alternate,t,yi);t.memoizedProps=t.pendingProps,e===null?Fte(t):br=e,$M.current=null}function Fte(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Rhe(r,e),r!==null){r.flags&=32767,br=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ar=6,br=null;return}}else if(r=Ihe(r,e,yi),r!==null){br=r;return}if(e=e.sibling,e!==null){br=e;return}br=e=t}while(e!==null);Ar===0&&(Ar=5)}function Ul(t,e,r){var n=St,i=Ui.transition;try{Ui.transition=null,St=1,Bhe(t,e,r,n)}finally{Ui.transition=i,St=n}return null}function Bhe(t,e,r,n){do Sd();while(Ba!==null);if(mt&6)throw Error(ae(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(wde(t,s),t===Ur&&(br=Ur=null,un=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Gg||(Gg=!0,Bte(tv,function(){return Sd(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Ui.transition,Ui.transition=null;var o=St;St=1;var a=mt;mt|=4,$M.current=null,Ahe(t,r),Ite(r,t),ahe(HP),nv=!!UP,HP=UP=null,t.current=r,Dhe(r),hde(),mt=a,St=o,Ui.transition=s}else t.current=r;if(Gg&&(Gg=!1,Ba=t,bv=i),s=t.pendingLanes,s===0&&(Ja=null),mde(r.stateNode),oi(t,hr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(vv)throw vv=!1,t=hI,hI=null,t;return bv&1&&t.tag!==0&&Sd(),s=t.pendingLanes,s&1?t===fI?rp++:(rp=0,fI=t):rp=0,Cl(),null}function Sd(){if(Ba!==null){var t=vee(bv),e=Ui.transition,r=St;try{if(Ui.transition=null,St=16>t?16:t,Ba===null)var n=!1;else{if(t=Ba,Ba=null,bv=0,mt&6)throw Error(ae(331));var i=mt;for(mt|=4,Ce=t.current;Ce!==null;){var s=Ce,o=s.child;if(Ce.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Ce=u;Ce!==null;){var d=Ce;switch(d.tag){case 0:case 11:case 15:ep(8,d,s)}var h=d.child;if(h!==null)h.return=d,Ce=h;else for(;Ce!==null;){d=Ce;var f=d.sibling,p=d.return;if(Tte(d),d===u){Ce=null;break}if(f!==null){f.return=p,Ce=f;break}Ce=p}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}Ce=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ce=o;else e:for(;Ce!==null;){if(s=Ce,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ep(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Ce=v;break e}Ce=s.return}}var b=t.current;for(Ce=b;Ce!==null;){o=Ce;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Ce=w;else e:for(o=b;Ce!==null;){if(a=Ce,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Q0(9,a)}}catch(S){ir(a,a.return,S)}if(a===o){Ce=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,Ce=x;break e}Ce=a.return}}if(mt=i,Cl(),Ks&&typeof Ks.onPostCommitFiberRoot=="function")try{Ks.onPostCommitFiberRoot(z0,t)}catch{}n=!0}return n}finally{St=r,Ui.transition=e}}return!1}function l5(t,e,r){e=Zd(r,e),e=vte(t,e,1),t=Xa(t,e,1),e=Fn(),t!==null&&(_m(t,1,e),oi(t,e))}function ir(t,e,r){if(t.tag===3)l5(t,t,r);else for(;e!==null;){if(e.tag===3){l5(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ja===null||!Ja.has(n))){t=Zd(r,t),t=bte(e,t,1),e=Xa(e,t,1),t=Fn(),e!==null&&(_m(e,1,t),oi(e,t));break}}e=e.return}}function zhe(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Fn(),t.pingedLanes|=t.suspendedLanes&r,Ur===t&&(un&r)===r&&(Ar===4||Ar===3&&(un&130023424)===un&&500>hr()-qM?vc(t,0):FM|=r),oi(t,e)}function qte(t,e){e===0&&(t.mode&1?(e=Fg,Fg<<=1,!(Fg&130023424)&&(Fg=4194304)):e=1);var r=Fn();t=Ho(t,e),t!==null&&(_m(t,e,r),oi(t,r))}function Whe(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),qte(t,r)}function Vhe(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(ae(314))}n!==null&&n.delete(e),qte(t,r)}var Lte;Lte=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||ii.current)ri=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return ri=!1,Phe(t,e,r);ri=!!(t.flags&131072)}else ri=!1,Vt&&e.flags&1048576&&Vee(e,uv,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Py(t,e),t=e.pendingProps;var i=Yd(e,_n.current);wd(e,r),i=IM(null,e,n,t,i,r);var s=RM();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,si(n)?(s=!0,lv(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,kM(e),i.updater=Y0,e.stateNode=i,i._reactInternals=e,tI(e,n,t,r),e=iI(null,e,n,!0,s,r)):(e.tag=0,Vt&&s&&xM(e),Tn(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Py(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=Hhe(n),t=cs(n,t),i){case 0:e=nI(null,e,n,t,r);break e;case 1:e=J4(null,e,n,t,r);break e;case 11:e=Q4(null,e,n,t,r);break e;case 14:e=X4(null,e,n,cs(n.type,t),r);break e}throw Error(ae(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:cs(n,i),nI(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:cs(n,i),J4(t,e,n,i,r);case 3:e:{if(Ete(e),t===null)throw Error(ae(387));n=e.pendingProps,s=e.memoizedState,i=s.element,Qee(t,e),fv(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Zd(Error(ae(423)),e),e=Z4(t,e,n,r,i);break e}else if(n!==i){i=Zd(Error(ae(424)),e),e=Z4(t,e,n,r,i);break e}else for(wi=Qa(e.stateNode.containerInfo.firstChild),Si=e,Vt=!0,fs=null,r=Gee(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Qd(),n===i){e=Ko(t,e,r);break e}Tn(t,e,n,r)}e=e.child}return e;case 5:return Xee(e),t===null&&JP(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,KP(n,i)?o=null:s!==null&&KP(n,s)&&(e.flags|=32),Ste(t,e),Tn(t,e,o,r),e.child;case 6:return t===null&&JP(e),null;case 13:return _te(t,e,r);case 4:return jM(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Xd(e,null,n,r):Tn(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:cs(n,i),Q4(t,e,n,i,r);case 7:return Tn(t,e,e.pendingProps,r),e.child;case 8:return Tn(t,e,e.pendingProps.children,r),e.child;case 12:return Tn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ft(dv,n._currentValue),n._currentValue=o,s!==null)if(ws(s.value,o)){if(s.children===i.children&&!ii.current){e=Ko(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=Io(-1,r&-r),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),ZP(s.return,r,e),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ae(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),ZP(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Tn(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,wd(e,r),i=Ji(i),n=n(i),e.flags|=1,Tn(t,e,n,r),e.child;case 14:return n=e.type,i=cs(n,e.pendingProps),i=cs(n.type,i),X4(t,e,n,i,r);case 15:return xte(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:cs(n,i),Py(t,e),e.tag=1,si(n)?(t=!0,lv(e)):t=!1,wd(e,r),yte(e,n,i),tI(e,n,i,r),iI(null,e,n,!0,t,r);case 19:return Nte(t,e,r);case 22:return wte(t,e,r)}throw Error(ae(156,e.tag))};function Bte(t,e){return pee(t,e)}function Uhe(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vi(t,e,r,n){return new Uhe(t,e,r,n)}function WM(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Hhe(t){if(typeof t=="function")return WM(t)?1:0;if(t!=null){if(t=t.$$typeof,t===lM)return 11;if(t===cM)return 14}return 2}function el(t,e){var r=t.alternate;return r===null?(r=Vi(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function My(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")WM(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ju:return bc(r.children,i,s,e);case aM:o=8,i|=8;break;case NP:return t=Vi(12,r,e,i|2),t.elementType=NP,t.lanes=s,t;case CP:return t=Vi(13,r,e,i),t.elementType=CP,t.lanes=s,t;case kP:return t=Vi(19,r,e,i),t.elementType=kP,t.lanes=s,t;case XZ:return J0(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case YZ:o=10;break e;case QZ:o=9;break e;case lM:o=11;break e;case cM:o=14;break e;case ya:o=16,n=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=Vi(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function bc(t,e,r,n){return t=Vi(7,t,n,e),t.lanes=r,t}function J0(t,e,r,n){return t=Vi(22,t,n,e),t.elementType=XZ,t.lanes=r,t.stateNode={isHidden:!1},t}function ex(t,e,r){return t=Vi(6,t,null,e),t.lanes=r,t}function tx(t,e,r){return e=Vi(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Khe(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=A1(0),this.expirationTimes=A1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=A1(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function VM(t,e,r,n,i,s,o,a,l){return t=new Khe(t,e,r,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Vi(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},kM(s),t}function Ghe(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xu,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function zte(t){if(!t)return ml;t=t._reactInternals;e:{if(ou(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(si(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var r=t.type;if(si(r))return zee(t,r,e)}return e}function Wte(t,e,r,n,i,s,o,a,l){return t=VM(r,n,!0,t,i,s,o,a,l),t.context=zte(null),r=t.current,n=Fn(),i=Za(r),s=Io(n,i),s.callback=e??null,Xa(r,s,i),t.current.lanes=i,_m(t,i,n),oi(t,n),t}function Z0(t,e,r,n){var i=e.current,s=Fn(),o=Za(i);return r=zte(r),e.context===null?e.context=r:e.pendingContext=r,e=Io(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Xa(i,e,o),t!==null&&(xs(t,i,o,s),jy(t,i,o)),o}function wv(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function c5(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function UM(t,e){c5(t,e),(t=t.alternate)&&c5(t,e)}function Yhe(){return null}var Vte=typeof reportError=="function"?reportError:function(t){console.error(t)};function HM(t){this._internalRoot=t}eb.prototype.render=HM.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));Z0(t,e,null,null)};eb.prototype.unmount=HM.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Dc(function(){Z0(null,t,null,null)}),e[Uo]=null}};function eb(t){this._internalRoot=t}eb.prototype.unstable_scheduleHydration=function(t){if(t){var e=wee();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Na.length&&e!==0&&e<Na[r].priority;r++);Na.splice(r,0,t),r===0&&Eee(t)}};function KM(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function tb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function u5(){}function Qhe(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=wv(o);s.call(u)}}var o=Wte(e,n,t,0,null,!1,!1,"",u5);return t._reactRootContainer=o,t[Uo]=o.current,Op(t.nodeType===8?t.parentNode:t),Dc(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var u=wv(l);a.call(u)}}var l=VM(t,0,!1,null,null,!1,!1,"",u5);return t._reactRootContainer=l,t[Uo]=l.current,Op(t.nodeType===8?t.parentNode:t),Dc(function(){Z0(e,l,r,n)}),l}function rb(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=wv(o);a.call(l)}}Z0(e,o,t,i)}else o=Qhe(r,e,t,i,n);return wv(o)}bee=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Ff(e.pendingLanes);r!==0&&(hM(e,r|1),oi(e,hr()),!(mt&6)&&(eh=hr()+500,Cl()))}break;case 13:Dc(function(){var n=Ho(t,1);if(n!==null){var i=Fn();xs(n,t,1,i)}}),UM(t,1)}};fM=function(t){if(t.tag===13){var e=Ho(t,134217728);if(e!==null){var r=Fn();xs(e,t,134217728,r)}UM(t,134217728)}};xee=function(t){if(t.tag===13){var e=Za(t),r=Ho(t,e);if(r!==null){var n=Fn();xs(r,t,e,n)}UM(t,e)}};wee=function(){return St};See=function(t,e){var r=St;try{return St=t,e()}finally{St=r}};$P=function(t,e,r){switch(e){case"input":if(OP(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=H0(n);if(!i)throw Error(ae(90));ZZ(n),OP(n,i)}}}break;case"textarea":tee(t,r);break;case"select":e=r.value,e!=null&&yd(t,!!r.multiple,e,!1)}};lee=LM;cee=Dc;var Xhe={usingClientEntryPoint:!1,Events:[Cm,rd,H0,oee,aee,LM]},wf={findFiberByHostInstance:Yl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Jhe={bundleType:wf.bundleType,version:wf.version,rendererPackageName:wf.rendererPackageName,rendererConfig:wf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=hee(t),t===null?null:t.stateNode},findFiberByHostInstance:wf.findFiberByHostInstance||Yhe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yg.isDisabled&&Yg.supportsFiber)try{z0=Yg.inject(Jhe),Ks=Yg}catch{}}Ni.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xhe;Ni.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!KM(e))throw Error(ae(200));return Ghe(t,e,null,r)};Ni.createRoot=function(t,e){if(!KM(t))throw Error(ae(299));var r=!1,n="",i=Vte;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=VM(t,1,!1,null,null,r,!1,n,i),t[Uo]=e.current,Op(t.nodeType===8?t.parentNode:t),new HM(e)};Ni.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=hee(e),t=t===null?null:t.stateNode,t};Ni.flushSync=function(t){return Dc(t)};Ni.hydrate=function(t,e,r){if(!tb(e))throw Error(ae(200));return rb(null,t,e,!0,r)};Ni.hydrateRoot=function(t,e,r){if(!KM(t))throw Error(ae(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=Vte;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=Wte(e,null,t,1,r??null,i,!1,s,o),t[Uo]=e.current,Op(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new eb(e)};Ni.render=function(t,e,r){if(!tb(e))throw Error(ae(200));return rb(null,t,e,!1,r)};Ni.unmountComponentAtNode=function(t){if(!tb(t))throw Error(ae(40));return t._reactRootContainer?(Dc(function(){rb(null,null,t,!1,function(){t._reactRootContainer=null,t[Uo]=null})}),!0):!1};Ni.unstable_batchedUpdates=LM;Ni.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!tb(r))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return rb(t,e,r,!1,n)};Ni.version="18.3.1-next-f1338f8080-20240426";function Ute(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ute)}catch(t){console.error(t)}}Ute(),UZ.exports=Ni;var Hte=UZ.exports;const Kte=Sh(Hte);var d5=Hte;EP.createRoot=d5.createRoot,EP.hydrateRoot=d5.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qp(){return qp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qp.apply(this,arguments)}var za;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(za||(za={}));const h5="popstate";function Zhe(t){t===void 0&&(t={});function e(n,i){let{pathname:s,search:o,hash:a}=n.location;return gI("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Sv(i)}return tfe(e,r,null,t)}function Yt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function GM(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function efe(){return Math.random().toString(36).substr(2,8)}function f5(t,e){return{usr:t.state,key:t.key,idx:e}}function gI(t,e,r,n){return r===void 0&&(r=null),qp({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ch(e):e,{state:r,key:e&&e.key||n||efe()})}function Sv(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Ch(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function tfe(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,a=za.Pop,l=null,u=d();u==null&&(u=0,o.replaceState(qp({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=za.Pop;let y=d(),v=y==null?null:y-u;u=y,l&&l({action:a,location:g.location,delta:v})}function f(y,v){a=za.Push;let b=gI(g.location,y,v);u=d()+1;let w=f5(b,u),x=g.createHref(b);try{o.pushState(w,"",x)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(x)}s&&l&&l({action:a,location:g.location,delta:1})}function p(y,v){a=za.Replace;let b=gI(g.location,y,v);u=d();let w=f5(b,u),x=g.createHref(b);o.replaceState(w,"",x),s&&l&&l({action:a,location:g.location,delta:0})}function m(y){let v=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof y=="string"?y:Sv(y);return b=b.replace(/ $/,"%20"),Yt(v,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,v)}let g={get action(){return a},get location(){return t(i,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(h5,h),l=y,()=>{i.removeEventListener(h5,h),l=null}},createHref(y){return e(i,y)},createURL:m,encodeLocation(y){let v=m(y);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:p,go(y){return o.go(y)}};return g}var p5;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(p5||(p5={}));function rfe(t,e,r){return r===void 0&&(r="/"),nfe(t,e,r)}function nfe(t,e,r,n){let i=typeof e=="string"?Ch(e):e,s=th(i.pathname||"/",r);if(s==null)return null;let o=Gte(t);ife(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=mfe(s);a=ffe(o[l],u)}return a}function Gte(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Yt(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=tl([n,l.relativePath]),d=r.concat(l);s.children&&s.children.length>0&&(Yt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Gte(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:dfe(u,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of Yte(s.path))i(s,o,l)}),e}function Yte(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let o=Yte(n.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function ife(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:hfe(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const sfe=/^:[\w-]+$/,ofe=3,afe=2,lfe=1,cfe=10,ufe=-2,m5=t=>t==="*";function dfe(t,e){let r=t.split("/"),n=r.length;return r.some(m5)&&(n+=ufe),e&&(n+=afe),r.filter(i=>!m5(i)).reduce((i,s)=>i+(sfe.test(s)?ofe:s===""?lfe:cfe),n)}function hfe(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function ffe(t,e,r){let{routesMeta:n}=t,i={},s="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],u=a===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=yI({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),f=l.route;if(!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:tl([s,h.pathname]),pathnameBase:xfe(tl([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=tl([s,h.pathnameBase]))}return o}function yI(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=pfe(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let g=a[h]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const m=a[h];return p&&!m?u[f]=void 0:u[f]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function pfe(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),GM(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function mfe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return GM(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function th(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const gfe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yfe=t=>gfe.test(t);function vfe(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?Ch(t):t,s;if(r)if(yfe(r))s=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),GM(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?s=g5(r.substring(1),"/"):s=g5(r,e)}else s=e;return{pathname:s,search:wfe(n),hash:Sfe(i)}}function g5(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function rx(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function bfe(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function YM(t,e){let r=bfe(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function QM(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=Ch(t):(i=qp({},t),Yt(!i.pathname||!i.pathname.includes("?"),rx("?","pathname","search",i)),Yt(!i.pathname||!i.pathname.includes("#"),rx("#","pathname","hash",i)),Yt(!i.search||!i.search.includes("#"),rx("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=r;else{let h=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=vfe(i,a),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const tl=t=>t.join("/").replace(/\/\/+/g,"/"),xfe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),wfe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Sfe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Efe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Qte=["post","put","patch","delete"];new Set(Qte);const _fe=["get",...Qte];new Set(_fe);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lp(){return Lp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Lp.apply(this,arguments)}const nb=C.createContext(null),Xte=C.createContext(null),Jo=C.createContext(null),ib=C.createContext(null),Zo=C.createContext({outlet:null,matches:[],isDataRoute:!1}),Jte=C.createContext(null);function Nfe(t,e){let{relative:r}=e===void 0?{}:e;kh()||Yt(!1);let{basename:n,navigator:i}=C.useContext(Jo),{hash:s,pathname:o,search:a}=sb(t,{relative:r}),l=o;return n!=="/"&&(l=o==="/"?n:tl([n,o])),i.createHref({pathname:l,search:a,hash:s})}function kh(){return C.useContext(ib)!=null}function ea(){return kh()||Yt(!1),C.useContext(ib).location}function Zte(t){C.useContext(Jo).static||C.useLayoutEffect(t)}function Un(){let{isDataRoute:t}=C.useContext(Zo);return t?Ffe():Cfe()}function Cfe(){kh()||Yt(!1);let t=C.useContext(nb),{basename:e,future:r,navigator:n}=C.useContext(Jo),{matches:i}=C.useContext(Zo),{pathname:s}=ea(),o=JSON.stringify(YM(i,r.v7_relativeSplatPath)),a=C.useRef(!1);return Zte(()=>{a.current=!0}),C.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){n.go(u);return}let h=QM(u,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:tl([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,o,s,t])}function jh(){let{matches:t}=C.useContext(Zo),e=t[t.length-1];return e?e.params:{}}function sb(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=C.useContext(Jo),{matches:i}=C.useContext(Zo),{pathname:s}=ea(),o=JSON.stringify(YM(i,n.v7_relativeSplatPath));return C.useMemo(()=>QM(t,JSON.parse(o),s,r==="path"),[t,o,s,r])}function kfe(t,e){return jfe(t,e)}function jfe(t,e,r,n){kh()||Yt(!1);let{navigator:i}=C.useContext(Jo),{matches:s}=C.useContext(Zo),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=ea(),d;if(e){var h;let y=typeof e=="string"?Ch(e):e;l==="/"||(h=y.pathname)!=null&&h.startsWith(l)||Yt(!1),d=y}else d=u;let f=d.pathname||"/",p=f;if(l!=="/"){let y=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let m=rfe(t,{pathname:p}),g=Rfe(m&&m.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:tl([l,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:tl([l,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,r,n);return e&&g?C.createElement(ib.Provider,{value:{location:Lp({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:za.Pop}},g):g}function Tfe(){let t=$fe(),e=Efe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),r?C.createElement("pre",{style:i},r):null,null)}const Ofe=C.createElement(Tfe,null);class Pfe extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?C.createElement(Zo.Provider,{value:this.props.routeContext},C.createElement(Jte.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ife(t){let{routeContext:e,match:r,children:n}=t,i=C.useContext(nb);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),C.createElement(Zo.Provider,{value:e},n)}function Rfe(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if(!r)return null;if(r.errors)t=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,a=(i=r)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Yt(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:p}=r,m=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||m){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,m=!1,g=null,y=null;r&&(p=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||Ofe,l&&(u<0&&f===0?(qfe("route-fallback"),m=!0,y=null):u===f&&(m=!0,y=h.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,f+1)),b=()=>{let w;return p?w=g:m?w=y:h.route.Component?w=C.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,C.createElement(Ife,{match:h,routeContext:{outlet:d,matches:v,isDataRoute:r!=null},children:w})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?C.createElement(Pfe,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):b()},null)}var ere=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ere||{}),tre=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(tre||{});function Mfe(t){let e=C.useContext(nb);return e||Yt(!1),e}function Afe(t){let e=C.useContext(Xte);return e||Yt(!1),e}function Dfe(t){let e=C.useContext(Zo);return e||Yt(!1),e}function rre(t){let e=Dfe(),r=e.matches[e.matches.length-1];return r.route.id||Yt(!1),r.route.id}function $fe(){var t;let e=C.useContext(Jte),r=Afe(),n=rre();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function Ffe(){let{router:t}=Mfe(ere.UseNavigateStable),e=rre(tre.UseNavigateStable),r=C.useRef(!1);return Zte(()=>{r.current=!0}),C.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Lp({fromRouteId:e},s)))},[t,e])}const y5={};function qfe(t,e,r){y5[t]||(y5[t]=!0)}function Lfe(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function nre(t){let{to:e,replace:r,state:n,relative:i}=t;kh()||Yt(!1);let{future:s,static:o}=C.useContext(Jo),{matches:a}=C.useContext(Zo),{pathname:l}=ea(),u=Un(),d=QM(e,YM(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(d);return C.useEffect(()=>u(JSON.parse(h),{replace:r,state:n,relative:i}),[u,h,i,r,n]),null}function Rr(t){Yt(!1)}function Bfe(t){let{basename:e="/",children:r=null,location:n,navigationType:i=za.Pop,navigator:s,static:o=!1,future:a}=t;kh()&&Yt(!1);let l=e.replace(/^\/*/,"/"),u=C.useMemo(()=>({basename:l,navigator:s,static:o,future:Lp({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof n=="string"&&(n=Ch(n));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:m="default"}=n,g=C.useMemo(()=>{let y=th(d,l);return y==null?null:{location:{pathname:y,search:h,hash:f,state:p,key:m},navigationType:i}},[l,d,h,f,p,m,i]);return g==null?null:C.createElement(Jo.Provider,{value:u},C.createElement(ib.Provider,{children:r,value:g}))}function v5(t){let{children:e,location:r}=t;return kfe(vI(e),r)}new Promise(()=>{});function vI(t,e){e===void 0&&(e=[]);let r=[];return C.Children.forEach(t,(n,i)=>{if(!C.isValidElement(n))return;let s=[...e,i];if(n.type===C.Fragment){r.push.apply(r,vI(n.props.children,s));return}n.type!==Rr&&Yt(!1),!n.props.index||!n.props.children||Yt(!1);let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=vI(n.props.children,s)),r.push(o)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ev(){return Ev=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ev.apply(this,arguments)}function ire(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function zfe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Wfe(t,e){return t.button===0&&(!e||e==="_self")&&!zfe(t)}function bI(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function Vfe(t,e){let r=bI(t);return e&&e.forEach((n,i)=>{r.has(i)||e.getAll(i).forEach(s=>{r.append(i,s)})}),r}const Ufe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Hfe=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Kfe="6";try{window.__reactRouterVersion=Kfe}catch{}const Gfe=C.createContext({isTransitioning:!1}),Yfe="startTransition",b5=zue[Yfe];function Qfe(t){let{basename:e,children:r,future:n,window:i}=t,s=C.useRef();s.current==null&&(s.current=Zhe({window:i,v5Compat:!0}));let o=s.current,[a,l]=C.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=C.useCallback(h=>{u&&b5?b5(()=>l(h)):l(h)},[l,u]);return C.useLayoutEffect(()=>o.listen(d),[o,d]),C.useEffect(()=>Lfe(n),[n]),C.createElement(Bfe,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:o,future:n})}const Xfe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Jfe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qe=C.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:d,viewTransition:h}=e,f=ire(e,Ufe),{basename:p}=C.useContext(Jo),m,g=!1;if(typeof u=="string"&&Jfe.test(u)&&(m=u,Xfe))try{let w=new URL(window.location.href),x=u.startsWith("//")?new URL(w.protocol+u):new URL(u),S=th(x.pathname,p);x.origin===w.origin&&S!=null?u=S+x.search+x.hash:g=!0}catch{}let y=Nfe(u,{relative:i}),v=tpe(u,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:h});function b(w){n&&n(w),w.defaultPrevented||v(w)}return C.createElement("a",Ev({},f,{href:m||y,onClick:g||s?n:b,ref:r,target:l}))}),Zfe=C.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:u,children:d}=e,h=ire(e,Hfe),f=sb(l,{relative:h.relative}),p=ea(),m=C.useContext(Xte),{navigator:g,basename:y}=C.useContext(Jo),v=m!=null&&npe(f)&&u===!0,b=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,w=p.pathname,x=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;i||(w=w.toLowerCase(),x=x?x.toLowerCase():null,b=b.toLowerCase()),x&&y&&(x=th(x,y)||x);const S=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let E=w===b||!o&&w.startsWith(b)&&w.charAt(S)==="/",N=x!=null&&(x===b||!o&&x.startsWith(b)&&x.charAt(b.length)==="/"),_={isActive:E,isPending:N,isTransitioning:v},k=E?n:void 0,j;typeof s=="function"?j=s(_):j=[s,E?"active":null,N?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let T=typeof a=="function"?a(_):a;return C.createElement(qe,Ev({},h,{"aria-current":k,className:j,ref:r,style:T,to:l,viewTransition:u}),typeof d=="function"?d(_):d)});var xI;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(xI||(xI={}));var x5;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(x5||(x5={}));function epe(t){let e=C.useContext(nb);return e||Yt(!1),e}function tpe(t,e){let{target:r,replace:n,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Un(),u=ea(),d=sb(t,{relative:o});return C.useCallback(h=>{if(Wfe(h,r)){h.preventDefault();let f=n!==void 0?n:Sv(u)===Sv(d);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,d,n,i,r,t,s,o,a])}function rpe(t){let e=C.useRef(bI(t)),r=C.useRef(!1),n=ea(),i=C.useMemo(()=>Vfe(n.search,r.current?null:e.current),[n.search]),s=Un(),o=C.useCallback((a,l)=>{const u=bI(typeof a=="function"?a(i):a);r.current=!0,s("?"+u,l)},[s,i]);return[i,o]}function npe(t,e){e===void 0&&(e={});let r=C.useContext(Gfe);r==null&&Yt(!1);let{basename:n}=epe(xI.useViewTransitionState),i=sb(t,{relative:e.relative});if(!r.isTransitioning)return!1;let s=th(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=th(r.nextLocation.pathname,n)||r.nextLocation.pathname;return yI(i.pathname,o)!=null||yI(i.pathname,s)!=null}var au=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ipe={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Oa,ZR,SZ,spe=(SZ=class{constructor(){Ne(this,Oa,ipe);Ne(this,ZR,!1)}setTimeoutProvider(t){he(this,Oa,t)}setTimeout(t,e){return R(this,Oa).setTimeout(t,e)}clearTimeout(t){R(this,Oa).clearTimeout(t)}setInterval(t,e){return R(this,Oa).setInterval(t,e)}clearInterval(t){R(this,Oa).clearInterval(t)}},Oa=new WeakMap,ZR=new WeakMap,SZ),Jl=new spe;function ope(t){setTimeout(t,0)}var $c=typeof window>"u"||"Deno"in globalThis;function xn(){}function ape(t,e){return typeof t=="function"?t(e):t}function wI(t){return typeof t=="number"&&t>=0&&t!==1/0}function sre(t,e){return Math.max(t+(e||0)-Date.now(),0)}function rl(t,e){return typeof t=="function"?t(e):t}function Di(t,e){return typeof t=="function"?t(e):t}function w5(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(n){if(e.queryHash!==XM(o,e.options))return!1}else if(!Bp(e.queryKey,o))return!1}if(r!=="all"){const l=e.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function S5(t,e){const{exact:r,status:n,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(r){if(Fc(e.options.mutationKey)!==Fc(s))return!1}else if(!Bp(e.options.mutationKey,s))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function XM(t,e){return((e==null?void 0:e.queryKeyHashFn)||Fc)(t)}function Fc(t){return JSON.stringify(t,(e,r)=>SI(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function Bp(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>Bp(t[r],e[r])):!1}var lpe=Object.prototype.hasOwnProperty;function JM(t,e){if(t===e)return t;const r=E5(t)&&E5(e);if(!r&&!(SI(t)&&SI(e)))return e;const i=(r?t:Object.keys(t)).length,s=r?e:Object.keys(e),o=s.length,a=r?new Array(o):{};let l=0;for(let u=0;u<o;u++){const d=r?u:s[u],h=t[d],f=e[d];if(h===f){a[d]=h,(r?u<i:lpe.call(t,d))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[d]=f;continue}const p=JM(h,f);a[d]=p,p===h&&l++}return i===o&&l===i?t:a}function zp(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function E5(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function SI(t){if(!_5(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!_5(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function _5(t){return Object.prototype.toString.call(t)==="[object Object]"}function cpe(t){return new Promise(e=>{Jl.setTimeout(e,t)})}function EI(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?JM(t,e):e}function upe(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function dpe(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var ZM=Symbol();function ore(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===ZM?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function eA(t,e){return typeof t=="function"?t(...e):!!t}function hpe(t,e,r){let n=!1,i;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(i??(i=e()),n||(n=!0,i.aborted?r():i.addEventListener("abort",r,{once:!0})),i)}),t}var cc,Pa,Rd,EZ,fpe=(EZ=class extends au{constructor(){super();Ne(this,cc);Ne(this,Pa);Ne(this,Rd);he(this,Rd,e=>{if(!$c&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){R(this,Pa)||this.setEventListener(R(this,Rd))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,Pa))==null||e.call(this),he(this,Pa,void 0))}setEventListener(e){var r;he(this,Rd,e),(r=R(this,Pa))==null||r.call(this),he(this,Pa,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){R(this,cc)!==e&&(he(this,cc,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof R(this,cc)=="boolean"?R(this,cc):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},cc=new WeakMap,Pa=new WeakMap,Rd=new WeakMap,EZ),tA=new fpe;function _I(){let t,e;const r=new Promise((i,s)=>{t=i,e=s});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),t(i)},r.reject=i=>{n({status:"rejected",reason:i}),e(i)},r}var ppe=ope;function mpe(){let t=[],e=0,r=a=>{a()},n=a=>{a()},i=ppe;const s=a=>{e?t.push(a):i(()=>{r(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{n(()=>{a.forEach(l=>{r(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{r=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{i=a}}}var ar=mpe(),Md,Ia,Ad,_Z,gpe=(_Z=class extends au{constructor(){super();Ne(this,Md,!0);Ne(this,Ia);Ne(this,Ad);he(this,Ad,e=>{if(!$c&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){R(this,Ia)||this.setEventListener(R(this,Ad))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,Ia))==null||e.call(this),he(this,Ia,void 0))}setEventListener(e){var r;he(this,Ad,e),(r=R(this,Ia))==null||r.call(this),he(this,Ia,e(this.setOnline.bind(this)))}setOnline(e){R(this,Md)!==e&&(he(this,Md,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return R(this,Md)}},Md=new WeakMap,Ia=new WeakMap,Ad=new WeakMap,_Z),_v=new gpe;function ype(t){return Math.min(1e3*2**t,3e4)}function are(t){return(t??"online")==="online"?_v.isOnline():!0}var NI=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function lre(t){let e=!1,r=0,n;const i=_I(),s=()=>i.status!=="pending",o=g=>{var y;if(!s()){const v=new NI(g);f(v),(y=t.onCancel)==null||y.call(t,v)}},a=()=>{e=!0},l=()=>{e=!1},u=()=>tA.isFocused()&&(t.networkMode==="always"||_v.isOnline())&&t.canRun(),d=()=>are(t.networkMode)&&t.canRun(),h=g=>{s()||(n==null||n(),i.resolve(g))},f=g=>{s()||(n==null||n(),i.reject(g))},p=()=>new Promise(g=>{var y;n=v=>{(s()||u())&&g(v)},(y=t.onPause)==null||y.call(t)}).then(()=>{var g;n=void 0,s()||(g=t.onContinue)==null||g.call(t)}),m=()=>{if(s())return;let g;const y=r===0?t.initialPromise:void 0;try{g=y??t.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(h).catch(v=>{var E;if(s())return;const b=t.retry??($c?0:3),w=t.retryDelay??ype,x=typeof w=="function"?w(r,v):w,S=b===!0||typeof b=="number"&&r<b||typeof b=="function"&&b(r,v);if(e||!S){f(v);return}r++,(E=t.onFail)==null||E.call(t,r,v),cpe(x).then(()=>u()?void 0:p()).then(()=>{e?f(v):m()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(n==null||n(),i),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?m():p().then(m),i)}}var uc,NZ,cre=(NZ=class{constructor(){Ne(this,uc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),wI(this.gcTime)&&he(this,uc,Jl.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??($c?1/0:5*60*1e3))}clearGcTimeout(){R(this,uc)&&(Jl.clearTimeout(R(this,uc)),he(this,uc,void 0))}},uc=new WeakMap,NZ),dc,Dd,Mi,hc,Br,mm,fc,us,yo,CZ,vpe=(CZ=class extends cre{constructor(e){super();Ne(this,us);Ne(this,dc);Ne(this,Dd);Ne(this,Mi);Ne(this,hc);Ne(this,Br);Ne(this,mm);Ne(this,fc);he(this,fc,!1),he(this,mm,e.defaultOptions),this.setOptions(e.options),this.observers=[],he(this,hc,e.client),he(this,Mi,R(this,hc).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,he(this,dc,C5(this.options)),this.state=e.state??R(this,dc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=R(this,Br))==null?void 0:e.promise}setOptions(e){if(this.options={...R(this,mm),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=C5(this.options);r.data!==void 0&&(this.setState(N5(r.data,r.dataUpdatedAt)),he(this,dc,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&R(this,Mi).remove(this)}setData(e,r){const n=EI(this.state.data,e,this.options);return Fe(this,us,yo).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){Fe(this,us,yo).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,i;const r=(n=R(this,Br))==null?void 0:n.promise;return(i=R(this,Br))==null||i.cancel(e),r?r.then(xn).catch(xn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(R(this,dc))}isActive(){return this.observers.some(e=>Di(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ZM||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>rl(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!sre(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=R(this,Br))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=R(this,Br))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),R(this,Mi).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(R(this,Br)&&(R(this,fc)?R(this,Br).cancel({revert:!0}):R(this,Br).cancelRetry()),this.scheduleGc()),R(this,Mi).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Fe(this,us,yo).call(this,{type:"invalidate"})}async fetch(e,r){var l,u,d,h,f,p,m,g,y,v,b,w;if(this.state.fetchStatus!=="idle"&&((l=R(this,Br))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(R(this,Br))return R(this,Br).continueRetry(),R(this,Br).promise}if(e&&this.setOptions(e),!this.options.queryFn){const x=this.observers.find(S=>S.options.queryFn);x&&this.setOptions(x.options)}const n=new AbortController,i=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(he(this,fc,!0),n.signal)})},s=()=>{const x=ore(this.options,r),E=(()=>{const N={client:R(this,hc),queryKey:this.queryKey,meta:this.meta};return i(N),N})();return he(this,fc,!1),this.options.persister?this.options.persister(x,E,this):x(E)},a=(()=>{const x={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:R(this,hc),state:this.state,fetchFn:s};return i(x),x})();(u=this.options.behavior)==null||u.onFetch(a,this),he(this,Dd,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&Fe(this,us,yo).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta}),he(this,Br,lre({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,onCancel:x=>{x instanceof NI&&x.revert&&this.setState({...R(this,Dd),fetchStatus:"idle"}),n.abort()},onFail:(x,S)=>{Fe(this,us,yo).call(this,{type:"failed",failureCount:x,error:S})},onPause:()=>{Fe(this,us,yo).call(this,{type:"pause"})},onContinue:()=>{Fe(this,us,yo).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const x=await R(this,Br).start();if(x===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(x),(p=(f=R(this,Mi).config).onSuccess)==null||p.call(f,x,this),(g=(m=R(this,Mi).config).onSettled)==null||g.call(m,x,this.state.error,this),x}catch(x){if(x instanceof NI){if(x.silent)return R(this,Br).promise;if(x.revert){if(this.state.data===void 0)throw x;return this.state.data}}throw Fe(this,us,yo).call(this,{type:"error",error:x}),(v=(y=R(this,Mi).config).onError)==null||v.call(y,x,this),(w=(b=R(this,Mi).config).onSettled)==null||w.call(b,this.state.data,x,this),x}finally{this.scheduleGc()}}},dc=new WeakMap,Dd=new WeakMap,Mi=new WeakMap,hc=new WeakMap,Br=new WeakMap,mm=new WeakMap,fc=new WeakMap,us=new WeakSet,yo=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...ure(n.data,this.options),fetchMeta:e.meta??null};case"success":const i={...n,...N5(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return he(this,Dd,e.manual?i:void 0),i;case"error":const s=e.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),ar.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),R(this,Mi).notify({query:this,type:"updated",action:e})})},CZ);function ure(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:are(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function N5(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function C5(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Yn,ut,gm,kn,pc,$d,So,Ra,ym,Fd,qd,mc,gc,Ma,Ld,vt,Lf,CI,kI,jI,TI,OI,PI,II,dre,kZ,rA=(kZ=class extends au{constructor(e,r){super();Ne(this,vt);Ne(this,Yn);Ne(this,ut);Ne(this,gm);Ne(this,kn);Ne(this,pc);Ne(this,$d);Ne(this,So);Ne(this,Ra);Ne(this,ym);Ne(this,Fd);Ne(this,qd);Ne(this,mc);Ne(this,gc);Ne(this,Ma);Ne(this,Ld,new Set);this.options=r,he(this,Yn,e),he(this,Ra,null),he(this,So,_I()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(R(this,ut).addObserver(this),k5(R(this,ut),this.options)?Fe(this,vt,Lf).call(this):this.updateResult(),Fe(this,vt,TI).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return RI(R(this,ut),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return RI(R(this,ut),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Fe(this,vt,OI).call(this),Fe(this,vt,PI).call(this),R(this,ut).removeObserver(this)}setOptions(e){const r=this.options,n=R(this,ut);if(this.options=R(this,Yn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Di(this.options.enabled,R(this,ut))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Fe(this,vt,II).call(this),R(this,ut).setOptions(this.options),r._defaulted&&!zp(this.options,r)&&R(this,Yn).getQueryCache().notify({type:"observerOptionsUpdated",query:R(this,ut),observer:this});const i=this.hasListeners();i&&j5(R(this,ut),n,this.options,r)&&Fe(this,vt,Lf).call(this),this.updateResult(),i&&(R(this,ut)!==n||Di(this.options.enabled,R(this,ut))!==Di(r.enabled,R(this,ut))||rl(this.options.staleTime,R(this,ut))!==rl(r.staleTime,R(this,ut)))&&Fe(this,vt,CI).call(this);const s=Fe(this,vt,kI).call(this);i&&(R(this,ut)!==n||Di(this.options.enabled,R(this,ut))!==Di(r.enabled,R(this,ut))||s!==R(this,Ma))&&Fe(this,vt,jI).call(this,s)}getOptimisticResult(e){const r=R(this,Yn).getQueryCache().build(R(this,Yn),e),n=this.createResult(r,e);return xpe(this,n)&&(he(this,kn,n),he(this,$d,this.options),he(this,pc,R(this,ut).state)),n}getCurrentResult(){return R(this,kn)}trackResult(e,r){return new Proxy(e,{get:(n,i)=>(this.trackProp(i),r==null||r(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&R(this,So).status==="pending"&&R(this,So).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,i))})}trackProp(e){R(this,Ld).add(e)}getCurrentQuery(){return R(this,ut)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=R(this,Yn).defaultQueryOptions(e),n=R(this,Yn).getQueryCache().build(R(this,Yn),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(e){return Fe(this,vt,Lf).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),R(this,kn)))}createResult(e,r){var k;const n=R(this,ut),i=this.options,s=R(this,kn),o=R(this,pc),a=R(this,$d),u=e!==n?e.state:R(this,gm),{state:d}=e;let h={...d},f=!1,p;if(r._optimisticResults){const j=this.hasListeners(),T=!j&&k5(e,r),P=j&&j5(e,n,r,i);(T||P)&&(h={...h,...ure(d.data,e.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:m,errorUpdatedAt:g,status:y}=h;p=h.data;let v=!1;if(r.placeholderData!==void 0&&p===void 0&&y==="pending"){let j;s!=null&&s.isPlaceholderData&&r.placeholderData===(a==null?void 0:a.placeholderData)?(j=s.data,v=!0):j=typeof r.placeholderData=="function"?r.placeholderData((k=R(this,qd))==null?void 0:k.state.data,R(this,qd)):r.placeholderData,j!==void 0&&(y="success",p=EI(s==null?void 0:s.data,j,r),f=!0)}if(r.select&&p!==void 0&&!v)if(s&&p===(o==null?void 0:o.data)&&r.select===R(this,ym))p=R(this,Fd);else try{he(this,ym,r.select),p=r.select(p),p=EI(s==null?void 0:s.data,p,r),he(this,Fd,p),he(this,Ra,null)}catch(j){he(this,Ra,j)}R(this,Ra)&&(m=R(this,Ra),p=R(this,Fd),g=Date.now(),y="error");const b=h.fetchStatus==="fetching",w=y==="pending",x=y==="error",S=w&&b,E=p!==void 0,_={status:y,fetchStatus:h.fetchStatus,isPending:w,isSuccess:y==="success",isError:x,isInitialLoading:S,isLoading:S,data:p,dataUpdatedAt:h.dataUpdatedAt,error:m,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:b,isRefetching:b&&!w,isLoadingError:x&&!E,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:x&&E,isStale:nA(e,r),refetch:this.refetch,promise:R(this,So),isEnabled:Di(r.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const j=O=>{_.status==="error"?O.reject(_.error):_.data!==void 0&&O.resolve(_.data)},T=()=>{const O=he(this,So,_.promise=_I());j(O)},P=R(this,So);switch(P.status){case"pending":e.queryHash===n.queryHash&&j(P);break;case"fulfilled":(_.status==="error"||_.data!==P.value)&&T();break;case"rejected":(_.status!=="error"||_.error!==P.reason)&&T();break}}return _}updateResult(){const e=R(this,kn),r=this.createResult(R(this,ut),this.options);if(he(this,pc,R(this,ut).state),he(this,$d,this.options),R(this,pc).data!==void 0&&he(this,qd,R(this,ut)),zp(r,e))return;he(this,kn,r);const n=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!R(this,Ld).size)return!0;const o=new Set(s??R(this,Ld));return this.options.throwOnError&&o.add("error"),Object.keys(R(this,kn)).some(a=>{const l=a;return R(this,kn)[l]!==e[l]&&o.has(l)})};Fe(this,vt,dre).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Fe(this,vt,TI).call(this)}},Yn=new WeakMap,ut=new WeakMap,gm=new WeakMap,kn=new WeakMap,pc=new WeakMap,$d=new WeakMap,So=new WeakMap,Ra=new WeakMap,ym=new WeakMap,Fd=new WeakMap,qd=new WeakMap,mc=new WeakMap,gc=new WeakMap,Ma=new WeakMap,Ld=new WeakMap,vt=new WeakSet,Lf=function(e){Fe(this,vt,II).call(this);let r=R(this,ut).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(xn)),r},CI=function(){Fe(this,vt,OI).call(this);const e=rl(this.options.staleTime,R(this,ut));if($c||R(this,kn).isStale||!wI(e))return;const n=sre(R(this,kn).dataUpdatedAt,e)+1;he(this,mc,Jl.setTimeout(()=>{R(this,kn).isStale||this.updateResult()},n))},kI=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(R(this,ut)):this.options.refetchInterval)??!1},jI=function(e){Fe(this,vt,PI).call(this),he(this,Ma,e),!($c||Di(this.options.enabled,R(this,ut))===!1||!wI(R(this,Ma))||R(this,Ma)===0)&&he(this,gc,Jl.setInterval(()=>{(this.options.refetchIntervalInBackground||tA.isFocused())&&Fe(this,vt,Lf).call(this)},R(this,Ma)))},TI=function(){Fe(this,vt,CI).call(this),Fe(this,vt,jI).call(this,Fe(this,vt,kI).call(this))},OI=function(){R(this,mc)&&(Jl.clearTimeout(R(this,mc)),he(this,mc,void 0))},PI=function(){R(this,gc)&&(Jl.clearInterval(R(this,gc)),he(this,gc,void 0))},II=function(){const e=R(this,Yn).getQueryCache().build(R(this,Yn),this.options);if(e===R(this,ut))return;const r=R(this,ut);he(this,ut,e),he(this,gm,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},dre=function(e){ar.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(R(this,kn))}),R(this,Yn).getQueryCache().notify({query:R(this,ut),type:"observerResultsUpdated"})})},kZ);function bpe(t,e){return Di(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function k5(t,e){return bpe(t,e)||t.state.data!==void 0&&RI(t,e,e.refetchOnMount)}function RI(t,e,r){if(Di(e.enabled,t)!==!1&&rl(e.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&nA(t,e)}return!1}function j5(t,e,r,n){return(t!==e||Di(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&nA(t,r)}function nA(t,e){return Di(e.enabled,t)!==!1&&t.isStaleByTime(rl(e.staleTime,t))}function xpe(t,e){return!zp(t.getCurrentResult(),e)}function T5(t){return{onFetch:(e,r)=>{var d,h,f,p,m;const n=e.options,i=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,s=((p=e.state.data)==null?void 0:p.pages)||[],o=((m=e.state.data)==null?void 0:m.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let g=!1;const y=w=>{hpe(w,()=>e.signal,()=>g=!0)},v=ore(e.options,e.fetchOptions),b=async(w,x,S)=>{if(g)return Promise.reject();if(x==null&&w.pages.length)return Promise.resolve(w);const N=(()=>{const T={client:e.client,queryKey:e.queryKey,pageParam:x,direction:S?"backward":"forward",meta:e.options.meta};return y(T),T})(),_=await v(N),{maxPages:k}=e.options,j=S?dpe:upe;return{pages:j(w.pages,_,k),pageParams:j(w.pageParams,x,k)}};if(i&&s.length){const w=i==="backward",x=w?wpe:O5,S={pages:s,pageParams:o},E=x(n,S);a=await b(S,E,w)}else{const w=t??s.length;do{const x=l===0?o[0]??n.initialPageParam:O5(n,a);if(l>0&&x==null)break;a=await b(a,x),l++}while(l<w)}return a};e.options.persister?e.fetchFn=()=>{var g,y;return(y=(g=e.options).persister)==null?void 0:y.call(g,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=u}}}function O5(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function wpe(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var vm,Fs,jn,yc,qs,pa,jZ,Spe=(jZ=class extends cre{constructor(e){super();Ne(this,qs);Ne(this,vm);Ne(this,Fs);Ne(this,jn);Ne(this,yc);he(this,vm,e.client),this.mutationId=e.mutationId,he(this,jn,e.mutationCache),he(this,Fs,[]),this.state=e.state||hre(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){R(this,Fs).includes(e)||(R(this,Fs).push(e),this.clearGcTimeout(),R(this,jn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){he(this,Fs,R(this,Fs).filter(r=>r!==e)),this.scheduleGc(),R(this,jn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){R(this,Fs).length||(this.state.status==="pending"?this.scheduleGc():R(this,jn).remove(this))}continue(){var e;return((e=R(this,yc))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,l,u,d,h,f,p,m,g,y,v,b,w,x,S,E,N,_,k;const r=()=>{Fe(this,qs,pa).call(this,{type:"continue"})},n={client:R(this,vm),meta:this.options.meta,mutationKey:this.options.mutationKey};he(this,yc,lre({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(j,T)=>{Fe(this,qs,pa).call(this,{type:"failed",failureCount:j,error:T})},onPause:()=>{Fe(this,qs,pa).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>R(this,jn).canRun(this)}));const i=this.state.status==="pending",s=!R(this,yc).canStart();try{if(i)r();else{Fe(this,qs,pa).call(this,{type:"pending",variables:e,isPaused:s}),await((a=(o=R(this,jn).config).onMutate)==null?void 0:a.call(o,e,this,n));const T=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,e,n));T!==this.state.context&&Fe(this,qs,pa).call(this,{type:"pending",context:T,variables:e,isPaused:s})}const j=await R(this,yc).start();return await((h=(d=R(this,jn).config).onSuccess)==null?void 0:h.call(d,j,e,this.state.context,this,n)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,j,e,this.state.context,n)),await((g=(m=R(this,jn).config).onSettled)==null?void 0:g.call(m,j,null,this.state.variables,this.state.context,this,n)),await((v=(y=this.options).onSettled)==null?void 0:v.call(y,j,null,e,this.state.context,n)),Fe(this,qs,pa).call(this,{type:"success",data:j}),j}catch(j){try{await((w=(b=R(this,jn).config).onError)==null?void 0:w.call(b,j,e,this.state.context,this,n))}catch(T){Promise.reject(T)}try{await((S=(x=this.options).onError)==null?void 0:S.call(x,j,e,this.state.context,n))}catch(T){Promise.reject(T)}try{await((N=(E=R(this,jn).config).onSettled)==null?void 0:N.call(E,void 0,j,this.state.variables,this.state.context,this,n))}catch(T){Promise.reject(T)}try{await((k=(_=this.options).onSettled)==null?void 0:k.call(_,void 0,j,e,this.state.context,n))}catch(T){Promise.reject(T)}throw Fe(this,qs,pa).call(this,{type:"error",error:j}),j}finally{R(this,jn).runNext(this)}}},vm=new WeakMap,Fs=new WeakMap,jn=new WeakMap,yc=new WeakMap,qs=new WeakSet,pa=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),ar.batch(()=>{R(this,Fs).forEach(n=>{n.onMutationUpdate(e)}),R(this,jn).notify({mutation:this,type:"updated",action:e})})},jZ);function hre(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Eo,ds,bm,TZ,Epe=(TZ=class extends au{constructor(e={}){super();Ne(this,Eo);Ne(this,ds);Ne(this,bm);this.config=e,he(this,Eo,new Set),he(this,ds,new Map),he(this,bm,0)}build(e,r,n){const i=new Spe({client:e,mutationCache:this,mutationId:++Ig(this,bm)._,options:e.defaultMutationOptions(r),state:n});return this.add(i),i}add(e){R(this,Eo).add(e);const r=Qg(e);if(typeof r=="string"){const n=R(this,ds).get(r);n?n.push(e):R(this,ds).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(R(this,Eo).delete(e)){const r=Qg(e);if(typeof r=="string"){const n=R(this,ds).get(r);if(n)if(n.length>1){const i=n.indexOf(e);i!==-1&&n.splice(i,1)}else n[0]===e&&R(this,ds).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=Qg(e);if(typeof r=="string"){const n=R(this,ds).get(r),i=n==null?void 0:n.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var n;const r=Qg(e);if(typeof r=="string"){const i=(n=R(this,ds).get(r))==null?void 0:n.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ar.batch(()=>{R(this,Eo).forEach(e=>{this.notify({type:"removed",mutation:e})}),R(this,Eo).clear(),R(this,ds).clear()})}getAll(){return Array.from(R(this,Eo))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>S5(r,n))}findAll(e={}){return this.getAll().filter(r=>S5(e,r))}notify(e){ar.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return ar.batch(()=>Promise.all(e.map(r=>r.continue().catch(xn))))}},Eo=new WeakMap,ds=new WeakMap,bm=new WeakMap,TZ);function Qg(t){var e;return(e=t.options.scope)==null?void 0:e.id}var _o,Aa,Qn,No,Wo,Ay,MI,OZ,_pe=(OZ=class extends au{constructor(e,r){super();Ne(this,Wo);Ne(this,_o);Ne(this,Aa);Ne(this,Qn);Ne(this,No);he(this,_o,e),this.setOptions(r),this.bindMethods(),Fe(this,Wo,Ay).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var n;const r=this.options;this.options=R(this,_o).defaultMutationOptions(e),zp(this.options,r)||R(this,_o).getMutationCache().notify({type:"observerOptionsUpdated",mutation:R(this,Qn),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Fc(r.mutationKey)!==Fc(this.options.mutationKey)?this.reset():((n=R(this,Qn))==null?void 0:n.state.status)==="pending"&&R(this,Qn).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=R(this,Qn))==null||e.removeObserver(this)}onMutationUpdate(e){Fe(this,Wo,Ay).call(this),Fe(this,Wo,MI).call(this,e)}getCurrentResult(){return R(this,Aa)}reset(){var e;(e=R(this,Qn))==null||e.removeObserver(this),he(this,Qn,void 0),Fe(this,Wo,Ay).call(this),Fe(this,Wo,MI).call(this)}mutate(e,r){var n;return he(this,No,r),(n=R(this,Qn))==null||n.removeObserver(this),he(this,Qn,R(this,_o).getMutationCache().build(R(this,_o),this.options)),R(this,Qn).addObserver(this),R(this,Qn).execute(e)}},_o=new WeakMap,Aa=new WeakMap,Qn=new WeakMap,No=new WeakMap,Wo=new WeakSet,Ay=function(){var r;const e=((r=R(this,Qn))==null?void 0:r.state)??hre();he(this,Aa,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},MI=function(e){ar.batch(()=>{var r,n,i,s,o,a,l,u;if(R(this,No)&&this.hasListeners()){const d=R(this,Aa).variables,h=R(this,Aa).context,f={client:R(this,_o),meta:this.options.meta,mutationKey:this.options.mutationKey};if((e==null?void 0:e.type)==="success"){try{(n=(r=R(this,No)).onSuccess)==null||n.call(r,e.data,d,h,f)}catch(p){Promise.reject(p)}try{(s=(i=R(this,No)).onSettled)==null||s.call(i,e.data,null,d,h,f)}catch(p){Promise.reject(p)}}else if((e==null?void 0:e.type)==="error"){try{(a=(o=R(this,No)).onError)==null||a.call(o,e.error,d,h,f)}catch(p){Promise.reject(p)}try{(u=(l=R(this,No)).onSettled)==null||u.call(l,void 0,e.error,d,h,f)}catch(p){Promise.reject(p)}}}this.listeners.forEach(d=>{d(R(this,Aa))})})},OZ);function P5(t,e){const r=new Set(e);return t.filter(n=>!r.has(n))}function Npe(t,e,r){const n=t.slice(0);return n[e]=r,n}var Bd,gi,zd,Wd,Ai,Da,xm,wm,Sm,hn,AI,DI,$I,FI,qI,PZ,Cpe=(PZ=class extends au{constructor(e,r,n){super();Ne(this,hn);Ne(this,Bd);Ne(this,gi);Ne(this,zd);Ne(this,Wd);Ne(this,Ai);Ne(this,Da);Ne(this,xm);Ne(this,wm);Ne(this,Sm,[]);he(this,Bd,e),he(this,Wd,n),he(this,zd,[]),he(this,Ai,[]),he(this,gi,[]),this.setQueries(r)}onSubscribe(){this.listeners.size===1&&R(this,Ai).forEach(e=>{e.subscribe(r=>{Fe(this,hn,FI).call(this,e,r)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,R(this,Ai).forEach(e=>{e.destroy()})}setQueries(e,r){he(this,zd,e),he(this,Wd,r),ar.batch(()=>{const n=R(this,Ai),i=Fe(this,hn,$I).call(this,R(this,zd));i.forEach(h=>h.observer.setOptions(h.defaultedQueryOptions));const s=i.map(h=>h.observer),o=s.map(h=>h.getCurrentResult()),a=n.length!==s.length,l=s.some((h,f)=>h!==n[f]),u=a||l,d=u?!0:o.some((h,f)=>{const p=R(this,gi)[f];return!p||!zp(h,p)});!u&&!d||(u&&(he(this,Sm,i),he(this,Ai,s)),he(this,gi,o),this.hasListeners()&&(u&&(P5(n,s).forEach(h=>{h.destroy()}),P5(s,n).forEach(h=>{h.subscribe(f=>{Fe(this,hn,FI).call(this,h,f)})})),Fe(this,hn,qI).call(this)))})}getCurrentResult(){return R(this,gi)}getQueries(){return R(this,Ai).map(e=>e.getCurrentQuery())}getObservers(){return R(this,Ai)}getOptimisticResult(e,r){const n=Fe(this,hn,$I).call(this,e),i=n.map(s=>s.observer.getOptimisticResult(s.defaultedQueryOptions));return[i,s=>Fe(this,hn,DI).call(this,s??i,r),()=>Fe(this,hn,AI).call(this,i,n)]}},Bd=new WeakMap,gi=new WeakMap,zd=new WeakMap,Wd=new WeakMap,Ai=new WeakMap,Da=new WeakMap,xm=new WeakMap,wm=new WeakMap,Sm=new WeakMap,hn=new WeakSet,AI=function(e,r){return r.map((n,i)=>{const s=e[i];return n.defaultedQueryOptions.notifyOnChangeProps?s:n.observer.trackResult(s,o=>{r.forEach(a=>{a.observer.trackProp(o)})})})},DI=function(e,r){return r?((!R(this,Da)||R(this,gi)!==R(this,wm)||r!==R(this,xm))&&(he(this,xm,r),he(this,wm,R(this,gi)),he(this,Da,JM(R(this,Da),r(e)))),R(this,Da)):e},$I=function(e){const r=new Map;R(this,Ai).forEach(i=>{const s=i.options.queryHash;if(!s)return;const o=r.get(s);o?o.push(i):r.set(s,[i])});const n=[];return e.forEach(i=>{var l;const s=R(this,Bd).defaultQueryOptions(i),a=((l=r.get(s.queryHash))==null?void 0:l.shift())??new rA(R(this,Bd),s);n.push({defaultedQueryOptions:s,observer:a})}),n},FI=function(e,r){const n=R(this,Ai).indexOf(e);n!==-1&&(he(this,gi,Npe(R(this,gi),n,r)),Fe(this,hn,qI).call(this))},qI=function(){var e;if(this.hasListeners()){const r=R(this,Da),n=Fe(this,hn,AI).call(this,R(this,gi),R(this,Sm)),i=Fe(this,hn,DI).call(this,n,(e=R(this,Wd))==null?void 0:e.combine);r!==i&&ar.batch(()=>{this.listeners.forEach(s=>{s(R(this,gi))})})}},PZ),Ls,IZ,kpe=(IZ=class extends au{constructor(e={}){super();Ne(this,Ls);this.config=e,he(this,Ls,new Map)}build(e,r,n){const i=r.queryKey,s=r.queryHash??XM(i,r);let o=this.get(s);return o||(o=new vpe({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){R(this,Ls).has(e.queryHash)||(R(this,Ls).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=R(this,Ls).get(e.queryHash);r&&(e.destroy(),r===e&&R(this,Ls).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ar.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return R(this,Ls).get(e)}getAll(){return[...R(this,Ls).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>w5(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>w5(e,n)):r}notify(e){ar.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){ar.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ar.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ls=new WeakMap,IZ),nr,$a,Fa,Vd,Ud,qa,Hd,Kd,RZ,jpe=(RZ=class{constructor(t={}){Ne(this,nr);Ne(this,$a);Ne(this,Fa);Ne(this,Vd);Ne(this,Ud);Ne(this,qa);Ne(this,Hd);Ne(this,Kd);he(this,nr,t.queryCache||new kpe),he(this,$a,t.mutationCache||new Epe),he(this,Fa,t.defaultOptions||{}),he(this,Vd,new Map),he(this,Ud,new Map),he(this,qa,0)}mount(){Ig(this,qa)._++,R(this,qa)===1&&(he(this,Hd,tA.subscribe(async t=>{t&&(await this.resumePausedMutations(),R(this,nr).onFocus())})),he(this,Kd,_v.subscribe(async t=>{t&&(await this.resumePausedMutations(),R(this,nr).onOnline())})))}unmount(){var t,e;Ig(this,qa)._--,R(this,qa)===0&&((t=R(this,Hd))==null||t.call(this),he(this,Hd,void 0),(e=R(this,Kd))==null||e.call(this),he(this,Kd,void 0))}isFetching(t){return R(this,nr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return R(this,$a).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=R(this,nr).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=R(this,nr).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(rl(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return R(this,nr).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),i=R(this,nr).get(n.queryHash),s=i==null?void 0:i.state.data,o=ape(e,s);if(o!==void 0)return R(this,nr).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(t,e,r){return ar.batch(()=>R(this,nr).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=R(this,nr).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=R(this,nr);ar.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=R(this,nr);return ar.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=ar.batch(()=>R(this,nr).findAll(t).map(i=>i.cancel(r)));return Promise.all(n).then(xn).catch(xn)}invalidateQueries(t,e={}){return ar.batch(()=>(R(this,nr).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=ar.batch(()=>R(this,nr).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,r);return r.throwOnError||(s=s.catch(xn)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(xn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=R(this,nr).build(this,e);return r.isStaleByTime(rl(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(xn).catch(xn)}fetchInfiniteQuery(t){return t.behavior=T5(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(xn).catch(xn)}ensureInfiniteQueryData(t){return t.behavior=T5(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return _v.isOnline()?R(this,$a).resumePausedMutations():Promise.resolve()}getQueryCache(){return R(this,nr)}getMutationCache(){return R(this,$a)}getDefaultOptions(){return R(this,Fa)}setDefaultOptions(t){he(this,Fa,t)}setQueryDefaults(t,e){R(this,Vd).set(Fc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...R(this,Vd).values()],r={};return e.forEach(n=>{Bp(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){R(this,Ud).set(Fc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...R(this,Ud).values()],r={};return e.forEach(n=>{Bp(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...R(this,Fa).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=XM(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ZM&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...R(this,Fa).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){R(this,nr).clear(),R(this,$a).clear()}},nr=new WeakMap,$a=new WeakMap,Fa=new WeakMap,Vd=new WeakMap,Ud=new WeakMap,qa=new WeakMap,Hd=new WeakMap,Kd=new WeakMap,RZ),fre=C.createContext(void 0),tt=t=>{const e=C.useContext(fre);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Tpe=({client:t,children:e})=>(C.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),c.jsx(fre.Provider,{value:t,children:e})),pre=C.createContext(!1),mre=()=>C.useContext(pre);pre.Provider;function Ope(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Ppe=C.createContext(Ope()),gre=()=>C.useContext(Ppe),yre=(t,e,r)=>{const n=r!=null&&r.state.error&&typeof t.throwOnError=="function"?eA(t.throwOnError,[r.state.error,r]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||n)&&(e.isReset()||(t.retryOnMount=!1))},vre=t=>{C.useEffect(()=>{t.clearReset()},[t])},bre=({result:t,errorResetBoundary:e,throwOnError:r,query:n,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&(i&&t.data===void 0||eA(r,[t.error,n])),xre=t=>{if(t.suspense){const r=i=>i==="static"?i:Math.max(i??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...i)=>r(n(...i)):r(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},wre=(t,e)=>t.isLoading&&t.isFetching&&!e,LI=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Nv=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function Dy({queries:t,...e},r){const n=tt(),i=mre(),s=gre(),o=C.useMemo(()=>t.map(g=>{const y=n.defaultQueryOptions(g);return y._optimisticResults=i?"isRestoring":"optimistic",y}),[t,n,i]);o.forEach(g=>{xre(g);const y=n.getQueryCache().get(g.queryHash);yre(g,s,y)}),vre(s);const[a]=C.useState(()=>new Cpe(n,o,e)),[l,u,d]=a.getOptimisticResult(o,e.combine),h=!i&&e.subscribed!==!1;C.useSyncExternalStore(C.useCallback(g=>h?a.subscribe(ar.batchCalls(g)):xn,[a,h]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),C.useEffect(()=>{a.setQueries(o,e)},[o,e,a]);const p=l.some((g,y)=>LI(o[y],g))?l.flatMap((g,y)=>{const v=o[y];if(v){const b=new rA(n,v);if(LI(v,g))return Nv(v,b,s);wre(g,i)&&Nv(v,b,s)}return[]}):[];if(p.length>0)throw Promise.all(p);const m=l.find((g,y)=>{const v=o[y];return v&&bre({result:g,errorResetBoundary:s,throwOnError:v.throwOnError,query:n.getQueryCache().get(v.queryHash),suspense:v.suspense})});if(m!=null&&m.error)throw m.error;return u(d())}function Ipe(t,e,r){var f,p,m,g;const n=mre(),i=gre(),s=tt(),o=s.defaultQueryOptions(t);(p=(f=s.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||p.call(f,o);const a=s.getQueryCache().get(o.queryHash);o._optimisticResults=n?"isRestoring":"optimistic",xre(o),yre(o,i,a),vre(i);const l=!s.getQueryCache().get(o.queryHash),[u]=C.useState(()=>new e(s,o)),d=u.getOptimisticResult(o),h=!n&&t.subscribed!==!1;if(C.useSyncExternalStore(C.useCallback(y=>{const v=h?u.subscribe(ar.batchCalls(y)):xn;return u.updateResult(),v},[u,h]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),C.useEffect(()=>{u.setOptions(o)},[o,u]),LI(o,d))throw Nv(o,u,i);if(bre({result:d,errorResetBoundary:i,throwOnError:o.throwOnError,query:a,suspense:o.suspense}))throw d.error;if((g=(m=s.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||g.call(m,o,d),o.experimental_prefetchInRender&&!$c&&wre(d,n)){const y=l?Nv(o,u,i):a==null?void 0:a.promise;y==null||y.catch(xn).finally(()=>{u.updateResult()})}return o.notifyOnChangeProps?d:u.trackResult(d)}function at(t,e){return Ipe(t,rA)}function He(t,e){const r=tt(),[n]=C.useState(()=>new _pe(r,t));C.useEffect(()=>{n.setOptions(t)},[n,t]);const i=C.useSyncExternalStore(C.useCallback(o=>n.subscribe(ar.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),s=C.useCallback((o,a)=>{n.mutate(o,a).catch(xn)},[n]);if(i.error&&eA(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}function iA(){const t=window.prmConfig||{};return C.useMemo(()=>({isLoggedIn:t.isLoggedIn||!1,userId:t.userId||null,loginUrl:t.loginUrl||"/wp-login.php",logoutUrl:t.logoutUrl||"/wp-login.php?action=logout",isLoading:!1}),[t.isLoggedIn,t.userId,t.loginUrl,t.logoutUrl])}function Sre(t,e){return function(){return t.apply(e,arguments)}}const{toString:Rpe}=Object.prototype,{getPrototypeOf:sA}=Object,{iterator:ob,toStringTag:Ere}=Symbol,ab=(t=>e=>{const r=Rpe.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),_s=t=>(t=t.toLowerCase(),e=>ab(e)===t),lb=t=>e=>typeof e===t,{isArray:Th}=Array,rh=lb("undefined");function jm(t){return t!==null&&!rh(t)&&t.constructor!==null&&!rh(t.constructor)&&ai(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const _re=_s("ArrayBuffer");function Mpe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&_re(t.buffer),e}const Ape=lb("string"),ai=lb("function"),Nre=lb("number"),Tm=t=>t!==null&&typeof t=="object",Dpe=t=>t===!0||t===!1,$y=t=>{if(ab(t)!=="object")return!1;const e=sA(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Ere in t)&&!(ob in t)},$pe=t=>{if(!Tm(t)||jm(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Fpe=_s("Date"),qpe=_s("File"),Lpe=_s("Blob"),Bpe=_s("FileList"),zpe=t=>Tm(t)&&ai(t.pipe),Wpe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ai(t.append)&&((e=ab(t))==="formdata"||e==="object"&&ai(t.toString)&&t.toString()==="[object FormData]"))},Vpe=_s("URLSearchParams"),[Upe,Hpe,Kpe,Gpe]=["ReadableStream","Request","Response","Headers"].map(_s),Ype=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Om(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),Th(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{if(jm(t))return;const s=r?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(n=0;n<o;n++)a=s[n],e.call(null,t[a],a,t)}}function Cre(t,e){if(jm(t))return null;e=e.toLowerCase();const r=Object.keys(t);let n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}const Zl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,kre=t=>!rh(t)&&t!==Zl;function BI(){const{caseless:t,skipUndefined:e}=kre(this)&&this||{},r={},n=(i,s)=>{const o=t&&Cre(r,s)||s;$y(r[o])&&$y(i)?r[o]=BI(r[o],i):$y(i)?r[o]=BI({},i):Th(i)?r[o]=i.slice():(!e||!rh(i))&&(r[o]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Om(arguments[i],n);return r}const Qpe=(t,e,r,{allOwnKeys:n}={})=>(Om(e,(i,s)=>{r&&ai(i)?t[s]=Sre(i,r):t[s]=i},{allOwnKeys:n}),t),Xpe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Jpe=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},Zpe=(t,e,r,n)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!n||n(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=r!==!1&&sA(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},eme=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},tme=t=>{if(!t)return null;if(Th(t))return t;let e=t.length;if(!Nre(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},rme=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&sA(Uint8Array)),nme=(t,e)=>{const n=(t&&t[ob]).call(t);let i;for(;(i=n.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},ime=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},sme=_s("HTMLFormElement"),ome=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),I5=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),ame=_s("RegExp"),jre=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};Om(r,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(n[s]=o||i)}),Object.defineProperties(t,n)},lme=t=>{jre(t,(e,r)=>{if(ai(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(ai(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},cme=(t,e)=>{const r={},n=i=>{i.forEach(s=>{r[s]=!0})};return Th(t)?n(t):n(String(t).split(e)),r},ume=()=>{},dme=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function hme(t){return!!(t&&ai(t.append)&&t[Ere]==="FormData"&&t[ob])}const fme=t=>{const e=new Array(10),r=(n,i)=>{if(Tm(n)){if(e.indexOf(n)>=0)return;if(jm(n))return n;if(!("toJSON"in n)){e[i]=n;const s=Th(n)?[]:{};return Om(n,(o,a)=>{const l=r(o,i+1);!rh(l)&&(s[a]=l)}),e[i]=void 0,s}}return n};return r(t,0)},pme=_s("AsyncFunction"),mme=t=>t&&(Tm(t)||ai(t))&&ai(t.then)&&ai(t.catch),Tre=((t,e)=>t?setImmediate:e?((r,n)=>(Zl.addEventListener("message",({source:i,data:s})=>{i===Zl&&s===r&&n.length&&n.shift()()},!1),i=>{n.push(i),Zl.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",ai(Zl.postMessage)),gme=typeof queueMicrotask<"u"?queueMicrotask.bind(Zl):typeof process<"u"&&process.nextTick||Tre,yme=t=>t!=null&&ai(t[ob]),W={isArray:Th,isArrayBuffer:_re,isBuffer:jm,isFormData:Wpe,isArrayBufferView:Mpe,isString:Ape,isNumber:Nre,isBoolean:Dpe,isObject:Tm,isPlainObject:$y,isEmptyObject:$pe,isReadableStream:Upe,isRequest:Hpe,isResponse:Kpe,isHeaders:Gpe,isUndefined:rh,isDate:Fpe,isFile:qpe,isBlob:Lpe,isRegExp:ame,isFunction:ai,isStream:zpe,isURLSearchParams:Vpe,isTypedArray:rme,isFileList:Bpe,forEach:Om,merge:BI,extend:Qpe,trim:Ype,stripBOM:Xpe,inherits:Jpe,toFlatObject:Zpe,kindOf:ab,kindOfTest:_s,endsWith:eme,toArray:tme,forEachEntry:nme,matchAll:ime,isHTMLForm:sme,hasOwnProperty:I5,hasOwnProp:I5,reduceDescriptors:jre,freezeMethods:lme,toObjectSet:cme,toCamelCase:ome,noop:ume,toFiniteNumber:dme,findKey:Cre,global:Zl,isContextDefined:kre,isSpecCompliantForm:hme,toJSONObject:fme,isAsyncFn:pme,isThenable:mme,setImmediate:Tre,asap:gme,isIterable:yme};function Ge(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}W.inherits(Ge,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:W.toJSONObject(this.config),code:this.code,status:this.status}}});const Ore=Ge.prototype,Pre={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Pre[t]={value:t}});Object.defineProperties(Ge,Pre);Object.defineProperty(Ore,"isAxiosError",{value:!0});Ge.from=(t,e,r,n,i,s)=>{const o=Object.create(Ore);W.toFlatObject(t,o,function(d){return d!==Error.prototype},u=>u!=="isAxiosError");const a=t&&t.message?t.message:"Error",l=e==null&&t?t.code:e;return Ge.call(o,a,l,r,n,i),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",s&&Object.assign(o,s),o};const vme=null;function zI(t){return W.isPlainObject(t)||W.isArray(t)}function Ire(t){return W.endsWith(t,"[]")?t.slice(0,-2):t}function R5(t,e,r){return t?t.concat(e).map(function(i,s){return i=Ire(i),!r&&s?"["+i+"]":i}).join(r?".":""):e}function bme(t){return W.isArray(t)&&!t.some(zI)}const xme=W.toFlatObject(W,{},null,function(e){return/^is[A-Z]/.test(e)});function cb(t,e,r){if(!W.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=W.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,y){return!W.isUndefined(y[g])});const n=r.metaTokens,i=r.visitor||d,s=r.dots,o=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&W.isSpecCompliantForm(e);if(!W.isFunction(i))throw new TypeError("visitor must be a function");function u(m){if(m===null)return"";if(W.isDate(m))return m.toISOString();if(W.isBoolean(m))return m.toString();if(!l&&W.isBlob(m))throw new Ge("Blob is not supported. Use a Buffer instead.");return W.isArrayBuffer(m)||W.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,g,y){let v=m;if(m&&!y&&typeof m=="object"){if(W.endsWith(g,"{}"))g=n?g:g.slice(0,-2),m=JSON.stringify(m);else if(W.isArray(m)&&bme(m)||(W.isFileList(m)||W.endsWith(g,"[]"))&&(v=W.toArray(m)))return g=Ire(g),v.forEach(function(w,x){!(W.isUndefined(w)||w===null)&&e.append(o===!0?R5([g],x,s):o===null?g:g+"[]",u(w))}),!1}return zI(m)?!0:(e.append(R5(y,g,s),u(m)),!1)}const h=[],f=Object.assign(xme,{defaultVisitor:d,convertValue:u,isVisitable:zI});function p(m,g){if(!W.isUndefined(m)){if(h.indexOf(m)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(m),W.forEach(m,function(v,b){(!(W.isUndefined(v)||v===null)&&i.call(e,v,W.isString(b)?b.trim():b,g,f))===!0&&p(v,g?g.concat(b):[b])}),h.pop()}}if(!W.isObject(t))throw new TypeError("data must be an object");return p(t),e}function M5(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function oA(t,e){this._pairs=[],t&&cb(t,this,e)}const Rre=oA.prototype;Rre.append=function(e,r){this._pairs.push([e,r])};Rre.toString=function(e){const r=e?function(n){return e.call(this,n,M5)}:M5;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function wme(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Mre(t,e,r){if(!e)return t;const n=r&&r.encode||wme;W.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let s;if(i?s=i(e,r):s=W.isURLSearchParams(e)?e.toString():new oA(e,r).toString(n),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class A5{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){W.forEach(this.handlers,function(n){n!==null&&e(n)})}}const Are={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Sme=typeof URLSearchParams<"u"?URLSearchParams:oA,Eme=typeof FormData<"u"?FormData:null,_me=typeof Blob<"u"?Blob:null,Nme={isBrowser:!0,classes:{URLSearchParams:Sme,FormData:Eme,Blob:_me},protocols:["http","https","file","blob","url","data"]},aA=typeof window<"u"&&typeof document<"u",WI=typeof navigator=="object"&&navigator||void 0,Cme=aA&&(!WI||["ReactNative","NativeScript","NS"].indexOf(WI.product)<0),kme=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",jme=aA&&window.location.href||"http://localhost",Tme=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:aA,hasStandardBrowserEnv:Cme,hasStandardBrowserWebWorkerEnv:kme,navigator:WI,origin:jme},Symbol.toStringTag,{value:"Module"})),En={...Tme,...Nme};function Ome(t,e){return cb(t,new En.classes.URLSearchParams,{visitor:function(r,n,i,s){return En.isNode&&W.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function Pme(t){return W.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Ime(t){const e={},r=Object.keys(t);let n;const i=r.length;let s;for(n=0;n<i;n++)s=r[n],e[s]=t[s];return e}function Dre(t){function e(r,n,i,s){let o=r[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=r.length;return o=!o&&W.isArray(i)?i.length:o,l?(W.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!a):((!i[o]||!W.isObject(i[o]))&&(i[o]=[]),e(r,n,i[o],s)&&W.isArray(i[o])&&(i[o]=Ime(i[o])),!a)}if(W.isFormData(t)&&W.isFunction(t.entries)){const r={};return W.forEachEntry(t,(n,i)=>{e(Pme(n),i,r,0)}),r}return null}function Rme(t,e,r){if(W.isString(t))try{return(e||JSON.parse)(t),W.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const Pm={transitional:Are,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,s=W.isObject(e);if(s&&W.isHTMLForm(e)&&(e=new FormData(e)),W.isFormData(e))return i?JSON.stringify(Dre(e)):e;if(W.isArrayBuffer(e)||W.isBuffer(e)||W.isStream(e)||W.isFile(e)||W.isBlob(e)||W.isReadableStream(e))return e;if(W.isArrayBufferView(e))return e.buffer;if(W.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Ome(e,this.formSerializer).toString();if((a=W.isFileList(e))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return cb(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(r.setContentType("application/json",!1),Rme(e)):e}],transformResponse:[function(e){const r=this.transitional||Pm.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(W.isResponse(e)||W.isReadableStream(e))return e;if(e&&W.isString(e)&&(n&&!this.responseType||i)){const o=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?Ge.from(a,Ge.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:En.classes.FormData,Blob:En.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};W.forEach(["delete","get","head","post","put","patch"],t=>{Pm.headers[t]={}});const Mme=W.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ame=t=>{const e={};let r,n,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),r=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!r||e[r]&&Mme[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},D5=Symbol("internals");function Sf(t){return t&&String(t).trim().toLowerCase()}function Fy(t){return t===!1||t==null?t:W.isArray(t)?t.map(Fy):String(t)}function Dme(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const $me=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function nx(t,e,r,n,i){if(W.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!W.isString(e)){if(W.isString(n))return e.indexOf(n)!==-1;if(W.isRegExp(n))return n.test(e)}}function Fme(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function qme(t,e){const r=W.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,s,o){return this[n].call(this,e,i,s,o)},configurable:!0})})}let li=class{constructor(e){e&&this.set(e)}set(e,r,n){const i=this;function s(a,l,u){const d=Sf(l);if(!d)throw new Error("header name must be a non-empty string");const h=W.findKey(i,d);(!h||i[h]===void 0||u===!0||u===void 0&&i[h]!==!1)&&(i[h||l]=Fy(a))}const o=(a,l)=>W.forEach(a,(u,d)=>s(u,d,l));if(W.isPlainObject(e)||e instanceof this.constructor)o(e,r);else if(W.isString(e)&&(e=e.trim())&&!$me(e))o(Ame(e),r);else if(W.isObject(e)&&W.isIterable(e)){let a={},l,u;for(const d of e){if(!W.isArray(d))throw TypeError("Object iterator must return a key-value pair");a[u=d[0]]=(l=a[u])?W.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}o(a,r)}else e!=null&&s(r,e,n);return this}get(e,r){if(e=Sf(e),e){const n=W.findKey(this,e);if(n){const i=this[n];if(!r)return i;if(r===!0)return Dme(i);if(W.isFunction(r))return r.call(this,i,n);if(W.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=Sf(e),e){const n=W.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||nx(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let i=!1;function s(o){if(o=Sf(o),o){const a=W.findKey(n,o);a&&(!r||nx(n,n[a],a,r))&&(delete n[a],i=!0)}}return W.isArray(e)?e.forEach(s):s(e),i}clear(e){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const s=r[n];(!e||nx(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const r=this,n={};return W.forEach(this,(i,s)=>{const o=W.findKey(n,s);if(o){r[o]=Fy(i),delete r[s];return}const a=e?Fme(s):String(s).trim();a!==s&&delete r[s],r[a]=Fy(i),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return W.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&W.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[D5]=this[D5]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Sf(o);n[a]||(qme(i,o),n[a]=!0)}return W.isArray(e)?e.forEach(s):s(e),this}};li.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);W.reduceDescriptors(li.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});W.freezeMethods(li);function ix(t,e){const r=this||Pm,n=e||r,i=li.from(n.headers);let s=n.data;return W.forEach(t,function(a){s=a.call(r,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function $re(t){return!!(t&&t.__CANCEL__)}function Oh(t,e,r){Ge.call(this,t??"canceled",Ge.ERR_CANCELED,e,r),this.name="CanceledError"}W.inherits(Oh,Ge,{__CANCEL__:!0});function Fre(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new Ge("Request failed with status code "+r.status,[Ge.ERR_BAD_REQUEST,Ge.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Lme(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Bme(t,e){t=t||10;const r=new Array(t),n=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),d=n[s];o||(o=u),r[i]=l,n[i]=u;let h=s,f=0;for(;h!==i;)f+=r[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),u-o<e)return;const p=d&&u-d;return p?Math.round(f*1e3/p):void 0}}function zme(t,e){let r=0,n=1e3/e,i,s;const o=(u,d=Date.now())=>{r=d,i=null,s&&(clearTimeout(s),s=null),t(...u)};return[(...u)=>{const d=Date.now(),h=d-r;h>=n?o(u,d):(i=u,s||(s=setTimeout(()=>{s=null,o(i)},n-h)))},()=>i&&o(i)]}const Cv=(t,e,r=3)=>{let n=0;const i=Bme(50,250);return zme(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-n,u=i(l),d=o<=a;n=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&d?(a-o)/u:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},r)},$5=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},F5=t=>(...e)=>W.asap(()=>t(...e)),Wme=En.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,En.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(En.origin),En.navigator&&/(msie|trident)/i.test(En.navigator.userAgent)):()=>!0,Vme=En.hasStandardBrowserEnv?{write(t,e,r,n,i,s,o){if(typeof document>"u")return;const a=[`${t}=${encodeURIComponent(e)}`];W.isNumber(r)&&a.push(`expires=${new Date(r).toUTCString()}`),W.isString(n)&&a.push(`path=${n}`),W.isString(i)&&a.push(`domain=${i}`),s===!0&&a.push("secure"),W.isString(o)&&a.push(`SameSite=${o}`),document.cookie=a.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Ume(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Hme(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function qre(t,e,r){let n=!Ume(e);return t&&(n||r==!1)?Hme(t,e):e}const q5=t=>t instanceof li?{...t}:t;function qc(t,e){e=e||{};const r={};function n(u,d,h,f){return W.isPlainObject(u)&&W.isPlainObject(d)?W.merge.call({caseless:f},u,d):W.isPlainObject(d)?W.merge({},d):W.isArray(d)?d.slice():d}function i(u,d,h,f){if(W.isUndefined(d)){if(!W.isUndefined(u))return n(void 0,u,h,f)}else return n(u,d,h,f)}function s(u,d){if(!W.isUndefined(d))return n(void 0,d)}function o(u,d){if(W.isUndefined(d)){if(!W.isUndefined(u))return n(void 0,u)}else return n(void 0,d)}function a(u,d,h){if(h in e)return n(u,d);if(h in t)return n(void 0,u)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,d,h)=>i(q5(u),q5(d),h,!0)};return W.forEach(Object.keys({...t,...e}),function(d){const h=l[d]||i,f=h(t[d],e[d],d);W.isUndefined(f)&&h!==a||(r[d]=f)}),r}const Lre=t=>{const e=qc({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;if(e.headers=o=li.from(o),e.url=Mre(qre(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),W.isFormData(r)){if(En.hasStandardBrowserEnv||En.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(W.isFunction(r.getHeaders)){const l=r.getHeaders(),u=["content-type","content-length"];Object.entries(l).forEach(([d,h])=>{u.includes(d.toLowerCase())&&o.set(d,h)})}}if(En.hasStandardBrowserEnv&&(n&&W.isFunction(n)&&(n=n(e)),n||n!==!1&&Wme(e.url))){const l=i&&s&&Vme.read(s);l&&o.set(i,l)}return e},Kme=typeof XMLHttpRequest<"u",Gme=Kme&&function(t){return new Promise(function(r,n){const i=Lre(t);let s=i.data;const o=li.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:u}=i,d,h,f,p,m;function g(){p&&p(),m&&m(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let y=new XMLHttpRequest;y.open(i.method.toUpperCase(),i.url,!0),y.timeout=i.timeout;function v(){if(!y)return;const w=li.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),S={data:!a||a==="text"||a==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:w,config:t,request:y};Fre(function(N){r(N),g()},function(N){n(N),g()},S),y=null}"onloadend"in y?y.onloadend=v:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(v)},y.onabort=function(){y&&(n(new Ge("Request aborted",Ge.ECONNABORTED,t,y)),y=null)},y.onerror=function(x){const S=x&&x.message?x.message:"Network Error",E=new Ge(S,Ge.ERR_NETWORK,t,y);E.event=x||null,n(E),y=null},y.ontimeout=function(){let x=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const S=i.transitional||Are;i.timeoutErrorMessage&&(x=i.timeoutErrorMessage),n(new Ge(x,S.clarifyTimeoutError?Ge.ETIMEDOUT:Ge.ECONNABORTED,t,y)),y=null},s===void 0&&o.setContentType(null),"setRequestHeader"in y&&W.forEach(o.toJSON(),function(x,S){y.setRequestHeader(S,x)}),W.isUndefined(i.withCredentials)||(y.withCredentials=!!i.withCredentials),a&&a!=="json"&&(y.responseType=i.responseType),u&&([f,m]=Cv(u,!0),y.addEventListener("progress",f)),l&&y.upload&&([h,p]=Cv(l),y.upload.addEventListener("progress",h),y.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(d=w=>{y&&(n(!w||w.type?new Oh(null,t,y):w),y.abort(),y=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const b=Lme(i.url);if(b&&En.protocols.indexOf(b)===-1){n(new Ge("Unsupported protocol "+b+":",Ge.ERR_BAD_REQUEST,t));return}y.send(s||null)})},Yme=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,i;const s=function(u){if(!i){i=!0,a();const d=u instanceof Error?u:this.reason;n.abort(d instanceof Ge?d:new Oh(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,s(new Ge(`timeout ${e} of ms exceeded`,Ge.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),t=null)};t.forEach(u=>u.addEventListener("abort",s));const{signal:l}=n;return l.unsubscribe=()=>W.asap(a),l}},Qme=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,i;for(;n<r;)i=n+e,yield t.slice(n,i),n=i},Xme=async function*(t,e){for await(const r of Jme(t))yield*Qme(r,e)},Jme=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},L5=(t,e,r,n)=>{const i=Xme(t,e);let s=0,o,a=l=>{o||(o=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:u,value:d}=await i.next();if(u){a(),l.close();return}let h=d.byteLength;if(r){let f=s+=h;r(f)}l.enqueue(new Uint8Array(d))}catch(u){throw a(u),u}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},B5=64*1024,{isFunction:Xg}=W,Zme=(({Request:t,Response:e})=>({Request:t,Response:e}))(W.global),{ReadableStream:z5,TextEncoder:W5}=W.global,V5=(t,...e)=>{try{return!!t(...e)}catch{return!1}},ege=t=>{t=W.merge.call({skipUndefined:!0},Zme,t);const{fetch:e,Request:r,Response:n}=t,i=e?Xg(e):typeof fetch=="function",s=Xg(r),o=Xg(n);if(!i)return!1;const a=i&&Xg(z5),l=i&&(typeof W5=="function"?(m=>g=>m.encode(g))(new W5):async m=>new Uint8Array(await new r(m).arrayBuffer())),u=s&&a&&V5(()=>{let m=!1;const g=new r(En.origin,{body:new z5,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!g}),d=o&&a&&V5(()=>W.isReadableStream(new n("").body)),h={stream:d&&(m=>m.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!h[m]&&(h[m]=(g,y)=>{let v=g&&g[m];if(v)return v.call(g);throw new Ge(`Response type '${m}' is not supported`,Ge.ERR_NOT_SUPPORT,y)})});const f=async m=>{if(m==null)return 0;if(W.isBlob(m))return m.size;if(W.isSpecCompliantForm(m))return(await new r(En.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(W.isArrayBufferView(m)||W.isArrayBuffer(m))return m.byteLength;if(W.isURLSearchParams(m)&&(m=m+""),W.isString(m))return(await l(m)).byteLength},p=async(m,g)=>{const y=W.toFiniteNumber(m.getContentLength());return y??f(g)};return async m=>{let{url:g,method:y,data:v,signal:b,cancelToken:w,timeout:x,onDownloadProgress:S,onUploadProgress:E,responseType:N,headers:_,withCredentials:k="same-origin",fetchOptions:j}=Lre(m),T=e||fetch;N=N?(N+"").toLowerCase():"text";let P=Yme([b,w&&w.toAbortSignal()],x),O=null;const D=P&&P.unsubscribe&&(()=>{P.unsubscribe()});let F;try{if(E&&u&&y!=="get"&&y!=="head"&&(F=await p(_,v))!==0){let Q=new r(g,{method:"POST",body:v,duplex:"half"}),le;if(W.isFormData(v)&&(le=Q.headers.get("content-type"))&&_.setContentType(le),Q.body){const[G,se]=$5(F,Cv(F5(E)));v=L5(Q.body,B5,G,se)}}W.isString(k)||(k=k?"include":"omit");const $=s&&"credentials"in r.prototype,q={...j,signal:P,method:y.toUpperCase(),headers:_.normalize().toJSON(),body:v,duplex:"half",credentials:$?k:void 0};O=s&&new r(g,q);let M=await(s?T(O,j):T(g,q));const B=d&&(N==="stream"||N==="response");if(d&&(S||B&&D)){const Q={};["status","statusText","headers"].forEach(ke=>{Q[ke]=M[ke]});const le=W.toFiniteNumber(M.headers.get("content-length")),[G,se]=S&&$5(le,Cv(F5(S),!0))||[];M=new n(L5(M.body,B5,G,()=>{se&&se(),D&&D()}),Q)}N=N||"text";let X=await h[W.findKey(h,N)||"text"](M,m);return!B&&D&&D(),await new Promise((Q,le)=>{Fre(Q,le,{data:X,headers:li.from(M.headers),status:M.status,statusText:M.statusText,config:m,request:O})})}catch($){throw D&&D(),$&&$.name==="TypeError"&&/Load failed|fetch/i.test($.message)?Object.assign(new Ge("Network Error",Ge.ERR_NETWORK,m,O),{cause:$.cause||$}):Ge.from($,$&&$.code,m,O)}}},tge=new Map,Bre=t=>{let e=t&&t.env||{};const{fetch:r,Request:n,Response:i}=e,s=[n,i,r];let o=s.length,a=o,l,u,d=tge;for(;a--;)l=s[a],u=d.get(l),u===void 0&&d.set(l,u=a?new Map:ege(e)),d=u;return u};Bre();const lA={http:vme,xhr:Gme,fetch:{get:Bre}};W.forEach(lA,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const U5=t=>`- ${t}`,rge=t=>W.isFunction(t)||t===null||t===!1;function nge(t,e){t=W.isArray(t)?t:[t];const{length:r}=t;let n,i;const s={};for(let o=0;o<r;o++){n=t[o];let a;if(i=n,!rge(n)&&(i=lA[(a=String(n)).toLowerCase()],i===void 0))throw new Ge(`Unknown adapter '${a}'`);if(i&&(W.isFunction(i)||(i=i.get(e))))break;s[a||"#"+o]=i}if(!i){const o=Object.entries(s).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=r?o.length>1?`since :
`+o.map(U5).join(`
`):" "+U5(o[0]):"as no adapter specified";throw new Ge("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i}const zre={getAdapter:nge,adapters:lA};function sx(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Oh(null,t)}function H5(t){return sx(t),t.headers=li.from(t.headers),t.data=ix.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),zre.getAdapter(t.adapter||Pm.adapter,t)(t).then(function(n){return sx(t),n.data=ix.call(t,t.transformResponse,n),n.headers=li.from(n.headers),n},function(n){return $re(n)||(sx(t),n&&n.response&&(n.response.data=ix.call(t,t.transformResponse,n.response),n.response.headers=li.from(n.response.headers))),Promise.reject(n)})}const Wre="1.13.2",ub={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{ub[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const K5={};ub.transitional=function(e,r,n){function i(s,o){return"[Axios v"+Wre+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return(s,o,a)=>{if(e===!1)throw new Ge(i(o," has been removed"+(r?" in "+r:"")),Ge.ERR_DEPRECATED);return r&&!K5[o]&&(K5[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};ub.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function ige(t,e,r){if(typeof t!="object")throw new Ge("options must be an object",Ge.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const s=n[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new Ge("option "+s+" must be "+l,Ge.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ge("Unknown option "+s,Ge.ERR_BAD_OPTION)}}const qy={assertOptions:ige,validators:ub},Is=qy.validators;let xc=class{constructor(e){this.defaults=e||{},this.interceptors={request:new A5,response:new A5}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=qc(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:s}=r;n!==void 0&&qy.assertOptions(n,{silentJSONParsing:Is.transitional(Is.boolean),forcedJSONParsing:Is.transitional(Is.boolean),clarifyTimeoutError:Is.transitional(Is.boolean)},!1),i!=null&&(W.isFunction(i)?r.paramsSerializer={serialize:i}:qy.assertOptions(i,{encode:Is.function,serialize:Is.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),qy.assertOptions(r,{baseUrl:Is.spelling("baseURL"),withXsrfToken:Is.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=s&&W.merge(s.common,s[r.method]);s&&W.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),r.headers=li.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const u=[];this.interceptors.response.forEach(function(g){u.push(g.fulfilled,g.rejected)});let d,h=0,f;if(!l){const m=[H5.bind(this),void 0];for(m.unshift(...a),m.push(...u),f=m.length,d=Promise.resolve(r);h<f;)d=d.then(m[h++],m[h++]);return d}f=a.length;let p=r;for(;h<f;){const m=a[h++],g=a[h++];try{p=m(p)}catch(y){g.call(this,y);break}}try{d=H5.call(this,p)}catch(m){return Promise.reject(m)}for(h=0,f=u.length;h<f;)d=d.then(u[h++],u[h++]);return d}getUri(e){e=qc(this.defaults,e);const r=qre(e.baseURL,e.url,e.allowAbsoluteUrls);return Mre(r,e.params,e.paramsSerializer)}};W.forEach(["delete","get","head","options"],function(e){xc.prototype[e]=function(r,n){return this.request(qc(n||{},{method:e,url:r,data:(n||{}).data}))}});W.forEach(["post","put","patch"],function(e){function r(n){return function(s,o,a){return this.request(qc(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}xc.prototype[e]=r(),xc.prototype[e+"Form"]=r(!0)});let sge=class Vre{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{n.subscribe(a),s=a}).then(i);return o.cancel=function(){n.unsubscribe(s)},o},e(function(s,o,a){n.reason||(n.reason=new Oh(s,o,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new Vre(function(i){e=i}),cancel:e}}};function oge(t){return function(r){return t.apply(null,r)}}function age(t){return W.isObject(t)&&t.isAxiosError===!0}const VI={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(VI).forEach(([t,e])=>{VI[e]=t});function Ure(t){const e=new xc(t),r=Sre(xc.prototype.request,e);return W.extend(r,xc.prototype,e,{allOwnKeys:!0}),W.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return Ure(qc(t,i))},r}const pr=Ure(Pm);pr.Axios=xc;pr.CanceledError=Oh;pr.CancelToken=sge;pr.isCancel=$re;pr.VERSION=Wre;pr.toFormData=cb;pr.AxiosError=Ge;pr.Cancel=pr.CanceledError;pr.all=function(e){return Promise.all(e)};pr.spread=oge;pr.isAxiosError=age;pr.mergeConfig=qc;pr.AxiosHeaders=li;pr.formToJSON=t=>Dre(W.isHTMLForm(t)?new FormData(t):t);pr.getAdapter=zre.getAdapter;pr.HttpStatusCode=VI;pr.default=pr;const{Axios:OLe,AxiosError:PLe,CanceledError:ILe,isCancel:RLe,CancelToken:MLe,VERSION:ALe,all:DLe,Cancel:$Le,isAxiosError:FLe,spread:qLe,toFormData:LLe,AxiosHeaders:BLe,HttpStatusCode:zLe,formToJSON:WLe,getAdapter:VLe,mergeConfig:ULe}=pr,UI=window.prmConfig||{},ee=pr.create({baseURL:UI.apiUrl||"/wp-json",headers:{"Content-Type":"application/json","X-WP-Nonce":UI.nonce||""}});ee.interceptors.request.use(t=>{var e;return(e=window.prmConfig)!=null&&e.nonce&&(t.headers["X-WP-Nonce"]=window.prmConfig.nonce),t});ee.interceptors.response.use(t=>t,t=>{var e;return((e=t.response)==null?void 0:e.status)===401&&(window.location.href=UI.loginUrl||"/wp-login.php"),Promise.reject(t)});const et={getPeople:t=>ee.get("/wp/v2/people",{params:t}),getPerson:(t,e={})=>ee.get(`/wp/v2/people/${t}`,{params:e}),createPerson:t=>ee.post("/wp/v2/people",t),updatePerson:(t,e)=>ee.put(`/wp/v2/people/${t}`,e),deletePerson:(t,e={})=>ee.delete(`/wp/v2/people/${t}`,{params:e}),getCompanies:t=>ee.get("/wp/v2/companies",{params:t}),getCompany:(t,e={})=>ee.get(`/wp/v2/companies/${t}`,{params:e}),createCompany:t=>ee.post("/wp/v2/companies",t),updateCompany:(t,e)=>ee.put(`/wp/v2/companies/${t}`,e),deleteCompany:(t,e={})=>ee.delete(`/wp/v2/companies/${t}`,{params:e}),getDates:t=>ee.get("/wp/v2/important-dates",{params:t}),getDate:t=>ee.get(`/wp/v2/important-dates/${t}`),createDate:t=>ee.post("/wp/v2/important-dates",t),updateDate:(t,e)=>ee.put(`/wp/v2/important-dates/${t}`,e),deleteDate:t=>ee.delete(`/wp/v2/important-dates/${t}`),getPersonLabels:()=>ee.get("/wp/v2/person_label"),getCompanyLabels:()=>ee.get("/wp/v2/company_label"),getRelationshipTypes:()=>ee.get("/wp/v2/relationship_type",{params:{per_page:100,_fields:"id,name,slug,acf"}}),createRelationshipType:t=>ee.post("/wp/v2/relationship_type",t),updateRelationshipType:(t,e)=>ee.post(`/wp/v2/relationship_type/${t}`,e),deleteRelationshipType:t=>ee.delete(`/wp/v2/relationship_type/${t}?force=true`),restoreRelationshipTypeDefaults:()=>ee.post("/prm/v1/relationship-types/restore-defaults"),getDateTypes:()=>ee.get("/wp/v2/date_type",{params:{per_page:100}}),uploadMedia:t=>{const e=new FormData;return e.append("file",t),ee.post("/wp/v2/media",e,{headers:{"Content-Type":"multipart/form-data"}})}},Se={getVersion:()=>ee.get("/prm/v1/version"),getDashboard:()=>ee.get("/prm/v1/dashboard"),sideloadGravatar:(t,e)=>ee.post(`/prm/v1/people/${t}/gravatar`,{email:e}),bulkUpdatePeople:(t,e)=>ee.post("/prm/v1/people/bulk-update",{ids:t,updates:e}),getCurrentUser:()=>ee.get("/prm/v1/user/me"),getUsers:()=>ee.get("/prm/v1/users"),approveUser:t=>ee.post(`/prm/v1/users/${t}/approve`),denyUser:t=>ee.post(`/prm/v1/users/${t}/deny`),deleteUser:t=>ee.delete(`/prm/v1/users/${t}`),search:t=>ee.get("/prm/v1/search",{params:{q:t}}),getReminders:(t=30)=>ee.get("/prm/v1/reminders",{params:{days_ahead:t}}),triggerReminders:()=>ee.post("/prm/v1/reminders/trigger"),rescheduleCronJobs:()=>ee.post("/prm/v1/reminders/reschedule-cron"),getNotificationChannels:()=>ee.get("/prm/v1/user/notification-channels"),updateNotificationChannels:t=>ee.post("/prm/v1/user/notification-channels",{channels:t}),updateSlackWebhook:t=>ee.post("/prm/v1/user/slack-webhook",{webhook:t}),updateNotificationTime:t=>ee.post("/prm/v1/user/notification-time",{time:t}),updateMentionNotifications:t=>ee.post("/prm/v1/user/mention-notifications",{preference:t}),getSlackStatus:()=>ee.get("/prm/v1/user/slack-status"),disconnectSlack:()=>ee.post("/prm/v1/slack/disconnect"),getSlackChannels:()=>ee.get("/prm/v1/slack/channels"),getSlackTargets:()=>ee.get("/prm/v1/slack/targets"),updateSlackTargets:t=>ee.post("/prm/v1/slack/targets",{targets:t}),getPersonDates:t=>ee.get(`/prm/v1/people/${t}/dates`),getPersonTimeline:t=>ee.get(`/prm/v1/people/${t}/timeline`),getPersonNotes:t=>ee.get(`/prm/v1/people/${t}/notes`),createNote:(t,e,r="private")=>ee.post(`/prm/v1/people/${t}/notes`,{content:e,visibility:r}),updateNote:(t,e,r=null)=>ee.put(`/prm/v1/notes/${t}`,{content:e,...r&&{visibility:r}}),deleteNote:t=>ee.delete(`/prm/v1/notes/${t}`),getPersonActivities:t=>ee.get(`/prm/v1/people/${t}/activities`),createActivity:(t,e)=>ee.post(`/prm/v1/people/${t}/activities`,e),updateActivity:(t,e)=>ee.put(`/prm/v1/activities/${t}`,e),deleteActivity:t=>ee.delete(`/prm/v1/activities/${t}`),getAllTodos:(t=!1)=>ee.get("/prm/v1/todos",{params:{completed:t}}),getInvestments:t=>ee.get(`/prm/v1/investments/${t}`),getPersonTodos:t=>ee.get(`/prm/v1/people/${t}/todos`),createTodo:(t,e)=>ee.post(`/prm/v1/people/${t}/todos`,e),updateTodo:(t,e)=>ee.put(`/prm/v1/todos/${t}`,e),deleteTodo:t=>ee.delete(`/prm/v1/todos/${t}`),getCompanyPeople:t=>ee.get(`/prm/v1/companies/${t}/people`),setCompanyLogo:(t,e)=>ee.post(`/prm/v1/companies/${t}/logo`,{media_id:e}),uploadPersonPhoto:(t,e)=>{const r=new FormData;return r.append("file",e),ee.post(`/prm/v1/people/${t}/photo`,r,{headers:{"Content-Type":"multipart/form-data"}})},uploadCompanyLogo:(t,e)=>{const r=new FormData;return r.append("file",e),ee.post(`/prm/v1/companies/${t}/logo/upload`,r,{headers:{"Content-Type":"multipart/form-data"}})},getCardDAVUrls:()=>ee.get("/prm/v1/carddav/urls"),getAppPasswords:t=>ee.get(`/wp/v2/users/${t}/application-passwords`),createAppPassword:(t,e)=>ee.post(`/wp/v2/users/${t}/application-passwords`,{name:e}),deleteAppPassword:(t,e)=>ee.delete(`/wp/v2/users/${t}/application-passwords/${e}`),getWorkspaces:()=>ee.get("/prm/v1/workspaces"),getWorkspace:t=>ee.get(`/prm/v1/workspaces/${t}`),createWorkspace:t=>ee.post("/prm/v1/workspaces",t),updateWorkspace:(t,e)=>ee.put(`/prm/v1/workspaces/${t}`,e),deleteWorkspace:t=>ee.delete(`/prm/v1/workspaces/${t}`),addWorkspaceMember:(t,e)=>ee.post(`/prm/v1/workspaces/${t}/members`,e),removeWorkspaceMember:(t,e)=>ee.delete(`/prm/v1/workspaces/${t}/members/${e}`),updateWorkspaceMember:(t,e,r)=>ee.put(`/prm/v1/workspaces/${t}/members/${e}`,r),searchWorkspaceMembers:async(t,e)=>{const{data:r}=await ee.get("/prm/v1/workspaces/members/search",{params:{workspace_ids:t.join(","),query:e}});return r},getWorkspaceInvites:t=>ee.get(`/prm/v1/workspaces/${t}/invites`),createWorkspaceInvite:(t,e)=>ee.post(`/prm/v1/workspaces/${t}/invites`,e),revokeWorkspaceInvite:(t,e)=>ee.delete(`/prm/v1/workspaces/${t}/invites/${e}`),validateInvite:t=>ee.get(`/prm/v1/invites/${t}`),acceptInvite:t=>ee.post(`/prm/v1/invites/${t}/accept`),getPostShares:(t,e)=>ee.get(`/prm/v1/${e}/${t}/shares`),sharePost:(t,e,r)=>ee.post(`/prm/v1/${e}/${t}/shares`,r),unsharePost:(t,e,r)=>ee.delete(`/prm/v1/${e}/${t}/shares/${r}`),searchUsers:t=>ee.get("/prm/v1/users/search",{params:{q:t}}),getIcalUrl:()=>ee.get("/prm/v1/user/ical-url")};function lge({checkInterval:t=5*60*1e3}={}){const[e,r]=C.useState(!1),[n]=C.useState(()=>{var l;return((l=window.prmConfig)==null?void 0:l.version)||null}),[i,s]=C.useState(null),o=C.useCallback(async()=>{var l;if(n)try{const d=(l=(await Se.getVersion()).data)==null?void 0:l.version;d&&d!==n&&(s(d),r(!0))}catch(u){console.debug("Version check failed:",u.message)}},[n]),a=C.useCallback(()=>{window.location.reload(!0)},[]);return C.useEffect(()=>{const l=setTimeout(o,5e3);return()=>clearTimeout(l)},[o]),C.useEffect(()=>{const l=setInterval(o,t);return()=>clearInterval(l)},[o,t]),C.useEffect(()=>{const l=()=>{document.visibilityState==="visible"&&o()};return document.addEventListener("visibilitychange",l),()=>document.removeEventListener("visibilitychange",l)},[o]),{hasUpdate:e,currentVersion:n,latestVersion:i,reload:a,checkVersion:o}}/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cge={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uge=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),fe=(t,e)=>{const r=C.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...u},d)=>C.createElement("svg",{ref:d,...cge,width:i,height:i,stroke:n,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${uge(t)}`,a].join(" "),...u},[...e.map(([h,f])=>C.createElement(h,f)),...Array.isArray(l)?l:[l]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=fe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hre=fe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kre=fe("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ph=fe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=fe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gre=fe("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dge=fe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hge=fe("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=fe("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yre=fe("Cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h0.01",key:"hsw7lv"}],["path",{d:"M12 4h0.01",key:"1e3d8f"}],["path",{d:"M17 4h0.01",key:"p7cxgy"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=fe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qre=fe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=fe("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lc=fe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=fe("CheckSquare2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=fe("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=fe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nh=fe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=fe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xre=fe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jre=fe("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fge=fe("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pge=fe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zre=fe("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ene=fe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=fe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tne=fe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=fe("FileCode",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m10 13-2 2 2 2",key:"17smn8"}],["path",{d:"m14 17 2-2-2-2",key:"14mezr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=fe("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=fe("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wp=fe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mge=fe("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=fe("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=fe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gge=fe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yge=fe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rne=fe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vge=fe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bge=fe("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xge=fe("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=fe("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wge=fe("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nne=fe("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=fe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rm=fe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sge=fe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=fe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ege=fe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ge=fe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=fe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nge=fe("MinusSquare",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cge=fe("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kge=fe("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=fe("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=fe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=fe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jge=fe("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ine=fe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sne=fe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=fe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gl=fe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=fe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=fe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const one=fe("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=fe("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tge=fe("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ane=fe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lne=fe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=fe("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=fe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=fe("StickyNote",[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M15 3v6h6",key:"edgan2"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=fe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=fe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oge=fe("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pge=fe("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=fe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ige=fe("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=fe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vl=fe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rge=fe("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=fe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cne=fe("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=fe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=fe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mge=fe("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Age=fe("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function Dn(t){if(!t)return"";const e=document.createElement("textarea");return e.innerHTML=t,e.value}function dr(t){var r;if(!t)return"";const e=((r=t.title)==null?void 0:r.rendered)||t.title||t.name||"";return Dn(e)}function Ed(t){var r,n;if(!t)return"";if(t.name&&typeof t.name=="string"&&!((r=t.title)!=null&&r.rendered))return Dn(t.name);const e=((n=t.title)==null?void 0:n.rendered)||t.title||t.name||"";return Dn(e)}function uo(t,e={}){const r=["gender"],n=["contact_info","addresses","work_history","relationships","photo_gallery"],i={...t};return r.forEach(s=>{i[s]===""&&(i[s]=null)}),n.forEach(s=>{Array.isArray(i[s])||(i[s]=[])}),Object.assign(i,e),i}const Tt={all:["people"],lists:()=>[...Tt.all,"list"],list:t=>[...Tt.lists(),t],details:()=>[...Tt.all,"detail"],detail:t=>[...Tt.details(),t],timeline:t=>[...Tt.detail(t),"timeline"],dates:t=>[...Tt.detail(t),"dates"]};function une(t){var i,s,o,a,l,u,d,h,f,p,m,g,y,v,b,w,x;const e=((o=(s=(i=t._embedded)==null?void 0:i["wp:featuredmedia"])==null?void 0:s[0])==null?void 0:o.source_url)||((f=(h=(d=(u=(l=(a=t._embedded)==null?void 0:a["wp:featuredmedia"])==null?void 0:l[0])==null?void 0:u.media_details)==null?void 0:d.sizes)==null?void 0:h.thumbnail)==null?void 0:f.source_url)||null,r=((y=(g=(m=(p=t._embedded)==null?void 0:p["wp:term"])==null?void 0:m.flat())==null?void 0:g.filter(S=>(S==null?void 0:S.taxonomy)==="person_label"))==null?void 0:y.map(S=>S.name))||[],n=Dn(((v=t.title)==null?void 0:v.rendered)||"");return{...t,id:t.id,name:n,first_name:((b=t.acf)==null?void 0:b.first_name)||"",last_name:((w=t.acf)==null?void 0:w.last_name)||"",is_favorite:((x=t.acf)==null?void 0:x.is_favorite)||!1,is_deceased:t.is_deceased||!1,birth_year:t.birth_year||null,modified:t.modified||null,thumbnail:e,labels:r}}function lu(t={}){return at({queryKey:Tt.list(t),queryFn:async()=>{const e=[];let r=1;const n=100;for(;;){const i=await et.getPeople({per_page:n,page:r,_embed:!0,...t}),s=i.data.map(une);if(e.push(...s),s.length<n)break;const o=parseInt(i.headers["x-wp-totalpages"]||i.headers["X-WP-TotalPages"]||"0",10);if(o>0&&r>=o)break;r++}return e}})}function dne(t){return at({queryKey:Tt.detail(t),queryFn:async()=>{const e=await et.getPerson(t,{_embed:!0});return une(e.data)},enabled:!!t})}function Dge(t){return at({queryKey:Tt.timeline(t),queryFn:async()=>(await Se.getPersonTimeline(t)).data,enabled:!!t})}function $ge(t){return at({queryKey:Tt.dates(t),queryFn:async()=>(await Se.getPersonDates(t)).data,enabled:!!t})}function hne({onSuccess:t}={}){const e=tt();return He({mutationFn:async r=>{const n=[];r.email&&n.push({contact_type:"email",contact_value:r.email,contact_label:"Email"}),r.phone&&n.push({contact_type:r.phone_type||"mobile",contact_value:r.phone,contact_label:r.phone_type==="mobile"?"Mobile":"Phone"});const i={title:`${r.first_name} ${r.last_name}`.trim(),status:"publish",acf:{first_name:r.first_name,last_name:r.last_name,nickname:r.nickname,gender:r.gender||null,pronouns:r.pronouns||null,how_we_met:r.how_we_met,is_favorite:r.is_favorite,contact_info:n,_visibility:r.visibility||"private",_assigned_workspaces:r.assigned_workspaces||[]}},s=await et.createPerson(i),o=s.data.id;if(r.email)try{await Se.sideloadGravatar(o,r.email)}catch{}if(r.birthday&&r.birthdayType)try{await et.createDate({title:`${r.first_name}'s Birthday`,status:"publish",date_type:[r.birthdayType.id],acf:{date_value:r.birthday,is_recurring:!0,related_people:[o],_visibility:"private"}})}catch{}return s.data},onSuccess:r=>{e.invalidateQueries({queryKey:Tt.lists()}),e.invalidateQueries({queryKey:["dashboard"]}),e.invalidateQueries({queryKey:["reminders"]}),t==null||t(r)}})}function Fge(){const t=tt();return He({mutationFn:({id:e,data:r})=>et.updatePerson(e,r),onSuccess:(e,{id:r,data:n})=>{var i;t.invalidateQueries({queryKey:Tt.detail(r)}),t.invalidateQueries({queryKey:Tt.lists()}),t.invalidateQueries({queryKey:["dashboard"]}),(i=n==null?void 0:n.acf)!=null&&i.relationships&&(Array.isArray(n.acf.relationships)?n.acf.relationships:[]).forEach(o=>{const a=o.related_person;a&&t.invalidateQueries({queryKey:Tt.detail(a)})})}})}function qge(){const t=tt();return He({mutationFn:e=>et.deletePerson(e,{force:!0}),onSuccess:()=>{t.invalidateQueries({queryKey:Tt.lists()}),t.invalidateQueries({queryKey:Tt.details()}),t.invalidateQueries({queryKey:["dashboard"]})}})}function Lge(){const t=tt();return He({mutationFn:({ids:e,updates:r})=>Se.bulkUpdatePeople(e,r),onSuccess:async()=>{await t.refetchQueries({queryKey:Tt.lists()}),t.invalidateQueries({queryKey:Tt.details()})}})}function Bge(){const t=tt();return He({mutationFn:({personId:e,content:r,visibility:n="private"})=>Se.createNote(e,r,n),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:Tt.timeline(r)})}})}function zge(){const t=tt();return He({mutationFn:({noteId:e,personId:r})=>Se.deleteNote(e),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:Tt.timeline(r)})}})}function gA(){const t=tt();return He({mutationFn:({personId:e,data:r})=>Se.createActivity(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:Tt.timeline(r)})}})}function Wge(){const t=tt();return He({mutationFn:({activityId:e,data:r,personId:n})=>Se.updateActivity(e,r),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:Tt.timeline(r)})}})}function Vge(){const t=tt();return He({mutationFn:({activityId:e,personId:r})=>Se.deleteActivity(e),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:Tt.timeline(r)})}})}function fne(){const t=tt();return He({mutationFn:({personId:e,data:r})=>Se.createTodo(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:Tt.timeline(r)})}})}function Uge(){const t=tt();return He({mutationFn:({todoId:e,data:r,personId:n})=>Se.updateTodo(e,r),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:Tt.timeline(r)})}})}function Hge(){const t=tt();return He({mutationFn:({todoId:e,personId:r})=>Se.deleteTodo(e),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:Tt.timeline(r)})}})}function Kge(){const t=tt();return He({mutationFn:({dateId:e,personId:r})=>et.deleteDate(e),onSuccess:(e,{personId:r})=>{r&&(t.invalidateQueries({queryKey:Tt.dates(r)}),t.invalidateQueries({queryKey:Tt.detail(r)})),t.invalidateQueries({queryKey:["reminders"]})}})}function pne({onSuccess:t}={}){const e=tt();return He({mutationFn:async r=>{const n={title:r.title,status:"publish",date_type:r.date_type,acf:{date_value:r.date_value,related_people:r.related_people,is_recurring:r.is_recurring,year_unknown:r.year_unknown,_visibility:"private"}};return(await et.createDate(n)).data},onSuccess:r=>{e.invalidateQueries({queryKey:["reminders"]}),t==null||t(r)}})}function mne({onSuccess:t}={}){const e=tt();return He({mutationFn:async r=>{const n={title:r.title,status:"publish",parent:r.parentId||0,acf:{website:r.website,industry:r.industry,investors:r.investors||[],_visibility:r.visibility||"private",_assigned_workspaces:r.assigned_workspaces||[]}};return(await et.createCompany(n)).data},onSuccess:r=>{e.invalidateQueries({queryKey:["companies"]}),e.invalidateQueries({queryKey:["dashboard"]}),t==null||t(r)}})}const Vc="Caelis";function Ih(t){C.useEffect(()=>{var e;if(t){const r=((e=window.prmConfig)==null?void 0:e.siteName)||Vc;document.title=`${t} - ${r}`}},[t])}function Gge(t){const e=t.match(/\/(?:people|companies|dates)\/(\d+)/);return e?e[1]:null}function gne(t=null){const e=ea();C.useEffect(()=>{var i;let r=t;if(!r){const s=e.pathname,o=Gge(s);s==="/"?r="Dashboard":s==="/login"?r="Login":s.startsWith("/people")?s==="/people"||s==="/people/"?r="People":s==="/people/new"?r="New person":s.endsWith("/edit")?r="Edit person":o?r="Person":r="People":s.startsWith("/companies")?s==="/companies"||s==="/companies/"?r="Organizations":s==="/companies/new"?r="New organization":s.endsWith("/edit")?r="Edit organization":o?r="Organization":r="Organizations":s.startsWith("/dates")?s==="/dates"||s==="/dates/"?r="Events":s==="/dates/new"?r="New date":s.endsWith("/edit")?r="Edit date":r="Events":s.startsWith("/settings")?r="Settings":r=Vc}const n=((i=window.prmConfig)==null?void 0:i.siteName)||Vc;document.title=`${r} - ${n}`},[e.pathname,t])}function Yge(){return at({queryKey:["dashboard"],queryFn:async()=>(await Se.getDashboard()).data})}function Qge(t=30){return at({queryKey:["reminders",t],queryFn:async()=>(await Se.getReminders(t)).data})}function yne(t=!1){return at({queryKey:["todos",t],queryFn:async()=>(await Se.getAllTodos(t)).data})}function vne(){const t=tt();return He({mutationFn:({todoId:e,data:r})=>Se.updateTodo(e,r),onSuccess:()=>{t.invalidateQueries({queryKey:["todos"]}),t.invalidateQueries({queryKey:["dashboard"]})}})}function Xge(){const t=tt();return He({mutationFn:e=>Se.deleteTodo(e),onSuccess:()=>{t.invalidateQueries({queryKey:["todos"]}),t.invalidateQueries({queryKey:["dashboard"]})}})}function Jge(t){const e=typeof t=="string"?t:"",r=e.length>=2;return at({queryKey:["search",e],queryFn:async()=>r?(await Se.search(e)).data:{people:[],companies:[]},enabled:r})}function bne({isOpen:t,onClose:e}){const[r,n]=C.useState(""),[i,s]=C.useState(""),[o,a]=C.useState(""),[l,u]=C.useState(!1),[d,h]=C.useState(""),{data:f=[],isLoading:p}=lu(),m=fne(),g=tt(),y=C.useMemo(()=>{const E=d.toLowerCase().trim();let N=f;return E&&(N=f.filter(_=>{var k,j,T;return((k=_.name)==null?void 0:k.toLowerCase().includes(E))||((j=_.first_name)==null?void 0:j.toLowerCase().includes(E))||((T=_.last_name)==null?void 0:T.toLowerCase().includes(E))})),[...N].sort((_,k)=>(_.name||"").localeCompare(k.name||""))},[f,d]),v=C.useMemo(()=>f.find(E=>E.id===parseInt(o)),[f,o]),b=()=>new Date().toISOString().split("T")[0];if(C.useEffect(()=>{t&&(n(""),s(b()),a(""),h(""),u(!1))},[t]),!t)return null;const w=async E=>{if(E.preventDefault(),!(!r.trim()||!o))try{await m.mutateAsync({personId:parseInt(o),data:{content:r.trim(),due_date:i||null,is_completed:!1}}),g.invalidateQueries({queryKey:["todos"]}),e()}catch{}},x=()=>{e()},S=E=>{if(!E)return"";try{return new Date(E).toISOString().split("T")[0]}catch{return""}};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Add todo"}),c.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600",disabled:m.isPending,children:c.jsx(ht,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:w,className:"p-4",children:[c.jsxs("div",{className:"mb-4",children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Person ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{type:"button",onClick:()=>u(!l),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:m.isPending,children:[v?c.jsxs("div",{className:"flex items-center gap-2",children:[v.thumbnail?c.jsx("img",{src:v.thumbnail,alt:v.name,className:"w-6 h-6 rounded-full object-cover"}):c.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx(vl,{className:"w-4 h-4 text-gray-500"})}),c.jsx("span",{className:"text-gray-900",children:v.name})]}):c.jsx("span",{className:"text-gray-400",children:"Select a person..."}),c.jsx(nh,{className:`w-4 h-4 text-gray-400 transition-transform ${l?"rotate-180":""}`})]}),l&&c.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[c.jsx("div",{className:"p-2 border-b border-gray-100",children:c.jsxs("div",{className:"relative",children:[c.jsx(gl,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),c.jsx("input",{type:"text",value:d,onChange:E=>h(E.target.value),placeholder:"Search people...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),c.jsx("div",{className:"overflow-y-auto max-h-48",children:p?c.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):y.length>0?y.map(E=>c.jsxs("button",{type:"button",onClick:()=>{a(String(E.id)),u(!1),h("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${o===String(E.id)?"bg-primary-50":""}`,children:[E.thumbnail?c.jsx("img",{src:E.thumbnail,alt:E.name,className:"w-6 h-6 rounded-full object-cover"}):c.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx(vl,{className:"w-4 h-4 text-gray-500"})}),c.jsx("span",{className:"text-sm text-gray-900 truncate",children:E.name})]},E.id)):c.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"No people found"})})]})]})]}),c.jsxs("div",{className:"mb-4",children:[c.jsxs("label",{htmlFor:"todo-content",className:"block text-sm font-medium text-gray-700 mb-2",children:["Description ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{id:"todo-content",value:r,onChange:E=>n(E.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"What needs to be done?",disabled:m.isPending})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"todo-due-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Due date (optional)"}),c.jsx("input",{id:"todo-due-date",type:"date",value:S(i),onChange:E=>s(E.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:m.isPending})]}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx("button",{type:"button",onClick:x,className:"btn-secondary",disabled:m.isPending,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:m.isPending||!r.trim()||!o,children:m.isPending?"Adding...":"Add todo"})]})]})]})})}var Mm=t=>t.type==="checkbox",ec=t=>t instanceof Date,Xn=t=>t==null;const xne=t=>typeof t=="object";var wr=t=>!Xn(t)&&!Array.isArray(t)&&xne(t)&&!ec(t),wne=t=>wr(t)&&t.target?Mm(t.target)?t.target.checked:t.target.value:t,Zge=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Sne=(t,e)=>t.has(Zge(e)),eye=t=>{const e=t.constructor&&t.constructor.prototype;return wr(e)&&e.hasOwnProperty("isPrototypeOf")},yA=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Lt(t){if(t instanceof Date)return new Date(t);const e=typeof FileList<"u"&&t instanceof FileList;if(yA&&(t instanceof Blob||e))return t;const r=Array.isArray(t);if(!r&&!(wr(t)&&eye(t)))return t;const n=r?[]:Object.create(Object.getPrototypeOf(t));for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=Lt(t[i]));return n}var mb=t=>/^\w*$/.test(t),Dt=t=>t===void 0,gb=t=>Array.isArray(t)?t.filter(Boolean):[],vA=t=>gb(t.replace(/["|']|\]/g,"").split(/\.|\[/)),ye=(t,e,r)=>{if(!e||!wr(t))return r;const n=(mb(e)?[e]:vA(e)).reduce((i,s)=>Xn(i)?i:i[s],t);return Dt(n)||n===t?Dt(t[e])?r:t[e]:n},vi=t=>typeof t=="boolean",An=t=>typeof t=="function",jt=(t,e,r)=>{let n=-1;const i=mb(e)?[e]:vA(e),s=i.length,o=s-1;for(;++n<s;){const a=i[n];let l=r;if(n!==o){const u=t[a];l=wr(u)||Array.isArray(u)?u:isNaN(+i[n+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=l,t=t[a]}};const jv={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Bi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ho={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Ene=ie.createContext(null);Ene.displayName="HookFormContext";const yb=()=>ie.useContext(Ene);var _ne=(t,e,r,n=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==Bi.all&&(e._proxyFormState[o]=!n||Bi.all),r&&(r[o]=!0),t[o]}});return i};const vb=typeof window<"u"?ie.useLayoutEffect:ie.useEffect;function tye(t){const e=yb(),{control:r=e.control,disabled:n,name:i,exact:s}=t||{},[o,a]=ie.useState(r._formState),l=ie.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return vb(()=>r._subscribe({name:i,formState:l.current,exact:s,callback:u=>{!n&&a({...r._formState,...u})}}),[i,n,s]),ie.useEffect(()=>{l.current.isValid&&r._setValid(!0)},[r]),ie.useMemo(()=>_ne(o,r,l.current,!1),[o,r])}var bi=t=>typeof t=="string",QI=(t,e,r,n,i)=>bi(t)?(n&&e.watch.add(t),ye(r,t,i)):Array.isArray(t)?t.map(s=>(n&&e.watch.add(s),ye(r,s))):(n&&(e.watchAll=!0),r),XI=t=>Xn(t)||!xne(t);function gs(t,e,r=new WeakSet){if(XI(t)||XI(e))return Object.is(t,e);if(ec(t)&&ec(e))return t.getTime()===e.getTime();const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;if(r.has(t)||r.has(e))return!0;r.add(t),r.add(e);for(const s of n){const o=t[s];if(!i.includes(s))return!1;if(s!=="ref"){const a=e[s];if(ec(o)&&ec(a)||wr(o)&&wr(a)||Array.isArray(o)&&Array.isArray(a)?!gs(o,a,r):!Object.is(o,a))return!1}}return!0}function rye(t){const e=yb(),{control:r=e.control,name:n,defaultValue:i,disabled:s,exact:o,compute:a}=t||{},l=ie.useRef(i),u=ie.useRef(a),d=ie.useRef(void 0),h=ie.useRef(r),f=ie.useRef(n);u.current=a;const[p,m]=ie.useState(()=>{const x=r._getWatch(n,l.current);return u.current?u.current(x):x}),g=ie.useCallback(x=>{const S=QI(n,r._names,x||r._formValues,!1,l.current);return u.current?u.current(S):S},[r._formValues,r._names,n]),y=ie.useCallback(x=>{if(!s){const S=QI(n,r._names,x||r._formValues,!1,l.current);if(u.current){const E=u.current(S);gs(E,d.current)||(m(E),d.current=E)}else m(S)}},[r._formValues,r._names,s,n]);vb(()=>((h.current!==r||!gs(f.current,n))&&(h.current=r,f.current=n,y()),r._subscribe({name:n,formState:{values:!0},exact:o,callback:x=>{y(x.values)}})),[r,o,n,y]),ie.useEffect(()=>r._removeUnmounted());const v=h.current!==r,b=f.current,w=ie.useMemo(()=>{if(s)return null;const x=!v&&!gs(b,n);return v||x?g():null},[s,v,n,b,g]);return w!==null?w:p}function nye(t){const e=yb(),{name:r,disabled:n,control:i=e.control,shouldUnregister:s,defaultValue:o,exact:a=!0}=t,l=Sne(i._names.array,r),u=ie.useMemo(()=>ye(i._formValues,r,ye(i._defaultValues,r,o)),[i,r,o]),d=rye({control:i,name:r,defaultValue:u,exact:a}),h=tye({control:i,name:r,exact:a}),f=ie.useRef(t),p=ie.useRef(void 0),m=ie.useRef(i.register(r,{...t.rules,value:d,...vi(t.disabled)?{disabled:t.disabled}:{}}));f.current=t;const g=ie.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!ye(h.errors,r)},isDirty:{enumerable:!0,get:()=>!!ye(h.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!ye(h.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!ye(h.validatingFields,r)},error:{enumerable:!0,get:()=>ye(h.errors,r)}}),[h,r]),y=ie.useCallback(x=>m.current.onChange({target:{value:wne(x),name:r},type:jv.CHANGE}),[r]),v=ie.useCallback(()=>m.current.onBlur({target:{value:ye(i._formValues,r),name:r},type:jv.BLUR}),[r,i._formValues]),b=ie.useCallback(x=>{const S=ye(i._fields,r);S&&S._f&&x&&(S._f.ref={focus:()=>An(x.focus)&&x.focus(),select:()=>An(x.select)&&x.select(),setCustomValidity:E=>An(x.setCustomValidity)&&x.setCustomValidity(E),reportValidity:()=>An(x.reportValidity)&&x.reportValidity()})},[i._fields,r]),w=ie.useMemo(()=>({name:r,value:d,...vi(n)||h.disabled?{disabled:h.disabled||n}:{},onChange:y,onBlur:v,ref:b}),[r,n,h.disabled,y,v,b,d]);return ie.useEffect(()=>{const x=i._options.shouldUnregister||s,S=p.current;S&&S!==r&&!l&&i.unregister(S),i.register(r,{...f.current.rules,...vi(f.current.disabled)?{disabled:f.current.disabled}:{}});const E=(N,_)=>{const k=ye(i._fields,N);k&&k._f&&(k._f.mount=_)};if(E(r,!0),x){const N=Lt(ye(i._options.defaultValues,r,f.current.defaultValue));jt(i._defaultValues,r,N),Dt(ye(i._formValues,r))&&jt(i._formValues,r,N)}return!l&&i.register(r),p.current=r,()=>{(l?x&&!i._state.action:x)?i.unregister(r):E(r,!1)}},[r,i,l,s]),ie.useEffect(()=>{i._setDisabledField({disabled:n,name:r})},[n,r,i]),ie.useMemo(()=>({field:w,formState:h,fieldState:g}),[w,h,g])}const Tv=t=>t.render(nye(t));var iye=(t,e,r,n,i)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:i||!0}}:{},ni=t=>Array.isArray(t)?t:[t],X5=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}};function Nne(t,e){const r={};for(const n in t)if(t.hasOwnProperty(n)){const i=t[n],s=e[n];if(i&&wr(i)&&s){const o=Nne(i,s);wr(o)&&(r[n]=o)}else t[n]&&(r[n]=s)}return r}var vn=t=>wr(t)&&!Object.keys(t).length,bA=t=>t.type==="file",Ov=t=>{if(!yA)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Cne=t=>t.type==="select-multiple",xA=t=>t.type==="radio",sye=t=>xA(t)||Mm(t),ax=t=>Ov(t)&&t.isConnected;function oye(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=Dt(t)?n++:t[e[n++]];return t}function aye(t){for(const e in t)if(t.hasOwnProperty(e)&&!Dt(t[e]))return!1;return!0}function ur(t,e){const r=Array.isArray(e)?e:mb(e)?[e]:vA(e),n=r.length===1?t:oye(t,r),i=r.length-1,s=r[i];return n&&delete n[s],i!==0&&(wr(n)&&vn(n)||Array.isArray(n)&&aye(n))&&ur(t,r.slice(0,-1)),t}var lye=t=>{for(const e in t)if(An(t[e]))return!0;return!1};function kne(t){return Array.isArray(t)||wr(t)&&!lye(t)}function JI(t,e={}){for(const r in t){const n=t[r];kne(n)?(e[r]=Array.isArray(n)?[]:{},JI(n,e[r])):Dt(n)||(e[r]=!0)}return e}function Hu(t,e,r){r||(r=JI(e));for(const n in t){const i=t[n];if(kne(i))Dt(e)||XI(r[n])?r[n]=JI(i,Array.isArray(i)?[]:{}):Hu(i,Xn(e)?{}:e[n],r[n]);else{const s=e[n];r[n]=!gs(i,s)}}return r}const J5={value:!1,isValid:!1},Z5={value:!0,isValid:!0};var jne=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Dt(t[0].attributes.value)?Dt(t[0].value)||t[0].value===""?Z5:{value:t[0].value,isValid:!0}:Z5:J5}return J5},Tne=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>Dt(t)?t:e?t===""?NaN:t&&+t:r&&bi(t)?new Date(t):n?n(t):t;const e3={isValid:!1,value:null};var One=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,e3):e3;function t3(t){const e=t.ref;return bA(e)?e.files:xA(e)?One(t.refs).value:Cne(e)?[...e.selectedOptions].map(({value:r})=>r):Mm(e)?jne(t.refs).value:Tne(Dt(e.value)?t.ref.value:e.value,t)}var cye=(t,e,r,n)=>{const i={};for(const s of t){const o=ye(e,s);o&&jt(i,s,o._f)}return{criteriaMode:r,names:[...t],fields:i,shouldUseNativeValidation:n}},Pv=t=>t instanceof RegExp,Ef=t=>Dt(t)?t:Pv(t)?t.source:wr(t)?Pv(t.value)?t.value.source:t.value:t,cd=t=>({isOnSubmit:!t||t===Bi.onSubmit,isOnBlur:t===Bi.onBlur,isOnChange:t===Bi.onChange,isOnAll:t===Bi.all,isOnTouch:t===Bi.onTouched});const r3="AsyncFunction";var uye=t=>!!t&&!!t.validate&&!!(An(t.validate)&&t.validate.constructor.name===r3||wr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===r3)),dye=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),ZI=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const _d=(t,e,r,n)=>{for(const i of r||Object.keys(t)){const s=ye(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!n)return!0;if(o.ref&&e(o.ref,o.name)&&!n)return!0;if(_d(a,e))break}else if(wr(a)&&_d(a,e))break}}};function n3(t,e,r){const n=ye(t,r);if(n||mb(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const s=i.join("."),o=ye(e,s),a=ye(t,s);if(o&&!Array.isArray(o)&&r!==s)return{name:r};if(a&&a.type)return{name:s,error:a};if(a&&a.root&&a.root.type)return{name:`${s}.root`,error:a.root};i.pop()}return{name:r}}var hye=(t,e,r,n)=>{r(t);const{name:i,...s}=t;return vn(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!n||Bi.all))},fye=(t,e,r)=>!t||!e||t===e||ni(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n))),pye=(t,e,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(e||t):(r?n.isOnBlur:i.isOnBlur)?!t:(r?n.isOnChange:i.isOnChange)?t:!0,mye=(t,e)=>!gb(ye(t,e)).length&&ur(t,e),Pne=(t,e,r)=>{const n=ni(ye(t,r));return jt(n,"root",e[r]),jt(t,r,n),t};function i3(t,e,r="validate"){if(bi(t)||Array.isArray(t)&&t.every(bi)||vi(t)&&!t)return{type:r,message:bi(t)?t:"",ref:e}}var $u=t=>wr(t)&&!Pv(t)?t:{value:t,message:""},eR=async(t,e,r,n,i,s)=>{const{ref:o,refs:a,required:l,maxLength:u,minLength:d,min:h,max:f,pattern:p,validate:m,name:g,valueAsNumber:y,mount:v}=t._f,b=ye(r,g);if(!v||e.has(g))return{};const w=a?a[0]:o,x=P=>{i&&w.reportValidity&&(w.setCustomValidity(vi(P)?"":P||""),w.reportValidity())},S={},E=xA(o),N=Mm(o),_=E||N,k=(y||bA(o))&&Dt(o.value)&&Dt(b)||Ov(o)&&o.value===""||b===""||Array.isArray(b)&&!b.length,j=iye.bind(null,g,n,S),T=(P,O,D,F=ho.maxLength,$=ho.minLength)=>{const q=P?O:D;S[g]={type:P?F:$,message:q,ref:o,...j(P?F:$,q)}};if(s?!Array.isArray(b)||!b.length:l&&(!_&&(k||Xn(b))||vi(b)&&!b||N&&!jne(a).isValid||E&&!One(a).isValid)){const{value:P,message:O}=bi(l)?{value:!!l,message:l}:$u(l);if(P&&(S[g]={type:ho.required,message:O,ref:w,...j(ho.required,O)},!n))return x(O),S}if(!k&&(!Xn(h)||!Xn(f))){let P,O;const D=$u(f),F=$u(h);if(!Xn(b)&&!isNaN(b)){const $=o.valueAsNumber||b&&+b;Xn(D.value)||(P=$>D.value),Xn(F.value)||(O=$<F.value)}else{const $=o.valueAsDate||new Date(b),q=X=>new Date(new Date().toDateString()+" "+X),M=o.type=="time",B=o.type=="week";bi(D.value)&&b&&(P=M?q(b)>q(D.value):B?b>D.value:$>new Date(D.value)),bi(F.value)&&b&&(O=M?q(b)<q(F.value):B?b<F.value:$<new Date(F.value))}if((P||O)&&(T(!!P,D.message,F.message,ho.max,ho.min),!n))return x(S[g].message),S}if((u||d)&&!k&&(bi(b)||s&&Array.isArray(b))){const P=$u(u),O=$u(d),D=!Xn(P.value)&&b.length>+P.value,F=!Xn(O.value)&&b.length<+O.value;if((D||F)&&(T(D,P.message,O.message),!n))return x(S[g].message),S}if(p&&!k&&bi(b)){const{value:P,message:O}=$u(p);if(Pv(P)&&!b.match(P)&&(S[g]={type:ho.pattern,message:O,ref:o,...j(ho.pattern,O)},!n))return x(O),S}if(m){if(An(m)){const P=await m(b,r),O=i3(P,w);if(O&&(S[g]={...O,...j(ho.validate,O.message)},!n))return x(O.message),S}else if(wr(m)){let P={};for(const O in m){if(!vn(P)&&!n)break;const D=i3(await m[O](b,r),w,O);D&&(P={...D,...j(O,D.message)},x(D.message),n&&(S[g]=P))}if(!vn(P)&&(S[g]={ref:w,...P},!n))return S}}return x(!0),S};const gye={mode:Bi.onSubmit,reValidateMode:Bi.onChange,shouldFocusError:!0};function yye(t={}){let e={...gye,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:An(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},n={},i=wr(e.defaultValues)||wr(e.values)?Lt(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:Lt(i),o={action:!1,mount:!1,watch:!1,keepIsValid:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={...d};let f={...h};const p={array:X5(),state:X5()},m=e.criteriaMode===Bi.all,g=A=>L=>{clearTimeout(u),u=setTimeout(A,L)},y=async A=>{if(!o.keepIsValid&&!e.disabled&&(h.isValid||f.isValid||A)){let L;e.resolver?(L=vn((await _()).errors),v()):L=await j(n,!0),L!==r.isValid&&p.state.next({isValid:L})}},v=(A,L)=>{!e.disabled&&(h.isValidating||h.validatingFields||f.isValidating||f.validatingFields)&&((A||Array.from(a.mount)).forEach(V=>{V&&(L?jt(r.validatingFields,V,L):ur(r.validatingFields,V))}),p.state.next({validatingFields:r.validatingFields,isValidating:!vn(r.validatingFields)}))},b=(A,L=[],V,ce,re=!0,ne=!0)=>{if(ce&&V&&!e.disabled){if(o.action=!0,ne&&Array.isArray(ye(n,A))){const ge=V(ye(n,A),ce.argA,ce.argB);re&&jt(n,A,ge)}if(ne&&Array.isArray(ye(r.errors,A))){const ge=V(ye(r.errors,A),ce.argA,ce.argB);re&&jt(r.errors,A,ge),mye(r.errors,A)}if((h.touchedFields||f.touchedFields)&&ne&&Array.isArray(ye(r.touchedFields,A))){const ge=V(ye(r.touchedFields,A),ce.argA,ce.argB);re&&jt(r.touchedFields,A,ge)}(h.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Hu(i,s)),p.state.next({name:A,isDirty:P(A,L),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else jt(s,A,L)},w=(A,L)=>{jt(r.errors,A,L),p.state.next({errors:r.errors})},x=A=>{r.errors=A,p.state.next({errors:r.errors,isValid:!1})},S=(A,L,V,ce)=>{const re=ye(n,A);if(re){const ne=ye(s,A,Dt(V)?ye(i,A):V);Dt(ne)||ce&&ce.defaultChecked||L?jt(s,A,L?ne:t3(re._f)):F(A,ne),o.mount&&!o.action&&y()}},E=(A,L,V,ce,re)=>{let ne=!1,ge=!1;const Le={name:A};if(!e.disabled){if(!V||ce){(h.isDirty||f.isDirty)&&(ge=r.isDirty,r.isDirty=Le.isDirty=P(),ne=ge!==Le.isDirty);const Ve=gs(ye(i,A),L);ge=!!ye(r.dirtyFields,A),Ve?ur(r.dirtyFields,A):jt(r.dirtyFields,A,!0),Le.dirtyFields=r.dirtyFields,ne=ne||(h.dirtyFields||f.dirtyFields)&&ge!==!Ve}if(V){const Ve=ye(r.touchedFields,A);Ve||(jt(r.touchedFields,A,V),Le.touchedFields=r.touchedFields,ne=ne||(h.touchedFields||f.touchedFields)&&Ve!==V)}ne&&re&&p.state.next(Le)}return ne?Le:{}},N=(A,L,V,ce)=>{const re=ye(r.errors,A),ne=(h.isValid||f.isValid)&&vi(L)&&r.isValid!==L;if(e.delayError&&V?(l=g(()=>w(A,V)),l(e.delayError)):(clearTimeout(u),l=null,V?jt(r.errors,A,V):ur(r.errors,A)),(V?!gs(re,V):re)||!vn(ce)||ne){const ge={...ce,...ne&&vi(L)?{isValid:L}:{},errors:r.errors,name:A};r={...r,...ge},p.state.next(ge)}},_=async A=>(v(A,!0),await e.resolver(s,e.context,cye(A||a.mount,n,e.criteriaMode,e.shouldUseNativeValidation))),k=async A=>{const{errors:L}=await _(A);if(v(A),A)for(const V of A){const ce=ye(L,V);ce?jt(r.errors,V,ce):ur(r.errors,V)}else r.errors=L;return L},j=async(A,L,V={valid:!0})=>{for(const ce in A){const re=A[ce];if(re){const{_f:ne,...ge}=re;if(ne){const Le=a.array.has(ne.name),Ve=re._f&&uye(re._f);Ve&&h.validatingFields&&v([ne.name],!0);const U=await eR(re,a.disabled,s,m,e.shouldUseNativeValidation&&!L,Le);if(Ve&&h.validatingFields&&v([ne.name]),U[ne.name]&&(V.valid=!1,L))break;!L&&(ye(U,ne.name)?Le?Pne(r.errors,U,ne.name):jt(r.errors,ne.name,U[ne.name]):ur(r.errors,ne.name))}!vn(ge)&&await j(ge,L,V)}}return V.valid},T=()=>{for(const A of a.unMount){const L=ye(n,A);L&&(L._f.refs?L._f.refs.every(V=>!ax(V)):!ax(L._f.ref))&&Ie(A)}a.unMount=new Set},P=(A,L)=>!e.disabled&&(A&&L&&jt(s,A,L),!gs(Q(),i)),O=(A,L,V)=>QI(A,a,{...o.mount?s:Dt(L)?i:bi(A)?{[A]:L}:L},V,L),D=A=>gb(ye(o.mount?s:i,A,e.shouldUnregister?ye(i,A,[]):[])),F=(A,L,V={})=>{const ce=ye(n,A);let re=L;if(ce){const ne=ce._f;ne&&(!ne.disabled&&jt(s,A,Tne(L,ne)),re=Ov(ne.ref)&&Xn(L)?"":L,Cne(ne.ref)?[...ne.ref.options].forEach(ge=>ge.selected=re.includes(ge.value)):ne.refs?Mm(ne.ref)?ne.refs.forEach(ge=>{(!ge.defaultChecked||!ge.disabled)&&(Array.isArray(re)?ge.checked=!!re.find(Le=>Le===ge.value):ge.checked=re===ge.value||!!re)}):ne.refs.forEach(ge=>ge.checked=ge.value===re):bA(ne.ref)?ne.ref.value="":(ne.ref.value=re,ne.ref.type||p.state.next({name:A,values:Lt(s)})))}(V.shouldDirty||V.shouldTouch)&&E(A,re,V.shouldTouch,V.shouldDirty,!0),V.shouldValidate&&X(A)},$=(A,L,V)=>{for(const ce in L){if(!L.hasOwnProperty(ce))return;const re=L[ce],ne=A+"."+ce,ge=ye(n,ne);(a.array.has(A)||wr(re)||ge&&!ge._f)&&!ec(re)?$(ne,re,V):F(ne,re,V)}},q=(A,L,V={})=>{const ce=ye(n,A),re=a.array.has(A),ne=Lt(L);jt(s,A,ne),re?(p.array.next({name:A,values:Lt(s)}),(h.isDirty||h.dirtyFields||f.isDirty||f.dirtyFields)&&V.shouldDirty&&p.state.next({name:A,dirtyFields:Hu(i,s),isDirty:P(A,ne)})):ce&&!ce._f&&!Xn(ne)?$(A,ne,V):F(A,ne,V),ZI(A,a)&&p.state.next({...r,name:A}),p.state.next({name:o.mount?A:void 0,values:Lt(s)})},M=async A=>{o.mount=!0;const L=A.target;let V=L.name,ce=!0;const re=ye(n,V),ne=Ve=>{ce=Number.isNaN(Ve)||ec(Ve)&&isNaN(Ve.getTime())||gs(Ve,ye(s,V,Ve))},ge=cd(e.mode),Le=cd(e.reValidateMode);if(re){let Ve,U;const K=L.type?t3(re._f):wne(A),z=A.type===jv.BLUR||A.type===jv.FOCUS_OUT,Z=!dye(re._f)&&!e.resolver&&!ye(r.errors,V)&&!re._f.deps||pye(z,ye(r.touchedFields,V),r.isSubmitted,Le,ge),pe=ZI(V,a,z);jt(s,V,K),z?(!L||!L.readOnly)&&(re._f.onBlur&&re._f.onBlur(A),l&&l(0)):re._f.onChange&&re._f.onChange(A);const we=E(V,K,z),We=!vn(we)||pe;if(!z&&p.state.next({name:V,type:A.type,values:Lt(s)}),Z)return(h.isValid||f.isValid)&&(e.mode==="onBlur"?z&&y():z||y()),We&&p.state.next({name:V,...pe?{}:we});if(!z&&pe&&p.state.next({...r}),e.resolver){const{errors:rn}=await _([V]);if(v([V]),ne(K),ce){const Ir=n3(r.errors,n,V),ks=n3(rn,n,Ir.name||V);Ve=ks.error,V=ks.name,U=vn(rn)}}else v([V],!0),Ve=(await eR(re,a.disabled,s,m,e.shouldUseNativeValidation))[V],v([V]),ne(K),ce&&(Ve?U=!1:(h.isValid||f.isValid)&&(U=await j(n,!0)));ce&&(re._f.deps&&(!Array.isArray(re._f.deps)||re._f.deps.length>0)&&X(re._f.deps),N(V,U,Ve,we))}},B=(A,L)=>{if(ye(r.errors,L)&&A.focus)return A.focus(),1},X=async(A,L={})=>{let V,ce;const re=ni(A);if(e.resolver){const ne=await k(Dt(A)?A:re);V=vn(ne),ce=A?!re.some(ge=>ye(ne,ge)):V}else A?(ce=(await Promise.all(re.map(async ne=>{const ge=ye(n,ne);return await j(ge&&ge._f?{[ne]:ge}:ge)}))).every(Boolean),!(!ce&&!r.isValid)&&y()):ce=V=await j(n);return p.state.next({...!bi(A)||(h.isValid||f.isValid)&&V!==r.isValid?{}:{name:A},...e.resolver||!A?{isValid:V}:{},errors:r.errors}),L.shouldFocus&&!ce&&_d(n,B,A?re:a.mount),ce},Q=(A,L)=>{let V={...o.mount?s:i};return L&&(V=Nne(L.dirtyFields?r.dirtyFields:r.touchedFields,V)),Dt(A)?V:bi(A)?ye(V,A):A.map(ce=>ye(V,ce))},le=(A,L)=>({invalid:!!ye((L||r).errors,A),isDirty:!!ye((L||r).dirtyFields,A),error:ye((L||r).errors,A),isValidating:!!ye(r.validatingFields,A),isTouched:!!ye((L||r).touchedFields,A)}),G=A=>{A&&ni(A).forEach(L=>ur(r.errors,L)),p.state.next({errors:A?r.errors:{}})},se=(A,L,V)=>{const ce=(ye(n,A,{_f:{}})._f||{}).ref,re=ye(r.errors,A)||{},{ref:ne,message:ge,type:Le,...Ve}=re;jt(r.errors,A,{...Ve,...L,ref:ce}),p.state.next({name:A,errors:r.errors,isValid:!1}),V&&V.shouldFocus&&ce&&ce.focus&&ce.focus()},ke=(A,L)=>An(A)?p.state.subscribe({next:V=>"values"in V&&A(O(void 0,L),V)}):O(A,L,!0),be=A=>p.state.subscribe({next:L=>{fye(A.name,L.name,A.exact)&&hye(L,A.formState||h,vr,A.reRenderRoot)&&A.callback({values:{...s},...r,...L,defaultValues:i})}}).unsubscribe,$e=A=>(o.mount=!0,f={...f,...A.formState},be({...A,formState:{...d,...A.formState}})),Ie=(A,L={})=>{for(const V of A?ni(A):a.mount)a.mount.delete(V),a.array.delete(V),L.keepValue||(ur(n,V),ur(s,V)),!L.keepError&&ur(r.errors,V),!L.keepDirty&&ur(r.dirtyFields,V),!L.keepTouched&&ur(r.touchedFields,V),!L.keepIsValidating&&ur(r.validatingFields,V),!e.shouldUnregister&&!L.keepDefaultValue&&ur(i,V);p.state.next({values:Lt(s)}),p.state.next({...r,...L.keepDirty?{isDirty:P()}:{}}),!L.keepIsValid&&y()},Nt=({disabled:A,name:L})=>{(vi(A)&&o.mount||A||a.disabled.has(L))&&(A?a.disabled.add(L):a.disabled.delete(L))},Ct=(A,L={})=>{let V=ye(n,A);const ce=vi(L.disabled)||vi(e.disabled);return jt(n,A,{...V||{},_f:{...V&&V._f?V._f:{ref:{name:A}},name:A,mount:!0,...L}}),a.mount.add(A),V?Nt({disabled:vi(L.disabled)?L.disabled:e.disabled,name:A}):S(A,!0,L.value),{...ce?{disabled:L.disabled||e.disabled}:{},...e.progressive?{required:!!L.required,min:Ef(L.min),max:Ef(L.max),minLength:Ef(L.minLength),maxLength:Ef(L.maxLength),pattern:Ef(L.pattern)}:{},name:A,onChange:M,onBlur:M,ref:re=>{if(re){Ct(A,L),V=ye(n,A);const ne=Dt(re.value)&&re.querySelectorAll&&re.querySelectorAll("input,select,textarea")[0]||re,ge=sye(ne),Le=V._f.refs||[];if(ge?Le.find(Ve=>Ve===ne):ne===V._f.ref)return;jt(n,A,{_f:{...V._f,...ge?{refs:[...Le.filter(ax),ne,...Array.isArray(ye(i,A))?[{}]:[]],ref:{type:ne.type,name:A}}:{ref:ne}}}),S(A,!1,void 0,ne)}else V=ye(n,A,{}),V._f&&(V._f.mount=!1),(e.shouldUnregister||L.shouldUnregister)&&!(Sne(a.array,A)&&o.action)&&a.unMount.add(A)}}},kt=()=>e.shouldFocusError&&_d(n,B,a.mount),er=A=>{vi(A)&&(p.state.next({disabled:A}),_d(n,(L,V)=>{const ce=ye(n,V);ce&&(L.disabled=ce._f.disabled||A,Array.isArray(ce._f.refs)&&ce._f.refs.forEach(re=>{re.disabled=ce._f.disabled||A}))},0,!1))},Ye=(A,L)=>async V=>{let ce;V&&(V.preventDefault&&V.preventDefault(),V.persist&&V.persist());let re=Lt(s);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:ne,values:ge}=await _();v(),r.errors=ne,re=Lt(ge)}else await j(n);if(a.disabled.size)for(const ne of a.disabled)ur(re,ne);if(ur(r.errors,"root"),vn(r.errors)){p.state.next({errors:{}});try{await A(re,V)}catch(ne){ce=ne}}else L&&await L({...r.errors},V),kt(),setTimeout(kt);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:vn(r.errors)&&!ce,submitCount:r.submitCount+1,errors:r.errors}),ce)throw ce},yr=(A,L={})=>{ye(n,A)&&(Dt(L.defaultValue)?q(A,Lt(ye(i,A))):(q(A,L.defaultValue),jt(i,A,Lt(L.defaultValue))),L.keepTouched||ur(r.touchedFields,A),L.keepDirty||(ur(r.dirtyFields,A),r.isDirty=L.defaultValue?P(A,Lt(ye(i,A))):P()),L.keepError||(ur(r.errors,A),h.isValid&&y()),p.state.next({...r}))},en=(A,L={})=>{const V=A?Lt(A):i,ce=Lt(V),re=vn(A),ne=re?i:ce;if(L.keepDefaultValues||(i=V),!L.keepValues){if(L.keepDirtyValues){const ge=new Set([...a.mount,...Object.keys(Hu(i,s))]);for(const Le of Array.from(ge))ye(r.dirtyFields,Le)?jt(ne,Le,ye(s,Le)):q(Le,ye(ne,Le))}else{if(yA&&Dt(A))for(const ge of a.mount){const Le=ye(n,ge);if(Le&&Le._f){const Ve=Array.isArray(Le._f.refs)?Le._f.refs[0]:Le._f.ref;if(Ov(Ve)){const U=Ve.closest("form");if(U){U.reset();break}}}}if(L.keepFieldsRef)for(const ge of a.mount)q(ge,ye(ne,ge));else n={}}s=e.shouldUnregister?L.keepDefaultValues?Lt(i):{}:Lt(ne),p.array.next({values:{...ne}}),p.state.next({values:{...ne}})}a={mount:L.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!L.keepIsValid||!!L.keepDirtyValues||!e.shouldUnregister&&!vn(ne),o.watch=!!e.shouldUnregister,o.keepIsValid=!!L.keepIsValid,o.action=!1,L.keepErrors||(r.errors={}),p.state.next({submitCount:L.keepSubmitCount?r.submitCount:0,isDirty:re?!1:L.keepDirty?r.isDirty:!!(L.keepDefaultValues&&!gs(A,i)),isSubmitted:L.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:re?{}:L.keepDirtyValues?L.keepDefaultValues&&s?Hu(i,s):r.dirtyFields:L.keepDefaultValues&&A?Hu(i,A):L.keepDirty?r.dirtyFields:{},touchedFields:L.keepTouched?r.touchedFields:{},errors:L.keepErrors?r.errors:{},isSubmitSuccessful:L.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},Pr=(A,L)=>en(An(A)?A(s):A,{...e.resetOptions,...L}),st=(A,L={})=>{const V=ye(n,A),ce=V&&V._f;if(ce){const re=ce.refs?ce.refs[0]:ce.ref;re.focus&&setTimeout(()=>{re.focus(),L.shouldSelect&&An(re.select)&&re.select()})}},vr=A=>{r={...r,...A}},tn={control:{register:Ct,unregister:Ie,getFieldState:le,handleSubmit:Ye,setError:se,_subscribe:be,_runSchema:_,_updateIsValidating:v,_focusError:kt,_getWatch:O,_getDirty:P,_setValid:y,_setFieldArray:b,_setDisabledField:Nt,_setErrors:x,_getFieldArray:D,_reset:en,_resetDefaultValues:()=>An(e.defaultValues)&&e.defaultValues().then(A=>{Pr(A,e.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:T,_disableForm:er,_subjects:p,_proxyFormState:h,get _fields(){return n},get _formValues(){return s},get _state(){return o},set _state(A){o=A},get _defaultValues(){return i},get _names(){return a},set _names(A){a=A},get _formState(){return r},get _options(){return e},set _options(A){e={...e,...A}}},subscribe:$e,trigger:X,register:Ct,handleSubmit:Ye,watch:ke,setValue:q,getValues:Q,reset:Pr,resetField:yr,clearErrors:G,unregister:Ie,setError:se,setFocus:st,getFieldState:le};return{...tn,formControl:tn}}var ca=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const t=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const r=(Math.random()*16+t)%16|0;return(e=="x"?r:r&3|8).toString(16)})},lx=(t,e,r={})=>r.shouldFocus||Dt(r.shouldFocus)?r.focusName||`${t}.${Dt(r.focusIndex)?e:r.focusIndex}.`:"",cx=(t,e)=>[...t,...ni(e)],ux=t=>Array.isArray(t)?t.map(()=>{}):void 0;function dx(t,e,r){return[...t.slice(0,e),...ni(r),...t.slice(e)]}var hx=(t,e,r)=>Array.isArray(t)?(Dt(t[r])&&(t[r]=void 0),t.splice(r,0,t.splice(e,1)[0]),t):[],fx=(t,e)=>[...ni(e),...ni(t)];function vye(t,e){let r=0;const n=[...t];for(const i of e)n.splice(i-r,1),r++;return gb(n).length?n:[]}var px=(t,e)=>Dt(e)?[]:vye(t,ni(e).sort((r,n)=>r-n)),mx=(t,e,r)=>{[t[e],t[r]]=[t[r],t[e]]},s3=(t,e,r)=>(t[e]=r,t);function bye(t){const e=yb(),{control:r=e.control,name:n,keyName:i="id",shouldUnregister:s,rules:o}=t,[a,l]=ie.useState(r._getFieldArray(n)),u=ie.useRef(r._getFieldArray(n).map(ca)),d=ie.useRef(!1);r._names.array.add(n),ie.useMemo(()=>o&&a.length>=0&&r.register(n,o),[r,n,a.length,o]),vb(()=>r._subjects.array.subscribe({next:({values:x,name:S})=>{if(S===n||!S){const E=ye(x,n);Array.isArray(E)&&(l(E),u.current=E.map(ca))}}}).unsubscribe,[r,n]);const h=ie.useCallback(x=>{d.current=!0,r._setFieldArray(n,x)},[r,n]),f=(x,S)=>{const E=ni(Lt(x)),N=cx(r._getFieldArray(n),E);r._names.focus=lx(n,N.length-1,S),u.current=cx(u.current,E.map(ca)),h(N),l(N),r._setFieldArray(n,N,cx,{argA:ux(x)})},p=(x,S)=>{const E=ni(Lt(x)),N=fx(r._getFieldArray(n),E);r._names.focus=lx(n,0,S),u.current=fx(u.current,E.map(ca)),h(N),l(N),r._setFieldArray(n,N,fx,{argA:ux(x)})},m=x=>{const S=px(r._getFieldArray(n),x);u.current=px(u.current,x),h(S),l(S),!Array.isArray(ye(r._fields,n))&&jt(r._fields,n,void 0),r._setFieldArray(n,S,px,{argA:x})},g=(x,S,E)=>{const N=ni(Lt(S)),_=dx(r._getFieldArray(n),x,N);r._names.focus=lx(n,x,E),u.current=dx(u.current,x,N.map(ca)),h(_),l(_),r._setFieldArray(n,_,dx,{argA:x,argB:ux(S)})},y=(x,S)=>{const E=r._getFieldArray(n);mx(E,x,S),mx(u.current,x,S),h(E),l(E),r._setFieldArray(n,E,mx,{argA:x,argB:S},!1)},v=(x,S)=>{const E=r._getFieldArray(n);hx(E,x,S),hx(u.current,x,S),h(E),l(E),r._setFieldArray(n,E,hx,{argA:x,argB:S},!1)},b=(x,S)=>{const E=Lt(S),N=s3(r._getFieldArray(n),x,E);u.current=[...N].map((_,k)=>!_||k===x?ca():u.current[k]),h(N),l([...N]),r._setFieldArray(n,N,s3,{argA:x,argB:E},!0,!1)},w=x=>{const S=ni(Lt(x));u.current=S.map(ca),h([...S]),l([...S]),r._setFieldArray(n,[...S],E=>E,{},!0,!1)};return ie.useEffect(()=>{if(r._state.action=!1,ZI(n,r._names)&&r._subjects.state.next({...r._formState}),d.current&&(!cd(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!cd(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(x=>{r._updateIsValidating([n]);const S=ye(x.errors,n),E=ye(r._formState.errors,n);(E?!S&&E.type||S&&(E.type!==S.type||E.message!==S.message):S&&S.type)&&(S?jt(r._formState.errors,n,S):ur(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const x=ye(r._fields,n);x&&x._f&&!(cd(r._options.reValidateMode).isOnSubmit&&cd(r._options.mode).isOnSubmit)&&eR(x,r._names.disabled,r._formValues,r._options.criteriaMode===Bi.all,r._options.shouldUseNativeValidation,!0).then(S=>!vn(S)&&r._subjects.state.next({errors:Pne(r._formState.errors,S,n)}))}r._subjects.state.next({name:n,values:Lt(r._formValues)}),r._names.focus&&_d(r._fields,(x,S)=>{if(r._names.focus&&S.startsWith(r._names.focus)&&x.focus)return x.focus(),1}),r._names.focus="",r._setValid(),d.current=!1},[a,n,r]),ie.useEffect(()=>(!ye(r._formValues,n)&&r._setFieldArray(n),()=>{const x=(S,E)=>{const N=ye(r._fields,S);N&&N._f&&(N._f.mount=E)};r._options.shouldUnregister||s?r.unregister(n):x(n,!1)}),[n,r,i,s]),{swap:ie.useCallback(y,[h,n,r]),move:ie.useCallback(v,[h,n,r]),prepend:ie.useCallback(p,[h,n,r]),append:ie.useCallback(f,[h,n,r]),remove:ie.useCallback(m,[h,n,r]),insert:ie.useCallback(g,[h,n,r]),update:ie.useCallback(b,[h,n,r]),replace:ie.useCallback(w,[h,n,r]),fields:ie.useMemo(()=>a.map((x,S)=>({...x,[i]:u.current[S]||ca()})),[a,i])}}function eo(t={}){const e=ie.useRef(void 0),r=ie.useRef(void 0),[n,i]=ie.useState({isDirty:!1,isValidating:!1,isLoading:An(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:An(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:n},t.defaultValues&&!An(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...a}=yye(t);e.current={...a,formState:n}}const s=e.current.control;return s._options=t,vb(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(a=>({...a,isReady:!0})),s._formState.isReady=!0,o},[s]),ie.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),ie.useEffect(()=>{t.mode&&(s._options.mode=t.mode),t.reValidateMode&&(s._options.reValidateMode=t.reValidateMode)},[s,t.mode,t.reValidateMode]),ie.useEffect(()=>{t.errors&&(s._setErrors(t.errors),s._focusError())},[s,t.errors]),ie.useEffect(()=>{t.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,t.shouldUnregister]),ie.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==n.isDirty&&s._subjects.state.next({isDirty:o})}},[s,n.isDirty]),ie.useEffect(()=>{var o;t.values&&!gs(t.values,r.current)?(s._reset(t.values,{keepFieldsRef:!0,...s._options.resetOptions}),!((o=s._options.resetOptions)===null||o===void 0)&&o.keepIsValid||s._setValid(),r.current=t.values,i(a=>({...a}))):s._resetDefaultValues()},[s,t.values]),ie.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=_ne(n,s),e.current}function bb(){return at({queryKey:["workspaces"],queryFn:async()=>(await Se.getWorkspaces()).data})}function Ine(t){return at({queryKey:["workspaces",t],queryFn:async()=>(await Se.getWorkspace(t)).data,enabled:!!t})}function xye(){const t=tt();return He({mutationFn:async e=>(await Se.createWorkspace(e)).data,onSuccess:()=>{t.invalidateQueries({queryKey:["workspaces"]})}})}function wye(){const t=tt();return He({mutationFn:async({id:e,data:r})=>(await Se.updateWorkspace(e,r)).data,onSuccess:(e,{id:r})=>{t.invalidateQueries({queryKey:["workspaces"]}),t.invalidateQueries({queryKey:["workspaces",r]})}})}function Sye(){const t=tt();return He({mutationFn:async e=>{await Se.deleteWorkspace(e)},onSuccess:()=>{t.invalidateQueries({queryKey:["workspaces"]})}})}function Eye(){const t=tt();return He({mutationFn:async({workspaceId:e,userId:r})=>{await Se.removeWorkspaceMember(e,r)},onSuccess:(e,{workspaceId:r})=>{t.invalidateQueries({queryKey:["workspaces",r]})}})}function _ye(){const t=tt();return He({mutationFn:async({workspaceId:e,userId:r,role:n})=>(await Se.updateWorkspaceMember(e,r,{role:n})).data,onSuccess:(e,{workspaceId:r})=>{t.invalidateQueries({queryKey:["workspaces",r]})}})}function Nye(t){return at({queryKey:["workspaces",t,"invites"],queryFn:async()=>(await Se.getWorkspaceInvites(t)).data,enabled:!!t})}function Cye(){const t=tt();return He({mutationFn:async({workspaceId:e,email:r,role:n})=>(await Se.createWorkspaceInvite(e,{email:r,role:n})).data,onSuccess:(e,{workspaceId:r})=>{t.invalidateQueries({queryKey:["workspaces",r,"invites"]})}})}function kye(){const t=tt();return He({mutationFn:async({workspaceId:e,inviteId:r})=>{await Se.revokeWorkspaceInvite(e,r)},onSuccess:(e,{workspaceId:r})=>{t.invalidateQueries({queryKey:["workspaces",r,"invites"]})}})}function jye(t){return at({queryKey:["invite",t],queryFn:async()=>(await Se.validateInvite(t)).data,enabled:!!t,retry:!1})}function Tye(){const t=tt();return He({mutationFn:async e=>(await Se.acceptInvite(e)).data,onSuccess:()=>{t.invalidateQueries({queryKey:["workspaces"]})}})}function Rne({value:t="private",workspaces:e=[],onChange:r,disabled:n=!1}){const[i,s]=C.useState(!1),{data:o=[],isLoading:a}=bb(),l=[{value:"private",label:"Private",description:"Only you can see this",icon:Rm},{value:"workspace",label:"Workspace",description:"Share with workspace members",icon:$r}],u=l.find(p=>p.value===t)||l[0],d=u.icon,h=p=>{r==null||r({visibility:p,workspaces:p==="private"?[]:e}),p==="private"&&s(!1)},f=p=>{const m=e.includes(p)?e.filter(g=>g!==p):[...e,p];r==null||r({visibility:t,workspaces:m})};return c.jsxs("div",{className:"relative",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Visibility"}),c.jsxs("button",{type:"button",onClick:()=>!n&&s(!i),disabled:n,className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-lg bg-white text-left focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(d,{className:"w-4 h-4 text-gray-500"}),c.jsx("span",{className:"text-sm text-gray-900",children:u.label})]}),c.jsx(nh,{className:`w-4 h-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]}),i&&c.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg",children:[c.jsx("div",{className:"p-2 border-b border-gray-100",children:l.map(p=>{const m=p.icon,g=t===p.value;return c.jsxs("button",{type:"button",onClick:()=>h(p.value),className:`w-full flex items-start gap-3 p-2 rounded-md text-left hover:bg-gray-50 ${g?"bg-primary-50":""}`,children:[c.jsx(m,{className:`w-4 h-4 mt-0.5 ${g?"text-primary-600":"text-gray-400"}`}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:`text-sm font-medium ${g?"text-primary-900":"text-gray-900"}`,children:p.label}),c.jsx("div",{className:"text-xs text-gray-500",children:p.description})]}),g&&c.jsx(Bc,{className:"w-4 h-4 text-primary-600 mt-0.5"})]},p.value)})}),t==="workspace"&&c.jsxs("div",{className:"p-2",children:[c.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2 px-2",children:"Select Workspaces"}),a?c.jsx("div",{className:"px-2 py-3 text-sm text-gray-500",children:"Loading workspaces..."}):o.length===0?c.jsx("div",{className:"px-2 py-3 text-sm text-gray-500",children:"No workspaces available. Create one first."}):c.jsx("div",{className:"max-h-48 overflow-y-auto",children:o.map(p=>{const m=e.includes(p.id);return c.jsxs("button",{type:"button",onClick:()=>f(p.id),className:"w-full flex items-center gap-3 p-2 rounded-md text-left hover:bg-gray-50",children:[c.jsx("div",{className:`flex items-center justify-center w-4 h-4 border-2 rounded ${m?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:m&&c.jsx(Bc,{className:"w-3 h-3 text-white"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"text-sm text-gray-900",children:p.title}),c.jsxs("div",{className:"text-xs text-gray-500",children:[p.member_count," members"]})]})]},p.id)})})]}),t==="workspace"&&c.jsx("div",{className:"p-2 border-t border-gray-100",children:c.jsx("button",{type:"button",onClick:()=>s(!1),className:"w-full px-3 py-2 text-sm font-medium text-primary-600 hover:bg-primary-50 rounded-md",children:"Done"})})]}),t==="workspace"&&e.length>0&&!i&&c.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:["Shared with ",e.length," workspace",e.length!==1?"s":""]})]})}function wA({isOpen:t,onClose:e,onSubmit:r,isLoading:n,person:i=null}){const s=!!i,[o,a]=C.useState(!1),[l,u]=C.useState(null),[d,h]=C.useState(null),[f,p]=C.useState("private"),[m,g]=C.useState([]),{data:y=[]}=at({queryKey:["date-types"],queryFn:async()=>(await et.getDateTypes()).data,enabled:t&&!s}),v=y.find(O=>O.slug==="birthday"||O.name.toLowerCase()==="birthday"),b=He({mutationFn:async O=>{const D=new FormData;return D.append("file",O),(await ee.post("/prm/v1/import/vcard/parse",D,{headers:{"Content-Type":"multipart/form-data"}})).data}}),{register:w,handleSubmit:x,reset:S,formState:{errors:E}}=eo({defaultValues:{first_name:"",last_name:"",nickname:"",gender:"",pronouns:"",email:"",phone:"",phone_type:"mobile",birthday:"",how_we_met:"",is_favorite:!1}});C.useEffect(()=>{var O,D,F,$,q,M,B,X,Q,le,G,se,ke;if(t)if(u(null),h(null),b.reset(),i){const be=(D=(O=i.acf)==null?void 0:O.contact_info)==null?void 0:D.find(Ie=>Ie.contact_type==="email"),$e=($=(F=i.acf)==null?void 0:F.contact_info)==null?void 0:$.find(Ie=>Ie.contact_type==="phone"||Ie.contact_type==="mobile");S({first_name:((q=i.acf)==null?void 0:q.first_name)||"",last_name:((M=i.acf)==null?void 0:M.last_name)||"",nickname:((B=i.acf)==null?void 0:B.nickname)||"",gender:((X=i.acf)==null?void 0:X.gender)||"",pronouns:((Q=i.acf)==null?void 0:Q.pronouns)||"",email:(be==null?void 0:be.contact_value)||"",phone:($e==null?void 0:$e.contact_value)||"",phone_type:($e==null?void 0:$e.contact_type)||"mobile",birthday:"",how_we_met:((le=i.acf)==null?void 0:le.how_we_met)||"",is_favorite:((G=i.acf)==null?void 0:G.is_favorite)||!1}),p(((se=i.acf)==null?void 0:se._visibility)||"private"),g(((ke=i.acf)==null?void 0:ke._assigned_workspaces)||[])}else S({first_name:"",last_name:"",nickname:"",gender:"",pronouns:"",email:"",phone:"",phone_type:"mobile",birthday:"",how_we_met:"",is_favorite:!1}),p("private"),g([])},[t,i,S]);const N=C.useCallback(O=>{O.preventDefault(),O.stopPropagation(),O.type==="dragenter"||O.type==="dragover"?a(!0):O.type==="dragleave"&&a(!1)},[]),_=C.useCallback(O=>{O.preventDefault(),O.stopPropagation(),a(!1),h(null),O.dataTransfer.files&&O.dataTransfer.files[0]&&k(O.dataTransfer.files[0])},[]),k=O=>{const D=O.name.split(".").pop().toLowerCase();if(D!=="vcf"&&D!=="vcard"){h("Please select a vCard file (.vcf)");return}u(O),b.mutate(O,{onSuccess:F=>{S({first_name:F.first_name||"",last_name:F.last_name||"",nickname:F.nickname||"",gender:F.gender||"",pronouns:F.pronouns||"",email:F.email||"",phone:F.phone||"",phone_type:F.phone_type||"mobile",birthday:F.birthday||"",how_we_met:F.note||"",is_favorite:!1}),F.contact_count>1&&h(`Note: File contains ${F.contact_count} contacts. Only the first contact was loaded.`)},onError:F=>{var $,q;h(((q=($=F.response)==null?void 0:$.data)==null?void 0:q.message)||"Failed to parse vCard file"),u(null)}})},j=O=>{h(null),O.target.files&&O.target.files[0]&&k(O.target.files[0])},T=()=>{u(null),h(null),b.reset()};if(!t)return null;const P=O=>{r({...O,birthdayType:v,visibility:f,assigned_workspaces:m})};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:s?"Edit person":"Add person"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(ht,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:x(P),className:"flex flex-col flex-1 overflow-hidden",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[!s&&c.jsxs("div",{children:[c.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-3 text-center transition-colors ${o?"border-primary-500 bg-primary-50":l&&!d?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:N,onDragLeave:N,onDragOver:N,onDrop:_,children:[c.jsx("input",{type:"file",accept:".vcf,.vcard",onChange:j,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:n}),b.isPending?c.jsxs("div",{className:"flex items-center justify-center gap-2 py-1",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600"}),c.jsx("span",{className:"text-sm text-gray-600",children:"Parsing vCard..."})]}):l&&!d?c.jsxs("div",{className:"flex items-center justify-center gap-2 py-1",children:[c.jsx(Im,{className:"h-4 w-4 text-green-600"}),c.jsxs("span",{className:"text-sm text-green-700",children:["Loaded from ",l.name]}),c.jsx("button",{type:"button",onClick:O=>{O.preventDefault(),O.stopPropagation(),T()},className:"ml-1 p-0.5 hover:bg-green-100 rounded",children:c.jsx(ht,{className:"h-3 w-3 text-green-600"})})]}):c.jsxs("div",{className:"flex items-center justify-center gap-2 py-1",children:[c.jsx(Wc,{className:"h-4 w-4 text-gray-400"}),c.jsxs("span",{className:"text-sm text-gray-600",children:["Drop a vCard or ",c.jsx("span",{className:"text-primary-600",children:"browse"})]})]})]}),d&&c.jsxs("div",{className:"mt-2 flex items-start gap-2 text-xs text-amber-700 bg-amber-50 rounded-lg p-2",children:[c.jsx(Go,{className:"h-3 w-3 mt-0.5 flex-shrink-0"}),c.jsx("span",{children:d})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"First name *"}),c.jsx("input",{...w("first_name",{required:"First name is required"}),className:"input",placeholder:"John",disabled:n,autoFocus:!0}),E.first_name&&c.jsx("p",{className:"text-sm text-red-600 mt-1",children:E.first_name.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Last name"}),c.jsx("input",{...w("last_name"),className:"input",placeholder:"Doe",disabled:n})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Nickname"}),c.jsx("input",{...w("nickname"),className:"input",placeholder:"Johnny",disabled:n})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Gender"}),c.jsxs("select",{...w("gender"),className:"input",disabled:n,children:[c.jsx("option",{value:"",children:"Select..."}),c.jsx("option",{value:"male",children:"Male"}),c.jsx("option",{value:"female",children:"Female"}),c.jsx("option",{value:"non_binary",children:"Non-binary"}),c.jsx("option",{value:"other",children:"Other"}),c.jsx("option",{value:"prefer_not_to_say",children:"Prefer not to say"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Pronouns"}),c.jsx("input",{...w("pronouns"),type:"text",className:"input",placeholder:"e.g., they/them",disabled:n})]})]}),!s&&c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Email"}),c.jsx("input",{...w("email"),type:"email",className:"input",placeholder:"john@example.com",disabled:n}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Gravatar will be auto-fetched if available"})]}),!s&&c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Phone"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("select",{...w("phone_type"),className:"input w-24",disabled:n,children:[c.jsx("option",{value:"mobile",children:"Mobile"}),c.jsx("option",{value:"phone",children:"Phone"})]}),c.jsx("input",{...w("phone"),type:"tel",className:"input flex-1",placeholder:"+1 234 567 890",disabled:n})]})]}),!s&&c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Birthday"}),c.jsx("input",{...w("birthday"),type:"date",className:"input",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"How we met"}),c.jsx("textarea",{...w("how_we_met"),className:"input",rows:3,placeholder:"We met at...",disabled:n})]}),c.jsx(Rne,{value:f,workspaces:m,onChange:({visibility:O,workspaces:D})=>{p(O),g(D)},disabled:n}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"is_favorite",...w("is_favorite"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),c.jsx("label",{htmlFor:"is_favorite",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Mark as favorite"})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":s?"Save changes":"Create person"})]})]})]})})}function SA({isOpen:t,onClose:e,onSubmit:r,isLoading:n,company:i=null}){var X,Q,le;const s=!!i,[o,a]=C.useState(!1),[l,u]=C.useState(""),[d,h]=C.useState(""),[f,p]=C.useState(!1),[m,g]=C.useState(""),[y,v]=C.useState([]),[b,w]=C.useState("private"),[x,S]=C.useState([]),E=C.useRef(null),N=C.useRef(null),{data:_=[],isLoading:k}=at({queryKey:["companies","all"],queryFn:async()=>(await et.getCompanies({per_page:100,_embed:!0})).data,enabled:t}),{data:j=[],isLoading:T}=at({queryKey:["people","all"],queryFn:async()=>(await et.getPeople({per_page:100,_embed:!0})).data,enabled:t}),{register:P,handleSubmit:O,reset:D,formState:{errors:F}}=eo({defaultValues:{title:"",website:"",industry:""}}),$=C.useMemo(()=>{const G=l.toLowerCase().trim();let se=_.filter(ke=>!(s&&ke.id===(i==null?void 0:i.id)||s&&ke.parent===(i==null?void 0:i.id)));return G&&(se=se.filter(ke=>{var be;return(be=dr(ke))==null?void 0:be.toLowerCase().includes(G)})),[...se].sort((ke,be)=>(dr(ke)||"").localeCompare(dr(be)||""))},[_,l,i,s]),q=C.useMemo(()=>_.find(G=>G.id===parseInt(d)),[_,d]),M=C.useMemo(()=>{const G=m.toLowerCase().trim(),se=j.map(Ie=>{var Nt,Ct,kt,er;return{id:Ie.id,type:"person",name:Dn(((Nt=Ie.title)==null?void 0:Nt.rendered)||""),thumbnail:(er=(kt=(Ct=Ie._embedded)==null?void 0:Ct["wp:featuredmedia"])==null?void 0:kt[0])==null?void 0:er.source_url}}),ke=_.filter(Ie=>!s||Ie.id!==(i==null?void 0:i.id)).map(Ie=>{var Nt,Ct,kt;return{id:Ie.id,type:"company",name:dr(Ie),thumbnail:(kt=(Ct=(Nt=Ie._embedded)==null?void 0:Nt["wp:featuredmedia"])==null?void 0:Ct[0])==null?void 0:kt.source_url}});let be=[...se,...ke];G&&(be=be.filter(Ie=>{var Nt;return(Nt=Ie.name)==null?void 0:Nt.toLowerCase().includes(G)}));const $e=y.map(Ie=>`${Ie.type}-${Ie.id}`);return be=be.filter(Ie=>!$e.includes(`${Ie.type}-${Ie.id}`)),be.sort((Ie,Nt)=>(Ie.name||"").localeCompare(Nt.name||""))},[j,_,m,y,i,s]);if(C.useEffect(()=>{var G,se,ke,be,$e;t&&(a(!1),p(!1),u(""),g(""),i?(D({title:Dn(((G=i.title)==null?void 0:G.rendered)||""),website:((se=i.acf)==null?void 0:se.website)||"",industry:((ke=i.acf)==null?void 0:ke.industry)||""}),h(i.parent?String(i.parent):""),w(((be=i.acf)==null?void 0:be._visibility)||"private"),S((($e=i.acf)==null?void 0:$e._assigned_workspaces)||[])):(D({title:"",website:"",industry:""}),h(""),v([]),w("private"),S([])))},[t,i,D]),C.useEffect(()=>{var G,se;if(t&&((se=(G=i==null?void 0:i.acf)==null?void 0:G.investors)==null?void 0:se.length)>0&&j.length>0&&_.length>0){const be=i.acf.investors.map($e=>{var Ct,kt,er,Ye,yr,en,Pr;const Ie=j.find(st=>st.id===$e);if(Ie)return{id:Ie.id,type:"person",name:Dn(((Ct=Ie.title)==null?void 0:Ct.rendered)||""),thumbnail:(Ye=(er=(kt=Ie._embedded)==null?void 0:kt["wp:featuredmedia"])==null?void 0:er[0])==null?void 0:Ye.source_url};const Nt=_.find(st=>st.id===$e);return Nt?{id:Nt.id,type:"company",name:dr(Nt),thumbnail:(Pr=(en=(yr=Nt._embedded)==null?void 0:yr["wp:featuredmedia"])==null?void 0:en[0])==null?void 0:Pr.source_url}:null}).filter(Boolean);v(be)}else t&&!i&&v([])},[t,i,j,_]),C.useEffect(()=>{const G=se=>{E.current&&!E.current.contains(se.target)&&a(!1)};if(o)return document.addEventListener("mousedown",G),()=>document.removeEventListener("mousedown",G)},[o]),C.useEffect(()=>{const G=se=>{N.current&&!N.current.contains(se.target)&&p(!1)};if(f)return document.addEventListener("mousedown",G),()=>document.removeEventListener("mousedown",G)},[f]),!t)return null;const B=G=>{r({...G,parentId:d?parseInt(d):0,investors:y.map(se=>se.id),visibility:b,assigned_workspaces:x})};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:s?"Edit organization":"Add organization"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(ht,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:O(B),className:"flex flex-col flex-1 overflow-hidden",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Organization name *"}),c.jsx("input",{...P("title",{required:"Organization name is required"}),className:"input",placeholder:"Acme Inc.",disabled:n,autoFocus:!0}),F.title&&c.jsx("p",{className:"text-sm text-red-600 mt-1",children:F.title.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Website"}),c.jsx("input",{...P("website"),type:"url",className:"input",placeholder:"https://example.com",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Industry"}),c.jsx("input",{...P("industry"),className:"input",placeholder:"Technology",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Parent organization"}),c.jsxs("div",{className:"relative",ref:E,children:[c.jsxs("button",{type:"button",onClick:()=>a(!o),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:k||n,children:[q?c.jsxs("div",{className:"flex items-center gap-2",children:[(le=(Q=(X=q._embedded)==null?void 0:X["wp:featuredmedia"])==null?void 0:Q[0])!=null&&le.source_url?c.jsx("img",{src:q._embedded["wp:featuredmedia"][0].source_url,alt:dr(q),className:"w-6 h-6 rounded object-contain bg-white"}):c.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center",children:c.jsx(Dr,{className:"w-4 h-4 text-gray-500"})}),c.jsx("span",{className:"text-gray-900",children:dr(q)})]}):c.jsx("span",{className:"text-gray-400",children:"No parent organization"}),c.jsx(nh,{className:`w-4 h-4 text-gray-400 transition-transform ${o?"rotate-180":""}`})]}),o&&c.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[c.jsx("div",{className:"p-2 border-b border-gray-100",children:c.jsxs("div",{className:"relative",children:[c.jsx(gl,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),c.jsx("input",{type:"text",value:l,onChange:G=>u(G.target.value),placeholder:"Search organizations...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),c.jsxs("div",{className:"overflow-y-auto max-h-48",children:[c.jsx("button",{type:"button",onClick:()=>{h(""),a(!1),u("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${d?"":"bg-primary-50"}`,children:c.jsx("span",{className:"text-sm text-gray-500 italic",children:"No parent organization"})}),k?c.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):$.length>0?$.map(G=>{var se,ke,be;return c.jsxs("button",{type:"button",onClick:()=>{h(String(G.id)),a(!1),u("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${d===String(G.id)?"bg-primary-50":""}`,children:[(be=(ke=(se=G._embedded)==null?void 0:se["wp:featuredmedia"])==null?void 0:ke[0])!=null&&be.source_url?c.jsx("img",{src:G._embedded["wp:featuredmedia"][0].source_url,alt:dr(G),className:"w-6 h-6 rounded object-contain bg-white"}):c.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center",children:c.jsx(Dr,{className:"w-4 h-4 text-gray-500"})}),c.jsx("span",{className:"text-sm text-gray-900 truncate",children:dr(G)})]},G.id)}):c.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"No organizations found"})]})]})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select if this organization is a subsidiary or division of another"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"label flex items-center",children:[c.jsx(kv,{className:"w-4 h-4 mr-2"}),"Investors"]}),y.length>0&&c.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:y.map(G=>c.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-100 rounded-full pl-1 pr-2 py-1",children:[G.thumbnail?c.jsx("img",{src:G.thumbnail,alt:G.name,className:`w-5 h-5 object-cover ${G.type==="person"?"rounded-full":"rounded"}`}):c.jsx("div",{className:`w-5 h-5 bg-gray-300 flex items-center justify-center ${G.type==="person"?"rounded-full":"rounded"}`,children:G.type==="person"?c.jsx(vl,{className:"w-3 h-3 text-gray-500"}):c.jsx(Dr,{className:"w-3 h-3 text-gray-500"})}),c.jsx("span",{className:"text-sm text-gray-700",children:G.name}),c.jsx("button",{type:"button",onClick:()=>v(se=>se.filter(ke=>!(ke.id===G.id&&ke.type===G.type))),className:"ml-1 text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(ht,{className:"w-3.5 h-3.5"})})]},`${G.type}-${G.id}`))}),c.jsxs("div",{className:"relative",ref:N,children:[c.jsxs("button",{type:"button",onClick:()=>p(!f),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:k||T||n,children:[c.jsx("span",{className:"text-gray-400",children:"Add investor..."}),c.jsx(nh,{className:`w-4 h-4 text-gray-400 transition-transform ${f?"rotate-180":""}`})]}),f&&c.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[c.jsx("div",{className:"p-2 border-b border-gray-100",children:c.jsxs("div",{className:"relative",children:[c.jsx(gl,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),c.jsx("input",{type:"text",value:m,onChange:G=>g(G.target.value),placeholder:"Search people and organizations...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),c.jsx("div",{className:"overflow-y-auto max-h-48",children:k||T?c.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):M.length>0?M.map(G=>c.jsxs("button",{type:"button",onClick:()=>{v(se=>[...se,G]),g("")},className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors",children:[G.thumbnail?c.jsx("img",{src:G.thumbnail,alt:G.name,className:`w-6 h-6 object-cover ${G.type==="person"?"rounded-full":"rounded"}`}):c.jsx("div",{className:`w-6 h-6 bg-gray-200 flex items-center justify-center ${G.type==="person"?"rounded-full":"rounded"}`,children:G.type==="person"?c.jsx(vl,{className:"w-4 h-4 text-gray-500"}):c.jsx(Dr,{className:"w-4 h-4 text-gray-500"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("span",{className:"text-sm text-gray-900 truncate block",children:G.name}),c.jsx("span",{className:"text-xs text-gray-500",children:G.type==="person"?"Person":"Organization"})]})]},`${G.type}-${G.id}`)):c.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:m?"No results found":"No people or organizations available"})})]})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select people or organizations that have invested in this company"})]}),c.jsx(Rne,{value:b,workspaces:x,onChange:({visibility:G,workspaces:se})=>{w(G),S(se)},disabled:n})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":s?"Save changes":"Create organization"})]})]})]})})}function Oye({value:t=[],onChange:e,people:r=[],isLoading:n,currentPersonId:i}){const[s,o]=C.useState(""),a=C.useMemo(()=>{if(!s)return r.slice(0,10);const h=s.toLowerCase();return r.filter(f=>Ed(f).toLowerCase().includes(h)).slice(0,10)},[r,s]),l=C.useMemo(()=>t.map(h=>r.find(f=>f.id===h)).filter(Boolean),[t,r]),u=h=>{t.includes(h)||e([...t,h]),o("")},d=h=>{h!==i&&e(t.filter(f=>f!==h))};return c.jsxs("div",{className:"space-y-2",children:[l.length>0&&c.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(h=>c.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-primary-100 text-primary-800 rounded-full text-sm",children:[Ed(h),h.id!==i&&c.jsx("button",{type:"button",onClick:()=>d(h.id),className:"hover:text-primary-600",children:c.jsx(ht,{className:"w-3 h-3"})})]},h.id))}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",value:s,onChange:h=>o(h.target.value),placeholder:"Search for people to add...",className:"input",disabled:n}),s&&c.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:a.length>0?a.map(h=>c.jsx("button",{type:"button",onClick:()=>u(h.id),disabled:t.includes(h.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t.includes(h.id)?"opacity-50 cursor-not-allowed":""}`,children:Ed(h)},h.id)):c.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No people found"})})]})]})}function EA({isOpen:t,onClose:e,onSubmit:r,isLoading:n,dateItem:i=null,personId:s,allPeople:o=[],isPeopleLoading:a=!1}){const l=!!i,{data:u=[]}=at({queryKey:["date-types"],queryFn:async()=>((await et.getDateTypes()).data||[]).sort((N,_)=>{const k=N.name||"",j=_.name||"";return k.localeCompare(j)})}),{register:d,handleSubmit:h,reset:f,watch:p,setValue:m,control:g,formState:{errors:y}}=eo({defaultValues:{title:"",date_value:"",date_type:"",related_people:[],is_recurring:!0,year_unknown:!1}}),v=p("related_people"),b=p("date_type"),w=p("title");if(C.useEffect(()=>{var N;if((!w||["'s Birthday","Wedding of "].some(_=>w.endsWith(_)||w.startsWith(_)))&&(v==null?void 0:v.length)>0&&b){const _=u.find(P=>P.id===parseInt(b)),k=(_==null?void 0:_.name)||"",j=((N=_==null?void 0:_.slug)==null?void 0:N.toLowerCase())||k.toLowerCase(),T=v.map(P=>{var D,F,$;const O=o.find(q=>q.id===P);return O?Dn(((D=O.acf)==null?void 0:D.first_name)||O.first_name||(($=(F=O.title)==null?void 0:F.rendered)==null?void 0:$.split(" ")[0])||""):null}).filter(Boolean);if(T.length>0&&k){let P;j==="wedding"?P=T.length>=2?`Wedding of ${T[0]} & ${T[1]}`:`Wedding of ${T[0]}`:P=`${T[0]}'s ${k}`,m("title",P)}}},[v,b,o,u,m,w]),C.useEffect(()=>{var S,E,N,_,k,j;if(t)if(i){let T=[];const P=i.related_people||((S=i.acf)==null?void 0:S.related_people);P&&(Array.isArray(P)?T=P.map(D=>parseInt(typeof D=="object"&&D!==null?D.ID||D.id||D.post_id:D,10)).filter(D=>!isNaN(D)&&D>0):typeof P=="number"&&(T=[P]));let O="";if(((E=i.date_type)==null?void 0:E.length)>0&&i.date_type[0]!=null){const D=i.date_type[0];if(typeof D=="string"){const F=u.find($=>$.name.toLowerCase()===D.toLowerCase());O=F?String(F.id):""}else O=String(D)}f({title:Dn(((N=i.title)==null?void 0:N.rendered)||i.title||""),date_value:((_=i.acf)==null?void 0:_.date_value)||i.date_value||"",date_type:O,related_people:T,is_recurring:((k=i.acf)==null?void 0:k.is_recurring)??i.is_recurring??!0,year_unknown:((j=i.acf)==null?void 0:j.year_unknown)??i.year_unknown??!1})}else f({title:"",date_value:"",date_type:"",related_people:s?[parseInt(s)]:[],is_recurring:!0,year_unknown:!1})},[t,i,s,f,u]),!t)return null;const x=S=>{const E=S.date_type?parseInt(S.date_type,10):null,N=E&&!isNaN(E)?[E]:[];r({title:S.title,date_type:N,date_value:S.date_value,related_people:S.related_people,is_recurring:S.is_recurring,year_unknown:S.year_unknown})};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:l?"Edit date":"Add date"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(ht,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:h(x),className:"flex flex-col flex-1 overflow-hidden",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Related people"}),c.jsx(Tv,{name:"related_people",control:g,render:({field:S})=>c.jsx(Oye,{value:S.value,onChange:S.onChange,people:o,isLoading:a,currentPersonId:parseInt(s)})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Date type *"}),c.jsx(Tv,{name:"date_type",control:g,rules:{required:"Please select a date type"},render:({field:S})=>c.jsxs("select",{value:S.value?String(S.value):"",onChange:E=>S.onChange(E.target.value),className:"input",disabled:n,children:[c.jsx("option",{value:"",children:"Select a type..."}),u.map(E=>c.jsx("option",{value:String(E.id),children:E.name},E.id))]})}),y.date_type&&c.jsx("p",{className:"text-sm text-red-600 mt-1",children:y.date_type.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Label"}),c.jsx("input",{...d("title"),className:"input",placeholder:"e.g., Mom's Birthday",disabled:n}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-generated from person and date type. You can customize it."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Date *"}),c.jsx("input",{...d("date_value",{required:"Date is required"}),type:"date",className:"input",disabled:n}),y.date_value&&c.jsx("p",{className:"text-sm text-red-600 mt-1",children:y.date_value.message})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"year_unknown",...d("year_unknown"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),c.jsx("label",{htmlFor:"year_unknown",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Year unknown"})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"is_recurring",...d("is_recurring"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),c.jsx("label",{htmlFor:"is_recurring",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Repeats every year"})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":l?"Save changes":"Add date"})]})]})]})})}const Pye=[{name:"Dashboard",href:"/",icon:yge},{name:"People",href:"/people",icon:$r},{name:"Organizations",href:"/companies",icon:Dr},{name:"Dates",href:"/dates",icon:Ys},{name:"Todos",href:"/todos",icon:Hi},{name:"Workspaces",href:"/workspaces",icon:Rge},{name:"Settings",href:"/settings",icon:hA}];function o3({mobile:t=!1,onClose:e}){const{logoutUrl:r}=iA();return c.jsxs("div",{className:"flex flex-col h-full bg-white border-r border-gray-200",children:[c.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[c.jsxs(qe,{to:"/",className:"flex items-center gap-2 text-xl font-bold text-primary-600",children:[c.jsx(ane,{className:"w-5 h-5"}),Vc]}),t&&c.jsx("button",{onClick:e,className:"p-2 -mr-2",children:c.jsx(ht,{className:"w-5 h-5"})})]}),c.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1 overflow-y-auto",children:Pye.map(n=>c.jsxs(Zfe,{to:n.href,onClick:t?e:void 0,className:({isActive:i})=>`flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${i?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-50"}`,children:[c.jsx(n.icon,{className:"w-5 h-5 mr-3"}),n.name]},n.name))}),c.jsx("div",{className:"p-4 border-t border-gray-200",children:c.jsxs("a",{href:r,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[c.jsx(Sge,{className:"w-5 h-5 mr-3"}),"Log Out"]})})]})}function Iye(){var o;const[t,e]=C.useState(!1),r=C.useRef(null),{data:n,isLoading:i}=at({queryKey:["current-user"],queryFn:async()=>(await Se.getCurrentUser()).data});if(C.useEffect(()=>{const a=l=>{r.current&&!r.current.contains(l.target)&&e(!1)};if(t)return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[t]),i||!n)return c.jsx("div",{className:"flex items-center ml-auto",children:c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full animate-pulse"})});const s=((o=n.name)==null?void 0:o.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2))||"?";return c.jsxs("div",{className:"relative ml-auto",ref:r,children:[c.jsxs("button",{onClick:()=>e(!t),className:"flex items-center gap-2 p-1 rounded-full hover:bg-gray-100 transition-colors","aria-label":"User menu",children:[n.avatar_url?c.jsx("img",{src:n.avatar_url,alt:n.name,className:"w-8 h-8 rounded-full object-cover"}):c.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-sm font-medium text-primary-700",children:s})}),c.jsx(nh,{className:`w-4 h-4 text-gray-500 transition-transform ${t?"rotate-180":""}`})]}),t&&c.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:c.jsxs("div",{className:"py-1",children:[c.jsxs("a",{href:n.profile_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>e(!1),children:[c.jsx(vl,{className:"w-4 h-4 mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Edit profile"})]}),n.is_admin&&c.jsxs("a",{href:n.admin_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>e(!1),children:[c.jsx(hA,{className:"w-4 h-4 mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"WordPress admin"})]})]})})]})}function Rye({isOpen:t,onClose:e}){const[r,n]=C.useState(""),[i,s]=C.useState(0),o=Un(),a=C.useRef(null),l=r.trim(),{data:u,isLoading:d}=Jge(l),h=u||{people:[],companies:[]},f=[...(h.people||[]).map(v=>({...v,type:"person"})),...(h.companies||[]).map(v=>({...v,type:"company"}))],p=f.length>0,m=r.trim().length>=2;C.useEffect(()=>{t&&(n(""),s(0),setTimeout(()=>{var v;return(v=a.current)==null?void 0:v.focus()},50))},[t]),C.useEffect(()=>{s(0)},[u]);const g=v=>{if(v.key==="Escape"){e();return}if(!(!m||!p)){if(v.key==="ArrowDown")v.preventDefault(),s(b=>Math.min(b+1,f.length-1));else if(v.key==="ArrowUp")v.preventDefault(),s(b=>Math.max(b-1,0));else if(v.key==="Enter"){v.preventDefault();const b=f[i];b&&y(b.type,b.id)}}},y=(v,b)=>{e(),v==="person"?o(`/people/${b}`):v==="company"&&o(`/companies/${b}`)};return t?c.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:e}),c.jsx("div",{className:"relative min-h-screen flex items-start justify-center pt-[15vh] px-4",children:c.jsxs("div",{className:"relative w-full max-w-xl bg-white rounded-xl shadow-2xl overflow-hidden",children:[c.jsxs("div",{className:"flex items-center px-4 border-b border-gray-200",children:[c.jsx(gl,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),c.jsx("input",{ref:a,type:"text",value:r,onChange:v=>n(v.target.value),onKeyDown:g,placeholder:"Search people & organizations...",className:"flex-1 px-4 py-4 text-lg outline-none placeholder:text-gray-400",autoComplete:"off"}),c.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[c.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-gray-500 font-mono",children:"esc"}),c.jsx("span",{children:"to close"})]})]}),c.jsx("div",{className:"max-h-96 overflow-y-auto",children:m?d?c.jsxs("div",{className:"px-4 py-8 text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),c.jsx("p",{className:"mt-3 text-sm text-gray-500",children:"Searching..."})]}):p?c.jsxs("div",{className:"py-2",children:[h.people&&h.people.length>0&&c.jsxs("div",{className:"px-2",children:[c.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"People"}),h.people.map((v,b)=>{const x=i===b;return c.jsxs("button",{onClick:()=>y("person",v.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors text-left ${x?"bg-primary-50 text-primary-900":"hover:bg-gray-50"}`,children:[v.thumbnail?c.jsx("img",{src:v.thumbnail,alt:v.name,className:"w-8 h-8 rounded-full object-cover"}):c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx(vl,{className:"w-4 h-4 text-gray-500"})}),c.jsx("span",{className:"text-sm font-medium flex-1 truncate",children:v.name}),x&&c.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:""})]},v.id)})]}),h.companies&&h.companies.length>0&&c.jsxs("div",{className:"px-2 mt-2",children:[c.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Organizations"}),h.companies.map((v,b)=>{var S;const w=(((S=h.people)==null?void 0:S.length)||0)+b,x=i===w;return c.jsxs("button",{onClick:()=>y("company",v.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors text-left ${x?"bg-primary-50 text-primary-900":"hover:bg-gray-50"}`,children:[v.thumbnail?c.jsx("img",{src:v.thumbnail,alt:v.name,className:"w-8 h-8 rounded object-contain bg-white"}):c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded flex items-center justify-center",children:c.jsx(Dr,{className:"w-4 h-4 text-gray-500"})}),c.jsx("span",{className:"text-sm font-medium flex-1 truncate",children:v.name}),x&&c.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:""})]},v.id)})]})]}):c.jsx("div",{className:"px-4 py-8 text-center text-gray-500",children:c.jsxs("p",{className:"text-sm",children:['No results found for "',r,'"']})}):c.jsxs("div",{className:"px-4 py-8 text-center text-gray-500",children:[c.jsx(gl,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),c.jsx("p",{className:"text-sm",children:"Type at least 2 characters to search"})]})}),c.jsx("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-xs text-gray-500",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),c.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),c.jsx("span",{children:"to navigate"})]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),c.jsx("span",{children:"to select"})]})]})})]})})]}):null}function Mye({onAddTodo:t,onAddPerson:e,onAddCompany:r,onAddDate:n}){const[i,s]=C.useState(!1),o=C.useRef(null);C.useEffect(()=>{const h=f=>{o.current&&!o.current.contains(f.target)&&s(!1)};if(i)return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[i]);const a=()=>{s(!1),t()},l=()=>{s(!1),e()},u=()=>{s(!1),r()},d=()=>{s(!1),n()};return c.jsxs("div",{className:"relative",ref:o,children:[c.jsx("button",{onClick:()=>s(!i),className:"flex items-center justify-center w-9 h-9 rounded-lg bg-primary-600 hover:bg-primary-700 text-white transition-colors","aria-label":"Quick add",title:"Quick add",children:c.jsx(lr,{className:"w-5 h-5"})}),i&&c.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:c.jsxs("div",{className:"py-1",children:[c.jsxs("button",{onClick:l,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[c.jsx(vl,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Person"]}),c.jsxs("button",{onClick:u,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[c.jsx(Dr,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Organization"]}),c.jsxs("button",{onClick:a,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[c.jsx(Hi,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Todo"]}),c.jsxs("button",{onClick:d,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[c.jsx(Ys,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Date"]})]})})]})}function Aye({onMenuClick:t,onAddTodo:e,onAddPerson:r,onAddCompany:n,onAddDate:i,onOpenSearch:s}){const o=ea(),a=()=>{const l=o.pathname;return l==="/"?"Dashboard":l.startsWith("/people")?"People":l.startsWith("/companies")?"Organizations":l.startsWith("/dates")?"Important Dates":l.startsWith("/todos")?"Todos":l.startsWith("/workspaces")?"Workspaces":l.startsWith("/settings")?"Settings":""};return c.jsxs("header",{className:"sticky top-0 z-10 flex items-center h-16 px-4 bg-white border-b border-gray-200 lg:px-6",children:[c.jsx("button",{onClick:t,className:"p-2 -ml-2 lg:hidden",children:c.jsx(_ge,{className:"w-5 h-5"})}),c.jsx("h1",{className:"ml-2 text-lg font-semibold lg:ml-0",children:a()}),c.jsx("div",{className:"flex-1"}),c.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg border border-gray-200 hover:bg-gray-50 text-gray-500 transition-colors","aria-label":"Search",title:"Search (K)",children:[c.jsx(gl,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden sm:inline text-sm",children:"Search..."}),c.jsxs("kbd",{className:"hidden sm:flex items-center gap-0.5 px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:[c.jsx(fge,{className:"w-3 h-3"}),"K"]})]}),c.jsx("div",{className:"ml-2",children:c.jsx(Mye,{onAddTodo:e,onAddPerson:r,onAddCompany:n,onAddDate:i})}),c.jsx("div",{className:"ml-2",children:c.jsx(Iye,{})})]})}function Dye({children:t}){const[e,r]=C.useState(!1),[n,i]=C.useState(!1),[s,o]=C.useState(!1),[a,l]=C.useState(!1),[u,d]=C.useState(!1),[h,f]=C.useState(!1),[p,m]=C.useState(!1),[g,y]=C.useState(!1),[v,b]=C.useState(!1),w=Un();tt();const{data:x=[],isLoading:S}=lu();gne();const E=hne({onSuccess:P=>{l(!1),w(`/people/${P.id}`)}}),N=mne({onSuccess:P=>{d(!1),w(`/companies/${P.id}`)}}),_=pne({onSuccess:()=>f(!1)}),k=async P=>{m(!0);try{await E.mutateAsync(P)}finally{m(!1)}},j=async P=>{y(!0);try{await N.mutateAsync(P)}finally{y(!1)}},T=async P=>{b(!0);try{await _.mutateAsync(P)}finally{b(!1)}};return C.useEffect(()=>{const P=O=>{(O.metaKey||O.ctrlKey)&&O.key==="k"&&(O.preventDefault(),o(!0))};return document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)},[]),c.jsxs("div",{className:"flex h-screen bg-gray-50",children:[c.jsx("div",{className:"hidden lg:flex lg:w-64 lg:flex-col",children:c.jsx(o3,{})}),e&&c.jsxs("div",{className:"fixed inset-0 z-40 lg:hidden",children:[c.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>r(!1)}),c.jsx("div",{className:"fixed inset-y-0 left-0 flex flex-col w-64 bg-white",children:c.jsx(o3,{mobile:!0,onClose:()=>r(!1)})})]}),c.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[c.jsx(Aye,{onMenuClick:()=>r(!0),onAddTodo:()=>i(!0),onAddPerson:()=>l(!0),onAddCompany:()=>d(!0),onAddDate:()=>f(!0),onOpenSearch:()=>o(!0)}),c.jsx("main",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:t})]}),c.jsx(Rye,{isOpen:s,onClose:()=>o(!1)}),c.jsx(bne,{isOpen:n,onClose:()=>i(!1)}),c.jsx(wA,{isOpen:a,onClose:()=>l(!1),onSubmit:k,isLoading:p}),c.jsx(SA,{isOpen:u,onClose:()=>d(!1),onSubmit:j,isLoading:g}),c.jsx(EA,{isOpen:h,onClose:()=>f(!1),onSubmit:T,isLoading:v,allPeople:x,isPeopleLoading:S})]})}function ft(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Qo(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function $ye(t,e){const r=ft(t);return isNaN(e)?Qo(t,NaN):(e&&r.setDate(r.getDate()+e),r)}const Mne=6048e5,Fye=864e5,Ane=6e4,Dne=36e5,Jg=43200,a3=1440;let qye={};function Am(){return qye}function Uc(t,e){var a,l,u,d;const r=Am(),n=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=ft(t),s=i.getDay(),o=(s<n?7:0)+s-n;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Iv(t){return Uc(t,{weekStartsOn:1})}function $ne(t){const e=ft(t),r=e.getFullYear(),n=Qo(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=Iv(n),s=Qo(t,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=Iv(s);return e.getTime()>=i.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function Rv(t){const e=ft(t);return e.setHours(0,0,0,0),e}function Mv(t){const e=ft(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function Lye(t,e){const r=Rv(t),n=Rv(e),i=+r-Mv(r),s=+n-Mv(n);return Math.round((i-s)/Fye)}function Bye(t){const e=$ne(t),r=Qo(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),Iv(r)}function Nd(t,e){const r=ft(t),n=ft(e),i=r.getTime()-n.getTime();return i<0?-1:i>0?1:i}function xb(t){return Qo(t,Date.now())}function Fne(t,e){const r=Rv(t),n=Rv(e);return+r==+n}function zye(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Wye(t){if(!zye(t)&&typeof t!="number")return!1;const e=ft(t);return!isNaN(Number(e))}function Vye(t,e){const r=ft(t),n=ft(e),i=r.getFullYear()-n.getFullYear(),s=r.getMonth()-n.getMonth();return i*12+s}function Uye(t,e){const r=ft(t),n=ft(e);return r.getFullYear()-n.getFullYear()}function Hye(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function Kye(t,e){return+ft(t)-+ft(e)}function Gye(t){const e=ft(t);return e.setHours(23,59,59,999),e}function Yye(t){const e=ft(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function Qye(t){const e=ft(t);return+Gye(e)==+Yye(e)}function Xye(t,e){const r=ft(t),n=ft(e),i=Nd(r,n),s=Math.abs(Vye(r,n));let o;if(s<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*s);let a=Nd(r,n)===-i;Qye(ft(t))&&s===1&&Nd(t,n)===1&&(a=!1),o=i*(s-Number(a))}return o===0?0:o}function Jye(t,e,r){const n=Kye(t,e)/1e3;return Hye(r==null?void 0:r.roundingMethod)(n)}function gx(t,e){const r=ft(t),n=ft(e),i=Nd(r,n),s=Math.abs(Uye(r,n));r.setFullYear(1584),n.setFullYear(1584);const o=Nd(r,n)===-i,a=i*(s-+o);return a===0?0:a}function Zye(t){const e=ft(t),r=Qo(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}const eve={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},tve=(t,e,r)=>{let n;const i=eve[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function yx(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const rve={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},nve={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ive={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},sve={date:yx({formats:rve,defaultWidth:"full"}),time:yx({formats:nve,defaultWidth:"full"}),dateTime:yx({formats:ive,defaultWidth:"full"})},ove={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ave=(t,e,r,n)=>ove[t];function _f(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let i;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=r!=null&&r.width?String(r.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=r!=null&&r.width?String(r.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const lve={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},cve={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},uve={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dve={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},hve={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},fve={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},pve=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},mve={ordinalNumber:pve,era:_f({values:lve,defaultWidth:"wide"}),quarter:_f({values:cve,defaultWidth:"wide",argumentCallback:t=>t-1}),month:_f({values:uve,defaultWidth:"wide"}),day:_f({values:dve,defaultWidth:"wide"}),dayPeriod:_f({values:hve,defaultWidth:"wide",formattingValues:fve,defaultFormattingWidth:"wide"})};function Nf(t){return(e,r={})=>{const n=r.width,i=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?yve(a,h=>h.test(o)):gve(a,h=>h.test(o));let u;u=t.valueCallback?t.valueCallback(l):l,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function gve(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function yve(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function vve(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const i=n[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const bve=/^(\d+)(th|st|nd|rd)?/i,xve=/\d+/i,wve={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Sve={any:[/^b/i,/^(a|c)/i]},Eve={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},_ve={any:[/1/i,/2/i,/3/i,/4/i]},Nve={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Cve={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},kve={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},jve={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Tve={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ove={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Pve={ordinalNumber:vve({matchPattern:bve,parsePattern:xve,valueCallback:t=>parseInt(t,10)}),era:Nf({matchPatterns:wve,defaultMatchWidth:"wide",parsePatterns:Sve,defaultParseWidth:"any"}),quarter:Nf({matchPatterns:Eve,defaultMatchWidth:"wide",parsePatterns:_ve,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Nf({matchPatterns:Nve,defaultMatchWidth:"wide",parsePatterns:Cve,defaultParseWidth:"any"}),day:Nf({matchPatterns:kve,defaultMatchWidth:"wide",parsePatterns:jve,defaultParseWidth:"any"}),dayPeriod:Nf({matchPatterns:Tve,defaultMatchWidth:"any",parsePatterns:Ove,defaultParseWidth:"any"})},qne={code:"en-US",formatDistance:tve,formatLong:sve,formatRelative:ave,localize:mve,match:Pve,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Ive(t){const e=ft(t);return Lye(e,Zye(e))+1}function Rve(t){const e=ft(t),r=+Iv(e)-+Bye(e);return Math.round(r/Mne)+1}function Lne(t,e){var d,h,f,p;const r=ft(t),n=r.getFullYear(),i=Am(),s=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(f=i.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=Qo(t,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const a=Uc(o,e),l=Qo(t,0);l.setFullYear(n,0,s),l.setHours(0,0,0,0);const u=Uc(l,e);return r.getTime()>=a.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function Mve(t,e){var a,l,u,d;const r=Am(),n=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=Lne(t,e),s=Qo(t,0);return s.setFullYear(i,0,n),s.setHours(0,0,0,0),Uc(s,e)}function Ave(t,e){const r=ft(t),n=+Uc(r,e)-+Mve(r,e);return Math.round(n/Mne)+1}function xt(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const ua={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return xt(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):xt(r+1,2)},d(t,e){return xt(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return xt(t.getHours()%12||12,e.length)},H(t,e){return xt(t.getHours(),e.length)},m(t,e){return xt(t.getMinutes(),e.length)},s(t,e){return xt(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return xt(i,e.length)}},Fu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},l3={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return ua.y(t,e)},Y:function(t,e,r,n){const i=Lne(t,n),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return xt(o,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):xt(s,e.length)},R:function(t,e){const r=$ne(t);return xt(r,e.length)},u:function(t,e){const r=t.getFullYear();return xt(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return xt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return xt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return ua.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return xt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const i=Ave(t,n);return e==="wo"?r.ordinalNumber(i,{unit:"week"}):xt(i,e.length)},I:function(t,e,r){const n=Rve(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):xt(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):ua.d(t,e)},D:function(t,e,r){const n=Ive(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):xt(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return xt(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return xt(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return xt(i,e.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let i;switch(n===12?i=Fu.noon:n===0?i=Fu.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let i;switch(n>=17?i=Fu.evening:n>=12?i=Fu.afternoon:n>=4?i=Fu.morning:i=Fu.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return ua.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):ua.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):xt(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):xt(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):ua.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):ua.s(t,e)},S:function(t,e){return ua.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return u3(n);case"XXXX":case"XX":return Hl(n);case"XXXXX":case"XXX":default:return Hl(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return u3(n);case"xxxx":case"xx":return Hl(n);case"xxxxx":case"xxx":default:return Hl(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+c3(n,":");case"OOOO":default:return"GMT"+Hl(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+c3(n,":");case"zzzz":default:return"GMT"+Hl(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return xt(n,e.length)},T:function(t,e,r){const n=t.getTime();return xt(n,e.length)}};function c3(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Math.trunc(n/60),s=n%60;return s===0?r+String(i):r+String(i)+e+xt(s,2)}function u3(t,e){return t%60===0?(t>0?"-":"+")+xt(Math.abs(t)/60,2):Hl(t,e)}function Hl(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=xt(Math.trunc(n/60),2),s=xt(n%60,2);return r+i+e+s}const d3=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Bne=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Dve=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return d3(t,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",d3(n,e)).replace("{{time}}",Bne(i,e))},$ve={p:Bne,P:Dve},Fve=/^D+$/,qve=/^Y+$/,Lve=["D","DD","YY","YYYY"];function Bve(t){return Fve.test(t)}function zve(t){return qve.test(t)}function Wve(t,e,r){const n=Vve(t,e,r);if(console.warn(n),Lve.includes(t))throw new RangeError(n)}function Vve(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Uve=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Hve=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Kve=/^'([^]*?)'?$/,Gve=/''/g,Yve=/[a-zA-Z]/;function Rn(t,e,r){var d,h,f,p;const n=Am(),i=n.locale??qne,s=n.firstWeekContainsDate??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,o=n.weekStartsOn??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,a=ft(t);if(!Wye(a))throw new RangeError("Invalid time value");let l=e.match(Hve).map(m=>{const g=m[0];if(g==="p"||g==="P"){const y=$ve[g];return y(m,i.formatLong)}return m}).join("").match(Uve).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const g=m[0];if(g==="'")return{isToken:!1,value:Qve(m)};if(l3[g])return{isToken:!0,value:m};if(g.match(Yve))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:m}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(m=>{if(!m.isToken)return m.value;const g=m.value;(zve(g)||Bve(g))&&Wve(g,e,String(t));const y=l3[g[0]];return y(a,g,i.localize,u)}).join("")}function Qve(t){const e=t.match(Kve);return e?e[1].replace(Gve,"'"):t}function Xve(t,e,r){const n=Am(),i=(r==null?void 0:r.locale)??n.locale??qne,s=2520,o=Nd(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const a=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let l,u;o>0?(l=ft(e),u=ft(t)):(l=ft(t),u=ft(e));const d=Jye(u,l),h=(Mv(u)-Mv(l))/1e3,f=Math.round((d-h)/60);let p;if(f<2)return r!=null&&r.includeSeconds?d<5?i.formatDistance("lessThanXSeconds",5,a):d<10?i.formatDistance("lessThanXSeconds",10,a):d<20?i.formatDistance("lessThanXSeconds",20,a):d<40?i.formatDistance("halfAMinute",0,a):d<60?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",1,a):f===0?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",f,a);if(f<45)return i.formatDistance("xMinutes",f,a);if(f<90)return i.formatDistance("aboutXHours",1,a);if(f<a3){const m=Math.round(f/60);return i.formatDistance("aboutXHours",m,a)}else{if(f<s)return i.formatDistance("xDays",1,a);if(f<Jg){const m=Math.round(f/a3);return i.formatDistance("xDays",m,a)}else if(f<Jg*2)return p=Math.round(f/Jg),i.formatDistance("aboutXMonths",p,a)}if(p=Xye(u,l),p<12){const m=Math.round(f/Jg);return i.formatDistance("xMonths",m,a)}else{const m=p%12,g=Math.trunc(p/12);return m<3?i.formatDistance("aboutXYears",g,a):m<9?i.formatDistance("overXYears",g,a):i.formatDistance("almostXYears",g+1,a)}}function Jve(t,e){return Xve(t,xb(t),e)}function Zve(t,e){const r=ft(t),n=ft(e);return r.getTime()>n.getTime()}function e0e(t,e,r){const n=Uc(t,r),i=Uc(e,r);return+n==+i}function t0e(t,e){return e0e(t,xb(t),e)}function zne(t){return Fne(t,xb(t))}function Wne(t,e){return $ye(t,-e)}function Vne(t){return Fne(t,Wne(xb(t),1))}function Vp(t,e){const n=s0e(t);let i;if(n.date){const l=o0e(n.date,2);i=a0e(l.restDateString,l.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const s=i.getTime();let o=0,a;if(n.time&&(o=l0e(n.time),isNaN(o)))return new Date(NaN);if(n.timezone){if(a=c0e(n.timezone),isNaN(a))return new Date(NaN)}else{const l=new Date(s+o),u=new Date(0);return u.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),u.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),u}return new Date(s+o+a)}const Zg={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},r0e=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,n0e=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,i0e=/^([+-])(\d{2})(?::?(\d{2}))?$/;function s0e(t){const e={},r=t.split(Zg.dateTimeDelimiter);let n;if(r.length>2)return e;if(/:/.test(r[0])?n=r[0]:(e.date=r[0],n=r[1],Zg.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Zg.timeZoneDelimiter)[0],n=t.substr(e.date.length,t.length))),n){const i=Zg.timezone.exec(n);i?(e.time=n.replace(i[1],""),e.timezone=i[1]):e.time=n}return e}function o0e(t,e){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=t.match(r);if(!n)return{year:NaN,restDateString:""};const i=n[1]?parseInt(n[1]):null,s=n[2]?parseInt(n[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((n[1]||n[2]).length)}}function a0e(t,e){if(e===null)return new Date(NaN);const r=t.match(r0e);if(!r)return new Date(NaN);const n=!!r[4],i=Cf(r[1]),s=Cf(r[2])-1,o=Cf(r[3]),a=Cf(r[4]),l=Cf(r[5])-1;if(n)return p0e(e,a,l)?u0e(e,a,l):new Date(NaN);{const u=new Date(0);return!h0e(e,s,o)||!f0e(e,i)?new Date(NaN):(u.setUTCFullYear(e,s,Math.max(i,o)),u)}}function Cf(t){return t?parseInt(t):1}function l0e(t){const e=t.match(n0e);if(!e)return NaN;const r=vx(e[1]),n=vx(e[2]),i=vx(e[3]);return m0e(r,n,i)?r*Dne+n*Ane+i*1e3:NaN}function vx(t){return t&&parseFloat(t.replace(",","."))||0}function c0e(t){if(t==="Z")return 0;const e=t.match(i0e);if(!e)return 0;const r=e[1]==="+"?-1:1,n=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return g0e(n,i)?r*(n*Dne+i*Ane):NaN}function u0e(t,e,r){const n=new Date(0);n.setUTCFullYear(t,0,4);const i=n.getUTCDay()||7,s=(e-1)*7+r+1-i;return n.setUTCDate(n.getUTCDate()+s),n}const d0e=[31,null,31,30,31,30,31,31,30,31,30,31];function Une(t){return t%400===0||t%4===0&&t%100!==0}function h0e(t,e,r){return e>=0&&e<=11&&r>=1&&r<=(d0e[e]||(Une(t)?29:28))}function f0e(t,e){return e>=1&&e<=(Une(t)?366:365)}function p0e(t,e,r){return e>=1&&e<=53&&r>=0&&r<=6}function m0e(t,e,r){return t===24?e===0&&r===0:r>=0&&r<60&&e>=0&&e<60&&t>=0&&t<25}function g0e(t,e){return e>=0&&e<=59}function y0e(t){if(!t||t.length===0)return{todos:[],today:[],yesterday:[],thisWeek:[],older:[]};const e={todos:[],today:[],yesterday:[],thisWeek:[],older:[]};return t.forEach(r=>{if(r.type==="todo"){e.todos.push(r);return}Vp(r.created);let n=r.activity_date||r.created;r.activity_date&&r.activity_time&&(n=`${r.activity_date}T${r.activity_time}`);const i=Vp(n);zne(i)?e.today.push(r):Vne(i)?e.yesterday.push(r):t0e(i)?e.thisWeek.push(r):e.older.push(r)}),e.todos.sort((r,n)=>{if(r.is_completed&&!n.is_completed)return 1;if(!r.is_completed&&n.is_completed)return-1;if(!r.is_completed&&!n.is_completed){if(r.due_date&&n.due_date)return new Date(r.due_date)-new Date(n.due_date);if(r.due_date&&!n.due_date)return-1;if(!r.due_date&&n.due_date)return 1}return new Date(n.created)-new Date(r.created)}),e}function v0e(t){if(!t)return"";try{const e=Vp(t),r=t.includes("T")&&t.length>10,n=r?" at HH:mm":"";return zne(e)?Jve(e,{addSuffix:!0}):Vne(e)?r?Rn(e,"'Yesterday' 'at' HH:mm"):"Yesterday":Rn(e,r?"MMM d, yyyy 'at' HH:mm":"MMM d, yyyy")}catch{return t}}function b0e(t){return{call:"Phone",email:"Mail",chat:"MessageCircle",meeting:"Users",coffee:"Coffee",lunch:"Utensils",note:"FileText"}[t]||"Circle"}function x0e(t){return{call:"Phone call",email:"Email",chat:"Chat",meeting:"Meeting",coffee:"Coffee",lunch:"Lunch",note:"Note"}[t]||t||"Activity"}function Dm(t){if(!t.due_date||t.is_completed)return!1;try{const e=Vp(t.due_date),r=new Date;return r.setHours(0,0,0,0),e.setHours(0,0,0,0),e<r}catch{return!1}}function w0e(t){const e=[];return t.is_completed?e.push("opacity-60","line-through"):Dm(t)&&e.push("text-red-600","font-medium"),e.join(" ")}function _A({isOpen:t,onClose:e,todo:r,onComplete:n,onCompleteAsActivity:i}){return!t||!r?null:c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Complete todo"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:c.jsx(ht,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"p-4",children:[c.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:['"',r.content,'"']}),c.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"How would you like to complete this todo?"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("button",{onClick:n,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-colors text-left",children:[c.jsx(Hi,{className:"w-5 h-5 text-primary-600 flex-shrink-0"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium text-gray-900",children:"Just complete"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Mark the todo as done"})]})]}),c.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors text-left",children:[c.jsx(db,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium text-gray-900",children:"Complete & log activity"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Record this as an activity on the timeline"})]})]})]})]}),c.jsx("div",{className:"flex justify-end p-4 border-t bg-gray-50 rounded-b-lg",children:c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancel"})})]})})}var Hne={exports:{}},Kne={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ih=C;function S0e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var E0e=typeof Object.is=="function"?Object.is:S0e,_0e=ih.useState,N0e=ih.useEffect,C0e=ih.useLayoutEffect,k0e=ih.useDebugValue;function j0e(t,e){var r=e(),n=_0e({inst:{value:r,getSnapshot:e}}),i=n[0].inst,s=n[1];return C0e(function(){i.value=r,i.getSnapshot=e,bx(i)&&s({inst:i})},[t,r,e]),N0e(function(){return bx(i)&&s({inst:i}),t(function(){bx(i)&&s({inst:i})})},[t]),k0e(r),r}function bx(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!E0e(t,r)}catch{return!0}}function T0e(t,e){return e()}var O0e=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?T0e:j0e;Kne.useSyncExternalStore=ih.useSyncExternalStore!==void 0?ih.useSyncExternalStore:O0e;Hne.exports=Kne;var NA=Hne.exports;function an(t){this.content=t}an.prototype={constructor:an,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,r){var n=r&&r!=t?this.remove(r):this,i=n.find(t),s=n.content.slice();return i==-1?s.push(r||t,e):(s[i+1]=e,r&&(s[i]=r)),new an(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var r=this.content.slice();return r.splice(e,2),new an(r)},addToStart:function(t,e){return new an([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var r=this.remove(t).content.slice();return r.push(t,e),new an(r)},addBefore:function(t,e,r){var n=this.remove(e),i=n.content.slice(),s=n.find(t);return i.splice(s==-1?i.length:s,0,e,r),new an(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=an.from(t),t.size?new an(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=an.from(t),t.size?new an(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=an.from(t);for(var r=0;r<t.content.length;r+=2)e=e.remove(t.content[r]);return e},toObject:function(){var t={};return this.forEach(function(e,r){t[e]=r}),t},get size(){return this.content.length>>1}};an.from=function(t){if(t instanceof an)return t;var e=[];if(t)for(var r in t)e.push(r,t[r]);return new an(e)};function Gne(t,e,r){for(let n=0;;n++){if(n==t.childCount||n==e.childCount)return t.childCount==e.childCount?null:r;let i=t.child(n),s=e.child(n);if(i==s){r+=i.nodeSize;continue}if(!i.sameMarkup(s))return r;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)r++;return r}if(i.content.size||s.content.size){let o=Gne(i.content,s.content,r+1);if(o!=null)return o}r+=i.nodeSize}}function Yne(t,e,r,n){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:r,b:n};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){r-=l,n-=l;continue}if(!o.sameMarkup(a))return{a:r,b:n};if(o.isText&&o.text!=a.text){let u=0,d=Math.min(o.text.length,a.text.length);for(;u<d&&o.text[o.text.length-u-1]==a.text[a.text.length-u-1];)u++,r--,n--;return{a:r,b:n}}if(o.content.size||a.content.size){let u=Yne(o.content,a.content,r-1,n-1);if(u)return u}r-=l,n-=l}}class te{constructor(e,r){if(this.content=e,this.size=r||0,r==null)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,r,n,i=0,s){for(let o=0,a=0;a<r;o++){let l=this.content[o],u=a+l.nodeSize;if(u>e&&n(l,i+a,s||null,o)!==!1&&l.content.size){let d=a+1;l.nodesBetween(Math.max(0,e-d),Math.min(l.content.size,r-d),n,i+d)}a=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,r,n,i){let s="",o=!0;return this.nodesBetween(e,r,(a,l)=>{let u=a.isText?a.text.slice(Math.max(e,l)-l,r-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&u||a.isTextblock)&&n&&(o?o=!1:s+=n),s+=u},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let r=this.lastChild,n=e.firstChild,i=this.content.slice(),s=0;for(r.isText&&r.sameMarkup(n)&&(i[i.length-1]=r.withText(r.text+n.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new te(i,this.size+e.size)}cut(e,r=this.size){if(e==0&&r==this.size)return this;let n=[],i=0;if(r>e)for(let s=0,o=0;o<r;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>r)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,r-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,r-o-1))),n.push(a),i+=a.nodeSize),o=l}return new te(n,i)}cutByIndex(e,r){return e==r?te.empty:e==0&&r==this.content.length?this:new te(this.content.slice(e,r))}replaceChild(e,r){let n=this.content[e];if(n==r)return this;let i=this.content.slice(),s=this.size+r.nodeSize-n.nodeSize;return i[e]=r,new te(i,s)}addToStart(e){return new te([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new te(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let r=0;r<this.content.length;r++)if(!this.content[r].eq(e.content[r]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let r=this.content[e];if(!r)throw new RangeError("Index "+e+" out of range for "+this);return r}maybeChild(e){return this.content[e]||null}forEach(e){for(let r=0,n=0;r<this.content.length;r++){let i=this.content[r];e(i,n,r),n+=i.nodeSize}}findDiffStart(e,r=0){return Gne(this,e,r)}findDiffEnd(e,r=this.size,n=e.size){return Yne(this,e,r,n)}findIndex(e){if(e==0)return ey(0,e);if(e==this.size)return ey(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,n=0;;r++){let i=this.child(r),s=n+i.nodeSize;if(s>=e)return s==e?ey(r+1,s):ey(r,n);n=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,r){if(!r)return te.empty;if(!Array.isArray(r))throw new RangeError("Invalid input for Fragment.fromJSON");return new te(r.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return te.empty;let r,n=0;for(let i=0;i<e.length;i++){let s=e[i];n+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(r||(r=e.slice(0,i)),r[r.length-1]=s.withText(r[r.length-1].text+s.text)):r&&r.push(s)}return new te(r||e,n)}static from(e){if(!e)return te.empty;if(e instanceof te)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new te([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}te.empty=new te([],0);const xx={index:0,offset:0};function ey(t,e){return xx.index=t,xx.offset=e,xx}function Av(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let r=Array.isArray(t);if(Array.isArray(e)!=r)return!1;if(r){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!Av(t[n],e[n]))return!1}else{for(let n in t)if(!(n in e)||!Av(t[n],e[n]))return!1;for(let n in e)if(!(n in t))return!1}return!0}let Pt=class tR{constructor(e,r){this.type=e,this.attrs=r}addToSet(e){let r,n=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))r||(r=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!n&&s.type.rank>this.type.rank&&(r||(r=e.slice(0,i)),r.push(this),n=!0),r&&r.push(s)}}return r||(r=e.slice()),n||r.push(this),r}removeFromSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return e.slice(0,r).concat(e.slice(r+1));return e}isInSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Av(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[r.type];if(!n)throw new RangeError(`There is no mark type ${r.type} in this schema`);let i=n.create(r.attrs);return n.checkAttrs(i.attrs),i}static sameSet(e,r){if(e==r)return!0;if(e.length!=r.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(r[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return tR.none;if(e instanceof tR)return[e];let r=e.slice();return r.sort((n,i)=>n.type.rank-i.type.rank),r}};Pt.none=[];class Dv extends Error{}class xe{constructor(e,r,n){this.content=e,this.openStart=r,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,r){let n=Xne(this.content,e+this.openStart,r);return n&&new xe(n,this.openStart,this.openEnd)}removeBetween(e,r){return new xe(Qne(this.content,e+this.openStart,r+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,r){if(!r)return xe.empty;let n=r.openStart||0,i=r.openEnd||0;if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new xe(te.fromJSON(e,r.content),n,i)}static maxOpen(e,r=!0){let n=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(r||!s.type.spec.isolating);s=s.firstChild)n++;for(let s=e.lastChild;s&&!s.isLeaf&&(r||!s.type.spec.isolating);s=s.lastChild)i++;return new xe(e,n,i)}}xe.empty=new xe(te.empty,0,0);function Qne(t,e,r){let{index:n,offset:i}=t.findIndex(e),s=t.maybeChild(n),{index:o,offset:a}=t.findIndex(r);if(i==e||s.isText){if(a!=r&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(r))}if(n!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(n,s.copy(Qne(s.content,e-i-1,r-i-1)))}function Xne(t,e,r,n){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return n&&!n.canReplace(i,i,r)?null:t.cut(0,e).append(r).append(t.cut(e));let a=Xne(o.content,e-s-1,r,o);return a&&t.replaceChild(i,o.copy(a))}function P0e(t,e,r){if(r.openStart>t.depth)throw new Dv("Inserted content deeper than insertion position");if(t.depth-r.openStart!=e.depth-r.openEnd)throw new Dv("Inconsistent open depths");return Jne(t,e,r,0)}function Jne(t,e,r,n){let i=t.index(n),s=t.node(n);if(i==e.index(n)&&n<t.depth-r.openStart){let o=Jne(t,e,r,n+1);return s.copy(s.content.replaceChild(i,o))}else if(r.content.size)if(!r.openStart&&!r.openEnd&&t.depth==n&&e.depth==n){let o=t.parent,a=o.content;return Sc(o,a.cut(0,t.parentOffset).append(r.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=I0e(r,t);return Sc(s,eie(t,o,a,e,n))}else return Sc(s,$v(t,e,n))}function Zne(t,e){if(!e.type.compatibleContent(t.type))throw new Dv("Cannot join "+e.type.name+" onto "+t.type.name)}function rR(t,e,r){let n=t.node(r);return Zne(n,e.node(r)),n}function wc(t,e){let r=e.length-1;r>=0&&t.isText&&t.sameMarkup(e[r])?e[r]=t.withText(e[r].text+t.text):e.push(t)}function ip(t,e,r,n){let i=(e||t).node(r),s=0,o=e?e.index(r):i.childCount;t&&(s=t.index(r),t.depth>r?s++:t.textOffset&&(wc(t.nodeAfter,n),s++));for(let a=s;a<o;a++)wc(i.child(a),n);e&&e.depth==r&&e.textOffset&&wc(e.nodeBefore,n)}function Sc(t,e){return t.type.checkContent(e),t.copy(e)}function eie(t,e,r,n,i){let s=t.depth>i&&rR(t,e,i+1),o=n.depth>i&&rR(r,n,i+1),a=[];return ip(null,t,i,a),s&&o&&e.index(i)==r.index(i)?(Zne(s,o),wc(Sc(s,eie(t,e,r,n,i+1)),a)):(s&&wc(Sc(s,$v(t,e,i+1)),a),ip(e,r,i,a),o&&wc(Sc(o,$v(r,n,i+1)),a)),ip(n,null,i,a),new te(a)}function $v(t,e,r){let n=[];if(ip(null,t,r,n),t.depth>r){let i=rR(t,e,r+1);wc(Sc(i,$v(t,e,r+1)),n)}return ip(e,null,r,n),new te(n)}function I0e(t,e){let r=e.depth-t.openStart,i=e.node(r).copy(t.content);for(let s=r-1;s>=0;s--)i=e.node(s).copy(te.from(i));return{start:i.resolveNoCache(t.openStart+r),end:i.resolveNoCache(i.content.size-t.openEnd-r)}}class Up{constructor(e,r,n){this.pos=e,this.path=r,this.parentOffset=n,this.depth=r.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,r=this.index(this.depth);if(r==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],i=e.child(r);return n?e.child(r).cut(n):i}get nodeBefore(){let e=this.index(this.depth),r=this.pos-this.path[this.path.length-1];return r?this.parent.child(e).cut(0,r):e==0?null:this.parent.child(e-1)}posAtIndex(e,r){r=this.resolveDepth(r);let n=this.path[r*3],i=r==0?0:this.path[r*3-1]+1;for(let s=0;s<e;s++)i+=n.child(s).nodeSize;return i}marks(){let e=this.parent,r=this.index();if(e.content.size==0)return Pt.none;if(this.textOffset)return e.child(r).marks;let n=e.maybeChild(r-1),i=e.maybeChild(r);if(!n){let a=n;n=i,i=a}let s=n.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let r=this.parent.maybeChild(this.index());if(!r||!r.isInline)return null;let n=r.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<n.length;s++)n[s].type.spec.inclusive===!1&&(!i||!n[s].isInSet(i.marks))&&(n=n[s--].removeFromSet(n));return n}sharedDepth(e){for(let r=this.depth;r>0;r--)if(this.start(r)<=e&&this.end(r)>=e)return r;return 0}blockRange(e=this,r){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!r||r(this.node(n))))return new Fv(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let r=1;r<=this.depth;r++)e+=(e?"/":"")+this.node(r).type.name+"_"+this.index(r-1);return e+":"+this.parentOffset}static resolve(e,r){if(!(r>=0&&r<=e.content.size))throw new RangeError("Position "+r+" out of range");let n=[],i=0,s=r;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),u=s-l;if(n.push(o,a,i+l),!u||(o=o.child(a),o.isText))break;s=u-1,i+=l+1}return new Up(r,n,s)}static resolveCached(e,r){let n=h3.get(e);if(n)for(let s=0;s<n.elts.length;s++){let o=n.elts[s];if(o.pos==r)return o}else h3.set(e,n=new R0e);let i=n.elts[n.i]=Up.resolve(e,r);return n.i=(n.i+1)%M0e,i}}class R0e{constructor(){this.elts=[],this.i=0}}const M0e=12,h3=new WeakMap;class Fv{constructor(e,r,n){this.$from=e,this.$to=r,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const A0e=Object.create(null);let nl=class nR{constructor(e,r,n,i=Pt.none){this.type=e,this.attrs=r,this.marks=i,this.content=n||te.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,r,n,i=0){this.content.nodesBetween(e,r,n,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,r,n,i){return this.content.textBetween(e,r,n,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,r,n){return this.type==e&&Av(this.attrs,r||e.defaultAttrs||A0e)&&Pt.sameSet(this.marks,n||Pt.none)}copy(e=null){return e==this.content?this:new nR(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new nR(this.type,this.attrs,this.content,e)}cut(e,r=this.content.size){return e==0&&r==this.content.size?this:this.copy(this.content.cut(e,r))}slice(e,r=this.content.size,n=!1){if(e==r)return xe.empty;let i=this.resolve(e),s=this.resolve(r),o=n?0:i.sharedDepth(r),a=i.start(o),u=i.node(o).content.cut(i.pos-a,s.pos-a);return new xe(u,i.depth-o,s.depth-o)}replace(e,r,n){return P0e(this.resolve(e),this.resolve(r),n)}nodeAt(e){for(let r=this;;){let{index:n,offset:i}=r.content.findIndex(e);if(r=r.maybeChild(n),!r)return null;if(i==e||r.isText)return r;e-=i+1}}childAfter(e){let{index:r,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(r),index:r,offset:n}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:r,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(r),index:r,offset:n};let i=this.content.child(r-1);return{node:i,index:r-1,offset:n-i.nodeSize}}resolve(e){return Up.resolveCached(this,e)}resolveNoCache(e){return Up.resolve(this,e)}rangeHasMark(e,r,n){let i=!1;return r>e&&this.nodesBetween(e,r,s=>(n.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),tie(this.marks,e)}contentMatchAt(e){let r=this.type.contentMatch.matchFragment(this.content,0,e);if(!r)throw new Error("Called contentMatchAt on a node with invalid content");return r}canReplace(e,r,n=te.empty,i=0,s=n.childCount){let o=this.contentMatchAt(e).matchFragment(n,i,s),a=o&&o.matchFragment(this.content,r);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(n.child(l).marks))return!1;return!0}canReplaceWith(e,r,n,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(n),o=s&&s.matchFragment(this.content,r);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Pt.none;for(let r=0;r<this.marks.length;r++){let n=this.marks[r];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!Pt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(r=>r.type.name)}`);this.content.forEach(r=>r.check())}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(r=>r.toJSON())),e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Node.fromJSON");let n;if(r.marks){if(!Array.isArray(r.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=r.marks.map(e.markFromJSON)}if(r.type=="text"){if(typeof r.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(r.text,n)}let i=te.fromJSON(e,r.content),s=e.nodeType(r.type).create(r.attrs,i,n);return s.type.checkAttrs(s.attrs),s}};nl.prototype.text=void 0;class qv extends nl{constructor(e,r,n,i){if(super(e,r,null,i),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):tie(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,r){return this.text.slice(e,r)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new qv(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new qv(this.type,this.attrs,e,this.marks)}cut(e=0,r=this.text.length){return e==0&&r==this.text.length?this:this.withText(this.text.slice(e,r))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function tie(t,e){for(let r=t.length-1;r>=0;r--)e=t[r].type.name+"("+e+")";return e}class Hc{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,r){let n=new D0e(e,r);if(n.next==null)return Hc.empty;let i=rie(n);n.next&&n.err("Unexpected trailing text");let s=W0e(z0e(i));return V0e(s,n),s}matchType(e){for(let r=0;r<this.next.length;r++)if(this.next[r].type==e)return this.next[r].next;return null}matchFragment(e,r=0,n=e.childCount){let i=this;for(let s=r;i&&s<n;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:r}=this.next[e];if(!(r.isText||r.hasRequiredAttrs()))return r}return null}compatible(e){for(let r=0;r<this.next.length;r++)for(let n=0;n<e.next.length;n++)if(this.next[r].type==e.next[n].type)return!0;return!1}fillBefore(e,r=!1,n=0){let i=[this];function s(o,a){let l=o.matchFragment(e,n);if(l&&(!r||l.validEnd))return te.from(a.map(u=>u.createAndFill()));for(let u=0;u<o.next.length;u++){let{type:d,next:h}=o.next[u];if(!(d.isText||d.hasRequiredAttrs())&&i.indexOf(h)==-1){i.push(h);let f=s(h,a.concat(d));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let r=this.computeWrapping(e);return this.wrapCache.push(e,r),r}computeWrapping(e){let r=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let i=n.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in r)&&(!i.type||l.validEnd)&&(n.push({match:a.contentMatch,type:a,via:i}),r[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function r(n){e.push(n);for(let i=0;i<n.next.length;i++)e.indexOf(n.next[i].next)==-1&&r(n.next[i].next)}return r(this),e.map((n,i)=>{let s=i+(n.validEnd?"*":" ")+" ";for(let o=0;o<n.next.length;o++)s+=(o?", ":"")+n.next[o].type.name+"->"+e.indexOf(n.next[o].next);return s}).join(`
`)}}Hc.empty=new Hc(!0);class D0e{constructor(e,r){this.string=e,this.nodeTypes=r,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function rie(t){let e=[];do e.push($0e(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function $0e(t){let e=[];do e.push(F0e(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function F0e(t){let e=B0e(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=q0e(t,e);else break;return e}function f3(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function q0e(t,e){let r=f3(t),n=r;return t.eat(",")&&(t.next!="}"?n=f3(t):n=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:r,max:n,expr:e}}function L0e(t,e){let r=t.nodeTypes,n=r[e];if(n)return[n];let i=[];for(let s in r){let o=r[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function B0e(t){if(t.eat("(")){let e=rie(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=L0e(t,t.next).map(r=>(t.inline==null?t.inline=r.isInline:t.inline!=r.isInline&&t.err("Mixing inline and block content"),{type:"name",value:r}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function z0e(t){let e=[[]];return i(s(t,0),r()),e;function r(){return e.push([])-1}function n(o,a,l){let u={term:l,to:a};return e[o].push(u),u}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,u)=>l.concat(s(u,a)),[]);if(o.type=="seq")for(let l=0;;l++){let u=s(o.exprs[l],a);if(l==o.exprs.length-1)return u;i(u,a=r())}else if(o.type=="star"){let l=r();return n(a,l),i(s(o.expr,l),l),[n(l)]}else if(o.type=="plus"){let l=r();return i(s(o.expr,a),l),i(s(o.expr,l),l),[n(l)]}else{if(o.type=="opt")return[n(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let u=0;u<o.min;u++){let d=r();i(s(o.expr,l),d),l=d}if(o.max==-1)i(s(o.expr,l),l);else for(let u=o.min;u<o.max;u++){let d=r();n(l,d),i(s(o.expr,l),d),l=d}return[n(l)]}else{if(o.type=="name")return[n(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function nie(t,e){return e-t}function p3(t,e){let r=[];return n(e),r.sort(nie);function n(i){let s=t[i];if(s.length==1&&!s[0].term)return n(s[0].to);r.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&r.indexOf(l)==-1&&n(l)}}}function W0e(t){let e=Object.create(null);return r(p3(t,0));function r(n){let i=[];n.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let u;for(let d=0;d<i.length;d++)i[d][0]==a&&(u=i[d][1]);p3(t,l).forEach(d=>{u||i.push([a,u=[]]),u.indexOf(d)==-1&&u.push(d)})})});let s=e[n.join(",")]=new Hc(n.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(nie);s.next.push({type:i[o][0],next:e[a.join(",")]||r(a)})}return s}}function V0e(t,e){for(let r=0,n=[t];r<n.length;r++){let i=n[r],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:u}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),n.indexOf(u)==-1&&n.push(u)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function iie(t){let e=Object.create(null);for(let r in t){let n=t[r];if(!n.hasDefault)return null;e[r]=n.default}return e}function sie(t,e){let r=Object.create(null);for(let n in t){let i=e&&e[n];if(i===void 0){let s=t[n];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+n)}r[n]=i}return r}function oie(t,e,r,n){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${r} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function aie(t,e){let r=Object.create(null);if(e)for(let n in e)r[n]=new H0e(t,n,e[n]);return r}let m3=class lie{constructor(e,r,n){this.name=e,this.schema=r,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=aie(e,n.attrs),this.defaultAttrs=iie(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Hc.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:sie(this.attrs,e)}create(e=null,r,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new nl(this,this.computeAttrs(e),te.from(r),Pt.setFrom(n))}createChecked(e=null,r,n){return r=te.from(r),this.checkContent(r),new nl(this,this.computeAttrs(e),r,Pt.setFrom(n))}createAndFill(e=null,r,n){if(e=this.computeAttrs(e),r=te.from(r),r.size){let o=this.contentMatch.fillBefore(r);if(!o)return null;r=o.append(r)}let i=this.contentMatch.matchFragment(r),s=i&&i.fillBefore(te.empty,!0);return s?new nl(this,e,r.append(s),Pt.setFrom(n)):null}validContent(e){let r=this.contentMatch.matchFragment(e);if(!r||!r.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){oie(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let r=0;r<e.length;r++)if(!this.allowsMarkType(e[r].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let r;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?r&&r.push(e[n]):r||(r=e.slice(0,n));return r?r.length?r:Pt.none:e}static compile(e,r){let n=Object.create(null);e.forEach((s,o)=>n[s]=new lie(s,r,o));let i=r.spec.topNode||"doc";if(!n[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let s in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function U0e(t,e,r){let n=r.split("|");return i=>{let s=i===null?"null":typeof i;if(n.indexOf(s)<0)throw new RangeError(`Expected value of type ${n} for attribute ${e} on type ${t}, got ${s}`)}}class H0e{constructor(e,r,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?U0e(e,r,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class wb{constructor(e,r,n,i){this.name=e,this.rank=r,this.schema=n,this.spec=i,this.attrs=aie(e,i.attrs),this.excluded=null;let s=iie(this.attrs);this.instance=s?new Pt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Pt(this,sie(this.attrs,e))}static compile(e,r){let n=Object.create(null),i=0;return e.forEach((s,o)=>n[s]=new wb(s,i++,r,o)),n}removeFromSet(e){for(var r=0;r<e.length;r++)e[r].type==this&&(e=e.slice(0,r).concat(e.slice(r+1)),r--);return e}isInSet(e){for(let r=0;r<e.length;r++)if(e[r].type==this)return e[r]}checkAttrs(e){oie(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class cie{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let r=this.spec={};for(let i in e)r[i]=e[i];r.nodes=an.from(e.nodes),r.marks=an.from(e.marks||{}),this.nodes=m3.compile(this.spec.nodes,this),this.marks=wb.compile(this.spec.marks,this);let n=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=n[o]||(n[o]=Hc.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?g3(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:g3(this,o.split(" "))}this.nodeFromJSON=i=>nl.fromJSON(this,i),this.markFromJSON=i=>Pt.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,r=null,n,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof m3){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(r,n,i)}text(e,r){let n=this.nodes.text;return new qv(n,n.defaultAttrs,e,Pt.setFrom(r))}mark(e,r){return typeof e=="string"&&(e=this.marks[e]),e.create(r)}nodeType(e){let r=this.nodes[e];if(!r)throw new RangeError("Unknown node type: "+e);return r}}function g3(t,e){let r=[];for(let n=0;n<e.length;n++){let i=e[n],s=t.marks[i],o=s;if(s)r.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&r.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return r}function K0e(t){return t.tag!=null}function G0e(t){return t.style!=null}class il{constructor(e,r){this.schema=e,this.rules=r,this.tags=[],this.styles=[];let n=this.matchedStyles=[];r.forEach(i=>{if(K0e(i))this.tags.push(i);else if(G0e(i)){let s=/[^=]*/.exec(i.style)[0];n.indexOf(s)<0&&n.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,r={}){let n=new v3(this,r,!1);return n.addAll(e,Pt.none,r.from,r.to),n.finish()}parseSlice(e,r={}){let n=new v3(this,r,!0);return n.addAll(e,Pt.none,r.from,r.to),xe.maxOpen(n.finish())}matchTag(e,r,n){for(let i=n?this.tags.indexOf(n)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(X0e(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||r.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,r,n,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!n.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=r))){if(o.getAttrs){let l=o.getAttrs(r);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let r=[];function n(i){let s=i.priority==null?50:i.priority,o=0;for(;o<r.length;o++){let a=r[o];if((a.priority==null?50:a.priority)<s)break}r.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{n(o=b3(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{n(o=b3(o)),o.node||o.ignore||o.mark||(o.node=i)})}return r}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new il(e,il.schemaRules(e)))}}const uie={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Y0e={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},die={ol:!0,ul:!0},Hp=1,iR=2,sp=4;function y3(t,e,r){return e!=null?(e?Hp:0)|(e==="full"?iR:0):t&&t.whitespace=="pre"?Hp|iR:r&~sp}class ty{constructor(e,r,n,i,s,o){this.type=e,this.attrs=r,this.marks=n,this.solid=i,this.options=o,this.content=[],this.activeMarks=Pt.none,this.match=s||(o&sp?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let r=this.type.contentMatch.fillBefore(te.from(e));if(r)this.match=this.type.contentMatch.matchFragment(r);else{let n=this.type.contentMatch,i;return(i=n.findWrapping(e.type))?(this.match=n,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Hp)){let n=this.content[this.content.length-1],i;if(n&&n.isText&&(i=/[ \t\r\n\u000c]+$/.exec(n.text))){let s=n;n.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let r=te.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(te.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!uie.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class v3{constructor(e,r,n){this.parser=e,this.options=r,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let i=r.topNode,s,o=y3(null,r.preserveWhitespace,0)|(n?sp:0);i?s=new ty(i.type,i.attrs,Pt.none,!0,r.topMatch||i.type.contentMatch,o):n?s=new ty(null,null,Pt.none,!0,null,o):s=new ty(e.schema.topNodeType,null,Pt.none,!0,null,o),this.nodes=[s],this.find=r.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,r){e.nodeType==3?this.addTextNode(e,r):e.nodeType==1&&this.addElement(e,r)}addTextNode(e,r){let n=e.nodeValue,i=this.top,s=i.options&iR?"full":this.localPreserveWS||(i.options&Hp)>0,{schema:o}=this.parser;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(s)if(s==="full")n=n.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(n)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=n.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),r,!0),a[l]&&this.insertNode(o.text(a[l]),r,!/\S/.test(a[l]));n=""}else n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],l=e.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(n=n.slice(1))}n&&this.insertNode(o.text(n),r,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,r,n){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;die.hasOwnProperty(o)&&this.parser.normalizeLists&&Q0e(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,n));e:if(l?l.ignore:Y0e.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,r);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let u,d=this.needsBlock;if(uie.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),u=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,r);break e}let h=l&&l.skip?r:this.readStyles(e,r);h&&this.addAll(e,h),u&&this.sync(s),this.needsBlock=d}else{let u=this.readStyles(e,r);u&&this.addElementByRule(e,l,u,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,r){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),r)}ignoreFallback(e,r){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),r,!0)}readStyles(e,r){let n=e.style;if(n&&n.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=n.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?r=r.filter(u=>!l.clearMark(u)):r=r.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return r}addElementByRule(e,r,n,i){let s,o;if(r.node)if(o=this.parser.schema.nodes[r.node],o.isLeaf)this.insertNode(o.create(r.attrs),n,e.nodeName=="BR")||this.leafFallback(e,n);else{let l=this.enter(o,r.attrs||null,n,r.preserveWhitespace);l&&(s=!0,n=l)}else{let l=this.parser.schema.marks[r.mark];n=n.concat(l.create(r.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,n,i);else if(r.getContent)this.findInside(e),r.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,n,!1));else{let l=e;typeof r.contentElement=="string"?l=e.querySelector(r.contentElement):typeof r.contentElement=="function"?l=r.contentElement(e):r.contentElement&&(l=r.contentElement),this.findAround(e,l,!0),this.addAll(l,n),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,r,n,i){let s=n||0;for(let o=n?e.childNodes[n]:e.firstChild,a=i==null?null:e.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,r);this.findAtPoint(e,s)}findPlace(e,r,n){let i,s;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],u=l.findWrapping(e);if(u&&(!i||i.length>u.length+a)&&(i=u,s=l,!u.length))break;if(l.solid){if(n)break;a+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)r=this.enterInner(i[o],null,r,!1);return r}insertNode(e,r,n){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(r=this.enterInner(s,null,r))}let i=this.findPlace(e,r,n);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=Pt.none;for(let a of i.concat(e.marks))(s.type?s.type.allowsMarkType(a.type):x3(a.type,e.type))&&(o=a.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,r,n,i){let s=this.findPlace(e.create(r),n,!1);return s&&(s=this.enterInner(e,r,n,!0,i)),s}enterInner(e,r,n,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=y3(e,s,o.options);o.options&sp&&o.content.length==0&&(a|=sp);let l=Pt.none;return n=n.filter(u=>(o.type?o.type.allowsMarkType(u.type):x3(u.type,e))?(l=u.addToSet(l),!1):!0),this.nodes.push(new ty(e,r,l,i,null,a)),this.open++,n}closeExtra(e=!1){let r=this.nodes.length-1;if(r>this.open){for(;r>this.open;r--)this.nodes[r-1].content.push(this.nodes[r].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let r=this.open;r>=0;r--){if(this.nodes[r]==e)return this.open=r,!0;this.localPreserveWS&&(this.nodes[r].options|=Hp)}return!1}get currentPos(){this.closeExtra();let e=0;for(let r=this.open;r>=0;r--){let n=this.nodes[r].content;for(let i=n.length-1;i>=0;i--)e+=n[i].nodeSize;r&&e++}return e}findAtPoint(e,r){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==r&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)&&(this.find[r].pos=this.currentPos)}findAround(e,r,n){if(e!=r&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&r.compareDocumentPosition(this.find[i].node)&(n?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&(this.find[r].pos=this.currentPos-(e.nodeValue.length-this.find[r].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let r=e.split("/"),n=this.options.context,i=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),s=-(n?n.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let u=r[a];if(u==""){if(a==r.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let d=l>0||l==0&&i?this.nodes[l].type:n&&l>=s?n.node(l-s).type:null;if(!d||d.name!=u&&!d.isInGroup(u))return!1;l--}}return!0};return o(r.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let r=e.depth;r>=0;r--){let n=e.node(r).contentMatchAt(e.indexAfter(r)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let r in this.parser.schema.nodes){let n=this.parser.schema.nodes[r];if(n.isTextblock&&n.defaultAttrs)return n}}}function Q0e(t){for(let e=t.firstChild,r=null;e;e=e.nextSibling){let n=e.nodeType==1?e.nodeName.toLowerCase():null;n&&die.hasOwnProperty(n)&&r?(r.appendChild(e),e=r):n=="li"?r=e:n&&(r=null)}}function X0e(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function b3(t){let e={};for(let r in t)e[r]=t[r];return e}function x3(t,e){let r=e.schema.nodes;for(let n in r){let i=r[n];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:u,next:d}=a.edge(l);if(u==e||s.indexOf(d)<0&&o(d))return!0}};if(o(i.contentMatch))return!0}}class cu{constructor(e,r){this.nodes=e,this.marks=r}serializeFragment(e,r={},n){n||(n=wx(r).createDocumentFragment());let i=n,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let u=o.marks[l];if(!this.marks[u.type.name]){l++;continue}if(!u.eq(s[a][0])||u.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let u=o.marks[l++],d=this.serializeMark(u,o.isInline,r);d&&(s.push([u,i]),i.appendChild(d.dom),i=d.contentDOM||d.dom)}}i.appendChild(this.serializeNodeInner(o,r))}),n}serializeNodeInner(e,r){let{dom:n,contentDOM:i}=Ly(wx(r),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,r,i)}return n}serializeNode(e,r={}){let n=this.serializeNodeInner(e,r);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,r);s&&((s.contentDOM||s.dom).appendChild(n),n=s.dom)}return n}serializeMark(e,r,n={}){let i=this.marks[e.type.name];return i&&Ly(wx(n),i(e,r),null,e.attrs)}static renderSpec(e,r,n=null,i){return Ly(e,r,n,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new cu(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let r=w3(e.nodes);return r.text||(r.text=n=>n.text),r}static marksFromSchema(e){return w3(e.marks)}}function w3(t){let e={};for(let r in t){let n=t[r].spec.toDOM;n&&(e[r]=n)}return e}function wx(t){return t.document||window.document}const S3=new WeakMap;function J0e(t){let e=S3.get(t);return e===void 0&&S3.set(t,e=Z0e(t)),e}function Z0e(t){let e=null;function r(n){if(n&&typeof n=="object")if(Array.isArray(n))if(typeof n[0]=="string")e||(e=[]),e.push(n);else for(let i=0;i<n.length;i++)r(n[i]);else for(let i in n)r(n[i])}return r(t),e}function Ly(t,e,r,n){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(n&&(s=J0e(n))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(r=i.slice(0,o),i=i.slice(o+1));let a,l=r?t.createElementNS(r,i):t.createElement(i),u=e[1],d=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){d=2;for(let h in u)if(u[h]!=null){let f=h.indexOf(" ");f>0?l.setAttributeNS(h.slice(0,f),h.slice(f+1),u[h]):h=="style"&&l.style?l.style.cssText=u[h]:l.setAttribute(h,u[h])}}for(let h=d;h<e.length;h++){let f=e[h];if(f===0){if(h<e.length-1||h>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:p,contentDOM:m}=Ly(t,f,r,n);if(l.appendChild(p),m){if(a)throw new RangeError("Multiple content holes");a=m}}}return{dom:l,contentDOM:a}}const hie=65535,fie=Math.pow(2,16);function ebe(t,e){return t+e*fie}function E3(t){return t&hie}function tbe(t){return(t-(t&hie))/fie}const pie=1,mie=2,By=4,gie=8;class sR{constructor(e,r,n){this.pos=e,this.delInfo=r,this.recover=n}get deleted(){return(this.delInfo&gie)>0}get deletedBefore(){return(this.delInfo&(pie|By))>0}get deletedAfter(){return(this.delInfo&(mie|By))>0}get deletedAcross(){return(this.delInfo&By)>0}}class xi{constructor(e,r=!1){if(this.ranges=e,this.inverted=r,!e.length&&xi.empty)return xi.empty}recover(e){let r=0,n=E3(e);if(!this.inverted)for(let i=0;i<n;i++)r+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[n*3]+r+tbe(e)}mapResult(e,r=1){return this._map(e,r,!1)}map(e,r=1){return this._map(e,r,!0)}_map(e,r,n){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let u=this.ranges[a+s],d=this.ranges[a+o],h=l+u;if(e<=h){let f=u?e==l?-1:e==h?1:r:r,p=l+i+(f<0?0:d);if(n)return p;let m=e==(r<0?l:h)?null:ebe(a/3,e-l),g=e==l?mie:e==h?pie:By;return(r<0?e!=l:e!=h)&&(g|=gie),new sR(p,g,m)}i+=d-u}return n?e+i:new sR(e+i,0,null)}touches(e,r){let n=0,i=E3(r),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?n:0);if(l>e)break;let u=this.ranges[a+s],d=l+u;if(e<=d&&a==i*3)return!0;n+=this.ranges[a+o]-u}return!1}forEach(e){let r=this.inverted?2:1,n=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),u=this.ranges[i+r],d=this.ranges[i+n];e(a,a+u,l,l+d),s+=d-u}}invert(){return new xi(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?xi.empty:new xi(e<0?[0,-e,0]:[0,0,e])}}xi.empty=new xi([]);class Kp{constructor(e,r,n=0,i=e?e.length:0){this.mirror=r,this.from=n,this.to=i,this._maps=e||[],this.ownData=!(e||r)}get maps(){return this._maps}slice(e=0,r=this.maps.length){return new Kp(this._maps,this.mirror,e,r)}appendMap(e,r){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),r!=null&&this.setMirror(this._maps.length-1,r)}appendMapping(e){for(let r=0,n=this._maps.length;r<e._maps.length;r++){let i=e.getMirror(r);this.appendMap(e._maps[r],i!=null&&i<r?n+i:void 0)}}getMirror(e){if(this.mirror){for(let r=0;r<this.mirror.length;r++)if(this.mirror[r]==e)return this.mirror[r+(r%2?-1:1)]}}setMirror(e,r){this.mirror||(this.mirror=[]),this.mirror.push(e,r)}appendMappingInverted(e){for(let r=e.maps.length-1,n=this._maps.length+e._maps.length;r>=0;r--){let i=e.getMirror(r);this.appendMap(e._maps[r].invert(),i!=null&&i>r?n-i-1:void 0)}}invert(){let e=new Kp;return e.appendMappingInverted(this),e}map(e,r=1){if(this.mirror)return this._map(e,r,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,r);return e}mapResult(e,r=1){return this._map(e,r,!1)}_map(e,r,n){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(e,r);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return n?e:new sR(e,i,null)}}const Sx=Object.create(null);class Cn{getMap(){return xi.empty}merge(e){return null}static fromJSON(e,r){if(!r||!r.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=Sx[r.stepType];if(!n)throw new RangeError(`No step type ${r.stepType} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in Sx)throw new RangeError("Duplicate use of step JSON ID "+e);return Sx[e]=r,r.prototype.jsonID=e,r}}class xr{constructor(e,r){this.doc=e,this.failed=r}static ok(e){return new xr(e,null)}static fail(e){return new xr(null,e)}static fromReplace(e,r,n,i){try{return xr.ok(e.replace(r,n,i))}catch(s){if(s instanceof Dv)return xr.fail(s.message);throw s}}}function CA(t,e,r){let n=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(CA(s.content,e,s))),s.isInline&&(s=e(s,r,i)),n.push(s)}return te.fromArray(n)}class Wa extends Cn{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=e.resolve(this.from),i=n.node(n.sharedDepth(this.to)),s=new xe(CA(r.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),r.openStart,r.openEnd);return xr.fromReplace(e,this.from,this.to,s)}invert(){return new vs(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new Wa(r.pos,n.pos,this.mark)}merge(e){return e instanceof Wa&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Wa(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Wa(r.from,r.to,e.markFromJSON(r.mark))}}Cn.jsonID("addMark",Wa);class vs extends Cn{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=new xe(CA(r.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),r.openStart,r.openEnd);return xr.fromReplace(e,this.from,this.to,n)}invert(){return new Wa(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new vs(r.pos,n.pos,this.mark)}merge(e){return e instanceof vs&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new vs(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new vs(r.from,r.to,e.markFromJSON(r.mark))}}Cn.jsonID("removeMark",vs);class Va extends Cn{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return xr.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.addToSet(r.marks));return xr.fromReplace(e,this.pos,this.pos+1,new xe(te.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);if(r){let n=this.mark.addToSet(r.marks);if(n.length==r.marks.length){for(let i=0;i<r.marks.length;i++)if(!r.marks[i].isInSet(n))return new Va(this.pos,r.marks[i]);return new Va(this.pos,this.mark)}}return new Kc(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Va(r.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Va(r.pos,e.markFromJSON(r.mark))}}Cn.jsonID("addNodeMark",Va);class Kc extends Cn{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return xr.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.removeFromSet(r.marks));return xr.fromReplace(e,this.pos,this.pos+1,new xe(te.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);return!r||!this.mark.isInSet(r.marks)?this:new Va(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Kc(r.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Kc(r.pos,e.markFromJSON(r.mark))}}Cn.jsonID("removeNodeMark",Kc);class Wr extends Cn{constructor(e,r,n,i=!1){super(),this.from=e,this.to=r,this.slice=n,this.structure=i}apply(e){return this.structure&&oR(e,this.from,this.to)?xr.fail("Structure replace would overwrite content"):xr.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new xi([this.from,this.to-this.from,this.slice.size])}invert(e){return new Wr(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deletedAcross&&n.deletedAcross?null:new Wr(r.pos,Math.max(r.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Wr)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let r=this.slice.size+e.slice.size==0?xe.empty:new xe(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Wr(this.from,this.to+(e.to-e.from),r,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let r=this.slice.size+e.slice.size==0?xe.empty:new xe(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Wr(e.from,this.to,r,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Wr(r.from,r.to,xe.fromJSON(e,r.slice),!!r.structure)}}Cn.jsonID("replace",Wr);class Hr extends Cn{constructor(e,r,n,i,s,o,a=!1){super(),this.from=e,this.to=r,this.gapFrom=n,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(oR(e,this.from,this.gapFrom)||oR(e,this.gapTo,this.to)))return xr.fail("Structure gap-replace would overwrite content");let r=e.slice(this.gapFrom,this.gapTo);if(r.openStart||r.openEnd)return xr.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,r.content);return n?xr.fromReplace(e,this.from,this.to,n):xr.fail("Content does not fit in gap")}getMap(){return new xi([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let r=this.gapTo-this.gapFrom;return new Hr(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),i=this.from==this.gapFrom?r.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return r.deletedAcross&&n.deletedAcross||i<r.pos||s>n.pos?null:new Hr(r.pos,n.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number"||typeof r.gapFrom!="number"||typeof r.gapTo!="number"||typeof r.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Hr(r.from,r.to,r.gapFrom,r.gapTo,xe.fromJSON(e,r.slice),r.insert,!!r.structure)}}Cn.jsonID("replaceAround",Hr);function oR(t,e,r){let n=t.resolve(e),i=r-e,s=n.depth;for(;i>0&&s>0&&n.indexAfter(s)==n.node(s).childCount;)s--,i--;if(i>0){let o=n.node(s).maybeChild(n.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function rbe(t,e,r,n){let i=[],s=[],o,a;t.doc.nodesBetween(e,r,(l,u,d)=>{if(!l.isInline)return;let h=l.marks;if(!n.isInSet(h)&&d.type.allowsMarkType(n.type)){let f=Math.max(u,e),p=Math.min(u+l.nodeSize,r),m=n.addToSet(h);for(let g=0;g<h.length;g++)h[g].isInSet(m)||(o&&o.to==f&&o.mark.eq(h[g])?o.to=p:i.push(o=new vs(f,p,h[g])));a&&a.to==f?a.to=p:s.push(a=new Wa(f,p,n))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function nbe(t,e,r,n){let i=[],s=0;t.doc.nodesBetween(e,r,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(n instanceof wb){let u=o.marks,d;for(;d=n.isInSet(u);)(l||(l=[])).push(d),u=d.removeFromSet(u)}else n?n.isInSet(o.marks)&&(l=[n]):l=o.marks;if(l&&l.length){let u=Math.min(a+o.nodeSize,r);for(let d=0;d<l.length;d++){let h=l[d],f;for(let p=0;p<i.length;p++){let m=i[p];m.step==s-1&&h.eq(i[p].style)&&(f=m)}f?(f.to=u,f.step=s):i.push({style:h,from:Math.max(a,e),to:u,step:s})}}}),i.forEach(o=>t.step(new vs(o.from,o.to,o.style)))}function kA(t,e,r,n=r.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<s.childCount;l++){let u=s.child(l),d=a+u.nodeSize,h=n.matchType(u.type);if(!h)o.push(new Wr(a,d,xe.empty));else{n=h;for(let f=0;f<u.marks.length;f++)r.allowsMarkType(u.marks[f].type)||t.step(new vs(a,d,u.marks[f]));if(i&&u.isText&&r.whitespace!="pre"){let f,p=/\r?\n|\r/g,m;for(;f=p.exec(u.text);)m||(m=new xe(te.from(r.schema.text(" ",r.allowedMarks(u.marks))),0,0)),o.push(new Wr(a+f.index,a+f.index+f[0].length,m))}}a=d}if(!n.validEnd){let l=n.fillBefore(te.empty,!0);t.replace(a,a,new xe(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function ibe(t,e,r){return(e==0||t.canReplace(e,t.childCount))&&(r==t.childCount||t.canReplace(0,r))}function Rh(t){let r=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let n=t.depth,i=0,s=0;;--n){let o=t.$from.node(n),a=t.$from.index(n)+i,l=t.$to.indexAfter(n)-s;if(n<t.depth&&o.canReplace(a,l,r))return n;if(n==0||o.type.spec.isolating||!ibe(o,a,l))break;a&&(i=1),l<o.childCount&&(s=1)}return null}function sbe(t,e,r){let{$from:n,$to:i,depth:s}=e,o=n.before(s+1),a=i.after(s+1),l=o,u=a,d=te.empty,h=0;for(let m=s,g=!1;m>r;m--)g||n.index(m)>0?(g=!0,d=te.from(n.node(m).copy(d)),h++):l--;let f=te.empty,p=0;for(let m=s,g=!1;m>r;m--)g||i.after(m+1)<i.end(m)?(g=!0,f=te.from(i.node(m).copy(f)),p++):u++;t.step(new Hr(l,u,o,a,new xe(d.append(f),h,p),d.size-h,!0))}function jA(t,e,r=null,n=t){let i=obe(t,e),s=i&&abe(n,e);return s?i.map(_3).concat({type:e,attrs:r}).concat(s.map(_3)):null}function _3(t){return{type:t,attrs:null}}function obe(t,e){let{parent:r,startIndex:n,endIndex:i}=t,s=r.contentMatchAt(n).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return r.canReplaceWith(n,i,o)?s:null}function abe(t,e){let{parent:r,startIndex:n,endIndex:i}=t,s=r.child(n),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let u=n;l&&u<i;u++)l=l.matchType(r.child(u).type);return!l||!l.validEnd?null:o}function lbe(t,e,r){let n=te.empty;for(let o=r.length-1;o>=0;o--){if(n.size){let a=r[o].type.contentMatch.matchFragment(n);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=te.from(r[o].type.create(r[o].attrs,n))}let i=e.start,s=e.end;t.step(new Hr(i,s,i,s,new xe(n,0,0),r.length,!0))}function cbe(t,e,r,n,i){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,r,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(n,l)&&ube(t.doc,t.mapping.slice(s).map(a),n)){let u=null;if(n.schema.linebreakReplacement){let p=n.whitespace=="pre",m=!!n.contentMatch.matchType(n.schema.linebreakReplacement);p&&!m?u=!1:!p&&m&&(u=!0)}u===!1&&vie(t,o,a,s),kA(t,t.mapping.slice(s).map(a,1),n,void 0,u===null);let d=t.mapping.slice(s),h=d.map(a,1),f=d.map(a+o.nodeSize,1);return t.step(new Hr(h,f,h+1,f-1,new xe(te.from(n.create(l,null,o.marks)),0,0),1,!0)),u===!0&&yie(t,o,a,s),!1}})}function yie(t,e,r,n){e.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=t.mapping.slice(n).map(r+1+s+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function vie(t,e,r,n){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(n).map(r+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function ube(t,e,r){let n=t.resolve(e),i=n.index();return n.parent.canReplaceWith(i,i+1,r)}function dbe(t,e,r,n,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");r||(r=s.type);let o=r.create(n,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!r.validContent(s.content))throw new RangeError("Invalid content for node type "+r.name);t.step(new Hr(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new xe(te.from(o),0,0),1,!0))}function Ro(t,e,r=1,n){let i=t.resolve(e),s=i.depth-r,o=n&&n[n.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,d=r-2;u>s;u--,d--){let h=i.node(u),f=i.index(u);if(h.type.spec.isolating)return!1;let p=h.content.cutByIndex(f,h.childCount),m=n&&n[d+1];m&&(p=p.replaceChild(0,m.type.create(m.attrs)));let g=n&&n[d]||h;if(!h.canReplace(f+1,h.childCount)||!g.type.validContent(p))return!1}let a=i.indexAfter(s),l=n&&n[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function hbe(t,e,r=1,n){let i=t.doc.resolve(e),s=te.empty,o=te.empty;for(let a=i.depth,l=i.depth-r,u=r-1;a>l;a--,u--){s=te.from(i.node(a).copy(s));let d=n&&n[u];o=te.from(d?d.type.create(d.attrs,o):i.node(a).copy(o))}t.step(new Wr(e,e,new xe(s.append(o),r,r),!0))}function kl(t,e){let r=t.resolve(e),n=r.index();return bie(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function fbe(t,e){e.content.size||t.type.compatibleContent(e.type);let r=t.contentMatchAt(t.childCount),{linebreakReplacement:n}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==n?t.type.schema.nodes.text:s.type;if(r=r.matchType(o),!r||!t.type.allowsMarks(s.marks))return!1}return r.validEnd}function bie(t,e){return!!(t&&e&&!t.isLeaf&&fbe(t,e))}function Sb(t,e,r=-1){let n=t.resolve(e);for(let i=n.depth;;i--){let s,o,a=n.index(i);if(i==n.depth?(s=n.nodeBefore,o=n.nodeAfter):r>0?(s=n.node(i+1),a++,o=n.node(i).maybeChild(a)):(s=n.node(i).maybeChild(a-1),o=n.node(i+1)),s&&!s.isTextblock&&bie(s,o)&&n.node(i).canReplace(a,a+1))return e;if(i==0)break;e=r<0?n.before(i):n.after(i)}}function pbe(t,e,r){let n=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-r),o=s.node().type;if(i&&o.inlineContent){let d=o.whitespace=="pre",h=!!o.contentMatch.matchType(i);d&&!h?n=!1:!d&&h&&(n=!0)}let a=t.steps.length;if(n===!1){let d=t.doc.resolve(e+r);vie(t,d.node(),d.before(),a)}o.inlineContent&&kA(t,e+r-1,o,s.node().contentMatchAt(s.index()),n==null);let l=t.mapping.slice(a),u=l.map(e-r);if(t.step(new Wr(u,l.map(e+r,-1),xe.empty,!0)),n===!0){let d=t.doc.resolve(u);yie(t,d.node(),d.before(),t.steps.length)}return t}function mbe(t,e,r){let n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),r))return e;if(n.parentOffset==0)for(let i=n.depth-1;i>=0;i--){let s=n.index(i);if(n.node(i).canReplaceWith(s,s,r))return n.before(i+1);if(s>0)return null}if(n.parentOffset==n.parent.content.size)for(let i=n.depth-1;i>=0;i--){let s=n.indexAfter(i);if(n.node(i).canReplaceWith(s,s,r))return n.after(i+1);if(s<n.node(i).childCount)return null}return null}function xie(t,e,r){let n=t.resolve(e);if(!r.content.size)return e;let i=r.content;for(let s=0;s<r.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(r.openStart==0&&r.size?2:1);s++)for(let o=n.depth;o>=0;o--){let a=o==n.depth?0:n.pos<=(n.start(o+1)+n.end(o+1))/2?-1:1,l=n.index(o)+(a>0?1:0),u=n.node(o),d=!1;if(s==1)d=u.canReplace(l,l,i);else{let h=u.contentMatchAt(l).findWrapping(i.firstChild.type);d=h&&u.canReplaceWith(l,l,h[0])}if(d)return a==0?n.pos:a<0?n.before(o+1):n.after(o+1)}return null}function Eb(t,e,r=e,n=xe.empty){if(e==r&&!n.size)return null;let i=t.resolve(e),s=t.resolve(r);return wie(i,s,n)?new Wr(e,r,n):new gbe(i,s,n).fit()}function wie(t,e,r){return!r.openStart&&!r.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),r.content)}class gbe{constructor(e,r,n){this.$from=e,this.$to=r,this.unplaced=n,this.frontier=[],this.placed=te.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=te.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(e<0?this.$to:n.doc.resolve(e));if(!i)return null;let s=this.placed,o=n.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new xe(s,o,a);return e>-1?new Hr(n.pos,e,this.$to.pos,this.$to.end(),l,r):l.size||n.pos!=this.$to.pos?new Wr(n.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let r=this.unplaced.content,n=0,i=this.unplaced.openEnd;n<e;n++){let s=r.firstChild;if(r.childCount>1&&(i=0),s.type.spec.isolating&&i<=n){e=n;break}r=s.content}for(let r=1;r<=2;r++)for(let n=r==1?e:this.unplaced.openStart;n>=0;n--){let i,s=null;n?(s=Ex(this.unplaced.content,n-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:u}=this.frontier[a],d,h=null;if(r==1&&(o?u.matchType(o.type)||(h=u.fillBefore(te.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:n,frontierDepth:a,parent:s,inject:h};if(r==2&&o&&(d=u.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:a,parent:s,wrap:d};if(s&&u.matchType(s.type))break}}}openMore(){let{content:e,openStart:r,openEnd:n}=this.unplaced,i=Ex(e,r);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new xe(e,r+1,Math.max(n,i.size+r>=e.size-n?r+1:0)),!0)}dropNode(){let{content:e,openStart:r,openEnd:n}=this.unplaced,i=Ex(e,r);if(i.childCount<=1&&r>0){let s=e.size-r<=r+i.size;this.unplaced=new xe(Bf(e,r-1,1),r-1,s?r-1:n)}else this.unplaced=new xe(Bf(e,r,1),r,n)}placeNodes({sliceDepth:e,frontierDepth:r,parent:n,inject:i,wrap:s}){for(;this.depth>r;)this.closeFrontierNode();if(s)for(let g=0;g<s.length;g++)this.openFrontierNode(s[g]);let o=this.unplaced,a=n?n.content:o.content,l=o.openStart-e,u=0,d=[],{match:h,type:f}=this.frontier[r];if(i){for(let g=0;g<i.childCount;g++)d.push(i.child(g));h=h.matchFragment(i)}let p=a.size+e-(o.content.size-o.openEnd);for(;u<a.childCount;){let g=a.child(u),y=h.matchType(g.type);if(!y)break;u++,(u>1||l==0||g.content.size)&&(h=y,d.push(Sie(g.mark(f.allowedMarks(g.marks)),u==1?l:0,u==a.childCount?p:-1)))}let m=u==a.childCount;m||(p=-1),this.placed=zf(this.placed,r,te.from(d)),this.frontier[r].match=h,m&&p<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,y=a;g<p;g++){let v=y.lastChild;this.frontier.push({type:v.type,match:v.contentMatchAt(v.childCount)}),y=v.content}this.unplaced=m?e==0?xe.empty:new xe(Bf(o.content,e-1,1),e-1,p<0?o.openEnd:e-1):new xe(Bf(o.content,e,u),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],r;if(!e.type.isTextblock||!_x(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(r=this.findCloseLevel(this.$to))&&r.depth==this.depth)return-1;let{depth:n}=this.$to,i=this.$to.after(n);for(;n>1&&i==this.$to.end(--n);)++i;return i}findCloseLevel(e){e:for(let r=Math.min(this.depth,e.depth);r>=0;r--){let{match:n,type:i}=this.frontier[r],s=r<e.depth&&e.end(r+1)==e.pos+(e.depth-(r+1)),o=_x(e,r,i,n,s);if(o){for(let a=r-1;a>=0;a--){let{match:l,type:u}=this.frontier[a],d=_x(e,a,u,l,!0);if(!d||d.childCount)continue e}return{depth:r,fit:o,move:s?e.doc.resolve(e.after(r+1)):e}}}}close(e){let r=this.findCloseLevel(e);if(!r)return null;for(;this.depth>r.depth;)this.closeFrontierNode();r.fit.childCount&&(this.placed=zf(this.placed,r.depth,r.fit)),e=r.move;for(let n=r.depth+1;n<=e.depth;n++){let i=e.node(n),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(n));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,r=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=zf(this.placed,this.depth,te.from(e.create(r,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let r=this.frontier.pop().match.fillBefore(te.empty,!0);r.childCount&&(this.placed=zf(this.placed,this.frontier.length,r))}}function Bf(t,e,r){return e==0?t.cutByIndex(r,t.childCount):t.replaceChild(0,t.firstChild.copy(Bf(t.firstChild.content,e-1,r)))}function zf(t,e,r){return e==0?t.append(r):t.replaceChild(t.childCount-1,t.lastChild.copy(zf(t.lastChild.content,e-1,r)))}function Ex(t,e){for(let r=0;r<e;r++)t=t.firstChild.content;return t}function Sie(t,e,r){if(e<=0)return t;let n=t.content;return e>1&&(n=n.replaceChild(0,Sie(n.firstChild,e-1,n.childCount==1?r-1:0))),e>0&&(n=t.type.contentMatch.fillBefore(n).append(n),r<=0&&(n=n.append(t.type.contentMatch.matchFragment(n).fillBefore(te.empty,!0)))),t.copy(n)}function _x(t,e,r,n,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!r.compatibleContent(s.type))return null;let a=n.fillBefore(s.content,!0,o);return a&&!ybe(r,s.content,o)?a:null}function ybe(t,e,r){for(let n=r;n<e.childCount;n++)if(!t.allowsMarks(e.child(n).marks))return!0;return!1}function vbe(t){return t.spec.defining||t.spec.definingForContent}function bbe(t,e,r,n){if(!n.size)return t.deleteRange(e,r);let i=t.doc.resolve(e),s=t.doc.resolve(r);if(wie(i,s,n))return t.step(new Wr(e,r,n));let o=_ie(i,s);o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let f=i.depth,p=i.pos-1;f>0;f--,p--){let m=i.node(f).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;o.indexOf(f)>-1?a=f:i.before(f)==p&&o.splice(1,0,-f)}let l=o.indexOf(a),u=[],d=n.openStart;for(let f=n.content,p=0;;p++){let m=f.firstChild;if(u.push(m),p==n.openStart)break;f=m.content}for(let f=d-1;f>=0;f--){let p=u[f],m=vbe(p.type);if(m&&!p.sameMarkup(i.node(Math.abs(a)-1)))d=f;else if(m||!p.type.isTextblock)break}for(let f=n.openStart;f>=0;f--){let p=(f+d+1)%(n.openStart+1),m=u[p];if(m)for(let g=0;g<o.length;g++){let y=o[(g+l)%o.length],v=!0;y<0&&(v=!1,y=-y);let b=i.node(y-1),w=i.index(y-1);if(b.canReplaceWith(w,w,m.type,m.marks))return t.replace(i.before(y),v?s.after(y):r,new xe(Eie(n.content,0,n.openStart,p),p,n.openEnd))}}let h=t.steps.length;for(let f=o.length-1;f>=0&&(t.replace(e,r,n),!(t.steps.length>h));f--){let p=o[f];p<0||(e=i.before(p),r=s.after(p))}}function Eie(t,e,r,n,i){if(e<r){let s=t.firstChild;t=t.replaceChild(0,s.copy(Eie(s.content,e+1,r,n,s)))}if(e>n){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(te.empty,!0))}return t}function xbe(t,e,r,n){if(!n.isInline&&e==r&&t.doc.resolve(e).parent.content.size){let i=mbe(t.doc,e,n.type);i!=null&&(e=r=i)}t.replaceRange(e,r,new xe(te.from(n),0,0))}function wbe(t,e,r){let n=t.doc.resolve(e),i=t.doc.resolve(r),s=_ie(n,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||n.node(a).type.contentMatch.validEnd)return t.delete(n.start(a),i.end(a));if(a>0&&(l||n.node(a-1).canReplace(n.index(a-1),i.indexAfter(a-1))))return t.delete(n.before(a),i.after(a))}for(let o=1;o<=n.depth&&o<=i.depth;o++)if(e-n.start(o)==n.depth-o&&r>n.end(o)&&i.end(o)-r!=i.depth-o&&n.start(o-1)==i.start(o-1)&&n.node(o-1).canReplace(n.index(o-1),i.index(o-1)))return t.delete(n.before(o),r);t.delete(e,r)}function _ie(t,e){let r=[],n=Math.min(t.depth,e.depth);for(let i=n;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&r.push(i)}return r}class Cd extends Cn{constructor(e,r,n){super(),this.pos=e,this.attr=r,this.value=n}apply(e){let r=e.nodeAt(this.pos);if(!r)return xr.fail("No node at attribute step's position");let n=Object.create(null);for(let s in r.attrs)n[s]=r.attrs[s];n[this.attr]=this.value;let i=r.type.create(n,null,r.marks);return xr.fromReplace(e,this.pos,this.pos+1,new xe(te.from(i),0,r.isLeaf?0:1))}getMap(){return xi.empty}invert(e){return new Cd(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Cd(r.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.pos!="number"||typeof r.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Cd(r.pos,r.attr,r.value)}}Cn.jsonID("attr",Cd);class Gp extends Cn{constructor(e,r){super(),this.attr=e,this.value=r}apply(e){let r=Object.create(null);for(let i in e.attrs)r[i]=e.attrs[i];r[this.attr]=this.value;let n=e.type.create(r,e.content,e.marks);return xr.ok(n)}getMap(){return xi.empty}invert(e){return new Gp(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Gp(r.attr,r.value)}}Cn.jsonID("docAttr",Gp);let sh=class extends Error{};sh=function t(e){let r=Error.call(this,e);return r.__proto__=t.prototype,r};sh.prototype=Object.create(Error.prototype);sh.prototype.constructor=sh;sh.prototype.name="TransformError";class Nie{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Kp}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let r=this.maybeStep(e);if(r.failed)throw new sh(r.failed);return this}maybeStep(e){let r=e.apply(this.doc);return r.failed||this.addStep(e,r.doc),r}get docChanged(){return this.steps.length>0}addStep(e,r){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=r}replace(e,r=e,n=xe.empty){let i=Eb(this.doc,e,r,n);return i&&this.step(i),this}replaceWith(e,r,n){return this.replace(e,r,new xe(te.from(n),0,0))}delete(e,r){return this.replace(e,r,xe.empty)}insert(e,r){return this.replaceWith(e,e,r)}replaceRange(e,r,n){return bbe(this,e,r,n),this}replaceRangeWith(e,r,n){return xbe(this,e,r,n),this}deleteRange(e,r){return wbe(this,e,r),this}lift(e,r){return sbe(this,e,r),this}join(e,r=1){return pbe(this,e,r),this}wrap(e,r){return lbe(this,e,r),this}setBlockType(e,r=e,n,i=null){return cbe(this,e,r,n,i),this}setNodeMarkup(e,r,n=null,i){return dbe(this,e,r,n,i),this}setNodeAttribute(e,r,n){return this.step(new Cd(e,r,n)),this}setDocAttribute(e,r){return this.step(new Gp(e,r)),this}addNodeMark(e,r){return this.step(new Va(e,r)),this}removeNodeMark(e,r){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(r instanceof Pt)r.isInSet(n.marks)&&this.step(new Kc(e,r));else{let i=n.marks,s,o=[];for(;s=r.isInSet(i);)o.push(new Kc(e,s)),i=s.removeFromSet(i);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,r=1,n){return hbe(this,e,r,n),this}addMark(e,r,n){return rbe(this,e,r,n),this}removeMark(e,r,n){return nbe(this,e,r,n),this}clearIncompatible(e,r,n){return kA(this,e,r,n),this}}const Nx=Object.create(null);class Xe{constructor(e,r,n){this.$anchor=e,this.$head=r,this.ranges=n||[new Sbe(e.min(r),e.max(r))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let r=0;r<e.length;r++)if(e[r].$from.pos!=e[r].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,r=xe.empty){let n=r.content.lastChild,i=null;for(let a=0;a<r.openEnd;a++)i=n,n=n.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:u}=o[a],d=e.mapping.slice(s);e.replaceRange(d.map(l.pos),d.map(u.pos),a?xe.empty:r),a==0&&k3(e,s,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,r){let n=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(n),u=l.map(o.pos),d=l.map(a.pos);s?e.deleteRange(u,d):(e.replaceRangeWith(u,d,r),k3(e,n,r.isInline?-1:1))}}static findFrom(e,r,n=!1){let i=e.parent.inlineContent?new Be(e):Ku(e.node(0),e.parent,e.pos,e.index(),r,n);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=r<0?Ku(e.node(0),e.node(s),e.before(s+1),e.index(s),r,n):Ku(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,r,n);if(o)return o}return null}static near(e,r=1){return this.findFrom(e,r)||this.findFrom(e,-r)||new Ei(e.node(0))}static atStart(e){return Ku(e,e,0,0,1)||new Ei(e)}static atEnd(e){return Ku(e,e,e.content.size,e.childCount,-1)||new Ei(e)}static fromJSON(e,r){if(!r||!r.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=Nx[r.type];if(!n)throw new RangeError(`No selection type ${r.type} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in Nx)throw new RangeError("Duplicate use of selection JSON ID "+e);return Nx[e]=r,r.prototype.jsonID=e,r}getBookmark(){return Be.between(this.$anchor,this.$head).getBookmark()}}Xe.prototype.visible=!0;class Sbe{constructor(e,r){this.$from=e,this.$to=r}}let N3=!1;function C3(t){!N3&&!t.parent.inlineContent&&(N3=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Be extends Xe{constructor(e,r=e){C3(e),C3(r),super(e,r)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,r){let n=e.resolve(r.map(this.head));if(!n.parent.inlineContent)return Xe.near(n);let i=e.resolve(r.map(this.anchor));return new Be(i.parent.inlineContent?i:n,n)}replace(e,r=xe.empty){if(super.replace(e,r),r==xe.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof Be&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new _b(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,r){if(typeof r.anchor!="number"||typeof r.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Be(e.resolve(r.anchor),e.resolve(r.head))}static create(e,r,n=r){let i=e.resolve(r);return new this(i,n==r?i:e.resolve(n))}static between(e,r,n){let i=e.pos-r.pos;if((!n||i)&&(n=i>=0?1:-1),!r.parent.inlineContent){let s=Xe.findFrom(r,n,!0)||Xe.findFrom(r,-n,!0);if(s)r=s.$head;else return Xe.near(r,n)}return e.parent.inlineContent||(i==0?e=r:(e=(Xe.findFrom(e,-n,!0)||Xe.findFrom(e,n,!0)).$anchor,e.pos<r.pos!=i<0&&(e=r))),new Be(e,r)}}Xe.jsonID("text",Be);class _b{constructor(e,r){this.anchor=e,this.head=r}map(e){return new _b(e.map(this.anchor),e.map(this.head))}resolve(e){return Be.between(e.resolve(this.anchor),e.resolve(this.head))}}class Re extends Xe{constructor(e){let r=e.nodeAfter,n=e.node(0).resolve(e.pos+r.nodeSize);super(e,n),this.node=r}map(e,r){let{deleted:n,pos:i}=r.mapResult(this.anchor),s=e.resolve(i);return n?Xe.near(s):new Re(s)}content(){return new xe(te.from(this.node),0,0)}eq(e){return e instanceof Re&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new TA(this.anchor)}static fromJSON(e,r){if(typeof r.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Re(e.resolve(r.anchor))}static create(e,r){return new Re(e.resolve(r))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Re.prototype.visible=!1;Xe.jsonID("node",Re);class TA{constructor(e){this.anchor=e}map(e){let{deleted:r,pos:n}=e.mapResult(this.anchor);return r?new _b(n,n):new TA(n)}resolve(e){let r=e.resolve(this.anchor),n=r.nodeAfter;return n&&Re.isSelectable(n)?new Re(r):Xe.near(r)}}class Ei extends Xe{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,r=xe.empty){if(r==xe.empty){e.delete(0,e.doc.content.size);let n=Xe.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,r)}toJSON(){return{type:"all"}}static fromJSON(e){return new Ei(e)}map(e){return new Ei(e)}eq(e){return e instanceof Ei}getBookmark(){return Ebe}}Xe.jsonID("all",Ei);const Ebe={map(){return this},resolve(t){return new Ei(t)}};function Ku(t,e,r,n,i,s=!1){if(e.inlineContent)return Be.create(t,r);for(let o=n-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&Re.isSelectable(a))return Re.create(t,r-(i<0?a.nodeSize:0))}else{let l=Ku(t,a,r+i,i<0?a.childCount:0,i,s);if(l)return l}r+=a.nodeSize*i}return null}function k3(t,e,r){let n=t.steps.length-1;if(n<e)return;let i=t.steps[n];if(!(i instanceof Wr||i instanceof Hr))return;let s=t.mapping.maps[n],o;s.forEach((a,l,u,d)=>{o==null&&(o=d)}),t.setSelection(Xe.near(t.doc.resolve(o),r))}const j3=1,ry=2,T3=4;class _be extends Nie{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|j3)&~ry,this.storedMarks=null,this}get selectionSet(){return(this.updated&j3)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=ry,this}ensureMarks(e){return Pt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&ry)>0}addStep(e,r){super.addStep(e,r),this.updated=this.updated&~ry,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,r=!0){let n=this.selection;return r&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||Pt.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,r,n){let i=this.doc.type.schema;if(r==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(n==null&&(n=r),!e)return this.deleteRange(r,n);let s=this.storedMarks;if(!s){let o=this.doc.resolve(r);s=n==r?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(r,n,i.text(e,s)),!this.selection.empty&&this.selection.to==r+e.length&&this.setSelection(Xe.near(this.selection.$to)),this}}setMeta(e,r){return this.meta[typeof e=="string"?e:e.key]=r,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=T3,this}get scrolledIntoView(){return(this.updated&T3)>0}}function O3(t,e){return!e||!t?t:t.bind(e)}class Wf{constructor(e,r,n){this.name=e,this.init=O3(r.init,n),this.apply=O3(r.apply,n)}}const Nbe=[new Wf("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Wf("selection",{init(t,e){return t.selection||Xe.atStart(e.doc)},apply(t){return t.selection}}),new Wf("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,r,n){return n.selection.$cursor?t.storedMarks:null}}),new Wf("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Cx{constructor(e,r){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Nbe.slice(),r&&r.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new Wf(n.key,n.spec.state,n))})}}class ud{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,r=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=r){let i=this.config.plugins[n];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let r=[e],n=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,u=i?i[o].state:this,d=l<r.length&&a.spec.appendTransaction.call(a,l?r.slice(l):r,u,n);if(d&&n.filterTransaction(d,o)){if(d.setMeta("appendedTransaction",e),!i){i=[];for(let h=0;h<this.config.plugins.length;h++)i.push(h<o?{state:n,n:r.length}:{state:this,n:0})}r.push(d),n=n.applyInner(d),s=!0}i&&(i[o]={state:n,n:r.length})}}if(!s)return{state:n,transactions:r}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let r=new ud(this.config),n=this.config.fields;for(let i=0;i<n.length;i++){let s=n[i];r[s.name]=s.apply(e,this[s.name],this,r)}return r}get tr(){return new _be(this)}static create(e){let r=new Cx(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new ud(r);for(let i=0;i<r.fields.length;i++)n[r.fields[i].name]=r.fields[i].init(e,n);return n}reconfigure(e){let r=new Cx(this.schema,e.plugins),n=r.fields,i=new ud(r);for(let s=0;s<n.length;s++){let o=n[s].name;i[o]=this.hasOwnProperty(o)?this[o]:n[s].init(e,i)}return i}toJSON(e){let r={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(r.storedMarks=this.storedMarks.map(n=>n.toJSON())),e&&typeof e=="object")for(let n in e){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[n],s=i.spec.state;s&&s.toJSON&&(r[n]=s.toJSON.call(i,this[i.key]))}return r}static fromJSON(e,r,n){if(!r)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Cx(e.schema,e.plugins),s=new ud(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=nl.fromJSON(e.schema,r.doc);else if(o.name=="selection")s.selection=Xe.fromJSON(s.doc,r.selection);else if(o.name=="storedMarks")r.storedMarks&&(s.storedMarks=r.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let a in n){let l=n[a],u=l.spec.state;if(l.key==o.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(r,a)){s[o.name]=u.fromJSON.call(l,e,r[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function Cie(t,e,r){for(let n in t){let i=t[n];i instanceof Function?i=i.bind(e):n=="handleDOMEvents"&&(i=Cie(i,e,{})),r[n]=i}return r}class Xt{constructor(e){this.spec=e,this.props={},e.props&&Cie(e.props,this,this.props),this.key=e.key?e.key.key:kie("plugin")}getState(e){return e[this.key]}}const kx=Object.create(null);function kie(t){return t in kx?t+"$"+ ++kx[t]:(kx[t]=0,t+"$")}class Fr{constructor(e="key"){this.key=kie(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const OA=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function jie(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("backward",t):r.parentOffset>0)?null:r}const Tie=(t,e,r)=>{let n=jie(t,r);if(!n)return!1;let i=PA(n);if(!i){let o=n.blockRange(),a=o&&Rh(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(Fie(t,i,e,-1))return!0;if(n.parent.content.size==0&&(oh(s,"end")||Re.isSelectable(s)))for(let o=n.depth;;o--){let a=Eb(t.doc,n.before(o),n.after(o),xe.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(oh(s,"end")?Xe.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):Re.create(l.doc,i.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||n.node(o-1).childCount>1)break}return s.isAtom&&i.depth==n.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},Cbe=(t,e,r)=>{let n=jie(t,r);if(!n)return!1;let i=PA(n);return i?Oie(t,i,e):!1},kbe=(t,e,r)=>{let n=Iie(t,r);if(!n)return!1;let i=IA(n);return i?Oie(t,i,e):!1};function Oie(t,e,r){let n=e.nodeBefore,i=n,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let d=i.lastChild;if(!d)return!1;i=d}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let d=a.firstChild;if(!d)return!1;a=d}let u=Eb(t.doc,s,l,xe.empty);if(!u||u.from!=s||u instanceof Wr&&u.slice.size>=l-s)return!1;if(r){let d=t.tr.step(u);d.setSelection(Be.create(d.doc,s)),r(d.scrollIntoView())}return!0}function oh(t,e,r=!1){for(let n=t;n;n=e=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(r&&n.childCount!=1)return!1}return!1}const Pie=(t,e,r)=>{let{$head:n,empty:i}=t.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("backward",t):n.parentOffset>0)return!1;s=PA(n)}let o=s&&s.nodeBefore;return!o||!Re.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Re.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function PA(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Iie(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)?null:r}const Rie=(t,e,r)=>{let n=Iie(t,r);if(!n)return!1;let i=IA(n);if(!i)return!1;let s=i.nodeAfter;if(Fie(t,i,e,1))return!0;if(n.parent.content.size==0&&(oh(s,"start")||Re.isSelectable(s))){let o=Eb(t.doc,n.before(),n.after(),xe.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(oh(s,"start")?Xe.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):Re.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==n.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},Mie=(t,e,r)=>{let{$head:n,empty:i}=t.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)return!1;s=IA(n)}let o=s&&s.nodeAfter;return!o||!Re.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Re.create(t.doc,s.pos)).scrollIntoView()),!0)};function IA(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let r=t.node(e);if(t.index(e)+1<r.childCount)return t.doc.resolve(t.after(e+1));if(r.type.spec.isolating)break}return null}const jbe=(t,e)=>{let r=t.selection,n=r instanceof Re,i;if(n){if(r.node.isTextblock||!kl(t.doc,r.from))return!1;i=r.from}else if(i=Sb(t.doc,r.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);n&&s.setSelection(Re.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},Tbe=(t,e)=>{let r=t.selection,n;if(r instanceof Re){if(r.node.isTextblock||!kl(t.doc,r.to))return!1;n=r.to}else if(n=Sb(t.doc,r.to,1),n==null)return!1;return e&&e(t.tr.join(n).scrollIntoView()),!0},Obe=(t,e)=>{let{$from:r,$to:n}=t.selection,i=r.blockRange(n),s=i&&Rh(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},Aie=(t,e)=>{let{$head:r,$anchor:n}=t.selection;return!r.parent.type.spec.code||!r.sameParent(n)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function RA(t){for(let e=0;e<t.edgeCount;e++){let{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}const Pbe=(t,e)=>{let{$head:r,$anchor:n}=t.selection;if(!r.parent.type.spec.code||!r.sameParent(n))return!1;let i=r.node(-1),s=r.indexAfter(-1),o=RA(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=r.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(Xe.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},Die=(t,e)=>{let r=t.selection,{$from:n,$to:i}=r;if(r instanceof Ei||n.parent.inlineContent||i.parent.inlineContent)return!1;let s=RA(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!n.parentOffset&&i.index()<i.parent.childCount?n:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(Be.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},$ie=(t,e)=>{let{$cursor:r}=t.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let s=r.before();if(Ro(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let n=r.blockRange(),i=n&&Rh(n);return i==null?!1:(e&&e(t.tr.lift(n,i).scrollIntoView()),!0)};function Ibe(t){return(e,r)=>{let{$from:n,$to:i}=e.selection;if(e.selection instanceof Re&&e.selection.node.isBlock)return!n.parentOffset||!Ro(e.doc,n.pos)?!1:(r&&r(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let s=[],o,a,l=!1,u=!1;for(let p=n.depth;;p--)if(n.node(p).isBlock){l=n.end(p)==n.pos+(n.depth-p),u=n.start(p)==n.pos-(n.depth-p),a=RA(n.node(p-1).contentMatchAt(n.indexAfter(p-1))),s.unshift(l&&a?{type:a}:null),o=p;break}else{if(p==1)return!1;s.unshift(null)}let d=e.tr;(e.selection instanceof Be||e.selection instanceof Ei)&&d.deleteSelection();let h=d.mapping.map(n.pos),f=Ro(d.doc,h,s.length,s);if(f||(s[0]=a?{type:a}:null,f=Ro(d.doc,h,s.length,s)),!f)return!1;if(d.split(h,s.length,s),!l&&u&&n.node(o).type!=a){let p=d.mapping.map(n.before(o)),m=d.doc.resolve(p);a&&n.node(o-1).canReplaceWith(m.index(),m.index()+1,a)&&d.setNodeMarkup(d.mapping.map(n.before(o)),a)}return r&&r(d.scrollIntoView()),!0}}const Rbe=Ibe(),Mbe=(t,e)=>{let{$from:r,to:n}=t.selection,i,s=r.sharedDepth(n);return s==0?!1:(i=r.before(s),e&&e(t.tr.setSelection(Re.create(t.doc,i))),!0)};function Abe(t,e,r){let n=e.nodeBefore,i=e.nodeAfter,s=e.index();return!n||!i||!n.type.compatibleContent(i.type)?!1:!n.content.size&&e.parent.canReplace(s-1,s)?(r&&r(t.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||kl(t.doc,e.pos))?!1:(r&&r(t.tr.join(e.pos).scrollIntoView()),!0)}function Fie(t,e,r,n){let i=e.nodeBefore,s=e.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&Abe(t,e,r))return!0;let u=!l&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(r){let p=e.pos+s.nodeSize,m=te.empty;for(let v=o.length-1;v>=0;v--)m=te.from(o[v].create(null,m));m=te.from(i.copy(m));let g=t.tr.step(new Hr(e.pos-1,p,e.pos,p,new xe(m,1,0),o.length,!0)),y=g.doc.resolve(p+2*o.length);y.nodeAfter&&y.nodeAfter.type==i.type&&kl(g.doc,y.pos)&&g.join(y.pos),r(g.scrollIntoView())}return!0}let d=s.type.spec.isolating||n>0&&l?null:Xe.findFrom(e,1),h=d&&d.$from.blockRange(d.$to),f=h&&Rh(h);if(f!=null&&f>=e.depth)return r&&r(t.tr.lift(h,f).scrollIntoView()),!0;if(u&&oh(s,"start",!0)&&oh(i,"end")){let p=i,m=[];for(;m.push(p),!p.isTextblock;)p=p.lastChild;let g=s,y=1;for(;!g.isTextblock;g=g.firstChild)y++;if(p.canReplace(p.childCount,p.childCount,g.content)){if(r){let v=te.empty;for(let w=m.length-1;w>=0;w--)v=te.from(m[w].copy(v));let b=t.tr.step(new Hr(e.pos-m.length,e.pos+s.nodeSize,e.pos+y,e.pos+s.nodeSize-y,new xe(v,m.length,0),0,!0));r(b.scrollIntoView())}return!0}}return!1}function qie(t){return function(e,r){let n=e.selection,i=t<0?n.$from:n.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(r&&r(e.tr.setSelection(Be.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const Dbe=qie(-1),$be=qie(1);function Fbe(t,e=null){return function(r,n){let{$from:i,$to:s}=r.selection,o=i.blockRange(s),a=o&&jA(o,t,e);return a?(n&&n(r.tr.wrap(o,a).scrollIntoView()),!0):!1}}function P3(t,e=null){return function(r,n){let i=!1;for(let s=0;s<r.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=r.selection.ranges[s];r.doc.nodesBetween(o,a,(l,u)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let d=r.doc.resolve(u),h=d.index();i=d.parent.canReplaceWith(h,h+1,t)}})}if(!i)return!1;if(n){let s=r.tr;for(let o=0;o<r.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=r.selection.ranges[o];s.setBlockType(a,l,t,e)}n(s.scrollIntoView())}return!0}}function MA(...t){return function(e,r,n){for(let i=0;i<t.length;i++)if(t[i](e,r,n))return!0;return!1}}MA(OA,Tie,Pie);MA(OA,Rie,Mie);MA(Aie,Die,$ie,Rbe);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function qbe(t,e=null){return function(r,n){let{$from:i,$to:s}=r.selection,o=i.blockRange(s);if(!o)return!1;let a=n?r.tr:null;return Lbe(a,o,t,e)?(n&&n(a.scrollIntoView()),!0):!1}}function Lbe(t,e,r,n=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(r)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);s=new Fv(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new Fv(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=jA(s,r,n,e);return a?(t&&Bbe(t,e,a,i,r),!0):!1}function Bbe(t,e,r,n,i){let s=te.empty;for(let d=r.length-1;d>=0;d--)s=te.from(r[d].type.create(r[d].attrs,s));t.step(new Hr(e.start-(n?2:0),e.end,e.start,e.end,new xe(s,0,0),r.length,!0));let o=0;for(let d=0;d<r.length;d++)r[d].type==i&&(o=d+1);let a=r.length-o,l=e.start+r.length-(n?2:0),u=e.parent;for(let d=e.startIndex,h=e.endIndex,f=!0;d<h;d++,f=!1)!f&&Ro(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=u.child(d).nodeSize;return t}function zbe(t){return function(e,r){let{$from:n,$to:i}=e.selection,s=n.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?r?n.node(s.depth-1).type==t?Wbe(e,r,t,s):Vbe(e,r,s):!0:!1}}function Wbe(t,e,r,n){let i=t.tr,s=n.end,o=n.$to.end(n.depth);s<o&&(i.step(new Hr(s-1,o,s,o,new xe(te.from(r.create(null,n.parent.copy())),1,0),1,!0)),n=new Fv(i.doc.resolve(n.$from.pos),i.doc.resolve(o),n.depth));const a=Rh(n);if(a==null)return!1;i.lift(n,a);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return kl(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function Vbe(t,e,r){let n=t.tr,i=r.parent;for(let p=r.end,m=r.endIndex-1,g=r.startIndex;m>g;m--)p-=i.child(m).nodeSize,n.delete(p-1,p+1);let s=n.doc.resolve(r.start),o=s.nodeAfter;if(n.mapping.map(r.end)!=r.start+s.nodeAfter.nodeSize)return!1;let a=r.startIndex==0,l=r.endIndex==i.childCount,u=s.node(-1),d=s.index(-1);if(!u.canReplace(d+(a?0:1),d+1,o.content.append(l?te.empty:te.from(i))))return!1;let h=s.pos,f=h+o.nodeSize;return n.step(new Hr(h-(a?1:0),f+(l?1:0),h+1,f-1,new xe((a?te.empty:te.from(i.copy(te.empty))).append(l?te.empty:te.from(i.copy(te.empty))),a?0:1,l?0:1),a?0:1)),e(n.scrollIntoView()),!0}function Ube(t){return function(e,r){let{$from:n,$to:i}=e.selection,s=n.blockRange(i,u=>u.childCount>0&&u.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(r){let u=l.lastChild&&l.lastChild.type==a.type,d=te.from(u?t.create():null),h=new xe(te.from(t.create(null,te.from(a.type.create(null,d)))),u?3:1,0),f=s.start,p=s.end;r(e.tr.step(new Hr(f-(u?3:1),p,f,p,h,1,!0)).scrollIntoView())}return!0}}const ln=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},ah=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let aR=null;const xo=function(t,e,r){let n=aR||(aR=document.createRange());return n.setEnd(t,r??t.nodeValue.length),n.setStart(t,e||0),n},Hbe=function(){aR=null},Gc=function(t,e,r,n){return r&&(I3(t,e,r,n,-1)||I3(t,e,r,n,1))},Kbe=/^(img|br|input|textarea|hr)$/i;function I3(t,e,r,n,i){for(var s;;){if(t==r&&e==n)return!0;if(e==(i<0?0:zi(t))){let o=t.parentNode;if(!o||o.nodeType!=1||$m(t)||Kbe.test(t.nodeName)||t.contentEditable=="false")return!1;e=ln(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?zi(t):0}else return!1}}function zi(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Gbe(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=zi(t)}else if(t.parentNode&&!$m(t))e=ln(t),t=t.parentNode;else return null}}function Ybe(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!$m(t))e=ln(t)+1,t=t.parentNode;else return null}}function Qbe(t,e,r){for(let n=e==0,i=e==zi(t);n||i;){if(t==r)return!0;let s=ln(t);if(t=t.parentNode,!t)return!1;n=n&&s==0,i=i&&s==zi(t)}}function $m(t){let e;for(let r=t;r&&!(e=r.pmViewDesc);r=r.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Nb=function(t){return t.focusNode&&Gc(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Kl(t,e){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=t,r.key=r.code=e,r}function Xbe(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Jbe(t,e,r){if(t.caretPositionFromPoint)try{let n=t.caretPositionFromPoint(e,r);if(n)return{node:n.offsetNode,offset:Math.min(zi(n.offsetNode),n.offset)}}catch{}if(t.caretRangeFromPoint){let n=t.caretRangeFromPoint(e,r);if(n)return{node:n.startContainer,offset:Math.min(zi(n.startContainer),n.startOffset)}}}const Js=typeof navigator<"u"?navigator:null,R3=typeof document<"u"?document:null,jl=Js&&Js.userAgent||"",lR=/Edge\/(\d+)/.exec(jl),Lie=/MSIE \d/.exec(jl),cR=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(jl),ci=!!(Lie||cR||lR),sl=Lie?document.documentMode:cR?+cR[1]:lR?+lR[1]:0,Ki=!ci&&/gecko\/(\d+)/i.test(jl);Ki&&+(/Firefox\/(\d+)/.exec(jl)||[0,0])[1];const uR=!ci&&/Chrome\/(\d+)/.exec(jl),Vr=!!uR,Bie=uR?+uR[1]:0,Nn=!ci&&!!Js&&/Apple Computer/.test(Js.vendor),lh=Nn&&(/Mobile\/\w+/.test(jl)||!!Js&&Js.maxTouchPoints>2),$i=lh||(Js?/Mac/.test(Js.platform):!1),zie=Js?/Win/.test(Js.platform):!1,To=/Android \d/.test(jl),Fm=!!R3&&"webkitFontSmoothing"in R3.documentElement.style,Zbe=Fm?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function e1e(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function fo(t,e){return typeof t=="number"?t:t[e]}function t1e(t){let e=t.getBoundingClientRect(),r=e.width/t.offsetWidth||1,n=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*r,top:e.top,bottom:e.top+t.clientHeight*n}}function M3(t,e,r){let n=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=r||t.dom;o;){if(o.nodeType!=1){o=ah(o);continue}let a=o,l=a==s.body,u=l?e1e(s):t1e(a),d=0,h=0;if(e.top<u.top+fo(n,"top")?h=-(u.top-e.top+fo(i,"top")):e.bottom>u.bottom-fo(n,"bottom")&&(h=e.bottom-e.top>u.bottom-u.top?e.top+fo(i,"top")-u.top:e.bottom-u.bottom+fo(i,"bottom")),e.left<u.left+fo(n,"left")?d=-(u.left-e.left+fo(i,"left")):e.right>u.right-fo(n,"right")&&(d=e.right-u.right+fo(i,"right")),d||h)if(l)s.defaultView.scrollBy(d,h);else{let p=a.scrollLeft,m=a.scrollTop;h&&(a.scrollTop+=h),d&&(a.scrollLeft+=d);let g=a.scrollLeft-p,y=a.scrollTop-m;e={left:e.left-g,top:e.top-y,right:e.right-g,bottom:e.bottom-y}}let f=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(f))break;o=f=="absolute"?o.offsetParent:ah(o)}}function r1e(t){let e=t.dom.getBoundingClientRect(),r=Math.max(0,e.top),n,i;for(let s=(e.left+e.right)/2,o=r+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=r-20){n=a,i=l.top;break}}return{refDOM:n,refTop:i,stack:Wie(t.dom)}}function Wie(t){let e=[],r=t.ownerDocument;for(let n=t;n&&(e.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),t!=r);n=ah(n));return e}function n1e({refDOM:t,refTop:e,stack:r}){let n=t?t.getBoundingClientRect().top:0;Vie(r,n==0?0:n-e)}function Vie(t,e){for(let r=0;r<t.length;r++){let{dom:n,top:i,left:s}=t[r];n.scrollTop!=i+e&&(n.scrollTop=i+e),n.scrollLeft!=s&&(n.scrollLeft=s)}}let qu=null;function i1e(t){if(t.setActive)return t.setActive();if(qu)return t.focus(qu);let e=Wie(t);t.focus(qu==null?{get preventScroll(){return qu={preventScroll:!0},!0}}:void 0),qu||(qu=!1,Vie(e,0))}function Uie(t,e){let r,n=2e8,i,s=0,o=e.top,a=e.top,l,u;for(let d=t.firstChild,h=0;d;d=d.nextSibling,h++){let f;if(d.nodeType==1)f=d.getClientRects();else if(d.nodeType==3)f=xo(d).getClientRects();else continue;for(let p=0;p<f.length;p++){let m=f[p];if(m.top<=o&&m.bottom>=a){o=Math.max(m.bottom,o),a=Math.min(m.top,a);let g=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(g<n){r=d,n=g,i=g&&r.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,d.nodeType==1&&g&&(s=h+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!l&&m.left<=e.left&&m.right>=e.left&&(l=d,u={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!r&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(s=h+1)}}return!r&&l&&(r=l,i=u,n=0),r&&r.nodeType==3?s1e(r,i):!r||n&&r.nodeType==1?{node:t,offset:s}:Uie(r,i)}function s1e(t,e){let r=t.nodeValue.length,n=document.createRange(),i;for(let s=0;s<r;s++){n.setEnd(t,s+1),n.setStart(t,s);let o=ma(n,1);if(o.top!=o.bottom&&AA(e,o)){i={node:t,offset:s+(e.left>=(o.left+o.right)/2?1:0)};break}}return n.detach(),i||{node:t,offset:0}}function AA(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function o1e(t,e){let r=t.parentNode;return r&&/^li$/i.test(r.nodeName)&&e.left<t.getBoundingClientRect().left?r:t}function a1e(t,e,r){let{node:n,offset:i}=Uie(e,r),s=-1;if(n.nodeType==1&&!n.firstChild){let o=n.getBoundingClientRect();s=o.left!=o.right&&r.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(n,i,s)}function l1e(t,e,r,n){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>n.left||l.top>n.top?i=a.posBefore:(!o&&l.right<n.left||l.bottom<n.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?n.top<(l.top+l.bottom)/2:n.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,r,-1)}function Hie(t,e,r){let n=t.childNodes.length;if(n&&r.top<r.bottom)for(let i=Math.max(0,Math.min(n-1,Math.floor(n*(e.top-r.top)/(r.bottom-r.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let u=a[l];if(AA(e,u))return Hie(o,e,u)}}if((s=(s+1)%n)==i)break}return t}function c1e(t,e){let r=t.dom.ownerDocument,n,i=0,s=Jbe(r,e.left,e.top);s&&({node:n,offset:i}=s);let o=(t.root.elementFromPoint?t.root:r).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let u=t.dom.getBoundingClientRect();if(!AA(e,u)||(o=Hie(t.dom,e,u),!o))return null}if(Nn)for(let u=o;n&&u;u=ah(u))u.draggable&&(n=void 0);if(o=o1e(o,e),n){if(Ki&&n.nodeType==1&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){let d=n.childNodes[i],h;d.nodeName=="IMG"&&(h=d.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&i++}let u;Fm&&i&&n.nodeType==1&&(u=n.childNodes[i-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&i--,n==t.dom&&i==n.childNodes.length-1&&n.lastChild.nodeType==1&&e.top>n.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||n.nodeType!=1||n.childNodes[i-1].nodeName!="BR")&&(a=l1e(t,n,i,e))}a==null&&(a=a1e(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function A3(t){return t.top<t.bottom||t.left<t.right}function ma(t,e){let r=t.getClientRects();if(r.length){let n=r[e<0?0:r.length-1];if(A3(n))return n}return Array.prototype.find.call(r,A3)||t.getBoundingClientRect()}const u1e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Kie(t,e,r){let{node:n,offset:i,atom:s}=t.docView.domFromPos(e,r<0?-1:1),o=Fm||Ki;if(n.nodeType==3)if(o&&(u1e.test(n.nodeValue)||(r<0?!i:i==n.nodeValue.length))){let l=ma(xo(n,i,i),r);if(Ki&&i&&/\s/.test(n.nodeValue[i-1])&&i<n.nodeValue.length){let u=ma(xo(n,i-1,i-1),-1);if(u.top==l.top){let d=ma(xo(n,i,i+1),-1);if(d.top!=l.top)return kf(d,d.left<u.left)}}return l}else{let l=i,u=i,d=r<0?1:-1;return r<0&&!i?(u++,d=-1):r>=0&&i==n.nodeValue.length?(l--,d=1):r<0?l--:u++,kf(ma(xo(n,l,u),d),d<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(r<0||i==zi(n))){let l=n.childNodes[i-1];if(l.nodeType==1)return jx(l.getBoundingClientRect(),!1)}if(s==null&&i<zi(n)){let l=n.childNodes[i];if(l.nodeType==1)return jx(l.getBoundingClientRect(),!0)}return jx(n.getBoundingClientRect(),r>=0)}if(s==null&&i&&(r<0||i==zi(n))){let l=n.childNodes[i-1],u=l.nodeType==3?xo(l,zi(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(u)return kf(ma(u,1),!1)}if(s==null&&i<zi(n)){let l=n.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let u=l?l.nodeType==3?xo(l,0,o?0:1):l.nodeType==1?l:null:null;if(u)return kf(ma(u,-1),!0)}return kf(ma(n.nodeType==3?xo(n):n,-r),r>=0)}function kf(t,e){if(t.width==0)return t;let r=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:r,right:r}}function jx(t,e){if(t.height==0)return t;let r=e?t.top:t.bottom;return{top:r,bottom:r,left:t.left,right:t.right}}function Gie(t,e,r){let n=t.state,i=t.root.activeElement;n!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return r()}finally{n!=e&&t.updateState(n),i!=t.dom&&i&&i.focus()}}function d1e(t,e,r){let n=e.selection,i=r=="up"?n.$from:n.$to;return Gie(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,r=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=Kie(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=xo(a,0,a.nodeValue.length).getClientRects();else continue;for(let u=0;u<l.length;u++){let d=l[u];if(d.bottom>d.top+1&&(r=="up"?o.top-d.top>(d.bottom-o.top)*2:d.bottom-o.bottom>(o.bottom-d.top)*2))return!1}}return!0})}const h1e=/[\u0590-\u08ac]/;function f1e(t,e,r){let{$head:n}=e.selection;if(!n.parent.isTextblock)return!1;let i=n.parentOffset,s=!i,o=i==n.parent.content.size,a=t.domSelection();return a?!h1e.test(n.parent.textContent)||!a.modify?r=="left"||r=="backward"?s:o:Gie(t,e,()=>{let{focusNode:l,focusOffset:u,anchorNode:d,anchorOffset:h}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",r,"character");let p=n.depth?t.docView.domAfterPos(n.before()):t.dom,{focusNode:m,focusOffset:g}=t.domSelectionRange(),y=m&&!p.contains(m.nodeType==1?m:m.parentNode)||l==m&&u==g;try{a.collapse(d,h),l&&(l!=d||u!=h)&&a.extend&&a.extend(l,u)}catch{}return f!=null&&(a.caretBidiLevel=f),y}):n.pos==n.start()||n.pos==n.end()}let D3=null,$3=null,F3=!1;function p1e(t,e,r){return D3==e&&$3==r?F3:(D3=e,$3=r,F3=r=="up"||r=="down"?d1e(t,e,r):f1e(t,e,r))}const Gi=0,q3=1,tc=2,Zs=3;class qm{constructor(e,r,n,i){this.parent=e,this.children=r,this.dom=n,this.contentDOM=i,this.dirty=Gi,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,r,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let r=0;r<this.children.length;r++)e+=this.children[r].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let r=0,n=this.posAtStart;;r++){let i=this.children[r];if(i==e)return n;n+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,r,n){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(n<0){let s,o;if(e==this.contentDOM)s=e.childNodes[r-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[r];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=r>ln(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(r==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&r==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??n>0?this.posAtEnd:this.posAtStart}nearestDesc(e,r=!1){for(let n=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!r||s.node))if(n&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))n=!1;else return s}}getDesc(e){let r=e.pmViewDesc;for(let n=r;n;n=n.parent)if(n==this)return r}posFromDOM(e,r,n){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,r,n)}return-1}descAt(e){for(let r=0,n=0;r<this.children.length;r++){let i=this.children[r],s=n+i.size;if(n==e&&s!=n){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(e<s)return i.descAt(e-n-i.border);n=s}}domFromPos(e,r){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,i=0;for(let s=0;n<this.children.length;n++){let o=this.children[n],a=s+o.size;if(a>e||o instanceof Qie){i=e-s;break}s=a}if(i)return this.children[n].domFromPos(i-this.children[n].border,r);for(let s;n&&!(s=this.children[n-1]).size&&s instanceof Yie&&s.side>=0;n--);if(r<=0){let s,o=!0;for(;s=n?this.children[n-1]:null,!(!s||s.dom.parentNode==this.contentDOM);n--,o=!1);return s&&r&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,r):{node:this.contentDOM,offset:s?ln(s.dom)+1:0}}else{let s,o=!0;for(;s=n<this.children.length?this.children[n]:null,!(!s||s.dom.parentNode==this.contentDOM);n++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,r):{node:this.contentDOM,offset:s?ln(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,r,n=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:r,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=n,a=0;;a++){let l=this.children[a],u=o+l.size;if(i==-1&&e<=u){let d=o+l.border;if(e>=d&&r<=u-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,r,d);e=o;for(let h=a;h>0;h--){let f=this.children[h-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=ln(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(u>r||a==this.children.length-1)){r=u;for(let d=a+1;d<this.children.length;d++){let h=this.children[d];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){s=ln(h.dom);break}r+=h.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=u}return{node:this.contentDOM,from:e,to:r,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let r=this.children[e<0?0:this.children.length-1];return r.size==0||r.emptyChildAt(e)}domAfterPos(e){let{node:r,offset:n}=this.domFromPos(e,0);if(r.nodeType!=1||n==r.childNodes.length)throw new RangeError("No node after pos "+e);return r.childNodes[n]}setSelection(e,r,n,i=!1){let s=Math.min(e,r),o=Math.max(e,r);for(let p=0,m=0;p<this.children.length;p++){let g=this.children[p],y=m+g.size;if(s>m&&o<y)return g.setSelection(e-m-g.border,r-m-g.border,n,i);m=y}let a=this.domFromPos(e,e?-1:1),l=r==e?a:this.domFromPos(r,r?-1:1),u=n.root.getSelection(),d=n.domSelectionRange(),h=!1;if((Ki||Nn)&&e==r){let{node:p,offset:m}=a;if(p.nodeType==3){if(h=!!(m&&p.nodeValue[m-1]==`
`),h&&m==p.nodeValue.length)for(let g=p,y;g;g=g.parentNode){if(y=g.nextSibling){y.nodeName=="BR"&&(a=l={node:y.parentNode,offset:ln(y)+1});break}let v=g.pmViewDesc;if(v&&v.node&&v.node.isBlock)break}}else{let g=p.childNodes[m-1];h=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(Ki&&d.focusNode&&d.focusNode!=l.node&&d.focusNode.nodeType==1){let p=d.focusNode.childNodes[d.focusOffset];p&&p.contentEditable=="false"&&(i=!0)}if(!(i||h&&Nn)&&Gc(a.node,a.offset,d.anchorNode,d.anchorOffset)&&Gc(l.node,l.offset,d.focusNode,d.focusOffset))return;let f=!1;if((u.extend||e==r)&&!(h&&Ki)){u.collapse(a.node,a.offset);try{e!=r&&u.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>r){let m=a;a=l,l=m}let p=document.createRange();p.setEnd(l.node,l.offset),p.setStart(a.node,a.offset),u.removeAllRanges(),u.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,r){for(let n=0,i=0;i<this.children.length;i++){let s=this.children[i],o=n+s.size;if(n==o?e<=o&&r>=n:e<o&&r>n){let a=n+s.border,l=o-s.border;if(e>=a&&r<=l){this.dirty=e==n||r==o?tc:q3,e==a&&r==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Zs:s.markDirty(e-a,r-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?tc:Zs}n=o}this.dirty=tc}markParentsDirty(){let e=1;for(let r=this.parent;r;r=r.parent,e++){let n=e==1?tc:q3;r.dirty<n&&(r.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class Yie extends qm{constructor(e,r,n,i){let s,o=r.type.toDOM;if(typeof o=="function"&&(o=o(n,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!r.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=r,this.widget=r,s=this}matchesWidget(e){return this.dirty==Gi&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let r=this.widget.spec.stopEvent;return r?r(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class m1e extends qm{constructor(e,r,n,i){super(e,[],r,null),this.textDOM=n,this.text=i}get size(){return this.text.length}localPosFromDOM(e,r){return e!=this.textDOM?this.posAtStart+(r?this.size:0):this.posAtStart+r}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Yc extends qm{constructor(e,r,n,i,s){super(e,[],n,i),this.mark=r,this.spec=s}static create(e,r,n,i){let s=i.nodeViews[r.type.name],o=s&&s(r,i,n);return(!o||!o.dom)&&(o=cu.renderSpec(document,r.type.spec.toDOM(r,n),null,r.attrs)),new Yc(e,r,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Zs||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Zs&&this.mark.eq(e)}markDirty(e,r){if(super.markDirty(e,r),this.dirty!=Gi){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=Gi}}slice(e,r,n){let i=Yc.create(this.parent,this.mark,!0,n),s=this.children,o=this.size;r<o&&(s=hR(s,r,o,n)),e>0&&(s=hR(s,0,e,n));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ol extends qm{constructor(e,r,n,i,s,o,a,l,u){super(e,[],s,o),this.node=r,this.outerDeco=n,this.innerDeco=i,this.nodeDOM=a}static create(e,r,n,i,s,o){let a=s.nodeViews[r.type.name],l,u=a&&a(r,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},n,i),d=u&&u.dom,h=u&&u.contentDOM;if(r.isText){if(!d)d=document.createTextNode(r.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:h}=cu.renderSpec(document,r.type.spec.toDOM(r),null,r.attrs));!h&&!r.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),r.type.spec.draggable&&(d.draggable=!0));let f=d;return d=Zie(d,n,r),u?l=new g1e(e,r,n,i,d,h||null,f,u,s,o+1):r.isText?new Cb(e,r,n,i,d,f,s):new ol(e,r,n,i,d,h||null,f,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let r=this.children.length-1;r>=0;r--){let n=this.children[r];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>te.empty)}return e}matchesNode(e,r,n){return this.dirty==Gi&&e.eq(this.node)&&Lv(r,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,r){let n=this.node.inlineContent,i=r,s=e.composing?this.localCompositionInfo(e,r):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new v1e(this,o&&o.node,e);w1e(this.node,this.innerDeco,(u,d,h)=>{u.spec.marks?l.syncToMarks(u.spec.marks,n,e):u.type.side>=0&&!h&&l.syncToMarks(d==this.node.childCount?Pt.none:this.node.child(d).marks,n,e),l.placeWidget(u,e,i)},(u,d,h,f)=>{l.syncToMarks(u.marks,n,e);let p;l.findNodeMatch(u,d,h,f)||a&&e.state.selection.from>i&&e.state.selection.to<i+u.nodeSize&&(p=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(u,d,h,p,e)||l.updateNextNode(u,d,h,e,f,i)||l.addNode(u,d,h,e,i),i+=u.nodeSize}),l.syncToMarks([],n,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==tc)&&(o&&this.protectLocalComposition(e,o),Xie(this.contentDOM,this.children,e),lh&&S1e(this.dom))}localCompositionInfo(e,r){let{from:n,to:i}=e.state.selection;if(!(e.state.selection instanceof Be)||n<r||i>r+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=E1e(this.node.content,o,n-r,i-r);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:r,pos:n,text:i}){if(this.getDesc(r))return;let s=r;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new m1e(this,s,r,i);e.input.compositionNodes.push(o),this.children=hR(this.children,n,n+i.length,e,o)}update(e,r,n,i){return this.dirty==Zs||!e.sameMarkup(this.node)?!1:(this.updateInner(e,r,n,i),!0)}updateInner(e,r,n,i){this.updateOuterDeco(r),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Gi}updateOuterDeco(e){if(Lv(e,this.outerDeco))return;let r=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=Jie(this.dom,this.nodeDOM,dR(this.outerDeco,this.node,r),dR(e,this.node,r)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function L3(t,e,r,n,i){Zie(n,e,t);let s=new ol(void 0,t,e,r,n,n,n,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Cb extends ol{constructor(e,r,n,i,s,o,a){super(e,r,n,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,r,n,i){return this.dirty==Zs||this.dirty!=Gi&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(r),(this.dirty!=Gi||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Gi,!0)}inParent(){let e=this.parent.contentDOM;for(let r=this.nodeDOM;r;r=r.parentNode)if(r==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,r,n){return e==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):super.localPosFromDOM(e,r,n)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,r,n){let i=this.node.cut(e,r),s=document.createTextNode(i.text);return new Cb(this.parent,i,this.outerDeco,this.innerDeco,s,s,n)}markDirty(e,r){super.markDirty(e,r),this.dom!=this.nodeDOM&&(e==0||r==this.nodeDOM.nodeValue.length)&&(this.dirty=Zs)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Qie extends qm{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Gi&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class g1e extends ol{constructor(e,r,n,i,s,o,a,l,u,d){super(e,r,n,i,s,o,a,u,d),this.spec=l}update(e,r,n,i){if(this.dirty==Zs)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,r,n);return s&&this.updateInner(e,r,n,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,r,n,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,r,n,i){this.spec.setSelection?this.spec.setSelection(e,r,n.root):super.setSelection(e,r,n,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Xie(t,e,r){let n=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=n;)n=B3(n),i=!0;n=n.nextSibling}else i=!0,t.insertBefore(a,n);if(o instanceof Yc){let l=n?n.previousSibling:t.lastChild;Xie(o.contentDOM,o.children,r),n=l?l.nextSibling:t.firstChild}}for(;n;)n=B3(n),i=!0;i&&r.trackWrites==t&&(r.trackWrites=null)}const op=function(t){t&&(this.nodeName=t)};op.prototype=Object.create(null);const rc=[new op];function dR(t,e,r){if(t.length==0)return rc;let n=r?rc[0]:new op,i=[n];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(n=new op(o.nodeName));for(let a in o){let l=o[a];l!=null&&(r&&i.length==1&&i.push(n=new op(e.isInline?"span":"div")),a=="class"?n.class=(n.class?n.class+" ":"")+l:a=="style"?n.style=(n.style?n.style+";":"")+l:a!="nodeName"&&(n[a]=l))}}}return i}function Jie(t,e,r,n){if(r==rc&&n==rc)return e;let i=e;for(let s=0;s<n.length;s++){let o=n[s],a=r[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=rc[0]),i=l}y1e(i,a||rc[0],o)}return i}function y1e(t,e,r){for(let n in e)n!="class"&&n!="style"&&n!="nodeName"&&!(n in r)&&t.removeAttribute(n);for(let n in r)n!="class"&&n!="style"&&n!="nodeName"&&r[n]!=e[n]&&t.setAttribute(n,r[n]);if(e.class!=r.class){let n=e.class?e.class.split(" ").filter(Boolean):[],i=r.class?r.class.split(" ").filter(Boolean):[];for(let s=0;s<n.length;s++)i.indexOf(n[s])==-1&&t.classList.remove(n[s]);for(let s=0;s<i.length;s++)n.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=r.style){if(e.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=n.exec(e.style);)t.style.removeProperty(i[1])}r.style&&(t.style.cssText+=r.style)}}function Zie(t,e,r){return Jie(t,t,rc,dR(e,r,t.nodeType!=1))}function Lv(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].type.eq(e[r].type))return!1;return!0}function B3(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class v1e{constructor(e,r,n){this.lock=r,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=b1e(e.node.content,e)}destroyBetween(e,r){if(e!=r){for(let n=e;n<r;n++)this.top.children[n].destroy();this.top.children.splice(e,r-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,r,n){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Gi,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let u=this.top.children[l];if(u.matchesMark(e[s])&&!this.isLocked(u.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Yc.create(this.top,e[s],r,n);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,r,n,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,r,n))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let u=this.top.children[a];if(u.matchesNode(e,r,n)&&!this.preMatch.matched.has(u)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,r,n,i,s){let o=this.top.children[i];return o.dirty==Zs&&o.dom==o.contentDOM&&(o.dirty=tc),o.update(e,r,n,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let r=e.parentNode;if(!r)return-1;if(r==this.top.contentDOM){let n=e.pmViewDesc;if(n){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==n)return i}return-1}e=r}}updateNextNode(e,r,n,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof ol){let u=this.preMatch.matched.get(l);if(u!=null&&u!=s)return!1;let d=l.dom,h,f=this.isLocked(d)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Zs&&Lv(r,l.outerDeco));if(!f&&l.update(e,r,n,i))return this.destroyBetween(this.index,a),l.dom!=d&&(this.changed=!0),this.index++,!0;if(!f&&(h=this.recreateWrapper(l,e,r,n,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=h,h.contentDOM&&(h.dirty=tc,h.updateChildren(i,o+1),h.dirty=Gi),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,r,n,i,s,o){if(e.dirty||r.isAtom||!e.children.length||!e.node.content.eq(r.content)||!Lv(n,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=ol.create(this.top,r,n,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,r,n,i,s){let o=ol.create(this.top,e,r,n,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,r,n){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new Yie(this.top,e,r,n);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],r=this.top;for(;e instanceof Yc;)r=e,e=r.children[r.children.length-1];(!e||!(e instanceof Cb)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Nn||Vr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",r),this.addHackNode("BR",this.top))}addHackNode(e,r){if(r==this.top&&this.index<r.children.length&&r.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);e=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),e=="BR"&&(n.className="ProseMirror-trailingBreak");let i=new Qie(this.top,[],n,null);r!=this.top?r.children.push(i):r.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function b1e(t,e){let r=e,n=r.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(n){let u=r.children[n-1];if(u instanceof Yc)r=u,n=u.children.length;else{a=u,n--;break}}else{if(r==e)break e;n=r.parent.children.indexOf(r),r=r.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function x1e(t,e){return t.type.side-e.type.side}function w1e(t,e,r,n){let i=e.locals(t),s=0;if(i.length==0){for(let u=0;u<t.childCount;u++){let d=t.child(u);n(d,i,e.forChild(s,d),u),s+=d.nodeSize}return}let o=0,a=[],l=null;for(let u=0;;){let d,h;for(;o<i.length&&i[o].to==s;){let y=i[o++];y.widget&&(d?(h||(h=[d])).push(y):d=y)}if(d)if(h){h.sort(x1e);for(let y=0;y<h.length;y++)r(h[y],u,!!l)}else r(d,u,!!l);let f,p;if(l)p=-1,f=l,l=null;else if(u<t.childCount)p=u,f=t.child(u++);else break;for(let y=0;y<a.length;y++)a[y].to<=s&&a.splice(y--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let m=s+f.nodeSize;if(f.isText){let y=m;o<i.length&&i[o].from<y&&(y=i[o].from);for(let v=0;v<a.length;v++)a[v].to<y&&(y=a[v].to);y<m&&(l=f.cut(y-s),f=f.cut(0,y-s),m=y,p=-1)}else for(;o<i.length&&i[o].to<m;)o++;let g=f.isInline&&!f.isLeaf?a.filter(y=>!y.inline):a.slice();n(f,g,e.forChild(s,f),p),s=m}}function S1e(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function E1e(t,e,r,n){for(let i=0,s=0;i<t.childCount&&s<=n;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let u=t.child(i++);if(s+=u.nodeSize,!u.isText)break;l+=u.text}if(s>=r){if(s>=n&&l.slice(n-e.length-a,n-a)==e)return n-e.length;let u=a<n?l.lastIndexOf(e,n-a-1):-1;if(u>=0&&u+e.length+a>=r)return a+u;if(r==n&&l.length>=n+e.length-a&&l.slice(n-a,n-a+e.length)==e)return n}}return-1}function hR(t,e,r,n,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],u=a,d=a+=l.size;u>=r||d<=e?s.push(l):(u<e&&s.push(l.slice(0,e-u,n)),i&&(s.push(i),i=void 0),d>r&&s.push(l.slice(r-u,l.size,n)))}return s}function DA(t,e=null){let r=t.domSelectionRange(),n=t.state.doc;if(!r.focusNode)return null;let i=t.docView.nearestDesc(r.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(o<0)return null;let a=n.resolve(o),l,u;if(Nb(r)){for(l=o;i&&!i.node;)i=i.parent;let h=i.node;if(i&&h.isAtom&&Re.isSelectable(h)&&i.parent&&!(h.isInline&&Qbe(r.focusNode,r.focusOffset,i.dom))){let f=i.posBefore;u=new Re(o==f?a:n.resolve(f))}}else{if(r instanceof t.dom.ownerDocument.defaultView.Selection&&r.rangeCount>1){let h=o,f=o;for(let p=0;p<r.rangeCount;p++){let m=r.getRangeAt(p);h=Math.min(h,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(h<0)return null;[l,o]=f==t.state.selection.anchor?[f,h]:[h,f],a=n.resolve(o)}else l=t.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(l<0)return null}let d=n.resolve(l);if(!u){let h=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;u=$A(t,d,a,h)}return u}function ese(t){return t.editable?t.hasFocus():rse(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Mo(t,e=!1){let r=t.state.selection;if(tse(t,r),!!ese(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Vr){let n=t.domSelectionRange(),i=t.domObserver.currentSelection;if(n.anchorNode&&i.anchorNode&&Gc(n.anchorNode,n.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)N1e(t);else{let{anchor:n,head:i}=r,s,o;z3&&!(r instanceof Be)&&(r.$from.parent.inlineContent||(s=W3(t,r.from)),!r.empty&&!r.$from.parent.inlineContent&&(o=W3(t,r.to))),t.docView.setSelection(n,i,t,e),z3&&(s&&V3(s),o&&V3(o)),r.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&_1e(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const z3=Nn||Vr&&Bie<63;function W3(t,e){let{node:r,offset:n}=t.docView.domFromPos(e,0),i=n<r.childNodes.length?r.childNodes[n]:null,s=n?r.childNodes[n-1]:null;if(Nn&&i&&i.contentEditable=="false")return Tx(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return Tx(i);if(s)return Tx(s)}}function Tx(t){return t.contentEditable="true",Nn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function V3(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function _1e(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let r=t.domSelectionRange(),n=r.anchorNode,i=r.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(r.anchorNode!=n||r.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!ese(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function N1e(t){let e=t.domSelection();if(!e)return;let r=t.cursorWrapper.dom,n=r.nodeName=="IMG";n?e.collapse(r.parentNode,ln(r)+1):e.collapse(r,0),!n&&!t.state.selection.visible&&ci&&sl<=11&&(r.disabled=!0,r.disabled=!1)}function tse(t,e){if(e instanceof Re){let r=t.docView.descAt(e.from);r!=t.lastSelectedViewDesc&&(U3(t),r&&r.selectNode(),t.lastSelectedViewDesc=r)}else U3(t)}function U3(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function $A(t,e,r,n){return t.someProp("createSelectionBetween",i=>i(t,e,r))||Be.between(e,r,n)}function H3(t){return t.editable&&!t.hasFocus()?!1:rse(t)}function rse(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function C1e(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),r=t.domSelectionRange();return Gc(e.node,e.offset,r.anchorNode,r.anchorOffset)}function fR(t,e){let{$anchor:r,$head:n}=t.selection,i=e>0?r.max(n):r.min(n),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&Xe.findFrom(s,e)}function xa(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function K3(t,e,r){let n=t.state.selection;if(n instanceof Be)if(r.indexOf("s")>-1){let{$head:i}=n,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return xa(t,new Be(n.$anchor,o))}else if(n.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=fR(t.state,e);return i&&i instanceof Re?xa(t,i):!1}else if(!($i&&r.indexOf("m")>-1)){let i=n.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?Re.isSelectable(s)?xa(t,new Re(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):Fm?xa(t,new Be(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(n instanceof Re&&n.node.isInline)return xa(t,new Be(e>0?n.$to:n.$from));{let i=fR(t.state,e);return i?xa(t,i):!1}}}function Bv(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function ap(t,e){let r=t.pmViewDesc;return r&&r.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Lu(t,e){return e<0?k1e(t):j1e(t)}function k1e(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let i,s,o=!1;for(Ki&&r.nodeType==1&&n<Bv(r)&&ap(r.childNodes[n],-1)&&(o=!0);;)if(n>0){if(r.nodeType!=1)break;{let a=r.childNodes[n-1];if(ap(a,-1))i=r,s=--n;else if(a.nodeType==3)r=a,n=r.nodeValue.length;else break}}else{if(nse(r))break;{let a=r.previousSibling;for(;a&&ap(a,-1);)i=r.parentNode,s=ln(a),a=a.previousSibling;if(a)r=a,n=Bv(r);else{if(r=r.parentNode,r==t.dom)break;n=0}}}o?pR(t,r,n):i&&pR(t,i,s)}function j1e(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let i=Bv(r),s,o;for(;;)if(n<i){if(r.nodeType!=1)break;let a=r.childNodes[n];if(ap(a,1))s=r,o=++n;else break}else{if(nse(r))break;{let a=r.nextSibling;for(;a&&ap(a,1);)s=a.parentNode,o=ln(a)+1,a=a.nextSibling;if(a)r=a,n=0,i=Bv(r);else{if(r=r.parentNode,r==t.dom)break;n=i=0}}}s&&pR(t,s,o)}function nse(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function T1e(t,e){for(;t&&e==t.childNodes.length&&!$m(t);)e=ln(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let r=t.childNodes[e];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=0}}function O1e(t,e){for(;t&&!e&&!$m(t);)e=ln(t),t=t.parentNode;for(;t&&e;){let r=t.childNodes[e-1];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=t.childNodes.length}}function pR(t,e,r){if(e.nodeType!=3){let s,o;(o=T1e(e,r))?(e=o,r=0):(s=O1e(e,r))&&(e=s,r=s.nodeValue.length)}let n=t.domSelection();if(!n)return;if(Nb(n)){let s=document.createRange();s.setEnd(e,r),s.setStart(e,r),n.removeAllRanges(),n.addRange(s)}else n.extend&&n.extend(e,r);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Mo(t)},50)}function G3(t,e){let r=t.state.doc.resolve(e);if(!(Vr||zie)&&r.parent.inlineContent){let i=t.coordsAtPos(e);if(e>r.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<r.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function Y3(t,e,r){let n=t.state.selection;if(n instanceof Be&&!n.empty||r.indexOf("s")>-1||$i&&r.indexOf("m")>-1)return!1;let{$from:i,$to:s}=n;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=fR(t.state,e);if(o&&o instanceof Re)return xa(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=n instanceof Ei?Xe.near(o,e):Xe.findFrom(o,e);return a?xa(t,a):!1}return!1}function Q3(t,e){if(!(t.state.selection instanceof Be))return!0;let{$head:r,$anchor:n,empty:i}=t.state.selection;if(!r.sameParent(n))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!r.textOffset&&(e<0?r.nodeBefore:r.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(r.pos-s.nodeSize,r.pos):o.delete(r.pos,r.pos+s.nodeSize),t.dispatch(o),!0}return!1}function X3(t,e,r){t.domObserver.stop(),e.contentEditable=r,t.domObserver.start()}function P1e(t){if(!Nn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(e&&e.nodeType==1&&r==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let n=e.firstChild;X3(t,n,"true"),setTimeout(()=>X3(t,n,"false"),20)}return!1}function I1e(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function R1e(t,e){let r=e.keyCode,n=I1e(e);if(r==8||$i&&r==72&&n=="c")return Q3(t,-1)||Lu(t,-1);if(r==46&&!e.shiftKey||$i&&r==68&&n=="c")return Q3(t,1)||Lu(t,1);if(r==13||r==27)return!0;if(r==37||$i&&r==66&&n=="c"){let i=r==37?G3(t,t.state.selection.from)=="ltr"?-1:1:-1;return K3(t,i,n)||Lu(t,i)}else if(r==39||$i&&r==70&&n=="c"){let i=r==39?G3(t,t.state.selection.from)=="ltr"?1:-1:1;return K3(t,i,n)||Lu(t,i)}else{if(r==38||$i&&r==80&&n=="c")return Y3(t,-1,n)||Lu(t,-1);if(r==40||$i&&r==78&&n=="c")return P1e(t)||Y3(t,1,n)||Lu(t,1);if(n==($i?"m":"c")&&(r==66||r==73||r==89||r==90))return!0}return!1}function FA(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let r=[],{content:n,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&n.childCount==1&&n.firstChild.childCount==1;){i--,s--;let p=n.firstChild;r.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),n=p.content}let o=t.someProp("clipboardSerializer")||cu.fromSchema(t.state.schema),a=cse(),l=a.createElement("div");l.appendChild(o.serializeFragment(n,{document:a}));let u=l.firstChild,d,h=0;for(;u&&u.nodeType==1&&(d=lse[u.nodeName.toLowerCase()]);){for(let p=d.length-1;p>=0;p--){let m=a.createElement(d[p]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),h++}u=l.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${s}${h?` -${h}`:""} ${JSON.stringify(r)}`);let f=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f,slice:e}}function ise(t,e,r,n,i){let s=i.parent.type.spec.code,o,a;if(!r&&!e)return null;let l=!!e&&(n||s||!r);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,s||n,t)}),s)return a=new xe(te.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",f=>{a=f(a,t,!0)}),a;let h=t.someProp("clipboardTextParser",f=>f(e,i,n,t));if(h)a=h;else{let f=i.marks(),{schema:p}=t.state,m=cu.fromSchema(p);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let y=o.appendChild(document.createElement("p"));g&&y.appendChild(m.serializeNode(p.text(g,f)))})}}else t.someProp("transformPastedHTML",h=>{r=h(r,t)}),o=$1e(r),Fm&&F1e(o);let u=o&&o.querySelector("[data-pm-slice]"),d=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let h=+d[3];h>0;h--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||il.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||d),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!M1e.test(f.parentNode.nodeName)?{ignore:!0}:null}})),d)a=q1e(J3(a,+d[1],+d[2]),d[4]);else if(a=xe.maxOpen(A1e(a.content,i),!0),a.openStart||a.openEnd){let h=0,f=0;for(let p=a.content.firstChild;h<a.openStart&&!p.type.spec.isolating;h++,p=p.firstChild);for(let p=a.content.lastChild;f<a.openEnd&&!p.type.spec.isolating;f++,p=p.lastChild);a=J3(a,h,f)}return t.someProp("transformPasted",h=>{a=h(a,t,l)}),a}const M1e=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function A1e(t,e){if(t.childCount<2)return t;for(let r=e.depth;r>=0;r--){let i=e.node(r).contentMatchAt(e.index(r)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),u;if(!l)return o=null;if(u=o.length&&s.length&&ose(l,s,a,o[o.length-1],0))o[o.length-1]=u;else{o.length&&(o[o.length-1]=ase(o[o.length-1],s.length));let d=sse(a,l);o.push(d),i=i.matchType(d.type),s=l}}),o)return te.from(o)}return t}function sse(t,e,r=0){for(let n=e.length-1;n>=r;n--)t=e[n].create(null,te.from(t));return t}function ose(t,e,r,n,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=ose(t,e,r,n.lastChild,i+1);if(s)return n.copy(n.content.replaceChild(n.childCount-1,s));if(n.contentMatchAt(n.childCount).matchType(i==t.length-1?r.type:t[i+1]))return n.copy(n.content.append(te.from(sse(r,t,i+1))))}}function ase(t,e){if(e==0)return t;let r=t.content.replaceChild(t.childCount-1,ase(t.lastChild,e-1)),n=t.contentMatchAt(t.childCount).fillBefore(te.empty,!0);return t.copy(r.append(n))}function mR(t,e,r,n,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<n-1&&(a=mR(a,e,r,n,i+1,s)),i>=r&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(te.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function J3(t,e,r){return e<t.openStart&&(t=new xe(mR(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),r<t.openEnd&&(t=new xe(mR(t.content,1,r,t.openEnd,0,0),t.openStart,r)),t}const lse={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Z3=null;function cse(){return Z3||(Z3=document.implementation.createHTMLDocument("title"))}let Ox=null;function D1e(t){let e=window.trustedTypes;return e?(Ox||(Ox=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:r=>r})),Ox.createHTML(t)):t}function $1e(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let r=cse().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(t),i;if((i=n&&lse[n[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),r.innerHTML=D1e(t),i)for(let s=0;s<i.length;s++)r=r.querySelector(i[s])||r;return r}function F1e(t){let e=t.querySelectorAll(Vr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<e.length;r++){let n=e[r];n.childNodes.length==1&&n.textContent==""&&n.parentNode&&n.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),n)}}function q1e(t,e){if(!t.size)return t;let r=t.content.firstChild.type.schema,n;try{n=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=n.length-2;a>=0;a-=2){let l=r.nodes[n[a]];if(!l||l.hasRequiredAttrs())break;i=te.from(l.create(n[a+1],i)),s++,o++}return new xe(i,s,o)}const qn={},Ln={},L1e={touchstart:!0,touchmove:!0};class B1e{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function z1e(t){for(let e in qn){let r=qn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=n=>{V1e(t,n)&&!qA(t,n)&&(t.editable||!(n.type in Ln))&&r(t,n)},L1e[e]?{passive:!0}:void 0)}Nn&&t.dom.addEventListener("input",()=>null),gR(t)}function Ua(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function W1e(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function gR(t){t.someProp("handleDOMEvents",e=>{for(let r in e)t.input.eventHandlers[r]||t.dom.addEventListener(r,t.input.eventHandlers[r]=n=>qA(t,n))})}function qA(t,e){return t.someProp("handleDOMEvents",r=>{let n=r[e.type];return n?n(t,e)||e.defaultPrevented:!1})}function V1e(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r=e.target;r!=t.dom;r=r.parentNode)if(!r||r.nodeType==11||r.pmViewDesc&&r.pmViewDesc.stopEvent(e))return!1;return!0}function U1e(t,e){!qA(t,e)&&qn[e.type]&&(t.editable||!(e.type in Ln))&&qn[e.type](t,e)}Ln.keydown=(t,e)=>{let r=e;if(t.input.shiftKey=r.keyCode==16||r.shiftKey,!dse(t,r)&&(t.input.lastKeyCode=r.keyCode,t.input.lastKeyCodeTime=Date.now(),!(To&&Vr&&r.keyCode==13)))if(r.keyCode!=229&&t.domObserver.forceFlush(),lh&&r.keyCode==13&&!r.ctrlKey&&!r.altKey&&!r.metaKey){let n=Date.now();t.input.lastIOSEnter=n,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==n&&(t.someProp("handleKeyDown",i=>i(t,Kl(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",n=>n(t,r))||R1e(t,r)?r.preventDefault():Ua(t,"key")};Ln.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Ln.keypress=(t,e)=>{let r=e;if(dse(t,r)||!r.charCode||r.ctrlKey&&!r.altKey||$i&&r.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,r))){r.preventDefault();return}let n=t.state.selection;if(!(n instanceof Be)||!n.$from.sameParent(n.$to)){let i=String.fromCharCode(r.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,n.$from.pos,n.$to.pos,i,s))&&t.dispatch(s()),r.preventDefault()}};function kb(t){return{left:t.clientX,top:t.clientY}}function H1e(t,e){let r=e.x-t.clientX,n=e.y-t.clientY;return r*r+n*n<100}function LA(t,e,r,n,i){if(n==-1)return!1;let s=t.state.doc.resolve(n);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,r,s.nodeAfter,s.before(o),i,!0):a(t,r,s.node(o),s.before(o),i,!1)))return!0;return!1}function kd(t,e,r){if(t.focused||t.focus(),t.state.selection.eq(e))return;let n=t.state.tr.setSelection(e);n.setMeta("pointer",!0),t.dispatch(n)}function K1e(t,e){if(e==-1)return!1;let r=t.state.doc.resolve(e),n=r.nodeAfter;return n&&n.isAtom&&Re.isSelectable(n)?(kd(t,new Re(r)),!0):!1}function G1e(t,e){if(e==-1)return!1;let r=t.state.selection,n,i;r instanceof Re&&(n=r.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(Re.isSelectable(a)){n&&r.$from.depth>0&&o>=r.$from.depth&&s.before(r.$from.depth+1)==r.$from.pos?i=s.before(r.$from.depth):i=s.before(o);break}}return i!=null?(kd(t,Re.create(t.state.doc,i)),!0):!1}function Y1e(t,e,r,n,i){return LA(t,"handleClickOn",e,r,n)||t.someProp("handleClick",s=>s(t,e,n))||(i?G1e(t,r):K1e(t,r))}function Q1e(t,e,r,n){return LA(t,"handleDoubleClickOn",e,r,n)||t.someProp("handleDoubleClick",i=>i(t,e,n))}function X1e(t,e,r,n){return LA(t,"handleTripleClickOn",e,r,n)||t.someProp("handleTripleClick",i=>i(t,e,n))||J1e(t,r,n)}function J1e(t,e,r){if(r.button!=0)return!1;let n=t.state.doc;if(e==-1)return n.inlineContent?(kd(t,Be.create(n,0,n.content.size)),!0):!1;let i=n.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)kd(t,Be.create(n,a+1,a+1+o.content.size));else if(Re.isSelectable(o))kd(t,Re.create(n,a));else continue;return!0}}function BA(t){return zv(t)}const use=$i?"metaKey":"ctrlKey";qn.mousedown=(t,e)=>{let r=e;t.input.shiftKey=r.shiftKey;let n=BA(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&H1e(r,t.input.lastClick)&&!r[use]&&t.input.lastClick.button==r.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:r.clientX,y:r.clientY,type:s,button:r.button};let o=t.posAtCoords(kb(r));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Z1e(t,o,r,!!n)):(s=="doubleClick"?Q1e:X1e)(t,o.pos,o.inside,r)?r.preventDefault():Ua(t,"pointer"))};class Z1e{constructor(e,r,n,i){this.view=e,this.pos=r,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[use],this.allowDefault=n.shiftKey;let s,o;if(r.inside>-1)s=e.state.doc.nodeAt(r.inside),o=r.inside;else{let d=e.state.doc.resolve(r.pos);s=d.parent,o=d.depth?d.before():0}const a=i?null:n.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:u}=e.state;(n.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||u instanceof Re&&u.from<=o&&u.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Ki&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ua(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Mo(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let r=this.pos;this.view.state.doc!=this.startDoc&&(r=this.view.posAtCoords(kb(e))),this.updateAllowDefault(e),this.allowDefault||!r?Ua(this.view,"pointer"):Y1e(this.view,r.pos,r.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Nn&&this.mightDrag&&!this.mightDrag.node.isAtom||Vr&&!this.view.state.selection.visible&&Math.min(Math.abs(r.pos-this.view.state.selection.from),Math.abs(r.pos-this.view.state.selection.to))<=2)?(kd(this.view,Xe.near(this.view.state.doc.resolve(r.pos))),e.preventDefault()):Ua(this.view,"pointer")}move(e){this.updateAllowDefault(e),Ua(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}qn.touchstart=t=>{t.input.lastTouch=Date.now(),BA(t),Ua(t,"pointer")};qn.touchmove=t=>{t.input.lastTouch=Date.now(),Ua(t,"pointer")};qn.contextmenu=t=>BA(t);function dse(t,e){return t.composing?!0:Nn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const exe=To?5e3:-1;Ln.compositionstart=Ln.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,r=e.selection.$to;if(e.selection instanceof Be&&(e.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)||Vr&&zie&&txe(t)))t.markCursor=t.state.storedMarks||r.marks(),zv(t,!0),t.markCursor=null;else if(zv(t,!e.selection.empty),Ki&&e.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let n=t.domSelectionRange();for(let i=n.focusNode,s=n.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}hse(t,exe)};function txe(t){let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(!e||e.nodeType!=1||r>=e.childNodes.length)return!1;let n=e.childNodes[r];return n.nodeType==1&&n.contentEditable=="false"}Ln.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,hse(t,20))};function hse(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>zv(t),e))}function fse(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=nxe());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function rxe(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let r=Gbe(e.focusNode,e.focusOffset),n=Ybe(e.focusNode,e.focusOffset);if(r&&n&&r!=n){let i=n.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(r==s||n==s)return s;if(!i||!i.isText(n.nodeValue))return n;if(t.input.compositionNode==n){let o=r.pmViewDesc;if(!(!o||!o.isText(r.nodeValue)))return n}}return r||n}function nxe(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function zv(t,e=!1){if(!(To&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),fse(t),e||t.docView&&t.docView.dirty){let r=DA(t),n=t.state.selection;return r&&!r.eq(n)?t.dispatch(t.state.tr.setSelection(r)):(t.markCursor||e)&&!n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function ixe(t,e){if(!t.dom.parentNode)return;let r=t.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(e),r.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),n.removeAllRanges(),n.addRange(i),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),t.focus()},50)}const Yp=ci&&sl<15||lh&&Zbe<604;qn.copy=Ln.cut=(t,e)=>{let r=e,n=t.state.selection,i=r.type=="cut";if(n.empty)return;let s=Yp?null:r.clipboardData,o=n.content(),{dom:a,text:l}=FA(t,o);s?(r.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):ixe(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function sxe(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function oxe(t,e){if(!t.dom.parentNode)return;let r=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,n=t.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),n.parentNode&&n.parentNode.removeChild(n),r?Qp(t,n.value,null,i,e):Qp(t,n.textContent,n.innerHTML,i,e)},50)}function Qp(t,e,r,n,i){let s=ise(t,e,r,n,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||xe.empty)))return!0;if(!s)return!1;let o=sxe(s),a=o?t.state.tr.replaceSelectionWith(o,n):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function pse(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let r=t.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}Ln.paste=(t,e)=>{let r=e;if(t.composing&&!To)return;let n=Yp?null:r.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;n&&Qp(t,pse(n),n.getData("text/html"),i,r)?r.preventDefault():oxe(t,r)};class mse{constructor(e,r,n){this.slice=e,this.move=r,this.node=n}}const axe=$i?"altKey":"ctrlKey";function gse(t,e){let r=t.someProp("dragCopies",n=>!n(e));return r??!e[axe]}qn.dragstart=(t,e)=>{let r=e,n=t.input.mouseDown;if(n&&n.done(),!r.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(kb(r)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Re?i.to-1:i.to))){if(n&&n.mightDrag)o=Re.create(t.state.doc,n.mightDrag.pos);else if(r.target&&r.target.nodeType==1){let h=t.docView.nearestDesc(r.target,!0);h&&h.node.type.spec.draggable&&h!=t.docView&&(o=Re.create(t.state.doc,h.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:u,slice:d}=FA(t,a);(!r.dataTransfer.files.length||!Vr||Bie>120)&&r.dataTransfer.clearData(),r.dataTransfer.setData(Yp?"Text":"text/html",l.innerHTML),r.dataTransfer.effectAllowed="copyMove",Yp||r.dataTransfer.setData("text/plain",u),t.dragging=new mse(d,gse(t,r),o)};qn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Ln.dragover=Ln.dragenter=(t,e)=>e.preventDefault();Ln.drop=(t,e)=>{try{lxe(t,e,t.dragging)}finally{t.dragging=null}};function lxe(t,e,r){if(!e.dataTransfer)return;let n=t.posAtCoords(kb(e));if(!n)return;let i=t.state.doc.resolve(n.pos),s=r&&r.slice;s?t.someProp("transformPasted",p=>{s=p(s,t,!1)}):s=ise(t,pse(e.dataTransfer),Yp?null:e.dataTransfer.getData("text/html"),!1,i);let o=!!(r&&gse(t,e));if(t.someProp("handleDrop",p=>p(t,e,s||xe.empty,o))){e.preventDefault();return}if(!s)return;e.preventDefault();let a=s?xie(t.state.doc,i.pos,s):i.pos;a==null&&(a=i.pos);let l=t.state.tr;if(o){let{node:p}=r;p?p.replace(l):l.deleteSelection()}let u=l.mapping.map(a),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,h=l.doc;if(d?l.replaceRangeWith(u,u,s.content.firstChild):l.replaceRange(u,u,s),l.doc.eq(h))return;let f=l.doc.resolve(u);if(d&&Re.isSelectable(s.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(s.content.firstChild))l.setSelection(new Re(f));else{let p=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((m,g,y,v)=>p=v),l.setSelection($A(t,f,l.doc.resolve(p)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}qn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Mo(t)},20))};qn.blur=(t,e)=>{let r=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),r.relatedTarget&&t.dom.contains(r.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};qn.beforeinput=(t,e)=>{if(Vr&&To&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:n}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=n||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Kl(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Ln)qn[t]=Ln[t];function Xp(t,e){if(t==e)return!0;for(let r in t)if(t[r]!==e[r])return!1;for(let r in e)if(!(r in t))return!1;return!0}class Wv{constructor(e,r){this.toDOM=e,this.spec=r||Ec,this.side=this.spec.side||0}map(e,r,n,i){let{pos:s,deleted:o}=e.mapResult(r.from+i,this.side<0?-1:1);return o?null:new $n(s-n,s-n,this)}valid(){return!0}eq(e){return this==e||e instanceof Wv&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Xp(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class al{constructor(e,r){this.attrs=e,this.spec=r||Ec}map(e,r,n,i){let s=e.map(r.from+i,this.spec.inclusiveStart?-1:1)-n,o=e.map(r.to+i,this.spec.inclusiveEnd?1:-1)-n;return s>=o?null:new $n(s,o,this)}valid(e,r){return r.from<r.to}eq(e){return this==e||e instanceof al&&Xp(this.attrs,e.attrs)&&Xp(this.spec,e.spec)}static is(e){return e.type instanceof al}destroy(){}}class zA{constructor(e,r){this.attrs=e,this.spec=r||Ec}map(e,r,n,i){let s=e.mapResult(r.from+i,1);if(s.deleted)return null;let o=e.mapResult(r.to+i,-1);return o.deleted||o.pos<=s.pos?null:new $n(s.pos-n,o.pos-n,this)}valid(e,r){let{index:n,offset:i}=e.content.findIndex(r.from),s;return i==r.from&&!(s=e.child(n)).isText&&i+s.nodeSize==r.to}eq(e){return this==e||e instanceof zA&&Xp(this.attrs,e.attrs)&&Xp(this.spec,e.spec)}destroy(){}}class $n{constructor(e,r,n){this.from=e,this.to=r,this.type=n}copy(e,r){return new $n(e,r,this.type)}eq(e,r=0){return this.type.eq(e.type)&&this.from+r==e.from&&this.to+r==e.to}map(e,r,n){return this.type.map(e,this,r,n)}static widget(e,r,n){return new $n(e,e,new Wv(r,n))}static inline(e,r,n,i){return new $n(e,r,new al(n,i))}static node(e,r,n,i){return new $n(e,r,new zA(n,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof al}get widget(){return this.type instanceof Wv}}const Gu=[],Ec={};class Kt{constructor(e,r){this.local=e.length?e:Gu,this.children=r.length?r:Gu}static create(e,r){return r.length?Vv(r,e,0,Ec):bn}find(e,r,n){let i=[];return this.findInner(e??0,r??1e9,i,0,n),i}findInner(e,r,n,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=r&&a.to>=e&&(!s||s(a.spec))&&n.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<r&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,r-a,n,i+a,s)}}map(e,r,n){return this==bn||e.maps.length==0?this:this.mapInner(e,r,0,0,n||Ec)}mapInner(e,r,n,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,n,i);l&&l.type.valid(r,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?cxe(this.children,o||[],e,r,n,i,s):o?new Kt(o.sort(_c),Gu):bn}add(e,r){return r.length?this==bn?Kt.create(e,r):this.addInner(e,r,0):this}addInner(e,r,n){let i,s=0;e.forEach((a,l)=>{let u=l+n,d;if(d=vse(r,a,u)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,d,u+1):i.splice(s,0,l,l+a.nodeSize,Vv(d,a,u+1,Ec)),s+=3}});let o=yse(s?bse(r):r,-n);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new Kt(o.length?this.local.concat(o).sort(_c):this.local,i||this.children)}remove(e){return e.length==0||this==bn?this:this.removeInner(e,0)}removeInner(e,r){let n=this.children,i=this.local;for(let s=0;s<n.length;s+=3){let o,a=n[s]+r,l=n[s+1]+r;for(let d=0,h;d<e.length;d++)(h=e[d])&&h.from>a&&h.to<l&&(e[d]=null,(o||(o=[])).push(h));if(!o)continue;n==this.children&&(n=this.children.slice());let u=n[s+2].removeInner(o,a+1);u!=bn?n[s+2]=u:(n.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,r)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return n==this.children&&i==this.local?this:i.length||n.length?new Kt(i,n):bn}forChild(e,r){if(this==bn)return this;if(r.isLeaf)return Kt.empty;let n,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(n=this.children[a+2]);break}let s=e+1,o=s+r.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof al){let u=Math.max(s,l.from)-s,d=Math.min(o,l.to)-s;u<d&&(i||(i=[])).push(l.copy(u,d))}}if(i){let a=new Kt(i.sort(_c),Gu);return n?new ka([a,n]):a}return n||bn}eq(e){if(this==e)return!0;if(!(e instanceof Kt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let r=0;r<this.local.length;r++)if(!this.local[r].eq(e.local[r]))return!1;for(let r=0;r<this.children.length;r+=3)if(this.children[r]!=e.children[r]||this.children[r+1]!=e.children[r+1]||!this.children[r+2].eq(e.children[r+2]))return!1;return!0}locals(e){return WA(this.localsInner(e))}localsInner(e){if(this==bn)return Gu;if(e.inlineContent||!this.local.some(al.is))return this.local;let r=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof al||r.push(this.local[n]);return r}forEachSet(e){e(this)}}Kt.empty=new Kt([],[]);Kt.removeOverlap=WA;const bn=Kt.empty;class ka{constructor(e){this.members=e}map(e,r){const n=this.members.map(i=>i.map(e,r,Ec));return ka.from(n)}forChild(e,r){if(r.isLeaf)return Kt.empty;let n=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,r);s!=bn&&(s instanceof ka?n=n.concat(s.members):n.push(s))}return ka.from(n)}eq(e){if(!(e instanceof ka)||e.members.length!=this.members.length)return!1;for(let r=0;r<this.members.length;r++)if(!this.members[r].eq(e.members[r]))return!1;return!0}locals(e){let r,n=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!r)r=s;else{n&&(r=r.slice(),n=!1);for(let o=0;o<s.length;o++)r.push(s[o])}}return r?WA(n?r:r.sort(_c)):Gu}static from(e){switch(e.length){case 0:return bn;case 1:return e[0];default:return new ka(e.every(r=>r instanceof Kt)?e:e.reduce((r,n)=>r.concat(n instanceof Kt?n:n.members),[]))}}forEachSet(e){for(let r=0;r<this.members.length;r++)this.members[r].forEachSet(e)}}function cxe(t,e,r,n,i,s,o){let a=t.slice();for(let u=0,d=s;u<r.maps.length;u++){let h=0;r.maps[u].forEach((f,p,m,g)=>{let y=g-m-(p-f);for(let v=0;v<a.length;v+=3){let b=a[v+1];if(b<0||f>b+d-h)continue;let w=a[v]+d-h;p>=w?a[v+1]=f<=w?-2:-1:f>=d&&y&&(a[v]+=y,a[v+1]+=y)}h+=y}),d=r.maps[u].map(d,-1)}let l=!1;for(let u=0;u<a.length;u+=3)if(a[u+1]<0){if(a[u+1]==-2){l=!0,a[u+1]=-1;continue}let d=r.map(t[u]+s),h=d-i;if(h<0||h>=n.content.size){l=!0;continue}let f=r.map(t[u+1]+s,-1),p=f-i,{index:m,offset:g}=n.content.findIndex(h),y=n.maybeChild(m);if(y&&g==h&&g+y.nodeSize==p){let v=a[u+2].mapInner(r,y,d+1,t[u]+s+1,o);v!=bn?(a[u]=h,a[u+1]=p,a[u+2]=v):(a[u+1]=-2,l=!0)}else l=!0}if(l){let u=uxe(a,t,e,r,i,s,o),d=Vv(u,n,0,o);e=d.local;for(let h=0;h<a.length;h+=3)a[h+1]<0&&(a.splice(h,3),h-=3);for(let h=0,f=0;h<d.children.length;h+=3){let p=d.children[h];for(;f<a.length&&a[f]<p;)f+=3;a.splice(f,0,d.children[h],d.children[h+1],d.children[h+2])}}return new Kt(e.sort(_c),a)}function yse(t,e){if(!e||!t.length)return t;let r=[];for(let n=0;n<t.length;n++){let i=t[n];r.push(new $n(i.from+e,i.to+e,i.type))}return r}function uxe(t,e,r,n,i,s,o){function a(l,u){for(let d=0;d<l.local.length;d++){let h=l.local[d].map(n,i,u);h?r.push(h):o.onRemove&&o.onRemove(l.local[d].spec)}for(let d=0;d<l.children.length;d+=3)a(l.children[d+2],l.children[d]+u+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return r}function vse(t,e,r){if(e.isLeaf)return null;let n=r+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>r&&o.to<n&&((i||(i=[])).push(o),t[s]=null);return i}function bse(t){let e=[];for(let r=0;r<t.length;r++)t[r]!=null&&e.push(t[r]);return e}function Vv(t,e,r,n){let i=[],s=!1;e.forEach((a,l)=>{let u=vse(t,a,l+r);if(u){s=!0;let d=Vv(u,a,r+l+1,n);d!=bn&&i.push(l,l+a.nodeSize,d)}});let o=yse(s?bse(t):t,-r).sort(_c);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(n.onRemove&&n.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new Kt(o,i):bn}function _c(t,e){return t.from-e.from||t.to-e.to}function WA(t){let e=t;for(let r=0;r<e.length-1;r++){let n=e[r];if(n.from!=n.to)for(let i=r+1;i<e.length;i++){let s=e[i];if(s.from==n.from){s.to!=n.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,n.to),eF(e,i+1,s.copy(n.to,s.to)));continue}else{s.from<n.to&&(e==t&&(e=t.slice()),e[r]=n.copy(n.from,s.from),eF(e,i,n.copy(s.from,n.to)));break}}}return e}function eF(t,e,r){for(;e<t.length&&_c(r,t[e])>0;)e++;t.splice(e,0,r)}function Px(t){let e=[];return t.someProp("decorations",r=>{let n=r(t.state);n&&n!=bn&&e.push(n)}),t.cursorWrapper&&e.push(Kt.create(t.state.doc,[t.cursorWrapper.deco])),ka.from(e)}const dxe={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},hxe=ci&&sl<=11;class fxe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class pxe{constructor(e,r){this.view=e,this.handleDOMChange=r,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new fxe,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let i=0;i<n.length;i++)this.queue.push(n[i]);ci&&sl<=11&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),hxe&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,dxe)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let r=0;r<e.length;r++)this.queue.push(e[r]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(H3(this.view)){if(this.suppressingSelectionUpdates)return Mo(this.view);if(ci&&sl<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Gc(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let r=new Set,n;for(let s=e.focusNode;s;s=ah(s))r.add(s);for(let s=e.anchorNode;s;s=ah(s))if(r.has(s)){n=s;break}let i=n&&this.view.docView.nearestDesc(n);if(i&&i.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let r=this.pendingRecords();r.length&&(this.queue=[]);let n=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&H3(e)&&!this.ignoreSelectionChange(n),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let d=0;d<r.length;d++){let h=this.registerMutation(r[d],l);h&&(s=s<0?h.from:Math.min(h.from,s),o=o<0?h.to:Math.max(h.to,o),h.typeOver&&(a=!0))}if(Ki&&l.length){let d=l.filter(h=>h.nodeName=="BR");if(d.length==2){let[h,f]=d;h.parentNode&&h.parentNode.parentNode==f.parentNode?f.remove():h.remove()}else{let{focusNode:h}=this.currentSelection;for(let f of d){let p=f.parentNode;p&&p.nodeName=="LI"&&(!h||yxe(e,h)!=p)&&f.remove()}}}else if((Vr||Nn)&&l.some(d=>d.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let d of l)if(d.nodeName=="BR"&&d.parentNode){let h=d.nextSibling;h&&h.nodeType==1&&h.contentEditable=="false"&&d.parentNode.removeChild(d)}}let u=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Nb(n)&&(u=DA(e))&&u.eq(Xe.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Mo(e),this.currentSelection.set(n),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),mxe(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||Mo(e),this.currentSelection.set(n))}registerMutation(e,r){if(r.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(n==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let h=e.addedNodes[d];r.push(h),h.nodeType==3&&(this.lastChangedTextNode=h)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let i=e.previousSibling,s=e.nextSibling;if(ci&&sl<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:h,nextSibling:f}=e.addedNodes[d];(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}let o=i&&i.parentNode==e.target?ln(i)+1:0,a=n.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?ln(s):e.target.childNodes.length,u=n.localPosFromDOM(e.target,l,1);return{from:a,to:u}}else return e.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let tF=new WeakMap,rF=!1;function mxe(t){if(!tF.has(t)&&(tF.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Ki,rF)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),rF=!0}}function nF(t,e){let r=e.startContainer,n=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return Gc(o.node,o.offset,i,s)&&([r,n,i,s]=[i,s,r,n]),{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:s}}function gxe(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return nF(t,i)}let r;function n(i){i.preventDefault(),i.stopImmediatePropagation(),r=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0),r?nF(t,r):null}function yxe(t,e){for(let r=e.parentNode;r&&r!=t.dom;r=r.parentNode){let n=t.docView.nearestDesc(r,!0);if(n&&n.node.isBlock)return r}return null}function vxe(t,e,r){let{node:n,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,r),l=t.domSelectionRange(),u,d=l.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(u=[{node:d,offset:l.anchorOffset}],Nb(l)||u.push({node:l.focusNode,offset:l.focusOffset})),Vr&&t.input.lastKeyCode===8)for(let y=s;y>i;y--){let v=n.childNodes[y-1],b=v.pmViewDesc;if(v.nodeName=="BR"&&!b){s=y;break}if(!b||b.size)break}let h=t.state.doc,f=t.someProp("domParser")||il.fromSchema(t.state.schema),p=h.resolve(o),m=null,g=f.parse(n,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:s,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:bxe,context:p});if(u&&u[0].pos!=null){let y=u[0].pos,v=u[1]&&u[1].pos;v==null&&(v=y),m={anchor:y+o,head:v+o}}return{doc:g,sel:m,from:o,to:a}}function bxe(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Nn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}else if(t.parentNode.lastChild==t||Nn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const xxe=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function wxe(t,e,r,n,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let N=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,_=DA(t,N);if(_&&!t.state.selection.eq(_)){if(Vr&&To&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",j=>j(t,Kl(13,"Enter"))))return;let k=t.state.tr.setSelection(_);N=="pointer"?k.setMeta("pointer",!0):N=="key"&&k.scrollIntoView(),s&&k.setMeta("composition",s),t.dispatch(k)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(r);e=o.before(a+1),r=t.state.doc.resolve(r).after(a+1);let l=t.state.selection,u=vxe(t,e,r),d=t.state.doc,h=d.slice(u.from,u.to),f,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,p="end"):(f=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let m=_xe(h.content,u.doc.content,u.from,f,p);if(m&&t.input.domChangeCount++,(lh&&t.input.lastIOSEnter>Date.now()-225||To)&&i.some(N=>N.nodeType==1&&!xxe.test(N.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",N=>N(t,Kl(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(n&&l instanceof Be&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))m={start:l.from,endA:l.to,endB:l.to};else{if(u.sel){let N=iF(t,t.state.doc,u.sel);if(N&&!N.eq(t.state.selection)){let _=t.state.tr.setSelection(N);s&&_.setMeta("composition",s),t.dispatch(_)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof Be&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=u.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=u.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),ci&&sl<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>u.from&&u.doc.textBetween(m.start-u.from-1,m.start-u.from+1)==" "&&(m.start--,m.endA--,m.endB--);let g=u.doc.resolveNoCache(m.start-u.from),y=u.doc.resolveNoCache(m.endB-u.from),v=d.resolve(m.start),b=g.sameParent(y)&&g.parent.inlineContent&&v.end()>=m.endA;if((lh&&t.input.lastIOSEnter>Date.now()-225&&(!b||i.some(N=>N.nodeName=="DIV"||N.nodeName=="P"))||!b&&g.pos<u.doc.content.size&&(!g.sameParent(y)||!g.parent.inlineContent)&&g.pos<y.pos&&!/\S/.test(u.doc.textBetween(g.pos,y.pos,"","")))&&t.someProp("handleKeyDown",N=>N(t,Kl(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&Exe(d,m.start,m.endA,g,y)&&t.someProp("handleKeyDown",N=>N(t,Kl(8,"Backspace")))){To&&Vr&&t.domObserver.suppressSelectionUpdates();return}Vr&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),To&&!b&&g.start()!=y.start()&&y.parentOffset==0&&g.depth==y.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==m.endA&&(m.endB-=2,y=u.doc.resolveNoCache(m.endB-u.from),setTimeout(()=>{t.someProp("handleKeyDown",function(N){return N(t,Kl(13,"Enter"))})},20));let w=m.start,x=m.endA,S=N=>{let _=N||t.state.tr.replace(w,x,u.doc.slice(m.start-u.from,m.endB-u.from));if(u.sel){let k=iF(t,_.doc,u.sel);k&&!(Vr&&t.composing&&k.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(k.head==w||k.head==_.mapping.map(x)-1)||ci&&k.empty&&k.head==w)&&_.setSelection(k)}return s&&_.setMeta("composition",s),_.scrollIntoView()},E;if(b)if(g.pos==y.pos){ci&&sl<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Mo(t),20));let N=S(t.state.tr.delete(w,x)),_=d.resolve(m.start).marksAcross(d.resolve(m.endA));_&&N.ensureMarks(_),t.dispatch(N)}else if(m.endA==m.endB&&(E=Sxe(g.parent.content.cut(g.parentOffset,y.parentOffset),v.parent.content.cut(v.parentOffset,m.endA-v.start())))){let N=S(t.state.tr);E.type=="add"?N.addMark(w,x,E.mark):N.removeMark(w,x,E.mark),t.dispatch(N)}else if(g.parent.child(g.index()).isText&&g.index()==y.index()-(y.textOffset?0:1)){let N=g.parent.textBetween(g.parentOffset,y.parentOffset),_=()=>S(t.state.tr.insertText(N,w,x));t.someProp("handleTextInput",k=>k(t,w,x,N,_))||t.dispatch(_())}else t.dispatch(S());else t.dispatch(S())}function iF(t,e,r){return Math.max(r.anchor,r.head)>e.content.size?null:$A(t,e.resolve(r.anchor),e.resolve(r.head))}function Sxe(t,e){let r=t.firstChild.marks,n=e.firstChild.marks,i=r,s=n,o,a,l;for(let d=0;d<n.length;d++)i=n[d].removeFromSet(i);for(let d=0;d<r.length;d++)s=r[d].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=d=>d.mark(a.addToSet(d.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=d=>d.mark(a.removeFromSet(d.marks));else return null;let u=[];for(let d=0;d<e.childCount;d++)u.push(l(e.child(d)));if(te.from(u).eq(t))return{mark:a,type:o}}function Exe(t,e,r,n,i){if(r-e<=i.pos-n.pos||Ix(n,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!n.parent.isTextblock){let a=s.nodeAfter;return a!=null&&r==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(Ix(s,!0,!0));return!o.parent.isTextblock||o.pos>r||Ix(o,!0,!1)<r?!1:n.parent.content.cut(n.parentOffset).eq(o.parent.content)}function Ix(t,e,r){let n=t.depth,i=e?t.end():t.pos;for(;n>0&&(e||t.indexAfter(n)==t.node(n).childCount);)n--,i++,e=!1;if(r){let s=t.node(n).maybeChild(t.indexAfter(n));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function _xe(t,e,r,n,i){let s=t.findDiffStart(e,r);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,r+t.size,r+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.size<e.size){let l=n<=s&&n>=o?s-n:0;s-=l,s&&s<e.size&&sF(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,s&&s<t.size&&sF(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function sF(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),r=t.charCodeAt(1);return e>=56320&&e<=57343&&r>=55296&&r<=56319}class xse{constructor(e,r){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new B1e,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=r,this.state=r.state,this.directPlugins=r.plugins||[],this.directPlugins.forEach(uF),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=lF(this),aF(this),this.nodeViews=cF(this),this.docView=L3(this.state.doc,oF(this),Px(this),this.dom,this),this.domObserver=new pxe(this,(n,i,s,o)=>wxe(this,n,i,s,o)),this.domObserver.start(),z1e(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let r in e)this._props[r]=e[r];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&gR(this);let r=this._props;this._props=e,e.plugins&&(e.plugins.forEach(uF),this.directPlugins=e.plugins),this.updateStateInner(e.state,r)}setProps(e){let r={};for(let n in this._props)r[n]=this._props[n];r.state=this.state;for(let n in e)r[n]=e[n];this.update(r)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,r){var n;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(fse(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=r.plugins;if(a||this._props.plugins!=r.plugins||this._props.nodeViews!=r.nodeViews){let p=cF(this);Cxe(p,this.nodeViews)&&(this.nodeViews=p,s=!0)}(a||r.handleDOMEvents!=this._props.handleDOMEvents)&&gR(this),this.editable=lF(this),aF(this);let l=Px(this),u=oF(this),d=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",h=s||!this.docView.matchesNode(e.doc,u,l);(h||!e.selection.eq(i.selection))&&(o=!0);let f=d=="preserve"&&o&&this.dom.style.overflowAnchor==null&&r1e(this);if(o){this.domObserver.stop();let p=h&&(ci||Vr)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&Nxe(i.selection,e.selection);if(h){let m=Vr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=rxe(this)),(s||!this.docView.update(e.doc,u,l,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=L3(e.doc,u,l,this.dom,this)),m&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&C1e(this))?Mo(this,p):(tse(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((n=this.dragging)===null||n===void 0)&&n.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():f&&n1e(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",r=>r(this)))if(this.state.selection instanceof Re){let r=this.docView.domAfterPos(this.state.selection.from);r.nodeType==1&&M3(this,r.getBoundingClientRect(),e)}else M3(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let r=0;r<this.directPlugins.length;r++){let n=this.directPlugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let r=0;r<this.state.plugins.length;r++){let n=this.state.plugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let r=0;r<this.pluginViews.length;r++){let n=this.pluginViews[r];n.update&&n.update(this,e)}}updateDraggedNode(e,r){let n=e.node,i=-1;if(this.state.doc.nodeAt(n.from)==n.node)i=n.from;else{let s=n.from+(this.state.doc.content.size-r.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==n.node&&(i=s)}this.dragging=new mse(e.slice,e.move,i<0?void 0:Re.create(this.state.doc,i))}someProp(e,r){let n=this._props&&this._props[e],i;if(n!=null&&(i=r?r(n):n))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=r?r(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=r?r(a):a))return i}}hasFocus(){if(ci){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&i1e(this.dom),Mo(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let r=this.dom.parentNode;r;r=r.parentNode)if(r.nodeType==9||r.nodeType==11&&r.host)return r.getSelection||(Object.getPrototypeOf(r).getSelection=()=>r.ownerDocument.getSelection()),this._root=r}return e||document}updateRoot(){this._root=null}posAtCoords(e){return c1e(this,e)}coordsAtPos(e,r=1){return Kie(this,e,r)}domAtPos(e,r=0){return this.docView.domFromPos(e,r)}nodeDOM(e){let r=this.docView.descAt(e);return r?r.nodeDOM:null}posAtDOM(e,r,n=-1){let i=this.docView.posFromDOM(e,r,n);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,r){return p1e(this,r||this.state,e)}pasteHTML(e,r){return Qp(this,"",e,!1,r||new ClipboardEvent("paste"))}pasteText(e,r){return Qp(this,e,null,!0,r||new ClipboardEvent("paste"))}serializeForClipboard(e){return FA(this,e)}destroy(){this.docView&&(W1e(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Px(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Hbe())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return U1e(this,e)}domSelectionRange(){let e=this.domSelection();return e?Nn&&this.root.nodeType===11&&Xbe(this.dom.ownerDocument)==this.dom&&gxe(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}xse.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function oF(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",r=>{if(typeof r=="function"&&(r=r(t.state)),r)for(let n in r)n=="class"?e.class+=" "+r[n]:n=="style"?e.style=(e.style?e.style+";":"")+r[n]:!e[n]&&n!="contenteditable"&&n!="nodeName"&&(e[n]=String(r[n]))}),e.translate||(e.translate="no"),[$n.node(0,t.state.doc.content.size,e)]}function aF(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:$n.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function lF(t){return!t.someProp("editable",e=>e(t.state)===!1)}function Nxe(t,e){let r=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(r)!=e.$anchor.start(r)}function cF(t){let e=Object.create(null);function r(n){for(let i in n)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=n[i])}return t.someProp("nodeViews",r),t.someProp("markViews",r),e}function Cxe(t,e){let r=0,n=0;for(let i in t){if(t[i]!=e[i])return!0;r++}for(let i in e)n++;return r!=n}function uF(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var bl={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Uv={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},kxe=typeof navigator<"u"&&/Mac/.test(navigator.platform),jxe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var cn=0;cn<10;cn++)bl[48+cn]=bl[96+cn]=String(cn);for(var cn=1;cn<=24;cn++)bl[cn+111]="F"+cn;for(var cn=65;cn<=90;cn++)bl[cn]=String.fromCharCode(cn+32),Uv[cn]=String.fromCharCode(cn);for(var Rx in bl)Uv.hasOwnProperty(Rx)||(Uv[Rx]=bl[Rx]);function Txe(t){var e=kxe&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||jxe&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",r=!e&&t.key||(t.shiftKey?Uv:bl)[t.keyCode]||t.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}const Oxe=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Pxe=typeof navigator<"u"&&/Win/.test(navigator.platform);function Ixe(t){let e=t.split(/-(?!$)/),r=e[e.length-1];r=="Space"&&(r=" ");let n,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))Oxe?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return n&&(r="Alt-"+r),i&&(r="Ctrl-"+r),o&&(r="Meta-"+r),s&&(r="Shift-"+r),r}function Rxe(t){let e=Object.create(null);for(let r in t)e[Ixe(r)]=t[r];return e}function Mx(t,e,r=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),r&&e.shiftKey&&(t="Shift-"+t),t}function Mxe(t){return new Xt({props:{handleKeyDown:wse(t)}})}function wse(t){let e=Rxe(t);return function(r,n){let i=Txe(n),s,o=e[Mx(i,n)];if(o&&o(r.state,r.dispatch,r))return!0;if(i.length==1&&i!=" "){if(n.shiftKey){let a=e[Mx(i,n,!1)];if(a&&a(r.state,r.dispatch,r))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(Pxe&&n.ctrlKey&&n.altKey)&&(s=bl[n.keyCode])&&s!=i){let a=e[Mx(s,n)];if(a&&a(r.state,r.dispatch,r))return!0}}return!1}}var Axe=Object.defineProperty,VA=(t,e)=>{for(var r in e)Axe(t,r,{get:e[r],enumerable:!0})};function jb(t){const{state:e,transaction:r}=t;let{selection:n}=r,{doc:i}=r,{storedMarks:s}=r;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return n},get doc(){return i},get tr(){return n=r.selection,i=r.doc,s=r.storedMarks,r}}}var Tb=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:r}=this,{view:n}=e,{tr:i}=r,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([o,a])=>[o,(...u)=>{const d=a(...u)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&n.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:r,editor:n,state:i}=this,{view:s}=n,o=[],a=!!t,l=t||i.tr,u=()=>(!a&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(l),o.every(h=>h===!0)),d={...Object.fromEntries(Object.entries(r).map(([h,f])=>[h,(...m)=>{const g=this.buildProps(l,e),y=f(...m)(g);return o.push(y),d}])),run:u};return d}createCan(t){const{rawCommands:e,state:r}=this,n=!1,i=t||r.tr,s=this.buildProps(i,n);return{...Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>l(...u)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,n)}}buildProps(t,e=!0){const{rawCommands:r,editor:n,state:i}=this,{view:s}=n,o={tr:t,editor:n,view:s,state:jb({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(r).map(([a,l])=>[a,(...u)=>l(...u)(o)]))}};return o}},Sse={};VA(Sse,{blur:()=>Dxe,clearContent:()=>$xe,clearNodes:()=>Fxe,command:()=>qxe,createParagraphNear:()=>Lxe,cut:()=>Bxe,deleteCurrentNode:()=>zxe,deleteNode:()=>Wxe,deleteRange:()=>Vxe,deleteSelection:()=>Uxe,enter:()=>Hxe,exitCode:()=>Kxe,extendMarkRange:()=>Gxe,first:()=>Yxe,focus:()=>Xxe,forEach:()=>Jxe,insertContent:()=>Zxe,insertContentAt:()=>rwe,joinBackward:()=>swe,joinDown:()=>iwe,joinForward:()=>owe,joinItemBackward:()=>awe,joinItemForward:()=>lwe,joinTextblockBackward:()=>cwe,joinTextblockForward:()=>uwe,joinUp:()=>nwe,keyboardShortcut:()=>hwe,lift:()=>fwe,liftEmptyBlock:()=>pwe,liftListItem:()=>mwe,newlineInCode:()=>gwe,resetAttributes:()=>ywe,scrollIntoView:()=>vwe,selectAll:()=>bwe,selectNodeBackward:()=>xwe,selectNodeForward:()=>wwe,selectParentNode:()=>Swe,selectTextblockEnd:()=>Ewe,selectTextblockStart:()=>_we,setContent:()=>Nwe,setMark:()=>Uwe,setMeta:()=>Hwe,setNode:()=>Kwe,setNodeSelection:()=>Gwe,setTextDirection:()=>Ywe,setTextSelection:()=>Qwe,sinkListItem:()=>Xwe,splitBlock:()=>Jwe,splitListItem:()=>Zwe,toggleList:()=>eSe,toggleMark:()=>tSe,toggleNode:()=>rSe,toggleWrap:()=>nSe,undoInputRule:()=>iSe,unsetAllMarks:()=>sSe,unsetMark:()=>oSe,unsetTextDirection:()=>aSe,updateAttributes:()=>lSe,wrapIn:()=>cSe,wrapInList:()=>uSe});var Dxe=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var r;t.isDestroyed||(e.dom.blur(),(r=window==null?void 0:window.getSelection())==null||r.removeAllRanges())}),!0),$xe=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),Fxe=()=>({state:t,tr:e,dispatch:r})=>{const{selection:n}=e,{ranges:i}=n;return r&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:u,mapping:d}=e,h=u.resolve(d.map(l)),f=u.resolve(d.map(l+a.nodeSize)),p=h.blockRange(f);if(!p)return;const m=Rh(p);if(a.type.isTextblock){const{defaultType:g}=h.parent.contentMatchAt(h.index());e.setNodeMarkup(p.start,g)}(m||m===0)&&e.lift(p,m)})}),!0},qxe=t=>e=>t(e),Lxe=()=>({state:t,dispatch:e})=>Die(t,e),Bxe=(t,e)=>({editor:r,tr:n})=>{const{state:i}=r,s=i.doc.slice(t.from,t.to);n.deleteRange(t.from,t.to);const o=n.mapping.map(e);return n.insert(o,s.content),n.setSelection(new Be(n.doc.resolve(Math.max(o-1,0)))),!0},zxe=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,n=r.$anchor.node();if(n.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===n.type){if(e){const a=i.before(s),l=i.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1};function Nr(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var Wxe=t=>({tr:e,state:r,dispatch:n})=>{const i=Nr(t,r.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(n){const l=s.before(o),u=s.after(o);e.delete(l,u).scrollIntoView()}return!0}return!1},Vxe=t=>({tr:e,dispatch:r})=>{const{from:n,to:i}=t;return r&&e.delete(n,i),!0},Uxe=()=>({state:t,dispatch:e})=>OA(t,e),Hxe=()=>({commands:t})=>t.keyboardShortcut("Enter"),Kxe=()=>({state:t,dispatch:e})=>Pbe(t,e);function UA(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Hv(t,e,r={strict:!0}){const n=Object.keys(e);return n.length?n.every(i=>r.strict?e[i]===t[i]:UA(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function Ese(t,e,r={}){return t.find(n=>n.type===e&&Hv(Object.fromEntries(Object.keys(r).map(i=>[i,n.attrs[i]])),r))}function dF(t,e,r={}){return!!Ese(t,e,r)}function HA(t,e,r){var n;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(d=>d.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(d=>d.type===e)||(r=r||((n=i.node.marks[0])==null?void 0:n.attrs),!Ese([...i.node.marks],e,r)))return;let o=i.index,a=t.start()+i.offset,l=o+1,u=a+i.node.nodeSize;for(;o>0&&dF([...t.parent.child(o-1).marks],e,r);)o-=1,a-=t.parent.child(o).nodeSize;for(;l<t.parent.childCount&&dF([...t.parent.child(l).marks],e,r);)u+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:u}}function ta(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var Gxe=(t,e={})=>({tr:r,state:n,dispatch:i})=>{const s=ta(t,n.schema),{doc:o,selection:a}=r,{$from:l,from:u,to:d}=a;if(i){const h=HA(l,s,e);if(h&&h.from<=u&&h.to>=d){const f=Be.create(o,h.from,h.to);r.setSelection(f)}}return!0},Yxe=t=>e=>{const r=typeof t=="function"?t(e):t;for(let n=0;n<r.length;n+=1)if(r[n](e))return!0;return!1};function _se(t){return t instanceof Be}function nc(t=0,e=0,r=0){return Math.min(Math.max(t,e),r)}function Nse(t,e=null){if(!e)return null;const r=Xe.atStart(t),n=Xe.atEnd(t);if(e==="start"||e===!0)return r;if(e==="end")return n;const i=r.from,s=n.to;return e==="all"?Be.create(t,nc(0,i,s),nc(t.content.size,i,s)):Be.create(t,nc(e,i,s),nc(e,i,s))}function hF(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Kv(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Qxe(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var Xxe=(t=null,e={})=>({editor:r,view:n,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(Kv()||hF())&&n.dom.focus(),Qxe()&&!Kv()&&!hF()&&n.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{r.isDestroyed||(n.focus(),e!=null&&e.scrollIntoView&&r.commands.scrollIntoView())})};if(n.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!_se(r.state.selection))return o(),!0;const a=Nse(i.doc,t)||r.state.selection,l=r.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},Jxe=(t,e)=>r=>t.every((n,i)=>e(n,{...r,index:i})),Zxe=(t,e)=>({tr:r,commands:n})=>n.insertContentAt({from:r.selection.from,to:r.selection.to},t,e),Cse=t=>{const e=t.childNodes;for(let r=e.length-1;r>=0;r-=1){const n=e[r];n.nodeType===3&&n.nodeValue&&/^(\n\s\s|\n)$/.test(n.nodeValue)?t.removeChild(n):n.nodeType===1&&Cse(n)}return t};function ny(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,r=new window.DOMParser().parseFromString(e,"text/html").body;return Cse(r)}function Jp(t,e,r){if(t instanceof nl||t instanceof te)return t;r={slice:!0,parseOptions:{},...r};const n=typeof t=="object"&&t!==null,i=typeof t=="string";if(n)try{if(Array.isArray(t)&&t.length>0)return te.fromArray(t.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(t);return r.errorOnInvalidContent&&o.check(),o}catch(s){if(r.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),Jp("",e,r)}if(i){if(r.errorOnInvalidContent){let o=!1,a="";const l=new cie({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(o=!0,a=typeof u=="string"?u:u.outerHTML,null)}]}})});if(r.slice?il.fromSchema(l).parseSlice(ny(t),r.parseOptions):il.fromSchema(l).parse(ny(t),r.parseOptions),r.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=il.fromSchema(e);return r.slice?s.parseSlice(ny(t),r.parseOptions).content:s.parse(ny(t),r.parseOptions)}return Jp("",e,r)}function ewe(t,e,r){const n=t.steps.length-1;if(n<e)return;const i=t.steps[n];if(!(i instanceof Wr||i instanceof Hr))return;const s=t.mapping.maps[n];let o=0;s.forEach((a,l,u,d)=>{o===0&&(o=d)}),t.setSelection(Xe.near(t.doc.resolve(o),r))}var twe=t=>!("type"in t),rwe=(t,e,r)=>({tr:n,dispatch:i,editor:s})=>{var o;if(i){r={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...r};let a;const l=y=>{s.emit("contentError",{editor:s,error:y,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},u={preserveWhitespace:"full",...r.parseOptions};if(!r.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{Jp(e,s.schema,{parseOptions:u,errorOnInvalidContent:!0})}catch(y){l(y)}try{a=Jp(e,s.schema,{parseOptions:u,errorOnInvalidContent:(o=r.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(y){return l(y),!1}let{from:d,to:h}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},f=!0,p=!0;if((twe(a)?a:[a]).forEach(y=>{y.check(),f=f?y.isText&&y.marks.length===0:!1,p=p?y.isBlock:!1}),d===h&&p){const{parent:y}=n.doc.resolve(d);y.isTextblock&&!y.type.spec.code&&!y.childCount&&(d-=1,h+=1)}let g;if(f){if(Array.isArray(e))g=e.map(y=>y.text||"").join("");else if(e instanceof te){let y="";e.forEach(v=>{v.text&&(y+=v.text)}),g=y}else typeof e=="object"&&e&&e.text?g=e.text:g=e;n.insertText(g,d,h)}else{g=a;const y=n.doc.resolve(d),v=y.node(),b=y.parentOffset===0,w=v.isText||v.isTextblock,x=v.content.size>0;b&&w&&x&&(d=Math.max(0,d-1)),n.replaceWith(d,h,g)}r.updateSelection&&ewe(n,n.steps.length-1,-1),r.applyInputRules&&n.setMeta("applyInputRules",{from:d,text:g}),r.applyPasteRules&&n.setMeta("applyPasteRules",{from:d,text:g})}return!0},nwe=()=>({state:t,dispatch:e})=>jbe(t,e),iwe=()=>({state:t,dispatch:e})=>Tbe(t,e),swe=()=>({state:t,dispatch:e})=>Tie(t,e),owe=()=>({state:t,dispatch:e})=>Rie(t,e),awe=()=>({state:t,dispatch:e,tr:r})=>{try{const n=Sb(t.doc,t.selection.$from.pos,-1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},lwe=()=>({state:t,dispatch:e,tr:r})=>{try{const n=Sb(t.doc,t.selection.$from.pos,1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},cwe=()=>({state:t,dispatch:e})=>Cbe(t,e),uwe=()=>({state:t,dispatch:e})=>kbe(t,e);function kse(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function dwe(t){const e=t.split(/-(?!$)/);let r=e[e.length-1];r==="Space"&&(r=" ");let n,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))Kv()||kse()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return n&&(r=`Alt-${r}`),i&&(r=`Ctrl-${r}`),o&&(r=`Meta-${r}`),s&&(r=`Shift-${r}`),r}var hwe=t=>({editor:e,view:r,tr:n,dispatch:i})=>{const s=dwe(t).split(/-(?!$)/),o=s.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{r.someProp("handleKeyDown",u=>u(r,a))});return l==null||l.steps.forEach(u=>{const d=u.map(n.mapping);d&&i&&n.maybeStep(d)}),!0};function xl(t,e,r={}){const{from:n,to:i,empty:s}=t.selection,o=e?Nr(e,t.schema):null,a=[];t.doc.nodesBetween(n,i,(h,f)=>{if(h.isText)return;const p=Math.max(n,f),m=Math.min(i,f+h.nodeSize);a.push({node:h,from:p,to:m})});const l=i-n,u=a.filter(h=>o?o.name===h.node.type.name:!0).filter(h=>Hv(h.node.attrs,r,{strict:!1}));return s?!!u.length:u.reduce((h,f)=>h+f.to-f.from,0)>=l}var fwe=(t,e={})=>({state:r,dispatch:n})=>{const i=Nr(t,r.schema);return xl(r,i,e)?Obe(r,n):!1},pwe=()=>({state:t,dispatch:e})=>$ie(t,e),mwe=t=>({state:e,dispatch:r})=>{const n=Nr(t,e.schema);return zbe(n)(e,r)},gwe=()=>({state:t,dispatch:e})=>Aie(t,e);function Ob(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function fF(t,e){const r=typeof e=="string"?[e]:e;return Object.keys(t).reduce((n,i)=>(r.includes(i)||(n[i]=t[i]),n),{})}var ywe=(t,e)=>({tr:r,state:n,dispatch:i})=>{let s=null,o=null;const a=Ob(typeof t=="string"?t:t.name,n.schema);if(!a)return!1;a==="node"&&(s=Nr(t,n.schema)),a==="mark"&&(o=ta(t,n.schema));let l=!1;return r.selection.ranges.forEach(u=>{n.doc.nodesBetween(u.$from.pos,u.$to.pos,(d,h)=>{s&&s===d.type&&(l=!0,i&&r.setNodeMarkup(h,void 0,fF(d.attrs,e))),o&&d.marks.length&&d.marks.forEach(f=>{o===f.type&&(l=!0,i&&r.addMark(h,h+d.nodeSize,o.create(fF(f.attrs,e))))})})}),l},vwe=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),bwe=()=>({tr:t,dispatch:e})=>{if(e){const r=new Ei(t.doc);t.setSelection(r)}return!0},xwe=()=>({state:t,dispatch:e})=>Pie(t,e),wwe=()=>({state:t,dispatch:e})=>Mie(t,e),Swe=()=>({state:t,dispatch:e})=>Mbe(t,e),Ewe=()=>({state:t,dispatch:e})=>$be(t,e),_we=()=>({state:t,dispatch:e})=>Dbe(t,e);function yR(t,e,r={},n={}){return Jp(t,e,{slice:!1,parseOptions:r,errorOnInvalidContent:n.errorOnInvalidContent})}var Nwe=(t,{errorOnInvalidContent:e,emitUpdate:r=!0,parseOptions:n={}}={})=>({editor:i,tr:s,dispatch:o,commands:a})=>{const{doc:l}=s;if(n.preserveWhitespace!=="full"){const u=yR(t,i.schema,n,{errorOnInvalidContent:e??i.options.enableContentCheck});return o&&s.replaceWith(0,l.content.size,u).setMeta("preventUpdate",!r),!0}return o&&s.setMeta("preventUpdate",!r),a.insertContentAt({from:0,to:l.content.size},t,{parseOptions:n,errorOnInvalidContent:e??i.options.enableContentCheck})};function jse(t,e){const r=ta(e,t.schema),{from:n,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(n,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===r.name);return a?{...a.attrs}:{}}function Tse(t,e){const r=new Nie(t);return e.forEach(n=>{n.steps.forEach(i=>{r.step(i)})}),r}function Cwe(t){for(let e=0;e<t.edgeCount;e+=1){const{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function kwe(t,e,r){const n=[];return t.nodesBetween(e.from,e.to,(i,s)=>{r(i)&&n.push({node:i,pos:s})}),n}function jwe(t,e){for(let r=t.depth;r>0;r-=1){const n=t.node(r);if(e(n))return{pos:r>0?t.before(r):0,start:t.start(r),depth:r,node:n}}}function Pb(t){return e=>jwe(e.$from,t)}function Oe(t,e,r){return t.config[e]===void 0&&t.parent?Oe(t.parent,e,r):typeof t.config[e]=="function"?t.config[e].bind({...r,parent:t.parent?Oe(t.parent,e,r):null}):t.config[e]}function KA(t){return t.map(e=>{const r={name:e.name,options:e.options,storage:e.storage},n=Oe(e,"addExtensions",r);return n?[e,...KA(n())]:e}).flat(10)}function GA(t,e){const r=cu.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(r),i.innerHTML}function Ose(t){return typeof t=="function"}function bt(t,e=void 0,...r){return Ose(t)?e?t.bind(e)(...r):t(...r):t}function Twe(t={}){return Object.keys(t).length===0&&t.constructor===Object}function ch(t){const e=t.filter(i=>i.type==="extension"),r=t.filter(i=>i.type==="node"),n=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:r,markExtensions:n}}function Pse(t){const e=[],{nodeExtensions:r,markExtensions:n}=ch(t),i=[...r,...n],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:i},l=Oe(o,"addGlobalAttributes",a);if(!l)return;l().forEach(d=>{d.types.forEach(h=>{Object.entries(d.attributes).forEach(([f,p])=>{e.push({type:h,name:f,attribute:{...s,...p}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=Oe(o,"addAttributes",a);if(!l)return;const u=l();Object.entries(u).forEach(([d,h])=>{const f={...s,...h};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:o.name,name:d,attribute:f})})}),e}function Cr(...t){return t.filter(e=>!!e).reduce((e,r)=>{const n={...e};return Object.entries(r).forEach(([i,s])=>{if(!n[i]){n[i]=s;return}if(i==="class"){const a=s?String(s).split(" "):[],l=n[i]?n[i].split(" "):[],u=a.filter(d=>!l.includes(d));n[i]=[...l,...u].join(" ")}else if(i==="style"){const a=s?s.split(";").map(d=>d.trim()).filter(Boolean):[],l=n[i]?n[i].split(";").map(d=>d.trim()).filter(Boolean):[],u=new Map;l.forEach(d=>{const[h,f]=d.split(":").map(p=>p.trim());u.set(h,f)}),a.forEach(d=>{const[h,f]=d.split(":").map(p=>p.trim());u.set(h,f)}),n[i]=Array.from(u.entries()).map(([d,h])=>`${d}: ${h}`).join("; ")}else n[i]=s}),n},{})}function Zp(t,e){return e.filter(r=>r.type===t.type.name).filter(r=>r.attribute.rendered).map(r=>r.attribute.renderHTML?r.attribute.renderHTML(t.attrs)||{}:{[r.name]:t.attrs[r.name]}).reduce((r,n)=>Cr(r,n),{})}function Owe(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function pF(t,e){return"style"in t?t:{...t,getAttrs:r=>{const n=t.getAttrs?t.getAttrs(r):t.attrs;if(n===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(r):Owe(r.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...n,...i}}}}function mF(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>e==="attrs"&&Twe(r)?!1:r!=null))}function gF(t){var e,r;const n={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&"default"in((t==null?void 0:t.attribute)||{})&&(n.default=t.attribute.default),((r=t==null?void 0:t.attribute)==null?void 0:r.validate)!==void 0&&(n.validate=t.attribute.validate),[t.name,n]}function Pwe(t,e){var r;const n=Pse(t),{nodeExtensions:i,markExtensions:s}=ch(t),o=(r=i.find(u=>Oe(u,"topNode")))==null?void 0:r.name,a=Object.fromEntries(i.map(u=>{const d=n.filter(v=>v.type===u.name),h={name:u.name,options:u.options,storage:u.storage,editor:e},f=t.reduce((v,b)=>{const w=Oe(b,"extendNodeSchema",h);return{...v,...w?w(u):{}}},{}),p=mF({...f,content:bt(Oe(u,"content",h)),marks:bt(Oe(u,"marks",h)),group:bt(Oe(u,"group",h)),inline:bt(Oe(u,"inline",h)),atom:bt(Oe(u,"atom",h)),selectable:bt(Oe(u,"selectable",h)),draggable:bt(Oe(u,"draggable",h)),code:bt(Oe(u,"code",h)),whitespace:bt(Oe(u,"whitespace",h)),linebreakReplacement:bt(Oe(u,"linebreakReplacement",h)),defining:bt(Oe(u,"defining",h)),isolating:bt(Oe(u,"isolating",h)),attrs:Object.fromEntries(d.map(gF))}),m=bt(Oe(u,"parseHTML",h));m&&(p.parseDOM=m.map(v=>pF(v,d)));const g=Oe(u,"renderHTML",h);g&&(p.toDOM=v=>g({node:v,HTMLAttributes:Zp(v,d)}));const y=Oe(u,"renderText",h);return y&&(p.toText=y),[u.name,p]})),l=Object.fromEntries(s.map(u=>{const d=n.filter(y=>y.type===u.name),h={name:u.name,options:u.options,storage:u.storage,editor:e},f=t.reduce((y,v)=>{const b=Oe(v,"extendMarkSchema",h);return{...y,...b?b(u):{}}},{}),p=mF({...f,inclusive:bt(Oe(u,"inclusive",h)),excludes:bt(Oe(u,"excludes",h)),group:bt(Oe(u,"group",h)),spanning:bt(Oe(u,"spanning",h)),code:bt(Oe(u,"code",h)),attrs:Object.fromEntries(d.map(gF))}),m=bt(Oe(u,"parseHTML",h));m&&(p.parseDOM=m.map(y=>pF(y,d)));const g=Oe(u,"renderHTML",h);return g&&(p.toDOM=y=>g({mark:y,HTMLAttributes:Zp(y,d)})),[u.name,p]}));return new cie({topNode:o,nodes:a,marks:l})}function Iwe(t){const e=t.filter((r,n)=>t.indexOf(r)!==n);return Array.from(new Set(e))}function Gv(t){return t.sort((r,n)=>{const i=Oe(r,"priority")||100,s=Oe(n,"priority")||100;return i>s?-1:i<s?1:0})}function Ise(t){const e=Gv(KA(t)),r=Iwe(e.map(n=>n.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(n=>`'${n}'`).join(", ")}]. This can lead to issues.`),e}function Rse(t,e,r){const{from:n,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=r||{};let a="";return t.nodesBetween(n,i,(l,u,d,h)=>{var f;l.isBlock&&u>n&&(a+=s);const p=o==null?void 0:o[l.type.name];if(p)return d&&(a+=p({node:l,pos:u,parent:d,index:h,range:e})),!1;l.isText&&(a+=(f=l==null?void 0:l.text)==null?void 0:f.slice(Math.max(n,u)-u,i-u))}),a}function Rwe(t,e){const r={from:0,to:t.content.size};return Rse(t,r,e)}function Mse(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,r])=>[e,r.spec.toText]))}function Mwe(t,e){const r=Nr(e,t.schema),{from:n,to:i}=t.selection,s=[];t.doc.nodesBetween(n,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===r.name);return o?{...o.attrs}:{}}function Ase(t,e){const r=Ob(typeof e=="string"?e:e.name,t.schema);return r==="node"?Mwe(t,e):r==="mark"?jse(t,e):{}}function Awe(t,e=JSON.stringify){const r={};return t.filter(n=>{const i=e(n);return Object.prototype.hasOwnProperty.call(r,i)?!1:r[i]=!0})}function Dwe(t){const e=Awe(t);return e.length===1?e:e.filter((r,n)=>!e.filter((s,o)=>o!==n).some(s=>r.oldRange.from>=s.oldRange.from&&r.oldRange.to<=s.oldRange.to&&r.newRange.from>=s.newRange.from&&r.newRange.to<=s.newRange.to))}function Dse(t){const{mapping:e,steps:r}=t,n=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=r[s];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const u=e.slice(s).map(a,-1),d=e.slice(s).map(l),h=e.invert().map(u,-1),f=e.invert().map(d);n.push({oldRange:{from:h,to:f},newRange:{from:u,to:d}})})}),Dwe(n)}function YA(t,e,r){const n=[];return t===e?r.resolve(t).marks().forEach(i=>{const s=r.resolve(t),o=HA(s,i.type);o&&n.push({mark:i,...o})}):r.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||n.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),n}var $we=(t,e,r,n=20)=>{const i=t.doc.resolve(r);let s=n,o=null;for(;s>0&&o===null;){const a=i.node(s);(a==null?void 0:a.type.name)===e?o=a:s-=1}return[o,s]};function iy(t,e){return e.nodes[t]||e.marks[t]||null}function zy(t,e,r){return Object.fromEntries(Object.entries(r).filter(([n])=>{const i=t.find(s=>s.type===e&&s.name===n);return i?i.attribute.keepOnSplit:!1}))}var Fwe=(t,e=500)=>{let r="";const n=t.parentOffset;return t.parent.nodesBetween(Math.max(0,n-e),n,(i,s,o,a)=>{var l,u;const d=((u=(l=i.type.spec).toText)==null?void 0:u.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";r+=i.isAtom&&!i.isText?d:d.slice(0,Math.max(0,n-s))}),r};function vR(t,e,r={}){const{empty:n,ranges:i}=t.selection,s=e?ta(e,t.schema):null;if(n)return!!(t.storedMarks||t.selection.$from.marks()).filter(h=>s?s.name===h.type.name:!0).find(h=>Hv(h.attrs,r,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:h,$to:f})=>{const p=h.pos,m=f.pos;t.doc.nodesBetween(p,m,(g,y)=>{if(!g.isText&&!g.marks.length)return;const v=Math.max(p,y),b=Math.min(m,y+g.nodeSize),w=b-v;o+=w,a.push(...g.marks.map(x=>({mark:x,from:v,to:b})))})}),o===0)return!1;const l=a.filter(h=>s?s.name===h.mark.type.name:!0).filter(h=>Hv(h.mark.attrs,r,{strict:!1})).reduce((h,f)=>h+f.to-f.from,0),u=a.filter(h=>s?h.mark.type!==s&&h.mark.type.excludes(s):!0).reduce((h,f)=>h+f.to-f.from,0);return(l>0?l+u:l)>=o}function qwe(t,e,r={}){if(!e)return xl(t,null,r)||vR(t,null,r);const n=Ob(e,t.schema);return n==="node"?xl(t,e,r):n==="mark"?vR(t,e,r):!1}var Lwe=(t,e)=>{const{$from:r,$to:n,$anchor:i}=t.selection;if(e){const s=Pb(a=>a.type.name===e)(t.selection);if(!s)return!1;const o=t.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(n.parentOffset<n.parent.nodeSize-2||r.pos!==n.pos)},Bwe=t=>{const{$from:e,$to:r}=t.selection;return!(e.parentOffset>0||e.pos!==r.pos)};function yF(t,e){return Array.isArray(e)?e.some(r=>(typeof r=="string"?r:r.name)===t.name):e}function vF(t,e){const{nodeExtensions:r}=ch(e),n=r.find(o=>o.name===t);if(!n)return!1;const i={name:n.name,options:n.options,storage:n.storage},s=bt(Oe(n,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function Ib(t,{checkChildren:e=!0,ignoreWhitespace:r=!1}={}){var n;if(r){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((n=t.text)!=null?n:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(Ib(s,{ignoreWhitespace:r,checkChildren:e})||(i=!1))}),i}return!1}function $se(t){return t instanceof Re}var Fse=class qse{constructor(e){this.position=e}static fromJSON(e){return new qse(e.position)}toJSON(){return{position:this.position}}};function zwe(t,e){const r=e.mapping.mapResult(t.position);return{position:new Fse(r.pos),mapResult:r}}function Wwe(t){return new Fse(t)}function Vwe(t,e,r){var n;const{selection:i}=e;let s=null;if(_se(i)&&(s=i.$cursor),s){const a=(n=t.storedMarks)!=null?n:s.marks();return s.parent.type.allowsMarkType(r)&&(!!r.isInSet(a)||!a.some(u=>u.type.excludes(r)))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let u=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(r):!1;return t.doc.nodesBetween(a.pos,l.pos,(d,h,f)=>{if(u)return!1;if(d.isInline){const p=!f||f.type.allowsMarkType(r),m=!!r.isInSet(d.marks)||!d.marks.some(g=>g.type.excludes(r));u=p&&m}return!u}),u})}var Uwe=(t,e={})=>({tr:r,state:n,dispatch:i})=>{const{selection:s}=r,{empty:o,ranges:a}=s,l=ta(t,n.schema);if(i)if(o){const u=jse(n,l);r.addStoredMark(l.create({...u,...e}))}else a.forEach(u=>{const d=u.$from.pos,h=u.$to.pos;n.doc.nodesBetween(d,h,(f,p)=>{const m=Math.max(p,d),g=Math.min(p+f.nodeSize,h);f.marks.find(v=>v.type===l)?f.marks.forEach(v=>{l===v.type&&r.addMark(m,g,l.create({...v.attrs,...e}))}):r.addMark(m,g,l.create(e))})});return Vwe(n,r,l)},Hwe=(t,e)=>({tr:r})=>(r.setMeta(t,e),!0),Kwe=(t,e={})=>({state:r,dispatch:n,chain:i})=>{const s=Nr(t,r.schema);let o;return r.selection.$anchor.sameParent(r.selection.$head)&&(o=r.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:a})=>P3(s,{...o,...e})(r)?!0:a.clearNodes()).command(({state:a})=>P3(s,{...o,...e})(a,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Gwe=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,i=nc(t,0,n.content.size),s=Re.create(n,i);e.setSelection(s)}return!0},Ywe=(t,e)=>({tr:r,state:n,dispatch:i})=>{const{selection:s}=n;let o,a;return typeof e=="number"?(o=e,a=e):e&&"from"in e&&"to"in e?(o=e.from,a=e.to):(o=s.from,a=s.to),i&&r.doc.nodesBetween(o,a,(l,u)=>{l.isText||r.setNodeMarkup(u,void 0,{...l.attrs,dir:t})}),!0},Qwe=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=Be.atStart(n).from,a=Be.atEnd(n).to,l=nc(i,o,a),u=nc(s,o,a),d=Be.create(n,l,u);e.setSelection(d)}return!0},Xwe=t=>({state:e,dispatch:r})=>{const n=Nr(t,e.schema);return Ube(n)(e,r)};function bF(t,e){const r=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(r){const n=r.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(n)}}var Jwe=({keepMarks:t=!0}={})=>({tr:e,state:r,dispatch:n,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,u=i.extensionManager.attributes,d=zy(u,a.node().type.name,a.node().attrs);if(s instanceof Re&&s.node.isBlock)return!a.parentOffset||!Ro(o,a.pos)?!1:(n&&(t&&bF(r,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const h=l.parentOffset===l.parent.content.size,f=a.depth===0?void 0:Cwe(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=h&&f?[{type:f,attrs:d}]:void 0,m=Ro(e.doc,e.mapping.map(a.pos),1,p);if(!p&&!m&&Ro(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(m=!0,p=f?[{type:f,attrs:d}]:void 0),n){if(m&&(s instanceof Be&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,p),f&&!h&&!a.parentOffset&&a.parent.type!==f)){const g=e.mapping.map(a.before()),y=e.doc.resolve(g);a.node(-1).canReplaceWith(y.index(),y.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}t&&bF(r,i.extensionManager.splittableMarks),e.scrollIntoView()}return m},Zwe=(t,e={})=>({tr:r,state:n,dispatch:i,editor:s})=>{var o;const a=Nr(t,n.schema),{$from:l,$to:u}=n.selection,d=n.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(u))return!1;const h=l.node(-1);if(h.type!==a)return!1;const f=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let v=te.empty;const b=l.index(-1)?1:l.index(-2)?2:3;for(let _=l.depth-b;_>=l.depth-3;_-=1)v=te.from(l.node(_).copy(v));const w=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,x={...zy(f,l.node().type.name,l.node().attrs),...e},S=((o=a.contentMatch.defaultType)==null?void 0:o.createAndFill(x))||void 0;v=v.append(te.from(a.createAndFill(null,S)||void 0));const E=l.before(l.depth-(b-1));r.replace(E,l.after(-w),new xe(v,4-b,0));let N=-1;r.doc.nodesBetween(E,r.doc.content.size,(_,k)=>{if(N>-1)return!1;_.isTextblock&&_.content.size===0&&(N=k+1)}),N>-1&&r.setSelection(Be.near(r.doc.resolve(N))),r.scrollIntoView()}return!0}const p=u.pos===l.end()?h.contentMatchAt(0).defaultType:null,m={...zy(f,h.type.name,h.attrs),...e},g={...zy(f,l.node().type.name,l.node().attrs),...e};r.delete(l.pos,u.pos);const y=p?[{type:a,attrs:m},{type:p,attrs:g}]:[{type:a,attrs:m}];if(!Ro(r.doc,l.pos,2))return!1;if(i){const{selection:v,storedMarks:b}=n,{splittableMarks:w}=s.extensionManager,x=b||v.$to.parentOffset&&v.$from.marks();if(r.split(l.pos,2,y).scrollIntoView(),!x||!i)return!0;const S=x.filter(E=>w.includes(E.type.name));r.ensureMarks(S)}return!0},Ax=(t,e)=>{const r=Pb(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(Math.max(0,r.pos-1)).before(r.depth);if(n===void 0)return!0;const i=t.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&kl(t.doc,r.pos)&&t.join(r.pos),!0},Dx=(t,e)=>{const r=Pb(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(r.start).after(r.depth);if(n===void 0)return!0;const i=t.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&kl(t.doc,n)&&t.join(n),!0},eSe=(t,e,r,n={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:u,can:d})=>{const{extensions:h,splittableMarks:f}=i.extensionManager,p=Nr(t,o.schema),m=Nr(e,o.schema),{selection:g,storedMarks:y}=o,{$from:v,$to:b}=g,w=v.blockRange(b),x=y||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;const S=Pb(E=>vF(E.type.name,h))(g);if(w.depth>=1&&S&&w.depth-S.depth<=1){if(S.node.type===p)return u.liftListItem(m);if(vF(S.node.type.name,h)&&p.validContent(S.node.content)&&a)return l().command(()=>(s.setNodeMarkup(S.pos,p),!0)).command(()=>Ax(s,p)).command(()=>Dx(s,p)).run()}return!r||!x||!a?l().command(()=>d().wrapInList(p,n)?!0:u.clearNodes()).wrapInList(p,n).command(()=>Ax(s,p)).command(()=>Dx(s,p)).run():l().command(()=>{const E=d().wrapInList(p,n),N=x.filter(_=>f.includes(_.type.name));return s.ensureMarks(N),E?!0:u.clearNodes()}).wrapInList(p,n).command(()=>Ax(s,p)).command(()=>Dx(s,p)).run()},tSe=(t,e={},r={})=>({state:n,commands:i})=>{const{extendEmptyMarkRange:s=!1}=r,o=ta(t,n.schema);return vR(n,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},rSe=(t,e,r={})=>({state:n,commands:i})=>{const s=Nr(t,n.schema),o=Nr(e,n.schema),a=xl(n,s,r);let l;return n.selection.$anchor.sameParent(n.selection.$head)&&(l=n.selection.$anchor.parent.attrs),a?i.setNode(o,l):i.setNode(s,{...l,...r})},nSe=(t,e={})=>({state:r,commands:n})=>{const i=Nr(t,r.schema);return xl(r,i,e)?n.lift(i):n.wrapIn(i,e)},iSe=()=>({state:t,dispatch:e})=>{const r=t.plugins;for(let n=0;n<r.length;n+=1){const i=r[n];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},sSe=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,{empty:n,ranges:i}=r;return n||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},oSe=(t,e={})=>({tr:r,state:n,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=r,l=ta(t,n.schema),{$from:u,empty:d,ranges:h}=a;if(!i)return!0;if(d&&o){let{from:f,to:p}=a;const m=(s=u.marks().find(y=>y.type===l))==null?void 0:s.attrs,g=HA(u,l,m);g&&(f=g.from,p=g.to),r.removeMark(f,p,l)}else h.forEach(f=>{r.removeMark(f.$from.pos,f.$to.pos,l)});return r.removeStoredMark(l),!0},aSe=t=>({tr:e,state:r,dispatch:n})=>{const{selection:i}=r;let s,o;return typeof t=="number"?(s=t,o=t):t&&"from"in t&&"to"in t?(s=t.from,o=t.to):(s=i.from,o=i.to),n&&e.doc.nodesBetween(s,o,(a,l)=>{if(a.isText)return;const u={...a.attrs};delete u.dir,e.setNodeMarkup(l,void 0,u)}),!0},lSe=(t,e={})=>({tr:r,state:n,dispatch:i})=>{let s=null,o=null;const a=Ob(typeof t=="string"?t:t.name,n.schema);if(!a)return!1;a==="node"&&(s=Nr(t,n.schema)),a==="mark"&&(o=ta(t,n.schema));let l=!1;return r.selection.ranges.forEach(u=>{const d=u.$from.pos,h=u.$to.pos;let f,p,m,g;r.selection.empty?n.doc.nodesBetween(d,h,(y,v)=>{s&&s===y.type&&(l=!0,m=Math.max(v,d),g=Math.min(v+y.nodeSize,h),f=v,p=y)}):n.doc.nodesBetween(d,h,(y,v)=>{v<d&&s&&s===y.type&&(l=!0,m=Math.max(v,d),g=Math.min(v+y.nodeSize,h),f=v,p=y),v>=d&&v<=h&&(s&&s===y.type&&(l=!0,i&&r.setNodeMarkup(v,void 0,{...y.attrs,...e})),o&&y.marks.length&&y.marks.forEach(b=>{if(o===b.type&&(l=!0,i)){const w=Math.max(v,d),x=Math.min(v+y.nodeSize,h);r.addMark(w,x,o.create({...b.attrs,...e}))}}))}),p&&(f!==void 0&&i&&r.setNodeMarkup(f,void 0,{...p.attrs,...e}),o&&p.marks.length&&p.marks.forEach(y=>{o===y.type&&i&&r.addMark(m,g,o.create({...y.attrs,...e}))}))}),l},cSe=(t,e={})=>({state:r,dispatch:n})=>{const i=Nr(t,r.schema);return Fbe(i,e)(r,n)},uSe=(t,e={})=>({state:r,dispatch:n})=>{const i=Nr(t,r.schema);return qbe(i,e)(r,n)},dSe=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const r=this.callbacks[t];return r&&r.forEach(n=>n.apply(this,e)),this}off(t,e){const r=this.callbacks[t];return r&&(e?this.callbacks[t]=r.filter(n=>n!==e):delete this.callbacks[t]),this}once(t,e){const r=(...n)=>{this.off(t,r),e.apply(this,n)};return this.on(t,r)}removeAllListeners(){this.callbacks={}}},Rb=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},hSe=(t,e)=>{if(UA(e))return e.exec(t);const r=e(t);if(!r)return null;const n=[r.text];return n.index=r.index,n.input=t,n.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(r.replaceWith)),n};function sy(t){var e;const{editor:r,from:n,to:i,text:s,rules:o,plugin:a}=t,{view:l}=r;if(l.composing)return!1;const u=l.state.doc.resolve(n);if(u.parent.type.spec.code||(e=u.nodeBefore||u.nodeAfter)!=null&&e.marks.find(f=>f.type.spec.code))return!1;let d=!1;const h=Fwe(u)+s;return o.forEach(f=>{if(d)return;const p=hSe(h,f.find);if(!p)return;const m=l.state.tr,g=jb({state:l.state,transaction:m}),y={from:n-(p[0].length-s.length),to:i},{commands:v,chain:b,can:w}=new Tb({editor:r,state:g});f.handler({state:g,range:y,match:p,commands:v,chain:b,can:w})===null||!m.steps.length||(f.undoable&&m.setMeta(a,{transform:m,from:n,to:i,text:s}),l.dispatch(m),d=!0)}),d}function fSe(t){const{editor:e,rules:r}=t,n=new Xt({state:{init(){return null},apply(i,s,o){const a=i.getMeta(n);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:d}=l;typeof d=="string"?d=d:d=GA(te.from(d),o.schema);const{from:h}=l,f=h+d.length;sy({editor:e,from:h,to:f,text:d,rules:r,plugin:n})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return sy({editor:e,from:s,to:o,text:a,rules:r,plugin:n})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&sy({editor:e,from:s.pos,to:s.pos,text:"",rules:r,plugin:n})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?sy({editor:e,from:o.pos,to:o.pos,text:`
`,rules:r,plugin:n}):!1}},isInputRules:!0});return n}function pSe(t){return Object.prototype.toString.call(t).slice(8,-1)}function oy(t){return pSe(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Lse(t,e){const r={...t};return oy(t)&&oy(e)&&Object.keys(e).forEach(n=>{oy(e[n])&&oy(t[n])?r[n]=Lse(t[n],e[n]):r[n]=e[n]}),r}var QA=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...bt(Oe(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...bt(Oe(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>Lse(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},uu=class Bse extends QA{constructor(){super(...arguments),this.type="mark"}static create(e={}){const r=typeof e=="function"?e():e;return new Bse(r)}static handleExit({editor:e,mark:r}){const{tr:n}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(u=>(u==null?void 0:u.type.name)===r.name))return!1;const l=o.find(u=>(u==null?void 0:u.type.name)===r.name);return l&&n.removeStoredMark(l),n.insertText(" ",i.pos),e.view.dispatch(n),!0}return!1}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function mSe(t){return typeof t=="number"}var gSe=class{constructor(t){this.find=t.find,this.handler=t.handler}},ySe=(t,e,r)=>{if(UA(e))return[...t.matchAll(e)];const n=e(t,r);return n?n.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function vSe(t){const{editor:e,state:r,from:n,to:i,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:u,can:d}=new Tb({editor:e,state:r}),h=[];return r.doc.nodesBetween(n,i,(p,m)=>{var g,y,v,b,w;if((y=(g=p.type)==null?void 0:g.spec)!=null&&y.code||!(p.isText||p.isTextblock||p.isInline))return;const x=(w=(b=(v=p.content)==null?void 0:v.size)!=null?b:p.nodeSize)!=null?w:0,S=Math.max(n,m),E=Math.min(i,m+x);if(S>=E)return;const N=p.isText?p.text||"":p.textBetween(S-m,E-m,void 0,"");ySe(N,s.find,o).forEach(k=>{if(k.index===void 0)return;const j=S+k.index+1,T=j+k[0].length,P={from:r.tr.mapping.map(j),to:r.tr.mapping.map(T)},O=s.handler({state:r,range:P,match:k,commands:l,chain:u,can:d,pasteEvent:o,dropEvent:a});h.push(O)})}),h.every(p=>p!==null)}var ay=null,bSe=t=>{var e;const r=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=r.clipboardData)==null||e.setData("text/html",t),r};function xSe(t){const{editor:e,rules:r}=t;let n=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:d,from:h,to:f,rule:p,pasteEvt:m})=>{const g=d.tr,y=jb({state:d,transaction:g});if(!(!vSe({editor:e,state:y,from:Math.max(h-1,0),to:f.b-1,rule:p,pasteEvent:m,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return r.map(d=>new Xt({view(h){const f=m=>{var g;n=(g=h.dom.parentElement)!=null&&g.contains(m.target)?h.dom.parentElement:null,n&&(ay=e)},p=()=>{ay&&(ay=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(h,f)=>{if(s=n===h.dom.parentElement,a=f,!s){const p=ay;p!=null&&p.isEditable&&setTimeout(()=>{const m=p.state.selection;m&&p.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(h,f)=>{var p;const m=(p=f.clipboardData)==null?void 0:p.getData("text/html");return o=f,i=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(h,f,p)=>{const m=h[0],g=m.getMeta("uiEvent")==="paste"&&!i,y=m.getMeta("uiEvent")==="drop"&&!s,v=m.getMeta("applyPasteRules"),b=!!v;if(!g&&!y&&!b)return;if(b){let{text:S}=v;typeof S=="string"?S=S:S=GA(te.from(S),p.schema);const{from:E}=v,N=E+S.length,_=bSe(S);return l({rule:d,state:p,from:E,to:{b:N},pasteEvt:_})}const w=f.doc.content.findDiffStart(p.doc.content),x=f.doc.content.findDiffEnd(p.doc.content);if(!(!mSe(w)||!x||w===x.b))return l({rule:d,state:p,from:w,to:x,pasteEvt:o})}}))}var Mb=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=Ise(t),this.schema=Pwe(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:iy(e.name,this.schema)},n=Oe(e,"addCommands",r);return n?{...t,...n()}:t},{})}get plugins(){const{editor:t}=this;return Gv([...this.extensions].reverse()).flatMap(n=>{const i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:iy(n.name,this.schema)},s=[],o=Oe(n,"addKeyboardShortcuts",i);let a={};if(n.type==="mark"&&Oe(n,"exitable",i)&&(a.ArrowRight=()=>uu.handleExit({editor:t,mark:n})),o){const f=Object.fromEntries(Object.entries(o()).map(([p,m])=>[p,()=>m({editor:t})]));a={...a,...f}}const l=Mxe(a);s.push(l);const u=Oe(n,"addInputRules",i);if(yF(n,t.options.enableInputRules)&&u){const f=u();if(f&&f.length){const p=fSe({editor:t,rules:f}),m=Array.isArray(p)?p:[p];s.push(...m)}}const d=Oe(n,"addPasteRules",i);if(yF(n,t.options.enablePasteRules)&&d){const f=d();if(f&&f.length){const p=xSe({editor:t,rules:f});s.push(...p)}}const h=Oe(n,"addProseMirrorPlugins",i);if(h){const f=h();s.push(...f)}return s})}get attributes(){return Pse(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=ch(this.extensions);return Object.fromEntries(e.filter(r=>!!Oe(r,"addNodeView")).map(r=>{const n=this.attributes.filter(l=>l.type===r.name),i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:Nr(r.name,this.schema)},s=Oe(r,"addNodeView",i);if(!s)return[];const o=s();if(!o)return[];const a=(l,u,d,h,f)=>{const p=Zp(l,n);return o({node:l,view:u,getPos:d,decorations:h,innerDecorations:f,editor:t,extension:r,HTMLAttributes:p})};return[r.name,a]}))}dispatchTransaction(t){const{editor:e}=this;return Gv([...this.extensions].reverse()).reduceRight((n,i)=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:e,type:iy(i.name,this.schema)},o=Oe(i,"dispatchTransaction",s);return o?a=>{o.call(s,{transaction:a,next:n})}:n},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=ch(this.extensions);return Object.fromEntries(e.filter(r=>!!Oe(r,"addMarkView")).map(r=>{const n=this.attributes.filter(a=>a.type===r.name),i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:ta(r.name,this.schema)},s=Oe(r,"addMarkView",i);if(!s)return[];const o=(a,l,u)=>{const d=Zp(a,n);return s()({mark:a,view:l,inline:u,editor:t,extension:r,HTMLAttributes:d,updateAttributes:h=>{MSe(a,t,h)}})};return[r.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var r;const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:iy(e.name,this.schema)};e.type==="mark"&&((r=bt(Oe(e,"keepOnSplit",n)))==null||r)&&this.splittableMarks.push(e.name);const i=Oe(e,"onBeforeCreate",n),s=Oe(e,"onCreate",n),o=Oe(e,"onUpdate",n),a=Oe(e,"onSelectionUpdate",n),l=Oe(e,"onTransaction",n),u=Oe(e,"onFocus",n),d=Oe(e,"onBlur",n),h=Oe(e,"onDestroy",n);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),u&&this.editor.on("focus",u),d&&this.editor.on("blur",d),h&&this.editor.on("destroy",h)})}};Mb.resolve=Ise;Mb.sort=Gv;Mb.flatten=KA;var wSe={};VA(wSe,{ClipboardTextSerializer:()=>Wse,Commands:()=>Vse,Delete:()=>Use,Drop:()=>Hse,Editable:()=>Kse,FocusEvents:()=>Yse,Keymap:()=>Qse,Paste:()=>Xse,Tabindex:()=>Jse,TextDirection:()=>Zse,focusEventsPluginKey:()=>Gse});var mr=class zse extends QA{constructor(){super(...arguments),this.type="extension"}static create(e={}){const r=typeof e=="function"?e():e;return new zse(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}},Wse=mr.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Xt({key:new Fr("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:r}=t,{doc:n,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(d=>d.$from.pos)),a=Math.max(...s.map(d=>d.$to.pos)),l=Mse(r);return Rse(n,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),Vse=mr.create({name:"commands",addCommands(){return{...Sse}}}),Use=mr.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var r,n,i;const s=()=>{var o,a,l,u;if((u=(l=(a=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,t))!=null?u:t.getMeta("y-sync$"))return;const d=Tse(t.before,[t,...e]);Dse(d).forEach(p=>{d.mapping.mapResult(p.oldRange.from).deletedAfter&&d.mapping.mapResult(p.oldRange.to).deletedBefore&&d.before.nodesBetween(p.oldRange.from,p.oldRange.to,(m,g)=>{const y=g+m.nodeSize-2,v=p.oldRange.from<=g&&y<=p.oldRange.to;this.editor.emit("delete",{type:"node",node:m,from:g,to:y,newFrom:d.mapping.map(g),newTo:d.mapping.map(y),deletedRange:p.oldRange,newRange:p.newRange,partial:!v,editor:this.editor,transaction:t,combinedTransform:d})})});const f=d.mapping;d.steps.forEach((p,m)=>{var g,y;if(p instanceof vs){const v=f.slice(m).map(p.from,-1),b=f.slice(m).map(p.to),w=f.invert().map(v,-1),x=f.invert().map(b),S=(g=d.doc.nodeAt(v-1))==null?void 0:g.marks.some(N=>N.eq(p.mark)),E=(y=d.doc.nodeAt(b))==null?void 0:y.marks.some(N=>N.eq(p.mark));this.editor.emit("delete",{type:"mark",mark:p.mark,from:p.from,to:p.to,deletedRange:{from:w,to:x},newRange:{from:v,to:b},partial:!!(E||S),editor:this.editor,transaction:t,combinedTransform:d})}})};(i=(n=(r=this.editor.options.coreExtensionOptions)==null?void 0:r.delete)==null?void 0:n.async)==null||i?setTimeout(s,0):s()}}),Hse=mr.create({name:"drop",addProseMirrorPlugins(){return[new Xt({key:new Fr("tiptapDrop"),props:{handleDrop:(t,e,r,n)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:r,moved:n})}}})]}}),Kse=mr.create({name:"editable",addProseMirrorPlugins(){return[new Xt({key:new Fr("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Gse=new Fr("focusEvents"),Yse=mr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Xt({key:Gse,props:{handleDOMEvents:{focus:(e,r)=>{t.isFocused=!0;const n=t.state.tr.setMeta("focus",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1},blur:(e,r)=>{t.isFocused=!1;const n=t.state.tr.setMeta("blur",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1}}}})]}}),Qse=mr.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:u}=a,{empty:d,$anchor:h}=l,{pos:f,parent:p}=h,m=h.parent.isTextblock&&f>0?a.doc.resolve(f-1):h,g=m.parent.type.spec.isolating,y=h.pos-h.parentOffset,v=g&&m.parent.childCount===1?y===h.pos:Xe.atStart(u).from===f;return!d||!p.type.isTextblock||p.textContent.length||!v||v&&h.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...n},s={...n,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Kv()||kse()?s:i},addProseMirrorPlugins(){return[new Xt({key:new Fr("clearDocument"),appendTransaction:(t,e,r)=>{if(t.some(g=>g.getMeta("composition")))return;const n=t.some(g=>g.docChanged)&&!e.doc.eq(r.doc),i=t.some(g=>g.getMeta("preventClearDocument"));if(!n||i)return;const{empty:s,from:o,to:a}=e.selection,l=Xe.atStart(e.doc).from,u=Xe.atEnd(e.doc).to;if(s||!(o===l&&a===u)||!Ib(r.doc))return;const f=r.tr,p=jb({state:r,transaction:f}),{commands:m}=new Tb({editor:this.editor,state:p});if(m.clearNodes(),!!f.steps.length)return f}})]}}),Xse=mr.create({name:"paste",addProseMirrorPlugins(){return[new Xt({key:new Fr("tiptapPaste"),props:{handlePaste:(t,e,r)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:r})}}})]}}),Jse=mr.create({name:"tabindex",addProseMirrorPlugins(){return[new Xt({key:new Fr("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),Zse=mr.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=ch(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const r=e.getAttribute("dir");return r&&(r==="ltr"||r==="rtl"||r==="auto")?r:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new Xt({key:new Fr("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),SSe=class Yu{constructor(e,r,n=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=r,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let r=this.from,n=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}r=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:r,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),r=this.resolvedPos.doc.resolve(e);return new Yu(r,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Yu(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Yu(e,this.editor)}get children(){const e=[];return this.node.content.forEach((r,n)=>{const i=r.isBlock&&!r.isTextblock,s=r.isAtom&&!r.isText,o=this.pos+n+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(o);if(!i&&a.depth<=this.depth)return;const l=new Yu(a,this.editor,i,i?r:null);i&&(l.actualDepth=this.depth+1),e.push(new Yu(a,this.editor,i,i?r:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,r={}){let n=null,i=this.parent;for(;i&&!n;){if(i.node.type.name===e)if(Object.keys(r).length>0){const s=i.node.attrs,o=Object.keys(r);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==r[l])break}}else n=i;i=i.parent}return n}querySelector(e,r={}){return this.querySelectorAll(e,r,!0)[0]||null}querySelectorAll(e,r={},n=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(r);return this.children.forEach(o=>{n&&i.length>0||(o.node.type.name===e&&s.every(l=>r[l]===o.node.attrs[l])&&i.push(o),!(n&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,r,n))))}),i}setAttribute(e){const{tr:r}=this.editor.state;r.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(r)}},ESe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function _Se(t,e,r){const n=document.querySelector("style[data-tiptap-style]");if(n!==null)return n;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var NSe=class extends dSe{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:zwe,createMappablePosition:Wwe},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:i,moved:s})=>this.options.onDrop(n,i,s)),this.on("paste",({event:n,slice:i})=>this.options.onPaste(n,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),r=Nse(e,this.options.autofocus);this.editorState=ud.create({doc:e,schema:this.schema,selection:r||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=_Se(ESe,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const r=Ose(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let r=e;if([].concat(t).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;r=r.filter(o=>!o.key.startsWith(s))}),e.length===r.length)return;const n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}createExtensionManager(){var t,e;const n=[...this.options.enableCoreExtensions?[Kse,Wse.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),Vse,Yse,Qse,Jse,Hse,Xse,Use,Zse.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new Mb(n,this)}createCommandManager(){this.commandManager=new Tb({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=yR(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(r=>r.name!=="collaboration"),this.createExtensionManager()}}),t=yR(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:r}=this.options,n=e.dispatchTransaction||this.dispatchTransaction.bind(this),i=r?this.extensionManager.dispatchTransaction(n):n;this.editorView=new xse(t,{...e,attributes:{role:"textbox",...e==null?void 0:e.attributes},dispatchTransaction:i,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.prependClass(),this.injectCSS();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(u=>{var d;return(d=this.capturedTransaction)==null?void 0:d.step(u)});return}const{state:e,transactions:r}=this.state.applyTransaction(t),n=!this.state.selection.eq(e.selection),i=r.includes(t),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:r.slice(1)}),n&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=r.findLast(u=>u.getMeta("focus")||u.getMeta("blur")),a=o==null?void 0:o.getMeta("focus"),l=o==null?void 0:o.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:o}),l&&this.emit("blur",{editor:this,event:l.event,transaction:o}),!(t.getMeta("preventUpdate")||!r.some(u=>u.docChanged)||s.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:r.slice(1)})}getAttributes(t){return Ase(this.state,t)}isActive(t,e){const r=typeof t=="string"?t:null,n=typeof t=="string"?e:t;return qwe(this.state,r,n)}getJSON(){return this.state.doc.toJSON()}getHTML(){return GA(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:r={}}=t||{};return Rwe(this.state.doc,{blockSeparator:e,textSerializers:{...Mse(this.schema),...r}})}get isEmpty(){return Ib(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelector(t,e))||null}$nodes(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new SSe(e,this)}get $doc(){return this.$pos(0)}};function uh(t){return new Rb({find:t.find,handler:({state:e,range:r,match:n})=>{const i=bt(t.getAttributes,void 0,n);if(i===!1||i===null)return null;const{tr:s}=e,o=n[n.length-1],a=n[0];if(o){const l=a.search(/\S/),u=r.from+a.indexOf(o),d=u+o.length;if(YA(r.from,r.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===t.type&&g!==p.mark.type)).filter(p=>p.to>u).length)return null;d<r.to&&s.delete(d,r.to),u>r.from&&s.delete(r.from+l,u);const f=r.from+l+o.length;s.addMark(r.from+l,f,t.type.create(i||{})),s.removeStoredMark(t.type)}},undoable:t.undoable})}function CSe(t){return new Rb({find:t.find,handler:({state:e,range:r,match:n})=>{const i=bt(t.getAttributes,void 0,n)||{},{tr:s}=e,o=r.from;let a=r.to;const l=t.type.create(i);if(n[1]){const u=n[0].lastIndexOf(n[1]);let d=o+u;d>a?d=a:a=d+n[1].length;const h=n[0][n[0].length-1];s.insertText(h,o+n[0].length-1),s.replaceWith(d,a,l)}else if(n[0]){const u=t.type.isInline?o:o-1;s.insert(u,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()},undoable:t.undoable})}function bR(t){return new Rb({find:t.find,handler:({state:e,range:r,match:n})=>{const i=e.doc.resolve(r.from),s=bt(t.getAttributes,void 0,n)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(r.from,r.to).setBlockType(r.from,r.from,t.type,s)},undoable:t.undoable})}function dh(t){return new Rb({find:t.find,handler:({state:e,range:r,match:n,chain:i})=>{const s=bt(t.getAttributes,void 0,n)||{},o=e.tr.delete(r.from,r.to),l=o.doc.resolve(r.from).blockRange(),u=l&&jA(l,t.type,s);if(!u)return null;if(o.wrap(l,u),t.keepMarks&&t.editor){const{selection:h,storedMarks:f}=e,{splittableMarks:p}=t.editor.extensionManager,m=f||h.$to.parentOffset&&h.$from.marks();if(m){const g=m.filter(y=>p.includes(y.type.name));o.ensureMarks(g)}}if(t.keepAttributes){const h=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(h,s).run()}const d=o.doc.resolve(r.from-1).nodeBefore;d&&d.type===t.type&&kl(o.doc,r.from-1)&&(!t.joinPredicate||t.joinPredicate(n,d))&&o.join(r.from-1)},undoable:t.undoable})}function kSe(t,e){const{selection:r}=t,{$from:n}=r;if(r instanceof Re){const s=n.index();return n.parent.canReplaceWith(s,s+1,e)}let i=n.depth;for(;i>=0;){const s=n.index(i);if(n.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}var jSe={};VA(jSe,{createAtomBlockMarkdownSpec:()=>TSe,createBlockMarkdownSpec:()=>OSe,createInlineMarkdownSpec:()=>RSe,parseAttributes:()=>XA,parseIndentedBlocks:()=>xR,renderNestedMarkdownContent:()=>ZA,serializeAttributes:()=>JA});function XA(t){if(!(t!=null&&t.trim()))return{};const e={},r=[],n=t.replace(/["']([^"']*)["']/g,u=>(r.push(u),`__QUOTED_${r.length-1}__`)),i=n.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const u=i.map(d=>d.trim().slice(1));e.class=u.join(" ")}const s=n.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(e.id=s[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(n.matchAll(o)).forEach(([,u,d])=>{var h;const f=parseInt(((h=d.match(/__QUOTED_(\d+)__/))==null?void 0:h[1])||"0",10),p=r[f];p&&(e[u]=p.slice(1,-1))});const l=n.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(d=>{d.match(/^[a-zA-Z][\w-]*$/)&&(e[d]=!0)}),e}function JA(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(n=>e.push(`.${n}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([r,n])=>{r==="class"||r==="id"||(n===!0?e.push(r):n!==!1&&n!=null&&e.push(`${r}="${String(n)}"`))}),e.join(" ")}function TSe(t){const{nodeName:e,name:r,parseAttributes:n=XA,serializeAttributes:i=JA,defaultAttributes:s={},requiredAttributes:o=[],allowedAttributes:a}=t,l=r||e,u=d=>{if(!a)return d;const h={};return a.forEach(f=>{f in d&&(h[f]=d[f])}),h};return{parseMarkdown:(d,h)=>{const f={...s,...d.attributes};return h.createNode(e,f,[])},markdownTokenizer:{name:e,level:"block",start(d){var h;const f=new RegExp(`^:::${l}(?:\\s|$)`,"m"),p=(h=d.match(f))==null?void 0:h.index;return p!==void 0?p:-1},tokenize(d,h,f){const p=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),m=d.match(p);if(!m)return;const g=m[1]||"",y=n(g);if(!o.find(b=>!(b in y)))return{type:e,raw:m[0],attributes:y}}},renderMarkdown:d=>{const h=u(d.attrs||{}),f=i(h),p=f?` {${f}}`:"";return`:::${l}${p} :::`}}}function OSe(t){const{nodeName:e,name:r,getContent:n,parseAttributes:i=XA,serializeAttributes:s=JA,defaultAttributes:o={},content:a="block",allowedAttributes:l}=t,u=r||e,d=h=>{if(!l)return h;const f={};return l.forEach(p=>{p in h&&(f[p]=h[p])}),f};return{parseMarkdown:(h,f)=>{let p;if(n){const g=n(h);p=typeof g=="string"?[{type:"text",text:g}]:g}else a==="block"?p=f.parseChildren(h.tokens||[]):p=f.parseInline(h.tokens||[]);const m={...o,...h.attributes};return f.createNode(e,m,p)},markdownTokenizer:{name:e,level:"block",start(h){var f;const p=new RegExp(`^:::${u}`,"m"),m=(f=h.match(p))==null?void 0:f.index;return m!==void 0?m:-1},tokenize(h,f,p){var m;const g=new RegExp(`^:::${u}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),y=h.match(g);if(!y)return;const[v,b=""]=y,w=i(b);let x=1;const S=v.length;let E="";const N=/^:::([\w-]*)(\s.*)?/gm,_=h.slice(S);for(N.lastIndex=0;;){const k=N.exec(_);if(k===null)break;const j=k.index,T=k[1];if(!((m=k[2])!=null&&m.endsWith(":::"))){if(T)x+=1;else if(x-=1,x===0){const P=_.slice(0,j);E=P.trim();const O=h.slice(0,S+j+k[0].length);let D=[];if(E)if(a==="block")for(D=p.blockTokens(P),D.forEach(F=>{F.text&&(!F.tokens||F.tokens.length===0)&&(F.tokens=p.inlineTokens(F.text))});D.length>0;){const F=D[D.length-1];if(F.type==="paragraph"&&(!F.text||F.text.trim()===""))D.pop();else break}else D=p.inlineTokens(E);return{type:e,raw:O,attributes:w,content:E,tokens:D}}}}}},renderMarkdown:(h,f)=>{const p=d(h.attrs||{}),m=s(p),g=m?` {${m}}`:"",y=f.renderChildren(h.content||[],`

`);return`:::${u}${g}

${y}

:::`}}}function PSe(t){if(!t.trim())return{};const e={},r=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let n=r.exec(t);for(;n!==null;){const[,i,s,o]=n;e[i]=s||o,n=r.exec(t)}return e}function ISe(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,r])=>`${e}="${r}"`).join(" ")}function RSe(t){const{nodeName:e,name:r,getContent:n,parseAttributes:i=PSe,serializeAttributes:s=ISe,defaultAttributes:o={},selfClosing:a=!1,allowedAttributes:l}=t,u=r||e,d=f=>{if(!l)return f;const p={};return l.forEach(m=>{const g=typeof m=="string"?m:m.name,y=typeof m=="string"?void 0:m.skipIfDefault;if(g in f){const v=f[g];if(y!==void 0&&v===y)return;p[g]=v}}),p},h=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(f,p)=>{const m={...o,...f.attributes};if(a)return p.createNode(e,m);const g=n?n(f):f.content||"";return g?p.createNode(e,m,[p.createTextNode(g)]):p.createNode(e,m,[])},markdownTokenizer:{name:e,level:"inline",start(f){const p=a?new RegExp(`\\[${h}\\s*[^\\]]*\\]`):new RegExp(`\\[${h}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${h}\\]`),m=f.match(p),g=m==null?void 0:m.index;return g!==void 0?g:-1},tokenize(f,p,m){const g=a?new RegExp(`^\\[${h}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${h}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${h}\\]`),y=f.match(g);if(!y)return;let v="",b="";if(a){const[,x]=y;b=x}else{const[,x,S]=y;b=x,v=S||""}const w=i(b.trim());return{type:e,raw:y[0],content:v.trim(),attributes:w}}},renderMarkdown:f=>{let p="";n?p=n(f):f.content&&f.content.length>0&&(p=f.content.filter(v=>v.type==="text").map(v=>v.text).join(""));const m=d(f.attrs||{}),g=s(m),y=g?` ${g}`:"";return a?`[${u}${y}]`:`[${u}${y}]${p}[/${u}]`}}}function xR(t,e,r){var n,i,s,o;const a=t.split(`
`),l=[];let u="",d=0;const h=e.baseIndentSize||2;for(;d<a.length;){const f=a[d],p=f.match(e.itemPattern);if(!p){if(l.length>0)break;if(f.trim()===""){d+=1,u=`${u}${f}
`;continue}else return}const m=e.extractItemData(p),{indentLevel:g,mainContent:y}=m;u=`${u}${f}
`;const v=[y];for(d+=1;d<a.length;){const S=a[d];if(S.trim()===""){const N=a.slice(d+1).findIndex(j=>j.trim()!=="");if(N===-1)break;if((((i=(n=a[d+1+N].match(/^(\s*)/))==null?void 0:n[1])==null?void 0:i.length)||0)>g){v.push(S),u=`${u}${S}
`,d+=1;continue}else break}if((((o=(s=S.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:o.length)||0)>g)v.push(S),u=`${u}${S}
`,d+=1;else break}let b;const w=v.slice(1);if(w.length>0){const S=w.map(E=>E.slice(g+h)).join(`
`);S.trim()&&(e.customNestedParser?b=e.customNestedParser(S):b=r.blockTokens(S))}const x=e.createToken(m,b);l.push(x)}if(l.length!==0)return{items:l,raw:u}}function ZA(t,e,r,n){if(!t||!Array.isArray(t.content))return"";const i=typeof r=="function"?r(n):r,[s,...o]=t.content,a=e.renderChildren([s]),l=[`${i}${a}`];return o&&o.length>0&&o.forEach(u=>{const d=e.renderChildren([u]);if(d){const h=d.split(`
`).map(f=>f?e.indent(f):"").join(`
`);l.push(h)}}),l.join(`
`)}function MSe(t,e,r={}){const{state:n}=e,{doc:i,tr:s}=n,o=t;i.descendants((a,l)=>{const u=s.mapping.map(l),d=s.mapping.map(l)+a.nodeSize;let h=null;if(a.marks.forEach(p=>{if(p!==o)return!1;h=p}),!h)return;let f=!1;if(Object.keys(r).forEach(p=>{r[p]!==h.attrs[p]&&(f=!0)}),f){const p=t.type.create({...t.attrs,...r});s.removeMark(u,d,t.type),s.addMark(u,d,p)}}),s.docChanged&&e.view.dispatch(s)}var ki=class eoe extends QA{constructor(){super(...arguments),this.type="node"}static create(e={}){const r=typeof e=="function"?e():e;return new eoe(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function Qc(t){return new gSe({find:t.find,handler:({state:e,range:r,match:n,pasteEvent:i})=>{const s=bt(t.getAttributes,void 0,n,i);if(s===!1||s===null)return null;const{tr:o}=e,a=n[n.length-1],l=n[0];let u=r.to;if(a){const d=l.search(/\S/),h=r.from+l.indexOf(a),f=h+a.length;if(YA(r.from,r.to,e.doc).filter(m=>m.mark.type.excluded.find(y=>y===t.type&&y!==m.mark.type)).filter(m=>m.to>h).length)return null;f<r.to&&o.delete(f,r.to),h>r.from&&o.delete(r.from+d,h),u=r.from+d+a.length,o.addMark(r.from+d,u,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:ASe,getOwnPropertySymbols:DSe}=Object,{hasOwnProperty:$Se}=Object.prototype;function $x(t,e){return function(n,i,s){return t(n,i,s)&&e(n,i,s)}}function ly(t){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,i);const{cache:s}=i,o=s.get(r),a=s.get(n);if(o&&a)return o===n&&a===r;s.set(r,n),s.set(n,r);const l=t(r,n,i);return s.delete(r),s.delete(n),l}}function FSe(t){return t!=null?t[Symbol.toStringTag]:void 0}function xF(t){return ASe(t).concat(DSe(t))}const qSe=Object.hasOwn||((t,e)=>$Se.call(t,e));function du(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const LSe="__v",BSe="__o",zSe="_owner",{getOwnPropertyDescriptor:wF,keys:SF}=Object;function WSe(t,e){return t.byteLength===e.byteLength&&Yv(new Uint8Array(t),new Uint8Array(e))}function VSe(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function USe(t,e){return t.byteLength===e.byteLength&&Yv(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function HSe(t,e){return du(t.getTime(),e.getTime())}function KSe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function GSe(t,e){return t===e}function EF(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),s=t.entries();let o,a,l=0;for(;(o=s.next())&&!o.done;){const u=e.entries();let d=!1,h=0;for(;(a=u.next())&&!a.done;){if(i[h]){h++;continue}const f=o.value,p=a.value;if(r.equals(f[0],p[0],l,h,t,e,r)&&r.equals(f[1],p[1],f[0],p[0],t,e,r)){d=i[h]=!0;break}h++}if(!d)return!1;l++}return!0}const YSe=du;function QSe(t,e,r){const n=SF(t);let i=n.length;if(SF(e).length!==i)return!1;for(;i-- >0;)if(!toe(t,e,r,n[i]))return!1;return!0}function jf(t,e,r){const n=xF(t);let i=n.length;if(xF(e).length!==i)return!1;let s,o,a;for(;i-- >0;)if(s=n[i],!toe(t,e,r,s)||(o=wF(t,s),a=wF(e,s),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function XSe(t,e){return du(t.valueOf(),e.valueOf())}function JSe(t,e){return t.source===e.source&&t.flags===e.flags}function _F(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),s=t.values();let o,a;for(;(o=s.next())&&!o.done;){const l=e.values();let u=!1,d=0;for(;(a=l.next())&&!a.done;){if(!i[d]&&r.equals(o.value,a.value,o.value,a.value,t,e,r)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function Yv(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function ZSe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function toe(t,e,r,n){return(n===zSe||n===BSe||n===LSe)&&(t.$$typeof||e.$$typeof)?!0:qSe(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const eEe="[object ArrayBuffer]",tEe="[object Arguments]",rEe="[object Boolean]",nEe="[object DataView]",iEe="[object Date]",sEe="[object Error]",oEe="[object Map]",aEe="[object Number]",lEe="[object Object]",cEe="[object RegExp]",uEe="[object Set]",dEe="[object String]",hEe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},fEe="[object URL]",pEe=Object.prototype.toString;function mEe({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:o,areNumbersEqual:a,areObjectsEqual:l,arePrimitiveWrappersEqual:u,areRegExpsEqual:d,areSetsEqual:h,areTypedArraysEqual:f,areUrlsEqual:p,unknownTagComparators:m}){return function(y,v,b){if(y===v)return!0;if(y==null||v==null)return!1;const w=typeof y;if(w!==typeof v)return!1;if(w!=="object")return w==="number"?a(y,v,b):w==="function"?s(y,v,b):!1;const x=y.constructor;if(x!==v.constructor)return!1;if(x===Object)return l(y,v,b);if(Array.isArray(y))return e(y,v,b);if(x===Date)return n(y,v,b);if(x===RegExp)return d(y,v,b);if(x===Map)return o(y,v,b);if(x===Set)return h(y,v,b);const S=pEe.call(y);if(S===iEe)return n(y,v,b);if(S===cEe)return d(y,v,b);if(S===oEe)return o(y,v,b);if(S===uEe)return h(y,v,b);if(S===lEe)return typeof y.then!="function"&&typeof v.then!="function"&&l(y,v,b);if(S===fEe)return p(y,v,b);if(S===sEe)return i(y,v,b);if(S===tEe)return l(y,v,b);if(hEe[S])return f(y,v,b);if(S===eEe)return t(y,v,b);if(S===nEe)return r(y,v,b);if(S===rEe||S===aEe||S===dEe)return u(y,v,b);if(m){let E=m[S];if(!E){const N=FSe(y);N&&(E=m[N])}if(E)return E(y,v,b)}return!1}}function gEe({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:WSe,areArraysEqual:r?jf:VSe,areDataViewsEqual:USe,areDatesEqual:HSe,areErrorsEqual:KSe,areFunctionsEqual:GSe,areMapsEqual:r?$x(EF,jf):EF,areNumbersEqual:YSe,areObjectsEqual:r?jf:QSe,arePrimitiveWrappersEqual:XSe,areRegExpsEqual:JSe,areSetsEqual:r?$x(_F,jf):_F,areTypedArraysEqual:r?$x(Yv,jf):Yv,areUrlsEqual:ZSe,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const i=ly(n.areArraysEqual),s=ly(n.areMapsEqual),o=ly(n.areObjectsEqual),a=ly(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:a})}return n}function yEe(t){return function(e,r,n,i,s,o,a){return t(e,r,a)}}function vEe({circular:t,comparator:e,createState:r,equals:n,strict:i}){if(r)return function(a,l){const{cache:u=t?new WeakMap:void 0,meta:d}=r();return e(a,l,{cache:u,equals:n,meta:d,strict:i})};if(t)return function(a,l){return e(a,l,{cache:new WeakMap,equals:n,meta:void 0,strict:i})};const s={cache:void 0,equals:n,meta:void 0,strict:i};return function(a,l){return e(a,l,s)}}const bEe=Tl();Tl({strict:!0});Tl({circular:!0});Tl({circular:!0,strict:!0});Tl({createInternalComparator:()=>du});Tl({strict:!0,createInternalComparator:()=>du});Tl({circular:!0,createInternalComparator:()=>du});Tl({circular:!0,createInternalComparator:()=>du,strict:!0});function Tl(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:i=!1}=t,s=gEe(t),o=mEe(s),a=r?r(o):yEe(o);return vEe({circular:e,comparator:o,createState:n,equals:a,strict:i})}var roe={exports:{}},noe={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ab=C,xEe=NA;function wEe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var SEe=typeof Object.is=="function"?Object.is:wEe,EEe=xEe.useSyncExternalStore,_Ee=Ab.useRef,NEe=Ab.useEffect,CEe=Ab.useMemo,kEe=Ab.useDebugValue;noe.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var s=_Ee(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=CEe(function(){function l(p){if(!u){if(u=!0,d=p,p=n(p),i!==void 0&&o.hasValue){var m=o.value;if(i(m,p))return h=m}return h=p}if(m=h,SEe(d,p))return m;var g=n(p);return i!==void 0&&i(m,g)?(d=p,m):(d=p,h=g)}var u=!1,d,h,f=r===void 0?null:r;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,r,n,i]);var a=EEe(t,s[0],s[1]);return NEe(function(){o.hasValue=!0,o.value=a},[a]),kEe(a),a};roe.exports=noe;var jEe=roe.exports,TEe=(...t)=>e=>{t.forEach(r=>{typeof r=="function"?r(e):r&&(r.current=e)})},OEe=({contentComponent:t})=>{const e=NA.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return c.jsx(c.Fragment,{children:Object.values(e)})};function PEe(){const t=new Set;let e={};return{subscribe(r){return t.add(r),()=>{t.delete(r)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(r,n){e={...e,[r]:Kte.createPortal(n.reactElement,n.element,r)},t.forEach(i=>i())},removeRenderer(r){const n={...e};delete n[r],e=n,t.forEach(i=>i())}}}var IEe=class extends ie.Component{constructor(t){var e;super(t),this.editorContentRef=ie.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const r=this.editorContentRef.current;r.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:r}),e.contentComponent=PEe(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const r=document.createElement("div");r.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:r})}catch{}}}render(){const{editor:t,innerRef:e,...r}=this.props;return c.jsxs(c.Fragment,{children:[c.jsx("div",{ref:TEe(e,this.editorContentRef),...r}),(t==null?void 0:t.contentComponent)&&c.jsx(OEe,{contentComponent:t.contentComponent})]})}},REe=C.forwardRef((t,e)=>{const r=ie.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return ie.createElement(IEe,{key:r,innerRef:e,...t})}),MEe=ie.memo(REe),AEe=typeof window<"u"?C.useLayoutEffect:C.useEffect,DEe=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(n=>n())},r=this.editor;return r.on("transaction",e),()=>{r.off("transaction",e)}}}};function $Ee(t){var e;const[r]=C.useState(()=>new DEe(t.editor)),n=jEe.useSyncExternalStoreWithSelector(r.subscribe,r.getSnapshot,r.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:bEe);return AEe(()=>r.watch(t.editor),[t.editor,r]),C.useDebugValue(n),n}var FEe=!1,wR=typeof window>"u",qEe=wR||!!(typeof window<"u"&&window.next),LEe=class ioe{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(r=>r())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?wR||qEe?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...n)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...n)},onBlur:(...n)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...n)},onCreate:(...n)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...n)},onDestroy:(...n)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...n)},onFocus:(...n)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...n)},onSelectionUpdate:(...n)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...n)},onTransaction:(...n)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...n)},onUpdate:(...n)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...n)},onContentError:(...n)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...n)},onDrop:(...n)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...n)},onPaste:(...n)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...n)},onDelete:(...n)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...n)}};return new NSe(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,r){return Object.keys(e).every(n=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)?!0:n==="extensions"&&e.extensions&&r.extensions?e.extensions.length!==r.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=r.extensions)==null?void 0:o[s])}):e[n]===r[n])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?ioe.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((n,i)=>n===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,r=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){r&&r.setOptions(this.options.current);return}r&&!r.isDestroyed&&(r.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function BEe(t={},e=[]){const r=C.useRef(t);r.current=t;const[n]=C.useState(()=>new LEe(r)),i=NA.useSyncExternalStore(n.subscribe,n.getEditor,n.getServerSnapshot);return C.useDebugValue(i),C.useEffect(n.onRender(e)),$Ee({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&s===0?0:s+1}),i}var zEe=C.createContext({editor:null});zEe.Consumer;var WEe=C.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),VEe=()=>C.useContext(WEe);ie.forwardRef((t,e)=>{const{onDragStart:r}=VEe(),n=t.as||"div";return c.jsx(n,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:r,style:{whiteSpace:"normal",...t.style}})});ie.createContext({markViewContentRef:()=>{}});var Qv=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:r,...n}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,n,r]},UEe=/^\s*>\s$/,HEe=ki.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return Qv("blockquote",{...Cr(this.options.HTMLAttributes,t),children:Qv("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const r=">",n=[];return t.content.forEach(i=>{const a=e.renderChildren([i]).split(`
`).map(l=>l.trim()===""?r:`${r} ${l}`);n.push(a.join(`
`))}),n.join(`
${r}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[dh({find:UEe,type:this.type})]}}),KEe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,GEe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,YEe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,QEe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,XEe=uu.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return Qv("strong",{...Cr(this.options.HTMLAttributes,t),children:Qv("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[uh({find:KEe,type:this.type}),uh({find:YEe,type:this.type})]},addPasteRules(){return[Qc({find:GEe,type:this.type}),Qc({find:QEe,type:this.type})]}}),JEe=/(^|[^`])`([^`]+)`(?!`)$/,ZEe=/(^|[^`])`([^`]+)`(?!`)/g,e2e=uu.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Cr(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[uh({find:JEe,type:this.type})]},addPasteRules(){return[Qc({find:ZEe,type:this.type})]}}),Fx=4,t2e=/^```([a-z]+)?[\s\n]$/,r2e=/^~~~([a-z]+)?[\s\n]$/,n2e=ki.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:Fx,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:r}=this.options;if(!r)return null;const s=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(r)).map(o=>o.replace(r,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Cr(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var r;return((r=t.raw)==null?void 0:r.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var r;let n="";const i=((r=t.attrs)==null?void 0:r.language)||"";return t.content?n=[`\`\`\`${i}`,e.renderChildren(t.content),"```"].join(`
`):n=`\`\`\`${i}

\`\`\``,n},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,r=e.pos===1;return!t||e.parent.type.name!==this.name?!1:r||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const r=(e=this.options.tabSize)!=null?e:Fx,{state:n}=t,{selection:i}=n,{$from:s,empty:o}=i;if(s.parent.type!==this.type)return!1;const a=" ".repeat(r);return o?t.commands.insertContent(a):t.commands.command(({tr:l})=>{const{from:u,to:d}=i,p=n.doc.textBetween(u,d,`
`,`
`).split(`
`).map(m=>a+m).join(`
`);return l.replaceWith(u,d,n.schema.text(p)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const r=(e=this.options.tabSize)!=null?e:Fx,{state:n}=t,{selection:i}=n,{$from:s,empty:o}=i;return s.parent.type!==this.type?!1:o?t.commands.command(({tr:a})=>{var l;const{pos:u}=s,d=s.start(),h=s.end(),p=n.doc.textBetween(d,h,`
`,`
`).split(`
`);let m=0,g=0;const y=u-d;for(let E=0;E<p.length;E+=1){if(g+p[E].length>=y){m=E;break}g+=p[E].length+1}const b=((l=p[m].match(/^ */))==null?void 0:l[0])||"",w=Math.min(b.length,r);if(w===0)return!0;let x=d;for(let E=0;E<m;E+=1)x+=p[E].length+1;return a.delete(x,x+w),u-x<=w&&a.setSelection(Be.create(a.doc,x)),!0}):t.commands.command(({tr:a})=>{const{from:l,to:u}=i,f=n.doc.textBetween(l,u,`
`,`
`).split(`
`).map(p=>{var m;const g=((m=p.match(/^ */))==null?void 0:m[0])||"",y=Math.min(g.length,r);return p.slice(y)}).join(`
`);return a.replaceWith(l,u,n.schema.text(f)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:r}=e,{$from:n,empty:i}=r;if(!i||n.parent.type!==this.type)return!1;const s=n.parentOffset===n.parent.nodeSize-2,o=n.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:a})=>(a.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:r,doc:n}=e,{$from:i,empty:s}=r;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:n.nodeAt(a)?t.commands.command(({tr:u})=>(u.setSelection(Xe.near(n.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[bR({find:t2e,type:this.type,getAttributes:t=>({language:t[1]})}),bR({find:r2e,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Xt({key:new Fr("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const r=e.clipboardData.getData("text/plain"),n=e.clipboardData.getData("vscode-editor-data"),i=n?JSON.parse(n):void 0,s=i==null?void 0:i.mode;if(!r||!s)return!1;const{tr:o,schema:a}=t.state,l=a.text(r.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(Be.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),i2e=ki.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),s2e=ki.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Cr(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:r,editor:n})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=r;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=n.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:d})=>{if(d&&l&&o){const h=l.filter(f=>a.includes(f.type.name));u.ensureMarks(h)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),o2e=ki.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Cr(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var r;const n=(r=t.attrs)!=null&&r.level?parseInt(t.attrs.level,10):1,i="#".repeat(n);return t.content?`${i} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>bR({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),a2e=ki.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Cr(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!kSe(e,e.schema.nodes[this.name]))return!1;const{selection:r}=e,{$to:n}=r,i=t();return $se(r)?i.insertContentAt(n.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:s,tr:o,dispatch:a})=>{if(a){const{$to:l}=o.selection,u=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?o.setSelection(Be.create(o.doc,l.pos+1)):l.nodeAfter.isBlock?o.setSelection(Re.create(o.doc,l.pos)):o.setSelection(Be.create(o.doc,l.pos));else{const d=s.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,h=d==null?void 0:d.create();h&&(o.insert(u,h),o.setSelection(Be.create(o.doc,u+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[CSe({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),l2e=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,c2e=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,u2e=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,d2e=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,h2e=uu.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Cr(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[uh({find:l2e,type:this.type}),uh({find:u2e,type:this.type})]},addPasteRules(){return[Qc({find:c2e,type:this.type}),Qc({find:d2e,type:this.type})]}});const f2e="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",p2e="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",SR="numeric",ER="ascii",_R="alpha",lp="asciinumeric",Vf="alphanumeric",NR="domain",soe="emoji",m2e="scheme",g2e="slashscheme",qx="whitespace";function y2e(t,e){return t in e||(e[t]=[]),e[t]}function ic(t,e,r){e[SR]&&(e[lp]=!0,e[Vf]=!0),e[ER]&&(e[lp]=!0,e[_R]=!0),e[lp]&&(e[Vf]=!0),e[_R]&&(e[Vf]=!0),e[Vf]&&(e[NR]=!0),e[soe]&&(e[NR]=!0);for(const n in e){const i=y2e(n,r);i.indexOf(t)<0&&i.push(t)}}function v2e(t,e){const r={};for(const n in e)e[n].indexOf(t)>=0&&(r[n]=!0);return r}function ei(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}ei.groups={};ei.prototype={accepts(){return!!this.t},go(t){const e=this,r=e.j[t];if(r)return r;for(let n=0;n<e.jr.length;n++){const i=e.jr[n][0],s=e.jr[n][1];if(s&&i.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,r,n){for(let i=0;i<t.length;i++)this.tt(t[i],e,r,n)},tr(t,e,r,n){n=n||ei.groups;let i;return e&&e.j?i=e:(i=new ei(e),r&&n&&ic(e,r,n)),this.jr.push([t,i]),i},ts(t,e,r,n){let i=this;const s=t.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(t[o]);return i.tt(t[s-1],e,r,n)},tt(t,e,r,n){n=n||ei.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const s=e;let o,a=i.go(t);if(a?(o=new ei,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new ei,s){if(n)if(o.t&&typeof o.t=="string"){const l=Object.assign(v2e(o.t,n),r);ic(s,l,n)}else r&&ic(s,r,n);o.t=s}return i.j[t]=o,o}};const Qe=(t,e,r,n,i)=>t.ta(e,r,n,i),tr=(t,e,r,n,i)=>t.tr(e,r,n,i),NF=(t,e,r,n,i)=>t.ts(e,r,n,i),oe=(t,e,r,n,i)=>t.tt(e,r,n,i),vo="WORD",CR="UWORD",ooe="ASCIINUMERICAL",aoe="ALPHANUMERICAL",em="LOCALHOST",kR="TLD",jR="UTLD",Wy="SCHEME",Qu="SLASH_SCHEME",eD="NUM",TR="WS",tD="NL",cp="OPENBRACE",up="CLOSEBRACE",Xv="OPENBRACKET",Jv="CLOSEBRACKET",Zv="OPENPAREN",e0="CLOSEPAREN",t0="OPENANGLEBRACKET",r0="CLOSEANGLEBRACKET",n0="FULLWIDTHLEFTPAREN",i0="FULLWIDTHRIGHTPAREN",s0="LEFTCORNERBRACKET",o0="RIGHTCORNERBRACKET",a0="LEFTWHITECORNERBRACKET",l0="RIGHTWHITECORNERBRACKET",c0="FULLWIDTHLESSTHAN",u0="FULLWIDTHGREATERTHAN",d0="AMPERSAND",h0="APOSTROPHE",f0="ASTERISK",wa="AT",p0="BACKSLASH",m0="BACKTICK",g0="CARET",ja="COLON",rD="COMMA",y0="DOLLAR",Ms="DOT",v0="EQUALS",nD="EXCLAMATION",Ri="HYPHEN",dp="PERCENT",b0="PIPE",x0="PLUS",w0="POUND",hp="QUERY",iD="QUOTE",loe="FULLWIDTHMIDDLEDOT",sD="SEMI",As="SLASH",fp="TILDE",S0="UNDERSCORE",coe="EMOJI",E0="SYM";var uoe=Object.freeze({__proto__:null,ALPHANUMERICAL:aoe,AMPERSAND:d0,APOSTROPHE:h0,ASCIINUMERICAL:ooe,ASTERISK:f0,AT:wa,BACKSLASH:p0,BACKTICK:m0,CARET:g0,CLOSEANGLEBRACKET:r0,CLOSEBRACE:up,CLOSEBRACKET:Jv,CLOSEPAREN:e0,COLON:ja,COMMA:rD,DOLLAR:y0,DOT:Ms,EMOJI:coe,EQUALS:v0,EXCLAMATION:nD,FULLWIDTHGREATERTHAN:u0,FULLWIDTHLEFTPAREN:n0,FULLWIDTHLESSTHAN:c0,FULLWIDTHMIDDLEDOT:loe,FULLWIDTHRIGHTPAREN:i0,HYPHEN:Ri,LEFTCORNERBRACKET:s0,LEFTWHITECORNERBRACKET:a0,LOCALHOST:em,NL:tD,NUM:eD,OPENANGLEBRACKET:t0,OPENBRACE:cp,OPENBRACKET:Xv,OPENPAREN:Zv,PERCENT:dp,PIPE:b0,PLUS:x0,POUND:w0,QUERY:hp,QUOTE:iD,RIGHTCORNERBRACKET:o0,RIGHTWHITECORNERBRACKET:l0,SCHEME:Wy,SEMI:sD,SLASH:As,SLASH_SCHEME:Qu,SYM:E0,TILDE:fp,TLD:kR,UNDERSCORE:S0,UTLD:jR,UWORD:CR,WORD:vo,WS:TR});const po=/[a-z]/,Tf=new RegExp("\\p{L}","u"),Lx=new RegExp("\\p{Emoji}","u"),mo=/\d/,Bx=/\s/,CF="\r",zx=`
`,b2e="",x2e="",Wx="";let cy=null,uy=null;function w2e(t=[]){const e={};ei.groups=e;const r=new ei;cy==null&&(cy=kF(f2e)),uy==null&&(uy=kF(p2e)),oe(r,"'",h0),oe(r,"{",cp),oe(r,"}",up),oe(r,"[",Xv),oe(r,"]",Jv),oe(r,"(",Zv),oe(r,")",e0),oe(r,"<",t0),oe(r,">",r0),oe(r,"",n0),oe(r,"",i0),oe(r,"",s0),oe(r,"",o0),oe(r,"",a0),oe(r,"",l0),oe(r,"",c0),oe(r,"",u0),oe(r,"&",d0),oe(r,"*",f0),oe(r,"@",wa),oe(r,"`",m0),oe(r,"^",g0),oe(r,":",ja),oe(r,",",rD),oe(r,"$",y0),oe(r,".",Ms),oe(r,"=",v0),oe(r,"!",nD),oe(r,"-",Ri),oe(r,"%",dp),oe(r,"|",b0),oe(r,"+",x0),oe(r,"#",w0),oe(r,"?",hp),oe(r,'"',iD),oe(r,"/",As),oe(r,";",sD),oe(r,"~",fp),oe(r,"_",S0),oe(r,"\\",p0),oe(r,"",loe);const n=tr(r,mo,eD,{[SR]:!0});tr(n,mo,n);const i=tr(n,po,ooe,{[lp]:!0}),s=tr(n,Tf,aoe,{[Vf]:!0}),o=tr(r,po,vo,{[ER]:!0});tr(o,mo,i),tr(o,po,o),tr(i,mo,i),tr(i,po,i);const a=tr(r,Tf,CR,{[_R]:!0});tr(a,po),tr(a,mo,s),tr(a,Tf,a),tr(s,mo,s),tr(s,po),tr(s,Tf,s);const l=oe(r,zx,tD,{[qx]:!0}),u=oe(r,CF,TR,{[qx]:!0}),d=tr(r,Bx,TR,{[qx]:!0});oe(r,Wx,d),oe(u,zx,l),oe(u,Wx,d),tr(u,Bx,d),oe(d,CF),oe(d,zx),tr(d,Bx,d),oe(d,Wx,d);const h=tr(r,Lx,coe,{[soe]:!0});oe(h,"#"),tr(h,Lx,h),oe(h,b2e,h);const f=oe(h,x2e);oe(f,"#"),tr(f,Lx,h);const p=[[po,o],[mo,i]],m=[[po,null],[Tf,a],[mo,s]];for(let g=0;g<cy.length;g++)da(r,cy[g],kR,vo,p);for(let g=0;g<uy.length;g++)da(r,uy[g],jR,CR,m);ic(kR,{tld:!0,ascii:!0},e),ic(jR,{utld:!0,alpha:!0},e),da(r,"file",Wy,vo,p),da(r,"mailto",Wy,vo,p),da(r,"http",Qu,vo,p),da(r,"https",Qu,vo,p),da(r,"ftp",Qu,vo,p),da(r,"ftps",Qu,vo,p),ic(Wy,{scheme:!0,ascii:!0},e),ic(Qu,{slashscheme:!0,ascii:!0},e),t=t.sort((g,y)=>g[0]>y[0]?1:-1);for(let g=0;g<t.length;g++){const y=t[g][0],b=t[g][1]?{[m2e]:!0}:{[g2e]:!0};y.indexOf("-")>=0?b[NR]=!0:po.test(y)?mo.test(y)?b[lp]=!0:b[ER]=!0:b[SR]=!0,NF(r,y,y,b)}return NF(r,"localhost",em,{ascii:!0}),r.jd=new ei(E0),{start:r,tokens:Object.assign({groups:e},uoe)}}function doe(t,e){const r=S2e(e.replace(/[A-Z]/g,a=>a.toLowerCase())),n=r.length,i=[];let s=0,o=0;for(;o<n;){let a=t,l=null,u=0,d=null,h=-1,f=-1;for(;o<n&&(l=a.go(r[o]));)a=l,a.accepts()?(h=0,f=0,d=a):h>=0&&(h+=r[o].length,f++),u+=r[o].length,s+=r[o].length,o++;s-=h,o-=f,u-=h,i.push({t:d.t,v:e.slice(s-u,s),s:s-u,e:s})}return i}function S2e(t){const e=[],r=t.length;let n=0;for(;n<r;){let i=t.charCodeAt(n),s,o=i<55296||i>56319||n+1===r||(s=t.charCodeAt(n+1))<56320||s>57343?t[n]:t.slice(n,n+2);e.push(o),n+=o.length}return e}function da(t,e,r,n,i){let s;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];t.j[l]?s=t.j[l]:(s=new ei(n),s.jr=i.slice(),t.j[l]=s),t=s}return s=new ei(r),s.jr=i.slice(),t.j[e[o-1]]=s,s}function kF(t){const e=[],r=[];let n=0,i="0123456789";for(;n<t.length;){let s=0;for(;i.indexOf(t[n+s])>=0;)s++;if(s>0){e.push(r.join(""));for(let o=parseInt(t.substring(n,n+s),10);o>0;o--)r.pop();n+=s}else r.push(t[n]),n++}return e}const tm={defaultProtocol:"http",events:null,format:jF,formatHref:jF,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function oD(t,e=null){let r=Object.assign({},tm);t&&(r=Object.assign(r,t instanceof oD?t.o:t));const n=r.ignoreTags,i=[];for(let s=0;s<n.length;s++)i.push(n[s].toUpperCase());this.o=r,e&&(this.defaultRender=e),this.ignoreTags=i}oD.prototype={o:tm,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,r){const n=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=r.t in i?i[r.t]:tm[t],typeof i=="function"&&n&&(i=i(e,r))):typeof i=="function"&&n&&(i=i(e,r.t,r)),i)},getObj(t,e,r){let n=this.o[t];return typeof n=="function"&&e!=null&&(n=n(e,r.t,r)),n},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function jF(t){return t}function hoe(t,e){this.t="token",this.v=t,this.tk=e}hoe.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),r=t.get("truncate",e,this),n=t.get("format",e,this);return r&&n.length>r?n.substring(0,r)+"":n},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=tm.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,r=this.toHref(t.get("defaultProtocol")),n=t.get("formatHref",r,this),i=t.get("tagName",r,e),s=this.toFormattedString(t),o={},a=t.get("className",r,e),l=t.get("target",r,e),u=t.get("rel",r,e),d=t.getObj("attributes",r,e),h=t.getObj("events",r,e);return o.href=n,a&&(o.class=a),l&&(o.target=l),u&&(o.rel=u),d&&Object.assign(o,d),{tagName:i,attributes:o,content:s,eventListeners:h}}};function Db(t,e){class r extends hoe{constructor(i,s){super(i,s),this.t=t}}for(const n in e)r.prototype[n]=e[n];return r.t=t,r}const TF=Db("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),OF=Db("text"),E2e=Db("nl"),dy=Db("url",{isLink:!0,toHref(t=tm.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==em&&t[1].t===ja}}),Ii=t=>new ei(t);function _2e({groups:t}){const e=t.domain.concat([d0,f0,wa,p0,m0,g0,y0,v0,Ri,eD,dp,b0,x0,w0,As,E0,fp,S0]),r=[h0,ja,rD,Ms,nD,dp,hp,iD,sD,t0,r0,cp,up,Jv,Xv,Zv,e0,n0,i0,s0,o0,a0,l0,c0,u0],n=[d0,h0,f0,p0,m0,g0,y0,v0,Ri,cp,up,dp,b0,x0,w0,hp,As,E0,fp,S0],i=Ii(),s=oe(i,fp);Qe(s,n,s),Qe(s,t.domain,s);const o=Ii(),a=Ii(),l=Ii();Qe(i,t.domain,o),Qe(i,t.scheme,a),Qe(i,t.slashscheme,l),Qe(o,n,s),Qe(o,t.domain,o);const u=oe(o,wa);oe(s,wa,u),oe(a,wa,u),oe(l,wa,u);const d=oe(s,Ms);Qe(d,n,s),Qe(d,t.domain,s);const h=Ii();Qe(u,t.domain,h),Qe(h,t.domain,h);const f=oe(h,Ms);Qe(f,t.domain,h);const p=Ii(TF);Qe(f,t.tld,p),Qe(f,t.utld,p),oe(u,em,p);const m=oe(h,Ri);oe(m,Ri,m),Qe(m,t.domain,h),Qe(p,t.domain,h),oe(p,Ms,f),oe(p,Ri,m);const g=oe(p,ja);Qe(g,t.numeric,TF);const y=oe(o,Ri),v=oe(o,Ms);oe(y,Ri,y),Qe(y,t.domain,o),Qe(v,n,s),Qe(v,t.domain,o);const b=Ii(dy);Qe(v,t.tld,b),Qe(v,t.utld,b),Qe(b,t.domain,o),Qe(b,n,s),oe(b,Ms,v),oe(b,Ri,y),oe(b,wa,u);const w=oe(b,ja),x=Ii(dy);Qe(w,t.numeric,x);const S=Ii(dy),E=Ii();Qe(S,e,S),Qe(S,r,E),Qe(E,e,S),Qe(E,r,E),oe(b,As,S),oe(x,As,S);const N=oe(a,ja),_=oe(l,ja),k=oe(_,As),j=oe(k,As);Qe(a,t.domain,o),oe(a,Ms,v),oe(a,Ri,y),Qe(l,t.domain,o),oe(l,Ms,v),oe(l,Ri,y),Qe(N,t.domain,S),oe(N,As,S),oe(N,hp,S),Qe(j,t.domain,S),Qe(j,e,S),oe(j,As,S);const T=[[cp,up],[Xv,Jv],[Zv,e0],[t0,r0],[n0,i0],[s0,o0],[a0,l0],[c0,u0]];for(let P=0;P<T.length;P++){const[O,D]=T[P],F=oe(S,O);oe(E,O,F),oe(F,D,S);const $=Ii(dy);Qe(F,e,$);const q=Ii();Qe(F,r),Qe($,e,$),Qe($,r,q),Qe(q,e,$),Qe(q,r,q),oe($,D,S),oe(q,D,S)}return oe(i,em,b),oe(i,tD,E2e),{start:i,tokens:uoe}}function N2e(t,e,r){let n=r.length,i=0,s=[],o=[];for(;i<n;){let a=t,l=null,u=null,d=0,h=null,f=-1;for(;i<n&&!(l=a.go(r[i].t));)o.push(r[i++]);for(;i<n&&(u=l||a.go(r[i].t));)l=null,a=u,a.accepts()?(f=0,h=a):f>=0&&f++,i++,d++;if(f<0)i-=d,i<n&&(o.push(r[i]),i++);else{o.length>0&&(s.push(Vx(OF,e,o)),o=[]),i-=f,d-=f;const p=h.t,m=r.slice(i-d,i);s.push(Vx(p,e,m))}}return o.length>0&&s.push(Vx(OF,e,o)),s}function Vx(t,e,r){const n=r[0].s,i=r[r.length-1].e,s=e.slice(n,i);return new t(s,r)}const C2e=typeof console<"u"&&console&&console.warn||(()=>{}),k2e="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Bt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function j2e(){return ei.groups={},Bt.scanner=null,Bt.parser=null,Bt.tokenQueue=[],Bt.pluginQueue=[],Bt.customSchemes=[],Bt.initialized=!1,Bt}function PF(t,e=!1){if(Bt.initialized&&C2e(`linkifyjs: already initialized - will not register custom scheme "${t}" ${k2e}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Bt.customSchemes.push([t,e])}function T2e(){Bt.scanner=w2e(Bt.customSchemes);for(let t=0;t<Bt.tokenQueue.length;t++)Bt.tokenQueue[t][1]({scanner:Bt.scanner});Bt.parser=_2e(Bt.scanner.tokens);for(let t=0;t<Bt.pluginQueue.length;t++)Bt.pluginQueue[t][1]({scanner:Bt.scanner,parser:Bt.parser});return Bt.initialized=!0,Bt}function aD(t){return Bt.initialized||T2e(),N2e(Bt.parser.start,t,doe(Bt.scanner.start,t))}aD.scan=doe;function foe(t,e=null,r=null){if(e&&typeof e=="object"){if(r)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);r=e,e=null}const n=new oD(r),i=aD(t),s=[];for(let o=0;o<i.length;o++){const a=i[o];a.isLink&&(!e||a.t===e)&&n.check(a)&&s.push(a.toFormattedObject(n))}return s}var lD="[\0- -\u2029]",O2e=new RegExp(lD),P2e=new RegExp(`${lD}$`),I2e=new RegExp(lD,"g");function R2e(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function M2e(t){return new Xt({key:new Fr("autolink"),appendTransaction:(e,r,n)=>{const i=e.some(u=>u.docChanged)&&!r.doc.eq(n.doc),s=e.some(u=>u.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=n,a=Tse(r.doc,[...e]);if(Dse(a).forEach(({newRange:u})=>{const d=kwe(n.doc,u,p=>p.isTextblock);let h,f;if(d.length>1)h=d[0],f=n.doc.textBetween(h.pos,h.pos+h.node.nodeSize,void 0," ");else if(d.length){const p=n.doc.textBetween(u.from,u.to," "," ");if(!P2e.test(p))return;h=d[0],f=n.doc.textBetween(h.pos,u.to,void 0," ")}if(h&&f){const p=f.split(O2e).filter(Boolean);if(p.length<=0)return!1;const m=p[p.length-1],g=h.pos+f.lastIndexOf(m);if(!m)return!1;const y=aD(m).map(v=>v.toObject(t.defaultProtocol));if(!R2e(y))return!1;y.filter(v=>v.isLink).map(v=>({...v,from:g+v.start+1,to:g+v.end+1})).filter(v=>n.schema.marks.code?!n.doc.rangeHasMark(v.from,v.to,n.schema.marks.code):!0).filter(v=>t.validate(v.value)).filter(v=>t.shouldAutoLink(v.value)).forEach(v=>{YA(v.from,v.to,n.doc).some(b=>b.mark.type===t.type)||o.addMark(v.from,v.to,t.type.create({href:v.href}))})}}),!!o.steps.length)return o}})}function A2e(t){return new Xt({key:new Fr("handleClickLink"),props:{handleClick:(e,r,n)=>{var i,s;if(n.button!==0||!e.editable)return!1;let o=!1;if(t.enableClickSelection&&(o=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){let a=null;if(n.target instanceof HTMLAnchorElement)a=n.target;else{let h=n.target;const f=[];for(;h.nodeName!=="DIV";)f.push(h),h=h.parentNode;a=f.find(p=>p.nodeName==="A")}if(!a)return o;const l=Ase(e.state,t.type.name),u=(i=a==null?void 0:a.href)!=null?i:l.href,d=(s=a==null?void 0:a.target)!=null?s:l.target;a&&u&&(window.open(u,d),o=!0)}return o}}})}function D2e(t){return new Xt({key:new Fr("handlePasteLink"),props:{handlePaste:(e,r,n)=>{const{shouldAutoLink:i}=t,{state:s}=e,{selection:o}=s,{empty:a}=o;if(a)return!1;let l="";n.content.forEach(d=>{l+=d.textContent});const u=foe(l,{defaultProtocol:t.defaultProtocol}).find(d=>d.isLink&&d.value===l);return!l||!u||i!==void 0&&!i(u.value)?!1:t.editor.commands.setMark(t.type,{href:u.href})}}})}function Bl(t,e){const r=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(n=>{const i=typeof n=="string"?n:n.scheme;i&&r.push(i)}),!t||t.replace(I2e,"").match(new RegExp(`^(?:(?:${r.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var poe=uu.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){PF(t);return}PF(t.scheme,t.optionalSlashes)})},onDestroy(){j2e()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Bl(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),r=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||r&&!t.includes("@"))return!0;const i=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(i)||!/\./.test(i))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:r=>!!Bl(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Bl(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Cr(this.options.HTMLAttributes,t),0]:["a",Cr(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var r;const n=((r=t.attrs)==null?void 0:r.href)||"";return`[${e.renderChildren(t)}](${n})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:r}=t;return this.options.isAllowedUri(r,{defaultValidate:n=>!!Bl(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:r}=t||{};return r&&!this.options.isAllowedUri(r,{defaultValidate:n=>!!Bl(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Qc({find:t=>{const e=[];if(t){const{protocols:r,defaultProtocol:n}=this.options,i=foe(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!Bl(o,r),protocols:r,defaultProtocol:n}));i.length&&i.forEach(s=>{this.options.shouldAutoLink(s.value)&&e.push({text:s.value,data:{href:s.href},index:s.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:r}=this.options;return this.options.autolink&&t.push(M2e({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:n=>this.options.isAllowedUri(n,{defaultValidate:i=>!!Bl(i,e),protocols:e,defaultProtocol:r}),shouldAutoLink:this.options.shouldAutoLink})),t.push(A2e({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(D2e({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),$2e=poe,F2e=Object.defineProperty,q2e=(t,e)=>{for(var r in e)F2e(t,r,{get:e[r],enumerable:!0})},L2e="listItem",IF="textStyle",RF=/^\s*([-+*])\s$/,moe=ki.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Cr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(L2e,this.editor.getAttributes(IF)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=dh({find:RF,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=dh({find:RF,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(IF),editor:this.editor})),[t]}}),goe=ki.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Cr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let r=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(i=>i.type==="paragraph"))r=e.parseChildren(t.tokens);else{const i=t.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(r=[{type:"paragraph",content:e.parseInline(i.tokens)}],t.tokens.length>1){const o=t.tokens.slice(1),a=e.parseChildren(o);r.push(...a)}}else r=e.parseChildren(t.tokens)}return r.length===0&&(r=[{type:"paragraph",content:[]}]),{type:"listItem",content:r}},renderMarkdown:(t,e,r)=>ZA(t,e,n=>n.parentType==="bulletList"?"- ":n.parentType==="orderedList"?`${n.index+1}. `:"- ",r),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),B2e={};q2e(B2e,{findListItemPos:()=>Lm,getNextListDepth:()=>cD,handleBackspace:()=>OR,handleDelete:()=>PR,hasListBefore:()=>yoe,hasListItemAfter:()=>z2e,hasListItemBefore:()=>voe,listItemHasSubList:()=>boe,nextListIsDeeper:()=>xoe,nextListIsHigher:()=>woe});var Lm=(t,e)=>{const{$from:r}=e.selection,n=Nr(t,e.schema);let i=null,s=r.depth,o=r.pos,a=null;for(;s>0&&a===null;)i=r.node(s),i.type===n?a=s:(s-=1,o-=1);return a===null?null:{$pos:e.doc.resolve(o),depth:a}},cD=(t,e)=>{const r=Lm(t,e);if(!r)return!1;const[,n]=$we(e,t,r.$pos.pos+4);return n},yoe=(t,e,r)=>{const{$anchor:n}=t.selection,i=Math.max(0,n.pos-2),s=t.doc.resolve(i).node();return!(!s||!r.includes(s.type.name))},voe=(t,e)=>{var r;const{$anchor:n}=e.selection,i=e.doc.resolve(n.pos-2);return!(i.index()===0||((r=i.nodeBefore)==null?void 0:r.type.name)!==t)},boe=(t,e,r)=>{if(!r)return!1;const n=Nr(t,e.schema);let i=!1;return r.descendants(s=>{s.type===n&&(i=!0)}),i},OR=(t,e,r)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!xl(t.state,e)&&yoe(t.state,e,r)){const{$anchor:a}=t.state.selection,l=t.state.doc.resolve(a.before()-1),u=[];l.node().descendants((f,p)=>{f.type.name===e&&u.push({node:f,pos:p})});const d=u.at(-1);if(!d)return!1;const h=t.state.doc.resolve(l.start()+d.pos+1);return t.chain().cut({from:a.start()-1,to:a.end()+1},h.end()).joinForward().run()}if(!xl(t.state,e)||!Bwe(t.state))return!1;const n=Lm(e,t.state);if(!n)return!1;const s=t.state.doc.resolve(n.$pos.pos-2).node(n.depth),o=boe(e,t.state,s);return voe(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},xoe=(t,e)=>{const r=cD(t,e),n=Lm(t,e);return!n||!r?!1:r>n.depth},woe=(t,e)=>{const r=cD(t,e),n=Lm(t,e);return!n||!r?!1:r<n.depth},PR=(t,e)=>{if(!xl(t.state,e)||!Lwe(t.state,e))return!1;const{selection:r}=t.state,{$from:n,$to:i}=r;return!r.empty&&n.sameParent(i)?!1:xoe(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():woe(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},z2e=(t,e)=>{var r;const{$anchor:n}=e.selection,i=e.doc.resolve(n.pos-n.parentOffset-2);return!(i.index()===i.parent.childCount-1||((r=i.nodeAfter)==null?void 0:r.type.name)!==t)},Soe=mr.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&PR(t,r)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&PR(t,r)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&OR(t,r,n)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&OR(t,r,n)&&(e=!0)}),e}}}}),MF=/^(\s*)(\d+)\.\s+(.*)$/,W2e=/^\s/;function V2e(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r],s=i.match(MF);if(!s)break;const[,o,a,l]=s,u=o.length;let d=l,h=r+1;const f=[i];for(;h<t.length;){const p=t[h];if(p.match(MF))break;if(p.trim()==="")f.push(p),d+=`
`,h+=1;else if(p.match(W2e))f.push(p),d+=`
${p.slice(u+2)}`,h+=1;else break}e.push({indent:u,number:parseInt(a,10),content:d.trim(),raw:f.join(`
`)}),n=h,r=h}return[e,n]}function Eoe(t,e,r){var n;const i=[];let s=0;for(;s<t.length;){const o=t[s];if(o.indent===e){const a=o.content.split(`
`),l=((n=a[0])==null?void 0:n.trim())||"",u=[];l&&u.push({type:"paragraph",raw:l,tokens:r.inlineTokens(l)});const d=a.slice(1).join(`
`).trim();if(d){const p=r.blockTokens(d);u.push(...p)}let h=s+1;const f=[];for(;h<t.length&&t[h].indent>e;)f.push(t[h]),h+=1;if(f.length>0){const p=Math.min(...f.map(g=>g.indent)),m=Eoe(f,p,r);u.push({type:"list",ordered:!0,start:f[0].number,items:m,raw:f.map(g=>g.raw).join(`
`)})}i.push({type:"list_item",raw:o.raw,tokens:u}),s=h}else s+=1}return i}function U2e(t,e){return t.map(r=>{if(r.type!=="list_item")return e.parseChildren([r])[0];const n=[];return r.tokens&&r.tokens.length>0&&r.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")n.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const s=e.parseChildren([i]);n.push({type:"paragraph",content:s})}else{const s=e.parseChildren([i]);s.length>0&&n.push(...s)}}),{type:"listItem",content:n}})}var H2e="listItem",AF="textStyle",DF=/^(\d+)\.\s$/,_oe=ki.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...r}=t;return e===1?["ol",Cr(this.options.HTMLAttributes,r),0]:["ol",Cr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const r=t.start||1,n=t.items?U2e(t.items,e):[];return r!==1?{type:"orderedList",attrs:{start:r},content:n}:{type:"orderedList",content:n}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),r=e==null?void 0:e.index;return r!==void 0?r:-1},tokenize:(t,e,r)=>{var n;const i=t.split(`
`),[s,o]=V2e(i);if(s.length===0)return;const a=Eoe(s,0,r);return a.length===0?void 0:{type:"list",ordered:!0,start:((n=s[0])==null?void 0:n.number)||1,items:a,raw:i.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(H2e,this.editor.getAttributes(AF)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=dh({find:DF,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=dh({find:DF,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(AF)}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1],editor:this.editor})),[t]}}),K2e=/^\s*(\[([( |x])?\])\s$/,G2e=ki.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Cr(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const r=[];if(t.tokens&&t.tokens.length>0?r.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?r.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):r.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const n=e.parseChildren(t.nestedTokens);r.push(...n)}return e.createNode("taskItem",{checked:t.checked||!1},r)},renderMarkdown:(t,e)=>{var r;const i=`- [${(r=t.attrs)!=null&&r.checked?"x":" "}] `;return ZA(t,e,i)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:r,editor:n})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),u=h=>{var f,p;a.ariaLabel=((p=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:p.call(f,h,a.checked))||`Task item checkbox for ${h.textContent||"empty task item"}`};u(t),s.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",h=>h.preventDefault()),a.addEventListener("change",h=>{if(!n.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:f}=h.target;n.isEditable&&typeof r=="function"&&n.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:p})=>{const m=r();if(typeof m!="number")return!1;const g=p.doc.nodeAt(m);return p.setNodeMarkup(m,void 0,{...g==null?void 0:g.attrs,checked:f}),!0}).run(),!n.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,f)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([h,f])=>{i.setAttribute(h,f)}),i.dataset.checked=t.attrs.checked,a.checked=t.attrs.checked,s.append(a,o),i.append(s,l),Object.entries(e).forEach(([h,f])=>{i.setAttribute(h,f)});let d=new Set(Object.keys(e));return{dom:i,contentDOM:l,update:h=>{if(h.type!==this.type)return!1;i.dataset.checked=h.attrs.checked,a.checked=h.attrs.checked,u(h);const f=n.extensionManager.attributes,p=Zp(h,f),m=new Set(Object.keys(p)),g=this.options.HTMLAttributes;return d.forEach(y=>{m.has(y)||(y in g?i.setAttribute(y,g[y]):i.removeAttribute(y))}),Object.entries(p).forEach(([y,v])=>{v==null?y in g?i.setAttribute(y,g[y]):i.removeAttribute(y):i.setAttribute(y,v)}),d=m,!0}}}},addInputRules(){return[dh({find:K2e,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),Y2e=ki.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Cr(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const r=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return r!==void 0?r:-1},tokenize(t,e,r){const n=s=>{const o=xR(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:r.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:n},r);return o?[{type:"taskList",raw:o.raw,items:o.items}]:r.blockTokens(s)},i=xR(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,o)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:r.inlineTokens(s.mainContent),nestedTokens:o}),customNestedParser:n},r);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});mr.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(moe.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(goe.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(Soe.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(_oe.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(G2e.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(Y2e.configure(this.options.taskList)),t}});var Q2e=ki.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Cr(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const r=t.tokens||[];return r.length===1&&r[0].type==="image"?e.parseChildren([r[0]]):e.createNode("paragraph",void 0,e.parseInline(r))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),X2e=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,J2e=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Z2e=uu.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Cr(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[uh({find:X2e,type:this.type})]},addPasteRules(){return[Qc({find:J2e,type:this.type})]}}),e_e=ki.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),t_e=uu.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Cr(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,r){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!i)return;const s=i[2].trim();return{type:"underline",raw:i[0],text:s,tokens:r.inlineTokens(s)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function r_e(t={}){return new Xt({view(e){return new n_e(e,t)}})}class n_e{constructor(e,r){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(n=r.width)!==null&&n!==void 0?n:1,this.color=r.color===!1?void 0:r.color||"black",this.class=r.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:r})=>this.editorView.dom.removeEventListener(e,r))}update(e,r){this.cursorPos!=null&&r.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),r=!e.parent.inlineContent,n,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,a=s.height/i.offsetHeight;if(r){let h=e.nodeBefore,f=e.nodeAfter;if(h||f){let p=this.editorView.nodeDOM(this.cursorPos-(h?h.nodeSize:0));if(p){let m=p.getBoundingClientRect(),g=h?m.bottom:m.top;h&&f&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let y=this.width/2*a;n={left:m.left,right:m.right,top:g-y,bottom:g+y}}}}if(!n){let h=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*o;n={left:h.left-f,right:h.left+f,top:h.top,bottom:h.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",r),this.element.classList.toggle("prosemirror-dropcursor-inline",!r);let u,d;if(!l||l==document.body&&getComputedStyle(l).position=="static")u=-pageXOffset,d=-pageYOffset;else{let h=l.getBoundingClientRect(),f=h.width/l.offsetWidth,p=h.height/l.offsetHeight;u=h.left-l.scrollLeft*f,d=h.top-l.scrollTop*p}this.element.style.left=(n.left-u)/o+"px",this.element.style.top=(n.top-d)/a+"px",this.element.style.width=(n.right-n.left)/o+"px",this.element.style.height=(n.bottom-n.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let r=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=r&&r.inside>=0&&this.editorView.state.doc.nodeAt(r.inside),i=n&&n.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,r,e):i;if(r&&!s){let o=r.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=xie(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class or extends Xe{constructor(e){super(e,e)}map(e,r){let n=e.resolve(r.map(this.head));return or.valid(n)?new or(n):Xe.near(n)}content(){return xe.empty}eq(e){return e instanceof or&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new or(e.resolve(r.pos))}getBookmark(){return new uD(this.anchor)}static valid(e){let r=e.parent;if(r.isTextblock||!i_e(e)||!s_e(e))return!1;let n=r.type.spec.allowGapCursor;if(n!=null)return n;let i=r.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,r,n=!1){e:for(;;){if(!n&&or.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(r>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(r>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=r;let l=e.doc.resolve(i);if(or.valid(l))return l}for(;;){let o=r>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Re.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*r),n=!1;continue e}break}s=o,i+=r;let a=e.doc.resolve(i);if(or.valid(a))return a}return null}}}or.prototype.visible=!1;or.findFrom=or.findGapCursorFrom;Xe.jsonID("gapcursor",or);class uD{constructor(e){this.pos=e}map(e){return new uD(e.map(this.pos))}resolve(e){let r=e.resolve(this.pos);return or.valid(r)?new or(r):Xe.near(r)}}function Noe(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function i_e(t){for(let e=t.depth;e>=0;e--){let r=t.index(e),n=t.node(e);if(r==0){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||Noe(i.type))return!0;if(i.inlineContent)return!1}}return!0}function s_e(t){for(let e=t.depth;e>=0;e--){let r=t.indexAfter(e),n=t.node(e);if(r==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||Noe(i.type))return!0;if(i.inlineContent)return!1}}return!0}function o_e(){return new Xt({props:{decorations:u_e,createSelectionBetween(t,e,r){return e.pos==r.pos&&or.valid(r)?new or(r):null},handleClick:l_e,handleKeyDown:a_e,handleDOMEvents:{beforeinput:c_e}}})}const a_e=wse({ArrowLeft:hy("horiz",-1),ArrowRight:hy("horiz",1),ArrowUp:hy("vert",-1),ArrowDown:hy("vert",1)});function hy(t,e){const r=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(n,i,s){let o=n.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof Be){if(!s.endOfTextblock(r)||a.depth==0)return!1;l=!1,a=n.doc.resolve(e>0?a.after():a.before())}let u=or.findGapCursorFrom(a,e,l);return u?(i&&i(n.tr.setSelection(new or(u))),!0):!1}}function l_e(t,e,r){if(!t||!t.editable)return!1;let n=t.state.doc.resolve(e);if(!or.valid(n))return!1;let i=t.posAtCoords({left:r.clientX,top:r.clientY});return i&&i.inside>-1&&Re.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new or(n))),!0)}function c_e(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof or))return!1;let{$from:r}=t.state.selection,n=r.parent.contentMatchAt(r.index()).findWrapping(t.state.schema.nodes.text);if(!n)return!1;let i=te.empty;for(let o=n.length-1;o>=0;o--)i=te.from(n[o].createAndFill(null,i));let s=t.state.tr.replace(r.pos,r.pos,new xe(i,0,0));return s.setSelection(Be.near(s.doc.resolve(r.pos+1))),t.dispatch(s),!1}function u_e(t){if(!(t.selection instanceof or))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Kt.create(t.doc,[$n.widget(t.selection.head,e,{key:"gapcursor"})])}var _0=200,Kr=function(){};Kr.prototype.append=function(e){return e.length?(e=Kr.from(e),!this.length&&e||e.length<_0&&this.leafAppend(e)||this.length<_0&&e.leafPrepend(this)||this.appendInner(e)):this};Kr.prototype.prepend=function(e){return e.length?Kr.from(e).append(this):this};Kr.prototype.appendInner=function(e){return new d_e(this,e)};Kr.prototype.slice=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=this.length),e>=r?Kr.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,r))};Kr.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Kr.prototype.forEach=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length),r<=n?this.forEachInner(e,r,n,0):this.forEachInvertedInner(e,r,n,0)};Kr.prototype.map=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},r,n),i};Kr.from=function(e){return e instanceof Kr?e:e&&e.length?new Coe(e):Kr.empty};var Coe=function(t){function e(n){t.call(this),this.values=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=_0)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=_0)return new e(i.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(e.prototype,r),e}(Kr);Kr.empty=new Coe([]);var d_e=function(t){function e(r,n){t.call(this),this.left=r,this.right=n,this.length=r.length+n.length,this.depth=Math.max(r.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(n,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(n,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(n,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(n,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(n,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(n,i){if(n==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(n,i):n>=s?this.right.slice(n-s,i-s):this.left.slice(n,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(n){var i=this.right.leafAppend(n);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(n){var i=this.left.leafPrepend(n);if(i)return new e(i,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e}(Kr);const h_e=500;class ys{constructor(e,r){this.items=e,this.eventCount=r}popEvent(e,r){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let i,s;r&&(i=this.remapping(n,this.items.length),s=i.maps.length);let o=e.tr,a,l,u=[],d=[];return this.items.forEach((h,f)=>{if(!h.step){i||(i=this.remapping(n,f+1),s=i.maps.length),s--,d.push(h);return}if(i){d.push(new Ds(h.map));let p=h.step.map(i.slice(s)),m;p&&o.maybeStep(p).doc&&(m=o.mapping.maps[o.mapping.maps.length-1],u.push(new Ds(m,void 0,void 0,u.length+d.length))),s--,m&&i.appendMap(m,s)}else o.maybeStep(h.step);if(h.selection)return a=i?h.selection.map(i.slice(s)):h.selection,l=new ys(this.items.slice(0,n).append(d.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,r,n,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let d=0;d<e.steps.length;d++){let h=e.steps[d].invert(e.docs[d]),f=new Ds(e.mapping.maps[d],h,r),p;(p=l&&l.merge(f))&&(f=p,d?s.pop():a=a.slice(0,a.length-1)),s.push(f),r&&(o++,r=void 0),i||(l=f)}let u=o-n.depth;return u>p_e&&(a=f_e(a,u),o-=u),new ys(a.append(s),o)}remapping(e,r){let n=new Kp;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?n.maps.length-i.mirrorOffset:void 0;n.appendMap(i.map,o)},e,r),n}addMaps(e){return this.eventCount==0?this:new ys(this.items.append(e.map(r=>new Ds(r))),this.eventCount)}rebased(e,r){if(!this.eventCount)return this;let n=[],i=Math.max(0,this.items.length-r),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},i);let l=r;this.items.forEach(f=>{let p=s.getMirror(--l);if(p==null)return;o=Math.min(o,p);let m=s.maps[p];if(f.step){let g=e.steps[p].invert(e.docs[p]),y=f.selection&&f.selection.map(s.slice(l+1,p));y&&a++,n.push(new Ds(m,g,y))}else n.push(new Ds(m))},i);let u=[];for(let f=r;f<o;f++)u.push(new Ds(s.maps[f]));let d=this.items.slice(0,i).append(u).append(n),h=new ys(d,a);return h.emptyItemCount()>h_e&&(h=h.compress(this.items.length-n.length)),h}emptyItemCount(){let e=0;return this.items.forEach(r=>{r.step||e++}),e}compress(e=this.items.length){let r=this.remapping(0,e),n=r.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(r.slice(n)),u=l&&l.getMap();if(n--,u&&r.appendMap(u,n),l){let d=o.selection&&o.selection.map(r.slice(n));d&&s++;let h=new Ds(u.invert(),l,d),f,p=i.length-1;(f=i.length&&i[p].merge(h))?i[p]=f:i.push(h)}}else o.map&&n--},this.items.length,0),new ys(Kr.from(i.reverse()),s)}}ys.empty=new ys(Kr.empty,0);function f_e(t,e){let r;return t.forEach((n,i)=>{if(n.selection&&e--==0)return r=i,!1}),t.slice(r)}class Ds{constructor(e,r,n,i){this.map=e,this.step=r,this.selection=n,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let r=e.step.merge(this.step);if(r)return new Ds(r.getMap().invert(),r,this.selection)}}}class Sa{constructor(e,r,n,i,s){this.done=e,this.undone=r,this.prevRanges=n,this.prevTime=i,this.prevComposition=s}}const p_e=20;function m_e(t,e,r,n){let i=r.getMeta(Nc),s;if(i)return i.historyState;r.getMeta(v_e)&&(t=new Sa(t.done,t.undone,null,0,-1));let o=r.getMeta("appendedTransaction");if(r.steps.length==0)return t;if(o&&o.getMeta(Nc))return o.getMeta(Nc).redo?new Sa(t.done.addTransform(r,void 0,n,Vy(e)),t.undone,$F(r.mapping.maps),t.prevTime,t.prevComposition):new Sa(t.done,t.undone.addTransform(r,void 0,n,Vy(e)),null,t.prevTime,t.prevComposition);if(r.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=r.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(r.time||0)-n.newGroupDelay||!g_e(r,t.prevRanges)),u=o?Ux(t.prevRanges,r.mapping):$F(r.mapping.maps);return new Sa(t.done.addTransform(r,l?e.selection.getBookmark():void 0,n,Vy(e)),ys.empty,u,r.time,a??t.prevComposition)}else return(s=r.getMeta("rebased"))?new Sa(t.done.rebased(r,s),t.undone.rebased(r,s),Ux(t.prevRanges,r.mapping),t.prevTime,t.prevComposition):new Sa(t.done.addMaps(r.mapping.maps),t.undone.addMaps(r.mapping.maps),Ux(t.prevRanges,r.mapping),t.prevTime,t.prevComposition)}function g_e(t,e){if(!e)return!1;if(!t.docChanged)return!0;let r=!1;return t.mapping.maps[0].forEach((n,i)=>{for(let s=0;s<e.length;s+=2)n<=e[s+1]&&i>=e[s]&&(r=!0)}),r}function $F(t){let e=[];for(let r=t.length-1;r>=0&&e.length==0;r--)t[r].forEach((n,i,s,o)=>e.push(s,o));return e}function Ux(t,e){if(!t)return null;let r=[];for(let n=0;n<t.length;n+=2){let i=e.map(t[n],1),s=e.map(t[n+1],-1);i<=s&&r.push(i,s)}return r}function y_e(t,e,r){let n=Vy(e),i=Nc.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,n);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,n),l=new Sa(r?a:s.remaining,r?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(Nc,{redo:r,historyState:l})}let Hx=!1,FF=null;function Vy(t){let e=t.plugins;if(FF!=e){Hx=!1,FF=e;for(let r=0;r<e.length;r++)if(e[r].spec.historyPreserveItems){Hx=!0;break}}return Hx}const Nc=new Fr("history"),v_e=new Fr("closeHistory");function b_e(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Xt({key:Nc,state:{init(){return new Sa(ys.empty,ys.empty,null,0,-1)},apply(e,r,n){return m_e(r,n,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,r){let n=r.inputType,i=n=="historyUndo"?joe:n=="historyRedo"?Toe:null;return!i||!e.editable?!1:(r.preventDefault(),i(e.state,e.dispatch))}}}})}function koe(t,e){return(r,n)=>{let i=Nc.getState(r);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(n){let s=y_e(i,r,t);s&&n(e?s.scrollIntoView():s)}return!0}}const joe=koe(!1,!0),Toe=koe(!0,!0);mr.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const n=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(n)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,r=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(r)}},addProseMirrorPlugins(){let t=!1;return[new Xt({key:new Fr("characterCount"),appendTransaction:(e,r,n)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const s=this.storage.characters({node:n.doc});if(s>i){const o=s-i,a=0,l=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const u=n.tr.deleteRange(a,l);return t=!0,u}t=!0},filterTransaction:(e,r)=>{const n=this.options.limit;if(!e.docChanged||n===0||n===null||n===void 0)return!0;const i=this.storage.characters({node:r.doc}),s=this.storage.characters({node:e.doc});if(s<=n||i>n&&s>n&&s<=i)return!0;if(i>n&&s>n&&s>i||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,l=s-n,u=a-l,d=a;return e.deleteRange(u,d),!(this.storage.characters({node:e.doc})>n)}})]}});var x_e=mr.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[r_e(this.options)]}});mr.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Xt({key:new Fr("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:r,isFocused:n}=this.editor,{anchor:i}=e,s=[];if(!r||!n)return Kt.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((l,u)=>{if(l.isText)return;if(!(i>=u&&i<=u+l.nodeSize-1))return!1;o+=1});let a=0;return t.descendants((l,u)=>{if(l.isText||!(i>=u&&i<=u+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&o-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";s.push($n.node(u,u+l.nodeSize,{class:this.options.className}))}),Kt.create(t,s)}}})]}});var w_e=mr.create({name:"gapCursor",addProseMirrorPlugins(){return[o_e()]},extendNodeSchema(t){var e;const r={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=bt(Oe(t,"allowGapCursor",r)))!=null?e:null}}}),S_e=mr.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Xt({key:new Fr("placeholder"),props:{decorations:({doc:t,selection:e})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:n}=e,i=[];if(!r)return null;const s=this.editor.isEmpty;return t.descendants((o,a)=>{const l=n>=a&&n<=a+o.nodeSize,u=!o.isLeaf&&Ib(o);if((l||!this.options.showOnlyCurrent)&&u){const d=[this.options.emptyNodeClass];s&&d.push(this.options.emptyEditorClass);const h=$n.node(a,a+o.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:a,hasAnchor:l}):this.options.placeholder});i.push(h)}return this.options.includeChildren}),Kt.create(t,i)}}})]}});mr.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new Xt({key:new Fr("selection"),props:{decorations(r){return r.selection.empty||t.isFocused||!t.isEditable||$se(r.selection)||t.view.dragging?null:Kt.create(r.doc,[$n.inline(r.selection.from,r.selection.to,{class:e.className})])}}})]}});function qF({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var E_e=mr.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new Fr(this.name),r=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",n=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(r).includes(i.name));return[new Xt({key:e,appendTransaction:(i,s,o)=>{const{doc:a,tr:l,schema:u}=o,d=e.getState(o),h=a.content.size,f=u.nodes[r];if(d)return l.insert(h,f.create())},state:{init:(i,s)=>{const o=s.tr.doc.lastChild;return!qF({node:o,types:n})},apply:(i,s)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return s;const o=i.doc.lastChild;return!qF({node:o,types:n})}}})]}}),__e=mr.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>joe(t,e),redo:()=>({state:t,dispatch:e})=>Toe(t,e)}},addProseMirrorPlugins(){return[b_e(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),N_e=mr.create({name:"starterKit",addExtensions(){var t,e,r,n;const i=[];return this.options.bold!==!1&&i.push(XEe.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(HEe.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(moe.configure(this.options.bulletList)),this.options.code!==!1&&i.push(e2e.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(n2e.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(i2e.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(x_e.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(w_e.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(s2e.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(o2e.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(__e.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(a2e.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(h2e.configure(this.options.italic)),this.options.listItem!==!1&&i.push(goe.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(Soe.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(poe.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(_oe.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(Q2e.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(Z2e.configure(this.options.strike)),this.options.text!==!1&&i.push(e_e.configure(this.options.text)),this.options.underline!==!1&&i.push(t_e.configure((r=this.options)==null?void 0:r.underline)),this.options.trailingNode!==!1&&i.push(E_e.configure((n=this.options)==null?void 0:n.trailingNode)),i}}),C_e=N_e,k_e=S_e;const ha=({onClick:t,isActive:e,disabled:r,children:n,title:i})=>c.jsx("button",{type:"button",onClick:t,disabled:r,title:i,className:`p-1.5 rounded hover:bg-gray-100 transition-colors ${e?"bg-gray-200 text-primary-600":"text-gray-600"} ${r?"opacity-50 cursor-not-allowed":""}`,children:n}),j_e=({editor:t})=>{if(!t)return null;const e=()=>{const r=t.getAttributes("link").href,n=window.prompt("Enter URL:",r);if(n===null)return;if(n===""){t.chain().focus().extendMarkRange("link").unsetLink().run();return}const i=n.match(/^https?:\/\//)?n:`https://${n}`;t.chain().focus().extendMarkRange("link").setLink({href:i}).run()};return c.jsxs("div",{className:"flex items-center gap-0.5 p-1.5 border-b border-gray-200 bg-gray-50 rounded-t-md",children:[c.jsx(ha,{onClick:()=>t.chain().focus().toggleBold().run(),isActive:t.isActive("bold"),title:"Bold (Cmd+B)",children:c.jsx(hge,{className:"w-4 h-4"})}),c.jsx(ha,{onClick:()=>t.chain().focus().toggleItalic().run(),isActive:t.isActive("italic"),title:"Italic (Cmd+I)",children:c.jsx(bge,{className:"w-4 h-4"})}),c.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),c.jsx(ha,{onClick:()=>t.chain().focus().toggleBulletList().run(),isActive:t.isActive("bulletList"),title:"Bullet list",children:c.jsx(nne,{className:"w-4 h-4"})}),c.jsx(ha,{onClick:()=>t.chain().focus().toggleOrderedList().run(),isActive:t.isActive("orderedList"),title:"Numbered list",children:c.jsx(wge,{className:"w-4 h-4"})}),c.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),c.jsx(ha,{onClick:e,isActive:t.isActive("link"),title:"Add link",children:c.jsx(uA,{className:"w-4 h-4"})}),t.isActive("link")&&c.jsx(ha,{onClick:()=>t.chain().focus().unsetLink().run(),title:"Remove link",children:c.jsx(Pge,{className:"w-4 h-4"})}),c.jsx("div",{className:"flex-1"}),c.jsx(ha,{onClick:()=>t.chain().focus().undo().run(),disabled:!t.can().undo(),title:"Undo (Cmd+Z)",children:c.jsx(Oge,{className:"w-4 h-4"})}),c.jsx(ha,{onClick:()=>t.chain().focus().redo().run(),disabled:!t.can().redo(),title:"Redo (Cmd+Shift+Z)",children:c.jsx(jge,{className:"w-4 h-4"})})]})};function Ooe({value:t="",onChange:e,placeholder:r="Write something...",disabled:n=!1,minHeight:i="120px",autoFocus:s=!1}){const o=BEe({extensions:[C_e.configure({heading:!1,codeBlock:!1,blockquote:!1}),k_e.configure({placeholder:r}),$2e.configure({openOnClick:!1,HTMLAttributes:{class:"text-primary-600 hover:text-primary-700 underline"}})],content:t,editable:!n,autofocus:s,onUpdate:({editor:a})=>{const l=a.getHTML();e(l==="<p></p>"||l===""?"":l)}});if(o&&t!==o.getHTML()&&t!==""){const a=o.getHTML();t&&(a==="<p></p>"||a===""||t!==a)&&o.commands.setContent(t,!1)}return c.jsxs("div",{className:`border border-gray-300 rounded-md overflow-hidden focus-within:ring-2 focus-within:ring-primary-500 focus-within:border-transparent ${n?"bg-gray-100 opacity-60":"bg-white"}`,children:[c.jsx(j_e,{editor:o}),c.jsx(MEe,{editor:o,className:"prose prose-sm max-w-none",style:{minHeight:i}}),c.jsx("style",{children:`
        .ProseMirror {
          padding: 0.75rem;
          min-height: ${i};
          outline: none;
        }
        .ProseMirror p.is-editor-empty:first-child::before {
          content: attr(data-placeholder);
          float: left;
          color: #9ca3af;
          pointer-events: none;
          height: 0;
        }
        .ProseMirror ul,
        .ProseMirror ol {
          padding-left: 1.5rem;
        }
        .ProseMirror ul {
          list-style-type: disc;
        }
        .ProseMirror ol {
          list-style-type: decimal;
        }
        .ProseMirror li {
          margin-bottom: 0.25rem;
        }
        .ProseMirror p {
          margin-bottom: 0.5rem;
        }
        .ProseMirror p:last-child {
          margin-bottom: 0;
        }
      `})]})}function IR(t){if(!t)return!0;const e=t.trim();return e===""||e==="<p></p>"||e==="<p><br></p>"}const Kx=[{id:"call",label:"Phone call",icon:dA},{id:"email",label:"Email",icon:hb},{id:"chat",label:"Chat",icon:fb},{id:"meeting",label:"Meeting",icon:$r},{id:"coffee",label:"Coffee",icon:Jre},{id:"lunch",label:"Lunch",icon:cne},{id:"note",label:"Other",icon:db}];function dD({isOpen:t,onClose:e,onSubmit:r,isLoading:n,personId:i,initialData:s=null,activity:o=null}){const[a,l]=C.useState("call"),[u,d]=C.useState(""),[h,f]=C.useState(""),[p,m]=C.useState(""),[g,y]=C.useState([]),[v,b]=C.useState(!1),[w,x]=C.useState(""),{data:S}=lu(),E=!!o;if(C.useEffect(()=>{if(t){const $=new Date,q=$.toISOString().split("T")[0],M=$.toTimeString().slice(0,5);o?(d(o.activity_date||q),f(o.activity_time||""),m(o.content||""),y(o.participants||[]),l(o.activity_type||"note")):s?(d(s.activity_date||q),f(s.activity_time||M),m(s.content||""),y(s.participants||[]),l(s.activity_type||"note")):(d(q),f(M),m(""),y([]),l("call"))}},[t,s,o]),!t)return null;const N=(S||[]).filter($=>$.id.toString()!==(i==null?void 0:i.toString())),_=N.filter($=>{var q;return(q=$.name)==null?void 0:q.toLowerCase().includes(w.toLowerCase())}),k=$=>{$.preventDefault(),!IR(p)&&(r({activity_type:a,activity_date:u||null,activity_time:h||null,content:p,participants:g}),m(""),y([]),d(new Date().toISOString().split("T")[0]),f(new Date().toTimeString().slice(0,5)))},j=()=>{m(""),y([]),d(""),f(""),b(!1),x(""),e()},T=$=>{y(q=>q.includes($)?q.filter(M=>M!==$):[...q,$])},P=$=>{y(q=>q.filter(M=>M!==$))},O=()=>N.filter($=>g.includes($.id)),D=$=>{if(!$)return"";try{return new Date($).toISOString().split("T")[0]}catch{return""}};return(Kx.find($=>$.id===a)||Kx[0]).icon,c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b sticky top-0 bg-white z-10",children:[c.jsx("h2",{className:"text-lg font-semibold",children:E?"Edit activity":"Add activity"}),c.jsx("button",{onClick:j,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(ht,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:k,className:"p-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"space-y-4 md:col-span-1",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Activity type"}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:Kx.map($=>{const q=$.icon,M=a===$.id;return c.jsxs("button",{type:"button",onClick:()=>l($.id),className:`flex flex-col items-center justify-center p-3 border-2 rounded-lg transition-colors ${M?"border-primary-600 bg-primary-50 text-primary-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,disabled:n,children:[c.jsx(q,{className:"w-5 h-5 mb-1"}),c.jsx("span",{className:"text-xs",children:$.label})]},$.id)})})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"activity-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),c.jsx("input",{id:"activity-date",type:"date",value:D(u),onChange:$=>d($.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"activity-time",className:"block text-sm font-medium text-gray-700 mb-2",children:"Time"}),c.jsx("input",{id:"activity-time",type:"time",value:h,onChange:$=>f($.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Participants (optional)"}),O().length>0&&c.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:O().map($=>c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-700 rounded-full text-sm",children:[$.name,c.jsx("button",{type:"button",onClick:()=>P($.id),className:"hover:text-primary-900",disabled:n,children:c.jsx(ht,{className:"w-3 h-3"})})]},$.id))}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{type:"button",onClick:()=>b(!v),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-left text-sm text-gray-500 hover:border-gray-400",disabled:n,children:g.length===0?"Add participants...":"Add more participants..."}),v&&c.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[c.jsx("div",{className:"p-2 border-b",children:c.jsx("input",{type:"text",placeholder:"Search people...",value:w,onChange:$=>x($.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded",autoFocus:!0})}),c.jsx("div",{className:"max-h-48 overflow-y-auto",children:_.length===0?c.jsx("div",{className:"p-3 text-sm text-gray-500 text-center",children:"No people found"}):_.map($=>{var M;const q=g.includes($.id);return c.jsxs("button",{type:"button",onClick:()=>T($.id),className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2 ${q?"bg-primary-50":""}`,children:[c.jsx("input",{type:"checkbox",checked:q,onChange:()=>{},className:"mr-1"}),$.thumbnail?c.jsx("img",{src:$.thumbnail,alt:$.name,className:"w-6 h-6 rounded-full"}):c.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-xs text-gray-500",children:((M=$.first_name)==null?void 0:M[0])||"?"})}),c.jsx("span",{children:$.name})]},$.id)})})]})]})]})]}),c.jsxs("div",{className:"flex flex-col md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),c.jsx("div",{className:"flex-1",children:c.jsx(Ooe,{value:p,onChange:m,placeholder:"What happened? Add your call notes, chat summary, meeting notes...",disabled:n,minHeight:"280px"})})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 mt-6 pt-4 border-t",children:[c.jsx("button",{type:"button",onClick:j,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n||IR(p),children:n?E?"Saving...":"Adding...":E?"Save":"Add activity"})]})]})]})})}function fa({title:t,value:e,icon:r,href:n}){return c.jsx(qe,{to:n,className:"card p-6 hover:shadow-md transition-shadow",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-500",children:t}),c.jsx("p",{className:"mt-1 text-3xl font-semibold",children:e})]}),c.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:c.jsx(r,{className:"w-6 h-6 text-primary-600"})})]})})}function Gx({person:t,hideStar:e=!1}){var r,n;return c.jsxs(qe,{to:`/people/${t.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[t.thumbnail?c.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-10 h-10 rounded-full object-cover"}):c.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-sm font-medium text-gray-500",children:((r=t.first_name)==null?void 0:r[0])||"?"})}),c.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.name}),((n=t.labels)==null?void 0:n.length)>0&&c.jsx("p",{className:"text-xs text-gray-500 truncate",children:t.labels.join(", ")})]}),t.is_favorite&&!e&&c.jsx(zc,{className:"w-4 h-4 text-yellow-400 fill-current"})]})}function T_e({reminder:t}){var o,a,l;const e=t.days_until;let r="bg-gray-100 text-gray-700";e===0?r="bg-green-100 text-green-700":e<=3?r="bg-orange-100 text-orange-700":e<=7&&(r="bg-yellow-100 text-yellow-700");const n=(a=(o=t.related_people)==null?void 0:o[0])==null?void 0:a.id,i=((l=t.related_people)==null?void 0:l.length)>0,s=c.jsxs(c.Fragment,{children:[c.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${r}`,children:e===0?"Today":`${e}d`}),c.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.title}),c.jsx("p",{className:"text-xs text-gray-500",children:Rn(new Date(t.next_occurrence),"MMMM d, yyyy")})]}),i&&c.jsx("div",{className:"flex -space-x-2 ml-3 flex-shrink-0",children:t.related_people.slice(0,3).map(u=>{var d;return u.thumbnail?c.jsx("img",{src:u.thumbnail,alt:u.name,loading:"lazy",className:"w-10 h-10 rounded-full border-2 border-white object-cover"},u.id):c.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full border-2 border-white flex items-center justify-center",children:c.jsx("span",{className:"text-sm",children:(d=u.name)==null?void 0:d[0]})},u.id)})})]});return i&&n?c.jsx(qe,{to:`/people/${n}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:s}):c.jsx("div",{className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:s})}function O_e({todo:t,onToggle:e}){var n;const r=Dm(t);return c.jsxs(qe,{to:`/people/${t.person_id}`,className:"flex items-start p-3 rounded-lg hover:bg-gray-50 transition-colors group",children:[c.jsx("button",{onClick:i=>{i.preventDefault(),i.stopPropagation(),e(t)},className:"mt-0.5 mr-3 flex-shrink-0",title:t.is_completed?"Mark as incomplete":"Mark as complete",children:t.is_completed?c.jsx(Hi,{className:"w-5 h-5 text-primary-600"}):c.jsx(yl,{className:`w-5 h-5 ${r?"text-red-600":"text-gray-400"}`})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:`text-sm font-medium ${t.is_completed?"line-through text-gray-400":r?"text-red-600":"text-gray-900"}`,children:t.content}),c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.person_thumbnail?c.jsx("img",{src:t.person_thumbnail,alt:t.person_name,loading:"lazy",className:"w-5 h-5 rounded-full object-cover"}):c.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-xs text-gray-500",children:(n=t.person_name)==null?void 0:n[0]})}),c.jsx("span",{className:"text-xs text-gray-500 truncate",children:t.person_name})]})]}),t.due_date&&c.jsxs("div",{className:`ml-3 text-xs text-right flex-shrink-0 ${r&&!t.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:[c.jsx("div",{children:Rn(new Date(t.due_date),"MMM d")}),r&&!t.is_completed&&c.jsx("div",{className:"text-red-600",children:"overdue"})]})]})}function P_e(){return c.jsxs("div",{className:"card p-12 text-center",children:[c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx("div",{className:"p-4 bg-primary-50 rounded-full",children:c.jsx(ane,{className:"w-12 h-12 text-primary-600"})})}),c.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:["Welcome to ",Vc,"!"]}),c.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"Get started by adding your first contact, organization, or important date. Your dashboard will populate as you add more information."}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[c.jsxs(qe,{to:"/people/new",className:"inline-flex items-center px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[c.jsx(lr,{className:"w-5 h-5 mr-2"}),"Add Your First Person"]}),c.jsxs(qe,{to:"/companies/new",className:"inline-flex items-center px-6 py-3 bg-white text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[c.jsx(lr,{className:"w-5 h-5 mr-2"}),"Add Your First Organization"]})]})]})}function I_e(){var j,T,P;const{data:t,isLoading:e,error:r}=Yge(),{data:n}=yne(!1),i=vne(),s=gA(),[o,a]=C.useState(null),[l,u]=C.useState(!1),[d,h]=C.useState(!1),[f,p]=C.useState(null),m=O=>{if(!O.is_completed){a(O),u(!0);return}i.mutate({todoId:O.id,data:{content:O.content,due_date:O.due_date,is_completed:!1}})},g=()=>{o&&(i.mutate({todoId:o.id,data:{content:o.content,due_date:o.due_date,is_completed:!0}}),u(!1),a(null))},y=()=>{if(!o)return;const O=new Date().toISOString().split("T")[0];p({content:o.content,activity_date:O,activity_type:"note",participants:[]}),u(!1),h(!0)},v=async O=>{if(o)try{await s.mutateAsync({personId:o.person_id,data:O}),await i.mutateAsync({todoId:o.id,data:{content:o.content,due_date:o.due_date,is_completed:!0}}),h(!1),a(null),p(null)}catch{alert("Failed to create activity. Please try again.")}};if(e)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(r){const O=((j=r==null?void 0:r.response)==null?void 0:j.status)>=500||!(r!=null&&r.response);return c.jsx("div",{className:"card p-8 text-center",children:c.jsx("div",{className:"text-red-600 mb-2",children:O?c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"font-medium mb-1",children:"Failed to load dashboard data"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Please check your connection and try refreshing the page."})]}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"font-medium mb-1",children:"Unable to load dashboard"}),c.jsx("p",{className:"text-sm text-gray-600",children:((P=(T=r==null?void 0:r.response)==null?void 0:T.data)==null?void 0:P.message)||"An error occurred while loading your data."})]})})})}const{stats:b,recent_people:w,upcoming_reminders:x,favorites:S,recently_contacted:E}=t||{};if(((b==null?void 0:b.total_people)||0)+((b==null?void 0:b.total_companies)||0)+((b==null?void 0:b.total_dates)||0)===0)return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsx(fa,{title:"Total people",value:0,icon:$r,href:"/people"}),c.jsx(fa,{title:"Organizations",value:0,icon:Dr,href:"/companies"}),c.jsx(fa,{title:"Events",value:0,icon:Ys,href:"/dates"}),c.jsx(fa,{title:"Open todos",value:0,icon:Hi,href:"/todos"})]}),c.jsx(P_e,{})]});const k=(n==null?void 0:n.slice(0,5))||[];return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsx(fa,{title:"Total people",value:(b==null?void 0:b.total_people)||0,icon:$r,href:"/people"}),c.jsx(fa,{title:"Organizations",value:(b==null?void 0:b.total_companies)||0,icon:Dr,href:"/companies"}),c.jsx(fa,{title:"Events",value:(b==null?void 0:b.total_dates)||0,icon:Ys,href:"/dates"}),c.jsx(fa,{title:"Open todos",value:(b==null?void 0:b.open_todos_count)||0,icon:Hi,href:"/todos"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"card",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx(Ys,{className:"w-5 h-5 mr-2 text-gray-500"}),"Upcoming reminders"]}),c.jsxs(qe,{to:"/dates",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all reminders",c.jsx(ox,{className:"w-4 h-4 ml-1"})]})]}),c.jsx("div",{className:"divide-y divide-gray-100",children:(x==null?void 0:x.length)>0?x.map(O=>c.jsx(T_e,{reminder:O},O.id)):c.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No upcoming reminders"})})]}),c.jsxs("div",{className:"card",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx(Hi,{className:"w-5 h-5 mr-2 text-gray-500"}),"Open todos"]}),c.jsxs(qe,{to:"/todos",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all todos",c.jsx(ox,{className:"w-4 h-4 ml-1"})]})]}),c.jsx("div",{className:"divide-y divide-gray-100",children:k.length>0?k.map(O=>c.jsx(O_e,{todo:O,onToggle:m},O.id)):c.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No open todos"})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx(zc,{className:"w-5 h-5 mr-2 text-yellow-500 fill-current"}),"Favorites"]})}),(S==null?void 0:S.length)>0?c.jsx("div",{className:"divide-y divide-gray-100",children:S.slice(0,5).map(O=>c.jsx(Gx,{person:O,hideStar:!0},O.id))}):c.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No favorites yet"})]}),c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx(fb,{className:"w-5 h-5 mr-2 text-gray-500"}),"Recently contacted"]})}),(E==null?void 0:E.length)>0?c.jsx("div",{className:"divide-y divide-gray-100",children:E.map(O=>c.jsx(Gx,{person:O},O.id))}):c.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No recent activities yet"})]}),c.jsxs("div",{className:"card",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx($r,{className:"w-5 h-5 mr-2 text-gray-500"}),"Recently edited"]}),c.jsxs(qe,{to:"/people",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all",c.jsx(ox,{className:"w-4 h-4 ml-1"})]})]}),c.jsx("div",{className:"divide-y divide-gray-100",children:(w==null?void 0:w.length)>0?w.map(O=>c.jsx(Gx,{person:O},O.id)):c.jsxs("p",{className:"p-4 text-sm text-gray-500 text-center",children:["No people yet. ",c.jsx(qe,{to:"/people/new",className:"text-primary-600",children:"Add someone"})]})})]})]}),c.jsx(_A,{isOpen:l,onClose:()=>{u(!1),a(null)},todo:o,onComplete:g,onCompleteAsActivity:y}),c.jsx(dD,{isOpen:d,onClose:()=>{h(!1),a(null),p(null)},onSubmit:v,isLoading:s.isPending,personId:o==null?void 0:o.person_id,initialData:f})]})}function LF(t){var i;const e=((i=t.acf)==null?void 0:i.work_history)||[];if(e.length===0)return null;const r=e.find(s=>s.is_current&&s.company);if(r)return r.company;const n=e.filter(s=>s.company).sort((s,o)=>{const a=s.start_date?new Date(s.start_date):new Date(0);return(o.start_date?new Date(o.start_date):new Date(0))-a});return n.length>0?n[0].company:null}function R_e({person:t,companyName:e,isDeceased:r}){var n,i;return c.jsx(qe,{to:`/people/${t.id}`,className:"card p-4 hover:shadow-md transition-shadow",children:c.jsxs("div",{className:"flex items-start",children:[t.thumbnail?c.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-12 h-12 rounded-full object-cover"}):c.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-lg font-medium text-gray-500",children:((n=t.first_name)==null?void 0:n[0])||"?"})}),c.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsxs("h3",{className:"text-sm font-medium text-gray-900 truncate",children:[t.name,r&&c.jsx("span",{className:"ml-1 text-gray-500",children:""})]}),t.is_favorite&&c.jsx(zc,{className:"w-4 h-4 ml-1 text-yellow-400 fill-current flex-shrink-0"})]}),e&&c.jsx("p",{className:"text-xs text-gray-500 mt-0.5 truncate",children:e}),((i=t.labels)==null?void 0:i.length)>0&&c.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.labels.slice(0,3).map(s=>c.jsx("span",{className:"inline-flex px-2 py-0.5 text-xs rounded-full bg-gray-100 text-gray-600",children:s},s))})]})]})})}function M_e({person:t,companyName:e,workspaces:r,isSelected:n,onToggleSelection:i,isOdd:s}){var l,u;const a=(((l=t.acf)==null?void 0:l._assigned_workspaces)||[]).map(d=>{const h=typeof d=="string"?parseInt(d,10):d,f=r.find(p=>p.id===h);return f==null?void 0:f.title}).filter(Boolean).join(", ");return c.jsxs("tr",{className:`hover:bg-gray-100 ${s?"bg-gray-50":"bg-white"}`,children:[c.jsx("td",{className:"pl-4 pr-2 py-3 w-10",children:c.jsx("button",{onClick:d=>{d.preventDefault(),i(t.id)},className:"text-gray-400 hover:text-gray-600",children:n?c.jsx(Hi,{className:"w-5 h-5 text-primary-600"}):c.jsx(yl,{className:"w-5 h-5"})})}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:c.jsxs(qe,{to:`/people/${t.id}`,className:"flex items-center",children:[t.thumbnail?c.jsx("img",{src:t.thumbnail,alt:"",className:"w-8 h-8 rounded-full object-cover"}):c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-sm font-medium text-gray-500",children:((u=t.first_name)==null?void 0:u[0])||"?"})}),c.jsx("div",{className:"ml-3",children:c.jsxs("div",{className:"flex items-center",children:[c.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[t.first_name||"",t.is_deceased&&c.jsx("span",{className:"ml-1 text-gray-500",children:""})]}),t.is_favorite&&c.jsx(zc,{className:"w-4 h-4 ml-1 text-yellow-400 fill-current"})]})})]})}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:t.last_name||"-"}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:e||"-"}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:a||"-"}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:t.labels&&t.labels.length>0?c.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.labels.slice(0,3).map(d=>c.jsx("span",{className:"inline-flex px-2 py-0.5 text-xs rounded-full bg-gray-100 text-gray-600",children:d},d)),t.labels.length>3&&c.jsxs("span",{className:"text-xs text-gray-400",children:["+",t.labels.length-3," more"]})]}):"-"})]})}function Of({field:t,label:e,currentSortField:r,currentSortOrder:n,onSort:i}){const s=r===t;return c.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:c.jsxs("button",{onClick:()=>i(t),className:"flex items-center gap-1 hover:text-gray-700 cursor-pointer",children:[e,s&&(n==="asc"?c.jsx(Gre,{className:"w-3 h-3"}):c.jsx(Kre,{className:"w-3 h-3"}))]})})}function A_e({people:t,companyMap:e,workspaces:r,selectedIds:n,onToggleSelection:i,onToggleSelectAll:s,isAllSelected:o,isSomeSelected:a,sortField:l,sortOrder:u,onSort:d}){return c.jsx("div",{className:"card overflow-hidden",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10 shadow-sm",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"pl-4 pr-2 py-3 w-10",children:c.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",title:o?"Deselect all":"Select all",children:o?c.jsx(Hi,{className:"w-5 h-5 text-primary-600"}):a?c.jsx(Nge,{className:"w-5 h-5 text-primary-600"}):c.jsx(yl,{className:"w-5 h-5"})})}),c.jsx(Of,{field:"first_name",label:"First Name",currentSortField:l,currentSortOrder:u,onSort:d}),c.jsx(Of,{field:"last_name",label:"Last Name",currentSortField:l,currentSortOrder:u,onSort:d}),c.jsx(Of,{field:"organization",label:"Organization",currentSortField:l,currentSortOrder:u,onSort:d}),c.jsx(Of,{field:"workspace",label:"Workspace",currentSortField:l,currentSortOrder:u,onSort:d}),c.jsx(Of,{field:"labels",label:"Labels",currentSortField:l,currentSortOrder:u,onSort:d})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map((h,f)=>c.jsx(M_e,{person:h,companyName:e[h.id],workspaces:r,isSelected:n.has(h.id),onToggleSelection:i,isOdd:f%2===1},h.id))})]})})}function D_e({isOpen:t,onClose:e,selectedCount:r,onSubmit:n,isLoading:i}){const[s,o]=C.useState("private");if(C.useEffect(()=>{t&&o("private")},[t]),!t)return null;const a=[{value:"private",label:"Private",description:"Only you can see these contacts",icon:Rm},{value:"workspace",label:"Workspace",description:"Share with workspace members",icon:$r}];return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Change Visibility"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:i,children:c.jsx(ht,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsxs("p",{className:"text-sm text-gray-600",children:["Select visibility for ",r," ",r===1?"person":"people",":"]}),c.jsx("div",{className:"space-y-2",children:a.map(l=>{const u=l.icon,d=s===l.value;return c.jsxs("button",{type:"button",onClick:()=>o(l.value),disabled:i,className:`w-full flex items-start gap-3 p-3 rounded-lg border-2 text-left transition-colors ${d?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:[c.jsx(u,{className:`w-5 h-5 mt-0.5 ${d?"text-primary-600":"text-gray-400"}`}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:`text-sm font-medium ${d?"text-primary-900":"text-gray-900"}`,children:l.label}),c.jsx("div",{className:"text-xs text-gray-500",children:l.description})]}),d&&c.jsx(Bc,{className:"w-5 h-5 text-primary-600 mt-0.5"})]},l.value)})})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:i,children:"Cancel"}),c.jsx("button",{type:"button",onClick:()=>n(s),className:"btn-primary",disabled:i,children:i?"Applying...":`Apply to ${r} ${r===1?"person":"people"}`})]})]})})}function $_e({isOpen:t,onClose:e,selectedCount:r,workspaces:n,onSubmit:i,isLoading:s}){const[o,a]=C.useState([]);if(C.useEffect(()=>{t&&a([])},[t]),!t)return null;const l=u=>{a(d=>d.includes(u)?d.filter(h=>h!==u):[...d,u])};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Assign to Workspace"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:s,children:c.jsx(ht,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsxs("p",{className:"text-sm text-gray-600",children:["Select workspaces for ",r," ",r===1?"person":"people",":"]}),n.length===0?c.jsxs("div",{className:"text-center py-6 text-gray-500",children:[c.jsx($r,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),c.jsx("p",{className:"text-sm",children:"No workspaces available."}),c.jsx("p",{className:"text-xs",children:"Create a workspace first to use this feature."})]}):c.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:n.map(u=>{const d=o.includes(u.id);return c.jsxs("button",{type:"button",onClick:()=>l(u.id),disabled:s,className:`w-full flex items-center gap-3 p-3 rounded-lg border-2 text-left transition-colors ${d?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:[c.jsx("div",{className:`flex items-center justify-center w-5 h-5 border-2 rounded ${d?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:d&&c.jsx(Bc,{className:"w-3 h-3 text-white"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:u.title}),c.jsxs("div",{className:"text-xs text-gray-500",children:[u.member_count," members"]})]})]},u.id)})})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:s,children:"Cancel"}),c.jsx("button",{type:"button",onClick:()=>i(o),className:"btn-primary",disabled:s||n.length===0,children:s?"Assigning...":`Assign to ${r} ${r===1?"person":"people"}`})]})]})})}function F_e(){var Le,Ve;const[t,e]=C.useState(!1),[r,n]=C.useState(!1),[i,s]=C.useState([]),[o,a]=C.useState(""),[l,u]=C.useState(""),[d,h]=C.useState("all"),[f,p]=C.useState(""),[m,g]=C.useState("first_name"),[y,v]=C.useState("asc"),[b,w]=C.useState(()=>localStorage.getItem("peopleViewMode")||"card"),[x,S]=C.useState(new Set),[E,N]=C.useState(!1),[_,k]=C.useState(!1),[j,T]=C.useState(!1),[P,O]=C.useState(!1),[D,F]=C.useState(!1),[$,q]=C.useState(!1),M=C.useRef(null),B=C.useRef(null),X=C.useRef(null),Q=Un(),{data:le,isLoading:G,error:se}=lu(),{data:ke=[]}=bb(),be=Lge(),$e=(Le=window.prmConfig)==null?void 0:Le.userId,Ie=hne({onSuccess:U=>{N(!1),Q(`/people/${U.id}`)}}),Nt=async U=>{k(!0);try{await Ie.mutateAsync(U)}finally{k(!1)}},{data:Ct}=at({queryKey:["person-labels"],queryFn:async()=>(await et.getPersonLabels()).data}),kt=(Ct==null?void 0:Ct.map(U=>U.name))||[],er=C.useMemo(()=>{if(!le)return[];const U=le.map(K=>K.birth_year).filter(K=>K!=null);return[...new Set(U)].sort((K,z)=>z-K)},[le]);C.useEffect(()=>{localStorage.setItem("peopleViewMode",b)},[b]),C.useEffect(()=>{const U=K=>{B.current&&!B.current.contains(K.target)&&M.current&&!M.current.contains(K.target)&&e(!1),X.current&&!X.current.contains(K.target)&&T(!1)};return document.addEventListener("mousedown",U),()=>{document.removeEventListener("mousedown",U)}},[]);const Ye=C.useMemo(()=>{if(!le)return[];let U=[...le];if(r&&(U=U.filter(K=>K.is_favorite)),i.length>0&&(U=U.filter(K=>{const z=K.labels||[];return i.some(Z=>z.includes(Z))})),o){const K=parseInt(o,10);U=U.filter(z=>z.birth_year===K)}if(l){const K=new Date;let z;switch(l){case"7":z=new Date(K.setDate(K.getDate()-7));break;case"30":z=new Date(K.setDate(K.getDate()-30));break;case"90":z=new Date(K.setDate(K.getDate()-90));break;case"365":z=new Date(K.setDate(K.getDate()-365));break;default:z=null}z&&(U=U.filter(Z=>Z.modified?new Date(Z.modified)>=z:!1))}return d==="mine"?U=U.filter(K=>K.author===$e):d==="shared"&&(U=U.filter(K=>K.author!==$e)),f&&(U=U.filter(K=>{var Z;return(((Z=K.acf)==null?void 0:Z._assigned_workspaces)||[]).includes(parseInt(f))})),U},[le,r,i,o,l,d,f,$e]),yr=r||i.length>0||o||l||d!=="all"||f,en=U=>{s(K=>K.includes(U)?K.filter(z=>z!==U):[...K,U])},Pr=()=>{n(!1),s([]),a(""),u(""),h("all"),p("")},st=U=>{S(K=>{const z=new Set(K);return z.has(U)?z.delete(U):z.add(U),z})},vr=()=>{x.size===Ye.length?S(new Set):S(new Set(Ye.map(U=>U.id)))},mi=()=>S(new Set),tn=Ye.length>0&&x.size===Ye.length,A=x.size>0&&x.size<Ye.length;C.useEffect(()=>{S(new Set)},[r,i,o,l,d,f,le]);const L=C.useMemo(()=>{if(!Ye)return[];const U=Ye.map(K=>LF(K)).filter(Boolean);return[...new Set(U)]},[Ye]),{data:V}=at({queryKey:["companies","batch",L.sort().join(",")],queryFn:async()=>L.length===0?[]:(await et.getCompanies({per_page:100,include:L.join(",")})).data,enabled:L.length>0}),ce=C.useMemo(()=>{const U={};return V&&V.forEach(K=>{U[K.id]=dr(K)}),U},[V]),re=C.useMemo(()=>{const U={};return Ye.forEach(K=>{const z=LF(K);z&&ce[z]&&(U[K.id]=ce[z])}),U},[Ye,ce]),ne=U=>{var z;return(((z=U.acf)==null?void 0:z._assigned_workspaces)||[]).map(Z=>{const pe=typeof Z=="string"?parseInt(Z,10):Z,we=ke.find(We=>We.id===pe);return we==null?void 0:we.title}).filter(Boolean).join(", ")},ge=C.useMemo(()=>Ye?[...Ye].sort((U,K)=>{var we,We,rn,Ir,ks,js,Pu,Ts,Fl,Os;let z,Z;if(m==="modified"){z=U.modified?new Date(U.modified).getTime():0,Z=K.modified?new Date(K.modified).getTime():0;const Ot=z-Z;return y==="asc"?Ot:-Ot}if(m==="organization"){if(z=(re[U.id]||"").toLowerCase(),Z=(re[K.id]||"").toLowerCase(),!z&&Z)return y==="asc"?1:-1;if(z&&!Z)return y==="asc"?-1:1;if(!z&&!Z)return 0;const Ot=z.localeCompare(Z);return y==="asc"?Ot:-Ot}if(m==="workspace"){if(z=ne(U).toLowerCase(),Z=ne(K).toLowerCase(),!z&&Z)return y==="asc"?1:-1;if(z&&!Z)return y==="asc"?-1:1;if(!z&&!Z)return 0;const Ot=z.localeCompare(Z);return y==="asc"?Ot:-Ot}if(m==="labels"){if(z=(((we=U.labels)==null?void 0:we[0])||"").toLowerCase(),Z=(((We=K.labels)==null?void 0:We[0])||"").toLowerCase(),!z&&Z)return y==="asc"?1:-1;if(z&&!Z)return y==="asc"?-1:1;if(!z&&!Z)return 0;const Ot=z.localeCompare(Z);return y==="asc"?Ot:-Ot}if(m==="first_name"?(z=(((rn=U.acf)==null?void 0:rn.first_name)||U.first_name||"").toLowerCase(),Z=(((Ir=K.acf)==null?void 0:Ir.first_name)||K.first_name||"").toLowerCase()):(z=(((ks=U.acf)==null?void 0:ks.last_name)||U.last_name||"").toLowerCase(),Z=(((js=K.acf)==null?void 0:js.last_name)||K.last_name||"").toLowerCase()),z===Z){const Ot=m==="first_name"?(((Pu=U.acf)==null?void 0:Pu.last_name)||U.last_name||"").toLowerCase():(((Ts=U.acf)==null?void 0:Ts.first_name)||U.first_name||"").toLowerCase(),io=m==="first_name"?(((Fl=K.acf)==null?void 0:Fl.last_name)||K.last_name||"").toLowerCase():(((Os=K.acf)==null?void 0:Os.first_name)||K.first_name||"").toLowerCase(),Iu=Ot.localeCompare(io);return y==="asc"?Iu:-Iu}const pe=z.localeCompare(Z);return y==="asc"?pe:-pe}):[],[Ye,m,y,re,ke]);return c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsxs("div",{className:"flex items-center gap-2 border border-gray-200 rounded-lg p-1",children:[c.jsxs("select",{value:m,onChange:U=>g(U.target.value),className:"text-sm border-0 bg-transparent focus:ring-0 focus:outline-none cursor-pointer",children:[c.jsx("option",{value:"first_name",children:"First name"}),c.jsx("option",{value:"last_name",children:"Last name"}),c.jsx("option",{value:"modified",children:"Last modified"}),c.jsx("option",{value:"organization",children:"Organization"}),c.jsx("option",{value:"workspace",children:"Workspace"}),c.jsx("option",{value:"labels",children:"Labels"})]}),c.jsx("div",{className:"h-4 w-px bg-gray-300"}),c.jsx("button",{onClick:()=>v(y==="asc"?"desc":"asc"),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:`Sort ${y==="asc"?"descending":"ascending"}`,children:y==="asc"?c.jsx(Gre,{className:"w-4 h-4 text-gray-600"}):c.jsx(Kre,{className:"w-4 h-4 text-gray-600"})})]}),c.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg p-1",children:[c.jsx("button",{onClick:()=>w("card"),className:`p-1.5 rounded transition-colors ${b==="card"?"bg-gray-100":"hover:bg-gray-50"}`,title:"Card view",children:c.jsx(xge,{className:`w-4 h-4 ${b==="card"?"text-primary-600":"text-gray-600"}`})}),c.jsx("button",{onClick:()=>w("list"),className:`p-1.5 rounded transition-colors ${b==="list"?"bg-gray-100":"hover:bg-gray-50"}`,title:"List view",children:c.jsx(nne,{className:`w-4 h-4 ${b==="list"?"text-primary-600":"text-gray-600"}`})})]}),c.jsxs("div",{className:"relative",ref:M,children:[c.jsxs("button",{onClick:()=>e(!t),className:`btn-secondary ${yr?"bg-primary-50 text-primary-700 border-primary-200":""}`,children:[c.jsx(Wp,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Filter"}),yr&&c.jsx("span",{className:"ml-2 px-1.5 py-0.5 bg-primary-600 text-white text-xs rounded-full",children:i.length+(r?1:0)+(o?1:0)+(l?1:0)})]}),t&&c.jsx("div",{ref:B,className:"absolute top-full left-0 mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsx("div",{children:c.jsxs("label",{className:"flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:r,onChange:U=>n(U.target.checked),className:"sr-only"}),c.jsx("div",{className:`flex items-center justify-center w-5 h-5 border-2 rounded mr-3 ${r?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:r&&c.jsx(Bc,{className:"w-3 h-3 text-white"})}),c.jsxs("div",{className:"flex items-center",children:[c.jsx(zc,{className:"w-4 h-4 mr-2 text-yellow-400 fill-current"}),c.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Favorites only"})]})]})}),kt.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Labels"}),c.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:kt.map(U=>c.jsxs("label",{className:"flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded",children:[c.jsx("input",{type:"checkbox",checked:i.includes(U),onChange:()=>en(U),className:"sr-only"}),c.jsx("div",{className:`flex items-center justify-center w-5 h-5 border-2 rounded mr-3 ${i.includes(U)?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:i.includes(U)&&c.jsx(Bc,{className:"w-3 h-3 text-white"})}),c.jsx("span",{className:"text-sm text-gray-700",children:U})]},U))})]}),er.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Birth year"}),c.jsxs("select",{value:o,onChange:U=>a(U.target.value),className:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[c.jsx("option",{value:"",children:"All years"}),er.map(U=>c.jsx("option",{value:U,children:U},U))]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Last modified"}),c.jsxs("select",{value:l,onChange:U=>u(U.target.value),className:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[c.jsx("option",{value:"",children:"Any time"}),c.jsx("option",{value:"7",children:"Last 7 days"}),c.jsx("option",{value:"30",children:"Last 30 days"}),c.jsx("option",{value:"90",children:"Last 90 days"}),c.jsx("option",{value:"365",children:"Last year"})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Ownership"}),c.jsx("div",{className:"space-y-1",children:[{value:"all",label:"All Contacts"},{value:"mine",label:"My Contacts"},{value:"shared",label:"Shared with Me"}].map(U=>c.jsxs("label",{className:"flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded",children:[c.jsx("input",{type:"radio",name:"ownership",value:U.value,checked:d===U.value,onChange:K=>h(K.target.value),className:"sr-only"}),c.jsx("div",{className:`flex items-center justify-center w-4 h-4 border-2 rounded-full mr-3 ${d===U.value?"border-primary-600":"border-gray-300"}`,children:d===U.value&&c.jsx("div",{className:"w-2 h-2 bg-primary-600 rounded-full"})}),c.jsx("span",{className:"text-sm text-gray-700",children:U.label})]},U.value))})]}),ke.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Workspace"}),c.jsxs("select",{value:f,onChange:U=>p(U.target.value),className:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[c.jsx("option",{value:"",children:"All Workspaces"}),ke.map(U=>c.jsx("option",{value:U.id,children:U.title},U.id))]})]}),yr&&c.jsx("button",{onClick:Pr,className:"w-full text-sm text-primary-600 hover:text-primary-700 font-medium pt-2 border-t border-gray-200",children:"Clear all filters"})]})})]}),yr&&c.jsxs("div",{className:"flex flex-wrap gap-2",children:[r&&c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-800 rounded-full text-xs",children:[c.jsx(zc,{className:"w-3 h-3"}),"Favorites",c.jsx("button",{onClick:()=>n(!1),className:"hover:text-primary-600",children:c.jsx(ht,{className:"w-3 h-3"})})]}),i.map(U=>c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:[U,c.jsx("button",{onClick:()=>en(U),className:"hover:text-gray-600",children:c.jsx(ht,{className:"w-3 h-3"})})]},U)),o&&c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:["Born ",o,c.jsx("button",{onClick:()=>a(""),className:"hover:text-gray-600",children:c.jsx(ht,{className:"w-3 h-3"})})]}),l&&c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:["Modified: ",l==="7"?"Last 7 days":l==="30"?"Last 30 days":l==="90"?"Last 90 days":"Last year",c.jsx("button",{onClick:()=>u(""),className:"hover:text-gray-600",children:c.jsx(ht,{className:"w-3 h-3"})})]}),d!=="all"&&c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-800 rounded-full text-xs",children:[d==="mine"?"My Contacts":"Shared with Me",c.jsx("button",{onClick:()=>h("all"),className:"hover:text-primary-600",children:c.jsx(ht,{className:"w-3 h-3"})})]}),f&&c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:[((Ve=ke.find(U=>U.id===parseInt(f)))==null?void 0:Ve.title)||"Workspace",c.jsx("button",{onClick:()=>p(""),className:"hover:text-blue-600",children:c.jsx(ht,{className:"w-3 h-3"})})]})]}),c.jsxs("button",{onClick:()=>N(!0),className:"btn-primary",children:[c.jsx(lr,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Add person"})]})]})}),G&&c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),se&&c.jsx("div",{className:"card p-6 text-center",children:c.jsx("p",{className:"text-red-600",children:"Failed to load people."})}),!G&&!se&&(le==null?void 0:le.length)===0&&c.jsxs("div",{className:"card p-12 text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(lr,{className:"w-6 h-6 text-gray-400"})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No people found"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by adding your first person."}),c.jsxs("button",{onClick:()=>N(!0),className:"btn-primary",children:[c.jsx(lr,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Add person"})]})]}),!G&&!se&&(ge==null?void 0:ge.length)>0&&b==="card"&&c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:ge.map(U=>c.jsx(R_e,{person:U,companyName:re[U.id],isDeceased:U.is_deceased},U.id))}),b==="list"&&x.size>0&&c.jsxs("div",{className:"sticky top-0 z-20 flex items-center justify-between bg-primary-50 border border-primary-200 rounded-lg px-4 py-2 shadow-sm",children:[c.jsxs("span",{className:"text-sm text-primary-800 font-medium",children:[x.size," ",x.size===1?"person":"people"," selected"]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"relative",ref:X,children:[c.jsxs("button",{onClick:()=>T(!j),className:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-primary-700 bg-white border border-primary-300 rounded-md hover:bg-primary-50",children:["Actions",c.jsx(nh,{className:`w-4 h-4 transition-transform ${j?"rotate-180":""}`})]}),j&&c.jsx("div",{className:"absolute right-0 mt-1 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:c.jsxs("div",{className:"py-1",children:[c.jsxs("button",{onClick:()=>{T(!1),O(!0)},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[c.jsx(Rm,{className:"w-4 h-4"}),"Change visibility..."]}),c.jsxs("button",{onClick:()=>{T(!1),F(!0)},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[c.jsx($r,{className:"w-4 h-4"}),"Assign to workspace..."]})]})})]}),c.jsx("button",{onClick:mi,className:"text-sm text-primary-600 hover:text-primary-800 font-medium",children:"Clear selection"})]})]}),!G&&!se&&(ge==null?void 0:ge.length)>0&&b==="list"&&c.jsx(A_e,{people:ge,companyMap:re,workspaces:ke,selectedIds:x,onToggleSelection:st,onToggleSelectAll:vr,isAllSelected:tn,isSomeSelected:A,sortField:m,sortOrder:y,onSort:U=>{U===m?v(y==="asc"?"desc":"asc"):(g(U),v("asc"))}}),!G&&!se&&(le==null?void 0:le.length)>0&&(ge==null?void 0:ge.length)===0&&c.jsxs("div",{className:"card p-12 text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(Wp,{className:"w-6 h-6 text-gray-400"})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No people match your filters"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Try adjusting your filters to see more results."}),c.jsx("button",{onClick:Pr,className:"btn-secondary",children:"Clear filters"})]}),c.jsx(wA,{isOpen:E,onClose:()=>N(!1),onSubmit:Nt,isLoading:_}),c.jsx(D_e,{isOpen:P,onClose:()=>O(!1),selectedCount:x.size,onSubmit:async U=>{q(!0);try{await be.mutateAsync({ids:Array.from(x),updates:{visibility:U}}),mi(),O(!1)}finally{q(!1)}},isLoading:$}),c.jsx($_e,{isOpen:D,onClose:()=>F(!1),selectedCount:x.size,workspaces:ke,onSubmit:async U=>{q(!0);try{await be.mutateAsync({ids:Array.from(x),updates:{assigned_workspaces:U}}),mi(),F(!1)}finally{q(!1)}},isLoading:$})]})}const q_e="#0285FF",L_e=C.forwardRef(function({title:e="Bluesky",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=q_e),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[c.jsx("title",{children:e}),c.jsx("path",{d:"M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479.815 2.736 3.713 3.66 6.383 3.364.136-.02.275-.039.415-.056-.138.022-.276.04-.415.056-3.912.58-7.387 2.005-2.83 7.078 5.013 5.19 6.87-1.113 7.823-4.308.953 3.195 2.05 9.271 7.733 4.308 4.267-4.308 1.172-6.498-2.74-7.078a8.741 8.741 0 0 1-.415-.056c.14.017.279.036.415.056 2.67.297 5.568-.628 6.383-3.364.246-.828.624-5.79.624-6.478 0-.69-.139-1.861-.902-2.206-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8Z"})]})}),B_e="#0866FF",z_e=C.forwardRef(function({title:e="Facebook",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=B_e),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[c.jsx("title",{children:e}),c.jsx("path",{d:"M9.101 23.691v-7.98H6.627v-3.667h2.474v-1.58c0-4.085 1.848-5.978 5.858-5.978.401 0 .955.042 1.468.103a8.68 8.68 0 0 1 1.141.195v3.325a8.623 8.623 0 0 0-.653-.036 26.805 26.805 0 0 0-.733-.009c-.707 0-1.259.096-1.675.309a1.686 1.686 0 0 0-.679.622c-.258.42-.374.995-.374 1.752v1.297h3.919l-.386 2.103-.287 1.564h-3.246v8.245C19.396 23.238 24 18.179 24 12.044c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.628 3.874 10.35 9.101 11.647Z"})]})}),W_e="#FF0069",V_e=C.forwardRef(function({title:e="Instagram",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=W_e),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[c.jsx("title",{children:e}),c.jsx("path",{d:"M7.0301.084c-1.2768.0602-2.1487.264-2.911.5634-.7888.3075-1.4575.72-2.1228 1.3877-.6652.6677-1.075 1.3368-1.3802 2.127-.2954.7638-.4956 1.6365-.552 2.914-.0564 1.2775-.0689 1.6882-.0626 4.947.0062 3.2586.0206 3.6671.0825 4.9473.061 1.2765.264 2.1482.5635 2.9107.308.7889.72 1.4573 1.388 2.1228.6679.6655 1.3365 1.0743 2.1285 1.38.7632.295 1.6361.4961 2.9134.552 1.2773.056 1.6884.069 4.9462.0627 3.2578-.0062 3.668-.0207 4.9478-.0814 1.28-.0607 2.147-.2652 2.9098-.5633.7889-.3086 1.4578-.72 2.1228-1.3881.665-.6682 1.0745-1.3378 1.3795-2.1284.2957-.7632.4966-1.636.552-2.9124.056-1.2809.0692-1.6898.063-4.948-.0063-3.2583-.021-3.6668-.0817-4.9465-.0607-1.2797-.264-2.1487-.5633-2.9117-.3084-.7889-.72-1.4568-1.3876-2.1228C21.2982 1.33 20.628.9208 19.8378.6165 19.074.321 18.2017.1197 16.9244.0645 15.6471.0093 15.236-.005 11.977.0014 8.718.0076 8.31.0215 7.0301.0839m.1402 21.6932c-1.17-.0509-1.8053-.2453-2.2287-.408-.5606-.216-.96-.4771-1.3819-.895-.422-.4178-.6811-.8186-.9-1.378-.1644-.4234-.3624-1.058-.4171-2.228-.0595-1.2645-.072-1.6442-.079-4.848-.007-3.2037.0053-3.583.0607-4.848.05-1.169.2456-1.805.408-2.2282.216-.5613.4762-.96.895-1.3816.4188-.4217.8184-.6814 1.3783-.9003.423-.1651 1.0575-.3614 2.227-.4171 1.2655-.06 1.6447-.072 4.848-.079 3.2033-.007 3.5835.005 4.8495.0608 1.169.0508 1.8053.2445 2.228.408.5608.216.96.4754 1.3816.895.4217.4194.6816.8176.9005 1.3787.1653.4217.3617 1.056.4169 2.2263.0602 1.2655.0739 1.645.0796 4.848.0058 3.203-.0055 3.5834-.061 4.848-.051 1.17-.245 1.8055-.408 2.2294-.216.5604-.4763.96-.8954 1.3814-.419.4215-.8181.6811-1.3783.9-.4224.1649-1.0577.3617-2.2262.4174-1.2656.0595-1.6448.072-4.8493.079-3.2045.007-3.5825-.006-4.848-.0608M16.953 5.5864A1.44 1.44 0 1 0 18.39 4.144a1.44 1.44 0 0 0-1.437 1.4424M5.8385 12.012c.0067 3.4032 2.7706 6.1557 6.173 6.1493 3.4026-.0065 6.157-2.7701 6.1506-6.1733-.0065-3.4032-2.771-6.1565-6.174-6.1498-3.403.0067-6.156 2.771-6.1496 6.1738M8 12.0077a4 4 0 1 1 4.008 3.9921A3.9996 3.9996 0 0 1 8 12.0077"})]})}),U_e="#4A154B",H_e=C.forwardRef(function({title:e="Slack",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=U_e),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[c.jsx("title",{children:e}),c.jsx("path",{d:"M5.042 15.165a2.528 2.528 0 0 1-2.52 2.523A2.528 2.528 0 0 1 0 15.165a2.527 2.527 0 0 1 2.522-2.52h2.52v2.52zM6.313 15.165a2.527 2.527 0 0 1 2.521-2.52 2.527 2.527 0 0 1 2.521 2.52v6.313A2.528 2.528 0 0 1 8.834 24a2.528 2.528 0 0 1-2.521-2.522v-6.313zM8.834 5.042a2.528 2.528 0 0 1-2.521-2.52A2.528 2.528 0 0 1 8.834 0a2.528 2.528 0 0 1 2.521 2.522v2.52H8.834zM8.834 6.313a2.528 2.528 0 0 1 2.521 2.521 2.528 2.528 0 0 1-2.521 2.521H2.522A2.528 2.528 0 0 1 0 8.834a2.528 2.528 0 0 1 2.522-2.521h6.312zM18.956 8.834a2.528 2.528 0 0 1 2.522-2.521A2.528 2.528 0 0 1 24 8.834a2.528 2.528 0 0 1-2.522 2.521h-2.522V8.834zM17.688 8.834a2.528 2.528 0 0 1-2.523 2.521 2.527 2.527 0 0 1-2.52-2.521V2.522A2.527 2.527 0 0 1 15.165 0a2.528 2.528 0 0 1 2.523 2.522v6.312zM15.165 18.956a2.528 2.528 0 0 1 2.523 2.522A2.528 2.528 0 0 1 15.165 24a2.527 2.527 0 0 1-2.52-2.522v-2.522h2.52zM15.165 17.688a2.527 2.527 0 0 1-2.52-2.523 2.526 2.526 0 0 1 2.52-2.52h6.313A2.527 2.527 0 0 1 24 15.165a2.528 2.528 0 0 1-2.522 2.523h-6.313z"})]})}),K_e="#000000",G_e=C.forwardRef(function({title:e="Threads",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=K_e),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[c.jsx("title",{children:e}),c.jsx("path",{d:"M12.186 24h-.007c-3.581-.024-6.334-1.205-8.184-3.509C2.35 18.44 1.5 15.586 1.472 12.01v-.017c.03-3.579.879-6.43 2.525-8.482C5.845 1.205 8.6.024 12.18 0h.014c2.746.02 5.043.725 6.826 2.098 1.677 1.29 2.858 3.13 3.509 5.467l-2.04.569c-1.104-3.96-3.898-5.984-8.304-6.015-2.91.022-5.11.936-6.54 2.717C4.307 6.504 3.616 8.914 3.589 12c.027 3.086.718 5.496 2.057 7.164 1.43 1.783 3.631 2.698 6.54 2.717 2.623-.02 4.358-.631 5.8-2.045 1.647-1.613 1.618-3.593 1.09-4.798-.31-.71-.873-1.3-1.634-1.75-.192 1.352-.622 2.446-1.284 3.272-.886 1.102-2.14 1.704-3.73 1.79-1.202.065-2.361-.218-3.259-.801-1.063-.689-1.685-1.74-1.752-2.964-.065-1.19.408-2.285 1.33-3.082.88-.76 2.119-1.207 3.583-1.291a13.853 13.853 0 0 1 3.02.142c-.126-.742-.375-1.332-.75-1.757-.513-.586-1.308-.883-2.359-.89h-.029c-.844 0-1.992.232-2.721 1.32L7.734 7.847c.98-1.454 2.568-2.256 4.478-2.256h.044c3.194.02 5.097 1.975 5.287 5.388.108.046.216.094.321.142 1.49.7 2.58 1.761 3.154 3.07.797 1.82.871 4.79-1.548 7.158-1.85 1.81-4.094 2.628-7.277 2.65Zm1.003-11.69c-.242 0-.487.007-.739.021-1.836.103-2.98.946-2.916 2.143.067 1.256 1.452 1.839 2.784 1.767 1.224-.065 2.818-.543 3.086-3.71a10.5 10.5 0 0 0-2.215-.221z"})]})}),Y_e="#25D366",Q_e=C.forwardRef(function({title:e="WhatsApp",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=Y_e),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[c.jsx("title",{children:e}),c.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})]})}),X_e="#000000",J_e=C.forwardRef(function({title:e="X",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=X_e),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[c.jsx("title",{children:e}),c.jsx("path",{d:"M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"})]})}),Z_e={Phone:dA,Mail:hb,Users:$r,Coffee:Jre,Utensils:cne,FileText:db,Circle:KI,MessageCircle:fb};function eNe({timeline:t,onEdit:e,onDelete:r,onToggleTodo:n,personId:i,allPeople:s=[]}){const o=C.useMemo(()=>y0e(t||[]),[t]),a=f=>s.find(p=>p.id.toString()===f.toString()),l=f=>{if(f.type==="todo")return f.is_completed?HI:yl;if(f.type==="activity"&&f.activity_type){const p=b0e(f.activity_type);return Z_e[p]||KI}return f.type==="note"?db:KI},u=f=>{var S;const p=l(f),m=f.type==="todo",g=f.type==="activity",y=f.type==="note";let v=f.activity_date||f.created;f.activity_date&&f.activity_time&&(v=`${f.activity_date}T${f.activity_time}`);const b=v0e(v),w=w0e(f),x=m&&Dm(f);return c.jsxs("div",{className:`relative ${m?"pl-0":"pl-8"} pb-6 group`,children:[!m&&c.jsx("div",{className:"absolute left-0 top-1",children:c.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${g?"bg-blue-500 border-blue-500":"bg-gray-400 border-gray-400"}`})}),c.jsx("div",{className:`${w} ${y&&f.visibility==="shared"?"border-l-2 border-blue-200 pl-2":""}`,children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[!m&&c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx(p,{className:`w-4 h-4 flex-shrink-0 ${g?"text-blue-600":"text-gray-500"}`}),g&&f.activity_type&&c.jsx("span",{className:"text-xs font-medium text-gray-600",children:x0e(f.activity_type)}),c.jsx("span",{className:"text-xs text-gray-400",children:""}),c.jsx("span",{className:"text-xs text-gray-500",children:b}),y&&c.jsx("span",{className:"ml-1",title:f.visibility==="shared"?"Shared note":"Private note - only you can see this",children:f.visibility==="shared"?c.jsx(np,{className:"w-3 h-3 text-blue-500"}):c.jsx(Rm,{className:"w-3 h-3 text-gray-400"})})]}),c.jsxs("div",{className:"flex items-start gap-2",children:[m&&c.jsx("button",{onClick:()=>n&&n(f),className:"mt-0.5 flex-shrink-0",title:f.is_completed?"Mark as incomplete":"Mark as complete",children:f.is_completed?c.jsx(HI,{className:`w-5 h-5 ${x?"text-red-600":"text-primary-600"}`}):c.jsx(yl,{className:`w-5 h-5 ${x?"text-red-600":"text-gray-400"}`})}),(y||g)&&((S=f.content)!=null&&S.includes("<"))?c.jsx("div",{className:`text-sm flex-1 timeline-content ${f.is_completed?"line-through opacity-60":""}`,dangerouslySetInnerHTML:{__html:f.content}}):c.jsx("p",{className:`text-sm flex-1 ${f.is_completed?"line-through opacity-60":""}`,children:f.content})]}),g&&f.participants&&f.participants.length>0&&c.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[c.jsx("span",{className:"text-xs text-gray-500",children:"With:"}),f.participants.map(E=>{const N=a(E);return N?c.jsxs(qe,{to:`/people/${E}`,className:"inline-flex items-center gap-1 text-xs text-primary-600 hover:text-primary-700 hover:underline",children:[c.jsx(uA,{className:"w-3 h-3"}),N.name]},E):null})]}),m&&f.due_date&&c.jsx("div",{className:"mt-2",children:c.jsxs("span",{className:`text-xs ${x?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",Rn(new Date(f.due_date),"MMM d, yyyy"),x&&" (overdue)"]})})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[e&&c.jsx("button",{onClick:()=>e(f),className:"p-1 hover:bg-gray-100 rounded",title:"Edit",children:c.jsx(ba,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),r&&c.jsx("button",{onClick:()=>r(f),className:"p-1 hover:bg-red-50 rounded",title:"Delete",children:c.jsx(Sn,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})})]},f.id)},d=(f,p)=>!p||p.length===0?null:c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3 uppercase tracking-wide",children:f}),c.jsx("div",{className:"relative pl-4 border-l-2 border-gray-200",children:p.map(u)})]});return o.today.length>0||o.yesterday.length>0||o.thisWeek.length>0||o.older.length>0?c.jsxs("div",{className:"space-y-6",children:[d("Today",o.today),d("Yesterday",o.yesterday),d("This week",o.thisWeek),d("Older",o.older)]}):c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-sm text-gray-500",children:"No timeline items yet."})})}function tNe(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}function rNe(t){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Array.from(t)}function nNe(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function N0(t){return tNe(t)||rNe(t)||nNe()}function Yi(){return Yi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Yi.apply(this,arguments)}function iNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sNe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function oNe(t,e,r){return e&&sNe(t.prototype,e),t}function rt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RR(t,e){return RR=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},RR(t,e)}function aNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&RR(t,e)}function jd(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?jd=function(r){return typeof r}:jd=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},jd(t)}function Uy(t){return typeof Symbol=="function"&&jd(Symbol.iterator)==="symbol"?Uy=function(r){return jd(r)}:Uy=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":jd(r)},Uy(t)}function lNe(t,e){return e&&(Uy(e)==="object"||typeof e=="function")?e:rt(t)}function C0(t){return C0=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},C0(t)}function Ze(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var cNe=function(t,e,r,n,i,s,o,a){if(!t){var l;if(e===void 0)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,n,i,s,o,a],d=0;l=new Error(e.replace(/%s/g,function(){return u[d++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}},uNe=cNe;const hh=Sh(uNe);function dNe(t){if(Array.isArray(t))return t}function hNe(t,e){var r=[],n=!0,i=!1,s=void 0;try{for(var o=t[Symbol.iterator](),a;!(n=(a=o.next()).done)&&(r.push(a.value),!(e&&r.length===e));n=!0);}catch(l){i=!0,s=l}finally{try{!n&&o.return!=null&&o.return()}finally{if(i)throw s}}return r}function fNe(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function k0(t,e){return dNe(t)||hNe(t,e)||fNe()}function pNe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function mNe(t,e){if(t==null)return{};var r=pNe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function gNe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var yNe=gNe;const rm=Sh(yNe);function vNe(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}var bNe=vNe;function xNe(t){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Array.from(t)}var wNe=xNe;function SNe(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var ENe=SNe,_Ne=bNe,NNe=wNe,CNe=ENe;function kNe(t){return _Ne(t)||NNe(t)||CNe()}var jNe=kNe;const Co=Sh(jNe);var Mh=function(e){return e===Object(e)?Object.keys(e):[]},Poe=function(e){return e===Object(e)?Object.values(e):[]};function Ioe(t,e){var r=Object.assign({},t);return Hy(t)&&Hy(e)&&Mh(e).forEach(function(n){Hy(e[n])?n in t?r[n]=Ioe(t[n],e[n]):Object.assign(r,rm({},n,e[n])):Object.assign(r,rm({},n,e[n]))}),r}var MR=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.reduce(function(s,o){return Ioe(s,o)},e)},TNe=function(e,r){var n=Object.assign({},e);if(r)for(var i=0;i<r.length;i++)delete n[r[i]];return n},Hy=function(e){return e===Object(e)&&!(e instanceof Date)&&!Array.isArray(e)},ONe=function(e){return(e||[]).filter(Boolean)},hD=function(e){return e[0]==="&"},PNe=function(e){return!hD(e)},BF=function(e){return e.replace(/-(\w)/g,function(r,n){return n.toUpperCase()})},INe=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=Mh(e),i={},s=0,o=n.length;s<o;s+=1){var a=n[s],l=Object.prototype.toString.call(e[a])!=="[object Object]"||a[0]===":"||a[0]==="@"||r.indexOf(a)>=0;l&&(i[a]=e[a])}return i},Roe=function(e,r){for(var n=r.map(BF),i=Mh(e),s={},o=0,a=i.length;o<a;o+=1){var l=i[o];(r.indexOf(l)>=0||n.indexOf(BF(l))>=0)&&(s[l]=e[l])}return s},RNe=function t(e,r){for(var n=MR.apply(void 0,[{},TNe(e,r)].concat(Co(Poe(Roe(e,r))))),i=Mh(n).filter(hD),s=0,o=i.length;s<o;s+=1){var a=i[s],l=t(n[a],r);r.indexOf(a)>=0?(delete n[a],n=MR({},n,l)):n[a]=l}return n};function zF(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function WF(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zF(Object(r),!0).forEach(function(n){rm(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zF(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var MNe=["animationName"],Moe=function(e){var r=e.style,n=e.className;return WF(WF({},r?{style:INe(r,MNe)}:{}),n?{className:n}:{})},Aoe=C.createContext(Moe);Aoe.Provider;var Doe=function(e){if(e){if(typeof e=="string")return[e];if(!Array.isArray(e)){var r=e;return Mh(e).reduce(function(n,i){return n.concat(r[i]?[i]:[])},[])}}else return[];return e},ANe={},DNe=function(e){return function(r,n){var i=n||ANe;e.memoize=e.memoize||new WeakMap;var s;e.memoize.has(i)?s=e.memoize.get(i):(s={},e.memoize.set(i,s));var o=Doe(r).join(" ");return o in s?s[o]:s[o]=e(r||[],n)}};function VF(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Bu(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VF(Object(r),!0).forEach(function(n){rm(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VF(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var $Ne=function(e){var r=e&&Mh(e)[0];return r&&r.split("__")[0].split("--")[0]},FNe=function(e,r,n){if(e){var i=e.split(" ")[0],s=[].concat(Co(r.length===0?n.map(function(o){return"".concat(i,"--").concat(o.substring(1))}):[]),Co(r.map(function(o){return"".concat(i,"__").concat(o)})));return r.length===0?[e].concat(Co(s)):s}};function $oe(t){var e=t.style,r=t.className,n=t.classNames,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Moe,s=r||$Ne(n)||(e==null?void 0:e.className),o=typeof e=="function"?e:DNe(function(h,f){var p=Doe(h);hh(Array.isArray(p),"First parameter must be a string, an array of strings, a plain object with boolean values, or a falsy value."),hh(!f||Hy(f),"Optional second parameter must be a plain object.");var m=p.filter(hD),g=p.filter(PNe),y=g.length>0?function(w){return Poe(Roe(w,g))}:function(w){return[w]},v=function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return y(RNe(x,m))},b=FNe(s,g,m);return $oe(Bu(Bu(Bu({},(e||f)&&{style:MR.apply(void 0,[{}].concat(Co(v(f)),Co(v(e))))}),b&&{className:b.join(" ")}),n&&{classNames:n}),i)}),a=Bu({},typeof e=="function"?e:{style:e}),l=Co(new Set([].concat(Co(a.className?a.className.split(" "):[]),Co(s?s.split(" "):[])))),u=n?ONe(l.map(function(h){return n[h]})):l,d=i(Bu(Bu({},a),u.length>0?{className:u.join(" ")}:{}));return Object.assign(o,d),o}function UF(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Pf(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?UF(Object(r),!0).forEach(function(n){rm(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UF(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var qNe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.reduce(function(i,s){return Pf(Pf(Pf({},i),typeof s=="function"?s:{}),{},{style:Pf(Pf({},i.style),typeof s=="function"?s.style:s)})},{})},fD=function(e,r,n){var i=r.style,s=r.className,o=r.classNames,a=C.useContext(Aoe),l=C.useMemo(function(){return $oe({style:i,className:s,classNames:o},a)},[i,s,o,a]);return l(n,e)},Foe={exports:{}},LNe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",BNe=LNe,zNe=BNe;function qoe(){}function Loe(){}Loe.resetWarningCache=qoe;var WNe=function(){function t(n,i,s,o,a,l){if(l!==zNe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Loe,resetWarningCache:qoe};return r.PropTypes=r,r};Foe.exports=WNe();var VNe=Foe.exports;const ve=Sh(VNe);var Ky=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},Bs={id:"__id__",display:"__display__"},HF=function(e,r){hh(r==="id"||r==="display",'Second arg must be either "id" or "display", got: "'.concat(r,'"'));var n=e.indexOf(Bs.display),i=e.indexOf(Bs.id);return n<0&&(n=null),i<0&&(i=null),hh(n!==null||i!==null,"The markup '".concat(e,"' does not contain either of the placeholders '__id__' or '__display__'")),n!==null&&i!==null?r==="id"&&i<=n||r==="display"&&n<=i?0:1:0},UNe=function(e){var r=/^\/(.+)\/(\w+)?$/;return new RegExp(e.map(function(n){var i=r.exec(n.toString()),s=k0(i,3),o=s[1],a=s[2];return hh(!a,"RegExp flags are not supported. Change /".concat(o,"/").concat(a," into /").concat(o,"/")),"(".concat(o,")")}).join("|"),"g")},Boe=function(e){var r=0;return e.indexOf("__id__")>=0&&r++,e.indexOf("__display__")>=0&&r++,r},HNe=function(){},Bm=function(e,r,n){for(var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:HNe,s=UNe(r.map(function(S){return S.regex})),o=2,a=r.map(function(S){var E=S.markup,N=o;return o+=Boe(E)+1,N}),l,u=0,d=0;(l=s.exec(e))!==null;){var h=a.find(function(S){return!!l[S]}),f=a.indexOf(h),p=r[f],m=p.markup,g=p.displayTransform,y=h+HF(m,"id"),v=h+HF(m,"display"),b=l[y],w=g(b,l[v]),x=e.substring(u,l.index);i(x,u,d),d+=x.length,n(l[0],l.index,d,b,w,f,u),d+=w.length,u=s.lastIndex}u<e.length&&i(e.substring(u),u,d)},Gl=function(e,r){var n="";return Bm(e,r,function(i,s,o,a,l){n+=l},function(i){n+=i}),n},On=function(e,r,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"START";if(typeof n!="number")return n;var s,o=function(u,d,h){s===void 0&&h+u.length>=n&&(s=d+n-h)},a=function(u,d,h,f,p,m,g){s===void 0&&h+p.length>n&&(i==="NULL"?s=null:s=d+(i==="END"?u.length:0))};return Bm(e,r,a,o),s===void 0?e.length:s},pp=function(e,r,n,i){return e.substring(0,r)+i+e.substring(n)},KNe=function(e,r,n,i){var s=n.selectionStartBefore,o=n.selectionEndBefore,a=n.selectionEndAfter,l=Gl(e,i),u=l.length-r.length;s==="undefined"&&(s=a+u),o==="undefined"&&(o=s),s===o&&o===a&&l.length===r.length&&(s=s-1);var d=r.slice(s,a),h=Math.min(s,a),f=o;s===a&&(f=Math.max(o,s+u));var p=On(e,i,h,"START"),m=On(e,i,f,"END"),g=On(e,i,h,"NULL"),y=On(e,i,f,"NULL"),v=g===null||y===null,b=pp(e,p,m,d);if(!v){var w=Gl(b,i);if(w!==r){for(h=0;r[h]===w[h];)h++;d=r.slice(h,a),f=l.lastIndexOf(r.substring(a)),p=On(e,i,h,"START"),m=On(e,i,f,"END"),b=pp(e,p,m,d)}}return b},KF=function(e,r,n){var i=n,s=!1,o=function(l,u,d,h,f,p,m){d<=n&&d+f.length>n&&(i=d,s=!0)};if(Bm(e,r,o),s)return i},Uf=function(e,r){var n=[];return Bm(e,r,function(i,s,o,a,l,u,d){n.push({id:a,display:l,childIndex:u,index:s,plainTextIndex:o})}),n},zoe=function(e,r){return"".concat(e,"-").concat(r)},fy=function(e){return Object.values(e).reduce(function(r,n){var i=n.results;return r+i.length},0)},GNe=function(e,r){var n=Uf(e,r),i=n[n.length-1];return i?i.plainTextIndex+i.display.length:0},YNe=function(e){var r=Ky(e),n=e[e.indexOf(Bs.display)+Bs.display.length],i=e[e.indexOf(Bs.id)+Bs.id.length];return new RegExp(r.replace(Bs.display,"([^".concat(Ky(n||""),"]+?)")).replace(Bs.id,"([^".concat(Ky(i||""),"]+?)")))},ga=function(e){return C.Children.toArray(e).map(function(r){var n=r.props,i=n.markup,s=n.regex,o=n.displayTransform;return{markup:i,regex:s?QNe(s,i):YNe(i),displayTransform:o||function(a,l){return l||a}}})},QNe=function(e,r){var n=new RegExp(e.toString()+"|").exec("").length-1,i=Boe(r);return hh(n===i,"Number of capturing groups in RegExp ".concat(e.toString()," (").concat(n,") does not match the number of placeholders in the markup '").concat(r,"' (").concat(i,")")),e},XNe=function(e,r,n){return e.replace(Bs.id,r).replace(Bs.display,n)},JNe=[{base:"A",letters:/(&#65;|&#9398;|&#65313;|&#192;|&#193;|&#194;|&#7846;|&#7844;|&#7850;|&#7848;|&#195;|&#256;|&#258;|&#7856;|&#7854;|&#7860;|&#7858;|&#550;|&#480;|&#196;|&#478;|&#7842;|&#197;|&#506;|&#461;|&#512;|&#514;|&#7840;|&#7852;|&#7862;|&#7680;|&#260;|&#570;|&#11375;|[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F])/g},{base:"AA",letters:/(&#42802;|[\uA732])/g},{base:"AE",letters:/(&#198;|&#508;|&#482;|[\u00C6\u01FC\u01E2])/g},{base:"AO",letters:/(&#42804;|[\uA734])/g},{base:"AU",letters:/(&#42806;|[\uA736])/g},{base:"AV",letters:/(&#42808;|&#42810;|[\uA738\uA73A])/g},{base:"AY",letters:/(&#42812;|[\uA73C])/g},{base:"B",letters:/(&#66;|&#9399;|&#65314;|&#7682;|&#7684;|&#7686;|&#579;|&#386;|&#385;|[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181])/g},{base:"C",letters:/(&#67;|&#9400;|&#65315;|&#262;|&#264;|&#266;|&#268;|&#199;|&#7688;|&#391;|&#571;|&#42814;|[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E])/g},{base:"D",letters:/(&#68;|&#9401;|&#65316;|&#7690;|&#270;|&#7692;|&#7696;|&#7698;|&#7694;|&#272;|&#395;|&#394;|&#393;|&#42873;|&#208;|[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779\u00D0])/g},{base:"DZ",letters:/(&#497;|&#452;|[\u01F1\u01C4])/g},{base:"Dz",letters:/(&#498;|&#453;|[\u01F2\u01C5])/g},{base:"E",letters:/(&#69;|&#9402;|&#65317;|&#200;|&#201;|&#202;|&#7872;|&#7870;|&#7876;|&#7874;|&#7868;|&#274;|&#7700;|&#7702;|&#276;|&#278;|&#203;|&#7866;|&#282;|&#516;|&#518;|&#7864;|&#7878;|&#552;|&#7708;|&#280;|&#7704;|&#7706;|&#400;|&#398;|[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E])/g},{base:"F",letters:/(&#70;|&#9403;|&#65318;|&#7710;|&#401;|&#42875;|[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B])/g},{base:"G",letters:/(&#71;|&#9404;|&#65319;|&#500;|&#284;|&#7712;|&#286;|&#288;|&#486;|&#290;|&#484;|&#403;|&#42912;|&#42877;|&#42878;|[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E])/g},{base:"H",letters:/(&#72;|&#9405;|&#65320;|&#292;|&#7714;|&#7718;|&#542;|&#7716;|&#7720;|&#7722;|&#294;|&#11367;|&#11381;|&#42893;|[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D])/g},{base:"I",letters:/(&#73;|&#9406;|&#65321;|&#204;|&#205;|&#206;|&#296;|&#298;|&#300;|&#304;|&#207;|&#7726;|&#7880;|&#463;|&#520;|&#522;|&#7882;|&#302;|&#7724;|&#407;|[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197])/g},{base:"J",letters:/(&#74;|&#9407;|&#65322;|&#308;|&#584;|[\u004A\u24BF\uFF2A\u0134\u0248])/g},{base:"K",letters:/(&#75;|&#9408;|&#65323;|&#7728;|&#488;|&#7730;|&#310;|&#7732;|&#408;|&#11369;|&#42816;|&#42818;|&#42820;|&#42914;|[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2])/g},{base:"L",letters:/(&#76;|&#9409;|&#65324;|&#319;|&#313;|&#317;|&#7734;|&#7736;|&#315;|&#7740;|&#7738;|&#321;|&#573;|&#11362;|&#11360;|&#42824;|&#42822;|&#42880;|[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780])/g},{base:"LJ",letters:/(&#455;|[\u01C7])/g},{base:"Lj",letters:/(&#456;|[\u01C8])/g},{base:"M",letters:/(&#77;|&#9410;|&#65325;|&#7742;|&#7744;|&#7746;|&#11374;|&#412;|[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C])/g},{base:"N",letters:/(&#78;|&#9411;|&#65326;|&#504;|&#323;|&#209;|&#7748;|&#327;|&#7750;|&#325;|&#7754;|&#7752;|&#544;|&#413;|&#42896;|&#42916;|&#330;|[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4\u014A])/g},{base:"NJ",letters:/(&#458;|[\u01CA])/g},{base:"Nj",letters:/(&#459;|[\u01CB])/g},{base:"O",letters:/(&#79;|&#9412;|&#65327;|&#210;|&#211;|&#212;|&#7890;|&#7888;|&#7894;|&#7892;|&#213;|&#7756;|&#556;|&#7758;|&#332;|&#7760;|&#7762;|&#334;|&#558;|&#560;|&#214;|&#554;|&#7886;|&#336;|&#465;|&#524;|&#526;|&#416;|&#7900;|&#7898;|&#7904;|&#7902;|&#7906;|&#7884;|&#7896;|&#490;|&#492;|&#216;|&#510;|&#390;|&#415;|&#42826;|&#42828;|[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C])/g},{base:"OE",letters:/(&#338;|[\u0152])/g},{base:"OI",letters:/(&#418;|[\u01A2])/g},{base:"OO",letters:/(&#42830;|[\uA74E])/g},{base:"OU",letters:/(&#546;|[\u0222])/g},{base:"P",letters:/(&#80;|&#9413;|&#65328;|&#7764;|&#7766;|&#420;|&#11363;|&#42832;|&#42834;|&#42836;|[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754])/g},{base:"Q",letters:/(&#81;|&#9414;|&#65329;|&#42838;|&#42840;|&#586;|[\u0051\u24C6\uFF31\uA756\uA758\u024A])/g},{base:"R",letters:/(&#82;|&#9415;|&#65330;|&#340;|&#7768;|&#344;|&#528;|&#530;|&#7770;|&#7772;|&#342;|&#7774;|&#588;|&#11364;|&#42842;|&#42918;|&#42882;|[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782])/g},{base:"S",letters:/(&#83;|&#9416;|&#65331;|&#7838;|&#346;|&#7780;|&#348;|&#7776;|&#352;|&#7782;|&#7778;|&#7784;|&#536;|&#350;|&#11390;|&#42920;|&#42884;|[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784])/g},{base:"T",letters:/(&#84;|&#9417;|&#65332;|&#7786;|&#356;|&#7788;|&#538;|&#354;|&#7792;|&#7790;|&#358;|&#428;|&#430;|&#574;|&#42886;|[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786])/g},{base:"TH",letters:/(&#222;|[\u00DE])/g},{base:"TZ",letters:/(&#42792;|[\uA728])/g},{base:"U",letters:/(&#85;|&#9418;|&#65333;|&#217;|&#218;|&#219;|&#360;|&#7800;|&#362;|&#7802;|&#364;|&#220;|&#475;|&#471;|&#469;|&#473;|&#7910;|&#366;|&#368;|&#467;|&#532;|&#534;|&#431;|&#7914;|&#7912;|&#7918;|&#7916;|&#7920;|&#7908;|&#7794;|&#370;|&#7798;|&#7796;|&#580;|[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244])/g},{base:"V",letters:/(&#86;|&#9419;|&#65334;|&#7804;|&#7806;|&#434;|&#42846;|&#581;|[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245])/g},{base:"VY",letters:/(&#42848;|[\uA760])/g},{base:"W",letters:/(&#87;|&#9420;|&#65335;|&#7808;|&#7810;|&#372;|&#7814;|&#7812;|&#7816;|&#11378;|[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72])/g},{base:"X",letters:/(&#88;|&#9421;|&#65336;|&#7818;|&#7820;|[\u0058\u24CD\uFF38\u1E8A\u1E8C])/g},{base:"Y",letters:/(&#89;|&#9422;|&#65337;|&#7922;|&#221;|&#374;|&#7928;|&#562;|&#7822;|&#376;|&#7926;|&#7924;|&#435;|&#590;|&#7934;|[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE])/g},{base:"Z",letters:/(&#90;|&#9423;|&#65338;|&#377;|&#7824;|&#379;|&#381;|&#7826;|&#7828;|&#437;|&#548;|&#11391;|&#11371;|&#42850;|[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762])/g},{base:"a",letters:/(&#97;|&#9424;|&#65345;|&#7834;|&#224;|&#225;|&#226;|&#7847;|&#7845;|&#7851;|&#7849;|&#227;|&#257;|&#259;|&#7857;|&#7855;|&#7861;|&#7859;|&#551;|&#481;|&#228;|&#479;|&#7843;|&#229;|&#507;|&#462;|&#513;|&#515;|&#7841;|&#7853;|&#7863;|&#7681;|&#261;|&#11365;|&#592;|[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250])/g},{base:"aa",letters:/(&#42803;|[\uA733])/g},{base:"ae",letters:/(&#230;|&#509;|&#483;|[\u00E6\u01FD\u01E3])/g},{base:"ao",letters:/(&#42805;|[\uA735])/g},{base:"au",letters:/(&#42807;|[\uA737])/g},{base:"av",letters:/(&#42809;|&#42811;|[\uA739\uA73B])/g},{base:"ay",letters:/(&#42813;|[\uA73D])/g},{base:"b",letters:/(&#98;|&#9425;|&#65346;|&#7683;|&#7685;|&#7687;|&#384;|&#387;|&#595;|[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253])/g},{base:"c",letters:/(&#99;|&#9426;|&#65347;|&#263;|&#265;|&#267;|&#269;|&#231;|&#7689;|&#392;|&#572;|&#42815;|&#8580;|[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184])/g},{base:"d",letters:/(&#100;|&#9427;|&#65348;|&#7691;|&#271;|&#7693;|&#7697;|&#7699;|&#7695;|&#273;|&#396;|&#598;|&#599;|&#42874;|&#240;|[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A\u00F0])/g},{base:"dz",letters:/(&#499;|&#454;|[\u01F3\u01C6])/g},{base:"e",letters:/(&#101;|&#9428;|&#65349;|&#232;|&#233;|&#234;|&#7873;|&#7871;|&#7877;|&#7875;|&#7869;|&#275;|&#7701;|&#7703;|&#277;|&#279;|&#235;|&#7867;|&#283;|&#517;|&#519;|&#7865;|&#7879;|&#553;|&#7709;|&#281;|&#7705;|&#7707;|&#583;|&#603;|&#477;|[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD])/g},{base:"f",letters:/(&#102;|&#9429;|&#65350;|&#7711;|&#402;|&#42876;|[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C])/g},{base:"g",letters:/(&#103;|&#9430;|&#65351;|&#501;|&#285;|&#7713;|&#287;|&#289;|&#487;|&#291;|&#485;|&#608;|&#42913;|&#7545;|&#42879;|[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F])/g},{base:"h",letters:/(&#104;|&#9431;|&#65352;|&#293;|&#7715;|&#7719;|&#543;|&#7717;|&#7721;|&#7723;|&#7830;|&#295;|&#11368;|&#11382;|&#613;|[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265])/g},{base:"hv",letters:/(&#405;|[\u0195])/g},{base:"i",letters:/(&#105;|&#9432;|&#65353;|&#236;|&#237;|&#238;|&#297;|&#299;|&#301;|&#239;|&#7727;|&#7881;|&#464;|&#521;|&#523;|&#7883;|&#303;|&#7725;|&#616;|&#305;|[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131])/g},{base:"ij",letters:/(&#307;|[\u0133])/g},{base:"j",letters:/(&#106;|&#9433;|&#65354;|&#309;|&#496;|&#585;|[\u006A\u24D9\uFF4A\u0135\u01F0\u0249])/g},{base:"k",letters:/(&#107;|&#9434;|&#65355;|&#7729;|&#489;|&#7731;|&#311;|&#7733;|&#409;|&#11370;|&#42817;|&#42819;|&#42821;|&#42915;|[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3])/g},{base:"l",letters:/(&#108;|&#9435;|&#65356;|&#320;|&#314;|&#318;|&#7735;|&#7737;|&#316;|&#7741;|&#7739;|&#322;|&#410;|&#619;|&#11361;|&#42825;|&#42881;|&#42823;|[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u0142\u019A\u026B\u2C61\uA749\uA781\uA747])/g},{base:"lj",letters:/(&#457;|[\u01C9])/g},{base:"m",letters:/(&#109;|&#9436;|&#65357;|&#7743;|&#7745;|&#7747;|&#625;|&#623;|[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F])/g},{base:"n",letters:/(&#110;|&#9437;|&#65358;|&#505;|&#324;|&#241;|&#7749;|&#328;|&#7751;|&#326;|&#7755;|&#7753;|&#414;|&#626;|&#329;|&#42897;|&#42917;|&#331;|[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5\u014B])/g},{base:"nj",letters:/(&#460;|[\u01CC])/g},{base:"o",letters:/(&#111;|&#9438;|&#65359;|&#242;|&#243;|&#244;|&#7891;|&#7889;|&#7895;|&#7893;|&#245;|&#7757;|&#557;|&#7759;|&#333;|&#7761;|&#7763;|&#335;|&#559;|&#561;|&#246;|&#555;|&#7887;|&#337;|&#466;|&#525;|&#527;|&#417;|&#7901;|&#7899;|&#7905;|&#7903;|&#7907;|&#7885;|&#7897;|&#491;|&#493;|&#248;|&#511;|&#596;|&#42827;|&#42829;|&#629;|[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275])/g},{base:"oe",letters:/(&#339;|[\u0153])/g},{base:"oi",letters:/(&#419;|[\u01A3])/g},{base:"ou",letters:/(&#547;|[\u0223])/g},{base:"oo",letters:/(&#42831;|[\uA74F])/g},{base:"p",letters:/(&#112;|&#9439;|&#65360;|&#7765;|&#7767;|&#421;|&#7549;|&#42833;|&#42835;|&#42837;|[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755])/g},{base:"q",letters:/(&#113;|&#9440;|&#65361;|&#587;|&#42839;|&#42841;|[\u0071\u24E0\uFF51\u024B\uA757\uA759])/g},{base:"r",letters:/(&#114;|&#9441;|&#65362;|&#341;|&#7769;|&#345;|&#529;|&#531;|&#7771;|&#7773;|&#343;|&#7775;|&#589;|&#637;|&#42843;|&#42919;|&#42883;|[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783])/g},{base:"s",letters:/(&#115;|&#9442;|&#65363;|&#347;|&#7781;|&#349;|&#7777;|&#353;|&#7783;|&#7779;|&#7785;|&#537;|&#351;|&#575;|&#42921;|&#42885;|&#7835;|&#383;|[\u0073\u24E2\uFF53\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B\u017F])/g},{base:"ss",letters:/(&#223;|[\u00DF])/g},{base:"t",letters:/(&#116;|&#9443;|&#65364;|&#7787;|&#7831;|&#357;|&#7789;|&#539;|&#355;|&#7793;|&#7791;|&#359;|&#429;|&#648;|&#11366;|&#42887;|[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787])/g},{base:"th",letters:/(&#254;|[\u00FE])/g},{base:"tz",letters:/(&#42793;|[\uA729])/g},{base:"u",letters:/(&#117;|&#9444;|&#65365;|&#249;|&#250;|&#251;|&#361;|&#7801;|&#363;|&#7803;|&#365;|&#252;|&#476;|&#472;|&#470;|&#474;|&#7911;|&#367;|&#369;|&#468;|&#533;|&#535;|&#432;|&#7915;|&#7913;|&#7919;|&#7917;|&#7921;|&#7909;|&#7795;|&#371;|&#7799;|&#7797;|&#649;|[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289])/g},{base:"v",letters:/(&#118;|&#9445;|&#65366;|&#7805;|&#7807;|&#651;|&#42847;|&#652;|[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C])/g},{base:"vy",letters:/(&#42849;|[\uA761])/g},{base:"w",letters:/(&#119;|&#9446;|&#65367;|&#7809;|&#7811;|&#373;|&#7815;|&#7813;|&#7832;|&#7817;|&#11379;|[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73])/g},{base:"x",letters:/(&#120;|&#9447;|&#65368;|&#7819;|&#7821;|[\u0078\u24E7\uFF58\u1E8B\u1E8D])/g},{base:"y",letters:/(&#121;|&#9448;|&#65369;|&#7923;|&#253;|&#375;|&#7929;|&#563;|&#7823;|&#255;|&#7927;|&#7833;|&#7925;|&#436;|&#591;|&#7935;|[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF])/g},{base:"z",letters:/(&#122;|&#9449;|&#65370;|&#378;|&#7825;|&#380;|&#382;|&#7827;|&#7829;|&#438;|&#549;|&#576;|&#11372;|&#42851;|[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763])/g}],ZNe=function(e){var r=e;return JNe.forEach(function(n){r=r.replace(n.letters,n.base)}),r},GF=function(e){return ZNe(e).toLowerCase()},Woe=function(e,r,n){return n?GF(e).indexOf(GF(r)):e.toLowerCase().indexOf(r.toLowerCase())},eCe=function(){return!!document.documentMode},AR=function(e){return typeof e=="number"},tCe=function(e){return e===Object(e)?Object.keys(e):[]},rCe=function(e){for(var r,n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];var o=(r=[]).concat.apply(r,i);return Object.keys(e).reduce(function(a,l){return e.hasOwnProperty(l)&&!o.includes(l)&&e[l]!==void 0&&(a[l]=e[l]),a},{})},nCe=["style","className","classNames"];function YF(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function QF(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YF(Object(r),!0).forEach(function(n){Ze(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YF(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $b(t,e){var r=function(i){var s=function(l){var u=l.style,d=l.className,h=l.classNames,f=mNe(l,nCe),p=e?e(f):void 0,m=fD(t,{style:u,className:d,classNames:h},p);return ie.createElement(i,Yi({},f,{style:m}))},o=i.displayName||i.name||"Component";return s.displayName="defaultStyle(".concat(o,")"),ie.forwardRef(function(a,l){return s(QF(QF({},a),{},{ref:l}))})};return r}var iCe=function(e,r){return e.hasOwnProperty(r)?e[r]++:e[r]=0,r+"_"+e[r]};function Voe(t){var e=t.selectionStart,r=t.selectionEnd,n=t.value,i=n===void 0?"":n,s=t.onCaretPositionChange,o=t.containerRef,a=t.children;t.singleLine;var l=t.style,u=C.useState({left:void 0,top:void 0}),d=k0(u,2),h=d[0],f=d[1],p=C.useState(),m=k0(p,2),g=m[0],y=m[1];C.useEffect(function(){v()});var v=function(){if(g){var D=g.offsetLeft,F=g.offsetTop;if(!(h.left===D&&h.top===F)){var $={left:D,top:F};f($),s($)}}},b=ga(a),w;r===e&&(w=On(i,b,e,"START"));var x=[],S={},E=x,N=0,_=function(D,F,$){if(AR(w)&&w>=F&&w<=F+D.length){var q=w-F;E.push(j(D.substring(0,q),N)),E=[j(D.substring(q),N)]}else E.push(j(D,N));N++},k=function(D,F,$,q,M,B,X){var Q=iCe(S,q);E.push(T(q,M,B,Q))},j=function(D,F){return ie.createElement("span",Yi({},l("substring"),{key:F}),D)},T=function(D,F,$,q){var M={id:D,display:F,key:q},B=C.Children.toArray(a)[$];return ie.cloneElement(B,M)},P=function(D){return ie.createElement("span",Yi({},l("caret"),{ref:y,key:"caret"}),D)};return Bm(i,b,k,_),E.push(" "),E!==x&&x.push(P(E)),ie.createElement("div",Yi({},l,{ref:o}),x)}Voe.propTypes={selectionStart:ve.number,selectionEnd:ve.number,value:ve.string.isRequired,onCaretPositionChange:ve.func.isRequired,containerRef:ve.oneOfType([ve.func,ve.shape({current:typeof Element>"u"?ve.any:ve.instanceOf(Element)})]),children:ve.oneOfType([ve.element,ve.arrayOf(ve.element)]).isRequired};var sCe=$b({position:"relative",boxSizing:"border-box",width:"100%",color:"transparent",overflow:"hidden",whiteSpace:"pre-wrap",wordWrap:"break-word",border:"1px solid transparent",textAlign:"start","&singleLine":{whiteSpace:"pre",wordWrap:null},substring:{visibility:"hidden"}},function(t){return{"&singleLine":t.singleLine}}),oCe=sCe(Voe);function Uoe(t){var e=t.id,r=t.focused,n=t.ignoreAccents,i=t.index,s=t.onClick,o=t.onMouseEnter,a=t.query,l=t.renderSuggestion,u=t.suggestion,d=t.style;t.className,t.classNames;var h={onClick:s,onMouseEnter:o},f=function(){var y=p(),v=m(y);return l?l(u,a,v,i,r):v},p=function(){if(typeof u=="string")return u;var y=u.id,v=u.display;return y===void 0||!v?y:v},m=function(y){var v=Woe(y,a,n);return v===-1?ie.createElement("span",d("display"),y):ie.createElement("span",d("display"),y.substring(0,v),ie.createElement("b",d("highlight"),y.substring(v,v+a.length)),y.substring(v+a.length))};return ie.createElement("li",Yi({id:e,role:"option","aria-selected":r},h,d),f())}Uoe.propTypes={id:ve.string.isRequired,query:ve.string.isRequired,index:ve.number.isRequired,ignoreAccents:ve.bool,suggestion:ve.oneOfType([ve.string,ve.shape({id:ve.oneOfType([ve.string,ve.number]).isRequired,display:ve.string})]).isRequired,renderSuggestion:ve.func,focused:ve.bool};var aCe=$b({cursor:"pointer"},function(t){return{"&focused":t.focused}}),lCe=aCe(Uoe);function cCe(t){var e=t.style,r=t.className,n=t.classNames,i=fD(uCe,{style:e,className:r,classNames:n}),s=i("spinner");return ie.createElement("div",i,ie.createElement("div",s,ie.createElement("div",s(["element","element1"])),ie.createElement("div",s(["element","element2"])),ie.createElement("div",s(["element","element3"])),ie.createElement("div",s(["element","element4"])),ie.createElement("div",s(["element","element5"]))))}var uCe={};function Hoe(t){var e=t.id,r=t.suggestions,n=r===void 0?{}:r,i=t.a11ySuggestionsListLabel,s=t.focusIndex,o=t.position,a=t.left,l=t.right,u=t.top,d=t.scrollFocusedIntoView,h=t.isLoading,f=t.isOpened,p=t.onSelect,m=p===void 0?function(){return null}:p,g=t.ignoreAccents,y=t.containerRef,v=t.children,b=t.style,w=t.customSuggestionsContainer,x=t.onMouseDown,S=t.onMouseEnter,E=C.useState(void 0),N=k0(E,2),_=N[0],k=N[1];C.useEffect(function(){if(!(!_||_.offsetHeight>=_.scrollHeight||!d)){var $=_.scrollTop,q=_.children[s].getBoundingClientRect(),M=q.top,B=q.bottom,X=_.getBoundingClientRect(),Q=X.top;M=M-Q+$,B=B-Q+$,M<$?_.scrollTop=M:B>_.offsetHeight&&(_.scrollTop=B-_.offsetHeight)}},[s,d,_]);var j=function(){var q=ie.createElement("ul",Yi({ref:k,id:e,role:"listbox","aria-label":i},b("list")),Object.values(n).reduce(function(M,B){var X=B.results,Q=B.queryInfo;return[].concat(N0(M),N0(X.map(function(le,G){return T(le,Q,M.length+G)})))},[]));return w?w(q):q},T=function(q,M,B){var X=B===s,Q=M.childIndex,le=M.query,G=C.Children.toArray(v)[Q].props.renderSuggestion;return ie.createElement(lCe,{style:b("item"),key:"".concat(Q,"-").concat(F(q)),id:zoe(e,B),query:le,index:B,ignoreAccents:g,renderSuggestion:G,suggestion:q,focused:X,onClick:function(){return D(q,M)},onMouseEnter:function(){return O(B)}})},P=function(){if(h)return ie.createElement(cCe,{style:b("loadingIndicator")})},O=function(q,M){S&&S(q)},D=function(q,M){m(q,M)},F=function(q){return typeof q=="string"?q:q.id};return f?ie.createElement("div",Yi({},qNe({position:o||"absolute",left:a,right:l,top:u},b),{onMouseDown:x,ref:y}),j(),P()):null}Hoe.propTypes={id:ve.string.isRequired,suggestions:ve.object.isRequired,a11ySuggestionsListLabel:ve.string,focusIndex:ve.number,position:ve.string,left:ve.number,right:ve.number,top:ve.number,scrollFocusedIntoView:ve.bool,isLoading:ve.bool,isOpened:ve.bool.isRequired,onSelect:ve.func,ignoreAccents:ve.bool,customSuggestionsContainer:ve.func,containerRef:ve.oneOfType([ve.func,ve.shape({current:typeof Element>"u"?ve.any:ve.instanceOf(Element)})])};var dCe=$b({zIndex:1,backgroundColor:"white",marginTop:14,minWidth:100,list:{margin:0,padding:0,listStyleType:"none"}}),hCe=dCe(Hoe);function XF(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ls(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?XF(Object(r),!0).forEach(function(n){Ze(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):XF(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fCe(t){var e=pCe();return function(){var n=C0(t),i;if(e){var s=C0(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return lNe(this,i)}}function pCe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var mCe=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e instanceof RegExp)return e;var n=r.allowSpaceInQuery,i=Ky(e);return new RegExp("(?:^|\\s)(".concat(i,"([^").concat(n?"":"\\s").concat(i,"]*))$"))},gCe=function(e,r){return e instanceof Array?function(n,i){for(var s=[],o=0,a=e.length;o<a;++o){var l=e[o].display||e[o].id;Woe(l,n,r)>=0&&s.push(e[o])}return s}:e},zu={TAB:9,RETURN:13,ESC:27,UP:38,DOWN:40},py=!1,Koe={singleLine:ve.bool,allowSpaceInQuery:ve.bool,allowSuggestionsAboveCursor:ve.bool,forceSuggestionsAboveCursor:ve.bool,ignoreAccents:ve.bool,a11ySuggestionsListLabel:ve.string,value:ve.string,onKeyDown:ve.func,customSuggestionsContainer:ve.func,onSelect:ve.func,onBlur:ve.func,onChange:ve.func,suggestionsPortalHost:typeof Element>"u"?ve.any:ve.PropTypes.instanceOf(Element),inputRef:ve.oneOfType([ve.func,ve.shape({current:typeof Element>"u"?ve.any:ve.instanceOf(Element)})]),children:ve.oneOfType([ve.element,ve.arrayOf(ve.element)]).isRequired},pD=function(t){aNe(r,t);var e=fCe(r);function r(n){var i;return iNe(this,r),i=e.call(this,n),Ze(rt(i),"setContainerElement",function(s){i.containerElement=s}),Ze(rt(i),"getInputProps",function(){var s=i.props,o=s.readOnly,a=s.disabled,l=s.style,u=rCe(i.props,["style","classNames","className"],tCe(Koe));return ls(ls(ls(ls({},u),l("input")),{},{value:i.getPlainText(),onScroll:i.updateHighlighterScroll},!o&&!a&&{onChange:i.handleChange,onSelect:i.handleSelect,onKeyDown:i.handleKeyDown,onBlur:i.handleBlur,onCompositionStart:i.handleCompositionStart,onCompositionEnd:i.handleCompositionEnd}),i.isOpened()&&{role:"combobox","aria-controls":i.uuidSuggestionsOverlay,"aria-expanded":!0,"aria-autocomplete":"list","aria-haspopup":"listbox","aria-activedescendant":zoe(i.uuidSuggestionsOverlay,i.state.focusIndex)})}),Ze(rt(i),"renderControl",function(){var s=i.props,o=s.singleLine,a=s.style,l=i.getInputProps();return ie.createElement("div",a("control"),i.renderHighlighter(),o?i.renderInput(l):i.renderTextarea(l))}),Ze(rt(i),"renderInput",function(s){return ie.createElement("input",Yi({type:"text",ref:i.setInputRef},s))}),Ze(rt(i),"renderTextarea",function(s){return ie.createElement("textarea",Yi({ref:i.setInputRef},s))}),Ze(rt(i),"setInputRef",function(s){i.inputElement=s;var o=i.props.inputRef;typeof o=="function"?o(s):o&&(o.current=s)}),Ze(rt(i),"setSuggestionsElement",function(s){i.suggestionsElement=s}),Ze(rt(i),"renderSuggestionsOverlay",function(){if(!AR(i.state.selectionStart))return null;var s=i.state.suggestionsPosition,o=s.position,a=s.left,l=s.top,u=s.right,d=ie.createElement(hCe,{id:i.uuidSuggestionsOverlay,style:i.props.style("suggestions"),position:o,left:a,top:l,right:u,focusIndex:i.state.focusIndex,scrollFocusedIntoView:i.state.scrollFocusedIntoView,containerRef:i.setSuggestionsElement,suggestions:i.state.suggestions,customSuggestionsContainer:i.props.customSuggestionsContainer,onSelect:i.addMention,onMouseDown:i.handleSuggestionsMouseDown,onMouseEnter:i.handleSuggestionsMouseEnter,isLoading:i.isLoading(),isOpened:i.isOpened(),ignoreAccents:i.props.ignoreAccents,a11ySuggestionsListLabel:i.props.a11ySuggestionsListLabel},i.props.children);return i.props.suggestionsPortalHost?Kte.createPortal(d,i.props.suggestionsPortalHost):d}),Ze(rt(i),"renderHighlighter",function(){var s=i.state,o=s.selectionStart,a=s.selectionEnd,l=i.props,u=l.singleLine,d=l.children,h=l.value,f=l.style;return ie.createElement(oCe,{containerRef:i.setHighlighterElement,style:f("highlighter"),value:h,singleLine:u,selectionStart:o,selectionEnd:a,onCaretPositionChange:i.handleCaretPositionChange},d)}),Ze(rt(i),"setHighlighterElement",function(s){i.highlighterElement=s}),Ze(rt(i),"handleCaretPositionChange",function(s){i.setState({caretPosition:s})}),Ze(rt(i),"getPlainText",function(){return Gl(i.props.value||"",ga(i.props.children))}),Ze(rt(i),"executeOnChange",function(s){for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];if(i.props.onChange){var u;return(u=i.props).onChange.apply(u,[s].concat(a))}if(i.props.valueLink){var d;return(d=i.props.valueLink).requestChange.apply(d,[s.target.value].concat(a))}}),Ze(rt(i),"handleChange",function(s){if(py=!1,eCe()){var o=document.activeElement&&document.activeElement.contentDocument||document;if(o.activeElement!==s.target)return}var a=i.props.value||"",l=ga(i.props.children),u=s.target.value,d=i.state.selectionStart;d==null&&(d=s.target.selectionStart);var h=i.state.selectionEnd;h==null&&(h=s.target.selectionEnd);var f=KNe(a,u,{selectionStartBefore:d,selectionEndBefore:h,selectionEndAfter:s.target.selectionEnd},l);u=Gl(f,l);var p=s.target.selectionStart,m=s.target.selectionEnd,g=!1,y=KF(a,l,p);y!==void 0&&i.state.selectionEnd>y&&(p=y+(s.nativeEvent.data?s.nativeEvent.data.length:0),m=p,g=!0),i.setState({selectionStart:p,selectionEnd:m,setSelectionAfterMentionChange:g});var v=Uf(f,l);s.nativeEvent.isComposing&&p===m&&i.updateMentionsQueries(i.inputElement.value,p);var b={target:{value:f}};i.executeOnChange(b,f,u,v)}),Ze(rt(i),"handleSelect",function(s){if(i.setState({selectionStart:s.target.selectionStart,selectionEnd:s.target.selectionEnd}),!py){var o=i.inputElement;s.target.selectionStart===s.target.selectionEnd?i.updateMentionsQueries(o.value,s.target.selectionStart):i.clearSuggestions(),i.updateHighlighterScroll(),i.props.onSelect(s)}}),Ze(rt(i),"handleKeyDown",function(s){var o=fy(i.state.suggestions);if(o===0||!i.suggestionsElement){i.props.onKeyDown(s);return}switch(Object.values(zu).indexOf(s.keyCode)>=0&&(s.preventDefault(),s.stopPropagation()),s.keyCode){case zu.ESC:{i.clearSuggestions();return}case zu.DOWN:{i.shiftFocus(1);return}case zu.UP:{i.shiftFocus(-1);return}case zu.RETURN:{i.selectFocused();return}case zu.TAB:{i.selectFocused();return}default:return}}),Ze(rt(i),"shiftFocus",function(s){var o=fy(i.state.suggestions);i.setState({focusIndex:(o+i.state.focusIndex+s)%o,scrollFocusedIntoView:!0})}),Ze(rt(i),"selectFocused",function(){var s=i.state,o=s.suggestions,a=s.focusIndex,l=Object.values(o).reduce(function(h,f){var p=f.results,m=f.queryInfo;return[].concat(N0(h),N0(p.map(function(g){return{result:g,queryInfo:m}})))},[])[a],u=l.result,d=l.queryInfo;i.addMention(u,d),i.setState({focusIndex:0})}),Ze(rt(i),"handleBlur",function(s){var o=i._suggestionsMouseDown;i._suggestionsMouseDown=!1,o||i.setState({selectionStart:null,selectionEnd:null}),window.setTimeout(function(){i.updateHighlighterScroll()},1),i.props.onBlur(s,o)}),Ze(rt(i),"handleSuggestionsMouseDown",function(s){i._suggestionsMouseDown=!0}),Ze(rt(i),"handleSuggestionsMouseEnter",function(s){i.setState({focusIndex:s,scrollFocusedIntoView:!1})}),Ze(rt(i),"updateSuggestionsPosition",function(){var s=i.state.caretPosition,o=i.props,a=o.suggestionsPortalHost,l=o.allowSuggestionsAboveCursor,u=o.forceSuggestionsAboveCursor;if(!(!s||!i.suggestionsElement)){var d=i.suggestionsElement,h=i.highlighterElement,f=h.getBoundingClientRect(),p=Yx(h,"font-size"),m={left:f.left+s.left,top:f.top+s.top+p},g=Math.max(document.documentElement.clientHeight,window.innerHeight||0);if(d){var y={};if(a){y.position="fixed";var v=m.left,b=m.top;v-=Yx(d,"margin-left"),b-=Yx(d,"margin-top"),v-=h.scrollLeft,b-=h.scrollTop;var w=Math.max(document.documentElement.clientWidth,window.innerWidth||0);v+d.offsetWidth>w?y.left=Math.max(0,w-d.offsetWidth):y.left=v,l&&b+d.offsetHeight>g&&d.offsetHeight<b-p||u?y.top=Math.max(0,b-d.offsetHeight-p):y.top=b}else{var x=s.left-h.scrollLeft,S=s.top-h.scrollTop;x+d.offsetWidth>i.containerElement.offsetWidth?y.right=0:y.left=x,l&&m.top-h.scrollTop+d.offsetHeight>g&&d.offsetHeight<f.top-p-h.scrollTop||u?y.top=S-d.offsetHeight-p:y.top=S}y.left===i.state.suggestionsPosition.left&&y.top===i.state.suggestionsPosition.top&&y.position===i.state.suggestionsPosition.position||i.setState({suggestionsPosition:y})}}}),Ze(rt(i),"updateHighlighterScroll",function(){var s=i.inputElement,o=i.highlighterElement;!s||!o||(o.scrollLeft=s.scrollLeft,o.scrollTop=s.scrollTop,o.height=s.height)}),Ze(rt(i),"handleCompositionStart",function(){py=!0}),Ze(rt(i),"handleCompositionEnd",function(){py=!1}),Ze(rt(i),"setSelection",function(s,o){if(!(s===null||o===null)){var a=i.inputElement;if(a.setSelectionRange)a.setSelectionRange(s,o);else if(a.createTextRange){var l=a.createTextRange();l.collapse(!0),l.moveEnd("character",o),l.moveStart("character",s),l.select()}}}),Ze(rt(i),"updateMentionsQueries",function(s,o){i._queryId++,i.suggestions={},i.setState({suggestions:{}});var a=i.props.value||"",l=i.props.children,u=ga(l),d=On(a,u,o,"NULL");if(d!==null){var h=GNe(a.substring(0,d),u),f=s.substring(h,o);ie.Children.forEach(l,function(p,m){if(p){var g=mCe(p.props.trigger,i.props),y=f.match(g);if(y){var v=h+f.indexOf(y[1],y.index);i.queryData(y[2],m,v,v+y[1].length,s)}}})}}),Ze(rt(i),"clearSuggestions",function(){i._queryId++,i.suggestions={},i.setState({suggestions:{},focusIndex:0})}),Ze(rt(i),"queryData",function(s,o,a,l,u){var d=i.props,h=d.children,f=d.ignoreAccents,p=C.Children.toArray(h)[o],m=gCe(p.props.data,f),g=m(s,i.updateSuggestions.bind(null,i._queryId,o,s,a,l,u));g instanceof Array&&i.updateSuggestions(i._queryId,o,s,a,l,u,g)}),Ze(rt(i),"updateSuggestions",function(s,o,a,l,u,d,h){if(s===i._queryId){i.suggestions=ls(ls({},i.suggestions),{},Ze({},o,{queryInfo:{childIndex:o,query:a,querySequenceStart:l,querySequenceEnd:u,plainTextValue:d},results:h}));var f=i.state.focusIndex,p=fy(i.suggestions);i.setState({suggestions:i.suggestions,focusIndex:f>=p?Math.max(p-1,0):f})}}),Ze(rt(i),"addMention",function(s,o){var a=s.id,l=s.display,u=o.childIndex,d=o.querySequenceStart,h=o.querySequenceEnd,f=o.plainTextValue,p=i.props.value||"",m=ga(i.props.children),g=C.Children.toArray(i.props.children)[u],y=g.props,v=y.markup,b=y.displayTransform,w=y.appendSpaceOnAdd,x=y.onAdd,S=On(p,m,d,"START"),E=S+h-d,N=XNe(v,a,l);w&&(N+=" ");var _=pp(p,S,E,N);i.inputElement.focus();var k=b(a,l);w&&(k+=" ");var j=d+k.length;i.setState({selectionStart:j,selectionEnd:j,setSelectionAfterMentionChange:!0});var T={target:{value:_}},P=Uf(_,m),O=pp(f,d,h,k);i.executeOnChange(T,_,O,P),x&&x(a,l,S,E),i.clearSuggestions()}),Ze(rt(i),"isLoading",function(){var s=!1;return ie.Children.forEach(i.props.children,function(o){s=s||o&&o.props.isLoading}),s}),Ze(rt(i),"isOpened",function(){return AR(i.state.selectionStart)&&(fy(i.state.suggestions)!==0||i.isLoading())}),Ze(rt(i),"_queryId",0),i.suggestions={},i.uuidSuggestionsOverlay=Math.random().toString(16).substring(2),i.handleCopy=i.handleCopy.bind(rt(i)),i.handleCut=i.handleCut.bind(rt(i)),i.handlePaste=i.handlePaste.bind(rt(i)),i.state={focusIndex:0,selectionStart:null,selectionEnd:null,suggestions:{},caretPosition:null,suggestionsPosition:{},setSelectionAfterHandlePaste:!1},i}return oNe(r,[{key:"componentDidMount",value:function(){document.addEventListener("copy",this.handleCopy),document.addEventListener("cut",this.handleCut),document.addEventListener("paste",this.handlePaste),this.updateSuggestionsPosition()}},{key:"componentDidUpdate",value:function(i,s){s.suggestionsPosition===this.state.suggestionsPosition&&this.updateSuggestionsPosition(),this.state.setSelectionAfterMentionChange&&(this.setState({setSelectionAfterMentionChange:!1}),this.setSelection(this.state.selectionStart,this.state.selectionEnd)),this.state.setSelectionAfterHandlePaste&&(this.setState({setSelectionAfterHandlePaste:!1}),this.setSelection(this.state.selectionStart,this.state.selectionEnd))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("copy",this.handleCopy),document.removeEventListener("cut",this.handleCut),document.removeEventListener("paste",this.handlePaste)}},{key:"render",value:function(){return ie.createElement("div",Yi({ref:this.setContainerElement},this.props.style),this.renderControl(),this.renderSuggestionsOverlay())}},{key:"handlePaste",value:function(i){if(i.target===this.inputElement&&this.supportsClipboardActions(i)){i.preventDefault();var s=this.state,o=s.selectionStart,a=s.selectionEnd,l=this.props,u=l.value,d=l.children,h=ga(d),f=On(u,h,o,"START"),p=On(u,h,a,"END"),m=i.clipboardData.getData("text/react-mentions"),g=i.clipboardData.getData("text/plain"),y=pp(u,f,p,m||g).replace(/\r/g,""),v=Gl(y,h),b={target:ls(ls({},i.target),{},{value:y})};this.executeOnChange(b,y,v,Uf(y,h));var w=KF(u,h,o),x=(w||o)+Gl(m||g,h).length;this.setState({selectionStart:x,selectionEnd:x,setSelectionAfterHandlePaste:!0})}}},{key:"saveSelectionToClipboard",value:function(i){var s=this.inputElement.selectionStart,o=this.inputElement.selectionEnd,a=this.props,l=a.children,u=a.value,d=ga(l),h=On(u,d,s,"START"),f=On(u,d,o,"END");i.clipboardData.setData("text/plain",i.target.value.slice(s,o)),i.clipboardData.setData("text/react-mentions",u.slice(h,f))}},{key:"supportsClipboardActions",value:function(i){return!!i.clipboardData}},{key:"handleCopy",value:function(i){i.target===this.inputElement&&this.supportsClipboardActions(i)&&(i.preventDefault(),this.saveSelectionToClipboard(i))}},{key:"handleCut",value:function(i){if(i.target===this.inputElement&&this.supportsClipboardActions(i)){i.preventDefault(),this.saveSelectionToClipboard(i);var s=this.state,o=s.selectionStart,a=s.selectionEnd,l=this.props,u=l.children,d=l.value,h=ga(u),f=On(d,h,o,"START"),p=On(d,h,a,"END"),m=[d.slice(0,f),d.slice(p)].join(""),g=Gl(m,h),y={target:ls(ls({},i.target),{},{value:g})};this.executeOnChange(y,m,g,Uf(d,h))}}}]),r}(ie.Component);Ze(pD,"propTypes",Koe);Ze(pD,"defaultProps",{ignoreAccents:!1,singleLine:!1,allowSuggestionsAboveCursor:!1,onKeyDown:function(){return null},onSelect:function(){return null},onBlur:function(){return null}});var Yx=function(e,r){var n=parseFloat(window.getComputedStyle(e,null).getPropertyValue(r));return isFinite(n)?n:0},yCe=typeof navigator<"u"&&/iPhone|iPad|iPod/i.test(navigator.userAgent),vCe=$b({position:"relative",overflowY:"visible",input:{display:"block",width:"100%",position:"absolute",margin:0,top:0,left:0,boxSizing:"border-box",backgroundColor:"transparent",fontFamily:"inherit",fontSize:"inherit",letterSpacing:"inherit"},"&multiLine":{input:ls({height:"100%",bottom:0,overflow:"hidden",resize:"none"},yCe?{marginTop:1,marginLeft:-3}:null)}},function(t){var e=t.singleLine;return{"&singleLine":e,"&multiLine":!e}}),bCe=vCe(pD),xCe={fontWeight:"inherit"},mD=function(e){var r=e.display,n=e.style,i=e.className,s=e.classNames,o=fD(xCe,{style:n,className:i,classNames:s});return ie.createElement("strong",o,r)};mD.propTypes={onAdd:ve.func,onRemove:ve.func,renderSuggestion:ve.func,trigger:ve.oneOfType([ve.string,ve.instanceOf(RegExp)]),markup:ve.string,displayTransform:ve.func,allowSpaceInQuery:ve.bool,isLoading:ve.bool};mD.defaultProps={trigger:"@",markup:"@[__display__](__id__)",displayTransform:function(e,r){return r||e},onAdd:function(){return null},onRemove:function(){return null},renderSuggestion:null,isLoading:!1,appendSpaceOnAdd:!1};const wCe={backgroundColor:"#e0f2fe",borderRadius:"2px",padding:"1px 2px"},SCe={control:{minHeight:80},input:{padding:9,border:"1px solid #d1d5db",borderRadius:"0.375rem"},suggestions:{list:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"0.375rem",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},item:{padding:"8px 12px","&focused":{backgroundColor:"#f3f4f6"}}}};function ECe({value:t,onChange:e,placeholder:r,workspaceIds:n=[]}){const i=async(s,o)=>{if(!s||n.length===0){o([]);return}try{const a=await Se.searchWorkspaceMembers(n,s);o(a.map(l=>({id:l.id,display:l.name})))}catch{o([])}};return c.jsx(bCe,{value:t,onChange:(s,o)=>e(o),placeholder:r||"Add a note... Use @ to mention someone",style:SCe,children:c.jsx(mD,{trigger:"@",data:i,markup:"@[__display__](__id__)",style:wCe,appendSpaceOnAdd:!0})})}function _Ce({isOpen:t,onClose:e,onSubmit:r,isLoading:n,initialContent:i="",isContactShared:s=!1,workspaceIds:o=[]}){const[a,l]=C.useState(""),[u,d]=C.useState("private");if(C.useEffect(()=>{t&&(l(i||""),d("private"))},[t,i]),!t)return null;const h=o.length>0?!a||a.trim()==="":IR(a),f=m=>{m.preventDefault(),!h&&(r(a,u),l(""),d("private"))},p=()=>{l(""),d("private"),e()};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Add note"}),c.jsx("button",{onClick:p,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(ht,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:f,className:"p-4",children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Note"}),o.length>0?c.jsx(ECe,{value:a,onChange:l,placeholder:"Add a note... Use @ to mention someone",workspaceIds:o}):c.jsx(Ooe,{value:a,onChange:l,placeholder:"Enter your note...",disabled:n,autoFocus:!0,minHeight:"150px"})]}),s&&c.jsx("div",{className:"mb-4",children:c.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:u==="shared",onChange:m=>d(m.target.checked?"shared":"private"),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),c.jsxs("span",{className:"flex items-center gap-1.5",children:[u==="shared"?c.jsx($r,{className:"w-4 h-4 text-blue-500"}):c.jsx(Rm,{className:"w-4 h-4 text-gray-400"}),"Share this note with others who can see this contact"]})]})}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx("button",{type:"button",onClick:p,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n||h,children:n?"Adding...":"Add note"})]})]})]})})}function Goe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,todo:i=null}){const[s,o]=C.useState(""),[a,l]=C.useState(""),[u,d]=C.useState(!1),h=()=>new Date().toISOString().split("T")[0];if(C.useEffect(()=>{i?(o(i.content||""),l(i.due_date||""),d(i.is_completed||!1)):(o(""),l(h()),d(!1))},[i,t]),!t)return null;const f=g=>{g.preventDefault(),s.trim()&&(r({content:s.trim(),due_date:a||null,is_completed:u}),i||(o(""),l(h()),d(!1)))},p=()=>{i||(o(""),l(h()),d(!1)),e()},m=g=>{if(!g)return"";try{return new Date(g).toISOString().split("T")[0]}catch{return""}};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:i?"Edit todo":"Add todo"}),c.jsx("button",{onClick:p,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(ht,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:f,className:"p-4",children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"todo-content",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),c.jsx("textarea",{id:"todo-content",value:s,onChange:g=>o(g.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"What needs to be done?",disabled:n,autoFocus:!0})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"todo-due-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Due date (optional)"}),c.jsx("input",{id:"todo-due-date",type:"date",value:m(a),onChange:g=>l(g.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),i&&c.jsx("div",{className:"mb-4",children:c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:u,onChange:g=>d(g.target.checked),className:"mr-2",disabled:n}),c.jsx("span",{className:"text-sm text-gray-700",children:"Completed"})]})}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx("button",{type:"button",onClick:p,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n||!s.trim(),children:n?i?"Saving...":"Adding...":i?"Save":"Add todo"})]})]})]})})}const NCe=[{value:"email",label:"Email"},{value:"phone",label:"Phone"},{value:"mobile",label:"Mobile"},{value:"website",label:"Website"},{value:"calendar",label:"Calendar link"},{value:"linkedin",label:"LinkedIn"},{value:"twitter",label:"Twitter"},{value:"bluesky",label:"Bluesky"},{value:"threads",label:"Threads"},{value:"instagram",label:"Instagram"},{value:"facebook",label:"Facebook"},{value:"slack",label:"Slack"},{value:"other",label:"Other"}];function CCe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,contactInfo:i=[]}){const{register:s,control:o,handleSubmit:a,reset:l,formState:{errors:u}}=eo({defaultValues:{contacts:i.length>0?i.map(g=>({contact_type:g.contact_type||"",contact_label:g.contact_label||"",contact_value:g.contact_value||""})):[]}}),{fields:d,append:h,remove:f}=bye({control:o,name:"contacts"});if(C.useEffect(()=>{t&&l({contacts:i.length>0?i.map(g=>({contact_type:g.contact_type||"",contact_label:g.contact_label||"",contact_value:g.contact_value||""})):[]})},[t,i,l]),!t)return null;const p=g=>{const y=g.contacts.filter(v=>v.contact_type&&v.contact_value);r(y)},m=()=>{h({contact_type:"",contact_label:"",contact_value:""})};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Edit contact details"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(ht,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:a(p),className:"flex flex-col flex-1 overflow-hidden",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[d.length===0?c.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:'No contact details yet. Click "Add contact detail" to add one.'}):c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"hidden md:grid md:grid-cols-12 gap-2 text-xs font-medium text-gray-500 px-1",children:[c.jsx("div",{className:"col-span-3",children:"Type"}),c.jsx("div",{className:"col-span-3",children:"Label"}),c.jsx("div",{className:"col-span-5",children:"Value"}),c.jsx("div",{className:"col-span-1"})]}),d.map((g,y)=>c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-2 p-3 md:p-2 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"md:hidden text-xs font-medium text-gray-500 mb-1 block",children:"Type"}),c.jsxs("select",{...s(`contacts.${y}.contact_type`,{required:!0}),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n,children:[c.jsx("option",{value:"",children:"Select type..."}),NCe.map(v=>c.jsx("option",{value:v.value,children:v.label},v.value))]})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"md:hidden text-xs font-medium text-gray-500 mb-1 block",children:"Label"}),c.jsx("input",{...s(`contacts.${y}.contact_label`),placeholder:"e.g., Work",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),c.jsxs("div",{className:"md:col-span-5",children:[c.jsx("label",{className:"md:hidden text-xs font-medium text-gray-500 mb-1 block",children:"Value"}),c.jsx("input",{...s(`contacts.${y}.contact_value`,{required:!0}),placeholder:"e.g., john@example.com",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),c.jsx("div",{className:"md:col-span-1 flex items-center justify-end md:justify-center",children:c.jsx("button",{type:"button",onClick:()=>f(y),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove",disabled:n,children:c.jsx(Sn,{className:"w-4 h-4"})})})]},g.id))]}),c.jsxs("button",{type:"button",onClick:m,className:"mt-4 w-full py-2 px-4 border-2 border-dashed border-gray-300 rounded-lg text-sm text-gray-600 hover:border-gray-400 hover:text-gray-700 transition-colors flex items-center justify-center gap-2",disabled:n,children:[c.jsx(lr,{className:"w-4 h-4"}),"Add contact detail"]})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":"Save changes"})]})]})]})})}function kCe({value:t,onChange:e,people:r,isLoading:n,excludePersonId:i}){const[s,o]=C.useState(""),[a,l]=C.useState(!1),u=C.useRef(null),d=C.useRef(null),h=C.useMemo(()=>r.filter(b=>b.id!==i).sort((b,w)=>{var E,N;const x=(b.first_name||((E=b.acf)==null?void 0:E.first_name)||"").toLowerCase(),S=(w.first_name||((N=w.acf)==null?void 0:N.first_name)||"").toLowerCase();return x<S?-1:x>S?1:0}),[r,i]),f=C.useMemo(()=>{if(!s)return h.slice(0,10);const v=s.toLowerCase();return h.filter(b=>{var E,N;const w=Ed(b).toLowerCase(),x=(b.first_name||((E=b.acf)==null?void 0:E.first_name)||"").toLowerCase(),S=(b.last_name||((N=b.acf)==null?void 0:N.last_name)||"").toLowerCase();return w.includes(v)||x.includes(v)||S.includes(v)}).slice(0,10)},[h,s]),p=C.useMemo(()=>h.find(v=>v.id===t),[h,t]);C.useEffect(()=>{const v=b=>{d.current&&!d.current.contains(b.target)&&u.current&&!u.current.contains(b.target)&&l(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const m=v=>{e(v),o(""),l(!1)},g=()=>{e(null),o(""),l(!1)},y=p?Ed(p):"";return c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"relative",children:p&&!a?c.jsxs("div",{className:"flex items-center justify-between input pr-8 cursor-text",onClick:()=>l(!0),children:[c.jsx("span",{children:y}),c.jsx("button",{type:"button",onClick:v=>{v.stopPropagation(),g()},className:"absolute right-2 text-gray-400 hover:text-gray-600",children:c.jsx(ht,{className:"w-4 h-4"})})]}):c.jsx("input",{ref:u,type:"text",value:s,onChange:v=>{o(v.target.value),l(!0)},onFocus:()=>l(!0),placeholder:"Search for a person...",className:"input",disabled:n})}),a&&(s||!p)&&c.jsx("div",{ref:d,className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:f.length>0?f.map(v=>c.jsx("button",{type:"button",onClick:()=>m(v.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t===v.id?"bg-primary-50":""}`,children:Ed(v)},v.id)):c.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No people found"})})]})}function jCe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,relationship:i=null,personId:s,allPeople:o=[],isPeopleLoading:a=!1,onCreatePerson:l}){const u=!!i,{data:d=[],isLoading:h}=at({queryKey:["relationship-types"],queryFn:async()=>(await et.getRelationshipTypes()).data}),{register:f,handleSubmit:p,reset:m,control:g,formState:{errors:y}}=eo({defaultValues:{related_person:null,relationship_type:"",relationship_label:""}});if(C.useEffect(()=>{t&&m(i?{related_person:i.related_person||null,relationship_type:i.relationship_type?String(i.relationship_type):"",relationship_label:i.relationship_label||""}:{related_person:null,relationship_type:"",relationship_label:""})},[t,i,m]),!t)return null;const v=b=>{r({related_person:b.related_person||null,relationship_type:b.relationship_type?parseInt(b.relationship_type,10):null,relationship_label:b.relationship_label||""})};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:u?"Edit relationship":"Add relationship"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(ht,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:p(v),className:"flex flex-col flex-1 overflow-hidden",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Related person *"}),c.jsx(Tv,{name:"related_person",control:g,rules:{required:"Please select a person"},render:({field:b})=>c.jsx(kCe,{value:b.value,onChange:b.onChange,people:o,isLoading:a,excludePersonId:parseInt(s,10)})}),y.related_person&&c.jsx("p",{className:"text-sm text-red-600 mt-1",children:y.related_person.message}),!u&&l&&c.jsx("div",{className:"mt-2",children:c.jsxs("button",{type:"button",onClick:l,className:"inline-flex items-center gap-1 text-sm text-primary-600 hover:text-primary-700",children:[c.jsx(lr,{className:"w-4 h-4"}),"Add new person"]})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Relationship type"}),c.jsxs("select",{...f("relationship_type"),className:"input",disabled:h||n,children:[c.jsx("option",{value:"",children:"Select a type..."}),d.map(b=>c.jsx("option",{value:b.id,children:b.name},b.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Custom label"}),c.jsx("input",{...f("relationship_label"),className:"input",placeholder:"e.g., Brother-in-law",disabled:n}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Override the relationship type with a custom label"})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":u?"Save changes":"Add relationship"})]})]})]})})}function TCe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,address:i=null}){const s=!!i,{register:o,handleSubmit:a,reset:l,formState:{errors:u}}=eo({defaultValues:{address_label:"",street:"",postal_code:"",city:"",state:"",country:""}});if(C.useEffect(()=>{t&&l(i?{address_label:i.address_label||"",street:i.street||"",postal_code:i.postal_code||"",city:i.city||"",state:i.state||"",country:i.country||""}:{address_label:"",street:"",postal_code:"",city:"",state:"",country:""})},[t,i,l]),!t)return null;const d=h=>{r({address_label:h.address_label||"",street:h.street||"",postal_code:h.postal_code||"",city:h.city||"",state:h.state||"",country:h.country||""})};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:s?"Edit address":"Add address"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(ht,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:a(d),className:"flex flex-col flex-1 overflow-hidden",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Label"}),c.jsx("input",{...o("address_label"),className:"input",placeholder:"e.g., Home, Work",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Street"}),c.jsx("input",{...o("street"),className:"input",placeholder:"e.g., 123 Main Street",disabled:n})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Postal code"}),c.jsx("input",{...o("postal_code"),className:"input",placeholder:"e.g., 12345",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"City"}),c.jsx("input",{...o("city"),className:"input",placeholder:"e.g., Amsterdam",disabled:n})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"State/Province"}),c.jsx("input",{...o("state"),className:"input",placeholder:"e.g., North Holland",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Country"}),c.jsx("input",{...o("country"),className:"input",placeholder:"e.g., Netherlands",disabled:n})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":s?"Save changes":"Add address"})]})]})]})})}function OCe({value:t,onChange:e,companies:r,isLoading:n}){return c.jsxs("select",{value:t||"",onChange:i=>e(i.target.value?parseInt(i.target.value,10):null),className:"input",disabled:n,children:[c.jsx("option",{value:"",children:"Select an organization..."}),r.map(i=>{var s;return c.jsx("option",{value:i.id,children:((s=i.title)==null?void 0:s.rendered)||i.title},i.id)})]})}function PCe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,workHistoryItem:i=null}){const s=!!i,{data:o=[],isLoading:a}=at({queryKey:["companies","all"],queryFn:async()=>(await et.getCompanies({per_page:100})).data}),l=C.useMemo(()=>[...o].sort((y,v)=>{var x,S;const b=(((x=y.title)==null?void 0:x.rendered)||y.title||"").toLowerCase(),w=(((S=v.title)==null?void 0:S.rendered)||v.title||"").toLowerCase();return b.localeCompare(w)}),[o]),{register:u,handleSubmit:d,reset:h,watch:f,control:p,formState:{errors:m}}=eo({defaultValues:{company:null,job_title:"",description:"",start_date:"",end_date:"",is_current:!1}});if(f("is_current"),C.useEffect(()=>{t&&h(i?{company:i.company||null,job_title:i.job_title||"",description:i.description||"",start_date:i.start_date||"",end_date:i.end_date||"",is_current:i.is_current||!1}:{company:null,job_title:"",description:"",start_date:"",end_date:"",is_current:!1})},[t,i,h]),!t)return null;const g=y=>{r({company:y.company||null,job_title:y.job_title||"",description:y.description||"",start_date:y.start_date||"",end_date:y.end_date||"",is_current:y.is_current||!1})};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[c.jsx("h2",{className:"text-lg font-semibold",children:s?"Edit work history":"Add work history"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:c.jsx(ht,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:d(g),className:"flex flex-col flex-1 overflow-hidden",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Organization"}),c.jsx(Tv,{name:"company",control:p,render:({field:y})=>c.jsx(OCe,{value:y.value,onChange:y.onChange,companies:l,isLoading:a||n})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Job title"}),c.jsx("input",{...u("job_title"),className:"input",placeholder:"e.g., Software Engineer",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Description"}),c.jsx("textarea",{...u("description"),className:"input",rows:3,placeholder:"Job description, responsibilities, achievements...",disabled:n})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Start date"}),c.jsx("input",{type:"date",...u("start_date"),className:"input",disabled:n})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"End date"}),c.jsx("input",{type:"date",...u("end_date"),className:"input",disabled:n})]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"is_current",...u("is_current"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),c.jsx("label",{htmlFor:"is_current",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Currently works here"})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":s?"Save changes":"Add work history"})]})]})]})})}function ICe(t,e){return at({queryKey:["shares",t,e],queryFn:async()=>(await Se.getPostShares(e,t)).data,enabled:!!e})}function RCe(){const t=tt();return He({mutationFn:async({postType:e,postId:r,userId:n,permission:i})=>(await Se.sharePost(r,e,{user_id:n,permission:i})).data,onSuccess:(e,{postType:r,postId:n})=>{t.invalidateQueries({queryKey:["shares",r,n]})}})}function MCe(){const t=tt();return He({mutationFn:async({postType:e,postId:r,userId:n})=>{await Se.unsharePost(r,e,n)},onSuccess:(e,{postType:r,postId:n})=>{t.invalidateQueries({queryKey:["shares",r,n]})}})}function ACe(t){return at({queryKey:["users","search",t],queryFn:async()=>(await Se.searchUsers(t)).data,enabled:(t==null?void 0:t.length)>=2})}function Yoe({isOpen:t,onClose:e,postType:r,postId:n,postTitle:i}){const[s,o]=C.useState(""),[a,l]=C.useState("view"),u=C.useRef(null),{data:d=[],isLoading:h}=ICe(r,n),{data:f=[],isLoading:p}=ACe(s),m=RCe(),g=MCe();C.useEffect(()=>{t&&(o(""),setTimeout(()=>{var w;return(w=u.current)==null?void 0:w.focus()},100))},[t]);const y=f.filter(w=>!d.some(x=>x.user_id===w.id)),v=async w=>{await m.mutateAsync({postType:r,postId:n,userId:w.id,permission:a}),o("")},b=async w=>{await g.mutateAsync({postType:r,postId:n,userId:w})};return t?c.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:e}),c.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:c.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-lg shadow-xl",children:[c.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Share"}),c.jsx("p",{className:"text-sm text-gray-500 truncate max-w-xs",children:i})]}),c.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:c.jsx(ht,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"px-6 py-4",children:[c.jsxs("div",{className:"relative mb-4",children:[c.jsx(gl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),c.jsx("input",{ref:u,type:"text",value:s,onChange:w=>o(w.target.value),placeholder:"Search users by name or email...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Permission:"}),c.jsxs("select",{value:a,onChange:w=>l(w.target.value),className:"text-sm border border-gray-300 rounded-md px-2 py-1 focus:ring-primary-500 focus:border-primary-500",children:[c.jsx("option",{value:"view",children:"Can view"}),c.jsx("option",{value:"edit",children:"Can edit"})]})]}),s.length>=2&&c.jsx("div",{className:"mb-4",children:p?c.jsx("div",{className:"py-3 text-center text-sm text-gray-500",children:"Searching..."}):y.length===0?c.jsx("div",{className:"py-3 text-center text-sm text-gray-500",children:f.length===0?"No users found":"All matching users already have access"}):c.jsx("div",{className:"border border-gray-200 rounded-lg divide-y divide-gray-100",children:y.map(w=>c.jsxs("div",{className:"flex items-center gap-3 p-3 hover:bg-gray-50",children:[c.jsx("img",{src:w.avatar_url,alt:w.display_name,className:"w-8 h-8 rounded-full"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:w.display_name}),c.jsx("div",{className:"text-xs text-gray-500 truncate",children:w.email})]}),c.jsx("button",{onClick:()=>v(w),disabled:m.isPending,className:"p-2 text-primary-600 hover:bg-primary-50 rounded-full",children:c.jsx(pb,{className:"w-4 h-4"})})]},w.id))})}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Shared with (",d.length,")"]}),h?c.jsx("div",{className:"py-3 text-center text-sm text-gray-500",children:"Loading..."}):d.length===0?c.jsx("div",{className:"py-6 text-center text-sm text-gray-500",children:"Not shared with anyone yet"}):c.jsx("div",{className:"border border-gray-200 rounded-lg divide-y divide-gray-100",children:d.map(w=>c.jsxs("div",{className:"flex items-center gap-3 p-3",children:[c.jsx("img",{src:w.avatar_url,alt:w.display_name,className:"w-8 h-8 rounded-full"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:w.display_name}),c.jsxs("div",{className:"text-xs text-gray-500",children:["Can ",w.permission]})]}),c.jsx("button",{onClick:()=>b(w.user_id),disabled:g.isPending,className:"p-2 text-red-600 hover:bg-red-50 rounded-full",children:c.jsx(Sn,{className:"w-4 h-4"})})]},w.user_id))})]})]}),c.jsx("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end",children:c.jsx("button",{onClick:e,className:"btn-secondary",children:"Done"})})]})})]}):null}function Gn(t){return t?String(t).replace(/\\/g,"\\\\").replace(/;/g,"\\;").replace(/,/g,"\\,").replace(/\n/g,"\\n"):""}function DCe(t){return t?t.replace(/[^\d+]/g,""):""}function JF(t){if(!t)return"";const e=new Date(t);if(isNaN(e.getTime()))return"";const r=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${r}${n}${i}`}function $Ce(t,e={}){if(!t||!Array.isArray(t))return{title:"",org:""};const r=t.find(i=>i.is_current);if(r){const i=r.company&&e[r.company]?e[r.company].name||e[r.company]:"";return{title:r.job_title||"",org:i}}const n=[...t].filter(i=>i.start_date).sort((i,s)=>new Date(s.start_date)-new Date(i.start_date));if(n.length>0){const i=n[0].company&&e[n[0].company]?e[n[0].company].name||e[n[0].company]:"";return{title:n[0].job_title||"",org:i}}return{title:"",org:""}}function FCe(t,e={}){if(!t)throw new Error("Person data is required");const{companyMap:r={},personDates:n=[]}=e,i=t.acf||{},s=[];s.push("BEGIN:VCARD"),s.push("VERSION:3.0");const o=i.first_name||"",a=i.last_name||"",l=t.name||`${o} ${a}`.trim()||"Unknown";s.push(`FN:${Gn(l)}`),s.push(`N:${Gn(a)};${Gn(o)};;;`),i.nickname&&s.push(`NICKNAME:${Gn(i.nickname)}`),i.contact_info&&Array.isArray(i.contact_info)&&i.contact_info.forEach(h=>{if(!h.contact_value)return;const f=Gn(h.contact_value),p=h.contact_label?Gn(h.contact_label):"";switch(h.contact_type){case"email":const m=p?`EMAIL;TYPE=INTERNET,${p.toUpperCase()}`:"EMAIL;TYPE=INTERNET";s.push(`${m}:${f}`);break;case"phone":case"mobile":const g=h.contact_type==="mobile"?"CELL":"VOICE",y=p?`TEL;TYPE=${g},${p.toUpperCase()}`:`TEL;TYPE=${g}`,v=DCe(h.contact_value);v&&s.push(`${y}:${v}`);break;case"website":case"linkedin":case"twitter":case"instagram":case"facebook":let b=h.contact_value;b.match(/^https?:\/\//i)||(b=`https://${b}`);const w=h.contact_type==="linkedin"?"PROFILE":"WORK",x=p?`URL;TYPE=${w},${p.toUpperCase()}`:`URL;TYPE=${w}`;s.push(`${x}:${Gn(b)}`);break}}),i.addresses&&Array.isArray(i.addresses)&&i.addresses.forEach(h=>{const f=h.address_label?`ADR;TYPE=${h.address_label.toUpperCase()}`:"ADR;TYPE=HOME",p=Gn(h.street||""),m=Gn(h.city||""),g=Gn(h.state||""),y=Gn(h.postal_code||""),v=Gn(h.country||"");(p||m||g||y||v)&&s.push(`${f}:;;${p};${m};${g};${y};${v}`)});const{title:u,org:d}=$Ce(i.work_history,r);if(d&&s.push(`ORG:${Gn(d)}`),u&&s.push(`TITLE:${Gn(u)}`),n&&Array.isArray(n)){const h=n.find(f=>{const p=Array.isArray(f.date_type)?f.date_type[0]:f.date_type;return(p==null?void 0:p.toLowerCase())==="birthday"});if(h!=null&&h.date_value){const f=JF(h.date_value);f&&s.push(`BDAY:${f}`)}}if(t.thumbnail,t.modified){const h=JF(t.modified);h&&s.push(`REV:${h}T000000Z`)}return s.push("END:VCARD"),s.join(`\r
`)}function qCe(t,e={}){const{filename:r,...n}=e,i=FCe(t,n),s=new Blob([i],{type:"text/vcard;charset=utf-8"}),o=URL.createObjectURL(s),a=document.createElement("a");a.href=o,a.download=r||`${t.name||"contact"}.vcf`.replace(/[^a-z0-9.-]/gi,"_"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)}const LCe=({className:t})=>c.jsx("svg",{className:t,viewBox:"0 0 382 382",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",children:c.jsx("path",{d:`M347.445,0H34.555C15.471,0,0,15.471,0,34.555v312.889C0,366.529,15.471,382,34.555,382h312.889
      C366.529,382,382,366.529,382,347.444V34.555C382,15.471,366.529,0,347.445,0z M118.207,329.844c0,5.554-4.502,10.056-10.056,10.056
      H65.345c-5.554,0-10.056-4.502-10.056-10.056V150.403c0-5.554,4.502-10.056,10.056-10.056h42.806
      c5.554,0,10.056,4.502,10.056,10.056V329.844z M86.748,123.432c-22.459,0-40.666-18.207-40.666-40.666S64.289,42.1,86.748,42.1
      s40.666,18.207,40.666,40.666S109.208,123.432,86.748,123.432z M341.91,330.654c0,5.106-4.14,9.246-9.246,9.246H286.73
      c-5.106,0-9.246-4.14-9.246-9.246v-84.168c0-12.556,3.683-55.021-32.813-55.021c-28.309,0-34.051,29.066-35.204,42.11v97.079
      c0,5.106-4.139,9.246-9.246,9.246h-44.426c-5.106,0-9.246-4.14-9.246-9.246V149.593c0-5.106,4.14-9.246,9.246-9.246h44.426
      c5.106,0,9.246,4.14,9.246,9.246v15.655c10.497-15.753,26.097-27.912,59.312-27.912c73.552,0,73.131,68.716,73.131,106.472
      L341.91,330.654L341.91,330.654z`})});function go(t){if(!t)return null;switch(t){case"male":return"";case"female":return"";case"non_binary":case"other":case"prefer_not_to_say":return"";default:return null}}function BCe(){var O$,P$,I$,R$,M$,A$,D$,$$,F$,q$,L$,B$,z$,W$,V$,U$,H$,K$,G$,Y$,Q$,X$;const{id:t}=jh(),e=Un(),r=tt(),{data:n,isLoading:i,error:s}=dne(t),{data:o}=Dge(t),{data:a}=$ge(t),l=qge(),u=zge(),d=Kge(),h=Fge(),f=Bge(),p=gA(),m=Wge(),g=fne(),y=Uge(),v=Vge(),b=Hge(),{data:w,isLoading:x}=lu(),{data:S=[]}=at({queryKey:["investments",t],queryFn:async()=>(await Se.getInvestments(t)).data,enabled:!!t}),[E,N]=C.useState("profile"),[_,k]=C.useState(!1),[j,T]=C.useState(""),[P,O]=C.useState(!1),D=C.useRef(null),[F,$]=C.useState(!1),[q,M]=C.useState(!1),[B,X]=C.useState(!1),[Q,le]=C.useState(!1),[G,se]=C.useState(!1),[ke,be]=C.useState(!1),[$e,Ie]=C.useState(!1),[Nt,Ct]=C.useState(!1),[kt,er]=C.useState(!1),[Ye,yr]=C.useState(!1),[en,Pr]=C.useState(!1),[st,vr]=C.useState(!1),[mi,tn]=C.useState(!1),[A,L]=C.useState(!1),[V,ce]=C.useState(!1),[re,ne]=C.useState(!1),[ge,Le]=C.useState(null),[Ve,U]=C.useState(null),[K,z]=C.useState(null),[Z,pe]=C.useState(null),[we,We]=C.useState(null),[rn,Ir]=C.useState(null),[ks,js]=C.useState(null),[Pu,Ts]=C.useState(null),[Fl,Os]=C.useState(null),[Ot,io]=C.useState(null),[Iu,Ru]=C.useState(!1),[b1,Mu]=C.useState(null),{data:x1}=at({queryKey:["person-labels"],queryFn:async()=>(await et.getPersonLabels()).data}),_g=x1||[],w1=(n==null?void 0:n.labels)||[],Ng=((R$=(I$=(P$=(O$=n==null?void 0:n._embedded)==null?void 0:O$["wp:term"])==null?void 0:P$.flat())==null?void 0:I$.filter(I=>(I==null?void 0:I.taxonomy)==="person_label"))==null?void 0:R$.map(I=>I.id))||[],cf=_g.filter(I=>!w1.includes(I.name));Ih((n==null?void 0:n.name)||((M$=n==null?void 0:n.title)==null?void 0:M$.rendered)||(n==null?void 0:n.title)||"Person");const Ee=a==null?void 0:a.find(I=>{const Y=Array.isArray(I.date_type)?I.date_type[0]:I.date_type;return(Y==null?void 0:Y.toLowerCase())==="birthday"}),Me=Ee!=null&&Ee.date_value?new Date(Ee.date_value):null,Ue=(Ee==null?void 0:Ee.year_unknown)??!1,yt=a==null?void 0:a.find(I=>{const Y=Array.isArray(I.date_type)?I.date_type[0]:I.date_type;return(Y==null?void 0:Y.toLowerCase())==="died"}),mn=yt!=null&&yt.date_value?new Date(yt.date_value):null,S1=(yt==null?void 0:yt.year_unknown)??!1,so=!!mn,oo=Me&&!Ue?gx(so?mn:new Date,Me):null,uf=a?[...a].sort((I,Y)=>{const J=I.date_value?new Date(I.date_value):new Date(0),_e=Y.date_value?new Date(Y.date_value):new Date(0);return J-_e}):[],E1=async()=>{if(window.confirm("Are you sure you want to delete this person?"))try{await l.mutateAsync(t),e("/people")}catch{alert("Failed to delete person. Please try again.")}},_1=I=>{if(!I)return"";let Y=I.replace(/[\u200B-\u200D\uFEFF\u200E\u200F\u202A-\u202E]/g,"");const J=Y.startsWith("+");return Y=Y.replace(/\D/g,""),J?`+${Y}`:Y},Gce=async I=>{Pr(!0);try{const Y=uo(n.acf,{contact_info:I});await h.mutateAsync({id:t,data:{acf:Y}}),le(!1)}catch{alert("Failed to save contacts. Please try again.")}finally{Pr(!1)}},Yce=async I=>{vr(!0);try{K?await et.updateDate(K.id,{title:I.title,date_type:I.date_type,acf:{date_value:I.date_value,related_people:I.related_people,is_recurring:I.is_recurring,year_unknown:I.year_unknown}}):await et.createDate({title:I.title,status:"publish",date_type:I.date_type,acf:{date_value:I.date_value,related_people:I.related_people,is_recurring:I.is_recurring,year_unknown:I.year_unknown,_visibility:"private"}}),r.invalidateQueries({queryKey:["person-dates",t]}),r.invalidateQueries({queryKey:["reminders"]}),se(!1),z(null)}catch{alert("Failed to save date. Please try again.")}finally{vr(!1)}},Qce=async I=>{var Y;tn(!0);try{const J=[...((Y=n.acf)==null?void 0:Y.relationships)||[]],_e={related_person:I.related_person||null,relationship_type:I.relationship_type||null,relationship_label:I.relationship_label||""};we!==null?J[we]=_e:J.push(_e);const Ae=uo(n.acf,{relationships:J});await h.mutateAsync({id:t,data:{acf:Ae}}),r.invalidateQueries({queryKey:["person",t]}),be(!1),pe(null),We(null)}catch{alert("Failed to save relationship. Please try again.")}finally{tn(!1)}},Xce=async I=>{var Y;L(!0);try{const J=[...((Y=n.acf)==null?void 0:Y.addresses)||[]],_e={address_label:I.address_label||"",street:I.street||"",postal_code:I.postal_code||"",city:I.city||"",state:I.state||"",country:I.country||""};ks!==null?J[ks]=_e:J.push(_e);const Ae=uo(n.acf,{addresses:J});await h.mutateAsync({id:t,data:{acf:Ae}}),Ie(!1),Ir(null),js(null)}catch{alert("Failed to save address. Please try again.")}finally{L(!1)}},Jce=async I=>{var Y;ce(!0);try{const J=[...((Y=n.acf)==null?void 0:Y.work_history)||[]],_e={company:I.company||null,job_title:I.job_title||"",description:I.description||"",start_date:I.start_date||"",end_date:I.end_date||"",is_current:I.is_current||!1};Fl!==null?J[Fl]=_e:J.push(_e);const Ae=uo(n.acf,{work_history:J});await h.mutateAsync({id:t,data:{acf:Ae}}),Ct(!1),Ts(null),Os(null)}catch{alert("Failed to save work history. Please try again.")}finally{ce(!1)}},Zce=async I=>{ne(!0);try{const Y=uo(n.acf,{first_name:I.first_name,last_name:I.last_name,nickname:I.nickname,gender:I.gender||null,pronouns:I.pronouns||null,how_we_met:I.how_we_met,is_favorite:I.is_favorite,_visibility:I.visibility||"private",_assigned_workspaces:I.assigned_workspaces||[]});await h.mutateAsync({id:t,data:{title:`${I.first_name} ${I.last_name}`.trim(),acf:Y}}),er(!1)}catch{alert("Failed to save person. Please try again.")}finally{ne(!1)}},eue=async I=>{var _e;if(!window.confirm("Are you sure you want to delete this address?"))return;const Y=[...((_e=n.acf)==null?void 0:_e.addresses)||[]];Y.splice(I,1);const J=uo(n.acf,{addresses:Y});await h.mutateAsync({id:t,data:{acf:J}})},tue=async I=>{var Kn,lo,df,Og,J$,Z$;if(!window.confirm("Are you sure you want to delete this relationship?"))return;const Y=(lo=(Kn=n.acf)==null?void 0:Kn.relationships)==null?void 0:lo[I];if(!Y)return;const J=Y.related_person,_e=Y.relationship_type;let Ae=!0;J&&_e&&(Ae=window.confirm("Do you also want to delete the inverse relationship from the other person?"));let ot=null;if(!Ae&&J&&_e)try{const[Au,Pg]=await Promise.all([et.getPerson(J,{_embed:!0}),et.getRelationshipTypes()]),j1={};Pg.data.forEach(hf=>{j1[hf.id]=hf});const Pi=j1[_e],Ll=(df=Pi==null?void 0:Pi.acf)==null?void 0:df.inverse_relationship_type;if(Ll){const ff=(((Og=Au.data.acf)==null?void 0:Og.relationships)||[]).find(co=>{var e4,t4;const _ue=typeof co.related_person=="object"?(e4=co.related_person)==null?void 0:e4.ID:co.related_person,Nue=typeof co.relationship_type=="object"?(t4=co.relationship_type)==null?void 0:t4.term_id:co.relationship_type;return _ue===parseInt(t)&&Nue===Ll});ff&&(ot={related_person:parseInt(t),relationship_type:Ll,relationship_label:ff.relationship_label||""})}}catch{}const gt=[...((J$=n.acf)==null?void 0:J$.relationships)||[]];gt.splice(I,1);const ao=uo(n.acf,{relationships:gt});if(await h.mutateAsync({id:t,data:{acf:ao}}),!Ae&&ot&&J){await new Promise(Au=>setTimeout(Au,500));try{const Au=await et.getPerson(J,{_embed:!0}),Pg=((Z$=Au.data.acf)==null?void 0:Z$.relationships)||[];if(!Pg.some(Pi=>{var ff,co;const Ll=typeof Pi.related_person=="object"?(ff=Pi.related_person)==null?void 0:ff.ID:Pi.related_person,hf=typeof Pi.relationship_type=="object"?(co=Pi.relationship_type)==null?void 0:co.term_id:Pi.relationship_type;return Ll===ot.related_person&&hf===ot.relationship_type})){const Pi=[...Pg,ot],Ll=uo(Au.data.acf,{relationships:Pi});await et.updatePerson(J,{acf:Ll})}}catch{}}r.invalidateQueries({queryKey:["person",t]}),J&&r.invalidateQueries({queryKey:["person",J]}),r.invalidateQueries({queryKey:["people"]})},rue=async I=>{window.confirm("Are you sure you want to delete this important date?")&&await d.mutateAsync({dateId:I,personId:t})},nue=async I=>{window.confirm("Are you sure you want to delete this note?")&&await u.mutateAsync({noteId:I,personId:t})},iue=async(I,Y="private")=>{try{await f.mutateAsync({personId:t,content:I,visibility:Y}),$(!1)}catch{alert("Failed to create note. Please try again.")}},sue=async I=>{try{Ve?(await m.mutateAsync({activityId:Ve.id,data:I,personId:t}),U(null)):(await p.mutateAsync({personId:t,data:I}),Ot&&(await y.mutateAsync({todoId:Ot.id,data:{content:Ot.content,due_date:Ot.due_date,is_completed:!0},personId:t}),io(null),Mu(null))),M(!1)}catch{alert("Failed to save activity. Please try again.")}},oue=async I=>{try{await g.mutateAsync({personId:t,data:I}),X(!1),Le(null)}catch{alert("Failed to create todo. Please try again.")}},aue=async I=>{if(ge)try{await y.mutateAsync({todoId:ge.id,data:I,personId:t}),X(!1),Le(null)}catch{alert("Failed to update todo. Please try again.")}},S$=async I=>{if(!I.is_completed){io(I),Ru(!0);return}try{await y.mutateAsync({todoId:I.id,data:{content:I.content,due_date:I.due_date,is_completed:!1},personId:t})}catch{alert("Failed to update todo. Please try again.")}},lue=async()=>{if(Ot)try{await y.mutateAsync({todoId:Ot.id,data:{content:Ot.content,due_date:Ot.due_date,is_completed:!0},personId:t}),Ru(!1),io(null)}catch{alert("Failed to complete todo. Please try again.")}},cue=()=>{if(!Ot)return;const I=new Date().toISOString().split("T")[0];Mu({content:Ot.content,activity_date:I,activity_type:"note",participants:[]}),Ru(!1),M(!0)},uue=async I=>{window.confirm("Are you sure you want to delete this activity?")&&await v.mutateAsync({activityId:I,personId:t})},E$=async I=>{window.confirm("Are you sure you want to delete this todo?")&&await b.mutateAsync({todoId:I,personId:t})},due=I=>{I.type==="todo"?(Le(I),X(!0)):I.type==="activity"&&(U(I),M(!0))},hue=I=>{I.type==="note"?nue(I.id):I.type==="activity"?uue(I.id):I.type==="todo"&&E$(I.id)},fue=async I=>{var _e;if(!window.confirm("Are you sure you want to delete this work history item?"))return;const Y=[...((_e=n.acf)==null?void 0:_e.work_history)||[]];Y.splice(I,1);const J=uo(n.acf,{work_history:Y});await h.mutateAsync({id:t,data:{acf:J}})},pue=async I=>{var _e,Ae,ot;const Y=(ot=(Ae=(_e=n==null?void 0:n._embedded)==null?void 0:_e["wp:term"])==null?void 0:Ae.flat())==null?void 0:ot.find(gt=>(gt==null?void 0:gt.taxonomy)==="person_label"&&(gt==null?void 0:gt.name)===I);if(!Y)return;const J=Ng.filter(gt=>gt!==Y.id);await h.mutateAsync({id:t,data:{person_label:J}})},mue=async()=>{if(!j)return;const I=_g.find(J=>J.id.toString()===j);if(!I)return;const Y=[...Ng,I.id];await h.mutateAsync({id:t,data:{person_label:Y}}),T(""),k(!1)},gue=async I=>{var J;const Y=(J=I.target.files)==null?void 0:J[0];if(Y){if(!Y.type.startsWith("image/")){alert("Please select an image file");return}if(Y.size>5*1024*1024){alert("Image size must be less than 5MB");return}O(!0);try{await Se.uploadPersonPhoto(t,Y),r.invalidateQueries({queryKey:["person",t]}),r.invalidateQueries({queryKey:["people"]})}catch{alert("Failed to upload photo. Please try again.")}finally{O(!1),D.current&&(D.current.value="")}}},yue=()=>{if(n)try{qCe(n,{companyMap:C1,personDates:a||[]})}catch{alert("Failed to export vCard. Please try again.")}},_$=((D$=(A$=n==null?void 0:n.acf)==null?void 0:A$.work_history)==null?void 0:D$.map(I=>I.company).filter(Boolean))||[],vue=Dy({queries:_$.map(I=>({queryKey:["company",I],queryFn:async()=>(await et.getCompany(I,{_embed:!0})).data,enabled:!!I}))}),bue=C.useMemo(()=>{var I;return(I=n==null?void 0:n.acf)!=null&&I.work_history?n.acf.work_history.filter(Y=>!Y.end_date&&Y.company).map(Y=>Y.company):[]},[($$=n==null?void 0:n.acf)==null?void 0:$$.work_history]),N$=Dy({queries:bue.map(I=>({queryKey:["company-people",I],queryFn:async()=>{const Y=await Se.getCompanyPeople(I);return{companyId:I,...Y.data}},enabled:!!I}))}),Cg=C.useMemo(()=>{const I=new Map;return N$.forEach(Y=>{var J;(J=Y.data)!=null&&J.current&&Y.data.current.forEach(_e=>{if(_e.id!==parseInt(t))if(I.has(_e.id)){const Ae=I.get(_e.id);Ae.companies.includes(Y.data.companyId)||Ae.companies.push(Y.data.companyId)}else I.set(_e.id,{..._e,companies:[Y.data.companyId]})})}),Array.from(I.values()).sort((Y,J)=>(Y.name||"").localeCompare(J.name||""))},[N$,t]),ql=((q$=(F$=n==null?void 0:n.acf)==null?void 0:F$.relationships)==null?void 0:q$.map(I=>I.related_person).filter(Boolean))||[],kg=Dy({queries:ql.map(I=>({queryKey:["person-dates",I],queryFn:async()=>(await Se.getPersonDates(I)).data,enabled:!!I}))}),N1=C.useMemo(()=>{const I={};return kg.forEach((Y,J)=>{if(Y.data&&ql[J]){const _e=ql[J],Ae=Y.data.find(ot=>{const gt=Array.isArray(ot.date_type)?ot.date_type[0]:ot.date_type;return(gt==null?void 0:gt.toLowerCase())==="birthday"});if(Ae!=null&&Ae.date_value){const ot=new Date(Ae.date_value);I[_e]=gx(new Date,ot)}else I[_e]=-1}}),I},[kg,ql]),xue=C.useMemo(()=>{const I={};return kg.forEach((Y,J)=>{if(Y.data&&ql[J]){const _e=ql[J],Ae=Y.data.some(ot=>{const gt=Array.isArray(ot.date_type)?ot.date_type[0]:ot.date_type;return(gt==null?void 0:gt.toLowerCase())==="died"});I[_e]=Ae}}),I},[kg,ql]),jg=C.useMemo(()=>{var I;return(I=n==null?void 0:n.acf)!=null&&I.relationships?[...n.acf.relationships].sort((Y,J)=>{const _e=N1[Y.related_person]??-1,Ae=N1[J.related_person]??-1;return _e===-1&&Ae===-1?0:_e===-1?1:Ae===-1?-1:Ae-_e}):[]},[(L$=n==null?void 0:n.acf)==null?void 0:L$.relationships,N1]),C1={};vue.forEach((I,Y)=>{var J,_e,Ae,ot,gt,ao,Kn,lo,df;if(I.data){const Og=_$[Y];C1[Og]={name:dr(I.data),logo:((Ae=(_e=(J=I.data._embedded)==null?void 0:J["wp:featuredmedia"])==null?void 0:_e[0])==null?void 0:Ae.source_url)||((df=(lo=(Kn=(ao=(gt=(ot=I.data._embedded)==null?void 0:ot["wp:featuredmedia"])==null?void 0:gt[0])==null?void 0:ao.media_details)==null?void 0:Kn.sizes)==null?void 0:lo.thumbnail)==null?void 0:df.source_url)||null}}});const Tg=C.useMemo(()=>{var I;return(I=n==null?void 0:n.acf)!=null&&I.work_history?[...n.acf.work_history].map((Y,J)=>({...Y,originalIndex:J})).sort((Y,J)=>{if(Y.is_current&&!J.is_current)return-1;if(!Y.is_current&&J.is_current)return 1;const _e=Y.start_date?new Date(Y.start_date):new Date(0);return(J.start_date?new Date(J.start_date):new Date(0))-_e}):[]},[(B$=n==null?void 0:n.acf)==null?void 0:B$.work_history]),C$=C.useMemo(()=>o?o.filter(Y=>Y.type==="todo").sort((Y,J)=>{if(Y.is_completed&&!J.is_completed)return 1;if(!Y.is_completed&&J.is_completed)return-1;if(!Y.is_completed&&!J.is_completed){if(Y.due_date&&J.due_date)return new Date(Y.due_date)-new Date(J.due_date);if(Y.due_date&&!J.due_date)return-1;if(!Y.due_date&&J.due_date)return 1}return new Date(J.created)-new Date(Y.created)}):[],[o]);if(C.useEffect(()=>{(n==null?void 0:n.status)==="trash"&&e("/people",{replace:!0})},[n,e]),i)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(s||!n)return c.jsxs("div",{className:"card p-6 text-center",children:[c.jsx("p",{className:"text-red-600",children:"Failed to load person."}),c.jsx(qe,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]});if(n.status==="trash")return null;const pt=n.acf||{},k1=["facebook","linkedin","instagram","twitter","bluesky","threads","website"],wue=((z$=pt.contact_info)==null?void 0:z$.filter(I=>k1.includes(I.contact_type)))||[],k$=(W$=pt.contact_info)==null?void 0:W$.find(I=>I.contact_type==="mobile"),j$={linkedin:1,twitter:2,bluesky:3,threads:4,instagram:5,facebook:6,whatsapp:7,website:8},T$=(()=>{const I=[...wue];return k$&&I.push({contact_type:"whatsapp",contact_value:`https://wa.me/${k$.contact_value.replace(/[^0-9+]/g,"")}`}),I.sort((Y,J)=>{const _e=j$[Y.contact_type]||99,Ae=j$[J.contact_type]||99;return _e-Ae})})(),Sue=I=>{switch(I){case"facebook":return z_e;case"linkedin":return LCe;case"instagram":return V_e;case"twitter":return J_e;case"bluesky":return L_e;case"threads":return G_e;case"whatsapp":return Q_e;case"website":return np;default:return np}},Eue=I=>{switch(I){case"facebook":return"text-[#1877F2]";case"linkedin":return"text-[#0077B7]";case"instagram":return"text-[#E4405F]";case"twitter":return"text-[#1DA1F2]";case"bluesky":return"text-[#00A8E8]";case"threads":return"text-[#000000]";case"whatsapp":return"text-[#25D366]";case"website":return"text-gray-600";default:return"text-gray-600"}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs(qe,{to:"/people",className:"flex items-center text-gray-600 hover:text-gray-900",children:[c.jsx(Ph,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Back to people"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:yue,className:"btn-secondary",children:[c.jsx(GI,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Export vCard"})]}),c.jsxs("button",{onClick:()=>yr(!0),className:"btn-secondary",title:"Share",children:[c.jsx(fA,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Share"})]}),c.jsxs("button",{onClick:()=>er(!0),className:"btn-secondary",children:[c.jsx(lne,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Edit"})]}),c.jsxs("button",{onClick:E1,className:"btn-danger",children:[c.jsx(Sn,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Delete"})]})]})]}),c.jsx("div",{className:"card p-6",children:c.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[c.jsxs("div",{className:"relative group",children:[n.thumbnail?c.jsx("img",{src:n.thumbnail,alt:n.name,className:"w-28 h-28 rounded-full object-cover"}):c.jsx("div",{className:"w-28 h-28 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-3xl font-medium text-gray-500",children:((V$=n.first_name)==null?void 0:V$[0])||"?"})}),c.jsx("div",{className:"absolute inset-0 rounded-full bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var I;return(I=D.current)==null?void 0:I.click()},children:P?c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):c.jsx(Qre,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),c.jsx("input",{ref:D,type:"file",accept:"image/*",onChange:gue,className:"hidden",disabled:P})]}),c.jsxs("div",{className:"flex-1 space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("h1",{className:"text-2xl font-bold",children:[n.name,so&&c.jsx("span",{className:"ml-1 text-gray-500",children:""})]}),n.is_favorite&&c.jsx(zc,{className:"w-5 h-5 text-yellow-400 fill-current"})]}),pt.nickname&&c.jsxs("p",{className:"text-gray-500",children:['"',pt.nickname,'"']}),so&&mn&&c.jsxs("p",{className:"text-gray-500 text-sm inline-flex items-center flex-wrap",children:[go(pt.gender)&&c.jsx("span",{children:go(pt.gender)}),go(pt.gender)&&pt.pronouns&&c.jsx("span",{children:""}),pt.pronouns&&c.jsx("span",{children:pt.pronouns}),(go(pt.gender)||pt.pronouns)&&c.jsx("span",{children:""}),c.jsxs("span",{children:["Died ",Rn(mn,S1?"MMMM d":"MMMM d, yyyy"),oo!==null&&` at age ${oo}`]})]}),!so&&(go(pt.gender)||pt.pronouns||oo!==null)&&c.jsxs("p",{className:"text-gray-500 text-sm inline-flex items-center flex-wrap",children:[go(pt.gender)&&c.jsx("span",{children:go(pt.gender)}),go(pt.gender)&&pt.pronouns&&c.jsx("span",{children:""}),pt.pronouns&&c.jsx("span",{children:pt.pronouns}),(go(pt.gender)||pt.pronouns)&&oo!==null&&c.jsx("span",{children:""}),oo!==null&&c.jsxs("span",{children:[oo," years old"]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[n.labels&&n.labels.length>0&&n.labels.map((I,Y)=>c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 group/label",children:[I,c.jsx("button",{onClick:()=>pue(I),className:"opacity-0 group-hover/label:opacity-100 transition-opacity hover:bg-gray-200 rounded-full p-0.5",title:"Remove label",children:c.jsx(ht,{className:"w-3 h-3"})})]},Y)),_?c.jsxs("div",{className:"inline-flex items-center gap-2",children:[c.jsxs("select",{value:j,onChange:I=>T(I.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1",autoFocus:!0,disabled:cf.length===0,children:[c.jsx("option",{value:"",children:"Select a label..."}),cf.map(I=>c.jsx("option",{value:I.id,children:I.name},I.id))]}),c.jsx("button",{onClick:mue,disabled:!j,className:"text-xs px-2 py-1 bg-primary-600 text-white rounded hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"}),c.jsx("button",{onClick:()=>{k(!1),T("")},className:"text-xs px-2 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Cancel"})]}):cf.length>0&&c.jsxs("button",{onClick:()=>k(!0),className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",children:[c.jsx(lr,{className:"w-3 h-3 mr-1"}),"Add label"]})]}),T$.length>0&&c.jsx("div",{className:"flex items-center gap-3 mt-4",children:T$.map((I,Y)=>{const J=Sue(I.contact_type),_e=Eue(I.contact_type);let Ae=I.contact_value;return Ae.match(/^https?:\/\//i)||(Ae=`https://${Ae}`),c.jsx("a",{href:Ae,target:"_blank",rel:"noopener noreferrer",className:`flex-shrink-0 hover:opacity-80 transition-opacity ${_e}`,title:`${I.contact_type.charAt(0).toUpperCase()+I.contact_type.slice(1)}: ${I.contact_value}`,children:c.jsx(J,{className:"w-5 h-5"})},Y)})})]})]})]})}),c.jsx("div",{className:"border-b border-gray-200",children:c.jsxs("nav",{className:"flex gap-8",children:[c.jsx("button",{onClick:()=>N("profile"),className:`pb-3 text-sm font-medium border-b-2 transition-colors ${E==="profile"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Profile"}),c.jsx("button",{onClick:()=>N("timeline"),className:`pb-3 text-sm font-medium border-b-2 transition-colors ${E==="timeline"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Timeline"}),c.jsx("button",{onClick:()=>N("work"),className:`pb-3 text-sm font-medium border-b-2 transition-colors ${E==="work"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Work"})]})}),c.jsxs("div",{className:"space-y-6",children:[E==="profile"&&c.jsxs("div",{className:"columns-1 md:columns-2 gap-6",children:[!so&&c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"font-semibold",children:"Contact information"}),c.jsxs("button",{onClick:()=>le(!0),className:"btn-secondary text-sm",children:[c.jsx(ba,{className:"w-4 h-4 md:mr-1"}),c.jsx("span",{className:"hidden md:inline",children:"Edit"})]})]}),((U$=pt.contact_info)==null?void 0:U$.filter(I=>!k1.includes(I.contact_type)).length)>0?c.jsx("div",{className:"space-y-2",children:(()=>{const I={email:1,phone:2,mobile:2,slack:3,calendar:4,other:5};return pt.contact_info.filter(J=>!k1.includes(J.contact_type)).map((J,_e)=>({...J,originalIndex:_e})).sort((J,_e)=>{const Ae=I[J.contact_type]||99,ot=I[_e.contact_type]||99;return Ae!==ot?Ae-ot:J.originalIndex-_e.originalIndex}).map(J=>{const _e=J.contact_type==="email"?hb:J.contact_type==="phone"||J.contact_type==="mobile"?dA:J.contact_type==="slack"?H_e:J.contact_type==="calendar"?Ys:np,Ae=J.contact_type==="email",ot=J.contact_type==="phone"||J.contact_type==="mobile",gt=J.contact_type==="slack",ao=J.contact_type==="calendar";let Kn=null,lo=null;return Ae?Kn=`mailto:${J.contact_value}`:ot?Kn=`tel:${_1(J.contact_value)}`:(gt||ao)&&(Kn=J.contact_value,lo="_blank"),c.jsx("div",{children:c.jsxs("div",{className:"flex items-center rounded-md -mx-2 px-2 py-1.5",children:[c.jsx(_e,{className:"w-4 h-4 text-gray-400 mr-3 flex-shrink-0"}),c.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[c.jsxs("span",{className:"text-sm text-gray-500",children:[J.contact_label||J.contact_type,": "]}),Kn?c.jsx("a",{href:Kn,target:lo||void 0,rel:lo==="_blank"?"noopener noreferrer":void 0,className:"text-primary-600 hover:text-primary-700 hover:underline",children:J.contact_value}):c.jsx("span",{children:J.contact_value})]})]})},J.originalIndex)})})()}):c.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No contact information yet. ",c.jsx("button",{onClick:()=>le(!0),className:"text-primary-600 hover:underline",children:"Add some"})]})]}),c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"font-semibold",children:"Important dates"}),c.jsx("button",{onClick:()=>{z(null),se(!0)},className:"btn-secondary text-sm",title:"Add important date",children:c.jsx(lr,{className:"w-4 h-4"})})]}),uf.length>0?c.jsx("div",{className:"space-y-3",children:uf.map(I=>{const Y=Array.isArray(I.date_type)?I.date_type[0]:I.date_type,J=(Y==null?void 0:Y.toLowerCase())||"",_e=J.includes("died"),Ae=J.includes("wedding")||J.includes("marriage")?gge:J.includes("birthday")?mge:Ys,ot=I.year_unknown?"MMMM d":"MMMM d, yyyy";return c.jsxs("div",{className:"flex items-start group",children:[c.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center mr-3",children:_e?c.jsx("span",{className:"text-gray-500 text-lg font-semibold",children:""}):c.jsx(Ae,{className:"w-4 h-4 text-gray-500"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium",children:I.title}),c.jsx("p",{className:"text-xs text-gray-500",children:I.date_value&&Rn(new Date(I.date_value),ot)}),Y&&c.jsx("p",{className:"text-xs text-gray-400 capitalize",children:Y})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>{z(I),se(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit date",children:c.jsx(ba,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),c.jsx("button",{onClick:()=>rue(I.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete date",children:c.jsx(Sn,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},I.id)})}):c.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No important dates yet. ",c.jsx("button",{onClick:()=>{z(null),se(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]}),!so&&c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"font-semibold",children:"Addresses"}),c.jsx("button",{onClick:()=>{Ir(null),js(null),Ie(!0)},className:"btn-secondary text-sm",title:"Add address",children:c.jsx(lr,{className:"w-4 h-4"})})]}),((H$=pt.addresses)==null?void 0:H$.length)>0?c.jsx("div",{className:"space-y-3",children:pt.addresses.map((I,Y)=>{const J=[I.street,[I.city,I.state,I.postal_code].filter(Boolean).join(", "),I.country].filter(Boolean),_e=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(J.join(", "))}`;return c.jsxs("div",{className:"flex items-start group",children:[c.jsx(Ege,{className:"w-4 h-4 text-gray-400 mt-1 mr-3 flex-shrink-0"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[I.address_label&&c.jsx("p",{className:"text-xs text-gray-500 mb-1",children:I.address_label}),c.jsx("a",{href:_e,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-700 hover:underline text-sm",children:J.map((Ae,ot)=>c.jsx("span",{className:"block",children:Ae},ot))})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[c.jsx("button",{onClick:()=>{Ir(I),js(Y),Ie(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit address",children:c.jsx(ba,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),c.jsx("button",{onClick:()=>eue(Y),className:"p-1 hover:bg-red-50 rounded",title:"Delete address",children:c.jsx(Sn,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},Y)})}):c.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No addresses yet. ",c.jsx("button",{onClick:()=>{Ir(null),js(null),Ie(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]}),(pt.how_we_met||pt.met_date)&&c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsx("h2",{className:"font-semibold mb-3",children:"How we met"}),pt.met_date&&c.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[c.jsx(Ys,{className:"w-4 h-4 inline mr-1"}),Rn(new Date(pt.met_date),"MMMM d, yyyy")]}),pt.how_we_met&&c.jsx("p",{className:"text-sm",children:pt.how_we_met})]}),c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h2",{className:"font-semibold",children:"Relationships"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(qe,{to:`/people/${t}/family-tree`,className:"btn-secondary text-sm",children:"View family tree"}),c.jsx("button",{onClick:()=>{pe(null),We(null),be(!0)},className:"btn-secondary text-sm",title:"Add relationship",children:c.jsx(lr,{className:"w-4 h-4"})})]})]}),(jg==null?void 0:jg.length)>0?c.jsx("div",{className:"space-y-2",children:jg.map((I,Y)=>{var _e,Ae,ot;const J=((Ae=(_e=n==null?void 0:n.acf)==null?void 0:_e.relationships)==null?void 0:Ae.findIndex(gt=>gt.related_person===I.related_person&&gt.relationship_type===I.relationship_type))??Y;return c.jsxs("div",{className:"flex items-center p-2 rounded hover:bg-gray-50 group",children:[c.jsxs(qe,{to:`/people/${I.related_person}`,className:"flex items-center flex-1 min-w-0",children:[I.person_thumbnail?c.jsx("img",{src:I.person_thumbnail,alt:Dn(I.person_name)||"",className:"w-8 h-8 rounded-full object-cover mr-2"}):c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full mr-2 flex items-center justify-center",children:c.jsx("span",{className:"text-xs font-medium text-gray-500",children:((ot=Dn(I.person_name))==null?void 0:ot[0])||"?"})}),c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm font-medium",children:[Dn(I.person_name)||`Person #${I.related_person}`,xue[I.related_person]&&c.jsx("span",{className:"text-gray-400 ml-1",title:"Deceased",children:""})]}),c.jsx("p",{className:"text-xs text-gray-500",children:Dn(I.relationship_name||I.relationship_label)})]})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[c.jsx("button",{onClick:()=>{var ao,Kn;const gt=(Kn=(ao=n==null?void 0:n.acf)==null?void 0:ao.relationships)==null?void 0:Kn[J];pe(gt),We(J),be(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit relationship",children:c.jsx(ba,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),c.jsx("button",{onClick:()=>tue(J),className:"p-1 hover:bg-red-50 rounded",title:"Delete relationship",children:c.jsx(Sn,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},Y)})}):c.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No relationships yet. ",c.jsx("button",{onClick:()=>{pe(null),We(null),be(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]})]}),E==="timeline"&&c.jsxs("div",{className:"columns-1 md:columns-2 gap-6",children:[c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h2",{className:"font-semibold",children:"Todos"}),c.jsx("button",{onClick:()=>{Le(null),X(!0)},className:"btn-secondary text-sm",title:"Add todo",children:c.jsx(lr,{className:"w-4 h-4"})})]}),C$.length>0?c.jsx("div",{className:"space-y-2",children:C$.map(I=>{const Y=Dm(I);return c.jsxs("div",{className:"flex items-start p-2 rounded hover:bg-gray-50 group",children:[c.jsx("button",{onClick:()=>S$(I),className:"mt-0.5 mr-2 flex-shrink-0",title:I.is_completed?"Mark as incomplete":"Mark as complete",children:I.is_completed?c.jsx(HI,{className:"w-5 h-5 text-primary-600"}):c.jsx(yl,{className:`w-5 h-5 ${Y?"text-red-600":"text-gray-400"}`})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:`text-sm ${I.is_completed?"line-through text-gray-400":Y?"text-red-600":""}`,children:I.content}),I.due_date&&c.jsxs("p",{className:`text-xs mt-0.5 ${Y&&!I.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",Rn(new Date(I.due_date),"MMM d, yyyy"),Y&&!I.is_completed&&" (overdue)"]})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[c.jsx("button",{onClick:()=>{Le(I),X(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit todo",children:c.jsx(ba,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),c.jsx("button",{onClick:()=>E$(I.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete todo",children:c.jsx(Sn,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},I.id)})}):c.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No todos yet."})]}),c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"font-semibold",children:"Timeline"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>$(!0),className:"btn-secondary text-sm",title:"Add note",children:[c.jsx(mA,{className:"w-4 h-4 md:mr-1"}),c.jsx("span",{className:"hidden md:inline",children:"Note"})]}),c.jsxs("button",{onClick:()=>M(!0),className:"btn-secondary text-sm",title:"Add activity",children:[c.jsx(fb,{className:"w-4 h-4 md:mr-1"}),c.jsx("span",{className:"hidden md:inline",children:"Activity"})]})]})]}),c.jsx(eNe,{timeline:o||[],onEdit:due,onDelete:hue,onToggleTodo:S$,personId:t,allPeople:w||[]})]})]}),E==="work"&&c.jsxs("div",{className:"columns-1 md:columns-2 gap-6",children:[c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"font-semibold",children:"Work history"}),c.jsx("button",{onClick:()=>{Ts(null),Os(null),Ct(!0)},className:"btn-secondary text-sm",title:"Add work history",children:c.jsx(lr,{className:"w-4 h-4"})})]}),(Tg==null?void 0:Tg.length)>0?c.jsx("div",{className:"space-y-4",children:Tg.map((I,Y)=>{const J=I.company?C1[I.company]:null,_e=I.originalIndex;return c.jsxs("div",{className:"flex items-start group",children:[J!=null&&J.logo?c.jsx("img",{src:J.logo,alt:J.name,className:"w-20 h-20 rounded-lg object-contain bg-white mr-3 flex-shrink-0"}):c.jsx("div",{className:"w-20 h-20 bg-white rounded-lg flex items-center justify-center mr-3 flex-shrink-0 border border-gray-200",children:c.jsx(Dr,{className:"w-10 h-10 text-gray-500"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"font-medium",children:I.job_title}),I.company&&J&&c.jsx(qe,{to:`/companies/${I.company}`,className:"text-sm text-primary-600 hover:underline",children:J.name}),c.jsxs("p",{className:"text-sm text-gray-500",children:[I.start_date&&Rn(new Date(I.start_date),"MMM yyyy")," - ",I.is_current?"Present":I.end_date?Rn(new Date(I.end_date),"MMM yyyy"):""]}),I.description&&c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:I.description})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[c.jsx("button",{onClick:()=>{var ot,gt;const Ae=(gt=(ot=n==null?void 0:n.acf)==null?void 0:ot.work_history)==null?void 0:gt[_e];Ts(Ae),Os(_e),Ct(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit work history",children:c.jsx(ba,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),c.jsx("button",{onClick:()=>fue(_e),className:"p-1 hover:bg-red-50 rounded",title:"Delete work history",children:c.jsx(Sn,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},_e)})}):c.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No work history yet. ",c.jsx("button",{onClick:()=>{Ts(null),Os(null),Ct(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]}),S.length>0&&c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[c.jsx(kv,{className:"w-5 h-5 mr-2"}),"Investments"]}),c.jsx("div",{className:"space-y-3",children:S.map(I=>c.jsxs(qe,{to:`/companies/${I.id}`,className:"flex items-center p-2 rounded-lg hover:bg-gray-50 transition-colors group",children:[I.thumbnail?c.jsx("img",{src:I.thumbnail,alt:I.name,className:"w-12 h-12 rounded-lg object-contain bg-white border border-gray-200"}):c.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:c.jsx(Dr,{className:"w-6 h-6 text-gray-400"})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("p",{className:"text-sm font-medium group-hover:text-primary-600",children:I.name}),I.industry&&c.jsx("p",{className:"text-xs text-gray-500",children:I.industry})]})]},I.id))})]}),Cg.length>0&&c.jsxs("div",{className:"card p-6 break-inside-avoid mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h2",{className:"font-semibold",children:"Colleagues"}),c.jsxs("span",{className:"text-xs text-gray-500",children:[Cg.length," ",Cg.length===1?"colleague":"colleagues"]})]}),c.jsx("div",{className:"space-y-2",children:Cg.map(I=>{var Y;return c.jsxs(qe,{to:`/people/${I.id}`,className:"flex items-center p-2 rounded hover:bg-gray-50",children:[I.thumbnail?c.jsx("img",{src:I.thumbnail,alt:I.name||"",className:"w-8 h-8 rounded-full object-cover mr-2"}):c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full mr-2 flex items-center justify-center",children:c.jsx("span",{className:"text-xs font-medium text-gray-500",children:((Y=I.name)==null?void 0:Y[0])||"?"})}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"text-sm font-medium truncate",children:I.name}),I.job_title&&c.jsx("p",{className:"text-xs text-gray-500 truncate",children:I.job_title})]})]},I.id)})})]})]})]}),c.jsx(_Ce,{isOpen:F,onClose:()=>$(!1),onSubmit:iue,isLoading:f.isPending,isContactShared:((K$=n==null?void 0:n.acf)==null?void 0:K$._visibility)==="workspace"||((G$=n==null?void 0:n.acf)==null?void 0:G$._visibility)==="shared",workspaceIds:((Y$=n==null?void 0:n.acf)==null?void 0:Y$._visibility)==="workspace"?((Q$=n==null?void 0:n.acf)==null?void 0:Q$._assigned_workspaces)||[]:[]}),c.jsx(dD,{isOpen:q,onClose:()=>{M(!1),U(null),io(null),Mu(null)},onSubmit:sue,isLoading:Ve?m.isPending:p.isPending,personId:t,initialData:b1,activity:Ve}),c.jsx(_A,{isOpen:Iu,onClose:()=>{Ru(!1),io(null)},todo:Ot,onComplete:lue,onCompleteAsActivity:cue}),c.jsx(Goe,{isOpen:B,onClose:()=>{X(!1),Le(null)},onSubmit:ge?aue:oue,isLoading:ge?y.isPending:g.isPending,todo:ge}),c.jsx(CCe,{isOpen:Q,onClose:()=>le(!1),onSubmit:Gce,isLoading:en,contactInfo:pt.contact_info||[]}),c.jsx(EA,{isOpen:G,onClose:()=>{se(!1),z(null)},onSubmit:Yce,isLoading:st,dateItem:K,personId:t,allPeople:w||[],isPeopleLoading:x}),c.jsx(jCe,{isOpen:ke,onClose:()=>{be(!1),pe(null),We(null)},onSubmit:Qce,isLoading:mi,relationship:Z,personId:t,allPeople:w||[],isPeopleLoading:x}),c.jsx(TCe,{isOpen:$e,onClose:()=>{Ie(!1),Ir(null),js(null)},onSubmit:Xce,isLoading:A,address:rn}),c.jsx(PCe,{isOpen:Nt,onClose:()=>{Ct(!1),Ts(null),Os(null)},onSubmit:Jce,isLoading:V,workHistoryItem:Pu}),c.jsx(wA,{isOpen:kt,onClose:()=>er(!1),onSubmit:Zce,isLoading:re,person:n}),c.jsx(Yoe,{isOpen:Ye,onClose:()=>yr(!1),postType:"people",postId:n.id,postTitle:n.name||((X$=n.title)==null?void 0:X$.rendered)})]})}function zCe({company:t}){var e,r,n,i,s;return c.jsx(qe,{to:`/companies/${t.id}`,className:"card p-4 hover:shadow-md transition-shadow",children:c.jsxs("div",{className:"flex items-start",children:[(n=(r=(e=t._embedded)==null?void 0:e["wp:featuredmedia"])==null?void 0:r[0])!=null&&n.source_url?c.jsx("img",{src:t._embedded["wp:featuredmedia"][0].source_url,alt:dr(t),className:"w-12 h-12 rounded-lg object-contain bg-white"}):c.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:c.jsx(Dr,{className:"w-6 h-6 text-gray-400"})}),c.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:dr(t)}),((i=t.acf)==null?void 0:i.industry)&&c.jsx("p",{className:"text-sm text-gray-500",children:t.acf.industry}),((s=t.acf)==null?void 0:s.website)&&c.jsx("p",{className:"text-xs text-primary-600 truncate",children:t.acf.website})]})]})})}function WCe(){var k,j;const[t,e]=C.useState(""),[r,n]=C.useState(!1),[i,s]=C.useState("all"),[o,a]=C.useState(""),[l,u]=C.useState(!1),[d,h]=C.useState(!1),f=C.useRef(null),p=C.useRef(null),m=Un(),{data:g=[]}=bb(),y=(k=window.prmConfig)==null?void 0:k.userId,{data:v,isLoading:b,error:w}=at({queryKey:["companies",t],queryFn:async()=>(await et.getCompanies({search:t,per_page:100,_embed:!0})).data}),x=mne({onSuccess:T=>{u(!1),m(`/companies/${T.id}`)}}),S=async T=>{h(!0);try{await x.mutateAsync(T)}finally{h(!1)}};C.useEffect(()=>{const T=P=>{p.current&&!p.current.contains(P.target)&&f.current&&!f.current.contains(P.target)&&n(!1)};return document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[]);const E=i!=="all"||o,N=()=>{s("all"),a("")},_=C.useMemo(()=>{if(!v)return[];let T=[...v];return i==="mine"?T=T.filter(P=>P.author===y):i==="shared"&&(T=T.filter(P=>P.author!==y)),o&&(T=T.filter(P=>{var D;return(((D=P.acf)==null?void 0:D._assigned_workspaces)||[]).includes(parseInt(o))})),T.sort((P,O)=>{var $,q;const D=((($=P.title)==null?void 0:$.rendered)||P.title||"").toLowerCase(),F=(((q=O.title)==null?void 0:q.rendered)||O.title||"").toLowerCase();return D.localeCompare(F)})},[v,i,o,y]);return c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsxs("div",{className:"relative flex-1 min-w-48 max-w-md",children:[c.jsx(gl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),c.jsx("input",{type:"search",placeholder:"Search organizations...",value:t,onChange:T=>e(T.target.value),className:"input pl-9"})]}),c.jsxs("div",{className:"relative",ref:f,children:[c.jsxs("button",{onClick:()=>n(!r),className:`btn-secondary ${E?"bg-primary-50 text-primary-700 border-primary-200":""}`,children:[c.jsx(Wp,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Filter"}),E&&c.jsx("span",{className:"ml-2 px-1.5 py-0.5 bg-primary-600 text-white text-xs rounded-full",children:(i!=="all"?1:0)+(o?1:0)})]}),r&&c.jsx("div",{ref:p,className:"absolute top-full left-0 mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Ownership"}),c.jsx("div",{className:"space-y-1",children:[{value:"all",label:"All Organizations"},{value:"mine",label:"My Organizations"},{value:"shared",label:"Shared with Me"}].map(T=>c.jsxs("label",{className:"flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded",children:[c.jsx("input",{type:"radio",name:"ownership",value:T.value,checked:i===T.value,onChange:P=>s(P.target.value),className:"sr-only"}),c.jsx("div",{className:`flex items-center justify-center w-4 h-4 border-2 rounded-full mr-3 ${i===T.value?"border-primary-600":"border-gray-300"}`,children:i===T.value&&c.jsx("div",{className:"w-2 h-2 bg-primary-600 rounded-full"})}),c.jsx("span",{className:"text-sm text-gray-700",children:T.label})]},T.value))})]}),g.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Workspace"}),c.jsxs("select",{value:o,onChange:T=>a(T.target.value),className:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[c.jsx("option",{value:"",children:"All Workspaces"}),g.map(T=>c.jsx("option",{value:T.id,children:T.title},T.id))]})]}),E&&c.jsx("button",{onClick:N,className:"w-full text-sm text-primary-600 hover:text-primary-700 font-medium pt-2 border-t border-gray-200",children:"Clear all filters"})]})})]}),E&&c.jsxs("div",{className:"flex flex-wrap gap-2",children:[i!=="all"&&c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-800 rounded-full text-xs",children:[i==="mine"?"My Organizations":"Shared with Me",c.jsx("button",{onClick:()=>s("all"),className:"hover:text-primary-600",children:c.jsx(ht,{className:"w-3 h-3"})})]}),o&&c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:[((j=g.find(T=>T.id===parseInt(o)))==null?void 0:j.title)||"Workspace",c.jsx("button",{onClick:()=>a(""),className:"hover:text-blue-600",children:c.jsx(ht,{className:"w-3 h-3"})})]})]}),c.jsxs("button",{onClick:()=>u(!0),className:"btn-primary",children:[c.jsx(lr,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Add organization"})]})]})}),b&&c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),w&&c.jsx("div",{className:"card p-6 text-center",children:c.jsx("p",{className:"text-red-600",children:"Failed to load organizations."})}),!b&&!w&&(v==null?void 0:v.length)===0&&c.jsxs("div",{className:"card p-12 text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(Dr,{className:"w-6 h-6 text-gray-400"})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No organizations found"}),c.jsx("p",{className:"text-gray-500 mb-4",children:t?"Try a different search.":"Add your first organization."}),!t&&c.jsxs("button",{onClick:()=>u(!0),className:"btn-primary",children:[c.jsx(lr,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Add organization"})]})]}),!b&&!w&&(v==null?void 0:v.length)>0&&(_==null?void 0:_.length)===0&&c.jsxs("div",{className:"card p-12 text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(Wp,{className:"w-6 h-6 text-gray-400"})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No organizations match your filters"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Try adjusting your filters to see more results."}),c.jsx("button",{onClick:N,className:"btn-secondary",children:"Clear filters"})]}),!b&&!w&&(_==null?void 0:_.length)>0&&c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:_.map(T=>c.jsx(zCe,{company:T},T.id))}),c.jsx(SA,{isOpen:l,onClose:()=>u(!1),onSubmit:S,isLoading:d})]})}function VCe(){var T,P,O,D,F,$,q;const{id:t}=jh(),e=Un(),r=tt(),n=C.useRef(null),[i,s]=C.useState(!1),[o,a]=C.useState(!1),[l,u]=C.useState(!1),[d,h]=C.useState(!1),{data:f,isLoading:p,error:m}=at({queryKey:["company",t],queryFn:async()=>(await et.getCompany(t,{_embed:!0})).data}),{data:g}=at({queryKey:["company-people",t],queryFn:async()=>(await Se.getCompanyPeople(t)).data}),{data:y}=at({queryKey:["company",f==null?void 0:f.parent],queryFn:async()=>(await et.getCompany(f.parent,{_embed:!0})).data,enabled:!!(f!=null&&f.parent)}),{data:v=[]}=at({queryKey:["company-children",t],queryFn:async()=>(await et.getCompanies({parent:t,per_page:100,_embed:!0})).data}),b=((T=f==null?void 0:f.acf)==null?void 0:T.investors)||[],{data:w=[]}=at({queryKey:["company-investors",t,b],queryFn:async()=>{if(!b.length)return[];const[M,B]=await Promise.all([et.getPeople({per_page:100,include:b.join(","),_embed:!0}),et.getCompanies({per_page:100,include:b.join(","),_embed:!0})]),X=(M.data||[]).map(G=>{var se,ke,be,$e;return{id:G.id,type:"person",name:Dn(((se=G.title)==null?void 0:se.rendered)||""),thumbnail:($e=(be=(ke=G._embedded)==null?void 0:ke["wp:featuredmedia"])==null?void 0:be[0])==null?void 0:$e.source_url}}),Q=(B.data||[]).map(G=>{var se,ke,be;return{id:G.id,type:"company",name:dr(G),thumbnail:(be=(ke=(se=G._embedded)==null?void 0:se["wp:featuredmedia"])==null?void 0:ke[0])==null?void 0:be.source_url}}),le=[...X,...Q];return b.map(G=>le.find(se=>se.id===G)).filter(Boolean)},enabled:b.length>0}),{data:x=[]}=at({queryKey:["investments",t],queryFn:async()=>(await Se.getInvestments(t)).data,enabled:!!t}),S=He({mutationFn:()=>et.deleteCompany(t,{force:!0}),onSuccess:()=>{r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["dashboard"]}),e("/companies")}}),E=He({mutationFn:M=>et.updateCompany(t,M),onSuccess:()=>{r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["company-investors",t]}),r.invalidateQueries({queryKey:["dashboard"]})}});Ih(dr(f)||"Organization"),C.useEffect(()=>{(f==null?void 0:f.status)==="trash"&&e("/companies",{replace:!0})},[f,e]);const N=async()=>{if(window.confirm("Are you sure you want to delete this organization?"))try{await S.mutateAsync()}catch{alert("Failed to delete organization. Please try again.")}},_=async M=>{var B,X;h(!0);try{const Q={title:M.title,parent:M.parentId||0,acf:{website:M.website,industry:M.industry,investors:M.investors||[],_visibility:((B=f.acf)==null?void 0:B._visibility)||"private",_assigned_workspaces:((X=f.acf)==null?void 0:X._assigned_workspaces)||[]}};await E.mutateAsync(Q),a(!1)}catch{alert("Failed to save organization. Please try again.")}finally{h(!1)}},k=async M=>{var X;const B=(X=M.target.files)==null?void 0:X[0];if(B){if(!B.type.startsWith("image/")){alert("Please select an image file");return}if(B.size>5*1024*1024){alert("Image size must be less than 5MB");return}s(!0);try{await Se.uploadCompanyLogo(t,B),r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]})}catch{alert("Failed to upload logo. Please try again.")}finally{s(!1),n.current&&(n.current.value="")}}};if(p)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(m||!f)return c.jsxs("div",{className:"card p-6 text-center",children:[c.jsx("p",{className:"text-red-600",children:"Failed to load organization."}),c.jsx(qe,{to:"/companies",className:"btn-secondary mt-4",children:"Back to organizations"})]});if(f.status==="trash")return null;const j=f.acf||{};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs(qe,{to:"/companies",className:"flex items-center text-gray-600 hover:text-gray-900",children:[c.jsx(Ph,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Back to organizations"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>u(!0),className:"btn-secondary",title:"Share",children:[c.jsx(fA,{className:"w-4 h-4 mr-2"}),"Share"]}),c.jsxs("button",{onClick:()=>a(!0),className:"btn-secondary",children:[c.jsx(lne,{className:"w-4 h-4 mr-2"}),"Edit"]}),c.jsxs("button",{onClick:N,className:"btn-danger",children:[c.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]}),c.jsx("div",{className:"card p-6",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"relative group",children:[(D=(O=(P=f._embedded)==null?void 0:P["wp:featuredmedia"])==null?void 0:O[0])!=null&&D.source_url?c.jsx("img",{src:f._embedded["wp:featuredmedia"][0].source_url,alt:dr(f),className:"w-24 h-24 rounded-lg object-contain bg-white"}):c.jsx("div",{className:"w-24 h-24 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:c.jsx(Dr,{className:"w-12 h-12 text-gray-400"})}),c.jsx("div",{className:"absolute inset-0 rounded-lg bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var M;return(M=n.current)==null?void 0:M.click()},children:i?c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):c.jsx(Qre,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),c.jsx("input",{ref:n,type:"file",accept:"image/*",onChange:k,className:"hidden",disabled:i})]}),c.jsxs("div",{children:[y&&c.jsxs(qe,{to:`/companies/${y.id}`,className:"text-sm text-primary-600 hover:underline flex items-center mb-1",children:[c.jsx(Y5,{className:"w-3 h-3 mr-1"}),"Subsidiary of ",dr(y)]}),c.jsx("h1",{className:"text-2xl font-bold",children:dr(f)}),j.industry&&c.jsx("p",{className:"text-gray-500",children:j.industry}),j.website&&c.jsxs("a",{href:j.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline flex items-center mt-1",children:[c.jsx(np,{className:"w-4 h-4 mr-1"}),j.website]})]})]})}),v.length>0&&c.jsxs("div",{className:"card p-6",children:[c.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[c.jsx(Y5,{className:"w-5 h-5 mr-2"}),"Subsidiaries"]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:v.map(M=>{var B,X,Q,le;return c.jsxs(qe,{to:`/companies/${M.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[(Q=(X=(B=M._embedded)==null?void 0:B["wp:featuredmedia"])==null?void 0:X[0])!=null&&Q.source_url?c.jsx("img",{src:M._embedded["wp:featuredmedia"][0].source_url,alt:dr(M),className:"w-10 h-10 rounded object-contain bg-white"}):c.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded flex items-center justify-center",children:c.jsx(Dr,{className:"w-5 h-5 text-gray-400"})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("p",{className:"text-sm font-medium",children:dr(M)}),((le=M.acf)==null?void 0:le.industry)&&c.jsx("p",{className:"text-xs text-gray-500",children:M.acf.industry})]})]},M.id)})})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"card p-6",children:[c.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[c.jsx($r,{className:"w-5 h-5 mr-2"}),"Current employees"]}),((F=g==null?void 0:g.current)==null?void 0:F.length)>0?c.jsx("div",{className:"space-y-2",children:g.current.map(M=>{var B;return c.jsxs(qe,{to:`/people/${M.id}`,className:"flex items-center p-2 rounded hover:bg-gray-50",children:[M.thumbnail?c.jsx("img",{src:M.thumbnail,alt:"",loading:"lazy",className:"w-8 h-8 rounded-full"}):c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-xs text-gray-500",children:((B=M.name)==null?void 0:B[0])||"?"})}),c.jsxs("div",{className:"ml-2",children:[c.jsx("p",{className:"text-sm font-medium",children:M.name}),M.job_title&&c.jsx("p",{className:"text-xs text-gray-500",children:M.job_title})]})]},M.id)})}):c.jsx("p",{className:"text-sm text-gray-500",children:"No current employees."})]}),c.jsxs("div",{className:"card p-6",children:[c.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[c.jsx($r,{className:"w-5 h-5 mr-2"}),"Former employees"]}),(($=g==null?void 0:g.former)==null?void 0:$.length)>0?c.jsx("div",{className:"space-y-2",children:g.former.map(M=>{var B;return c.jsxs(qe,{to:`/people/${M.id}`,className:"flex items-center p-2 rounded hover:bg-gray-50",children:[M.thumbnail?c.jsx("img",{src:M.thumbnail,alt:"",loading:"lazy",className:"w-8 h-8 rounded-full opacity-75"}):c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center opacity-75",children:c.jsx("span",{className:"text-xs text-gray-500",children:((B=M.name)==null?void 0:B[0])||"?"})}),c.jsxs("div",{className:"ml-2",children:[c.jsx("p",{className:"text-sm font-medium text-gray-700",children:M.name}),M.job_title&&c.jsx("p",{className:"text-xs text-gray-500",children:M.job_title})]})]},M.id)})}):c.jsx("p",{className:"text-sm text-gray-500",children:"No former employees."})]})]}),w.length>0&&c.jsxs("div",{className:"card p-6",children:[c.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[c.jsx(kv,{className:"w-5 h-5 mr-2"}),"Investors"]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:w.map(M=>{const B=M.type==="person",X=B?`/people/${M.id}`:`/companies/${M.id}`;return c.jsxs(qe,{to:X,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[M.thumbnail?c.jsx("img",{src:M.thumbnail,alt:M.name,loading:"lazy",className:`w-10 h-10 object-cover ${B?"rounded-full":"rounded"}`}):c.jsx("div",{className:`w-10 h-10 bg-gray-100 flex items-center justify-center ${B?"rounded-full":"rounded"}`,children:B?c.jsx(vl,{className:"w-5 h-5 text-gray-400"}):c.jsx(Dr,{className:"w-5 h-5 text-gray-400"})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("p",{className:"text-sm font-medium",children:M.name}),c.jsx("p",{className:"text-xs text-gray-500",children:B?"Person":"Organization"})]})]},`${M.type}-${M.id}`)})})]}),x.length>0&&c.jsxs("div",{className:"card p-6",children:[c.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[c.jsx(kv,{className:"w-5 h-5 mr-2"}),"Invested in"]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:x.map(M=>c.jsxs(qe,{to:`/companies/${M.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[M.thumbnail?c.jsx("img",{src:M.thumbnail,alt:M.name,loading:"lazy",className:"w-10 h-10 object-contain rounded"}):c.jsx("div",{className:"w-10 h-10 bg-gray-100 flex items-center justify-center rounded",children:c.jsx(Dr,{className:"w-5 h-5 text-gray-400"})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("p",{className:"text-sm font-medium",children:M.name}),M.industry&&c.jsx("p",{className:"text-xs text-gray-500",children:M.industry})]})]},M.id))})]}),((q=j.contact_info)==null?void 0:q.length)>0&&c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"font-semibold mb-4",children:"Contact information"}),c.jsx("div",{className:"space-y-3",children:j.contact_info.map((M,B)=>c.jsxs("div",{children:[c.jsxs("span",{className:"text-sm text-gray-500",children:[M.contact_label||M.contact_type,":"]}),c.jsx("span",{className:"ml-2",children:M.contact_value})]},B))})]}),c.jsx(SA,{isOpen:o,onClose:()=>a(!1),onSubmit:_,isLoading:d,company:f}),c.jsx(Yoe,{isOpen:l,onClose:()=>u(!1),postType:"companies",postId:f.id,postTitle:dr(f)})]})}function UCe({person:t,dateType:e}){var r;return c.jsx("div",{className:"flex items-center gap-3 py-2",children:c.jsxs(qe,{to:`/people/${t.id}`,className:"flex items-center gap-3 flex-1 min-w-0 hover:opacity-80",children:[t.thumbnail?c.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}):c.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:c.jsx("span",{className:"text-sm font-medium text-gray-500",children:(r=t.name)==null?void 0:r[0]})}),c.jsx("span",{className:"font-medium truncate",children:t.name}),c.jsx("span",{className:"text-sm text-gray-500 capitalize flex-shrink-0",children:e})]})})}function HCe({dates:t}){const e=t[0],n=e.days_until===0?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600",i=[];return t.forEach(s=>{var a,l;const o=((a=s.date_type)==null?void 0:a[0])||"Date";((l=s.related_people)==null?void 0:l.length)>0?s.related_people.forEach(u=>{i.push({person:u,dateType:o})}):i.push({person:{id:null,name:s.title,thumbnail:null},dateType:o})}),c.jsx("div",{className:"card p-4 break-inside-avoid mb-4",children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:`w-14 h-14 rounded-lg ${n} flex items-center justify-center flex-shrink-0`,children:c.jsx("span",{className:"text-2xl font-bold leading-none",children:Rn(new Date(e.next_occurrence),"d")})}),c.jsx("div",{className:"flex-1 min-w-0 divide-y divide-gray-100",children:i.map(({person:s,dateType:o},a)=>c.jsx(UCe,{person:s,dateType:o},s.id?`${s.id}-${o}`:`${a}-${o}`))})]})})}function KCe(){const[t,e]=C.useState(!1),[r,n]=C.useState(!1),{data:i,isLoading:s,error:o}=Qge(365),{data:a=[],isLoading:l}=lu(),u=pne({onSuccess:()=>e(!1)}),d=async p=>{n(!0);try{await u.mutateAsync(p)}finally{n(!1)}},h=(i==null?void 0:i.reduce((p,m)=>{const g=Rn(new Date(m.next_occurrence),"yyyy-MM-dd");return p[g]||(p[g]=[]),p[g].push(m),p},{}))||{},f=Object.entries(h).reduce((p,[m,g])=>{const y=Rn(new Date(m),"MMMM yyyy");return p[y]||(p[y]=[]),p[y].push(g),p},{});return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("p",{className:"text-gray-600",children:[(i==null?void 0:i.length)||0," upcoming dates"]}),c.jsxs("button",{onClick:()=>e(!0),className:"btn-primary",children:[c.jsx(lr,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Add date"})]})]}),s&&c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),o&&c.jsx("div",{className:"card p-6 text-center",children:c.jsx("p",{className:"text-red-600",children:"Failed to load dates."})}),!s&&!o&&(i==null?void 0:i.length)===0&&c.jsxs("div",{className:"card p-12 text-center",children:[c.jsx(Ys,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium mb-1",children:"No important dates"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Add birthdays, anniversaries, and more."}),c.jsxs("button",{onClick:()=>e(!0),className:"btn-primary",children:[c.jsx(lr,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Add date"})]})]}),Object.entries(f).map(([p,m])=>c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:p}),c.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 gap-4",children:m.map(g=>c.jsx(HCe,{dates:g},g[0].next_occurrence))})]},p)),c.jsx(EA,{isOpen:t,onClose:()=>e(!1),onSubmit:d,isLoading:r,allPeople:a,isPeopleLoading:l})]})}function GCe(){Ih("Todos");const[t,e]=C.useState(!1),[r,n]=C.useState(null),[i,s]=C.useState(!1),[o,a]=C.useState(!1),[l,u]=C.useState(null),[d,h]=C.useState(!1),[f,p]=C.useState(!1),[m,g]=C.useState(null),{data:y,isLoading:v}=yne(!0),b=vne(),w=Xge(),x=gA(),S=C.useMemo(()=>Wne(new Date,3),[]),{incompleteTodos:E,recentlyCompletedTodos:N,olderCompletedTodos:_}=C.useMemo(()=>{if(!y)return{incompleteTodos:[],recentlyCompletedTodos:[],olderCompletedTodos:[]};const $=[],q=[],M=[];return y.forEach(B=>{if(!B.is_completed)$.push(B);else try{const X=Vp(B.created);Zve(X,S)?q.push(B):M.push(B)}catch{M.push(B)}}),{incompleteTodos:$,recentlyCompletedTodos:q,olderCompletedTodos:M}},[y,S]),k=$=>{if(!$.is_completed){u($),h(!0);return}b.mutate({todoId:$.id,data:{content:$.content,due_date:$.due_date,is_completed:!1}})},j=()=>{l&&(b.mutate({todoId:l.id,data:{content:l.content,due_date:l.due_date,is_completed:!0}}),h(!1),u(null))},T=()=>{if(!l)return;const $=new Date().toISOString().split("T")[0];g({content:l.content,activity_date:$,activity_type:"note",participants:[]}),h(!1),p(!0)},P=async $=>{if(l)try{await x.mutateAsync({personId:l.person_id,data:$}),await b.mutateAsync({todoId:l.id,data:{content:l.content,due_date:l.due_date,is_completed:!0}}),p(!1),u(null),g(null)}catch{alert("Failed to create activity. Please try again.")}},O=async $=>{r&&(await b.mutateAsync({todoId:r.id,data:$}),s(!1),n(null))},D=async $=>{window.confirm("Are you sure you want to delete this todo?")&&await w.mutateAsync($)};if(v)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});const F=[...N,..._];return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsx("h1",{className:"text-2xl font-bold",children:"Todos"}),c.jsxs("div",{className:"flex items-center gap-2",children:[_.length>0&&c.jsxs("button",{onClick:()=>e(!t),className:`btn-secondary text-sm flex items-center gap-2 ${t?"bg-primary-50 border-primary-300":""}`,children:[c.jsx(Wp,{className:"w-4 h-4"}),t?"Hide older":"Show all completed"]}),c.jsxs("button",{onClick:()=>a(!0),className:"btn-primary text-sm flex items-center gap-2",children:[c.jsx(lr,{className:"w-4 h-4"}),"Add todo"]})]})]}),c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"p-4 border-b border-gray-200",children:c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx(yl,{className:"w-5 h-5 mr-2 text-gray-500"}),"Open todos (",E.length,")"]})}),E.length>0?c.jsx("div",{className:"divide-y divide-gray-100",children:E.map($=>c.jsx(Qx,{todo:$,onToggle:k,onEdit:q=>{n(q),s(!0)},onDelete:D},$.id))}):c.jsxs("div",{className:"p-8 text-center",children:[c.jsx(Hi,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),c.jsx("p",{className:"text-gray-500",children:"No open todos"}),c.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Create todos from a person's detail page"})]})]}),N.length>0&&!t&&c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"p-4 border-b border-gray-200",children:c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx(Xre,{className:"w-5 h-5 mr-2 text-primary-600"}),"Recently completed (",N.length,")"]})}),c.jsx("div",{className:"divide-y divide-gray-100",children:N.map($=>c.jsx(Qx,{todo:$,onToggle:k,onEdit:q=>{n(q),s(!0)},onDelete:D},$.id))})]}),t&&F.length>0&&c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"p-4 border-b border-gray-200",children:c.jsxs("h2",{className:"font-semibold flex items-center",children:[c.jsx(Hi,{className:"w-5 h-5 mr-2 text-primary-600"}),"All completed todos (",F.length,")"]})}),c.jsx("div",{className:"divide-y divide-gray-100",children:F.map($=>c.jsx(Qx,{todo:$,onToggle:k,onEdit:q=>{n(q),s(!0)},onDelete:D},$.id))})]}),c.jsx(Goe,{isOpen:i,onClose:()=>{s(!1),n(null)},onSubmit:O,isLoading:b.isPending,todo:r}),c.jsx(bne,{isOpen:o,onClose:()=>a(!1)}),c.jsx(_A,{isOpen:d,onClose:()=>{h(!1),u(null)},todo:l,onComplete:j,onCompleteAsActivity:T}),c.jsx(dD,{isOpen:f,onClose:()=>{p(!1),u(null),g(null)},onSubmit:P,isLoading:x.isPending,personId:l==null?void 0:l.person_id,initialData:m})]})}function Qx({todo:t,onToggle:e,onEdit:r,onDelete:n}){var s;const i=Dm(t);return c.jsxs("div",{className:"flex items-start p-4 hover:bg-gray-50 transition-colors group",children:[c.jsx("button",{onClick:()=>e(t),className:"mt-0.5 mr-3 flex-shrink-0",title:t.is_completed?"Mark as incomplete":"Mark as complete",children:t.is_completed?c.jsx(Hi,{className:"w-5 h-5 text-primary-600"}):c.jsx(yl,{className:`w-5 h-5 ${i?"text-red-600":"text-gray-400"}`})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:`text-sm ${t.is_completed?"line-through text-gray-400":i?"text-red-600 font-medium":"text-gray-900"}`,children:t.content}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-2",children:[c.jsxs(qe,{to:`/people/${t.person_id}`,className:"flex items-center gap-2 text-xs text-primary-600 hover:text-primary-700 hover:underline",children:[t.person_thumbnail?c.jsx("img",{src:t.person_thumbnail,alt:t.person_name,className:"w-5 h-5 rounded-full object-cover"}):c.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-xs text-gray-500",children:(s=t.person_name)==null?void 0:s[0]})}),t.person_name]}),t.due_date&&c.jsxs("span",{className:`text-xs ${i&&!t.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",Rn(new Date(t.due_date),"MMM d, yyyy"),i&&!t.is_completed&&" (overdue)"]})]})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[c.jsx("button",{onClick:()=>r(t),className:"p-1 hover:bg-gray-100 rounded",title:"Edit todo",children:c.jsx(ba,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),c.jsx("button",{onClick:()=>n(t.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete todo",children:c.jsx(Sn,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})}function YCe(){var v,b,w;const[t,e]=C.useState(null),[r,n]=C.useState(""),[i,s]=C.useState(!1),[o,a]=C.useState(null),l=tt(),u=He({mutationFn:async x=>{const S=new FormData;return S.append("file",x),(await ee.post("/prm/v1/import/monica/validate",S,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:x=>{a(x)},onError:x=>{var S,E;a({valid:!1,error:((E=(S=x.response)==null?void 0:S.data)==null?void 0:E.message)||"Failed to validate file"})}}),d=He({mutationFn:async({file:x,monicaUrl:S})=>{const E=new FormData;return E.append("file",x),E.append("monica_url",S),(await ee.post("/prm/v1/import/monica",E,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{l.invalidateQueries({queryKey:["people"]}),l.invalidateQueries({queryKey:["companies"]}),l.invalidateQueries({queryKey:["dates"]}),l.invalidateQueries({queryKey:["dashboard"]})}}),h=C.useCallback(x=>{x.preventDefault(),x.stopPropagation(),x.type==="dragenter"||x.type==="dragover"?s(!0):x.type==="dragleave"&&s(!1)},[]),f=C.useCallback(x=>{x.preventDefault(),x.stopPropagation(),s(!1),x.dataTransfer.files&&x.dataTransfer.files[0]&&m(x.dataTransfer.files[0])},[]),p=x=>{x.target.files&&x.target.files[0]&&m(x.target.files[0])},m=x=>{if(!x.name.endsWith(".sql")){a({valid:!1,error:"Please select a SQL file"});return}e(x),a(null),d.reset(),u.mutate(x)},g=()=>{if(!r.trim()){a(x=>({...x,urlError:"Please enter your Monica instance URL"}));return}t&&(o!=null&&o.valid)&&d.mutate({file:t,monicaUrl:r.trim()})},y=()=>{e(null),n(""),a(null),u.reset(),d.reset()};return c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Import from Monica"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts, relationships, notes, and photos from a Monica CRM SQL export file. Reimporting the same file will update existing contacts instead of creating duplicates."}),d.isSuccess?c.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Lc,{className:"h-5 w-5 text-green-600 mt-0.5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),c.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[c.jsxs("p",{children:["Contacts imported: ",d.data.stats.contacts_imported]}),c.jsxs("p",{children:["Contacts updated: ",d.data.stats.contacts_updated]}),c.jsxs("p",{children:["Contacts skipped (partial): ",d.data.stats.contacts_skipped]}),c.jsxs("p",{children:["Photos imported: ",d.data.stats.photos_imported]}),c.jsxs("p",{children:["Organizations created: ",d.data.stats.companies_created]}),c.jsxs("p",{children:["Relationships created: ",d.data.stats.relationships_created]}),c.jsxs("p",{children:["Important dates created: ",d.data.stats.dates_created]}),c.jsxs("p",{children:["Notes created: ",d.data.stats.notes_created]}),((v=d.data.stats.errors)==null?void 0:v.length)>0&&c.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[c.jsx("p",{className:"font-medium",children:"Errors:"}),c.jsx("ul",{className:"list-disc list-inside",children:d.data.stats.errors.map((x,S)=>c.jsx("li",{children:x},S))})]})]}),c.jsx("button",{onClick:y,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${i?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:f,children:[c.jsx("input",{type:"file",accept:".sql",onChange:p,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),u.isPending?c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(Yo,{className:"h-8 w-8 text-primary-600 animate-spin"}),c.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(Im,{className:"h-8 w-8 text-green-600"}),c.jsx("p",{className:"font-medium text-gray-900",children:t.name}),c.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024/1024).toFixed(2)," MB"]})]}):c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(Wc,{className:"h-8 w-8 text-gray-400"}),c.jsx("p",{className:"text-gray-600",children:"Drag and drop your Monica SQL export file here, or click to browse"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Supports SQL export files"})]})]}),o&&c.jsx("div",{className:`rounded-lg border p-4 ${o.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:o.valid?c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Lc,{className:"h-5 w-5 text-green-600 mt-0.5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),c.jsxs("div",{className:"mt-2 text-sm text-green-800",children:[c.jsxs("p",{children:["Export format: ",o.version]}),c.jsxs("p",{children:["Contacts to import: ",o.summary.contacts]}),c.jsxs("p",{children:["Relationships: ",o.summary.relationships]}),c.jsxs("p",{children:["Notes: ",o.summary.notes]}),c.jsxs("p",{children:["Dates: ",o.summary.reminders]}),c.jsxs("p",{children:["Photos: ",o.summary.photos]}),c.jsxs("p",{children:["Organizations: ",o.summary.companies_count]})]})]})]}):c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Go,{className:"h-5 w-5 text-red-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),c.jsx("p",{className:"text-sm text-red-700 mt-1",children:o.error})]})]})}),(o==null?void 0:o.valid)&&c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"monica-url",className:"block text-sm font-medium text-gray-700",children:"Monica Instance URL"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(uA,{className:"h-4 w-4 text-gray-400"})}),c.jsx("input",{type:"url",id:"monica-url",value:r,onChange:x=>n(x.target.value),placeholder:"https://your-monica-instance.com",className:`block w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ${o.urlError?"border-red-300":"border-gray-300"}`})]}),o.urlError&&c.jsx("p",{className:"text-sm text-red-600",children:o.urlError}),c.jsx("p",{className:"text-xs text-gray-500",children:"Enter the URL of your Monica instance to import photos. Photos will be downloaded from this URL."})]}),(o==null?void 0:o.valid)&&c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:g,disabled:d.isPending,className:"btn-primary flex items-center gap-2",children:d.isPending?c.jsxs(c.Fragment,{children:[c.jsx(Yo,{className:"h-4 w-4 animate-spin"}),c.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(Wc,{className:"h-4 w-4"}),c.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),c.jsx("button",{onClick:y,disabled:d.isPending,className:"btn-secondary",children:"Cancel"})]}),d.isError&&c.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Go,{className:"h-5 w-5 text-red-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),c.jsx("p",{className:"text-sm text-red-700 mt-1",children:((w=(b=d.error.response)==null?void 0:b.data)==null?void 0:w.message)||"An error occurred during import"})]})]})})]})]})}function QCe(){var g,y,v;const[t,e]=C.useState(null),[r,n]=C.useState(!1),[i,s]=C.useState(null),o=tt(),a=He({mutationFn:async b=>{const w=new FormData;return w.append("file",b),(await ee.post("/prm/v1/import/vcard/validate",w,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:b=>{s(b)},onError:b=>{var w,x;s({valid:!1,error:((x=(w=b.response)==null?void 0:w.data)==null?void 0:x.message)||"Failed to validate file"})}}),l=He({mutationFn:async b=>{const w=new FormData;return w.append("file",b),(await ee.post("/prm/v1/import/vcard",w,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{o.invalidateQueries({queryKey:["people"]}),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["dates"]}),o.invalidateQueries({queryKey:["dashboard"]})}}),u=C.useCallback(b=>{b.preventDefault(),b.stopPropagation(),b.type==="dragenter"||b.type==="dragover"?n(!0):b.type==="dragleave"&&n(!1)},[]),d=C.useCallback(b=>{b.preventDefault(),b.stopPropagation(),n(!1),b.dataTransfer.files&&b.dataTransfer.files[0]&&f(b.dataTransfer.files[0])},[]),h=b=>{b.target.files&&b.target.files[0]&&f(b.target.files[0])},f=b=>{const w=b.name.split(".").pop().toLowerCase();if(w!=="vcf"&&w!=="vcard"){s({valid:!1,error:"Please select a vCard file (.vcf)"});return}e(b),s(null),l.reset(),a.mutate(b)},p=()=>{t&&(i!=null&&i.valid)&&l.mutate(t)},m=()=>{e(null),s(null),a.reset(),l.reset()};return c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Import from vCard"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts from a vCard (.vcf) file. vCard is a standard format supported by most contact apps including Apple Contacts, Outlook, and Android. Files can contain one or multiple contacts."}),l.isSuccess?c.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Lc,{className:"h-5 w-5 text-green-600 mt-0.5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),c.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[c.jsxs("p",{children:["Contacts imported: ",l.data.stats.contacts_imported]}),c.jsxs("p",{children:["Contacts updated: ",l.data.stats.contacts_updated]}),c.jsxs("p",{children:["Contacts skipped: ",l.data.stats.contacts_skipped]}),c.jsxs("p",{children:["Photos imported: ",l.data.stats.photos_imported]}),c.jsxs("p",{children:["Organizations created: ",l.data.stats.companies_created]}),c.jsxs("p",{children:["Birthdays created: ",l.data.stats.dates_created]}),c.jsxs("p",{children:["Notes created: ",l.data.stats.notes_created]}),((g=l.data.stats.errors)==null?void 0:g.length)>0&&c.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[c.jsx("p",{className:"font-medium",children:"Errors:"}),c.jsx("ul",{className:"list-disc list-inside",children:l.data.stats.errors.map((b,w)=>c.jsx("li",{children:b},w))})]})]}),c.jsx("button",{onClick:m,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${r?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:u,onDragLeave:u,onDragOver:u,onDrop:d,children:[c.jsx("input",{type:"file",accept:".vcf,.vcard",onChange:h,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),a.isPending?c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(Yo,{className:"h-8 w-8 text-primary-600 animate-spin"}),c.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(Im,{className:"h-8 w-8 text-green-600"}),c.jsx("p",{className:"font-medium text-gray-900",children:t.name}),c.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024).toFixed(2)," KB"]})]}):c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(Wc,{className:"h-8 w-8 text-gray-400"}),c.jsx("p",{className:"text-gray-600",children:"Drag and drop your vCard file here, or click to browse"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Supports .vcf and .vcard files"})]})]}),i&&c.jsx("div",{className:`rounded-lg border p-4 ${i.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:i.valid?c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Lc,{className:"h-5 w-5 text-green-600 mt-0.5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),c.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-3 gap-3",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx($r,{className:"h-4 w-4"}),c.jsxs("span",{children:[i.summary.contacts," contacts"]})]}),i.summary.companies_count>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(Dr,{className:"h-4 w-4"}),c.jsxs("span",{children:[i.summary.companies_count," organizations"]})]}),i.summary.birthdays>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(Yre,{className:"h-4 w-4"}),c.jsxs("span",{children:[i.summary.birthdays," birthdays"]})]}),i.summary.photos>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(rne,{className:"h-4 w-4"}),c.jsxs("span",{children:[i.summary.photos," photos"]})]}),i.summary.notes>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(mA,{className:"h-4 w-4"}),c.jsxs("span",{children:[i.summary.notes," notes"]})]})]})]})]}):c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Go,{className:"h-5 w-5 text-red-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),c.jsx("p",{className:"text-sm text-red-700 mt-1",children:i.error})]})]})}),(i==null?void 0:i.valid)&&c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:p,disabled:l.isPending,className:"btn-primary flex items-center gap-2",children:l.isPending?c.jsxs(c.Fragment,{children:[c.jsx(Yo,{className:"h-4 w-4 animate-spin"}),c.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(Wc,{className:"h-4 w-4"}),c.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),c.jsx("button",{onClick:m,disabled:l.isPending,className:"btn-secondary",children:"Cancel"})]}),l.isError&&c.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Go,{className:"h-5 w-5 text-red-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),c.jsx("p",{className:"text-sm text-red-700 mt-1",children:((v=(y=l.error.response)==null?void 0:y.data)==null?void 0:v.message)||"An error occurred during import"})]})]})})]})]})}function XCe(){var x,S,E;const[t,e]=C.useState(null),[r,n]=C.useState(!1),[i,s]=C.useState(null),[o,a]=C.useState({}),l=tt(),u=He({mutationFn:async N=>{const _=new FormData;return _.append("file",N),(await ee.post("/prm/v1/import/google-contacts/validate",_,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:N=>{var _;if(s(N),((_=N.duplicates)==null?void 0:_.length)>0){const k={};N.duplicates.forEach(j=>{k[j.index]="merge"}),a(k)}},onError:N=>{var _,k;s({valid:!1,error:((k=(_=N.response)==null?void 0:_.data)==null?void 0:k.message)||"Failed to validate file"})}}),d=He({mutationFn:async({file:N,decisions:_})=>{const k=new FormData;return k.append("file",N),k.append("decisions",JSON.stringify(_)),(await ee.post("/prm/v1/import/google-contacts",k,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{l.invalidateQueries({queryKey:["people"]}),l.invalidateQueries({queryKey:["companies"]}),l.invalidateQueries({queryKey:["dates"]}),l.invalidateQueries({queryKey:["dashboard"]})}}),h=C.useCallback(N=>{N.preventDefault(),N.stopPropagation(),N.type==="dragenter"||N.type==="dragover"?n(!0):N.type==="dragleave"&&n(!1)},[]),f=C.useCallback(N=>{N.preventDefault(),N.stopPropagation(),n(!1),N.dataTransfer.files&&N.dataTransfer.files[0]&&m(N.dataTransfer.files[0])},[]),p=N=>{N.target.files&&N.target.files[0]&&m(N.target.files[0])},m=N=>{if(!N.name.endsWith(".csv")){s({valid:!1,error:"Please select a CSV file"});return}e(N),s(null),a({}),d.reset(),u.mutate(N)},g=(N,_)=>{a(k=>({...k,[N]:_}))},y=()=>{t&&(i!=null&&i.valid)&&d.mutate({file:t,decisions:o})},v=()=>{e(null),s(null),a({}),u.reset(),d.reset()},b=(i==null?void 0:i.duplicates)||[],w=b.length>0;return c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Import from Google Contacts"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts from a Google Contacts CSV export. To export from Google:"}),c.jsxs("ol",{className:"text-sm text-gray-600 list-decimal list-inside space-y-1 ml-2",children:[c.jsxs("li",{children:["Go to ",c.jsx("a",{href:"https://contacts.google.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline",children:"contacts.google.com"})]}),c.jsx("li",{children:'Click "Export" in the left sidebar'}),c.jsx("li",{children:'Select "Google CSV" format and click "Export"'})]}),d.isSuccess?c.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Lc,{className:"h-5 w-5 text-green-600 mt-0.5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),c.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[c.jsxs("p",{children:["Contacts imported: ",d.data.stats.contacts_imported]}),c.jsxs("p",{children:["Contacts updated: ",d.data.stats.contacts_updated]}),c.jsxs("p",{children:["Contacts skipped: ",d.data.stats.contacts_skipped]}),c.jsxs("p",{children:["Organizations created: ",d.data.stats.companies_created]}),c.jsxs("p",{children:["Birthdays created: ",d.data.stats.dates_created]}),c.jsxs("p",{children:["Notes created: ",d.data.stats.notes_created]}),c.jsxs("p",{children:["Photos imported: ",d.data.stats.photos_imported]}),((x=d.data.stats.errors)==null?void 0:x.length)>0&&c.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[c.jsx("p",{className:"font-medium",children:"Errors:"}),c.jsx("ul",{className:"list-disc list-inside",children:d.data.stats.errors.map((N,_)=>c.jsx("li",{children:N},_))})]})]}),c.jsx("button",{onClick:v,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${r?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:f,children:[c.jsx("input",{type:"file",accept:".csv",onChange:p,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),u.isPending?c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(Yo,{className:"h-8 w-8 text-primary-600 animate-spin"}),c.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(cA,{className:"h-8 w-8 text-green-600"}),c.jsx("p",{className:"font-medium text-gray-900",children:t.name}),c.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024).toFixed(2)," KB"]})]}):c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(Wc,{className:"h-8 w-8 text-gray-400"}),c.jsx("p",{className:"text-gray-600",children:"Drag and drop your Google Contacts CSV here, or click to browse"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Supports Google CSV format"})]})]}),i&&c.jsx("div",{className:`rounded-lg border p-4 ${i.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:i.valid?c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Lc,{className:"h-5 w-5 text-green-600 mt-0.5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),c.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-3 gap-3",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx($r,{className:"h-4 w-4"}),c.jsxs("span",{children:[i.summary.contacts," contacts"]})]}),i.summary.companies_count>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(Dr,{className:"h-4 w-4"}),c.jsxs("span",{children:[i.summary.companies_count," organizations"]})]}),i.summary.birthdays>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(Yre,{className:"h-4 w-4"}),c.jsxs("span",{children:[i.summary.birthdays," birthdays"]})]}),i.summary.notes>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(mA,{className:"h-4 w-4"}),c.jsxs("span",{children:[i.summary.notes," notes"]})]}),i.summary.photos>0&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[c.jsx(rne,{className:"h-4 w-4"}),c.jsxs("span",{children:[i.summary.photos," photos"]})]})]})]})]}):c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Go,{className:"h-5 w-5 text-red-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),c.jsx("p",{className:"text-sm text-red-700 mt-1",children:i.error})]})]})}),(i==null?void 0:i.valid)&&w&&c.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Hre,{className:"h-5 w-5 text-amber-600 mt-0.5 flex-shrink-0"}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("h3",{className:"font-medium text-amber-900",children:[b.length," contact",b.length>1?"s":""," may already exist"]}),c.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"Choose how to handle each potential duplicate:"}),c.jsx("div",{className:"mt-4 space-y-4",children:b.map(N=>c.jsx(JCe,{duplicate:N,decision:o[N.index]||"merge",onDecision:_=>g(N.index,_)},N.index))})]})]})}),(i==null?void 0:i.valid)&&c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:y,disabled:d.isPending,className:"btn-primary flex items-center gap-2",children:d.isPending?c.jsxs(c.Fragment,{children:[c.jsx(Yo,{className:"h-4 w-4 animate-spin"}),c.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(Wc,{className:"h-4 w-4"}),c.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),c.jsx("button",{onClick:v,disabled:d.isPending,className:"btn-secondary",children:"Cancel"})]}),d.isError&&c.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Go,{className:"h-5 w-5 text-red-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),c.jsx("p",{className:"text-sm text-red-700 mt-1",children:((E=(S=d.error.response)==null?void 0:S.data)==null?void 0:E.message)||"An error occurred during import"})]})]})})]})]})}function JCe({duplicate:t,decision:e,onDecision:r}){var n,i;return c.jsxs("div",{className:"bg-white rounded-lg border border-amber-200 p-4",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"From CSV"}),c.jsx("p",{className:"font-medium text-gray-900 truncate",children:t.csv_name}),t.csv_org&&c.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.csv_org}),t.csv_email&&c.jsx("p",{className:"text-sm text-gray-500 truncate",children:t.csv_email})]}),c.jsx("div",{className:"hidden sm:flex items-center text-gray-400",children:c.jsx("span",{className:"text-lg",children:""})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Existing Contact"}),c.jsxs("div",{className:"flex items-start gap-3",children:[t.existing_photo?c.jsx("img",{src:t.existing_photo,alt:"",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}):c.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:c.jsx("span",{className:"text-gray-500 text-sm font-medium",children:((i=(n=t.existing_name)==null?void 0:n.charAt(0))==null?void 0:i.toUpperCase())||"?"})}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"font-medium text-gray-900 truncate",children:t.existing_name}),t.existing_org&&c.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.existing_org}),t.existing_email&&c.jsx("p",{className:"text-sm text-gray-500 truncate",children:t.existing_email})]})]})]})]}),c.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[c.jsxs("button",{type:"button",onClick:()=>r("merge"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="merge"?"bg-primary-100 text-primary-800 ring-2 ring-primary-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[c.jsx(ine,{className:"h-4 w-4"}),"Update existing"]}),c.jsxs("button",{type:"button",onClick:()=>r("new"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="new"?"bg-green-100 text-green-800 ring-2 ring-green-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[c.jsx(pb,{className:"h-4 w-4"}),"Create new"]}),c.jsxs("button",{type:"button",onClick:()=>r("skip"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="skip"?"bg-gray-200 text-gray-800 ring-2 ring-gray-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[c.jsx(Tge,{className:"h-4 w-4"}),"Skip"]})]})]})}const ZCe=[{id:"sync",label:"Sync",icon:fA},{id:"notifications",label:"Notifications",icon:dge},{id:"data",label:"Data",icon:ene},{id:"admin",label:"Admin",icon:pA,adminOnly:!0},{id:"about",label:"About",icon:vge}];function eke(){const[t,e]=rpe(),r=window.prmConfig||{},n=r.isAdmin||!1,i=r.userId,s=t.get("tab")||"sync",o=Ee=>{e({tab:Ee})},a=ZCe.filter(Ee=>!Ee.adminOnly||n),[l,u]=C.useState(""),[d,h]=C.useState(""),[f,p]=C.useState(!0),[m,g]=C.useState(!1),[y,v]=C.useState(!1),[b,w]=C.useState([]),[x,S]=C.useState(!0),[E,N]=C.useState(""),[_,k]=C.useState(!1),[j,T]=C.useState(null),[P,O]=C.useState(!1),[D,F]=C.useState(null),[$,q]=C.useState([]),[M,B]=C.useState(""),[X,Q]=C.useState(!1),[le,G]=C.useState(""),[se,ke]=C.useState("09:00"),[be,$e]=C.useState("digest"),[Ie,Nt]=C.useState(!0),[Ct,kt]=C.useState(!1),[er,Ye]=C.useState(!1),[yr,en]=C.useState(!1),[Pr,st]=C.useState(""),[vr,mi]=C.useState(!1),[tn,A]=C.useState([]),[L,V]=C.useState([]),[ce,re]=C.useState([]),[ne,ge]=C.useState(!1),[Le,Ve]=C.useState(!1),[U,K]=C.useState(!1),[z,Z]=C.useState(""),[pe,we]=C.useState(!1),[We,rn]=C.useState("");C.useEffect(()=>{(async()=>{try{const Me=await ee.get("/prm/v1/user/ical-url");u(Me.data.url),h(Me.data.webcal_url)}catch{}finally{p(!1)}})()},[]),C.useEffect(()=>{i&&(async()=>{try{const[Me,Ue]=await Promise.all([Se.getAppPasswords(i),Se.getCardDAVUrls()]);w(Me.data||[]),F(Ue.data)}catch{}finally{S(!1)}})()},[i]);const Ir=async()=>{ge(!0);try{const[Ee,Me]=await Promise.all([Se.getSlackChannels(),Se.getSlackTargets()]);A(Ee.data.channels||[]),V(Ee.data.users||[]),re(Me.data.targets||[])}catch{st("Failed to load Slack channels and users. Please try refreshing the page.")}finally{ge(!1)}};C.useEffect(()=>{(async()=>{try{const Me=await Se.getNotificationChannels();q(Me.data.channels||["email"]),B(Me.data.slack_webhook||""),ke(Me.data.notification_time||"09:00"),$e(Me.data.mention_notifications||"digest");const Ue=await Se.getSlackStatus(),yt=Ue.data.connected||!1;Q(yt),G(Ue.data.workspace_name||""),yt&&await Ir()}catch{}finally{Nt(!1)}})()},[]),C.useEffect(()=>{X&&Ir()},[X]),C.useEffect(()=>{const Ee=new URLSearchParams(window.location.search),Me=Ee.get("slack_connected"),Ue=Ee.get("slack_error");Me==="1"?(st("Slack connected successfully!"),o("notifications"),Se.getSlackStatus().then(yt=>{Q(yt.data.connected||!1),G(yt.data.workspace_name||"")}),e({tab:"notifications"})):Ue&&(st(`Slack connection failed: ${Ue}`),o("notifications"),e({tab:"notifications"}))},[]);const ks=async()=>{var Ee,Me;try{const Ue=await ee.get("/prm/v1/slack/oauth/authorize");window.location.href=Ue.data.oauth_url}catch(Ue){alert(((Me=(Ee=Ue.response)==null?void 0:Ee.data)==null?void 0:Me.message)||"Failed to connect Slack")}},js=async()=>{var Ee,Me;if(confirm("Are you sure you want to disconnect Slack? You will stop receiving Slack notifications.")){mi(!0);try{await Se.disconnectSlack(),Q(!1),G(""),A([]),V([]),re([]),st("Slack disconnected successfully"),$.includes("slack")&&await Mu("slack")}catch(Ue){alert(((Me=(Ee=Ue.response)==null?void 0:Ee.data)==null?void 0:Me.message)||"Failed to disconnect Slack")}finally{mi(!1)}}},Pu=Ee=>{const Me=ce.includes(Ee)?ce.filter(Ue=>Ue!==Ee):[...ce,Ee];re(Me)},Ts=async()=>{var Ee,Me;Ve(!0);try{await Se.updateSlackTargets(ce),st("Notification targets saved successfully"),setTimeout(()=>st(""),3e3)}catch(Ue){alert(((Me=(Ee=Ue.response)==null?void 0:Ee.data)==null?void 0:Me.message)||"Failed to save notification targets")}finally{Ve(!1)}},Fl=async()=>{try{await navigator.clipboard.writeText(l),g(!0),setTimeout(()=>g(!1),2e3)}catch{}},Os=async Ee=>{var Me,Ue;if(Ee.preventDefault(),!!E.trim()){k(!0);try{const yt=await Se.createAppPassword(i,E.trim());T(yt.data.password),w([...b,yt.data]),N("")}catch(yt){alert(((Ue=(Me=yt.response)==null?void 0:Me.data)==null?void 0:Ue.message)||"Failed to create app password")}finally{k(!1)}}},Ot=async(Ee,Me)=>{var Ue,yt;if(confirm(`Are you sure you want to revoke the app password "${Me}"? Any devices using this password will no longer be able to sync.`))try{await Se.deleteAppPassword(i,Ee),w(b.filter(mn=>mn.uuid!==Ee))}catch(mn){alert(((yt=(Ue=mn.response)==null?void 0:Ue.data)==null?void 0:yt.message)||"Failed to revoke app password")}},io=async()=>{try{await navigator.clipboard.writeText(j),O(!0),setTimeout(()=>O(!1),2e3)}catch{}},Iu=async Ee=>{try{await navigator.clipboard.writeText(Ee)}catch{}},Ru=Ee=>{if(!Ee)return"Never";const Me=new Date(Ee);return Me.toLocaleDateString("en-US",{month:"short",day:"numeric",year:Me.getFullYear()!==new Date().getFullYear()?"numeric":void 0})},b1=async()=>{if(confirm("Are you sure you want to regenerate your calendar URL? Any existing calendar subscriptions will stop working until you update them with the new URL.")){v(!0);try{const Ee=await ee.post("/prm/v1/user/regenerate-ical-token");u(Ee.data.url),h(Ee.data.webcal_url)}catch{}finally{v(!1)}}},Mu=async Ee=>{var Ue,yt;const Me=$.includes(Ee)?$.filter(mn=>mn!==Ee):[...$,Ee];kt(!0);try{await Se.updateNotificationChannels(Me),q(Me)}catch(mn){alert(((yt=(Ue=mn.response)==null?void 0:Ue.data)==null?void 0:yt.message)||"Failed to update notification channels")}finally{kt(!1)}},x1=async Ee=>{var oo,uf;const[Me,Ue]=Ee.split(":").map(Number),yt=Math.round(Ue/5)*5,mn=yt===60?(Me+1)%24:Me,S1=yt===60?0:yt,so=`${String(mn).padStart(2,"0")}:${String(S1).padStart(2,"0")}`;ke(so),Ye(!0);try{await Se.updateNotificationTime(so)}catch(E1){alert(((uf=(oo=E1.response)==null?void 0:oo.data)==null?void 0:uf.message)||"Failed to update notification time");const _1=await Se.getNotificationChannels();ke(_1.data.notification_time||"09:00")}finally{Ye(!1)}},_g=async Ee=>{var Ue,yt;en(!0);const Me=be;$e(Ee);try{await Se.updateMentionNotifications(Ee)}catch(mn){alert(((yt=(Ue=mn.response)==null?void 0:Ue.data)==null?void 0:yt.message)||"Failed to update mention notification preference"),$e(Me)}finally{en(!1)}},w1=async()=>{var Ee,Me;if(confirm("This will send reminder emails for all reminders due today. Continue?")){K(!0),Z("");try{const Ue=await Se.triggerReminders();Z(Ue.data.message||"Reminders triggered successfully.")}catch(Ue){Z(((Me=(Ee=Ue.response)==null?void 0:Ee.data)==null?void 0:Me.message)||"Failed to trigger reminders. Please check server logs.")}finally{K(!1)}}},Ng=async()=>{var Ee,Me;if(confirm("This will reschedule all user reminder cron jobs based on their notification time preferences. Continue?")){we(!0),rn("");try{const Ue=await Se.rescheduleCronJobs();rn(Ue.data.message||"Cron jobs rescheduled successfully.")}catch(Ue){rn(((Me=(Ee=Ue.response)==null?void 0:Ee.data)==null?void 0:Me.message)||"Failed to reschedule cron jobs. Please check server logs.")}finally{we(!1)}}},cf=()=>{switch(s){case"sync":return c.jsx(tke,{icalUrl:l,webcalUrl:d,icalLoading:f,icalCopied:m,copyIcalUrl:Fl,regenerateIcalToken:b1,regenerating:y,appPasswords:b,appPasswordsLoading:x,carddavUrls:D,config:r,newPasswordName:E,setNewPasswordName:N,handleCreateAppPassword:Os,creatingPassword:_,newPassword:j,setNewPassword:T,copyNewPassword:io,passwordCopied:P,handleDeleteAppPassword:Ot,formatDate:Ru,copyCarddavUrl:Iu});case"notifications":return c.jsx(rke,{notificationsLoading:Ie,notificationChannels:$,toggleChannel:Mu,savingChannels:Ct,slackConnected:X,slackWorkspaceName:le,handleConnectSlack:ks,handleDisconnectSlack:js,disconnectingSlack:vr,webhookTestMessage:Pr,slackChannels:tn,slackUsers:L,slackTargets:ce,loadingSlackData:ne,handleToggleSlackTarget:Pu,handleSaveSlackTargets:Ts,savingSlackTargets:Le,slackWebhook:M,notificationTime:se,handleNotificationTimeChange:x1,savingTime:er,mentionNotifications:be,handleMentionNotificationsChange:_g,savingMentionPref:yr});case"data":return c.jsx(nke,{});case"admin":return n?c.jsx(ike,{handleTriggerReminders:w1,triggeringReminders:U,reminderMessage:z,handleRescheduleCron:Ng,reschedulingCron:pe,cronMessage:We}):null;case"about":return c.jsx(ske,{config:r});default:return null}};return c.jsxs("div",{className:"max-w-3xl mx-auto",children:[c.jsx("div",{className:"border-b border-gray-200 mb-6",children:c.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:a.map(Ee=>{const Me=Ee.icon,Ue=s===Ee.id;return c.jsxs("button",{onClick:()=>o(Ee.id),className:`
                  flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap
                  ${Ue?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                `,children:[c.jsx(Me,{className:"w-4 h-4"}),Ee.label]},Ee.id)})})}),c.jsx("div",{className:"space-y-6",children:cf()})]})}function tke({icalUrl:t,webcalUrl:e,icalLoading:r,icalCopied:n,copyIcalUrl:i,regenerateIcalToken:s,regenerating:o,appPasswords:a,appPasswordsLoading:l,carddavUrls:u,config:d,newPasswordName:h,setNewPasswordName:f,handleCreateAppPassword:p,creatingPassword:m,newPassword:g,setNewPassword:y,copyNewPassword:v,passwordCopied:b,handleDeleteAppPassword:w,formatDate:x,copyCarddavUrl:S}){return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Calendar subscription"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Subscribe to your important dates in any calendar app (Apple Calendar, Google Calendar, Outlook, etc.)"}),r?c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),c.jsx("div",{className:"h-9 bg-gray-200 rounded w-24"})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label mb-1",children:"Your calendar feed URL"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",readOnly:!0,value:t,className:"input flex-1 text-sm font-mono bg-gray-50",onClick:E=>E.target.select()}),c.jsx("button",{onClick:i,className:"btn-secondary whitespace-nowrap",title:"Copy URL",children:n?c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied"]}):c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),"Copy"]})})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("a",{href:e,className:"btn-primary",children:c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Subscribe in calendar app"]})}),c.jsx("button",{onClick:s,disabled:o,className:"btn-secondary",children:o?"Regenerating...":"Regenerate URL"})]}),c.jsx("p",{className:"text-xs text-gray-500",children:'Keep this URL private. Anyone with access to it can see your important dates. If you think it has been compromised, click "Regenerate URL" to get a new one.'})]})]}),c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"CardDAV sync"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Sync your contacts with apps like Apple Contacts, Android Contacts, or Thunderbird using CardDAV."}),l?c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),c.jsx("div",{className:"h-24 bg-gray-200 rounded"})]}):c.jsxs("div",{className:"space-y-4",children:[u&&c.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-3",children:[c.jsx("h3",{className:"font-medium text-sm",children:"Connection details"}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-gray-500",children:"Server URL (for most apps)"}),c.jsxs("div",{className:"flex gap-2 mt-1",children:[c.jsx("input",{type:"text",readOnly:!0,value:u.addressbook,className:"input flex-1 text-xs font-mono bg-white",onClick:E=>E.target.select()}),c.jsx("button",{onClick:()=>S(u.addressbook),className:"btn-secondary text-xs px-2",title:"Copy URL",children:"Copy"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-gray-500",children:"Username"}),c.jsxs("div",{className:"flex gap-2 mt-1",children:[c.jsx("input",{type:"text",readOnly:!0,value:d.userLogin||"",className:"input flex-1 text-xs font-mono bg-white",onClick:E=>E.target.select()}),c.jsx("button",{onClick:()=>S(d.userLogin),className:"btn-secondary text-xs px-2",title:"Copy username",children:"Copy"})]})]}),c.jsx("p",{className:"text-xs text-gray-500",children:"Use one of the app passwords below instead of your regular password."})]}),c.jsxs("form",{onSubmit:p,className:"flex gap-2",children:[c.jsx("input",{type:"text",value:h,onChange:E=>f(E.target.value),placeholder:"Password name (e.g., iPhone Contacts)",className:"input flex-1",disabled:m}),c.jsx("button",{type:"submit",disabled:m||!h.trim(),className:"btn-primary whitespace-nowrap",children:m?"Creating...":"Create password"})]}),g&&c.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[c.jsx("p",{className:"text-sm text-green-800 font-medium mb-2",children:"Your new app password (copy it now, it won't be shown again):"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",readOnly:!0,value:g,className:"input flex-1 font-mono text-sm bg-white",onClick:E=>E.target.select()}),c.jsx("button",{onClick:v,className:"btn-primary whitespace-nowrap",children:b?"Copied!":"Copy"})]}),c.jsx("button",{onClick:()=>y(null),className:"text-xs text-green-700 mt-2 hover:underline",children:"I've saved this password, hide it"})]}),a.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium mb-2",children:"Your app passwords"}),c.jsx("div",{className:"space-y-2",children:a.map(E=>c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-sm",children:E.name}),c.jsxs("p",{className:"text-xs text-gray-500",children:["Created ",x(E.created),"  Last used ",x(E.last_used)]})]}),c.jsx("button",{onClick:()=>w(E.uuid,E.name),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Revoke"})]},E.uuid))})]}),a.length===0&&!g&&c.jsx("p",{className:"text-sm text-gray-500",children:"No app passwords yet. Create one to start syncing your contacts."})]})]})]})}function rke({notificationsLoading:t,notificationChannels:e,toggleChannel:r,savingChannels:n,slackConnected:i,slackWorkspaceName:s,handleConnectSlack:o,handleDisconnectSlack:a,disconnectingSlack:l,webhookTestMessage:u,slackChannels:d,slackUsers:h,slackTargets:f,loadingSlackData:p,handleToggleSlackTarget:m,handleSaveSlackTargets:g,savingSlackTargets:y,slackWebhook:v,notificationTime:b,handleNotificationTimeChange:w,savingTime:x,mentionNotifications:S,handleMentionNotificationsChange:E,savingMentionPref:N}){return c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Notifications"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose how you want to receive daily reminders about your important dates."}),t?c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),c.jsx("div",{className:"h-10 bg-gray-200 rounded"})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:"Email"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Receive daily digest emails"})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:e.includes("email"),onChange:()=>r("email"),disabled:n,className:"sr-only peer"}),c.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:"Slack"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Receive notifications in Slack"})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:e.includes("slack"),onChange:()=>r("slack"),disabled:n||!i,className:"sr-only peer"}),c.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),c.jsx("div",{children:i?c.jsxs("div",{className:"space-y-3",children:[c.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-green-900",children:"Connected to Slack"}),s&&c.jsxs("p",{className:"text-sm text-green-700",children:["Workspace: ",s]})]}),c.jsx("button",{onClick:a,disabled:l,className:"btn-secondary text-sm",children:l?"Disconnecting...":"Disconnect"})]})}),u&&c.jsx("p",{className:`text-sm ${u.includes("successfully")||u.includes("disconnected")?"text-green-600":"text-red-600"}`,children:u}),e.includes("slack")&&c.jsxs("div",{className:"mt-4 p-4 border border-gray-200 rounded-lg",children:[c.jsx("h3",{className:"font-medium mb-3",children:"Notification targets"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose where to send Slack notifications. You can select multiple channels and users."}),p?c.jsx("p",{className:"text-sm text-gray-500",children:"Loading channels and users..."}):c.jsxs(c.Fragment,{children:[d.length>0&&c.jsxs("div",{className:"mb-4",children:[c.jsx("h4",{className:"text-sm font-medium mb-2",children:"Channels"}),c.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:d.map(_=>c.jsxs("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:f.includes(_.id),onChange:()=>m(_.id),className:"mr-2 cursor-pointer"}),c.jsx("span",{className:"text-sm",children:_.name})]},_.id))})]}),h.length>0&&c.jsxs("div",{className:"mb-4",children:[c.jsx("h4",{className:"text-sm font-medium mb-2",children:"Direct messages"}),c.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:h.map(_=>c.jsxs("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:f.includes(_.id),onChange:()=>m(_.id),className:"mr-2 cursor-pointer"}),c.jsxs("span",{className:"text-sm",children:[_.name,_.is_me&&c.jsx("span",{className:"text-gray-500 ml-1",children:"(you)"})]})]},_.id))})]}),d.length===0&&h.length===0&&!p&&c.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"No channels or users found. Make sure the Slack app has the necessary permissions."}),c.jsx("button",{onClick:g,disabled:y,className:"btn-primary text-sm mt-4",children:y?"Saving...":"Save targets"})]})]})]}):c.jsxs("div",{className:"space-y-3",children:[c.jsx("button",{onClick:o,className:"btn-primary w-full",disabled:l,children:"Connect Slack"}),u&&c.jsx("p",{className:`text-sm ${u.includes("successfully")?"text-green-600":"text-red-600"}`,children:u}),c.jsx("p",{className:"text-xs text-gray-500",children:"Connect your Slack workspace to receive daily reminder notifications. You'll be able to message channels or receive direct messages."})]})}),v&&!i&&c.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:c.jsxs("p",{className:"text-sm text-yellow-800",children:[c.jsx("strong",{children:"Legacy webhook detected."})," Please connect via OAuth for better functionality. Your webhook will continue to work until you connect via OAuth."]})}),c.jsxs("div",{children:[c.jsx("label",{className:"label mb-1",children:"Notification time (UTC)"}),c.jsx("input",{type:"time",value:b,onChange:_=>w(_.target.value),className:"input",disabled:x,step:"300"}),b&&c.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm",children:[c.jsxs("p",{className:"text-gray-700",children:[c.jsx("span",{className:"font-medium",children:"UTC:"})," ",b]}),c.jsxs("p",{className:"text-gray-700 mt-1",children:[c.jsxs("span",{className:"font-medium",children:["Your time (",Intl.DateTimeFormat().resolvedOptions().timeZone,"):"]})," ",(()=>{try{const[_,k]=b.split(":"),j=new Date;return j.setUTCHours(parseInt(_),parseInt(k),0,0),j.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}catch{return b}})()]})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose the UTC time when you want to receive your daily reminder digest. Reminders are sent within a 1-hour window of your selected time."})]}),c.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mention notifications"}),c.jsxs("select",{value:S,onChange:_=>E(_.target.value),className:"input",disabled:N,children:[c.jsx("option",{value:"digest",children:"Include in daily digest (default)"}),c.jsx("option",{value:"immediate",children:"Send immediately"}),c.jsx("option",{value:"never",children:"Don't notify me"})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose when to receive notifications when someone @mentions you in a note."})]})]})]})}const ZF=[{id:"vcard",name:"vCard",description:"Apple Contacts, Outlook, Android",icon:Im,component:QCe},{id:"google",name:"Google Contacts",description:"CSV export from Google",icon:cA,component:XCe},{id:"monica",name:"Monica CRM",description:"SQL export from Monica",icon:ene,component:YCe}];function nke(){var i;const[t,e]=C.useState("vcard"),r=s=>{s==="vcard"?window.location.href="/wp-json/prm/v1/export/vcard":s==="google-csv"&&(window.location.href="/wp-json/prm/v1/export/google-csv")},n=(i=ZF.find(s=>s.id===t))==null?void 0:i.component;return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Import data"}),c.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Import your contacts from various sources. Existing contacts with matching names will be updated instead of duplicated."}),c.jsx("div",{className:"border-b border-gray-200 mb-6",children:c.jsx("nav",{className:"-mb-px flex space-x-6","aria-label":"Import types",children:ZF.map(s=>{const o=s.icon,a=t===s.id;return c.jsxs("button",{onClick:()=>e(s.id),className:`group inline-flex items-center py-3 px-1 border-b-2 font-medium text-sm transition-colors ${a?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[c.jsx(o,{className:`mr-2 h-5 w-5 ${a?"text-primary-500":"text-gray-400 group-hover:text-gray-500"}`}),c.jsxs("div",{className:"text-left",children:[c.jsx("span",{className:"block",children:s.name}),c.jsx("span",{className:`block text-xs font-normal ${a?"text-primary-400":"text-gray-400"}`,children:s.description})]})]},s.id)})})}),n&&c.jsx(n,{})]}),c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Export data"}),c.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Export all your contacts in a format compatible with other contact management systems."}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("button",{onClick:()=>r("vcard"),className:"w-full p-4 rounded-lg border border-gray-200 hover:bg-gray-50 text-left flex items-center gap-4",children:[c.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:c.jsx(Im,{className:"w-6 h-6 text-primary-600"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium",children:"Export as vCard (.vcf)"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Compatible with Apple Contacts, Outlook, Android, and most contact apps"})]}),c.jsx(GI,{className:"w-5 h-5 text-gray-400"})]}),c.jsxs("button",{onClick:()=>r("google-csv"),className:"w-full p-4 rounded-lg border border-gray-200 hover:bg-gray-50 text-left flex items-center gap-4",children:[c.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:c.jsx(cA,{className:"w-6 h-6 text-primary-600"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium",children:"Export as Google Contacts CSV"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Import directly into Google Contacts or other CSV-compatible systems"})]}),c.jsx(GI,{className:"w-5 h-5 text-gray-400"})]})]})]})]})}function ike({handleTriggerReminders:t,triggeringReminders:e,reminderMessage:r,handleRescheduleCron:n,reschedulingCron:i,cronMessage:s}){return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"User management"}),c.jsx("div",{className:"space-y-3",children:c.jsxs(qe,{to:"/settings/user-approval",className:"block p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors",children:[c.jsx("p",{className:"font-medium",children:"User approval"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Approve or deny access for new users"})]})})]}),c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Configuration"}),c.jsx("div",{className:"space-y-3",children:c.jsxs(qe,{to:"/settings/relationship-types",className:"block p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors",children:[c.jsx("p",{className:"font-medium",children:"Relationship types"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Manage relationship types and their inverse mappings"})]})})]}),c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"System actions"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("button",{onClick:t,disabled:e,className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx("p",{className:"font-medium",children:"Trigger reminders"}),c.jsx("p",{className:"text-sm text-gray-500",children:e?"Sending...":"Manually send reminders for today"}),r&&c.jsx("p",{className:"text-sm text-green-600 mt-1",children:r})]}),c.jsxs("button",{onClick:n,disabled:i,className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx("p",{className:"font-medium",children:"Reschedule cron jobs"}),c.jsx("p",{className:"text-sm text-gray-500",children:i?"Rescheduling...":"Reschedule all user reminder cron jobs"}),s&&c.jsx("p",{className:"text-sm text-green-600 mt-1",children:s})]})]})]})]})}function ske({config:t}){return c.jsxs("div",{className:"card p-6",children:[c.jsxs("h2",{className:"text-lg font-semibold mb-4",children:["About ",Vc]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{children:c.jsxs("p",{className:"text-sm text-gray-600",children:["Version ",t.version||"1.0.0"]})}),c.jsx("div",{className:"pt-4 border-t border-gray-200",children:c.jsxs("p",{className:"text-sm text-gray-600",children:[Vc," is a personal CRM system that helps you manage your contacts, track important dates, and maintain meaningful relationships."]})}),c.jsx("div",{className:"pt-4 border-t border-gray-200",children:c.jsx("p",{className:"text-sm text-gray-500",children:"Built with WordPress, React, and Tailwind CSS."})})]})]})}function eq({value:t,onChange:e,relationshipTypes:r,currentTypeId:n=null}){const[i,s]=C.useState(""),[o,a]=C.useState(!1),l=C.useRef(null),u=C.useRef(null),d=C.useMemo(()=>r.sort((y,v)=>{const b=(y.name||"").toLowerCase(),w=(v.name||"").toLowerCase();return b<w?-1:b>w?1:0}),[r]),h=C.useMemo(()=>{if(!i)return d.slice(0,10);const y=i.toLowerCase();return d.filter(v=>(v.name||"").toLowerCase().includes(y)).slice(0,10)},[d,i]),f=C.useMemo(()=>d.find(y=>y.id===parseInt(t,10)),[d,t]);C.useEffect(()=>{const y=v=>{u.current&&!u.current.contains(v.target)&&l.current&&!l.current.contains(v.target)&&a(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const p=y=>{e(y?y.toString():""),s(""),a(!1)},m=()=>{e(""),s(""),a(!1)},g=f?f.name:"";return c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"relative",children:f&&!o?c.jsxs("div",{className:"flex items-center justify-between input pr-8 cursor-text",onClick:()=>a(!0),children:[c.jsx("span",{children:g}),c.jsx("button",{type:"button",onClick:y=>{y.stopPropagation(),m()},className:"absolute right-2 text-gray-400 hover:text-gray-600",children:c.jsx(ht,{className:"w-4 h-4"})})]}):c.jsx("input",{ref:l,type:"text",value:i,onChange:y=>{s(y.target.value),a(!0)},onFocus:()=>a(!0),placeholder:"Search for a relationship type...",className:"input"})}),o&&(i||!f)&&c.jsx("div",{ref:u,className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:h.length>0?c.jsxs(c.Fragment,{children:[c.jsx("button",{type:"button",onClick:()=>p(null),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t?"":"bg-primary-50"}`,children:c.jsx("span",{className:"text-gray-500 italic",children:"None (no inverse)"})}),h.map(y=>c.jsx("button",{type:"button",onClick:()=>p(y.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t===y.id.toString()?"bg-primary-50":""}`,children:y.name},y.id))]}):c.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No relationship types found"})})]})}function oke(){Ih("Relationship Types - Settings");const t=tt();if(!((window.prmConfig||{}).isAdmin||!1))return c.jsx("div",{className:"max-w-2xl mx-auto",children:c.jsxs("div",{className:"card p-8 text-center",children:[c.jsx(one,{className:"w-16 h-16 mx-auto text-amber-500 mb-4"}),c.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to manage relationship types. This feature is only available to administrators."}),c.jsx(qe,{to:"/settings",className:"btn-primary",children:"Back to Settings"})]})});const{data:n=[],isLoading:i}=at({queryKey:["relationship-types"],queryFn:async()=>(await et.getRelationshipTypes()).data}),[s,o]=C.useState(null),[a,l]=C.useState(""),[u,d]=C.useState(""),[h,f]=C.useState(""),[p,m]=C.useState(""),[g,y]=C.useState(!1),v=He({mutationFn:async({id:T,name:P,inverseId:O})=>{const D={name:P};return O&&(D.acf={inverse_relationship_type:parseInt(O,10)}),et.updateRelationshipType(T,D)},onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),o(null),l(""),d("")}}),b=He({mutationFn:async({name:T,inverseId:P})=>{const O={name:T};return P&&(O.acf={inverse_relationship_type:parseInt(P,10)}),et.createRelationshipType(O)},onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),f(""),m(""),y(!1)}}),w=He({mutationFn:T=>et.deleteRelationshipType(T),onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]})}}),x=He({mutationFn:()=>et.restoreRelationshipTypeDefaults(),onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),alert("Default relationship type configurations have been restored.")},onError:()=>{alert("Failed to restore defaults. Please try again.")}});function S(){return c.jsxs("button",{onClick:()=>{window.confirm("This will restore all default inverse mappings and gender-dependent settings. Continue?")&&x.mutate()},disabled:x.isPending,className:"btn-secondary flex items-center gap-2",title:"Restore default inverse mappings and gender-dependent settings",children:[x.isPending?c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600"}):c.jsx(sne,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden md:inline",children:"Restore Defaults"})]})}const E=T=>{var O;o(T.id),l(T.name);const P=(O=T.acf)==null?void 0:O.inverse_relationship_type;d(P?P.toString():"")},N=()=>{o(null),l(""),d("")},_=()=>{if(!a.trim()){alert("Name is required");return}v.mutate({id:s,name:a.trim(),inverseId:u||null})},k=()=>{if(!h.trim()){alert("Name is required");return}b.mutate({name:h.trim(),inverseId:p||null})},j=(T,P)=>{window.confirm(`Are you sure you want to delete "${P}"? This cannot be undone.`)&&w.mutate(T)};return i?c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):c.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:c.jsxs("div",{className:"card p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h1",{className:"text-2xl font-bold",children:"Relationship Types"}),c.jsx("div",{className:"flex gap-2",children:!g&&c.jsxs(c.Fragment,{children:[c.jsx(S,{}),c.jsxs("button",{onClick:()=>y(!0),className:"btn-primary flex items-center gap-2",children:[c.jsx(lr,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden md:inline",children:"Add Relationship Type"})]})]})})]}),g&&c.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[c.jsx("h3",{className:"font-semibold mb-4",children:"Add New Relationship Type"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Name *"}),c.jsx("input",{type:"text",value:h,onChange:T=>f(T.target.value),className:"input",placeholder:"e.g., Parent, Spouse, Colleague"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Inverse Relationship Type"}),c.jsx(eq,{value:p,onChange:m,relationshipTypes:n}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Select the inverse relationship type. For example, if this is "Parent", select "Child". If this is "Spouse" or "Acquaintance", select the same type (e.g., "Spouse"  "Spouse").'})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:k,disabled:b.isPending,className:"btn-primary flex items-center gap-2",children:[b.isPending?c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):c.jsx(Q5,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden md:inline",children:"Save"})]}),c.jsx("button",{onClick:()=>{y(!1),f(""),m("")},className:"btn-secondary",children:"Cancel"})]})]})]}),c.jsx("div",{className:"space-y-2",children:n.length===0?c.jsx("p",{className:"text-gray-500 text-center py-8",children:"No relationship types found."}):n.map(T=>{var $,q;const P=s===T.id,O=($=T.acf)==null?void 0:$.inverse_relationship_type,D=typeof O=="object"&&(O!=null&&O.ID)?O.ID:typeof O=="object"&&(O!=null&&O.id)?O.id:O,F=D?n.find(M=>M.id===D):null;return c.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:P?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Name *"}),c.jsx("input",{type:"text",value:a,onChange:M=>l(M.target.value),className:"input"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"label",children:"Inverse Relationship Type"}),c.jsx(eq,{value:u,onChange:d,relationshipTypes:n,currentTypeId:T.id}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Select the inverse relationship type. For example, if this is "Parent", select "Child". If this is "Spouse" or "Acquaintance", select the same type (e.g., "Spouse"  "Spouse").'})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:_,disabled:v.isPending,className:"btn-primary flex items-center gap-2",children:[v.isPending?c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):c.jsx(Q5,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden md:inline",children:"Save"})]}),c.jsxs("button",{onClick:N,className:"btn-secondary flex items-center gap-2",children:[c.jsx(ht,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden md:inline",children:"Cancel"})]})]})]}):c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-medium",children:T.name}),F&&c.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Inverse: ",c.jsx("span",{className:"font-medium",children:F.name})]}),!F&&((q=T.acf)==null?void 0:q.inverse_relationship_type)===null&&c.jsx("div",{className:"text-sm text-gray-400 mt-1 italic",children:"No inverse relationship"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>E(T),className:"p-2 text-gray-600 hover:text-primary-600 hover:bg-primary-50 rounded",title:"Edit",children:c.jsx(kge,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>j(T.id,T.name),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded",title:"Delete",children:c.jsx(Sn,{className:"w-4 h-4"})})]})]})},T.id)})})]})})}function ake(){Ih("User Approval - Settings");const t=tt();if(!((window.prmConfig||{}).isAdmin||!1))return c.jsx("div",{className:"max-w-2xl mx-auto",children:c.jsxs("div",{className:"card p-8 text-center",children:[c.jsx(one,{className:"w-16 h-16 mx-auto text-amber-500 mb-4"}),c.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to manage user approvals. This feature is only available to administrators."}),c.jsx(qe,{to:"/settings",className:"btn-primary",children:"Back to Settings"})]})});const{data:n=[],isLoading:i}=at({queryKey:["users"],queryFn:async()=>(await Se.getUsers()).data}),s=He({mutationFn:p=>Se.approveUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),o=He({mutationFn:p=>Se.denyUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),a=He({mutationFn:p=>Se.deleteUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),l=p=>{window.confirm("Are you sure you want to approve this user?")&&s.mutate(p)},u=p=>{window.confirm("Are you sure you want to deny this user? They will not be able to access the system.")&&o.mutate(p)},d=(p,m)=>{window.confirm(`Are you sure you want to delete ${m}? This will permanently delete their account and all their related data (people, organizations, dates). This action cannot be undone.`)&&a.mutate(p)};if(i)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx(Yo,{className:"w-8 h-8 animate-spin text-primary-600"})});const h=n.filter(p=>!p.is_approved),f=n.filter(p=>p.is_approved);return c.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs(qe,{to:"/settings",className:"btn-secondary flex items-center gap-2",children:[c.jsx(Ph,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden md:inline",children:"Back to Settings"})]}),c.jsx("h1",{className:"text-2xl font-semibold",children:"User Approval"})]}),c.jsxs("div",{className:"space-y-6",children:[h.length>0&&c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Pending Approval"}),c.jsx("div",{className:"space-y-3",children:h.map(p=>c.jsxs("div",{className:"card p-4 flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:p.name}),c.jsx("p",{className:"text-sm text-gray-500",children:p.email}),c.jsxs("p",{className:"text-xs text-gray-400",children:["Registered: ",new Date(p.registered).toLocaleDateString()]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>l(p.id),disabled:s.isPending||a.isPending,className:"btn-primary flex items-center gap-2",children:[c.jsx(G5,{className:"w-4 h-4"}),"Approve"]}),c.jsxs("button",{onClick:()=>u(p.id),disabled:o.isPending||a.isPending,className:"btn-secondary flex items-center gap-2",children:[c.jsx(YI,{className:"w-4 h-4"}),"Deny"]}),c.jsxs("button",{onClick:()=>d(p.id,p.name),disabled:s.isPending||o.isPending||a.isPending,className:"btn-danger flex items-center gap-2",children:[c.jsx(Sn,{className:"w-4 h-4"}),"Delete"]})]})]},p.id))})]}),f.length>0&&c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Approved Users"}),c.jsx("div",{className:"space-y-3",children:f.map(p=>c.jsxs("div",{className:"card p-4 flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-medium flex items-center gap-2",children:[p.name,c.jsx(G5,{className:"w-4 h-4 text-green-600"})]}),c.jsx("p",{className:"text-sm text-gray-500",children:p.email})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>u(p.id),disabled:o.isPending||a.isPending,className:"btn-secondary flex items-center gap-2",children:[c.jsx(YI,{className:"w-4 h-4"}),"Revoke Access"]}),c.jsxs("button",{onClick:()=>d(p.id,p.name),disabled:o.isPending||a.isPending,className:"btn-danger flex items-center gap-2",children:[c.jsx(Sn,{className:"w-4 h-4"}),"Delete"]})]})]},p.id))})]}),n.length===0&&c.jsx("div",{className:"card p-8 text-center",children:c.jsx("p",{className:"text-gray-600",children:"No Caelis users found."})})]})]})}/**
 * vis-data
 * http://visjs.org/
 *
 * Manage unstructured data using DataSet. Add, update, and remove data, and listen for changes in the data.
 *
 * @version 8.0.3
 * @date    2025-09-10T16:22:00.613Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var tq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Xx={exports:{}},rq={},If,nq;function kr(){if(nq)return If;nq=1;var t=function(e){return e&&e.Math===Math&&e};return If=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof tq=="object"&&tq)||t(typeof If=="object"&&If)||function(){return this}()||Function("return this")(),If}var Jx,iq;function Et(){return iq||(iq=1,Jx=function(t){try{return!!t()}catch{return!0}}),Jx}var Zx,sq;function zm(){if(sq)return Zx;sq=1;var t=Et();return Zx=!t(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),Zx}var ew,oq;function Fb(){if(oq)return ew;oq=1;var t=zm(),e=Function.prototype,r=e.apply,n=e.call;return ew=typeof Reflect=="object"&&Reflect.apply||(t?n.bind(r):function(){return n.apply(r,arguments)}),ew}var tw,aq;function Rt(){if(aq)return tw;aq=1;var t=zm(),e=Function.prototype,r=e.call,n=t&&e.bind.bind(r,r);return tw=t?n:function(i){return function(){return r.apply(i,arguments)}},tw}var rw,lq;function ra(){if(lq)return rw;lq=1;var t=Rt(),e=t({}.toString),r=t("".slice);return rw=function(n){return r(e(n),8,-1)},rw}var nw,cq;function Qoe(){if(cq)return nw;cq=1;var t=ra(),e=Rt();return nw=function(r){if(t(r)==="Function")return e(r)},nw}var iw,uq;function Gr(){if(uq)return iw;uq=1;var t=typeof document=="object"&&document.all;return iw=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"},iw}var sw={},ow,dq;function jr(){if(dq)return ow;dq=1;var t=Et();return ow=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),ow}var aw,hq;function hi(){if(hq)return aw;hq=1;var t=zm(),e=Function.prototype.call;return aw=t?e.bind(e):function(){return e.apply(e,arguments)},aw}var lw={},fq;function gD(){if(fq)return lw;fq=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,r=e&&!t.call({1:2},1);return lw.f=r?function(i){var s=e(this,i);return!!s&&s.enumerable}:t,lw}var cw,pq;function Wm(){return pq||(pq=1,cw=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}),cw}var uw,mq;function qb(){if(mq)return uw;mq=1;var t=Rt(),e=Et(),r=ra(),n=Object,i=t("".split);return uw=e(function(){return!n("z").propertyIsEnumerable(0)})?function(s){return r(s)==="String"?i(s,""):n(s)}:n,uw}var dw,gq;function Vm(){return gq||(gq=1,dw=function(t){return t==null}),dw}var hw,yq;function hu(){if(yq)return hw;yq=1;var t=Vm(),e=TypeError;return hw=function(r){if(t(r))throw new e("Can't call method on "+r);return r},hw}var fw,vq;function to(){if(vq)return fw;vq=1;var t=qb(),e=hu();return fw=function(r){return t(e(r))},fw}var pw,bq;function Hn(){if(bq)return pw;bq=1;var t=Gr();return pw=function(e){return typeof e=="object"?e!==null:t(e)},pw}var mw,xq;function qr(){return xq||(xq=1,mw={}),mw}var gw,wq;function ji(){if(wq)return gw;wq=1;var t=qr(),e=kr(),r=Gr(),n=function(i){return r(i)?i:void 0};return gw=function(i,s){return arguments.length<2?n(t[i])||n(e[i]):t[i]&&t[i][s]||e[i]&&e[i][s]},gw}var yw,Sq;function Yr(){if(Sq)return yw;Sq=1;var t=Rt();return yw=t({}.isPrototypeOf),yw}var vw,Eq;function Ah(){if(Eq)return vw;Eq=1;var t=kr(),e=t.navigator,r=e&&e.userAgent;return vw=r?String(r):"",vw}var bw,_q;function Um(){if(_q)return bw;_q=1;var t=kr(),e=Ah(),r=t.process,n=t.Deno,i=r&&r.versions||n&&n.version,s=i&&i.v8,o,a;return s&&(o=s.split("."),a=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!a&&e&&(o=e.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=e.match(/Chrome\/(\d+)/),o&&(a=+o[1]))),bw=a,bw}var xw,Nq;function Dh(){if(Nq)return xw;Nq=1;var t=Um(),e=Et(),r=kr(),n=r.String;return xw=!!Object.getOwnPropertySymbols&&!e(function(){var i=Symbol("symbol detection");return!n(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&t&&t<41}),xw}var ww,Cq;function Xoe(){if(Cq)return ww;Cq=1;var t=Dh();return ww=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol",ww}var Sw,kq;function Hm(){if(kq)return Sw;kq=1;var t=ji(),e=Gr(),r=Yr(),n=Xoe(),i=Object;return Sw=n?function(s){return typeof s=="symbol"}:function(s){var o=t("Symbol");return e(o)&&r(o.prototype,i(s))},Sw}var Ew,jq;function $h(){if(jq)return Ew;jq=1;var t=String;return Ew=function(e){try{return t(e)}catch{return"Object"}},Ew}var _w,Tq;function na(){if(Tq)return _w;Tq=1;var t=Gr(),e=$h(),r=TypeError;return _w=function(n){if(t(n))return n;throw new r(e(n)+" is not a function")},_w}var Nw,Oq;function yD(){if(Oq)return Nw;Oq=1;var t=na(),e=Vm();return Nw=function(r,n){var i=r[n];return e(i)?void 0:t(i)},Nw}var Cw,Pq;function lke(){if(Pq)return Cw;Pq=1;var t=hi(),e=Gr(),r=Hn(),n=TypeError;return Cw=function(i,s){var o,a;if(s==="string"&&e(o=i.toString)&&!r(a=t(o,i))||e(o=i.valueOf)&&!r(a=t(o,i))||s!=="string"&&e(o=i.toString)&&!r(a=t(o,i)))return a;throw new n("Can't convert object to primitive value")},Cw}var kw={exports:{}},jw,Iq;function Fh(){return Iq||(Iq=1,jw=!0),jw}var Tw,Rq;function cke(){if(Rq)return Tw;Rq=1;var t=kr(),e=Object.defineProperty;return Tw=function(r,n){try{e(t,r,{value:n,configurable:!0,writable:!0})}catch{t[r]=n}return n},Tw}var Mq;function vD(){if(Mq)return kw.exports;Mq=1;var t=Fh(),e=kr(),r=cke(),n="__core-js_shared__",i=kw.exports=e[n]||r(n,{});return(i.versions||(i.versions=[])).push({version:"3.44.0",mode:t?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),kw.exports}var Ow,Aq;function qh(){if(Aq)return Ow;Aq=1;var t=vD();return Ow=function(e,r){return t[e]||(t[e]=r||{})},Ow}var Pw,Dq;function Ns(){if(Dq)return Pw;Dq=1;var t=hu(),e=Object;return Pw=function(r){return e(t(r))},Pw}var Iw,$q;function Qr(){if($q)return Iw;$q=1;var t=Rt(),e=Ns(),r=t({}.hasOwnProperty);return Iw=Object.hasOwn||function(i,s){return r(e(i),s)},Iw}var Rw,Fq;function Lb(){if(Fq)return Rw;Fq=1;var t=Rt(),e=0,r=Math.random(),n=t(1.1.toString);return Rw=function(i){return"Symbol("+(i===void 0?"":i)+")_"+n(++e+r,36)},Rw}var Mw,qq;function Xr(){if(qq)return Mw;qq=1;var t=kr(),e=qh(),r=Qr(),n=Lb(),i=Dh(),s=Xoe(),o=t.Symbol,a=e("wks"),l=s?o.for||o:o&&o.withoutSetter||n;return Mw=function(u){return r(a,u)||(a[u]=i&&r(o,u)?o[u]:l("Symbol."+u)),a[u]},Mw}var Aw,Lq;function Joe(){if(Lq)return Aw;Lq=1;var t=hi(),e=Hn(),r=Hm(),n=yD(),i=lke(),s=Xr(),o=TypeError,a=s("toPrimitive");return Aw=function(l,u){if(!e(l)||r(l))return l;var d=n(l,a),h;if(d){if(u===void 0&&(u="default"),h=t(d,l,u),!e(h)||r(h))return h;throw new o("Can't convert object to primitive value")}return u===void 0&&(u="number"),i(l,u)},Aw}var Dw,Bq;function bD(){if(Bq)return Dw;Bq=1;var t=Joe(),e=Hm();return Dw=function(r){var n=t(r,"string");return e(n)?n:n+""},Dw}var $w,zq;function Zoe(){if(zq)return $w;zq=1;var t=kr(),e=Hn(),r=t.document,n=e(r)&&e(r.createElement);return $w=function(i){return n?r.createElement(i):{}},$w}var Fw,Wq;function eae(){if(Wq)return Fw;Wq=1;var t=jr(),e=Et(),r=Zoe();return Fw=!t&&!e(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7}),Fw}var Vq;function Bb(){if(Vq)return sw;Vq=1;var t=jr(),e=hi(),r=gD(),n=Wm(),i=to(),s=bD(),o=Qr(),a=eae(),l=Object.getOwnPropertyDescriptor;return sw.f=t?l:function(d,h){if(d=i(d),h=s(h),a)try{return l(d,h)}catch{}if(o(d,h))return n(!e(r.f,d,h),d[h])},sw}var qw,Uq;function uke(){if(Uq)return qw;Uq=1;var t=Et(),e=Gr(),r=/#|\.prototype\./,n=function(l,u){var d=s[i(l)];return d===a?!0:d===o?!1:e(u)?t(u):!!u},i=n.normalize=function(l){return String(l).replace(r,".").toLowerCase()},s=n.data={},o=n.NATIVE="N",a=n.POLYFILL="P";return qw=n,qw}var Lw,Hq;function zb(){if(Hq)return Lw;Hq=1;var t=Qoe(),e=na(),r=zm(),n=t(t.bind);return Lw=function(i,s){return e(i),s===void 0?i:r?n(i,s):function(){return i.apply(s,arguments)}},Lw}var Bw={},zw,Kq;function tae(){if(Kq)return zw;Kq=1;var t=jr(),e=Et();return zw=t&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),zw}var Ww,Gq;function ia(){if(Gq)return Ww;Gq=1;var t=Hn(),e=String,r=TypeError;return Ww=function(n){if(t(n))return n;throw new r(e(n)+" is not an object")},Ww}var Yq;function es(){if(Yq)return Bw;Yq=1;var t=jr(),e=eae(),r=tae(),n=ia(),i=bD(),s=TypeError,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l="enumerable",u="configurable",d="writable";return Bw.f=t?r?function(f,p,m){if(n(f),p=i(p),n(m),typeof f=="function"&&p==="prototype"&&"value"in m&&d in m&&!m[d]){var g=a(f,p);g&&g[d]&&(f[p]=m.value,m={configurable:u in m?m[u]:g[u],enumerable:l in m?m[l]:g[l],writable:!1})}return o(f,p,m)}:o:function(f,p,m){if(n(f),p=i(p),n(m),e)try{return o(f,p,m)}catch{}if("get"in m||"set"in m)throw new s("Accessors not supported");return"value"in m&&(f[p]=m.value),f},Bw}var Vw,Qq;function Lh(){if(Qq)return Vw;Qq=1;var t=jr(),e=es(),r=Wm();return Vw=t?function(n,i,s){return e.f(n,i,r(1,s))}:function(n,i,s){return n[i]=s,n},Vw}var Uw,Xq;function Ke(){if(Xq)return Uw;Xq=1;var t=kr(),e=Fb(),r=Qoe(),n=Gr(),i=Bb().f,s=uke(),o=qr(),a=zb(),l=Lh(),u=Qr(),d=function(h){var f=function(p,m,g){if(this instanceof f){switch(arguments.length){case 0:return new h;case 1:return new h(p);case 2:return new h(p,m)}return new h(p,m,g)}return e(h,this,arguments)};return f.prototype=h.prototype,f};return Uw=function(h,f){var p=h.target,m=h.global,g=h.stat,y=h.proto,v=m?t:g?t[p]:t[p]&&t[p].prototype,b=m?o:o[p]||l(o,p,{})[p],w=b.prototype,x,S,E,N,_,k,j,T,P;for(N in f)x=s(m?N:p+(g?".":"#")+N,h.forced),S=!x&&v&&u(v,N),k=b[N],S&&(h.dontCallGetSet?(P=i(v,N),j=P&&P.value):j=v[N]),_=S&&j?j:f[N],!(!x&&!y&&typeof k==typeof _)&&(h.bind&&S?T=a(_,t):h.wrap&&S?T=d(_):y&&n(_)?T=r(_):T=_,(h.sham||_&&_.sham||k&&k.sham)&&l(T,"sham",!0),l(b,N,T),y&&(E=p+"Prototype",u(o,E)||l(o,E,{}),l(o[E],N,_),h.real&&w&&(x||!w[N])&&l(w,N,_)))},Uw}var Jq;function dke(){if(Jq)return rq;Jq=1;var t=Ke(),e=jr(),r=es().f;return t({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!e},{defineProperty:r}),rq}var Zq;function hke(){if(Zq)return Xx.exports;Zq=1,dke();var t=qr(),e=t.Object,r=Xx.exports=function(i,s,o){return e.defineProperty(i,s,o)};return e.defineProperty.sham&&(r.sham=!0),Xx.exports}var Hw,eL;function rae(){if(eL)return Hw;eL=1;var t=hke();return Hw=t,Hw}var Kw,tL;function fke(){if(tL)return Kw;tL=1;var t=rae();return Kw=t,Kw}var Gw,rL;function pke(){if(rL)return Gw;rL=1;var t=fke();return Gw=t,Gw}var Yw,nL;function mke(){return nL||(nL=1,Yw=pke()),Yw}var gke=mke(),yke=lt(gke),iL={},Qw,sL;function fu(){if(sL)return Qw;sL=1;var t=ra();return Qw=Array.isArray||function(r){return t(r)==="Array"},Qw}var Xw,oL;function vke(){if(oL)return Xw;oL=1;var t=Math.ceil,e=Math.floor;return Xw=Math.trunc||function(n){var i=+n;return(i>0?e:t)(i)},Xw}var Jw,aL;function Bh(){if(aL)return Jw;aL=1;var t=vke();return Jw=function(e){var r=+e;return r!==r||r===0?0:t(r)},Jw}var Zw,lL;function nae(){if(lL)return Zw;lL=1;var t=Bh(),e=Math.min;return Zw=function(r){var n=t(r);return n>0?e(n,9007199254740991):0},Zw}var eS,cL;function Ol(){if(cL)return eS;cL=1;var t=nae();return eS=function(e){return t(e.length)},eS}var tS,uL;function iae(){if(uL)return tS;uL=1;var t=TypeError,e=9007199254740991;return tS=function(r){if(r>e)throw t("Maximum allowed index exceeded");return r},tS}var rS,dL;function Wb(){if(dL)return rS;dL=1;var t=jr(),e=es(),r=Wm();return rS=function(n,i,s){t?e.f(n,i,r(0,s)):n[i]=s},rS}var nS,hL;function xD(){if(hL)return nS;hL=1;var t=Xr(),e=t("toStringTag"),r={};return r[e]="z",nS=String(r)==="[object z]",nS}var iS,fL;function Pl(){if(fL)return iS;fL=1;var t=xD(),e=Gr(),r=ra(),n=Xr(),i=n("toStringTag"),s=Object,o=r(function(){return arguments}())==="Arguments",a=function(l,u){try{return l[u]}catch{}};return iS=t?r:function(l){var u,d,h;return l===void 0?"Undefined":l===null?"Null":typeof(d=a(u=s(l),i))=="string"?d:o?r(u):(h=r(u))==="Object"&&e(u.callee)?"Arguments":h},iS}var sS,pL;function bke(){if(pL)return sS;pL=1;var t=Rt(),e=Gr(),r=vD(),n=t(Function.toString);return e(r.inspectSource)||(r.inspectSource=function(i){return n(i)}),sS=r.inspectSource,sS}var oS,mL;function sae(){if(mL)return oS;mL=1;var t=Rt(),e=Et(),r=Gr(),n=Pl(),i=ji(),s=bke(),o=function(){},a=i("Reflect","construct"),l=/^\s*(?:class|function)\b/,u=t(l.exec),d=!l.test(o),h=function(m){if(!r(m))return!1;try{return a(o,[],m),!0}catch{return!1}},f=function(m){if(!r(m))return!1;switch(n(m)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!u(l,s(m))}catch{return!0}};return f.sham=!0,oS=!a||e(function(){var p;return h(h.call)||!h(Object)||!h(function(){p=!0})||p})?f:h,oS}var aS,gL;function xke(){if(gL)return aS;gL=1;var t=fu(),e=sae(),r=Hn(),n=Xr(),i=n("species"),s=Array;return aS=function(o){var a;return t(o)&&(a=o.constructor,e(a)&&(a===s||t(a.prototype))?a=void 0:r(a)&&(a=a[i],a===null&&(a=void 0))),a===void 0?s:a},aS}var lS,yL;function wD(){if(yL)return lS;yL=1;var t=xke();return lS=function(e,r){return new(t(e))(r===0?0:r)},lS}var cS,vL;function Km(){if(vL)return cS;vL=1;var t=Et(),e=Xr(),r=Um(),n=e("species");return cS=function(i){return r>=51||!t(function(){var s=[],o=s.constructor={};return o[n]=function(){return{foo:1}},s[i](Boolean).foo!==1})},cS}var bL;function oae(){if(bL)return iL;bL=1;var t=Ke(),e=Et(),r=fu(),n=Hn(),i=Ns(),s=Ol(),o=iae(),a=Wb(),l=wD(),u=Km(),d=Xr(),h=Um(),f=d("isConcatSpreadable"),p=h>=51||!e(function(){var y=[];return y[f]=!1,y.concat()[0]!==y}),m=function(y){if(!n(y))return!1;var v=y[f];return v!==void 0?!!v:r(y)},g=!p||!u("concat");return t({target:"Array",proto:!0,arity:1,forced:g},{concat:function(v){var b=i(this),w=l(b,0),x=0,S,E,N,_,k;for(S=-1,N=arguments.length;S<N;S++)if(k=S===-1?b:arguments[S],m(k))for(_=s(k),o(x+_),E=0;E<_;E++,x++)E in k&&a(w,x,k[E]);else o(x+1),a(w,x++,k);return w.length=x,w}}),iL}var xL={},wL={},uS,SL;function Il(){if(SL)return uS;SL=1;var t=Pl(),e=String;return uS=function(r){if(t(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(r)},uS}var dS={},hS,EL;function SD(){if(EL)return hS;EL=1;var t=Bh(),e=Math.max,r=Math.min;return hS=function(n,i){var s=t(n);return s<0?e(s+i,0):r(s,i)},hS}var fS,_L;function wke(){if(_L)return fS;_L=1;var t=to(),e=SD(),r=Ol(),n=function(i){return function(s,o,a){var l=t(s),u=r(l);if(u===0)return!i&&-1;var d=e(a,u),h;if(i&&o!==o){for(;u>d;)if(h=l[d++],h!==h)return!0}else for(;u>d;d++)if((i||d in l)&&l[d]===o)return i||d||0;return!i&&-1}};return fS={includes:n(!0),indexOf:n(!1)},fS}var pS,NL;function Gm(){return NL||(NL=1,pS={}),pS}var mS,CL;function aae(){if(CL)return mS;CL=1;var t=Rt(),e=Qr(),r=to(),n=wke().indexOf,i=Gm(),s=t([].push);return mS=function(o,a){var l=r(o),u=0,d=[],h;for(h in l)!e(i,h)&&e(l,h)&&s(d,h);for(;a.length>u;)e(l,h=a[u++])&&(~n(d,h)||s(d,h));return d},mS}var gS,kL;function ED(){return kL||(kL=1,gS=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),gS}var yS,jL;function Vb(){if(jL)return yS;jL=1;var t=aae(),e=ED();return yS=Object.keys||function(n){return t(n,e)},yS}var TL;function _D(){if(TL)return dS;TL=1;var t=jr(),e=tae(),r=es(),n=ia(),i=to(),s=Vb();return dS.f=t&&!e?Object.defineProperties:function(a,l){n(a);for(var u=i(l),d=s(l),h=d.length,f=0,p;h>f;)r.f(a,p=d[f++],u[p]);return a},dS}var vS,OL;function Ske(){if(OL)return vS;OL=1;var t=ji();return vS=t("document","documentElement"),vS}var bS,PL;function Ub(){if(PL)return bS;PL=1;var t=qh(),e=Lb(),r=t("keys");return bS=function(n){return r[n]||(r[n]=e(n))},bS}var xS,IL;function Ym(){if(IL)return xS;IL=1;var t=ia(),e=_D(),r=ED(),n=Gm(),i=Ske(),s=Zoe(),o=Ub(),a=">",l="<",u="prototype",d="script",h=o("IE_PROTO"),f=function(){},p=function(b){return l+d+a+b+l+"/"+d+a},m=function(b){b.write(p("")),b.close();var w=b.parentWindow.Object;return b=null,w},g=function(){var b=s("iframe"),w="java"+d+":",x;return b.style.display="none",i.appendChild(b),b.src=String(w),x=b.contentWindow.document,x.open(),x.write(p("document.F=Object")),x.close(),x.F},y,v=function(){try{y=new ActiveXObject("htmlfile")}catch{}v=typeof document<"u"?document.domain&&y?m(y):g():m(y);for(var b=r.length;b--;)delete v[u][r[b]];return v()};return n[h]=!0,xS=Object.create||function(w,x){var S;return w!==null?(f[u]=t(w),S=new f,f[u]=null,S[h]=w):S=v(),x===void 0?S:e.f(S,x)},xS}var wS={},RL;function Hb(){if(RL)return wS;RL=1;var t=aae(),e=ED(),r=e.concat("length","prototype");return wS.f=Object.getOwnPropertyNames||function(i){return t(i,r)},wS}var SS={},ES,ML;function zh(){if(ML)return ES;ML=1;var t=Rt();return ES=t([].slice),ES}var AL;function lae(){if(AL)return SS;AL=1;var t=ra(),e=to(),r=Hb().f,n=zh(),i=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(o){try{return r(o)}catch{return n(i)}};return SS.f=function(a){return i&&t(a)==="Window"?s(a):r(e(a))},SS}var _S={},DL;function Kb(){return DL||(DL=1,_S.f=Object.getOwnPropertySymbols),_S}var NS,$L;function Qm(){if($L)return NS;$L=1;var t=Lh();return NS=function(e,r,n,i){return i&&i.enumerable?e[r]=n:t(e,r,n),e},NS}var CS,FL;function ND(){if(FL)return CS;FL=1;var t=es();return CS=function(e,r,n){return t.f(e,r,n)},CS}var kS={},qL;function Gb(){if(qL)return kS;qL=1;var t=Xr();return kS.f=t,kS}var jS,LL;function Jt(){if(LL)return jS;LL=1;var t=qr(),e=Qr(),r=Gb(),n=es().f;return jS=function(i){var s=t.Symbol||(t.Symbol={});e(s,i)||n(s,i,{value:r.f(i)})},jS}var TS,BL;function cae(){if(BL)return TS;BL=1;var t=hi(),e=ji(),r=Xr(),n=Qm();return TS=function(){var i=e("Symbol"),s=i&&i.prototype,o=s&&s.valueOf,a=r("toPrimitive");s&&!s[a]&&n(s,a,function(l){return t(o,this)},{arity:1})},TS}var OS,zL;function Eke(){if(zL)return OS;zL=1;var t=xD(),e=Pl();return OS=t?{}.toString:function(){return"[object "+e(this)+"]"},OS}var PS,WL;function pu(){if(WL)return PS;WL=1;var t=xD(),e=es().f,r=Lh(),n=Qr(),i=Eke(),s=Xr(),o=s("toStringTag");return PS=function(a,l,u,d){var h=u?a:a&&a.prototype;h&&(n(h,o)||e(h,o,{configurable:!0,value:l}),d&&!t&&r(h,"toString",i))},PS}var IS,VL;function _ke(){if(VL)return IS;VL=1;var t=kr(),e=Gr(),r=t.WeakMap;return IS=e(r)&&/native code/.test(String(r)),IS}var RS,UL;function Xm(){if(UL)return RS;UL=1;var t=_ke(),e=kr(),r=Hn(),n=Lh(),i=Qr(),s=vD(),o=Ub(),a=Gm(),l="Object already initialized",u=e.TypeError,d=e.WeakMap,h,f,p,m=function(b){return p(b)?f(b):h(b,{})},g=function(b){return function(w){var x;if(!r(w)||(x=f(w)).type!==b)throw new u("Incompatible receiver, "+b+" required");return x}};if(t||s.state){var y=s.state||(s.state=new d);y.get=y.get,y.has=y.has,y.set=y.set,h=function(b,w){if(y.has(b))throw new u(l);return w.facade=b,y.set(b,w),w},f=function(b){return y.get(b)||{}},p=function(b){return y.has(b)}}else{var v=o("state");a[v]=!0,h=function(b,w){if(i(b,v))throw new u(l);return w.facade=b,n(b,v,w),w},f=function(b){return i(b,v)?b[v]:{}},p=function(b){return i(b,v)}}return RS={set:h,get:f,has:p,enforce:m,getterFor:g},RS}var MS,HL;function Wh(){if(HL)return MS;HL=1;var t=zb(),e=Rt(),r=qb(),n=Ns(),i=Ol(),s=wD(),o=e([].push),a=function(l){var u=l===1,d=l===2,h=l===3,f=l===4,p=l===6,m=l===7,g=l===5||p;return function(y,v,b,w){for(var x=n(y),S=r(x),E=i(S),N=t(v,b),_=0,k=w||s,j=u?k(y,E):d||m?k(y,0):void 0,T,P;E>_;_++)if((g||_ in S)&&(T=S[_],P=N(T,_,x),l))if(u)j[_]=P;else if(P)switch(l){case 3:return!0;case 5:return T;case 6:return _;case 2:o(j,T)}else switch(l){case 4:return!1;case 7:o(j,T)}return p?-1:h||f?f:j}};return MS={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterReject:a(7)},MS}var KL;function Nke(){if(KL)return wL;KL=1;var t=Ke(),e=kr(),r=hi(),n=Rt(),i=Fh(),s=jr(),o=Dh(),a=Et(),l=Qr(),u=Yr(),d=ia(),h=to(),f=bD(),p=Il(),m=Wm(),g=Ym(),y=Vb(),v=Hb(),b=lae(),w=Kb(),x=Bb(),S=es(),E=_D(),N=gD(),_=Qm(),k=ND(),j=qh(),T=Ub(),P=Gm(),O=Lb(),D=Xr(),F=Gb(),$=Jt(),q=cae(),M=pu(),B=Xm(),X=Wh().forEach,Q=T("hidden"),le="Symbol",G="prototype",se=B.set,ke=B.getterFor(le),be=Object[G],$e=e.Symbol,Ie=$e&&$e[G],Nt=e.RangeError,Ct=e.TypeError,kt=e.QObject,er=x.f,Ye=S.f,yr=b.f,en=N.f,Pr=n([].push),st=j("symbols"),vr=j("op-symbols"),mi=j("wks"),tn=!kt||!kt[G]||!kt[G].findChild,A=function(K,z,Z){var pe=er(be,z);pe&&delete be[z],Ye(K,z,Z),pe&&K!==be&&Ye(be,z,pe)},L=s&&a(function(){return g(Ye({},"a",{get:function(){return Ye(this,"a",{value:7}).a}})).a!==7})?A:Ye,V=function(K,z){var Z=st[K]=g(Ie);return se(Z,{type:le,tag:K,description:z}),s||(Z.description=z),Z},ce=function(z,Z,pe){z===be&&ce(vr,Z,pe),d(z);var we=f(Z);return d(pe),l(st,we)?(pe.enumerable?(l(z,Q)&&z[Q][we]&&(z[Q][we]=!1),pe=g(pe,{enumerable:m(0,!1)})):(l(z,Q)||Ye(z,Q,m(1,g(null))),z[Q][we]=!0),L(z,we,pe)):Ye(z,we,pe)},re=function(z,Z){d(z);var pe=h(Z),we=y(pe).concat(U(pe));return X(we,function(We){(!s||r(ge,pe,We))&&ce(z,We,pe[We])}),z},ne=function(z,Z){return Z===void 0?g(z):re(g(z),Z)},ge=function(z){var Z=f(z),pe=r(en,this,Z);return this===be&&l(st,Z)&&!l(vr,Z)?!1:pe||!l(this,Z)||!l(st,Z)||l(this,Q)&&this[Q][Z]?pe:!0},Le=function(z,Z){var pe=h(z),we=f(Z);if(!(pe===be&&l(st,we)&&!l(vr,we))){var We=er(pe,we);return We&&l(st,we)&&!(l(pe,Q)&&pe[Q][we])&&(We.enumerable=!0),We}},Ve=function(z){var Z=yr(h(z)),pe=[];return X(Z,function(we){!l(st,we)&&!l(P,we)&&Pr(pe,we)}),pe},U=function(K){var z=K===be,Z=yr(z?vr:h(K)),pe=[];return X(Z,function(we){l(st,we)&&(!z||l(be,we))&&Pr(pe,st[we])}),pe};return o||($e=function(){if(u(Ie,this))throw new Ct("Symbol is not a constructor");var z=!arguments.length||arguments[0]===void 0?void 0:p(arguments[0]),Z=O(z),pe=function(we){var We=this===void 0?e:this;We===be&&r(pe,vr,we),l(We,Q)&&l(We[Q],Z)&&(We[Q][Z]=!1);var rn=m(1,we);try{L(We,Z,rn)}catch(Ir){if(!(Ir instanceof Nt))throw Ir;A(We,Z,rn)}};return s&&tn&&L(be,Z,{configurable:!0,set:pe}),V(Z,z)},Ie=$e[G],_(Ie,"toString",function(){return ke(this).tag}),_($e,"withoutSetter",function(K){return V(O(K),K)}),N.f=ge,S.f=ce,E.f=re,x.f=Le,v.f=b.f=Ve,w.f=U,F.f=function(K){return V(D(K),K)},s&&(k(Ie,"description",{configurable:!0,get:function(){return ke(this).description}}),i||_(be,"propertyIsEnumerable",ge,{unsafe:!0}))),t({global:!0,constructor:!0,wrap:!0,forced:!o,sham:!o},{Symbol:$e}),X(y(mi),function(K){$(K)}),t({target:le,stat:!0,forced:!o},{useSetter:function(){tn=!0},useSimple:function(){tn=!1}}),t({target:"Object",stat:!0,forced:!o,sham:!s},{create:ne,defineProperty:ce,defineProperties:re,getOwnPropertyDescriptor:Le}),t({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:Ve}),q(),M($e,le),P[Q]=!0,wL}var GL={},AS,YL;function uae(){if(YL)return AS;YL=1;var t=Dh();return AS=t&&!!Symbol.for&&!!Symbol.keyFor,AS}var QL;function Cke(){if(QL)return GL;QL=1;var t=Ke(),e=ji(),r=Qr(),n=Il(),i=qh(),s=uae(),o=i("string-to-symbol-registry"),a=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{for:function(l){var u=n(l);if(r(o,u))return o[u];var d=e("Symbol")(u);return o[u]=d,a[d]=u,d}}),GL}var XL={},JL;function kke(){if(JL)return XL;JL=1;var t=Ke(),e=Qr(),r=Hm(),n=$h(),i=qh(),s=uae(),o=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{keyFor:function(l){if(!r(l))throw new TypeError(n(l)+" is not a symbol");if(e(o,l))return o[l]}}),XL}var ZL={},DS,e6;function jke(){if(e6)return DS;e6=1;var t=Rt(),e=fu(),r=Gr(),n=ra(),i=Il(),s=t([].push);return DS=function(o){if(r(o))return o;if(e(o)){for(var a=o.length,l=[],u=0;u<a;u++){var d=o[u];typeof d=="string"?s(l,d):(typeof d=="number"||n(d)==="Number"||n(d)==="String")&&s(l,i(d))}var h=l.length,f=!0;return function(p,m){if(f)return f=!1,m;if(e(this))return m;for(var g=0;g<h;g++)if(l[g]===p)return m}}},DS}var t6;function dae(){if(t6)return ZL;t6=1;var t=Ke(),e=ji(),r=Fb(),n=hi(),i=Rt(),s=Et(),o=Gr(),a=Hm(),l=zh(),u=jke(),d=Dh(),h=String,f=e("JSON","stringify"),p=i(/./.exec),m=i("".charAt),g=i("".charCodeAt),y=i("".replace),v=i(1.1.toString),b=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,x=/^[\uDC00-\uDFFF]$/,S=!d||s(function(){var k=e("Symbol")("stringify detection");return f([k])!=="[null]"||f({a:k})!=="{}"||f(Object(k))!=="{}"}),E=s(function(){return f("\uDF06\uD834")!=='"\\udf06\\ud834"'||f("\uDEAD")!=='"\\udead"'}),N=function(k,j){var T=l(arguments),P=u(j);if(!(!o(P)&&(k===void 0||a(k))))return T[1]=function(O,D){if(o(P)&&(D=n(P,this,h(O),D)),!a(D))return D},r(f,null,T)},_=function(k,j,T){var P=m(T,j-1),O=m(T,j+1);return p(w,k)&&!p(x,O)||p(x,k)&&!p(w,P)?"\\u"+v(g(k,0),16):k};return f&&t({target:"JSON",stat:!0,arity:3,forced:S||E},{stringify:function(j,T,P){var O=l(arguments),D=r(S?N:f,null,O);return E&&typeof D=="string"?y(D,b,_):D}}),ZL}var r6={},n6;function Tke(){if(n6)return r6;n6=1;var t=Ke(),e=Dh(),r=Et(),n=Kb(),i=Ns(),s=!e||r(function(){n.f(1)});return t({target:"Object",stat:!0,forced:s},{getOwnPropertySymbols:function(a){var l=n.f;return l?l(i(a)):[]}}),r6}var i6;function hae(){return i6||(i6=1,Nke(),Cke(),kke(),dae(),Tke()),xL}var s6={},o6;function fae(){if(o6)return s6;o6=1;var t=Jt();return t("asyncDispose"),s6}var a6={},l6;function Oke(){if(l6)return a6;l6=1;var t=Jt();return t("asyncIterator"),a6}var c6={},u6;function pae(){if(u6)return c6;u6=1;var t=Jt();return t("dispose"),c6}var d6={},h6;function Pke(){if(h6)return d6;h6=1;var t=Jt();return t("hasInstance"),d6}var f6={},p6;function Ike(){if(p6)return f6;p6=1;var t=Jt();return t("isConcatSpreadable"),f6}var m6={},g6;function mae(){if(g6)return m6;g6=1;var t=Jt();return t("iterator"),m6}var y6={},v6;function Rke(){if(v6)return y6;v6=1;var t=Jt();return t("match"),y6}var b6={},x6;function Mke(){if(x6)return b6;x6=1;var t=Jt();return t("matchAll"),b6}var w6={},S6;function Ake(){if(S6)return w6;S6=1;var t=Jt();return t("replace"),w6}var E6={},_6;function Dke(){if(_6)return E6;_6=1;var t=Jt();return t("search"),E6}var N6={},C6;function $ke(){if(C6)return N6;C6=1;var t=Jt();return t("species"),N6}var k6={},j6;function Fke(){if(j6)return k6;j6=1;var t=Jt();return t("split"),k6}var T6={},O6;function gae(){if(O6)return T6;O6=1;var t=Jt(),e=cae();return t("toPrimitive"),e(),T6}var P6={},I6;function qke(){if(I6)return P6;I6=1;var t=ji(),e=Jt(),r=pu();return e("toStringTag"),r(t("Symbol"),"Symbol"),P6}var R6={},M6;function Lke(){if(M6)return R6;M6=1;var t=Jt();return t("unscopables"),R6}var A6={},D6;function Bke(){if(D6)return A6;D6=1;var t=kr(),e=pu();return e(t.JSON,"JSON",!0),A6}var $S,$6;function zke(){if($6)return $S;$6=1,oae(),hae(),fae(),Oke(),pae(),Pke(),Ike(),mae(),Rke(),Mke(),Ake(),Dke(),$ke(),Fke(),gae(),qke(),Lke(),Bke();var t=qr();return $S=t.Symbol,$S}var F6={},FS,q6;function Wke(){return q6||(q6=1,FS=function(){}),FS}var qS,L6;function Vh(){return L6||(L6=1,qS={}),qS}var LS,B6;function Vke(){if(B6)return LS;B6=1;var t=jr(),e=Qr(),r=Function.prototype,n=t&&Object.getOwnPropertyDescriptor,i=e(r,"name"),s=i&&(function(){}).name==="something",o=i&&(!t||t&&n(r,"name").configurable);return LS={EXISTS:i,PROPER:s,CONFIGURABLE:o},LS}var BS,z6;function Uke(){if(z6)return BS;z6=1;var t=Et();return BS=!t(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),BS}var zS,W6;function yae(){if(W6)return zS;W6=1;var t=Qr(),e=Gr(),r=Ns(),n=Ub(),i=Uke(),s=n("IE_PROTO"),o=Object,a=o.prototype;return zS=i?o.getPrototypeOf:function(l){var u=r(l);if(t(u,s))return u[s];var d=u.constructor;return e(d)&&u instanceof d?d.prototype:u instanceof o?a:null},zS}var WS,V6;function vae(){if(V6)return WS;V6=1;var t=Et(),e=Gr(),r=Hn(),n=Ym(),i=yae(),s=Qm(),o=Xr(),a=Fh(),l=o("iterator"),u=!1,d,h,f;[].keys&&(f=[].keys(),"next"in f?(h=i(i(f)),h!==Object.prototype&&(d=h)):u=!0);var p=!r(d)||t(function(){var m={};return d[l].call(m)!==m});return p?d={}:a&&(d=n(d)),e(d[l])||s(d,l,function(){return this}),WS={IteratorPrototype:d,BUGGY_SAFARI_ITERATORS:u},WS}var VS,U6;function Hke(){if(U6)return VS;U6=1;var t=vae().IteratorPrototype,e=Ym(),r=Wm(),n=pu(),i=Vh(),s=function(){return this};return VS=function(o,a,l,u){var d=a+" Iterator";return o.prototype=e(t,{next:r(+!u,l)}),n(o,d,!1,!0),i[d]=s,o},VS}var US,H6;function Kke(){if(H6)return US;H6=1;var t=Rt(),e=na();return US=function(r,n,i){try{return t(e(Object.getOwnPropertyDescriptor(r,n)[i]))}catch{}},US}var HS,K6;function Gke(){if(K6)return HS;K6=1;var t=Hn();return HS=function(e){return t(e)||e===null},HS}var KS,G6;function Yke(){if(G6)return KS;G6=1;var t=Gke(),e=String,r=TypeError;return KS=function(n){if(t(n))return n;throw new r("Can't set "+e(n)+" as a prototype")},KS}var GS,Y6;function Qke(){if(Y6)return GS;Y6=1;var t=Kke(),e=Hn(),r=hu(),n=Yke();return GS=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,s={},o;try{o=t(Object.prototype,"__proto__","set"),o(s,[]),i=s instanceof Array}catch{}return function(l,u){return r(l),n(u),e(l)&&(i?o(l,u):l.__proto__=u),l}}():void 0),GS}var YS,Q6;function CD(){if(Q6)return YS;Q6=1;var t=Ke(),e=hi(),r=Fh(),n=Vke(),i=Gr(),s=Hke(),o=yae(),a=Qke(),l=pu(),u=Lh(),d=Qm(),h=Xr(),f=Vh(),p=vae(),m=n.PROPER,g=n.CONFIGURABLE,y=p.IteratorPrototype,v=p.BUGGY_SAFARI_ITERATORS,b=h("iterator"),w="keys",x="values",S="entries",E=function(){return this};return YS=function(N,_,k,j,T,P,O){s(k,_,j);var D=function(se){if(se===T&&B)return B;if(!v&&se&&se in q)return q[se];switch(se){case w:return function(){return new k(this,se)};case x:return function(){return new k(this,se)};case S:return function(){return new k(this,se)}}return function(){return new k(this)}},F=_+" Iterator",$=!1,q=N.prototype,M=q[b]||q["@@iterator"]||T&&q[T],B=!v&&M||D(T),X=_==="Array"&&q.entries||M,Q,le,G;if(X&&(Q=o(X.call(new N)),Q!==Object.prototype&&Q.next&&(!r&&o(Q)!==y&&(a?a(Q,y):i(Q[b])||d(Q,b,E)),l(Q,F,!0,!0),r&&(f[F]=E))),m&&T===x&&M&&M.name!==x&&(!r&&g?u(q,"name",x):($=!0,B=function(){return e(M,this)})),T)if(le={values:D(x),keys:P?B:D(w),entries:D(S)},O)for(G in le)(v||$||!(G in q))&&d(q,G,le[G]);else t({target:_,proto:!0,forced:v||$},le);return(!r||O)&&q[b]!==B&&d(q,b,B,{name:T}),f[_]=B,le},YS}var QS,X6;function kD(){return X6||(X6=1,QS=function(t,e){return{value:t,done:e}}),QS}var XS,J6;function Rl(){if(J6)return XS;J6=1;var t=to(),e=Wke(),r=Vh(),n=Xm(),i=es().f,s=CD(),o=kD(),a=Fh(),l=jr(),u="Array Iterator",d=n.set,h=n.getterFor(u);XS=s(Array,"Array",function(p,m){d(this,{type:u,target:t(p),index:0,kind:m})},function(){var p=h(this),m=p.target,g=p.index++;if(!m||g>=m.length)return p.target=null,o(void 0,!0);switch(p.kind){case"keys":return o(g,!1);case"values":return o(m[g],!1)}return o([g,m[g]],!1)},"values");var f=r.Arguments=r.Array;if(e("keys"),e("values"),e("entries"),!a&&l&&f.name!=="values")try{i(f,"name",{value:"values"})}catch{}return XS}var JS,Z6;function Xke(){return Z6||(Z6=1,JS={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),JS}var eB;function Ml(){if(eB)return F6;eB=1,Rl();var t=Xke(),e=kr(),r=pu(),n=Vh();for(var i in t)r(e[i],i),n[i]=n.Array;return F6}var ZS,tB;function bae(){if(tB)return ZS;tB=1;var t=zke();return Ml(),ZS=t,ZS}var rB={},nB;function Jke(){if(nB)return rB;nB=1;var t=Xr(),e=es().f,r=t("metadata"),n=Function.prototype;return n[r]===void 0&&e(n,r,{value:null}),rB}var iB={},sB;function Zke(){return sB||(sB=1,fae()),iB}var oB={},aB;function eje(){return aB||(aB=1,pae()),oB}var lB={},cB;function tje(){if(cB)return lB;cB=1;var t=Jt();return t("metadata"),lB}var eE,uB;function rje(){if(uB)return eE;uB=1;var t=bae();return Jke(),Zke(),eje(),tje(),eE=t,eE}var dB={},tE,hB;function xae(){if(hB)return tE;hB=1;var t=ji(),e=Rt(),r=t("Symbol"),n=r.keyFor,i=e(r.prototype.valueOf);return tE=r.isRegisteredSymbol||function(o){try{return n(i(o))!==void 0}catch{return!1}},tE}var fB;function nje(){if(fB)return dB;fB=1;var t=Ke(),e=xae();return t({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),dB}var pB={},rE,mB;function wae(){if(mB)return rE;mB=1;for(var t=qh(),e=ji(),r=Rt(),n=Hm(),i=Xr(),s=e("Symbol"),o=s.isWellKnownSymbol,a=e("Object","getOwnPropertyNames"),l=r(s.prototype.valueOf),u=t("wks"),d=0,h=a(s),f=h.length;d<f;d++)try{var p=h[d];n(s[p])&&i(p)}catch{}return rE=function(g){if(o&&o(g))return!0;try{for(var y=l(g),v=0,b=a(u),w=b.length;v<w;v++)if(u[b[v]]==y)return!0}catch{}return!1},rE}var gB;function ije(){if(gB)return pB;gB=1;var t=Ke(),e=wae();return t({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),pB}var yB={},vB;function sje(){if(vB)return yB;vB=1;var t=Jt();return t("customMatcher"),yB}var bB={},xB;function oje(){if(xB)return bB;xB=1;var t=Jt();return t("observable"),bB}var wB={},SB;function aje(){if(SB)return wB;SB=1;var t=Ke(),e=xae();return t({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),wB}var EB={},_B;function lje(){if(_B)return EB;_B=1;var t=Ke(),e=wae();return t({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),EB}var NB={},CB;function cje(){if(CB)return NB;CB=1;var t=Jt();return t("matcher"),NB}var kB={},jB;function uje(){if(jB)return kB;jB=1;var t=Jt();return t("metadataKey"),kB}var TB={},OB;function dje(){if(OB)return TB;OB=1;var t=Jt();return t("patternMatch"),TB}var PB={},IB;function hje(){if(IB)return PB;IB=1;var t=Jt();return t("replaceAll"),PB}var nE,RB;function fje(){if(RB)return nE;RB=1;var t=rje();return nje(),ije(),sje(),oje(),aje(),lje(),cje(),uje(),dje(),hje(),nE=t,nE}var iE,MB;function pje(){return MB||(MB=1,iE=fje()),iE}var mje=pje(),my=lt(mje),AB={},sE,DB;function gje(){if(DB)return sE;DB=1;var t=Rt(),e=Bh(),r=Il(),n=hu(),i=t("".charAt),s=t("".charCodeAt),o=t("".slice),a=function(l){return function(u,d){var h=r(n(u)),f=e(d),p=h.length,m,g;return f<0||f>=p?l?"":void 0:(m=s(h,f),m<55296||m>56319||f+1===p||(g=s(h,f+1))<56320||g>57343?l?i(h,f):m:l?o(h,f,f+2):(m-55296<<10)+(g-56320)+65536)}};return sE={codeAt:a(!1),charAt:a(!0)},sE}var $B;function Yb(){if($B)return AB;$B=1;var t=gje().charAt,e=Il(),r=Xm(),n=CD(),i=kD(),s="String Iterator",o=r.set,a=r.getterFor(s);return n(String,"String",function(l){o(this,{type:s,string:e(l),index:0})},function(){var u=a(this),d=u.string,h=u.index,f;return h>=d.length?i(void 0,!0):(f=t(d,h),u.index+=f.length,i(f,!1))}),AB}var oE,FB;function yje(){if(FB)return oE;FB=1,Rl(),Yb(),mae();var t=Gb();return oE=t.f("iterator"),oE}var aE,qB;function Sae(){if(qB)return aE;qB=1;var t=yje();return Ml(),aE=t,aE}var lE,LB;function vje(){if(LB)return lE;LB=1;var t=Sae();return lE=t,lE}var cE,BB;function bje(){if(BB)return cE;BB=1;var t=vje();return cE=t,cE}var uE,zB;function xje(){return zB||(zB=1,uE=bje()),uE}var wje=xje(),Sje=lt(wje);function nm(t){"@babel/helpers - typeof";return nm=typeof my=="function"&&typeof Sje=="symbol"?function(e){return typeof e}:function(e){return e&&typeof my=="function"&&e.constructor===my&&e!==my.prototype?"symbol":typeof e},nm(t)}var dE,WB;function Eje(){if(WB)return dE;WB=1,gae();var t=Gb();return dE=t.f("toPrimitive"),dE}var hE,VB;function _je(){if(VB)return hE;VB=1;var t=Eje();return hE=t,hE}var fE,UB;function Nje(){if(UB)return fE;UB=1;var t=_je();return fE=t,fE}var pE,HB;function Cje(){if(HB)return pE;HB=1;var t=Nje();return pE=t,pE}var mE,KB;function kje(){return KB||(KB=1,mE=Cje()),mE}var jje=kje(),Tje=lt(jje);function Oje(t,e){if(nm(t)!="object"||!t)return t;var r=t[Tje];if(r!==void 0){var n=r.call(t,e);if(nm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pje(t){var e=Oje(t,"string");return nm(e)=="symbol"?e:e+""}function ll(t,e,r){return(e=Pje(e))in t?yke(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var GB={},gE,YB;function Ije(){if(YB)return gE;YB=1;var t=Rt(),e=na(),r=Hn(),n=Qr(),i=zh(),s=zm(),o=Function,a=t([].concat),l=t([].join),u={},d=function(h,f,p){if(!n(u,f)){for(var m=[],g=0;g<f;g++)m[g]="a["+g+"]";u[f]=o("C,a","return new C("+l(m,",")+")")}return u[f](h,p)};return gE=s?o.bind:function(f){var p=e(this),m=p.prototype,g=i(arguments,1),y=function(){var b=a(g,i(arguments));return this instanceof y?d(p,b.length,b):p.apply(f,b)};return r(m)&&(y.prototype=m),y},gE}var QB;function Rje(){if(QB)return GB;QB=1;var t=Ke(),e=Ije();return t({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),GB}var yE,XB;function fi(){if(XB)return yE;XB=1;var t=kr(),e=qr();return yE=function(r,n){var i=e[r+"Prototype"],s=i&&i[n];if(s)return s;var o=t[r],a=o&&o.prototype;return a&&a[n]},yE}var vE,JB;function Mje(){if(JB)return vE;JB=1,Rje();var t=fi();return vE=t("Function","bind"),vE}var bE,ZB;function Aje(){if(ZB)return bE;ZB=1;var t=Yr(),e=Mje(),r=Function.prototype;return bE=function(n){var i=n.bind;return n===r||t(r,n)&&i===r.bind?e:i},bE}var xE,e8;function Dje(){if(e8)return xE;e8=1;var t=Aje();return xE=t,xE}var wE,t8;function $je(){return t8||(t8=1,wE=Dje()),wE}var Fje=$je(),Eae=lt(Fje),r8={},SE,n8;function qje(){if(n8)return SE;n8=1;var t=na(),e=Ns(),r=qb(),n=Ol(),i=TypeError,s="Reduce of empty array with no initial value",o=function(a){return function(l,u,d,h){var f=e(l),p=r(f),m=n(f);if(t(u),m===0&&d<2)throw new i(s);var g=a?m-1:0,y=a?-1:1;if(d<2)for(;;){if(g in p){h=p[g],g+=y;break}if(g+=y,a?g<0:m<=g)throw new i(s)}for(;a?g>=0:m>g;g+=y)g in p&&(h=u(h,p[g],g,f));return h}};return SE={left:o(!1),right:o(!0)},SE}var EE,i8;function Qb(){if(i8)return EE;i8=1;var t=Et();return EE=function(e,r){var n=[][e];return!!n&&t(function(){n.call(null,r||function(){return 1},1)})},EE}var _E,s8;function _ae(){if(s8)return _E;s8=1;var t=kr(),e=Ah(),r=ra(),n=function(i){return e.slice(0,i.length)===i};return _E=function(){return n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":t.Bun&&typeof Bun.version=="string"?"BUN":t.Deno&&typeof Deno.version=="object"?"DENO":r(t.process)==="process"?"NODE":t.window&&t.document?"BROWSER":"REST"}(),_E}var NE,o8;function Lje(){if(o8)return NE;o8=1;var t=_ae();return NE=t==="NODE",NE}var a8;function Bje(){if(a8)return r8;a8=1;var t=Ke(),e=qje().left,r=Qb(),n=Um(),i=Lje(),s=!i&&n>79&&n<83,o=s||!r("reduce");return t({target:"Array",proto:!0,forced:o},{reduce:function(l){var u=arguments.length;return e(this,l,u,u>1?arguments[1]:void 0)}}),r8}var CE,l8;function zje(){if(l8)return CE;l8=1,Bje();var t=fi();return CE=t("Array","reduce"),CE}var kE,c8;function Wje(){if(c8)return kE;c8=1;var t=Yr(),e=zje(),r=Array.prototype;return kE=function(n){var i=n.reduce;return n===r||t(r,n)&&i===r.reduce?e:i},kE}var jE,u8;function Vje(){if(u8)return jE;u8=1;var t=Wje();return jE=t,jE}var TE,d8;function Uje(){return d8||(d8=1,TE=Vje()),TE}var Hje=Uje(),Kje=lt(Hje),h8={},f8;function Gje(){if(f8)return h8;f8=1;var t=Ke(),e=Wh().filter,r=Km(),n=r("filter");return t({target:"Array",proto:!0,forced:!n},{filter:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),h8}var OE,p8;function Yje(){if(p8)return OE;p8=1,Gje();var t=fi();return OE=t("Array","filter"),OE}var PE,m8;function Qje(){if(m8)return PE;m8=1;var t=Yr(),e=Yje(),r=Array.prototype;return PE=function(n){var i=n.filter;return n===r||t(r,n)&&i===r.filter?e:i},PE}var IE,g8;function Xje(){if(g8)return IE;g8=1;var t=Qje();return IE=t,IE}var RE,y8;function Jje(){return y8||(y8=1,RE=Xje()),RE}var Zje=Jje(),dd=lt(Zje),v8={},b8;function eTe(){if(b8)return v8;b8=1;var t=Ke(),e=Wh().map,r=Km(),n=r("map");return t({target:"Array",proto:!0,forced:!n},{map:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),v8}var ME,x8;function tTe(){if(x8)return ME;x8=1,eTe();var t=fi();return ME=t("Array","map"),ME}var AE,w8;function rTe(){if(w8)return AE;w8=1;var t=Yr(),e=tTe(),r=Array.prototype;return AE=function(n){var i=n.map;return n===r||t(r,n)&&i===r.map?e:i},AE}var DE,S8;function nTe(){if(S8)return DE;S8=1;var t=rTe();return DE=t,DE}var $E,E8;function iTe(){return E8||(E8=1,$E=nTe()),$E}var sTe=iTe(),ps=lt(sTe),FE,_8;function oTe(){return _8||(_8=1,FE=bae()),FE}var aTe=oTe(),lTe=lt(aTe),N8={},C8;function cTe(){if(C8)return N8;C8=1;var t=Ke(),e=fu(),r=sae(),n=Hn(),i=SD(),s=Ol(),o=to(),a=Wb(),l=Xr(),u=Km(),d=zh(),h=u("slice"),f=l("species"),p=Array,m=Math.max;return t({target:"Array",proto:!0,forced:!h},{slice:function(y,v){var b=o(this),w=s(b),x=i(y,w),S=i(v===void 0?w:v,w),E,N,_;if(e(b)&&(E=b.constructor,r(E)&&(E===p||e(E.prototype))?E=void 0:n(E)&&(E=E[f],E===null&&(E=void 0)),E===p||E===void 0))return d(b,x,S);for(N=new(E===void 0?p:E)(m(S-x,0)),_=0;x<S;x++,_++)x in b&&a(N,_,b[x]);return N.length=_,N}}),N8}var qE,k8;function uTe(){if(k8)return qE;k8=1,cTe();var t=fi();return qE=t("Array","slice"),qE}var LE,j8;function dTe(){if(j8)return LE;j8=1;var t=Yr(),e=uTe(),r=Array.prototype;return LE=function(n){var i=n.slice;return n===r||t(r,n)&&i===r.slice?e:i},LE}var BE,T8;function hTe(){if(T8)return BE;T8=1;var t=dTe();return BE=t,BE}var zE,O8;function fTe(){return O8||(O8=1,zE=hTe()),zE}var pTe=fTe(),mTe=lt(pTe),P8={},WE,I8;function Nae(){if(I8)return WE;I8=1;var t=ji(),e=Rt(),r=Hb(),n=Kb(),i=ia(),s=e([].concat);return WE=t("Reflect","ownKeys")||function(a){var l=r.f(i(a)),u=n.f;return u?s(l,u(a)):l},WE}var R8;function gTe(){if(R8)return P8;R8=1;var t=Ke(),e=Nae();return t({target:"Reflect",stat:!0},{ownKeys:e}),P8}var VE,M8;function yTe(){if(M8)return VE;M8=1,gTe();var t=qr();return VE=t.Reflect.ownKeys,VE}var UE,A8;function vTe(){if(A8)return UE;A8=1;var t=yTe();return UE=t,UE}var HE,D8;function bTe(){return D8||(D8=1,HE=vTe()),HE}var xTe=bTe(),wTe=lt(xTe),$8={},F8;function STe(){if(F8)return $8;F8=1;var t=Ke(),e=fu();return t({target:"Array",stat:!0},{isArray:e}),$8}var KE,q8;function ETe(){if(q8)return KE;q8=1,STe();var t=qr();return KE=t.Array.isArray,KE}var GE,L8;function _Te(){if(L8)return GE;L8=1;var t=ETe();return GE=t,GE}var YE,B8;function NTe(){return B8||(B8=1,YE=_Te()),YE}var CTe=NTe(),$s=lt(CTe),z8={},W8;function kTe(){if(W8)return z8;W8=1;var t=Ke(),e=Ns(),r=Vb(),n=Et(),i=n(function(){r(1)});return t({target:"Object",stat:!0,forced:i},{keys:function(o){return r(e(o))}}),z8}var QE,V8;function jTe(){if(V8)return QE;V8=1,kTe();var t=qr();return QE=t.Object.keys,QE}var XE,U8;function TTe(){if(U8)return XE;U8=1;var t=jTe();return XE=t,XE}var JE,H8;function OTe(){return H8||(H8=1,JE=TTe()),JE}var PTe=OTe(),jD=lt(PTe),K8={},ZE,G8;function ITe(){if(G8)return ZE;G8=1;var t=Wh().forEach,e=Qb(),r=e("forEach");return ZE=r?[].forEach:function(i){return t(this,i,arguments.length>1?arguments[1]:void 0)},ZE}var Y8;function RTe(){if(Y8)return K8;Y8=1;var t=Ke(),e=ITe();return t({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),K8}var e2,Q8;function MTe(){if(Q8)return e2;Q8=1,RTe();var t=fi();return e2=t("Array","forEach"),e2}var t2,X8;function ATe(){if(X8)return t2;X8=1;var t=MTe();return t2=t,t2}var r2,J8;function DTe(){if(J8)return r2;J8=1;var t=Pl(),e=Qr(),r=Yr(),n=ATe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return r2=function(o){var a=o.forEach;return o===i||r(i,o)&&a===i.forEach||e(s,t(o))?n:a},r2}var n2,Z8;function $Te(){return Z8||(Z8=1,n2=DTe()),n2}var FTe=$Te(),Xc=lt(FTe),e7={},t7;function qTe(){if(t7)return e7;t7=1;var t=Ke(),e=Rt(),r=fu(),n=e([].reverse),i=[1,2];return t({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),n(this)}}),e7}var i2,r7;function LTe(){if(r7)return i2;r7=1,qTe();var t=fi();return i2=t("Array","reverse"),i2}var s2,n7;function BTe(){if(n7)return s2;n7=1;var t=Yr(),e=LTe(),r=Array.prototype;return s2=function(n){var i=n.reverse;return n===r||t(r,n)&&i===r.reverse?e:i},s2}var o2,i7;function zTe(){if(i7)return o2;i7=1;var t=BTe();return o2=t,o2}var a2,s7;function WTe(){return s7||(s7=1,a2=zTe()),a2}var VTe=WTe(),UTe=lt(VTe),o7={},l2,a7;function HTe(){if(a7)return l2;a7=1;var t=jr(),e=fu(),r=TypeError,n=Object.getOwnPropertyDescriptor,i=t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(s){return s instanceof TypeError}}();return l2=i?function(s,o){if(e(s)&&!n(s,"length").writable)throw new r("Cannot set read only .length");return s.length=o}:function(s,o){return s.length=o},l2}var c2,l7;function Cae(){if(l7)return c2;l7=1;var t=$h(),e=TypeError;return c2=function(r,n){if(!delete r[n])throw new e("Cannot delete property "+t(n)+" of "+t(r))},c2}var c7;function KTe(){if(c7)return o7;c7=1;var t=Ke(),e=Ns(),r=SD(),n=Bh(),i=Ol(),s=HTe(),o=iae(),a=wD(),l=Wb(),u=Cae(),d=Km(),h=d("splice"),f=Math.max,p=Math.min;return t({target:"Array",proto:!0,forced:!h},{splice:function(g,y){var v=e(this),b=i(v),w=r(g,b),x=arguments.length,S,E,N,_,k,j;for(x===0?S=E=0:x===1?(S=0,E=b-w):(S=x-2,E=p(f(n(y),0),b-w)),o(b+S-E),N=a(v,E),_=0;_<E;_++)k=w+_,k in v&&l(N,_,v[k]);if(N.length=E,S<E){for(_=w;_<b-E;_++)k=_+E,j=_+S,k in v?v[j]=v[k]:u(v,j);for(_=b;_>b-E+S;_--)u(v,_-1)}else if(S>E)for(_=b-E;_>w;_--)k=_+E-1,j=_+S-1,k in v?v[j]=v[k]:u(v,j);for(_=0;_<S;_++)v[_+w]=arguments[_+2];return s(v,b-E+S),N}}),o7}var u2,u7;function GTe(){if(u7)return u2;u7=1,KTe();var t=fi();return u2=t("Array","splice"),u2}var d2,d7;function YTe(){if(d7)return d2;d7=1;var t=Yr(),e=GTe(),r=Array.prototype;return d2=function(n){var i=n.splice;return n===r||t(r,n)&&i===r.splice?e:i},d2}var h2,h7;function QTe(){if(h7)return h2;h7=1;var t=YTe();return h2=t,h2}var f2,f7;function XTe(){return f7||(f7=1,f2=QTe()),f2}var JTe=XTe(),kae=lt(JTe),p7={},p2,m7;function ZTe(){if(m7)return p2;m7=1;var t=jr(),e=Rt(),r=hi(),n=Et(),i=Vb(),s=Kb(),o=gD(),a=Ns(),l=qb(),u=Object.assign,d=Object.defineProperty,h=e([].concat);return p2=!u||n(function(){if(t&&u({b:1},u(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},p={},m=Symbol("assign detection"),g="abcdefghijklmnopqrst";return f[m]=7,g.split("").forEach(function(y){p[y]=y}),u({},f)[m]!==7||i(u({},p)).join("")!==g})?function(p,m){for(var g=a(p),y=arguments.length,v=1,b=s.f,w=o.f;y>v;)for(var x=l(arguments[v++]),S=b?h(i(x),b(x)):i(x),E=S.length,N=0,_;E>N;)_=S[N++],(!t||r(w,x,_))&&(g[_]=x[_]);return g}:u,p2}var g7;function eOe(){if(g7)return p7;g7=1;var t=Ke(),e=ZTe();return t({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),p7}var m2,y7;function tOe(){if(y7)return m2;y7=1,eOe();var t=qr();return m2=t.Object.assign,m2}var g2,v7;function rOe(){if(v7)return g2;v7=1;var t=tOe();return g2=t,g2}var y2,b7;function nOe(){return b7||(b7=1,y2=rOe()),y2}var iOe=nOe(),sOe=lt(iOe),v2,x7;function oOe(){if(x7)return v2;x7=1,oae();var t=fi();return v2=t("Array","concat"),v2}var b2,w7;function aOe(){if(w7)return b2;w7=1;var t=Yr(),e=oOe(),r=Array.prototype;return b2=function(n){var i=n.concat;return n===r||t(r,n)&&i===r.concat?e:i},b2}var x2,S7;function lOe(){if(S7)return x2;S7=1;var t=aOe();return x2=t,x2}var w2,E7;function cOe(){return E7||(E7=1,w2=lOe()),w2}var uOe=cOe(),dOe=lt(uOe),_7={},N7;function hOe(){if(N7)return _7;N7=1;var t=Ke(),e=jr(),r=Ym();return t({target:"Object",stat:!0,sham:!e},{create:r}),_7}var S2,C7;function fOe(){if(C7)return S2;C7=1,hOe();var t=qr(),e=t.Object;return S2=function(n,i){return e.create(n,i)},S2}var E2,k7;function pOe(){if(k7)return E2;k7=1;var t=fOe();return E2=t,E2}var _2,j7;function mOe(){return j7||(j7=1,_2=pOe()),_2}var gOe=mOe(),yOe=lt(gOe),T7={},N2,O7;function vOe(){if(O7)return N2;O7=1;var t=Bh(),e=Il(),r=hu(),n=RangeError;return N2=function(s){var o=e(r(this)),a="",l=t(s);if(l<0||l===1/0)throw new n("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(o+=o))l&1&&(a+=o);return a},N2}var C2,P7;function bOe(){if(P7)return C2;P7=1;var t=Rt(),e=nae(),r=Il(),n=vOe(),i=hu(),s=t(n),o=t("".slice),a=Math.ceil,l=function(u){return function(d,h,f){var p=r(i(d)),m=e(h),g=p.length,y=f===void 0?" ":r(f),v,b;return m<=g||y===""?p:(v=m-g,b=s(y,a(v/y.length)),b.length>v&&(b=o(b,0,v)),u?p+b:b+p)}};return C2={start:l(!1),end:l(!0)},C2}var k2,I7;function xOe(){if(I7)return k2;I7=1;var t=Rt(),e=Et(),r=bOe().start,n=RangeError,i=isFinite,s=Math.abs,o=Date.prototype,a=o.toISOString,l=t(o.getTime),u=t(o.getUTCDate),d=t(o.getUTCFullYear),h=t(o.getUTCHours),f=t(o.getUTCMilliseconds),p=t(o.getUTCMinutes),m=t(o.getUTCMonth),g=t(o.getUTCSeconds);return k2=e(function(){return a.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){a.call(new Date(NaN))})?function(){if(!i(l(this)))throw new n("Invalid time value");var v=this,b=d(v),w=f(v),x=b<0?"-":b>9999?"+":"";return x+r(s(b),x?6:4,0)+"-"+r(m(v)+1,2,0)+"-"+r(u(v),2,0)+"T"+r(h(v),2,0)+":"+r(p(v),2,0)+":"+r(g(v),2,0)+"."+r(w,3,0)+"Z"}:a,k2}var R7;function wOe(){if(R7)return T7;R7=1;var t=Ke(),e=hi(),r=Ns(),n=Joe(),i=xOe(),s=ra(),o=Et(),a=o(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return t({target:"Date",proto:!0,forced:a},{toJSON:function(u){var d=r(this),h=n(d,"number");return typeof h=="number"&&!isFinite(h)?null:!("toISOString"in d)&&s(d)==="Date"?e(i,d):d.toISOString()}}),T7}var j2,M7;function SOe(){if(M7)return j2;M7=1,wOe(),dae();var t=qr(),e=Fb();return t.JSON||(t.JSON={stringify:JSON.stringify}),j2=function(n,i,s){return e(t.JSON.stringify,null,arguments)},j2}var T2,A7;function EOe(){if(A7)return T2;A7=1;var t=SOe();return T2=t,T2}var O2,D7;function _Oe(){return D7||(D7=1,O2=EOe()),O2}var NOe=_Oe(),COe=lt(NOe),$7={},F7={},P2,q7;function kOe(){if(q7)return P2;q7=1;var t=TypeError;return P2=function(e,r){if(e<r)throw new t("Not enough arguments");return e},P2}var I2,L7;function jae(){if(L7)return I2;L7=1;var t=kr(),e=Fb(),r=Gr(),n=_ae(),i=Ah(),s=zh(),o=kOe(),a=t.Function,l=/MSIE .\./.test(i)||n==="BUN"&&function(){var u=t.Bun.version.split(".");return u.length<3||u[0]==="0"&&(u[1]<3||u[1]==="3"&&u[2]==="0")}();return I2=function(u,d){var h=d?2:1;return l?function(f,p){var m=o(arguments.length,1)>h,g=r(f)?f:a(f),y=m?s(arguments,h):[],v=m?function(){e(g,this,y)}:g;return d?u(v,p):u(v)}:u},I2}var B7;function jOe(){if(B7)return F7;B7=1;var t=Ke(),e=kr(),r=jae(),n=r(e.setInterval,!0);return t({global:!0,bind:!0,forced:e.setInterval!==n},{setInterval:n}),F7}var z7={},W7;function TOe(){if(W7)return z7;W7=1;var t=Ke(),e=kr(),r=jae(),n=r(e.setTimeout,!0);return t({global:!0,bind:!0,forced:e.setTimeout!==n},{setTimeout:n}),z7}var V7;function OOe(){return V7||(V7=1,jOe(),TOe()),$7}var R2,U7;function POe(){if(U7)return R2;U7=1,OOe();var t=qr();return R2=t.setTimeout,R2}var M2,H7;function IOe(){return H7||(H7=1,M2=POe()),M2}var ROe=IOe(),MOe=lt(ROe),A2={exports:{}},K7;function AOe(){return K7||(K7=1,function(t){function e(n){if(n)return r(n);this._callbacks=new Map}function r(n){return Object.assign(n,e.prototype),n._callbacks=new Map,n}e.prototype.on=function(n,i){const s=this._callbacks.get(n)??[];return s.push(i),this._callbacks.set(n,s),this},e.prototype.once=function(n,i){const s=(...o)=>{this.off(n,s),i.apply(this,o)};return s.fn=i,this.on(n,s),this},e.prototype.off=function(n,i){if(n===void 0&&i===void 0)return this._callbacks.clear(),this;if(i===void 0)return this._callbacks.delete(n),this;const s=this._callbacks.get(n);if(s){for(const[o,a]of s.entries())if(a===i||a.fn===i){s.splice(o,1);break}s.length===0?this._callbacks.delete(n):this._callbacks.set(n,s)}return this},e.prototype.emit=function(n,...i){const s=this._callbacks.get(n);if(s){const o=[...s];for(const a of o)a.apply(this,i)}return this},e.prototype.listeners=function(n){return this._callbacks.get(n)??[]},e.prototype.listenerCount=function(n){if(n)return this.listeners(n).length;let i=0;for(const s of this._callbacks.values())i+=s.length;return i},e.prototype.hasListeners=function(n){return this.listenerCount(n)>0},e.prototype.addEventListener=e.prototype.on,e.prototype.removeListener=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,t.exports=e}(A2)),A2.exports}var DOe=AOe(),$Oe=lt(DOe);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function Ss(){return Ss=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ss.apply(this,arguments)}function ts(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function gy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var DR;typeof Object.assign!="function"?DR=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])}return r}:DR=Object.assign;var Jc=DR,G7=["","webkit","Moz","MS","ms","o"],FOe=typeof document>"u"?{style:{}}:document.createElement("div"),qOe="function",hd=Math.round,Zc=Math.abs,TD=Date.now;function Xb(t,e){for(var r,n,i=e[0].toUpperCase()+e.slice(1),s=0;s<G7.length;){if(r=G7[s],n=r?r+i:e,n in t)return n;s++}}var Ao;typeof window>"u"?Ao={}:Ao=window;var Tae=Xb(FOe.style,"touchAction"),Oae=Tae!==void 0;function LOe(){if(!Oae)return!1;var t={},e=Ao.CSS&&Ao.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){return t[r]=e?Ao.CSS.supports("touch-action",r):!0}),t}var Pae="compute",Iae="auto",$R="manipulation",Cc="none",im="pan-x",sm="pan-y",yy=LOe(),BOe=/mobile|tablet|ip(ad|hone|od)|android/i,Rae="ontouchstart"in Ao,zOe=Xb(Ao,"PointerEvent")!==void 0,WOe=Rae&&BOe.test(navigator.userAgent),Jm="touch",VOe="pen",OD="mouse",UOe="kinect",HOe=25,Bn=1,mu=2,Sr=4,ui=8,j0=1,Zm=2,eg=4,tg=8,fh=16,Qs=Zm|eg,kc=tg|fh,Mae=Qs|kc,Aae=["x","y"],T0=["clientX","clientY"];function Do(t,e,r){var n;if(t)if(t.forEach)t.forEach(e,r);else if(t.length!==void 0)for(n=0;n<t.length;)e.call(r,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t)}function Jb(t,e){return typeof t===qOe?t.apply(e&&e[0]||void 0,e):t}function sc(t,e){return t.indexOf(e)>-1}function KOe(t){if(sc(t,Cc))return Cc;var e=sc(t,im),r=sc(t,sm);return e&&r?Cc:e||r?e?im:sm:sc(t,$R)?$R:Iae}var Dae=function(){function t(r,n){this.manager=r,this.set(n)}var e=t.prototype;return e.set=function(n){n===Pae&&(n=this.compute()),Oae&&this.manager.element.style&&yy[n]&&(this.manager.element.style[Tae]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return Do(this.manager.recognizers,function(i){Jb(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),KOe(n.join(" "))},e.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=sc(o,Cc)&&!yy[Cc],l=sc(o,sm)&&!yy[sm],u=sc(o,im)&&!yy[im];if(a){var d=n.pointers.length===1,h=n.distance<2,f=n.deltaTime<250;if(d&&h&&f)return}if(!(u&&l)&&(a||l&&s&Qs||u&&s&kc))return this.preventSrc(i)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},t}();function PD(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function $ae(t){var e=t.length;if(e===1)return{x:hd(t[0].clientX),y:hd(t[0].clientY)};for(var r=0,n=0,i=0;i<e;)r+=t[i].clientX,n+=t[i].clientY,i++;return{x:hd(r/e),y:hd(n/e)}}function Y7(t){for(var e=[],r=0;r<t.pointers.length;)e[r]={clientX:hd(t.pointers[r].clientX),clientY:hd(t.pointers[r].clientY)},r++;return{timeStamp:TD(),pointers:e,center:$ae(e),deltaX:t.deltaX,deltaY:t.deltaY}}function O0(t,e,r){r||(r=Aae);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.sqrt(n*n+i*i)}function FR(t,e,r){r||(r=Aae);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.atan2(i,n)*180/Math.PI}function Fae(t,e){return t===e?j0:Zc(t)>=Zc(e)?t<0?Zm:eg:e<0?tg:fh}function GOe(t,e){var r=e.center,n=t.offsetDelta||{},i=t.prevDelta||{},s=t.prevInput||{};(e.eventType===Bn||s.eventType===Sr)&&(i=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:r.x,y:r.y}),e.deltaX=i.x+(r.x-n.x),e.deltaY=i.y+(r.y-n.y)}function qae(t,e,r){return{x:e/t||0,y:r/t||0}}function YOe(t,e){return O0(e[0],e[1],T0)/O0(t[0],t[1],T0)}function QOe(t,e){return FR(e[1],e[0],T0)+FR(t[1],t[0],T0)}function XOe(t,e){var r=t.lastInterval||e,n=e.timeStamp-r.timeStamp,i,s,o,a;if(e.eventType!==ui&&(n>HOe||r.velocity===void 0)){var l=e.deltaX-r.deltaX,u=e.deltaY-r.deltaY,d=qae(n,l,u);s=d.x,o=d.y,i=Zc(d.x)>Zc(d.y)?d.x:d.y,a=Fae(l,u),t.lastInterval=e}else i=r.velocity,s=r.velocityX,o=r.velocityY,a=r.direction;e.velocity=i,e.velocityX=s,e.velocityY=o,e.direction=a}function JOe(t,e){var r=t.session,n=e.pointers,i=n.length;r.firstInput||(r.firstInput=Y7(e)),i>1&&!r.firstMultiple?r.firstMultiple=Y7(e):i===1&&(r.firstMultiple=!1);var s=r.firstInput,o=r.firstMultiple,a=o?o.center:s.center,l=e.center=$ae(n);e.timeStamp=TD(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=FR(a,l),e.distance=O0(a,l),GOe(r,e),e.offsetDirection=Fae(e.deltaX,e.deltaY);var u=qae(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=Zc(u.x)>Zc(u.y)?u.x:u.y,e.scale=o?YOe(o.pointers,n):1,e.rotation=o?QOe(o.pointers,n):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,XOe(r,e);var d=t.element,h=e.srcEvent,f;h.composedPath?f=h.composedPath()[0]:h.path?f=h.path[0]:f=h.target,PD(f,d)&&(d=f),e.target=d}function ZOe(t,e,r){var n=r.pointers.length,i=r.changedPointers.length,s=e&Bn&&n-i===0,o=e&(Sr|ui)&&n-i===0;r.isFirst=!!s,r.isFinal=!!o,s&&(t.session={}),r.eventType=e,JOe(t,r),t.emit("hammer.input",r),t.recognize(r),t.session.prevInput=r}function om(t){return t.trim().split(/\s+/g)}function mp(t,e,r){Do(om(e),function(n){t.addEventListener(n,r,!1)})}function gp(t,e,r){Do(om(e),function(n){t.removeEventListener(n,r,!1)})}function Q7(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var Uh=function(){function t(r,n){var i=this;this.manager=r,this.callback=n,this.element=r.element,this.target=r.options.inputTarget,this.domHandler=function(s){Jb(r.options.enable,[r])&&i.handler(s)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&mp(this.element,this.evEl,this.domHandler),this.evTarget&&mp(this.target,this.evTarget,this.domHandler),this.evWin&&mp(Q7(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&gp(this.element,this.evEl,this.domHandler),this.evTarget&&gp(this.target,this.evTarget,this.domHandler),this.evWin&&gp(Q7(this.element),this.evWin,this.domHandler)},t}();function eu(t,e,r){if(t.indexOf&&!r)return t.indexOf(e);for(var n=0;n<t.length;){if(r&&t[n][r]==e||!r&&t[n]===e)return n;n++}return-1}var ePe={pointerdown:Bn,pointermove:mu,pointerup:Sr,pointercancel:ui,pointerout:ui},tPe={2:Jm,3:VOe,4:OD,5:UOe},Lae="pointerdown",Bae="pointermove pointerup pointercancel";Ao.MSPointerEvent&&!Ao.PointerEvent&&(Lae="MSPointerDown",Bae="MSPointerMove MSPointerUp MSPointerCancel");var zae=function(t){ts(e,t);function e(){var n,i=e.prototype;return i.evEl=Lae,i.evWin=Bae,n=t.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var r=e.prototype;return r.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=ePe[a],u=tPe[i.pointerType]||i.pointerType,d=u===Jm,h=eu(s,i.pointerId,"pointerId");l&Bn&&(i.button===0||d)?h<0&&(s.push(i),h=s.length-1):l&(Sr|ui)&&(o=!0),!(h<0)&&(s[h]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:u,srcEvent:i}),o&&s.splice(h,1))},e}(Uh);function am(t){return Array.prototype.slice.call(t,0)}function ID(t,e,r){for(var n=[],i=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];eu(i,o)<0&&n.push(t[s]),i[s]=o,s++}return r&&(e?n=n.sort(function(a,l){return a[e]>l[e]}):n=n.sort()),n}var rPe={touchstart:Bn,touchmove:mu,touchend:Sr,touchcancel:ui},nPe="touchstart touchmove touchend touchcancel",RD=function(t){ts(e,t);function e(){var n;return e.prototype.evTarget=nPe,n=t.apply(this,arguments)||this,n.targetIds={},n}var r=e.prototype;return r.handler=function(i){var s=rPe[i.type],o=iPe.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Jm,srcEvent:i})},e}(Uh);function iPe(t,e){var r=am(t.touches),n=this.targetIds;if(e&(Bn|mu)&&r.length===1)return n[r[0].identifier]=!0,[r,r];var i,s,o=am(t.changedTouches),a=[],l=this.target;if(s=r.filter(function(u){return PD(u.target,l)}),e===Bn)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),e&(Sr|ui)&&delete n[o[i].identifier],i++;if(a.length)return[ID(s.concat(a),"identifier",!0),a]}var sPe={mousedown:Bn,mousemove:mu,mouseup:Sr},oPe="mousedown",aPe="mousemove mouseup",MD=function(t){ts(e,t);function e(){var n,i=e.prototype;return i.evEl=oPe,i.evWin=aPe,n=t.apply(this,arguments)||this,n.pressed=!1,n}var r=e.prototype;return r.handler=function(i){var s=sPe[i.type];s&Bn&&i.button===0&&(this.pressed=!0),s&mu&&i.which!==1&&(s=Sr),this.pressed&&(s&Sr&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:OD,srcEvent:i}))},e}(Uh),lPe=2500,X7=25;function J7(t){var e=t.changedPointers,r=e[0];if(r.identifier===this.primaryTouch){var n={x:r.clientX,y:r.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,lPe)}}function cPe(t,e){t&Bn?(this.primaryTouch=e.changedPointers[0].identifier,J7.call(this,e)):t&(Sr|ui)&&J7.call(this,e)}function uPe(t){for(var e=t.srcEvent.clientX,r=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(e-i.x),o=Math.abs(r-i.y);if(s<=X7&&o<=X7)return!0}return!1}var Wae=function(){var t=function(e){ts(r,e);function r(i,s){var o;return o=e.call(this,i,s)||this,o.handler=function(a,l,u){var d=u.pointerType===Jm,h=u.pointerType===OD;if(!(h&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(d)cPe.call(gy(gy(o)),l,u);else if(h&&uPe.call(gy(gy(o)),u))return;o.callback(a,l,u)}},o.touch=new RD(o.manager,o.handler),o.mouse=new MD(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=r.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},r}(Uh);return t}();function dPe(t){var e,r=t.options.inputClass;return r?e=r:zOe?e=zae:WOe?e=RD:Rae?e=Wae:e=MD,new e(t,ZOe)}function fd(t,e,r){return Array.isArray(t)?(Do(t,r[e],r),!0):!1}var Gy=1,Qi=2,ph=4,cl=8,$o=cl,lm=16,Vs=32,hPe=1;function fPe(){return hPe++}function vy(t,e){var r=e.manager;return r?r.get(t):t}function Z7(t){return t&lm?"cancel":t&cl?"end":t&ph?"move":t&Qi?"start":""}var rg=function(){function t(r){r===void 0&&(r={}),this.options=Ss({enable:!0},r),this.id=fPe(),this.manager=null,this.state=Gy,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(n){return Jc(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(fd(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=vy(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return fd(n,"dropRecognizeWith",this)?this:(n=vy(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(fd(n,"requireFailure",this))return this;var i=this.requireFail;return n=vy(n,this),eu(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(fd(n,"dropRequireFailure",this))return this;n=vy(n,this);var i=eu(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<cl&&o(i.options.event+Z7(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=cl&&o(i.options.event+Z7(s))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=Vs},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(Vs|Gy)))return!1;n++}return!0},e.recognize=function(n){var i=Jc({},n);if(!Jb(this.options.enable,[this,i])){this.reset(),this.state=Vs;return}this.state&($o|lm|Vs)&&(this.state=Gy),this.state=this.process(i),this.state&(Qi|ph|cl|lm)&&this.tryEmit(i)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},t}(),qR=function(t){ts(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,Ss({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var r=e.prototype;return r.getTouchAction=function(){return[$R]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime<o.time;if(this.reset(),i.eventType&Bn&&this.count===0)return this.failTimeout();if(l&&u&&a){if(i.eventType!==Sr)return this.failTimeout();var d=this.pTime?i.timeStamp-this.pTime<o.interval:!0,h=!this.pCenter||O0(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!h||!d?this.count=1:this.count+=1,this._input=i;var f=this.count%o.taps;if(f===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=$o,s.tryEmit()},o.interval),Qi):$o}return Vs},r.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=Vs},this.options.interval),Vs},r.reset=function(){clearTimeout(this._timer)},r.emit=function(){this.state===$o&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(rg),mh=function(t){ts(e,t);function e(n){return n===void 0&&(n={}),t.call(this,Ss({pointers:1},n))||this}var r=e.prototype;return r.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},r.process=function(i){var s=this.state,o=i.eventType,a=s&(Qi|ph),l=this.attrTest(i);return a&&(o&ui||!l)?s|lm:a||l?o&Sr?s|cl:s&Qi?s|ph:Qi:Vs},e}(rg);function Vae(t){return t===fh?"down":t===tg?"up":t===Zm?"left":t===eg?"right":""}var AD=function(t){ts(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,Ss({event:"pan",threshold:10,pointers:1,direction:Mae},n))||this,i.pX=null,i.pY=null,i}var r=e.prototype;return r.getTouchAction=function(){var i=this.options.direction,s=[];return i&Qs&&s.push(sm),i&kc&&s.push(im),s},r.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,u=i.deltaX,d=i.deltaY;return l&s.direction||(s.direction&Qs?(l=u===0?j0:u<0?Zm:eg,o=u!==this.pX,a=Math.abs(i.deltaX)):(l=d===0?j0:d<0?tg:fh,o=d!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},r.attrTest=function(i){return mh.prototype.attrTest.call(this,i)&&(this.state&Qi||!(this.state&Qi)&&this.directionTest(i))},r.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=Vae(i.direction);s&&(i.additionalEvent=this.options.event+s),t.prototype.emit.call(this,i)},e}(mh),Uae=function(t){ts(e,t);function e(n){return n===void 0&&(n={}),t.call(this,Ss({event:"swipe",threshold:10,velocity:.3,direction:Qs|kc,pointers:1},n))||this}var r=e.prototype;return r.getTouchAction=function(){return AD.prototype.getTouchAction.call(this)},r.attrTest=function(i){var s=this.options.direction,o;return s&(Qs|kc)?o=i.overallVelocity:s&Qs?o=i.overallVelocityX:s&kc&&(o=i.overallVelocityY),t.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&Zc(o)>this.options.velocity&&i.eventType&Sr},r.emit=function(i){var s=Vae(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},e}(mh),Hae=function(t){ts(e,t);function e(n){return n===void 0&&(n={}),t.call(this,Ss({event:"pinch",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[Cc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&Qi)},r.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}t.prototype.emit.call(this,i)},e}(mh),Kae=function(t){ts(e,t);function e(n){return n===void 0&&(n={}),t.call(this,Ss({event:"rotate",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[Cc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&Qi)},e}(mh),Gae=function(t){ts(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,Ss({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var r=e.prototype;return r.getTouchAction=function(){return[Iae]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(Sr|ui)&&!u)this.reset();else if(i.eventType&Bn)this.reset(),this._timer=setTimeout(function(){s.state=$o,s.tryEmit()},o.time);else if(i.eventType&Sr)return $o;return Vs},r.reset=function(){clearTimeout(this._timer)},r.emit=function(i){this.state===$o&&(i&&i.eventType&Sr?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=TD(),this.manager.emit(this.options.event,this._input)))},e}(rg),Yae={domEvents:!1,touchAction:Pae,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},ez=[[Kae,{enable:!1}],[Hae,{enable:!1},["rotate"]],[Uae,{direction:Qs}],[AD,{direction:Qs},["swipe"]],[qR],[qR,{event:"doubletap",taps:2},["tap"]],[Gae]],pPe=1,tz=2;function rz(t,e){var r=t.element;if(r.style){var n;Do(t.options.cssProps,function(i,s){n=Xb(r.style,s),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function mPe(t,e){var r=document.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}var nz=function(){function t(r,n){var i=this;this.options=Jc({},Yae,n||{}),this.options.inputTarget=this.options.inputTarget||r,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=r,this.input=dPe(this),this.touchAction=new Dae(this,this.options.touchAction),rz(this,!0),Do(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var e=t.prototype;return e.set=function(n){return Jc(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?tz:pPe},e.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&$o)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==tz&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(Qi|ph|cl)&&(i.curRecognizer=s,a=s),l++}},e.get=function(n){if(n instanceof rg)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},e.add=function(n){if(fd(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(fd(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=eu(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},e.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return Do(om(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},e.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return Do(om(n),function(o){i?s[o]&&s[o].splice(eu(s[o],i),1):delete s[o]}),this},e.emit=function(n,i){this.options.domEvents&&mPe(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},e.destroy=function(){this.element&&rz(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),gPe={touchstart:Bn,touchmove:mu,touchend:Sr,touchcancel:ui},yPe="touchstart",vPe="touchstart touchmove touchend touchcancel",bPe=function(t){ts(e,t);function e(){var n,i=e.prototype;return i.evTarget=yPe,i.evWin=vPe,n=t.apply(this,arguments)||this,n.started=!1,n}var r=e.prototype;return r.handler=function(i){var s=gPe[i.type];if(s===Bn&&(this.started=!0),!!this.started){var o=xPe.call(this,i,s);s&(Sr|ui)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Jm,srcEvent:i})}},e}(Uh);function xPe(t,e){var r=am(t.touches),n=am(t.changedTouches);return e&(Sr|ui)&&(r=ID(r.concat(n),"identifier",!0)),[r,n]}function Qae(t,e,r){var n="DEPRECATED METHOD: "+e+`
`+r+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),t.apply(this,arguments)}}var Xae=Qae(function(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;)(!r||r&&t[n[i]]===void 0)&&(t[n[i]]=e[n[i]]),i++;return t},"extend","Use `assign`."),wPe=Qae(function(t,e){return Xae(t,e,!0)},"merge","Use `assign`.");function SPe(t,e,r){var n=e.prototype,i;i=t.prototype=Object.create(n),i.constructor=t,i._super=n,r&&Jc(i,r)}function iz(t,e){return function(){return t.apply(e,arguments)}}var EPe=function(){var t=function(r,n){return n===void 0&&(n={}),new nz(r,Ss({recognizers:ez.concat()},n))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=Mae,t.DIRECTION_DOWN=fh,t.DIRECTION_LEFT=Zm,t.DIRECTION_RIGHT=eg,t.DIRECTION_UP=tg,t.DIRECTION_HORIZONTAL=Qs,t.DIRECTION_VERTICAL=kc,t.DIRECTION_NONE=j0,t.DIRECTION_DOWN=fh,t.INPUT_START=Bn,t.INPUT_MOVE=mu,t.INPUT_END=Sr,t.INPUT_CANCEL=ui,t.STATE_POSSIBLE=Gy,t.STATE_BEGAN=Qi,t.STATE_CHANGED=ph,t.STATE_ENDED=cl,t.STATE_RECOGNIZED=$o,t.STATE_CANCELLED=lm,t.STATE_FAILED=Vs,t.Manager=nz,t.Input=Uh,t.TouchAction=Dae,t.TouchInput=RD,t.MouseInput=MD,t.PointerEventInput=zae,t.TouchMouseInput=Wae,t.SingleTouchInput=bPe,t.Recognizer=rg,t.AttrRecognizer=mh,t.Tap=qR,t.Pan=AD,t.Swipe=Uae,t.Pinch=Hae,t.Rotate=Kae,t.Press=Gae,t.on=mp,t.off=gp,t.each=Do,t.merge=wPe,t.extend=Xae,t.bindFn=iz,t.assign=Jc,t.inherit=SPe,t.bindFn=iz,t.prefixed=Xb,t.toArray=am,t.inArray=eu,t.uniqueArray=ID,t.splitStr=om,t.boolOrFn=Jb,t.hasParent=PD,t.addEventListeners=mp,t.removeEventListeners=gp,t.defaults=Jc({},Yae,{preset:ez}),t}();const Jae=lTe("DELETE");function _Pe(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return Zae({},t,...r)}function Zae(){const t=P0(...arguments);return tle(t),t}function P0(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(e.length<2)return e[0];if(e.length>2)return P0(Zae(e[0],e[1]),...mTe(e).call(e,2));const n=e[0],i=e[1];if(n instanceof Date&&i instanceof Date)return n.setTime(i.getTime()),n;for(const s of wTe(i))Object.prototype.propertyIsEnumerable.call(i,s)&&(i[s]===Jae?delete n[s]:n[s]!==null&&i[s]!==null&&typeof n[s]=="object"&&typeof i[s]=="object"&&!$s(n[s])&&!$s(i[s])?n[s]=P0(n[s],i[s]):n[s]=ele(i[s]));return n}function ele(t){return $s(t)?ps(t).call(t,e=>ele(e)):typeof t=="object"&&t!==null?t instanceof Date?new Date(t.getTime()):P0({},t):t}function tle(t){for(const e of jD(t))t[e]===Jae?delete t[e]:typeof t[e]=="object"&&t[e]!==null&&tle(t[e])}function NPe(){const t=()=>{};return{on:t,off:t,destroy:t,emit:t,get(){return{set:t}}}}const CPe=typeof window<"u"?window.Hammer||EPe:function(){return NPe()};function Oo(t){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const r=CPe(this._dom.overlay);r.on("tap",Eae(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{r.destroy()});const n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Xc(n).call(n,i=>{r.on(i,s=>{s.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=i=>{kPe(i.target,t)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=i=>{("key"in i?i.key==="Escape":i.keyCode===27)&&this.deactivate()}}$Oe(Oo.prototype);Oo.current=null;Oo.prototype.destroy=function(){this.deactivate();for(const r of UTe(t=kae(e=this._cleanupQueue).call(e,0)).call(t)){var t,e;r()}};Oo.prototype.activate=function(){Oo.current&&Oo.current.deactivate(),Oo.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};Oo.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};Oo.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};function kPe(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}var D2,sz;function jPe(){if(sz)return D2;sz=1,hae();var t=qr();return D2=t.Object.getOwnPropertySymbols,D2}var $2,oz;function TPe(){if(oz)return $2;oz=1;var t=jPe();return $2=t,$2}var F2,az;function OPe(){return az||(az=1,F2=TPe()),F2}var PPe=OPe(),lz=lt(PPe),q2={exports:{}},cz={},uz;function IPe(){if(uz)return cz;uz=1;var t=Ke(),e=Et(),r=to(),n=Bb().f,i=jr(),s=!i||e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getOwnPropertyDescriptor:function(a,l){return n(r(a),l)}}),cz}var dz;function RPe(){if(dz)return q2.exports;dz=1,IPe();var t=qr(),e=t.Object,r=q2.exports=function(i,s){return e.getOwnPropertyDescriptor(i,s)};return e.getOwnPropertyDescriptor.sham&&(r.sham=!0),q2.exports}var L2,hz;function MPe(){if(hz)return L2;hz=1;var t=RPe();return L2=t,L2}var B2,fz;function APe(){return fz||(fz=1,B2=MPe()),B2}var DPe=APe(),rle=lt(DPe),pz={},mz;function $Pe(){if(mz)return pz;mz=1;var t=Ke(),e=jr(),r=Nae(),n=to(),i=Bb(),s=Wb();return t({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(a){for(var l=n(a),u=i.f,d=r(l),h={},f=0,p,m;d.length>f;)m=u(l,p=d[f++]),m!==void 0&&s(h,p,m);return h}}),pz}var z2,gz;function FPe(){if(gz)return z2;gz=1,$Pe();var t=qr();return z2=t.Object.getOwnPropertyDescriptors,z2}var W2,yz;function qPe(){if(yz)return W2;yz=1;var t=FPe();return W2=t,W2}var V2,vz;function LPe(){return vz||(vz=1,V2=qPe()),V2}var BPe=LPe(),bz=lt(BPe),U2={exports:{}},xz={},wz;function zPe(){if(wz)return xz;wz=1;var t=Ke(),e=jr(),r=_D().f;return t({target:"Object",stat:!0,forced:Object.defineProperties!==r,sham:!e},{defineProperties:r}),xz}var Sz;function WPe(){if(Sz)return U2.exports;Sz=1,zPe();var t=qr(),e=t.Object,r=U2.exports=function(i,s){return e.defineProperties(i,s)};return e.defineProperties.sham&&(r.sham=!0),U2.exports}var H2,Ez;function VPe(){if(Ez)return H2;Ez=1;var t=WPe();return H2=t,H2}var K2,_z;function UPe(){return _z||(_z=1,K2=VPe()),K2}var HPe=UPe(),KPe=lt(HPe),G2,Nz;function GPe(){return Nz||(Nz=1,G2=rae()),G2}var YPe=GPe(),QPe=lt(YPe),Cz={},kz={},Y2={exports:{}},Q2,jz;function XPe(){if(jz)return Q2;jz=1;var t=Et();return Q2=t(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),Q2}var X2,Tz;function JPe(){if(Tz)return X2;Tz=1;var t=Et(),e=Hn(),r=ra(),n=XPe(),i=Object.isExtensible,s=t(function(){});return X2=s||n?function(a){return!e(a)||n&&r(a)==="ArrayBuffer"?!1:i?i(a):!0}:i,X2}var J2,Oz;function ZPe(){if(Oz)return J2;Oz=1;var t=Et();return J2=!t(function(){return Object.isExtensible(Object.preventExtensions({}))}),J2}var Pz;function nle(){if(Pz)return Y2.exports;Pz=1;var t=Ke(),e=Rt(),r=Gm(),n=Hn(),i=Qr(),s=es().f,o=Hb(),a=lae(),l=JPe(),u=Lb(),d=ZPe(),h=!1,f=u("meta"),p=0,m=function(x){s(x,f,{value:{objectID:"O"+p++,weakData:{}}})},g=function(x,S){if(!n(x))return typeof x=="symbol"?x:(typeof x=="string"?"S":"P")+x;if(!i(x,f)){if(!l(x))return"F";if(!S)return"E";m(x)}return x[f].objectID},y=function(x,S){if(!i(x,f)){if(!l(x))return!0;if(!S)return!1;m(x)}return x[f].weakData},v=function(x){return d&&h&&l(x)&&!i(x,f)&&m(x),x},b=function(){w.enable=function(){},h=!0;var x=o.f,S=e([].splice),E={};E[f]=1,x(E).length&&(o.f=function(N){for(var _=x(N),k=0,j=_.length;k<j;k++)if(_[k]===f){S(_,k,1);break}return _},t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:a.f}))},w=Y2.exports={enable:b,fastKey:g,getWeakData:y,onFreeze:v};return r[f]=!0,Y2.exports}var Z2,Iz;function eIe(){if(Iz)return Z2;Iz=1;var t=Xr(),e=Vh(),r=t("iterator"),n=Array.prototype;return Z2=function(i){return i!==void 0&&(e.Array===i||n[r]===i)},Z2}var e_,Rz;function ile(){if(Rz)return e_;Rz=1;var t=Pl(),e=yD(),r=Vm(),n=Vh(),i=Xr(),s=i("iterator");return e_=function(o){if(!r(o))return e(o,s)||e(o,"@@iterator")||n[t(o)]},e_}var t_,Mz;function sle(){if(Mz)return t_;Mz=1;var t=hi(),e=na(),r=ia(),n=$h(),i=ile(),s=TypeError;return t_=function(o,a){var l=arguments.length<2?i(o):a;if(e(l))return r(t(l,o));throw new s(n(o)+" is not iterable")},t_}var r_,Az;function DD(){if(Az)return r_;Az=1;var t=hi(),e=ia(),r=yD();return r_=function(n,i,s){var o,a;e(n);try{if(o=r(n,"return"),!o){if(i==="throw")throw s;return s}o=t(o,n)}catch(l){a=!0,o=l}if(i==="throw")throw s;if(a)throw o;return e(o),s},r_}var n_,Dz;function $D(){if(Dz)return n_;Dz=1;var t=zb(),e=hi(),r=ia(),n=$h(),i=eIe(),s=Ol(),o=Yr(),a=sle(),l=ile(),u=DD(),d=TypeError,h=function(p,m){this.stopped=p,this.result=m},f=h.prototype;return n_=function(p,m,g){var y=g&&g.that,v=!!(g&&g.AS_ENTRIES),b=!!(g&&g.IS_RECORD),w=!!(g&&g.IS_ITERATOR),x=!!(g&&g.INTERRUPTED),S=t(m,y),E,N,_,k,j,T,P,O=function(F){return E&&u(E,"normal"),new h(!0,F)},D=function(F){return v?(r(F),x?S(F[0],F[1],O):S(F[0],F[1])):x?S(F,O):S(F)};if(b)E=p.iterator;else if(w)E=p;else{if(N=l(p),!N)throw new d(n(p)+" is not iterable");if(i(N)){for(_=0,k=s(p);k>_;_++)if(j=D(p[_]),j&&o(f,j))return j;return new h(!1)}E=a(p,N)}for(T=b?p.next:E.next;!(P=e(T,E)).done;){try{j=D(P.value)}catch(F){u(E,"throw",F)}if(typeof j=="object"&&j&&o(f,j))return j}return new h(!1)},n_}var i_,$z;function ole(){if($z)return i_;$z=1;var t=Yr(),e=TypeError;return i_=function(r,n){if(t(n,r))return r;throw new e("Incorrect invocation")},i_}var s_,Fz;function ale(){if(Fz)return s_;Fz=1;var t=Ke(),e=kr(),r=nle(),n=Et(),i=Lh(),s=$D(),o=ole(),a=Gr(),l=Hn(),u=Vm(),d=pu(),h=es().f,f=Wh().forEach,p=jr(),m=Xm(),g=m.set,y=m.getterFor;return s_=function(v,b,w){var x=v.indexOf("Map")!==-1,S=v.indexOf("Weak")!==-1,E=x?"set":"add",N=e[v],_=N&&N.prototype,k={},j;if(!p||!a(N)||!(S||_.forEach&&!n(function(){new N().entries().next()})))j=w.getConstructor(b,v,x,E),r.enable();else{j=b(function(O,D){g(o(O,T),{type:v,collection:new N}),u(D)||s(D,O[E],{that:O,AS_ENTRIES:x})});var T=j.prototype,P=y(v);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(O){var D=O==="add"||O==="set";O in _&&!(S&&O==="clear")&&i(T,O,function(F,$){var q=P(this).collection;if(!D&&S&&!l(F))return O==="get"?void 0:!1;var M=q[O](F===0?0:F,$);return D?this:M})}),S||h(T,"size",{configurable:!0,get:function(){return P(this).collection.size}})}return d(j,v,!1,!0),k[v]=j,t({global:!0,forced:!0},k),S||w.setStrong(j,v,x),j},s_}var o_,qz;function tIe(){if(qz)return o_;qz=1;var t=Qm();return o_=function(e,r,n){for(var i in r)n&&n.unsafe&&e[i]?e[i]=r[i]:t(e,i,r[i],n);return e},o_}var a_,Lz;function rIe(){if(Lz)return a_;Lz=1;var t=ji(),e=ND(),r=Xr(),n=jr(),i=r("species");return a_=function(s){var o=t(s);n&&o&&!o[i]&&e(o,i,{configurable:!0,get:function(){return this}})},a_}var l_,Bz;function lle(){if(Bz)return l_;Bz=1;var t=Ym(),e=ND(),r=tIe(),n=zb(),i=ole(),s=Vm(),o=$D(),a=CD(),l=kD(),u=rIe(),d=jr(),h=nle().fastKey,f=Xm(),p=f.set,m=f.getterFor;return l_={getConstructor:function(g,y,v,b){var w=g(function(_,k){i(_,x),p(_,{type:y,index:t(null),first:null,last:null,size:0}),d||(_.size=0),s(k)||o(k,_[b],{that:_,AS_ENTRIES:v})}),x=w.prototype,S=m(y),E=function(_,k,j){var T=S(_),P=N(_,k),O,D;return P?P.value=j:(T.last=P={index:D=h(k,!0),key:k,value:j,previous:O=T.last,next:null,removed:!1},T.first||(T.first=P),O&&(O.next=P),d?T.size++:_.size++,D!=="F"&&(T.index[D]=P)),_},N=function(_,k){var j=S(_),T=h(k),P;if(T!=="F")return j.index[T];for(P=j.first;P;P=P.next)if(P.key===k)return P};return r(x,{clear:function(){for(var k=this,j=S(k),T=j.first;T;)T.removed=!0,T.previous&&(T.previous=T.previous.next=null),T=T.next;j.first=j.last=null,j.index=t(null),d?j.size=0:k.size=0},delete:function(_){var k=this,j=S(k),T=N(k,_);if(T){var P=T.next,O=T.previous;delete j.index[T.index],T.removed=!0,O&&(O.next=P),P&&(P.previous=O),j.first===T&&(j.first=P),j.last===T&&(j.last=O),d?j.size--:k.size--}return!!T},forEach:function(k){for(var j=S(this),T=n(k,arguments.length>1?arguments[1]:void 0),P;P=P?P.next:j.first;)for(T(P.value,P.key,this);P&&P.removed;)P=P.previous},has:function(k){return!!N(this,k)}}),r(x,v?{get:function(k){var j=N(this,k);return j&&j.value},set:function(k,j){return E(this,k===0?0:k,j)}}:{add:function(k){return E(this,k=k===0?0:k,k)}}),d&&e(x,"size",{configurable:!0,get:function(){return S(this).size}}),w},setStrong:function(g,y,v){var b=y+" Iterator",w=m(y),x=m(b);a(g,y,function(S,E){p(this,{type:b,target:S,state:w(S),kind:E,last:null})},function(){for(var S=x(this),E=S.kind,N=S.last;N&&N.removed;)N=N.previous;return!S.target||!(S.last=N=N?N.next:S.state.first)?(S.target=null,l(void 0,!0)):l(E==="keys"?N.key:E==="values"?N.value:[N.key,N.value],!1)},v?"entries":"values",!v,!0),u(y)}},l_}var zz;function nIe(){if(zz)return kz;zz=1;var t=ale(),e=lle();return t("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),kz}var Wz;function iIe(){return Wz||(Wz=1,nIe()),Cz}var Vz={},c_,Uz;function cle(){return Uz||(Uz=1,c_=function(t,e){return e===1?function(r,n){return r[t](n)}:function(r,n,i){return r[t](n,i)}}),c_}var u_,Hz;function sIe(){if(Hz)return u_;Hz=1;var t=ji(),e=cle(),r=t("Map");return u_={Map:r,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:r.prototype},u_}var Kz;function oIe(){if(Kz)return Vz;Kz=1;var t=Ke(),e=Rt(),r=na(),n=hu(),i=$D(),s=sIe(),o=Fh(),a=Et(),l=s.Map,u=s.has,d=s.get,h=s.set,f=e([].push),p=o||a(function(){return l.groupBy("ab",function(m){return m}).get("a").length!==1});return t({target:"Map",stat:!0,forced:o||p},{groupBy:function(g,y){n(g),r(y);var v=new l,b=0;return i(g,function(w){var x=y(w,b++);u(v,x)?f(d(v,x),w):h(v,x,[w])}),v}}),Vz}var d_,Gz;function aIe(){if(Gz)return d_;Gz=1,Rl(),iIe(),oIe(),Yb();var t=qr();return d_=t.Map,d_}var h_,Yz;function lIe(){if(Yz)return h_;Yz=1;var t=aIe();return Ml(),h_=t,h_}var f_,Qz;function cIe(){return Qz||(Qz=1,f_=lIe()),f_}var uIe=cIe(),ule=lt(uIe),Xz={},Jz;function dIe(){if(Jz)return Xz;Jz=1;var t=Ke(),e=Wh().some,r=Qb(),n=r("some");return t({target:"Array",proto:!0,forced:!n},{some:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),Xz}var p_,Zz;function hIe(){if(Zz)return p_;Zz=1,dIe();var t=fi();return p_=t("Array","some"),p_}var m_,e9;function fIe(){if(e9)return m_;e9=1;var t=Yr(),e=hIe(),r=Array.prototype;return m_=function(n){var i=n.some;return n===r||t(r,n)&&i===r.some?e:i},m_}var g_,t9;function pIe(){if(t9)return g_;t9=1;var t=fIe();return g_=t,g_}var y_,r9;function mIe(){return r9||(r9=1,y_=pIe()),y_}var gIe=mIe(),yIe=lt(gIe),v_,n9;function vIe(){if(n9)return v_;n9=1,Rl();var t=fi();return v_=t("Array","keys"),v_}var b_,i9;function bIe(){if(i9)return b_;i9=1;var t=vIe();return b_=t,b_}var x_,s9;function xIe(){if(s9)return x_;s9=1,Ml();var t=Pl(),e=Qr(),r=Yr(),n=bIe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return x_=function(o){var a=o.keys;return o===i||r(i,o)&&a===i.keys||e(s,t(o))?n:a},x_}var w_,o9;function wIe(){return o9||(o9=1,w_=xIe()),w_}var SIe=wIe(),Wu=lt(SIe),a9={},S_,l9;function EIe(){if(l9)return S_;l9=1;var t=zh(),e=Math.floor,r=function(n,i){var s=n.length;if(s<8)for(var o=1,a,l;o<s;){for(l=o,a=n[o];l&&i(n[l-1],a)>0;)n[l]=n[--l];l!==o++&&(n[l]=a)}else for(var u=e(s/2),d=r(t(n,0,u),i),h=r(t(n,u),i),f=d.length,p=h.length,m=0,g=0;m<f||g<p;)n[m+g]=m<f&&g<p?i(d[m],h[g])<=0?d[m++]:h[g++]:m<f?d[m++]:h[g++];return n};return S_=r,S_}var E_,c9;function _Ie(){if(c9)return E_;c9=1;var t=Ah(),e=t.match(/firefox\/(\d+)/i);return E_=!!e&&+e[1],E_}var __,u9;function NIe(){if(u9)return __;u9=1;var t=Ah();return __=/MSIE|Trident/.test(t),__}var N_,d9;function CIe(){if(d9)return N_;d9=1;var t=Ah(),e=t.match(/AppleWebKit\/(\d+)\./);return N_=!!e&&+e[1],N_}var h9;function kIe(){if(h9)return a9;h9=1;var t=Ke(),e=Rt(),r=na(),n=Ns(),i=Ol(),s=Cae(),o=Il(),a=Et(),l=EIe(),u=Qb(),d=_Ie(),h=NIe(),f=Um(),p=CIe(),m=[],g=e(m.sort),y=e(m.push),v=a(function(){m.sort(void 0)}),b=a(function(){m.sort(null)}),w=u("sort"),x=!a(function(){if(f)return f<70;if(!(d&&d>3)){if(h)return!0;if(p)return p<603;var N="",_,k,j,T;for(_=65;_<76;_++){switch(k=String.fromCharCode(_),_){case 66:case 69:case 70:case 72:j=3;break;case 68:case 71:j=4;break;default:j=2}for(T=0;T<47;T++)m.push({k:k+T,v:j})}for(m.sort(function(P,O){return O.v-P.v}),T=0;T<m.length;T++)k=m[T].k.charAt(0),N.charAt(N.length-1)!==k&&(N+=k);return N!=="DGBEFHACIJK"}}),S=v||!b||!w||!x,E=function(N){return function(_,k){return k===void 0?-1:_===void 0?1:N!==void 0?+N(_,k)||0:o(_)>o(k)?1:-1}};return t({target:"Array",proto:!0,forced:S},{sort:function(_){_!==void 0&&r(_);var k=n(this);if(x)return _===void 0?g(k):g(k,_);var j=[],T=i(k),P,O;for(O=0;O<T;O++)O in k&&y(j,k[O]);for(l(j,E(_)),P=i(j),O=0;O<P;)k[O]=j[O++];for(;O<T;)s(k,O++);return k}}),a9}var C_,f9;function jIe(){if(f9)return C_;f9=1,kIe();var t=fi();return C_=t("Array","sort"),C_}var k_,p9;function TIe(){if(p9)return k_;p9=1;var t=Yr(),e=jIe(),r=Array.prototype;return k_=function(n){var i=n.sort;return n===r||t(r,n)&&i===r.sort?e:i},k_}var j_,m9;function OIe(){if(m9)return j_;m9=1;var t=TIe();return j_=t,j_}var T_,g9;function PIe(){return g9||(g9=1,T_=OIe()),T_}var IIe=PIe(),LR=lt(IIe),O_,y9;function RIe(){if(y9)return O_;y9=1,Rl();var t=fi();return O_=t("Array","values"),O_}var P_,v9;function MIe(){if(v9)return P_;v9=1;var t=RIe();return P_=t,P_}var I_,b9;function AIe(){if(b9)return I_;b9=1,Ml();var t=Pl(),e=Qr(),r=Yr(),n=MIe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return I_=function(o){var a=o.values;return o===i||r(i,o)&&a===i.values||e(s,t(o))?n:a},I_}var R_,x9;function DIe(){return x9||(x9=1,R_=AIe()),R_}var $Ie=DIe(),w9=lt($Ie),M_,S9;function FIe(){return S9||(S9=1,M_=Sae()),M_}var qIe=FIe(),pd=lt(qIe),A_,E9;function LIe(){if(E9)return A_;E9=1,Rl();var t=fi();return A_=t("Array","entries"),A_}var D_,_9;function BIe(){if(_9)return D_;_9=1;var t=LIe();return D_=t,D_}var $_,N9;function zIe(){if(N9)return $_;N9=1,Ml();var t=Pl(),e=Qr(),r=Yr(),n=BIe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return $_=function(o){var a=o.entries;return o===i||r(i,o)&&a===i.entries||e(s,t(o))?n:a},$_}var F_,C9;function WIe(){return C9||(C9=1,F_=zIe()),F_}var VIe=WIe(),UIe=lt(VIe);const nn=[];for(let t=0;t<256;++t)nn.push((t+256).toString(16).slice(1));function HIe(t,e=0){return(nn[t[e+0]]+nn[t[e+1]]+nn[t[e+2]]+nn[t[e+3]]+"-"+nn[t[e+4]]+nn[t[e+5]]+"-"+nn[t[e+6]]+nn[t[e+7]]+"-"+nn[t[e+8]]+nn[t[e+9]]+"-"+nn[t[e+10]]+nn[t[e+11]]+nn[t[e+12]]+nn[t[e+13]]+nn[t[e+14]]+nn[t[e+15]]).toLowerCase()}let q_;const KIe=new Uint8Array(16);function GIe(){if(!q_){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");q_=crypto.getRandomValues.bind(crypto)}return q_(KIe)}const YIe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var k9={randomUUID:YIe};function QIe(t,e,r){var i;t=t||{};const n=t.random??((i=t.rng)==null?void 0:i.call(t))??GIe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,HIe(n)}function XIe(t,e,r){return k9.randomUUID&&!t?k9.randomUUID():QIe(t)}function j9(t){return typeof t=="string"||typeof t=="number"}class FD{constructor(e){ll(this,"_queue",[]),ll(this,"_timeout",null),ll(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(e)}setOptions(e){e&&typeof e.delay<"u"&&(this.delay=e.delay),e&&typeof e.max<"u"&&(this.max=e.max),this._flushIfNeeded()}static extend(e,r){const n=new FD(r);if(e.flush!==void 0)throw new Error("Target object already has a property flush");e.flush=()=>{n.flush()};const i=[{name:"flush",original:void 0}];if(r&&r.replace)for(let s=0;s<r.replace.length;s++){const o=r.replace[s];i.push({name:o,original:e[o]}),n.replace(e,o)}return n._extended={object:e,methods:i},n}destroy(){if(this.flush(),this._extended){const e=this._extended.object,r=this._extended.methods;for(let n=0;n<r.length;n++){const i=r[n];i.original?e[i.name]=i.original:delete e[i.name]}this._extended=null}}replace(e,r){const n=this,i=e[r];if(!i)throw new Error("Method "+r+" undefined");e[r]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];n.queue({args:o,fn:i,context:this})}}queue(e){typeof e=="function"?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()}_flushIfNeeded(){this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=MOe(()=>{this.flush()},this.delay))}flush(){var e,r;Xc(e=kae(r=this._queue).call(r,0)).call(e,n=>{n.fn.apply(n.context||n.fn,n.args||[])})}}class I0{constructor(){ll(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),ll(this,"subscribe",I0.prototype.on),ll(this,"unsubscribe",I0.prototype.off)}_trigger(e,r,n){var i;if(e==="*")throw new Error("Cannot trigger event *");Xc(i=[...this._subscribers[e],...this._subscribers["*"]]).call(i,s=>{s(e,r,n??null)})}on(e,r){typeof r=="function"&&this._subscribers[e].push(r)}off(e,r){var n;this._subscribers[e]=dd(n=this._subscribers[e]).call(n,i=>i!==r)}}var T9={},O9={},P9;function JIe(){if(P9)return O9;P9=1;var t=ale(),e=lle();return t("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),O9}var I9;function ZIe(){return I9||(I9=1,JIe()),T9}var R9={},L_,M9;function gu(){if(M9)return L_;M9=1;var t=$h(),e=TypeError;return L_=function(r){if(typeof r=="object"&&"size"in r&&"has"in r&&"add"in r&&"delete"in r&&"keys"in r)return r;throw new e(t(r)+" is not a set")},L_}var B_,A9;function yu(){if(A9)return B_;A9=1;var t=ji(),e=cle(),r=t("Set"),n=r.prototype;return B_={Set:r,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:n},B_}var z_,D9;function vu(){if(D9)return z_;D9=1;var t=hi();return z_=function(e,r,n){for(var i=n?e:e.iterator,s=e.next,o,a;!(o=t(s,i)).done;)if(a=r(o.value),a!==void 0)return a},z_}var W_,$9;function ng(){if($9)return W_;$9=1;var t=vu();return W_=function(e,r,n){return n?t(e.keys(),r,!0):e.forEach(r)},W_}var V_,F9;function qD(){if(F9)return V_;F9=1;var t=yu(),e=ng(),r=t.Set,n=t.add;return V_=function(i){var s=new r;return e(i,function(o){n(s,o)}),s},V_}var U_,q9;function ig(){return q9||(q9=1,U_=function(t){return t.size}),U_}var H_,L9;function eRe(){return L9||(L9=1,H_=function(t){return{iterator:t,next:t.next,done:!1}}),H_}var K_,B9;function bu(){if(B9)return K_;B9=1;var t=na(),e=ia(),r=hi(),n=Bh(),i=eRe(),s="Invalid size",o=RangeError,a=TypeError,l=Math.max,u=function(d,h){this.set=d,this.size=l(h,0),this.has=t(d.has),this.keys=t(d.keys)};return u.prototype={getIterator:function(){return i(e(r(this.keys,this.set)))},includes:function(d){return r(this.has,this.set,d)}},K_=function(d){e(d);var h=+d.size;if(h!==h)throw new a(s);var f=n(h);if(f<0)throw new o(s);return new u(d,f)},K_}var G_,z9;function tRe(){if(z9)return G_;z9=1;var t=gu(),e=yu(),r=qD(),n=ig(),i=bu(),s=ng(),o=vu(),a=e.has,l=e.remove;return G_=function(d){var h=t(this),f=i(d),p=r(h);return n(h)<=f.size?s(h,function(m){f.includes(m)&&l(p,m)}):o(f.getIterator(),function(m){a(p,m)&&l(p,m)}),p},G_}var Y_,W9;function xu(){return W9||(W9=1,Y_=function(){return!1}),Y_}var V9;function rRe(){if(V9)return R9;V9=1;var t=Ke(),e=tRe(),r=Et(),n=xu(),i=!n("difference",function(o){return o.size===0}),s=i||r(function(){var o={size:1,has:function(){return!0},keys:function(){var l=0;return{next:function(){var u=l++>1;return a.has(1)&&a.clear(),{done:u,value:2}}}}},a=new Set([1,2,3,4]);return a.difference(o).size!==3});return t({target:"Set",proto:!0,real:!0,forced:s},{difference:e}),R9}var U9={},Q_,H9;function nRe(){if(H9)return Q_;H9=1;var t=gu(),e=yu(),r=ig(),n=bu(),i=ng(),s=vu(),o=e.Set,a=e.add,l=e.has;return Q_=function(d){var h=t(this),f=n(d),p=new o;return r(h)>f.size?s(f.getIterator(),function(m){l(h,m)&&a(p,m)}):i(h,function(m){f.includes(m)&&a(p,m)}),p},Q_}var K9;function iRe(){if(K9)return U9;K9=1;var t=Ke(),e=Et(),r=nRe(),n=xu(),i=!n("intersection",function(s){return s.size===2&&s.has(1)&&s.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return t({target:"Set",proto:!0,real:!0,forced:i},{intersection:r}),U9}var G9={},X_,Y9;function sRe(){if(Y9)return X_;Y9=1;var t=gu(),e=yu().has,r=ig(),n=bu(),i=ng(),s=vu(),o=DD();return X_=function(l){var u=t(this),d=n(l);if(r(u)<=d.size)return i(u,function(f){if(d.includes(f))return!1},!0)!==!1;var h=d.getIterator();return s(h,function(f){if(e(u,f))return o(h,"normal",!1)})!==!1},X_}var Q9;function oRe(){if(Q9)return G9;Q9=1;var t=Ke(),e=sRe(),r=xu(),n=!r("isDisjointFrom",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:e}),G9}var X9={},J_,J9;function aRe(){if(J9)return J_;J9=1;var t=gu(),e=ig(),r=ng(),n=bu();return J_=function(s){var o=t(this),a=n(s);return e(o)>a.size?!1:r(o,function(l){if(!a.includes(l))return!1},!0)!==!1},J_}var Z9;function lRe(){if(Z9)return X9;Z9=1;var t=Ke(),e=aRe(),r=xu(),n=!r("isSubsetOf",function(i){return i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:e}),X9}var eW={},Z_,tW;function cRe(){if(tW)return Z_;tW=1;var t=gu(),e=yu().has,r=ig(),n=bu(),i=vu(),s=DD();return Z_=function(a){var l=t(this),u=n(a);if(r(l)<u.size)return!1;var d=u.getIterator();return i(d,function(h){if(!e(l,h))return s(d,"normal",!1)})!==!1},Z_}var rW;function uRe(){if(rW)return eW;rW=1;var t=Ke(),e=cRe(),r=xu(),n=!r("isSupersetOf",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:e}),eW}var nW={},eN,iW;function dRe(){if(iW)return eN;iW=1;var t=gu(),e=yu(),r=qD(),n=bu(),i=vu(),s=e.add,o=e.has,a=e.remove;return eN=function(u){var d=t(this),h=n(u).getIterator(),f=r(d);return i(h,function(p){o(d,p)?a(f,p):s(f,p)}),f},eN}var tN,sW;function dle(){return sW||(sW=1,tN=function(t){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[t](r);return n.size===1&&n.values().next().value===4}catch{return!1}}),tN}var oW;function hRe(){if(oW)return nW;oW=1;var t=Ke(),e=dRe(),r=dle(),n=xu(),i=!n("symmetricDifference")||!r("symmetricDifference");return t({target:"Set",proto:!0,real:!0,forced:i},{symmetricDifference:e}),nW}var aW={},rN,lW;function fRe(){if(lW)return rN;lW=1;var t=gu(),e=yu().add,r=qD(),n=bu(),i=vu();return rN=function(o){var a=t(this),l=n(o).getIterator(),u=r(a);return i(l,function(d){e(u,d)}),u},rN}var cW;function pRe(){if(cW)return aW;cW=1;var t=Ke(),e=fRe(),r=dle(),n=xu(),i=!n("union")||!r("union");return t({target:"Set",proto:!0,real:!0,forced:i},{union:e}),aW}var nN,uW;function mRe(){if(uW)return nN;uW=1,Rl(),ZIe(),rRe(),iRe(),oRe(),lRe(),uRe(),hRe(),pRe(),Yb();var t=qr();return nN=t.Set,nN}var iN,dW;function gRe(){if(dW)return iN;dW=1;var t=mRe();return Ml(),iN=t,iN}var sN,hW;function yRe(){return hW||(hW=1,sN=gRe()),sN}var vRe=yRe(),oN=lt(vRe),aN,fW;function bRe(){if(fW)return aN;fW=1,Rl(),Yb();var t=sle();return aN=t,aN}var lN,pW;function xRe(){if(pW)return lN;pW=1;var t=bRe();return Ml(),lN=t,lN}var cN,mW;function wRe(){if(mW)return cN;mW=1;var t=xRe();return cN=t,cN}var uN,gW;function SRe(){if(gW)return uN;gW=1;var t=wRe();return uN=t,uN}var dN,yW;function ERe(){return yW||(yW=1,dN=SRe()),dN}var hN,vW;function _Re(){return vW||(vW=1,hN=ERe()),hN}var NRe=_Re(),fN=lt(NRe);class oc{constructor(e){this._pairs=e}*[pd](){for(const[e,r]of this._pairs)yield[e,r]}*entries(){for(const[e,r]of this._pairs)yield[e,r]}*keys(){for(const[e]of this._pairs)yield e}*values(){for(const[,e]of this._pairs)yield e}toIdArray(){var e;return ps(e=[...this._pairs]).call(e,r=>r[0])}toItemArray(){var e;return ps(e=[...this._pairs]).call(e,r=>r[1])}toEntryArray(){return[...this._pairs]}toObjectMap(){const e=yOe(null);for(const[r,n]of this._pairs)e[r]=n;return e}toMap(){return new ule(this._pairs)}toIdSet(){return new oN(this.toIdArray())}toItemSet(){return new oN(this.toItemArray())}cache(){return new oc([...this._pairs])}distinct(e){const r=new oN;for(const[n,i]of this._pairs)r.add(e(i,n));return r}filter(e){const r=this._pairs;return new oc({*[pd](){for(const[n,i]of r)e(i,n)&&(yield[n,i])}})}forEach(e){for(const[r,n]of this._pairs)e(n,r)}map(e){const r=this._pairs;return new oc({*[pd](){for(const[n,i]of r)yield[n,e(i,n)]}})}max(e){const r=fN(this._pairs);let n=r.next();if(n.done)return null;let i=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=r.next()).done;){const[o,a]=n.value,l=e(a,o);l>s&&(s=l,i=a)}return i}min(e){const r=fN(this._pairs);let n=r.next();if(n.done)return null;let i=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=r.next()).done;){const[o,a]=n.value,l=e(a,o);l<s&&(s=l,i=a)}return i}reduce(e,r){for(const[n,i]of this._pairs)r=e(r,i,n);return r}sort(e){return new oc({[pd]:()=>{var r;return fN(LR(r=[...this._pairs]).call(r,(n,i)=>{let[s,o]=n,[a,l]=i;return e(o,l,s,a)}))}})}}function bW(t,e){var r=jD(t);if(lz){var n=lz(t);e&&(n=dd(n).call(n,function(i){return rle(t,i).enumerable})),r.push.apply(r,n)}return r}function xW(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?Xc(r=bW(Object(i),!0)).call(r,function(s){ll(t,s,i[s])}):bz?KPe(t,bz(i)):Xc(n=bW(Object(i))).call(n,function(s){QPe(t,s,rle(i,s))})}return t}function CRe(t,e){return t[e]==null&&(t[e]=XIe()),t}class gh extends I0{get idProp(){return this._idProp}constructor(e,r){super(),ll(this,"_queue",null),e&&!$s(e)&&(r=e,e=[]),this._options=r||{},this._data=new ule,this.length=0,this._idProp=this._options.fieldId||"id",e&&e.length&&this.add(e),this.setOptions(r)}setOptions(e){e&&e.queue!==void 0&&(e.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=FD.extend(this,{replace:["add","update","remove"]})),e.queue&&typeof e.queue=="object"&&this._queue.setOptions(e.queue)))}add(e,r){const n=[];let i;if($s(e)){const s=ps(e).call(e,o=>o[this._idProp]);if(yIe(s).call(s,o=>this._data.has(o)))throw new Error("A duplicate id was found in the parameter array.");for(let o=0,a=e.length;o<a;o++)i=this._addItem(e[o]),n.push(i)}else if(e&&typeof e=="object")i=this._addItem(e),n.push(i);else throw new Error("Unknown dataType");return n.length&&this._trigger("add",{items:n},r),n}update(e,r){const n=[],i=[],s=[],o=[],a=this._idProp,l=u=>{const d=u[a];if(d!=null&&this._data.has(d)){const h=u,f=sOe({},this._data.get(d)),p=this._updateItem(h);i.push(p),o.push(h),s.push(f)}else{const h=this._addItem(u);n.push(h)}};if($s(e))for(let u=0,d=e.length;u<d;u++)e[u]&&typeof e[u]=="object"?l(e[u]):console.warn("Ignoring input item, which is not an object at index "+u);else if(e&&typeof e=="object")l(e);else throw new Error("Unknown dataType");if(n.length&&this._trigger("add",{items:n},r),i.length){const u={items:i,oldData:s,data:o};this._trigger("update",u,r)}return dOe(n).call(n,i)}updateOnly(e,r){var n;$s(e)||(e=[e]);const i=ps(n=ps(e).call(e,s=>{const o=this._data.get(s[this._idProp]);if(o==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:o,update:s}})).call(n,s=>{let{oldData:o,update:a}=s;const l=o[this._idProp],u=_Pe(o,a);return this._data.set(l,u),{id:l,oldData:o,updatedData:u}});if(i.length){const s={items:ps(i).call(i,o=>o.id),oldData:ps(i).call(i,o=>o.oldData),data:ps(i).call(i,o=>o.updatedData)};return this._trigger("update",s,r),s.items}else return[]}get(e,r){let n,i,s;j9(e)?(n=e,s=r):$s(e)?(i=e,s=r):s=e;const o=s&&s.returnType==="Object"?"Object":"Array",a=s&&dd(s),l=[];let u,d,h;if(n!=null)u=this._data.get(n),u&&a&&!a(u)&&(u=void 0);else if(i!=null)for(let p=0,m=i.length;p<m;p++)u=this._data.get(i[p]),u!=null&&(!a||a(u))&&l.push(u);else{var f;d=[...Wu(f=this._data).call(f)];for(let p=0,m=d.length;p<m;p++)h=d[p],u=this._data.get(h),u!=null&&(!a||a(u))&&l.push(u)}if(s&&s.order&&n==null&&this._sort(l,s.order),s&&s.fields){const p=s.fields;if(n!=null&&u!=null)u=this._filterFields(u,p);else for(let m=0,g=l.length;m<g;m++)l[m]=this._filterFields(l[m],p)}if(o=="Object"){const p={};for(let m=0,g=l.length;m<g;m++){const y=l[m],v=y[this._idProp];p[v]=y}return p}else return n!=null?u??null:l}getIds(e){const r=this._data,n=e&&dd(e),i=e&&e.order,s=[...Wu(r).call(r)],o=[];if(n)if(i){const a=[];for(let l=0,u=s.length;l<u;l++){const d=s[l],h=this._data.get(d);h!=null&&n(h)&&a.push(h)}this._sort(a,i);for(let l=0,u=a.length;l<u;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const u=s[a],d=this._data.get(u);d!=null&&n(d)&&o.push(d[this._idProp])}else if(i){const a=[];for(let l=0,u=s.length;l<u;l++){const d=s[l];a.push(r.get(d))}this._sort(a,i);for(let l=0,u=a.length;l<u;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const u=s[a],d=r.get(u);d!=null&&o.push(d[this._idProp])}return o}getDataSet(){return this}forEach(e,r){const n=r&&dd(r),i=this._data,s=[...Wu(i).call(i)];if(r&&r.order){const o=this.get(r);for(let a=0,l=o.length;a<l;a++){const u=o[a],d=u[this._idProp];e(u,d)}}else for(let o=0,a=s.length;o<a;o++){const l=s[o],u=this._data.get(l);u!=null&&(!n||n(u))&&e(u,l)}}map(e,r){const n=r&&dd(r),i=[],s=this._data,o=[...Wu(s).call(s)];for(let a=0,l=o.length;a<l;a++){const u=o[a],d=this._data.get(u);d!=null&&(!n||n(d))&&i.push(e(d,u))}return r&&r.order&&this._sort(i,r.order),i}_filterFields(e,r){var n;return e&&Kje(n=$s(r)?r:jD(r)).call(n,(i,s)=>(i[s]=e[s],i),{})}_sort(e,r){if(typeof r=="string"){const n=r;LR(e).call(e,(i,s)=>{const o=i[n],a=s[n];return o>a?1:o<a?-1:0})}else if(typeof r=="function")LR(e).call(e,r);else throw new TypeError("Order must be a function or a string")}remove(e,r){const n=[],i=[],s=$s(e)?e:[e];for(let o=0,a=s.length;o<a;o++){const l=this._remove(s[o]);if(l){const u=l[this._idProp];u!=null&&(n.push(u),i.push(l))}}return n.length&&this._trigger("remove",{items:n,oldData:i},r),n}_remove(e){let r;if(j9(e)?r=e:e&&typeof e=="object"&&(r=e[this._idProp]),r!=null&&this._data.has(r)){const n=this._data.get(r)||null;return this._data.delete(r),--this.length,n}return null}clear(e){var r;const n=[...Wu(r=this._data).call(r)],i=[];for(let s=0,o=n.length;s<o;s++)i.push(this._data.get(n[s]));return this._data.clear(),this.length=0,this._trigger("remove",{items:n,oldData:i},e),n}max(e){let r=null,n=null;for(const s of w9(i=this._data).call(i)){var i;const o=s[e];typeof o=="number"&&(n==null||o>n)&&(r=s,n=o)}return r||null}min(e){let r=null,n=null;for(const s of w9(i=this._data).call(i)){var i;const o=s[e];typeof o=="number"&&(n==null||o<n)&&(r=s,n=o)}return r||null}distinct(e){const r=this._data,n=[...Wu(r).call(r)],i=[];let s=0;for(let o=0,a=n.length;o<a;o++){const l=n[o],d=r.get(l)[e];let h=!1;for(let f=0;f<s;f++)if(i[f]==d){h=!0;break}!h&&d!==void 0&&(i[s]=d,s++)}return i}_addItem(e){const r=CRe(e,this._idProp),n=r[this._idProp];if(this._data.has(n))throw new Error("Cannot add item: item with id "+n+" already exists");return this._data.set(n,r),++this.length,n}_updateItem(e){const r=e[this._idProp];if(r==null)throw new Error("Cannot update item: item has no id (item: "+COe(e)+")");const n=this._data.get(r);if(!n)throw new Error("Cannot update item: no item with id "+r+" found");return this._data.set(r,xW(xW({},n),e)),r}stream(e){if(e){const n=this._data;return new oc({*[pd](){for(const i of e){const s=n.get(i);s!=null&&(yield[i,s])}}})}else{var r;return new oc({[pd]:Eae(r=UIe(this._data)).call(r,this._data)})}}}function kRe(t,e){return typeof e=="object"&&e!==null&&t===e.idProp&&typeof e.add=="function"&&typeof e.clear=="function"&&typeof e.distinct=="function"&&typeof Xc(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof ps(e)=="function"&&typeof e.max=="function"&&typeof e.min=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.remove=="function"&&typeof e.setOptions=="function"&&typeof e.stream=="function"&&typeof e.update=="function"&&typeof e.updateOnly=="function"}function hle(t,e){return typeof e=="object"&&e!==null&&t===e.idProp&&typeof Xc(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof ps(e)=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.stream=="function"&&kRe(t,e.getDataSet())}/**
 * vis-network
 * https://visjs.github.io/vis-network/
 *
 * A dynamic, browser-based visualization library.
 *
 * @version 10.0.2
 * @date    2025-09-15T17:48:13.838Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var wW=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ze(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var SW={},Rf,EW;function Ut(){if(EW)return Rf;EW=1;var t=function(e){return e&&e.Math===Math&&e};return Rf=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof wW=="object"&&wW)||t(typeof Rf=="object"&&Rf)||function(){return this}()||Function("return this")(),Rf}var pN,_W;function ct(){return _W||(_W=1,pN=function(t){try{return!!t()}catch{return!0}}),pN}var mN,NW;function sg(){if(NW)return mN;NW=1;var t=ct();return mN=!t(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),mN}var gN,CW;function Zb(){if(CW)return gN;CW=1;var t=sg(),e=Function.prototype,r=e.apply,n=e.call;return gN=typeof Reflect=="object"&&Reflect.apply||(t?n.bind(r):function(){return n.apply(r,arguments)}),gN}var yN,kW;function dt(){if(kW)return yN;kW=1;var t=sg(),e=Function.prototype,r=e.call,n=t&&e.bind.bind(r,r);return yN=t?n:function(i){return function(){return r.apply(i,arguments)}},yN}var vN,jW;function ro(){if(jW)return vN;jW=1;var t=dt(),e=t({}.toString),r=t("".slice);return vN=function(n){return r(e(n),8,-1)},vN}var bN,TW;function LD(){if(TW)return bN;TW=1;var t=ro(),e=dt();return bN=function(r){if(t(r)==="Function")return e(r)},bN}var xN,OW;function Jr(){if(OW)return xN;OW=1;var t=typeof document=="object"&&document.all;return xN=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"},xN}var wN={},SN,PW;function gr(){if(PW)return SN;PW=1;var t=ct();return SN=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),SN}var EN,IW;function pi(){if(IW)return EN;IW=1;var t=sg(),e=Function.prototype.call;return EN=t?e.bind(e):function(){return e.apply(e,arguments)},EN}var _N={},RW;function e1(){if(RW)return _N;RW=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,r=e&&!t.call({1:2},1);return _N.f=r?function(i){var s=e(this,i);return!!s&&s.enumerable}:t,_N}var NN,MW;function og(){return MW||(MW=1,NN=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}),NN}var CN,AW;function t1(){if(AW)return CN;AW=1;var t=dt(),e=ct(),r=ro(),n=Object,i=t("".split);return CN=e(function(){return!n("z").propertyIsEnumerable(0)})?function(s){return r(s)==="String"?i(s,""):n(s)}:n,CN}var kN,DW;function Hh(){return DW||(DW=1,kN=function(t){return t==null}),kN}var jN,$W;function sa(){if($W)return jN;$W=1;var t=Hh(),e=TypeError;return jN=function(r){if(t(r))throw new e("Can't call method on "+r);return r},jN}var TN,FW;function Cs(){if(FW)return TN;FW=1;var t=t1(),e=sa();return TN=function(r){return t(e(r))},TN}var ON,qW;function Zr(){if(qW)return ON;qW=1;var t=Jr();return ON=function(e){return typeof e=="object"?e!==null:t(e)},ON}var PN,LW;function _t(){return LW||(LW=1,PN={}),PN}var IN,BW;function Ti(){if(BW)return IN;BW=1;var t=_t(),e=Ut(),r=Jr(),n=function(i){return r(i)?i:void 0};return IN=function(i,s){return arguments.length<2?n(t[i])||n(e[i]):t[i]&&t[i][s]||e[i]&&e[i][s]},IN}var RN,zW;function Tr(){if(zW)return RN;zW=1;var t=dt();return RN=t({}.isPrototypeOf),RN}var MN,WW;function Kh(){if(WW)return MN;WW=1;var t=Ut(),e=t.navigator,r=e&&e.userAgent;return MN=r?String(r):"",MN}var AN,VW;function ag(){if(VW)return AN;VW=1;var t=Ut(),e=Kh(),r=t.process,n=t.Deno,i=r&&r.versions||n&&n.version,s=i&&i.v8,o,a;return s&&(o=s.split("."),a=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!a&&e&&(o=e.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=e.match(/Chrome\/(\d+)/),o&&(a=+o[1]))),AN=a,AN}var DN,UW;function Gh(){if(UW)return DN;UW=1;var t=ag(),e=ct(),r=Ut(),n=r.String;return DN=!!Object.getOwnPropertySymbols&&!e(function(){var i=Symbol("symbol detection");return!n(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&t&&t<41}),DN}var $N,HW;function fle(){if(HW)return $N;HW=1;var t=Gh();return $N=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol",$N}var FN,KW;function lg(){if(KW)return FN;KW=1;var t=Ti(),e=Jr(),r=Tr(),n=fle(),i=Object;return FN=n?function(s){return typeof s=="symbol"}:function(s){var o=t("Symbol");return e(o)&&r(o.prototype,i(s))},FN}var qN,GW;function Yh(){if(GW)return qN;GW=1;var t=String;return qN=function(e){try{return t(e)}catch{return"Object"}},qN}var LN,YW;function oa(){if(YW)return LN;YW=1;var t=Jr(),e=Yh(),r=TypeError;return LN=function(n){if(t(n))return n;throw new r(e(n)+" is not a function")},LN}var BN,QW;function BD(){if(QW)return BN;QW=1;var t=oa(),e=Hh();return BN=function(r,n){var i=r[n];return e(i)?void 0:t(i)},BN}var zN,XW;function jRe(){if(XW)return zN;XW=1;var t=pi(),e=Jr(),r=Zr(),n=TypeError;return zN=function(i,s){var o,a;if(s==="string"&&e(o=i.toString)&&!r(a=t(o,i))||e(o=i.valueOf)&&!r(a=t(o,i))||s!=="string"&&e(o=i.toString)&&!r(a=t(o,i)))return a;throw new n("Can't convert object to primitive value")},zN}var WN={exports:{}},VN,JW;function Qh(){return JW||(JW=1,VN=!0),VN}var UN,ZW;function TRe(){if(ZW)return UN;ZW=1;var t=Ut(),e=Object.defineProperty;return UN=function(r,n){try{e(t,r,{value:n,configurable:!0,writable:!0})}catch{t[r]=n}return n},UN}var eV;function zD(){if(eV)return WN.exports;eV=1;var t=Qh(),e=Ut(),r=TRe(),n="__core-js_shared__",i=WN.exports=e[n]||r(n,{});return(i.versions||(i.versions=[])).push({version:"3.44.0",mode:t?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),WN.exports}var HN,tV;function Xh(){if(tV)return HN;tV=1;var t=zD();return HN=function(e,r){return t[e]||(t[e]=r||{})},HN}var KN,rV;function Oi(){if(rV)return KN;rV=1;var t=sa(),e=Object;return KN=function(r){return e(t(r))},KN}var GN,nV;function fn(){if(nV)return GN;nV=1;var t=dt(),e=Oi(),r=t({}.hasOwnProperty);return GN=Object.hasOwn||function(i,s){return r(e(i),s)},GN}var YN,iV;function r1(){if(iV)return YN;iV=1;var t=dt(),e=0,r=Math.random(),n=t(1.1.toString);return YN=function(i){return"Symbol("+(i===void 0?"":i)+")_"+n(++e+r,36)},YN}var QN,sV;function Or(){if(sV)return QN;sV=1;var t=Ut(),e=Xh(),r=fn(),n=r1(),i=Gh(),s=fle(),o=t.Symbol,a=e("wks"),l=s?o.for||o:o&&o.withoutSetter||n;return QN=function(u){return r(a,u)||(a[u]=i&&r(o,u)?o[u]:l("Symbol."+u)),a[u]},QN}var XN,oV;function ple(){if(oV)return XN;oV=1;var t=pi(),e=Zr(),r=lg(),n=BD(),i=jRe(),s=Or(),o=TypeError,a=s("toPrimitive");return XN=function(l,u){if(!e(l)||r(l))return l;var d=n(l,a),h;if(d){if(u===void 0&&(u="default"),h=t(d,l,u),!e(h)||r(h))return h;throw new o("Can't convert object to primitive value")}return u===void 0&&(u="number"),i(l,u)},XN}var JN,aV;function WD(){if(aV)return JN;aV=1;var t=ple(),e=lg();return JN=function(r){var n=t(r,"string");return e(n)?n:n+""},JN}var ZN,lV;function mle(){if(lV)return ZN;lV=1;var t=Ut(),e=Zr(),r=t.document,n=e(r)&&e(r.createElement);return ZN=function(i){return n?r.createElement(i):{}},ZN}var eC,cV;function gle(){if(cV)return eC;cV=1;var t=gr(),e=ct(),r=mle();return eC=!t&&!e(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7}),eC}var uV;function n1(){if(uV)return wN;uV=1;var t=gr(),e=pi(),r=e1(),n=og(),i=Cs(),s=WD(),o=fn(),a=gle(),l=Object.getOwnPropertyDescriptor;return wN.f=t?l:function(d,h){if(d=i(d),h=s(h),a)try{return l(d,h)}catch{}if(o(d,h))return n(!e(r.f,d,h),d[h])},wN}var tC,dV;function ORe(){if(dV)return tC;dV=1;var t=ct(),e=Jr(),r=/#|\.prototype\./,n=function(l,u){var d=s[i(l)];return d===a?!0:d===o?!1:e(u)?t(u):!!u},i=n.normalize=function(l){return String(l).replace(r,".").toLowerCase()},s=n.data={},o=n.NATIVE="N",a=n.POLYFILL="P";return tC=n,tC}var rC,hV;function i1(){if(hV)return rC;hV=1;var t=LD(),e=oa(),r=sg(),n=t(t.bind);return rC=function(i,s){return e(i),s===void 0?i:r?n(i,s):function(){return i.apply(s,arguments)}},rC}var nC={},iC,fV;function yle(){if(fV)return iC;fV=1;var t=gr(),e=ct();return iC=t&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),iC}var sC,pV;function no(){if(pV)return sC;pV=1;var t=Zr(),e=String,r=TypeError;return sC=function(n){if(t(n))return n;throw new r(e(n)+" is not an object")},sC}var mV;function rs(){if(mV)return nC;mV=1;var t=gr(),e=gle(),r=yle(),n=no(),i=WD(),s=TypeError,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l="enumerable",u="configurable",d="writable";return nC.f=t?r?function(f,p,m){if(n(f),p=i(p),n(m),typeof f=="function"&&p==="prototype"&&"value"in m&&d in m&&!m[d]){var g=a(f,p);g&&g[d]&&(f[p]=m.value,m={configurable:u in m?m[u]:g[u],enumerable:l in m?m[l]:g[l],writable:!1})}return o(f,p,m)}:o:function(f,p,m){if(n(f),p=i(p),n(m),e)try{return o(f,p,m)}catch{}if("get"in m||"set"in m)throw new s("Accessors not supported");return"value"in m&&(f[p]=m.value),f},nC}var oC,gV;function Jh(){if(gV)return oC;gV=1;var t=gr(),e=rs(),r=og();return oC=t?function(n,i,s){return e.f(n,i,r(1,s))}:function(n,i,s){return n[i]=s,n},oC}var aC,yV;function Pe(){if(yV)return aC;yV=1;var t=Ut(),e=Zb(),r=LD(),n=Jr(),i=n1().f,s=ORe(),o=_t(),a=i1(),l=Jh(),u=fn(),d=function(h){var f=function(p,m,g){if(this instanceof f){switch(arguments.length){case 0:return new h;case 1:return new h(p);case 2:return new h(p,m)}return new h(p,m,g)}return e(h,this,arguments)};return f.prototype=h.prototype,f};return aC=function(h,f){var p=h.target,m=h.global,g=h.stat,y=h.proto,v=m?t:g?t[p]:t[p]&&t[p].prototype,b=m?o:o[p]||l(o,p,{})[p],w=b.prototype,x,S,E,N,_,k,j,T,P;for(N in f)x=s(m?N:p+(g?".":"#")+N,h.forced),S=!x&&v&&u(v,N),k=b[N],S&&(h.dontCallGetSet?(P=i(v,N),j=P&&P.value):j=v[N]),_=S&&j?j:f[N],!(!x&&!y&&typeof k==typeof _)&&(h.bind&&S?T=a(_,t):h.wrap&&S?T=d(_):y&&n(_)?T=r(_):T=_,(h.sham||_&&_.sham||k&&k.sham)&&l(T,"sham",!0),l(b,N,T),y&&(E=p+"Prototype",u(o,E)||l(o,E,{}),l(o[E],N,_),h.real&&w&&(x||!w[N])&&l(w,N,_)))},aC}var lC,vV;function PRe(){if(vV)return lC;vV=1;var t=Math.ceil,e=Math.floor;return lC=Math.trunc||function(n){var i=+n;return(i>0?e:t)(i)},lC}var cC,bV;function Zh(){if(bV)return cC;bV=1;var t=PRe();return cC=function(e){var r=+e;return r!==r||r===0?0:t(r)},cC}var uC,xV;function s1(){if(xV)return uC;xV=1;var t=Zh(),e=Math.max,r=Math.min;return uC=function(n,i){var s=t(n);return s<0?e(s+i,0):r(s,i)},uC}var dC,wV;function vle(){if(wV)return dC;wV=1;var t=Zh(),e=Math.min;return dC=function(r){var n=t(r);return n>0?e(n,9007199254740991):0},dC}var hC,SV;function aa(){if(SV)return hC;SV=1;var t=vle();return hC=function(e){return t(e.length)},hC}var fC,EV;function VD(){if(EV)return fC;EV=1;var t=Cs(),e=s1(),r=aa(),n=function(i){return function(s,o,a){var l=t(s),u=r(l);if(u===0)return!i&&-1;var d=e(a,u),h;if(i&&o!==o){for(;u>d;)if(h=l[d++],h!==h)return!0}else for(;u>d;d++)if((i||d in l)&&l[d]===o)return i||d||0;return!i&&-1}};return fC={includes:n(!0),indexOf:n(!1)},fC}var pC,_V;function cg(){return _V||(_V=1,pC={}),pC}var mC,NV;function ble(){if(NV)return mC;NV=1;var t=dt(),e=fn(),r=Cs(),n=VD().indexOf,i=cg(),s=t([].push);return mC=function(o,a){var l=r(o),u=0,d=[],h;for(h in l)!e(i,h)&&e(l,h)&&s(d,h);for(;a.length>u;)e(l,h=a[u++])&&(~n(d,h)||s(d,h));return d},mC}var gC,CV;function UD(){return CV||(CV=1,gC=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),gC}var yC,kV;function ug(){if(kV)return yC;kV=1;var t=ble(),e=UD();return yC=Object.keys||function(n){return t(n,e)},yC}var vC={},jV;function o1(){return jV||(jV=1,vC.f=Object.getOwnPropertySymbols),vC}var bC,TV;function IRe(){if(TV)return bC;TV=1;var t=gr(),e=dt(),r=pi(),n=ct(),i=ug(),s=o1(),o=e1(),a=Oi(),l=t1(),u=Object.assign,d=Object.defineProperty,h=e([].concat);return bC=!u||n(function(){if(t&&u({b:1},u(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},p={},m=Symbol("assign detection"),g="abcdefghijklmnopqrst";return f[m]=7,g.split("").forEach(function(y){p[y]=y}),u({},f)[m]!==7||i(u({},p)).join("")!==g})?function(p,m){for(var g=a(p),y=arguments.length,v=1,b=s.f,w=o.f;y>v;)for(var x=l(arguments[v++]),S=b?h(i(x),b(x)):i(x),E=S.length,N=0,_;E>N;)_=S[N++],(!t||r(w,x,_))&&(g[_]=x[_]);return g}:u,bC}var OV;function RRe(){if(OV)return SW;OV=1;var t=Pe(),e=IRe();return t({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),SW}var xC,PV;function MRe(){if(PV)return xC;PV=1,RRe();var t=_t();return xC=t.Object.assign,xC}var wC,IV;function ARe(){if(IV)return wC;IV=1;var t=MRe();return wC=t,wC}var SC,RV;function DRe(){return RV||(RV=1,SC=ARe()),SC}var $Re=DRe(),Er=ze($Re),MV={},EC,AV;function ef(){if(AV)return EC;AV=1;var t=dt();return EC=t([].slice),EC}var _C,DV;function FRe(){if(DV)return _C;DV=1;var t=dt(),e=oa(),r=Zr(),n=fn(),i=ef(),s=sg(),o=Function,a=t([].concat),l=t([].join),u={},d=function(h,f,p){if(!n(u,f)){for(var m=[],g=0;g<f;g++)m[g]="a["+g+"]";u[f]=o("C,a","return new C("+l(m,",")+")")}return u[f](h,p)};return _C=s?o.bind:function(f){var p=e(this),m=p.prototype,g=i(arguments,1),y=function(){var b=a(g,i(arguments));return this instanceof y?d(p,b.length,b):p.apply(f,b)};return r(m)&&(y.prototype=m),y},_C}var $V;function qRe(){if($V)return MV;$V=1;var t=Pe(),e=FRe();return t({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),MV}var NC,FV;function pn(){if(FV)return NC;FV=1;var t=Ut(),e=_t();return NC=function(r,n){var i=e[r+"Prototype"],s=i&&i[n];if(s)return s;var o=t[r],a=o&&o.prototype;return a&&a[n]},NC}var CC,qV;function LRe(){if(qV)return CC;qV=1,qRe();var t=pn();return CC=t("Function","bind"),CC}var kC,LV;function BRe(){if(LV)return kC;LV=1;var t=Tr(),e=LRe(),r=Function.prototype;return kC=function(n){var i=n.bind;return n===r||t(r,n)&&i===r.bind?e:i},kC}var jC,BV;function zRe(){if(BV)return jC;BV=1;var t=BRe();return jC=t,jC}var TC,zV;function WRe(){return zV||(zV=1,TC=zRe()),TC}var VRe=WRe(),de=ze(VRe);function HD(t,e,r,n){t.beginPath(),t.arc(e,r,n,0,2*Math.PI,!1),t.closePath()}function URe(t,e,r,n){t.beginPath(),t.rect(e-n,r-n,n*2,n*2),t.closePath()}function HRe(t,e,r,n){t.beginPath(),n*=1.15,r+=.275*n;const i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);t.moveTo(e,r-(a-o)),t.lineTo(e+s,r+o),t.lineTo(e-s,r+o),t.lineTo(e,r-(a-o)),t.closePath()}function KRe(t,e,r,n){t.beginPath(),n*=1.15,r-=.275*n;const i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);t.moveTo(e,r+(a-o)),t.lineTo(e+s,r-o),t.lineTo(e-s,r-o),t.lineTo(e,r+(a-o)),t.closePath()}function GRe(t,e,r,n){t.beginPath(),n*=.82,r+=.1*n;for(let i=0;i<10;i++){const s=i%2===0?n*1.3:n*.5;t.lineTo(e+s*Math.sin(i*2*Math.PI/10),r-s*Math.cos(i*2*Math.PI/10))}t.closePath()}function YRe(t,e,r,n){t.beginPath(),t.lineTo(e,r+n),t.lineTo(e+n,r),t.lineTo(e,r-n),t.lineTo(e-n,r),t.closePath()}function xle(t,e,r,n,i,s){const o=Math.PI/180;n-2*s<0&&(s=n/2),i-2*s<0&&(s=i/2),t.beginPath(),t.moveTo(e+s,r),t.lineTo(e+n-s,r),t.arc(e+n-s,r+s,s,o*270,o*360,!1),t.lineTo(e+n,r+i-s),t.arc(e+n-s,r+i-s,s,0,o*90,!1),t.lineTo(e+s,r+i),t.arc(e+s,r+i-s,s,o*90,o*180,!1),t.lineTo(e,r+s),t.arc(e+s,r+s,s,o*180,o*270,!1),t.closePath()}function BR(t,e,r,n,i){const s=.5522848,o=n/2*s,a=i/2*s,l=e+n,u=r+i,d=e+n/2,h=r+i/2;t.beginPath(),t.moveTo(e,h),t.bezierCurveTo(e,h-a,d-o,r,d,r),t.bezierCurveTo(d+o,r,l,h-a,l,h),t.bezierCurveTo(l,h+a,d+o,u,d,u),t.bezierCurveTo(d-o,u,e,h+a,e,h),t.closePath()}function wle(t,e,r,n,i){const s=.3333333333333333,o=n,a=i*s,l=.5522848,u=o/2*l,d=a/2*l,h=e+o,f=r+a,p=e+o/2,m=r+a/2,g=r+(i-a/2),y=r+i;t.beginPath(),t.moveTo(h,m),t.bezierCurveTo(h,m+d,p+u,f,p,f),t.bezierCurveTo(p-u,f,e,m+d,e,m),t.bezierCurveTo(e,m-d,p-u,r,p,r),t.bezierCurveTo(p+u,r,h,m-d,h,m),t.lineTo(h,g),t.bezierCurveTo(h,g+d,p+u,y,p,y),t.bezierCurveTo(p-u,y,e,g+d,e,g),t.lineTo(e,m)}function Sle(t,e,r,n,i,s){t.beginPath(),t.moveTo(e,r);const o=s.length,a=n-e,l=i-r,u=l/a;let d=Math.sqrt(a*a+l*l),h=0,f=!0,p=0,m=+s[0];for(;d>=.1;)m=+s[h++%o],m>d&&(m=d),p=Math.sqrt(m*m/(1+u*u)),p=a<0?-p:p,e+=p,r+=u*p,f===!0?t.lineTo(e,r):t.moveTo(e,r),d-=m,f=!f}function QRe(t,e,r,n){t.beginPath();const i=6,s=Math.PI*2/i;t.moveTo(e+n,r);for(let o=1;o<i;o++)t.lineTo(e+n*Math.cos(s*o),r+n*Math.sin(s*o));t.closePath()}const WV={circle:HD,dashedLine:Sle,database:wle,diamond:YRe,ellipse:BR,ellipse_vis:BR,hexagon:QRe,roundRect:xle,square:URe,star:GRe,triangle:HRe,triangleDown:KRe};function XRe(t){return Object.prototype.hasOwnProperty.call(WV,t)?WV[t]:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];CanvasRenderingContext2D.prototype[t].call(e,n)}}var OC={exports:{}},VV;function JRe(){return VV||(VV=1,function(t){t.exports=e;function e(n){if(n)return r(n)}function r(n){for(var i in e.prototype)n[i]=e.prototype[i];return n}e.prototype.on=e.prototype.addEventListener=function(n,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(i),this},e.prototype.once=function(n,i){function s(){this.off(n,s),i.apply(this,arguments)}return s.fn=i,this.on(n,s),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(n,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+n];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var o,a=0;a<s.length;a++)if(o=s[a],o===i||o.fn===i){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+n],this},e.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),s=this._callbacks["$"+n],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(s){s=s.slice(0);for(var o=0,a=s.length;o<a;++o)s[o].apply(this,i)}return this},e.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},e.prototype.hasListeners=function(n){return!!this.listeners(n).length}}(OC)),OC.exports}var ZRe=JRe(),Ele=ze(ZRe),UV={},PC,HV;function wu(){if(HV)return PC;HV=1;var t=ro();return PC=Array.isArray||function(r){return t(r)==="Array"},PC}var IC,KV;function _le(){if(KV)return IC;KV=1;var t=TypeError,e=9007199254740991;return IC=function(r){if(r>e)throw t("Maximum allowed index exceeded");return r},IC}var RC,GV;function a1(){if(GV)return RC;GV=1;var t=gr(),e=rs(),r=og();return RC=function(n,i,s){t?e.f(n,i,r(0,s)):n[i]=s},RC}var MC,YV;function KD(){if(YV)return MC;YV=1;var t=Or(),e=t("toStringTag"),r={};return r[e]="z",MC=String(r)==="[object z]",MC}var AC,QV;function tf(){if(QV)return AC;QV=1;var t=KD(),e=Jr(),r=ro(),n=Or(),i=n("toStringTag"),s=Object,o=r(function(){return arguments}())==="Arguments",a=function(l,u){try{return l[u]}catch{}};return AC=t?r:function(l){var u,d,h;return l===void 0?"Undefined":l===null?"Null":typeof(d=a(u=s(l),i))=="string"?d:o?r(u):(h=r(u))==="Object"&&e(u.callee)?"Arguments":h},AC}var DC,XV;function eMe(){if(XV)return DC;XV=1;var t=dt(),e=Jr(),r=zD(),n=t(Function.toString);return e(r.inspectSource)||(r.inspectSource=function(i){return n(i)}),DC=r.inspectSource,DC}var $C,JV;function Nle(){if(JV)return $C;JV=1;var t=dt(),e=ct(),r=Jr(),n=tf(),i=Ti(),s=eMe(),o=function(){},a=i("Reflect","construct"),l=/^\s*(?:class|function)\b/,u=t(l.exec),d=!l.test(o),h=function(m){if(!r(m))return!1;try{return a(o,[],m),!0}catch{return!1}},f=function(m){if(!r(m))return!1;switch(n(m)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!u(l,s(m))}catch{return!0}};return f.sham=!0,$C=!a||e(function(){var p;return h(h.call)||!h(Object)||!h(function(){p=!0})||p})?f:h,$C}var FC,ZV;function tMe(){if(ZV)return FC;ZV=1;var t=wu(),e=Nle(),r=Zr(),n=Or(),i=n("species"),s=Array;return FC=function(o){var a;return t(o)&&(a=o.constructor,e(a)&&(a===s||t(a.prototype))?a=void 0:r(a)&&(a=a[i],a===null&&(a=void 0))),a===void 0?s:a},FC}var qC,eU;function GD(){if(eU)return qC;eU=1;var t=tMe();return qC=function(e,r){return new(t(e))(r===0?0:r)},qC}var LC,tU;function dg(){if(tU)return LC;tU=1;var t=ct(),e=Or(),r=ag(),n=e("species");return LC=function(i){return r>=51||!t(function(){var s=[],o=s.constructor={};return o[n]=function(){return{foo:1}},s[i](Boolean).foo!==1})},LC}var rU;function Cle(){if(rU)return UV;rU=1;var t=Pe(),e=ct(),r=wu(),n=Zr(),i=Oi(),s=aa(),o=_le(),a=a1(),l=GD(),u=dg(),d=Or(),h=ag(),f=d("isConcatSpreadable"),p=h>=51||!e(function(){var y=[];return y[f]=!1,y.concat()[0]!==y}),m=function(y){if(!n(y))return!1;var v=y[f];return v!==void 0?!!v:r(y)},g=!p||!u("concat");return t({target:"Array",proto:!0,arity:1,forced:g},{concat:function(v){var b=i(this),w=l(b,0),x=0,S,E,N,_,k;for(S=-1,N=arguments.length;S<N;S++)if(k=S===-1?b:arguments[S],m(k))for(_=s(k),o(x+_),E=0;E<_;E++,x++)E in k&&a(w,x,k[E]);else o(x+1),a(w,x++,k);return w.length=x,w}}),UV}var nU={},iU={},BC,sU;function ns(){if(sU)return BC;sU=1;var t=tf(),e=String;return BC=function(r){if(t(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(r)},BC}var zC={},oU;function YD(){if(oU)return zC;oU=1;var t=gr(),e=yle(),r=rs(),n=no(),i=Cs(),s=ug();return zC.f=t&&!e?Object.defineProperties:function(a,l){n(a);for(var u=i(l),d=s(l),h=d.length,f=0,p;h>f;)r.f(a,p=d[f++],u[p]);return a},zC}var WC,aU;function rMe(){if(aU)return WC;aU=1;var t=Ti();return WC=t("document","documentElement"),WC}var VC,lU;function l1(){if(lU)return VC;lU=1;var t=Xh(),e=r1(),r=t("keys");return VC=function(n){return r[n]||(r[n]=e(n))},VC}var UC,cU;function hg(){if(cU)return UC;cU=1;var t=no(),e=YD(),r=UD(),n=cg(),i=rMe(),s=mle(),o=l1(),a=">",l="<",u="prototype",d="script",h=o("IE_PROTO"),f=function(){},p=function(b){return l+d+a+b+l+"/"+d+a},m=function(b){b.write(p("")),b.close();var w=b.parentWindow.Object;return b=null,w},g=function(){var b=s("iframe"),w="java"+d+":",x;return b.style.display="none",i.appendChild(b),b.src=String(w),x=b.contentWindow.document,x.open(),x.write(p("document.F=Object")),x.close(),x.F},y,v=function(){try{y=new ActiveXObject("htmlfile")}catch{}v=typeof document<"u"?document.domain&&y?m(y):g():m(y);for(var b=r.length;b--;)delete v[u][r[b]];return v()};return n[h]=!0,UC=Object.create||function(w,x){var S;return w!==null?(f[u]=t(w),S=new f,f[u]=null,S[h]=w):S=v(),x===void 0?S:e.f(S,x)},UC}var HC={},uU;function c1(){if(uU)return HC;uU=1;var t=ble(),e=UD(),r=e.concat("length","prototype");return HC.f=Object.getOwnPropertyNames||function(i){return t(i,r)},HC}var KC={},dU;function QD(){if(dU)return KC;dU=1;var t=ro(),e=Cs(),r=c1().f,n=ef(),i=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(o){try{return r(o)}catch{return n(i)}};return KC.f=function(a){return i&&t(a)==="Window"?s(a):r(e(a))},KC}var GC,hU;function fg(){if(hU)return GC;hU=1;var t=Jh();return GC=function(e,r,n,i){return i&&i.enumerable?e[r]=n:t(e,r,n),e},GC}var YC,fU;function XD(){if(fU)return YC;fU=1;var t=rs();return YC=function(e,r,n){return t.f(e,r,n)},YC}var QC={},pU;function u1(){if(pU)return QC;pU=1;var t=Or();return QC.f=t,QC}var XC,mU;function Zt(){if(mU)return XC;mU=1;var t=_t(),e=fn(),r=u1(),n=rs().f;return XC=function(i){var s=t.Symbol||(t.Symbol={});e(s,i)||n(s,i,{value:r.f(i)})},XC}var JC,gU;function kle(){if(gU)return JC;gU=1;var t=pi(),e=Ti(),r=Or(),n=fg();return JC=function(){var i=e("Symbol"),s=i&&i.prototype,o=s&&s.valueOf,a=r("toPrimitive");s&&!s[a]&&n(s,a,function(l){return t(o,this)},{arity:1})},JC}var ZC,yU;function nMe(){if(yU)return ZC;yU=1;var t=KD(),e=tf();return ZC=t?{}.toString:function(){return"[object "+e(this)+"]"},ZC}var ek,vU;function Su(){if(vU)return ek;vU=1;var t=KD(),e=rs().f,r=Jh(),n=fn(),i=nMe(),s=Or(),o=s("toStringTag");return ek=function(a,l,u,d){var h=u?a:a&&a.prototype;h&&(n(h,o)||e(h,o,{configurable:!0,value:l}),d&&!t&&r(h,"toString",i))},ek}var tk,bU;function jle(){if(bU)return tk;bU=1;var t=Ut(),e=Jr(),r=t.WeakMap;return tk=e(r)&&/native code/.test(String(r)),tk}var rk,xU;function Eu(){if(xU)return rk;xU=1;var t=jle(),e=Ut(),r=Zr(),n=Jh(),i=fn(),s=zD(),o=l1(),a=cg(),l="Object already initialized",u=e.TypeError,d=e.WeakMap,h,f,p,m=function(b){return p(b)?f(b):h(b,{})},g=function(b){return function(w){var x;if(!r(w)||(x=f(w)).type!==b)throw new u("Incompatible receiver, "+b+" required");return x}};if(t||s.state){var y=s.state||(s.state=new d);y.get=y.get,y.has=y.has,y.set=y.set,h=function(b,w){if(y.has(b))throw new u(l);return w.facade=b,y.set(b,w),w},f=function(b){return y.get(b)||{}},p=function(b){return y.has(b)}}else{var v=o("state");a[v]=!0,h=function(b,w){if(i(b,v))throw new u(l);return w.facade=b,n(b,v,w),w},f=function(b){return i(b,v)?b[v]:{}},p=function(b){return i(b,v)}}return rk={set:h,get:f,has:p,enforce:m,getterFor:g},rk}var nk,wU;function Al(){if(wU)return nk;wU=1;var t=i1(),e=dt(),r=t1(),n=Oi(),i=aa(),s=GD(),o=e([].push),a=function(l){var u=l===1,d=l===2,h=l===3,f=l===4,p=l===6,m=l===7,g=l===5||p;return function(y,v,b,w){for(var x=n(y),S=r(x),E=i(S),N=t(v,b),_=0,k=w||s,j=u?k(y,E):d||m?k(y,0):void 0,T,P;E>_;_++)if((g||_ in S)&&(T=S[_],P=N(T,_,x),l))if(u)j[_]=P;else if(P)switch(l){case 3:return!0;case 5:return T;case 6:return _;case 2:o(j,T)}else switch(l){case 4:return!1;case 7:o(j,T)}return p?-1:h||f?f:j}};return nk={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterReject:a(7)},nk}var SU;function iMe(){if(SU)return iU;SU=1;var t=Pe(),e=Ut(),r=pi(),n=dt(),i=Qh(),s=gr(),o=Gh(),a=ct(),l=fn(),u=Tr(),d=no(),h=Cs(),f=WD(),p=ns(),m=og(),g=hg(),y=ug(),v=c1(),b=QD(),w=o1(),x=n1(),S=rs(),E=YD(),N=e1(),_=fg(),k=XD(),j=Xh(),T=l1(),P=cg(),O=r1(),D=Or(),F=u1(),$=Zt(),q=kle(),M=Su(),B=Eu(),X=Al().forEach,Q=T("hidden"),le="Symbol",G="prototype",se=B.set,ke=B.getterFor(le),be=Object[G],$e=e.Symbol,Ie=$e&&$e[G],Nt=e.RangeError,Ct=e.TypeError,kt=e.QObject,er=x.f,Ye=S.f,yr=b.f,en=N.f,Pr=n([].push),st=j("symbols"),vr=j("op-symbols"),mi=j("wks"),tn=!kt||!kt[G]||!kt[G].findChild,A=function(K,z,Z){var pe=er(be,z);pe&&delete be[z],Ye(K,z,Z),pe&&K!==be&&Ye(be,z,pe)},L=s&&a(function(){return g(Ye({},"a",{get:function(){return Ye(this,"a",{value:7}).a}})).a!==7})?A:Ye,V=function(K,z){var Z=st[K]=g(Ie);return se(Z,{type:le,tag:K,description:z}),s||(Z.description=z),Z},ce=function(z,Z,pe){z===be&&ce(vr,Z,pe),d(z);var we=f(Z);return d(pe),l(st,we)?(pe.enumerable?(l(z,Q)&&z[Q][we]&&(z[Q][we]=!1),pe=g(pe,{enumerable:m(0,!1)})):(l(z,Q)||Ye(z,Q,m(1,g(null))),z[Q][we]=!0),L(z,we,pe)):Ye(z,we,pe)},re=function(z,Z){d(z);var pe=h(Z),we=y(pe).concat(U(pe));return X(we,function(We){(!s||r(ge,pe,We))&&ce(z,We,pe[We])}),z},ne=function(z,Z){return Z===void 0?g(z):re(g(z),Z)},ge=function(z){var Z=f(z),pe=r(en,this,Z);return this===be&&l(st,Z)&&!l(vr,Z)?!1:pe||!l(this,Z)||!l(st,Z)||l(this,Q)&&this[Q][Z]?pe:!0},Le=function(z,Z){var pe=h(z),we=f(Z);if(!(pe===be&&l(st,we)&&!l(vr,we))){var We=er(pe,we);return We&&l(st,we)&&!(l(pe,Q)&&pe[Q][we])&&(We.enumerable=!0),We}},Ve=function(z){var Z=yr(h(z)),pe=[];return X(Z,function(we){!l(st,we)&&!l(P,we)&&Pr(pe,we)}),pe},U=function(K){var z=K===be,Z=yr(z?vr:h(K)),pe=[];return X(Z,function(we){l(st,we)&&(!z||l(be,we))&&Pr(pe,st[we])}),pe};return o||($e=function(){if(u(Ie,this))throw new Ct("Symbol is not a constructor");var z=!arguments.length||arguments[0]===void 0?void 0:p(arguments[0]),Z=O(z),pe=function(we){var We=this===void 0?e:this;We===be&&r(pe,vr,we),l(We,Q)&&l(We[Q],Z)&&(We[Q][Z]=!1);var rn=m(1,we);try{L(We,Z,rn)}catch(Ir){if(!(Ir instanceof Nt))throw Ir;A(We,Z,rn)}};return s&&tn&&L(be,Z,{configurable:!0,set:pe}),V(Z,z)},Ie=$e[G],_(Ie,"toString",function(){return ke(this).tag}),_($e,"withoutSetter",function(K){return V(O(K),K)}),N.f=ge,S.f=ce,E.f=re,x.f=Le,v.f=b.f=Ve,w.f=U,F.f=function(K){return V(D(K),K)},s&&(k(Ie,"description",{configurable:!0,get:function(){return ke(this).description}}),i||_(be,"propertyIsEnumerable",ge,{unsafe:!0}))),t({global:!0,constructor:!0,wrap:!0,forced:!o,sham:!o},{Symbol:$e}),X(y(mi),function(K){$(K)}),t({target:le,stat:!0,forced:!o},{useSetter:function(){tn=!0},useSimple:function(){tn=!1}}),t({target:"Object",stat:!0,forced:!o,sham:!s},{create:ne,defineProperty:ce,defineProperties:re,getOwnPropertyDescriptor:Le}),t({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:Ve}),q(),M($e,le),P[Q]=!0,iU}var EU={},ik,_U;function Tle(){if(_U)return ik;_U=1;var t=Gh();return ik=t&&!!Symbol.for&&!!Symbol.keyFor,ik}var NU;function sMe(){if(NU)return EU;NU=1;var t=Pe(),e=Ti(),r=fn(),n=ns(),i=Xh(),s=Tle(),o=i("string-to-symbol-registry"),a=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{for:function(l){var u=n(l);if(r(o,u))return o[u];var d=e("Symbol")(u);return o[u]=d,a[d]=u,d}}),EU}var CU={},kU;function oMe(){if(kU)return CU;kU=1;var t=Pe(),e=fn(),r=lg(),n=Yh(),i=Xh(),s=Tle(),o=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{keyFor:function(l){if(!r(l))throw new TypeError(n(l)+" is not a symbol");if(e(o,l))return o[l]}}),CU}var jU={},sk,TU;function aMe(){if(TU)return sk;TU=1;var t=dt(),e=wu(),r=Jr(),n=ro(),i=ns(),s=t([].push);return sk=function(o){if(r(o))return o;if(e(o)){for(var a=o.length,l=[],u=0;u<a;u++){var d=o[u];typeof d=="string"?s(l,d):(typeof d=="number"||n(d)==="Number"||n(d)==="String")&&s(l,i(d))}var h=l.length,f=!0;return function(p,m){if(f)return f=!1,m;if(e(this))return m;for(var g=0;g<h;g++)if(l[g]===p)return m}}},sk}var OU;function Ole(){if(OU)return jU;OU=1;var t=Pe(),e=Ti(),r=Zb(),n=pi(),i=dt(),s=ct(),o=Jr(),a=lg(),l=ef(),u=aMe(),d=Gh(),h=String,f=e("JSON","stringify"),p=i(/./.exec),m=i("".charAt),g=i("".charCodeAt),y=i("".replace),v=i(1.1.toString),b=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,x=/^[\uDC00-\uDFFF]$/,S=!d||s(function(){var k=e("Symbol")("stringify detection");return f([k])!=="[null]"||f({a:k})!=="{}"||f(Object(k))!=="{}"}),E=s(function(){return f("\uDF06\uD834")!=='"\\udf06\\ud834"'||f("\uDEAD")!=='"\\udead"'}),N=function(k,j){var T=l(arguments),P=u(j);if(!(!o(P)&&(k===void 0||a(k))))return T[1]=function(O,D){if(o(P)&&(D=n(P,this,h(O),D)),!a(D))return D},r(f,null,T)},_=function(k,j,T){var P=m(T,j-1),O=m(T,j+1);return p(w,k)&&!p(x,O)||p(x,k)&&!p(w,P)?"\\u"+v(g(k,0),16):k};return f&&t({target:"JSON",stat:!0,arity:3,forced:S||E},{stringify:function(j,T,P){var O=l(arguments),D=r(S?N:f,null,O);return E&&typeof D=="string"?y(D,b,_):D}}),jU}var PU={},IU;function lMe(){if(IU)return PU;IU=1;var t=Pe(),e=Gh(),r=ct(),n=o1(),i=Oi(),s=!e||r(function(){n.f(1)});return t({target:"Object",stat:!0,forced:s},{getOwnPropertySymbols:function(a){var l=n.f;return l?l(i(a)):[]}}),PU}var RU;function Ple(){return RU||(RU=1,iMe(),sMe(),oMe(),Ole(),lMe()),nU}var MU={},AU;function Ile(){if(AU)return MU;AU=1;var t=Zt();return t("asyncDispose"),MU}var DU={},$U;function cMe(){if($U)return DU;$U=1;var t=Zt();return t("asyncIterator"),DU}var FU={},qU;function Rle(){if(qU)return FU;qU=1;var t=Zt();return t("dispose"),FU}var LU={},BU;function uMe(){if(BU)return LU;BU=1;var t=Zt();return t("hasInstance"),LU}var zU={},WU;function dMe(){if(WU)return zU;WU=1;var t=Zt();return t("isConcatSpreadable"),zU}var VU={},UU;function Mle(){if(UU)return VU;UU=1;var t=Zt();return t("iterator"),VU}var HU={},KU;function hMe(){if(KU)return HU;KU=1;var t=Zt();return t("match"),HU}var GU={},YU;function fMe(){if(YU)return GU;YU=1;var t=Zt();return t("matchAll"),GU}var QU={},XU;function pMe(){if(XU)return QU;XU=1;var t=Zt();return t("replace"),QU}var JU={},ZU;function mMe(){if(ZU)return JU;ZU=1;var t=Zt();return t("search"),JU}var eH={},tH;function gMe(){if(tH)return eH;tH=1;var t=Zt();return t("species"),eH}var rH={},nH;function yMe(){if(nH)return rH;nH=1;var t=Zt();return t("split"),rH}var iH={},sH;function Ale(){if(sH)return iH;sH=1;var t=Zt(),e=kle();return t("toPrimitive"),e(),iH}var oH={},aH;function vMe(){if(aH)return oH;aH=1;var t=Ti(),e=Zt(),r=Su();return e("toStringTag"),r(t("Symbol"),"Symbol"),oH}var lH={},cH;function bMe(){if(cH)return lH;cH=1;var t=Zt();return t("unscopables"),lH}var uH={},dH;function xMe(){if(dH)return uH;dH=1;var t=Ut(),e=Su();return e(t.JSON,"JSON",!0),uH}var ok,hH;function wMe(){if(hH)return ok;hH=1,Cle(),Ple(),Ile(),cMe(),Rle(),uMe(),dMe(),Mle(),hMe(),fMe(),pMe(),mMe(),gMe(),yMe(),Ale(),vMe(),bMe(),xMe();var t=_t();return ok=t.Symbol,ok}var fH={},ak,pH;function JD(){return pH||(pH=1,ak=function(){}),ak}var lk,mH;function rf(){return mH||(mH=1,lk={}),lk}var ck,gH;function SMe(){if(gH)return ck;gH=1;var t=gr(),e=fn(),r=Function.prototype,n=t&&Object.getOwnPropertyDescriptor,i=e(r,"name"),s=i&&(function(){}).name==="something",o=i&&(!t||t&&n(r,"name").configurable);return ck={EXISTS:i,PROPER:s,CONFIGURABLE:o},ck}var uk,yH;function Dle(){if(yH)return uk;yH=1;var t=ct();return uk=!t(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),uk}var dk,vH;function d1(){if(vH)return dk;vH=1;var t=fn(),e=Jr(),r=Oi(),n=l1(),i=Dle(),s=n("IE_PROTO"),o=Object,a=o.prototype;return dk=i?o.getPrototypeOf:function(l){var u=r(l);if(t(u,s))return u[s];var d=u.constructor;return e(d)&&u instanceof d?d.prototype:u instanceof o?a:null},dk}var hk,bH;function $le(){if(bH)return hk;bH=1;var t=ct(),e=Jr(),r=Zr(),n=hg(),i=d1(),s=fg(),o=Or(),a=Qh(),l=o("iterator"),u=!1,d,h,f;[].keys&&(f=[].keys(),"next"in f?(h=i(i(f)),h!==Object.prototype&&(d=h)):u=!0);var p=!r(d)||t(function(){var m={};return d[l].call(m)!==m});return p?d={}:a&&(d=n(d)),e(d[l])||s(d,l,function(){return this}),hk={IteratorPrototype:d,BUGGY_SAFARI_ITERATORS:u},hk}var fk,xH;function EMe(){if(xH)return fk;xH=1;var t=$le().IteratorPrototype,e=hg(),r=og(),n=Su(),i=rf(),s=function(){return this};return fk=function(o,a,l,u){var d=a+" Iterator";return o.prototype=e(t,{next:r(+!u,l)}),n(o,d,!1,!0),i[d]=s,o},fk}var pk,wH;function _Me(){if(wH)return pk;wH=1;var t=dt(),e=oa();return pk=function(r,n,i){try{return t(e(Object.getOwnPropertyDescriptor(r,n)[i]))}catch{}},pk}var mk,SH;function NMe(){if(SH)return mk;SH=1;var t=Zr();return mk=function(e){return t(e)||e===null},mk}var gk,EH;function CMe(){if(EH)return gk;EH=1;var t=NMe(),e=String,r=TypeError;return gk=function(n){if(t(n))return n;throw new r("Can't set "+e(n)+" as a prototype")},gk}var yk,_H;function kMe(){if(_H)return yk;_H=1;var t=_Me(),e=Zr(),r=sa(),n=CMe();return yk=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,s={},o;try{o=t(Object.prototype,"__proto__","set"),o(s,[]),i=s instanceof Array}catch{}return function(l,u){return r(l),n(u),e(l)&&(i?o(l,u):l.__proto__=u),l}}():void 0),yk}var vk,NH;function ZD(){if(NH)return vk;NH=1;var t=Pe(),e=pi(),r=Qh(),n=SMe(),i=Jr(),s=EMe(),o=d1(),a=kMe(),l=Su(),u=Jh(),d=fg(),h=Or(),f=rf(),p=$le(),m=n.PROPER,g=n.CONFIGURABLE,y=p.IteratorPrototype,v=p.BUGGY_SAFARI_ITERATORS,b=h("iterator"),w="keys",x="values",S="entries",E=function(){return this};return vk=function(N,_,k,j,T,P,O){s(k,_,j);var D=function(se){if(se===T&&B)return B;if(!v&&se&&se in q)return q[se];switch(se){case w:return function(){return new k(this,se)};case x:return function(){return new k(this,se)};case S:return function(){return new k(this,se)}}return function(){return new k(this)}},F=_+" Iterator",$=!1,q=N.prototype,M=q[b]||q["@@iterator"]||T&&q[T],B=!v&&M||D(T),X=_==="Array"&&q.entries||M,Q,le,G;if(X&&(Q=o(X.call(new N)),Q!==Object.prototype&&Q.next&&(!r&&o(Q)!==y&&(a?a(Q,y):i(Q[b])||d(Q,b,E)),l(Q,F,!0,!0),r&&(f[F]=E))),m&&T===x&&M&&M.name!==x&&(!r&&g?u(q,"name",x):($=!0,B=function(){return e(M,this)})),T)if(le={values:D(x),keys:P?B:D(w),entries:D(S)},O)for(G in le)(v||$||!(G in q))&&d(q,G,le[G]);else t({target:_,proto:!0,forced:v||$},le);return(!r||O)&&q[b]!==B&&d(q,b,B,{name:T}),f[_]=B,le},vk}var bk,CH;function e$(){return CH||(CH=1,bk=function(t,e){return{value:t,done:e}}),bk}var xk,kH;function nf(){if(kH)return xk;kH=1;var t=Cs(),e=JD(),r=rf(),n=Eu(),i=rs().f,s=ZD(),o=e$(),a=Qh(),l=gr(),u="Array Iterator",d=n.set,h=n.getterFor(u);xk=s(Array,"Array",function(p,m){d(this,{type:u,target:t(p),index:0,kind:m})},function(){var p=h(this),m=p.target,g=p.index++;if(!m||g>=m.length)return p.target=null,o(void 0,!0);switch(p.kind){case"keys":return o(g,!1);case"values":return o(m[g],!1)}return o([g,m[g]],!1)},"values");var f=r.Arguments=r.Array;if(e("keys"),e("values"),e("entries"),!a&&l&&f.name!=="values")try{i(f,"name",{value:"values"})}catch{}return xk}var wk,jH;function jMe(){return jH||(jH=1,wk={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),wk}var TH;function sf(){if(TH)return fH;TH=1,nf();var t=jMe(),e=Ut(),r=Su(),n=rf();for(var i in t)r(e[i],i),n[i]=n.Array;return fH}var Sk,OH;function Fle(){if(OH)return Sk;OH=1;var t=wMe();return sf(),Sk=t,Sk}var Ek,PH;function TMe(){return PH||(PH=1,Ek=Fle()),Ek}var OMe=TMe(),PMe=ze(OMe),IH={},RH;function IMe(){if(RH)return IH;RH=1;var t=Pe(),e=wu(),r=Nle(),n=Zr(),i=s1(),s=aa(),o=Cs(),a=a1(),l=Or(),u=dg(),d=ef(),h=u("slice"),f=l("species"),p=Array,m=Math.max;return t({target:"Array",proto:!0,forced:!h},{slice:function(y,v){var b=o(this),w=s(b),x=i(y,w),S=i(v===void 0?w:v,w),E,N,_;if(e(b)&&(E=b.constructor,r(E)&&(E===p||e(E.prototype))?E=void 0:n(E)&&(E=E[f],E===null&&(E=void 0)),E===p||E===void 0))return d(b,x,S);for(N=new(E===void 0?p:E)(m(S-x,0)),_=0;x<S;x++,_++)x in b&&a(N,_,b[x]);return N.length=_,N}}),IH}var _k,MH;function RMe(){if(MH)return _k;MH=1,IMe();var t=pn();return _k=t("Array","slice"),_k}var Nk,AH;function MMe(){if(AH)return Nk;AH=1;var t=Tr(),e=RMe(),r=Array.prototype;return Nk=function(n){var i=n.slice;return n===r||t(r,n)&&i===r.slice?e:i},Nk}var Ck,DH;function AMe(){if(DH)return Ck;DH=1;var t=MMe();return Ck=t,Ck}var kk,$H;function DMe(){return $H||($H=1,kk=AMe()),kk}var $Me=DMe(),Ws=ze($Me),jk,FH;function FMe(){if(FH)return jk;FH=1;var t=Ti(),e=dt(),r=c1(),n=o1(),i=no(),s=e([].concat);return jk=t("Reflect","ownKeys")||function(a){var l=r.f(i(a)),u=n.f;return u?s(l,u(a)):l},jk}var qH={},LH;function qMe(){if(LH)return qH;LH=1;var t=Pe(),e=wu();return t({target:"Array",stat:!0},{isArray:e}),qH}var Tk,BH;function LMe(){if(BH)return Tk;BH=1,qMe();var t=_t();return Tk=t.Array.isArray,Tk}var Ok,zH;function BMe(){if(zH)return Ok;zH=1;var t=LMe();return Ok=t,Ok}var Pk,WH;function zMe(){return WH||(WH=1,Pk=BMe()),Pk}var WMe=zMe(),cr=ze(WMe),VH={},UH;function VMe(){if(UH)return VH;UH=1;var t=Pe(),e=Al().map,r=dg(),n=r("map");return t({target:"Array",proto:!0,forced:!n},{map:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),VH}var Ik,HH;function UMe(){if(HH)return Ik;HH=1,VMe();var t=pn();return Ik=t("Array","map"),Ik}var Rk,KH;function HMe(){if(KH)return Rk;KH=1;var t=Tr(),e=UMe(),r=Array.prototype;return Rk=function(n){var i=n.map;return n===r||t(r,n)&&i===r.map?e:i},Rk}var Mk,GH;function KMe(){if(GH)return Mk;GH=1;var t=HMe();return Mk=t,Mk}var Ak,YH;function GMe(){return YH||(YH=1,Ak=KMe()),Ak}var YMe=GMe(),yh=ze(YMe),QH={},XH;function QMe(){if(XH)return QH;XH=1;var t=Pe(),e=Oi(),r=ug(),n=ct(),i=n(function(){r(1)});return t({target:"Object",stat:!0,forced:i},{keys:function(o){return r(e(o))}}),QH}var Dk,JH;function XMe(){if(JH)return Dk;JH=1,QMe();var t=_t();return Dk=t.Object.keys,Dk}var $k,ZH;function JMe(){if(ZH)return $k;ZH=1;var t=XMe();return $k=t,$k}var Fk,eK;function ZMe(){return eK||(eK=1,Fk=JMe()),Fk}var eAe=ZMe(),sr=ze(eAe),tK={},rK;function tAe(){if(rK)return tK;rK=1;var t=Pe(),e=dt(),r=Date,n=e(r.prototype.getTime);return t({target:"Date",stat:!0},{now:function(){return n(new r)}}),tK}var qk,nK;function rAe(){if(nK)return qk;nK=1,tAe();var t=_t();return qk=t.Date.now,qk}var Lk,iK;function nAe(){if(iK)return Lk;iK=1;var t=rAe();return Lk=t,Lk}var Bk,sK;function iAe(){return sK||(sK=1,Bk=nAe()),Bk}var sAe=iAe(),R0=ze(sAe),oK={},zk,aK;function of(){if(aK)return zk;aK=1;var t=ct();return zk=function(e,r){var n=[][e];return!!n&&t(function(){n.call(null,r||function(){return 1},1)})},zk}var Wk,lK;function oAe(){if(lK)return Wk;lK=1;var t=Al().forEach,e=of(),r=e("forEach");return Wk=r?[].forEach:function(i){return t(this,i,arguments.length>1?arguments[1]:void 0)},Wk}var cK;function aAe(){if(cK)return oK;cK=1;var t=Pe(),e=oAe();return t({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),oK}var Vk,uK;function lAe(){if(uK)return Vk;uK=1,aAe();var t=pn();return Vk=t("Array","forEach"),Vk}var Uk,dK;function cAe(){if(dK)return Uk;dK=1;var t=lAe();return Uk=t,Uk}var Hk,hK;function uAe(){if(hK)return Hk;hK=1;var t=tf(),e=fn(),r=Tr(),n=cAe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return Hk=function(o){var a=o.forEach;return o===i||r(i,o)&&a===i.forEach||e(s,t(o))?n:a},Hk}var Kk,fK;function dAe(){return fK||(fK=1,Kk=uAe()),Kk}var hAe=dAe(),It=ze(hAe),pK={},mK;function fAe(){if(mK)return pK;mK=1;var t=Pe(),e=dt(),r=wu(),n=e([].reverse),i=[1,2];return t({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),n(this)}}),pK}var Gk,gK;function pAe(){if(gK)return Gk;gK=1,fAe();var t=pn();return Gk=t("Array","reverse"),Gk}var Yk,yK;function mAe(){if(yK)return Yk;yK=1;var t=Tr(),e=pAe(),r=Array.prototype;return Yk=function(n){var i=n.reverse;return n===r||t(r,n)&&i===r.reverse?e:i},Yk}var Qk,vK;function gAe(){if(vK)return Qk;vK=1;var t=mAe();return Qk=t,Qk}var Xk,bK;function yAe(){return bK||(bK=1,Xk=gAe()),Xk}var vAe=yAe(),jc=ze(vAe),xK={},Jk,wK;function bAe(){if(wK)return Jk;wK=1;var t=gr(),e=wu(),r=TypeError,n=Object.getOwnPropertyDescriptor,i=t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(s){return s instanceof TypeError}}();return Jk=i?function(s,o){if(e(s)&&!n(s,"length").writable)throw new r("Cannot set read only .length");return s.length=o}:function(s,o){return s.length=o},Jk}var Zk,SK;function qle(){if(SK)return Zk;SK=1;var t=Yh(),e=TypeError;return Zk=function(r,n){if(!delete r[n])throw new e("Cannot delete property "+t(n)+" of "+t(r))},Zk}var EK;function xAe(){if(EK)return xK;EK=1;var t=Pe(),e=Oi(),r=s1(),n=Zh(),i=aa(),s=bAe(),o=_le(),a=GD(),l=a1(),u=qle(),d=dg(),h=d("splice"),f=Math.max,p=Math.min;return t({target:"Array",proto:!0,forced:!h},{splice:function(g,y){var v=e(this),b=i(v),w=r(g,b),x=arguments.length,S,E,N,_,k,j;for(x===0?S=E=0:x===1?(S=0,E=b-w):(S=x-2,E=p(f(n(y),0),b-w)),o(b+S-E),N=a(v,E),_=0;_<E;_++)k=w+_,k in v&&l(N,_,v[k]);if(N.length=E,S<E){for(_=w;_<b-E;_++)k=_+E,j=_+S,k in v?v[j]=v[k]:u(v,j);for(_=b;_>b-E+S;_--)u(v,_-1)}else if(S>E)for(_=b-E;_>w;_--)k=_+E-1,j=_+S-1,k in v?v[j]=v[k]:u(v,j);for(_=0;_<S;_++)v[_+w]=arguments[_+2];return s(v,b-E+S),N}}),xK}var ej,_K;function wAe(){if(_K)return ej;_K=1,xAe();var t=pn();return ej=t("Array","splice"),ej}var tj,NK;function SAe(){if(NK)return tj;NK=1;var t=Tr(),e=wAe(),r=Array.prototype;return tj=function(n){var i=n.splice;return n===r||t(r,n)&&i===r.splice?e:i},tj}var rj,CK;function EAe(){if(CK)return rj;CK=1;var t=SAe();return rj=t,rj}var nj,kK;function _Ae(){return kK||(kK=1,nj=EAe()),nj}var NAe=_Ae(),Fo=ze(NAe),jK={},TK;function CAe(){if(TK)return jK;TK=1;var t=Pe(),e=VD().includes,r=ct(),n=JD(),i=r(function(){return!Array(1).includes()});return t({target:"Array",proto:!0,forced:i},{includes:function(o){return e(this,o,arguments.length>1?arguments[1]:void 0)}}),n("includes"),jK}var ij,OK;function kAe(){if(OK)return ij;OK=1,CAe();var t=pn();return ij=t("Array","includes"),ij}var PK={},sj,IK;function jAe(){if(IK)return sj;IK=1;var t=Zr(),e=ro(),r=Or(),n=r("match");return sj=function(i){var s;return t(i)&&((s=i[n])!==void 0?!!s:e(i)==="RegExp")},sj}var oj,RK;function TAe(){if(RK)return oj;RK=1;var t=jAe(),e=TypeError;return oj=function(r){if(t(r))throw new e("The method doesn't accept regular expressions");return r},oj}var aj,MK;function OAe(){if(MK)return aj;MK=1;var t=Or(),e=t("match");return aj=function(r){var n=/./;try{"/./"[r](n)}catch{try{return n[e]=!1,"/./"[r](n)}catch{}}return!1},aj}var AK;function PAe(){if(AK)return PK;AK=1;var t=Pe(),e=dt(),r=TAe(),n=sa(),i=ns(),s=OAe(),o=e("".indexOf);return t({target:"String",proto:!0,forced:!s("includes")},{includes:function(l){return!!~o(i(n(this)),i(r(l)),arguments.length>1?arguments[1]:void 0)}}),PK}var lj,DK;function IAe(){if(DK)return lj;DK=1,PAe();var t=pn();return lj=t("String","includes"),lj}var cj,$K;function RAe(){if($K)return cj;$K=1;var t=Tr(),e=kAe(),r=IAe(),n=Array.prototype,i=String.prototype;return cj=function(s){var o=s.includes;return s===n||t(n,s)&&o===n.includes?e:typeof s=="string"||s===i||t(i,s)&&o===i.includes?r:o},cj}var uj,FK;function MAe(){if(FK)return uj;FK=1;var t=RAe();return uj=t,uj}var dj,qK;function AAe(){return qK||(qK=1,dj=MAe()),dj}var DAe=AAe(),ul=ze(DAe),LK={},BK;function $Ae(){if(BK)return LK;BK=1;var t=Pe(),e=ct(),r=Oi(),n=d1(),i=Dle(),s=e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getPrototypeOf:function(a){return n(r(a))}}),LK}var hj,zK;function FAe(){if(zK)return hj;zK=1,$Ae();var t=_t();return hj=t.Object.getPrototypeOf,hj}var fj,WK;function qAe(){if(WK)return fj;WK=1;var t=FAe();return fj=t,fj}var pj,VK;function LAe(){return VK||(VK=1,pj=qAe()),pj}var BAe=LAe(),UK=ze(BAe),mj,HK;function zAe(){if(HK)return mj;HK=1,Cle();var t=pn();return mj=t("Array","concat"),mj}var gj,KK;function WAe(){if(KK)return gj;KK=1;var t=Tr(),e=zAe(),r=Array.prototype;return gj=function(n){var i=n.concat;return n===r||t(r,n)&&i===r.concat?e:i},gj}var yj,GK;function VAe(){if(GK)return yj;GK=1;var t=WAe();return yj=t,yj}var vj,YK;function UAe(){return YK||(YK=1,vj=VAe()),vj}var HAe=UAe(),KAe=ze(HAe),QK={},XK;function GAe(){if(XK)return QK;XK=1;var t=Pe(),e=Al().filter,r=dg(),n=r("filter");return t({target:"Array",proto:!0,forced:!n},{filter:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),QK}var bj,JK;function YAe(){if(JK)return bj;JK=1,GAe();var t=pn();return bj=t("Array","filter"),bj}var xj,ZK;function QAe(){if(ZK)return xj;ZK=1;var t=Tr(),e=YAe(),r=Array.prototype;return xj=function(n){var i=n.filter;return n===r||t(r,n)&&i===r.filter?e:i},xj}var wj,eG;function XAe(){if(eG)return wj;eG=1;var t=QAe();return wj=t,wj}var Sj,tG;function JAe(){return tG||(tG=1,Sj=XAe()),Sj}var ZAe=JAe(),ti=ze(ZAe),rG={},Ej,nG;function eDe(){if(nG)return Ej;nG=1;var t=gr(),e=ct(),r=dt(),n=d1(),i=ug(),s=Cs(),o=e1().f,a=r(o),l=r([].push),u=t&&e(function(){var h=Object.create(null);return h[2]=2,!a(h,2)}),d=function(h){return function(f){for(var p=s(f),m=i(p),g=u&&n(p)===null,y=m.length,v=0,b=[],w;y>v;)w=m[v++],(!t||(g?w in p:a(p,w)))&&l(b,h?[w,p[w]]:p[w]);return b}};return Ej={entries:d(!0),values:d(!1)},Ej}var iG;function tDe(){if(iG)return rG;iG=1;var t=Pe(),e=eDe().values;return t({target:"Object",stat:!0},{values:function(n){return e(n)}}),rG}var _j,sG;function rDe(){if(sG)return _j;sG=1,tDe();var t=_t();return _j=t.Object.values,_j}var Nj,oG;function nDe(){if(oG)return Nj;oG=1;var t=rDe();return Nj=t,Nj}var Cj,aG;function iDe(){return aG||(aG=1,Cj=nDe()),Cj}var sDe=iDe(),oDe=ze(sDe),lG={},kj,cG;function t$(){return cG||(cG=1,kj=`	
\v\f\r \u2028\u2029\uFEFF`),kj}var jj,uG;function Lle(){if(uG)return jj;uG=1;var t=dt(),e=sa(),r=ns(),n=t$(),i=t("".replace),s=RegExp("^["+n+"]+"),o=RegExp("(^|[^"+n+"])["+n+"]+$"),a=function(l){return function(u){var d=r(e(u));return l&1&&(d=i(d,s,"")),l&2&&(d=i(d,o,"$1")),d}};return jj={start:a(1),end:a(2),trim:a(3)},jj}var Tj,dG;function aDe(){if(dG)return Tj;dG=1;var t=Ut(),e=ct(),r=dt(),n=ns(),i=Lle().trim,s=t$(),o=t.parseInt,a=t.Symbol,l=a&&a.iterator,u=/^[+-]?0x/i,d=r(u.exec),h=o(s+"08")!==8||o(s+"0x16")!==22||l&&!e(function(){o(Object(l))});return Tj=h?function(p,m){var g=i(n(p));return o(g,m>>>0||(d(u,g)?16:10))}:o,Tj}var hG;function lDe(){if(hG)return lG;hG=1;var t=Pe(),e=aDe();return t({global:!0,forced:parseInt!==e},{parseInt:e}),lG}var Oj,fG;function cDe(){if(fG)return Oj;fG=1,lDe();var t=_t();return Oj=t.parseInt,Oj}var Pj,pG;function uDe(){if(pG)return Pj;pG=1;var t=cDe();return Pj=t,Pj}var Ij,mG;function dDe(){return mG||(mG=1,Ij=uDe()),Ij}var hDe=dDe(),ms=ze(hDe),gG={},yG;function fDe(){if(yG)return gG;yG=1;var t=Pe(),e=LD(),r=VD().indexOf,n=of(),i=e([].indexOf),s=!!i&&1/i([1],1,-0)<0,o=s||!n("indexOf");return t({target:"Array",proto:!0,forced:o},{indexOf:function(l){var u=arguments.length>1?arguments[1]:void 0;return s?i(this,l,u)||0:r(this,l,u)}}),gG}var Rj,vG;function pDe(){if(vG)return Rj;vG=1,fDe();var t=pn();return Rj=t("Array","indexOf"),Rj}var Mj,bG;function mDe(){if(bG)return Mj;bG=1;var t=Tr(),e=pDe(),r=Array.prototype;return Mj=function(n){var i=n.indexOf;return n===r||t(r,n)&&i===r.indexOf?e:i},Mj}var Aj,xG;function gDe(){if(xG)return Aj;xG=1;var t=mDe();return Aj=t,Aj}var Dj,wG;function yDe(){return wG||(wG=1,Dj=gDe()),Dj}var vDe=yDe(),wt=ze(vDe),SG={},EG;function bDe(){if(EG)return SG;EG=1;var t=Pe(),e=gr(),r=hg();return t({target:"Object",stat:!0,sham:!e},{create:r}),SG}var $j,_G;function xDe(){if(_G)return $j;_G=1,bDe();var t=_t(),e=t.Object;return $j=function(n,i){return e.create(n,i)},$j}var Fj,NG;function wDe(){if(NG)return Fj;NG=1;var t=xDe();return Fj=t,Fj}var qj,CG;function SDe(){return CG||(CG=1,qj=wDe()),qj}var EDe=SDe(),Tc=ze(EDe),kG={},Lj,jG;function _De(){if(jG)return Lj;jG=1;var t=Zh(),e=ns(),r=sa(),n=RangeError;return Lj=function(s){var o=e(r(this)),a="",l=t(s);if(l<0||l===1/0)throw new n("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(o+=o))l&1&&(a+=o);return a},Lj}var Bj,TG;function NDe(){if(TG)return Bj;TG=1;var t=dt(),e=vle(),r=ns(),n=_De(),i=sa(),s=t(n),o=t("".slice),a=Math.ceil,l=function(u){return function(d,h,f){var p=r(i(d)),m=e(h),g=p.length,y=f===void 0?" ":r(f),v,b;return m<=g||y===""?p:(v=m-g,b=s(y,a(v/y.length)),b.length>v&&(b=o(b,0,v)),u?p+b:b+p)}};return Bj={start:l(!1),end:l(!0)},Bj}var zj,OG;function CDe(){if(OG)return zj;OG=1;var t=dt(),e=ct(),r=NDe().start,n=RangeError,i=isFinite,s=Math.abs,o=Date.prototype,a=o.toISOString,l=t(o.getTime),u=t(o.getUTCDate),d=t(o.getUTCFullYear),h=t(o.getUTCHours),f=t(o.getUTCMilliseconds),p=t(o.getUTCMinutes),m=t(o.getUTCMonth),g=t(o.getUTCSeconds);return zj=e(function(){return a.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){a.call(new Date(NaN))})?function(){if(!i(l(this)))throw new n("Invalid time value");var v=this,b=d(v),w=f(v),x=b<0?"-":b>9999?"+":"";return x+r(s(b),x?6:4,0)+"-"+r(m(v)+1,2,0)+"-"+r(u(v),2,0)+"T"+r(h(v),2,0)+":"+r(p(v),2,0)+":"+r(g(v),2,0)+"."+r(w,3,0)+"Z"}:a,zj}var PG;function kDe(){if(PG)return kG;PG=1;var t=Pe(),e=pi(),r=Oi(),n=ple(),i=CDe(),s=ro(),o=ct(),a=o(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return t({target:"Date",proto:!0,forced:a},{toJSON:function(u){var d=r(this),h=n(d,"number");return typeof h=="number"&&!isFinite(h)?null:!("toISOString"in d)&&s(d)==="Date"?e(i,d):d.toISOString()}}),kG}var Wj,IG;function jDe(){if(IG)return Wj;IG=1,kDe(),Ole();var t=_t(),e=Zb();return t.JSON||(t.JSON={stringify:JSON.stringify}),Wj=function(n,i,s){return e(t.JSON.stringify,null,arguments)},Wj}var Vj,RG;function TDe(){if(RG)return Vj;RG=1;var t=jDe();return Vj=t,Vj}var Uj,MG;function ODe(){return MG||(MG=1,Uj=TDe()),Uj}var PDe=ODe(),pg=ze(PDe),AG={},DG={},Hj,$G;function Ble(){if($G)return Hj;$G=1;var t=Ut(),e=Kh(),r=ro(),n=function(i){return e.slice(0,i.length)===i};return Hj=function(){return n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":t.Bun&&typeof Bun.version=="string"?"BUN":t.Deno&&typeof Deno.version=="object"?"DENO":r(t.process)==="process"?"NODE":t.window&&t.document?"BROWSER":"REST"}(),Hj}var Kj,FG;function IDe(){if(FG)return Kj;FG=1;var t=TypeError;return Kj=function(e,r){if(e<r)throw new t("Not enough arguments");return e},Kj}var Gj,qG;function zle(){if(qG)return Gj;qG=1;var t=Ut(),e=Zb(),r=Jr(),n=Ble(),i=Kh(),s=ef(),o=IDe(),a=t.Function,l=/MSIE .\./.test(i)||n==="BUN"&&function(){var u=t.Bun.version.split(".");return u.length<3||u[0]==="0"&&(u[1]<3||u[1]==="3"&&u[2]==="0")}();return Gj=function(u,d){var h=d?2:1;return l?function(f,p){var m=o(arguments.length,1)>h,g=r(f)?f:a(f),y=m?s(arguments,h):[],v=m?function(){e(g,this,y)}:g;return d?u(v,p):u(v)}:u},Gj}var LG;function RDe(){if(LG)return DG;LG=1;var t=Pe(),e=Ut(),r=zle(),n=r(e.setInterval,!0);return t({global:!0,bind:!0,forced:e.setInterval!==n},{setInterval:n}),DG}var BG={},zG;function MDe(){if(zG)return BG;zG=1;var t=Pe(),e=Ut(),r=zle(),n=r(e.setTimeout,!0);return t({global:!0,bind:!0,forced:e.setTimeout!==n},{setTimeout:n}),BG}var WG;function Wle(){return WG||(WG=1,RDe(),MDe()),AG}var Yj,VG;function ADe(){if(VG)return Yj;VG=1,Wle();var t=_t();return Yj=t.setTimeout,Yj}var Qj,UG;function DDe(){return UG||(UG=1,Qj=ADe()),Qj}var $De=DDe(),qo=ze($De),HG={},Xj,KG;function FDe(){if(KG)return Xj;KG=1;var t=Oi(),e=s1(),r=aa();return Xj=function(i){for(var s=t(this),o=r(s),a=arguments.length,l=e(a>1?arguments[1]:void 0,o),u=a>2?arguments[2]:void 0,d=u===void 0?o:e(u,o);d>l;)s[l++]=i;return s},Xj}var GG;function qDe(){if(GG)return HG;GG=1;var t=Pe(),e=FDe(),r=JD();return t({target:"Array",proto:!0},{fill:e}),r("fill"),HG}var Jj,YG;function LDe(){if(YG)return Jj;YG=1,qDe();var t=pn();return Jj=t("Array","fill"),Jj}var Zj,QG;function BDe(){if(QG)return Zj;QG=1;var t=Tr(),e=LDe(),r=Array.prototype;return Zj=function(n){var i=n.fill;return n===r||t(r,n)&&i===r.fill?e:i},Zj}var eT,XG;function zDe(){if(XG)return eT;XG=1;var t=BDe();return eT=t,eT}var tT,JG;function WDe(){return JG||(JG=1,tT=zDe()),tT}var VDe=WDe(),mg=ze(VDe);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function Es(){return Es=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Es.apply(this,arguments)}function is(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function by(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var zR;typeof Object.assign!="function"?zR=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])}return r}:zR=Object.assign;var tu=zR,ZG=["","webkit","Moz","MS","ms","o"],UDe=typeof document>"u"?{style:{}}:document.createElement("div"),HDe="function",md=Math.round,ru=Math.abs,r$=Date.now;function h1(t,e){for(var r,n,i=e[0].toUpperCase()+e.slice(1),s=0;s<ZG.length;){if(r=ZG[s],n=r?r+i:e,n in t)return n;s++}}var Lo;typeof window>"u"?Lo={}:Lo=window;var Vle=h1(UDe.style,"touchAction"),Ule=Vle!==void 0;function KDe(){if(!Ule)return!1;var t={},e=Lo.CSS&&Lo.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){return t[r]=e?Lo.CSS.supports("touch-action",r):!0}),t}var Hle="compute",Kle="auto",WR="manipulation",Oc="none",cm="pan-x",um="pan-y",xy=KDe(),GDe=/mobile|tablet|ip(ad|hone|od)|android/i,Gle="ontouchstart"in Lo,YDe=h1(Lo,"PointerEvent")!==void 0,QDe=Gle&&GDe.test(navigator.userAgent),gg="touch",XDe="pen",n$="mouse",JDe="kinect",ZDe=25,zn=1,_u=2,_r=4,di=8,M0=1,yg=2,vg=4,bg=8,vh=16,Xs=yg|vg,Pc=bg|vh,Yle=Xs|Pc,Qle=["x","y"],A0=["clientX","clientY"];function Bo(t,e,r){var n;if(t)if(t.forEach)t.forEach(e,r);else if(t.length!==void 0)for(n=0;n<t.length;)e.call(r,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t)}function f1(t,e){return typeof t===HDe?t.apply(e&&e[0]||void 0,e):t}function ac(t,e){return t.indexOf(e)>-1}function e$e(t){if(ac(t,Oc))return Oc;var e=ac(t,cm),r=ac(t,um);return e&&r?Oc:e||r?e?cm:um:ac(t,WR)?WR:Kle}var Xle=function(){function t(r,n){this.manager=r,this.set(n)}var e=t.prototype;return e.set=function(n){n===Hle&&(n=this.compute()),Ule&&this.manager.element.style&&xy[n]&&(this.manager.element.style[Vle]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return Bo(this.manager.recognizers,function(i){f1(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),e$e(n.join(" "))},e.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=ac(o,Oc)&&!xy[Oc],l=ac(o,um)&&!xy[um],u=ac(o,cm)&&!xy[cm];if(a){var d=n.pointers.length===1,h=n.distance<2,f=n.deltaTime<250;if(d&&h&&f)return}if(!(u&&l)&&(a||l&&s&Xs||u&&s&Pc))return this.preventSrc(i)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},t}();function i$(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function Jle(t){var e=t.length;if(e===1)return{x:md(t[0].clientX),y:md(t[0].clientY)};for(var r=0,n=0,i=0;i<e;)r+=t[i].clientX,n+=t[i].clientY,i++;return{x:md(r/e),y:md(n/e)}}function eY(t){for(var e=[],r=0;r<t.pointers.length;)e[r]={clientX:md(t.pointers[r].clientX),clientY:md(t.pointers[r].clientY)},r++;return{timeStamp:r$(),pointers:e,center:Jle(e),deltaX:t.deltaX,deltaY:t.deltaY}}function D0(t,e,r){r||(r=Qle);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.sqrt(n*n+i*i)}function VR(t,e,r){r||(r=Qle);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.atan2(i,n)*180/Math.PI}function Zle(t,e){return t===e?M0:ru(t)>=ru(e)?t<0?yg:vg:e<0?bg:vh}function t$e(t,e){var r=e.center,n=t.offsetDelta||{},i=t.prevDelta||{},s=t.prevInput||{};(e.eventType===zn||s.eventType===_r)&&(i=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:r.x,y:r.y}),e.deltaX=i.x+(r.x-n.x),e.deltaY=i.y+(r.y-n.y)}function ece(t,e,r){return{x:e/t||0,y:r/t||0}}function r$e(t,e){return D0(e[0],e[1],A0)/D0(t[0],t[1],A0)}function n$e(t,e){return VR(e[1],e[0],A0)+VR(t[1],t[0],A0)}function i$e(t,e){var r=t.lastInterval||e,n=e.timeStamp-r.timeStamp,i,s,o,a;if(e.eventType!==di&&(n>ZDe||r.velocity===void 0)){var l=e.deltaX-r.deltaX,u=e.deltaY-r.deltaY,d=ece(n,l,u);s=d.x,o=d.y,i=ru(d.x)>ru(d.y)?d.x:d.y,a=Zle(l,u),t.lastInterval=e}else i=r.velocity,s=r.velocityX,o=r.velocityY,a=r.direction;e.velocity=i,e.velocityX=s,e.velocityY=o,e.direction=a}function s$e(t,e){var r=t.session,n=e.pointers,i=n.length;r.firstInput||(r.firstInput=eY(e)),i>1&&!r.firstMultiple?r.firstMultiple=eY(e):i===1&&(r.firstMultiple=!1);var s=r.firstInput,o=r.firstMultiple,a=o?o.center:s.center,l=e.center=Jle(n);e.timeStamp=r$(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=VR(a,l),e.distance=D0(a,l),t$e(r,e),e.offsetDirection=Zle(e.deltaX,e.deltaY);var u=ece(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=ru(u.x)>ru(u.y)?u.x:u.y,e.scale=o?r$e(o.pointers,n):1,e.rotation=o?n$e(o.pointers,n):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,i$e(r,e);var d=t.element,h=e.srcEvent,f;h.composedPath?f=h.composedPath()[0]:h.path?f=h.path[0]:f=h.target,i$(f,d)&&(d=f),e.target=d}function o$e(t,e,r){var n=r.pointers.length,i=r.changedPointers.length,s=e&zn&&n-i===0,o=e&(_r|di)&&n-i===0;r.isFirst=!!s,r.isFinal=!!o,s&&(t.session={}),r.eventType=e,s$e(t,r),t.emit("hammer.input",r),t.recognize(r),t.session.prevInput=r}function dm(t){return t.trim().split(/\s+/g)}function yp(t,e,r){Bo(dm(e),function(n){t.addEventListener(n,r,!1)})}function vp(t,e,r){Bo(dm(e),function(n){t.removeEventListener(n,r,!1)})}function tY(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var af=function(){function t(r,n){var i=this;this.manager=r,this.callback=n,this.element=r.element,this.target=r.options.inputTarget,this.domHandler=function(s){f1(r.options.enable,[r])&&i.handler(s)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&yp(this.element,this.evEl,this.domHandler),this.evTarget&&yp(this.target,this.evTarget,this.domHandler),this.evWin&&yp(tY(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&vp(this.element,this.evEl,this.domHandler),this.evTarget&&vp(this.target,this.evTarget,this.domHandler),this.evWin&&vp(tY(this.element),this.evWin,this.domHandler)},t}();function nu(t,e,r){if(t.indexOf&&!r)return t.indexOf(e);for(var n=0;n<t.length;){if(r&&t[n][r]==e||!r&&t[n]===e)return n;n++}return-1}var a$e={pointerdown:zn,pointermove:_u,pointerup:_r,pointercancel:di,pointerout:di},l$e={2:gg,3:XDe,4:n$,5:JDe},tce="pointerdown",rce="pointermove pointerup pointercancel";Lo.MSPointerEvent&&!Lo.PointerEvent&&(tce="MSPointerDown",rce="MSPointerMove MSPointerUp MSPointerCancel");var nce=function(t){is(e,t);function e(){var n,i=e.prototype;return i.evEl=tce,i.evWin=rce,n=t.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var r=e.prototype;return r.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=a$e[a],u=l$e[i.pointerType]||i.pointerType,d=u===gg,h=nu(s,i.pointerId,"pointerId");l&zn&&(i.button===0||d)?h<0&&(s.push(i),h=s.length-1):l&(_r|di)&&(o=!0),!(h<0)&&(s[h]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:u,srcEvent:i}),o&&s.splice(h,1))},e}(af);function hm(t){return Array.prototype.slice.call(t,0)}function s$(t,e,r){for(var n=[],i=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];nu(i,o)<0&&n.push(t[s]),i[s]=o,s++}return r&&(e?n=n.sort(function(a,l){return a[e]>l[e]}):n=n.sort()),n}var c$e={touchstart:zn,touchmove:_u,touchend:_r,touchcancel:di},u$e="touchstart touchmove touchend touchcancel",o$=function(t){is(e,t);function e(){var n;return e.prototype.evTarget=u$e,n=t.apply(this,arguments)||this,n.targetIds={},n}var r=e.prototype;return r.handler=function(i){var s=c$e[i.type],o=d$e.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:gg,srcEvent:i})},e}(af);function d$e(t,e){var r=hm(t.touches),n=this.targetIds;if(e&(zn|_u)&&r.length===1)return n[r[0].identifier]=!0,[r,r];var i,s,o=hm(t.changedTouches),a=[],l=this.target;if(s=r.filter(function(u){return i$(u.target,l)}),e===zn)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),e&(_r|di)&&delete n[o[i].identifier],i++;if(a.length)return[s$(s.concat(a),"identifier",!0),a]}var h$e={mousedown:zn,mousemove:_u,mouseup:_r},f$e="mousedown",p$e="mousemove mouseup",a$=function(t){is(e,t);function e(){var n,i=e.prototype;return i.evEl=f$e,i.evWin=p$e,n=t.apply(this,arguments)||this,n.pressed=!1,n}var r=e.prototype;return r.handler=function(i){var s=h$e[i.type];s&zn&&i.button===0&&(this.pressed=!0),s&_u&&i.which!==1&&(s=_r),this.pressed&&(s&_r&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:n$,srcEvent:i}))},e}(af),m$e=2500,rY=25;function nY(t){var e=t.changedPointers,r=e[0];if(r.identifier===this.primaryTouch){var n={x:r.clientX,y:r.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,m$e)}}function g$e(t,e){t&zn?(this.primaryTouch=e.changedPointers[0].identifier,nY.call(this,e)):t&(_r|di)&&nY.call(this,e)}function y$e(t){for(var e=t.srcEvent.clientX,r=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(e-i.x),o=Math.abs(r-i.y);if(s<=rY&&o<=rY)return!0}return!1}var ice=function(){var t=function(e){is(r,e);function r(i,s){var o;return o=e.call(this,i,s)||this,o.handler=function(a,l,u){var d=u.pointerType===gg,h=u.pointerType===n$;if(!(h&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(d)g$e.call(by(by(o)),l,u);else if(h&&y$e.call(by(by(o)),u))return;o.callback(a,l,u)}},o.touch=new o$(o.manager,o.handler),o.mouse=new a$(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=r.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},r}(af);return t}();function v$e(t){var e,r=t.options.inputClass;return r?e=r:YDe?e=nce:QDe?e=o$:Gle?e=ice:e=a$,new e(t,o$e)}function gd(t,e,r){return Array.isArray(t)?(Bo(t,r[e],r),!0):!1}var Yy=1,Xi=2,bh=4,dl=8,zo=dl,fm=16,Us=32,b$e=1;function x$e(){return b$e++}function wy(t,e){var r=e.manager;return r?r.get(t):t}function iY(t){return t&fm?"cancel":t&dl?"end":t&bh?"move":t&Xi?"start":""}var xg=function(){function t(r){r===void 0&&(r={}),this.options=Es({enable:!0},r),this.id=x$e(),this.manager=null,this.state=Yy,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(n){return tu(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(gd(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=wy(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return gd(n,"dropRecognizeWith",this)?this:(n=wy(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(gd(n,"requireFailure",this))return this;var i=this.requireFail;return n=wy(n,this),nu(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(gd(n,"dropRequireFailure",this))return this;n=wy(n,this);var i=nu(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<dl&&o(i.options.event+iY(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=dl&&o(i.options.event+iY(s))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=Us},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(Us|Yy)))return!1;n++}return!0},e.recognize=function(n){var i=tu({},n);if(!f1(this.options.enable,[this,i])){this.reset(),this.state=Us;return}this.state&(zo|fm|Us)&&(this.state=Yy),this.state=this.process(i),this.state&(Xi|bh|dl|fm)&&this.tryEmit(i)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},t}(),UR=function(t){is(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,Es({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var r=e.prototype;return r.getTouchAction=function(){return[WR]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime<o.time;if(this.reset(),i.eventType&zn&&this.count===0)return this.failTimeout();if(l&&u&&a){if(i.eventType!==_r)return this.failTimeout();var d=this.pTime?i.timeStamp-this.pTime<o.interval:!0,h=!this.pCenter||D0(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!h||!d?this.count=1:this.count+=1,this._input=i;var f=this.count%o.taps;if(f===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=zo,s.tryEmit()},o.interval),Xi):zo}return Us},r.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=Us},this.options.interval),Us},r.reset=function(){clearTimeout(this._timer)},r.emit=function(){this.state===zo&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(xg),xh=function(t){is(e,t);function e(n){return n===void 0&&(n={}),t.call(this,Es({pointers:1},n))||this}var r=e.prototype;return r.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},r.process=function(i){var s=this.state,o=i.eventType,a=s&(Xi|bh),l=this.attrTest(i);return a&&(o&di||!l)?s|fm:a||l?o&_r?s|dl:s&Xi?s|bh:Xi:Us},e}(xg);function sce(t){return t===vh?"down":t===bg?"up":t===yg?"left":t===vg?"right":""}var l$=function(t){is(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,Es({event:"pan",threshold:10,pointers:1,direction:Yle},n))||this,i.pX=null,i.pY=null,i}var r=e.prototype;return r.getTouchAction=function(){var i=this.options.direction,s=[];return i&Xs&&s.push(um),i&Pc&&s.push(cm),s},r.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,u=i.deltaX,d=i.deltaY;return l&s.direction||(s.direction&Xs?(l=u===0?M0:u<0?yg:vg,o=u!==this.pX,a=Math.abs(i.deltaX)):(l=d===0?M0:d<0?bg:vh,o=d!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},r.attrTest=function(i){return xh.prototype.attrTest.call(this,i)&&(this.state&Xi||!(this.state&Xi)&&this.directionTest(i))},r.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=sce(i.direction);s&&(i.additionalEvent=this.options.event+s),t.prototype.emit.call(this,i)},e}(xh),oce=function(t){is(e,t);function e(n){return n===void 0&&(n={}),t.call(this,Es({event:"swipe",threshold:10,velocity:.3,direction:Xs|Pc,pointers:1},n))||this}var r=e.prototype;return r.getTouchAction=function(){return l$.prototype.getTouchAction.call(this)},r.attrTest=function(i){var s=this.options.direction,o;return s&(Xs|Pc)?o=i.overallVelocity:s&Xs?o=i.overallVelocityX:s&Pc&&(o=i.overallVelocityY),t.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&ru(o)>this.options.velocity&&i.eventType&_r},r.emit=function(i){var s=sce(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},e}(xh),ace=function(t){is(e,t);function e(n){return n===void 0&&(n={}),t.call(this,Es({event:"pinch",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[Oc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&Xi)},r.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}t.prototype.emit.call(this,i)},e}(xh),lce=function(t){is(e,t);function e(n){return n===void 0&&(n={}),t.call(this,Es({event:"rotate",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[Oc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&Xi)},e}(xh),cce=function(t){is(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,Es({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var r=e.prototype;return r.getTouchAction=function(){return[Kle]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,u=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(_r|di)&&!u)this.reset();else if(i.eventType&zn)this.reset(),this._timer=setTimeout(function(){s.state=zo,s.tryEmit()},o.time);else if(i.eventType&_r)return zo;return Us},r.reset=function(){clearTimeout(this._timer)},r.emit=function(i){this.state===zo&&(i&&i.eventType&_r?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=r$(),this.manager.emit(this.options.event,this._input)))},e}(xg),uce={domEvents:!1,touchAction:Hle,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},sY=[[lce,{enable:!1}],[ace,{enable:!1},["rotate"]],[oce,{direction:Xs}],[l$,{direction:Xs},["swipe"]],[UR],[UR,{event:"doubletap",taps:2},["tap"]],[cce]],w$e=1,oY=2;function aY(t,e){var r=t.element;if(r.style){var n;Bo(t.options.cssProps,function(i,s){n=h1(r.style,s),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function S$e(t,e){var r=document.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}var lY=function(){function t(r,n){var i=this;this.options=tu({},uce,n||{}),this.options.inputTarget=this.options.inputTarget||r,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=r,this.input=v$e(this),this.touchAction=new Xle(this,this.options.touchAction),aY(this,!0),Bo(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var e=t.prototype;return e.set=function(n){return tu(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?oY:w$e},e.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&zo)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==oY&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(Xi|bh|dl)&&(i.curRecognizer=s,a=s),l++}},e.get=function(n){if(n instanceof xg)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},e.add=function(n){if(gd(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(gd(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=nu(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},e.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return Bo(dm(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},e.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return Bo(dm(n),function(o){i?s[o]&&s[o].splice(nu(s[o],i),1):delete s[o]}),this},e.emit=function(n,i){this.options.domEvents&&S$e(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},e.destroy=function(){this.element&&aY(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),E$e={touchstart:zn,touchmove:_u,touchend:_r,touchcancel:di},_$e="touchstart",N$e="touchstart touchmove touchend touchcancel",C$e=function(t){is(e,t);function e(){var n,i=e.prototype;return i.evTarget=_$e,i.evWin=N$e,n=t.apply(this,arguments)||this,n.started=!1,n}var r=e.prototype;return r.handler=function(i){var s=E$e[i.type];if(s===zn&&(this.started=!0),!!this.started){var o=k$e.call(this,i,s);s&(_r|di)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:gg,srcEvent:i})}},e}(af);function k$e(t,e){var r=hm(t.touches),n=hm(t.changedTouches);return e&(_r|di)&&(r=s$(r.concat(n),"identifier",!0)),[r,n]}function dce(t,e,r){var n="DEPRECATED METHOD: "+e+`
`+r+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),t.apply(this,arguments)}}var hce=dce(function(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;)(!r||r&&t[n[i]]===void 0)&&(t[n[i]]=e[n[i]]),i++;return t},"extend","Use `assign`."),j$e=dce(function(t,e){return hce(t,e,!0)},"merge","Use `assign`.");function T$e(t,e,r){var n=e.prototype,i;i=t.prototype=Object.create(n),i.constructor=t,i._super=n,r&&tu(i,r)}function cY(t,e){return function(){return t.apply(e,arguments)}}var fce=function(){var t=function(r,n){return n===void 0&&(n={}),new lY(r,Es({recognizers:sY.concat()},n))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=Yle,t.DIRECTION_DOWN=vh,t.DIRECTION_LEFT=yg,t.DIRECTION_RIGHT=vg,t.DIRECTION_UP=bg,t.DIRECTION_HORIZONTAL=Xs,t.DIRECTION_VERTICAL=Pc,t.DIRECTION_NONE=M0,t.DIRECTION_DOWN=vh,t.INPUT_START=zn,t.INPUT_MOVE=_u,t.INPUT_END=_r,t.INPUT_CANCEL=di,t.STATE_POSSIBLE=Yy,t.STATE_BEGAN=Xi,t.STATE_CHANGED=bh,t.STATE_ENDED=dl,t.STATE_RECOGNIZED=zo,t.STATE_CANCELLED=fm,t.STATE_FAILED=Us,t.Manager=lY,t.Input=af,t.TouchAction=Xle,t.TouchInput=o$,t.MouseInput=a$,t.PointerEventInput=nce,t.TouchMouseInput=ice,t.SingleTouchInput=C$e,t.Recognizer=xg,t.AttrRecognizer=xh,t.Tap=UR,t.Pan=l$,t.Swipe=oce,t.Pinch=ace,t.Rotate=lce,t.Press=cce,t.on=yp,t.off=vp,t.each=Bo,t.merge=j$e,t.extend=hce,t.bindFn=cY,t.assign=tu,t.inherit=T$e,t.bindFn=cY,t.prefixed=h1,t.toArray=hm,t.inArray=nu,t.uniqueArray=s$,t.splitStr=dm,t.boolOrFn=f1,t.hasParent=i$,t.addEventListeners=yp,t.removeEventListeners=vp,t.defaults=tu({},uce,{preset:sY}),t}();fce.defaults;PMe("DELETE");function p1(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return O$e(e.length?e:[R0()])}function O$e(t){let[e,r,n]=P$e(t),i=1;const s=()=>{const o=2091639*e+i*23283064365386963e-26;return e=r,r=n,n=o-(i=o|0)};return s.uint32=()=>s()*4294967296,s.fract53=()=>s()+(s()*2097152|0)*11102230246251565e-32,s.algorithm="Alea",s.seed=t,s.version="0.9",s}function P$e(){const t=I$e();let e=t(" "),r=t(" "),n=t(" ");for(let i=0;i<arguments.length;i++)e-=t(i<0||arguments.length<=i?void 0:arguments[i]),e<0&&(e+=1),r-=t(i<0||arguments.length<=i?void 0:arguments[i]),r<0&&(r+=1),n-=t(i<0||arguments.length<=i?void 0:arguments[i]),n<0&&(n+=1);return[e,r,n]}function I$e(){let t=4022871197;return function(e){const r=e.toString();for(let n=0;n<r.length;n++){t+=r.charCodeAt(n);let i=.02519603282416938*t;t=i>>>0,i-=t,i*=t,t=i>>>0,i-=t,t+=i*4294967296}return(t>>>0)*23283064365386963e-26}}function R$e(){const t=()=>{};return{on:t,off:t,destroy:t,emit:t,get(){return{set:t}}}}const c$=typeof window<"u"?window.Hammer||fce:function(){return R$e()};function Hs(t){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const r=c$(this._dom.overlay);r.on("tap",de(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{r.destroy()});const n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];It(n).call(n,i=>{r.on(i,s=>{s.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=i=>{M$e(i.target,t)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=i=>{("key"in i?i.key==="Escape":i.keyCode===27)&&this.deactivate()}}Ele(Hs.prototype);Hs.current=null;Hs.prototype.destroy=function(){this.deactivate();for(const r of jc(t=Fo(e=this._cleanupQueue).call(e,0)).call(t)){var t,e;r()}};Hs.prototype.activate=function(){Hs.current&&Hs.current.deactivate(),Hs.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};Hs.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};Hs.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};function M$e(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}const A$e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,D$e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,$$e=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,F$e=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function Ea(t){if(t)for(;t.hasChildNodes()===!0;){const e=t.firstChild;e&&(Ea(e),t.removeChild(e))}}function Td(t){return t instanceof String||typeof t=="string"}function uY(t){return typeof t=="object"&&t!==null}function iu(t,e,r,n){let i=!1;n===!0&&(i=e[r]===null&&t[r]!==void 0),i?delete t[r]:t[r]=e[r]}function pce(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;for(const n in t)if(e[n]!==void 0)if(e[n]===null||typeof e[n]!="object")iu(t,e,n,r);else{const i=t[n],s=e[n];uY(i)&&uY(s)&&pce(i,s,r)}}function lf(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(cr(r))throw new TypeError("Arrays are not supported by deepExtend");for(let i=0;i<t.length;i++){const s=t[i];if(Object.prototype.hasOwnProperty.call(r,s))if(r[s]&&r[s].constructor===Object)e[s]===void 0&&(e[s]={}),e[s].constructor===Object?At(e[s],r[s],!1,n):iu(e,r,s,n);else{if(cr(r[s]))throw new TypeError("Arrays are not supported by deepExtend");iu(e,r,s,n)}}return e}function $0(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(cr(r))throw new TypeError("Arrays are not supported by deepExtend");for(const i in r)if(Object.prototype.hasOwnProperty.call(r,i)&&!ul(t).call(t,i))if(r[i]&&r[i].constructor===Object)e[i]===void 0&&(e[i]={}),e[i].constructor===Object?At(e[i],r[i]):iu(e,r,i,n);else if(cr(r[i])){e[i]=[];for(let s=0;s<r[i].length;s++)e[i].push(r[i][s])}else iu(e,r,i,n);return e}function At(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)||r===!0)if(typeof e[s]=="object"&&e[s]!==null&&UK(e[s])===Object.prototype)t[s]===void 0?t[s]=At({},e[s],r):typeof t[s]=="object"&&t[s]!==null&&UK(t[s])===Object.prototype?At(t[s],e[s],r):iu(t,e,s,n);else if(cr(e[s])){var i;t[s]=Ws(i=e[s]).call(i)}else iu(t,e,s,n);return t}function F0(t,e){return[...t,e]}function q$e(t){return Ws(t).call(t)}function L$e(t){return t.getBoundingClientRect().left}function B$e(t){return t.getBoundingClientRect().top}function nt(t,e){if(cr(t)){const r=t.length;for(let n=0;n<r;n++)e(t[n],n,t)}else for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(t[r],r,t)}function u$(t){let e;switch(t.length){case 3:case 4:return e=D$e.exec(t),e?{r:ms(e[1]+e[1],16),g:ms(e[2]+e[2],16),b:ms(e[3]+e[3],16)}:null;case 6:case 7:return e=A$e.exec(t),e?{r:ms(e[1],16),g:ms(e[2],16),b:ms(e[3],16)}:null;default:return null}}function Wi(t,e){if(ul(t).call(t,"rgba"))return t;if(ul(t).call(t,"rgb")){const r=t.substr(wt(t).call(t,"(")+1).replace(")","").split(",");return"rgba("+r[0]+","+r[1]+","+r[2]+","+e+")"}else{const r=u$(t);return r==null?t:"rgba("+r.r+","+r.g+","+r.b+","+e+")"}}function mce(t,e,r){var n;return"#"+Ws(n=((1<<24)+(t<<16)+(e<<8)+r).toString(16)).call(n,1)}function HR(t,e){if(Td(t)){let n=t;if(yce(n)){var r;const i=yh(r=n.substr(4).substr(0,n.length-5).split(",")).call(r,function(s){return ms(s)});n=mce(i[0],i[1],i[2])}if(gce(n)===!0){const i=z$e(n),s={h:i.h,s:i.s*.8,v:Math.min(1,i.v*1.02)},o={h:i.h,s:Math.min(1,i.s*1.25),v:i.v*.8},a=KR(o.h,o.s,o.v),l=KR(s.h,s.s,s.v);return{background:n,border:a,highlight:{background:l,border:a},hover:{background:l,border:a}}}else return{background:n,border:n,highlight:{background:n,border:n},hover:{background:n,border:n}}}else return{background:t.background||void 0,border:t.border||void 0,highlight:Td(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||void 0,border:t.highlight&&t.highlight.border||void 0},hover:Td(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||void 0,background:t.hover&&t.hover.background||void 0}}}function Hf(t,e,r){t=t/255,e=e/255,r=r/255;const n=Math.min(t,Math.min(e,r)),i=Math.max(t,Math.max(e,r));if(n===i)return{h:0,s:0,v:n};const s=t===n?e-r:r===n?t-e:r-t,a=60*((t===n?3:r===n?1:5)-s/(i-n))/360,l=(i-n)/i;return{h:a,s:l,v:i}}function Qy(t,e,r){let n,i,s;const o=Math.floor(t*6),a=t*6-o,l=r*(1-e),u=r*(1-a*e),d=r*(1-(1-a)*e);switch(o%6){case 0:n=r,i=d,s=l;break;case 1:n=u,i=r,s=l;break;case 2:n=l,i=r,s=d;break;case 3:n=l,i=u,s=r;break;case 4:n=d,i=l,s=r;break;case 5:n=r,i=l,s=u;break}return{r:Math.floor(n*255),g:Math.floor(i*255),b:Math.floor(s*255)}}function KR(t,e,r){const n=Qy(t,e,r);return mce(n.r,n.g,n.b)}function z$e(t){const e=u$(t);if(!e)throw new TypeError("'".concat(t,"' is not a valid color."));return Hf(e.r,e.g,e.b)}function gce(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)}function yce(t){return $$e.test(t)}function W$e(t){return F$e.test(t)}function hl(t){if(t===null||typeof t!="object")return null;if(t instanceof Element)return t;const e=Tc(t);for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&typeof t[r]=="object"&&(e[r]=hl(t[r]));return e}function Fi(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=function(p){return p!=null},s=function(p){return p!==null&&typeof p=="object"},o=function(p){for(const m in p)if(Object.prototype.hasOwnProperty.call(p,m))return!1;return!0};if(!s(t))throw new Error("Parameter mergeTarget must be an object");if(!s(e))throw new Error("Parameter options must be an object");if(!i(r))throw new Error("Parameter option must have a value");if(!s(n))throw new Error("Parameter globalOptions must be an object");const a=function(p,m,g){s(p[g])||(p[g]={});const y=m[g],v=p[g];for(const b in y)Object.prototype.hasOwnProperty.call(y,b)&&(v[b]=y[b])},l=e[r],d=s(n)&&!o(n)?n[r]:void 0,h=d?d.enabled:void 0;if(l===void 0)return;if(typeof l=="boolean"){s(t[r])||(t[r]={}),t[r].enabled=l;return}if(l===null&&!s(t[r]))if(i(d))t[r]=Tc(d);else return;if(!s(l))return;let f=!0;l.enabled!==void 0?f=l.enabled:h!==void 0&&(f=d.enabled),a(t,e,r),t[r].enabled=f}const V$e={linear(t){return t},easeInQuad(t){return t*t},easeOutQuad(t){return t*(2-t)},easeInOutQuad(t){return t<.5?2*t*t:-1+(4-2*t)*t},easeInCubic(t){return t*t*t},easeOutCubic(t){return--t*t*t+1},easeInOutCubic(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart(t){return t*t*t*t},easeOutQuart(t){return 1- --t*t*t*t},easeInOutQuart(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint(t){return t*t*t*t*t},easeOutQuint(t){return 1+--t*t*t*t*t},easeInOutQuint(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}};function _a(t,e){let r;cr(e)||(e=[e]);for(const n of t)if(n){r=n[e[0]];for(let i=1;i<e.length;i++)r&&(r=r[e[i]]);if(typeof r<"u")break}return r}const U$e={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};let H$e=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}setCloseCallback(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}_isColorString(e){if(typeof e=="string")return U$e[e]}setColor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e==="none")return;let n;const i=this._isColorString(e);if(i!==void 0&&(e=i),Td(e)===!0){if(yce(e)===!0){const s=e.substr(4).substr(0,e.length-5).split(",");n={r:s[0],g:s[1],b:s[2],a:1}}else if(W$e(e)===!0){const s=e.substr(5).substr(0,e.length-6).split(",");n={r:s[0],g:s[1],b:s[2],a:s[3]}}else if(gce(e)===!0){const s=u$(e);n={r:s.r,g:s.g,b:s.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){const s=e.a!==void 0?e.a:"1.0";n={r:e.r,g:e.g,b:e.b,a:s}}if(n===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+pg(e));this._setColor(n,r)}show(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0&&(this.previousColor=Er({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",qo(()=>{this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0)},0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)===!0&&(this.initialColor=Er({},e)),this.color=e;const n=Hf(e.r,e.g,e.b),i=2*Math.PI,s=this.r*n.s,o=this.centerCoordinates.x+s*Math.sin(i*n.h),a=this.centerCoordinates.y+s*Math.cos(i*n.h);this.colorPickerSelector.style.left=o-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=a-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}_setOpacity(e){this.color.a=e/100,this._updatePicker(this.color)}_setBrightness(e){const r=Hf(this.color.r,this.color.g,this.color.b);r.v=e/100;const n=Qy(r.h,r.s,r.v);n.a=this.color.a,this.color=n,this._updatePicker()}_updatePicker(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color;const r=Hf(e.r,e.g,e.b),n=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const i=this.colorPickerCanvas.clientWidth,s=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,i,s),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-r.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),mg(n).call(n),this.brightnessRange.value=100*r.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){var e,r,n,i;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){const o=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{const o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);const s=this;this.opacityRange.onchange=function(){s._setOpacity(this.value)},this.opacityRange.oninput=function(){s._setOpacity(this.value)},this.brightnessRange.onchange=function(){s._setBrightness(this.value)},this.brightnessRange.oninput=function(){s._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=de(e=this._hide).call(e,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=de(r=this._apply).call(r,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=de(n=this._save).call(n,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=de(i=this._loadLast).call(i,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new c$(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",e=>{e.isFirst&&this._moveSelector(e)}),this.hammer.on("tap",e=>{this._moveSelector(e)}),this.hammer.on("panstart",e=>{this._moveSelector(e)}),this.hammer.on("panmove",e=>{this._moveSelector(e)}),this.hammer.on("panend",e=>{this._moveSelector(e)})}_generateHueCircle(){if(this.generated===!1){const e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const r=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,r,n);let i,s,o,a;this.centerCoordinates={x:r*.5,y:n*.5},this.r=.49*r;const l=2*Math.PI/360,u=1/360,d=1/this.r;let h;for(o=0;o<360;o++)for(a=0;a<this.r;a++)i=this.centerCoordinates.x+a*Math.sin(l*o),s=this.centerCoordinates.y+a*Math.cos(l*o),h=Qy(o*u,a*d,1),e.fillStyle="rgb("+h.r+","+h.g+","+h.b+")",e.fillRect(i-.5,s-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,r,n)}this.generated=!0}_moveSelector(e){const r=this.colorPickerDiv.getBoundingClientRect(),n=e.center.x-r.left,i=e.center.y-r.top,s=.5*this.colorPickerDiv.clientHeight,o=.5*this.colorPickerDiv.clientWidth,a=n-o,l=i-s,u=Math.atan2(a,l),d=.98*Math.min(Math.sqrt(a*a+l*l),o),h=Math.cos(u)*d+s,f=Math.sin(u)*d+o;this.colorPickerSelector.style.top=h-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=f-.5*this.colorPickerSelector.clientWidth+"px";let p=u/(2*Math.PI);p=p<0?p+1:p;const m=d/this.r,g=Hf(this.color.r,this.color.g,this.color.b);g.h=p,g.s=m;const y=Qy(g.h,g.s,g.v);y.a=this.color.a,this.color=y,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}};function GR(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(e.length<1)throw new TypeError("Invalid arguments.");if(e.length===1)return document.createTextNode(e[0]);{const n=document.createElement(e[0]);return n.appendChild(GR(...Ws(e).call(e,1))),n}}let K$e=class{constructor(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:()=>!1;this.parent=e,this.changedOptions=[],this.container=r,this.allowCreation=!1,this.hideOption=s,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},Er(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new H$e(i),this.wrapper=void 0}setOptions(e){if(e!==void 0){this.popupHistory={},this._removePopup();let r=!0;if(typeof e=="string")this.options.filter=e;else if(cr(e))this.options.filter=e.join();else if(typeof e=="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),ti(e)!==void 0&&(this.options.filter=ti(e)),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(r=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,r=e):typeof e=="function"&&(this.options.filter=e,r=!0);ti(this.options)===!1&&(r=!1),this.options.enabled=r}this._clean()}setModuleOptions(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];const e=ti(this.options);let r=0,n=!1;for(const i in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,i)&&(this.allowCreation=!1,n=!1,typeof e=="function"?(n=e(i,[]),n=n||this._handleObject(this.configureOptions[i],[i],!0)):(e===!0||wt(e).call(e,i)!==-1)&&(n=!0),n!==!1&&(this.allowCreation=!0,r>0&&this._makeItem([]),this._makeHeader(i),this._handleObject(this.configureOptions[i],[i])),r++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(let e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}_clean(){for(let e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(e){let r=this.moduleOptions;for(let n=0;n<e.length;n++)if(r[e[n]]!==void 0)r=r[e[n]];else{r=void 0;break}return r}_makeItem(e){if(this.allowCreation===!0){const s=document.createElement("div");s.className="vis-configuration vis-config-item vis-config-s"+e.length;for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return It(n).call(n,o=>{s.appendChild(o)}),this.domElements.push(s),this.domElements.length}return 0}_makeHeader(e){const r=document.createElement("div");r.className="vis-configuration vis-config-header",r.innerText=e,this._makeItem([],r)}_makeLabel(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=document.createElement("div");if(i.className="vis-configuration vis-config-label vis-config-s"+r.length,n===!0){for(;i.firstChild;)i.removeChild(i.firstChild);i.appendChild(GR("i","b",e))}else i.innerText=e+":";return i}_makeDropdown(e,r,n){const i=document.createElement("select");i.className="vis-configuration vis-config-select";let s=0;r!==void 0&&wt(e).call(e,r)!==-1&&(s=wt(e).call(e,r));for(let l=0;l<e.length;l++){const u=document.createElement("option");u.value=e[l],l===s&&(u.selected="selected"),u.innerText=e[l],i.appendChild(u)}const o=this;i.onchange=function(){o._update(this.value,n)};const a=this._makeLabel(n[n.length-1],n);this._makeItem(n,a,i)}_makeRange(e,r,n){const i=e[0],s=e[1],o=e[2],a=e[3],l=document.createElement("input");l.className="vis-configuration vis-config-range";try{l.type="range",l.min=s,l.max=o}catch{}l.step=a;let u="",d=0;r!==void 0?(r<0&&r*1.2<s?(l.min=Math.ceil(r*1.2),d=l.min,u="range increased"):r/1.2<s&&(l.min=Math.ceil(r/1.2),d=l.min,u="range increased"),r*1.2>o&&o!==1&&(l.max=Math.ceil(r*1.2),d=l.max,u="range increased"),l.value=r):l.value=i;const h=document.createElement("input");h.className="vis-configuration vis-config-rangeinput",h.value=l.value;const f=this;l.onchange=function(){h.value=this.value,f._update(Number(this.value),n)},l.oninput=function(){h.value=this.value};const p=this._makeLabel(n[n.length-1],n),m=this._makeItem(n,p,l,h);u!==""&&this.popupHistory[m]!==d&&(this.popupHistory[m]=d,this._setupPopup(u,m))}_makeButton(){if(this.options.showButton===!0){const e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerText="generate options",e.onclick=()=>{this._printOptions()},e.onmouseover=()=>{e.className="vis-configuration vis-config-button hover"},e.onmouseout=()=>{e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}_setupPopup(e,r){if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){const n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerText=e,n.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:r}}}_removePopup(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(this.popupDiv.html!==void 0){const r=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=r.left+"px",this.popupDiv.html.style.top=r.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=qo(()=>{this.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=qo(()=>{this._removePopup()},1800)}}_makeCheckbox(e,r,n){const i=document.createElement("input");i.type="checkbox",i.className="vis-configuration vis-config-checkbox",i.checked=e,r!==void 0&&(i.checked=r,r!==e&&(typeof e=="object"?r!==e.enabled&&this.changedOptions.push({path:n,value:r}):this.changedOptions.push({path:n,value:r})));const s=this;i.onchange=function(){s._update(this.checked,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}_makeTextInput(e,r,n){const i=document.createElement("input");i.type="text",i.className="vis-configuration vis-config-text",i.value=r,r!==e&&this.changedOptions.push({path:n,value:r});const s=this;i.onchange=function(){s._update(this.value,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}_makeColorField(e,r,n){const i=e[1],s=document.createElement("div");r=r===void 0?i:r,r!=="none"?(s.className="vis-configuration vis-config-colorBlock",s.style.backgroundColor=r):s.className="vis-configuration vis-config-colorBlock none",r=r===void 0?i:r,s.onclick=()=>{this._showColorPicker(r,s,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,s)}_showColorPicker(e,r,n){r.onclick=function(){},this.colorPicker.insertTo(r),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(i=>{const s="rgba("+i.r+","+i.g+","+i.b+","+i.a+")";r.style.backgroundColor=s,this._update(s,n)}),this.colorPicker.setCloseCallback(()=>{r.onclick=()=>{this._showColorPicker(e,r,n)}})}_handleObject(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=!1;const s=ti(this.options);let o=!1;for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)){i=!0;const l=e[a],u=F0(r,a);if(typeof s=="function"&&(i=s(a,r),i===!1&&!cr(l)&&typeof l!="string"&&typeof l!="boolean"&&l instanceof Object&&(this.allowCreation=!1,i=this._handleObject(l,u,!0),this.allowCreation=n===!1)),i!==!1){o=!0;const d=this._getValue(u);if(cr(l))this._handleArray(l,d,u);else if(typeof l=="string")this._makeTextInput(l,d,u);else if(typeof l=="boolean")this._makeCheckbox(l,d,u);else if(l instanceof Object){if(!this.hideOption(r,a,this.moduleOptions))if(l.enabled!==void 0){const h=F0(u,"enabled"),f=this._getValue(h);if(f===!0){const p=this._makeLabel(a,u,!0);this._makeItem(u,p),o=this._handleObject(l,u)||o}else this._makeCheckbox(l,f,u)}else{const h=this._makeLabel(a,u,!0);this._makeItem(u,h),o=this._handleObject(l,u)||o}}else console.error("dont know how to handle",l,a,u)}}return o}_handleArray(e,r,n){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,r,n),e[1]!==r&&this.changedOptions.push({path:n,value:r})):typeof e[0]=="string"?(this._makeDropdown(e,r,n),e[0]!==r&&this.changedOptions.push({path:n,value:r})):typeof e[0]=="number"&&(this._makeRange(e,r,n),e[0]!==r&&this.changedOptions.push({path:n,value:Number(r)}))}_update(e,r){const n=this._constructOptions(e,r);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",n),this.initialized=!0,this.parent.setOptions(n)}_constructOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n;e=e==="true"?!0:e,e=e==="false"?!1:e;for(let s=0;s<r.length;s++)r[s]!=="global"&&(i[r[s]]===void 0&&(i[r[s]]={}),s!==r.length-1?i=i[r[s]]:i[r[s]]=e);return n}_printOptions(){const e=this.getOptions();for(;this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(GR("pre","const options = "+pg(e,null,2)))}getOptions(){const e={};for(let r=0;r<this.changedOptions.length;r++)this._constructOptions(this.changedOptions[r].value,this.changedOptions[r].path,e);return e}},G$e=class{constructor(e,r){this.container=e,this.overflowMethod=r||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(e,r){this.x=ms(e),this.y=ms(r)}setText(e){if(e instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(e)}else this.frame.innerText=e}show(e){if(e===void 0&&(e=!0),e===!0){const r=this.frame.clientHeight,n=this.frame.clientWidth,i=this.frame.parentNode.clientHeight,s=this.frame.parentNode.clientWidth;let o=0,a=0;if(this.overflowMethod=="flip"){let l=!1,u=!0;this.y-r<this.padding&&(u=!1),this.x+n>s-this.padding&&(l=!0),l?o=this.x-n:o=this.x,u?a=this.y-r:a=this.y}else a=this.y-r,a+r+this.padding>i&&(a=i-r-this.padding),a<this.padding&&(a=this.padding),o=this.x,o+n+this.padding>s&&(o=s-n-this.padding),o<this.padding&&(o=this.padding);this.frame.style.left=o+"px",this.frame.style.top=a+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}},Mf=!1,dY;const YR="background: #FFeeee; color: #dd0000";let Y$e=class rr{static validate(e,r,n){Mf=!1,dY=r;let i=r;return n!==void 0&&(i=r[n]),rr.parse(e,i,[]),Mf}static parse(e,r,n){for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&rr.check(i,e,r,n)}static check(e,r,n,i){if(n[e]===void 0&&n.__any__===void 0){rr.getSuggestion(e,n,i);return}let s=e,o=!0;n[e]===void 0&&n.__any__!==void 0&&(s="__any__",o=rr.getType(r[e])==="object");let a=n[s];o&&a.__type__!==void 0&&(a=a.__type__),rr.checkFields(e,r,n,s,a,i)}static checkFields(e,r,n,i,s,o){const a=function(d){console.error("%c"+d+rr.printLocation(o,e),YR)},l=rr.getType(r[e]),u=s[l];u!==void 0?rr.getType(u)==="array"&&wt(u).call(u,r[e])===-1?(a('Invalid option detected in "'+e+'". Allowed values are:'+rr.print(u)+' not "'+r[e]+'". '),Mf=!0):l==="object"&&i!=="__any__"&&(o=F0(o,e),rr.parse(r[e],n[i],o)):s.any===void 0&&(a('Invalid type received for "'+e+'". Expected: '+rr.print(sr(s))+". Received ["+l+'] "'+r[e]+'"'),Mf=!0)}static getType(e){const r=typeof e;return r==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":cr(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":r==="number"?"number":r==="boolean"?"boolean":r==="string"?"string":r===void 0?"undefined":r}static getSuggestion(e,r,n){const i=rr.findInOptions(e,r,n,!1),s=rr.findInOptions(e,dY,[],!0),o=8,a=4;let l;i.indexMatch!==void 0?l=" in "+rr.printLocation(i.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+i.indexMatch+`"?

`:s.distance<=a&&i.distance>s.distance?l=" in "+rr.printLocation(i.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+rr.printLocation(s.path,s.closestMatch,""):i.distance<=o?l='. Did you mean "'+i.closestMatch+'"?'+rr.printLocation(i.path,e):l=". Did you mean one of these: "+rr.print(sr(r))+rr.printLocation(n,e),console.error('%cUnknown option detected: "'+e+'"'+l,YR),Mf=!0}static findInOptions(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=1e9,o="",a=[];const l=e.toLowerCase();let u;for(const h in r){let f;if(r[h].__type__!==void 0&&i===!0){const p=rr.findInOptions(e,r[h],F0(n,h));s>p.distance&&(o=p.closestMatch,a=p.path,s=p.distance,u=p.indexMatch)}else{var d;wt(d=h.toLowerCase()).call(d,l)!==-1&&(u=h),f=rr.levenshteinDistance(e,h),s>f&&(o=h,a=q$e(n),s=f)}}return{closestMatch:o,path:a,distance:s,indexMatch:u}}static printLocation(e,r){let i=`

`+(arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`)+`options = {
`;for(let s=0;s<e.length;s++){for(let o=0;o<s+1;o++)i+="  ";i+=e[s]+`: {
`}for(let s=0;s<e.length+1;s++)i+="  ";i+=r+`
`;for(let s=0;s<e.length+1;s++){for(let o=0;o<e.length-s;o++)i+="  ";i+=`}
`}return i+`

`}static print(e){return pg(e).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}static levenshteinDistance(e,r){if(e.length===0)return r.length;if(r.length===0)return e.length;const n=[];let i;for(i=0;i<=r.length;i++)n[i]=[i];let s;for(s=0;s<=e.length;s++)n[0][s]=s;for(i=1;i<=r.length;i++)for(s=1;s<=e.length;s++)r.charAt(i-1)==e.charAt(s-1)?n[i][s]=n[i-1][s-1]:n[i][s]=Math.min(n[i-1][s-1]+1,Math.min(n[i][s-1]+1,n[i-1][s]+1));return n[r.length][e.length]}};const Q$e=Hs,X$e=K$e,Od=c$,J$e=G$e,vce=YR,Z$e=Y$e;function e4e(t){return Ha=t,i4e()}var bce={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},d$=Tc(bce);d$.color="color.color";d$.style="dashes";var Pn={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},hY={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},Ha="",wh=0,Je="",De="",Jn=Pn.NULL;function t4e(){wh=0,Je=Ha.charAt(0)}function Lr(){wh++,Je=Ha.charAt(wh)}function Vu(){return Ha.charAt(wh+1)}function fY(t){var e=t.charCodeAt(0);return e<47?e===35||e===46:e<59?e>47:e<91?e>64:e<96?e===95:e<123?e>96:!1}function wl(t,e){if(t||(t={}),e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function r4e(t,e,r){for(var n=e.split("."),i=t;n.length;){var s=n.shift();n.length?(i[s]||(i[s]={}),i=i[s]):i[s]=r}}function xce(t,e){for(var r,n,i=null,s=[t],o=t;o.parent;)s.push(o.parent),o=o.parent;if(o.nodes){for(r=0,n=o.nodes.length;r<n;r++)if(e.id===o.nodes[r].id){i=o.nodes[r];break}}for(i||(i={id:e.id},t.node&&(i.attr=wl(i.attr,t.node))),r=s.length-1;r>=0;r--){var a,l=s[r];l.nodes||(l.nodes=[]),wt(a=l.nodes).call(a,i)===-1&&l.nodes.push(i)}e.attr&&(i.attr=wl(i.attr,e.attr))}function n4e(t,e){if(t.edges||(t.edges=[]),t.edges.push(e),t.edge){var r=wl({},t.edge);e.attr=wl(r,e.attr)}}function wce(t,e,r,n,i){var s={from:e,to:r,type:n};return t.edge&&(s.attr=wl({},t.edge)),s.attr=wl(s.attr||{},i),i!=null&&i.hasOwnProperty("arrows")&&i.arrows!=null&&(s.arrows={to:{enabled:!0,type:i.arrows.type}},i.arrows=null),s}function $t(){for(Jn=Pn.NULL,De="";Je===" "||Je==="	"||Je===`
`||Je==="\r";)Lr();do{var t=!1;if(Je==="#"){for(var e=wh-1;Ha.charAt(e)===" "||Ha.charAt(e)==="	";)e--;if(Ha.charAt(e)===`
`||Ha.charAt(e)===""){for(;Je!=""&&Je!=`
`;)Lr();t=!0}}if(Je==="/"&&Vu()==="/"){for(;Je!=""&&Je!=`
`;)Lr();t=!0}if(Je==="/"&&Vu()==="*"){for(;Je!="";)if(Je==="*"&&Vu()==="/"){Lr(),Lr();break}else Lr();t=!0}for(;Je===" "||Je==="	"||Je===`
`||Je==="\r";)Lr()}while(t);if(Je===""){Jn=Pn.DELIMITER;return}var r=Je+Vu();if(hY[r]){Jn=Pn.DELIMITER,De=r,Lr(),Lr();return}if(hY[Je]){Jn=Pn.DELIMITER,De=Je,Lr();return}if(fY(Je)||Je==="-"){for(De+=Je,Lr();fY(Je);)De+=Je,Lr();De==="false"?De=!1:De==="true"?De=!0:isNaN(Number(De))||(De=Number(De)),Jn=Pn.IDENTIFIER;return}if(Je==='"'){for(Lr();Je!=""&&(Je!='"'||Je==='"'&&Vu()==='"');)Je==='"'?(De+=Je,Lr()):Je==="\\"&&Vu()==="n"?(De+=`
`,Lr()):De+=Je,Lr();if(Je!='"')throw In('End of string " expected');Lr(),Jn=Pn.IDENTIFIER;return}for(Jn=Pn.UNKNOWN;Je!="";)De+=Je,Lr();throw new SyntaxError('Syntax error in part "'+Nce(De,30)+'"')}function i4e(){var t={};if(t4e(),$t(),De==="strict"&&(t.strict=!0,$t()),(De==="graph"||De==="digraph")&&(t.type=De,$t()),Jn===Pn.IDENTIFIER&&(t.id=De,$t()),De!="{")throw In("Angle bracket { expected");if($t(),Sce(t),De!="}")throw In("Angle bracket } expected");if($t(),De!=="")throw In("End of file expected");return $t(),delete t.node,delete t.edge,delete t.graph,t}function Sce(t){for(;De!==""&&De!="}";)s4e(t),De===";"&&$t()}function s4e(t){var e=Ece(t);if(e){_ce(t,e);return}var r=o4e(t);if(!r){if(Jn!=Pn.IDENTIFIER)throw In("Identifier expected");var n=De;if($t(),De==="="){if($t(),Jn!=Pn.IDENTIFIER)throw In("Identifier expected");t[n]=De,$t()}else a4e(t,n)}}function Ece(t){var e=null;if(De==="subgraph"&&(e={},e.type="subgraph",$t(),Jn===Pn.IDENTIFIER&&(e.id=De,$t())),De==="{"){if($t(),e||(e={}),e.parent=t,e.node=t.node,e.edge=t.edge,e.graph=t.graph,Sce(e),De!="}")throw In("Angle bracket } expected");$t(),delete e.node,delete e.edge,delete e.graph,delete e.parent,t.subgraphs||(t.subgraphs=[]),t.subgraphs.push(e)}return e}function o4e(t){return De==="node"?($t(),t.node=bp(),"node"):De==="edge"?($t(),t.edge=bp(),"edge"):De==="graph"?($t(),t.graph=bp(),"graph"):null}function a4e(t,e){var r={id:e},n=bp();n&&(r.attr=n),xce(t,r),_ce(t,e)}function _ce(t,e){for(;De==="->"||De==="--";){var r,n=De;$t();var i=Ece(t);if(i)r=i;else{if(Jn!=Pn.IDENTIFIER)throw In("Identifier or subgraph expected");r=De,xce(t,{id:r}),$t()}var s=bp(),o=wce(t,e,r,n,s);n4e(t,o),e=r}}function bp(){for(var t,e=null,r={dashed:!0,solid:!1,dotted:[1,5]},n={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},i=new Array,s=new Array;De==="[";){for($t(),e={};De!==""&&De!="]";){if(Jn!=Pn.IDENTIFIER)throw In("Attribute name expected");var o=De;if($t(),De!="=")throw In("Equal sign = expected");if($t(),Jn!=Pn.IDENTIFIER)throw In("Attribute value expected");var a=De;o==="style"&&(a=r[a]);var l;o==="arrowhead"&&(l=n[a],o="arrows",a={to:{enabled:!0,type:l}}),o==="arrowtail"&&(l=n[a],o="arrows",a={from:{enabled:!0,type:l}}),i.push({attr:e,name:o,value:a}),s.push(o),$t(),De==","&&$t()}if(De!="]")throw In("Bracket ] expected");$t()}if(ul(s).call(s,"dir")){var u={};for(u.arrows={},t=0;t<i.length;t++)if(i[t].name==="arrows")if(i[t].value.to!=null)u.arrows.to=t;else if(i[t].value.from!=null)u.arrows.from=t;else throw In("Invalid value of arrows");else i[t].name==="dir"&&(u.dir=t);var d=i[u.dir].value;if(!ul(s).call(s,"arrows"))if(d==="both")i.push({attr:i[u.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),u.arrows.to=i.length-1,i.push({attr:i[u.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),u.arrows.from=i.length-1;else if(d==="forward")i.push({attr:i[u.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),u.arrows.to=i.length-1;else if(d==="back")i.push({attr:i[u.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),u.arrows.from=i.length-1;else if(d==="none")i.push({attr:i[u.dir].attr,name:"arrows",value:""}),u.arrows.to=i.length-1;else throw In('Invalid dir type "'+d+'"');var h,f;if(d==="both")u.arrows.to&&u.arrows.from?(f=i[u.arrows.to].value.to.type,h=i[u.arrows.from].value.from.type,i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}},Fo(i).call(i,u.arrows.from,1)):u.arrows.to?(f=i[u.arrows.to].value.to.type,h="arrow",i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):u.arrows.from&&(f="arrow",h=i[u.arrows.from].value.from.type,i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}});else if(d==="back")u.arrows.to&&u.arrows.from?(f="",h=i[u.arrows.from].value.from.type,i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):u.arrows.to?(f="",h="arrow",u.arrows.from=u.arrows.to,i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):u.arrows.from&&(f="",h=i[u.arrows.from].value.from.type,i[u.arrows.to]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}),i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{from:{enabled:!0,type:i[u.arrows.from].value.from.type}}};else if(d==="none"){var p;u.arrows.to?p=u.arrows.to:p=u.arrows.from,i[p]={attr:i[p].attr,name:i[p].name,value:""}}else if(d==="forward")u.arrows.to&&u.arrows.from?(f=i[u.arrows.to].value.to.type,h="",i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):u.arrows.to?(f=i[u.arrows.to].value.to.type,h="",i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):u.arrows.from&&(f="arrow",h="",u.arrows.to=u.arrows.from,i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}),i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:i[u.arrows.to].value.to.type}}};else throw In('Invalid dir type "'+d+'"');Fo(i).call(i,u.dir,1)}var m;if(ul(s).call(s,"penwidth")){var g=[];for(m=i.length,t=0;t<m;t++)i[t].name!=="width"&&(i[t].name==="penwidth"&&(i[t].name="width"),g.push(i[t]));i=g}for(m=i.length,t=0;t<m;t++)r4e(i[t].attr,i[t].name,i[t].value);return e}function In(t){return new SyntaxError(t+', got "'+Nce(De,30)+'" (char '+wh+")")}function Nce(t,e){return t.length<=e?t:t.substr(0,27)+"..."}function l4e(t,e,r){cr(t)?It(t).call(t,function(n){cr(e)?It(e).call(e,function(i){r(n,i)}):r(n,e)}):cr(e)?It(e).call(e,function(n){r(t,n)}):r(t,e)}function rT(t,e,r){for(var n=e.split("."),i=n.pop(),s=t,o=0;o<n.length;o++){var a=n[o];a in s||(s[a]={}),s=s[a]}return s[i]=r,t}function pY(t,e){var r={};for(var n in t)if(t.hasOwnProperty(n)){var i=e[n];cr(i)?It(i).call(i,function(s){rT(r,s,t[n])}):typeof i=="string"?rT(r,i,t[n]):rT(r,n,t[n])}return r}function c4e(t){var e=e4e(t),r={nodes:[],edges:[],options:{}};if(e.nodes){var n;It(n=e.nodes).call(n,function(o){var a={id:o.id,label:String(o.label||o.id)};wl(a,pY(o.attr,bce)),a.image&&(a.shape="image"),r.nodes.push(a)})}if(e.edges){var i,s=function(o){var a={from:o.from,to:o.to};return wl(a,pY(o.attr,d$)),a.arrows==null&&o.type==="->"&&(a.arrows="to"),a};It(i=e.edges).call(i,function(o){var a,l;if(o.from instanceof Object?a=o.from.nodes:a={id:o.from},o.to instanceof Object?l=o.to.nodes:l={id:o.to},o.from instanceof Object&&o.from.edges){var u;It(u=o.from.edges).call(u,function(h){var f=s(h);r.edges.push(f)})}if(l4e(a,l,function(h,f){var p=wce(r,h.id,f.id,o.type,o.attr),m=s(p);r.edges.push(m)}),o.to instanceof Object&&o.to.edges){var d;It(d=o.to.edges).call(d,function(h){var f=s(h);r.edges.push(f)})}})}return e.attr&&(r.options=e.attr),r}function u4e(t,e){var r;const n={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};e!=null&&(e.fixed!=null&&(n.nodes.fixed=e.fixed),e.parseColor!=null&&(n.nodes.parseColor=e.parseColor),e.inheritColor!=null&&(n.edges.inheritColor=e.inheritColor));const i=t.edges,s=yh(i).call(i,a=>{const l={from:a.source,id:a.id,to:a.target};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.type==="Directed"&&(l.arrows="to"),a.color&&n.edges.inheritColor===!1&&(l.color=a.color),l});return{nodes:yh(r=t.nodes).call(r,a=>{const l={id:a.id,fixed:n.nodes.fixed&&a.x!=null&&a.y!=null};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.size!=null&&(l.size=a.size),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.title!=null&&(l.title=a.title),a.x!=null&&(l.x=a.x),a.y!=null&&(l.y=a.y),a.color!=null&&(n.nodes.parseColor===!0?l.color=a.color:l.color={background:a.color,border:a.color,highlight:{background:a.color,border:a.color},hover:{background:a.color,border:a.color}}),l}),edges:s}}const d4e={addDescription:"Click in an empty space to place a new node.",addEdge:"Add Edge",addNode:"Add Node",back:"Back",close:"Close",createEdgeError:"Cannot link edges to a cluster.",del:"Delete selected",deleteClusterError:"Clusters cannot be deleted.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",edit:"Edit",editClusterError:"Clusters cannot be edited.",editEdge:"Edit Edge",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",editNode:"Edit Node"},h4e={addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",addEdge:"Kante hinzufgen",addNode:"Knoten hinzufgen",back:"Zurck",close:"Schlieen",createEdgeError:"Es ist nicht mglich, Kanten mit Clustern zu verbinden.",del:"Lsche Auswahl",deleteClusterError:"Cluster knnen nicht gelscht werden.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",edit:"Editieren",editClusterError:"Cluster knnen nicht editiert werden.",editEdge:"Kante editieren",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",editNode:"Knoten editieren"},f4e={addDescription:"Haga clic en un lugar vaco para colocar un nuevo nodo.",addEdge:"Aadir arista",addNode:"Aadir nodo",back:"Atrs",close:"Cerrar",createEdgeError:"No se puede conectar una arista a un grupo.",del:"Eliminar seleccin",deleteClusterError:"No es posible eliminar grupos.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",edit:"Editar",editClusterError:"No es posible editar grupos.",editEdge:"Editar arista",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",editNode:"Editar nodo"},p4e={addDescription:"Clicca per aggiungere un nuovo nodo",addEdge:"Aggiungi un vertice",addNode:"Aggiungi un nodo",back:"Indietro",close:"Chiudere",createEdgeError:"Non si possono collegare vertici ad un cluster",del:"Cancella la selezione",deleteClusterError:"I cluster non possono essere cancellati",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",edit:"Modifica",editClusterError:"I clusters non possono essere modificati.",editEdge:"Modifica il vertice",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",editNode:"Modifica il nodo"},m4e={addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",addEdge:"Link toevoegen",addNode:"Node toevoegen",back:"Terug",close:"Sluiten",createEdgeError:"Kan geen link maken naar een cluster.",del:"Selectie verwijderen",deleteClusterError:"Clusters kunnen niet worden verwijderd.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",edit:"Wijzigen",editClusterError:"Clusters kunnen niet worden aangepast.",editEdge:"Link wijzigen",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",editNode:"Node wijzigen"},g4e={addDescription:"Clique em um espao em branco para adicionar um novo n",addEdge:"Adicionar aresta",addNode:"Adicionar n",back:"Voltar",close:"Fechar",createEdgeError:"No foi possvel linkar arestas a um cluster.",del:"Remover selecionado",deleteClusterError:"Clusters no puderam ser removidos.",edgeDescription:"Clique em um n e arraste a aresta at outro n para conect-los",edit:"Editar",editClusterError:"Clusters no puderam ser editados.",editEdge:"Editar aresta",editEdgeDescription:"Clique nos pontos de controle e os arraste para um n para conect-los",editNode:"Editar n"},y4e={addDescription:"   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"    .",del:" ",deleteClusterError:"    ",edgeDescription:"        ,   .",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},v4e={addDescription:"",addEdge:"",addNode:"",back:"",close:"",createEdgeError:"",del:"",deleteClusterError:"",edgeDescription:"",edit:"",editClusterError:"",editEdge:"",editEdgeDescription:"",editNode:""},b4e={addDescription:"K   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"  '   .",del:" ",deleteClusterError:"    .",edgeDescription:"        ,   '.",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},x4e={addDescription:"Cliquez dans un endroit vide pour placer un nud.",addEdge:"Ajouter un lien",addNode:"Ajouter un nud",back:"Retour",close:"Fermer",createEdgeError:"Impossible de crer un lien vers un cluster.",del:"Effacer la slection",deleteClusterError:"Les clusters ne peuvent pas tre effacs.",edgeDescription:"Cliquez sur un nud et glissez le lien vers un autre nud pour les connecter.",edit:"diter",editClusterError:"Les clusters ne peuvent pas tre dits.",editEdge:"diter le lien",editEdgeDescription:"Cliquez sur les points de contrle et glissez-les pour connecter un nud.",editNode:"diter le nud"},w4e={addDescription:"Kluknutm do przdnho prostoru mete pidat nov vrchol.",addEdge:"Pidat hranu",addNode:"Pidat vrchol",back:"Zpt",close:"Zavt",createEdgeError:"Nelze pipojit hranu ke shluku.",del:"Smazat vbr",deleteClusterError:"Nelze mazat shluky.",edgeDescription:"Petaenm z jednoho vrcholu do druhho mete spojit tyto vrcholy novou hranou.",edit:"Upravit",editClusterError:"Nelze upravovat shluky.",editEdge:"Upravit hranu",editEdgeDescription:"Petaenm kontrolnho vrcholu hrany ji mete pipojit k jinmu vrcholu.",editNode:"Upravit vrchol"};var S4e=Object.freeze({__proto__:null,cn:v4e,cs:w4e,de:h4e,en:d4e,es:f4e,fr:x4e,it:p4e,nl:m4e,pt:g4e,ru:y4e,uk:b4e});function E4e(t,e){try{const[n,i]=e.split(/[-_ /]/,2),s=n!=null?n.toLowerCase():null,o=i!=null?i.toUpperCase():null;if(s&&o){const a=s+"-"+o;if(Object.prototype.hasOwnProperty.call(t,a))return a;var r;console.warn(KAe(r="Unknown variant ".concat(o," of language ")).call(r,s,"."))}if(s){const a=s;if(Object.prototype.hasOwnProperty.call(t,a))return a;console.warn("Unknown language ".concat(s))}return console.warn("Unknown locale ".concat(e,", falling back to English.")),"en"}catch(n){return console.error(n),console.warn("Unexpected error while normalizing locale ".concat(e,", falling back to English.")),"en"}}class _4e{constructor(){this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}init(){if(this.initialized())return;this.src=this.image.src;const e=this.image.width,r=this.image.height;this.width=e,this.height=r;const n=Math.floor(r/2),i=Math.floor(r/4),s=Math.floor(r/8),o=Math.floor(r/16),a=Math.floor(e/2),l=Math.floor(e/4),u=Math.floor(e/8),d=Math.floor(e/16);this.canvas.width=3*l,this.canvas.height=n,this.coordinates=[[0,0,a,n],[a,0,l,i],[a,i,u,s],[5*u,i,d,o]],this._fillMipMap()}initialized(){return this.coordinates!==void 0}_fillMipMap(){const e=this.canvas.getContext("2d"),r=this.coordinates[0];e.drawImage(this.image,r[0],r[1],r[2],r[3]);for(let n=1;n<this.NUM_ITERATIONS;n++){const i=this.coordinates[n-1],s=this.coordinates[n];e.drawImage(this.canvas,i[0],i[1],i[2],i[3],s[0],s[1],s[2],s[3])}}drawImageAtPosition(e,r,n,i,s,o){if(this.initialized())if(r>2){r*=.5;let a=0;for(;r>2&&a<this.NUM_ITERATIONS;)r*=.5,a+=1;a>=this.NUM_ITERATIONS&&(a=this.NUM_ITERATIONS-1);const l=this.coordinates[a];e.drawImage(this.canvas,l[0],l[1],l[2],l[3],n,i,s,o)}else e.drawImage(this.image,n,i,s,o)}}class N4e{constructor(e){this.images={},this.imageBroken={},this.callback=e}_tryloadBrokenUrl(e,r,n){if(!(e===void 0||n===void 0)){if(r===void 0){console.warn("No broken url image defined");return}n.image.onerror=()=>{console.error("Could not load brokenImage:",r)},n.image.src=r}}_redrawWithImage(e){this.callback&&this.callback(e)}load(e,r){const n=this.images[e];if(n)return n;const i=new _4e;return this.images[e]=i,i.image.onload=()=>{this._fixImageCoordinates(i.image),i.init(),this._redrawWithImage(i)},i.image.onerror=()=>{console.error("Could not load image:",e),this._tryloadBrokenUrl(e,r,i)},i.image.src=e,i}_fixImageCoordinates(e){e.width===0&&(document.body.appendChild(e),e.width=e.offsetWidth,e.height=e.offsetHeight,document.body.removeChild(e))}}var mY={},gY={},nT={exports:{}},iT,yY;function C4e(){if(yY)return iT;yY=1;var t=ct();return iT=t(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),iT}var sT,vY;function k4e(){if(vY)return sT;vY=1;var t=ct(),e=Zr(),r=ro(),n=C4e(),i=Object.isExtensible,s=t(function(){});return sT=s||n?function(a){return!e(a)||n&&r(a)==="ArrayBuffer"?!1:i?i(a):!0}:i,sT}var oT,bY;function Cce(){if(bY)return oT;bY=1;var t=ct();return oT=!t(function(){return Object.isExtensible(Object.preventExtensions({}))}),oT}var xY;function m1(){if(xY)return nT.exports;xY=1;var t=Pe(),e=dt(),r=cg(),n=Zr(),i=fn(),s=rs().f,o=c1(),a=QD(),l=k4e(),u=r1(),d=Cce(),h=!1,f=u("meta"),p=0,m=function(x){s(x,f,{value:{objectID:"O"+p++,weakData:{}}})},g=function(x,S){if(!n(x))return typeof x=="symbol"?x:(typeof x=="string"?"S":"P")+x;if(!i(x,f)){if(!l(x))return"F";if(!S)return"E";m(x)}return x[f].objectID},y=function(x,S){if(!i(x,f)){if(!l(x))return!0;if(!S)return!1;m(x)}return x[f].weakData},v=function(x){return d&&h&&l(x)&&!i(x,f)&&m(x),x},b=function(){w.enable=function(){},h=!0;var x=o.f,S=e([].splice),E={};E[f]=1,x(E).length&&(o.f=function(N){for(var _=x(N),k=0,j=_.length;k<j;k++)if(_[k]===f){S(_,k,1);break}return _},t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:a.f}))},w=nT.exports={enable:b,fastKey:g,getWeakData:y,onFreeze:v};return r[f]=!0,nT.exports}var aT,wY;function j4e(){if(wY)return aT;wY=1;var t=Or(),e=rf(),r=t("iterator"),n=Array.prototype;return aT=function(i){return i!==void 0&&(e.Array===i||n[r]===i)},aT}var lT,SY;function kce(){if(SY)return lT;SY=1;var t=tf(),e=BD(),r=Hh(),n=rf(),i=Or(),s=i("iterator");return lT=function(o){if(!r(o))return e(o,s)||e(o,"@@iterator")||n[t(o)]},lT}var cT,EY;function T4e(){if(EY)return cT;EY=1;var t=pi(),e=oa(),r=no(),n=Yh(),i=kce(),s=TypeError;return cT=function(o,a){var l=arguments.length<2?i(o):a;if(e(l))return r(t(l,o));throw new s(n(o)+" is not iterable")},cT}var uT,_Y;function h$(){if(_Y)return uT;_Y=1;var t=pi(),e=no(),r=BD();return uT=function(n,i,s){var o,a;e(n);try{if(o=r(n,"return"),!o){if(i==="throw")throw s;return s}o=t(o,n)}catch(l){a=!0,o=l}if(i==="throw")throw s;if(a)throw o;return e(o),s},uT}var dT,NY;function g1(){if(NY)return dT;NY=1;var t=i1(),e=pi(),r=no(),n=Yh(),i=j4e(),s=aa(),o=Tr(),a=T4e(),l=kce(),u=h$(),d=TypeError,h=function(p,m){this.stopped=p,this.result=m},f=h.prototype;return dT=function(p,m,g){var y=g&&g.that,v=!!(g&&g.AS_ENTRIES),b=!!(g&&g.IS_RECORD),w=!!(g&&g.IS_ITERATOR),x=!!(g&&g.INTERRUPTED),S=t(m,y),E,N,_,k,j,T,P,O=function(F){return E&&u(E,"normal"),new h(!0,F)},D=function(F){return v?(r(F),x?S(F[0],F[1],O):S(F[0],F[1])):x?S(F,O):S(F)};if(b)E=p.iterator;else if(w)E=p;else{if(N=l(p),!N)throw new d(n(p)+" is not iterable");if(i(N)){for(_=0,k=s(p);k>_;_++)if(j=D(p[_]),j&&o(f,j))return j;return new h(!1)}E=a(p,N)}for(T=b?p.next:E.next;!(P=e(T,E)).done;){try{j=D(P.value)}catch(F){u(E,"throw",F)}if(typeof j=="object"&&j&&o(f,j))return j}return new h(!1)},dT}var hT,CY;function f$(){if(CY)return hT;CY=1;var t=Tr(),e=TypeError;return hT=function(r,n){if(t(n,r))return r;throw new e("Incorrect invocation")},hT}var fT,kY;function p$(){if(kY)return fT;kY=1;var t=Pe(),e=Ut(),r=m1(),n=ct(),i=Jh(),s=g1(),o=f$(),a=Jr(),l=Zr(),u=Hh(),d=Su(),h=rs().f,f=Al().forEach,p=gr(),m=Eu(),g=m.set,y=m.getterFor;return fT=function(v,b,w){var x=v.indexOf("Map")!==-1,S=v.indexOf("Weak")!==-1,E=x?"set":"add",N=e[v],_=N&&N.prototype,k={},j;if(!p||!a(N)||!(S||_.forEach&&!n(function(){new N().entries().next()})))j=w.getConstructor(b,v,x,E),r.enable();else{j=b(function(O,D){g(o(O,T),{type:v,collection:new N}),u(D)||s(D,O[E],{that:O,AS_ENTRIES:x})});var T=j.prototype,P=y(v);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(O){var D=O==="add"||O==="set";O in _&&!(S&&O==="clear")&&i(T,O,function(F,$){var q=P(this).collection;if(!D&&S&&!l(F))return O==="get"?void 0:!1;var M=q[O](F===0?0:F,$);return D?this:M})}),S||h(T,"size",{configurable:!0,get:function(){return P(this).collection.size}})}return d(j,v,!1,!0),k[v]=j,t({global:!0,forced:!0},k),S||w.setStrong(j,v,x),j},fT}var pT,jY;function m$(){if(jY)return pT;jY=1;var t=fg();return pT=function(e,r,n){for(var i in r)n&&n.unsafe&&e[i]?e[i]=r[i]:t(e,i,r[i],n);return e},pT}var mT,TY;function O4e(){if(TY)return mT;TY=1;var t=Ti(),e=XD(),r=Or(),n=gr(),i=r("species");return mT=function(s){var o=t(s);n&&o&&!o[i]&&e(o,i,{configurable:!0,get:function(){return this}})},mT}var gT,OY;function jce(){if(OY)return gT;OY=1;var t=hg(),e=XD(),r=m$(),n=i1(),i=f$(),s=Hh(),o=g1(),a=ZD(),l=e$(),u=O4e(),d=gr(),h=m1().fastKey,f=Eu(),p=f.set,m=f.getterFor;return gT={getConstructor:function(g,y,v,b){var w=g(function(_,k){i(_,x),p(_,{type:y,index:t(null),first:null,last:null,size:0}),d||(_.size=0),s(k)||o(k,_[b],{that:_,AS_ENTRIES:v})}),x=w.prototype,S=m(y),E=function(_,k,j){var T=S(_),P=N(_,k),O,D;return P?P.value=j:(T.last=P={index:D=h(k,!0),key:k,value:j,previous:O=T.last,next:null,removed:!1},T.first||(T.first=P),O&&(O.next=P),d?T.size++:_.size++,D!=="F"&&(T.index[D]=P)),_},N=function(_,k){var j=S(_),T=h(k),P;if(T!=="F")return j.index[T];for(P=j.first;P;P=P.next)if(P.key===k)return P};return r(x,{clear:function(){for(var k=this,j=S(k),T=j.first;T;)T.removed=!0,T.previous&&(T.previous=T.previous.next=null),T=T.next;j.first=j.last=null,j.index=t(null),d?j.size=0:k.size=0},delete:function(_){var k=this,j=S(k),T=N(k,_);if(T){var P=T.next,O=T.previous;delete j.index[T.index],T.removed=!0,O&&(O.next=P),P&&(P.previous=O),j.first===T&&(j.first=P),j.last===T&&(j.last=O),d?j.size--:k.size--}return!!T},forEach:function(k){for(var j=S(this),T=n(k,arguments.length>1?arguments[1]:void 0),P;P=P?P.next:j.first;)for(T(P.value,P.key,this);P&&P.removed;)P=P.previous},has:function(k){return!!N(this,k)}}),r(x,v?{get:function(k){var j=N(this,k);return j&&j.value},set:function(k,j){return E(this,k===0?0:k,j)}}:{add:function(k){return E(this,k=k===0?0:k,k)}}),d&&e(x,"size",{configurable:!0,get:function(){return S(this).size}}),w},setStrong:function(g,y,v){var b=y+" Iterator",w=m(y),x=m(b);a(g,y,function(S,E){p(this,{type:b,target:S,state:w(S),kind:E,last:null})},function(){for(var S=x(this),E=S.kind,N=S.last;N&&N.removed;)N=N.previous;return!S.target||!(S.last=N=N?N.next:S.state.first)?(S.target=null,l(void 0,!0)):l(E==="keys"?N.key:E==="values"?N.value:[N.key,N.value],!1)},v?"entries":"values",!v,!0),u(y)}},gT}var PY;function P4e(){if(PY)return gY;PY=1;var t=p$(),e=jce();return t("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),gY}var IY;function I4e(){return IY||(IY=1,P4e()),mY}var RY={},yT,MY;function Tce(){return MY||(MY=1,yT=function(t,e){return e===1?function(r,n){return r[t](n)}:function(r,n,i){return r[t](n,i)}}),yT}var vT,AY;function R4e(){if(AY)return vT;AY=1;var t=Ti(),e=Tce(),r=t("Map");return vT={Map:r,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:r.prototype},vT}var DY;function M4e(){if(DY)return RY;DY=1;var t=Pe(),e=dt(),r=oa(),n=sa(),i=g1(),s=R4e(),o=Qh(),a=ct(),l=s.Map,u=s.has,d=s.get,h=s.set,f=e([].push),p=o||a(function(){return l.groupBy("ab",function(m){return m}).get("a").length!==1});return t({target:"Map",stat:!0,forced:o||p},{groupBy:function(g,y){n(g),r(y);var v=new l,b=0;return i(g,function(w){var x=y(w,b++);u(v,x)?f(d(v,x),w):h(v,x,[w])}),v}}),RY}var $Y={},bT,FY;function A4e(){if(FY)return bT;FY=1;var t=dt(),e=Zh(),r=ns(),n=sa(),i=t("".charAt),s=t("".charCodeAt),o=t("".slice),a=function(l){return function(u,d){var h=r(n(u)),f=e(d),p=h.length,m,g;return f<0||f>=p?l?"":void 0:(m=s(h,f),m<55296||m>56319||f+1===p||(g=s(h,f+1))<56320||g>57343?l?i(h,f):m:l?o(h,f,f+2):(m-55296<<10)+(g-56320)+65536)}};return bT={codeAt:a(!1),charAt:a(!0)},bT}var qY;function g$(){if(qY)return $Y;qY=1;var t=A4e().charAt,e=ns(),r=Eu(),n=ZD(),i=e$(),s="String Iterator",o=r.set,a=r.getterFor(s);return n(String,"String",function(l){o(this,{type:s,string:e(l),index:0})},function(){var u=a(this),d=u.string,h=u.index,f;return h>=d.length?i(void 0,!0):(f=t(d,h),u.index+=f.length,i(f,!1))}),$Y}var xT,LY;function D4e(){if(LY)return xT;LY=1,nf(),I4e(),M4e(),g$();var t=_t();return xT=t.Map,xT}var wT,BY;function $4e(){if(BY)return wT;BY=1;var t=D4e();return sf(),wT=t,wT}var ST,zY;function F4e(){return zY||(zY=1,ST=$4e()),ST}var q4e=F4e(),y$=ze(q4e);class L4e{constructor(){this.clear(),this._defaultIndex=0,this._groupIndex=0,this._defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},Er(this.options,this.defaultOptions)}setOptions(e){const r=["useDefaultGroups"];if(e!==void 0){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&wt(r).call(r,n)===-1){const i=e[n];this.add(n,i)}}}clear(){this._groups=new y$,this._groupNames=[]}get(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this._groups.get(e);if(n===void 0&&r)if(this.options.useDefaultGroups===!1&&this._groupNames.length>0){const i=this._groupIndex%this._groupNames.length;++this._groupIndex,n={},n.color=this._groups.get(this._groupNames[i]),this._groups.set(e,n)}else{const i=this._defaultIndex%this._defaultGroups.length;this._defaultIndex++,n={},n.color=this._defaultGroups[i],this._groups.set(e,n)}return n}add(e,r){return this._groups.has(e)||this._groupNames.push(e),this._groups.set(e,r),r}}var WY={},VY;function B4e(){if(VY)return WY;VY=1;var t=Pe();return t({target:"Number",stat:!0},{isNaN:function(r){return r!==r}}),WY}var ET,UY;function z4e(){if(UY)return ET;UY=1,B4e();var t=_t();return ET=t.Number.isNaN,ET}var _T,HY;function W4e(){if(HY)return _T;HY=1;var t=z4e();return _T=t,_T}var NT,KY;function V4e(){return KY||(KY=1,NT=W4e()),NT}var U4e=V4e(),QR=ze(U4e),GY={},CT,YY;function H4e(){if(YY)return CT;YY=1;var t=Ut(),e=t.isFinite;return CT=Number.isFinite||function(n){return typeof n=="number"&&e(n)},CT}var QY;function K4e(){if(QY)return GY;QY=1;var t=Pe(),e=H4e();return t({target:"Number",stat:!0},{isFinite:e}),GY}var kT,XY;function G4e(){if(XY)return kT;XY=1,K4e();var t=_t();return kT=t.Number.isFinite,kT}var jT,JY;function Y4e(){if(JY)return jT;JY=1;var t=G4e();return jT=t,jT}var TT,ZY;function Q4e(){return ZY||(ZY=1,TT=Y4e()),TT}var X4e=Q4e(),lc=ze(X4e),eQ={},tQ;function J4e(){if(tQ)return eQ;tQ=1;var t=Pe(),e=Al().some,r=of(),n=r("some");return t({target:"Array",proto:!0,forced:!n},{some:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),eQ}var OT,rQ;function Z4e(){if(rQ)return OT;rQ=1,J4e();var t=pn();return OT=t("Array","some"),OT}var PT,nQ;function e5e(){if(nQ)return PT;nQ=1;var t=Tr(),e=Z4e(),r=Array.prototype;return PT=function(n){var i=n.some;return n===r||t(r,n)&&i===r.some?e:i},PT}var IT,iQ;function t5e(){if(iQ)return IT;iQ=1;var t=e5e();return IT=t,IT}var RT,sQ;function r5e(){return sQ||(sQ=1,RT=t5e()),RT}var n5e=r5e(),i5e=ze(n5e),MT={exports:{}},oQ={},aQ;function s5e(){if(aQ)return oQ;aQ=1;var t=Pe(),e=gr(),r=rs().f;return t({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!e},{defineProperty:r}),oQ}var lQ;function o5e(){if(lQ)return MT.exports;lQ=1,s5e();var t=_t(),e=t.Object,r=MT.exports=function(i,s,o){return e.defineProperty(i,s,o)};return e.defineProperty.sham&&(r.sham=!0),MT.exports}var AT,cQ;function Oce(){if(cQ)return AT;cQ=1;var t=o5e();return AT=t,AT}var DT,uQ;function a5e(){if(uQ)return DT;uQ=1;var t=Oce();return DT=t,DT}var $T,dQ;function l5e(){if(dQ)return $T;dQ=1;var t=a5e();return $T=t,$T}var FT,hQ;function c5e(){return hQ||(hQ=1,FT=l5e()),FT}var u5e=c5e(),d5e=ze(u5e),fQ={},pQ;function h5e(){if(pQ)return fQ;pQ=1;var t=Or(),e=rs().f,r=t("metadata"),n=Function.prototype;return n[r]===void 0&&e(n,r,{value:null}),fQ}var mQ={},gQ;function f5e(){return gQ||(gQ=1,Ile()),mQ}var yQ={},vQ;function p5e(){return vQ||(vQ=1,Rle()),yQ}var bQ={},xQ;function m5e(){if(xQ)return bQ;xQ=1;var t=Zt();return t("metadata"),bQ}var qT,wQ;function g5e(){if(wQ)return qT;wQ=1;var t=Fle();return h5e(),f5e(),p5e(),m5e(),qT=t,qT}var SQ={},LT,EQ;function Pce(){if(EQ)return LT;EQ=1;var t=Ti(),e=dt(),r=t("Symbol"),n=r.keyFor,i=e(r.prototype.valueOf);return LT=r.isRegisteredSymbol||function(o){try{return n(i(o))!==void 0}catch{return!1}},LT}var _Q;function y5e(){if(_Q)return SQ;_Q=1;var t=Pe(),e=Pce();return t({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),SQ}var NQ={},BT,CQ;function Ice(){if(CQ)return BT;CQ=1;for(var t=Xh(),e=Ti(),r=dt(),n=lg(),i=Or(),s=e("Symbol"),o=s.isWellKnownSymbol,a=e("Object","getOwnPropertyNames"),l=r(s.prototype.valueOf),u=t("wks"),d=0,h=a(s),f=h.length;d<f;d++)try{var p=h[d];n(s[p])&&i(p)}catch{}return BT=function(g){if(o&&o(g))return!0;try{for(var y=l(g),v=0,b=a(u),w=b.length;v<w;v++)if(u[b[v]]==y)return!0}catch{}return!1},BT}var kQ;function v5e(){if(kQ)return NQ;kQ=1;var t=Pe(),e=Ice();return t({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),NQ}var jQ={},TQ;function b5e(){if(TQ)return jQ;TQ=1;var t=Zt();return t("customMatcher"),jQ}var OQ={},PQ;function x5e(){if(PQ)return OQ;PQ=1;var t=Zt();return t("observable"),OQ}var IQ={},RQ;function w5e(){if(RQ)return IQ;RQ=1;var t=Pe(),e=Pce();return t({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),IQ}var MQ={},AQ;function S5e(){if(AQ)return MQ;AQ=1;var t=Pe(),e=Ice();return t({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),MQ}var DQ={},$Q;function E5e(){if($Q)return DQ;$Q=1;var t=Zt();return t("matcher"),DQ}var FQ={},qQ;function _5e(){if(qQ)return FQ;qQ=1;var t=Zt();return t("metadataKey"),FQ}var LQ={},BQ;function N5e(){if(BQ)return LQ;BQ=1;var t=Zt();return t("patternMatch"),LQ}var zQ={},WQ;function C5e(){if(WQ)return zQ;WQ=1;var t=Zt();return t("replaceAll"),zQ}var zT,VQ;function k5e(){if(VQ)return zT;VQ=1;var t=g5e();return y5e(),v5e(),b5e(),x5e(),w5e(),S5e(),E5e(),_5e(),N5e(),C5e(),zT=t,zT}var WT,UQ;function j5e(){return UQ||(UQ=1,WT=k5e()),WT}var T5e=j5e(),Sy=ze(T5e),VT,HQ;function O5e(){if(HQ)return VT;HQ=1,nf(),g$(),Mle();var t=u1();return VT=t.f("iterator"),VT}var UT,KQ;function P5e(){if(KQ)return UT;KQ=1;var t=O5e();return sf(),UT=t,UT}var HT,GQ;function I5e(){if(GQ)return HT;GQ=1;var t=P5e();return HT=t,HT}var KT,YQ;function R5e(){if(YQ)return KT;YQ=1;var t=I5e();return KT=t,KT}var GT,QQ;function M5e(){return QQ||(QQ=1,GT=R5e()),GT}var A5e=M5e(),D5e=ze(A5e);function pm(t){"@babel/helpers - typeof";return pm=typeof Sy=="function"&&typeof D5e=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Sy=="function"&&e.constructor===Sy&&e!==Sy.prototype?"symbol":typeof e},pm(t)}var YT,XQ;function $5e(){if(XQ)return YT;XQ=1,Ale();var t=u1();return YT=t.f("toPrimitive"),YT}var QT,JQ;function F5e(){if(JQ)return QT;JQ=1;var t=$5e();return QT=t,QT}var XT,ZQ;function q5e(){if(ZQ)return XT;ZQ=1;var t=F5e();return XT=t,XT}var JT,eX;function L5e(){if(eX)return JT;eX=1;var t=q5e();return JT=t,JT}var ZT,tX;function B5e(){return tX||(tX=1,ZT=L5e()),ZT}var z5e=B5e(),W5e=ze(z5e);function V5e(t,e){if(pm(t)!="object"||!t)return t;var r=t[W5e];if(r!==void 0){var n=r.call(t,e);if(pm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function U5e(t){var e=V5e(t,"string");return pm(e)=="symbol"?e:e+""}function Po(t,e,r){return(e=U5e(e))in t?d5e(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var rX={},eO,nX;function H5e(){if(nX)return eO;nX=1;var t=Ut(),e=ct(),r=dt(),n=ns(),i=Lle().trim,s=t$(),o=r("".charAt),a=t.parseFloat,l=t.Symbol,u=l&&l.iterator,d=1/a(s+"-0")!==-1/0||u&&!e(function(){a(Object(u))});return eO=d?function(f){var p=i(n(f)),m=a(p);return m===0&&o(p,0)==="-"?-0:m}:a,eO}var iX;function K5e(){if(iX)return rX;iX=1;var t=Pe(),e=H5e();return t({global:!0,forced:parseFloat!==e},{parseFloat:e}),rX}var tO,sX;function G5e(){if(sX)return tO;sX=1,K5e();var t=_t();return tO=t.parseFloat,tO}var rO,oX;function Y5e(){if(oX)return rO;oX=1;var t=G5e();return rO=t,rO}var nO,aX;function Q5e(){return aX||(aX=1,nO=Y5e()),nO}var X5e=Q5e(),Rce=ze(X5e),lX={},cX;function J5e(){if(cX)return lX;cX=1;var t=Pe(),e=ct(),r=QD().f,n=e(function(){return!Object.getOwnPropertyNames(1)});return t({target:"Object",stat:!0,forced:n},{getOwnPropertyNames:r}),lX}var iO,uX;function Z5e(){if(uX)return iO;uX=1,J5e();var t=_t(),e=t.Object;return iO=function(n){return e.getOwnPropertyNames(n)},iO}var sO,dX;function e3e(){if(dX)return sO;dX=1;var t=Z5e();return sO=t,sO}var oO,hX;function t3e(){return hX||(hX=1,oO=e3e()),oO}var r3e=t3e(),n3e=ze(r3e),aO,fX;function i3e(){if(fX)return aO;fX=1,Ple();var t=_t();return aO=t.Object.getOwnPropertySymbols,aO}var lO,pX;function s3e(){if(pX)return lO;pX=1;var t=i3e();return lO=t,lO}var cO,mX;function o3e(){return mX||(mX=1,cO=s3e()),cO}var a3e=o3e(),Sl=ze(a3e),uO={exports:{}},gX={},yX;function l3e(){if(yX)return gX;yX=1;var t=Pe(),e=ct(),r=Cs(),n=n1().f,i=gr(),s=!i||e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getOwnPropertyDescriptor:function(a,l){return n(r(a),l)}}),gX}var vX;function c3e(){if(vX)return uO.exports;vX=1,l3e();var t=_t(),e=t.Object,r=uO.exports=function(i,s){return e.getOwnPropertyDescriptor(i,s)};return e.getOwnPropertyDescriptor.sham&&(r.sham=!0),uO.exports}var dO,bX;function u3e(){if(bX)return dO;bX=1;var t=c3e();return dO=t,dO}var hO,xX;function d3e(){return xX||(xX=1,hO=u3e()),hO}var h3e=d3e(),Dl=ze(h3e),wX={},SX;function f3e(){if(SX)return wX;SX=1;var t=Pe(),e=gr(),r=FMe(),n=Cs(),i=n1(),s=a1();return t({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(a){for(var l=n(a),u=i.f,d=r(l),h={},f=0,p,m;d.length>f;)m=u(l,p=d[f++]),m!==void 0&&s(h,p,m);return h}}),wX}var fO,EX;function p3e(){if(EX)return fO;EX=1,f3e();var t=_t();return fO=t.Object.getOwnPropertyDescriptors,fO}var pO,_X;function m3e(){if(_X)return pO;_X=1;var t=p3e();return pO=t,pO}var mO,NX;function g3e(){return NX||(NX=1,mO=m3e()),mO}var y3e=g3e(),El=ze(y3e),gO={exports:{}},CX={},kX;function v3e(){if(kX)return CX;kX=1;var t=Pe(),e=gr(),r=YD().f;return t({target:"Object",stat:!0,forced:Object.defineProperties!==r,sham:!e},{defineProperties:r}),CX}var jX;function b3e(){if(jX)return gO.exports;jX=1,v3e();var t=_t(),e=t.Object,r=gO.exports=function(i,s){return e.defineProperties(i,s)};return e.defineProperties.sham&&(r.sham=!0),gO.exports}var yO,TX;function x3e(){if(TX)return yO;TX=1;var t=b3e();return yO=t,yO}var vO,OX;function w3e(){return OX||(OX=1,vO=x3e()),vO}var S3e=w3e(),y1=ze(S3e),bO,PX;function E3e(){return PX||(PX=1,bO=Oce()),bO}var _3e=E3e(),v1=ze(_3e);function v$(t,e){const r=["node","edge","label"];let n=!0;const i=_a(e,"chosen");if(typeof i=="boolean")n=i;else if(typeof i=="object"){if(wt(r).call(r,t)===-1)throw new Error("choosify: subOption '"+t+"' should be one of '"+r.join("', '")+"'");const s=_a(e,["chosen",t]);(typeof s=="boolean"||typeof s=="function")&&(n=s)}return n}function XR(t,e,r){if(t.width<=0||t.height<=0)return!1;if(r!==void 0){const s={x:e.x-r.x,y:e.y-r.y};if(r.angle!==0){const o=-r.angle;e={x:Math.cos(o)*s.x-Math.sin(o)*s.y,y:Math.sin(o)*s.x+Math.cos(o)*s.y}}else e=s}const n=t.x+t.width,i=t.y+t.width;return t.left<e.x&&n>e.x&&t.top<e.y&&i>e.y}function q0(t){return typeof t=="string"&&t!==""}function Mce(t,e,r,n){let i=n.x,s=n.y;if(typeof n.distanceToBorder=="function"){const o=n.distanceToBorder(t,e),a=Math.sin(e)*o,l=Math.cos(e)*o;l===o?(i+=o,s=n.y):a===o?(i=n.x,s-=o):(i+=l,s-=a)}else n.shape.width>n.shape.height?(i=n.x+n.shape.width*.5,s=n.y-r):(i=n.x+r,s=n.y-n.shape.height*.5);return{x:i,y:s}}var xO,IX;function N3e(){if(IX)return xO;IX=1,nf();var t=pn();return xO=t("Array","values"),xO}var wO,RX;function C3e(){if(RX)return wO;RX=1;var t=N3e();return wO=t,wO}var SO,MX;function k3e(){if(MX)return SO;MX=1,sf();var t=tf(),e=fn(),r=Tr(),n=C3e(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return SO=function(o){var a=o.values;return o===i||r(i,o)&&a===i.values||e(s,t(o))?n:a},SO}var EO,AX;function j3e(){return AX||(AX=1,EO=k3e()),EO}var T3e=j3e(),Ace=ze(T3e);class O3e{constructor(e){this.measureText=e,this.current=0,this.width=0,this.height=0,this.lines=[]}_add(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"normal";this.lines[e]===void 0&&(this.lines[e]={width:0,height:0,blocks:[]});let i=r;(r===void 0||r==="")&&(i=" ");const s=this.measureText(i,n),o=Er({},Ace(s));o.text=r,o.width=s.width,o.mod=n,(r===void 0||r==="")&&(o.width=0),this.lines[e].blocks.push(o),this.lines[e].width+=o.width}curWidth(){const e=this.lines[this.current];return e===void 0?0:e.width}append(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,r)}newLine(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,r),this.current++}determineLineHeights(){for(let e=0;e<this.lines.length;e++){const r=this.lines[e];let n=0;if(r.blocks!==void 0)for(let i=0;i<r.blocks.length;i++){const s=r.blocks[i];n<s.height&&(n=s.height)}r.height=n}}determineLabelSize(){let e=0,r=0;for(let n=0;n<this.lines.length;n++){const i=this.lines[n];i.width>e&&(e=i.width),r+=i.height}this.width=e,this.height=r}removeEmptyBlocks(){const e=[];for(let r=0;r<this.lines.length;r++){const n=this.lines[r];if(n.blocks.length===0||r===this.lines.length-1&&n.width===0)continue;const i={};Er(i,n),i.blocks=[];let s;const o=[];for(let a=0;a<n.blocks.length;a++){const l=n.blocks[a];l.width!==0?o.push(l):s===void 0&&(s=l)}o.length===0&&s!==void 0&&o.push(s),i.blocks=o,e.push(i)}return e}finalize(){this.determineLineHeights(),this.determineLabelSize();const e=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:e}}}const P3e={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/_/,"`":/`/,afterBold:/[^*]/,afterItal:/[^_]/,afterMono:/[^`]/};class DX{constructor(e){this.text=e,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}mod(){return this.modStack.length===0?"normal":this.modStack[0]}modName(){if(this.modStack.length===0)return"normal";if(this.modStack[0]==="mono")return"mono";if(this.bold&&this.ital)return"boldital";if(this.bold)return"bold";if(this.ital)return"ital"}emitBlock(){this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}add(e){e===" "&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1),e!=" "&&(this.buffer+=e)}parseWS(e){return/[ \t]/.test(e)?(this.mono?this.add(e):this.spacing=!0,!0):!1}setTag(e){this.emitBlock(),this[e]=!0,this.modStack.unshift(e)}unsetTag(e){this.emitBlock(),this[e]=!1,this.modStack.shift()}parseStartTag(e,r){return!this.mono&&!this[e]&&this.match(r)?(this.setTag(e),!0):!1}match(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const[n,i]=this.prepareRegExp(e),s=n.test(this.text.substr(this.position,i));return s&&r&&(this.position+=i-1),s}parseEndTag(e,r,n){let i=this.mod()===e;return e==="mono"?i=i&&this.mono:i=i&&!this.mono,i&&this.match(r)?(n!==void 0?(this.position===this.text.length-1||this.match(n,!1))&&this.unsetTag(e):this.unsetTag(e),!0):!1}replace(e,r){return this.match(e)?(this.add(r),this.position+=length-1,!0):!1}prepareRegExp(e){let r,n;if(e instanceof RegExp)n=e,r=1;else{const i=P3e[e];i!==void 0?n=i:n=new RegExp(e),r=e.length}return[n,r]}}class I3e{constructor(e,r,n,i){this.ctx=e,this.parent=r,this.selected=n,this.hover=i;const s=(o,a)=>{if(o===void 0)return 0;const l=this.parent.getFormattingValues(e,n,i,a);let u=0;return o!==""&&(u=this.ctx.measureText(o).width),{width:u,values:l}};this.lines=new O3e(s)}process(e){if(!q0(e))return this.lines.finalize();const r=this.parent.fontOptions;e=e.replace(/\r\n/g,`
`),e=e.replace(/\r/g,`
`);const n=String(e).split(`
`),i=n.length;if(r.multi)for(let s=0;s<i;s++){const o=this.splitBlocks(n[s],r.multi);if(o!==void 0){if(o.length===0){this.lines.newLine("");continue}if(r.maxWdt>0)for(let a=0;a<o.length;a++){const l=o[a].mod,u=o[a].text;this.splitStringIntoLines(u,l,!0)}else for(let a=0;a<o.length;a++){const l=o[a].mod,u=o[a].text;this.lines.append(u,l)}this.lines.newLine()}}else if(r.maxWdt>0)for(let s=0;s<i;s++)this.splitStringIntoLines(n[s]);else for(let s=0;s<i;s++)this.lines.newLine(n[s]);return this.lines.finalize()}decodeMarkupSystem(e){let r="none";return e==="markdown"||e==="md"?r="markdown":(e===!0||e==="html")&&(r="html"),r}splitHtmlBlocks(e){const r=new DX(e),n=i=>/&/.test(i)?(r.replace(r.text,"&lt;","<")||r.replace(r.text,"&amp;","&")||r.add("&"),!0):!1;for(;r.position<r.text.length;){const i=r.text.charAt(r.position);r.parseWS(i)||/</.test(i)&&(r.parseStartTag("bold","<b>")||r.parseStartTag("ital","<i>")||r.parseStartTag("mono","<code>")||r.parseEndTag("bold","</b>")||r.parseEndTag("ital","</i>")||r.parseEndTag("mono","</code>"))||n(i)||r.add(i),r.position++}return r.emitBlock(),r.blocks}splitMarkdownBlocks(e){const r=new DX(e);let n=!0;const i=s=>/\\/.test(s)?(r.position<this.text.length+1&&(r.position++,s=this.text.charAt(r.position),/ \t/.test(s)?r.spacing=!0:(r.add(s),n=!1)),!0):!1;for(;r.position<r.text.length;){const s=r.text.charAt(r.position);r.parseWS(s)||i(s)||(n||r.spacing)&&(r.parseStartTag("bold","*")||r.parseStartTag("ital","_")||r.parseStartTag("mono","`"))||r.parseEndTag("bold","*","afterBold")||r.parseEndTag("ital","_","afterItal")||r.parseEndTag("mono","`","afterMono")||(r.add(s),n=!1),r.position++}return r.emitBlock(),r.blocks}splitBlocks(e,r){const n=this.decodeMarkupSystem(r);if(n==="none")return[{text:e,mod:"normal"}];if(n==="markdown")return this.splitMarkdownBlocks(e);if(n==="html")return this.splitHtmlBlocks(e)}overMaxWidth(e){const r=this.ctx.measureText(e).width;return this.lines.curWidth()+r>this.parent.fontOptions.maxWdt}getLongestFit(e){let r="",n=0;for(;n<e.length;){const s=r+(r===""?"":" ")+e[n];if(this.overMaxWidth(s))break;r=s,n++}return n}getLongestFitWord(e){let r=0;for(;r<e.length&&!this.overMaxWidth(Ws(e).call(e,0,r));)r++;return r}splitStringIntoLines(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.parent.getFormattingValues(this.ctx,this.selected,this.hover,r),e=e.replace(/^( +)/g,"$1\r"),e=e.replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r");let i=e.split("\r");for(;i.length>0;){let s=this.getLongestFit(i);if(s===0){const o=i[0],a=this.getLongestFitWord(o);this.lines.newLine(Ws(o).call(o,0,a),r),i[0]=Ws(o).call(o,a)}else{let o=s;i[s-1]===" "?s--:i[o]===" "&&o++;const a=Ws(i).call(i,0,s).join("");s==i.length&&n?this.lines.append(a,r):this.lines.newLine(a,r),i=Ws(i).call(i,o)}}}}const Af=["bold","ital","boldital","mono"];class Pd{constructor(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.body=e,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(r),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=n}setOptions(e){if(this.elementOptions=e,this.initFontOptions(e.font),q0(e.label)?this.labelDirty=!0:e.label=void 0,e.font!==void 0&&e.font!==null){if(typeof e.font=="string")this.baseSize=this.fontOptions.size;else if(typeof e.font=="object"){const r=e.font.size;r!==void 0&&(this.baseSize=r)}}}initFontOptions(e){if(nt(Af,r=>{this.fontOptions[r]={}}),Pd.parseFontString(this.fontOptions,e)){this.fontOptions.vadjust=0;return}nt(e,(r,n)=>{r!=null&&typeof r!="object"&&(this.fontOptions[n]=r)})}static parseFontString(e,r){if(!r||typeof r!="string")return!1;const n=r.split(" ");return e.size=+n[0].replace("px",""),e.face=n[1],e.color=n[2],!0}constrain(e){const r={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},n=_a(e,"widthConstraint");if(typeof n=="number")r.maxWdt=Number(n),r.minWdt=Number(n);else if(typeof n=="object"){const s=_a(e,["widthConstraint","maximum"]);typeof s=="number"&&(r.maxWdt=Number(s));const o=_a(e,["widthConstraint","minimum"]);typeof o=="number"&&(r.minWdt=Number(o))}const i=_a(e,"heightConstraint");if(typeof i=="number")r.minHgt=Number(i);else if(typeof i=="object"){const s=_a(e,["heightConstraint","minimum"]);typeof s=="number"&&(r.minHgt=Number(s));const o=_a(e,["heightConstraint","valign"]);typeof o=="string"&&(o==="top"||o==="bottom")&&(r.valign=o)}return r}update(e,r){this.setOptions(e,!0),this.propagateFonts(r),At(this.fontOptions,this.constrain(r)),this.fontOptions.chooser=v$("label",r)}adjustSizes(e){const r=e?e.right+e.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=r,this.fontOptions.minWdt-=r);const n=e?e.top+e.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=n)}addFontOptionsToPile(e,r){for(let n=0;n<r.length;++n)this.addFontToPile(e,r[n])}addFontToPile(e,r){if(r===void 0||r.font===void 0||r.font===null)return;const n=r.font;e.push(n)}getBasicOptions(e){const r={};for(let n=0;n<e.length;++n){let i=e[n];const s={};Pd.parseFontString(s,i)&&(i=s),nt(i,(o,a)=>{o!==void 0&&(Object.prototype.hasOwnProperty.call(r,a)||(wt(Af).call(Af,a)!==-1?r[a]={}:r[a]=o))})}return r}getFontOption(e,r,n){let i;for(let s=0;s<e.length;++s){const o=e[s];if(Object.prototype.hasOwnProperty.call(o,r)){if(i=o[r],i==null)continue;const a={};if(Pd.parseFontString(a,i)&&(i=a),Object.prototype.hasOwnProperty.call(i,n))return i[n]}}if(Object.prototype.hasOwnProperty.call(this.fontOptions,n))return this.fontOptions[n];throw new Error("Did not find value for multi-font for property: '"+n+"'")}getFontOptions(e,r){const n={},i=["color","size","face","mod","vadjust"];for(let s=0;s<i.length;++s){const o=i[s];n[o]=this.getFontOption(e,r,o)}return n}propagateFonts(e){const r=[];this.addFontOptionsToPile(r,e),this.fontOptions=this.getBasicOptions(r);for(let n=0;n<Af.length;++n){const i=Af[n],s=this.fontOptions[i],o=this.getFontOptions(r,i);nt(o,(a,l)=>{s[l]=a}),s.size=Number(s.size),s.vadjust=Number(s.vadjust)}}draw(e,r,n,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";if(this.elementOptions.label===void 0)return;let a=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&a<this.elementOptions.scaling.label.drawThreshold-1||(a>=this.elementOptions.scaling.label.maxVisible&&(a=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(e,i,s,r,n,o),this._drawBackground(e),this._drawText(e,r,this.size.yLine,o,a))}_drawBackground(e){if(this.fontOptions.background!==void 0&&this.fontOptions.background!=="none"){e.fillStyle=this.fontOptions.background;const r=this.getSize();e.fillRect(r.left,r.top,r.width,r.height)}}_drawText(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"middle",s=arguments.length>4?arguments[4]:void 0;[r,n]=this._setAlignment(e,r,n,i),e.textAlign="left",r=r-this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&(this.fontOptions.valign==="top"&&(n-=(this.size.height-this.size.labelHeight)/2),this.fontOptions.valign==="bottom"&&(n+=(this.size.height-this.size.labelHeight)/2));for(let o=0;o<this.lineCount;o++){const a=this.lines[o];if(a&&a.blocks){let l=0;this.isEdgeLabel||this.fontOptions.align==="center"?l+=(this.size.width-a.width)/2:this.fontOptions.align==="right"&&(l+=this.size.width-a.width);for(let u=0;u<a.blocks.length;u++){const d=a.blocks[u];e.font=d.font;const[h,f]=this._getColor(d.color,s,d.strokeColor);d.strokeWidth>0&&(e.lineWidth=d.strokeWidth,e.strokeStyle=f,e.lineJoin="round"),e.fillStyle=h,d.strokeWidth>0&&e.strokeText(d.text,r+l,n+d.vadjust),e.fillText(d.text,r+l,n+d.vadjust),l+=d.width}n+=a.height}}}_setAlignment(e,r,n,i){if(this.isEdgeLabel&&this.fontOptions.align!=="horizontal"&&this.pointToSelf===!1){r=0,n=0;const s=2;this.fontOptions.align==="top"?(e.textBaseline="alphabetic",n-=2*s):this.fontOptions.align==="bottom"?(e.textBaseline="hanging",n+=2*s):e.textBaseline="middle"}else e.textBaseline=i;return[r,n]}_getColor(e,r,n){let i=e||"#000000",s=n||"#ffffff";if(r<=this.elementOptions.scaling.label.drawThreshold){const o=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-r)));i=Wi(i,o),s=Wi(s,o)}return[i,s]}getTextSize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this._processLabel(e,r,n),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}getSize(){let r=this.size.left,n=this.size.top-.5*2;if(this.isEdgeLabel){const s=-this.size.width*.5;switch(this.fontOptions.align){case"middle":r=s,n=-this.size.height*.5;break;case"top":r=s,n=-(this.size.height+2);break;case"bottom":r=s,n=2;break}}return{left:r,top:n,width:this.size.width,height:this.size.height}}calculateLabelSize(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";this._processLabel(e,r,n),this.size.left=i-this.size.width*.5,this.size.top=s-this.size.height*.5,this.size.yLine=s+(1-this.lineCount)*.5*this.fontOptions.size,o==="hanging"&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}getFormattingValues(e,r,n,i){const s=function(l,u,d){return u==="normal"?d==="mod"?"":l[d]:l[u][d]!==void 0?l[u][d]:l[d]},o={color:s(this.fontOptions,i,"color"),size:s(this.fontOptions,i,"size"),face:s(this.fontOptions,i,"face"),mod:s(this.fontOptions,i,"mod"),vadjust:s(this.fontOptions,i,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(r||n)&&(i==="normal"&&this.fontOptions.chooser===!0&&this.elementOptions.labelHighlightBold?o.mod="bold":typeof this.fontOptions.chooser=="function"&&this.fontOptions.chooser(o,this.elementOptions.id,r,n));let a="";return o.mod!==void 0&&o.mod!==""&&(a+=o.mod+" "),a+=o.size+"px "+o.face,e.font=a.replace(/"/g,""),o.font=e.font,o.height=o.size,o}differentState(e,r){return e!==this.selectedState||r!==this.hoverState}_processLabelText(e,r,n,i){return new I3e(e,this,r,n).process(i)}_processLabel(e,r,n){if(this.labelDirty===!1&&!this.differentState(r,n))return;const i=this._processLabelText(e,r,n,this.elementOptions.label);this.fontOptions.minWdt>0&&i.width<this.fontOptions.minWdt&&(i.width=this.fontOptions.minWdt),this.size.labelHeight=i.height,this.fontOptions.minHgt>0&&i.height<this.fontOptions.minHgt&&(i.height=this.fontOptions.minHgt),this.lines=i.lines,this.lineCount=i.lines.length,this.size.width=i.width,this.size.height=i.height,this.selectedState=r,this.hoverState=n,this.labelDirty=!1}visible(){return!(this.size.width===0||this.size.height===0||this.elementOptions.label===void 0||this.fontOptions.size*this.body.view.scale<this.elementOptions.scaling.label.drawThreshold-1)}}class Nu{constructor(e,r,n){this.body=r,this.labelModule=n,this.setOptions(e),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}setOptions(e){this.options=e}_setMargins(e){this.margin={},this.options.margin&&(typeof this.options.margin=="object"?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),e.adjustSizes(this.margin)}_distanceToBorder(e,r){const n=this.options.borderWidth;return e&&this.resize(e),Math.min(Math.abs(this.width/2/Math.cos(r)),Math.abs(this.height/2/Math.sin(r)))+n}enableShadow(e,r){r.shadow&&(e.shadowColor=r.shadowColor,e.shadowBlur=r.shadowSize,e.shadowOffsetX=r.shadowX,e.shadowOffsetY=r.shadowY)}disableShadow(e,r){r.shadow&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}enableBorderDashes(e,r){if(r.borderDashes!==!1)if(e.setLineDash!==void 0){let n=r.borderDashes;n===!0&&(n=[5,15]),e.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,r.borderDashes=!1}disableBorderDashes(e,r){r.borderDashes!==!1&&(e.setLineDash!==void 0?e.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,r.borderDashes=!1))}needsRefresh(e,r){return this.refreshNeeded===!0?(this.refreshNeeded=!1,!0):this.width===void 0||this.labelModule.differentState(e,r)}initContextForDraw(e,r){const n=r.borderWidth/this.body.view.scale;e.lineWidth=Math.min(this.width,n),e.strokeStyle=r.borderColor,e.fillStyle=r.color}performStroke(e,r){const n=r.borderWidth/this.body.view.scale;e.save(),n>0&&(this.enableBorderDashes(e,r),e.stroke(),this.disableBorderDashes(e,r)),e.restore()}performFill(e,r){e.save(),e.fillStyle=r.color,this.enableShadow(e,r),mg(e).call(e),this.disableShadow(e,r),e.restore(),this.performStroke(e,r)}_addBoundingBoxMargin(e){this.boundingBox.left-=e,this.boundingBox.top-=e,this.boundingBox.bottom+=e,this.boundingBox.right+=e}_updateBoundingBox(e,r,n,i,s){n!==void 0&&this.resize(n,i,s),this.left=e-this.width/2,this.top=r-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}updateBoundingBox(e,r,n,i,s){this._updateBoundingBox(e,r,n,i,s)}getDimensionsFromLabel(e,r,n){this.textSize=this.labelModule.getTextSize(e,r,n);let i=this.textSize.width,s=this.textSize.height;const o=14;return i===0&&(i=o,s=o),{width:i,height:s}}}let R3e=class extends Nu{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n);this.width=i.width+this.margin.right+this.margin.left,this.height=i.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.initContextForDraw(e,o),xle(e,this.left,this.top,this.width,this.height,o.borderRadius),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s)}updateBoundingBox(e,r,n,i,s){this._updateBoundingBox(e,r,n,i,s);const o=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(o)}distanceToBorder(e,r){e&&this.resize(e);const n=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(r)),Math.abs(this.height/2/Math.sin(r)))+n}};class b$ extends Nu{constructor(e,r,n){super(e,r,n),this.labelOffset=0,this.selected=!1}setOptions(e,r,n){this.options=e,r===void 0&&n===void 0||this.setImages(r,n)}setImages(e,r){r&&this.selected?(this.imageObj=r,this.imageObjAlt=e):(this.imageObj=e,this.imageObjAlt=r)}switchImages(e){const r=e&&!this.selected||!e&&this.selected;if(this.selected=e,this.imageObjAlt!==void 0&&r){const n=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=n}}_getImagePadding(){const e={top:0,right:0,bottom:0,left:0};if(this.options.imagePadding){const r=this.options.imagePadding;typeof r=="object"?(e.top=r.top,e.right=r.right,e.bottom=r.bottom,e.left=r.left):(e.top=r,e.right=r,e.bottom=r,e.left=r)}return e}_resizeImage(){let e,r;if(this.options.shapeProperties.useImageSize===!1){let n=1,i=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?n=this.imageObj.width/this.imageObj.height:i=this.imageObj.height/this.imageObj.width),e=this.options.size*2*n,r=this.options.size*2*i}else{const n=this._getImagePadding();e=this.imageObj.width+n.left+n.right,r=this.imageObj.height+n.top+n.bottom}this.width=e,this.height=r,this.radius=.5*this.width}_drawRawCircle(e,r,n,i){this.initContextForDraw(e,i),HD(e,r,n,i.size),this.performFill(e,i)}_drawImageAtPosition(e,r){if(this.imageObj.width!=0){e.globalAlpha=r.opacity!==void 0?r.opacity:1,this.enableShadow(e,r);let n=1;this.options.shapeProperties.interpolation===!0&&(n=this.imageObj.width/this.width/this.body.view.scale);const i=this._getImagePadding(),s=this.left+i.left,o=this.top+i.top,a=this.width-i.left-i.right,l=this.height-i.top-i.bottom;this.imageObj.drawImageAtPosition(e,n,s,o,a,l),this.disableShadow(e,r)}}_drawImageLabel(e,r,n,i,s){let o=0;if(this.height!==void 0){o=this.height*.5;const l=this.labelModule.getTextSize(e,i,s);l.lineCount>=1&&(o+=l.height/2)}const a=n+o;this.options.label&&(this.labelOffset=o),this.labelModule.draw(e,r,a,i,s,"hanging")}}let M3e=class extends b${constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n),s=Math.max(i.width+this.margin.right+this.margin.left,i.height+this.margin.top+this.margin.bottom);this.options.size=s/2,this.width=s,this.height=s,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this._drawRawCircle(e,r,n,o),this.updateBoundingBox(r,n),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,n,i,s)}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size}distanceToBorder(e){return e&&this.resize(e),this.width*.5}};class A3e extends b${constructor(e,r,n,i,s){super(e,r,n),this.setImages(i,s)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0){const s=this.options.size*2;this.width=s,this.height=s,this.radius=.5*this.width;return}this.needsRefresh(r,n)&&this._resizeImage()}draw(e,r,n,i,s,o){this.switchImages(i),this.resize();let a=r,l=n;this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=r,this.top=n,a+=this.width/2,l+=this.height/2):(this.left=r-this.width/2,this.top=n-this.height/2),this._drawRawCircle(e,a,l,o),e.save(),e.clip(),this._drawImageAtPosition(e,o),e.restore(),this._drawImageLabel(e,a,l,i,s),this.updateBoundingBox(r,n)}updateBoundingBox(e,r){this.options.shapeProperties.coordinateOrigin==="top-left"?(this.boundingBox.top=r,this.boundingBox.left=e,this.boundingBox.right=e+this.options.size*2,this.boundingBox.bottom=r+this.options.size*2):(this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size),this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}distanceToBorder(e){return e&&this.resize(e),this.width*.5}}class $l extends Nu{constructor(e,r,n){super(e,r,n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{size:this.options.size};if(this.needsRefresh(r,n)){var s,o;this.labelModule.getTextSize(e,r,n);const a=2*i.size;this.width=(s=this.customSizeWidth)!==null&&s!==void 0?s:a,this.height=(o=this.customSizeHeight)!==null&&o!==void 0?o:a,this.radius=.5*this.width}}_drawShape(e,r,n,i,s,o,a,l){return this.resize(e,o,a,l),this.left=i-this.width/2,this.top=s-this.height/2,this.initContextForDraw(e,l),XRe(r)(e,i,s,l.size),this.performFill(e,l),this.options.icon!==void 0&&this.options.icon.code!==void 0&&(e.font=(o?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",e.fillText(this.options.icon.code,i,s)),{drawExternalLabel:()=>{if(this.options.label!==void 0){this.labelModule.calculateLabelSize(e,o,a,i,s,"hanging");const u=s+.5*this.height+.5*this.labelModule.size.height;this.labelModule.draw(e,i,u,o,a,"hanging")}this.updateBoundingBox(i,s)}}}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}function $X(t,e){var r=sr(t);if(Sl){var n=Sl(t);e&&(n=ti(n).call(n,function(i){return Dl(t,i).enumerable})),r.push.apply(r,n)}return r}function D3e(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?It(r=$X(Object(i),!0)).call(r,function(s){Po(t,s,i[s])}):El?y1(t,El(i)):It(n=$X(Object(i))).call(n,function(s){v1(t,s,Dl(i,s))})}return t}class $3e extends $l{constructor(e,r,n,i){super(e,r,n,i),this.ctxRenderer=i}draw(e,r,n,i,s,o){this.resize(e,i,s,o),this.left=r-this.width/2,this.top=n-this.height/2,e.save();const a=this.ctxRenderer({ctx:e,id:this.options.id,x:r,y:n,state:{selected:i,hover:s},style:D3e({},o),label:this.options.label});if(a.drawNode!=null&&a.drawNode(),e.restore(),a.drawExternalLabel){const l=a.drawExternalLabel;a.drawExternalLabel=()=>{e.save(),l(),e.restore()}}return a.nodeDimensions&&(this.customSizeWidth=a.nodeDimensions.width,this.customSizeHeight=a.nodeDimensions.height),a}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class F3e extends Nu{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){if(this.needsRefresh(r,n)){const s=this.getDimensionsFromLabel(e,r,n).width+this.margin.right+this.margin.left;this.width=s,this.height=s,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.initContextForDraw(e,o),wle(e,r-this.width/2,n-this.height/2,this.width,this.height),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let q3e=class extends $l{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"diamond",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class L3e extends $l{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"circle",2,r,n,i,s,o)}distanceToBorder(e){return e&&this.resize(e),this.options.size}}class FX extends Nu{constructor(e,r,n){super(e,r,n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n);this.height=i.height*2,this.width=i.width+i.height,this.radius=.5*this.width}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width*.5,this.top=n-this.height*.5,this.initContextForDraw(e,o),BR(e,this.left,this.top,this.width,this.height),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,r,n,i,s)}distanceToBorder(e,r){e&&this.resize(e);const n=this.width*.5,i=this.height*.5,s=Math.sin(r)*n,o=Math.cos(r)*i;return n*i/Math.sqrt(s*s+o*o)}}class B3e extends Nu{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){this.needsRefresh(r,n)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}draw(e,r,n,i,s,o){return this.resize(e,i,s),this.options.icon.size=this.options.icon.size||50,this.left=r-this.width/2,this.top=n-this.height/2,this._icon(e,r,n,i,s,o),{drawExternalLabel:()=>{this.options.label!==void 0&&this.labelModule.draw(e,this.left+this.iconSize.width/2+this.margin.left,n+this.height/2+5,i),this.updateBoundingBox(r,n)}}}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.icon.size*.5,this.boundingBox.left=e-this.options.icon.size*.5,this.boundingBox.right=e+this.options.icon.size*.5,this.boundingBox.bottom=r+this.options.icon.size*.5,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+5))}_icon(e,r,n,i,s,o){const a=Number(this.options.icon.size);this.options.icon.code!==void 0?(e.font=[this.options.icon.weight!=null?this.options.icon.weight:i?"bold":"",(this.options.icon.weight!=null&&i?5:0)+a+"px",this.options.icon.face].join(" "),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",this.enableShadow(e,o),e.fillText(this.options.icon.code,r,n),this.disableShadow(e,o)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let z3e=class extends b${constructor(e,r,n,i,s){super(e,r,n),this.setImages(i,s)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0){const s=this.options.size*2;this.width=s,this.height=s;return}this.needsRefresh(r,n)&&this._resizeImage()}draw(e,r,n,i,s,o){e.save(),this.switchImages(i),this.resize();let a=r,l=n;if(this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=r,this.top=n,a+=this.width/2,l+=this.height/2):(this.left=r-this.width/2,this.top=n-this.height/2),this.options.shapeProperties.useBorderWithImage===!0){const u=this.options.borderWidth,d=this.options.borderWidthSelected||2*this.options.borderWidth,h=(i?d:u)/this.body.view.scale;e.lineWidth=Math.min(this.width,h),e.beginPath();let f=i?this.options.color.highlight.border:s?this.options.color.hover.border:this.options.color.border,p=i?this.options.color.highlight.background:s?this.options.color.hover.background:this.options.color.background;o.opacity!==void 0&&(f=Wi(f,o.opacity),p=Wi(p,o.opacity)),e.strokeStyle=f,e.fillStyle=p,e.rect(this.left-.5*e.lineWidth,this.top-.5*e.lineWidth,this.width+e.lineWidth,this.height+e.lineWidth),mg(e).call(e),this.performStroke(e,o),e.closePath()}this._drawImageAtPosition(e,o),this._drawImageLabel(e,a,l,i,s),this.updateBoundingBox(r,n),e.restore()}updateBoundingBox(e,r){this.resize(),this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=e,this.top=r):(this.left=e-this.width/2,this.top=r-this.height/2),this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class W3e extends $l{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"square",2,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class V3e extends $l{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"hexagon",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class U3e extends $l{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"star",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class H3e extends Nu{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){this.needsRefresh(r,n)&&(this.textSize=this.labelModule.getTextSize(e,r,n),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.enableShadow(e,o),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s),this.disableShadow(e,o),this.updateBoundingBox(r,n,e,i,s)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let K3e=class extends $l{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"triangle",3,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class G3e extends $l{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"triangleDown",3,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}function qX(t,e){var r=sr(t);if(Sl){var n=Sl(t);e&&(n=ti(n).call(n,function(i){return Dl(t,i).enumerable})),r.push.apply(r,n)}return r}function LX(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?It(r=qX(Object(i),!0)).call(r,function(s){Po(t,s,i[s])}):El?y1(t,El(i)):It(n=qX(Object(i))).call(n,function(s){v1(t,s,Dl(i,s))})}return t}class Wt{constructor(e,r,n,i,s,o){this.options=hl(s),this.globalOptions=s,this.defaultOptions=o,this.body=r,this.edges=[],this.id=void 0,this.imagelist=n,this.grouplist=i,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new Pd(this.body,this.options,!1),this.setOptions(e)}attachEdge(e){var r;wt(r=this.edges).call(r,e)===-1&&this.edges.push(e)}detachEdge(e){var r;const n=wt(r=this.edges).call(r,e);if(n!=-1){var i;Fo(i=this.edges).call(i,n,1)}}setOptions(e){const r=this.options.shape;if(!e)return;if(typeof e.color<"u"&&(this._localColor=e.color),e.id!==void 0&&(this.id=e.id),this.id===void 0)throw new Error("Node must have an id");Wt.checkMass(e,this.id),e.x!==void 0&&(e.x===null?(this.x=void 0,this.predefinedPosition=!1):(this.x=ms(e.x),this.predefinedPosition=!0)),e.y!==void 0&&(e.y===null?(this.y=void 0,this.predefinedPosition=!1):(this.y=ms(e.y),this.predefinedPosition=!0)),e.size!==void 0&&(this.baseSize=e.size),e.value!==void 0&&(e.value=Rce(e.value)),Wt.parseOptions(this.options,e,!0,this.globalOptions,this.grouplist);const n=[e,this.options,this.defaultOptions];return this.chooser=v$("node",n),this._load_images(),this.updateLabelModule(e),e.opacity!==void 0&&Wt.checkOpacity(e.opacity)&&(this.options.opacity=e.opacity),this.updateShape(r),e.hidden!==void 0||e.physics!==void 0}_load_images(){if((this.options.shape==="circularImage"||this.options.shape==="image")&&this.options.image===void 0)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(this.options.image!==void 0){if(this.imagelist===void 0)throw new Error("Internal Error: No images provided");if(typeof this.options.image=="string")this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(this.options.image.unselected===void 0)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),this.options.image.selected!==void 0?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}static checkOpacity(e){return 0<=e&&e<=1}static checkCoordinateOrigin(e){return e===void 0||e==="center"||e==="top-left"}static updateGroupOptions(e,r,n){var i;if(n===void 0)return;const s=e.group;if(r!==void 0&&r.group!==void 0&&s!==r.group)throw new Error("updateGroupOptions: group values in options don't match.");if(!(typeof s=="number"||typeof s=="string"&&s!=""))return;const a=n.get(s);a.opacity!==void 0&&r.opacity===void 0&&(Wt.checkOpacity(a.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+a.opacity),a.opacity=void 0));const l=ti(i=n3e(r)).call(i,u=>r[u]!=null);l.push("font"),$0(l,e,a),e.color=HR(e.color)}static parseOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4?arguments[4]:void 0;if($0(["color","fixed","shadow"],e,r,n),Wt.checkMass(r),e.opacity!==void 0&&(Wt.checkOpacity(e.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity),e.opacity=void 0)),r.opacity!==void 0&&(Wt.checkOpacity(r.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+r.opacity),r.opacity=void 0)),r.shapeProperties&&!Wt.checkCoordinateOrigin(r.shapeProperties.coordinateOrigin)&&console.error("Invalid option for node coordinateOrigin, found: "+r.shapeProperties.coordinateOrigin),Fi(e,r,"shadow",i),r.color!==void 0&&r.color!==null){const a=HR(r.color);pce(e.color,a)}else n===!0&&r.color===null&&(e.color=hl(i.color));r.fixed!==void 0&&r.fixed!==null&&(typeof r.fixed=="boolean"?(e.fixed.x=r.fixed,e.fixed.y=r.fixed):(r.fixed.x!==void 0&&typeof r.fixed.x=="boolean"&&(e.fixed.x=r.fixed.x),r.fixed.y!==void 0&&typeof r.fixed.y=="boolean"&&(e.fixed.y=r.fixed.y))),n===!0&&r.font===null&&(e.font=hl(i.font)),Wt.updateGroupOptions(e,r,s),r.scaling!==void 0&&Fi(e.scaling,r.scaling,"label",i.scaling)}getFormattingValues(){const e={color:this.options.color.background,opacity:this.options.opacity,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};if(this.selected||this.hover?this.chooser===!0?this.selected?(this.options.borderWidthSelected!=null?e.borderWidth=this.options.borderWidthSelected:e.borderWidth*=2,e.color=this.options.color.highlight.background,e.borderColor=this.options.color.highlight.border,e.shadow=this.options.shadow.enabled):this.hover&&(e.color=this.options.color.hover.background,e.borderColor=this.options.color.hover.border,e.shadow=this.options.shadow.enabled):typeof this.chooser=="function"&&(this.chooser(e,this.options.id,this.selected,this.hover),e.shadow===!1&&(e.shadowColor!==this.options.shadow.color||e.shadowSize!==this.options.shadow.size||e.shadowX!==this.options.shadow.x||e.shadowY!==this.options.shadow.y)&&(e.shadow=!0)):e.shadow=this.options.shadow.enabled,this.options.opacity!==void 0){const r=this.options.opacity;e.borderColor=Wi(e.borderColor,r),e.color=Wi(e.color,r),e.shadowColor=Wi(e.shadowColor,r)}return e}updateLabelModule(e){(this.options.label===void 0||this.options.label===null)&&(this.options.label=""),Wt.updateGroupOptions(this.options,LX(LX({},e),{},{color:e&&e.color||this._localColor||void 0}),this.grouplist);const r=this.grouplist.get(this.options.group,!1),n=[e,this.options,r,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,n),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}updateShape(e){if(e===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new R3e(this.options,this.body,this.labelModule);break;case"circle":this.shape=new M3e(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new A3e(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"custom":this.shape=new $3e(this.options,this.body,this.labelModule,this.options.ctxRenderer);break;case"database":this.shape=new F3e(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new q3e(this.options,this.body,this.labelModule);break;case"dot":this.shape=new L3e(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new FX(this.options,this.body,this.labelModule);break;case"icon":this.shape=new B3e(this.options,this.body,this.labelModule);break;case"image":this.shape=new z3e(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new W3e(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new V3e(this.options,this.body,this.labelModule);break;case"star":this.shape=new U3e(this.options,this.body,this.labelModule);break;case"text":this.shape=new H3e(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new K3e(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new G3e(this.options,this.body,this.labelModule);break;default:this.shape=new FX(this.options,this.body,this.labelModule);break}this.needsRefresh()}select(){this.selected=!0,this.needsRefresh()}unselect(){this.selected=!1,this.needsRefresh()}needsRefresh(){this.shape.refreshNeeded=!0}getTitle(){return this.options.title}distanceToBorder(e,r){return this.shape.distanceToBorder(e,r)}isFixed(){return this.options.fixed.x&&this.options.fixed.y}isSelected(){return this.selected}getValue(){return this.options.value}getLabelSize(){return this.labelModule.size()}setValueRange(e,r,n){if(this.options.value!==void 0){const i=this.options.scaling.customScalingFunction(e,r,n,this.options.value),s=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){const o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*o}this.options.size=this.options.scaling.min+i*s}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}draw(e){const r=this.getFormattingValues();return this.shape.draw(e,this.x,this.y,this.selected,this.hover,r)||{}}updateBoundingBox(e){this.shape.updateBoundingBox(this.x,this.y,e)}resize(e){const r=this.getFormattingValues();this.shape.resize(e,this.selected,this.hover,r)}getItemsOnPoint(e){const r=[];return this.labelModule.visible()&&XR(this.labelModule.getSize(),e)&&r.push({nodeId:this.id,labelId:0}),XR(this.shape.boundingBox,e)&&r.push({nodeId:this.id}),r}isOverlappingWith(e){return this.shape.left<e.right&&this.shape.left+this.shape.width>e.left&&this.shape.top<e.bottom&&this.shape.top+this.shape.height>e.top}isBoundingBoxOverlappingWith(e){return this.shape.boundingBox.left<e.right&&this.shape.boundingBox.right>e.left&&this.shape.boundingBox.top<e.bottom&&this.shape.boundingBox.bottom>e.top}static checkMass(e,r){if(e.mass!==void 0&&e.mass<=0){let n="";r!==void 0&&(n=" in node id: "+r),console.error("%cNegative or zero mass disallowed"+n+", setting mass to 1.",vce),e.mass=1}}}class Y3e{constructor(e,r,n,i){var s;if(this.body=e,this.images=r,this.groups=n,this.layoutEngine=i,this.body.functions.createNode=de(s=this.create).call(s,this),this.nodesListeners={add:(o,a)=>{this.add(a.items)},update:(o,a)=>{this.update(a.items,a.data,a.oldData)},remove:(o,a)=>{this.remove(a.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:void 0,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},opacity:void 0,fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(o,a,l,u){if(a===o)return .5;{const d=1/(a-o);return Math.max(0,(u-o)*d)}}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1,coordinateOrigin:"center"},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=hl(this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e,r;this.body.emitter.on("refreshNodes",de(e=this.refresh).call(e,this)),this.body.emitter.on("refresh",de(r=this.refresh).call(r,this)),this.body.emitter.on("destroy",()=>{nt(this.nodesListeners,(n,i)=>{this.body.data.nodes&&this.body.data.nodes.off(i,n)}),delete this.body.functions.createNode,delete this.nodesListeners.add,delete this.nodesListeners.update,delete this.nodesListeners.remove,delete this.nodesListeners})}setOptions(e){if(e!==void 0){if(Wt.parseOptions(this.options,e),e.opacity!==void 0&&(QR(e.opacity)||!lc(e.opacity)||e.opacity<0||e.opacity>1?console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity):this.options.opacity=e.opacity),e.shape!==void 0)for(const r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&this.body.nodes[r].updateShape();if(typeof e.font<"u"||typeof e.widthConstraint<"u"||typeof e.heightConstraint<"u")for(const r of sr(this.body.nodes))this.body.nodes[r].updateLabelModule(),this.body.nodes[r].needsRefresh();if(e.size!==void 0)for(const r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&this.body.nodes[r].needsRefresh();(e.hidden!==void 0||e.physics!==void 0)&&this.body.emitter.emit("_dataChanged")}}setData(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.data.nodes;if(hle("id",e))this.body.data.nodes=e;else if(cr(e))this.body.data.nodes=new gh,this.body.data.nodes.add(e);else if(!e)this.body.data.nodes=new gh;else throw new TypeError("Array or DataSet expected");if(n&&nt(this.nodesListeners,function(i,s){n.off(s,i)}),this.body.nodes={},this.body.data.nodes){const i=this;nt(this.nodesListeners,function(o,a){i.body.data.nodes.on(a,o)});const s=this.body.data.nodes.getIds();this.add(s,!0)}r===!1&&this.body.emitter.emit("_dataChanged")}add(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n;const i=[];for(let s=0;s<e.length;s++){n=e[s];const o=this.body.data.nodes.get(n),a=this.create(o);i.push(a),this.body.nodes[n]=a}this.layoutEngine.positionInitially(i),r===!1&&this.body.emitter.emit("_dataChanged")}update(e,r,n){const i=this.body.nodes;let s=!1;for(let o=0;o<e.length;o++){const a=e[o];let l=i[a];const u=r[o];l!==void 0?l.setOptions(u)&&(s=!0):(s=!0,l=this.create(u),i[a]=l)}!s&&n!==void 0&&(s=i5e(r).call(r,function(o,a){const l=n[a];return l&&l.level!==o.level})),s===!0?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}remove(e){const r=this.body.nodes;for(let n=0;n<e.length;n++){const i=e[n];delete r[i]}this.body.emitter.emit("_dataChanged")}create(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Wt;return new r(e,this.body,this.images,this.groups,this.options,this.defaultOptions)}refresh(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;nt(this.body.nodes,(r,n)=>{const i=this.body.data.nodes.get(n);i!==void 0&&(e===!0&&r.setOptions({x:null,y:null}),r.setOptions({fixed:!1}),r.setOptions(i))})}getPositions(e){const r={};if(e!==void 0){if(cr(e)===!0){for(let n=0;n<e.length;n++)if(this.body.nodes[e[n]]!==void 0){const i=this.body.nodes[e[n]];r[e[n]]={x:Math.round(i.x),y:Math.round(i.y)}}}else if(this.body.nodes[e]!==void 0){const n=this.body.nodes[e];r[e]={x:Math.round(n.x),y:Math.round(n.y)}}}else for(let n=0;n<this.body.nodeIndices.length;n++){const i=this.body.nodes[this.body.nodeIndices[n]];r[this.body.nodeIndices[n]]={x:Math.round(i.x),y:Math.round(i.y)}}return r}getPosition(e){if(e==null)throw new TypeError("No id was specified for getPosition method.");if(this.body.nodes[e]==null)throw new ReferenceError("NodeId provided for getPosition does not exist. Provided: ".concat(e));return{x:Math.round(this.body.nodes[e].x),y:Math.round(this.body.nodes[e].y)}}storePositions(){const e=[],r=this.body.data.nodes.getDataSet();for(const n of r.get()){const i=n.id,s=this.body.nodes[i],o=Math.round(s.x),a=Math.round(s.y);(n.x!==o||n.y!==a)&&e.push({id:i,x:o,y:a})}r.update(e)}getBoundingBox(e){if(this.body.nodes[e]!==void 0)return this.body.nodes[e].shape.boundingBox}getConnectedNodes(e,r){const n=[];if(this.body.nodes[e]!==void 0){const i=this.body.nodes[e],s={};for(let o=0;o<i.edges.length;o++){const a=i.edges[o];r!=="to"&&a.toId==i.id?s[a.fromId]===void 0&&(n.push(a.fromId),s[a.fromId]=!0):r!=="from"&&a.fromId==i.id&&s[a.toId]===void 0&&(n.push(a.toId),s[a.toId]=!0)}}return n}getConnectedEdges(e){const r=[];if(this.body.nodes[e]!==void 0){const n=this.body.nodes[e];for(let i=0;i<n.edges.length;i++)r.push(n.edges[i].id)}else console.error("NodeId provided for getConnectedEdges does not exist. Provided: ",e);return r}moveNode(e,r,n){this.body.nodes[e]!==void 0?(this.body.nodes[e].x=Number(r),this.body.nodes[e].y=Number(n),qo(()=>{this.body.emitter.emit("startSimulation")},0)):console.error("Node id supplied to moveNode does not exist. Provided: ",e)}}var BX={},zX;function Q3e(){if(zX)return BX;zX=1;var t=Pe(),e=Math.hypot,r=Math.abs,n=Math.sqrt,i=!!e&&e(1/0,NaN)!==1/0;return t({target:"Math",stat:!0,arity:2,forced:i},{hypot:function(o,a){for(var l=0,u=0,d=arguments.length,h=0,f,p;u<d;)f=r(arguments[u++]),h<f?(p=h/f,l=l*p*p+1,h=f):f>0?(p=f/h,l+=p*p):l+=f;return h===1/0?1/0:h*n(l)}}),BX}var _O,WX;function X3e(){if(WX)return _O;WX=1,Q3e();var t=_t();return _O=t.Math.hypot,_O}var NO,VX;function J3e(){if(VX)return NO;VX=1;var t=X3e();return NO=t,NO}var CO,UX;function Z3e(){return UX||(UX=1,CO=J3e()),CO}var eFe=Z3e(),tFe=ze(eFe);class fr{static transform(e,r){cr(e)||(e=[e]);const n=r.point.x,i=r.point.y,s=r.angle,o=r.length;for(let a=0;a<e.length;++a){const l=e[a],u=l.x*Math.cos(s)-l.y*Math.sin(s),d=l.x*Math.sin(s)+l.y*Math.cos(s);l.x=n+o*u,l.y=i+o*d}}static drawPath(e,r){e.beginPath(),e.moveTo(r[0].x,r[0].y);for(let n=1;n<r.length;++n)e.lineTo(r[n].x,r[n].y);e.closePath()}}let rFe=class extends fr{static draw(e,r){if(r.image){e.save(),e.translate(r.point.x,r.point.y),e.rotate(Math.PI/2+r.angle);const n=r.imageWidth!=null?r.imageWidth:r.image.width,i=r.imageHeight!=null?r.imageHeight:r.image.height;r.image.drawImageAtPosition(e,1,-n/2,0,n,i),e.restore()}return!1}};class nFe extends fr{static draw(e,r){const n=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];return fr.transform(n,r),fr.drawPath(e,n),!0}}class iFe{static draw(e,r){const n=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];return fr.transform(n,r),fr.drawPath(e,n),!0}}class sFe{static draw(e,r){const n={x:-.4,y:0};fr.transform(n,r),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";const i=Math.PI,s=r.angle-i/2,o=r.angle+i/2;return e.beginPath(),e.arc(n.x,n.y,r.length*.4,s,o,!1),e.stroke(),!0}}class oFe{static draw(e,r){const n={x:-.3,y:0};fr.transform(n,r),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";const i=Math.PI,s=r.angle+i/2,o=r.angle+3*i/2;return e.beginPath(),e.arc(n.x,n.y,r.length*.4,s,o,!1),e.stroke(),!0}}class aFe{static draw(e,r){const n=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];return fr.transform(n,r),fr.drawPath(e,n),!0}}class lFe{static draw(e,r){const n=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];return fr.transform(n,r),fr.drawPath(e,n),!0}}class cFe{static draw(e,r){const n={x:-.4,y:0};return fr.transform(n,r),HD(e,n.x,n.y,r.length*.4),!0}}class uFe{static draw(e,r){const n=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];return fr.transform(n,r),fr.drawPath(e,n),!0}}class dFe{static draw(e,r){const n=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];return fr.transform(n,r),fr.drawPath(e,n),!0}}class hFe{static draw(e,r){const n=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];return fr.transform(n,r),fr.drawPath(e,n),!0}}class fFe{static draw(e,r){const n=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];return fr.transform(n,r),fr.drawPath(e,n),!0}}class Dce{static draw(e,r){let n;switch(r.type&&(n=r.type.toLowerCase()),n){case"image":return rFe.draw(e,r);case"circle":return cFe.draw(e,r);case"box":return dFe.draw(e,r);case"crow":return iFe.draw(e,r);case"curve":return sFe.draw(e,r);case"diamond":return hFe.draw(e,r);case"inv_curve":return oFe.draw(e,r);case"triangle":return aFe.draw(e,r);case"inv_triangle":return lFe.draw(e,r);case"bar":return uFe.draw(e,r);case"vee":return fFe.draw(e,r);case"arrow":default:return nFe.draw(e,r)}}}function HX(t,e){var r=sr(t);if(Sl){var n=Sl(t);e&&(n=ti(n).call(n,function(i){return Dl(t,i).enumerable})),r.push.apply(r,n)}return r}function KX(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?It(r=HX(Object(i),!0)).call(r,function(s){Po(t,s,i[s])}):El?y1(t,El(i)):It(n=HX(Object(i))).call(n,function(s){v1(t,s,Dl(i,s))})}return t}class $ce{constructor(e,r,n){Po(this,"color",{}),Po(this,"colorDirty",!0),Po(this,"hoverWidth",1.5),Po(this,"selectionWidth",2),this._body=r,this._labelModule=n,this.setOptions(e),this.fromPoint=this.from,this.toPoint=this.to}connect(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to]}cleanup(){return!1}setOptions(e){this.options=e,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.id=this.options.id}drawLine(e,r,n,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.getViaNode();e.strokeStyle=this.getColor(e,r),e.lineWidth=r.width,r.dashes!==!1?this._drawDashedLine(e,r,s):this._drawLine(e,r,s)}_drawLine(e,r,n,i,s){if(this.from!=this.to)this._line(e,r,n,i,s);else{const[o,a,l]=this._getCircleData(e);this._circle(e,r,o,a,l)}}_drawDashedLine(e,r,n,i,s){e.lineCap="round";const o=cr(r.dashes)?r.dashes:[5,5];if(e.setLineDash!==void 0){if(e.save(),e.setLineDash(o),e.lineDashOffset=0,this.from!=this.to)this._line(e,r,n);else{const[a,l,u]=this._getCircleData(e);this._circle(e,r,a,l,u)}e.setLineDash([0]),e.lineDashOffset=0,e.restore()}else{if(this.from!=this.to)Sle(e,this.from.x,this.from.y,this.to.x,this.to.y,o);else{const[a,l,u]=this._getCircleData(e);this._circle(e,r,a,l,u)}this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}}findBorderPosition(e,r,n){return this.from!=this.to?this._findBorderPosition(e,r,n):this._findBorderPositionCircle(e,r,n)}findBorderPositions(e){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,e),to:this._findBorderPosition(this.to,e)};{var r;const[n,i]=Ws(r=this._getCircleData(e)).call(r,0,2);return{from:this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:.6,high:.8,direction:1})}}}_getCircleData(e){const r=this.options.selfReference.size;e!==void 0&&this.from.shape.width===void 0&&this.from.shape.resize(e);const n=Mce(e,this.options.selfReference.angle,r,this.from);return[n.x,n.y,r]}_pointOnCircle(e,r,n,i){const s=i*2*Math.PI;return{x:e+n*Math.cos(s),y:r-n*Math.sin(s)}}_findBorderPositionCircle(e,r,n){const i=n.x,s=n.y;let o=n.low,a=n.high;const l=n.direction,u=10,d=this.options.selfReference.size,h=.05;let f,p=(o+a)*.5,m=0;this.options.arrowStrikethrough===!0&&(l===-1?m=this.options.endPointOffset.from:l===1&&(m=this.options.endPointOffset.to));let g=0;do{p=(o+a)*.5,f=this._pointOnCircle(i,s,d,p);const y=Math.atan2(e.y-f.y,e.x-f.x),v=e.distanceToBorder(r,y)+m,b=Math.sqrt(Math.pow(f.x-e.x,2)+Math.pow(f.y-e.y,2)),w=v-b;if(Math.abs(w)<h)break;w>0?l>0?o=p:a=p:l>0?a=p:o=p,++g}while(o<=a&&g<u);return KX(KX({},f),{},{t:p})}getLineWidth(e,r){return e===!0?Math.max(this.selectionWidth,.3/this._body.view.scale):r===!0?Math.max(this.hoverWidth,.3/this._body.view.scale):Math.max(this.options.width,.3/this._body.view.scale)}getColor(e,r){if(r.inheritsColor!==!1){if(r.inheritsColor==="both"&&this.from.id!==this.to.id){const n=e.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y);let i=this.from.options.color.highlight.border,s=this.to.options.color.highlight.border;return this.from.selected===!1&&this.to.selected===!1?(i=Wi(this.from.options.color.border,r.opacity),s=Wi(this.to.options.color.border,r.opacity)):this.from.selected===!0&&this.to.selected===!1?s=this.to.options.color.border:this.from.selected===!1&&this.to.selected===!0&&(i=this.from.options.color.border),n.addColorStop(0,i),n.addColorStop(1,s),n}return r.inheritsColor==="to"?Wi(this.to.options.color.border,r.opacity):Wi(this.from.options.color.border,r.opacity)}else return Wi(r.color,r.opacity)}_circle(e,r,n,i,s){this.enableShadow(e,r);let o=0,a=Math.PI*2;if(!this.options.selfReference.renderBehindTheNode){const l=this.options.selfReference.angle,u=this.options.selfReference.angle+Math.PI,d=this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:l,high:u,direction:-1}),h=this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:l,high:u,direction:1});o=Math.atan2(d.y-i,d.x-n),a=Math.atan2(h.y-i,h.x-n)}e.beginPath(),e.arc(n,i,s,o,a,!1),e.stroke(),this.disableShadow(e,r)}getDistanceToEdge(e,r,n,i,s,o){if(this.from!=this.to)return this._getDistanceToEdge(e,r,n,i,s,o);{const[a,l,u]=this._getCircleData(void 0),d=a-s,h=l-o;return Math.abs(Math.sqrt(d*d+h*h)-u)}}_getDistanceToLine(e,r,n,i,s,o){const a=n-e,l=i-r,u=a*a+l*l;let d=((s-e)*a+(o-r)*l)/u;d>1?d=1:d<0&&(d=0);const h=e+d*a,f=r+d*l,p=h-s,m=f-o;return Math.sqrt(p*p+m*m)}getArrowData(e,r,n,i,s,o){let a,l,u,d,h,f,p;const m=o.width;r==="from"?(u=this.from,d=this.to,h=o.fromArrowScale<0,f=Math.abs(o.fromArrowScale),p=o.fromArrowType):r==="to"?(u=this.to,d=this.from,h=o.toArrowScale<0,f=Math.abs(o.toArrowScale),p=o.toArrowType):(u=this.to,d=this.from,h=o.middleArrowScale<0,f=Math.abs(o.middleArrowScale),p=o.middleArrowType);const g=15*f+3*m;if(u!=d){const w=tFe(u.x-d.x,u.y-d.y),x=g/w;if(r!=="middle")if(this.options.smooth.enabled===!0){const S=this._findBorderPosition(u,e,{via:n}),E=this.getPoint(S.t+x*(r==="from"?1:-1),n);a=Math.atan2(S.y-E.y,S.x-E.x),l=S}else a=Math.atan2(u.y-d.y,u.x-d.x),l=this._findBorderPosition(u,e);else{const S=(h?-x:x)/2,E=this.getPoint(.5+S,n),N=this.getPoint(.5-S,n);a=Math.atan2(E.y-N.y,E.x-N.x),l=this.getPoint(.5,n)}}else{const[w,x,S]=this._getCircleData(e);if(r==="from"){const E=this.options.selfReference.angle,N=this.options.selfReference.angle+Math.PI,_=this._findBorderPositionCircle(this.from,e,{x:w,y:x,low:E,high:N,direction:-1});a=_.t*-2*Math.PI+1.5*Math.PI+.1*Math.PI,l=_}else if(r==="to"){const E=this.options.selfReference.angle,N=this.options.selfReference.angle+Math.PI,_=this._findBorderPositionCircle(this.from,e,{x:w,y:x,low:E,high:N,direction:1});a=_.t*-2*Math.PI+1.5*Math.PI-1.1*Math.PI,l=_}else{const E=this.options.selfReference.angle/(2*Math.PI);l=this._pointOnCircle(w,x,S,E),a=E*-2*Math.PI+1.5*Math.PI+.1*Math.PI}}const y=l.x-g*.9*Math.cos(a),v=l.y-g*.9*Math.sin(a);return{point:l,core:{x:y,y:v},angle:a,length:g,type:p}}drawArrowHead(e,r,n,i,s){e.strokeStyle=this.getColor(e,r),e.fillStyle=e.strokeStyle,e.lineWidth=r.width,Dce.draw(e,s)&&(this.enableShadow(e,r),mg(e).call(e),this.disableShadow(e,r))}enableShadow(e,r){r.shadow===!0&&(e.shadowColor=r.shadowColor,e.shadowBlur=r.shadowSize,e.shadowOffsetX=r.shadowX,e.shadowOffsetY=r.shadowY)}disableShadow(e,r){r.shadow===!0&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}drawBackground(e,r){if(r.background!==!1){const n={strokeStyle:e.strokeStyle,lineWidth:e.lineWidth,dashes:e.dashes};e.strokeStyle=r.backgroundColor,e.lineWidth=r.backgroundSize,this.setStrokeDashed(e,r.backgroundDashes),e.stroke(),e.strokeStyle=n.strokeStyle,e.lineWidth=n.lineWidth,e.dashes=n.dashes,this.setStrokeDashed(e,r.dashes)}}setStrokeDashed(e,r){if(r!==!1)if(e.setLineDash!==void 0){const n=cr(r)?r:[5,5];e.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.");else e.setLineDash!==void 0?e.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}function GX(t,e){var r=sr(t);if(Sl){var n=Sl(t);e&&(n=ti(n).call(n,function(i){return Dl(t,i).enumerable})),r.push.apply(r,n)}return r}function YX(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?It(r=GX(Object(i),!0)).call(r,function(s){Po(t,s,i[s])}):El?y1(t,El(i)):It(n=GX(Object(i))).call(n,function(s){v1(t,s,Dl(i,s))})}return t}class x$ extends $ce{constructor(e,r,n){super(e,r,n)}_findBorderPositionBezier(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this._getViaCoordinates();const i=10,s=.2;let o=!1,a=1,l=0,u=this.to,d,h,f=this.options.endPointOffset?this.options.endPointOffset.to:0;e.id===this.from.id&&(u=this.from,o=!0,f=this.options.endPointOffset?this.options.endPointOffset.from:0),this.options.arrowStrikethrough===!1&&(f=0);let p=0;do{h=(l+a)*.5,d=this.getPoint(h,n);const m=Math.atan2(u.y-d.y,u.x-d.x),g=u.distanceToBorder(r,m)+f,y=Math.sqrt(Math.pow(d.x-u.x,2)+Math.pow(d.y-u.y,2)),v=g-y;if(Math.abs(v)<s)break;v<0?o===!1?l=h:a=h:o===!1?a=h:l=h,++p}while(l<=a&&p<i);return YX(YX({},d),{},{t:h})}_getDistanceToBezierEdge(e,r,n,i,s,o,a){let l=1e9,u,d,h,f,p,m=e,g=r;for(d=1;d<10;d++)h=.1*d,f=Math.pow(1-h,2)*e+2*h*(1-h)*a.x+Math.pow(h,2)*n,p=Math.pow(1-h,2)*r+2*h*(1-h)*a.y+Math.pow(h,2)*i,d>0&&(u=this._getDistanceToLine(m,g,f,p,s,o),l=u<l?u:l),m=f,g=p;return l}_bezierCurve(e,r,n,i){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),n!=null&&n.x!=null?i!=null&&i.x!=null?e.bezierCurveTo(n.x,n.y,i.x,i.y,this.toPoint.x,this.toPoint.y):e.quadraticCurveTo(n.x,n.y,this.toPoint.x,this.toPoint.y):e.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(e,r),this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}getViaNode(){return this._getViaCoordinates()}}class QX extends x${constructor(e,r,n){super(e,r,n),Po(this,"via",this.via),this._boundFunction=()=>{this.positionBezierNode()},this._body.emitter.on("_repositionBezierNodes",this._boundFunction)}setOptions(e){super.setOptions(e);let r=!1;this.options.physics!==e.physics&&(r=!0),this.options=e,this.id=this.options.id,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.setupSupportNode(),this.connect(),r===!0&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}connect(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.from===void 0||this.to===void 0||this.options.physics===!1?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}cleanup(){return this._body.emitter.off("_repositionBezierNodes",this._boundFunction),this.via!==void 0?(delete this._body.nodes[this.via.id],this.via=void 0,!0):!1}setupSupportNode(){if(this.via===void 0){const e="edgeId:"+this.id,r=this._body.functions.createNode({id:e,shape:"circle",physics:!0,hidden:!0});this._body.nodes[e]=r,this.via=r,this.via.parentEdgeId=this.id,this.positionBezierNode()}}positionBezierNode(){this.via!==void 0&&this.from!==void 0&&this.to!==void 0?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):this.via!==void 0&&(this.via.x=0,this.via.y=0)}_line(e,r,n){this._bezierCurve(e,r,n)}_getViaCoordinates(){return this.via}getViaNode(){return this.via}getPoint(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.via;if(this.from===this.to){const[n,i,s]=this._getCircleData(),o=2*Math.PI*(1-e);return{x:n+s*Math.sin(o),y:i+s-s*(1-Math.cos(o))}}else return{x:Math.pow(1-e,2)*this.fromPoint.x+2*e*(1-e)*r.x+Math.pow(e,2)*this.toPoint.x,y:Math.pow(1-e,2)*this.fromPoint.y+2*e*(1-e)*r.y+Math.pow(e,2)*this.toPoint.y}}_findBorderPosition(e,r){return this._findBorderPositionBezier(e,r,this.via)}_getDistanceToEdge(e,r,n,i,s,o){return this._getDistanceToBezierEdge(e,r,n,i,s,o,this.via)}}class XX extends x${constructor(e,r,n){super(e,r,n)}_line(e,r,n){this._bezierCurve(e,r,n)}getViaNode(){return this._getViaCoordinates()}_getViaCoordinates(){const e=this.options.smooth.roundness,r=this.options.smooth.type;let n=Math.abs(this.from.x-this.to.x),i=Math.abs(this.from.y-this.to.y);if(r==="discrete"||r==="diagonalCross"){let s,o;n<=i?s=o=e*i:s=o=e*n,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(o=-o);let a=this.from.x+s,l=this.from.y+o;return r==="discrete"&&(n<=i?a=n<e*i?this.from.x:a:l=i<e*n?this.from.y:l),{x:a,y:l}}else if(r==="straightCross"){let s=(1-e)*n,o=(1-e)*i;return n<=i?(s=0,this.from.y<this.to.y&&(o=-o)):(this.from.x<this.to.x&&(s=-s),o=0),{x:this.to.x+s,y:this.to.y+o}}else if(r==="horizontal"){let s=(1-e)*n;return this.from.x<this.to.x&&(s=-s),{x:this.to.x+s,y:this.from.y}}else if(r==="vertical"){let s=(1-e)*i;return this.from.y<this.to.y&&(s=-s),{x:this.from.x,y:this.to.y+s}}else if(r==="curvedCW"){n=this.to.x-this.from.x,i=this.from.y-this.to.y;const s=Math.sqrt(n*n+i*i),o=Math.PI,l=(Math.atan2(i,n)+(e*.5+.5)*o)%(2*o);return{x:this.from.x+(e*.5+.5)*s*Math.sin(l),y:this.from.y+(e*.5+.5)*s*Math.cos(l)}}else if(r==="curvedCCW"){n=this.to.x-this.from.x,i=this.from.y-this.to.y;const s=Math.sqrt(n*n+i*i),o=Math.PI,l=(Math.atan2(i,n)+(-e*.5+.5)*o)%(2*o);return{x:this.from.x+(e*.5+.5)*s*Math.sin(l),y:this.from.y+(e*.5+.5)*s*Math.cos(l)}}else{let s,o;n<=i?s=o=e*i:s=o=e*n,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(o=-o);let a=this.from.x+s,l=this.from.y+o;return n<=i?this.from.x<=this.to.x?a=this.to.x<a?this.to.x:a:a=this.to.x>a?this.to.x:a:this.from.y>=this.to.y?l=this.to.y>l?this.to.y:l:l=this.to.y<l?this.to.y:l,{x:a,y:l}}}_findBorderPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._findBorderPositionBezier(e,r,n.via)}_getDistanceToEdge(e,r,n,i,s,o){let a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(e,r,n,i,s,o,a)}getPoint(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates();const n=e,i=Math.pow(1-n,2)*this.fromPoint.x+2*n*(1-n)*r.x+Math.pow(n,2)*this.toPoint.x,s=Math.pow(1-n,2)*this.fromPoint.y+2*n*(1-n)*r.y+Math.pow(n,2)*this.toPoint.y;return{x:i,y:s}}}class pFe extends x${constructor(e,r,n){super(e,r,n)}_getDistanceToBezierEdge2(e,r,n,i,s,o,a,l){let u=1e9,d=e,h=r;const f=[0,0,0,0];for(let p=1;p<10;p++){const m=.1*p;f[0]=Math.pow(1-m,3),f[1]=3*m*Math.pow(1-m,2),f[2]=3*Math.pow(m,2)*(1-m),f[3]=Math.pow(m,3);const g=f[0]*e+f[1]*a.x+f[2]*l.x+f[3]*n,y=f[0]*r+f[1]*a.y+f[2]*l.y+f[3]*i;if(p>0){const v=this._getDistanceToLine(d,h,g,y,s,o);u=v<u?v:u}d=g,h=y}return u}}class JX extends pFe{constructor(e,r,n){super(e,r,n)}_line(e,r,n){const i=n[0],s=n[1];this._bezierCurve(e,r,i,s)}_getViaCoordinates(){const e=this.from.x-this.to.x,r=this.from.y-this.to.y;let n,i,s,o;const a=this.options.smooth.roundness;return(Math.abs(e)>Math.abs(r)||this.options.smooth.forceDirection===!0||this.options.smooth.forceDirection==="horizontal")&&this.options.smooth.forceDirection!=="vertical"?(i=this.from.y,o=this.to.y,n=this.from.x-a*e,s=this.to.x+a*e):(i=this.from.y-a*r,o=this.to.y+a*r,n=this.from.x,s=this.to.x),[{x:n,y:i},{x:s,y:o}]}getViaNode(){return this._getViaCoordinates()}_findBorderPosition(e,r){return this._findBorderPositionBezier(e,r)}_getDistanceToEdge(e,r,n,i,s,o){let[a,l]=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge2(e,r,n,i,s,o,a,l)}getPoint(e){let[r,n]=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates();const i=e,s=[Math.pow(1-i,3),3*i*Math.pow(1-i,2),3*Math.pow(i,2)*(1-i),Math.pow(i,3)],o=s[0]*this.fromPoint.x+s[1]*r.x+s[2]*n.x+s[3]*this.toPoint.x,a=s[0]*this.fromPoint.y+s[1]*r.y+s[2]*n.y+s[3]*this.toPoint.y;return{x:o,y:a}}}class ZX extends $ce{constructor(e,r,n){super(e,r,n)}_line(e,r){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),e.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}getViaNode(){}getPoint(e){return{x:(1-e)*this.fromPoint.x+e*this.toPoint.x,y:(1-e)*this.fromPoint.y+e*this.toPoint.y}}_findBorderPosition(e,r){let n=this.to,i=this.from;e.id===this.from.id&&(n=this.from,i=this.to);const s=Math.atan2(n.y-i.y,n.x-i.x),o=n.x-i.x,a=n.y-i.y,l=Math.sqrt(o*o+a*a),u=e.distanceToBorder(r,s),d=(l-u)/l;return{x:(1-d)*i.x+d*n.x,y:(1-d)*i.y+d*n.y,t:0}}_getDistanceToEdge(e,r,n,i,s,o){return this._getDistanceToLine(e,r,n,i,s,o)}}class fl{constructor(e,r,n,i,s){if(r===void 0)throw new Error("No body provided");this.options=hl(i),this.globalOptions=i,this.defaultOptions=s,this.body=r,this.imagelist=n,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new Pd(this.body,this.options,!0),this.setOptions(e)}setOptions(e){if(!e)return;let r=typeof e.physics<"u"&&this.options.physics!==e.physics||typeof e.hidden<"u"&&(this.options.hidden||!1)!==(e.hidden||!1)||typeof e.from<"u"&&this.options.from!==e.from||typeof e.to<"u"&&this.options.to!==e.to;fl.parseOptions(this.options,e,!0,this.globalOptions),e.id!==void 0&&(this.id=e.id),e.from!==void 0&&(this.fromId=e.from),e.to!==void 0&&(this.toId=e.to),e.title!==void 0&&(this.title=e.title),e.value!==void 0&&(e.value=Rce(e.value));const n=[e,this.options,this.defaultOptions];return this.chooser=v$("edge",n),this.updateLabelModule(e),r=this.updateEdgeType()||r,this._setInteractionWidths(),this.connect(),r}static parseOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(lf(["endPointOffset","arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","selfReference","to","title","value","width","font","chosen","widthConstraint"],e,r,n),r.endPointOffset!==void 0&&r.endPointOffset.from!==void 0&&(lc(r.endPointOffset.from)?e.endPointOffset.from=r.endPointOffset.from:(e.endPointOffset.from=i.endPointOffset.from!==void 0?i.endPointOffset.from:0,console.error("endPointOffset.from is not a valid number"))),r.endPointOffset!==void 0&&r.endPointOffset.to!==void 0&&(lc(r.endPointOffset.to)?e.endPointOffset.to=r.endPointOffset.to:(e.endPointOffset.to=i.endPointOffset.to!==void 0?i.endPointOffset.to:0,console.error("endPointOffset.to is not a valid number"))),q0(r.label)?e.label=r.label:q0(e.label)||(e.label=void 0),Fi(e,r,"smooth",i),Fi(e,r,"shadow",i),Fi(e,r,"background",i),r.dashes!==void 0&&r.dashes!==null?e.dashes=r.dashes:n===!0&&r.dashes===null&&(e.dashes=Tc(i.dashes)),r.scaling!==void 0&&r.scaling!==null?(r.scaling.min!==void 0&&(e.scaling.min=r.scaling.min),r.scaling.max!==void 0&&(e.scaling.max=r.scaling.max),Fi(e.scaling,r.scaling,"label",i.scaling)):n===!0&&r.scaling===null&&(e.scaling=Tc(i.scaling)),r.arrows!==void 0&&r.arrows!==null)if(typeof r.arrows=="string"){const a=r.arrows.toLowerCase();e.arrows.to.enabled=wt(a).call(a,"to")!=-1,e.arrows.middle.enabled=wt(a).call(a,"middle")!=-1,e.arrows.from.enabled=wt(a).call(a,"from")!=-1}else if(typeof r.arrows=="object")Fi(e.arrows,r.arrows,"to",i.arrows),Fi(e.arrows,r.arrows,"middle",i.arrows),Fi(e.arrows,r.arrows,"from",i.arrows);else throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+pg(r.arrows));else n===!0&&r.arrows===null&&(e.arrows=Tc(i.arrows));if(r.color!==void 0&&r.color!==null){const a=Td(r.color)?{color:r.color,highlight:r.color,hover:r.color,inherit:!1,opacity:1}:r.color,l=e.color;if(s)At(l,i.color,!1,n);else for(const u in l)Object.prototype.hasOwnProperty.call(l,u)&&delete l[u];if(Td(l))l.color=l,l.highlight=l,l.hover=l,l.inherit=!1,a.opacity===void 0&&(l.opacity=1);else{let u=!1;a.color!==void 0&&(l.color=a.color,u=!0),a.highlight!==void 0&&(l.highlight=a.highlight,u=!0),a.hover!==void 0&&(l.hover=a.hover,u=!0),a.inherit!==void 0&&(l.inherit=a.inherit),a.opacity!==void 0&&(l.opacity=Math.min(1,Math.max(0,a.opacity))),u===!0?l.inherit=!1:l.inherit===void 0&&(l.inherit="from")}}else n===!0&&r.color===null&&(e.color=hl(i.color));n===!0&&r.font===null&&(e.font=hl(i.font)),Object.prototype.hasOwnProperty.call(r,"selfReferenceSize")&&(console.warn("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),e.selfReference.size=r.selfReferenceSize)}getFormattingValues(){const e=this.options.arrows.to===!0||this.options.arrows.to.enabled===!0,r=this.options.arrows.from===!0||this.options.arrows.from.enabled===!0,n=this.options.arrows.middle===!0||this.options.arrows.middle.enabled===!0,i=this.options.color.inherit,s={toArrow:e,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,toArrowSrc:this.options.arrows.to.src,toArrowImageWidth:this.options.arrows.to.imageWidth,toArrowImageHeight:this.options.arrows.to.imageHeight,middleArrow:n,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,middleArrowSrc:this.options.arrows.middle.src,middleArrowImageWidth:this.options.arrows.middle.imageWidth,middleArrowImageHeight:this.options.arrows.middle.imageHeight,fromArrow:r,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,fromArrowSrc:this.options.arrows.from.src,fromArrowImageWidth:this.options.arrows.from.imageWidth,fromArrowImageHeight:this.options.arrows.from.imageHeight,arrowStrikethrough:this.options.arrowStrikethrough,color:i?void 0:this.options.color.color,inheritsColor:i,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover)if(this.chooser===!0){if(this.selected){const o=this.options.selectionWidth;typeof o=="function"?s.width=o(s.width):typeof o=="number"&&(s.width+=o),s.width=Math.max(s.width,.3/this.body.view.scale),s.color=this.options.color.highlight,s.shadow=this.options.shadow.enabled}else if(this.hover){const o=this.options.hoverWidth;typeof o=="function"?s.width=o(s.width):typeof o=="number"&&(s.width+=o),s.width=Math.max(s.width,.3/this.body.view.scale),s.color=this.options.color.hover,s.shadow=this.options.shadow.enabled}}else typeof this.chooser=="function"&&(this.chooser(s,this.options.id,this.selected,this.hover),s.color!==void 0&&(s.inheritsColor=!1),s.shadow===!1&&(s.shadowColor!==this.options.shadow.color||s.shadowSize!==this.options.shadow.size||s.shadowX!==this.options.shadow.x||s.shadowY!==this.options.shadow.y)&&(s.shadow=!0));else s.shadow=this.options.shadow.enabled,s.width=Math.max(s.width,.3/this.body.view.scale);return s}updateLabelModule(e){const r=[e,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,r),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}updateEdgeType(){const e=this.options.smooth;let r=!1,n=!0;return this.edgeType!==void 0&&((this.edgeType instanceof QX&&e.enabled===!0&&e.type==="dynamic"||this.edgeType instanceof JX&&e.enabled===!0&&e.type==="cubicBezier"||this.edgeType instanceof XX&&e.enabled===!0&&e.type!=="dynamic"&&e.type!=="cubicBezier"||this.edgeType instanceof ZX&&e.type.enabled===!1)&&(n=!1),n===!0&&(r=this.cleanup())),n===!0?e.enabled===!0?e.type==="dynamic"?(r=!0,this.edgeType=new QX(this.options,this.body,this.labelModule)):e.type==="cubicBezier"?this.edgeType=new JX(this.options,this.body,this.labelModule):this.edgeType=new XX(this.options,this.body,this.labelModule):this.edgeType=new ZX(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),r}connect(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=this.from!==void 0&&this.to!==void 0,this.connected===!0?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}disconnect(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}getTitle(){return this.title}isSelected(){return this.selected}getValue(){return this.options.value}setValueRange(e,r,n){if(this.options.value!==void 0){const i=this.options.scaling.customScalingFunction(e,r,n,this.options.value),s=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){const o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*o}this.options.width=this.options.scaling.min+i*s}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}_setInteractionWidths(){typeof this.options.hoverWidth=="function"?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,typeof this.options.selectionWidth=="function"?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}draw(e){const r=this.getFormattingValues();if(r.hidden)return;const n=this.edgeType.getViaNode();this.edgeType.drawLine(e,r,this.selected,this.hover,n),this.drawLabel(e,n)}drawArrows(e){const r=this.getFormattingValues();if(r.hidden)return;const n=this.edgeType.getViaNode(),i={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,r.fromArrow&&(i.from=this.edgeType.getArrowData(e,"from",n,this.selected,this.hover,r),r.arrowStrikethrough===!1&&(this.edgeType.fromPoint=i.from.core),r.fromArrowSrc&&(i.from.image=this.imagelist.load(r.fromArrowSrc)),r.fromArrowImageWidth&&(i.from.imageWidth=r.fromArrowImageWidth),r.fromArrowImageHeight&&(i.from.imageHeight=r.fromArrowImageHeight)),r.toArrow&&(i.to=this.edgeType.getArrowData(e,"to",n,this.selected,this.hover,r),r.arrowStrikethrough===!1&&(this.edgeType.toPoint=i.to.core),r.toArrowSrc&&(i.to.image=this.imagelist.load(r.toArrowSrc)),r.toArrowImageWidth&&(i.to.imageWidth=r.toArrowImageWidth),r.toArrowImageHeight&&(i.to.imageHeight=r.toArrowImageHeight)),r.middleArrow&&(i.middle=this.edgeType.getArrowData(e,"middle",n,this.selected,this.hover,r),r.middleArrowSrc&&(i.middle.image=this.imagelist.load(r.middleArrowSrc)),r.middleArrowImageWidth&&(i.middle.imageWidth=r.middleArrowImageWidth),r.middleArrowImageHeight&&(i.middle.imageHeight=r.middleArrowImageHeight)),r.fromArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.from),r.middleArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.middle),r.toArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.to)}drawLabel(e,r){if(this.options.label!==void 0){const n=this.from,i=this.to;this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(e,this.selected,this.hover);let s;if(n.id!=i.id){this.labelModule.pointToSelf=!1,s=this.edgeType.getPoint(.5,r),e.save();const o=this._getRotation(e);o.angle!=0&&(e.translate(o.x,o.y),e.rotate(o.angle)),this.labelModule.draw(e,s.x,s.y,this.selected,this.hover),e.restore()}else{this.labelModule.pointToSelf=!0;const o=Mce(e,this.options.selfReference.angle,this.options.selfReference.size,n);s=this._pointOnCircle(o.x,o.y,this.options.selfReference.size,this.options.selfReference.angle),this.labelModule.draw(e,s.x,s.y,this.selected,this.hover)}}}getItemsOnPoint(e){const r=[];if(this.labelModule.visible()){const i=this._getRotation();XR(this.labelModule.getSize(),e,i)&&r.push({edgeId:this.id,labelId:0})}const n={left:e.x,top:e.y};return this.isOverlappingWith(n)&&r.push({edgeId:this.id}),r}isOverlappingWith(e){if(this.connected){const n=this.from.x,i=this.from.y,s=this.to.x,o=this.to.y,a=e.left,l=e.top;return this.edgeType.getDistanceToEdge(n,i,s,o,a,l)<10}else return!1}_getRotation(e){const r=this.edgeType.getViaNode(),n=this.edgeType.getPoint(.5,r);e!==void 0&&this.labelModule.calculateLabelSize(e,this.selected,this.hover,n.x,n.y);const i={x:n.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible()||this.options.font.align==="horizontal")return i;const s=this.from.y-this.to.y,o=this.from.x-this.to.x;let a=Math.atan2(s,o);return(a<-1&&o<0||a>0&&o<0)&&(a+=Math.PI),i.angle=a,i}_pointOnCircle(e,r,n,i){return{x:e+n*Math.cos(i),y:r-n*Math.sin(i)}}select(){this.selected=!0}unselect(){this.selected=!1}cleanup(){return this.edgeType.cleanup()}remove(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}endPointsValid(){return this.body.nodes[this.fromId]!==void 0&&this.body.nodes[this.toId]!==void 0}}class mFe{constructor(e,r,n){var i;this.body=e,this.images=r,this.groups=n,this.body.functions.createEdge=de(i=this.create).call(i,this),this.edgesListeners={add:(s,o)=>{this.add(o.items)},update:(s,o)=>{this.update(o.items)},remove:(s,o)=>{this.remove(o.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},endPointOffset:{from:0,to:0},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(s,o,a,l){if(o===s)return .5;{const u=1/(o-s);return Math.max(0,(l-s)*u)}}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},At(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e=this,r,n;this.body.emitter.on("_forceDisableDynamicCurves",function(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i==="dynamic"&&(i="continuous");let o=!1;for(const a in e.body.edges)if(Object.prototype.hasOwnProperty.call(e.body.edges,a)){const l=e.body.edges[a],u=e.body.data.edges.get(a);if(u!=null){const d=u.smooth;d!==void 0&&d.enabled===!0&&d.type==="dynamic"&&(i===void 0?l.setOptions({smooth:!1}):l.setOptions({smooth:{type:i}}),o=!0)}}s===!0&&o===!0&&e.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",()=>{this.reconnectEdges()}),this.body.emitter.on("refreshEdges",de(r=this.refresh).call(r,this)),this.body.emitter.on("refresh",de(n=this.refresh).call(n,this)),this.body.emitter.on("destroy",()=>{nt(this.edgesListeners,(i,s)=>{this.body.data.edges&&this.body.data.edges.off(s,i)}),delete this.body.functions.createEdge,delete this.edgesListeners.add,delete this.edgesListeners.update,delete this.edgesListeners.remove,delete this.edgesListeners})}setOptions(e){if(e!==void 0){fl.parseOptions(this.options,e,!0,this.defaultOptions,!0);let r=!1;if(e.smooth!==void 0)for(const n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&(r=this.body.edges[n].updateEdgeType()||r);if(e.font!==void 0)for(const n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&this.body.edges[n].updateLabelModule();(e.hidden!==void 0||e.physics!==void 0||r===!0)&&this.body.emitter.emit("_dataChanged")}}setData(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.data.edges;if(hle("id",e))this.body.data.edges=e;else if(cr(e))this.body.data.edges=new gh,this.body.data.edges.add(e);else if(!e)this.body.data.edges=new gh;else throw new TypeError("Array or DataSet expected");if(n&&nt(this.edgesListeners,(i,s)=>{n.off(s,i)}),this.body.edges={},this.body.data.edges){nt(this.edgesListeners,(s,o)=>{this.body.data.edges.on(o,s)});const i=this.body.data.edges.getIds();this.add(i,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),r===!1&&this.body.emitter.emit("_dataChanged")}add(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.edges,i=this.body.data.edges;for(let s=0;s<e.length;s++){const o=e[s],a=n[o];a&&a.disconnect();const l=i.get(o,{showInternalIds:!0});n[o]=this.create(l)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),r===!1&&this.body.emitter.emit("_dataChanged")}update(e){const r=this.body.edges,n=this.body.data.edges;let i=!1;for(let s=0;s<e.length;s++){const o=e[s],a=n.get(o),l=r[o];l!==void 0?(l.disconnect(),i=l.setOptions(a)||i,l.connect()):(this.body.edges[o]=this.create(a),i=!0)}i===!0?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}remove(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.length===0)return;const n=this.body.edges;nt(e,i=>{const s=n[i];s!==void 0&&s.remove()}),r&&this.body.emitter.emit("_dataChanged")}refresh(){nt(this.body.edges,(e,r)=>{const n=this.body.data.edges.get(r);n!==void 0&&e.setOptions(n)})}create(e){return new fl(e,this.body,this.images,this.options,this.defaultOptions)}reconnectEdges(){let e;const r=this.body.nodes,n=this.body.edges;for(e in r)Object.prototype.hasOwnProperty.call(r,e)&&(r[e].edges=[]);for(e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=n[e];i.from=null,i.to=null,i.connect()}}getConnectedNodes(e){const r=[];if(this.body.edges[e]!==void 0){const n=this.body.edges[e];n.fromId!==void 0&&r.push(n.fromId),n.toId!==void 0&&r.push(n.toId)}return r}_updateState(){this._addMissingEdges(),this._removeInvalidEdges()}_removeInvalidEdges(){const e=[];nt(this.body.edges,(r,n)=>{const i=this.body.nodes[r.toId],s=this.body.nodes[r.fromId];i!==void 0&&i.isCluster===!0||s!==void 0&&s.isCluster===!0||(i===void 0||s===void 0)&&e.push(n)}),this.remove(e,!1)}_addMissingEdges(){const e=this.body.data.edges;if(e==null)return;const r=this.body.edges,n=[];It(e).call(e,(i,s)=>{r[s]===void 0&&n.push(s)}),this.add(n,!0)}}class Fce{constructor(e,r,n){this.body=e,this.physicsBody=r,this.barnesHutTree,this.setOptions(n),this._rng=p1("BARNES HUT SOLVER")}setOptions(e){this.options=e,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}solve(){if(this.options.gravitationalConstant!==0&&this.physicsBody.physicsNodeIndices.length>0){let e;const r=this.body.nodes,n=this.physicsBody.physicsNodeIndices,i=n.length,s=this._formBarnesHutTree(r,n);this.barnesHutTree=s;for(let o=0;o<i;o++)e=r[n[o]],e.options.mass>0&&this._getForceContributions(s.root,e)}}_getForceContributions(e,r){this._getForceContribution(e.children.NW,r),this._getForceContribution(e.children.NE,r),this._getForceContribution(e.children.SW,r),this._getForceContribution(e.children.SE,r)}_getForceContribution(e,r){if(e.childrenCount>0){const n=e.centerOfMass.x-r.x,i=e.centerOfMass.y-r.y,s=Math.sqrt(n*n+i*i);s*e.calcSize>this.thetaInversed?this._calculateForces(s,n,i,r,e):e.childrenCount===4?this._getForceContributions(e,r):e.children.data.id!=r.id&&this._calculateForces(s,n,i,r,e)}}_calculateForces(e,r,n,i,s){e===0&&(e=.1,r=e),this.overlapAvoidanceFactor<1&&i.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,e-i.shape.radius));const o=this.options.gravitationalConstant*s.mass*i.options.mass/Math.pow(e,3),a=r*o,l=n*o;this.physicsBody.forces[i.id].x+=a,this.physicsBody.forces[i.id].y+=l}_formBarnesHutTree(e,r){let n;const i=r.length;let s=e[r[0]].x,o=e[r[0]].y,a=e[r[0]].x,l=e[r[0]].y;for(let y=1;y<i;y++){const v=e[r[y]],b=v.x,w=v.y;v.options.mass>0&&(b<s&&(s=b),b>a&&(a=b),w<o&&(o=w),w>l&&(l=w))}const u=Math.abs(a-s)-Math.abs(l-o);u>0?(o-=.5*u,l+=.5*u):(s+=.5*u,a-=.5*u);const h=Math.max(1e-5,Math.abs(a-s)),f=.5*h,p=.5*(s+a),m=.5*(o+l),g={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:p-f,maxX:p+f,minY:m-f,maxY:m+f},size:h,calcSize:1/h,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(g.root);for(let y=0;y<i;y++)n=e[r[y]],n.options.mass>0&&this._placeInTree(g.root,n);return g}_updateBranchMass(e,r){const n=e.centerOfMass,i=e.mass+r.options.mass,s=1/i;n.x=n.x*e.mass+r.x*r.options.mass,n.x*=s,n.y=n.y*e.mass+r.y*r.options.mass,n.y*=s,e.mass=i;const o=Math.max(Math.max(r.height,r.radius),r.width);e.maxWidth=e.maxWidth<o?o:e.maxWidth}_placeInTree(e,r,n){(n!=!0||n===void 0)&&this._updateBranchMass(e,r);const i=e.children.NW.range;let s;i.maxX>r.x?i.maxY>r.y?s="NW":s="SW":i.maxY>r.y?s="NE":s="SE",this._placeInRegion(e,r,s)}_placeInRegion(e,r,n){const i=e.children[n];switch(i.childrenCount){case 0:i.children.data=r,i.childrenCount=1,this._updateBranchMass(i,r);break;case 1:i.children.data.x===r.x&&i.children.data.y===r.y?(r.x+=this._rng(),r.y+=this._rng()):(this._splitBranch(i),this._placeInTree(i,r));break;case 4:this._placeInTree(i,r);break}}_splitBranch(e){let r=null;e.childrenCount===1&&(r=e.children.data,e.mass=0,e.centerOfMass.x=0,e.centerOfMass.y=0),e.childrenCount=4,e.children.data=null,this._insertRegion(e,"NW"),this._insertRegion(e,"NE"),this._insertRegion(e,"SW"),this._insertRegion(e,"SE"),r!=null&&this._placeInTree(e,r)}_insertRegion(e,r){let n,i,s,o;const a=.5*e.size;switch(r){case"NW":n=e.range.minX,i=e.range.minX+a,s=e.range.minY,o=e.range.minY+a;break;case"NE":n=e.range.minX+a,i=e.range.maxX,s=e.range.minY,o=e.range.minY+a;break;case"SW":n=e.range.minX,i=e.range.minX+a,s=e.range.minY+a,o=e.range.maxY;break;case"SE":n=e.range.minX+a,i=e.range.maxX,s=e.range.minY+a,o=e.range.maxY;break}e.children[r]={centerOfMass:{x:0,y:0},mass:0,range:{minX:n,maxX:i,minY:s,maxY:o},size:.5*e.size,calcSize:2*e.calcSize,children:{data:null},maxWidth:0,level:e.level+1,childrenCount:0}}_debug(e,r){this.barnesHutTree!==void 0&&(e.lineWidth=1,this._drawBranch(this.barnesHutTree.root,e,r))}_drawBranch(e,r,n){n===void 0&&(n="#FF0000"),e.childrenCount===4&&(this._drawBranch(e.children.NW,r),this._drawBranch(e.children.NE,r),this._drawBranch(e.children.SE,r),this._drawBranch(e.children.SW,r)),r.strokeStyle=n,r.beginPath(),r.moveTo(e.range.minX,e.range.minY),r.lineTo(e.range.maxX,e.range.minY),r.stroke(),r.beginPath(),r.moveTo(e.range.maxX,e.range.minY),r.lineTo(e.range.maxX,e.range.maxY),r.stroke(),r.beginPath(),r.moveTo(e.range.maxX,e.range.maxY),r.lineTo(e.range.minX,e.range.maxY),r.stroke(),r.beginPath(),r.moveTo(e.range.minX,e.range.maxY),r.lineTo(e.range.minX,e.range.minY),r.stroke()}}class gFe{constructor(e,r,n){this._rng=p1("REPULSION SOLVER"),this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i,s,o,a,l;const u=this.body.nodes,d=this.physicsBody.physicsNodeIndices,h=this.physicsBody.forces,f=this.options.nodeDistance,p=-2/3/f,m=4/3;for(let g=0;g<d.length-1;g++){a=u[d[g]];for(let y=g+1;y<d.length;y++)l=u[d[y]],e=l.x-a.x,r=l.y-a.y,n=Math.sqrt(e*e+r*r),n===0&&(n=.1*this._rng(),e=n),n<2*f&&(n<.5*f?o=1:o=p*n+m,o=o/n,i=e*o,s=r*o,h[a.id].x-=i,h[a.id].y-=s,h[l.id].x+=i,h[l.id].y+=s)}}}class yFe{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e,this.overlapAvoidanceFactor=Math.max(0,Math.min(1,this.options.avoidOverlap||0))}solve(){const e=this.body.nodes,r=this.physicsBody.physicsNodeIndices,n=this.physicsBody.forces,i=this.options.nodeDistance;for(let s=0;s<r.length-1;s++){const o=e[r[s]];for(let a=s+1;a<r.length;a++){const l=e[r[a]];if(o.level===l.level){const u=i+this.overlapAvoidanceFactor*((o.shape.radius||0)/2+(l.shape.radius||0)/2),d=l.x-o.x,h=l.y-o.y,f=Math.sqrt(d*d+h*h),p=.05;let m;f<u?m=-Math.pow(p*f,2)+Math.pow(p*u,2):m=0,f!==0&&(m=m/f);const g=d*m,y=h*m;n[o.id].x-=g,n[o.id].y-=y,n[l.id].x+=g,n[l.id].y+=y}}}}}class kO{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r;const n=this.physicsBody.physicsEdgeIndices,i=this.body.edges;let s,o,a;for(let l=0;l<n.length;l++)r=i[n[l]],r.connected===!0&&r.toId!==r.fromId&&this.body.nodes[r.toId]!==void 0&&this.body.nodes[r.fromId]!==void 0&&(r.edgeType.via!==void 0?(e=r.options.length===void 0?this.options.springLength:r.options.length,s=r.to,o=r.edgeType.via,a=r.from,this._calculateSpringForce(s,o,.5*e),this._calculateSpringForce(o,a,.5*e)):(e=r.options.length===void 0?this.options.springLength*1.5:r.options.length,this._calculateSpringForce(r.from,r.to,e)))}_calculateSpringForce(e,r,n){const i=e.x-r.x,s=e.y-r.y,o=Math.max(Math.sqrt(i*i+s*s),.01),a=this.options.springConstant*(n-o)/o,l=i*a,u=s*a;this.physicsBody.forces[e.id]!==void 0&&(this.physicsBody.forces[e.id].x+=l,this.physicsBody.forces[e.id].y+=u),this.physicsBody.forces[r.id]!==void 0&&(this.physicsBody.forces[r.id].x-=l,this.physicsBody.forces[r.id].y-=u)}}class vFe{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i,s,o,a,l;const u=this.body.edges,d=.5,h=this.physicsBody.physicsEdgeIndices,f=this.physicsBody.physicsNodeIndices,p=this.physicsBody.forces;for(let x=0;x<f.length;x++){const S=f[x];p[S].springFx=0,p[S].springFy=0}for(let x=0;x<h.length;x++)r=u[h[x]],r.connected===!0&&(e=r.options.length===void 0?this.options.springLength:r.options.length,n=r.from.x-r.to.x,i=r.from.y-r.to.y,l=Math.sqrt(n*n+i*i),l=l===0?.01:l,a=this.options.springConstant*(e-l)/l,s=n*a,o=i*a,r.to.level!=r.from.level?(p[r.toId]!==void 0&&(p[r.toId].springFx-=s,p[r.toId].springFy-=o),p[r.fromId]!==void 0&&(p[r.fromId].springFx+=s,p[r.fromId].springFy+=o)):(p[r.toId]!==void 0&&(p[r.toId].x-=d*s,p[r.toId].y-=d*o),p[r.fromId]!==void 0&&(p[r.fromId].x+=d*s,p[r.fromId].y+=d*o)));a=1;let m,g;for(let x=0;x<f.length;x++){const S=f[x];m=Math.min(a,Math.max(-a,p[S].springFx)),g=Math.min(a,Math.max(-a,p[S].springFy)),p[S].x+=m,p[S].y+=g}let y=0,v=0;for(let x=0;x<f.length;x++){const S=f[x];y+=p[S].x,v+=p[S].y}const b=y/f.length,w=v/f.length;for(let x=0;x<f.length;x++){const S=f[x];p[S].x-=b,p[S].y-=w}}}class Xy{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i;const s=this.body.nodes,o=this.physicsBody.physicsNodeIndices,a=this.physicsBody.forces;for(let l=0;l<o.length;l++){const u=o[l];i=s[u],e=-i.x,r=-i.y,n=Math.sqrt(e*e+r*r),this._calculateForces(n,e,r,a,i)}}_calculateForces(e,r,n,i,s){const o=e===0?0:this.options.centralGravity/e;i[s.id].x=r*o,i[s.id].y=n*o}}class bFe extends Fce{constructor(e,r,n){super(e,r,n),this._rng=p1("FORCE ATLAS 2 BASED REPULSION SOLVER")}_calculateForces(e,r,n,i,s){e===0&&(e=.1*this._rng(),r=e),this.overlapAvoidanceFactor<1&&i.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,e-i.shape.radius));const o=i.edges.length+1,a=this.options.gravitationalConstant*s.mass*i.options.mass*o/Math.pow(e,2),l=r*a,u=n*a;this.physicsBody.forces[i.id].x+=l,this.physicsBody.forces[i.id].y+=u}}class xFe extends Xy{constructor(e,r,n){super(e,r,n)}_calculateForces(e,r,n,i,s){if(e>0){const o=s.edges.length+1,a=this.options.centralGravity*o*s.options.mass;i[s.id].x=r*a,i[s.id].y=n*a}}}class wFe{constructor(e){this.body=e,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}},Er(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("initPhysics",()=>{this.initPhysics()}),this.body.emitter.on("_layoutFailed",()=>{this.layoutFailed=!0}),this.body.emitter.on("resetPhysics",()=>{this.stopSimulation(),this.ready=!1}),this.body.emitter.on("disablePhysics",()=>{this.physicsEnabled=!1,this.stopSimulation()}),this.body.emitter.on("restorePhysics",()=>{this.setOptions(this.options),this.ready===!0&&this.startSimulation()}),this.body.emitter.on("startSimulation",()=>{this.ready===!0&&this.startSimulation()}),this.body.emitter.on("stopSimulation",()=>{this.stopSimulation()}),this.body.emitter.on("destroy",()=>{this.stopSimulation(!1),this.body.emitter.off()}),this.body.emitter.on("_dataChanged",()=>{this.updatePhysicsData()})}setOptions(e){if(e!==void 0)if(e===!1)this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation();else if(e===!0)this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation();else{this.physicsEnabled=!0,$0(["stabilization"],this.options,e),Fi(this.options,e,"stabilization"),e.enabled===void 0&&(this.options.enabled=!0),this.options.enabled===!1&&(this.physicsEnabled=!1,this.stopSimulation());const r=this.options.wind;r&&((typeof r.x!="number"||QR(r.x))&&(r.x=0),(typeof r.y!="number"||QR(r.y))&&(r.y=0)),this.timestep=this.options.timestep}this.init()}init(){let e;this.options.solver==="forceAtlas2Based"?(e=this.options.forceAtlas2Based,this.nodesSolver=new bFe(this.body,this.physicsBody,e),this.edgesSolver=new kO(this.body,this.physicsBody,e),this.gravitySolver=new xFe(this.body,this.physicsBody,e)):this.options.solver==="repulsion"?(e=this.options.repulsion,this.nodesSolver=new gFe(this.body,this.physicsBody,e),this.edgesSolver=new kO(this.body,this.physicsBody,e),this.gravitySolver=new Xy(this.body,this.physicsBody,e)):this.options.solver==="hierarchicalRepulsion"?(e=this.options.hierarchicalRepulsion,this.nodesSolver=new yFe(this.body,this.physicsBody,e),this.edgesSolver=new vFe(this.body,this.physicsBody,e),this.gravitySolver=new Xy(this.body,this.physicsBody,e)):(e=this.options.barnesHut,this.nodesSolver=new Fce(this.body,this.physicsBody,e),this.edgesSolver=new kO(this.body,this.physicsBody,e),this.gravitySolver=new Xy(this.body,this.physicsBody,e)),this.modelOptions=e}initPhysics(){this.physicsEnabled===!0&&this.options.enabled===!0?this.options.stabilization.enabled===!0?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}startSimulation(){if(this.physicsEnabled===!0&&this.options.enabled===!0){if(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),this.viewFunction===void 0){var e;this.viewFunction=de(e=this.simulationStep).call(e,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}else this.body.emitter.emit("_redraw")}stopSimulation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.stabilized=!0,e===!0&&this._emitStabilized(),this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,e===!0&&this.body.emitter.emit("_stopRendering"))}simulationStep(){const e=R0();this.physicsTick(),(R0()-e<.4*this.simulationInterval||this.runDoubleSpeed===!0)&&this.stabilized===!1&&(this.physicsTick(),this.runDoubleSpeed=!0),this.stabilized===!0&&this.stopSimulation()}_emitStabilized(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.stabilizationIterations;(this.stabilizationIterations>1||this.startedStabilization===!0)&&qo(()=>{this.body.emitter.emit("stabilized",{iterations:e}),this.startedStabilization=!1,this.stabilizationIterations=0},0)}physicsStep(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}adjustTimeStep(){this._evaluateStepQuality()===!0?this.timestep=1.2*this.timestep:this.timestep/1.2<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/1.2))}physicsTick(){this._startStabilizing(),this.stabilized!==!0&&(this.adaptiveTimestep===!0&&this.adaptiveTimestepEnabled===!0?(this.adaptiveCounter%this.adaptiveInterval===0?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1):(this.timestep=this.options.timestep,this.physicsStep()),this.stabilized===!0&&this.revert(),this.stabilizationIterations++)}updatePhysicsData(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];const e=this.body.nodes,r=this.body.edges;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&e[n].options.physics===!0&&this.physicsBody.physicsNodeIndices.push(e[n].id);for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&r[n].options.physics===!0&&this.physicsBody.physicsEdgeIndices.push(r[n].id);for(let n=0;n<this.physicsBody.physicsNodeIndices.length;n++){const i=this.physicsBody.physicsNodeIndices[n];this.physicsBody.forces[i]={x:0,y:0},this.physicsBody.velocities[i]===void 0&&(this.physicsBody.velocities[i]={x:0,y:0})}for(const n in this.physicsBody.velocities)e[n]===void 0&&delete this.physicsBody.velocities[n]}revert(){const e=sr(this.previousStates),r=this.body.nodes,n=this.physicsBody.velocities;this.referenceState={};for(let i=0;i<e.length;i++){const s=e[i];r[s]!==void 0?r[s].options.physics===!0&&(this.referenceState[s]={positions:{x:r[s].x,y:r[s].y}},n[s].x=this.previousStates[s].vx,n[s].y=this.previousStates[s].vy,r[s].x=this.previousStates[s].x,r[s].y=this.previousStates[s].y):delete this.previousStates[s]}}_evaluateStepQuality(){let e,r,n;const i=this.body.nodes,s=this.referenceState,o=.3;for(const a in this.referenceState)if(Object.prototype.hasOwnProperty.call(this.referenceState,a)&&i[a]!==void 0&&(e=i[a].x-s[a].positions.x,r=i[a].y-s[a].positions.y,n=Math.sqrt(Math.pow(e,2)+Math.pow(r,2)),n>o))return!1;return!0}moveNodes(){const e=this.physicsBody.physicsNodeIndices;let r=0,n=0;const i=5;for(let s=0;s<e.length;s++){const o=e[s],a=this._performStep(o);r=Math.max(r,a),n+=a}this.adaptiveTimestepEnabled=n/e.length<i,this.stabilized=r<this.options.minVelocity}calculateComponentVelocity(e,r,n){const i=this.modelOptions.damping*e,s=(r-i)/n;e+=s*this.timestep;const o=this.options.maxVelocity||1e9;return Math.abs(e)>o&&(e=e>0?o:-o),e}_performStep(e){const r=this.body.nodes[e],n=this.physicsBody.forces[e];this.options.wind&&(n.x+=this.options.wind.x,n.y+=this.options.wind.y);const i=this.physicsBody.velocities[e];return this.previousStates[e]={x:r.x,y:r.y,vx:i.x,vy:i.y},r.options.fixed.x===!1?(i.x=this.calculateComponentVelocity(i.x,n.x,r.options.mass),r.x+=i.x*this.timestep):(n.x=0,i.x=0),r.options.fixed.y===!1?(i.y=this.calculateComponentVelocity(i.y,n.y,r.options.mass),r.y+=i.y*this.timestep):(n.y=0,i.y=0),Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2))}_freezeNodes(){const e=this.body.nodes;for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&e[r].x&&e[r].y){const n=e[r].options.fixed;this.freezeCache[r]={x:n.x,y:n.y},n.x=!0,n.y=!0}}_restoreFrozenNodes(){const e=this.body.nodes;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&this.freezeCache[r]!==void 0&&(e[r].options.fixed.x=this.freezeCache[r].x,e[r].options.fixed.y=this.freezeCache[r].y);this.freezeCache={}}stabilize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.stabilization.iterations;if(typeof e!="number"&&(e=this.options.stabilization.iterations,console.error("The stabilize method needs a numeric amount of iterations. Switching to default: ",e)),this.physicsBody.physicsNodeIndices.length===0){this.ready=!0;return}this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=e,this.options.stabilization.onlyDynamicEdges===!0&&this._freezeNodes(),this.stabilizationIterations=0,qo(()=>this._stabilizationBatch(),0)}_startStabilizing(){return this.startedStabilization===!0?!1:(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}_stabilizationBatch(){const e=()=>this.stabilized===!1&&this.stabilizationIterations<this.targetIterations,r=()=>{this.body.emitter.emit("stabilizationProgress",{iterations:this.stabilizationIterations,total:this.targetIterations})};this._startStabilizing()&&r();let n=0;for(;e()&&n<this.options.stabilization.updateInterval;)this.physicsTick(),n++;if(r(),e()){var i;qo(de(i=this._stabilizationBatch).call(i,this),0)}else this._finalizeStabilization()}_finalizeStabilization(){this.body.emitter.emit("_allowRedraw"),this.options.stabilization.fit===!0&&this.body.emitter.emit("fit"),this.options.stabilization.onlyDynamicEdges===!0&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),this.stabilized===!0?this._emitStabilized():this.startSimulation(),this.ready=!0}_drawForces(e){for(let r=0;r<this.physicsBody.physicsNodeIndices.length;r++){const n=this.physicsBody.physicsNodeIndices[r],i=this.body.nodes[n],s=this.physicsBody.forces[n],o=20,a=.03,l=Math.sqrt(Math.pow(s.x,2)+Math.pow(s.x,2)),u=Math.min(Math.max(5,l),15),d=3*u,h=KR((180-Math.min(1,Math.max(0,a*l))*180)/360,1,1),f={x:i.x+o*s.x,y:i.y+o*s.y};e.lineWidth=u,e.strokeStyle=h,e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(f.x,f.y),e.stroke();const p=Math.atan2(s.y,s.x);e.fillStyle=h,Dce.draw(e,{type:"arrow",point:f,angle:p,length:d}),mg(e).call(e)}}}const sn=[];for(let t=0;t<256;++t)sn.push((t+256).toString(16).slice(1));function SFe(t,e=0){return(sn[t[e+0]]+sn[t[e+1]]+sn[t[e+2]]+sn[t[e+3]]+"-"+sn[t[e+4]]+sn[t[e+5]]+"-"+sn[t[e+6]]+sn[t[e+7]]+"-"+sn[t[e+8]]+sn[t[e+9]]+"-"+sn[t[e+10]]+sn[t[e+11]]+sn[t[e+12]]+sn[t[e+13]]+sn[t[e+14]]+sn[t[e+15]]).toLowerCase()}let jO;const EFe=new Uint8Array(16);function _Fe(){if(!jO){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");jO=crypto.getRandomValues.bind(crypto)}return jO(EFe)}const NFe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var eJ={randomUUID:NFe};function CFe(t,e,r){var i;t=t||{};const n=t.random??((i=t.rng)==null?void 0:i.call(t))??_Fe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,SFe(n)}function xp(t,e,r){return eJ.randomUUID&&!t?eJ.randomUUID():CFe(t)}class Mn{constructor(){}static getRange(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=1e9,i=-1e9,s=1e9,o=-1e9,a;if(r.length>0)for(let l=0;l<r.length;l++)a=e[r[l]],s>a.shape.boundingBox.left&&(s=a.shape.boundingBox.left),o<a.shape.boundingBox.right&&(o=a.shape.boundingBox.right),n>a.shape.boundingBox.top&&(n=a.shape.boundingBox.top),i<a.shape.boundingBox.bottom&&(i=a.shape.boundingBox.bottom);return s===1e9&&o===-1e9&&n===1e9&&i===-1e9&&(n=0,i=0,s=0,o=0),{minX:s,maxX:o,minY:n,maxY:i}}static getRangeCore(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=1e9,i=-1e9,s=1e9,o=-1e9,a;if(r.length>0)for(let l=0;l<r.length;l++)a=e[r[l]],s>a.x&&(s=a.x),o<a.x&&(o=a.x),n>a.y&&(n=a.y),i<a.y&&(i=a.y);return s===1e9&&o===-1e9&&n===1e9&&i===-1e9&&(n=0,i=0,s=0,o=0),{minX:s,maxX:o,minY:n,maxY:i}}static findCenter(e){return{x:.5*(e.maxX+e.minX),y:.5*(e.maxY+e.minY)}}static cloneOptions(e,r){const n={};return r===void 0||r==="node"?(At(n,e.options,!0),n.x=e.x,n.y=e.y,n.amountOfConnections=e.edges.length):At(n,e.options,!0),n}}class kFe extends Wt{constructor(e,r,n,i,s,o){super(e,r,n,i,s,o),this.isCluster=!0,this.containedNodes={},this.containedEdges={}}_openChildCluster(e){const r=this.body.nodes[e];if(this.containedNodes[e]===void 0)throw new Error("node with id: "+e+" not in current cluster");if(!r.isCluster)throw new Error("node with id: "+e+" is not a cluster");delete this.containedNodes[e],nt(r.edges,n=>{delete this.containedEdges[n.id]}),nt(r.containedNodes,(n,i)=>{this.containedNodes[i]=n}),r.containedNodes={},nt(r.containedEdges,(n,i)=>{this.containedEdges[i]=n}),r.containedEdges={},nt(r.edges,n=>{nt(this.edges,i=>{var s,o;const a=wt(s=i.clusteringEdgeReplacingIds).call(s,n.id);a!==-1&&(nt(n.clusteringEdgeReplacingIds,l=>{i.clusteringEdgeReplacingIds.push(l),this.body.edges[l].edgeReplacedById=i.id}),Fo(o=i.clusteringEdgeReplacingIds).call(o,a,1))})}),r.edges=[]}}class jFe{constructor(e){this.body=e,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},Er(this.options,this.defaultOptions),this.body.emitter.on("_resetData",()=>{this.clusteredNodes={},this.clusteredEdges={}})}clusterByHubsize(e,r){e===void 0?e=this._getHubSize():typeof e=="object"&&(r=this._checkOptions(e),e=this._getHubSize());const n=[];for(let i=0;i<this.body.nodeIndices.length;i++){const s=this.body.nodes[this.body.nodeIndices[i]];s.edges.length>=e&&n.push(s.id)}for(let i=0;i<n.length;i++)this.clusterByConnection(n[i],r,!0);this.body.emitter.emit("_dataChanged")}cluster(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.joinCondition===void 0)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");e=this._checkOptions(e);const n={},i={};nt(this.body.nodes,(s,o)=>{s.options&&e.joinCondition(s.options)===!0&&(n[o]=s,nt(s.edges,a=>{this.clusteredEdges[a.id]===void 0&&(i[a.id]=a)}))}),this._cluster(n,i,e,r)}clusterByEdgeCount(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;r=this._checkOptions(r);const i=[],s={};let o,a,l;for(let u=0;u<this.body.nodeIndices.length;u++){const d={},h={},f=this.body.nodeIndices[u],p=this.body.nodes[f];if(s[f]===void 0){l=0,a=[];for(let m=0;m<p.edges.length;m++)o=p.edges[m],this.clusteredEdges[o.id]===void 0&&(o.toId!==o.fromId&&l++,a.push(o));if(l===e){const m=function(y){if(r.joinCondition===void 0||r.joinCondition===null)return!0;const v=Mn.cloneOptions(y);return r.joinCondition(v)};let g=!0;for(let y=0;y<a.length;y++){o=a[y];const v=this._getConnectedId(o,f);if(m(p))h[o.id]=o,d[f]=p,d[v]=this.body.nodes[v],s[f]=!0;else{g=!1;break}}if(sr(d).length>0&&sr(h).length>0&&g===!0){const v=function(){for(let b=0;b<i.length;++b)for(const w in d)if(i[b].nodes[w]!==void 0)return i[b]}();if(v!==void 0){for(const b in d)v.nodes[b]===void 0&&(v.nodes[b]=d[b]);for(const b in h)v.edges[b]===void 0&&(v.edges[b]=h[b])}else i.push({nodes:d,edges:h})}}}}for(let u=0;u<i.length;u++)this._cluster(i[u].nodes,i[u].edges,r,!1);n===!0&&this.body.emitter.emit("_dataChanged")}clusterOutliers(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(1,e,r)}clusterBridges(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(2,e,r)}clusterByConnection(e,r){var n;let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0)throw new Error("No nodeId supplied to clusterByConnection!");if(this.body.nodes[e]===void 0)throw new Error("The nodeId given to clusterByConnection does not exist!");const s=this.body.nodes[e];r=this._checkOptions(r,s),r.clusterNodeProperties.x===void 0&&(r.clusterNodeProperties.x=s.x),r.clusterNodeProperties.y===void 0&&(r.clusterNodeProperties.y=s.y),r.clusterNodeProperties.fixed===void 0&&(r.clusterNodeProperties.fixed={},r.clusterNodeProperties.fixed.x=s.options.fixed.x,r.clusterNodeProperties.fixed.y=s.options.fixed.y);const o={},a={},l=s.id,u=Mn.cloneOptions(s);o[l]=s;for(let h=0;h<s.edges.length;h++){const f=s.edges[h];if(this.clusteredEdges[f.id]===void 0){const p=this._getConnectedId(f,l);if(this.clusteredNodes[p]===void 0)if(p!==l)if(r.joinCondition===void 0)a[f.id]=f,o[p]=this.body.nodes[p];else{const m=Mn.cloneOptions(this.body.nodes[p]);r.joinCondition(u,m)===!0&&(a[f.id]=f,o[p]=this.body.nodes[p])}else a[f.id]=f}}const d=yh(n=sr(o)).call(n,function(h){return o[h].id});for(const h in o){if(!Object.prototype.hasOwnProperty.call(o,h))continue;const f=o[h];for(let p=0;p<f.edges.length;p++){const m=f.edges[p];wt(d).call(d,this._getConnectedId(m,f.id))>-1&&(a[m.id]=m)}}this._cluster(o,a,r,i)}_createClusterEdges(e,r,n,i){let s,o,a,l,u,d;const h=sr(e),f=[];for(let g=0;g<h.length;g++){o=h[g],a=e[o];for(let y=0;y<a.edges.length;y++)s=a.edges[y],this.clusteredEdges[s.id]===void 0&&(s.toId==s.fromId?r[s.id]=s:s.toId==o?(l=n.id,u=s.fromId,d=u):(l=s.toId,u=n.id,d=l),e[d]===void 0&&f.push({edge:s,fromId:u,toId:l}))}const p=[],m=function(g){for(let y=0;y<p.length;y++){const v=p[y],b=g.fromId===v.fromId&&g.toId===v.toId,w=g.fromId===v.toId&&g.toId===v.fromId;if(b||w)return v}return null};for(let g=0;g<f.length;g++){const y=f[g],v=y.edge;let b=m(y);b===null?(b=this._createClusteredEdge(y.fromId,y.toId,v,i),p.push(b)):b.clusteringEdgeReplacingIds.push(v.id),this.body.edges[v.id].edgeReplacedById=b.id,this._backupEdgeOptions(v),v.setOptions({physics:!1})}}_checkOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.clusterEdgeProperties===void 0&&(e.clusterEdgeProperties={}),e.clusterNodeProperties===void 0&&(e.clusterNodeProperties={}),e}_cluster(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;const s=[];for(const d in e)Object.prototype.hasOwnProperty.call(e,d)&&this.clusteredNodes[d]!==void 0&&s.push(d);for(let d=0;d<s.length;++d)delete e[s[d]];if(sr(e).length==0||sr(e).length==1&&n.clusterNodeProperties.allowSingleNodeCluster!=!0)return;let o=At({},n.clusterNodeProperties);if(n.processProperties!==void 0){const d=[];for(const f in e)if(Object.prototype.hasOwnProperty.call(e,f)){const p=Mn.cloneOptions(e[f]);d.push(p)}const h=[];for(const f in r)if(Object.prototype.hasOwnProperty.call(r,f)&&f.substr(0,12)!=="clusterEdge:"){const p=Mn.cloneOptions(r[f],"edge");h.push(p)}if(o=n.processProperties(o,d,h),!o)throw new Error("The processProperties function does not return properties!")}o.id===void 0&&(o.id="cluster:"+xp());const a=o.id;o.label===void 0&&(o.label="cluster");let l;o.x===void 0&&(l=this._getClusterPosition(e),o.x=l.x),o.y===void 0&&(l===void 0&&(l=this._getClusterPosition(e)),o.y=l.y),o.id=a;const u=this.body.functions.createNode(o,kFe);u.containedNodes=e,u.containedEdges=r,u.clusterEdgeProperties=n.clusterEdgeProperties,this.body.nodes[o.id]=u,this._clusterEdges(e,r,o,n.clusterEdgeProperties),o.id=void 0,i===!0&&this.body.emitter.emit("_dataChanged")}_backupEdgeOptions(e){this.clusteredEdges[e.id]===void 0&&(this.clusteredEdges[e.id]={physics:e.options.physics})}_restoreEdge(e){const r=this.clusteredEdges[e.id];r!==void 0&&(e.setOptions({physics:r.physics}),delete this.clusteredEdges[e.id])}isCluster(e){return this.body.nodes[e]!==void 0?this.body.nodes[e].isCluster===!0:(console.error("Node does not exist."),!1)}_getClusterPosition(e){const r=sr(e);let n=e[r[0]].x,i=e[r[0]].x,s=e[r[0]].y,o=e[r[0]].y,a;for(let l=1;l<r.length;l++)a=e[r[l]],n=a.x<n?a.x:n,i=a.x>i?a.x:i,s=a.y<s?a.y:s,o=a.y>o?a.y:o;return{x:.5*(n+i),y:.5*(s+o)}}openCluster(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0)throw new Error("No clusterNodeId supplied to openCluster.");const i=this.body.nodes[e];if(i===void 0)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(i.isCluster!==!0||i.containedNodes===void 0||i.containedEdges===void 0)throw new Error("The node:"+e+" is not a valid cluster.");const s=this.findNode(e),o=wt(s).call(s,e)-1;if(o>=0){const d=s[o];this.body.nodes[d]._openChildCluster(e),delete this.body.nodes[e],n===!0&&this.body.emitter.emit("_dataChanged");return}const a=i.containedNodes,l=i.containedEdges;if(r!==void 0&&r.releaseFunction!==void 0&&typeof r.releaseFunction=="function"){const d={},h={x:i.x,y:i.y};for(const p in a)if(Object.prototype.hasOwnProperty.call(a,p)){const m=this.body.nodes[p];d[p]={x:m.x,y:m.y}}const f=r.releaseFunction(h,d);for(const p in a)if(Object.prototype.hasOwnProperty.call(a,p)){const m=this.body.nodes[p];f[p]!==void 0&&(m.x=f[p].x===void 0?i.x:f[p].x,m.y=f[p].y===void 0?i.y:f[p].y)}}else nt(a,function(d){d.options.fixed.x===!1&&(d.x=i.x),d.options.fixed.y===!1&&(d.y=i.y)});for(const d in a)if(Object.prototype.hasOwnProperty.call(a,d)){const h=this.body.nodes[d];h.vx=i.vx,h.vy=i.vy,h.setOptions({physics:!0}),delete this.clusteredNodes[d]}const u=[];for(let d=0;d<i.edges.length;d++)u.push(i.edges[d]);for(let d=0;d<u.length;d++){const h=u[d],f=this._getConnectedId(h,e),p=this.clusteredNodes[f];for(let m=0;m<h.clusteringEdgeReplacingIds.length;m++){const g=h.clusteringEdgeReplacingIds[m],y=this.body.edges[g];if(y!==void 0)if(p!==void 0){const v=this.body.nodes[p.clusterId];v.containedEdges[y.id]=y,delete l[y.id];let b=y.fromId,w=y.toId;y.toId==f?w=p.clusterId:b=p.clusterId,this._createClusteredEdge(b,w,y,v.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(y)}h.remove()}for(const d in l)Object.prototype.hasOwnProperty.call(l,d)&&this._restoreEdge(l[d]);delete this.body.nodes[e],n===!0&&this.body.emitter.emit("_dataChanged")}getNodesInCluster(e){const r=[];if(this.isCluster(e)===!0){const n=this.body.nodes[e].containedNodes;for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&r.push(this.body.nodes[i].id)}return r}findNode(e){const r=[];let i=0,s;for(;this.clusteredNodes[e]!==void 0&&i<100;){if(s=this.body.nodes[e],s===void 0)return[];r.push(s.id),e=this.clusteredNodes[e].clusterId,i++}return s=this.body.nodes[e],s===void 0?[]:(r.push(s.id),jc(r).call(r),r)}updateClusteredNode(e,r){if(e===void 0)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(r===void 0)throw new Error("No newOptions supplied to updateClusteredNode.");if(this.body.nodes[e]===void 0)throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[e].setOptions(r),this.body.emitter.emit("_dataChanged")}updateEdge(e,r){if(e===void 0)throw new Error("No startEdgeId supplied to updateEdge.");if(r===void 0)throw new Error("No newOptions supplied to updateEdge.");if(this.body.edges[e]===void 0)throw new Error("The startEdgeId supplied to updateEdge does not exist.");const n=this.getClusteredEdges(e);for(let i=0;i<n.length;i++)this.body.edges[n[i]].setOptions(r);this.body.emitter.emit("_dataChanged")}getClusteredEdges(e){const r=[];let i=0;for(;e!==void 0&&this.body.edges[e]!==void 0&&i<100;)r.push(this.body.edges[e].id),e=this.body.edges[e].edgeReplacedById,i++;return jc(r).call(r),r}getBaseEdge(e){return this.getBaseEdges(e)[0]}getBaseEdges(e){const r=[e],n=[],i=[],s=100;let o=0;for(;r.length>0&&o<s;){const a=r.pop();if(a===void 0)continue;const l=this.body.edges[a];if(l===void 0)continue;o++;const u=l.clusteringEdgeReplacingIds;if(u===void 0)i.push(a);else for(let d=0;d<u.length;++d){const h=u[d];wt(r).call(r,u)!==-1||wt(n).call(n,u)!==-1||r.push(h)}n.push(a)}return i}_getConnectedId(e,r){return e.toId!=r?e.toId:(e.fromId!=r,e.fromId)}_getHubSize(){let e=0,r=0,n=0,i=0;for(let l=0;l<this.body.nodeIndices.length;l++){const u=this.body.nodes[this.body.nodeIndices[l]];u.edges.length>i&&(i=u.edges.length),e+=u.edges.length,r+=Math.pow(u.edges.length,2),n+=1}e=e/n,r=r/n;const s=r-Math.pow(e,2),o=Math.sqrt(s);let a=Math.floor(e+2*o);return a>i&&(a=i),a}_createClusteredEdge(e,r,n,i,s){const o=Mn.cloneOptions(n,"edge");At(o,i),o.from=e,o.to=r,o.id="clusterEdge:"+xp(),s!==void 0&&At(o,s);const a=this.body.functions.createEdge(o);return a.clusteringEdgeReplacingIds=[n.id],a.connect(),this.body.edges[a.id]=a,a}_clusterEdges(e,r,n,i){if(r instanceof fl){const s=r,o={};o[s.id]=s,r=o}if(e instanceof Wt){const s=e,o={};o[s.id]=s,e=o}if(n==null)throw new Error("_clusterEdges: parameter clusterNode required");i===void 0&&(i=n.clusterEdgeProperties),this._createClusterEdges(e,r,n,i);for(const s in r)if(Object.prototype.hasOwnProperty.call(r,s)&&this.body.edges[s]!==void 0){const o=this.body.edges[s];this._backupEdgeOptions(o),o.setOptions({physics:!1})}for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(this.clusteredNodes[s]={clusterId:n.id,node:this.body.nodes[s]},this.body.nodes[s].setOptions({physics:!1}))}_getClusterNodeForNode(e){if(e===void 0)return;const r=this.clusteredNodes[e];if(r===void 0)return;const n=r.clusterId;if(n!==void 0)return this.body.nodes[n]}_filter(e,r){const n=[];return nt(e,i=>{r(i)&&n.push(i)}),n}_updateState(){let e;const r=[],n={},i=l=>{nt(this.body.nodes,u=>{u.isCluster===!0&&l(u)})};for(e in this.clusteredNodes){if(!Object.prototype.hasOwnProperty.call(this.clusteredNodes,e))continue;this.body.nodes[e]===void 0&&r.push(e)}i(function(l){for(let u=0;u<r.length;u++)delete l.containedNodes[r[u]]});for(let l=0;l<r.length;l++)delete this.clusteredNodes[r[l]];nt(this.clusteredEdges,l=>{const u=this.body.edges[l];(u===void 0||!u.endPointsValid())&&(n[l]=l)}),i(function(l){nt(l.containedEdges,(u,d)=>{!u.endPointsValid()&&!n[d]&&(n[d]=d)})}),nt(this.body.edges,(l,u)=>{let d=!0;const h=l.clusteringEdgeReplacingIds;if(h!==void 0){let f=0;nt(h,p=>{const m=this.body.edges[p];m!==void 0&&m.endPointsValid()&&(f+=1)}),d=f>0}(!l.endPointsValid()||!d)&&(n[u]=u)}),i(l=>{nt(n,u=>{delete l.containedEdges[u],nt(l.edges,(d,h)=>{if(d.id===u){l.edges[h]=null;return}d.clusteringEdgeReplacingIds=this._filter(d.clusteringEdgeReplacingIds,function(f){return!n[f]})}),l.edges=this._filter(l.edges,function(d){return d!==null})})}),nt(n,l=>{delete this.clusteredEdges[l]}),nt(n,l=>{delete this.body.edges[l]});const s=sr(this.body.edges);nt(s,l=>{const u=this.body.edges[l],d=this._isClusteredNode(u.fromId)||this._isClusteredNode(u.toId);if(d!==this._isClusteredEdge(u.id))if(d){const h=this._getClusterNodeForNode(u.fromId);h!==void 0&&this._clusterEdges(this.body.nodes[u.fromId],u,h);const f=this._getClusterNodeForNode(u.toId);f!==void 0&&this._clusterEdges(this.body.nodes[u.toId],u,f)}else delete this._clusterEdges[l],this._restoreEdge(u)});let o=!1,a=!0;for(;a;){const l=[];i(function(u){const d=sr(u.containedNodes).length,h=u.options.allowSingleNodeCluster===!0;(h&&d<1||!h&&d<2)&&l.push(u.id)});for(let u=0;u<l.length;++u)this.openCluster(l[u],{},!1);a=l.length>0,o=o||a}o&&this._updateState()}_isClusteredNode(e){return this.clusteredNodes[e]!==void 0}_isClusteredEdge(e){return this.clusteredEdges[e]!==void 0}}class TFe{constructor(e,r){this.body=e,this.canvas=r,this.redrawRequested=!1,this.requestAnimationFrameRequestId=void 0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},Er(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e;this.body.emitter.on("dragStart",()=>{this.dragging=!0}),this.body.emitter.on("dragEnd",()=>{this.dragging=!1}),this.body.emitter.on("zoom",()=>{this.zooming=!0,window.clearTimeout(this.zoomTimeoutId),this.zoomTimeoutId=qo(()=>{var r;this.zooming=!1,de(r=this._requestRedraw).call(r,this)()},250)}),this.body.emitter.on("_resizeNodes",()=>{this._resizeNodes()}),this.body.emitter.on("_redraw",()=>{this.renderingActive===!1&&this._redraw()}),this.body.emitter.on("_blockRedraw",()=>{this.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",()=>{this.allowRedraw=!0,this.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",de(e=this._requestRedraw).call(e,this)),this.body.emitter.on("_startRendering",()=>{this.renderRequests+=1,this.renderingActive=!0,this._startRendering()}),this.body.emitter.on("_stopRendering",()=>{this.renderRequests-=1,this.renderingActive=this.renderRequests>0,this.requestAnimationFrameRequestId=void 0}),this.body.emitter.on("destroy",()=>{this.renderRequests=0,this.allowRedraw=!1,this.renderingActive=!1,window.cancelAnimationFrame(this.requestAnimationFrameRequestId),this.body.emitter.off()})}setOptions(e){e!==void 0&&lf(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"],this.options,e)}_startRendering(){if(this.renderingActive===!0&&this.requestAnimationFrameRequestId===void 0){var e;this.requestAnimationFrameRequestId=window.requestAnimationFrame(de(e=this._renderStep).call(e,this),this.simulationInterval)}}_renderStep(){this.renderingActive===!0&&(this.requestAnimationFrameRequestId=void 0,this._startRendering(),this._redraw())}redraw(){this.body.emitter.emit("setSize"),this._redraw()}_requestRedraw(){this.redrawRequested!==!0&&this.renderingActive===!1&&this.allowRedraw===!0&&(this.redrawRequested=!0,window.requestAnimationFrame(()=>{this._redraw(!1)}))}_redraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.allowRedraw===!0){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;const r={drawExternalLabels:null};(this.canvas.frame.canvas.width===0||this.canvas.frame.canvas.height===0)&&this.canvas.setSize(),this.canvas.setTransform();const n=this.canvas.getContext(),i=this.canvas.frame.canvas.clientWidth,s=this.canvas.frame.canvas.clientHeight;if(n.clearRect(0,0,i,s),this.canvas.frame.clientWidth===0)return;if(n.save(),n.translate(this.body.view.translation.x,this.body.view.translation.y),n.scale(this.body.view.scale,this.body.view.scale),n.beginPath(),this.body.emitter.emit("beforeDrawing",n),n.closePath(),e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawEdges(n),this.dragging===!1||this.dragging===!0&&this.options.hideNodesOnDrag===!1){const{drawExternalLabels:o}=this._drawNodes(n,e);r.drawExternalLabels=o}e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawArrows(n),r.drawExternalLabels!=null&&r.drawExternalLabels(),e===!1&&this._drawSelectionBox(n),n.beginPath(),this.body.emitter.emit("afterDrawing",n),n.closePath(),n.restore(),e===!0&&n.clearRect(0,0,i,s)}}_resizeNodes(){this.canvas.setTransform();const e=this.canvas.getContext();e.save(),e.translate(this.body.view.translation.x,this.body.view.translation.y),e.scale(this.body.view.scale,this.body.view.scale);const r=this.body.nodes;let n;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n=r[i],n.resize(e),n.updateBoundingBox(e,n.selected));e.restore()}_drawNodes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.nodes,i=this.body.nodeIndices;let s;const o=[],a=[],l=20,u=this.canvas.DOMtoCanvas({x:-l,y:-l}),d=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+l,y:this.canvas.frame.canvas.clientHeight+l}),h={top:u.y,left:u.x,bottom:d.y,right:d.x},f=[];for(let y=0;y<i.length;y++)if(s=n[i[y]],s.hover)a.push(i[y]);else if(s.isSelected())o.push(i[y]);else if(r===!0){const v=s.draw(e);v.drawExternalLabel!=null&&f.push(v.drawExternalLabel)}else if(s.isBoundingBoxOverlappingWith(h)===!0){const v=s.draw(e);v.drawExternalLabel!=null&&f.push(v.drawExternalLabel)}else s.updateBoundingBox(e,s.selected);let p;const m=o.length,g=a.length;for(p=0;p<m;p++){s=n[o[p]];const y=s.draw(e);y.drawExternalLabel!=null&&f.push(y.drawExternalLabel)}for(p=0;p<g;p++){s=n[a[p]];const y=s.draw(e);y.drawExternalLabel!=null&&f.push(y.drawExternalLabel)}return{drawExternalLabels:()=>{for(const y of f)y()}}}_drawEdges(e){const r=this.body.edges,n=this.body.edgeIndices;for(let i=0;i<n.length;i++){const s=r[n[i]];s.connected===!0&&s.draw(e)}}_drawArrows(e){const r=this.body.edges,n=this.body.edgeIndices;for(let i=0;i<n.length;i++){const s=r[n[i]];s.connected===!0&&s.drawArrows(e)}}_drawSelectionBox(e){if(this.body.selectionBox.show){e.beginPath();const r=this.body.selectionBox.position.end.x-this.body.selectionBox.position.start.x,n=this.body.selectionBox.position.end.y-this.body.selectionBox.position.start.y;e.rect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,r,n),e.fillStyle="rgba(151, 194, 252, 0.2)",e.fillRect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,r,n),e.strokeStyle="rgba(151, 194, 252, 1)",e.stroke()}else e.closePath()}}var TO,tJ;function OFe(){if(tJ)return TO;tJ=1,Wle();var t=_t();return TO=t.setInterval,TO}var OO,rJ;function PFe(){return rJ||(rJ=1,OO=OFe()),OO}var IFe=PFe(),RFe=ze(IFe);function L0(t,e){e.inputHandler=function(r){r.isFirst&&e(r)},t.on("hammer.input",e.inputHandler)}function qce(t,e){return e.inputHandler=function(r){r.isFinal&&e(r)},t.on("hammer.input",e.inputHandler)}class MFe{constructor(e){this.body=e,this.pixelRatio=1,this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this._cleanupCallbacks=[],this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},Er(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e;this.body.emitter.once("resize",r=>{r.width!==0&&(this.body.view.translation.x=r.width*.5),r.height!==0&&(this.body.view.translation.y=r.height*.5)}),this.body.emitter.on("setSize",de(e=this.setSize).call(e,this)),this.body.emitter.on("destroy",()=>{this.hammerFrame.destroy(),this.hammer.destroy(),this._cleanUp()})}setOptions(e){if(e!==void 0&&lf(["width","height","autoResize"],this.options,e),this._cleanUp(),this.options.autoResize===!0){var r;if(window.ResizeObserver){const i=new ResizeObserver(()=>{this.setSize()===!0&&this.body.emitter.emit("_requestRedraw")}),{frame:s}=this;i.observe(s),this._cleanupCallbacks.push(()=>{i.unobserve(s)})}else{const i=RFe(()=>{this.setSize()===!0&&this.body.emitter.emit("_requestRedraw")},1e3);this._cleanupCallbacks.push(()=>{clearInterval(i)})}const n=de(r=this._onResize).call(r,this);window.addEventListener("resize",n),this._cleanupCallbacks.push(()=>{window.removeEventListener("resize",n)})}}_cleanUp(){var e,r,n;It(e=jc(r=Fo(n=this._cleanupCallbacks).call(n,0)).call(r)).call(e,i=>{try{i()}catch(s){console.error(s)}})}_onResize(){this.setSize(),this.body.emitter.emit("_redraw")}_getCameraState(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.pixelRatio;this.initialized===!0&&(this.cameraState.previousWidth=this.frame.canvas.width/e,this.cameraState.previousHeight=this.frame.canvas.height/e,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/e,y:.5*this.frame.canvas.height/e}))}_setCameraState(){if(this.cameraState.scale!==void 0&&this.frame.canvas.clientWidth!==0&&this.frame.canvas.clientHeight!==0&&this.pixelRatio!==0&&this.cameraState.previousWidth>0&&this.cameraState.previousHeight>0){const e=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,r=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight;let n=this.cameraState.scale;e!=1&&r!=1?n=this.cameraState.scale*.5*(e+r):e!=1?n=this.cameraState.scale*e:r!=1&&(n=this.cameraState.scale*r),this.body.view.scale=n;const i=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),s={x:i.x-this.cameraState.position.x,y:i.y-this.cameraState.position.y};this.body.view.translation.x+=s.x*this.body.view.scale,this.body.view.translation.y+=s.y*this.body.view.scale}}_prepareValue(e){if(typeof e=="number")return e+"px";if(typeof e=="string"){if(wt(e).call(e,"%")!==-1||wt(e).call(e,"px")!==-1)return e;if(wt(e).call(e,"%")===-1)return e+"px"}throw new Error("Could not use the value supplied for width or height:"+e)}_create(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=0,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{const e=document.createElement("DIV");e.style.color="red",e.style.fontWeight="bold",e.style.padding="10px",e.innerText="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(e)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}_bindHammer(){this.hammer!==void 0&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new Od(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:Od.DIRECTION_ALL}),L0(this.hammer,e=>{this.body.eventListeners.onTouch(e)}),this.hammer.on("tap",e=>{this.body.eventListeners.onTap(e)}),this.hammer.on("doubletap",e=>{this.body.eventListeners.onDoubleTap(e)}),this.hammer.on("press",e=>{this.body.eventListeners.onHold(e)}),this.hammer.on("panstart",e=>{this.body.eventListeners.onDragStart(e)}),this.hammer.on("panmove",e=>{this.body.eventListeners.onDrag(e)}),this.hammer.on("panend",e=>{this.body.eventListeners.onDragEnd(e)}),this.hammer.on("pinch",e=>{this.body.eventListeners.onPinch(e)}),this.frame.canvas.addEventListener("wheel",e=>{this.body.eventListeners.onMouseWheel(e)}),this.frame.canvas.addEventListener("mousemove",e=>{this.body.eventListeners.onMouseMove(e)}),this.frame.canvas.addEventListener("contextmenu",e=>{this.body.eventListeners.onContext(e)}),this.hammerFrame=new Od(this.frame),qce(this.hammerFrame,e=>{this.body.eventListeners.onRelease(e)})}setSize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.width,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.height;e=this._prepareValue(e),r=this._prepareValue(r);let n=!1;const i=this.frame.canvas.width,s=this.frame.canvas.height,o=this.pixelRatio;if(this._setPixelRatio(),e!=this.options.width||r!=this.options.height||this.frame.style.width!=e||this.frame.style.height!=r)this._getCameraState(o),this.frame.style.width=e,this.frame.style.height=r,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=e,this.options.height=r,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},n=!0;else{const a=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),l=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);(this.frame.canvas.width!==a||this.frame.canvas.height!==l)&&this._getCameraState(o),this.frame.canvas.width!==a&&(this.frame.canvas.width=a,n=!0),this.frame.canvas.height!==l&&(this.frame.canvas.height=l,n=!0)}return n===!0&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(i/this.pixelRatio),oldHeight:Math.round(s/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,n}getContext(){return this.frame.canvas.getContext("2d")}_determinePixelRatio(){const e=this.getContext();if(e===void 0)throw new Error("Could not get canvax context");let r=1;typeof window<"u"&&(r=window.devicePixelRatio||1);const n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return r/n}_setPixelRatio(){this.pixelRatio=this._determinePixelRatio()}setTransform(){const e=this.getContext();if(e===void 0)throw new Error("Could not get canvax context");e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}_XconvertDOMtoCanvas(e){return(e-this.body.view.translation.x)/this.body.view.scale}_XconvertCanvasToDOM(e){return e*this.body.view.scale+this.body.view.translation.x}_YconvertDOMtoCanvas(e){return(e-this.body.view.translation.y)/this.body.view.scale}_YconvertCanvasToDOM(e){return e*this.body.view.scale+this.body.view.translation.y}canvasToDOM(e){return{x:this._XconvertCanvasToDOM(e.x),y:this._YconvertCanvasToDOM(e.y)}}DOMtoCanvas(e){return{x:this._XconvertDOMtoCanvas(e.x),y:this._YconvertDOMtoCanvas(e.y)}}}function AFe(t,e){const r=Er({nodes:e,minZoomLevel:Number.MIN_VALUE,maxZoomLevel:1},t??{});if(!cr(r.nodes))throw new TypeError("Nodes has to be an array of ids.");if(r.nodes.length===0&&(r.nodes=e),!(typeof r.minZoomLevel=="number"&&r.minZoomLevel>0))throw new TypeError("Min zoom level has to be a number higher than zero.");if(!(typeof r.maxZoomLevel=="number"&&r.minZoomLevel<=r.maxZoomLevel))throw new TypeError("Max zoom level has to be a number higher than min zoom level.");return r}class DFe{constructor(e,r){var n,i;this.body=e,this.canvas=r,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",de(n=this.fit).call(n,this)),this.body.emitter.on("animationFinished",()=>{this.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",de(i=this.releaseNode).call(i,this))}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.options=e}fit(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;e=AFe(e,this.body.nodeIndices);const n=this.canvas.frame.canvas.clientWidth,i=this.canvas.frame.canvas.clientHeight;let s,o;if(n===0||i===0)o=1,s=Mn.getRange(this.body.nodes,e.nodes);else if(r===!0){let u=0;for(const f in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,f)&&this.body.nodes[f].predefinedPosition===!0&&(u+=1);if(u>.5*this.body.nodeIndices.length){this.fit(e,!1);return}s=Mn.getRange(this.body.nodes,e.nodes),o=12.662/(this.body.nodeIndices.length+7.4147)+.0964822;const h=Math.min(n/600,i/600);o*=h}else{this.body.emitter.emit("_resizeNodes"),s=Mn.getRange(this.body.nodes,e.nodes);const u=Math.abs(s.maxX-s.minX)*1.1,d=Math.abs(s.maxY-s.minY)*1.1,h=n/u,f=i/d;o=h<=f?h:f}o>e.maxZoomLevel?o=e.maxZoomLevel:o<e.minZoomLevel&&(o=e.minZoomLevel);const l={position:Mn.findCenter(s),scale:o,animation:e.animation};this.moveTo(l)}focus(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.body.nodes[e]!==void 0){const n={x:this.body.nodes[e].x,y:this.body.nodes[e].y};r.position=n,r.lockedOnNode=e,this.moveTo(r)}else console.error("Node: "+e+" cannot be found.")}moveTo(e){if(e===void 0){e={};return}if(e.offset!=null){if(e.offset.x!=null){if(e.offset.x=+e.offset.x,!lc(e.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.')}else e.offset.x=0;if(e.offset.y!=null){if(e.offset.y=+e.offset.y,!lc(e.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else e.offset.x=0}else e.offset={x:0,y:0};if(e.position!=null){if(e.position.x!=null){if(e.position.x=+e.position.x,!lc(e.position.x))throw new TypeError('The option "position.x" has to be a finite number.')}else e.position.x=0;if(e.position.y!=null){if(e.position.y=+e.position.y,!lc(e.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else e.position.x=0}else e.position=this.getViewPosition();if(e.scale!=null){if(e.scale=+e.scale,!(e.scale>0))throw new TypeError('The option "scale" has to be a number greater than zero.')}else e.scale=this.body.view.scale;e.animation===void 0&&(e.animation={duration:0}),e.animation===!1&&(e.animation={duration:0}),e.animation===!0&&(e.animation={}),e.animation.duration===void 0&&(e.animation.duration=1e3),e.animation.easingFunction===void 0&&(e.animation.easingFunction="easeInOutQuad"),this.animateView(e)}animateView(e){if(e===void 0)return;this.animationEasingFunction=e.animation.easingFunction,this.releaseNode(),e.locked===!0&&(this.lockedOnNodeId=e.lockedOnNode,this.lockedOnNodeOffset=e.offset),this.easingTime!=0&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=e.scale,this.body.view.scale=this.targetScale;const r=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n={x:r.x-e.position.x,y:r.y-e.position.y};if(this.targetTranslation={x:this.sourceTranslation.x+n.x*this.targetScale+e.offset.x,y:this.sourceTranslation.y+n.y*this.targetScale+e.offset.y},e.animation.duration===0)if(this.lockedOnNodeId!=null){var i;this.viewFunction=de(i=this._lockedRedraw).call(i,this),this.body.emitter.on("initRedraw",this.viewFunction)}else this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw");else{var s;this.animationSpeed=1/(60*e.animation.duration*.001)||1/60,this.animationEasingFunction=e.animation.easingFunction,this.viewFunction=de(s=this._transitionRedraw).call(s,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}_lockedRedraw(){const e={x:this.body.nodes[this.lockedOnNodeId].x,y:this.body.nodes[this.lockedOnNodeId].y},r=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n={x:r.x-e.x,y:r.y-e.y},i=this.body.view.translation,s={x:i.x+n.x*this.body.view.scale+this.lockedOnNodeOffset.x,y:i.y+n.y*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=s}releaseNode(){this.lockedOnNodeId!==void 0&&this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}_transitionRedraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.easingTime+=this.animationSpeed,this.easingTime=e===!0?1:this.easingTime;const r=V$e[this.animationEasingFunction](this.easingTime);if(this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*r,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*r,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*r},this.easingTime>=1){if(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,this.lockedOnNodeId!=null){var n;this.viewFunction=de(n=this._lockedRedraw).call(n,this),this.body.emitter.on("initRedraw",this.viewFunction)}this.body.emitter.emit("animationFinished")}}getScale(){return this.body.view.scale}getViewPosition(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}function nJ(t){var e=t&&t.preventDefault||!1,r=t&&t.container||window,n={},i={keydown:{},keyup:{}},s={},o;for(o=97;o<=122;o++)s[String.fromCharCode(o)]={code:65+(o-97),shift:!1};for(o=65;o<=90;o++)s[String.fromCharCode(o)]={code:o,shift:!0};for(o=0;o<=9;o++)s[""+o]={code:48+o,shift:!1};for(o=1;o<=12;o++)s["F"+o]={code:111+o,shift:!1};for(o=0;o<=9;o++)s["num"+o]={code:96+o,shift:!1};s["num*"]={code:106,shift:!1},s["num+"]={code:107,shift:!1},s["num-"]={code:109,shift:!1},s["num/"]={code:111,shift:!1},s["num."]={code:110,shift:!1},s.left={code:37,shift:!1},s.up={code:38,shift:!1},s.right={code:39,shift:!1},s.down={code:40,shift:!1},s.space={code:32,shift:!1},s.enter={code:13,shift:!1},s.shift={code:16,shift:void 0},s.esc={code:27,shift:!1},s.backspace={code:8,shift:!1},s.tab={code:9,shift:!1},s.ctrl={code:17,shift:!1},s.alt={code:18,shift:!1},s.delete={code:46,shift:!1},s.pageup={code:33,shift:!1},s.pagedown={code:34,shift:!1},s["="]={code:187,shift:!1},s["-"]={code:189,shift:!1},s["]"]={code:221,shift:!1},s["["]={code:219,shift:!1};var a=function(d){u(d,"keydown")},l=function(d){u(d,"keyup")},u=function(d,h){if(i[h][d.keyCode]!==void 0){for(var f=i[h][d.keyCode],p=0;p<f.length;p++)(f[p].shift===void 0||f[p].shift==!0&&d.shiftKey==!0||f[p].shift==!1&&d.shiftKey==!1)&&f[p].fn(d);e==!0&&d.preventDefault()}};return n.bind=function(d,h,f){if(f===void 0&&(f="keydown"),s[d]===void 0)throw new Error("unsupported key: "+d);i[f][s[d].code]===void 0&&(i[f][s[d].code]=[]),i[f][s[d].code].push({fn:h,shift:s[d].shift})},n.bindAll=function(d,h){h===void 0&&(h="keydown");for(var f in s)s.hasOwnProperty(f)&&n.bind(f,d,h)},n.getKey=function(d){for(var h in s)if(s.hasOwnProperty(h)){if(d.shiftKey==!0&&s[h].shift==!0&&d.keyCode==s[h].code)return h;if(d.shiftKey==!1&&s[h].shift==!1&&d.keyCode==s[h].code)return h;if(d.keyCode==s[h].code&&h=="shift")return h}return"unknown key, currently not supported"},n.unbind=function(d,h,f){if(f===void 0&&(f="keydown"),s[d]===void 0)throw new Error("unsupported key: "+d);if(h!==void 0){var p=[],m=i[f][s[d].code];if(m!==void 0)for(var g=0;g<m.length;g++)m[g].fn==h&&m[g].shift==s[d].shift||p.push(i[f][s[d].code][g]);i[f][s[d].code]=p}else i[f][s[d].code]=[]},n.reset=function(){i={keydown:{},keyup:{}}},n.destroy=function(){i={keydown:{},keyup:{}},r.removeEventListener("keydown",a,!0),r.removeEventListener("keyup",l,!0)},r.addEventListener("keydown",a,!0),r.addEventListener("keyup",l,!0),n}class $Fe{constructor(e,r){this.body=e,this.canvas=r,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",()=>{this.activated=!0,this.configureKeyboardBindings()}),this.body.emitter.on("deactivate",()=>{this.activated=!1,this.configureKeyboardBindings()}),this.body.emitter.on("destroy",()=>{this.keycharm!==void 0&&this.keycharm.destroy()}),this.options={}}setOptions(e){e!==void 0&&(this.options=e,this.create())}create(){this.options.navigationButtons===!0?this.iconsCreated===!1&&this.loadNavigationElements():this.iconsCreated===!0&&this.cleanNavigation(),this.configureKeyboardBindings()}cleanNavigation(){if(this.navigationHammers.length!=0){for(let e=0;e<this.navigationHammers.length;e++)this.navigationHammers[e].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}loadNavigationElements(){this.cleanNavigation(),this.navigationDOM={};const e=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],r=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(let o=0;o<e.length;o++){this.navigationDOM[e[o]]=document.createElement("div"),this.navigationDOM[e[o]].className="vis-button vis-"+e[o],this.navigationDOM.wrapper.appendChild(this.navigationDOM[e[o]]);const a=new Od(this.navigationDOM[e[o]]);if(r[o]==="_fit"){var n;L0(a,de(n=this._fit).call(n,this))}else{var i;L0(a,de(i=this.bindToRedraw).call(i,this,r[o]))}this.navigationHammers.push(a)}const s=new Od(this.canvas.frame);qce(s,()=>{this._stopMovement()}),this.navigationHammers.push(s),this.iconsCreated=!0}bindToRedraw(e){if(this.boundFunctions[e]===void 0){var r;this.boundFunctions[e]=de(r=this[e]).call(r,this),this.body.emitter.on("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_startRendering")}}unbindFromRedraw(e){this.boundFunctions[e]!==void 0&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[e])}_fit(){new Date().valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=new Date().valueOf())}_stopMovement(){for(const e in this.boundFunctions)Object.prototype.hasOwnProperty.call(this.boundFunctions,e)&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}_moveUp(){this.body.view.translation.y+=this.options.keyboard.speed.y}_moveDown(){this.body.view.translation.y-=this.options.keyboard.speed.y}_moveLeft(){this.body.view.translation.x+=this.options.keyboard.speed.x}_moveRight(){this.body.view.translation.x-=this.options.keyboard.speed.x}_zoomIn(){const e=this.body.view.scale,r=this.body.view.scale*(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=r/e,s=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,o=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=r,this.body.view.translation={x:s,y:o},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}_zoomOut(){const e=this.body.view.scale,r=this.body.view.scale/(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=r/e,s=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,o=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=r,this.body.view.translation={x:s,y:o},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}configureKeyboardBindings(){if(this.keycharm!==void 0&&this.keycharm.destroy(),this.options.keyboard.enabled===!0&&(this.options.keyboard.bindToWindow===!0?this.keycharm=nJ({container:window,preventDefault:!0}):this.keycharm=nJ({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),this.activated===!0)){var e,r,n,i,s,o,a,l,u,d,h,f,p,m,g,y,v,b,w,x,S,E,N,_;de(e=this.keycharm).call(e,"up",()=>{this.bindToRedraw("_moveUp")},"keydown"),de(r=this.keycharm).call(r,"down",()=>{this.bindToRedraw("_moveDown")},"keydown"),de(n=this.keycharm).call(n,"left",()=>{this.bindToRedraw("_moveLeft")},"keydown"),de(i=this.keycharm).call(i,"right",()=>{this.bindToRedraw("_moveRight")},"keydown"),de(s=this.keycharm).call(s,"=",()=>{this.bindToRedraw("_zoomIn")},"keydown"),de(o=this.keycharm).call(o,"num+",()=>{this.bindToRedraw("_zoomIn")},"keydown"),de(a=this.keycharm).call(a,"num-",()=>{this.bindToRedraw("_zoomOut")},"keydown"),de(l=this.keycharm).call(l,"-",()=>{this.bindToRedraw("_zoomOut")},"keydown"),de(u=this.keycharm).call(u,"[",()=>{this.bindToRedraw("_zoomOut")},"keydown"),de(d=this.keycharm).call(d,"]",()=>{this.bindToRedraw("_zoomIn")},"keydown"),de(h=this.keycharm).call(h,"pageup",()=>{this.bindToRedraw("_zoomIn")},"keydown"),de(f=this.keycharm).call(f,"pagedown",()=>{this.bindToRedraw("_zoomOut")},"keydown"),de(p=this.keycharm).call(p,"up",()=>{this.unbindFromRedraw("_moveUp")},"keyup"),de(m=this.keycharm).call(m,"down",()=>{this.unbindFromRedraw("_moveDown")},"keyup"),de(g=this.keycharm).call(g,"left",()=>{this.unbindFromRedraw("_moveLeft")},"keyup"),de(y=this.keycharm).call(y,"right",()=>{this.unbindFromRedraw("_moveRight")},"keyup"),de(v=this.keycharm).call(v,"=",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),de(b=this.keycharm).call(b,"num+",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),de(w=this.keycharm).call(w,"num-",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),de(x=this.keycharm).call(x,"-",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),de(S=this.keycharm).call(S,"[",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),de(E=this.keycharm).call(E,"]",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),de(N=this.keycharm).call(N,"pageup",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),de(_=this.keycharm).call(_,"pagedown",()=>{this.unbindFromRedraw("_zoomOut")},"keyup")}}}class FFe{constructor(e,r,n){var i,s,o,a,l,u,d,h,f,p,m,g,y;this.body=e,this.canvas=r,this.selectionHandler=n,this.navigationHandler=new $Fe(e,r),this.body.eventListeners.onTap=de(i=this.onTap).call(i,this),this.body.eventListeners.onTouch=de(s=this.onTouch).call(s,this),this.body.eventListeners.onDoubleTap=de(o=this.onDoubleTap).call(o,this),this.body.eventListeners.onHold=de(a=this.onHold).call(a,this),this.body.eventListeners.onDragStart=de(l=this.onDragStart).call(l,this),this.body.eventListeners.onDrag=de(u=this.onDrag).call(u,this),this.body.eventListeners.onDragEnd=de(d=this.onDragEnd).call(d,this),this.body.eventListeners.onMouseWheel=de(h=this.onMouseWheel).call(h,this),this.body.eventListeners.onPinch=de(f=this.onPinch).call(f,this),this.body.eventListeners.onMouseMove=de(p=this.onMouseMove).call(p,this),this.body.eventListeners.onRelease=de(m=this.onRelease).call(m,this),this.body.eventListeners.onContext=de(g=this.onContext).call(g,this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=de(y=this.getPointer).call(y,this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0,autoFocus:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},Er(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("destroy",()=>{clearTimeout(this.popupTimer),delete this.body.functions.getPointer})}setOptions(e){e!==void 0&&($0(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"],this.options,e),Fi(this.options,e,"keyboard"),e.tooltip&&(Er(this.options.tooltip,e.tooltip),e.tooltip.color&&(this.options.tooltip.color=HR(e.tooltip.color)))),this.navigationHandler.setOptions(this.options)}getPointer(e){return{x:e.x-L$e(this.canvas.frame.canvas),y:e.y-B$e(this.canvas.frame.canvas)}}onTouch(e){new Date().valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(e.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=new Date().valueOf())}onTap(e){const r=this.getPointer(e.center),n=this.selectionHandler.options.multiselect&&(e.changedPointers[0].ctrlKey||e.changedPointers[0].metaKey);this.checkSelectionChanges(r,n),this.selectionHandler.commitAndEmit(r,e),this.selectionHandler.generateClickEvent("click",e,r)}onDoubleTap(e){const r=this.getPointer(e.center);this.selectionHandler.generateClickEvent("doubleClick",e,r)}onHold(e){const r=this.getPointer(e.center),n=this.selectionHandler.options.multiselect;this.checkSelectionChanges(r,n),this.selectionHandler.commitAndEmit(r,e),this.selectionHandler.generateClickEvent("click",e,r),this.selectionHandler.generateClickEvent("hold",e,r)}onRelease(e){if(new Date().valueOf()-this.touchTime>10){const r=this.getPointer(e.center);this.selectionHandler.generateClickEvent("release",e,r),this.touchTime=new Date().valueOf()}}onContext(e){const r=this.getPointer({x:e.clientX,y:e.clientY});this.selectionHandler.generateClickEvent("oncontext",e,r)}checkSelectionChanges(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)===!0?this.selectionHandler.selectAdditionalOnPoint(e):this.selectionHandler.selectOnPoint(e)}_determineDifference(e,r){const n=function(i,s){const o=[];for(let a=0;a<i.length;a++){const l=i[a];wt(s).call(s,l)===-1&&o.push(l)}return o};return{nodes:n(e.nodes,r.nodes),edges:n(e.edges,r.edges)}}onDragStart(e){if(this.drag.dragging)return;this.drag.pointer===void 0&&this.onTouch(e);const r=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=Er({},this.body.view.translation),this.drag.nodeId=void 0,e.srcEvent.shiftKey){this.body.selectionBox.show=!0;const n=this.getPointer(e.center);this.body.selectionBox.position.start={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)},this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)}}else if(r!==void 0&&this.options.dragNodes===!0){this.drag.nodeId=r.id,r.isSelected()===!1&&this.selectionHandler.setSelection({nodes:[r.id]}),this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer);for(const n of this.selectionHandler.getSelectedNodes()){const i={id:n.id,node:n,x:n.x,y:n.y,xFixed:n.options.fixed.x,yFixed:n.options.fixed.y};n.options.fixed.x=!0,n.options.fixed.y=!0,this.drag.selection.push(i)}}else this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer,void 0,!0)}onDrag(e){if(this.drag.pinched===!0)return;this.body.emitter.emit("unlockNode");const r=this.getPointer(e.center),n=this.drag.selection;if(n&&n.length&&this.options.dragNodes===!0){this.selectionHandler.generateClickEvent("dragging",e,r);const i=r.x-this.drag.pointer.x,s=r.y-this.drag.pointer.y;It(n).call(n,o=>{const a=o.node;o.xFixed===!1&&(a.x=this.canvas._XconvertDOMtoCanvas(this.canvas._XconvertCanvasToDOM(o.x)+i)),o.yFixed===!1&&(a.y=this.canvas._YconvertDOMtoCanvas(this.canvas._YconvertCanvasToDOM(o.y)+s))}),this.body.emitter.emit("startSimulation")}else{if(e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,r,void 0,!0),this.drag.pointer===void 0){this.onDragStart(e);return}this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(r.x),y:this.canvas._YconvertDOMtoCanvas(r.y)},this.body.emitter.emit("_requestRedraw")}if(this.options.dragView===!0&&!e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,r,void 0,!0),this.drag.pointer===void 0){this.onDragStart(e);return}const i=r.x-this.drag.pointer.x,s=r.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+i,y:this.drag.translation.y+s},this.body.emitter.emit("_requestRedraw")}}}onDragEnd(e){if(this.drag.dragging=!1,this.body.selectionBox.show){var r;this.body.selectionBox.show=!1;const n=this.body.selectionBox.position,i={minX:Math.min(n.start.x,n.end.x),minY:Math.min(n.start.y,n.end.y),maxX:Math.max(n.start.x,n.end.x),maxY:Math.max(n.start.y,n.end.y)},s=ti(r=this.body.nodeIndices).call(r,a=>{const l=this.body.nodes[a];return l.x>=i.minX&&l.x<=i.maxX&&l.y>=i.minY&&l.y<=i.maxY});It(s).call(s,a=>this.selectionHandler.selectObject(this.body.nodes[a]));const o=this.getPointer(e.center);this.selectionHandler.commitAndEmit(o,e),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw")}else{const n=this.drag.selection;n&&n.length?(It(n).call(n,function(i){i.node.options.fixed.x=i.xFixed,i.node.options.fixed.y=i.yFixed}),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}}onPinch(e){const r=this.getPointer(e.center);this.drag.pinched=!0,this.pinch.scale===void 0&&(this.pinch.scale=1);const n=this.pinch.scale*e.scale;this.zoom(n,r)}zoom(e,r){if(this.options.zoomView===!0){const n=this.body.view.scale;e<1e-5&&(e=1e-5),e>10&&(e=10);let i;this.drag!==void 0&&this.drag.dragging===!0&&(i=this.canvas.DOMtoCanvas(this.drag.pointer));const s=this.body.view.translation,o=e/n,a=(1-o)*r.x+s.x*o,l=(1-o)*r.y+s.y*o;if(this.body.view.scale=e,this.body.view.translation={x:a,y:l},i!=null){const u=this.canvas.canvasToDOM(i);this.drag.pointer.x=u.x,this.drag.pointer.y=u.y}this.body.emitter.emit("_requestRedraw"),n<e?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:r}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:r})}}onMouseWheel(e){if(this.options.zoomView===!0){if(e.deltaY!==0){let r=this.body.view.scale;r*=1+(e.deltaY<0?1:-1)*(this.options.zoomSpeed*.1);const n=this.getPointer({x:e.clientX,y:e.clientY});this.zoom(r,n)}e.preventDefault()}}onMouseMove(e){const r=this.getPointer({x:e.clientX,y:e.clientY});let n=!1;this.popup!==void 0&&(this.popup.hidden===!1&&this._checkHidePopup(r),this.popup.hidden===!1&&(n=!0,this.popup.setPosition(r.x+3,r.y-5),this.popup.show())),this.options.keyboard.autoFocus&&this.options.keyboard.bindToWindow===!1&&this.options.keyboard.enabled===!0&&this.canvas.frame.focus(),n===!1&&(this.popupTimer!==void 0&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=qo(()=>this._checkShowPopup(r),this.options.tooltipDelay))),this.options.hover===!0&&this.selectionHandler.hoverObject(e,r)}_checkShowPopup(e){const r=this.canvas._XconvertDOMtoCanvas(e.x),n=this.canvas._YconvertDOMtoCanvas(e.y),i={left:r,top:n,right:r,bottom:n},s=this.popupObj===void 0?void 0:this.popupObj.id;let o=!1,a="node";if(this.popupObj===void 0){const l=this.body.nodeIndices,u=this.body.nodes;let d;const h=[];for(let f=0;f<l.length;f++)d=u[l[f]],d.isOverlappingWith(i)===!0&&(o=!0,d.getTitle()!==void 0&&h.push(l[f]));h.length>0&&(this.popupObj=u[h[h.length-1]],o=!0)}if(this.popupObj===void 0&&o===!1){const l=this.body.edgeIndices,u=this.body.edges;let d;const h=[];for(let f=0;f<l.length;f++)d=u[l[f]],d.isOverlappingWith(i)===!0&&d.connected===!0&&d.getTitle()!==void 0&&h.push(l[f]);h.length>0&&(this.popupObj=u[h[h.length-1]],a="edge")}this.popupObj!==void 0?this.popupObj.id!==s&&(this.popup===void 0&&(this.popup=new J$e(this.canvas.frame)),this.popup.popupTargetType=a,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(e.x+3,e.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):this.popup!==void 0&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}_checkHidePopup(e){const r=this.selectionHandler._pointerToPositionObject(e);let n=!1;if(this.popup.popupTargetType==="node"){if(this.body.nodes[this.popup.popupTargetId]!==void 0&&(n=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(r),n===!0)){const i=this.selectionHandler.getNodeAt(e);n=i===void 0?!1:i.id===this.popup.popupTargetId}}else this.selectionHandler.getNodeAt(e)===void 0&&this.body.edges[this.popup.popupTargetId]!==void 0&&(n=this.body.edges[this.popup.popupTargetId].isOverlappingWith(r));n===!1&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}var iJ={},sJ={},oJ;function qFe(){if(oJ)return sJ;oJ=1;var t=p$(),e=jce();return t("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),sJ}var aJ;function LFe(){return aJ||(aJ=1,qFe()),iJ}var lJ={},PO,cJ;function Cu(){if(cJ)return PO;cJ=1;var t=Yh(),e=TypeError;return PO=function(r){if(typeof r=="object"&&"size"in r&&"has"in r&&"add"in r&&"delete"in r&&"keys"in r)return r;throw new e(t(r)+" is not a set")},PO}var IO,uJ;function ku(){if(uJ)return IO;uJ=1;var t=Ti(),e=Tce(),r=t("Set"),n=r.prototype;return IO={Set:r,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:n},IO}var RO,dJ;function ju(){if(dJ)return RO;dJ=1;var t=pi();return RO=function(e,r,n){for(var i=n?e:e.iterator,s=e.next,o,a;!(o=t(s,i)).done;)if(a=r(o.value),a!==void 0)return a},RO}var MO,hJ;function wg(){if(hJ)return MO;hJ=1;var t=ju();return MO=function(e,r,n){return n?t(e.keys(),r,!0):e.forEach(r)},MO}var AO,fJ;function w$(){if(fJ)return AO;fJ=1;var t=ku(),e=wg(),r=t.Set,n=t.add;return AO=function(i){var s=new r;return e(i,function(o){n(s,o)}),s},AO}var DO,pJ;function Sg(){return pJ||(pJ=1,DO=function(t){return t.size}),DO}var $O,mJ;function BFe(){return mJ||(mJ=1,$O=function(t){return{iterator:t,next:t.next,done:!1}}),$O}var FO,gJ;function Tu(){if(gJ)return FO;gJ=1;var t=oa(),e=no(),r=pi(),n=Zh(),i=BFe(),s="Invalid size",o=RangeError,a=TypeError,l=Math.max,u=function(d,h){this.set=d,this.size=l(h,0),this.has=t(d.has),this.keys=t(d.keys)};return u.prototype={getIterator:function(){return i(e(r(this.keys,this.set)))},includes:function(d){return r(this.has,this.set,d)}},FO=function(d){e(d);var h=+d.size;if(h!==h)throw new a(s);var f=n(h);if(f<0)throw new o(s);return new u(d,f)},FO}var qO,yJ;function zFe(){if(yJ)return qO;yJ=1;var t=Cu(),e=ku(),r=w$(),n=Sg(),i=Tu(),s=wg(),o=ju(),a=e.has,l=e.remove;return qO=function(d){var h=t(this),f=i(d),p=r(h);return n(h)<=f.size?s(h,function(m){f.includes(m)&&l(p,m)}):o(f.getIterator(),function(m){a(p,m)&&l(p,m)}),p},qO}var LO,vJ;function Ou(){return vJ||(vJ=1,LO=function(){return!1}),LO}var bJ;function WFe(){if(bJ)return lJ;bJ=1;var t=Pe(),e=zFe(),r=ct(),n=Ou(),i=!n("difference",function(o){return o.size===0}),s=i||r(function(){var o={size:1,has:function(){return!0},keys:function(){var l=0;return{next:function(){var u=l++>1;return a.has(1)&&a.clear(),{done:u,value:2}}}}},a=new Set([1,2,3,4]);return a.difference(o).size!==3});return t({target:"Set",proto:!0,real:!0,forced:s},{difference:e}),lJ}var xJ={},BO,wJ;function VFe(){if(wJ)return BO;wJ=1;var t=Cu(),e=ku(),r=Sg(),n=Tu(),i=wg(),s=ju(),o=e.Set,a=e.add,l=e.has;return BO=function(d){var h=t(this),f=n(d),p=new o;return r(h)>f.size?s(f.getIterator(),function(m){l(h,m)&&a(p,m)}):i(h,function(m){f.includes(m)&&a(p,m)}),p},BO}var SJ;function UFe(){if(SJ)return xJ;SJ=1;var t=Pe(),e=ct(),r=VFe(),n=Ou(),i=!n("intersection",function(s){return s.size===2&&s.has(1)&&s.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return t({target:"Set",proto:!0,real:!0,forced:i},{intersection:r}),xJ}var EJ={},zO,_J;function HFe(){if(_J)return zO;_J=1;var t=Cu(),e=ku().has,r=Sg(),n=Tu(),i=wg(),s=ju(),o=h$();return zO=function(l){var u=t(this),d=n(l);if(r(u)<=d.size)return i(u,function(f){if(d.includes(f))return!1},!0)!==!1;var h=d.getIterator();return s(h,function(f){if(e(u,f))return o(h,"normal",!1)})!==!1},zO}var NJ;function KFe(){if(NJ)return EJ;NJ=1;var t=Pe(),e=HFe(),r=Ou(),n=!r("isDisjointFrom",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:e}),EJ}var CJ={},WO,kJ;function GFe(){if(kJ)return WO;kJ=1;var t=Cu(),e=Sg(),r=wg(),n=Tu();return WO=function(s){var o=t(this),a=n(s);return e(o)>a.size?!1:r(o,function(l){if(!a.includes(l))return!1},!0)!==!1},WO}var jJ;function YFe(){if(jJ)return CJ;jJ=1;var t=Pe(),e=GFe(),r=Ou(),n=!r("isSubsetOf",function(i){return i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:e}),CJ}var TJ={},VO,OJ;function QFe(){if(OJ)return VO;OJ=1;var t=Cu(),e=ku().has,r=Sg(),n=Tu(),i=ju(),s=h$();return VO=function(a){var l=t(this),u=n(a);if(r(l)<u.size)return!1;var d=u.getIterator();return i(d,function(h){if(!e(l,h))return s(d,"normal",!1)})!==!1},VO}var PJ;function XFe(){if(PJ)return TJ;PJ=1;var t=Pe(),e=QFe(),r=Ou(),n=!r("isSupersetOf",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:e}),TJ}var IJ={},UO,RJ;function JFe(){if(RJ)return UO;RJ=1;var t=Cu(),e=ku(),r=w$(),n=Tu(),i=ju(),s=e.add,o=e.has,a=e.remove;return UO=function(u){var d=t(this),h=n(u).getIterator(),f=r(d);return i(h,function(p){o(d,p)?a(f,p):s(f,p)}),f},UO}var HO,MJ;function Lce(){return MJ||(MJ=1,HO=function(t){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[t](r);return n.size===1&&n.values().next().value===4}catch{return!1}}),HO}var AJ;function ZFe(){if(AJ)return IJ;AJ=1;var t=Pe(),e=JFe(),r=Lce(),n=Ou(),i=!n("symmetricDifference")||!r("symmetricDifference");return t({target:"Set",proto:!0,real:!0,forced:i},{symmetricDifference:e}),IJ}var DJ={},KO,$J;function eqe(){if($J)return KO;$J=1;var t=Cu(),e=ku().add,r=w$(),n=Tu(),i=ju();return KO=function(o){var a=t(this),l=n(o).getIterator(),u=r(a);return i(l,function(d){e(u,d)}),u},KO}var FJ;function tqe(){if(FJ)return DJ;FJ=1;var t=Pe(),e=eqe(),r=Lce(),n=Ou(),i=!n("union")||!r("union");return t({target:"Set",proto:!0,real:!0,forced:i},{union:e}),DJ}var GO,qJ;function rqe(){if(qJ)return GO;qJ=1,nf(),LFe(),WFe(),UFe(),KFe(),YFe(),XFe(),ZFe(),tqe(),g$();var t=_t();return GO=t.Set,GO}var YO,LJ;function nqe(){if(LJ)return YO;LJ=1;var t=rqe();return sf(),YO=t,YO}var QO,BJ;function iqe(){return BJ||(BJ=1,QO=nqe()),QO}var sqe=iqe(),Ta=ze(sqe),zJ={},WJ={},XO,VJ;function oqe(){if(VJ)return XO;VJ=1;var t=dt(),e=m$(),r=m1().getWeakData,n=f$(),i=no(),s=Hh(),o=Zr(),a=g1(),l=Al(),u=fn(),d=Eu(),h=d.set,f=d.getterFor,p=l.find,m=l.findIndex,g=t([].splice),y=0,v=function(x){return x.frozen||(x.frozen=new b)},b=function(){this.entries=[]},w=function(x,S){return p(x.entries,function(E){return E[0]===S})};return b.prototype={get:function(x){var S=w(this,x);if(S)return S[1]},has:function(x){return!!w(this,x)},set:function(x,S){var E=w(this,x);E?E[1]=S:this.entries.push([x,S])},delete:function(x){var S=m(this.entries,function(E){return E[0]===x});return~S&&g(this.entries,S,1),!!~S}},XO={getConstructor:function(x,S,E,N){var _=x(function(P,O){n(P,k),h(P,{type:S,id:y++,frozen:null}),s(O)||a(O,P[N],{that:P,AS_ENTRIES:E})}),k=_.prototype,j=f(S),T=function(P,O,D){var F=j(P),$=r(i(O),!0);return $===!0?v(F).set(O,D):$[F.id]=D,P};return e(k,{delete:function(P){var O=j(this);if(!o(P))return!1;var D=r(P);return D===!0?v(O).delete(P):D&&u(D,O.id)&&delete D[O.id]},has:function(O){var D=j(this);if(!o(O))return!1;var F=r(O);return F===!0?v(D).has(O):F&&u(F,D.id)}}),e(k,E?{get:function(O){var D=j(this);if(o(O)){var F=r(O);if(F===!0)return v(D).get(O);if(F)return F[D.id]}},set:function(O,D){return T(this,O,D)}}:{add:function(O){return T(this,O,!0)}}),_}},XO}var UJ;function aqe(){if(UJ)return WJ;UJ=1;var t=Cce(),e=Ut(),r=dt(),n=m$(),i=m1(),s=p$(),o=oqe(),a=Zr(),l=Eu().enforce,u=ct(),d=jle(),h=Object,f=Array.isArray,p=h.isExtensible,m=h.isFrozen,g=h.isSealed,y=h.freeze,v=h.seal,b=!e.ActiveXObject&&"ActiveXObject"in e,w,x=function(P){return function(){return P(this,arguments.length?arguments[0]:void 0)}},S=s("WeakMap",x,o),E=S.prototype,N=r(E.set),_=function(){return t&&u(function(){var P=y([]);return N(new S,P,1),!m(P)})};if(d)if(b){w=o.getConstructor(x,"WeakMap",!0),i.enable();var k=r(E.delete),j=r(E.has),T=r(E.get);n(E,{delete:function(P){if(a(P)&&!p(P)){var O=l(this);return O.frozen||(O.frozen=new w),k(this,P)||O.frozen.delete(P)}return k(this,P)},has:function(O){if(a(O)&&!p(O)){var D=l(this);return D.frozen||(D.frozen=new w),j(this,O)||D.frozen.has(O)}return j(this,O)},get:function(O){if(a(O)&&!p(O)){var D=l(this);return D.frozen||(D.frozen=new w),j(this,O)?T(this,O):D.frozen.get(O)}return T(this,O)},set:function(O,D){if(a(O)&&!p(O)){var F=l(this);F.frozen||(F.frozen=new w),j(this,O)?N(this,O,D):F.frozen.set(O,D)}else N(this,O,D);return this}})}else _()&&n(E,{set:function(O,D){var F;return f(O)&&(m(O)?F=y:g(O)&&(F=v)),N(this,O,D),F&&F(O),this}});return WJ}var HJ;function lqe(){return HJ||(HJ=1,aqe()),zJ}var JO,KJ;function cqe(){if(KJ)return JO;KJ=1,nf(),lqe();var t=_t();return JO=t.WeakMap,JO}var ZO,GJ;function uqe(){if(GJ)return ZO;GJ=1;var t=cqe();return sf(),ZO=t,ZO}var eP,YJ;function dqe(){return YJ||(YJ=1,eP=uqe()),eP}var hqe=dqe(),Eg=ze(hqe);function wp(t,e,r){fqe(t,e),e.set(t,r)}function fqe(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function JR(t,e,r){return t.set(Bce(t,e),r),r}function Mt(t,e){return t.get(Bce(t,e))}function Bce(t,e,r){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function QJ(t,e){const r=new Ta;for(const n of e)t.has(n)||r.add(n);return r}var Uu=new Eg,as=new Eg;class XJ{constructor(){wp(this,Uu,new Ta),wp(this,as,new Ta)}get size(){return Mt(as,this).size}add(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(const i of r)Mt(as,this).add(i)}delete(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(const i of r)Mt(as,this).delete(i)}clear(){Mt(as,this).clear()}getSelection(){return[...Mt(as,this)]}getChanges(){return{added:[...QJ(Mt(Uu,this),Mt(as,this))],deleted:[...QJ(Mt(as,this),Mt(Uu,this))],previous:[...new Ta(Mt(Uu,this))],current:[...new Ta(Mt(as,this))]}}commit(){const e=this.getChanges();JR(Uu,this,Mt(as,this)),JR(as,this,new Ta(Mt(Uu,this)));for(const r of e.added)r.select();for(const r of e.deleted)r.unselect();return e}}var zl=new Eg,Wl=new Eg,tP=new Eg;class pqe{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:()=>{};wp(this,zl,new XJ),wp(this,Wl,new XJ),wp(this,tP,void 0),JR(tP,this,e)}get sizeNodes(){return Mt(zl,this).size}get sizeEdges(){return Mt(Wl,this).size}getNodes(){return Mt(zl,this).getSelection()}getEdges(){return Mt(Wl,this).getSelection()}addNodes(){Mt(zl,this).add(...arguments)}addEdges(){Mt(Wl,this).add(...arguments)}deleteNodes(e){Mt(zl,this).delete(e)}deleteEdges(e){Mt(Wl,this).delete(e)}clear(){Mt(zl,this).clear(),Mt(Wl,this).clear()}commit(){const e={nodes:Mt(zl,this).commit(),edges:Mt(Wl,this).commit()};for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return Mt(tP,this).call(this,e,...n),e}}class mqe{constructor(e,r){this.body=e,this.canvas=r,this._selectionAccumulator=new pqe,this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},Er(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",()=>{this.updateSelection()})}setOptions(e){e!==void 0&&lf(["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"],this.options,e)}selectOnPoint(e){let r=!1;if(this.options.selectable===!0){const n=this.getNodeAt(e)||this.getEdgeAt(e);this.unselectAll(),n!==void 0&&(r=this.selectObject(n)),this.body.emitter.emit("_requestRedraw")}return r}selectAdditionalOnPoint(e){let r=!1;if(this.options.selectable===!0){const n=this.getNodeAt(e)||this.getEdgeAt(e);n!==void 0&&(r=!0,n.isSelected()===!0?this.deselectObject(n):this.selectObject(n),this.body.emitter.emit("_requestRedraw"))}return r}_initBaseEvent(e,r){const n={};return n.pointer={DOM:{x:r.x,y:r.y},canvas:this.canvas.DOMtoCanvas(r)},n.event=e,n}generateClickEvent(e,r,n,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;const o=this._initBaseEvent(r,n);if(s===!0)o.nodes=[],o.edges=[];else{const a=this.getSelection();o.nodes=a.nodes,o.edges=a.edges}i!==void 0&&(o.previousSelection=i),e=="click"&&(o.items=this.getClickedItems(n)),r.controlEdge!==void 0&&(o.controlEdge=r.controlEdge),this.body.emitter.emit(e,o)}selectObject(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.selectConnectedEdges;return e!==void 0?(e instanceof Wt?(r===!0&&this._selectionAccumulator.addEdges(...e.edges),this._selectionAccumulator.addNodes(e)):this._selectionAccumulator.addEdges(e),!0):!1}deselectObject(e){e.isSelected()===!0&&(e.selected=!1,this._removeFromSelection(e))}_getAllNodesOverlappingWith(e){const r=[],n=this.body.nodes;for(let i=0;i<this.body.nodeIndices.length;i++){const s=this.body.nodeIndices[i];n[s].isOverlappingWith(e)&&r.push(s)}return r}_pointerToPositionObject(e){const r=this.canvas.DOMtoCanvas(e);return{left:r.x-1,top:r.y+1,right:r.x+1,bottom:r.y-1}}getNodeAt(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=this._pointerToPositionObject(e),i=this._getAllNodesOverlappingWith(n);if(i.length>0)return r===!0?this.body.nodes[i[i.length-1]]:i[i.length-1]}_getEdgesOverlappingWith(e,r){const n=this.body.edges;for(let i=0;i<this.body.edgeIndices.length;i++){const s=this.body.edgeIndices[i];n[s].isOverlappingWith(e)&&r.push(s)}}_getAllEdgesOverlappingWith(e){const r=[];return this._getEdgesOverlappingWith(e,r),r}getEdgeAt(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=this.canvas.DOMtoCanvas(e);let i=10,s=null;const o=this.body.edges;for(let a=0;a<this.body.edgeIndices.length;a++){const l=this.body.edgeIndices[a],u=o[l];if(u.connected){const d=u.from.x,h=u.from.y,f=u.to.x,p=u.to.y,m=u.edgeType.getDistanceToEdge(d,h,f,p,n.x,n.y);m<i&&(s=l,i=m)}}if(s!==null)return r===!0?this.body.edges[s]:s}_addToHover(e){e instanceof Wt?this.hoverObj.nodes[e.id]=e:this.hoverObj.edges[e.id]=e}_removeFromSelection(e){e instanceof Wt?(this._selectionAccumulator.deleteNodes(e),this._selectionAccumulator.deleteEdges(...e.edges)):this._selectionAccumulator.deleteEdges(e)}unselectAll(){this._selectionAccumulator.clear()}getSelectedNodeCount(){return this._selectionAccumulator.sizeNodes}getSelectedEdgeCount(){return this._selectionAccumulator.sizeEdges}_hoverConnectedEdges(e){for(let r=0;r<e.edges.length;r++){const n=e.edges[r];n.hover=!0,this._addToHover(n)}}emitBlurEvent(e,r,n){const i=this._initBaseEvent(e,r);n.hover===!0&&(n.hover=!1,n instanceof Wt?(i.node=n.id,this.body.emitter.emit("blurNode",i)):(i.edge=n.id,this.body.emitter.emit("blurEdge",i)))}emitHoverEvent(e,r,n){const i=this._initBaseEvent(e,r);let s=!1;return n.hover===!1&&(n.hover=!0,this._addToHover(n),s=!0,n instanceof Wt?(i.node=n.id,this.body.emitter.emit("hoverNode",i)):(i.edge=n.id,this.body.emitter.emit("hoverEdge",i))),s}hoverObject(e,r){let n=this.getNodeAt(r);n===void 0&&(n=this.getEdgeAt(r));let i=!1;for(const s in this.hoverObj.nodes)Object.prototype.hasOwnProperty.call(this.hoverObj.nodes,s)&&(n===void 0||n instanceof Wt&&n.id!=s||n instanceof fl)&&(this.emitBlurEvent(e,r,this.hoverObj.nodes[s]),delete this.hoverObj.nodes[s],i=!0);for(const s in this.hoverObj.edges)Object.prototype.hasOwnProperty.call(this.hoverObj.edges,s)&&(i===!0?(this.hoverObj.edges[s].hover=!1,delete this.hoverObj.edges[s]):(n===void 0||n instanceof fl&&n.id!=s||n instanceof Wt&&!n.hover)&&(this.emitBlurEvent(e,r,this.hoverObj.edges[s]),delete this.hoverObj.edges[s],i=!0));if(n!==void 0){const s=sr(this.hoverObj.edges).length,o=sr(this.hoverObj.nodes).length,a=n instanceof fl&&s===0&&o===0,l=n instanceof Wt&&s===0&&o===0;(i||a||l)&&(i=this.emitHoverEvent(e,r,n)),n instanceof Wt&&this.options.hoverConnectedEdges===!0&&this._hoverConnectedEdges(n)}i===!0&&this.body.emitter.emit("_requestRedraw")}commitWithoutEmitting(){this._selectionAccumulator.commit()}commitAndEmit(e,r){let n=!1;const i=this._selectionAccumulator.commit(),s={nodes:i.nodes.previous,edges:i.edges.previous};i.edges.deleted.length>0&&(this.generateClickEvent("deselectEdge",r,e,s),n=!0),i.nodes.deleted.length>0&&(this.generateClickEvent("deselectNode",r,e,s),n=!0),i.nodes.added.length>0&&(this.generateClickEvent("selectNode",r,e),n=!0),i.edges.added.length>0&&(this.generateClickEvent("selectEdge",r,e),n=!0),n===!0&&this.generateClickEvent("select",r,e)}getSelection(){return{nodes:this.getSelectedNodeIds(),edges:this.getSelectedEdgeIds()}}getSelectedNodes(){return this._selectionAccumulator.getNodes()}getSelectedEdges(){return this._selectionAccumulator.getEdges()}getSelectedNodeIds(){var e;return yh(e=this._selectionAccumulator.getNodes()).call(e,r=>r.id)}getSelectedEdgeIds(){var e;return yh(e=this._selectionAccumulator.getEdges()).call(e,r=>r.id)}setSelection(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e||!e.nodes&&!e.edges)throw new TypeError("Selection must be an object with nodes and/or edges properties");if((r.unselectAll||r.unselectAll===void 0)&&this.unselectAll(),e.nodes)for(const n of e.nodes){const i=this.body.nodes[n];if(!i)throw new RangeError('Node with id "'+n+'" not found');this.selectObject(i,r.highlightEdges)}if(e.edges)for(const n of e.edges){const i=this.body.edges[n];if(!i)throw new RangeError('Edge with id "'+n+'" not found');this.selectObject(i)}this.body.emitter.emit("_requestRedraw"),this._selectionAccumulator.commit()}selectNodes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({nodes:e},{highlightEdges:r})}selectEdges(e){if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({edges:e})}updateSelection(){for(const e in this._selectionAccumulator.getNodes())Object.prototype.hasOwnProperty.call(this.body.nodes,e.id)||this._selectionAccumulator.deleteNodes(e);for(const e in this._selectionAccumulator.getEdges())Object.prototype.hasOwnProperty.call(this.body.edges,e.id)||this._selectionAccumulator.deleteEdges(e)}getClickedItems(e){const r=this.canvas.DOMtoCanvas(e),n=[],i=this.body.nodeIndices,s=this.body.nodes;for(let l=i.length-1;l>=0;l--){const d=s[i[l]].getItemsOnPoint(r);n.push.apply(n,d)}const o=this.body.edgeIndices,a=this.body.edges;for(let l=o.length-1;l>=0;l--){const d=a[o[l]].getItemsOnPoint(r);n.push.apply(n,d)}return n}}var JJ={},rP,ZJ;function gqe(){if(ZJ)return rP;ZJ=1;var t=ef(),e=Math.floor,r=function(n,i){var s=n.length;if(s<8)for(var o=1,a,l;o<s;){for(l=o,a=n[o];l&&i(n[l-1],a)>0;)n[l]=n[--l];l!==o++&&(n[l]=a)}else for(var u=e(s/2),d=r(t(n,0,u),i),h=r(t(n,u),i),f=d.length,p=h.length,m=0,g=0;m<f||g<p;)n[m+g]=m<f&&g<p?i(d[m],h[g])<=0?d[m++]:h[g++]:m<f?d[m++]:h[g++];return n};return rP=r,rP}var nP,eZ;function yqe(){if(eZ)return nP;eZ=1;var t=Kh(),e=t.match(/firefox\/(\d+)/i);return nP=!!e&&+e[1],nP}var iP,tZ;function vqe(){if(tZ)return iP;tZ=1;var t=Kh();return iP=/MSIE|Trident/.test(t),iP}var sP,rZ;function bqe(){if(rZ)return sP;rZ=1;var t=Kh(),e=t.match(/AppleWebKit\/(\d+)\./);return sP=!!e&&+e[1],sP}var nZ;function xqe(){if(nZ)return JJ;nZ=1;var t=Pe(),e=dt(),r=oa(),n=Oi(),i=aa(),s=qle(),o=ns(),a=ct(),l=gqe(),u=of(),d=yqe(),h=vqe(),f=ag(),p=bqe(),m=[],g=e(m.sort),y=e(m.push),v=a(function(){m.sort(void 0)}),b=a(function(){m.sort(null)}),w=u("sort"),x=!a(function(){if(f)return f<70;if(!(d&&d>3)){if(h)return!0;if(p)return p<603;var N="",_,k,j,T;for(_=65;_<76;_++){switch(k=String.fromCharCode(_),_){case 66:case 69:case 70:case 72:j=3;break;case 68:case 71:j=4;break;default:j=2}for(T=0;T<47;T++)m.push({k:k+T,v:j})}for(m.sort(function(P,O){return O.v-P.v}),T=0;T<m.length;T++)k=m[T].k.charAt(0),N.charAt(N.length-1)!==k&&(N+=k);return N!=="DGBEFHACIJK"}}),S=v||!b||!w||!x,E=function(N){return function(_,k){return k===void 0?-1:_===void 0?1:N!==void 0?+N(_,k)||0:o(_)>o(k)?1:-1}};return t({target:"Array",proto:!0,forced:S},{sort:function(_){_!==void 0&&r(_);var k=n(this);if(x)return _===void 0?g(k):g(k,_);var j=[],T=i(k),P,O;for(O=0;O<T;O++)O in k&&y(j,k[O]);for(l(j,E(_)),P=i(j),O=0;O<P;)k[O]=j[O++];for(;O<T;)s(k,O++);return k}}),JJ}var oP,iZ;function wqe(){if(iZ)return oP;iZ=1,xqe();var t=pn();return oP=t("Array","sort"),oP}var aP,sZ;function Sqe(){if(sZ)return aP;sZ=1;var t=Tr(),e=wqe(),r=Array.prototype;return aP=function(n){var i=n.sort;return n===r||t(r,n)&&i===r.sort?e:i},aP}var lP,oZ;function Eqe(){if(oZ)return lP;oZ=1;var t=Sqe();return lP=t,lP}var cP,aZ;function _qe(){return aZ||(aZ=1,cP=Eqe()),cP}var Nqe=_qe(),Id=ze(Nqe),lZ={},uP,cZ;function Cqe(){if(cZ)return uP;cZ=1;var t=oa(),e=Oi(),r=t1(),n=aa(),i=TypeError,s="Reduce of empty array with no initial value",o=function(a){return function(l,u,d,h){var f=e(l),p=r(f),m=n(f);if(t(u),m===0&&d<2)throw new i(s);var g=a?m-1:0,y=a?-1:1;if(d<2)for(;;){if(g in p){h=p[g],g+=y;break}if(g+=y,a?g<0:m<=g)throw new i(s)}for(;a?g>=0:m>g;g+=y)g in p&&(h=u(h,p[g],g,f));return h}};return uP={left:o(!1),right:o(!0)},uP}var dP,uZ;function kqe(){if(uZ)return dP;uZ=1;var t=Ble();return dP=t==="NODE",dP}var dZ;function jqe(){if(dZ)return lZ;dZ=1;var t=Pe(),e=Cqe().left,r=of(),n=ag(),i=kqe(),s=!i&&n>79&&n<83,o=s||!r("reduce");return t({target:"Array",proto:!0,forced:o},{reduce:function(l){var u=arguments.length;return e(this,l,u,u>1?arguments[1]:void 0)}}),lZ}var hP,hZ;function Tqe(){if(hZ)return hP;hZ=1,jqe();var t=pn();return hP=t("Array","reduce"),hP}var fP,fZ;function Oqe(){if(fZ)return fP;fZ=1;var t=Tr(),e=Tqe(),r=Array.prototype;return fP=function(n){var i=n.reduce;return n===r||t(r,n)&&i===r.reduce?e:i},fP}var pP,pZ;function Pqe(){if(pZ)return pP;pZ=1;var t=Oqe();return pP=t,pP}var mP,mZ;function Iqe(){return mZ||(mZ=1,mP=Pqe()),mP}var Rqe=Iqe(),zce=ze(Rqe);class Wce{abstract(){throw new Error("Can't instantiate abstract class!")}fake_use(){}curveType(){return this.abstract()}getPosition(e){return this.fake_use(e),this.abstract()}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;this.fake_use(e,r,n),this.abstract()}getTreeSize(e){return this.fake_use(e),this.abstract()}sort(e){this.fake_use(e),this.abstract()}fix(e,r){this.fake_use(e,r),this.abstract()}shift(e,r){this.fake_use(e,r),this.abstract()}}class Mqe extends Wce{constructor(e){super(),this.layout=e}curveType(){return"horizontal"}getPosition(e){return e.x}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;n!==void 0&&this.layout.hierarchical.addToOrdering(e,n),e.x=r}getTreeSize(e){const r=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:r.min_x,max:r.max_x}}sort(e){Id(e).call(e,function(r,n){return r.x-n.x})}fix(e,r){e.y=this.layout.options.hierarchical.levelSeparation*r,e.options.fixed.y=!0}shift(e,r){this.layout.body.nodes[e].x+=r}}class Aqe extends Wce{constructor(e){super(),this.layout=e}curveType(){return"vertical"}getPosition(e){return e.y}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;n!==void 0&&this.layout.hierarchical.addToOrdering(e,n),e.y=r}getTreeSize(e){const r=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:r.min_y,max:r.max_y}}sort(e){Id(e).call(e,function(r,n){return r.y-n.y})}fix(e,r){e.x=this.layout.options.hierarchical.levelSeparation*r,e.options.fixed.x=!0}shift(e,r){this.layout.body.nodes[e].y+=r}}var gZ={},yZ;function Dqe(){if(yZ)return gZ;yZ=1;var t=Pe(),e=Al().every,r=of(),n=r("every");return t({target:"Array",proto:!0,forced:!n},{every:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),gZ}var gP,vZ;function $qe(){if(vZ)return gP;vZ=1,Dqe();var t=pn();return gP=t("Array","every"),gP}var yP,bZ;function Fqe(){if(bZ)return yP;bZ=1;var t=Tr(),e=$qe(),r=Array.prototype;return yP=function(n){var i=n.every;return n===r||t(r,n)&&i===r.every?e:i},yP}var vP,xZ;function qqe(){if(xZ)return vP;xZ=1;var t=Fqe();return vP=t,vP}var bP,wZ;function Lqe(){return wZ||(wZ=1,bP=qqe()),bP}var Bqe=Lqe(),Vce=ze(Bqe);function zqe(t,e){const r=new Ta;return It(t).call(t,n=>{var i;It(i=n.edges).call(i,s=>{s.connected&&r.add(s)})}),It(r).call(r,n=>{const i=n.from.id,s=n.to.id;e[i]==null&&(e[i]=0),(e[s]==null||e[i]>=e[s])&&(e[s]=e[i]+1)}),e}function Wqe(t){return Uce(e=>{var r,n;return Vce(r=ti(n=e.edges).call(n,i=>t.has(i.toId))).call(r,i=>i.to===e)},(e,r)=>r>e,"from",t)}function Vqe(t){return Uce(e=>{var r,n;return Vce(r=ti(n=e.edges).call(n,i=>t.has(i.toId))).call(r,i=>i.from===e)},(e,r)=>r<e,"to",t)}function Uce(t,e,r,n){var i;const s=Tc(null),o=zce(i=[...Ace(n).call(n)]).call(i,(h,f)=>h+1+f.edges.length,0),a=r+"Id",l=r==="to"?1:-1;for(const[h,f]of n){if(!n.has(h)||!t(f))continue;s[h]=0;const p=[f];let m=0,g;for(;g=p.pop();){var u,d;if(!n.has(h))continue;const y=s[g.id]+l;if(It(u=ti(d=g.edges).call(d,v=>v.connected&&v.to!==v.from&&v[r]!==g&&n.has(v.toId)&&n.has(v.fromId))).call(u,v=>{const b=v[a],w=s[b];(w==null||e(y,w))&&(s[b]=y,p.push(v[r]))}),m>o)return zqe(n,s);++m}}return s}class Uqe{constructor(){this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}addRelation(e,r){this.childrenReference[e]===void 0&&(this.childrenReference[e]=[]),this.childrenReference[e].push(r),this.parentReference[r]===void 0&&(this.parentReference[r]=[]),this.parentReference[r].push(e)}checkIfTree(){for(const e in this.parentReference)if(this.parentReference[e].length>1){this.isTree=!1;return}this.isTree=!0}numTrees(){return this.treeIndex+1}setTreeIndex(e,r){r!==void 0&&this.trees[e.id]===void 0&&(this.trees[e.id]=r,this.treeIndex=Math.max(r,this.treeIndex))}ensureLevel(e){this.levels[e]===void 0&&(this.levels[e]=0)}getMaxLevel(e){const r={},n=i=>{if(r[i]!==void 0)return r[i];let s=this.levels[i];if(this.childrenReference[i]){const o=this.childrenReference[i];if(o.length>0)for(let a=0;a<o.length;a++)s=Math.max(s,n(o[a]))}return r[i]=s,s};return n(e)}levelDownstream(e,r){this.levels[r.id]===void 0&&(this.levels[e.id]===void 0&&(this.levels[e.id]=0),this.levels[r.id]=this.levels[e.id]+1)}setMinLevelToZero(){var e;const r=new y$;let n=0;const i=Id(e=[...new Ta(oDe(this.levels))]).call(e,(s,o)=>s-o);for(const s of i)r.set(s,n++);for(const s in this.levels)Object.prototype.hasOwnProperty.call(this.levels,s)&&(this.levels[s]=r.get(this.levels[s]))}getTreeSize(e,r){let n=1e9,i=-1e9,s=1e9,o=-1e9;for(const a in this.trees)if(Object.prototype.hasOwnProperty.call(this.trees,a)&&this.trees[a]===r){const l=e[a];n=Math.min(l.x,n),i=Math.max(l.x,i),s=Math.min(l.y,s),o=Math.max(l.y,o)}return{min_x:n,max_x:i,min_y:s,max_y:o}}hasSameParent(e,r){const n=this.parentReference[e.id],i=this.parentReference[r.id];if(n===void 0||i===void 0)return!1;for(let s=0;s<n.length;s++)for(let o=0;o<i.length;o++)if(n[s]==i[o])return!0;return!1}inSameSubNetwork(e,r){return this.trees[e.id]===this.trees[r.id]}getLevels(){return sr(this.distributionOrdering)}addToOrdering(e,r){this.distributionOrdering[r]===void 0&&(this.distributionOrdering[r]=[]);let n=!1;const i=this.distributionOrdering[r];for(const s in i)if(i[s]===e){n=!0;break}n||(this.distributionOrdering[r].push(e),this.distributionIndex[e.id]=this.distributionOrdering[r].length-1)}}class Hqe{constructor(e){this.body=e,this._resetRNG(Math.random()+":"+R0()),this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},Er(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("_dataChanged",()=>{this.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",()=>{this.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",()=>{this.setupHierarchicalLayout()}),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",()=>{if(this.options.hierarchical.enabled!==!0)return;const e=this.direction.curveType();this.body.emitter.emit("_forceDisableDynamicCurves",e,!1)})}setOptions(e,r){if(e!==void 0){const n=this.options.hierarchical,i=n.enabled;if(lf(["randomSeed","improvedLayout","clusterThreshold"],this.options,e),Fi(this.options,e,"hierarchical"),e.randomSeed!==void 0&&this._resetRNG(e.randomSeed),n.enabled===!0)return i===!0&&this.body.emitter.emit("refresh",!0),n.direction==="RL"||n.direction==="DU"?n.levelSeparation>0&&(n.levelSeparation*=-1):n.levelSeparation<0&&(n.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(r);if(i===!0)return this.body.emitter.emit("refresh"),At(r,this.optionsBackup)}return r}_resetRNG(e){this.initialRandomSeed=e,this._rng=p1(this.initialRandomSeed)}adaptAllOptionsForHierarchicalLayout(e){if(this.options.hierarchical.enabled===!0){const r=this.optionsBackup.physics;e.physics===void 0||e.physics===!0?(e.physics={enabled:r.enabled===void 0?!0:r.enabled,solver:"hierarchicalRepulsion"},r.enabled=r.enabled===void 0?!0:r.enabled,r.solver=r.solver||"barnesHut"):typeof e.physics=="object"?(r.enabled=e.physics.enabled===void 0?!0:e.physics.enabled,r.solver=e.physics.solver||"barnesHut",e.physics.solver="hierarchicalRepulsion"):e.physics!==!1&&(r.solver="barnesHut",e.physics={solver:"hierarchicalRepulsion"});let n=this.direction.curveType();if(e.edges===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges={smooth:!1};else if(e.edges.smooth===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges.smooth=!1;else if(typeof e.edges.smooth=="boolean")this.optionsBackup.edges={smooth:e.edges.smooth},e.edges.smooth={enabled:e.edges.smooth,type:n};else{const i=e.edges.smooth;i.type!==void 0&&i.type!=="dynamic"&&(n=i.type),this.optionsBackup.edges={smooth:{enabled:i.enabled===void 0?!0:i.enabled,type:i.type===void 0?"dynamic":i.type,roundness:i.roundness===void 0?.5:i.roundness,forceDirection:i.forceDirection===void 0?!1:i.forceDirection}},e.edges.smooth={enabled:i.enabled===void 0?!0:i.enabled,type:n,roundness:i.roundness===void 0?.5:i.roundness,forceDirection:i.forceDirection===void 0?!1:i.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",n)}return e}positionInitially(e){if(this.options.hierarchical.enabled!==!0){this._resetRNG(this.initialRandomSeed);const r=e.length+50;for(let n=0;n<e.length;n++){const i=e[n],s=2*Math.PI*this._rng();i.x===void 0&&(i.x=r*Math.cos(s)),i.y===void 0&&(i.y=r*Math.sin(s))}}}layoutNetwork(){if(this.options.hierarchical.enabled!==!0&&this.options.improvedLayout===!0){const e=this.body.nodeIndices;let r=0;for(let n=0;n<e.length;n++)this.body.nodes[e[n]].predefinedPosition===!0&&(r+=1);if(r<.5*e.length){let i=0;const s=this.options.clusterThreshold,o={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(e.length>s){const l=e.length;for(;e.length>s&&i<=10;){i+=1;const u=e.length;i%3===0?this.body.modules.clustering.clusterBridges(o):this.body.modules.clustering.clusterOutliers(o);const d=e.length;if(u==d&&i%3!==0){this._declusterAll(),this.body.emitter.emit("_layoutFailed"),console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.");return}}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*l)})}i>10&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(e,this.body.edgeIndices,!0),this._shiftToCenter();const a=70;for(let l=0;l<e.length;l++){const u=this.body.nodes[e[l]];u.predefinedPosition===!1&&(u.x+=(.5-this._rng())*a,u.y+=(.5-this._rng())*a)}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}_shiftToCenter(){const e=Mn.getRangeCore(this.body.nodes,this.body.nodeIndices),r=Mn.findCenter(e);for(let n=0;n<this.body.nodeIndices.length;n++){const i=this.body.nodes[this.body.nodeIndices[n]];i.x-=r.x,i.y-=r.y}}_declusterAll(){let e=!0;for(;e===!0;){e=!1;for(let r=0;r<this.body.nodeIndices.length;r++)this.body.nodes[this.body.nodeIndices[r]].isCluster===!0&&(e=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[r],{},!1));e===!0&&this.body.emitter.emit("_dataChanged")}}getSeed(){return this.initialRandomSeed}setupHierarchicalLayout(){if(this.options.hierarchical.enabled===!0&&this.body.nodeIndices.length>0){let e,r,n=!1,i=!1;this.lastNodeOnLevel={},this.hierarchical=new Uqe;for(r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&(e=this.body.nodes[r],e.options.level!==void 0?(n=!0,this.hierarchical.levels[r]=e.options.level):i=!0);if(i===!0&&n===!0)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");{if(i===!0){const o=this.options.hierarchical.sortMethod;o==="hubsize"?this._determineLevelsByHubsize():o==="directed"?this._determineLevelsDirected():o==="custom"&&this._determineLevelsCustomCallback()}for(const o in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,o)&&this.hierarchical.ensureLevel(o);const s=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(s),this._condenseHierarchy(),this._shiftToCenter()}}}_condenseHierarchy(){var e=this;let r=!1;const n={},i=()=>{const v=o();let b=0;for(let w=0;w<v.length-1;w++){const x=v[w].max-v[w+1].min;b+=x+this.options.hierarchical.treeSpacing,s(w+1,b)}},s=(v,b)=>{const w=this.hierarchical.trees;for(const x in w)Object.prototype.hasOwnProperty.call(w,x)&&w[x]===v&&this.direction.shift(x,b)},o=()=>{const v=[];for(let b=0;b<this.hierarchical.numTrees();b++)v.push(this.direction.getTreeSize(b));return v},a=(v,b)=>{if(!b[v.id]&&(b[v.id]=!0,this.hierarchical.childrenReference[v.id])){const w=this.hierarchical.childrenReference[v.id];if(w.length>0)for(let x=0;x<w.length;x++)a(this.body.nodes[w[x]],b)}},l=function(v){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e9,w=1e9,x=1e9,S=1e9,E=-1e9;for(const N in v)if(Object.prototype.hasOwnProperty.call(v,N)){const _=e.body.nodes[N],k=e.hierarchical.levels[_.id],j=e.direction.getPosition(_),[T,P]=e._getSpaceAroundNode(_,v);w=Math.min(T,w),x=Math.min(P,x),k<=b&&(S=Math.min(j,S),E=Math.max(j,E))}return[S,E,w,x]},u=(v,b)=>{const w=this.hierarchical.getMaxLevel(v.id),x=this.hierarchical.getMaxLevel(b.id);return Math.min(w,x)},d=(v,b,w)=>{const x=this.hierarchical;for(let S=0;S<b.length;S++){const E=b[S],N=x.distributionOrdering[E];if(N.length>1)for(let _=0;_<N.length-1;_++){const k=N[_],j=N[_+1];x.hasSameParent(k,j)&&x.inSameSubNetwork(k,j)&&v(k,j,w)}}},h=function(v,b){let w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const x=e.direction.getPosition(v),S=e.direction.getPosition(b),E=Math.abs(S-x),N=e.options.hierarchical.nodeSpacing;if(E>N){const _={},k={};a(v,_),a(b,k);const j=u(v,b),T=l(_,j),P=l(k,j),O=T[1],D=P[0],F=P[2];if(Math.abs(O-D)>N){let q=O-D+N;q<-F+N&&(q=-F+N),q<0&&(e._shiftBlock(b.id,q),r=!0,w===!0&&e._centerParent(b))}}},f=(v,b)=>{const w=b.id,x=b.edges,S=this.hierarchical.levels[b.id],E=this.options.hierarchical.levelSeparation*this.options.hierarchical.levelSeparation,N={},_=[];for(let F=0;F<x.length;F++){const $=x[F];if($.toId!=$.fromId){const q=$.toId==w?$.from:$.to;N[x[F].id]=q,this.hierarchical.levels[q.id]<S&&_.push($)}}const k=(F,$)=>{let q=0;for(let M=0;M<$.length;M++)if(N[$[M].id]!==void 0){const B=this.direction.getPosition(N[$[M].id])-F;q+=B/Math.sqrt(B*B+E)}return q},j=(F,$)=>{let q=0;for(let M=0;M<$.length;M++)if(N[$[M].id]!==void 0){const B=this.direction.getPosition(N[$[M].id])-F;q-=E*Math.pow(B*B+E,-1.5)}return q},T=(F,$)=>{let q=this.direction.getPosition(b);const M={};for(let B=0;B<F;B++){const X=k(q,$),Q=j(q,$),le=40,G=Math.max(-le,Math.min(le,Math.round(X/Q)));if(q=q-G,M[q]!==void 0)break;M[q]=B}return q},P=F=>{const $=this.direction.getPosition(b);if(n[b.id]===void 0){const le={};a(b,le),n[b.id]=le}const q=l(n[b.id]),M=q[2],B=q[3],X=F-$;let Q=0;X>0?Q=Math.min(X,B-this.options.hierarchical.nodeSpacing):X<0&&(Q=-Math.min(-X,M-this.options.hierarchical.nodeSpacing)),Q!=0&&(this._shiftBlock(b.id,Q),r=!0)},O=F=>{const $=this.direction.getPosition(b),[q,M]=this._getSpaceAroundNode(b),B=F-$;let X=$;B>0?X=Math.min($+(M-this.options.hierarchical.nodeSpacing),F):B<0&&(X=Math.max($-(q-this.options.hierarchical.nodeSpacing),F)),X!==$&&(this.direction.setPosition(b,X),r=!0)};let D=T(v,_);P(D),D=T(v,x),O(D)},p=v=>{let b=this.hierarchical.getLevels();b=jc(b).call(b);for(let w=0;w<v;w++){r=!1;for(let x=0;x<b.length;x++){const S=b[x],E=this.hierarchical.distributionOrdering[S];for(let N=0;N<E.length;N++)f(1e3,E[N])}if(r!==!0)break}},m=v=>{let b=this.hierarchical.getLevels();b=jc(b).call(b);for(let w=0;w<v&&(r=!1,d(h,b,!0),r===!0);w++);},g=()=>{for(const v in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,v)&&this._centerParent(this.body.nodes[v])},y=()=>{let v=this.hierarchical.getLevels();v=jc(v).call(v);for(let b=0;b<v.length;b++){const w=v[b],x=this.hierarchical.distributionOrdering[w];for(let S=0;S<x.length;S++)this._centerParent(x[S])}};this.options.hierarchical.blockShifting===!0&&(m(5),g()),this.options.hierarchical.edgeMinimization===!0&&p(20),this.options.hierarchical.parentCentralization===!0&&y(),i()}_getSpaceAroundNode(e,r){let n=!0;r===void 0&&(n=!1);const i=this.hierarchical.levels[e.id];if(i!==void 0){const s=this.hierarchical.distributionIndex[e.id],o=this.direction.getPosition(e),a=this.hierarchical.distributionOrdering[i];let l=1e9,u=1e9;if(s!==0){const d=a[s-1];if(n===!0&&r[d.id]===void 0||n===!1){const h=this.direction.getPosition(d);l=o-h}}if(s!=a.length-1){const d=a[s+1];if(n===!0&&r[d.id]===void 0||n===!1){const h=this.direction.getPosition(d);u=Math.min(u,h-o)}}return[l,u]}else return[0,0]}_centerParent(e){if(this.hierarchical.parentReference[e.id]){const r=this.hierarchical.parentReference[e.id];for(let n=0;n<r.length;n++){const i=r[n],s=this.body.nodes[i],o=this.hierarchical.childrenReference[i];if(o!==void 0){const a=this._getCenterPosition(o),l=this.direction.getPosition(s),[u,d]=this._getSpaceAroundNode(s),h=l-a;(h<0&&Math.abs(h)<d-this.options.hierarchical.nodeSpacing||h>0&&Math.abs(h)<u-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(s,a)}}}}_placeNodesByHierarchy(e){this.positionedNodes={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r;let i=sr(e[n]);i=this._indexArrayToNodes(i),Id(r=this.direction).call(r,i);let s=0;for(let o=0;o<i.length;o++){const a=i[o];if(this.positionedNodes[a.id]===void 0){const l=this.options.hierarchical.nodeSpacing;let u=l*s;s>0&&(u=this.direction.getPosition(i[o-1])+l),this.direction.setPosition(a,u,n),this._validatePositionAndContinue(a,n,u),s++}}}}_placeBranchNodes(e,r){var n;const i=this.hierarchical.childrenReference[e];if(i===void 0)return;const s=[];for(let a=0;a<i.length;a++)s.push(this.body.nodes[i[a]]);Id(n=this.direction).call(n,s);for(let a=0;a<s.length;a++){const l=s[a],u=this.hierarchical.levels[l.id];if(u>r&&this.positionedNodes[l.id]===void 0){const d=this.options.hierarchical.nodeSpacing;let h;a===0?h=this.direction.getPosition(this.body.nodes[e]):h=this.direction.getPosition(s[a-1])+d,this.direction.setPosition(l,h,u),this._validatePositionAndContinue(l,u,h)}else return}const o=this._getCenterPosition(s);this.direction.setPosition(this.body.nodes[e],o,r)}_validatePositionAndContinue(e,r,n){if(this.hierarchical.isTree){if(this.lastNodeOnLevel[r]!==void 0){const i=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[r]]);if(n-i<this.options.hierarchical.nodeSpacing){const s=i+this.options.hierarchical.nodeSpacing-n,o=this._findCommonParent(this.lastNodeOnLevel[r],e.id);this._shiftBlock(o.withChild,s)}}this.lastNodeOnLevel[r]=e.id,this.positionedNodes[e.id]=!0,this._placeBranchNodes(e.id,r)}}_indexArrayToNodes(e){const r=[];for(let n=0;n<e.length;n++)r.push(this.body.nodes[e[n]]);return r}_getDistribution(){const e={};let r,n;for(r in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,r)){n=this.body.nodes[r];const i=this.hierarchical.levels[r]===void 0?0:this.hierarchical.levels[r];this.direction.fix(n,i),e[i]===void 0&&(e[i]={}),e[i][r]=n}return e}_getActiveEdges(e){const r=[];return nt(e.edges,n=>{var i;wt(i=this.body.edgeIndices).call(i,n.id)!==-1&&r.push(n)}),r}_getHubSizes(){const e={},r=this.body.nodeIndices;nt(r,i=>{const s=this.body.nodes[i],o=this._getActiveEdges(s).length;e[o]=!0});const n=[];return nt(e,i=>{n.push(Number(i))}),Id(n).call(n,function(i,s){return s-i}),n}_determineLevelsByHubsize(){const e=(n,i)=>{this.hierarchical.levelDownstream(n,i)},r=this._getHubSizes();for(let n=0;n<r.length;++n){const i=r[n];if(i===0)break;nt(this.body.nodeIndices,s=>{const o=this.body.nodes[s];i===this._getActiveEdges(o).length&&this._crawlNetwork(e,s)})}}_determineLevelsCustomCallback(){const r=function(i,s,o){},n=(i,s,o)=>{let a=this.hierarchical.levels[i.id];a===void 0&&(a=this.hierarchical.levels[i.id]=1e5);const l=r(Mn.cloneOptions(i,"node"),Mn.cloneOptions(s,"node"),Mn.cloneOptions(o,"edge"));this.hierarchical.levels[s.id]=a+l};this._crawlNetwork(n),this.hierarchical.setMinLevelToZero()}_determineLevelsDirected(){var e;const r=zce(e=this.body.nodeIndices).call(e,(n,i)=>(n.set(i,this.body.nodes[i]),n),new y$);this.options.hierarchical.shakeTowards==="roots"?this.hierarchical.levels=Vqe(r):this.hierarchical.levels=Wqe(r),this.hierarchical.setMinLevelToZero()}_generateMap(){const e=(r,n)=>{this.hierarchical.levels[n.id]>this.hierarchical.levels[r.id]&&this.hierarchical.addRelation(r.id,n.id)};this._crawlNetwork(e),this.hierarchical.checkIfTree()}_crawlNetwork(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},r=arguments.length>1?arguments[1]:void 0;const n={},i=(s,o)=>{if(n[s.id]===void 0){this.hierarchical.setTreeIndex(s,o),n[s.id]=!0;let a;const l=this._getActiveEdges(s);for(let u=0;u<l.length;u++){const d=l[u];d.connected===!0&&(d.toId==s.id?a=d.from:a=d.to,s.id!=a.id&&(e(s,a,d),i(a,o)))}}};if(r===void 0){let s=0;for(let o=0;o<this.body.nodeIndices.length;o++){const a=this.body.nodeIndices[o];if(n[a]===void 0){const l=this.body.nodes[a];i(l,s),s+=1}}}else{const s=this.body.nodes[r];if(s===void 0){console.error("Node not found:",r);return}i(s)}}_shiftBlock(e,r){const n={},i=s=>{if(n[s])return;n[s]=!0,this.direction.shift(s,r);const o=this.hierarchical.childrenReference[s];if(o!==void 0)for(let a=0;a<o.length;a++)i(o[a])};i(e)}_findCommonParent(e,r){const n={},i=(o,a)=>{const l=this.hierarchical.parentReference[a];if(l!==void 0)for(let u=0;u<l.length;u++){const d=l[u];o[d]=!0,i(o,d)}},s=(o,a)=>{const l=this.hierarchical.parentReference[a];if(l!==void 0)for(let u=0;u<l.length;u++){const d=l[u];if(o[d]!==void 0)return{foundParent:d,withChild:a};const h=s(o,d);if(h.foundParent!==null)return h}return{foundParent:null,withChild:a}};return i(n,e),s(n,r)}setDirectionStrategy(){this.options.hierarchical.direction==="UD"||this.options.hierarchical.direction==="DU"?this.direction=new Mqe(this):this.direction=new Aqe(this)}_getCenterPosition(e){let r=1e9,n=-1e9;for(let i=0;i<e.length;i++){let s;if(e[i].id!==void 0)s=e[i];else{const a=e[i];s=this.body.nodes[a]}const o=this.direction.getPosition(s);r=Math.min(r,o),n=Math.max(n,o)}return .5*(r+n)}}class Kqe{constructor(e,r,n,i){var s,o;this.body=e,this.canvas=r,this.selectionHandler=n,this.interactionHandler=i,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this._domEventListenerCleanupQueue=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},Er(this.options,this.defaultOptions),this.body.emitter.on("destroy",()=>{this._clean()}),this.body.emitter.on("_dataChanged",de(s=this._restore).call(s,this)),this.body.emitter.on("_resetData",de(o=this._restore).call(o,this))}_restore(){this.inMode!==!1&&(this.options.initiallyActive===!0?this.enableEditMode():this.disableEditMode())}setOptions(e,r,n){r!==void 0&&(r.locale!==void 0?this.options.locale=r.locale:this.options.locale=n.locale,r.locales!==void 0?this.options.locales=r.locales:this.options.locales=n.locales),e!==void 0&&(typeof e=="boolean"?this.options.enabled=e:(this.options.enabled=!0,At(this.options,e)),this.options.initiallyActive===!0&&(this.editMode=!0),this._setup())}toggleEditMode(){this.editMode===!0?this.disableEditMode():this.enableEditMode()}enableEditMode(){this.editMode=!0,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}disableEditMode(){this.editMode=!1,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}showManipulatorToolbar(){if(this._clean(),this.manipulationDOM={},this.guiEnabled===!0){var e,r;this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";const n=this.selectionHandler.getSelectedNodeCount(),i=this.selectionHandler.getSelectedEdgeCount(),s=n+i,o=this.options.locales[this.options.locale];let a=!1;this.options.addNode!==!1&&(this._createAddNodeButton(o),a=!0),this.options.addEdge!==!1&&(a===!0?this._createSeperator(1):a=!0,this._createAddEdgeButton(o)),n===1&&typeof this.options.editNode=="function"?(a===!0?this._createSeperator(2):a=!0,this._createEditNodeButton(o)):i===1&&n===0&&this.options.editEdge!==!1&&(a===!0?this._createSeperator(3):a=!0,this._createEditEdgeButton(o)),s!==0&&(n>0&&this.options.deleteNode!==!1?(a===!0&&this._createSeperator(4),this._createDeleteButton(o)):n===0&&this.options.deleteEdge!==!1&&(a===!0&&this._createSeperator(4),this._createDeleteButton(o))),this._bindElementEvents(this.closeDiv,de(e=this.toggleEditMode).call(e,this)),this._temporaryBindEvent("select",de(r=this.showManipulatorToolbar).call(r,this))}this.body.emitter.emit("_redraw")}addNodeMode(){var e;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addNode",this.guiEnabled===!0){var r;const n=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(n),this._createSeperator(),this._createDescription(n.addDescription||this.options.locales.en.addDescription),this._bindElementEvents(this.closeDiv,de(r=this.toggleEditMode).call(r,this))}this._temporaryBindEvent("click",de(e=this._performAddNode).call(e,this))}editNode(){this.editMode!==!0&&this.enableEditMode(),this._clean();const e=this.selectionHandler.getSelectedNodes()[0];if(e!==void 0)if(this.inMode="editNode",typeof this.options.editNode=="function")if(e.isCluster!==!0){const r=At({},e.options,!1);if(r.x=e.x,r.y=e.y,this.options.editNode.length===2)this.options.editNode(r,n=>{n!=null&&this.inMode==="editNode"&&this.body.data.nodes.getDataSet().update(n),this.showManipulatorToolbar()});else throw new Error("The function for edit does not support two arguments (data, callback)")}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError);else throw new Error("No function has been configured to handle the editing of nodes.");else this.showManipulatorToolbar()}addEdgeMode(){var e,r,n,i,s;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addEdge",this.guiEnabled===!0){var o;const a=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(a),this._createSeperator(),this._createDescription(a.edgeDescription||this.options.locales.en.edgeDescription),this._bindElementEvents(this.closeDiv,de(o=this.toggleEditMode).call(o,this))}this._temporaryBindUI("onTouch",de(e=this._handleConnect).call(e,this)),this._temporaryBindUI("onDragEnd",de(r=this._finishConnect).call(r,this)),this._temporaryBindUI("onDrag",de(n=this._dragControlNode).call(n,this)),this._temporaryBindUI("onRelease",de(i=this._finishConnect).call(i,this)),this._temporaryBindUI("onDragStart",de(s=this._dragStartEdge).call(s,this)),this._temporaryBindUI("onHold",()=>{})}editEdgeMode(){if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="editEdge",typeof this.options.editEdge=="object"&&typeof this.options.editEdge.editWithoutDrag=="function"&&(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0)){const o=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(o.from.id,o.to.id);return}if(this.guiEnabled===!0){var e;const o=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(o),this._createSeperator(),this._createDescription(o.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindElementEvents(this.closeDiv,de(e=this.toggleEditMode).call(e,this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0){var r,n,i,s;const o=this.body.edges[this.edgeBeingEditedId],a=this._getNewTargetNode(o.from.x,o.from.y),l=this._getNewTargetNode(o.to.x,o.to.y);this.temporaryIds.nodes.push(a.id),this.temporaryIds.nodes.push(l.id),this.body.nodes[a.id]=a,this.body.nodeIndices.push(a.id),this.body.nodes[l.id]=l,this.body.nodeIndices.push(l.id),this._temporaryBindUI("onTouch",de(r=this._controlNodeTouch).call(r,this)),this._temporaryBindUI("onTap",()=>{}),this._temporaryBindUI("onHold",()=>{}),this._temporaryBindUI("onDragStart",de(n=this._controlNodeDragStart).call(n,this)),this._temporaryBindUI("onDrag",de(i=this._controlNodeDrag).call(i,this)),this._temporaryBindUI("onDragEnd",de(s=this._controlNodeDragEnd).call(s,this)),this._temporaryBindUI("onMouseMove",()=>{}),this._temporaryBindEvent("beforeDrawing",u=>{const d=o.edgeType.findBorderPositions(u);a.selected===!1&&(a.x=d.from.x,a.y=d.from.y),l.selected===!1&&(l.x=d.to.x,l.y=d.to.y)}),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}deleteSelected(){this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="delete";const e=this.selectionHandler.getSelectedNodeIds(),r=this.selectionHandler.getSelectedEdgeIds();let n;if(e.length>0){for(let i=0;i<e.length;i++)if(this.body.nodes[e[i]].isCluster===!0){alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);return}typeof this.options.deleteNode=="function"&&(n=this.options.deleteNode)}else r.length>0&&typeof this.options.deleteEdge=="function"&&(n=this.options.deleteEdge);if(typeof n=="function"){const i={nodes:e,edges:r};if(n.length===2)n(i,s=>{s!=null&&this.inMode==="delete"?(this.body.data.edges.getDataSet().remove(s.edges),this.body.data.nodes.getDataSet().remove(s.nodes),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()):(this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar())});else throw new Error("The function for delete does not support two arguments (data, callback)")}else this.body.data.edges.getDataSet().remove(r),this.body.data.nodes.getDataSet().remove(e),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}_setup(){this.options.enabled===!0?(this.guiEnabled=!0,this._createWrappers(),this.editMode===!1?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}_createWrappers(){if(this.manipulationDiv===void 0&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",this.editMode===!0?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),this.editModeDiv===void 0&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",this.editMode===!0?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),this.closeDiv===void 0){var e,r;this.closeDiv=document.createElement("button"),this.closeDiv.className="vis-close",this.closeDiv.setAttribute("aria-label",(e=(r=this.options.locales[this.options.locale])===null||r===void 0?void 0:r.close)!==null&&e!==void 0?e:this.options.locales.en.close),this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv)}}_getNewTargetNode(e,r){const n=At({},this.options.controlNodeStyle);n.id="targetNode"+xp(),n.hidden=!1,n.physics=!1,n.x=e,n.y=r;const i=this.body.functions.createNode(n);return i.shape.boundingBox={left:e,right:e,top:r,bottom:r},i}_createEditButton(){var e;this._clean(),this.manipulationDOM={},Ea(this.editModeDiv);const r=this.options.locales[this.options.locale],n=this._createButton("editMode","vis-edit vis-edit-mode",r.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(n),this._bindElementEvents(n,de(e=this.toggleEditMode).call(e,this))}_clean(){this.inMode=!1,this.guiEnabled===!0&&(Ea(this.editModeDiv),Ea(this.manipulationDiv),this._cleanupDOMEventListeners()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}_cleanupDOMEventListeners(){for(const r of Fo(e=this._domEventListenerCleanupQueue).call(e,0)){var e;r()}}_removeManipulationDOM(){this._clean(),Ea(this.manipulationDiv),Ea(this.editModeDiv),Ea(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}_createSeperator(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+e]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+e].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+e])}_createAddNodeButton(e){var r;const n=this._createButton("addNode","vis-add",e.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,de(r=this.addNodeMode).call(r,this))}_createAddEdgeButton(e){var r;const n=this._createButton("addEdge","vis-connect",e.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,de(r=this.addEdgeMode).call(r,this))}_createEditNodeButton(e){var r;const n=this._createButton("editNode","vis-edit",e.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,de(r=this.editNode).call(r,this))}_createEditEdgeButton(e){var r;const n=this._createButton("editEdge","vis-edit",e.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,de(r=this.editEdgeMode).call(r,this))}_createDeleteButton(e){var r;let n;this.options.rtl?n="vis-delete-rtl":n="vis-delete";const i=this._createButton("delete",n,e.del||this.options.locales.en.del);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,de(r=this.deleteSelected).call(r,this))}_createBackButton(e){var r;const n=this._createButton("back","vis-back",e.back||this.options.locales.en.back);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,de(r=this.showManipulatorToolbar).call(r,this))}_createButton(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"vis-label";return this.manipulationDOM[e+"Div"]=document.createElement("button"),this.manipulationDOM[e+"Div"].className="vis-button "+r,this.manipulationDOM[e+"Label"]=document.createElement("div"),this.manipulationDOM[e+"Label"].className=i,this.manipulationDOM[e+"Label"].innerText=n,this.manipulationDOM[e+"Div"].appendChild(this.manipulationDOM[e+"Label"]),this.manipulationDOM[e+"Div"]}_createDescription(e){this.manipulationDOM.descriptionLabel=document.createElement("div"),this.manipulationDOM.descriptionLabel.className="vis-none",this.manipulationDOM.descriptionLabel.innerText=e,this.manipulationDiv.appendChild(this.manipulationDOM.descriptionLabel)}_temporaryBindEvent(e,r){this.temporaryEventFunctions.push({event:e,boundFunction:r}),this.body.emitter.on(e,r)}_temporaryBindUI(e,r){if(this.body.eventListeners[e]!==void 0)this.temporaryUIFunctions[e]=this.body.eventListeners[e],this.body.eventListeners[e]=r;else throw new Error("This UI function does not exist. Typo? You tried: "+e+" possible are: "+pg(sr(this.body.eventListeners)))}_unbindTemporaryUIs(){for(const e in this.temporaryUIFunctions)Object.prototype.hasOwnProperty.call(this.temporaryUIFunctions,e)&&(this.body.eventListeners[e]=this.temporaryUIFunctions[e],delete this.temporaryUIFunctions[e]);this.temporaryUIFunctions={}}_unbindTemporaryEvents(){for(let e=0;e<this.temporaryEventFunctions.length;e++){const r=this.temporaryEventFunctions[e].event,n=this.temporaryEventFunctions[e].boundFunction;this.body.emitter.off(r,n)}this.temporaryEventFunctions=[]}_bindElementEvents(e,r){const n=new Od(e,{});L0(n,r),this._domEventListenerCleanupQueue.push(()=>{n.destroy()});const i=s=>{let{keyCode:o,key:a}=s;(a==="Enter"||a===" "||o===13||o===32)&&r()};e.addEventListener("keyup",i,!1),this._domEventListenerCleanupQueue.push(()=>{e.removeEventListener("keyup",i,!1)})}_cleanupTemporaryNodesAndEdges(){for(let s=0;s<this.temporaryIds.edges.length;s++){var e;this.body.edges[this.temporaryIds.edges[s]].disconnect(),delete this.body.edges[this.temporaryIds.edges[s]];const o=wt(e=this.body.edgeIndices).call(e,this.temporaryIds.edges[s]);if(o!==-1){var r;Fo(r=this.body.edgeIndices).call(r,o,1)}}for(let s=0;s<this.temporaryIds.nodes.length;s++){var n;delete this.body.nodes[this.temporaryIds.nodes[s]];const o=wt(n=this.body.nodeIndices).call(n,this.temporaryIds.nodes[s]);if(o!==-1){var i;Fo(i=this.body.nodeIndices).call(i,o,1)}}this.temporaryIds={nodes:[],edges:[]}}_controlNodeTouch(e){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=Er({},this.body.view.translation)}_controlNodeDragStart(){const e=this.lastTouch,r=this.selectionHandler._pointerToPositionObject(e),n=this.body.nodes[this.temporaryIds.nodes[0]],i=this.body.nodes[this.temporaryIds.nodes[1]],s=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;const o=n.isOverlappingWith(r),a=i.isOverlappingWith(r);o===!0?(this.selectedControlNode=n,s.edgeType.from=n):a===!0&&(this.selectedControlNode=i,s.edgeType.to=i),this.selectedControlNode!==void 0&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}_controlNodeDrag(e){this.body.emitter.emit("disablePhysics");const r=this.body.functions.getPointer(e.center),n=this.canvas.DOMtoCanvas(r);this.selectedControlNode!==void 0?(this.selectedControlNode.x=n.x,this.selectedControlNode.y=n.y):this.interactionHandler.onDrag(e),this.body.emitter.emit("_redraw")}_controlNodeDragEnd(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r),i=this.body.edges[this.edgeBeingEditedId];if(this.selectedControlNode===void 0)return;this.selectionHandler.unselectAll();const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let a=s.length-1;a>=0;a--)if(s[a]!==this.selectedControlNode.id){o=this.body.nodes[s[a]];break}if(o!==void 0&&this.selectedControlNode!==void 0)if(o.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{const a=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===a.id?this._performEditEdge(o.id,i.to.id):this._performEditEdge(i.from.id,o.id)}else i.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}_handleConnect(e){if(new Date().valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=Er({},this.body.view.translation),this.interactionHandler.drag.pointer=this.lastTouch,this.interactionHandler.drag.translation=this.lastTouch.translation;const r=this.lastTouch,n=this.selectionHandler.getNodeAt(r);if(n!==void 0)if(n.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{const i=this._getNewTargetNode(n.x,n.y);this.body.nodes[i.id]=i,this.body.nodeIndices.push(i.id);const s=this.body.functions.createEdge({id:"connectionEdge"+xp(),from:n.id,to:i.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[s.id]=s,this.body.edgeIndices.push(s.id),this.temporaryIds.nodes.push(i.id),this.temporaryIds.edges.push(s.id)}this.touchTime=new Date().valueOf()}}_dragControlNode(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r);let i;this.temporaryIds.edges[0]!==void 0&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let l=s.length-1;l>=0;l--){var a;if(wt(a=this.temporaryIds.nodes).call(a,s[l])===-1){o=this.body.nodes[s[l]];break}}if(e.controlEdge={from:i,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragging",e,r),this.temporaryIds.nodes[0]!==void 0){const l=this.body.nodes[this.temporaryIds.nodes[0]];l.x=this.canvas._XconvertDOMtoCanvas(r.x),l.y=this.canvas._YconvertDOMtoCanvas(r.y),this.body.emitter.emit("_redraw")}else this.interactionHandler.onDrag(e)}_finishConnect(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r);let i;this.temporaryIds.edges[0]!==void 0&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let l=s.length-1;l>=0;l--){var a;if(wt(a=this.temporaryIds.nodes).call(a,s[l])===-1){o=this.body.nodes[s[l]];break}}this._cleanupTemporaryNodesAndEdges(),o!==void 0&&(o.isCluster===!0?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):this.body.nodes[i]!==void 0&&this.body.nodes[o.id]!==void 0&&this._performAddEdge(i,o.id)),e.controlEdge={from:i,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragEnd",e,r),this.body.emitter.emit("_redraw")}_dragStartEdge(e){const r=this.lastTouch;this.selectionHandler.generateClickEvent("dragStart",e,r,void 0,!0)}_performAddNode(e){const r={id:xp(),x:e.pointer.canvas.x,y:e.pointer.canvas.y,label:"new"};if(typeof this.options.addNode=="function")if(this.options.addNode.length===2)this.options.addNode(r,n=>{n!=null&&this.inMode==="addNode"&&this.body.data.nodes.getDataSet().add(n),this.showManipulatorToolbar()});else throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");else this.body.data.nodes.getDataSet().add(r),this.showManipulatorToolbar()}_performAddEdge(e,r){const n={from:e,to:r};if(typeof this.options.addEdge=="function")if(this.options.addEdge.length===2)this.options.addEdge(n,i=>{i!=null&&this.inMode==="addEdge"&&(this.body.data.edges.getDataSet().add(i),this.selectionHandler.unselectAll(),this.showManipulatorToolbar())});else throw new Error("The function for connect does not support two arguments (data,callback)");else this.body.data.edges.getDataSet().add(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}_performEditEdge(e,r){const n={id:this.edgeBeingEditedId,from:e,to:r,label:this.body.data.edges.get(this.edgeBeingEditedId).label};let i=this.options.editEdge;if(typeof i=="object"&&(i=i.editWithoutDrag),typeof i=="function")if(i.length===2)i(n,s=>{s==null||this.inMode!=="editEdge"?(this.body.edges[n.id].updateEdgeType(),this.body.emitter.emit("_redraw"),this.showManipulatorToolbar()):(this.body.data.edges.getDataSet().update(s),this.selectionHandler.unselectAll(),this.showManipulatorToolbar())});else throw new Error("The function for edit does not support two arguments (data, callback)");else this.body.data.edges.getDataSet().update(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}const me="string",ue="boolean",H="number",Kf="array",Te="object",Hce="dom",Gqe="any",xP=["arrow","bar","box","circle","crow","curve","diamond","image","inv_curve","inv_triangle","triangle","vee"],wP={borderWidth:{number:H},borderWidthSelected:{number:H,undefined:"undefined"},brokenImage:{string:me,undefined:"undefined"},chosen:{label:{boolean:ue,function:"function"},node:{boolean:ue,function:"function"},__type__:{object:Te,boolean:ue}},color:{border:{string:me},background:{string:me},highlight:{border:{string:me},background:{string:me},__type__:{object:Te,string:me}},hover:{border:{string:me},background:{string:me},__type__:{object:Te,string:me}},__type__:{object:Te,string:me}},opacity:{number:H,undefined:"undefined"},fixed:{x:{boolean:ue},y:{boolean:ue},__type__:{object:Te,boolean:ue}},font:{align:{string:me},color:{string:me},size:{number:H},face:{string:me},background:{string:me},strokeWidth:{number:H},strokeColor:{string:me},vadjust:{number:H},multi:{boolean:ue,string:me},bold:{color:{string:me},size:{number:H},face:{string:me},mod:{string:me},vadjust:{number:H},__type__:{object:Te,string:me}},boldital:{color:{string:me},size:{number:H},face:{string:me},mod:{string:me},vadjust:{number:H},__type__:{object:Te,string:me}},ital:{color:{string:me},size:{number:H},face:{string:me},mod:{string:me},vadjust:{number:H},__type__:{object:Te,string:me}},mono:{color:{string:me},size:{number:H},face:{string:me},mod:{string:me},vadjust:{number:H},__type__:{object:Te,string:me}},__type__:{object:Te,string:me}},group:{string:me,number:H,undefined:"undefined"},heightConstraint:{minimum:{number:H},valign:{string:me},__type__:{object:Te,boolean:ue,number:H}},hidden:{boolean:ue},icon:{face:{string:me},code:{string:me},size:{number:H},color:{string:me},weight:{string:me,number:H},__type__:{object:Te}},id:{string:me,number:H},image:{selected:{string:me,undefined:"undefined"},unselected:{string:me,undefined:"undefined"},__type__:{object:Te,string:me}},imagePadding:{top:{number:H},right:{number:H},bottom:{number:H},left:{number:H},__type__:{object:Te,number:H}},label:{string:me,undefined:"undefined"},labelHighlightBold:{boolean:ue},level:{number:H,undefined:"undefined"},margin:{top:{number:H},right:{number:H},bottom:{number:H},left:{number:H},__type__:{object:Te,number:H}},mass:{number:H},physics:{boolean:ue},scaling:{min:{number:H},max:{number:H},label:{enabled:{boolean:ue},min:{number:H},max:{number:H},maxVisible:{number:H},drawThreshold:{number:H},__type__:{object:Te,boolean:ue}},customScalingFunction:{function:"function"},__type__:{object:Te}},shadow:{enabled:{boolean:ue},color:{string:me},size:{number:H},x:{number:H},y:{number:H},__type__:{object:Te,boolean:ue}},shape:{string:["custom","ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},ctxRenderer:{function:"function"},shapeProperties:{borderDashes:{boolean:ue,array:Kf},borderRadius:{number:H},interpolation:{boolean:ue},useImageSize:{boolean:ue},useBorderWithImage:{boolean:ue},coordinateOrigin:{string:["center","top-left"]},__type__:{object:Te}},size:{number:H},title:{string:me,dom:Hce,undefined:"undefined"},value:{number:H,undefined:"undefined"},widthConstraint:{minimum:{number:H},maximum:{number:H},__type__:{object:Te,boolean:ue,number:H}},x:{number:H},y:{number:H},__type__:{object:Te}},Yqe={configure:{enabled:{boolean:ue},filter:{boolean:ue,string:me,array:Kf,function:"function"},container:{dom:Hce},showButton:{boolean:ue},__type__:{object:Te,boolean:ue,string:me,array:Kf,function:"function"}},edges:{arrows:{to:{enabled:{boolean:ue},scaleFactor:{number:H},type:{string:xP},imageHeight:{number:H},imageWidth:{number:H},src:{string:me},__type__:{object:Te,boolean:ue}},middle:{enabled:{boolean:ue},scaleFactor:{number:H},type:{string:xP},imageWidth:{number:H},imageHeight:{number:H},src:{string:me},__type__:{object:Te,boolean:ue}},from:{enabled:{boolean:ue},scaleFactor:{number:H},type:{string:xP},imageWidth:{number:H},imageHeight:{number:H},src:{string:me},__type__:{object:Te,boolean:ue}},__type__:{string:["from","to","middle"],object:Te}},endPointOffset:{from:{number:H},to:{number:H},__type__:{object:Te,number:H}},arrowStrikethrough:{boolean:ue},background:{enabled:{boolean:ue},color:{string:me},size:{number:H},dashes:{boolean:ue,array:Kf},__type__:{object:Te,boolean:ue}},chosen:{label:{boolean:ue,function:"function"},edge:{boolean:ue,function:"function"},__type__:{object:Te,boolean:ue}},color:{color:{string:me},highlight:{string:me},hover:{string:me},inherit:{string:["from","to","both"],boolean:ue},opacity:{number:H},__type__:{object:Te,string:me}},dashes:{boolean:ue,array:Kf},font:{color:{string:me},size:{number:H},face:{string:me},background:{string:me},strokeWidth:{number:H},strokeColor:{string:me},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:H},multi:{boolean:ue,string:me},bold:{color:{string:me},size:{number:H},face:{string:me},mod:{string:me},vadjust:{number:H},__type__:{object:Te,string:me}},boldital:{color:{string:me},size:{number:H},face:{string:me},mod:{string:me},vadjust:{number:H},__type__:{object:Te,string:me}},ital:{color:{string:me},size:{number:H},face:{string:me},mod:{string:me},vadjust:{number:H},__type__:{object:Te,string:me}},mono:{color:{string:me},size:{number:H},face:{string:me},mod:{string:me},vadjust:{number:H},__type__:{object:Te,string:me}},__type__:{object:Te,string:me}},hidden:{boolean:ue},hoverWidth:{function:"function",number:H},label:{string:me,undefined:"undefined"},labelHighlightBold:{boolean:ue},length:{number:H,undefined:"undefined"},physics:{boolean:ue},scaling:{min:{number:H},max:{number:H},label:{enabled:{boolean:ue},min:{number:H},max:{number:H},maxVisible:{number:H},drawThreshold:{number:H},__type__:{object:Te,boolean:ue}},customScalingFunction:{function:"function"},__type__:{object:Te}},selectionWidth:{function:"function",number:H},selfReferenceSize:{number:H},selfReference:{size:{number:H},angle:{number:H},renderBehindTheNode:{boolean:ue},__type__:{object:Te}},shadow:{enabled:{boolean:ue},color:{string:me},size:{number:H},x:{number:H},y:{number:H},__type__:{object:Te,boolean:ue}},smooth:{enabled:{boolean:ue},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:H},forceDirection:{string:["horizontal","vertical","none"],boolean:ue},__type__:{object:Te,boolean:ue}},title:{string:me,undefined:"undefined"},width:{number:H},widthConstraint:{maximum:{number:H},__type__:{object:Te,boolean:ue,number:H}},value:{number:H,undefined:"undefined"},__type__:{object:Te}},groups:{useDefaultGroups:{boolean:ue},__any__:wP,__type__:{object:Te}},interaction:{dragNodes:{boolean:ue},dragView:{boolean:ue},hideEdgesOnDrag:{boolean:ue},hideEdgesOnZoom:{boolean:ue},hideNodesOnDrag:{boolean:ue},hover:{boolean:ue},keyboard:{enabled:{boolean:ue},speed:{x:{number:H},y:{number:H},zoom:{number:H},__type__:{object:Te}},bindToWindow:{boolean:ue},autoFocus:{boolean:ue},__type__:{object:Te,boolean:ue}},multiselect:{boolean:ue},navigationButtons:{boolean:ue},selectable:{boolean:ue},selectConnectedEdges:{boolean:ue},hoverConnectedEdges:{boolean:ue},tooltipDelay:{number:H},zoomView:{boolean:ue},zoomSpeed:{number:H},__type__:{object:Te}},layout:{randomSeed:{undefined:"undefined",number:H,string:me},improvedLayout:{boolean:ue},clusterThreshold:{number:H},hierarchical:{enabled:{boolean:ue},levelSeparation:{number:H},nodeSpacing:{number:H},treeSpacing:{number:H},blockShifting:{boolean:ue},edgeMinimization:{boolean:ue},parentCentralization:{boolean:ue},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:Te,boolean:ue}},__type__:{object:Te}},manipulation:{enabled:{boolean:ue},initiallyActive:{boolean:ue},addNode:{boolean:ue,function:"function"},addEdge:{boolean:ue,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:Te,boolean:ue,function:"function"}},deleteNode:{boolean:ue,function:"function"},deleteEdge:{boolean:ue,function:"function"},controlNodeStyle:wP,__type__:{object:Te,boolean:ue}},nodes:wP,physics:{enabled:{boolean:ue},barnesHut:{theta:{number:H},gravitationalConstant:{number:H},centralGravity:{number:H},springLength:{number:H},springConstant:{number:H},damping:{number:H},avoidOverlap:{number:H},__type__:{object:Te}},forceAtlas2Based:{theta:{number:H},gravitationalConstant:{number:H},centralGravity:{number:H},springLength:{number:H},springConstant:{number:H},damping:{number:H},avoidOverlap:{number:H},__type__:{object:Te}},repulsion:{centralGravity:{number:H},springLength:{number:H},springConstant:{number:H},nodeDistance:{number:H},damping:{number:H},__type__:{object:Te}},hierarchicalRepulsion:{centralGravity:{number:H},springLength:{number:H},springConstant:{number:H},nodeDistance:{number:H},damping:{number:H},avoidOverlap:{number:H},__type__:{object:Te}},maxVelocity:{number:H},minVelocity:{number:H},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:ue},iterations:{number:H},updateInterval:{number:H},onlyDynamicEdges:{boolean:ue},fit:{boolean:ue},__type__:{object:Te,boolean:ue}},timestep:{number:H},adaptiveTimestep:{boolean:ue},wind:{x:{number:H},y:{number:H},__type__:{object:Te}},__type__:{object:Te,boolean:ue}},autoResize:{boolean:ue},clickToUse:{boolean:ue},locale:{string:me},locales:{__any__:{any:Gqe},__type__:{object:Te}},height:{string:me},width:{string:me},__type__:{object:Te}},Kce={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},opacity:[0,0,1,.1],fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},endPointOffset:{from:[0,-10,10,1],to:[0,-10,10,1]},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0,autoFocus:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},Qqe=(t,e,r)=>{var n;return!!(ul(t).call(t,"physics")&&ul(n=Kce.physics.solver).call(n,e)&&r.physics.solver!==e&&e!=="wind")};class Xqe{constructor(){}getDistances(e,r,n){const i={},s=e.edges;for(let a=0;a<r.length;a++){const l=r[a],u={};i[l]=u;for(let d=0;d<r.length;d++)u[r[d]]=a==d?0:1e9}for(let a=0;a<n.length;a++){const l=s[n[a]];l.connected===!0&&i[l.fromId]!==void 0&&i[l.toId]!==void 0&&(i[l.fromId][l.toId]=1,i[l.toId][l.fromId]=1)}const o=r.length;for(let a=0;a<o;a++){const l=r[a],u=i[l];for(let d=0;d<o-1;d++){const h=r[d],f=i[h];for(let p=d+1;p<o;p++){const m=r[p],g=i[m],y=Math.min(f[m],f[l]+u[m]);f[m]=y,g[h]=y}}}return i}}class Jqe{constructor(e,r,n){this.body=e,this.springLength=r,this.springConstant=n,this.distanceSolver=new Xqe}setOptions(e){e&&(e.springLength&&(this.springLength=e.springLength),e.springConstant&&(this.springConstant=e.springConstant))}solve(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=this.distanceSolver.getDistances(this.body,e,r);this._createL_matrix(i),this._createK_matrix(i),this._createE_matrix();const s=.01,o=1;let a=0;const l=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),u=5;let d=1e9,h=0,f=0,p=0,m=0,g=0;for(;d>s&&a<l;)for(a+=1,[h,d,f,p]=this._getHighestEnergyNode(n),m=d,g=0;m>o&&g<u;)g+=1,this._moveNode(h,f,p),[m,f,p]=this._getEnergy(h)}_getHighestEnergyNode(e){const r=this.body.nodeIndices,n=this.body.nodes;let i=0,s=r[0],o=0,a=0;for(let l=0;l<r.length;l++){const u=r[l];if(n[u].predefinedPosition!==!0||n[u].isCluster===!0&&e===!0||n[u].options.fixed.x!==!0||n[u].options.fixed.y!==!0){const[d,h,f]=this._getEnergy(u);i<d&&(i=d,s=u,o=h,a=f)}}return[s,i,o,a]}_getEnergy(e){const[r,n]=this.E_sums[e];return[Math.sqrt(r**2+n**2),r,n]}_moveNode(e,r,n){const i=this.body.nodeIndices,s=this.body.nodes;let o=0,a=0,l=0;const u=s[e].x,d=s[e].y,h=this.K_matrix[e],f=this.L_matrix[e];for(let x=0;x<i.length;x++){const S=i[x];if(S!==e){const E=s[S].x,N=s[S].y,_=h[S],k=f[S],j=1/((u-E)**2+(d-N)**2)**1.5;o+=_*(1-k*(d-N)**2*j),a+=_*(k*(u-E)*(d-N)*j),l+=_*(1-k*(u-E)**2*j)}}const p=o,m=a,g=r,y=l,v=n,b=(g/p+v/m)/(m/p-y/m),w=-(m*b+g)/p;s[e].x+=w,s[e].y+=b,this._updateE_matrix(e)}_createL_matrix(e){const r=this.body.nodeIndices,n=this.springLength;this.L_matrix=[];for(let i=0;i<r.length;i++){this.L_matrix[r[i]]={};for(let s=0;s<r.length;s++)this.L_matrix[r[i]][r[s]]=n*e[r[i]][r[s]]}}_createK_matrix(e){const r=this.body.nodeIndices,n=this.springConstant;this.K_matrix=[];for(let i=0;i<r.length;i++){this.K_matrix[r[i]]={};for(let s=0;s<r.length;s++)this.K_matrix[r[i]][r[s]]=n*e[r[i]][r[s]]**-2}}_createE_matrix(){const e=this.body.nodeIndices,r=this.body.nodes;this.E_matrix={},this.E_sums={};for(let n=0;n<e.length;n++)this.E_matrix[e[n]]=[];for(let n=0;n<e.length;n++){const i=e[n],s=r[i].x,o=r[i].y;let a=0,l=0;for(let u=n;u<e.length;u++){const d=e[u];if(d!==i){const h=r[d].x,f=r[d].y,p=1/Math.sqrt((s-h)**2+(o-f)**2);this.E_matrix[i][u]=[this.K_matrix[i][d]*(s-h-this.L_matrix[i][d]*(s-h)*p),this.K_matrix[i][d]*(o-f-this.L_matrix[i][d]*(o-f)*p)],this.E_matrix[d][n]=this.E_matrix[i][u],a+=this.E_matrix[i][u][0],l+=this.E_matrix[i][u][1]}}this.E_sums[i]=[a,l]}}_updateE_matrix(e){const r=this.body.nodeIndices,n=this.body.nodes,i=this.E_matrix[e],s=this.K_matrix[e],o=this.L_matrix[e],a=n[e].x,l=n[e].y;let u=0,d=0;for(let h=0;h<r.length;h++){const f=r[h];if(f!==e){const p=i[h],m=p[0],g=p[1],y=n[f].x,v=n[f].y,b=1/Math.sqrt((a-y)**2+(l-v)**2),w=s[f]*(a-y-o[f]*(a-y)*b),x=s[f]*(l-v-o[f]*(l-v)*b);i[h]=[w,x],u+=w,d+=x;const S=this.E_sums[f];S[0]+=w-m,S[1]+=x-g}}this.E_sums[e]=[u,d]}}function je(t,e,r){var n,i,s,o;if(!(this instanceof je))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:S4e,clickToUse:!1},Er(this.options,this.defaultOptions),this.body={container:t,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:de(n=this.on).call(n,this),off:de(i=this.off).call(i,this),emit:de(s=this.emit).call(s,this),once:de(o=this.once).call(o,this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}},selectionBox:{show:!1,position:{start:{x:0,y:0},end:{x:0,y:0}}}},this.bindEventListeners(),this.images=new N4e(()=>this.body.emitter.emit("_requestRedraw")),this.groups=new L4e,this.canvas=new MFe(this.body),this.selectionHandler=new mqe(this.body,this.canvas),this.interactionHandler=new FFe(this.body,this.canvas,this.selectionHandler),this.view=new DFe(this.body,this.canvas),this.renderer=new TFe(this.body,this.canvas),this.physics=new wFe(this.body),this.layoutEngine=new Hqe(this.body),this.clustering=new jFe(this.body),this.manipulation=new Kqe(this.body,this.canvas,this.selectionHandler,this.interactionHandler),this.nodesHandler=new Y3e(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new mFe(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new Jqe(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(r),this.setData(e)}Ele(je.prototype);je.prototype.setOptions=function(t){if(t===null&&(t=void 0),t!==void 0){if(Z$e.validate(t,Yqe)===!0&&console.error("%cErrors have been found in the supplied options object.",vce),lf(["locale","locales","clickToUse"],this.options,t),t.locale!==void 0&&(t.locale=E4e(t.locales||this.options.locales,t.locale)),t=this.layoutEngine.setOptions(t.layout,t),this.canvas.setOptions(t),this.groups.setOptions(t.groups),this.nodesHandler.setOptions(t.nodes),this.edgesHandler.setOptions(t.edges),this.physics.setOptions(t.physics),this.manipulation.setOptions(t.manipulation,t,this.options),this.interactionHandler.setOptions(t.interaction),this.renderer.setOptions(t.interaction),this.selectionHandler.setOptions(t.interaction),t.groups!==void 0&&this.body.emitter.emit("refreshNodes"),"configure"in t&&(this.configurator||(this.configurator=new X$e(this,this.body.container,Kce,this.canvas.pixelRatio,Qqe)),this.configurator.setOptions(t.configure)),this.configurator&&this.configurator.options.enabled===!0){const n={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};At(n.nodes,this.nodesHandler.options),At(n.edges,this.edgesHandler.options),At(n.layout,this.layoutEngine.options),At(n.interaction,this.selectionHandler.options),At(n.interaction,this.renderer.options),At(n.interaction,this.interactionHandler.options),At(n.manipulation,this.manipulation.options),At(n.physics,this.physics.options),At(n.global,this.canvas.options),At(n.global,this.options),this.configurator.setModuleOptions(n)}t.clickToUse!==void 0?t.clickToUse===!0?this.activator===void 0&&(this.activator=new Q$e(this.canvas.frame),this.activator.on("change",()=>{this.body.emitter.emit("activate")})):(this.activator!==void 0&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}};je.prototype._updateVisibleIndices=function(){const t=this.body.nodes,e=this.body.edges;this.body.nodeIndices=[],this.body.edgeIndices=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&!this.clustering._isClusteredNode(r)&&t[r].options.hidden===!1&&this.body.nodeIndices.push(t[r].id);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const n=e[r],i=t[n.fromId],s=t[n.toId],o=i!==void 0&&s!==void 0;!this.clustering._isClusteredEdge(r)&&n.options.hidden===!1&&o&&i.options.hidden===!1&&s.options.hidden===!1&&this.body.edgeIndices.push(n.id)}};je.prototype.bindEventListeners=function(){this.body.emitter.on("_dataChanged",()=>{this.edgesHandler._updateState(),this.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",()=>{this.clustering._updateState(),this._updateVisibleIndices(),this._updateValueRange(this.body.nodes),this._updateValueRange(this.body.edges),this.body.emitter.emit("startSimulation"),this.body.emitter.emit("_requestRedraw")})};je.prototype.setData=function(t){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),t&&t.dot&&(t.nodes||t.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(t&&t.options),t&&t.dot){console.warn("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");const e=c4e(t.dot);this.setData(e);return}else if(t&&t.gephi){console.warn("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");const e=u4e(t.gephi);this.setData(e);return}else this.nodesHandler.setData(t&&t.nodes,!0),this.edgesHandler.setData(t&&t.edges,!0);this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")};je.prototype.destroy=function(){this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images;for(const t in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,t)&&delete this.body.nodes[t];for(const t in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,t)&&delete this.body.edges[t];Ea(this.body.container)};je.prototype._updateValueRange=function(t){let e,r,n,i=0;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const s=t[e].getValue();s!==void 0&&(r=r===void 0?s:Math.min(s,r),n=n===void 0?s:Math.max(s,n),i+=s)}if(r!==void 0&&n!==void 0)for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&t[e].setValueRange(r,n,i)};je.prototype.isActive=function(){return!this.activator||this.activator.active};je.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)};je.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)};je.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)};je.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)};je.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)};je.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)};je.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)};je.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)};je.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)};je.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)};je.prototype.updateClusteredNode=function(){return this.clustering.updateClusteredNode.apply(this.clustering,arguments)};je.prototype.getClusteredEdges=function(){return this.clustering.getClusteredEdges.apply(this.clustering,arguments)};je.prototype.getBaseEdge=function(){return this.clustering.getBaseEdge.apply(this.clustering,arguments)};je.prototype.getBaseEdges=function(){return this.clustering.getBaseEdges.apply(this.clustering,arguments)};je.prototype.updateEdge=function(){return this.clustering.updateEdge.apply(this.clustering,arguments)};je.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)};je.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)};je.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)};je.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)};je.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)};je.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)};je.prototype.editNodeMode=function(){return console.warn("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)};je.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)};je.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)};je.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)};je.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)};je.prototype.getPosition=function(){return this.nodesHandler.getPosition.apply(this.nodesHandler,arguments)};je.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)};je.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)};je.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)};je.prototype.getConnectedNodes=function(t){return this.body.nodes[t]!==void 0?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)};je.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)};je.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)};je.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)};je.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)};je.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)};je.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)};je.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodeIds.apply(this.selectionHandler,arguments)};je.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdgeIds.apply(this.selectionHandler,arguments)};je.prototype.getNodeAt=function(){const t=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return t!==void 0&&t.id!==void 0?t.id:t};je.prototype.getEdgeAt=function(){const t=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return t!==void 0&&t.id!==void 0?t.id:t};je.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)};je.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)};je.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.selectionHandler.commitWithoutEmitting.apply(this.selectionHandler),this.redraw()};je.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)};je.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)};je.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)};je.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)};je.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)};je.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)};je.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)};je.prototype.getOptionsFromConfigurator=function(){let t={};return this.configurator&&(t=this.configurator.getOptions.apply(this.configurator)),t};function Zqe({graphData:t,startPersonId:e,onNodeClick:r}){const n=C.useRef(null),i=C.useRef(null),s=Un(),o=C.useCallback(d=>{r?r(d):s(`/people/${d}`)},[r,s]);C.useEffect(()=>{if(!n.current||!t||!t.nodes||t.nodes.length===0)return;const d=new gh(t.nodes),h=new gh(t.edges),f={layout:{hierarchical:{enabled:!0,direction:"UD",sortMethod:"directed",levelSeparation:180,nodeSpacing:200,treeSpacing:250,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0}},nodes:{shape:"box",margin:10,font:{size:14,face:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',color:"#1f2937"},color:{border:"#d1d5db",background:"#ffffff",highlight:{border:"#f59e0b",background:"#fef3c7"},hover:{border:"#9ca3af",background:"#f9fafb"}},borderWidth:2,borderWidthSelected:3,shadow:{enabled:!0,color:"rgba(0,0,0,0.1)",size:5,x:0,y:2}},edges:{color:{color:"#9ca3af",highlight:"#6b7280",hover:"#6b7280"},width:2,smooth:{enabled:!0,type:"cubicBezier",forceDirection:"vertical",roundness:.4},arrows:{to:{enabled:!1}}},physics:{enabled:!1},interaction:{hover:!0,tooltipDelay:200,zoomView:!0,dragView:!0,dragNodes:!1,navigationButtons:!1,keyboard:{enabled:!0,bindToWindow:!1}}},p=new je(n.current,{nodes:d,edges:h},f);return i.current=p,p.on("click",m=>{if(m.nodes.length>0){const g=m.nodes[0];o(g)}}),p.on("doubleClick",m=>{m.nodes.length>0&&p.focus(m.nodes[0],{scale:1,animation:{duration:500,easingFunction:"easeInOutQuad"}})}),p.once("stabilized",()=>{const m=t.edges.filter(g=>g.dashes).map(g=>[g.from,g.to]);if(m.length>0){const g=p.getPositions(),y={},v=new Set;m.forEach(([b,w])=>{if(v.has(b)||v.has(w))return;const x=g[b],S=g[w];if(!x||!S)return;const E=(x.x+S.x)/2;y[b]={x:E-60,y:x.y},y[w]={x:E+60,y:S.y},v.add(b),v.add(w)}),Object.entries(y).forEach(([b,w])=>{p.moveNode(b,w.x,w.y)})}setTimeout(()=>{p.fit({animation:{duration:500,easingFunction:"easeInOutQuad"}})},50)}),setTimeout(()=>{e&&p&&p.focus(e,{scale:.8,animation:{duration:500,easingFunction:"easeInOutQuad"}})},100),()=>{p&&p.destroy()}},[t,e,o]);const a=()=>{if(i.current){const d=i.current.getScale();i.current.moveTo({scale:d*1.3,animation:{duration:300,easingFunction:"easeInOutQuad"}})}},l=()=>{if(i.current){const d=i.current.getScale();i.current.moveTo({scale:d/1.3,animation:{duration:300,easingFunction:"easeInOutQuad"}})}},u=()=>{i.current&&i.current.fit({animation:{duration:500,easingFunction:"easeInOutQuad"}})};return!t||!t.nodes||t.nodes.length===0?c.jsx("div",{className:"flex items-center justify-center h-96",children:c.jsx("p",{className:"text-gray-500",children:"No family tree data available"})}):c.jsxs("div",{className:"relative w-full h-full",children:[c.jsxs("div",{className:"absolute top-4 right-4 z-10 flex gap-2 bg-white rounded-lg shadow-lg p-2",children:[c.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded",title:"Zoom In",children:c.jsx(Mge,{className:"w-4 h-4"})}),c.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 rounded",title:"Zoom Out",children:c.jsx(Age,{className:"w-4 h-4"})}),c.jsx("button",{onClick:u,className:"p-2 hover:bg-gray-100 rounded",title:"Fit All",children:c.jsx(sne,{className:"w-4 h-4"})})]}),c.jsx("div",{className:"absolute bottom-4 left-4 z-10 text-xs text-gray-500 bg-white/80 px-2 py-1 rounded",children:"Click a person to view details  Double-click to center  Scroll to zoom"}),c.jsx("div",{ref:n,className:"w-full h-full min-h-[600px]",style:{background:"#fafafa"}})]})}const eLe=["parent","child","spouse","lover","partner"];function tLe(t){return eLe.includes(t==null?void 0:t.toLowerCase())}function rLe(t){return(t==null?void 0:t.toLowerCase())==="parent"}function nLe(t){return(t==null?void 0:t.toLowerCase())==="child"}function iLe(t){const e=t==null?void 0:t.toLowerCase();return e==="spouse"||e==="lover"||e==="partner"}function sLe(t,e,r){var d;const n=new Map,i=[],s=new Set,o=new Map;e.forEach(h=>o.set(h.id,h));const a=[{personId:t,depth:0}];s.add(t);function l(h,f){var w,x,S,E;const p=h.name||((w=h.title)==null?void 0:w.rendered)||h.title||`Person ${f}`,m=Dn(p);let g=null,y=((x=h.acf)==null?void 0:x.birth_date)||null;if(y){const N=new Date(y);isNaN(N.getTime())||(g=Math.floor((new Date-N)/(365.25*24*60*60*1e3)))}let v="";switch((S=h.acf)==null?void 0:S.gender){case"male":v="";break;case"female":v="";break;case"non_binary":case"other":case"prefer_not_to_say":v="";break}let b="";if(y)try{const N=new Date(y);if(!isNaN(N.getTime())){const _=String(N.getDate()).padStart(2,"0"),k=String(N.getMonth()+1).padStart(2,"0"),j=N.getFullYear();b=`${_}-${k}-${j}`}}catch{}return{id:f,name:m,gender:((E=h.acf)==null?void 0:E.gender)||"",genderSymbol:v,photo:h.thumbnail||null,age:g,birthDate:y,formattedBirthDate:b}}const u=o.get(t);for(u&&n.set(t,l(u,t));a.length>0;){const{personId:h,depth:f}=a.shift(),p=r.get(h)||[];for(const m of p){if(m.relationship_type_slug&&!tLe(m.relationship_type_slug))continue;const g=m.related_person;if(!g||!o.has(g))continue;if(!n.has(g)){const w=o.get(g);n.set(g,l(w,g))}const y=`${h}-${g}`,v=`${g}-${h}`;if(!i.some(w=>`${w.from}-${w.to}`===y||`${w.from}-${w.to}`===v)){const w=(d=m.relationship_type_slug)==null?void 0:d.toLowerCase();if(rLe(w))i.push({from:g,to:h,type:"parent-child"});else if(nLe(w))i.push({from:h,to:g,type:"parent-child"});else if(iLe(w)){const[x,S]=h<g?[h,g]:[g,h];i.push({from:x,to:S,type:"spouse"})}}s.has(g)||(s.add(g),a.push({personId:g,depth:f+1}))}}return{nodes:Array.from(n.values()),edges:i}}function oLe(t,e,r={}){const{nodes:n,edges:i}=t;if(n.length===0)return{nodes:[],edges:[]};const s=new Map,o=new Map,a=new Map;n.forEach(y=>{s.set(y.id,[]),o.set(y.id,[]),a.set(y.id,[])}),i.forEach(y=>{var v,b,w,x;y.type==="parent-child"?((v=s.get(y.to))==null||v.push(y.from),(b=o.get(y.from))==null||b.push(y.to)):y.type==="spouse"&&((w=a.get(y.from))==null||w.push(y.to),(x=a.get(y.to))==null||x.push(y.from))});const l=new Map,u=new Set,d=[{id:e,generation:0}];for(l.set(e,0),u.add(e);d.length>0;){const{id:y,generation:v}=d.shift(),b=s.get(y)||[];for(const S of b)u.has(S)||(u.add(S),l.set(S,v-1),d.push({id:S,generation:v-1}));const w=o.get(y)||[];for(const S of w)u.has(S)||(u.add(S),l.set(S,v+1),d.push({id:S,generation:v+1}));const x=a.get(y)||[];for(const S of x)u.has(S)||(u.add(S),l.set(S,v),d.push({id:S,generation:v}))}n.forEach(y=>{l.has(y.id)||l.set(y.id,0)});const h=Math.min(...l.values()),f=new Map;l.forEach((y,v)=>{f.set(v,y-h)});function p(y,v,b=!1){const w=y?y.split(" ").map(N=>N[0]).join("").toUpperCase().slice(0,2):"?";let x,S;b?(x="%23d1d5db",S="%236b7280"):v?(x="%23fef3c7",S="%23b45309"):(x="%23e5e7eb",S="%23374151");const E=`<svg xmlns="http://www.w3.org/2000/svg" width="90" height="90" viewBox="0 0 90 90">
      <circle cx="45" cy="45" r="45" fill="${x}"/>
      <text x="45" y="55" text-anchor="middle" font-family="system-ui, sans-serif" font-size="28" font-weight="500" fill="${S}">${w}</text>
    </svg>`;return"data:image/svg+xml,"+encodeURIComponent(E)}const m=n.map(y=>{const v=f.get(y.id)||0,b=y.id===e,w=r[y.id]||!1;let x=y.name;w&&(x=y.name+" ");let S=[x],E="";y.genderSymbol&&(E+=y.genderSymbol+" "),y.age!==null&&(E+=y.age+" "),y.formattedBirthDate&&(E+=y.formattedBirthDate),E.trim()&&S.push(E.trim());const N=y.photo||p(y.name,b,w);let _="#d1d5db";return b?_="#f59e0b":w&&(_="#9ca3af"),{id:y.id,label:S.join(`
`),level:v,shape:"circularImage",image:N,size:45,font:{size:14,face:"system-ui, -apple-system, sans-serif",vadjust:8,color:w?"#6b7280":"#1f2937"},color:{border:_,background:"#ffffff",highlight:{border:"#f59e0b",background:"#fef3c7"}},borderWidth:b?3:2,data:{...y,isDeceased:w}}}),g=i.map((y,v)=>{const b=y.type==="spouse";return{id:`edge-${v}`,from:y.from,to:y.to,arrows:{to:{enabled:!1}},color:{color:b?"#ec4899":"#9ca3af",highlight:b?"#db2777":"#6b7280"},width:2,dashes:b?[5,5]:!1,smooth:!1,length:b?50:300}});return{nodes:m,edges:g}}function aLe(t){const e=new Map;return t.forEach(r=>{var s;const i=(((s=r.acf)==null?void 0:s.relationships)||[]).map(o=>{var u,d,h,f,p,m;let a="";o.relationship_slug?a=o.relationship_slug.toLowerCase():typeof o.relationship_type=="object"?a=((u=o.relationship_type)==null?void 0:u.slug)||((h=(d=o.relationship_type)==null?void 0:d.name)==null?void 0:h.toLowerCase())||"":typeof o.relationship_type=="string"&&(a=o.relationship_type.toLowerCase());let l=null;return typeof o.related_person=="object"?l=((f=o.related_person)==null?void 0:f.ID)||((p=o.related_person)==null?void 0:p.id)||((m=o.related_person)==null?void 0:m.term_id):(typeof o.related_person=="number"||typeof o.related_person=="string")&&(l=parseInt(o.related_person,10)),{related_person:l,relationship_type:o.relationship_type,relationship_type_slug:a,relationship_name:o.relationship_name||"",relationship_label:o.relationship_label||""}}).filter(o=>o.related_person);e.set(r.id,i)}),e}function lLe(t,e){const r=new Map;e.forEach(n=>{var i;r.set(n.id,n.slug||((i=n.name)==null?void 0:i.toLowerCase()))}),t.forEach(n=>{n.forEach(i=>{if(!i.relationship_type_slug&&i.relationship_type){const s=typeof i.relationship_type=="object"?i.relationship_type.term_id||i.relationship_type.id:i.relationship_type;i.relationship_type_slug=r.get(s)||""}})})}function cLe(){var p,m;const{id:t}=jh(),e=Un(),r=parseInt(t,10),{data:n,isLoading:i}=dne(t),{data:s=[],isLoading:o}=lu(),{data:a=[]}=at({queryKey:["relationship-types"],queryFn:async()=>(await et.getRelationshipTypes()).data}),l=C.useMemo(()=>s.map(g=>g.id).filter(Boolean),[s]),u=Dy({queries:l.map(g=>({queryKey:["person-dates",g],queryFn:async()=>(await Se.getPersonDates(g)).data,enabled:!!g,staleTime:5*60*1e3}))}),d=C.useMemo(()=>{const g={};return u.forEach((y,v)=>{if(y.data&&l[v]){const b=l[v],w=y.data.some(x=>{const S=Array.isArray(x.date_type)?x.date_type[0]:x.date_type;return(S==null?void 0:S.toLowerCase())==="died"});g[b]=w}}),g},[u,l]);Ih(n?`Family Tree - ${n.name||((p=n.title)==null?void 0:p.rendered)||n.title||"Person"}`:"Family Tree");const h=C.useMemo(()=>{if(!n||!s.length)return null;try{const g=aLe(s);a.length>0&&lLe(g,a);const y=sLe(r,s,g);return!y||y.nodes.length===0?null:oLe(y,r,d)}catch{return null}},[n,s,a,r,d]),f=g=>{e(`/people/${g}`)};return i||o?c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):n?c.jsxs("div",{className:"max-w-full mx-auto space-y-6",children:[c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs(qe,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[c.jsx(Ph,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Back to Person"})]}),c.jsxs("h1",{className:"text-2xl font-bold",children:["Family Tree: ",n.name||((m=n.title)==null?void 0:m.rendered)||n.title||`Person ${t}`]})]})}),c.jsx("div",{className:"card p-6",children:c.jsx("div",{className:"w-full",style:{height:"800px"},children:h&&h.nodes&&h.nodes.length>0?c.jsx(Zqe,{graphData:h,startPersonId:r,onNodeClick:f}):c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-500 mb-2",children:"No family relationships found."}),c.jsx("p",{className:"text-sm text-gray-400",children:"Add parent or child relationships to see the family tree."})]})})})})]}):c.jsxs("div",{className:"card p-6 text-center",children:[c.jsx("p",{className:"text-red-600 mb-4",children:"Failed to load person."}),c.jsx(qe,{to:"/people",className:"btn-secondary",children:"Back to People"})]})}function uLe({isOpen:t,onClose:e}){const r=Un(),n=xye(),{register:i,handleSubmit:s,reset:o,formState:{errors:a}}=eo({defaultValues:{title:"",description:""}});C.useEffect(()=>{t&&o({title:"",description:""})},[t,o]);const l=async u=>{const d=await n.mutateAsync({title:u.title,content:u.description,status:"publish"});e(),r(`/workspaces/${d.id}`)};return t?c.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:e}),c.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:c.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-lg shadow-xl",children:[c.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Create Workspace"}),c.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:c.jsx(ht,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:s(l),children:[c.jsxs("div",{className:"px-6 py-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Workspace Name *"}),c.jsx("input",{type:"text",...i("title",{required:"Name is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., Sales Team"}),a.title&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.title.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),c.jsx("textarea",{...i("description"),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"What's this workspace for?"})]})]}),c.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:n.isPending,className:"btn-primary",children:n.isPending?"Creating...":"Create Workspace"})]})]})]})})]}):null}function dLe({role:t,isOwner:e}){if(e)return c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:[c.jsx(Zre,{className:"w-3 h-3"}),"Owner"]});const r={admin:{icon:pA,bg:"bg-purple-100",text:"text-purple-800",label:"Admin"},member:{icon:$r,bg:"bg-blue-100",text:"text-blue-800",label:"Member"},viewer:{icon:tne,bg:"bg-gray-100",text:"text-gray-800",label:"Viewer"}},n=r[t]||r.member,i=n.icon;return c.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 ${n.bg} ${n.text} text-xs rounded-full`,children:[c.jsx(i,{className:"w-3 h-3"}),n.label]})}function hLe({workspace:t}){return c.jsx(qe,{to:`/workspaces/${t.id}`,className:"card p-4 hover:shadow-md transition-shadow",children:c.jsx("div",{className:"flex items-start justify-between",children:c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h3",{className:"text-base font-medium text-gray-900 truncate",children:t.title}),t.description&&c.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:t.description}),c.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[c.jsx(dLe,{role:t.role,isOwner:t.is_owner}),c.jsxs("span",{className:"text-sm text-gray-500",children:[t.member_count," member",t.member_count!==1?"s":""]})]})]})})})}function fLe(){const[t,e]=C.useState(!1),{data:r,isLoading:n,error:i}=bb();return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Workspaces"}),c.jsxs("button",{onClick:()=>e(!0),className:"btn-primary",children:[c.jsx(lr,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Create Workspace"})]})]}),n&&c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),i&&c.jsx("div",{className:"card p-6 text-center",children:c.jsx("p",{className:"text-red-600",children:"Failed to load workspaces."})}),!n&&!i&&(r==null?void 0:r.length)===0&&c.jsxs("div",{className:"card p-12 text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx($r,{className:"w-6 h-6 text-gray-400"})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No workspaces yet"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Create a workspace to start collaborating with others."}),c.jsxs("button",{onClick:()=>e(!0),className:"btn-primary",children:[c.jsx(lr,{className:"w-4 h-4 mr-2"}),"Create Workspace"]})]}),!n&&!i&&(r==null?void 0:r.length)>0&&c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(s=>c.jsx(hLe,{workspace:s},s.id))}),c.jsx(uLe,{isOpen:t,onClose:()=>e(!1)})]})}function pLe({isOpen:t,onClose:e,workspaceId:r,workspaceName:n}){var d,h,f;const i=Cye(),{register:s,handleSubmit:o,reset:a,formState:{errors:l}}=eo({defaultValues:{email:"",role:"member"}});C.useEffect(()=>{t&&a({email:"",role:"member"})},[t,a]);const u=async p=>{await i.mutateAsync({workspaceId:r,email:p.email,role:p.role}),e()};return t?c.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:e}),c.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:c.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-lg shadow-xl",children:[c.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Invite to Workspace"}),c.jsx("p",{className:"text-sm text-gray-500",children:n})]}),c.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:c.jsx(ht,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:o(u),children:[c.jsxs("div",{className:"px-6 py-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),c.jsxs("div",{className:"relative",children:[c.jsx(hb,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),c.jsx("input",{type:"email",...s("email",{required:"Email is required",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Invalid email address"}}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"colleague@example.com"})]}),l.email&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.email.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),c.jsxs("select",{...s("role"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[c.jsx("option",{value:"admin",children:"Admin - Can manage members and settings"}),c.jsx("option",{value:"member",children:"Member - Can view and edit contacts"}),c.jsx("option",{value:"viewer",children:"Viewer - Can only view contacts"})]})]}),i.isError&&c.jsx("p",{className:"text-sm text-red-600",children:((f=(h=(d=i.error)==null?void 0:d.response)==null?void 0:h.data)==null?void 0:f.message)||"Failed to send invitation"})]}),c.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:i.isPending,className:"btn-primary",children:i.isPending?"Sending...":"Send Invitation"})]})]})]})})]}):null}function mLe({role:t,isOwner:e,small:r=!1}){if(e)return c.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 bg-yellow-100 text-yellow-800 rounded-full ${r?"text-xs":"text-sm"}`,children:[c.jsx(Zre,{className:r?"w-3 h-3":"w-4 h-4"}),"Owner"]});const n={admin:{icon:pA,bg:"bg-purple-100",text:"text-purple-800",label:"Admin"},member:{icon:$r,bg:"bg-blue-100",text:"text-blue-800",label:"Member"},viewer:{icon:tne,bg:"bg-gray-100",text:"text-gray-600",label:"Viewer"}},i=n[t]||n.member,s=i.icon;return c.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 ${i.bg} ${i.text} rounded-full ${r?"text-xs":"text-sm"}`,children:[c.jsx(s,{className:r?"w-3 h-3":"w-4 h-4"}),i.label]})}function gLe({member:t,currentUserRole:e,onRemove:r,onChangeRole:n}){const[i,s]=C.useState(!1),o=e==="admin"||e==="owner",a=t.is_owner;return c.jsxs("div",{className:"flex items-center gap-3 p-3 hover:bg-gray-50",children:[c.jsx("img",{src:t.avatar_url,alt:t.display_name,className:"w-10 h-10 rounded-full"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.display_name}),c.jsx("div",{className:"text-xs text-gray-500",children:t.email})]}),c.jsx(mLe,{role:t.role,isOwner:t.is_owner,small:!0}),o&&!a&&c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>s(!i),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:c.jsx(Cge,{className:"w-4 h-4"})}),i&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0",onClick:()=>s(!1)}),c.jsx("div",{className:"absolute right-0 mt-1 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-10",children:c.jsxs("div",{className:"py-1",children:[c.jsx("button",{onClick:()=>{n(t.user_id,"admin"),s(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50",children:"Make Admin"}),c.jsx("button",{onClick:()=>{n(t.user_id,"member"),s(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50",children:"Make Member"}),c.jsx("button",{onClick:()=>{n(t.user_id,"viewer"),s(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50",children:"Make Viewer"}),c.jsx("hr",{className:"my-1"}),c.jsxs("button",{onClick:()=>{r(t.user_id),s(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[c.jsx(Ige,{className:"w-4 h-4"}),"Remove"]})]})})]})]})]})}function yLe({invite:t,onRevoke:e}){return c.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center",children:c.jsx(pb,{className:"w-5 h-5 text-gray-400"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.email}),c.jsxs("div",{className:"text-xs text-gray-500",children:["Invited as ",t.role,"  Expires ",new Date(t.expires_at).toLocaleDateString()]})]}),c.jsx("span",{className:"px-2 py-0.5 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:"Pending"}),c.jsx("button",{onClick:()=>e(t.id),className:"p-2 text-gray-400 hover:text-red-600 rounded-full hover:bg-red-50",title:"Revoke invite",children:c.jsx(Sn,{className:"w-4 h-4"})})]})}function vLe(){var N,_,k,j;const{id:t}=jh(),e=Un(),[r,n]=C.useState(!1),[i,s]=C.useState(null),[o,a]=C.useState(!1),{data:l,isLoading:u,error:d}=Ine(t),{data:h=[]}=Nye(t),f=Eye(),p=_ye(),m=kye();C.useEffect(()=>{(async()=>{try{const P=await Se.getIcalUrl();s(P.data.token)}catch{}})()},[]);const g=i&&l?`${window.location.origin}/workspace/${l.id}/calendar/${i}.ics`:null,y=()=>{g&&(navigator.clipboard.writeText(g),a(!0),setTimeout(()=>a(!1),2e3))},v=async T=>{confirm("Remove this member from the workspace?")&&await f.mutateAsync({workspaceId:parseInt(t),userId:T})},b=async(T,P)=>{await p.mutateAsync({workspaceId:parseInt(t),userId:T,role:P})},w=async T=>{await m.mutateAsync({workspaceId:parseInt(t),inviteId:T})};if(u)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(d||!l)return c.jsxs("div",{className:"card p-6 text-center",children:[c.jsx("p",{className:"text-red-600",children:"Failed to load workspace."}),c.jsx(qe,{to:"/workspaces",className:"text-primary-600 hover:underline mt-2 inline-block",children:"Back to Workspaces"})]});const x=(N=l.current_user)!=null&&N.is_owner?"owner":(_=l.current_user)==null?void 0:_.role,S=x==="admin"||x==="owner",E=(k=l.current_user)==null?void 0:k.is_owner;return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{children:[c.jsxs("button",{onClick:()=>e("/workspaces"),className:"flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700 mb-2",children:[c.jsx(Ph,{className:"w-4 h-4"}),"Back to Workspaces"]}),c.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:l.title}),l.description&&c.jsx("p",{className:"text-gray-500 mt-1",children:l.description})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[S&&c.jsxs("button",{onClick:()=>n(!0),className:"btn-primary",children:[c.jsx(pb,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Invite"})]}),E&&c.jsxs(qe,{to:`/workspaces/${t}/settings`,className:"btn-secondary",children:[c.jsx(hA,{className:"w-4 h-4 md:mr-2"}),c.jsx("span",{className:"hidden md:inline",children:"Settings"})]})]})]}),c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:c.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Members (",l.member_count,")"]})}),c.jsx("div",{className:"divide-y divide-gray-100",children:(j=l.members)==null?void 0:j.map(T=>c.jsx(gLe,{member:T,currentUserRole:x,onRemove:v,onChangeRole:b},T.user_id))})]}),S&&h.length>0&&c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:c.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Pending Invites (",h.length,")"]})}),c.jsx("div",{className:"divide-y divide-gray-100",children:h.map(T=>c.jsx(yLe,{invite:T,onRevoke:w},T.id))})]}),c.jsxs("div",{className:"card p-4",children:[c.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[c.jsx(Ys,{className:"w-4 h-4"}),"Calendar Subscription"]}),c.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Subscribe to important dates for all contacts in this workspace."}),i?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",value:g||"",readOnly:!0,className:"flex-1 text-xs px-2 py-1.5 bg-gray-50 border border-gray-300 rounded font-mono",onClick:T=>T.target.select()}),c.jsxs("button",{onClick:y,className:"px-3 py-1.5 text-xs bg-primary-600 text-white rounded hover:bg-primary-700 flex items-center gap-1",children:[o?c.jsx(Bc,{className:"w-3 h-3"}):c.jsx(pge,{className:"w-3 h-3"}),o?"Copied!":"Copy"]})]}):c.jsx("p",{className:"text-xs text-gray-500",children:"Enable iCal feed in Settings to subscribe to workspace calendars."})]}),c.jsx(pLe,{isOpen:r,onClose:()=>n(!1),workspaceId:parseInt(t),workspaceName:l.title})]})}function bLe(){var w;const{id:t}=jh(),e=Un(),[r,n]=C.useState(!1),[i,s]=C.useState(""),{data:o,isLoading:a,error:l}=Ine(t),u=wye(),d=Sye(),{register:h,handleSubmit:f,reset:p,formState:{errors:m,isDirty:g}}=eo();C.useEffect(()=>{o&&p({title:o.title,description:o.description||""})},[o,p]);const y=async x=>{await u.mutateAsync({id:parseInt(t),data:{title:x.title,content:x.description}})},v=async()=>{i===o.title&&(await d.mutateAsync(parseInt(t)),e("/workspaces"))};return a?c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):l||!o?c.jsxs("div",{className:"card p-6 text-center",children:[c.jsx("p",{className:"text-red-600",children:"Failed to load workspace."}),c.jsx(qe,{to:"/workspaces",className:"text-primary-600 hover:underline mt-2 inline-block",children:"Back to Workspaces"})]}):((w=o.current_user)==null?void 0:w.is_owner)?c.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[c.jsxs("div",{children:[c.jsxs("button",{onClick:()=>e(`/workspaces/${t}`),className:"flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700 mb-2",children:[c.jsx(Ph,{className:"w-4 h-4"}),"Back to Workspace"]}),c.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Workspace Settings"}),c.jsx("p",{className:"text-gray-500 mt-1",children:o.title})]}),c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:c.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"General"})}),c.jsxs("form",{onSubmit:f(y),className:"p-6 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Workspace Name *"}),c.jsx("input",{type:"text",...h("title",{required:"Name is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),m.title&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.title.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),c.jsx("textarea",{...h("description"),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{type:"submit",disabled:!g||u.isPending,className:"btn-primary disabled:opacity-50",children:u.isPending?"Saving...":"Save Changes"})})]})]}),c.jsxs("div",{className:"card border-red-200",children:[c.jsx("div",{className:"px-6 py-4 border-b border-red-200 bg-red-50",children:c.jsxs("h2",{className:"text-lg font-medium text-red-900 flex items-center gap-2",children:[c.jsx(Hre,{className:"w-5 h-5"}),"Danger Zone"]})}),c.jsx("div",{className:"p-6",children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx(Sn,{className:"w-6 h-6 text-red-600 flex-shrink-0"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-base font-medium text-gray-900",children:"Delete Workspace"}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"This will permanently delete the workspace and remove all member access. Contacts will remain but will no longer be shared via this workspace."}),r?c.jsxs("div",{className:"mt-4 p-4 bg-red-50 rounded-lg",children:[c.jsxs("p",{className:"text-sm text-red-800 mb-3",children:["Type ",c.jsx("strong",{children:o.title})," to confirm deletion:"]}),c.jsx("input",{type:"text",value:i,onChange:x=>s(x.target.value),className:"w-full px-3 py-2 border border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 mb-3",placeholder:"Type workspace name..."}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>{n(!1),s("")},className:"btn-secondary",children:"Cancel"}),c.jsx("button",{onClick:v,disabled:i!==o.title||d.isPending,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:d.isPending?"Deleting...":"Delete Forever"})]})]}):c.jsx("button",{onClick:()=>n(!0),className:"mt-4 px-4 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50",children:"Delete Workspace"})]})]})})]})]}):c.jsxs("div",{className:"card p-6 text-center",children:[c.jsx("p",{className:"text-gray-600",children:"Only workspace owners can access settings."}),c.jsx(qe,{to:`/workspaces/${t}`,className:"text-primary-600 hover:underline mt-2 inline-block",children:"Back to Workspace"})]})}function xLe(){var a,l,u,d,h;const{token:t}=jh(),e=Un(),{data:r,isLoading:n,error:i}=jye(t),s=Tye(),o=async()=>{try{const f=await s.mutateAsync(t);e(`/workspaces/${f.workspace_id}`)}catch{}};if(n)return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"card p-8 max-w-md w-full mx-4 text-center",children:[c.jsx(Yo,{className:"w-8 h-8 text-primary-600 animate-spin mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Validating invitation..."})]})});if(i||!r){const f=((l=(a=i==null?void 0:i.response)==null?void 0:a.data)==null?void 0:l.message)||"This invitation is invalid or has expired.";return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"card p-8 max-w-md w-full mx-4 text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(YI,{className:"w-8 h-8 text-red-600"})}),c.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Invalid Invitation"}),c.jsx("p",{className:"text-gray-600 mb-6",children:f}),c.jsx(qe,{to:"/workspaces",className:"btn-primary inline-block",children:"Go to Workspaces"})]})})}return r.status==="accepted"?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"card p-8 max-w-md w-full mx-4 text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(Lc,{className:"w-8 h-8 text-green-600"})}),c.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Already Accepted"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"This invitation has already been accepted."}),c.jsx(qe,{to:`/workspaces/${r.workspace_id}`,className:"btn-primary inline-block",children:"Go to Workspace"})]})}):c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"card p-8 max-w-md w-full mx-4",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx($r,{className:"w-8 h-8 text-primary-600"})}),c.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Workspace Invitation"})]}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"You have been invited to join"}),c.jsx("p",{className:"text-lg font-semibold text-gray-900",children:r.workspace_name})]}),c.jsx("hr",{className:"my-4 border-gray-200"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-500",children:"Invited by"}),c.jsx("p",{className:"font-medium text-gray-900",children:r.invited_by})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-500",children:"Your role"}),c.jsx("p",{className:"font-medium text-gray-900 capitalize",children:r.role})]})]}),c.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-sm text-gray-500",children:[c.jsx(Xre,{className:"w-4 h-4"}),"Expires ",new Date(r.expires_at).toLocaleDateString()]})]}),s.error&&c.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm text-red-600",children:((h=(d=(u=s.error)==null?void 0:u.response)==null?void 0:d.data)==null?void 0:h.message)||"Failed to accept invitation"})}),c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsx("button",{onClick:o,disabled:s.isPending,className:"btn-primary w-full justify-center",children:s.isPending?c.jsxs(c.Fragment,{children:[c.jsx(Yo,{className:"w-4 h-4 animate-spin mr-2"}),"Joining..."]}):"Accept Invitation"}),c.jsx(qe,{to:"/workspaces",className:"btn-secondary w-full justify-center text-center",children:"Decline"})]}),c.jsxs("p",{className:"text-xs text-gray-500 text-center mt-4",children:["This invitation was sent to ",r.email]})]})})}function wLe(){const{loginUrl:t,isLoggedIn:e}=iA();return gne(),C.useEffect(()=>{e||(window.location.href=t)},[e,t]),c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Redirecting to login..."})]})})}function SLe({children:t}){const{data:e,isLoading:r,error:n}=at({queryKey:["current-user"],queryFn:async()=>(await Se.getCurrentUser()).data,retry:!1});return r?c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):n||!e?c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:c.jsx("div",{className:"max-w-md w-full mx-4",children:c.jsxs("div",{className:"card p-8 text-center",children:[c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:c.jsx(Go,{className:"w-8 h-8 text-yellow-600"})})}),c.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Account Pending Approval"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Your account is pending approval by an administrator. You will receive an email notification once your account has been approved."}),c.jsx("p",{className:"text-sm text-gray-500",children:"If you have any questions, please contact your administrator."})]})})}):e!=null&&e.is_admin||e.is_approved?t:c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:c.jsx("div",{className:"max-w-md w-full mx-4",children:c.jsxs("div",{className:"card p-8 text-center",children:[c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:c.jsx(Go,{className:"w-8 h-8 text-yellow-600"})})}),c.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Account Pending Approval"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Your account is pending approval by an administrator. You will receive an email notification once your account has been approved."}),c.jsx("p",{className:"text-sm text-gray-500",children:"If you have any questions, please contact your administrator."})]})})})}function ELe({children:t}){const{isLoggedIn:e,isLoading:r}=iA();return r?c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e?c.jsx(SLe,{children:t}):c.jsx(nre,{to:"/login",replace:!0})}function _Le(){const{hasUpdate:t,latestVersion:e,reload:r}=lge();return t?c.jsx("div",{className:"fixed top-0 left-0 right-0 z-[100] bg-primary-600 text-white py-2 px-4 shadow-lg",children:c.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-center gap-4 text-sm",children:[c.jsxs("span",{children:["A new version (",e,") is available."]}),c.jsxs("button",{onClick:r,className:"inline-flex items-center gap-2 px-3 py-1 bg-white text-primary-600 rounded-md font-medium hover:bg-primary-50 transition-colors",children:[c.jsx(ine,{className:"w-4 h-4"}),"Reload"]})]})}):null}function NLe(){return c.jsxs(c.Fragment,{children:[c.jsx(_Le,{}),c.jsxs(v5,{children:[c.jsx(Rr,{path:"/login",element:c.jsx(wLe,{})}),c.jsx(Rr,{path:"/*",element:c.jsx(ELe,{children:c.jsx(Dye,{children:c.jsxs(v5,{children:[c.jsx(Rr,{path:"/",element:c.jsx(I_e,{})}),c.jsx(Rr,{path:"/people",element:c.jsx(F_e,{})}),c.jsx(Rr,{path:"/people/:id/family-tree",element:c.jsx(cLe,{})}),c.jsx(Rr,{path:"/people/:id",element:c.jsx(BCe,{})}),c.jsx(Rr,{path:"/companies",element:c.jsx(WCe,{})}),c.jsx(Rr,{path:"/companies/:id",element:c.jsx(VCe,{})}),c.jsx(Rr,{path:"/dates",element:c.jsx(KCe,{})}),c.jsx(Rr,{path:"/todos",element:c.jsx(GCe,{})}),c.jsx(Rr,{path:"/settings",element:c.jsx(eke,{})}),c.jsx(Rr,{path:"/settings/relationship-types",element:c.jsx(oke,{})}),c.jsx(Rr,{path:"/settings/user-approval",element:c.jsx(ake,{})}),c.jsx(Rr,{path:"/workspaces",element:c.jsx(fLe,{})}),c.jsx(Rr,{path:"/workspaces/:id",element:c.jsx(vLe,{})}),c.jsx(Rr,{path:"/workspaces/:id/settings",element:c.jsx(bLe,{})}),c.jsx(Rr,{path:"/workspace-invite/:token",element:c.jsx(xLe,{})}),c.jsx(Rr,{path:"*",element:c.jsx(nre,{to:"/",replace:!0})})]})})})})]})]})}const CLe=new jpe({defaultOptions:{queries:{staleTime:5*60*1e3,retry:1}}}),SP=document.getElementById("root");if(SP)try{EP.createRoot(SP).render(c.jsx(ie.StrictMode,{children:c.jsx(Tpe,{client:CLe,children:c.jsx(Qfe,{children:c.jsx(NLe,{})})})}))}catch{SP.innerHTML='<div style="padding: 20px; color: red;"><h1>Error Loading Application</h1><p>Please check the browser console for details.</p></div>'}
