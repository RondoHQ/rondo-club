var GD=t=>{throw TypeError(t)};var qb=(t,e,r)=>e.has(t)||GD("Cannot "+r);var M=(t,e,r)=>(qb(t,e,"read from private field"),r?r.call(t):e.get(t)),ye=(t,e,r)=>e.has(t)?GD("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),ae=(t,e,r,n)=>(qb(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Ie=(t,e,r)=>(qb(t,e,"access private method"),r);var Xm=(t,e,r,n)=>({set _(i){ae(t,e,i,r)},get _(){return M(t,e,n)}});function Rle(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}function yJ(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vJ={exports:{}},t0={},bJ={exports:{}},Qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Up=Symbol.for("react.element"),Mle=Symbol.for("react.portal"),Ale=Symbol.for("react.fragment"),Dle=Symbol.for("react.strict_mode"),$le=Symbol.for("react.profiler"),Fle=Symbol.for("react.provider"),qle=Symbol.for("react.context"),Lle=Symbol.for("react.forward_ref"),Ble=Symbol.for("react.suspense"),zle=Symbol.for("react.memo"),Vle=Symbol.for("react.lazy"),YD=Symbol.iterator;function Ule(t){return t===null||typeof t!="object"?null:(t=YD&&t[YD]||t["@@iterator"],typeof t=="function"?t:null)}var xJ={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wJ=Object.assign,SJ={};function th(t,e,r){this.props=t,this.context=e,this.refs=SJ,this.updater=r||xJ}th.prototype.isReactComponent={};th.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};th.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _J(){}_J.prototype=th.prototype;function oR(t,e,r){this.props=t,this.context=e,this.refs=SJ,this.updater=r||xJ}var aR=oR.prototype=new _J;aR.constructor=oR;wJ(aR,th.prototype);aR.isPureReactComponent=!0;var QD=Array.isArray,EJ=Object.prototype.hasOwnProperty,lR={current:null},CJ={key:!0,ref:!0,__self:!0,__source:!0};function NJ(t,e,r){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)EJ.call(e,n)&&!CJ.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:Up,type:t,key:s,ref:o,props:i,_owner:lR.current}}function Hle(t,e){return{$$typeof:Up,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function cR(t){return typeof t=="object"&&t!==null&&t.$$typeof===Up}function Wle(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var XD=/\/+/g;function Lb(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Wle(""+t.key):e.toString(36)}function Bg(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Up:case Mle:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+Lb(o,0):n,QD(i)?(r="",t!=null&&(r=t.replace(XD,"$&/")+"/"),Bg(i,e,r,"",function(c){return c})):i!=null&&(cR(i)&&(i=Hle(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(XD,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",QD(t))for(var a=0;a<t.length;a++){s=t[a];var l=n+Lb(s,a);o+=Bg(s,e,r,l,i)}else if(l=Ule(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=n+Lb(s,a++),o+=Bg(s,e,r,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Jm(t,e,r){if(t==null)return t;var n=[],i=0;return Bg(t,n,"","",function(s){return e.call(r,s,i++)}),n}function Kle(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Mn={current:null},zg={transition:null},Gle={ReactCurrentDispatcher:Mn,ReactCurrentBatchConfig:zg,ReactCurrentOwner:lR};function kJ(){throw Error("act(...) is not supported in production builds of React.")}Qe.Children={map:Jm,forEach:function(t,e,r){Jm(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Jm(t,function(){e++}),e},toArray:function(t){return Jm(t,function(e){return e})||[]},only:function(t){if(!cR(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Qe.Component=th;Qe.Fragment=Ale;Qe.Profiler=$le;Qe.PureComponent=oR;Qe.StrictMode=Dle;Qe.Suspense=Ble;Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gle;Qe.act=kJ;Qe.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=wJ({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=lR.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)EJ.call(e,l)&&!CJ.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:Up,type:t.type,key:i,ref:s,props:n,_owner:o}};Qe.createContext=function(t){return t={$$typeof:qle,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Fle,_context:t},t.Consumer=t};Qe.createElement=NJ;Qe.createFactory=function(t){var e=NJ.bind(null,t);return e.type=t,e};Qe.createRef=function(){return{current:null}};Qe.forwardRef=function(t){return{$$typeof:Lle,render:t}};Qe.isValidElement=cR;Qe.lazy=function(t){return{$$typeof:Vle,_payload:{_status:-1,_result:t},_init:Kle}};Qe.memo=function(t,e){return{$$typeof:zle,type:t,compare:e===void 0?null:e}};Qe.startTransition=function(t){var e=zg.transition;zg.transition={};try{t()}finally{zg.transition=e}};Qe.unstable_act=kJ;Qe.useCallback=function(t,e){return Mn.current.useCallback(t,e)};Qe.useContext=function(t){return Mn.current.useContext(t)};Qe.useDebugValue=function(){};Qe.useDeferredValue=function(t){return Mn.current.useDeferredValue(t)};Qe.useEffect=function(t,e){return Mn.current.useEffect(t,e)};Qe.useId=function(){return Mn.current.useId()};Qe.useImperativeHandle=function(t,e,r){return Mn.current.useImperativeHandle(t,e,r)};Qe.useInsertionEffect=function(t,e){return Mn.current.useInsertionEffect(t,e)};Qe.useLayoutEffect=function(t,e){return Mn.current.useLayoutEffect(t,e)};Qe.useMemo=function(t,e){return Mn.current.useMemo(t,e)};Qe.useReducer=function(t,e,r){return Mn.current.useReducer(t,e,r)};Qe.useRef=function(t){return Mn.current.useRef(t)};Qe.useState=function(t){return Mn.current.useState(t)};Qe.useSyncExternalStore=function(t,e,r){return Mn.current.useSyncExternalStore(t,e,r)};Qe.useTransition=function(){return Mn.current.useTransition()};Qe.version="18.3.1";bJ.exports=Qe;var k=bJ.exports;const be=yJ(k),Yle=Rle({__proto__:null,default:be},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qle=k,Xle=Symbol.for("react.element"),Jle=Symbol.for("react.fragment"),Zle=Object.prototype.hasOwnProperty,ece=Qle.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tce={key:!0,ref:!0,__self:!0,__source:!0};function TJ(t,e,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Zle.call(e,n)&&!tce.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:Xle,type:t,key:s,ref:o,props:i,_owner:ece.current}}t0.Fragment=Jle;t0.jsx=TJ;t0.jsxs=TJ;vJ.exports=t0;var d=vJ.exports,Ij={},OJ={exports:{}},yi={},jJ={exports:{}},PJ={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,$){var K=q.length;q.push($);e:for(;0<K;){var W=K-1>>>1,F=q[W];if(0<i(F,$))q[W]=$,q[K]=F,K=W;else break e}}function r(q){return q.length===0?null:q[0]}function n(q){if(q.length===0)return null;var $=q[0],K=q.pop();if(K!==$){q[0]=K;e:for(var W=0,F=q.length,X=F>>>1;W<X;){var Q=2*(W+1)-1,Ce=q[Q],xe=Q+1,Be=q[xe];if(0>i(Ce,K))xe<F&&0>i(Be,Ce)?(q[W]=Be,q[xe]=K,W=xe):(q[W]=Ce,q[Q]=K,W=Q);else if(xe<F&&0>i(Be,K))q[W]=Be,q[xe]=K,W=xe;else break e}}return $}function i(q,$){var K=q.sortIndex-$.sortIndex;return K!==0?K:q.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,f=3,p=!1,m=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(q){for(var $=r(c);$!==null;){if($.callback===null)n(c);else if($.startTime<=q)n(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=r(c)}}function x(q){if(g=!1,w(q),!m)if(r(l)!==null)m=!0,R(S);else{var $=r(c);$!==null&&B(x,$.startTime-q)}}function S(q,$){m=!1,g&&(g=!1,y(E),E=-1),p=!0;var K=f;try{for(w($),h=r(l);h!==null&&(!(h.expirationTime>$)||q&&!j());){var W=h.callback;if(typeof W=="function"){h.callback=null,f=h.priorityLevel;var F=W(h.expirationTime<=$);$=t.unstable_now(),typeof F=="function"?h.callback=F:h===r(l)&&n(l),w($)}else n(l);h=r(l)}if(h!==null)var X=!0;else{var Q=r(c);Q!==null&&B(x,Q.startTime-$),X=!1}return X}finally{h=null,f=K,p=!1}}var _=!1,C=null,E=-1,N=5,T=-1;function j(){return!(t.unstable_now()-T<N)}function P(){if(C!==null){var q=t.unstable_now();T=q;var $=!0;try{$=C(!0,q)}finally{$?O():(_=!1,C=null)}}else _=!1}var O;if(typeof b=="function")O=function(){b(P)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,z=D.port2;D.port1.onmessage=P,O=function(){z.postMessage(null)}}else O=function(){v(P,0)};function R(q){C=q,_||(_=!0,O())}function B(q,$){E=v(function(){q(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,R(S))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(q){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var K=f;f=$;try{return q()}finally{f=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,$){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var K=f;f=q;try{return $()}finally{f=K}},t.unstable_scheduleCallback=function(q,$,K){var W=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?W+K:W):K=W,q){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=K+F,q={id:u++,callback:$,priorityLevel:q,startTime:K,expirationTime:F,sortIndex:-1},K>W?(q.sortIndex=K,e(c,q),r(l)===null&&q===r(c)&&(g?(y(E),E=-1):g=!0,B(x,K-W))):(q.sortIndex=F,e(l,q),m||p||(m=!0,R(S))),q},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(q){var $=f;return function(){var K=f;f=$;try{return q.apply(this,arguments)}finally{f=K}}}})(PJ);jJ.exports=PJ;var rce=jJ.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nce=k,gi=rce;function re(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var IJ=new Set,Hf={};function Bc(t,e){Nd(t,e),Nd(t+"Capture",e)}function Nd(t,e){for(Hf[t]=e,t=0;t<e.length;t++)IJ.add(e[t])}var Oo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rj=Object.prototype.hasOwnProperty,ice=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,JD={},ZD={};function sce(t){return Rj.call(ZD,t)?!0:Rj.call(JD,t)?!1:ice.test(t)?ZD[t]=!0:(JD[t]=!0,!1)}function oce(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ace(t,e,r,n){if(e===null||typeof e>"u"||oce(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function An(t,e,r,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var tn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){tn[t]=new An(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];tn[e]=new An(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){tn[t]=new An(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){tn[t]=new An(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){tn[t]=new An(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){tn[t]=new An(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){tn[t]=new An(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){tn[t]=new An(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){tn[t]=new An(t,5,!1,t.toLowerCase(),null,!1,!1)});var uR=/[\-:]([a-z])/g;function dR(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(uR,dR);tn[e]=new An(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(uR,dR);tn[e]=new An(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(uR,dR);tn[e]=new An(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){tn[t]=new An(t,1,!1,t.toLowerCase(),null,!1,!1)});tn.xlinkHref=new An("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){tn[t]=new An(t,1,!1,t.toLowerCase(),null,!0,!0)});function hR(t,e,r,n){var i=tn.hasOwnProperty(e)?tn[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ace(e,r,i,n)&&(r=null),n||i===null?sce(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Ao=nce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zm=Symbol.for("react.element"),ju=Symbol.for("react.portal"),Pu=Symbol.for("react.fragment"),fR=Symbol.for("react.strict_mode"),Mj=Symbol.for("react.profiler"),RJ=Symbol.for("react.provider"),MJ=Symbol.for("react.context"),pR=Symbol.for("react.forward_ref"),Aj=Symbol.for("react.suspense"),Dj=Symbol.for("react.suspense_list"),mR=Symbol.for("react.memo"),ea=Symbol.for("react.lazy"),AJ=Symbol.for("react.offscreen"),e$=Symbol.iterator;function Bh(t){return t===null||typeof t!="object"?null:(t=e$&&t[e$]||t["@@iterator"],typeof t=="function"?t:null)}var zt=Object.assign,Bb;function lf(t){if(Bb===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Bb=e&&e[1]||""}return`
`+Bb+t}var zb=!1;function Vb(t,e){if(!t||zb)return"";zb=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{zb=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?lf(t):""}function lce(t){switch(t.tag){case 5:return lf(t.type);case 16:return lf("Lazy");case 13:return lf("Suspense");case 19:return lf("SuspenseList");case 0:case 2:case 15:return t=Vb(t.type,!1),t;case 11:return t=Vb(t.type.render,!1),t;case 1:return t=Vb(t.type,!0),t;default:return""}}function $j(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Pu:return"Fragment";case ju:return"Portal";case Mj:return"Profiler";case fR:return"StrictMode";case Aj:return"Suspense";case Dj:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case MJ:return(t.displayName||"Context")+".Consumer";case RJ:return(t._context.displayName||"Context")+".Provider";case pR:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case mR:return e=t.displayName||null,e!==null?e:$j(t.type)||"Memo";case ea:e=t._payload,t=t._init;try{return $j(t(e))}catch{}}return null}function cce(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $j(e);case 8:return e===fR?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Xa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function DJ(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function uce(t){var e=DJ(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function eg(t){t._valueTracker||(t._valueTracker=uce(t))}function $J(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=DJ(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function fy(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Fj(t,e){var r=e.checked;return zt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function t$(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Xa(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function FJ(t,e){e=e.checked,e!=null&&hR(t,"checked",e,!1)}function qj(t,e){FJ(t,e);var r=Xa(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Lj(t,e.type,r):e.hasOwnProperty("defaultValue")&&Lj(t,e.type,Xa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function r$(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Lj(t,e,r){(e!=="number"||fy(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var cf=Array.isArray;function Qu(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Xa(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Bj(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(re(91));return zt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function n$(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(re(92));if(cf(r)){if(1<r.length)throw Error(re(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Xa(r)}}function qJ(t,e){var r=Xa(e.value),n=Xa(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function i$(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function LJ(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zj(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?LJ(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var tg,BJ=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(tg=tg||document.createElement("div"),tg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=tg.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Wf(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var bf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dce=["Webkit","ms","Moz","O"];Object.keys(bf).forEach(function(t){dce.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),bf[e]=bf[t]})});function zJ(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||bf.hasOwnProperty(t)&&bf[t]?(""+e).trim():e+"px"}function VJ(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=zJ(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var hce=zt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vj(t,e){if(e){if(hce[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(re(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(re(62))}}function Uj(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hj=null;function gR(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wj=null,Xu=null,Ju=null;function s$(t){if(t=Kp(t)){if(typeof Wj!="function")throw Error(re(280));var e=t.stateNode;e&&(e=o0(e),Wj(t.stateNode,t.type,e))}}function UJ(t){Xu?Ju?Ju.push(t):Ju=[t]:Xu=t}function HJ(){if(Xu){var t=Xu,e=Ju;if(Ju=Xu=null,s$(t),e)for(t=0;t<e.length;t++)s$(e[t])}}function WJ(t,e){return t(e)}function KJ(){}var Ub=!1;function GJ(t,e,r){if(Ub)return t(e,r);Ub=!0;try{return WJ(t,e,r)}finally{Ub=!1,(Xu!==null||Ju!==null)&&(KJ(),HJ())}}function Kf(t,e){var r=t.stateNode;if(r===null)return null;var n=o0(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(re(231,e,typeof r));return r}var Kj=!1;if(Oo)try{var zh={};Object.defineProperty(zh,"passive",{get:function(){Kj=!0}}),window.addEventListener("test",zh,zh),window.removeEventListener("test",zh,zh)}catch{Kj=!1}function fce(t,e,r,n,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(u){this.onError(u)}}var xf=!1,py=null,my=!1,Gj=null,pce={onError:function(t){xf=!0,py=t}};function mce(t,e,r,n,i,s,o,a,l){xf=!1,py=null,fce.apply(pce,arguments)}function gce(t,e,r,n,i,s,o,a,l){if(mce.apply(this,arguments),xf){if(xf){var c=py;xf=!1,py=null}else throw Error(re(198));my||(my=!0,Gj=c)}}function zc(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function YJ(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function o$(t){if(zc(t)!==t)throw Error(re(188))}function yce(t){var e=t.alternate;if(!e){if(e=zc(t),e===null)throw Error(re(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return o$(i),t;if(s===n)return o$(i),e;s=s.sibling}throw Error(re(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(re(189))}}if(r.alternate!==n)throw Error(re(190))}if(r.tag!==3)throw Error(re(188));return r.stateNode.current===r?t:e}function QJ(t){return t=yce(t),t!==null?XJ(t):null}function XJ(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=XJ(t);if(e!==null)return e;t=t.sibling}return null}var JJ=gi.unstable_scheduleCallback,a$=gi.unstable_cancelCallback,vce=gi.unstable_shouldYield,bce=gi.unstable_requestPaint,ir=gi.unstable_now,xce=gi.unstable_getCurrentPriorityLevel,yR=gi.unstable_ImmediatePriority,ZJ=gi.unstable_UserBlockingPriority,gy=gi.unstable_NormalPriority,wce=gi.unstable_LowPriority,eZ=gi.unstable_IdlePriority,r0=null,As=null;function Sce(t){if(As&&typeof As.onCommitFiberRoot=="function")try{As.onCommitFiberRoot(r0,t,void 0,(t.current.flags&128)===128)}catch{}}var us=Math.clz32?Math.clz32:Cce,_ce=Math.log,Ece=Math.LN2;function Cce(t){return t>>>=0,t===0?32:31-(_ce(t)/Ece|0)|0}var rg=64,ng=4194304;function uf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function yy(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=uf(a):(s&=o,s!==0&&(n=uf(s)))}else o=r&~i,o!==0?n=uf(o):s!==0&&(n=uf(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-us(e),i=1<<r,n|=t[r],e&=~i;return n}function Nce(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kce(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-us(s),a=1<<o,l=i[o];l===-1?(!(a&r)||a&n)&&(i[o]=Nce(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Yj(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function tZ(){var t=rg;return rg<<=1,!(rg&4194240)&&(rg=64),t}function Hb(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Hp(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-us(e),t[e]=r}function Tce(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-us(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function vR(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-us(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var ft=0;function rZ(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var nZ,bR,iZ,sZ,oZ,Qj=!1,ig=[],ja=null,Pa=null,Ia=null,Gf=new Map,Yf=new Map,la=[],Oce="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function l$(t,e){switch(t){case"focusin":case"focusout":ja=null;break;case"dragenter":case"dragleave":Pa=null;break;case"mouseover":case"mouseout":Ia=null;break;case"pointerover":case"pointerout":Gf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yf.delete(e.pointerId)}}function Vh(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Kp(e),e!==null&&bR(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function jce(t,e,r,n,i){switch(e){case"focusin":return ja=Vh(ja,t,e,r,n,i),!0;case"dragenter":return Pa=Vh(Pa,t,e,r,n,i),!0;case"mouseover":return Ia=Vh(Ia,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Gf.set(s,Vh(Gf.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Yf.set(s,Vh(Yf.get(s)||null,t,e,r,n,i)),!0}return!1}function aZ(t){var e=Il(t.target);if(e!==null){var r=zc(e);if(r!==null){if(e=r.tag,e===13){if(e=YJ(r),e!==null){t.blockedOn=e,oZ(t.priority,function(){iZ(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Xj(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Hj=n,r.target.dispatchEvent(n),Hj=null}else return e=Kp(r),e!==null&&bR(e),t.blockedOn=r,!1;e.shift()}return!0}function c$(t,e,r){Vg(t)&&r.delete(e)}function Pce(){Qj=!1,ja!==null&&Vg(ja)&&(ja=null),Pa!==null&&Vg(Pa)&&(Pa=null),Ia!==null&&Vg(Ia)&&(Ia=null),Gf.forEach(c$),Yf.forEach(c$)}function Uh(t,e){t.blockedOn===e&&(t.blockedOn=null,Qj||(Qj=!0,gi.unstable_scheduleCallback(gi.unstable_NormalPriority,Pce)))}function Qf(t){function e(i){return Uh(i,t)}if(0<ig.length){Uh(ig[0],t);for(var r=1;r<ig.length;r++){var n=ig[r];n.blockedOn===t&&(n.blockedOn=null)}}for(ja!==null&&Uh(ja,t),Pa!==null&&Uh(Pa,t),Ia!==null&&Uh(Ia,t),Gf.forEach(e),Yf.forEach(e),r=0;r<la.length;r++)n=la[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<la.length&&(r=la[0],r.blockedOn===null);)aZ(r),r.blockedOn===null&&la.shift()}var Zu=Ao.ReactCurrentBatchConfig,vy=!0;function Ice(t,e,r,n){var i=ft,s=Zu.transition;Zu.transition=null;try{ft=1,xR(t,e,r,n)}finally{ft=i,Zu.transition=s}}function Rce(t,e,r,n){var i=ft,s=Zu.transition;Zu.transition=null;try{ft=4,xR(t,e,r,n)}finally{ft=i,Zu.transition=s}}function xR(t,e,r,n){if(vy){var i=Xj(t,e,r,n);if(i===null)t1(t,e,n,by,r),l$(t,n);else if(jce(i,t,e,r,n))n.stopPropagation();else if(l$(t,n),e&4&&-1<Oce.indexOf(t)){for(;i!==null;){var s=Kp(i);if(s!==null&&nZ(s),s=Xj(t,e,r,n),s===null&&t1(t,e,n,by,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else t1(t,e,n,null,r)}}var by=null;function Xj(t,e,r,n){if(by=null,t=gR(n),t=Il(t),t!==null)if(e=zc(t),e===null)t=null;else if(r=e.tag,r===13){if(t=YJ(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return by=t,null}function lZ(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xce()){case yR:return 1;case ZJ:return 4;case gy:case wce:return 16;case eZ:return 536870912;default:return 16}default:return 16}}var _a=null,wR=null,Ug=null;function cZ(){if(Ug)return Ug;var t,e=wR,r=e.length,n,i="value"in _a?_a.value:_a.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[s-n];n++);return Ug=i.slice(t,1<n?1-n:void 0)}function Hg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function sg(){return!0}function u$(){return!1}function vi(t){function e(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?sg:u$,this.isPropagationStopped=u$,this}return zt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=sg)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=sg)},persist:function(){},isPersistent:sg}),e}var rh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},SR=vi(rh),Wp=zt({},rh,{view:0,detail:0}),Mce=vi(Wp),Wb,Kb,Hh,n0=zt({},Wp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_R,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Hh&&(Hh&&t.type==="mousemove"?(Wb=t.screenX-Hh.screenX,Kb=t.screenY-Hh.screenY):Kb=Wb=0,Hh=t),Wb)},movementY:function(t){return"movementY"in t?t.movementY:Kb}}),d$=vi(n0),Ace=zt({},n0,{dataTransfer:0}),Dce=vi(Ace),$ce=zt({},Wp,{relatedTarget:0}),Gb=vi($ce),Fce=zt({},rh,{animationName:0,elapsedTime:0,pseudoElement:0}),qce=vi(Fce),Lce=zt({},rh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Bce=vi(Lce),zce=zt({},rh,{data:0}),h$=vi(zce),Vce={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uce={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hce={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wce(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Hce[t])?!!e[t]:!1}function _R(){return Wce}var Kce=zt({},Wp,{key:function(t){if(t.key){var e=Vce[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Hg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Uce[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_R,charCode:function(t){return t.type==="keypress"?Hg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Hg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Gce=vi(Kce),Yce=zt({},n0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),f$=vi(Yce),Qce=zt({},Wp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_R}),Xce=vi(Qce),Jce=zt({},rh,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zce=vi(Jce),eue=zt({},n0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tue=vi(eue),rue=[9,13,27,32],ER=Oo&&"CompositionEvent"in window,wf=null;Oo&&"documentMode"in document&&(wf=document.documentMode);var nue=Oo&&"TextEvent"in window&&!wf,uZ=Oo&&(!ER||wf&&8<wf&&11>=wf),p$=" ",m$=!1;function dZ(t,e){switch(t){case"keyup":return rue.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hZ(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Iu=!1;function iue(t,e){switch(t){case"compositionend":return hZ(e);case"keypress":return e.which!==32?null:(m$=!0,p$);case"textInput":return t=e.data,t===p$&&m$?null:t;default:return null}}function sue(t,e){if(Iu)return t==="compositionend"||!ER&&dZ(t,e)?(t=cZ(),Ug=wR=_a=null,Iu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return uZ&&e.locale!=="ko"?null:e.data;default:return null}}var oue={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function g$(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!oue[t.type]:e==="textarea"}function fZ(t,e,r,n){UJ(n),e=xy(e,"onChange"),0<e.length&&(r=new SR("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Sf=null,Xf=null;function aue(t){EZ(t,0)}function i0(t){var e=Au(t);if($J(e))return t}function lue(t,e){if(t==="change")return e}var pZ=!1;if(Oo){var Yb;if(Oo){var Qb="oninput"in document;if(!Qb){var y$=document.createElement("div");y$.setAttribute("oninput","return;"),Qb=typeof y$.oninput=="function"}Yb=Qb}else Yb=!1;pZ=Yb&&(!document.documentMode||9<document.documentMode)}function v$(){Sf&&(Sf.detachEvent("onpropertychange",mZ),Xf=Sf=null)}function mZ(t){if(t.propertyName==="value"&&i0(Xf)){var e=[];fZ(e,Xf,t,gR(t)),GJ(aue,e)}}function cue(t,e,r){t==="focusin"?(v$(),Sf=e,Xf=r,Sf.attachEvent("onpropertychange",mZ)):t==="focusout"&&v$()}function uue(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return i0(Xf)}function due(t,e){if(t==="click")return i0(e)}function hue(t,e){if(t==="input"||t==="change")return i0(e)}function fue(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hs=typeof Object.is=="function"?Object.is:fue;function Jf(t,e){if(hs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Rj.call(e,i)||!hs(t[i],e[i]))return!1}return!0}function b$(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function x$(t,e){var r=b$(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=b$(r)}}function gZ(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?gZ(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function yZ(){for(var t=window,e=fy();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=fy(t.document)}return e}function CR(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function pue(t){var e=yZ(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&gZ(r.ownerDocument.documentElement,r)){if(n!==null&&CR(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=x$(r,s);var o=x$(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mue=Oo&&"documentMode"in document&&11>=document.documentMode,Ru=null,Jj=null,_f=null,Zj=!1;function w$(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Zj||Ru==null||Ru!==fy(n)||(n=Ru,"selectionStart"in n&&CR(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),_f&&Jf(_f,n)||(_f=n,n=xy(Jj,"onSelect"),0<n.length&&(e=new SR("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Ru)))}function og(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Mu={animationend:og("Animation","AnimationEnd"),animationiteration:og("Animation","AnimationIteration"),animationstart:og("Animation","AnimationStart"),transitionend:og("Transition","TransitionEnd")},Xb={},vZ={};Oo&&(vZ=document.createElement("div").style,"AnimationEvent"in window||(delete Mu.animationend.animation,delete Mu.animationiteration.animation,delete Mu.animationstart.animation),"TransitionEvent"in window||delete Mu.transitionend.transition);function s0(t){if(Xb[t])return Xb[t];if(!Mu[t])return t;var e=Mu[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in vZ)return Xb[t]=e[r];return t}var bZ=s0("animationend"),xZ=s0("animationiteration"),wZ=s0("animationstart"),SZ=s0("transitionend"),_Z=new Map,S$="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sl(t,e){_Z.set(t,e),Bc(e,[t])}for(var Jb=0;Jb<S$.length;Jb++){var Zb=S$[Jb],gue=Zb.toLowerCase(),yue=Zb[0].toUpperCase()+Zb.slice(1);sl(gue,"on"+yue)}sl(bZ,"onAnimationEnd");sl(xZ,"onAnimationIteration");sl(wZ,"onAnimationStart");sl("dblclick","onDoubleClick");sl("focusin","onFocus");sl("focusout","onBlur");sl(SZ,"onTransitionEnd");Nd("onMouseEnter",["mouseout","mouseover"]);Nd("onMouseLeave",["mouseout","mouseover"]);Nd("onPointerEnter",["pointerout","pointerover"]);Nd("onPointerLeave",["pointerout","pointerover"]);Bc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var df="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vue=new Set("cancel close invalid load scroll toggle".split(" ").concat(df));function _$(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,gce(n,e,void 0,t),t.currentTarget=null}function EZ(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;_$(i,a,c),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;_$(i,a,c),s=l}}}if(my)throw t=Gj,my=!1,Gj=null,t}function Tt(t,e){var r=e[iP];r===void 0&&(r=e[iP]=new Set);var n=t+"__bubble";r.has(n)||(CZ(e,t,2,!1),r.add(n))}function e1(t,e,r){var n=0;e&&(n|=4),CZ(r,t,n,e)}var ag="_reactListening"+Math.random().toString(36).slice(2);function Zf(t){if(!t[ag]){t[ag]=!0,IJ.forEach(function(r){r!=="selectionchange"&&(vue.has(r)||e1(r,!1,t),e1(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ag]||(e[ag]=!0,e1("selectionchange",!1,e))}}function CZ(t,e,r,n){switch(lZ(e)){case 1:var i=Ice;break;case 4:i=Rce;break;default:i=xR}r=i.bind(null,e,r,t),i=void 0,!Kj||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function t1(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Il(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue e}a=a.parentNode}}n=n.return}GJ(function(){var c=s,u=gR(r),h=[];e:{var f=_Z.get(t);if(f!==void 0){var p=SR,m=t;switch(t){case"keypress":if(Hg(r)===0)break e;case"keydown":case"keyup":p=Gce;break;case"focusin":m="focus",p=Gb;break;case"focusout":m="blur",p=Gb;break;case"beforeblur":case"afterblur":p=Gb;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=d$;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Dce;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Xce;break;case bZ:case xZ:case wZ:p=qce;break;case SZ:p=Zce;break;case"scroll":p=Mce;break;case"wheel":p=tue;break;case"copy":case"cut":case"paste":p=Bce;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=f$}var g=(e&4)!==0,v=!g&&t==="scroll",y=g?f!==null?f+"Capture":null:f;g=[];for(var b=c,w;b!==null;){w=b;var x=w.stateNode;if(w.tag===5&&x!==null&&(w=x,y!==null&&(x=Kf(b,y),x!=null&&g.push(ep(b,x,w)))),v)break;b=b.return}0<g.length&&(f=new p(f,m,null,r,u),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&r!==Hj&&(m=r.relatedTarget||r.fromElement)&&(Il(m)||m[jo]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=c,m=m?Il(m):null,m!==null&&(v=zc(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(g=d$,x="onMouseLeave",y="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=f$,x="onPointerLeave",y="onPointerEnter",b="pointer"),v=p==null?f:Au(p),w=m==null?f:Au(m),f=new g(x,b+"leave",p,r,u),f.target=v,f.relatedTarget=w,x=null,Il(u)===c&&(g=new g(y,b+"enter",m,r,u),g.target=w,g.relatedTarget=v,x=g),v=x,p&&m)t:{for(g=p,y=m,b=0,w=g;w;w=yu(w))b++;for(w=0,x=y;x;x=yu(x))w++;for(;0<b-w;)g=yu(g),b--;for(;0<w-b;)y=yu(y),w--;for(;b--;){if(g===y||y!==null&&g===y.alternate)break t;g=yu(g),y=yu(y)}g=null}else g=null;p!==null&&E$(h,f,p,g,!1),m!==null&&v!==null&&E$(h,v,m,g,!0)}}e:{if(f=c?Au(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var S=lue;else if(g$(f))if(pZ)S=hue;else{S=uue;var _=cue}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=due);if(S&&(S=S(t,c))){fZ(h,S,r,u);break e}_&&_(t,f,c),t==="focusout"&&(_=f._wrapperState)&&_.controlled&&f.type==="number"&&Lj(f,"number",f.value)}switch(_=c?Au(c):window,t){case"focusin":(g$(_)||_.contentEditable==="true")&&(Ru=_,Jj=c,_f=null);break;case"focusout":_f=Jj=Ru=null;break;case"mousedown":Zj=!0;break;case"contextmenu":case"mouseup":case"dragend":Zj=!1,w$(h,r,u);break;case"selectionchange":if(mue)break;case"keydown":case"keyup":w$(h,r,u)}var C;if(ER)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Iu?dZ(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(uZ&&r.locale!=="ko"&&(Iu||E!=="onCompositionStart"?E==="onCompositionEnd"&&Iu&&(C=cZ()):(_a=u,wR="value"in _a?_a.value:_a.textContent,Iu=!0)),_=xy(c,E),0<_.length&&(E=new h$(E,t,null,r,u),h.push({event:E,listeners:_}),C?E.data=C:(C=hZ(r),C!==null&&(E.data=C)))),(C=nue?iue(t,r):sue(t,r))&&(c=xy(c,"onBeforeInput"),0<c.length&&(u=new h$("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:c}),u.data=C))}EZ(h,e)})}function ep(t,e,r){return{instance:t,listener:e,currentTarget:r}}function xy(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Kf(t,r),s!=null&&n.unshift(ep(t,s,i)),s=Kf(t,e),s!=null&&n.push(ep(t,s,i))),t=t.return}return n}function yu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function E$(t,e,r,n,i){for(var s=e._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,i?(l=Kf(r,s),l!=null&&o.unshift(ep(r,l,a))):i||(l=Kf(r,s),l!=null&&o.push(ep(r,l,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var bue=/\r\n?/g,xue=/\u0000|\uFFFD/g;function C$(t){return(typeof t=="string"?t:""+t).replace(bue,`
`).replace(xue,"")}function lg(t,e,r){if(e=C$(e),C$(t)!==e&&r)throw Error(re(425))}function wy(){}var eP=null,tP=null;function rP(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var nP=typeof setTimeout=="function"?setTimeout:void 0,wue=typeof clearTimeout=="function"?clearTimeout:void 0,N$=typeof Promise=="function"?Promise:void 0,Sue=typeof queueMicrotask=="function"?queueMicrotask:typeof N$<"u"?function(t){return N$.resolve(null).then(t).catch(_ue)}:nP;function _ue(t){setTimeout(function(){throw t})}function r1(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Qf(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Qf(e)}function Ra(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function k$(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var nh=Math.random().toString(36).slice(2),js="__reactFiber$"+nh,tp="__reactProps$"+nh,jo="__reactContainer$"+nh,iP="__reactEvents$"+nh,Eue="__reactListeners$"+nh,Cue="__reactHandles$"+nh;function Il(t){var e=t[js];if(e)return e;for(var r=t.parentNode;r;){if(e=r[jo]||r[js]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=k$(t);t!==null;){if(r=t[js])return r;t=k$(t)}return e}t=r,r=t.parentNode}return null}function Kp(t){return t=t[js]||t[jo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Au(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(re(33))}function o0(t){return t[tp]||null}var sP=[],Du=-1;function ol(t){return{current:t}}function It(t){0>Du||(t.current=sP[Du],sP[Du]=null,Du--)}function kt(t,e){Du++,sP[Du]=t.current,t.current=e}var Ja={},pn=ol(Ja),Yn=ol(!1),mc=Ja;function kd(t,e){var r=t.type.contextTypes;if(!r)return Ja;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Qn(t){return t=t.childContextTypes,t!=null}function Sy(){It(Yn),It(pn)}function T$(t,e,r){if(pn.current!==Ja)throw Error(re(168));kt(pn,e),kt(Yn,r)}function NZ(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(re(108,cce(t)||"Unknown",i));return zt({},r,n)}function _y(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ja,mc=pn.current,kt(pn,t),kt(Yn,Yn.current),!0}function O$(t,e,r){var n=t.stateNode;if(!n)throw Error(re(169));r?(t=NZ(t,e,mc),n.__reactInternalMemoizedMergedChildContext=t,It(Yn),It(pn),kt(pn,t)):It(Yn),kt(Yn,r)}var so=null,a0=!1,n1=!1;function kZ(t){so===null?so=[t]:so.push(t)}function Nue(t){a0=!0,kZ(t)}function al(){if(!n1&&so!==null){n1=!0;var t=0,e=ft;try{var r=so;for(ft=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}so=null,a0=!1}catch(i){throw so!==null&&(so=so.slice(t+1)),JJ(yR,al),i}finally{ft=e,n1=!1}}return null}var $u=[],Fu=0,Ey=null,Cy=0,Ii=[],Ri=0,gc=null,uo=1,ho="";function Tl(t,e){$u[Fu++]=Cy,$u[Fu++]=Ey,Ey=t,Cy=e}function TZ(t,e,r){Ii[Ri++]=uo,Ii[Ri++]=ho,Ii[Ri++]=gc,gc=t;var n=uo;t=ho;var i=32-us(n)-1;n&=~(1<<i),r+=1;var s=32-us(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,uo=1<<32-us(e)+i|r<<i|n,ho=s+t}else uo=1<<s|r<<i|n,ho=t}function NR(t){t.return!==null&&(Tl(t,1),TZ(t,1,0))}function kR(t){for(;t===Ey;)Ey=$u[--Fu],$u[Fu]=null,Cy=$u[--Fu],$u[Fu]=null;for(;t===gc;)gc=Ii[--Ri],Ii[Ri]=null,ho=Ii[--Ri],Ii[Ri]=null,uo=Ii[--Ri],Ii[Ri]=null}var pi=null,fi=null,At=!1,ns=null;function OZ(t,e){var r=$i(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function j$(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,pi=t,fi=Ra(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,pi=t,fi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=gc!==null?{id:uo,overflow:ho}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=$i(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,pi=t,fi=null,!0):!1;default:return!1}}function oP(t){return(t.mode&1)!==0&&(t.flags&128)===0}function aP(t){if(At){var e=fi;if(e){var r=e;if(!j$(t,e)){if(oP(t))throw Error(re(418));e=Ra(r.nextSibling);var n=pi;e&&j$(t,e)?OZ(n,r):(t.flags=t.flags&-4097|2,At=!1,pi=t)}}else{if(oP(t))throw Error(re(418));t.flags=t.flags&-4097|2,At=!1,pi=t}}}function P$(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;pi=t}function cg(t){if(t!==pi)return!1;if(!At)return P$(t),At=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!rP(t.type,t.memoizedProps)),e&&(e=fi)){if(oP(t))throw jZ(),Error(re(418));for(;e;)OZ(t,e),e=Ra(e.nextSibling)}if(P$(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(re(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){fi=Ra(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}fi=null}}else fi=pi?Ra(t.stateNode.nextSibling):null;return!0}function jZ(){for(var t=fi;t;)t=Ra(t.nextSibling)}function Td(){fi=pi=null,At=!1}function TR(t){ns===null?ns=[t]:ns.push(t)}var kue=Ao.ReactCurrentBatchConfig;function Wh(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(re(309));var n=r.stateNode}if(!n)throw Error(re(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(re(284));if(!r._owner)throw Error(re(290,t))}return t}function ug(t,e){throw t=Object.prototype.toString.call(e),Error(re(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function I$(t){var e=t._init;return e(t._payload)}function PZ(t){function e(y,b){if(t){var w=y.deletions;w===null?(y.deletions=[b],y.flags|=16):w.push(b)}}function r(y,b){if(!t)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function n(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function i(y,b){return y=$a(y,b),y.index=0,y.sibling=null,y}function s(y,b,w){return y.index=w,t?(w=y.alternate,w!==null?(w=w.index,w<b?(y.flags|=2,b):w):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,b,w,x){return b===null||b.tag!==6?(b=u1(w,y.mode,x),b.return=y,b):(b=i(b,w),b.return=y,b)}function l(y,b,w,x){var S=w.type;return S===Pu?u(y,b,w.props.children,x,w.key):b!==null&&(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ea&&I$(S)===b.type)?(x=i(b,w.props),x.ref=Wh(y,b,w),x.return=y,x):(x=Jg(w.type,w.key,w.props,null,y.mode,x),x.ref=Wh(y,b,w),x.return=y,x)}function c(y,b,w,x){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=d1(w,y.mode,x),b.return=y,b):(b=i(b,w.children||[]),b.return=y,b)}function u(y,b,w,x,S){return b===null||b.tag!==7?(b=rc(w,y.mode,x,S),b.return=y,b):(b=i(b,w),b.return=y,b)}function h(y,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=u1(""+b,y.mode,w),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Zm:return w=Jg(b.type,b.key,b.props,null,y.mode,w),w.ref=Wh(y,null,b),w.return=y,w;case ju:return b=d1(b,y.mode,w),b.return=y,b;case ea:var x=b._init;return h(y,x(b._payload),w)}if(cf(b)||Bh(b))return b=rc(b,y.mode,w,null),b.return=y,b;ug(y,b)}return null}function f(y,b,w,x){var S=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(y,b,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Zm:return w.key===S?l(y,b,w,x):null;case ju:return w.key===S?c(y,b,w,x):null;case ea:return S=w._init,f(y,b,S(w._payload),x)}if(cf(w)||Bh(w))return S!==null?null:u(y,b,w,x,null);ug(y,w)}return null}function p(y,b,w,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(w)||null,a(b,y,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Zm:return y=y.get(x.key===null?w:x.key)||null,l(b,y,x,S);case ju:return y=y.get(x.key===null?w:x.key)||null,c(b,y,x,S);case ea:var _=x._init;return p(y,b,w,_(x._payload),S)}if(cf(x)||Bh(x))return y=y.get(w)||null,u(b,y,x,S,null);ug(b,x)}return null}function m(y,b,w,x){for(var S=null,_=null,C=b,E=b=0,N=null;C!==null&&E<w.length;E++){C.index>E?(N=C,C=null):N=C.sibling;var T=f(y,C,w[E],x);if(T===null){C===null&&(C=N);break}t&&C&&T.alternate===null&&e(y,C),b=s(T,b,E),_===null?S=T:_.sibling=T,_=T,C=N}if(E===w.length)return r(y,C),At&&Tl(y,E),S;if(C===null){for(;E<w.length;E++)C=h(y,w[E],x),C!==null&&(b=s(C,b,E),_===null?S=C:_.sibling=C,_=C);return At&&Tl(y,E),S}for(C=n(y,C);E<w.length;E++)N=p(C,y,E,w[E],x),N!==null&&(t&&N.alternate!==null&&C.delete(N.key===null?E:N.key),b=s(N,b,E),_===null?S=N:_.sibling=N,_=N);return t&&C.forEach(function(j){return e(y,j)}),At&&Tl(y,E),S}function g(y,b,w,x){var S=Bh(w);if(typeof S!="function")throw Error(re(150));if(w=S.call(w),w==null)throw Error(re(151));for(var _=S=null,C=b,E=b=0,N=null,T=w.next();C!==null&&!T.done;E++,T=w.next()){C.index>E?(N=C,C=null):N=C.sibling;var j=f(y,C,T.value,x);if(j===null){C===null&&(C=N);break}t&&C&&j.alternate===null&&e(y,C),b=s(j,b,E),_===null?S=j:_.sibling=j,_=j,C=N}if(T.done)return r(y,C),At&&Tl(y,E),S;if(C===null){for(;!T.done;E++,T=w.next())T=h(y,T.value,x),T!==null&&(b=s(T,b,E),_===null?S=T:_.sibling=T,_=T);return At&&Tl(y,E),S}for(C=n(y,C);!T.done;E++,T=w.next())T=p(C,y,E,T.value,x),T!==null&&(t&&T.alternate!==null&&C.delete(T.key===null?E:T.key),b=s(T,b,E),_===null?S=T:_.sibling=T,_=T);return t&&C.forEach(function(P){return e(y,P)}),At&&Tl(y,E),S}function v(y,b,w,x){if(typeof w=="object"&&w!==null&&w.type===Pu&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Zm:e:{for(var S=w.key,_=b;_!==null;){if(_.key===S){if(S=w.type,S===Pu){if(_.tag===7){r(y,_.sibling),b=i(_,w.props.children),b.return=y,y=b;break e}}else if(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ea&&I$(S)===_.type){r(y,_.sibling),b=i(_,w.props),b.ref=Wh(y,_,w),b.return=y,y=b;break e}r(y,_);break}else e(y,_);_=_.sibling}w.type===Pu?(b=rc(w.props.children,y.mode,x,w.key),b.return=y,y=b):(x=Jg(w.type,w.key,w.props,null,y.mode,x),x.ref=Wh(y,b,w),x.return=y,y=x)}return o(y);case ju:e:{for(_=w.key;b!==null;){if(b.key===_)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){r(y,b.sibling),b=i(b,w.children||[]),b.return=y,y=b;break e}else{r(y,b);break}else e(y,b);b=b.sibling}b=d1(w,y.mode,x),b.return=y,y=b}return o(y);case ea:return _=w._init,v(y,b,_(w._payload),x)}if(cf(w))return m(y,b,w,x);if(Bh(w))return g(y,b,w,x);ug(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(r(y,b.sibling),b=i(b,w),b.return=y,y=b):(r(y,b),b=u1(w,y.mode,x),b.return=y,y=b),o(y)):r(y,b)}return v}var Od=PZ(!0),IZ=PZ(!1),Ny=ol(null),ky=null,qu=null,OR=null;function jR(){OR=qu=ky=null}function PR(t){var e=Ny.current;It(Ny),t._currentValue=e}function lP(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function ed(t,e){ky=t,OR=qu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Wn=!0),t.firstContext=null)}function Vi(t){var e=t._currentValue;if(OR!==t)if(t={context:t,memoizedValue:e,next:null},qu===null){if(ky===null)throw Error(re(308));qu=t,ky.dependencies={lanes:0,firstContext:t}}else qu=qu.next=t;return e}var Rl=null;function IR(t){Rl===null?Rl=[t]:Rl.push(t)}function RZ(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,IR(e)):(r.next=i.next,i.next=r),e.interleaved=r,Po(t,n)}function Po(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ta=!1;function RR(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function MZ(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function go(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ma(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,ot&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Po(t,r)}return i=n.interleaved,i===null?(e.next=e,IR(n)):(e.next=i.next,i.next=e),n.interleaved=e,Po(t,r)}function Wg(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,vR(t,r)}}function R$(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Ty(t,e,r,n){var i=t.updateQueue;ta=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,g=a;switch(f=e,p=r,g.tag){case 1:if(m=g.payload,typeof m=="function"){h=m.call(p,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(p,h,f):m,f==null)break e;h=zt({},h,f);break e;case 2:ta=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=h):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);vc|=o,t.lanes=o,t.memoizedState=h}}function M$(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(re(191,i));i.call(n)}}}var Gp={},Ds=ol(Gp),rp=ol(Gp),np=ol(Gp);function Ml(t){if(t===Gp)throw Error(re(174));return t}function MR(t,e){switch(kt(np,e),kt(rp,t),kt(Ds,Gp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zj(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=zj(e,t)}It(Ds),kt(Ds,e)}function jd(){It(Ds),It(rp),It(np)}function AZ(t){Ml(np.current);var e=Ml(Ds.current),r=zj(e,t.type);e!==r&&(kt(rp,t),kt(Ds,r))}function AR(t){rp.current===t&&(It(Ds),It(rp))}var Ft=ol(0);function Oy(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var i1=[];function DR(){for(var t=0;t<i1.length;t++)i1[t]._workInProgressVersionPrimary=null;i1.length=0}var Kg=Ao.ReactCurrentDispatcher,s1=Ao.ReactCurrentBatchConfig,yc=0,Lt=null,Cr=null,Ar=null,jy=!1,Ef=!1,ip=0,Tue=0;function an(){throw Error(re(321))}function $R(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!hs(t[r],e[r]))return!1;return!0}function FR(t,e,r,n,i,s){if(yc=s,Lt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Kg.current=t===null||t.memoizedState===null?Iue:Rue,t=r(n,i),Ef){s=0;do{if(Ef=!1,ip=0,25<=s)throw Error(re(301));s+=1,Ar=Cr=null,e.updateQueue=null,Kg.current=Mue,t=r(n,i)}while(Ef)}if(Kg.current=Py,e=Cr!==null&&Cr.next!==null,yc=0,Ar=Cr=Lt=null,jy=!1,e)throw Error(re(300));return t}function qR(){var t=ip!==0;return ip=0,t}function Ss(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ar===null?Lt.memoizedState=Ar=t:Ar=Ar.next=t,Ar}function Ui(){if(Cr===null){var t=Lt.alternate;t=t!==null?t.memoizedState:null}else t=Cr.next;var e=Ar===null?Lt.memoizedState:Ar.next;if(e!==null)Ar=e,Cr=t;else{if(t===null)throw Error(re(310));Cr=t,t={memoizedState:Cr.memoizedState,baseState:Cr.baseState,baseQueue:Cr.baseQueue,queue:Cr.queue,next:null},Ar===null?Lt.memoizedState=Ar=t:Ar=Ar.next=t}return Ar}function sp(t,e){return typeof e=="function"?e(t):e}function o1(t){var e=Ui(),r=e.queue;if(r===null)throw Error(re(311));r.lastRenderedReducer=t;var n=Cr,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((yc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=n):l=l.next=h,Lt.lanes|=u,vc|=u}c=c.next}while(c!==null&&c!==s);l===null?o=n:l.next=a,hs(n,e.memoizedState)||(Wn=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,Lt.lanes|=s,vc|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function a1(t){var e=Ui(),r=e.queue;if(r===null)throw Error(re(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);hs(s,e.memoizedState)||(Wn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function DZ(){}function $Z(t,e){var r=Lt,n=Ui(),i=e(),s=!hs(n.memoizedState,i);if(s&&(n.memoizedState=i,Wn=!0),n=n.queue,LR(LZ.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Ar!==null&&Ar.memoizedState.tag&1){if(r.flags|=2048,op(9,qZ.bind(null,r,n,i,e),void 0,null),Fr===null)throw Error(re(349));yc&30||FZ(r,e,i)}return i}function FZ(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Lt.updateQueue,e===null?(e={lastEffect:null,stores:null},Lt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function qZ(t,e,r,n){e.value=r,e.getSnapshot=n,BZ(e)&&zZ(t)}function LZ(t,e,r){return r(function(){BZ(e)&&zZ(t)})}function BZ(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!hs(t,r)}catch{return!0}}function zZ(t){var e=Po(t,1);e!==null&&ds(e,t,1,-1)}function A$(t){var e=Ss();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sp,lastRenderedState:t},e.queue=t,t=t.dispatch=Pue.bind(null,Lt,t),[e.memoizedState,t]}function op(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Lt.updateQueue,e===null?(e={lastEffect:null,stores:null},Lt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function VZ(){return Ui().memoizedState}function Gg(t,e,r,n){var i=Ss();Lt.flags|=t,i.memoizedState=op(1|e,r,void 0,n===void 0?null:n)}function l0(t,e,r,n){var i=Ui();n=n===void 0?null:n;var s=void 0;if(Cr!==null){var o=Cr.memoizedState;if(s=o.destroy,n!==null&&$R(n,o.deps)){i.memoizedState=op(e,r,s,n);return}}Lt.flags|=t,i.memoizedState=op(1|e,r,s,n)}function D$(t,e){return Gg(8390656,8,t,e)}function LR(t,e){return l0(2048,8,t,e)}function UZ(t,e){return l0(4,2,t,e)}function HZ(t,e){return l0(4,4,t,e)}function WZ(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function KZ(t,e,r){return r=r!=null?r.concat([t]):null,l0(4,4,WZ.bind(null,e,t),r)}function BR(){}function GZ(t,e){var r=Ui();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&$R(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function YZ(t,e){var r=Ui();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&$R(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function QZ(t,e,r){return yc&21?(hs(r,e)||(r=tZ(),Lt.lanes|=r,vc|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Wn=!0),t.memoizedState=r)}function Oue(t,e){var r=ft;ft=r!==0&&4>r?r:4,t(!0);var n=s1.transition;s1.transition={};try{t(!1),e()}finally{ft=r,s1.transition=n}}function XZ(){return Ui().memoizedState}function jue(t,e,r){var n=Da(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},JZ(t))ZZ(e,r);else if(r=RZ(t,e,r,n),r!==null){var i=On();ds(r,t,n,i),eee(r,e,n)}}function Pue(t,e,r){var n=Da(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(JZ(t))ZZ(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,hs(a,o)){var l=e.interleaved;l===null?(i.next=i,IR(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=RZ(t,e,i,n),r!==null&&(i=On(),ds(r,t,n,i),eee(r,e,n))}}function JZ(t){var e=t.alternate;return t===Lt||e!==null&&e===Lt}function ZZ(t,e){Ef=jy=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function eee(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,vR(t,r)}}var Py={readContext:Vi,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useInsertionEffect:an,useLayoutEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useMutableSource:an,useSyncExternalStore:an,useId:an,unstable_isNewReconciler:!1},Iue={readContext:Vi,useCallback:function(t,e){return Ss().memoizedState=[t,e===void 0?null:e],t},useContext:Vi,useEffect:D$,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Gg(4194308,4,WZ.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Gg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Gg(4,2,t,e)},useMemo:function(t,e){var r=Ss();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Ss();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=jue.bind(null,Lt,t),[n.memoizedState,t]},useRef:function(t){var e=Ss();return t={current:t},e.memoizedState=t},useState:A$,useDebugValue:BR,useDeferredValue:function(t){return Ss().memoizedState=t},useTransition:function(){var t=A$(!1),e=t[0];return t=Oue.bind(null,t[1]),Ss().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Lt,i=Ss();if(At){if(r===void 0)throw Error(re(407));r=r()}else{if(r=e(),Fr===null)throw Error(re(349));yc&30||FZ(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,D$(LZ.bind(null,n,s,t),[t]),n.flags|=2048,op(9,qZ.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Ss(),e=Fr.identifierPrefix;if(At){var r=ho,n=uo;r=(n&~(1<<32-us(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=ip++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Tue++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Rue={readContext:Vi,useCallback:GZ,useContext:Vi,useEffect:LR,useImperativeHandle:KZ,useInsertionEffect:UZ,useLayoutEffect:HZ,useMemo:YZ,useReducer:o1,useRef:VZ,useState:function(){return o1(sp)},useDebugValue:BR,useDeferredValue:function(t){var e=Ui();return QZ(e,Cr.memoizedState,t)},useTransition:function(){var t=o1(sp)[0],e=Ui().memoizedState;return[t,e]},useMutableSource:DZ,useSyncExternalStore:$Z,useId:XZ,unstable_isNewReconciler:!1},Mue={readContext:Vi,useCallback:GZ,useContext:Vi,useEffect:LR,useImperativeHandle:KZ,useInsertionEffect:UZ,useLayoutEffect:HZ,useMemo:YZ,useReducer:a1,useRef:VZ,useState:function(){return a1(sp)},useDebugValue:BR,useDeferredValue:function(t){var e=Ui();return Cr===null?e.memoizedState=t:QZ(e,Cr.memoizedState,t)},useTransition:function(){var t=a1(sp)[0],e=Ui().memoizedState;return[t,e]},useMutableSource:DZ,useSyncExternalStore:$Z,useId:XZ,unstable_isNewReconciler:!1};function Zi(t,e){if(t&&t.defaultProps){e=zt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function cP(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:zt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var c0={isMounted:function(t){return(t=t._reactInternals)?zc(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=On(),i=Da(t),s=go(n,i);s.payload=e,r!=null&&(s.callback=r),e=Ma(t,s,i),e!==null&&(ds(e,t,i,n),Wg(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=On(),i=Da(t),s=go(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=Ma(t,s,i),e!==null&&(ds(e,t,i,n),Wg(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=On(),n=Da(t),i=go(r,n);i.tag=2,e!=null&&(i.callback=e),e=Ma(t,i,n),e!==null&&(ds(e,t,n,r),Wg(e,t,n))}};function $$(t,e,r,n,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!Jf(r,n)||!Jf(i,s):!0}function tee(t,e,r){var n=!1,i=Ja,s=e.contextType;return typeof s=="object"&&s!==null?s=Vi(s):(i=Qn(e)?mc:pn.current,n=e.contextTypes,s=(n=n!=null)?kd(t,i):Ja),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=c0,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function F$(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&c0.enqueueReplaceState(e,e.state,null)}function uP(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},RR(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Vi(s):(s=Qn(e)?mc:pn.current,i.context=kd(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(cP(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&c0.enqueueReplaceState(i,i.state,null),Ty(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Pd(t,e){try{var r="",n=e;do r+=lce(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function l1(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function dP(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Aue=typeof WeakMap=="function"?WeakMap:Map;function ree(t,e,r){r=go(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Ry||(Ry=!0,wP=n),dP(t,e)},r}function nee(t,e,r){r=go(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){dP(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){dP(t,e),typeof n!="function"&&(Aa===null?Aa=new Set([this]):Aa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function q$(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Aue;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=Yue.bind(null,t,e,r),e.then(t,t))}function L$(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function B$(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=go(-1,1),e.tag=2,Ma(r,e,1))),r.lanes|=1),t)}var Due=Ao.ReactCurrentOwner,Wn=!1;function Sn(t,e,r,n){e.child=t===null?IZ(e,null,r,n):Od(e,t.child,r,n)}function z$(t,e,r,n,i){r=r.render;var s=e.ref;return ed(e,i),n=FR(t,e,r,n,s,i),r=qR(),t!==null&&!Wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Io(t,e,i)):(At&&r&&NR(e),e.flags|=1,Sn(t,e,n,i),e.child)}function V$(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!YR(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,iee(t,e,s,n,i)):(t=Jg(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Jf,r(o,n)&&t.ref===e.ref)return Io(t,e,i)}return e.flags|=1,t=$a(s,n),t.ref=e.ref,t.return=e,e.child=t}function iee(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(Jf(s,n)&&t.ref===e.ref)if(Wn=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(Wn=!0);else return e.lanes=t.lanes,Io(t,e,i)}return hP(t,e,r,n,i)}function see(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},kt(Bu,li),li|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,kt(Bu,li),li|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,kt(Bu,li),li|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,kt(Bu,li),li|=n;return Sn(t,e,i,r),e.child}function oee(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function hP(t,e,r,n,i){var s=Qn(r)?mc:pn.current;return s=kd(e,s),ed(e,i),r=FR(t,e,r,n,s,i),n=qR(),t!==null&&!Wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Io(t,e,i)):(At&&n&&NR(e),e.flags|=1,Sn(t,e,r,i),e.child)}function U$(t,e,r,n,i){if(Qn(r)){var s=!0;_y(e)}else s=!1;if(ed(e,i),e.stateNode===null)Yg(t,e),tee(e,r,n),uP(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=Vi(c):(c=Qn(r)?mc:pn.current,c=kd(e,c));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==c)&&F$(e,o,n,c),ta=!1;var f=e.memoizedState;o.state=f,Ty(e,n,o,i),l=e.memoizedState,a!==n||f!==l||Yn.current||ta?(typeof u=="function"&&(cP(e,r,u,n),l=e.memoizedState),(a=ta||$$(e,r,a,n,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=c,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,MZ(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Zi(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Vi(l):(l=Qn(r)?mc:pn.current,l=kd(e,l));var p=r.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&F$(e,o,n,l),ta=!1,f=e.memoizedState,o.state=f,Ty(e,n,o,i);var m=e.memoizedState;a!==h||f!==m||Yn.current||ta?(typeof p=="function"&&(cP(e,r,p,n),m=e.memoizedState),(c=ta||$$(e,r,c,n,f,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return fP(t,e,r,n,s,i)}function fP(t,e,r,n,i,s){oee(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&O$(e,r,!1),Io(t,e,s);n=e.stateNode,Due.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Od(e,t.child,null,s),e.child=Od(e,null,a,s)):Sn(t,e,a,s),e.memoizedState=n.state,i&&O$(e,r,!0),e.child}function aee(t){var e=t.stateNode;e.pendingContext?T$(t,e.pendingContext,e.pendingContext!==e.context):e.context&&T$(t,e.context,!1),MR(t,e.containerInfo)}function H$(t,e,r,n,i){return Td(),TR(i),e.flags|=256,Sn(t,e,r,n),e.child}var pP={dehydrated:null,treeContext:null,retryLane:0};function mP(t){return{baseLanes:t,cachePool:null,transitions:null}}function lee(t,e,r){var n=e.pendingProps,i=Ft.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),kt(Ft,i&1),t===null)return aP(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=h0(o,n,0,null),t=rc(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=mP(r),e.memoizedState=pP,t):zR(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return $ue(t,e,o,n,a,i,r);if(s){s=n.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=$a(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=$a(a,s):(s=rc(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?mP(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=pP,n}return s=t.child,t=s.sibling,n=$a(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function zR(t,e){return e=h0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function dg(t,e,r,n){return n!==null&&TR(n),Od(e,t.child,null,r),t=zR(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $ue(t,e,r,n,i,s,o){if(r)return e.flags&256?(e.flags&=-257,n=l1(Error(re(422))),dg(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=h0({mode:"visible",children:n.children},i,0,null),s=rc(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Od(e,t.child,null,o),e.child.memoizedState=mP(o),e.memoizedState=pP,s);if(!(e.mode&1))return dg(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(re(419)),n=l1(s,n,void 0),dg(t,e,o,n)}if(a=(o&t.childLanes)!==0,Wn||a){if(n=Fr,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Po(t,i),ds(n,t,i,-1))}return GR(),n=l1(Error(re(421))),dg(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Que.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,fi=Ra(i.nextSibling),pi=e,At=!0,ns=null,t!==null&&(Ii[Ri++]=uo,Ii[Ri++]=ho,Ii[Ri++]=gc,uo=t.id,ho=t.overflow,gc=e),e=zR(e,n.children),e.flags|=4096,e)}function W$(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),lP(t.return,e,r)}function c1(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function cee(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Sn(t,e,n.children,r),n=Ft.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&W$(t,r,e);else if(t.tag===19)W$(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(kt(Ft,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Oy(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),c1(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Oy(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}c1(e,!0,r,null,s);break;case"together":c1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Yg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Io(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),vc|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(re(153));if(e.child!==null){for(t=e.child,r=$a(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=$a(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Fue(t,e,r){switch(e.tag){case 3:aee(e),Td();break;case 5:AZ(e);break;case 1:Qn(e.type)&&_y(e);break;case 4:MR(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;kt(Ny,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(kt(Ft,Ft.current&1),e.flags|=128,null):r&e.child.childLanes?lee(t,e,r):(kt(Ft,Ft.current&1),t=Io(t,e,r),t!==null?t.sibling:null);kt(Ft,Ft.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return cee(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),kt(Ft,Ft.current),n)break;return null;case 22:case 23:return e.lanes=0,see(t,e,r)}return Io(t,e,r)}var uee,gP,dee,hee;uee=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};gP=function(){};dee=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Ml(Ds.current);var s=null;switch(r){case"input":i=Fj(t,i),n=Fj(t,n),s=[];break;case"select":i=zt({},i,{value:void 0}),n=zt({},n,{value:void 0}),s=[];break;case"textarea":i=Bj(t,i),n=Bj(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=wy)}Vj(r,n);var o;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Hf.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in n){var l=n[c];if(a=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Hf.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Tt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}r&&(s=s||[]).push("style",r);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};hee=function(t,e,r,n){r!==n&&(e.flags|=4)};function Kh(t,e){if(!At)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function ln(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function que(t,e,r){var n=e.pendingProps;switch(kR(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(e),null;case 1:return Qn(e.type)&&Sy(),ln(e),null;case 3:return n=e.stateNode,jd(),It(Yn),It(pn),DR(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(cg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ns!==null&&(EP(ns),ns=null))),gP(t,e),ln(e),null;case 5:AR(e);var i=Ml(np.current);if(r=e.type,t!==null&&e.stateNode!=null)dee(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(re(166));return ln(e),null}if(t=Ml(Ds.current),cg(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[js]=e,n[tp]=s,t=(e.mode&1)!==0,r){case"dialog":Tt("cancel",n),Tt("close",n);break;case"iframe":case"object":case"embed":Tt("load",n);break;case"video":case"audio":for(i=0;i<df.length;i++)Tt(df[i],n);break;case"source":Tt("error",n);break;case"img":case"image":case"link":Tt("error",n),Tt("load",n);break;case"details":Tt("toggle",n);break;case"input":t$(n,s),Tt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Tt("invalid",n);break;case"textarea":n$(n,s),Tt("invalid",n)}Vj(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&lg(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&lg(n.textContent,a,t),i=["children",""+a]):Hf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Tt("scroll",n)}switch(r){case"input":eg(n),r$(n,s,!0);break;case"textarea":eg(n),i$(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=wy)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=LJ(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[js]=e,t[tp]=n,uee(t,e,!1,!1),e.stateNode=t;e:{switch(o=Uj(r,n),r){case"dialog":Tt("cancel",t),Tt("close",t),i=n;break;case"iframe":case"object":case"embed":Tt("load",t),i=n;break;case"video":case"audio":for(i=0;i<df.length;i++)Tt(df[i],t);i=n;break;case"source":Tt("error",t),i=n;break;case"img":case"image":case"link":Tt("error",t),Tt("load",t),i=n;break;case"details":Tt("toggle",t),i=n;break;case"input":t$(t,n),i=Fj(t,n),Tt("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=zt({},n,{value:void 0}),Tt("invalid",t);break;case"textarea":n$(t,n),i=Bj(t,n),Tt("invalid",t);break;default:i=n}Vj(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?VJ(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&BJ(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Wf(t,l):typeof l=="number"&&Wf(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Hf.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Tt("scroll",t):l!=null&&hR(t,s,l,o))}switch(r){case"input":eg(t),r$(t,n,!1);break;case"textarea":eg(t),i$(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Xa(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Qu(t,!!n.multiple,s,!1):n.defaultValue!=null&&Qu(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=wy)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ln(e),null;case 6:if(t&&e.stateNode!=null)hee(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(re(166));if(r=Ml(np.current),Ml(Ds.current),cg(e)){if(n=e.stateNode,r=e.memoizedProps,n[js]=e,(s=n.nodeValue!==r)&&(t=pi,t!==null))switch(t.tag){case 3:lg(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&lg(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[js]=e,e.stateNode=n}return ln(e),null;case 13:if(It(Ft),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(At&&fi!==null&&e.mode&1&&!(e.flags&128))jZ(),Td(),e.flags|=98560,s=!1;else if(s=cg(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(re(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(re(317));s[js]=e}else Td(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ln(e),s=!1}else ns!==null&&(EP(ns),ns=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Ft.current&1?Nr===0&&(Nr=3):GR())),e.updateQueue!==null&&(e.flags|=4),ln(e),null);case 4:return jd(),gP(t,e),t===null&&Zf(e.stateNode.containerInfo),ln(e),null;case 10:return PR(e.type._context),ln(e),null;case 17:return Qn(e.type)&&Sy(),ln(e),null;case 19:if(It(Ft),s=e.memoizedState,s===null)return ln(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)Kh(s,!1);else{if(Nr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Oy(t),o!==null){for(e.flags|=128,Kh(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return kt(Ft,Ft.current&1|2),e.child}t=t.sibling}s.tail!==null&&ir()>Id&&(e.flags|=128,n=!0,Kh(s,!1),e.lanes=4194304)}else{if(!n)if(t=Oy(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Kh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!At)return ln(e),null}else 2*ir()-s.renderingStartTime>Id&&r!==1073741824&&(e.flags|=128,n=!0,Kh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ir(),e.sibling=null,r=Ft.current,kt(Ft,n?r&1|2:r&1),e):(ln(e),null);case 22:case 23:return KR(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?li&1073741824&&(ln(e),e.subtreeFlags&6&&(e.flags|=8192)):ln(e),null;case 24:return null;case 25:return null}throw Error(re(156,e.tag))}function Lue(t,e){switch(kR(e),e.tag){case 1:return Qn(e.type)&&Sy(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return jd(),It(Yn),It(pn),DR(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return AR(e),null;case 13:if(It(Ft),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(re(340));Td()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return It(Ft),null;case 4:return jd(),null;case 10:return PR(e.type._context),null;case 22:case 23:return KR(),null;case 24:return null;default:return null}}var hg=!1,hn=!1,Bue=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Lu(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Qt(t,e,n)}else r.current=null}function yP(t,e,r){try{r()}catch(n){Qt(t,e,n)}}var K$=!1;function zue(t,e){if(eP=vy,t=yZ(),CR(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,f=null;t:for(;;){for(var p;h!==r||i!==0&&h.nodeType!==3||(a=o+i),h!==s||n!==0&&h.nodeType!==3||(l=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===r&&++c===i&&(a=o),f===s&&++u===n&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(tP={focusedElem:t,selectionRange:r},vy=!1,ve=e;ve!==null;)if(e=ve,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ve=t;else for(;ve!==null;){e=ve;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,v=m.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:Zi(e.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(x){Qt(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,ve=t;break}ve=e.return}return m=K$,K$=!1,m}function Cf(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&yP(e,r,s)}i=i.next}while(i!==n)}}function u0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function vP(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function fee(t){var e=t.alternate;e!==null&&(t.alternate=null,fee(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[js],delete e[tp],delete e[iP],delete e[Eue],delete e[Cue])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function pee(t){return t.tag===5||t.tag===3||t.tag===4}function G$(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||pee(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bP(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=wy));else if(n!==4&&(t=t.child,t!==null))for(bP(t,e,r),t=t.sibling;t!==null;)bP(t,e,r),t=t.sibling}function xP(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(xP(t,e,r),t=t.sibling;t!==null;)xP(t,e,r),t=t.sibling}var Qr=null,rs=!1;function Wo(t,e,r){for(r=r.child;r!==null;)mee(t,e,r),r=r.sibling}function mee(t,e,r){if(As&&typeof As.onCommitFiberUnmount=="function")try{As.onCommitFiberUnmount(r0,r)}catch{}switch(r.tag){case 5:hn||Lu(r,e);case 6:var n=Qr,i=rs;Qr=null,Wo(t,e,r),Qr=n,rs=i,Qr!==null&&(rs?(t=Qr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Qr.removeChild(r.stateNode));break;case 18:Qr!==null&&(rs?(t=Qr,r=r.stateNode,t.nodeType===8?r1(t.parentNode,r):t.nodeType===1&&r1(t,r),Qf(t)):r1(Qr,r.stateNode));break;case 4:n=Qr,i=rs,Qr=r.stateNode.containerInfo,rs=!0,Wo(t,e,r),Qr=n,rs=i;break;case 0:case 11:case 14:case 15:if(!hn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&yP(r,e,o),i=i.next}while(i!==n)}Wo(t,e,r);break;case 1:if(!hn&&(Lu(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){Qt(r,e,a)}Wo(t,e,r);break;case 21:Wo(t,e,r);break;case 22:r.mode&1?(hn=(n=hn)||r.memoizedState!==null,Wo(t,e,r),hn=n):Wo(t,e,r);break;default:Wo(t,e,r)}}function Y$(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Bue),e.forEach(function(n){var i=Xue.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Xi(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Qr=a.stateNode,rs=!1;break e;case 3:Qr=a.stateNode.containerInfo,rs=!0;break e;case 4:Qr=a.stateNode.containerInfo,rs=!0;break e}a=a.return}if(Qr===null)throw Error(re(160));mee(s,o,i),Qr=null,rs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Qt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)gee(e,t),e=e.sibling}function gee(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xi(e,t),xs(t),n&4){try{Cf(3,t,t.return),u0(3,t)}catch(g){Qt(t,t.return,g)}try{Cf(5,t,t.return)}catch(g){Qt(t,t.return,g)}}break;case 1:Xi(e,t),xs(t),n&512&&r!==null&&Lu(r,r.return);break;case 5:if(Xi(e,t),xs(t),n&512&&r!==null&&Lu(r,r.return),t.flags&32){var i=t.stateNode;try{Wf(i,"")}catch(g){Qt(t,t.return,g)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&FJ(i,s),Uj(a,o);var c=Uj(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?VJ(i,h):u==="dangerouslySetInnerHTML"?BJ(i,h):u==="children"?Wf(i,h):hR(i,u,h,c)}switch(a){case"input":qj(i,s);break;case"textarea":qJ(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Qu(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Qu(i,!!s.multiple,s.defaultValue,!0):Qu(i,!!s.multiple,s.multiple?[]:"",!1))}i[tp]=s}catch(g){Qt(t,t.return,g)}}break;case 6:if(Xi(e,t),xs(t),n&4){if(t.stateNode===null)throw Error(re(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){Qt(t,t.return,g)}}break;case 3:if(Xi(e,t),xs(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Qf(e.containerInfo)}catch(g){Qt(t,t.return,g)}break;case 4:Xi(e,t),xs(t);break;case 13:Xi(e,t),xs(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(HR=ir())),n&4&&Y$(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(hn=(c=hn)||u,Xi(e,t),hn=c):Xi(e,t),xs(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(ve=t,u=t.child;u!==null;){for(h=ve=u;ve!==null;){switch(f=ve,p=f.child,f.tag){case 0:case 11:case 14:case 15:Cf(4,f,f.return);break;case 1:Lu(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){Qt(n,r,g)}}break;case 5:Lu(f,f.return);break;case 22:if(f.memoizedState!==null){X$(h);continue}}p!==null?(p.return=f,ve=p):X$(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=zJ("display",o))}catch(g){Qt(t,t.return,g)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){Qt(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Xi(e,t),xs(t),n&4&&Y$(t);break;case 21:break;default:Xi(e,t),xs(t)}}function xs(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(pee(r)){var n=r;break e}r=r.return}throw Error(re(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Wf(i,""),n.flags&=-33);var s=G$(t);xP(t,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=G$(t);bP(t,a,o);break;default:throw Error(re(161))}}catch(l){Qt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Vue(t,e,r){ve=t,yee(t)}function yee(t,e,r){for(var n=(t.mode&1)!==0;ve!==null;){var i=ve,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||hg;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||hn;a=hg;var c=hn;if(hg=o,(hn=l)&&!c)for(ve=i;ve!==null;)o=ve,l=o.child,o.tag===22&&o.memoizedState!==null?J$(i):l!==null?(l.return=o,ve=l):J$(i);for(;s!==null;)ve=s,yee(s),s=s.sibling;ve=i,hg=a,hn=c}Q$(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ve=s):Q$(t)}}function Q$(t){for(;ve!==null;){var e=ve;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:hn||u0(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!hn)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Zi(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&M$(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}M$(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Qf(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}hn||e.flags&512&&vP(e)}catch(f){Qt(e,e.return,f)}}if(e===t){ve=null;break}if(r=e.sibling,r!==null){r.return=e.return,ve=r;break}ve=e.return}}function X$(t){for(;ve!==null;){var e=ve;if(e===t){ve=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ve=r;break}ve=e.return}}function J$(t){for(;ve!==null;){var e=ve;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{u0(4,e)}catch(l){Qt(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){Qt(e,i,l)}}var s=e.return;try{vP(e)}catch(l){Qt(e,s,l)}break;case 5:var o=e.return;try{vP(e)}catch(l){Qt(e,o,l)}}}catch(l){Qt(e,e.return,l)}if(e===t){ve=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ve=a;break}ve=e.return}}var Uue=Math.ceil,Iy=Ao.ReactCurrentDispatcher,VR=Ao.ReactCurrentOwner,Fi=Ao.ReactCurrentBatchConfig,ot=0,Fr=null,ur=null,en=0,li=0,Bu=ol(0),Nr=0,ap=null,vc=0,d0=0,UR=0,Nf=null,Vn=null,HR=0,Id=1/0,no=null,Ry=!1,wP=null,Aa=null,fg=!1,Ea=null,My=0,kf=0,SP=null,Qg=-1,Xg=0;function On(){return ot&6?ir():Qg!==-1?Qg:Qg=ir()}function Da(t){return t.mode&1?ot&2&&en!==0?en&-en:kue.transition!==null?(Xg===0&&(Xg=tZ()),Xg):(t=ft,t!==0||(t=window.event,t=t===void 0?16:lZ(t.type)),t):1}function ds(t,e,r,n){if(50<kf)throw kf=0,SP=null,Error(re(185));Hp(t,r,n),(!(ot&2)||t!==Fr)&&(t===Fr&&(!(ot&2)&&(d0|=r),Nr===4&&ca(t,en)),Xn(t,n),r===1&&ot===0&&!(e.mode&1)&&(Id=ir()+500,a0&&al()))}function Xn(t,e){var r=t.callbackNode;kce(t,e);var n=yy(t,t===Fr?en:0);if(n===0)r!==null&&a$(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&a$(r),e===1)t.tag===0?Nue(Z$.bind(null,t)):kZ(Z$.bind(null,t)),Sue(function(){!(ot&6)&&al()}),r=null;else{switch(rZ(n)){case 1:r=yR;break;case 4:r=ZJ;break;case 16:r=gy;break;case 536870912:r=eZ;break;default:r=gy}r=Cee(r,vee.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function vee(t,e){if(Qg=-1,Xg=0,ot&6)throw Error(re(327));var r=t.callbackNode;if(td()&&t.callbackNode!==r)return null;var n=yy(t,t===Fr?en:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Ay(t,n);else{e=n;var i=ot;ot|=2;var s=xee();(Fr!==t||en!==e)&&(no=null,Id=ir()+500,tc(t,e));do try{Kue();break}catch(a){bee(t,a)}while(!0);jR(),Iy.current=s,ot=i,ur!==null?e=0:(Fr=null,en=0,e=Nr)}if(e!==0){if(e===2&&(i=Yj(t),i!==0&&(n=i,e=_P(t,i))),e===1)throw r=ap,tc(t,0),ca(t,n),Xn(t,ir()),r;if(e===6)ca(t,n);else{if(i=t.current.alternate,!(n&30)&&!Hue(i)&&(e=Ay(t,n),e===2&&(s=Yj(t),s!==0&&(n=s,e=_P(t,s))),e===1))throw r=ap,tc(t,0),ca(t,n),Xn(t,ir()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(re(345));case 2:Ol(t,Vn,no);break;case 3:if(ca(t,n),(n&130023424)===n&&(e=HR+500-ir(),10<e)){if(yy(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){On(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=nP(Ol.bind(null,t,Vn,no),e);break}Ol(t,Vn,no);break;case 4:if(ca(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-us(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=ir()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Uue(n/1960))-n,10<n){t.timeoutHandle=nP(Ol.bind(null,t,Vn,no),n);break}Ol(t,Vn,no);break;case 5:Ol(t,Vn,no);break;default:throw Error(re(329))}}}return Xn(t,ir()),t.callbackNode===r?vee.bind(null,t):null}function _P(t,e){var r=Nf;return t.current.memoizedState.isDehydrated&&(tc(t,e).flags|=256),t=Ay(t,e),t!==2&&(e=Vn,Vn=r,e!==null&&EP(e)),t}function EP(t){Vn===null?Vn=t:Vn.push.apply(Vn,t)}function Hue(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!hs(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ca(t,e){for(e&=~UR,e&=~d0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-us(e),n=1<<r;t[r]=-1,e&=~n}}function Z$(t){if(ot&6)throw Error(re(327));td();var e=yy(t,0);if(!(e&1))return Xn(t,ir()),null;var r=Ay(t,e);if(t.tag!==0&&r===2){var n=Yj(t);n!==0&&(e=n,r=_P(t,n))}if(r===1)throw r=ap,tc(t,0),ca(t,e),Xn(t,ir()),r;if(r===6)throw Error(re(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ol(t,Vn,no),Xn(t,ir()),null}function WR(t,e){var r=ot;ot|=1;try{return t(e)}finally{ot=r,ot===0&&(Id=ir()+500,a0&&al())}}function bc(t){Ea!==null&&Ea.tag===0&&!(ot&6)&&td();var e=ot;ot|=1;var r=Fi.transition,n=ft;try{if(Fi.transition=null,ft=1,t)return t()}finally{ft=n,Fi.transition=r,ot=e,!(ot&6)&&al()}}function KR(){li=Bu.current,It(Bu)}function tc(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,wue(r)),ur!==null)for(r=ur.return;r!==null;){var n=r;switch(kR(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Sy();break;case 3:jd(),It(Yn),It(pn),DR();break;case 5:AR(n);break;case 4:jd();break;case 13:It(Ft);break;case 19:It(Ft);break;case 10:PR(n.type._context);break;case 22:case 23:KR()}r=r.return}if(Fr=t,ur=t=$a(t.current,null),en=li=e,Nr=0,ap=null,UR=d0=vc=0,Vn=Nf=null,Rl!==null){for(e=0;e<Rl.length;e++)if(r=Rl[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}Rl=null}return t}function bee(t,e){do{var r=ur;try{if(jR(),Kg.current=Py,jy){for(var n=Lt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}jy=!1}if(yc=0,Ar=Cr=Lt=null,Ef=!1,ip=0,VR.current=null,r===null||r.return===null){Nr=1,ap=e,ur=null;break}e:{var s=t,o=r.return,a=r,l=e;if(e=en,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=L$(o);if(p!==null){p.flags&=-257,B$(p,o,a,s,e),p.mode&1&&q$(s,c,e),e=p,l=c;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){q$(s,c,e),GR();break e}l=Error(re(426))}}else if(At&&a.mode&1){var v=L$(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),B$(v,o,a,s,e),TR(Pd(l,a));break e}}s=l=Pd(l,a),Nr!==4&&(Nr=2),Nf===null?Nf=[s]:Nf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=ree(s,l,e);R$(s,y);break e;case 1:a=l;var b=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Aa===null||!Aa.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=nee(s,a,e);R$(s,x);break e}}s=s.return}while(s!==null)}See(r)}catch(S){e=S,ur===r&&r!==null&&(ur=r=r.return);continue}break}while(!0)}function xee(){var t=Iy.current;return Iy.current=Py,t===null?Py:t}function GR(){(Nr===0||Nr===3||Nr===2)&&(Nr=4),Fr===null||!(vc&268435455)&&!(d0&268435455)||ca(Fr,en)}function Ay(t,e){var r=ot;ot|=2;var n=xee();(Fr!==t||en!==e)&&(no=null,tc(t,e));do try{Wue();break}catch(i){bee(t,i)}while(!0);if(jR(),ot=r,Iy.current=n,ur!==null)throw Error(re(261));return Fr=null,en=0,Nr}function Wue(){for(;ur!==null;)wee(ur)}function Kue(){for(;ur!==null&&!vce();)wee(ur)}function wee(t){var e=Eee(t.alternate,t,li);t.memoizedProps=t.pendingProps,e===null?See(t):ur=e,VR.current=null}function See(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Lue(r,e),r!==null){r.flags&=32767,ur=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Nr=6,ur=null;return}}else if(r=que(r,e,li),r!==null){ur=r;return}if(e=e.sibling,e!==null){ur=e;return}ur=e=t}while(e!==null);Nr===0&&(Nr=5)}function Ol(t,e,r){var n=ft,i=Fi.transition;try{Fi.transition=null,ft=1,Gue(t,e,r,n)}finally{Fi.transition=i,ft=n}return null}function Gue(t,e,r,n){do td();while(Ea!==null);if(ot&6)throw Error(re(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(re(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(Tce(t,s),t===Fr&&(ur=Fr=null,en=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||fg||(fg=!0,Cee(gy,function(){return td(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Fi.transition,Fi.transition=null;var o=ft;ft=1;var a=ot;ot|=4,VR.current=null,zue(t,r),gee(r,t),pue(tP),vy=!!eP,tP=eP=null,t.current=r,Vue(r),bce(),ot=a,ft=o,Fi.transition=s}else t.current=r;if(fg&&(fg=!1,Ea=t,My=i),s=t.pendingLanes,s===0&&(Aa=null),Sce(r.stateNode),Xn(t,ir()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Ry)throw Ry=!1,t=wP,wP=null,t;return My&1&&t.tag!==0&&td(),s=t.pendingLanes,s&1?t===SP?kf++:(kf=0,SP=t):kf=0,al(),null}function td(){if(Ea!==null){var t=rZ(My),e=Fi.transition,r=ft;try{if(Fi.transition=null,ft=16>t?16:t,Ea===null)var n=!1;else{if(t=Ea,Ea=null,My=0,ot&6)throw Error(re(331));var i=ot;for(ot|=4,ve=t.current;ve!==null;){var s=ve,o=s.child;if(ve.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ve=c;ve!==null;){var u=ve;switch(u.tag){case 0:case 11:case 15:Cf(8,u,s)}var h=u.child;if(h!==null)h.return=u,ve=h;else for(;ve!==null;){u=ve;var f=u.sibling,p=u.return;if(fee(u),u===c){ve=null;break}if(f!==null){f.return=p,ve=f;break}ve=p}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}ve=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ve=o;else e:for(;ve!==null;){if(s=ve,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Cf(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,ve=y;break e}ve=s.return}}var b=t.current;for(ve=b;ve!==null;){o=ve;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ve=w;else e:for(o=b;ve!==null;){if(a=ve,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:u0(9,a)}}catch(S){Qt(a,a.return,S)}if(a===o){ve=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,ve=x;break e}ve=a.return}}if(ot=i,al(),As&&typeof As.onPostCommitFiberRoot=="function")try{As.onPostCommitFiberRoot(r0,t)}catch{}n=!0}return n}finally{ft=r,Fi.transition=e}}return!1}function eF(t,e,r){e=Pd(r,e),e=ree(t,e,1),t=Ma(t,e,1),e=On(),t!==null&&(Hp(t,1,e),Xn(t,e))}function Qt(t,e,r){if(t.tag===3)eF(t,t,r);else for(;e!==null;){if(e.tag===3){eF(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Aa===null||!Aa.has(n))){t=Pd(r,t),t=nee(e,t,1),e=Ma(e,t,1),t=On(),e!==null&&(Hp(e,1,t),Xn(e,t));break}}e=e.return}}function Yue(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=On(),t.pingedLanes|=t.suspendedLanes&r,Fr===t&&(en&r)===r&&(Nr===4||Nr===3&&(en&130023424)===en&&500>ir()-HR?tc(t,0):UR|=r),Xn(t,e)}function _ee(t,e){e===0&&(t.mode&1?(e=ng,ng<<=1,!(ng&130023424)&&(ng=4194304)):e=1);var r=On();t=Po(t,e),t!==null&&(Hp(t,e,r),Xn(t,r))}function Que(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),_ee(t,r)}function Xue(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(re(314))}n!==null&&n.delete(e),_ee(t,r)}var Eee;Eee=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Yn.current)Wn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Wn=!1,Fue(t,e,r);Wn=!!(t.flags&131072)}else Wn=!1,At&&e.flags&1048576&&TZ(e,Cy,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Yg(t,e),t=e.pendingProps;var i=kd(e,pn.current);ed(e,r),i=FR(null,e,n,t,i,r);var s=qR();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Qn(n)?(s=!0,_y(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,RR(e),i.updater=c0,e.stateNode=i,i._reactInternals=e,uP(e,n,t,r),e=fP(null,e,n,!0,s,r)):(e.tag=0,At&&s&&NR(e),Sn(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Yg(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=Zue(n),t=Zi(n,t),i){case 0:e=hP(null,e,n,t,r);break e;case 1:e=U$(null,e,n,t,r);break e;case 11:e=z$(null,e,n,t,r);break e;case 14:e=V$(null,e,n,Zi(n.type,t),r);break e}throw Error(re(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Zi(n,i),hP(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Zi(n,i),U$(t,e,n,i,r);case 3:e:{if(aee(e),t===null)throw Error(re(387));n=e.pendingProps,s=e.memoizedState,i=s.element,MZ(t,e),Ty(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Pd(Error(re(423)),e),e=H$(t,e,n,r,i);break e}else if(n!==i){i=Pd(Error(re(424)),e),e=H$(t,e,n,r,i);break e}else for(fi=Ra(e.stateNode.containerInfo.firstChild),pi=e,At=!0,ns=null,r=IZ(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Td(),n===i){e=Io(t,e,r);break e}Sn(t,e,n,r)}e=e.child}return e;case 5:return AZ(e),t===null&&aP(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,rP(n,i)?o=null:s!==null&&rP(n,s)&&(e.flags|=32),oee(t,e),Sn(t,e,o,r),e.child;case 6:return t===null&&aP(e),null;case 13:return lee(t,e,r);case 4:return MR(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Od(e,null,n,r):Sn(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Zi(n,i),z$(t,e,n,i,r);case 7:return Sn(t,e,e.pendingProps,r),e.child;case 8:return Sn(t,e,e.pendingProps.children,r),e.child;case 12:return Sn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,kt(Ny,n._currentValue),n._currentValue=o,s!==null)if(hs(s.value,o)){if(s.children===i.children&&!Yn.current){e=Io(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=go(-1,r&-r),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),lP(s.return,r,e),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(re(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),lP(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Sn(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,ed(e,r),i=Vi(i),n=n(i),e.flags|=1,Sn(t,e,n,r),e.child;case 14:return n=e.type,i=Zi(n,e.pendingProps),i=Zi(n.type,i),V$(t,e,n,i,r);case 15:return iee(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Zi(n,i),Yg(t,e),e.tag=1,Qn(n)?(t=!0,_y(e)):t=!1,ed(e,r),tee(e,n,i),uP(e,n,i,r),fP(null,e,n,!0,t,r);case 19:return cee(t,e,r);case 22:return see(t,e,r)}throw Error(re(156,e.tag))};function Cee(t,e){return JJ(t,e)}function Jue(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $i(t,e,r,n){return new Jue(t,e,r,n)}function YR(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Zue(t){if(typeof t=="function")return YR(t)?1:0;if(t!=null){if(t=t.$$typeof,t===pR)return 11;if(t===mR)return 14}return 2}function $a(t,e){var r=t.alternate;return r===null?(r=$i(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Jg(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")YR(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Pu:return rc(r.children,i,s,e);case fR:o=8,i|=8;break;case Mj:return t=$i(12,r,e,i|2),t.elementType=Mj,t.lanes=s,t;case Aj:return t=$i(13,r,e,i),t.elementType=Aj,t.lanes=s,t;case Dj:return t=$i(19,r,e,i),t.elementType=Dj,t.lanes=s,t;case AJ:return h0(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case RJ:o=10;break e;case MJ:o=9;break e;case pR:o=11;break e;case mR:o=14;break e;case ea:o=16,n=null;break e}throw Error(re(130,t==null?t:typeof t,""))}return e=$i(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function rc(t,e,r,n){return t=$i(7,t,n,e),t.lanes=r,t}function h0(t,e,r,n){return t=$i(22,t,n,e),t.elementType=AJ,t.lanes=r,t.stateNode={isHidden:!1},t}function u1(t,e,r){return t=$i(6,t,null,e),t.lanes=r,t}function d1(t,e,r){return e=$i(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ede(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hb(0),this.expirationTimes=Hb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hb(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function QR(t,e,r,n,i,s,o,a,l){return t=new ede(t,e,r,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=$i(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},RR(s),t}function tde(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ju,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Nee(t){if(!t)return Ja;t=t._reactInternals;e:{if(zc(t)!==t||t.tag!==1)throw Error(re(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Qn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(re(171))}if(t.tag===1){var r=t.type;if(Qn(r))return NZ(t,r,e)}return e}function kee(t,e,r,n,i,s,o,a,l){return t=QR(r,n,!0,t,i,s,o,a,l),t.context=Nee(null),r=t.current,n=On(),i=Da(r),s=go(n,i),s.callback=e??null,Ma(r,s,i),t.current.lanes=i,Hp(t,i,n),Xn(t,n),t}function f0(t,e,r,n){var i=e.current,s=On(),o=Da(i);return r=Nee(r),e.context===null?e.context=r:e.pendingContext=r,e=go(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Ma(i,e,o),t!==null&&(ds(t,i,o,s),Wg(t,i,o)),o}function Dy(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function tF(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function XR(t,e){tF(t,e),(t=t.alternate)&&tF(t,e)}function rde(){return null}var Tee=typeof reportError=="function"?reportError:function(t){console.error(t)};function JR(t){this._internalRoot=t}p0.prototype.render=JR.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(re(409));f0(t,e,null,null)};p0.prototype.unmount=JR.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;bc(function(){f0(null,t,null,null)}),e[jo]=null}};function p0(t){this._internalRoot=t}p0.prototype.unstable_scheduleHydration=function(t){if(t){var e=sZ();t={blockedOn:null,target:t,priority:e};for(var r=0;r<la.length&&e!==0&&e<la[r].priority;r++);la.splice(r,0,t),r===0&&aZ(t)}};function ZR(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function m0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function rF(){}function nde(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var c=Dy(o);s.call(c)}}var o=kee(e,n,t,0,null,!1,!1,"",rF);return t._reactRootContainer=o,t[jo]=o.current,Zf(t.nodeType===8?t.parentNode:t),bc(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var c=Dy(l);a.call(c)}}var l=QR(t,0,!1,null,null,!1,!1,"",rF);return t._reactRootContainer=l,t[jo]=l.current,Zf(t.nodeType===8?t.parentNode:t),bc(function(){f0(e,l,r,n)}),l}function g0(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Dy(o);a.call(l)}}f0(e,o,t,i)}else o=nde(r,e,t,i,n);return Dy(o)}nZ=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=uf(e.pendingLanes);r!==0&&(vR(e,r|1),Xn(e,ir()),!(ot&6)&&(Id=ir()+500,al()))}break;case 13:bc(function(){var n=Po(t,1);if(n!==null){var i=On();ds(n,t,1,i)}}),XR(t,1)}};bR=function(t){if(t.tag===13){var e=Po(t,134217728);if(e!==null){var r=On();ds(e,t,134217728,r)}XR(t,134217728)}};iZ=function(t){if(t.tag===13){var e=Da(t),r=Po(t,e);if(r!==null){var n=On();ds(r,t,e,n)}XR(t,e)}};sZ=function(){return ft};oZ=function(t,e){var r=ft;try{return ft=t,e()}finally{ft=r}};Wj=function(t,e,r){switch(e){case"input":if(qj(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=o0(n);if(!i)throw Error(re(90));$J(n),qj(n,i)}}}break;case"textarea":qJ(t,r);break;case"select":e=r.value,e!=null&&Qu(t,!!r.multiple,e,!1)}};WJ=WR;KJ=bc;var ide={usingClientEntryPoint:!1,Events:[Kp,Au,o0,UJ,HJ,WR]},Gh={findFiberByHostInstance:Il,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sde={bundleType:Gh.bundleType,version:Gh.version,rendererPackageName:Gh.rendererPackageName,rendererConfig:Gh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ao.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=QJ(t),t===null?null:t.stateNode},findFiberByHostInstance:Gh.findFiberByHostInstance||rde,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pg.isDisabled&&pg.supportsFiber)try{r0=pg.inject(sde),As=pg}catch{}}yi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ide;yi.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ZR(e))throw Error(re(200));return tde(t,e,null,r)};yi.createRoot=function(t,e){if(!ZR(t))throw Error(re(299));var r=!1,n="",i=Tee;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=QR(t,1,!1,null,null,r,!1,n,i),t[jo]=e.current,Zf(t.nodeType===8?t.parentNode:t),new JR(e)};yi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(re(188)):(t=Object.keys(t).join(","),Error(re(268,t)));return t=QJ(e),t=t===null?null:t.stateNode,t};yi.flushSync=function(t){return bc(t)};yi.hydrate=function(t,e,r){if(!m0(e))throw Error(re(200));return g0(null,t,e,!0,r)};yi.hydrateRoot=function(t,e,r){if(!ZR(t))throw Error(re(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=Tee;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=kee(e,null,t,1,r??null,i,!1,s,o),t[jo]=e.current,Zf(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new p0(e)};yi.render=function(t,e,r){if(!m0(e))throw Error(re(200));return g0(null,t,e,!1,r)};yi.unmountComponentAtNode=function(t){if(!m0(t))throw Error(re(40));return t._reactRootContainer?(bc(function(){g0(null,null,t,!1,function(){t._reactRootContainer=null,t[jo]=null})}),!0):!1};yi.unstable_batchedUpdates=WR;yi.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!m0(r))throw Error(re(200));if(t==null||t._reactInternals===void 0)throw Error(re(38));return g0(t,e,r,!1,n)};yi.version="18.3.1-next-f1338f8080-20240426";function Oee(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Oee)}catch(t){console.error(t)}}Oee(),OJ.exports=yi;var jee=OJ.exports;const ode=yJ(jee);var nF=jee;Ij.createRoot=nF.createRoot,Ij.hydrateRoot=nF.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lp(){return lp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lp.apply(this,arguments)}var Ca;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ca||(Ca={}));const iF="popstate";function ade(t){t===void 0&&(t={});function e(n,i){let{pathname:s,search:o,hash:a}=n.location;return CP("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:$y(i)}return cde(e,r,null,t)}function Bt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function eM(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function lde(){return Math.random().toString(36).substr(2,8)}function sF(t,e){return{usr:t.state,key:t.key,idx:e}}function CP(t,e,r,n){return r===void 0&&(r=null),lp({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ih(e):e,{state:r,key:e&&e.key||n||lde()})}function $y(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function ih(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function cde(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,a=Ca.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(lp({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=Ca.Pop;let v=u(),y=v==null?null:v-c;c=v,l&&l({action:a,location:g.location,delta:y})}function f(v,y){a=Ca.Push;let b=CP(g.location,v,y);c=u()+1;let w=sF(b,c),x=g.createHref(b);try{o.pushState(w,"",x)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(x)}s&&l&&l({action:a,location:g.location,delta:1})}function p(v,y){a=Ca.Replace;let b=CP(g.location,v,y);c=u();let w=sF(b,c),x=g.createHref(b);o.replaceState(w,"",x),s&&l&&l({action:a,location:g.location,delta:0})}function m(v){let y=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof v=="string"?v:$y(v);return b=b.replace(/ $/,"%20"),Bt(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let g={get action(){return a},get location(){return t(i,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(iF,h),l=v,()=>{i.removeEventListener(iF,h),l=null}},createHref(v){return e(i,v)},createURL:m,encodeLocation(v){let y=m(v);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:p,go(v){return o.go(v)}};return g}var oF;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(oF||(oF={}));function ude(t,e,r){return r===void 0&&(r="/"),dde(t,e,r)}function dde(t,e,r,n){let i=typeof e=="string"?ih(e):e,s=Rd(i.pathname||"/",r);if(s==null)return null;let o=Pee(t);hde(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=_de(s);a=wde(o[l],c)}return a}function Pee(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Bt(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=Fa([n,l.relativePath]),u=r.concat(l);s.children&&s.children.length>0&&(Bt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Pee(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:bde(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of Iee(s.path))i(s,o,l)}),e}function Iee(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let o=Iee(n.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function hde(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:xde(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const fde=/^:[\w-]+$/,pde=3,mde=2,gde=1,yde=10,vde=-2,aF=t=>t==="*";function bde(t,e){let r=t.split("/"),n=r.length;return r.some(aF)&&(n+=vde),e&&(n+=mde),r.filter(i=>!aF(i)).reduce((i,s)=>i+(fde.test(s)?pde:s===""?gde:yde),n)}function xde(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function wde(t,e,r){let{routesMeta:n}=t,i={},s="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],c=a===n.length-1,u=s==="/"?e:e.slice(s.length)||"/",h=NP({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:Fa([s,h.pathname]),pathnameBase:Tde(Fa([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=Fa([s,h.pathnameBase]))}return o}function NP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Sde(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((c,u,h)=>{let{paramName:f,isOptional:p}=u;if(f==="*"){let g=a[h]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const m=a[h];return p&&!m?c[f]=void 0:c[f]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function Sde(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),eM(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function _de(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return eM(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Rd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const Ede=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Cde=t=>Ede.test(t);function Nde(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?ih(t):t,s;if(r)if(Cde(r))s=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),eM(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?s=lF(r.substring(1),"/"):s=lF(r,e)}else s=e;return{pathname:s,search:Ode(n),hash:jde(i)}}function lF(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function h1(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function kde(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function tM(t,e){let r=kde(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function rM(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=ih(t):(i=lp({},t),Bt(!i.pathname||!i.pathname.includes("?"),h1("?","pathname","search",i)),Bt(!i.pathname||!i.pathname.includes("#"),h1("#","pathname","hash",i)),Bt(!i.search||!i.search.includes("#"),h1("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=r;else{let h=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=Nde(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Fa=t=>t.join("/").replace(/\/\/+/g,"/"),Tde=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Ode=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,jde=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Pde(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Ree=["post","put","patch","delete"];new Set(Ree);const Ide=["get",...Ree];new Set(Ide);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cp(){return cp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cp.apply(this,arguments)}const y0=k.createContext(null),Mee=k.createContext(null),Do=k.createContext(null),v0=k.createContext(null),$o=k.createContext({outlet:null,matches:[],isDataRoute:!1}),Aee=k.createContext(null);function Rde(t,e){let{relative:r}=e===void 0?{}:e;sh()||Bt(!1);let{basename:n,navigator:i}=k.useContext(Do),{hash:s,pathname:o,search:a}=b0(t,{relative:r}),l=o;return n!=="/"&&(l=o==="/"?n:Fa([n,o])),i.createHref({pathname:l,search:a,hash:s})}function sh(){return k.useContext(v0)!=null}function Fo(){return sh()||Bt(!1),k.useContext(v0).location}function Dee(t){k.useContext(Do).static||k.useLayoutEffect(t)}function ms(){let{isDataRoute:t}=k.useContext($o);return t?Wde():Mde()}function Mde(){sh()||Bt(!1);let t=k.useContext(y0),{basename:e,future:r,navigator:n}=k.useContext(Do),{matches:i}=k.useContext($o),{pathname:s}=Fo(),o=JSON.stringify(tM(i,r.v7_relativeSplatPath)),a=k.useRef(!1);return Dee(()=>{a.current=!0}),k.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){n.go(c);return}let h=rM(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Fa([e,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[e,n,o,s,t])}function nM(){let{matches:t}=k.useContext($o),e=t[t.length-1];return e?e.params:{}}function b0(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=k.useContext(Do),{matches:i}=k.useContext($o),{pathname:s}=Fo(),o=JSON.stringify(tM(i,n.v7_relativeSplatPath));return k.useMemo(()=>rM(t,JSON.parse(o),s,r==="path"),[t,o,s,r])}function Ade(t,e){return Dde(t,e)}function Dde(t,e,r,n){sh()||Bt(!1);let{navigator:i}=k.useContext(Do),{matches:s}=k.useContext($o),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Fo(),u;if(e){var h;let v=typeof e=="string"?ih(e):e;l==="/"||(h=v.pathname)!=null&&h.startsWith(l)||Bt(!1),u=v}else u=c;let f=u.pathname||"/",p=f;if(l!=="/"){let v=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let m=ude(t,{pathname:p}),g=Bde(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:Fa([l,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Fa([l,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,r,n);return e&&g?k.createElement(v0.Provider,{value:{location:cp({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Ca.Pop}},g):g}function $de(){let t=Hde(),e=Pde(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),r?k.createElement("pre",{style:i},r):null,null)}const Fde=k.createElement($de,null);class qde extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?k.createElement($o.Provider,{value:this.props.routeContext},k.createElement(Aee.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Lde(t){let{routeContext:e,match:r,children:n}=t,i=k.useContext(y0);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),k.createElement($o.Provider,{value:e},n)}function Bde(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if(!r)return null;if(r.errors)t=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,a=(i=r)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);u>=0||Bt(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:f,errors:p}=r,m=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||m){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,f)=>{let p,m=!1,g=null,v=null;r&&(p=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||Fde,l&&(c<0&&f===0?(Kde("route-fallback"),m=!0,v=null):c===f&&(m=!0,v=h.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,f+1)),b=()=>{let w;return p?w=g:m?w=v:h.route.Component?w=k.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=u,k.createElement(Lde,{match:h,routeContext:{outlet:u,matches:y,isDataRoute:r!=null},children:w})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?k.createElement(qde,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var $ee=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}($ee||{}),Fee=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Fee||{});function zde(t){let e=k.useContext(y0);return e||Bt(!1),e}function Vde(t){let e=k.useContext(Mee);return e||Bt(!1),e}function Ude(t){let e=k.useContext($o);return e||Bt(!1),e}function qee(t){let e=Ude(),r=e.matches[e.matches.length-1];return r.route.id||Bt(!1),r.route.id}function Hde(){var t;let e=k.useContext(Aee),r=Vde(),n=qee();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function Wde(){let{router:t}=zde($ee.UseNavigateStable),e=qee(Fee.UseNavigateStable),r=k.useRef(!1);return Dee(()=>{r.current=!0}),k.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,cp({fromRouteId:e},s)))},[t,e])}const cF={};function Kde(t,e,r){cF[t]||(cF[t]=!0)}function Gde(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Lee(t){let{to:e,replace:r,state:n,relative:i}=t;sh()||Bt(!1);let{future:s,static:o}=k.useContext(Do),{matches:a}=k.useContext($o),{pathname:l}=Fo(),c=ms(),u=rM(e,tM(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(u);return k.useEffect(()=>c(JSON.parse(h),{replace:r,state:n,relative:i}),[c,h,i,r,n]),null}function bn(t){Bt(!1)}function Yde(t){let{basename:e="/",children:r=null,location:n,navigationType:i=Ca.Pop,navigator:s,static:o=!1,future:a}=t;sh()&&Bt(!1);let l=e.replace(/^\/*/,"/"),c=k.useMemo(()=>({basename:l,navigator:s,static:o,future:cp({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof n=="string"&&(n=ih(n));let{pathname:u="/",search:h="",hash:f="",state:p=null,key:m="default"}=n,g=k.useMemo(()=>{let v=Rd(u,l);return v==null?null:{location:{pathname:v,search:h,hash:f,state:p,key:m},navigationType:i}},[l,u,h,f,p,m,i]);return g==null?null:k.createElement(Do.Provider,{value:c},k.createElement(v0.Provider,{children:r,value:g}))}function uF(t){let{children:e,location:r}=t;return Ade(kP(e),r)}new Promise(()=>{});function kP(t,e){e===void 0&&(e=[]);let r=[];return k.Children.forEach(t,(n,i)=>{if(!k.isValidElement(n))return;let s=[...e,i];if(n.type===k.Fragment){r.push.apply(r,kP(n.props.children,s));return}n.type!==bn&&Bt(!1),!n.props.index||!n.props.children||Bt(!1);let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=kP(n.props.children,s)),r.push(o)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fy(){return Fy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Fy.apply(this,arguments)}function Bee(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function Qde(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Xde(t,e){return t.button===0&&(!e||e==="_self")&&!Qde(t)}function TP(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function Jde(t,e){let r=TP(t);return e&&e.forEach((n,i)=>{r.has(i)||e.getAll(i).forEach(s=>{r.append(i,s)})}),r}const Zde=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ehe=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],the="6";try{window.__reactRouterVersion=the}catch{}const rhe=k.createContext({isTransitioning:!1}),nhe="startTransition",dF=Yle[nhe];function ihe(t){let{basename:e,children:r,future:n,window:i}=t,s=k.useRef();s.current==null&&(s.current=ade({window:i,v5Compat:!0}));let o=s.current,[a,l]=k.useState({action:o.action,location:o.location}),{v7_startTransition:c}=n||{},u=k.useCallback(h=>{c&&dF?dF(()=>l(h)):l(h)},[l,c]);return k.useLayoutEffect(()=>o.listen(u),[o,u]),k.useEffect(()=>Gde(n),[n]),k.createElement(Yde,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:o,future:n})}const she=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ohe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ye=k.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:h}=e,f=Bee(e,Zde),{basename:p}=k.useContext(Do),m,g=!1;if(typeof c=="string"&&ohe.test(c)&&(m=c,she))try{let w=new URL(window.location.href),x=c.startsWith("//")?new URL(w.protocol+c):new URL(c),S=Rd(x.pathname,p);x.origin===w.origin&&S!=null?c=S+x.search+x.hash:g=!0}catch{}let v=Rde(c,{relative:i}),y=che(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,viewTransition:h});function b(w){n&&n(w),w.defaultPrevented||y(w)}return k.createElement("a",Fy({},f,{href:m||v,onClick:g||s?n:b,ref:r,target:l}))}),ahe=k.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:u}=e,h=Bee(e,ehe),f=b0(l,{relative:h.relative}),p=Fo(),m=k.useContext(Mee),{navigator:g,basename:v}=k.useContext(Do),y=m!=null&&dhe(f)&&c===!0,b=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,w=p.pathname,x=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;i||(w=w.toLowerCase(),x=x?x.toLowerCase():null,b=b.toLowerCase()),x&&v&&(x=Rd(x,v)||x);const S=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let _=w===b||!o&&w.startsWith(b)&&w.charAt(S)==="/",C=x!=null&&(x===b||!o&&x.startsWith(b)&&x.charAt(b.length)==="/"),E={isActive:_,isPending:C,isTransitioning:y},N=_?n:void 0,T;typeof s=="function"?T=s(E):T=[s,_?"active":null,C?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let j=typeof a=="function"?a(E):a;return k.createElement(Ye,Fy({},h,{"aria-current":N,className:T,ref:r,style:j,to:l,viewTransition:c}),typeof u=="function"?u(E):u)});var OP;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(OP||(OP={}));var hF;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(hF||(hF={}));function lhe(t){let e=k.useContext(y0);return e||Bt(!1),e}function che(t,e){let{target:r,replace:n,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=ms(),c=Fo(),u=b0(t,{relative:o});return k.useCallback(h=>{if(Xde(h,r)){h.preventDefault();let f=n!==void 0?n:$y(c)===$y(u);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,u,n,i,r,t,s,o,a])}function uhe(t){let e=k.useRef(TP(t)),r=k.useRef(!1),n=Fo(),i=k.useMemo(()=>Jde(n.search,r.current?null:e.current),[n.search]),s=ms(),o=k.useCallback((a,l)=>{const c=TP(typeof a=="function"?a(i):a);r.current=!0,s("?"+c,l)},[s,i]);return[i,o]}function dhe(t,e){e===void 0&&(e={});let r=k.useContext(rhe);r==null&&Bt(!1);let{basename:n}=lhe(OP.useViewTransitionState),i=b0(t,{relative:e.relative});if(!r.isTransitioning)return!1;let s=Rd(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Rd(r.nextLocation.pathname,n)||r.nextLocation.pathname;return NP(i.pathname,o)!=null||NP(i.pathname,s)!=null}var Vc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},hhe={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},fa,sR,sJ,fhe=(sJ=class{constructor(){ye(this,fa,hhe);ye(this,sR,!1)}setTimeoutProvider(t){ae(this,fa,t)}setTimeout(t,e){return M(this,fa).setTimeout(t,e)}clearTimeout(t){M(this,fa).clearTimeout(t)}setInterval(t,e){return M(this,fa).setInterval(t,e)}clearInterval(t){M(this,fa).clearInterval(t)}},fa=new WeakMap,sR=new WeakMap,sJ),Al=new fhe;function phe(t){setTimeout(t,0)}var xc=typeof window>"u"||"Deno"in globalThis;function dn(){}function mhe(t,e){return typeof t=="function"?t(e):t}function jP(t){return typeof t=="number"&&t>=0&&t!==1/0}function zee(t,e){return Math.max(t+(e||0)-Date.now(),0)}function qa(t,e){return typeof t=="function"?t(e):t}function Oi(t,e){return typeof t=="function"?t(e):t}function fF(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(n){if(e.queryHash!==iM(o,e.options))return!1}else if(!up(e.queryKey,o))return!1}if(r!=="all"){const l=e.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function pF(t,e){const{exact:r,status:n,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(r){if(wc(e.options.mutationKey)!==wc(s))return!1}else if(!up(e.options.mutationKey,s))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function iM(t,e){return((e==null?void 0:e.queryKeyHashFn)||wc)(t)}function wc(t){return JSON.stringify(t,(e,r)=>PP(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function up(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>up(t[r],e[r])):!1}var ghe=Object.prototype.hasOwnProperty;function sM(t,e){if(t===e)return t;const r=mF(t)&&mF(e);if(!r&&!(PP(t)&&PP(e)))return e;const i=(r?t:Object.keys(t)).length,s=r?e:Object.keys(e),o=s.length,a=r?new Array(o):{};let l=0;for(let c=0;c<o;c++){const u=r?c:s[c],h=t[u],f=e[u];if(h===f){a[u]=h,(r?c<i:ghe.call(t,u))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[u]=f;continue}const p=sM(h,f);a[u]=p,p===h&&l++}return i===o&&l===i?t:a}function dp(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function mF(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function PP(t){if(!gF(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!gF(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function gF(t){return Object.prototype.toString.call(t)==="[object Object]"}function yhe(t){return new Promise(e=>{Al.setTimeout(e,t)})}function IP(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?sM(t,e):e}function vhe(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function bhe(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var oM=Symbol();function Vee(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===oM?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function aM(t,e){return typeof t=="function"?t(...e):!!t}function xhe(t,e,r){let n=!1,i;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(i??(i=e()),n||(n=!0,i.aborted?r():i.addEventListener("abort",r,{once:!0})),i)}),t}var Wl,pa,dd,oJ,whe=(oJ=class extends Vc{constructor(){super();ye(this,Wl);ye(this,pa);ye(this,dd);ae(this,dd,e=>{if(!xc&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){M(this,pa)||this.setEventListener(M(this,dd))}onUnsubscribe(){var e;this.hasListeners()||((e=M(this,pa))==null||e.call(this),ae(this,pa,void 0))}setEventListener(e){var r;ae(this,dd,e),(r=M(this,pa))==null||r.call(this),ae(this,pa,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){M(this,Wl)!==e&&(ae(this,Wl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof M(this,Wl)=="boolean"?M(this,Wl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Wl=new WeakMap,pa=new WeakMap,dd=new WeakMap,oJ),lM=new whe;function RP(){let t,e;const r=new Promise((i,s)=>{t=i,e=s});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),t(i)},r.reject=i=>{n({status:"rejected",reason:i}),e(i)},r}var She=phe;function _he(){let t=[],e=0,r=a=>{a()},n=a=>{a()},i=She;const s=a=>{e?t.push(a):i(()=>{r(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{n(()=>{a.forEach(l=>{r(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{r=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{i=a}}}var er=_he(),hd,ma,fd,aJ,Ehe=(aJ=class extends Vc{constructor(){super();ye(this,hd,!0);ye(this,ma);ye(this,fd);ae(this,fd,e=>{if(!xc&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){M(this,ma)||this.setEventListener(M(this,fd))}onUnsubscribe(){var e;this.hasListeners()||((e=M(this,ma))==null||e.call(this),ae(this,ma,void 0))}setEventListener(e){var r;ae(this,fd,e),(r=M(this,ma))==null||r.call(this),ae(this,ma,e(this.setOnline.bind(this)))}setOnline(e){M(this,hd)!==e&&(ae(this,hd,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return M(this,hd)}},hd=new WeakMap,ma=new WeakMap,fd=new WeakMap,aJ),qy=new Ehe;function Che(t){return Math.min(1e3*2**t,3e4)}function Uee(t){return(t??"online")==="online"?qy.isOnline():!0}var MP=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Hee(t){let e=!1,r=0,n;const i=RP(),s=()=>i.status!=="pending",o=g=>{var v;if(!s()){const y=new MP(g);f(y),(v=t.onCancel)==null||v.call(t,y)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>lM.isFocused()&&(t.networkMode==="always"||qy.isOnline())&&t.canRun(),u=()=>Uee(t.networkMode)&&t.canRun(),h=g=>{s()||(n==null||n(),i.resolve(g))},f=g=>{s()||(n==null||n(),i.reject(g))},p=()=>new Promise(g=>{var v;n=y=>{(s()||c())&&g(y)},(v=t.onPause)==null||v.call(t)}).then(()=>{var g;n=void 0,s()||(g=t.onContinue)==null||g.call(t)}),m=()=>{if(s())return;let g;const v=r===0?t.initialPromise:void 0;try{g=v??t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(h).catch(y=>{var _;if(s())return;const b=t.retry??(xc?0:3),w=t.retryDelay??Che,x=typeof w=="function"?w(r,y):w,S=b===!0||typeof b=="number"&&r<b||typeof b=="function"&&b(r,y);if(e||!S){f(y);return}r++,(_=t.onFail)==null||_.call(t,r,y),yhe(x).then(()=>c()?void 0:p()).then(()=>{e?f(y):m()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(n==null||n(),i),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?m():p().then(m),i)}}var Kl,lJ,Wee=(lJ=class{constructor(){ye(this,Kl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),jP(this.gcTime)&&ae(this,Kl,Al.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(xc?1/0:5*60*1e3))}clearGcTimeout(){M(this,Kl)&&(Al.clearTimeout(M(this,Kl)),ae(this,Kl,void 0))}},Kl=new WeakMap,lJ),Gl,pd,ki,Yl,Mr,Dp,Ql,es,to,cJ,Nhe=(cJ=class extends Wee{constructor(e){super();ye(this,es);ye(this,Gl);ye(this,pd);ye(this,ki);ye(this,Yl);ye(this,Mr);ye(this,Dp);ye(this,Ql);ae(this,Ql,!1),ae(this,Dp,e.defaultOptions),this.setOptions(e.options),this.observers=[],ae(this,Yl,e.client),ae(this,ki,M(this,Yl).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ae(this,Gl,vF(this.options)),this.state=e.state??M(this,Gl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=M(this,Mr))==null?void 0:e.promise}setOptions(e){if(this.options={...M(this,Dp),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=vF(this.options);r.data!==void 0&&(this.setState(yF(r.data,r.dataUpdatedAt)),ae(this,Gl,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&M(this,ki).remove(this)}setData(e,r){const n=IP(this.state.data,e,this.options);return Ie(this,es,to).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){Ie(this,es,to).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,i;const r=(n=M(this,Mr))==null?void 0:n.promise;return(i=M(this,Mr))==null||i.cancel(e),r?r.then(dn).catch(dn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(M(this,Gl))}isActive(){return this.observers.some(e=>Oi(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===oM||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>qa(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!zee(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=M(this,Mr))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=M(this,Mr))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),M(this,ki).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(M(this,Mr)&&(M(this,Ql)?M(this,Mr).cancel({revert:!0}):M(this,Mr).cancelRetry()),this.scheduleGc()),M(this,ki).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ie(this,es,to).call(this,{type:"invalidate"})}async fetch(e,r){var l,c,u,h,f,p,m,g,v,y,b,w;if(this.state.fetchStatus!=="idle"&&((l=M(this,Mr))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(M(this,Mr))return M(this,Mr).continueRetry(),M(this,Mr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const x=this.observers.find(S=>S.options.queryFn);x&&this.setOptions(x.options)}const n=new AbortController,i=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(ae(this,Ql,!0),n.signal)})},s=()=>{const x=Vee(this.options,r),_=(()=>{const C={client:M(this,Yl),queryKey:this.queryKey,meta:this.meta};return i(C),C})();return ae(this,Ql,!1),this.options.persister?this.options.persister(x,_,this):x(_)},a=(()=>{const x={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:M(this,Yl),state:this.state,fetchFn:s};return i(x),x})();(c=this.options.behavior)==null||c.onFetch(a,this),ae(this,pd,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&Ie(this,es,to).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta}),ae(this,Mr,Hee({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,onCancel:x=>{x instanceof MP&&x.revert&&this.setState({...M(this,pd),fetchStatus:"idle"}),n.abort()},onFail:(x,S)=>{Ie(this,es,to).call(this,{type:"failed",failureCount:x,error:S})},onPause:()=>{Ie(this,es,to).call(this,{type:"pause"})},onContinue:()=>{Ie(this,es,to).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const x=await M(this,Mr).start();if(x===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(x),(p=(f=M(this,ki).config).onSuccess)==null||p.call(f,x,this),(g=(m=M(this,ki).config).onSettled)==null||g.call(m,x,this.state.error,this),x}catch(x){if(x instanceof MP){if(x.silent)return M(this,Mr).promise;if(x.revert){if(this.state.data===void 0)throw x;return this.state.data}}throw Ie(this,es,to).call(this,{type:"error",error:x}),(y=(v=M(this,ki).config).onError)==null||y.call(v,x,this),(w=(b=M(this,ki).config).onSettled)==null||w.call(b,this.state.data,x,this),x}finally{this.scheduleGc()}}},Gl=new WeakMap,pd=new WeakMap,ki=new WeakMap,Yl=new WeakMap,Mr=new WeakMap,Dp=new WeakMap,Ql=new WeakMap,es=new WeakSet,to=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Kee(n.data,this.options),fetchMeta:e.meta??null};case"success":const i={...n,...yF(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ae(this,pd,e.manual?i:void 0),i;case"error":const s=e.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),er.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),M(this,ki).notify({query:this,type:"updated",action:e})})},cJ);function Kee(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Uee(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function yF(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function vF(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var qn,et,$p,xn,Xl,md,oo,ga,Fp,gd,yd,Jl,Zl,ya,vd,ct,hf,AP,DP,$P,FP,qP,LP,BP,Gee,uJ,cM=(uJ=class extends Vc{constructor(e,r){super();ye(this,ct);ye(this,qn);ye(this,et);ye(this,$p);ye(this,xn);ye(this,Xl);ye(this,md);ye(this,oo);ye(this,ga);ye(this,Fp);ye(this,gd);ye(this,yd);ye(this,Jl);ye(this,Zl);ye(this,ya);ye(this,vd,new Set);this.options=r,ae(this,qn,e),ae(this,ga,null),ae(this,oo,RP()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(M(this,et).addObserver(this),bF(M(this,et),this.options)?Ie(this,ct,hf).call(this):this.updateResult(),Ie(this,ct,FP).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return zP(M(this,et),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return zP(M(this,et),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ie(this,ct,qP).call(this),Ie(this,ct,LP).call(this),M(this,et).removeObserver(this)}setOptions(e){const r=this.options,n=M(this,et);if(this.options=M(this,qn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Oi(this.options.enabled,M(this,et))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ie(this,ct,BP).call(this),M(this,et).setOptions(this.options),r._defaulted&&!dp(this.options,r)&&M(this,qn).getQueryCache().notify({type:"observerOptionsUpdated",query:M(this,et),observer:this});const i=this.hasListeners();i&&xF(M(this,et),n,this.options,r)&&Ie(this,ct,hf).call(this),this.updateResult(),i&&(M(this,et)!==n||Oi(this.options.enabled,M(this,et))!==Oi(r.enabled,M(this,et))||qa(this.options.staleTime,M(this,et))!==qa(r.staleTime,M(this,et)))&&Ie(this,ct,AP).call(this);const s=Ie(this,ct,DP).call(this);i&&(M(this,et)!==n||Oi(this.options.enabled,M(this,et))!==Oi(r.enabled,M(this,et))||s!==M(this,ya))&&Ie(this,ct,$P).call(this,s)}getOptimisticResult(e){const r=M(this,qn).getQueryCache().build(M(this,qn),e),n=this.createResult(r,e);return The(this,n)&&(ae(this,xn,n),ae(this,md,this.options),ae(this,Xl,M(this,et).state)),n}getCurrentResult(){return M(this,xn)}trackResult(e,r){return new Proxy(e,{get:(n,i)=>(this.trackProp(i),r==null||r(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&M(this,oo).status==="pending"&&M(this,oo).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,i))})}trackProp(e){M(this,vd).add(e)}getCurrentQuery(){return M(this,et)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=M(this,qn).defaultQueryOptions(e),n=M(this,qn).getQueryCache().build(M(this,qn),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(e){return Ie(this,ct,hf).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),M(this,xn)))}createResult(e,r){var N;const n=M(this,et),i=this.options,s=M(this,xn),o=M(this,Xl),a=M(this,md),c=e!==n?e.state:M(this,$p),{state:u}=e;let h={...u},f=!1,p;if(r._optimisticResults){const T=this.hasListeners(),j=!T&&bF(e,r),P=T&&xF(e,n,r,i);(j||P)&&(h={...h,...Kee(u.data,e.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:m,errorUpdatedAt:g,status:v}=h;p=h.data;let y=!1;if(r.placeholderData!==void 0&&p===void 0&&v==="pending"){let T;s!=null&&s.isPlaceholderData&&r.placeholderData===(a==null?void 0:a.placeholderData)?(T=s.data,y=!0):T=typeof r.placeholderData=="function"?r.placeholderData((N=M(this,yd))==null?void 0:N.state.data,M(this,yd)):r.placeholderData,T!==void 0&&(v="success",p=IP(s==null?void 0:s.data,T,r),f=!0)}if(r.select&&p!==void 0&&!y)if(s&&p===(o==null?void 0:o.data)&&r.select===M(this,Fp))p=M(this,gd);else try{ae(this,Fp,r.select),p=r.select(p),p=IP(s==null?void 0:s.data,p,r),ae(this,gd,p),ae(this,ga,null)}catch(T){ae(this,ga,T)}M(this,ga)&&(m=M(this,ga),p=M(this,gd),g=Date.now(),v="error");const b=h.fetchStatus==="fetching",w=v==="pending",x=v==="error",S=w&&b,_=p!==void 0,E={status:v,fetchStatus:h.fetchStatus,isPending:w,isSuccess:v==="success",isError:x,isInitialLoading:S,isLoading:S,data:p,dataUpdatedAt:h.dataUpdatedAt,error:m,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:b,isRefetching:b&&!w,isLoadingError:x&&!_,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:x&&_,isStale:uM(e,r),refetch:this.refetch,promise:M(this,oo),isEnabled:Oi(r.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const T=O=>{E.status==="error"?O.reject(E.error):E.data!==void 0&&O.resolve(E.data)},j=()=>{const O=ae(this,oo,E.promise=RP());T(O)},P=M(this,oo);switch(P.status){case"pending":e.queryHash===n.queryHash&&T(P);break;case"fulfilled":(E.status==="error"||E.data!==P.value)&&j();break;case"rejected":(E.status!=="error"||E.error!==P.reason)&&j();break}}return E}updateResult(){const e=M(this,xn),r=this.createResult(M(this,et),this.options);if(ae(this,Xl,M(this,et).state),ae(this,md,this.options),M(this,Xl).data!==void 0&&ae(this,yd,M(this,et)),dp(r,e))return;ae(this,xn,r);const n=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!M(this,vd).size)return!0;const o=new Set(s??M(this,vd));return this.options.throwOnError&&o.add("error"),Object.keys(M(this,xn)).some(a=>{const l=a;return M(this,xn)[l]!==e[l]&&o.has(l)})};Ie(this,ct,Gee).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ie(this,ct,FP).call(this)}},qn=new WeakMap,et=new WeakMap,$p=new WeakMap,xn=new WeakMap,Xl=new WeakMap,md=new WeakMap,oo=new WeakMap,ga=new WeakMap,Fp=new WeakMap,gd=new WeakMap,yd=new WeakMap,Jl=new WeakMap,Zl=new WeakMap,ya=new WeakMap,vd=new WeakMap,ct=new WeakSet,hf=function(e){Ie(this,ct,BP).call(this);let r=M(this,et).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(dn)),r},AP=function(){Ie(this,ct,qP).call(this);const e=qa(this.options.staleTime,M(this,et));if(xc||M(this,xn).isStale||!jP(e))return;const n=zee(M(this,xn).dataUpdatedAt,e)+1;ae(this,Jl,Al.setTimeout(()=>{M(this,xn).isStale||this.updateResult()},n))},DP=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(M(this,et)):this.options.refetchInterval)??!1},$P=function(e){Ie(this,ct,LP).call(this),ae(this,ya,e),!(xc||Oi(this.options.enabled,M(this,et))===!1||!jP(M(this,ya))||M(this,ya)===0)&&ae(this,Zl,Al.setInterval(()=>{(this.options.refetchIntervalInBackground||lM.isFocused())&&Ie(this,ct,hf).call(this)},M(this,ya)))},FP=function(){Ie(this,ct,AP).call(this),Ie(this,ct,$P).call(this,Ie(this,ct,DP).call(this))},qP=function(){M(this,Jl)&&(Al.clearTimeout(M(this,Jl)),ae(this,Jl,void 0))},LP=function(){M(this,Zl)&&(Al.clearInterval(M(this,Zl)),ae(this,Zl,void 0))},BP=function(){const e=M(this,qn).getQueryCache().build(M(this,qn),this.options);if(e===M(this,et))return;const r=M(this,et);ae(this,et,e),ae(this,$p,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},Gee=function(e){er.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(M(this,xn))}),M(this,qn).getQueryCache().notify({query:M(this,et),type:"observerResultsUpdated"})})},uJ);function khe(t,e){return Oi(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function bF(t,e){return khe(t,e)||t.state.data!==void 0&&zP(t,e,e.refetchOnMount)}function zP(t,e,r){if(Oi(e.enabled,t)!==!1&&qa(e.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&uM(t,e)}return!1}function xF(t,e,r,n){return(t!==e||Oi(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&uM(t,r)}function uM(t,e){return Oi(e.enabled,t)!==!1&&t.isStaleByTime(qa(e.staleTime,t))}function The(t,e){return!dp(t.getCurrentResult(),e)}function wF(t){return{onFetch:(e,r)=>{var u,h,f,p,m;const n=e.options,i=(f=(h=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,s=((p=e.state.data)==null?void 0:p.pages)||[],o=((m=e.state.data)==null?void 0:m.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let g=!1;const v=w=>{xhe(w,()=>e.signal,()=>g=!0)},y=Vee(e.options,e.fetchOptions),b=async(w,x,S)=>{if(g)return Promise.reject();if(x==null&&w.pages.length)return Promise.resolve(w);const C=(()=>{const j={client:e.client,queryKey:e.queryKey,pageParam:x,direction:S?"backward":"forward",meta:e.options.meta};return v(j),j})(),E=await y(C),{maxPages:N}=e.options,T=S?bhe:vhe;return{pages:T(w.pages,E,N),pageParams:T(w.pageParams,x,N)}};if(i&&s.length){const w=i==="backward",x=w?Ohe:SF,S={pages:s,pageParams:o},_=x(n,S);a=await b(S,_,w)}else{const w=t??s.length;do{const x=l===0?o[0]??n.initialPageParam:SF(n,a);if(l>0&&x==null)break;a=await b(a,x),l++}while(l<w)}return a};e.options.persister?e.fetchFn=()=>{var g,v;return(v=(g=e.options).persister)==null?void 0:v.call(g,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=c}}}function SF(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function Ohe(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var qp,ks,wn,ec,Ts,Jo,dJ,jhe=(dJ=class extends Wee{constructor(e){super();ye(this,Ts);ye(this,qp);ye(this,ks);ye(this,wn);ye(this,ec);ae(this,qp,e.client),this.mutationId=e.mutationId,ae(this,wn,e.mutationCache),ae(this,ks,[]),this.state=e.state||Yee(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){M(this,ks).includes(e)||(M(this,ks).push(e),this.clearGcTimeout(),M(this,wn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ae(this,ks,M(this,ks).filter(r=>r!==e)),this.scheduleGc(),M(this,wn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){M(this,ks).length||(this.state.status==="pending"?this.scheduleGc():M(this,wn).remove(this))}continue(){var e;return((e=M(this,ec))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,l,c,u,h,f,p,m,g,v,y,b,w,x,S,_,C,E,N;const r=()=>{Ie(this,Ts,Jo).call(this,{type:"continue"})},n={client:M(this,qp),meta:this.options.meta,mutationKey:this.options.mutationKey};ae(this,ec,Hee({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(T,j)=>{Ie(this,Ts,Jo).call(this,{type:"failed",failureCount:T,error:j})},onPause:()=>{Ie(this,Ts,Jo).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>M(this,wn).canRun(this)}));const i=this.state.status==="pending",s=!M(this,ec).canStart();try{if(i)r();else{Ie(this,Ts,Jo).call(this,{type:"pending",variables:e,isPaused:s}),await((a=(o=M(this,wn).config).onMutate)==null?void 0:a.call(o,e,this,n));const j=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e,n));j!==this.state.context&&Ie(this,Ts,Jo).call(this,{type:"pending",context:j,variables:e,isPaused:s})}const T=await M(this,ec).start();return await((h=(u=M(this,wn).config).onSuccess)==null?void 0:h.call(u,T,e,this.state.context,this,n)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,T,e,this.state.context,n)),await((g=(m=M(this,wn).config).onSettled)==null?void 0:g.call(m,T,null,this.state.variables,this.state.context,this,n)),await((y=(v=this.options).onSettled)==null?void 0:y.call(v,T,null,e,this.state.context,n)),Ie(this,Ts,Jo).call(this,{type:"success",data:T}),T}catch(T){try{await((w=(b=M(this,wn).config).onError)==null?void 0:w.call(b,T,e,this.state.context,this,n))}catch(j){Promise.reject(j)}try{await((S=(x=this.options).onError)==null?void 0:S.call(x,T,e,this.state.context,n))}catch(j){Promise.reject(j)}try{await((C=(_=M(this,wn).config).onSettled)==null?void 0:C.call(_,void 0,T,this.state.variables,this.state.context,this,n))}catch(j){Promise.reject(j)}try{await((N=(E=this.options).onSettled)==null?void 0:N.call(E,void 0,T,e,this.state.context,n))}catch(j){Promise.reject(j)}throw Ie(this,Ts,Jo).call(this,{type:"error",error:T}),T}finally{M(this,wn).runNext(this)}}},qp=new WeakMap,ks=new WeakMap,wn=new WeakMap,ec=new WeakMap,Ts=new WeakSet,Jo=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),er.batch(()=>{M(this,ks).forEach(n=>{n.onMutationUpdate(e)}),M(this,wn).notify({mutation:this,type:"updated",action:e})})},dJ);function Yee(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ao,ts,Lp,hJ,Phe=(hJ=class extends Vc{constructor(e={}){super();ye(this,ao);ye(this,ts);ye(this,Lp);this.config=e,ae(this,ao,new Set),ae(this,ts,new Map),ae(this,Lp,0)}build(e,r,n){const i=new jhe({client:e,mutationCache:this,mutationId:++Xm(this,Lp)._,options:e.defaultMutationOptions(r),state:n});return this.add(i),i}add(e){M(this,ao).add(e);const r=mg(e);if(typeof r=="string"){const n=M(this,ts).get(r);n?n.push(e):M(this,ts).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(M(this,ao).delete(e)){const r=mg(e);if(typeof r=="string"){const n=M(this,ts).get(r);if(n)if(n.length>1){const i=n.indexOf(e);i!==-1&&n.splice(i,1)}else n[0]===e&&M(this,ts).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=mg(e);if(typeof r=="string"){const n=M(this,ts).get(r),i=n==null?void 0:n.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var n;const r=mg(e);if(typeof r=="string"){const i=(n=M(this,ts).get(r))==null?void 0:n.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){er.batch(()=>{M(this,ao).forEach(e=>{this.notify({type:"removed",mutation:e})}),M(this,ao).clear(),M(this,ts).clear()})}getAll(){return Array.from(M(this,ao))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>pF(r,n))}findAll(e={}){return this.getAll().filter(r=>pF(e,r))}notify(e){er.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return er.batch(()=>Promise.all(e.map(r=>r.continue().catch(dn))))}},ao=new WeakMap,ts=new WeakMap,Lp=new WeakMap,hJ);function mg(t){var e;return(e=t.options.scope)==null?void 0:e.id}var lo,va,Ln,co,To,Zg,VP,fJ,Ihe=(fJ=class extends Vc{constructor(e,r){super();ye(this,To);ye(this,lo);ye(this,va);ye(this,Ln);ye(this,co);ae(this,lo,e),this.setOptions(r),this.bindMethods(),Ie(this,To,Zg).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var n;const r=this.options;this.options=M(this,lo).defaultMutationOptions(e),dp(this.options,r)||M(this,lo).getMutationCache().notify({type:"observerOptionsUpdated",mutation:M(this,Ln),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&wc(r.mutationKey)!==wc(this.options.mutationKey)?this.reset():((n=M(this,Ln))==null?void 0:n.state.status)==="pending"&&M(this,Ln).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=M(this,Ln))==null||e.removeObserver(this)}onMutationUpdate(e){Ie(this,To,Zg).call(this),Ie(this,To,VP).call(this,e)}getCurrentResult(){return M(this,va)}reset(){var e;(e=M(this,Ln))==null||e.removeObserver(this),ae(this,Ln,void 0),Ie(this,To,Zg).call(this),Ie(this,To,VP).call(this)}mutate(e,r){var n;return ae(this,co,r),(n=M(this,Ln))==null||n.removeObserver(this),ae(this,Ln,M(this,lo).getMutationCache().build(M(this,lo),this.options)),M(this,Ln).addObserver(this),M(this,Ln).execute(e)}},lo=new WeakMap,va=new WeakMap,Ln=new WeakMap,co=new WeakMap,To=new WeakSet,Zg=function(){var r;const e=((r=M(this,Ln))==null?void 0:r.state)??Yee();ae(this,va,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},VP=function(e){er.batch(()=>{var r,n,i,s,o,a,l,c;if(M(this,co)&&this.hasListeners()){const u=M(this,va).variables,h=M(this,va).context,f={client:M(this,lo),meta:this.options.meta,mutationKey:this.options.mutationKey};if((e==null?void 0:e.type)==="success"){try{(n=(r=M(this,co)).onSuccess)==null||n.call(r,e.data,u,h,f)}catch(p){Promise.reject(p)}try{(s=(i=M(this,co)).onSettled)==null||s.call(i,e.data,null,u,h,f)}catch(p){Promise.reject(p)}}else if((e==null?void 0:e.type)==="error"){try{(a=(o=M(this,co)).onError)==null||a.call(o,e.error,u,h,f)}catch(p){Promise.reject(p)}try{(c=(l=M(this,co)).onSettled)==null||c.call(l,void 0,e.error,u,h,f)}catch(p){Promise.reject(p)}}}this.listeners.forEach(u=>{u(M(this,va))})})},fJ);function _F(t,e){const r=new Set(e);return t.filter(n=>!r.has(n))}function Rhe(t,e,r){const n=t.slice(0);return n[e]=r,n}var bd,ai,xd,wd,Ti,ba,Bp,zp,Vp,rn,UP,HP,WP,KP,GP,pJ,Mhe=(pJ=class extends Vc{constructor(e,r,n){super();ye(this,rn);ye(this,bd);ye(this,ai);ye(this,xd);ye(this,wd);ye(this,Ti);ye(this,ba);ye(this,Bp);ye(this,zp);ye(this,Vp,[]);ae(this,bd,e),ae(this,wd,n),ae(this,xd,[]),ae(this,Ti,[]),ae(this,ai,[]),this.setQueries(r)}onSubscribe(){this.listeners.size===1&&M(this,Ti).forEach(e=>{e.subscribe(r=>{Ie(this,rn,KP).call(this,e,r)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,M(this,Ti).forEach(e=>{e.destroy()})}setQueries(e,r){ae(this,xd,e),ae(this,wd,r),er.batch(()=>{const n=M(this,Ti),i=Ie(this,rn,WP).call(this,M(this,xd));i.forEach(h=>h.observer.setOptions(h.defaultedQueryOptions));const s=i.map(h=>h.observer),o=s.map(h=>h.getCurrentResult()),a=n.length!==s.length,l=s.some((h,f)=>h!==n[f]),c=a||l,u=c?!0:o.some((h,f)=>{const p=M(this,ai)[f];return!p||!dp(h,p)});!c&&!u||(c&&(ae(this,Vp,i),ae(this,Ti,s)),ae(this,ai,o),this.hasListeners()&&(c&&(_F(n,s).forEach(h=>{h.destroy()}),_F(s,n).forEach(h=>{h.subscribe(f=>{Ie(this,rn,KP).call(this,h,f)})})),Ie(this,rn,GP).call(this)))})}getCurrentResult(){return M(this,ai)}getQueries(){return M(this,Ti).map(e=>e.getCurrentQuery())}getObservers(){return M(this,Ti)}getOptimisticResult(e,r){const n=Ie(this,rn,WP).call(this,e),i=n.map(s=>s.observer.getOptimisticResult(s.defaultedQueryOptions));return[i,s=>Ie(this,rn,HP).call(this,s??i,r),()=>Ie(this,rn,UP).call(this,i,n)]}},bd=new WeakMap,ai=new WeakMap,xd=new WeakMap,wd=new WeakMap,Ti=new WeakMap,ba=new WeakMap,Bp=new WeakMap,zp=new WeakMap,Vp=new WeakMap,rn=new WeakSet,UP=function(e,r){return r.map((n,i)=>{const s=e[i];return n.defaultedQueryOptions.notifyOnChangeProps?s:n.observer.trackResult(s,o=>{r.forEach(a=>{a.observer.trackProp(o)})})})},HP=function(e,r){return r?((!M(this,ba)||M(this,ai)!==M(this,zp)||r!==M(this,Bp))&&(ae(this,Bp,r),ae(this,zp,M(this,ai)),ae(this,ba,sM(M(this,ba),r(e)))),M(this,ba)):e},WP=function(e){const r=new Map;M(this,Ti).forEach(i=>{const s=i.options.queryHash;if(!s)return;const o=r.get(s);o?o.push(i):r.set(s,[i])});const n=[];return e.forEach(i=>{var l;const s=M(this,bd).defaultQueryOptions(i),a=((l=r.get(s.queryHash))==null?void 0:l.shift())??new cM(M(this,bd),s);n.push({defaultedQueryOptions:s,observer:a})}),n},KP=function(e,r){const n=M(this,Ti).indexOf(e);n!==-1&&(ae(this,ai,Rhe(M(this,ai),n,r)),Ie(this,rn,GP).call(this))},GP=function(){var e;if(this.hasListeners()){const r=M(this,ba),n=Ie(this,rn,UP).call(this,M(this,ai),M(this,Vp)),i=Ie(this,rn,HP).call(this,n,(e=M(this,wd))==null?void 0:e.combine);r!==i&&er.batch(()=>{this.listeners.forEach(s=>{s(M(this,ai))})})}},pJ),Os,mJ,Ahe=(mJ=class extends Vc{constructor(e={}){super();ye(this,Os);this.config=e,ae(this,Os,new Map)}build(e,r,n){const i=r.queryKey,s=r.queryHash??iM(i,r);let o=this.get(s);return o||(o=new Nhe({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){M(this,Os).has(e.queryHash)||(M(this,Os).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=M(this,Os).get(e.queryHash);r&&(e.destroy(),r===e&&M(this,Os).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){er.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return M(this,Os).get(e)}getAll(){return[...M(this,Os).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>fF(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>fF(e,n)):r}notify(e){er.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){er.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){er.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Os=new WeakMap,mJ),Yt,xa,wa,Sd,_d,Sa,Ed,Cd,gJ,Dhe=(gJ=class{constructor(t={}){ye(this,Yt);ye(this,xa);ye(this,wa);ye(this,Sd);ye(this,_d);ye(this,Sa);ye(this,Ed);ye(this,Cd);ae(this,Yt,t.queryCache||new Ahe),ae(this,xa,t.mutationCache||new Phe),ae(this,wa,t.defaultOptions||{}),ae(this,Sd,new Map),ae(this,_d,new Map),ae(this,Sa,0)}mount(){Xm(this,Sa)._++,M(this,Sa)===1&&(ae(this,Ed,lM.subscribe(async t=>{t&&(await this.resumePausedMutations(),M(this,Yt).onFocus())})),ae(this,Cd,qy.subscribe(async t=>{t&&(await this.resumePausedMutations(),M(this,Yt).onOnline())})))}unmount(){var t,e;Xm(this,Sa)._--,M(this,Sa)===0&&((t=M(this,Ed))==null||t.call(this),ae(this,Ed,void 0),(e=M(this,Cd))==null||e.call(this),ae(this,Cd,void 0))}isFetching(t){return M(this,Yt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return M(this,xa).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=M(this,Yt).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=M(this,Yt).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(qa(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return M(this,Yt).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),i=M(this,Yt).get(n.queryHash),s=i==null?void 0:i.state.data,o=mhe(e,s);if(o!==void 0)return M(this,Yt).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(t,e,r){return er.batch(()=>M(this,Yt).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=M(this,Yt).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=M(this,Yt);er.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=M(this,Yt);return er.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=er.batch(()=>M(this,Yt).findAll(t).map(i=>i.cancel(r)));return Promise.all(n).then(dn).catch(dn)}invalidateQueries(t,e={}){return er.batch(()=>(M(this,Yt).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=er.batch(()=>M(this,Yt).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,r);return r.throwOnError||(s=s.catch(dn)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(dn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=M(this,Yt).build(this,e);return r.isStaleByTime(qa(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(dn).catch(dn)}fetchInfiniteQuery(t){return t.behavior=wF(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(dn).catch(dn)}ensureInfiniteQueryData(t){return t.behavior=wF(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return qy.isOnline()?M(this,xa).resumePausedMutations():Promise.resolve()}getQueryCache(){return M(this,Yt)}getMutationCache(){return M(this,xa)}getDefaultOptions(){return M(this,wa)}setDefaultOptions(t){ae(this,wa,t)}setQueryDefaults(t,e){M(this,Sd).set(wc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...M(this,Sd).values()],r={};return e.forEach(n=>{up(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){M(this,_d).set(wc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...M(this,_d).values()],r={};return e.forEach(n=>{up(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...M(this,wa).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=iM(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===oM&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...M(this,wa).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){M(this,Yt).clear(),M(this,xa).clear()}},Yt=new WeakMap,xa=new WeakMap,wa=new WeakMap,Sd=new WeakMap,_d=new WeakMap,Sa=new WeakMap,Ed=new WeakMap,Cd=new WeakMap,gJ),Qee=k.createContext(void 0),vt=t=>{const e=k.useContext(Qee);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},$he=({client:t,children:e})=>(k.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),d.jsx(Qee.Provider,{value:t,children:e})),Xee=k.createContext(!1),Jee=()=>k.useContext(Xee);Xee.Provider;function Fhe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var qhe=k.createContext(Fhe()),Zee=()=>k.useContext(qhe),ete=(t,e,r)=>{const n=r!=null&&r.state.error&&typeof t.throwOnError=="function"?aM(t.throwOnError,[r.state.error,r]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||n)&&(e.isReset()||(t.retryOnMount=!1))},tte=t=>{k.useEffect(()=>{t.clearReset()},[t])},rte=({result:t,errorResetBoundary:e,throwOnError:r,query:n,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&(i&&t.data===void 0||aM(r,[t.error,n])),nte=t=>{if(t.suspense){const r=i=>i==="static"?i:Math.max(i??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...i)=>r(n(...i)):r(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},ite=(t,e)=>t.isLoading&&t.isFetching&&!e,YP=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Ly=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function QP({queries:t,...e},r){const n=vt(),i=Jee(),s=Zee(),o=k.useMemo(()=>t.map(g=>{const v=n.defaultQueryOptions(g);return v._optimisticResults=i?"isRestoring":"optimistic",v}),[t,n,i]);o.forEach(g=>{nte(g);const v=n.getQueryCache().get(g.queryHash);ete(g,s,v)}),tte(s);const[a]=k.useState(()=>new Mhe(n,o,e)),[l,c,u]=a.getOptimisticResult(o,e.combine),h=!i&&e.subscribed!==!1;k.useSyncExternalStore(k.useCallback(g=>h?a.subscribe(er.batchCalls(g)):dn,[a,h]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),k.useEffect(()=>{a.setQueries(o,e)},[o,e,a]);const p=l.some((g,v)=>YP(o[v],g))?l.flatMap((g,v)=>{const y=o[v];if(y){const b=new cM(n,y);if(YP(y,g))return Ly(y,b,s);ite(g,i)&&Ly(y,b,s)}return[]}):[];if(p.length>0)throw Promise.all(p);const m=l.find((g,v)=>{const y=o[v];return y&&rte({result:g,errorResetBoundary:s,throwOnError:y.throwOnError,query:n.getQueryCache().get(y.queryHash),suspense:y.suspense})});if(m!=null&&m.error)throw m.error;return c(u())}function Lhe(t,e,r){var f,p,m,g;const n=Jee(),i=Zee(),s=vt(),o=s.defaultQueryOptions(t);(p=(f=s.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||p.call(f,o);const a=s.getQueryCache().get(o.queryHash);o._optimisticResults=n?"isRestoring":"optimistic",nte(o),ete(o,i,a),tte(i);const l=!s.getQueryCache().get(o.queryHash),[c]=k.useState(()=>new e(s,o)),u=c.getOptimisticResult(o),h=!n&&t.subscribed!==!1;if(k.useSyncExternalStore(k.useCallback(v=>{const y=h?c.subscribe(er.batchCalls(v)):dn;return c.updateResult(),y},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),k.useEffect(()=>{c.setOptions(o)},[o,c]),YP(o,u))throw Ly(o,c,i);if(rte({result:u,errorResetBoundary:i,throwOnError:o.throwOnError,query:a,suspense:o.suspense}))throw u.error;if((g=(m=s.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||g.call(m,o,u),o.experimental_prefetchInRender&&!xc&&ite(u,n)){const v=l?Ly(o,c,i):a==null?void 0:a.promise;v==null||v.catch(dn).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function lt(t,e){return Lhe(t,cM)}function tt(t,e){const r=vt(),[n]=k.useState(()=>new Ihe(r,t));k.useEffect(()=>{n.setOptions(t)},[n,t]);const i=k.useSyncExternalStore(k.useCallback(o=>n.subscribe(er.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),s=k.useCallback((o,a)=>{n.mutate(o,a).catch(dn)},[n]);if(i.error&&aM(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}function dM(){const t=window.prmConfig||{};return k.useMemo(()=>({isLoggedIn:t.isLoggedIn||!1,userId:t.userId||null,loginUrl:t.loginUrl||"/wp-login.php",logoutUrl:t.logoutUrl||"/wp-login.php?action=logout",isLoading:!1}),[t.isLoggedIn,t.userId,t.loginUrl,t.logoutUrl])}function ste(t,e){return function(){return t.apply(e,arguments)}}const{toString:Bhe}=Object.prototype,{getPrototypeOf:hM}=Object,{iterator:x0,toStringTag:ote}=Symbol,w0=(t=>e=>{const r=Bhe.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),gs=t=>(t=t.toLowerCase(),e=>w0(e)===t),S0=t=>e=>typeof e===t,{isArray:oh}=Array,Md=S0("undefined");function Yp(t){return t!==null&&!Md(t)&&t.constructor!==null&&!Md(t.constructor)&&Jn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const ate=gs("ArrayBuffer");function zhe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&ate(t.buffer),e}const Vhe=S0("string"),Jn=S0("function"),lte=S0("number"),Qp=t=>t!==null&&typeof t=="object",Uhe=t=>t===!0||t===!1,ey=t=>{if(w0(t)!=="object")return!1;const e=hM(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(ote in t)&&!(x0 in t)},Hhe=t=>{if(!Qp(t)||Yp(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Whe=gs("Date"),Khe=gs("File"),Ghe=gs("Blob"),Yhe=gs("FileList"),Qhe=t=>Qp(t)&&Jn(t.pipe),Xhe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Jn(t.append)&&((e=w0(t))==="formdata"||e==="object"&&Jn(t.toString)&&t.toString()==="[object FormData]"))},Jhe=gs("URLSearchParams"),[Zhe,efe,tfe,rfe]=["ReadableStream","Request","Response","Headers"].map(gs),nfe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Xp(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),oh(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{if(Yp(t))return;const s=r?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(n=0;n<o;n++)a=s[n],e.call(null,t[a],a,t)}}function cte(t,e){if(Yp(t))return null;e=e.toLowerCase();const r=Object.keys(t);let n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}const Dl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ute=t=>!Md(t)&&t!==Dl;function XP(){const{caseless:t,skipUndefined:e}=ute(this)&&this||{},r={},n=(i,s)=>{const o=t&&cte(r,s)||s;ey(r[o])&&ey(i)?r[o]=XP(r[o],i):ey(i)?r[o]=XP({},i):oh(i)?r[o]=i.slice():(!e||!Md(i))&&(r[o]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Xp(arguments[i],n);return r}const ife=(t,e,r,{allOwnKeys:n}={})=>(Xp(e,(i,s)=>{r&&Jn(i)?t[s]=ste(i,r):t[s]=i},{allOwnKeys:n}),t),sfe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),ofe=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},afe=(t,e,r,n)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!n||n(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=r!==!1&&hM(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},lfe=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},cfe=t=>{if(!t)return null;if(oh(t))return t;let e=t.length;if(!lte(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},ufe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&hM(Uint8Array)),dfe=(t,e)=>{const n=(t&&t[x0]).call(t);let i;for(;(i=n.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},hfe=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},ffe=gs("HTMLFormElement"),pfe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),EF=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),mfe=gs("RegExp"),dte=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};Xp(r,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(n[s]=o||i)}),Object.defineProperties(t,n)},gfe=t=>{dte(t,(e,r)=>{if(Jn(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(Jn(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},yfe=(t,e)=>{const r={},n=i=>{i.forEach(s=>{r[s]=!0})};return oh(t)?n(t):n(String(t).split(e)),r},vfe=()=>{},bfe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function xfe(t){return!!(t&&Jn(t.append)&&t[ote]==="FormData"&&t[x0])}const wfe=t=>{const e=new Array(10),r=(n,i)=>{if(Qp(n)){if(e.indexOf(n)>=0)return;if(Yp(n))return n;if(!("toJSON"in n)){e[i]=n;const s=oh(n)?[]:{};return Xp(n,(o,a)=>{const l=r(o,i+1);!Md(l)&&(s[a]=l)}),e[i]=void 0,s}}return n};return r(t,0)},Sfe=gs("AsyncFunction"),_fe=t=>t&&(Qp(t)||Jn(t))&&Jn(t.then)&&Jn(t.catch),hte=((t,e)=>t?setImmediate:e?((r,n)=>(Dl.addEventListener("message",({source:i,data:s})=>{i===Dl&&s===r&&n.length&&n.shift()()},!1),i=>{n.push(i),Dl.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Jn(Dl.postMessage)),Efe=typeof queueMicrotask<"u"?queueMicrotask.bind(Dl):typeof process<"u"&&process.nextTick||hte,Cfe=t=>t!=null&&Jn(t[x0]),V={isArray:oh,isArrayBuffer:ate,isBuffer:Yp,isFormData:Xhe,isArrayBufferView:zhe,isString:Vhe,isNumber:lte,isBoolean:Uhe,isObject:Qp,isPlainObject:ey,isEmptyObject:Hhe,isReadableStream:Zhe,isRequest:efe,isResponse:tfe,isHeaders:rfe,isUndefined:Md,isDate:Whe,isFile:Khe,isBlob:Ghe,isRegExp:mfe,isFunction:Jn,isStream:Qhe,isURLSearchParams:Jhe,isTypedArray:ufe,isFileList:Yhe,forEach:Xp,merge:XP,extend:ife,trim:nfe,stripBOM:sfe,inherits:ofe,toFlatObject:afe,kindOf:w0,kindOfTest:gs,endsWith:lfe,toArray:cfe,forEachEntry:dfe,matchAll:hfe,isHTMLForm:ffe,hasOwnProperty:EF,hasOwnProp:EF,reduceDescriptors:dte,freezeMethods:gfe,toObjectSet:yfe,toCamelCase:pfe,noop:vfe,toFiniteNumber:bfe,findKey:cte,global:Dl,isContextDefined:ute,isSpecCompliantForm:xfe,toJSONObject:wfe,isAsyncFn:Sfe,isThenable:_fe,setImmediate:hte,asap:Efe,isIterable:Cfe};function ze(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}V.inherits(ze,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:V.toJSONObject(this.config),code:this.code,status:this.status}}});const fte=ze.prototype,pte={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{pte[t]={value:t}});Object.defineProperties(ze,pte);Object.defineProperty(fte,"isAxiosError",{value:!0});ze.from=(t,e,r,n,i,s)=>{const o=Object.create(fte);V.toFlatObject(t,o,function(u){return u!==Error.prototype},c=>c!=="isAxiosError");const a=t&&t.message?t.message:"Error",l=e==null&&t?t.code:e;return ze.call(o,a,l,r,n,i),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",s&&Object.assign(o,s),o};const Nfe=null;function JP(t){return V.isPlainObject(t)||V.isArray(t)}function mte(t){return V.endsWith(t,"[]")?t.slice(0,-2):t}function CF(t,e,r){return t?t.concat(e).map(function(i,s){return i=mte(i),!r&&s?"["+i+"]":i}).join(r?".":""):e}function kfe(t){return V.isArray(t)&&!t.some(JP)}const Tfe=V.toFlatObject(V,{},null,function(e){return/^is[A-Z]/.test(e)});function _0(t,e,r){if(!V.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=V.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,v){return!V.isUndefined(v[g])});const n=r.metaTokens,i=r.visitor||u,s=r.dots,o=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&V.isSpecCompliantForm(e);if(!V.isFunction(i))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(V.isDate(m))return m.toISOString();if(V.isBoolean(m))return m.toString();if(!l&&V.isBlob(m))throw new ze("Blob is not supported. Use a Buffer instead.");return V.isArrayBuffer(m)||V.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function u(m,g,v){let y=m;if(m&&!v&&typeof m=="object"){if(V.endsWith(g,"{}"))g=n?g:g.slice(0,-2),m=JSON.stringify(m);else if(V.isArray(m)&&kfe(m)||(V.isFileList(m)||V.endsWith(g,"[]"))&&(y=V.toArray(m)))return g=mte(g),y.forEach(function(w,x){!(V.isUndefined(w)||w===null)&&e.append(o===!0?CF([g],x,s):o===null?g:g+"[]",c(w))}),!1}return JP(m)?!0:(e.append(CF(v,g,s),c(m)),!1)}const h=[],f=Object.assign(Tfe,{defaultVisitor:u,convertValue:c,isVisitable:JP});function p(m,g){if(!V.isUndefined(m)){if(h.indexOf(m)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(m),V.forEach(m,function(y,b){(!(V.isUndefined(y)||y===null)&&i.call(e,y,V.isString(b)?b.trim():b,g,f))===!0&&p(y,g?g.concat(b):[b])}),h.pop()}}if(!V.isObject(t))throw new TypeError("data must be an object");return p(t),e}function NF(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function fM(t,e){this._pairs=[],t&&_0(t,this,e)}const gte=fM.prototype;gte.append=function(e,r){this._pairs.push([e,r])};gte.toString=function(e){const r=e?function(n){return e.call(this,n,NF)}:NF;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function Ofe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function yte(t,e,r){if(!e)return t;const n=r&&r.encode||Ofe;V.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let s;if(i?s=i(e,r):s=V.isURLSearchParams(e)?e.toString():new fM(e,r).toString(n),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class kF{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){V.forEach(this.handlers,function(n){n!==null&&e(n)})}}const vte={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},jfe=typeof URLSearchParams<"u"?URLSearchParams:fM,Pfe=typeof FormData<"u"?FormData:null,Ife=typeof Blob<"u"?Blob:null,Rfe={isBrowser:!0,classes:{URLSearchParams:jfe,FormData:Pfe,Blob:Ife},protocols:["http","https","file","blob","url","data"]},pM=typeof window<"u"&&typeof document<"u",ZP=typeof navigator=="object"&&navigator||void 0,Mfe=pM&&(!ZP||["ReactNative","NativeScript","NS"].indexOf(ZP.product)<0),Afe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Dfe=pM&&window.location.href||"http://localhost",$fe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:pM,hasStandardBrowserEnv:Mfe,hasStandardBrowserWebWorkerEnv:Afe,navigator:ZP,origin:Dfe},Symbol.toStringTag,{value:"Module"})),fn={...$fe,...Rfe};function Ffe(t,e){return _0(t,new fn.classes.URLSearchParams,{visitor:function(r,n,i,s){return fn.isNode&&V.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function qfe(t){return V.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Lfe(t){const e={},r=Object.keys(t);let n;const i=r.length;let s;for(n=0;n<i;n++)s=r[n],e[s]=t[s];return e}function bte(t){function e(r,n,i,s){let o=r[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=r.length;return o=!o&&V.isArray(i)?i.length:o,l?(V.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!a):((!i[o]||!V.isObject(i[o]))&&(i[o]=[]),e(r,n,i[o],s)&&V.isArray(i[o])&&(i[o]=Lfe(i[o])),!a)}if(V.isFormData(t)&&V.isFunction(t.entries)){const r={};return V.forEachEntry(t,(n,i)=>{e(qfe(n),i,r,0)}),r}return null}function Bfe(t,e,r){if(V.isString(t))try{return(e||JSON.parse)(t),V.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const Jp={transitional:vte,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,s=V.isObject(e);if(s&&V.isHTMLForm(e)&&(e=new FormData(e)),V.isFormData(e))return i?JSON.stringify(bte(e)):e;if(V.isArrayBuffer(e)||V.isBuffer(e)||V.isStream(e)||V.isFile(e)||V.isBlob(e)||V.isReadableStream(e))return e;if(V.isArrayBufferView(e))return e.buffer;if(V.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Ffe(e,this.formSerializer).toString();if((a=V.isFileList(e))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return _0(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(r.setContentType("application/json",!1),Bfe(e)):e}],transformResponse:[function(e){const r=this.transitional||Jp.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(V.isResponse(e)||V.isReadableStream(e))return e;if(e&&V.isString(e)&&(n&&!this.responseType||i)){const o=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?ze.from(a,ze.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fn.classes.FormData,Blob:fn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};V.forEach(["delete","get","head","post","put","patch"],t=>{Jp.headers[t]={}});const zfe=V.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Vfe=t=>{const e={};let r,n,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),r=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!r||e[r]&&zfe[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},TF=Symbol("internals");function Yh(t){return t&&String(t).trim().toLowerCase()}function ty(t){return t===!1||t==null?t:V.isArray(t)?t.map(ty):String(t)}function Ufe(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const Hfe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function f1(t,e,r,n,i){if(V.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!V.isString(e)){if(V.isString(n))return e.indexOf(n)!==-1;if(V.isRegExp(n))return n.test(e)}}function Wfe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function Kfe(t,e){const r=V.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,s,o){return this[n].call(this,e,i,s,o)},configurable:!0})})}let Zn=class{constructor(e){e&&this.set(e)}set(e,r,n){const i=this;function s(a,l,c){const u=Yh(l);if(!u)throw new Error("header name must be a non-empty string");const h=V.findKey(i,u);(!h||i[h]===void 0||c===!0||c===void 0&&i[h]!==!1)&&(i[h||l]=ty(a))}const o=(a,l)=>V.forEach(a,(c,u)=>s(c,u,l));if(V.isPlainObject(e)||e instanceof this.constructor)o(e,r);else if(V.isString(e)&&(e=e.trim())&&!Hfe(e))o(Vfe(e),r);else if(V.isObject(e)&&V.isIterable(e)){let a={},l,c;for(const u of e){if(!V.isArray(u))throw TypeError("Object iterator must return a key-value pair");a[c=u[0]]=(l=a[c])?V.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}o(a,r)}else e!=null&&s(r,e,n);return this}get(e,r){if(e=Yh(e),e){const n=V.findKey(this,e);if(n){const i=this[n];if(!r)return i;if(r===!0)return Ufe(i);if(V.isFunction(r))return r.call(this,i,n);if(V.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=Yh(e),e){const n=V.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||f1(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let i=!1;function s(o){if(o=Yh(o),o){const a=V.findKey(n,o);a&&(!r||f1(n,n[a],a,r))&&(delete n[a],i=!0)}}return V.isArray(e)?e.forEach(s):s(e),i}clear(e){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const s=r[n];(!e||f1(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const r=this,n={};return V.forEach(this,(i,s)=>{const o=V.findKey(n,s);if(o){r[o]=ty(i),delete r[s];return}const a=e?Wfe(s):String(s).trim();a!==s&&delete r[s],r[a]=ty(i),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return V.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&V.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[TF]=this[TF]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Yh(o);n[a]||(Kfe(i,o),n[a]=!0)}return V.isArray(e)?e.forEach(s):s(e),this}};Zn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);V.reduceDescriptors(Zn.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});V.freezeMethods(Zn);function p1(t,e){const r=this||Jp,n=e||r,i=Zn.from(n.headers);let s=n.data;return V.forEach(t,function(a){s=a.call(r,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function xte(t){return!!(t&&t.__CANCEL__)}function ah(t,e,r){ze.call(this,t??"canceled",ze.ERR_CANCELED,e,r),this.name="CanceledError"}V.inherits(ah,ze,{__CANCEL__:!0});function wte(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new ze("Request failed with status code "+r.status,[ze.ERR_BAD_REQUEST,ze.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Gfe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Yfe(t,e){t=t||10;const r=new Array(t),n=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=n[s];o||(o=c),r[i]=l,n[i]=c;let h=s,f=0;for(;h!==i;)f+=r[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const p=u&&c-u;return p?Math.round(f*1e3/p):void 0}}function Qfe(t,e){let r=0,n=1e3/e,i,s;const o=(c,u=Date.now())=>{r=u,i=null,s&&(clearTimeout(s),s=null),t(...c)};return[(...c)=>{const u=Date.now(),h=u-r;h>=n?o(c,u):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},n-h)))},()=>i&&o(i)]}const By=(t,e,r=3)=>{let n=0;const i=Yfe(50,250);return Qfe(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-n,c=i(l),u=o<=a;n=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},r)},OF=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},jF=t=>(...e)=>V.asap(()=>t(...e)),Xfe=fn.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,fn.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(fn.origin),fn.navigator&&/(msie|trident)/i.test(fn.navigator.userAgent)):()=>!0,Jfe=fn.hasStandardBrowserEnv?{write(t,e,r,n,i,s,o){if(typeof document>"u")return;const a=[`${t}=${encodeURIComponent(e)}`];V.isNumber(r)&&a.push(`expires=${new Date(r).toUTCString()}`),V.isString(n)&&a.push(`path=${n}`),V.isString(i)&&a.push(`domain=${i}`),s===!0&&a.push("secure"),V.isString(o)&&a.push(`SameSite=${o}`),document.cookie=a.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Zfe(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function epe(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Ste(t,e,r){let n=!Zfe(e);return t&&(n||r==!1)?epe(t,e):e}const PF=t=>t instanceof Zn?{...t}:t;function Sc(t,e){e=e||{};const r={};function n(c,u,h,f){return V.isPlainObject(c)&&V.isPlainObject(u)?V.merge.call({caseless:f},c,u):V.isPlainObject(u)?V.merge({},u):V.isArray(u)?u.slice():u}function i(c,u,h,f){if(V.isUndefined(u)){if(!V.isUndefined(c))return n(void 0,c,h,f)}else return n(c,u,h,f)}function s(c,u){if(!V.isUndefined(u))return n(void 0,u)}function o(c,u){if(V.isUndefined(u)){if(!V.isUndefined(c))return n(void 0,c)}else return n(void 0,u)}function a(c,u,h){if(h in e)return n(c,u);if(h in t)return n(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u,h)=>i(PF(c),PF(u),h,!0)};return V.forEach(Object.keys({...t,...e}),function(u){const h=l[u]||i,f=h(t[u],e[u],u);V.isUndefined(f)&&h!==a||(r[u]=f)}),r}const _te=t=>{const e=Sc({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;if(e.headers=o=Zn.from(o),e.url=yte(Ste(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),V.isFormData(r)){if(fn.hasStandardBrowserEnv||fn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(V.isFunction(r.getHeaders)){const l=r.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([u,h])=>{c.includes(u.toLowerCase())&&o.set(u,h)})}}if(fn.hasStandardBrowserEnv&&(n&&V.isFunction(n)&&(n=n(e)),n||n!==!1&&Xfe(e.url))){const l=i&&s&&Jfe.read(s);l&&o.set(i,l)}return e},tpe=typeof XMLHttpRequest<"u",rpe=tpe&&function(t){return new Promise(function(r,n){const i=_te(t);let s=i.data;const o=Zn.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,u,h,f,p,m;function g(){p&&p(),m&&m(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let v=new XMLHttpRequest;v.open(i.method.toUpperCase(),i.url,!0),v.timeout=i.timeout;function y(){if(!v)return;const w=Zn.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),S={data:!a||a==="text"||a==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:w,config:t,request:v};wte(function(C){r(C),g()},function(C){n(C),g()},S),v=null}"onloadend"in v?v.onloadend=y:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(y)},v.onabort=function(){v&&(n(new ze("Request aborted",ze.ECONNABORTED,t,v)),v=null)},v.onerror=function(x){const S=x&&x.message?x.message:"Network Error",_=new ze(S,ze.ERR_NETWORK,t,v);_.event=x||null,n(_),v=null},v.ontimeout=function(){let x=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const S=i.transitional||vte;i.timeoutErrorMessage&&(x=i.timeoutErrorMessage),n(new ze(x,S.clarifyTimeoutError?ze.ETIMEDOUT:ze.ECONNABORTED,t,v)),v=null},s===void 0&&o.setContentType(null),"setRequestHeader"in v&&V.forEach(o.toJSON(),function(x,S){v.setRequestHeader(S,x)}),V.isUndefined(i.withCredentials)||(v.withCredentials=!!i.withCredentials),a&&a!=="json"&&(v.responseType=i.responseType),c&&([f,m]=By(c,!0),v.addEventListener("progress",f)),l&&v.upload&&([h,p]=By(l),v.upload.addEventListener("progress",h),v.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(u=w=>{v&&(n(!w||w.type?new ah(null,t,v):w),v.abort(),v=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const b=Gfe(i.url);if(b&&fn.protocols.indexOf(b)===-1){n(new ze("Unsupported protocol "+b+":",ze.ERR_BAD_REQUEST,t));return}v.send(s||null)})},npe=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,i;const s=function(c){if(!i){i=!0,a();const u=c instanceof Error?c:this.reason;n.abort(u instanceof ze?u:new ah(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,s(new ze(`timeout ${e} of ms exceeded`,ze.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:l}=n;return l.unsubscribe=()=>V.asap(a),l}},ipe=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,i;for(;n<r;)i=n+e,yield t.slice(n,i),n=i},spe=async function*(t,e){for await(const r of ope(t))yield*ipe(r,e)},ope=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},IF=(t,e,r,n)=>{const i=spe(t,e);let s=0,o,a=l=>{o||(o=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await i.next();if(c){a(),l.close();return}let h=u.byteLength;if(r){let f=s+=h;r(f)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},RF=64*1024,{isFunction:gg}=V,ape=(({Request:t,Response:e})=>({Request:t,Response:e}))(V.global),{ReadableStream:MF,TextEncoder:AF}=V.global,DF=(t,...e)=>{try{return!!t(...e)}catch{return!1}},lpe=t=>{t=V.merge.call({skipUndefined:!0},ape,t);const{fetch:e,Request:r,Response:n}=t,i=e?gg(e):typeof fetch=="function",s=gg(r),o=gg(n);if(!i)return!1;const a=i&&gg(MF),l=i&&(typeof AF=="function"?(m=>g=>m.encode(g))(new AF):async m=>new Uint8Array(await new r(m).arrayBuffer())),c=s&&a&&DF(()=>{let m=!1;const g=new r(fn.origin,{body:new MF,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!g}),u=o&&a&&DF(()=>V.isReadableStream(new n("").body)),h={stream:u&&(m=>m.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!h[m]&&(h[m]=(g,v)=>{let y=g&&g[m];if(y)return y.call(g);throw new ze(`Response type '${m}' is not supported`,ze.ERR_NOT_SUPPORT,v)})});const f=async m=>{if(m==null)return 0;if(V.isBlob(m))return m.size;if(V.isSpecCompliantForm(m))return(await new r(fn.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(V.isArrayBufferView(m)||V.isArrayBuffer(m))return m.byteLength;if(V.isURLSearchParams(m)&&(m=m+""),V.isString(m))return(await l(m)).byteLength},p=async(m,g)=>{const v=V.toFiniteNumber(m.getContentLength());return v??f(g)};return async m=>{let{url:g,method:v,data:y,signal:b,cancelToken:w,timeout:x,onDownloadProgress:S,onUploadProgress:_,responseType:C,headers:E,withCredentials:N="same-origin",fetchOptions:T}=_te(m),j=e||fetch;C=C?(C+"").toLowerCase():"text";let P=npe([b,w&&w.toAbortSignal()],x),O=null;const D=P&&P.unsubscribe&&(()=>{P.unsubscribe()});let z;try{if(_&&c&&v!=="get"&&v!=="head"&&(z=await p(E,y))!==0){let W=new r(g,{method:"POST",body:y,duplex:"half"}),F;if(V.isFormData(y)&&(F=W.headers.get("content-type"))&&E.setContentType(F),W.body){const[X,Q]=OF(z,By(jF(_)));y=IF(W.body,RF,X,Q)}}V.isString(N)||(N=N?"include":"omit");const R=s&&"credentials"in r.prototype,B={...T,signal:P,method:v.toUpperCase(),headers:E.normalize().toJSON(),body:y,duplex:"half",credentials:R?N:void 0};O=s&&new r(g,B);let q=await(s?j(O,T):j(g,B));const $=u&&(C==="stream"||C==="response");if(u&&(S||$&&D)){const W={};["status","statusText","headers"].forEach(Ce=>{W[Ce]=q[Ce]});const F=V.toFiniteNumber(q.headers.get("content-length")),[X,Q]=S&&OF(F,By(jF(S),!0))||[];q=new n(IF(q.body,RF,X,()=>{Q&&Q(),D&&D()}),W)}C=C||"text";let K=await h[V.findKey(h,C)||"text"](q,m);return!$&&D&&D(),await new Promise((W,F)=>{wte(W,F,{data:K,headers:Zn.from(q.headers),status:q.status,statusText:q.statusText,config:m,request:O})})}catch(R){throw D&&D(),R&&R.name==="TypeError"&&/Load failed|fetch/i.test(R.message)?Object.assign(new ze("Network Error",ze.ERR_NETWORK,m,O),{cause:R.cause||R}):ze.from(R,R&&R.code,m,O)}}},cpe=new Map,Ete=t=>{let e=t&&t.env||{};const{fetch:r,Request:n,Response:i}=e,s=[n,i,r];let o=s.length,a=o,l,c,u=cpe;for(;a--;)l=s[a],c=u.get(l),c===void 0&&u.set(l,c=a?new Map:lpe(e)),u=c;return c};Ete();const mM={http:Nfe,xhr:rpe,fetch:{get:Ete}};V.forEach(mM,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const $F=t=>`- ${t}`,upe=t=>V.isFunction(t)||t===null||t===!1;function dpe(t,e){t=V.isArray(t)?t:[t];const{length:r}=t;let n,i;const s={};for(let o=0;o<r;o++){n=t[o];let a;if(i=n,!upe(n)&&(i=mM[(a=String(n)).toLowerCase()],i===void 0))throw new ze(`Unknown adapter '${a}'`);if(i&&(V.isFunction(i)||(i=i.get(e))))break;s[a||"#"+o]=i}if(!i){const o=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=r?o.length>1?`since :
`+o.map($F).join(`
`):" "+$F(o[0]):"as no adapter specified";throw new ze("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i}const Cte={getAdapter:dpe,adapters:mM};function m1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ah(null,t)}function FF(t){return m1(t),t.headers=Zn.from(t.headers),t.data=p1.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Cte.getAdapter(t.adapter||Jp.adapter,t)(t).then(function(n){return m1(t),n.data=p1.call(t,t.transformResponse,n),n.headers=Zn.from(n.headers),n},function(n){return xte(n)||(m1(t),n&&n.response&&(n.response.data=p1.call(t,t.transformResponse,n.response),n.response.headers=Zn.from(n.response.headers))),Promise.reject(n)})}const Nte="1.13.2",E0={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{E0[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const qF={};E0.transitional=function(e,r,n){function i(s,o){return"[Axios v"+Nte+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return(s,o,a)=>{if(e===!1)throw new ze(i(o," has been removed"+(r?" in "+r:"")),ze.ERR_DEPRECATED);return r&&!qF[o]&&(qF[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};E0.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function hpe(t,e,r){if(typeof t!="object")throw new ze("options must be an object",ze.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const s=n[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new ze("option "+s+" must be "+l,ze.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ze("Unknown option "+s,ze.ERR_BAD_OPTION)}}const ry={assertOptions:hpe,validators:E0},ws=ry.validators;let nc=class{constructor(e){this.defaults=e||{},this.interceptors={request:new kF,response:new kF}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Sc(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:s}=r;n!==void 0&&ry.assertOptions(n,{silentJSONParsing:ws.transitional(ws.boolean),forcedJSONParsing:ws.transitional(ws.boolean),clarifyTimeoutError:ws.transitional(ws.boolean)},!1),i!=null&&(V.isFunction(i)?r.paramsSerializer={serialize:i}:ry.assertOptions(i,{encode:ws.function,serialize:ws.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),ry.assertOptions(r,{baseUrl:ws.spelling("baseURL"),withXsrfToken:ws.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=s&&V.merge(s.common,s[r.method]);s&&V.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),r.headers=Zn.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let u,h=0,f;if(!l){const m=[FF.bind(this),void 0];for(m.unshift(...a),m.push(...c),f=m.length,u=Promise.resolve(r);h<f;)u=u.then(m[h++],m[h++]);return u}f=a.length;let p=r;for(;h<f;){const m=a[h++],g=a[h++];try{p=m(p)}catch(v){g.call(this,v);break}}try{u=FF.call(this,p)}catch(m){return Promise.reject(m)}for(h=0,f=c.length;h<f;)u=u.then(c[h++],c[h++]);return u}getUri(e){e=Sc(this.defaults,e);const r=Ste(e.baseURL,e.url,e.allowAbsoluteUrls);return yte(r,e.params,e.paramsSerializer)}};V.forEach(["delete","get","head","options"],function(e){nc.prototype[e]=function(r,n){return this.request(Sc(n||{},{method:e,url:r,data:(n||{}).data}))}});V.forEach(["post","put","patch"],function(e){function r(n){return function(s,o,a){return this.request(Sc(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}nc.prototype[e]=r(),nc.prototype[e+"Form"]=r(!0)});let fpe=class kte{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{n.subscribe(a),s=a}).then(i);return o.cancel=function(){n.unsubscribe(s)},o},e(function(s,o,a){n.reason||(n.reason=new ah(s,o,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new kte(function(i){e=i}),cancel:e}}};function ppe(t){return function(r){return t.apply(null,r)}}function mpe(t){return V.isObject(t)&&t.isAxiosError===!0}const eI={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(eI).forEach(([t,e])=>{eI[e]=t});function Tte(t){const e=new nc(t),r=ste(nc.prototype.request,e);return V.extend(r,nc.prototype,e,{allOwnKeys:!0}),V.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return Tte(Sc(t,i))},r}const or=Tte(Jp);or.Axios=nc;or.CanceledError=ah;or.CancelToken=fpe;or.isCancel=xte;or.VERSION=Nte;or.toFormData=_0;or.AxiosError=ze;or.Cancel=or.CanceledError;or.all=function(e){return Promise.all(e)};or.spread=ppe;or.isAxiosError=mpe;or.mergeConfig=Sc;or.AxiosHeaders=Zn;or.formToJSON=t=>bte(V.isHTMLForm(t)?new FormData(t):t);or.getAdapter=Cte.getAdapter;or.HttpStatusCode=eI;or.default=or;const{Axios:F4e,AxiosError:q4e,CanceledError:L4e,isCancel:B4e,CancelToken:z4e,VERSION:V4e,all:U4e,Cancel:H4e,isAxiosError:W4e,spread:K4e,toFormData:G4e,AxiosHeaders:Y4e,HttpStatusCode:Q4e,formToJSON:X4e,getAdapter:J4e,mergeConfig:Z4e}=or,tI=window.prmConfig||{},de=or.create({baseURL:tI.apiUrl||"/wp-json",headers:{"Content-Type":"application/json","X-WP-Nonce":tI.nonce||""}});de.interceptors.request.use(t=>{var e;return(e=window.prmConfig)!=null&&e.nonce&&(t.headers["X-WP-Nonce"]=window.prmConfig.nonce),t});de.interceptors.response.use(t=>t,t=>{var e,r;return((e=t.response)==null?void 0:e.status)===401&&(window.location.href=tI.loginUrl||"/wp-login.php"),((r=t.response)==null?void 0:r.status)===403&&console.error("Access denied:",t.response.data),Promise.reject(t)});const qe={getPeople:t=>de.get("/wp/v2/people",{params:t}),getPerson:(t,e={})=>de.get(`/wp/v2/people/${t}`,{params:e}),createPerson:t=>de.post("/wp/v2/people",t),updatePerson:(t,e)=>de.put(`/wp/v2/people/${t}`,e),deletePerson:(t,e={})=>de.delete(`/wp/v2/people/${t}`,{params:e}),getCompanies:t=>de.get("/wp/v2/companies",{params:t}),getCompany:(t,e={})=>de.get(`/wp/v2/companies/${t}`,{params:e}),createCompany:t=>de.post("/wp/v2/companies",t),updateCompany:(t,e)=>de.put(`/wp/v2/companies/${t}`,e),deleteCompany:(t,e={})=>de.delete(`/wp/v2/companies/${t}`,{params:e}),getDates:t=>de.get("/wp/v2/important-dates",{params:t}),getDate:t=>de.get(`/wp/v2/important-dates/${t}`),createDate:t=>de.post("/wp/v2/important-dates",t),updateDate:(t,e)=>de.put(`/wp/v2/important-dates/${t}`,e),deleteDate:t=>de.delete(`/wp/v2/important-dates/${t}`),getPersonLabels:()=>de.get("/wp/v2/person_label"),getCompanyLabels:()=>de.get("/wp/v2/company_label"),getRelationshipTypes:()=>de.get("/wp/v2/relationship_type",{params:{per_page:100,_fields:"id,name,slug,acf"}}),createRelationshipType:t=>de.post("/wp/v2/relationship_type",t),updateRelationshipType:(t,e)=>de.post(`/wp/v2/relationship_type/${t}`,e),deleteRelationshipType:t=>de.delete(`/wp/v2/relationship_type/${t}?force=true`),restoreRelationshipTypeDefaults:()=>de.post("/prm/v1/relationship-types/restore-defaults"),getDateTypes:()=>de.get("/wp/v2/date_type",{params:{per_page:100}}),uploadMedia:t=>{const e=new FormData;return e.append("file",t),de.post("/wp/v2/media",e,{headers:{"Content-Type":"multipart/form-data"}})}},Ae={getDashboard:()=>de.get("/prm/v1/dashboard"),sideloadGravatar:(t,e)=>de.post(`/prm/v1/people/${t}/gravatar`,{email:e}),getCurrentUser:()=>de.get("/prm/v1/user/me"),getUsers:()=>de.get("/prm/v1/users"),approveUser:t=>de.post(`/prm/v1/users/${t}/approve`),denyUser:t=>de.post(`/prm/v1/users/${t}/deny`),deleteUser:t=>de.delete(`/prm/v1/users/${t}`),search:t=>de.get("/prm/v1/search",{params:{q:t}}),getReminders:(t=30)=>de.get("/prm/v1/reminders",{params:{days_ahead:t}}),triggerReminders:()=>de.post("/prm/v1/reminders/trigger"),rescheduleCronJobs:()=>de.post("/prm/v1/reminders/reschedule-cron"),getNotificationChannels:()=>de.get("/prm/v1/user/notification-channels"),updateNotificationChannels:t=>de.post("/prm/v1/user/notification-channels",{channels:t}),updateSlackWebhook:t=>de.post("/prm/v1/user/slack-webhook",{webhook:t}),updateNotificationTime:t=>de.post("/prm/v1/user/notification-time",{time:t}),getSlackStatus:()=>de.get("/prm/v1/user/slack-status"),disconnectSlack:()=>de.post("/prm/v1/slack/disconnect"),getSlackChannels:()=>de.get("/prm/v1/slack/channels"),getSlackTargets:()=>de.get("/prm/v1/slack/targets"),updateSlackTargets:t=>de.post("/prm/v1/slack/targets",{targets:t}),getPersonDates:t=>de.get(`/prm/v1/people/${t}/dates`),getPersonTimeline:t=>de.get(`/prm/v1/people/${t}/timeline`),getPersonNotes:t=>de.get(`/prm/v1/people/${t}/notes`),createNote:(t,e)=>de.post(`/prm/v1/people/${t}/notes`,{content:e}),updateNote:(t,e)=>de.put(`/prm/v1/notes/${t}`,{content:e}),deleteNote:t=>de.delete(`/prm/v1/notes/${t}`),getPersonActivities:t=>de.get(`/prm/v1/people/${t}/activities`),createActivity:(t,e)=>de.post(`/prm/v1/people/${t}/activities`,e),updateActivity:(t,e)=>de.put(`/prm/v1/activities/${t}`,e),deleteActivity:t=>de.delete(`/prm/v1/activities/${t}`),getAllTodos:(t=!1)=>de.get("/prm/v1/todos",{params:{completed:t}}),getInvestments:t=>de.get(`/prm/v1/investments/${t}`),getPersonTodos:t=>de.get(`/prm/v1/people/${t}/todos`),createTodo:(t,e)=>de.post(`/prm/v1/people/${t}/todos`,e),updateTodo:(t,e)=>de.put(`/prm/v1/todos/${t}`,e),deleteTodo:t=>de.delete(`/prm/v1/todos/${t}`),getCompanyPeople:t=>de.get(`/prm/v1/companies/${t}/people`),setCompanyLogo:(t,e)=>de.post(`/prm/v1/companies/${t}/logo`,{media_id:e}),uploadPersonPhoto:(t,e)=>{const r=new FormData;return r.append("file",e),de.post(`/prm/v1/people/${t}/photo`,r,{headers:{"Content-Type":"multipart/form-data"}})},uploadCompanyLogo:(t,e)=>{const r=new FormData;return r.append("file",e),de.post(`/prm/v1/companies/${t}/logo/upload`,r,{headers:{"Content-Type":"multipart/form-data"}})},getCardDAVUrls:()=>de.get("/prm/v1/carddav/urls"),getAppPasswords:t=>de.get(`/wp/v2/users/${t}/application-passwords`),createAppPassword:(t,e)=>de.post(`/wp/v2/users/${t}/application-passwords`,{name:e}),deleteAppPassword:(t,e)=>de.delete(`/wp/v2/users/${t}/application-passwords/${e}`)};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gpe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ype=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),he=(t,e)=>{const r=k.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...c},u)=>k.createElement("svg",{ref:u,...gpe,width:i,height:i,stroke:n,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${ype(t)}`,a].join(" "),...c},[...e.map(([h,f])=>k.createElement(h,f)),...Array.isArray(l)?l:[l]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=he("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vpe=he("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bpe=he("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=he("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=he("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xpe=he("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wpe=he("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Spe=he("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=he("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ote=he("Cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h0.01",key:"hsw7lv"}],["path",{d:"M12 4h0.01",key:"1e3d8f"}],["path",{d:"M17 4h0.01",key:"p7cxgy"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=he("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jte=he("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=he("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=he("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rI=he("CheckSquare2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=he("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=he("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=he("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=he("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _pe=he("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pte=he("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Epe=he("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ite=he("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=he("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zp=he("FileCode",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m10 13-2 2 2 2",key:"17smn8"}],["path",{d:"m14 17 2-2-2-2",key:"14mezr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=he("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=he("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sI=he("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cpe=he("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zF=he("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=he("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Npe=he("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kpe=he("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rte=he("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tpe=he("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ope=he("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=he("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jpe=he("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ppe=he("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=he("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ipe=he("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=he("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rpe=he("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mpe=he("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=he("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ape=he("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=he("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=he("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=he("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dpe=he("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $pe=he("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mte=he("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=he("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=he("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ate=he("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fpe=he("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dte=he("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qpe=he("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lpe=he("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $te=he("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fte=he("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=he("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=he("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qte=he("StickyNote",[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M15 3v6h6",key:"edgan2"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=he("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=he("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bpe=he("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zpe=he("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=he("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vpe=he("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=he("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=he("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lte=he("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=he("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=he("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Upe=he("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hpe=he("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Nc="Caelis";function lh(t){k.useEffect(()=>{var e;if(t){const r=((e=window.prmConfig)==null?void 0:e.siteName)||Nc;document.title=`${t} - ${r}`}},[t])}function Wpe(t){const e=t.match(/\/(?:people|companies|dates)\/(\d+)/);return e?e[1]:null}function Bte(t=null){const e=Fo();k.useEffect(()=>{var i;let r=t;if(!r){const s=e.pathname,o=Wpe(s);s==="/"?r="Dashboard":s==="/login"?r="Login":s.startsWith("/people")?s==="/people"||s==="/people/"?r="People":s==="/people/new"?r="New person":s.endsWith("/edit")?r="Edit person":o?r="Person":r="People":s.startsWith("/companies")?s==="/companies"||s==="/companies/"?r="Organizations":s==="/companies/new"?r="New organization":s.endsWith("/edit")?r="Edit organization":o?r="Organization":r="Organizations":s.startsWith("/dates")?s==="/dates"||s==="/dates/"?r="Events":s==="/dates/new"?r="New date":s.endsWith("/edit")?r="Edit date":r="Events":s.startsWith("/settings")?r="Settings":r=Nc}const n=((i=window.prmConfig)==null?void 0:i.siteName)||Nc;document.title=`${r} - ${n}`},[e.pathname,t])}function Kpe(){return lt({queryKey:["dashboard"],queryFn:async()=>(await Ae.getDashboard()).data})}function Gpe(t=30){return lt({queryKey:["reminders",t],queryFn:async()=>(await Ae.getReminders(t)).data})}function zte(t=!1){return lt({queryKey:["todos",t],queryFn:async()=>(await Ae.getAllTodos(t)).data})}function Vte(){const t=vt();return tt({mutationFn:({todoId:e,data:r})=>Ae.updateTodo(e,r),onSuccess:()=>{t.invalidateQueries({queryKey:["todos"]}),t.invalidateQueries({queryKey:["dashboard"]})}})}function Ype(){const t=vt();return tt({mutationFn:e=>Ae.deleteTodo(e),onSuccess:()=>{t.invalidateQueries({queryKey:["todos"]}),t.invalidateQueries({queryKey:["dashboard"]})}})}function Qpe(t){const e=typeof t=="string"?t:"",r=e.length>=2;return lt({queryKey:["search",e],queryFn:async()=>r?(await Ae.search(e)).data:{people:[],companies:[]},enabled:r})}function Kn(t){if(!t)return"";const e=document.createElement("textarea");return e.innerHTML=t,e.value}function cr(t){var r;if(!t)return"";const e=((r=t.title)==null?void 0:r.rendered)||t.title||t.name||"";return Kn(e)}function rd(t){var r,n;if(!t)return"";if(t.name&&typeof t.name=="string"&&!((r=t.title)!=null&&r.rendered))return Kn(t.name);const e=((n=t.title)==null?void 0:n.rendered)||t.title||t.name||"";return Kn(e)}function Qs(t,e={}){const r=["gender"],n=["contact_info","addresses","work_history","relationships","photo_gallery"],i={...t};return r.forEach(s=>{i[s]===""&&(i[s]=null)}),n.forEach(s=>{Array.isArray(i[s])||(i[s]=[])}),Object.assign(i,e),i}const Pt={all:["people"],lists:()=>[...Pt.all,"list"],list:t=>[...Pt.lists(),t],details:()=>[...Pt.all,"detail"],detail:t=>[...Pt.details(),t],timeline:t=>[...Pt.detail(t),"timeline"],dates:t=>[...Pt.detail(t),"dates"]};function Ute(t){var i,s,o,a,l,c,u,h,f,p,m,g,v,y,b,w,x;const e=((o=(s=(i=t._embedded)==null?void 0:i["wp:featuredmedia"])==null?void 0:s[0])==null?void 0:o.source_url)||((f=(h=(u=(c=(l=(a=t._embedded)==null?void 0:a["wp:featuredmedia"])==null?void 0:l[0])==null?void 0:c.media_details)==null?void 0:u.sizes)==null?void 0:h.thumbnail)==null?void 0:f.source_url)||null,r=((v=(g=(m=(p=t._embedded)==null?void 0:p["wp:term"])==null?void 0:m.flat())==null?void 0:g.filter(S=>(S==null?void 0:S.taxonomy)==="person_label"))==null?void 0:v.map(S=>S.name))||[],n=Kn(((y=t.title)==null?void 0:y.rendered)||"");return{...t,id:t.id,name:n,first_name:((b=t.acf)==null?void 0:b.first_name)||"",last_name:((w=t.acf)==null?void 0:w.last_name)||"",is_favorite:((x=t.acf)==null?void 0:x.is_favorite)||!1,is_deceased:t.is_deceased||!1,birth_year:t.birth_year||null,modified:t.modified||null,thumbnail:e,labels:r}}function Uc(t={}){return lt({queryKey:Pt.list(t),queryFn:async()=>{const e=[];let r=1;const n=100;for(;;){const i=await qe.getPeople({per_page:n,page:r,_embed:!0,...t}),s=i.data.map(Ute);if(e.push(...s),s.length<n)break;const o=parseInt(i.headers["x-wp-totalpages"]||i.headers["X-WP-TotalPages"]||"0",10);if(o>0&&r>=o)break;r++}return e}})}function Hte(t){return lt({queryKey:Pt.detail(t),queryFn:async()=>{const e=await qe.getPerson(t,{_embed:!0});return Ute(e.data)},enabled:!!t})}function Xpe(t){return lt({queryKey:Pt.timeline(t),queryFn:async()=>(await Ae.getPersonTimeline(t)).data,enabled:!!t})}function Jpe(t){return lt({queryKey:Pt.dates(t),queryFn:async()=>(await Ae.getPersonDates(t)).data,enabled:!!t})}function Zpe(){const t=vt();return tt({mutationFn:({id:e,data:r})=>qe.updatePerson(e,r),onSuccess:(e,{id:r,data:n})=>{var i;t.invalidateQueries({queryKey:Pt.detail(r)}),t.invalidateQueries({queryKey:Pt.lists()}),t.invalidateQueries({queryKey:["dashboard"]}),(i=n==null?void 0:n.acf)!=null&&i.relationships&&(Array.isArray(n.acf.relationships)?n.acf.relationships:[]).forEach(o=>{const a=o.related_person;a&&t.invalidateQueries({queryKey:Pt.detail(a)})})}})}function eme(){const t=vt();return tt({mutationFn:e=>qe.deletePerson(e,{force:!0}),onSuccess:()=>{t.invalidateQueries({queryKey:Pt.lists()}),t.invalidateQueries({queryKey:Pt.details()}),t.invalidateQueries({queryKey:["dashboard"]})}})}function tme(){const t=vt();return tt({mutationFn:({personId:e,content:r})=>Ae.createNote(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:Pt.timeline(r)})}})}function rme(){const t=vt();return tt({mutationFn:({noteId:e,personId:r})=>Ae.deleteNote(e),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:Pt.timeline(r)})}})}function xM(){const t=vt();return tt({mutationFn:({personId:e,data:r})=>Ae.createActivity(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:Pt.timeline(r)})}})}function nme(){const t=vt();return tt({mutationFn:({activityId:e,data:r,personId:n})=>Ae.updateActivity(e,r),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:Pt.timeline(r)})}})}function ime(){const t=vt();return tt({mutationFn:({activityId:e,personId:r})=>Ae.deleteActivity(e),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:Pt.timeline(r)})}})}function Wte(){const t=vt();return tt({mutationFn:({personId:e,data:r})=>Ae.createTodo(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:Pt.timeline(r)})}})}function sme(){const t=vt();return tt({mutationFn:({todoId:e,data:r,personId:n})=>Ae.updateTodo(e,r),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:Pt.timeline(r)})}})}function ome(){const t=vt();return tt({mutationFn:({todoId:e,personId:r})=>Ae.deleteTodo(e),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:Pt.timeline(r)})}})}function ame(){const t=vt();return tt({mutationFn:({dateId:e,personId:r})=>qe.deleteDate(e),onSuccess:(e,{personId:r})=>{r&&(t.invalidateQueries({queryKey:Pt.dates(r)}),t.invalidateQueries({queryKey:Pt.detail(r)})),t.invalidateQueries({queryKey:["reminders"]})}})}function Kte({isOpen:t,onClose:e}){const[r,n]=k.useState(""),[i,s]=k.useState(""),[o,a]=k.useState(""),[l,c]=k.useState(!1),[u,h]=k.useState(""),{data:f=[],isLoading:p}=Uc(),m=Wte(),g=vt(),v=k.useMemo(()=>{const _=u.toLowerCase().trim();let C=f;return _&&(C=f.filter(E=>{var N,T,j;return((N=E.name)==null?void 0:N.toLowerCase().includes(_))||((T=E.first_name)==null?void 0:T.toLowerCase().includes(_))||((j=E.last_name)==null?void 0:j.toLowerCase().includes(_))})),[...C].sort((E,N)=>(E.name||"").localeCompare(N.name||""))},[f,u]),y=k.useMemo(()=>f.find(_=>_.id===parseInt(o)),[f,o]),b=()=>new Date().toISOString().split("T")[0];if(k.useEffect(()=>{t&&(n(""),s(b()),a(""),h(""),c(!1))},[t]),!t)return null;const w=async _=>{if(_.preventDefault(),!(!r.trim()||!o))try{await m.mutateAsync({personId:parseInt(o),data:{content:r.trim(),due_date:i||null,is_completed:!1}}),g.invalidateQueries({queryKey:["todos"]}),e()}catch(C){console.error("Failed to create todo:",C)}},x=()=>{e()},S=_=>{if(!_)return"";try{return new Date(_).toISOString().split("T")[0]}catch{return""}};return d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[d.jsx("h2",{className:"text-lg font-semibold",children:"Add todo"}),d.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600",disabled:m.isPending,children:d.jsx(Rt,{className:"w-5 h-5"})})]}),d.jsxs("form",{onSubmit:w,className:"p-4",children:[d.jsxs("div",{className:"mb-4",children:[d.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Person ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsxs("div",{className:"relative",children:[d.jsxs("button",{type:"button",onClick:()=>c(!l),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:m.isPending,children:[y?d.jsxs("div",{className:"flex items-center gap-2",children:[y.thumbnail?d.jsx("img",{src:y.thumbnail,alt:y.name,className:"w-6 h-6 rounded-full object-cover"}):d.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:d.jsx(Za,{className:"w-4 h-4 text-gray-500"})}),d.jsx("span",{className:"text-gray-900",children:y.name})]}):d.jsx("span",{className:"text-gray-400",children:"Select a person..."}),d.jsx(zy,{className:`w-4 h-4 text-gray-400 transition-transform ${l?"rotate-180":""}`})]}),l&&d.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[d.jsx("div",{className:"p-2 border-b border-gray-100",children:d.jsxs("div",{className:"relative",children:[d.jsx(Ec,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),d.jsx("input",{type:"text",value:u,onChange:_=>h(_.target.value),placeholder:"Search people...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),d.jsx("div",{className:"overflow-y-auto max-h-48",children:p?d.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):v.length>0?v.map(_=>d.jsxs("button",{type:"button",onClick:()=>{a(String(_.id)),c(!1),h("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${o===String(_.id)?"bg-primary-50":""}`,children:[_.thumbnail?d.jsx("img",{src:_.thumbnail,alt:_.name,className:"w-6 h-6 rounded-full object-cover"}):d.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:d.jsx(Za,{className:"w-4 h-4 text-gray-500"})}),d.jsx("span",{className:"text-sm text-gray-900 truncate",children:_.name})]},_.id)):d.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"No people found"})})]})]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsxs("label",{htmlFor:"todo-content",className:"block text-sm font-medium text-gray-700 mb-2",children:["Description ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsx("textarea",{id:"todo-content",value:r,onChange:_=>n(_.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"What needs to be done?",disabled:m.isPending})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"todo-due-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Due date (optional)"}),d.jsx("input",{id:"todo-due-date",type:"date",value:S(i),onChange:_=>s(_.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:m.isPending})]}),d.jsxs("div",{className:"flex justify-end gap-2",children:[d.jsx("button",{type:"button",onClick:x,className:"btn-secondary",disabled:m.isPending,children:"Cancel"}),d.jsx("button",{type:"submit",className:"btn-primary",disabled:m.isPending||!r.trim()||!o,children:m.isPending?"Adding...":"Add todo"})]})]})]})})}var em=t=>t.type==="checkbox",$l=t=>t instanceof Date,Bn=t=>t==null;const Gte=t=>typeof t=="object";var hr=t=>!Bn(t)&&!Array.isArray(t)&&Gte(t)&&!$l(t),Yte=t=>hr(t)&&t.target?em(t.target)?t.target.checked:t.target.value:t,lme=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Qte=(t,e)=>t.has(lme(e)),cme=t=>{const e=t.constructor&&t.constructor.prototype;return hr(e)&&e.hasOwnProperty("isPrototypeOf")},wM=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ot(t){if(t instanceof Date)return new Date(t);const e=typeof FileList<"u"&&t instanceof FileList;if(wM&&(t instanceof Blob||e))return t;const r=Array.isArray(t);if(!r&&!(hr(t)&&cme(t)))return t;const n=r?[]:Object.create(Object.getPrototypeOf(t));for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=Ot(t[i]));return n}var T0=t=>/^\w*$/.test(t),Ct=t=>t===void 0,O0=t=>Array.isArray(t)?t.filter(Boolean):[],SM=t=>O0(t.replace(/["|']|\]/g,"").split(/\.|\[/)),ue=(t,e,r)=>{if(!e||!hr(t))return r;const n=(T0(e)?[e]:SM(e)).reduce((i,s)=>Bn(i)?i:i[s],t);return Ct(n)||n===t?Ct(t[e])?r:t[e]:n},ci=t=>typeof t=="boolean",kn=t=>typeof t=="function",yt=(t,e,r)=>{let n=-1;const i=T0(e)?[e]:SM(e),s=i.length,o=s-1;for(;++n<s;){const a=i[n];let l=r;if(n!==o){const c=t[a];l=hr(c)||Array.isArray(c)?c:isNaN(+i[n+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=l,t=t[a]}};const Uy={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Mi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Xs={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Xte=be.createContext(null);Xte.displayName="HookFormContext";const j0=()=>be.useContext(Xte);var Jte=(t,e,r,n=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==Mi.all&&(e._proxyFormState[o]=!n||Mi.all),r&&(r[o]=!0),t[o]}});return i};const P0=typeof window<"u"?be.useLayoutEffect:be.useEffect;function ume(t){const e=j0(),{control:r=e.control,disabled:n,name:i,exact:s}=t||{},[o,a]=be.useState(r._formState),l=be.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return P0(()=>r._subscribe({name:i,formState:l.current,exact:s,callback:c=>{!n&&a({...r._formState,...c})}}),[i,n,s]),be.useEffect(()=>{l.current.isValid&&r._setValid(!0)},[r]),be.useMemo(()=>Jte(o,r,l.current,!1),[o,r])}var di=t=>typeof t=="string",oI=(t,e,r,n,i)=>di(t)?(n&&e.watch.add(t),ue(r,t,i)):Array.isArray(t)?t.map(s=>(n&&e.watch.add(s),ue(r,s))):(n&&(e.watchAll=!0),r),aI=t=>Bn(t)||!Gte(t);function as(t,e,r=new WeakSet){if(aI(t)||aI(e))return Object.is(t,e);if($l(t)&&$l(e))return t.getTime()===e.getTime();const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;if(r.has(t)||r.has(e))return!0;r.add(t),r.add(e);for(const s of n){const o=t[s];if(!i.includes(s))return!1;if(s!=="ref"){const a=e[s];if($l(o)&&$l(a)||hr(o)&&hr(a)||Array.isArray(o)&&Array.isArray(a)?!as(o,a,r):!Object.is(o,a))return!1}}return!0}function dme(t){const e=j0(),{control:r=e.control,name:n,defaultValue:i,disabled:s,exact:o,compute:a}=t||{},l=be.useRef(i),c=be.useRef(a),u=be.useRef(void 0),h=be.useRef(r),f=be.useRef(n);c.current=a;const[p,m]=be.useState(()=>{const x=r._getWatch(n,l.current);return c.current?c.current(x):x}),g=be.useCallback(x=>{const S=oI(n,r._names,x||r._formValues,!1,l.current);return c.current?c.current(S):S},[r._formValues,r._names,n]),v=be.useCallback(x=>{if(!s){const S=oI(n,r._names,x||r._formValues,!1,l.current);if(c.current){const _=c.current(S);as(_,u.current)||(m(_),u.current=_)}else m(S)}},[r._formValues,r._names,s,n]);P0(()=>((h.current!==r||!as(f.current,n))&&(h.current=r,f.current=n,v()),r._subscribe({name:n,formState:{values:!0},exact:o,callback:x=>{v(x.values)}})),[r,o,n,v]),be.useEffect(()=>r._removeUnmounted());const y=h.current!==r,b=f.current,w=be.useMemo(()=>{if(s)return null;const x=!y&&!as(b,n);return y||x?g():null},[s,y,n,b,g]);return w!==null?w:p}function hme(t){const e=j0(),{name:r,disabled:n,control:i=e.control,shouldUnregister:s,defaultValue:o,exact:a=!0}=t,l=Qte(i._names.array,r),c=be.useMemo(()=>ue(i._formValues,r,ue(i._defaultValues,r,o)),[i,r,o]),u=dme({control:i,name:r,defaultValue:c,exact:a}),h=ume({control:i,name:r,exact:a}),f=be.useRef(t),p=be.useRef(void 0),m=be.useRef(i.register(r,{...t.rules,value:u,...ci(t.disabled)?{disabled:t.disabled}:{}}));f.current=t;const g=be.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!ue(h.errors,r)},isDirty:{enumerable:!0,get:()=>!!ue(h.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!ue(h.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!ue(h.validatingFields,r)},error:{enumerable:!0,get:()=>ue(h.errors,r)}}),[h,r]),v=be.useCallback(x=>m.current.onChange({target:{value:Yte(x),name:r},type:Uy.CHANGE}),[r]),y=be.useCallback(()=>m.current.onBlur({target:{value:ue(i._formValues,r),name:r},type:Uy.BLUR}),[r,i._formValues]),b=be.useCallback(x=>{const S=ue(i._fields,r);S&&S._f&&x&&(S._f.ref={focus:()=>kn(x.focus)&&x.focus(),select:()=>kn(x.select)&&x.select(),setCustomValidity:_=>kn(x.setCustomValidity)&&x.setCustomValidity(_),reportValidity:()=>kn(x.reportValidity)&&x.reportValidity()})},[i._fields,r]),w=be.useMemo(()=>({name:r,value:u,...ci(n)||h.disabled?{disabled:h.disabled||n}:{},onChange:v,onBlur:y,ref:b}),[r,n,h.disabled,v,y,b,u]);return be.useEffect(()=>{const x=i._options.shouldUnregister||s,S=p.current;S&&S!==r&&!l&&i.unregister(S),i.register(r,{...f.current.rules,...ci(f.current.disabled)?{disabled:f.current.disabled}:{}});const _=(C,E)=>{const N=ue(i._fields,C);N&&N._f&&(N._f.mount=E)};if(_(r,!0),x){const C=Ot(ue(i._options.defaultValues,r,f.current.defaultValue));yt(i._defaultValues,r,C),Ct(ue(i._formValues,r))&&yt(i._formValues,r,C)}return!l&&i.register(r),p.current=r,()=>{(l?x&&!i._state.action:x)?i.unregister(r):_(r,!1)}},[r,i,l,s]),be.useEffect(()=>{i._setDisabledField({disabled:n,name:r})},[n,r,i]),be.useMemo(()=>({field:w,formState:h,fieldState:g}),[w,h,g])}const Hy=t=>t.render(hme(t));var fme=(t,e,r,n,i)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:i||!0}}:{},Gn=t=>Array.isArray(t)?t:[t],HF=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}};function Zte(t,e){const r={};for(const n in t)if(t.hasOwnProperty(n)){const i=t[n],s=e[n];if(i&&hr(i)&&s){const o=Zte(i,s);hr(o)&&(r[n]=o)}else t[n]&&(r[n]=s)}return r}var cn=t=>hr(t)&&!Object.keys(t).length,_M=t=>t.type==="file",Wy=t=>{if(!wM)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},ere=t=>t.type==="select-multiple",EM=t=>t.type==="radio",pme=t=>EM(t)||em(t),y1=t=>Wy(t)&&t.isConnected;function mme(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=Ct(t)?n++:t[e[n++]];return t}function gme(t){for(const e in t)if(t.hasOwnProperty(e)&&!Ct(t[e]))return!1;return!0}function nr(t,e){const r=Array.isArray(e)?e:T0(e)?[e]:SM(e),n=r.length===1?t:mme(t,r),i=r.length-1,s=r[i];return n&&delete n[s],i!==0&&(hr(n)&&cn(n)||Array.isArray(n)&&gme(n))&&nr(t,r.slice(0,-1)),t}var yme=t=>{for(const e in t)if(kn(t[e]))return!0;return!1};function tre(t){return Array.isArray(t)||hr(t)&&!yme(t)}function lI(t,e={}){for(const r in t){const n=t[r];tre(n)?(e[r]=Array.isArray(n)?[]:{},lI(n,e[r])):Ct(n)||(e[r]=!0)}return e}function Cu(t,e,r){r||(r=lI(e));for(const n in t){const i=t[n];if(tre(i))Ct(e)||aI(r[n])?r[n]=lI(i,Array.isArray(i)?[]:{}):Cu(i,Bn(e)?{}:e[n],r[n]);else{const s=e[n];r[n]=!as(i,s)}}return r}const WF={value:!1,isValid:!1},KF={value:!0,isValid:!0};var rre=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Ct(t[0].attributes.value)?Ct(t[0].value)||t[0].value===""?KF:{value:t[0].value,isValid:!0}:KF:WF}return WF},nre=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>Ct(t)?t:e?t===""?NaN:t&&+t:r&&di(t)?new Date(t):n?n(t):t;const GF={isValid:!1,value:null};var ire=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,GF):GF;function YF(t){const e=t.ref;return _M(e)?e.files:EM(e)?ire(t.refs).value:ere(e)?[...e.selectedOptions].map(({value:r})=>r):em(e)?rre(t.refs).value:nre(Ct(e.value)?t.ref.value:e.value,t)}var vme=(t,e,r,n)=>{const i={};for(const s of t){const o=ue(e,s);o&&yt(i,s,o._f)}return{criteriaMode:r,names:[...t],fields:i,shouldUseNativeValidation:n}},Ky=t=>t instanceof RegExp,Qh=t=>Ct(t)?t:Ky(t)?t.source:hr(t)?Ky(t.value)?t.value.source:t.value:t,zu=t=>({isOnSubmit:!t||t===Mi.onSubmit,isOnBlur:t===Mi.onBlur,isOnChange:t===Mi.onChange,isOnAll:t===Mi.all,isOnTouch:t===Mi.onTouched});const QF="AsyncFunction";var bme=t=>!!t&&!!t.validate&&!!(kn(t.validate)&&t.validate.constructor.name===QF||hr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===QF)),xme=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),cI=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const nd=(t,e,r,n)=>{for(const i of r||Object.keys(t)){const s=ue(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!n)return!0;if(o.ref&&e(o.ref,o.name)&&!n)return!0;if(nd(a,e))break}else if(hr(a)&&nd(a,e))break}}};function XF(t,e,r){const n=ue(t,r);if(n||T0(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const s=i.join("."),o=ue(e,s),a=ue(t,s);if(o&&!Array.isArray(o)&&r!==s)return{name:r};if(a&&a.type)return{name:s,error:a};if(a&&a.root&&a.root.type)return{name:`${s}.root`,error:a.root};i.pop()}return{name:r}}var wme=(t,e,r,n)=>{r(t);const{name:i,...s}=t;return cn(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!n||Mi.all))},Sme=(t,e,r)=>!t||!e||t===e||Gn(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n))),_me=(t,e,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(e||t):(r?n.isOnBlur:i.isOnBlur)?!t:(r?n.isOnChange:i.isOnChange)?t:!0,Eme=(t,e)=>!O0(ue(t,e)).length&&nr(t,e),sre=(t,e,r)=>{const n=Gn(ue(t,r));return yt(n,"root",e[r]),yt(t,r,n),t};function JF(t,e,r="validate"){if(di(t)||Array.isArray(t)&&t.every(di)||ci(t)&&!t)return{type:r,message:di(t)?t:"",ref:e}}var vu=t=>hr(t)&&!Ky(t)?t:{value:t,message:""},uI=async(t,e,r,n,i,s)=>{const{ref:o,refs:a,required:l,maxLength:c,minLength:u,min:h,max:f,pattern:p,validate:m,name:g,valueAsNumber:v,mount:y}=t._f,b=ue(r,g);if(!y||e.has(g))return{};const w=a?a[0]:o,x=P=>{i&&w.reportValidity&&(w.setCustomValidity(ci(P)?"":P||""),w.reportValidity())},S={},_=EM(o),C=em(o),E=_||C,N=(v||_M(o))&&Ct(o.value)&&Ct(b)||Wy(o)&&o.value===""||b===""||Array.isArray(b)&&!b.length,T=fme.bind(null,g,n,S),j=(P,O,D,z=Xs.maxLength,R=Xs.minLength)=>{const B=P?O:D;S[g]={type:P?z:R,message:B,ref:o,...T(P?z:R,B)}};if(s?!Array.isArray(b)||!b.length:l&&(!E&&(N||Bn(b))||ci(b)&&!b||C&&!rre(a).isValid||_&&!ire(a).isValid)){const{value:P,message:O}=di(l)?{value:!!l,message:l}:vu(l);if(P&&(S[g]={type:Xs.required,message:O,ref:w,...T(Xs.required,O)},!n))return x(O),S}if(!N&&(!Bn(h)||!Bn(f))){let P,O;const D=vu(f),z=vu(h);if(!Bn(b)&&!isNaN(b)){const R=o.valueAsNumber||b&&+b;Bn(D.value)||(P=R>D.value),Bn(z.value)||(O=R<z.value)}else{const R=o.valueAsDate||new Date(b),B=K=>new Date(new Date().toDateString()+" "+K),q=o.type=="time",$=o.type=="week";di(D.value)&&b&&(P=q?B(b)>B(D.value):$?b>D.value:R>new Date(D.value)),di(z.value)&&b&&(O=q?B(b)<B(z.value):$?b<z.value:R<new Date(z.value))}if((P||O)&&(j(!!P,D.message,z.message,Xs.max,Xs.min),!n))return x(S[g].message),S}if((c||u)&&!N&&(di(b)||s&&Array.isArray(b))){const P=vu(c),O=vu(u),D=!Bn(P.value)&&b.length>+P.value,z=!Bn(O.value)&&b.length<+O.value;if((D||z)&&(j(D,P.message,O.message),!n))return x(S[g].message),S}if(p&&!N&&di(b)){const{value:P,message:O}=vu(p);if(Ky(P)&&!b.match(P)&&(S[g]={type:Xs.pattern,message:O,ref:o,...T(Xs.pattern,O)},!n))return x(O),S}if(m){if(kn(m)){const P=await m(b,r),O=JF(P,w);if(O&&(S[g]={...O,...T(Xs.validate,O.message)},!n))return x(O.message),S}else if(hr(m)){let P={};for(const O in m){if(!cn(P)&&!n)break;const D=JF(await m[O](b,r),w,O);D&&(P={...D,...T(O,D.message)},x(D.message),n&&(S[g]=P))}if(!cn(P)&&(S[g]={ref:w,...P},!n))return S}}return x(!0),S};const Cme={mode:Mi.onSubmit,reValidateMode:Mi.onChange,shouldFocusError:!0};function Nme(t={}){let e={...Cme,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:kn(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},n={},i=hr(e.defaultValues)||hr(e.values)?Ot(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:Ot(i),o={action:!1,mount:!1,watch:!1,keepIsValid:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={...u};let f={...h};const p={array:HF(),state:HF()},m=e.criteriaMode===Mi.all,g=A=>L=>{clearTimeout(c),c=setTimeout(A,L)},v=async A=>{if(!o.keepIsValid&&!e.disabled&&(h.isValid||f.isValid||A)){let L;e.resolver?(L=cn((await E()).errors),y()):L=await T(n,!0),L!==r.isValid&&p.state.next({isValid:L})}},y=(A,L)=>{!e.disabled&&(h.isValidating||h.validatingFields||f.isValidating||f.validatingFields)&&((A||Array.from(a.mount)).forEach(U=>{U&&(L?yt(r.validatingFields,U,L):nr(r.validatingFields,U))}),p.state.next({validatingFields:r.validatingFields,isValidating:!cn(r.validatingFields)}))},b=(A,L=[],U,oe,ee=!0,Z=!0)=>{if(oe&&U&&!e.disabled){if(o.action=!0,Z&&Array.isArray(ue(n,A))){const me=U(ue(n,A),oe.argA,oe.argB);ee&&yt(n,A,me)}if(Z&&Array.isArray(ue(r.errors,A))){const me=U(ue(r.errors,A),oe.argA,oe.argB);ee&&yt(r.errors,A,me),Eme(r.errors,A)}if((h.touchedFields||f.touchedFields)&&Z&&Array.isArray(ue(r.touchedFields,A))){const me=U(ue(r.touchedFields,A),oe.argA,oe.argB);ee&&yt(r.touchedFields,A,me)}(h.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Cu(i,s)),p.state.next({name:A,isDirty:P(A,L),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else yt(s,A,L)},w=(A,L)=>{yt(r.errors,A,L),p.state.next({errors:r.errors})},x=A=>{r.errors=A,p.state.next({errors:r.errors,isValid:!1})},S=(A,L,U,oe)=>{const ee=ue(n,A);if(ee){const Z=ue(s,A,Ct(U)?ue(i,A):U);Ct(Z)||oe&&oe.defaultChecked||L?yt(s,A,L?Z:YF(ee._f)):z(A,Z),o.mount&&!o.action&&v()}},_=(A,L,U,oe,ee)=>{let Z=!1,me=!1;const Fe={name:A};if(!e.disabled){if(!U||oe){(h.isDirty||f.isDirty)&&(me=r.isDirty,r.isDirty=Fe.isDirty=P(),Z=me!==Fe.isDirty);const Ke=as(ue(i,A),L);me=!!ue(r.dirtyFields,A),Ke?nr(r.dirtyFields,A):yt(r.dirtyFields,A,!0),Fe.dirtyFields=r.dirtyFields,Z=Z||(h.dirtyFields||f.dirtyFields)&&me!==!Ke}if(U){const Ke=ue(r.touchedFields,A);Ke||(yt(r.touchedFields,A,U),Fe.touchedFields=r.touchedFields,Z=Z||(h.touchedFields||f.touchedFields)&&Ke!==U)}Z&&ee&&p.state.next(Fe)}return Z?Fe:{}},C=(A,L,U,oe)=>{const ee=ue(r.errors,A),Z=(h.isValid||f.isValid)&&ci(L)&&r.isValid!==L;if(e.delayError&&U?(l=g(()=>w(A,U)),l(e.delayError)):(clearTimeout(c),l=null,U?yt(r.errors,A,U):nr(r.errors,A)),(U?!as(ee,U):ee)||!cn(oe)||Z){const me={...oe,...Z&&ci(L)?{isValid:L}:{},errors:r.errors,name:A};r={...r,...me},p.state.next(me)}},E=async A=>(y(A,!0),await e.resolver(s,e.context,vme(A||a.mount,n,e.criteriaMode,e.shouldUseNativeValidation))),N=async A=>{const{errors:L}=await E(A);if(y(A),A)for(const U of A){const oe=ue(L,U);oe?yt(r.errors,U,oe):nr(r.errors,U)}else r.errors=L;return L},T=async(A,L,U={valid:!0})=>{for(const oe in A){const ee=A[oe];if(ee){const{_f:Z,...me}=ee;if(Z){const Fe=a.array.has(Z.name),Ke=ee._f&&bme(ee._f);Ke&&h.validatingFields&&y([Z.name],!0);const St=await uI(ee,a.disabled,s,m,e.shouldUseNativeValidation&&!L,Fe);if(Ke&&h.validatingFields&&y([Z.name]),St[Z.name]&&(U.valid=!1,L))break;!L&&(ue(St,Z.name)?Fe?sre(r.errors,St,Z.name):yt(r.errors,Z.name,St[Z.name]):nr(r.errors,Z.name))}!cn(me)&&await T(me,L,U)}}return U.valid},j=()=>{for(const A of a.unMount){const L=ue(n,A);L&&(L._f.refs?L._f.refs.every(U=>!y1(U)):!y1(L._f.ref))&&at(A)}a.unMount=new Set},P=(A,L)=>!e.disabled&&(A&&L&&yt(s,A,L),!as(W(),i)),O=(A,L,U)=>oI(A,a,{...o.mount?s:Ct(L)?i:di(A)?{[A]:L}:L},U,L),D=A=>O0(ue(o.mount?s:i,A,e.shouldUnregister?ue(i,A,[]):[])),z=(A,L,U={})=>{const oe=ue(n,A);let ee=L;if(oe){const Z=oe._f;Z&&(!Z.disabled&&yt(s,A,nre(L,Z)),ee=Wy(Z.ref)&&Bn(L)?"":L,ere(Z.ref)?[...Z.ref.options].forEach(me=>me.selected=ee.includes(me.value)):Z.refs?em(Z.ref)?Z.refs.forEach(me=>{(!me.defaultChecked||!me.disabled)&&(Array.isArray(ee)?me.checked=!!ee.find(Fe=>Fe===me.value):me.checked=ee===me.value||!!ee)}):Z.refs.forEach(me=>me.checked=me.value===ee):_M(Z.ref)?Z.ref.value="":(Z.ref.value=ee,Z.ref.type||p.state.next({name:A,values:Ot(s)})))}(U.shouldDirty||U.shouldTouch)&&_(A,ee,U.shouldTouch,U.shouldDirty,!0),U.shouldValidate&&K(A)},R=(A,L,U)=>{for(const oe in L){if(!L.hasOwnProperty(oe))return;const ee=L[oe],Z=A+"."+oe,me=ue(n,Z);(a.array.has(A)||hr(ee)||me&&!me._f)&&!$l(ee)?R(Z,ee,U):z(Z,ee,U)}},B=(A,L,U={})=>{const oe=ue(n,A),ee=a.array.has(A),Z=Ot(L);yt(s,A,Z),ee?(p.array.next({name:A,values:Ot(s)}),(h.isDirty||h.dirtyFields||f.isDirty||f.dirtyFields)&&U.shouldDirty&&p.state.next({name:A,dirtyFields:Cu(i,s),isDirty:P(A,Z)})):oe&&!oe._f&&!Bn(Z)?R(A,Z,U):z(A,Z,U),cI(A,a)&&p.state.next({...r,name:A}),p.state.next({name:o.mount?A:void 0,values:Ot(s)})},q=async A=>{o.mount=!0;const L=A.target;let U=L.name,oe=!0;const ee=ue(n,U),Z=Ke=>{oe=Number.isNaN(Ke)||$l(Ke)&&isNaN(Ke.getTime())||as(Ke,ue(s,U,Ke))},me=zu(e.mode),Fe=zu(e.reValidateMode);if(ee){let Ke,St;const Se=L.type?YF(ee._f):Yte(A),ne=A.type===Uy.BLUR||A.type===Uy.FOCUS_OUT,fe=!xme(ee._f)&&!e.resolver&&!ue(r.errors,U)&&!ee._f.deps||_me(ne,ue(r.touchedFields,U),r.isSubmitted,Fe,me),ce=cI(U,a,ne);yt(s,U,Se),ne?(!L||!L.readOnly)&&(ee._f.onBlur&&ee._f.onBlur(A),l&&l(0)):ee._f.onChange&&ee._f.onChange(A);const Ne=_(U,Se,ne),He=!cn(Ne)||ce;if(!ne&&p.state.next({name:U,type:A.type,values:Ot(s)}),fe)return(h.isValid||f.isValid)&&(e.mode==="onBlur"?ne&&v():ne||v()),He&&p.state.next({name:U,...ce?{}:Ne});if(!ne&&ce&&p.state.next({...r}),e.resolver){const{errors:_i}=await E([U]);if(y([U]),Z(Se),oe){const vn=XF(r.errors,n,U),bl=XF(_i,n,vn.name||U);Ke=bl.error,U=bl.name,St=cn(_i)}}else y([U],!0),Ke=(await uI(ee,a.disabled,s,m,e.shouldUseNativeValidation))[U],y([U]),Z(Se),oe&&(Ke?St=!1:(h.isValid||f.isValid)&&(St=await T(n,!0)));oe&&(ee._f.deps&&(!Array.isArray(ee._f.deps)||ee._f.deps.length>0)&&K(ee._f.deps),C(U,St,Ke,Ne))}},$=(A,L)=>{if(ue(r.errors,L)&&A.focus)return A.focus(),1},K=async(A,L={})=>{let U,oe;const ee=Gn(A);if(e.resolver){const Z=await N(Ct(A)?A:ee);U=cn(Z),oe=A?!ee.some(me=>ue(Z,me)):U}else A?(oe=(await Promise.all(ee.map(async Z=>{const me=ue(n,Z);return await T(me&&me._f?{[Z]:me}:me)}))).every(Boolean),!(!oe&&!r.isValid)&&v()):oe=U=await T(n);return p.state.next({...!di(A)||(h.isValid||f.isValid)&&U!==r.isValid?{}:{name:A},...e.resolver||!A?{isValid:U}:{},errors:r.errors}),L.shouldFocus&&!oe&&nd(n,$,A?ee:a.mount),oe},W=(A,L)=>{let U={...o.mount?s:i};return L&&(U=Zte(L.dirtyFields?r.dirtyFields:r.touchedFields,U)),Ct(A)?U:di(A)?ue(U,A):A.map(oe=>ue(U,oe))},F=(A,L)=>({invalid:!!ue((L||r).errors,A),isDirty:!!ue((L||r).dirtyFields,A),error:ue((L||r).errors,A),isValidating:!!ue(r.validatingFields,A),isTouched:!!ue((L||r).touchedFields,A)}),X=A=>{A&&Gn(A).forEach(L=>nr(r.errors,L)),p.state.next({errors:A?r.errors:{}})},Q=(A,L,U)=>{const oe=(ue(n,A,{_f:{}})._f||{}).ref,ee=ue(r.errors,A)||{},{ref:Z,message:me,type:Fe,...Ke}=ee;yt(r.errors,A,{...Ke,...L,ref:oe}),p.state.next({name:A,errors:r.errors,isValid:!1}),U&&U.shouldFocus&&oe&&oe.focus&&oe.focus()},Ce=(A,L)=>kn(A)?p.state.subscribe({next:U=>"values"in U&&A(O(void 0,L),U)}):O(A,L,!0),xe=A=>p.state.subscribe({next:L=>{Sme(A.name,L.name,A.exact)&&wme(L,A.formState||h,rr,A.reRenderRoot)&&A.callback({values:{...s},...r,...L,defaultValues:i})}}).unsubscribe,Be=A=>(o.mount=!0,f={...f,...A.formState},xe({...A,formState:{...u,...A.formState}})),at=(A,L={})=>{for(const U of A?Gn(A):a.mount)a.mount.delete(U),a.array.delete(U),L.keepValue||(nr(n,U),nr(s,U)),!L.keepError&&nr(r.errors,U),!L.keepDirty&&nr(r.dirtyFields,U),!L.keepTouched&&nr(r.touchedFields,U),!L.keepIsValidating&&nr(r.validatingFields,U),!e.shouldUnregister&&!L.keepDefaultValue&&nr(i,U);p.state.next({values:Ot(s)}),p.state.next({...r,...L.keepDirty?{isDirty:P()}:{}}),!L.keepIsValid&&v()},Kr=({disabled:A,name:L})=>{(ci(A)&&o.mount||A||a.disabled.has(L))&&(A?a.disabled.add(L):a.disabled.delete(L))},Sr=(A,L={})=>{let U=ue(n,A);const oe=ci(L.disabled)||ci(e.disabled);return yt(n,A,{...U||{},_f:{...U&&U._f?U._f:{ref:{name:A}},name:A,mount:!0,...L}}),a.mount.add(A),U?Kr({disabled:ci(L.disabled)?L.disabled:e.disabled,name:A}):S(A,!0,L.value),{...oe?{disabled:L.disabled||e.disabled}:{},...e.progressive?{required:!!L.required,min:Qh(L.min),max:Qh(L.max),minLength:Qh(L.minLength),maxLength:Qh(L.maxLength),pattern:Qh(L.pattern)}:{},name:A,onChange:q,onBlur:q,ref:ee=>{if(ee){Sr(A,L),U=ue(n,A);const Z=Ct(ee.value)&&ee.querySelectorAll&&ee.querySelectorAll("input,select,textarea")[0]||ee,me=pme(Z),Fe=U._f.refs||[];if(me?Fe.find(Ke=>Ke===Z):Z===U._f.ref)return;yt(n,A,{_f:{...U._f,...me?{refs:[...Fe.filter(y1),Z,...Array.isArray(ue(i,A))?[{}]:[]],ref:{type:Z.type,name:A}}:{ref:Z}}}),S(A,!1,void 0,Z)}else U=ue(n,A,{}),U._f&&(U._f.mount=!1),(e.shouldUnregister||L.shouldUnregister)&&!(Qte(a.array,A)&&o.action)&&a.unMount.add(A)}}},Wt=()=>e.shouldFocusError&&nd(n,$,a.mount),jr=A=>{ci(A)&&(p.state.next({disabled:A}),nd(n,(L,U)=>{const oe=ue(n,U);oe&&(L.disabled=oe._f.disabled||A,Array.isArray(oe._f.refs)&&oe._f.refs.forEach(ee=>{ee.disabled=oe._f.disabled||A}))},0,!1))},nt=(A,L)=>async U=>{let oe;U&&(U.preventDefault&&U.preventDefault(),U.persist&&U.persist());let ee=Ot(s);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:Z,values:me}=await E();y(),r.errors=Z,ee=Ot(me)}else await T(n);if(a.disabled.size)for(const Z of a.disabled)nr(ee,Z);if(nr(r.errors,"root"),cn(r.errors)){p.state.next({errors:{}});try{await A(ee,U)}catch(Z){oe=Z}}else L&&await L({...r.errors},U),Wt(),setTimeout(Wt);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:cn(r.errors)&&!oe,submitCount:r.submitCount+1,errors:r.errors}),oe)throw oe},yn=(A,L={})=>{ue(n,A)&&(Ct(L.defaultValue)?B(A,Ot(ue(i,A))):(B(A,L.defaultValue),yt(i,A,Ot(L.defaultValue))),L.keepTouched||nr(r.touchedFields,A),L.keepDirty||(nr(r.dirtyFields,A),r.isDirty=L.defaultValue?P(A,Ot(ue(i,A))):P()),L.keepError||(nr(r.errors,A),h.isValid&&v()),p.state.next({...r}))},$n=(A,L={})=>{const U=A?Ot(A):i,oe=Ot(U),ee=cn(A),Z=ee?i:oe;if(L.keepDefaultValues||(i=U),!L.keepValues){if(L.keepDirtyValues){const me=new Set([...a.mount,...Object.keys(Cu(i,s))]);for(const Fe of Array.from(me))ue(r.dirtyFields,Fe)?yt(Z,Fe,ue(s,Fe)):B(Fe,ue(Z,Fe))}else{if(wM&&Ct(A))for(const me of a.mount){const Fe=ue(n,me);if(Fe&&Fe._f){const Ke=Array.isArray(Fe._f.refs)?Fe._f.refs[0]:Fe._f.ref;if(Wy(Ke)){const St=Ke.closest("form");if(St){St.reset();break}}}}if(L.keepFieldsRef)for(const me of a.mount)B(me,ue(Z,me));else n={}}s=e.shouldUnregister?L.keepDefaultValues?Ot(i):{}:Ot(Z),p.array.next({values:{...Z}}),p.state.next({values:{...Z}})}a={mount:L.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!L.keepIsValid||!!L.keepDirtyValues||!e.shouldUnregister&&!cn(Z),o.watch=!!e.shouldUnregister,o.keepIsValid=!!L.keepIsValid,o.action=!1,L.keepErrors||(r.errors={}),p.state.next({submitCount:L.keepSubmitCount?r.submitCount:0,isDirty:ee?!1:L.keepDirty?r.isDirty:!!(L.keepDefaultValues&&!as(A,i)),isSubmitted:L.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:ee?{}:L.keepDirtyValues?L.keepDefaultValues&&s?Cu(i,s):r.dirtyFields:L.keepDefaultValues&&A?Cu(i,A):L.keepDirty?r.dirtyFields:{},touchedFields:L.keepTouched?r.touchedFields:{},errors:L.keepErrors?r.errors:{},isSubmitSuccessful:L.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},Pr=(A,L)=>$n(kn(A)?A(s):A,{...e.resetOptions,...L}),gt=(A,L={})=>{const U=ue(n,A),oe=U&&U._f;if(oe){const ee=oe.refs?oe.refs[0]:oe.ref;ee.focus&&setTimeout(()=>{ee.focus(),L.shouldSelect&&kn(ee.select)&&ee.select()})}},rr=A=>{r={...r,...A}},_r={control:{register:Sr,unregister:at,getFieldState:F,handleSubmit:nt,setError:Q,_subscribe:xe,_runSchema:E,_updateIsValidating:y,_focusError:Wt,_getWatch:O,_getDirty:P,_setValid:v,_setFieldArray:b,_setDisabledField:Kr,_setErrors:x,_getFieldArray:D,_reset:$n,_resetDefaultValues:()=>kn(e.defaultValues)&&e.defaultValues().then(A=>{Pr(A,e.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:j,_disableForm:jr,_subjects:p,_proxyFormState:h,get _fields(){return n},get _formValues(){return s},get _state(){return o},set _state(A){o=A},get _defaultValues(){return i},get _names(){return a},set _names(A){a=A},get _formState(){return r},get _options(){return e},set _options(A){e={...e,...A}}},subscribe:Be,trigger:K,register:Sr,handleSubmit:nt,watch:Ce,setValue:B,getValues:W,reset:Pr,resetField:yn,clearErrors:X,unregister:at,setError:Q,setFocus:gt,getFieldState:F};return{..._r,formControl:_r}}var Ko=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const t=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const r=(Math.random()*16+t)%16|0;return(e=="x"?r:r&3|8).toString(16)})},v1=(t,e,r={})=>r.shouldFocus||Ct(r.shouldFocus)?r.focusName||`${t}.${Ct(r.focusIndex)?e:r.focusIndex}.`:"",b1=(t,e)=>[...t,...Gn(e)],x1=t=>Array.isArray(t)?t.map(()=>{}):void 0;function w1(t,e,r){return[...t.slice(0,e),...Gn(r),...t.slice(e)]}var S1=(t,e,r)=>Array.isArray(t)?(Ct(t[r])&&(t[r]=void 0),t.splice(r,0,t.splice(e,1)[0]),t):[],_1=(t,e)=>[...Gn(e),...Gn(t)];function kme(t,e){let r=0;const n=[...t];for(const i of e)n.splice(i-r,1),r++;return O0(n).length?n:[]}var E1=(t,e)=>Ct(e)?[]:kme(t,Gn(e).sort((r,n)=>r-n)),C1=(t,e,r)=>{[t[e],t[r]]=[t[r],t[e]]},ZF=(t,e,r)=>(t[e]=r,t);function Tme(t){const e=j0(),{control:r=e.control,name:n,keyName:i="id",shouldUnregister:s,rules:o}=t,[a,l]=be.useState(r._getFieldArray(n)),c=be.useRef(r._getFieldArray(n).map(Ko)),u=be.useRef(!1);r._names.array.add(n),be.useMemo(()=>o&&a.length>=0&&r.register(n,o),[r,n,a.length,o]),P0(()=>r._subjects.array.subscribe({next:({values:x,name:S})=>{if(S===n||!S){const _=ue(x,n);Array.isArray(_)&&(l(_),c.current=_.map(Ko))}}}).unsubscribe,[r,n]);const h=be.useCallback(x=>{u.current=!0,r._setFieldArray(n,x)},[r,n]),f=(x,S)=>{const _=Gn(Ot(x)),C=b1(r._getFieldArray(n),_);r._names.focus=v1(n,C.length-1,S),c.current=b1(c.current,_.map(Ko)),h(C),l(C),r._setFieldArray(n,C,b1,{argA:x1(x)})},p=(x,S)=>{const _=Gn(Ot(x)),C=_1(r._getFieldArray(n),_);r._names.focus=v1(n,0,S),c.current=_1(c.current,_.map(Ko)),h(C),l(C),r._setFieldArray(n,C,_1,{argA:x1(x)})},m=x=>{const S=E1(r._getFieldArray(n),x);c.current=E1(c.current,x),h(S),l(S),!Array.isArray(ue(r._fields,n))&&yt(r._fields,n,void 0),r._setFieldArray(n,S,E1,{argA:x})},g=(x,S,_)=>{const C=Gn(Ot(S)),E=w1(r._getFieldArray(n),x,C);r._names.focus=v1(n,x,_),c.current=w1(c.current,x,C.map(Ko)),h(E),l(E),r._setFieldArray(n,E,w1,{argA:x,argB:x1(S)})},v=(x,S)=>{const _=r._getFieldArray(n);C1(_,x,S),C1(c.current,x,S),h(_),l(_),r._setFieldArray(n,_,C1,{argA:x,argB:S},!1)},y=(x,S)=>{const _=r._getFieldArray(n);S1(_,x,S),S1(c.current,x,S),h(_),l(_),r._setFieldArray(n,_,S1,{argA:x,argB:S},!1)},b=(x,S)=>{const _=Ot(S),C=ZF(r._getFieldArray(n),x,_);c.current=[...C].map((E,N)=>!E||N===x?Ko():c.current[N]),h(C),l([...C]),r._setFieldArray(n,C,ZF,{argA:x,argB:_},!0,!1)},w=x=>{const S=Gn(Ot(x));c.current=S.map(Ko),h([...S]),l([...S]),r._setFieldArray(n,[...S],_=>_,{},!0,!1)};return be.useEffect(()=>{if(r._state.action=!1,cI(n,r._names)&&r._subjects.state.next({...r._formState}),u.current&&(!zu(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!zu(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(x=>{r._updateIsValidating([n]);const S=ue(x.errors,n),_=ue(r._formState.errors,n);(_?!S&&_.type||S&&(_.type!==S.type||_.message!==S.message):S&&S.type)&&(S?yt(r._formState.errors,n,S):nr(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const x=ue(r._fields,n);x&&x._f&&!(zu(r._options.reValidateMode).isOnSubmit&&zu(r._options.mode).isOnSubmit)&&uI(x,r._names.disabled,r._formValues,r._options.criteriaMode===Mi.all,r._options.shouldUseNativeValidation,!0).then(S=>!cn(S)&&r._subjects.state.next({errors:sre(r._formState.errors,S,n)}))}r._subjects.state.next({name:n,values:Ot(r._formValues)}),r._names.focus&&nd(r._fields,(x,S)=>{if(r._names.focus&&S.startsWith(r._names.focus)&&x.focus)return x.focus(),1}),r._names.focus="",r._setValid(),u.current=!1},[a,n,r]),be.useEffect(()=>(!ue(r._formValues,n)&&r._setFieldArray(n),()=>{const x=(S,_)=>{const C=ue(r._fields,S);C&&C._f&&(C._f.mount=_)};r._options.shouldUnregister||s?r.unregister(n):x(n,!1)}),[n,r,i,s]),{swap:be.useCallback(v,[h,n,r]),move:be.useCallback(y,[h,n,r]),prepend:be.useCallback(p,[h,n,r]),append:be.useCallback(f,[h,n,r]),remove:be.useCallback(m,[h,n,r]),insert:be.useCallback(g,[h,n,r]),update:be.useCallback(b,[h,n,r]),replace:be.useCallback(w,[h,n,r]),fields:be.useMemo(()=>a.map((x,S)=>({...x,[i]:c.current[S]||Ko()})),[a,i])}}function Hc(t={}){const e=be.useRef(void 0),r=be.useRef(void 0),[n,i]=be.useState({isDirty:!1,isValidating:!1,isLoading:kn(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:kn(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:n},t.defaultValues&&!kn(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...a}=Nme(t);e.current={...a,formState:n}}const s=e.current.control;return s._options=t,P0(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(a=>({...a,isReady:!0})),s._formState.isReady=!0,o},[s]),be.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),be.useEffect(()=>{t.mode&&(s._options.mode=t.mode),t.reValidateMode&&(s._options.reValidateMode=t.reValidateMode)},[s,t.mode,t.reValidateMode]),be.useEffect(()=>{t.errors&&(s._setErrors(t.errors),s._focusError())},[s,t.errors]),be.useEffect(()=>{t.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,t.shouldUnregister]),be.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==n.isDirty&&s._subjects.state.next({isDirty:o})}},[s,n.isDirty]),be.useEffect(()=>{var o;t.values&&!as(t.values,r.current)?(s._reset(t.values,{keepFieldsRef:!0,...s._options.resetOptions}),!((o=s._options.resetOptions)===null||o===void 0)&&o.keepIsValid||s._setValid(),r.current=t.values,i(a=>({...a}))):s._resetDefaultValues()},[s,t.values]),be.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=Jte(n,s),e.current}function CM({isOpen:t,onClose:e,onSubmit:r,isLoading:n,person:i=null}){const s=!!i,[o,a]=k.useState(!1),[l,c]=k.useState(null),[u,h]=k.useState(null),{data:f=[]}=lt({queryKey:["date-types"],queryFn:async()=>(await qe.getDateTypes()).data,enabled:t&&!s}),p=f.find(N=>N.slug==="birthday"||N.name.toLowerCase()==="birthday"),m=tt({mutationFn:async N=>{const T=new FormData;return T.append("file",N),(await de.post("/prm/v1/import/vcard/parse",T,{headers:{"Content-Type":"multipart/form-data"}})).data}}),{register:g,handleSubmit:v,reset:y,formState:{errors:b}}=Hc({defaultValues:{first_name:"",last_name:"",nickname:"",gender:"",email:"",phone:"",phone_type:"mobile",birthday:"",how_we_met:"",is_favorite:!1}});k.useEffect(()=>{var N,T,j,P,O,D,z,R,B,q;if(t)if(c(null),h(null),m.reset(),i){const $=(T=(N=i.acf)==null?void 0:N.contact_info)==null?void 0:T.find(W=>W.contact_type==="email"),K=(P=(j=i.acf)==null?void 0:j.contact_info)==null?void 0:P.find(W=>W.contact_type==="phone"||W.contact_type==="mobile");y({first_name:((O=i.acf)==null?void 0:O.first_name)||"",last_name:((D=i.acf)==null?void 0:D.last_name)||"",nickname:((z=i.acf)==null?void 0:z.nickname)||"",gender:((R=i.acf)==null?void 0:R.gender)||"",email:($==null?void 0:$.contact_value)||"",phone:(K==null?void 0:K.contact_value)||"",phone_type:(K==null?void 0:K.contact_type)||"mobile",birthday:"",how_we_met:((B=i.acf)==null?void 0:B.how_we_met)||"",is_favorite:((q=i.acf)==null?void 0:q.is_favorite)||!1})}else y({first_name:"",last_name:"",nickname:"",gender:"",email:"",phone:"",phone_type:"mobile",birthday:"",how_we_met:"",is_favorite:!1})},[t,i,y]);const w=k.useCallback(N=>{N.preventDefault(),N.stopPropagation(),N.type==="dragenter"||N.type==="dragover"?a(!0):N.type==="dragleave"&&a(!1)},[]),x=k.useCallback(N=>{N.preventDefault(),N.stopPropagation(),a(!1),h(null),N.dataTransfer.files&&N.dataTransfer.files[0]&&S(N.dataTransfer.files[0])},[]),S=N=>{const T=N.name.split(".").pop().toLowerCase();if(T!=="vcf"&&T!=="vcard"){h("Please select a vCard file (.vcf)");return}c(N),m.mutate(N,{onSuccess:j=>{y({first_name:j.first_name||"",last_name:j.last_name||"",nickname:j.nickname||"",gender:"",email:j.email||"",phone:j.phone||"",phone_type:j.phone_type||"mobile",birthday:j.birthday||"",how_we_met:j.note||"",is_favorite:!1}),j.contact_count>1&&h(`Note: File contains ${j.contact_count} contacts. Only the first contact was loaded.`)},onError:j=>{var P,O;h(((O=(P=j.response)==null?void 0:P.data)==null?void 0:O.message)||"Failed to parse vCard file"),c(null)}})},_=N=>{h(null),N.target.files&&N.target.files[0]&&S(N.target.files[0])},C=()=>{c(null),h(null),m.reset()};if(!t)return null;const E=N=>{r({...N,birthdayType:p})};return d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[d.jsx("h2",{className:"text-lg font-semibold",children:s?"Edit person":"Add person"}),d.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:d.jsx(Rt,{className:"w-5 h-5"})})]}),d.jsxs("form",{onSubmit:v(E),className:"flex flex-col flex-1 overflow-hidden",children:[d.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[!s&&d.jsxs("div",{children:[d.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-3 text-center transition-colors ${o?"border-primary-500 bg-primary-50":l&&!u?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:w,onDragLeave:w,onDragOver:w,onDrop:x,children:[d.jsx("input",{type:"file",accept:".vcf,.vcard",onChange:_,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:n}),m.isPending?d.jsxs("div",{className:"flex items-center justify-center gap-2 py-1",children:[d.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Parsing vCard..."})]}):l&&!u?d.jsxs("div",{className:"flex items-center justify-center gap-2 py-1",children:[d.jsx(Zp,{className:"h-4 w-4 text-green-600"}),d.jsxs("span",{className:"text-sm text-green-700",children:["Loaded from ",l.name]}),d.jsx("button",{type:"button",onClick:N=>{N.preventDefault(),N.stopPropagation(),C()},className:"ml-1 p-0.5 hover:bg-green-100 rounded",children:d.jsx(Rt,{className:"h-3 w-3 text-green-600"})})]}):d.jsxs("div",{className:"flex items-center justify-center gap-2 py-1",children:[d.jsx(Cc,{className:"h-4 w-4 text-gray-400"}),d.jsxs("span",{className:"text-sm text-gray-600",children:["Drop a vCard or ",d.jsx("span",{className:"text-primary-600",children:"browse"})]})]})]}),u&&d.jsxs("div",{className:"mt-2 flex items-start gap-2 text-xs text-amber-700 bg-amber-50 rounded-lg p-2",children:[d.jsx(Ro,{className:"h-3 w-3 mt-0.5 flex-shrink-0"}),d.jsx("span",{children:u})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"First name *"}),d.jsx("input",{...g("first_name",{required:"First name is required"}),className:"input",placeholder:"John",disabled:n,autoFocus:!0}),b.first_name&&d.jsx("p",{className:"text-sm text-red-600 mt-1",children:b.first_name.message})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Last name"}),d.jsx("input",{...g("last_name"),className:"input",placeholder:"Doe",disabled:n})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Nickname"}),d.jsx("input",{...g("nickname"),className:"input",placeholder:"Johnny",disabled:n})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Gender"}),d.jsxs("select",{...g("gender"),className:"input",disabled:n,children:[d.jsx("option",{value:"",children:"Select..."}),d.jsx("option",{value:"male",children:"Male"}),d.jsx("option",{value:"female",children:"Female"}),d.jsx("option",{value:"non_binary",children:"Non-binary"}),d.jsx("option",{value:"other",children:"Other"}),d.jsx("option",{value:"prefer_not_to_say",children:"Prefer not to say"})]})]}),!s&&d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Email"}),d.jsx("input",{...g("email"),type:"email",className:"input",placeholder:"john@example.com",disabled:n}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Gravatar will be auto-fetched if available"})]}),!s&&d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Phone"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("select",{...g("phone_type"),className:"input w-24",disabled:n,children:[d.jsx("option",{value:"mobile",children:"Mobile"}),d.jsx("option",{value:"phone",children:"Phone"})]}),d.jsx("input",{...g("phone"),type:"tel",className:"input flex-1",placeholder:"+1 234 567 890",disabled:n})]})]}),!s&&d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Birthday"}),d.jsx("input",{...g("birthday"),type:"date",className:"input",disabled:n})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"How we met"}),d.jsx("textarea",{...g("how_we_met"),className:"input",rows:3,placeholder:"We met at...",disabled:n})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",id:"is_favorite",...g("is_favorite"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),d.jsx("label",{htmlFor:"is_favorite",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Mark as favorite"})]})]}),d.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[d.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),d.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":s?"Save changes":"Create person"})]})]})]})})}function NM({isOpen:t,onClose:e,onSubmit:r,isLoading:n,company:i=null}){var R,B,q;const s=!!i,[o,a]=k.useState(!1),[l,c]=k.useState(""),[u,h]=k.useState(""),[f,p]=k.useState(!1),[m,g]=k.useState(""),[v,y]=k.useState([]),b=k.useRef(null),w=k.useRef(null),{data:x=[],isLoading:S}=lt({queryKey:["companies","all"],queryFn:async()=>(await qe.getCompanies({per_page:100,_embed:!0})).data,enabled:t}),{data:_=[],isLoading:C}=lt({queryKey:["people","all"],queryFn:async()=>(await qe.getPeople({per_page:100,_embed:!0})).data,enabled:t}),{register:E,handleSubmit:N,reset:T,formState:{errors:j}}=Hc({defaultValues:{title:"",website:"",industry:""}}),P=k.useMemo(()=>{const $=l.toLowerCase().trim();let K=x.filter(W=>!(s&&W.id===(i==null?void 0:i.id)||s&&W.parent===(i==null?void 0:i.id)));return $&&(K=K.filter(W=>{var F;return(F=cr(W))==null?void 0:F.toLowerCase().includes($)})),[...K].sort((W,F)=>(cr(W)||"").localeCompare(cr(F)||""))},[x,l,i,s]),O=k.useMemo(()=>x.find($=>$.id===parseInt(u)),[x,u]),D=k.useMemo(()=>{const $=m.toLowerCase().trim(),K=_.map(Q=>{var Ce,xe,Be,at;return{id:Q.id,type:"person",name:Kn(((Ce=Q.title)==null?void 0:Ce.rendered)||""),thumbnail:(at=(Be=(xe=Q._embedded)==null?void 0:xe["wp:featuredmedia"])==null?void 0:Be[0])==null?void 0:at.source_url}}),W=x.filter(Q=>!s||Q.id!==(i==null?void 0:i.id)).map(Q=>{var Ce,xe,Be;return{id:Q.id,type:"company",name:cr(Q),thumbnail:(Be=(xe=(Ce=Q._embedded)==null?void 0:Ce["wp:featuredmedia"])==null?void 0:xe[0])==null?void 0:Be.source_url}});let F=[...K,...W];$&&(F=F.filter(Q=>{var Ce;return(Ce=Q.name)==null?void 0:Ce.toLowerCase().includes($)}));const X=v.map(Q=>`${Q.type}-${Q.id}`);return F=F.filter(Q=>!X.includes(`${Q.type}-${Q.id}`)),F.sort((Q,Ce)=>(Q.name||"").localeCompare(Ce.name||""))},[_,x,m,v,i,s]);if(k.useEffect(()=>{var $,K,W;t&&(a(!1),p(!1),c(""),g(""),i?(T({title:Kn((($=i.title)==null?void 0:$.rendered)||""),website:((K=i.acf)==null?void 0:K.website)||"",industry:((W=i.acf)==null?void 0:W.industry)||""}),h(i.parent?String(i.parent):"")):(T({title:"",website:"",industry:""}),h(""),y([])))},[t,i,T]),k.useEffect(()=>{var $,K;if(t&&((K=($=i==null?void 0:i.acf)==null?void 0:$.investors)==null?void 0:K.length)>0&&_.length>0&&x.length>0){const F=i.acf.investors.map(X=>{var xe,Be,at,Kr,Sr,Wt,jr;const Q=_.find(nt=>nt.id===X);if(Q)return{id:Q.id,type:"person",name:Kn(((xe=Q.title)==null?void 0:xe.rendered)||""),thumbnail:(Kr=(at=(Be=Q._embedded)==null?void 0:Be["wp:featuredmedia"])==null?void 0:at[0])==null?void 0:Kr.source_url};const Ce=x.find(nt=>nt.id===X);return Ce?{id:Ce.id,type:"company",name:cr(Ce),thumbnail:(jr=(Wt=(Sr=Ce._embedded)==null?void 0:Sr["wp:featuredmedia"])==null?void 0:Wt[0])==null?void 0:jr.source_url}:null}).filter(Boolean);y(F)}else t&&!i&&y([])},[t,i,_,x]),k.useEffect(()=>{const $=K=>{b.current&&!b.current.contains(K.target)&&a(!1)};if(o)return document.addEventListener("mousedown",$),()=>document.removeEventListener("mousedown",$)},[o]),k.useEffect(()=>{const $=K=>{w.current&&!w.current.contains(K.target)&&p(!1)};if(f)return document.addEventListener("mousedown",$),()=>document.removeEventListener("mousedown",$)},[f]),!t)return null;const z=$=>{r({...$,parentId:u?parseInt(u):0,investors:v.map(K=>K.id)})};return d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[d.jsx("h2",{className:"text-lg font-semibold",children:s?"Edit organization":"Add organization"}),d.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:d.jsx(Rt,{className:"w-5 h-5"})})]}),d.jsxs("form",{onSubmit:N(z),className:"flex flex-col flex-1 overflow-hidden",children:[d.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Organization name *"}),d.jsx("input",{...E("title",{required:"Organization name is required"}),className:"input",placeholder:"Acme Inc.",disabled:n,autoFocus:!0}),j.title&&d.jsx("p",{className:"text-sm text-red-600 mt-1",children:j.title.message})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Website"}),d.jsx("input",{...E("website"),type:"url",className:"input",placeholder:"https://example.com",disabled:n})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Industry"}),d.jsx("input",{...E("industry"),className:"input",placeholder:"Technology",disabled:n})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Parent organization"}),d.jsxs("div",{className:"relative",ref:b,children:[d.jsxs("button",{type:"button",onClick:()=>a(!o),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:S||n,children:[O?d.jsxs("div",{className:"flex items-center gap-2",children:[(q=(B=(R=O._embedded)==null?void 0:R["wp:featuredmedia"])==null?void 0:B[0])!=null&&q.source_url?d.jsx("img",{src:O._embedded["wp:featuredmedia"][0].source_url,alt:cr(O),className:"w-6 h-6 rounded object-contain bg-white"}):d.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center",children:d.jsx(kr,{className:"w-4 h-4 text-gray-500"})}),d.jsx("span",{className:"text-gray-900",children:cr(O)})]}):d.jsx("span",{className:"text-gray-400",children:"No parent organization"}),d.jsx(zy,{className:`w-4 h-4 text-gray-400 transition-transform ${o?"rotate-180":""}`})]}),o&&d.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[d.jsx("div",{className:"p-2 border-b border-gray-100",children:d.jsxs("div",{className:"relative",children:[d.jsx(Ec,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),d.jsx("input",{type:"text",value:l,onChange:$=>c($.target.value),placeholder:"Search organizations...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),d.jsxs("div",{className:"overflow-y-auto max-h-48",children:[d.jsx("button",{type:"button",onClick:()=>{h(""),a(!1),c("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${u?"":"bg-primary-50"}`,children:d.jsx("span",{className:"text-sm text-gray-500 italic",children:"No parent organization"})}),S?d.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):P.length>0?P.map($=>{var K,W,F;return d.jsxs("button",{type:"button",onClick:()=>{h(String($.id)),a(!1),c("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${u===String($.id)?"bg-primary-50":""}`,children:[(F=(W=(K=$._embedded)==null?void 0:K["wp:featuredmedia"])==null?void 0:W[0])!=null&&F.source_url?d.jsx("img",{src:$._embedded["wp:featuredmedia"][0].source_url,alt:cr($),className:"w-6 h-6 rounded object-contain bg-white"}):d.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center",children:d.jsx(kr,{className:"w-4 h-4 text-gray-500"})}),d.jsx("span",{className:"text-sm text-gray-900 truncate",children:cr($)})]},$.id)}):d.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"No organizations found"})]})]})]}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select if this organization is a subsidiary or division of another"})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"label flex items-center",children:[d.jsx(Vy,{className:"w-4 h-4 mr-2"}),"Investors"]}),v.length>0&&d.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:v.map($=>d.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-100 rounded-full pl-1 pr-2 py-1",children:[$.thumbnail?d.jsx("img",{src:$.thumbnail,alt:$.name,className:`w-5 h-5 object-cover ${$.type==="person"?"rounded-full":"rounded"}`}):d.jsx("div",{className:`w-5 h-5 bg-gray-300 flex items-center justify-center ${$.type==="person"?"rounded-full":"rounded"}`,children:$.type==="person"?d.jsx(Za,{className:"w-3 h-3 text-gray-500"}):d.jsx(kr,{className:"w-3 h-3 text-gray-500"})}),d.jsx("span",{className:"text-sm text-gray-700",children:$.name}),d.jsx("button",{type:"button",onClick:()=>y(K=>K.filter(W=>!(W.id===$.id&&W.type===$.type))),className:"ml-1 text-gray-400 hover:text-gray-600",disabled:n,children:d.jsx(Rt,{className:"w-3.5 h-3.5"})})]},`${$.type}-${$.id}`))}),d.jsxs("div",{className:"relative",ref:w,children:[d.jsxs("button",{type:"button",onClick:()=>p(!f),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:S||C||n,children:[d.jsx("span",{className:"text-gray-400",children:"Add investor..."}),d.jsx(zy,{className:`w-4 h-4 text-gray-400 transition-transform ${f?"rotate-180":""}`})]}),f&&d.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[d.jsx("div",{className:"p-2 border-b border-gray-100",children:d.jsxs("div",{className:"relative",children:[d.jsx(Ec,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),d.jsx("input",{type:"text",value:m,onChange:$=>g($.target.value),placeholder:"Search people and organizations...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),d.jsx("div",{className:"overflow-y-auto max-h-48",children:S||C?d.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):D.length>0?D.map($=>d.jsxs("button",{type:"button",onClick:()=>{y(K=>[...K,$]),g("")},className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors",children:[$.thumbnail?d.jsx("img",{src:$.thumbnail,alt:$.name,className:`w-6 h-6 object-cover ${$.type==="person"?"rounded-full":"rounded"}`}):d.jsx("div",{className:`w-6 h-6 bg-gray-200 flex items-center justify-center ${$.type==="person"?"rounded-full":"rounded"}`,children:$.type==="person"?d.jsx(Za,{className:"w-4 h-4 text-gray-500"}):d.jsx(kr,{className:"w-4 h-4 text-gray-500"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("span",{className:"text-sm text-gray-900 truncate block",children:$.name}),d.jsx("span",{className:"text-xs text-gray-500",children:$.type==="person"?"Person":"Organization"})]})]},`${$.type}-${$.id}`)):d.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:m?"No results found":"No people or organizations available"})})]})]}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select people or organizations that have invested in this company"})]})]}),d.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[d.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),d.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":s?"Save changes":"Create organization"})]})]})]})})}function Ome({value:t=[],onChange:e,people:r=[],isLoading:n,currentPersonId:i}){const[s,o]=k.useState(""),a=k.useMemo(()=>{if(!s)return r.slice(0,10);const h=s.toLowerCase();return r.filter(f=>rd(f).toLowerCase().includes(h)).slice(0,10)},[r,s]),l=k.useMemo(()=>t.map(h=>r.find(f=>f.id===h)).filter(Boolean),[t,r]),c=h=>{t.includes(h)||e([...t,h]),o("")},u=h=>{h!==i&&e(t.filter(f=>f!==h))};return d.jsxs("div",{className:"space-y-2",children:[l.length>0&&d.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(h=>d.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-primary-100 text-primary-800 rounded-full text-sm",children:[rd(h),h.id!==i&&d.jsx("button",{type:"button",onClick:()=>u(h.id),className:"hover:text-primary-600",children:d.jsx(Rt,{className:"w-3 h-3"})})]},h.id))}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"text",value:s,onChange:h=>o(h.target.value),placeholder:"Search for people to add...",className:"input",disabled:n}),s&&d.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:a.length>0?a.map(h=>d.jsx("button",{type:"button",onClick:()=>c(h.id),disabled:t.includes(h.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t.includes(h.id)?"opacity-50 cursor-not-allowed":""}`,children:rd(h)},h.id)):d.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No people found"})})]})]})}function kM({isOpen:t,onClose:e,onSubmit:r,isLoading:n,dateItem:i=null,personId:s,allPeople:o=[],isPeopleLoading:a=!1}){const l=!!i,{data:c=[]}=lt({queryKey:["date-types"],queryFn:async()=>((await qe.getDateTypes()).data||[]).sort((C,E)=>{const N=C.name||"",T=E.name||"";return N.localeCompare(T)})}),{register:u,handleSubmit:h,reset:f,watch:p,setValue:m,control:g,formState:{errors:v}}=Hc({defaultValues:{title:"",date_value:"",date_type:"",related_people:[],is_recurring:!0,year_unknown:!1}}),y=p("related_people"),b=p("date_type"),w=p("title");if(k.useEffect(()=>{var C;if((!w||["'s Birthday","Wedding of "].some(E=>w.endsWith(E)||w.startsWith(E)))&&(y==null?void 0:y.length)>0&&b){const E=c.find(P=>P.id===parseInt(b)),N=(E==null?void 0:E.name)||"",T=((C=E==null?void 0:E.slug)==null?void 0:C.toLowerCase())||N.toLowerCase(),j=y.map(P=>{var D,z,R;const O=o.find(B=>B.id===P);return O?Kn(((D=O.acf)==null?void 0:D.first_name)||O.first_name||((R=(z=O.title)==null?void 0:z.rendered)==null?void 0:R.split(" ")[0])||""):null}).filter(Boolean);if(j.length>0&&N){let P;T==="wedding"?P=j.length>=2?`Wedding of ${j[0]} & ${j[1]}`:`Wedding of ${j[0]}`:P=`${j[0]}'s ${N}`,m("title",P)}}},[y,b,o,c,m,w]),k.useEffect(()=>{var S,_,C,E,N,T;if(t)if(i){let j=[];const P=(S=i.acf)==null?void 0:S.related_people;P&&(Array.isArray(P)?j=P.map(D=>parseInt(typeof D=="object"&&D!==null?D.ID||D.id||D.post_id:D,10)).filter(D=>!isNaN(D)&&D>0):typeof P=="number"&&(j=[P]));let O="";((_=i.date_type)==null?void 0:_.length)>0&&(O=i.date_type[0].toString()),f({title:Kn(((C=i.title)==null?void 0:C.rendered)||i.title||""),date_value:((E=i.acf)==null?void 0:E.date_value)||i.date_value||"",date_type:O,related_people:j,is_recurring:((N=i.acf)==null?void 0:N.is_recurring)??i.is_recurring??!0,year_unknown:((T=i.acf)==null?void 0:T.year_unknown)??i.year_unknown??!1})}else f({title:"",date_value:"",date_type:"",related_people:s?[parseInt(s)]:[],is_recurring:!0,year_unknown:!1})},[t,i,s,f]),!t)return null;const x=S=>{r({title:S.title,date_type:S.date_type?[parseInt(S.date_type)]:[],date_value:S.date_value,related_people:S.related_people,is_recurring:S.is_recurring,year_unknown:S.year_unknown})};return d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[d.jsx("h2",{className:"text-lg font-semibold",children:l?"Edit date":"Add date"}),d.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:d.jsx(Rt,{className:"w-5 h-5"})})]}),d.jsxs("form",{onSubmit:h(x),className:"flex flex-col flex-1 overflow-hidden",children:[d.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Related people"}),d.jsx(Hy,{name:"related_people",control:g,render:({field:S})=>d.jsx(Ome,{value:S.value,onChange:S.onChange,people:o,isLoading:a,currentPersonId:parseInt(s)})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Date type *"}),d.jsx(Hy,{name:"date_type",control:g,rules:{required:"Please select a date type"},render:({field:S})=>d.jsxs("select",{value:S.value?String(S.value):"",onChange:_=>S.onChange(_.target.value),className:"input",disabled:n,children:[d.jsx("option",{value:"",children:"Select a type..."}),c.map(_=>d.jsx("option",{value:String(_.id),children:_.name},_.id))]})}),v.date_type&&d.jsx("p",{className:"text-sm text-red-600 mt-1",children:v.date_type.message})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Label"}),d.jsx("input",{...u("title"),className:"input",placeholder:"e.g., Mom's Birthday",disabled:n}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-generated from person and date type. You can customize it."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Date *"}),d.jsx("input",{...u("date_value",{required:"Date is required"}),type:"date",className:"input",disabled:n}),v.date_value&&d.jsx("p",{className:"text-sm text-red-600 mt-1",children:v.date_value.message})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",id:"year_unknown",...u("year_unknown"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),d.jsx("label",{htmlFor:"year_unknown",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Year unknown"})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",id:"is_recurring",...u("is_recurring"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),d.jsx("label",{htmlFor:"is_recurring",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Repeats every year"})]})]}),d.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[d.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),d.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":l?"Save changes":"Add date"})]})]})]})})}const jme=[{name:"Dashboard",href:"/",icon:kpe},{name:"People",href:"/people",icon:Fs},{name:"Organizations",href:"/companies",icon:kr},{name:"Dates",href:"/dates",icon:yo},{name:"Todos",href:"/todos",icon:$s},{name:"Settings",href:"/settings",icon:Ate}];function e4({mobile:t=!1,onClose:e}){const{logoutUrl:r}=dM();return d.jsxs("div",{className:"flex flex-col h-full bg-white border-r border-gray-200",children:[d.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[d.jsxs(Ye,{to:"/",className:"flex items-center gap-2 text-xl font-bold text-primary-600",children:[d.jsx($te,{className:"w-5 h-5"}),Nc]}),t&&d.jsx("button",{onClick:e,className:"p-2 -mr-2",children:d.jsx(Rt,{className:"w-5 h-5"})})]}),d.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1 overflow-y-auto",children:jme.map(n=>d.jsxs(ahe,{to:n.href,onClick:t?e:void 0,className:({isActive:i})=>`flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${i?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-50"}`,children:[d.jsx(n.icon,{className:"w-5 h-5 mr-3"}),n.name]},n.name))}),d.jsx("div",{className:"p-4 border-t border-gray-200",children:d.jsxs("a",{href:r,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[d.jsx(Ipe,{className:"w-5 h-5 mr-3"}),"Log Out"]})})]})}function Pme(){var o;const[t,e]=k.useState(!1),r=k.useRef(null),{data:n,isLoading:i}=lt({queryKey:["current-user"],queryFn:async()=>(await Ae.getCurrentUser()).data});if(k.useEffect(()=>{const a=l=>{r.current&&!r.current.contains(l.target)&&e(!1)};if(t)return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[t]),i||!n)return d.jsx("div",{className:"flex items-center ml-auto",children:d.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full animate-pulse"})});const s=((o=n.name)==null?void 0:o.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2))||"?";return d.jsxs("div",{className:"relative ml-auto",ref:r,children:[d.jsxs("button",{onClick:()=>e(!t),className:"flex items-center gap-2 p-1 rounded-full hover:bg-gray-100 transition-colors","aria-label":"User menu",children:[n.avatar_url?d.jsx("img",{src:n.avatar_url,alt:n.name,className:"w-8 h-8 rounded-full object-cover"}):d.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:d.jsx("span",{className:"text-sm font-medium text-primary-700",children:s})}),d.jsx(zy,{className:`w-4 h-4 text-gray-500 transition-transform ${t?"rotate-180":""}`})]}),t&&d.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:d.jsxs("div",{className:"py-1",children:[d.jsxs("a",{href:n.profile_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>e(!1),children:[d.jsx(Za,{className:"w-4 h-4 mr-2"}),d.jsx("span",{className:"hidden md:inline",children:"Edit profile"})]}),n.is_admin&&d.jsxs("a",{href:n.admin_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>e(!1),children:[d.jsx(Ate,{className:"w-4 h-4 mr-2"}),d.jsx("span",{className:"hidden md:inline",children:"WordPress admin"})]})]})})]})}function Ime({isOpen:t,onClose:e}){const[r,n]=k.useState(""),[i,s]=k.useState(0),o=ms(),a=k.useRef(null),l=r.trim(),{data:c,isLoading:u}=Qpe(l),h=c||{people:[],companies:[]},f=[...(h.people||[]).map(y=>({...y,type:"person"})),...(h.companies||[]).map(y=>({...y,type:"company"}))],p=f.length>0,m=r.trim().length>=2;k.useEffect(()=>{t&&(n(""),s(0),setTimeout(()=>{var y;return(y=a.current)==null?void 0:y.focus()},50))},[t]),k.useEffect(()=>{s(0)},[c]);const g=y=>{if(y.key==="Escape"){e();return}if(!(!m||!p)){if(y.key==="ArrowDown")y.preventDefault(),s(b=>Math.min(b+1,f.length-1));else if(y.key==="ArrowUp")y.preventDefault(),s(b=>Math.max(b-1,0));else if(y.key==="Enter"){y.preventDefault();const b=f[i];b&&v(b.type,b.id)}}},v=(y,b)=>{e(),y==="person"?o(`/people/${b}`):y==="company"&&o(`/companies/${b}`)};return t?d.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[d.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:e}),d.jsx("div",{className:"relative min-h-screen flex items-start justify-center pt-[15vh] px-4",children:d.jsxs("div",{className:"relative w-full max-w-xl bg-white rounded-xl shadow-2xl overflow-hidden",children:[d.jsxs("div",{className:"flex items-center px-4 border-b border-gray-200",children:[d.jsx(Ec,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),d.jsx("input",{ref:a,type:"text",value:r,onChange:y=>n(y.target.value),onKeyDown:g,placeholder:"Search people & organizations...",className:"flex-1 px-4 py-4 text-lg outline-none placeholder:text-gray-400",autoComplete:"off"}),d.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[d.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-gray-500 font-mono",children:"esc"}),d.jsx("span",{children:"to close"})]})]}),d.jsx("div",{className:"max-h-96 overflow-y-auto",children:m?u?d.jsxs("div",{className:"px-4 py-8 text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),d.jsx("p",{className:"mt-3 text-sm text-gray-500",children:"Searching..."})]}):p?d.jsxs("div",{className:"py-2",children:[h.people&&h.people.length>0&&d.jsxs("div",{className:"px-2",children:[d.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"People"}),h.people.map((y,b)=>{const x=i===b;return d.jsxs("button",{onClick:()=>v("person",y.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors text-left ${x?"bg-primary-50 text-primary-900":"hover:bg-gray-50"}`,children:[y.thumbnail?d.jsx("img",{src:y.thumbnail,alt:y.name,className:"w-8 h-8 rounded-full object-cover"}):d.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:d.jsx(Za,{className:"w-4 h-4 text-gray-500"})}),d.jsx("span",{className:"text-sm font-medium flex-1 truncate",children:y.name}),x&&d.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:""})]},y.id)})]}),h.companies&&h.companies.length>0&&d.jsxs("div",{className:"px-2 mt-2",children:[d.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Organizations"}),h.companies.map((y,b)=>{var S;const w=(((S=h.people)==null?void 0:S.length)||0)+b,x=i===w;return d.jsxs("button",{onClick:()=>v("company",y.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors text-left ${x?"bg-primary-50 text-primary-900":"hover:bg-gray-50"}`,children:[y.thumbnail?d.jsx("img",{src:y.thumbnail,alt:y.name,className:"w-8 h-8 rounded object-contain bg-white"}):d.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded flex items-center justify-center",children:d.jsx(kr,{className:"w-4 h-4 text-gray-500"})}),d.jsx("span",{className:"text-sm font-medium flex-1 truncate",children:y.name}),x&&d.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:""})]},y.id)})]})]}):d.jsx("div",{className:"px-4 py-8 text-center text-gray-500",children:d.jsxs("p",{className:"text-sm",children:['No results found for "',r,'"']})}):d.jsxs("div",{className:"px-4 py-8 text-center text-gray-500",children:[d.jsx(Ec,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),d.jsx("p",{className:"text-sm",children:"Type at least 2 characters to search"})]})}),d.jsx("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-xs text-gray-500",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),d.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),d.jsx("span",{children:"to navigate"})]}),d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),d.jsx("span",{children:"to select"})]})]})})]})})]}):null}function Rme({onAddTodo:t,onAddPerson:e,onAddCompany:r,onAddDate:n}){const[i,s]=k.useState(!1),o=k.useRef(null);k.useEffect(()=>{const h=f=>{o.current&&!o.current.contains(f.target)&&s(!1)};if(i)return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[i]);const a=()=>{s(!1),t()},l=()=>{s(!1),e()},c=()=>{s(!1),r()},u=()=>{s(!1),n()};return d.jsxs("div",{className:"relative",ref:o,children:[d.jsx("button",{onClick:()=>s(!i),className:"flex items-center justify-center w-9 h-9 rounded-lg bg-primary-600 hover:bg-primary-700 text-white transition-colors","aria-label":"Quick add",title:"Quick add",children:d.jsx(Jt,{className:"w-5 h-5"})}),i&&d.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:d.jsxs("div",{className:"py-1",children:[d.jsxs("button",{onClick:l,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[d.jsx(Za,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Person"]}),d.jsxs("button",{onClick:c,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[d.jsx(kr,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Organization"]}),d.jsxs("button",{onClick:a,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[d.jsx($s,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Todo"]}),d.jsxs("button",{onClick:u,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[d.jsx(yo,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Date"]})]})})]})}function Mme({onMenuClick:t,onAddTodo:e,onAddPerson:r,onAddCompany:n,onAddDate:i,onOpenSearch:s}){const o=Fo(),a=()=>{const l=o.pathname;return l==="/"?"Dashboard":l.startsWith("/people")?"People":l.startsWith("/companies")?"Organizations":l.startsWith("/dates")?"Important Dates":l.startsWith("/todos")?"Todos":l.startsWith("/settings")?"Settings":""};return d.jsxs("header",{className:"sticky top-0 z-10 flex items-center h-16 px-4 bg-white border-b border-gray-200 lg:px-6",children:[d.jsx("button",{onClick:t,className:"p-2 -ml-2 lg:hidden",children:d.jsx(Mpe,{className:"w-5 h-5"})}),d.jsx("h1",{className:"ml-2 text-lg font-semibold lg:ml-0",children:a()}),d.jsx("div",{className:"flex-1"}),d.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg border border-gray-200 hover:bg-gray-50 text-gray-500 transition-colors","aria-label":"Search",title:"Search (K)",children:[d.jsx(Ec,{className:"w-4 h-4"}),d.jsx("span",{className:"hidden sm:inline text-sm",children:"Search..."}),d.jsxs("kbd",{className:"hidden sm:flex items-center gap-0.5 px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:[d.jsx(Epe,{className:"w-3 h-3"}),"K"]})]}),d.jsx("div",{className:"ml-2",children:d.jsx(Rme,{onAddTodo:e,onAddPerson:r,onAddCompany:n,onAddDate:i})}),d.jsx("div",{className:"ml-2",children:d.jsx(Pme,{})})]})}function Ame({children:t}){const[e,r]=k.useState(!1),[n,i]=k.useState(!1),[s,o]=k.useState(!1),[a,l]=k.useState(!1),[c,u]=k.useState(!1),[h,f]=k.useState(!1),[p,m]=k.useState(!1),[g,v]=k.useState(!1),[y,b]=k.useState(!1),w=ms(),x=vt(),{data:S=[],isLoading:_}=Uc();Bte();const C=tt({mutationFn:async O=>{const D=[];O.email&&D.push({contact_type:"email",contact_value:O.email,contact_label:"Email"}),O.phone&&D.push({contact_type:O.phone_type||"mobile",contact_value:O.phone,contact_label:O.phone_type==="mobile"?"Mobile":"Phone"});const z={title:`${O.first_name} ${O.last_name}`.trim(),status:"publish",acf:{first_name:O.first_name,last_name:O.last_name,nickname:O.nickname,gender:O.gender||null,how_we_met:O.how_we_met,is_favorite:O.is_favorite,contact_info:D}},R=await qe.createPerson(z),B=R.data.id;if(O.email)try{await Ae.sideloadGravatar(B,O.email)}catch(q){console.error("Failed to load Gravatar:",q)}if(O.birthday&&O.birthdayType)try{await qe.createDate({title:`${O.first_name}'s Birthday`,status:"publish",date_type:[O.birthdayType.id],acf:{date_value:O.birthday,is_recurring:!0,related_people:[B]}})}catch(q){console.error("Failed to create birthday:",q)}return R.data},onSuccess:O=>{x.invalidateQueries({queryKey:["people"]}),x.invalidateQueries({queryKey:["dashboard"]}),x.invalidateQueries({queryKey:["reminders"]}),l(!1),w(`/people/${O.id}`)}}),E=tt({mutationFn:async O=>{const D={title:O.title,status:"publish",parent:O.parentId||0,acf:{website:O.website,industry:O.industry,investors:O.investors||[]}};return(await qe.createCompany(D)).data},onSuccess:O=>{x.invalidateQueries({queryKey:["companies"]}),x.invalidateQueries({queryKey:["dashboard"]}),u(!1),w(`/companies/${O.id}`)}}),N=tt({mutationFn:async O=>{const D={title:O.title,status:"publish",date_type:O.date_type,acf:{date_value:O.date_value,related_people:O.related_people,is_recurring:O.is_recurring,year_unknown:O.year_unknown}};return(await qe.createDate(D)).data},onSuccess:()=>{x.invalidateQueries({queryKey:["reminders"]}),f(!1)}}),T=async O=>{m(!0);try{await C.mutateAsync(O)}finally{m(!1)}},j=async O=>{v(!0);try{await E.mutateAsync(O)}finally{v(!1)}},P=async O=>{b(!0);try{await N.mutateAsync(O)}finally{b(!1)}};return k.useEffect(()=>{const O=D=>{(D.metaKey||D.ctrlKey)&&D.key==="k"&&(D.preventDefault(),o(!0))};return document.addEventListener("keydown",O),()=>document.removeEventListener("keydown",O)},[]),d.jsxs("div",{className:"flex h-screen bg-gray-50",children:[d.jsx("div",{className:"hidden lg:flex lg:w-64 lg:flex-col",children:d.jsx(e4,{})}),e&&d.jsxs("div",{className:"fixed inset-0 z-40 lg:hidden",children:[d.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>r(!1)}),d.jsx("div",{className:"fixed inset-y-0 left-0 flex flex-col w-64 bg-white",children:d.jsx(e4,{mobile:!0,onClose:()=>r(!1)})})]}),d.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[d.jsx(Mme,{onMenuClick:()=>r(!0),onAddTodo:()=>i(!0),onAddPerson:()=>l(!0),onAddCompany:()=>u(!0),onAddDate:()=>f(!0),onOpenSearch:()=>o(!0)}),d.jsx("main",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:t})]}),d.jsx(Ime,{isOpen:s,onClose:()=>o(!1)}),d.jsx(Kte,{isOpen:n,onClose:()=>i(!1)}),d.jsx(CM,{isOpen:a,onClose:()=>l(!1),onSubmit:T,isLoading:p}),d.jsx(NM,{isOpen:c,onClose:()=>u(!1),onSubmit:j,isLoading:g}),d.jsx(kM,{isOpen:h,onClose:()=>f(!1),onSubmit:P,isLoading:y,allPeople:S,isPeopleLoading:_})]})}function st(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Mo(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Dme(t,e){const r=st(t);return isNaN(e)?Mo(t,NaN):(e&&r.setDate(r.getDate()+e),r)}const ore=6048e5,$me=864e5,are=6e4,lre=36e5,yg=43200,t4=1440;let Fme={};function tm(){return Fme}function kc(t,e){var a,l,c,u;const r=tm(),n=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((u=(c=r.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,i=st(t),s=i.getDay(),o=(s<n?7:0)+s-n;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Gy(t){return kc(t,{weekStartsOn:1})}function cre(t){const e=st(t),r=e.getFullYear(),n=Mo(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=Gy(n),s=Mo(t,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=Gy(s);return e.getTime()>=i.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function Yy(t){const e=st(t);return e.setHours(0,0,0,0),e}function Qy(t){const e=st(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function qme(t,e){const r=Yy(t),n=Yy(e),i=+r-Qy(r),s=+n-Qy(n);return Math.round((i-s)/$me)}function Lme(t){const e=cre(t),r=Mo(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),Gy(r)}function id(t,e){const r=st(t),n=st(e),i=r.getTime()-n.getTime();return i<0?-1:i>0?1:i}function I0(t){return Mo(t,Date.now())}function ure(t,e){const r=Yy(t),n=Yy(e);return+r==+n}function Bme(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function zme(t){if(!Bme(t)&&typeof t!="number")return!1;const e=st(t);return!isNaN(Number(e))}function Vme(t,e){const r=st(t),n=st(e),i=r.getFullYear()-n.getFullYear(),s=r.getMonth()-n.getMonth();return i*12+s}function Ume(t,e){const r=st(t),n=st(e);return r.getFullYear()-n.getFullYear()}function Hme(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function Wme(t,e){return+st(t)-+st(e)}function Kme(t){const e=st(t);return e.setHours(23,59,59,999),e}function Gme(t){const e=st(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function Yme(t){const e=st(t);return+Kme(e)==+Gme(e)}function Qme(t,e){const r=st(t),n=st(e),i=id(r,n),s=Math.abs(Vme(r,n));let o;if(s<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*s);let a=id(r,n)===-i;Yme(st(t))&&s===1&&id(t,n)===1&&(a=!1),o=i*(s-Number(a))}return o===0?0:o}function Xme(t,e,r){const n=Wme(t,e)/1e3;return Hme(r==null?void 0:r.roundingMethod)(n)}function N1(t,e){const r=st(t),n=st(e),i=id(r,n),s=Math.abs(Ume(r,n));r.setFullYear(1584),n.setFullYear(1584);const o=id(r,n)===-i,a=i*(s-+o);return a===0?0:a}function Jme(t){const e=st(t),r=Mo(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Zme={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ege=(t,e,r)=>{let n;const i=Zme[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function k1(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const tge={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},rge={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},nge={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ige={date:k1({formats:tge,defaultWidth:"full"}),time:k1({formats:rge,defaultWidth:"full"}),dateTime:k1({formats:nge,defaultWidth:"full"})},sge={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},oge=(t,e,r,n)=>sge[t];function Xh(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let i;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=r!=null&&r.width?String(r.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=r!=null&&r.width?String(r.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const age={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},lge={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},cge={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},uge={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dge={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},hge={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},fge=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},pge={ordinalNumber:fge,era:Xh({values:age,defaultWidth:"wide"}),quarter:Xh({values:lge,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Xh({values:cge,defaultWidth:"wide"}),day:Xh({values:uge,defaultWidth:"wide"}),dayPeriod:Xh({values:dge,defaultWidth:"wide",formattingValues:hge,defaultFormattingWidth:"wide"})};function Jh(t){return(e,r={})=>{const n=r.width,i=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?gge(a,h=>h.test(o)):mge(a,h=>h.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function mge(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function gge(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function yge(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const i=n[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const vge=/^(\d+)(th|st|nd|rd)?/i,bge=/\d+/i,xge={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},wge={any:[/^b/i,/^(a|c)/i]},Sge={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},_ge={any:[/1/i,/2/i,/3/i,/4/i]},Ege={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Cge={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Nge={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},kge={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Tge={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Oge={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},jge={ordinalNumber:yge({matchPattern:vge,parsePattern:bge,valueCallback:t=>parseInt(t,10)}),era:Jh({matchPatterns:xge,defaultMatchWidth:"wide",parsePatterns:wge,defaultParseWidth:"any"}),quarter:Jh({matchPatterns:Sge,defaultMatchWidth:"wide",parsePatterns:_ge,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Jh({matchPatterns:Ege,defaultMatchWidth:"wide",parsePatterns:Cge,defaultParseWidth:"any"}),day:Jh({matchPatterns:Nge,defaultMatchWidth:"wide",parsePatterns:kge,defaultParseWidth:"any"}),dayPeriod:Jh({matchPatterns:Tge,defaultMatchWidth:"any",parsePatterns:Oge,defaultParseWidth:"any"})},dre={code:"en-US",formatDistance:ege,formatLong:ige,formatRelative:oge,localize:pge,match:jge,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Pge(t){const e=st(t);return qme(e,Jme(e))+1}function Ige(t){const e=st(t),r=+Gy(e)-+Lme(e);return Math.round(r/ore)+1}function hre(t,e){var u,h,f,p;const r=st(t),n=r.getFullYear(),i=tm(),s=(e==null?void 0:e.firstWeekContainsDate)??((h=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(f=i.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=Mo(t,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const a=kc(o,e),l=Mo(t,0);l.setFullYear(n,0,s),l.setHours(0,0,0,0);const c=kc(l,e);return r.getTime()>=a.getTime()?n+1:r.getTime()>=c.getTime()?n:n-1}function Rge(t,e){var a,l,c,u;const r=tm(),n=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((u=(c=r.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,i=hre(t,e),s=Mo(t,0);return s.setFullYear(i,0,n),s.setHours(0,0,0,0),kc(s,e)}function Mge(t,e){const r=st(t),n=+kc(r,e)-+Rge(r,e);return Math.round(n/ore)+1}function dt(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const Go={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return dt(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):dt(r+1,2)},d(t,e){return dt(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return dt(t.getHours()%12||12,e.length)},H(t,e){return dt(t.getHours(),e.length)},m(t,e){return dt(t.getMinutes(),e.length)},s(t,e){return dt(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return dt(i,e.length)}},bu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},r4={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return Go.y(t,e)},Y:function(t,e,r,n){const i=hre(t,n),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return dt(o,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):dt(s,e.length)},R:function(t,e){const r=cre(t);return dt(r,e.length)},u:function(t,e){const r=t.getFullYear();return dt(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return dt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return dt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return Go.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return dt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const i=Mge(t,n);return e==="wo"?r.ordinalNumber(i,{unit:"week"}):dt(i,e.length)},I:function(t,e,r){const n=Ige(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):dt(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):Go.d(t,e)},D:function(t,e,r){const n=Pge(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):dt(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return dt(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return dt(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return dt(i,e.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let i;switch(n===12?i=bu.noon:n===0?i=bu.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let i;switch(n>=17?i=bu.evening:n>=12?i=bu.afternoon:n>=4?i=bu.morning:i=bu.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Go.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):Go.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):dt(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):dt(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):Go.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):Go.s(t,e)},S:function(t,e){return Go.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return i4(n);case"XXXX":case"XX":return jl(n);case"XXXXX":case"XXX":default:return jl(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return i4(n);case"xxxx":case"xx":return jl(n);case"xxxxx":case"xxx":default:return jl(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+n4(n,":");case"OOOO":default:return"GMT"+jl(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+n4(n,":");case"zzzz":default:return"GMT"+jl(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return dt(n,e.length)},T:function(t,e,r){const n=t.getTime();return dt(n,e.length)}};function n4(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Math.trunc(n/60),s=n%60;return s===0?r+String(i):r+String(i)+e+dt(s,2)}function i4(t,e){return t%60===0?(t>0?"-":"+")+dt(Math.abs(t)/60,2):jl(t,e)}function jl(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=dt(Math.trunc(n/60),2),s=dt(n%60,2);return r+i+e+s}const s4=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},fre=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Age=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return s4(t,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",s4(n,e)).replace("{{time}}",fre(i,e))},Dge={p:fre,P:Age},$ge=/^D+$/,Fge=/^Y+$/,qge=["D","DD","YY","YYYY"];function Lge(t){return $ge.test(t)}function Bge(t){return Fge.test(t)}function zge(t,e,r){const n=Vge(t,e,r);if(console.warn(n),qge.includes(t))throw new RangeError(n)}function Vge(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Uge=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Hge=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Wge=/^'([^]*?)'?$/,Kge=/''/g,Gge=/[a-zA-Z]/;function Cn(t,e,r){var u,h,f,p;const n=tm(),i=n.locale??dre,s=n.firstWeekContainsDate??((h=(u=n.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??1,o=n.weekStartsOn??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,a=st(t);if(!zme(a))throw new RangeError("Invalid time value");let l=e.match(Hge).map(m=>{const g=m[0];if(g==="p"||g==="P"){const v=Dge[g];return v(m,i.formatLong)}return m}).join("").match(Uge).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const g=m[0];if(g==="'")return{isToken:!1,value:Yge(m)};if(r4[g])return{isToken:!0,value:m};if(g.match(Gge))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:m}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(m=>{if(!m.isToken)return m.value;const g=m.value;(Bge(g)||Lge(g))&&zge(g,e,String(t));const v=r4[g[0]];return v(a,g,i.localize,c)}).join("")}function Yge(t){const e=t.match(Wge);return e?e[1].replace(Kge,"'"):t}function Qge(t,e,r){const n=tm(),i=(r==null?void 0:r.locale)??n.locale??dre,s=2520,o=id(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const a=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let l,c;o>0?(l=st(e),c=st(t)):(l=st(t),c=st(e));const u=Xme(c,l),h=(Qy(c)-Qy(l))/1e3,f=Math.round((u-h)/60);let p;if(f<2)return r!=null&&r.includeSeconds?u<5?i.formatDistance("lessThanXSeconds",5,a):u<10?i.formatDistance("lessThanXSeconds",10,a):u<20?i.formatDistance("lessThanXSeconds",20,a):u<40?i.formatDistance("halfAMinute",0,a):u<60?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",1,a):f===0?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",f,a);if(f<45)return i.formatDistance("xMinutes",f,a);if(f<90)return i.formatDistance("aboutXHours",1,a);if(f<t4){const m=Math.round(f/60);return i.formatDistance("aboutXHours",m,a)}else{if(f<s)return i.formatDistance("xDays",1,a);if(f<yg){const m=Math.round(f/t4);return i.formatDistance("xDays",m,a)}else if(f<yg*2)return p=Math.round(f/yg),i.formatDistance("aboutXMonths",p,a)}if(p=Qme(c,l),p<12){const m=Math.round(f/yg);return i.formatDistance("xMonths",m,a)}else{const m=p%12,g=Math.trunc(p/12);return m<3?i.formatDistance("aboutXYears",g,a):m<9?i.formatDistance("overXYears",g,a):i.formatDistance("almostXYears",g+1,a)}}function Xge(t,e){return Qge(t,I0(t),e)}function Jge(t,e){const r=st(t),n=st(e);return r.getTime()>n.getTime()}function Zge(t,e,r){const n=kc(t,r),i=kc(e,r);return+n==+i}function eye(t,e){return Zge(t,I0(t),e)}function pre(t){return ure(t,I0(t))}function mre(t,e){return Dme(t,-e)}function gre(t){return ure(t,mre(I0(t),1))}function hp(t,e){const n=iye(t);let i;if(n.date){const l=sye(n.date,2);i=oye(l.restDateString,l.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const s=i.getTime();let o=0,a;if(n.time&&(o=aye(n.time),isNaN(o)))return new Date(NaN);if(n.timezone){if(a=lye(n.timezone),isNaN(a))return new Date(NaN)}else{const l=new Date(s+o),c=new Date(0);return c.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),c.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),c}return new Date(s+o+a)}const vg={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},tye=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,rye=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,nye=/^([+-])(\d{2})(?::?(\d{2}))?$/;function iye(t){const e={},r=t.split(vg.dateTimeDelimiter);let n;if(r.length>2)return e;if(/:/.test(r[0])?n=r[0]:(e.date=r[0],n=r[1],vg.timeZoneDelimiter.test(e.date)&&(e.date=t.split(vg.timeZoneDelimiter)[0],n=t.substr(e.date.length,t.length))),n){const i=vg.timezone.exec(n);i?(e.time=n.replace(i[1],""),e.timezone=i[1]):e.time=n}return e}function sye(t,e){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=t.match(r);if(!n)return{year:NaN,restDateString:""};const i=n[1]?parseInt(n[1]):null,s=n[2]?parseInt(n[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((n[1]||n[2]).length)}}function oye(t,e){if(e===null)return new Date(NaN);const r=t.match(tye);if(!r)return new Date(NaN);const n=!!r[4],i=Zh(r[1]),s=Zh(r[2])-1,o=Zh(r[3]),a=Zh(r[4]),l=Zh(r[5])-1;if(n)return fye(e,a,l)?cye(e,a,l):new Date(NaN);{const c=new Date(0);return!dye(e,s,o)||!hye(e,i)?new Date(NaN):(c.setUTCFullYear(e,s,Math.max(i,o)),c)}}function Zh(t){return t?parseInt(t):1}function aye(t){const e=t.match(rye);if(!e)return NaN;const r=T1(e[1]),n=T1(e[2]),i=T1(e[3]);return pye(r,n,i)?r*lre+n*are+i*1e3:NaN}function T1(t){return t&&parseFloat(t.replace(",","."))||0}function lye(t){if(t==="Z")return 0;const e=t.match(nye);if(!e)return 0;const r=e[1]==="+"?-1:1,n=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return mye(n,i)?r*(n*lre+i*are):NaN}function cye(t,e,r){const n=new Date(0);n.setUTCFullYear(t,0,4);const i=n.getUTCDay()||7,s=(e-1)*7+r+1-i;return n.setUTCDate(n.getUTCDate()+s),n}const uye=[31,null,31,30,31,30,31,31,30,31,30,31];function yre(t){return t%400===0||t%4===0&&t%100!==0}function dye(t,e,r){return e>=0&&e<=11&&r>=1&&r<=(uye[e]||(yre(t)?29:28))}function hye(t,e){return e>=1&&e<=(yre(t)?366:365)}function fye(t,e,r){return e>=1&&e<=53&&r>=0&&r<=6}function pye(t,e,r){return t===24?e===0&&r===0:r>=0&&r<60&&e>=0&&e<60&&t>=0&&t<25}function mye(t,e){return e>=0&&e<=59}function gye(t){if(!t||t.length===0)return{todos:[],today:[],yesterday:[],thisWeek:[],older:[]};const e={todos:[],today:[],yesterday:[],thisWeek:[],older:[]};return t.forEach(r=>{if(r.type==="todo"){e.todos.push(r);return}hp(r.created);let n=r.activity_date||r.created;r.activity_date&&r.activity_time&&(n=`${r.activity_date}T${r.activity_time}`);const i=hp(n);pre(i)?e.today.push(r):gre(i)?e.yesterday.push(r):eye(i)?e.thisWeek.push(r):e.older.push(r)}),e.todos.sort((r,n)=>{if(r.is_completed&&!n.is_completed)return 1;if(!r.is_completed&&n.is_completed)return-1;if(!r.is_completed&&!n.is_completed){if(r.due_date&&n.due_date)return new Date(r.due_date)-new Date(n.due_date);if(r.due_date&&!n.due_date)return-1;if(!r.due_date&&n.due_date)return 1}return new Date(n.created)-new Date(r.created)}),e}function yye(t){if(!t)return"";try{const e=hp(t),r=t.includes("T")&&t.length>10,n=r?" at HH:mm":"";return pre(e)?Xge(e,{addSuffix:!0}):gre(e)?r?Cn(e,"'Yesterday' 'at' HH:mm"):"Yesterday":Cn(e,r?"MMM d, yyyy 'at' HH:mm":"MMM d, yyyy")}catch{return t}}function vye(t){return{call:"Phone",email:"Mail",chat:"MessageCircle",meeting:"Users",coffee:"Coffee",lunch:"Utensils",note:"FileText"}[t]||"Circle"}function bye(t){return{call:"Phone call",email:"Email",chat:"Chat",meeting:"Meeting",coffee:"Coffee",lunch:"Lunch",note:"Note"}[t]||t||"Activity"}function rm(t){if(!t.due_date||t.is_completed)return!1;try{const e=hp(t.due_date),r=new Date;return r.setHours(0,0,0,0),e.setHours(0,0,0,0),e<r}catch{return!1}}function xye(t){const e=[];return t.is_completed?e.push("opacity-60","line-through"):rm(t)&&e.push("text-red-600","font-medium"),e.join(" ")}function TM({isOpen:t,onClose:e,todo:r,onComplete:n,onCompleteAsActivity:i}){return!t||!r?null:d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[d.jsx("h2",{className:"text-lg font-semibold",children:"Complete todo"}),d.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:d.jsx(Rt,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"p-4",children:[d.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:['"',r.content,'"']}),d.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"How would you like to complete this todo?"}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("button",{onClick:n,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-colors text-left",children:[d.jsx($s,{className:"w-5 h-5 text-primary-600 flex-shrink-0"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"font-medium text-gray-900",children:"Just complete"}),d.jsx("p",{className:"text-sm text-gray-500",children:"Mark the todo as done"})]})]}),d.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors text-left",children:[d.jsx(N0,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"font-medium text-gray-900",children:"Complete & log activity"}),d.jsx("p",{className:"text-sm text-gray-500",children:"Record this as an activity on the timeline"})]})]})]})]}),d.jsx("div",{className:"flex justify-end p-4 border-t bg-gray-50 rounded-b-lg",children:d.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancel"})})]})})}var vre={exports:{}},bre={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fd=k;function wye(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Sye=typeof Object.is=="function"?Object.is:wye,_ye=Fd.useState,Eye=Fd.useEffect,Cye=Fd.useLayoutEffect,Nye=Fd.useDebugValue;function kye(t,e){var r=e(),n=_ye({inst:{value:r,getSnapshot:e}}),i=n[0].inst,s=n[1];return Cye(function(){i.value=r,i.getSnapshot=e,O1(i)&&s({inst:i})},[t,r,e]),Eye(function(){return O1(i)&&s({inst:i}),t(function(){O1(i)&&s({inst:i})})},[t]),Nye(r),r}function O1(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Sye(t,r)}catch{return!0}}function Tye(t,e){return e()}var Oye=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Tye:kye;bre.useSyncExternalStore=Fd.useSyncExternalStore!==void 0?Fd.useSyncExternalStore:Oye;vre.exports=bre;var OM=vre.exports;function Xr(t){this.content=t}Xr.prototype={constructor:Xr,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,r){var n=r&&r!=t?this.remove(r):this,i=n.find(t),s=n.content.slice();return i==-1?s.push(r||t,e):(s[i+1]=e,r&&(s[i]=r)),new Xr(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var r=this.content.slice();return r.splice(e,2),new Xr(r)},addToStart:function(t,e){return new Xr([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var r=this.remove(t).content.slice();return r.push(t,e),new Xr(r)},addBefore:function(t,e,r){var n=this.remove(e),i=n.content.slice(),s=n.find(t);return i.splice(s==-1?i.length:s,0,e,r),new Xr(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Xr.from(t),t.size?new Xr(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Xr.from(t),t.size?new Xr(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Xr.from(t);for(var r=0;r<t.content.length;r+=2)e=e.remove(t.content[r]);return e},toObject:function(){var t={};return this.forEach(function(e,r){t[e]=r}),t},get size(){return this.content.length>>1}};Xr.from=function(t){if(t instanceof Xr)return t;var e=[];if(t)for(var r in t)e.push(r,t[r]);return new Xr(e)};function xre(t,e,r){for(let n=0;;n++){if(n==t.childCount||n==e.childCount)return t.childCount==e.childCount?null:r;let i=t.child(n),s=e.child(n);if(i==s){r+=i.nodeSize;continue}if(!i.sameMarkup(s))return r;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)r++;return r}if(i.content.size||s.content.size){let o=xre(i.content,s.content,r+1);if(o!=null)return o}r+=i.nodeSize}}function wre(t,e,r,n){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:r,b:n};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){r-=l,n-=l;continue}if(!o.sameMarkup(a))return{a:r,b:n};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,r--,n--;return{a:r,b:n}}if(o.content.size||a.content.size){let c=wre(o.content,a.content,r-1,n-1);if(c)return c}r-=l,n-=l}}class J{constructor(e,r){if(this.content=e,this.size=r||0,r==null)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,r,n,i=0,s){for(let o=0,a=0;a<r;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&n(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,r-u),n,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,r,n,i){let s="",o=!0;return this.nodesBetween(e,r,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,r-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&n&&(o?o=!1:s+=n),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let r=this.lastChild,n=e.firstChild,i=this.content.slice(),s=0;for(r.isText&&r.sameMarkup(n)&&(i[i.length-1]=r.withText(r.text+n.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new J(i,this.size+e.size)}cut(e,r=this.size){if(e==0&&r==this.size)return this;let n=[],i=0;if(r>e)for(let s=0,o=0;o<r;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>r)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,r-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,r-o-1))),n.push(a),i+=a.nodeSize),o=l}return new J(n,i)}cutByIndex(e,r){return e==r?J.empty:e==0&&r==this.content.length?this:new J(this.content.slice(e,r))}replaceChild(e,r){let n=this.content[e];if(n==r)return this;let i=this.content.slice(),s=this.size+r.nodeSize-n.nodeSize;return i[e]=r,new J(i,s)}addToStart(e){return new J([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new J(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let r=0;r<this.content.length;r++)if(!this.content[r].eq(e.content[r]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let r=this.content[e];if(!r)throw new RangeError("Index "+e+" out of range for "+this);return r}maybeChild(e){return this.content[e]||null}forEach(e){for(let r=0,n=0;r<this.content.length;r++){let i=this.content[r];e(i,n,r),n+=i.nodeSize}}findDiffStart(e,r=0){return xre(this,e,r)}findDiffEnd(e,r=this.size,n=e.size){return wre(this,e,r,n)}findIndex(e){if(e==0)return bg(0,e);if(e==this.size)return bg(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,n=0;;r++){let i=this.child(r),s=n+i.nodeSize;if(s>=e)return s==e?bg(r+1,s):bg(r,n);n=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,r){if(!r)return J.empty;if(!Array.isArray(r))throw new RangeError("Invalid input for Fragment.fromJSON");return new J(r.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return J.empty;let r,n=0;for(let i=0;i<e.length;i++){let s=e[i];n+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(r||(r=e.slice(0,i)),r[r.length-1]=s.withText(r[r.length-1].text+s.text)):r&&r.push(s)}return new J(r||e,n)}static from(e){if(!e)return J.empty;if(e instanceof J)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new J([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}J.empty=new J([],0);const j1={index:0,offset:0};function bg(t,e){return j1.index=t,j1.offset=e,j1}function Xy(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let r=Array.isArray(t);if(Array.isArray(e)!=r)return!1;if(r){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!Xy(t[n],e[n]))return!1}else{for(let n in t)if(!(n in e)||!Xy(t[n],e[n]))return!1;for(let n in e)if(!(n in t))return!1}return!0}let bt=class dI{constructor(e,r){this.type=e,this.attrs=r}addToSet(e){let r,n=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))r||(r=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!n&&s.type.rank>this.type.rank&&(r||(r=e.slice(0,i)),r.push(this),n=!0),r&&r.push(s)}}return r||(r=e.slice()),n||r.push(this),r}removeFromSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return e.slice(0,r).concat(e.slice(r+1));return e}isInSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Xy(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[r.type];if(!n)throw new RangeError(`There is no mark type ${r.type} in this schema`);let i=n.create(r.attrs);return n.checkAttrs(i.attrs),i}static sameSet(e,r){if(e==r)return!0;if(e.length!=r.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(r[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return dI.none;if(e instanceof dI)return[e];let r=e.slice();return r.sort((n,i)=>n.type.rank-i.type.rank),r}};bt.none=[];class Jy extends Error{}class pe{constructor(e,r,n){this.content=e,this.openStart=r,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,r){let n=_re(this.content,e+this.openStart,r);return n&&new pe(n,this.openStart,this.openEnd)}removeBetween(e,r){return new pe(Sre(this.content,e+this.openStart,r+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,r){if(!r)return pe.empty;let n=r.openStart||0,i=r.openEnd||0;if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new pe(J.fromJSON(e,r.content),n,i)}static maxOpen(e,r=!0){let n=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(r||!s.type.spec.isolating);s=s.firstChild)n++;for(let s=e.lastChild;s&&!s.isLeaf&&(r||!s.type.spec.isolating);s=s.lastChild)i++;return new pe(e,n,i)}}pe.empty=new pe(J.empty,0,0);function Sre(t,e,r){let{index:n,offset:i}=t.findIndex(e),s=t.maybeChild(n),{index:o,offset:a}=t.findIndex(r);if(i==e||s.isText){if(a!=r&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(r))}if(n!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(n,s.copy(Sre(s.content,e-i-1,r-i-1)))}function _re(t,e,r,n){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return n&&!n.canReplace(i,i,r)?null:t.cut(0,e).append(r).append(t.cut(e));let a=_re(o.content,e-s-1,r,o);return a&&t.replaceChild(i,o.copy(a))}function jye(t,e,r){if(r.openStart>t.depth)throw new Jy("Inserted content deeper than insertion position");if(t.depth-r.openStart!=e.depth-r.openEnd)throw new Jy("Inconsistent open depths");return Ere(t,e,r,0)}function Ere(t,e,r,n){let i=t.index(n),s=t.node(n);if(i==e.index(n)&&n<t.depth-r.openStart){let o=Ere(t,e,r,n+1);return s.copy(s.content.replaceChild(i,o))}else if(r.content.size)if(!r.openStart&&!r.openEnd&&t.depth==n&&e.depth==n){let o=t.parent,a=o.content;return sc(o,a.cut(0,t.parentOffset).append(r.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=Pye(r,t);return sc(s,Nre(t,o,a,e,n))}else return sc(s,Zy(t,e,n))}function Cre(t,e){if(!e.type.compatibleContent(t.type))throw new Jy("Cannot join "+e.type.name+" onto "+t.type.name)}function hI(t,e,r){let n=t.node(r);return Cre(n,e.node(r)),n}function ic(t,e){let r=e.length-1;r>=0&&t.isText&&t.sameMarkup(e[r])?e[r]=t.withText(e[r].text+t.text):e.push(t)}function Tf(t,e,r,n){let i=(e||t).node(r),s=0,o=e?e.index(r):i.childCount;t&&(s=t.index(r),t.depth>r?s++:t.textOffset&&(ic(t.nodeAfter,n),s++));for(let a=s;a<o;a++)ic(i.child(a),n);e&&e.depth==r&&e.textOffset&&ic(e.nodeBefore,n)}function sc(t,e){return t.type.checkContent(e),t.copy(e)}function Nre(t,e,r,n,i){let s=t.depth>i&&hI(t,e,i+1),o=n.depth>i&&hI(r,n,i+1),a=[];return Tf(null,t,i,a),s&&o&&e.index(i)==r.index(i)?(Cre(s,o),ic(sc(s,Nre(t,e,r,n,i+1)),a)):(s&&ic(sc(s,Zy(t,e,i+1)),a),Tf(e,r,i,a),o&&ic(sc(o,Zy(r,n,i+1)),a)),Tf(n,null,i,a),new J(a)}function Zy(t,e,r){let n=[];if(Tf(null,t,r,n),t.depth>r){let i=hI(t,e,r+1);ic(sc(i,Zy(t,e,r+1)),n)}return Tf(e,null,r,n),new J(n)}function Pye(t,e){let r=e.depth-t.openStart,i=e.node(r).copy(t.content);for(let s=r-1;s>=0;s--)i=e.node(s).copy(J.from(i));return{start:i.resolveNoCache(t.openStart+r),end:i.resolveNoCache(i.content.size-t.openEnd-r)}}class fp{constructor(e,r,n){this.pos=e,this.path=r,this.parentOffset=n,this.depth=r.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,r=this.index(this.depth);if(r==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],i=e.child(r);return n?e.child(r).cut(n):i}get nodeBefore(){let e=this.index(this.depth),r=this.pos-this.path[this.path.length-1];return r?this.parent.child(e).cut(0,r):e==0?null:this.parent.child(e-1)}posAtIndex(e,r){r=this.resolveDepth(r);let n=this.path[r*3],i=r==0?0:this.path[r*3-1]+1;for(let s=0;s<e;s++)i+=n.child(s).nodeSize;return i}marks(){let e=this.parent,r=this.index();if(e.content.size==0)return bt.none;if(this.textOffset)return e.child(r).marks;let n=e.maybeChild(r-1),i=e.maybeChild(r);if(!n){let a=n;n=i,i=a}let s=n.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let r=this.parent.maybeChild(this.index());if(!r||!r.isInline)return null;let n=r.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<n.length;s++)n[s].type.spec.inclusive===!1&&(!i||!n[s].isInSet(i.marks))&&(n=n[s--].removeFromSet(n));return n}sharedDepth(e){for(let r=this.depth;r>0;r--)if(this.start(r)<=e&&this.end(r)>=e)return r;return 0}blockRange(e=this,r){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!r||r(this.node(n))))return new ev(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let r=1;r<=this.depth;r++)e+=(e?"/":"")+this.node(r).type.name+"_"+this.index(r-1);return e+":"+this.parentOffset}static resolve(e,r){if(!(r>=0&&r<=e.content.size))throw new RangeError("Position "+r+" out of range");let n=[],i=0,s=r;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(n.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new fp(r,n,s)}static resolveCached(e,r){let n=o4.get(e);if(n)for(let s=0;s<n.elts.length;s++){let o=n.elts[s];if(o.pos==r)return o}else o4.set(e,n=new Iye);let i=n.elts[n.i]=fp.resolve(e,r);return n.i=(n.i+1)%Rye,i}}class Iye{constructor(){this.elts=[],this.i=0}}const Rye=12,o4=new WeakMap;class ev{constructor(e,r,n){this.$from=e,this.$to=r,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Mye=Object.create(null);let La=class fI{constructor(e,r,n,i=bt.none){this.type=e,this.attrs=r,this.marks=i,this.content=n||J.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,r,n,i=0){this.content.nodesBetween(e,r,n,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,r,n,i){return this.content.textBetween(e,r,n,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,r,n){return this.type==e&&Xy(this.attrs,r||e.defaultAttrs||Mye)&&bt.sameSet(this.marks,n||bt.none)}copy(e=null){return e==this.content?this:new fI(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new fI(this.type,this.attrs,this.content,e)}cut(e,r=this.content.size){return e==0&&r==this.content.size?this:this.copy(this.content.cut(e,r))}slice(e,r=this.content.size,n=!1){if(e==r)return pe.empty;let i=this.resolve(e),s=this.resolve(r),o=n?0:i.sharedDepth(r),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new pe(c,i.depth-o,s.depth-o)}replace(e,r,n){return jye(this.resolve(e),this.resolve(r),n)}nodeAt(e){for(let r=this;;){let{index:n,offset:i}=r.content.findIndex(e);if(r=r.maybeChild(n),!r)return null;if(i==e||r.isText)return r;e-=i+1}}childAfter(e){let{index:r,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(r),index:r,offset:n}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:r,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(r),index:r,offset:n};let i=this.content.child(r-1);return{node:i,index:r-1,offset:n-i.nodeSize}}resolve(e){return fp.resolveCached(this,e)}resolveNoCache(e){return fp.resolve(this,e)}rangeHasMark(e,r,n){let i=!1;return r>e&&this.nodesBetween(e,r,s=>(n.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),kre(this.marks,e)}contentMatchAt(e){let r=this.type.contentMatch.matchFragment(this.content,0,e);if(!r)throw new Error("Called contentMatchAt on a node with invalid content");return r}canReplace(e,r,n=J.empty,i=0,s=n.childCount){let o=this.contentMatchAt(e).matchFragment(n,i,s),a=o&&o.matchFragment(this.content,r);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(n.child(l).marks))return!1;return!0}canReplaceWith(e,r,n,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(n),o=s&&s.matchFragment(this.content,r);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=bt.none;for(let r=0;r<this.marks.length;r++){let n=this.marks[r];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!bt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(r=>r.type.name)}`);this.content.forEach(r=>r.check())}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(r=>r.toJSON())),e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Node.fromJSON");let n;if(r.marks){if(!Array.isArray(r.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=r.marks.map(e.markFromJSON)}if(r.type=="text"){if(typeof r.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(r.text,n)}let i=J.fromJSON(e,r.content),s=e.nodeType(r.type).create(r.attrs,i,n);return s.type.checkAttrs(s.attrs),s}};La.prototype.text=void 0;class tv extends La{constructor(e,r,n,i){if(super(e,r,null,i),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):kre(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,r){return this.text.slice(e,r)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new tv(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new tv(this.type,this.attrs,e,this.marks)}cut(e=0,r=this.text.length){return e==0&&r==this.text.length?this:this.withText(this.text.slice(e,r))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function kre(t,e){for(let r=t.length-1;r>=0;r--)e=t[r].type.name+"("+e+")";return e}class Tc{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,r){let n=new Aye(e,r);if(n.next==null)return Tc.empty;let i=Tre(n);n.next&&n.err("Unexpected trailing text");let s=zye(Bye(i));return Vye(s,n),s}matchType(e){for(let r=0;r<this.next.length;r++)if(this.next[r].type==e)return this.next[r].next;return null}matchFragment(e,r=0,n=e.childCount){let i=this;for(let s=r;i&&s<n;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:r}=this.next[e];if(!(r.isText||r.hasRequiredAttrs()))return r}return null}compatible(e){for(let r=0;r<this.next.length;r++)for(let n=0;n<e.next.length;n++)if(this.next[r].type==e.next[n].type)return!0;return!1}fillBefore(e,r=!1,n=0){let i=[this];function s(o,a){let l=o.matchFragment(e,n);if(l&&(!r||l.validEnd))return J.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:h}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(h)==-1){i.push(h);let f=s(h,a.concat(u));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let r=this.computeWrapping(e);return this.wrapCache.push(e,r),r}computeWrapping(e){let r=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let i=n.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in r)&&(!i.type||l.validEnd)&&(n.push({match:a.contentMatch,type:a,via:i}),r[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function r(n){e.push(n);for(let i=0;i<n.next.length;i++)e.indexOf(n.next[i].next)==-1&&r(n.next[i].next)}return r(this),e.map((n,i)=>{let s=i+(n.validEnd?"*":" ")+" ";for(let o=0;o<n.next.length;o++)s+=(o?", ":"")+n.next[o].type.name+"->"+e.indexOf(n.next[o].next);return s}).join(`
`)}}Tc.empty=new Tc(!0);class Aye{constructor(e,r){this.string=e,this.nodeTypes=r,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Tre(t){let e=[];do e.push(Dye(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Dye(t){let e=[];do e.push($ye(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function $ye(t){let e=Lye(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=Fye(t,e);else break;return e}function a4(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function Fye(t,e){let r=a4(t),n=r;return t.eat(",")&&(t.next!="}"?n=a4(t):n=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:r,max:n,expr:e}}function qye(t,e){let r=t.nodeTypes,n=r[e];if(n)return[n];let i=[];for(let s in r){let o=r[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function Lye(t){if(t.eat("(")){let e=Tre(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=qye(t,t.next).map(r=>(t.inline==null?t.inline=r.isInline:t.inline!=r.isInline&&t.err("Mixing inline and block content"),{type:"name",value:r}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Bye(t){let e=[[]];return i(s(t,0),r()),e;function r(){return e.push([])-1}function n(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=r())}else if(o.type=="star"){let l=r();return n(a,l),i(s(o.expr,l),l),[n(l)]}else if(o.type=="plus"){let l=r();return i(s(o.expr,a),l),i(s(o.expr,l),l),[n(l)]}else{if(o.type=="opt")return[n(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=r();i(s(o.expr,l),u),l=u}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=r();n(l,u),i(s(o.expr,l),u),l=u}return[n(l)]}else{if(o.type=="name")return[n(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function Ore(t,e){return e-t}function l4(t,e){let r=[];return n(e),r.sort(Ore);function n(i){let s=t[i];if(s.length==1&&!s[0].term)return n(s[0].to);r.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&r.indexOf(l)==-1&&n(l)}}}function zye(t){let e=Object.create(null);return r(l4(t,0));function r(n){let i=[];n.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);l4(t,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[n.join(",")]=new Tc(n.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(Ore);s.next.push({type:i[o][0],next:e[a.join(",")]||r(a)})}return s}}function Vye(t,e){for(let r=0,n=[t];r<n.length;r++){let i=n[r],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),n.indexOf(c)==-1&&n.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function jre(t){let e=Object.create(null);for(let r in t){let n=t[r];if(!n.hasDefault)return null;e[r]=n.default}return e}function Pre(t,e){let r=Object.create(null);for(let n in t){let i=e&&e[n];if(i===void 0){let s=t[n];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+n)}r[n]=i}return r}function Ire(t,e,r,n){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${r} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function Rre(t,e){let r=Object.create(null);if(e)for(let n in e)r[n]=new Hye(t,n,e[n]);return r}let c4=class Mre{constructor(e,r,n){this.name=e,this.schema=r,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=Rre(e,n.attrs),this.defaultAttrs=jre(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Tc.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Pre(this.attrs,e)}create(e=null,r,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new La(this,this.computeAttrs(e),J.from(r),bt.setFrom(n))}createChecked(e=null,r,n){return r=J.from(r),this.checkContent(r),new La(this,this.computeAttrs(e),r,bt.setFrom(n))}createAndFill(e=null,r,n){if(e=this.computeAttrs(e),r=J.from(r),r.size){let o=this.contentMatch.fillBefore(r);if(!o)return null;r=o.append(r)}let i=this.contentMatch.matchFragment(r),s=i&&i.fillBefore(J.empty,!0);return s?new La(this,e,r.append(s),bt.setFrom(n)):null}validContent(e){let r=this.contentMatch.matchFragment(e);if(!r||!r.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Ire(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let r=0;r<e.length;r++)if(!this.allowsMarkType(e[r].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let r;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?r&&r.push(e[n]):r||(r=e.slice(0,n));return r?r.length?r:bt.none:e}static compile(e,r){let n=Object.create(null);e.forEach((s,o)=>n[s]=new Mre(s,r,o));let i=r.spec.topNode||"doc";if(!n[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let s in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function Uye(t,e,r){let n=r.split("|");return i=>{let s=i===null?"null":typeof i;if(n.indexOf(s)<0)throw new RangeError(`Expected value of type ${n} for attribute ${e} on type ${t}, got ${s}`)}}class Hye{constructor(e,r,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?Uye(e,r,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class R0{constructor(e,r,n,i){this.name=e,this.rank=r,this.schema=n,this.spec=i,this.attrs=Rre(e,i.attrs),this.excluded=null;let s=jre(this.attrs);this.instance=s?new bt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new bt(this,Pre(this.attrs,e))}static compile(e,r){let n=Object.create(null),i=0;return e.forEach((s,o)=>n[s]=new R0(s,i++,r,o)),n}removeFromSet(e){for(var r=0;r<e.length;r++)e[r].type==this&&(e=e.slice(0,r).concat(e.slice(r+1)),r--);return e}isInSet(e){for(let r=0;r<e.length;r++)if(e[r].type==this)return e[r]}checkAttrs(e){Ire(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Are{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let r=this.spec={};for(let i in e)r[i]=e[i];r.nodes=Xr.from(e.nodes),r.marks=Xr.from(e.marks||{}),this.nodes=c4.compile(this.spec.nodes,this),this.marks=R0.compile(this.spec.marks,this);let n=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=n[o]||(n[o]=Tc.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?u4(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:u4(this,o.split(" "))}this.nodeFromJSON=i=>La.fromJSON(this,i),this.markFromJSON=i=>bt.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,r=null,n,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof c4){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(r,n,i)}text(e,r){let n=this.nodes.text;return new tv(n,n.defaultAttrs,e,bt.setFrom(r))}mark(e,r){return typeof e=="string"&&(e=this.marks[e]),e.create(r)}nodeType(e){let r=this.nodes[e];if(!r)throw new RangeError("Unknown node type: "+e);return r}}function u4(t,e){let r=[];for(let n=0;n<e.length;n++){let i=e[n],s=t.marks[i],o=s;if(s)r.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&r.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return r}function Wye(t){return t.tag!=null}function Kye(t){return t.style!=null}class Ba{constructor(e,r){this.schema=e,this.rules=r,this.tags=[],this.styles=[];let n=this.matchedStyles=[];r.forEach(i=>{if(Wye(i))this.tags.push(i);else if(Kye(i)){let s=/[^=]*/.exec(i.style)[0];n.indexOf(s)<0&&n.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,r={}){let n=new h4(this,r,!1);return n.addAll(e,bt.none,r.from,r.to),n.finish()}parseSlice(e,r={}){let n=new h4(this,r,!0);return n.addAll(e,bt.none,r.from,r.to),pe.maxOpen(n.finish())}matchTag(e,r,n){for(let i=n?this.tags.indexOf(n)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(Qye(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||r.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,r,n,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!n.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=r))){if(o.getAttrs){let l=o.getAttrs(r);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let r=[];function n(i){let s=i.priority==null?50:i.priority,o=0;for(;o<r.length;o++){let a=r[o];if((a.priority==null?50:a.priority)<s)break}r.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{n(o=f4(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{n(o=f4(o)),o.node||o.ignore||o.mark||(o.node=i)})}return r}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Ba(e,Ba.schemaRules(e)))}}const Dre={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Gye={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},$re={ol:!0,ul:!0},pp=1,pI=2,Of=4;function d4(t,e,r){return e!=null?(e?pp:0)|(e==="full"?pI:0):t&&t.whitespace=="pre"?pp|pI:r&~Of}class xg{constructor(e,r,n,i,s,o){this.type=e,this.attrs=r,this.marks=n,this.solid=i,this.options=o,this.content=[],this.activeMarks=bt.none,this.match=s||(o&Of?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let r=this.type.contentMatch.fillBefore(J.from(e));if(r)this.match=this.type.contentMatch.matchFragment(r);else{let n=this.type.contentMatch,i;return(i=n.findWrapping(e.type))?(this.match=n,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&pp)){let n=this.content[this.content.length-1],i;if(n&&n.isText&&(i=/[ \t\r\n\u000c]+$/.exec(n.text))){let s=n;n.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let r=J.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(J.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Dre.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class h4{constructor(e,r,n){this.parser=e,this.options=r,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let i=r.topNode,s,o=d4(null,r.preserveWhitespace,0)|(n?Of:0);i?s=new xg(i.type,i.attrs,bt.none,!0,r.topMatch||i.type.contentMatch,o):n?s=new xg(null,null,bt.none,!0,null,o):s=new xg(e.schema.topNodeType,null,bt.none,!0,null,o),this.nodes=[s],this.find=r.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,r){e.nodeType==3?this.addTextNode(e,r):e.nodeType==1&&this.addElement(e,r)}addTextNode(e,r){let n=e.nodeValue,i=this.top,s=i.options&pI?"full":this.localPreserveWS||(i.options&pp)>0,{schema:o}=this.parser;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(s)if(s==="full")n=n.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(n)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=n.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),r,!0),a[l]&&this.insertNode(o.text(a[l]),r,!/\S/.test(a[l]));n=""}else n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],l=e.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(n=n.slice(1))}n&&this.insertNode(o.text(n),r,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,r,n){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;$re.hasOwnProperty(o)&&this.parser.normalizeLists&&Yye(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,n));e:if(l?l.ignore:Gye.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,r);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(Dre.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,r);break e}let h=l&&l.skip?r:this.readStyles(e,r);h&&this.addAll(e,h),c&&this.sync(s),this.needsBlock=u}else{let c=this.readStyles(e,r);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,r){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),r)}ignoreFallback(e,r){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),r,!0)}readStyles(e,r){let n=e.style;if(n&&n.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=n.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?r=r.filter(c=>!l.clearMark(c)):r=r.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return r}addElementByRule(e,r,n,i){let s,o;if(r.node)if(o=this.parser.schema.nodes[r.node],o.isLeaf)this.insertNode(o.create(r.attrs),n,e.nodeName=="BR")||this.leafFallback(e,n);else{let l=this.enter(o,r.attrs||null,n,r.preserveWhitespace);l&&(s=!0,n=l)}else{let l=this.parser.schema.marks[r.mark];n=n.concat(l.create(r.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,n,i);else if(r.getContent)this.findInside(e),r.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,n,!1));else{let l=e;typeof r.contentElement=="string"?l=e.querySelector(r.contentElement):typeof r.contentElement=="function"?l=r.contentElement(e):r.contentElement&&(l=r.contentElement),this.findAround(e,l,!0),this.addAll(l,n),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,r,n,i){let s=n||0;for(let o=n?e.childNodes[n]:e.firstChild,a=i==null?null:e.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,r);this.findAtPoint(e,s)}findPlace(e,r,n){let i,s;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],c=l.findWrapping(e);if(c&&(!i||i.length>c.length+a)&&(i=c,s=l,!c.length))break;if(l.solid){if(n)break;a+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)r=this.enterInner(i[o],null,r,!1);return r}insertNode(e,r,n){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(r=this.enterInner(s,null,r))}let i=this.findPlace(e,r,n);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=bt.none;for(let a of i.concat(e.marks))(s.type?s.type.allowsMarkType(a.type):p4(a.type,e.type))&&(o=a.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,r,n,i){let s=this.findPlace(e.create(r),n,!1);return s&&(s=this.enterInner(e,r,n,!0,i)),s}enterInner(e,r,n,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=d4(e,s,o.options);o.options&Of&&o.content.length==0&&(a|=Of);let l=bt.none;return n=n.filter(c=>(o.type?o.type.allowsMarkType(c.type):p4(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new xg(e,r,l,i,null,a)),this.open++,n}closeExtra(e=!1){let r=this.nodes.length-1;if(r>this.open){for(;r>this.open;r--)this.nodes[r-1].content.push(this.nodes[r].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let r=this.open;r>=0;r--){if(this.nodes[r]==e)return this.open=r,!0;this.localPreserveWS&&(this.nodes[r].options|=pp)}return!1}get currentPos(){this.closeExtra();let e=0;for(let r=this.open;r>=0;r--){let n=this.nodes[r].content;for(let i=n.length-1;i>=0;i--)e+=n[i].nodeSize;r&&e++}return e}findAtPoint(e,r){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==r&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)&&(this.find[r].pos=this.currentPos)}findAround(e,r,n){if(e!=r&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&r.compareDocumentPosition(this.find[i].node)&(n?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&(this.find[r].pos=this.currentPos-(e.nodeValue.length-this.find[r].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let r=e.split("/"),n=this.options.context,i=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),s=-(n?n.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=r[a];if(c==""){if(a==r.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:n&&l>=s?n.node(l-s).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return o(r.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let r=e.depth;r>=0;r--){let n=e.node(r).contentMatchAt(e.indexAfter(r)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let r in this.parser.schema.nodes){let n=this.parser.schema.nodes[r];if(n.isTextblock&&n.defaultAttrs)return n}}}function Yye(t){for(let e=t.firstChild,r=null;e;e=e.nextSibling){let n=e.nodeType==1?e.nodeName.toLowerCase():null;n&&$re.hasOwnProperty(n)&&r?(r.appendChild(e),e=r):n=="li"?r=e:n&&(r=null)}}function Qye(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function f4(t){let e={};for(let r in t)e[r]=t[r];return e}function p4(t,e){let r=e.schema.nodes;for(let n in r){let i=r[n];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}class Wc{constructor(e,r){this.nodes=e,this.marks=r}serializeFragment(e,r={},n){n||(n=P1(r).createDocumentFragment());let i=n,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,r);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,r))}),n}serializeNodeInner(e,r){let{dom:n,contentDOM:i}=iy(P1(r),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,r,i)}return n}serializeNode(e,r={}){let n=this.serializeNodeInner(e,r);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,r);s&&((s.contentDOM||s.dom).appendChild(n),n=s.dom)}return n}serializeMark(e,r,n={}){let i=this.marks[e.type.name];return i&&iy(P1(n),i(e,r),null,e.attrs)}static renderSpec(e,r,n=null,i){return iy(e,r,n,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Wc(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let r=m4(e.nodes);return r.text||(r.text=n=>n.text),r}static marksFromSchema(e){return m4(e.marks)}}function m4(t){let e={};for(let r in t){let n=t[r].spec.toDOM;n&&(e[r]=n)}return e}function P1(t){return t.document||window.document}const g4=new WeakMap;function Xye(t){let e=g4.get(t);return e===void 0&&g4.set(t,e=Jye(t)),e}function Jye(t){let e=null;function r(n){if(n&&typeof n=="object")if(Array.isArray(n))if(typeof n[0]=="string")e||(e=[]),e.push(n);else for(let i=0;i<n.length;i++)r(n[i]);else for(let i in n)r(n[i])}return r(t),e}function iy(t,e,r,n){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(n&&(s=Xye(n))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(r=i.slice(0,o),i=i.slice(o+1));let a,l=r?t.createElementNS(r,i):t.createElement(i),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let h in c)if(c[h]!=null){let f=h.indexOf(" ");f>0?l.setAttributeNS(h.slice(0,f),h.slice(f+1),c[h]):h=="style"&&l.style?l.style.cssText=c[h]:l.setAttribute(h,c[h])}}for(let h=u;h<e.length;h++){let f=e[h];if(f===0){if(h<e.length-1||h>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:p,contentDOM:m}=iy(t,f,r,n);if(l.appendChild(p),m){if(a)throw new RangeError("Multiple content holes");a=m}}}return{dom:l,contentDOM:a}}const Fre=65535,qre=Math.pow(2,16);function Zye(t,e){return t+e*qre}function y4(t){return t&Fre}function eve(t){return(t-(t&Fre))/qre}const Lre=1,Bre=2,sy=4,zre=8;class mI{constructor(e,r,n){this.pos=e,this.delInfo=r,this.recover=n}get deleted(){return(this.delInfo&zre)>0}get deletedBefore(){return(this.delInfo&(Lre|sy))>0}get deletedAfter(){return(this.delInfo&(Bre|sy))>0}get deletedAcross(){return(this.delInfo&sy)>0}}class hi{constructor(e,r=!1){if(this.ranges=e,this.inverted=r,!e.length&&hi.empty)return hi.empty}recover(e){let r=0,n=y4(e);if(!this.inverted)for(let i=0;i<n;i++)r+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[n*3]+r+eve(e)}mapResult(e,r=1){return this._map(e,r,!1)}map(e,r=1){return this._map(e,r,!0)}_map(e,r,n){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+o],h=l+c;if(e<=h){let f=c?e==l?-1:e==h?1:r:r,p=l+i+(f<0?0:u);if(n)return p;let m=e==(r<0?l:h)?null:Zye(a/3,e-l),g=e==l?Bre:e==h?Lre:sy;return(r<0?e!=l:e!=h)&&(g|=zre),new mI(p,g,m)}i+=u-c}return n?e+i:new mI(e+i,0,null)}touches(e,r){let n=0,i=y4(r),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?n:0);if(l>e)break;let c=this.ranges[a+s],u=l+c;if(e<=u&&a==i*3)return!0;n+=this.ranges[a+o]-c}return!1}forEach(e){let r=this.inverted?2:1,n=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+r],u=this.ranges[i+n];e(a,a+c,l,l+u),s+=u-c}}invert(){return new hi(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?hi.empty:new hi(e<0?[0,-e,0]:[0,0,e])}}hi.empty=new hi([]);class mp{constructor(e,r,n=0,i=e?e.length:0){this.mirror=r,this.from=n,this.to=i,this._maps=e||[],this.ownData=!(e||r)}get maps(){return this._maps}slice(e=0,r=this.maps.length){return new mp(this._maps,this.mirror,e,r)}appendMap(e,r){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),r!=null&&this.setMirror(this._maps.length-1,r)}appendMapping(e){for(let r=0,n=this._maps.length;r<e._maps.length;r++){let i=e.getMirror(r);this.appendMap(e._maps[r],i!=null&&i<r?n+i:void 0)}}getMirror(e){if(this.mirror){for(let r=0;r<this.mirror.length;r++)if(this.mirror[r]==e)return this.mirror[r+(r%2?-1:1)]}}setMirror(e,r){this.mirror||(this.mirror=[]),this.mirror.push(e,r)}appendMappingInverted(e){for(let r=e.maps.length-1,n=this._maps.length+e._maps.length;r>=0;r--){let i=e.getMirror(r);this.appendMap(e._maps[r].invert(),i!=null&&i>r?n-i-1:void 0)}}invert(){let e=new mp;return e.appendMappingInverted(this),e}map(e,r=1){if(this.mirror)return this._map(e,r,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,r);return e}mapResult(e,r=1){return this._map(e,r,!1)}_map(e,r,n){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(e,r);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return n?e:new mI(e,i,null)}}const I1=Object.create(null);class gn{getMap(){return hi.empty}merge(e){return null}static fromJSON(e,r){if(!r||!r.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=I1[r.stepType];if(!n)throw new RangeError(`No step type ${r.stepType} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in I1)throw new RangeError("Duplicate use of step JSON ID "+e);return I1[e]=r,r.prototype.jsonID=e,r}}class dr{constructor(e,r){this.doc=e,this.failed=r}static ok(e){return new dr(e,null)}static fail(e){return new dr(null,e)}static fromReplace(e,r,n,i){try{return dr.ok(e.replace(r,n,i))}catch(s){if(s instanceof Jy)return dr.fail(s.message);throw s}}}function jM(t,e,r){let n=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(jM(s.content,e,s))),s.isInline&&(s=e(s,r,i)),n.push(s)}return J.fromArray(n)}class Na extends gn{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=e.resolve(this.from),i=n.node(n.sharedDepth(this.to)),s=new pe(jM(r.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),r.openStart,r.openEnd);return dr.fromReplace(e,this.from,this.to,s)}invert(){return new cs(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new Na(r.pos,n.pos,this.mark)}merge(e){return e instanceof Na&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Na(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Na(r.from,r.to,e.markFromJSON(r.mark))}}gn.jsonID("addMark",Na);class cs extends gn{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=new pe(jM(r.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),r.openStart,r.openEnd);return dr.fromReplace(e,this.from,this.to,n)}invert(){return new Na(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new cs(r.pos,n.pos,this.mark)}merge(e){return e instanceof cs&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new cs(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new cs(r.from,r.to,e.markFromJSON(r.mark))}}gn.jsonID("removeMark",cs);class ka extends gn{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return dr.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.addToSet(r.marks));return dr.fromReplace(e,this.pos,this.pos+1,new pe(J.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);if(r){let n=this.mark.addToSet(r.marks);if(n.length==r.marks.length){for(let i=0;i<r.marks.length;i++)if(!r.marks[i].isInSet(n))return new ka(this.pos,r.marks[i]);return new ka(this.pos,this.mark)}}return new Oc(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new ka(r.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ka(r.pos,e.markFromJSON(r.mark))}}gn.jsonID("addNodeMark",ka);class Oc extends gn{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return dr.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.removeFromSet(r.marks));return dr.fromReplace(e,this.pos,this.pos+1,new pe(J.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);return!r||!this.mark.isInSet(r.marks)?this:new ka(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Oc(r.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Oc(r.pos,e.markFromJSON(r.mark))}}gn.jsonID("removeNodeMark",Oc);class Dr extends gn{constructor(e,r,n,i=!1){super(),this.from=e,this.to=r,this.slice=n,this.structure=i}apply(e){return this.structure&&gI(e,this.from,this.to)?dr.fail("Structure replace would overwrite content"):dr.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new hi([this.from,this.to-this.from,this.slice.size])}invert(e){return new Dr(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deletedAcross&&n.deletedAcross?null:new Dr(r.pos,Math.max(r.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Dr)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let r=this.slice.size+e.slice.size==0?pe.empty:new pe(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Dr(this.from,this.to+(e.to-e.from),r,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let r=this.slice.size+e.slice.size==0?pe.empty:new pe(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Dr(e.from,this.to,r,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Dr(r.from,r.to,pe.fromJSON(e,r.slice),!!r.structure)}}gn.jsonID("replace",Dr);class qr extends gn{constructor(e,r,n,i,s,o,a=!1){super(),this.from=e,this.to=r,this.gapFrom=n,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(gI(e,this.from,this.gapFrom)||gI(e,this.gapTo,this.to)))return dr.fail("Structure gap-replace would overwrite content");let r=e.slice(this.gapFrom,this.gapTo);if(r.openStart||r.openEnd)return dr.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,r.content);return n?dr.fromReplace(e,this.from,this.to,n):dr.fail("Content does not fit in gap")}getMap(){return new hi([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let r=this.gapTo-this.gapFrom;return new qr(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),i=this.from==this.gapFrom?r.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return r.deletedAcross&&n.deletedAcross||i<r.pos||s>n.pos?null:new qr(r.pos,n.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number"||typeof r.gapFrom!="number"||typeof r.gapTo!="number"||typeof r.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new qr(r.from,r.to,r.gapFrom,r.gapTo,pe.fromJSON(e,r.slice),r.insert,!!r.structure)}}gn.jsonID("replaceAround",qr);function gI(t,e,r){let n=t.resolve(e),i=r-e,s=n.depth;for(;i>0&&s>0&&n.indexAfter(s)==n.node(s).childCount;)s--,i--;if(i>0){let o=n.node(s).maybeChild(n.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function tve(t,e,r,n){let i=[],s=[],o,a;t.doc.nodesBetween(e,r,(l,c,u)=>{if(!l.isInline)return;let h=l.marks;if(!n.isInSet(h)&&u.type.allowsMarkType(n.type)){let f=Math.max(c,e),p=Math.min(c+l.nodeSize,r),m=n.addToSet(h);for(let g=0;g<h.length;g++)h[g].isInSet(m)||(o&&o.to==f&&o.mark.eq(h[g])?o.to=p:i.push(o=new cs(f,p,h[g])));a&&a.to==f?a.to=p:s.push(a=new Na(f,p,n))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function rve(t,e,r,n){let i=[],s=0;t.doc.nodesBetween(e,r,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(n instanceof R0){let c=o.marks,u;for(;u=n.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else n?n.isInSet(o.marks)&&(l=[n]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,r);for(let u=0;u<l.length;u++){let h=l[u],f;for(let p=0;p<i.length;p++){let m=i[p];m.step==s-1&&h.eq(i[p].style)&&(f=m)}f?(f.to=c,f.step=s):i.push({style:h,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>t.step(new cs(o.from,o.to,o.style)))}function PM(t,e,r,n=r.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),u=a+c.nodeSize,h=n.matchType(c.type);if(!h)o.push(new Dr(a,u,pe.empty));else{n=h;for(let f=0;f<c.marks.length;f++)r.allowsMarkType(c.marks[f].type)||t.step(new cs(a,u,c.marks[f]));if(i&&c.isText&&r.whitespace!="pre"){let f,p=/\r?\n|\r/g,m;for(;f=p.exec(c.text);)m||(m=new pe(J.from(r.schema.text(" ",r.allowedMarks(c.marks))),0,0)),o.push(new Dr(a+f.index,a+f.index+f[0].length,m))}}a=u}if(!n.validEnd){let l=n.fillBefore(J.empty,!0);t.replace(a,a,new pe(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function nve(t,e,r){return(e==0||t.canReplace(e,t.childCount))&&(r==t.childCount||t.canReplace(0,r))}function ch(t){let r=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let n=t.depth,i=0,s=0;;--n){let o=t.$from.node(n),a=t.$from.index(n)+i,l=t.$to.indexAfter(n)-s;if(n<t.depth&&o.canReplace(a,l,r))return n;if(n==0||o.type.spec.isolating||!nve(o,a,l))break;a&&(i=1),l<o.childCount&&(s=1)}return null}function ive(t,e,r){let{$from:n,$to:i,depth:s}=e,o=n.before(s+1),a=i.after(s+1),l=o,c=a,u=J.empty,h=0;for(let m=s,g=!1;m>r;m--)g||n.index(m)>0?(g=!0,u=J.from(n.node(m).copy(u)),h++):l--;let f=J.empty,p=0;for(let m=s,g=!1;m>r;m--)g||i.after(m+1)<i.end(m)?(g=!0,f=J.from(i.node(m).copy(f)),p++):c++;t.step(new qr(l,c,o,a,new pe(u.append(f),h,p),u.size-h,!0))}function IM(t,e,r=null,n=t){let i=sve(t,e),s=i&&ove(n,e);return s?i.map(v4).concat({type:e,attrs:r}).concat(s.map(v4)):null}function v4(t){return{type:t,attrs:null}}function sve(t,e){let{parent:r,startIndex:n,endIndex:i}=t,s=r.contentMatchAt(n).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return r.canReplaceWith(n,i,o)?s:null}function ove(t,e){let{parent:r,startIndex:n,endIndex:i}=t,s=r.child(n),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=n;l&&c<i;c++)l=l.matchType(r.child(c).type);return!l||!l.validEnd?null:o}function ave(t,e,r){let n=J.empty;for(let o=r.length-1;o>=0;o--){if(n.size){let a=r[o].type.contentMatch.matchFragment(n);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=J.from(r[o].type.create(r[o].attrs,n))}let i=e.start,s=e.end;t.step(new qr(i,s,i,s,new pe(n,0,0),r.length,!0))}function lve(t,e,r,n,i){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,r,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(n,l)&&cve(t.doc,t.mapping.slice(s).map(a),n)){let c=null;if(n.schema.linebreakReplacement){let p=n.whitespace=="pre",m=!!n.contentMatch.matchType(n.schema.linebreakReplacement);p&&!m?c=!1:!p&&m&&(c=!0)}c===!1&&Ure(t,o,a,s),PM(t,t.mapping.slice(s).map(a,1),n,void 0,c===null);let u=t.mapping.slice(s),h=u.map(a,1),f=u.map(a+o.nodeSize,1);return t.step(new qr(h,f,h+1,f-1,new pe(J.from(n.create(l,null,o.marks)),0,0),1,!0)),c===!0&&Vre(t,o,a,s),!1}})}function Vre(t,e,r,n){e.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=t.mapping.slice(n).map(r+1+s+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function Ure(t,e,r,n){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(n).map(r+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function cve(t,e,r){let n=t.resolve(e),i=n.index();return n.parent.canReplaceWith(i,i+1,r)}function uve(t,e,r,n,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");r||(r=s.type);let o=r.create(n,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!r.validContent(s.content))throw new RangeError("Invalid content for node type "+r.name);t.step(new qr(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new pe(J.from(o),0,0),1,!0))}function vo(t,e,r=1,n){let i=t.resolve(e),s=i.depth-r,o=n&&n[n.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=r-2;c>s;c--,u--){let h=i.node(c),f=i.index(c);if(h.type.spec.isolating)return!1;let p=h.content.cutByIndex(f,h.childCount),m=n&&n[u+1];m&&(p=p.replaceChild(0,m.type.create(m.attrs)));let g=n&&n[u]||h;if(!h.canReplace(f+1,h.childCount)||!g.type.validContent(p))return!1}let a=i.indexAfter(s),l=n&&n[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function dve(t,e,r=1,n){let i=t.doc.resolve(e),s=J.empty,o=J.empty;for(let a=i.depth,l=i.depth-r,c=r-1;a>l;a--,c--){s=J.from(i.node(a).copy(s));let u=n&&n[c];o=J.from(u?u.type.create(u.attrs,o):i.node(a).copy(o))}t.step(new Dr(e,e,new pe(s.append(o),r,r),!0))}function ll(t,e){let r=t.resolve(e),n=r.index();return Hre(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function hve(t,e){e.content.size||t.type.compatibleContent(e.type);let r=t.contentMatchAt(t.childCount),{linebreakReplacement:n}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==n?t.type.schema.nodes.text:s.type;if(r=r.matchType(o),!r||!t.type.allowsMarks(s.marks))return!1}return r.validEnd}function Hre(t,e){return!!(t&&e&&!t.isLeaf&&hve(t,e))}function M0(t,e,r=-1){let n=t.resolve(e);for(let i=n.depth;;i--){let s,o,a=n.index(i);if(i==n.depth?(s=n.nodeBefore,o=n.nodeAfter):r>0?(s=n.node(i+1),a++,o=n.node(i).maybeChild(a)):(s=n.node(i).maybeChild(a-1),o=n.node(i+1)),s&&!s.isTextblock&&Hre(s,o)&&n.node(i).canReplace(a,a+1))return e;if(i==0)break;e=r<0?n.before(i):n.after(i)}}function fve(t,e,r){let n=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-r),o=s.node().type;if(i&&o.inlineContent){let u=o.whitespace=="pre",h=!!o.contentMatch.matchType(i);u&&!h?n=!1:!u&&h&&(n=!0)}let a=t.steps.length;if(n===!1){let u=t.doc.resolve(e+r);Ure(t,u.node(),u.before(),a)}o.inlineContent&&PM(t,e+r-1,o,s.node().contentMatchAt(s.index()),n==null);let l=t.mapping.slice(a),c=l.map(e-r);if(t.step(new Dr(c,l.map(e+r,-1),pe.empty,!0)),n===!0){let u=t.doc.resolve(c);Vre(t,u.node(),u.before(),t.steps.length)}return t}function pve(t,e,r){let n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),r))return e;if(n.parentOffset==0)for(let i=n.depth-1;i>=0;i--){let s=n.index(i);if(n.node(i).canReplaceWith(s,s,r))return n.before(i+1);if(s>0)return null}if(n.parentOffset==n.parent.content.size)for(let i=n.depth-1;i>=0;i--){let s=n.indexAfter(i);if(n.node(i).canReplaceWith(s,s,r))return n.after(i+1);if(s<n.node(i).childCount)return null}return null}function Wre(t,e,r){let n=t.resolve(e);if(!r.content.size)return e;let i=r.content;for(let s=0;s<r.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(r.openStart==0&&r.size?2:1);s++)for(let o=n.depth;o>=0;o--){let a=o==n.depth?0:n.pos<=(n.start(o+1)+n.end(o+1))/2?-1:1,l=n.index(o)+(a>0?1:0),c=n.node(o),u=!1;if(s==1)u=c.canReplace(l,l,i);else{let h=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=h&&c.canReplaceWith(l,l,h[0])}if(u)return a==0?n.pos:a<0?n.before(o+1):n.after(o+1)}return null}function A0(t,e,r=e,n=pe.empty){if(e==r&&!n.size)return null;let i=t.resolve(e),s=t.resolve(r);return Kre(i,s,n)?new Dr(e,r,n):new mve(i,s,n).fit()}function Kre(t,e,r){return!r.openStart&&!r.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),r.content)}class mve{constructor(e,r,n){this.$from=e,this.$to=r,this.unplaced=n,this.frontier=[],this.placed=J.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=J.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(e<0?this.$to:n.doc.resolve(e));if(!i)return null;let s=this.placed,o=n.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new pe(s,o,a);return e>-1?new qr(n.pos,e,this.$to.pos,this.$to.end(),l,r):l.size||n.pos!=this.$to.pos?new Dr(n.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let r=this.unplaced.content,n=0,i=this.unplaced.openEnd;n<e;n++){let s=r.firstChild;if(r.childCount>1&&(i=0),s.type.spec.isolating&&i<=n){e=n;break}r=s.content}for(let r=1;r<=2;r++)for(let n=r==1?e:this.unplaced.openStart;n>=0;n--){let i,s=null;n?(s=R1(this.unplaced.content,n-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,h=null;if(r==1&&(o?c.matchType(o.type)||(h=c.fillBefore(J.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:n,frontierDepth:a,parent:s,inject:h};if(r==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:r,openEnd:n}=this.unplaced,i=R1(e,r);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new pe(e,r+1,Math.max(n,i.size+r>=e.size-n?r+1:0)),!0)}dropNode(){let{content:e,openStart:r,openEnd:n}=this.unplaced,i=R1(e,r);if(i.childCount<=1&&r>0){let s=e.size-r<=r+i.size;this.unplaced=new pe(ff(e,r-1,1),r-1,s?r-1:n)}else this.unplaced=new pe(ff(e,r,1),r,n)}placeNodes({sliceDepth:e,frontierDepth:r,parent:n,inject:i,wrap:s}){for(;this.depth>r;)this.closeFrontierNode();if(s)for(let g=0;g<s.length;g++)this.openFrontierNode(s[g]);let o=this.unplaced,a=n?n.content:o.content,l=o.openStart-e,c=0,u=[],{match:h,type:f}=this.frontier[r];if(i){for(let g=0;g<i.childCount;g++)u.push(i.child(g));h=h.matchFragment(i)}let p=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let g=a.child(c),v=h.matchType(g.type);if(!v)break;c++,(c>1||l==0||g.content.size)&&(h=v,u.push(Gre(g.mark(f.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?p:-1)))}let m=c==a.childCount;m||(p=-1),this.placed=pf(this.placed,r,J.from(u)),this.frontier[r].match=h,m&&p<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,v=a;g<p;g++){let y=v.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),v=y.content}this.unplaced=m?e==0?pe.empty:new pe(ff(o.content,e-1,1),e-1,p<0?o.openEnd:e-1):new pe(ff(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],r;if(!e.type.isTextblock||!M1(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(r=this.findCloseLevel(this.$to))&&r.depth==this.depth)return-1;let{depth:n}=this.$to,i=this.$to.after(n);for(;n>1&&i==this.$to.end(--n);)++i;return i}findCloseLevel(e){e:for(let r=Math.min(this.depth,e.depth);r>=0;r--){let{match:n,type:i}=this.frontier[r],s=r<e.depth&&e.end(r+1)==e.pos+(e.depth-(r+1)),o=M1(e,r,i,n,s);if(o){for(let a=r-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=M1(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:r,fit:o,move:s?e.doc.resolve(e.after(r+1)):e}}}}close(e){let r=this.findCloseLevel(e);if(!r)return null;for(;this.depth>r.depth;)this.closeFrontierNode();r.fit.childCount&&(this.placed=pf(this.placed,r.depth,r.fit)),e=r.move;for(let n=r.depth+1;n<=e.depth;n++){let i=e.node(n),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(n));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,r=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=pf(this.placed,this.depth,J.from(e.create(r,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let r=this.frontier.pop().match.fillBefore(J.empty,!0);r.childCount&&(this.placed=pf(this.placed,this.frontier.length,r))}}function ff(t,e,r){return e==0?t.cutByIndex(r,t.childCount):t.replaceChild(0,t.firstChild.copy(ff(t.firstChild.content,e-1,r)))}function pf(t,e,r){return e==0?t.append(r):t.replaceChild(t.childCount-1,t.lastChild.copy(pf(t.lastChild.content,e-1,r)))}function R1(t,e){for(let r=0;r<e;r++)t=t.firstChild.content;return t}function Gre(t,e,r){if(e<=0)return t;let n=t.content;return e>1&&(n=n.replaceChild(0,Gre(n.firstChild,e-1,n.childCount==1?r-1:0))),e>0&&(n=t.type.contentMatch.fillBefore(n).append(n),r<=0&&(n=n.append(t.type.contentMatch.matchFragment(n).fillBefore(J.empty,!0)))),t.copy(n)}function M1(t,e,r,n,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!r.compatibleContent(s.type))return null;let a=n.fillBefore(s.content,!0,o);return a&&!gve(r,s.content,o)?a:null}function gve(t,e,r){for(let n=r;n<e.childCount;n++)if(!t.allowsMarks(e.child(n).marks))return!0;return!1}function yve(t){return t.spec.defining||t.spec.definingForContent}function vve(t,e,r,n){if(!n.size)return t.deleteRange(e,r);let i=t.doc.resolve(e),s=t.doc.resolve(r);if(Kre(i,s,n))return t.step(new Dr(e,r,n));let o=Qre(i,s);o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let f=i.depth,p=i.pos-1;f>0;f--,p--){let m=i.node(f).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;o.indexOf(f)>-1?a=f:i.before(f)==p&&o.splice(1,0,-f)}let l=o.indexOf(a),c=[],u=n.openStart;for(let f=n.content,p=0;;p++){let m=f.firstChild;if(c.push(m),p==n.openStart)break;f=m.content}for(let f=u-1;f>=0;f--){let p=c[f],m=yve(p.type);if(m&&!p.sameMarkup(i.node(Math.abs(a)-1)))u=f;else if(m||!p.type.isTextblock)break}for(let f=n.openStart;f>=0;f--){let p=(f+u+1)%(n.openStart+1),m=c[p];if(m)for(let g=0;g<o.length;g++){let v=o[(g+l)%o.length],y=!0;v<0&&(y=!1,v=-v);let b=i.node(v-1),w=i.index(v-1);if(b.canReplaceWith(w,w,m.type,m.marks))return t.replace(i.before(v),y?s.after(v):r,new pe(Yre(n.content,0,n.openStart,p),p,n.openEnd))}}let h=t.steps.length;for(let f=o.length-1;f>=0&&(t.replace(e,r,n),!(t.steps.length>h));f--){let p=o[f];p<0||(e=i.before(p),r=s.after(p))}}function Yre(t,e,r,n,i){if(e<r){let s=t.firstChild;t=t.replaceChild(0,s.copy(Yre(s.content,e+1,r,n,s)))}if(e>n){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(J.empty,!0))}return t}function bve(t,e,r,n){if(!n.isInline&&e==r&&t.doc.resolve(e).parent.content.size){let i=pve(t.doc,e,n.type);i!=null&&(e=r=i)}t.replaceRange(e,r,new pe(J.from(n),0,0))}function xve(t,e,r){let n=t.doc.resolve(e),i=t.doc.resolve(r),s=Qre(n,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||n.node(a).type.contentMatch.validEnd)return t.delete(n.start(a),i.end(a));if(a>0&&(l||n.node(a-1).canReplace(n.index(a-1),i.indexAfter(a-1))))return t.delete(n.before(a),i.after(a))}for(let o=1;o<=n.depth&&o<=i.depth;o++)if(e-n.start(o)==n.depth-o&&r>n.end(o)&&i.end(o)-r!=i.depth-o&&n.start(o-1)==i.start(o-1)&&n.node(o-1).canReplace(n.index(o-1),i.index(o-1)))return t.delete(n.before(o),r);t.delete(e,r)}function Qre(t,e){let r=[],n=Math.min(t.depth,e.depth);for(let i=n;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&r.push(i)}return r}class sd extends gn{constructor(e,r,n){super(),this.pos=e,this.attr=r,this.value=n}apply(e){let r=e.nodeAt(this.pos);if(!r)return dr.fail("No node at attribute step's position");let n=Object.create(null);for(let s in r.attrs)n[s]=r.attrs[s];n[this.attr]=this.value;let i=r.type.create(n,null,r.marks);return dr.fromReplace(e,this.pos,this.pos+1,new pe(J.from(i),0,r.isLeaf?0:1))}getMap(){return hi.empty}invert(e){return new sd(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new sd(r.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.pos!="number"||typeof r.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new sd(r.pos,r.attr,r.value)}}gn.jsonID("attr",sd);class gp extends gn{constructor(e,r){super(),this.attr=e,this.value=r}apply(e){let r=Object.create(null);for(let i in e.attrs)r[i]=e.attrs[i];r[this.attr]=this.value;let n=e.type.create(r,e.content,e.marks);return dr.ok(n)}getMap(){return hi.empty}invert(e){return new gp(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new gp(r.attr,r.value)}}gn.jsonID("docAttr",gp);let qd=class extends Error{};qd=function t(e){let r=Error.call(this,e);return r.__proto__=t.prototype,r};qd.prototype=Object.create(Error.prototype);qd.prototype.constructor=qd;qd.prototype.name="TransformError";class Xre{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new mp}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let r=this.maybeStep(e);if(r.failed)throw new qd(r.failed);return this}maybeStep(e){let r=e.apply(this.doc);return r.failed||this.addStep(e,r.doc),r}get docChanged(){return this.steps.length>0}addStep(e,r){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=r}replace(e,r=e,n=pe.empty){let i=A0(this.doc,e,r,n);return i&&this.step(i),this}replaceWith(e,r,n){return this.replace(e,r,new pe(J.from(n),0,0))}delete(e,r){return this.replace(e,r,pe.empty)}insert(e,r){return this.replaceWith(e,e,r)}replaceRange(e,r,n){return vve(this,e,r,n),this}replaceRangeWith(e,r,n){return bve(this,e,r,n),this}deleteRange(e,r){return xve(this,e,r),this}lift(e,r){return ive(this,e,r),this}join(e,r=1){return fve(this,e,r),this}wrap(e,r){return ave(this,e,r),this}setBlockType(e,r=e,n,i=null){return lve(this,e,r,n,i),this}setNodeMarkup(e,r,n=null,i){return uve(this,e,r,n,i),this}setNodeAttribute(e,r,n){return this.step(new sd(e,r,n)),this}setDocAttribute(e,r){return this.step(new gp(e,r)),this}addNodeMark(e,r){return this.step(new ka(e,r)),this}removeNodeMark(e,r){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(r instanceof bt)r.isInSet(n.marks)&&this.step(new Oc(e,r));else{let i=n.marks,s,o=[];for(;s=r.isInSet(i);)o.push(new Oc(e,s)),i=s.removeFromSet(i);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,r=1,n){return dve(this,e,r,n),this}addMark(e,r,n){return tve(this,e,r,n),this}removeMark(e,r,n){return rve(this,e,r,n),this}clearIncompatible(e,r,n){return PM(this,e,r,n),this}}const A1=Object.create(null);class Ue{constructor(e,r,n){this.$anchor=e,this.$head=r,this.ranges=n||[new wve(e.min(r),e.max(r))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let r=0;r<e.length;r++)if(e[r].$from.pos!=e[r].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,r=pe.empty){let n=r.content.lastChild,i=null;for(let a=0;a<r.openEnd;a++)i=n,n=n.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?pe.empty:r),a==0&&w4(e,s,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,r){let n=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(n),c=l.map(o.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,r),w4(e,n,r.isInline?-1:1))}}static findFrom(e,r,n=!1){let i=e.parent.inlineContent?new De(e):Nu(e.node(0),e.parent,e.pos,e.index(),r,n);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=r<0?Nu(e.node(0),e.node(s),e.before(s+1),e.index(s),r,n):Nu(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,r,n);if(o)return o}return null}static near(e,r=1){return this.findFrom(e,r)||this.findFrom(e,-r)||new mi(e.node(0))}static atStart(e){return Nu(e,e,0,0,1)||new mi(e)}static atEnd(e){return Nu(e,e,e.content.size,e.childCount,-1)||new mi(e)}static fromJSON(e,r){if(!r||!r.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=A1[r.type];if(!n)throw new RangeError(`No selection type ${r.type} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in A1)throw new RangeError("Duplicate use of selection JSON ID "+e);return A1[e]=r,r.prototype.jsonID=e,r}getBookmark(){return De.between(this.$anchor,this.$head).getBookmark()}}Ue.prototype.visible=!0;class wve{constructor(e,r){this.$from=e,this.$to=r}}let b4=!1;function x4(t){!b4&&!t.parent.inlineContent&&(b4=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class De extends Ue{constructor(e,r=e){x4(e),x4(r),super(e,r)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,r){let n=e.resolve(r.map(this.head));if(!n.parent.inlineContent)return Ue.near(n);let i=e.resolve(r.map(this.anchor));return new De(i.parent.inlineContent?i:n,n)}replace(e,r=pe.empty){if(super.replace(e,r),r==pe.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof De&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new D0(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,r){if(typeof r.anchor!="number"||typeof r.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new De(e.resolve(r.anchor),e.resolve(r.head))}static create(e,r,n=r){let i=e.resolve(r);return new this(i,n==r?i:e.resolve(n))}static between(e,r,n){let i=e.pos-r.pos;if((!n||i)&&(n=i>=0?1:-1),!r.parent.inlineContent){let s=Ue.findFrom(r,n,!0)||Ue.findFrom(r,-n,!0);if(s)r=s.$head;else return Ue.near(r,n)}return e.parent.inlineContent||(i==0?e=r:(e=(Ue.findFrom(e,-n,!0)||Ue.findFrom(e,n,!0)).$anchor,e.pos<r.pos!=i<0&&(e=r))),new De(e,r)}}Ue.jsonID("text",De);class D0{constructor(e,r){this.anchor=e,this.head=r}map(e){return new D0(e.map(this.anchor),e.map(this.head))}resolve(e){return De.between(e.resolve(this.anchor),e.resolve(this.head))}}class je extends Ue{constructor(e){let r=e.nodeAfter,n=e.node(0).resolve(e.pos+r.nodeSize);super(e,n),this.node=r}map(e,r){let{deleted:n,pos:i}=r.mapResult(this.anchor),s=e.resolve(i);return n?Ue.near(s):new je(s)}content(){return new pe(J.from(this.node),0,0)}eq(e){return e instanceof je&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new RM(this.anchor)}static fromJSON(e,r){if(typeof r.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new je(e.resolve(r.anchor))}static create(e,r){return new je(e.resolve(r))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}je.prototype.visible=!1;Ue.jsonID("node",je);class RM{constructor(e){this.anchor=e}map(e){let{deleted:r,pos:n}=e.mapResult(this.anchor);return r?new D0(n,n):new RM(n)}resolve(e){let r=e.resolve(this.anchor),n=r.nodeAfter;return n&&je.isSelectable(n)?new je(r):Ue.near(r)}}class mi extends Ue{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,r=pe.empty){if(r==pe.empty){e.delete(0,e.doc.content.size);let n=Ue.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,r)}toJSON(){return{type:"all"}}static fromJSON(e){return new mi(e)}map(e){return new mi(e)}eq(e){return e instanceof mi}getBookmark(){return Sve}}Ue.jsonID("all",mi);const Sve={map(){return this},resolve(t){return new mi(t)}};function Nu(t,e,r,n,i,s=!1){if(e.inlineContent)return De.create(t,r);for(let o=n-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&je.isSelectable(a))return je.create(t,r-(i<0?a.nodeSize:0))}else{let l=Nu(t,a,r+i,i<0?a.childCount:0,i,s);if(l)return l}r+=a.nodeSize*i}return null}function w4(t,e,r){let n=t.steps.length-1;if(n<e)return;let i=t.steps[n];if(!(i instanceof Dr||i instanceof qr))return;let s=t.mapping.maps[n],o;s.forEach((a,l,c,u)=>{o==null&&(o=u)}),t.setSelection(Ue.near(t.doc.resolve(o),r))}const S4=1,wg=2,_4=4;class _ve extends Xre{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|S4)&~wg,this.storedMarks=null,this}get selectionSet(){return(this.updated&S4)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=wg,this}ensureMarks(e){return bt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&wg)>0}addStep(e,r){super.addStep(e,r),this.updated=this.updated&~wg,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,r=!0){let n=this.selection;return r&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||bt.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,r,n){let i=this.doc.type.schema;if(r==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(n==null&&(n=r),!e)return this.deleteRange(r,n);let s=this.storedMarks;if(!s){let o=this.doc.resolve(r);s=n==r?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(r,n,i.text(e,s)),!this.selection.empty&&this.selection.to==r+e.length&&this.setSelection(Ue.near(this.selection.$to)),this}}setMeta(e,r){return this.meta[typeof e=="string"?e:e.key]=r,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=_4,this}get scrolledIntoView(){return(this.updated&_4)>0}}function E4(t,e){return!e||!t?t:t.bind(e)}class mf{constructor(e,r,n){this.name=e,this.init=E4(r.init,n),this.apply=E4(r.apply,n)}}const Eve=[new mf("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new mf("selection",{init(t,e){return t.selection||Ue.atStart(e.doc)},apply(t){return t.selection}}),new mf("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,r,n){return n.selection.$cursor?t.storedMarks:null}}),new mf("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class D1{constructor(e,r){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Eve.slice(),r&&r.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new mf(n.key,n.spec.state,n))})}}class Vu{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,r=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=r){let i=this.config.plugins[n];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let r=[e],n=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,u=l<r.length&&a.spec.appendTransaction.call(a,l?r.slice(l):r,c,n);if(u&&n.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let h=0;h<this.config.plugins.length;h++)i.push(h<o?{state:n,n:r.length}:{state:this,n:0})}r.push(u),n=n.applyInner(u),s=!0}i&&(i[o]={state:n,n:r.length})}}if(!s)return{state:n,transactions:r}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let r=new Vu(this.config),n=this.config.fields;for(let i=0;i<n.length;i++){let s=n[i];r[s.name]=s.apply(e,this[s.name],this,r)}return r}get tr(){return new _ve(this)}static create(e){let r=new D1(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new Vu(r);for(let i=0;i<r.fields.length;i++)n[r.fields[i].name]=r.fields[i].init(e,n);return n}reconfigure(e){let r=new D1(this.schema,e.plugins),n=r.fields,i=new Vu(r);for(let s=0;s<n.length;s++){let o=n[s].name;i[o]=this.hasOwnProperty(o)?this[o]:n[s].init(e,i)}return i}toJSON(e){let r={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(r.storedMarks=this.storedMarks.map(n=>n.toJSON())),e&&typeof e=="object")for(let n in e){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[n],s=i.spec.state;s&&s.toJSON&&(r[n]=s.toJSON.call(i,this[i.key]))}return r}static fromJSON(e,r,n){if(!r)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new D1(e.schema,e.plugins),s=new Vu(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=La.fromJSON(e.schema,r.doc);else if(o.name=="selection")s.selection=Ue.fromJSON(s.doc,r.selection);else if(o.name=="storedMarks")r.storedMarks&&(s.storedMarks=r.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let a in n){let l=n[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(r,a)){s[o.name]=c.fromJSON.call(l,e,r[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function Jre(t,e,r){for(let n in t){let i=t[n];i instanceof Function?i=i.bind(e):n=="handleDOMEvents"&&(i=Jre(i,e,{})),r[n]=i}return r}class Vt{constructor(e){this.spec=e,this.props={},e.props&&Jre(e.props,this,this.props),this.key=e.key?e.key.key:Zre("plugin")}getState(e){return e[this.key]}}const $1=Object.create(null);function Zre(t){return t in $1?t+"$"+ ++$1[t]:($1[t]=0,t+"$")}class Tr{constructor(e="key"){this.key=Zre(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const MM=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function ene(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("backward",t):r.parentOffset>0)?null:r}const tne=(t,e,r)=>{let n=ene(t,r);if(!n)return!1;let i=AM(n);if(!i){let o=n.blockRange(),a=o&&ch(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(une(t,i,e,-1))return!0;if(n.parent.content.size==0&&(Ld(s,"end")||je.isSelectable(s)))for(let o=n.depth;;o--){let a=A0(t.doc,n.before(o),n.after(o),pe.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(Ld(s,"end")?Ue.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):je.create(l.doc,i.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||n.node(o-1).childCount>1)break}return s.isAtom&&i.depth==n.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},Cve=(t,e,r)=>{let n=ene(t,r);if(!n)return!1;let i=AM(n);return i?rne(t,i,e):!1},Nve=(t,e,r)=>{let n=ine(t,r);if(!n)return!1;let i=DM(n);return i?rne(t,i,e):!1};function rne(t,e,r){let n=e.nodeBefore,i=n,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=A0(t.doc,s,l,pe.empty);if(!c||c.from!=s||c instanceof Dr&&c.slice.size>=l-s)return!1;if(r){let u=t.tr.step(c);u.setSelection(De.create(u.doc,s)),r(u.scrollIntoView())}return!0}function Ld(t,e,r=!1){for(let n=t;n;n=e=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(r&&n.childCount!=1)return!1}return!1}const nne=(t,e,r)=>{let{$head:n,empty:i}=t.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("backward",t):n.parentOffset>0)return!1;s=AM(n)}let o=s&&s.nodeBefore;return!o||!je.isSelectable(o)?!1:(e&&e(t.tr.setSelection(je.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function AM(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function ine(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)?null:r}const sne=(t,e,r)=>{let n=ine(t,r);if(!n)return!1;let i=DM(n);if(!i)return!1;let s=i.nodeAfter;if(une(t,i,e,1))return!0;if(n.parent.content.size==0&&(Ld(s,"start")||je.isSelectable(s))){let o=A0(t.doc,n.before(),n.after(),pe.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Ld(s,"start")?Ue.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):je.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==n.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},one=(t,e,r)=>{let{$head:n,empty:i}=t.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)return!1;s=DM(n)}let o=s&&s.nodeAfter;return!o||!je.isSelectable(o)?!1:(e&&e(t.tr.setSelection(je.create(t.doc,s.pos)).scrollIntoView()),!0)};function DM(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let r=t.node(e);if(t.index(e)+1<r.childCount)return t.doc.resolve(t.after(e+1));if(r.type.spec.isolating)break}return null}const kve=(t,e)=>{let r=t.selection,n=r instanceof je,i;if(n){if(r.node.isTextblock||!ll(t.doc,r.from))return!1;i=r.from}else if(i=M0(t.doc,r.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);n&&s.setSelection(je.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},Tve=(t,e)=>{let r=t.selection,n;if(r instanceof je){if(r.node.isTextblock||!ll(t.doc,r.to))return!1;n=r.to}else if(n=M0(t.doc,r.to,1),n==null)return!1;return e&&e(t.tr.join(n).scrollIntoView()),!0},Ove=(t,e)=>{let{$from:r,$to:n}=t.selection,i=r.blockRange(n),s=i&&ch(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},ane=(t,e)=>{let{$head:r,$anchor:n}=t.selection;return!r.parent.type.spec.code||!r.sameParent(n)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function $M(t){for(let e=0;e<t.edgeCount;e++){let{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}const jve=(t,e)=>{let{$head:r,$anchor:n}=t.selection;if(!r.parent.type.spec.code||!r.sameParent(n))return!1;let i=r.node(-1),s=r.indexAfter(-1),o=$M(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=r.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(Ue.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},lne=(t,e)=>{let r=t.selection,{$from:n,$to:i}=r;if(r instanceof mi||n.parent.inlineContent||i.parent.inlineContent)return!1;let s=$M(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!n.parentOffset&&i.index()<i.parent.childCount?n:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(De.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},cne=(t,e)=>{let{$cursor:r}=t.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let s=r.before();if(vo(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let n=r.blockRange(),i=n&&ch(n);return i==null?!1:(e&&e(t.tr.lift(n,i).scrollIntoView()),!0)};function Pve(t){return(e,r)=>{let{$from:n,$to:i}=e.selection;if(e.selection instanceof je&&e.selection.node.isBlock)return!n.parentOffset||!vo(e.doc,n.pos)?!1:(r&&r(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let s=[],o,a,l=!1,c=!1;for(let p=n.depth;;p--)if(n.node(p).isBlock){l=n.end(p)==n.pos+(n.depth-p),c=n.start(p)==n.pos-(n.depth-p),a=$M(n.node(p-1).contentMatchAt(n.indexAfter(p-1))),s.unshift(l&&a?{type:a}:null),o=p;break}else{if(p==1)return!1;s.unshift(null)}let u=e.tr;(e.selection instanceof De||e.selection instanceof mi)&&u.deleteSelection();let h=u.mapping.map(n.pos),f=vo(u.doc,h,s.length,s);if(f||(s[0]=a?{type:a}:null,f=vo(u.doc,h,s.length,s)),!f)return!1;if(u.split(h,s.length,s),!l&&c&&n.node(o).type!=a){let p=u.mapping.map(n.before(o)),m=u.doc.resolve(p);a&&n.node(o-1).canReplaceWith(m.index(),m.index()+1,a)&&u.setNodeMarkup(u.mapping.map(n.before(o)),a)}return r&&r(u.scrollIntoView()),!0}}const Ive=Pve(),Rve=(t,e)=>{let{$from:r,to:n}=t.selection,i,s=r.sharedDepth(n);return s==0?!1:(i=r.before(s),e&&e(t.tr.setSelection(je.create(t.doc,i))),!0)};function Mve(t,e,r){let n=e.nodeBefore,i=e.nodeAfter,s=e.index();return!n||!i||!n.type.compatibleContent(i.type)?!1:!n.content.size&&e.parent.canReplace(s-1,s)?(r&&r(t.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||ll(t.doc,e.pos))?!1:(r&&r(t.tr.join(e.pos).scrollIntoView()),!0)}function une(t,e,r,n){let i=e.nodeBefore,s=e.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&Mve(t,e,r))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(r){let p=e.pos+s.nodeSize,m=J.empty;for(let y=o.length-1;y>=0;y--)m=J.from(o[y].create(null,m));m=J.from(i.copy(m));let g=t.tr.step(new qr(e.pos-1,p,e.pos,p,new pe(m,1,0),o.length,!0)),v=g.doc.resolve(p+2*o.length);v.nodeAfter&&v.nodeAfter.type==i.type&&ll(g.doc,v.pos)&&g.join(v.pos),r(g.scrollIntoView())}return!0}let u=s.type.spec.isolating||n>0&&l?null:Ue.findFrom(e,1),h=u&&u.$from.blockRange(u.$to),f=h&&ch(h);if(f!=null&&f>=e.depth)return r&&r(t.tr.lift(h,f).scrollIntoView()),!0;if(c&&Ld(s,"start",!0)&&Ld(i,"end")){let p=i,m=[];for(;m.push(p),!p.isTextblock;)p=p.lastChild;let g=s,v=1;for(;!g.isTextblock;g=g.firstChild)v++;if(p.canReplace(p.childCount,p.childCount,g.content)){if(r){let y=J.empty;for(let w=m.length-1;w>=0;w--)y=J.from(m[w].copy(y));let b=t.tr.step(new qr(e.pos-m.length,e.pos+s.nodeSize,e.pos+v,e.pos+s.nodeSize-v,new pe(y,m.length,0),0,!0));r(b.scrollIntoView())}return!0}}return!1}function dne(t){return function(e,r){let n=e.selection,i=t<0?n.$from:n.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(r&&r(e.tr.setSelection(De.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const Ave=dne(-1),Dve=dne(1);function $ve(t,e=null){return function(r,n){let{$from:i,$to:s}=r.selection,o=i.blockRange(s),a=o&&IM(o,t,e);return a?(n&&n(r.tr.wrap(o,a).scrollIntoView()),!0):!1}}function C4(t,e=null){return function(r,n){let i=!1;for(let s=0;s<r.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=r.selection.ranges[s];r.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let u=r.doc.resolve(c),h=u.index();i=u.parent.canReplaceWith(h,h+1,t)}})}if(!i)return!1;if(n){let s=r.tr;for(let o=0;o<r.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=r.selection.ranges[o];s.setBlockType(a,l,t,e)}n(s.scrollIntoView())}return!0}}function FM(...t){return function(e,r,n){for(let i=0;i<t.length;i++)if(t[i](e,r,n))return!0;return!1}}FM(MM,tne,nne);FM(MM,sne,one);FM(ane,lne,cne,Ive);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Fve(t,e=null){return function(r,n){let{$from:i,$to:s}=r.selection,o=i.blockRange(s);if(!o)return!1;let a=n?r.tr:null;return qve(a,o,t,e)?(n&&n(a.scrollIntoView()),!0):!1}}function qve(t,e,r,n=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(r)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);s=new ev(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new ev(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=IM(s,r,n,e);return a?(t&&Lve(t,e,a,i,r),!0):!1}function Lve(t,e,r,n,i){let s=J.empty;for(let u=r.length-1;u>=0;u--)s=J.from(r[u].type.create(r[u].attrs,s));t.step(new qr(e.start-(n?2:0),e.end,e.start,e.end,new pe(s,0,0),r.length,!0));let o=0;for(let u=0;u<r.length;u++)r[u].type==i&&(o=u+1);let a=r.length-o,l=e.start+r.length-(n?2:0),c=e.parent;for(let u=e.startIndex,h=e.endIndex,f=!0;u<h;u++,f=!1)!f&&vo(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function Bve(t){return function(e,r){let{$from:n,$to:i}=e.selection,s=n.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?r?n.node(s.depth-1).type==t?zve(e,r,t,s):Vve(e,r,s):!0:!1}}function zve(t,e,r,n){let i=t.tr,s=n.end,o=n.$to.end(n.depth);s<o&&(i.step(new qr(s-1,o,s,o,new pe(J.from(r.create(null,n.parent.copy())),1,0),1,!0)),n=new ev(i.doc.resolve(n.$from.pos),i.doc.resolve(o),n.depth));const a=ch(n);if(a==null)return!1;i.lift(n,a);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return ll(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function Vve(t,e,r){let n=t.tr,i=r.parent;for(let p=r.end,m=r.endIndex-1,g=r.startIndex;m>g;m--)p-=i.child(m).nodeSize,n.delete(p-1,p+1);let s=n.doc.resolve(r.start),o=s.nodeAfter;if(n.mapping.map(r.end)!=r.start+s.nodeAfter.nodeSize)return!1;let a=r.startIndex==0,l=r.endIndex==i.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?J.empty:J.from(i))))return!1;let h=s.pos,f=h+o.nodeSize;return n.step(new qr(h-(a?1:0),f+(l?1:0),h+1,f-1,new pe((a?J.empty:J.from(i.copy(J.empty))).append(l?J.empty:J.from(i.copy(J.empty))),a?0:1,l?0:1),a?0:1)),e(n.scrollIntoView()),!0}function Uve(t){return function(e,r){let{$from:n,$to:i}=e.selection,s=n.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(r){let c=l.lastChild&&l.lastChild.type==a.type,u=J.from(c?t.create():null),h=new pe(J.from(t.create(null,J.from(a.type.create(null,u)))),c?3:1,0),f=s.start,p=s.end;r(e.tr.step(new qr(f-(c?3:1),p,f,p,h,1,!0)).scrollIntoView())}return!0}}const Jr=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Bd=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let yI=null;const io=function(t,e,r){let n=yI||(yI=document.createRange());return n.setEnd(t,r??t.nodeValue.length),n.setStart(t,e||0),n},Hve=function(){yI=null},jc=function(t,e,r,n){return r&&(N4(t,e,r,n,-1)||N4(t,e,r,n,1))},Wve=/^(img|br|input|textarea|hr)$/i;function N4(t,e,r,n,i){for(var s;;){if(t==r&&e==n)return!0;if(e==(i<0?0:Ai(t))){let o=t.parentNode;if(!o||o.nodeType!=1||nm(t)||Wve.test(t.nodeName)||t.contentEditable=="false")return!1;e=Jr(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?Ai(t):0}else return!1}}function Ai(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Kve(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Ai(t)}else if(t.parentNode&&!nm(t))e=Jr(t),t=t.parentNode;else return null}}function Gve(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!nm(t))e=Jr(t)+1,t=t.parentNode;else return null}}function Yve(t,e,r){for(let n=e==0,i=e==Ai(t);n||i;){if(t==r)return!0;let s=Jr(t);if(t=t.parentNode,!t)return!1;n=n&&s==0,i=i&&s==Ai(t)}}function nm(t){let e;for(let r=t;r&&!(e=r.pmViewDesc);r=r.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const $0=function(t){return t.focusNode&&jc(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Pl(t,e){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=t,r.key=r.code=e,r}function Qve(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Xve(t,e,r){if(t.caretPositionFromPoint)try{let n=t.caretPositionFromPoint(e,r);if(n)return{node:n.offsetNode,offset:Math.min(Ai(n.offsetNode),n.offset)}}catch{}if(t.caretRangeFromPoint){let n=t.caretRangeFromPoint(e,r);if(n)return{node:n.startContainer,offset:Math.min(Ai(n.startContainer),n.startOffset)}}}const Bs=typeof navigator<"u"?navigator:null,k4=typeof document<"u"?document:null,cl=Bs&&Bs.userAgent||"",vI=/Edge\/(\d+)/.exec(cl),hne=/MSIE \d/.exec(cl),bI=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(cl),ei=!!(hne||bI||vI),za=hne?document.documentMode:bI?+bI[1]:vI?+vI[1]:0,qi=!ei&&/gecko\/(\d+)/i.test(cl);qi&&+(/Firefox\/(\d+)/.exec(cl)||[0,0])[1];const xI=!ei&&/Chrome\/(\d+)/.exec(cl),$r=!!xI,fne=xI?+xI[1]:0,mn=!ei&&!!Bs&&/Apple Computer/.test(Bs.vendor),zd=mn&&(/Mobile\/\w+/.test(cl)||!!Bs&&Bs.maxTouchPoints>2),ji=zd||(Bs?/Mac/.test(Bs.platform):!1),pne=Bs?/Win/.test(Bs.platform):!1,fo=/Android \d/.test(cl),im=!!k4&&"webkitFontSmoothing"in k4.documentElement.style,Jve=im?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Zve(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Js(t,e){return typeof t=="number"?t:t[e]}function e0e(t){let e=t.getBoundingClientRect(),r=e.width/t.offsetWidth||1,n=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*r,top:e.top,bottom:e.top+t.clientHeight*n}}function T4(t,e,r){let n=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=r||t.dom;o;){if(o.nodeType!=1){o=Bd(o);continue}let a=o,l=a==s.body,c=l?Zve(s):e0e(a),u=0,h=0;if(e.top<c.top+Js(n,"top")?h=-(c.top-e.top+Js(i,"top")):e.bottom>c.bottom-Js(n,"bottom")&&(h=e.bottom-e.top>c.bottom-c.top?e.top+Js(i,"top")-c.top:e.bottom-c.bottom+Js(i,"bottom")),e.left<c.left+Js(n,"left")?u=-(c.left-e.left+Js(i,"left")):e.right>c.right-Js(n,"right")&&(u=e.right-c.right+Js(i,"right")),u||h)if(l)s.defaultView.scrollBy(u,h);else{let p=a.scrollLeft,m=a.scrollTop;h&&(a.scrollTop+=h),u&&(a.scrollLeft+=u);let g=a.scrollLeft-p,v=a.scrollTop-m;e={left:e.left-g,top:e.top-v,right:e.right-g,bottom:e.bottom-v}}let f=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(f))break;o=f=="absolute"?o.offsetParent:Bd(o)}}function t0e(t){let e=t.dom.getBoundingClientRect(),r=Math.max(0,e.top),n,i;for(let s=(e.left+e.right)/2,o=r+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=r-20){n=a,i=l.top;break}}return{refDOM:n,refTop:i,stack:mne(t.dom)}}function mne(t){let e=[],r=t.ownerDocument;for(let n=t;n&&(e.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),t!=r);n=Bd(n));return e}function r0e({refDOM:t,refTop:e,stack:r}){let n=t?t.getBoundingClientRect().top:0;gne(r,n==0?0:n-e)}function gne(t,e){for(let r=0;r<t.length;r++){let{dom:n,top:i,left:s}=t[r];n.scrollTop!=i+e&&(n.scrollTop=i+e),n.scrollLeft!=s&&(n.scrollLeft=s)}}let xu=null;function n0e(t){if(t.setActive)return t.setActive();if(xu)return t.focus(xu);let e=mne(t);t.focus(xu==null?{get preventScroll(){return xu={preventScroll:!0},!0}}:void 0),xu||(xu=!1,gne(e,0))}function yne(t,e){let r,n=2e8,i,s=0,o=e.top,a=e.top,l,c;for(let u=t.firstChild,h=0;u;u=u.nextSibling,h++){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=io(u).getClientRects();else continue;for(let p=0;p<f.length;p++){let m=f[p];if(m.top<=o&&m.bottom>=a){o=Math.max(m.bottom,o),a=Math.min(m.top,a);let g=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(g<n){r=u,n=g,i=g&&r.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,u.nodeType==1&&g&&(s=h+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!l&&m.left<=e.left&&m.right>=e.left&&(l=u,c={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!r&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(s=h+1)}}return!r&&l&&(r=l,i=c,n=0),r&&r.nodeType==3?i0e(r,i):!r||n&&r.nodeType==1?{node:t,offset:s}:yne(r,i)}function i0e(t,e){let r=t.nodeValue.length,n=document.createRange(),i;for(let s=0;s<r;s++){n.setEnd(t,s+1),n.setStart(t,s);let o=Zo(n,1);if(o.top!=o.bottom&&qM(e,o)){i={node:t,offset:s+(e.left>=(o.left+o.right)/2?1:0)};break}}return n.detach(),i||{node:t,offset:0}}function qM(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function s0e(t,e){let r=t.parentNode;return r&&/^li$/i.test(r.nodeName)&&e.left<t.getBoundingClientRect().left?r:t}function o0e(t,e,r){let{node:n,offset:i}=yne(e,r),s=-1;if(n.nodeType==1&&!n.firstChild){let o=n.getBoundingClientRect();s=o.left!=o.right&&r.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(n,i,s)}function a0e(t,e,r,n){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>n.left||l.top>n.top?i=a.posBefore:(!o&&l.right<n.left||l.bottom<n.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?n.top<(l.top+l.bottom)/2:n.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,r,-1)}function vne(t,e,r){let n=t.childNodes.length;if(n&&r.top<r.bottom)for(let i=Math.max(0,Math.min(n-1,Math.floor(n*(e.top-r.top)/(r.bottom-r.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(qM(e,c))return vne(o,e,c)}}if((s=(s+1)%n)==i)break}return t}function l0e(t,e){let r=t.dom.ownerDocument,n,i=0,s=Xve(r,e.left,e.top);s&&({node:n,offset:i}=s);let o=(t.root.elementFromPoint?t.root:r).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!qM(e,c)||(o=vne(t.dom,e,c),!o))return null}if(mn)for(let c=o;n&&c;c=Bd(c))c.draggable&&(n=void 0);if(o=s0e(o,e),n){if(qi&&n.nodeType==1&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){let u=n.childNodes[i],h;u.nodeName=="IMG"&&(h=u.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&i++}let c;im&&i&&n.nodeType==1&&(c=n.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,n==t.dom&&i==n.childNodes.length-1&&n.lastChild.nodeType==1&&e.top>n.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||n.nodeType!=1||n.childNodes[i-1].nodeName!="BR")&&(a=a0e(t,n,i,e))}a==null&&(a=o0e(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function O4(t){return t.top<t.bottom||t.left<t.right}function Zo(t,e){let r=t.getClientRects();if(r.length){let n=r[e<0?0:r.length-1];if(O4(n))return n}return Array.prototype.find.call(r,O4)||t.getBoundingClientRect()}const c0e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function bne(t,e,r){let{node:n,offset:i,atom:s}=t.docView.domFromPos(e,r<0?-1:1),o=im||qi;if(n.nodeType==3)if(o&&(c0e.test(n.nodeValue)||(r<0?!i:i==n.nodeValue.length))){let l=Zo(io(n,i,i),r);if(qi&&i&&/\s/.test(n.nodeValue[i-1])&&i<n.nodeValue.length){let c=Zo(io(n,i-1,i-1),-1);if(c.top==l.top){let u=Zo(io(n,i,i+1),-1);if(u.top!=l.top)return ef(u,u.left<c.left)}}return l}else{let l=i,c=i,u=r<0?1:-1;return r<0&&!i?(c++,u=-1):r>=0&&i==n.nodeValue.length?(l--,u=1):r<0?l--:c++,ef(Zo(io(n,l,c),u),u<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(r<0||i==Ai(n))){let l=n.childNodes[i-1];if(l.nodeType==1)return F1(l.getBoundingClientRect(),!1)}if(s==null&&i<Ai(n)){let l=n.childNodes[i];if(l.nodeType==1)return F1(l.getBoundingClientRect(),!0)}return F1(n.getBoundingClientRect(),r>=0)}if(s==null&&i&&(r<0||i==Ai(n))){let l=n.childNodes[i-1],c=l.nodeType==3?io(l,Ai(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return ef(Zo(c,1),!1)}if(s==null&&i<Ai(n)){let l=n.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?io(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return ef(Zo(c,-1),!0)}return ef(Zo(n.nodeType==3?io(n):n,-r),r>=0)}function ef(t,e){if(t.width==0)return t;let r=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:r,right:r}}function F1(t,e){if(t.height==0)return t;let r=e?t.top:t.bottom;return{top:r,bottom:r,left:t.left,right:t.right}}function xne(t,e,r){let n=t.state,i=t.root.activeElement;n!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return r()}finally{n!=e&&t.updateState(n),i!=t.dom&&i&&i.focus()}}function u0e(t,e,r){let n=e.selection,i=r=="up"?n.$from:n.$to;return xne(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,r=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=bne(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=io(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(r=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const d0e=/[\u0590-\u08ac]/;function h0e(t,e,r){let{$head:n}=e.selection;if(!n.parent.isTextblock)return!1;let i=n.parentOffset,s=!i,o=i==n.parent.content.size,a=t.domSelection();return a?!d0e.test(n.parent.textContent)||!a.modify?r=="left"||r=="backward"?s:o:xne(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:h}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",r,"character");let p=n.depth?t.docView.domAfterPos(n.before()):t.dom,{focusNode:m,focusOffset:g}=t.domSelectionRange(),v=m&&!p.contains(m.nodeType==1?m:m.parentNode)||l==m&&c==g;try{a.collapse(u,h),l&&(l!=u||c!=h)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),v}):n.pos==n.start()||n.pos==n.end()}let j4=null,P4=null,I4=!1;function f0e(t,e,r){return j4==e&&P4==r?I4:(j4=e,P4=r,I4=r=="up"||r=="down"?u0e(t,e,r):h0e(t,e,r))}const Li=0,R4=1,Fl=2,zs=3;class sm{constructor(e,r,n,i){this.parent=e,this.children=r,this.dom=n,this.contentDOM=i,this.dirty=Li,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,r,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let r=0;r<this.children.length;r++)e+=this.children[r].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let r=0,n=this.posAtStart;;r++){let i=this.children[r];if(i==e)return n;n+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,r,n){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(n<0){let s,o;if(e==this.contentDOM)s=e.childNodes[r-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[r];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=r>Jr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(r==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&r==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??n>0?this.posAtEnd:this.posAtStart}nearestDesc(e,r=!1){for(let n=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!r||s.node))if(n&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))n=!1;else return s}}getDesc(e){let r=e.pmViewDesc;for(let n=r;n;n=n.parent)if(n==this)return r}posFromDOM(e,r,n){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,r,n)}return-1}descAt(e){for(let r=0,n=0;r<this.children.length;r++){let i=this.children[r],s=n+i.size;if(n==e&&s!=n){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(e<s)return i.descAt(e-n-i.border);n=s}}domFromPos(e,r){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,i=0;for(let s=0;n<this.children.length;n++){let o=this.children[n],a=s+o.size;if(a>e||o instanceof Sne){i=e-s;break}s=a}if(i)return this.children[n].domFromPos(i-this.children[n].border,r);for(let s;n&&!(s=this.children[n-1]).size&&s instanceof wne&&s.side>=0;n--);if(r<=0){let s,o=!0;for(;s=n?this.children[n-1]:null,!(!s||s.dom.parentNode==this.contentDOM);n--,o=!1);return s&&r&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,r):{node:this.contentDOM,offset:s?Jr(s.dom)+1:0}}else{let s,o=!0;for(;s=n<this.children.length?this.children[n]:null,!(!s||s.dom.parentNode==this.contentDOM);n++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,r):{node:this.contentDOM,offset:s?Jr(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,r,n=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:r,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=n,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let u=o+l.border;if(e>=u&&r<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,r,u);e=o;for(let h=a;h>0;h--){let f=this.children[h-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=Jr(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(c>r||a==this.children.length-1)){r=c;for(let u=a+1;u<this.children.length;u++){let h=this.children[u];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){s=Jr(h.dom);break}r+=h.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:r,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let r=this.children[e<0?0:this.children.length-1];return r.size==0||r.emptyChildAt(e)}domAfterPos(e){let{node:r,offset:n}=this.domFromPos(e,0);if(r.nodeType!=1||n==r.childNodes.length)throw new RangeError("No node after pos "+e);return r.childNodes[n]}setSelection(e,r,n,i=!1){let s=Math.min(e,r),o=Math.max(e,r);for(let p=0,m=0;p<this.children.length;p++){let g=this.children[p],v=m+g.size;if(s>m&&o<v)return g.setSelection(e-m-g.border,r-m-g.border,n,i);m=v}let a=this.domFromPos(e,e?-1:1),l=r==e?a:this.domFromPos(r,r?-1:1),c=n.root.getSelection(),u=n.domSelectionRange(),h=!1;if((qi||mn)&&e==r){let{node:p,offset:m}=a;if(p.nodeType==3){if(h=!!(m&&p.nodeValue[m-1]==`
`),h&&m==p.nodeValue.length)for(let g=p,v;g;g=g.parentNode){if(v=g.nextSibling){v.nodeName=="BR"&&(a=l={node:v.parentNode,offset:Jr(v)+1});break}let y=g.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let g=p.childNodes[m-1];h=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(qi&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let p=u.focusNode.childNodes[u.focusOffset];p&&p.contentEditable=="false"&&(i=!0)}if(!(i||h&&mn)&&jc(a.node,a.offset,u.anchorNode,u.anchorOffset)&&jc(l.node,l.offset,u.focusNode,u.focusOffset))return;let f=!1;if((c.extend||e==r)&&!(h&&qi)){c.collapse(a.node,a.offset);try{e!=r&&c.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>r){let m=a;a=l,l=m}let p=document.createRange();p.setEnd(l.node,l.offset),p.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,r){for(let n=0,i=0;i<this.children.length;i++){let s=this.children[i],o=n+s.size;if(n==o?e<=o&&r>=n:e<o&&r>n){let a=n+s.border,l=o-s.border;if(e>=a&&r<=l){this.dirty=e==n||r==o?Fl:R4,e==a&&r==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=zs:s.markDirty(e-a,r-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Fl:zs}n=o}this.dirty=Fl}markParentsDirty(){let e=1;for(let r=this.parent;r;r=r.parent,e++){let n=e==1?Fl:R4;r.dirty<n&&(r.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class wne extends sm{constructor(e,r,n,i){let s,o=r.type.toDOM;if(typeof o=="function"&&(o=o(n,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!r.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=r,this.widget=r,s=this}matchesWidget(e){return this.dirty==Li&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let r=this.widget.spec.stopEvent;return r?r(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class p0e extends sm{constructor(e,r,n,i){super(e,[],r,null),this.textDOM=n,this.text=i}get size(){return this.text.length}localPosFromDOM(e,r){return e!=this.textDOM?this.posAtStart+(r?this.size:0):this.posAtStart+r}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Pc extends sm{constructor(e,r,n,i,s){super(e,[],n,i),this.mark=r,this.spec=s}static create(e,r,n,i){let s=i.nodeViews[r.type.name],o=s&&s(r,i,n);return(!o||!o.dom)&&(o=Wc.renderSpec(document,r.type.spec.toDOM(r,n),null,r.attrs)),new Pc(e,r,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&zs||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=zs&&this.mark.eq(e)}markDirty(e,r){if(super.markDirty(e,r),this.dirty!=Li){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=Li}}slice(e,r,n){let i=Pc.create(this.parent,this.mark,!0,n),s=this.children,o=this.size;r<o&&(s=SI(s,r,o,n)),e>0&&(s=SI(s,0,e,n));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Va extends sm{constructor(e,r,n,i,s,o,a,l,c){super(e,[],s,o),this.node=r,this.outerDeco=n,this.innerDeco=i,this.nodeDOM=a}static create(e,r,n,i,s,o){let a=s.nodeViews[r.type.name],l,c=a&&a(r,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},n,i),u=c&&c.dom,h=c&&c.contentDOM;if(r.isText){if(!u)u=document.createTextNode(r.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:h}=Wc.renderSpec(document,r.type.spec.toDOM(r),null,r.attrs));!h&&!r.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),r.type.spec.draggable&&(u.draggable=!0));let f=u;return u=Cne(u,n,r),c?l=new m0e(e,r,n,i,u,h||null,f,c,s,o+1):r.isText?new F0(e,r,n,i,u,f,s):new Va(e,r,n,i,u,h||null,f,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let r=this.children.length-1;r>=0;r--){let n=this.children[r];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>J.empty)}return e}matchesNode(e,r,n){return this.dirty==Li&&e.eq(this.node)&&rv(r,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,r){let n=this.node.inlineContent,i=r,s=e.composing?this.localCompositionInfo(e,r):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new y0e(this,o&&o.node,e);x0e(this.node,this.innerDeco,(c,u,h)=>{c.spec.marks?l.syncToMarks(c.spec.marks,n,e):c.type.side>=0&&!h&&l.syncToMarks(u==this.node.childCount?bt.none:this.node.child(u).marks,n,e),l.placeWidget(c,e,i)},(c,u,h,f)=>{l.syncToMarks(c.marks,n,e);let p;l.findNodeMatch(c,u,h,f)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(p=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,h,p,e)||l.updateNextNode(c,u,h,e,f,i)||l.addNode(c,u,h,e,i),i+=c.nodeSize}),l.syncToMarks([],n,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Fl)&&(o&&this.protectLocalComposition(e,o),_ne(this.contentDOM,this.children,e),zd&&w0e(this.dom))}localCompositionInfo(e,r){let{from:n,to:i}=e.state.selection;if(!(e.state.selection instanceof De)||n<r||i>r+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=S0e(this.node.content,o,n-r,i-r);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:r,pos:n,text:i}){if(this.getDesc(r))return;let s=r;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new p0e(this,s,r,i);e.input.compositionNodes.push(o),this.children=SI(this.children,n,n+i.length,e,o)}update(e,r,n,i){return this.dirty==zs||!e.sameMarkup(this.node)?!1:(this.updateInner(e,r,n,i),!0)}updateInner(e,r,n,i){this.updateOuterDeco(r),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Li}updateOuterDeco(e){if(rv(e,this.outerDeco))return;let r=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=Ene(this.dom,this.nodeDOM,wI(this.outerDeco,this.node,r),wI(e,this.node,r)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function M4(t,e,r,n,i){Cne(n,e,t);let s=new Va(void 0,t,e,r,n,n,n,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class F0 extends Va{constructor(e,r,n,i,s,o,a){super(e,r,n,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,r,n,i){return this.dirty==zs||this.dirty!=Li&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(r),(this.dirty!=Li||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Li,!0)}inParent(){let e=this.parent.contentDOM;for(let r=this.nodeDOM;r;r=r.parentNode)if(r==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,r,n){return e==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):super.localPosFromDOM(e,r,n)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,r,n){let i=this.node.cut(e,r),s=document.createTextNode(i.text);return new F0(this.parent,i,this.outerDeco,this.innerDeco,s,s,n)}markDirty(e,r){super.markDirty(e,r),this.dom!=this.nodeDOM&&(e==0||r==this.nodeDOM.nodeValue.length)&&(this.dirty=zs)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Sne extends sm{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Li&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class m0e extends Va{constructor(e,r,n,i,s,o,a,l,c,u){super(e,r,n,i,s,o,a,c,u),this.spec=l}update(e,r,n,i){if(this.dirty==zs)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,r,n);return s&&this.updateInner(e,r,n,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,r,n,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,r,n,i){this.spec.setSelection?this.spec.setSelection(e,r,n.root):super.setSelection(e,r,n,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function _ne(t,e,r){let n=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=n;)n=A4(n),i=!0;n=n.nextSibling}else i=!0,t.insertBefore(a,n);if(o instanceof Pc){let l=n?n.previousSibling:t.lastChild;_ne(o.contentDOM,o.children,r),n=l?l.nextSibling:t.firstChild}}for(;n;)n=A4(n),i=!0;i&&r.trackWrites==t&&(r.trackWrites=null)}const jf=function(t){t&&(this.nodeName=t)};jf.prototype=Object.create(null);const ql=[new jf];function wI(t,e,r){if(t.length==0)return ql;let n=r?ql[0]:new jf,i=[n];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(n=new jf(o.nodeName));for(let a in o){let l=o[a];l!=null&&(r&&i.length==1&&i.push(n=new jf(e.isInline?"span":"div")),a=="class"?n.class=(n.class?n.class+" ":"")+l:a=="style"?n.style=(n.style?n.style+";":"")+l:a!="nodeName"&&(n[a]=l))}}}return i}function Ene(t,e,r,n){if(r==ql&&n==ql)return e;let i=e;for(let s=0;s<n.length;s++){let o=n[s],a=r[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=ql[0]),i=l}g0e(i,a||ql[0],o)}return i}function g0e(t,e,r){for(let n in e)n!="class"&&n!="style"&&n!="nodeName"&&!(n in r)&&t.removeAttribute(n);for(let n in r)n!="class"&&n!="style"&&n!="nodeName"&&r[n]!=e[n]&&t.setAttribute(n,r[n]);if(e.class!=r.class){let n=e.class?e.class.split(" ").filter(Boolean):[],i=r.class?r.class.split(" ").filter(Boolean):[];for(let s=0;s<n.length;s++)i.indexOf(n[s])==-1&&t.classList.remove(n[s]);for(let s=0;s<i.length;s++)n.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=r.style){if(e.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=n.exec(e.style);)t.style.removeProperty(i[1])}r.style&&(t.style.cssText+=r.style)}}function Cne(t,e,r){return Ene(t,t,ql,wI(e,r,t.nodeType!=1))}function rv(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].type.eq(e[r].type))return!1;return!0}function A4(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class y0e{constructor(e,r,n){this.lock=r,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=v0e(e.node.content,e)}destroyBetween(e,r){if(e!=r){for(let n=e;n<r;n++)this.top.children[n].destroy();this.top.children.splice(e,r-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,r,n){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Li,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Pc.create(this.top,e[s],r,n);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,r,n,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,r,n))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,r,n)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,r,n,i,s){let o=this.top.children[i];return o.dirty==zs&&o.dom==o.contentDOM&&(o.dirty=Fl),o.update(e,r,n,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let r=e.parentNode;if(!r)return-1;if(r==this.top.contentDOM){let n=e.pmViewDesc;if(n){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==n)return i}return-1}e=r}}updateNextNode(e,r,n,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Va){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,h,f=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=zs&&rv(r,l.outerDeco));if(!f&&l.update(e,r,n,i))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!f&&(h=this.recreateWrapper(l,e,r,n,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=h,h.contentDOM&&(h.dirty=Fl,h.updateChildren(i,o+1),h.dirty=Li),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,r,n,i,s,o){if(e.dirty||r.isAtom||!e.children.length||!e.node.content.eq(r.content)||!rv(n,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=Va.create(this.top,r,n,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,r,n,i,s){let o=Va.create(this.top,e,r,n,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,r,n){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new wne(this.top,e,r,n);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],r=this.top;for(;e instanceof Pc;)r=e,e=r.children[r.children.length-1];(!e||!(e instanceof F0)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((mn||$r)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",r),this.addHackNode("BR",this.top))}addHackNode(e,r){if(r==this.top&&this.index<r.children.length&&r.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);e=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),e=="BR"&&(n.className="ProseMirror-trailingBreak");let i=new Sne(this.top,[],n,null);r!=this.top?r.children.push(i):r.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function v0e(t,e){let r=e,n=r.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(n){let c=r.children[n-1];if(c instanceof Pc)r=c,n=c.children.length;else{a=c,n--;break}}else{if(r==e)break e;n=r.parent.children.indexOf(r),r=r.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function b0e(t,e){return t.type.side-e.type.side}function x0e(t,e,r,n){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);n(u,i,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,h;for(;o<i.length&&i[o].to==s;){let v=i[o++];v.widget&&(u?(h||(h=[u])).push(v):u=v)}if(u)if(h){h.sort(b0e);for(let v=0;v<h.length;v++)r(h[v],c,!!l)}else r(u,c,!!l);let f,p;if(l)p=-1,f=l,l=null;else if(c<t.childCount)p=c,f=t.child(c++);else break;for(let v=0;v<a.length;v++)a[v].to<=s&&a.splice(v--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let m=s+f.nodeSize;if(f.isText){let v=m;o<i.length&&i[o].from<v&&(v=i[o].from);for(let y=0;y<a.length;y++)a[y].to<v&&(v=a[y].to);v<m&&(l=f.cut(v-s),f=f.cut(0,v-s),m=v,p=-1)}else for(;o<i.length&&i[o].to<m;)o++;let g=f.isInline&&!f.isLeaf?a.filter(v=>!v.inline):a.slice();n(f,g,e.forChild(s,f),p),s=m}}function w0e(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function S0e(t,e,r,n){for(let i=0,s=0;i<t.childCount&&s<=n;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=r){if(s>=n&&l.slice(n-e.length-a,n-a)==e)return n-e.length;let c=a<n?l.lastIndexOf(e,n-a-1):-1;if(c>=0&&c+e.length+a>=r)return a+c;if(r==n&&l.length>=n+e.length-a&&l.slice(n-a,n-a+e.length)==e)return n}}return-1}function SI(t,e,r,n,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,u=a+=l.size;c>=r||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,n)),i&&(s.push(i),i=void 0),u>r&&s.push(l.slice(r-c,l.size,n)))}return s}function LM(t,e=null){let r=t.domSelectionRange(),n=t.state.doc;if(!r.focusNode)return null;let i=t.docView.nearestDesc(r.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(o<0)return null;let a=n.resolve(o),l,c;if($0(r)){for(l=o;i&&!i.node;)i=i.parent;let h=i.node;if(i&&h.isAtom&&je.isSelectable(h)&&i.parent&&!(h.isInline&&Yve(r.focusNode,r.focusOffset,i.dom))){let f=i.posBefore;c=new je(o==f?a:n.resolve(f))}}else{if(r instanceof t.dom.ownerDocument.defaultView.Selection&&r.rangeCount>1){let h=o,f=o;for(let p=0;p<r.rangeCount;p++){let m=r.getRangeAt(p);h=Math.min(h,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(h<0)return null;[l,o]=f==t.state.selection.anchor?[f,h]:[h,f],a=n.resolve(o)}else l=t.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(l<0)return null}let u=n.resolve(l);if(!c){let h=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=BM(t,u,a,h)}return c}function Nne(t){return t.editable?t.hasFocus():Tne(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function bo(t,e=!1){let r=t.state.selection;if(kne(t,r),!!Nne(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&$r){let n=t.domSelectionRange(),i=t.domObserver.currentSelection;if(n.anchorNode&&i.anchorNode&&jc(n.anchorNode,n.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)E0e(t);else{let{anchor:n,head:i}=r,s,o;D4&&!(r instanceof De)&&(r.$from.parent.inlineContent||(s=$4(t,r.from)),!r.empty&&!r.$from.parent.inlineContent&&(o=$4(t,r.to))),t.docView.setSelection(n,i,t,e),D4&&(s&&F4(s),o&&F4(o)),r.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&_0e(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const D4=mn||$r&&fne<63;function $4(t,e){let{node:r,offset:n}=t.docView.domFromPos(e,0),i=n<r.childNodes.length?r.childNodes[n]:null,s=n?r.childNodes[n-1]:null;if(mn&&i&&i.contentEditable=="false")return q1(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return q1(i);if(s)return q1(s)}}function q1(t){return t.contentEditable="true",mn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function F4(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function _0e(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let r=t.domSelectionRange(),n=r.anchorNode,i=r.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(r.anchorNode!=n||r.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!Nne(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function E0e(t){let e=t.domSelection();if(!e)return;let r=t.cursorWrapper.dom,n=r.nodeName=="IMG";n?e.collapse(r.parentNode,Jr(r)+1):e.collapse(r,0),!n&&!t.state.selection.visible&&ei&&za<=11&&(r.disabled=!0,r.disabled=!1)}function kne(t,e){if(e instanceof je){let r=t.docView.descAt(e.from);r!=t.lastSelectedViewDesc&&(q4(t),r&&r.selectNode(),t.lastSelectedViewDesc=r)}else q4(t)}function q4(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function BM(t,e,r,n){return t.someProp("createSelectionBetween",i=>i(t,e,r))||De.between(e,r,n)}function L4(t){return t.editable&&!t.hasFocus()?!1:Tne(t)}function Tne(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function C0e(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),r=t.domSelectionRange();return jc(e.node,e.offset,r.anchorNode,r.anchorOffset)}function _I(t,e){let{$anchor:r,$head:n}=t.selection,i=e>0?r.max(n):r.min(n),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&Ue.findFrom(s,e)}function na(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function B4(t,e,r){let n=t.state.selection;if(n instanceof De)if(r.indexOf("s")>-1){let{$head:i}=n,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return na(t,new De(n.$anchor,o))}else if(n.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=_I(t.state,e);return i&&i instanceof je?na(t,i):!1}else if(!(ji&&r.indexOf("m")>-1)){let i=n.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?je.isSelectable(s)?na(t,new je(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):im?na(t,new De(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(n instanceof je&&n.node.isInline)return na(t,new De(e>0?n.$to:n.$from));{let i=_I(t.state,e);return i?na(t,i):!1}}}function nv(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Pf(t,e){let r=t.pmViewDesc;return r&&r.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function wu(t,e){return e<0?N0e(t):k0e(t)}function N0e(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let i,s,o=!1;for(qi&&r.nodeType==1&&n<nv(r)&&Pf(r.childNodes[n],-1)&&(o=!0);;)if(n>0){if(r.nodeType!=1)break;{let a=r.childNodes[n-1];if(Pf(a,-1))i=r,s=--n;else if(a.nodeType==3)r=a,n=r.nodeValue.length;else break}}else{if(One(r))break;{let a=r.previousSibling;for(;a&&Pf(a,-1);)i=r.parentNode,s=Jr(a),a=a.previousSibling;if(a)r=a,n=nv(r);else{if(r=r.parentNode,r==t.dom)break;n=0}}}o?EI(t,r,n):i&&EI(t,i,s)}function k0e(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let i=nv(r),s,o;for(;;)if(n<i){if(r.nodeType!=1)break;let a=r.childNodes[n];if(Pf(a,1))s=r,o=++n;else break}else{if(One(r))break;{let a=r.nextSibling;for(;a&&Pf(a,1);)s=a.parentNode,o=Jr(a)+1,a=a.nextSibling;if(a)r=a,n=0,i=nv(r);else{if(r=r.parentNode,r==t.dom)break;n=i=0}}}s&&EI(t,s,o)}function One(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function T0e(t,e){for(;t&&e==t.childNodes.length&&!nm(t);)e=Jr(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let r=t.childNodes[e];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=0}}function O0e(t,e){for(;t&&!e&&!nm(t);)e=Jr(t),t=t.parentNode;for(;t&&e;){let r=t.childNodes[e-1];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=t.childNodes.length}}function EI(t,e,r){if(e.nodeType!=3){let s,o;(o=T0e(e,r))?(e=o,r=0):(s=O0e(e,r))&&(e=s,r=s.nodeValue.length)}let n=t.domSelection();if(!n)return;if($0(n)){let s=document.createRange();s.setEnd(e,r),s.setStart(e,r),n.removeAllRanges(),n.addRange(s)}else n.extend&&n.extend(e,r);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&bo(t)},50)}function z4(t,e){let r=t.state.doc.resolve(e);if(!($r||pne)&&r.parent.inlineContent){let i=t.coordsAtPos(e);if(e>r.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<r.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function V4(t,e,r){let n=t.state.selection;if(n instanceof De&&!n.empty||r.indexOf("s")>-1||ji&&r.indexOf("m")>-1)return!1;let{$from:i,$to:s}=n;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=_I(t.state,e);if(o&&o instanceof je)return na(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=n instanceof mi?Ue.near(o,e):Ue.findFrom(o,e);return a?na(t,a):!1}return!1}function U4(t,e){if(!(t.state.selection instanceof De))return!0;let{$head:r,$anchor:n,empty:i}=t.state.selection;if(!r.sameParent(n))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!r.textOffset&&(e<0?r.nodeBefore:r.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(r.pos-s.nodeSize,r.pos):o.delete(r.pos,r.pos+s.nodeSize),t.dispatch(o),!0}return!1}function H4(t,e,r){t.domObserver.stop(),e.contentEditable=r,t.domObserver.start()}function j0e(t){if(!mn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(e&&e.nodeType==1&&r==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let n=e.firstChild;H4(t,n,"true"),setTimeout(()=>H4(t,n,"false"),20)}return!1}function P0e(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function I0e(t,e){let r=e.keyCode,n=P0e(e);if(r==8||ji&&r==72&&n=="c")return U4(t,-1)||wu(t,-1);if(r==46&&!e.shiftKey||ji&&r==68&&n=="c")return U4(t,1)||wu(t,1);if(r==13||r==27)return!0;if(r==37||ji&&r==66&&n=="c"){let i=r==37?z4(t,t.state.selection.from)=="ltr"?-1:1:-1;return B4(t,i,n)||wu(t,i)}else if(r==39||ji&&r==70&&n=="c"){let i=r==39?z4(t,t.state.selection.from)=="ltr"?1:-1:1;return B4(t,i,n)||wu(t,i)}else{if(r==38||ji&&r==80&&n=="c")return V4(t,-1,n)||wu(t,-1);if(r==40||ji&&r==78&&n=="c")return j0e(t)||V4(t,1,n)||wu(t,1);if(n==(ji?"m":"c")&&(r==66||r==73||r==89||r==90))return!0}return!1}function zM(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let r=[],{content:n,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&n.childCount==1&&n.firstChild.childCount==1;){i--,s--;let p=n.firstChild;r.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),n=p.content}let o=t.someProp("clipboardSerializer")||Wc.fromSchema(t.state.schema),a=Ane(),l=a.createElement("div");l.appendChild(o.serializeFragment(n,{document:a}));let c=l.firstChild,u,h=0;for(;c&&c.nodeType==1&&(u=Mne[c.nodeName.toLowerCase()]);){for(let p=u.length-1;p>=0;p--){let m=a.createElement(u[p]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),h++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${h?` -${h}`:""} ${JSON.stringify(r)}`);let f=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f,slice:e}}function jne(t,e,r,n,i){let s=i.parent.type.spec.code,o,a;if(!r&&!e)return null;let l=!!e&&(n||s||!r);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,s||n,t)}),s)return a=new pe(J.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",f=>{a=f(a,t,!0)}),a;let h=t.someProp("clipboardTextParser",f=>f(e,i,n,t));if(h)a=h;else{let f=i.marks(),{schema:p}=t.state,m=Wc.fromSchema(p);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let v=o.appendChild(document.createElement("p"));g&&v.appendChild(m.serializeNode(p.text(g,f)))})}}else t.someProp("transformPastedHTML",h=>{r=h(r,t)}),o=D0e(r),im&&$0e(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let h=+u[3];h>0;h--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Ba.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!R0e.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)a=F0e(W4(a,+u[1],+u[2]),u[4]);else if(a=pe.maxOpen(M0e(a.content,i),!0),a.openStart||a.openEnd){let h=0,f=0;for(let p=a.content.firstChild;h<a.openStart&&!p.type.spec.isolating;h++,p=p.firstChild);for(let p=a.content.lastChild;f<a.openEnd&&!p.type.spec.isolating;f++,p=p.lastChild);a=W4(a,h,f)}return t.someProp("transformPasted",h=>{a=h(a,t,l)}),a}const R0e=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function M0e(t,e){if(t.childCount<2)return t;for(let r=e.depth;r>=0;r--){let i=e.node(r).contentMatchAt(e.index(r)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&Ine(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=Rne(o[o.length-1],s.length));let u=Pne(a,l);o.push(u),i=i.matchType(u.type),s=l}}),o)return J.from(o)}return t}function Pne(t,e,r=0){for(let n=e.length-1;n>=r;n--)t=e[n].create(null,J.from(t));return t}function Ine(t,e,r,n,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=Ine(t,e,r,n.lastChild,i+1);if(s)return n.copy(n.content.replaceChild(n.childCount-1,s));if(n.contentMatchAt(n.childCount).matchType(i==t.length-1?r.type:t[i+1]))return n.copy(n.content.append(J.from(Pne(r,t,i+1))))}}function Rne(t,e){if(e==0)return t;let r=t.content.replaceChild(t.childCount-1,Rne(t.lastChild,e-1)),n=t.contentMatchAt(t.childCount).fillBefore(J.empty,!0);return t.copy(r.append(n))}function CI(t,e,r,n,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<n-1&&(a=CI(a,e,r,n,i+1,s)),i>=r&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(J.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function W4(t,e,r){return e<t.openStart&&(t=new pe(CI(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),r<t.openEnd&&(t=new pe(CI(t.content,1,r,t.openEnd,0,0),t.openStart,r)),t}const Mne={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let K4=null;function Ane(){return K4||(K4=document.implementation.createHTMLDocument("title"))}let L1=null;function A0e(t){let e=window.trustedTypes;return e?(L1||(L1=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:r=>r})),L1.createHTML(t)):t}function D0e(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let r=Ane().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(t),i;if((i=n&&Mne[n[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),r.innerHTML=A0e(t),i)for(let s=0;s<i.length;s++)r=r.querySelector(i[s])||r;return r}function $0e(t){let e=t.querySelectorAll($r?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<e.length;r++){let n=e[r];n.childNodes.length==1&&n.textContent==""&&n.parentNode&&n.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),n)}}function F0e(t,e){if(!t.size)return t;let r=t.content.firstChild.type.schema,n;try{n=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=n.length-2;a>=0;a-=2){let l=r.nodes[n[a]];if(!l||l.hasRequiredAttrs())break;i=J.from(l.create(n[a+1],i)),s++,o++}return new pe(i,s,o)}const jn={},Pn={},q0e={touchstart:!0,touchmove:!0};class L0e{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function B0e(t){for(let e in jn){let r=jn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=n=>{V0e(t,n)&&!VM(t,n)&&(t.editable||!(n.type in Pn))&&r(t,n)},q0e[e]?{passive:!0}:void 0)}mn&&t.dom.addEventListener("input",()=>null),NI(t)}function Ta(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function z0e(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function NI(t){t.someProp("handleDOMEvents",e=>{for(let r in e)t.input.eventHandlers[r]||t.dom.addEventListener(r,t.input.eventHandlers[r]=n=>VM(t,n))})}function VM(t,e){return t.someProp("handleDOMEvents",r=>{let n=r[e.type];return n?n(t,e)||e.defaultPrevented:!1})}function V0e(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r=e.target;r!=t.dom;r=r.parentNode)if(!r||r.nodeType==11||r.pmViewDesc&&r.pmViewDesc.stopEvent(e))return!1;return!0}function U0e(t,e){!VM(t,e)&&jn[e.type]&&(t.editable||!(e.type in Pn))&&jn[e.type](t,e)}Pn.keydown=(t,e)=>{let r=e;if(t.input.shiftKey=r.keyCode==16||r.shiftKey,!$ne(t,r)&&(t.input.lastKeyCode=r.keyCode,t.input.lastKeyCodeTime=Date.now(),!(fo&&$r&&r.keyCode==13)))if(r.keyCode!=229&&t.domObserver.forceFlush(),zd&&r.keyCode==13&&!r.ctrlKey&&!r.altKey&&!r.metaKey){let n=Date.now();t.input.lastIOSEnter=n,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==n&&(t.someProp("handleKeyDown",i=>i(t,Pl(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",n=>n(t,r))||I0e(t,r)?r.preventDefault():Ta(t,"key")};Pn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Pn.keypress=(t,e)=>{let r=e;if($ne(t,r)||!r.charCode||r.ctrlKey&&!r.altKey||ji&&r.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,r))){r.preventDefault();return}let n=t.state.selection;if(!(n instanceof De)||!n.$from.sameParent(n.$to)){let i=String.fromCharCode(r.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,n.$from.pos,n.$to.pos,i,s))&&t.dispatch(s()),r.preventDefault()}};function q0(t){return{left:t.clientX,top:t.clientY}}function H0e(t,e){let r=e.x-t.clientX,n=e.y-t.clientY;return r*r+n*n<100}function UM(t,e,r,n,i){if(n==-1)return!1;let s=t.state.doc.resolve(n);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,r,s.nodeAfter,s.before(o),i,!0):a(t,r,s.node(o),s.before(o),i,!1)))return!0;return!1}function od(t,e,r){if(t.focused||t.focus(),t.state.selection.eq(e))return;let n=t.state.tr.setSelection(e);n.setMeta("pointer",!0),t.dispatch(n)}function W0e(t,e){if(e==-1)return!1;let r=t.state.doc.resolve(e),n=r.nodeAfter;return n&&n.isAtom&&je.isSelectable(n)?(od(t,new je(r)),!0):!1}function K0e(t,e){if(e==-1)return!1;let r=t.state.selection,n,i;r instanceof je&&(n=r.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(je.isSelectable(a)){n&&r.$from.depth>0&&o>=r.$from.depth&&s.before(r.$from.depth+1)==r.$from.pos?i=s.before(r.$from.depth):i=s.before(o);break}}return i!=null?(od(t,je.create(t.state.doc,i)),!0):!1}function G0e(t,e,r,n,i){return UM(t,"handleClickOn",e,r,n)||t.someProp("handleClick",s=>s(t,e,n))||(i?K0e(t,r):W0e(t,r))}function Y0e(t,e,r,n){return UM(t,"handleDoubleClickOn",e,r,n)||t.someProp("handleDoubleClick",i=>i(t,e,n))}function Q0e(t,e,r,n){return UM(t,"handleTripleClickOn",e,r,n)||t.someProp("handleTripleClick",i=>i(t,e,n))||X0e(t,r,n)}function X0e(t,e,r){if(r.button!=0)return!1;let n=t.state.doc;if(e==-1)return n.inlineContent?(od(t,De.create(n,0,n.content.size)),!0):!1;let i=n.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)od(t,De.create(n,a+1,a+1+o.content.size));else if(je.isSelectable(o))od(t,je.create(n,a));else continue;return!0}}function HM(t){return iv(t)}const Dne=ji?"metaKey":"ctrlKey";jn.mousedown=(t,e)=>{let r=e;t.input.shiftKey=r.shiftKey;let n=HM(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&H0e(r,t.input.lastClick)&&!r[Dne]&&t.input.lastClick.button==r.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:r.clientX,y:r.clientY,type:s,button:r.button};let o=t.posAtCoords(q0(r));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new J0e(t,o,r,!!n)):(s=="doubleClick"?Y0e:Q0e)(t,o.pos,o.inside,r)?r.preventDefault():Ta(t,"pointer"))};class J0e{constructor(e,r,n,i){this.view=e,this.pos=r,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[Dne],this.allowDefault=n.shiftKey;let s,o;if(r.inside>-1)s=e.state.doc.nodeAt(r.inside),o=r.inside;else{let u=e.state.doc.resolve(r.pos);s=u.parent,o=u.depth?u.before():0}const a=i?null:n.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=e.state;(n.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof je&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&qi&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ta(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>bo(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let r=this.pos;this.view.state.doc!=this.startDoc&&(r=this.view.posAtCoords(q0(e))),this.updateAllowDefault(e),this.allowDefault||!r?Ta(this.view,"pointer"):G0e(this.view,r.pos,r.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||mn&&this.mightDrag&&!this.mightDrag.node.isAtom||$r&&!this.view.state.selection.visible&&Math.min(Math.abs(r.pos-this.view.state.selection.from),Math.abs(r.pos-this.view.state.selection.to))<=2)?(od(this.view,Ue.near(this.view.state.doc.resolve(r.pos))),e.preventDefault()):Ta(this.view,"pointer")}move(e){this.updateAllowDefault(e),Ta(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}jn.touchstart=t=>{t.input.lastTouch=Date.now(),HM(t),Ta(t,"pointer")};jn.touchmove=t=>{t.input.lastTouch=Date.now(),Ta(t,"pointer")};jn.contextmenu=t=>HM(t);function $ne(t,e){return t.composing?!0:mn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const Z0e=fo?5e3:-1;Pn.compositionstart=Pn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,r=e.selection.$to;if(e.selection instanceof De&&(e.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)||$r&&pne&&ebe(t)))t.markCursor=t.state.storedMarks||r.marks(),iv(t,!0),t.markCursor=null;else if(iv(t,!e.selection.empty),qi&&e.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let n=t.domSelectionRange();for(let i=n.focusNode,s=n.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}Fne(t,Z0e)};function ebe(t){let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(!e||e.nodeType!=1||r>=e.childNodes.length)return!1;let n=e.childNodes[r];return n.nodeType==1&&n.contentEditable=="false"}Pn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,Fne(t,20))};function Fne(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>iv(t),e))}function qne(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=rbe());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function tbe(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let r=Kve(e.focusNode,e.focusOffset),n=Gve(e.focusNode,e.focusOffset);if(r&&n&&r!=n){let i=n.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(r==s||n==s)return s;if(!i||!i.isText(n.nodeValue))return n;if(t.input.compositionNode==n){let o=r.pmViewDesc;if(!(!o||!o.isText(r.nodeValue)))return n}}return r||n}function rbe(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function iv(t,e=!1){if(!(fo&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),qne(t),e||t.docView&&t.docView.dirty){let r=LM(t),n=t.state.selection;return r&&!r.eq(n)?t.dispatch(t.state.tr.setSelection(r)):(t.markCursor||e)&&!n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function nbe(t,e){if(!t.dom.parentNode)return;let r=t.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(e),r.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),n.removeAllRanges(),n.addRange(i),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),t.focus()},50)}const yp=ei&&za<15||zd&&Jve<604;jn.copy=Pn.cut=(t,e)=>{let r=e,n=t.state.selection,i=r.type=="cut";if(n.empty)return;let s=yp?null:r.clipboardData,o=n.content(),{dom:a,text:l}=zM(t,o);s?(r.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):nbe(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function ibe(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function sbe(t,e){if(!t.dom.parentNode)return;let r=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,n=t.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),n.parentNode&&n.parentNode.removeChild(n),r?vp(t,n.value,null,i,e):vp(t,n.textContent,n.innerHTML,i,e)},50)}function vp(t,e,r,n,i){let s=jne(t,e,r,n,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||pe.empty)))return!0;if(!s)return!1;let o=ibe(s),a=o?t.state.tr.replaceSelectionWith(o,n):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Lne(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let r=t.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}Pn.paste=(t,e)=>{let r=e;if(t.composing&&!fo)return;let n=yp?null:r.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;n&&vp(t,Lne(n),n.getData("text/html"),i,r)?r.preventDefault():sbe(t,r)};class Bne{constructor(e,r,n){this.slice=e,this.move=r,this.node=n}}const obe=ji?"altKey":"ctrlKey";function zne(t,e){let r=t.someProp("dragCopies",n=>!n(e));return r??!e[obe]}jn.dragstart=(t,e)=>{let r=e,n=t.input.mouseDown;if(n&&n.done(),!r.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(q0(r)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof je?i.to-1:i.to))){if(n&&n.mightDrag)o=je.create(t.state.doc,n.mightDrag.pos);else if(r.target&&r.target.nodeType==1){let h=t.docView.nearestDesc(r.target,!0);h&&h.node.type.spec.draggable&&h!=t.docView&&(o=je.create(t.state.doc,h.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c,slice:u}=zM(t,a);(!r.dataTransfer.files.length||!$r||fne>120)&&r.dataTransfer.clearData(),r.dataTransfer.setData(yp?"Text":"text/html",l.innerHTML),r.dataTransfer.effectAllowed="copyMove",yp||r.dataTransfer.setData("text/plain",c),t.dragging=new Bne(u,zne(t,r),o)};jn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Pn.dragover=Pn.dragenter=(t,e)=>e.preventDefault();Pn.drop=(t,e)=>{try{abe(t,e,t.dragging)}finally{t.dragging=null}};function abe(t,e,r){if(!e.dataTransfer)return;let n=t.posAtCoords(q0(e));if(!n)return;let i=t.state.doc.resolve(n.pos),s=r&&r.slice;s?t.someProp("transformPasted",p=>{s=p(s,t,!1)}):s=jne(t,Lne(e.dataTransfer),yp?null:e.dataTransfer.getData("text/html"),!1,i);let o=!!(r&&zne(t,e));if(t.someProp("handleDrop",p=>p(t,e,s||pe.empty,o))){e.preventDefault();return}if(!s)return;e.preventDefault();let a=s?Wre(t.state.doc,i.pos,s):i.pos;a==null&&(a=i.pos);let l=t.state.tr;if(o){let{node:p}=r;p?p.replace(l):l.deleteSelection()}let c=l.mapping.map(a),u=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,h=l.doc;if(u?l.replaceRangeWith(c,c,s.content.firstChild):l.replaceRange(c,c,s),l.doc.eq(h))return;let f=l.doc.resolve(c);if(u&&je.isSelectable(s.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(s.content.firstChild))l.setSelection(new je(f));else{let p=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((m,g,v,y)=>p=y),l.setSelection(BM(t,f,l.doc.resolve(p)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}jn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&bo(t)},20))};jn.blur=(t,e)=>{let r=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),r.relatedTarget&&t.dom.contains(r.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};jn.beforeinput=(t,e)=>{if($r&&fo&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:n}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=n||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Pl(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Pn)jn[t]=Pn[t];function bp(t,e){if(t==e)return!0;for(let r in t)if(t[r]!==e[r])return!1;for(let r in e)if(!(r in t))return!1;return!0}class sv{constructor(e,r){this.toDOM=e,this.spec=r||oc,this.side=this.spec.side||0}map(e,r,n,i){let{pos:s,deleted:o}=e.mapResult(r.from+i,this.side<0?-1:1);return o?null:new Tn(s-n,s-n,this)}valid(){return!0}eq(e){return this==e||e instanceof sv&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&bp(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Ua{constructor(e,r){this.attrs=e,this.spec=r||oc}map(e,r,n,i){let s=e.map(r.from+i,this.spec.inclusiveStart?-1:1)-n,o=e.map(r.to+i,this.spec.inclusiveEnd?1:-1)-n;return s>=o?null:new Tn(s,o,this)}valid(e,r){return r.from<r.to}eq(e){return this==e||e instanceof Ua&&bp(this.attrs,e.attrs)&&bp(this.spec,e.spec)}static is(e){return e.type instanceof Ua}destroy(){}}class WM{constructor(e,r){this.attrs=e,this.spec=r||oc}map(e,r,n,i){let s=e.mapResult(r.from+i,1);if(s.deleted)return null;let o=e.mapResult(r.to+i,-1);return o.deleted||o.pos<=s.pos?null:new Tn(s.pos-n,o.pos-n,this)}valid(e,r){let{index:n,offset:i}=e.content.findIndex(r.from),s;return i==r.from&&!(s=e.child(n)).isText&&i+s.nodeSize==r.to}eq(e){return this==e||e instanceof WM&&bp(this.attrs,e.attrs)&&bp(this.spec,e.spec)}destroy(){}}class Tn{constructor(e,r,n){this.from=e,this.to=r,this.type=n}copy(e,r){return new Tn(e,r,this.type)}eq(e,r=0){return this.type.eq(e.type)&&this.from+r==e.from&&this.to+r==e.to}map(e,r,n){return this.type.map(e,this,r,n)}static widget(e,r,n){return new Tn(e,e,new sv(r,n))}static inline(e,r,n,i){return new Tn(e,r,new Ua(n,i))}static node(e,r,n,i){return new Tn(e,r,new WM(n,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ua}get widget(){return this.type instanceof sv}}const ku=[],oc={};class qt{constructor(e,r){this.local=e.length?e:ku,this.children=r.length?r:ku}static create(e,r){return r.length?ov(r,e,0,oc):un}find(e,r,n){let i=[];return this.findInner(e??0,r??1e9,i,0,n),i}findInner(e,r,n,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=r&&a.to>=e&&(!s||s(a.spec))&&n.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<r&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,r-a,n,i+a,s)}}map(e,r,n){return this==un||e.maps.length==0?this:this.mapInner(e,r,0,0,n||oc)}mapInner(e,r,n,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,n,i);l&&l.type.valid(r,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?lbe(this.children,o||[],e,r,n,i,s):o?new qt(o.sort(ac),ku):un}add(e,r){return r.length?this==un?qt.create(e,r):this.addInner(e,r,0):this}addInner(e,r,n){let i,s=0;e.forEach((a,l)=>{let c=l+n,u;if(u=Une(r,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,u,c+1):i.splice(s,0,l,l+a.nodeSize,ov(u,a,c+1,oc)),s+=3}});let o=Vne(s?Hne(r):r,-n);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new qt(o.length?this.local.concat(o).sort(ac):this.local,i||this.children)}remove(e){return e.length==0||this==un?this:this.removeInner(e,0)}removeInner(e,r){let n=this.children,i=this.local;for(let s=0;s<n.length;s+=3){let o,a=n[s]+r,l=n[s+1]+r;for(let u=0,h;u<e.length;u++)(h=e[u])&&h.from>a&&h.to<l&&(e[u]=null,(o||(o=[])).push(h));if(!o)continue;n==this.children&&(n=this.children.slice());let c=n[s+2].removeInner(o,a+1);c!=un?n[s+2]=c:(n.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,r)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return n==this.children&&i==this.local?this:i.length||n.length?new qt(i,n):un}forChild(e,r){if(this==un)return this;if(r.isLeaf)return qt.empty;let n,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(n=this.children[a+2]);break}let s=e+1,o=s+r.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Ua){let c=Math.max(s,l.from)-s,u=Math.min(o,l.to)-s;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new qt(i.sort(ac),ku);return n?new ua([a,n]):a}return n||un}eq(e){if(this==e)return!0;if(!(e instanceof qt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let r=0;r<this.local.length;r++)if(!this.local[r].eq(e.local[r]))return!1;for(let r=0;r<this.children.length;r+=3)if(this.children[r]!=e.children[r]||this.children[r+1]!=e.children[r+1]||!this.children[r+2].eq(e.children[r+2]))return!1;return!0}locals(e){return KM(this.localsInner(e))}localsInner(e){if(this==un)return ku;if(e.inlineContent||!this.local.some(Ua.is))return this.local;let r=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof Ua||r.push(this.local[n]);return r}forEachSet(e){e(this)}}qt.empty=new qt([],[]);qt.removeOverlap=KM;const un=qt.empty;class ua{constructor(e){this.members=e}map(e,r){const n=this.members.map(i=>i.map(e,r,oc));return ua.from(n)}forChild(e,r){if(r.isLeaf)return qt.empty;let n=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,r);s!=un&&(s instanceof ua?n=n.concat(s.members):n.push(s))}return ua.from(n)}eq(e){if(!(e instanceof ua)||e.members.length!=this.members.length)return!1;for(let r=0;r<this.members.length;r++)if(!this.members[r].eq(e.members[r]))return!1;return!0}locals(e){let r,n=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!r)r=s;else{n&&(r=r.slice(),n=!1);for(let o=0;o<s.length;o++)r.push(s[o])}}return r?KM(n?r:r.sort(ac)):ku}static from(e){switch(e.length){case 0:return un;case 1:return e[0];default:return new ua(e.every(r=>r instanceof qt)?e:e.reduce((r,n)=>r.concat(n instanceof qt?n:n.members),[]))}}forEachSet(e){for(let r=0;r<this.members.length;r++)this.members[r].forEachSet(e)}}function lbe(t,e,r,n,i,s,o){let a=t.slice();for(let c=0,u=s;c<r.maps.length;c++){let h=0;r.maps[c].forEach((f,p,m,g)=>{let v=g-m-(p-f);for(let y=0;y<a.length;y+=3){let b=a[y+1];if(b<0||f>b+u-h)continue;let w=a[y]+u-h;p>=w?a[y+1]=f<=w?-2:-1:f>=u&&v&&(a[y]+=v,a[y+1]+=v)}h+=v}),u=r.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=r.map(t[c]+s),h=u-i;if(h<0||h>=n.content.size){l=!0;continue}let f=r.map(t[c+1]+s,-1),p=f-i,{index:m,offset:g}=n.content.findIndex(h),v=n.maybeChild(m);if(v&&g==h&&g+v.nodeSize==p){let y=a[c+2].mapInner(r,v,u+1,t[c]+s+1,o);y!=un?(a[c]=h,a[c+1]=p,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=cbe(a,t,e,r,i,s,o),u=ov(c,n,0,o);e=u.local;for(let h=0;h<a.length;h+=3)a[h+1]<0&&(a.splice(h,3),h-=3);for(let h=0,f=0;h<u.children.length;h+=3){let p=u.children[h];for(;f<a.length&&a[f]<p;)f+=3;a.splice(f,0,u.children[h],u.children[h+1],u.children[h+2])}}return new qt(e.sort(ac),a)}function Vne(t,e){if(!e||!t.length)return t;let r=[];for(let n=0;n<t.length;n++){let i=t[n];r.push(new Tn(i.from+e,i.to+e,i.type))}return r}function cbe(t,e,r,n,i,s,o){function a(l,c){for(let u=0;u<l.local.length;u++){let h=l.local[u].map(n,i,c);h?r.push(h):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return r}function Une(t,e,r){if(e.isLeaf)return null;let n=r+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>r&&o.to<n&&((i||(i=[])).push(o),t[s]=null);return i}function Hne(t){let e=[];for(let r=0;r<t.length;r++)t[r]!=null&&e.push(t[r]);return e}function ov(t,e,r,n){let i=[],s=!1;e.forEach((a,l)=>{let c=Une(t,a,l+r);if(c){s=!0;let u=ov(c,a,r+l+1,n);u!=un&&i.push(l,l+a.nodeSize,u)}});let o=Vne(s?Hne(t):t,-r).sort(ac);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(n.onRemove&&n.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new qt(o,i):un}function ac(t,e){return t.from-e.from||t.to-e.to}function KM(t){let e=t;for(let r=0;r<e.length-1;r++){let n=e[r];if(n.from!=n.to)for(let i=r+1;i<e.length;i++){let s=e[i];if(s.from==n.from){s.to!=n.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,n.to),G4(e,i+1,s.copy(n.to,s.to)));continue}else{s.from<n.to&&(e==t&&(e=t.slice()),e[r]=n.copy(n.from,s.from),G4(e,i,n.copy(s.from,n.to)));break}}}return e}function G4(t,e,r){for(;e<t.length&&ac(r,t[e])>0;)e++;t.splice(e,0,r)}function B1(t){let e=[];return t.someProp("decorations",r=>{let n=r(t.state);n&&n!=un&&e.push(n)}),t.cursorWrapper&&e.push(qt.create(t.state.doc,[t.cursorWrapper.deco])),ua.from(e)}const ube={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},dbe=ei&&za<=11;class hbe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class fbe{constructor(e,r){this.view=e,this.handleDOMChange=r,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new hbe,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let i=0;i<n.length;i++)this.queue.push(n[i]);ei&&za<=11&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),dbe&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,ube)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let r=0;r<e.length;r++)this.queue.push(e[r]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(L4(this.view)){if(this.suppressingSelectionUpdates)return bo(this.view);if(ei&&za<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&jc(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let r=new Set,n;for(let s=e.focusNode;s;s=Bd(s))r.add(s);for(let s=e.anchorNode;s;s=Bd(s))if(r.has(s)){n=s;break}let i=n&&this.view.docView.nearestDesc(n);if(i&&i.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let r=this.pendingRecords();r.length&&(this.queue=[]);let n=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&L4(e)&&!this.ignoreSelectionChange(n),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<r.length;u++){let h=this.registerMutation(r[u],l);h&&(s=s<0?h.from:Math.min(h.from,s),o=o<0?h.to:Math.max(h.to,o),h.typeOver&&(a=!0))}if(qi&&l.length){let u=l.filter(h=>h.nodeName=="BR");if(u.length==2){let[h,f]=u;h.parentNode&&h.parentNode.parentNode==f.parentNode?f.remove():h.remove()}else{let{focusNode:h}=this.currentSelection;for(let f of u){let p=f.parentNode;p&&p.nodeName=="LI"&&(!h||gbe(e,h)!=p)&&f.remove()}}}else if(($r||mn)&&l.some(u=>u.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let u of l)if(u.nodeName=="BR"&&u.parentNode){let h=u.nextSibling;h&&h.nodeType==1&&h.contentEditable=="false"&&u.parentNode.removeChild(u)}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&$0(n)&&(c=LM(e))&&c.eq(Ue.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,bo(e),this.currentSelection.set(n),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),pbe(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||bo(e),this.currentSelection.set(n))}registerMutation(e,r){if(r.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(n==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let h=e.addedNodes[u];r.push(h),h.nodeType==3&&(this.lastChangedTextNode=h)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let i=e.previousSibling,s=e.nextSibling;if(ei&&za<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:h,nextSibling:f}=e.addedNodes[u];(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}let o=i&&i.parentNode==e.target?Jr(i)+1:0,a=n.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?Jr(s):e.target.childNodes.length,c=n.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Y4=new WeakMap,Q4=!1;function pbe(t){if(!Y4.has(t)&&(Y4.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=qi,Q4)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Q4=!0}}function X4(t,e){let r=e.startContainer,n=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return jc(o.node,o.offset,i,s)&&([r,n,i,s]=[i,s,r,n]),{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:s}}function mbe(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return X4(t,i)}let r;function n(i){i.preventDefault(),i.stopImmediatePropagation(),r=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0),r?X4(t,r):null}function gbe(t,e){for(let r=e.parentNode;r&&r!=t.dom;r=r.parentNode){let n=t.docView.nearestDesc(r,!0);if(n&&n.node.isBlock)return r}return null}function ybe(t,e,r){let{node:n,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,r),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],$0(l)||c.push({node:l.focusNode,offset:l.focusOffset})),$r&&t.input.lastKeyCode===8)for(let v=s;v>i;v--){let y=n.childNodes[v-1],b=y.pmViewDesc;if(y.nodeName=="BR"&&!b){s=v;break}if(!b||b.size)break}let h=t.state.doc,f=t.someProp("domParser")||Ba.fromSchema(t.state.schema),p=h.resolve(o),m=null,g=f.parse(n,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:s,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:vbe,context:p});if(c&&c[0].pos!=null){let v=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=v),m={anchor:v+o,head:y+o}}return{doc:g,sel:m,from:o,to:a}}function vbe(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(mn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}else if(t.parentNode.lastChild==t||mn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const bbe=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function xbe(t,e,r,n,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let C=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,E=LM(t,C);if(E&&!t.state.selection.eq(E)){if($r&&fo&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",T=>T(t,Pl(13,"Enter"))))return;let N=t.state.tr.setSelection(E);C=="pointer"?N.setMeta("pointer",!0):C=="key"&&N.scrollIntoView(),s&&N.setMeta("composition",s),t.dispatch(N)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(r);e=o.before(a+1),r=t.state.doc.resolve(r).after(a+1);let l=t.state.selection,c=ybe(t,e,r),u=t.state.doc,h=u.slice(c.from,c.to),f,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,p="end"):(f=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let m=_be(h.content,c.doc.content,c.from,f,p);if(m&&t.input.domChangeCount++,(zd&&t.input.lastIOSEnter>Date.now()-225||fo)&&i.some(C=>C.nodeType==1&&!bbe.test(C.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",C=>C(t,Pl(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(n&&l instanceof De&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))m={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let C=J4(t,t.state.doc,c.sel);if(C&&!C.eq(t.state.selection)){let E=t.state.tr.setSelection(C);s&&E.setMeta("composition",s),t.dispatch(E)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof De&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),ei&&za<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>c.from&&c.doc.textBetween(m.start-c.from-1,m.start-c.from+1)==" "&&(m.start--,m.endA--,m.endB--);let g=c.doc.resolveNoCache(m.start-c.from),v=c.doc.resolveNoCache(m.endB-c.from),y=u.resolve(m.start),b=g.sameParent(v)&&g.parent.inlineContent&&y.end()>=m.endA;if((zd&&t.input.lastIOSEnter>Date.now()-225&&(!b||i.some(C=>C.nodeName=="DIV"||C.nodeName=="P"))||!b&&g.pos<c.doc.content.size&&(!g.sameParent(v)||!g.parent.inlineContent)&&g.pos<v.pos&&!/\S/.test(c.doc.textBetween(g.pos,v.pos,"","")))&&t.someProp("handleKeyDown",C=>C(t,Pl(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&Sbe(u,m.start,m.endA,g,v)&&t.someProp("handleKeyDown",C=>C(t,Pl(8,"Backspace")))){fo&&$r&&t.domObserver.suppressSelectionUpdates();return}$r&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),fo&&!b&&g.start()!=v.start()&&v.parentOffset==0&&g.depth==v.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==m.endA&&(m.endB-=2,v=c.doc.resolveNoCache(m.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(C){return C(t,Pl(13,"Enter"))})},20));let w=m.start,x=m.endA,S=C=>{let E=C||t.state.tr.replace(w,x,c.doc.slice(m.start-c.from,m.endB-c.from));if(c.sel){let N=J4(t,E.doc,c.sel);N&&!($r&&t.composing&&N.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(N.head==w||N.head==E.mapping.map(x)-1)||ei&&N.empty&&N.head==w)&&E.setSelection(N)}return s&&E.setMeta("composition",s),E.scrollIntoView()},_;if(b)if(g.pos==v.pos){ei&&za<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>bo(t),20));let C=S(t.state.tr.delete(w,x)),E=u.resolve(m.start).marksAcross(u.resolve(m.endA));E&&C.ensureMarks(E),t.dispatch(C)}else if(m.endA==m.endB&&(_=wbe(g.parent.content.cut(g.parentOffset,v.parentOffset),y.parent.content.cut(y.parentOffset,m.endA-y.start())))){let C=S(t.state.tr);_.type=="add"?C.addMark(w,x,_.mark):C.removeMark(w,x,_.mark),t.dispatch(C)}else if(g.parent.child(g.index()).isText&&g.index()==v.index()-(v.textOffset?0:1)){let C=g.parent.textBetween(g.parentOffset,v.parentOffset),E=()=>S(t.state.tr.insertText(C,w,x));t.someProp("handleTextInput",N=>N(t,w,x,C,E))||t.dispatch(E())}else t.dispatch(S());else t.dispatch(S())}function J4(t,e,r){return Math.max(r.anchor,r.head)>e.content.size?null:BM(t,e.resolve(r.anchor),e.resolve(r.head))}function wbe(t,e){let r=t.firstChild.marks,n=e.firstChild.marks,i=r,s=n,o,a,l;for(let u=0;u<n.length;u++)i=n[u].removeFromSet(i);for(let u=0;u<r.length;u++)s=r[u].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(J.from(c).eq(t))return{mark:a,type:o}}function Sbe(t,e,r,n,i){if(r-e<=i.pos-n.pos||z1(n,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!n.parent.isTextblock){let a=s.nodeAfter;return a!=null&&r==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(z1(s,!0,!0));return!o.parent.isTextblock||o.pos>r||z1(o,!0,!1)<r?!1:n.parent.content.cut(n.parentOffset).eq(o.parent.content)}function z1(t,e,r){let n=t.depth,i=e?t.end():t.pos;for(;n>0&&(e||t.indexAfter(n)==t.node(n).childCount);)n--,i++,e=!1;if(r){let s=t.node(n).maybeChild(t.indexAfter(n));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function _be(t,e,r,n,i){let s=t.findDiffStart(e,r);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,r+t.size,r+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.size<e.size){let l=n<=s&&n>=o?s-n:0;s-=l,s&&s<e.size&&Z4(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,s&&s<t.size&&Z4(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function Z4(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),r=t.charCodeAt(1);return e>=56320&&e<=57343&&r>=55296&&r<=56319}class Wne{constructor(e,r){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new L0e,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=r,this.state=r.state,this.directPlugins=r.plugins||[],this.directPlugins.forEach(iq),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=rq(this),tq(this),this.nodeViews=nq(this),this.docView=M4(this.state.doc,eq(this),B1(this),this.dom,this),this.domObserver=new fbe(this,(n,i,s,o)=>xbe(this,n,i,s,o)),this.domObserver.start(),B0e(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let r in e)this._props[r]=e[r];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&NI(this);let r=this._props;this._props=e,e.plugins&&(e.plugins.forEach(iq),this.directPlugins=e.plugins),this.updateStateInner(e.state,r)}setProps(e){let r={};for(let n in this._props)r[n]=this._props[n];r.state=this.state;for(let n in e)r[n]=e[n];this.update(r)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,r){var n;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(qne(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=r.plugins;if(a||this._props.plugins!=r.plugins||this._props.nodeViews!=r.nodeViews){let p=nq(this);Cbe(p,this.nodeViews)&&(this.nodeViews=p,s=!0)}(a||r.handleDOMEvents!=this._props.handleDOMEvents)&&NI(this),this.editable=rq(this),tq(this);let l=B1(this),c=eq(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",h=s||!this.docView.matchesNode(e.doc,c,l);(h||!e.selection.eq(i.selection))&&(o=!0);let f=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&t0e(this);if(o){this.domObserver.stop();let p=h&&(ei||$r)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&Ebe(i.selection,e.selection);if(h){let m=$r?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=tbe(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=M4(e.doc,c,l,this.dom,this)),m&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&C0e(this))?bo(this,p):(kne(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((n=this.dragging)===null||n===void 0)&&n.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():f&&r0e(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",r=>r(this)))if(this.state.selection instanceof je){let r=this.docView.domAfterPos(this.state.selection.from);r.nodeType==1&&T4(this,r.getBoundingClientRect(),e)}else T4(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let r=0;r<this.directPlugins.length;r++){let n=this.directPlugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let r=0;r<this.state.plugins.length;r++){let n=this.state.plugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let r=0;r<this.pluginViews.length;r++){let n=this.pluginViews[r];n.update&&n.update(this,e)}}updateDraggedNode(e,r){let n=e.node,i=-1;if(this.state.doc.nodeAt(n.from)==n.node)i=n.from;else{let s=n.from+(this.state.doc.content.size-r.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==n.node&&(i=s)}this.dragging=new Bne(e.slice,e.move,i<0?void 0:je.create(this.state.doc,i))}someProp(e,r){let n=this._props&&this._props[e],i;if(n!=null&&(i=r?r(n):n))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=r?r(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=r?r(a):a))return i}}hasFocus(){if(ei){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&n0e(this.dom),bo(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let r=this.dom.parentNode;r;r=r.parentNode)if(r.nodeType==9||r.nodeType==11&&r.host)return r.getSelection||(Object.getPrototypeOf(r).getSelection=()=>r.ownerDocument.getSelection()),this._root=r}return e||document}updateRoot(){this._root=null}posAtCoords(e){return l0e(this,e)}coordsAtPos(e,r=1){return bne(this,e,r)}domAtPos(e,r=0){return this.docView.domFromPos(e,r)}nodeDOM(e){let r=this.docView.descAt(e);return r?r.nodeDOM:null}posAtDOM(e,r,n=-1){let i=this.docView.posFromDOM(e,r,n);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,r){return f0e(this,r||this.state,e)}pasteHTML(e,r){return vp(this,"",e,!1,r||new ClipboardEvent("paste"))}pasteText(e,r){return vp(this,e,null,!0,r||new ClipboardEvent("paste"))}serializeForClipboard(e){return zM(this,e)}destroy(){this.docView&&(z0e(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],B1(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Hve())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return U0e(this,e)}domSelectionRange(){let e=this.domSelection();return e?mn&&this.root.nodeType===11&&Qve(this.dom.ownerDocument)==this.dom&&mbe(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}Wne.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function eq(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",r=>{if(typeof r=="function"&&(r=r(t.state)),r)for(let n in r)n=="class"?e.class+=" "+r[n]:n=="style"?e.style=(e.style?e.style+";":"")+r[n]:!e[n]&&n!="contenteditable"&&n!="nodeName"&&(e[n]=String(r[n]))}),e.translate||(e.translate="no"),[Tn.node(0,t.state.doc.content.size,e)]}function tq(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Tn.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function rq(t){return!t.someProp("editable",e=>e(t.state)===!1)}function Ebe(t,e){let r=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(r)!=e.$anchor.start(r)}function nq(t){let e=Object.create(null);function r(n){for(let i in n)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=n[i])}return t.someProp("nodeViews",r),t.someProp("markViews",r),e}function Cbe(t,e){let r=0,n=0;for(let i in t){if(t[i]!=e[i])return!0;r++}for(let i in e)n++;return r!=n}function iq(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var el={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},av={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Nbe=typeof navigator<"u"&&/Mac/.test(navigator.platform),kbe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Zr=0;Zr<10;Zr++)el[48+Zr]=el[96+Zr]=String(Zr);for(var Zr=1;Zr<=24;Zr++)el[Zr+111]="F"+Zr;for(var Zr=65;Zr<=90;Zr++)el[Zr]=String.fromCharCode(Zr+32),av[Zr]=String.fromCharCode(Zr);for(var V1 in el)av.hasOwnProperty(V1)||(av[V1]=el[V1]);function Tbe(t){var e=Nbe&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||kbe&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",r=!e&&t.key||(t.shiftKey?av:el)[t.keyCode]||t.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}const Obe=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),jbe=typeof navigator<"u"&&/Win/.test(navigator.platform);function Pbe(t){let e=t.split(/-(?!$)/),r=e[e.length-1];r=="Space"&&(r=" ");let n,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))Obe?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return n&&(r="Alt-"+r),i&&(r="Ctrl-"+r),o&&(r="Meta-"+r),s&&(r="Shift-"+r),r}function Ibe(t){let e=Object.create(null);for(let r in t)e[Pbe(r)]=t[r];return e}function U1(t,e,r=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),r&&e.shiftKey&&(t="Shift-"+t),t}function Rbe(t){return new Vt({props:{handleKeyDown:Kne(t)}})}function Kne(t){let e=Ibe(t);return function(r,n){let i=Tbe(n),s,o=e[U1(i,n)];if(o&&o(r.state,r.dispatch,r))return!0;if(i.length==1&&i!=" "){if(n.shiftKey){let a=e[U1(i,n,!1)];if(a&&a(r.state,r.dispatch,r))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(jbe&&n.ctrlKey&&n.altKey)&&(s=el[n.keyCode])&&s!=i){let a=e[U1(s,n)];if(a&&a(r.state,r.dispatch,r))return!0}}return!1}}var Mbe=Object.defineProperty,GM=(t,e)=>{for(var r in e)Mbe(t,r,{get:e[r],enumerable:!0})};function L0(t){const{state:e,transaction:r}=t;let{selection:n}=r,{doc:i}=r,{storedMarks:s}=r;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return n},get doc(){return i},get tr(){return n=r.selection,i=r.doc,s=r.storedMarks,r}}}var B0=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:r}=this,{view:n}=e,{tr:i}=r,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([o,a])=>[o,(...c)=>{const u=a(...c)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&n.dispatch(i),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:r,editor:n,state:i}=this,{view:s}=n,o=[],a=!!t,l=t||i.tr,c=()=>(!a&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(l),o.every(h=>h===!0)),u={...Object.fromEntries(Object.entries(r).map(([h,f])=>[h,(...m)=>{const g=this.buildProps(l,e),v=f(...m)(g);return o.push(v),u}])),run:c};return u}createCan(t){const{rawCommands:e,state:r}=this,n=!1,i=t||r.tr,s=this.buildProps(i,n);return{...Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...c)=>l(...c)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,n)}}buildProps(t,e=!0){const{rawCommands:r,editor:n,state:i}=this,{view:s}=n,o={tr:t,editor:n,view:s,state:L0({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(r).map(([a,l])=>[a,(...c)=>l(...c)(o)]))}};return o}},Gne={};GM(Gne,{blur:()=>Abe,clearContent:()=>Dbe,clearNodes:()=>$be,command:()=>Fbe,createParagraphNear:()=>qbe,cut:()=>Lbe,deleteCurrentNode:()=>Bbe,deleteNode:()=>zbe,deleteRange:()=>Vbe,deleteSelection:()=>Ube,enter:()=>Hbe,exitCode:()=>Wbe,extendMarkRange:()=>Kbe,first:()=>Gbe,focus:()=>Qbe,forEach:()=>Xbe,insertContent:()=>Jbe,insertContentAt:()=>t1e,joinBackward:()=>i1e,joinDown:()=>n1e,joinForward:()=>s1e,joinItemBackward:()=>o1e,joinItemForward:()=>a1e,joinTextblockBackward:()=>l1e,joinTextblockForward:()=>c1e,joinUp:()=>r1e,keyboardShortcut:()=>d1e,lift:()=>h1e,liftEmptyBlock:()=>f1e,liftListItem:()=>p1e,newlineInCode:()=>m1e,resetAttributes:()=>g1e,scrollIntoView:()=>y1e,selectAll:()=>v1e,selectNodeBackward:()=>b1e,selectNodeForward:()=>x1e,selectParentNode:()=>w1e,selectTextblockEnd:()=>S1e,selectTextblockStart:()=>_1e,setContent:()=>E1e,setMark:()=>U1e,setMeta:()=>H1e,setNode:()=>W1e,setNodeSelection:()=>K1e,setTextDirection:()=>G1e,setTextSelection:()=>Y1e,sinkListItem:()=>Q1e,splitBlock:()=>X1e,splitListItem:()=>J1e,toggleList:()=>Z1e,toggleMark:()=>exe,toggleNode:()=>txe,toggleWrap:()=>rxe,undoInputRule:()=>nxe,unsetAllMarks:()=>ixe,unsetMark:()=>sxe,unsetTextDirection:()=>oxe,updateAttributes:()=>axe,wrapIn:()=>lxe,wrapInList:()=>cxe});var Abe=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var r;t.isDestroyed||(e.dom.blur(),(r=window==null?void 0:window.getSelection())==null||r.removeAllRanges())}),!0),Dbe=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),$be=()=>({state:t,tr:e,dispatch:r})=>{const{selection:n}=e,{ranges:i}=n;return r&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,h=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),p=h.blockRange(f);if(!p)return;const m=ch(p);if(a.type.isTextblock){const{defaultType:g}=h.parent.contentMatchAt(h.index());e.setNodeMarkup(p.start,g)}(m||m===0)&&e.lift(p,m)})}),!0},Fbe=t=>e=>t(e),qbe=()=>({state:t,dispatch:e})=>lne(t,e),Lbe=(t,e)=>({editor:r,tr:n})=>{const{state:i}=r,s=i.doc.slice(t.from,t.to);n.deleteRange(t.from,t.to);const o=n.mapping.map(e);return n.insert(o,s.content),n.setSelection(new De(n.doc.resolve(Math.max(o-1,0)))),!0},Bbe=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,n=r.$anchor.node();if(n.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===n.type){if(e){const a=i.before(s),l=i.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1};function gr(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var zbe=t=>({tr:e,state:r,dispatch:n})=>{const i=gr(t,r.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(n){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},Vbe=t=>({tr:e,dispatch:r})=>{const{from:n,to:i}=t;return r&&e.delete(n,i),!0},Ube=()=>({state:t,dispatch:e})=>MM(t,e),Hbe=()=>({commands:t})=>t.keyboardShortcut("Enter"),Wbe=()=>({state:t,dispatch:e})=>jve(t,e);function YM(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function lv(t,e,r={strict:!0}){const n=Object.keys(e);return n.length?n.every(i=>r.strict?e[i]===t[i]:YM(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function Yne(t,e,r={}){return t.find(n=>n.type===e&&lv(Object.fromEntries(Object.keys(r).map(i=>[i,n.attrs[i]])),r))}function sq(t,e,r={}){return!!Yne(t,e,r)}function QM(t,e,r){var n;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(u=>u.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(u=>u.type===e)||(r=r||((n=i.node.marks[0])==null?void 0:n.attrs),!Yne([...i.node.marks],e,r)))return;let o=i.index,a=t.start()+i.offset,l=o+1,c=a+i.node.nodeSize;for(;o>0&&sq([...t.parent.child(o-1).marks],e,r);)o-=1,a-=t.parent.child(o).nodeSize;for(;l<t.parent.childCount&&sq([...t.parent.child(l).marks],e,r);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function qo(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var Kbe=(t,e={})=>({tr:r,state:n,dispatch:i})=>{const s=qo(t,n.schema),{doc:o,selection:a}=r,{$from:l,from:c,to:u}=a;if(i){const h=QM(l,s,e);if(h&&h.from<=c&&h.to>=u){const f=De.create(o,h.from,h.to);r.setSelection(f)}}return!0},Gbe=t=>e=>{const r=typeof t=="function"?t(e):t;for(let n=0;n<r.length;n+=1)if(r[n](e))return!0;return!1};function Qne(t){return t instanceof De}function Ll(t=0,e=0,r=0){return Math.min(Math.max(t,e),r)}function Xne(t,e=null){if(!e)return null;const r=Ue.atStart(t),n=Ue.atEnd(t);if(e==="start"||e===!0)return r;if(e==="end")return n;const i=r.from,s=n.to;return e==="all"?De.create(t,Ll(0,i,s),Ll(t.content.size,i,s)):De.create(t,Ll(e,i,s),Ll(e,i,s))}function oq(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function cv(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Ybe(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var Qbe=(t=null,e={})=>({editor:r,view:n,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(cv()||oq())&&n.dom.focus(),Ybe()&&!cv()&&!oq()&&n.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{r.isDestroyed||(n.focus(),e!=null&&e.scrollIntoView&&r.commands.scrollIntoView())})};if(n.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!Qne(r.state.selection))return o(),!0;const a=Xne(i.doc,t)||r.state.selection,l=r.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},Xbe=(t,e)=>r=>t.every((n,i)=>e(n,{...r,index:i})),Jbe=(t,e)=>({tr:r,commands:n})=>n.insertContentAt({from:r.selection.from,to:r.selection.to},t,e),Jne=t=>{const e=t.childNodes;for(let r=e.length-1;r>=0;r-=1){const n=e[r];n.nodeType===3&&n.nodeValue&&/^(\n\s\s|\n)$/.test(n.nodeValue)?t.removeChild(n):n.nodeType===1&&Jne(n)}return t};function Sg(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,r=new window.DOMParser().parseFromString(e,"text/html").body;return Jne(r)}function xp(t,e,r){if(t instanceof La||t instanceof J)return t;r={slice:!0,parseOptions:{},...r};const n=typeof t=="object"&&t!==null,i=typeof t=="string";if(n)try{if(Array.isArray(t)&&t.length>0)return J.fromArray(t.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(t);return r.errorOnInvalidContent&&o.check(),o}catch(s){if(r.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),xp("",e,r)}if(i){if(r.errorOnInvalidContent){let o=!1,a="";const l=new Are({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(r.slice?Ba.fromSchema(l).parseSlice(Sg(t),r.parseOptions):Ba.fromSchema(l).parse(Sg(t),r.parseOptions),r.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=Ba.fromSchema(e);return r.slice?s.parseSlice(Sg(t),r.parseOptions).content:s.parse(Sg(t),r.parseOptions)}return xp("",e,r)}function Zbe(t,e,r){const n=t.steps.length-1;if(n<e)return;const i=t.steps[n];if(!(i instanceof Dr||i instanceof qr))return;const s=t.mapping.maps[n];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),t.setSelection(Ue.near(t.doc.resolve(o),r))}var e1e=t=>!("type"in t),t1e=(t,e,r)=>({tr:n,dispatch:i,editor:s})=>{var o;if(i){r={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...r};let a;const l=v=>{s.emit("contentError",{editor:s,error:v,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...r.parseOptions};if(!r.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{xp(e,s.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(v){l(v)}try{a=xp(e,s.schema,{parseOptions:c,errorOnInvalidContent:(o=r.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(v){return l(v),!1}let{from:u,to:h}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},f=!0,p=!0;if((e1e(a)?a:[a]).forEach(v=>{v.check(),f=f?v.isText&&v.marks.length===0:!1,p=p?v.isBlock:!1}),u===h&&p){const{parent:v}=n.doc.resolve(u);v.isTextblock&&!v.type.spec.code&&!v.childCount&&(u-=1,h+=1)}let g;if(f){if(Array.isArray(e))g=e.map(v=>v.text||"").join("");else if(e instanceof J){let v="";e.forEach(y=>{y.text&&(v+=y.text)}),g=v}else typeof e=="object"&&e&&e.text?g=e.text:g=e;n.insertText(g,u,h)}else{g=a;const v=n.doc.resolve(u),y=v.node(),b=v.parentOffset===0,w=y.isText||y.isTextblock,x=y.content.size>0;b&&w&&x&&(u=Math.max(0,u-1)),n.replaceWith(u,h,g)}r.updateSelection&&Zbe(n,n.steps.length-1,-1),r.applyInputRules&&n.setMeta("applyInputRules",{from:u,text:g}),r.applyPasteRules&&n.setMeta("applyPasteRules",{from:u,text:g})}return!0},r1e=()=>({state:t,dispatch:e})=>kve(t,e),n1e=()=>({state:t,dispatch:e})=>Tve(t,e),i1e=()=>({state:t,dispatch:e})=>tne(t,e),s1e=()=>({state:t,dispatch:e})=>sne(t,e),o1e=()=>({state:t,dispatch:e,tr:r})=>{try{const n=M0(t.doc,t.selection.$from.pos,-1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},a1e=()=>({state:t,dispatch:e,tr:r})=>{try{const n=M0(t.doc,t.selection.$from.pos,1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},l1e=()=>({state:t,dispatch:e})=>Cve(t,e),c1e=()=>({state:t,dispatch:e})=>Nve(t,e);function Zne(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function u1e(t){const e=t.split(/-(?!$)/);let r=e[e.length-1];r==="Space"&&(r=" ");let n,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))cv()||Zne()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return n&&(r=`Alt-${r}`),i&&(r=`Ctrl-${r}`),o&&(r=`Meta-${r}`),s&&(r=`Shift-${r}`),r}var d1e=t=>({editor:e,view:r,tr:n,dispatch:i})=>{const s=u1e(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{r.someProp("handleKeyDown",c=>c(r,a))});return l==null||l.steps.forEach(c=>{const u=c.map(n.mapping);u&&i&&n.maybeStep(u)}),!0};function tl(t,e,r={}){const{from:n,to:i,empty:s}=t.selection,o=e?gr(e,t.schema):null,a=[];t.doc.nodesBetween(n,i,(h,f)=>{if(h.isText)return;const p=Math.max(n,f),m=Math.min(i,f+h.nodeSize);a.push({node:h,from:p,to:m})});const l=i-n,c=a.filter(h=>o?o.name===h.node.type.name:!0).filter(h=>lv(h.node.attrs,r,{strict:!1}));return s?!!c.length:c.reduce((h,f)=>h+f.to-f.from,0)>=l}var h1e=(t,e={})=>({state:r,dispatch:n})=>{const i=gr(t,r.schema);return tl(r,i,e)?Ove(r,n):!1},f1e=()=>({state:t,dispatch:e})=>cne(t,e),p1e=t=>({state:e,dispatch:r})=>{const n=gr(t,e.schema);return Bve(n)(e,r)},m1e=()=>({state:t,dispatch:e})=>ane(t,e);function z0(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function aq(t,e){const r=typeof e=="string"?[e]:e;return Object.keys(t).reduce((n,i)=>(r.includes(i)||(n[i]=t[i]),n),{})}var g1e=(t,e)=>({tr:r,state:n,dispatch:i})=>{let s=null,o=null;const a=z0(typeof t=="string"?t:t.name,n.schema);if(!a)return!1;a==="node"&&(s=gr(t,n.schema)),a==="mark"&&(o=qo(t,n.schema));let l=!1;return r.selection.ranges.forEach(c=>{n.doc.nodesBetween(c.$from.pos,c.$to.pos,(u,h)=>{s&&s===u.type&&(l=!0,i&&r.setNodeMarkup(h,void 0,aq(u.attrs,e))),o&&u.marks.length&&u.marks.forEach(f=>{o===f.type&&(l=!0,i&&r.addMark(h,h+u.nodeSize,o.create(aq(f.attrs,e))))})})}),l},y1e=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),v1e=()=>({tr:t,dispatch:e})=>{if(e){const r=new mi(t.doc);t.setSelection(r)}return!0},b1e=()=>({state:t,dispatch:e})=>nne(t,e),x1e=()=>({state:t,dispatch:e})=>one(t,e),w1e=()=>({state:t,dispatch:e})=>Rve(t,e),S1e=()=>({state:t,dispatch:e})=>Dve(t,e),_1e=()=>({state:t,dispatch:e})=>Ave(t,e);function kI(t,e,r={},n={}){return xp(t,e,{slice:!1,parseOptions:r,errorOnInvalidContent:n.errorOnInvalidContent})}var E1e=(t,{errorOnInvalidContent:e,emitUpdate:r=!0,parseOptions:n={}}={})=>({editor:i,tr:s,dispatch:o,commands:a})=>{const{doc:l}=s;if(n.preserveWhitespace!=="full"){const c=kI(t,i.schema,n,{errorOnInvalidContent:e??i.options.enableContentCheck});return o&&s.replaceWith(0,l.content.size,c).setMeta("preventUpdate",!r),!0}return o&&s.setMeta("preventUpdate",!r),a.insertContentAt({from:0,to:l.content.size},t,{parseOptions:n,errorOnInvalidContent:e??i.options.enableContentCheck})};function eie(t,e){const r=qo(e,t.schema),{from:n,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(n,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===r.name);return a?{...a.attrs}:{}}function tie(t,e){const r=new Xre(t);return e.forEach(n=>{n.steps.forEach(i=>{r.step(i)})}),r}function C1e(t){for(let e=0;e<t.edgeCount;e+=1){const{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function N1e(t,e,r){const n=[];return t.nodesBetween(e.from,e.to,(i,s)=>{r(i)&&n.push({node:i,pos:s})}),n}function k1e(t,e){for(let r=t.depth;r>0;r-=1){const n=t.node(r);if(e(n))return{pos:r>0?t.before(r):0,start:t.start(r),depth:r,node:n}}}function V0(t){return e=>k1e(e.$from,t)}function Te(t,e,r){return t.config[e]===void 0&&t.parent?Te(t.parent,e,r):typeof t.config[e]=="function"?t.config[e].bind({...r,parent:t.parent?Te(t.parent,e,r):null}):t.config[e]}function XM(t){return t.map(e=>{const r={name:e.name,options:e.options,storage:e.storage},n=Te(e,"addExtensions",r);return n?[e,...XM(n())]:e}).flat(10)}function JM(t,e){const r=Wc.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(r),i.innerHTML}function rie(t){return typeof t=="function"}function ut(t,e=void 0,...r){return rie(t)?e?t.bind(e)(...r):t(...r):t}function T1e(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Vd(t){const e=t.filter(i=>i.type==="extension"),r=t.filter(i=>i.type==="node"),n=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:r,markExtensions:n}}function nie(t){const e=[],{nodeExtensions:r,markExtensions:n}=Vd(t),i=[...r,...n],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:i},l=Te(o,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(h=>{Object.entries(u.attributes).forEach(([f,p])=>{e.push({type:h,name:f,attribute:{...s,...p}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=Te(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,h])=>{const f={...s,...h};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:o.name,name:u,attribute:f})})}),e}function yr(...t){return t.filter(e=>!!e).reduce((e,r)=>{const n={...e};return Object.entries(r).forEach(([i,s])=>{if(!n[i]){n[i]=s;return}if(i==="class"){const a=s?String(s).split(" "):[],l=n[i]?n[i].split(" "):[],c=a.filter(u=>!l.includes(u));n[i]=[...l,...c].join(" ")}else if(i==="style"){const a=s?s.split(";").map(u=>u.trim()).filter(Boolean):[],l=n[i]?n[i].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[h,f]=u.split(":").map(p=>p.trim());c.set(h,f)}),a.forEach(u=>{const[h,f]=u.split(":").map(p=>p.trim());c.set(h,f)}),n[i]=Array.from(c.entries()).map(([u,h])=>`${u}: ${h}`).join("; ")}else n[i]=s}),n},{})}function wp(t,e){return e.filter(r=>r.type===t.type.name).filter(r=>r.attribute.rendered).map(r=>r.attribute.renderHTML?r.attribute.renderHTML(t.attrs)||{}:{[r.name]:t.attrs[r.name]}).reduce((r,n)=>yr(r,n),{})}function O1e(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function lq(t,e){return"style"in t?t:{...t,getAttrs:r=>{const n=t.getAttrs?t.getAttrs(r):t.attrs;if(n===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(r):O1e(r.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...n,...i}}}}function cq(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>e==="attrs"&&T1e(r)?!1:r!=null))}function uq(t){var e,r;const n={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&"default"in((t==null?void 0:t.attribute)||{})&&(n.default=t.attribute.default),((r=t==null?void 0:t.attribute)==null?void 0:r.validate)!==void 0&&(n.validate=t.attribute.validate),[t.name,n]}function j1e(t,e){var r;const n=nie(t),{nodeExtensions:i,markExtensions:s}=Vd(t),o=(r=i.find(c=>Te(c,"topNode")))==null?void 0:r.name,a=Object.fromEntries(i.map(c=>{const u=n.filter(y=>y.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((y,b)=>{const w=Te(b,"extendNodeSchema",h);return{...y,...w?w(c):{}}},{}),p=cq({...f,content:ut(Te(c,"content",h)),marks:ut(Te(c,"marks",h)),group:ut(Te(c,"group",h)),inline:ut(Te(c,"inline",h)),atom:ut(Te(c,"atom",h)),selectable:ut(Te(c,"selectable",h)),draggable:ut(Te(c,"draggable",h)),code:ut(Te(c,"code",h)),whitespace:ut(Te(c,"whitespace",h)),linebreakReplacement:ut(Te(c,"linebreakReplacement",h)),defining:ut(Te(c,"defining",h)),isolating:ut(Te(c,"isolating",h)),attrs:Object.fromEntries(u.map(uq))}),m=ut(Te(c,"parseHTML",h));m&&(p.parseDOM=m.map(y=>lq(y,u)));const g=Te(c,"renderHTML",h);g&&(p.toDOM=y=>g({node:y,HTMLAttributes:wp(y,u)}));const v=Te(c,"renderText",h);return v&&(p.toText=v),[c.name,p]})),l=Object.fromEntries(s.map(c=>{const u=n.filter(v=>v.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((v,y)=>{const b=Te(y,"extendMarkSchema",h);return{...v,...b?b(c):{}}},{}),p=cq({...f,inclusive:ut(Te(c,"inclusive",h)),excludes:ut(Te(c,"excludes",h)),group:ut(Te(c,"group",h)),spanning:ut(Te(c,"spanning",h)),code:ut(Te(c,"code",h)),attrs:Object.fromEntries(u.map(uq))}),m=ut(Te(c,"parseHTML",h));m&&(p.parseDOM=m.map(v=>lq(v,u)));const g=Te(c,"renderHTML",h);return g&&(p.toDOM=v=>g({mark:v,HTMLAttributes:wp(v,u)})),[c.name,p]}));return new Are({topNode:o,nodes:a,marks:l})}function P1e(t){const e=t.filter((r,n)=>t.indexOf(r)!==n);return Array.from(new Set(e))}function uv(t){return t.sort((r,n)=>{const i=Te(r,"priority")||100,s=Te(n,"priority")||100;return i>s?-1:i<s?1:0})}function iie(t){const e=uv(XM(t)),r=P1e(e.map(n=>n.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(n=>`'${n}'`).join(", ")}]. This can lead to issues.`),e}function sie(t,e,r){const{from:n,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=r||{};let a="";return t.nodesBetween(n,i,(l,c,u,h)=>{var f;l.isBlock&&c>n&&(a+=s);const p=o==null?void 0:o[l.type.name];if(p)return u&&(a+=p({node:l,pos:c,parent:u,index:h,range:e})),!1;l.isText&&(a+=(f=l==null?void 0:l.text)==null?void 0:f.slice(Math.max(n,c)-c,i-c))}),a}function I1e(t,e){const r={from:0,to:t.content.size};return sie(t,r,e)}function oie(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,r])=>[e,r.spec.toText]))}function R1e(t,e){const r=gr(e,t.schema),{from:n,to:i}=t.selection,s=[];t.doc.nodesBetween(n,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===r.name);return o?{...o.attrs}:{}}function aie(t,e){const r=z0(typeof e=="string"?e:e.name,t.schema);return r==="node"?R1e(t,e):r==="mark"?eie(t,e):{}}function M1e(t,e=JSON.stringify){const r={};return t.filter(n=>{const i=e(n);return Object.prototype.hasOwnProperty.call(r,i)?!1:r[i]=!0})}function A1e(t){const e=M1e(t);return e.length===1?e:e.filter((r,n)=>!e.filter((s,o)=>o!==n).some(s=>r.oldRange.from>=s.oldRange.from&&r.oldRange.to<=s.oldRange.to&&r.newRange.from>=s.newRange.from&&r.newRange.to<=s.newRange.to))}function lie(t){const{mapping:e,steps:r}=t,n=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=r[s];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const c=e.slice(s).map(a,-1),u=e.slice(s).map(l),h=e.invert().map(c,-1),f=e.invert().map(u);n.push({oldRange:{from:h,to:f},newRange:{from:c,to:u}})})}),A1e(n)}function ZM(t,e,r){const n=[];return t===e?r.resolve(t).marks().forEach(i=>{const s=r.resolve(t),o=QM(s,i.type);o&&n.push({mark:i,...o})}):r.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||n.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),n}var D1e=(t,e,r,n=20)=>{const i=t.doc.resolve(r);let s=n,o=null;for(;s>0&&o===null;){const a=i.node(s);(a==null?void 0:a.type.name)===e?o=a:s-=1}return[o,s]};function _g(t,e){return e.nodes[t]||e.marks[t]||null}function oy(t,e,r){return Object.fromEntries(Object.entries(r).filter(([n])=>{const i=t.find(s=>s.type===e&&s.name===n);return i?i.attribute.keepOnSplit:!1}))}var $1e=(t,e=500)=>{let r="";const n=t.parentOffset;return t.parent.nodesBetween(Math.max(0,n-e),n,(i,s,o,a)=>{var l,c;const u=((c=(l=i.type.spec).toText)==null?void 0:c.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";r+=i.isAtom&&!i.isText?u:u.slice(0,Math.max(0,n-s))}),r};function TI(t,e,r={}){const{empty:n,ranges:i}=t.selection,s=e?qo(e,t.schema):null;if(n)return!!(t.storedMarks||t.selection.$from.marks()).filter(h=>s?s.name===h.type.name:!0).find(h=>lv(h.attrs,r,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:h,$to:f})=>{const p=h.pos,m=f.pos;t.doc.nodesBetween(p,m,(g,v)=>{if(!g.isText&&!g.marks.length)return;const y=Math.max(p,v),b=Math.min(m,v+g.nodeSize),w=b-y;o+=w,a.push(...g.marks.map(x=>({mark:x,from:y,to:b})))})}),o===0)return!1;const l=a.filter(h=>s?s.name===h.mark.type.name:!0).filter(h=>lv(h.mark.attrs,r,{strict:!1})).reduce((h,f)=>h+f.to-f.from,0),c=a.filter(h=>s?h.mark.type!==s&&h.mark.type.excludes(s):!0).reduce((h,f)=>h+f.to-f.from,0);return(l>0?l+c:l)>=o}function F1e(t,e,r={}){if(!e)return tl(t,null,r)||TI(t,null,r);const n=z0(e,t.schema);return n==="node"?tl(t,e,r):n==="mark"?TI(t,e,r):!1}var q1e=(t,e)=>{const{$from:r,$to:n,$anchor:i}=t.selection;if(e){const s=V0(a=>a.type.name===e)(t.selection);if(!s)return!1;const o=t.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(n.parentOffset<n.parent.nodeSize-2||r.pos!==n.pos)},L1e=t=>{const{$from:e,$to:r}=t.selection;return!(e.parentOffset>0||e.pos!==r.pos)};function dq(t,e){return Array.isArray(e)?e.some(r=>(typeof r=="string"?r:r.name)===t.name):e}function hq(t,e){const{nodeExtensions:r}=Vd(e),n=r.find(o=>o.name===t);if(!n)return!1;const i={name:n.name,options:n.options,storage:n.storage},s=ut(Te(n,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function U0(t,{checkChildren:e=!0,ignoreWhitespace:r=!1}={}){var n;if(r){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((n=t.text)!=null?n:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(U0(s,{ignoreWhitespace:r,checkChildren:e})||(i=!1))}),i}return!1}function cie(t){return t instanceof je}var uie=class die{constructor(e){this.position=e}static fromJSON(e){return new die(e.position)}toJSON(){return{position:this.position}}};function B1e(t,e){const r=e.mapping.mapResult(t.position);return{position:new uie(r.pos),mapResult:r}}function z1e(t){return new uie(t)}function V1e(t,e,r){var n;const{selection:i}=e;let s=null;if(Qne(i)&&(s=i.$cursor),s){const a=(n=t.storedMarks)!=null?n:s.marks();return s.parent.type.allowsMarkType(r)&&(!!r.isInSet(a)||!a.some(c=>c.type.excludes(r)))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(r):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,h,f)=>{if(c)return!1;if(u.isInline){const p=!f||f.type.allowsMarkType(r),m=!!r.isInSet(u.marks)||!u.marks.some(g=>g.type.excludes(r));c=p&&m}return!c}),c})}var U1e=(t,e={})=>({tr:r,state:n,dispatch:i})=>{const{selection:s}=r,{empty:o,ranges:a}=s,l=qo(t,n.schema);if(i)if(o){const c=eie(n,l);r.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,h=c.$to.pos;n.doc.nodesBetween(u,h,(f,p)=>{const m=Math.max(p,u),g=Math.min(p+f.nodeSize,h);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&r.addMark(m,g,l.create({...y.attrs,...e}))}):r.addMark(m,g,l.create(e))})});return V1e(n,r,l)},H1e=(t,e)=>({tr:r})=>(r.setMeta(t,e),!0),W1e=(t,e={})=>({state:r,dispatch:n,chain:i})=>{const s=gr(t,r.schema);let o;return r.selection.$anchor.sameParent(r.selection.$head)&&(o=r.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:a})=>C4(s,{...o,...e})(r)?!0:a.clearNodes()).command(({state:a})=>C4(s,{...o,...e})(a,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},K1e=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,i=Ll(t,0,n.content.size),s=je.create(n,i);e.setSelection(s)}return!0},G1e=(t,e)=>({tr:r,state:n,dispatch:i})=>{const{selection:s}=n;let o,a;return typeof e=="number"?(o=e,a=e):e&&"from"in e&&"to"in e?(o=e.from,a=e.to):(o=s.from,a=s.to),i&&r.doc.nodesBetween(o,a,(l,c)=>{l.isText||r.setNodeMarkup(c,void 0,{...l.attrs,dir:t})}),!0},Y1e=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=De.atStart(n).from,a=De.atEnd(n).to,l=Ll(i,o,a),c=Ll(s,o,a),u=De.create(n,l,c);e.setSelection(u)}return!0},Q1e=t=>({state:e,dispatch:r})=>{const n=gr(t,e.schema);return Uve(n)(e,r)};function fq(t,e){const r=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(r){const n=r.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(n)}}var X1e=({keepMarks:t=!0}={})=>({tr:e,state:r,dispatch:n,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=oy(c,a.node().type.name,a.node().attrs);if(s instanceof je&&s.node.isBlock)return!a.parentOffset||!vo(o,a.pos)?!1:(n&&(t&&fq(r,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const h=l.parentOffset===l.parent.content.size,f=a.depth===0?void 0:C1e(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=h&&f?[{type:f,attrs:u}]:void 0,m=vo(e.doc,e.mapping.map(a.pos),1,p);if(!p&&!m&&vo(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(m=!0,p=f?[{type:f,attrs:u}]:void 0),n){if(m&&(s instanceof De&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,p),f&&!h&&!a.parentOffset&&a.parent.type!==f)){const g=e.mapping.map(a.before()),v=e.doc.resolve(g);a.node(-1).canReplaceWith(v.index(),v.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}t&&fq(r,i.extensionManager.splittableMarks),e.scrollIntoView()}return m},J1e=(t,e={})=>({tr:r,state:n,dispatch:i,editor:s})=>{var o;const a=gr(t,n.schema),{$from:l,$to:c}=n.selection,u=n.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const h=l.node(-1);if(h.type!==a)return!1;const f=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let y=J.empty;const b=l.index(-1)?1:l.index(-2)?2:3;for(let E=l.depth-b;E>=l.depth-3;E-=1)y=J.from(l.node(E).copy(y));const w=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,x={...oy(f,l.node().type.name,l.node().attrs),...e},S=((o=a.contentMatch.defaultType)==null?void 0:o.createAndFill(x))||void 0;y=y.append(J.from(a.createAndFill(null,S)||void 0));const _=l.before(l.depth-(b-1));r.replace(_,l.after(-w),new pe(y,4-b,0));let C=-1;r.doc.nodesBetween(_,r.doc.content.size,(E,N)=>{if(C>-1)return!1;E.isTextblock&&E.content.size===0&&(C=N+1)}),C>-1&&r.setSelection(De.near(r.doc.resolve(C))),r.scrollIntoView()}return!0}const p=c.pos===l.end()?h.contentMatchAt(0).defaultType:null,m={...oy(f,h.type.name,h.attrs),...e},g={...oy(f,l.node().type.name,l.node().attrs),...e};r.delete(l.pos,c.pos);const v=p?[{type:a,attrs:m},{type:p,attrs:g}]:[{type:a,attrs:m}];if(!vo(r.doc,l.pos,2))return!1;if(i){const{selection:y,storedMarks:b}=n,{splittableMarks:w}=s.extensionManager,x=b||y.$to.parentOffset&&y.$from.marks();if(r.split(l.pos,2,v).scrollIntoView(),!x||!i)return!0;const S=x.filter(_=>w.includes(_.type.name));r.ensureMarks(S)}return!0},H1=(t,e)=>{const r=V0(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(Math.max(0,r.pos-1)).before(r.depth);if(n===void 0)return!0;const i=t.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&ll(t.doc,r.pos)&&t.join(r.pos),!0},W1=(t,e)=>{const r=V0(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(r.start).after(r.depth);if(n===void 0)return!0;const i=t.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&ll(t.doc,n)&&t.join(n),!0},Z1e=(t,e,r,n={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:h,splittableMarks:f}=i.extensionManager,p=gr(t,o.schema),m=gr(e,o.schema),{selection:g,storedMarks:v}=o,{$from:y,$to:b}=g,w=y.blockRange(b),x=v||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;const S=V0(_=>hq(_.type.name,h))(g);if(w.depth>=1&&S&&w.depth-S.depth<=1){if(S.node.type===p)return c.liftListItem(m);if(hq(S.node.type.name,h)&&p.validContent(S.node.content)&&a)return l().command(()=>(s.setNodeMarkup(S.pos,p),!0)).command(()=>H1(s,p)).command(()=>W1(s,p)).run()}return!r||!x||!a?l().command(()=>u().wrapInList(p,n)?!0:c.clearNodes()).wrapInList(p,n).command(()=>H1(s,p)).command(()=>W1(s,p)).run():l().command(()=>{const _=u().wrapInList(p,n),C=x.filter(E=>f.includes(E.type.name));return s.ensureMarks(C),_?!0:c.clearNodes()}).wrapInList(p,n).command(()=>H1(s,p)).command(()=>W1(s,p)).run()},exe=(t,e={},r={})=>({state:n,commands:i})=>{const{extendEmptyMarkRange:s=!1}=r,o=qo(t,n.schema);return TI(n,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},txe=(t,e,r={})=>({state:n,commands:i})=>{const s=gr(t,n.schema),o=gr(e,n.schema),a=tl(n,s,r);let l;return n.selection.$anchor.sameParent(n.selection.$head)&&(l=n.selection.$anchor.parent.attrs),a?i.setNode(o,l):i.setNode(s,{...l,...r})},rxe=(t,e={})=>({state:r,commands:n})=>{const i=gr(t,r.schema);return tl(r,i,e)?n.lift(i):n.wrapIn(i,e)},nxe=()=>({state:t,dispatch:e})=>{const r=t.plugins;for(let n=0;n<r.length;n+=1){const i=r[n];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},ixe=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,{empty:n,ranges:i}=r;return n||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},sxe=(t,e={})=>({tr:r,state:n,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=r,l=qo(t,n.schema),{$from:c,empty:u,ranges:h}=a;if(!i)return!0;if(u&&o){let{from:f,to:p}=a;const m=(s=c.marks().find(v=>v.type===l))==null?void 0:s.attrs,g=QM(c,l,m);g&&(f=g.from,p=g.to),r.removeMark(f,p,l)}else h.forEach(f=>{r.removeMark(f.$from.pos,f.$to.pos,l)});return r.removeStoredMark(l),!0},oxe=t=>({tr:e,state:r,dispatch:n})=>{const{selection:i}=r;let s,o;return typeof t=="number"?(s=t,o=t):t&&"from"in t&&"to"in t?(s=t.from,o=t.to):(s=i.from,o=i.to),n&&e.doc.nodesBetween(s,o,(a,l)=>{if(a.isText)return;const c={...a.attrs};delete c.dir,e.setNodeMarkup(l,void 0,c)}),!0},axe=(t,e={})=>({tr:r,state:n,dispatch:i})=>{let s=null,o=null;const a=z0(typeof t=="string"?t:t.name,n.schema);if(!a)return!1;a==="node"&&(s=gr(t,n.schema)),a==="mark"&&(o=qo(t,n.schema));let l=!1;return r.selection.ranges.forEach(c=>{const u=c.$from.pos,h=c.$to.pos;let f,p,m,g;r.selection.empty?n.doc.nodesBetween(u,h,(v,y)=>{s&&s===v.type&&(l=!0,m=Math.max(y,u),g=Math.min(y+v.nodeSize,h),f=y,p=v)}):n.doc.nodesBetween(u,h,(v,y)=>{y<u&&s&&s===v.type&&(l=!0,m=Math.max(y,u),g=Math.min(y+v.nodeSize,h),f=y,p=v),y>=u&&y<=h&&(s&&s===v.type&&(l=!0,i&&r.setNodeMarkup(y,void 0,{...v.attrs,...e})),o&&v.marks.length&&v.marks.forEach(b=>{if(o===b.type&&(l=!0,i)){const w=Math.max(y,u),x=Math.min(y+v.nodeSize,h);r.addMark(w,x,o.create({...b.attrs,...e}))}}))}),p&&(f!==void 0&&i&&r.setNodeMarkup(f,void 0,{...p.attrs,...e}),o&&p.marks.length&&p.marks.forEach(v=>{o===v.type&&i&&r.addMark(m,g,o.create({...v.attrs,...e}))}))}),l},lxe=(t,e={})=>({state:r,dispatch:n})=>{const i=gr(t,r.schema);return $ve(i,e)(r,n)},cxe=(t,e={})=>({state:r,dispatch:n})=>{const i=gr(t,r.schema);return Fve(i,e)(r,n)},uxe=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const r=this.callbacks[t];return r&&r.forEach(n=>n.apply(this,e)),this}off(t,e){const r=this.callbacks[t];return r&&(e?this.callbacks[t]=r.filter(n=>n!==e):delete this.callbacks[t]),this}once(t,e){const r=(...n)=>{this.off(t,r),e.apply(this,n)};return this.on(t,r)}removeAllListeners(){this.callbacks={}}},H0=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},dxe=(t,e)=>{if(YM(e))return e.exec(t);const r=e(t);if(!r)return null;const n=[r.text];return n.index=r.index,n.input=t,n.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(r.replaceWith)),n};function Eg(t){var e;const{editor:r,from:n,to:i,text:s,rules:o,plugin:a}=t,{view:l}=r;if(l.composing)return!1;const c=l.state.doc.resolve(n);if(c.parent.type.spec.code||(e=c.nodeBefore||c.nodeAfter)!=null&&e.marks.find(f=>f.type.spec.code))return!1;let u=!1;const h=$1e(c)+s;return o.forEach(f=>{if(u)return;const p=dxe(h,f.find);if(!p)return;const m=l.state.tr,g=L0({state:l.state,transaction:m}),v={from:n-(p[0].length-s.length),to:i},{commands:y,chain:b,can:w}=new B0({editor:r,state:g});f.handler({state:g,range:v,match:p,commands:y,chain:b,can:w})===null||!m.steps.length||(f.undoable&&m.setMeta(a,{transform:m,from:n,to:i,text:s}),l.dispatch(m),u=!0)}),u}function hxe(t){const{editor:e,rules:r}=t,n=new Vt({state:{init(){return null},apply(i,s,o){const a=i.getMeta(n);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=JM(J.from(u),o.schema);const{from:h}=l,f=h+u.length;Eg({editor:e,from:h,to:f,text:u,rules:r,plugin:n})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return Eg({editor:e,from:s,to:o,text:a,rules:r,plugin:n})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Eg({editor:e,from:s.pos,to:s.pos,text:"",rules:r,plugin:n})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?Eg({editor:e,from:o.pos,to:o.pos,text:`
`,rules:r,plugin:n}):!1}},isInputRules:!0});return n}function fxe(t){return Object.prototype.toString.call(t).slice(8,-1)}function Cg(t){return fxe(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function hie(t,e){const r={...t};return Cg(t)&&Cg(e)&&Object.keys(e).forEach(n=>{Cg(e[n])&&Cg(t[n])?r[n]=hie(t[n],e[n]):r[n]=e[n]}),r}var eA=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...ut(Te(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...ut(Te(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>hie(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},Kc=class fie extends eA{constructor(){super(...arguments),this.type="mark"}static create(e={}){const r=typeof e=="function"?e():e;return new fie(r)}static handleExit({editor:e,mark:r}){const{tr:n}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===r.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===r.name);return l&&n.removeStoredMark(l),n.insertText(" ",i.pos),e.view.dispatch(n),!0}return!1}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function pxe(t){return typeof t=="number"}var mxe=class{constructor(t){this.find=t.find,this.handler=t.handler}},gxe=(t,e,r)=>{if(YM(e))return[...t.matchAll(e)];const n=e(t,r);return n?n.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function yxe(t){const{editor:e,state:r,from:n,to:i,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:c,can:u}=new B0({editor:e,state:r}),h=[];return r.doc.nodesBetween(n,i,(p,m)=>{var g,v,y,b,w;if((v=(g=p.type)==null?void 0:g.spec)!=null&&v.code||!(p.isText||p.isTextblock||p.isInline))return;const x=(w=(b=(y=p.content)==null?void 0:y.size)!=null?b:p.nodeSize)!=null?w:0,S=Math.max(n,m),_=Math.min(i,m+x);if(S>=_)return;const C=p.isText?p.text||"":p.textBetween(S-m,_-m,void 0,"");gxe(C,s.find,o).forEach(N=>{if(N.index===void 0)return;const T=S+N.index+1,j=T+N[0].length,P={from:r.tr.mapping.map(T),to:r.tr.mapping.map(j)},O=s.handler({state:r,range:P,match:N,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:a});h.push(O)})}),h.every(p=>p!==null)}var Ng=null,vxe=t=>{var e;const r=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=r.clipboardData)==null||e.setData("text/html",t),r};function bxe(t){const{editor:e,rules:r}=t;let n=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:h,to:f,rule:p,pasteEvt:m})=>{const g=u.tr,v=L0({state:u,transaction:g});if(!(!yxe({editor:e,state:v,from:Math.max(h-1,0),to:f.b-1,rule:p,pasteEvent:m,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return r.map(u=>new Vt({view(h){const f=m=>{var g;n=(g=h.dom.parentElement)!=null&&g.contains(m.target)?h.dom.parentElement:null,n&&(Ng=e)},p=()=>{Ng&&(Ng=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(h,f)=>{if(s=n===h.dom.parentElement,a=f,!s){const p=Ng;p!=null&&p.isEditable&&setTimeout(()=>{const m=p.state.selection;m&&p.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(h,f)=>{var p;const m=(p=f.clipboardData)==null?void 0:p.getData("text/html");return o=f,i=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(h,f,p)=>{const m=h[0],g=m.getMeta("uiEvent")==="paste"&&!i,v=m.getMeta("uiEvent")==="drop"&&!s,y=m.getMeta("applyPasteRules"),b=!!y;if(!g&&!v&&!b)return;if(b){let{text:S}=y;typeof S=="string"?S=S:S=JM(J.from(S),p.schema);const{from:_}=y,C=_+S.length,E=vxe(S);return l({rule:u,state:p,from:_,to:{b:C},pasteEvt:E})}const w=f.doc.content.findDiffStart(p.doc.content),x=f.doc.content.findDiffEnd(p.doc.content);if(!(!pxe(w)||!x||w===x.b))return l({rule:u,state:p,from:w,to:x,pasteEvt:o})}}))}var W0=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=iie(t),this.schema=j1e(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:_g(e.name,this.schema)},n=Te(e,"addCommands",r);return n?{...t,...n()}:t},{})}get plugins(){const{editor:t}=this;return uv([...this.extensions].reverse()).flatMap(n=>{const i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:_g(n.name,this.schema)},s=[],o=Te(n,"addKeyboardShortcuts",i);let a={};if(n.type==="mark"&&Te(n,"exitable",i)&&(a.ArrowRight=()=>Kc.handleExit({editor:t,mark:n})),o){const f=Object.fromEntries(Object.entries(o()).map(([p,m])=>[p,()=>m({editor:t})]));a={...a,...f}}const l=Rbe(a);s.push(l);const c=Te(n,"addInputRules",i);if(dq(n,t.options.enableInputRules)&&c){const f=c();if(f&&f.length){const p=hxe({editor:t,rules:f}),m=Array.isArray(p)?p:[p];s.push(...m)}}const u=Te(n,"addPasteRules",i);if(dq(n,t.options.enablePasteRules)&&u){const f=u();if(f&&f.length){const p=bxe({editor:t,rules:f});s.push(...p)}}const h=Te(n,"addProseMirrorPlugins",i);if(h){const f=h();s.push(...f)}return s})}get attributes(){return nie(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Vd(this.extensions);return Object.fromEntries(e.filter(r=>!!Te(r,"addNodeView")).map(r=>{const n=this.attributes.filter(l=>l.type===r.name),i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:gr(r.name,this.schema)},s=Te(r,"addNodeView",i);if(!s)return[];const o=s();if(!o)return[];const a=(l,c,u,h,f)=>{const p=wp(l,n);return o({node:l,view:c,getPos:u,decorations:h,innerDecorations:f,editor:t,extension:r,HTMLAttributes:p})};return[r.name,a]}))}dispatchTransaction(t){const{editor:e}=this;return uv([...this.extensions].reverse()).reduceRight((n,i)=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:e,type:_g(i.name,this.schema)},o=Te(i,"dispatchTransaction",s);return o?a=>{o.call(s,{transaction:a,next:n})}:n},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=Vd(this.extensions);return Object.fromEntries(e.filter(r=>!!Te(r,"addMarkView")).map(r=>{const n=this.attributes.filter(a=>a.type===r.name),i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:qo(r.name,this.schema)},s=Te(r,"addMarkView",i);if(!s)return[];const o=(a,l,c)=>{const u=wp(a,n);return s()({mark:a,view:l,inline:c,editor:t,extension:r,HTMLAttributes:u,updateAttributes:h=>{Rxe(a,t,h)}})};return[r.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var r;const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:_g(e.name,this.schema)};e.type==="mark"&&((r=ut(Te(e,"keepOnSplit",n)))==null||r)&&this.splittableMarks.push(e.name);const i=Te(e,"onBeforeCreate",n),s=Te(e,"onCreate",n),o=Te(e,"onUpdate",n),a=Te(e,"onSelectionUpdate",n),l=Te(e,"onTransaction",n),c=Te(e,"onFocus",n),u=Te(e,"onBlur",n),h=Te(e,"onDestroy",n);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),h&&this.editor.on("destroy",h)})}};W0.resolve=iie;W0.sort=uv;W0.flatten=XM;var xxe={};GM(xxe,{ClipboardTextSerializer:()=>mie,Commands:()=>gie,Delete:()=>yie,Drop:()=>vie,Editable:()=>bie,FocusEvents:()=>wie,Keymap:()=>Sie,Paste:()=>_ie,Tabindex:()=>Eie,TextDirection:()=>Cie,focusEventsPluginKey:()=>xie});var ar=class pie extends eA{constructor(){super(...arguments),this.type="extension"}static create(e={}){const r=typeof e=="function"?e():e;return new pie(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}},mie=ar.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Vt({key:new Tr("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:r}=t,{doc:n,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=oie(r);return sie(n,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),gie=ar.create({name:"commands",addCommands(){return{...Gne}}}),yie=ar.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var r,n,i;const s=()=>{var o,a,l,c;if((c=(l=(a=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,t))!=null?c:t.getMeta("y-sync$"))return;const u=tie(t.before,[t,...e]);lie(u).forEach(p=>{u.mapping.mapResult(p.oldRange.from).deletedAfter&&u.mapping.mapResult(p.oldRange.to).deletedBefore&&u.before.nodesBetween(p.oldRange.from,p.oldRange.to,(m,g)=>{const v=g+m.nodeSize-2,y=p.oldRange.from<=g&&v<=p.oldRange.to;this.editor.emit("delete",{type:"node",node:m,from:g,to:v,newFrom:u.mapping.map(g),newTo:u.mapping.map(v),deletedRange:p.oldRange,newRange:p.newRange,partial:!y,editor:this.editor,transaction:t,combinedTransform:u})})});const f=u.mapping;u.steps.forEach((p,m)=>{var g,v;if(p instanceof cs){const y=f.slice(m).map(p.from,-1),b=f.slice(m).map(p.to),w=f.invert().map(y,-1),x=f.invert().map(b),S=(g=u.doc.nodeAt(y-1))==null?void 0:g.marks.some(C=>C.eq(p.mark)),_=(v=u.doc.nodeAt(b))==null?void 0:v.marks.some(C=>C.eq(p.mark));this.editor.emit("delete",{type:"mark",mark:p.mark,from:p.from,to:p.to,deletedRange:{from:w,to:x},newRange:{from:y,to:b},partial:!!(_||S),editor:this.editor,transaction:t,combinedTransform:u})}})};(i=(n=(r=this.editor.options.coreExtensionOptions)==null?void 0:r.delete)==null?void 0:n.async)==null||i?setTimeout(s,0):s()}}),vie=ar.create({name:"drop",addProseMirrorPlugins(){return[new Vt({key:new Tr("tiptapDrop"),props:{handleDrop:(t,e,r,n)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:r,moved:n})}}})]}}),bie=ar.create({name:"editable",addProseMirrorPlugins(){return[new Vt({key:new Tr("editable"),props:{editable:()=>this.editor.options.editable}})]}}),xie=new Tr("focusEvents"),wie=ar.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Vt({key:xie,props:{handleDOMEvents:{focus:(e,r)=>{t.isFocused=!0;const n=t.state.tr.setMeta("focus",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1},blur:(e,r)=>{t.isFocused=!1;const n=t.state.tr.setMeta("blur",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1}}}})]}}),Sie=ar.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:h}=l,{pos:f,parent:p}=h,m=h.parent.isTextblock&&f>0?a.doc.resolve(f-1):h,g=m.parent.type.spec.isolating,v=h.pos-h.parentOffset,y=g&&m.parent.childCount===1?v===h.pos:Ue.atStart(c).from===f;return!u||!p.type.isTextblock||p.textContent.length||!y||y&&h.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...n},s={...n,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return cv()||Zne()?s:i},addProseMirrorPlugins(){return[new Vt({key:new Tr("clearDocument"),appendTransaction:(t,e,r)=>{if(t.some(g=>g.getMeta("composition")))return;const n=t.some(g=>g.docChanged)&&!e.doc.eq(r.doc),i=t.some(g=>g.getMeta("preventClearDocument"));if(!n||i)return;const{empty:s,from:o,to:a}=e.selection,l=Ue.atStart(e.doc).from,c=Ue.atEnd(e.doc).to;if(s||!(o===l&&a===c)||!U0(r.doc))return;const f=r.tr,p=L0({state:r,transaction:f}),{commands:m}=new B0({editor:this.editor,state:p});if(m.clearNodes(),!!f.steps.length)return f}})]}}),_ie=ar.create({name:"paste",addProseMirrorPlugins(){return[new Vt({key:new Tr("tiptapPaste"),props:{handlePaste:(t,e,r)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:r})}}})]}}),Eie=ar.create({name:"tabindex",addProseMirrorPlugins(){return[new Vt({key:new Tr("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),Cie=ar.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=Vd(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const r=e.getAttribute("dir");return r&&(r==="ltr"||r==="rtl"||r==="auto")?r:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new Vt({key:new Tr("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),wxe=class Tu{constructor(e,r,n=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=r,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let r=this.from,n=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}r=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:r,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),r=this.resolvedPos.doc.resolve(e);return new Tu(r,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Tu(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Tu(e,this.editor)}get children(){const e=[];return this.node.content.forEach((r,n)=>{const i=r.isBlock&&!r.isTextblock,s=r.isAtom&&!r.isText,o=this.pos+n+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(o);if(!i&&a.depth<=this.depth)return;const l=new Tu(a,this.editor,i,i?r:null);i&&(l.actualDepth=this.depth+1),e.push(new Tu(a,this.editor,i,i?r:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,r={}){let n=null,i=this.parent;for(;i&&!n;){if(i.node.type.name===e)if(Object.keys(r).length>0){const s=i.node.attrs,o=Object.keys(r);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==r[l])break}}else n=i;i=i.parent}return n}querySelector(e,r={}){return this.querySelectorAll(e,r,!0)[0]||null}querySelectorAll(e,r={},n=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(r);return this.children.forEach(o=>{n&&i.length>0||(o.node.type.name===e&&s.every(l=>r[l]===o.node.attrs[l])&&i.push(o),!(n&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,r,n))))}),i}setAttribute(e){const{tr:r}=this.editor.state;r.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(r)}},Sxe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function _xe(t,e,r){const n=document.querySelector("style[data-tiptap-style]");if(n!==null)return n;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var Exe=class extends uxe{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:B1e,createMappablePosition:z1e},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:i,moved:s})=>this.options.onDrop(n,i,s)),this.on("paste",({event:n,slice:i})=>this.options.onPaste(n,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),r=Xne(e,this.options.autofocus);this.editorState=Vu.create({doc:e,schema:this.schema,selection:r||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=_xe(Sxe,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const r=rie(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let r=e;if([].concat(t).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;r=r.filter(o=>!o.key.startsWith(s))}),e.length===r.length)return;const n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}createExtensionManager(){var t,e;const n=[...this.options.enableCoreExtensions?[bie,mie.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),gie,wie,Sie,Eie,vie,_ie,yie,Cie.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new W0(n,this)}createCommandManager(){this.commandManager=new B0({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=kI(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(r=>r.name!=="collaboration"),this.createExtensionManager()}}),t=kI(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:r}=this.options,n=e.dispatchTransaction||this.dispatchTransaction.bind(this),i=r?this.extensionManager.dispatchTransaction(n):n;this.editorView=new Wne(t,{...e,attributes:{role:"textbox",...e==null?void 0:e.attributes},dispatchTransaction:i,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.prependClass(),this.injectCSS();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(c=>{var u;return(u=this.capturedTransaction)==null?void 0:u.step(c)});return}const{state:e,transactions:r}=this.state.applyTransaction(t),n=!this.state.selection.eq(e.selection),i=r.includes(t),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:r.slice(1)}),n&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=r.findLast(c=>c.getMeta("focus")||c.getMeta("blur")),a=o==null?void 0:o.getMeta("focus"),l=o==null?void 0:o.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:o}),l&&this.emit("blur",{editor:this,event:l.event,transaction:o}),!(t.getMeta("preventUpdate")||!r.some(c=>c.docChanged)||s.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:r.slice(1)})}getAttributes(t){return aie(this.state,t)}isActive(t,e){const r=typeof t=="string"?t:null,n=typeof t=="string"?e:t;return F1e(this.state,r,n)}getJSON(){return this.state.doc.toJSON()}getHTML(){return JM(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:r={}}=t||{};return I1e(this.state.doc,{blockSeparator:e,textSerializers:{...oie(this.schema),...r}})}get isEmpty(){return U0(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelector(t,e))||null}$nodes(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new wxe(e,this)}get $doc(){return this.$pos(0)}};function Ud(t){return new H0({find:t.find,handler:({state:e,range:r,match:n})=>{const i=ut(t.getAttributes,void 0,n);if(i===!1||i===null)return null;const{tr:s}=e,o=n[n.length-1],a=n[0];if(o){const l=a.search(/\S/),c=r.from+a.indexOf(o),u=c+o.length;if(ZM(r.from,r.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===t.type&&g!==p.mark.type)).filter(p=>p.to>c).length)return null;u<r.to&&s.delete(u,r.to),c>r.from&&s.delete(r.from+l,c);const f=r.from+l+o.length;s.addMark(r.from+l,f,t.type.create(i||{})),s.removeStoredMark(t.type)}},undoable:t.undoable})}function Cxe(t){return new H0({find:t.find,handler:({state:e,range:r,match:n})=>{const i=ut(t.getAttributes,void 0,n)||{},{tr:s}=e,o=r.from;let a=r.to;const l=t.type.create(i);if(n[1]){const c=n[0].lastIndexOf(n[1]);let u=o+c;u>a?u=a:a=u+n[1].length;const h=n[0][n[0].length-1];s.insertText(h,o+n[0].length-1),s.replaceWith(u,a,l)}else if(n[0]){const c=t.type.isInline?o:o-1;s.insert(c,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()},undoable:t.undoable})}function OI(t){return new H0({find:t.find,handler:({state:e,range:r,match:n})=>{const i=e.doc.resolve(r.from),s=ut(t.getAttributes,void 0,n)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(r.from,r.to).setBlockType(r.from,r.from,t.type,s)},undoable:t.undoable})}function Hd(t){return new H0({find:t.find,handler:({state:e,range:r,match:n,chain:i})=>{const s=ut(t.getAttributes,void 0,n)||{},o=e.tr.delete(r.from,r.to),l=o.doc.resolve(r.from).blockRange(),c=l&&IM(l,t.type,s);if(!c)return null;if(o.wrap(l,c),t.keepMarks&&t.editor){const{selection:h,storedMarks:f}=e,{splittableMarks:p}=t.editor.extensionManager,m=f||h.$to.parentOffset&&h.$from.marks();if(m){const g=m.filter(v=>p.includes(v.type.name));o.ensureMarks(g)}}if(t.keepAttributes){const h=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(h,s).run()}const u=o.doc.resolve(r.from-1).nodeBefore;u&&u.type===t.type&&ll(o.doc,r.from-1)&&(!t.joinPredicate||t.joinPredicate(n,u))&&o.join(r.from-1)},undoable:t.undoable})}function Nxe(t,e){const{selection:r}=t,{$from:n}=r;if(r instanceof je){const s=n.index();return n.parent.canReplaceWith(s,s+1,e)}let i=n.depth;for(;i>=0;){const s=n.index(i);if(n.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}var kxe={};GM(kxe,{createAtomBlockMarkdownSpec:()=>Txe,createBlockMarkdownSpec:()=>Oxe,createInlineMarkdownSpec:()=>Ixe,parseAttributes:()=>tA,parseIndentedBlocks:()=>jI,renderNestedMarkdownContent:()=>nA,serializeAttributes:()=>rA});function tA(t){if(!(t!=null&&t.trim()))return{};const e={},r=[],n=t.replace(/["']([^"']*)["']/g,c=>(r.push(c),`__QUOTED_${r.length-1}__`)),i=n.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const c=i.map(u=>u.trim().slice(1));e.class=c.join(" ")}const s=n.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(e.id=s[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(n.matchAll(o)).forEach(([,c,u])=>{var h;const f=parseInt(((h=u.match(/__QUOTED_(\d+)__/))==null?void 0:h[1])||"0",10),p=r[f];p&&(e[c]=p.slice(1,-1))});const l=n.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(u=>{u.match(/^[a-zA-Z][\w-]*$/)&&(e[u]=!0)}),e}function rA(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(n=>e.push(`.${n}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([r,n])=>{r==="class"||r==="id"||(n===!0?e.push(r):n!==!1&&n!=null&&e.push(`${r}="${String(n)}"`))}),e.join(" ")}function Txe(t){const{nodeName:e,name:r,parseAttributes:n=tA,serializeAttributes:i=rA,defaultAttributes:s={},requiredAttributes:o=[],allowedAttributes:a}=t,l=r||e,c=u=>{if(!a)return u;const h={};return a.forEach(f=>{f in u&&(h[f]=u[f])}),h};return{parseMarkdown:(u,h)=>{const f={...s,...u.attributes};return h.createNode(e,f,[])},markdownTokenizer:{name:e,level:"block",start(u){var h;const f=new RegExp(`^:::${l}(?:\\s|$)`,"m"),p=(h=u.match(f))==null?void 0:h.index;return p!==void 0?p:-1},tokenize(u,h,f){const p=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),m=u.match(p);if(!m)return;const g=m[1]||"",v=n(g);if(!o.find(b=>!(b in v)))return{type:e,raw:m[0],attributes:v}}},renderMarkdown:u=>{const h=c(u.attrs||{}),f=i(h),p=f?` {${f}}`:"";return`:::${l}${p} :::`}}}function Oxe(t){const{nodeName:e,name:r,getContent:n,parseAttributes:i=tA,serializeAttributes:s=rA,defaultAttributes:o={},content:a="block",allowedAttributes:l}=t,c=r||e,u=h=>{if(!l)return h;const f={};return l.forEach(p=>{p in h&&(f[p]=h[p])}),f};return{parseMarkdown:(h,f)=>{let p;if(n){const g=n(h);p=typeof g=="string"?[{type:"text",text:g}]:g}else a==="block"?p=f.parseChildren(h.tokens||[]):p=f.parseInline(h.tokens||[]);const m={...o,...h.attributes};return f.createNode(e,m,p)},markdownTokenizer:{name:e,level:"block",start(h){var f;const p=new RegExp(`^:::${c}`,"m"),m=(f=h.match(p))==null?void 0:f.index;return m!==void 0?m:-1},tokenize(h,f,p){var m;const g=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),v=h.match(g);if(!v)return;const[y,b=""]=v,w=i(b);let x=1;const S=y.length;let _="";const C=/^:::([\w-]*)(\s.*)?/gm,E=h.slice(S);for(C.lastIndex=0;;){const N=C.exec(E);if(N===null)break;const T=N.index,j=N[1];if(!((m=N[2])!=null&&m.endsWith(":::"))){if(j)x+=1;else if(x-=1,x===0){const P=E.slice(0,T);_=P.trim();const O=h.slice(0,S+T+N[0].length);let D=[];if(_)if(a==="block")for(D=p.blockTokens(P),D.forEach(z=>{z.text&&(!z.tokens||z.tokens.length===0)&&(z.tokens=p.inlineTokens(z.text))});D.length>0;){const z=D[D.length-1];if(z.type==="paragraph"&&(!z.text||z.text.trim()===""))D.pop();else break}else D=p.inlineTokens(_);return{type:e,raw:O,attributes:w,content:_,tokens:D}}}}}},renderMarkdown:(h,f)=>{const p=u(h.attrs||{}),m=s(p),g=m?` {${m}}`:"",v=f.renderChildren(h.content||[],`

`);return`:::${c}${g}

${v}

:::`}}}function jxe(t){if(!t.trim())return{};const e={},r=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let n=r.exec(t);for(;n!==null;){const[,i,s,o]=n;e[i]=s||o,n=r.exec(t)}return e}function Pxe(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,r])=>`${e}="${r}"`).join(" ")}function Ixe(t){const{nodeName:e,name:r,getContent:n,parseAttributes:i=jxe,serializeAttributes:s=Pxe,defaultAttributes:o={},selfClosing:a=!1,allowedAttributes:l}=t,c=r||e,u=f=>{if(!l)return f;const p={};return l.forEach(m=>{const g=typeof m=="string"?m:m.name,v=typeof m=="string"?void 0:m.skipIfDefault;if(g in f){const y=f[g];if(v!==void 0&&y===v)return;p[g]=y}}),p},h=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(f,p)=>{const m={...o,...f.attributes};if(a)return p.createNode(e,m);const g=n?n(f):f.content||"";return g?p.createNode(e,m,[p.createTextNode(g)]):p.createNode(e,m,[])},markdownTokenizer:{name:e,level:"inline",start(f){const p=a?new RegExp(`\\[${h}\\s*[^\\]]*\\]`):new RegExp(`\\[${h}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${h}\\]`),m=f.match(p),g=m==null?void 0:m.index;return g!==void 0?g:-1},tokenize(f,p,m){const g=a?new RegExp(`^\\[${h}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${h}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${h}\\]`),v=f.match(g);if(!v)return;let y="",b="";if(a){const[,x]=v;b=x}else{const[,x,S]=v;b=x,y=S||""}const w=i(b.trim());return{type:e,raw:v[0],content:y.trim(),attributes:w}}},renderMarkdown:f=>{let p="";n?p=n(f):f.content&&f.content.length>0&&(p=f.content.filter(y=>y.type==="text").map(y=>y.text).join(""));const m=u(f.attrs||{}),g=s(m),v=g?` ${g}`:"";return a?`[${c}${v}]`:`[${c}${v}]${p}[/${c}]`}}}function jI(t,e,r){var n,i,s,o;const a=t.split(`
`),l=[];let c="",u=0;const h=e.baseIndentSize||2;for(;u<a.length;){const f=a[u],p=f.match(e.itemPattern);if(!p){if(l.length>0)break;if(f.trim()===""){u+=1,c=`${c}${f}
`;continue}else return}const m=e.extractItemData(p),{indentLevel:g,mainContent:v}=m;c=`${c}${f}
`;const y=[v];for(u+=1;u<a.length;){const S=a[u];if(S.trim()===""){const C=a.slice(u+1).findIndex(T=>T.trim()!=="");if(C===-1)break;if((((i=(n=a[u+1+C].match(/^(\s*)/))==null?void 0:n[1])==null?void 0:i.length)||0)>g){y.push(S),c=`${c}${S}
`,u+=1;continue}else break}if((((o=(s=S.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:o.length)||0)>g)y.push(S),c=`${c}${S}
`,u+=1;else break}let b;const w=y.slice(1);if(w.length>0){const S=w.map(_=>_.slice(g+h)).join(`
`);S.trim()&&(e.customNestedParser?b=e.customNestedParser(S):b=r.blockTokens(S))}const x=e.createToken(m,b);l.push(x)}if(l.length!==0)return{items:l,raw:c}}function nA(t,e,r,n){if(!t||!Array.isArray(t.content))return"";const i=typeof r=="function"?r(n):r,[s,...o]=t.content,a=e.renderChildren([s]),l=[`${i}${a}`];return o&&o.length>0&&o.forEach(c=>{const u=e.renderChildren([c]);if(u){const h=u.split(`
`).map(f=>f?e.indent(f):"").join(`
`);l.push(h)}}),l.join(`
`)}function Rxe(t,e,r={}){const{state:n}=e,{doc:i,tr:s}=n,o=t;i.descendants((a,l)=>{const c=s.mapping.map(l),u=s.mapping.map(l)+a.nodeSize;let h=null;if(a.marks.forEach(p=>{if(p!==o)return!1;h=p}),!h)return;let f=!1;if(Object.keys(r).forEach(p=>{r[p]!==h.attrs[p]&&(f=!0)}),f){const p=t.type.create({...t.attrs,...r});s.removeMark(c,u,t.type),s.addMark(c,u,p)}}),s.docChanged&&e.view.dispatch(s)}var bi=class Nie extends eA{constructor(){super(...arguments),this.type="node"}static create(e={}){const r=typeof e=="function"?e():e;return new Nie(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function Ic(t){return new mxe({find:t.find,handler:({state:e,range:r,match:n,pasteEvent:i})=>{const s=ut(t.getAttributes,void 0,n,i);if(s===!1||s===null)return null;const{tr:o}=e,a=n[n.length-1],l=n[0];let c=r.to;if(a){const u=l.search(/\S/),h=r.from+l.indexOf(a),f=h+a.length;if(ZM(r.from,r.to,e.doc).filter(m=>m.mark.type.excluded.find(v=>v===t.type&&v!==m.mark.type)).filter(m=>m.to>h).length)return null;f<r.to&&o.delete(f,r.to),h>r.from&&o.delete(r.from+u,h),c=r.from+u+a.length,o.addMark(r.from+u,c,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:Mxe,getOwnPropertySymbols:Axe}=Object,{hasOwnProperty:Dxe}=Object.prototype;function K1(t,e){return function(n,i,s){return t(n,i,s)&&e(n,i,s)}}function kg(t){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,i);const{cache:s}=i,o=s.get(r),a=s.get(n);if(o&&a)return o===n&&a===r;s.set(r,n),s.set(n,r);const l=t(r,n,i);return s.delete(r),s.delete(n),l}}function $xe(t){return t!=null?t[Symbol.toStringTag]:void 0}function pq(t){return Mxe(t).concat(Axe(t))}const Fxe=Object.hasOwn||((t,e)=>Dxe.call(t,e));function Gc(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const qxe="__v",Lxe="__o",Bxe="_owner",{getOwnPropertyDescriptor:mq,keys:gq}=Object;function zxe(t,e){return t.byteLength===e.byteLength&&dv(new Uint8Array(t),new Uint8Array(e))}function Vxe(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function Uxe(t,e){return t.byteLength===e.byteLength&&dv(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function Hxe(t,e){return Gc(t.getTime(),e.getTime())}function Wxe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function Kxe(t,e){return t===e}function yq(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),s=t.entries();let o,a,l=0;for(;(o=s.next())&&!o.done;){const c=e.entries();let u=!1,h=0;for(;(a=c.next())&&!a.done;){if(i[h]){h++;continue}const f=o.value,p=a.value;if(r.equals(f[0],p[0],l,h,t,e,r)&&r.equals(f[1],p[1],f[0],p[0],t,e,r)){u=i[h]=!0;break}h++}if(!u)return!1;l++}return!0}const Gxe=Gc;function Yxe(t,e,r){const n=gq(t);let i=n.length;if(gq(e).length!==i)return!1;for(;i-- >0;)if(!kie(t,e,r,n[i]))return!1;return!0}function tf(t,e,r){const n=pq(t);let i=n.length;if(pq(e).length!==i)return!1;let s,o,a;for(;i-- >0;)if(s=n[i],!kie(t,e,r,s)||(o=mq(t,s),a=mq(e,s),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function Qxe(t,e){return Gc(t.valueOf(),e.valueOf())}function Xxe(t,e){return t.source===e.source&&t.flags===e.flags}function vq(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),s=t.values();let o,a;for(;(o=s.next())&&!o.done;){const l=e.values();let c=!1,u=0;for(;(a=l.next())&&!a.done;){if(!i[u]&&r.equals(o.value,a.value,o.value,a.value,t,e,r)){c=i[u]=!0;break}u++}if(!c)return!1}return!0}function dv(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function Jxe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function kie(t,e,r,n){return(n===Bxe||n===Lxe||n===qxe)&&(t.$$typeof||e.$$typeof)?!0:Fxe(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const Zxe="[object ArrayBuffer]",ewe="[object Arguments]",twe="[object Boolean]",rwe="[object DataView]",nwe="[object Date]",iwe="[object Error]",swe="[object Map]",owe="[object Number]",awe="[object Object]",lwe="[object RegExp]",cwe="[object Set]",uwe="[object String]",dwe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},hwe="[object URL]",fwe=Object.prototype.toString;function pwe({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:o,areNumbersEqual:a,areObjectsEqual:l,arePrimitiveWrappersEqual:c,areRegExpsEqual:u,areSetsEqual:h,areTypedArraysEqual:f,areUrlsEqual:p,unknownTagComparators:m}){return function(v,y,b){if(v===y)return!0;if(v==null||y==null)return!1;const w=typeof v;if(w!==typeof y)return!1;if(w!=="object")return w==="number"?a(v,y,b):w==="function"?s(v,y,b):!1;const x=v.constructor;if(x!==y.constructor)return!1;if(x===Object)return l(v,y,b);if(Array.isArray(v))return e(v,y,b);if(x===Date)return n(v,y,b);if(x===RegExp)return u(v,y,b);if(x===Map)return o(v,y,b);if(x===Set)return h(v,y,b);const S=fwe.call(v);if(S===nwe)return n(v,y,b);if(S===lwe)return u(v,y,b);if(S===swe)return o(v,y,b);if(S===cwe)return h(v,y,b);if(S===awe)return typeof v.then!="function"&&typeof y.then!="function"&&l(v,y,b);if(S===hwe)return p(v,y,b);if(S===iwe)return i(v,y,b);if(S===ewe)return l(v,y,b);if(dwe[S])return f(v,y,b);if(S===Zxe)return t(v,y,b);if(S===rwe)return r(v,y,b);if(S===twe||S===owe||S===uwe)return c(v,y,b);if(m){let _=m[S];if(!_){const C=$xe(v);C&&(_=m[C])}if(_)return _(v,y,b)}return!1}}function mwe({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:zxe,areArraysEqual:r?tf:Vxe,areDataViewsEqual:Uxe,areDatesEqual:Hxe,areErrorsEqual:Wxe,areFunctionsEqual:Kxe,areMapsEqual:r?K1(yq,tf):yq,areNumbersEqual:Gxe,areObjectsEqual:r?tf:Yxe,arePrimitiveWrappersEqual:Qxe,areRegExpsEqual:Xxe,areSetsEqual:r?K1(vq,tf):vq,areTypedArraysEqual:r?K1(dv,tf):dv,areUrlsEqual:Jxe,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const i=kg(n.areArraysEqual),s=kg(n.areMapsEqual),o=kg(n.areObjectsEqual),a=kg(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:a})}return n}function gwe(t){return function(e,r,n,i,s,o,a){return t(e,r,a)}}function ywe({circular:t,comparator:e,createState:r,equals:n,strict:i}){if(r)return function(a,l){const{cache:c=t?new WeakMap:void 0,meta:u}=r();return e(a,l,{cache:c,equals:n,meta:u,strict:i})};if(t)return function(a,l){return e(a,l,{cache:new WeakMap,equals:n,meta:void 0,strict:i})};const s={cache:void 0,equals:n,meta:void 0,strict:i};return function(a,l){return e(a,l,s)}}const vwe=ul();ul({strict:!0});ul({circular:!0});ul({circular:!0,strict:!0});ul({createInternalComparator:()=>Gc});ul({strict:!0,createInternalComparator:()=>Gc});ul({circular:!0,createInternalComparator:()=>Gc});ul({circular:!0,createInternalComparator:()=>Gc,strict:!0});function ul(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:i=!1}=t,s=mwe(t),o=pwe(s),a=r?r(o):gwe(o);return ywe({circular:e,comparator:o,createState:n,equals:a,strict:i})}var Tie={exports:{}},Oie={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K0=k,bwe=OM;function xwe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wwe=typeof Object.is=="function"?Object.is:xwe,Swe=bwe.useSyncExternalStore,_we=K0.useRef,Ewe=K0.useEffect,Cwe=K0.useMemo,Nwe=K0.useDebugValue;Oie.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var s=_we(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Cwe(function(){function l(p){if(!c){if(c=!0,u=p,p=n(p),i!==void 0&&o.hasValue){var m=o.value;if(i(m,p))return h=m}return h=p}if(m=h,wwe(u,p))return m;var g=n(p);return i!==void 0&&i(m,g)?(u=p,m):(u=p,h=g)}var c=!1,u,h,f=r===void 0?null:r;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,r,n,i]);var a=Swe(t,s[0],s[1]);return Ewe(function(){o.hasValue=!0,o.value=a},[a]),Nwe(a),a};Tie.exports=Oie;var kwe=Tie.exports,Twe=(...t)=>e=>{t.forEach(r=>{typeof r=="function"?r(e):r&&(r.current=e)})},Owe=({contentComponent:t})=>{const e=OM.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return d.jsx(d.Fragment,{children:Object.values(e)})};function jwe(){const t=new Set;let e={};return{subscribe(r){return t.add(r),()=>{t.delete(r)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(r,n){e={...e,[r]:ode.createPortal(n.reactElement,n.element,r)},t.forEach(i=>i())},removeRenderer(r){const n={...e};delete n[r],e=n,t.forEach(i=>i())}}}var Pwe=class extends be.Component{constructor(t){var e;super(t),this.editorContentRef=be.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const r=this.editorContentRef.current;r.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:r}),e.contentComponent=jwe(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const r=document.createElement("div");r.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:r})}catch{}}}render(){const{editor:t,innerRef:e,...r}=this.props;return d.jsxs(d.Fragment,{children:[d.jsx("div",{ref:Twe(e,this.editorContentRef),...r}),(t==null?void 0:t.contentComponent)&&d.jsx(Owe,{contentComponent:t.contentComponent})]})}},Iwe=k.forwardRef((t,e)=>{const r=be.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return be.createElement(Pwe,{key:r,innerRef:e,...t})}),Rwe=be.memo(Iwe),Mwe=typeof window<"u"?k.useLayoutEffect:k.useEffect,Awe=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(n=>n())},r=this.editor;return r.on("transaction",e),()=>{r.off("transaction",e)}}}};function Dwe(t){var e;const[r]=k.useState(()=>new Awe(t.editor)),n=kwe.useSyncExternalStoreWithSelector(r.subscribe,r.getSnapshot,r.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:vwe);return Mwe(()=>r.watch(t.editor),[t.editor,r]),k.useDebugValue(n),n}var $we=!1,PI=typeof window>"u",Fwe=PI||!!(typeof window<"u"&&window.next),qwe=class jie{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(r=>r())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?PI||Fwe?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...n)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...n)},onBlur:(...n)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...n)},onCreate:(...n)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...n)},onDestroy:(...n)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...n)},onFocus:(...n)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...n)},onSelectionUpdate:(...n)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...n)},onTransaction:(...n)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...n)},onUpdate:(...n)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...n)},onContentError:(...n)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...n)},onDrop:(...n)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...n)},onPaste:(...n)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...n)},onDelete:(...n)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...n)}};return new Exe(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,r){return Object.keys(e).every(n=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)?!0:n==="extensions"&&e.extensions&&r.extensions?e.extensions.length!==r.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=r.extensions)==null?void 0:o[s])}):e[n]===r[n])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?jie.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((n,i)=>n===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,r=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){r&&r.setOptions(this.options.current);return}r&&!r.isDestroyed&&(r.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function Lwe(t={},e=[]){const r=k.useRef(t);r.current=t;const[n]=k.useState(()=>new qwe(r)),i=OM.useSyncExternalStore(n.subscribe,n.getEditor,n.getServerSnapshot);return k.useDebugValue(i),k.useEffect(n.onRender(e)),Dwe({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&s===0?0:s+1}),i}var Bwe=k.createContext({editor:null});Bwe.Consumer;var zwe=k.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),Vwe=()=>k.useContext(zwe);be.forwardRef((t,e)=>{const{onDragStart:r}=Vwe(),n=t.as||"div";return d.jsx(n,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:r,style:{whiteSpace:"normal",...t.style}})});be.createContext({markViewContentRef:()=>{}});var hv=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:r,...n}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,n,r]},Uwe=/^\s*>\s$/,Hwe=bi.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return hv("blockquote",{...yr(this.options.HTMLAttributes,t),children:hv("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const r=">",n=[];return t.content.forEach(i=>{const a=e.renderChildren([i]).split(`
`).map(l=>l.trim()===""?r:`${r} ${l}`);n.push(a.join(`
`))}),n.join(`
${r}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Hd({find:Uwe,type:this.type})]}}),Wwe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Kwe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Gwe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Ywe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Qwe=Kc.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return hv("strong",{...yr(this.options.HTMLAttributes,t),children:hv("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Ud({find:Wwe,type:this.type}),Ud({find:Gwe,type:this.type})]},addPasteRules(){return[Ic({find:Kwe,type:this.type}),Ic({find:Ywe,type:this.type})]}}),Xwe=/(^|[^`])`([^`]+)`(?!`)$/,Jwe=/(^|[^`])`([^`]+)`(?!`)/g,Zwe=Kc.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",yr(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Ud({find:Xwe,type:this.type})]},addPasteRules(){return[Ic({find:Jwe,type:this.type})]}}),G1=4,eSe=/^```([a-z]+)?[\s\n]$/,tSe=/^~~~([a-z]+)?[\s\n]$/,rSe=bi.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:G1,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:r}=this.options;if(!r)return null;const s=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(r)).map(o=>o.replace(r,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",yr(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var r;return((r=t.raw)==null?void 0:r.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var r;let n="";const i=((r=t.attrs)==null?void 0:r.language)||"";return t.content?n=[`\`\`\`${i}`,e.renderChildren(t.content),"```"].join(`
`):n=`\`\`\`${i}

\`\`\``,n},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,r=e.pos===1;return!t||e.parent.type.name!==this.name?!1:r||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const r=(e=this.options.tabSize)!=null?e:G1,{state:n}=t,{selection:i}=n,{$from:s,empty:o}=i;if(s.parent.type!==this.type)return!1;const a=" ".repeat(r);return o?t.commands.insertContent(a):t.commands.command(({tr:l})=>{const{from:c,to:u}=i,p=n.doc.textBetween(c,u,`
`,`
`).split(`
`).map(m=>a+m).join(`
`);return l.replaceWith(c,u,n.schema.text(p)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const r=(e=this.options.tabSize)!=null?e:G1,{state:n}=t,{selection:i}=n,{$from:s,empty:o}=i;return s.parent.type!==this.type?!1:o?t.commands.command(({tr:a})=>{var l;const{pos:c}=s,u=s.start(),h=s.end(),p=n.doc.textBetween(u,h,`
`,`
`).split(`
`);let m=0,g=0;const v=c-u;for(let _=0;_<p.length;_+=1){if(g+p[_].length>=v){m=_;break}g+=p[_].length+1}const b=((l=p[m].match(/^ */))==null?void 0:l[0])||"",w=Math.min(b.length,r);if(w===0)return!0;let x=u;for(let _=0;_<m;_+=1)x+=p[_].length+1;return a.delete(x,x+w),c-x<=w&&a.setSelection(De.create(a.doc,x)),!0}):t.commands.command(({tr:a})=>{const{from:l,to:c}=i,f=n.doc.textBetween(l,c,`
`,`
`).split(`
`).map(p=>{var m;const g=((m=p.match(/^ */))==null?void 0:m[0])||"",v=Math.min(g.length,r);return p.slice(v)}).join(`
`);return a.replaceWith(l,c,n.schema.text(f)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:r}=e,{$from:n,empty:i}=r;if(!i||n.parent.type!==this.type)return!1;const s=n.parentOffset===n.parent.nodeSize-2,o=n.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:a})=>(a.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:r,doc:n}=e,{$from:i,empty:s}=r;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:n.nodeAt(a)?t.commands.command(({tr:c})=>(c.setSelection(Ue.near(n.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[OI({find:eSe,type:this.type,getAttributes:t=>({language:t[1]})}),OI({find:tSe,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Vt({key:new Tr("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const r=e.clipboardData.getData("text/plain"),n=e.clipboardData.getData("vscode-editor-data"),i=n?JSON.parse(n):void 0,s=i==null?void 0:i.mode;if(!r||!s)return!1;const{tr:o,schema:a}=t.state,l=a.text(r.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(De.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),nSe=bi.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),iSe=bi.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",yr(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:r,editor:n})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=r;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=n.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&o){const h=l.filter(f=>a.includes(f.type.name));c.ensureMarks(h)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),sSe=bi.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,yr(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var r;const n=(r=t.attrs)!=null&&r.level?parseInt(t.attrs.level,10):1,i="#".repeat(n);return t.content?`${i} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>OI({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),oSe=bi.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",yr(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!Nxe(e,e.schema.nodes[this.name]))return!1;const{selection:r}=e,{$to:n}=r,i=t();return cie(r)?i.insertContentAt(n.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:s,tr:o,dispatch:a})=>{if(a){const{$to:l}=o.selection,c=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?o.setSelection(De.create(o.doc,l.pos+1)):l.nodeAfter.isBlock?o.setSelection(je.create(o.doc,l.pos)):o.setSelection(De.create(o.doc,l.pos));else{const u=s.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,h=u==null?void 0:u.create();h&&(o.insert(c,h),o.setSelection(De.create(o.doc,c+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Cxe({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),aSe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,lSe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,cSe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,uSe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,dSe=Kc.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",yr(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Ud({find:aSe,type:this.type}),Ud({find:cSe,type:this.type})]},addPasteRules(){return[Ic({find:lSe,type:this.type}),Ic({find:uSe,type:this.type})]}});const hSe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",fSe="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",II="numeric",RI="ascii",MI="alpha",If="asciinumeric",gf="alphanumeric",AI="domain",Pie="emoji",pSe="scheme",mSe="slashscheme",Y1="whitespace";function gSe(t,e){return t in e||(e[t]=[]),e[t]}function Bl(t,e,r){e[II]&&(e[If]=!0,e[gf]=!0),e[RI]&&(e[If]=!0,e[MI]=!0),e[If]&&(e[gf]=!0),e[MI]&&(e[gf]=!0),e[gf]&&(e[AI]=!0),e[Pie]&&(e[AI]=!0);for(const n in e){const i=gSe(n,r);i.indexOf(t)<0&&i.push(t)}}function ySe(t,e){const r={};for(const n in e)e[n].indexOf(t)>=0&&(r[n]=!0);return r}function Un(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Un.groups={};Un.prototype={accepts(){return!!this.t},go(t){const e=this,r=e.j[t];if(r)return r;for(let n=0;n<e.jr.length;n++){const i=e.jr[n][0],s=e.jr[n][1];if(s&&i.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,r,n){for(let i=0;i<t.length;i++)this.tt(t[i],e,r,n)},tr(t,e,r,n){n=n||Un.groups;let i;return e&&e.j?i=e:(i=new Un(e),r&&n&&Bl(e,r,n)),this.jr.push([t,i]),i},ts(t,e,r,n){let i=this;const s=t.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(t[o]);return i.tt(t[s-1],e,r,n)},tt(t,e,r,n){n=n||Un.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const s=e;let o,a=i.go(t);if(a?(o=new Un,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new Un,s){if(n)if(o.t&&typeof o.t=="string"){const l=Object.assign(ySe(o.t,n),r);Bl(s,l,n)}else r&&Bl(s,r,n);o.t=s}return i.j[t]=o,o}};const Ve=(t,e,r,n,i)=>t.ta(e,r,n,i),Kt=(t,e,r,n,i)=>t.tr(e,r,n,i),bq=(t,e,r,n,i)=>t.ts(e,r,n,i),te=(t,e,r,n,i)=>t.tt(e,r,n,i),ro="WORD",DI="UWORD",Iie="ASCIINUMERICAL",Rie="ALPHANUMERICAL",Sp="LOCALHOST",$I="TLD",FI="UTLD",ay="SCHEME",Ou="SLASH_SCHEME",iA="NUM",qI="WS",sA="NL",Rf="OPENBRACE",Mf="CLOSEBRACE",fv="OPENBRACKET",pv="CLOSEBRACKET",mv="OPENPAREN",gv="CLOSEPAREN",yv="OPENANGLEBRACKET",vv="CLOSEANGLEBRACKET",bv="FULLWIDTHLEFTPAREN",xv="FULLWIDTHRIGHTPAREN",wv="LEFTCORNERBRACKET",Sv="RIGHTCORNERBRACKET",_v="LEFTWHITECORNERBRACKET",Ev="RIGHTWHITECORNERBRACKET",Cv="FULLWIDTHLESSTHAN",Nv="FULLWIDTHGREATERTHAN",kv="AMPERSAND",Tv="APOSTROPHE",Ov="ASTERISK",ia="AT",jv="BACKSLASH",Pv="BACKTICK",Iv="CARET",da="COLON",oA="COMMA",Rv="DOLLAR",_s="DOT",Mv="EQUALS",aA="EXCLAMATION",Ni="HYPHEN",Af="PERCENT",Av="PIPE",Dv="PLUS",$v="POUND",Df="QUERY",lA="QUOTE",Mie="FULLWIDTHMIDDLEDOT",cA="SEMI",Es="SLASH",$f="TILDE",Fv="UNDERSCORE",Aie="EMOJI",qv="SYM";var Die=Object.freeze({__proto__:null,ALPHANUMERICAL:Rie,AMPERSAND:kv,APOSTROPHE:Tv,ASCIINUMERICAL:Iie,ASTERISK:Ov,AT:ia,BACKSLASH:jv,BACKTICK:Pv,CARET:Iv,CLOSEANGLEBRACKET:vv,CLOSEBRACE:Mf,CLOSEBRACKET:pv,CLOSEPAREN:gv,COLON:da,COMMA:oA,DOLLAR:Rv,DOT:_s,EMOJI:Aie,EQUALS:Mv,EXCLAMATION:aA,FULLWIDTHGREATERTHAN:Nv,FULLWIDTHLEFTPAREN:bv,FULLWIDTHLESSTHAN:Cv,FULLWIDTHMIDDLEDOT:Mie,FULLWIDTHRIGHTPAREN:xv,HYPHEN:Ni,LEFTCORNERBRACKET:wv,LEFTWHITECORNERBRACKET:_v,LOCALHOST:Sp,NL:sA,NUM:iA,OPENANGLEBRACKET:yv,OPENBRACE:Rf,OPENBRACKET:fv,OPENPAREN:mv,PERCENT:Af,PIPE:Av,PLUS:Dv,POUND:$v,QUERY:Df,QUOTE:lA,RIGHTCORNERBRACKET:Sv,RIGHTWHITECORNERBRACKET:Ev,SCHEME:ay,SEMI:cA,SLASH:Es,SLASH_SCHEME:Ou,SYM:qv,TILDE:$f,TLD:$I,UNDERSCORE:Fv,UTLD:FI,UWORD:DI,WORD:ro,WS:qI});const Zs=/[a-z]/,rf=new RegExp("\\p{L}","u"),Q1=new RegExp("\\p{Emoji}","u"),eo=/\d/,X1=/\s/,xq="\r",J1=`
`,vSe="",bSe="",Z1="";let Tg=null,Og=null;function xSe(t=[]){const e={};Un.groups=e;const r=new Un;Tg==null&&(Tg=wq(hSe)),Og==null&&(Og=wq(fSe)),te(r,"'",Tv),te(r,"{",Rf),te(r,"}",Mf),te(r,"[",fv),te(r,"]",pv),te(r,"(",mv),te(r,")",gv),te(r,"<",yv),te(r,">",vv),te(r,"",bv),te(r,"",xv),te(r,"",wv),te(r,"",Sv),te(r,"",_v),te(r,"",Ev),te(r,"",Cv),te(r,"",Nv),te(r,"&",kv),te(r,"*",Ov),te(r,"@",ia),te(r,"`",Pv),te(r,"^",Iv),te(r,":",da),te(r,",",oA),te(r,"$",Rv),te(r,".",_s),te(r,"=",Mv),te(r,"!",aA),te(r,"-",Ni),te(r,"%",Af),te(r,"|",Av),te(r,"+",Dv),te(r,"#",$v),te(r,"?",Df),te(r,'"',lA),te(r,"/",Es),te(r,";",cA),te(r,"~",$f),te(r,"_",Fv),te(r,"\\",jv),te(r,"",Mie);const n=Kt(r,eo,iA,{[II]:!0});Kt(n,eo,n);const i=Kt(n,Zs,Iie,{[If]:!0}),s=Kt(n,rf,Rie,{[gf]:!0}),o=Kt(r,Zs,ro,{[RI]:!0});Kt(o,eo,i),Kt(o,Zs,o),Kt(i,eo,i),Kt(i,Zs,i);const a=Kt(r,rf,DI,{[MI]:!0});Kt(a,Zs),Kt(a,eo,s),Kt(a,rf,a),Kt(s,eo,s),Kt(s,Zs),Kt(s,rf,s);const l=te(r,J1,sA,{[Y1]:!0}),c=te(r,xq,qI,{[Y1]:!0}),u=Kt(r,X1,qI,{[Y1]:!0});te(r,Z1,u),te(c,J1,l),te(c,Z1,u),Kt(c,X1,u),te(u,xq),te(u,J1),Kt(u,X1,u),te(u,Z1,u);const h=Kt(r,Q1,Aie,{[Pie]:!0});te(h,"#"),Kt(h,Q1,h),te(h,vSe,h);const f=te(h,bSe);te(f,"#"),Kt(f,Q1,h);const p=[[Zs,o],[eo,i]],m=[[Zs,null],[rf,a],[eo,s]];for(let g=0;g<Tg.length;g++)Yo(r,Tg[g],$I,ro,p);for(let g=0;g<Og.length;g++)Yo(r,Og[g],FI,DI,m);Bl($I,{tld:!0,ascii:!0},e),Bl(FI,{utld:!0,alpha:!0},e),Yo(r,"file",ay,ro,p),Yo(r,"mailto",ay,ro,p),Yo(r,"http",Ou,ro,p),Yo(r,"https",Ou,ro,p),Yo(r,"ftp",Ou,ro,p),Yo(r,"ftps",Ou,ro,p),Bl(ay,{scheme:!0,ascii:!0},e),Bl(Ou,{slashscheme:!0,ascii:!0},e),t=t.sort((g,v)=>g[0]>v[0]?1:-1);for(let g=0;g<t.length;g++){const v=t[g][0],b=t[g][1]?{[pSe]:!0}:{[mSe]:!0};v.indexOf("-")>=0?b[AI]=!0:Zs.test(v)?eo.test(v)?b[If]=!0:b[RI]=!0:b[II]=!0,bq(r,v,v,b)}return bq(r,"localhost",Sp,{ascii:!0}),r.jd=new Un(qv),{start:r,tokens:Object.assign({groups:e},Die)}}function $ie(t,e){const r=wSe(e.replace(/[A-Z]/g,a=>a.toLowerCase())),n=r.length,i=[];let s=0,o=0;for(;o<n;){let a=t,l=null,c=0,u=null,h=-1,f=-1;for(;o<n&&(l=a.go(r[o]));)a=l,a.accepts()?(h=0,f=0,u=a):h>=0&&(h+=r[o].length,f++),c+=r[o].length,s+=r[o].length,o++;s-=h,o-=f,c-=h,i.push({t:u.t,v:e.slice(s-c,s),s:s-c,e:s})}return i}function wSe(t){const e=[],r=t.length;let n=0;for(;n<r;){let i=t.charCodeAt(n),s,o=i<55296||i>56319||n+1===r||(s=t.charCodeAt(n+1))<56320||s>57343?t[n]:t.slice(n,n+2);e.push(o),n+=o.length}return e}function Yo(t,e,r,n,i){let s;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];t.j[l]?s=t.j[l]:(s=new Un(n),s.jr=i.slice(),t.j[l]=s),t=s}return s=new Un(r),s.jr=i.slice(),t.j[e[o-1]]=s,s}function wq(t){const e=[],r=[];let n=0,i="0123456789";for(;n<t.length;){let s=0;for(;i.indexOf(t[n+s])>=0;)s++;if(s>0){e.push(r.join(""));for(let o=parseInt(t.substring(n,n+s),10);o>0;o--)r.pop();n+=s}else r.push(t[n]),n++}return e}const _p={defaultProtocol:"http",events:null,format:Sq,formatHref:Sq,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function uA(t,e=null){let r=Object.assign({},_p);t&&(r=Object.assign(r,t instanceof uA?t.o:t));const n=r.ignoreTags,i=[];for(let s=0;s<n.length;s++)i.push(n[s].toUpperCase());this.o=r,e&&(this.defaultRender=e),this.ignoreTags=i}uA.prototype={o:_p,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,r){const n=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=r.t in i?i[r.t]:_p[t],typeof i=="function"&&n&&(i=i(e,r))):typeof i=="function"&&n&&(i=i(e,r.t,r)),i)},getObj(t,e,r){let n=this.o[t];return typeof n=="function"&&e!=null&&(n=n(e,r.t,r)),n},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function Sq(t){return t}function Fie(t,e){this.t="token",this.v=t,this.tk=e}Fie.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),r=t.get("truncate",e,this),n=t.get("format",e,this);return r&&n.length>r?n.substring(0,r)+"":n},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=_p.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,r=this.toHref(t.get("defaultProtocol")),n=t.get("formatHref",r,this),i=t.get("tagName",r,e),s=this.toFormattedString(t),o={},a=t.get("className",r,e),l=t.get("target",r,e),c=t.get("rel",r,e),u=t.getObj("attributes",r,e),h=t.getObj("events",r,e);return o.href=n,a&&(o.class=a),l&&(o.target=l),c&&(o.rel=c),u&&Object.assign(o,u),{tagName:i,attributes:o,content:s,eventListeners:h}}};function G0(t,e){class r extends Fie{constructor(i,s){super(i,s),this.t=t}}for(const n in e)r.prototype[n]=e[n];return r.t=t,r}const _q=G0("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Eq=G0("text"),SSe=G0("nl"),jg=G0("url",{isLink:!0,toHref(t=_p.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Sp&&t[1].t===da}}),Ci=t=>new Un(t);function _Se({groups:t}){const e=t.domain.concat([kv,Ov,ia,jv,Pv,Iv,Rv,Mv,Ni,iA,Af,Av,Dv,$v,Es,qv,$f,Fv]),r=[Tv,da,oA,_s,aA,Af,Df,lA,cA,yv,vv,Rf,Mf,pv,fv,mv,gv,bv,xv,wv,Sv,_v,Ev,Cv,Nv],n=[kv,Tv,Ov,jv,Pv,Iv,Rv,Mv,Ni,Rf,Mf,Af,Av,Dv,$v,Df,Es,qv,$f,Fv],i=Ci(),s=te(i,$f);Ve(s,n,s),Ve(s,t.domain,s);const o=Ci(),a=Ci(),l=Ci();Ve(i,t.domain,o),Ve(i,t.scheme,a),Ve(i,t.slashscheme,l),Ve(o,n,s),Ve(o,t.domain,o);const c=te(o,ia);te(s,ia,c),te(a,ia,c),te(l,ia,c);const u=te(s,_s);Ve(u,n,s),Ve(u,t.domain,s);const h=Ci();Ve(c,t.domain,h),Ve(h,t.domain,h);const f=te(h,_s);Ve(f,t.domain,h);const p=Ci(_q);Ve(f,t.tld,p),Ve(f,t.utld,p),te(c,Sp,p);const m=te(h,Ni);te(m,Ni,m),Ve(m,t.domain,h),Ve(p,t.domain,h),te(p,_s,f),te(p,Ni,m);const g=te(p,da);Ve(g,t.numeric,_q);const v=te(o,Ni),y=te(o,_s);te(v,Ni,v),Ve(v,t.domain,o),Ve(y,n,s),Ve(y,t.domain,o);const b=Ci(jg);Ve(y,t.tld,b),Ve(y,t.utld,b),Ve(b,t.domain,o),Ve(b,n,s),te(b,_s,y),te(b,Ni,v),te(b,ia,c);const w=te(b,da),x=Ci(jg);Ve(w,t.numeric,x);const S=Ci(jg),_=Ci();Ve(S,e,S),Ve(S,r,_),Ve(_,e,S),Ve(_,r,_),te(b,Es,S),te(x,Es,S);const C=te(a,da),E=te(l,da),N=te(E,Es),T=te(N,Es);Ve(a,t.domain,o),te(a,_s,y),te(a,Ni,v),Ve(l,t.domain,o),te(l,_s,y),te(l,Ni,v),Ve(C,t.domain,S),te(C,Es,S),te(C,Df,S),Ve(T,t.domain,S),Ve(T,e,S),te(T,Es,S);const j=[[Rf,Mf],[fv,pv],[mv,gv],[yv,vv],[bv,xv],[wv,Sv],[_v,Ev],[Cv,Nv]];for(let P=0;P<j.length;P++){const[O,D]=j[P],z=te(S,O);te(_,O,z),te(z,D,S);const R=Ci(jg);Ve(z,e,R);const B=Ci();Ve(z,r),Ve(R,e,R),Ve(R,r,B),Ve(B,e,R),Ve(B,r,B),te(R,D,S),te(B,D,S)}return te(i,Sp,b),te(i,sA,SSe),{start:i,tokens:Die}}function ESe(t,e,r){let n=r.length,i=0,s=[],o=[];for(;i<n;){let a=t,l=null,c=null,u=0,h=null,f=-1;for(;i<n&&!(l=a.go(r[i].t));)o.push(r[i++]);for(;i<n&&(c=l||a.go(r[i].t));)l=null,a=c,a.accepts()?(f=0,h=a):f>=0&&f++,i++,u++;if(f<0)i-=u,i<n&&(o.push(r[i]),i++);else{o.length>0&&(s.push(ex(Eq,e,o)),o=[]),i-=f,u-=f;const p=h.t,m=r.slice(i-u,i);s.push(ex(p,e,m))}}return o.length>0&&s.push(ex(Eq,e,o)),s}function ex(t,e,r){const n=r[0].s,i=r[r.length-1].e,s=e.slice(n,i);return new t(s,r)}const CSe=typeof console<"u"&&console&&console.warn||(()=>{}),NSe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",jt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function kSe(){return Un.groups={},jt.scanner=null,jt.parser=null,jt.tokenQueue=[],jt.pluginQueue=[],jt.customSchemes=[],jt.initialized=!1,jt}function Cq(t,e=!1){if(jt.initialized&&CSe(`linkifyjs: already initialized - will not register custom scheme "${t}" ${NSe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);jt.customSchemes.push([t,e])}function TSe(){jt.scanner=xSe(jt.customSchemes);for(let t=0;t<jt.tokenQueue.length;t++)jt.tokenQueue[t][1]({scanner:jt.scanner});jt.parser=_Se(jt.scanner.tokens);for(let t=0;t<jt.pluginQueue.length;t++)jt.pluginQueue[t][1]({scanner:jt.scanner,parser:jt.parser});return jt.initialized=!0,jt}function dA(t){return jt.initialized||TSe(),ESe(jt.parser.start,t,$ie(jt.scanner.start,t))}dA.scan=$ie;function qie(t,e=null,r=null){if(e&&typeof e=="object"){if(r)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);r=e,e=null}const n=new uA(r),i=dA(t),s=[];for(let o=0;o<i.length;o++){const a=i[o];a.isLink&&(!e||a.t===e)&&n.check(a)&&s.push(a.toFormattedObject(n))}return s}var hA="[\0- -\u2029]",OSe=new RegExp(hA),jSe=new RegExp(`${hA}$`),PSe=new RegExp(hA,"g");function ISe(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function RSe(t){return new Vt({key:new Tr("autolink"),appendTransaction:(e,r,n)=>{const i=e.some(c=>c.docChanged)&&!r.doc.eq(n.doc),s=e.some(c=>c.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=n,a=tie(r.doc,[...e]);if(lie(a).forEach(({newRange:c})=>{const u=N1e(n.doc,c,p=>p.isTextblock);let h,f;if(u.length>1)h=u[0],f=n.doc.textBetween(h.pos,h.pos+h.node.nodeSize,void 0," ");else if(u.length){const p=n.doc.textBetween(c.from,c.to," "," ");if(!jSe.test(p))return;h=u[0],f=n.doc.textBetween(h.pos,c.to,void 0," ")}if(h&&f){const p=f.split(OSe).filter(Boolean);if(p.length<=0)return!1;const m=p[p.length-1],g=h.pos+f.lastIndexOf(m);if(!m)return!1;const v=dA(m).map(y=>y.toObject(t.defaultProtocol));if(!ISe(v))return!1;v.filter(y=>y.isLink).map(y=>({...y,from:g+y.start+1,to:g+y.end+1})).filter(y=>n.schema.marks.code?!n.doc.rangeHasMark(y.from,y.to,n.schema.marks.code):!0).filter(y=>t.validate(y.value)).filter(y=>t.shouldAutoLink(y.value)).forEach(y=>{ZM(y.from,y.to,n.doc).some(b=>b.mark.type===t.type)||o.addMark(y.from,y.to,t.type.create({href:y.href}))})}}),!!o.steps.length)return o}})}function MSe(t){return new Vt({key:new Tr("handleClickLink"),props:{handleClick:(e,r,n)=>{var i,s;if(n.button!==0||!e.editable)return!1;let o=!1;if(t.enableClickSelection&&(o=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){let a=null;if(n.target instanceof HTMLAnchorElement)a=n.target;else{let h=n.target;const f=[];for(;h.nodeName!=="DIV";)f.push(h),h=h.parentNode;a=f.find(p=>p.nodeName==="A")}if(!a)return o;const l=aie(e.state,t.type.name),c=(i=a==null?void 0:a.href)!=null?i:l.href,u=(s=a==null?void 0:a.target)!=null?s:l.target;a&&c&&(window.open(c,u),o=!0)}return o}}})}function ASe(t){return new Vt({key:new Tr("handlePasteLink"),props:{handlePaste:(e,r,n)=>{const{shouldAutoLink:i}=t,{state:s}=e,{selection:o}=s,{empty:a}=o;if(a)return!1;let l="";n.content.forEach(u=>{l+=u.textContent});const c=qie(l,{defaultProtocol:t.defaultProtocol}).find(u=>u.isLink&&u.value===l);return!l||!c||i!==void 0&&!i(c.value)?!1:t.editor.commands.setMark(t.type,{href:c.href})}}})}function Cl(t,e){const r=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(n=>{const i=typeof n=="string"?n:n.scheme;i&&r.push(i)}),!t||t.replace(PSe,"").match(new RegExp(`^(?:(?:${r.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Lie=Kc.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){Cq(t);return}Cq(t.scheme,t.optionalSlashes)})},onDestroy(){kSe()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Cl(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),r=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||r&&!t.includes("@"))return!0;const i=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(i)||!/\./.test(i))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:r=>!!Cl(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Cl(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",yr(this.options.HTMLAttributes,t),0]:["a",yr(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var r;const n=((r=t.attrs)==null?void 0:r.href)||"";return`[${e.renderChildren(t)}](${n})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:r}=t;return this.options.isAllowedUri(r,{defaultValidate:n=>!!Cl(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:r}=t||{};return r&&!this.options.isAllowedUri(r,{defaultValidate:n=>!!Cl(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Ic({find:t=>{const e=[];if(t){const{protocols:r,defaultProtocol:n}=this.options,i=qie(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!Cl(o,r),protocols:r,defaultProtocol:n}));i.length&&i.forEach(s=>{this.options.shouldAutoLink(s.value)&&e.push({text:s.value,data:{href:s.href},index:s.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:r}=this.options;return this.options.autolink&&t.push(RSe({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:n=>this.options.isAllowedUri(n,{defaultValidate:i=>!!Cl(i,e),protocols:e,defaultProtocol:r}),shouldAutoLink:this.options.shouldAutoLink})),t.push(MSe({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(ASe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),DSe=Lie,$Se=Object.defineProperty,FSe=(t,e)=>{for(var r in e)$Se(t,r,{get:e[r],enumerable:!0})},qSe="listItem",Nq="textStyle",kq=/^\s*([-+*])\s$/,Bie=bi.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",yr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(qSe,this.editor.getAttributes(Nq)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Hd({find:kq,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Hd({find:kq,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Nq),editor:this.editor})),[t]}}),zie=bi.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",yr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let r=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(i=>i.type==="paragraph"))r=e.parseChildren(t.tokens);else{const i=t.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(r=[{type:"paragraph",content:e.parseInline(i.tokens)}],t.tokens.length>1){const o=t.tokens.slice(1),a=e.parseChildren(o);r.push(...a)}}else r=e.parseChildren(t.tokens)}return r.length===0&&(r=[{type:"paragraph",content:[]}]),{type:"listItem",content:r}},renderMarkdown:(t,e,r)=>nA(t,e,n=>n.parentType==="bulletList"?"- ":n.parentType==="orderedList"?`${n.index+1}. `:"- ",r),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),LSe={};FSe(LSe,{findListItemPos:()=>om,getNextListDepth:()=>fA,handleBackspace:()=>LI,handleDelete:()=>BI,hasListBefore:()=>Vie,hasListItemAfter:()=>BSe,hasListItemBefore:()=>Uie,listItemHasSubList:()=>Hie,nextListIsDeeper:()=>Wie,nextListIsHigher:()=>Kie});var om=(t,e)=>{const{$from:r}=e.selection,n=gr(t,e.schema);let i=null,s=r.depth,o=r.pos,a=null;for(;s>0&&a===null;)i=r.node(s),i.type===n?a=s:(s-=1,o-=1);return a===null?null:{$pos:e.doc.resolve(o),depth:a}},fA=(t,e)=>{const r=om(t,e);if(!r)return!1;const[,n]=D1e(e,t,r.$pos.pos+4);return n},Vie=(t,e,r)=>{const{$anchor:n}=t.selection,i=Math.max(0,n.pos-2),s=t.doc.resolve(i).node();return!(!s||!r.includes(s.type.name))},Uie=(t,e)=>{var r;const{$anchor:n}=e.selection,i=e.doc.resolve(n.pos-2);return!(i.index()===0||((r=i.nodeBefore)==null?void 0:r.type.name)!==t)},Hie=(t,e,r)=>{if(!r)return!1;const n=gr(t,e.schema);let i=!1;return r.descendants(s=>{s.type===n&&(i=!0)}),i},LI=(t,e,r)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!tl(t.state,e)&&Vie(t.state,e,r)){const{$anchor:a}=t.state.selection,l=t.state.doc.resolve(a.before()-1),c=[];l.node().descendants((f,p)=>{f.type.name===e&&c.push({node:f,pos:p})});const u=c.at(-1);if(!u)return!1;const h=t.state.doc.resolve(l.start()+u.pos+1);return t.chain().cut({from:a.start()-1,to:a.end()+1},h.end()).joinForward().run()}if(!tl(t.state,e)||!L1e(t.state))return!1;const n=om(e,t.state);if(!n)return!1;const s=t.state.doc.resolve(n.$pos.pos-2).node(n.depth),o=Hie(e,t.state,s);return Uie(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},Wie=(t,e)=>{const r=fA(t,e),n=om(t,e);return!n||!r?!1:r>n.depth},Kie=(t,e)=>{const r=fA(t,e),n=om(t,e);return!n||!r?!1:r<n.depth},BI=(t,e)=>{if(!tl(t.state,e)||!q1e(t.state,e))return!1;const{selection:r}=t.state,{$from:n,$to:i}=r;return!r.empty&&n.sameParent(i)?!1:Wie(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():Kie(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},BSe=(t,e)=>{var r;const{$anchor:n}=e.selection,i=e.doc.resolve(n.pos-n.parentOffset-2);return!(i.index()===i.parent.childCount-1||((r=i.nodeAfter)==null?void 0:r.type.name)!==t)},Gie=ar.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&BI(t,r)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&BI(t,r)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&LI(t,r,n)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&LI(t,r,n)&&(e=!0)}),e}}}}),Tq=/^(\s*)(\d+)\.\s+(.*)$/,zSe=/^\s/;function VSe(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r],s=i.match(Tq);if(!s)break;const[,o,a,l]=s,c=o.length;let u=l,h=r+1;const f=[i];for(;h<t.length;){const p=t[h];if(p.match(Tq))break;if(p.trim()==="")f.push(p),u+=`
`,h+=1;else if(p.match(zSe))f.push(p),u+=`
${p.slice(c+2)}`,h+=1;else break}e.push({indent:c,number:parseInt(a,10),content:u.trim(),raw:f.join(`
`)}),n=h,r=h}return[e,n]}function Yie(t,e,r){var n;const i=[];let s=0;for(;s<t.length;){const o=t[s];if(o.indent===e){const a=o.content.split(`
`),l=((n=a[0])==null?void 0:n.trim())||"",c=[];l&&c.push({type:"paragraph",raw:l,tokens:r.inlineTokens(l)});const u=a.slice(1).join(`
`).trim();if(u){const p=r.blockTokens(u);c.push(...p)}let h=s+1;const f=[];for(;h<t.length&&t[h].indent>e;)f.push(t[h]),h+=1;if(f.length>0){const p=Math.min(...f.map(g=>g.indent)),m=Yie(f,p,r);c.push({type:"list",ordered:!0,start:f[0].number,items:m,raw:f.map(g=>g.raw).join(`
`)})}i.push({type:"list_item",raw:o.raw,tokens:c}),s=h}else s+=1}return i}function USe(t,e){return t.map(r=>{if(r.type!=="list_item")return e.parseChildren([r])[0];const n=[];return r.tokens&&r.tokens.length>0&&r.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")n.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const s=e.parseChildren([i]);n.push({type:"paragraph",content:s})}else{const s=e.parseChildren([i]);s.length>0&&n.push(...s)}}),{type:"listItem",content:n}})}var HSe="listItem",Oq="textStyle",jq=/^(\d+)\.\s$/,Qie=bi.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...r}=t;return e===1?["ol",yr(this.options.HTMLAttributes,r),0]:["ol",yr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const r=t.start||1,n=t.items?USe(t.items,e):[];return r!==1?{type:"orderedList",attrs:{start:r},content:n}:{type:"orderedList",content:n}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),r=e==null?void 0:e.index;return r!==void 0?r:-1},tokenize:(t,e,r)=>{var n;const i=t.split(`
`),[s,o]=VSe(i);if(s.length===0)return;const a=Yie(s,0,r);return a.length===0?void 0:{type:"list",ordered:!0,start:((n=s[0])==null?void 0:n.number)||1,items:a,raw:i.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(HSe,this.editor.getAttributes(Oq)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Hd({find:jq,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Hd({find:jq,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Oq)}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1],editor:this.editor})),[t]}}),WSe=/^\s*(\[([( |x])?\])\s$/,KSe=bi.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",yr(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const r=[];if(t.tokens&&t.tokens.length>0?r.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?r.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):r.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const n=e.parseChildren(t.nestedTokens);r.push(...n)}return e.createNode("taskItem",{checked:t.checked||!1},r)},renderMarkdown:(t,e)=>{var r;const i=`- [${(r=t.attrs)!=null&&r.checked?"x":" "}] `;return nA(t,e,i)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:r,editor:n})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),c=h=>{var f,p;a.ariaLabel=((p=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:p.call(f,h,a.checked))||`Task item checkbox for ${h.textContent||"empty task item"}`};c(t),s.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",h=>h.preventDefault()),a.addEventListener("change",h=>{if(!n.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:f}=h.target;n.isEditable&&typeof r=="function"&&n.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:p})=>{const m=r();if(typeof m!="number")return!1;const g=p.doc.nodeAt(m);return p.setNodeMarkup(m,void 0,{...g==null?void 0:g.attrs,checked:f}),!0}).run(),!n.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,f)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([h,f])=>{i.setAttribute(h,f)}),i.dataset.checked=t.attrs.checked,a.checked=t.attrs.checked,s.append(a,o),i.append(s,l),Object.entries(e).forEach(([h,f])=>{i.setAttribute(h,f)});let u=new Set(Object.keys(e));return{dom:i,contentDOM:l,update:h=>{if(h.type!==this.type)return!1;i.dataset.checked=h.attrs.checked,a.checked=h.attrs.checked,c(h);const f=n.extensionManager.attributes,p=wp(h,f),m=new Set(Object.keys(p)),g=this.options.HTMLAttributes;return u.forEach(v=>{m.has(v)||(v in g?i.setAttribute(v,g[v]):i.removeAttribute(v))}),Object.entries(p).forEach(([v,y])=>{y==null?v in g?i.setAttribute(v,g[v]):i.removeAttribute(v):i.setAttribute(v,y)}),u=m,!0}}}},addInputRules(){return[Hd({find:WSe,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),GSe=bi.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",yr(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const r=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return r!==void 0?r:-1},tokenize(t,e,r){const n=s=>{const o=jI(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:r.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:n},r);return o?[{type:"taskList",raw:o.raw,items:o.items}]:r.blockTokens(s)},i=jI(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,o)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:r.inlineTokens(s.mainContent),nestedTokens:o}),customNestedParser:n},r);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});ar.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(Bie.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(zie.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(Gie.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(Qie.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(KSe.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(GSe.configure(this.options.taskList)),t}});var YSe=bi.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",yr(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const r=t.tokens||[];return r.length===1&&r[0].type==="image"?e.parseChildren([r[0]]):e.createNode("paragraph",void 0,e.parseInline(r))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),QSe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,XSe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,JSe=Kc.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",yr(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Ud({find:QSe,type:this.type})]},addPasteRules(){return[Ic({find:XSe,type:this.type})]}}),ZSe=bi.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),e_e=Kc.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",yr(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,r){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!i)return;const s=i[2].trim();return{type:"underline",raw:i[0],text:s,tokens:r.inlineTokens(s)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function t_e(t={}){return new Vt({view(e){return new r_e(e,t)}})}class r_e{constructor(e,r){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(n=r.width)!==null&&n!==void 0?n:1,this.color=r.color===!1?void 0:r.color||"black",this.class=r.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:r})=>this.editorView.dom.removeEventListener(e,r))}update(e,r){this.cursorPos!=null&&r.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),r=!e.parent.inlineContent,n,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,a=s.height/i.offsetHeight;if(r){let h=e.nodeBefore,f=e.nodeAfter;if(h||f){let p=this.editorView.nodeDOM(this.cursorPos-(h?h.nodeSize:0));if(p){let m=p.getBoundingClientRect(),g=h?m.bottom:m.top;h&&f&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let v=this.width/2*a;n={left:m.left,right:m.right,top:g-v,bottom:g+v}}}}if(!n){let h=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*o;n={left:h.left-f,right:h.left+f,top:h.top,bottom:h.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",r),this.element.classList.toggle("prosemirror-dropcursor-inline",!r);let c,u;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,u=-pageYOffset;else{let h=l.getBoundingClientRect(),f=h.width/l.offsetWidth,p=h.height/l.offsetHeight;c=h.left-l.scrollLeft*f,u=h.top-l.scrollTop*p}this.element.style.left=(n.left-c)/o+"px",this.element.style.top=(n.top-u)/a+"px",this.element.style.width=(n.right-n.left)/o+"px",this.element.style.height=(n.bottom-n.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let r=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=r&&r.inside>=0&&this.editorView.state.doc.nodeAt(r.inside),i=n&&n.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,r,e):i;if(r&&!s){let o=r.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=Wre(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class Zt extends Ue{constructor(e){super(e,e)}map(e,r){let n=e.resolve(r.map(this.head));return Zt.valid(n)?new Zt(n):Ue.near(n)}content(){return pe.empty}eq(e){return e instanceof Zt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Zt(e.resolve(r.pos))}getBookmark(){return new pA(this.anchor)}static valid(e){let r=e.parent;if(r.isTextblock||!n_e(e)||!i_e(e))return!1;let n=r.type.spec.allowGapCursor;if(n!=null)return n;let i=r.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,r,n=!1){e:for(;;){if(!n&&Zt.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(r>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(r>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=r;let l=e.doc.resolve(i);if(Zt.valid(l))return l}for(;;){let o=r>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!je.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*r),n=!1;continue e}break}s=o,i+=r;let a=e.doc.resolve(i);if(Zt.valid(a))return a}return null}}}Zt.prototype.visible=!1;Zt.findFrom=Zt.findGapCursorFrom;Ue.jsonID("gapcursor",Zt);class pA{constructor(e){this.pos=e}map(e){return new pA(e.map(this.pos))}resolve(e){let r=e.resolve(this.pos);return Zt.valid(r)?new Zt(r):Ue.near(r)}}function Xie(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function n_e(t){for(let e=t.depth;e>=0;e--){let r=t.index(e),n=t.node(e);if(r==0){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||Xie(i.type))return!0;if(i.inlineContent)return!1}}return!0}function i_e(t){for(let e=t.depth;e>=0;e--){let r=t.indexAfter(e),n=t.node(e);if(r==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||Xie(i.type))return!0;if(i.inlineContent)return!1}}return!0}function s_e(){return new Vt({props:{decorations:c_e,createSelectionBetween(t,e,r){return e.pos==r.pos&&Zt.valid(r)?new Zt(r):null},handleClick:a_e,handleKeyDown:o_e,handleDOMEvents:{beforeinput:l_e}}})}const o_e=Kne({ArrowLeft:Pg("horiz",-1),ArrowRight:Pg("horiz",1),ArrowUp:Pg("vert",-1),ArrowDown:Pg("vert",1)});function Pg(t,e){const r=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(n,i,s){let o=n.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof De){if(!s.endOfTextblock(r)||a.depth==0)return!1;l=!1,a=n.doc.resolve(e>0?a.after():a.before())}let c=Zt.findGapCursorFrom(a,e,l);return c?(i&&i(n.tr.setSelection(new Zt(c))),!0):!1}}function a_e(t,e,r){if(!t||!t.editable)return!1;let n=t.state.doc.resolve(e);if(!Zt.valid(n))return!1;let i=t.posAtCoords({left:r.clientX,top:r.clientY});return i&&i.inside>-1&&je.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Zt(n))),!0)}function l_e(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Zt))return!1;let{$from:r}=t.state.selection,n=r.parent.contentMatchAt(r.index()).findWrapping(t.state.schema.nodes.text);if(!n)return!1;let i=J.empty;for(let o=n.length-1;o>=0;o--)i=J.from(n[o].createAndFill(null,i));let s=t.state.tr.replace(r.pos,r.pos,new pe(i,0,0));return s.setSelection(De.near(s.doc.resolve(r.pos+1))),t.dispatch(s),!1}function c_e(t){if(!(t.selection instanceof Zt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",qt.create(t.doc,[Tn.widget(t.selection.head,e,{key:"gapcursor"})])}var Lv=200,Lr=function(){};Lr.prototype.append=function(e){return e.length?(e=Lr.from(e),!this.length&&e||e.length<Lv&&this.leafAppend(e)||this.length<Lv&&e.leafPrepend(this)||this.appendInner(e)):this};Lr.prototype.prepend=function(e){return e.length?Lr.from(e).append(this):this};Lr.prototype.appendInner=function(e){return new u_e(this,e)};Lr.prototype.slice=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=this.length),e>=r?Lr.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,r))};Lr.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Lr.prototype.forEach=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length),r<=n?this.forEachInner(e,r,n,0):this.forEachInvertedInner(e,r,n,0)};Lr.prototype.map=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},r,n),i};Lr.from=function(e){return e instanceof Lr?e:e&&e.length?new Jie(e):Lr.empty};var Jie=function(t){function e(n){t.call(this),this.values=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Lv)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Lv)return new e(i.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(e.prototype,r),e}(Lr);Lr.empty=new Jie([]);var u_e=function(t){function e(r,n){t.call(this),this.left=r,this.right=n,this.length=r.length+n.length,this.depth=Math.max(r.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(n,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(n,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(n,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(n,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(n,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(n,i){if(n==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(n,i):n>=s?this.right.slice(n-s,i-s):this.left.slice(n,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(n){var i=this.right.leafAppend(n);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(n){var i=this.left.leafPrepend(n);if(i)return new e(i,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e}(Lr);const d_e=500;class ls{constructor(e,r){this.items=e,this.eventCount=r}popEvent(e,r){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let i,s;r&&(i=this.remapping(n,this.items.length),s=i.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((h,f)=>{if(!h.step){i||(i=this.remapping(n,f+1),s=i.maps.length),s--,u.push(h);return}if(i){u.push(new Cs(h.map));let p=h.step.map(i.slice(s)),m;p&&o.maybeStep(p).doc&&(m=o.mapping.maps[o.mapping.maps.length-1],c.push(new Cs(m,void 0,void 0,c.length+u.length))),s--,m&&i.appendMap(m,s)}else o.maybeStep(h.step);if(h.selection)return a=i?h.selection.map(i.slice(s)):h.selection,l=new ls(this.items.slice(0,n).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,r,n,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let h=e.steps[u].invert(e.docs[u]),f=new Cs(e.mapping.maps[u],h,r),p;(p=l&&l.merge(f))&&(f=p,u?s.pop():a=a.slice(0,a.length-1)),s.push(f),r&&(o++,r=void 0),i||(l=f)}let c=o-n.depth;return c>f_e&&(a=h_e(a,c),o-=c),new ls(a.append(s),o)}remapping(e,r){let n=new mp;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?n.maps.length-i.mirrorOffset:void 0;n.appendMap(i.map,o)},e,r),n}addMaps(e){return this.eventCount==0?this:new ls(this.items.append(e.map(r=>new Cs(r))),this.eventCount)}rebased(e,r){if(!this.eventCount)return this;let n=[],i=Math.max(0,this.items.length-r),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},i);let l=r;this.items.forEach(f=>{let p=s.getMirror(--l);if(p==null)return;o=Math.min(o,p);let m=s.maps[p];if(f.step){let g=e.steps[p].invert(e.docs[p]),v=f.selection&&f.selection.map(s.slice(l+1,p));v&&a++,n.push(new Cs(m,g,v))}else n.push(new Cs(m))},i);let c=[];for(let f=r;f<o;f++)c.push(new Cs(s.maps[f]));let u=this.items.slice(0,i).append(c).append(n),h=new ls(u,a);return h.emptyItemCount()>d_e&&(h=h.compress(this.items.length-n.length)),h}emptyItemCount(){let e=0;return this.items.forEach(r=>{r.step||e++}),e}compress(e=this.items.length){let r=this.remapping(0,e),n=r.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(r.slice(n)),c=l&&l.getMap();if(n--,c&&r.appendMap(c,n),l){let u=o.selection&&o.selection.map(r.slice(n));u&&s++;let h=new Cs(c.invert(),l,u),f,p=i.length-1;(f=i.length&&i[p].merge(h))?i[p]=f:i.push(h)}}else o.map&&n--},this.items.length,0),new ls(Lr.from(i.reverse()),s)}}ls.empty=new ls(Lr.empty,0);function h_e(t,e){let r;return t.forEach((n,i)=>{if(n.selection&&e--==0)return r=i,!1}),t.slice(r)}class Cs{constructor(e,r,n,i){this.map=e,this.step=r,this.selection=n,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let r=e.step.merge(this.step);if(r)return new Cs(r.getMap().invert(),r,this.selection)}}}class sa{constructor(e,r,n,i,s){this.done=e,this.undone=r,this.prevRanges=n,this.prevTime=i,this.prevComposition=s}}const f_e=20;function p_e(t,e,r,n){let i=r.getMeta(lc),s;if(i)return i.historyState;r.getMeta(y_e)&&(t=new sa(t.done,t.undone,null,0,-1));let o=r.getMeta("appendedTransaction");if(r.steps.length==0)return t;if(o&&o.getMeta(lc))return o.getMeta(lc).redo?new sa(t.done.addTransform(r,void 0,n,ly(e)),t.undone,Pq(r.mapping.maps),t.prevTime,t.prevComposition):new sa(t.done,t.undone.addTransform(r,void 0,n,ly(e)),null,t.prevTime,t.prevComposition);if(r.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=r.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(r.time||0)-n.newGroupDelay||!m_e(r,t.prevRanges)),c=o?tx(t.prevRanges,r.mapping):Pq(r.mapping.maps);return new sa(t.done.addTransform(r,l?e.selection.getBookmark():void 0,n,ly(e)),ls.empty,c,r.time,a??t.prevComposition)}else return(s=r.getMeta("rebased"))?new sa(t.done.rebased(r,s),t.undone.rebased(r,s),tx(t.prevRanges,r.mapping),t.prevTime,t.prevComposition):new sa(t.done.addMaps(r.mapping.maps),t.undone.addMaps(r.mapping.maps),tx(t.prevRanges,r.mapping),t.prevTime,t.prevComposition)}function m_e(t,e){if(!e)return!1;if(!t.docChanged)return!0;let r=!1;return t.mapping.maps[0].forEach((n,i)=>{for(let s=0;s<e.length;s+=2)n<=e[s+1]&&i>=e[s]&&(r=!0)}),r}function Pq(t){let e=[];for(let r=t.length-1;r>=0&&e.length==0;r--)t[r].forEach((n,i,s,o)=>e.push(s,o));return e}function tx(t,e){if(!t)return null;let r=[];for(let n=0;n<t.length;n+=2){let i=e.map(t[n],1),s=e.map(t[n+1],-1);i<=s&&r.push(i,s)}return r}function g_e(t,e,r){let n=ly(e),i=lc.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,n);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,n),l=new sa(r?a:s.remaining,r?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(lc,{redo:r,historyState:l})}let rx=!1,Iq=null;function ly(t){let e=t.plugins;if(Iq!=e){rx=!1,Iq=e;for(let r=0;r<e.length;r++)if(e[r].spec.historyPreserveItems){rx=!0;break}}return rx}const lc=new Tr("history"),y_e=new Tr("closeHistory");function v_e(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Vt({key:lc,state:{init(){return new sa(ls.empty,ls.empty,null,0,-1)},apply(e,r,n){return p_e(r,n,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,r){let n=r.inputType,i=n=="historyUndo"?ese:n=="historyRedo"?tse:null;return!i||!e.editable?!1:(r.preventDefault(),i(e.state,e.dispatch))}}}})}function Zie(t,e){return(r,n)=>{let i=lc.getState(r);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(n){let s=g_e(i,r,t);s&&n(e?s.scrollIntoView():s)}return!0}}const ese=Zie(!1,!0),tse=Zie(!0,!0);ar.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const n=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(n)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,r=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(r)}},addProseMirrorPlugins(){let t=!1;return[new Vt({key:new Tr("characterCount"),appendTransaction:(e,r,n)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const s=this.storage.characters({node:n.doc});if(s>i){const o=s-i,a=0,l=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const c=n.tr.deleteRange(a,l);return t=!0,c}t=!0},filterTransaction:(e,r)=>{const n=this.options.limit;if(!e.docChanged||n===0||n===null||n===void 0)return!0;const i=this.storage.characters({node:r.doc}),s=this.storage.characters({node:e.doc});if(s<=n||i>n&&s>n&&s<=i)return!0;if(i>n&&s>n&&s>i||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,l=s-n,c=a-l,u=a;return e.deleteRange(c,u),!(this.storage.characters({node:e.doc})>n)}})]}});var b_e=ar.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[t_e(this.options)]}});ar.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Vt({key:new Tr("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:r,isFocused:n}=this.editor,{anchor:i}=e,s=[];if(!r||!n)return qt.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((l,c)=>{if(l.isText)return;if(!(i>=c&&i<=c+l.nodeSize-1))return!1;o+=1});let a=0;return t.descendants((l,c)=>{if(l.isText||!(i>=c&&i<=c+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&o-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";s.push(Tn.node(c,c+l.nodeSize,{class:this.options.className}))}),qt.create(t,s)}}})]}});var x_e=ar.create({name:"gapCursor",addProseMirrorPlugins(){return[s_e()]},extendNodeSchema(t){var e;const r={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=ut(Te(t,"allowGapCursor",r)))!=null?e:null}}}),w_e=ar.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Vt({key:new Tr("placeholder"),props:{decorations:({doc:t,selection:e})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:n}=e,i=[];if(!r)return null;const s=this.editor.isEmpty;return t.descendants((o,a)=>{const l=n>=a&&n<=a+o.nodeSize,c=!o.isLeaf&&U0(o);if((l||!this.options.showOnlyCurrent)&&c){const u=[this.options.emptyNodeClass];s&&u.push(this.options.emptyEditorClass);const h=Tn.node(a,a+o.nodeSize,{class:u.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:a,hasAnchor:l}):this.options.placeholder});i.push(h)}return this.options.includeChildren}),qt.create(t,i)}}})]}});ar.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new Vt({key:new Tr("selection"),props:{decorations(r){return r.selection.empty||t.isFocused||!t.isEditable||cie(r.selection)||t.view.dragging?null:qt.create(r.doc,[Tn.inline(r.selection.from,r.selection.to,{class:e.className})])}}})]}});function Rq({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var S_e=ar.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new Tr(this.name),r=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",n=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(r).includes(i.name));return[new Vt({key:e,appendTransaction:(i,s,o)=>{const{doc:a,tr:l,schema:c}=o,u=e.getState(o),h=a.content.size,f=c.nodes[r];if(u)return l.insert(h,f.create())},state:{init:(i,s)=>{const o=s.tr.doc.lastChild;return!Rq({node:o,types:n})},apply:(i,s)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return s;const o=i.doc.lastChild;return!Rq({node:o,types:n})}}})]}}),__e=ar.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>ese(t,e),redo:()=>({state:t,dispatch:e})=>tse(t,e)}},addProseMirrorPlugins(){return[v_e(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),E_e=ar.create({name:"starterKit",addExtensions(){var t,e,r,n;const i=[];return this.options.bold!==!1&&i.push(Qwe.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(Hwe.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(Bie.configure(this.options.bulletList)),this.options.code!==!1&&i.push(Zwe.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(rSe.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(nSe.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(b_e.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(x_e.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(iSe.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(sSe.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(__e.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(oSe.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(dSe.configure(this.options.italic)),this.options.listItem!==!1&&i.push(zie.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(Gie.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(Lie.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(Qie.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(YSe.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(JSe.configure(this.options.strike)),this.options.text!==!1&&i.push(ZSe.configure(this.options.text)),this.options.underline!==!1&&i.push(e_e.configure((r=this.options)==null?void 0:r.underline)),this.options.trailingNode!==!1&&i.push(S_e.configure((n=this.options)==null?void 0:n.trailingNode)),i}}),C_e=E_e,N_e=w_e;const Qo=({onClick:t,isActive:e,disabled:r,children:n,title:i})=>d.jsx("button",{type:"button",onClick:t,disabled:r,title:i,className:`p-1.5 rounded hover:bg-gray-100 transition-colors ${e?"bg-gray-200 text-primary-600":"text-gray-600"} ${r?"opacity-50 cursor-not-allowed":""}`,children:n}),k_e=({editor:t})=>{if(!t)return null;const e=()=>{const r=t.getAttributes("link").href,n=window.prompt("Enter URL:",r);if(n===null)return;if(n===""){t.chain().focus().extendMarkRange("link").unsetLink().run();return}const i=n.match(/^https?:\/\//)?n:`https://${n}`;t.chain().focus().extendMarkRange("link").setLink({href:i}).run()};return d.jsxs("div",{className:"flex items-center gap-0.5 p-1.5 border-b border-gray-200 bg-gray-50 rounded-t-md",children:[d.jsx(Qo,{onClick:()=>t.chain().focus().toggleBold().run(),isActive:t.isActive("bold"),title:"Bold (Cmd+B)",children:d.jsx(Spe,{className:"w-4 h-4"})}),d.jsx(Qo,{onClick:()=>t.chain().focus().toggleItalic().run(),isActive:t.isActive("italic"),title:"Italic (Cmd+I)",children:d.jsx(Ope,{className:"w-4 h-4"})}),d.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),d.jsx(Qo,{onClick:()=>t.chain().focus().toggleBulletList().run(),isActive:t.isActive("bulletList"),title:"Bullet list",children:d.jsx(Ppe,{className:"w-4 h-4"})}),d.jsx(Qo,{onClick:()=>t.chain().focus().toggleOrderedList().run(),isActive:t.isActive("orderedList"),title:"Numbered list",children:d.jsx(jpe,{className:"w-4 h-4"})}),d.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),d.jsx(Qo,{onClick:e,isActive:t.isActive("link"),title:"Add link",children:d.jsx(yM,{className:"w-4 h-4"})}),t.isActive("link")&&d.jsx(Qo,{onClick:()=>t.chain().focus().unsetLink().run(),title:"Remove link",children:d.jsx(zpe,{className:"w-4 h-4"})}),d.jsx("div",{className:"flex-1"}),d.jsx(Qo,{onClick:()=>t.chain().focus().undo().run(),disabled:!t.can().undo(),title:"Undo (Cmd+Z)",children:d.jsx(Bpe,{className:"w-4 h-4"})}),d.jsx(Qo,{onClick:()=>t.chain().focus().redo().run(),disabled:!t.can().redo(),title:"Redo (Cmd+Shift+Z)",children:d.jsx(Dpe,{className:"w-4 h-4"})})]})};function rse({value:t="",onChange:e,placeholder:r="Write something...",disabled:n=!1,minHeight:i="120px",autoFocus:s=!1}){const o=Lwe({extensions:[C_e.configure({heading:!1,codeBlock:!1,blockquote:!1}),N_e.configure({placeholder:r}),DSe.configure({openOnClick:!1,HTMLAttributes:{class:"text-primary-600 hover:text-primary-700 underline"}})],content:t,editable:!n,autofocus:s,onUpdate:({editor:a})=>{const l=a.getHTML();e(l==="<p></p>"||l===""?"":l)}});if(o&&t!==o.getHTML()&&t!==""){const a=o.getHTML();t&&(a==="<p></p>"||a===""||t!==a)&&o.commands.setContent(t,!1)}return d.jsxs("div",{className:`border border-gray-300 rounded-md overflow-hidden focus-within:ring-2 focus-within:ring-primary-500 focus-within:border-transparent ${n?"bg-gray-100 opacity-60":"bg-white"}`,children:[d.jsx(k_e,{editor:o}),d.jsx(Rwe,{editor:o,className:"prose prose-sm max-w-none",style:{minHeight:i}}),d.jsx("style",{children:`
        .ProseMirror {
          padding: 0.75rem;
          min-height: ${i};
          outline: none;
        }
        .ProseMirror p.is-editor-empty:first-child::before {
          content: attr(data-placeholder);
          float: left;
          color: #9ca3af;
          pointer-events: none;
          height: 0;
        }
        .ProseMirror ul,
        .ProseMirror ol {
          padding-left: 1.5rem;
        }
        .ProseMirror ul {
          list-style-type: disc;
        }
        .ProseMirror ol {
          list-style-type: decimal;
        }
        .ProseMirror li {
          margin-bottom: 0.25rem;
        }
        .ProseMirror p {
          margin-bottom: 0.5rem;
        }
        .ProseMirror p:last-child {
          margin-bottom: 0;
        }
      `})]})}function Bv(t){if(!t)return!0;const e=t.trim();return e===""||e==="<p></p>"||e==="<p><br></p>"}const nx=[{id:"call",label:"Phone call",icon:bM},{id:"email",label:"Email",icon:vM},{id:"chat",label:"Chat",icon:k0},{id:"meeting",label:"Meeting",icon:Fs},{id:"coffee",label:"Coffee",icon:Pte},{id:"lunch",label:"Lunch",icon:Lte},{id:"note",label:"Other",icon:N0}];function mA({isOpen:t,onClose:e,onSubmit:r,isLoading:n,personId:i,initialData:s=null,activity:o=null}){const[a,l]=k.useState("call"),[c,u]=k.useState(""),[h,f]=k.useState(""),[p,m]=k.useState(""),[g,v]=k.useState([]),[y,b]=k.useState(!1),[w,x]=k.useState(""),{data:S}=Uc(),_=!!o;if(k.useEffect(()=>{if(t){const R=new Date,B=R.toISOString().split("T")[0],q=R.toTimeString().slice(0,5);o?(u(o.activity_date||B),f(o.activity_time||""),m(o.content||""),v(o.participants||[]),l(o.activity_type||"note")):s?(u(s.activity_date||B),f(s.activity_time||q),m(s.content||""),v(s.participants||[]),l(s.activity_type||"note")):(u(B),f(q),m(""),v([]),l("call"))}},[t,s,o]),!t)return null;const C=(S||[]).filter(R=>R.id.toString()!==(i==null?void 0:i.toString())),E=C.filter(R=>{var B;return(B=R.name)==null?void 0:B.toLowerCase().includes(w.toLowerCase())}),N=R=>{R.preventDefault(),!Bv(p)&&(r({activity_type:a,activity_date:c||null,activity_time:h||null,content:p,participants:g}),m(""),v([]),u(new Date().toISOString().split("T")[0]),f(new Date().toTimeString().slice(0,5)))},T=()=>{m(""),v([]),u(""),f(""),b(!1),x(""),e()},j=R=>{v(B=>B.includes(R)?B.filter(q=>q!==R):[...B,R])},P=R=>{v(B=>B.filter(q=>q!==R))},O=()=>C.filter(R=>g.includes(R.id)),D=R=>{if(!R)return"";try{return new Date(R).toISOString().split("T")[0]}catch{return""}};return(nx.find(R=>R.id===a)||nx[0]).icon,d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b sticky top-0 bg-white z-10",children:[d.jsx("h2",{className:"text-lg font-semibold",children:_?"Edit activity":"Add activity"}),d.jsx("button",{onClick:T,className:"text-gray-400 hover:text-gray-600",disabled:n,children:d.jsx(Rt,{className:"w-5 h-5"})})]}),d.jsxs("form",{onSubmit:N,className:"p-4",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"space-y-4 md:col-span-1",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Activity type"}),d.jsx("div",{className:"grid grid-cols-3 gap-2",children:nx.map(R=>{const B=R.icon,q=a===R.id;return d.jsxs("button",{type:"button",onClick:()=>l(R.id),className:`flex flex-col items-center justify-center p-3 border-2 rounded-lg transition-colors ${q?"border-primary-600 bg-primary-50 text-primary-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,disabled:n,children:[d.jsx(B,{className:"w-5 h-5 mb-1"}),d.jsx("span",{className:"text-xs",children:R.label})]},R.id)})})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"activity-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),d.jsx("input",{id:"activity-date",type:"date",value:D(c),onChange:R=>u(R.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"activity-time",className:"block text-sm font-medium text-gray-700 mb-2",children:"Time"}),d.jsx("input",{id:"activity-time",type:"time",value:h,onChange:R=>f(R.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Participants (optional)"}),O().length>0&&d.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:O().map(R=>d.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-700 rounded-full text-sm",children:[R.name,d.jsx("button",{type:"button",onClick:()=>P(R.id),className:"hover:text-primary-900",disabled:n,children:d.jsx(Rt,{className:"w-3 h-3"})})]},R.id))}),d.jsxs("div",{className:"relative",children:[d.jsx("button",{type:"button",onClick:()=>b(!y),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-left text-sm text-gray-500 hover:border-gray-400",disabled:n,children:g.length===0?"Add participants...":"Add more participants..."}),y&&d.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[d.jsx("div",{className:"p-2 border-b",children:d.jsx("input",{type:"text",placeholder:"Search people...",value:w,onChange:R=>x(R.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded",autoFocus:!0})}),d.jsx("div",{className:"max-h-48 overflow-y-auto",children:E.length===0?d.jsx("div",{className:"p-3 text-sm text-gray-500 text-center",children:"No people found"}):E.map(R=>{var q;const B=g.includes(R.id);return d.jsxs("button",{type:"button",onClick:()=>j(R.id),className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2 ${B?"bg-primary-50":""}`,children:[d.jsx("input",{type:"checkbox",checked:B,onChange:()=>{},className:"mr-1"}),R.thumbnail?d.jsx("img",{src:R.thumbnail,alt:R.name,className:"w-6 h-6 rounded-full"}):d.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:d.jsx("span",{className:"text-xs text-gray-500",children:((q=R.first_name)==null?void 0:q[0])||"?"})}),d.jsx("span",{children:R.name})]},R.id)})})]})]})]})]}),d.jsxs("div",{className:"flex flex-col md:col-span-2",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),d.jsx("div",{className:"flex-1",children:d.jsx(rse,{value:p,onChange:m,placeholder:"What happened? Add your call notes, chat summary, meeting notes...",disabled:n,minHeight:"280px"})})]})]}),d.jsxs("div",{className:"flex justify-end gap-2 mt-6 pt-4 border-t",children:[d.jsx("button",{type:"button",onClick:T,className:"btn-secondary",disabled:n,children:"Cancel"}),d.jsx("button",{type:"submit",className:"btn-primary",disabled:n||Bv(p),children:n?_?"Saving...":"Adding...":_?"Save":"Add activity"})]})]})]})})}function Xo({title:t,value:e,icon:r,href:n}){return d.jsx(Ye,{to:n,className:"card p-6 hover:shadow-md transition-shadow",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium text-gray-500",children:t}),d.jsx("p",{className:"mt-1 text-3xl font-semibold",children:e})]}),d.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:d.jsx(r,{className:"w-6 h-6 text-primary-600"})})]})})}function ix({person:t,hideStar:e=!1}){var r,n;return d.jsxs(Ye,{to:`/people/${t.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[t.thumbnail?d.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-10 h-10 rounded-full object-cover"}):d.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:d.jsx("span",{className:"text-sm font-medium text-gray-500",children:((r=t.first_name)==null?void 0:r[0])||"?"})}),d.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[d.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.name}),((n=t.labels)==null?void 0:n.length)>0&&d.jsx("p",{className:"text-xs text-gray-500 truncate",children:t.labels.join(", ")})]}),t.is_favorite&&!e&&d.jsx($d,{className:"w-4 h-4 text-yellow-400 fill-current"})]})}function T_e({reminder:t}){var o,a,l;const e=t.days_until;let r="bg-gray-100 text-gray-700";e===0?r="bg-green-100 text-green-700":e<=3?r="bg-orange-100 text-orange-700":e<=7&&(r="bg-yellow-100 text-yellow-700");const n=(a=(o=t.related_people)==null?void 0:o[0])==null?void 0:a.id,i=((l=t.related_people)==null?void 0:l.length)>0,s=d.jsxs(d.Fragment,{children:[d.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${r}`,children:e===0?"Today":`${e}d`}),d.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[d.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.title}),d.jsx("p",{className:"text-xs text-gray-500",children:Cn(new Date(t.next_occurrence),"MMMM d, yyyy")})]}),i&&d.jsx("div",{className:"flex -space-x-2 ml-3 flex-shrink-0",children:t.related_people.slice(0,3).map(c=>{var u;return c.thumbnail?d.jsx("img",{src:c.thumbnail,alt:c.name,loading:"lazy",className:"w-10 h-10 rounded-full border-2 border-white object-cover"},c.id):d.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full border-2 border-white flex items-center justify-center",children:d.jsx("span",{className:"text-sm",children:(u=c.name)==null?void 0:u[0]})},c.id)})})]});return i&&n?d.jsx(Ye,{to:`/people/${n}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:s}):d.jsx("div",{className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:s})}function O_e({todo:t,onToggle:e}){var n;const r=rm(t);return d.jsxs(Ye,{to:`/people/${t.person_id}`,className:"flex items-start p-3 rounded-lg hover:bg-gray-50 transition-colors group",children:[d.jsx("button",{onClick:i=>{i.preventDefault(),i.stopPropagation(),e(t)},className:"mt-0.5 mr-3 flex-shrink-0",title:t.is_completed?"Mark as incomplete":"Mark as complete",children:t.is_completed?d.jsx($s,{className:"w-5 h-5 text-primary-600"}):d.jsx(Dd,{className:`w-5 h-5 ${r?"text-red-600":"text-gray-400"}`})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:`text-sm font-medium ${t.is_completed?"line-through text-gray-400":r?"text-red-600":"text-gray-900"}`,children:t.content}),d.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.person_thumbnail?d.jsx("img",{src:t.person_thumbnail,alt:t.person_name,loading:"lazy",className:"w-5 h-5 rounded-full object-cover"}):d.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center",children:d.jsx("span",{className:"text-xs text-gray-500",children:(n=t.person_name)==null?void 0:n[0]})}),d.jsx("span",{className:"text-xs text-gray-500 truncate",children:t.person_name})]})]}),t.due_date&&d.jsxs("div",{className:`ml-3 text-xs text-right flex-shrink-0 ${r&&!t.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:[d.jsx("div",{children:Cn(new Date(t.due_date),"MMM d")}),r&&!t.is_completed&&d.jsx("div",{className:"text-red-600",children:"overdue"})]})]})}function j_e(){return d.jsxs("div",{className:"card p-12 text-center",children:[d.jsx("div",{className:"flex justify-center mb-4",children:d.jsx("div",{className:"p-4 bg-primary-50 rounded-full",children:d.jsx($te,{className:"w-12 h-12 text-primary-600"})})}),d.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:["Welcome to ",Nc,"!"]}),d.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"Get started by adding your first contact, organization, or important date. Your dashboard will populate as you add more information."}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[d.jsxs(Ye,{to:"/people/new",className:"inline-flex items-center px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[d.jsx(Jt,{className:"w-5 h-5 mr-2"}),"Add Your First Person"]}),d.jsxs(Ye,{to:"/companies/new",className:"inline-flex items-center px-6 py-3 bg-white text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[d.jsx(Jt,{className:"w-5 h-5 mr-2"}),"Add Your First Organization"]})]})]})}function P_e(){var T,j,P;const{data:t,isLoading:e,error:r}=Kpe(),{data:n}=zte(!1),i=Vte(),s=xM(),[o,a]=k.useState(null),[l,c]=k.useState(!1),[u,h]=k.useState(!1),[f,p]=k.useState(null),m=O=>{if(!O.is_completed){a(O),c(!0);return}i.mutate({todoId:O.id,data:{content:O.content,due_date:O.due_date,is_completed:!1}})},g=()=>{o&&(i.mutate({todoId:o.id,data:{content:o.content,due_date:o.due_date,is_completed:!0}}),c(!1),a(null))},v=()=>{if(!o)return;const O=new Date().toISOString().split("T")[0];p({content:o.content,activity_date:O,activity_type:"note",participants:[]}),c(!1),h(!0)},y=async O=>{if(o)try{await s.mutateAsync({personId:o.person_id,data:O}),await i.mutateAsync({todoId:o.id,data:{content:o.content,due_date:o.due_date,is_completed:!0}}),h(!1),a(null),p(null)}catch(D){console.error("Failed to create activity:",D),alert("Failed to create activity. Please try again.")}};if(e)return d.jsx("div",{className:"flex items-center justify-center h-64",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(r){const O=((T=r==null?void 0:r.response)==null?void 0:T.status)>=500||!(r!=null&&r.response);return d.jsx("div",{className:"card p-8 text-center",children:d.jsx("div",{className:"text-red-600 mb-2",children:O?d.jsxs(d.Fragment,{children:[d.jsx("p",{className:"font-medium mb-1",children:"Failed to load dashboard data"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Please check your connection and try refreshing the page."})]}):d.jsxs(d.Fragment,{children:[d.jsx("p",{className:"font-medium mb-1",children:"Unable to load dashboard"}),d.jsx("p",{className:"text-sm text-gray-600",children:((P=(j=r==null?void 0:r.response)==null?void 0:j.data)==null?void 0:P.message)||"An error occurred while loading your data."})]})})})}const{stats:b,recent_people:w,upcoming_reminders:x,favorites:S,recently_contacted:_}=t||{};if(((b==null?void 0:b.total_people)||0)+((b==null?void 0:b.total_companies)||0)+((b==null?void 0:b.total_dates)||0)===0)return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsx(Xo,{title:"Total people",value:0,icon:Fs,href:"/people"}),d.jsx(Xo,{title:"Organizations",value:0,icon:kr,href:"/companies"}),d.jsx(Xo,{title:"Events",value:0,icon:yo,href:"/dates"}),d.jsx(Xo,{title:"Open todos",value:0,icon:$s,href:"/todos"})]}),d.jsx(j_e,{})]});const N=(n==null?void 0:n.slice(0,5))||[];return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsx(Xo,{title:"Total people",value:(b==null?void 0:b.total_people)||0,icon:Fs,href:"/people"}),d.jsx(Xo,{title:"Organizations",value:(b==null?void 0:b.total_companies)||0,icon:kr,href:"/companies"}),d.jsx(Xo,{title:"Events",value:(b==null?void 0:b.total_dates)||0,icon:yo,href:"/dates"}),d.jsx(Xo,{title:"Open todos",value:(b==null?void 0:b.open_todos_count)||0,icon:$s,href:"/todos"})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[d.jsxs("h2",{className:"font-semibold flex items-center",children:[d.jsx(yo,{className:"w-5 h-5 mr-2 text-gray-500"}),"Upcoming reminders"]}),d.jsxs(Ye,{to:"/dates",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all reminders",d.jsx(g1,{className:"w-4 h-4 ml-1"})]})]}),d.jsx("div",{className:"divide-y divide-gray-100",children:(x==null?void 0:x.length)>0?x.map(O=>d.jsx(T_e,{reminder:O},O.id)):d.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No upcoming reminders"})})]}),d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[d.jsxs("h2",{className:"font-semibold flex items-center",children:[d.jsx($s,{className:"w-5 h-5 mr-2 text-gray-500"}),"Open todos"]}),d.jsxs(Ye,{to:"/todos",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all todos",d.jsx(g1,{className:"w-4 h-4 ml-1"})]})]}),d.jsx("div",{className:"divide-y divide-gray-100",children:N.length>0?N.map(O=>d.jsx(O_e,{todo:O,onToggle:m},O.id)):d.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No open todos"})})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"card",children:[d.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:d.jsxs("h2",{className:"font-semibold flex items-center",children:[d.jsx($d,{className:"w-5 h-5 mr-2 text-yellow-500 fill-current"}),"Favorites"]})}),(S==null?void 0:S.length)>0?d.jsx("div",{className:"divide-y divide-gray-100",children:S.slice(0,5).map(O=>d.jsx(ix,{person:O,hideStar:!0},O.id))}):d.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No favorites yet"})]}),d.jsxs("div",{className:"card",children:[d.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:d.jsxs("h2",{className:"font-semibold flex items-center",children:[d.jsx(k0,{className:"w-5 h-5 mr-2 text-gray-500"}),"Recently contacted"]})}),(_==null?void 0:_.length)>0?d.jsx("div",{className:"divide-y divide-gray-100",children:_.map(O=>d.jsx(ix,{person:O},O.id))}):d.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No recent activities yet"})]}),d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[d.jsxs("h2",{className:"font-semibold flex items-center",children:[d.jsx(Fs,{className:"w-5 h-5 mr-2 text-gray-500"}),"Recently edited"]}),d.jsxs(Ye,{to:"/people",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all",d.jsx(g1,{className:"w-4 h-4 ml-1"})]})]}),d.jsx("div",{className:"divide-y divide-gray-100",children:(w==null?void 0:w.length)>0?w.map(O=>d.jsx(ix,{person:O},O.id)):d.jsxs("p",{className:"p-4 text-sm text-gray-500 text-center",children:["No people yet. ",d.jsx(Ye,{to:"/people/new",className:"text-primary-600",children:"Add someone"})]})})]})]}),d.jsx(TM,{isOpen:l,onClose:()=>{c(!1),a(null)},todo:o,onComplete:g,onCompleteAsActivity:v}),d.jsx(mA,{isOpen:u,onClose:()=>{h(!1),a(null),p(null)},onSubmit:y,isLoading:s.isPending,personId:o==null?void 0:o.person_id,initialData:f})]})}function Mq(t){var i;const e=((i=t.acf)==null?void 0:i.work_history)||[];if(e.length===0)return null;const r=e.find(s=>s.is_current&&s.company);if(r)return r.company;const n=e.filter(s=>s.company).sort((s,o)=>{const a=s.start_date?new Date(s.start_date):new Date(0);return(o.start_date?new Date(o.start_date):new Date(0))-a});return n.length>0?n[0].company:null}function I_e({person:t,companyName:e,isDeceased:r}){var n,i;return d.jsx(Ye,{to:`/people/${t.id}`,className:"card p-4 hover:shadow-md transition-shadow",children:d.jsxs("div",{className:"flex items-start",children:[t.thumbnail?d.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-12 h-12 rounded-full object-cover"}):d.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:d.jsx("span",{className:"text-lg font-medium text-gray-500",children:((n=t.first_name)==null?void 0:n[0])||"?"})}),d.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsxs("h3",{className:"text-sm font-medium text-gray-900 truncate",children:[t.name,r&&d.jsx("span",{className:"ml-1 text-gray-500",children:""})]}),t.is_favorite&&d.jsx($d,{className:"w-4 h-4 ml-1 text-yellow-400 fill-current flex-shrink-0"})]}),e&&d.jsx("p",{className:"text-xs text-gray-500 mt-0.5 truncate",children:e}),((i=t.labels)==null?void 0:i.length)>0&&d.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.labels.slice(0,3).map(s=>d.jsx("span",{className:"inline-flex px-2 py-0.5 text-xs rounded-full bg-gray-100 text-gray-600",children:s},s))})]})]})})}function R_e(){const[t,e]=k.useState(!1),[r,n]=k.useState(!1),[i,s]=k.useState([]),[o,a]=k.useState(""),[l,c]=k.useState(""),[u,h]=k.useState("first_name"),[f,p]=k.useState("asc"),[m,g]=k.useState(!1),[v,y]=k.useState(!1),b=k.useRef(null),w=k.useRef(null),x=ms(),S=vt(),{data:_,isLoading:C,error:E}=Uc(),N=tt({mutationFn:async F=>{const X=[];F.email&&X.push({contact_type:"email",contact_value:F.email,contact_label:"Email"}),F.phone&&X.push({contact_type:F.phone_type||"mobile",contact_value:F.phone,contact_label:F.phone_type==="mobile"?"Mobile":"Phone"});const Q={title:`${F.first_name} ${F.last_name}`.trim(),status:"publish",acf:{first_name:F.first_name,last_name:F.last_name,nickname:F.nickname,gender:F.gender||null,how_we_met:F.how_we_met,is_favorite:F.is_favorite,contact_info:X}},Ce=await qe.createPerson(Q),xe=Ce.data.id;if(F.email)try{await Ae.sideloadGravatar(xe,F.email)}catch(Be){console.error("Failed to load Gravatar:",Be)}if(F.birthday&&F.birthdayType)try{await qe.createDate({title:`${F.first_name}'s Birthday`,status:"publish",date_type:[F.birthdayType.id],acf:{date_value:F.birthday,is_recurring:!0,related_people:[xe]}})}catch(Be){console.error("Failed to create birthday:",Be)}return Ce.data},onSuccess:F=>{S.invalidateQueries({queryKey:["people"]}),S.invalidateQueries({queryKey:["dashboard"]}),S.invalidateQueries({queryKey:["reminders"]}),g(!1),x(`/people/${F.id}`)}}),T=async F=>{y(!0);try{await N.mutateAsync(F)}finally{y(!1)}},{data:j}=lt({queryKey:["person-labels"],queryFn:async()=>(await qe.getPersonLabels()).data}),P=(j==null?void 0:j.map(F=>F.name))||[],O=k.useMemo(()=>{if(!_)return[];const F=_.map(X=>X.birth_year).filter(X=>X!=null);return[...new Set(F)].sort((X,Q)=>Q-X)},[_]);k.useEffect(()=>{const F=X=>{w.current&&!w.current.contains(X.target)&&b.current&&!b.current.contains(X.target)&&e(!1)};return document.addEventListener("mousedown",F),()=>{document.removeEventListener("mousedown",F)}},[]);const D=k.useMemo(()=>{if(!_)return[];let F=[..._];if(r&&(F=F.filter(X=>X.is_favorite)),i.length>0&&(F=F.filter(X=>{const Q=X.labels||[];return i.some(Ce=>Q.includes(Ce))})),o){const X=parseInt(o,10);F=F.filter(Q=>Q.birth_year===X)}if(l){const X=new Date;let Q;switch(l){case"7":Q=new Date(X.setDate(X.getDate()-7));break;case"30":Q=new Date(X.setDate(X.getDate()-30));break;case"90":Q=new Date(X.setDate(X.getDate()-90));break;case"365":Q=new Date(X.setDate(X.getDate()-365));break;default:Q=null}Q&&(F=F.filter(Ce=>Ce.modified?new Date(Ce.modified)>=Q:!1))}return F.sort((X,Q)=>{var at,Kr,Sr,Wt,jr,nt,yn,$n;let Ce,xe;if(u==="modified"){Ce=X.modified?new Date(X.modified).getTime():0,xe=Q.modified?new Date(Q.modified).getTime():0;const Pr=Ce-xe;return f==="asc"?Pr:-Pr}if(u==="first_name"?(Ce=(((at=X.acf)==null?void 0:at.first_name)||X.first_name||"").toLowerCase(),xe=(((Kr=Q.acf)==null?void 0:Kr.first_name)||Q.first_name||"").toLowerCase()):(Ce=(((Sr=X.acf)==null?void 0:Sr.last_name)||X.last_name||"").toLowerCase(),xe=(((Wt=Q.acf)==null?void 0:Wt.last_name)||Q.last_name||"").toLowerCase()),Ce===xe){const Pr=u==="first_name"?(((jr=X.acf)==null?void 0:jr.last_name)||X.last_name||"").toLowerCase():(((nt=X.acf)==null?void 0:nt.first_name)||X.first_name||"").toLowerCase(),gt=u==="first_name"?(((yn=Q.acf)==null?void 0:yn.last_name)||Q.last_name||"").toLowerCase():((($n=Q.acf)==null?void 0:$n.first_name)||Q.first_name||"").toLowerCase(),rr=Pr.localeCompare(gt);return f==="asc"?rr:-rr}const Be=Ce.localeCompare(xe);return f==="asc"?Be:-Be})},[_,r,i,o,l,u,f]),z=r||i.length>0||o||l,R=F=>{s(X=>X.includes(F)?X.filter(Q=>Q!==F):[...X,F])},B=()=>{n(!1),s([]),a(""),c("")},q=k.useMemo(()=>{if(!D)return[];const F=D.map(X=>Mq(X)).filter(Boolean);return[...new Set(F)]},[D]),{data:$}=lt({queryKey:["companies","batch",q.sort().join(",")],queryFn:async()=>q.length===0?[]:(await qe.getCompanies({per_page:100,include:q.join(",")})).data,enabled:q.length>0}),K=k.useMemo(()=>{const F={};return $&&$.forEach(X=>{F[X.id]=cr(X)}),F},[$]),W=k.useMemo(()=>{const F={};return D.forEach(X=>{const Q=Mq(X);Q&&K[Q]&&(F[X.id]=K[Q])}),F},[D,K]);return d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:d.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[d.jsxs("div",{className:"flex items-center gap-2 border border-gray-200 rounded-lg p-1",children:[d.jsxs("select",{value:u,onChange:F=>h(F.target.value),className:"text-sm border-0 bg-transparent focus:ring-0 focus:outline-none cursor-pointer",children:[d.jsx("option",{value:"first_name",children:"First name"}),d.jsx("option",{value:"last_name",children:"Last name"}),d.jsx("option",{value:"modified",children:"Last modified"})]}),d.jsx("div",{className:"h-4 w-px bg-gray-300"}),d.jsx("button",{onClick:()=>p(f==="asc"?"desc":"asc"),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:`Sort ${f==="asc"?"descending":"ascending"}`,children:f==="asc"?d.jsx(xpe,{className:"w-4 h-4 text-gray-600"}):d.jsx(bpe,{className:"w-4 h-4 text-gray-600"})})]}),d.jsxs("div",{className:"relative",ref:b,children:[d.jsxs("button",{onClick:()=>e(!t),className:`btn-secondary ${z?"bg-primary-50 text-primary-700 border-primary-200":""}`,children:[d.jsx(sI,{className:"w-4 h-4 md:mr-2"}),d.jsx("span",{className:"hidden md:inline",children:"Filter"}),z&&d.jsx("span",{className:"ml-2 px-1.5 py-0.5 bg-primary-600 text-white text-xs rounded-full",children:i.length+(r?1:0)+(o?1:0)+(l?1:0)})]}),t&&d.jsx("div",{ref:w,className:"absolute top-full left-0 mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:d.jsxs("div",{className:"p-4 space-y-4",children:[d.jsx("div",{children:d.jsxs("label",{className:"flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:r,onChange:F=>n(F.target.checked),className:"sr-only"}),d.jsx("div",{className:`flex items-center justify-center w-5 h-5 border-2 rounded mr-3 ${r?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:r&&d.jsx(BF,{className:"w-3 h-3 text-white"})}),d.jsxs("div",{className:"flex items-center",children:[d.jsx($d,{className:"w-4 h-4 mr-2 text-yellow-400 fill-current"}),d.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Favorites only"})]})]})}),P.length>0&&d.jsxs("div",{children:[d.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Labels"}),d.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:P.map(F=>d.jsxs("label",{className:"flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded",children:[d.jsx("input",{type:"checkbox",checked:i.includes(F),onChange:()=>R(F),className:"sr-only"}),d.jsx("div",{className:`flex items-center justify-center w-5 h-5 border-2 rounded mr-3 ${i.includes(F)?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:i.includes(F)&&d.jsx(BF,{className:"w-3 h-3 text-white"})}),d.jsx("span",{className:"text-sm text-gray-700",children:F})]},F))})]}),O.length>0&&d.jsxs("div",{children:[d.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Birth year"}),d.jsxs("select",{value:o,onChange:F=>a(F.target.value),className:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[d.jsx("option",{value:"",children:"All years"}),O.map(F=>d.jsx("option",{value:F,children:F},F))]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Last modified"}),d.jsxs("select",{value:l,onChange:F=>c(F.target.value),className:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",children:[d.jsx("option",{value:"",children:"Any time"}),d.jsx("option",{value:"7",children:"Last 7 days"}),d.jsx("option",{value:"30",children:"Last 30 days"}),d.jsx("option",{value:"90",children:"Last 90 days"}),d.jsx("option",{value:"365",children:"Last year"})]})]}),z&&d.jsx("button",{onClick:B,className:"w-full text-sm text-primary-600 hover:text-primary-700 font-medium pt-2 border-t border-gray-200",children:"Clear all filters"})]})})]}),z&&d.jsxs("div",{className:"flex flex-wrap gap-2",children:[r&&d.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-800 rounded-full text-xs",children:[d.jsx($d,{className:"w-3 h-3"}),"Favorites",d.jsx("button",{onClick:()=>n(!1),className:"hover:text-primary-600",children:d.jsx(Rt,{className:"w-3 h-3"})})]}),i.map(F=>d.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:[F,d.jsx("button",{onClick:()=>R(F),className:"hover:text-gray-600",children:d.jsx(Rt,{className:"w-3 h-3"})})]},F)),o&&d.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:["Born ",o,d.jsx("button",{onClick:()=>a(""),className:"hover:text-gray-600",children:d.jsx(Rt,{className:"w-3 h-3"})})]}),l&&d.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:["Modified: ",l==="7"?"Last 7 days":l==="30"?"Last 30 days":l==="90"?"Last 90 days":"Last year",d.jsx("button",{onClick:()=>c(""),className:"hover:text-gray-600",children:d.jsx(Rt,{className:"w-3 h-3"})})]})]}),d.jsxs("button",{onClick:()=>g(!0),className:"btn-primary",children:[d.jsx(Jt,{className:"w-4 h-4 md:mr-2"}),d.jsx("span",{className:"hidden md:inline",children:"Add person"})]})]})}),C&&d.jsx("div",{className:"flex items-center justify-center h-64",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),E&&d.jsx("div",{className:"card p-6 text-center",children:d.jsx("p",{className:"text-red-600",children:"Failed to load people."})}),!C&&!E&&(_==null?void 0:_.length)===0&&d.jsxs("div",{className:"card p-12 text-center",children:[d.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx(Jt,{className:"w-6 h-6 text-gray-400"})}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No people found"}),d.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by adding your first person."}),d.jsxs("button",{onClick:()=>g(!0),className:"btn-primary",children:[d.jsx(Jt,{className:"w-4 h-4 md:mr-2"}),d.jsx("span",{className:"hidden md:inline",children:"Add person"})]})]}),!C&&!E&&(D==null?void 0:D.length)>0&&d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:D.map(F=>d.jsx(I_e,{person:F,companyName:W[F.id],isDeceased:F.is_deceased},F.id))}),!C&&!E&&(_==null?void 0:_.length)>0&&(D==null?void 0:D.length)===0&&d.jsxs("div",{className:"card p-12 text-center",children:[d.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx(sI,{className:"w-6 h-6 text-gray-400"})}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No people match your filters"}),d.jsx("p",{className:"text-gray-500 mb-4",children:"Try adjusting your filters to see more results."}),d.jsx("button",{onClick:B,className:"btn-secondary",children:"Clear filters"})]}),d.jsx(CM,{isOpen:m,onClose:()=>g(!1),onSubmit:T,isLoading:v})]})}const M_e="#0285FF",A_e=k.forwardRef(function({title:e="Bluesky",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=M_e),d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[d.jsx("title",{children:e}),d.jsx("path",{d:"M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479.815 2.736 3.713 3.66 6.383 3.364.136-.02.275-.039.415-.056-.138.022-.276.04-.415.056-3.912.58-7.387 2.005-2.83 7.078 5.013 5.19 6.87-1.113 7.823-4.308.953 3.195 2.05 9.271 7.733 4.308 4.267-4.308 1.172-6.498-2.74-7.078a8.741 8.741 0 0 1-.415-.056c.14.017.279.036.415.056 2.67.297 5.568-.628 6.383-3.364.246-.828.624-5.79.624-6.478 0-.69-.139-1.861-.902-2.206-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8Z"})]})}),D_e="#0866FF",$_e=k.forwardRef(function({title:e="Facebook",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=D_e),d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[d.jsx("title",{children:e}),d.jsx("path",{d:"M9.101 23.691v-7.98H6.627v-3.667h2.474v-1.58c0-4.085 1.848-5.978 5.858-5.978.401 0 .955.042 1.468.103a8.68 8.68 0 0 1 1.141.195v3.325a8.623 8.623 0 0 0-.653-.036 26.805 26.805 0 0 0-.733-.009c-.707 0-1.259.096-1.675.309a1.686 1.686 0 0 0-.679.622c-.258.42-.374.995-.374 1.752v1.297h3.919l-.386 2.103-.287 1.564h-3.246v8.245C19.396 23.238 24 18.179 24 12.044c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.628 3.874 10.35 9.101 11.647Z"})]})}),F_e="#FF0069",q_e=k.forwardRef(function({title:e="Instagram",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=F_e),d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[d.jsx("title",{children:e}),d.jsx("path",{d:"M7.0301.084c-1.2768.0602-2.1487.264-2.911.5634-.7888.3075-1.4575.72-2.1228 1.3877-.6652.6677-1.075 1.3368-1.3802 2.127-.2954.7638-.4956 1.6365-.552 2.914-.0564 1.2775-.0689 1.6882-.0626 4.947.0062 3.2586.0206 3.6671.0825 4.9473.061 1.2765.264 2.1482.5635 2.9107.308.7889.72 1.4573 1.388 2.1228.6679.6655 1.3365 1.0743 2.1285 1.38.7632.295 1.6361.4961 2.9134.552 1.2773.056 1.6884.069 4.9462.0627 3.2578-.0062 3.668-.0207 4.9478-.0814 1.28-.0607 2.147-.2652 2.9098-.5633.7889-.3086 1.4578-.72 2.1228-1.3881.665-.6682 1.0745-1.3378 1.3795-2.1284.2957-.7632.4966-1.636.552-2.9124.056-1.2809.0692-1.6898.063-4.948-.0063-3.2583-.021-3.6668-.0817-4.9465-.0607-1.2797-.264-2.1487-.5633-2.9117-.3084-.7889-.72-1.4568-1.3876-2.1228C21.2982 1.33 20.628.9208 19.8378.6165 19.074.321 18.2017.1197 16.9244.0645 15.6471.0093 15.236-.005 11.977.0014 8.718.0076 8.31.0215 7.0301.0839m.1402 21.6932c-1.17-.0509-1.8053-.2453-2.2287-.408-.5606-.216-.96-.4771-1.3819-.895-.422-.4178-.6811-.8186-.9-1.378-.1644-.4234-.3624-1.058-.4171-2.228-.0595-1.2645-.072-1.6442-.079-4.848-.007-3.2037.0053-3.583.0607-4.848.05-1.169.2456-1.805.408-2.2282.216-.5613.4762-.96.895-1.3816.4188-.4217.8184-.6814 1.3783-.9003.423-.1651 1.0575-.3614 2.227-.4171 1.2655-.06 1.6447-.072 4.848-.079 3.2033-.007 3.5835.005 4.8495.0608 1.169.0508 1.8053.2445 2.228.408.5608.216.96.4754 1.3816.895.4217.4194.6816.8176.9005 1.3787.1653.4217.3617 1.056.4169 2.2263.0602 1.2655.0739 1.645.0796 4.848.0058 3.203-.0055 3.5834-.061 4.848-.051 1.17-.245 1.8055-.408 2.2294-.216.5604-.4763.96-.8954 1.3814-.419.4215-.8181.6811-1.3783.9-.4224.1649-1.0577.3617-2.2262.4174-1.2656.0595-1.6448.072-4.8493.079-3.2045.007-3.5825-.006-4.848-.0608M16.953 5.5864A1.44 1.44 0 1 0 18.39 4.144a1.44 1.44 0 0 0-1.437 1.4424M5.8385 12.012c.0067 3.4032 2.7706 6.1557 6.173 6.1493 3.4026-.0065 6.157-2.7701 6.1506-6.1733-.0065-3.4032-2.771-6.1565-6.174-6.1498-3.403.0067-6.156 2.771-6.1496 6.1738M8 12.0077a4 4 0 1 1 4.008 3.9921A3.9996 3.9996 0 0 1 8 12.0077"})]})}),L_e="#4A154B",B_e=k.forwardRef(function({title:e="Slack",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=L_e),d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[d.jsx("title",{children:e}),d.jsx("path",{d:"M5.042 15.165a2.528 2.528 0 0 1-2.52 2.523A2.528 2.528 0 0 1 0 15.165a2.527 2.527 0 0 1 2.522-2.52h2.52v2.52zM6.313 15.165a2.527 2.527 0 0 1 2.521-2.52 2.527 2.527 0 0 1 2.521 2.52v6.313A2.528 2.528 0 0 1 8.834 24a2.528 2.528 0 0 1-2.521-2.522v-6.313zM8.834 5.042a2.528 2.528 0 0 1-2.521-2.52A2.528 2.528 0 0 1 8.834 0a2.528 2.528 0 0 1 2.521 2.522v2.52H8.834zM8.834 6.313a2.528 2.528 0 0 1 2.521 2.521 2.528 2.528 0 0 1-2.521 2.521H2.522A2.528 2.528 0 0 1 0 8.834a2.528 2.528 0 0 1 2.522-2.521h6.312zM18.956 8.834a2.528 2.528 0 0 1 2.522-2.521A2.528 2.528 0 0 1 24 8.834a2.528 2.528 0 0 1-2.522 2.521h-2.522V8.834zM17.688 8.834a2.528 2.528 0 0 1-2.523 2.521 2.527 2.527 0 0 1-2.52-2.521V2.522A2.527 2.527 0 0 1 15.165 0a2.528 2.528 0 0 1 2.523 2.522v6.312zM15.165 18.956a2.528 2.528 0 0 1 2.523 2.522A2.528 2.528 0 0 1 15.165 24a2.527 2.527 0 0 1-2.52-2.522v-2.522h2.52zM15.165 17.688a2.527 2.527 0 0 1-2.52-2.523 2.526 2.526 0 0 1 2.52-2.52h6.313A2.527 2.527 0 0 1 24 15.165a2.528 2.528 0 0 1-2.522 2.523h-6.313z"})]})}),z_e="#000000",V_e=k.forwardRef(function({title:e="Threads",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=z_e),d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[d.jsx("title",{children:e}),d.jsx("path",{d:"M12.186 24h-.007c-3.581-.024-6.334-1.205-8.184-3.509C2.35 18.44 1.5 15.586 1.472 12.01v-.017c.03-3.579.879-6.43 2.525-8.482C5.845 1.205 8.6.024 12.18 0h.014c2.746.02 5.043.725 6.826 2.098 1.677 1.29 2.858 3.13 3.509 5.467l-2.04.569c-1.104-3.96-3.898-5.984-8.304-6.015-2.91.022-5.11.936-6.54 2.717C4.307 6.504 3.616 8.914 3.589 12c.027 3.086.718 5.496 2.057 7.164 1.43 1.783 3.631 2.698 6.54 2.717 2.623-.02 4.358-.631 5.8-2.045 1.647-1.613 1.618-3.593 1.09-4.798-.31-.71-.873-1.3-1.634-1.75-.192 1.352-.622 2.446-1.284 3.272-.886 1.102-2.14 1.704-3.73 1.79-1.202.065-2.361-.218-3.259-.801-1.063-.689-1.685-1.74-1.752-2.964-.065-1.19.408-2.285 1.33-3.082.88-.76 2.119-1.207 3.583-1.291a13.853 13.853 0 0 1 3.02.142c-.126-.742-.375-1.332-.75-1.757-.513-.586-1.308-.883-2.359-.89h-.029c-.844 0-1.992.232-2.721 1.32L7.734 7.847c.98-1.454 2.568-2.256 4.478-2.256h.044c3.194.02 5.097 1.975 5.287 5.388.108.046.216.094.321.142 1.49.7 2.58 1.761 3.154 3.07.797 1.82.871 4.79-1.548 7.158-1.85 1.81-4.094 2.628-7.277 2.65Zm1.003-11.69c-.242 0-.487.007-.739.021-1.836.103-2.98.946-2.916 2.143.067 1.256 1.452 1.839 2.784 1.767 1.224-.065 2.818-.543 3.086-3.71a10.5 10.5 0 0 0-2.215-.221z"})]})}),U_e="#000000",H_e=k.forwardRef(function({title:e="X",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=U_e),d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[d.jsx("title",{children:e}),d.jsx("path",{d:"M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"})]})}),W_e={Phone:bM,Mail:vM,Users:Fs,Coffee:Pte,Utensils:Lte,FileText:N0,Circle:nI,MessageCircle:k0};function K_e({timeline:t,onEdit:e,onDelete:r,onToggleTodo:n,personId:i,allPeople:s=[]}){const o=k.useMemo(()=>gye(t||[]),[t]),a=f=>s.find(p=>p.id.toString()===f.toString()),l=f=>{if(f.type==="todo")return f.is_completed?rI:Dd;if(f.type==="activity"&&f.activity_type){const p=vye(f.activity_type);return W_e[p]||nI}return f.type==="note"?N0:nI},c=f=>{var S;const p=l(f),m=f.type==="todo",g=f.type==="activity",v=f.type==="note";let y=f.activity_date||f.created;f.activity_date&&f.activity_time&&(y=`${f.activity_date}T${f.activity_time}`);const b=yye(y),w=xye(f),x=m&&rm(f);return d.jsxs("div",{className:`relative ${m?"pl-0":"pl-8"} pb-6 group`,children:[!m&&d.jsx("div",{className:"absolute left-0 top-1",children:d.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${g?"bg-blue-500 border-blue-500":"bg-gray-400 border-gray-400"}`})}),d.jsx("div",{className:`${w}`,children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"flex-1 min-w-0",children:[!m&&d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx(p,{className:`w-4 h-4 flex-shrink-0 ${g?"text-blue-600":"text-gray-500"}`}),g&&f.activity_type&&d.jsx("span",{className:"text-xs font-medium text-gray-600",children:bye(f.activity_type)}),d.jsx("span",{className:"text-xs text-gray-400",children:""}),d.jsx("span",{className:"text-xs text-gray-500",children:b})]}),d.jsxs("div",{className:"flex items-start gap-2",children:[m&&d.jsx("button",{onClick:()=>n&&n(f),className:"mt-0.5 flex-shrink-0",title:f.is_completed?"Mark as incomplete":"Mark as complete",children:f.is_completed?d.jsx(rI,{className:`w-5 h-5 ${x?"text-red-600":"text-primary-600"}`}):d.jsx(Dd,{className:`w-5 h-5 ${x?"text-red-600":"text-gray-400"}`})}),(v||g)&&((S=f.content)!=null&&S.includes("<"))?d.jsx("div",{className:`text-sm flex-1 prose prose-sm max-w-none ${f.is_completed?"line-through opacity-60":""}`,dangerouslySetInnerHTML:{__html:f.content}}):d.jsx("p",{className:`text-sm flex-1 ${f.is_completed?"line-through opacity-60":""}`,children:f.content})]}),g&&f.participants&&f.participants.length>0&&d.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[d.jsx("span",{className:"text-xs text-gray-500",children:"With:"}),f.participants.map(_=>{const C=a(_);return C?d.jsxs(Ye,{to:`/people/${_}`,className:"inline-flex items-center gap-1 text-xs text-primary-600 hover:text-primary-700 hover:underline",children:[d.jsx(yM,{className:"w-3 h-3"}),C.name]},_):null})]}),m&&f.due_date&&d.jsx("div",{className:"mt-2",children:d.jsxs("span",{className:`text-xs ${x?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",Cn(new Date(f.due_date),"MMM d, yyyy"),x&&" (overdue)"]})})]}),d.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[e&&d.jsx("button",{onClick:()=>e(f),className:"p-1 hover:bg-gray-100 rounded",title:"Edit",children:d.jsx(ra,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),r&&d.jsx("button",{onClick:()=>r(f),className:"p-1 hover:bg-red-50 rounded",title:"Delete",children:d.jsx(ui,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})})]},f.id)},u=(f,p)=>!p||p.length===0?null:d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3 uppercase tracking-wide",children:f}),d.jsx("div",{className:"relative pl-4 border-l-2 border-gray-200",children:p.map(c)})]});return o.today.length>0||o.yesterday.length>0||o.thisWeek.length>0||o.older.length>0?d.jsxs("div",{className:"space-y-6",children:[u("Today",o.today),u("Yesterday",o.yesterday),u("This week",o.thisWeek),u("Older",o.older)]}):d.jsx("div",{className:"text-center py-8",children:d.jsx("p",{className:"text-sm text-gray-500",children:"No timeline items yet."})})}function G_e({isOpen:t,onClose:e,onSubmit:r,isLoading:n,initialContent:i=""}){const[s,o]=k.useState("");if(k.useEffect(()=>{t&&o(i||"")},[t,i]),!t)return null;const a=c=>{c.preventDefault(),!Bv(s)&&(r(s),o(""))},l=()=>{o(""),e()};return d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[d.jsx("h2",{className:"text-lg font-semibold",children:"Add note"}),d.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",disabled:n,children:d.jsx(Rt,{className:"w-5 h-5"})})]}),d.jsxs("form",{onSubmit:a,className:"p-4",children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Note"}),d.jsx(rse,{value:s,onChange:o,placeholder:"Enter your note...",disabled:n,autoFocus:!0,minHeight:"150px"})]}),d.jsxs("div",{className:"flex justify-end gap-2",children:[d.jsx("button",{type:"button",onClick:l,className:"btn-secondary",disabled:n,children:"Cancel"}),d.jsx("button",{type:"submit",className:"btn-primary",disabled:n||Bv(s),children:n?"Adding...":"Add note"})]})]})]})})}function nse({isOpen:t,onClose:e,onSubmit:r,isLoading:n,todo:i=null}){const[s,o]=k.useState(""),[a,l]=k.useState(""),[c,u]=k.useState(!1),h=()=>new Date().toISOString().split("T")[0];if(k.useEffect(()=>{i?(o(i.content||""),l(i.due_date||""),u(i.is_completed||!1)):(o(""),l(h()),u(!1))},[i,t]),!t)return null;const f=g=>{g.preventDefault(),s.trim()&&(r({content:s.trim(),due_date:a||null,is_completed:c}),i||(o(""),l(h()),u(!1)))},p=()=>{i||(o(""),l(h()),u(!1)),e()},m=g=>{if(!g)return"";try{return new Date(g).toISOString().split("T")[0]}catch{return""}};return d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[d.jsx("h2",{className:"text-lg font-semibold",children:i?"Edit todo":"Add todo"}),d.jsx("button",{onClick:p,className:"text-gray-400 hover:text-gray-600",disabled:n,children:d.jsx(Rt,{className:"w-5 h-5"})})]}),d.jsxs("form",{onSubmit:f,className:"p-4",children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"todo-content",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),d.jsx("textarea",{id:"todo-content",value:s,onChange:g=>o(g.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"What needs to be done?",disabled:n,autoFocus:!0})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"todo-due-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Due date (optional)"}),d.jsx("input",{id:"todo-due-date",type:"date",value:m(a),onChange:g=>l(g.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),i&&d.jsx("div",{className:"mb-4",children:d.jsxs("label",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",checked:c,onChange:g=>u(g.target.checked),className:"mr-2",disabled:n}),d.jsx("span",{className:"text-sm text-gray-700",children:"Completed"})]})}),d.jsxs("div",{className:"flex justify-end gap-2",children:[d.jsx("button",{type:"button",onClick:p,className:"btn-secondary",disabled:n,children:"Cancel"}),d.jsx("button",{type:"submit",className:"btn-primary",disabled:n||!s.trim(),children:n?i?"Saving...":"Adding...":i?"Save":"Add todo"})]})]})]})})}const Y_e=[{value:"email",label:"Email"},{value:"phone",label:"Phone"},{value:"mobile",label:"Mobile"},{value:"website",label:"Website"},{value:"calendar",label:"Calendar link"},{value:"linkedin",label:"LinkedIn"},{value:"twitter",label:"Twitter"},{value:"bluesky",label:"Bluesky"},{value:"threads",label:"Threads"},{value:"instagram",label:"Instagram"},{value:"facebook",label:"Facebook"},{value:"slack",label:"Slack"},{value:"other",label:"Other"}];function Q_e({isOpen:t,onClose:e,onSubmit:r,isLoading:n,contactInfo:i=[]}){const{register:s,control:o,handleSubmit:a,reset:l,formState:{errors:c}}=Hc({defaultValues:{contacts:i.length>0?i.map(g=>({contact_type:g.contact_type||"",contact_label:g.contact_label||"",contact_value:g.contact_value||""})):[]}}),{fields:u,append:h,remove:f}=Tme({control:o,name:"contacts"});if(k.useEffect(()=>{t&&l({contacts:i.length>0?i.map(g=>({contact_type:g.contact_type||"",contact_label:g.contact_label||"",contact_value:g.contact_value||""})):[]})},[t,i,l]),!t)return null;const p=g=>{const v=g.contacts.filter(y=>y.contact_type&&y.contact_value);r(v)},m=()=>{h({contact_type:"",contact_label:"",contact_value:""})};return d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[d.jsx("h2",{className:"text-lg font-semibold",children:"Edit contact details"}),d.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:d.jsx(Rt,{className:"w-5 h-5"})})]}),d.jsxs("form",{onSubmit:a(p),className:"flex flex-col flex-1 overflow-hidden",children:[d.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[u.length===0?d.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:'No contact details yet. Click "Add contact detail" to add one.'}):d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"hidden md:grid md:grid-cols-12 gap-2 text-xs font-medium text-gray-500 px-1",children:[d.jsx("div",{className:"col-span-3",children:"Type"}),d.jsx("div",{className:"col-span-3",children:"Label"}),d.jsx("div",{className:"col-span-5",children:"Value"}),d.jsx("div",{className:"col-span-1"})]}),u.map((g,v)=>d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-2 p-3 md:p-2 bg-gray-50 rounded-lg",children:[d.jsxs("div",{className:"md:col-span-3",children:[d.jsx("label",{className:"md:hidden text-xs font-medium text-gray-500 mb-1 block",children:"Type"}),d.jsxs("select",{...s(`contacts.${v}.contact_type`,{required:!0}),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n,children:[d.jsx("option",{value:"",children:"Select type..."}),Y_e.map(y=>d.jsx("option",{value:y.value,children:y.label},y.value))]})]}),d.jsxs("div",{className:"md:col-span-3",children:[d.jsx("label",{className:"md:hidden text-xs font-medium text-gray-500 mb-1 block",children:"Label"}),d.jsx("input",{...s(`contacts.${v}.contact_label`),placeholder:"e.g., Work",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),d.jsxs("div",{className:"md:col-span-5",children:[d.jsx("label",{className:"md:hidden text-xs font-medium text-gray-500 mb-1 block",children:"Value"}),d.jsx("input",{...s(`contacts.${v}.contact_value`,{required:!0}),placeholder:"e.g., john@example.com",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),d.jsx("div",{className:"md:col-span-1 flex items-center justify-end md:justify-center",children:d.jsx("button",{type:"button",onClick:()=>f(v),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove",disabled:n,children:d.jsx(ui,{className:"w-4 h-4"})})})]},g.id))]}),d.jsxs("button",{type:"button",onClick:m,className:"mt-4 w-full py-2 px-4 border-2 border-dashed border-gray-300 rounded-lg text-sm text-gray-600 hover:border-gray-400 hover:text-gray-700 transition-colors flex items-center justify-center gap-2",disabled:n,children:[d.jsx(Jt,{className:"w-4 h-4"}),"Add contact detail"]})]}),d.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[d.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),d.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":"Save changes"})]})]})]})})}function X_e({value:t,onChange:e,people:r,isLoading:n,excludePersonId:i}){const[s,o]=k.useState(""),[a,l]=k.useState(!1),c=k.useRef(null),u=k.useRef(null),h=k.useMemo(()=>r.filter(b=>b.id!==i).sort((b,w)=>{var _,C;const x=(b.first_name||((_=b.acf)==null?void 0:_.first_name)||"").toLowerCase(),S=(w.first_name||((C=w.acf)==null?void 0:C.first_name)||"").toLowerCase();return x<S?-1:x>S?1:0}),[r,i]),f=k.useMemo(()=>{if(!s)return h.slice(0,10);const y=s.toLowerCase();return h.filter(b=>{var _,C;const w=rd(b).toLowerCase(),x=(b.first_name||((_=b.acf)==null?void 0:_.first_name)||"").toLowerCase(),S=(b.last_name||((C=b.acf)==null?void 0:C.last_name)||"").toLowerCase();return w.includes(y)||x.includes(y)||S.includes(y)}).slice(0,10)},[h,s]),p=k.useMemo(()=>h.find(y=>y.id===t),[h,t]);k.useEffect(()=>{const y=b=>{u.current&&!u.current.contains(b.target)&&c.current&&!c.current.contains(b.target)&&l(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const m=y=>{e(y),o(""),l(!1)},g=()=>{e(null),o(""),l(!1)},v=p?rd(p):"";return d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"relative",children:p&&!a?d.jsxs("div",{className:"flex items-center justify-between input pr-8 cursor-text",onClick:()=>l(!0),children:[d.jsx("span",{children:v}),d.jsx("button",{type:"button",onClick:y=>{y.stopPropagation(),g()},className:"absolute right-2 text-gray-400 hover:text-gray-600",children:d.jsx(Rt,{className:"w-4 h-4"})})]}):d.jsx("input",{ref:c,type:"text",value:s,onChange:y=>{o(y.target.value),l(!0)},onFocus:()=>l(!0),placeholder:"Search for a person...",className:"input",disabled:n})}),a&&(s||!p)&&d.jsx("div",{ref:u,className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:f.length>0?f.map(y=>d.jsx("button",{type:"button",onClick:()=>m(y.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t===y.id?"bg-primary-50":""}`,children:rd(y)},y.id)):d.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No people found"})})]})}function J_e({isOpen:t,onClose:e,onSubmit:r,isLoading:n,relationship:i=null,personId:s,allPeople:o=[],isPeopleLoading:a=!1,onCreatePerson:l}){const c=!!i,{data:u=[],isLoading:h}=lt({queryKey:["relationship-types"],queryFn:async()=>(await qe.getRelationshipTypes()).data}),{register:f,handleSubmit:p,reset:m,control:g,formState:{errors:v}}=Hc({defaultValues:{related_person:null,relationship_type:"",relationship_label:""}});if(k.useEffect(()=>{t&&m(i?{related_person:i.related_person||null,relationship_type:i.relationship_type?String(i.relationship_type):"",relationship_label:i.relationship_label||""}:{related_person:null,relationship_type:"",relationship_label:""})},[t,i,m]),!t)return null;const y=b=>{r({related_person:b.related_person||null,relationship_type:b.relationship_type?parseInt(b.relationship_type,10):null,relationship_label:b.relationship_label||""})};return d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[d.jsx("h2",{className:"text-lg font-semibold",children:c?"Edit relationship":"Add relationship"}),d.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:d.jsx(Rt,{className:"w-5 h-5"})})]}),d.jsxs("form",{onSubmit:p(y),className:"flex flex-col flex-1 overflow-hidden",children:[d.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Related person *"}),d.jsx(Hy,{name:"related_person",control:g,rules:{required:"Please select a person"},render:({field:b})=>d.jsx(X_e,{value:b.value,onChange:b.onChange,people:o,isLoading:a,excludePersonId:parseInt(s,10)})}),v.related_person&&d.jsx("p",{className:"text-sm text-red-600 mt-1",children:v.related_person.message}),!c&&l&&d.jsx("div",{className:"mt-2",children:d.jsxs("button",{type:"button",onClick:l,className:"inline-flex items-center gap-1 text-sm text-primary-600 hover:text-primary-700",children:[d.jsx(Jt,{className:"w-4 h-4"}),"Add new person"]})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Relationship type"}),d.jsxs("select",{...f("relationship_type"),className:"input",disabled:h||n,children:[d.jsx("option",{value:"",children:"Select a type..."}),u.map(b=>d.jsx("option",{value:b.id,children:b.name},b.id))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Custom label"}),d.jsx("input",{...f("relationship_label"),className:"input",placeholder:"e.g., Brother-in-law",disabled:n}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Override the relationship type with a custom label"})]})]}),d.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[d.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),d.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":c?"Save changes":"Add relationship"})]})]})]})})}function Z_e({isOpen:t,onClose:e,onSubmit:r,isLoading:n,address:i=null}){const s=!!i,{register:o,handleSubmit:a,reset:l,formState:{errors:c}}=Hc({defaultValues:{address_label:"",street:"",postal_code:"",city:"",state:"",country:""}});if(k.useEffect(()=>{t&&l(i?{address_label:i.address_label||"",street:i.street||"",postal_code:i.postal_code||"",city:i.city||"",state:i.state||"",country:i.country||""}:{address_label:"",street:"",postal_code:"",city:"",state:"",country:""})},[t,i,l]),!t)return null;const u=h=>{r({address_label:h.address_label||"",street:h.street||"",postal_code:h.postal_code||"",city:h.city||"",state:h.state||"",country:h.country||""})};return d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[d.jsx("h2",{className:"text-lg font-semibold",children:s?"Edit address":"Add address"}),d.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:d.jsx(Rt,{className:"w-5 h-5"})})]}),d.jsxs("form",{onSubmit:a(u),className:"flex flex-col flex-1 overflow-hidden",children:[d.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Label"}),d.jsx("input",{...o("address_label"),className:"input",placeholder:"e.g., Home, Work",disabled:n})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Street"}),d.jsx("input",{...o("street"),className:"input",placeholder:"e.g., 123 Main Street",disabled:n})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Postal code"}),d.jsx("input",{...o("postal_code"),className:"input",placeholder:"e.g., 12345",disabled:n})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"City"}),d.jsx("input",{...o("city"),className:"input",placeholder:"e.g., Amsterdam",disabled:n})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"State/Province"}),d.jsx("input",{...o("state"),className:"input",placeholder:"e.g., North Holland",disabled:n})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Country"}),d.jsx("input",{...o("country"),className:"input",placeholder:"e.g., Netherlands",disabled:n})]})]})]}),d.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[d.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),d.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":s?"Save changes":"Add address"})]})]})]})})}function eEe({value:t,onChange:e,companies:r,isLoading:n}){return d.jsxs("select",{value:t||"",onChange:i=>e(i.target.value?parseInt(i.target.value,10):null),className:"input",disabled:n,children:[d.jsx("option",{value:"",children:"Select an organization..."}),r.map(i=>{var s;return d.jsx("option",{value:i.id,children:((s=i.title)==null?void 0:s.rendered)||i.title},i.id)})]})}function tEe({isOpen:t,onClose:e,onSubmit:r,isLoading:n,workHistoryItem:i=null}){const s=!!i,{data:o=[],isLoading:a}=lt({queryKey:["companies","all"],queryFn:async()=>(await qe.getCompanies({per_page:100})).data}),l=k.useMemo(()=>[...o].sort((v,y)=>{var x,S;const b=(((x=v.title)==null?void 0:x.rendered)||v.title||"").toLowerCase(),w=(((S=y.title)==null?void 0:S.rendered)||y.title||"").toLowerCase();return b.localeCompare(w)}),[o]),{register:c,handleSubmit:u,reset:h,watch:f,control:p,formState:{errors:m}}=Hc({defaultValues:{company:null,job_title:"",description:"",start_date:"",end_date:"",is_current:!1}});if(f("is_current"),k.useEffect(()=>{t&&h(i?{company:i.company||null,job_title:i.job_title||"",description:i.description||"",start_date:i.start_date||"",end_date:i.end_date||"",is_current:i.is_current||!1}:{company:null,job_title:"",description:"",start_date:"",end_date:"",is_current:!1})},[t,i,h]),!t)return null;const g=v=>{r({company:v.company||null,job_title:v.job_title||"",description:v.description||"",start_date:v.start_date||"",end_date:v.end_date||"",is_current:v.is_current||!1})};return d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[d.jsx("h2",{className:"text-lg font-semibold",children:s?"Edit work history":"Add work history"}),d.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:n,children:d.jsx(Rt,{className:"w-5 h-5"})})]}),d.jsxs("form",{onSubmit:u(g),className:"flex flex-col flex-1 overflow-hidden",children:[d.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Organization"}),d.jsx(Hy,{name:"company",control:p,render:({field:v})=>d.jsx(eEe,{value:v.value,onChange:v.onChange,companies:l,isLoading:a||n})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Job title"}),d.jsx("input",{...c("job_title"),className:"input",placeholder:"e.g., Software Engineer",disabled:n})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Description"}),d.jsx("textarea",{...c("description"),className:"input",rows:3,placeholder:"Job description, responsibilities, achievements...",disabled:n})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Start date"}),d.jsx("input",{type:"date",...c("start_date"),className:"input",disabled:n})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"End date"}),d.jsx("input",{type:"date",...c("end_date"),className:"input",disabled:n})]})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",id:"is_current",...c("is_current"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",disabled:n}),d.jsx("label",{htmlFor:"is_current",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Currently works here"})]})]}),d.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t bg-gray-50",children:[d.jsx("button",{type:"button",onClick:e,className:"btn-secondary",disabled:n,children:"Cancel"}),d.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":s?"Save changes":"Add work history"})]})]})]})})}function Fn(t){return t?String(t).replace(/\\/g,"\\\\").replace(/;/g,"\\;").replace(/,/g,"\\,").replace(/\n/g,"\\n"):""}function rEe(t){return t?t.replace(/[^\d+]/g,""):""}function Aq(t){if(!t)return"";const e=new Date(t);if(isNaN(e.getTime()))return"";const r=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${r}${n}${i}`}function nEe(t,e={}){if(!t||!Array.isArray(t))return{title:"",org:""};const r=t.find(i=>i.is_current);if(r){const i=r.company&&e[r.company]?e[r.company].name||e[r.company]:"";return{title:r.job_title||"",org:i}}const n=[...t].filter(i=>i.start_date).sort((i,s)=>new Date(s.start_date)-new Date(i.start_date));if(n.length>0){const i=n[0].company&&e[n[0].company]?e[n[0].company].name||e[n[0].company]:"";return{title:n[0].job_title||"",org:i}}return{title:"",org:""}}function iEe(t,e={}){if(!t)throw new Error("Person data is required");const{companyMap:r={},personDates:n=[]}=e,i=t.acf||{},s=[];s.push("BEGIN:VCARD"),s.push("VERSION:3.0");const o=i.first_name||"",a=i.last_name||"",l=t.name||`${o} ${a}`.trim()||"Unknown";s.push(`FN:${Fn(l)}`),s.push(`N:${Fn(a)};${Fn(o)};;;`),i.nickname&&s.push(`NICKNAME:${Fn(i.nickname)}`),i.contact_info&&Array.isArray(i.contact_info)&&i.contact_info.forEach(h=>{if(!h.contact_value)return;const f=Fn(h.contact_value),p=h.contact_label?Fn(h.contact_label):"";switch(h.contact_type){case"email":const m=p?`EMAIL;TYPE=INTERNET,${p.toUpperCase()}`:"EMAIL;TYPE=INTERNET";s.push(`${m}:${f}`);break;case"phone":case"mobile":const g=h.contact_type==="mobile"?"CELL":"VOICE",v=p?`TEL;TYPE=${g},${p.toUpperCase()}`:`TEL;TYPE=${g}`,y=rEe(h.contact_value);y&&s.push(`${v}:${y}`);break;case"website":case"linkedin":case"twitter":case"instagram":case"facebook":let b=h.contact_value;b.match(/^https?:\/\//i)||(b=`https://${b}`);const w=h.contact_type==="linkedin"?"PROFILE":"WORK",x=p?`URL;TYPE=${w},${p.toUpperCase()}`:`URL;TYPE=${w}`;s.push(`${x}:${Fn(b)}`);break}}),i.addresses&&Array.isArray(i.addresses)&&i.addresses.forEach(h=>{const f=h.address_label?`ADR;TYPE=${h.address_label.toUpperCase()}`:"ADR;TYPE=HOME",p=Fn(h.street||""),m=Fn(h.city||""),g=Fn(h.state||""),v=Fn(h.postal_code||""),y=Fn(h.country||"");(p||m||g||v||y)&&s.push(`${f}:;;${p};${m};${g};${v};${y}`)});const{title:c,org:u}=nEe(i.work_history,r);if(u&&s.push(`ORG:${Fn(u)}`),c&&s.push(`TITLE:${Fn(c)}`),n&&Array.isArray(n)){const h=n.find(f=>{const p=Array.isArray(f.date_type)?f.date_type[0]:f.date_type;return(p==null?void 0:p.toLowerCase())==="birthday"});if(h!=null&&h.date_value){const f=Aq(h.date_value);f&&s.push(`BDAY:${f}`)}}if(t.thumbnail,t.modified){const h=Aq(t.modified);h&&s.push(`REV:${h}T000000Z`)}return s.push("END:VCARD"),s.join(`\r
`)}function sEe(t,e={}){const{filename:r,...n}=e,i=iEe(t,n),s=new Blob([i],{type:"text/vcard;charset=utf-8"}),o=URL.createObjectURL(s),a=document.createElement("a");a.href=o,a.download=r||`${t.name||"contact"}.vcf`.replace(/[^a-z0-9.-]/gi,"_"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)}const oEe=({className:t})=>d.jsx("svg",{className:t,viewBox:"0 0 382 382",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",children:d.jsx("path",{d:`M347.445,0H34.555C15.471,0,0,15.471,0,34.555v312.889C0,366.529,15.471,382,34.555,382h312.889
      C366.529,382,382,366.529,382,347.444V34.555C382,15.471,366.529,0,347.445,0z M118.207,329.844c0,5.554-4.502,10.056-10.056,10.056
      H65.345c-5.554,0-10.056-4.502-10.056-10.056V150.403c0-5.554,4.502-10.056,10.056-10.056h42.806
      c5.554,0,10.056,4.502,10.056,10.056V329.844z M86.748,123.432c-22.459,0-40.666-18.207-40.666-40.666S64.289,42.1,86.748,42.1
      s40.666,18.207,40.666,40.666S109.208,123.432,86.748,123.432z M341.91,330.654c0,5.106-4.14,9.246-9.246,9.246H286.73
      c-5.106,0-9.246-4.14-9.246-9.246v-84.168c0-12.556,3.683-55.021-32.813-55.021c-28.309,0-34.051,29.066-35.204,42.11v97.079
      c0,5.106-4.139,9.246-9.246,9.246h-44.426c-5.106,0-9.246-4.14-9.246-9.246V149.593c0-5.106,4.14-9.246,9.246-9.246h44.426
      c5.106,0,9.246,4.14,9.246,9.246v15.655c10.497-15.753,26.097-27.912,59.312-27.912c73.552,0,73.131,68.716,73.131,106.472
      L341.91,330.654L341.91,330.654z`})});function Ig(t){if(!t)return null;switch(t){case"male":return"";case"female":return"";case"non_binary":case"other":case"prefer_not_to_say":return"";default:return null}}function aEe(){var OD,jD,PD,ID,RD,MD,AD,DD,$D,FD,qD,LD,BD,zD,VD;const{id:t}=nM(),e=ms(),r=vt(),{data:n,isLoading:i,error:s}=Hte(t),{data:o}=Xpe(t),{data:a}=Jpe(t),l=eme(),c=rme(),u=ame(),h=Zpe(),f=tme(),p=xM(),m=nme(),g=Wte(),v=sme(),y=ime(),b=ome(),{data:w,isLoading:x}=Uc(),{data:S=[]}=lt({queryKey:["investments",t],queryFn:async()=>(await Ae.getInvestments(t)).data,enabled:!!t}),[_,C]=k.useState(!1),[E,N]=k.useState(""),[T,j]=k.useState(!1),P=k.useRef(null),[O,D]=k.useState(!1),[z,R]=k.useState(!1),[B,q]=k.useState(!1),[$,K]=k.useState(!1),[W,F]=k.useState(!1),[X,Q]=k.useState(!1),[Ce,xe]=k.useState(!1),[Be,at]=k.useState(!1),[Kr,Sr]=k.useState(!1),[Wt,jr]=k.useState(!1),[nt,yn]=k.useState(!1),[$n,Pr]=k.useState(!1),[gt,rr]=k.useState(!1),[Ws,_r]=k.useState(!1),[A,L]=k.useState(!1),[U,oe]=k.useState(null),[ee,Z]=k.useState(null),[me,Fe]=k.useState(null),[Ke,St]=k.useState(null),[Se,ne]=k.useState(null),[fe,ce]=k.useState(null),[Ne,He]=k.useState(null),[_i,vn]=k.useState(null),[bl,xl]=k.useState(null),[oi,wl]=k.useState(null),[jb,pu]=k.useState(!1),[Pb,mu]=k.useState(null),{data:Ib}=lt({queryKey:["person-labels"],queryFn:async()=>(await qe.getPersonLabels()).data}),Vm=Ib||[],Rb=(n==null?void 0:n.labels)||[],Um=((ID=(PD=(jD=(OD=n==null?void 0:n._embedded)==null?void 0:OD["wp:term"])==null?void 0:jD.flat())==null?void 0:PD.filter(I=>(I==null?void 0:I.taxonomy)==="person_label"))==null?void 0:ID.map(I=>I.id))||[],ge=Vm.filter(I=>!Rb.includes(I.name));lh((n==null?void 0:n.name)||((RD=n==null?void 0:n.title)==null?void 0:RD.rendered)||(n==null?void 0:n.title)||"Person");const Ee=a==null?void 0:a.find(I=>{const G=Array.isArray(I.date_type)?I.date_type[0]:I.date_type;return(G==null?void 0:G.toLowerCase())==="birthday"}),Re=Ee!=null&&Ee.date_value?new Date(Ee.date_value):null,$t=(Ee==null?void 0:Ee.year_unknown)??!1,Er=a==null?void 0:a.find(I=>{const G=Array.isArray(I.date_type)?I.date_type[0]:I.date_type;return(G==null?void 0:G.toLowerCase())==="died"}),gu=Er!=null&&Er.date_value?new Date(Er.date_value):null,Hm=(Er==null?void 0:Er.year_unknown)??!1,Ks=!!gu,Sl=Re&&!$t?N1(Ks?gu:new Date,Re):null,$h=a?[...a].sort((I,G)=>{const Y=I.date_value?new Date(I.date_value):new Date(0),we=G.date_value?new Date(G.date_value):new Date(0);return Y-we}):[],Mb=async()=>{if(window.confirm("Are you sure you want to delete this person?"))try{await l.mutateAsync(t),e("/people")}catch(I){console.error("Failed to delete person:",I),alert("Failed to delete person. Please try again.")}},SD=I=>{if(!I)return"";let G=I.replace(/[\u200B-\u200D\uFEFF\u200E\u200F\u202A-\u202E]/g,"");const Y=G.startsWith("+");return G=G.replace(/\D/g,""),Y?`+${G}`:G},rle=async I=>{jr(!0);try{const G=Qs(n.acf,{contact_info:I});await h.mutateAsync({id:t,data:{acf:G}}),K(!1)}catch(G){console.error("Failed to save contacts:",G),alert("Failed to save contacts. Please try again.")}finally{jr(!1)}},nle=async I=>{yn(!0);try{me?await qe.updateDate(me.id,{title:I.title,date_type:I.date_type,acf:{date_value:I.date_value,related_people:I.related_people,is_recurring:I.is_recurring,year_unknown:I.year_unknown}}):await qe.createDate({title:I.title,status:"publish",date_type:I.date_type,acf:{date_value:I.date_value,related_people:I.related_people,is_recurring:I.is_recurring,year_unknown:I.year_unknown}}),r.invalidateQueries({queryKey:["person-dates",t]}),r.invalidateQueries({queryKey:["reminders"]}),F(!1),Fe(null)}catch(G){console.error("Failed to save date:",G),alert("Failed to save date. Please try again.")}finally{yn(!1)}},ile=async I=>{var G;Pr(!0);try{const Y=[...((G=n.acf)==null?void 0:G.relationships)||[]],we={related_person:I.related_person||null,relationship_type:I.relationship_type||null,relationship_label:I.relationship_label||""};Se!==null?Y[Se]=we:Y.push(we);const Me=Qs(n.acf,{relationships:Y});await h.mutateAsync({id:t,data:{acf:Me}}),r.invalidateQueries({queryKey:["person",t]}),Q(!1),St(null),ne(null)}catch(Y){console.error("Failed to save relationship:",Y),alert("Failed to save relationship. Please try again.")}finally{Pr(!1)}},sle=async I=>{var G;rr(!0);try{const Y=[...((G=n.acf)==null?void 0:G.addresses)||[]],we={address_label:I.address_label||"",street:I.street||"",postal_code:I.postal_code||"",city:I.city||"",state:I.state||"",country:I.country||""};Ne!==null?Y[Ne]=we:Y.push(we);const Me=Qs(n.acf,{addresses:Y});await h.mutateAsync({id:t,data:{acf:Me}}),xe(!1),ce(null),He(null)}catch(Y){console.error("Failed to save address:",Y),alert("Failed to save address. Please try again.")}finally{rr(!1)}},ole=async I=>{var G;_r(!0);try{const Y=[...((G=n.acf)==null?void 0:G.work_history)||[]],we={company:I.company||null,job_title:I.job_title||"",description:I.description||"",start_date:I.start_date||"",end_date:I.end_date||"",is_current:I.is_current||!1};bl!==null?Y[bl]=we:Y.push(we);const Me=Qs(n.acf,{work_history:Y});await h.mutateAsync({id:t,data:{acf:Me}}),at(!1),vn(null),xl(null)}catch(Y){console.error("Failed to save work history:",Y),alert("Failed to save work history. Please try again.")}finally{_r(!1)}},ale=async I=>{L(!0);try{const G=Qs(n.acf,{first_name:I.first_name,last_name:I.last_name,nickname:I.nickname,gender:I.gender||null,how_we_met:I.how_we_met,is_favorite:I.is_favorite});await h.mutateAsync({id:t,data:{title:`${I.first_name} ${I.last_name}`.trim(),acf:G}}),Sr(!1)}catch(G){console.error("Failed to save person:",G),alert("Failed to save person. Please try again.")}finally{L(!1)}},lle=async I=>{var we;if(!window.confirm("Are you sure you want to delete this address?"))return;const G=[...((we=n.acf)==null?void 0:we.addresses)||[]];G.splice(I,1);const Y=Qs(n.acf,{addresses:G});await h.mutateAsync({id:t,data:{acf:Y}})},cle=async I=>{var on,Gs,Fh,Ym,UD,HD;if(!window.confirm("Are you sure you want to delete this relationship?"))return;const G=(Gs=(on=n.acf)==null?void 0:on.relationships)==null?void 0:Gs[I];if(!G)return;const Y=G.related_person,we=G.relationship_type;let Me=!0;Y&&we&&(Me=window.confirm("Do you also want to delete the inverse relationship from the other person?"));let Xe=null;if(!Me&&Y&&we)try{const[bs,Qm]=await Promise.all([qe.getPerson(Y,{_embed:!0}),qe.getRelationshipTypes()]),Fb={};Qm.data.forEach(qh=>{Fb[qh.id]=qh});const Ei=Fb[we],El=(Fh=Ei==null?void 0:Ei.acf)==null?void 0:Fh.inverse_relationship_type;if(El){const Lh=(((Ym=bs.data.acf)==null?void 0:Ym.relationships)||[]).find(Ys=>{var WD,KD;const Ple=typeof Ys.related_person=="object"?(WD=Ys.related_person)==null?void 0:WD.ID:Ys.related_person,Ile=typeof Ys.relationship_type=="object"?(KD=Ys.relationship_type)==null?void 0:KD.term_id:Ys.relationship_type;return Ple===parseInt(t)&&Ile===El});Lh&&(Xe={related_person:parseInt(t),relationship_type:El,relationship_label:Lh.relationship_label||""})}}catch(bs){console.error("Failed to fetch inverse relationship:",bs)}const it=[...((UD=n.acf)==null?void 0:UD.relationships)||[]];it.splice(I,1);const Qi=Qs(n.acf,{relationships:it});if(await h.mutateAsync({id:t,data:{acf:Qi}}),!Me&&Xe&&Y){await new Promise(bs=>setTimeout(bs,500));try{const bs=await qe.getPerson(Y,{_embed:!0}),Qm=((HD=bs.data.acf)==null?void 0:HD.relationships)||[];if(!Qm.some(Ei=>{var Lh,Ys;const El=typeof Ei.related_person=="object"?(Lh=Ei.related_person)==null?void 0:Lh.ID:Ei.related_person,qh=typeof Ei.relationship_type=="object"?(Ys=Ei.relationship_type)==null?void 0:Ys.term_id:Ei.relationship_type;return El===Xe.related_person&&qh===Xe.relationship_type})){const Ei=[...Qm,Xe],El=Qs(bs.data.acf,{relationships:Ei});await qe.updatePerson(Y,{acf:El})}}catch(bs){console.error("Failed to restore inverse relationship:",bs)}}r.invalidateQueries({queryKey:["person",t]}),Y&&r.invalidateQueries({queryKey:["person",Y]}),r.invalidateQueries({queryKey:["people"]})},ule=async I=>{window.confirm("Are you sure you want to delete this important date?")&&await u.mutateAsync({dateId:I,personId:t})},dle=async I=>{window.confirm("Are you sure you want to delete this note?")&&await c.mutateAsync({noteId:I,personId:t})},hle=async I=>{try{await f.mutateAsync({personId:t,content:I}),D(!1)}catch(G){console.error("Failed to create note:",G),alert("Failed to create note. Please try again.")}},fle=async I=>{try{ee?(await m.mutateAsync({activityId:ee.id,data:I,personId:t}),Z(null)):(await p.mutateAsync({personId:t,data:I}),oi&&(await v.mutateAsync({todoId:oi.id,data:{content:oi.content,due_date:oi.due_date,is_completed:!0},personId:t}),wl(null),mu(null))),R(!1)}catch(G){console.error("Failed to save activity:",G),alert("Failed to save activity. Please try again.")}},ple=async I=>{try{await g.mutateAsync({personId:t,data:I}),q(!1),oe(null)}catch(G){console.error("Failed to create todo:",G),alert("Failed to create todo. Please try again.")}},mle=async I=>{if(U)try{await v.mutateAsync({todoId:U.id,data:I,personId:t}),q(!1),oe(null)}catch(G){console.error("Failed to update todo:",G),alert("Failed to update todo. Please try again.")}},_D=async I=>{if(!I.is_completed){wl(I),pu(!0);return}try{await v.mutateAsync({todoId:I.id,data:{content:I.content,due_date:I.due_date,is_completed:!1},personId:t})}catch(G){console.error("Failed to toggle todo:",G),alert("Failed to update todo. Please try again.")}},gle=async()=>{if(oi)try{await v.mutateAsync({todoId:oi.id,data:{content:oi.content,due_date:oi.due_date,is_completed:!0},personId:t}),pu(!1),wl(null)}catch(I){console.error("Failed to complete todo:",I),alert("Failed to complete todo. Please try again.")}},yle=()=>{if(!oi)return;const I=new Date().toISOString().split("T")[0];mu({content:oi.content,activity_date:I,activity_type:"note",participants:[]}),pu(!1),R(!0)},vle=async I=>{window.confirm("Are you sure you want to delete this activity?")&&await y.mutateAsync({activityId:I,personId:t})},ED=async I=>{window.confirm("Are you sure you want to delete this todo?")&&await b.mutateAsync({todoId:I,personId:t})},ble=I=>{I.type==="todo"?(oe(I),q(!0)):I.type==="activity"&&(Z(I),R(!0))},xle=I=>{I.type==="note"?dle(I.id):I.type==="activity"?vle(I.id):I.type==="todo"&&ED(I.id)},wle=async I=>{var we;if(!window.confirm("Are you sure you want to delete this work history item?"))return;const G=[...((we=n.acf)==null?void 0:we.work_history)||[]];G.splice(I,1);const Y=Qs(n.acf,{work_history:G});await h.mutateAsync({id:t,data:{acf:Y}})},Sle=async I=>{var we,Me,Xe;const G=(Xe=(Me=(we=n==null?void 0:n._embedded)==null?void 0:we["wp:term"])==null?void 0:Me.flat())==null?void 0:Xe.find(it=>(it==null?void 0:it.taxonomy)==="person_label"&&(it==null?void 0:it.name)===I);if(!G)return;const Y=Um.filter(it=>it!==G.id);await h.mutateAsync({id:t,data:{person_label:Y}})},_le=async()=>{if(!E)return;const I=Vm.find(Y=>Y.id.toString()===E);if(!I)return;const G=[...Um,I.id];await h.mutateAsync({id:t,data:{person_label:G}}),N(""),C(!1)},Ele=async I=>{var Y;const G=(Y=I.target.files)==null?void 0:Y[0];if(G){if(!G.type.startsWith("image/")){alert("Please select an image file");return}if(G.size>5*1024*1024){alert("Image size must be less than 5MB");return}j(!0);try{await Ae.uploadPersonPhoto(t,G),r.invalidateQueries({queryKey:["person",t]}),r.invalidateQueries({queryKey:["people"]})}catch(we){console.error("Failed to upload photo:",we),alert("Failed to upload photo. Please try again.")}finally{j(!1),P.current&&(P.current.value="")}}},Cle=()=>{if(n)try{sEe(n,{companyMap:Db,personDates:a||[]})}catch(I){console.error("Failed to export vCard:",I),alert("Failed to export vCard. Please try again.")}},CD=((AD=(MD=n==null?void 0:n.acf)==null?void 0:MD.work_history)==null?void 0:AD.map(I=>I.company).filter(Boolean))||[],Nle=QP({queries:CD.map(I=>({queryKey:["company",I],queryFn:async()=>(await qe.getCompany(I,{_embed:!0})).data,enabled:!!I}))}),_l=(($D=(DD=n==null?void 0:n.acf)==null?void 0:DD.relationships)==null?void 0:$D.map(I=>I.related_person).filter(Boolean))||[],Wm=QP({queries:_l.map(I=>({queryKey:["person-dates",I],queryFn:async()=>(await Ae.getPersonDates(I)).data,enabled:!!I}))}),Ab=k.useMemo(()=>{const I={};return Wm.forEach((G,Y)=>{if(G.data&&_l[Y]){const we=_l[Y],Me=G.data.find(Xe=>{const it=Array.isArray(Xe.date_type)?Xe.date_type[0]:Xe.date_type;return(it==null?void 0:it.toLowerCase())==="birthday"});if(Me!=null&&Me.date_value){const Xe=new Date(Me.date_value);I[we]=N1(new Date,Xe)}else I[we]=-1}}),I},[Wm,_l]),kle=k.useMemo(()=>{const I={};return Wm.forEach((G,Y)=>{if(G.data&&_l[Y]){const we=_l[Y],Me=G.data.some(Xe=>{const it=Array.isArray(Xe.date_type)?Xe.date_type[0]:Xe.date_type;return(it==null?void 0:it.toLowerCase())==="died"});I[we]=Me}}),I},[Wm,_l]),Km=k.useMemo(()=>{var I;return(I=n==null?void 0:n.acf)!=null&&I.relationships?[...n.acf.relationships].sort((G,Y)=>{const we=Ab[G.related_person]??-1,Me=Ab[Y.related_person]??-1;return we===-1&&Me===-1?0:we===-1?1:Me===-1?-1:Me-we}):[]},[(FD=n==null?void 0:n.acf)==null?void 0:FD.relationships,Ab]),Db={};Nle.forEach((I,G)=>{var Y,we,Me,Xe,it,Qi,on,Gs,Fh;if(I.data){const Ym=CD[G];Db[Ym]={name:cr(I.data),logo:((Me=(we=(Y=I.data._embedded)==null?void 0:Y["wp:featuredmedia"])==null?void 0:we[0])==null?void 0:Me.source_url)||((Fh=(Gs=(on=(Qi=(it=(Xe=I.data._embedded)==null?void 0:Xe["wp:featuredmedia"])==null?void 0:it[0])==null?void 0:Qi.media_details)==null?void 0:on.sizes)==null?void 0:Gs.thumbnail)==null?void 0:Fh.source_url)||null}}});const Gm=k.useMemo(()=>{var I;return(I=n==null?void 0:n.acf)!=null&&I.work_history?[...n.acf.work_history].map((G,Y)=>({...G,originalIndex:Y})).sort((G,Y)=>{if(G.is_current&&!Y.is_current)return-1;if(!G.is_current&&Y.is_current)return 1;const we=G.start_date?new Date(G.start_date):new Date(0);return(Y.start_date?new Date(Y.start_date):new Date(0))-we}):[]},[(qD=n==null?void 0:n.acf)==null?void 0:qD.work_history]),ND=k.useMemo(()=>o?o.filter(G=>G.type==="todo").sort((G,Y)=>{if(G.is_completed&&!Y.is_completed)return 1;if(!G.is_completed&&Y.is_completed)return-1;if(!G.is_completed&&!Y.is_completed){if(G.due_date&&Y.due_date)return new Date(G.due_date)-new Date(Y.due_date);if(G.due_date&&!Y.due_date)return-1;if(!G.due_date&&Y.due_date)return 1}return new Date(Y.created)-new Date(G.created)}):[],[o]);if(k.useEffect(()=>{(n==null?void 0:n.status)==="trash"&&e("/people",{replace:!0})},[n,e]),i)return d.jsx("div",{className:"flex items-center justify-center h-64",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(s||!n)return d.jsxs("div",{className:"card p-6 text-center",children:[d.jsx("p",{className:"text-red-600",children:"Failed to load person."}),d.jsx(Ye,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]});if(n.status==="trash")return null;const Ir=n.acf||{},$b=["facebook","linkedin","instagram","twitter","bluesky","threads","slack","website"],Tle=((LD=Ir.contact_info)==null?void 0:LD.filter(I=>$b.includes(I.contact_type)))||[],kD={linkedin:1,twitter:2,bluesky:3,threads:4,instagram:5,facebook:6,slack:7,website:8},TD=[...Tle].sort((I,G)=>{const Y=kD[I.contact_type]||99,we=kD[G.contact_type]||99;return Y-we}),Ole=I=>{switch(I){case"facebook":return $_e;case"linkedin":return oEe;case"instagram":return q_e;case"twitter":return H_e;case"bluesky":return A_e;case"threads":return V_e;case"slack":return B_e;case"website":return ny;default:return ny}},jle=I=>{switch(I){case"facebook":return"text-[#1877F2]";case"linkedin":return"text-[#0077B7]";case"instagram":return"text-[#E4405F]";case"twitter":return"text-[#1DA1F2]";case"bluesky":return"text-[#00A8E8]";case"threads":return"text-[#000000]";case"slack":return"text-[#4A154B]";case"website":return"text-gray-600";default:return"text-gray-600"}};return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs(Ye,{to:"/people",className:"flex items-center text-gray-600 hover:text-gray-900",children:[d.jsx(C0,{className:"w-4 h-4 md:mr-2"}),d.jsx("span",{className:"hidden md:inline",children:"Back to people"})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("button",{onClick:Cle,className:"btn-secondary",children:[d.jsx(iI,{className:"w-4 h-4 md:mr-2"}),d.jsx("span",{className:"hidden md:inline",children:"Export vCard"})]}),d.jsxs("button",{onClick:()=>Sr(!0),className:"btn-secondary",children:[d.jsx(Fte,{className:"w-4 h-4 md:mr-2"}),d.jsx("span",{className:"hidden md:inline",children:"Edit"})]}),d.jsxs("button",{onClick:Mb,className:"btn-danger",children:[d.jsx(ui,{className:"w-4 h-4 md:mr-2"}),d.jsx("span",{className:"hidden md:inline",children:"Delete"})]})]})]}),d.jsxs("div",{className:"card p-6 relative",children:[d.jsx("div",{className:"absolute top-4 right-4",children:d.jsx(Ye,{to:`/people/${t}/family-tree`,className:"btn-secondary text-sm",children:"View family tree"})}),d.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[d.jsxs("div",{className:"relative group",children:[n.thumbnail?d.jsx("img",{src:n.thumbnail,alt:n.name,className:"w-28 h-28 rounded-full object-cover"}):d.jsx("div",{className:"w-28 h-28 bg-gray-200 rounded-full flex items-center justify-center",children:d.jsx("span",{className:"text-3xl font-medium text-gray-500",children:((BD=n.first_name)==null?void 0:BD[0])||"?"})}),d.jsx("div",{className:"absolute inset-0 rounded-full bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var I;return(I=P.current)==null?void 0:I.click()},children:T?d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):d.jsx(jte,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),d.jsx("input",{ref:P,type:"file",accept:"image/*",onChange:Ele,className:"hidden",disabled:T})]}),d.jsxs("div",{className:"flex-1 space-y-3",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("h1",{className:"text-2xl font-bold",children:[n.name,Ks&&d.jsx("span",{className:"ml-1 text-gray-500",children:""})]}),n.is_favorite&&d.jsx($d,{className:"w-5 h-5 text-yellow-400 fill-current"})]}),Ir.nickname&&d.jsxs("p",{className:"text-gray-500",children:['"',Ir.nickname,'"']}),Ks&&gu&&d.jsxs("p",{className:"text-gray-500 text-sm",children:[Ig(Ir.gender)&&d.jsx("span",{className:"mr-1",children:Ig(Ir.gender)}),"Died ",Cn(gu,Hm?"MMMM d":"MMMM d, yyyy"),Sl!==null&&` at age ${Sl}`]}),!Ks&&Sl!==null&&d.jsxs("p",{className:"text-gray-500 text-sm",children:[Ig(Ir.gender)&&d.jsx("span",{className:"mr-1",children:Ig(Ir.gender)}),Sl," years old"]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[n.labels&&n.labels.length>0&&n.labels.map((I,G)=>d.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 group/label",children:[I,d.jsx("button",{onClick:()=>Sle(I),className:"opacity-0 group-hover/label:opacity-100 transition-opacity hover:bg-gray-200 rounded-full p-0.5",title:"Remove label",children:d.jsx(Rt,{className:"w-3 h-3"})})]},G)),_?d.jsxs("div",{className:"inline-flex items-center gap-2",children:[d.jsxs("select",{value:E,onChange:I=>N(I.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1",autoFocus:!0,disabled:ge.length===0,children:[d.jsx("option",{value:"",children:"Select a label..."}),ge.map(I=>d.jsx("option",{value:I.id,children:I.name},I.id))]}),d.jsx("button",{onClick:_le,disabled:!E,className:"text-xs px-2 py-1 bg-primary-600 text-white rounded hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"}),d.jsx("button",{onClick:()=>{C(!1),N("")},className:"text-xs px-2 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Cancel"})]}):ge.length>0&&d.jsxs("button",{onClick:()=>C(!0),className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",children:[d.jsx(Jt,{className:"w-3 h-3 mr-1"}),"Add label"]})]}),TD.length>0&&d.jsx("div",{className:"flex items-center gap-3 mt-4",children:TD.map((I,G)=>{const Y=Ole(I.contact_type),we=jle(I.contact_type);let Me=I.contact_value;return Me.match(/^https?:\/\//i)||(Me=`https://${Me}`),d.jsx("a",{href:Me,target:"_blank",rel:"noopener noreferrer",className:`flex-shrink-0 hover:opacity-80 transition-opacity ${we}`,title:`${I.contact_type.charAt(0).toUpperCase()+I.contact_type.slice(1)}: ${I.contact_value}`,children:d.jsx(Y,{className:"w-5 h-5"})},G)})})]})]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[!Ks&&d.jsxs("div",{className:"card p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h2",{className:"font-semibold",children:"Contact information"}),d.jsxs("button",{onClick:()=>K(!0),className:"btn-secondary text-sm",children:[d.jsx(ra,{className:"w-4 h-4 md:mr-1"}),d.jsx("span",{className:"hidden md:inline",children:"Edit"})]})]}),((zD=Ir.contact_info)==null?void 0:zD.filter(I=>!$b.includes(I.contact_type)).length)>0?d.jsx("div",{className:"space-y-2",children:(()=>{const I={email:1,phone:2,mobile:2,calendar:3,other:4};return Ir.contact_info.filter(Y=>!$b.includes(Y.contact_type)).map((Y,we)=>({...Y,originalIndex:we})).sort((Y,we)=>{const Me=I[Y.contact_type]||99,Xe=I[we.contact_type]||99;return Me!==Xe?Me-Xe:Y.originalIndex-we.originalIndex}).map(Y=>{const we=Y.contact_type==="email"?vM:Y.contact_type==="phone"||Y.contact_type==="mobile"?bM:Y.contact_type==="calendar"?yo:ny,Me=Y.contact_type==="email",Xe=Y.contact_type==="phone"||Y.contact_type==="mobile",it=Y.contact_type==="mobile",Qi=Y.contact_type==="calendar";let on=null,Gs=null;return Me?on=`mailto:${Y.contact_value}`:Xe?on=`tel:${SD(Y.contact_value)}`:Qi&&(on=Y.contact_value,Gs="_blank"),d.jsx("div",{children:d.jsxs("div",{className:"flex items-center rounded-md -mx-2 px-2 py-1.5",children:[d.jsx(we,{className:"w-4 h-4 text-gray-400 mr-3 flex-shrink-0"}),d.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[d.jsxs("span",{className:"text-sm text-gray-500",children:[Y.contact_label||Y.contact_type,": "]}),on?d.jsx("a",{href:on,target:Gs||void 0,rel:Gs==="_blank"?"noopener noreferrer":void 0,className:"text-primary-600 hover:text-primary-700 hover:underline",children:Y.contact_value}):d.jsx("span",{children:Y.contact_value}),it&&d.jsx("a",{href:`https://wa.me/${SD(Y.contact_value)}`,target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0 hover:opacity-80 transition-opacity",title:"Open WhatsApp",children:d.jsx(k0,{className:"w-4 h-4 text-[#25D366]"})})]})]})},Y.originalIndex)})})()}):d.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No contact information yet. ",d.jsx("button",{onClick:()=>K(!0),className:"text-primary-600 hover:underline",children:"Add some"})]})]}),d.jsxs("div",{className:"card p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h2",{className:"font-semibold",children:"Events"}),d.jsxs("button",{onClick:()=>{Fe(null),F(!0)},className:"btn-secondary text-sm",children:[d.jsx(Jt,{className:"w-4 h-4 md:mr-1"}),d.jsx("span",{className:"hidden md:inline",children:"Add Important Date"})]})]}),$h.length>0?d.jsx("div",{className:"space-y-3",children:$h.map(I=>{const G=Array.isArray(I.date_type)?I.date_type[0]:I.date_type,Y=(G==null?void 0:G.toLowerCase())||"",we=Y.includes("died"),Me=Y.includes("wedding")||Y.includes("marriage")?Npe:Y.includes("birthday")?Cpe:yo,Xe=I.year_unknown?"MMMM d":"MMMM d, yyyy";return d.jsxs("div",{className:"flex items-start group",children:[d.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center mr-3",children:we?d.jsx("span",{className:"text-gray-500 text-lg font-semibold",children:""}):d.jsx(Me,{className:"w-4 h-4 text-gray-500"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-sm font-medium",children:I.title}),d.jsx("p",{className:"text-xs text-gray-500",children:I.date_value&&Cn(new Date(I.date_value),Xe)}),G&&d.jsx("p",{className:"text-xs text-gray-400 capitalize",children:G})]}),d.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[d.jsx("button",{onClick:()=>{Fe(I),F(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit date",children:d.jsx(ra,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),d.jsx("button",{onClick:()=>ule(I.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete date",children:d.jsx(ui,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},I.id)})}):d.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No important dates yet. ",d.jsx("button",{onClick:()=>{Fe(null),F(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]}),d.jsxs("div",{className:"card p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h2",{className:"font-semibold",children:"Timeline"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("button",{onClick:()=>D(!0),className:"btn-secondary text-sm",children:[d.jsx(Jt,{className:"w-4 h-4 md:mr-1"}),d.jsx("span",{className:"hidden md:inline",children:"Note"})]}),d.jsxs("button",{onClick:()=>R(!0),className:"btn-secondary text-sm",children:[d.jsx(Jt,{className:"w-4 h-4 md:mr-1"}),d.jsx("span",{className:"hidden md:inline",children:"Activity"})]})]})]}),d.jsx(K_e,{timeline:o||[],onEdit:ble,onDelete:xle,onToggleTodo:_D,personId:t,allPeople:w||[]})]}),d.jsxs("div",{className:"card p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h2",{className:"font-semibold",children:"Work history"}),d.jsxs("button",{onClick:()=>{vn(null),xl(null),at(!0)},className:"btn-secondary text-sm",children:[d.jsx(Jt,{className:"w-4 h-4 md:mr-1"}),d.jsx("span",{className:"hidden md:inline",children:"Add work history"})]})]}),(Gm==null?void 0:Gm.length)>0?d.jsx("div",{className:"space-y-4",children:Gm.map((I,G)=>{const Y=I.company?Db[I.company]:null,we=I.originalIndex;return d.jsxs("div",{className:"flex items-start group",children:[Y!=null&&Y.logo?d.jsx("img",{src:Y.logo,alt:Y.name,className:"w-20 h-20 rounded-lg object-contain bg-white mr-3 flex-shrink-0"}):d.jsx("div",{className:"w-20 h-20 bg-white rounded-lg flex items-center justify-center mr-3 flex-shrink-0 border border-gray-200",children:d.jsx(kr,{className:"w-10 h-10 text-gray-500"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"font-medium",children:I.job_title}),I.company&&Y&&d.jsx(Ye,{to:`/companies/${I.company}`,className:"text-sm text-primary-600 hover:underline",children:Y.name}),d.jsxs("p",{className:"text-sm text-gray-500",children:[I.start_date&&Cn(new Date(I.start_date),"MMM yyyy")," - ",I.is_current?"Present":I.end_date?Cn(new Date(I.end_date),"MMM yyyy"):""]}),I.description&&d.jsx("p",{className:"text-sm text-gray-600 mt-1",children:I.description})]}),d.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[d.jsx("button",{onClick:()=>{var Xe,it;const Me=(it=(Xe=n==null?void 0:n.acf)==null?void 0:Xe.work_history)==null?void 0:it[we];vn(Me),xl(we),at(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit work history",children:d.jsx(ra,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),d.jsx("button",{onClick:()=>wle(we),className:"p-1 hover:bg-red-50 rounded",title:"Delete work history",children:d.jsx(ui,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},we)})}):d.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No work history yet. ",d.jsx("button",{onClick:()=>{vn(null),xl(null),at(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]}),S.length>0&&d.jsxs("div",{className:"card p-6",children:[d.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[d.jsx(Vy,{className:"w-5 h-5 mr-2"}),"Investments"]}),d.jsx("div",{className:"space-y-3",children:S.map(I=>d.jsxs(Ye,{to:`/companies/${I.id}`,className:"flex items-center p-2 rounded-lg hover:bg-gray-50 transition-colors group",children:[I.thumbnail?d.jsx("img",{src:I.thumbnail,alt:I.name,className:"w-12 h-12 rounded-lg object-contain bg-white border border-gray-200"}):d.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:d.jsx(kr,{className:"w-6 h-6 text-gray-400"})}),d.jsxs("div",{className:"ml-3",children:[d.jsx("p",{className:"text-sm font-medium group-hover:text-primary-600",children:I.name}),I.industry&&d.jsx("p",{className:"text-xs text-gray-500",children:I.industry})]})]},I.id))})]}),d.jsx(G_e,{isOpen:O,onClose:()=>D(!1),onSubmit:hle,isLoading:f.isPending}),d.jsx(mA,{isOpen:z,onClose:()=>{R(!1),Z(null),wl(null),mu(null)},onSubmit:fle,isLoading:ee?m.isPending:p.isPending,personId:t,initialData:Pb,activity:ee}),d.jsx(TM,{isOpen:jb,onClose:()=>{pu(!1),wl(null)},todo:oi,onComplete:gle,onCompleteAsActivity:yle}),d.jsx(nse,{isOpen:B,onClose:()=>{q(!1),oe(null)},onSubmit:U?mle:ple,isLoading:U?v.isPending:g.isPending,todo:U}),d.jsx(Q_e,{isOpen:$,onClose:()=>K(!1),onSubmit:rle,isLoading:Wt,contactInfo:Ir.contact_info||[]}),d.jsx(kM,{isOpen:W,onClose:()=>{F(!1),Fe(null)},onSubmit:nle,isLoading:nt,dateItem:me,personId:t,allPeople:w||[],isPeopleLoading:x}),d.jsx(J_e,{isOpen:X,onClose:()=>{Q(!1),St(null),ne(null)},onSubmit:ile,isLoading:$n,relationship:Ke,personId:t,allPeople:w||[],isPeopleLoading:x}),d.jsx(Z_e,{isOpen:Ce,onClose:()=>{xe(!1),ce(null),He(null)},onSubmit:sle,isLoading:gt,address:fe}),d.jsx(tEe,{isOpen:Be,onClose:()=>{at(!1),vn(null),xl(null)},onSubmit:ole,isLoading:Ws,workHistoryItem:_i}),d.jsx(CM,{isOpen:Kr,onClose:()=>Sr(!1),onSubmit:ale,isLoading:A,person:n})]}),d.jsxs("div",{className:"space-y-6",children:[(Ir.how_we_met||Ir.met_date)&&d.jsxs("div",{className:"card p-6",children:[d.jsx("h2",{className:"font-semibold mb-3",children:"How we met"}),Ir.met_date&&d.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[d.jsx(yo,{className:"w-4 h-4 inline mr-1"}),Cn(new Date(Ir.met_date),"MMMM d, yyyy")]}),Ir.how_we_met&&d.jsx("p",{className:"text-sm",children:Ir.how_we_met})]}),d.jsxs("div",{className:"card p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsx("h2",{className:"font-semibold",children:"Todos"}),d.jsxs("button",{onClick:()=>{oe(null),q(!0)},className:"btn-secondary text-sm",children:[d.jsx(Jt,{className:"w-4 h-4 md:mr-1"}),d.jsx("span",{className:"hidden md:inline",children:"Add todo"})]})]}),ND.length>0?d.jsx("div",{className:"space-y-2",children:ND.map(I=>{const G=rm(I);return d.jsxs("div",{className:"flex items-start p-2 rounded hover:bg-gray-50 group",children:[d.jsx("button",{onClick:()=>_D(I),className:"mt-0.5 mr-2 flex-shrink-0",title:I.is_completed?"Mark as incomplete":"Mark as complete",children:I.is_completed?d.jsx(rI,{className:"w-5 h-5 text-primary-600"}):d.jsx(Dd,{className:`w-5 h-5 ${G?"text-red-600":"text-gray-400"}`})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:`text-sm ${I.is_completed?"line-through text-gray-400":G?"text-red-600":""}`,children:I.content}),I.due_date&&d.jsxs("p",{className:`text-xs mt-0.5 ${G&&!I.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",Cn(new Date(I.due_date),"MMM d, yyyy"),G&&!I.is_completed&&" (overdue)"]})]}),d.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[d.jsx("button",{onClick:()=>{oe(I),q(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit todo",children:d.jsx(ra,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),d.jsx("button",{onClick:()=>ED(I.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete todo",children:d.jsx(ui,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},I.id)})}):d.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No todos yet."})]}),d.jsxs("div",{className:"card p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsx("h2",{className:"font-semibold",children:"Relationships"}),d.jsxs("button",{onClick:()=>{St(null),ne(null),Q(!0)},className:"btn-secondary text-sm",children:[d.jsx(Jt,{className:"w-4 h-4 md:mr-1"}),d.jsx("span",{className:"hidden md:inline",children:"Add relationship"})]})]}),(Km==null?void 0:Km.length)>0?d.jsx("div",{className:"space-y-2",children:Km.map((I,G)=>{var we,Me,Xe;const Y=((Me=(we=n==null?void 0:n.acf)==null?void 0:we.relationships)==null?void 0:Me.findIndex(it=>it.related_person===I.related_person&&it.relationship_type===I.relationship_type))??G;return d.jsxs("div",{className:"flex items-center p-2 rounded hover:bg-gray-50 group",children:[d.jsxs(Ye,{to:`/people/${I.related_person}`,className:"flex items-center flex-1 min-w-0",children:[I.person_thumbnail?d.jsx("img",{src:I.person_thumbnail,alt:Kn(I.person_name)||"",className:"w-8 h-8 rounded-full object-cover mr-2"}):d.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full mr-2 flex items-center justify-center",children:d.jsx("span",{className:"text-xs font-medium text-gray-500",children:((Xe=Kn(I.person_name))==null?void 0:Xe[0])||"?"})}),d.jsxs("div",{children:[d.jsxs("p",{className:"text-sm font-medium",children:[Kn(I.person_name)||`Person #${I.related_person}`,kle[I.related_person]&&d.jsx("span",{className:"text-gray-400 ml-1",title:"Deceased",children:""})]}),d.jsx("p",{className:"text-xs text-gray-500",children:Kn(I.relationship_name||I.relationship_label)})]})]}),d.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[d.jsx("button",{onClick:()=>{var Qi,on;const it=(on=(Qi=n==null?void 0:n.acf)==null?void 0:Qi.relationships)==null?void 0:on[Y];St(it),ne(Y),Q(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit relationship",children:d.jsx(ra,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),d.jsx("button",{onClick:()=>cle(Y),className:"p-1 hover:bg-red-50 rounded",title:"Delete relationship",children:d.jsx(ui,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},G)})}):d.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No relationships yet. ",d.jsx("button",{onClick:()=>{St(null),ne(null),Q(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]}),!Ks&&d.jsxs("div",{className:"card p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h2",{className:"font-semibold",children:"Addresses"}),d.jsxs("button",{onClick:()=>{ce(null),He(null),xe(!0)},className:"btn-secondary text-sm",children:[d.jsx(Jt,{className:"w-4 h-4 md:mr-1"}),d.jsx("span",{className:"hidden md:inline",children:"Add address"})]})]}),((VD=Ir.addresses)==null?void 0:VD.length)>0?d.jsx("div",{className:"space-y-4",children:Ir.addresses.map((I,G)=>{const Y=[];I.street&&Y.push(I.street);const we=[I.postal_code,I.city].filter(Boolean).join(" ");we&&Y.push(we);const Me=[I.state,I.country].filter(Boolean).join(", ");Me&&Y.push(Me);const Xe=[I.street,I.postal_code,I.city,I.state,I.country].filter(Boolean).join(", "),it=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(Xe)}`;return d.jsx("div",{className:"group",children:d.jsxs("div",{className:"flex items-start rounded-md -mx-2 px-2 py-1.5 group-hover:bg-gray-50 transition-colors",children:[d.jsx(Rpe,{className:"w-4 h-4 text-gray-400 mr-3 mt-0.5 flex-shrink-0"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[I.address_label&&d.jsx("span",{className:"text-sm text-gray-500 block mb-1",children:I.address_label}),d.jsx("a",{href:it,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-700 hover:underline text-sm",children:Y.map((Qi,on)=>d.jsx("span",{className:"block",children:Qi},on))})]}),d.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[d.jsx("button",{onClick:()=>{ce(I),He(G),xe(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit address",children:d.jsx(ra,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),d.jsx("button",{onClick:()=>lle(G),className:"p-1 hover:bg-red-50 rounded",title:"Delete address",children:d.jsx(ui,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})},G)})}):d.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No addresses yet. ",d.jsx("button",{onClick:()=>{ce(null),He(null),xe(!0)},className:"text-primary-600 hover:underline",children:"Add one"})]})]})]})]})]})}function lEe({company:t}){var e,r,n,i,s;return d.jsx(Ye,{to:`/companies/${t.id}`,className:"card p-4 hover:shadow-md transition-shadow",children:d.jsxs("div",{className:"flex items-start",children:[(n=(r=(e=t._embedded)==null?void 0:e["wp:featuredmedia"])==null?void 0:r[0])!=null&&n.source_url?d.jsx("img",{src:t._embedded["wp:featuredmedia"][0].source_url,alt:cr(t),className:"w-12 h-12 rounded-lg object-contain bg-white"}):d.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:d.jsx(kr,{className:"w-6 h-6 text-gray-400"})}),d.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[d.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:cr(t)}),((i=t.acf)==null?void 0:i.industry)&&d.jsx("p",{className:"text-sm text-gray-500",children:t.acf.industry}),((s=t.acf)==null?void 0:s.website)&&d.jsx("p",{className:"text-xs text-primary-600 truncate",children:t.acf.website})]})]})})}function cEe(){const[t,e]=k.useState(""),[r,n]=k.useState(!1),[i,s]=k.useState(!1),o=ms(),a=vt(),{data:l,isLoading:c,error:u}=lt({queryKey:["companies",t],queryFn:async()=>(await qe.getCompanies({search:t,per_page:100,_embed:!0})).data}),h=tt({mutationFn:async m=>{const g={title:m.title,status:"publish",parent:m.parentId||0,acf:{website:m.website,industry:m.industry,investors:m.investors||[]}};return(await qe.createCompany(g)).data},onSuccess:m=>{a.invalidateQueries({queryKey:["companies"]}),a.invalidateQueries({queryKey:["dashboard"]}),n(!1),o(`/companies/${m.id}`)}}),f=async m=>{s(!0);try{await h.mutateAsync(m)}finally{s(!1)}},p=k.useMemo(()=>l?[...l].sort((m,g)=>{var b,w;const v=(((b=m.title)==null?void 0:b.rendered)||m.title||"").toLowerCase(),y=(((w=g.title)==null?void 0:w.rendered)||g.title||"").toLowerCase();return v.localeCompare(y)}):[],[l]);return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{className:"relative flex-1 max-w-md",children:[d.jsx(Ec,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),d.jsx("input",{type:"search",placeholder:"Search organizations...",value:t,onChange:m=>e(m.target.value),className:"input pl-9"})]}),d.jsxs("button",{onClick:()=>n(!0),className:"btn-primary",children:[d.jsx(Jt,{className:"w-4 h-4 md:mr-2"}),d.jsx("span",{className:"hidden md:inline",children:"Add organization"})]})]}),c&&d.jsx("div",{className:"flex items-center justify-center h-64",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),u&&d.jsx("div",{className:"card p-6 text-center",children:d.jsx("p",{className:"text-red-600",children:"Failed to load organizations."})}),!c&&!u&&(p==null?void 0:p.length)===0&&d.jsxs("div",{className:"card p-12 text-center",children:[d.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx(kr,{className:"w-6 h-6 text-gray-400"})}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No organizations found"}),d.jsx("p",{className:"text-gray-500 mb-4",children:t?"Try a different search.":"Add your first organization."}),!t&&d.jsxs("button",{onClick:()=>n(!0),className:"btn-primary",children:[d.jsx(Jt,{className:"w-4 h-4 md:mr-2"}),d.jsx("span",{className:"hidden md:inline",children:"Add organization"})]})]}),!c&&!u&&(p==null?void 0:p.length)>0&&d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(m=>d.jsx(lEe,{company:m},m.id))}),d.jsx(NM,{isOpen:r,onClose:()=>n(!1),onSubmit:f,isLoading:i})]})}function uEe(){var N,T,j,P,O,D,z;const{id:t}=nM(),e=ms(),r=vt(),n=k.useRef(null),[i,s]=k.useState(!1),[o,a]=k.useState(!1),[l,c]=k.useState(!1),{data:u,isLoading:h,error:f}=lt({queryKey:["company",t],queryFn:async()=>(await qe.getCompany(t,{_embed:!0})).data}),{data:p}=lt({queryKey:["company-people",t],queryFn:async()=>(await Ae.getCompanyPeople(t)).data}),{data:m}=lt({queryKey:["company",u==null?void 0:u.parent],queryFn:async()=>(await qe.getCompany(u.parent,{_embed:!0})).data,enabled:!!(u!=null&&u.parent)}),{data:g=[]}=lt({queryKey:["company-children",t],queryFn:async()=>(await qe.getCompanies({parent:t,per_page:100,_embed:!0})).data}),v=((N=u==null?void 0:u.acf)==null?void 0:N.investors)||[],{data:y=[]}=lt({queryKey:["company-investors",t,v],queryFn:async()=>{if(!v.length)return[];const[R,B]=await Promise.all([qe.getPeople({per_page:100,include:v.join(","),_embed:!0}),qe.getCompanies({per_page:100,include:v.join(","),_embed:!0})]),q=(R.data||[]).map(W=>{var F,X,Q,Ce;return{id:W.id,type:"person",name:Kn(((F=W.title)==null?void 0:F.rendered)||""),thumbnail:(Ce=(Q=(X=W._embedded)==null?void 0:X["wp:featuredmedia"])==null?void 0:Q[0])==null?void 0:Ce.source_url}}),$=(B.data||[]).map(W=>{var F,X,Q;return{id:W.id,type:"company",name:cr(W),thumbnail:(Q=(X=(F=W._embedded)==null?void 0:F["wp:featuredmedia"])==null?void 0:X[0])==null?void 0:Q.source_url}}),K=[...q,...$];return v.map(W=>K.find(F=>F.id===W)).filter(Boolean)},enabled:v.length>0}),{data:b=[]}=lt({queryKey:["investments",t],queryFn:async()=>(await Ae.getInvestments(t)).data,enabled:!!t}),w=tt({mutationFn:()=>qe.deleteCompany(t,{force:!0}),onSuccess:()=>{r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["dashboard"]}),e("/companies")}}),x=tt({mutationFn:R=>qe.updateCompany(t,R),onSuccess:()=>{r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["company-investors",t]}),r.invalidateQueries({queryKey:["dashboard"]})}});lh(cr(u)||"Organization"),k.useEffect(()=>{(u==null?void 0:u.status)==="trash"&&e("/companies",{replace:!0})},[u,e]);const S=async()=>{if(window.confirm("Are you sure you want to delete this organization?"))try{await w.mutateAsync()}catch(R){console.error("Failed to delete company:",R),alert("Failed to delete organization. Please try again.")}},_=async R=>{c(!0);try{const B={title:R.title,parent:R.parentId||0,acf:{website:R.website,industry:R.industry,investors:R.investors||[]}};await x.mutateAsync(B),a(!1)}catch(B){console.error("Failed to save company:",B),alert("Failed to save organization. Please try again.")}finally{c(!1)}},C=async R=>{var q;const B=(q=R.target.files)==null?void 0:q[0];if(B){if(!B.type.startsWith("image/")){alert("Please select an image file");return}if(B.size>5*1024*1024){alert("Image size must be less than 5MB");return}s(!0);try{await Ae.uploadCompanyLogo(t,B),r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]})}catch($){console.error("Failed to upload logo:",$),alert("Failed to upload logo. Please try again.")}finally{s(!1),n.current&&(n.current.value="")}}};if(h)return d.jsx("div",{className:"flex items-center justify-center h-64",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(f||!u)return d.jsxs("div",{className:"card p-6 text-center",children:[d.jsx("p",{className:"text-red-600",children:"Failed to load organization."}),d.jsx(Ye,{to:"/companies",className:"btn-secondary mt-4",children:"Back to organizations"})]});if(u.status==="trash")return null;const E=u.acf||{};return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs(Ye,{to:"/companies",className:"flex items-center text-gray-600 hover:text-gray-900",children:[d.jsx(C0,{className:"w-4 h-4 md:mr-2"}),d.jsx("span",{className:"hidden md:inline",children:"Back to organizations"})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("button",{onClick:()=>a(!0),className:"btn-secondary",children:[d.jsx(Fte,{className:"w-4 h-4 mr-2"}),"Edit"]}),d.jsxs("button",{onClick:S,className:"btn-danger",children:[d.jsx(ui,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]}),d.jsx("div",{className:"card p-6",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"relative group",children:[(P=(j=(T=u._embedded)==null?void 0:T["wp:featuredmedia"])==null?void 0:j[0])!=null&&P.source_url?d.jsx("img",{src:u._embedded["wp:featuredmedia"][0].source_url,alt:cr(u),className:"w-24 h-24 rounded-lg object-contain bg-white"}):d.jsx("div",{className:"w-24 h-24 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:d.jsx(kr,{className:"w-12 h-12 text-gray-400"})}),d.jsx("div",{className:"absolute inset-0 rounded-lg bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var R;return(R=n.current)==null?void 0:R.click()},children:i?d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):d.jsx(jte,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),d.jsx("input",{ref:n,type:"file",accept:"image/*",onChange:C,className:"hidden",disabled:i})]}),d.jsxs("div",{children:[m&&d.jsxs(Ye,{to:`/companies/${m.id}`,className:"text-sm text-primary-600 hover:underline flex items-center mb-1",children:[d.jsx(zF,{className:"w-3 h-3 mr-1"}),"Subsidiary of ",cr(m)]}),d.jsx("h1",{className:"text-2xl font-bold",children:cr(u)}),E.industry&&d.jsx("p",{className:"text-gray-500",children:E.industry}),E.website&&d.jsxs("a",{href:E.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline flex items-center mt-1",children:[d.jsx(ny,{className:"w-4 h-4 mr-1"}),E.website]})]})]})}),g.length>0&&d.jsxs("div",{className:"card p-6",children:[d.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[d.jsx(zF,{className:"w-5 h-5 mr-2"}),"Subsidiaries"]}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:g.map(R=>{var B,q,$,K;return d.jsxs(Ye,{to:`/companies/${R.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[($=(q=(B=R._embedded)==null?void 0:B["wp:featuredmedia"])==null?void 0:q[0])!=null&&$.source_url?d.jsx("img",{src:R._embedded["wp:featuredmedia"][0].source_url,alt:cr(R),className:"w-10 h-10 rounded object-contain bg-white"}):d.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded flex items-center justify-center",children:d.jsx(kr,{className:"w-5 h-5 text-gray-400"})}),d.jsxs("div",{className:"ml-3",children:[d.jsx("p",{className:"text-sm font-medium",children:cr(R)}),((K=R.acf)==null?void 0:K.industry)&&d.jsx("p",{className:"text-xs text-gray-500",children:R.acf.industry})]})]},R.id)})})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"card p-6",children:[d.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[d.jsx(Fs,{className:"w-5 h-5 mr-2"}),"Current employees"]}),((O=p==null?void 0:p.current)==null?void 0:O.length)>0?d.jsx("div",{className:"space-y-2",children:p.current.map(R=>{var B;return d.jsxs(Ye,{to:`/people/${R.id}`,className:"flex items-center p-2 rounded hover:bg-gray-50",children:[R.thumbnail?d.jsx("img",{src:R.thumbnail,alt:"",loading:"lazy",className:"w-8 h-8 rounded-full"}):d.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:d.jsx("span",{className:"text-xs text-gray-500",children:((B=R.name)==null?void 0:B[0])||"?"})}),d.jsxs("div",{className:"ml-2",children:[d.jsx("p",{className:"text-sm font-medium",children:R.name}),R.job_title&&d.jsx("p",{className:"text-xs text-gray-500",children:R.job_title})]})]},R.id)})}):d.jsx("p",{className:"text-sm text-gray-500",children:"No current employees."})]}),d.jsxs("div",{className:"card p-6",children:[d.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[d.jsx(Fs,{className:"w-5 h-5 mr-2"}),"Former employees"]}),((D=p==null?void 0:p.former)==null?void 0:D.length)>0?d.jsx("div",{className:"space-y-2",children:p.former.map(R=>{var B;return d.jsxs(Ye,{to:`/people/${R.id}`,className:"flex items-center p-2 rounded hover:bg-gray-50",children:[R.thumbnail?d.jsx("img",{src:R.thumbnail,alt:"",loading:"lazy",className:"w-8 h-8 rounded-full opacity-75"}):d.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center opacity-75",children:d.jsx("span",{className:"text-xs text-gray-500",children:((B=R.name)==null?void 0:B[0])||"?"})}),d.jsxs("div",{className:"ml-2",children:[d.jsx("p",{className:"text-sm font-medium text-gray-700",children:R.name}),R.job_title&&d.jsx("p",{className:"text-xs text-gray-500",children:R.job_title})]})]},R.id)})}):d.jsx("p",{className:"text-sm text-gray-500",children:"No former employees."})]})]}),y.length>0&&d.jsxs("div",{className:"card p-6",children:[d.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[d.jsx(Vy,{className:"w-5 h-5 mr-2"}),"Investors"]}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:y.map(R=>{const B=R.type==="person",q=B?`/people/${R.id}`:`/companies/${R.id}`;return d.jsxs(Ye,{to:q,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[R.thumbnail?d.jsx("img",{src:R.thumbnail,alt:R.name,loading:"lazy",className:`w-10 h-10 object-cover ${B?"rounded-full":"rounded"}`}):d.jsx("div",{className:`w-10 h-10 bg-gray-100 flex items-center justify-center ${B?"rounded-full":"rounded"}`,children:B?d.jsx(Za,{className:"w-5 h-5 text-gray-400"}):d.jsx(kr,{className:"w-5 h-5 text-gray-400"})}),d.jsxs("div",{className:"ml-3",children:[d.jsx("p",{className:"text-sm font-medium",children:R.name}),d.jsx("p",{className:"text-xs text-gray-500",children:B?"Person":"Organization"})]})]},`${R.type}-${R.id}`)})})]}),b.length>0&&d.jsxs("div",{className:"card p-6",children:[d.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[d.jsx(Vy,{className:"w-5 h-5 mr-2"}),"Invested in"]}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:b.map(R=>d.jsxs(Ye,{to:`/companies/${R.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[R.thumbnail?d.jsx("img",{src:R.thumbnail,alt:R.name,loading:"lazy",className:"w-10 h-10 object-contain rounded"}):d.jsx("div",{className:"w-10 h-10 bg-gray-100 flex items-center justify-center rounded",children:d.jsx(kr,{className:"w-5 h-5 text-gray-400"})}),d.jsxs("div",{className:"ml-3",children:[d.jsx("p",{className:"text-sm font-medium",children:R.name}),R.industry&&d.jsx("p",{className:"text-xs text-gray-500",children:R.industry})]})]},R.id))})]}),((z=E.contact_info)==null?void 0:z.length)>0&&d.jsxs("div",{className:"card p-6",children:[d.jsx("h2",{className:"font-semibold mb-4",children:"Contact information"}),d.jsx("div",{className:"space-y-3",children:E.contact_info.map((R,B)=>d.jsxs("div",{children:[d.jsxs("span",{className:"text-sm text-gray-500",children:[R.contact_label||R.contact_type,":"]}),d.jsx("span",{className:"ml-2",children:R.contact_value})]},B))})]}),d.jsx(NM,{isOpen:o,onClose:()=>a(!1),onSubmit:_,isLoading:l,company:u})]})}function dEe({person:t,dateType:e}){var r;return d.jsx("div",{className:"flex items-center gap-3 py-2",children:d.jsxs(Ye,{to:`/people/${t.id}`,className:"flex items-center gap-3 flex-1 min-w-0 hover:opacity-80",children:[t.thumbnail?d.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}):d.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:d.jsx("span",{className:"text-sm font-medium text-gray-500",children:(r=t.name)==null?void 0:r[0]})}),d.jsx("span",{className:"font-medium truncate",children:t.name}),d.jsx("span",{className:"text-sm text-gray-500 capitalize flex-shrink-0",children:e})]})})}function hEe({dates:t}){const e=t[0],n=e.days_until===0?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600",i=[];return t.forEach(s=>{var a,l;const o=((a=s.date_type)==null?void 0:a[0])||"Date";((l=s.related_people)==null?void 0:l.length)>0?s.related_people.forEach(c=>{i.push({person:c,dateType:o})}):i.push({person:{id:null,name:s.title,thumbnail:null},dateType:o})}),d.jsx("div",{className:"card p-4 break-inside-avoid mb-4",children:d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:`w-14 h-14 rounded-lg ${n} flex items-center justify-center flex-shrink-0`,children:d.jsx("span",{className:"text-2xl font-bold leading-none",children:Cn(new Date(e.next_occurrence),"d")})}),d.jsx("div",{className:"flex-1 min-w-0 divide-y divide-gray-100",children:i.map(({person:s,dateType:o},a)=>d.jsx(dEe,{person:s,dateType:o},s.id?`${s.id}-${o}`:`${a}-${o}`))})]})})}function fEe(){const[t,e]=k.useState(!1),[r,n]=k.useState(!1),i=vt(),{data:s,isLoading:o,error:a}=Gpe(365),{data:l=[],isLoading:c}=Uc(),u=tt({mutationFn:async m=>{const g={title:m.title,status:"publish",date_type:m.date_type,acf:{date_value:m.date_value,related_people:m.related_people,is_recurring:m.is_recurring,year_unknown:m.year_unknown}};return(await qe.createDate(g)).data},onSuccess:()=>{i.invalidateQueries({queryKey:["reminders"]}),e(!1)}}),h=async m=>{n(!0);try{await u.mutateAsync(m)}finally{n(!1)}},f=(s==null?void 0:s.reduce((m,g)=>{const v=Cn(new Date(g.next_occurrence),"yyyy-MM-dd");return m[v]||(m[v]=[]),m[v].push(g),m},{}))||{},p=Object.entries(f).reduce((m,[g,v])=>{const y=Cn(new Date(g),"MMMM yyyy");return m[y]||(m[y]=[]),m[y].push(v),m},{});return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("p",{className:"text-gray-600",children:[(s==null?void 0:s.length)||0," upcoming dates"]}),d.jsxs("button",{onClick:()=>e(!0),className:"btn-primary",children:[d.jsx(Jt,{className:"w-4 h-4 md:mr-2"}),d.jsx("span",{className:"hidden md:inline",children:"Add date"})]})]}),o&&d.jsx("div",{className:"flex items-center justify-center h-64",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),a&&d.jsx("div",{className:"card p-6 text-center",children:d.jsx("p",{className:"text-red-600",children:"Failed to load dates."})}),!o&&!a&&(s==null?void 0:s.length)===0&&d.jsxs("div",{className:"card p-12 text-center",children:[d.jsx(yo,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),d.jsx("h3",{className:"text-lg font-medium mb-1",children:"No important dates"}),d.jsx("p",{className:"text-gray-500 mb-4",children:"Add birthdays, anniversaries, and more."}),d.jsxs("button",{onClick:()=>e(!0),className:"btn-primary",children:[d.jsx(Jt,{className:"w-4 h-4 md:mr-2"}),d.jsx("span",{className:"hidden md:inline",children:"Add date"})]})]}),Object.entries(p).map(([m,g])=>d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:m}),d.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 gap-4",children:g.map(v=>d.jsx(hEe,{dates:v},v[0].next_occurrence))})]},m)),d.jsx(kM,{isOpen:t,onClose:()=>e(!1),onSubmit:h,isLoading:r,allPeople:l,isPeopleLoading:c})]})}function pEe(){lh("Todos");const[t,e]=k.useState(!1),[r,n]=k.useState(null),[i,s]=k.useState(!1),[o,a]=k.useState(!1),[l,c]=k.useState(null),[u,h]=k.useState(!1),[f,p]=k.useState(!1),[m,g]=k.useState(null),{data:v,isLoading:y}=zte(!0),b=Vte(),w=Ype(),x=xM(),S=k.useMemo(()=>mre(new Date,3),[]),{incompleteTodos:_,recentlyCompletedTodos:C,olderCompletedTodos:E}=k.useMemo(()=>{if(!v)return{incompleteTodos:[],recentlyCompletedTodos:[],olderCompletedTodos:[]};const R=[],B=[],q=[];return v.forEach($=>{if(!$.is_completed)R.push($);else try{const K=hp($.created);Jge(K,S)?B.push($):q.push($)}catch{q.push($)}}),{incompleteTodos:R,recentlyCompletedTodos:B,olderCompletedTodos:q}},[v,S]),N=R=>{if(!R.is_completed){c(R),h(!0);return}b.mutate({todoId:R.id,data:{content:R.content,due_date:R.due_date,is_completed:!1}})},T=()=>{l&&(b.mutate({todoId:l.id,data:{content:l.content,due_date:l.due_date,is_completed:!0}}),h(!1),c(null))},j=()=>{if(!l)return;const R=new Date().toISOString().split("T")[0];g({content:l.content,activity_date:R,activity_type:"note",participants:[]}),h(!1),p(!0)},P=async R=>{if(l)try{await x.mutateAsync({personId:l.person_id,data:R}),await b.mutateAsync({todoId:l.id,data:{content:l.content,due_date:l.due_date,is_completed:!0}}),p(!1),c(null),g(null)}catch(B){console.error("Failed to create activity:",B),alert("Failed to create activity. Please try again.")}},O=async R=>{r&&(await b.mutateAsync({todoId:r.id,data:R}),s(!1),n(null))},D=async R=>{window.confirm("Are you sure you want to delete this todo?")&&await w.mutateAsync(R)};if(y)return d.jsx("div",{className:"flex items-center justify-center h-64",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});const z=[...C,...E];return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsx("h1",{className:"text-2xl font-bold",children:"Todos"}),d.jsxs("div",{className:"flex items-center gap-2",children:[E.length>0&&d.jsxs("button",{onClick:()=>e(!t),className:`btn-secondary text-sm flex items-center gap-2 ${t?"bg-primary-50 border-primary-300":""}`,children:[d.jsx(sI,{className:"w-4 h-4"}),t?"Hide older":"Show all completed"]}),d.jsxs("button",{onClick:()=>a(!0),className:"btn-primary text-sm flex items-center gap-2",children:[d.jsx(Jt,{className:"w-4 h-4"}),"Add todo"]})]})]}),d.jsxs("div",{className:"card",children:[d.jsx("div",{className:"p-4 border-b border-gray-200",children:d.jsxs("h2",{className:"font-semibold flex items-center",children:[d.jsx(Dd,{className:"w-5 h-5 mr-2 text-gray-500"}),"Open todos (",_.length,")"]})}),_.length>0?d.jsx("div",{className:"divide-y divide-gray-100",children:_.map(R=>d.jsx(sx,{todo:R,onToggle:N,onEdit:B=>{n(B),s(!0)},onDelete:D},R.id))}):d.jsxs("div",{className:"p-8 text-center",children:[d.jsx($s,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),d.jsx("p",{className:"text-gray-500",children:"No open todos"}),d.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Create todos from a person's detail page"})]})]}),C.length>0&&!t&&d.jsxs("div",{className:"card",children:[d.jsx("div",{className:"p-4 border-b border-gray-200",children:d.jsxs("h2",{className:"font-semibold flex items-center",children:[d.jsx(_pe,{className:"w-5 h-5 mr-2 text-primary-600"}),"Recently completed (",C.length,")"]})}),d.jsx("div",{className:"divide-y divide-gray-100",children:C.map(R=>d.jsx(sx,{todo:R,onToggle:N,onEdit:B=>{n(B),s(!0)},onDelete:D},R.id))})]}),t&&z.length>0&&d.jsxs("div",{className:"card",children:[d.jsx("div",{className:"p-4 border-b border-gray-200",children:d.jsxs("h2",{className:"font-semibold flex items-center",children:[d.jsx($s,{className:"w-5 h-5 mr-2 text-primary-600"}),"All completed todos (",z.length,")"]})}),d.jsx("div",{className:"divide-y divide-gray-100",children:z.map(R=>d.jsx(sx,{todo:R,onToggle:N,onEdit:B=>{n(B),s(!0)},onDelete:D},R.id))})]}),d.jsx(nse,{isOpen:i,onClose:()=>{s(!1),n(null)},onSubmit:O,isLoading:b.isPending,todo:r}),d.jsx(Kte,{isOpen:o,onClose:()=>a(!1)}),d.jsx(TM,{isOpen:u,onClose:()=>{h(!1),c(null)},todo:l,onComplete:T,onCompleteAsActivity:j}),d.jsx(mA,{isOpen:f,onClose:()=>{p(!1),c(null),g(null)},onSubmit:P,isLoading:x.isPending,personId:l==null?void 0:l.person_id,initialData:m})]})}function sx({todo:t,onToggle:e,onEdit:r,onDelete:n}){var s;const i=rm(t);return d.jsxs("div",{className:"flex items-start p-4 hover:bg-gray-50 transition-colors group",children:[d.jsx("button",{onClick:()=>e(t),className:"mt-0.5 mr-3 flex-shrink-0",title:t.is_completed?"Mark as incomplete":"Mark as complete",children:t.is_completed?d.jsx($s,{className:"w-5 h-5 text-primary-600"}):d.jsx(Dd,{className:`w-5 h-5 ${i?"text-red-600":"text-gray-400"}`})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:`text-sm ${t.is_completed?"line-through text-gray-400":i?"text-red-600 font-medium":"text-gray-900"}`,children:t.content}),d.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-2",children:[d.jsxs(Ye,{to:`/people/${t.person_id}`,className:"flex items-center gap-2 text-xs text-primary-600 hover:text-primary-700 hover:underline",children:[t.person_thumbnail?d.jsx("img",{src:t.person_thumbnail,alt:t.person_name,className:"w-5 h-5 rounded-full object-cover"}):d.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center",children:d.jsx("span",{className:"text-xs text-gray-500",children:(s=t.person_name)==null?void 0:s[0]})}),t.person_name]}),t.due_date&&d.jsxs("span",{className:`text-xs ${i&&!t.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",Cn(new Date(t.due_date),"MMM d, yyyy"),i&&!t.is_completed&&" (overdue)"]})]})]}),d.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[d.jsx("button",{onClick:()=>r(t),className:"p-1 hover:bg-gray-100 rounded",title:"Edit todo",children:d.jsx(ra,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),d.jsx("button",{onClick:()=>n(t.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete todo",children:d.jsx(ui,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})}function mEe(){var y,b,w;const[t,e]=k.useState(null),[r,n]=k.useState(""),[i,s]=k.useState(!1),[o,a]=k.useState(null),l=vt(),c=tt({mutationFn:async x=>{const S=new FormData;return S.append("file",x),(await de.post("/prm/v1/import/monica/validate",S,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:x=>{a(x)},onError:x=>{var S,_;a({valid:!1,error:((_=(S=x.response)==null?void 0:S.data)==null?void 0:_.message)||"Failed to validate file"})}}),u=tt({mutationFn:async({file:x,monicaUrl:S})=>{const _=new FormData;return _.append("file",x),_.append("monica_url",S),(await de.post("/prm/v1/import/monica",_,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{l.invalidateQueries({queryKey:["people"]}),l.invalidateQueries({queryKey:["companies"]}),l.invalidateQueries({queryKey:["dates"]}),l.invalidateQueries({queryKey:["dashboard"]})}}),h=k.useCallback(x=>{x.preventDefault(),x.stopPropagation(),x.type==="dragenter"||x.type==="dragover"?s(!0):x.type==="dragleave"&&s(!1)},[]),f=k.useCallback(x=>{x.preventDefault(),x.stopPropagation(),s(!1),x.dataTransfer.files&&x.dataTransfer.files[0]&&m(x.dataTransfer.files[0])},[]),p=x=>{x.target.files&&x.target.files[0]&&m(x.target.files[0])},m=x=>{if(!x.name.endsWith(".sql")){a({valid:!1,error:"Please select a SQL file"});return}e(x),a(null),u.reset(),c.mutate(x)},g=()=>{if(!r.trim()){a(x=>({...x,urlError:"Please enter your Monica instance URL"}));return}t&&(o!=null&&o.valid)&&u.mutate({file:t,monicaUrl:r.trim()})},v=()=>{e(null),n(""),a(null),c.reset(),u.reset()};return d.jsxs("div",{className:"space-y-4",children:[d.jsx("h2",{className:"text-lg font-semibold",children:"Import from Monica"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts, relationships, notes, and photos from a Monica CRM SQL export file. Reimporting the same file will update existing contacts instead of creating duplicates."}),u.isSuccess?d.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(Ad,{className:"h-5 w-5 text-green-600 mt-0.5"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),d.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[d.jsxs("p",{children:["Contacts imported: ",u.data.stats.contacts_imported]}),d.jsxs("p",{children:["Contacts updated: ",u.data.stats.contacts_updated]}),d.jsxs("p",{children:["Contacts skipped (partial): ",u.data.stats.contacts_skipped]}),d.jsxs("p",{children:["Photos imported: ",u.data.stats.photos_imported]}),d.jsxs("p",{children:["Organizations created: ",u.data.stats.companies_created]}),d.jsxs("p",{children:["Relationships created: ",u.data.stats.relationships_created]}),d.jsxs("p",{children:["Important dates created: ",u.data.stats.dates_created]}),d.jsxs("p",{children:["Notes created: ",u.data.stats.notes_created]}),((y=u.data.stats.errors)==null?void 0:y.length)>0&&d.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[d.jsx("p",{className:"font-medium",children:"Errors:"}),d.jsx("ul",{className:"list-disc list-inside",children:u.data.stats.errors.map((x,S)=>d.jsx("li",{children:x},S))})]})]}),d.jsx("button",{onClick:v,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${i?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:f,children:[d.jsx("input",{type:"file",accept:".sql",onChange:p,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),c.isPending?d.jsxs("div",{className:"flex flex-col items-center gap-2",children:[d.jsx(_c,{className:"h-8 w-8 text-primary-600 animate-spin"}),d.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?d.jsxs("div",{className:"flex flex-col items-center gap-2",children:[d.jsx(Zp,{className:"h-8 w-8 text-green-600"}),d.jsx("p",{className:"font-medium text-gray-900",children:t.name}),d.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024/1024).toFixed(2)," MB"]})]}):d.jsxs("div",{className:"flex flex-col items-center gap-2",children:[d.jsx(Cc,{className:"h-8 w-8 text-gray-400"}),d.jsx("p",{className:"text-gray-600",children:"Drag and drop your Monica SQL export file here, or click to browse"}),d.jsx("p",{className:"text-sm text-gray-500",children:"Supports SQL export files"})]})]}),o&&d.jsx("div",{className:`rounded-lg border p-4 ${o.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:o.valid?d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(Ad,{className:"h-5 w-5 text-green-600 mt-0.5"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),d.jsxs("div",{className:"mt-2 text-sm text-green-800",children:[d.jsxs("p",{children:["Export format: ",o.version]}),d.jsxs("p",{children:["Contacts to import: ",o.summary.contacts]}),d.jsxs("p",{children:["Relationships: ",o.summary.relationships]}),d.jsxs("p",{children:["Notes: ",o.summary.notes]}),d.jsxs("p",{children:["Dates: ",o.summary.reminders]}),d.jsxs("p",{children:["Photos: ",o.summary.photos]}),d.jsxs("p",{children:["Organizations: ",o.summary.companies_count]})]})]})]}):d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(Ro,{className:"h-5 w-5 text-red-600 mt-0.5"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),d.jsx("p",{className:"text-sm text-red-700 mt-1",children:o.error})]})]})}),(o==null?void 0:o.valid)&&d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{htmlFor:"monica-url",className:"block text-sm font-medium text-gray-700",children:"Monica Instance URL"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(yM,{className:"h-4 w-4 text-gray-400"})}),d.jsx("input",{type:"url",id:"monica-url",value:r,onChange:x=>n(x.target.value),placeholder:"https://your-monica-instance.com",className:`block w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ${o.urlError?"border-red-300":"border-gray-300"}`})]}),o.urlError&&d.jsx("p",{className:"text-sm text-red-600",children:o.urlError}),d.jsx("p",{className:"text-xs text-gray-500",children:"Enter the URL of your Monica instance to import photos. Photos will be downloaded from this URL."})]}),(o==null?void 0:o.valid)&&d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{onClick:g,disabled:u.isPending,className:"btn-primary flex items-center gap-2",children:u.isPending?d.jsxs(d.Fragment,{children:[d.jsx(_c,{className:"h-4 w-4 animate-spin"}),d.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):d.jsxs(d.Fragment,{children:[d.jsx(Cc,{className:"h-4 w-4"}),d.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),d.jsx("button",{onClick:v,disabled:u.isPending,className:"btn-secondary",children:"Cancel"})]}),u.isError&&d.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(Ro,{className:"h-5 w-5 text-red-600 mt-0.5"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),d.jsx("p",{className:"text-sm text-red-700 mt-1",children:((w=(b=u.error.response)==null?void 0:b.data)==null?void 0:w.message)||"An error occurred during import"})]})]})})]})]})}function gEe(){var g,v,y;const[t,e]=k.useState(null),[r,n]=k.useState(!1),[i,s]=k.useState(null),o=vt(),a=tt({mutationFn:async b=>{const w=new FormData;return w.append("file",b),(await de.post("/prm/v1/import/vcard/validate",w,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:b=>{s(b)},onError:b=>{var w,x;s({valid:!1,error:((x=(w=b.response)==null?void 0:w.data)==null?void 0:x.message)||"Failed to validate file"})}}),l=tt({mutationFn:async b=>{const w=new FormData;return w.append("file",b),(await de.post("/prm/v1/import/vcard",w,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{o.invalidateQueries({queryKey:["people"]}),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["dates"]}),o.invalidateQueries({queryKey:["dashboard"]})}}),c=k.useCallback(b=>{b.preventDefault(),b.stopPropagation(),b.type==="dragenter"||b.type==="dragover"?n(!0):b.type==="dragleave"&&n(!1)},[]),u=k.useCallback(b=>{b.preventDefault(),b.stopPropagation(),n(!1),b.dataTransfer.files&&b.dataTransfer.files[0]&&f(b.dataTransfer.files[0])},[]),h=b=>{b.target.files&&b.target.files[0]&&f(b.target.files[0])},f=b=>{const w=b.name.split(".").pop().toLowerCase();if(w!=="vcf"&&w!=="vcard"){s({valid:!1,error:"Please select a vCard file (.vcf)"});return}e(b),s(null),l.reset(),a.mutate(b)},p=()=>{t&&(i!=null&&i.valid)&&l.mutate(t)},m=()=>{e(null),s(null),a.reset(),l.reset()};return d.jsxs("div",{className:"space-y-4",children:[d.jsx("h2",{className:"text-lg font-semibold",children:"Import from vCard"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts from a vCard (.vcf) file. vCard is a standard format supported by most contact apps including Apple Contacts, Outlook, and Android. Files can contain one or multiple contacts."}),l.isSuccess?d.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(Ad,{className:"h-5 w-5 text-green-600 mt-0.5"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),d.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[d.jsxs("p",{children:["Contacts imported: ",l.data.stats.contacts_imported]}),d.jsxs("p",{children:["Contacts updated: ",l.data.stats.contacts_updated]}),d.jsxs("p",{children:["Contacts skipped: ",l.data.stats.contacts_skipped]}),d.jsxs("p",{children:["Photos imported: ",l.data.stats.photos_imported]}),d.jsxs("p",{children:["Organizations created: ",l.data.stats.companies_created]}),d.jsxs("p",{children:["Birthdays created: ",l.data.stats.dates_created]}),d.jsxs("p",{children:["Notes created: ",l.data.stats.notes_created]}),((g=l.data.stats.errors)==null?void 0:g.length)>0&&d.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[d.jsx("p",{className:"font-medium",children:"Errors:"}),d.jsx("ul",{className:"list-disc list-inside",children:l.data.stats.errors.map((b,w)=>d.jsx("li",{children:b},w))})]})]}),d.jsx("button",{onClick:m,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${r?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:c,onDragLeave:c,onDragOver:c,onDrop:u,children:[d.jsx("input",{type:"file",accept:".vcf,.vcard",onChange:h,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),a.isPending?d.jsxs("div",{className:"flex flex-col items-center gap-2",children:[d.jsx(_c,{className:"h-8 w-8 text-primary-600 animate-spin"}),d.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?d.jsxs("div",{className:"flex flex-col items-center gap-2",children:[d.jsx(Zp,{className:"h-8 w-8 text-green-600"}),d.jsx("p",{className:"font-medium text-gray-900",children:t.name}),d.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024).toFixed(2)," KB"]})]}):d.jsxs("div",{className:"flex flex-col items-center gap-2",children:[d.jsx(Cc,{className:"h-8 w-8 text-gray-400"}),d.jsx("p",{className:"text-gray-600",children:"Drag and drop your vCard file here, or click to browse"}),d.jsx("p",{className:"text-sm text-gray-500",children:"Supports .vcf and .vcard files"})]})]}),i&&d.jsx("div",{className:`rounded-lg border p-4 ${i.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:i.valid?d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(Ad,{className:"h-5 w-5 text-green-600 mt-0.5"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),d.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-3 gap-3",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[d.jsx(Fs,{className:"h-4 w-4"}),d.jsxs("span",{children:[i.summary.contacts," contacts"]})]}),i.summary.companies_count>0&&d.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[d.jsx(kr,{className:"h-4 w-4"}),d.jsxs("span",{children:[i.summary.companies_count," organizations"]})]}),i.summary.birthdays>0&&d.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[d.jsx(Ote,{className:"h-4 w-4"}),d.jsxs("span",{children:[i.summary.birthdays," birthdays"]})]}),i.summary.photos>0&&d.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[d.jsx(Rte,{className:"h-4 w-4"}),d.jsxs("span",{children:[i.summary.photos," photos"]})]}),i.summary.notes>0&&d.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[d.jsx(qte,{className:"h-4 w-4"}),d.jsxs("span",{children:[i.summary.notes," notes"]})]})]})]})]}):d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(Ro,{className:"h-5 w-5 text-red-600 mt-0.5"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),d.jsx("p",{className:"text-sm text-red-700 mt-1",children:i.error})]})]})}),(i==null?void 0:i.valid)&&d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{onClick:p,disabled:l.isPending,className:"btn-primary flex items-center gap-2",children:l.isPending?d.jsxs(d.Fragment,{children:[d.jsx(_c,{className:"h-4 w-4 animate-spin"}),d.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):d.jsxs(d.Fragment,{children:[d.jsx(Cc,{className:"h-4 w-4"}),d.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),d.jsx("button",{onClick:m,disabled:l.isPending,className:"btn-secondary",children:"Cancel"})]}),l.isError&&d.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(Ro,{className:"h-5 w-5 text-red-600 mt-0.5"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),d.jsx("p",{className:"text-sm text-red-700 mt-1",children:((y=(v=l.error.response)==null?void 0:v.data)==null?void 0:y.message)||"An error occurred during import"})]})]})})]})]})}function yEe(){var x,S,_;const[t,e]=k.useState(null),[r,n]=k.useState(!1),[i,s]=k.useState(null),[o,a]=k.useState({}),l=vt(),c=tt({mutationFn:async C=>{const E=new FormData;return E.append("file",C),(await de.post("/prm/v1/import/google-contacts/validate",E,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:C=>{var E;if(s(C),((E=C.duplicates)==null?void 0:E.length)>0){const N={};C.duplicates.forEach(T=>{N[T.index]="merge"}),a(N)}},onError:C=>{var E,N;s({valid:!1,error:((N=(E=C.response)==null?void 0:E.data)==null?void 0:N.message)||"Failed to validate file"})}}),u=tt({mutationFn:async({file:C,decisions:E})=>{const N=new FormData;return N.append("file",C),N.append("decisions",JSON.stringify(E)),(await de.post("/prm/v1/import/google-contacts",N,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{l.invalidateQueries({queryKey:["people"]}),l.invalidateQueries({queryKey:["companies"]}),l.invalidateQueries({queryKey:["dates"]}),l.invalidateQueries({queryKey:["dashboard"]})}}),h=k.useCallback(C=>{C.preventDefault(),C.stopPropagation(),C.type==="dragenter"||C.type==="dragover"?n(!0):C.type==="dragleave"&&n(!1)},[]),f=k.useCallback(C=>{C.preventDefault(),C.stopPropagation(),n(!1),C.dataTransfer.files&&C.dataTransfer.files[0]&&m(C.dataTransfer.files[0])},[]),p=C=>{C.target.files&&C.target.files[0]&&m(C.target.files[0])},m=C=>{if(!C.name.endsWith(".csv")){s({valid:!1,error:"Please select a CSV file"});return}e(C),s(null),a({}),u.reset(),c.mutate(C)},g=(C,E)=>{a(N=>({...N,[C]:E}))},v=()=>{t&&(i!=null&&i.valid)&&u.mutate({file:t,decisions:o})},y=()=>{e(null),s(null),a({}),c.reset(),u.reset()},b=(i==null?void 0:i.duplicates)||[],w=b.length>0;return d.jsxs("div",{className:"space-y-4",children:[d.jsx("h2",{className:"text-lg font-semibold",children:"Import from Google Contacts"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts from a Google Contacts CSV export. To export from Google:"}),d.jsxs("ol",{className:"text-sm text-gray-600 list-decimal list-inside space-y-1 ml-2",children:[d.jsxs("li",{children:["Go to ",d.jsx("a",{href:"https://contacts.google.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline",children:"contacts.google.com"})]}),d.jsx("li",{children:'Click "Export" in the left sidebar'}),d.jsx("li",{children:'Select "Google CSV" format and click "Export"'})]}),u.isSuccess?d.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(Ad,{className:"h-5 w-5 text-green-600 mt-0.5"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),d.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[d.jsxs("p",{children:["Contacts imported: ",u.data.stats.contacts_imported]}),d.jsxs("p",{children:["Contacts updated: ",u.data.stats.contacts_updated]}),d.jsxs("p",{children:["Contacts skipped: ",u.data.stats.contacts_skipped]}),d.jsxs("p",{children:["Organizations created: ",u.data.stats.companies_created]}),d.jsxs("p",{children:["Birthdays created: ",u.data.stats.dates_created]}),d.jsxs("p",{children:["Notes created: ",u.data.stats.notes_created]}),d.jsxs("p",{children:["Photos imported: ",u.data.stats.photos_imported]}),((x=u.data.stats.errors)==null?void 0:x.length)>0&&d.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[d.jsx("p",{className:"font-medium",children:"Errors:"}),d.jsx("ul",{className:"list-disc list-inside",children:u.data.stats.errors.map((C,E)=>d.jsx("li",{children:C},E))})]})]}),d.jsx("button",{onClick:y,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${r?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:f,children:[d.jsx("input",{type:"file",accept:".csv",onChange:p,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),c.isPending?d.jsxs("div",{className:"flex flex-col items-center gap-2",children:[d.jsx(_c,{className:"h-8 w-8 text-primary-600 animate-spin"}),d.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?d.jsxs("div",{className:"flex flex-col items-center gap-2",children:[d.jsx(gM,{className:"h-8 w-8 text-green-600"}),d.jsx("p",{className:"font-medium text-gray-900",children:t.name}),d.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024).toFixed(2)," KB"]})]}):d.jsxs("div",{className:"flex flex-col items-center gap-2",children:[d.jsx(Cc,{className:"h-8 w-8 text-gray-400"}),d.jsx("p",{className:"text-gray-600",children:"Drag and drop your Google Contacts CSV here, or click to browse"}),d.jsx("p",{className:"text-sm text-gray-500",children:"Supports Google CSV format"})]})]}),i&&d.jsx("div",{className:`rounded-lg border p-4 ${i.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:i.valid?d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(Ad,{className:"h-5 w-5 text-green-600 mt-0.5"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),d.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-3 gap-3",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[d.jsx(Fs,{className:"h-4 w-4"}),d.jsxs("span",{children:[i.summary.contacts," contacts"]})]}),i.summary.companies_count>0&&d.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[d.jsx(kr,{className:"h-4 w-4"}),d.jsxs("span",{children:[i.summary.companies_count," organizations"]})]}),i.summary.birthdays>0&&d.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[d.jsx(Ote,{className:"h-4 w-4"}),d.jsxs("span",{children:[i.summary.birthdays," birthdays"]})]}),i.summary.notes>0&&d.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[d.jsx(qte,{className:"h-4 w-4"}),d.jsxs("span",{children:[i.summary.notes," notes"]})]}),i.summary.photos>0&&d.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[d.jsx(Rte,{className:"h-4 w-4"}),d.jsxs("span",{children:[i.summary.photos," photos"]})]})]})]})]}):d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(Ro,{className:"h-5 w-5 text-red-600 mt-0.5"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),d.jsx("p",{className:"text-sm text-red-700 mt-1",children:i.error})]})]})}),(i==null?void 0:i.valid)&&w&&d.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(vpe,{className:"h-5 w-5 text-amber-600 mt-0.5 flex-shrink-0"}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("h3",{className:"font-medium text-amber-900",children:[b.length," contact",b.length>1?"s":""," may already exist"]}),d.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"Choose how to handle each potential duplicate:"}),d.jsx("div",{className:"mt-4 space-y-4",children:b.map(C=>d.jsx(vEe,{duplicate:C,decision:o[C.index]||"merge",onDecision:E=>g(C.index,E)},C.index))})]})]})}),(i==null?void 0:i.valid)&&d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{onClick:v,disabled:u.isPending,className:"btn-primary flex items-center gap-2",children:u.isPending?d.jsxs(d.Fragment,{children:[d.jsx(_c,{className:"h-4 w-4 animate-spin"}),d.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):d.jsxs(d.Fragment,{children:[d.jsx(Cc,{className:"h-4 w-4"}),d.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),d.jsx("button",{onClick:y,disabled:u.isPending,className:"btn-secondary",children:"Cancel"})]}),u.isError&&d.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(Ro,{className:"h-5 w-5 text-red-600 mt-0.5"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),d.jsx("p",{className:"text-sm text-red-700 mt-1",children:((_=(S=u.error.response)==null?void 0:S.data)==null?void 0:_.message)||"An error occurred during import"})]})]})})]})]})}function vEe({duplicate:t,decision:e,onDecision:r}){var n,i;return d.jsxs("div",{className:"bg-white rounded-lg border border-amber-200 p-4",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"From CSV"}),d.jsx("p",{className:"font-medium text-gray-900 truncate",children:t.csv_name}),t.csv_org&&d.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.csv_org}),t.csv_email&&d.jsx("p",{className:"text-sm text-gray-500 truncate",children:t.csv_email})]}),d.jsx("div",{className:"hidden sm:flex items-center text-gray-400",children:d.jsx("span",{className:"text-lg",children:""})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Existing Contact"}),d.jsxs("div",{className:"flex items-start gap-3",children:[t.existing_photo?d.jsx("img",{src:t.existing_photo,alt:"",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}):d.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:d.jsx("span",{className:"text-gray-500 text-sm font-medium",children:((i=(n=t.existing_name)==null?void 0:n.charAt(0))==null?void 0:i.toUpperCase())||"?"})}),d.jsxs("div",{className:"min-w-0",children:[d.jsx("p",{className:"font-medium text-gray-900 truncate",children:t.existing_name}),t.existing_org&&d.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.existing_org}),t.existing_email&&d.jsx("p",{className:"text-sm text-gray-500 truncate",children:t.existing_email})]})]})]})]}),d.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[d.jsxs("button",{type:"button",onClick:()=>r("merge"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="merge"?"bg-primary-100 text-primary-800 ring-2 ring-primary-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[d.jsx($pe,{className:"h-4 w-4"}),"Update existing"]}),d.jsxs("button",{type:"button",onClick:()=>r("new"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="new"?"bg-green-100 text-green-800 ring-2 ring-green-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[d.jsx(Vpe,{className:"h-4 w-4"}),"Create new"]}),d.jsxs("button",{type:"button",onClick:()=>r("skip"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="skip"?"bg-gray-200 text-gray-800 ring-2 ring-gray-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[d.jsx(Lpe,{className:"h-4 w-4"}),"Skip"]})]})]})}const bEe=[{id:"sync",label:"Sync",icon:Fpe},{id:"notifications",label:"Notifications",icon:wpe},{id:"data",label:"Data",icon:Ite},{id:"admin",label:"Admin",icon:qpe,adminOnly:!0},{id:"about",label:"About",icon:Tpe}];function xEe(){const[t,e]=uhe(),r=window.prmConfig||{},n=r.isAdmin||!1,i=r.userId,s=t.get("tab")||"sync",o=ge=>{e({tab:ge})},a=bEe.filter(ge=>!ge.adminOnly||n),[l,c]=k.useState(""),[u,h]=k.useState(""),[f,p]=k.useState(!0),[m,g]=k.useState(!1),[v,y]=k.useState(!1),[b,w]=k.useState([]),[x,S]=k.useState(!0),[_,C]=k.useState(""),[E,N]=k.useState(!1),[T,j]=k.useState(null),[P,O]=k.useState(!1),[D,z]=k.useState(null),[R,B]=k.useState([]),[q,$]=k.useState(""),[K,W]=k.useState(!1),[F,X]=k.useState(""),[Q,Ce]=k.useState("09:00"),[xe,Be]=k.useState(!0),[at,Kr]=k.useState(!1),[Sr,Wt]=k.useState(!1),[jr,nt]=k.useState(""),[yn,$n]=k.useState(!1),[Pr,gt]=k.useState([]),[rr,Ws]=k.useState([]),[_r,A]=k.useState([]),[L,U]=k.useState(!1),[oe,ee]=k.useState(!1),[Z,me]=k.useState(!1),[Fe,Ke]=k.useState(""),[St,Se]=k.useState(!1),[ne,fe]=k.useState("");k.useEffect(()=>{(async()=>{try{const Ee=await de.get("/prm/v1/user/ical-url");c(Ee.data.url),h(Ee.data.webcal_url)}catch(Ee){console.error("Failed to fetch iCal URL:",Ee)}finally{p(!1)}})()},[]),k.useEffect(()=>{i&&(async()=>{try{const[Ee,Re]=await Promise.all([Ae.getAppPasswords(i),Ae.getCardDAVUrls()]);w(Ee.data||[]),z(Re.data)}catch(Ee){console.error("Failed to fetch app passwords:",Ee)}finally{S(!1)}})()},[i]);const ce=async()=>{U(!0);try{const[ge,Ee]=await Promise.all([Ae.getSlackChannels(),Ae.getSlackTargets()]);gt(ge.data.channels||[]),Ws(ge.data.users||[]),A(Ee.data.targets||[])}catch(ge){console.error("Failed to fetch Slack data:",ge),nt("Failed to load Slack channels and users. Please try refreshing the page.")}finally{U(!1)}};k.useEffect(()=>{(async()=>{try{const Ee=await Ae.getNotificationChannels();B(Ee.data.channels||["email"]),$(Ee.data.slack_webhook||""),Ce(Ee.data.notification_time||"09:00");const Re=await Ae.getSlackStatus(),$t=Re.data.connected||!1;W($t),X(Re.data.workspace_name||""),$t&&await ce()}catch(Ee){console.error("Failed to fetch notification channels:",Ee)}finally{Be(!1)}})()},[]),k.useEffect(()=>{K&&ce()},[K]),k.useEffect(()=>{const ge=new URLSearchParams(window.location.search),Ee=ge.get("slack_connected"),Re=ge.get("slack_error");Ee==="1"?(nt("Slack connected successfully!"),o("notifications"),Ae.getSlackStatus().then($t=>{W($t.data.connected||!1),X($t.data.workspace_name||"")}),e({tab:"notifications"})):Re&&(nt(`Slack connection failed: ${Re}`),o("notifications"),e({tab:"notifications"}))},[]);const Ne=async()=>{var ge,Ee;try{const Re=await de.get("/prm/v1/slack/oauth/authorize");window.location.href=Re.data.oauth_url}catch(Re){console.error("Failed to get Slack OAuth URL:",Re),alert(((Ee=(ge=Re.response)==null?void 0:ge.data)==null?void 0:Ee.message)||"Failed to connect Slack")}},He=async()=>{var ge,Ee;if(confirm("Are you sure you want to disconnect Slack? You will stop receiving Slack notifications.")){$n(!0);try{await Ae.disconnectSlack(),W(!1),X(""),gt([]),Ws([]),A([]),nt("Slack disconnected successfully"),R.includes("slack")&&await mu("slack")}catch(Re){console.error("Failed to disconnect Slack:",Re),alert(((Ee=(ge=Re.response)==null?void 0:ge.data)==null?void 0:Ee.message)||"Failed to disconnect Slack")}finally{$n(!1)}}},_i=ge=>{const Ee=_r.includes(ge)?_r.filter(Re=>Re!==ge):[..._r,ge];A(Ee)},vn=async()=>{var ge,Ee;ee(!0);try{await Ae.updateSlackTargets(_r),nt("Notification targets saved successfully"),setTimeout(()=>nt(""),3e3)}catch(Re){console.error("Failed to save Slack targets:",Re),alert(((Ee=(ge=Re.response)==null?void 0:ge.data)==null?void 0:Ee.message)||"Failed to save notification targets")}finally{ee(!1)}},bl=async()=>{try{await navigator.clipboard.writeText(l),g(!0),setTimeout(()=>g(!1),2e3)}catch(ge){console.error("Failed to copy:",ge)}},xl=async ge=>{var Ee,Re;if(ge.preventDefault(),!!_.trim()){N(!0);try{const $t=await Ae.createAppPassword(i,_.trim());j($t.data.password),w([...b,$t.data]),C("")}catch($t){console.error("Failed to create app password:",$t),alert(((Re=(Ee=$t.response)==null?void 0:Ee.data)==null?void 0:Re.message)||"Failed to create app password")}finally{N(!1)}}},oi=async(ge,Ee)=>{var Re,$t;if(confirm(`Are you sure you want to revoke the app password "${Ee}"? Any devices using this password will no longer be able to sync.`))try{await Ae.deleteAppPassword(i,ge),w(b.filter(Er=>Er.uuid!==ge))}catch(Er){console.error("Failed to delete app password:",Er),alert((($t=(Re=Er.response)==null?void 0:Re.data)==null?void 0:$t.message)||"Failed to revoke app password")}},wl=async()=>{try{await navigator.clipboard.writeText(T),O(!0),setTimeout(()=>O(!1),2e3)}catch(ge){console.error("Failed to copy:",ge)}},jb=async ge=>{try{await navigator.clipboard.writeText(ge)}catch(Ee){console.error("Failed to copy:",Ee)}},pu=ge=>{if(!ge)return"Never";const Ee=new Date(ge);return Ee.toLocaleDateString("en-US",{month:"short",day:"numeric",year:Ee.getFullYear()!==new Date().getFullYear()?"numeric":void 0})},Pb=async()=>{if(confirm("Are you sure you want to regenerate your calendar URL? Any existing calendar subscriptions will stop working until you update them with the new URL.")){y(!0);try{const ge=await de.post("/prm/v1/user/regenerate-ical-token");c(ge.data.url),h(ge.data.webcal_url)}catch(ge){console.error("Failed to regenerate token:",ge)}finally{y(!1)}}},mu=async ge=>{var Re,$t;const Ee=R.includes(ge)?R.filter(Er=>Er!==ge):[...R,ge];Kr(!0);try{await Ae.updateNotificationChannels(Ee),B(Ee)}catch(Er){console.error("Failed to update notification channels:",Er),alert((($t=(Re=Er.response)==null?void 0:Re.data)==null?void 0:$t.message)||"Failed to update notification channels")}finally{Kr(!1)}},Ib=async ge=>{var Ks,Sl;const[Ee,Re]=ge.split(":").map(Number),$t=Math.round(Re/5)*5,Er=$t===60?(Ee+1)%24:Ee,gu=$t===60?0:$t,Hm=`${String(Er).padStart(2,"0")}:${String(gu).padStart(2,"0")}`;Ce(Hm),Wt(!0);try{await Ae.updateNotificationTime(Hm)}catch($h){console.error("Failed to update notification time:",$h),alert(((Sl=(Ks=$h.response)==null?void 0:Ks.data)==null?void 0:Sl.message)||"Failed to update notification time");const Mb=await Ae.getNotificationChannels();Ce(Mb.data.notification_time||"09:00")}finally{Wt(!1)}},Vm=async()=>{var ge,Ee;if(confirm("This will send reminder emails for all reminders due today. Continue?")){me(!0),Ke("");try{const Re=await Ae.triggerReminders();Ke(Re.data.message||"Reminders triggered successfully.")}catch(Re){console.error("Failed to trigger reminders:",Re),Ke(((Ee=(ge=Re.response)==null?void 0:ge.data)==null?void 0:Ee.message)||"Failed to trigger reminders. Please check server logs.")}finally{me(!1)}}},Rb=async()=>{var ge,Ee;if(confirm("This will reschedule all user reminder cron jobs based on their notification time preferences. Continue?")){Se(!0),fe("");try{const Re=await Ae.rescheduleCronJobs();fe(Re.data.message||"Cron jobs rescheduled successfully.")}catch(Re){console.error("Failed to reschedule cron jobs:",Re),fe(((Ee=(ge=Re.response)==null?void 0:ge.data)==null?void 0:Ee.message)||"Failed to reschedule cron jobs. Please check server logs.")}finally{Se(!1)}}},Um=()=>{switch(s){case"sync":return d.jsx(wEe,{icalUrl:l,webcalUrl:u,icalLoading:f,icalCopied:m,copyIcalUrl:bl,regenerateIcalToken:Pb,regenerating:v,appPasswords:b,appPasswordsLoading:x,carddavUrls:D,config:r,newPasswordName:_,setNewPasswordName:C,handleCreateAppPassword:xl,creatingPassword:E,newPassword:T,setNewPassword:j,copyNewPassword:wl,passwordCopied:P,handleDeleteAppPassword:oi,formatDate:pu,copyCarddavUrl:jb});case"notifications":return d.jsx(SEe,{notificationsLoading:xe,notificationChannels:R,toggleChannel:mu,savingChannels:at,slackConnected:K,slackWorkspaceName:F,handleConnectSlack:Ne,handleDisconnectSlack:He,disconnectingSlack:yn,webhookTestMessage:jr,slackChannels:Pr,slackUsers:rr,slackTargets:_r,loadingSlackData:L,handleToggleSlackTarget:_i,handleSaveSlackTargets:vn,savingSlackTargets:oe,slackWebhook:q,notificationTime:Q,handleNotificationTimeChange:Ib,savingTime:Sr});case"data":return d.jsx(_Ee,{});case"admin":return n?d.jsx(EEe,{handleTriggerReminders:Vm,triggeringReminders:Z,reminderMessage:Fe,handleRescheduleCron:Rb,reschedulingCron:St,cronMessage:ne}):null;case"about":return d.jsx(CEe,{config:r});default:return null}};return d.jsxs("div",{className:"max-w-3xl mx-auto",children:[d.jsx("div",{className:"border-b border-gray-200 mb-6",children:d.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:a.map(ge=>{const Ee=ge.icon,Re=s===ge.id;return d.jsxs("button",{onClick:()=>o(ge.id),className:`
                  flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap
                  ${Re?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                `,children:[d.jsx(Ee,{className:"w-4 h-4"}),ge.label]},ge.id)})})}),d.jsx("div",{className:"space-y-6",children:Um()})]})}function wEe({icalUrl:t,webcalUrl:e,icalLoading:r,icalCopied:n,copyIcalUrl:i,regenerateIcalToken:s,regenerating:o,appPasswords:a,appPasswordsLoading:l,carddavUrls:c,config:u,newPasswordName:h,setNewPasswordName:f,handleCreateAppPassword:p,creatingPassword:m,newPassword:g,setNewPassword:v,copyNewPassword:y,passwordCopied:b,handleDeleteAppPassword:w,formatDate:x,copyCarddavUrl:S}){return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"card p-6",children:[d.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Calendar subscription"}),d.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Subscribe to your important dates in any calendar app (Apple Calendar, Google Calendar, Outlook, etc.)"}),r?d.jsxs("div",{className:"animate-pulse",children:[d.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),d.jsx("div",{className:"h-9 bg-gray-200 rounded w-24"})]}):d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"label mb-1",children:"Your calendar feed URL"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"text",readOnly:!0,value:t,className:"input flex-1 text-sm font-mono bg-gray-50",onClick:_=>_.target.select()}),d.jsx("button",{onClick:i,className:"btn-secondary whitespace-nowrap",title:"Copy URL",children:n?d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied"]}):d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),"Copy"]})})]})]}),d.jsxs("div",{className:"flex flex-wrap gap-2",children:[d.jsx("a",{href:e,className:"btn-primary",children:d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Subscribe in calendar app"]})}),d.jsx("button",{onClick:s,disabled:o,className:"btn-secondary",children:o?"Regenerating...":"Regenerate URL"})]}),d.jsx("p",{className:"text-xs text-gray-500",children:'Keep this URL private. Anyone with access to it can see your important dates. If you think it has been compromised, click "Regenerate URL" to get a new one.'})]})]}),d.jsxs("div",{className:"card p-6",children:[d.jsx("h2",{className:"text-lg font-semibold mb-4",children:"CardDAV sync"}),d.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Sync your contacts with apps like Apple Contacts, Android Contacts, or Thunderbird using CardDAV."}),l?d.jsxs("div",{className:"animate-pulse",children:[d.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),d.jsx("div",{className:"h-24 bg-gray-200 rounded"})]}):d.jsxs("div",{className:"space-y-4",children:[c&&d.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-3",children:[d.jsx("h3",{className:"font-medium text-sm",children:"Connection details"}),d.jsxs("div",{children:[d.jsx("label",{className:"text-xs text-gray-500",children:"Server URL (for most apps)"}),d.jsxs("div",{className:"flex gap-2 mt-1",children:[d.jsx("input",{type:"text",readOnly:!0,value:c.addressbook,className:"input flex-1 text-xs font-mono bg-white",onClick:_=>_.target.select()}),d.jsx("button",{onClick:()=>S(c.addressbook),className:"btn-secondary text-xs px-2",title:"Copy URL",children:"Copy"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-xs text-gray-500",children:"Username"}),d.jsxs("div",{className:"flex gap-2 mt-1",children:[d.jsx("input",{type:"text",readOnly:!0,value:u.userLogin||"",className:"input flex-1 text-xs font-mono bg-white",onClick:_=>_.target.select()}),d.jsx("button",{onClick:()=>S(u.userLogin),className:"btn-secondary text-xs px-2",title:"Copy username",children:"Copy"})]})]}),d.jsx("p",{className:"text-xs text-gray-500",children:"Use one of the app passwords below instead of your regular password."})]}),d.jsxs("form",{onSubmit:p,className:"flex gap-2",children:[d.jsx("input",{type:"text",value:h,onChange:_=>f(_.target.value),placeholder:"Password name (e.g., iPhone Contacts)",className:"input flex-1",disabled:m}),d.jsx("button",{type:"submit",disabled:m||!h.trim(),className:"btn-primary whitespace-nowrap",children:m?"Creating...":"Create password"})]}),g&&d.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[d.jsx("p",{className:"text-sm text-green-800 font-medium mb-2",children:"Your new app password (copy it now, it won't be shown again):"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"text",readOnly:!0,value:g,className:"input flex-1 font-mono text-sm bg-white",onClick:_=>_.target.select()}),d.jsx("button",{onClick:y,className:"btn-primary whitespace-nowrap",children:b?"Copied!":"Copy"})]}),d.jsx("button",{onClick:()=>v(null),className:"text-xs text-green-700 mt-2 hover:underline",children:"I've saved this password, hide it"})]}),a.length>0&&d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-medium mb-2",children:"Your app passwords"}),d.jsx("div",{className:"space-y-2",children:a.map(_=>d.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-sm",children:_.name}),d.jsxs("p",{className:"text-xs text-gray-500",children:["Created ",x(_.created),"  Last used ",x(_.last_used)]})]}),d.jsx("button",{onClick:()=>w(_.uuid,_.name),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Revoke"})]},_.uuid))})]}),a.length===0&&!g&&d.jsx("p",{className:"text-sm text-gray-500",children:"No app passwords yet. Create one to start syncing your contacts."})]})]})]})}function SEe({notificationsLoading:t,notificationChannels:e,toggleChannel:r,savingChannels:n,slackConnected:i,slackWorkspaceName:s,handleConnectSlack:o,handleDisconnectSlack:a,disconnectingSlack:l,webhookTestMessage:c,slackChannels:u,slackUsers:h,slackTargets:f,loadingSlackData:p,handleToggleSlackTarget:m,handleSaveSlackTargets:g,savingSlackTargets:v,slackWebhook:y,notificationTime:b,handleNotificationTimeChange:w,savingTime:x}){return d.jsxs("div",{className:"card p-6",children:[d.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Notifications"}),d.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose how you want to receive daily reminders about your important dates."}),t?d.jsxs("div",{className:"animate-pulse",children:[d.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),d.jsx("div",{className:"h-10 bg-gray-200 rounded"})]}):d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-medium",children:"Email"}),d.jsx("p",{className:"text-sm text-gray-500",children:"Receive daily digest emails"})]}),d.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:e.includes("email"),onChange:()=>r("email"),disabled:n,className:"sr-only peer"}),d.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),d.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-medium",children:"Slack"}),d.jsx("p",{className:"text-sm text-gray-500",children:"Receive notifications in Slack"})]}),d.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:e.includes("slack"),onChange:()=>r("slack"),disabled:n||!i,className:"sr-only peer"}),d.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),d.jsx("div",{children:i?d.jsxs("div",{className:"space-y-3",children:[d.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-green-900",children:"Connected to Slack"}),s&&d.jsxs("p",{className:"text-sm text-green-700",children:["Workspace: ",s]})]}),d.jsx("button",{onClick:a,disabled:l,className:"btn-secondary text-sm",children:l?"Disconnecting...":"Disconnect"})]})}),c&&d.jsx("p",{className:`text-sm ${c.includes("successfully")||c.includes("disconnected")?"text-green-600":"text-red-600"}`,children:c}),e.includes("slack")&&d.jsxs("div",{className:"mt-4 p-4 border border-gray-200 rounded-lg",children:[d.jsx("h3",{className:"font-medium mb-3",children:"Notification targets"}),d.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose where to send Slack notifications. You can select multiple channels and users."}),p?d.jsx("p",{className:"text-sm text-gray-500",children:"Loading channels and users..."}):d.jsxs(d.Fragment,{children:[u.length>0&&d.jsxs("div",{className:"mb-4",children:[d.jsx("h4",{className:"text-sm font-medium mb-2",children:"Channels"}),d.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:u.map(S=>d.jsxs("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:f.includes(S.id),onChange:()=>m(S.id),className:"mr-2 cursor-pointer"}),d.jsx("span",{className:"text-sm",children:S.name})]},S.id))})]}),h.length>0&&d.jsxs("div",{className:"mb-4",children:[d.jsx("h4",{className:"text-sm font-medium mb-2",children:"Direct messages"}),d.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:h.map(S=>d.jsxs("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:f.includes(S.id),onChange:()=>m(S.id),className:"mr-2 cursor-pointer"}),d.jsxs("span",{className:"text-sm",children:[S.name,S.is_me&&d.jsx("span",{className:"text-gray-500 ml-1",children:"(you)"})]})]},S.id))})]}),u.length===0&&h.length===0&&!p&&d.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"No channels or users found. Make sure the Slack app has the necessary permissions."}),d.jsx("button",{onClick:g,disabled:v,className:"btn-primary text-sm mt-4",children:v?"Saving...":"Save targets"})]})]})]}):d.jsxs("div",{className:"space-y-3",children:[d.jsx("button",{onClick:o,className:"btn-primary w-full",disabled:l,children:"Connect Slack"}),c&&d.jsx("p",{className:`text-sm ${c.includes("successfully")?"text-green-600":"text-red-600"}`,children:c}),d.jsx("p",{className:"text-xs text-gray-500",children:"Connect your Slack workspace to receive daily reminder notifications. You'll be able to message channels or receive direct messages."})]})}),y&&!i&&d.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:d.jsxs("p",{className:"text-sm text-yellow-800",children:[d.jsx("strong",{children:"Legacy webhook detected."})," Please connect via OAuth for better functionality. Your webhook will continue to work until you connect via OAuth."]})}),d.jsxs("div",{children:[d.jsx("label",{className:"label mb-1",children:"Notification time (UTC)"}),d.jsx("input",{type:"time",value:b,onChange:S=>w(S.target.value),className:"input",disabled:x,step:"300"}),b&&d.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm",children:[d.jsxs("p",{className:"text-gray-700",children:[d.jsx("span",{className:"font-medium",children:"UTC:"})," ",b]}),d.jsxs("p",{className:"text-gray-700 mt-1",children:[d.jsxs("span",{className:"font-medium",children:["Your time (",Intl.DateTimeFormat().resolvedOptions().timeZone,"):"]})," ",(()=>{try{const[S,_]=b.split(":"),C=new Date;return C.setUTCHours(parseInt(S),parseInt(_),0,0),C.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}catch{return b}})()]})]}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose the UTC time when you want to receive your daily reminder digest. Reminders are sent within a 1-hour window of your selected time."})]})]})]})}const Dq=[{id:"vcard",name:"vCard",description:"Apple Contacts, Outlook, Android",icon:Zp,component:gEe},{id:"google",name:"Google Contacts",description:"CSV export from Google",icon:gM,component:yEe},{id:"monica",name:"Monica CRM",description:"SQL export from Monica",icon:Ite,component:mEe}];function _Ee(){var i;const[t,e]=k.useState("vcard"),r=s=>{s==="vcard"?window.location.href="/wp-json/prm/v1/export/vcard":s==="google-csv"&&(window.location.href="/wp-json/prm/v1/export/google-csv")},n=(i=Dq.find(s=>s.id===t))==null?void 0:i.component;return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"card p-6",children:[d.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Import data"}),d.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Import your contacts from various sources. Existing contacts with matching names will be updated instead of duplicated."}),d.jsx("div",{className:"border-b border-gray-200 mb-6",children:d.jsx("nav",{className:"-mb-px flex space-x-6","aria-label":"Import types",children:Dq.map(s=>{const o=s.icon,a=t===s.id;return d.jsxs("button",{onClick:()=>e(s.id),className:`group inline-flex items-center py-3 px-1 border-b-2 font-medium text-sm transition-colors ${a?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[d.jsx(o,{className:`mr-2 h-5 w-5 ${a?"text-primary-500":"text-gray-400 group-hover:text-gray-500"}`}),d.jsxs("div",{className:"text-left",children:[d.jsx("span",{className:"block",children:s.name}),d.jsx("span",{className:`block text-xs font-normal ${a?"text-primary-400":"text-gray-400"}`,children:s.description})]})]},s.id)})})}),n&&d.jsx(n,{})]}),d.jsxs("div",{className:"card p-6",children:[d.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Export data"}),d.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Export all your contacts in a format compatible with other contact management systems."}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("button",{onClick:()=>r("vcard"),className:"w-full p-4 rounded-lg border border-gray-200 hover:bg-gray-50 text-left flex items-center gap-4",children:[d.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:d.jsx(Zp,{className:"w-6 h-6 text-primary-600"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"font-medium",children:"Export as vCard (.vcf)"}),d.jsx("p",{className:"text-sm text-gray-500",children:"Compatible with Apple Contacts, Outlook, Android, and most contact apps"})]}),d.jsx(iI,{className:"w-5 h-5 text-gray-400"})]}),d.jsxs("button",{onClick:()=>r("google-csv"),className:"w-full p-4 rounded-lg border border-gray-200 hover:bg-gray-50 text-left flex items-center gap-4",children:[d.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:d.jsx(gM,{className:"w-6 h-6 text-primary-600"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"font-medium",children:"Export as Google Contacts CSV"}),d.jsx("p",{className:"text-sm text-gray-500",children:"Import directly into Google Contacts or other CSV-compatible systems"})]}),d.jsx(iI,{className:"w-5 h-5 text-gray-400"})]})]})]})]})}function EEe({handleTriggerReminders:t,triggeringReminders:e,reminderMessage:r,handleRescheduleCron:n,reschedulingCron:i,cronMessage:s}){return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"card p-6",children:[d.jsx("h2",{className:"text-lg font-semibold mb-4",children:"User management"}),d.jsx("div",{className:"space-y-3",children:d.jsxs(Ye,{to:"/settings/user-approval",className:"block p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors",children:[d.jsx("p",{className:"font-medium",children:"User approval"}),d.jsx("p",{className:"text-sm text-gray-500",children:"Approve or deny access for new users"})]})})]}),d.jsxs("div",{className:"card p-6",children:[d.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Configuration"}),d.jsx("div",{className:"space-y-3",children:d.jsxs(Ye,{to:"/settings/relationship-types",className:"block p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors",children:[d.jsx("p",{className:"font-medium",children:"Relationship types"}),d.jsx("p",{className:"text-sm text-gray-500",children:"Manage relationship types and their inverse mappings"})]})})]}),d.jsxs("div",{className:"card p-6",children:[d.jsx("h2",{className:"text-lg font-semibold mb-4",children:"System actions"}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("button",{onClick:t,disabled:e,className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("p",{className:"font-medium",children:"Trigger reminders"}),d.jsx("p",{className:"text-sm text-gray-500",children:e?"Sending...":"Manually send reminders for today"}),r&&d.jsx("p",{className:"text-sm text-green-600 mt-1",children:r})]}),d.jsxs("button",{onClick:n,disabled:i,className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("p",{className:"font-medium",children:"Reschedule cron jobs"}),d.jsx("p",{className:"text-sm text-gray-500",children:i?"Rescheduling...":"Reschedule all user reminder cron jobs"}),s&&d.jsx("p",{className:"text-sm text-green-600 mt-1",children:s})]})]})]})]})}function CEe({config:t}){return d.jsxs("div",{className:"card p-6",children:[d.jsxs("h2",{className:"text-lg font-semibold mb-4",children:["About ",Nc]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{children:d.jsxs("p",{className:"text-sm text-gray-600",children:["Version ",t.version||"1.0.0"]})}),d.jsx("div",{className:"pt-4 border-t border-gray-200",children:d.jsxs("p",{className:"text-sm text-gray-600",children:[Nc," is a personal CRM system that helps you manage your contacts, track important dates, and maintain meaningful relationships."]})}),d.jsx("div",{className:"pt-4 border-t border-gray-200",children:d.jsx("p",{className:"text-sm text-gray-500",children:"Built with WordPress, React, and Tailwind CSS."})})]})]})}function $q({value:t,onChange:e,relationshipTypes:r,currentTypeId:n=null}){const[i,s]=k.useState(""),[o,a]=k.useState(!1),l=k.useRef(null),c=k.useRef(null),u=k.useMemo(()=>r.sort((v,y)=>{const b=(v.name||"").toLowerCase(),w=(y.name||"").toLowerCase();return b<w?-1:b>w?1:0}),[r]),h=k.useMemo(()=>{if(!i)return u.slice(0,10);const v=i.toLowerCase();return u.filter(y=>(y.name||"").toLowerCase().includes(v)).slice(0,10)},[u,i]),f=k.useMemo(()=>u.find(v=>v.id===parseInt(t,10)),[u,t]);k.useEffect(()=>{const v=y=>{c.current&&!c.current.contains(y.target)&&l.current&&!l.current.contains(y.target)&&a(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const p=v=>{e(v?v.toString():""),s(""),a(!1)},m=()=>{e(""),s(""),a(!1)},g=f?f.name:"";return d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"relative",children:f&&!o?d.jsxs("div",{className:"flex items-center justify-between input pr-8 cursor-text",onClick:()=>a(!0),children:[d.jsx("span",{children:g}),d.jsx("button",{type:"button",onClick:v=>{v.stopPropagation(),m()},className:"absolute right-2 text-gray-400 hover:text-gray-600",children:d.jsx(Rt,{className:"w-4 h-4"})})]}):d.jsx("input",{ref:l,type:"text",value:i,onChange:v=>{s(v.target.value),a(!0)},onFocus:()=>a(!0),placeholder:"Search for a relationship type...",className:"input"})}),o&&(i||!f)&&d.jsx("div",{ref:c,className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:h.length>0?d.jsxs(d.Fragment,{children:[d.jsx("button",{type:"button",onClick:()=>p(null),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t?"":"bg-primary-50"}`,children:d.jsx("span",{className:"text-gray-500 italic",children:"None (no inverse)"})}),h.map(v=>d.jsx("button",{type:"button",onClick:()=>p(v.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t===v.id.toString()?"bg-primary-50":""}`,children:v.name},v.id))]}):d.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No relationship types found"})})]})}function NEe(){lh("Relationship Types - Settings");const t=vt();if(!((window.prmConfig||{}).isAdmin||!1))return d.jsx("div",{className:"max-w-2xl mx-auto",children:d.jsxs("div",{className:"card p-8 text-center",children:[d.jsx(Dte,{className:"w-16 h-16 mx-auto text-amber-500 mb-4"}),d.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),d.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to manage relationship types. This feature is only available to administrators."}),d.jsx(Ye,{to:"/settings",className:"btn-primary",children:"Back to Settings"})]})});const{data:n=[],isLoading:i}=lt({queryKey:["relationship-types"],queryFn:async()=>(await qe.getRelationshipTypes()).data}),[s,o]=k.useState(null),[a,l]=k.useState(""),[c,u]=k.useState(""),[h,f]=k.useState(""),[p,m]=k.useState(""),[g,v]=k.useState(!1),y=tt({mutationFn:async({id:j,name:P,inverseId:O})=>{const D={name:P};return O&&(D.acf={inverse_relationship_type:parseInt(O,10)}),qe.updateRelationshipType(j,D)},onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),o(null),l(""),u("")}}),b=tt({mutationFn:async({name:j,inverseId:P})=>{const O={name:j};return P&&(O.acf={inverse_relationship_type:parseInt(P,10)}),qe.createRelationshipType(O)},onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),f(""),m(""),v(!1)}}),w=tt({mutationFn:j=>qe.deleteRelationshipType(j),onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]})}}),x=tt({mutationFn:()=>qe.restoreRelationshipTypeDefaults(),onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),alert("Default relationship type configurations have been restored.")},onError:()=>{alert("Failed to restore defaults. Please try again.")}});function S(){return d.jsxs("button",{onClick:()=>{window.confirm("This will restore all default inverse mappings and gender-dependent settings. Continue?")&&x.mutate()},disabled:x.isPending,className:"btn-secondary flex items-center gap-2",title:"Restore default inverse mappings and gender-dependent settings",children:[x.isPending?d.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600"}):d.jsx(Mte,{className:"w-4 h-4"}),d.jsx("span",{className:"hidden md:inline",children:"Restore Defaults"})]})}const _=j=>{var O;o(j.id),l(j.name);const P=(O=j.acf)==null?void 0:O.inverse_relationship_type;u(P?P.toString():"")},C=()=>{o(null),l(""),u("")},E=()=>{if(!a.trim()){alert("Name is required");return}y.mutate({id:s,name:a.trim(),inverseId:c||null})},N=()=>{if(!h.trim()){alert("Name is required");return}b.mutate({name:h.trim(),inverseId:p||null})},T=(j,P)=>{window.confirm(`Are you sure you want to delete "${P}"? This cannot be undone.`)&&w.mutate(j)};return i?d.jsx("div",{className:"flex items-center justify-center h-64",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):d.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:d.jsxs("div",{className:"card p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h1",{className:"text-2xl font-bold",children:"Relationship Types"}),d.jsx("div",{className:"flex gap-2",children:!g&&d.jsxs(d.Fragment,{children:[d.jsx(S,{}),d.jsxs("button",{onClick:()=>v(!0),className:"btn-primary flex items-center gap-2",children:[d.jsx(Jt,{className:"w-4 h-4"}),d.jsx("span",{className:"hidden md:inline",children:"Add Relationship Type"})]})]})})]}),g&&d.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[d.jsx("h3",{className:"font-semibold mb-4",children:"Add New Relationship Type"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Name *"}),d.jsx("input",{type:"text",value:h,onChange:j=>f(j.target.value),className:"input",placeholder:"e.g., Parent, Spouse, Colleague"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Inverse Relationship Type"}),d.jsx($q,{value:p,onChange:m,relationshipTypes:n}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Select the inverse relationship type. For example, if this is "Parent", select "Child". If this is "Spouse" or "Acquaintance", select the same type (e.g., "Spouse"  "Spouse").'})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("button",{onClick:N,disabled:b.isPending,className:"btn-primary flex items-center gap-2",children:[b.isPending?d.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):d.jsx(VF,{className:"w-4 h-4"}),d.jsx("span",{className:"hidden md:inline",children:"Save"})]}),d.jsx("button",{onClick:()=>{v(!1),f(""),m("")},className:"btn-secondary",children:"Cancel"})]})]})]}),d.jsx("div",{className:"space-y-2",children:n.length===0?d.jsx("p",{className:"text-gray-500 text-center py-8",children:"No relationship types found."}):n.map(j=>{var R,B;const P=s===j.id,O=(R=j.acf)==null?void 0:R.inverse_relationship_type,D=typeof O=="object"&&(O!=null&&O.ID)?O.ID:typeof O=="object"&&(O!=null&&O.id)?O.id:O,z=D?n.find(q=>q.id===D):null;return d.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:P?d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Name *"}),d.jsx("input",{type:"text",value:a,onChange:q=>l(q.target.value),className:"input"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Inverse Relationship Type"}),d.jsx($q,{value:c,onChange:u,relationshipTypes:n,currentTypeId:j.id}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Select the inverse relationship type. For example, if this is "Parent", select "Child". If this is "Spouse" or "Acquaintance", select the same type (e.g., "Spouse"  "Spouse").'})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("button",{onClick:E,disabled:y.isPending,className:"btn-primary flex items-center gap-2",children:[y.isPending?d.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):d.jsx(VF,{className:"w-4 h-4"}),d.jsx("span",{className:"hidden md:inline",children:"Save"})]}),d.jsxs("button",{onClick:C,className:"btn-secondary flex items-center gap-2",children:[d.jsx(Rt,{className:"w-4 h-4"}),d.jsx("span",{className:"hidden md:inline",children:"Cancel"})]})]})]}):d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"font-medium",children:j.name}),z&&d.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Inverse: ",d.jsx("span",{className:"font-medium",children:z.name})]}),!z&&((B=j.acf)==null?void 0:B.inverse_relationship_type)===null&&d.jsx("div",{className:"text-sm text-gray-400 mt-1 italic",children:"No inverse relationship"})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>_(j),className:"p-2 text-gray-600 hover:text-primary-600 hover:bg-primary-50 rounded",title:"Edit",children:d.jsx(Ape,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>T(j.id,j.name),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded",title:"Delete",children:d.jsx(ui,{className:"w-4 h-4"})})]})]})},j.id)})})]})})}function kEe(){lh("User Approval - Settings");const t=vt();if(!((window.prmConfig||{}).isAdmin||!1))return d.jsx("div",{className:"max-w-2xl mx-auto",children:d.jsxs("div",{className:"card p-8 text-center",children:[d.jsx(Dte,{className:"w-16 h-16 mx-auto text-amber-500 mb-4"}),d.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),d.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to manage user approvals. This feature is only available to administrators."}),d.jsx(Ye,{to:"/settings",className:"btn-primary",children:"Back to Settings"})]})});const{data:n=[],isLoading:i}=lt({queryKey:["users"],queryFn:async()=>(await Ae.getUsers()).data}),s=tt({mutationFn:p=>Ae.approveUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),o=tt({mutationFn:p=>Ae.denyUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),a=tt({mutationFn:p=>Ae.deleteUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),l=p=>{window.confirm("Are you sure you want to approve this user?")&&s.mutate(p)},c=p=>{window.confirm("Are you sure you want to deny this user? They will not be able to access the system.")&&o.mutate(p)},u=(p,m)=>{window.confirm(`Are you sure you want to delete ${m}? This will permanently delete their account and all their related data (people, organizations, dates). This action cannot be undone.`)&&a.mutate(p)};if(i)return d.jsx("div",{className:"flex items-center justify-center h-64",children:d.jsx(_c,{className:"w-8 h-8 animate-spin text-primary-600"})});const h=n.filter(p=>!p.is_approved),f=n.filter(p=>p.is_approved);return d.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs(Ye,{to:"/settings",className:"btn-secondary flex items-center gap-2",children:[d.jsx(C0,{className:"w-4 h-4"}),d.jsx("span",{className:"hidden md:inline",children:"Back to Settings"})]}),d.jsx("h1",{className:"text-2xl font-semibold",children:"User Approval"})]}),d.jsxs("div",{className:"space-y-6",children:[h.length>0&&d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Pending Approval"}),d.jsx("div",{className:"space-y-3",children:h.map(p=>d.jsxs("div",{className:"card p-4 flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-medium",children:p.name}),d.jsx("p",{className:"text-sm text-gray-500",children:p.email}),d.jsxs("p",{className:"text-xs text-gray-400",children:["Registered: ",new Date(p.registered).toLocaleDateString()]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("button",{onClick:()=>l(p.id),disabled:s.isPending||a.isPending,className:"btn-primary flex items-center gap-2",children:[d.jsx(LF,{className:"w-4 h-4"}),"Approve"]}),d.jsxs("button",{onClick:()=>c(p.id),disabled:o.isPending||a.isPending,className:"btn-secondary flex items-center gap-2",children:[d.jsx(UF,{className:"w-4 h-4"}),"Deny"]}),d.jsxs("button",{onClick:()=>u(p.id,p.name),disabled:s.isPending||o.isPending||a.isPending,className:"btn-danger flex items-center gap-2",children:[d.jsx(ui,{className:"w-4 h-4"}),"Delete"]})]})]},p.id))})]}),f.length>0&&d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Approved Users"}),d.jsx("div",{className:"space-y-3",children:f.map(p=>d.jsxs("div",{className:"card p-4 flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsxs("p",{className:"font-medium flex items-center gap-2",children:[p.name,d.jsx(LF,{className:"w-4 h-4 text-green-600"})]}),d.jsx("p",{className:"text-sm text-gray-500",children:p.email})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("button",{onClick:()=>c(p.id),disabled:o.isPending||a.isPending,className:"btn-secondary flex items-center gap-2",children:[d.jsx(UF,{className:"w-4 h-4"}),"Revoke Access"]}),d.jsxs("button",{onClick:()=>u(p.id,p.name),disabled:o.isPending||a.isPending,className:"btn-danger flex items-center gap-2",children:[d.jsx(ui,{className:"w-4 h-4"}),"Delete"]})]})]},p.id))})]}),n.length===0&&d.jsx("div",{className:"card p-8 text-center",children:d.jsx("p",{className:"text-gray-600",children:"No Caelis users found."})})]})]})}/**
 * vis-data
 * http://visjs.org/
 *
 * Manage unstructured data using DataSet. Add, update, and remove data, and listen for changes in the data.
 *
 * @version 8.0.3
 * @date    2025-09-10T16:22:00.613Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var Fq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Je(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ox={exports:{}},qq={},nf,Lq;function vr(){if(Lq)return nf;Lq=1;var t=function(e){return e&&e.Math===Math&&e};return nf=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof Fq=="object"&&Fq)||t(typeof nf=="object"&&nf)||function(){return this}()||Function("return this")(),nf}var ax,Bq;function pt(){return Bq||(Bq=1,ax=function(t){try{return!!t()}catch{return!0}}),ax}var lx,zq;function am(){if(zq)return lx;zq=1;var t=pt();return lx=!t(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),lx}var cx,Vq;function Y0(){if(Vq)return cx;Vq=1;var t=am(),e=Function.prototype,r=e.apply,n=e.call;return cx=typeof Reflect=="object"&&Reflect.apply||(t?n.bind(r):function(){return n.apply(r,arguments)}),cx}var ux,Uq;function wt(){if(Uq)return ux;Uq=1;var t=am(),e=Function.prototype,r=e.call,n=t&&e.bind.bind(r,r);return ux=t?n:function(i){return function(){return r.apply(i,arguments)}},ux}var dx,Hq;function Lo(){if(Hq)return dx;Hq=1;var t=wt(),e=t({}.toString),r=t("".slice);return dx=function(n){return r(e(n),8,-1)},dx}var hx,Wq;function ise(){if(Wq)return hx;Wq=1;var t=Lo(),e=wt();return hx=function(r){if(t(r)==="Function")return e(r)},hx}var fx,Kq;function Br(){if(Kq)return fx;Kq=1;var t=typeof document=="object"&&document.all;return fx=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"},fx}var px={},mx,Gq;function br(){if(Gq)return mx;Gq=1;var t=pt();return mx=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),mx}var gx,Yq;function ni(){if(Yq)return gx;Yq=1;var t=am(),e=Function.prototype.call;return gx=t?e.bind(e):function(){return e.apply(e,arguments)},gx}var yx={},Qq;function gA(){if(Qq)return yx;Qq=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,r=e&&!t.call({1:2},1);return yx.f=r?function(i){var s=e(this,i);return!!s&&s.enumerable}:t,yx}var vx,Xq;function lm(){return Xq||(Xq=1,vx=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}),vx}var bx,Jq;function Q0(){if(Jq)return bx;Jq=1;var t=wt(),e=pt(),r=Lo(),n=Object,i=t("".split);return bx=e(function(){return!n("z").propertyIsEnumerable(0)})?function(s){return r(s)==="String"?i(s,""):n(s)}:n,bx}var xx,Zq;function cm(){return Zq||(Zq=1,xx=function(t){return t==null}),xx}var wx,e5;function Yc(){if(e5)return wx;e5=1;var t=cm(),e=TypeError;return wx=function(r){if(t(r))throw new e("Can't call method on "+r);return r},wx}var Sx,t5;function Vs(){if(t5)return Sx;t5=1;var t=Q0(),e=Yc();return Sx=function(r){return t(e(r))},Sx}var _x,r5;function Dn(){if(r5)return _x;r5=1;var t=Br();return _x=function(e){return typeof e=="object"?e!==null:t(e)},_x}var Ex,n5;function Or(){return n5||(n5=1,Ex={}),Ex}var Cx,i5;function xi(){if(i5)return Cx;i5=1;var t=Or(),e=vr(),r=Br(),n=function(i){return r(i)?i:void 0};return Cx=function(i,s){return arguments.length<2?n(t[i])||n(e[i]):t[i]&&t[i][s]||e[i]&&e[i][s]},Cx}var Nx,s5;function zr(){if(s5)return Nx;s5=1;var t=wt();return Nx=t({}.isPrototypeOf),Nx}var kx,o5;function uh(){if(o5)return kx;o5=1;var t=vr(),e=t.navigator,r=e&&e.userAgent;return kx=r?String(r):"",kx}var Tx,a5;function um(){if(a5)return Tx;a5=1;var t=vr(),e=uh(),r=t.process,n=t.Deno,i=r&&r.versions||n&&n.version,s=i&&i.v8,o,a;return s&&(o=s.split("."),a=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!a&&e&&(o=e.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=e.match(/Chrome\/(\d+)/),o&&(a=+o[1]))),Tx=a,Tx}var Ox,l5;function dh(){if(l5)return Ox;l5=1;var t=um(),e=pt(),r=vr(),n=r.String;return Ox=!!Object.getOwnPropertySymbols&&!e(function(){var i=Symbol("symbol detection");return!n(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&t&&t<41}),Ox}var jx,c5;function sse(){if(c5)return jx;c5=1;var t=dh();return jx=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol",jx}var Px,u5;function dm(){if(u5)return Px;u5=1;var t=xi(),e=Br(),r=zr(),n=sse(),i=Object;return Px=n?function(s){return typeof s=="symbol"}:function(s){var o=t("Symbol");return e(o)&&r(o.prototype,i(s))},Px}var Ix,d5;function hh(){if(d5)return Ix;d5=1;var t=String;return Ix=function(e){try{return t(e)}catch{return"Object"}},Ix}var Rx,h5;function Bo(){if(h5)return Rx;h5=1;var t=Br(),e=hh(),r=TypeError;return Rx=function(n){if(t(n))return n;throw new r(e(n)+" is not a function")},Rx}var Mx,f5;function yA(){if(f5)return Mx;f5=1;var t=Bo(),e=cm();return Mx=function(r,n){var i=r[n];return e(i)?void 0:t(i)},Mx}var Ax,p5;function TEe(){if(p5)return Ax;p5=1;var t=ni(),e=Br(),r=Dn(),n=TypeError;return Ax=function(i,s){var o,a;if(s==="string"&&e(o=i.toString)&&!r(a=t(o,i))||e(o=i.valueOf)&&!r(a=t(o,i))||s!=="string"&&e(o=i.toString)&&!r(a=t(o,i)))return a;throw new n("Can't convert object to primitive value")},Ax}var Dx={exports:{}},$x,m5;function fh(){return m5||(m5=1,$x=!0),$x}var Fx,g5;function OEe(){if(g5)return Fx;g5=1;var t=vr(),e=Object.defineProperty;return Fx=function(r,n){try{e(t,r,{value:n,configurable:!0,writable:!0})}catch{t[r]=n}return n},Fx}var y5;function vA(){if(y5)return Dx.exports;y5=1;var t=fh(),e=vr(),r=OEe(),n="__core-js_shared__",i=Dx.exports=e[n]||r(n,{});return(i.versions||(i.versions=[])).push({version:"3.44.0",mode:t?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),Dx.exports}var qx,v5;function ph(){if(v5)return qx;v5=1;var t=vA();return qx=function(e,r){return t[e]||(t[e]=r||{})},qx}var Lx,b5;function ys(){if(b5)return Lx;b5=1;var t=Yc(),e=Object;return Lx=function(r){return e(t(r))},Lx}var Bx,x5;function Vr(){if(x5)return Bx;x5=1;var t=wt(),e=ys(),r=t({}.hasOwnProperty);return Bx=Object.hasOwn||function(i,s){return r(e(i),s)},Bx}var zx,w5;function X0(){if(w5)return zx;w5=1;var t=wt(),e=0,r=Math.random(),n=t(1.1.toString);return zx=function(i){return"Symbol("+(i===void 0?"":i)+")_"+n(++e+r,36)},zx}var Vx,S5;function Ur(){if(S5)return Vx;S5=1;var t=vr(),e=ph(),r=Vr(),n=X0(),i=dh(),s=sse(),o=t.Symbol,a=e("wks"),l=s?o.for||o:o&&o.withoutSetter||n;return Vx=function(c){return r(a,c)||(a[c]=i&&r(o,c)?o[c]:l("Symbol."+c)),a[c]},Vx}var Ux,_5;function ose(){if(_5)return Ux;_5=1;var t=ni(),e=Dn(),r=dm(),n=yA(),i=TEe(),s=Ur(),o=TypeError,a=s("toPrimitive");return Ux=function(l,c){if(!e(l)||r(l))return l;var u=n(l,a),h;if(u){if(c===void 0&&(c="default"),h=t(u,l,c),!e(h)||r(h))return h;throw new o("Can't convert object to primitive value")}return c===void 0&&(c="number"),i(l,c)},Ux}var Hx,E5;function bA(){if(E5)return Hx;E5=1;var t=ose(),e=dm();return Hx=function(r){var n=t(r,"string");return e(n)?n:n+""},Hx}var Wx,C5;function ase(){if(C5)return Wx;C5=1;var t=vr(),e=Dn(),r=t.document,n=e(r)&&e(r.createElement);return Wx=function(i){return n?r.createElement(i):{}},Wx}var Kx,N5;function lse(){if(N5)return Kx;N5=1;var t=br(),e=pt(),r=ase();return Kx=!t&&!e(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7}),Kx}var k5;function J0(){if(k5)return px;k5=1;var t=br(),e=ni(),r=gA(),n=lm(),i=Vs(),s=bA(),o=Vr(),a=lse(),l=Object.getOwnPropertyDescriptor;return px.f=t?l:function(u,h){if(u=i(u),h=s(h),a)try{return l(u,h)}catch{}if(o(u,h))return n(!e(r.f,u,h),u[h])},px}var Gx,T5;function jEe(){if(T5)return Gx;T5=1;var t=pt(),e=Br(),r=/#|\.prototype\./,n=function(l,c){var u=s[i(l)];return u===a?!0:u===o?!1:e(c)?t(c):!!c},i=n.normalize=function(l){return String(l).replace(r,".").toLowerCase()},s=n.data={},o=n.NATIVE="N",a=n.POLYFILL="P";return Gx=n,Gx}var Yx,O5;function Z0(){if(O5)return Yx;O5=1;var t=ise(),e=Bo(),r=am(),n=t(t.bind);return Yx=function(i,s){return e(i),s===void 0?i:r?n(i,s):function(){return i.apply(s,arguments)}},Yx}var Qx={},Xx,j5;function cse(){if(j5)return Xx;j5=1;var t=br(),e=pt();return Xx=t&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),Xx}var Jx,P5;function zo(){if(P5)return Jx;P5=1;var t=Dn(),e=String,r=TypeError;return Jx=function(n){if(t(n))return n;throw new r(e(n)+" is not an object")},Jx}var I5;function Hi(){if(I5)return Qx;I5=1;var t=br(),e=lse(),r=cse(),n=zo(),i=bA(),s=TypeError,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l="enumerable",c="configurable",u="writable";return Qx.f=t?r?function(f,p,m){if(n(f),p=i(p),n(m),typeof f=="function"&&p==="prototype"&&"value"in m&&u in m&&!m[u]){var g=a(f,p);g&&g[u]&&(f[p]=m.value,m={configurable:c in m?m[c]:g[c],enumerable:l in m?m[l]:g[l],writable:!1})}return o(f,p,m)}:o:function(f,p,m){if(n(f),p=i(p),n(m),e)try{return o(f,p,m)}catch{}if("get"in m||"set"in m)throw new s("Accessors not supported");return"value"in m&&(f[p]=m.value),f},Qx}var Zx,R5;function mh(){if(R5)return Zx;R5=1;var t=br(),e=Hi(),r=lm();return Zx=t?function(n,i,s){return e.f(n,i,r(1,s))}:function(n,i,s){return n[i]=s,n},Zx}var ew,M5;function Le(){if(M5)return ew;M5=1;var t=vr(),e=Y0(),r=ise(),n=Br(),i=J0().f,s=jEe(),o=Or(),a=Z0(),l=mh(),c=Vr(),u=function(h){var f=function(p,m,g){if(this instanceof f){switch(arguments.length){case 0:return new h;case 1:return new h(p);case 2:return new h(p,m)}return new h(p,m,g)}return e(h,this,arguments)};return f.prototype=h.prototype,f};return ew=function(h,f){var p=h.target,m=h.global,g=h.stat,v=h.proto,y=m?t:g?t[p]:t[p]&&t[p].prototype,b=m?o:o[p]||l(o,p,{})[p],w=b.prototype,x,S,_,C,E,N,T,j,P;for(C in f)x=s(m?C:p+(g?".":"#")+C,h.forced),S=!x&&y&&c(y,C),N=b[C],S&&(h.dontCallGetSet?(P=i(y,C),T=P&&P.value):T=y[C]),E=S&&T?T:f[C],!(!x&&!v&&typeof N==typeof E)&&(h.bind&&S?j=a(E,t):h.wrap&&S?j=u(E):v&&n(E)?j=r(E):j=E,(h.sham||E&&E.sham||N&&N.sham)&&l(j,"sham",!0),l(b,C,j),v&&(_=p+"Prototype",c(o,_)||l(o,_,{}),l(o[_],C,E),h.real&&w&&(x||!w[C])&&l(w,C,E)))},ew}var A5;function PEe(){if(A5)return qq;A5=1;var t=Le(),e=br(),r=Hi().f;return t({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!e},{defineProperty:r}),qq}var D5;function IEe(){if(D5)return ox.exports;D5=1,PEe();var t=Or(),e=t.Object,r=ox.exports=function(i,s,o){return e.defineProperty(i,s,o)};return e.defineProperty.sham&&(r.sham=!0),ox.exports}var tw,$5;function use(){if($5)return tw;$5=1;var t=IEe();return tw=t,tw}var rw,F5;function REe(){if(F5)return rw;F5=1;var t=use();return rw=t,rw}var nw,q5;function MEe(){if(q5)return nw;q5=1;var t=REe();return nw=t,nw}var iw,L5;function AEe(){return L5||(L5=1,iw=MEe()),iw}var DEe=AEe(),$Ee=Je(DEe),B5={},sw,z5;function Qc(){if(z5)return sw;z5=1;var t=Lo();return sw=Array.isArray||function(r){return t(r)==="Array"},sw}var ow,V5;function FEe(){if(V5)return ow;V5=1;var t=Math.ceil,e=Math.floor;return ow=Math.trunc||function(n){var i=+n;return(i>0?e:t)(i)},ow}var aw,U5;function gh(){if(U5)return aw;U5=1;var t=FEe();return aw=function(e){var r=+e;return r!==r||r===0?0:t(r)},aw}var lw,H5;function dse(){if(H5)return lw;H5=1;var t=gh(),e=Math.min;return lw=function(r){var n=t(r);return n>0?e(n,9007199254740991):0},lw}var cw,W5;function dl(){if(W5)return cw;W5=1;var t=dse();return cw=function(e){return t(e.length)},cw}var uw,K5;function hse(){if(K5)return uw;K5=1;var t=TypeError,e=9007199254740991;return uw=function(r){if(r>e)throw t("Maximum allowed index exceeded");return r},uw}var dw,G5;function eb(){if(G5)return dw;G5=1;var t=br(),e=Hi(),r=lm();return dw=function(n,i,s){t?e.f(n,i,r(0,s)):n[i]=s},dw}var hw,Y5;function xA(){if(Y5)return hw;Y5=1;var t=Ur(),e=t("toStringTag"),r={};return r[e]="z",hw=String(r)==="[object z]",hw}var fw,Q5;function hl(){if(Q5)return fw;Q5=1;var t=xA(),e=Br(),r=Lo(),n=Ur(),i=n("toStringTag"),s=Object,o=r(function(){return arguments}())==="Arguments",a=function(l,c){try{return l[c]}catch{}};return fw=t?r:function(l){var c,u,h;return l===void 0?"Undefined":l===null?"Null":typeof(u=a(c=s(l),i))=="string"?u:o?r(c):(h=r(c))==="Object"&&e(c.callee)?"Arguments":h},fw}var pw,X5;function qEe(){if(X5)return pw;X5=1;var t=wt(),e=Br(),r=vA(),n=t(Function.toString);return e(r.inspectSource)||(r.inspectSource=function(i){return n(i)}),pw=r.inspectSource,pw}var mw,J5;function fse(){if(J5)return mw;J5=1;var t=wt(),e=pt(),r=Br(),n=hl(),i=xi(),s=qEe(),o=function(){},a=i("Reflect","construct"),l=/^\s*(?:class|function)\b/,c=t(l.exec),u=!l.test(o),h=function(m){if(!r(m))return!1;try{return a(o,[],m),!0}catch{return!1}},f=function(m){if(!r(m))return!1;switch(n(m)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return u||!!c(l,s(m))}catch{return!0}};return f.sham=!0,mw=!a||e(function(){var p;return h(h.call)||!h(Object)||!h(function(){p=!0})||p})?f:h,mw}var gw,Z5;function LEe(){if(Z5)return gw;Z5=1;var t=Qc(),e=fse(),r=Dn(),n=Ur(),i=n("species"),s=Array;return gw=function(o){var a;return t(o)&&(a=o.constructor,e(a)&&(a===s||t(a.prototype))?a=void 0:r(a)&&(a=a[i],a===null&&(a=void 0))),a===void 0?s:a},gw}var yw,e3;function wA(){if(e3)return yw;e3=1;var t=LEe();return yw=function(e,r){return new(t(e))(r===0?0:r)},yw}var vw,t3;function hm(){if(t3)return vw;t3=1;var t=pt(),e=Ur(),r=um(),n=e("species");return vw=function(i){return r>=51||!t(function(){var s=[],o=s.constructor={};return o[n]=function(){return{foo:1}},s[i](Boolean).foo!==1})},vw}var r3;function pse(){if(r3)return B5;r3=1;var t=Le(),e=pt(),r=Qc(),n=Dn(),i=ys(),s=dl(),o=hse(),a=eb(),l=wA(),c=hm(),u=Ur(),h=um(),f=u("isConcatSpreadable"),p=h>=51||!e(function(){var v=[];return v[f]=!1,v.concat()[0]!==v}),m=function(v){if(!n(v))return!1;var y=v[f];return y!==void 0?!!y:r(v)},g=!p||!c("concat");return t({target:"Array",proto:!0,arity:1,forced:g},{concat:function(y){var b=i(this),w=l(b,0),x=0,S,_,C,E,N;for(S=-1,C=arguments.length;S<C;S++)if(N=S===-1?b:arguments[S],m(N))for(E=s(N),o(x+E),_=0;_<E;_++,x++)_ in N&&a(w,x,N[_]);else o(x+1),a(w,x++,N);return w.length=x,w}}),B5}var n3={},i3={},bw,s3;function fl(){if(s3)return bw;s3=1;var t=hl(),e=String;return bw=function(r){if(t(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(r)},bw}var xw={},ww,o3;function SA(){if(o3)return ww;o3=1;var t=gh(),e=Math.max,r=Math.min;return ww=function(n,i){var s=t(n);return s<0?e(s+i,0):r(s,i)},ww}var Sw,a3;function BEe(){if(a3)return Sw;a3=1;var t=Vs(),e=SA(),r=dl(),n=function(i){return function(s,o,a){var l=t(s),c=r(l);if(c===0)return!i&&-1;var u=e(a,c),h;if(i&&o!==o){for(;c>u;)if(h=l[u++],h!==h)return!0}else for(;c>u;u++)if((i||u in l)&&l[u]===o)return i||u||0;return!i&&-1}};return Sw={includes:n(!0),indexOf:n(!1)},Sw}var _w,l3;function fm(){return l3||(l3=1,_w={}),_w}var Ew,c3;function mse(){if(c3)return Ew;c3=1;var t=wt(),e=Vr(),r=Vs(),n=BEe().indexOf,i=fm(),s=t([].push);return Ew=function(o,a){var l=r(o),c=0,u=[],h;for(h in l)!e(i,h)&&e(l,h)&&s(u,h);for(;a.length>c;)e(l,h=a[c++])&&(~n(u,h)||s(u,h));return u},Ew}var Cw,u3;function _A(){return u3||(u3=1,Cw=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),Cw}var Nw,d3;function tb(){if(d3)return Nw;d3=1;var t=mse(),e=_A();return Nw=Object.keys||function(n){return t(n,e)},Nw}var h3;function EA(){if(h3)return xw;h3=1;var t=br(),e=cse(),r=Hi(),n=zo(),i=Vs(),s=tb();return xw.f=t&&!e?Object.defineProperties:function(a,l){n(a);for(var c=i(l),u=s(l),h=u.length,f=0,p;h>f;)r.f(a,p=u[f++],c[p]);return a},xw}var kw,f3;function zEe(){if(f3)return kw;f3=1;var t=xi();return kw=t("document","documentElement"),kw}var Tw,p3;function rb(){if(p3)return Tw;p3=1;var t=ph(),e=X0(),r=t("keys");return Tw=function(n){return r[n]||(r[n]=e(n))},Tw}var Ow,m3;function pm(){if(m3)return Ow;m3=1;var t=zo(),e=EA(),r=_A(),n=fm(),i=zEe(),s=ase(),o=rb(),a=">",l="<",c="prototype",u="script",h=o("IE_PROTO"),f=function(){},p=function(b){return l+u+a+b+l+"/"+u+a},m=function(b){b.write(p("")),b.close();var w=b.parentWindow.Object;return b=null,w},g=function(){var b=s("iframe"),w="java"+u+":",x;return b.style.display="none",i.appendChild(b),b.src=String(w),x=b.contentWindow.document,x.open(),x.write(p("document.F=Object")),x.close(),x.F},v,y=function(){try{v=new ActiveXObject("htmlfile")}catch{}y=typeof document<"u"?document.domain&&v?m(v):g():m(v);for(var b=r.length;b--;)delete y[c][r[b]];return y()};return n[h]=!0,Ow=Object.create||function(w,x){var S;return w!==null?(f[c]=t(w),S=new f,f[c]=null,S[h]=w):S=y(),x===void 0?S:e.f(S,x)},Ow}var jw={},g3;function nb(){if(g3)return jw;g3=1;var t=mse(),e=_A(),r=e.concat("length","prototype");return jw.f=Object.getOwnPropertyNames||function(i){return t(i,r)},jw}var Pw={},Iw,y3;function yh(){if(y3)return Iw;y3=1;var t=wt();return Iw=t([].slice),Iw}var v3;function gse(){if(v3)return Pw;v3=1;var t=Lo(),e=Vs(),r=nb().f,n=yh(),i=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(o){try{return r(o)}catch{return n(i)}};return Pw.f=function(a){return i&&t(a)==="Window"?s(a):r(e(a))},Pw}var Rw={},b3;function ib(){return b3||(b3=1,Rw.f=Object.getOwnPropertySymbols),Rw}var Mw,x3;function mm(){if(x3)return Mw;x3=1;var t=mh();return Mw=function(e,r,n,i){return i&&i.enumerable?e[r]=n:t(e,r,n),e},Mw}var Aw,w3;function CA(){if(w3)return Aw;w3=1;var t=Hi();return Aw=function(e,r,n){return t.f(e,r,n)},Aw}var Dw={},S3;function sb(){if(S3)return Dw;S3=1;var t=Ur();return Dw.f=t,Dw}var $w,_3;function Ut(){if(_3)return $w;_3=1;var t=Or(),e=Vr(),r=sb(),n=Hi().f;return $w=function(i){var s=t.Symbol||(t.Symbol={});e(s,i)||n(s,i,{value:r.f(i)})},$w}var Fw,E3;function yse(){if(E3)return Fw;E3=1;var t=ni(),e=xi(),r=Ur(),n=mm();return Fw=function(){var i=e("Symbol"),s=i&&i.prototype,o=s&&s.valueOf,a=r("toPrimitive");s&&!s[a]&&n(s,a,function(l){return t(o,this)},{arity:1})},Fw}var qw,C3;function VEe(){if(C3)return qw;C3=1;var t=xA(),e=hl();return qw=t?{}.toString:function(){return"[object "+e(this)+"]"},qw}var Lw,N3;function Xc(){if(N3)return Lw;N3=1;var t=xA(),e=Hi().f,r=mh(),n=Vr(),i=VEe(),s=Ur(),o=s("toStringTag");return Lw=function(a,l,c,u){var h=c?a:a&&a.prototype;h&&(n(h,o)||e(h,o,{configurable:!0,value:l}),u&&!t&&r(h,"toString",i))},Lw}var Bw,k3;function UEe(){if(k3)return Bw;k3=1;var t=vr(),e=Br(),r=t.WeakMap;return Bw=e(r)&&/native code/.test(String(r)),Bw}var zw,T3;function gm(){if(T3)return zw;T3=1;var t=UEe(),e=vr(),r=Dn(),n=mh(),i=Vr(),s=vA(),o=rb(),a=fm(),l="Object already initialized",c=e.TypeError,u=e.WeakMap,h,f,p,m=function(b){return p(b)?f(b):h(b,{})},g=function(b){return function(w){var x;if(!r(w)||(x=f(w)).type!==b)throw new c("Incompatible receiver, "+b+" required");return x}};if(t||s.state){var v=s.state||(s.state=new u);v.get=v.get,v.has=v.has,v.set=v.set,h=function(b,w){if(v.has(b))throw new c(l);return w.facade=b,v.set(b,w),w},f=function(b){return v.get(b)||{}},p=function(b){return v.has(b)}}else{var y=o("state");a[y]=!0,h=function(b,w){if(i(b,y))throw new c(l);return w.facade=b,n(b,y,w),w},f=function(b){return i(b,y)?b[y]:{}},p=function(b){return i(b,y)}}return zw={set:h,get:f,has:p,enforce:m,getterFor:g},zw}var Vw,O3;function vh(){if(O3)return Vw;O3=1;var t=Z0(),e=wt(),r=Q0(),n=ys(),i=dl(),s=wA(),o=e([].push),a=function(l){var c=l===1,u=l===2,h=l===3,f=l===4,p=l===6,m=l===7,g=l===5||p;return function(v,y,b,w){for(var x=n(v),S=r(x),_=i(S),C=t(y,b),E=0,N=w||s,T=c?N(v,_):u||m?N(v,0):void 0,j,P;_>E;E++)if((g||E in S)&&(j=S[E],P=C(j,E,x),l))if(c)T[E]=P;else if(P)switch(l){case 3:return!0;case 5:return j;case 6:return E;case 2:o(T,j)}else switch(l){case 4:return!1;case 7:o(T,j)}return p?-1:h||f?f:T}};return Vw={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterReject:a(7)},Vw}var j3;function HEe(){if(j3)return i3;j3=1;var t=Le(),e=vr(),r=ni(),n=wt(),i=fh(),s=br(),o=dh(),a=pt(),l=Vr(),c=zr(),u=zo(),h=Vs(),f=bA(),p=fl(),m=lm(),g=pm(),v=tb(),y=nb(),b=gse(),w=ib(),x=J0(),S=Hi(),_=EA(),C=gA(),E=mm(),N=CA(),T=ph(),j=rb(),P=fm(),O=X0(),D=Ur(),z=sb(),R=Ut(),B=yse(),q=Xc(),$=gm(),K=vh().forEach,W=j("hidden"),F="Symbol",X="prototype",Q=$.set,Ce=$.getterFor(F),xe=Object[X],Be=e.Symbol,at=Be&&Be[X],Kr=e.RangeError,Sr=e.TypeError,Wt=e.QObject,jr=x.f,nt=S.f,yn=b.f,$n=C.f,Pr=n([].push),gt=T("symbols"),rr=T("op-symbols"),Ws=T("wks"),_r=!Wt||!Wt[X]||!Wt[X].findChild,A=function(Se,ne,fe){var ce=jr(xe,ne);ce&&delete xe[ne],nt(Se,ne,fe),ce&&Se!==xe&&nt(xe,ne,ce)},L=s&&a(function(){return g(nt({},"a",{get:function(){return nt(this,"a",{value:7}).a}})).a!==7})?A:nt,U=function(Se,ne){var fe=gt[Se]=g(at);return Q(fe,{type:F,tag:Se,description:ne}),s||(fe.description=ne),fe},oe=function(ne,fe,ce){ne===xe&&oe(rr,fe,ce),u(ne);var Ne=f(fe);return u(ce),l(gt,Ne)?(ce.enumerable?(l(ne,W)&&ne[W][Ne]&&(ne[W][Ne]=!1),ce=g(ce,{enumerable:m(0,!1)})):(l(ne,W)||nt(ne,W,m(1,g(null))),ne[W][Ne]=!0),L(ne,Ne,ce)):nt(ne,Ne,ce)},ee=function(ne,fe){u(ne);var ce=h(fe),Ne=v(ce).concat(St(ce));return K(Ne,function(He){(!s||r(me,ce,He))&&oe(ne,He,ce[He])}),ne},Z=function(ne,fe){return fe===void 0?g(ne):ee(g(ne),fe)},me=function(ne){var fe=f(ne),ce=r($n,this,fe);return this===xe&&l(gt,fe)&&!l(rr,fe)?!1:ce||!l(this,fe)||!l(gt,fe)||l(this,W)&&this[W][fe]?ce:!0},Fe=function(ne,fe){var ce=h(ne),Ne=f(fe);if(!(ce===xe&&l(gt,Ne)&&!l(rr,Ne))){var He=jr(ce,Ne);return He&&l(gt,Ne)&&!(l(ce,W)&&ce[W][Ne])&&(He.enumerable=!0),He}},Ke=function(ne){var fe=yn(h(ne)),ce=[];return K(fe,function(Ne){!l(gt,Ne)&&!l(P,Ne)&&Pr(ce,Ne)}),ce},St=function(Se){var ne=Se===xe,fe=yn(ne?rr:h(Se)),ce=[];return K(fe,function(Ne){l(gt,Ne)&&(!ne||l(xe,Ne))&&Pr(ce,gt[Ne])}),ce};return o||(Be=function(){if(c(at,this))throw new Sr("Symbol is not a constructor");var ne=!arguments.length||arguments[0]===void 0?void 0:p(arguments[0]),fe=O(ne),ce=function(Ne){var He=this===void 0?e:this;He===xe&&r(ce,rr,Ne),l(He,W)&&l(He[W],fe)&&(He[W][fe]=!1);var _i=m(1,Ne);try{L(He,fe,_i)}catch(vn){if(!(vn instanceof Kr))throw vn;A(He,fe,_i)}};return s&&_r&&L(xe,fe,{configurable:!0,set:ce}),U(fe,ne)},at=Be[X],E(at,"toString",function(){return Ce(this).tag}),E(Be,"withoutSetter",function(Se){return U(O(Se),Se)}),C.f=me,S.f=oe,_.f=ee,x.f=Fe,y.f=b.f=Ke,w.f=St,z.f=function(Se){return U(D(Se),Se)},s&&(N(at,"description",{configurable:!0,get:function(){return Ce(this).description}}),i||E(xe,"propertyIsEnumerable",me,{unsafe:!0}))),t({global:!0,constructor:!0,wrap:!0,forced:!o,sham:!o},{Symbol:Be}),K(v(Ws),function(Se){R(Se)}),t({target:F,stat:!0,forced:!o},{useSetter:function(){_r=!0},useSimple:function(){_r=!1}}),t({target:"Object",stat:!0,forced:!o,sham:!s},{create:Z,defineProperty:oe,defineProperties:ee,getOwnPropertyDescriptor:Fe}),t({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:Ke}),B(),q(Be,F),P[W]=!0,i3}var P3={},Uw,I3;function vse(){if(I3)return Uw;I3=1;var t=dh();return Uw=t&&!!Symbol.for&&!!Symbol.keyFor,Uw}var R3;function WEe(){if(R3)return P3;R3=1;var t=Le(),e=xi(),r=Vr(),n=fl(),i=ph(),s=vse(),o=i("string-to-symbol-registry"),a=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{for:function(l){var c=n(l);if(r(o,c))return o[c];var u=e("Symbol")(c);return o[c]=u,a[u]=c,u}}),P3}var M3={},A3;function KEe(){if(A3)return M3;A3=1;var t=Le(),e=Vr(),r=dm(),n=hh(),i=ph(),s=vse(),o=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{keyFor:function(l){if(!r(l))throw new TypeError(n(l)+" is not a symbol");if(e(o,l))return o[l]}}),M3}var D3={},Hw,$3;function GEe(){if($3)return Hw;$3=1;var t=wt(),e=Qc(),r=Br(),n=Lo(),i=fl(),s=t([].push);return Hw=function(o){if(r(o))return o;if(e(o)){for(var a=o.length,l=[],c=0;c<a;c++){var u=o[c];typeof u=="string"?s(l,u):(typeof u=="number"||n(u)==="Number"||n(u)==="String")&&s(l,i(u))}var h=l.length,f=!0;return function(p,m){if(f)return f=!1,m;if(e(this))return m;for(var g=0;g<h;g++)if(l[g]===p)return m}}},Hw}var F3;function bse(){if(F3)return D3;F3=1;var t=Le(),e=xi(),r=Y0(),n=ni(),i=wt(),s=pt(),o=Br(),a=dm(),l=yh(),c=GEe(),u=dh(),h=String,f=e("JSON","stringify"),p=i(/./.exec),m=i("".charAt),g=i("".charCodeAt),v=i("".replace),y=i(1.1.toString),b=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,x=/^[\uDC00-\uDFFF]$/,S=!u||s(function(){var N=e("Symbol")("stringify detection");return f([N])!=="[null]"||f({a:N})!=="{}"||f(Object(N))!=="{}"}),_=s(function(){return f("\uDF06\uD834")!=='"\\udf06\\ud834"'||f("\uDEAD")!=='"\\udead"'}),C=function(N,T){var j=l(arguments),P=c(T);if(!(!o(P)&&(N===void 0||a(N))))return j[1]=function(O,D){if(o(P)&&(D=n(P,this,h(O),D)),!a(D))return D},r(f,null,j)},E=function(N,T,j){var P=m(j,T-1),O=m(j,T+1);return p(w,N)&&!p(x,O)||p(x,N)&&!p(w,P)?"\\u"+y(g(N,0),16):N};return f&&t({target:"JSON",stat:!0,arity:3,forced:S||_},{stringify:function(T,j,P){var O=l(arguments),D=r(S?C:f,null,O);return _&&typeof D=="string"?v(D,b,E):D}}),D3}var q3={},L3;function YEe(){if(L3)return q3;L3=1;var t=Le(),e=dh(),r=pt(),n=ib(),i=ys(),s=!e||r(function(){n.f(1)});return t({target:"Object",stat:!0,forced:s},{getOwnPropertySymbols:function(a){var l=n.f;return l?l(i(a)):[]}}),q3}var B3;function xse(){return B3||(B3=1,HEe(),WEe(),KEe(),bse(),YEe()),n3}var z3={},V3;function wse(){if(V3)return z3;V3=1;var t=Ut();return t("asyncDispose"),z3}var U3={},H3;function QEe(){if(H3)return U3;H3=1;var t=Ut();return t("asyncIterator"),U3}var W3={},K3;function Sse(){if(K3)return W3;K3=1;var t=Ut();return t("dispose"),W3}var G3={},Y3;function XEe(){if(Y3)return G3;Y3=1;var t=Ut();return t("hasInstance"),G3}var Q3={},X3;function JEe(){if(X3)return Q3;X3=1;var t=Ut();return t("isConcatSpreadable"),Q3}var J3={},Z3;function _se(){if(Z3)return J3;Z3=1;var t=Ut();return t("iterator"),J3}var eL={},tL;function ZEe(){if(tL)return eL;tL=1;var t=Ut();return t("match"),eL}var rL={},nL;function eCe(){if(nL)return rL;nL=1;var t=Ut();return t("matchAll"),rL}var iL={},sL;function tCe(){if(sL)return iL;sL=1;var t=Ut();return t("replace"),iL}var oL={},aL;function rCe(){if(aL)return oL;aL=1;var t=Ut();return t("search"),oL}var lL={},cL;function nCe(){if(cL)return lL;cL=1;var t=Ut();return t("species"),lL}var uL={},dL;function iCe(){if(dL)return uL;dL=1;var t=Ut();return t("split"),uL}var hL={},fL;function Ese(){if(fL)return hL;fL=1;var t=Ut(),e=yse();return t("toPrimitive"),e(),hL}var pL={},mL;function sCe(){if(mL)return pL;mL=1;var t=xi(),e=Ut(),r=Xc();return e("toStringTag"),r(t("Symbol"),"Symbol"),pL}var gL={},yL;function oCe(){if(yL)return gL;yL=1;var t=Ut();return t("unscopables"),gL}var vL={},bL;function aCe(){if(bL)return vL;bL=1;var t=vr(),e=Xc();return e(t.JSON,"JSON",!0),vL}var Ww,xL;function lCe(){if(xL)return Ww;xL=1,pse(),xse(),wse(),QEe(),Sse(),XEe(),JEe(),_se(),ZEe(),eCe(),tCe(),rCe(),nCe(),iCe(),Ese(),sCe(),oCe(),aCe();var t=Or();return Ww=t.Symbol,Ww}var wL={},Kw,SL;function cCe(){return SL||(SL=1,Kw=function(){}),Kw}var Gw,_L;function bh(){return _L||(_L=1,Gw={}),Gw}var Yw,EL;function uCe(){if(EL)return Yw;EL=1;var t=br(),e=Vr(),r=Function.prototype,n=t&&Object.getOwnPropertyDescriptor,i=e(r,"name"),s=i&&(function(){}).name==="something",o=i&&(!t||t&&n(r,"name").configurable);return Yw={EXISTS:i,PROPER:s,CONFIGURABLE:o},Yw}var Qw,CL;function dCe(){if(CL)return Qw;CL=1;var t=pt();return Qw=!t(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),Qw}var Xw,NL;function Cse(){if(NL)return Xw;NL=1;var t=Vr(),e=Br(),r=ys(),n=rb(),i=dCe(),s=n("IE_PROTO"),o=Object,a=o.prototype;return Xw=i?o.getPrototypeOf:function(l){var c=r(l);if(t(c,s))return c[s];var u=c.constructor;return e(u)&&c instanceof u?u.prototype:c instanceof o?a:null},Xw}var Jw,kL;function Nse(){if(kL)return Jw;kL=1;var t=pt(),e=Br(),r=Dn(),n=pm(),i=Cse(),s=mm(),o=Ur(),a=fh(),l=o("iterator"),c=!1,u,h,f;[].keys&&(f=[].keys(),"next"in f?(h=i(i(f)),h!==Object.prototype&&(u=h)):c=!0);var p=!r(u)||t(function(){var m={};return u[l].call(m)!==m});return p?u={}:a&&(u=n(u)),e(u[l])||s(u,l,function(){return this}),Jw={IteratorPrototype:u,BUGGY_SAFARI_ITERATORS:c},Jw}var Zw,TL;function hCe(){if(TL)return Zw;TL=1;var t=Nse().IteratorPrototype,e=pm(),r=lm(),n=Xc(),i=bh(),s=function(){return this};return Zw=function(o,a,l,c){var u=a+" Iterator";return o.prototype=e(t,{next:r(+!c,l)}),n(o,u,!1,!0),i[u]=s,o},Zw}var eS,OL;function fCe(){if(OL)return eS;OL=1;var t=wt(),e=Bo();return eS=function(r,n,i){try{return t(e(Object.getOwnPropertyDescriptor(r,n)[i]))}catch{}},eS}var tS,jL;function pCe(){if(jL)return tS;jL=1;var t=Dn();return tS=function(e){return t(e)||e===null},tS}var rS,PL;function mCe(){if(PL)return rS;PL=1;var t=pCe(),e=String,r=TypeError;return rS=function(n){if(t(n))return n;throw new r("Can't set "+e(n)+" as a prototype")},rS}var nS,IL;function gCe(){if(IL)return nS;IL=1;var t=fCe(),e=Dn(),r=Yc(),n=mCe();return nS=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,s={},o;try{o=t(Object.prototype,"__proto__","set"),o(s,[]),i=s instanceof Array}catch{}return function(l,c){return r(l),n(c),e(l)&&(i?o(l,c):l.__proto__=c),l}}():void 0),nS}var iS,RL;function NA(){if(RL)return iS;RL=1;var t=Le(),e=ni(),r=fh(),n=uCe(),i=Br(),s=hCe(),o=Cse(),a=gCe(),l=Xc(),c=mh(),u=mm(),h=Ur(),f=bh(),p=Nse(),m=n.PROPER,g=n.CONFIGURABLE,v=p.IteratorPrototype,y=p.BUGGY_SAFARI_ITERATORS,b=h("iterator"),w="keys",x="values",S="entries",_=function(){return this};return iS=function(C,E,N,T,j,P,O){s(N,E,T);var D=function(Q){if(Q===j&&$)return $;if(!y&&Q&&Q in B)return B[Q];switch(Q){case w:return function(){return new N(this,Q)};case x:return function(){return new N(this,Q)};case S:return function(){return new N(this,Q)}}return function(){return new N(this)}},z=E+" Iterator",R=!1,B=C.prototype,q=B[b]||B["@@iterator"]||j&&B[j],$=!y&&q||D(j),K=E==="Array"&&B.entries||q,W,F,X;if(K&&(W=o(K.call(new C)),W!==Object.prototype&&W.next&&(!r&&o(W)!==v&&(a?a(W,v):i(W[b])||u(W,b,_)),l(W,z,!0,!0),r&&(f[z]=_))),m&&j===x&&q&&q.name!==x&&(!r&&g?c(B,"name",x):(R=!0,$=function(){return e(q,this)})),j)if(F={values:D(x),keys:P?$:D(w),entries:D(S)},O)for(X in F)(y||R||!(X in B))&&u(B,X,F[X]);else t({target:E,proto:!0,forced:y||R},F);return(!r||O)&&B[b]!==$&&u(B,b,$,{name:j}),f[E]=$,F},iS}var sS,ML;function kA(){return ML||(ML=1,sS=function(t,e){return{value:t,done:e}}),sS}var oS,AL;function pl(){if(AL)return oS;AL=1;var t=Vs(),e=cCe(),r=bh(),n=gm(),i=Hi().f,s=NA(),o=kA(),a=fh(),l=br(),c="Array Iterator",u=n.set,h=n.getterFor(c);oS=s(Array,"Array",function(p,m){u(this,{type:c,target:t(p),index:0,kind:m})},function(){var p=h(this),m=p.target,g=p.index++;if(!m||g>=m.length)return p.target=null,o(void 0,!0);switch(p.kind){case"keys":return o(g,!1);case"values":return o(m[g],!1)}return o([g,m[g]],!1)},"values");var f=r.Arguments=r.Array;if(e("keys"),e("values"),e("entries"),!a&&l&&f.name!=="values")try{i(f,"name",{value:"values"})}catch{}return oS}var aS,DL;function yCe(){return DL||(DL=1,aS={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),aS}var $L;function ml(){if($L)return wL;$L=1,pl();var t=yCe(),e=vr(),r=Xc(),n=bh();for(var i in t)r(e[i],i),n[i]=n.Array;return wL}var lS,FL;function kse(){if(FL)return lS;FL=1;var t=lCe();return ml(),lS=t,lS}var qL={},LL;function vCe(){if(LL)return qL;LL=1;var t=Ur(),e=Hi().f,r=t("metadata"),n=Function.prototype;return n[r]===void 0&&e(n,r,{value:null}),qL}var BL={},zL;function bCe(){return zL||(zL=1,wse()),BL}var VL={},UL;function xCe(){return UL||(UL=1,Sse()),VL}var HL={},WL;function wCe(){if(WL)return HL;WL=1;var t=Ut();return t("metadata"),HL}var cS,KL;function SCe(){if(KL)return cS;KL=1;var t=kse();return vCe(),bCe(),xCe(),wCe(),cS=t,cS}var GL={},uS,YL;function Tse(){if(YL)return uS;YL=1;var t=xi(),e=wt(),r=t("Symbol"),n=r.keyFor,i=e(r.prototype.valueOf);return uS=r.isRegisteredSymbol||function(o){try{return n(i(o))!==void 0}catch{return!1}},uS}var QL;function _Ce(){if(QL)return GL;QL=1;var t=Le(),e=Tse();return t({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),GL}var XL={},dS,JL;function Ose(){if(JL)return dS;JL=1;for(var t=ph(),e=xi(),r=wt(),n=dm(),i=Ur(),s=e("Symbol"),o=s.isWellKnownSymbol,a=e("Object","getOwnPropertyNames"),l=r(s.prototype.valueOf),c=t("wks"),u=0,h=a(s),f=h.length;u<f;u++)try{var p=h[u];n(s[p])&&i(p)}catch{}return dS=function(g){if(o&&o(g))return!0;try{for(var v=l(g),y=0,b=a(c),w=b.length;y<w;y++)if(c[b[y]]==v)return!0}catch{}return!1},dS}var ZL;function ECe(){if(ZL)return XL;ZL=1;var t=Le(),e=Ose();return t({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),XL}var eB={},tB;function CCe(){if(tB)return eB;tB=1;var t=Ut();return t("customMatcher"),eB}var rB={},nB;function NCe(){if(nB)return rB;nB=1;var t=Ut();return t("observable"),rB}var iB={},sB;function kCe(){if(sB)return iB;sB=1;var t=Le(),e=Tse();return t({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),iB}var oB={},aB;function TCe(){if(aB)return oB;aB=1;var t=Le(),e=Ose();return t({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),oB}var lB={},cB;function OCe(){if(cB)return lB;cB=1;var t=Ut();return t("matcher"),lB}var uB={},dB;function jCe(){if(dB)return uB;dB=1;var t=Ut();return t("metadataKey"),uB}var hB={},fB;function PCe(){if(fB)return hB;fB=1;var t=Ut();return t("patternMatch"),hB}var pB={},mB;function ICe(){if(mB)return pB;mB=1;var t=Ut();return t("replaceAll"),pB}var hS,gB;function RCe(){if(gB)return hS;gB=1;var t=SCe();return _Ce(),ECe(),CCe(),NCe(),kCe(),TCe(),OCe(),jCe(),PCe(),ICe(),hS=t,hS}var fS,yB;function MCe(){return yB||(yB=1,fS=RCe()),fS}var ACe=MCe(),Rg=Je(ACe),vB={},pS,bB;function DCe(){if(bB)return pS;bB=1;var t=wt(),e=gh(),r=fl(),n=Yc(),i=t("".charAt),s=t("".charCodeAt),o=t("".slice),a=function(l){return function(c,u){var h=r(n(c)),f=e(u),p=h.length,m,g;return f<0||f>=p?l?"":void 0:(m=s(h,f),m<55296||m>56319||f+1===p||(g=s(h,f+1))<56320||g>57343?l?i(h,f):m:l?o(h,f,f+2):(m-55296<<10)+(g-56320)+65536)}};return pS={codeAt:a(!1),charAt:a(!0)},pS}var xB;function ob(){if(xB)return vB;xB=1;var t=DCe().charAt,e=fl(),r=gm(),n=NA(),i=kA(),s="String Iterator",o=r.set,a=r.getterFor(s);return n(String,"String",function(l){o(this,{type:s,string:e(l),index:0})},function(){var c=a(this),u=c.string,h=c.index,f;return h>=u.length?i(void 0,!0):(f=t(u,h),c.index+=f.length,i(f,!1))}),vB}var mS,wB;function $Ce(){if(wB)return mS;wB=1,pl(),ob(),_se();var t=sb();return mS=t.f("iterator"),mS}var gS,SB;function jse(){if(SB)return gS;SB=1;var t=$Ce();return ml(),gS=t,gS}var yS,_B;function FCe(){if(_B)return yS;_B=1;var t=jse();return yS=t,yS}var vS,EB;function qCe(){if(EB)return vS;EB=1;var t=FCe();return vS=t,vS}var bS,CB;function LCe(){return CB||(CB=1,bS=qCe()),bS}var BCe=LCe(),zCe=Je(BCe);function Ep(t){"@babel/helpers - typeof";return Ep=typeof Rg=="function"&&typeof zCe=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Rg=="function"&&e.constructor===Rg&&e!==Rg.prototype?"symbol":typeof e},Ep(t)}var xS,NB;function VCe(){if(NB)return xS;NB=1,Ese();var t=sb();return xS=t.f("toPrimitive"),xS}var wS,kB;function UCe(){if(kB)return wS;kB=1;var t=VCe();return wS=t,wS}var SS,TB;function HCe(){if(TB)return SS;TB=1;var t=UCe();return SS=t,SS}var _S,OB;function WCe(){if(OB)return _S;OB=1;var t=HCe();return _S=t,_S}var ES,jB;function KCe(){return jB||(jB=1,ES=WCe()),ES}var GCe=KCe(),YCe=Je(GCe);function QCe(t,e){if(Ep(t)!="object"||!t)return t;var r=t[YCe];if(r!==void 0){var n=r.call(t,e);if(Ep(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XCe(t){var e=QCe(t,"string");return Ep(e)=="symbol"?e:e+""}function Ha(t,e,r){return(e=XCe(e))in t?$Ee(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var PB={},CS,IB;function JCe(){if(IB)return CS;IB=1;var t=wt(),e=Bo(),r=Dn(),n=Vr(),i=yh(),s=am(),o=Function,a=t([].concat),l=t([].join),c={},u=function(h,f,p){if(!n(c,f)){for(var m=[],g=0;g<f;g++)m[g]="a["+g+"]";c[f]=o("C,a","return new C("+l(m,",")+")")}return c[f](h,p)};return CS=s?o.bind:function(f){var p=e(this),m=p.prototype,g=i(arguments,1),v=function(){var b=a(g,i(arguments));return this instanceof v?u(p,b.length,b):p.apply(f,b)};return r(m)&&(v.prototype=m),v},CS}var RB;function ZCe(){if(RB)return PB;RB=1;var t=Le(),e=JCe();return t({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),PB}var NS,MB;function ii(){if(MB)return NS;MB=1;var t=vr(),e=Or();return NS=function(r,n){var i=e[r+"Prototype"],s=i&&i[n];if(s)return s;var o=t[r],a=o&&o.prototype;return a&&a[n]},NS}var kS,AB;function eNe(){if(AB)return kS;AB=1,ZCe();var t=ii();return kS=t("Function","bind"),kS}var TS,DB;function tNe(){if(DB)return TS;DB=1;var t=zr(),e=eNe(),r=Function.prototype;return TS=function(n){var i=n.bind;return n===r||t(r,n)&&i===r.bind?e:i},TS}var OS,$B;function rNe(){if($B)return OS;$B=1;var t=tNe();return OS=t,OS}var jS,FB;function nNe(){return FB||(FB=1,jS=rNe()),jS}var iNe=nNe(),Pse=Je(iNe),qB={},PS,LB;function sNe(){if(LB)return PS;LB=1;var t=Bo(),e=ys(),r=Q0(),n=dl(),i=TypeError,s="Reduce of empty array with no initial value",o=function(a){return function(l,c,u,h){var f=e(l),p=r(f),m=n(f);if(t(c),m===0&&u<2)throw new i(s);var g=a?m-1:0,v=a?-1:1;if(u<2)for(;;){if(g in p){h=p[g],g+=v;break}if(g+=v,a?g<0:m<=g)throw new i(s)}for(;a?g>=0:m>g;g+=v)g in p&&(h=c(h,p[g],g,f));return h}};return PS={left:o(!1),right:o(!0)},PS}var IS,BB;function ab(){if(BB)return IS;BB=1;var t=pt();return IS=function(e,r){var n=[][e];return!!n&&t(function(){n.call(null,r||function(){return 1},1)})},IS}var RS,zB;function Ise(){if(zB)return RS;zB=1;var t=vr(),e=uh(),r=Lo(),n=function(i){return e.slice(0,i.length)===i};return RS=function(){return n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":t.Bun&&typeof Bun.version=="string"?"BUN":t.Deno&&typeof Deno.version=="object"?"DENO":r(t.process)==="process"?"NODE":t.window&&t.document?"BROWSER":"REST"}(),RS}var MS,VB;function oNe(){if(VB)return MS;VB=1;var t=Ise();return MS=t==="NODE",MS}var UB;function aNe(){if(UB)return qB;UB=1;var t=Le(),e=sNe().left,r=ab(),n=um(),i=oNe(),s=!i&&n>79&&n<83,o=s||!r("reduce");return t({target:"Array",proto:!0,forced:o},{reduce:function(l){var c=arguments.length;return e(this,l,c,c>1?arguments[1]:void 0)}}),qB}var AS,HB;function lNe(){if(HB)return AS;HB=1,aNe();var t=ii();return AS=t("Array","reduce"),AS}var DS,WB;function cNe(){if(WB)return DS;WB=1;var t=zr(),e=lNe(),r=Array.prototype;return DS=function(n){var i=n.reduce;return n===r||t(r,n)&&i===r.reduce?e:i},DS}var $S,KB;function uNe(){if(KB)return $S;KB=1;var t=cNe();return $S=t,$S}var FS,GB;function dNe(){return GB||(GB=1,FS=uNe()),FS}var hNe=dNe(),fNe=Je(hNe),YB={},QB;function pNe(){if(QB)return YB;QB=1;var t=Le(),e=vh().filter,r=hm(),n=r("filter");return t({target:"Array",proto:!0,forced:!n},{filter:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),YB}var qS,XB;function mNe(){if(XB)return qS;XB=1,pNe();var t=ii();return qS=t("Array","filter"),qS}var LS,JB;function gNe(){if(JB)return LS;JB=1;var t=zr(),e=mNe(),r=Array.prototype;return LS=function(n){var i=n.filter;return n===r||t(r,n)&&i===r.filter?e:i},LS}var BS,ZB;function yNe(){if(ZB)return BS;ZB=1;var t=gNe();return BS=t,BS}var zS,ez;function vNe(){return ez||(ez=1,zS=yNe()),zS}var bNe=vNe(),Uu=Je(bNe),tz={},rz;function xNe(){if(rz)return tz;rz=1;var t=Le(),e=vh().map,r=hm(),n=r("map");return t({target:"Array",proto:!0,forced:!n},{map:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),tz}var VS,nz;function wNe(){if(nz)return VS;nz=1,xNe();var t=ii();return VS=t("Array","map"),VS}var US,iz;function SNe(){if(iz)return US;iz=1;var t=zr(),e=wNe(),r=Array.prototype;return US=function(n){var i=n.map;return n===r||t(r,n)&&i===r.map?e:i},US}var HS,sz;function _Ne(){if(sz)return HS;sz=1;var t=SNe();return HS=t,HS}var WS,oz;function ENe(){return oz||(oz=1,WS=_Ne()),WS}var CNe=ENe(),is=Je(CNe),KS,az;function NNe(){return az||(az=1,KS=kse()),KS}var kNe=NNe(),TNe=Je(kNe),lz={},cz;function ONe(){if(cz)return lz;cz=1;var t=Le(),e=Qc(),r=fse(),n=Dn(),i=SA(),s=dl(),o=Vs(),a=eb(),l=Ur(),c=hm(),u=yh(),h=c("slice"),f=l("species"),p=Array,m=Math.max;return t({target:"Array",proto:!0,forced:!h},{slice:function(v,y){var b=o(this),w=s(b),x=i(v,w),S=i(y===void 0?w:y,w),_,C,E;if(e(b)&&(_=b.constructor,r(_)&&(_===p||e(_.prototype))?_=void 0:n(_)&&(_=_[f],_===null&&(_=void 0)),_===p||_===void 0))return u(b,x,S);for(C=new(_===void 0?p:_)(m(S-x,0)),E=0;x<S;x++,E++)x in b&&a(C,E,b[x]);return C.length=E,C}}),lz}var GS,uz;function jNe(){if(uz)return GS;uz=1,ONe();var t=ii();return GS=t("Array","slice"),GS}var YS,dz;function PNe(){if(dz)return YS;dz=1;var t=zr(),e=jNe(),r=Array.prototype;return YS=function(n){var i=n.slice;return n===r||t(r,n)&&i===r.slice?e:i},YS}var QS,hz;function INe(){if(hz)return QS;hz=1;var t=PNe();return QS=t,QS}var XS,fz;function RNe(){return fz||(fz=1,XS=INe()),XS}var MNe=RNe(),ANe=Je(MNe),pz={},JS,mz;function Rse(){if(mz)return JS;mz=1;var t=xi(),e=wt(),r=nb(),n=ib(),i=zo(),s=e([].concat);return JS=t("Reflect","ownKeys")||function(a){var l=r.f(i(a)),c=n.f;return c?s(l,c(a)):l},JS}var gz;function DNe(){if(gz)return pz;gz=1;var t=Le(),e=Rse();return t({target:"Reflect",stat:!0},{ownKeys:e}),pz}var ZS,yz;function $Ne(){if(yz)return ZS;yz=1,DNe();var t=Or();return ZS=t.Reflect.ownKeys,ZS}var e_,vz;function FNe(){if(vz)return e_;vz=1;var t=$Ne();return e_=t,e_}var t_,bz;function qNe(){return bz||(bz=1,t_=FNe()),t_}var LNe=qNe(),BNe=Je(LNe),xz={},wz;function zNe(){if(wz)return xz;wz=1;var t=Le(),e=Qc();return t({target:"Array",stat:!0},{isArray:e}),xz}var r_,Sz;function VNe(){if(Sz)return r_;Sz=1,zNe();var t=Or();return r_=t.Array.isArray,r_}var n_,_z;function UNe(){if(_z)return n_;_z=1;var t=VNe();return n_=t,n_}var i_,Ez;function HNe(){return Ez||(Ez=1,i_=UNe()),i_}var WNe=HNe(),Ns=Je(WNe),Cz={},Nz;function KNe(){if(Nz)return Cz;Nz=1;var t=Le(),e=ys(),r=tb(),n=pt(),i=n(function(){r(1)});return t({target:"Object",stat:!0,forced:i},{keys:function(o){return r(e(o))}}),Cz}var s_,kz;function GNe(){if(kz)return s_;kz=1,KNe();var t=Or();return s_=t.Object.keys,s_}var o_,Tz;function YNe(){if(Tz)return o_;Tz=1;var t=GNe();return o_=t,o_}var a_,Oz;function QNe(){return Oz||(Oz=1,a_=YNe()),a_}var XNe=QNe(),TA=Je(XNe),jz={},l_,Pz;function JNe(){if(Pz)return l_;Pz=1;var t=vh().forEach,e=ab(),r=e("forEach");return l_=r?[].forEach:function(i){return t(this,i,arguments.length>1?arguments[1]:void 0)},l_}var Iz;function ZNe(){if(Iz)return jz;Iz=1;var t=Le(),e=JNe();return t({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),jz}var c_,Rz;function eke(){if(Rz)return c_;Rz=1,ZNe();var t=ii();return c_=t("Array","forEach"),c_}var u_,Mz;function tke(){if(Mz)return u_;Mz=1;var t=eke();return u_=t,u_}var d_,Az;function rke(){if(Az)return d_;Az=1;var t=hl(),e=Vr(),r=zr(),n=tke(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return d_=function(o){var a=o.forEach;return o===i||r(i,o)&&a===i.forEach||e(s,t(o))?n:a},d_}var h_,Dz;function nke(){return Dz||(Dz=1,h_=rke()),h_}var ike=nke(),Rc=Je(ike),$z={},Fz;function ske(){if(Fz)return $z;Fz=1;var t=Le(),e=wt(),r=Qc(),n=e([].reverse),i=[1,2];return t({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),n(this)}}),$z}var f_,qz;function oke(){if(qz)return f_;qz=1,ske();var t=ii();return f_=t("Array","reverse"),f_}var p_,Lz;function ake(){if(Lz)return p_;Lz=1;var t=zr(),e=oke(),r=Array.prototype;return p_=function(n){var i=n.reverse;return n===r||t(r,n)&&i===r.reverse?e:i},p_}var m_,Bz;function lke(){if(Bz)return m_;Bz=1;var t=ake();return m_=t,m_}var g_,zz;function cke(){return zz||(zz=1,g_=lke()),g_}var uke=cke(),dke=Je(uke),Vz={},y_,Uz;function hke(){if(Uz)return y_;Uz=1;var t=br(),e=Qc(),r=TypeError,n=Object.getOwnPropertyDescriptor,i=t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(s){return s instanceof TypeError}}();return y_=i?function(s,o){if(e(s)&&!n(s,"length").writable)throw new r("Cannot set read only .length");return s.length=o}:function(s,o){return s.length=o},y_}var v_,Hz;function Mse(){if(Hz)return v_;Hz=1;var t=hh(),e=TypeError;return v_=function(r,n){if(!delete r[n])throw new e("Cannot delete property "+t(n)+" of "+t(r))},v_}var Wz;function fke(){if(Wz)return Vz;Wz=1;var t=Le(),e=ys(),r=SA(),n=gh(),i=dl(),s=hke(),o=hse(),a=wA(),l=eb(),c=Mse(),u=hm(),h=u("splice"),f=Math.max,p=Math.min;return t({target:"Array",proto:!0,forced:!h},{splice:function(g,v){var y=e(this),b=i(y),w=r(g,b),x=arguments.length,S,_,C,E,N,T;for(x===0?S=_=0:x===1?(S=0,_=b-w):(S=x-2,_=p(f(n(v),0),b-w)),o(b+S-_),C=a(y,_),E=0;E<_;E++)N=w+E,N in y&&l(C,E,y[N]);if(C.length=_,S<_){for(E=w;E<b-_;E++)N=E+_,T=E+S,N in y?y[T]=y[N]:c(y,T);for(E=b;E>b-_+S;E--)c(y,E-1)}else if(S>_)for(E=b-_;E>w;E--)N=E+_-1,T=E+S-1,N in y?y[T]=y[N]:c(y,T);for(E=0;E<S;E++)y[E+w]=arguments[E+2];return s(y,b-_+S),C}}),Vz}var b_,Kz;function pke(){if(Kz)return b_;Kz=1,fke();var t=ii();return b_=t("Array","splice"),b_}var x_,Gz;function mke(){if(Gz)return x_;Gz=1;var t=zr(),e=pke(),r=Array.prototype;return x_=function(n){var i=n.splice;return n===r||t(r,n)&&i===r.splice?e:i},x_}var w_,Yz;function gke(){if(Yz)return w_;Yz=1;var t=mke();return w_=t,w_}var S_,Qz;function yke(){return Qz||(Qz=1,S_=gke()),S_}var vke=yke(),Ase=Je(vke),Xz={},__,Jz;function bke(){if(Jz)return __;Jz=1;var t=br(),e=wt(),r=ni(),n=pt(),i=tb(),s=ib(),o=gA(),a=ys(),l=Q0(),c=Object.assign,u=Object.defineProperty,h=e([].concat);return __=!c||n(function(){if(t&&c({b:1},c(u({},"a",{enumerable:!0,get:function(){u(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},p={},m=Symbol("assign detection"),g="abcdefghijklmnopqrst";return f[m]=7,g.split("").forEach(function(v){p[v]=v}),c({},f)[m]!==7||i(c({},p)).join("")!==g})?function(p,m){for(var g=a(p),v=arguments.length,y=1,b=s.f,w=o.f;v>y;)for(var x=l(arguments[y++]),S=b?h(i(x),b(x)):i(x),_=S.length,C=0,E;_>C;)E=S[C++],(!t||r(w,x,E))&&(g[E]=x[E]);return g}:c,__}var Zz;function xke(){if(Zz)return Xz;Zz=1;var t=Le(),e=bke();return t({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),Xz}var E_,e6;function wke(){if(e6)return E_;e6=1,xke();var t=Or();return E_=t.Object.assign,E_}var C_,t6;function Ske(){if(t6)return C_;t6=1;var t=wke();return C_=t,C_}var N_,r6;function _ke(){return r6||(r6=1,N_=Ske()),N_}var Eke=_ke(),Cke=Je(Eke),k_,n6;function Nke(){if(n6)return k_;n6=1,pse();var t=ii();return k_=t("Array","concat"),k_}var T_,i6;function kke(){if(i6)return T_;i6=1;var t=zr(),e=Nke(),r=Array.prototype;return T_=function(n){var i=n.concat;return n===r||t(r,n)&&i===r.concat?e:i},T_}var O_,s6;function Tke(){if(s6)return O_;s6=1;var t=kke();return O_=t,O_}var j_,o6;function Oke(){return o6||(o6=1,j_=Tke()),j_}var jke=Oke(),Pke=Je(jke),a6={},l6;function Ike(){if(l6)return a6;l6=1;var t=Le(),e=br(),r=pm();return t({target:"Object",stat:!0,sham:!e},{create:r}),a6}var P_,c6;function Rke(){if(c6)return P_;c6=1,Ike();var t=Or(),e=t.Object;return P_=function(n,i){return e.create(n,i)},P_}var I_,u6;function Mke(){if(u6)return I_;u6=1;var t=Rke();return I_=t,I_}var R_,d6;function Ake(){return d6||(d6=1,R_=Mke()),R_}var Dke=Ake(),$ke=Je(Dke),h6={},M_,f6;function Fke(){if(f6)return M_;f6=1;var t=gh(),e=fl(),r=Yc(),n=RangeError;return M_=function(s){var o=e(r(this)),a="",l=t(s);if(l<0||l===1/0)throw new n("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(o+=o))l&1&&(a+=o);return a},M_}var A_,p6;function qke(){if(p6)return A_;p6=1;var t=wt(),e=dse(),r=fl(),n=Fke(),i=Yc(),s=t(n),o=t("".slice),a=Math.ceil,l=function(c){return function(u,h,f){var p=r(i(u)),m=e(h),g=p.length,v=f===void 0?" ":r(f),y,b;return m<=g||v===""?p:(y=m-g,b=s(v,a(y/v.length)),b.length>y&&(b=o(b,0,y)),c?p+b:b+p)}};return A_={start:l(!1),end:l(!0)},A_}var D_,m6;function Lke(){if(m6)return D_;m6=1;var t=wt(),e=pt(),r=qke().start,n=RangeError,i=isFinite,s=Math.abs,o=Date.prototype,a=o.toISOString,l=t(o.getTime),c=t(o.getUTCDate),u=t(o.getUTCFullYear),h=t(o.getUTCHours),f=t(o.getUTCMilliseconds),p=t(o.getUTCMinutes),m=t(o.getUTCMonth),g=t(o.getUTCSeconds);return D_=e(function(){return a.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){a.call(new Date(NaN))})?function(){if(!i(l(this)))throw new n("Invalid time value");var y=this,b=u(y),w=f(y),x=b<0?"-":b>9999?"+":"";return x+r(s(b),x?6:4,0)+"-"+r(m(y)+1,2,0)+"-"+r(c(y),2,0)+"T"+r(h(y),2,0)+":"+r(p(y),2,0)+":"+r(g(y),2,0)+"."+r(w,3,0)+"Z"}:a,D_}var g6;function Bke(){if(g6)return h6;g6=1;var t=Le(),e=ni(),r=ys(),n=ose(),i=Lke(),s=Lo(),o=pt(),a=o(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return t({target:"Date",proto:!0,forced:a},{toJSON:function(c){var u=r(this),h=n(u,"number");return typeof h=="number"&&!isFinite(h)?null:!("toISOString"in u)&&s(u)==="Date"?e(i,u):u.toISOString()}}),h6}var $_,y6;function zke(){if(y6)return $_;y6=1,Bke(),bse();var t=Or(),e=Y0();return t.JSON||(t.JSON={stringify:JSON.stringify}),$_=function(n,i,s){return e(t.JSON.stringify,null,arguments)},$_}var F_,v6;function Vke(){if(v6)return F_;v6=1;var t=zke();return F_=t,F_}var q_,b6;function Uke(){return b6||(b6=1,q_=Vke()),q_}var Hke=Uke(),Wke=Je(Hke),x6={},w6={},L_,S6;function Kke(){if(S6)return L_;S6=1;var t=TypeError;return L_=function(e,r){if(e<r)throw new t("Not enough arguments");return e},L_}var B_,_6;function Dse(){if(_6)return B_;_6=1;var t=vr(),e=Y0(),r=Br(),n=Ise(),i=uh(),s=yh(),o=Kke(),a=t.Function,l=/MSIE .\./.test(i)||n==="BUN"&&function(){var c=t.Bun.version.split(".");return c.length<3||c[0]==="0"&&(c[1]<3||c[1]==="3"&&c[2]==="0")}();return B_=function(c,u){var h=u?2:1;return l?function(f,p){var m=o(arguments.length,1)>h,g=r(f)?f:a(f),v=m?s(arguments,h):[],y=m?function(){e(g,this,v)}:g;return u?c(y,p):c(y)}:c},B_}var E6;function Gke(){if(E6)return w6;E6=1;var t=Le(),e=vr(),r=Dse(),n=r(e.setInterval,!0);return t({global:!0,bind:!0,forced:e.setInterval!==n},{setInterval:n}),w6}var C6={},N6;function Yke(){if(N6)return C6;N6=1;var t=Le(),e=vr(),r=Dse(),n=r(e.setTimeout,!0);return t({global:!0,bind:!0,forced:e.setTimeout!==n},{setTimeout:n}),C6}var k6;function Qke(){return k6||(k6=1,Gke(),Yke()),x6}var z_,T6;function Xke(){if(T6)return z_;T6=1,Qke();var t=Or();return z_=t.setTimeout,z_}var V_,O6;function Jke(){return O6||(O6=1,V_=Xke()),V_}var Zke=Jke(),e2e=Je(Zke),U_={exports:{}},j6;function t2e(){return j6||(j6=1,function(t){function e(n){if(n)return r(n);this._callbacks=new Map}function r(n){return Object.assign(n,e.prototype),n._callbacks=new Map,n}e.prototype.on=function(n,i){const s=this._callbacks.get(n)??[];return s.push(i),this._callbacks.set(n,s),this},e.prototype.once=function(n,i){const s=(...o)=>{this.off(n,s),i.apply(this,o)};return s.fn=i,this.on(n,s),this},e.prototype.off=function(n,i){if(n===void 0&&i===void 0)return this._callbacks.clear(),this;if(i===void 0)return this._callbacks.delete(n),this;const s=this._callbacks.get(n);if(s){for(const[o,a]of s.entries())if(a===i||a.fn===i){s.splice(o,1);break}s.length===0?this._callbacks.delete(n):this._callbacks.set(n,s)}return this},e.prototype.emit=function(n,...i){const s=this._callbacks.get(n);if(s){const o=[...s];for(const a of o)a.apply(this,i)}return this},e.prototype.listeners=function(n){return this._callbacks.get(n)??[]},e.prototype.listenerCount=function(n){if(n)return this.listeners(n).length;let i=0;for(const s of this._callbacks.values())i+=s.length;return i},e.prototype.hasListeners=function(n){return this.listenerCount(n)>0},e.prototype.addEventListener=e.prototype.on,e.prototype.removeListener=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,t.exports=e}(U_)),U_.exports}var r2e=t2e(),n2e=Je(r2e);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function fs(){return fs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fs.apply(this,arguments)}function Wi(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Mg(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var zI;typeof Object.assign!="function"?zI=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])}return r}:zI=Object.assign;var Mc=zI,P6=["","webkit","Moz","MS","ms","o"],i2e=typeof document>"u"?{style:{}}:document.createElement("div"),s2e="function",Hu=Math.round,Ac=Math.abs,OA=Date.now;function lb(t,e){for(var r,n,i=e[0].toUpperCase()+e.slice(1),s=0;s<P6.length;){if(r=P6[s],n=r?r+i:e,n in t)return n;s++}}var xo;typeof window>"u"?xo={}:xo=window;var $se=lb(i2e.style,"touchAction"),Fse=$se!==void 0;function o2e(){if(!Fse)return!1;var t={},e=xo.CSS&&xo.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){return t[r]=e?xo.CSS.supports("touch-action",r):!0}),t}var qse="compute",Lse="auto",VI="manipulation",cc="none",Cp="pan-x",Np="pan-y",Ag=o2e(),a2e=/mobile|tablet|ip(ad|hone|od)|android/i,Bse="ontouchstart"in xo,l2e=lb(xo,"PointerEvent")!==void 0,c2e=Bse&&a2e.test(navigator.userAgent),ym="touch",u2e="pen",jA="mouse",d2e="kinect",h2e=25,In=1,Jc=2,fr=4,ti=8,zv=1,vm=2,bm=4,xm=8,Wd=16,qs=vm|bm,uc=xm|Wd,zse=qs|uc,Vse=["x","y"],Vv=["clientX","clientY"];function wo(t,e,r){var n;if(t)if(t.forEach)t.forEach(e,r);else if(t.length!==void 0)for(n=0;n<t.length;)e.call(r,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t)}function cb(t,e){return typeof t===s2e?t.apply(e&&e[0]||void 0,e):t}function zl(t,e){return t.indexOf(e)>-1}function f2e(t){if(zl(t,cc))return cc;var e=zl(t,Cp),r=zl(t,Np);return e&&r?cc:e||r?e?Cp:Np:zl(t,VI)?VI:Lse}var Use=function(){function t(r,n){this.manager=r,this.set(n)}var e=t.prototype;return e.set=function(n){n===qse&&(n=this.compute()),Fse&&this.manager.element.style&&Ag[n]&&(this.manager.element.style[$se]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return wo(this.manager.recognizers,function(i){cb(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),f2e(n.join(" "))},e.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=zl(o,cc)&&!Ag[cc],l=zl(o,Np)&&!Ag[Np],c=zl(o,Cp)&&!Ag[Cp];if(a){var u=n.pointers.length===1,h=n.distance<2,f=n.deltaTime<250;if(u&&h&&f)return}if(!(c&&l)&&(a||l&&s&qs||c&&s&uc))return this.preventSrc(i)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},t}();function PA(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function Hse(t){var e=t.length;if(e===1)return{x:Hu(t[0].clientX),y:Hu(t[0].clientY)};for(var r=0,n=0,i=0;i<e;)r+=t[i].clientX,n+=t[i].clientY,i++;return{x:Hu(r/e),y:Hu(n/e)}}function I6(t){for(var e=[],r=0;r<t.pointers.length;)e[r]={clientX:Hu(t.pointers[r].clientX),clientY:Hu(t.pointers[r].clientY)},r++;return{timeStamp:OA(),pointers:e,center:Hse(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Uv(t,e,r){r||(r=Vse);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.sqrt(n*n+i*i)}function UI(t,e,r){r||(r=Vse);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.atan2(i,n)*180/Math.PI}function Wse(t,e){return t===e?zv:Ac(t)>=Ac(e)?t<0?vm:bm:e<0?xm:Wd}function p2e(t,e){var r=e.center,n=t.offsetDelta||{},i=t.prevDelta||{},s=t.prevInput||{};(e.eventType===In||s.eventType===fr)&&(i=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:r.x,y:r.y}),e.deltaX=i.x+(r.x-n.x),e.deltaY=i.y+(r.y-n.y)}function Kse(t,e,r){return{x:e/t||0,y:r/t||0}}function m2e(t,e){return Uv(e[0],e[1],Vv)/Uv(t[0],t[1],Vv)}function g2e(t,e){return UI(e[1],e[0],Vv)+UI(t[1],t[0],Vv)}function y2e(t,e){var r=t.lastInterval||e,n=e.timeStamp-r.timeStamp,i,s,o,a;if(e.eventType!==ti&&(n>h2e||r.velocity===void 0)){var l=e.deltaX-r.deltaX,c=e.deltaY-r.deltaY,u=Kse(n,l,c);s=u.x,o=u.y,i=Ac(u.x)>Ac(u.y)?u.x:u.y,a=Wse(l,c),t.lastInterval=e}else i=r.velocity,s=r.velocityX,o=r.velocityY,a=r.direction;e.velocity=i,e.velocityX=s,e.velocityY=o,e.direction=a}function v2e(t,e){var r=t.session,n=e.pointers,i=n.length;r.firstInput||(r.firstInput=I6(e)),i>1&&!r.firstMultiple?r.firstMultiple=I6(e):i===1&&(r.firstMultiple=!1);var s=r.firstInput,o=r.firstMultiple,a=o?o.center:s.center,l=e.center=Hse(n);e.timeStamp=OA(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=UI(a,l),e.distance=Uv(a,l),p2e(r,e),e.offsetDirection=Wse(e.deltaX,e.deltaY);var c=Kse(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=Ac(c.x)>Ac(c.y)?c.x:c.y,e.scale=o?m2e(o.pointers,n):1,e.rotation=o?g2e(o.pointers,n):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,y2e(r,e);var u=t.element,h=e.srcEvent,f;h.composedPath?f=h.composedPath()[0]:h.path?f=h.path[0]:f=h.target,PA(f,u)&&(u=f),e.target=u}function b2e(t,e,r){var n=r.pointers.length,i=r.changedPointers.length,s=e&In&&n-i===0,o=e&(fr|ti)&&n-i===0;r.isFirst=!!s,r.isFinal=!!o,s&&(t.session={}),r.eventType=e,v2e(t,r),t.emit("hammer.input",r),t.recognize(r),t.session.prevInput=r}function kp(t){return t.trim().split(/\s+/g)}function Ff(t,e,r){wo(kp(e),function(n){t.addEventListener(n,r,!1)})}function qf(t,e,r){wo(kp(e),function(n){t.removeEventListener(n,r,!1)})}function R6(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var xh=function(){function t(r,n){var i=this;this.manager=r,this.callback=n,this.element=r.element,this.target=r.options.inputTarget,this.domHandler=function(s){cb(r.options.enable,[r])&&i.handler(s)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&Ff(this.element,this.evEl,this.domHandler),this.evTarget&&Ff(this.target,this.evTarget,this.domHandler),this.evWin&&Ff(R6(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&qf(this.element,this.evEl,this.domHandler),this.evTarget&&qf(this.target,this.evTarget,this.domHandler),this.evWin&&qf(R6(this.element),this.evWin,this.domHandler)},t}();function Dc(t,e,r){if(t.indexOf&&!r)return t.indexOf(e);for(var n=0;n<t.length;){if(r&&t[n][r]==e||!r&&t[n]===e)return n;n++}return-1}var x2e={pointerdown:In,pointermove:Jc,pointerup:fr,pointercancel:ti,pointerout:ti},w2e={2:ym,3:u2e,4:jA,5:d2e},Gse="pointerdown",Yse="pointermove pointerup pointercancel";xo.MSPointerEvent&&!xo.PointerEvent&&(Gse="MSPointerDown",Yse="MSPointerMove MSPointerUp MSPointerCancel");var Qse=function(t){Wi(e,t);function e(){var n,i=e.prototype;return i.evEl=Gse,i.evWin=Yse,n=t.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var r=e.prototype;return r.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=x2e[a],c=w2e[i.pointerType]||i.pointerType,u=c===ym,h=Dc(s,i.pointerId,"pointerId");l&In&&(i.button===0||u)?h<0&&(s.push(i),h=s.length-1):l&(fr|ti)&&(o=!0),!(h<0)&&(s[h]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:c,srcEvent:i}),o&&s.splice(h,1))},e}(xh);function Tp(t){return Array.prototype.slice.call(t,0)}function IA(t,e,r){for(var n=[],i=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];Dc(i,o)<0&&n.push(t[s]),i[s]=o,s++}return r&&(e?n=n.sort(function(a,l){return a[e]>l[e]}):n=n.sort()),n}var S2e={touchstart:In,touchmove:Jc,touchend:fr,touchcancel:ti},_2e="touchstart touchmove touchend touchcancel",RA=function(t){Wi(e,t);function e(){var n;return e.prototype.evTarget=_2e,n=t.apply(this,arguments)||this,n.targetIds={},n}var r=e.prototype;return r.handler=function(i){var s=S2e[i.type],o=E2e.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:ym,srcEvent:i})},e}(xh);function E2e(t,e){var r=Tp(t.touches),n=this.targetIds;if(e&(In|Jc)&&r.length===1)return n[r[0].identifier]=!0,[r,r];var i,s,o=Tp(t.changedTouches),a=[],l=this.target;if(s=r.filter(function(c){return PA(c.target,l)}),e===In)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),e&(fr|ti)&&delete n[o[i].identifier],i++;if(a.length)return[IA(s.concat(a),"identifier",!0),a]}var C2e={mousedown:In,mousemove:Jc,mouseup:fr},N2e="mousedown",k2e="mousemove mouseup",MA=function(t){Wi(e,t);function e(){var n,i=e.prototype;return i.evEl=N2e,i.evWin=k2e,n=t.apply(this,arguments)||this,n.pressed=!1,n}var r=e.prototype;return r.handler=function(i){var s=C2e[i.type];s&In&&i.button===0&&(this.pressed=!0),s&Jc&&i.which!==1&&(s=fr),this.pressed&&(s&fr&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:jA,srcEvent:i}))},e}(xh),T2e=2500,M6=25;function A6(t){var e=t.changedPointers,r=e[0];if(r.identifier===this.primaryTouch){var n={x:r.clientX,y:r.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,T2e)}}function O2e(t,e){t&In?(this.primaryTouch=e.changedPointers[0].identifier,A6.call(this,e)):t&(fr|ti)&&A6.call(this,e)}function j2e(t){for(var e=t.srcEvent.clientX,r=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(e-i.x),o=Math.abs(r-i.y);if(s<=M6&&o<=M6)return!0}return!1}var Xse=function(){var t=function(e){Wi(r,e);function r(i,s){var o;return o=e.call(this,i,s)||this,o.handler=function(a,l,c){var u=c.pointerType===ym,h=c.pointerType===jA;if(!(h&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(u)O2e.call(Mg(Mg(o)),l,c);else if(h&&j2e.call(Mg(Mg(o)),c))return;o.callback(a,l,c)}},o.touch=new RA(o.manager,o.handler),o.mouse=new MA(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=r.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},r}(xh);return t}();function P2e(t){var e,r=t.options.inputClass;return r?e=r:l2e?e=Qse:c2e?e=RA:Bse?e=Xse:e=MA,new e(t,b2e)}function Wu(t,e,r){return Array.isArray(t)?(wo(t,r[e],r),!0):!1}var cy=1,Bi=2,Kd=4,Wa=8,So=Wa,Op=16,Is=32,I2e=1;function R2e(){return I2e++}function Dg(t,e){var r=e.manager;return r?r.get(t):t}function D6(t){return t&Op?"cancel":t&Wa?"end":t&Kd?"move":t&Bi?"start":""}var wm=function(){function t(r){r===void 0&&(r={}),this.options=fs({enable:!0},r),this.id=R2e(),this.manager=null,this.state=cy,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(n){return Mc(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(Wu(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=Dg(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return Wu(n,"dropRecognizeWith",this)?this:(n=Dg(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(Wu(n,"requireFailure",this))return this;var i=this.requireFail;return n=Dg(n,this),Dc(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(Wu(n,"dropRequireFailure",this))return this;n=Dg(n,this);var i=Dc(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<Wa&&o(i.options.event+D6(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=Wa&&o(i.options.event+D6(s))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=Is},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(Is|cy)))return!1;n++}return!0},e.recognize=function(n){var i=Mc({},n);if(!cb(this.options.enable,[this,i])){this.reset(),this.state=Is;return}this.state&(So|Op|Is)&&(this.state=cy),this.state=this.process(i),this.state&(Bi|Kd|Wa|Op)&&this.tryEmit(i)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},t}(),HI=function(t){Wi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,fs({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var r=e.prototype;return r.getTouchAction=function(){return[VI]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime<o.time;if(this.reset(),i.eventType&In&&this.count===0)return this.failTimeout();if(l&&c&&a){if(i.eventType!==fr)return this.failTimeout();var u=this.pTime?i.timeStamp-this.pTime<o.interval:!0,h=!this.pCenter||Uv(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!h||!u?this.count=1:this.count+=1,this._input=i;var f=this.count%o.taps;if(f===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=So,s.tryEmit()},o.interval),Bi):So}return Is},r.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=Is},this.options.interval),Is},r.reset=function(){clearTimeout(this._timer)},r.emit=function(){this.state===So&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(wm),Gd=function(t){Wi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,fs({pointers:1},n))||this}var r=e.prototype;return r.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},r.process=function(i){var s=this.state,o=i.eventType,a=s&(Bi|Kd),l=this.attrTest(i);return a&&(o&ti||!l)?s|Op:a||l?o&fr?s|Wa:s&Bi?s|Kd:Bi:Is},e}(wm);function Jse(t){return t===Wd?"down":t===xm?"up":t===vm?"left":t===bm?"right":""}var AA=function(t){Wi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,fs({event:"pan",threshold:10,pointers:1,direction:zse},n))||this,i.pX=null,i.pY=null,i}var r=e.prototype;return r.getTouchAction=function(){var i=this.options.direction,s=[];return i&qs&&s.push(Np),i&uc&&s.push(Cp),s},r.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,c=i.deltaX,u=i.deltaY;return l&s.direction||(s.direction&qs?(l=c===0?zv:c<0?vm:bm,o=c!==this.pX,a=Math.abs(i.deltaX)):(l=u===0?zv:u<0?xm:Wd,o=u!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},r.attrTest=function(i){return Gd.prototype.attrTest.call(this,i)&&(this.state&Bi||!(this.state&Bi)&&this.directionTest(i))},r.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=Jse(i.direction);s&&(i.additionalEvent=this.options.event+s),t.prototype.emit.call(this,i)},e}(Gd),Zse=function(t){Wi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,fs({event:"swipe",threshold:10,velocity:.3,direction:qs|uc,pointers:1},n))||this}var r=e.prototype;return r.getTouchAction=function(){return AA.prototype.getTouchAction.call(this)},r.attrTest=function(i){var s=this.options.direction,o;return s&(qs|uc)?o=i.overallVelocity:s&qs?o=i.overallVelocityX:s&uc&&(o=i.overallVelocityY),t.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&Ac(o)>this.options.velocity&&i.eventType&fr},r.emit=function(i){var s=Jse(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},e}(Gd),eoe=function(t){Wi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,fs({event:"pinch",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[cc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&Bi)},r.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}t.prototype.emit.call(this,i)},e}(Gd),toe=function(t){Wi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,fs({event:"rotate",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[cc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&Bi)},e}(Gd),roe=function(t){Wi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,fs({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var r=e.prototype;return r.getTouchAction=function(){return[Lse]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(fr|ti)&&!c)this.reset();else if(i.eventType&In)this.reset(),this._timer=setTimeout(function(){s.state=So,s.tryEmit()},o.time);else if(i.eventType&fr)return So;return Is},r.reset=function(){clearTimeout(this._timer)},r.emit=function(i){this.state===So&&(i&&i.eventType&fr?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=OA(),this.manager.emit(this.options.event,this._input)))},e}(wm),noe={domEvents:!1,touchAction:qse,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},$6=[[toe,{enable:!1}],[eoe,{enable:!1},["rotate"]],[Zse,{direction:qs}],[AA,{direction:qs},["swipe"]],[HI],[HI,{event:"doubletap",taps:2},["tap"]],[roe]],M2e=1,F6=2;function q6(t,e){var r=t.element;if(r.style){var n;wo(t.options.cssProps,function(i,s){n=lb(r.style,s),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function A2e(t,e){var r=document.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}var L6=function(){function t(r,n){var i=this;this.options=Mc({},noe,n||{}),this.options.inputTarget=this.options.inputTarget||r,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=r,this.input=P2e(this),this.touchAction=new Use(this,this.options.touchAction),q6(this,!0),wo(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var e=t.prototype;return e.set=function(n){return Mc(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?F6:M2e},e.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&So)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==F6&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(Bi|Kd|Wa)&&(i.curRecognizer=s,a=s),l++}},e.get=function(n){if(n instanceof wm)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},e.add=function(n){if(Wu(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(Wu(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=Dc(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},e.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return wo(kp(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},e.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return wo(kp(n),function(o){i?s[o]&&s[o].splice(Dc(s[o],i),1):delete s[o]}),this},e.emit=function(n,i){this.options.domEvents&&A2e(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},e.destroy=function(){this.element&&q6(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),D2e={touchstart:In,touchmove:Jc,touchend:fr,touchcancel:ti},$2e="touchstart",F2e="touchstart touchmove touchend touchcancel",q2e=function(t){Wi(e,t);function e(){var n,i=e.prototype;return i.evTarget=$2e,i.evWin=F2e,n=t.apply(this,arguments)||this,n.started=!1,n}var r=e.prototype;return r.handler=function(i){var s=D2e[i.type];if(s===In&&(this.started=!0),!!this.started){var o=L2e.call(this,i,s);s&(fr|ti)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:ym,srcEvent:i})}},e}(xh);function L2e(t,e){var r=Tp(t.touches),n=Tp(t.changedTouches);return e&(fr|ti)&&(r=IA(r.concat(n),"identifier",!0)),[r,n]}function ioe(t,e,r){var n="DEPRECATED METHOD: "+e+`
`+r+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),t.apply(this,arguments)}}var soe=ioe(function(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;)(!r||r&&t[n[i]]===void 0)&&(t[n[i]]=e[n[i]]),i++;return t},"extend","Use `assign`."),B2e=ioe(function(t,e){return soe(t,e,!0)},"merge","Use `assign`.");function z2e(t,e,r){var n=e.prototype,i;i=t.prototype=Object.create(n),i.constructor=t,i._super=n,r&&Mc(i,r)}function B6(t,e){return function(){return t.apply(e,arguments)}}var V2e=function(){var t=function(r,n){return n===void 0&&(n={}),new L6(r,fs({recognizers:$6.concat()},n))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=zse,t.DIRECTION_DOWN=Wd,t.DIRECTION_LEFT=vm,t.DIRECTION_RIGHT=bm,t.DIRECTION_UP=xm,t.DIRECTION_HORIZONTAL=qs,t.DIRECTION_VERTICAL=uc,t.DIRECTION_NONE=zv,t.DIRECTION_DOWN=Wd,t.INPUT_START=In,t.INPUT_MOVE=Jc,t.INPUT_END=fr,t.INPUT_CANCEL=ti,t.STATE_POSSIBLE=cy,t.STATE_BEGAN=Bi,t.STATE_CHANGED=Kd,t.STATE_ENDED=Wa,t.STATE_RECOGNIZED=So,t.STATE_CANCELLED=Op,t.STATE_FAILED=Is,t.Manager=L6,t.Input=xh,t.TouchAction=Use,t.TouchInput=RA,t.MouseInput=MA,t.PointerEventInput=Qse,t.TouchMouseInput=Xse,t.SingleTouchInput=q2e,t.Recognizer=wm,t.AttrRecognizer=Gd,t.Tap=HI,t.Pan=AA,t.Swipe=Zse,t.Pinch=eoe,t.Rotate=toe,t.Press=roe,t.on=Ff,t.off=qf,t.each=wo,t.merge=B2e,t.extend=soe,t.bindFn=B6,t.assign=Mc,t.inherit=z2e,t.bindFn=B6,t.prefixed=lb,t.toArray=Tp,t.inArray=Dc,t.uniqueArray=IA,t.splitStr=kp,t.boolOrFn=cb,t.hasParent=PA,t.addEventListeners=Ff,t.removeEventListeners=qf,t.defaults=Mc({},noe,{preset:$6}),t}();const ooe=TNe("DELETE");function U2e(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return aoe({},t,...r)}function aoe(){const t=Hv(...arguments);return coe(t),t}function Hv(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(e.length<2)return e[0];if(e.length>2)return Hv(aoe(e[0],e[1]),...ANe(e).call(e,2));const n=e[0],i=e[1];if(n instanceof Date&&i instanceof Date)return n.setTime(i.getTime()),n;for(const s of BNe(i))Object.prototype.propertyIsEnumerable.call(i,s)&&(i[s]===ooe?delete n[s]:n[s]!==null&&i[s]!==null&&typeof n[s]=="object"&&typeof i[s]=="object"&&!Ns(n[s])&&!Ns(i[s])?n[s]=Hv(n[s],i[s]):n[s]=loe(i[s]));return n}function loe(t){return Ns(t)?is(t).call(t,e=>loe(e)):typeof t=="object"&&t!==null?t instanceof Date?new Date(t.getTime()):Hv({},t):t}function coe(t){for(const e of TA(t))t[e]===ooe?delete t[e]:typeof t[e]=="object"&&t[e]!==null&&coe(t[e])}function H2e(){const t=()=>{};return{on:t,off:t,destroy:t,emit:t,get(){return{set:t}}}}const W2e=typeof window<"u"?window.Hammer||V2e:function(){return H2e()};function po(t){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const r=W2e(this._dom.overlay);r.on("tap",Pse(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{r.destroy()});const n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Rc(n).call(n,i=>{r.on(i,s=>{s.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=i=>{K2e(i.target,t)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=i=>{("key"in i?i.key==="Escape":i.keyCode===27)&&this.deactivate()}}n2e(po.prototype);po.current=null;po.prototype.destroy=function(){this.deactivate();for(const r of dke(t=Ase(e=this._cleanupQueue).call(e,0)).call(t)){var t,e;r()}};po.prototype.activate=function(){po.current&&po.current.deactivate(),po.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};po.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};po.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};function K2e(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}var H_,z6;function G2e(){if(z6)return H_;z6=1,xse();var t=Or();return H_=t.Object.getOwnPropertySymbols,H_}var W_,V6;function Y2e(){if(V6)return W_;V6=1;var t=G2e();return W_=t,W_}var K_,U6;function Q2e(){return U6||(U6=1,K_=Y2e()),K_}var X2e=Q2e(),H6=Je(X2e),G_={exports:{}},W6={},K6;function J2e(){if(K6)return W6;K6=1;var t=Le(),e=pt(),r=Vs(),n=J0().f,i=br(),s=!i||e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getOwnPropertyDescriptor:function(a,l){return n(r(a),l)}}),W6}var G6;function Z2e(){if(G6)return G_.exports;G6=1,J2e();var t=Or(),e=t.Object,r=G_.exports=function(i,s){return e.getOwnPropertyDescriptor(i,s)};return e.getOwnPropertyDescriptor.sham&&(r.sham=!0),G_.exports}var Y_,Y6;function eTe(){if(Y6)return Y_;Y6=1;var t=Z2e();return Y_=t,Y_}var Q_,Q6;function tTe(){return Q6||(Q6=1,Q_=eTe()),Q_}var rTe=tTe(),uoe=Je(rTe),X6={},J6;function nTe(){if(J6)return X6;J6=1;var t=Le(),e=br(),r=Rse(),n=Vs(),i=J0(),s=eb();return t({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(a){for(var l=n(a),c=i.f,u=r(l),h={},f=0,p,m;u.length>f;)m=c(l,p=u[f++]),m!==void 0&&s(h,p,m);return h}}),X6}var X_,Z6;function iTe(){if(Z6)return X_;Z6=1,nTe();var t=Or();return X_=t.Object.getOwnPropertyDescriptors,X_}var J_,e8;function sTe(){if(e8)return J_;e8=1;var t=iTe();return J_=t,J_}var Z_,t8;function oTe(){return t8||(t8=1,Z_=sTe()),Z_}var aTe=oTe(),r8=Je(aTe),eE={exports:{}},n8={},i8;function lTe(){if(i8)return n8;i8=1;var t=Le(),e=br(),r=EA().f;return t({target:"Object",stat:!0,forced:Object.defineProperties!==r,sham:!e},{defineProperties:r}),n8}var s8;function cTe(){if(s8)return eE.exports;s8=1,lTe();var t=Or(),e=t.Object,r=eE.exports=function(i,s){return e.defineProperties(i,s)};return e.defineProperties.sham&&(r.sham=!0),eE.exports}var tE,o8;function uTe(){if(o8)return tE;o8=1;var t=cTe();return tE=t,tE}var rE,a8;function dTe(){return a8||(a8=1,rE=uTe()),rE}var hTe=dTe(),fTe=Je(hTe),nE,l8;function pTe(){return l8||(l8=1,nE=use()),nE}var mTe=pTe(),gTe=Je(mTe),c8={},u8={},iE={exports:{}},sE,d8;function yTe(){if(d8)return sE;d8=1;var t=pt();return sE=t(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),sE}var oE,h8;function vTe(){if(h8)return oE;h8=1;var t=pt(),e=Dn(),r=Lo(),n=yTe(),i=Object.isExtensible,s=t(function(){});return oE=s||n?function(a){return!e(a)||n&&r(a)==="ArrayBuffer"?!1:i?i(a):!0}:i,oE}var aE,f8;function bTe(){if(f8)return aE;f8=1;var t=pt();return aE=!t(function(){return Object.isExtensible(Object.preventExtensions({}))}),aE}var p8;function doe(){if(p8)return iE.exports;p8=1;var t=Le(),e=wt(),r=fm(),n=Dn(),i=Vr(),s=Hi().f,o=nb(),a=gse(),l=vTe(),c=X0(),u=bTe(),h=!1,f=c("meta"),p=0,m=function(x){s(x,f,{value:{objectID:"O"+p++,weakData:{}}})},g=function(x,S){if(!n(x))return typeof x=="symbol"?x:(typeof x=="string"?"S":"P")+x;if(!i(x,f)){if(!l(x))return"F";if(!S)return"E";m(x)}return x[f].objectID},v=function(x,S){if(!i(x,f)){if(!l(x))return!0;if(!S)return!1;m(x)}return x[f].weakData},y=function(x){return u&&h&&l(x)&&!i(x,f)&&m(x),x},b=function(){w.enable=function(){},h=!0;var x=o.f,S=e([].splice),_={};_[f]=1,x(_).length&&(o.f=function(C){for(var E=x(C),N=0,T=E.length;N<T;N++)if(E[N]===f){S(E,N,1);break}return E},t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:a.f}))},w=iE.exports={enable:b,fastKey:g,getWeakData:v,onFreeze:y};return r[f]=!0,iE.exports}var lE,m8;function xTe(){if(m8)return lE;m8=1;var t=Ur(),e=bh(),r=t("iterator"),n=Array.prototype;return lE=function(i){return i!==void 0&&(e.Array===i||n[r]===i)},lE}var cE,g8;function hoe(){if(g8)return cE;g8=1;var t=hl(),e=yA(),r=cm(),n=bh(),i=Ur(),s=i("iterator");return cE=function(o){if(!r(o))return e(o,s)||e(o,"@@iterator")||n[t(o)]},cE}var uE,y8;function foe(){if(y8)return uE;y8=1;var t=ni(),e=Bo(),r=zo(),n=hh(),i=hoe(),s=TypeError;return uE=function(o,a){var l=arguments.length<2?i(o):a;if(e(l))return r(t(l,o));throw new s(n(o)+" is not iterable")},uE}var dE,v8;function DA(){if(v8)return dE;v8=1;var t=ni(),e=zo(),r=yA();return dE=function(n,i,s){var o,a;e(n);try{if(o=r(n,"return"),!o){if(i==="throw")throw s;return s}o=t(o,n)}catch(l){a=!0,o=l}if(i==="throw")throw s;if(a)throw o;return e(o),s},dE}var hE,b8;function $A(){if(b8)return hE;b8=1;var t=Z0(),e=ni(),r=zo(),n=hh(),i=xTe(),s=dl(),o=zr(),a=foe(),l=hoe(),c=DA(),u=TypeError,h=function(p,m){this.stopped=p,this.result=m},f=h.prototype;return hE=function(p,m,g){var v=g&&g.that,y=!!(g&&g.AS_ENTRIES),b=!!(g&&g.IS_RECORD),w=!!(g&&g.IS_ITERATOR),x=!!(g&&g.INTERRUPTED),S=t(m,v),_,C,E,N,T,j,P,O=function(z){return _&&c(_,"normal"),new h(!0,z)},D=function(z){return y?(r(z),x?S(z[0],z[1],O):S(z[0],z[1])):x?S(z,O):S(z)};if(b)_=p.iterator;else if(w)_=p;else{if(C=l(p),!C)throw new u(n(p)+" is not iterable");if(i(C)){for(E=0,N=s(p);N>E;E++)if(T=D(p[E]),T&&o(f,T))return T;return new h(!1)}_=a(p,C)}for(j=b?p.next:_.next;!(P=e(j,_)).done;){try{T=D(P.value)}catch(z){c(_,"throw",z)}if(typeof T=="object"&&T&&o(f,T))return T}return new h(!1)},hE}var fE,x8;function poe(){if(x8)return fE;x8=1;var t=zr(),e=TypeError;return fE=function(r,n){if(t(n,r))return r;throw new e("Incorrect invocation")},fE}var pE,w8;function moe(){if(w8)return pE;w8=1;var t=Le(),e=vr(),r=doe(),n=pt(),i=mh(),s=$A(),o=poe(),a=Br(),l=Dn(),c=cm(),u=Xc(),h=Hi().f,f=vh().forEach,p=br(),m=gm(),g=m.set,v=m.getterFor;return pE=function(y,b,w){var x=y.indexOf("Map")!==-1,S=y.indexOf("Weak")!==-1,_=x?"set":"add",C=e[y],E=C&&C.prototype,N={},T;if(!p||!a(C)||!(S||E.forEach&&!n(function(){new C().entries().next()})))T=w.getConstructor(b,y,x,_),r.enable();else{T=b(function(O,D){g(o(O,j),{type:y,collection:new C}),c(D)||s(D,O[_],{that:O,AS_ENTRIES:x})});var j=T.prototype,P=v(y);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(O){var D=O==="add"||O==="set";O in E&&!(S&&O==="clear")&&i(j,O,function(z,R){var B=P(this).collection;if(!D&&S&&!l(z))return O==="get"?void 0:!1;var q=B[O](z===0?0:z,R);return D?this:q})}),S||h(j,"size",{configurable:!0,get:function(){return P(this).collection.size}})}return u(T,y,!1,!0),N[y]=T,t({global:!0,forced:!0},N),S||w.setStrong(T,y,x),T},pE}var mE,S8;function wTe(){if(S8)return mE;S8=1;var t=mm();return mE=function(e,r,n){for(var i in r)n&&n.unsafe&&e[i]?e[i]=r[i]:t(e,i,r[i],n);return e},mE}var gE,_8;function STe(){if(_8)return gE;_8=1;var t=xi(),e=CA(),r=Ur(),n=br(),i=r("species");return gE=function(s){var o=t(s);n&&o&&!o[i]&&e(o,i,{configurable:!0,get:function(){return this}})},gE}var yE,E8;function goe(){if(E8)return yE;E8=1;var t=pm(),e=CA(),r=wTe(),n=Z0(),i=poe(),s=cm(),o=$A(),a=NA(),l=kA(),c=STe(),u=br(),h=doe().fastKey,f=gm(),p=f.set,m=f.getterFor;return yE={getConstructor:function(g,v,y,b){var w=g(function(E,N){i(E,x),p(E,{type:v,index:t(null),first:null,last:null,size:0}),u||(E.size=0),s(N)||o(N,E[b],{that:E,AS_ENTRIES:y})}),x=w.prototype,S=m(v),_=function(E,N,T){var j=S(E),P=C(E,N),O,D;return P?P.value=T:(j.last=P={index:D=h(N,!0),key:N,value:T,previous:O=j.last,next:null,removed:!1},j.first||(j.first=P),O&&(O.next=P),u?j.size++:E.size++,D!=="F"&&(j.index[D]=P)),E},C=function(E,N){var T=S(E),j=h(N),P;if(j!=="F")return T.index[j];for(P=T.first;P;P=P.next)if(P.key===N)return P};return r(x,{clear:function(){for(var N=this,T=S(N),j=T.first;j;)j.removed=!0,j.previous&&(j.previous=j.previous.next=null),j=j.next;T.first=T.last=null,T.index=t(null),u?T.size=0:N.size=0},delete:function(E){var N=this,T=S(N),j=C(N,E);if(j){var P=j.next,O=j.previous;delete T.index[j.index],j.removed=!0,O&&(O.next=P),P&&(P.previous=O),T.first===j&&(T.first=P),T.last===j&&(T.last=O),u?T.size--:N.size--}return!!j},forEach:function(N){for(var T=S(this),j=n(N,arguments.length>1?arguments[1]:void 0),P;P=P?P.next:T.first;)for(j(P.value,P.key,this);P&&P.removed;)P=P.previous},has:function(N){return!!C(this,N)}}),r(x,y?{get:function(N){var T=C(this,N);return T&&T.value},set:function(N,T){return _(this,N===0?0:N,T)}}:{add:function(N){return _(this,N=N===0?0:N,N)}}),u&&e(x,"size",{configurable:!0,get:function(){return S(this).size}}),w},setStrong:function(g,v,y){var b=v+" Iterator",w=m(v),x=m(b);a(g,v,function(S,_){p(this,{type:b,target:S,state:w(S),kind:_,last:null})},function(){for(var S=x(this),_=S.kind,C=S.last;C&&C.removed;)C=C.previous;return!S.target||!(S.last=C=C?C.next:S.state.first)?(S.target=null,l(void 0,!0)):l(_==="keys"?C.key:_==="values"?C.value:[C.key,C.value],!1)},y?"entries":"values",!y,!0),c(v)}},yE}var C8;function _Te(){if(C8)return u8;C8=1;var t=moe(),e=goe();return t("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),u8}var N8;function ETe(){return N8||(N8=1,_Te()),c8}var k8={},vE,T8;function yoe(){return T8||(T8=1,vE=function(t,e){return e===1?function(r,n){return r[t](n)}:function(r,n,i){return r[t](n,i)}}),vE}var bE,O8;function CTe(){if(O8)return bE;O8=1;var t=xi(),e=yoe(),r=t("Map");return bE={Map:r,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:r.prototype},bE}var j8;function NTe(){if(j8)return k8;j8=1;var t=Le(),e=wt(),r=Bo(),n=Yc(),i=$A(),s=CTe(),o=fh(),a=pt(),l=s.Map,c=s.has,u=s.get,h=s.set,f=e([].push),p=o||a(function(){return l.groupBy("ab",function(m){return m}).get("a").length!==1});return t({target:"Map",stat:!0,forced:o||p},{groupBy:function(g,v){n(g),r(v);var y=new l,b=0;return i(g,function(w){var x=v(w,b++);c(y,x)?f(u(y,x),w):h(y,x,[w])}),y}}),k8}var xE,P8;function kTe(){if(P8)return xE;P8=1,pl(),ETe(),NTe(),ob();var t=Or();return xE=t.Map,xE}var wE,I8;function TTe(){if(I8)return wE;I8=1;var t=kTe();return ml(),wE=t,wE}var SE,R8;function OTe(){return R8||(R8=1,SE=TTe()),SE}var jTe=OTe(),voe=Je(jTe),M8={},A8;function PTe(){if(A8)return M8;A8=1;var t=Le(),e=vh().some,r=ab(),n=r("some");return t({target:"Array",proto:!0,forced:!n},{some:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),M8}var _E,D8;function ITe(){if(D8)return _E;D8=1,PTe();var t=ii();return _E=t("Array","some"),_E}var EE,$8;function RTe(){if($8)return EE;$8=1;var t=zr(),e=ITe(),r=Array.prototype;return EE=function(n){var i=n.some;return n===r||t(r,n)&&i===r.some?e:i},EE}var CE,F8;function MTe(){if(F8)return CE;F8=1;var t=RTe();return CE=t,CE}var NE,q8;function ATe(){return q8||(q8=1,NE=MTe()),NE}var DTe=ATe(),$Te=Je(DTe),kE,L8;function FTe(){if(L8)return kE;L8=1,pl();var t=ii();return kE=t("Array","keys"),kE}var TE,B8;function qTe(){if(B8)return TE;B8=1;var t=FTe();return TE=t,TE}var OE,z8;function LTe(){if(z8)return OE;z8=1,ml();var t=hl(),e=Vr(),r=zr(),n=qTe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return OE=function(o){var a=o.keys;return o===i||r(i,o)&&a===i.keys||e(s,t(o))?n:a},OE}var jE,V8;function BTe(){return V8||(V8=1,jE=LTe()),jE}var zTe=BTe(),Su=Je(zTe),U8={},PE,H8;function VTe(){if(H8)return PE;H8=1;var t=yh(),e=Math.floor,r=function(n,i){var s=n.length;if(s<8)for(var o=1,a,l;o<s;){for(l=o,a=n[o];l&&i(n[l-1],a)>0;)n[l]=n[--l];l!==o++&&(n[l]=a)}else for(var c=e(s/2),u=r(t(n,0,c),i),h=r(t(n,c),i),f=u.length,p=h.length,m=0,g=0;m<f||g<p;)n[m+g]=m<f&&g<p?i(u[m],h[g])<=0?u[m++]:h[g++]:m<f?u[m++]:h[g++];return n};return PE=r,PE}var IE,W8;function UTe(){if(W8)return IE;W8=1;var t=uh(),e=t.match(/firefox\/(\d+)/i);return IE=!!e&&+e[1],IE}var RE,K8;function HTe(){if(K8)return RE;K8=1;var t=uh();return RE=/MSIE|Trident/.test(t),RE}var ME,G8;function WTe(){if(G8)return ME;G8=1;var t=uh(),e=t.match(/AppleWebKit\/(\d+)\./);return ME=!!e&&+e[1],ME}var Y8;function KTe(){if(Y8)return U8;Y8=1;var t=Le(),e=wt(),r=Bo(),n=ys(),i=dl(),s=Mse(),o=fl(),a=pt(),l=VTe(),c=ab(),u=UTe(),h=HTe(),f=um(),p=WTe(),m=[],g=e(m.sort),v=e(m.push),y=a(function(){m.sort(void 0)}),b=a(function(){m.sort(null)}),w=c("sort"),x=!a(function(){if(f)return f<70;if(!(u&&u>3)){if(h)return!0;if(p)return p<603;var C="",E,N,T,j;for(E=65;E<76;E++){switch(N=String.fromCharCode(E),E){case 66:case 69:case 70:case 72:T=3;break;case 68:case 71:T=4;break;default:T=2}for(j=0;j<47;j++)m.push({k:N+j,v:T})}for(m.sort(function(P,O){return O.v-P.v}),j=0;j<m.length;j++)N=m[j].k.charAt(0),C.charAt(C.length-1)!==N&&(C+=N);return C!=="DGBEFHACIJK"}}),S=y||!b||!w||!x,_=function(C){return function(E,N){return N===void 0?-1:E===void 0?1:C!==void 0?+C(E,N)||0:o(E)>o(N)?1:-1}};return t({target:"Array",proto:!0,forced:S},{sort:function(E){E!==void 0&&r(E);var N=n(this);if(x)return E===void 0?g(N):g(N,E);var T=[],j=i(N),P,O;for(O=0;O<j;O++)O in N&&v(T,N[O]);for(l(T,_(E)),P=i(T),O=0;O<P;)N[O]=T[O++];for(;O<j;)s(N,O++);return N}}),U8}var AE,Q8;function GTe(){if(Q8)return AE;Q8=1,KTe();var t=ii();return AE=t("Array","sort"),AE}var DE,X8;function YTe(){if(X8)return DE;X8=1;var t=zr(),e=GTe(),r=Array.prototype;return DE=function(n){var i=n.sort;return n===r||t(r,n)&&i===r.sort?e:i},DE}var $E,J8;function QTe(){if(J8)return $E;J8=1;var t=YTe();return $E=t,$E}var FE,Z8;function XTe(){return Z8||(Z8=1,FE=QTe()),FE}var JTe=XTe(),WI=Je(JTe),qE,eV;function ZTe(){if(eV)return qE;eV=1,pl();var t=ii();return qE=t("Array","values"),qE}var LE,tV;function eOe(){if(tV)return LE;tV=1;var t=ZTe();return LE=t,LE}var BE,rV;function tOe(){if(rV)return BE;rV=1,ml();var t=hl(),e=Vr(),r=zr(),n=eOe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return BE=function(o){var a=o.values;return o===i||r(i,o)&&a===i.values||e(s,t(o))?n:a},BE}var zE,nV;function rOe(){return nV||(nV=1,zE=tOe()),zE}var nOe=rOe(),iV=Je(nOe),VE,sV;function iOe(){return sV||(sV=1,VE=jse()),VE}var sOe=iOe(),Ku=Je(sOe),UE,oV;function oOe(){if(oV)return UE;oV=1,pl();var t=ii();return UE=t("Array","entries"),UE}var HE,aV;function aOe(){if(aV)return HE;aV=1;var t=oOe();return HE=t,HE}var WE,lV;function lOe(){if(lV)return WE;lV=1,ml();var t=hl(),e=Vr(),r=zr(),n=aOe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return WE=function(o){var a=o.entries;return o===i||r(i,o)&&a===i.entries||e(s,t(o))?n:a},WE}var KE,cV;function cOe(){return cV||(cV=1,KE=lOe()),KE}var uOe=cOe(),dOe=Je(uOe);const Gr=[];for(let t=0;t<256;++t)Gr.push((t+256).toString(16).slice(1));function hOe(t,e=0){return(Gr[t[e+0]]+Gr[t[e+1]]+Gr[t[e+2]]+Gr[t[e+3]]+"-"+Gr[t[e+4]]+Gr[t[e+5]]+"-"+Gr[t[e+6]]+Gr[t[e+7]]+"-"+Gr[t[e+8]]+Gr[t[e+9]]+"-"+Gr[t[e+10]]+Gr[t[e+11]]+Gr[t[e+12]]+Gr[t[e+13]]+Gr[t[e+14]]+Gr[t[e+15]]).toLowerCase()}let GE;const fOe=new Uint8Array(16);function pOe(){if(!GE){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");GE=crypto.getRandomValues.bind(crypto)}return GE(fOe)}const mOe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var uV={randomUUID:mOe};function gOe(t,e,r){var i;t=t||{};const n=t.random??((i=t.rng)==null?void 0:i.call(t))??pOe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,hOe(n)}function yOe(t,e,r){return uV.randomUUID&&!t?uV.randomUUID():gOe(t)}function dV(t){return typeof t=="string"||typeof t=="number"}class FA{constructor(e){Ha(this,"_queue",[]),Ha(this,"_timeout",null),Ha(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(e)}setOptions(e){e&&typeof e.delay<"u"&&(this.delay=e.delay),e&&typeof e.max<"u"&&(this.max=e.max),this._flushIfNeeded()}static extend(e,r){const n=new FA(r);if(e.flush!==void 0)throw new Error("Target object already has a property flush");e.flush=()=>{n.flush()};const i=[{name:"flush",original:void 0}];if(r&&r.replace)for(let s=0;s<r.replace.length;s++){const o=r.replace[s];i.push({name:o,original:e[o]}),n.replace(e,o)}return n._extended={object:e,methods:i},n}destroy(){if(this.flush(),this._extended){const e=this._extended.object,r=this._extended.methods;for(let n=0;n<r.length;n++){const i=r[n];i.original?e[i.name]=i.original:delete e[i.name]}this._extended=null}}replace(e,r){const n=this,i=e[r];if(!i)throw new Error("Method "+r+" undefined");e[r]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];n.queue({args:o,fn:i,context:this})}}queue(e){typeof e=="function"?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()}_flushIfNeeded(){this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=e2e(()=>{this.flush()},this.delay))}flush(){var e,r;Rc(e=Ase(r=this._queue).call(r,0)).call(e,n=>{n.fn.apply(n.context||n.fn,n.args||[])})}}class Wv{constructor(){Ha(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),Ha(this,"subscribe",Wv.prototype.on),Ha(this,"unsubscribe",Wv.prototype.off)}_trigger(e,r,n){var i;if(e==="*")throw new Error("Cannot trigger event *");Rc(i=[...this._subscribers[e],...this._subscribers["*"]]).call(i,s=>{s(e,r,n??null)})}on(e,r){typeof r=="function"&&this._subscribers[e].push(r)}off(e,r){var n;this._subscribers[e]=Uu(n=this._subscribers[e]).call(n,i=>i!==r)}}var hV={},fV={},pV;function vOe(){if(pV)return fV;pV=1;var t=moe(),e=goe();return t("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),fV}var mV;function bOe(){return mV||(mV=1,vOe()),hV}var gV={},YE,yV;function Zc(){if(yV)return YE;yV=1;var t=hh(),e=TypeError;return YE=function(r){if(typeof r=="object"&&"size"in r&&"has"in r&&"add"in r&&"delete"in r&&"keys"in r)return r;throw new e(t(r)+" is not a set")},YE}var QE,vV;function eu(){if(vV)return QE;vV=1;var t=xi(),e=yoe(),r=t("Set"),n=r.prototype;return QE={Set:r,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:n},QE}var XE,bV;function tu(){if(bV)return XE;bV=1;var t=ni();return XE=function(e,r,n){for(var i=n?e:e.iterator,s=e.next,o,a;!(o=t(s,i)).done;)if(a=r(o.value),a!==void 0)return a},XE}var JE,xV;function Sm(){if(xV)return JE;xV=1;var t=tu();return JE=function(e,r,n){return n?t(e.keys(),r,!0):e.forEach(r)},JE}var ZE,wV;function qA(){if(wV)return ZE;wV=1;var t=eu(),e=Sm(),r=t.Set,n=t.add;return ZE=function(i){var s=new r;return e(i,function(o){n(s,o)}),s},ZE}var eC,SV;function _m(){return SV||(SV=1,eC=function(t){return t.size}),eC}var tC,_V;function xOe(){return _V||(_V=1,tC=function(t){return{iterator:t,next:t.next,done:!1}}),tC}var rC,EV;function ru(){if(EV)return rC;EV=1;var t=Bo(),e=zo(),r=ni(),n=gh(),i=xOe(),s="Invalid size",o=RangeError,a=TypeError,l=Math.max,c=function(u,h){this.set=u,this.size=l(h,0),this.has=t(u.has),this.keys=t(u.keys)};return c.prototype={getIterator:function(){return i(e(r(this.keys,this.set)))},includes:function(u){return r(this.has,this.set,u)}},rC=function(u){e(u);var h=+u.size;if(h!==h)throw new a(s);var f=n(h);if(f<0)throw new o(s);return new c(u,f)},rC}var nC,CV;function wOe(){if(CV)return nC;CV=1;var t=Zc(),e=eu(),r=qA(),n=_m(),i=ru(),s=Sm(),o=tu(),a=e.has,l=e.remove;return nC=function(u){var h=t(this),f=i(u),p=r(h);return n(h)<=f.size?s(h,function(m){f.includes(m)&&l(p,m)}):o(f.getIterator(),function(m){a(p,m)&&l(p,m)}),p},nC}var iC,NV;function nu(){return NV||(NV=1,iC=function(){return!1}),iC}var kV;function SOe(){if(kV)return gV;kV=1;var t=Le(),e=wOe(),r=pt(),n=nu(),i=!n("difference",function(o){return o.size===0}),s=i||r(function(){var o={size:1,has:function(){return!0},keys:function(){var l=0;return{next:function(){var c=l++>1;return a.has(1)&&a.clear(),{done:c,value:2}}}}},a=new Set([1,2,3,4]);return a.difference(o).size!==3});return t({target:"Set",proto:!0,real:!0,forced:s},{difference:e}),gV}var TV={},sC,OV;function _Oe(){if(OV)return sC;OV=1;var t=Zc(),e=eu(),r=_m(),n=ru(),i=Sm(),s=tu(),o=e.Set,a=e.add,l=e.has;return sC=function(u){var h=t(this),f=n(u),p=new o;return r(h)>f.size?s(f.getIterator(),function(m){l(h,m)&&a(p,m)}):i(h,function(m){f.includes(m)&&a(p,m)}),p},sC}var jV;function EOe(){if(jV)return TV;jV=1;var t=Le(),e=pt(),r=_Oe(),n=nu(),i=!n("intersection",function(s){return s.size===2&&s.has(1)&&s.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return t({target:"Set",proto:!0,real:!0,forced:i},{intersection:r}),TV}var PV={},oC,IV;function COe(){if(IV)return oC;IV=1;var t=Zc(),e=eu().has,r=_m(),n=ru(),i=Sm(),s=tu(),o=DA();return oC=function(l){var c=t(this),u=n(l);if(r(c)<=u.size)return i(c,function(f){if(u.includes(f))return!1},!0)!==!1;var h=u.getIterator();return s(h,function(f){if(e(c,f))return o(h,"normal",!1)})!==!1},oC}var RV;function NOe(){if(RV)return PV;RV=1;var t=Le(),e=COe(),r=nu(),n=!r("isDisjointFrom",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:e}),PV}var MV={},aC,AV;function kOe(){if(AV)return aC;AV=1;var t=Zc(),e=_m(),r=Sm(),n=ru();return aC=function(s){var o=t(this),a=n(s);return e(o)>a.size?!1:r(o,function(l){if(!a.includes(l))return!1},!0)!==!1},aC}var DV;function TOe(){if(DV)return MV;DV=1;var t=Le(),e=kOe(),r=nu(),n=!r("isSubsetOf",function(i){return i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:e}),MV}var $V={},lC,FV;function OOe(){if(FV)return lC;FV=1;var t=Zc(),e=eu().has,r=_m(),n=ru(),i=tu(),s=DA();return lC=function(a){var l=t(this),c=n(a);if(r(l)<c.size)return!1;var u=c.getIterator();return i(u,function(h){if(!e(l,h))return s(u,"normal",!1)})!==!1},lC}var qV;function jOe(){if(qV)return $V;qV=1;var t=Le(),e=OOe(),r=nu(),n=!r("isSupersetOf",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:e}),$V}var LV={},cC,BV;function POe(){if(BV)return cC;BV=1;var t=Zc(),e=eu(),r=qA(),n=ru(),i=tu(),s=e.add,o=e.has,a=e.remove;return cC=function(c){var u=t(this),h=n(c).getIterator(),f=r(u);return i(h,function(p){o(u,p)?a(f,p):s(f,p)}),f},cC}var uC,zV;function boe(){return zV||(zV=1,uC=function(t){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[t](r);return n.size===1&&n.values().next().value===4}catch{return!1}}),uC}var VV;function IOe(){if(VV)return LV;VV=1;var t=Le(),e=POe(),r=boe(),n=nu(),i=!n("symmetricDifference")||!r("symmetricDifference");return t({target:"Set",proto:!0,real:!0,forced:i},{symmetricDifference:e}),LV}var UV={},dC,HV;function ROe(){if(HV)return dC;HV=1;var t=Zc(),e=eu().add,r=qA(),n=ru(),i=tu();return dC=function(o){var a=t(this),l=n(o).getIterator(),c=r(a);return i(l,function(u){e(c,u)}),c},dC}var WV;function MOe(){if(WV)return UV;WV=1;var t=Le(),e=ROe(),r=boe(),n=nu(),i=!n("union")||!r("union");return t({target:"Set",proto:!0,real:!0,forced:i},{union:e}),UV}var hC,KV;function AOe(){if(KV)return hC;KV=1,pl(),bOe(),SOe(),EOe(),NOe(),TOe(),jOe(),IOe(),MOe(),ob();var t=Or();return hC=t.Set,hC}var fC,GV;function DOe(){if(GV)return fC;GV=1;var t=AOe();return ml(),fC=t,fC}var pC,YV;function $Oe(){return YV||(YV=1,pC=DOe()),pC}var FOe=$Oe(),mC=Je(FOe),gC,QV;function qOe(){if(QV)return gC;QV=1,pl(),ob();var t=foe();return gC=t,gC}var yC,XV;function LOe(){if(XV)return yC;XV=1;var t=qOe();return ml(),yC=t,yC}var vC,JV;function BOe(){if(JV)return vC;JV=1;var t=LOe();return vC=t,vC}var bC,ZV;function zOe(){if(ZV)return bC;ZV=1;var t=BOe();return bC=t,bC}var xC,eU;function VOe(){return eU||(eU=1,xC=zOe()),xC}var wC,tU;function UOe(){return tU||(tU=1,wC=VOe()),wC}var HOe=UOe(),SC=Je(HOe);class Vl{constructor(e){this._pairs=e}*[Ku](){for(const[e,r]of this._pairs)yield[e,r]}*entries(){for(const[e,r]of this._pairs)yield[e,r]}*keys(){for(const[e]of this._pairs)yield e}*values(){for(const[,e]of this._pairs)yield e}toIdArray(){var e;return is(e=[...this._pairs]).call(e,r=>r[0])}toItemArray(){var e;return is(e=[...this._pairs]).call(e,r=>r[1])}toEntryArray(){return[...this._pairs]}toObjectMap(){const e=$ke(null);for(const[r,n]of this._pairs)e[r]=n;return e}toMap(){return new voe(this._pairs)}toIdSet(){return new mC(this.toIdArray())}toItemSet(){return new mC(this.toItemArray())}cache(){return new Vl([...this._pairs])}distinct(e){const r=new mC;for(const[n,i]of this._pairs)r.add(e(i,n));return r}filter(e){const r=this._pairs;return new Vl({*[Ku](){for(const[n,i]of r)e(i,n)&&(yield[n,i])}})}forEach(e){for(const[r,n]of this._pairs)e(n,r)}map(e){const r=this._pairs;return new Vl({*[Ku](){for(const[n,i]of r)yield[n,e(i,n)]}})}max(e){const r=SC(this._pairs);let n=r.next();if(n.done)return null;let i=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=r.next()).done;){const[o,a]=n.value,l=e(a,o);l>s&&(s=l,i=a)}return i}min(e){const r=SC(this._pairs);let n=r.next();if(n.done)return null;let i=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=r.next()).done;){const[o,a]=n.value,l=e(a,o);l<s&&(s=l,i=a)}return i}reduce(e,r){for(const[n,i]of this._pairs)r=e(r,i,n);return r}sort(e){return new Vl({[Ku]:()=>{var r;return SC(WI(r=[...this._pairs]).call(r,(n,i)=>{let[s,o]=n,[a,l]=i;return e(o,l,s,a)}))}})}}function rU(t,e){var r=TA(t);if(H6){var n=H6(t);e&&(n=Uu(n).call(n,function(i){return uoe(t,i).enumerable})),r.push.apply(r,n)}return r}function nU(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?Rc(r=rU(Object(i),!0)).call(r,function(s){Ha(t,s,i[s])}):r8?fTe(t,r8(i)):Rc(n=rU(Object(i))).call(n,function(s){gTe(t,s,uoe(i,s))})}return t}function WOe(t,e){return t[e]==null&&(t[e]=yOe()),t}class Yd extends Wv{get idProp(){return this._idProp}constructor(e,r){super(),Ha(this,"_queue",null),e&&!Ns(e)&&(r=e,e=[]),this._options=r||{},this._data=new voe,this.length=0,this._idProp=this._options.fieldId||"id",e&&e.length&&this.add(e),this.setOptions(r)}setOptions(e){e&&e.queue!==void 0&&(e.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=FA.extend(this,{replace:["add","update","remove"]})),e.queue&&typeof e.queue=="object"&&this._queue.setOptions(e.queue)))}add(e,r){const n=[];let i;if(Ns(e)){const s=is(e).call(e,o=>o[this._idProp]);if($Te(s).call(s,o=>this._data.has(o)))throw new Error("A duplicate id was found in the parameter array.");for(let o=0,a=e.length;o<a;o++)i=this._addItem(e[o]),n.push(i)}else if(e&&typeof e=="object")i=this._addItem(e),n.push(i);else throw new Error("Unknown dataType");return n.length&&this._trigger("add",{items:n},r),n}update(e,r){const n=[],i=[],s=[],o=[],a=this._idProp,l=c=>{const u=c[a];if(u!=null&&this._data.has(u)){const h=c,f=Cke({},this._data.get(u)),p=this._updateItem(h);i.push(p),o.push(h),s.push(f)}else{const h=this._addItem(c);n.push(h)}};if(Ns(e))for(let c=0,u=e.length;c<u;c++)e[c]&&typeof e[c]=="object"?l(e[c]):console.warn("Ignoring input item, which is not an object at index "+c);else if(e&&typeof e=="object")l(e);else throw new Error("Unknown dataType");if(n.length&&this._trigger("add",{items:n},r),i.length){const c={items:i,oldData:s,data:o};this._trigger("update",c,r)}return Pke(n).call(n,i)}updateOnly(e,r){var n;Ns(e)||(e=[e]);const i=is(n=is(e).call(e,s=>{const o=this._data.get(s[this._idProp]);if(o==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:o,update:s}})).call(n,s=>{let{oldData:o,update:a}=s;const l=o[this._idProp],c=U2e(o,a);return this._data.set(l,c),{id:l,oldData:o,updatedData:c}});if(i.length){const s={items:is(i).call(i,o=>o.id),oldData:is(i).call(i,o=>o.oldData),data:is(i).call(i,o=>o.updatedData)};return this._trigger("update",s,r),s.items}else return[]}get(e,r){let n,i,s;dV(e)?(n=e,s=r):Ns(e)?(i=e,s=r):s=e;const o=s&&s.returnType==="Object"?"Object":"Array",a=s&&Uu(s),l=[];let c,u,h;if(n!=null)c=this._data.get(n),c&&a&&!a(c)&&(c=void 0);else if(i!=null)for(let p=0,m=i.length;p<m;p++)c=this._data.get(i[p]),c!=null&&(!a||a(c))&&l.push(c);else{var f;u=[...Su(f=this._data).call(f)];for(let p=0,m=u.length;p<m;p++)h=u[p],c=this._data.get(h),c!=null&&(!a||a(c))&&l.push(c)}if(s&&s.order&&n==null&&this._sort(l,s.order),s&&s.fields){const p=s.fields;if(n!=null&&c!=null)c=this._filterFields(c,p);else for(let m=0,g=l.length;m<g;m++)l[m]=this._filterFields(l[m],p)}if(o=="Object"){const p={};for(let m=0,g=l.length;m<g;m++){const v=l[m],y=v[this._idProp];p[y]=v}return p}else return n!=null?c??null:l}getIds(e){const r=this._data,n=e&&Uu(e),i=e&&e.order,s=[...Su(r).call(r)],o=[];if(n)if(i){const a=[];for(let l=0,c=s.length;l<c;l++){const u=s[l],h=this._data.get(u);h!=null&&n(h)&&a.push(h)}this._sort(a,i);for(let l=0,c=a.length;l<c;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const c=s[a],u=this._data.get(c);u!=null&&n(u)&&o.push(u[this._idProp])}else if(i){const a=[];for(let l=0,c=s.length;l<c;l++){const u=s[l];a.push(r.get(u))}this._sort(a,i);for(let l=0,c=a.length;l<c;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const c=s[a],u=r.get(c);u!=null&&o.push(u[this._idProp])}return o}getDataSet(){return this}forEach(e,r){const n=r&&Uu(r),i=this._data,s=[...Su(i).call(i)];if(r&&r.order){const o=this.get(r);for(let a=0,l=o.length;a<l;a++){const c=o[a],u=c[this._idProp];e(c,u)}}else for(let o=0,a=s.length;o<a;o++){const l=s[o],c=this._data.get(l);c!=null&&(!n||n(c))&&e(c,l)}}map(e,r){const n=r&&Uu(r),i=[],s=this._data,o=[...Su(s).call(s)];for(let a=0,l=o.length;a<l;a++){const c=o[a],u=this._data.get(c);u!=null&&(!n||n(u))&&i.push(e(u,c))}return r&&r.order&&this._sort(i,r.order),i}_filterFields(e,r){var n;return e&&fNe(n=Ns(r)?r:TA(r)).call(n,(i,s)=>(i[s]=e[s],i),{})}_sort(e,r){if(typeof r=="string"){const n=r;WI(e).call(e,(i,s)=>{const o=i[n],a=s[n];return o>a?1:o<a?-1:0})}else if(typeof r=="function")WI(e).call(e,r);else throw new TypeError("Order must be a function or a string")}remove(e,r){const n=[],i=[],s=Ns(e)?e:[e];for(let o=0,a=s.length;o<a;o++){const l=this._remove(s[o]);if(l){const c=l[this._idProp];c!=null&&(n.push(c),i.push(l))}}return n.length&&this._trigger("remove",{items:n,oldData:i},r),n}_remove(e){let r;if(dV(e)?r=e:e&&typeof e=="object"&&(r=e[this._idProp]),r!=null&&this._data.has(r)){const n=this._data.get(r)||null;return this._data.delete(r),--this.length,n}return null}clear(e){var r;const n=[...Su(r=this._data).call(r)],i=[];for(let s=0,o=n.length;s<o;s++)i.push(this._data.get(n[s]));return this._data.clear(),this.length=0,this._trigger("remove",{items:n,oldData:i},e),n}max(e){let r=null,n=null;for(const s of iV(i=this._data).call(i)){var i;const o=s[e];typeof o=="number"&&(n==null||o>n)&&(r=s,n=o)}return r||null}min(e){let r=null,n=null;for(const s of iV(i=this._data).call(i)){var i;const o=s[e];typeof o=="number"&&(n==null||o<n)&&(r=s,n=o)}return r||null}distinct(e){const r=this._data,n=[...Su(r).call(r)],i=[];let s=0;for(let o=0,a=n.length;o<a;o++){const l=n[o],u=r.get(l)[e];let h=!1;for(let f=0;f<s;f++)if(i[f]==u){h=!0;break}!h&&u!==void 0&&(i[s]=u,s++)}return i}_addItem(e){const r=WOe(e,this._idProp),n=r[this._idProp];if(this._data.has(n))throw new Error("Cannot add item: item with id "+n+" already exists");return this._data.set(n,r),++this.length,n}_updateItem(e){const r=e[this._idProp];if(r==null)throw new Error("Cannot update item: item has no id (item: "+Wke(e)+")");const n=this._data.get(r);if(!n)throw new Error("Cannot update item: no item with id "+r+" found");return this._data.set(r,nU(nU({},n),e)),r}stream(e){if(e){const n=this._data;return new Vl({*[Ku](){for(const i of e){const s=n.get(i);s!=null&&(yield[i,s])}}})}else{var r;return new Vl({[Ku]:Pse(r=dOe(this._data)).call(r,this._data)})}}}function KOe(t,e){return typeof e=="object"&&e!==null&&t===e.idProp&&typeof e.add=="function"&&typeof e.clear=="function"&&typeof e.distinct=="function"&&typeof Rc(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof is(e)=="function"&&typeof e.max=="function"&&typeof e.min=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.remove=="function"&&typeof e.setOptions=="function"&&typeof e.stream=="function"&&typeof e.update=="function"&&typeof e.updateOnly=="function"}function xoe(t,e){return typeof e=="object"&&e!==null&&t===e.idProp&&typeof Rc(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof is(e)=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.stream=="function"&&KOe(t,e.getDataSet())}/**
 * vis-network
 * https://visjs.github.io/vis-network/
 *
 * A dynamic, browser-based visualization library.
 *
 * @version 10.0.2
 * @date    2025-09-15T17:48:13.838Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var iU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sU={},sf,oU;function Dt(){if(oU)return sf;oU=1;var t=function(e){return e&&e.Math===Math&&e};return sf=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof iU=="object"&&iU)||t(typeof sf=="object"&&sf)||function(){return this}()||Function("return this")(),sf}var _C,aU;function Ze(){return aU||(aU=1,_C=function(t){try{return!!t()}catch{return!0}}),_C}var EC,lU;function Em(){if(lU)return EC;lU=1;var t=Ze();return EC=!t(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),EC}var CC,cU;function ub(){if(cU)return CC;cU=1;var t=Em(),e=Function.prototype,r=e.apply,n=e.call;return CC=typeof Reflect=="object"&&Reflect.apply||(t?n.bind(r):function(){return n.apply(r,arguments)}),CC}var NC,uU;function rt(){if(uU)return NC;uU=1;var t=Em(),e=Function.prototype,r=e.call,n=t&&e.bind.bind(r,r);return NC=t?n:function(i){return function(){return r.apply(i,arguments)}},NC}var kC,dU;function Us(){if(dU)return kC;dU=1;var t=rt(),e=t({}.toString),r=t("".slice);return kC=function(n){return r(e(n),8,-1)},kC}var TC,hU;function LA(){if(hU)return TC;hU=1;var t=Us(),e=rt();return TC=function(r){if(t(r)==="Function")return e(r)},TC}var OC,fU;function Hr(){if(fU)return OC;fU=1;var t=typeof document=="object"&&document.all;return OC=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"},OC}var jC={},PC,pU;function lr(){if(pU)return PC;pU=1;var t=Ze();return PC=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),PC}var IC,mU;function si(){if(mU)return IC;mU=1;var t=Em(),e=Function.prototype.call;return IC=t?e.bind(e):function(){return e.apply(e,arguments)},IC}var RC={},gU;function db(){if(gU)return RC;gU=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,r=e&&!t.call({1:2},1);return RC.f=r?function(i){var s=e(this,i);return!!s&&s.enumerable}:t,RC}var MC,yU;function Cm(){return yU||(yU=1,MC=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}),MC}var AC,vU;function hb(){if(vU)return AC;vU=1;var t=rt(),e=Ze(),r=Us(),n=Object,i=t("".split);return AC=e(function(){return!n("z").propertyIsEnumerable(0)})?function(s){return r(s)==="String"?i(s,""):n(s)}:n,AC}var DC,bU;function wh(){return bU||(bU=1,DC=function(t){return t==null}),DC}var $C,xU;function Vo(){if(xU)return $C;xU=1;var t=wh(),e=TypeError;return $C=function(r){if(t(r))throw new e("Can't call method on "+r);return r},$C}var FC,wU;function vs(){if(wU)return FC;wU=1;var t=hb(),e=Vo();return FC=function(r){return t(e(r))},FC}var qC,SU;function Wr(){if(SU)return qC;SU=1;var t=Hr();return qC=function(e){return typeof e=="object"?e!==null:t(e)},qC}var LC,_U;function mt(){return _U||(_U=1,LC={}),LC}var BC,EU;function wi(){if(EU)return BC;EU=1;var t=mt(),e=Dt(),r=Hr(),n=function(i){return r(i)?i:void 0};return BC=function(i,s){return arguments.length<2?n(t[i])||n(e[i]):t[i]&&t[i][s]||e[i]&&e[i][s]},BC}var zC,CU;function xr(){if(CU)return zC;CU=1;var t=rt();return zC=t({}.isPrototypeOf),zC}var VC,NU;function Sh(){if(NU)return VC;NU=1;var t=Dt(),e=t.navigator,r=e&&e.userAgent;return VC=r?String(r):"",VC}var UC,kU;function Nm(){if(kU)return UC;kU=1;var t=Dt(),e=Sh(),r=t.process,n=t.Deno,i=r&&r.versions||n&&n.version,s=i&&i.v8,o,a;return s&&(o=s.split("."),a=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!a&&e&&(o=e.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=e.match(/Chrome\/(\d+)/),o&&(a=+o[1]))),UC=a,UC}var HC,TU;function _h(){if(TU)return HC;TU=1;var t=Nm(),e=Ze(),r=Dt(),n=r.String;return HC=!!Object.getOwnPropertySymbols&&!e(function(){var i=Symbol("symbol detection");return!n(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&t&&t<41}),HC}var WC,OU;function woe(){if(OU)return WC;OU=1;var t=_h();return WC=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol",WC}var KC,jU;function km(){if(jU)return KC;jU=1;var t=wi(),e=Hr(),r=xr(),n=woe(),i=Object;return KC=n?function(s){return typeof s=="symbol"}:function(s){var o=t("Symbol");return e(o)&&r(o.prototype,i(s))},KC}var GC,PU;function Eh(){if(PU)return GC;PU=1;var t=String;return GC=function(e){try{return t(e)}catch{return"Object"}},GC}var YC,IU;function Uo(){if(IU)return YC;IU=1;var t=Hr(),e=Eh(),r=TypeError;return YC=function(n){if(t(n))return n;throw new r(e(n)+" is not a function")},YC}var QC,RU;function BA(){if(RU)return QC;RU=1;var t=Uo(),e=wh();return QC=function(r,n){var i=r[n];return e(i)?void 0:t(i)},QC}var XC,MU;function GOe(){if(MU)return XC;MU=1;var t=si(),e=Hr(),r=Wr(),n=TypeError;return XC=function(i,s){var o,a;if(s==="string"&&e(o=i.toString)&&!r(a=t(o,i))||e(o=i.valueOf)&&!r(a=t(o,i))||s!=="string"&&e(o=i.toString)&&!r(a=t(o,i)))return a;throw new n("Can't convert object to primitive value")},XC}var JC={exports:{}},ZC,AU;function Ch(){return AU||(AU=1,ZC=!0),ZC}var eN,DU;function YOe(){if(DU)return eN;DU=1;var t=Dt(),e=Object.defineProperty;return eN=function(r,n){try{e(t,r,{value:n,configurable:!0,writable:!0})}catch{t[r]=n}return n},eN}var $U;function zA(){if($U)return JC.exports;$U=1;var t=Ch(),e=Dt(),r=YOe(),n="__core-js_shared__",i=JC.exports=e[n]||r(n,{});return(i.versions||(i.versions=[])).push({version:"3.44.0",mode:t?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),JC.exports}var tN,FU;function Nh(){if(FU)return tN;FU=1;var t=zA();return tN=function(e,r){return t[e]||(t[e]=r||{})},tN}var rN,qU;function Si(){if(qU)return rN;qU=1;var t=Vo(),e=Object;return rN=function(r){return e(t(r))},rN}var nN,LU;function nn(){if(LU)return nN;LU=1;var t=rt(),e=Si(),r=t({}.hasOwnProperty);return nN=Object.hasOwn||function(i,s){return r(e(i),s)},nN}var iN,BU;function fb(){if(BU)return iN;BU=1;var t=rt(),e=0,r=Math.random(),n=t(1.1.toString);return iN=function(i){return"Symbol("+(i===void 0?"":i)+")_"+n(++e+r,36)},iN}var sN,zU;function wr(){if(zU)return sN;zU=1;var t=Dt(),e=Nh(),r=nn(),n=fb(),i=_h(),s=woe(),o=t.Symbol,a=e("wks"),l=s?o.for||o:o&&o.withoutSetter||n;return sN=function(c){return r(a,c)||(a[c]=i&&r(o,c)?o[c]:l("Symbol."+c)),a[c]},sN}var oN,VU;function Soe(){if(VU)return oN;VU=1;var t=si(),e=Wr(),r=km(),n=BA(),i=GOe(),s=wr(),o=TypeError,a=s("toPrimitive");return oN=function(l,c){if(!e(l)||r(l))return l;var u=n(l,a),h;if(u){if(c===void 0&&(c="default"),h=t(u,l,c),!e(h)||r(h))return h;throw new o("Can't convert object to primitive value")}return c===void 0&&(c="number"),i(l,c)},oN}var aN,UU;function VA(){if(UU)return aN;UU=1;var t=Soe(),e=km();return aN=function(r){var n=t(r,"string");return e(n)?n:n+""},aN}var lN,HU;function _oe(){if(HU)return lN;HU=1;var t=Dt(),e=Wr(),r=t.document,n=e(r)&&e(r.createElement);return lN=function(i){return n?r.createElement(i):{}},lN}var cN,WU;function Eoe(){if(WU)return cN;WU=1;var t=lr(),e=Ze(),r=_oe();return cN=!t&&!e(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7}),cN}var KU;function pb(){if(KU)return jC;KU=1;var t=lr(),e=si(),r=db(),n=Cm(),i=vs(),s=VA(),o=nn(),a=Eoe(),l=Object.getOwnPropertyDescriptor;return jC.f=t?l:function(u,h){if(u=i(u),h=s(h),a)try{return l(u,h)}catch{}if(o(u,h))return n(!e(r.f,u,h),u[h])},jC}var uN,GU;function QOe(){if(GU)return uN;GU=1;var t=Ze(),e=Hr(),r=/#|\.prototype\./,n=function(l,c){var u=s[i(l)];return u===a?!0:u===o?!1:e(c)?t(c):!!c},i=n.normalize=function(l){return String(l).replace(r,".").toLowerCase()},s=n.data={},o=n.NATIVE="N",a=n.POLYFILL="P";return uN=n,uN}var dN,YU;function mb(){if(YU)return dN;YU=1;var t=LA(),e=Uo(),r=Em(),n=t(t.bind);return dN=function(i,s){return e(i),s===void 0?i:r?n(i,s):function(){return i.apply(s,arguments)}},dN}var hN={},fN,QU;function Coe(){if(QU)return fN;QU=1;var t=lr(),e=Ze();return fN=t&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),fN}var pN,XU;function Hs(){if(XU)return pN;XU=1;var t=Wr(),e=String,r=TypeError;return pN=function(n){if(t(n))return n;throw new r(e(n)+" is not an object")},pN}var JU;function Ki(){if(JU)return hN;JU=1;var t=lr(),e=Eoe(),r=Coe(),n=Hs(),i=VA(),s=TypeError,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l="enumerable",c="configurable",u="writable";return hN.f=t?r?function(f,p,m){if(n(f),p=i(p),n(m),typeof f=="function"&&p==="prototype"&&"value"in m&&u in m&&!m[u]){var g=a(f,p);g&&g[u]&&(f[p]=m.value,m={configurable:c in m?m[c]:g[c],enumerable:l in m?m[l]:g[l],writable:!1})}return o(f,p,m)}:o:function(f,p,m){if(n(f),p=i(p),n(m),e)try{return o(f,p,m)}catch{}if("get"in m||"set"in m)throw new s("Accessors not supported");return"value"in m&&(f[p]=m.value),f},hN}var mN,ZU;function kh(){if(ZU)return mN;ZU=1;var t=lr(),e=Ki(),r=Cm();return mN=t?function(n,i,s){return e.f(n,i,r(1,s))}:function(n,i,s){return n[i]=s,n},mN}var gN,eH;function Oe(){if(eH)return gN;eH=1;var t=Dt(),e=ub(),r=LA(),n=Hr(),i=pb().f,s=QOe(),o=mt(),a=mb(),l=kh(),c=nn(),u=function(h){var f=function(p,m,g){if(this instanceof f){switch(arguments.length){case 0:return new h;case 1:return new h(p);case 2:return new h(p,m)}return new h(p,m,g)}return e(h,this,arguments)};return f.prototype=h.prototype,f};return gN=function(h,f){var p=h.target,m=h.global,g=h.stat,v=h.proto,y=m?t:g?t[p]:t[p]&&t[p].prototype,b=m?o:o[p]||l(o,p,{})[p],w=b.prototype,x,S,_,C,E,N,T,j,P;for(C in f)x=s(m?C:p+(g?".":"#")+C,h.forced),S=!x&&y&&c(y,C),N=b[C],S&&(h.dontCallGetSet?(P=i(y,C),T=P&&P.value):T=y[C]),E=S&&T?T:f[C],!(!x&&!v&&typeof N==typeof E)&&(h.bind&&S?j=a(E,t):h.wrap&&S?j=u(E):v&&n(E)?j=r(E):j=E,(h.sham||E&&E.sham||N&&N.sham)&&l(j,"sham",!0),l(b,C,j),v&&(_=p+"Prototype",c(o,_)||l(o,_,{}),l(o[_],C,E),h.real&&w&&(x||!w[C])&&l(w,C,E)))},gN}var yN,tH;function XOe(){if(tH)return yN;tH=1;var t=Math.ceil,e=Math.floor;return yN=Math.trunc||function(n){var i=+n;return(i>0?e:t)(i)},yN}var vN,rH;function Th(){if(rH)return vN;rH=1;var t=XOe();return vN=function(e){var r=+e;return r!==r||r===0?0:t(r)},vN}var bN,nH;function gb(){if(nH)return bN;nH=1;var t=Th(),e=Math.max,r=Math.min;return bN=function(n,i){var s=t(n);return s<0?e(s+i,0):r(s,i)},bN}var xN,iH;function Noe(){if(iH)return xN;iH=1;var t=Th(),e=Math.min;return xN=function(r){var n=t(r);return n>0?e(n,9007199254740991):0},xN}var wN,sH;function Ho(){if(sH)return wN;sH=1;var t=Noe();return wN=function(e){return t(e.length)},wN}var SN,oH;function UA(){if(oH)return SN;oH=1;var t=vs(),e=gb(),r=Ho(),n=function(i){return function(s,o,a){var l=t(s),c=r(l);if(c===0)return!i&&-1;var u=e(a,c),h;if(i&&o!==o){for(;c>u;)if(h=l[u++],h!==h)return!0}else for(;c>u;u++)if((i||u in l)&&l[u]===o)return i||u||0;return!i&&-1}};return SN={includes:n(!0),indexOf:n(!1)},SN}var _N,aH;function Tm(){return aH||(aH=1,_N={}),_N}var EN,lH;function koe(){if(lH)return EN;lH=1;var t=rt(),e=nn(),r=vs(),n=UA().indexOf,i=Tm(),s=t([].push);return EN=function(o,a){var l=r(o),c=0,u=[],h;for(h in l)!e(i,h)&&e(l,h)&&s(u,h);for(;a.length>c;)e(l,h=a[c++])&&(~n(u,h)||s(u,h));return u},EN}var CN,cH;function HA(){return cH||(cH=1,CN=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),CN}var NN,uH;function Om(){if(uH)return NN;uH=1;var t=koe(),e=HA();return NN=Object.keys||function(n){return t(n,e)},NN}var kN={},dH;function yb(){return dH||(dH=1,kN.f=Object.getOwnPropertySymbols),kN}var TN,hH;function JOe(){if(hH)return TN;hH=1;var t=lr(),e=rt(),r=si(),n=Ze(),i=Om(),s=yb(),o=db(),a=Si(),l=hb(),c=Object.assign,u=Object.defineProperty,h=e([].concat);return TN=!c||n(function(){if(t&&c({b:1},c(u({},"a",{enumerable:!0,get:function(){u(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},p={},m=Symbol("assign detection"),g="abcdefghijklmnopqrst";return f[m]=7,g.split("").forEach(function(v){p[v]=v}),c({},f)[m]!==7||i(c({},p)).join("")!==g})?function(p,m){for(var g=a(p),v=arguments.length,y=1,b=s.f,w=o.f;v>y;)for(var x=l(arguments[y++]),S=b?h(i(x),b(x)):i(x),_=S.length,C=0,E;_>C;)E=S[C++],(!t||r(w,x,E))&&(g[E]=x[E]);return g}:c,TN}var fH;function ZOe(){if(fH)return sU;fH=1;var t=Oe(),e=JOe();return t({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),sU}var ON,pH;function eje(){if(pH)return ON;pH=1,ZOe();var t=mt();return ON=t.Object.assign,ON}var jN,mH;function tje(){if(mH)return jN;mH=1;var t=eje();return jN=t,jN}var PN,gH;function rje(){return gH||(gH=1,PN=tje()),PN}var nje=rje(),pr=$e(nje),yH={},IN,vH;function Oh(){if(vH)return IN;vH=1;var t=rt();return IN=t([].slice),IN}var RN,bH;function ije(){if(bH)return RN;bH=1;var t=rt(),e=Uo(),r=Wr(),n=nn(),i=Oh(),s=Em(),o=Function,a=t([].concat),l=t([].join),c={},u=function(h,f,p){if(!n(c,f)){for(var m=[],g=0;g<f;g++)m[g]="a["+g+"]";c[f]=o("C,a","return new C("+l(m,",")+")")}return c[f](h,p)};return RN=s?o.bind:function(f){var p=e(this),m=p.prototype,g=i(arguments,1),v=function(){var b=a(g,i(arguments));return this instanceof v?u(p,b.length,b):p.apply(f,b)};return r(m)&&(v.prototype=m),v},RN}var xH;function sje(){if(xH)return yH;xH=1;var t=Oe(),e=ije();return t({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),yH}var MN,wH;function sn(){if(wH)return MN;wH=1;var t=Dt(),e=mt();return MN=function(r,n){var i=e[r+"Prototype"],s=i&&i[n];if(s)return s;var o=t[r],a=o&&o.prototype;return a&&a[n]},MN}var AN,SH;function oje(){if(SH)return AN;SH=1,sje();var t=sn();return AN=t("Function","bind"),AN}var DN,_H;function aje(){if(_H)return DN;_H=1;var t=xr(),e=oje(),r=Function.prototype;return DN=function(n){var i=n.bind;return n===r||t(r,n)&&i===r.bind?e:i},DN}var $N,EH;function lje(){if(EH)return $N;EH=1;var t=aje();return $N=t,$N}var FN,CH;function cje(){return CH||(CH=1,FN=lje()),FN}var uje=cje(),se=$e(uje);function WA(t,e,r,n){t.beginPath(),t.arc(e,r,n,0,2*Math.PI,!1),t.closePath()}function dje(t,e,r,n){t.beginPath(),t.rect(e-n,r-n,n*2,n*2),t.closePath()}function hje(t,e,r,n){t.beginPath(),n*=1.15,r+=.275*n;const i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);t.moveTo(e,r-(a-o)),t.lineTo(e+s,r+o),t.lineTo(e-s,r+o),t.lineTo(e,r-(a-o)),t.closePath()}function fje(t,e,r,n){t.beginPath(),n*=1.15,r-=.275*n;const i=n*2,s=i/2,o=Math.sqrt(3)/6*i,a=Math.sqrt(i*i-s*s);t.moveTo(e,r+(a-o)),t.lineTo(e+s,r-o),t.lineTo(e-s,r-o),t.lineTo(e,r+(a-o)),t.closePath()}function pje(t,e,r,n){t.beginPath(),n*=.82,r+=.1*n;for(let i=0;i<10;i++){const s=i%2===0?n*1.3:n*.5;t.lineTo(e+s*Math.sin(i*2*Math.PI/10),r-s*Math.cos(i*2*Math.PI/10))}t.closePath()}function mje(t,e,r,n){t.beginPath(),t.lineTo(e,r+n),t.lineTo(e+n,r),t.lineTo(e,r-n),t.lineTo(e-n,r),t.closePath()}function Toe(t,e,r,n,i,s){const o=Math.PI/180;n-2*s<0&&(s=n/2),i-2*s<0&&(s=i/2),t.beginPath(),t.moveTo(e+s,r),t.lineTo(e+n-s,r),t.arc(e+n-s,r+s,s,o*270,o*360,!1),t.lineTo(e+n,r+i-s),t.arc(e+n-s,r+i-s,s,0,o*90,!1),t.lineTo(e+s,r+i),t.arc(e+s,r+i-s,s,o*90,o*180,!1),t.lineTo(e,r+s),t.arc(e+s,r+s,s,o*180,o*270,!1),t.closePath()}function KI(t,e,r,n,i){const s=.5522848,o=n/2*s,a=i/2*s,l=e+n,c=r+i,u=e+n/2,h=r+i/2;t.beginPath(),t.moveTo(e,h),t.bezierCurveTo(e,h-a,u-o,r,u,r),t.bezierCurveTo(u+o,r,l,h-a,l,h),t.bezierCurveTo(l,h+a,u+o,c,u,c),t.bezierCurveTo(u-o,c,e,h+a,e,h),t.closePath()}function Ooe(t,e,r,n,i){const s=.3333333333333333,o=n,a=i*s,l=.5522848,c=o/2*l,u=a/2*l,h=e+o,f=r+a,p=e+o/2,m=r+a/2,g=r+(i-a/2),v=r+i;t.beginPath(),t.moveTo(h,m),t.bezierCurveTo(h,m+u,p+c,f,p,f),t.bezierCurveTo(p-c,f,e,m+u,e,m),t.bezierCurveTo(e,m-u,p-c,r,p,r),t.bezierCurveTo(p+c,r,h,m-u,h,m),t.lineTo(h,g),t.bezierCurveTo(h,g+u,p+c,v,p,v),t.bezierCurveTo(p-c,v,e,g+u,e,g),t.lineTo(e,m)}function joe(t,e,r,n,i,s){t.beginPath(),t.moveTo(e,r);const o=s.length,a=n-e,l=i-r,c=l/a;let u=Math.sqrt(a*a+l*l),h=0,f=!0,p=0,m=+s[0];for(;u>=.1;)m=+s[h++%o],m>u&&(m=u),p=Math.sqrt(m*m/(1+c*c)),p=a<0?-p:p,e+=p,r+=c*p,f===!0?t.lineTo(e,r):t.moveTo(e,r),u-=m,f=!f}function gje(t,e,r,n){t.beginPath();const i=6,s=Math.PI*2/i;t.moveTo(e+n,r);for(let o=1;o<i;o++)t.lineTo(e+n*Math.cos(s*o),r+n*Math.sin(s*o));t.closePath()}const NH={circle:WA,dashedLine:joe,database:Ooe,diamond:mje,ellipse:KI,ellipse_vis:KI,hexagon:gje,roundRect:Toe,square:dje,star:pje,triangle:hje,triangleDown:fje};function yje(t){return Object.prototype.hasOwnProperty.call(NH,t)?NH[t]:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];CanvasRenderingContext2D.prototype[t].call(e,n)}}var qN={exports:{}},kH;function vje(){return kH||(kH=1,function(t){t.exports=e;function e(n){if(n)return r(n)}function r(n){for(var i in e.prototype)n[i]=e.prototype[i];return n}e.prototype.on=e.prototype.addEventListener=function(n,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(i),this},e.prototype.once=function(n,i){function s(){this.off(n,s),i.apply(this,arguments)}return s.fn=i,this.on(n,s),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(n,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+n];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var o,a=0;a<s.length;a++)if(o=s[a],o===i||o.fn===i){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+n],this},e.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),s=this._callbacks["$"+n],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(s){s=s.slice(0);for(var o=0,a=s.length;o<a;++o)s[o].apply(this,i)}return this},e.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},e.prototype.hasListeners=function(n){return!!this.listeners(n).length}}(qN)),qN.exports}var bje=vje(),Poe=$e(bje),TH={},LN,OH;function iu(){if(OH)return LN;OH=1;var t=Us();return LN=Array.isArray||function(r){return t(r)==="Array"},LN}var BN,jH;function Ioe(){if(jH)return BN;jH=1;var t=TypeError,e=9007199254740991;return BN=function(r){if(r>e)throw t("Maximum allowed index exceeded");return r},BN}var zN,PH;function vb(){if(PH)return zN;PH=1;var t=lr(),e=Ki(),r=Cm();return zN=function(n,i,s){t?e.f(n,i,r(0,s)):n[i]=s},zN}var VN,IH;function KA(){if(IH)return VN;IH=1;var t=wr(),e=t("toStringTag"),r={};return r[e]="z",VN=String(r)==="[object z]",VN}var UN,RH;function jh(){if(RH)return UN;RH=1;var t=KA(),e=Hr(),r=Us(),n=wr(),i=n("toStringTag"),s=Object,o=r(function(){return arguments}())==="Arguments",a=function(l,c){try{return l[c]}catch{}};return UN=t?r:function(l){var c,u,h;return l===void 0?"Undefined":l===null?"Null":typeof(u=a(c=s(l),i))=="string"?u:o?r(c):(h=r(c))==="Object"&&e(c.callee)?"Arguments":h},UN}var HN,MH;function xje(){if(MH)return HN;MH=1;var t=rt(),e=Hr(),r=zA(),n=t(Function.toString);return e(r.inspectSource)||(r.inspectSource=function(i){return n(i)}),HN=r.inspectSource,HN}var WN,AH;function Roe(){if(AH)return WN;AH=1;var t=rt(),e=Ze(),r=Hr(),n=jh(),i=wi(),s=xje(),o=function(){},a=i("Reflect","construct"),l=/^\s*(?:class|function)\b/,c=t(l.exec),u=!l.test(o),h=function(m){if(!r(m))return!1;try{return a(o,[],m),!0}catch{return!1}},f=function(m){if(!r(m))return!1;switch(n(m)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return u||!!c(l,s(m))}catch{return!0}};return f.sham=!0,WN=!a||e(function(){var p;return h(h.call)||!h(Object)||!h(function(){p=!0})||p})?f:h,WN}var KN,DH;function wje(){if(DH)return KN;DH=1;var t=iu(),e=Roe(),r=Wr(),n=wr(),i=n("species"),s=Array;return KN=function(o){var a;return t(o)&&(a=o.constructor,e(a)&&(a===s||t(a.prototype))?a=void 0:r(a)&&(a=a[i],a===null&&(a=void 0))),a===void 0?s:a},KN}var GN,$H;function GA(){if($H)return GN;$H=1;var t=wje();return GN=function(e,r){return new(t(e))(r===0?0:r)},GN}var YN,FH;function jm(){if(FH)return YN;FH=1;var t=Ze(),e=wr(),r=Nm(),n=e("species");return YN=function(i){return r>=51||!t(function(){var s=[],o=s.constructor={};return o[n]=function(){return{foo:1}},s[i](Boolean).foo!==1})},YN}var qH;function Moe(){if(qH)return TH;qH=1;var t=Oe(),e=Ze(),r=iu(),n=Wr(),i=Si(),s=Ho(),o=Ioe(),a=vb(),l=GA(),c=jm(),u=wr(),h=Nm(),f=u("isConcatSpreadable"),p=h>=51||!e(function(){var v=[];return v[f]=!1,v.concat()[0]!==v}),m=function(v){if(!n(v))return!1;var y=v[f];return y!==void 0?!!y:r(v)},g=!p||!c("concat");return t({target:"Array",proto:!0,arity:1,forced:g},{concat:function(y){var b=i(this),w=l(b,0),x=0,S,_,C,E,N;for(S=-1,C=arguments.length;S<C;S++)if(N=S===-1?b:arguments[S],m(N))for(E=s(N),o(x+E),_=0;_<E;_++,x++)_ in N&&a(w,x,N[_]);else o(x+1),a(w,x++,N);return w.length=x,w}}),TH}var LH={},BH={},QN,zH;function Gi(){if(zH)return QN;zH=1;var t=jh(),e=String;return QN=function(r){if(t(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(r)},QN}var XN={},VH;function YA(){if(VH)return XN;VH=1;var t=lr(),e=Coe(),r=Ki(),n=Hs(),i=vs(),s=Om();return XN.f=t&&!e?Object.defineProperties:function(a,l){n(a);for(var c=i(l),u=s(l),h=u.length,f=0,p;h>f;)r.f(a,p=u[f++],c[p]);return a},XN}var JN,UH;function Sje(){if(UH)return JN;UH=1;var t=wi();return JN=t("document","documentElement"),JN}var ZN,HH;function bb(){if(HH)return ZN;HH=1;var t=Nh(),e=fb(),r=t("keys");return ZN=function(n){return r[n]||(r[n]=e(n))},ZN}var ek,WH;function Pm(){if(WH)return ek;WH=1;var t=Hs(),e=YA(),r=HA(),n=Tm(),i=Sje(),s=_oe(),o=bb(),a=">",l="<",c="prototype",u="script",h=o("IE_PROTO"),f=function(){},p=function(b){return l+u+a+b+l+"/"+u+a},m=function(b){b.write(p("")),b.close();var w=b.parentWindow.Object;return b=null,w},g=function(){var b=s("iframe"),w="java"+u+":",x;return b.style.display="none",i.appendChild(b),b.src=String(w),x=b.contentWindow.document,x.open(),x.write(p("document.F=Object")),x.close(),x.F},v,y=function(){try{v=new ActiveXObject("htmlfile")}catch{}y=typeof document<"u"?document.domain&&v?m(v):g():m(v);for(var b=r.length;b--;)delete y[c][r[b]];return y()};return n[h]=!0,ek=Object.create||function(w,x){var S;return w!==null?(f[c]=t(w),S=new f,f[c]=null,S[h]=w):S=y(),x===void 0?S:e.f(S,x)},ek}var tk={},KH;function xb(){if(KH)return tk;KH=1;var t=koe(),e=HA(),r=e.concat("length","prototype");return tk.f=Object.getOwnPropertyNames||function(i){return t(i,r)},tk}var rk={},GH;function QA(){if(GH)return rk;GH=1;var t=Us(),e=vs(),r=xb().f,n=Oh(),i=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(o){try{return r(o)}catch{return n(i)}};return rk.f=function(a){return i&&t(a)==="Window"?s(a):r(e(a))},rk}var nk,YH;function Im(){if(YH)return nk;YH=1;var t=kh();return nk=function(e,r,n,i){return i&&i.enumerable?e[r]=n:t(e,r,n),e},nk}var ik,QH;function XA(){if(QH)return ik;QH=1;var t=Ki();return ik=function(e,r,n){return t.f(e,r,n)},ik}var sk={},XH;function wb(){if(XH)return sk;XH=1;var t=wr();return sk.f=t,sk}var ok,JH;function Ht(){if(JH)return ok;JH=1;var t=mt(),e=nn(),r=wb(),n=Ki().f;return ok=function(i){var s=t.Symbol||(t.Symbol={});e(s,i)||n(s,i,{value:r.f(i)})},ok}var ak,ZH;function Aoe(){if(ZH)return ak;ZH=1;var t=si(),e=wi(),r=wr(),n=Im();return ak=function(){var i=e("Symbol"),s=i&&i.prototype,o=s&&s.valueOf,a=r("toPrimitive");s&&!s[a]&&n(s,a,function(l){return t(o,this)},{arity:1})},ak}var lk,e7;function _je(){if(e7)return lk;e7=1;var t=KA(),e=jh();return lk=t?{}.toString:function(){return"[object "+e(this)+"]"},lk}var ck,t7;function su(){if(t7)return ck;t7=1;var t=KA(),e=Ki().f,r=kh(),n=nn(),i=_je(),s=wr(),o=s("toStringTag");return ck=function(a,l,c,u){var h=c?a:a&&a.prototype;h&&(n(h,o)||e(h,o,{configurable:!0,value:l}),u&&!t&&r(h,"toString",i))},ck}var uk,r7;function Doe(){if(r7)return uk;r7=1;var t=Dt(),e=Hr(),r=t.WeakMap;return uk=e(r)&&/native code/.test(String(r)),uk}var dk,n7;function ou(){if(n7)return dk;n7=1;var t=Doe(),e=Dt(),r=Wr(),n=kh(),i=nn(),s=zA(),o=bb(),a=Tm(),l="Object already initialized",c=e.TypeError,u=e.WeakMap,h,f,p,m=function(b){return p(b)?f(b):h(b,{})},g=function(b){return function(w){var x;if(!r(w)||(x=f(w)).type!==b)throw new c("Incompatible receiver, "+b+" required");return x}};if(t||s.state){var v=s.state||(s.state=new u);v.get=v.get,v.has=v.has,v.set=v.set,h=function(b,w){if(v.has(b))throw new c(l);return w.facade=b,v.set(b,w),w},f=function(b){return v.get(b)||{}},p=function(b){return v.has(b)}}else{var y=o("state");a[y]=!0,h=function(b,w){if(i(b,y))throw new c(l);return w.facade=b,n(b,y,w),w},f=function(b){return i(b,y)?b[y]:{}},p=function(b){return i(b,y)}}return dk={set:h,get:f,has:p,enforce:m,getterFor:g},dk}var hk,i7;function gl(){if(i7)return hk;i7=1;var t=mb(),e=rt(),r=hb(),n=Si(),i=Ho(),s=GA(),o=e([].push),a=function(l){var c=l===1,u=l===2,h=l===3,f=l===4,p=l===6,m=l===7,g=l===5||p;return function(v,y,b,w){for(var x=n(v),S=r(x),_=i(S),C=t(y,b),E=0,N=w||s,T=c?N(v,_):u||m?N(v,0):void 0,j,P;_>E;E++)if((g||E in S)&&(j=S[E],P=C(j,E,x),l))if(c)T[E]=P;else if(P)switch(l){case 3:return!0;case 5:return j;case 6:return E;case 2:o(T,j)}else switch(l){case 4:return!1;case 7:o(T,j)}return p?-1:h||f?f:T}};return hk={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterReject:a(7)},hk}var s7;function Eje(){if(s7)return BH;s7=1;var t=Oe(),e=Dt(),r=si(),n=rt(),i=Ch(),s=lr(),o=_h(),a=Ze(),l=nn(),c=xr(),u=Hs(),h=vs(),f=VA(),p=Gi(),m=Cm(),g=Pm(),v=Om(),y=xb(),b=QA(),w=yb(),x=pb(),S=Ki(),_=YA(),C=db(),E=Im(),N=XA(),T=Nh(),j=bb(),P=Tm(),O=fb(),D=wr(),z=wb(),R=Ht(),B=Aoe(),q=su(),$=ou(),K=gl().forEach,W=j("hidden"),F="Symbol",X="prototype",Q=$.set,Ce=$.getterFor(F),xe=Object[X],Be=e.Symbol,at=Be&&Be[X],Kr=e.RangeError,Sr=e.TypeError,Wt=e.QObject,jr=x.f,nt=S.f,yn=b.f,$n=C.f,Pr=n([].push),gt=T("symbols"),rr=T("op-symbols"),Ws=T("wks"),_r=!Wt||!Wt[X]||!Wt[X].findChild,A=function(Se,ne,fe){var ce=jr(xe,ne);ce&&delete xe[ne],nt(Se,ne,fe),ce&&Se!==xe&&nt(xe,ne,ce)},L=s&&a(function(){return g(nt({},"a",{get:function(){return nt(this,"a",{value:7}).a}})).a!==7})?A:nt,U=function(Se,ne){var fe=gt[Se]=g(at);return Q(fe,{type:F,tag:Se,description:ne}),s||(fe.description=ne),fe},oe=function(ne,fe,ce){ne===xe&&oe(rr,fe,ce),u(ne);var Ne=f(fe);return u(ce),l(gt,Ne)?(ce.enumerable?(l(ne,W)&&ne[W][Ne]&&(ne[W][Ne]=!1),ce=g(ce,{enumerable:m(0,!1)})):(l(ne,W)||nt(ne,W,m(1,g(null))),ne[W][Ne]=!0),L(ne,Ne,ce)):nt(ne,Ne,ce)},ee=function(ne,fe){u(ne);var ce=h(fe),Ne=v(ce).concat(St(ce));return K(Ne,function(He){(!s||r(me,ce,He))&&oe(ne,He,ce[He])}),ne},Z=function(ne,fe){return fe===void 0?g(ne):ee(g(ne),fe)},me=function(ne){var fe=f(ne),ce=r($n,this,fe);return this===xe&&l(gt,fe)&&!l(rr,fe)?!1:ce||!l(this,fe)||!l(gt,fe)||l(this,W)&&this[W][fe]?ce:!0},Fe=function(ne,fe){var ce=h(ne),Ne=f(fe);if(!(ce===xe&&l(gt,Ne)&&!l(rr,Ne))){var He=jr(ce,Ne);return He&&l(gt,Ne)&&!(l(ce,W)&&ce[W][Ne])&&(He.enumerable=!0),He}},Ke=function(ne){var fe=yn(h(ne)),ce=[];return K(fe,function(Ne){!l(gt,Ne)&&!l(P,Ne)&&Pr(ce,Ne)}),ce},St=function(Se){var ne=Se===xe,fe=yn(ne?rr:h(Se)),ce=[];return K(fe,function(Ne){l(gt,Ne)&&(!ne||l(xe,Ne))&&Pr(ce,gt[Ne])}),ce};return o||(Be=function(){if(c(at,this))throw new Sr("Symbol is not a constructor");var ne=!arguments.length||arguments[0]===void 0?void 0:p(arguments[0]),fe=O(ne),ce=function(Ne){var He=this===void 0?e:this;He===xe&&r(ce,rr,Ne),l(He,W)&&l(He[W],fe)&&(He[W][fe]=!1);var _i=m(1,Ne);try{L(He,fe,_i)}catch(vn){if(!(vn instanceof Kr))throw vn;A(He,fe,_i)}};return s&&_r&&L(xe,fe,{configurable:!0,set:ce}),U(fe,ne)},at=Be[X],E(at,"toString",function(){return Ce(this).tag}),E(Be,"withoutSetter",function(Se){return U(O(Se),Se)}),C.f=me,S.f=oe,_.f=ee,x.f=Fe,y.f=b.f=Ke,w.f=St,z.f=function(Se){return U(D(Se),Se)},s&&(N(at,"description",{configurable:!0,get:function(){return Ce(this).description}}),i||E(xe,"propertyIsEnumerable",me,{unsafe:!0}))),t({global:!0,constructor:!0,wrap:!0,forced:!o,sham:!o},{Symbol:Be}),K(v(Ws),function(Se){R(Se)}),t({target:F,stat:!0,forced:!o},{useSetter:function(){_r=!0},useSimple:function(){_r=!1}}),t({target:"Object",stat:!0,forced:!o,sham:!s},{create:Z,defineProperty:oe,defineProperties:ee,getOwnPropertyDescriptor:Fe}),t({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:Ke}),B(),q(Be,F),P[W]=!0,BH}var o7={},fk,a7;function $oe(){if(a7)return fk;a7=1;var t=_h();return fk=t&&!!Symbol.for&&!!Symbol.keyFor,fk}var l7;function Cje(){if(l7)return o7;l7=1;var t=Oe(),e=wi(),r=nn(),n=Gi(),i=Nh(),s=$oe(),o=i("string-to-symbol-registry"),a=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{for:function(l){var c=n(l);if(r(o,c))return o[c];var u=e("Symbol")(c);return o[c]=u,a[u]=c,u}}),o7}var c7={},u7;function Nje(){if(u7)return c7;u7=1;var t=Oe(),e=nn(),r=km(),n=Eh(),i=Nh(),s=$oe(),o=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{keyFor:function(l){if(!r(l))throw new TypeError(n(l)+" is not a symbol");if(e(o,l))return o[l]}}),c7}var d7={},pk,h7;function kje(){if(h7)return pk;h7=1;var t=rt(),e=iu(),r=Hr(),n=Us(),i=Gi(),s=t([].push);return pk=function(o){if(r(o))return o;if(e(o)){for(var a=o.length,l=[],c=0;c<a;c++){var u=o[c];typeof u=="string"?s(l,u):(typeof u=="number"||n(u)==="Number"||n(u)==="String")&&s(l,i(u))}var h=l.length,f=!0;return function(p,m){if(f)return f=!1,m;if(e(this))return m;for(var g=0;g<h;g++)if(l[g]===p)return m}}},pk}var f7;function Foe(){if(f7)return d7;f7=1;var t=Oe(),e=wi(),r=ub(),n=si(),i=rt(),s=Ze(),o=Hr(),a=km(),l=Oh(),c=kje(),u=_h(),h=String,f=e("JSON","stringify"),p=i(/./.exec),m=i("".charAt),g=i("".charCodeAt),v=i("".replace),y=i(1.1.toString),b=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,x=/^[\uDC00-\uDFFF]$/,S=!u||s(function(){var N=e("Symbol")("stringify detection");return f([N])!=="[null]"||f({a:N})!=="{}"||f(Object(N))!=="{}"}),_=s(function(){return f("\uDF06\uD834")!=='"\\udf06\\ud834"'||f("\uDEAD")!=='"\\udead"'}),C=function(N,T){var j=l(arguments),P=c(T);if(!(!o(P)&&(N===void 0||a(N))))return j[1]=function(O,D){if(o(P)&&(D=n(P,this,h(O),D)),!a(D))return D},r(f,null,j)},E=function(N,T,j){var P=m(j,T-1),O=m(j,T+1);return p(w,N)&&!p(x,O)||p(x,N)&&!p(w,P)?"\\u"+y(g(N,0),16):N};return f&&t({target:"JSON",stat:!0,arity:3,forced:S||_},{stringify:function(T,j,P){var O=l(arguments),D=r(S?C:f,null,O);return _&&typeof D=="string"?v(D,b,E):D}}),d7}var p7={},m7;function Tje(){if(m7)return p7;m7=1;var t=Oe(),e=_h(),r=Ze(),n=yb(),i=Si(),s=!e||r(function(){n.f(1)});return t({target:"Object",stat:!0,forced:s},{getOwnPropertySymbols:function(a){var l=n.f;return l?l(i(a)):[]}}),p7}var g7;function qoe(){return g7||(g7=1,Eje(),Cje(),Nje(),Foe(),Tje()),LH}var y7={},v7;function Loe(){if(v7)return y7;v7=1;var t=Ht();return t("asyncDispose"),y7}var b7={},x7;function Oje(){if(x7)return b7;x7=1;var t=Ht();return t("asyncIterator"),b7}var w7={},S7;function Boe(){if(S7)return w7;S7=1;var t=Ht();return t("dispose"),w7}var _7={},E7;function jje(){if(E7)return _7;E7=1;var t=Ht();return t("hasInstance"),_7}var C7={},N7;function Pje(){if(N7)return C7;N7=1;var t=Ht();return t("isConcatSpreadable"),C7}var k7={},T7;function zoe(){if(T7)return k7;T7=1;var t=Ht();return t("iterator"),k7}var O7={},j7;function Ije(){if(j7)return O7;j7=1;var t=Ht();return t("match"),O7}var P7={},I7;function Rje(){if(I7)return P7;I7=1;var t=Ht();return t("matchAll"),P7}var R7={},M7;function Mje(){if(M7)return R7;M7=1;var t=Ht();return t("replace"),R7}var A7={},D7;function Aje(){if(D7)return A7;D7=1;var t=Ht();return t("search"),A7}var $7={},F7;function Dje(){if(F7)return $7;F7=1;var t=Ht();return t("species"),$7}var q7={},L7;function $je(){if(L7)return q7;L7=1;var t=Ht();return t("split"),q7}var B7={},z7;function Voe(){if(z7)return B7;z7=1;var t=Ht(),e=Aoe();return t("toPrimitive"),e(),B7}var V7={},U7;function Fje(){if(U7)return V7;U7=1;var t=wi(),e=Ht(),r=su();return e("toStringTag"),r(t("Symbol"),"Symbol"),V7}var H7={},W7;function qje(){if(W7)return H7;W7=1;var t=Ht();return t("unscopables"),H7}var K7={},G7;function Lje(){if(G7)return K7;G7=1;var t=Dt(),e=su();return e(t.JSON,"JSON",!0),K7}var mk,Y7;function Bje(){if(Y7)return mk;Y7=1,Moe(),qoe(),Loe(),Oje(),Boe(),jje(),Pje(),zoe(),Ije(),Rje(),Mje(),Aje(),Dje(),$je(),Voe(),Fje(),qje(),Lje();var t=mt();return mk=t.Symbol,mk}var Q7={},gk,X7;function JA(){return X7||(X7=1,gk=function(){}),gk}var yk,J7;function Ph(){return J7||(J7=1,yk={}),yk}var vk,Z7;function zje(){if(Z7)return vk;Z7=1;var t=lr(),e=nn(),r=Function.prototype,n=t&&Object.getOwnPropertyDescriptor,i=e(r,"name"),s=i&&(function(){}).name==="something",o=i&&(!t||t&&n(r,"name").configurable);return vk={EXISTS:i,PROPER:s,CONFIGURABLE:o},vk}var bk,eW;function Uoe(){if(eW)return bk;eW=1;var t=Ze();return bk=!t(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),bk}var xk,tW;function Sb(){if(tW)return xk;tW=1;var t=nn(),e=Hr(),r=Si(),n=bb(),i=Uoe(),s=n("IE_PROTO"),o=Object,a=o.prototype;return xk=i?o.getPrototypeOf:function(l){var c=r(l);if(t(c,s))return c[s];var u=c.constructor;return e(u)&&c instanceof u?u.prototype:c instanceof o?a:null},xk}var wk,rW;function Hoe(){if(rW)return wk;rW=1;var t=Ze(),e=Hr(),r=Wr(),n=Pm(),i=Sb(),s=Im(),o=wr(),a=Ch(),l=o("iterator"),c=!1,u,h,f;[].keys&&(f=[].keys(),"next"in f?(h=i(i(f)),h!==Object.prototype&&(u=h)):c=!0);var p=!r(u)||t(function(){var m={};return u[l].call(m)!==m});return p?u={}:a&&(u=n(u)),e(u[l])||s(u,l,function(){return this}),wk={IteratorPrototype:u,BUGGY_SAFARI_ITERATORS:c},wk}var Sk,nW;function Vje(){if(nW)return Sk;nW=1;var t=Hoe().IteratorPrototype,e=Pm(),r=Cm(),n=su(),i=Ph(),s=function(){return this};return Sk=function(o,a,l,c){var u=a+" Iterator";return o.prototype=e(t,{next:r(+!c,l)}),n(o,u,!1,!0),i[u]=s,o},Sk}var _k,iW;function Uje(){if(iW)return _k;iW=1;var t=rt(),e=Uo();return _k=function(r,n,i){try{return t(e(Object.getOwnPropertyDescriptor(r,n)[i]))}catch{}},_k}var Ek,sW;function Hje(){if(sW)return Ek;sW=1;var t=Wr();return Ek=function(e){return t(e)||e===null},Ek}var Ck,oW;function Wje(){if(oW)return Ck;oW=1;var t=Hje(),e=String,r=TypeError;return Ck=function(n){if(t(n))return n;throw new r("Can't set "+e(n)+" as a prototype")},Ck}var Nk,aW;function Kje(){if(aW)return Nk;aW=1;var t=Uje(),e=Wr(),r=Vo(),n=Wje();return Nk=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,s={},o;try{o=t(Object.prototype,"__proto__","set"),o(s,[]),i=s instanceof Array}catch{}return function(l,c){return r(l),n(c),e(l)&&(i?o(l,c):l.__proto__=c),l}}():void 0),Nk}var kk,lW;function ZA(){if(lW)return kk;lW=1;var t=Oe(),e=si(),r=Ch(),n=zje(),i=Hr(),s=Vje(),o=Sb(),a=Kje(),l=su(),c=kh(),u=Im(),h=wr(),f=Ph(),p=Hoe(),m=n.PROPER,g=n.CONFIGURABLE,v=p.IteratorPrototype,y=p.BUGGY_SAFARI_ITERATORS,b=h("iterator"),w="keys",x="values",S="entries",_=function(){return this};return kk=function(C,E,N,T,j,P,O){s(N,E,T);var D=function(Q){if(Q===j&&$)return $;if(!y&&Q&&Q in B)return B[Q];switch(Q){case w:return function(){return new N(this,Q)};case x:return function(){return new N(this,Q)};case S:return function(){return new N(this,Q)}}return function(){return new N(this)}},z=E+" Iterator",R=!1,B=C.prototype,q=B[b]||B["@@iterator"]||j&&B[j],$=!y&&q||D(j),K=E==="Array"&&B.entries||q,W,F,X;if(K&&(W=o(K.call(new C)),W!==Object.prototype&&W.next&&(!r&&o(W)!==v&&(a?a(W,v):i(W[b])||u(W,b,_)),l(W,z,!0,!0),r&&(f[z]=_))),m&&j===x&&q&&q.name!==x&&(!r&&g?c(B,"name",x):(R=!0,$=function(){return e(q,this)})),j)if(F={values:D(x),keys:P?$:D(w),entries:D(S)},O)for(X in F)(y||R||!(X in B))&&u(B,X,F[X]);else t({target:E,proto:!0,forced:y||R},F);return(!r||O)&&B[b]!==$&&u(B,b,$,{name:j}),f[E]=$,F},kk}var Tk,cW;function eD(){return cW||(cW=1,Tk=function(t,e){return{value:t,done:e}}),Tk}var Ok,uW;function Ih(){if(uW)return Ok;uW=1;var t=vs(),e=JA(),r=Ph(),n=ou(),i=Ki().f,s=ZA(),o=eD(),a=Ch(),l=lr(),c="Array Iterator",u=n.set,h=n.getterFor(c);Ok=s(Array,"Array",function(p,m){u(this,{type:c,target:t(p),index:0,kind:m})},function(){var p=h(this),m=p.target,g=p.index++;if(!m||g>=m.length)return p.target=null,o(void 0,!0);switch(p.kind){case"keys":return o(g,!1);case"values":return o(m[g],!1)}return o([g,m[g]],!1)},"values");var f=r.Arguments=r.Array;if(e("keys"),e("values"),e("entries"),!a&&l&&f.name!=="values")try{i(f,"name",{value:"values"})}catch{}return Ok}var jk,dW;function Gje(){return dW||(dW=1,jk={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),jk}var hW;function Rh(){if(hW)return Q7;hW=1,Ih();var t=Gje(),e=Dt(),r=su(),n=Ph();for(var i in t)r(e[i],i),n[i]=n.Array;return Q7}var Pk,fW;function Woe(){if(fW)return Pk;fW=1;var t=Bje();return Rh(),Pk=t,Pk}var Ik,pW;function Yje(){return pW||(pW=1,Ik=Woe()),Ik}var Qje=Yje(),Xje=$e(Qje),mW={},gW;function Jje(){if(gW)return mW;gW=1;var t=Oe(),e=iu(),r=Roe(),n=Wr(),i=gb(),s=Ho(),o=vs(),a=vb(),l=wr(),c=jm(),u=Oh(),h=c("slice"),f=l("species"),p=Array,m=Math.max;return t({target:"Array",proto:!0,forced:!h},{slice:function(v,y){var b=o(this),w=s(b),x=i(v,w),S=i(y===void 0?w:y,w),_,C,E;if(e(b)&&(_=b.constructor,r(_)&&(_===p||e(_.prototype))?_=void 0:n(_)&&(_=_[f],_===null&&(_=void 0)),_===p||_===void 0))return u(b,x,S);for(C=new(_===void 0?p:_)(m(S-x,0)),E=0;x<S;x++,E++)x in b&&a(C,E,b[x]);return C.length=E,C}}),mW}var Rk,yW;function Zje(){if(yW)return Rk;yW=1,Jje();var t=sn();return Rk=t("Array","slice"),Rk}var Mk,vW;function ePe(){if(vW)return Mk;vW=1;var t=xr(),e=Zje(),r=Array.prototype;return Mk=function(n){var i=n.slice;return n===r||t(r,n)&&i===r.slice?e:i},Mk}var Ak,bW;function tPe(){if(bW)return Ak;bW=1;var t=ePe();return Ak=t,Ak}var Dk,xW;function rPe(){return xW||(xW=1,Dk=tPe()),Dk}var nPe=rPe(),Ps=$e(nPe),$k,wW;function iPe(){if(wW)return $k;wW=1;var t=wi(),e=rt(),r=xb(),n=yb(),i=Hs(),s=e([].concat);return $k=t("Reflect","ownKeys")||function(a){var l=r.f(i(a)),c=n.f;return c?s(l,c(a)):l},$k}var SW={},_W;function sPe(){if(_W)return SW;_W=1;var t=Oe(),e=iu();return t({target:"Array",stat:!0},{isArray:e}),SW}var Fk,EW;function oPe(){if(EW)return Fk;EW=1,sPe();var t=mt();return Fk=t.Array.isArray,Fk}var qk,CW;function aPe(){if(CW)return qk;CW=1;var t=oPe();return qk=t,qk}var Lk,NW;function lPe(){return NW||(NW=1,Lk=aPe()),Lk}var cPe=lPe(),tr=$e(cPe),kW={},TW;function uPe(){if(TW)return kW;TW=1;var t=Oe(),e=gl().map,r=jm(),n=r("map");return t({target:"Array",proto:!0,forced:!n},{map:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),kW}var Bk,OW;function dPe(){if(OW)return Bk;OW=1,uPe();var t=sn();return Bk=t("Array","map"),Bk}var zk,jW;function hPe(){if(jW)return zk;jW=1;var t=xr(),e=dPe(),r=Array.prototype;return zk=function(n){var i=n.map;return n===r||t(r,n)&&i===r.map?e:i},zk}var Vk,PW;function fPe(){if(PW)return Vk;PW=1;var t=hPe();return Vk=t,Vk}var Uk,IW;function pPe(){return IW||(IW=1,Uk=fPe()),Uk}var mPe=pPe(),Qd=$e(mPe),RW={},MW;function gPe(){if(MW)return RW;MW=1;var t=Oe(),e=Si(),r=Om(),n=Ze(),i=n(function(){r(1)});return t({target:"Object",stat:!0,forced:i},{keys:function(o){return r(e(o))}}),RW}var Hk,AW;function yPe(){if(AW)return Hk;AW=1,gPe();var t=mt();return Hk=t.Object.keys,Hk}var Wk,DW;function vPe(){if(DW)return Wk;DW=1;var t=yPe();return Wk=t,Wk}var Kk,$W;function bPe(){return $W||($W=1,Kk=vPe()),Kk}var xPe=bPe(),Xt=$e(xPe),FW={},qW;function wPe(){if(qW)return FW;qW=1;var t=Oe(),e=rt(),r=Date,n=e(r.prototype.getTime);return t({target:"Date",stat:!0},{now:function(){return n(new r)}}),FW}var Gk,LW;function SPe(){if(LW)return Gk;LW=1,wPe();var t=mt();return Gk=t.Date.now,Gk}var Yk,BW;function _Pe(){if(BW)return Yk;BW=1;var t=SPe();return Yk=t,Yk}var Qk,zW;function EPe(){return zW||(zW=1,Qk=_Pe()),Qk}var CPe=EPe(),Kv=$e(CPe),VW={},Xk,UW;function Mh(){if(UW)return Xk;UW=1;var t=Ze();return Xk=function(e,r){var n=[][e];return!!n&&t(function(){n.call(null,r||function(){return 1},1)})},Xk}var Jk,HW;function NPe(){if(HW)return Jk;HW=1;var t=gl().forEach,e=Mh(),r=e("forEach");return Jk=r?[].forEach:function(i){return t(this,i,arguments.length>1?arguments[1]:void 0)},Jk}var WW;function kPe(){if(WW)return VW;WW=1;var t=Oe(),e=NPe();return t({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),VW}var Zk,KW;function TPe(){if(KW)return Zk;KW=1,kPe();var t=sn();return Zk=t("Array","forEach"),Zk}var e2,GW;function OPe(){if(GW)return e2;GW=1;var t=TPe();return e2=t,e2}var t2,YW;function jPe(){if(YW)return t2;YW=1;var t=jh(),e=nn(),r=xr(),n=OPe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return t2=function(o){var a=o.forEach;return o===i||r(i,o)&&a===i.forEach||e(s,t(o))?n:a},t2}var r2,QW;function PPe(){return QW||(QW=1,r2=jPe()),r2}var IPe=PPe(),xt=$e(IPe),XW={},JW;function RPe(){if(JW)return XW;JW=1;var t=Oe(),e=rt(),r=iu(),n=e([].reverse),i=[1,2];return t({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),n(this)}}),XW}var n2,ZW;function MPe(){if(ZW)return n2;ZW=1,RPe();var t=sn();return n2=t("Array","reverse"),n2}var i2,e9;function APe(){if(e9)return i2;e9=1;var t=xr(),e=MPe(),r=Array.prototype;return i2=function(n){var i=n.reverse;return n===r||t(r,n)&&i===r.reverse?e:i},i2}var s2,t9;function DPe(){if(t9)return s2;t9=1;var t=APe();return s2=t,s2}var o2,r9;function $Pe(){return r9||(r9=1,o2=DPe()),o2}var FPe=$Pe(),dc=$e(FPe),n9={},a2,i9;function qPe(){if(i9)return a2;i9=1;var t=lr(),e=iu(),r=TypeError,n=Object.getOwnPropertyDescriptor,i=t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(s){return s instanceof TypeError}}();return a2=i?function(s,o){if(e(s)&&!n(s,"length").writable)throw new r("Cannot set read only .length");return s.length=o}:function(s,o){return s.length=o},a2}var l2,s9;function Koe(){if(s9)return l2;s9=1;var t=Eh(),e=TypeError;return l2=function(r,n){if(!delete r[n])throw new e("Cannot delete property "+t(n)+" of "+t(r))},l2}var o9;function LPe(){if(o9)return n9;o9=1;var t=Oe(),e=Si(),r=gb(),n=Th(),i=Ho(),s=qPe(),o=Ioe(),a=GA(),l=vb(),c=Koe(),u=jm(),h=u("splice"),f=Math.max,p=Math.min;return t({target:"Array",proto:!0,forced:!h},{splice:function(g,v){var y=e(this),b=i(y),w=r(g,b),x=arguments.length,S,_,C,E,N,T;for(x===0?S=_=0:x===1?(S=0,_=b-w):(S=x-2,_=p(f(n(v),0),b-w)),o(b+S-_),C=a(y,_),E=0;E<_;E++)N=w+E,N in y&&l(C,E,y[N]);if(C.length=_,S<_){for(E=w;E<b-_;E++)N=E+_,T=E+S,N in y?y[T]=y[N]:c(y,T);for(E=b;E>b-_+S;E--)c(y,E-1)}else if(S>_)for(E=b-_;E>w;E--)N=E+_-1,T=E+S-1,N in y?y[T]=y[N]:c(y,T);for(E=0;E<S;E++)y[E+w]=arguments[E+2];return s(y,b-_+S),C}}),n9}var c2,a9;function BPe(){if(a9)return c2;a9=1,LPe();var t=sn();return c2=t("Array","splice"),c2}var u2,l9;function zPe(){if(l9)return u2;l9=1;var t=xr(),e=BPe(),r=Array.prototype;return u2=function(n){var i=n.splice;return n===r||t(r,n)&&i===r.splice?e:i},u2}var d2,c9;function VPe(){if(c9)return d2;c9=1;var t=zPe();return d2=t,d2}var h2,u9;function UPe(){return u9||(u9=1,h2=VPe()),h2}var HPe=UPe(),_o=$e(HPe),d9={},h9;function WPe(){if(h9)return d9;h9=1;var t=Oe(),e=UA().includes,r=Ze(),n=JA(),i=r(function(){return!Array(1).includes()});return t({target:"Array",proto:!0,forced:i},{includes:function(o){return e(this,o,arguments.length>1?arguments[1]:void 0)}}),n("includes"),d9}var f2,f9;function KPe(){if(f9)return f2;f9=1,WPe();var t=sn();return f2=t("Array","includes"),f2}var p9={},p2,m9;function GPe(){if(m9)return p2;m9=1;var t=Wr(),e=Us(),r=wr(),n=r("match");return p2=function(i){var s;return t(i)&&((s=i[n])!==void 0?!!s:e(i)==="RegExp")},p2}var m2,g9;function YPe(){if(g9)return m2;g9=1;var t=GPe(),e=TypeError;return m2=function(r){if(t(r))throw new e("The method doesn't accept regular expressions");return r},m2}var g2,y9;function QPe(){if(y9)return g2;y9=1;var t=wr(),e=t("match");return g2=function(r){var n=/./;try{"/./"[r](n)}catch{try{return n[e]=!1,"/./"[r](n)}catch{}}return!1},g2}var v9;function XPe(){if(v9)return p9;v9=1;var t=Oe(),e=rt(),r=YPe(),n=Vo(),i=Gi(),s=QPe(),o=e("".indexOf);return t({target:"String",proto:!0,forced:!s("includes")},{includes:function(l){return!!~o(i(n(this)),i(r(l)),arguments.length>1?arguments[1]:void 0)}}),p9}var y2,b9;function JPe(){if(b9)return y2;b9=1,XPe();var t=sn();return y2=t("String","includes"),y2}var v2,x9;function ZPe(){if(x9)return v2;x9=1;var t=xr(),e=KPe(),r=JPe(),n=Array.prototype,i=String.prototype;return v2=function(s){var o=s.includes;return s===n||t(n,s)&&o===n.includes?e:typeof s=="string"||s===i||t(i,s)&&o===i.includes?r:o},v2}var b2,w9;function eIe(){if(w9)return b2;w9=1;var t=ZPe();return b2=t,b2}var x2,S9;function tIe(){return S9||(S9=1,x2=eIe()),x2}var rIe=tIe(),Ka=$e(rIe),_9={},E9;function nIe(){if(E9)return _9;E9=1;var t=Oe(),e=Ze(),r=Si(),n=Sb(),i=Uoe(),s=e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getPrototypeOf:function(a){return n(r(a))}}),_9}var w2,C9;function iIe(){if(C9)return w2;C9=1,nIe();var t=mt();return w2=t.Object.getPrototypeOf,w2}var S2,N9;function sIe(){if(N9)return S2;N9=1;var t=iIe();return S2=t,S2}var _2,k9;function oIe(){return k9||(k9=1,_2=sIe()),_2}var aIe=oIe(),T9=$e(aIe),E2,O9;function lIe(){if(O9)return E2;O9=1,Moe();var t=sn();return E2=t("Array","concat"),E2}var C2,j9;function cIe(){if(j9)return C2;j9=1;var t=xr(),e=lIe(),r=Array.prototype;return C2=function(n){var i=n.concat;return n===r||t(r,n)&&i===r.concat?e:i},C2}var N2,P9;function uIe(){if(P9)return N2;P9=1;var t=cIe();return N2=t,N2}var k2,I9;function dIe(){return I9||(I9=1,k2=uIe()),k2}var hIe=dIe(),fIe=$e(hIe),R9={},M9;function pIe(){if(M9)return R9;M9=1;var t=Oe(),e=gl().filter,r=jm(),n=r("filter");return t({target:"Array",proto:!0,forced:!n},{filter:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),R9}var T2,A9;function mIe(){if(A9)return T2;A9=1,pIe();var t=sn();return T2=t("Array","filter"),T2}var O2,D9;function gIe(){if(D9)return O2;D9=1;var t=xr(),e=mIe(),r=Array.prototype;return O2=function(n){var i=n.filter;return n===r||t(r,n)&&i===r.filter?e:i},O2}var j2,$9;function yIe(){if($9)return j2;$9=1;var t=gIe();return j2=t,j2}var P2,F9;function vIe(){return F9||(F9=1,P2=yIe()),P2}var bIe=vIe(),Hn=$e(bIe),q9={},I2,L9;function xIe(){if(L9)return I2;L9=1;var t=lr(),e=Ze(),r=rt(),n=Sb(),i=Om(),s=vs(),o=db().f,a=r(o),l=r([].push),c=t&&e(function(){var h=Object.create(null);return h[2]=2,!a(h,2)}),u=function(h){return function(f){for(var p=s(f),m=i(p),g=c&&n(p)===null,v=m.length,y=0,b=[],w;v>y;)w=m[y++],(!t||(g?w in p:a(p,w)))&&l(b,h?[w,p[w]]:p[w]);return b}};return I2={entries:u(!0),values:u(!1)},I2}var B9;function wIe(){if(B9)return q9;B9=1;var t=Oe(),e=xIe().values;return t({target:"Object",stat:!0},{values:function(n){return e(n)}}),q9}var R2,z9;function SIe(){if(z9)return R2;z9=1,wIe();var t=mt();return R2=t.Object.values,R2}var M2,V9;function _Ie(){if(V9)return M2;V9=1;var t=SIe();return M2=t,M2}var A2,U9;function EIe(){return U9||(U9=1,A2=_Ie()),A2}var CIe=EIe(),NIe=$e(CIe),H9={},D2,W9;function tD(){return W9||(W9=1,D2=`	
\v\f\r \u2028\u2029\uFEFF`),D2}var $2,K9;function Goe(){if(K9)return $2;K9=1;var t=rt(),e=Vo(),r=Gi(),n=tD(),i=t("".replace),s=RegExp("^["+n+"]+"),o=RegExp("(^|[^"+n+"])["+n+"]+$"),a=function(l){return function(c){var u=r(e(c));return l&1&&(u=i(u,s,"")),l&2&&(u=i(u,o,"$1")),u}};return $2={start:a(1),end:a(2),trim:a(3)},$2}var F2,G9;function kIe(){if(G9)return F2;G9=1;var t=Dt(),e=Ze(),r=rt(),n=Gi(),i=Goe().trim,s=tD(),o=t.parseInt,a=t.Symbol,l=a&&a.iterator,c=/^[+-]?0x/i,u=r(c.exec),h=o(s+"08")!==8||o(s+"0x16")!==22||l&&!e(function(){o(Object(l))});return F2=h?function(p,m){var g=i(n(p));return o(g,m>>>0||(u(c,g)?16:10))}:o,F2}var Y9;function TIe(){if(Y9)return H9;Y9=1;var t=Oe(),e=kIe();return t({global:!0,forced:parseInt!==e},{parseInt:e}),H9}var q2,Q9;function OIe(){if(Q9)return q2;Q9=1,TIe();var t=mt();return q2=t.parseInt,q2}var L2,X9;function jIe(){if(X9)return L2;X9=1;var t=OIe();return L2=t,L2}var B2,J9;function PIe(){return J9||(J9=1,B2=jIe()),B2}var IIe=PIe(),ss=$e(IIe),Z9={},eK;function RIe(){if(eK)return Z9;eK=1;var t=Oe(),e=LA(),r=UA().indexOf,n=Mh(),i=e([].indexOf),s=!!i&&1/i([1],1,-0)<0,o=s||!n("indexOf");return t({target:"Array",proto:!0,forced:o},{indexOf:function(l){var c=arguments.length>1?arguments[1]:void 0;return s?i(this,l,c)||0:r(this,l,c)}}),Z9}var z2,tK;function MIe(){if(tK)return z2;tK=1,RIe();var t=sn();return z2=t("Array","indexOf"),z2}var V2,rK;function AIe(){if(rK)return V2;rK=1;var t=xr(),e=MIe(),r=Array.prototype;return V2=function(n){var i=n.indexOf;return n===r||t(r,n)&&i===r.indexOf?e:i},V2}var U2,nK;function DIe(){if(nK)return U2;nK=1;var t=AIe();return U2=t,U2}var H2,iK;function $Ie(){return iK||(iK=1,H2=DIe()),H2}var FIe=$Ie(),ht=$e(FIe),sK={},oK;function qIe(){if(oK)return sK;oK=1;var t=Oe(),e=lr(),r=Pm();return t({target:"Object",stat:!0,sham:!e},{create:r}),sK}var W2,aK;function LIe(){if(aK)return W2;aK=1,qIe();var t=mt(),e=t.Object;return W2=function(n,i){return e.create(n,i)},W2}var K2,lK;function BIe(){if(lK)return K2;lK=1;var t=LIe();return K2=t,K2}var G2,cK;function zIe(){return cK||(cK=1,G2=BIe()),G2}var VIe=zIe(),hc=$e(VIe),uK={},Y2,dK;function UIe(){if(dK)return Y2;dK=1;var t=Th(),e=Gi(),r=Vo(),n=RangeError;return Y2=function(s){var o=e(r(this)),a="",l=t(s);if(l<0||l===1/0)throw new n("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(o+=o))l&1&&(a+=o);return a},Y2}var Q2,hK;function HIe(){if(hK)return Q2;hK=1;var t=rt(),e=Noe(),r=Gi(),n=UIe(),i=Vo(),s=t(n),o=t("".slice),a=Math.ceil,l=function(c){return function(u,h,f){var p=r(i(u)),m=e(h),g=p.length,v=f===void 0?" ":r(f),y,b;return m<=g||v===""?p:(y=m-g,b=s(v,a(y/v.length)),b.length>y&&(b=o(b,0,y)),c?p+b:b+p)}};return Q2={start:l(!1),end:l(!0)},Q2}var X2,fK;function WIe(){if(fK)return X2;fK=1;var t=rt(),e=Ze(),r=HIe().start,n=RangeError,i=isFinite,s=Math.abs,o=Date.prototype,a=o.toISOString,l=t(o.getTime),c=t(o.getUTCDate),u=t(o.getUTCFullYear),h=t(o.getUTCHours),f=t(o.getUTCMilliseconds),p=t(o.getUTCMinutes),m=t(o.getUTCMonth),g=t(o.getUTCSeconds);return X2=e(function(){return a.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){a.call(new Date(NaN))})?function(){if(!i(l(this)))throw new n("Invalid time value");var y=this,b=u(y),w=f(y),x=b<0?"-":b>9999?"+":"";return x+r(s(b),x?6:4,0)+"-"+r(m(y)+1,2,0)+"-"+r(c(y),2,0)+"T"+r(h(y),2,0)+":"+r(p(y),2,0)+":"+r(g(y),2,0)+"."+r(w,3,0)+"Z"}:a,X2}var pK;function KIe(){if(pK)return uK;pK=1;var t=Oe(),e=si(),r=Si(),n=Soe(),i=WIe(),s=Us(),o=Ze(),a=o(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return t({target:"Date",proto:!0,forced:a},{toJSON:function(c){var u=r(this),h=n(u,"number");return typeof h=="number"&&!isFinite(h)?null:!("toISOString"in u)&&s(u)==="Date"?e(i,u):u.toISOString()}}),uK}var J2,mK;function GIe(){if(mK)return J2;mK=1,KIe(),Foe();var t=mt(),e=ub();return t.JSON||(t.JSON={stringify:JSON.stringify}),J2=function(n,i,s){return e(t.JSON.stringify,null,arguments)},J2}var Z2,gK;function YIe(){if(gK)return Z2;gK=1;var t=GIe();return Z2=t,Z2}var eT,yK;function QIe(){return yK||(yK=1,eT=YIe()),eT}var XIe=QIe(),Rm=$e(XIe),vK={},bK={},tT,xK;function Yoe(){if(xK)return tT;xK=1;var t=Dt(),e=Sh(),r=Us(),n=function(i){return e.slice(0,i.length)===i};return tT=function(){return n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":t.Bun&&typeof Bun.version=="string"?"BUN":t.Deno&&typeof Deno.version=="object"?"DENO":r(t.process)==="process"?"NODE":t.window&&t.document?"BROWSER":"REST"}(),tT}var rT,wK;function JIe(){if(wK)return rT;wK=1;var t=TypeError;return rT=function(e,r){if(e<r)throw new t("Not enough arguments");return e},rT}var nT,SK;function Qoe(){if(SK)return nT;SK=1;var t=Dt(),e=ub(),r=Hr(),n=Yoe(),i=Sh(),s=Oh(),o=JIe(),a=t.Function,l=/MSIE .\./.test(i)||n==="BUN"&&function(){var c=t.Bun.version.split(".");return c.length<3||c[0]==="0"&&(c[1]<3||c[1]==="3"&&c[2]==="0")}();return nT=function(c,u){var h=u?2:1;return l?function(f,p){var m=o(arguments.length,1)>h,g=r(f)?f:a(f),v=m?s(arguments,h):[],y=m?function(){e(g,this,v)}:g;return u?c(y,p):c(y)}:c},nT}var _K;function ZIe(){if(_K)return bK;_K=1;var t=Oe(),e=Dt(),r=Qoe(),n=r(e.setInterval,!0);return t({global:!0,bind:!0,forced:e.setInterval!==n},{setInterval:n}),bK}var EK={},CK;function eRe(){if(CK)return EK;CK=1;var t=Oe(),e=Dt(),r=Qoe(),n=r(e.setTimeout,!0);return t({global:!0,bind:!0,forced:e.setTimeout!==n},{setTimeout:n}),EK}var NK;function Xoe(){return NK||(NK=1,ZIe(),eRe()),vK}var iT,kK;function tRe(){if(kK)return iT;kK=1,Xoe();var t=mt();return iT=t.setTimeout,iT}var sT,TK;function rRe(){return TK||(TK=1,sT=tRe()),sT}var nRe=rRe(),Eo=$e(nRe),OK={},oT,jK;function iRe(){if(jK)return oT;jK=1;var t=Si(),e=gb(),r=Ho();return oT=function(i){for(var s=t(this),o=r(s),a=arguments.length,l=e(a>1?arguments[1]:void 0,o),c=a>2?arguments[2]:void 0,u=c===void 0?o:e(c,o);u>l;)s[l++]=i;return s},oT}var PK;function sRe(){if(PK)return OK;PK=1;var t=Oe(),e=iRe(),r=JA();return t({target:"Array",proto:!0},{fill:e}),r("fill"),OK}var aT,IK;function oRe(){if(IK)return aT;IK=1,sRe();var t=sn();return aT=t("Array","fill"),aT}var lT,RK;function aRe(){if(RK)return lT;RK=1;var t=xr(),e=oRe(),r=Array.prototype;return lT=function(n){var i=n.fill;return n===r||t(r,n)&&i===r.fill?e:i},lT}var cT,MK;function lRe(){if(MK)return cT;MK=1;var t=aRe();return cT=t,cT}var uT,AK;function cRe(){return AK||(AK=1,uT=lRe()),uT}var uRe=cRe(),Mm=$e(uRe);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function ps(){return ps=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ps.apply(this,arguments)}function Yi(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function $g(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var GI;typeof Object.assign!="function"?GI=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])}return r}:GI=Object.assign;var $c=GI,DK=["","webkit","Moz","MS","ms","o"],dRe=typeof document>"u"?{style:{}}:document.createElement("div"),hRe="function",Gu=Math.round,Fc=Math.abs,rD=Date.now;function _b(t,e){for(var r,n,i=e[0].toUpperCase()+e.slice(1),s=0;s<DK.length;){if(r=DK[s],n=r?r+i:e,n in t)return n;s++}}var Co;typeof window>"u"?Co={}:Co=window;var Joe=_b(dRe.style,"touchAction"),Zoe=Joe!==void 0;function fRe(){if(!Zoe)return!1;var t={},e=Co.CSS&&Co.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){return t[r]=e?Co.CSS.supports("touch-action",r):!0}),t}var eae="compute",tae="auto",YI="manipulation",fc="none",jp="pan-x",Pp="pan-y",Fg=fRe(),pRe=/mobile|tablet|ip(ad|hone|od)|android/i,rae="ontouchstart"in Co,mRe=_b(Co,"PointerEvent")!==void 0,gRe=rae&&pRe.test(navigator.userAgent),Am="touch",yRe="pen",nD="mouse",vRe="kinect",bRe=25,Rn=1,au=2,mr=4,ri=8,Gv=1,Dm=2,$m=4,Fm=8,Xd=16,Ls=Dm|$m,pc=Fm|Xd,nae=Ls|pc,iae=["x","y"],Yv=["clientX","clientY"];function No(t,e,r){var n;if(t)if(t.forEach)t.forEach(e,r);else if(t.length!==void 0)for(n=0;n<t.length;)e.call(r,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t)}function Eb(t,e){return typeof t===hRe?t.apply(e&&e[0]||void 0,e):t}function Ul(t,e){return t.indexOf(e)>-1}function xRe(t){if(Ul(t,fc))return fc;var e=Ul(t,jp),r=Ul(t,Pp);return e&&r?fc:e||r?e?jp:Pp:Ul(t,YI)?YI:tae}var sae=function(){function t(r,n){this.manager=r,this.set(n)}var e=t.prototype;return e.set=function(n){n===eae&&(n=this.compute()),Zoe&&this.manager.element.style&&Fg[n]&&(this.manager.element.style[Joe]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return No(this.manager.recognizers,function(i){Eb(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),xRe(n.join(" "))},e.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=Ul(o,fc)&&!Fg[fc],l=Ul(o,Pp)&&!Fg[Pp],c=Ul(o,jp)&&!Fg[jp];if(a){var u=n.pointers.length===1,h=n.distance<2,f=n.deltaTime<250;if(u&&h&&f)return}if(!(c&&l)&&(a||l&&s&Ls||c&&s&pc))return this.preventSrc(i)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},t}();function iD(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function oae(t){var e=t.length;if(e===1)return{x:Gu(t[0].clientX),y:Gu(t[0].clientY)};for(var r=0,n=0,i=0;i<e;)r+=t[i].clientX,n+=t[i].clientY,i++;return{x:Gu(r/e),y:Gu(n/e)}}function $K(t){for(var e=[],r=0;r<t.pointers.length;)e[r]={clientX:Gu(t.pointers[r].clientX),clientY:Gu(t.pointers[r].clientY)},r++;return{timeStamp:rD(),pointers:e,center:oae(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Qv(t,e,r){r||(r=iae);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.sqrt(n*n+i*i)}function QI(t,e,r){r||(r=iae);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.atan2(i,n)*180/Math.PI}function aae(t,e){return t===e?Gv:Fc(t)>=Fc(e)?t<0?Dm:$m:e<0?Fm:Xd}function wRe(t,e){var r=e.center,n=t.offsetDelta||{},i=t.prevDelta||{},s=t.prevInput||{};(e.eventType===Rn||s.eventType===mr)&&(i=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:r.x,y:r.y}),e.deltaX=i.x+(r.x-n.x),e.deltaY=i.y+(r.y-n.y)}function lae(t,e,r){return{x:e/t||0,y:r/t||0}}function SRe(t,e){return Qv(e[0],e[1],Yv)/Qv(t[0],t[1],Yv)}function _Re(t,e){return QI(e[1],e[0],Yv)+QI(t[1],t[0],Yv)}function ERe(t,e){var r=t.lastInterval||e,n=e.timeStamp-r.timeStamp,i,s,o,a;if(e.eventType!==ri&&(n>bRe||r.velocity===void 0)){var l=e.deltaX-r.deltaX,c=e.deltaY-r.deltaY,u=lae(n,l,c);s=u.x,o=u.y,i=Fc(u.x)>Fc(u.y)?u.x:u.y,a=aae(l,c),t.lastInterval=e}else i=r.velocity,s=r.velocityX,o=r.velocityY,a=r.direction;e.velocity=i,e.velocityX=s,e.velocityY=o,e.direction=a}function CRe(t,e){var r=t.session,n=e.pointers,i=n.length;r.firstInput||(r.firstInput=$K(e)),i>1&&!r.firstMultiple?r.firstMultiple=$K(e):i===1&&(r.firstMultiple=!1);var s=r.firstInput,o=r.firstMultiple,a=o?o.center:s.center,l=e.center=oae(n);e.timeStamp=rD(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=QI(a,l),e.distance=Qv(a,l),wRe(r,e),e.offsetDirection=aae(e.deltaX,e.deltaY);var c=lae(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=Fc(c.x)>Fc(c.y)?c.x:c.y,e.scale=o?SRe(o.pointers,n):1,e.rotation=o?_Re(o.pointers,n):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,ERe(r,e);var u=t.element,h=e.srcEvent,f;h.composedPath?f=h.composedPath()[0]:h.path?f=h.path[0]:f=h.target,iD(f,u)&&(u=f),e.target=u}function NRe(t,e,r){var n=r.pointers.length,i=r.changedPointers.length,s=e&Rn&&n-i===0,o=e&(mr|ri)&&n-i===0;r.isFirst=!!s,r.isFinal=!!o,s&&(t.session={}),r.eventType=e,CRe(t,r),t.emit("hammer.input",r),t.recognize(r),t.session.prevInput=r}function Ip(t){return t.trim().split(/\s+/g)}function Lf(t,e,r){No(Ip(e),function(n){t.addEventListener(n,r,!1)})}function Bf(t,e,r){No(Ip(e),function(n){t.removeEventListener(n,r,!1)})}function FK(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var Ah=function(){function t(r,n){var i=this;this.manager=r,this.callback=n,this.element=r.element,this.target=r.options.inputTarget,this.domHandler=function(s){Eb(r.options.enable,[r])&&i.handler(s)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&Lf(this.element,this.evEl,this.domHandler),this.evTarget&&Lf(this.target,this.evTarget,this.domHandler),this.evWin&&Lf(FK(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Bf(this.element,this.evEl,this.domHandler),this.evTarget&&Bf(this.target,this.evTarget,this.domHandler),this.evWin&&Bf(FK(this.element),this.evWin,this.domHandler)},t}();function qc(t,e,r){if(t.indexOf&&!r)return t.indexOf(e);for(var n=0;n<t.length;){if(r&&t[n][r]==e||!r&&t[n]===e)return n;n++}return-1}var kRe={pointerdown:Rn,pointermove:au,pointerup:mr,pointercancel:ri,pointerout:ri},TRe={2:Am,3:yRe,4:nD,5:vRe},cae="pointerdown",uae="pointermove pointerup pointercancel";Co.MSPointerEvent&&!Co.PointerEvent&&(cae="MSPointerDown",uae="MSPointerMove MSPointerUp MSPointerCancel");var dae=function(t){Yi(e,t);function e(){var n,i=e.prototype;return i.evEl=cae,i.evWin=uae,n=t.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var r=e.prototype;return r.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=kRe[a],c=TRe[i.pointerType]||i.pointerType,u=c===Am,h=qc(s,i.pointerId,"pointerId");l&Rn&&(i.button===0||u)?h<0&&(s.push(i),h=s.length-1):l&(mr|ri)&&(o=!0),!(h<0)&&(s[h]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:c,srcEvent:i}),o&&s.splice(h,1))},e}(Ah);function Rp(t){return Array.prototype.slice.call(t,0)}function sD(t,e,r){for(var n=[],i=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];qc(i,o)<0&&n.push(t[s]),i[s]=o,s++}return r&&(e?n=n.sort(function(a,l){return a[e]>l[e]}):n=n.sort()),n}var ORe={touchstart:Rn,touchmove:au,touchend:mr,touchcancel:ri},jRe="touchstart touchmove touchend touchcancel",oD=function(t){Yi(e,t);function e(){var n;return e.prototype.evTarget=jRe,n=t.apply(this,arguments)||this,n.targetIds={},n}var r=e.prototype;return r.handler=function(i){var s=ORe[i.type],o=PRe.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Am,srcEvent:i})},e}(Ah);function PRe(t,e){var r=Rp(t.touches),n=this.targetIds;if(e&(Rn|au)&&r.length===1)return n[r[0].identifier]=!0,[r,r];var i,s,o=Rp(t.changedTouches),a=[],l=this.target;if(s=r.filter(function(c){return iD(c.target,l)}),e===Rn)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&a.push(o[i]),e&(mr|ri)&&delete n[o[i].identifier],i++;if(a.length)return[sD(s.concat(a),"identifier",!0),a]}var IRe={mousedown:Rn,mousemove:au,mouseup:mr},RRe="mousedown",MRe="mousemove mouseup",aD=function(t){Yi(e,t);function e(){var n,i=e.prototype;return i.evEl=RRe,i.evWin=MRe,n=t.apply(this,arguments)||this,n.pressed=!1,n}var r=e.prototype;return r.handler=function(i){var s=IRe[i.type];s&Rn&&i.button===0&&(this.pressed=!0),s&au&&i.which!==1&&(s=mr),this.pressed&&(s&mr&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:nD,srcEvent:i}))},e}(Ah),ARe=2500,qK=25;function LK(t){var e=t.changedPointers,r=e[0];if(r.identifier===this.primaryTouch){var n={x:r.clientX,y:r.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=i.indexOf(n);a>-1&&i.splice(a,1)};setTimeout(s,ARe)}}function DRe(t,e){t&Rn?(this.primaryTouch=e.changedPointers[0].identifier,LK.call(this,e)):t&(mr|ri)&&LK.call(this,e)}function $Re(t){for(var e=t.srcEvent.clientX,r=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(e-i.x),o=Math.abs(r-i.y);if(s<=qK&&o<=qK)return!0}return!1}var hae=function(){var t=function(e){Yi(r,e);function r(i,s){var o;return o=e.call(this,i,s)||this,o.handler=function(a,l,c){var u=c.pointerType===Am,h=c.pointerType===nD;if(!(h&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(u)DRe.call($g($g(o)),l,c);else if(h&&$Re.call($g($g(o)),c))return;o.callback(a,l,c)}},o.touch=new oD(o.manager,o.handler),o.mouse=new aD(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=r.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},r}(Ah);return t}();function FRe(t){var e,r=t.options.inputClass;return r?e=r:mRe?e=dae:gRe?e=oD:rae?e=hae:e=aD,new e(t,NRe)}function Yu(t,e,r){return Array.isArray(t)?(No(t,r[e],r),!0):!1}var uy=1,zi=2,Jd=4,Ga=8,ko=Ga,Mp=16,Rs=32,qRe=1;function LRe(){return qRe++}function qg(t,e){var r=e.manager;return r?r.get(t):t}function BK(t){return t&Mp?"cancel":t&Ga?"end":t&Jd?"move":t&zi?"start":""}var qm=function(){function t(r){r===void 0&&(r={}),this.options=ps({enable:!0},r),this.id=LRe(),this.manager=null,this.state=uy,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(n){return $c(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(Yu(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=qg(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return Yu(n,"dropRecognizeWith",this)?this:(n=qg(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(Yu(n,"requireFailure",this))return this;var i=this.requireFail;return n=qg(n,this),qc(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(Yu(n,"dropRequireFailure",this))return this;n=qg(n,this);var i=qc(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var i=this,s=this.state;function o(a){i.manager.emit(a,n)}s<Ga&&o(i.options.event+BK(s)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),s>=Ga&&o(i.options.event+BK(s))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=Rs},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(Rs|uy)))return!1;n++}return!0},e.recognize=function(n){var i=$c({},n);if(!Eb(this.options.enable,[this,i])){this.reset(),this.state=Rs;return}this.state&(ko|Mp|Rs)&&(this.state=uy),this.state=this.process(i),this.state&(zi|Jd|Ga|Mp)&&this.tryEmit(i)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},t}(),XI=function(t){Yi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,ps({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var r=e.prototype;return r.getTouchAction=function(){return[YI]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime<o.time;if(this.reset(),i.eventType&Rn&&this.count===0)return this.failTimeout();if(l&&c&&a){if(i.eventType!==mr)return this.failTimeout();var u=this.pTime?i.timeStamp-this.pTime<o.interval:!0,h=!this.pCenter||Qv(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!h||!u?this.count=1:this.count+=1,this._input=i;var f=this.count%o.taps;if(f===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=ko,s.tryEmit()},o.interval),zi):ko}return Rs},r.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=Rs},this.options.interval),Rs},r.reset=function(){clearTimeout(this._timer)},r.emit=function(){this.state===ko&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(qm),Zd=function(t){Yi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ps({pointers:1},n))||this}var r=e.prototype;return r.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},r.process=function(i){var s=this.state,o=i.eventType,a=s&(zi|Jd),l=this.attrTest(i);return a&&(o&ri||!l)?s|Mp:a||l?o&mr?s|Ga:s&zi?s|Jd:zi:Rs},e}(qm);function fae(t){return t===Xd?"down":t===Fm?"up":t===Dm?"left":t===$m?"right":""}var lD=function(t){Yi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,ps({event:"pan",threshold:10,pointers:1,direction:nae},n))||this,i.pX=null,i.pY=null,i}var r=e.prototype;return r.getTouchAction=function(){var i=this.options.direction,s=[];return i&Ls&&s.push(Pp),i&pc&&s.push(jp),s},r.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,c=i.deltaX,u=i.deltaY;return l&s.direction||(s.direction&Ls?(l=c===0?Gv:c<0?Dm:$m,o=c!==this.pX,a=Math.abs(i.deltaX)):(l=u===0?Gv:u<0?Fm:Xd,o=u!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},r.attrTest=function(i){return Zd.prototype.attrTest.call(this,i)&&(this.state&zi||!(this.state&zi)&&this.directionTest(i))},r.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=fae(i.direction);s&&(i.additionalEvent=this.options.event+s),t.prototype.emit.call(this,i)},e}(Zd),pae=function(t){Yi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ps({event:"swipe",threshold:10,velocity:.3,direction:Ls|pc,pointers:1},n))||this}var r=e.prototype;return r.getTouchAction=function(){return lD.prototype.getTouchAction.call(this)},r.attrTest=function(i){var s=this.options.direction,o;return s&(Ls|pc)?o=i.overallVelocity:s&Ls?o=i.overallVelocityX:s&pc&&(o=i.overallVelocityY),t.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&Fc(o)>this.options.velocity&&i.eventType&mr},r.emit=function(i){var s=fae(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},e}(Zd),mae=function(t){Yi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ps({event:"pinch",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[fc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&zi)},r.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}t.prototype.emit.call(this,i)},e}(Zd),gae=function(t){Yi(e,t);function e(n){return n===void 0&&(n={}),t.call(this,ps({event:"rotate",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[fc]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&zi)},e}(Zd),yae=function(t){Yi(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,ps({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var r=e.prototype;return r.getTouchAction=function(){return[tae]},r.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(mr|ri)&&!c)this.reset();else if(i.eventType&Rn)this.reset(),this._timer=setTimeout(function(){s.state=ko,s.tryEmit()},o.time);else if(i.eventType&mr)return ko;return Rs},r.reset=function(){clearTimeout(this._timer)},r.emit=function(i){this.state===ko&&(i&&i.eventType&mr?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=rD(),this.manager.emit(this.options.event,this._input)))},e}(qm),vae={domEvents:!1,touchAction:eae,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},zK=[[gae,{enable:!1}],[mae,{enable:!1},["rotate"]],[pae,{direction:Ls}],[lD,{direction:Ls},["swipe"]],[XI],[XI,{event:"doubletap",taps:2},["tap"]],[yae]],BRe=1,VK=2;function UK(t,e){var r=t.element;if(r.style){var n;No(t.options.cssProps,function(i,s){n=_b(r.style,s),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function zRe(t,e){var r=document.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}var HK=function(){function t(r,n){var i=this;this.options=$c({},vae,n||{}),this.options.inputTarget=this.options.inputTarget||r,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=r,this.input=FRe(this),this.touchAction=new sae(this,this.options.touchAction),UK(this,!0),No(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var e=t.prototype;return e.set=function(n){return $c(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?VK:BRe},e.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&ko)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==VK&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(zi|Jd|Ga)&&(i.curRecognizer=s,a=s),l++}},e.get=function(n){if(n instanceof qm)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},e.add=function(n){if(Yu(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(Yu(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,o=qc(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},e.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return No(Ip(n),function(o){s[o]=s[o]||[],s[o].push(i)}),this},e.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return No(Ip(n),function(o){i?s[o]&&s[o].splice(qc(s[o],i),1):delete s[o]}),this},e.emit=function(n,i){this.options.domEvents&&zRe(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},e.destroy=function(){this.element&&UK(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),VRe={touchstart:Rn,touchmove:au,touchend:mr,touchcancel:ri},URe="touchstart",HRe="touchstart touchmove touchend touchcancel",WRe=function(t){Yi(e,t);function e(){var n,i=e.prototype;return i.evTarget=URe,i.evWin=HRe,n=t.apply(this,arguments)||this,n.started=!1,n}var r=e.prototype;return r.handler=function(i){var s=VRe[i.type];if(s===Rn&&(this.started=!0),!!this.started){var o=KRe.call(this,i,s);s&(mr|ri)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Am,srcEvent:i})}},e}(Ah);function KRe(t,e){var r=Rp(t.touches),n=Rp(t.changedTouches);return e&(mr|ri)&&(r=sD(r.concat(n),"identifier",!0)),[r,n]}function bae(t,e,r){var n="DEPRECATED METHOD: "+e+`
`+r+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),t.apply(this,arguments)}}var xae=bae(function(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;)(!r||r&&t[n[i]]===void 0)&&(t[n[i]]=e[n[i]]),i++;return t},"extend","Use `assign`."),GRe=bae(function(t,e){return xae(t,e,!0)},"merge","Use `assign`.");function YRe(t,e,r){var n=e.prototype,i;i=t.prototype=Object.create(n),i.constructor=t,i._super=n,r&&$c(i,r)}function WK(t,e){return function(){return t.apply(e,arguments)}}var wae=function(){var t=function(r,n){return n===void 0&&(n={}),new HK(r,ps({recognizers:zK.concat()},n))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=nae,t.DIRECTION_DOWN=Xd,t.DIRECTION_LEFT=Dm,t.DIRECTION_RIGHT=$m,t.DIRECTION_UP=Fm,t.DIRECTION_HORIZONTAL=Ls,t.DIRECTION_VERTICAL=pc,t.DIRECTION_NONE=Gv,t.DIRECTION_DOWN=Xd,t.INPUT_START=Rn,t.INPUT_MOVE=au,t.INPUT_END=mr,t.INPUT_CANCEL=ri,t.STATE_POSSIBLE=uy,t.STATE_BEGAN=zi,t.STATE_CHANGED=Jd,t.STATE_ENDED=Ga,t.STATE_RECOGNIZED=ko,t.STATE_CANCELLED=Mp,t.STATE_FAILED=Rs,t.Manager=HK,t.Input=Ah,t.TouchAction=sae,t.TouchInput=oD,t.MouseInput=aD,t.PointerEventInput=dae,t.TouchMouseInput=hae,t.SingleTouchInput=WRe,t.Recognizer=qm,t.AttrRecognizer=Zd,t.Tap=XI,t.Pan=lD,t.Swipe=pae,t.Pinch=mae,t.Rotate=gae,t.Press=yae,t.on=Lf,t.off=Bf,t.each=No,t.merge=GRe,t.extend=xae,t.bindFn=WK,t.assign=$c,t.inherit=YRe,t.bindFn=WK,t.prefixed=_b,t.toArray=Rp,t.inArray=qc,t.uniqueArray=sD,t.splitStr=Ip,t.boolOrFn=Eb,t.hasParent=iD,t.addEventListeners=Lf,t.removeEventListeners=Bf,t.defaults=$c({},vae,{preset:zK}),t}();wae.defaults;Xje("DELETE");function Cb(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return QRe(e.length?e:[Kv()])}function QRe(t){let[e,r,n]=XRe(t),i=1;const s=()=>{const o=2091639*e+i*23283064365386963e-26;return e=r,r=n,n=o-(i=o|0)};return s.uint32=()=>s()*4294967296,s.fract53=()=>s()+(s()*2097152|0)*11102230246251565e-32,s.algorithm="Alea",s.seed=t,s.version="0.9",s}function XRe(){const t=JRe();let e=t(" "),r=t(" "),n=t(" ");for(let i=0;i<arguments.length;i++)e-=t(i<0||arguments.length<=i?void 0:arguments[i]),e<0&&(e+=1),r-=t(i<0||arguments.length<=i?void 0:arguments[i]),r<0&&(r+=1),n-=t(i<0||arguments.length<=i?void 0:arguments[i]),n<0&&(n+=1);return[e,r,n]}function JRe(){let t=4022871197;return function(e){const r=e.toString();for(let n=0;n<r.length;n++){t+=r.charCodeAt(n);let i=.02519603282416938*t;t=i>>>0,i-=t,i*=t,t=i>>>0,i-=t,t+=i*4294967296}return(t>>>0)*23283064365386963e-26}}function ZRe(){const t=()=>{};return{on:t,off:t,destroy:t,emit:t,get(){return{set:t}}}}const cD=typeof window<"u"?window.Hammer||wae:function(){return ZRe()};function Ms(t){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const r=cD(this._dom.overlay);r.on("tap",se(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{r.destroy()});const n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];xt(n).call(n,i=>{r.on(i,s=>{s.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=i=>{eMe(i.target,t)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=i=>{("key"in i?i.key==="Escape":i.keyCode===27)&&this.deactivate()}}Poe(Ms.prototype);Ms.current=null;Ms.prototype.destroy=function(){this.deactivate();for(const r of dc(t=_o(e=this._cleanupQueue).call(e,0)).call(t)){var t,e;r()}};Ms.prototype.activate=function(){Ms.current&&Ms.current.deactivate(),Ms.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};Ms.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};Ms.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};function eMe(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}const tMe=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rMe=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,nMe=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,iMe=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function oa(t){if(t)for(;t.hasChildNodes()===!0;){const e=t.firstChild;e&&(oa(e),t.removeChild(e))}}function ad(t){return t instanceof String||typeof t=="string"}function KK(t){return typeof t=="object"&&t!==null}function Lc(t,e,r,n){let i=!1;n===!0&&(i=e[r]===null&&t[r]!==void 0),i?delete t[r]:t[r]=e[r]}function Sae(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;for(const n in t)if(e[n]!==void 0)if(e[n]===null||typeof e[n]!="object")Lc(t,e,n,r);else{const i=t[n],s=e[n];KK(i)&&KK(s)&&Sae(i,s,r)}}function Dh(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(tr(r))throw new TypeError("Arrays are not supported by deepExtend");for(let i=0;i<t.length;i++){const s=t[i];if(Object.prototype.hasOwnProperty.call(r,s))if(r[s]&&r[s].constructor===Object)e[s]===void 0&&(e[s]={}),e[s].constructor===Object?Et(e[s],r[s],!1,n):Lc(e,r,s,n);else{if(tr(r[s]))throw new TypeError("Arrays are not supported by deepExtend");Lc(e,r,s,n)}}return e}function Xv(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(tr(r))throw new TypeError("Arrays are not supported by deepExtend");for(const i in r)if(Object.prototype.hasOwnProperty.call(r,i)&&!Ka(t).call(t,i))if(r[i]&&r[i].constructor===Object)e[i]===void 0&&(e[i]={}),e[i].constructor===Object?Et(e[i],r[i]):Lc(e,r,i,n);else if(tr(r[i])){e[i]=[];for(let s=0;s<r[i].length;s++)e[i].push(r[i][s])}else Lc(e,r,i,n);return e}function Et(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)||r===!0)if(typeof e[s]=="object"&&e[s]!==null&&T9(e[s])===Object.prototype)t[s]===void 0?t[s]=Et({},e[s],r):typeof t[s]=="object"&&t[s]!==null&&T9(t[s])===Object.prototype?Et(t[s],e[s],r):Lc(t,e,s,n);else if(tr(e[s])){var i;t[s]=Ps(i=e[s]).call(i)}else Lc(t,e,s,n);return t}function Jv(t,e){return[...t,e]}function sMe(t){return Ps(t).call(t)}function oMe(t){return t.getBoundingClientRect().left}function aMe(t){return t.getBoundingClientRect().top}function Ge(t,e){if(tr(t)){const r=t.length;for(let n=0;n<r;n++)e(t[n],n,t)}else for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(t[r],r,t)}function uD(t){let e;switch(t.length){case 3:case 4:return e=rMe.exec(t),e?{r:ss(e[1]+e[1],16),g:ss(e[2]+e[2],16),b:ss(e[3]+e[3],16)}:null;case 6:case 7:return e=tMe.exec(t),e?{r:ss(e[1],16),g:ss(e[2],16),b:ss(e[3],16)}:null;default:return null}}function Di(t,e){if(Ka(t).call(t,"rgba"))return t;if(Ka(t).call(t,"rgb")){const r=t.substr(ht(t).call(t,"(")+1).replace(")","").split(",");return"rgba("+r[0]+","+r[1]+","+r[2]+","+e+")"}else{const r=uD(t);return r==null?t:"rgba("+r.r+","+r.g+","+r.b+","+e+")"}}function _ae(t,e,r){var n;return"#"+Ps(n=((1<<24)+(t<<16)+(e<<8)+r).toString(16)).call(n,1)}function JI(t,e){if(ad(t)){let n=t;if(Cae(n)){var r;const i=Qd(r=n.substr(4).substr(0,n.length-5).split(",")).call(r,function(s){return ss(s)});n=_ae(i[0],i[1],i[2])}if(Eae(n)===!0){const i=lMe(n),s={h:i.h,s:i.s*.8,v:Math.min(1,i.v*1.02)},o={h:i.h,s:Math.min(1,i.s*1.25),v:i.v*.8},a=ZI(o.h,o.s,o.v),l=ZI(s.h,s.s,s.v);return{background:n,border:a,highlight:{background:l,border:a},hover:{background:l,border:a}}}else return{background:n,border:n,highlight:{background:n,border:n},hover:{background:n,border:n}}}else return{background:t.background||void 0,border:t.border||void 0,highlight:ad(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||void 0,border:t.highlight&&t.highlight.border||void 0},hover:ad(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||void 0,background:t.hover&&t.hover.background||void 0}}}function yf(t,e,r){t=t/255,e=e/255,r=r/255;const n=Math.min(t,Math.min(e,r)),i=Math.max(t,Math.max(e,r));if(n===i)return{h:0,s:0,v:n};const s=t===n?e-r:r===n?t-e:r-t,a=60*((t===n?3:r===n?1:5)-s/(i-n))/360,l=(i-n)/i;return{h:a,s:l,v:i}}function dy(t,e,r){let n,i,s;const o=Math.floor(t*6),a=t*6-o,l=r*(1-e),c=r*(1-a*e),u=r*(1-(1-a)*e);switch(o%6){case 0:n=r,i=u,s=l;break;case 1:n=c,i=r,s=l;break;case 2:n=l,i=r,s=u;break;case 3:n=l,i=c,s=r;break;case 4:n=u,i=l,s=r;break;case 5:n=r,i=l,s=c;break}return{r:Math.floor(n*255),g:Math.floor(i*255),b:Math.floor(s*255)}}function ZI(t,e,r){const n=dy(t,e,r);return _ae(n.r,n.g,n.b)}function lMe(t){const e=uD(t);if(!e)throw new TypeError("'".concat(t,"' is not a valid color."));return yf(e.r,e.g,e.b)}function Eae(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)}function Cae(t){return nMe.test(t)}function cMe(t){return iMe.test(t)}function Ya(t){if(t===null||typeof t!="object")return null;if(t instanceof Element)return t;const e=hc(t);for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&typeof t[r]=="object"&&(e[r]=Ya(t[r]));return e}function Pi(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=function(p){return p!=null},s=function(p){return p!==null&&typeof p=="object"},o=function(p){for(const m in p)if(Object.prototype.hasOwnProperty.call(p,m))return!1;return!0};if(!s(t))throw new Error("Parameter mergeTarget must be an object");if(!s(e))throw new Error("Parameter options must be an object");if(!i(r))throw new Error("Parameter option must have a value");if(!s(n))throw new Error("Parameter globalOptions must be an object");const a=function(p,m,g){s(p[g])||(p[g]={});const v=m[g],y=p[g];for(const b in v)Object.prototype.hasOwnProperty.call(v,b)&&(y[b]=v[b])},l=e[r],u=s(n)&&!o(n)?n[r]:void 0,h=u?u.enabled:void 0;if(l===void 0)return;if(typeof l=="boolean"){s(t[r])||(t[r]={}),t[r].enabled=l;return}if(l===null&&!s(t[r]))if(i(u))t[r]=hc(u);else return;if(!s(l))return;let f=!0;l.enabled!==void 0?f=l.enabled:h!==void 0&&(f=u.enabled),a(t,e,r),t[r].enabled=f}const uMe={linear(t){return t},easeInQuad(t){return t*t},easeOutQuad(t){return t*(2-t)},easeInOutQuad(t){return t<.5?2*t*t:-1+(4-2*t)*t},easeInCubic(t){return t*t*t},easeOutCubic(t){return--t*t*t+1},easeInOutCubic(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart(t){return t*t*t*t},easeOutQuart(t){return 1- --t*t*t*t},easeInOutQuart(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint(t){return t*t*t*t*t},easeOutQuint(t){return 1+--t*t*t*t*t},easeInOutQuint(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}};function aa(t,e){let r;tr(e)||(e=[e]);for(const n of t)if(n){r=n[e[0]];for(let i=1;i<e.length;i++)r&&(r=r[e[i]]);if(typeof r<"u")break}return r}const dMe={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};let hMe=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}setCloseCallback(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}_isColorString(e){if(typeof e=="string")return dMe[e]}setColor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e==="none")return;let n;const i=this._isColorString(e);if(i!==void 0&&(e=i),ad(e)===!0){if(Cae(e)===!0){const s=e.substr(4).substr(0,e.length-5).split(",");n={r:s[0],g:s[1],b:s[2],a:1}}else if(cMe(e)===!0){const s=e.substr(5).substr(0,e.length-6).split(",");n={r:s[0],g:s[1],b:s[2],a:s[3]}}else if(Eae(e)===!0){const s=uD(e);n={r:s.r,g:s.g,b:s.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){const s=e.a!==void 0?e.a:"1.0";n={r:e.r,g:e.g,b:e.b,a:s}}if(n===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+Rm(e));this._setColor(n,r)}show(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0&&(this.previousColor=pr({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",Eo(()=>{this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0)},0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)===!0&&(this.initialColor=pr({},e)),this.color=e;const n=yf(e.r,e.g,e.b),i=2*Math.PI,s=this.r*n.s,o=this.centerCoordinates.x+s*Math.sin(i*n.h),a=this.centerCoordinates.y+s*Math.cos(i*n.h);this.colorPickerSelector.style.left=o-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=a-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}_setOpacity(e){this.color.a=e/100,this._updatePicker(this.color)}_setBrightness(e){const r=yf(this.color.r,this.color.g,this.color.b);r.v=e/100;const n=dy(r.h,r.s,r.v);n.a=this.color.a,this.color=n,this._updatePicker()}_updatePicker(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color;const r=yf(e.r,e.g,e.b),n=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const i=this.colorPickerCanvas.clientWidth,s=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,i,s),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-r.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),Mm(n).call(n),this.brightnessRange.value=100*r.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){var e,r,n,i;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){const o=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{const o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);const s=this;this.opacityRange.onchange=function(){s._setOpacity(this.value)},this.opacityRange.oninput=function(){s._setOpacity(this.value)},this.brightnessRange.onchange=function(){s._setBrightness(this.value)},this.brightnessRange.oninput=function(){s._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=se(e=this._hide).call(e,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=se(r=this._apply).call(r,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=se(n=this._save).call(n,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=se(i=this._loadLast).call(i,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new cD(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",e=>{e.isFirst&&this._moveSelector(e)}),this.hammer.on("tap",e=>{this._moveSelector(e)}),this.hammer.on("panstart",e=>{this._moveSelector(e)}),this.hammer.on("panmove",e=>{this._moveSelector(e)}),this.hammer.on("panend",e=>{this._moveSelector(e)})}_generateHueCircle(){if(this.generated===!1){const e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const r=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,r,n);let i,s,o,a;this.centerCoordinates={x:r*.5,y:n*.5},this.r=.49*r;const l=2*Math.PI/360,c=1/360,u=1/this.r;let h;for(o=0;o<360;o++)for(a=0;a<this.r;a++)i=this.centerCoordinates.x+a*Math.sin(l*o),s=this.centerCoordinates.y+a*Math.cos(l*o),h=dy(o*c,a*u,1),e.fillStyle="rgb("+h.r+","+h.g+","+h.b+")",e.fillRect(i-.5,s-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,r,n)}this.generated=!0}_moveSelector(e){const r=this.colorPickerDiv.getBoundingClientRect(),n=e.center.x-r.left,i=e.center.y-r.top,s=.5*this.colorPickerDiv.clientHeight,o=.5*this.colorPickerDiv.clientWidth,a=n-o,l=i-s,c=Math.atan2(a,l),u=.98*Math.min(Math.sqrt(a*a+l*l),o),h=Math.cos(c)*u+s,f=Math.sin(c)*u+o;this.colorPickerSelector.style.top=h-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=f-.5*this.colorPickerSelector.clientWidth+"px";let p=c/(2*Math.PI);p=p<0?p+1:p;const m=u/this.r,g=yf(this.color.r,this.color.g,this.color.b);g.h=p,g.s=m;const v=dy(g.h,g.s,g.v);v.a=this.color.a,this.color=v,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}};function eR(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(e.length<1)throw new TypeError("Invalid arguments.");if(e.length===1)return document.createTextNode(e[0]);{const n=document.createElement(e[0]);return n.appendChild(eR(...Ps(e).call(e,1))),n}}let fMe=class{constructor(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:()=>!1;this.parent=e,this.changedOptions=[],this.container=r,this.allowCreation=!1,this.hideOption=s,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},pr(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new hMe(i),this.wrapper=void 0}setOptions(e){if(e!==void 0){this.popupHistory={},this._removePopup();let r=!0;if(typeof e=="string")this.options.filter=e;else if(tr(e))this.options.filter=e.join();else if(typeof e=="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),Hn(e)!==void 0&&(this.options.filter=Hn(e)),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(r=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,r=e):typeof e=="function"&&(this.options.filter=e,r=!0);Hn(this.options)===!1&&(r=!1),this.options.enabled=r}this._clean()}setModuleOptions(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];const e=Hn(this.options);let r=0,n=!1;for(const i in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,i)&&(this.allowCreation=!1,n=!1,typeof e=="function"?(n=e(i,[]),n=n||this._handleObject(this.configureOptions[i],[i],!0)):(e===!0||ht(e).call(e,i)!==-1)&&(n=!0),n!==!1&&(this.allowCreation=!0,r>0&&this._makeItem([]),this._makeHeader(i),this._handleObject(this.configureOptions[i],[i])),r++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(let e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}_clean(){for(let e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(e){let r=this.moduleOptions;for(let n=0;n<e.length;n++)if(r[e[n]]!==void 0)r=r[e[n]];else{r=void 0;break}return r}_makeItem(e){if(this.allowCreation===!0){const s=document.createElement("div");s.className="vis-configuration vis-config-item vis-config-s"+e.length;for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return xt(n).call(n,o=>{s.appendChild(o)}),this.domElements.push(s),this.domElements.length}return 0}_makeHeader(e){const r=document.createElement("div");r.className="vis-configuration vis-config-header",r.innerText=e,this._makeItem([],r)}_makeLabel(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=document.createElement("div");if(i.className="vis-configuration vis-config-label vis-config-s"+r.length,n===!0){for(;i.firstChild;)i.removeChild(i.firstChild);i.appendChild(eR("i","b",e))}else i.innerText=e+":";return i}_makeDropdown(e,r,n){const i=document.createElement("select");i.className="vis-configuration vis-config-select";let s=0;r!==void 0&&ht(e).call(e,r)!==-1&&(s=ht(e).call(e,r));for(let l=0;l<e.length;l++){const c=document.createElement("option");c.value=e[l],l===s&&(c.selected="selected"),c.innerText=e[l],i.appendChild(c)}const o=this;i.onchange=function(){o._update(this.value,n)};const a=this._makeLabel(n[n.length-1],n);this._makeItem(n,a,i)}_makeRange(e,r,n){const i=e[0],s=e[1],o=e[2],a=e[3],l=document.createElement("input");l.className="vis-configuration vis-config-range";try{l.type="range",l.min=s,l.max=o}catch{}l.step=a;let c="",u=0;r!==void 0?(r<0&&r*1.2<s?(l.min=Math.ceil(r*1.2),u=l.min,c="range increased"):r/1.2<s&&(l.min=Math.ceil(r/1.2),u=l.min,c="range increased"),r*1.2>o&&o!==1&&(l.max=Math.ceil(r*1.2),u=l.max,c="range increased"),l.value=r):l.value=i;const h=document.createElement("input");h.className="vis-configuration vis-config-rangeinput",h.value=l.value;const f=this;l.onchange=function(){h.value=this.value,f._update(Number(this.value),n)},l.oninput=function(){h.value=this.value};const p=this._makeLabel(n[n.length-1],n),m=this._makeItem(n,p,l,h);c!==""&&this.popupHistory[m]!==u&&(this.popupHistory[m]=u,this._setupPopup(c,m))}_makeButton(){if(this.options.showButton===!0){const e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerText="generate options",e.onclick=()=>{this._printOptions()},e.onmouseover=()=>{e.className="vis-configuration vis-config-button hover"},e.onmouseout=()=>{e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}_setupPopup(e,r){if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){const n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerText=e,n.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:r}}}_removePopup(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(this.popupDiv.html!==void 0){const r=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=r.left+"px",this.popupDiv.html.style.top=r.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=Eo(()=>{this.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=Eo(()=>{this._removePopup()},1800)}}_makeCheckbox(e,r,n){const i=document.createElement("input");i.type="checkbox",i.className="vis-configuration vis-config-checkbox",i.checked=e,r!==void 0&&(i.checked=r,r!==e&&(typeof e=="object"?r!==e.enabled&&this.changedOptions.push({path:n,value:r}):this.changedOptions.push({path:n,value:r})));const s=this;i.onchange=function(){s._update(this.checked,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}_makeTextInput(e,r,n){const i=document.createElement("input");i.type="text",i.className="vis-configuration vis-config-text",i.value=r,r!==e&&this.changedOptions.push({path:n,value:r});const s=this;i.onchange=function(){s._update(this.value,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}_makeColorField(e,r,n){const i=e[1],s=document.createElement("div");r=r===void 0?i:r,r!=="none"?(s.className="vis-configuration vis-config-colorBlock",s.style.backgroundColor=r):s.className="vis-configuration vis-config-colorBlock none",r=r===void 0?i:r,s.onclick=()=>{this._showColorPicker(r,s,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,s)}_showColorPicker(e,r,n){r.onclick=function(){},this.colorPicker.insertTo(r),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(i=>{const s="rgba("+i.r+","+i.g+","+i.b+","+i.a+")";r.style.backgroundColor=s,this._update(s,n)}),this.colorPicker.setCloseCallback(()=>{r.onclick=()=>{this._showColorPicker(e,r,n)}})}_handleObject(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=!1;const s=Hn(this.options);let o=!1;for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)){i=!0;const l=e[a],c=Jv(r,a);if(typeof s=="function"&&(i=s(a,r),i===!1&&!tr(l)&&typeof l!="string"&&typeof l!="boolean"&&l instanceof Object&&(this.allowCreation=!1,i=this._handleObject(l,c,!0),this.allowCreation=n===!1)),i!==!1){o=!0;const u=this._getValue(c);if(tr(l))this._handleArray(l,u,c);else if(typeof l=="string")this._makeTextInput(l,u,c);else if(typeof l=="boolean")this._makeCheckbox(l,u,c);else if(l instanceof Object){if(!this.hideOption(r,a,this.moduleOptions))if(l.enabled!==void 0){const h=Jv(c,"enabled"),f=this._getValue(h);if(f===!0){const p=this._makeLabel(a,c,!0);this._makeItem(c,p),o=this._handleObject(l,c)||o}else this._makeCheckbox(l,f,c)}else{const h=this._makeLabel(a,c,!0);this._makeItem(c,h),o=this._handleObject(l,c)||o}}else console.error("dont know how to handle",l,a,c)}}return o}_handleArray(e,r,n){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,r,n),e[1]!==r&&this.changedOptions.push({path:n,value:r})):typeof e[0]=="string"?(this._makeDropdown(e,r,n),e[0]!==r&&this.changedOptions.push({path:n,value:r})):typeof e[0]=="number"&&(this._makeRange(e,r,n),e[0]!==r&&this.changedOptions.push({path:n,value:Number(r)}))}_update(e,r){const n=this._constructOptions(e,r);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",n),this.initialized=!0,this.parent.setOptions(n)}_constructOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n;e=e==="true"?!0:e,e=e==="false"?!1:e;for(let s=0;s<r.length;s++)r[s]!=="global"&&(i[r[s]]===void 0&&(i[r[s]]={}),s!==r.length-1?i=i[r[s]]:i[r[s]]=e);return n}_printOptions(){const e=this.getOptions();for(;this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(eR("pre","const options = "+Rm(e,null,2)))}getOptions(){const e={};for(let r=0;r<this.changedOptions.length;r++)this._constructOptions(this.changedOptions[r].value,this.changedOptions[r].path,e);return e}},pMe=class{constructor(e,r){this.container=e,this.overflowMethod=r||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(e,r){this.x=ss(e),this.y=ss(r)}setText(e){if(e instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(e)}else this.frame.innerText=e}show(e){if(e===void 0&&(e=!0),e===!0){const r=this.frame.clientHeight,n=this.frame.clientWidth,i=this.frame.parentNode.clientHeight,s=this.frame.parentNode.clientWidth;let o=0,a=0;if(this.overflowMethod=="flip"){let l=!1,c=!0;this.y-r<this.padding&&(c=!1),this.x+n>s-this.padding&&(l=!0),l?o=this.x-n:o=this.x,c?a=this.y-r:a=this.y}else a=this.y-r,a+r+this.padding>i&&(a=i-r-this.padding),a<this.padding&&(a=this.padding),o=this.x,o+n+this.padding>s&&(o=s-n-this.padding),o<this.padding&&(o=this.padding);this.frame.style.left=o+"px",this.frame.style.top=a+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}},of=!1,GK;const tR="background: #FFeeee; color: #dd0000";let mMe=class Gt{static validate(e,r,n){of=!1,GK=r;let i=r;return n!==void 0&&(i=r[n]),Gt.parse(e,i,[]),of}static parse(e,r,n){for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&Gt.check(i,e,r,n)}static check(e,r,n,i){if(n[e]===void 0&&n.__any__===void 0){Gt.getSuggestion(e,n,i);return}let s=e,o=!0;n[e]===void 0&&n.__any__!==void 0&&(s="__any__",o=Gt.getType(r[e])==="object");let a=n[s];o&&a.__type__!==void 0&&(a=a.__type__),Gt.checkFields(e,r,n,s,a,i)}static checkFields(e,r,n,i,s,o){const a=function(u){console.error("%c"+u+Gt.printLocation(o,e),tR)},l=Gt.getType(r[e]),c=s[l];c!==void 0?Gt.getType(c)==="array"&&ht(c).call(c,r[e])===-1?(a('Invalid option detected in "'+e+'". Allowed values are:'+Gt.print(c)+' not "'+r[e]+'". '),of=!0):l==="object"&&i!=="__any__"&&(o=Jv(o,e),Gt.parse(r[e],n[i],o)):s.any===void 0&&(a('Invalid type received for "'+e+'". Expected: '+Gt.print(Xt(s))+". Received ["+l+'] "'+r[e]+'"'),of=!0)}static getType(e){const r=typeof e;return r==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":tr(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":r==="number"?"number":r==="boolean"?"boolean":r==="string"?"string":r===void 0?"undefined":r}static getSuggestion(e,r,n){const i=Gt.findInOptions(e,r,n,!1),s=Gt.findInOptions(e,GK,[],!0),o=8,a=4;let l;i.indexMatch!==void 0?l=" in "+Gt.printLocation(i.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+i.indexMatch+`"?

`:s.distance<=a&&i.distance>s.distance?l=" in "+Gt.printLocation(i.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+Gt.printLocation(s.path,s.closestMatch,""):i.distance<=o?l='. Did you mean "'+i.closestMatch+'"?'+Gt.printLocation(i.path,e):l=". Did you mean one of these: "+Gt.print(Xt(r))+Gt.printLocation(n,e),console.error('%cUnknown option detected: "'+e+'"'+l,tR),of=!0}static findInOptions(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=1e9,o="",a=[];const l=e.toLowerCase();let c;for(const h in r){let f;if(r[h].__type__!==void 0&&i===!0){const p=Gt.findInOptions(e,r[h],Jv(n,h));s>p.distance&&(o=p.closestMatch,a=p.path,s=p.distance,c=p.indexMatch)}else{var u;ht(u=h.toLowerCase()).call(u,l)!==-1&&(c=h),f=Gt.levenshteinDistance(e,h),s>f&&(o=h,a=sMe(n),s=f)}}return{closestMatch:o,path:a,distance:s,indexMatch:c}}static printLocation(e,r){let i=`

`+(arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`)+`options = {
`;for(let s=0;s<e.length;s++){for(let o=0;o<s+1;o++)i+="  ";i+=e[s]+`: {
`}for(let s=0;s<e.length+1;s++)i+="  ";i+=r+`
`;for(let s=0;s<e.length+1;s++){for(let o=0;o<e.length-s;o++)i+="  ";i+=`}
`}return i+`

`}static print(e){return Rm(e).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}static levenshteinDistance(e,r){if(e.length===0)return r.length;if(r.length===0)return e.length;const n=[];let i;for(i=0;i<=r.length;i++)n[i]=[i];let s;for(s=0;s<=e.length;s++)n[0][s]=s;for(i=1;i<=r.length;i++)for(s=1;s<=e.length;s++)r.charAt(i-1)==e.charAt(s-1)?n[i][s]=n[i-1][s-1]:n[i][s]=Math.min(n[i-1][s-1]+1,Math.min(n[i][s-1]+1,n[i-1][s]+1));return n[r.length][e.length]}};const gMe=Ms,yMe=fMe,ld=cD,vMe=pMe,Nae=tR,bMe=mMe;function xMe(t){return Oa=t,EMe()}var kae={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},dD=hc(kae);dD.color="color.color";dD.style="dashes";var _n={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},YK={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},Oa="",eh=0,We="",Pe="",zn=_n.NULL;function wMe(){eh=0,We=Oa.charAt(0)}function Rr(){eh++,We=Oa.charAt(eh)}function _u(){return Oa.charAt(eh+1)}function QK(t){var e=t.charCodeAt(0);return e<47?e===35||e===46:e<59?e>47:e<91?e>64:e<96?e===95:e<123?e>96:!1}function rl(t,e){if(t||(t={}),e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function SMe(t,e,r){for(var n=e.split("."),i=t;n.length;){var s=n.shift();n.length?(i[s]||(i[s]={}),i=i[s]):i[s]=r}}function Tae(t,e){for(var r,n,i=null,s=[t],o=t;o.parent;)s.push(o.parent),o=o.parent;if(o.nodes){for(r=0,n=o.nodes.length;r<n;r++)if(e.id===o.nodes[r].id){i=o.nodes[r];break}}for(i||(i={id:e.id},t.node&&(i.attr=rl(i.attr,t.node))),r=s.length-1;r>=0;r--){var a,l=s[r];l.nodes||(l.nodes=[]),ht(a=l.nodes).call(a,i)===-1&&l.nodes.push(i)}e.attr&&(i.attr=rl(i.attr,e.attr))}function _Me(t,e){if(t.edges||(t.edges=[]),t.edges.push(e),t.edge){var r=rl({},t.edge);e.attr=rl(r,e.attr)}}function Oae(t,e,r,n,i){var s={from:e,to:r,type:n};return t.edge&&(s.attr=rl({},t.edge)),s.attr=rl(s.attr||{},i),i!=null&&i.hasOwnProperty("arrows")&&i.arrows!=null&&(s.arrows={to:{enabled:!0,type:i.arrows.type}},i.arrows=null),s}function Nt(){for(zn=_n.NULL,Pe="";We===" "||We==="	"||We===`
`||We==="\r";)Rr();do{var t=!1;if(We==="#"){for(var e=eh-1;Oa.charAt(e)===" "||Oa.charAt(e)==="	";)e--;if(Oa.charAt(e)===`
`||Oa.charAt(e)===""){for(;We!=""&&We!=`
`;)Rr();t=!0}}if(We==="/"&&_u()==="/"){for(;We!=""&&We!=`
`;)Rr();t=!0}if(We==="/"&&_u()==="*"){for(;We!="";)if(We==="*"&&_u()==="/"){Rr(),Rr();break}else Rr();t=!0}for(;We===" "||We==="	"||We===`
`||We==="\r";)Rr()}while(t);if(We===""){zn=_n.DELIMITER;return}var r=We+_u();if(YK[r]){zn=_n.DELIMITER,Pe=r,Rr(),Rr();return}if(YK[We]){zn=_n.DELIMITER,Pe=We,Rr();return}if(QK(We)||We==="-"){for(Pe+=We,Rr();QK(We);)Pe+=We,Rr();Pe==="false"?Pe=!1:Pe==="true"?Pe=!0:isNaN(Number(Pe))||(Pe=Number(Pe)),zn=_n.IDENTIFIER;return}if(We==='"'){for(Rr();We!=""&&(We!='"'||We==='"'&&_u()==='"');)We==='"'?(Pe+=We,Rr()):We==="\\"&&_u()==="n"?(Pe+=`
`,Rr()):Pe+=We,Rr();if(We!='"')throw En('End of string " expected');Rr(),zn=_n.IDENTIFIER;return}for(zn=_n.UNKNOWN;We!="";)Pe+=We,Rr();throw new SyntaxError('Syntax error in part "'+Rae(Pe,30)+'"')}function EMe(){var t={};if(wMe(),Nt(),Pe==="strict"&&(t.strict=!0,Nt()),(Pe==="graph"||Pe==="digraph")&&(t.type=Pe,Nt()),zn===_n.IDENTIFIER&&(t.id=Pe,Nt()),Pe!="{")throw En("Angle bracket { expected");if(Nt(),jae(t),Pe!="}")throw En("Angle bracket } expected");if(Nt(),Pe!=="")throw En("End of file expected");return Nt(),delete t.node,delete t.edge,delete t.graph,t}function jae(t){for(;Pe!==""&&Pe!="}";)CMe(t),Pe===";"&&Nt()}function CMe(t){var e=Pae(t);if(e){Iae(t,e);return}var r=NMe(t);if(!r){if(zn!=_n.IDENTIFIER)throw En("Identifier expected");var n=Pe;if(Nt(),Pe==="="){if(Nt(),zn!=_n.IDENTIFIER)throw En("Identifier expected");t[n]=Pe,Nt()}else kMe(t,n)}}function Pae(t){var e=null;if(Pe==="subgraph"&&(e={},e.type="subgraph",Nt(),zn===_n.IDENTIFIER&&(e.id=Pe,Nt())),Pe==="{"){if(Nt(),e||(e={}),e.parent=t,e.node=t.node,e.edge=t.edge,e.graph=t.graph,jae(e),Pe!="}")throw En("Angle bracket } expected");Nt(),delete e.node,delete e.edge,delete e.graph,delete e.parent,t.subgraphs||(t.subgraphs=[]),t.subgraphs.push(e)}return e}function NMe(t){return Pe==="node"?(Nt(),t.node=zf(),"node"):Pe==="edge"?(Nt(),t.edge=zf(),"edge"):Pe==="graph"?(Nt(),t.graph=zf(),"graph"):null}function kMe(t,e){var r={id:e},n=zf();n&&(r.attr=n),Tae(t,r),Iae(t,e)}function Iae(t,e){for(;Pe==="->"||Pe==="--";){var r,n=Pe;Nt();var i=Pae(t);if(i)r=i;else{if(zn!=_n.IDENTIFIER)throw En("Identifier or subgraph expected");r=Pe,Tae(t,{id:r}),Nt()}var s=zf(),o=Oae(t,e,r,n,s);_Me(t,o),e=r}}function zf(){for(var t,e=null,r={dashed:!0,solid:!1,dotted:[1,5]},n={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},i=new Array,s=new Array;Pe==="[";){for(Nt(),e={};Pe!==""&&Pe!="]";){if(zn!=_n.IDENTIFIER)throw En("Attribute name expected");var o=Pe;if(Nt(),Pe!="=")throw En("Equal sign = expected");if(Nt(),zn!=_n.IDENTIFIER)throw En("Attribute value expected");var a=Pe;o==="style"&&(a=r[a]);var l;o==="arrowhead"&&(l=n[a],o="arrows",a={to:{enabled:!0,type:l}}),o==="arrowtail"&&(l=n[a],o="arrows",a={from:{enabled:!0,type:l}}),i.push({attr:e,name:o,value:a}),s.push(o),Nt(),Pe==","&&Nt()}if(Pe!="]")throw En("Bracket ] expected");Nt()}if(Ka(s).call(s,"dir")){var c={};for(c.arrows={},t=0;t<i.length;t++)if(i[t].name==="arrows")if(i[t].value.to!=null)c.arrows.to=t;else if(i[t].value.from!=null)c.arrows.from=t;else throw En("Invalid value of arrows");else i[t].name==="dir"&&(c.dir=t);var u=i[c.dir].value;if(!Ka(s).call(s,"arrows"))if(u==="both")i.push({attr:i[c.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),c.arrows.to=i.length-1,i.push({attr:i[c.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),c.arrows.from=i.length-1;else if(u==="forward")i.push({attr:i[c.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),c.arrows.to=i.length-1;else if(u==="back")i.push({attr:i[c.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),c.arrows.from=i.length-1;else if(u==="none")i.push({attr:i[c.dir].attr,name:"arrows",value:""}),c.arrows.to=i.length-1;else throw En('Invalid dir type "'+u+'"');var h,f;if(u==="both")c.arrows.to&&c.arrows.from?(f=i[c.arrows.to].value.to.type,h=i[c.arrows.from].value.from.type,i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}},_o(i).call(i,c.arrows.from,1)):c.arrows.to?(f=i[c.arrows.to].value.to.type,h="arrow",i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.from&&(f="arrow",h=i[c.arrows.from].value.from.type,i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}});else if(u==="back")c.arrows.to&&c.arrows.from?(f="",h=i[c.arrows.from].value.from.type,i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.to?(f="",h="arrow",c.arrows.from=c.arrows.to,i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.from&&(f="",h=i[c.arrows.from].value.from.type,i[c.arrows.to]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}),i[c.arrows.from]={attr:i[c.arrows.from].attr,name:i[c.arrows.from].name,value:{from:{enabled:!0,type:i[c.arrows.from].value.from.type}}};else if(u==="none"){var p;c.arrows.to?p=c.arrows.to:p=c.arrows.from,i[p]={attr:i[p].attr,name:i[p].name,value:""}}else if(u==="forward")c.arrows.to&&c.arrows.from?(f=i[c.arrows.to].value.to.type,h="",i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.to?(f=i[c.arrows.to].value.to.type,h="",i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):c.arrows.from&&(f="arrow",h="",c.arrows.to=c.arrows.from,i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}),i[c.arrows.to]={attr:i[c.arrows.to].attr,name:i[c.arrows.to].name,value:{to:{enabled:!0,type:i[c.arrows.to].value.to.type}}};else throw En('Invalid dir type "'+u+'"');_o(i).call(i,c.dir,1)}var m;if(Ka(s).call(s,"penwidth")){var g=[];for(m=i.length,t=0;t<m;t++)i[t].name!=="width"&&(i[t].name==="penwidth"&&(i[t].name="width"),g.push(i[t]));i=g}for(m=i.length,t=0;t<m;t++)SMe(i[t].attr,i[t].name,i[t].value);return e}function En(t){return new SyntaxError(t+', got "'+Rae(Pe,30)+'" (char '+eh+")")}function Rae(t,e){return t.length<=e?t:t.substr(0,27)+"..."}function TMe(t,e,r){tr(t)?xt(t).call(t,function(n){tr(e)?xt(e).call(e,function(i){r(n,i)}):r(n,e)}):tr(e)?xt(e).call(e,function(n){r(t,n)}):r(t,e)}function dT(t,e,r){for(var n=e.split("."),i=n.pop(),s=t,o=0;o<n.length;o++){var a=n[o];a in s||(s[a]={}),s=s[a]}return s[i]=r,t}function XK(t,e){var r={};for(var n in t)if(t.hasOwnProperty(n)){var i=e[n];tr(i)?xt(i).call(i,function(s){dT(r,s,t[n])}):typeof i=="string"?dT(r,i,t[n]):dT(r,n,t[n])}return r}function OMe(t){var e=xMe(t),r={nodes:[],edges:[],options:{}};if(e.nodes){var n;xt(n=e.nodes).call(n,function(o){var a={id:o.id,label:String(o.label||o.id)};rl(a,XK(o.attr,kae)),a.image&&(a.shape="image"),r.nodes.push(a)})}if(e.edges){var i,s=function(o){var a={from:o.from,to:o.to};return rl(a,XK(o.attr,dD)),a.arrows==null&&o.type==="->"&&(a.arrows="to"),a};xt(i=e.edges).call(i,function(o){var a,l;if(o.from instanceof Object?a=o.from.nodes:a={id:o.from},o.to instanceof Object?l=o.to.nodes:l={id:o.to},o.from instanceof Object&&o.from.edges){var c;xt(c=o.from.edges).call(c,function(h){var f=s(h);r.edges.push(f)})}if(TMe(a,l,function(h,f){var p=Oae(r,h.id,f.id,o.type,o.attr),m=s(p);r.edges.push(m)}),o.to instanceof Object&&o.to.edges){var u;xt(u=o.to.edges).call(u,function(h){var f=s(h);r.edges.push(f)})}})}return e.attr&&(r.options=e.attr),r}function jMe(t,e){var r;const n={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};e!=null&&(e.fixed!=null&&(n.nodes.fixed=e.fixed),e.parseColor!=null&&(n.nodes.parseColor=e.parseColor),e.inheritColor!=null&&(n.edges.inheritColor=e.inheritColor));const i=t.edges,s=Qd(i).call(i,a=>{const l={from:a.source,id:a.id,to:a.target};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.type==="Directed"&&(l.arrows="to"),a.color&&n.edges.inheritColor===!1&&(l.color=a.color),l});return{nodes:Qd(r=t.nodes).call(r,a=>{const l={id:a.id,fixed:n.nodes.fixed&&a.x!=null&&a.y!=null};return a.attributes!=null&&(l.attributes=a.attributes),a.label!=null&&(l.label=a.label),a.size!=null&&(l.size=a.size),a.attributes!=null&&a.attributes.title!=null&&(l.title=a.attributes.title),a.title!=null&&(l.title=a.title),a.x!=null&&(l.x=a.x),a.y!=null&&(l.y=a.y),a.color!=null&&(n.nodes.parseColor===!0?l.color=a.color:l.color={background:a.color,border:a.color,highlight:{background:a.color,border:a.color},hover:{background:a.color,border:a.color}}),l}),edges:s}}const PMe={addDescription:"Click in an empty space to place a new node.",addEdge:"Add Edge",addNode:"Add Node",back:"Back",close:"Close",createEdgeError:"Cannot link edges to a cluster.",del:"Delete selected",deleteClusterError:"Clusters cannot be deleted.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",edit:"Edit",editClusterError:"Clusters cannot be edited.",editEdge:"Edit Edge",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",editNode:"Edit Node"},IMe={addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",addEdge:"Kante hinzufgen",addNode:"Knoten hinzufgen",back:"Zurck",close:"Schlieen",createEdgeError:"Es ist nicht mglich, Kanten mit Clustern zu verbinden.",del:"Lsche Auswahl",deleteClusterError:"Cluster knnen nicht gelscht werden.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",edit:"Editieren",editClusterError:"Cluster knnen nicht editiert werden.",editEdge:"Kante editieren",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",editNode:"Knoten editieren"},RMe={addDescription:"Haga clic en un lugar vaco para colocar un nuevo nodo.",addEdge:"Aadir arista",addNode:"Aadir nodo",back:"Atrs",close:"Cerrar",createEdgeError:"No se puede conectar una arista a un grupo.",del:"Eliminar seleccin",deleteClusterError:"No es posible eliminar grupos.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",edit:"Editar",editClusterError:"No es posible editar grupos.",editEdge:"Editar arista",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",editNode:"Editar nodo"},MMe={addDescription:"Clicca per aggiungere un nuovo nodo",addEdge:"Aggiungi un vertice",addNode:"Aggiungi un nodo",back:"Indietro",close:"Chiudere",createEdgeError:"Non si possono collegare vertici ad un cluster",del:"Cancella la selezione",deleteClusterError:"I cluster non possono essere cancellati",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",edit:"Modifica",editClusterError:"I clusters non possono essere modificati.",editEdge:"Modifica il vertice",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",editNode:"Modifica il nodo"},AMe={addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",addEdge:"Link toevoegen",addNode:"Node toevoegen",back:"Terug",close:"Sluiten",createEdgeError:"Kan geen link maken naar een cluster.",del:"Selectie verwijderen",deleteClusterError:"Clusters kunnen niet worden verwijderd.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",edit:"Wijzigen",editClusterError:"Clusters kunnen niet worden aangepast.",editEdge:"Link wijzigen",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",editNode:"Node wijzigen"},DMe={addDescription:"Clique em um espao em branco para adicionar um novo n",addEdge:"Adicionar aresta",addNode:"Adicionar n",back:"Voltar",close:"Fechar",createEdgeError:"No foi possvel linkar arestas a um cluster.",del:"Remover selecionado",deleteClusterError:"Clusters no puderam ser removidos.",edgeDescription:"Clique em um n e arraste a aresta at outro n para conect-los",edit:"Editar",editClusterError:"Clusters no puderam ser editados.",editEdge:"Editar aresta",editEdgeDescription:"Clique nos pontos de controle e os arraste para um n para conect-los",editNode:"Editar n"},$Me={addDescription:"   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"    .",del:" ",deleteClusterError:"    ",edgeDescription:"        ,   .",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},FMe={addDescription:"",addEdge:"",addNode:"",back:"",close:"",createEdgeError:"",del:"",deleteClusterError:"",edgeDescription:"",edit:"",editClusterError:"",editEdge:"",editEdgeDescription:"",editNode:""},qMe={addDescription:"K   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"  '   .",del:" ",deleteClusterError:"    .",edgeDescription:"        ,   '.",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},LMe={addDescription:"Cliquez dans un endroit vide pour placer un nud.",addEdge:"Ajouter un lien",addNode:"Ajouter un nud",back:"Retour",close:"Fermer",createEdgeError:"Impossible de crer un lien vers un cluster.",del:"Effacer la slection",deleteClusterError:"Les clusters ne peuvent pas tre effacs.",edgeDescription:"Cliquez sur un nud et glissez le lien vers un autre nud pour les connecter.",edit:"diter",editClusterError:"Les clusters ne peuvent pas tre dits.",editEdge:"diter le lien",editEdgeDescription:"Cliquez sur les points de contrle et glissez-les pour connecter un nud.",editNode:"diter le nud"},BMe={addDescription:"Kluknutm do przdnho prostoru mete pidat nov vrchol.",addEdge:"Pidat hranu",addNode:"Pidat vrchol",back:"Zpt",close:"Zavt",createEdgeError:"Nelze pipojit hranu ke shluku.",del:"Smazat vbr",deleteClusterError:"Nelze mazat shluky.",edgeDescription:"Petaenm z jednoho vrcholu do druhho mete spojit tyto vrcholy novou hranou.",edit:"Upravit",editClusterError:"Nelze upravovat shluky.",editEdge:"Upravit hranu",editEdgeDescription:"Petaenm kontrolnho vrcholu hrany ji mete pipojit k jinmu vrcholu.",editNode:"Upravit vrchol"};var zMe=Object.freeze({__proto__:null,cn:FMe,cs:BMe,de:IMe,en:PMe,es:RMe,fr:LMe,it:MMe,nl:AMe,pt:DMe,ru:$Me,uk:qMe});function VMe(t,e){try{const[n,i]=e.split(/[-_ /]/,2),s=n!=null?n.toLowerCase():null,o=i!=null?i.toUpperCase():null;if(s&&o){const a=s+"-"+o;if(Object.prototype.hasOwnProperty.call(t,a))return a;var r;console.warn(fIe(r="Unknown variant ".concat(o," of language ")).call(r,s,"."))}if(s){const a=s;if(Object.prototype.hasOwnProperty.call(t,a))return a;console.warn("Unknown language ".concat(s))}return console.warn("Unknown locale ".concat(e,", falling back to English.")),"en"}catch(n){return console.error(n),console.warn("Unexpected error while normalizing locale ".concat(e,", falling back to English.")),"en"}}class UMe{constructor(){this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}init(){if(this.initialized())return;this.src=this.image.src;const e=this.image.width,r=this.image.height;this.width=e,this.height=r;const n=Math.floor(r/2),i=Math.floor(r/4),s=Math.floor(r/8),o=Math.floor(r/16),a=Math.floor(e/2),l=Math.floor(e/4),c=Math.floor(e/8),u=Math.floor(e/16);this.canvas.width=3*l,this.canvas.height=n,this.coordinates=[[0,0,a,n],[a,0,l,i],[a,i,c,s],[5*c,i,u,o]],this._fillMipMap()}initialized(){return this.coordinates!==void 0}_fillMipMap(){const e=this.canvas.getContext("2d"),r=this.coordinates[0];e.drawImage(this.image,r[0],r[1],r[2],r[3]);for(let n=1;n<this.NUM_ITERATIONS;n++){const i=this.coordinates[n-1],s=this.coordinates[n];e.drawImage(this.canvas,i[0],i[1],i[2],i[3],s[0],s[1],s[2],s[3])}}drawImageAtPosition(e,r,n,i,s,o){if(this.initialized())if(r>2){r*=.5;let a=0;for(;r>2&&a<this.NUM_ITERATIONS;)r*=.5,a+=1;a>=this.NUM_ITERATIONS&&(a=this.NUM_ITERATIONS-1);const l=this.coordinates[a];e.drawImage(this.canvas,l[0],l[1],l[2],l[3],n,i,s,o)}else e.drawImage(this.image,n,i,s,o)}}class HMe{constructor(e){this.images={},this.imageBroken={},this.callback=e}_tryloadBrokenUrl(e,r,n){if(!(e===void 0||n===void 0)){if(r===void 0){console.warn("No broken url image defined");return}n.image.onerror=()=>{console.error("Could not load brokenImage:",r)},n.image.src=r}}_redrawWithImage(e){this.callback&&this.callback(e)}load(e,r){const n=this.images[e];if(n)return n;const i=new UMe;return this.images[e]=i,i.image.onload=()=>{this._fixImageCoordinates(i.image),i.init(),this._redrawWithImage(i)},i.image.onerror=()=>{console.error("Could not load image:",e),this._tryloadBrokenUrl(e,r,i)},i.image.src=e,i}_fixImageCoordinates(e){e.width===0&&(document.body.appendChild(e),e.width=e.offsetWidth,e.height=e.offsetHeight,document.body.removeChild(e))}}var JK={},ZK={},hT={exports:{}},fT,eG;function WMe(){if(eG)return fT;eG=1;var t=Ze();return fT=t(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),fT}var pT,tG;function KMe(){if(tG)return pT;tG=1;var t=Ze(),e=Wr(),r=Us(),n=WMe(),i=Object.isExtensible,s=t(function(){});return pT=s||n?function(a){return!e(a)||n&&r(a)==="ArrayBuffer"?!1:i?i(a):!0}:i,pT}var mT,rG;function Mae(){if(rG)return mT;rG=1;var t=Ze();return mT=!t(function(){return Object.isExtensible(Object.preventExtensions({}))}),mT}var nG;function Nb(){if(nG)return hT.exports;nG=1;var t=Oe(),e=rt(),r=Tm(),n=Wr(),i=nn(),s=Ki().f,o=xb(),a=QA(),l=KMe(),c=fb(),u=Mae(),h=!1,f=c("meta"),p=0,m=function(x){s(x,f,{value:{objectID:"O"+p++,weakData:{}}})},g=function(x,S){if(!n(x))return typeof x=="symbol"?x:(typeof x=="string"?"S":"P")+x;if(!i(x,f)){if(!l(x))return"F";if(!S)return"E";m(x)}return x[f].objectID},v=function(x,S){if(!i(x,f)){if(!l(x))return!0;if(!S)return!1;m(x)}return x[f].weakData},y=function(x){return u&&h&&l(x)&&!i(x,f)&&m(x),x},b=function(){w.enable=function(){},h=!0;var x=o.f,S=e([].splice),_={};_[f]=1,x(_).length&&(o.f=function(C){for(var E=x(C),N=0,T=E.length;N<T;N++)if(E[N]===f){S(E,N,1);break}return E},t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:a.f}))},w=hT.exports={enable:b,fastKey:g,getWeakData:v,onFreeze:y};return r[f]=!0,hT.exports}var gT,iG;function GMe(){if(iG)return gT;iG=1;var t=wr(),e=Ph(),r=t("iterator"),n=Array.prototype;return gT=function(i){return i!==void 0&&(e.Array===i||n[r]===i)},gT}var yT,sG;function Aae(){if(sG)return yT;sG=1;var t=jh(),e=BA(),r=wh(),n=Ph(),i=wr(),s=i("iterator");return yT=function(o){if(!r(o))return e(o,s)||e(o,"@@iterator")||n[t(o)]},yT}var vT,oG;function YMe(){if(oG)return vT;oG=1;var t=si(),e=Uo(),r=Hs(),n=Eh(),i=Aae(),s=TypeError;return vT=function(o,a){var l=arguments.length<2?i(o):a;if(e(l))return r(t(l,o));throw new s(n(o)+" is not iterable")},vT}var bT,aG;function hD(){if(aG)return bT;aG=1;var t=si(),e=Hs(),r=BA();return bT=function(n,i,s){var o,a;e(n);try{if(o=r(n,"return"),!o){if(i==="throw")throw s;return s}o=t(o,n)}catch(l){a=!0,o=l}if(i==="throw")throw s;if(a)throw o;return e(o),s},bT}var xT,lG;function kb(){if(lG)return xT;lG=1;var t=mb(),e=si(),r=Hs(),n=Eh(),i=GMe(),s=Ho(),o=xr(),a=YMe(),l=Aae(),c=hD(),u=TypeError,h=function(p,m){this.stopped=p,this.result=m},f=h.prototype;return xT=function(p,m,g){var v=g&&g.that,y=!!(g&&g.AS_ENTRIES),b=!!(g&&g.IS_RECORD),w=!!(g&&g.IS_ITERATOR),x=!!(g&&g.INTERRUPTED),S=t(m,v),_,C,E,N,T,j,P,O=function(z){return _&&c(_,"normal"),new h(!0,z)},D=function(z){return y?(r(z),x?S(z[0],z[1],O):S(z[0],z[1])):x?S(z,O):S(z)};if(b)_=p.iterator;else if(w)_=p;else{if(C=l(p),!C)throw new u(n(p)+" is not iterable");if(i(C)){for(E=0,N=s(p);N>E;E++)if(T=D(p[E]),T&&o(f,T))return T;return new h(!1)}_=a(p,C)}for(j=b?p.next:_.next;!(P=e(j,_)).done;){try{T=D(P.value)}catch(z){c(_,"throw",z)}if(typeof T=="object"&&T&&o(f,T))return T}return new h(!1)},xT}var wT,cG;function fD(){if(cG)return wT;cG=1;var t=xr(),e=TypeError;return wT=function(r,n){if(t(n,r))return r;throw new e("Incorrect invocation")},wT}var ST,uG;function pD(){if(uG)return ST;uG=1;var t=Oe(),e=Dt(),r=Nb(),n=Ze(),i=kh(),s=kb(),o=fD(),a=Hr(),l=Wr(),c=wh(),u=su(),h=Ki().f,f=gl().forEach,p=lr(),m=ou(),g=m.set,v=m.getterFor;return ST=function(y,b,w){var x=y.indexOf("Map")!==-1,S=y.indexOf("Weak")!==-1,_=x?"set":"add",C=e[y],E=C&&C.prototype,N={},T;if(!p||!a(C)||!(S||E.forEach&&!n(function(){new C().entries().next()})))T=w.getConstructor(b,y,x,_),r.enable();else{T=b(function(O,D){g(o(O,j),{type:y,collection:new C}),c(D)||s(D,O[_],{that:O,AS_ENTRIES:x})});var j=T.prototype,P=v(y);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(O){var D=O==="add"||O==="set";O in E&&!(S&&O==="clear")&&i(j,O,function(z,R){var B=P(this).collection;if(!D&&S&&!l(z))return O==="get"?void 0:!1;var q=B[O](z===0?0:z,R);return D?this:q})}),S||h(j,"size",{configurable:!0,get:function(){return P(this).collection.size}})}return u(T,y,!1,!0),N[y]=T,t({global:!0,forced:!0},N),S||w.setStrong(T,y,x),T},ST}var _T,dG;function mD(){if(dG)return _T;dG=1;var t=Im();return _T=function(e,r,n){for(var i in r)n&&n.unsafe&&e[i]?e[i]=r[i]:t(e,i,r[i],n);return e},_T}var ET,hG;function QMe(){if(hG)return ET;hG=1;var t=wi(),e=XA(),r=wr(),n=lr(),i=r("species");return ET=function(s){var o=t(s);n&&o&&!o[i]&&e(o,i,{configurable:!0,get:function(){return this}})},ET}var CT,fG;function Dae(){if(fG)return CT;fG=1;var t=Pm(),e=XA(),r=mD(),n=mb(),i=fD(),s=wh(),o=kb(),a=ZA(),l=eD(),c=QMe(),u=lr(),h=Nb().fastKey,f=ou(),p=f.set,m=f.getterFor;return CT={getConstructor:function(g,v,y,b){var w=g(function(E,N){i(E,x),p(E,{type:v,index:t(null),first:null,last:null,size:0}),u||(E.size=0),s(N)||o(N,E[b],{that:E,AS_ENTRIES:y})}),x=w.prototype,S=m(v),_=function(E,N,T){var j=S(E),P=C(E,N),O,D;return P?P.value=T:(j.last=P={index:D=h(N,!0),key:N,value:T,previous:O=j.last,next:null,removed:!1},j.first||(j.first=P),O&&(O.next=P),u?j.size++:E.size++,D!=="F"&&(j.index[D]=P)),E},C=function(E,N){var T=S(E),j=h(N),P;if(j!=="F")return T.index[j];for(P=T.first;P;P=P.next)if(P.key===N)return P};return r(x,{clear:function(){for(var N=this,T=S(N),j=T.first;j;)j.removed=!0,j.previous&&(j.previous=j.previous.next=null),j=j.next;T.first=T.last=null,T.index=t(null),u?T.size=0:N.size=0},delete:function(E){var N=this,T=S(N),j=C(N,E);if(j){var P=j.next,O=j.previous;delete T.index[j.index],j.removed=!0,O&&(O.next=P),P&&(P.previous=O),T.first===j&&(T.first=P),T.last===j&&(T.last=O),u?T.size--:N.size--}return!!j},forEach:function(N){for(var T=S(this),j=n(N,arguments.length>1?arguments[1]:void 0),P;P=P?P.next:T.first;)for(j(P.value,P.key,this);P&&P.removed;)P=P.previous},has:function(N){return!!C(this,N)}}),r(x,y?{get:function(N){var T=C(this,N);return T&&T.value},set:function(N,T){return _(this,N===0?0:N,T)}}:{add:function(N){return _(this,N=N===0?0:N,N)}}),u&&e(x,"size",{configurable:!0,get:function(){return S(this).size}}),w},setStrong:function(g,v,y){var b=v+" Iterator",w=m(v),x=m(b);a(g,v,function(S,_){p(this,{type:b,target:S,state:w(S),kind:_,last:null})},function(){for(var S=x(this),_=S.kind,C=S.last;C&&C.removed;)C=C.previous;return!S.target||!(S.last=C=C?C.next:S.state.first)?(S.target=null,l(void 0,!0)):l(_==="keys"?C.key:_==="values"?C.value:[C.key,C.value],!1)},y?"entries":"values",!y,!0),c(v)}},CT}var pG;function XMe(){if(pG)return ZK;pG=1;var t=pD(),e=Dae();return t("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),ZK}var mG;function JMe(){return mG||(mG=1,XMe()),JK}var gG={},NT,yG;function $ae(){return yG||(yG=1,NT=function(t,e){return e===1?function(r,n){return r[t](n)}:function(r,n,i){return r[t](n,i)}}),NT}var kT,vG;function ZMe(){if(vG)return kT;vG=1;var t=wi(),e=$ae(),r=t("Map");return kT={Map:r,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:r.prototype},kT}var bG;function eAe(){if(bG)return gG;bG=1;var t=Oe(),e=rt(),r=Uo(),n=Vo(),i=kb(),s=ZMe(),o=Ch(),a=Ze(),l=s.Map,c=s.has,u=s.get,h=s.set,f=e([].push),p=o||a(function(){return l.groupBy("ab",function(m){return m}).get("a").length!==1});return t({target:"Map",stat:!0,forced:o||p},{groupBy:function(g,v){n(g),r(v);var y=new l,b=0;return i(g,function(w){var x=v(w,b++);c(y,x)?f(u(y,x),w):h(y,x,[w])}),y}}),gG}var xG={},TT,wG;function tAe(){if(wG)return TT;wG=1;var t=rt(),e=Th(),r=Gi(),n=Vo(),i=t("".charAt),s=t("".charCodeAt),o=t("".slice),a=function(l){return function(c,u){var h=r(n(c)),f=e(u),p=h.length,m,g;return f<0||f>=p?l?"":void 0:(m=s(h,f),m<55296||m>56319||f+1===p||(g=s(h,f+1))<56320||g>57343?l?i(h,f):m:l?o(h,f,f+2):(m-55296<<10)+(g-56320)+65536)}};return TT={codeAt:a(!1),charAt:a(!0)},TT}var SG;function gD(){if(SG)return xG;SG=1;var t=tAe().charAt,e=Gi(),r=ou(),n=ZA(),i=eD(),s="String Iterator",o=r.set,a=r.getterFor(s);return n(String,"String",function(l){o(this,{type:s,string:e(l),index:0})},function(){var c=a(this),u=c.string,h=c.index,f;return h>=u.length?i(void 0,!0):(f=t(u,h),c.index+=f.length,i(f,!1))}),xG}var OT,_G;function rAe(){if(_G)return OT;_G=1,Ih(),JMe(),eAe(),gD();var t=mt();return OT=t.Map,OT}var jT,EG;function nAe(){if(EG)return jT;EG=1;var t=rAe();return Rh(),jT=t,jT}var PT,CG;function iAe(){return CG||(CG=1,PT=nAe()),PT}var sAe=iAe(),yD=$e(sAe);class oAe{constructor(){this.clear(),this._defaultIndex=0,this._groupIndex=0,this._defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},pr(this.options,this.defaultOptions)}setOptions(e){const r=["useDefaultGroups"];if(e!==void 0){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&ht(r).call(r,n)===-1){const i=e[n];this.add(n,i)}}}clear(){this._groups=new yD,this._groupNames=[]}get(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this._groups.get(e);if(n===void 0&&r)if(this.options.useDefaultGroups===!1&&this._groupNames.length>0){const i=this._groupIndex%this._groupNames.length;++this._groupIndex,n={},n.color=this._groups.get(this._groupNames[i]),this._groups.set(e,n)}else{const i=this._defaultIndex%this._defaultGroups.length;this._defaultIndex++,n={},n.color=this._defaultGroups[i],this._groups.set(e,n)}return n}add(e,r){return this._groups.has(e)||this._groupNames.push(e),this._groups.set(e,r),r}}var NG={},kG;function aAe(){if(kG)return NG;kG=1;var t=Oe();return t({target:"Number",stat:!0},{isNaN:function(r){return r!==r}}),NG}var IT,TG;function lAe(){if(TG)return IT;TG=1,aAe();var t=mt();return IT=t.Number.isNaN,IT}var RT,OG;function cAe(){if(OG)return RT;OG=1;var t=lAe();return RT=t,RT}var MT,jG;function uAe(){return jG||(jG=1,MT=cAe()),MT}var dAe=uAe(),rR=$e(dAe),PG={},AT,IG;function hAe(){if(IG)return AT;IG=1;var t=Dt(),e=t.isFinite;return AT=Number.isFinite||function(n){return typeof n=="number"&&e(n)},AT}var RG;function fAe(){if(RG)return PG;RG=1;var t=Oe(),e=hAe();return t({target:"Number",stat:!0},{isFinite:e}),PG}var DT,MG;function pAe(){if(MG)return DT;MG=1,fAe();var t=mt();return DT=t.Number.isFinite,DT}var $T,AG;function mAe(){if(AG)return $T;AG=1;var t=pAe();return $T=t,$T}var FT,DG;function gAe(){return DG||(DG=1,FT=mAe()),FT}var yAe=gAe(),Hl=$e(yAe),$G={},FG;function vAe(){if(FG)return $G;FG=1;var t=Oe(),e=gl().some,r=Mh(),n=r("some");return t({target:"Array",proto:!0,forced:!n},{some:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),$G}var qT,qG;function bAe(){if(qG)return qT;qG=1,vAe();var t=sn();return qT=t("Array","some"),qT}var LT,LG;function xAe(){if(LG)return LT;LG=1;var t=xr(),e=bAe(),r=Array.prototype;return LT=function(n){var i=n.some;return n===r||t(r,n)&&i===r.some?e:i},LT}var BT,BG;function wAe(){if(BG)return BT;BG=1;var t=xAe();return BT=t,BT}var zT,zG;function SAe(){return zG||(zG=1,zT=wAe()),zT}var _Ae=SAe(),EAe=$e(_Ae),VT={exports:{}},VG={},UG;function CAe(){if(UG)return VG;UG=1;var t=Oe(),e=lr(),r=Ki().f;return t({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!e},{defineProperty:r}),VG}var HG;function NAe(){if(HG)return VT.exports;HG=1,CAe();var t=mt(),e=t.Object,r=VT.exports=function(i,s,o){return e.defineProperty(i,s,o)};return e.defineProperty.sham&&(r.sham=!0),VT.exports}var UT,WG;function Fae(){if(WG)return UT;WG=1;var t=NAe();return UT=t,UT}var HT,KG;function kAe(){if(KG)return HT;KG=1;var t=Fae();return HT=t,HT}var WT,GG;function TAe(){if(GG)return WT;GG=1;var t=kAe();return WT=t,WT}var KT,YG;function OAe(){return YG||(YG=1,KT=TAe()),KT}var jAe=OAe(),PAe=$e(jAe),QG={},XG;function IAe(){if(XG)return QG;XG=1;var t=wr(),e=Ki().f,r=t("metadata"),n=Function.prototype;return n[r]===void 0&&e(n,r,{value:null}),QG}var JG={},ZG;function RAe(){return ZG||(ZG=1,Loe()),JG}var eY={},tY;function MAe(){return tY||(tY=1,Boe()),eY}var rY={},nY;function AAe(){if(nY)return rY;nY=1;var t=Ht();return t("metadata"),rY}var GT,iY;function DAe(){if(iY)return GT;iY=1;var t=Woe();return IAe(),RAe(),MAe(),AAe(),GT=t,GT}var sY={},YT,oY;function qae(){if(oY)return YT;oY=1;var t=wi(),e=rt(),r=t("Symbol"),n=r.keyFor,i=e(r.prototype.valueOf);return YT=r.isRegisteredSymbol||function(o){try{return n(i(o))!==void 0}catch{return!1}},YT}var aY;function $Ae(){if(aY)return sY;aY=1;var t=Oe(),e=qae();return t({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),sY}var lY={},QT,cY;function Lae(){if(cY)return QT;cY=1;for(var t=Nh(),e=wi(),r=rt(),n=km(),i=wr(),s=e("Symbol"),o=s.isWellKnownSymbol,a=e("Object","getOwnPropertyNames"),l=r(s.prototype.valueOf),c=t("wks"),u=0,h=a(s),f=h.length;u<f;u++)try{var p=h[u];n(s[p])&&i(p)}catch{}return QT=function(g){if(o&&o(g))return!0;try{for(var v=l(g),y=0,b=a(c),w=b.length;y<w;y++)if(c[b[y]]==v)return!0}catch{}return!1},QT}var uY;function FAe(){if(uY)return lY;uY=1;var t=Oe(),e=Lae();return t({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),lY}var dY={},hY;function qAe(){if(hY)return dY;hY=1;var t=Ht();return t("customMatcher"),dY}var fY={},pY;function LAe(){if(pY)return fY;pY=1;var t=Ht();return t("observable"),fY}var mY={},gY;function BAe(){if(gY)return mY;gY=1;var t=Oe(),e=qae();return t({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),mY}var yY={},vY;function zAe(){if(vY)return yY;vY=1;var t=Oe(),e=Lae();return t({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),yY}var bY={},xY;function VAe(){if(xY)return bY;xY=1;var t=Ht();return t("matcher"),bY}var wY={},SY;function UAe(){if(SY)return wY;SY=1;var t=Ht();return t("metadataKey"),wY}var _Y={},EY;function HAe(){if(EY)return _Y;EY=1;var t=Ht();return t("patternMatch"),_Y}var CY={},NY;function WAe(){if(NY)return CY;NY=1;var t=Ht();return t("replaceAll"),CY}var XT,kY;function KAe(){if(kY)return XT;kY=1;var t=DAe();return $Ae(),FAe(),qAe(),LAe(),BAe(),zAe(),VAe(),UAe(),HAe(),WAe(),XT=t,XT}var JT,TY;function GAe(){return TY||(TY=1,JT=KAe()),JT}var YAe=GAe(),Lg=$e(YAe),ZT,OY;function QAe(){if(OY)return ZT;OY=1,Ih(),gD(),zoe();var t=wb();return ZT=t.f("iterator"),ZT}var eO,jY;function XAe(){if(jY)return eO;jY=1;var t=QAe();return Rh(),eO=t,eO}var tO,PY;function JAe(){if(PY)return tO;PY=1;var t=XAe();return tO=t,tO}var rO,IY;function ZAe(){if(IY)return rO;IY=1;var t=JAe();return rO=t,rO}var nO,RY;function eDe(){return RY||(RY=1,nO=ZAe()),nO}var tDe=eDe(),rDe=$e(tDe);function Ap(t){"@babel/helpers - typeof";return Ap=typeof Lg=="function"&&typeof rDe=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Lg=="function"&&e.constructor===Lg&&e!==Lg.prototype?"symbol":typeof e},Ap(t)}var iO,MY;function nDe(){if(MY)return iO;MY=1,Voe();var t=wb();return iO=t.f("toPrimitive"),iO}var sO,AY;function iDe(){if(AY)return sO;AY=1;var t=nDe();return sO=t,sO}var oO,DY;function sDe(){if(DY)return oO;DY=1;var t=iDe();return oO=t,oO}var aO,$Y;function oDe(){if($Y)return aO;$Y=1;var t=sDe();return aO=t,aO}var lO,FY;function aDe(){return FY||(FY=1,lO=oDe()),lO}var lDe=aDe(),cDe=$e(lDe);function uDe(t,e){if(Ap(t)!="object"||!t)return t;var r=t[cDe];if(r!==void 0){var n=r.call(t,e);if(Ap(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dDe(t){var e=uDe(t,"string");return Ap(e)=="symbol"?e:e+""}function mo(t,e,r){return(e=dDe(e))in t?PAe(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var qY={},cO,LY;function hDe(){if(LY)return cO;LY=1;var t=Dt(),e=Ze(),r=rt(),n=Gi(),i=Goe().trim,s=tD(),o=r("".charAt),a=t.parseFloat,l=t.Symbol,c=l&&l.iterator,u=1/a(s+"-0")!==-1/0||c&&!e(function(){a(Object(c))});return cO=u?function(f){var p=i(n(f)),m=a(p);return m===0&&o(p,0)==="-"?-0:m}:a,cO}var BY;function fDe(){if(BY)return qY;BY=1;var t=Oe(),e=hDe();return t({global:!0,forced:parseFloat!==e},{parseFloat:e}),qY}var uO,zY;function pDe(){if(zY)return uO;zY=1,fDe();var t=mt();return uO=t.parseFloat,uO}var dO,VY;function mDe(){if(VY)return dO;VY=1;var t=pDe();return dO=t,dO}var hO,UY;function gDe(){return UY||(UY=1,hO=mDe()),hO}var yDe=gDe(),Bae=$e(yDe),HY={},WY;function vDe(){if(WY)return HY;WY=1;var t=Oe(),e=Ze(),r=QA().f,n=e(function(){return!Object.getOwnPropertyNames(1)});return t({target:"Object",stat:!0,forced:n},{getOwnPropertyNames:r}),HY}var fO,KY;function bDe(){if(KY)return fO;KY=1,vDe();var t=mt(),e=t.Object;return fO=function(n){return e.getOwnPropertyNames(n)},fO}var pO,GY;function xDe(){if(GY)return pO;GY=1;var t=bDe();return pO=t,pO}var mO,YY;function wDe(){return YY||(YY=1,mO=xDe()),mO}var SDe=wDe(),_De=$e(SDe),gO,QY;function EDe(){if(QY)return gO;QY=1,qoe();var t=mt();return gO=t.Object.getOwnPropertySymbols,gO}var yO,XY;function CDe(){if(XY)return yO;XY=1;var t=EDe();return yO=t,yO}var vO,JY;function NDe(){return JY||(JY=1,vO=CDe()),vO}var kDe=NDe(),nl=$e(kDe),bO={exports:{}},ZY={},eQ;function TDe(){if(eQ)return ZY;eQ=1;var t=Oe(),e=Ze(),r=vs(),n=pb().f,i=lr(),s=!i||e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getOwnPropertyDescriptor:function(a,l){return n(r(a),l)}}),ZY}var tQ;function ODe(){if(tQ)return bO.exports;tQ=1,TDe();var t=mt(),e=t.Object,r=bO.exports=function(i,s){return e.getOwnPropertyDescriptor(i,s)};return e.getOwnPropertyDescriptor.sham&&(r.sham=!0),bO.exports}var xO,rQ;function jDe(){if(rQ)return xO;rQ=1;var t=ODe();return xO=t,xO}var wO,nQ;function PDe(){return nQ||(nQ=1,wO=jDe()),wO}var IDe=PDe(),yl=$e(IDe),iQ={},sQ;function RDe(){if(sQ)return iQ;sQ=1;var t=Oe(),e=lr(),r=iPe(),n=vs(),i=pb(),s=vb();return t({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(a){for(var l=n(a),c=i.f,u=r(l),h={},f=0,p,m;u.length>f;)m=c(l,p=u[f++]),m!==void 0&&s(h,p,m);return h}}),iQ}var SO,oQ;function MDe(){if(oQ)return SO;oQ=1,RDe();var t=mt();return SO=t.Object.getOwnPropertyDescriptors,SO}var _O,aQ;function ADe(){if(aQ)return _O;aQ=1;var t=MDe();return _O=t,_O}var EO,lQ;function DDe(){return lQ||(lQ=1,EO=ADe()),EO}var $De=DDe(),il=$e($De),CO={exports:{}},cQ={},uQ;function FDe(){if(uQ)return cQ;uQ=1;var t=Oe(),e=lr(),r=YA().f;return t({target:"Object",stat:!0,forced:Object.defineProperties!==r,sham:!e},{defineProperties:r}),cQ}var dQ;function qDe(){if(dQ)return CO.exports;dQ=1,FDe();var t=mt(),e=t.Object,r=CO.exports=function(i,s){return e.defineProperties(i,s)};return e.defineProperties.sham&&(r.sham=!0),CO.exports}var NO,hQ;function LDe(){if(hQ)return NO;hQ=1;var t=qDe();return NO=t,NO}var kO,fQ;function BDe(){return fQ||(fQ=1,kO=LDe()),kO}var zDe=BDe(),Tb=$e(zDe),TO,pQ;function VDe(){return pQ||(pQ=1,TO=Fae()),TO}var UDe=VDe(),Ob=$e(UDe);function vD(t,e){const r=["node","edge","label"];let n=!0;const i=aa(e,"chosen");if(typeof i=="boolean")n=i;else if(typeof i=="object"){if(ht(r).call(r,t)===-1)throw new Error("choosify: subOption '"+t+"' should be one of '"+r.join("', '")+"'");const s=aa(e,["chosen",t]);(typeof s=="boolean"||typeof s=="function")&&(n=s)}return n}function nR(t,e,r){if(t.width<=0||t.height<=0)return!1;if(r!==void 0){const s={x:e.x-r.x,y:e.y-r.y};if(r.angle!==0){const o=-r.angle;e={x:Math.cos(o)*s.x-Math.sin(o)*s.y,y:Math.sin(o)*s.x+Math.cos(o)*s.y}}else e=s}const n=t.x+t.width,i=t.y+t.width;return t.left<e.x&&n>e.x&&t.top<e.y&&i>e.y}function Zv(t){return typeof t=="string"&&t!==""}function zae(t,e,r,n){let i=n.x,s=n.y;if(typeof n.distanceToBorder=="function"){const o=n.distanceToBorder(t,e),a=Math.sin(e)*o,l=Math.cos(e)*o;l===o?(i+=o,s=n.y):a===o?(i=n.x,s-=o):(i+=l,s-=a)}else n.shape.width>n.shape.height?(i=n.x+n.shape.width*.5,s=n.y-r):(i=n.x+r,s=n.y-n.shape.height*.5);return{x:i,y:s}}var OO,mQ;function HDe(){if(mQ)return OO;mQ=1,Ih();var t=sn();return OO=t("Array","values"),OO}var jO,gQ;function WDe(){if(gQ)return jO;gQ=1;var t=HDe();return jO=t,jO}var PO,yQ;function KDe(){if(yQ)return PO;yQ=1,Rh();var t=jh(),e=nn(),r=xr(),n=WDe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return PO=function(o){var a=o.values;return o===i||r(i,o)&&a===i.values||e(s,t(o))?n:a},PO}var IO,vQ;function GDe(){return vQ||(vQ=1,IO=KDe()),IO}var YDe=GDe(),Vae=$e(YDe);class QDe{constructor(e){this.measureText=e,this.current=0,this.width=0,this.height=0,this.lines=[]}_add(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"normal";this.lines[e]===void 0&&(this.lines[e]={width:0,height:0,blocks:[]});let i=r;(r===void 0||r==="")&&(i=" ");const s=this.measureText(i,n),o=pr({},Vae(s));o.text=r,o.width=s.width,o.mod=n,(r===void 0||r==="")&&(o.width=0),this.lines[e].blocks.push(o),this.lines[e].width+=o.width}curWidth(){const e=this.lines[this.current];return e===void 0?0:e.width}append(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,r)}newLine(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,r),this.current++}determineLineHeights(){for(let e=0;e<this.lines.length;e++){const r=this.lines[e];let n=0;if(r.blocks!==void 0)for(let i=0;i<r.blocks.length;i++){const s=r.blocks[i];n<s.height&&(n=s.height)}r.height=n}}determineLabelSize(){let e=0,r=0;for(let n=0;n<this.lines.length;n++){const i=this.lines[n];i.width>e&&(e=i.width),r+=i.height}this.width=e,this.height=r}removeEmptyBlocks(){const e=[];for(let r=0;r<this.lines.length;r++){const n=this.lines[r];if(n.blocks.length===0||r===this.lines.length-1&&n.width===0)continue;const i={};pr(i,n),i.blocks=[];let s;const o=[];for(let a=0;a<n.blocks.length;a++){const l=n.blocks[a];l.width!==0?o.push(l):s===void 0&&(s=l)}o.length===0&&s!==void 0&&o.push(s),i.blocks=o,e.push(i)}return e}finalize(){this.determineLineHeights(),this.determineLabelSize();const e=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:e}}}const XDe={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/_/,"`":/`/,afterBold:/[^*]/,afterItal:/[^_]/,afterMono:/[^`]/};class bQ{constructor(e){this.text=e,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}mod(){return this.modStack.length===0?"normal":this.modStack[0]}modName(){if(this.modStack.length===0)return"normal";if(this.modStack[0]==="mono")return"mono";if(this.bold&&this.ital)return"boldital";if(this.bold)return"bold";if(this.ital)return"ital"}emitBlock(){this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}add(e){e===" "&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1),e!=" "&&(this.buffer+=e)}parseWS(e){return/[ \t]/.test(e)?(this.mono?this.add(e):this.spacing=!0,!0):!1}setTag(e){this.emitBlock(),this[e]=!0,this.modStack.unshift(e)}unsetTag(e){this.emitBlock(),this[e]=!1,this.modStack.shift()}parseStartTag(e,r){return!this.mono&&!this[e]&&this.match(r)?(this.setTag(e),!0):!1}match(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const[n,i]=this.prepareRegExp(e),s=n.test(this.text.substr(this.position,i));return s&&r&&(this.position+=i-1),s}parseEndTag(e,r,n){let i=this.mod()===e;return e==="mono"?i=i&&this.mono:i=i&&!this.mono,i&&this.match(r)?(n!==void 0?(this.position===this.text.length-1||this.match(n,!1))&&this.unsetTag(e):this.unsetTag(e),!0):!1}replace(e,r){return this.match(e)?(this.add(r),this.position+=length-1,!0):!1}prepareRegExp(e){let r,n;if(e instanceof RegExp)n=e,r=1;else{const i=XDe[e];i!==void 0?n=i:n=new RegExp(e),r=e.length}return[n,r]}}class JDe{constructor(e,r,n,i){this.ctx=e,this.parent=r,this.selected=n,this.hover=i;const s=(o,a)=>{if(o===void 0)return 0;const l=this.parent.getFormattingValues(e,n,i,a);let c=0;return o!==""&&(c=this.ctx.measureText(o).width),{width:c,values:l}};this.lines=new QDe(s)}process(e){if(!Zv(e))return this.lines.finalize();const r=this.parent.fontOptions;e=e.replace(/\r\n/g,`
`),e=e.replace(/\r/g,`
`);const n=String(e).split(`
`),i=n.length;if(r.multi)for(let s=0;s<i;s++){const o=this.splitBlocks(n[s],r.multi);if(o!==void 0){if(o.length===0){this.lines.newLine("");continue}if(r.maxWdt>0)for(let a=0;a<o.length;a++){const l=o[a].mod,c=o[a].text;this.splitStringIntoLines(c,l,!0)}else for(let a=0;a<o.length;a++){const l=o[a].mod,c=o[a].text;this.lines.append(c,l)}this.lines.newLine()}}else if(r.maxWdt>0)for(let s=0;s<i;s++)this.splitStringIntoLines(n[s]);else for(let s=0;s<i;s++)this.lines.newLine(n[s]);return this.lines.finalize()}decodeMarkupSystem(e){let r="none";return e==="markdown"||e==="md"?r="markdown":(e===!0||e==="html")&&(r="html"),r}splitHtmlBlocks(e){const r=new bQ(e),n=i=>/&/.test(i)?(r.replace(r.text,"&lt;","<")||r.replace(r.text,"&amp;","&")||r.add("&"),!0):!1;for(;r.position<r.text.length;){const i=r.text.charAt(r.position);r.parseWS(i)||/</.test(i)&&(r.parseStartTag("bold","<b>")||r.parseStartTag("ital","<i>")||r.parseStartTag("mono","<code>")||r.parseEndTag("bold","</b>")||r.parseEndTag("ital","</i>")||r.parseEndTag("mono","</code>"))||n(i)||r.add(i),r.position++}return r.emitBlock(),r.blocks}splitMarkdownBlocks(e){const r=new bQ(e);let n=!0;const i=s=>/\\/.test(s)?(r.position<this.text.length+1&&(r.position++,s=this.text.charAt(r.position),/ \t/.test(s)?r.spacing=!0:(r.add(s),n=!1)),!0):!1;for(;r.position<r.text.length;){const s=r.text.charAt(r.position);r.parseWS(s)||i(s)||(n||r.spacing)&&(r.parseStartTag("bold","*")||r.parseStartTag("ital","_")||r.parseStartTag("mono","`"))||r.parseEndTag("bold","*","afterBold")||r.parseEndTag("ital","_","afterItal")||r.parseEndTag("mono","`","afterMono")||(r.add(s),n=!1),r.position++}return r.emitBlock(),r.blocks}splitBlocks(e,r){const n=this.decodeMarkupSystem(r);if(n==="none")return[{text:e,mod:"normal"}];if(n==="markdown")return this.splitMarkdownBlocks(e);if(n==="html")return this.splitHtmlBlocks(e)}overMaxWidth(e){const r=this.ctx.measureText(e).width;return this.lines.curWidth()+r>this.parent.fontOptions.maxWdt}getLongestFit(e){let r="",n=0;for(;n<e.length;){const s=r+(r===""?"":" ")+e[n];if(this.overMaxWidth(s))break;r=s,n++}return n}getLongestFitWord(e){let r=0;for(;r<e.length&&!this.overMaxWidth(Ps(e).call(e,0,r));)r++;return r}splitStringIntoLines(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.parent.getFormattingValues(this.ctx,this.selected,this.hover,r),e=e.replace(/^( +)/g,"$1\r"),e=e.replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r");let i=e.split("\r");for(;i.length>0;){let s=this.getLongestFit(i);if(s===0){const o=i[0],a=this.getLongestFitWord(o);this.lines.newLine(Ps(o).call(o,0,a),r),i[0]=Ps(o).call(o,a)}else{let o=s;i[s-1]===" "?s--:i[o]===" "&&o++;const a=Ps(i).call(i,0,s).join("");s==i.length&&n?this.lines.append(a,r):this.lines.newLine(a,r),i=Ps(i).call(i,o)}}}}const af=["bold","ital","boldital","mono"];class cd{constructor(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.body=e,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(r),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=n}setOptions(e){if(this.elementOptions=e,this.initFontOptions(e.font),Zv(e.label)?this.labelDirty=!0:e.label=void 0,e.font!==void 0&&e.font!==null){if(typeof e.font=="string")this.baseSize=this.fontOptions.size;else if(typeof e.font=="object"){const r=e.font.size;r!==void 0&&(this.baseSize=r)}}}initFontOptions(e){if(Ge(af,r=>{this.fontOptions[r]={}}),cd.parseFontString(this.fontOptions,e)){this.fontOptions.vadjust=0;return}Ge(e,(r,n)=>{r!=null&&typeof r!="object"&&(this.fontOptions[n]=r)})}static parseFontString(e,r){if(!r||typeof r!="string")return!1;const n=r.split(" ");return e.size=+n[0].replace("px",""),e.face=n[1],e.color=n[2],!0}constrain(e){const r={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},n=aa(e,"widthConstraint");if(typeof n=="number")r.maxWdt=Number(n),r.minWdt=Number(n);else if(typeof n=="object"){const s=aa(e,["widthConstraint","maximum"]);typeof s=="number"&&(r.maxWdt=Number(s));const o=aa(e,["widthConstraint","minimum"]);typeof o=="number"&&(r.minWdt=Number(o))}const i=aa(e,"heightConstraint");if(typeof i=="number")r.minHgt=Number(i);else if(typeof i=="object"){const s=aa(e,["heightConstraint","minimum"]);typeof s=="number"&&(r.minHgt=Number(s));const o=aa(e,["heightConstraint","valign"]);typeof o=="string"&&(o==="top"||o==="bottom")&&(r.valign=o)}return r}update(e,r){this.setOptions(e,!0),this.propagateFonts(r),Et(this.fontOptions,this.constrain(r)),this.fontOptions.chooser=vD("label",r)}adjustSizes(e){const r=e?e.right+e.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=r,this.fontOptions.minWdt-=r);const n=e?e.top+e.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=n)}addFontOptionsToPile(e,r){for(let n=0;n<r.length;++n)this.addFontToPile(e,r[n])}addFontToPile(e,r){if(r===void 0||r.font===void 0||r.font===null)return;const n=r.font;e.push(n)}getBasicOptions(e){const r={};for(let n=0;n<e.length;++n){let i=e[n];const s={};cd.parseFontString(s,i)&&(i=s),Ge(i,(o,a)=>{o!==void 0&&(Object.prototype.hasOwnProperty.call(r,a)||(ht(af).call(af,a)!==-1?r[a]={}:r[a]=o))})}return r}getFontOption(e,r,n){let i;for(let s=0;s<e.length;++s){const o=e[s];if(Object.prototype.hasOwnProperty.call(o,r)){if(i=o[r],i==null)continue;const a={};if(cd.parseFontString(a,i)&&(i=a),Object.prototype.hasOwnProperty.call(i,n))return i[n]}}if(Object.prototype.hasOwnProperty.call(this.fontOptions,n))return this.fontOptions[n];throw new Error("Did not find value for multi-font for property: '"+n+"'")}getFontOptions(e,r){const n={},i=["color","size","face","mod","vadjust"];for(let s=0;s<i.length;++s){const o=i[s];n[o]=this.getFontOption(e,r,o)}return n}propagateFonts(e){const r=[];this.addFontOptionsToPile(r,e),this.fontOptions=this.getBasicOptions(r);for(let n=0;n<af.length;++n){const i=af[n],s=this.fontOptions[i],o=this.getFontOptions(r,i);Ge(o,(a,l)=>{s[l]=a}),s.size=Number(s.size),s.vadjust=Number(s.vadjust)}}draw(e,r,n,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";if(this.elementOptions.label===void 0)return;let a=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&a<this.elementOptions.scaling.label.drawThreshold-1||(a>=this.elementOptions.scaling.label.maxVisible&&(a=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(e,i,s,r,n,o),this._drawBackground(e),this._drawText(e,r,this.size.yLine,o,a))}_drawBackground(e){if(this.fontOptions.background!==void 0&&this.fontOptions.background!=="none"){e.fillStyle=this.fontOptions.background;const r=this.getSize();e.fillRect(r.left,r.top,r.width,r.height)}}_drawText(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"middle",s=arguments.length>4?arguments[4]:void 0;[r,n]=this._setAlignment(e,r,n,i),e.textAlign="left",r=r-this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&(this.fontOptions.valign==="top"&&(n-=(this.size.height-this.size.labelHeight)/2),this.fontOptions.valign==="bottom"&&(n+=(this.size.height-this.size.labelHeight)/2));for(let o=0;o<this.lineCount;o++){const a=this.lines[o];if(a&&a.blocks){let l=0;this.isEdgeLabel||this.fontOptions.align==="center"?l+=(this.size.width-a.width)/2:this.fontOptions.align==="right"&&(l+=this.size.width-a.width);for(let c=0;c<a.blocks.length;c++){const u=a.blocks[c];e.font=u.font;const[h,f]=this._getColor(u.color,s,u.strokeColor);u.strokeWidth>0&&(e.lineWidth=u.strokeWidth,e.strokeStyle=f,e.lineJoin="round"),e.fillStyle=h,u.strokeWidth>0&&e.strokeText(u.text,r+l,n+u.vadjust),e.fillText(u.text,r+l,n+u.vadjust),l+=u.width}n+=a.height}}}_setAlignment(e,r,n,i){if(this.isEdgeLabel&&this.fontOptions.align!=="horizontal"&&this.pointToSelf===!1){r=0,n=0;const s=2;this.fontOptions.align==="top"?(e.textBaseline="alphabetic",n-=2*s):this.fontOptions.align==="bottom"?(e.textBaseline="hanging",n+=2*s):e.textBaseline="middle"}else e.textBaseline=i;return[r,n]}_getColor(e,r,n){let i=e||"#000000",s=n||"#ffffff";if(r<=this.elementOptions.scaling.label.drawThreshold){const o=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-r)));i=Di(i,o),s=Di(s,o)}return[i,s]}getTextSize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this._processLabel(e,r,n),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}getSize(){let r=this.size.left,n=this.size.top-.5*2;if(this.isEdgeLabel){const s=-this.size.width*.5;switch(this.fontOptions.align){case"middle":r=s,n=-this.size.height*.5;break;case"top":r=s,n=-(this.size.height+2);break;case"bottom":r=s,n=2;break}}return{left:r,top:n,width:this.size.width,height:this.size.height}}calculateLabelSize(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";this._processLabel(e,r,n),this.size.left=i-this.size.width*.5,this.size.top=s-this.size.height*.5,this.size.yLine=s+(1-this.lineCount)*.5*this.fontOptions.size,o==="hanging"&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}getFormattingValues(e,r,n,i){const s=function(l,c,u){return c==="normal"?u==="mod"?"":l[u]:l[c][u]!==void 0?l[c][u]:l[u]},o={color:s(this.fontOptions,i,"color"),size:s(this.fontOptions,i,"size"),face:s(this.fontOptions,i,"face"),mod:s(this.fontOptions,i,"mod"),vadjust:s(this.fontOptions,i,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(r||n)&&(i==="normal"&&this.fontOptions.chooser===!0&&this.elementOptions.labelHighlightBold?o.mod="bold":typeof this.fontOptions.chooser=="function"&&this.fontOptions.chooser(o,this.elementOptions.id,r,n));let a="";return o.mod!==void 0&&o.mod!==""&&(a+=o.mod+" "),a+=o.size+"px "+o.face,e.font=a.replace(/"/g,""),o.font=e.font,o.height=o.size,o}differentState(e,r){return e!==this.selectedState||r!==this.hoverState}_processLabelText(e,r,n,i){return new JDe(e,this,r,n).process(i)}_processLabel(e,r,n){if(this.labelDirty===!1&&!this.differentState(r,n))return;const i=this._processLabelText(e,r,n,this.elementOptions.label);this.fontOptions.minWdt>0&&i.width<this.fontOptions.minWdt&&(i.width=this.fontOptions.minWdt),this.size.labelHeight=i.height,this.fontOptions.minHgt>0&&i.height<this.fontOptions.minHgt&&(i.height=this.fontOptions.minHgt),this.lines=i.lines,this.lineCount=i.lines.length,this.size.width=i.width,this.size.height=i.height,this.selectedState=r,this.hoverState=n,this.labelDirty=!1}visible(){return!(this.size.width===0||this.size.height===0||this.elementOptions.label===void 0||this.fontOptions.size*this.body.view.scale<this.elementOptions.scaling.label.drawThreshold-1)}}class lu{constructor(e,r,n){this.body=r,this.labelModule=n,this.setOptions(e),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}setOptions(e){this.options=e}_setMargins(e){this.margin={},this.options.margin&&(typeof this.options.margin=="object"?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),e.adjustSizes(this.margin)}_distanceToBorder(e,r){const n=this.options.borderWidth;return e&&this.resize(e),Math.min(Math.abs(this.width/2/Math.cos(r)),Math.abs(this.height/2/Math.sin(r)))+n}enableShadow(e,r){r.shadow&&(e.shadowColor=r.shadowColor,e.shadowBlur=r.shadowSize,e.shadowOffsetX=r.shadowX,e.shadowOffsetY=r.shadowY)}disableShadow(e,r){r.shadow&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}enableBorderDashes(e,r){if(r.borderDashes!==!1)if(e.setLineDash!==void 0){let n=r.borderDashes;n===!0&&(n=[5,15]),e.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,r.borderDashes=!1}disableBorderDashes(e,r){r.borderDashes!==!1&&(e.setLineDash!==void 0?e.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,r.borderDashes=!1))}needsRefresh(e,r){return this.refreshNeeded===!0?(this.refreshNeeded=!1,!0):this.width===void 0||this.labelModule.differentState(e,r)}initContextForDraw(e,r){const n=r.borderWidth/this.body.view.scale;e.lineWidth=Math.min(this.width,n),e.strokeStyle=r.borderColor,e.fillStyle=r.color}performStroke(e,r){const n=r.borderWidth/this.body.view.scale;e.save(),n>0&&(this.enableBorderDashes(e,r),e.stroke(),this.disableBorderDashes(e,r)),e.restore()}performFill(e,r){e.save(),e.fillStyle=r.color,this.enableShadow(e,r),Mm(e).call(e),this.disableShadow(e,r),e.restore(),this.performStroke(e,r)}_addBoundingBoxMargin(e){this.boundingBox.left-=e,this.boundingBox.top-=e,this.boundingBox.bottom+=e,this.boundingBox.right+=e}_updateBoundingBox(e,r,n,i,s){n!==void 0&&this.resize(n,i,s),this.left=e-this.width/2,this.top=r-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}updateBoundingBox(e,r,n,i,s){this._updateBoundingBox(e,r,n,i,s)}getDimensionsFromLabel(e,r,n){this.textSize=this.labelModule.getTextSize(e,r,n);let i=this.textSize.width,s=this.textSize.height;const o=14;return i===0&&(i=o,s=o),{width:i,height:s}}}let ZDe=class extends lu{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n);this.width=i.width+this.margin.right+this.margin.left,this.height=i.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.initContextForDraw(e,o),Toe(e,this.left,this.top,this.width,this.height,o.borderRadius),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s)}updateBoundingBox(e,r,n,i,s){this._updateBoundingBox(e,r,n,i,s);const o=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(o)}distanceToBorder(e,r){e&&this.resize(e);const n=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(r)),Math.abs(this.height/2/Math.sin(r)))+n}};class bD extends lu{constructor(e,r,n){super(e,r,n),this.labelOffset=0,this.selected=!1}setOptions(e,r,n){this.options=e,r===void 0&&n===void 0||this.setImages(r,n)}setImages(e,r){r&&this.selected?(this.imageObj=r,this.imageObjAlt=e):(this.imageObj=e,this.imageObjAlt=r)}switchImages(e){const r=e&&!this.selected||!e&&this.selected;if(this.selected=e,this.imageObjAlt!==void 0&&r){const n=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=n}}_getImagePadding(){const e={top:0,right:0,bottom:0,left:0};if(this.options.imagePadding){const r=this.options.imagePadding;typeof r=="object"?(e.top=r.top,e.right=r.right,e.bottom=r.bottom,e.left=r.left):(e.top=r,e.right=r,e.bottom=r,e.left=r)}return e}_resizeImage(){let e,r;if(this.options.shapeProperties.useImageSize===!1){let n=1,i=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?n=this.imageObj.width/this.imageObj.height:i=this.imageObj.height/this.imageObj.width),e=this.options.size*2*n,r=this.options.size*2*i}else{const n=this._getImagePadding();e=this.imageObj.width+n.left+n.right,r=this.imageObj.height+n.top+n.bottom}this.width=e,this.height=r,this.radius=.5*this.width}_drawRawCircle(e,r,n,i){this.initContextForDraw(e,i),WA(e,r,n,i.size),this.performFill(e,i)}_drawImageAtPosition(e,r){if(this.imageObj.width!=0){e.globalAlpha=r.opacity!==void 0?r.opacity:1,this.enableShadow(e,r);let n=1;this.options.shapeProperties.interpolation===!0&&(n=this.imageObj.width/this.width/this.body.view.scale);const i=this._getImagePadding(),s=this.left+i.left,o=this.top+i.top,a=this.width-i.left-i.right,l=this.height-i.top-i.bottom;this.imageObj.drawImageAtPosition(e,n,s,o,a,l),this.disableShadow(e,r)}}_drawImageLabel(e,r,n,i,s){let o=0;if(this.height!==void 0){o=this.height*.5;const l=this.labelModule.getTextSize(e,i,s);l.lineCount>=1&&(o+=l.height/2)}const a=n+o;this.options.label&&(this.labelOffset=o),this.labelModule.draw(e,r,a,i,s,"hanging")}}let e$e=class extends bD{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n),s=Math.max(i.width+this.margin.right+this.margin.left,i.height+this.margin.top+this.margin.bottom);this.options.size=s/2,this.width=s,this.height=s,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this._drawRawCircle(e,r,n,o),this.updateBoundingBox(r,n),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,n,i,s)}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size}distanceToBorder(e){return e&&this.resize(e),this.width*.5}};class t$e extends bD{constructor(e,r,n,i,s){super(e,r,n),this.setImages(i,s)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0){const s=this.options.size*2;this.width=s,this.height=s,this.radius=.5*this.width;return}this.needsRefresh(r,n)&&this._resizeImage()}draw(e,r,n,i,s,o){this.switchImages(i),this.resize();let a=r,l=n;this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=r,this.top=n,a+=this.width/2,l+=this.height/2):(this.left=r-this.width/2,this.top=n-this.height/2),this._drawRawCircle(e,a,l,o),e.save(),e.clip(),this._drawImageAtPosition(e,o),e.restore(),this._drawImageLabel(e,a,l,i,s),this.updateBoundingBox(r,n)}updateBoundingBox(e,r){this.options.shapeProperties.coordinateOrigin==="top-left"?(this.boundingBox.top=r,this.boundingBox.left=e,this.boundingBox.right=e+this.options.size*2,this.boundingBox.bottom=r+this.options.size*2):(this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size),this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}distanceToBorder(e){return e&&this.resize(e),this.width*.5}}class vl extends lu{constructor(e,r,n){super(e,r,n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{size:this.options.size};if(this.needsRefresh(r,n)){var s,o;this.labelModule.getTextSize(e,r,n);const a=2*i.size;this.width=(s=this.customSizeWidth)!==null&&s!==void 0?s:a,this.height=(o=this.customSizeHeight)!==null&&o!==void 0?o:a,this.radius=.5*this.width}}_drawShape(e,r,n,i,s,o,a,l){return this.resize(e,o,a,l),this.left=i-this.width/2,this.top=s-this.height/2,this.initContextForDraw(e,l),yje(r)(e,i,s,l.size),this.performFill(e,l),this.options.icon!==void 0&&this.options.icon.code!==void 0&&(e.font=(o?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",e.fillText(this.options.icon.code,i,s)),{drawExternalLabel:()=>{if(this.options.label!==void 0){this.labelModule.calculateLabelSize(e,o,a,i,s,"hanging");const c=s+.5*this.height+.5*this.labelModule.size.height;this.labelModule.draw(e,i,c,o,a,"hanging")}this.updateBoundingBox(i,s)}}}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}function xQ(t,e){var r=Xt(t);if(nl){var n=nl(t);e&&(n=Hn(n).call(n,function(i){return yl(t,i).enumerable})),r.push.apply(r,n)}return r}function r$e(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?xt(r=xQ(Object(i),!0)).call(r,function(s){mo(t,s,i[s])}):il?Tb(t,il(i)):xt(n=xQ(Object(i))).call(n,function(s){Ob(t,s,yl(i,s))})}return t}class n$e extends vl{constructor(e,r,n,i){super(e,r,n,i),this.ctxRenderer=i}draw(e,r,n,i,s,o){this.resize(e,i,s,o),this.left=r-this.width/2,this.top=n-this.height/2,e.save();const a=this.ctxRenderer({ctx:e,id:this.options.id,x:r,y:n,state:{selected:i,hover:s},style:r$e({},o),label:this.options.label});if(a.drawNode!=null&&a.drawNode(),e.restore(),a.drawExternalLabel){const l=a.drawExternalLabel;a.drawExternalLabel=()=>{e.save(),l(),e.restore()}}return a.nodeDimensions&&(this.customSizeWidth=a.nodeDimensions.width,this.customSizeHeight=a.nodeDimensions.height),a}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class i$e extends lu{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){if(this.needsRefresh(r,n)){const s=this.getDimensionsFromLabel(e,r,n).width+this.margin.right+this.margin.left;this.width=s,this.height=s,this.radius=this.width/2}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.initContextForDraw(e,o),Ooe(e,r-this.width/2,n-this.height/2,this.width,this.height),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let s$e=class extends vl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"diamond",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class o$e extends vl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"circle",2,r,n,i,s,o)}distanceToBorder(e){return e&&this.resize(e),this.options.size}}class wQ extends lu{constructor(e,r,n){super(e,r,n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n);this.height=i.height*2,this.width=i.width+i.height,this.radius=.5*this.width}}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width*.5,this.top=n-this.height*.5,this.initContextForDraw(e,o),KI(e,this.left,this.top,this.width,this.height),this.performFill(e,o),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,r,n,i,s)}distanceToBorder(e,r){e&&this.resize(e);const n=this.width*.5,i=this.height*.5,s=Math.sin(r)*n,o=Math.cos(r)*i;return n*i/Math.sqrt(s*s+o*o)}}class a$e extends lu{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){this.needsRefresh(r,n)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}draw(e,r,n,i,s,o){return this.resize(e,i,s),this.options.icon.size=this.options.icon.size||50,this.left=r-this.width/2,this.top=n-this.height/2,this._icon(e,r,n,i,s,o),{drawExternalLabel:()=>{this.options.label!==void 0&&this.labelModule.draw(e,this.left+this.iconSize.width/2+this.margin.left,n+this.height/2+5,i),this.updateBoundingBox(r,n)}}}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.icon.size*.5,this.boundingBox.left=e-this.options.icon.size*.5,this.boundingBox.right=e+this.options.icon.size*.5,this.boundingBox.bottom=r+this.options.icon.size*.5,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+5))}_icon(e,r,n,i,s,o){const a=Number(this.options.icon.size);this.options.icon.code!==void 0?(e.font=[this.options.icon.weight!=null?this.options.icon.weight:i?"bold":"",(this.options.icon.weight!=null&&i?5:0)+a+"px",this.options.icon.face].join(" "),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",this.enableShadow(e,o),e.fillText(this.options.icon.code,r,n),this.disableShadow(e,o)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let l$e=class extends bD{constructor(e,r,n,i,s){super(e,r,n),this.setImages(i,s)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0){const s=this.options.size*2;this.width=s,this.height=s;return}this.needsRefresh(r,n)&&this._resizeImage()}draw(e,r,n,i,s,o){e.save(),this.switchImages(i),this.resize();let a=r,l=n;if(this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=r,this.top=n,a+=this.width/2,l+=this.height/2):(this.left=r-this.width/2,this.top=n-this.height/2),this.options.shapeProperties.useBorderWithImage===!0){const c=this.options.borderWidth,u=this.options.borderWidthSelected||2*this.options.borderWidth,h=(i?u:c)/this.body.view.scale;e.lineWidth=Math.min(this.width,h),e.beginPath();let f=i?this.options.color.highlight.border:s?this.options.color.hover.border:this.options.color.border,p=i?this.options.color.highlight.background:s?this.options.color.hover.background:this.options.color.background;o.opacity!==void 0&&(f=Di(f,o.opacity),p=Di(p,o.opacity)),e.strokeStyle=f,e.fillStyle=p,e.rect(this.left-.5*e.lineWidth,this.top-.5*e.lineWidth,this.width+e.lineWidth,this.height+e.lineWidth),Mm(e).call(e),this.performStroke(e,o),e.closePath()}this._drawImageAtPosition(e,o),this._drawImageLabel(e,a,l,i,s),this.updateBoundingBox(r,n),e.restore()}updateBoundingBox(e,r){this.resize(),this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=e,this.top=r):(this.left=e-this.width/2,this.top=r-this.height/2),this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class c$e extends vl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"square",2,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class u$e extends vl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"hexagon",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class d$e extends vl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"star",4,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class h$e extends lu{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){this.needsRefresh(r,n)&&(this.textSize=this.labelModule.getTextSize(e,r,n),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}draw(e,r,n,i,s,o){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.enableShadow(e,o),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s),this.disableShadow(e,o),this.updateBoundingBox(r,n,e,i,s)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let f$e=class extends vl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"triangle",3,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class p$e extends vl{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,o){return this._drawShape(e,"triangleDown",3,r,n,i,s,o)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}function SQ(t,e){var r=Xt(t);if(nl){var n=nl(t);e&&(n=Hn(n).call(n,function(i){return yl(t,i).enumerable})),r.push.apply(r,n)}return r}function _Q(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?xt(r=SQ(Object(i),!0)).call(r,function(s){mo(t,s,i[s])}):il?Tb(t,il(i)):xt(n=SQ(Object(i))).call(n,function(s){Ob(t,s,yl(i,s))})}return t}class Mt{constructor(e,r,n,i,s,o){this.options=Ya(s),this.globalOptions=s,this.defaultOptions=o,this.body=r,this.edges=[],this.id=void 0,this.imagelist=n,this.grouplist=i,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new cd(this.body,this.options,!1),this.setOptions(e)}attachEdge(e){var r;ht(r=this.edges).call(r,e)===-1&&this.edges.push(e)}detachEdge(e){var r;const n=ht(r=this.edges).call(r,e);if(n!=-1){var i;_o(i=this.edges).call(i,n,1)}}setOptions(e){const r=this.options.shape;if(!e)return;if(typeof e.color<"u"&&(this._localColor=e.color),e.id!==void 0&&(this.id=e.id),this.id===void 0)throw new Error("Node must have an id");Mt.checkMass(e,this.id),e.x!==void 0&&(e.x===null?(this.x=void 0,this.predefinedPosition=!1):(this.x=ss(e.x),this.predefinedPosition=!0)),e.y!==void 0&&(e.y===null?(this.y=void 0,this.predefinedPosition=!1):(this.y=ss(e.y),this.predefinedPosition=!0)),e.size!==void 0&&(this.baseSize=e.size),e.value!==void 0&&(e.value=Bae(e.value)),Mt.parseOptions(this.options,e,!0,this.globalOptions,this.grouplist);const n=[e,this.options,this.defaultOptions];return this.chooser=vD("node",n),this._load_images(),this.updateLabelModule(e),e.opacity!==void 0&&Mt.checkOpacity(e.opacity)&&(this.options.opacity=e.opacity),this.updateShape(r),e.hidden!==void 0||e.physics!==void 0}_load_images(){if((this.options.shape==="circularImage"||this.options.shape==="image")&&this.options.image===void 0)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(this.options.image!==void 0){if(this.imagelist===void 0)throw new Error("Internal Error: No images provided");if(typeof this.options.image=="string")this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(this.options.image.unselected===void 0)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),this.options.image.selected!==void 0?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}static checkOpacity(e){return 0<=e&&e<=1}static checkCoordinateOrigin(e){return e===void 0||e==="center"||e==="top-left"}static updateGroupOptions(e,r,n){var i;if(n===void 0)return;const s=e.group;if(r!==void 0&&r.group!==void 0&&s!==r.group)throw new Error("updateGroupOptions: group values in options don't match.");if(!(typeof s=="number"||typeof s=="string"&&s!=""))return;const a=n.get(s);a.opacity!==void 0&&r.opacity===void 0&&(Mt.checkOpacity(a.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+a.opacity),a.opacity=void 0));const l=Hn(i=_De(r)).call(i,c=>r[c]!=null);l.push("font"),Xv(l,e,a),e.color=JI(e.color)}static parseOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4?arguments[4]:void 0;if(Xv(["color","fixed","shadow"],e,r,n),Mt.checkMass(r),e.opacity!==void 0&&(Mt.checkOpacity(e.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity),e.opacity=void 0)),r.opacity!==void 0&&(Mt.checkOpacity(r.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+r.opacity),r.opacity=void 0)),r.shapeProperties&&!Mt.checkCoordinateOrigin(r.shapeProperties.coordinateOrigin)&&console.error("Invalid option for node coordinateOrigin, found: "+r.shapeProperties.coordinateOrigin),Pi(e,r,"shadow",i),r.color!==void 0&&r.color!==null){const a=JI(r.color);Sae(e.color,a)}else n===!0&&r.color===null&&(e.color=Ya(i.color));r.fixed!==void 0&&r.fixed!==null&&(typeof r.fixed=="boolean"?(e.fixed.x=r.fixed,e.fixed.y=r.fixed):(r.fixed.x!==void 0&&typeof r.fixed.x=="boolean"&&(e.fixed.x=r.fixed.x),r.fixed.y!==void 0&&typeof r.fixed.y=="boolean"&&(e.fixed.y=r.fixed.y))),n===!0&&r.font===null&&(e.font=Ya(i.font)),Mt.updateGroupOptions(e,r,s),r.scaling!==void 0&&Pi(e.scaling,r.scaling,"label",i.scaling)}getFormattingValues(){const e={color:this.options.color.background,opacity:this.options.opacity,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};if(this.selected||this.hover?this.chooser===!0?this.selected?(this.options.borderWidthSelected!=null?e.borderWidth=this.options.borderWidthSelected:e.borderWidth*=2,e.color=this.options.color.highlight.background,e.borderColor=this.options.color.highlight.border,e.shadow=this.options.shadow.enabled):this.hover&&(e.color=this.options.color.hover.background,e.borderColor=this.options.color.hover.border,e.shadow=this.options.shadow.enabled):typeof this.chooser=="function"&&(this.chooser(e,this.options.id,this.selected,this.hover),e.shadow===!1&&(e.shadowColor!==this.options.shadow.color||e.shadowSize!==this.options.shadow.size||e.shadowX!==this.options.shadow.x||e.shadowY!==this.options.shadow.y)&&(e.shadow=!0)):e.shadow=this.options.shadow.enabled,this.options.opacity!==void 0){const r=this.options.opacity;e.borderColor=Di(e.borderColor,r),e.color=Di(e.color,r),e.shadowColor=Di(e.shadowColor,r)}return e}updateLabelModule(e){(this.options.label===void 0||this.options.label===null)&&(this.options.label=""),Mt.updateGroupOptions(this.options,_Q(_Q({},e),{},{color:e&&e.color||this._localColor||void 0}),this.grouplist);const r=this.grouplist.get(this.options.group,!1),n=[e,this.options,r,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,n),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}updateShape(e){if(e===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new ZDe(this.options,this.body,this.labelModule);break;case"circle":this.shape=new e$e(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new t$e(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"custom":this.shape=new n$e(this.options,this.body,this.labelModule,this.options.ctxRenderer);break;case"database":this.shape=new i$e(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new s$e(this.options,this.body,this.labelModule);break;case"dot":this.shape=new o$e(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new wQ(this.options,this.body,this.labelModule);break;case"icon":this.shape=new a$e(this.options,this.body,this.labelModule);break;case"image":this.shape=new l$e(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new c$e(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new u$e(this.options,this.body,this.labelModule);break;case"star":this.shape=new d$e(this.options,this.body,this.labelModule);break;case"text":this.shape=new h$e(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new f$e(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new p$e(this.options,this.body,this.labelModule);break;default:this.shape=new wQ(this.options,this.body,this.labelModule);break}this.needsRefresh()}select(){this.selected=!0,this.needsRefresh()}unselect(){this.selected=!1,this.needsRefresh()}needsRefresh(){this.shape.refreshNeeded=!0}getTitle(){return this.options.title}distanceToBorder(e,r){return this.shape.distanceToBorder(e,r)}isFixed(){return this.options.fixed.x&&this.options.fixed.y}isSelected(){return this.selected}getValue(){return this.options.value}getLabelSize(){return this.labelModule.size()}setValueRange(e,r,n){if(this.options.value!==void 0){const i=this.options.scaling.customScalingFunction(e,r,n,this.options.value),s=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){const o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*o}this.options.size=this.options.scaling.min+i*s}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}draw(e){const r=this.getFormattingValues();return this.shape.draw(e,this.x,this.y,this.selected,this.hover,r)||{}}updateBoundingBox(e){this.shape.updateBoundingBox(this.x,this.y,e)}resize(e){const r=this.getFormattingValues();this.shape.resize(e,this.selected,this.hover,r)}getItemsOnPoint(e){const r=[];return this.labelModule.visible()&&nR(this.labelModule.getSize(),e)&&r.push({nodeId:this.id,labelId:0}),nR(this.shape.boundingBox,e)&&r.push({nodeId:this.id}),r}isOverlappingWith(e){return this.shape.left<e.right&&this.shape.left+this.shape.width>e.left&&this.shape.top<e.bottom&&this.shape.top+this.shape.height>e.top}isBoundingBoxOverlappingWith(e){return this.shape.boundingBox.left<e.right&&this.shape.boundingBox.right>e.left&&this.shape.boundingBox.top<e.bottom&&this.shape.boundingBox.bottom>e.top}static checkMass(e,r){if(e.mass!==void 0&&e.mass<=0){let n="";r!==void 0&&(n=" in node id: "+r),console.error("%cNegative or zero mass disallowed"+n+", setting mass to 1.",Nae),e.mass=1}}}class m$e{constructor(e,r,n,i){var s;if(this.body=e,this.images=r,this.groups=n,this.layoutEngine=i,this.body.functions.createNode=se(s=this.create).call(s,this),this.nodesListeners={add:(o,a)=>{this.add(a.items)},update:(o,a)=>{this.update(a.items,a.data,a.oldData)},remove:(o,a)=>{this.remove(a.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:void 0,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},opacity:void 0,fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(o,a,l,c){if(a===o)return .5;{const u=1/(a-o);return Math.max(0,(c-o)*u)}}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1,coordinateOrigin:"center"},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=Ya(this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e,r;this.body.emitter.on("refreshNodes",se(e=this.refresh).call(e,this)),this.body.emitter.on("refresh",se(r=this.refresh).call(r,this)),this.body.emitter.on("destroy",()=>{Ge(this.nodesListeners,(n,i)=>{this.body.data.nodes&&this.body.data.nodes.off(i,n)}),delete this.body.functions.createNode,delete this.nodesListeners.add,delete this.nodesListeners.update,delete this.nodesListeners.remove,delete this.nodesListeners})}setOptions(e){if(e!==void 0){if(Mt.parseOptions(this.options,e),e.opacity!==void 0&&(rR(e.opacity)||!Hl(e.opacity)||e.opacity<0||e.opacity>1?console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity):this.options.opacity=e.opacity),e.shape!==void 0)for(const r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&this.body.nodes[r].updateShape();if(typeof e.font<"u"||typeof e.widthConstraint<"u"||typeof e.heightConstraint<"u")for(const r of Xt(this.body.nodes))this.body.nodes[r].updateLabelModule(),this.body.nodes[r].needsRefresh();if(e.size!==void 0)for(const r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&this.body.nodes[r].needsRefresh();(e.hidden!==void 0||e.physics!==void 0)&&this.body.emitter.emit("_dataChanged")}}setData(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.data.nodes;if(xoe("id",e))this.body.data.nodes=e;else if(tr(e))this.body.data.nodes=new Yd,this.body.data.nodes.add(e);else if(!e)this.body.data.nodes=new Yd;else throw new TypeError("Array or DataSet expected");if(n&&Ge(this.nodesListeners,function(i,s){n.off(s,i)}),this.body.nodes={},this.body.data.nodes){const i=this;Ge(this.nodesListeners,function(o,a){i.body.data.nodes.on(a,o)});const s=this.body.data.nodes.getIds();this.add(s,!0)}r===!1&&this.body.emitter.emit("_dataChanged")}add(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n;const i=[];for(let s=0;s<e.length;s++){n=e[s];const o=this.body.data.nodes.get(n),a=this.create(o);i.push(a),this.body.nodes[n]=a}this.layoutEngine.positionInitially(i),r===!1&&this.body.emitter.emit("_dataChanged")}update(e,r,n){const i=this.body.nodes;let s=!1;for(let o=0;o<e.length;o++){const a=e[o];let l=i[a];const c=r[o];l!==void 0?l.setOptions(c)&&(s=!0):(s=!0,l=this.create(c),i[a]=l)}!s&&n!==void 0&&(s=EAe(r).call(r,function(o,a){const l=n[a];return l&&l.level!==o.level})),s===!0?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}remove(e){const r=this.body.nodes;for(let n=0;n<e.length;n++){const i=e[n];delete r[i]}this.body.emitter.emit("_dataChanged")}create(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Mt;return new r(e,this.body,this.images,this.groups,this.options,this.defaultOptions)}refresh(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;Ge(this.body.nodes,(r,n)=>{const i=this.body.data.nodes.get(n);i!==void 0&&(e===!0&&r.setOptions({x:null,y:null}),r.setOptions({fixed:!1}),r.setOptions(i))})}getPositions(e){const r={};if(e!==void 0){if(tr(e)===!0){for(let n=0;n<e.length;n++)if(this.body.nodes[e[n]]!==void 0){const i=this.body.nodes[e[n]];r[e[n]]={x:Math.round(i.x),y:Math.round(i.y)}}}else if(this.body.nodes[e]!==void 0){const n=this.body.nodes[e];r[e]={x:Math.round(n.x),y:Math.round(n.y)}}}else for(let n=0;n<this.body.nodeIndices.length;n++){const i=this.body.nodes[this.body.nodeIndices[n]];r[this.body.nodeIndices[n]]={x:Math.round(i.x),y:Math.round(i.y)}}return r}getPosition(e){if(e==null)throw new TypeError("No id was specified for getPosition method.");if(this.body.nodes[e]==null)throw new ReferenceError("NodeId provided for getPosition does not exist. Provided: ".concat(e));return{x:Math.round(this.body.nodes[e].x),y:Math.round(this.body.nodes[e].y)}}storePositions(){const e=[],r=this.body.data.nodes.getDataSet();for(const n of r.get()){const i=n.id,s=this.body.nodes[i],o=Math.round(s.x),a=Math.round(s.y);(n.x!==o||n.y!==a)&&e.push({id:i,x:o,y:a})}r.update(e)}getBoundingBox(e){if(this.body.nodes[e]!==void 0)return this.body.nodes[e].shape.boundingBox}getConnectedNodes(e,r){const n=[];if(this.body.nodes[e]!==void 0){const i=this.body.nodes[e],s={};for(let o=0;o<i.edges.length;o++){const a=i.edges[o];r!=="to"&&a.toId==i.id?s[a.fromId]===void 0&&(n.push(a.fromId),s[a.fromId]=!0):r!=="from"&&a.fromId==i.id&&s[a.toId]===void 0&&(n.push(a.toId),s[a.toId]=!0)}}return n}getConnectedEdges(e){const r=[];if(this.body.nodes[e]!==void 0){const n=this.body.nodes[e];for(let i=0;i<n.edges.length;i++)r.push(n.edges[i].id)}else console.error("NodeId provided for getConnectedEdges does not exist. Provided: ",e);return r}moveNode(e,r,n){this.body.nodes[e]!==void 0?(this.body.nodes[e].x=Number(r),this.body.nodes[e].y=Number(n),Eo(()=>{this.body.emitter.emit("startSimulation")},0)):console.error("Node id supplied to moveNode does not exist. Provided: ",e)}}var EQ={},CQ;function g$e(){if(CQ)return EQ;CQ=1;var t=Oe(),e=Math.hypot,r=Math.abs,n=Math.sqrt,i=!!e&&e(1/0,NaN)!==1/0;return t({target:"Math",stat:!0,arity:2,forced:i},{hypot:function(o,a){for(var l=0,c=0,u=arguments.length,h=0,f,p;c<u;)f=r(arguments[c++]),h<f?(p=h/f,l=l*p*p+1,h=f):f>0?(p=f/h,l+=p*p):l+=f;return h===1/0?1/0:h*n(l)}}),EQ}var RO,NQ;function y$e(){if(NQ)return RO;NQ=1,g$e();var t=mt();return RO=t.Math.hypot,RO}var MO,kQ;function v$e(){if(kQ)return MO;kQ=1;var t=y$e();return MO=t,MO}var AO,TQ;function b$e(){return TQ||(TQ=1,AO=v$e()),AO}var x$e=b$e(),w$e=$e(x$e);class sr{static transform(e,r){tr(e)||(e=[e]);const n=r.point.x,i=r.point.y,s=r.angle,o=r.length;for(let a=0;a<e.length;++a){const l=e[a],c=l.x*Math.cos(s)-l.y*Math.sin(s),u=l.x*Math.sin(s)+l.y*Math.cos(s);l.x=n+o*c,l.y=i+o*u}}static drawPath(e,r){e.beginPath(),e.moveTo(r[0].x,r[0].y);for(let n=1;n<r.length;++n)e.lineTo(r[n].x,r[n].y);e.closePath()}}let S$e=class extends sr{static draw(e,r){if(r.image){e.save(),e.translate(r.point.x,r.point.y),e.rotate(Math.PI/2+r.angle);const n=r.imageWidth!=null?r.imageWidth:r.image.width,i=r.imageHeight!=null?r.imageHeight:r.image.height;r.image.drawImageAtPosition(e,1,-n/2,0,n,i),e.restore()}return!1}};class _$e extends sr{static draw(e,r){const n=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];return sr.transform(n,r),sr.drawPath(e,n),!0}}class E$e{static draw(e,r){const n=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];return sr.transform(n,r),sr.drawPath(e,n),!0}}class C$e{static draw(e,r){const n={x:-.4,y:0};sr.transform(n,r),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";const i=Math.PI,s=r.angle-i/2,o=r.angle+i/2;return e.beginPath(),e.arc(n.x,n.y,r.length*.4,s,o,!1),e.stroke(),!0}}class N$e{static draw(e,r){const n={x:-.3,y:0};sr.transform(n,r),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";const i=Math.PI,s=r.angle+i/2,o=r.angle+3*i/2;return e.beginPath(),e.arc(n.x,n.y,r.length*.4,s,o,!1),e.stroke(),!0}}class k$e{static draw(e,r){const n=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];return sr.transform(n,r),sr.drawPath(e,n),!0}}class T$e{static draw(e,r){const n=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];return sr.transform(n,r),sr.drawPath(e,n),!0}}class O$e{static draw(e,r){const n={x:-.4,y:0};return sr.transform(n,r),WA(e,n.x,n.y,r.length*.4),!0}}class j$e{static draw(e,r){const n=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];return sr.transform(n,r),sr.drawPath(e,n),!0}}class P$e{static draw(e,r){const n=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];return sr.transform(n,r),sr.drawPath(e,n),!0}}class I$e{static draw(e,r){const n=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];return sr.transform(n,r),sr.drawPath(e,n),!0}}class R$e{static draw(e,r){const n=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];return sr.transform(n,r),sr.drawPath(e,n),!0}}class Uae{static draw(e,r){let n;switch(r.type&&(n=r.type.toLowerCase()),n){case"image":return S$e.draw(e,r);case"circle":return O$e.draw(e,r);case"box":return P$e.draw(e,r);case"crow":return E$e.draw(e,r);case"curve":return C$e.draw(e,r);case"diamond":return I$e.draw(e,r);case"inv_curve":return N$e.draw(e,r);case"triangle":return k$e.draw(e,r);case"inv_triangle":return T$e.draw(e,r);case"bar":return j$e.draw(e,r);case"vee":return R$e.draw(e,r);case"arrow":default:return _$e.draw(e,r)}}}function OQ(t,e){var r=Xt(t);if(nl){var n=nl(t);e&&(n=Hn(n).call(n,function(i){return yl(t,i).enumerable})),r.push.apply(r,n)}return r}function jQ(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?xt(r=OQ(Object(i),!0)).call(r,function(s){mo(t,s,i[s])}):il?Tb(t,il(i)):xt(n=OQ(Object(i))).call(n,function(s){Ob(t,s,yl(i,s))})}return t}class Hae{constructor(e,r,n){mo(this,"color",{}),mo(this,"colorDirty",!0),mo(this,"hoverWidth",1.5),mo(this,"selectionWidth",2),this._body=r,this._labelModule=n,this.setOptions(e),this.fromPoint=this.from,this.toPoint=this.to}connect(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to]}cleanup(){return!1}setOptions(e){this.options=e,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.id=this.options.id}drawLine(e,r,n,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.getViaNode();e.strokeStyle=this.getColor(e,r),e.lineWidth=r.width,r.dashes!==!1?this._drawDashedLine(e,r,s):this._drawLine(e,r,s)}_drawLine(e,r,n,i,s){if(this.from!=this.to)this._line(e,r,n,i,s);else{const[o,a,l]=this._getCircleData(e);this._circle(e,r,o,a,l)}}_drawDashedLine(e,r,n,i,s){e.lineCap="round";const o=tr(r.dashes)?r.dashes:[5,5];if(e.setLineDash!==void 0){if(e.save(),e.setLineDash(o),e.lineDashOffset=0,this.from!=this.to)this._line(e,r,n);else{const[a,l,c]=this._getCircleData(e);this._circle(e,r,a,l,c)}e.setLineDash([0]),e.lineDashOffset=0,e.restore()}else{if(this.from!=this.to)joe(e,this.from.x,this.from.y,this.to.x,this.to.y,o);else{const[a,l,c]=this._getCircleData(e);this._circle(e,r,a,l,c)}this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}}findBorderPosition(e,r,n){return this.from!=this.to?this._findBorderPosition(e,r,n):this._findBorderPositionCircle(e,r,n)}findBorderPositions(e){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,e),to:this._findBorderPosition(this.to,e)};{var r;const[n,i]=Ps(r=this._getCircleData(e)).call(r,0,2);return{from:this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:.6,high:.8,direction:1})}}}_getCircleData(e){const r=this.options.selfReference.size;e!==void 0&&this.from.shape.width===void 0&&this.from.shape.resize(e);const n=zae(e,this.options.selfReference.angle,r,this.from);return[n.x,n.y,r]}_pointOnCircle(e,r,n,i){const s=i*2*Math.PI;return{x:e+n*Math.cos(s),y:r-n*Math.sin(s)}}_findBorderPositionCircle(e,r,n){const i=n.x,s=n.y;let o=n.low,a=n.high;const l=n.direction,c=10,u=this.options.selfReference.size,h=.05;let f,p=(o+a)*.5,m=0;this.options.arrowStrikethrough===!0&&(l===-1?m=this.options.endPointOffset.from:l===1&&(m=this.options.endPointOffset.to));let g=0;do{p=(o+a)*.5,f=this._pointOnCircle(i,s,u,p);const v=Math.atan2(e.y-f.y,e.x-f.x),y=e.distanceToBorder(r,v)+m,b=Math.sqrt(Math.pow(f.x-e.x,2)+Math.pow(f.y-e.y,2)),w=y-b;if(Math.abs(w)<h)break;w>0?l>0?o=p:a=p:l>0?a=p:o=p,++g}while(o<=a&&g<c);return jQ(jQ({},f),{},{t:p})}getLineWidth(e,r){return e===!0?Math.max(this.selectionWidth,.3/this._body.view.scale):r===!0?Math.max(this.hoverWidth,.3/this._body.view.scale):Math.max(this.options.width,.3/this._body.view.scale)}getColor(e,r){if(r.inheritsColor!==!1){if(r.inheritsColor==="both"&&this.from.id!==this.to.id){const n=e.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y);let i=this.from.options.color.highlight.border,s=this.to.options.color.highlight.border;return this.from.selected===!1&&this.to.selected===!1?(i=Di(this.from.options.color.border,r.opacity),s=Di(this.to.options.color.border,r.opacity)):this.from.selected===!0&&this.to.selected===!1?s=this.to.options.color.border:this.from.selected===!1&&this.to.selected===!0&&(i=this.from.options.color.border),n.addColorStop(0,i),n.addColorStop(1,s),n}return r.inheritsColor==="to"?Di(this.to.options.color.border,r.opacity):Di(this.from.options.color.border,r.opacity)}else return Di(r.color,r.opacity)}_circle(e,r,n,i,s){this.enableShadow(e,r);let o=0,a=Math.PI*2;if(!this.options.selfReference.renderBehindTheNode){const l=this.options.selfReference.angle,c=this.options.selfReference.angle+Math.PI,u=this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:l,high:c,direction:-1}),h=this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:l,high:c,direction:1});o=Math.atan2(u.y-i,u.x-n),a=Math.atan2(h.y-i,h.x-n)}e.beginPath(),e.arc(n,i,s,o,a,!1),e.stroke(),this.disableShadow(e,r)}getDistanceToEdge(e,r,n,i,s,o){if(this.from!=this.to)return this._getDistanceToEdge(e,r,n,i,s,o);{const[a,l,c]=this._getCircleData(void 0),u=a-s,h=l-o;return Math.abs(Math.sqrt(u*u+h*h)-c)}}_getDistanceToLine(e,r,n,i,s,o){const a=n-e,l=i-r,c=a*a+l*l;let u=((s-e)*a+(o-r)*l)/c;u>1?u=1:u<0&&(u=0);const h=e+u*a,f=r+u*l,p=h-s,m=f-o;return Math.sqrt(p*p+m*m)}getArrowData(e,r,n,i,s,o){let a,l,c,u,h,f,p;const m=o.width;r==="from"?(c=this.from,u=this.to,h=o.fromArrowScale<0,f=Math.abs(o.fromArrowScale),p=o.fromArrowType):r==="to"?(c=this.to,u=this.from,h=o.toArrowScale<0,f=Math.abs(o.toArrowScale),p=o.toArrowType):(c=this.to,u=this.from,h=o.middleArrowScale<0,f=Math.abs(o.middleArrowScale),p=o.middleArrowType);const g=15*f+3*m;if(c!=u){const w=w$e(c.x-u.x,c.y-u.y),x=g/w;if(r!=="middle")if(this.options.smooth.enabled===!0){const S=this._findBorderPosition(c,e,{via:n}),_=this.getPoint(S.t+x*(r==="from"?1:-1),n);a=Math.atan2(S.y-_.y,S.x-_.x),l=S}else a=Math.atan2(c.y-u.y,c.x-u.x),l=this._findBorderPosition(c,e);else{const S=(h?-x:x)/2,_=this.getPoint(.5+S,n),C=this.getPoint(.5-S,n);a=Math.atan2(_.y-C.y,_.x-C.x),l=this.getPoint(.5,n)}}else{const[w,x,S]=this._getCircleData(e);if(r==="from"){const _=this.options.selfReference.angle,C=this.options.selfReference.angle+Math.PI,E=this._findBorderPositionCircle(this.from,e,{x:w,y:x,low:_,high:C,direction:-1});a=E.t*-2*Math.PI+1.5*Math.PI+.1*Math.PI,l=E}else if(r==="to"){const _=this.options.selfReference.angle,C=this.options.selfReference.angle+Math.PI,E=this._findBorderPositionCircle(this.from,e,{x:w,y:x,low:_,high:C,direction:1});a=E.t*-2*Math.PI+1.5*Math.PI-1.1*Math.PI,l=E}else{const _=this.options.selfReference.angle/(2*Math.PI);l=this._pointOnCircle(w,x,S,_),a=_*-2*Math.PI+1.5*Math.PI+.1*Math.PI}}const v=l.x-g*.9*Math.cos(a),y=l.y-g*.9*Math.sin(a);return{point:l,core:{x:v,y},angle:a,length:g,type:p}}drawArrowHead(e,r,n,i,s){e.strokeStyle=this.getColor(e,r),e.fillStyle=e.strokeStyle,e.lineWidth=r.width,Uae.draw(e,s)&&(this.enableShadow(e,r),Mm(e).call(e),this.disableShadow(e,r))}enableShadow(e,r){r.shadow===!0&&(e.shadowColor=r.shadowColor,e.shadowBlur=r.shadowSize,e.shadowOffsetX=r.shadowX,e.shadowOffsetY=r.shadowY)}disableShadow(e,r){r.shadow===!0&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}drawBackground(e,r){if(r.background!==!1){const n={strokeStyle:e.strokeStyle,lineWidth:e.lineWidth,dashes:e.dashes};e.strokeStyle=r.backgroundColor,e.lineWidth=r.backgroundSize,this.setStrokeDashed(e,r.backgroundDashes),e.stroke(),e.strokeStyle=n.strokeStyle,e.lineWidth=n.lineWidth,e.dashes=n.dashes,this.setStrokeDashed(e,r.dashes)}}setStrokeDashed(e,r){if(r!==!1)if(e.setLineDash!==void 0){const n=tr(r)?r:[5,5];e.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.");else e.setLineDash!==void 0?e.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}function PQ(t,e){var r=Xt(t);if(nl){var n=nl(t);e&&(n=Hn(n).call(n,function(i){return yl(t,i).enumerable})),r.push.apply(r,n)}return r}function IQ(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?xt(r=PQ(Object(i),!0)).call(r,function(s){mo(t,s,i[s])}):il?Tb(t,il(i)):xt(n=PQ(Object(i))).call(n,function(s){Ob(t,s,yl(i,s))})}return t}class xD extends Hae{constructor(e,r,n){super(e,r,n)}_findBorderPositionBezier(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this._getViaCoordinates();const i=10,s=.2;let o=!1,a=1,l=0,c=this.to,u,h,f=this.options.endPointOffset?this.options.endPointOffset.to:0;e.id===this.from.id&&(c=this.from,o=!0,f=this.options.endPointOffset?this.options.endPointOffset.from:0),this.options.arrowStrikethrough===!1&&(f=0);let p=0;do{h=(l+a)*.5,u=this.getPoint(h,n);const m=Math.atan2(c.y-u.y,c.x-u.x),g=c.distanceToBorder(r,m)+f,v=Math.sqrt(Math.pow(u.x-c.x,2)+Math.pow(u.y-c.y,2)),y=g-v;if(Math.abs(y)<s)break;y<0?o===!1?l=h:a=h:o===!1?a=h:l=h,++p}while(l<=a&&p<i);return IQ(IQ({},u),{},{t:h})}_getDistanceToBezierEdge(e,r,n,i,s,o,a){let l=1e9,c,u,h,f,p,m=e,g=r;for(u=1;u<10;u++)h=.1*u,f=Math.pow(1-h,2)*e+2*h*(1-h)*a.x+Math.pow(h,2)*n,p=Math.pow(1-h,2)*r+2*h*(1-h)*a.y+Math.pow(h,2)*i,u>0&&(c=this._getDistanceToLine(m,g,f,p,s,o),l=c<l?c:l),m=f,g=p;return l}_bezierCurve(e,r,n,i){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),n!=null&&n.x!=null?i!=null&&i.x!=null?e.bezierCurveTo(n.x,n.y,i.x,i.y,this.toPoint.x,this.toPoint.y):e.quadraticCurveTo(n.x,n.y,this.toPoint.x,this.toPoint.y):e.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(e,r),this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}getViaNode(){return this._getViaCoordinates()}}class RQ extends xD{constructor(e,r,n){super(e,r,n),mo(this,"via",this.via),this._boundFunction=()=>{this.positionBezierNode()},this._body.emitter.on("_repositionBezierNodes",this._boundFunction)}setOptions(e){super.setOptions(e);let r=!1;this.options.physics!==e.physics&&(r=!0),this.options=e,this.id=this.options.id,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.setupSupportNode(),this.connect(),r===!0&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}connect(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.from===void 0||this.to===void 0||this.options.physics===!1?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}cleanup(){return this._body.emitter.off("_repositionBezierNodes",this._boundFunction),this.via!==void 0?(delete this._body.nodes[this.via.id],this.via=void 0,!0):!1}setupSupportNode(){if(this.via===void 0){const e="edgeId:"+this.id,r=this._body.functions.createNode({id:e,shape:"circle",physics:!0,hidden:!0});this._body.nodes[e]=r,this.via=r,this.via.parentEdgeId=this.id,this.positionBezierNode()}}positionBezierNode(){this.via!==void 0&&this.from!==void 0&&this.to!==void 0?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):this.via!==void 0&&(this.via.x=0,this.via.y=0)}_line(e,r,n){this._bezierCurve(e,r,n)}_getViaCoordinates(){return this.via}getViaNode(){return this.via}getPoint(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.via;if(this.from===this.to){const[n,i,s]=this._getCircleData(),o=2*Math.PI*(1-e);return{x:n+s*Math.sin(o),y:i+s-s*(1-Math.cos(o))}}else return{x:Math.pow(1-e,2)*this.fromPoint.x+2*e*(1-e)*r.x+Math.pow(e,2)*this.toPoint.x,y:Math.pow(1-e,2)*this.fromPoint.y+2*e*(1-e)*r.y+Math.pow(e,2)*this.toPoint.y}}_findBorderPosition(e,r){return this._findBorderPositionBezier(e,r,this.via)}_getDistanceToEdge(e,r,n,i,s,o){return this._getDistanceToBezierEdge(e,r,n,i,s,o,this.via)}}class MQ extends xD{constructor(e,r,n){super(e,r,n)}_line(e,r,n){this._bezierCurve(e,r,n)}getViaNode(){return this._getViaCoordinates()}_getViaCoordinates(){const e=this.options.smooth.roundness,r=this.options.smooth.type;let n=Math.abs(this.from.x-this.to.x),i=Math.abs(this.from.y-this.to.y);if(r==="discrete"||r==="diagonalCross"){let s,o;n<=i?s=o=e*i:s=o=e*n,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(o=-o);let a=this.from.x+s,l=this.from.y+o;return r==="discrete"&&(n<=i?a=n<e*i?this.from.x:a:l=i<e*n?this.from.y:l),{x:a,y:l}}else if(r==="straightCross"){let s=(1-e)*n,o=(1-e)*i;return n<=i?(s=0,this.from.y<this.to.y&&(o=-o)):(this.from.x<this.to.x&&(s=-s),o=0),{x:this.to.x+s,y:this.to.y+o}}else if(r==="horizontal"){let s=(1-e)*n;return this.from.x<this.to.x&&(s=-s),{x:this.to.x+s,y:this.from.y}}else if(r==="vertical"){let s=(1-e)*i;return this.from.y<this.to.y&&(s=-s),{x:this.from.x,y:this.to.y+s}}else if(r==="curvedCW"){n=this.to.x-this.from.x,i=this.from.y-this.to.y;const s=Math.sqrt(n*n+i*i),o=Math.PI,l=(Math.atan2(i,n)+(e*.5+.5)*o)%(2*o);return{x:this.from.x+(e*.5+.5)*s*Math.sin(l),y:this.from.y+(e*.5+.5)*s*Math.cos(l)}}else if(r==="curvedCCW"){n=this.to.x-this.from.x,i=this.from.y-this.to.y;const s=Math.sqrt(n*n+i*i),o=Math.PI,l=(Math.atan2(i,n)+(-e*.5+.5)*o)%(2*o);return{x:this.from.x+(e*.5+.5)*s*Math.sin(l),y:this.from.y+(e*.5+.5)*s*Math.cos(l)}}else{let s,o;n<=i?s=o=e*i:s=o=e*n,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(o=-o);let a=this.from.x+s,l=this.from.y+o;return n<=i?this.from.x<=this.to.x?a=this.to.x<a?this.to.x:a:a=this.to.x>a?this.to.x:a:this.from.y>=this.to.y?l=this.to.y>l?this.to.y:l:l=this.to.y<l?this.to.y:l,{x:a,y:l}}}_findBorderPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._findBorderPositionBezier(e,r,n.via)}_getDistanceToEdge(e,r,n,i,s,o){let a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(e,r,n,i,s,o,a)}getPoint(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates();const n=e,i=Math.pow(1-n,2)*this.fromPoint.x+2*n*(1-n)*r.x+Math.pow(n,2)*this.toPoint.x,s=Math.pow(1-n,2)*this.fromPoint.y+2*n*(1-n)*r.y+Math.pow(n,2)*this.toPoint.y;return{x:i,y:s}}}class M$e extends xD{constructor(e,r,n){super(e,r,n)}_getDistanceToBezierEdge2(e,r,n,i,s,o,a,l){let c=1e9,u=e,h=r;const f=[0,0,0,0];for(let p=1;p<10;p++){const m=.1*p;f[0]=Math.pow(1-m,3),f[1]=3*m*Math.pow(1-m,2),f[2]=3*Math.pow(m,2)*(1-m),f[3]=Math.pow(m,3);const g=f[0]*e+f[1]*a.x+f[2]*l.x+f[3]*n,v=f[0]*r+f[1]*a.y+f[2]*l.y+f[3]*i;if(p>0){const y=this._getDistanceToLine(u,h,g,v,s,o);c=y<c?y:c}u=g,h=v}return c}}class AQ extends M$e{constructor(e,r,n){super(e,r,n)}_line(e,r,n){const i=n[0],s=n[1];this._bezierCurve(e,r,i,s)}_getViaCoordinates(){const e=this.from.x-this.to.x,r=this.from.y-this.to.y;let n,i,s,o;const a=this.options.smooth.roundness;return(Math.abs(e)>Math.abs(r)||this.options.smooth.forceDirection===!0||this.options.smooth.forceDirection==="horizontal")&&this.options.smooth.forceDirection!=="vertical"?(i=this.from.y,o=this.to.y,n=this.from.x-a*e,s=this.to.x+a*e):(i=this.from.y-a*r,o=this.to.y+a*r,n=this.from.x,s=this.to.x),[{x:n,y:i},{x:s,y:o}]}getViaNode(){return this._getViaCoordinates()}_findBorderPosition(e,r){return this._findBorderPositionBezier(e,r)}_getDistanceToEdge(e,r,n,i,s,o){let[a,l]=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge2(e,r,n,i,s,o,a,l)}getPoint(e){let[r,n]=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates();const i=e,s=[Math.pow(1-i,3),3*i*Math.pow(1-i,2),3*Math.pow(i,2)*(1-i),Math.pow(i,3)],o=s[0]*this.fromPoint.x+s[1]*r.x+s[2]*n.x+s[3]*this.toPoint.x,a=s[0]*this.fromPoint.y+s[1]*r.y+s[2]*n.y+s[3]*this.toPoint.y;return{x:o,y:a}}}class DQ extends Hae{constructor(e,r,n){super(e,r,n)}_line(e,r){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),e.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}getViaNode(){}getPoint(e){return{x:(1-e)*this.fromPoint.x+e*this.toPoint.x,y:(1-e)*this.fromPoint.y+e*this.toPoint.y}}_findBorderPosition(e,r){let n=this.to,i=this.from;e.id===this.from.id&&(n=this.from,i=this.to);const s=Math.atan2(n.y-i.y,n.x-i.x),o=n.x-i.x,a=n.y-i.y,l=Math.sqrt(o*o+a*a),c=e.distanceToBorder(r,s),u=(l-c)/l;return{x:(1-u)*i.x+u*n.x,y:(1-u)*i.y+u*n.y,t:0}}_getDistanceToEdge(e,r,n,i,s,o){return this._getDistanceToLine(e,r,n,i,s,o)}}class Qa{constructor(e,r,n,i,s){if(r===void 0)throw new Error("No body provided");this.options=Ya(i),this.globalOptions=i,this.defaultOptions=s,this.body=r,this.imagelist=n,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new cd(this.body,this.options,!0),this.setOptions(e)}setOptions(e){if(!e)return;let r=typeof e.physics<"u"&&this.options.physics!==e.physics||typeof e.hidden<"u"&&(this.options.hidden||!1)!==(e.hidden||!1)||typeof e.from<"u"&&this.options.from!==e.from||typeof e.to<"u"&&this.options.to!==e.to;Qa.parseOptions(this.options,e,!0,this.globalOptions),e.id!==void 0&&(this.id=e.id),e.from!==void 0&&(this.fromId=e.from),e.to!==void 0&&(this.toId=e.to),e.title!==void 0&&(this.title=e.title),e.value!==void 0&&(e.value=Bae(e.value));const n=[e,this.options,this.defaultOptions];return this.chooser=vD("edge",n),this.updateLabelModule(e),r=this.updateEdgeType()||r,this._setInteractionWidths(),this.connect(),r}static parseOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Dh(["endPointOffset","arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","selfReference","to","title","value","width","font","chosen","widthConstraint"],e,r,n),r.endPointOffset!==void 0&&r.endPointOffset.from!==void 0&&(Hl(r.endPointOffset.from)?e.endPointOffset.from=r.endPointOffset.from:(e.endPointOffset.from=i.endPointOffset.from!==void 0?i.endPointOffset.from:0,console.error("endPointOffset.from is not a valid number"))),r.endPointOffset!==void 0&&r.endPointOffset.to!==void 0&&(Hl(r.endPointOffset.to)?e.endPointOffset.to=r.endPointOffset.to:(e.endPointOffset.to=i.endPointOffset.to!==void 0?i.endPointOffset.to:0,console.error("endPointOffset.to is not a valid number"))),Zv(r.label)?e.label=r.label:Zv(e.label)||(e.label=void 0),Pi(e,r,"smooth",i),Pi(e,r,"shadow",i),Pi(e,r,"background",i),r.dashes!==void 0&&r.dashes!==null?e.dashes=r.dashes:n===!0&&r.dashes===null&&(e.dashes=hc(i.dashes)),r.scaling!==void 0&&r.scaling!==null?(r.scaling.min!==void 0&&(e.scaling.min=r.scaling.min),r.scaling.max!==void 0&&(e.scaling.max=r.scaling.max),Pi(e.scaling,r.scaling,"label",i.scaling)):n===!0&&r.scaling===null&&(e.scaling=hc(i.scaling)),r.arrows!==void 0&&r.arrows!==null)if(typeof r.arrows=="string"){const a=r.arrows.toLowerCase();e.arrows.to.enabled=ht(a).call(a,"to")!=-1,e.arrows.middle.enabled=ht(a).call(a,"middle")!=-1,e.arrows.from.enabled=ht(a).call(a,"from")!=-1}else if(typeof r.arrows=="object")Pi(e.arrows,r.arrows,"to",i.arrows),Pi(e.arrows,r.arrows,"middle",i.arrows),Pi(e.arrows,r.arrows,"from",i.arrows);else throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+Rm(r.arrows));else n===!0&&r.arrows===null&&(e.arrows=hc(i.arrows));if(r.color!==void 0&&r.color!==null){const a=ad(r.color)?{color:r.color,highlight:r.color,hover:r.color,inherit:!1,opacity:1}:r.color,l=e.color;if(s)Et(l,i.color,!1,n);else for(const c in l)Object.prototype.hasOwnProperty.call(l,c)&&delete l[c];if(ad(l))l.color=l,l.highlight=l,l.hover=l,l.inherit=!1,a.opacity===void 0&&(l.opacity=1);else{let c=!1;a.color!==void 0&&(l.color=a.color,c=!0),a.highlight!==void 0&&(l.highlight=a.highlight,c=!0),a.hover!==void 0&&(l.hover=a.hover,c=!0),a.inherit!==void 0&&(l.inherit=a.inherit),a.opacity!==void 0&&(l.opacity=Math.min(1,Math.max(0,a.opacity))),c===!0?l.inherit=!1:l.inherit===void 0&&(l.inherit="from")}}else n===!0&&r.color===null&&(e.color=Ya(i.color));n===!0&&r.font===null&&(e.font=Ya(i.font)),Object.prototype.hasOwnProperty.call(r,"selfReferenceSize")&&(console.warn("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),e.selfReference.size=r.selfReferenceSize)}getFormattingValues(){const e=this.options.arrows.to===!0||this.options.arrows.to.enabled===!0,r=this.options.arrows.from===!0||this.options.arrows.from.enabled===!0,n=this.options.arrows.middle===!0||this.options.arrows.middle.enabled===!0,i=this.options.color.inherit,s={toArrow:e,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,toArrowSrc:this.options.arrows.to.src,toArrowImageWidth:this.options.arrows.to.imageWidth,toArrowImageHeight:this.options.arrows.to.imageHeight,middleArrow:n,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,middleArrowSrc:this.options.arrows.middle.src,middleArrowImageWidth:this.options.arrows.middle.imageWidth,middleArrowImageHeight:this.options.arrows.middle.imageHeight,fromArrow:r,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,fromArrowSrc:this.options.arrows.from.src,fromArrowImageWidth:this.options.arrows.from.imageWidth,fromArrowImageHeight:this.options.arrows.from.imageHeight,arrowStrikethrough:this.options.arrowStrikethrough,color:i?void 0:this.options.color.color,inheritsColor:i,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover)if(this.chooser===!0){if(this.selected){const o=this.options.selectionWidth;typeof o=="function"?s.width=o(s.width):typeof o=="number"&&(s.width+=o),s.width=Math.max(s.width,.3/this.body.view.scale),s.color=this.options.color.highlight,s.shadow=this.options.shadow.enabled}else if(this.hover){const o=this.options.hoverWidth;typeof o=="function"?s.width=o(s.width):typeof o=="number"&&(s.width+=o),s.width=Math.max(s.width,.3/this.body.view.scale),s.color=this.options.color.hover,s.shadow=this.options.shadow.enabled}}else typeof this.chooser=="function"&&(this.chooser(s,this.options.id,this.selected,this.hover),s.color!==void 0&&(s.inheritsColor=!1),s.shadow===!1&&(s.shadowColor!==this.options.shadow.color||s.shadowSize!==this.options.shadow.size||s.shadowX!==this.options.shadow.x||s.shadowY!==this.options.shadow.y)&&(s.shadow=!0));else s.shadow=this.options.shadow.enabled,s.width=Math.max(s.width,.3/this.body.view.scale);return s}updateLabelModule(e){const r=[e,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,r),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}updateEdgeType(){const e=this.options.smooth;let r=!1,n=!0;return this.edgeType!==void 0&&((this.edgeType instanceof RQ&&e.enabled===!0&&e.type==="dynamic"||this.edgeType instanceof AQ&&e.enabled===!0&&e.type==="cubicBezier"||this.edgeType instanceof MQ&&e.enabled===!0&&e.type!=="dynamic"&&e.type!=="cubicBezier"||this.edgeType instanceof DQ&&e.type.enabled===!1)&&(n=!1),n===!0&&(r=this.cleanup())),n===!0?e.enabled===!0?e.type==="dynamic"?(r=!0,this.edgeType=new RQ(this.options,this.body,this.labelModule)):e.type==="cubicBezier"?this.edgeType=new AQ(this.options,this.body,this.labelModule):this.edgeType=new MQ(this.options,this.body,this.labelModule):this.edgeType=new DQ(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),r}connect(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=this.from!==void 0&&this.to!==void 0,this.connected===!0?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}disconnect(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}getTitle(){return this.title}isSelected(){return this.selected}getValue(){return this.options.value}setValueRange(e,r,n){if(this.options.value!==void 0){const i=this.options.scaling.customScalingFunction(e,r,n,this.options.value),s=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){const o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*o}this.options.width=this.options.scaling.min+i*s}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}_setInteractionWidths(){typeof this.options.hoverWidth=="function"?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,typeof this.options.selectionWidth=="function"?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}draw(e){const r=this.getFormattingValues();if(r.hidden)return;const n=this.edgeType.getViaNode();this.edgeType.drawLine(e,r,this.selected,this.hover,n),this.drawLabel(e,n)}drawArrows(e){const r=this.getFormattingValues();if(r.hidden)return;const n=this.edgeType.getViaNode(),i={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,r.fromArrow&&(i.from=this.edgeType.getArrowData(e,"from",n,this.selected,this.hover,r),r.arrowStrikethrough===!1&&(this.edgeType.fromPoint=i.from.core),r.fromArrowSrc&&(i.from.image=this.imagelist.load(r.fromArrowSrc)),r.fromArrowImageWidth&&(i.from.imageWidth=r.fromArrowImageWidth),r.fromArrowImageHeight&&(i.from.imageHeight=r.fromArrowImageHeight)),r.toArrow&&(i.to=this.edgeType.getArrowData(e,"to",n,this.selected,this.hover,r),r.arrowStrikethrough===!1&&(this.edgeType.toPoint=i.to.core),r.toArrowSrc&&(i.to.image=this.imagelist.load(r.toArrowSrc)),r.toArrowImageWidth&&(i.to.imageWidth=r.toArrowImageWidth),r.toArrowImageHeight&&(i.to.imageHeight=r.toArrowImageHeight)),r.middleArrow&&(i.middle=this.edgeType.getArrowData(e,"middle",n,this.selected,this.hover,r),r.middleArrowSrc&&(i.middle.image=this.imagelist.load(r.middleArrowSrc)),r.middleArrowImageWidth&&(i.middle.imageWidth=r.middleArrowImageWidth),r.middleArrowImageHeight&&(i.middle.imageHeight=r.middleArrowImageHeight)),r.fromArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.from),r.middleArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.middle),r.toArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.to)}drawLabel(e,r){if(this.options.label!==void 0){const n=this.from,i=this.to;this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(e,this.selected,this.hover);let s;if(n.id!=i.id){this.labelModule.pointToSelf=!1,s=this.edgeType.getPoint(.5,r),e.save();const o=this._getRotation(e);o.angle!=0&&(e.translate(o.x,o.y),e.rotate(o.angle)),this.labelModule.draw(e,s.x,s.y,this.selected,this.hover),e.restore()}else{this.labelModule.pointToSelf=!0;const o=zae(e,this.options.selfReference.angle,this.options.selfReference.size,n);s=this._pointOnCircle(o.x,o.y,this.options.selfReference.size,this.options.selfReference.angle),this.labelModule.draw(e,s.x,s.y,this.selected,this.hover)}}}getItemsOnPoint(e){const r=[];if(this.labelModule.visible()){const i=this._getRotation();nR(this.labelModule.getSize(),e,i)&&r.push({edgeId:this.id,labelId:0})}const n={left:e.x,top:e.y};return this.isOverlappingWith(n)&&r.push({edgeId:this.id}),r}isOverlappingWith(e){if(this.connected){const n=this.from.x,i=this.from.y,s=this.to.x,o=this.to.y,a=e.left,l=e.top;return this.edgeType.getDistanceToEdge(n,i,s,o,a,l)<10}else return!1}_getRotation(e){const r=this.edgeType.getViaNode(),n=this.edgeType.getPoint(.5,r);e!==void 0&&this.labelModule.calculateLabelSize(e,this.selected,this.hover,n.x,n.y);const i={x:n.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible()||this.options.font.align==="horizontal")return i;const s=this.from.y-this.to.y,o=this.from.x-this.to.x;let a=Math.atan2(s,o);return(a<-1&&o<0||a>0&&o<0)&&(a+=Math.PI),i.angle=a,i}_pointOnCircle(e,r,n,i){return{x:e+n*Math.cos(i),y:r-n*Math.sin(i)}}select(){this.selected=!0}unselect(){this.selected=!1}cleanup(){return this.edgeType.cleanup()}remove(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}endPointsValid(){return this.body.nodes[this.fromId]!==void 0&&this.body.nodes[this.toId]!==void 0}}class A$e{constructor(e,r,n){var i;this.body=e,this.images=r,this.groups=n,this.body.functions.createEdge=se(i=this.create).call(i,this),this.edgesListeners={add:(s,o)=>{this.add(o.items)},update:(s,o)=>{this.update(o.items)},remove:(s,o)=>{this.remove(o.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},endPointOffset:{from:0,to:0},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(s,o,a,l){if(o===s)return .5;{const c=1/(o-s);return Math.max(0,(l-s)*c)}}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},Et(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e=this,r,n;this.body.emitter.on("_forceDisableDynamicCurves",function(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i==="dynamic"&&(i="continuous");let o=!1;for(const a in e.body.edges)if(Object.prototype.hasOwnProperty.call(e.body.edges,a)){const l=e.body.edges[a],c=e.body.data.edges.get(a);if(c!=null){const u=c.smooth;u!==void 0&&u.enabled===!0&&u.type==="dynamic"&&(i===void 0?l.setOptions({smooth:!1}):l.setOptions({smooth:{type:i}}),o=!0)}}s===!0&&o===!0&&e.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",()=>{this.reconnectEdges()}),this.body.emitter.on("refreshEdges",se(r=this.refresh).call(r,this)),this.body.emitter.on("refresh",se(n=this.refresh).call(n,this)),this.body.emitter.on("destroy",()=>{Ge(this.edgesListeners,(i,s)=>{this.body.data.edges&&this.body.data.edges.off(s,i)}),delete this.body.functions.createEdge,delete this.edgesListeners.add,delete this.edgesListeners.update,delete this.edgesListeners.remove,delete this.edgesListeners})}setOptions(e){if(e!==void 0){Qa.parseOptions(this.options,e,!0,this.defaultOptions,!0);let r=!1;if(e.smooth!==void 0)for(const n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&(r=this.body.edges[n].updateEdgeType()||r);if(e.font!==void 0)for(const n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&this.body.edges[n].updateLabelModule();(e.hidden!==void 0||e.physics!==void 0||r===!0)&&this.body.emitter.emit("_dataChanged")}}setData(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.data.edges;if(xoe("id",e))this.body.data.edges=e;else if(tr(e))this.body.data.edges=new Yd,this.body.data.edges.add(e);else if(!e)this.body.data.edges=new Yd;else throw new TypeError("Array or DataSet expected");if(n&&Ge(this.edgesListeners,(i,s)=>{n.off(s,i)}),this.body.edges={},this.body.data.edges){Ge(this.edgesListeners,(s,o)=>{this.body.data.edges.on(o,s)});const i=this.body.data.edges.getIds();this.add(i,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),r===!1&&this.body.emitter.emit("_dataChanged")}add(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.edges,i=this.body.data.edges;for(let s=0;s<e.length;s++){const o=e[s],a=n[o];a&&a.disconnect();const l=i.get(o,{showInternalIds:!0});n[o]=this.create(l)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),r===!1&&this.body.emitter.emit("_dataChanged")}update(e){const r=this.body.edges,n=this.body.data.edges;let i=!1;for(let s=0;s<e.length;s++){const o=e[s],a=n.get(o),l=r[o];l!==void 0?(l.disconnect(),i=l.setOptions(a)||i,l.connect()):(this.body.edges[o]=this.create(a),i=!0)}i===!0?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}remove(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.length===0)return;const n=this.body.edges;Ge(e,i=>{const s=n[i];s!==void 0&&s.remove()}),r&&this.body.emitter.emit("_dataChanged")}refresh(){Ge(this.body.edges,(e,r)=>{const n=this.body.data.edges.get(r);n!==void 0&&e.setOptions(n)})}create(e){return new Qa(e,this.body,this.images,this.options,this.defaultOptions)}reconnectEdges(){let e;const r=this.body.nodes,n=this.body.edges;for(e in r)Object.prototype.hasOwnProperty.call(r,e)&&(r[e].edges=[]);for(e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=n[e];i.from=null,i.to=null,i.connect()}}getConnectedNodes(e){const r=[];if(this.body.edges[e]!==void 0){const n=this.body.edges[e];n.fromId!==void 0&&r.push(n.fromId),n.toId!==void 0&&r.push(n.toId)}return r}_updateState(){this._addMissingEdges(),this._removeInvalidEdges()}_removeInvalidEdges(){const e=[];Ge(this.body.edges,(r,n)=>{const i=this.body.nodes[r.toId],s=this.body.nodes[r.fromId];i!==void 0&&i.isCluster===!0||s!==void 0&&s.isCluster===!0||(i===void 0||s===void 0)&&e.push(n)}),this.remove(e,!1)}_addMissingEdges(){const e=this.body.data.edges;if(e==null)return;const r=this.body.edges,n=[];xt(e).call(e,(i,s)=>{r[s]===void 0&&n.push(s)}),this.add(n,!0)}}class Wae{constructor(e,r,n){this.body=e,this.physicsBody=r,this.barnesHutTree,this.setOptions(n),this._rng=Cb("BARNES HUT SOLVER")}setOptions(e){this.options=e,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}solve(){if(this.options.gravitationalConstant!==0&&this.physicsBody.physicsNodeIndices.length>0){let e;const r=this.body.nodes,n=this.physicsBody.physicsNodeIndices,i=n.length,s=this._formBarnesHutTree(r,n);this.barnesHutTree=s;for(let o=0;o<i;o++)e=r[n[o]],e.options.mass>0&&this._getForceContributions(s.root,e)}}_getForceContributions(e,r){this._getForceContribution(e.children.NW,r),this._getForceContribution(e.children.NE,r),this._getForceContribution(e.children.SW,r),this._getForceContribution(e.children.SE,r)}_getForceContribution(e,r){if(e.childrenCount>0){const n=e.centerOfMass.x-r.x,i=e.centerOfMass.y-r.y,s=Math.sqrt(n*n+i*i);s*e.calcSize>this.thetaInversed?this._calculateForces(s,n,i,r,e):e.childrenCount===4?this._getForceContributions(e,r):e.children.data.id!=r.id&&this._calculateForces(s,n,i,r,e)}}_calculateForces(e,r,n,i,s){e===0&&(e=.1,r=e),this.overlapAvoidanceFactor<1&&i.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,e-i.shape.radius));const o=this.options.gravitationalConstant*s.mass*i.options.mass/Math.pow(e,3),a=r*o,l=n*o;this.physicsBody.forces[i.id].x+=a,this.physicsBody.forces[i.id].y+=l}_formBarnesHutTree(e,r){let n;const i=r.length;let s=e[r[0]].x,o=e[r[0]].y,a=e[r[0]].x,l=e[r[0]].y;for(let v=1;v<i;v++){const y=e[r[v]],b=y.x,w=y.y;y.options.mass>0&&(b<s&&(s=b),b>a&&(a=b),w<o&&(o=w),w>l&&(l=w))}const c=Math.abs(a-s)-Math.abs(l-o);c>0?(o-=.5*c,l+=.5*c):(s+=.5*c,a-=.5*c);const h=Math.max(1e-5,Math.abs(a-s)),f=.5*h,p=.5*(s+a),m=.5*(o+l),g={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:p-f,maxX:p+f,minY:m-f,maxY:m+f},size:h,calcSize:1/h,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(g.root);for(let v=0;v<i;v++)n=e[r[v]],n.options.mass>0&&this._placeInTree(g.root,n);return g}_updateBranchMass(e,r){const n=e.centerOfMass,i=e.mass+r.options.mass,s=1/i;n.x=n.x*e.mass+r.x*r.options.mass,n.x*=s,n.y=n.y*e.mass+r.y*r.options.mass,n.y*=s,e.mass=i;const o=Math.max(Math.max(r.height,r.radius),r.width);e.maxWidth=e.maxWidth<o?o:e.maxWidth}_placeInTree(e,r,n){(n!=!0||n===void 0)&&this._updateBranchMass(e,r);const i=e.children.NW.range;let s;i.maxX>r.x?i.maxY>r.y?s="NW":s="SW":i.maxY>r.y?s="NE":s="SE",this._placeInRegion(e,r,s)}_placeInRegion(e,r,n){const i=e.children[n];switch(i.childrenCount){case 0:i.children.data=r,i.childrenCount=1,this._updateBranchMass(i,r);break;case 1:i.children.data.x===r.x&&i.children.data.y===r.y?(r.x+=this._rng(),r.y+=this._rng()):(this._splitBranch(i),this._placeInTree(i,r));break;case 4:this._placeInTree(i,r);break}}_splitBranch(e){let r=null;e.childrenCount===1&&(r=e.children.data,e.mass=0,e.centerOfMass.x=0,e.centerOfMass.y=0),e.childrenCount=4,e.children.data=null,this._insertRegion(e,"NW"),this._insertRegion(e,"NE"),this._insertRegion(e,"SW"),this._insertRegion(e,"SE"),r!=null&&this._placeInTree(e,r)}_insertRegion(e,r){let n,i,s,o;const a=.5*e.size;switch(r){case"NW":n=e.range.minX,i=e.range.minX+a,s=e.range.minY,o=e.range.minY+a;break;case"NE":n=e.range.minX+a,i=e.range.maxX,s=e.range.minY,o=e.range.minY+a;break;case"SW":n=e.range.minX,i=e.range.minX+a,s=e.range.minY+a,o=e.range.maxY;break;case"SE":n=e.range.minX+a,i=e.range.maxX,s=e.range.minY+a,o=e.range.maxY;break}e.children[r]={centerOfMass:{x:0,y:0},mass:0,range:{minX:n,maxX:i,minY:s,maxY:o},size:.5*e.size,calcSize:2*e.calcSize,children:{data:null},maxWidth:0,level:e.level+1,childrenCount:0}}_debug(e,r){this.barnesHutTree!==void 0&&(e.lineWidth=1,this._drawBranch(this.barnesHutTree.root,e,r))}_drawBranch(e,r,n){n===void 0&&(n="#FF0000"),e.childrenCount===4&&(this._drawBranch(e.children.NW,r),this._drawBranch(e.children.NE,r),this._drawBranch(e.children.SE,r),this._drawBranch(e.children.SW,r)),r.strokeStyle=n,r.beginPath(),r.moveTo(e.range.minX,e.range.minY),r.lineTo(e.range.maxX,e.range.minY),r.stroke(),r.beginPath(),r.moveTo(e.range.maxX,e.range.minY),r.lineTo(e.range.maxX,e.range.maxY),r.stroke(),r.beginPath(),r.moveTo(e.range.maxX,e.range.maxY),r.lineTo(e.range.minX,e.range.maxY),r.stroke(),r.beginPath(),r.moveTo(e.range.minX,e.range.maxY),r.lineTo(e.range.minX,e.range.minY),r.stroke()}}class D$e{constructor(e,r,n){this._rng=Cb("REPULSION SOLVER"),this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i,s,o,a,l;const c=this.body.nodes,u=this.physicsBody.physicsNodeIndices,h=this.physicsBody.forces,f=this.options.nodeDistance,p=-2/3/f,m=4/3;for(let g=0;g<u.length-1;g++){a=c[u[g]];for(let v=g+1;v<u.length;v++)l=c[u[v]],e=l.x-a.x,r=l.y-a.y,n=Math.sqrt(e*e+r*r),n===0&&(n=.1*this._rng(),e=n),n<2*f&&(n<.5*f?o=1:o=p*n+m,o=o/n,i=e*o,s=r*o,h[a.id].x-=i,h[a.id].y-=s,h[l.id].x+=i,h[l.id].y+=s)}}}class $$e{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e,this.overlapAvoidanceFactor=Math.max(0,Math.min(1,this.options.avoidOverlap||0))}solve(){const e=this.body.nodes,r=this.physicsBody.physicsNodeIndices,n=this.physicsBody.forces,i=this.options.nodeDistance;for(let s=0;s<r.length-1;s++){const o=e[r[s]];for(let a=s+1;a<r.length;a++){const l=e[r[a]];if(o.level===l.level){const c=i+this.overlapAvoidanceFactor*((o.shape.radius||0)/2+(l.shape.radius||0)/2),u=l.x-o.x,h=l.y-o.y,f=Math.sqrt(u*u+h*h),p=.05;let m;f<c?m=-Math.pow(p*f,2)+Math.pow(p*c,2):m=0,f!==0&&(m=m/f);const g=u*m,v=h*m;n[o.id].x-=g,n[o.id].y-=v,n[l.id].x+=g,n[l.id].y+=v}}}}}class DO{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r;const n=this.physicsBody.physicsEdgeIndices,i=this.body.edges;let s,o,a;for(let l=0;l<n.length;l++)r=i[n[l]],r.connected===!0&&r.toId!==r.fromId&&this.body.nodes[r.toId]!==void 0&&this.body.nodes[r.fromId]!==void 0&&(r.edgeType.via!==void 0?(e=r.options.length===void 0?this.options.springLength:r.options.length,s=r.to,o=r.edgeType.via,a=r.from,this._calculateSpringForce(s,o,.5*e),this._calculateSpringForce(o,a,.5*e)):(e=r.options.length===void 0?this.options.springLength*1.5:r.options.length,this._calculateSpringForce(r.from,r.to,e)))}_calculateSpringForce(e,r,n){const i=e.x-r.x,s=e.y-r.y,o=Math.max(Math.sqrt(i*i+s*s),.01),a=this.options.springConstant*(n-o)/o,l=i*a,c=s*a;this.physicsBody.forces[e.id]!==void 0&&(this.physicsBody.forces[e.id].x+=l,this.physicsBody.forces[e.id].y+=c),this.physicsBody.forces[r.id]!==void 0&&(this.physicsBody.forces[r.id].x-=l,this.physicsBody.forces[r.id].y-=c)}}class F$e{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i,s,o,a,l;const c=this.body.edges,u=.5,h=this.physicsBody.physicsEdgeIndices,f=this.physicsBody.physicsNodeIndices,p=this.physicsBody.forces;for(let x=0;x<f.length;x++){const S=f[x];p[S].springFx=0,p[S].springFy=0}for(let x=0;x<h.length;x++)r=c[h[x]],r.connected===!0&&(e=r.options.length===void 0?this.options.springLength:r.options.length,n=r.from.x-r.to.x,i=r.from.y-r.to.y,l=Math.sqrt(n*n+i*i),l=l===0?.01:l,a=this.options.springConstant*(e-l)/l,s=n*a,o=i*a,r.to.level!=r.from.level?(p[r.toId]!==void 0&&(p[r.toId].springFx-=s,p[r.toId].springFy-=o),p[r.fromId]!==void 0&&(p[r.fromId].springFx+=s,p[r.fromId].springFy+=o)):(p[r.toId]!==void 0&&(p[r.toId].x-=u*s,p[r.toId].y-=u*o),p[r.fromId]!==void 0&&(p[r.fromId].x+=u*s,p[r.fromId].y+=u*o)));a=1;let m,g;for(let x=0;x<f.length;x++){const S=f[x];m=Math.min(a,Math.max(-a,p[S].springFx)),g=Math.min(a,Math.max(-a,p[S].springFy)),p[S].x+=m,p[S].y+=g}let v=0,y=0;for(let x=0;x<f.length;x++){const S=f[x];v+=p[S].x,y+=p[S].y}const b=v/f.length,w=y/f.length;for(let x=0;x<f.length;x++){const S=f[x];p[S].x-=b,p[S].y-=w}}}class hy{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i;const s=this.body.nodes,o=this.physicsBody.physicsNodeIndices,a=this.physicsBody.forces;for(let l=0;l<o.length;l++){const c=o[l];i=s[c],e=-i.x,r=-i.y,n=Math.sqrt(e*e+r*r),this._calculateForces(n,e,r,a,i)}}_calculateForces(e,r,n,i,s){const o=e===0?0:this.options.centralGravity/e;i[s.id].x=r*o,i[s.id].y=n*o}}class q$e extends Wae{constructor(e,r,n){super(e,r,n),this._rng=Cb("FORCE ATLAS 2 BASED REPULSION SOLVER")}_calculateForces(e,r,n,i,s){e===0&&(e=.1*this._rng(),r=e),this.overlapAvoidanceFactor<1&&i.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,e-i.shape.radius));const o=i.edges.length+1,a=this.options.gravitationalConstant*s.mass*i.options.mass*o/Math.pow(e,2),l=r*a,c=n*a;this.physicsBody.forces[i.id].x+=l,this.physicsBody.forces[i.id].y+=c}}class L$e extends hy{constructor(e,r,n){super(e,r,n)}_calculateForces(e,r,n,i,s){if(e>0){const o=s.edges.length+1,a=this.options.centralGravity*o*s.options.mass;i[s.id].x=r*a,i[s.id].y=n*a}}}class B$e{constructor(e){this.body=e,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}},pr(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("initPhysics",()=>{this.initPhysics()}),this.body.emitter.on("_layoutFailed",()=>{this.layoutFailed=!0}),this.body.emitter.on("resetPhysics",()=>{this.stopSimulation(),this.ready=!1}),this.body.emitter.on("disablePhysics",()=>{this.physicsEnabled=!1,this.stopSimulation()}),this.body.emitter.on("restorePhysics",()=>{this.setOptions(this.options),this.ready===!0&&this.startSimulation()}),this.body.emitter.on("startSimulation",()=>{this.ready===!0&&this.startSimulation()}),this.body.emitter.on("stopSimulation",()=>{this.stopSimulation()}),this.body.emitter.on("destroy",()=>{this.stopSimulation(!1),this.body.emitter.off()}),this.body.emitter.on("_dataChanged",()=>{this.updatePhysicsData()})}setOptions(e){if(e!==void 0)if(e===!1)this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation();else if(e===!0)this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation();else{this.physicsEnabled=!0,Xv(["stabilization"],this.options,e),Pi(this.options,e,"stabilization"),e.enabled===void 0&&(this.options.enabled=!0),this.options.enabled===!1&&(this.physicsEnabled=!1,this.stopSimulation());const r=this.options.wind;r&&((typeof r.x!="number"||rR(r.x))&&(r.x=0),(typeof r.y!="number"||rR(r.y))&&(r.y=0)),this.timestep=this.options.timestep}this.init()}init(){let e;this.options.solver==="forceAtlas2Based"?(e=this.options.forceAtlas2Based,this.nodesSolver=new q$e(this.body,this.physicsBody,e),this.edgesSolver=new DO(this.body,this.physicsBody,e),this.gravitySolver=new L$e(this.body,this.physicsBody,e)):this.options.solver==="repulsion"?(e=this.options.repulsion,this.nodesSolver=new D$e(this.body,this.physicsBody,e),this.edgesSolver=new DO(this.body,this.physicsBody,e),this.gravitySolver=new hy(this.body,this.physicsBody,e)):this.options.solver==="hierarchicalRepulsion"?(e=this.options.hierarchicalRepulsion,this.nodesSolver=new $$e(this.body,this.physicsBody,e),this.edgesSolver=new F$e(this.body,this.physicsBody,e),this.gravitySolver=new hy(this.body,this.physicsBody,e)):(e=this.options.barnesHut,this.nodesSolver=new Wae(this.body,this.physicsBody,e),this.edgesSolver=new DO(this.body,this.physicsBody,e),this.gravitySolver=new hy(this.body,this.physicsBody,e)),this.modelOptions=e}initPhysics(){this.physicsEnabled===!0&&this.options.enabled===!0?this.options.stabilization.enabled===!0?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}startSimulation(){if(this.physicsEnabled===!0&&this.options.enabled===!0){if(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),this.viewFunction===void 0){var e;this.viewFunction=se(e=this.simulationStep).call(e,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}else this.body.emitter.emit("_redraw")}stopSimulation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.stabilized=!0,e===!0&&this._emitStabilized(),this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,e===!0&&this.body.emitter.emit("_stopRendering"))}simulationStep(){const e=Kv();this.physicsTick(),(Kv()-e<.4*this.simulationInterval||this.runDoubleSpeed===!0)&&this.stabilized===!1&&(this.physicsTick(),this.runDoubleSpeed=!0),this.stabilized===!0&&this.stopSimulation()}_emitStabilized(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.stabilizationIterations;(this.stabilizationIterations>1||this.startedStabilization===!0)&&Eo(()=>{this.body.emitter.emit("stabilized",{iterations:e}),this.startedStabilization=!1,this.stabilizationIterations=0},0)}physicsStep(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}adjustTimeStep(){this._evaluateStepQuality()===!0?this.timestep=1.2*this.timestep:this.timestep/1.2<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/1.2))}physicsTick(){this._startStabilizing(),this.stabilized!==!0&&(this.adaptiveTimestep===!0&&this.adaptiveTimestepEnabled===!0?(this.adaptiveCounter%this.adaptiveInterval===0?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1):(this.timestep=this.options.timestep,this.physicsStep()),this.stabilized===!0&&this.revert(),this.stabilizationIterations++)}updatePhysicsData(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];const e=this.body.nodes,r=this.body.edges;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&e[n].options.physics===!0&&this.physicsBody.physicsNodeIndices.push(e[n].id);for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&r[n].options.physics===!0&&this.physicsBody.physicsEdgeIndices.push(r[n].id);for(let n=0;n<this.physicsBody.physicsNodeIndices.length;n++){const i=this.physicsBody.physicsNodeIndices[n];this.physicsBody.forces[i]={x:0,y:0},this.physicsBody.velocities[i]===void 0&&(this.physicsBody.velocities[i]={x:0,y:0})}for(const n in this.physicsBody.velocities)e[n]===void 0&&delete this.physicsBody.velocities[n]}revert(){const e=Xt(this.previousStates),r=this.body.nodes,n=this.physicsBody.velocities;this.referenceState={};for(let i=0;i<e.length;i++){const s=e[i];r[s]!==void 0?r[s].options.physics===!0&&(this.referenceState[s]={positions:{x:r[s].x,y:r[s].y}},n[s].x=this.previousStates[s].vx,n[s].y=this.previousStates[s].vy,r[s].x=this.previousStates[s].x,r[s].y=this.previousStates[s].y):delete this.previousStates[s]}}_evaluateStepQuality(){let e,r,n;const i=this.body.nodes,s=this.referenceState,o=.3;for(const a in this.referenceState)if(Object.prototype.hasOwnProperty.call(this.referenceState,a)&&i[a]!==void 0&&(e=i[a].x-s[a].positions.x,r=i[a].y-s[a].positions.y,n=Math.sqrt(Math.pow(e,2)+Math.pow(r,2)),n>o))return!1;return!0}moveNodes(){const e=this.physicsBody.physicsNodeIndices;let r=0,n=0;const i=5;for(let s=0;s<e.length;s++){const o=e[s],a=this._performStep(o);r=Math.max(r,a),n+=a}this.adaptiveTimestepEnabled=n/e.length<i,this.stabilized=r<this.options.minVelocity}calculateComponentVelocity(e,r,n){const i=this.modelOptions.damping*e,s=(r-i)/n;e+=s*this.timestep;const o=this.options.maxVelocity||1e9;return Math.abs(e)>o&&(e=e>0?o:-o),e}_performStep(e){const r=this.body.nodes[e],n=this.physicsBody.forces[e];this.options.wind&&(n.x+=this.options.wind.x,n.y+=this.options.wind.y);const i=this.physicsBody.velocities[e];return this.previousStates[e]={x:r.x,y:r.y,vx:i.x,vy:i.y},r.options.fixed.x===!1?(i.x=this.calculateComponentVelocity(i.x,n.x,r.options.mass),r.x+=i.x*this.timestep):(n.x=0,i.x=0),r.options.fixed.y===!1?(i.y=this.calculateComponentVelocity(i.y,n.y,r.options.mass),r.y+=i.y*this.timestep):(n.y=0,i.y=0),Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2))}_freezeNodes(){const e=this.body.nodes;for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&e[r].x&&e[r].y){const n=e[r].options.fixed;this.freezeCache[r]={x:n.x,y:n.y},n.x=!0,n.y=!0}}_restoreFrozenNodes(){const e=this.body.nodes;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&this.freezeCache[r]!==void 0&&(e[r].options.fixed.x=this.freezeCache[r].x,e[r].options.fixed.y=this.freezeCache[r].y);this.freezeCache={}}stabilize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.stabilization.iterations;if(typeof e!="number"&&(e=this.options.stabilization.iterations,console.error("The stabilize method needs a numeric amount of iterations. Switching to default: ",e)),this.physicsBody.physicsNodeIndices.length===0){this.ready=!0;return}this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=e,this.options.stabilization.onlyDynamicEdges===!0&&this._freezeNodes(),this.stabilizationIterations=0,Eo(()=>this._stabilizationBatch(),0)}_startStabilizing(){return this.startedStabilization===!0?!1:(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}_stabilizationBatch(){const e=()=>this.stabilized===!1&&this.stabilizationIterations<this.targetIterations,r=()=>{this.body.emitter.emit("stabilizationProgress",{iterations:this.stabilizationIterations,total:this.targetIterations})};this._startStabilizing()&&r();let n=0;for(;e()&&n<this.options.stabilization.updateInterval;)this.physicsTick(),n++;if(r(),e()){var i;Eo(se(i=this._stabilizationBatch).call(i,this),0)}else this._finalizeStabilization()}_finalizeStabilization(){this.body.emitter.emit("_allowRedraw"),this.options.stabilization.fit===!0&&this.body.emitter.emit("fit"),this.options.stabilization.onlyDynamicEdges===!0&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),this.stabilized===!0?this._emitStabilized():this.startSimulation(),this.ready=!0}_drawForces(e){for(let r=0;r<this.physicsBody.physicsNodeIndices.length;r++){const n=this.physicsBody.physicsNodeIndices[r],i=this.body.nodes[n],s=this.physicsBody.forces[n],o=20,a=.03,l=Math.sqrt(Math.pow(s.x,2)+Math.pow(s.x,2)),c=Math.min(Math.max(5,l),15),u=3*c,h=ZI((180-Math.min(1,Math.max(0,a*l))*180)/360,1,1),f={x:i.x+o*s.x,y:i.y+o*s.y};e.lineWidth=c,e.strokeStyle=h,e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(f.x,f.y),e.stroke();const p=Math.atan2(s.y,s.x);e.fillStyle=h,Uae.draw(e,{type:"arrow",point:f,angle:p,length:u}),Mm(e).call(e)}}}const Yr=[];for(let t=0;t<256;++t)Yr.push((t+256).toString(16).slice(1));function z$e(t,e=0){return(Yr[t[e+0]]+Yr[t[e+1]]+Yr[t[e+2]]+Yr[t[e+3]]+"-"+Yr[t[e+4]]+Yr[t[e+5]]+"-"+Yr[t[e+6]]+Yr[t[e+7]]+"-"+Yr[t[e+8]]+Yr[t[e+9]]+"-"+Yr[t[e+10]]+Yr[t[e+11]]+Yr[t[e+12]]+Yr[t[e+13]]+Yr[t[e+14]]+Yr[t[e+15]]).toLowerCase()}let $O;const V$e=new Uint8Array(16);function U$e(){if(!$O){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");$O=crypto.getRandomValues.bind(crypto)}return $O(V$e)}const H$e=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var $Q={randomUUID:H$e};function W$e(t,e,r){var i;t=t||{};const n=t.random??((i=t.rng)==null?void 0:i.call(t))??U$e();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,z$e(n)}function Vf(t,e,r){return $Q.randomUUID&&!t?$Q.randomUUID():W$e(t)}class Nn{constructor(){}static getRange(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=1e9,i=-1e9,s=1e9,o=-1e9,a;if(r.length>0)for(let l=0;l<r.length;l++)a=e[r[l]],s>a.shape.boundingBox.left&&(s=a.shape.boundingBox.left),o<a.shape.boundingBox.right&&(o=a.shape.boundingBox.right),n>a.shape.boundingBox.top&&(n=a.shape.boundingBox.top),i<a.shape.boundingBox.bottom&&(i=a.shape.boundingBox.bottom);return s===1e9&&o===-1e9&&n===1e9&&i===-1e9&&(n=0,i=0,s=0,o=0),{minX:s,maxX:o,minY:n,maxY:i}}static getRangeCore(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=1e9,i=-1e9,s=1e9,o=-1e9,a;if(r.length>0)for(let l=0;l<r.length;l++)a=e[r[l]],s>a.x&&(s=a.x),o<a.x&&(o=a.x),n>a.y&&(n=a.y),i<a.y&&(i=a.y);return s===1e9&&o===-1e9&&n===1e9&&i===-1e9&&(n=0,i=0,s=0,o=0),{minX:s,maxX:o,minY:n,maxY:i}}static findCenter(e){return{x:.5*(e.maxX+e.minX),y:.5*(e.maxY+e.minY)}}static cloneOptions(e,r){const n={};return r===void 0||r==="node"?(Et(n,e.options,!0),n.x=e.x,n.y=e.y,n.amountOfConnections=e.edges.length):Et(n,e.options,!0),n}}class K$e extends Mt{constructor(e,r,n,i,s,o){super(e,r,n,i,s,o),this.isCluster=!0,this.containedNodes={},this.containedEdges={}}_openChildCluster(e){const r=this.body.nodes[e];if(this.containedNodes[e]===void 0)throw new Error("node with id: "+e+" not in current cluster");if(!r.isCluster)throw new Error("node with id: "+e+" is not a cluster");delete this.containedNodes[e],Ge(r.edges,n=>{delete this.containedEdges[n.id]}),Ge(r.containedNodes,(n,i)=>{this.containedNodes[i]=n}),r.containedNodes={},Ge(r.containedEdges,(n,i)=>{this.containedEdges[i]=n}),r.containedEdges={},Ge(r.edges,n=>{Ge(this.edges,i=>{var s,o;const a=ht(s=i.clusteringEdgeReplacingIds).call(s,n.id);a!==-1&&(Ge(n.clusteringEdgeReplacingIds,l=>{i.clusteringEdgeReplacingIds.push(l),this.body.edges[l].edgeReplacedById=i.id}),_o(o=i.clusteringEdgeReplacingIds).call(o,a,1))})}),r.edges=[]}}class G$e{constructor(e){this.body=e,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},pr(this.options,this.defaultOptions),this.body.emitter.on("_resetData",()=>{this.clusteredNodes={},this.clusteredEdges={}})}clusterByHubsize(e,r){e===void 0?e=this._getHubSize():typeof e=="object"&&(r=this._checkOptions(e),e=this._getHubSize());const n=[];for(let i=0;i<this.body.nodeIndices.length;i++){const s=this.body.nodes[this.body.nodeIndices[i]];s.edges.length>=e&&n.push(s.id)}for(let i=0;i<n.length;i++)this.clusterByConnection(n[i],r,!0);this.body.emitter.emit("_dataChanged")}cluster(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.joinCondition===void 0)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");e=this._checkOptions(e);const n={},i={};Ge(this.body.nodes,(s,o)=>{s.options&&e.joinCondition(s.options)===!0&&(n[o]=s,Ge(s.edges,a=>{this.clusteredEdges[a.id]===void 0&&(i[a.id]=a)}))}),this._cluster(n,i,e,r)}clusterByEdgeCount(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;r=this._checkOptions(r);const i=[],s={};let o,a,l;for(let c=0;c<this.body.nodeIndices.length;c++){const u={},h={},f=this.body.nodeIndices[c],p=this.body.nodes[f];if(s[f]===void 0){l=0,a=[];for(let m=0;m<p.edges.length;m++)o=p.edges[m],this.clusteredEdges[o.id]===void 0&&(o.toId!==o.fromId&&l++,a.push(o));if(l===e){const m=function(v){if(r.joinCondition===void 0||r.joinCondition===null)return!0;const y=Nn.cloneOptions(v);return r.joinCondition(y)};let g=!0;for(let v=0;v<a.length;v++){o=a[v];const y=this._getConnectedId(o,f);if(m(p))h[o.id]=o,u[f]=p,u[y]=this.body.nodes[y],s[f]=!0;else{g=!1;break}}if(Xt(u).length>0&&Xt(h).length>0&&g===!0){const y=function(){for(let b=0;b<i.length;++b)for(const w in u)if(i[b].nodes[w]!==void 0)return i[b]}();if(y!==void 0){for(const b in u)y.nodes[b]===void 0&&(y.nodes[b]=u[b]);for(const b in h)y.edges[b]===void 0&&(y.edges[b]=h[b])}else i.push({nodes:u,edges:h})}}}}for(let c=0;c<i.length;c++)this._cluster(i[c].nodes,i[c].edges,r,!1);n===!0&&this.body.emitter.emit("_dataChanged")}clusterOutliers(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(1,e,r)}clusterBridges(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(2,e,r)}clusterByConnection(e,r){var n;let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0)throw new Error("No nodeId supplied to clusterByConnection!");if(this.body.nodes[e]===void 0)throw new Error("The nodeId given to clusterByConnection does not exist!");const s=this.body.nodes[e];r=this._checkOptions(r,s),r.clusterNodeProperties.x===void 0&&(r.clusterNodeProperties.x=s.x),r.clusterNodeProperties.y===void 0&&(r.clusterNodeProperties.y=s.y),r.clusterNodeProperties.fixed===void 0&&(r.clusterNodeProperties.fixed={},r.clusterNodeProperties.fixed.x=s.options.fixed.x,r.clusterNodeProperties.fixed.y=s.options.fixed.y);const o={},a={},l=s.id,c=Nn.cloneOptions(s);o[l]=s;for(let h=0;h<s.edges.length;h++){const f=s.edges[h];if(this.clusteredEdges[f.id]===void 0){const p=this._getConnectedId(f,l);if(this.clusteredNodes[p]===void 0)if(p!==l)if(r.joinCondition===void 0)a[f.id]=f,o[p]=this.body.nodes[p];else{const m=Nn.cloneOptions(this.body.nodes[p]);r.joinCondition(c,m)===!0&&(a[f.id]=f,o[p]=this.body.nodes[p])}else a[f.id]=f}}const u=Qd(n=Xt(o)).call(n,function(h){return o[h].id});for(const h in o){if(!Object.prototype.hasOwnProperty.call(o,h))continue;const f=o[h];for(let p=0;p<f.edges.length;p++){const m=f.edges[p];ht(u).call(u,this._getConnectedId(m,f.id))>-1&&(a[m.id]=m)}}this._cluster(o,a,r,i)}_createClusterEdges(e,r,n,i){let s,o,a,l,c,u;const h=Xt(e),f=[];for(let g=0;g<h.length;g++){o=h[g],a=e[o];for(let v=0;v<a.edges.length;v++)s=a.edges[v],this.clusteredEdges[s.id]===void 0&&(s.toId==s.fromId?r[s.id]=s:s.toId==o?(l=n.id,c=s.fromId,u=c):(l=s.toId,c=n.id,u=l),e[u]===void 0&&f.push({edge:s,fromId:c,toId:l}))}const p=[],m=function(g){for(let v=0;v<p.length;v++){const y=p[v],b=g.fromId===y.fromId&&g.toId===y.toId,w=g.fromId===y.toId&&g.toId===y.fromId;if(b||w)return y}return null};for(let g=0;g<f.length;g++){const v=f[g],y=v.edge;let b=m(v);b===null?(b=this._createClusteredEdge(v.fromId,v.toId,y,i),p.push(b)):b.clusteringEdgeReplacingIds.push(y.id),this.body.edges[y.id].edgeReplacedById=b.id,this._backupEdgeOptions(y),y.setOptions({physics:!1})}}_checkOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.clusterEdgeProperties===void 0&&(e.clusterEdgeProperties={}),e.clusterNodeProperties===void 0&&(e.clusterNodeProperties={}),e}_cluster(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;const s=[];for(const u in e)Object.prototype.hasOwnProperty.call(e,u)&&this.clusteredNodes[u]!==void 0&&s.push(u);for(let u=0;u<s.length;++u)delete e[s[u]];if(Xt(e).length==0||Xt(e).length==1&&n.clusterNodeProperties.allowSingleNodeCluster!=!0)return;let o=Et({},n.clusterNodeProperties);if(n.processProperties!==void 0){const u=[];for(const f in e)if(Object.prototype.hasOwnProperty.call(e,f)){const p=Nn.cloneOptions(e[f]);u.push(p)}const h=[];for(const f in r)if(Object.prototype.hasOwnProperty.call(r,f)&&f.substr(0,12)!=="clusterEdge:"){const p=Nn.cloneOptions(r[f],"edge");h.push(p)}if(o=n.processProperties(o,u,h),!o)throw new Error("The processProperties function does not return properties!")}o.id===void 0&&(o.id="cluster:"+Vf());const a=o.id;o.label===void 0&&(o.label="cluster");let l;o.x===void 0&&(l=this._getClusterPosition(e),o.x=l.x),o.y===void 0&&(l===void 0&&(l=this._getClusterPosition(e)),o.y=l.y),o.id=a;const c=this.body.functions.createNode(o,K$e);c.containedNodes=e,c.containedEdges=r,c.clusterEdgeProperties=n.clusterEdgeProperties,this.body.nodes[o.id]=c,this._clusterEdges(e,r,o,n.clusterEdgeProperties),o.id=void 0,i===!0&&this.body.emitter.emit("_dataChanged")}_backupEdgeOptions(e){this.clusteredEdges[e.id]===void 0&&(this.clusteredEdges[e.id]={physics:e.options.physics})}_restoreEdge(e){const r=this.clusteredEdges[e.id];r!==void 0&&(e.setOptions({physics:r.physics}),delete this.clusteredEdges[e.id])}isCluster(e){return this.body.nodes[e]!==void 0?this.body.nodes[e].isCluster===!0:(console.error("Node does not exist."),!1)}_getClusterPosition(e){const r=Xt(e);let n=e[r[0]].x,i=e[r[0]].x,s=e[r[0]].y,o=e[r[0]].y,a;for(let l=1;l<r.length;l++)a=e[r[l]],n=a.x<n?a.x:n,i=a.x>i?a.x:i,s=a.y<s?a.y:s,o=a.y>o?a.y:o;return{x:.5*(n+i),y:.5*(s+o)}}openCluster(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0)throw new Error("No clusterNodeId supplied to openCluster.");const i=this.body.nodes[e];if(i===void 0)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(i.isCluster!==!0||i.containedNodes===void 0||i.containedEdges===void 0)throw new Error("The node:"+e+" is not a valid cluster.");const s=this.findNode(e),o=ht(s).call(s,e)-1;if(o>=0){const u=s[o];this.body.nodes[u]._openChildCluster(e),delete this.body.nodes[e],n===!0&&this.body.emitter.emit("_dataChanged");return}const a=i.containedNodes,l=i.containedEdges;if(r!==void 0&&r.releaseFunction!==void 0&&typeof r.releaseFunction=="function"){const u={},h={x:i.x,y:i.y};for(const p in a)if(Object.prototype.hasOwnProperty.call(a,p)){const m=this.body.nodes[p];u[p]={x:m.x,y:m.y}}const f=r.releaseFunction(h,u);for(const p in a)if(Object.prototype.hasOwnProperty.call(a,p)){const m=this.body.nodes[p];f[p]!==void 0&&(m.x=f[p].x===void 0?i.x:f[p].x,m.y=f[p].y===void 0?i.y:f[p].y)}}else Ge(a,function(u){u.options.fixed.x===!1&&(u.x=i.x),u.options.fixed.y===!1&&(u.y=i.y)});for(const u in a)if(Object.prototype.hasOwnProperty.call(a,u)){const h=this.body.nodes[u];h.vx=i.vx,h.vy=i.vy,h.setOptions({physics:!0}),delete this.clusteredNodes[u]}const c=[];for(let u=0;u<i.edges.length;u++)c.push(i.edges[u]);for(let u=0;u<c.length;u++){const h=c[u],f=this._getConnectedId(h,e),p=this.clusteredNodes[f];for(let m=0;m<h.clusteringEdgeReplacingIds.length;m++){const g=h.clusteringEdgeReplacingIds[m],v=this.body.edges[g];if(v!==void 0)if(p!==void 0){const y=this.body.nodes[p.clusterId];y.containedEdges[v.id]=v,delete l[v.id];let b=v.fromId,w=v.toId;v.toId==f?w=p.clusterId:b=p.clusterId,this._createClusteredEdge(b,w,v,y.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(v)}h.remove()}for(const u in l)Object.prototype.hasOwnProperty.call(l,u)&&this._restoreEdge(l[u]);delete this.body.nodes[e],n===!0&&this.body.emitter.emit("_dataChanged")}getNodesInCluster(e){const r=[];if(this.isCluster(e)===!0){const n=this.body.nodes[e].containedNodes;for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&r.push(this.body.nodes[i].id)}return r}findNode(e){const r=[];let i=0,s;for(;this.clusteredNodes[e]!==void 0&&i<100;){if(s=this.body.nodes[e],s===void 0)return[];r.push(s.id),e=this.clusteredNodes[e].clusterId,i++}return s=this.body.nodes[e],s===void 0?[]:(r.push(s.id),dc(r).call(r),r)}updateClusteredNode(e,r){if(e===void 0)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(r===void 0)throw new Error("No newOptions supplied to updateClusteredNode.");if(this.body.nodes[e]===void 0)throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[e].setOptions(r),this.body.emitter.emit("_dataChanged")}updateEdge(e,r){if(e===void 0)throw new Error("No startEdgeId supplied to updateEdge.");if(r===void 0)throw new Error("No newOptions supplied to updateEdge.");if(this.body.edges[e]===void 0)throw new Error("The startEdgeId supplied to updateEdge does not exist.");const n=this.getClusteredEdges(e);for(let i=0;i<n.length;i++)this.body.edges[n[i]].setOptions(r);this.body.emitter.emit("_dataChanged")}getClusteredEdges(e){const r=[];let i=0;for(;e!==void 0&&this.body.edges[e]!==void 0&&i<100;)r.push(this.body.edges[e].id),e=this.body.edges[e].edgeReplacedById,i++;return dc(r).call(r),r}getBaseEdge(e){return this.getBaseEdges(e)[0]}getBaseEdges(e){const r=[e],n=[],i=[],s=100;let o=0;for(;r.length>0&&o<s;){const a=r.pop();if(a===void 0)continue;const l=this.body.edges[a];if(l===void 0)continue;o++;const c=l.clusteringEdgeReplacingIds;if(c===void 0)i.push(a);else for(let u=0;u<c.length;++u){const h=c[u];ht(r).call(r,c)!==-1||ht(n).call(n,c)!==-1||r.push(h)}n.push(a)}return i}_getConnectedId(e,r){return e.toId!=r?e.toId:(e.fromId!=r,e.fromId)}_getHubSize(){let e=0,r=0,n=0,i=0;for(let l=0;l<this.body.nodeIndices.length;l++){const c=this.body.nodes[this.body.nodeIndices[l]];c.edges.length>i&&(i=c.edges.length),e+=c.edges.length,r+=Math.pow(c.edges.length,2),n+=1}e=e/n,r=r/n;const s=r-Math.pow(e,2),o=Math.sqrt(s);let a=Math.floor(e+2*o);return a>i&&(a=i),a}_createClusteredEdge(e,r,n,i,s){const o=Nn.cloneOptions(n,"edge");Et(o,i),o.from=e,o.to=r,o.id="clusterEdge:"+Vf(),s!==void 0&&Et(o,s);const a=this.body.functions.createEdge(o);return a.clusteringEdgeReplacingIds=[n.id],a.connect(),this.body.edges[a.id]=a,a}_clusterEdges(e,r,n,i){if(r instanceof Qa){const s=r,o={};o[s.id]=s,r=o}if(e instanceof Mt){const s=e,o={};o[s.id]=s,e=o}if(n==null)throw new Error("_clusterEdges: parameter clusterNode required");i===void 0&&(i=n.clusterEdgeProperties),this._createClusterEdges(e,r,n,i);for(const s in r)if(Object.prototype.hasOwnProperty.call(r,s)&&this.body.edges[s]!==void 0){const o=this.body.edges[s];this._backupEdgeOptions(o),o.setOptions({physics:!1})}for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(this.clusteredNodes[s]={clusterId:n.id,node:this.body.nodes[s]},this.body.nodes[s].setOptions({physics:!1}))}_getClusterNodeForNode(e){if(e===void 0)return;const r=this.clusteredNodes[e];if(r===void 0)return;const n=r.clusterId;if(n!==void 0)return this.body.nodes[n]}_filter(e,r){const n=[];return Ge(e,i=>{r(i)&&n.push(i)}),n}_updateState(){let e;const r=[],n={},i=l=>{Ge(this.body.nodes,c=>{c.isCluster===!0&&l(c)})};for(e in this.clusteredNodes){if(!Object.prototype.hasOwnProperty.call(this.clusteredNodes,e))continue;this.body.nodes[e]===void 0&&r.push(e)}i(function(l){for(let c=0;c<r.length;c++)delete l.containedNodes[r[c]]});for(let l=0;l<r.length;l++)delete this.clusteredNodes[r[l]];Ge(this.clusteredEdges,l=>{const c=this.body.edges[l];(c===void 0||!c.endPointsValid())&&(n[l]=l)}),i(function(l){Ge(l.containedEdges,(c,u)=>{!c.endPointsValid()&&!n[u]&&(n[u]=u)})}),Ge(this.body.edges,(l,c)=>{let u=!0;const h=l.clusteringEdgeReplacingIds;if(h!==void 0){let f=0;Ge(h,p=>{const m=this.body.edges[p];m!==void 0&&m.endPointsValid()&&(f+=1)}),u=f>0}(!l.endPointsValid()||!u)&&(n[c]=c)}),i(l=>{Ge(n,c=>{delete l.containedEdges[c],Ge(l.edges,(u,h)=>{if(u.id===c){l.edges[h]=null;return}u.clusteringEdgeReplacingIds=this._filter(u.clusteringEdgeReplacingIds,function(f){return!n[f]})}),l.edges=this._filter(l.edges,function(u){return u!==null})})}),Ge(n,l=>{delete this.clusteredEdges[l]}),Ge(n,l=>{delete this.body.edges[l]});const s=Xt(this.body.edges);Ge(s,l=>{const c=this.body.edges[l],u=this._isClusteredNode(c.fromId)||this._isClusteredNode(c.toId);if(u!==this._isClusteredEdge(c.id))if(u){const h=this._getClusterNodeForNode(c.fromId);h!==void 0&&this._clusterEdges(this.body.nodes[c.fromId],c,h);const f=this._getClusterNodeForNode(c.toId);f!==void 0&&this._clusterEdges(this.body.nodes[c.toId],c,f)}else delete this._clusterEdges[l],this._restoreEdge(c)});let o=!1,a=!0;for(;a;){const l=[];i(function(c){const u=Xt(c.containedNodes).length,h=c.options.allowSingleNodeCluster===!0;(h&&u<1||!h&&u<2)&&l.push(c.id)});for(let c=0;c<l.length;++c)this.openCluster(l[c],{},!1);a=l.length>0,o=o||a}o&&this._updateState()}_isClusteredNode(e){return this.clusteredNodes[e]!==void 0}_isClusteredEdge(e){return this.clusteredEdges[e]!==void 0}}class Y$e{constructor(e,r){this.body=e,this.canvas=r,this.redrawRequested=!1,this.requestAnimationFrameRequestId=void 0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},pr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e;this.body.emitter.on("dragStart",()=>{this.dragging=!0}),this.body.emitter.on("dragEnd",()=>{this.dragging=!1}),this.body.emitter.on("zoom",()=>{this.zooming=!0,window.clearTimeout(this.zoomTimeoutId),this.zoomTimeoutId=Eo(()=>{var r;this.zooming=!1,se(r=this._requestRedraw).call(r,this)()},250)}),this.body.emitter.on("_resizeNodes",()=>{this._resizeNodes()}),this.body.emitter.on("_redraw",()=>{this.renderingActive===!1&&this._redraw()}),this.body.emitter.on("_blockRedraw",()=>{this.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",()=>{this.allowRedraw=!0,this.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",se(e=this._requestRedraw).call(e,this)),this.body.emitter.on("_startRendering",()=>{this.renderRequests+=1,this.renderingActive=!0,this._startRendering()}),this.body.emitter.on("_stopRendering",()=>{this.renderRequests-=1,this.renderingActive=this.renderRequests>0,this.requestAnimationFrameRequestId=void 0}),this.body.emitter.on("destroy",()=>{this.renderRequests=0,this.allowRedraw=!1,this.renderingActive=!1,window.cancelAnimationFrame(this.requestAnimationFrameRequestId),this.body.emitter.off()})}setOptions(e){e!==void 0&&Dh(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"],this.options,e)}_startRendering(){if(this.renderingActive===!0&&this.requestAnimationFrameRequestId===void 0){var e;this.requestAnimationFrameRequestId=window.requestAnimationFrame(se(e=this._renderStep).call(e,this),this.simulationInterval)}}_renderStep(){this.renderingActive===!0&&(this.requestAnimationFrameRequestId=void 0,this._startRendering(),this._redraw())}redraw(){this.body.emitter.emit("setSize"),this._redraw()}_requestRedraw(){this.redrawRequested!==!0&&this.renderingActive===!1&&this.allowRedraw===!0&&(this.redrawRequested=!0,window.requestAnimationFrame(()=>{this._redraw(!1)}))}_redraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.allowRedraw===!0){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;const r={drawExternalLabels:null};(this.canvas.frame.canvas.width===0||this.canvas.frame.canvas.height===0)&&this.canvas.setSize(),this.canvas.setTransform();const n=this.canvas.getContext(),i=this.canvas.frame.canvas.clientWidth,s=this.canvas.frame.canvas.clientHeight;if(n.clearRect(0,0,i,s),this.canvas.frame.clientWidth===0)return;if(n.save(),n.translate(this.body.view.translation.x,this.body.view.translation.y),n.scale(this.body.view.scale,this.body.view.scale),n.beginPath(),this.body.emitter.emit("beforeDrawing",n),n.closePath(),e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawEdges(n),this.dragging===!1||this.dragging===!0&&this.options.hideNodesOnDrag===!1){const{drawExternalLabels:o}=this._drawNodes(n,e);r.drawExternalLabels=o}e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawArrows(n),r.drawExternalLabels!=null&&r.drawExternalLabels(),e===!1&&this._drawSelectionBox(n),n.beginPath(),this.body.emitter.emit("afterDrawing",n),n.closePath(),n.restore(),e===!0&&n.clearRect(0,0,i,s)}}_resizeNodes(){this.canvas.setTransform();const e=this.canvas.getContext();e.save(),e.translate(this.body.view.translation.x,this.body.view.translation.y),e.scale(this.body.view.scale,this.body.view.scale);const r=this.body.nodes;let n;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n=r[i],n.resize(e),n.updateBoundingBox(e,n.selected));e.restore()}_drawNodes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.nodes,i=this.body.nodeIndices;let s;const o=[],a=[],l=20,c=this.canvas.DOMtoCanvas({x:-l,y:-l}),u=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+l,y:this.canvas.frame.canvas.clientHeight+l}),h={top:c.y,left:c.x,bottom:u.y,right:u.x},f=[];for(let v=0;v<i.length;v++)if(s=n[i[v]],s.hover)a.push(i[v]);else if(s.isSelected())o.push(i[v]);else if(r===!0){const y=s.draw(e);y.drawExternalLabel!=null&&f.push(y.drawExternalLabel)}else if(s.isBoundingBoxOverlappingWith(h)===!0){const y=s.draw(e);y.drawExternalLabel!=null&&f.push(y.drawExternalLabel)}else s.updateBoundingBox(e,s.selected);let p;const m=o.length,g=a.length;for(p=0;p<m;p++){s=n[o[p]];const v=s.draw(e);v.drawExternalLabel!=null&&f.push(v.drawExternalLabel)}for(p=0;p<g;p++){s=n[a[p]];const v=s.draw(e);v.drawExternalLabel!=null&&f.push(v.drawExternalLabel)}return{drawExternalLabels:()=>{for(const v of f)v()}}}_drawEdges(e){const r=this.body.edges,n=this.body.edgeIndices;for(let i=0;i<n.length;i++){const s=r[n[i]];s.connected===!0&&s.draw(e)}}_drawArrows(e){const r=this.body.edges,n=this.body.edgeIndices;for(let i=0;i<n.length;i++){const s=r[n[i]];s.connected===!0&&s.drawArrows(e)}}_drawSelectionBox(e){if(this.body.selectionBox.show){e.beginPath();const r=this.body.selectionBox.position.end.x-this.body.selectionBox.position.start.x,n=this.body.selectionBox.position.end.y-this.body.selectionBox.position.start.y;e.rect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,r,n),e.fillStyle="rgba(151, 194, 252, 0.2)",e.fillRect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,r,n),e.strokeStyle="rgba(151, 194, 252, 1)",e.stroke()}else e.closePath()}}var FO,FQ;function Q$e(){if(FQ)return FO;FQ=1,Xoe();var t=mt();return FO=t.setInterval,FO}var qO,qQ;function X$e(){return qQ||(qQ=1,qO=Q$e()),qO}var J$e=X$e(),Z$e=$e(J$e);function e0(t,e){e.inputHandler=function(r){r.isFirst&&e(r)},t.on("hammer.input",e.inputHandler)}function Kae(t,e){return e.inputHandler=function(r){r.isFinal&&e(r)},t.on("hammer.input",e.inputHandler)}class eFe{constructor(e){this.body=e,this.pixelRatio=1,this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this._cleanupCallbacks=[],this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},pr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e;this.body.emitter.once("resize",r=>{r.width!==0&&(this.body.view.translation.x=r.width*.5),r.height!==0&&(this.body.view.translation.y=r.height*.5)}),this.body.emitter.on("setSize",se(e=this.setSize).call(e,this)),this.body.emitter.on("destroy",()=>{this.hammerFrame.destroy(),this.hammer.destroy(),this._cleanUp()})}setOptions(e){if(e!==void 0&&Dh(["width","height","autoResize"],this.options,e),this._cleanUp(),this.options.autoResize===!0){var r;if(window.ResizeObserver){const i=new ResizeObserver(()=>{this.setSize()===!0&&this.body.emitter.emit("_requestRedraw")}),{frame:s}=this;i.observe(s),this._cleanupCallbacks.push(()=>{i.unobserve(s)})}else{const i=Z$e(()=>{this.setSize()===!0&&this.body.emitter.emit("_requestRedraw")},1e3);this._cleanupCallbacks.push(()=>{clearInterval(i)})}const n=se(r=this._onResize).call(r,this);window.addEventListener("resize",n),this._cleanupCallbacks.push(()=>{window.removeEventListener("resize",n)})}}_cleanUp(){var e,r,n;xt(e=dc(r=_o(n=this._cleanupCallbacks).call(n,0)).call(r)).call(e,i=>{try{i()}catch(s){console.error(s)}})}_onResize(){this.setSize(),this.body.emitter.emit("_redraw")}_getCameraState(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.pixelRatio;this.initialized===!0&&(this.cameraState.previousWidth=this.frame.canvas.width/e,this.cameraState.previousHeight=this.frame.canvas.height/e,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/e,y:.5*this.frame.canvas.height/e}))}_setCameraState(){if(this.cameraState.scale!==void 0&&this.frame.canvas.clientWidth!==0&&this.frame.canvas.clientHeight!==0&&this.pixelRatio!==0&&this.cameraState.previousWidth>0&&this.cameraState.previousHeight>0){const e=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,r=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight;let n=this.cameraState.scale;e!=1&&r!=1?n=this.cameraState.scale*.5*(e+r):e!=1?n=this.cameraState.scale*e:r!=1&&(n=this.cameraState.scale*r),this.body.view.scale=n;const i=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),s={x:i.x-this.cameraState.position.x,y:i.y-this.cameraState.position.y};this.body.view.translation.x+=s.x*this.body.view.scale,this.body.view.translation.y+=s.y*this.body.view.scale}}_prepareValue(e){if(typeof e=="number")return e+"px";if(typeof e=="string"){if(ht(e).call(e,"%")!==-1||ht(e).call(e,"px")!==-1)return e;if(ht(e).call(e,"%")===-1)return e+"px"}throw new Error("Could not use the value supplied for width or height:"+e)}_create(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=0,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{const e=document.createElement("DIV");e.style.color="red",e.style.fontWeight="bold",e.style.padding="10px",e.innerText="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(e)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}_bindHammer(){this.hammer!==void 0&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new ld(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:ld.DIRECTION_ALL}),e0(this.hammer,e=>{this.body.eventListeners.onTouch(e)}),this.hammer.on("tap",e=>{this.body.eventListeners.onTap(e)}),this.hammer.on("doubletap",e=>{this.body.eventListeners.onDoubleTap(e)}),this.hammer.on("press",e=>{this.body.eventListeners.onHold(e)}),this.hammer.on("panstart",e=>{this.body.eventListeners.onDragStart(e)}),this.hammer.on("panmove",e=>{this.body.eventListeners.onDrag(e)}),this.hammer.on("panend",e=>{this.body.eventListeners.onDragEnd(e)}),this.hammer.on("pinch",e=>{this.body.eventListeners.onPinch(e)}),this.frame.canvas.addEventListener("wheel",e=>{this.body.eventListeners.onMouseWheel(e)}),this.frame.canvas.addEventListener("mousemove",e=>{this.body.eventListeners.onMouseMove(e)}),this.frame.canvas.addEventListener("contextmenu",e=>{this.body.eventListeners.onContext(e)}),this.hammerFrame=new ld(this.frame),Kae(this.hammerFrame,e=>{this.body.eventListeners.onRelease(e)})}setSize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.width,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.height;e=this._prepareValue(e),r=this._prepareValue(r);let n=!1;const i=this.frame.canvas.width,s=this.frame.canvas.height,o=this.pixelRatio;if(this._setPixelRatio(),e!=this.options.width||r!=this.options.height||this.frame.style.width!=e||this.frame.style.height!=r)this._getCameraState(o),this.frame.style.width=e,this.frame.style.height=r,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=e,this.options.height=r,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},n=!0;else{const a=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),l=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);(this.frame.canvas.width!==a||this.frame.canvas.height!==l)&&this._getCameraState(o),this.frame.canvas.width!==a&&(this.frame.canvas.width=a,n=!0),this.frame.canvas.height!==l&&(this.frame.canvas.height=l,n=!0)}return n===!0&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(i/this.pixelRatio),oldHeight:Math.round(s/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,n}getContext(){return this.frame.canvas.getContext("2d")}_determinePixelRatio(){const e=this.getContext();if(e===void 0)throw new Error("Could not get canvax context");let r=1;typeof window<"u"&&(r=window.devicePixelRatio||1);const n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return r/n}_setPixelRatio(){this.pixelRatio=this._determinePixelRatio()}setTransform(){const e=this.getContext();if(e===void 0)throw new Error("Could not get canvax context");e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}_XconvertDOMtoCanvas(e){return(e-this.body.view.translation.x)/this.body.view.scale}_XconvertCanvasToDOM(e){return e*this.body.view.scale+this.body.view.translation.x}_YconvertDOMtoCanvas(e){return(e-this.body.view.translation.y)/this.body.view.scale}_YconvertCanvasToDOM(e){return e*this.body.view.scale+this.body.view.translation.y}canvasToDOM(e){return{x:this._XconvertCanvasToDOM(e.x),y:this._YconvertCanvasToDOM(e.y)}}DOMtoCanvas(e){return{x:this._XconvertDOMtoCanvas(e.x),y:this._YconvertDOMtoCanvas(e.y)}}}function tFe(t,e){const r=pr({nodes:e,minZoomLevel:Number.MIN_VALUE,maxZoomLevel:1},t??{});if(!tr(r.nodes))throw new TypeError("Nodes has to be an array of ids.");if(r.nodes.length===0&&(r.nodes=e),!(typeof r.minZoomLevel=="number"&&r.minZoomLevel>0))throw new TypeError("Min zoom level has to be a number higher than zero.");if(!(typeof r.maxZoomLevel=="number"&&r.minZoomLevel<=r.maxZoomLevel))throw new TypeError("Max zoom level has to be a number higher than min zoom level.");return r}class rFe{constructor(e,r){var n,i;this.body=e,this.canvas=r,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",se(n=this.fit).call(n,this)),this.body.emitter.on("animationFinished",()=>{this.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",se(i=this.releaseNode).call(i,this))}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.options=e}fit(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;e=tFe(e,this.body.nodeIndices);const n=this.canvas.frame.canvas.clientWidth,i=this.canvas.frame.canvas.clientHeight;let s,o;if(n===0||i===0)o=1,s=Nn.getRange(this.body.nodes,e.nodes);else if(r===!0){let c=0;for(const f in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,f)&&this.body.nodes[f].predefinedPosition===!0&&(c+=1);if(c>.5*this.body.nodeIndices.length){this.fit(e,!1);return}s=Nn.getRange(this.body.nodes,e.nodes),o=12.662/(this.body.nodeIndices.length+7.4147)+.0964822;const h=Math.min(n/600,i/600);o*=h}else{this.body.emitter.emit("_resizeNodes"),s=Nn.getRange(this.body.nodes,e.nodes);const c=Math.abs(s.maxX-s.minX)*1.1,u=Math.abs(s.maxY-s.minY)*1.1,h=n/c,f=i/u;o=h<=f?h:f}o>e.maxZoomLevel?o=e.maxZoomLevel:o<e.minZoomLevel&&(o=e.minZoomLevel);const l={position:Nn.findCenter(s),scale:o,animation:e.animation};this.moveTo(l)}focus(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.body.nodes[e]!==void 0){const n={x:this.body.nodes[e].x,y:this.body.nodes[e].y};r.position=n,r.lockedOnNode=e,this.moveTo(r)}else console.error("Node: "+e+" cannot be found.")}moveTo(e){if(e===void 0){e={};return}if(e.offset!=null){if(e.offset.x!=null){if(e.offset.x=+e.offset.x,!Hl(e.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.')}else e.offset.x=0;if(e.offset.y!=null){if(e.offset.y=+e.offset.y,!Hl(e.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else e.offset.x=0}else e.offset={x:0,y:0};if(e.position!=null){if(e.position.x!=null){if(e.position.x=+e.position.x,!Hl(e.position.x))throw new TypeError('The option "position.x" has to be a finite number.')}else e.position.x=0;if(e.position.y!=null){if(e.position.y=+e.position.y,!Hl(e.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else e.position.x=0}else e.position=this.getViewPosition();if(e.scale!=null){if(e.scale=+e.scale,!(e.scale>0))throw new TypeError('The option "scale" has to be a number greater than zero.')}else e.scale=this.body.view.scale;e.animation===void 0&&(e.animation={duration:0}),e.animation===!1&&(e.animation={duration:0}),e.animation===!0&&(e.animation={}),e.animation.duration===void 0&&(e.animation.duration=1e3),e.animation.easingFunction===void 0&&(e.animation.easingFunction="easeInOutQuad"),this.animateView(e)}animateView(e){if(e===void 0)return;this.animationEasingFunction=e.animation.easingFunction,this.releaseNode(),e.locked===!0&&(this.lockedOnNodeId=e.lockedOnNode,this.lockedOnNodeOffset=e.offset),this.easingTime!=0&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=e.scale,this.body.view.scale=this.targetScale;const r=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n={x:r.x-e.position.x,y:r.y-e.position.y};if(this.targetTranslation={x:this.sourceTranslation.x+n.x*this.targetScale+e.offset.x,y:this.sourceTranslation.y+n.y*this.targetScale+e.offset.y},e.animation.duration===0)if(this.lockedOnNodeId!=null){var i;this.viewFunction=se(i=this._lockedRedraw).call(i,this),this.body.emitter.on("initRedraw",this.viewFunction)}else this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw");else{var s;this.animationSpeed=1/(60*e.animation.duration*.001)||1/60,this.animationEasingFunction=e.animation.easingFunction,this.viewFunction=se(s=this._transitionRedraw).call(s,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}_lockedRedraw(){const e={x:this.body.nodes[this.lockedOnNodeId].x,y:this.body.nodes[this.lockedOnNodeId].y},r=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n={x:r.x-e.x,y:r.y-e.y},i=this.body.view.translation,s={x:i.x+n.x*this.body.view.scale+this.lockedOnNodeOffset.x,y:i.y+n.y*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=s}releaseNode(){this.lockedOnNodeId!==void 0&&this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}_transitionRedraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.easingTime+=this.animationSpeed,this.easingTime=e===!0?1:this.easingTime;const r=uMe[this.animationEasingFunction](this.easingTime);if(this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*r,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*r,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*r},this.easingTime>=1){if(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,this.lockedOnNodeId!=null){var n;this.viewFunction=se(n=this._lockedRedraw).call(n,this),this.body.emitter.on("initRedraw",this.viewFunction)}this.body.emitter.emit("animationFinished")}}getScale(){return this.body.view.scale}getViewPosition(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}function LQ(t){var e=t&&t.preventDefault||!1,r=t&&t.container||window,n={},i={keydown:{},keyup:{}},s={},o;for(o=97;o<=122;o++)s[String.fromCharCode(o)]={code:65+(o-97),shift:!1};for(o=65;o<=90;o++)s[String.fromCharCode(o)]={code:o,shift:!0};for(o=0;o<=9;o++)s[""+o]={code:48+o,shift:!1};for(o=1;o<=12;o++)s["F"+o]={code:111+o,shift:!1};for(o=0;o<=9;o++)s["num"+o]={code:96+o,shift:!1};s["num*"]={code:106,shift:!1},s["num+"]={code:107,shift:!1},s["num-"]={code:109,shift:!1},s["num/"]={code:111,shift:!1},s["num."]={code:110,shift:!1},s.left={code:37,shift:!1},s.up={code:38,shift:!1},s.right={code:39,shift:!1},s.down={code:40,shift:!1},s.space={code:32,shift:!1},s.enter={code:13,shift:!1},s.shift={code:16,shift:void 0},s.esc={code:27,shift:!1},s.backspace={code:8,shift:!1},s.tab={code:9,shift:!1},s.ctrl={code:17,shift:!1},s.alt={code:18,shift:!1},s.delete={code:46,shift:!1},s.pageup={code:33,shift:!1},s.pagedown={code:34,shift:!1},s["="]={code:187,shift:!1},s["-"]={code:189,shift:!1},s["]"]={code:221,shift:!1},s["["]={code:219,shift:!1};var a=function(u){c(u,"keydown")},l=function(u){c(u,"keyup")},c=function(u,h){if(i[h][u.keyCode]!==void 0){for(var f=i[h][u.keyCode],p=0;p<f.length;p++)(f[p].shift===void 0||f[p].shift==!0&&u.shiftKey==!0||f[p].shift==!1&&u.shiftKey==!1)&&f[p].fn(u);e==!0&&u.preventDefault()}};return n.bind=function(u,h,f){if(f===void 0&&(f="keydown"),s[u]===void 0)throw new Error("unsupported key: "+u);i[f][s[u].code]===void 0&&(i[f][s[u].code]=[]),i[f][s[u].code].push({fn:h,shift:s[u].shift})},n.bindAll=function(u,h){h===void 0&&(h="keydown");for(var f in s)s.hasOwnProperty(f)&&n.bind(f,u,h)},n.getKey=function(u){for(var h in s)if(s.hasOwnProperty(h)){if(u.shiftKey==!0&&s[h].shift==!0&&u.keyCode==s[h].code)return h;if(u.shiftKey==!1&&s[h].shift==!1&&u.keyCode==s[h].code)return h;if(u.keyCode==s[h].code&&h=="shift")return h}return"unknown key, currently not supported"},n.unbind=function(u,h,f){if(f===void 0&&(f="keydown"),s[u]===void 0)throw new Error("unsupported key: "+u);if(h!==void 0){var p=[],m=i[f][s[u].code];if(m!==void 0)for(var g=0;g<m.length;g++)m[g].fn==h&&m[g].shift==s[u].shift||p.push(i[f][s[u].code][g]);i[f][s[u].code]=p}else i[f][s[u].code]=[]},n.reset=function(){i={keydown:{},keyup:{}}},n.destroy=function(){i={keydown:{},keyup:{}},r.removeEventListener("keydown",a,!0),r.removeEventListener("keyup",l,!0)},r.addEventListener("keydown",a,!0),r.addEventListener("keyup",l,!0),n}class nFe{constructor(e,r){this.body=e,this.canvas=r,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",()=>{this.activated=!0,this.configureKeyboardBindings()}),this.body.emitter.on("deactivate",()=>{this.activated=!1,this.configureKeyboardBindings()}),this.body.emitter.on("destroy",()=>{this.keycharm!==void 0&&this.keycharm.destroy()}),this.options={}}setOptions(e){e!==void 0&&(this.options=e,this.create())}create(){this.options.navigationButtons===!0?this.iconsCreated===!1&&this.loadNavigationElements():this.iconsCreated===!0&&this.cleanNavigation(),this.configureKeyboardBindings()}cleanNavigation(){if(this.navigationHammers.length!=0){for(let e=0;e<this.navigationHammers.length;e++)this.navigationHammers[e].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}loadNavigationElements(){this.cleanNavigation(),this.navigationDOM={};const e=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],r=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(let o=0;o<e.length;o++){this.navigationDOM[e[o]]=document.createElement("div"),this.navigationDOM[e[o]].className="vis-button vis-"+e[o],this.navigationDOM.wrapper.appendChild(this.navigationDOM[e[o]]);const a=new ld(this.navigationDOM[e[o]]);if(r[o]==="_fit"){var n;e0(a,se(n=this._fit).call(n,this))}else{var i;e0(a,se(i=this.bindToRedraw).call(i,this,r[o]))}this.navigationHammers.push(a)}const s=new ld(this.canvas.frame);Kae(s,()=>{this._stopMovement()}),this.navigationHammers.push(s),this.iconsCreated=!0}bindToRedraw(e){if(this.boundFunctions[e]===void 0){var r;this.boundFunctions[e]=se(r=this[e]).call(r,this),this.body.emitter.on("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_startRendering")}}unbindFromRedraw(e){this.boundFunctions[e]!==void 0&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[e])}_fit(){new Date().valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=new Date().valueOf())}_stopMovement(){for(const e in this.boundFunctions)Object.prototype.hasOwnProperty.call(this.boundFunctions,e)&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}_moveUp(){this.body.view.translation.y+=this.options.keyboard.speed.y}_moveDown(){this.body.view.translation.y-=this.options.keyboard.speed.y}_moveLeft(){this.body.view.translation.x+=this.options.keyboard.speed.x}_moveRight(){this.body.view.translation.x-=this.options.keyboard.speed.x}_zoomIn(){const e=this.body.view.scale,r=this.body.view.scale*(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=r/e,s=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,o=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=r,this.body.view.translation={x:s,y:o},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}_zoomOut(){const e=this.body.view.scale,r=this.body.view.scale/(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=r/e,s=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,o=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=r,this.body.view.translation={x:s,y:o},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}configureKeyboardBindings(){if(this.keycharm!==void 0&&this.keycharm.destroy(),this.options.keyboard.enabled===!0&&(this.options.keyboard.bindToWindow===!0?this.keycharm=LQ({container:window,preventDefault:!0}):this.keycharm=LQ({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),this.activated===!0)){var e,r,n,i,s,o,a,l,c,u,h,f,p,m,g,v,y,b,w,x,S,_,C,E;se(e=this.keycharm).call(e,"up",()=>{this.bindToRedraw("_moveUp")},"keydown"),se(r=this.keycharm).call(r,"down",()=>{this.bindToRedraw("_moveDown")},"keydown"),se(n=this.keycharm).call(n,"left",()=>{this.bindToRedraw("_moveLeft")},"keydown"),se(i=this.keycharm).call(i,"right",()=>{this.bindToRedraw("_moveRight")},"keydown"),se(s=this.keycharm).call(s,"=",()=>{this.bindToRedraw("_zoomIn")},"keydown"),se(o=this.keycharm).call(o,"num+",()=>{this.bindToRedraw("_zoomIn")},"keydown"),se(a=this.keycharm).call(a,"num-",()=>{this.bindToRedraw("_zoomOut")},"keydown"),se(l=this.keycharm).call(l,"-",()=>{this.bindToRedraw("_zoomOut")},"keydown"),se(c=this.keycharm).call(c,"[",()=>{this.bindToRedraw("_zoomOut")},"keydown"),se(u=this.keycharm).call(u,"]",()=>{this.bindToRedraw("_zoomIn")},"keydown"),se(h=this.keycharm).call(h,"pageup",()=>{this.bindToRedraw("_zoomIn")},"keydown"),se(f=this.keycharm).call(f,"pagedown",()=>{this.bindToRedraw("_zoomOut")},"keydown"),se(p=this.keycharm).call(p,"up",()=>{this.unbindFromRedraw("_moveUp")},"keyup"),se(m=this.keycharm).call(m,"down",()=>{this.unbindFromRedraw("_moveDown")},"keyup"),se(g=this.keycharm).call(g,"left",()=>{this.unbindFromRedraw("_moveLeft")},"keyup"),se(v=this.keycharm).call(v,"right",()=>{this.unbindFromRedraw("_moveRight")},"keyup"),se(y=this.keycharm).call(y,"=",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),se(b=this.keycharm).call(b,"num+",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),se(w=this.keycharm).call(w,"num-",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),se(x=this.keycharm).call(x,"-",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),se(S=this.keycharm).call(S,"[",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),se(_=this.keycharm).call(_,"]",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),se(C=this.keycharm).call(C,"pageup",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),se(E=this.keycharm).call(E,"pagedown",()=>{this.unbindFromRedraw("_zoomOut")},"keyup")}}}class iFe{constructor(e,r,n){var i,s,o,a,l,c,u,h,f,p,m,g,v;this.body=e,this.canvas=r,this.selectionHandler=n,this.navigationHandler=new nFe(e,r),this.body.eventListeners.onTap=se(i=this.onTap).call(i,this),this.body.eventListeners.onTouch=se(s=this.onTouch).call(s,this),this.body.eventListeners.onDoubleTap=se(o=this.onDoubleTap).call(o,this),this.body.eventListeners.onHold=se(a=this.onHold).call(a,this),this.body.eventListeners.onDragStart=se(l=this.onDragStart).call(l,this),this.body.eventListeners.onDrag=se(c=this.onDrag).call(c,this),this.body.eventListeners.onDragEnd=se(u=this.onDragEnd).call(u,this),this.body.eventListeners.onMouseWheel=se(h=this.onMouseWheel).call(h,this),this.body.eventListeners.onPinch=se(f=this.onPinch).call(f,this),this.body.eventListeners.onMouseMove=se(p=this.onMouseMove).call(p,this),this.body.eventListeners.onRelease=se(m=this.onRelease).call(m,this),this.body.eventListeners.onContext=se(g=this.onContext).call(g,this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=se(v=this.getPointer).call(v,this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0,autoFocus:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},pr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("destroy",()=>{clearTimeout(this.popupTimer),delete this.body.functions.getPointer})}setOptions(e){e!==void 0&&(Xv(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"],this.options,e),Pi(this.options,e,"keyboard"),e.tooltip&&(pr(this.options.tooltip,e.tooltip),e.tooltip.color&&(this.options.tooltip.color=JI(e.tooltip.color)))),this.navigationHandler.setOptions(this.options)}getPointer(e){return{x:e.x-oMe(this.canvas.frame.canvas),y:e.y-aMe(this.canvas.frame.canvas)}}onTouch(e){new Date().valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(e.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=new Date().valueOf())}onTap(e){const r=this.getPointer(e.center),n=this.selectionHandler.options.multiselect&&(e.changedPointers[0].ctrlKey||e.changedPointers[0].metaKey);this.checkSelectionChanges(r,n),this.selectionHandler.commitAndEmit(r,e),this.selectionHandler.generateClickEvent("click",e,r)}onDoubleTap(e){const r=this.getPointer(e.center);this.selectionHandler.generateClickEvent("doubleClick",e,r)}onHold(e){const r=this.getPointer(e.center),n=this.selectionHandler.options.multiselect;this.checkSelectionChanges(r,n),this.selectionHandler.commitAndEmit(r,e),this.selectionHandler.generateClickEvent("click",e,r),this.selectionHandler.generateClickEvent("hold",e,r)}onRelease(e){if(new Date().valueOf()-this.touchTime>10){const r=this.getPointer(e.center);this.selectionHandler.generateClickEvent("release",e,r),this.touchTime=new Date().valueOf()}}onContext(e){const r=this.getPointer({x:e.clientX,y:e.clientY});this.selectionHandler.generateClickEvent("oncontext",e,r)}checkSelectionChanges(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)===!0?this.selectionHandler.selectAdditionalOnPoint(e):this.selectionHandler.selectOnPoint(e)}_determineDifference(e,r){const n=function(i,s){const o=[];for(let a=0;a<i.length;a++){const l=i[a];ht(s).call(s,l)===-1&&o.push(l)}return o};return{nodes:n(e.nodes,r.nodes),edges:n(e.edges,r.edges)}}onDragStart(e){if(this.drag.dragging)return;this.drag.pointer===void 0&&this.onTouch(e);const r=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=pr({},this.body.view.translation),this.drag.nodeId=void 0,e.srcEvent.shiftKey){this.body.selectionBox.show=!0;const n=this.getPointer(e.center);this.body.selectionBox.position.start={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)},this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)}}else if(r!==void 0&&this.options.dragNodes===!0){this.drag.nodeId=r.id,r.isSelected()===!1&&this.selectionHandler.setSelection({nodes:[r.id]}),this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer);for(const n of this.selectionHandler.getSelectedNodes()){const i={id:n.id,node:n,x:n.x,y:n.y,xFixed:n.options.fixed.x,yFixed:n.options.fixed.y};n.options.fixed.x=!0,n.options.fixed.y=!0,this.drag.selection.push(i)}}else this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer,void 0,!0)}onDrag(e){if(this.drag.pinched===!0)return;this.body.emitter.emit("unlockNode");const r=this.getPointer(e.center),n=this.drag.selection;if(n&&n.length&&this.options.dragNodes===!0){this.selectionHandler.generateClickEvent("dragging",e,r);const i=r.x-this.drag.pointer.x,s=r.y-this.drag.pointer.y;xt(n).call(n,o=>{const a=o.node;o.xFixed===!1&&(a.x=this.canvas._XconvertDOMtoCanvas(this.canvas._XconvertCanvasToDOM(o.x)+i)),o.yFixed===!1&&(a.y=this.canvas._YconvertDOMtoCanvas(this.canvas._YconvertCanvasToDOM(o.y)+s))}),this.body.emitter.emit("startSimulation")}else{if(e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,r,void 0,!0),this.drag.pointer===void 0){this.onDragStart(e);return}this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(r.x),y:this.canvas._YconvertDOMtoCanvas(r.y)},this.body.emitter.emit("_requestRedraw")}if(this.options.dragView===!0&&!e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,r,void 0,!0),this.drag.pointer===void 0){this.onDragStart(e);return}const i=r.x-this.drag.pointer.x,s=r.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+i,y:this.drag.translation.y+s},this.body.emitter.emit("_requestRedraw")}}}onDragEnd(e){if(this.drag.dragging=!1,this.body.selectionBox.show){var r;this.body.selectionBox.show=!1;const n=this.body.selectionBox.position,i={minX:Math.min(n.start.x,n.end.x),minY:Math.min(n.start.y,n.end.y),maxX:Math.max(n.start.x,n.end.x),maxY:Math.max(n.start.y,n.end.y)},s=Hn(r=this.body.nodeIndices).call(r,a=>{const l=this.body.nodes[a];return l.x>=i.minX&&l.x<=i.maxX&&l.y>=i.minY&&l.y<=i.maxY});xt(s).call(s,a=>this.selectionHandler.selectObject(this.body.nodes[a]));const o=this.getPointer(e.center);this.selectionHandler.commitAndEmit(o,e),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw")}else{const n=this.drag.selection;n&&n.length?(xt(n).call(n,function(i){i.node.options.fixed.x=i.xFixed,i.node.options.fixed.y=i.yFixed}),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}}onPinch(e){const r=this.getPointer(e.center);this.drag.pinched=!0,this.pinch.scale===void 0&&(this.pinch.scale=1);const n=this.pinch.scale*e.scale;this.zoom(n,r)}zoom(e,r){if(this.options.zoomView===!0){const n=this.body.view.scale;e<1e-5&&(e=1e-5),e>10&&(e=10);let i;this.drag!==void 0&&this.drag.dragging===!0&&(i=this.canvas.DOMtoCanvas(this.drag.pointer));const s=this.body.view.translation,o=e/n,a=(1-o)*r.x+s.x*o,l=(1-o)*r.y+s.y*o;if(this.body.view.scale=e,this.body.view.translation={x:a,y:l},i!=null){const c=this.canvas.canvasToDOM(i);this.drag.pointer.x=c.x,this.drag.pointer.y=c.y}this.body.emitter.emit("_requestRedraw"),n<e?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:r}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:r})}}onMouseWheel(e){if(this.options.zoomView===!0){if(e.deltaY!==0){let r=this.body.view.scale;r*=1+(e.deltaY<0?1:-1)*(this.options.zoomSpeed*.1);const n=this.getPointer({x:e.clientX,y:e.clientY});this.zoom(r,n)}e.preventDefault()}}onMouseMove(e){const r=this.getPointer({x:e.clientX,y:e.clientY});let n=!1;this.popup!==void 0&&(this.popup.hidden===!1&&this._checkHidePopup(r),this.popup.hidden===!1&&(n=!0,this.popup.setPosition(r.x+3,r.y-5),this.popup.show())),this.options.keyboard.autoFocus&&this.options.keyboard.bindToWindow===!1&&this.options.keyboard.enabled===!0&&this.canvas.frame.focus(),n===!1&&(this.popupTimer!==void 0&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=Eo(()=>this._checkShowPopup(r),this.options.tooltipDelay))),this.options.hover===!0&&this.selectionHandler.hoverObject(e,r)}_checkShowPopup(e){const r=this.canvas._XconvertDOMtoCanvas(e.x),n=this.canvas._YconvertDOMtoCanvas(e.y),i={left:r,top:n,right:r,bottom:n},s=this.popupObj===void 0?void 0:this.popupObj.id;let o=!1,a="node";if(this.popupObj===void 0){const l=this.body.nodeIndices,c=this.body.nodes;let u;const h=[];for(let f=0;f<l.length;f++)u=c[l[f]],u.isOverlappingWith(i)===!0&&(o=!0,u.getTitle()!==void 0&&h.push(l[f]));h.length>0&&(this.popupObj=c[h[h.length-1]],o=!0)}if(this.popupObj===void 0&&o===!1){const l=this.body.edgeIndices,c=this.body.edges;let u;const h=[];for(let f=0;f<l.length;f++)u=c[l[f]],u.isOverlappingWith(i)===!0&&u.connected===!0&&u.getTitle()!==void 0&&h.push(l[f]);h.length>0&&(this.popupObj=c[h[h.length-1]],a="edge")}this.popupObj!==void 0?this.popupObj.id!==s&&(this.popup===void 0&&(this.popup=new vMe(this.canvas.frame)),this.popup.popupTargetType=a,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(e.x+3,e.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):this.popup!==void 0&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}_checkHidePopup(e){const r=this.selectionHandler._pointerToPositionObject(e);let n=!1;if(this.popup.popupTargetType==="node"){if(this.body.nodes[this.popup.popupTargetId]!==void 0&&(n=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(r),n===!0)){const i=this.selectionHandler.getNodeAt(e);n=i===void 0?!1:i.id===this.popup.popupTargetId}}else this.selectionHandler.getNodeAt(e)===void 0&&this.body.edges[this.popup.popupTargetId]!==void 0&&(n=this.body.edges[this.popup.popupTargetId].isOverlappingWith(r));n===!1&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}var BQ={},zQ={},VQ;function sFe(){if(VQ)return zQ;VQ=1;var t=pD(),e=Dae();return t("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),zQ}var UQ;function oFe(){return UQ||(UQ=1,sFe()),BQ}var HQ={},LO,WQ;function cu(){if(WQ)return LO;WQ=1;var t=Eh(),e=TypeError;return LO=function(r){if(typeof r=="object"&&"size"in r&&"has"in r&&"add"in r&&"delete"in r&&"keys"in r)return r;throw new e(t(r)+" is not a set")},LO}var BO,KQ;function uu(){if(KQ)return BO;KQ=1;var t=wi(),e=$ae(),r=t("Set"),n=r.prototype;return BO={Set:r,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:n},BO}var zO,GQ;function du(){if(GQ)return zO;GQ=1;var t=si();return zO=function(e,r,n){for(var i=n?e:e.iterator,s=e.next,o,a;!(o=t(s,i)).done;)if(a=r(o.value),a!==void 0)return a},zO}var VO,YQ;function Lm(){if(YQ)return VO;YQ=1;var t=du();return VO=function(e,r,n){return n?t(e.keys(),r,!0):e.forEach(r)},VO}var UO,QQ;function wD(){if(QQ)return UO;QQ=1;var t=uu(),e=Lm(),r=t.Set,n=t.add;return UO=function(i){var s=new r;return e(i,function(o){n(s,o)}),s},UO}var HO,XQ;function Bm(){return XQ||(XQ=1,HO=function(t){return t.size}),HO}var WO,JQ;function aFe(){return JQ||(JQ=1,WO=function(t){return{iterator:t,next:t.next,done:!1}}),WO}var KO,ZQ;function hu(){if(ZQ)return KO;ZQ=1;var t=Uo(),e=Hs(),r=si(),n=Th(),i=aFe(),s="Invalid size",o=RangeError,a=TypeError,l=Math.max,c=function(u,h){this.set=u,this.size=l(h,0),this.has=t(u.has),this.keys=t(u.keys)};return c.prototype={getIterator:function(){return i(e(r(this.keys,this.set)))},includes:function(u){return r(this.has,this.set,u)}},KO=function(u){e(u);var h=+u.size;if(h!==h)throw new a(s);var f=n(h);if(f<0)throw new o(s);return new c(u,f)},KO}var GO,eX;function lFe(){if(eX)return GO;eX=1;var t=cu(),e=uu(),r=wD(),n=Bm(),i=hu(),s=Lm(),o=du(),a=e.has,l=e.remove;return GO=function(u){var h=t(this),f=i(u),p=r(h);return n(h)<=f.size?s(h,function(m){f.includes(m)&&l(p,m)}):o(f.getIterator(),function(m){a(p,m)&&l(p,m)}),p},GO}var YO,tX;function fu(){return tX||(tX=1,YO=function(){return!1}),YO}var rX;function cFe(){if(rX)return HQ;rX=1;var t=Oe(),e=lFe(),r=Ze(),n=fu(),i=!n("difference",function(o){return o.size===0}),s=i||r(function(){var o={size:1,has:function(){return!0},keys:function(){var l=0;return{next:function(){var c=l++>1;return a.has(1)&&a.clear(),{done:c,value:2}}}}},a=new Set([1,2,3,4]);return a.difference(o).size!==3});return t({target:"Set",proto:!0,real:!0,forced:s},{difference:e}),HQ}var nX={},QO,iX;function uFe(){if(iX)return QO;iX=1;var t=cu(),e=uu(),r=Bm(),n=hu(),i=Lm(),s=du(),o=e.Set,a=e.add,l=e.has;return QO=function(u){var h=t(this),f=n(u),p=new o;return r(h)>f.size?s(f.getIterator(),function(m){l(h,m)&&a(p,m)}):i(h,function(m){f.includes(m)&&a(p,m)}),p},QO}var sX;function dFe(){if(sX)return nX;sX=1;var t=Oe(),e=Ze(),r=uFe(),n=fu(),i=!n("intersection",function(s){return s.size===2&&s.has(1)&&s.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return t({target:"Set",proto:!0,real:!0,forced:i},{intersection:r}),nX}var oX={},XO,aX;function hFe(){if(aX)return XO;aX=1;var t=cu(),e=uu().has,r=Bm(),n=hu(),i=Lm(),s=du(),o=hD();return XO=function(l){var c=t(this),u=n(l);if(r(c)<=u.size)return i(c,function(f){if(u.includes(f))return!1},!0)!==!1;var h=u.getIterator();return s(h,function(f){if(e(c,f))return o(h,"normal",!1)})!==!1},XO}var lX;function fFe(){if(lX)return oX;lX=1;var t=Oe(),e=hFe(),r=fu(),n=!r("isDisjointFrom",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:e}),oX}var cX={},JO,uX;function pFe(){if(uX)return JO;uX=1;var t=cu(),e=Bm(),r=Lm(),n=hu();return JO=function(s){var o=t(this),a=n(s);return e(o)>a.size?!1:r(o,function(l){if(!a.includes(l))return!1},!0)!==!1},JO}var dX;function mFe(){if(dX)return cX;dX=1;var t=Oe(),e=pFe(),r=fu(),n=!r("isSubsetOf",function(i){return i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:e}),cX}var hX={},ZO,fX;function gFe(){if(fX)return ZO;fX=1;var t=cu(),e=uu().has,r=Bm(),n=hu(),i=du(),s=hD();return ZO=function(a){var l=t(this),c=n(a);if(r(l)<c.size)return!1;var u=c.getIterator();return i(u,function(h){if(!e(l,h))return s(u,"normal",!1)})!==!1},ZO}var pX;function yFe(){if(pX)return hX;pX=1;var t=Oe(),e=gFe(),r=fu(),n=!r("isSupersetOf",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:e}),hX}var mX={},ej,gX;function vFe(){if(gX)return ej;gX=1;var t=cu(),e=uu(),r=wD(),n=hu(),i=du(),s=e.add,o=e.has,a=e.remove;return ej=function(c){var u=t(this),h=n(c).getIterator(),f=r(u);return i(h,function(p){o(u,p)?a(f,p):s(f,p)}),f},ej}var tj,yX;function Gae(){return yX||(yX=1,tj=function(t){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[t](r);return n.size===1&&n.values().next().value===4}catch{return!1}}),tj}var vX;function bFe(){if(vX)return mX;vX=1;var t=Oe(),e=vFe(),r=Gae(),n=fu(),i=!n("symmetricDifference")||!r("symmetricDifference");return t({target:"Set",proto:!0,real:!0,forced:i},{symmetricDifference:e}),mX}var bX={},rj,xX;function xFe(){if(xX)return rj;xX=1;var t=cu(),e=uu().add,r=wD(),n=hu(),i=du();return rj=function(o){var a=t(this),l=n(o).getIterator(),c=r(a);return i(l,function(u){e(c,u)}),c},rj}var wX;function wFe(){if(wX)return bX;wX=1;var t=Oe(),e=xFe(),r=Gae(),n=fu(),i=!n("union")||!r("union");return t({target:"Set",proto:!0,real:!0,forced:i},{union:e}),bX}var nj,SX;function SFe(){if(SX)return nj;SX=1,Ih(),oFe(),cFe(),dFe(),fFe(),mFe(),yFe(),bFe(),wFe(),gD();var t=mt();return nj=t.Set,nj}var ij,_X;function _Fe(){if(_X)return ij;_X=1;var t=SFe();return Rh(),ij=t,ij}var sj,EX;function EFe(){return EX||(EX=1,sj=_Fe()),sj}var CFe=EFe(),ha=$e(CFe),CX={},NX={},oj,kX;function NFe(){if(kX)return oj;kX=1;var t=rt(),e=mD(),r=Nb().getWeakData,n=fD(),i=Hs(),s=wh(),o=Wr(),a=kb(),l=gl(),c=nn(),u=ou(),h=u.set,f=u.getterFor,p=l.find,m=l.findIndex,g=t([].splice),v=0,y=function(x){return x.frozen||(x.frozen=new b)},b=function(){this.entries=[]},w=function(x,S){return p(x.entries,function(_){return _[0]===S})};return b.prototype={get:function(x){var S=w(this,x);if(S)return S[1]},has:function(x){return!!w(this,x)},set:function(x,S){var _=w(this,x);_?_[1]=S:this.entries.push([x,S])},delete:function(x){var S=m(this.entries,function(_){return _[0]===x});return~S&&g(this.entries,S,1),!!~S}},oj={getConstructor:function(x,S,_,C){var E=x(function(P,O){n(P,N),h(P,{type:S,id:v++,frozen:null}),s(O)||a(O,P[C],{that:P,AS_ENTRIES:_})}),N=E.prototype,T=f(S),j=function(P,O,D){var z=T(P),R=r(i(O),!0);return R===!0?y(z).set(O,D):R[z.id]=D,P};return e(N,{delete:function(P){var O=T(this);if(!o(P))return!1;var D=r(P);return D===!0?y(O).delete(P):D&&c(D,O.id)&&delete D[O.id]},has:function(O){var D=T(this);if(!o(O))return!1;var z=r(O);return z===!0?y(D).has(O):z&&c(z,D.id)}}),e(N,_?{get:function(O){var D=T(this);if(o(O)){var z=r(O);if(z===!0)return y(D).get(O);if(z)return z[D.id]}},set:function(O,D){return j(this,O,D)}}:{add:function(O){return j(this,O,!0)}}),E}},oj}var TX;function kFe(){if(TX)return NX;TX=1;var t=Mae(),e=Dt(),r=rt(),n=mD(),i=Nb(),s=pD(),o=NFe(),a=Wr(),l=ou().enforce,c=Ze(),u=Doe(),h=Object,f=Array.isArray,p=h.isExtensible,m=h.isFrozen,g=h.isSealed,v=h.freeze,y=h.seal,b=!e.ActiveXObject&&"ActiveXObject"in e,w,x=function(P){return function(){return P(this,arguments.length?arguments[0]:void 0)}},S=s("WeakMap",x,o),_=S.prototype,C=r(_.set),E=function(){return t&&c(function(){var P=v([]);return C(new S,P,1),!m(P)})};if(u)if(b){w=o.getConstructor(x,"WeakMap",!0),i.enable();var N=r(_.delete),T=r(_.has),j=r(_.get);n(_,{delete:function(P){if(a(P)&&!p(P)){var O=l(this);return O.frozen||(O.frozen=new w),N(this,P)||O.frozen.delete(P)}return N(this,P)},has:function(O){if(a(O)&&!p(O)){var D=l(this);return D.frozen||(D.frozen=new w),T(this,O)||D.frozen.has(O)}return T(this,O)},get:function(O){if(a(O)&&!p(O)){var D=l(this);return D.frozen||(D.frozen=new w),T(this,O)?j(this,O):D.frozen.get(O)}return j(this,O)},set:function(O,D){if(a(O)&&!p(O)){var z=l(this);z.frozen||(z.frozen=new w),T(this,O)?C(this,O,D):z.frozen.set(O,D)}else C(this,O,D);return this}})}else E()&&n(_,{set:function(O,D){var z;return f(O)&&(m(O)?z=v:g(O)&&(z=y)),C(this,O,D),z&&z(O),this}});return NX}var OX;function TFe(){return OX||(OX=1,kFe()),CX}var aj,jX;function OFe(){if(jX)return aj;jX=1,Ih(),TFe();var t=mt();return aj=t.WeakMap,aj}var lj,PX;function jFe(){if(PX)return lj;PX=1;var t=OFe();return Rh(),lj=t,lj}var cj,IX;function PFe(){return IX||(IX=1,cj=jFe()),cj}var IFe=PFe(),zm=$e(IFe);function Uf(t,e,r){RFe(t,e),e.set(t,r)}function RFe(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function iR(t,e,r){return t.set(Yae(t,e),r),r}function _t(t,e){return t.get(Yae(t,e))}function Yae(t,e,r){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function RX(t,e){const r=new ha;for(const n of e)t.has(n)||r.add(n);return r}var Eu=new zm,Ji=new zm;class MX{constructor(){Uf(this,Eu,new ha),Uf(this,Ji,new ha)}get size(){return _t(Ji,this).size}add(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(const i of r)_t(Ji,this).add(i)}delete(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(const i of r)_t(Ji,this).delete(i)}clear(){_t(Ji,this).clear()}getSelection(){return[..._t(Ji,this)]}getChanges(){return{added:[...RX(_t(Eu,this),_t(Ji,this))],deleted:[...RX(_t(Ji,this),_t(Eu,this))],previous:[...new ha(_t(Eu,this))],current:[...new ha(_t(Ji,this))]}}commit(){const e=this.getChanges();iR(Eu,this,_t(Ji,this)),iR(Ji,this,new ha(_t(Eu,this)));for(const r of e.added)r.select();for(const r of e.deleted)r.unselect();return e}}var Nl=new zm,kl=new zm,uj=new zm;class MFe{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:()=>{};Uf(this,Nl,new MX),Uf(this,kl,new MX),Uf(this,uj,void 0),iR(uj,this,e)}get sizeNodes(){return _t(Nl,this).size}get sizeEdges(){return _t(kl,this).size}getNodes(){return _t(Nl,this).getSelection()}getEdges(){return _t(kl,this).getSelection()}addNodes(){_t(Nl,this).add(...arguments)}addEdges(){_t(kl,this).add(...arguments)}deleteNodes(e){_t(Nl,this).delete(e)}deleteEdges(e){_t(kl,this).delete(e)}clear(){_t(Nl,this).clear(),_t(kl,this).clear()}commit(){const e={nodes:_t(Nl,this).commit(),edges:_t(kl,this).commit()};for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return _t(uj,this).call(this,e,...n),e}}class AFe{constructor(e,r){this.body=e,this.canvas=r,this._selectionAccumulator=new MFe,this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},pr(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",()=>{this.updateSelection()})}setOptions(e){e!==void 0&&Dh(["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"],this.options,e)}selectOnPoint(e){let r=!1;if(this.options.selectable===!0){const n=this.getNodeAt(e)||this.getEdgeAt(e);this.unselectAll(),n!==void 0&&(r=this.selectObject(n)),this.body.emitter.emit("_requestRedraw")}return r}selectAdditionalOnPoint(e){let r=!1;if(this.options.selectable===!0){const n=this.getNodeAt(e)||this.getEdgeAt(e);n!==void 0&&(r=!0,n.isSelected()===!0?this.deselectObject(n):this.selectObject(n),this.body.emitter.emit("_requestRedraw"))}return r}_initBaseEvent(e,r){const n={};return n.pointer={DOM:{x:r.x,y:r.y},canvas:this.canvas.DOMtoCanvas(r)},n.event=e,n}generateClickEvent(e,r,n,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;const o=this._initBaseEvent(r,n);if(s===!0)o.nodes=[],o.edges=[];else{const a=this.getSelection();o.nodes=a.nodes,o.edges=a.edges}i!==void 0&&(o.previousSelection=i),e=="click"&&(o.items=this.getClickedItems(n)),r.controlEdge!==void 0&&(o.controlEdge=r.controlEdge),this.body.emitter.emit(e,o)}selectObject(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.selectConnectedEdges;return e!==void 0?(e instanceof Mt?(r===!0&&this._selectionAccumulator.addEdges(...e.edges),this._selectionAccumulator.addNodes(e)):this._selectionAccumulator.addEdges(e),!0):!1}deselectObject(e){e.isSelected()===!0&&(e.selected=!1,this._removeFromSelection(e))}_getAllNodesOverlappingWith(e){const r=[],n=this.body.nodes;for(let i=0;i<this.body.nodeIndices.length;i++){const s=this.body.nodeIndices[i];n[s].isOverlappingWith(e)&&r.push(s)}return r}_pointerToPositionObject(e){const r=this.canvas.DOMtoCanvas(e);return{left:r.x-1,top:r.y+1,right:r.x+1,bottom:r.y-1}}getNodeAt(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=this._pointerToPositionObject(e),i=this._getAllNodesOverlappingWith(n);if(i.length>0)return r===!0?this.body.nodes[i[i.length-1]]:i[i.length-1]}_getEdgesOverlappingWith(e,r){const n=this.body.edges;for(let i=0;i<this.body.edgeIndices.length;i++){const s=this.body.edgeIndices[i];n[s].isOverlappingWith(e)&&r.push(s)}}_getAllEdgesOverlappingWith(e){const r=[];return this._getEdgesOverlappingWith(e,r),r}getEdgeAt(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=this.canvas.DOMtoCanvas(e);let i=10,s=null;const o=this.body.edges;for(let a=0;a<this.body.edgeIndices.length;a++){const l=this.body.edgeIndices[a],c=o[l];if(c.connected){const u=c.from.x,h=c.from.y,f=c.to.x,p=c.to.y,m=c.edgeType.getDistanceToEdge(u,h,f,p,n.x,n.y);m<i&&(s=l,i=m)}}if(s!==null)return r===!0?this.body.edges[s]:s}_addToHover(e){e instanceof Mt?this.hoverObj.nodes[e.id]=e:this.hoverObj.edges[e.id]=e}_removeFromSelection(e){e instanceof Mt?(this._selectionAccumulator.deleteNodes(e),this._selectionAccumulator.deleteEdges(...e.edges)):this._selectionAccumulator.deleteEdges(e)}unselectAll(){this._selectionAccumulator.clear()}getSelectedNodeCount(){return this._selectionAccumulator.sizeNodes}getSelectedEdgeCount(){return this._selectionAccumulator.sizeEdges}_hoverConnectedEdges(e){for(let r=0;r<e.edges.length;r++){const n=e.edges[r];n.hover=!0,this._addToHover(n)}}emitBlurEvent(e,r,n){const i=this._initBaseEvent(e,r);n.hover===!0&&(n.hover=!1,n instanceof Mt?(i.node=n.id,this.body.emitter.emit("blurNode",i)):(i.edge=n.id,this.body.emitter.emit("blurEdge",i)))}emitHoverEvent(e,r,n){const i=this._initBaseEvent(e,r);let s=!1;return n.hover===!1&&(n.hover=!0,this._addToHover(n),s=!0,n instanceof Mt?(i.node=n.id,this.body.emitter.emit("hoverNode",i)):(i.edge=n.id,this.body.emitter.emit("hoverEdge",i))),s}hoverObject(e,r){let n=this.getNodeAt(r);n===void 0&&(n=this.getEdgeAt(r));let i=!1;for(const s in this.hoverObj.nodes)Object.prototype.hasOwnProperty.call(this.hoverObj.nodes,s)&&(n===void 0||n instanceof Mt&&n.id!=s||n instanceof Qa)&&(this.emitBlurEvent(e,r,this.hoverObj.nodes[s]),delete this.hoverObj.nodes[s],i=!0);for(const s in this.hoverObj.edges)Object.prototype.hasOwnProperty.call(this.hoverObj.edges,s)&&(i===!0?(this.hoverObj.edges[s].hover=!1,delete this.hoverObj.edges[s]):(n===void 0||n instanceof Qa&&n.id!=s||n instanceof Mt&&!n.hover)&&(this.emitBlurEvent(e,r,this.hoverObj.edges[s]),delete this.hoverObj.edges[s],i=!0));if(n!==void 0){const s=Xt(this.hoverObj.edges).length,o=Xt(this.hoverObj.nodes).length,a=n instanceof Qa&&s===0&&o===0,l=n instanceof Mt&&s===0&&o===0;(i||a||l)&&(i=this.emitHoverEvent(e,r,n)),n instanceof Mt&&this.options.hoverConnectedEdges===!0&&this._hoverConnectedEdges(n)}i===!0&&this.body.emitter.emit("_requestRedraw")}commitWithoutEmitting(){this._selectionAccumulator.commit()}commitAndEmit(e,r){let n=!1;const i=this._selectionAccumulator.commit(),s={nodes:i.nodes.previous,edges:i.edges.previous};i.edges.deleted.length>0&&(this.generateClickEvent("deselectEdge",r,e,s),n=!0),i.nodes.deleted.length>0&&(this.generateClickEvent("deselectNode",r,e,s),n=!0),i.nodes.added.length>0&&(this.generateClickEvent("selectNode",r,e),n=!0),i.edges.added.length>0&&(this.generateClickEvent("selectEdge",r,e),n=!0),n===!0&&this.generateClickEvent("select",r,e)}getSelection(){return{nodes:this.getSelectedNodeIds(),edges:this.getSelectedEdgeIds()}}getSelectedNodes(){return this._selectionAccumulator.getNodes()}getSelectedEdges(){return this._selectionAccumulator.getEdges()}getSelectedNodeIds(){var e;return Qd(e=this._selectionAccumulator.getNodes()).call(e,r=>r.id)}getSelectedEdgeIds(){var e;return Qd(e=this._selectionAccumulator.getEdges()).call(e,r=>r.id)}setSelection(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e||!e.nodes&&!e.edges)throw new TypeError("Selection must be an object with nodes and/or edges properties");if((r.unselectAll||r.unselectAll===void 0)&&this.unselectAll(),e.nodes)for(const n of e.nodes){const i=this.body.nodes[n];if(!i)throw new RangeError('Node with id "'+n+'" not found');this.selectObject(i,r.highlightEdges)}if(e.edges)for(const n of e.edges){const i=this.body.edges[n];if(!i)throw new RangeError('Edge with id "'+n+'" not found');this.selectObject(i)}this.body.emitter.emit("_requestRedraw"),this._selectionAccumulator.commit()}selectNodes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({nodes:e},{highlightEdges:r})}selectEdges(e){if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({edges:e})}updateSelection(){for(const e in this._selectionAccumulator.getNodes())Object.prototype.hasOwnProperty.call(this.body.nodes,e.id)||this._selectionAccumulator.deleteNodes(e);for(const e in this._selectionAccumulator.getEdges())Object.prototype.hasOwnProperty.call(this.body.edges,e.id)||this._selectionAccumulator.deleteEdges(e)}getClickedItems(e){const r=this.canvas.DOMtoCanvas(e),n=[],i=this.body.nodeIndices,s=this.body.nodes;for(let l=i.length-1;l>=0;l--){const u=s[i[l]].getItemsOnPoint(r);n.push.apply(n,u)}const o=this.body.edgeIndices,a=this.body.edges;for(let l=o.length-1;l>=0;l--){const u=a[o[l]].getItemsOnPoint(r);n.push.apply(n,u)}return n}}var AX={},dj,DX;function DFe(){if(DX)return dj;DX=1;var t=Oh(),e=Math.floor,r=function(n,i){var s=n.length;if(s<8)for(var o=1,a,l;o<s;){for(l=o,a=n[o];l&&i(n[l-1],a)>0;)n[l]=n[--l];l!==o++&&(n[l]=a)}else for(var c=e(s/2),u=r(t(n,0,c),i),h=r(t(n,c),i),f=u.length,p=h.length,m=0,g=0;m<f||g<p;)n[m+g]=m<f&&g<p?i(u[m],h[g])<=0?u[m++]:h[g++]:m<f?u[m++]:h[g++];return n};return dj=r,dj}var hj,$X;function $Fe(){if($X)return hj;$X=1;var t=Sh(),e=t.match(/firefox\/(\d+)/i);return hj=!!e&&+e[1],hj}var fj,FX;function FFe(){if(FX)return fj;FX=1;var t=Sh();return fj=/MSIE|Trident/.test(t),fj}var pj,qX;function qFe(){if(qX)return pj;qX=1;var t=Sh(),e=t.match(/AppleWebKit\/(\d+)\./);return pj=!!e&&+e[1],pj}var LX;function LFe(){if(LX)return AX;LX=1;var t=Oe(),e=rt(),r=Uo(),n=Si(),i=Ho(),s=Koe(),o=Gi(),a=Ze(),l=DFe(),c=Mh(),u=$Fe(),h=FFe(),f=Nm(),p=qFe(),m=[],g=e(m.sort),v=e(m.push),y=a(function(){m.sort(void 0)}),b=a(function(){m.sort(null)}),w=c("sort"),x=!a(function(){if(f)return f<70;if(!(u&&u>3)){if(h)return!0;if(p)return p<603;var C="",E,N,T,j;for(E=65;E<76;E++){switch(N=String.fromCharCode(E),E){case 66:case 69:case 70:case 72:T=3;break;case 68:case 71:T=4;break;default:T=2}for(j=0;j<47;j++)m.push({k:N+j,v:T})}for(m.sort(function(P,O){return O.v-P.v}),j=0;j<m.length;j++)N=m[j].k.charAt(0),C.charAt(C.length-1)!==N&&(C+=N);return C!=="DGBEFHACIJK"}}),S=y||!b||!w||!x,_=function(C){return function(E,N){return N===void 0?-1:E===void 0?1:C!==void 0?+C(E,N)||0:o(E)>o(N)?1:-1}};return t({target:"Array",proto:!0,forced:S},{sort:function(E){E!==void 0&&r(E);var N=n(this);if(x)return E===void 0?g(N):g(N,E);var T=[],j=i(N),P,O;for(O=0;O<j;O++)O in N&&v(T,N[O]);for(l(T,_(E)),P=i(T),O=0;O<P;)N[O]=T[O++];for(;O<j;)s(N,O++);return N}}),AX}var mj,BX;function BFe(){if(BX)return mj;BX=1,LFe();var t=sn();return mj=t("Array","sort"),mj}var gj,zX;function zFe(){if(zX)return gj;zX=1;var t=xr(),e=BFe(),r=Array.prototype;return gj=function(n){var i=n.sort;return n===r||t(r,n)&&i===r.sort?e:i},gj}var yj,VX;function VFe(){if(VX)return yj;VX=1;var t=zFe();return yj=t,yj}var vj,UX;function UFe(){return UX||(UX=1,vj=VFe()),vj}var HFe=UFe(),ud=$e(HFe),HX={},bj,WX;function WFe(){if(WX)return bj;WX=1;var t=Uo(),e=Si(),r=hb(),n=Ho(),i=TypeError,s="Reduce of empty array with no initial value",o=function(a){return function(l,c,u,h){var f=e(l),p=r(f),m=n(f);if(t(c),m===0&&u<2)throw new i(s);var g=a?m-1:0,v=a?-1:1;if(u<2)for(;;){if(g in p){h=p[g],g+=v;break}if(g+=v,a?g<0:m<=g)throw new i(s)}for(;a?g>=0:m>g;g+=v)g in p&&(h=c(h,p[g],g,f));return h}};return bj={left:o(!1),right:o(!0)},bj}var xj,KX;function KFe(){if(KX)return xj;KX=1;var t=Yoe();return xj=t==="NODE",xj}var GX;function GFe(){if(GX)return HX;GX=1;var t=Oe(),e=WFe().left,r=Mh(),n=Nm(),i=KFe(),s=!i&&n>79&&n<83,o=s||!r("reduce");return t({target:"Array",proto:!0,forced:o},{reduce:function(l){var c=arguments.length;return e(this,l,c,c>1?arguments[1]:void 0)}}),HX}var wj,YX;function YFe(){if(YX)return wj;YX=1,GFe();var t=sn();return wj=t("Array","reduce"),wj}var Sj,QX;function QFe(){if(QX)return Sj;QX=1;var t=xr(),e=YFe(),r=Array.prototype;return Sj=function(n){var i=n.reduce;return n===r||t(r,n)&&i===r.reduce?e:i},Sj}var _j,XX;function XFe(){if(XX)return _j;XX=1;var t=QFe();return _j=t,_j}var Ej,JX;function JFe(){return JX||(JX=1,Ej=XFe()),Ej}var ZFe=JFe(),Qae=$e(ZFe);class Xae{abstract(){throw new Error("Can't instantiate abstract class!")}fake_use(){}curveType(){return this.abstract()}getPosition(e){return this.fake_use(e),this.abstract()}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;this.fake_use(e,r,n),this.abstract()}getTreeSize(e){return this.fake_use(e),this.abstract()}sort(e){this.fake_use(e),this.abstract()}fix(e,r){this.fake_use(e,r),this.abstract()}shift(e,r){this.fake_use(e,r),this.abstract()}}class e4e extends Xae{constructor(e){super(),this.layout=e}curveType(){return"horizontal"}getPosition(e){return e.x}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;n!==void 0&&this.layout.hierarchical.addToOrdering(e,n),e.x=r}getTreeSize(e){const r=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:r.min_x,max:r.max_x}}sort(e){ud(e).call(e,function(r,n){return r.x-n.x})}fix(e,r){e.y=this.layout.options.hierarchical.levelSeparation*r,e.options.fixed.y=!0}shift(e,r){this.layout.body.nodes[e].x+=r}}class t4e extends Xae{constructor(e){super(),this.layout=e}curveType(){return"vertical"}getPosition(e){return e.y}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;n!==void 0&&this.layout.hierarchical.addToOrdering(e,n),e.y=r}getTreeSize(e){const r=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:r.min_y,max:r.max_y}}sort(e){ud(e).call(e,function(r,n){return r.y-n.y})}fix(e,r){e.x=this.layout.options.hierarchical.levelSeparation*r,e.options.fixed.x=!0}shift(e,r){this.layout.body.nodes[e].y+=r}}var ZX={},eJ;function r4e(){if(eJ)return ZX;eJ=1;var t=Oe(),e=gl().every,r=Mh(),n=r("every");return t({target:"Array",proto:!0,forced:!n},{every:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),ZX}var Cj,tJ;function n4e(){if(tJ)return Cj;tJ=1,r4e();var t=sn();return Cj=t("Array","every"),Cj}var Nj,rJ;function i4e(){if(rJ)return Nj;rJ=1;var t=xr(),e=n4e(),r=Array.prototype;return Nj=function(n){var i=n.every;return n===r||t(r,n)&&i===r.every?e:i},Nj}var kj,nJ;function s4e(){if(nJ)return kj;nJ=1;var t=i4e();return kj=t,kj}var Tj,iJ;function o4e(){return iJ||(iJ=1,Tj=s4e()),Tj}var a4e=o4e(),Jae=$e(a4e);function l4e(t,e){const r=new ha;return xt(t).call(t,n=>{var i;xt(i=n.edges).call(i,s=>{s.connected&&r.add(s)})}),xt(r).call(r,n=>{const i=n.from.id,s=n.to.id;e[i]==null&&(e[i]=0),(e[s]==null||e[i]>=e[s])&&(e[s]=e[i]+1)}),e}function c4e(t){return Zae(e=>{var r,n;return Jae(r=Hn(n=e.edges).call(n,i=>t.has(i.toId))).call(r,i=>i.to===e)},(e,r)=>r>e,"from",t)}function u4e(t){return Zae(e=>{var r,n;return Jae(r=Hn(n=e.edges).call(n,i=>t.has(i.toId))).call(r,i=>i.from===e)},(e,r)=>r<e,"to",t)}function Zae(t,e,r,n){var i;const s=hc(null),o=Qae(i=[...Vae(n).call(n)]).call(i,(h,f)=>h+1+f.edges.length,0),a=r+"Id",l=r==="to"?1:-1;for(const[h,f]of n){if(!n.has(h)||!t(f))continue;s[h]=0;const p=[f];let m=0,g;for(;g=p.pop();){var c,u;if(!n.has(h))continue;const v=s[g.id]+l;if(xt(c=Hn(u=g.edges).call(u,y=>y.connected&&y.to!==y.from&&y[r]!==g&&n.has(y.toId)&&n.has(y.fromId))).call(c,y=>{const b=y[a],w=s[b];(w==null||e(v,w))&&(s[b]=v,p.push(y[r]))}),m>o)return l4e(n,s);++m}}return s}class d4e{constructor(){this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}addRelation(e,r){this.childrenReference[e]===void 0&&(this.childrenReference[e]=[]),this.childrenReference[e].push(r),this.parentReference[r]===void 0&&(this.parentReference[r]=[]),this.parentReference[r].push(e)}checkIfTree(){for(const e in this.parentReference)if(this.parentReference[e].length>1){this.isTree=!1;return}this.isTree=!0}numTrees(){return this.treeIndex+1}setTreeIndex(e,r){r!==void 0&&this.trees[e.id]===void 0&&(this.trees[e.id]=r,this.treeIndex=Math.max(r,this.treeIndex))}ensureLevel(e){this.levels[e]===void 0&&(this.levels[e]=0)}getMaxLevel(e){const r={},n=i=>{if(r[i]!==void 0)return r[i];let s=this.levels[i];if(this.childrenReference[i]){const o=this.childrenReference[i];if(o.length>0)for(let a=0;a<o.length;a++)s=Math.max(s,n(o[a]))}return r[i]=s,s};return n(e)}levelDownstream(e,r){this.levels[r.id]===void 0&&(this.levels[e.id]===void 0&&(this.levels[e.id]=0),this.levels[r.id]=this.levels[e.id]+1)}setMinLevelToZero(){var e;const r=new yD;let n=0;const i=ud(e=[...new ha(NIe(this.levels))]).call(e,(s,o)=>s-o);for(const s of i)r.set(s,n++);for(const s in this.levels)Object.prototype.hasOwnProperty.call(this.levels,s)&&(this.levels[s]=r.get(this.levels[s]))}getTreeSize(e,r){let n=1e9,i=-1e9,s=1e9,o=-1e9;for(const a in this.trees)if(Object.prototype.hasOwnProperty.call(this.trees,a)&&this.trees[a]===r){const l=e[a];n=Math.min(l.x,n),i=Math.max(l.x,i),s=Math.min(l.y,s),o=Math.max(l.y,o)}return{min_x:n,max_x:i,min_y:s,max_y:o}}hasSameParent(e,r){const n=this.parentReference[e.id],i=this.parentReference[r.id];if(n===void 0||i===void 0)return!1;for(let s=0;s<n.length;s++)for(let o=0;o<i.length;o++)if(n[s]==i[o])return!0;return!1}inSameSubNetwork(e,r){return this.trees[e.id]===this.trees[r.id]}getLevels(){return Xt(this.distributionOrdering)}addToOrdering(e,r){this.distributionOrdering[r]===void 0&&(this.distributionOrdering[r]=[]);let n=!1;const i=this.distributionOrdering[r];for(const s in i)if(i[s]===e){n=!0;break}n||(this.distributionOrdering[r].push(e),this.distributionIndex[e.id]=this.distributionOrdering[r].length-1)}}class h4e{constructor(e){this.body=e,this._resetRNG(Math.random()+":"+Kv()),this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},pr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("_dataChanged",()=>{this.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",()=>{this.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",()=>{this.setupHierarchicalLayout()}),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",()=>{if(this.options.hierarchical.enabled!==!0)return;const e=this.direction.curveType();this.body.emitter.emit("_forceDisableDynamicCurves",e,!1)})}setOptions(e,r){if(e!==void 0){const n=this.options.hierarchical,i=n.enabled;if(Dh(["randomSeed","improvedLayout","clusterThreshold"],this.options,e),Pi(this.options,e,"hierarchical"),e.randomSeed!==void 0&&this._resetRNG(e.randomSeed),n.enabled===!0)return i===!0&&this.body.emitter.emit("refresh",!0),n.direction==="RL"||n.direction==="DU"?n.levelSeparation>0&&(n.levelSeparation*=-1):n.levelSeparation<0&&(n.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(r);if(i===!0)return this.body.emitter.emit("refresh"),Et(r,this.optionsBackup)}return r}_resetRNG(e){this.initialRandomSeed=e,this._rng=Cb(this.initialRandomSeed)}adaptAllOptionsForHierarchicalLayout(e){if(this.options.hierarchical.enabled===!0){const r=this.optionsBackup.physics;e.physics===void 0||e.physics===!0?(e.physics={enabled:r.enabled===void 0?!0:r.enabled,solver:"hierarchicalRepulsion"},r.enabled=r.enabled===void 0?!0:r.enabled,r.solver=r.solver||"barnesHut"):typeof e.physics=="object"?(r.enabled=e.physics.enabled===void 0?!0:e.physics.enabled,r.solver=e.physics.solver||"barnesHut",e.physics.solver="hierarchicalRepulsion"):e.physics!==!1&&(r.solver="barnesHut",e.physics={solver:"hierarchicalRepulsion"});let n=this.direction.curveType();if(e.edges===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges={smooth:!1};else if(e.edges.smooth===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges.smooth=!1;else if(typeof e.edges.smooth=="boolean")this.optionsBackup.edges={smooth:e.edges.smooth},e.edges.smooth={enabled:e.edges.smooth,type:n};else{const i=e.edges.smooth;i.type!==void 0&&i.type!=="dynamic"&&(n=i.type),this.optionsBackup.edges={smooth:{enabled:i.enabled===void 0?!0:i.enabled,type:i.type===void 0?"dynamic":i.type,roundness:i.roundness===void 0?.5:i.roundness,forceDirection:i.forceDirection===void 0?!1:i.forceDirection}},e.edges.smooth={enabled:i.enabled===void 0?!0:i.enabled,type:n,roundness:i.roundness===void 0?.5:i.roundness,forceDirection:i.forceDirection===void 0?!1:i.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",n)}return e}positionInitially(e){if(this.options.hierarchical.enabled!==!0){this._resetRNG(this.initialRandomSeed);const r=e.length+50;for(let n=0;n<e.length;n++){const i=e[n],s=2*Math.PI*this._rng();i.x===void 0&&(i.x=r*Math.cos(s)),i.y===void 0&&(i.y=r*Math.sin(s))}}}layoutNetwork(){if(this.options.hierarchical.enabled!==!0&&this.options.improvedLayout===!0){const e=this.body.nodeIndices;let r=0;for(let n=0;n<e.length;n++)this.body.nodes[e[n]].predefinedPosition===!0&&(r+=1);if(r<.5*e.length){let i=0;const s=this.options.clusterThreshold,o={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(e.length>s){const l=e.length;for(;e.length>s&&i<=10;){i+=1;const c=e.length;i%3===0?this.body.modules.clustering.clusterBridges(o):this.body.modules.clustering.clusterOutliers(o);const u=e.length;if(c==u&&i%3!==0){this._declusterAll(),this.body.emitter.emit("_layoutFailed"),console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.");return}}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*l)})}i>10&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(e,this.body.edgeIndices,!0),this._shiftToCenter();const a=70;for(let l=0;l<e.length;l++){const c=this.body.nodes[e[l]];c.predefinedPosition===!1&&(c.x+=(.5-this._rng())*a,c.y+=(.5-this._rng())*a)}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}_shiftToCenter(){const e=Nn.getRangeCore(this.body.nodes,this.body.nodeIndices),r=Nn.findCenter(e);for(let n=0;n<this.body.nodeIndices.length;n++){const i=this.body.nodes[this.body.nodeIndices[n]];i.x-=r.x,i.y-=r.y}}_declusterAll(){let e=!0;for(;e===!0;){e=!1;for(let r=0;r<this.body.nodeIndices.length;r++)this.body.nodes[this.body.nodeIndices[r]].isCluster===!0&&(e=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[r],{},!1));e===!0&&this.body.emitter.emit("_dataChanged")}}getSeed(){return this.initialRandomSeed}setupHierarchicalLayout(){if(this.options.hierarchical.enabled===!0&&this.body.nodeIndices.length>0){let e,r,n=!1,i=!1;this.lastNodeOnLevel={},this.hierarchical=new d4e;for(r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&(e=this.body.nodes[r],e.options.level!==void 0?(n=!0,this.hierarchical.levels[r]=e.options.level):i=!0);if(i===!0&&n===!0)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");{if(i===!0){const o=this.options.hierarchical.sortMethod;o==="hubsize"?this._determineLevelsByHubsize():o==="directed"?this._determineLevelsDirected():o==="custom"&&this._determineLevelsCustomCallback()}for(const o in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,o)&&this.hierarchical.ensureLevel(o);const s=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(s),this._condenseHierarchy(),this._shiftToCenter()}}}_condenseHierarchy(){var e=this;let r=!1;const n={},i=()=>{const y=o();let b=0;for(let w=0;w<y.length-1;w++){const x=y[w].max-y[w+1].min;b+=x+this.options.hierarchical.treeSpacing,s(w+1,b)}},s=(y,b)=>{const w=this.hierarchical.trees;for(const x in w)Object.prototype.hasOwnProperty.call(w,x)&&w[x]===y&&this.direction.shift(x,b)},o=()=>{const y=[];for(let b=0;b<this.hierarchical.numTrees();b++)y.push(this.direction.getTreeSize(b));return y},a=(y,b)=>{if(!b[y.id]&&(b[y.id]=!0,this.hierarchical.childrenReference[y.id])){const w=this.hierarchical.childrenReference[y.id];if(w.length>0)for(let x=0;x<w.length;x++)a(this.body.nodes[w[x]],b)}},l=function(y){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e9,w=1e9,x=1e9,S=1e9,_=-1e9;for(const C in y)if(Object.prototype.hasOwnProperty.call(y,C)){const E=e.body.nodes[C],N=e.hierarchical.levels[E.id],T=e.direction.getPosition(E),[j,P]=e._getSpaceAroundNode(E,y);w=Math.min(j,w),x=Math.min(P,x),N<=b&&(S=Math.min(T,S),_=Math.max(T,_))}return[S,_,w,x]},c=(y,b)=>{const w=this.hierarchical.getMaxLevel(y.id),x=this.hierarchical.getMaxLevel(b.id);return Math.min(w,x)},u=(y,b,w)=>{const x=this.hierarchical;for(let S=0;S<b.length;S++){const _=b[S],C=x.distributionOrdering[_];if(C.length>1)for(let E=0;E<C.length-1;E++){const N=C[E],T=C[E+1];x.hasSameParent(N,T)&&x.inSameSubNetwork(N,T)&&y(N,T,w)}}},h=function(y,b){let w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const x=e.direction.getPosition(y),S=e.direction.getPosition(b),_=Math.abs(S-x),C=e.options.hierarchical.nodeSpacing;if(_>C){const E={},N={};a(y,E),a(b,N);const T=c(y,b),j=l(E,T),P=l(N,T),O=j[1],D=P[0],z=P[2];if(Math.abs(O-D)>C){let B=O-D+C;B<-z+C&&(B=-z+C),B<0&&(e._shiftBlock(b.id,B),r=!0,w===!0&&e._centerParent(b))}}},f=(y,b)=>{const w=b.id,x=b.edges,S=this.hierarchical.levels[b.id],_=this.options.hierarchical.levelSeparation*this.options.hierarchical.levelSeparation,C={},E=[];for(let z=0;z<x.length;z++){const R=x[z];if(R.toId!=R.fromId){const B=R.toId==w?R.from:R.to;C[x[z].id]=B,this.hierarchical.levels[B.id]<S&&E.push(R)}}const N=(z,R)=>{let B=0;for(let q=0;q<R.length;q++)if(C[R[q].id]!==void 0){const $=this.direction.getPosition(C[R[q].id])-z;B+=$/Math.sqrt($*$+_)}return B},T=(z,R)=>{let B=0;for(let q=0;q<R.length;q++)if(C[R[q].id]!==void 0){const $=this.direction.getPosition(C[R[q].id])-z;B-=_*Math.pow($*$+_,-1.5)}return B},j=(z,R)=>{let B=this.direction.getPosition(b);const q={};for(let $=0;$<z;$++){const K=N(B,R),W=T(B,R),F=40,X=Math.max(-F,Math.min(F,Math.round(K/W)));if(B=B-X,q[B]!==void 0)break;q[B]=$}return B},P=z=>{const R=this.direction.getPosition(b);if(n[b.id]===void 0){const F={};a(b,F),n[b.id]=F}const B=l(n[b.id]),q=B[2],$=B[3],K=z-R;let W=0;K>0?W=Math.min(K,$-this.options.hierarchical.nodeSpacing):K<0&&(W=-Math.min(-K,q-this.options.hierarchical.nodeSpacing)),W!=0&&(this._shiftBlock(b.id,W),r=!0)},O=z=>{const R=this.direction.getPosition(b),[B,q]=this._getSpaceAroundNode(b),$=z-R;let K=R;$>0?K=Math.min(R+(q-this.options.hierarchical.nodeSpacing),z):$<0&&(K=Math.max(R-(B-this.options.hierarchical.nodeSpacing),z)),K!==R&&(this.direction.setPosition(b,K),r=!0)};let D=j(y,E);P(D),D=j(y,x),O(D)},p=y=>{let b=this.hierarchical.getLevels();b=dc(b).call(b);for(let w=0;w<y;w++){r=!1;for(let x=0;x<b.length;x++){const S=b[x],_=this.hierarchical.distributionOrdering[S];for(let C=0;C<_.length;C++)f(1e3,_[C])}if(r!==!0)break}},m=y=>{let b=this.hierarchical.getLevels();b=dc(b).call(b);for(let w=0;w<y&&(r=!1,u(h,b,!0),r===!0);w++);},g=()=>{for(const y in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,y)&&this._centerParent(this.body.nodes[y])},v=()=>{let y=this.hierarchical.getLevels();y=dc(y).call(y);for(let b=0;b<y.length;b++){const w=y[b],x=this.hierarchical.distributionOrdering[w];for(let S=0;S<x.length;S++)this._centerParent(x[S])}};this.options.hierarchical.blockShifting===!0&&(m(5),g()),this.options.hierarchical.edgeMinimization===!0&&p(20),this.options.hierarchical.parentCentralization===!0&&v(),i()}_getSpaceAroundNode(e,r){let n=!0;r===void 0&&(n=!1);const i=this.hierarchical.levels[e.id];if(i!==void 0){const s=this.hierarchical.distributionIndex[e.id],o=this.direction.getPosition(e),a=this.hierarchical.distributionOrdering[i];let l=1e9,c=1e9;if(s!==0){const u=a[s-1];if(n===!0&&r[u.id]===void 0||n===!1){const h=this.direction.getPosition(u);l=o-h}}if(s!=a.length-1){const u=a[s+1];if(n===!0&&r[u.id]===void 0||n===!1){const h=this.direction.getPosition(u);c=Math.min(c,h-o)}}return[l,c]}else return[0,0]}_centerParent(e){if(this.hierarchical.parentReference[e.id]){const r=this.hierarchical.parentReference[e.id];for(let n=0;n<r.length;n++){const i=r[n],s=this.body.nodes[i],o=this.hierarchical.childrenReference[i];if(o!==void 0){const a=this._getCenterPosition(o),l=this.direction.getPosition(s),[c,u]=this._getSpaceAroundNode(s),h=l-a;(h<0&&Math.abs(h)<u-this.options.hierarchical.nodeSpacing||h>0&&Math.abs(h)<c-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(s,a)}}}}_placeNodesByHierarchy(e){this.positionedNodes={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r;let i=Xt(e[n]);i=this._indexArrayToNodes(i),ud(r=this.direction).call(r,i);let s=0;for(let o=0;o<i.length;o++){const a=i[o];if(this.positionedNodes[a.id]===void 0){const l=this.options.hierarchical.nodeSpacing;let c=l*s;s>0&&(c=this.direction.getPosition(i[o-1])+l),this.direction.setPosition(a,c,n),this._validatePositionAndContinue(a,n,c),s++}}}}_placeBranchNodes(e,r){var n;const i=this.hierarchical.childrenReference[e];if(i===void 0)return;const s=[];for(let a=0;a<i.length;a++)s.push(this.body.nodes[i[a]]);ud(n=this.direction).call(n,s);for(let a=0;a<s.length;a++){const l=s[a],c=this.hierarchical.levels[l.id];if(c>r&&this.positionedNodes[l.id]===void 0){const u=this.options.hierarchical.nodeSpacing;let h;a===0?h=this.direction.getPosition(this.body.nodes[e]):h=this.direction.getPosition(s[a-1])+u,this.direction.setPosition(l,h,c),this._validatePositionAndContinue(l,c,h)}else return}const o=this._getCenterPosition(s);this.direction.setPosition(this.body.nodes[e],o,r)}_validatePositionAndContinue(e,r,n){if(this.hierarchical.isTree){if(this.lastNodeOnLevel[r]!==void 0){const i=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[r]]);if(n-i<this.options.hierarchical.nodeSpacing){const s=i+this.options.hierarchical.nodeSpacing-n,o=this._findCommonParent(this.lastNodeOnLevel[r],e.id);this._shiftBlock(o.withChild,s)}}this.lastNodeOnLevel[r]=e.id,this.positionedNodes[e.id]=!0,this._placeBranchNodes(e.id,r)}}_indexArrayToNodes(e){const r=[];for(let n=0;n<e.length;n++)r.push(this.body.nodes[e[n]]);return r}_getDistribution(){const e={};let r,n;for(r in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,r)){n=this.body.nodes[r];const i=this.hierarchical.levels[r]===void 0?0:this.hierarchical.levels[r];this.direction.fix(n,i),e[i]===void 0&&(e[i]={}),e[i][r]=n}return e}_getActiveEdges(e){const r=[];return Ge(e.edges,n=>{var i;ht(i=this.body.edgeIndices).call(i,n.id)!==-1&&r.push(n)}),r}_getHubSizes(){const e={},r=this.body.nodeIndices;Ge(r,i=>{const s=this.body.nodes[i],o=this._getActiveEdges(s).length;e[o]=!0});const n=[];return Ge(e,i=>{n.push(Number(i))}),ud(n).call(n,function(i,s){return s-i}),n}_determineLevelsByHubsize(){const e=(n,i)=>{this.hierarchical.levelDownstream(n,i)},r=this._getHubSizes();for(let n=0;n<r.length;++n){const i=r[n];if(i===0)break;Ge(this.body.nodeIndices,s=>{const o=this.body.nodes[s];i===this._getActiveEdges(o).length&&this._crawlNetwork(e,s)})}}_determineLevelsCustomCallback(){const r=function(i,s,o){},n=(i,s,o)=>{let a=this.hierarchical.levels[i.id];a===void 0&&(a=this.hierarchical.levels[i.id]=1e5);const l=r(Nn.cloneOptions(i,"node"),Nn.cloneOptions(s,"node"),Nn.cloneOptions(o,"edge"));this.hierarchical.levels[s.id]=a+l};this._crawlNetwork(n),this.hierarchical.setMinLevelToZero()}_determineLevelsDirected(){var e;const r=Qae(e=this.body.nodeIndices).call(e,(n,i)=>(n.set(i,this.body.nodes[i]),n),new yD);this.options.hierarchical.shakeTowards==="roots"?this.hierarchical.levels=u4e(r):this.hierarchical.levels=c4e(r),this.hierarchical.setMinLevelToZero()}_generateMap(){const e=(r,n)=>{this.hierarchical.levels[n.id]>this.hierarchical.levels[r.id]&&this.hierarchical.addRelation(r.id,n.id)};this._crawlNetwork(e),this.hierarchical.checkIfTree()}_crawlNetwork(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},r=arguments.length>1?arguments[1]:void 0;const n={},i=(s,o)=>{if(n[s.id]===void 0){this.hierarchical.setTreeIndex(s,o),n[s.id]=!0;let a;const l=this._getActiveEdges(s);for(let c=0;c<l.length;c++){const u=l[c];u.connected===!0&&(u.toId==s.id?a=u.from:a=u.to,s.id!=a.id&&(e(s,a,u),i(a,o)))}}};if(r===void 0){let s=0;for(let o=0;o<this.body.nodeIndices.length;o++){const a=this.body.nodeIndices[o];if(n[a]===void 0){const l=this.body.nodes[a];i(l,s),s+=1}}}else{const s=this.body.nodes[r];if(s===void 0){console.error("Node not found:",r);return}i(s)}}_shiftBlock(e,r){const n={},i=s=>{if(n[s])return;n[s]=!0,this.direction.shift(s,r);const o=this.hierarchical.childrenReference[s];if(o!==void 0)for(let a=0;a<o.length;a++)i(o[a])};i(e)}_findCommonParent(e,r){const n={},i=(o,a)=>{const l=this.hierarchical.parentReference[a];if(l!==void 0)for(let c=0;c<l.length;c++){const u=l[c];o[u]=!0,i(o,u)}},s=(o,a)=>{const l=this.hierarchical.parentReference[a];if(l!==void 0)for(let c=0;c<l.length;c++){const u=l[c];if(o[u]!==void 0)return{foundParent:u,withChild:a};const h=s(o,u);if(h.foundParent!==null)return h}return{foundParent:null,withChild:a}};return i(n,e),s(n,r)}setDirectionStrategy(){this.options.hierarchical.direction==="UD"||this.options.hierarchical.direction==="DU"?this.direction=new e4e(this):this.direction=new t4e(this)}_getCenterPosition(e){let r=1e9,n=-1e9;for(let i=0;i<e.length;i++){let s;if(e[i].id!==void 0)s=e[i];else{const a=e[i];s=this.body.nodes[a]}const o=this.direction.getPosition(s);r=Math.min(r,o),n=Math.max(n,o)}return .5*(r+n)}}class f4e{constructor(e,r,n,i){var s,o;this.body=e,this.canvas=r,this.selectionHandler=n,this.interactionHandler=i,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this._domEventListenerCleanupQueue=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},pr(this.options,this.defaultOptions),this.body.emitter.on("destroy",()=>{this._clean()}),this.body.emitter.on("_dataChanged",se(s=this._restore).call(s,this)),this.body.emitter.on("_resetData",se(o=this._restore).call(o,this))}_restore(){this.inMode!==!1&&(this.options.initiallyActive===!0?this.enableEditMode():this.disableEditMode())}setOptions(e,r,n){r!==void 0&&(r.locale!==void 0?this.options.locale=r.locale:this.options.locale=n.locale,r.locales!==void 0?this.options.locales=r.locales:this.options.locales=n.locales),e!==void 0&&(typeof e=="boolean"?this.options.enabled=e:(this.options.enabled=!0,Et(this.options,e)),this.options.initiallyActive===!0&&(this.editMode=!0),this._setup())}toggleEditMode(){this.editMode===!0?this.disableEditMode():this.enableEditMode()}enableEditMode(){this.editMode=!0,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}disableEditMode(){this.editMode=!1,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}showManipulatorToolbar(){if(this._clean(),this.manipulationDOM={},this.guiEnabled===!0){var e,r;this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";const n=this.selectionHandler.getSelectedNodeCount(),i=this.selectionHandler.getSelectedEdgeCount(),s=n+i,o=this.options.locales[this.options.locale];let a=!1;this.options.addNode!==!1&&(this._createAddNodeButton(o),a=!0),this.options.addEdge!==!1&&(a===!0?this._createSeperator(1):a=!0,this._createAddEdgeButton(o)),n===1&&typeof this.options.editNode=="function"?(a===!0?this._createSeperator(2):a=!0,this._createEditNodeButton(o)):i===1&&n===0&&this.options.editEdge!==!1&&(a===!0?this._createSeperator(3):a=!0,this._createEditEdgeButton(o)),s!==0&&(n>0&&this.options.deleteNode!==!1?(a===!0&&this._createSeperator(4),this._createDeleteButton(o)):n===0&&this.options.deleteEdge!==!1&&(a===!0&&this._createSeperator(4),this._createDeleteButton(o))),this._bindElementEvents(this.closeDiv,se(e=this.toggleEditMode).call(e,this)),this._temporaryBindEvent("select",se(r=this.showManipulatorToolbar).call(r,this))}this.body.emitter.emit("_redraw")}addNodeMode(){var e;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addNode",this.guiEnabled===!0){var r;const n=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(n),this._createSeperator(),this._createDescription(n.addDescription||this.options.locales.en.addDescription),this._bindElementEvents(this.closeDiv,se(r=this.toggleEditMode).call(r,this))}this._temporaryBindEvent("click",se(e=this._performAddNode).call(e,this))}editNode(){this.editMode!==!0&&this.enableEditMode(),this._clean();const e=this.selectionHandler.getSelectedNodes()[0];if(e!==void 0)if(this.inMode="editNode",typeof this.options.editNode=="function")if(e.isCluster!==!0){const r=Et({},e.options,!1);if(r.x=e.x,r.y=e.y,this.options.editNode.length===2)this.options.editNode(r,n=>{n!=null&&this.inMode==="editNode"&&this.body.data.nodes.getDataSet().update(n),this.showManipulatorToolbar()});else throw new Error("The function for edit does not support two arguments (data, callback)")}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError);else throw new Error("No function has been configured to handle the editing of nodes.");else this.showManipulatorToolbar()}addEdgeMode(){var e,r,n,i,s;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addEdge",this.guiEnabled===!0){var o;const a=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(a),this._createSeperator(),this._createDescription(a.edgeDescription||this.options.locales.en.edgeDescription),this._bindElementEvents(this.closeDiv,se(o=this.toggleEditMode).call(o,this))}this._temporaryBindUI("onTouch",se(e=this._handleConnect).call(e,this)),this._temporaryBindUI("onDragEnd",se(r=this._finishConnect).call(r,this)),this._temporaryBindUI("onDrag",se(n=this._dragControlNode).call(n,this)),this._temporaryBindUI("onRelease",se(i=this._finishConnect).call(i,this)),this._temporaryBindUI("onDragStart",se(s=this._dragStartEdge).call(s,this)),this._temporaryBindUI("onHold",()=>{})}editEdgeMode(){if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="editEdge",typeof this.options.editEdge=="object"&&typeof this.options.editEdge.editWithoutDrag=="function"&&(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0)){const o=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(o.from.id,o.to.id);return}if(this.guiEnabled===!0){var e;const o=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(o),this._createSeperator(),this._createDescription(o.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindElementEvents(this.closeDiv,se(e=this.toggleEditMode).call(e,this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0){var r,n,i,s;const o=this.body.edges[this.edgeBeingEditedId],a=this._getNewTargetNode(o.from.x,o.from.y),l=this._getNewTargetNode(o.to.x,o.to.y);this.temporaryIds.nodes.push(a.id),this.temporaryIds.nodes.push(l.id),this.body.nodes[a.id]=a,this.body.nodeIndices.push(a.id),this.body.nodes[l.id]=l,this.body.nodeIndices.push(l.id),this._temporaryBindUI("onTouch",se(r=this._controlNodeTouch).call(r,this)),this._temporaryBindUI("onTap",()=>{}),this._temporaryBindUI("onHold",()=>{}),this._temporaryBindUI("onDragStart",se(n=this._controlNodeDragStart).call(n,this)),this._temporaryBindUI("onDrag",se(i=this._controlNodeDrag).call(i,this)),this._temporaryBindUI("onDragEnd",se(s=this._controlNodeDragEnd).call(s,this)),this._temporaryBindUI("onMouseMove",()=>{}),this._temporaryBindEvent("beforeDrawing",c=>{const u=o.edgeType.findBorderPositions(c);a.selected===!1&&(a.x=u.from.x,a.y=u.from.y),l.selected===!1&&(l.x=u.to.x,l.y=u.to.y)}),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}deleteSelected(){this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="delete";const e=this.selectionHandler.getSelectedNodeIds(),r=this.selectionHandler.getSelectedEdgeIds();let n;if(e.length>0){for(let i=0;i<e.length;i++)if(this.body.nodes[e[i]].isCluster===!0){alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);return}typeof this.options.deleteNode=="function"&&(n=this.options.deleteNode)}else r.length>0&&typeof this.options.deleteEdge=="function"&&(n=this.options.deleteEdge);if(typeof n=="function"){const i={nodes:e,edges:r};if(n.length===2)n(i,s=>{s!=null&&this.inMode==="delete"?(this.body.data.edges.getDataSet().remove(s.edges),this.body.data.nodes.getDataSet().remove(s.nodes),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()):(this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar())});else throw new Error("The function for delete does not support two arguments (data, callback)")}else this.body.data.edges.getDataSet().remove(r),this.body.data.nodes.getDataSet().remove(e),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}_setup(){this.options.enabled===!0?(this.guiEnabled=!0,this._createWrappers(),this.editMode===!1?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}_createWrappers(){if(this.manipulationDiv===void 0&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",this.editMode===!0?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),this.editModeDiv===void 0&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",this.editMode===!0?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),this.closeDiv===void 0){var e,r;this.closeDiv=document.createElement("button"),this.closeDiv.className="vis-close",this.closeDiv.setAttribute("aria-label",(e=(r=this.options.locales[this.options.locale])===null||r===void 0?void 0:r.close)!==null&&e!==void 0?e:this.options.locales.en.close),this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv)}}_getNewTargetNode(e,r){const n=Et({},this.options.controlNodeStyle);n.id="targetNode"+Vf(),n.hidden=!1,n.physics=!1,n.x=e,n.y=r;const i=this.body.functions.createNode(n);return i.shape.boundingBox={left:e,right:e,top:r,bottom:r},i}_createEditButton(){var e;this._clean(),this.manipulationDOM={},oa(this.editModeDiv);const r=this.options.locales[this.options.locale],n=this._createButton("editMode","vis-edit vis-edit-mode",r.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(n),this._bindElementEvents(n,se(e=this.toggleEditMode).call(e,this))}_clean(){this.inMode=!1,this.guiEnabled===!0&&(oa(this.editModeDiv),oa(this.manipulationDiv),this._cleanupDOMEventListeners()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}_cleanupDOMEventListeners(){for(const r of _o(e=this._domEventListenerCleanupQueue).call(e,0)){var e;r()}}_removeManipulationDOM(){this._clean(),oa(this.manipulationDiv),oa(this.editModeDiv),oa(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}_createSeperator(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+e]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+e].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+e])}_createAddNodeButton(e){var r;const n=this._createButton("addNode","vis-add",e.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,se(r=this.addNodeMode).call(r,this))}_createAddEdgeButton(e){var r;const n=this._createButton("addEdge","vis-connect",e.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,se(r=this.addEdgeMode).call(r,this))}_createEditNodeButton(e){var r;const n=this._createButton("editNode","vis-edit",e.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,se(r=this.editNode).call(r,this))}_createEditEdgeButton(e){var r;const n=this._createButton("editEdge","vis-edit",e.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,se(r=this.editEdgeMode).call(r,this))}_createDeleteButton(e){var r;let n;this.options.rtl?n="vis-delete-rtl":n="vis-delete";const i=this._createButton("delete",n,e.del||this.options.locales.en.del);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,se(r=this.deleteSelected).call(r,this))}_createBackButton(e){var r;const n=this._createButton("back","vis-back",e.back||this.options.locales.en.back);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,se(r=this.showManipulatorToolbar).call(r,this))}_createButton(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"vis-label";return this.manipulationDOM[e+"Div"]=document.createElement("button"),this.manipulationDOM[e+"Div"].className="vis-button "+r,this.manipulationDOM[e+"Label"]=document.createElement("div"),this.manipulationDOM[e+"Label"].className=i,this.manipulationDOM[e+"Label"].innerText=n,this.manipulationDOM[e+"Div"].appendChild(this.manipulationDOM[e+"Label"]),this.manipulationDOM[e+"Div"]}_createDescription(e){this.manipulationDOM.descriptionLabel=document.createElement("div"),this.manipulationDOM.descriptionLabel.className="vis-none",this.manipulationDOM.descriptionLabel.innerText=e,this.manipulationDiv.appendChild(this.manipulationDOM.descriptionLabel)}_temporaryBindEvent(e,r){this.temporaryEventFunctions.push({event:e,boundFunction:r}),this.body.emitter.on(e,r)}_temporaryBindUI(e,r){if(this.body.eventListeners[e]!==void 0)this.temporaryUIFunctions[e]=this.body.eventListeners[e],this.body.eventListeners[e]=r;else throw new Error("This UI function does not exist. Typo? You tried: "+e+" possible are: "+Rm(Xt(this.body.eventListeners)))}_unbindTemporaryUIs(){for(const e in this.temporaryUIFunctions)Object.prototype.hasOwnProperty.call(this.temporaryUIFunctions,e)&&(this.body.eventListeners[e]=this.temporaryUIFunctions[e],delete this.temporaryUIFunctions[e]);this.temporaryUIFunctions={}}_unbindTemporaryEvents(){for(let e=0;e<this.temporaryEventFunctions.length;e++){const r=this.temporaryEventFunctions[e].event,n=this.temporaryEventFunctions[e].boundFunction;this.body.emitter.off(r,n)}this.temporaryEventFunctions=[]}_bindElementEvents(e,r){const n=new ld(e,{});e0(n,r),this._domEventListenerCleanupQueue.push(()=>{n.destroy()});const i=s=>{let{keyCode:o,key:a}=s;(a==="Enter"||a===" "||o===13||o===32)&&r()};e.addEventListener("keyup",i,!1),this._domEventListenerCleanupQueue.push(()=>{e.removeEventListener("keyup",i,!1)})}_cleanupTemporaryNodesAndEdges(){for(let s=0;s<this.temporaryIds.edges.length;s++){var e;this.body.edges[this.temporaryIds.edges[s]].disconnect(),delete this.body.edges[this.temporaryIds.edges[s]];const o=ht(e=this.body.edgeIndices).call(e,this.temporaryIds.edges[s]);if(o!==-1){var r;_o(r=this.body.edgeIndices).call(r,o,1)}}for(let s=0;s<this.temporaryIds.nodes.length;s++){var n;delete this.body.nodes[this.temporaryIds.nodes[s]];const o=ht(n=this.body.nodeIndices).call(n,this.temporaryIds.nodes[s]);if(o!==-1){var i;_o(i=this.body.nodeIndices).call(i,o,1)}}this.temporaryIds={nodes:[],edges:[]}}_controlNodeTouch(e){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=pr({},this.body.view.translation)}_controlNodeDragStart(){const e=this.lastTouch,r=this.selectionHandler._pointerToPositionObject(e),n=this.body.nodes[this.temporaryIds.nodes[0]],i=this.body.nodes[this.temporaryIds.nodes[1]],s=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;const o=n.isOverlappingWith(r),a=i.isOverlappingWith(r);o===!0?(this.selectedControlNode=n,s.edgeType.from=n):a===!0&&(this.selectedControlNode=i,s.edgeType.to=i),this.selectedControlNode!==void 0&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}_controlNodeDrag(e){this.body.emitter.emit("disablePhysics");const r=this.body.functions.getPointer(e.center),n=this.canvas.DOMtoCanvas(r);this.selectedControlNode!==void 0?(this.selectedControlNode.x=n.x,this.selectedControlNode.y=n.y):this.interactionHandler.onDrag(e),this.body.emitter.emit("_redraw")}_controlNodeDragEnd(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r),i=this.body.edges[this.edgeBeingEditedId];if(this.selectedControlNode===void 0)return;this.selectionHandler.unselectAll();const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let a=s.length-1;a>=0;a--)if(s[a]!==this.selectedControlNode.id){o=this.body.nodes[s[a]];break}if(o!==void 0&&this.selectedControlNode!==void 0)if(o.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{const a=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===a.id?this._performEditEdge(o.id,i.to.id):this._performEditEdge(i.from.id,o.id)}else i.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}_handleConnect(e){if(new Date().valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=pr({},this.body.view.translation),this.interactionHandler.drag.pointer=this.lastTouch,this.interactionHandler.drag.translation=this.lastTouch.translation;const r=this.lastTouch,n=this.selectionHandler.getNodeAt(r);if(n!==void 0)if(n.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{const i=this._getNewTargetNode(n.x,n.y);this.body.nodes[i.id]=i,this.body.nodeIndices.push(i.id);const s=this.body.functions.createEdge({id:"connectionEdge"+Vf(),from:n.id,to:i.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[s.id]=s,this.body.edgeIndices.push(s.id),this.temporaryIds.nodes.push(i.id),this.temporaryIds.edges.push(s.id)}this.touchTime=new Date().valueOf()}}_dragControlNode(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r);let i;this.temporaryIds.edges[0]!==void 0&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let l=s.length-1;l>=0;l--){var a;if(ht(a=this.temporaryIds.nodes).call(a,s[l])===-1){o=this.body.nodes[s[l]];break}}if(e.controlEdge={from:i,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragging",e,r),this.temporaryIds.nodes[0]!==void 0){const l=this.body.nodes[this.temporaryIds.nodes[0]];l.x=this.canvas._XconvertDOMtoCanvas(r.x),l.y=this.canvas._YconvertDOMtoCanvas(r.y),this.body.emitter.emit("_redraw")}else this.interactionHandler.onDrag(e)}_finishConnect(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r);let i;this.temporaryIds.edges[0]!==void 0&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);const s=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let l=s.length-1;l>=0;l--){var a;if(ht(a=this.temporaryIds.nodes).call(a,s[l])===-1){o=this.body.nodes[s[l]];break}}this._cleanupTemporaryNodesAndEdges(),o!==void 0&&(o.isCluster===!0?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):this.body.nodes[i]!==void 0&&this.body.nodes[o.id]!==void 0&&this._performAddEdge(i,o.id)),e.controlEdge={from:i,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragEnd",e,r),this.body.emitter.emit("_redraw")}_dragStartEdge(e){const r=this.lastTouch;this.selectionHandler.generateClickEvent("dragStart",e,r,void 0,!0)}_performAddNode(e){const r={id:Vf(),x:e.pointer.canvas.x,y:e.pointer.canvas.y,label:"new"};if(typeof this.options.addNode=="function")if(this.options.addNode.length===2)this.options.addNode(r,n=>{n!=null&&this.inMode==="addNode"&&this.body.data.nodes.getDataSet().add(n),this.showManipulatorToolbar()});else throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");else this.body.data.nodes.getDataSet().add(r),this.showManipulatorToolbar()}_performAddEdge(e,r){const n={from:e,to:r};if(typeof this.options.addEdge=="function")if(this.options.addEdge.length===2)this.options.addEdge(n,i=>{i!=null&&this.inMode==="addEdge"&&(this.body.data.edges.getDataSet().add(i),this.selectionHandler.unselectAll(),this.showManipulatorToolbar())});else throw new Error("The function for connect does not support two arguments (data,callback)");else this.body.data.edges.getDataSet().add(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}_performEditEdge(e,r){const n={id:this.edgeBeingEditedId,from:e,to:r,label:this.body.data.edges.get(this.edgeBeingEditedId).label};let i=this.options.editEdge;if(typeof i=="object"&&(i=i.editWithoutDrag),typeof i=="function")if(i.length===2)i(n,s=>{s==null||this.inMode!=="editEdge"?(this.body.edges[n.id].updateEdgeType(),this.body.emitter.emit("_redraw"),this.showManipulatorToolbar()):(this.body.data.edges.getDataSet().update(s),this.selectionHandler.unselectAll(),this.showManipulatorToolbar())});else throw new Error("The function for edit does not support two arguments (data, callback)");else this.body.data.edges.getDataSet().update(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}const le="string",ie="boolean",H="number",vf="array",ke="object",ele="dom",p4e="any",Oj=["arrow","bar","box","circle","crow","curve","diamond","image","inv_curve","inv_triangle","triangle","vee"],jj={borderWidth:{number:H},borderWidthSelected:{number:H,undefined:"undefined"},brokenImage:{string:le,undefined:"undefined"},chosen:{label:{boolean:ie,function:"function"},node:{boolean:ie,function:"function"},__type__:{object:ke,boolean:ie}},color:{border:{string:le},background:{string:le},highlight:{border:{string:le},background:{string:le},__type__:{object:ke,string:le}},hover:{border:{string:le},background:{string:le},__type__:{object:ke,string:le}},__type__:{object:ke,string:le}},opacity:{number:H,undefined:"undefined"},fixed:{x:{boolean:ie},y:{boolean:ie},__type__:{object:ke,boolean:ie}},font:{align:{string:le},color:{string:le},size:{number:H},face:{string:le},background:{string:le},strokeWidth:{number:H},strokeColor:{string:le},vadjust:{number:H},multi:{boolean:ie,string:le},bold:{color:{string:le},size:{number:H},face:{string:le},mod:{string:le},vadjust:{number:H},__type__:{object:ke,string:le}},boldital:{color:{string:le},size:{number:H},face:{string:le},mod:{string:le},vadjust:{number:H},__type__:{object:ke,string:le}},ital:{color:{string:le},size:{number:H},face:{string:le},mod:{string:le},vadjust:{number:H},__type__:{object:ke,string:le}},mono:{color:{string:le},size:{number:H},face:{string:le},mod:{string:le},vadjust:{number:H},__type__:{object:ke,string:le}},__type__:{object:ke,string:le}},group:{string:le,number:H,undefined:"undefined"},heightConstraint:{minimum:{number:H},valign:{string:le},__type__:{object:ke,boolean:ie,number:H}},hidden:{boolean:ie},icon:{face:{string:le},code:{string:le},size:{number:H},color:{string:le},weight:{string:le,number:H},__type__:{object:ke}},id:{string:le,number:H},image:{selected:{string:le,undefined:"undefined"},unselected:{string:le,undefined:"undefined"},__type__:{object:ke,string:le}},imagePadding:{top:{number:H},right:{number:H},bottom:{number:H},left:{number:H},__type__:{object:ke,number:H}},label:{string:le,undefined:"undefined"},labelHighlightBold:{boolean:ie},level:{number:H,undefined:"undefined"},margin:{top:{number:H},right:{number:H},bottom:{number:H},left:{number:H},__type__:{object:ke,number:H}},mass:{number:H},physics:{boolean:ie},scaling:{min:{number:H},max:{number:H},label:{enabled:{boolean:ie},min:{number:H},max:{number:H},maxVisible:{number:H},drawThreshold:{number:H},__type__:{object:ke,boolean:ie}},customScalingFunction:{function:"function"},__type__:{object:ke}},shadow:{enabled:{boolean:ie},color:{string:le},size:{number:H},x:{number:H},y:{number:H},__type__:{object:ke,boolean:ie}},shape:{string:["custom","ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},ctxRenderer:{function:"function"},shapeProperties:{borderDashes:{boolean:ie,array:vf},borderRadius:{number:H},interpolation:{boolean:ie},useImageSize:{boolean:ie},useBorderWithImage:{boolean:ie},coordinateOrigin:{string:["center","top-left"]},__type__:{object:ke}},size:{number:H},title:{string:le,dom:ele,undefined:"undefined"},value:{number:H,undefined:"undefined"},widthConstraint:{minimum:{number:H},maximum:{number:H},__type__:{object:ke,boolean:ie,number:H}},x:{number:H},y:{number:H},__type__:{object:ke}},m4e={configure:{enabled:{boolean:ie},filter:{boolean:ie,string:le,array:vf,function:"function"},container:{dom:ele},showButton:{boolean:ie},__type__:{object:ke,boolean:ie,string:le,array:vf,function:"function"}},edges:{arrows:{to:{enabled:{boolean:ie},scaleFactor:{number:H},type:{string:Oj},imageHeight:{number:H},imageWidth:{number:H},src:{string:le},__type__:{object:ke,boolean:ie}},middle:{enabled:{boolean:ie},scaleFactor:{number:H},type:{string:Oj},imageWidth:{number:H},imageHeight:{number:H},src:{string:le},__type__:{object:ke,boolean:ie}},from:{enabled:{boolean:ie},scaleFactor:{number:H},type:{string:Oj},imageWidth:{number:H},imageHeight:{number:H},src:{string:le},__type__:{object:ke,boolean:ie}},__type__:{string:["from","to","middle"],object:ke}},endPointOffset:{from:{number:H},to:{number:H},__type__:{object:ke,number:H}},arrowStrikethrough:{boolean:ie},background:{enabled:{boolean:ie},color:{string:le},size:{number:H},dashes:{boolean:ie,array:vf},__type__:{object:ke,boolean:ie}},chosen:{label:{boolean:ie,function:"function"},edge:{boolean:ie,function:"function"},__type__:{object:ke,boolean:ie}},color:{color:{string:le},highlight:{string:le},hover:{string:le},inherit:{string:["from","to","both"],boolean:ie},opacity:{number:H},__type__:{object:ke,string:le}},dashes:{boolean:ie,array:vf},font:{color:{string:le},size:{number:H},face:{string:le},background:{string:le},strokeWidth:{number:H},strokeColor:{string:le},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:H},multi:{boolean:ie,string:le},bold:{color:{string:le},size:{number:H},face:{string:le},mod:{string:le},vadjust:{number:H},__type__:{object:ke,string:le}},boldital:{color:{string:le},size:{number:H},face:{string:le},mod:{string:le},vadjust:{number:H},__type__:{object:ke,string:le}},ital:{color:{string:le},size:{number:H},face:{string:le},mod:{string:le},vadjust:{number:H},__type__:{object:ke,string:le}},mono:{color:{string:le},size:{number:H},face:{string:le},mod:{string:le},vadjust:{number:H},__type__:{object:ke,string:le}},__type__:{object:ke,string:le}},hidden:{boolean:ie},hoverWidth:{function:"function",number:H},label:{string:le,undefined:"undefined"},labelHighlightBold:{boolean:ie},length:{number:H,undefined:"undefined"},physics:{boolean:ie},scaling:{min:{number:H},max:{number:H},label:{enabled:{boolean:ie},min:{number:H},max:{number:H},maxVisible:{number:H},drawThreshold:{number:H},__type__:{object:ke,boolean:ie}},customScalingFunction:{function:"function"},__type__:{object:ke}},selectionWidth:{function:"function",number:H},selfReferenceSize:{number:H},selfReference:{size:{number:H},angle:{number:H},renderBehindTheNode:{boolean:ie},__type__:{object:ke}},shadow:{enabled:{boolean:ie},color:{string:le},size:{number:H},x:{number:H},y:{number:H},__type__:{object:ke,boolean:ie}},smooth:{enabled:{boolean:ie},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:H},forceDirection:{string:["horizontal","vertical","none"],boolean:ie},__type__:{object:ke,boolean:ie}},title:{string:le,undefined:"undefined"},width:{number:H},widthConstraint:{maximum:{number:H},__type__:{object:ke,boolean:ie,number:H}},value:{number:H,undefined:"undefined"},__type__:{object:ke}},groups:{useDefaultGroups:{boolean:ie},__any__:jj,__type__:{object:ke}},interaction:{dragNodes:{boolean:ie},dragView:{boolean:ie},hideEdgesOnDrag:{boolean:ie},hideEdgesOnZoom:{boolean:ie},hideNodesOnDrag:{boolean:ie},hover:{boolean:ie},keyboard:{enabled:{boolean:ie},speed:{x:{number:H},y:{number:H},zoom:{number:H},__type__:{object:ke}},bindToWindow:{boolean:ie},autoFocus:{boolean:ie},__type__:{object:ke,boolean:ie}},multiselect:{boolean:ie},navigationButtons:{boolean:ie},selectable:{boolean:ie},selectConnectedEdges:{boolean:ie},hoverConnectedEdges:{boolean:ie},tooltipDelay:{number:H},zoomView:{boolean:ie},zoomSpeed:{number:H},__type__:{object:ke}},layout:{randomSeed:{undefined:"undefined",number:H,string:le},improvedLayout:{boolean:ie},clusterThreshold:{number:H},hierarchical:{enabled:{boolean:ie},levelSeparation:{number:H},nodeSpacing:{number:H},treeSpacing:{number:H},blockShifting:{boolean:ie},edgeMinimization:{boolean:ie},parentCentralization:{boolean:ie},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:ke,boolean:ie}},__type__:{object:ke}},manipulation:{enabled:{boolean:ie},initiallyActive:{boolean:ie},addNode:{boolean:ie,function:"function"},addEdge:{boolean:ie,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:ke,boolean:ie,function:"function"}},deleteNode:{boolean:ie,function:"function"},deleteEdge:{boolean:ie,function:"function"},controlNodeStyle:jj,__type__:{object:ke,boolean:ie}},nodes:jj,physics:{enabled:{boolean:ie},barnesHut:{theta:{number:H},gravitationalConstant:{number:H},centralGravity:{number:H},springLength:{number:H},springConstant:{number:H},damping:{number:H},avoidOverlap:{number:H},__type__:{object:ke}},forceAtlas2Based:{theta:{number:H},gravitationalConstant:{number:H},centralGravity:{number:H},springLength:{number:H},springConstant:{number:H},damping:{number:H},avoidOverlap:{number:H},__type__:{object:ke}},repulsion:{centralGravity:{number:H},springLength:{number:H},springConstant:{number:H},nodeDistance:{number:H},damping:{number:H},__type__:{object:ke}},hierarchicalRepulsion:{centralGravity:{number:H},springLength:{number:H},springConstant:{number:H},nodeDistance:{number:H},damping:{number:H},avoidOverlap:{number:H},__type__:{object:ke}},maxVelocity:{number:H},minVelocity:{number:H},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:ie},iterations:{number:H},updateInterval:{number:H},onlyDynamicEdges:{boolean:ie},fit:{boolean:ie},__type__:{object:ke,boolean:ie}},timestep:{number:H},adaptiveTimestep:{boolean:ie},wind:{x:{number:H},y:{number:H},__type__:{object:ke}},__type__:{object:ke,boolean:ie}},autoResize:{boolean:ie},clickToUse:{boolean:ie},locale:{string:le},locales:{__any__:{any:p4e},__type__:{object:ke}},height:{string:le},width:{string:le},__type__:{object:ke}},tle={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},opacity:[0,0,1,.1],fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},endPointOffset:{from:[0,-10,10,1],to:[0,-10,10,1]},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0,autoFocus:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},g4e=(t,e,r)=>{var n;return!!(Ka(t).call(t,"physics")&&Ka(n=tle.physics.solver).call(n,e)&&r.physics.solver!==e&&e!=="wind")};class y4e{constructor(){}getDistances(e,r,n){const i={},s=e.edges;for(let a=0;a<r.length;a++){const l=r[a],c={};i[l]=c;for(let u=0;u<r.length;u++)c[r[u]]=a==u?0:1e9}for(let a=0;a<n.length;a++){const l=s[n[a]];l.connected===!0&&i[l.fromId]!==void 0&&i[l.toId]!==void 0&&(i[l.fromId][l.toId]=1,i[l.toId][l.fromId]=1)}const o=r.length;for(let a=0;a<o;a++){const l=r[a],c=i[l];for(let u=0;u<o-1;u++){const h=r[u],f=i[h];for(let p=u+1;p<o;p++){const m=r[p],g=i[m],v=Math.min(f[m],f[l]+c[m]);f[m]=v,g[h]=v}}}return i}}class v4e{constructor(e,r,n){this.body=e,this.springLength=r,this.springConstant=n,this.distanceSolver=new y4e}setOptions(e){e&&(e.springLength&&(this.springLength=e.springLength),e.springConstant&&(this.springConstant=e.springConstant))}solve(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=this.distanceSolver.getDistances(this.body,e,r);this._createL_matrix(i),this._createK_matrix(i),this._createE_matrix();const s=.01,o=1;let a=0;const l=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),c=5;let u=1e9,h=0,f=0,p=0,m=0,g=0;for(;u>s&&a<l;)for(a+=1,[h,u,f,p]=this._getHighestEnergyNode(n),m=u,g=0;m>o&&g<c;)g+=1,this._moveNode(h,f,p),[m,f,p]=this._getEnergy(h)}_getHighestEnergyNode(e){const r=this.body.nodeIndices,n=this.body.nodes;let i=0,s=r[0],o=0,a=0;for(let l=0;l<r.length;l++){const c=r[l];if(n[c].predefinedPosition!==!0||n[c].isCluster===!0&&e===!0||n[c].options.fixed.x!==!0||n[c].options.fixed.y!==!0){const[u,h,f]=this._getEnergy(c);i<u&&(i=u,s=c,o=h,a=f)}}return[s,i,o,a]}_getEnergy(e){const[r,n]=this.E_sums[e];return[Math.sqrt(r**2+n**2),r,n]}_moveNode(e,r,n){const i=this.body.nodeIndices,s=this.body.nodes;let o=0,a=0,l=0;const c=s[e].x,u=s[e].y,h=this.K_matrix[e],f=this.L_matrix[e];for(let x=0;x<i.length;x++){const S=i[x];if(S!==e){const _=s[S].x,C=s[S].y,E=h[S],N=f[S],T=1/((c-_)**2+(u-C)**2)**1.5;o+=E*(1-N*(u-C)**2*T),a+=E*(N*(c-_)*(u-C)*T),l+=E*(1-N*(c-_)**2*T)}}const p=o,m=a,g=r,v=l,y=n,b=(g/p+y/m)/(m/p-v/m),w=-(m*b+g)/p;s[e].x+=w,s[e].y+=b,this._updateE_matrix(e)}_createL_matrix(e){const r=this.body.nodeIndices,n=this.springLength;this.L_matrix=[];for(let i=0;i<r.length;i++){this.L_matrix[r[i]]={};for(let s=0;s<r.length;s++)this.L_matrix[r[i]][r[s]]=n*e[r[i]][r[s]]}}_createK_matrix(e){const r=this.body.nodeIndices,n=this.springConstant;this.K_matrix=[];for(let i=0;i<r.length;i++){this.K_matrix[r[i]]={};for(let s=0;s<r.length;s++)this.K_matrix[r[i]][r[s]]=n*e[r[i]][r[s]]**-2}}_createE_matrix(){const e=this.body.nodeIndices,r=this.body.nodes;this.E_matrix={},this.E_sums={};for(let n=0;n<e.length;n++)this.E_matrix[e[n]]=[];for(let n=0;n<e.length;n++){const i=e[n],s=r[i].x,o=r[i].y;let a=0,l=0;for(let c=n;c<e.length;c++){const u=e[c];if(u!==i){const h=r[u].x,f=r[u].y,p=1/Math.sqrt((s-h)**2+(o-f)**2);this.E_matrix[i][c]=[this.K_matrix[i][u]*(s-h-this.L_matrix[i][u]*(s-h)*p),this.K_matrix[i][u]*(o-f-this.L_matrix[i][u]*(o-f)*p)],this.E_matrix[u][n]=this.E_matrix[i][c],a+=this.E_matrix[i][c][0],l+=this.E_matrix[i][c][1]}}this.E_sums[i]=[a,l]}}_updateE_matrix(e){const r=this.body.nodeIndices,n=this.body.nodes,i=this.E_matrix[e],s=this.K_matrix[e],o=this.L_matrix[e],a=n[e].x,l=n[e].y;let c=0,u=0;for(let h=0;h<r.length;h++){const f=r[h];if(f!==e){const p=i[h],m=p[0],g=p[1],v=n[f].x,y=n[f].y,b=1/Math.sqrt((a-v)**2+(l-y)**2),w=s[f]*(a-v-o[f]*(a-v)*b),x=s[f]*(l-y-o[f]*(l-y)*b);i[h]=[w,x],c+=w,u+=x;const S=this.E_sums[f];S[0]+=w-m,S[1]+=x-g}}this.E_sums[e]=[c,u]}}function _e(t,e,r){var n,i,s,o;if(!(this instanceof _e))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:zMe,clickToUse:!1},pr(this.options,this.defaultOptions),this.body={container:t,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:se(n=this.on).call(n,this),off:se(i=this.off).call(i,this),emit:se(s=this.emit).call(s,this),once:se(o=this.once).call(o,this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}},selectionBox:{show:!1,position:{start:{x:0,y:0},end:{x:0,y:0}}}},this.bindEventListeners(),this.images=new HMe(()=>this.body.emitter.emit("_requestRedraw")),this.groups=new oAe,this.canvas=new eFe(this.body),this.selectionHandler=new AFe(this.body,this.canvas),this.interactionHandler=new iFe(this.body,this.canvas,this.selectionHandler),this.view=new rFe(this.body,this.canvas),this.renderer=new Y$e(this.body,this.canvas),this.physics=new B$e(this.body),this.layoutEngine=new h4e(this.body),this.clustering=new G$e(this.body),this.manipulation=new f4e(this.body,this.canvas,this.selectionHandler,this.interactionHandler),this.nodesHandler=new m$e(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new A$e(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new v4e(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(r),this.setData(e)}Poe(_e.prototype);_e.prototype.setOptions=function(t){if(t===null&&(t=void 0),t!==void 0){if(bMe.validate(t,m4e)===!0&&console.error("%cErrors have been found in the supplied options object.",Nae),Dh(["locale","locales","clickToUse"],this.options,t),t.locale!==void 0&&(t.locale=VMe(t.locales||this.options.locales,t.locale)),t=this.layoutEngine.setOptions(t.layout,t),this.canvas.setOptions(t),this.groups.setOptions(t.groups),this.nodesHandler.setOptions(t.nodes),this.edgesHandler.setOptions(t.edges),this.physics.setOptions(t.physics),this.manipulation.setOptions(t.manipulation,t,this.options),this.interactionHandler.setOptions(t.interaction),this.renderer.setOptions(t.interaction),this.selectionHandler.setOptions(t.interaction),t.groups!==void 0&&this.body.emitter.emit("refreshNodes"),"configure"in t&&(this.configurator||(this.configurator=new yMe(this,this.body.container,tle,this.canvas.pixelRatio,g4e)),this.configurator.setOptions(t.configure)),this.configurator&&this.configurator.options.enabled===!0){const n={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};Et(n.nodes,this.nodesHandler.options),Et(n.edges,this.edgesHandler.options),Et(n.layout,this.layoutEngine.options),Et(n.interaction,this.selectionHandler.options),Et(n.interaction,this.renderer.options),Et(n.interaction,this.interactionHandler.options),Et(n.manipulation,this.manipulation.options),Et(n.physics,this.physics.options),Et(n.global,this.canvas.options),Et(n.global,this.options),this.configurator.setModuleOptions(n)}t.clickToUse!==void 0?t.clickToUse===!0?this.activator===void 0&&(this.activator=new gMe(this.canvas.frame),this.activator.on("change",()=>{this.body.emitter.emit("activate")})):(this.activator!==void 0&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}};_e.prototype._updateVisibleIndices=function(){const t=this.body.nodes,e=this.body.edges;this.body.nodeIndices=[],this.body.edgeIndices=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&!this.clustering._isClusteredNode(r)&&t[r].options.hidden===!1&&this.body.nodeIndices.push(t[r].id);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const n=e[r],i=t[n.fromId],s=t[n.toId],o=i!==void 0&&s!==void 0;!this.clustering._isClusteredEdge(r)&&n.options.hidden===!1&&o&&i.options.hidden===!1&&s.options.hidden===!1&&this.body.edgeIndices.push(n.id)}};_e.prototype.bindEventListeners=function(){this.body.emitter.on("_dataChanged",()=>{this.edgesHandler._updateState(),this.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",()=>{this.clustering._updateState(),this._updateVisibleIndices(),this._updateValueRange(this.body.nodes),this._updateValueRange(this.body.edges),this.body.emitter.emit("startSimulation"),this.body.emitter.emit("_requestRedraw")})};_e.prototype.setData=function(t){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),t&&t.dot&&(t.nodes||t.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(t&&t.options),t&&t.dot){console.warn("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");const e=OMe(t.dot);this.setData(e);return}else if(t&&t.gephi){console.warn("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");const e=jMe(t.gephi);this.setData(e);return}else this.nodesHandler.setData(t&&t.nodes,!0),this.edgesHandler.setData(t&&t.edges,!0);this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")};_e.prototype.destroy=function(){this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images;for(const t in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,t)&&delete this.body.nodes[t];for(const t in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,t)&&delete this.body.edges[t];oa(this.body.container)};_e.prototype._updateValueRange=function(t){let e,r,n,i=0;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const s=t[e].getValue();s!==void 0&&(r=r===void 0?s:Math.min(s,r),n=n===void 0?s:Math.max(s,n),i+=s)}if(r!==void 0&&n!==void 0)for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&t[e].setValueRange(r,n,i)};_e.prototype.isActive=function(){return!this.activator||this.activator.active};_e.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)};_e.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)};_e.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)};_e.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)};_e.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)};_e.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)};_e.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)};_e.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)};_e.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)};_e.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)};_e.prototype.updateClusteredNode=function(){return this.clustering.updateClusteredNode.apply(this.clustering,arguments)};_e.prototype.getClusteredEdges=function(){return this.clustering.getClusteredEdges.apply(this.clustering,arguments)};_e.prototype.getBaseEdge=function(){return this.clustering.getBaseEdge.apply(this.clustering,arguments)};_e.prototype.getBaseEdges=function(){return this.clustering.getBaseEdges.apply(this.clustering,arguments)};_e.prototype.updateEdge=function(){return this.clustering.updateEdge.apply(this.clustering,arguments)};_e.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)};_e.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)};_e.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)};_e.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)};_e.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)};_e.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)};_e.prototype.editNodeMode=function(){return console.warn("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)};_e.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)};_e.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)};_e.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)};_e.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)};_e.prototype.getPosition=function(){return this.nodesHandler.getPosition.apply(this.nodesHandler,arguments)};_e.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)};_e.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)};_e.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)};_e.prototype.getConnectedNodes=function(t){return this.body.nodes[t]!==void 0?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)};_e.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)};_e.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)};_e.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)};_e.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)};_e.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)};_e.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)};_e.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodeIds.apply(this.selectionHandler,arguments)};_e.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdgeIds.apply(this.selectionHandler,arguments)};_e.prototype.getNodeAt=function(){const t=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return t!==void 0&&t.id!==void 0?t.id:t};_e.prototype.getEdgeAt=function(){const t=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return t!==void 0&&t.id!==void 0?t.id:t};_e.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)};_e.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)};_e.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.selectionHandler.commitWithoutEmitting.apply(this.selectionHandler),this.redraw()};_e.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)};_e.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)};_e.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)};_e.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)};_e.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)};_e.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)};_e.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)};_e.prototype.getOptionsFromConfigurator=function(){let t={};return this.configurator&&(t=this.configurator.getOptions.apply(this.configurator)),t};function b4e({graphData:t,startPersonId:e,onNodeClick:r}){const n=k.useRef(null),i=k.useRef(null),s=ms(),o=k.useCallback(u=>{r?r(u):s(`/people/${u}`)},[r,s]);k.useEffect(()=>{if(!n.current||!t||!t.nodes||t.nodes.length===0)return;const u=new Yd(t.nodes),h=new Yd(t.edges),f={layout:{hierarchical:{enabled:!0,direction:"UD",sortMethod:"directed",levelSeparation:180,nodeSpacing:200,treeSpacing:250,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0}},nodes:{shape:"box",margin:10,font:{size:14,face:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',color:"#1f2937"},color:{border:"#d1d5db",background:"#ffffff",highlight:{border:"#f59e0b",background:"#fef3c7"},hover:{border:"#9ca3af",background:"#f9fafb"}},borderWidth:2,borderWidthSelected:3,shadow:{enabled:!0,color:"rgba(0,0,0,0.1)",size:5,x:0,y:2}},edges:{color:{color:"#9ca3af",highlight:"#6b7280",hover:"#6b7280"},width:2,smooth:{enabled:!0,type:"cubicBezier",forceDirection:"vertical",roundness:.4},arrows:{to:{enabled:!1}}},physics:{enabled:!1},interaction:{hover:!0,tooltipDelay:200,zoomView:!0,dragView:!0,dragNodes:!1,navigationButtons:!1,keyboard:{enabled:!0,bindToWindow:!1}}},p=new _e(n.current,{nodes:u,edges:h},f);return i.current=p,p.on("click",m=>{if(m.nodes.length>0){const g=m.nodes[0];o(g)}}),p.on("doubleClick",m=>{m.nodes.length>0&&p.focus(m.nodes[0],{scale:1,animation:{duration:500,easingFunction:"easeInOutQuad"}})}),p.once("stabilized",()=>{const m=t.edges.filter(g=>g.dashes).map(g=>[g.from,g.to]);if(m.length>0){const g=p.getPositions(),v={},y=new Set;m.forEach(([b,w])=>{if(y.has(b)||y.has(w))return;const x=g[b],S=g[w];if(!x||!S)return;const _=(x.x+S.x)/2;v[b]={x:_-60,y:x.y},v[w]={x:_+60,y:S.y},y.add(b),y.add(w)}),Object.entries(v).forEach(([b,w])=>{p.moveNode(b,w.x,w.y)})}setTimeout(()=>{p.fit({animation:{duration:500,easingFunction:"easeInOutQuad"}})},50)}),setTimeout(()=>{e&&p&&p.focus(e,{scale:.8,animation:{duration:500,easingFunction:"easeInOutQuad"}})},100),()=>{p&&p.destroy()}},[t,e,o]);const a=()=>{if(i.current){const u=i.current.getScale();i.current.moveTo({scale:u*1.3,animation:{duration:300,easingFunction:"easeInOutQuad"}})}},l=()=>{if(i.current){const u=i.current.getScale();i.current.moveTo({scale:u/1.3,animation:{duration:300,easingFunction:"easeInOutQuad"}})}},c=()=>{i.current&&i.current.fit({animation:{duration:500,easingFunction:"easeInOutQuad"}})};return!t||!t.nodes||t.nodes.length===0?d.jsx("div",{className:"flex items-center justify-center h-96",children:d.jsx("p",{className:"text-gray-500",children:"No family tree data available"})}):d.jsxs("div",{className:"relative w-full h-full",children:[d.jsxs("div",{className:"absolute top-4 right-4 z-10 flex gap-2 bg-white rounded-lg shadow-lg p-2",children:[d.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded",title:"Zoom In",children:d.jsx(Upe,{className:"w-4 h-4"})}),d.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 rounded",title:"Zoom Out",children:d.jsx(Hpe,{className:"w-4 h-4"})}),d.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 rounded",title:"Fit All",children:d.jsx(Mte,{className:"w-4 h-4"})})]}),d.jsx("div",{className:"absolute bottom-4 left-4 z-10 text-xs text-gray-500 bg-white/80 px-2 py-1 rounded",children:"Click a person to view details  Double-click to center  Scroll to zoom"}),d.jsx("div",{ref:n,className:"w-full h-full min-h-[600px]",style:{background:"#fafafa"}})]})}const x4e=["parent","child","spouse","lover","partner"];function w4e(t){return x4e.includes(t==null?void 0:t.toLowerCase())}function S4e(t){return(t==null?void 0:t.toLowerCase())==="parent"}function _4e(t){return(t==null?void 0:t.toLowerCase())==="child"}function E4e(t){const e=t==null?void 0:t.toLowerCase();return e==="spouse"||e==="lover"||e==="partner"}function C4e(t,e,r){var u;const n=new Map,i=[],s=new Set,o=new Map;e.forEach(h=>o.set(h.id,h));const a=[{personId:t,depth:0}];s.add(t);function l(h,f){var b,w,x,S;let p=h.name||((b=h.title)==null?void 0:b.rendered)||h.title||`Person ${f}`;if(p&&typeof p=="string"&&typeof document<"u"){const _=document.createElement("textarea");_.innerHTML=p,p=_.value}let m=null,g=((w=h.acf)==null?void 0:w.birth_date)||null;if(g){const _=new Date(g);isNaN(_.getTime())||(m=Math.floor((new Date-_)/(365.25*24*60*60*1e3)))}let v="";switch((x=h.acf)==null?void 0:x.gender){case"male":v="";break;case"female":v="";break;case"non_binary":case"other":case"prefer_not_to_say":v="";break}let y="";if(g)try{const _=new Date(g);if(!isNaN(_.getTime())){const C=String(_.getDate()).padStart(2,"0"),E=String(_.getMonth()+1).padStart(2,"0"),N=_.getFullYear();y=`${C}-${E}-${N}`}}catch{}return{id:f,name:p,gender:((S=h.acf)==null?void 0:S.gender)||"",genderSymbol:v,photo:h.thumbnail||null,age:m,birthDate:g,formattedBirthDate:y}}const c=o.get(t);for(c&&n.set(t,l(c,t));a.length>0;){const{personId:h,depth:f}=a.shift(),p=r.get(h)||[];for(const m of p){if(m.relationship_type_slug&&!w4e(m.relationship_type_slug))continue;const g=m.related_person;if(!g||!o.has(g))continue;if(!n.has(g)){const w=o.get(g);n.set(g,l(w,g))}const v=`${h}-${g}`,y=`${g}-${h}`;if(!i.some(w=>`${w.from}-${w.to}`===v||`${w.from}-${w.to}`===y)){const w=(u=m.relationship_type_slug)==null?void 0:u.toLowerCase();if(S4e(w))i.push({from:g,to:h,type:"parent-child"});else if(_4e(w))i.push({from:h,to:g,type:"parent-child"});else if(E4e(w)){const[x,S]=h<g?[h,g]:[g,h];i.push({from:x,to:S,type:"spouse"})}}s.has(g)||(s.add(g),a.push({personId:g,depth:f+1}))}}return{nodes:Array.from(n.values()),edges:i}}function N4e(t,e,r={}){const{nodes:n,edges:i}=t;if(n.length===0)return{nodes:[],edges:[]};const s=new Map,o=new Map,a=new Map;n.forEach(v=>{s.set(v.id,[]),o.set(v.id,[]),a.set(v.id,[])}),i.forEach(v=>{var y,b,w,x;v.type==="parent-child"?((y=s.get(v.to))==null||y.push(v.from),(b=o.get(v.from))==null||b.push(v.to)):v.type==="spouse"&&((w=a.get(v.from))==null||w.push(v.to),(x=a.get(v.to))==null||x.push(v.from))});const l=new Map,c=new Set,u=[{id:e,generation:0}];for(l.set(e,0),c.add(e);u.length>0;){const{id:v,generation:y}=u.shift(),b=s.get(v)||[];for(const S of b)c.has(S)||(c.add(S),l.set(S,y-1),u.push({id:S,generation:y-1}));const w=o.get(v)||[];for(const S of w)c.has(S)||(c.add(S),l.set(S,y+1),u.push({id:S,generation:y+1}));const x=a.get(v)||[];for(const S of x)c.has(S)||(c.add(S),l.set(S,y),u.push({id:S,generation:y}))}n.forEach(v=>{l.has(v.id)||l.set(v.id,0)});const h=Math.min(...l.values()),f=new Map;l.forEach((v,y)=>{f.set(y,v-h)});function p(v,y,b=!1){const w=v?v.split(" ").map(C=>C[0]).join("").toUpperCase().slice(0,2):"?";let x,S;b?(x="%23d1d5db",S="%236b7280"):y?(x="%23fef3c7",S="%23b45309"):(x="%23e5e7eb",S="%23374151");const _=`<svg xmlns="http://www.w3.org/2000/svg" width="90" height="90" viewBox="0 0 90 90">
      <circle cx="45" cy="45" r="45" fill="${x}"/>
      <text x="45" y="55" text-anchor="middle" font-family="system-ui, sans-serif" font-size="28" font-weight="500" fill="${S}">${w}</text>
    </svg>`;return"data:image/svg+xml,"+encodeURIComponent(_)}const m=n.map(v=>{const y=f.get(v.id)||0,b=v.id===e,w=r[v.id]||!1;let x=v.name;w&&(x=v.name+" ");let S=[x],_="";v.genderSymbol&&(_+=v.genderSymbol+" "),v.age!==null&&(_+=v.age+" "),v.formattedBirthDate&&(_+=v.formattedBirthDate),_.trim()&&S.push(_.trim());const C=v.photo||p(v.name,b,w);let E="#d1d5db";return b?E="#f59e0b":w&&(E="#9ca3af"),{id:v.id,label:S.join(`
`),level:y,shape:"circularImage",image:C,size:45,font:{size:14,face:"system-ui, -apple-system, sans-serif",vadjust:8,color:w?"#6b7280":"#1f2937"},color:{border:E,background:"#ffffff",highlight:{border:"#f59e0b",background:"#fef3c7"}},borderWidth:b?3:2,data:{...v,isDeceased:w}}}),g=i.map((v,y)=>{const b=v.type==="spouse";return{id:`edge-${y}`,from:v.from,to:v.to,arrows:{to:{enabled:!1}},color:{color:b?"#ec4899":"#9ca3af",highlight:b?"#db2777":"#6b7280"},width:2,dashes:b?[5,5]:!1,smooth:!1,length:b?50:300}});return{nodes:m,edges:g}}function k4e(t){const e=new Map;return t.forEach(r=>{var s;const i=(((s=r.acf)==null?void 0:s.relationships)||[]).map(o=>{var c,u,h,f,p,m;let a="";o.relationship_slug?a=o.relationship_slug.toLowerCase():typeof o.relationship_type=="object"?a=((c=o.relationship_type)==null?void 0:c.slug)||((h=(u=o.relationship_type)==null?void 0:u.name)==null?void 0:h.toLowerCase())||"":typeof o.relationship_type=="string"&&(a=o.relationship_type.toLowerCase());let l=null;return typeof o.related_person=="object"?l=((f=o.related_person)==null?void 0:f.ID)||((p=o.related_person)==null?void 0:p.id)||((m=o.related_person)==null?void 0:m.term_id):(typeof o.related_person=="number"||typeof o.related_person=="string")&&(l=parseInt(o.related_person,10)),{related_person:l,relationship_type:o.relationship_type,relationship_type_slug:a,relationship_name:o.relationship_name||"",relationship_label:o.relationship_label||""}}).filter(o=>o.related_person);e.set(r.id,i)}),e}function T4e(t,e){const r=new Map;e.forEach(n=>{var i;r.set(n.id,n.slug||((i=n.name)==null?void 0:i.toLowerCase()))}),t.forEach(n=>{n.forEach(i=>{if(!i.relationship_type_slug&&i.relationship_type){const s=typeof i.relationship_type=="object"?i.relationship_type.term_id||i.relationship_type.id:i.relationship_type;i.relationship_type_slug=r.get(s)||""}})})}function O4e(){var p,m;const{id:t}=nM(),e=ms(),r=parseInt(t,10),{data:n,isLoading:i}=Hte(t),{data:s=[],isLoading:o}=Uc(),{data:a=[]}=lt({queryKey:["relationship-types"],queryFn:async()=>(await qe.getRelationshipTypes()).data}),l=k.useMemo(()=>s.map(g=>g.id).filter(Boolean),[s]),c=QP({queries:l.map(g=>({queryKey:["person-dates",g],queryFn:async()=>(await Ae.getPersonDates(g)).data,enabled:!!g,staleTime:5*60*1e3}))}),u=k.useMemo(()=>{const g={};return c.forEach((v,y)=>{if(v.data&&l[y]){const b=l[y],w=v.data.some(x=>{const S=Array.isArray(x.date_type)?x.date_type[0]:x.date_type;return(S==null?void 0:S.toLowerCase())==="died"});g[b]=w}}),g},[c,l]);lh(n?`Family Tree - ${n.name||((p=n.title)==null?void 0:p.rendered)||n.title||"Person"}`:"Family Tree");const h=k.useMemo(()=>{if(!n||!s.length)return null;try{const g=k4e(s);a.length>0&&T4e(g,a);const v=C4e(r,s,g);return!v||v.nodes.length===0?null:N4e(v,r,u)}catch(g){return console.error("Error building family tree:",g),null}},[n,s,a,r,u]),f=g=>{e(`/people/${g}`)};return i||o?d.jsx("div",{className:"flex items-center justify-center h-64",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):n?d.jsxs("div",{className:"max-w-full mx-auto space-y-6",children:[d.jsx("div",{className:"flex items-center justify-between",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs(Ye,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[d.jsx(C0,{className:"w-4 h-4 md:mr-2"}),d.jsx("span",{className:"hidden md:inline",children:"Back to Person"})]}),d.jsxs("h1",{className:"text-2xl font-bold",children:["Family Tree: ",n.name||((m=n.title)==null?void 0:m.rendered)||n.title||`Person ${t}`]})]})}),d.jsx("div",{className:"card p-6",children:d.jsx("div",{className:"w-full",style:{height:"800px"},children:h&&h.nodes&&h.nodes.length>0?d.jsx(b4e,{graphData:h,startPersonId:r,onNodeClick:f}):d.jsx("div",{className:"flex items-center justify-center h-full",children:d.jsxs("div",{className:"text-center",children:[d.jsx("p",{className:"text-gray-500 mb-2",children:"No family relationships found."}),d.jsx("p",{className:"text-sm text-gray-400",children:"Add parent or child relationships to see the family tree."})]})})})})]}):d.jsxs("div",{className:"card p-6 text-center",children:[d.jsx("p",{className:"text-red-600 mb-4",children:"Failed to load person."}),d.jsx(Ye,{to:"/people",className:"btn-secondary",children:"Back to People"})]})}function j4e(){const{loginUrl:t,isLoggedIn:e}=dM();return Bte(),k.useEffect(()=>{e||(window.location.href=t)},[e,t]),d.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-4"}),d.jsx("p",{className:"text-gray-600",children:"Redirecting to login..."})]})})}function P4e({children:t}){const{data:e,isLoading:r,error:n}=lt({queryKey:["current-user"],queryFn:async()=>(await Ae.getCurrentUser()).data,retry:!1});return r?d.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):n||!e?d.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:d.jsx("div",{className:"max-w-md w-full mx-4",children:d.jsxs("div",{className:"card p-8 text-center",children:[d.jsx("div",{className:"flex justify-center mb-4",children:d.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:d.jsx(Ro,{className:"w-8 h-8 text-yellow-600"})})}),d.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Account Pending Approval"}),d.jsx("p",{className:"text-gray-600 mb-6",children:"Your account is pending approval by an administrator. You will receive an email notification once your account has been approved."}),d.jsx("p",{className:"text-sm text-gray-500",children:"If you have any questions, please contact your administrator."})]})})}):e!=null&&e.is_admin||e.is_approved?t:d.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:d.jsx("div",{className:"max-w-md w-full mx-4",children:d.jsxs("div",{className:"card p-8 text-center",children:[d.jsx("div",{className:"flex justify-center mb-4",children:d.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:d.jsx(Ro,{className:"w-8 h-8 text-yellow-600"})})}),d.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Account Pending Approval"}),d.jsx("p",{className:"text-gray-600 mb-6",children:"Your account is pending approval by an administrator. You will receive an email notification once your account has been approved."}),d.jsx("p",{className:"text-sm text-gray-500",children:"If you have any questions, please contact your administrator."})]})})})}function I4e({children:t}){const{isLoggedIn:e,isLoading:r}=dM();return r?d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e?d.jsx(P4e,{children:t}):d.jsx(Lee,{to:"/login",replace:!0})}function R4e(){return d.jsxs(uF,{children:[d.jsx(bn,{path:"/login",element:d.jsx(j4e,{})}),d.jsx(bn,{path:"/*",element:d.jsx(I4e,{children:d.jsx(Ame,{children:d.jsxs(uF,{children:[d.jsx(bn,{path:"/",element:d.jsx(P_e,{})}),d.jsx(bn,{path:"/people",element:d.jsx(R_e,{})}),d.jsx(bn,{path:"/people/:id/family-tree",element:d.jsx(O4e,{})}),d.jsx(bn,{path:"/people/:id",element:d.jsx(aEe,{})}),d.jsx(bn,{path:"/companies",element:d.jsx(cEe,{})}),d.jsx(bn,{path:"/companies/:id",element:d.jsx(uEe,{})}),d.jsx(bn,{path:"/dates",element:d.jsx(fEe,{})}),d.jsx(bn,{path:"/todos",element:d.jsx(pEe,{})}),d.jsx(bn,{path:"/settings",element:d.jsx(xEe,{})}),d.jsx(bn,{path:"/settings/relationship-types",element:d.jsx(NEe,{})}),d.jsx(bn,{path:"/settings/user-approval",element:d.jsx(kEe,{})}),d.jsx(bn,{path:"*",element:d.jsx(Lee,{to:"/",replace:!0})})]})})})})]})}const M4e=new Dhe({defaultOptions:{queries:{staleTime:5*60*1e3,retry:1}}}),Pj=document.getElementById("root");if(!Pj)console.error('Root element not found! Make sure there is a <div id="root"></div> in your HTML.');else try{Ij.createRoot(Pj).render(d.jsx(be.StrictMode,{children:d.jsx($he,{client:M4e,children:d.jsx(ihe,{children:d.jsx(R4e,{})})})}))}catch(t){console.error("Error mounting React app:",t),Pj.innerHTML='<div style="padding: 20px; color: red;"><h1>Error Loading Application</h1><p>Please check the browser console for details.</p></div>'}
